<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>pkcs11sign.cnf - Configuration for OpenSSL PKCS#11 sign provider module</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/openssl-pkcs11-sign-provider">openssl-pkcs11-sign-provider_1.0.1-0ubuntu3_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       pkcs11sign.cnf - Configuration for OpenSSL PKCS#11 sign provider module

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The  pkcs11-sign-provider  implements  the  OpenSSL  3.0  provider  interface  and provides cryptographic
       operation on asymmetric key material, available in PKCS#11 infrastructure (e.g. opencryptoki).  For  more
       information see <a href="../man7/pkcs11sign.7.html">pkcs11sign</a>(7).

</pre><h4><b>CONFIGURATION</b></h4><pre>
   <b>OpenSSL</b> <b>Configuration</b>
       The  pkcs11-sign-provider  can  be  configured  application-specific  or  system-wide. In both cases, the
       configuration file need to define and reference a section for  the  pkcs11-sign-provider,  following  the
       OpenSSL configuration syntax (<a href="../man5/config.5.html">config</a>(5)).

       The  pkcs11-sign-provider  section  specifies  the shared library of the provider itself (mandatory), the
       shared library of the Cryptoki implementation (mandatory) and initialization parameters for the  Cryptoki
       implementation  (optional).  It is also possible to specify a forward provider. If no forward provider is
       specified, the OpenSSL built-in default-provider is selected.

       The pkcs11-sign-provider must also be preferred in the algorithm-properties, so  that  all  requests  are
       directed  to the pkcs11-sign-provider. This can either be done in the application or in the configuration
       file (recommended).

   <b>Provider</b> <b>Section</b>
       A provider section in the OpenSSL configuration define generic parameters, as well  as  provider-specific
       parameters.  Each  provider  section can be references in a providers sections.  The pkcs11-sign-provider
       requires at least the generic provider section parameters  <u>module</u>,  <u>identity</u>,  and  <u>activate</u>.   For  more
       details about the generic provider parameters, see <a href="../man5/config.5.html">config</a>(5).

       <b>module</b> (mandatory)
              This  parameter takes a path to the provider shared object file. For the pkcs11-sign-provider, use
              the path to the installation location of <u>pkcs11sign.so</u> (provider shared object).

       <b>identity</b> (optional)
              This parameter specifies an alias name for the provider and overrides the  provider  name  in  the
              providers section. It is recommended to use the same name as in the providers.

       <b>activate</b> (optional)
              If present, this parameter activates the provider section.

       The  pkcs11-sign-provider  defines  the  provider specific parameters <u>pkcs11sign-module-path</u>, <u>pkcs11sign-</u>
       <u>module-init-args</u>, and <u>pkcs11sign-forward</u>.

       <b>pkcs11sign-module-path</b> (mandatory)
              This  parameter  takes  the  path  to  the  shared  object  file  of  a  PKCS#11  Cryptoki  module
              implementation.  The  provider can be used with PKCS#11 Cryptoki modules, implementing the PKCS#11
              standard version 3.0 (or compatible).

       <b>pkcs11sign-forward</b> (optional)
              The pkcs11sign-forward parameter takes the name  of  a  provider,  to  which  all  operations  are
              forwarded,  which  are  not  handled  by  the pkcs11-sign-provider itself, e.g. key derivation for
              ECDHE. If this parameter is not specified in the provider section, the  pkcs11-sign-provider  will
              use the built-in OpenSSL default provider as forward.

              The  syntax  for  this  parameter  is "provider=&lt;name_of_forward_provider&gt;". See the configuration
              example for more details.

       <b>pkcs11sign-module-init-args</b> (optional, not PKCS#11-3.0 conform)
              The pkcs11sign-module-init-args takes a parameter string whose reference is passed to the Cryptoki
              module as <u>pReserved</u> in <u>CK_C_INITIALIZE_ARGS</u> during initialization.

              Note: The PKCS#11 standard v3.0 specifies that the initialization of a Cryptoki  module  fails  if
              <u>pReserved</u>  is  not  a NULL_PTR. This parameter will only work with Cryptoki modules (e.g.  libnss)
              which do not implement this strict behavior. A Cryptoki  module,  which  strictly  implements  the
              PKCS#11 standard v3.0 will fail on <u>C_Initialize()</u> with <u>CKR_ARGUMENTS_BAD</u> if this parameter is set.

   <b>EVP</b> <b>Configuration</b> <b>(alg_section)</b>
       This  section configures the algorithm-properties for the EVP API. The pkcs11-sign-provider should be set
       as the preferred provider for all EVP algorithms by adding the expression "?provider=pkcs11sign"  to  the
       <u>default_properties</u>.

   <b>Configuration</b> <b>example</b>
       This example shows a pkcs11-sign-provider configuration for opencryptoki.
           openssl_conf = openssl_init

           [openssl_init]
           providers = provider_sect
           alg_section = evp_properties

           [provider_sect]
           default = default_sect
           base = base_sect
           pkcs11sign = pkcs11sign_sect

           [evp_properties]
           default_properties = ?provider=pkcs11sign

           [pkcs11sign_sect]
           module = /path/to/pkcs11sign.so
           identity = pkcs11sign
           pkcs11sign-module-path = /path/to/libopencryptoki.so.0
           pkcs11sign-forward = provider=default
           activate = 1

</pre><h4><b>ENVIRONMENT</b></h4><pre>
       The  pkcs11-sign-provider  allows to generate a detailed log-file. The log-file generation can be enabled
       by setting the environment variable <u>PKCS11SIGN_DEBUG</u> and <u>PKCS11SIGN_DEBUG_LEVEL</u>.  The internal logging is
       disabled, until the environment variables are set.

       <b>PKCS11SIGN_DEBUG</b>
              This variable specifies the path to the log-file. If specified, it will enable  the  logging.  The
              pkcs11-sign-provider will override an existing file in this location.

       <b>PKCS11SIGN_DEBUG_LEVEL</b>
              This  variable  specifies  the  debugging level. Supported values are <u>error</u> (0), <u>warning</u> (1), <u>info</u>
              (2), and <u>debug</u> (3).

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man5/config.5.html">config</a></b>(5), <b><a href="../man7/pkcs11sign.7.html">pkcs11sign</a></b>(7)

</pre><h4><b>Copyright</b></h4><pre>
       Copyright Â© International Business Machines Corp. 2022, 2023

pkcs11sign.cnf                                     2023-05-17                                  <u><a href="../man5/PKCS11SIGN.CNF.5.html">PKCS11SIGN.CNF</a></u>(5)
</pre>
 </div>
</div></section>
</div>
</body>
</html>