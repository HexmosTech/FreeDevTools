<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>collectd-java - Documentation of collectd's "java plugin"</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/collectd-core">collectd-core_5.12.0-23ubuntu2_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       collectd-java - Documentation of collectd's "java plugin"

</pre><h4><b>SYNOPSIS</b></h4><pre>
        LoadPlugin "java"
        &lt;Plugin "java"&gt;
          JVMArg "-verbose:jni"
          JVMArg "-Djava.class.path=/opt/collectd/lib/collectd/bindings/java"

          LoadPlugin "org.collectd.java.Foobar"
          &lt;Plugin "org.collectd.java.Foobar"&gt;
            # To be parsed by the plugin
          &lt;/Plugin&gt;
        &lt;/Plugin&gt;

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The <u>Java</u> plugin embeds a <u>Java</u> <u>Virtual</u> <u>Machine</u> (JVM) into <u>collectd</u> and provides a Java interface to part
       of collectd's API. This makes it possible to write additions to the daemon in Java.

       This plugin is similar in nature to, but shares no code with, the <u>Perl</u> plugin by Sebastian Harl, see
       <b><a href="../man5/collectd-perl.5.html">collectd-perl</a></b>(5) for details.

</pre><h4><b>CONFIGURATION</b></h4><pre>
       A short outline of this plugin's configuration can be seen in "SYNOPSIS" above. For a complete list of
       all configuration options and their semantics please read "Plugin "java"" in <b><a href="../man5/collectd.conf.5.html">collectd.conf</a></b>(5).

</pre><h4><b>OVERVIEW</b></h4><pre>
       When writing additions for collectd in Java, the underlying C base is mostly hidden from you. All complex
       data types are converted to their Java counterparts before they're passed to your functions. These Java
       classes reside in the <u>org.collectd.api</u> namespace.

       The <u>Java</u> plugin will create one object of each class configured with the <b>LoadPlugin</b> option. The
       constructor of this class can then register "callback methods", i. e. methods that will be called by the
       daemon when appropriate.

       The available classes are:

       <b>org.collectd.api.Collectd</b>
           All  API  functions exported to Java are implemented as static functions of this class. See "EXPORTED
           API FUNCTIONS" below.

       <b>org.collectd.api.OConfigValue</b>
           Corresponds to "oconfig_value_t", defined in <u>src/liboconfig/oconfig.h</u>.

       <b>org.collectd.api.OConfigItem</b>
           Corresponds to "oconfig_item_t", defined in <u>src/liboconfig/oconfig.h</u>.

       <b>org.collectd.api.DataSource</b>
           Corresponds to "data_source_t", defined in <u>src/plugin.h</u>.

       <b>org.collectd.api.DataSet</b>
           Corresponds to "data_set_t", defined in <u>src/plugin.h</u>.

       <b>org.collectd.api.ValueList</b>
           Corresponds to "value_list_t", defined in <u>src/plugin.h</u>.

       <b>org.collectd.api.Notification</b>
           Corresponds to "notification_t", defined in <u>src/plugin.h</u>.

       In the remainder of this document, we'll use the short form of these names,  for  example  <b>ValueList</b>.  In
       order to be able to use these abbreviated names, you need to <b>import</b> the classes.

</pre><h4><b>EXPORTED</b> <b>API</b> <b>FUNCTIONS</b></h4><pre>
       All  collectd API functions that are available to Java plugins are implemented as <u>public</u> <u>static</u> functions
       of the <b>Collectd</b> class. This makes calling these functions pretty straight forward. For example,  to  send
       an error message to the daemon, you'd do something like this:

         Collectd.logError ("That wasn't chicken!");

       The following are the currently exported functions.

   <b>registerConfig</b>
       Signature: <u>int</u> <b>registerConfig</b> (<u>String</u> name, <u>CollectdConfigInterface</u> object);

       Registers the <b>config</b> function of <u>object</u> with the daemon.

       Returns zero upon success and non-zero when an error occurred.

       See "config callback" below.

   <b>registerInit</b>
       Signature: <u>int</u> <b>registerInit</b> (<u>String</u> name, <u>CollectdInitInterface</u> object);

       Registers the <b>init</b> function of <u>object</u> with the daemon.

       Returns zero upon success and non-zero when an error occurred.

       See "init callback" below.

   <b>registerRead</b>
       Signature: <u>int</u> <b>registerRead</b> (<u>String</u> name, <u>CollectdReadInterface</u> object)

       Registers the <b>read</b> function of <u>object</u> with the daemon.

       Returns zero upon success and non-zero when an error occurred.

       See "read callback" below.

   <b>registerWrite</b>
       Signature: <u>int</u> <b>registerWrite</b> (<u>String</u> name, <u>CollectdWriteInterface</u> object)

       Registers the <b>write</b> function of <u>object</u> with the daemon.

       Returns zero upon success and non-zero when an error occurred.

       See "write callback" below.

   <b>registerFlush</b>
       Signature: <u>int</u> <b>registerFlush</b> (<u>String</u> name, <u>CollectdFlushInterface</u> object)

       Registers the <b>flush</b> function of <u>object</u> with the daemon.

       Returns zero upon success and non-zero when an error occurred.

       See "flush callback" below.

   <b>registerShutdown</b>
       Signature: <u>int</u> <b>registerShutdown</b> (<u>String</u> name, <u>CollectdShutdownInterface</u> object);

       Registers the <b>shutdown</b> function of <u>object</u> with the daemon.

       Returns zero upon success and non-zero when an error occurred.

       See "shutdown callback" below.

   <b>registerLog</b>
       Signature: <u>int</u> <b>registerLog</b> (<u>String</u> name, <u>CollectdLogInterface</u> object);

       Registers the <b>log</b> function of <u>object</u> with the daemon.

       Returns zero upon success and non-zero when an error occurred.

       See "log callback" below.

   <b>registerNotification</b>
       Signature: <u>int</u> <b>registerNotification</b> (<u>String</u> name, <u>CollectdNotificationInterface</u> object);

       Registers the <b>notification</b> function of <u>object</u> with the daemon.

       Returns zero upon success and non-zero when an error occurred.

       See "notification callback" below.

   <b>registerMatch</b>
       Signature: <u>int</u> <b>registerMatch</b> (<u>String</u> name, <u>CollectdMatchFactoryInterface</u> object);

       Registers the <b>createMatch</b> function of <u>object</u> with the daemon.

       Returns zero upon success and non-zero when an error occurred.

       See "match callback" below.

   <b>registerTarget</b>
       Signature: <u>int</u> <b>registerTarget</b> (<u>String</u> name, <u>CollectdTargetFactoryInterface</u> object);

       Registers the <b>createTarget</b> function of <u>object</u> with the daemon.

       Returns zero upon success and non-zero when an error occurred.

       See "target callback" below.

   <b>dispatchValues</b>
       Signature: <u>int</u> <b>dispatchValues</b> (<u>ValueList</u>)

       Passes  the  values  represented  by the <b>ValueList</b> object to the "plugin_dispatch_values" function of the
       daemon. The "data set" (or list of "data sources")  associated  with  the  object  are  ignored,  because
       "plugin_dispatch_values" will automatically lookup the required data set. It is therefore absolutely okay
       to leave this blank.

       Returns zero upon success or non-zero upon failure.

   <b>getDS</b>
       Signature: <u>DataSet</u> <b>getDS</b> (<u>String</u>)

       Returns the appropriate <u>type</u> or <b>null</b> if the type is not defined.

   <b>logError</b>
       Signature: <u>void</u> <b>logError</b> (<u>String</u>)

       Sends a log message with severity <b>ERROR</b> to the daemon.

   <b>logWarning</b>
       Signature: <u>void</u> <b>logWarning</b> (<u>String</u>)

       Sends a log message with severity <b>WARNING</b> to the daemon.

   <b>logNotice</b>
       Signature: <u>void</u> <b>logNotice</b> (<u>String</u>)

       Sends a log message with severity <b>NOTICE</b> to the daemon.

   <b>logInfo</b>
       Signature: <u>void</u> <b>logInfo</b> (<u>String</u>)

       Sends a log message with severity <b>INFO</b> to the daemon.

   <b>logDebug</b>
       Signature: <u>void</u> <b>logDebug</b> (<u>String</u>)

       Sends a log message with severity <b>DEBUG</b> to the daemon.

</pre><h4><b>REGISTERING</b> <b>CALLBACKS</b></h4><pre>
       When  starting  up,  collectd  creates  an object of each configured class. The constructor of this class
       should then register "callbacks" with the daemon, using the appropriate static functions in <b>Collectd</b>, see
       "EXPORTED API FUNCTIONS" above. To register a callback, the object being passed to one  of  the  register
       functions must implement an appropriate interface, which are all in the <b>org.collectd.api</b> namespace.

       A  constructor  may register any number of these callbacks, even none. An object without callback methods
       is never actively called by collectd, but may still call the  exported  API  functions.  One  could,  for
       example, start a new thread in the constructor and dispatch (submit to the daemon) values asynchronously,
       whenever one is available.

       Each callback method is now explained in more detail:

   <b>config</b> <b>callback</b>
       Interface: <b>org.collectd.api.CollectdConfigInterface</b>

       Signature: <u>int</u> <b>config</b> (<u>OConfigItem</u> ci)

       This method is passed a <b>OConfigItem</b> object, if both, method and configuration, are available. <b>OConfigItem</b>
       is  the  root  of  a  tree  representing  the  configuration  for  this  plugin.  The  root itself is the
       representation of the <b>&lt;Plugin</b> <b>/&gt;</b> block, so in next to all cases the children of the root  are  the  first
       interesting objects.

       To  signal  success,  this method has to return zero. Anything else will be considered an error condition
       and the plugin will be disabled entirely.

       See "registerConfig" above.

   <b>init</b> <b>callback</b>
       Interface: <b>org.collectd.api.CollectdInitInterface</b>

       Signature: <u>int</u> <b>init</b> ()

       This method is called after the configuration has been handled. It is supposed  to  set  up  the  plugin.
       e. g. start threads, open connections, or check if can do anything useful at all.

       To  signal  success,  this method has to return zero. Anything else will be considered an error condition
       and the plugin will be disabled entirely.

       See "registerInit" above.

   <b>read</b> <b>callback</b>
       Interface: <b>org.collectd.api.CollectdReadInterface</b>

       Signature: <u>int</u> <b>read</b> ()

       This method is called periodically and is supposed  to  gather  statistics  in  whatever  fashion.  These
       statistics are represented as a <b>ValueList</b> object and sent to the daemon using dispatchValues.

       To  signal  success,  this method has to return zero. Anything else will be considered an error condition
       and cause an appropriate message to be logged.  Currently, returning non-zero does  not  have  any  other
       effects.  In  particular,  Java  "read"-methods  are  not  suspended  for  increasing  intervals  like  C
       "read"-functions.

       See "registerRead" above.

   <b>write</b> <b>callback</b>
       Interface: <b>org.collectd.api.CollectdWriteInterface</b>

       Signature: <u>int</u> <b>write</b> (<u>ValueList</u> vl)

       This method is called whenever a value is dispatched to the daemon. The corresponding C "write"-functions
       are passed a "data_set_t", so they can decide which values are absolute  values  (gauge)  and  which  are
       counter  values.   To  get  the  corresponding  "List&lt;DataSource&gt;",  call the <b>getDataSource</b> method of the
       <b>ValueList</b> object.

       To signal success, this method has to return zero. Anything else will be considered  an  error  condition
       and cause an appropriate message to be logged.

       See "registerWrite" above.

   <b>flush</b> <b>callback</b>
       Interface: <b>org.collectd.api.CollectdFlushInterface</b>

       Signature: <u>int</u> <b>flush</b> (<u>int</u> timeout, <u>String</u> identifier)

       This  method is called when the daemon received a flush command. This can either be done using the "USR1"
       signal (see <b><a href="../man1/collectd.1.html">collectd</a></b>(1)) or using the <u>unixsock</u> plugin (see <b><a href="../man5/collectd-unixsock.5.html">collectd-unixsock</a></b>(5)).

       If <u>timeout</u> is greater than zero, only values older than this number of  seconds  should  be  flushed.  To
       signal that all values should be flushed regardless of age, this argument is set to a negative number.

       The  <u>identifier</u>  specifies  which  value  should  be flushed. If it is not possible to flush one specific
       value, flush all values. To signal that all values should be flushed, this argument is set to <u>null</u>.

       To signal success, this method has to return zero. Anything else will be considered  an  error  condition
       and cause an appropriate message to be logged.

       See "registerFlush" above.

   <b>shutdown</b> <b>callback</b>
       Interface: <b>org.collectd.api.CollectdShutdownInterface</b>

       Signature: <u>int</u> <b>shutdown</b> ()

       This method is called when the daemon is shutting down. You should not rely on the destructor to clean up
       behind the object but use this function instead.

       To  signal  success,  this method has to return zero. Anything else will be considered an error condition
       and cause an appropriate message to be logged.

       See "registerShutdown" above.

   <b>log</b> <b>callback</b>
       Interface: <b>org.collectd.api.CollectdLogInterface</b>

       Signature: <u>void</u> <b>log</b> (<u>int</u> severity, <u>String</u> message)

       This callback can be used to receive log messages from the daemon.

       The argument <u>severity</u> is one of:

       •   org.collectd.api.Collectd.LOG_ERR

       •   org.collectd.api.Collectd.LOG_WARNING

       •   org.collectd.api.Collectd.LOG_NOTICE

       •   org.collectd.api.Collectd.LOG_INFO

       •   org.collectd.api.Collectd.LOG_DEBUG

       The function does not return any value.

       See "registerLog" above.

   <b>notification</b> <b>callback</b>
       Interface: <b>org.collectd.api.CollectdNotificationInterface</b>

       Signature: <u>int</u> <b>notification</b> (<u>Notification</u> n)

       This callback can be used to receive notifications from the daemon.

       To signal success, this method has to return zero. Anything else will be considered  an  error  condition
       and cause an appropriate message to be logged.

       See "registerNotification" above.

   <b>match</b> <b>callback</b>
       The  match  (and  target,  see  "target  callback"  below)  callbacks work a bit different from the other
       callbacks above: You don't register a match callback  with  the  daemon  directly,  but  you  register  a
       function  which,  when  called, creates an appropriate object. The object creating the "match" objects is
       called "match factory".

       See "registerMatch" above.

       <u>Factory</u> <u>object</u>

       Interface: <b>org.collectd.api.CollectdMatchFactoryInterface</b>

       Signature: <u>CollectdMatchInterface</u> <b>createMatch</b> (<u>OConfigItem</u> ci);

       Called by the daemon to create "match" objects.

       Returns: A new object which implements the <b>CollectdMatchInterface</b> interface.

       <u>Match</u> <u>object</u>

       Interface: <b>org.collectd.api.CollectdMatchInterface</b>

       Signature: <u>int</u> <b>match</b> (<u>DataSet</u> ds, <u>ValueList</u> vl);

       Called when processing a chain to determine whether or not a <u>ValueList</u> matches. How values are matches is
       up to the implementing class.

       Has to return one of:

       •   <b>Collectd.FC_MATCH_NO_MATCH</b>

       •   <b>Collectd.FC_MATCH_MATCHES</b>

   <b>target</b> <b>callback</b>
       The target (and match, see "match callback"  above)  callbacks  work  a  bit  different  from  the  other
       callbacks  above:  You  don't  register  a  target  callback with the daemon directly, but you register a
       function which, when called, creates an appropriate object. The object creating the "target"  objects  is
       called "target factory".

       See "registerTarget" above.

       <u>Factory</u> <u>object</u>

       Interface: <b>org.collectd.api.CollectdTargetFactoryInterface</b>

       Signature: <u>CollectdTargetInterface</u> <b>createTarget</b> (<u>OConfigItem</u> ci);

       Called by the daemon to create "target" objects.

       Returns: A new object which implements the <b>CollectdTargetInterface</b> interface.

       <u>Target</u> <u>object</u>

       Interface: <b>org.collectd.api.CollectdTargetInterface</b>

       Signature: <u>int</u> <b>invoke</b> (<u>DataSet</u> ds, <u>ValueList</u> vl);

       Called  when  processing  a  chain to perform some action. The action performed is up to the implementing
       class.

       Has to return one of:

       •   <b>Collectd.FC_TARGET_CONTINUE</b>

       •   <b>Collectd.FC_TARGET_STOP</b>

       •   <b>Collectd.FC_TARGET_RETURN</b>

</pre><h4><b>EXAMPLE</b></h4><pre>
       This short example demonstrates how to register a read callback with the daemon:

         import org.collectd.api.Collectd;
         import org.collectd.api.ValueList;

         import org.collectd.api.CollectdReadInterface;

         public class Foobar implements CollectdReadInterface
         {
           public Foobar ()
           {
             Collectd.registerRead ("Foobar", this);
           }

           public int read ()
           {
             ValueList vl;

             /* Do something... */

             Collectd.dispatchValues (vl);
           }
         }

</pre><h4><b>PLUGINS</b></h4><pre>
       The following plugins are implemented in <u>Java</u>. Both, the <b>LoadPlugin</b> option and the <b>Plugin</b> block  must  be
       inside the <b>&lt;Plugin</b> <b>java&gt;</b> block (see above).

   <b>GenericJMX</b> <b>plugin</b>
       The  GenericJMX  plugin  reads  <u>Managed</u>  <u>Beans</u>  (MBeans)  from an <u>MBeanServer</u> using JMX. JMX is a generic
       framework to provide and query various management information. The interface is used by Java processes to
       provide internal statistics as well as by the <u>Java</u> <u>Virtual</u> <u>Machine</u> (JVM) to provide information about the
       memory used, threads and so on.

       The configuration of the <u>GenericJMX</u> <u>plugin</u> consists of two blocks: <u>MBean</u> blocks that define a mapping  of
       MBean  attributes  to  the  “types”  used  by <u>collectd</u>, and <u>Connection</u> blocks which define the parameters
       needed to connect to an <u>MBeanServer</u> and what data to collect. The configuration of  the  <u>SNMP</u>  <u>plugin</u>  is
       similar in nature, in case you know it.

       <u>MBean</u> <u>blocks</u>

       <u>MBean</u>  blocks specify what data is retrieved from <u>MBeans</u> and how that data is mapped on the <u>collectd</u> data
       types. The block requires one string argument, a name. This name is used in the  <u>Connection</u>  blocks  (see
       below) to refer to a specific <u>MBean</u> block. Therefore, the names must be unique.

       The following options are recognized within <u>MBean</u> blocks:

       <b>ObjectName</b> <u>pattern</u>
           Sets  the  pattern  which is used to retrieve <u>MBeans</u> from the <u>MBeanServer</u>.  If more than one MBean is
           returned you should use the <b>InstanceFrom</b> option (see below) to make the identifiers unique.

           See also: &lt;<a href="http://java.sun.com/javase/6/docs/api/javax/management/ObjectName.html">http://java.sun.com/javase/6/docs/api/javax/management/ObjectName.html</a>&gt;

       <b>InstancePrefix</b> <u>prefix</u>
           Prefixes the generated <u>plugin</u> <u>instance</u> with <u>prefix</u>. <u>(optional)</u>

       <b>InstanceFrom</b> <u>property</u>
           The <u>object</u> <u>names</u> used by JMX to identify <u>MBeans</u> include so called <u>“properties”</u>  which  are  basically
           key-value-pairs.  If the given object name is not unique and multiple MBeans are returned, the values
           of those properties usually differ. You can use this option to build the  <u>plugin</u>  <u>instance</u>  from  the
           appropriate  property  values.  This  option  is  optional and may be repeated to generate the <u>plugin</u>
           <u>instance</u> from multiple property values.

       <b>&lt;value</b> <b>/&gt;</b> blocks
           The <u>value</u> blocks map one or more attributes of an <u>MBean</u> to a value list in <u>collectd</u>. There must be at
           least one Value block within each <u>MBean</u> block.

           <b>Type</b> type
               Sets the data set used within <u>collectd</u> to handle the values of the <u>MBean</u> attribute.

           <b>InstancePrefix</b> <u>prefix</u>
               Works like the option of the same name directly beneath  the  <u>MBean</u>  block,  but  sets  the  type
               instance instead. <u>(optional)</u>

           <b>InstanceFrom</b> <u>prefix</u>
               Works  like  the  option  of  the  same  name directly beneath the <u>MBean</u> block, but sets the type
               instance instead. <u>(optional)</u>

           <b>PluginName</b> <u>name</u>
               When set, overrides the default setting for the <u>plugin</u> field ("GenericJMX").

           <b>Table</b> <b>true</b>|<b>false</b>
               Set this to true if the returned attribute is a <u>composite</u> <u>type</u>. If set to true, the  keys  within
               the <u>composite</u> <u>type</u> is appended to the <u>type</u> <u>instance</u>.

           <b>Attribute</b> <u>path</u>
               Sets the name of the attribute from which to read the value. You can access the keys of composite
               types  by  using  a  dot  to  concatenate  the  key  name  to  the  attribute  name. For example:
               “attrib0.key42”. If <b>Table</b> is set to <b>true</b> <u>path</u> must point to a <u>composite</u> <u>type</u>, otherwise  it  must
               point to a numeric type.

       <u>Connection</u> <u>blocks</u>

       Connection  blocks  specify  <u>how</u>  to  connect  to an <u>MBeanServer</u> and what data to retrieve. The following
       configuration options are available:

       <b>Host</b> <u>name</u>
           Host name used when dispatching the values to <u>collectd</u>. The option sets this field only,  it  is  <u>not</u>
           used to connect to anything and doesn't need to be a real, resolvable name.

       <b>ServiceURL</b> <u>URL</u>
           Specifies how the <u>MBeanServer</u> can be reached. Any string accepted by the <u>JMXServiceURL</u> is valid.

           See also: &lt;<a href="http://java.sun.com/javase/6/docs/api/javax/management/remote/JMXServiceURL.html">http://java.sun.com/javase/6/docs/api/javax/management/remote/JMXServiceURL.html</a>&gt;

       <b>User</b> <u>name</u>
           Use <u>name</u> to authenticate to the server. If not configured, “monitorRole” will be used.

       <b>Password</b> <u>password</u>
           Use <u>password</u> to authenticate to the server. If not given, unauthenticated access is used.

       <b>InstancePrefix</b> <u>prefix</u>
           Prefixes  the  generated  <u>plugin</u>  <u>instance</u>  with <u>prefix</u>. If a second <u>InstancePrefix</u> is specified in a
           referenced <u>MBean</u> block, the prefix specified in the <u>Connection</u> block will appear at the beginning  of
           the <u>plugin</u> <u>instance</u>, the prefix specified in the <u>MBean</u> block will be appended to it.

       <b>Collect</b> <u>mbean_block_name</u>
           Configures which of the <u>MBean</u> blocks to use with this connection. May be repeated to collect multiple
           <u>MBeans</u> from this server.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man1/collectd.1.html">collectd</a></b>(1), <b><a href="../man5/collectd.conf.5.html">collectd.conf</a></b>(5), <b><a href="../man5/collectd-perl.5.html">collectd-perl</a></b>(5), <b><a href="../man5/types.db.5.html">types.db</a></b>(5)

</pre><h4><b>AUTHOR</b></h4><pre>
       Florian Forster &lt;octo at collectd.org&gt;

5.12.0.git                                         2025-08-07                                   <u><a href="../man5/COLLECTD-JAVA.5.html">COLLECTD-JAVA</a></u>(5)
</pre>
 </div>
</div></section>
</div>
</body>
</html>