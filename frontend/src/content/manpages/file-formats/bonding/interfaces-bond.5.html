<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>interfaces-bond - Bonding/LAG extensions for the interfaces(5) file format</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/ifupdown-ng">ifupdown-ng_0.12.1-7_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       <b>interfaces-bond</b> - Bonding/LAG extensions for the <a href="../man5/interfaces.5.html">interfaces</a>(5) file format

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The Linux implementation for Ling Aggregation Groups (LAGs) is called <u>bonding</u>, whereas a LAG interface is
       called  <u>bond</u>. The Linux bonding implementation supports active/passive setups, classical EtherChannels as
       well as LACP (802.3ad).

       The following options set up bonding/LAG interfaces with ifupdown-ng.

       See https://www.kernel.org/doc/Documentation/networking/bonding.rst and for more information.

</pre><h4><b>BOND-RELATED</b> <b>OPTIONS</b></h4><pre>
       A bond interface must have at least one member port set. All other options are optional.

       <b>bond-members</b> <u>list</u> <u>of</u> <u>interfaces</u>
           Denotes the physical member interfaces to form this LAG. For compatiblity to ifupdown1 and  ifupdown2
           <u>slaves</u> as well as <u>bond-slaves</u> are an alias for this option. This option is required.

       <b>bond-mode</b> <u>mode</u>
           Denotes  the  mode  for this LAG. The <u>mode</u> can be given as string or as numerical value. Valid values
           are <u>balance-rr</u> (0), <u>active-backup</u> (1), <u>balance-xor</u> (2), <u>broadcast</u> (3), <u>802.3ad</u> (4), <u>balance-tlb</u>  (5),
           <u>balance-alb</u> (6). The default is <u>balance-rr</u>.

       <b>bond-xmit-hash-policy</b> <u>policy</u>
           Denotes  the  hash  policy/algorithm  used to distribute packets across the physical links. This only
           applies for modes <u>balance-alb</u>, <u>balance-tlb</u>, <u>balance-xor</u>, and <u>802.3ad</u>. The  <u>policy</u>  can  be  given  as
           string  or as numerical value. Valid values are <u>layer2</u> (0), <u>layer3+4</u> (1), <u>layer2+3</u> (2), <u>encap2+3</u> (3),
           and <u>encap3+4</u> (4). The default is <u>layer2</u>.

       <b>bond-min-links</b> <u>number</u>
           Denotes the minimum number of available links before turning on carrier.

       <b>bond-miimon</b> <u>interval</u>
           Denotes the MII link monitoring frequency in milliseconds. This determines how often the  link  state
           of  each  slave  is  inspected  for  link failures. A value of zero disables MII link monitoring. The
           default is 0.

       <b>bond-use-carrier</b> <u>bool</u>
           Denotes wether miimon uses MII or ethtool ioctls vs. the netif_carrier_ok() call to determine  member
           link status. A value of 1 enables the use of netif_carrier_ok(), a value of 0 will use the deprecated
           MII / ETHTOOL ioctls. The default is 1.

       <b>bond-updelay</b> <u>delay</u>
           Denotes the delay in milliseconds before considering link up, in milliseconds. The default is 0.

       <b>bond-downdelay</b> <u>delay</u>
           Denotes the delay in milliseconds before considering link down, in milliseconds. The default is 0.

       <b>bond-all-slaves-active</b> <u>bool</u>
           Denotes  wether duplicate frames (received on inactive ports) should be dropped (0) or delivered (1).
           The default is 0.

       <b>bond-packets-per-slave</b> <u>num_packets</u>
           Denotes the number of packets to transmit through a member before moving to the next one. When set to
           0 then a slave is chosen at random. The valid range is 0 - 65535; the default value is 1. This option
           has effect only in balance-rr mode.

       <b>bond-lp-interval</b> <u>interval</u>
           Denotes the interval in seconds between sending learning packets to each  members  peer  switch.  The
           valid  range is 1 - 0x7fffffff; the default value is 1. This option has effect only in modes balance-
           tlb and balance-alb.

       <b>bond-resend-igmp</b> <u>number</u>
           Denotes the number of IGMP membership reports to send after a link failover happend. The valid  range
           is  0  -  255;  a value of 0 prevents the IGMP membership report from being issued in response to the
           failover event. The default is 1. This option is useful for bonding modes  balance-rr,  active-backup
           balance-tlb  and  balance-alb,  in  which  a  failover  can switch the IGMP traffic from one slave to
           another.

</pre><h4><b>LACP-RELATED</b> <b>OPTIONS</b></h4><pre>
       The following options are only valid in LACP (802.3ad) mode.

       <b>bond-lacp-rate</b> <u>rate</u>
           Denotes the <u>rate</u> of LACPDU requested from the peer. The <u>rate</u> can be given as string or  as  numerical
           value. Valid values are slow (0) and fast (1). The default is slow.

       <b>bond-ad-select</b> <u>mode</u>
           Denotes  the  802.3ad  aggregation  selection  logic. The <u>mode</u> can be given as string or as numerical
           value. Valid values are <u>stable</u> (0), <u>bandwidth</u> (1) and <u>cound</u> (2). The default is <u>stable</u>.

       <b>bond-ad-actor-sys-prio</b> <u>priority</u>
           Denotes the LACP system priority. The allowed range is 1 - 65535. The default value is 65535.

       <b>bond-ad-user-port-key</b> <u>key</u>
           Denotes the upper 10 bits of the port-key. he values can be from 0 - 1023. The default is 0.

</pre><h4><b>ACTIVE/BACKUP-RELATED</b> <b>OPTIONS</b></h4><pre>
       The following options are only valid in active/passive setups.

       <b>bond-primary</b> <u>interface</u>
           Denotes the primary member interface The specified device will always be the active slave while it is
           available. The primary option is only valid for active-backup, balance-tlb and balance-alb mode.

       <b>bond-primary-reselect</b> <u>policy</u>
           Denotes the reselection policy for the primary member interface. Valid values are <u>always</u> (0),  <u>better</u>
           (1), and <u>failure</u> (2). The default is <u>always</u>.

       <b>bond-fail-over-mac</b> <u>mode</u>
           Denotes  whether  active-backup  mode  should  set  all  member interfaces to the same MAC address at
           enslavement (the traditional behavior), or, when enabled, perform special handling of the bond's  MAC
           address  in  accordance  with the selected policy. Valid values are <u>none</u> (0), <u>active</u> (1), <u>follow</u> (2).
           The default is <u>none</u>.

       <b>bond-num-grat-arp</b> <u>count</u>
           Denotes  the  number  of  peer  notifications  (gratuitous  ARPs  and   unsolicited   IPv6   Neighbor
           Advertisements) to be issued after a failover event. The valid range is 0 - 255; the default is 1.

       <b>bond-num-unsol-na</b> <u>count</u>
           This is an alias for <u>bond-num-grat-arp</u>

       <b>bond-peer-notif-delay</b> <u>interval</u>
           Denotes  the interval in milliseconds, between each peer notification (gratuitous ARP and unsolicited
           IPv6 Neighbor Advertisement) issued after a failover event. The default is 0 which means to match the
           value of the link monitor interval.

</pre><h4><b>ARP-RELATED</b> <b>OPTIONS</b></h4><pre>
       The following options configure ARP link monitoring. The ARP monitor works by periodically  checking  the
       slave  devices  to  determine  whether  they  have  sent or received traffic recently. Regular traffic is
       generated via ARP probes issued for the addresses specified by the <u>bond-arp-ip-target</u> option.

       <b>bond-arp-interval</b> <u>interval</u>
           Denotes the frequency in milliseconds to send ARP probes.

       <b>bond-arp-ip-target</b> <u>IPv4</u> <u>address</u>
           Denotes the IP addresses to use as ARP monitoring peers when <u>bond-arp-interval</u> is &gt; 0.

       <b>bond-arp-validate</b> <u>mode</u>
           Specifies whether or not ARP probes and replies should be validated in any  mode  that  supports  arp
           monitoring, or whether non-ARP traffic should be filtered (disregarded) for link monitoring purposes.
           Valid  values  are  <u>none</u>  (0),  <u>active</u>  (1),  <u>backup</u> (2), <u>all</u> (3), <u>filter</u> (4), <u>filter_active</u> (5), and
           <u>filter_backup</u> (6). The default is <u>none</u>.

       <b>bond-arp-all-targets</b> <u>mode</u>
           Denotes the number of <u>bond-arp-ip-targets</u> that have to be reachable to consider the member  interface
           to be up. Valid options are <u>any</u> (0) and <u>all</u> (1). The default is <u>any</u>.

</pre><h4><b>EXAMPLES</b></h4><pre>
       A bond using two links and LACP (802.3ad):

           auto bond0
           iface bond0
                bond-members eth0 eth1
                bond-mode 802.3ad
                bond-xmit-hash-policy layer3+4
                bond-min-links 1
                #
                address 192.0.2.42/24
                address 2001:db8::42/64

</pre><h4><b>AUTHORS</b></h4><pre>
       Maximilian Wilhelm &lt;<a href="mailto:max@sdn.clinic">max@sdn.clinic</a>&gt;

                                                   2025-03-25                                 <u><a href="../man5/interfaces-bond.5.html">interfaces-bond</a></u>(5)
</pre>
 </div>
</div></section>
</div>
</body>
</html>