<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CellServDB - Lists the database server machines in AFS cells</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/openafs-client">openafs-client_1.8.13.2-1ubuntu1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       CellServDB - Lists the database server machines in AFS cells

</pre><h4><b>DESCRIPTION</b></h4><pre>
       There are two versions of the <u>CellServDB</u> file, both of which have the same format.  One version is used
       by an AFS client and lists all of the database server machines in the local cell and any foreign cell
       that is to be accessible from the local client machine.  The other version is used on servers and need
       list only the database servers in the local cell; in some configurations it can be a link to the same
       file the client uses.

   <b>Client</b> <b>CellServDB</b>
       Along with AFSDB and SRV entries in DNS, the client version of the CellServDB file lists the database
       server machines in the local cell and any foreign cell that is to be accessible from the local client
       machine. Database server machines run the Authentication Server (optional), Backup Server (optional),
       Protection Server, and Volume Location (VL) Server (the <b>kaserver</b>, <b>buserver</b>, <b>ptserver</b>, and <b>vlserver</b>)
       processes, which maintain the cell's administrative AFS databases.

       The Cache Manager and other processes running on a client machine use the list of a cell's database
       server machines when performing several common functions, including:

       •   Fetching  files.  The  Cache  Manager  contacts  the  VL  Server  to learn the location of the volume
           containing a requested file or directory.

       •   Creating, viewing, and manipulating protection groups.  The  <b>pts</b>  command  interpreter  contacts  the
           Protection  Server  when  users  create  protection groups or request information from the Protection
           Database.

       •   Populating the contents of the fake <u>root.afs</u> volume mounted at <u>/afs</u> (or the alternative  mount  point
           specified  in <u>cacheinfo</u>) when <b>afsd</b> is run in "-dynroot" mode.  The default contents of this directory
           will match the cells listed in the client <u>CellServDB</u> file.

       •   Authenticating users. Client-side authentication programs (such as an AFS-modified login  utility  or
           the  <b>klog</b> command interpreter) contact the Authentication Server to obtain a server ticket, which the
           AFS server processes accept as proof that the user is authenticated. This only applies to  AFS  cells
           using the deprecated Authentication Server instead of Kerberos v5 and <b>aklog</b>.

       The Cache Manager reads the CellServDB file into kernel memory as it initializes, and not again until the
       machine  next  reboots  or  the client service restarts. To enable users on the local machine to continue
       accessing the cell correctly, update the file whenever a database server machine is added to  or  removed
       from a cell. To update the kernel-resident list of database server machines without rebooting, use the <b>fs</b>
       <b>newcell</b> command.

       If  the  client  attempts  to  access  an AFS cell not listed in <u>CellServDB</u> and <b>afsd</b> was started with the
       <b>-afsdb</b> option, the Cache Manager will attempt a DNS SRV or AFSDB record lookup and  dynamically  add  the
       database  server  locations for that cell based on the result of the DNS query.  If the <b>-afsdb</b> option was
       not used, all AFS cells that will be accessed by a client machine must either be listed in <u>CellServDB</u>  or
       added with the <b>fs</b> <b>newcell</b> command.

       The  <u>CellServDB</u>  file is in ASCII format and must reside in the <u>/etc/openafs</u> directory on each AFS client
       machine. Use a text editor to create and maintain it.

       The client version of the <u>CellServDB</u> file is distinct from the  server  version,  which  resides  in  the
       <u>/etc/openafs/server</u>  directory  on  each AFS server machine. The client version lists the database server
       machines in every AFS cell that the cell administrator wants the machine's users to be  able  to  access,
       whereas the server version lists only the local cell's database server machines.

   <b>Server</b> <b>CellServDB</b>
       The server version of the <u>CellServDB</u> file lists the local cell's database server machines. These machines
       run  the  Authentication  Server  (optional),  Backup  Server  (optional),  Protection Server, and Volume
       Location (VL) Server (the <b>kaserver</b>, <b>buserver</b>, <b>ptserver</b>,  and  <b>vlserver</b>)  processes,  which  maintain  the
       cell's  administrative AFS databases. The initial version of the file is created with the <b>bos</b> <b>setcellname</b>
       command during the installation of the cell's server machine, which  is  automatically  recorded  as  the
       cell's first database server machine. When adding or removing database server machines, be sure to update
       this  file appropriately. It must reside in the <u>/etc/openafs/server</u> directory on each AFS server machine.
       The database server processes, in addition to  the  usual  configuration  allowing  each  to  be  elected
       synchronization  site  and  coordinate  updates,  can  be set up as readonly database clone servers. Such
       servers can never be elected as the synchronization site.

       The database server processes consult the <u>CellServDB</u> file to learn about their  peers,  with  which  they
       must  maintain  constant  connections  in  order to coordinate replication of changes across the multiple
       copies of each database. The other AFS server processes consult the  file  to  learn  which  machines  to
       contact for information from the databases when they need it.

       Although  the  server  <u>CellServDB</u>  file is in ASCII format, do not use a text editor to alter it. Instead
       always use the appropriate commands from the <b>bos</b> command suite:

       •   The <b>bos</b> <b>addhost</b> command to add a machine to the file.

       •   The <b>bos</b> <b>listhosts</b> command to display the list of machines from the file.

       •   The <b>bos</b> <b>removehost</b> command to remove a machine from the file.

       In cells that use the Update Server to distribute the contents of the <u>/etc/openafs/server</u>  directory,  it
       is  customary to edit only the copy of the file stored on the system control machine. Otherwise, edit the
       file on each server machine individually.  For  instructions  on  adding  and  removing  database  server
       machine,  see  the  <u>OpenAFS</u>  <u>Quick</u> <u>Start</u> chapter on installing additional server machines. Updates to the
       server <u>CellServDB</u> will trigger reloading the cell server configurations automatically in the  AFS  server
       processes.

   <b>CellServDB</b> <b>Format</b>
       Both <u>CellServDB</u> files have the same format:

       •   The  first line begins at the left margin with the greater-than character ("&gt;"), followed immediately
           by the cell's name without an intervening space. Optionally, a  comment  can  follow  any  number  of
           spaces  and  a  octothorpe  ("#"),  perhaps  to identify the organization associated with the cell. A
           variant of this allows the definition of a linked cell: after the leading  ("&gt;")  and  cell  name,  a
           space and a second cell name may be listed before the optional spaces, octothorpe and comment.

       •   Each  subsequent  line  in  the entry identifies one of the cell's database server machines, with the
           indicated information in order:

           •   The database server machine's IP address in dotted-decimal format, optionally enclosed in  square
               braces ("[")("]") to define a non-voting clone.

           •   One or more spaces.

           •   An  octothorpe  (#),  followed  by  the machine's fully qualified hostname without an intervening
               space. This number sign does not indicate that the hostname is a comment. It is a required field.

       No extra blank lines or newline characters are allowed in the file, even  after  the  last  entry.  Their
       presence  can  prevent  the Cache Manager from reading the file into kernel memory, resulting in an error
       message.

       For the client <u>CellServDB</u>, it may be desirable to make the client aware of a cell (so that it's listed by
       default in <u>/afs</u> when the <b>-dynroot</b> flag to <b>afsd</b> is in use, for instance) without specifying  the  database
       server  machines for that cell.  This can be done by including only the cell line (starting with "&gt;") and
       omitting any following database server machine lines. <b>afsd</b> must be configured with the <b>-afsdb</b>  option  to
       use DNS SRV or AFSDB record lookups to locate database server machines.  If the cell has such records and
       the  client  is configured to use them, this configuration won't require updates to the client <u>CellServDB</u>
       file when the IP addresses of the database server machines change.

       grand.central.org maintains a list of the database server machines in  all  cells  that  have  registered
       themselves  as  receptive  to access from foreign cells. When a cell's administrators change its database
       server machines, it is customary to register the change with  grand.central.org  for  inclusion  in  this
       file.  The file conforms to the required <u>CellServDB</u> format, and so is a suitable basis for the <u>CellServDB</u>
       file on a client machine.  You can download this file from &lt;<a href="http://grand.central.org/">http://grand.central.org/</a>&gt;.

</pre><h4><b>EXAMPLES</b></h4><pre>
       The following example shows entries for two cells  in  a  client  <u>CellServDB</u>  file  and  illustrates  the
       required format.

          &gt;example.com         # Example Corporation
          192.12.105.2         #db1.example.com
          192.12.105.3         #db2.example.com
          [192.12.107.3]       #db3.example.com
          &gt;test.example.com example.com   # Example Corporation Test Cell
          192.12.108.57        #testdb1.example.com
          192.12.108.55        #testdb2.example.com

       The  following  example shows entries for two linked cells in a client <u>CellServDB</u> file. The a.example.com
       cell is linked to the b.example.com cell.

          &gt;b.example.com # B cell
          192.12.108.57 # db1.b.example.com
          &gt;a.example.com b.example.com # A cell
          192.12.105.2 # db1.a.example.com

       In such a setup, if a client is looking for a volume in cell a.example.com and that volume doesn't exist,
       the client will try to find that volume again in cell b.example.com. The order  is  important.  You  must
       list the cell being linked before the cell doing the linking.

       The  Windows  client  supports  linking  in  two directions. The UNIX client does not allow bidirectional
       linkage.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man8/afsd.8.html">afsd</a></b>(8),   <b><a href="../man8/bos_addhost.8.html">bos_addhost</a></b>(8),   <b><a href="../man8/bos_listhosts.8.html">bos_listhosts</a></b>(8),   <b><a href="../man8/bos_removehost.8.html">bos_removehost</a></b>(8),   <b><a href="../man8/bos_setcellname.8.html">bos_setcellname</a></b>(8),    <b><a href="../man8/buserver.8.html">buserver</a></b>(8),
       <b><a href="../man1/fs_newcell.1.html">fs_newcell</a></b>(1), <b><a href="../man8/kaserver.8.html">kaserver</a></b>(8), <b><a href="../man1/klog.1.html">klog</a></b>(1), <b><a href="../man8/ptserver.8.html">ptserver</a></b>(8), <b><a href="../man8/vlserver.8.html">vlserver</a></b>(8), <b><a href="../man8/upclient.8.html">upclient</a></b>(8), <b><a href="../man8/upserver.8.html">upserver</a></b>(8)

       <u>OpenAFS</u> <u>Quick</u> <u>Start</u>

</pre><h4><b>COPYRIGHT</b></h4><pre>
       IBM Corporation 2000. &lt;<a href="http://www.ibm.com/">http://www.ibm.com/</a>&gt; All Rights Reserved.

       This  documentation  is covered by the IBM Public License Version 1.0.  It was converted from HTML to POD
       by software written by Chas Williams and Russ Allbery, based on  work  by  Alf  Wachsmann  and  Elizabeth
       Cassell.

OpenAFS                                            2025-03-21                                      <u><a href="../man5/CELLSERVDB.5.html">CELLSERVDB</a></u>(5)
</pre>
 </div>
</div></section>
</div>
</body>
</html>