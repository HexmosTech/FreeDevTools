<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BosConfig - Defines server processes for the BOS Server to monitor</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/openafs-fileserver">openafs-fileserver_1.8.13.2-1ubuntu1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       BosConfig - Defines server processes for the BOS Server to monitor

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The <u>BosConfig</u> file lists the processes that the Basic OverSeer (BOS) Server monitors on its server
       machine, and thus defines which AFS server processes run on the machine. It specifies how the BOS Server
       reacts when a process fails, and also defines the times at which the BOS Server automatically restarts
       processes as part of performance maintenance.  The file must reside in the <u>/var/lib/openafs/local</u>
       directory on each AFS server machine.

       A server process entry in the <u>BosConfig</u> file records the following information:

       •   The <u>entry</u> <u>type</u>, which is one of the following:

           cron
               Designates a server process that runs periodically instead of continuously. The BOS Server starts
               a  cron  process only at specified times, not whenever it fails. All standard AFS process entries
               except "fs" are simple (there are no standard cron processes).

           fs  Designates a group of interdependent server processes. If one of the  processes  fails,  the  BOS
               Server must coordinate its restart with the restart of the other processes in the group, possibly
               by stopping them first.

               There  is  only  one  standard  entry  of  this type, for which the conventional name is "fs". It
               combines three server  processes:  the  File  Server  (<b>fileserver</b>  process),  the  Volume  Server
               (<b>volserver</b> process), and the Salvager (<b>salvager</b> process). These processes all operate on the same
               data--the  AFS  data  stored  on an AFS server machine's <u>/vicep</u> partitions and mounted in the AFS
               filespace--but in different ways. Grouping the processes prevents them from attempting to  access
               the same data simultaneously, which can cause corruption.

               During  normal  operation,  the Salvager process is not active. If the File Server process fails,
               however, the BOS Server stops the Volume Server process and runs the Salvager process to  correct
               any  corruption that resulted from the failure. (The administrator can also issue the <b>bos</b> <b>salvage</b>
               command to invoke the Salvager process.) If the Volume Server fails, the BOS Server  can  restart
               it without stopping the File Server or running the Salvager.

           simple
               Designates  a  server  process  that  runs independently of any other on the server machine. If a
               simple process fails, the BOS Server does not have to  coordinate  its  restart  with  any  other
               process.

       •   The  <u>entry</u>  <u>name</u>. The conventional name for an entry in the <u>BosConfig</u> file and the associated process
           matches the binary filename. When issuing any <b>bos</b> command that takes the <b>-instance</b> argument, identify
           each process by the name used in the <u>BosConfig</u> file. For a list of the  names,  see  the  <b>bos</b>  <b>create</b>
           reference page.

       •   The  process's  <u>status</u> <u>flag</u>, which determines whether the BOS Server attempts to start the process in
           two cases: each time the BOS Server itself restarts, and when the process fails. The  <u>BosConfig</u>  file
           currently  uses  a binary notation to indicate whether the BOS Server attempts to restart the process
           as necessary or does not monitor it at all. For the sake of clarity, the AFS documentation refers  to
           the flags as "Run" and "NotRun" instead.  Only a system administrator, not the BOS Server, can change
           the flag.

       •   One  or  more  <u>command</u>  <u>parameters</u>  which  the  BOS  Server invokes to start the process or processes
           associated with the entry:

           •   A "cron" entry has two command parameters, the first the complete pathname to  the  program,  and
               the second the time at which the BOS Server invokes the program.

           •   The  "fs"  entry  has  three  command  parameters,  each the complete pathname to the <b>fileserver</b>,
               <b>volserver</b>, and <b>salvager</b> programs, in that order.

           •   A "simple" entry has only one command parameter, the complete pathname to the program.

       In addition to server process entries, the <u>BosConfig</u> file specifies the times at  which  the  BOS  Server
       performs two types of automatic process restarts:

       •   The  <u>general</u> <u>restart</u> time at which the BOS Server restarts itself and then each process for which the
           entry in the <u>BosConfig</u> file has status flag "Run". The default setting is Sunday at 4:00 a.m.

       •   The <u>binary</u> <u>restart</u> time at which the BOS Server restarts any server process for which the time  stamp
           on  the  binary  file  in  the <u>/usr/lib/openafs</u> directory is later than the last restart time for the
           process. The default is 5:00 a.m.

       Finally, there is an entry specifying whether the BOS Server will start in restricted mode.

       Although the <u>BosConfig</u> file is in ASCII format, it is normally best not to use a text editor to alter it.
       The parser is very picky, and incorrectly formatted entries can prevent server startup in ways  that  are
       difficult to diagnose. Instead, use the appropriate commands from the <b>bos</b> command suite:

       •   The <b>bos</b> <b>create</b> command to create an entry in the file and start the associated process.

       •   The  <b>bos</b>  <b>delete</b>  command to remove an entry from the file after the <b>bos</b> <b>stop</b> command is used to stop
           the associated process.

       •   The <b>bos</b> <b>getrestart</b> command to display the times at which the BOS Server performs automatic restarts.

       •   The <b>bos</b> <b>getrestricted</b> command to display whether the BOS Server is running in restricted mode.

       •   The <b>bos</b> <b>setrestart</b> command to set the times at  which  the  BOS  Server  performs  automatic  process
           restarts.

       •   The <b>bos</b> <b>setrestricted</b> command to place the BOS Server in restricted mode.

       •   The <b>bos</b> <b>start</b> command to change an entry's status flag to "Run" and start the associated process.

       •   The <b>bos</b> <b>status</b> command to display all processes listed in the file.

       •   The <b>bos</b> <b>stop</b> command to change an entry's status flag to "NotRun" and stop the associated process.

       There are also bos commands that start and stop processes without changing entries in the <u>BosConfig</u> file.
       The  BOS  Server  reads  the  <u>BosConfig</u>  file  only when it starts, transferring the information into its
       memory. Thus a process's status as represented in the BOS Server's memory can diverge from its status  in
       the <u>BosConfig</u> file. The following commands change a process's status in the BOS Server's memory only:

       •   The  <b>bos</b> <b>restart</b> command restarts a specified set of processes, all processes, or all processes other
           than the BOS Server.

       •   The <b>bos</b> <b>shutdown</b> command stops a process.

       •   The <b>bos</b> <b>startup</b> command starts a process.

       When the BOS Server shuts down, it rewrites <u>BosConfig</u>, discarding any changes made manually to that file.
       To change the configuration for the next BOS Server restart, instead write a new file  to  <u>BosConfig.new</u>.
       If  <u>BosConfig.new</u>  exists  when the BOS Server starts, <u>BosConfig</u> will be replaced by <u>BosConfig.new</u> before
       the BOS Server reads its configuration.  Note that the BOS Server will notice a  new  <u>BosConfig.new</u>  file
       whenever  the <u>general</u> <u>restart</u> time is reached, if one is configured, since the BOS Server restarts itself
       at that time.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man8/bos_create.8.html">bos_create</a></b>(8), <b><a href="../man8/bos_delete.8.html">bos_delete</a></b>(8), <b><a href="../man8/bos_getrestart.8.html">bos_getrestart</a></b>(8), <b><a href="../man8/bos_getrestricted.8.html">bos_getrestricted</a></b>(8), <b><a href="../man8/bos_restart.8.html">bos_restart</a></b>(8), <b><a href="../man8/bos_setrestart.8.html">bos_setrestart</a></b>(8),
       <b><a href="../man8/bos_setrestricted.8.html">bos_setrestricted</a></b>(8),  <b><a href="../man8/bos_shutdown.8.html">bos_shutdown</a></b>(8),   <b><a href="../man8/bos_start.8.html">bos_start</a></b>(8),   <b><a href="../man8/bos_startup.8.html">bos_startup</a></b>(8),   <b><a href="../man8/bos_status.8.html">bos_status</a></b>(8),   <b><a href="../man8/bos_stop.8.html">bos_stop</a></b>(8),
       <b><a href="../man8/bos_salvage.8.html">bos_salvage</a></b>(8), <b><a href="../man8/fileserver.8.html">fileserver</a></b>(8), <b><a href="../man8/salvager.8.html">salvager</a></b>(8), <b><a href="../man8/volserver.8.html">volserver</a></b>(8)

</pre><h4><b>COPYRIGHT</b></h4><pre>
       IBM Corporation 2000. &lt;<a href="http://www.ibm.com/">http://www.ibm.com/</a>&gt; All Rights Reserved.

       This  documentation  is covered by the IBM Public License Version 1.0.  It was converted from HTML to POD
       by software written by Chas Williams and Russ Allbery, based on  work  by  Alf  Wachsmann  and  Elizabeth
       Cassell.

OpenAFS                                            2025-03-21                                       <u><a href="../man5/BOSCONFIG.5.html">BOSCONFIG</a></u>(5)
</pre>
 </div>
</div></section>
</div>
</body>
</html>