<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KeyFile - Defines AFS server encryption keys</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/openafs-fileserver">openafs-fileserver_1.8.13.2-1ubuntu1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       KeyFile - Defines AFS server encryption keys

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The <u>KeyFile</u> file defines the server encryption keys that the AFS server processes running on the machine
       use to decrypt the tickets presented by clients during the mutual authentication process. AFS server
       processes perform privileged actions only for clients that possess a ticket encrypted with one of the
       keys from the file. The file must reside in the <u>/etc/openafs/server</u> directory on every server machine.
       For more detailed information on mutual authentication and server encryption keys, see the <u>OpenAFS</u>
       <u>Administration</u> <u>Guide</u>.

       Each key has a corresponding a key version number that distinguishes it from the other keys. The tickets
       that clients present are also marked with a key version number to tell the server process which key to
       use to decrypt it. The <u>KeyFile</u> file must always include a key with the same key version number and
       contents as the key currently listed for the "afs/<u>cell</u>" principal in the associated Kerberos v5 realm or
       Authentication Database. (The principal "afs" may be used if the cell and realm names are the same, but
       adding the cell name to the principal is recommended even in this case. "afs" must be used as the
       principal name if the cell uses the Authentication Server rather than a Kerberos v5 realm.) The key must
       be a DES key; no stronger encryption type is supported.

       The <u>KeyFile</u> file is in binary format, so always use either the <b>asetkey</b> command or the appropriate
       commands from the <b>bos</b> command suite to administer it:

       •   The <b>asetkey</b> <b>add</b> or <b>bos</b> <b>addkey</b> command to add a new key.

       •   The <b>asetkey</b> <b>list</b> or <b>bos</b> <b>listkeys</b> command to display the keys.

       •   The <b>asetkey</b> <b>delete</b> or <b>bos</b> <b>removekey</b> command to remove a key from the file.

       The  <b>asetkey</b>  commands must be run on the same server as the <u>KeyFile</u> file to update. The <b>bos</b> commands may
       be run remotely. Normally, new keys should be added from a Kerberos v5 keytab  using  <b>asetkey</b>  <b>add</b>.   <b>bos</b>
       <b>addkey</b> is normally only used if the Authentication Server is in use instead of a Kerberos v5 realm.

       In  cells  that use the Update Server to distribute the contents of the <u>/etc/openafs/server</u> directory, it
       is customary to edit only the copy of the file stored on the system control machine. Otherwise, edit  the
       file on each server machine individually.

</pre><h4><b>CAUTIONS</b></h4><pre>
       The  most common error caused by changes to <u>KeyFile</u> is to add a key that does not match the corresponding
       key for the Kerberos v5 principal or Authentication Server database entry.  Both  the  key  and  the  key
       version  number  must  match  the key for the corresponding principal, either "afs/<u>cell</u>" or "afs", in the
       Kerberos v5 realm or Authentication Database. For a Kerberos v5 realm, that principal must only have  DES
       encryption types in the Kerberos KDC.

       In  the  unusual  case of using <b>bos</b> <b>addkey</b> to add a key with a known password matching a password used to
       generate Kerberos v5 keys, the keys in the Kerberos v5 KDC database must use "afs3" salt, not the default
       Kerberos v5 salt. The salt doesn't matter for the more normal procedure of extracting a keytab  and  then
       adding the key using <b>asetkey</b>.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man8/asetkey.8.html">asetkey</a></b>(8),    <b><a href="../man8/bos_addkey.8.html">bos_addkey</a></b>(8),   <b><a href="../man8/bos_listkeys.8.html">bos_listkeys</a></b>(8),   <b><a href="../man8/bos_removekey.8.html">bos_removekey</a></b>(8),   <b><a href="../man8/kas_setpassword.8.html">kas_setpassword</a></b>(8),   <b><a href="../man8/upclient.8.html">upclient</a></b>(8),
       <b><a href="../man8/upserver.8.html">upserver</a></b>(8)

       The <u>OpenAFS</u> <u>Administration</u> <u>Guide</u> at &lt;<a href="http://docs.openafs.org/AdminGuide/">http://docs.openafs.org/AdminGuide/</a>&gt;.

</pre><h4><b>COPYRIGHT</b></h4><pre>
       IBM Corporation 2000. &lt;<a href="http://www.ibm.com/">http://www.ibm.com/</a>&gt; All Rights Reserved.

       This documentation is covered by the IBM Public License Version 1.0.  It was converted from HTML  to  POD
       by  software  written  by  Chas  Williams  and Russ Allbery, based on work by Alf Wachsmann and Elizabeth
       Cassell.

OpenAFS                                            2025-03-21                                         <u><a href="../man5/KEYFILE.5.html">KEYFILE</a></u>(5)
</pre>
 </div>
</div></section>
</div>
</body>
</html>