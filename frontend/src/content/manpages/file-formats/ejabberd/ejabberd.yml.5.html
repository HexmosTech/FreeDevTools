<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ejabberd.yml - main configuration file for ejabberd.</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/ejabberd">ejabberd_24.12-3_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       ejabberd.yml - main configuration file for ejabberd.

</pre><h4><b>SYNOPSIS</b></h4><pre>
       ejabberd.yml

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The configuration file is written in YAML language.

           <b>Warning</b>

           YAML is indentation sensitive, so make sure you respect indentation, or otherwise you will get pretty
           cryptic configuration errors.

       Logically, configuration options are split into 3 main categories: <u>Modules</u>, <u>Listeners</u> and everything else
       called <u>Top</u> <u>Level</u> options. Thus this document is split into 3 main chapters describing each category
       separately. So, the contents of ejabberd.yml will typically look like this:

           hosts:
             - example.com
             - domain.tld
           loglevel: info
           ...
           listen:
             -
               port: 5222
               module: ejabberd_c2s
             ...
           modules:
             mod_roster: {}
             ...

       Any configuration error (such as syntax error, unknown option or invalid option value) is fatal in the
       sense that ejabberd will refuse to load the whole configuration file and will not start or will abort
       configuration reload.

       All options can be changed in runtime by running <u>ejabberdctl</u> <u>reload-config</u> command. Configuration reload
       is atomic: either all options are accepted and applied simultaneously or the new configuration is refused
       without any impact on currently running configuration.

       Some options can be specified for particular virtual host(s) only using <u>host_config</u> or <u>append_host_config</u>
       options. Such options are called <u>local</u>. Examples are <u>modules</u>, <u>auth_method</u> and <u>default_db</u>. The options
       that cannot be defined per virtual host are called <u>global</u>. Examples are <u>loglevel</u>, <u>certfiles</u> and <u>listen</u>.
       It is a configuration mistake to put <u>global</u> options under <u>host_config</u> or <u>append_host_config</u> section -
       ejabberd will refuse to load such configuration.

       It is not recommended to write ejabberd.yml from scratch. Instead it is better to start from "default"
       configuration file available at https://github.com/processone/ejabberd/blob/24.12/ejabberd.yml.example.
       Once you get ejabberd running you can start changing configuration options to meet your requirements.

       Note that this document is intended to provide comprehensive description of all configuration options
       that can be consulted to understand the meaning of a particular option, its format and possible values.
       It will be quite hard to understand how to configure ejabberd by reading this document only - for this
       purpose the reader is recommended to read online Configuration Guide available at
       https://docs.ejabberd.im/admin/configuration.

</pre><h4><b>TOP</b> <b>LEVEL</b> <b>OPTIONS</b></h4><pre>
       This section describes top level options of ejabberd 24.12. The options that changed in this version are
       marked with ðŸŸ¤.

       <b>access_rules</b>: <u>{AccessName:</u> <u>{allow|deny:</u> <u>ACLRules|ACLName}}</u>
           This option defines <u>basic.md#access-rules|Access</u> <u>Rules</u>. Each access rule is assigned a name that can
           be referenced from other parts of the configuration file (mostly from <u>access</u> options of ejabberd
           modules). Each rule definition may contain arbitrary number of <u>allow</u> or <u>deny</u> sections, and each
           section may contain any number of ACL rules (see <u>acl</u> option). There are no access rules defined by
           default.

           <b>Example</b>:

               access_rules:
                 configure:
                   allow: admin
                 something:
                   deny: someone
                   allow: all
                 s2s_banned:
                   deny: problematic_hosts
                   deny: banned_forever
                   deny:
                     ip: 222.111.222.111/32
                   deny:
                     ip: 111.222.111.222/32
                   allow: all
                 xmlrpc_access:
                   allow:
                     user: <a href="mailto:peter@example.com">peter@example.com</a>
                   allow:
                     user: <a href="mailto:ivone@example.com">ivone@example.com</a>
                   allow:
                     user: <a href="mailto:bot@example.com">bot@example.com</a>
                     ip: 10.0.0.0/24

       <b>acl</b>: <u>{ACLName:</u> <u>{ACLType:</u> <u>ACLValue}}</u>
           This option defines <u>../configuration/basic.md#acl|access</u> <u>control</u> <u>lists</u>: named sets of rules which are
           used to match against different targets (such as a JID or an IP address). Every set of rules has name
           <u>ACLName</u>: it can be any string except <u>all</u> or <u>none</u> (those are predefined names for the rules that match
           all or nothing respectively). The name <u>ACLName</u> can be referenced from other parts of the
           configuration file, for example in <u>access_rules</u> option. The rules of <u>ACLName</u> are represented by
           mapping <u>{ACLType:</u> <u>ACLValue}</u>. These can be one of the following:

           <b>ip</b>: <u>Network</u>
               The rule matches any IP address from the <u>Network</u>.

           <b>node_glob</b>: <u>Pattern</u>
               Same as <u>node_regexp</u>, but matching is performed on a specified <u>Pattern</u> according to the rules used
               by the Unix shell.

           <b>node_regexp</b>: <u>user_regexp@server_regexp</u>
               The rule matches any JID with node part matching regular expression <u>user_regexp</u> and server part
               matching regular expression <u>server_regexp</u>.

           <b>resource</b>: <u>Resource</u>
               The rule matches any JID with a resource <u>Resource</u>.

           <b>resource_glob</b>: <u>Pattern</u>
               Same as <u>resource_regexp</u>, but matching is performed on a specified <u>Pattern</u> according to the rules
               used by the Unix shell.

           <b>resource_regexp</b>: <u>Regexp</u>
               The rule matches any JID with a resource that matches regular expression <u>Regexp</u>.

           <b>server</b>: <u>Server</u>
               The rule matches any JID from server <u>Server</u>. The value of <u>Server</u> must be a valid hostname or an
               IP address.

           <b>server_glob</b>: <u>Pattern</u>
               Same as <u>server_regexp</u>, but matching is performed on a specified <u>Pattern</u> according to the rules
               used by the Unix shell.

           <b>server_regexp</b>: <u>Regexp</u>
               The rule matches any JID from the server that matches regular expression <u>Regexp</u>.

           <b>user</b>: <u>Username</u>
               If <u>Username</u> is in the form of "user@server", the rule matches a JID against this value.
               Otherwise, if <u>Username</u> is in the form of "user", the rule matches any JID that has <u>Username</u> in
               the node part as long as the server part of this JID is any virtual host served by ejabberd.

           <b>user_glob</b>: <u>Pattern</u>
               Same as <u>user_regexp</u>, but matching is performed on a specified <u>Pattern</u> according to the rules used
               by the Unix shell.

           <b>user_regexp</b>: <u>Regexp</u>
               If <u>Regexp</u> is in the form of "regexp@server", the rule matches any JID with node part matching
               regular expression "regexp" as long as the server part of this JID is equal to "server". If
               <u>Regexp</u> is in the form of "regexp", the rule matches any JID with node part matching regular
               expression "regexp" as long as the server part of this JID is any virtual host served by
               ejabberd.

       <b>acme</b>: <u>Options</u>
           <u>basic.md#acme|ACME</u> configuration, to automatically obtain SSL certificates for the domains served by
           ejabberd, which means that certificate requests and renewals are performed to some CA server (aka
           "ACME server") in a fully automated mode. The <u>Options</u> are:

           <b>auto</b>: <u>true</u> <u>|</u> <u>false</u>
               Whether to automatically request certificates for all configured domains (that yet have no a
               certificate) on server start or configuration reload. The default is <u>true</u>.

           <b>ca_url</b>: <u>URL</u>
               The ACME directory URL used as an entry point for the ACME server. The default value is
               https://acme-v02.api.letsencrypt.org/directory - the directory URL of Letâ€™s Encrypt authority.

           <b>cert_type</b>: <u>rsa</u> <u>|</u> <u>ec</u>
               A type of a certificate key. Available values are <u>ec</u> and <u>rsa</u> for EC and RSA certificates
               respectively. Itâ€™s better to have RSA certificates for the purpose of backward compatibility with
               legacy clients and servers, thus the default is <u>rsa</u>.

           <b>contact</b>: <u>[Contact,</u> <u>...]</u>
               A list of contact addresses (typically emails) where an ACME server will send notifications when
               problems occur. The value of <u>Contact</u> must be in the form of "scheme:address" (e.g.
               "<a href="mailto:user@domain.tld">mailto:user@domain.tld</a>"). The default is an empty list which means an ACME server will send no
               notices.

           <b>Example</b>:

               acme:
                 ca_url: https://acme-v02.api.letsencrypt.org/directory
                 contact:
                   - <a href="mailto:admin@domain.tld">mailto:admin@domain.tld</a>
                   - <a href="mailto:bot@domain.tld">mailto:bot@domain.tld</a>
                 auto: true
                 cert_type: rsa

       <b>allow_contrib_modules</b>: <u>true</u> <u>|</u> <u>false</u>
           Whether to allow installation of third-party modules or not. See
           <u>../../developer/extending-ejabberd/modules.md#ejabberd-contrib|ejabberd-contrib</u> documentation
           section. The default value is <u>true</u>.

       <b>allow_multiple_connections</b>: <u>true</u> <u>|</u> <u>false</u>
           This option is only used when the anonymous mode is enabled. Setting it to <u>true</u> means that the same
           username can be taken multiple times in anonymous login mode if different resource are used to
           connect. This option is only useful in very special occasions. The default value is <u>false</u>.

       <b>anonymous_protocol</b>: <u>login_anon</u> <u>|</u> <u>sasl_anon</u> <u>|</u> <u>both</u>
           Define what <u>authentication.md#anonymous-login-and-sasl-anonymous|anonymous</u> protocol will be used:

           â€¢   <u>login_anon</u> means that the anonymous login method will be used.

           â€¢   <u>sasl_anon</u> means that the SASL Anonymous method will be used.

           â€¢   <u>both</u> means that SASL Anonymous and login anonymous are both enabled.

       The default value is <u>sasl_anon</u>.

       <b>api_permissions</b>: <u>[Permission,</u> <u>...]</u>
           Define the permissions for API access. Please consult the ejabberd Docs web â†’ For Developers â†’
           ejabberd ReST API â†’ <u>../../developer/ejabberd-api/permissions.md|API</u> <u>Permissions</u>.

       <b>append_host_config</b>: <u>{Host:</u> <u>Options}</u>
           Add a few specific options to a certain <u>../configuration/basic.md#virtual-hosting|virtual</u> <u>host</u>.

       <b>auth_cache_life_time</b>: <u>timeout()</u>
           Same as <u>cache_life_time</u>, but applied to authentication cache only. If not set, the value from
           <u>cache_life_time</u> will be used.

       <b>auth_cache_missed</b>: <u>true</u> <u>|</u> <u>false</u>
           Same as <u>cache_missed</u>, but applied to authentication cache only. If not set, the value from
           <u>cache_missed</u> will be used.

       <b>auth_cache_size</b>: <u>pos_integer()</u> <u>|</u> <u>infinity</u>
           Same as <u>cache_size</u>, but applied to authentication cache only. If not set, the value from <u>cache_size</u>
           will be used.

       <b>auth_external_user_exists_check</b>: <u>true</u> <u>|</u> <u>false</u>
           <u>Note</u> about this option: added in 23.10. Supplement check for user existence based on <u>mod_last</u> data,
           for authentication methods that donâ€™t have a way to reliably tell if a user exists (like is the case
           for <u>jwt</u> and certificate based authentication). This helps with processing offline message for those
           users. The default value is <u>true</u>.

       <b>auth_method</b>: <u>[mnesia</u> <u>|</u> <u>sql</u> <u>|</u> <u>anonymous</u> <u>|</u> <u>external</u> <u>|</u> <u>jwt</u> <u>|</u> <u>ldap</u> <u>|</u> <u>pam,</u> <u>...]</u>
           A list of <u>authentication.md|authentication</u> methods to use. If several methods are defined,
           authentication is considered successful as long as authentication of at least one of the methods
           succeeds. The default value is <u>[mnesia]</u>.

       <b>auth_opts</b>: <u>[Option,</u> <u>...]</u>
           This is used by the contributed module <u>ejabberd_auth_http</u> that can be installed from the
           ejabberd-contrib Git repository. Please refer to that moduleâ€™s README file for details.

       <b>auth_password_format</b>: <u>plain</u> <u>|</u> <u>scram</u>
           <u>Note</u> about this option: improved in 20.01. The option defines in what format the users passwords are
           stored, plain text or in <u>authentication.md#scram|SCRAM</u> format:

           â€¢   <u>plain</u>: The password is stored as plain text in the database. This is risky because the passwords
               can be read if your database gets compromised. This is the default value. This format allows
               clients to authenticate using: the old Jabber Non-SASL (XEP-0078), SASL PLAIN, SASL DIGEST-MD5,
               and SASL SCRAM-SHA-1/256/512(-PLUS).

           â€¢   <u>scram</u>: The password is not stored, only some information required to verify the hash provided by
               the client. It is impossible to obtain the original plain password from the stored information;
               for this reason, when this value is configured it cannot be changed to plain anymore. This format
               allows clients to authenticate using: SASL PLAIN and SASL SCRAM-SHA-1/256/512(-PLUS). The SCRAM
               variant depends on the <u>auth_scram_hash</u> option.

       The default value is <u>plain</u>.

       <b>auth_scram_hash</b>: <u>sha</u> <u>|</u> <u>sha256</u> <u>|</u> <u>sha512</u>
           Hash algorithm that should be used to store password in <u>authentication.md#scram|SCRAM</u> format. You
           shouldnâ€™t change this if you already have passwords generated with a different algorithm - users that
           have such passwords will not be able to authenticate. The default value is <u>sha</u>.

       <b>auth_use_cache</b>: <u>true</u> <u>|</u> <u>false</u>
           Same as <u>use_cache</u>, but applied to authentication cache only. If not set, the value from <u>use_cache</u>
           will be used.

       <b>c2s_cafile</b>: <u>Path</u>
           Full path to a file containing one or more CA certificates in PEM format. All client certificates
           should be signed by one of these root CA certificates and should contain the corresponding JID(s) in
           <u>subjectAltName</u> field. There is no default value.

       You can use <u>host_config</u> to specify this option per-vhost.

       To set a specific file per listener, use the listenerâ€™s <u>listen-options.md#cafile|cafile</u> option. Please
       notice that <u>c2s_cafile</u> overrides the listenerâ€™s <u>cafile</u> option.

       <b>c2s_ciphers</b>: <u>[Cipher,</u> <u>...]</u>
           A list of OpenSSL ciphers to use for c2s connections. The default value is shown in the example
           below:

           <b>Example</b>:

               c2s_ciphers:
                 - HIGH
                 - "!aNULL"
                 - "!eNULL"
                 - "!3DES"
                 - "@STRENGTH"

       <b>c2s_dhfile</b>: <u>Path</u>
           Full path to a file containing custom DH parameters to use for c2s connections. Such a file could be
           created with the command <u>"openssl</u> <u>dhparam</u> <u>-out</u> <u>dh.pem</u> <u>2048"</u>. If this option is not specified,
           2048-bit MODP Group with 256-bit Prime Order Subgroup will be used as defined in RFC5114 Section 2.3.

       <b>c2s_protocol_options</b>: <u>[Option,</u> <u>...]</u>
           List of general SSL options to use for c2s connections. These map to OpenSSLâ€™s <u>set_options()</u>. The
           default value is shown in the example below:

           <b>Example</b>:

               c2s_protocol_options:
                 - no_sslv3
                 - cipher_server_preference
                 - no_compression

       <b>c2s_tls_compression</b>: <u>true</u> <u>|</u> <u>false</u>
           Whether to enable or disable TLS compression for c2s connections. The default value is <u>false</u>.

       <b>ca_file</b>: <u>Path</u>
           Path to a file of CA root certificates. The default is to use system defined file if possible.

       For server connections, this <u>ca_file</u> option is overridden by the <u>s2s_cafile</u> option.

       <b>cache_life_time</b>: <u>timeout()</u>
           The time of a cached item to keep in cache. Once itâ€™s expired, the corresponding item is erased from
           cache. The default value is <u>1</u> <u>hour</u>. Several modules have a similar option; and some core ejabberd
           parts support similar options too, see <u>auth_cache_life_time</u>, <u>oauth_cache_life_time</u>,
           <u>router_cache_life_time</u>, and <u>sm_cache_life_time</u>.

       <b>cache_missed</b>: <u>true</u> <u>|</u> <u>false</u>
           Whether or not to cache missed lookups. When there is an attempt to lookup for a value in a database
           and this value is not found and the option is set to <u>true</u>, this attempt will be cached and no
           attempts will be performed until the cache expires (see <u>cache_life_time</u>). Usually you donâ€™t want to
           change it. Default is <u>true</u>. Several modules have a similar option; and some core ejabberd parts
           support similar options too, see <u>auth_cache_missed</u>, <u>oauth_cache_missed</u>, <u>router_cache_missed</u>, and
           <u>sm_cache_missed</u>.

       <b>cache_size</b>: <u>pos_integer()</u> <u>|</u> <u>infinity</u>
           A maximum number of items (not memory!) in cache. The rule of thumb, for all tables except rosters,
           you should set it to the number of maximum online users you expect. For roster multiply this number
           by 20 or so. If the cache size reaches this threshold, itâ€™s fully cleared, i.e. all items are
           deleted, and the corresponding warning is logged. You should avoid frequent cache clearance, because
           this degrades performance. The default value is <u>1000</u>. Several modules have a similar option; and some
           core ejabberd parts support similar options too, see <u>auth_cache_size</u>, <u>oauth_cache_size</u>,
           <u>router_cache_size</u>, and <u>sm_cache_size</u>.

       <b>captcha_cmd</b>: <u>Path</u> <u>|</u> <u>ModuleName</u>
           <u>Note</u> about this option: improved in 23.01. Full path to a script that generates
           <u>basic.md#captcha|CAPTCHA</u> images.  <u>@VERSION@</u> is replaced with ejabberd version number in <u>XX.YY</u> format.
           <u>@SEMVER@</u> is replaced with ejabberd version number in semver format when compiled with Elixirâ€™s mix,
           or XX.YY format otherwise. Alternatively, it can be the name of a module that implements ejabberd
           CAPTCHA support. There is no default value: when this option is not set, CAPTCHA functionality is
           completely disabled.

           <b>Examples</b>:

           When using the ejabberd installers or container image, the example captcha scripts can be used like
           this:

               captcha_cmd: /opt/ejabberd-@VERSION@/lib/ejabberd-@SEMVER@/priv/bin/captcha.sh

       <b>captcha_host</b>: <u>String</u>
           Deprecated. Use <u>captcha_url</u> instead.

       <b>captcha_limit</b>: <u>pos_integer()</u> <u>|</u> <u>infinity</u>
           Maximum number of <u>basic.md#captcha|CAPTCHA</u> generated images per minute for any given JID. The option
           is intended to protect the server from CAPTCHA DoS. The default value is <u>infinity</u>.

       <b>captcha_url</b>: <u>URL</u> <u>|</u> <u>auto</u> <u>|</u> <u>undefined</u>
           <u>Note</u> about this option: improved in 23.04. An URL where <u>basic.md#captcha|CAPTCHA</u> requests should be
           sent. NOTE: you need to configure <u>request_handlers</u> for <u>ejabberd_http</u> listener as well. If set to
           <u>auto</u>, it builds the URL using a <u>request_handler</u> already enabled, with encryption if available. If set
           to <u>undefined</u>, it builds the URL using the deprecated <u>captcha_host</u> <u>+</u> <u>/captcha</u>. The default value is
           <u>auto</u>.

       <b>certfiles</b>: <u>[Path,</u> <u>...]</u>
           The option accepts a list of file paths (optionally with wildcards) containing either PEM
           certificates or PEM private keys. At startup or configuration reload, ejabberd reads all certificates
           from these files, sorts them, removes duplicates, finds matching private keys and then rebuilds full
           certificate chains for the use in TLS connections. Use this option when TLS is enabled in either of
           ejabberd listeners: <u>ejabberd_c2s</u>, <u>ejabberd_http</u> and so on. NOTE: if you modify the certificate files
           or change the value of the option, run <u>ejabberdctl</u> <u>reload-config</u> in order to rebuild and reload the
           certificate chains.

           <b>Examples</b>:

           If you use Letâ€™s Encrypt certificates for your domain "domain.tld", the configuration will look like
           this:

               certfiles:
                 - /etc/letsencrypt/live/domain.tld/fullchain.pem
                 - /etc/letsencrypt/live/domain.tld/privkey.pem

       <b>cluster_backend</b>: <u>Backend</u>
           A database backend to use for storing information about cluster. The only available value so far is
           <u>mnesia</u>.

       <b>cluster_nodes</b>: <u>[Node,</u> <u>...]</u>
           A list of Erlang nodes to connect on ejabberd startup. This option is mostly intended for ejabberd
           customization and sophisticated setups. The default value is an empty list.

       <b>default_db</b>: <u>mnesia</u> <u>|</u> <u>sql</u>
           <u>database.md#default-database|Default</u> <u>database</u> to store persistent data in ejabberd. Modules and other
           components (e.g. authentication) may have its own value. The default value is <u>mnesia</u>.

       <b>default_ram_db</b>: <u>mnesia</u> <u>|</u> <u>redis</u> <u>|</u> <u>sql</u>
           Default volatile (in-memory) storage for ejabberd. Modules and other components (e.g. session
           management) may have its own value. The default value is <u>mnesia</u>.

       <b>define_macro</b>: <u>{MacroName:</u> <u>MacroValue}</u>
           Defines a <u>../configuration/file-format.md#macros-in-configuration-file|macro</u>. The value can be any
           valid arbitrary YAML value. For convenience, itâ€™s recommended to define a <u>MacroName</u> in capital
           letters. Duplicated macros are not allowed. Macros are processed after additional configuration files
           have been included, so it is possible to use macros that are defined in configuration files included
           before the usage. It is possible to use a <u>MacroValue</u> in the definition of another macro.

           <b>Example</b>:

               define_macro:
                 DEBUG: debug
                 LOG_LEVEL: DEBUG
                 USERBOB:
                   user: bob@localhost

               loglevel: LOG_LEVEL

               acl:
                 admin: USERBOB

       <b>disable_sasl_mechanisms</b>: <u>[Mechanism,</u> <u>...]</u>
           Specify a list of SASL mechanisms (such as <u>DIGEST-MD5</u> or <u>SCRAM-SHA1</u>) that should not be offered to
           the client. For convenience, the value of <u>Mechanism</u> is case-insensitive. The default value is an
           empty list, i.e. no mechanisms are disabled by default.

       <b>disable_sasl_scram_downgrade_protection</b>: <u>true</u> <u>|</u> <u>false</u>
           Allows one to disable sending data required by <u>XEP-0474:</u> <u>SASL</u> <u>SCRAM</u> <u>Downgrade</u> <u>Protection</u>. There are
           known buggy clients (like those that use strophejs 1.6.2) which will not be able to authenticatate
           when servers sends data from that specification. This options allows server to disable it to allow
           even buggy clients connects, but in exchange decrease MITM protection. The default value of this
           option is <u>false</u> which enables this extension.

       <b>domain_balancing</b>: <u>{Domain:</u> <u>Options}</u>
           An algorithm to <u>../guide/clustering.md#service-load-balancing|load-balance</u> the components that are
           plugged on an ejabberd cluster. It means that you can plug one or several instances of the same
           component on each ejabberd node and that the traffic will be automatically distributed. The algorithm
           to deliver messages to the component(s) can be specified by this option. For any component connected
           as <u>Domain</u>, available <u>Options</u> are:

           <b>component_number</b>: <u>2..1000</u>
               The number of components to balance.

           <b>type</b>: <u>Value</u>
               How to deliver stanzas to connected components. The default value is <u>random</u>. Possible values:

           <b>-</b> <b>bare_destination</b>
               by the bare JID (without resource) of the packetâ€™s <u>to</u> attribute

           <b>-</b> <b>bare_source</b>
               by the bare JID (without resource) of the packetâ€™s <u>from</u> attribute is used

           <b>-</b> <b>destination</b>
               an instance is chosen by the full JID of the packetâ€™s <u>to</u> attribute

           <b>-</b> <b>random</b>
               an instance is chosen at random

           <b>-</b> <b>source</b>
               by the full JID of the packetâ€™s <u>from</u> attribute

           <b>Example</b>:

               domain_balancing:
                 component.domain.tld:
                   type: destination
                   component_number: 5
                 transport.example.org:
                   type: bare_source

       <b>ext_api_headers</b>: <u>Headers</u>
           String of headers (separated with commas <u>,</u>) that will be provided by ejabberd when sending ReST
           requests. The default value is an empty string of headers: <u>""</u>.

       <b>ext_api_http_pool_size</b>: <u>pos_integer()</u>
           Define the size of the HTTP pool, that is, the maximum number of sessions that the ejabberd ReST
           service will handle simultaneously. The default value is: <u>100</u>.

       <b>ext_api_path_oauth</b>: <u>Path</u>
           Define the base URI path when performing OAUTH ReST requests. The default value is: <u>"/oauth"</u>.

       <b>ext_api_url</b>: <u>URL</u>
           Define the base URI when performing ReST requests. The default value is: <u>"<a href="http://localhost/api">http://localhost/api</a>"</u>.

       <b>extauth_pool_name</b>: <u>Name</u>
           Define the pool name appendix in <u>authentication.md#external-script|external</u> <u>auth</u>, so the full pool
           name will be <u>extauth_pool_Name</u>. The default value is the hostname.

       <b>extauth_pool_size</b>: <u>Size</u>
           The option defines the number of instances of the same <u>authentication.md#external-script|external</u>
           <u>auth</u> program to start for better load balancing. The default is the number of available CPU cores.

       <b>extauth_program</b>: <u>Path</u>
           Indicate in this option the full path to the <u>authentication.md#external-script|external</u>
           <u>authentication</u> <u>script</u>. The script must be executable by ejabberd.

       <b>fqdn</b>: <u>Domain</u>
           A fully qualified domain name that will be used in SASL DIGEST-MD5 authentication. The default is
           detected automatically.

       <b>hide_sensitive_log_data</b>: <u>true</u> <u>|</u> <u>false</u>
           A privacy option to not log sensitive data (mostly IP addresses). The default value is <u>false</u> for
           backward compatibility.

       <b>host_config</b>: <u>{Host:</u> <u>Options}</u>
           The option is used to redefine <u>Options</u> for <u>../configuration/basic.md#virtual-hosting|virtual</u> <u>host</u>
           <u>Host</u>. In the example below LDAP authentication method will be used on virtual host <u>domain.tld</u> and SQL
           method will be used on virtual host <u>example.org</u>.

           <b>Example</b>:

               hosts:
                 - domain.tld
                 - example.org

               auth_method:
                 - sql

               host_config:
                 domain.tld:
                   auth_method:
                     - ldap

       <b>hosts</b>: <u>[Domain1,</u> <u>Domain2,</u> <u>...]</u>
           List of one or more <u>../configuration/basic.md#host-names|host</u> <u>names</u> (or domains) that <u>ejabberd</u> will
           serve. This is a <b>mandatory</b> option.

       <b>include_config_file</b>: <u>[Filename,</u> <u>...]</u> <u>|</u> <u>{Filename:</u> <u>Options}</u>
           Read and <u>../configuration/file-format.md#include-additional-files|include</u> <u>additional</u> <u>file</u> from
           <u>Filename</u>. If the value is provided in <u>{Filename:</u> <u>Options}</u> format, the <u>Options</u> must be one of the
           following:

           <b>allow_only</b>: <u>[OptionName,</u> <u>...]</u>
               Allows only the usage of those options in the included file <u>Filename</u>. The options that do not
               match this criteria are not accepted. The default value is to include all options.

           <b>disallow</b>: <u>[OptionName,</u> <u>...]</u>
               Disallows the usage of those options in the included file <u>Filename</u>. The options that match this
               criteria are not accepted. The default value is an empty list.

       <b>install_contrib_modules</b>: <u>[Module,</u> <u>...]</u>
           <u>Note</u> about this option: added in 23.10. Modules to install from
           <u>../../developer/extending-ejabberd/modules.md#ejabberd-contrib|ejabberd-contrib</u> at start time. The
           default value is an empty list of modules: <u>[]</u>.

       <b>jwt_auth_only_rule</b>: <u>AccessName</u>
           This ACL rule defines accounts that can use only the <u>authentication.md#jwt-authentication|JWT</u> auth
           method, even if others are also defined in the ejabberd configuration file. In other words: if there
           are several auth methods enabled for this host (JWT, SQL, ...), users that match this rule can only
           use JWT. The default value is <u>none</u>.

       <b>jwt_jid_field</b>: <u>FieldName</u>
           By default, the JID is defined in the <u>"jid"</u> JWT field. In this option you can specify other
           <u>authentication.md#jwt-authentication|JWT</u> field name where the JID is defined.

       <b>jwt_key</b>: <u>FilePath</u>
           Path to the file that contains the <u>authentication.md#jwt-authentication|JWT</u> key. The default value is
           <u>undefined</u>.

       <b>language</b>: <u>Language</u>
           Define the <u>../configuration/basic.md#default-language|default</u> <u>language</u> of server strings that can be
           seen by XMPP clients. If an XMPP client does not possess <u>xml:lang</u> attribute, the specified language
           is used. The default value is <u>"en"</u>.

       <b>ldap_backups</b>: <u>[Host,</u> <u>...]</u>
           A list of IP addresses or DNS names of LDAP backup servers (see
           <u>../configuration/ldap.md#ldap-connection|LDAP</u> <u>connection</u>). When no servers listed in <u>ldap_servers</u>
           option are reachable, ejabberd connects to these backup servers. The default is an empty list, i.e.
           no backup servers specified. Please notice that ejabberd only connects to the next server when the
           existing connection is lost; it doesnâ€™t detect when a previously-attempted server becomes available
           again.

       <b>ldap_base</b>: <u>Base</u>
           LDAP base directory which stores users accounts. There is no default value: you must set the option
           in order for LDAP connections to work properly.

       <b>ldap_deref_aliases</b>: <u>never</u> <u>|</u> <u>always</u> <u>|</u> <u>finding</u> <u>|</u> <u>searching</u>
           Whether to dereference aliases or not. The default value is <u>never</u>.

       <b>ldap_dn_filter</b>: <u>{Filter:</u> <u>FilterAttrs}</u>
           This filter is applied on the results returned by the main filter. The filter performs an additional
           LDAP lookup to make the complete result. This is useful when you are unable to define all filter
           rules in <u>ldap_filter</u>. You can define "%u", "%d", "%s" and "%D" pattern variables in <u>Filter</u>: "%u" is
           replaced by a userâ€™s part of the JID, "%d" is replaced by the corresponding domain (virtual host),
           all "%s" variables are consecutively replaced by values from the attributes in <u>FilterAttrs</u> and "%D"
           is replaced by Distinguished Name from the result set. There is no default value, which means the
           result is not filtered. WARNING: Since this filter makes additional LDAP lookups, use it only as the
           last resort: try to define all filter rules in <u>ldap_filter</u> option if possible.

           <b>Example</b>:

               ldap_dn_filter:
                 "(&amp;(name=%s)(owner=%D)(user=%u@%d))": [sn]

       <b>ldap_encrypt</b>: <u>tls</u> <u>|</u> <u>none</u>
           Whether to encrypt LDAP connection using TLS or not. The default value is <u>none</u>. NOTE: STARTTLS
           encryption is not supported.

       <b>ldap_filter</b>: <u>Filter</u>
           An LDAP filter as defined in RFC4515. There is no default value. Example:
           "(&amp;(objectClass=shadowAccount)(memberOf=XMPP Users))". NOTE: donâ€™t forget to close brackets and donâ€™t
           use superfluous whitespaces. Also you must not use "uid" attribute in the filter because this
           attribute will be appended to the filter automatically.

       <b>ldap_password</b>: <u>Password</u>
           Bind password. The default value is an empty string.

       <b>ldap_port</b>: <u>1..65535</u>
           Port to connect to your LDAP server. The default port is <u>389</u> if encryption is disabled and <u>636</u> if
           encryption is enabled.

       <b>ldap_rootdn</b>: <u>RootDN</u>
           Bind Distinguished Name. The default value is an empty string, which means "anonymous connection".

       <b>ldap_servers</b>: <u>[Host,</u> <u>...]</u>
           A list of IP addresses or DNS names of your LDAP servers (see
           <u>../configuration/ldap.md#ldap-connection|LDAP</u> <u>connection</u>). ejabberd connects immediately to all of
           them, and reconnects infinitely if connection is lost. The default value is <u>[localhost]</u>.

       <b>ldap_tls_cacertfile</b>: <u>Path</u>
           A path to a file containing PEM encoded CA certificates. This option is required when TLS
           verification is enabled.

       <b>ldap_tls_certfile</b>: <u>Path</u>
           A path to a file containing PEM encoded certificate along with PEM encoded private key. This
           certificate will be provided by ejabberd when TLS enabled for LDAP connections. There is no default
           value, which means no client certificate will be sent.

       <b>ldap_tls_depth</b>: <u>Number</u>
           Specifies the maximum verification depth when TLS verification is enabled, i.e. how far in a chain of
           certificates the verification process can proceed before the verification is considered to be failed.
           Peer certificate = 0, CA certificate = 1, higher level CA certificate = 2, etc. The value <u>2</u> thus
           means that a chain can at most contain peer cert, CA cert, next CA cert, and an additional CA cert.
           The default value is <u>1</u>.

       <b>ldap_tls_verify</b>: <u>false</u> <u>|</u> <u>soft</u> <u>|</u> <u>hard</u>
           This option specifies whether to verify LDAP server certificate or not when TLS is enabled. When <u>hard</u>
           is set, ejabberd doesnâ€™t proceed if the certificate is invalid. When <u>soft</u> is set, ejabberd proceeds
           even if the check has failed. The default is <u>false</u>, which means no checks are performed.

       <b>ldap_uids</b>: <u>[Attr]</u> <u>|</u> <u>{Attr:</u> <u>AttrFormat}</u>
           LDAP attributes which hold a list of attributes to use as alternatives for getting the JID, where
           <u>Attr</u> is an LDAP attribute which holds the userâ€™s part of the JID and <u>AttrFormat</u> must contain one and
           only one pattern variable "%u" which will be replaced by the userâ€™s part of the JID. For example,
           "%<a href="mailto:u@example.org">u@example.org</a>". If the value is in the form of <u>[Attr]</u> then <u>AttrFormat</u> is assumed to be "%u".

       <b>listen</b>: <u>[Options,</u> <u>...]</u>
           The option for listeners configuration. See the <u>listen.md|Listen</u> <u>Modules</u> section for details.

       <b>log_burst_limit_count</b>: <u>Number</u>
           <u>Note</u> about this option: added in 22.10. The number of messages to accept in
           log_burst_limit_window_time period before starting to drop them. Default 500

       <b>log_burst_limit_window_time</b>: <u>Number</u>
           <u>Note</u> about this option: added in 22.10. The time period to rate-limit log messages by. Defaults to 1
           second.

       <b>log_modules_fully</b>: <u>[Module,</u> <u>...]</u>
           <u>Note</u> about this option: added in 23.01. List of modules that will log everything independently from
           the general loglevel option.

       <b>log_rotate_count</b>: <u>Number</u>
           The number of rotated log files to keep. The default value is <u>1</u>, which means that only keeps
           ejabberd.log.0, error.log.0 and crash.log.0.

       <b>log_rotate_size</b>: <u>pos_integer()</u> <u>|</u> <u>infinity</u>
           The size (in bytes) of a log file to trigger rotation. If set to <u>infinity</u>, log rotation is disabled.
           The default value is 10 Mb expressed in bytes: <u>10485760</u>.

       <b>loglevel</b>: <u>none</u> <u>|</u> <u>emergency</u> <u>|</u> <u>alert</u> <u>|</u> <u>critical</u> <u>|</u> <u>error</u> <u>|</u> <u>warning</u> <u>|</u> <u>notice</u> <u>|</u> <u>info</u> <u>|</u> <u>debug</u>
           Verbosity of ejabberd <u>../configuration/basic.md#logging|logging</u>. The default value is <u>info</u>. NOTE:
           previous versions of ejabberd had log levels defined in numeric format (<u>0..5</u>). The numeric values are
           still accepted for backward compatibility, but are not recommended.

       <b>max_fsm_queue</b>: <u>Size</u>
           This option specifies the maximum number of elements in the queue of the FSM (Finite State Machine).
           Roughly speaking, each message in such queues represents one XML stanza queued to be sent into its
           relevant outgoing stream. If queue size reaches the limit (because, for example, the receiver of
           stanzas is too slow), the FSM and the corresponding connection (if any) will be terminated and error
           message will be logged. The reasonable value for this option depends on your hardware configuration.
           The allowed values are positive integers. The default value is <u>10000</u>.

       <b>modules</b>: <u>{Module:</u> <u>Options}</u>
           Set all the <u>modules.md|modules</u> configuration options.

       <b>negotiation_timeout</b>: <u>timeout()</u>
           Time to wait for an XMPP stream negotiation to complete. When timeout occurs, the corresponding XMPP
           stream is closed. The default value is <u>120</u> seconds.

       <b>net_ticktime</b>: <u>timeout()</u>
           This option can be used to tune tick time parameter of <u>net_kernel</u>. It tells Erlang VM how often nodes
           should check if intra-node communication was not interrupted. This option must have identical value
           on all nodes, or it will lead to subtle bugs. Usually leaving default value of this is option is
           best, tweak it only if you know what you are doing. The default value is <u>1</u> <u>minute</u>.

       <b>new_sql_schema</b>: <u>true</u> <u>|</u> <u>false</u>
           Whether to use the <u>database.md#default-and-new-schemas|new</u> <u>SQL</u> <u>schema</u>. All schemas are located at
           https://github.com/processone/ejabberd/tree/24.12/sql. There are two schemas available. The default
           legacy schema stores one XMPP domain into one ejabberd database. The <u>new</u> schema can handle several
           XMPP domains in a single ejabberd database. Using this <u>new</u> schema is best when serving several XMPP
           domains and/or changing domains from time to time. This avoid need to manage several databases and
           handle complex configuration changes. The default depends on configuration flag
           <u>--enable-new-sql-schema</u> which is set at compile time.

       <b>oauth_access</b>: <u>AccessName</u>
           By default creating OAuth tokens is not allowed. To define which users can create OAuth tokens, you
           can refer to an ejabberd access rule in the <u>oauth_access</u> option. Use <u>all</u> to allow everyone to create
           tokens.

       <b>oauth_cache_life_time</b>: <u>timeout()</u>
           Same as <u>cache_life_time</u>, but applied to OAuth cache only. If not set, the value from <u>cache_life_time</u>
           will be used.

       <b>oauth_cache_missed</b>: <u>true</u> <u>|</u> <u>false</u>
           Same as <u>cache_missed</u>, but applied to OAuth cache only. If not set, the value from <u>cache_missed</u> will
           be used.

       <b>oauth_cache_rest_failure_life_time</b>: <u>timeout()</u>
           <u>Note</u> about this option: added in 21.01. The time that a failure in OAuth ReST is cached. The default
           value is <u>infinity</u>.

       <b>oauth_cache_size</b>: <u>pos_integer()</u> <u>|</u> <u>infinity</u>
           Same as <u>cache_size</u>, but applied to OAuth cache only. If not set, the value from <u>cache_size</u> will be
           used.

       <b>oauth_client_id_check</b>: <u>allow</u> <u>|</u> <u>db</u> <u>|</u> <u>deny</u>
           Define whether the client authentication is always allowed, denied, or it will depend if the client
           ID is present in the database. The default value is <u>allow</u>.

       <b>oauth_db_type</b>: <u>mnesia</u> <u>|</u> <u>sql</u>
           Database backend to use for OAuth authentication. The default value is picked from <u>default_db</u> option,
           or if itâ€™s not set, <u>mnesia</u> will be used.

       <b>oauth_expire</b>: <u>timeout()</u>
           Time during which the OAuth token is valid, in seconds. After that amount of time, the token expires
           and the delegated credential cannot be used and is removed from the database. The default is <u>4294967</u>
           seconds.

       <b>oauth_use_cache</b>: <u>true</u> <u>|</u> <u>false</u>
           Same as <u>use_cache</u>, but applied to OAuth cache only. If not set, the value from <u>use_cache</u> will be
           used.

       <b>oom_killer</b>: <u>true</u> <u>|</u> <u>false</u>
           Enable or disable OOM (out-of-memory) killer. When system memory raises above the limit defined in
           <u>oom_watermark</u> option, ejabberd triggers OOM killer to terminate most memory consuming Erlang
           processes. Note that in order to maintain functionality, ejabberd only attempts to kill transient
           processes, such as those managing client sessions, s2s or database connections. The default value is
           <u>true</u>.

       <b>oom_queue</b>: <u>Size</u>
           Trigger OOM killer when some of the running Erlang processes have messages queue above this <u>Size</u>.
           Note that such processes wonâ€™t be killed if <u>oom_killer</u> option is set to <u>false</u> or if <u>oom_watermark</u> is
           not reached yet.

       <b>oom_watermark</b>: <u>Percent</u>
           A percent of total system memory consumed at which OOM killer should be activated with some of the
           processes possibly be killed (see <u>oom_killer</u> option). Later, when memory drops below this <u>Percent</u>,
           OOM killer is deactivated. The default value is <u>80</u> percents.

       <b>outgoing_s2s_families</b>: <u>[ipv6</u> <u>|</u> <u>ipv4,</u> <u>...]</u>
           <u>Note</u> about this option: changed in 23.01. Specify which address families to try, in what order. The
           default is <u>[ipv6,</u> <u>ipv4]</u> which means it first tries connecting with IPv6, if that fails it tries using
           IPv4. This option is obsolete and irrelevant when using ejabberd 23.01 and Erlang/OTP 22, or newer
           versions of them.

       <b>outgoing_s2s_ipv4_address</b>: <u>Address</u>
           <u>Note</u> about this option: added in 20.12. Specify the IPv4 address that will be used when establishing
           an outgoing S2S IPv4 connection, for example <u>"127.0.0.1"</u>. The default value is <u>undefined</u>.

       <b>outgoing_s2s_ipv6_address</b>: <u>Address</u>
           <u>Note</u> about this option: added in 20.12. Specify the IPv6 address that will be used when establishing
           an outgoing S2S IPv6 connection, for example <u>"::FFFF:127.0.0.1"</u>. The default value is <u>undefined</u>.

       <b>outgoing_s2s_port</b>: <u>1..65535</u>
           A port number to use for outgoing s2s connections when the target server doesnâ€™t have an SRV record.
           The default value is <u>5269</u>.

       <b>outgoing_s2s_timeout</b>: <u>timeout()</u>
           The timeout in seconds for outgoing S2S connection attempts. The default value is <u>10</u> seconds.

       <b>pam_service</b>: <u>Name</u>
           This option defines the <u>authentication.md#pam-authentication|PAM</u> service name. Refer to the PAM
           documentation of your operation system for more information. The default value is <u>ejabberd</u>.

       <b>pam_userinfotype</b>: <u>username</u> <u>|</u> <u>jid</u>
           This option defines what type of information about the user ejabberd provides to the
           <u>authentication.md#pam-authentication|PAM</u> service: only the username, or the userâ€™s JID. Default is
           <u>username</u>.

       <b>pgsql_users_number_estimate</b>: <u>true</u> <u>|</u> <u>false</u>
           Whether to use PostgreSQL estimation when counting registered users. The default value is <u>false</u>.

       <b>queue_dir</b>: <u>Directory</u>
           If <u>queue_type</u> option is set to <u>file</u>, use this <u>Directory</u> to store file queues. The default is to keep
           queues inside Mnesia directory.

       <b>queue_type</b>: <u>ram</u> <u>|</u> <u>file</u>
           Default type of queues in ejabberd. Modules may have its own value of the option. The value of <u>ram</u>
           means that queues will be kept in memory. If value <u>file</u> is set, you may also specify directory in
           <u>queue_dir</u> option where file queues will be placed. The default value is <u>ram</u>.

       <b>redis_connect_timeout</b>: <u>timeout()</u>
           A timeout to wait for the connection to be re-established to the <u>database.md#redis|Redis</u> server. The
           default is <u>1</u> <u>second</u>.

       <b>redis_db</b>: <u>Number</u>
           <u>database.md#redis|Redis</u> database number. The default is <u>0</u>.

       <b>redis_password</b>: <u>Password</u>
           The password to the <u>database.md#redis|Redis</u> server. The default is an empty string, i.e. no password.

       <b>redis_pool_size</b>: <u>Number</u>
           The number of simultaneous connections to the <u>database.md#redis|Redis</u> server. The default value is
           <u>10</u>.

       <b>redis_port</b>: <u>1..65535</u>
           The port where the <u>database.md#redis|Redis</u> server is accepting connections. The default is <u>6379</u>.

       <b>redis_queue_type</b>: <u>ram</u> <u>|</u> <u>file</u>
           The type of request queue for the <u>database.md#redis|Redis</u> server. See description of <u>queue_type</u>
           option for the explanation. The default value is the value defined in <u>queue_type</u> or <u>ram</u> if the latter
           is not set.

       <b>redis_server</b> <b>ðŸŸ¤</b>: <u>Host</u> <u>|</u> <u>IP</u> <u>Address</u> <u>|</u> <u>Unix</u> <u>Socket</u> <u>Path</u>
           <u>Note</u> about this option: improved in 24.12. A hostname, IP address or unix domain socket file of the
           <u>database.md#redis|Redis</u> server. Setup the path to unix domain socket like: <u>"unix:/path/to/socket"</u>.
           The default value is <u>localhost</u>.

       <b>registration_timeout</b>: <u>timeout()</u>
           This is a global option for module <u>mod_register</u>. It limits the frequency of registrations from a
           given IP or username. So, a user that tries to register a new account from the same IP address or JID
           during this time after their previous registration will receive an error with the corresponding
           explanation. To disable this limitation, set the value to <u>infinity</u>. The default value is <u>600</u> <u>seconds</u>.

       <b>resource_conflict</b>: <u>setresource</u> <u>|</u> <u>closeold</u> <u>|</u> <u>closenew</u>
           NOTE: this option is deprecated and may be removed anytime in the future versions. The possible
           values match exactly the three possibilities described in XMPP Core: section 7.7.2.2. The default
           value is <u>closeold</u>. If the client uses old Jabber Non-SASL authentication (XEP-0078), then this option
           is not respected, and the action performed is <u>closeold</u>.

       <b>router_cache_life_time</b>: <u>timeout()</u>
           Same as <u>cache_life_time</u>, but applied to routing table cache only. If not set, the value from
           <u>cache_life_time</u> will be used.

       <b>router_cache_missed</b>: <u>true</u> <u>|</u> <u>false</u>
           Same as <u>cache_missed</u>, but applied to routing table cache only. If not set, the value from
           <u>cache_missed</u> will be used.

       <b>router_cache_size</b>: <u>pos_integer()</u> <u>|</u> <u>infinity</u>
           Same as <u>cache_size</u>, but applied to routing table cache only. If not set, the value from <u>cache_size</u>
           will be used.

       <b>router_db_type</b>: <u>mnesia</u> <u>|</u> <u>redis</u> <u>|</u> <u>sql</u>
           Database backend to use for routing information. The default value is picked from <u>default_ram_db</u>
           option, or if itâ€™s not set, <u>mnesia</u> will be used.

       <b>router_use_cache</b>: <u>true</u> <u>|</u> <u>false</u>
           Same as <u>use_cache</u>, but applied to routing table cache only. If not set, the value from <u>use_cache</u> will
           be used.

       <b>rpc_timeout</b>: <u>timeout()</u>
           A timeout for remote function calls between nodes in an ejabberd cluster. You should probably never
           change this value since those calls are used for internal needs only. The default value is <u>5</u> seconds.

       <b>s2s_access</b>: <u>Access</u>
           This <u>basic.md#access-rules|Access</u> <u>Rule</u> defines to what remote servers can s2s connections be
           established. The default value is <u>all</u>; no restrictions are applied, it is allowed to connect s2s
           to/from all remote servers.

       <b>s2s_cafile</b>: <u>Path</u>
           A path to a file with CA root certificates that will be used to authenticate s2s connections. If not
           set, the value of <u>ca_file</u> will be used.

       You can use <u>host_config</u> to specify this option per-vhost.

       <b>s2s_ciphers</b>: <u>[Cipher,</u> <u>...]</u>
           A list of OpenSSL ciphers to use for s2s connections. The default value is shown in the example
           below:

           <b>Example</b>:

               s2s_ciphers:
                 - HIGH
                 - "!aNULL"
                 - "!eNULL"
                 - "!3DES"
                 - "@STRENGTH"

       <b>s2s_dhfile</b>: <u>Path</u>
           Full path to a file containing custom DH parameters to use for s2s connections. Such a file could be
           created with the command <u>"openssl</u> <u>dhparam</u> <u>-out</u> <u>dh.pem</u> <u>2048"</u>. If this option is not specified,
           2048-bit MODP Group with 256-bit Prime Order Subgroup will be used as defined in RFC5114 Section 2.3.

       <b>s2s_dns_retries</b>: <u>Number</u>
           DNS resolving retries. The default value is <u>2</u>.

       <b>s2s_dns_timeout</b>: <u>timeout()</u>
           The timeout for DNS resolving. The default value is <u>10</u> seconds.

       <b>s2s_max_retry_delay</b>: <u>timeout()</u>
           The maximum allowed delay for s2s connection retry to connect after a failed connection attempt. The
           default value is <u>300</u> seconds (5 minutes).

       <b>s2s_protocol_options</b>: <u>[Option,</u> <u>...]</u>
           List of general SSL options to use for s2s connections. These map to OpenSSLâ€™s <u>set_options()</u>. The
           default value is shown in the example below:

           <b>Example</b>:

               s2s_protocol_options:
                 - no_sslv3
                 - cipher_server_preference
                 - no_compression

       <b>s2s_queue_type</b>: <u>ram</u> <u>|</u> <u>file</u>
           The type of a queue for s2s packets. See description of <u>queue_type</u> option for the explanation. The
           default value is the value defined in <u>queue_type</u> or <u>ram</u> if the latter is not set.

       <b>s2s_timeout</b>: <u>timeout()</u>
           A time to wait before closing an idle s2s connection. The default value is <u>1</u> hour.

       <b>s2s_tls_compression</b>: <u>true</u> <u>|</u> <u>false</u>
           Whether to enable or disable TLS compression for s2s connections. The default value is <u>false</u>.

       <b>s2s_use_starttls</b>: <u>true</u> <u>|</u> <u>false</u> <u>|</u> <u>optional</u> <u>|</u> <u>required</u>
           Whether to use STARTTLS for s2s connections. The value of <u>false</u> means STARTTLS is prohibited. The
           value of <u>true</u> or <u>optional</u> means STARTTLS is enabled but plain connections are still allowed. And the
           value of <u>required</u> means that only STARTTLS connections are allowed. The default value is <u>false</u> (for
           historical reasons).

       <b>s2s_zlib</b>: <u>true</u> <u>|</u> <u>false</u>
           Whether to use <u>zlib</u> compression (as defined in XEP-0138) or not. The default value is <u>false</u>. WARNING:
           this type of compression is nowadays considered insecure.

       <b>shaper</b>: <u>{ShaperName:</u> <u>Rate}</u>
           The option defines a set of <u>../configuration/basic.md#shapers|shapers</u>. Every shaper is assigned a
           name <u>ShaperName</u> that can be used in other parts of the configuration file, such as <u>shaper_rules</u>
           option. The shaper itself is defined by its <u>Rate</u>, where <u>Rate</u> stands for the maximum allowed incoming
           rate in <b>bytes</b> per second. When a connection exceeds this limit, ejabberd stops reading from the
           socket until the average rate is again below the allowed maximum. In the example below shaper <u>normal</u>
           limits the traffic speed to 1,000 bytes/sec and shaper <u>fast</u> limits the traffic speed to 50,000
           bytes/sec:

           <b>Example</b>:

               shaper:
                 normal: 1000
                 fast: 50000

       <b>shaper_rules</b>: <u>{ShaperRuleName:</u> <u>{Number|ShaperName:</u> <u>ACLRule|ACLName}}</u>
           This option defines <u>../configuration/basic.md#shaper-rules|shaper</u> <u>rules</u> to use for matching
           user/hosts. Semantics is similar to <u>access_rules</u> option, the only difference is that instead using
           <u>allow</u> or <u>deny</u>, a name of a shaper (defined in <u>shaper</u> option) or a positive number should be used.

           <b>Example</b>:

               shaper_rules:
                 connections_limit:
                   10:
                     user: <a href="mailto:peter@example.com">peter@example.com</a>
                   100: admin
                   5: all
                 download_speed:
                   fast: admin
                   slow: anonymous_users
                   normal: all
                 log_days: 30

       <b>sm_cache_life_time</b>: <u>timeout()</u>
           Same as <u>cache_life_time</u>, but applied to client sessions table cache only. If not set, the value from
           <u>cache_life_time</u> will be used.

       <b>sm_cache_missed</b>: <u>true</u> <u>|</u> <u>false</u>
           Same as <u>cache_missed</u>, but applied to client sessions table cache only. If not set, the value from
           <u>cache_missed</u> will be used.

       <b>sm_cache_size</b>: <u>pos_integer()</u> <u>|</u> <u>infinity</u>
           Same as <u>cache_size</u>, but applied to client sessions table cache only. If not set, the value from
           <u>cache_size</u> will be used.

       <b>sm_db_type</b>: <u>mnesia</u> <u>|</u> <u>redis</u> <u>|</u> <u>sql</u>
           Database backend to use for client sessions information. The default value is picked from
           <u>default_ram_db</u> option, or if itâ€™s not set, <u>mnesia</u> will be used.

       <b>sm_use_cache</b>: <u>true</u> <u>|</u> <u>false</u>
           Same as <u>use_cache</u>, but applied to client sessions table cache only. If not set, the value from
           <u>use_cache</u> will be used.

       <b>sql_connect_timeout</b>: <u>timeout()</u>
           A time to wait for connection to an SQL server to be established. The default value is <u>5</u> seconds.

       <b>sql_database</b>: <u>Database</u>
           An SQL database name. For SQLite this must be a full path to a database file. The default value is
           <u>ejabberd</u>.

       <b>sql_flags</b>: <u>[mysql_alternative_upsert]</u>
           <u>Note</u> about this option: added in 24.02. This option accepts a list of SQL flags, and is empty by
           default.  <u>mysql_alternative_upsert</u> forces the alternative upsert implementation in MySQL.

       <b>sql_keepalive_interval</b>: <u>timeout()</u>
           An interval to make a dummy SQL request to keep alive the connections to the database. There is no
           default value, so no keepalive requests are made.

       <b>sql_odbc_driver</b>: <u>Path</u>
           <u>Note</u> about this option: added in 20.12. Path to the ODBC driver to use to connect to a Microsoft SQL
           Server database. This option only applies if the <u>sql_type</u> option is set to <u>mssql</u> and <u>sql_server</u> is
           not an ODBC connection string. The default value is: <u>libtdsodbc.so</u>

       <b>sql_password</b>: <u>Password</u>
           The password for SQL authentication. The default is empty string.

       <b>sql_pool_size</b>: <u>Size</u>
           Number of connections to the SQL server that ejabberd will open for each virtual host. The default
           value is <u>10</u>. WARNING: for SQLite this value is <u>1</u> by default and itâ€™s not recommended to change it due
           to potential race conditions.

       <b>sql_port</b>: <u>1..65535</u>
           The port where the SQL server is accepting connections. The default is <u>3306</u> for MySQL, <u>5432</u> for
           PostgreSQL and <u>1433</u> for MS SQL. The option has no effect for SQLite.

       <b>sql_prepared_statements</b>: <u>true</u> <u>|</u> <u>false</u>
           <u>Note</u> about this option: added in 20.01. This option is <u>true</u> by default, and is useful to disable
           prepared statements. The option is valid for PostgreSQL and MySQL.

       <b>sql_query_timeout</b>: <u>timeout()</u>
           A time to wait for an SQL query response. The default value is <u>60</u> seconds.

       <b>sql_queue_type</b>: <u>ram</u> <u>|</u> <u>file</u>
           The type of a request queue for the SQL server. See description of <u>queue_type</u> option for the
           explanation. The default value is the value defined in <u>queue_type</u> or <u>ram</u> if the latter is not set.

       <b>sql_server</b>: <u>Host</u> <u>|</u> <u>IP</u> <u>Address</u> <u>|</u> <u>ODBC</u> <u>Connection</u> <u>String</u> <u>|</u> <u>Unix</u> <u>Socket</u> <u>Path</u>
           <u>Note</u> about this option: improved in 24.06. The hostname or IP address of the SQL server. For <u>sql_type</u>
           <u>mssql</u> or <u>odbc</u> this can also be an ODBC connection string. When <u>sql_type</u> is <u>mysql</u> or <u>pgsql</u>, this can
           be the path to a unix domain socket expressed like: <u>"unix:/path/to/socket"</u>.The default value is
           <u>localhost</u>.

       <b>sql_ssl</b>: <u>true</u> <u>|</u> <u>false</u>
           <u>Note</u> about this option: improved in 20.03. Whether to use SSL encrypted connections to the SQL
           server. The option is only available for MySQL, MS SQL and PostgreSQL. The default value is <u>false</u>.

       <b>sql_ssl_cafile</b>: <u>Path</u>
           A path to a file with CA root certificates that will be used to verify SQL connections. Implies
           <u>sql_ssl</u> and <u>sql_ssl_verify</u> options are set to <u>true</u>. There is no default which means certificate
           verification is disabled. This option has no effect for MS SQL.

       <b>sql_ssl_certfile</b>: <u>Path</u>
           A path to a certificate file that will be used for SSL connections to the SQL server. Implies <u>sql_ssl</u>
           option is set to <u>true</u>. There is no default which means ejabberd wonâ€™t provide a client certificate to
           the SQL server. This option has no effect for MS SQL.

       <b>sql_ssl_verify</b>: <u>true</u> <u>|</u> <u>false</u>
           Whether to verify SSL connection to the SQL server against CA root certificates defined in
           <u>sql_ssl_cafile</u> option. Implies <u>sql_ssl</u> option is set to <u>true</u>. This option has no effect for MS SQL.
           The default value is <u>false</u>.

       <b>sql_start_interval</b>: <u>timeout()</u>
           A time to wait before retrying to restore failed SQL connection. The default value is <u>30</u> seconds.

       <b>sql_type</b>: <u>mssql</u> <u>|</u> <u>mysql</u> <u>|</u> <u>odbc</u> <u>|</u> <u>pgsql</u> <u>|</u> <u>sqlite</u>
           The type of an SQL connection. The default is <u>odbc</u>.

       <b>sql_username</b>: <u>Username</u>
           A user name for SQL authentication. The default value is <u>ejabberd</u>.

       <b>trusted_proxies</b>: <u>all</u> <u>|</u> <u>[Network1,</u> <u>Network2,</u> <u>...]</u>
           Specify what proxies are trusted when an HTTP request contains the header <u>X-Forwarded-For</u>. You can
           specify <u>all</u> to allow all proxies, or specify a list of IPs, possibly with masks. The default value is
           an empty list. Using this option you can know the real IP of the request, for admin purpose, or
           security configuration (for example using <u>mod_fail2ban</u>). IMPORTANT: The proxy MUST be configured to
           set the <u>X-Forwarded-For</u> header if you enable this option as, otherwise, the client can set it itself
           and as a result the IP value cannot be trusted for security rules in ejabberd.

       <b>update_sql_schema</b>: <u>true</u> <u>|</u> <u>false</u>
           <u>Note</u> about this option: updated in 24.06. Allow ejabberd to update SQL schema in MySQL, PostgreSQL
           and SQLite databases. This option was added in ejabberd 23.10, and enabled by default since 24.06.
           The default value is <u>true</u>.

       <b>update_sql_schema_timeout</b>: <u>timeout()</u>
           <u>Note</u> about this option: added in 24.07. Time allocated to SQL schema update queries. The default
           value is set to 5 minutes.

       <b>use_cache</b>: <u>true</u> <u>|</u> <u>false</u>
           Enable or disable cache. The default is <u>true</u>. Several modules have a similar option; and some core
           ejabberd parts support similar options too, see <u>auth_use_cache</u>, <u>oauth_use_cache</u>, <u>router_use_cache</u>,
           and <u>sm_use_cache</u>.

       <b>validate_stream</b>: <u>true</u> <u>|</u> <u>false</u>
           Whether to validate any incoming XML packet according to the schemas of supported XMPP extensions.
           WARNING: the validation is only intended for the use by client developers - donâ€™t enable it in
           production environment. The default value is <u>false</u>.

       <b>version</b>: <u>string()</u>
           The option can be used to set custom ejabberd version, that will be used by different parts of
           ejabberd, for example by <u>mod_version</u> module. The default value is obtained at compile time from the
           underlying version control system.

       <b>websocket_origin</b>: <u>ignore</u> <u>|</u> <u>URL</u>
           This option enables validation for <u>Origin</u> header to protect against connections from other domains
           than given in the configuration file. In this way, the lower layer load balancer can be chosen for a
           specific ejabberd implementation while still providing a secure WebSocket connection. The default
           value is <u>ignore</u>. An example value of the <u>URL</u> is <u>"https://test.example.org:8081"</u>.

       <b>websocket_ping_interval</b>: <u>timeout()</u>
           Defines time between pings sent by the server to a client (WebSocket level protocol pings are used
           for this) to keep a connection active. If the client doesnâ€™t respond to two consecutive pings, the
           connection will be assumed as closed. The value of <u>0</u> can be used to disable the feature. This option
           makes the server sending pings only for connections using the RFC compliant protocol. For older style
           connections the server expects that whitespace pings would be used for this purpose. The default
           value is <u>60</u> seconds.

       <b>websocket_timeout</b>: <u>timeout()</u>
           Amount of time without any communication after which the connection would be closed. The default
           value is <u>300</u> seconds.

</pre><h4><b>MODULES</b></h4><pre>
       This section describes modules options of ejabberd 24.12. The modules that changed in this version are
       marked with ðŸŸ¤.

   <b>mod_adhoc</b>
       This module implements XEP-0050: Ad-Hoc Commands. Itâ€™s an auxiliary module and is only needed by some of
       the other modules.

       <b>Available</b> <b>options:</b>

           <b>report_commands_node</b>: <u>true</u> <u>|</u> <u>false</u>
               Provide the Commands item in the Service Discovery. Default value: <u>false</u>.

   <b>mod_admin_extra</b>
       This module provides additional administrative commands.

       Details for some commands:

       <u>ban_account</u> API: This command kicks all the connected sessions of the account from the server. It also
       changes their password to a randomly generated one, so they canâ€™t login anymore unless a server
       administrator changes their password again. It is possible to define the reason of the ban. The new
       password also includes the reason and the date and time of the ban. See an example below.

       <u>push_roster</u> API (and <u>push_roster_all</u> API): The roster file must be placed, if using Windows, on the
       directory where you installed ejabberd: C:/Program Files/ejabberd or similar. If you use other Operating
       System, place the file on the same directory where the .beam files are installed. See below an example
       roster file.

       <u>srg_create</u> API: If you want to put a group Name with blank spaces, use the characters <u>"</u>' and <u>'"</u> to define
       when the Name starts and ends. See an example below.

       The module has no options.

       <b>Examples:</b>

           With this configuration, vCards can only be modified with mod_admin_extra commands:

               acl:
                 adminextraresource:
                   - resource: "modadminextraf8x,31ad"
               access_rules:
                 vcard_set:
                   - allow: adminextraresource
               modules:
                 mod_admin_extra: {}
                 mod_vcard:
                   access_set: vcard_set

           Content of roster file for <u>push_roster</u> API:

               [{&lt;&lt;"bob"&gt;&gt;, &lt;&lt;"example.org"&gt;&gt;, &lt;&lt;"workers"&gt;&gt;, &lt;&lt;"Bob"&gt;&gt;},
               {&lt;&lt;"mart"&gt;&gt;, &lt;&lt;"example.org"&gt;&gt;, &lt;&lt;"workers"&gt;&gt;, &lt;&lt;"Mart"&gt;&gt;},
               {&lt;&lt;"Rich"&gt;&gt;, &lt;&lt;"example.org"&gt;&gt;, &lt;&lt;"bosses"&gt;&gt;, &lt;&lt;"Rich"&gt;&gt;}].

           With this call, the sessions of the local account which JID is <u><a href="mailto:boby@example.org">boby@example.org</a></u> will be kicked, and
           its password will be set to something like <u>BANNED_ACCOUNTâ€”20080425T21:45:07â€”2176635â€”Spammed_rooms</u>

               ejabberdctl vhost example.org ban_account boby "Spammed rooms"

           Call to <u>srg_create</u> API using double-quotes and single-quotes:

               ejabberdctl srg_create g1 example.org "'Group number 1'" this_is_g1 g1

   <b>mod_admin_update_sql</b>
       This module can be used to update existing SQL database from the default to the new schema. Check the
       section <u>database.md#default-and-new-schemas|Default</u> <u>and</u> <u>New</u> <u>Schemas</u> for details. Please note that only MS
       SQL, MySQL, and PostgreSQL are supported. When the module is loaded use <u>update_sql</u> API.

       The module has no options.

   <b>mod_announce</b>
       This module enables configured users to broadcast announcements and to set the message of the day (MOTD).
       Configured users can perform these actions with an XMPP client either using Ad-hoc Commands or sending
       messages to specific JIDs.

       Note that this module can be resource intensive on large deployments as it may broadcast a lot of
       messages. This module should be disabled for instances of ejabberd with hundreds of thousands users.

       The Ad-hoc Commands are listed in the Server Discovery. For this feature to work, <u>mod_adhoc</u> must be
       enabled.

       The specific JIDs where messages can be sent are listed below. The first JID in each entry will apply
       only to the specified virtual host example.org, while the JID between brackets will apply to all virtual
       hosts in ejabberd:

       â€¢   example.org/announce/all (example.org/announce/all-hosts/all):: The message is sent to all registered
           users. If the user is online and connected to several resources, only the resource with the highest
           priority will receive the message. If the registered user is not connected, the message will be
           stored offline in assumption that offline storage (see <u>mod_offline</u>) is enabled.

       â€¢   example.org/announce/online (example.org/announce/all-hosts/online):: The message is sent to all
           connected users. If the user is online and connected to several resources, all resources will receive
           the message.

       â€¢   example.org/announce/motd (example.org/announce/all-hosts/motd):: The message is set as the message
           of the day (MOTD) and is sent to users when they login. In addition the message is sent to all
           connected users (similar to announce/online).

       â€¢   example.org/announce/motd/update (example.org/announce/all-hosts/motd/update):: The message is set as
           message of the day (MOTD) and is sent to users when they login. The message is not sent to any
           currently connected user.

       â€¢   example.org/announce/motd/delete (example.org/announce/all-hosts/motd/delete):: Any message sent to
           this JID removes the existing message of the day (MOTD).

       <b>Available</b> <b>options:</b>

           <b>access</b>: <u>AccessName</u>
               This option specifies who is allowed to send announcements and to set the message of the day. The
               default value is <u>none</u> (i.e. nobody is able to send such messages).

           <b>cache_life_time</b>: <u>timeout()</u>
               Same as top-level <u>cache_life_time</u> option, but applied to this module only.

           <b>cache_missed</b>: <u>true</u> <u>|</u> <u>false</u>
               Same as top-level <u>cache_missed</u> option, but applied to this module only.

           <b>cache_size</b>: <u>pos_integer()</u> <u>|</u> <u>infinity</u>
               Same as top-level <u>cache_size</u> option, but applied to this module only.

           <b>db_type</b>: <u>mnesia</u> <u>|</u> <u>sql</u>
               Same as top-level <u>default_db</u> option, but applied to this module only.

           <b>use_cache</b>: <u>true</u> <u>|</u> <u>false</u>
               Same as top-level <u>use_cache</u> option, but applied to this module only.

   <b>mod_auth_fast</b> <b>ðŸŸ¤</b>
       <u>Note</u> about this option: added in 24.12.

       The module adds support for XEP-0480: Fast Authentication Streamlining Tokens that allows users to
       authenticate using self managed tokens.

       <b>Available</b> <b>options:</b>

           <b>db_type</b>: <u>mnesia</u> <u>|</u> <u>sql</u>
               Same as top-level <u>default_db</u> option, but applied to this module only.

           <b>token_lifetime</b>: <u>timeout()</u>
               Time that tokens will be kept, measured from itâ€™s creation time. Default value set to 30 days

           <b>token_refresh_age</b>: <u>timeout()</u>
               This time determines age of token, that qualifies for automatic refresh. Default value set to 1
               day

       <b>Example:</b>

               modules:
                 mod_auth_fast:
                   token_timeout: 14days

   <b>mod_avatar</b>
       The purpose of the module is to cope with legacy and modern XMPP clients posting avatars. The process is
       described in XEP-0398: User Avatar to vCard-Based Avatars Conversion.

       Also, the module supports conversion between avatar image formats on the fly.

       The module depends on <u>mod_vcard</u>, <u>mod_vcard_xupdate</u> and <u>mod_pubsub</u>.

       <b>Available</b> <b>options:</b>

           <b>convert</b>: <u>{From:</u> <u>To}</u>
               Defines image conversion rules: the format in <u>From</u> will be converted to format in <u>To</u>. The value
               of <u>From</u> can also be <u>default</u>, which is match-all rule. NOTE: the list of supported formats is
               detected at compile time depending on the image libraries installed in the system.

               <b>Example</b>:

                   convert:
                     webp: jpg
                     default: png

           <b>rate_limit</b>: <u>Number</u>
               Limit any given JID by the number of avatars it is able to convert per minute. This is to protect
               the server from image conversion DoS. The default value is <u>10</u>.

   <b>mod_block_strangers</b>
       This module blocks and logs any messages coming from an unknown entity. If a writing entity is not in
       your roster, you can let this module drop and/or log the message. By default youâ€™ll just not receive
       message from that entity. Enable this module if you want to drop SPAM messages.

       <b>Available</b> <b>options:</b>

           <b>access</b>: <u>AccessName</u>
               The option is supposed to be used when <u>allow_local_users</u> and <u>allow_transports</u> are not enough.
               Itâ€™s an ACL where <u>deny</u> means the message will be rejected (or a CAPTCHA would be generated for a
               presence, if configured), and <u>allow</u> means the sender is whitelisted and the stanza will pass
               through. The default value is <u>none</u>, which means nothing is whitelisted.

           <b>allow_local_users</b>: <u>true</u> <u>|</u> <u>false</u>
               This option specifies if strangers from the same local host should be accepted or not. The
               default value is <u>true</u>.

           <b>allow_transports</b>: <u>true</u> <u>|</u> <u>false</u>
               If set to <u>true</u> and some serverâ€™s JID is in userâ€™s roster, then messages from any user of this
               server are accepted even if no subscription present. The default value is <u>true</u>.

           <b>captcha</b>: <u>true</u> <u>|</u> <u>false</u>
               Whether to generate CAPTCHA or not in response to messages from strangers. See also section
               <u>basic.md#captcha|CAPTCHA</u> of the Configuration Guide. The default value is <u>false</u>.

           <b>drop</b>: <u>true</u> <u>|</u> <u>false</u>
               This option specifies if strangers messages should be dropped or not. The default value is <u>true</u>.

           <b>log</b>: <u>true</u> <u>|</u> <u>false</u>
               This option specifies if strangers' messages should be logged (as info message) in ejabberd.log.
               The default value is <u>false</u>.

   <b>mod_blocking</b>
       The module implements XEP-0191: Blocking Command.

       This module depends on <u>mod_privacy</u> where all the configuration is performed.

       The module has no options.

   <b>mod_bosh</b>
       This module implements XMPP over BOSH as defined in XEP-0124 and XEP-0206. BOSH stands for
       Bidirectional-streams Over Synchronous HTTP. It makes it possible to simulate long lived connections
       required by XMPP over the HTTP protocol. In practice, this module makes it possible to use XMPP in a
       browser without WebSocket support and more generally to have a way to use XMPP while having to get
       through an HTTP proxy.

       <b>Available</b> <b>options:</b>

           <b>cache_life_time</b>: <u>timeout()</u>
               Same as top-level <u>cache_life_time</u> option, but applied to this module only.

           <b>cache_missed</b>: <u>true</u> <u>|</u> <u>false</u>
               Same as top-level <u>cache_missed</u> option, but applied to this module only.

           <b>cache_size</b>: <u>pos_integer()</u> <u>|</u> <u>infinity</u>
               Same as top-level <u>cache_size</u> option, but applied to this module only.

           <b>json</b>: <u>true</u> <u>|</u> <u>false</u>
               This option has no effect.

           <b>max_concat</b>: <u>pos_integer()</u> <u>|</u> <u>infinity</u>
               This option limits the number of stanzas that the server will send in a single bosh request. The
               default value is <u>unlimited</u>.

           <b>max_inactivity</b>: <u>timeout()</u>
               The option defines the maximum inactivity period. The default value is <u>30</u> seconds.

           <b>max_pause</b>: <u>pos_integer()</u>
               Indicate the maximum length of a temporary session pause (in seconds) that a client can request.
               The default value is <u>120</u>.

           <b>prebind</b>: <u>true</u> <u>|</u> <u>false</u>
               If enabled, the client can create the session without going through authentication. Basically, it
               creates a new session with anonymous authentication. The default value is <u>false</u>.

           <b>queue_type</b>: <u>ram</u> <u>|</u> <u>file</u>
               Same as top-level <u>queue_type</u> option, but applied to this module only.

           <b>ram_db_type</b>: <u>mnesia</u> <u>|</u> <u>sql</u> <u>|</u> <u>redis</u>
               Same as top-level <u>default_ram_db</u> option, but applied to this module only.

           <b>use_cache</b>: <u>true</u> <u>|</u> <u>false</u>
               Same as top-level <u>use_cache</u> option, but applied to this module only.

       <b>Example:</b>

               listen:
                 -
                   port: 5222
                   module: ejabberd_c2s
                 -
                   port: 5443
                   module: ejabberd_http
                   request_handlers:
                     /bosh: mod_bosh

               modules:
                 mod_bosh: {}

   <b>mod_caps</b>
       This module implements XEP-0115: Entity Capabilities. The main purpose of the module is to provide PEP
       functionality (see <u>mod_pubsub</u>).

       <b>Available</b> <b>options:</b>

           <b>cache_life_time</b>: <u>timeout()</u>
               Same as top-level <u>cache_life_time</u> option, but applied to this module only.

           <b>cache_missed</b>: <u>true</u> <u>|</u> <u>false</u>
               Same as top-level <u>cache_missed</u> option, but applied to this module only.

           <b>cache_size</b>: <u>pos_integer()</u> <u>|</u> <u>infinity</u>
               Same as top-level <u>cache_size</u> option, but applied to this module only.

           <b>db_type</b>: <u>mnesia</u> <u>|</u> <u>sql</u>
               Same as top-level <u>default_db</u> option, but applied to this module only.

           <b>use_cache</b>: <u>true</u> <u>|</u> <u>false</u>
               Same as top-level <u>use_cache</u> option, but applied to this module only.

   <b>mod_carboncopy</b>
       The module implements XEP-0280: Message Carbons. The module broadcasts messages on all connected user
       resources (devices).

       The module has no options.

   <b>mod_client_state</b>
       This module allows for queueing certain types of stanzas when a client indicates that the user is not
       actively using the client right now (see XEP-0352: Client State Indication). This can save bandwidth and
       resources.

       A stanza is dropped from the queue if itâ€™s effectively obsoleted by a new one (e.g., a new presence
       stanza would replace an old one from the same client). The queue is flushed if a stanza arrives that
       wonâ€™t be queued, or if the queue size reaches a certain limit (currently 100 stanzas), or if the client
       becomes active again.

       <b>Available</b> <b>options:</b>

           <b>queue_chat_states</b>: <u>true</u> <u>|</u> <u>false</u>
               Queue "standalone" chat state notifications (as defined in XEP-0085: Chat State Notifications)
               while a client indicates inactivity. The default value is <u>true</u>.

           <b>queue_pep</b>: <u>true</u> <u>|</u> <u>false</u>
               Queue PEP notifications while a client is inactive. When the queue is flushed, only the most
               recent notification of a given PEP node is delivered. The default value is <u>true</u>.

           <b>queue_presence</b>: <u>true</u> <u>|</u> <u>false</u>
               While a client is inactive, queue presence stanzas that indicate (un)availability. The default
               value is <u>true</u>.

   <b>mod_configure</b>
       The module provides server configuration functionality via XEP-0050: Ad-Hoc Commands. Implements many
       commands as defined in XEP-0133: Service Administration. This module requires <u>mod_adhoc</u> to be loaded.

       The module has no options.

   <b>mod_conversejs</b>
       <u>Note</u> about this option: added in 21.12 and improved in 22.05.

       This module serves a simple page for the Converse XMPP web browser client.

       To use this module, in addition to adding it to the <u>modules</u> section, you must also enable it in <u>listen</u> â†’
       <u>ejabberd_http</u> â†’ <u>listen-options.md#request_handlers|request_handlers</u>.

       Make sure either <u>mod_bosh</u> or <u>listen.md#ejabberd_http_ws|ejabberd_http_ws</u> are enabled in at least one
       <u>request_handlers</u>.

       When <u>conversejs_css</u> and <u>conversejs_script</u> are <u>auto</u>, by default they point to the public Converse client.

       <b>Available</b> <b>options:</b>

           <b>bosh_service_url</b>: <u>auto</u> <u>|</u> <u>BoshURL</u>
               BOSH service URL to which Converse can connect to. The keyword <u>@HOST@</u> is replaced with the real
               virtual host name. If set to <u>auto</u>, it will build the URL of the first configured BOSH request
               handler. The default value is <u>auto</u>.

           <b>conversejs_css</b>: <u>auto</u> <u>|</u> <u>URL</u>
               Converse CSS URL. The keyword <u>@HOST@</u> is replaced with the hostname. The default value is <u>auto</u>.

           <b>conversejs_options</b>: <u>{Name:</u> <u>Value}</u>
               <u>Note</u> about this option: added in 22.05. Specify additional options to be passed to Converse. See
               Converse configuration. Only boolean, integer and string values are supported; lists are not
               supported.

           <b>conversejs_resources</b>: <u>Path</u>
               <u>Note</u> about this option: added in 22.05. Local path to the Converse files. If not set, the public
               Converse client will be used instead.

           <b>conversejs_script</b>: <u>auto</u> <u>|</u> <u>URL</u>
               Converse main script URL. The keyword <u>@HOST@</u> is replaced with the hostname. The default value is
               <u>auto</u>.

           <b>default_domain</b>: <u>Domain</u>
               Specify a domain to act as the default for user JIDs. The keyword <u>@HOST@</u> is replaced with the
               hostname. The default value is <u>@HOST@</u>.

           <b>websocket_url</b>: <u>auto</u> <u>|</u> <u>WebSocketURL</u>
               A WebSocket URL to which Converse can connect to. The <u>@HOST@</u> keyword is replaced with the real
               virtual host name. If set to <u>auto</u>, it will build the URL of the first configured WebSocket
               request handler. The default value is <u>auto</u>.

       <b>Examples:</b>

           Manually setup WebSocket url, and use the public Converse client:

               listen:
                 -
                   port: 5280
                   module: ejabberd_http
                   request_handlers:
                     /bosh: mod_bosh
                     /websocket: ejabberd_http_ws
                     /conversejs: mod_conversejs

               modules:
                 mod_bosh: {}
                 mod_conversejs:
                   websocket_url: "ws://@HOST@:5280/websocket"

           Host Converse locally and let auto detection of WebSocket and Converse URLs:

               listen:
                 -
                   port: 443
                   module: ejabberd_http
                   tls: true
                   request_handlers:
                     /websocket: ejabberd_http_ws
                     /conversejs: mod_conversejs

               modules:
                 mod_conversejs:
                   conversejs_resources: "/home/ejabberd/conversejs-9.0.0/package/dist"

           Configure some additional options for Converse

               modules:
                 mod_conversejs:
                   websocket_url: auto
                   conversejs_options:
                     auto_away: 30
                     clear_cache_on_logout: true
                     i18n: "pt"
                     locked_domain: "@HOST@"
                     message_archiving: always
                     theme: dracula

   <b>mod_delegation</b>
       This module is an implementation of XEP-0355: Namespace Delegation. Only admin mode has been implemented
       by now. Namespace delegation allows external services to handle IQ using specific namespace. This may be
       applied for external PEP service.

           <b>Warning</b>

           Security issue: Namespace delegation gives components access to sensitive data, so permission should
           be granted carefully, only if you trust the component.

           <b>Note</b>

           This module is complementary to <u>mod_privilege</u> but can also be used separately.

       <b>Available</b> <b>options:</b>

           <b>namespaces</b>: <u>{Namespace:</u> <u>Options}</u>
               If you want to delegate namespaces to a component, specify them in this option, and associate
               them to an access rule. The <u>Options</u> are:

               <b>access</b>: <u>AccessName</u>
                   The option defines which components are allowed for namespace delegation. The default value
                   is <u>none</u>.

               <b>filtering</b>: <u>Attributes</u>
                   The list of attributes. Currently not used.

       <b>Examples:</b>

           Make sure you do not delegate the same namespace to several services at the same time. As in the
           example provided later, to have the <u>sat-pubsub.example.org</u> component perform correctly disable the
           <u>mod_pubsub</u> module.

               access_rules:
                 external_pubsub:
                   allow: external_component
                 external_mam:
                   allow: external_component

               acl:
                 external_component:
                   server: sat-pubsub.example.org

               modules:
                 mod_delegation:
                   namespaces:
                     urn:xmpp:mam:1:
                       access: external_mam
                     <a href="http://jabber.org/protocol/pubsub">http://jabber.org/protocol/pubsub</a>:
                       access: external_pubsub

   <b>mod_disco</b>
       This module adds support for XEP-0030: Service Discovery. With this module enabled, services on your
       server can be discovered by XMPP clients.

       <b>Available</b> <b>options:</b>

           <b>extra_domains</b>: <u>[Domain,</u> <u>...]</u>
               With this option, you can specify a list of extra domains that are added to the Service Discovery
               item list. The default value is an empty list.

           <b>name</b>: <u>Name</u>
               A name of the server in the Service Discovery. This will only be displayed by special XMPP
               clients. The default value is <u>ejabberd</u>.

           <b>server_info</b>: <u>[Info,</u> <u>...]</u>
               Specify additional information about the server, as described in XEP-0157: Contact Addresses for
               XMPP Services. Every <u>Info</u> element in the list is constructed from the following options:

               <b>modules</b>: <u>all</u> <u>|</u> <u>[Module,</u> <u>...]</u>
                   The value can be the keyword <u>all</u>, in which case the information is reported in all the
                   services, or a list of ejabberd modules, in which case the information is only specified for
                   the services provided by those modules.

               <b>name</b>: <u>Name</u>
                   The field <u>var</u> name that will be defined. See XEP-0157 for some standardized names.

               <b>urls</b>: <u>[URI,</u> <u>...]</u>
                   A list of contact URIs, such as HTTP URLs, XMPP URIs and so on.

               <b>Example</b>:

                   server_info:
                     -
                       modules: all
                       name: abuse-addresses
                       urls: ["<a href="mailto:abuse@shakespeare.lit">mailto:abuse@shakespeare.lit</a>"]
                     -
                       modules: [mod_muc]
                       name: "Web chatroom logs"
                       urls: ["<a href="http://www.example.org/muc-logs">http://www.example.org/muc-logs</a>"]
                     -
                       modules: [mod_disco]
                       name: feedback-addresses
                       urls:
                         - <a href="http://shakespeare.lit/feedback.php">http://shakespeare.lit/feedback.php</a>
                         - <a href="mailto:feedback@shakespeare.lit">mailto:feedback@shakespeare.lit</a>
                         - xmpp:<a href="mailto:feedback@shakespeare.lit">feedback@shakespeare.lit</a>
                     -
                       modules:
                         - mod_disco
                         - mod_vcard
                       name: admin-addresses
                       urls:
                         - <a href="mailto:xmpp@shakespeare.lit">mailto:xmpp@shakespeare.lit</a>
                         - xmpp:<a href="mailto:admins@shakespeare.lit">admins@shakespeare.lit</a>

   <b>mod_fail2ban</b>
       The module bans IPs that show the malicious signs. Currently only C2S authentication failures are
       detected.

       Unlike the standalone program, <u>mod_fail2ban</u> clears the record of authentication failures after some time
       since the first failure or on a successful authentication. It also does not simply block network traffic,
       but provides the client with a descriptive error message.

           <b>Warning</b>

           You should not use this module behind a proxy or load balancer. ejabberd will see the failures as
           coming from the load balancer and, when the threshold of auth failures is reached, will reject all
           connections coming from the load balancer. You can lock all your user base out of ejabberd when using
           this module behind a proxy.

       <b>Available</b> <b>options:</b>

           <b>access</b>: <u>AccessName</u>
               Specify an access rule for whitelisting IP addresses or networks. If the rule returns <u>allow</u> for a
               given IP address, that address will never be banned. The <u>AccessName</u> should be of type <u>ip</u>. The
               default value is <u>none</u>.

           <b>c2s_auth_ban_lifetime</b>: <u>timeout()</u>
               The lifetime of the IP ban caused by too many C2S authentication failures. The default value is <u>1</u>
               hour.

           <b>c2s_max_auth_failures</b>: <u>Number</u>
               The number of C2S authentication failures to trigger the IP ban. The default value is <u>20</u>.

   <b>mod_host_meta</b>
       <u>Note</u> about this option: added in 22.05.

       This module serves small <u>host-meta</u> files as described in XEP-0156: Discovering Alternative XMPP
       Connection Methods.

       To use this module, in addition to adding it to the <u>modules</u> section, you must also enable it in <u>listen</u> â†’
       <u>ejabberd_http</u> â†’ <u>listen-options.md#request_handlers|request_handlers</u>.

       Notice it only works if <u>listen.md#ejabberd_http|ejabberd_http</u> has <u>listen-options.md#tls|tls</u> enabled.

       <b>Available</b> <b>options:</b>

           <b>bosh_service_url</b>: <u>undefined</u> <u>|</u> <u>auto</u> <u>|</u> <u>BoshURL</u>
               BOSH service URL to announce. The keyword <u>@HOST@</u> is replaced with the real virtual host name. If
               set to <u>auto</u>, it will build the URL of the first configured BOSH request handler. The default
               value is <u>auto</u>.

           <b>websocket_url</b>: <u>undefined</u> <u>|</u> <u>auto</u> <u>|</u> <u>WebSocketURL</u>
               WebSocket URL to announce. The keyword <u>@HOST@</u> is replaced with the real virtual host name. If set
               to <u>auto</u>, it will build the URL of the first configured WebSocket request handler. The default
               value is <u>auto</u>.

       <b>Example:</b>

               listen:
                 -
                   port: 443
                   module: ejabberd_http
                   tls: true
                   request_handlers:
                     /bosh: mod_bosh
                     /ws: ejabberd_http_ws
                     /.well-known/host-meta: mod_host_meta
                     /.well-known/host-meta.json: mod_host_meta

               modules:
                 mod_bosh: {}
                 mod_host_meta:
                   bosh_service_url: "https://@HOST@:5443/bosh"
                   websocket_url: "wss://@HOST@:5443/ws"

   <b>mod_http_api</b>
       This module provides a ReST interface to call <u>../../developer/ejabberd-api/index.md|ejabberd</u> <u>API</u> commands
       using JSON data.

       To use this module, in addition to adding it to the <u>modules</u> section, you must also enable it in <u>listen</u> â†’
       <u>ejabberd_http</u> â†’ <u>listen-options.md#request_handlers|request_handlers</u>.

       To use a specific API version N, when defining the URL path in the request_handlers, add a vN. For
       example: <u>/api/v2:</u> <u>mod_http_api</u>.

       To run a command, send a POST request to the corresponding URL: <u><a href="http://localhost">http://localhost</a>:5280/api/COMMAND-NAME</u>

       <b>Available</b> <b>options:</b>

           <b>default_version</b>: <u>integer()</u> <u>|</u> <u>string()</u>
               What API version to use when none is specified in the URL path. If setting an ejabberd version,
               it will use the latest API version that was available in that ejabberd version. For example,
               setting <u>"24.06"</u> in this option implies <u>2</u>. The default value is the latest version.

       <b>Example:</b>

               listen:
                 -
                   port: 5280
                   module: ejabberd_http
                   request_handlers:
                     /api: mod_http_api

               modules:
                 mod_http_api:
                   default_version: 2

   <b>mod_http_fileserver</b>
       This simple module serves files from the local disk over HTTP.

       <b>Available</b> <b>options:</b>

           <b>accesslog</b>: <u>Path</u>
               File to log accesses using an Apache-like format. No log will be recorded if this option is not
               specified.

           <b>content_types</b>: <u>{Extension:</u> <u>Type}</u>
               Specify mappings of extension to content type. There are several content types already defined.
               With this option you can add new definitions or modify existing ones. The default values are:

               <b>Example</b>:

                   content_types:
                     .css: text/css
                     .gif: image/gif
                     .html: text/html
                     .jar: application/java-archive
                     .jpeg: image/jpeg
                     .jpg: image/jpeg
                     .js: text/javascript
                     .png: image/png
                     .svg: image/svg+xml
                     .txt: text/plain
                     .xml: application/xml
                     .xpi: application/x-xpinstall
                     .xul: application/vnd.mozilla.xul+xml

           <b>custom_headers</b>: <u>{Name:</u> <u>Value}</u>
               Indicate custom HTTP headers to be included in all responses. There are no custom headers by
               default.

           <b>default_content_type</b>: <u>Type</u>
               Specify the content type to use for unknown extensions. The default value is
               <u>application/octet-stream</u>.

           <b>directory_indices</b>: <u>[Index,</u> <u>...]</u>
               Indicate one or more directory index files, similarly to Apacheâ€™s <u>DirectoryIndex</u> variable. When
               an HTTP request hits a directory instead of a regular file, those directory indices are looked in
               order, and the first one found is returned. The default value is an empty list.

           <b>docroot</b>: <u>Path</u>
               Directory to serve the files from. This is a mandatory option.

           <b>must_authenticate_with</b>: <u>[{Username,</u> <u>Hostname},</u> <u>...]</u>
               List of accounts that are allowed to use this service. Default value: <u>[]</u>.

       <b>Examples:</b>

           This example configuration will serve the files from the local directory <u><a href="file:/var/www">/var/www</a></u> in the address
           <u><a href="http://example.org">http://example.org</a>:5280/pub/content/</u>. In this example a new content type <u>ogg</u> is defined, <u>png</u> is
           redefined, and <u>jpg</u> definition is deleted:

               listen:
                 -
                   port: 5280
                   module: ejabberd_http
                   request_handlers:
                     /pub/content: mod_http_fileserver

               modules:
                 mod_http_fileserver:
                   docroot: <a href="file:/var/www">/var/www</a>
                   accesslog: /var/log/ejabberd/access.log
                   directory_indices:
                     - index.html
                     - main.htm
                   custom_headers:
                     X-Powered-By: Erlang/OTP
                     X-Fry: "It's a widely-believed fact!"
                   content_types:
                     .ogg: audio/ogg
                     .png: image/png
                   default_content_type: text/html

   <b>mod_http_upload</b>
       This module allows for requesting permissions to upload a file via HTTP as described in XEP-0363: HTTP
       File Upload. If the request is accepted, the client receives a URL for uploading the file and another URL
       from which that file can later be downloaded.

       In order to use this module, it must be enabled in <u>listen</u> â†’ <u>ejabberd_http</u> â†’
       <u>listen-options.md#request_handlers|request_handlers</u>.

       <b>Available</b> <b>options:</b>

           <b>access</b>: <u>AccessName</u>
               This option defines the access rule to limit who is permitted to use the HTTP upload service. The
               default value is <u>local</u>. If no access rule of that name exists, no user will be allowed to use the
               service.

           <b>custom_headers</b>: <u>{Name:</u> <u>Value}</u>
               This option specifies additional header fields to be included in all HTTP responses. By default
               no custom headers are included.

           <b>dir_mode</b>: <u>Permission</u>
               This option defines the permission bits of the <u>docroot</u> directory and any directories created
               during file uploads. The bits are specified as an octal number (see the <u><a href="../man1/chmod.1.html">chmod</a>(1)</u> manual page)
               within double quotes. For example: <u>"0755"</u>. The default is undefined, which means no explicit
               permissions will be set.

           <b>docroot</b>: <u>Path</u>
               Uploaded files are stored below the directory specified (as an absolute path) with this option.
               The keyword <u>@HOME@</u> is replaced with the home directory of the user running ejabberd, and the
               keyword <u>@HOST@</u> with the virtual host name. The default value is <u>"@HOME@/upload"</u>.

           <b>external_secret</b>: <u>Text</u>
               This option makes it possible to offload all HTTP Upload processing to a separate HTTP server.
               Both ejabberd and the HTTP server should share this secret and behave exactly as described at
               Prosodyâ€™s mod_http_upload_external: Implementation. There is no default value.

           <b>file_mode</b>: <u>Permission</u>
               This option defines the permission bits of uploaded files. The bits are specified as an octal
               number (see the <u><a href="../man1/chmod.1.html">chmod</a>(1)</u> manual page) within double quotes. For example: <u>"0644"</u>. The default is
               undefined, which means no explicit permissions will be set.

           <b>get_url</b>: <u>URL</u>
               This option specifies the initial part of the GET URLs used for downloading the files. The
               default value is <u>undefined</u>. When this option is <u>undefined</u>, this option is set to the same value
               as <u>put_url</u>. The keyword <u>@HOST@</u> is replaced with the virtual host name. NOTE: if GET requests are
               handled by this module, the <u>get_url</u> must match the <u>put_url</u>. Setting it to a different value only
               makes sense if an external web server or <u>mod_http_fileserver</u> is used to serve the uploaded files.

           <b>host</b>
               Deprecated. Use <u>hosts</u> instead.

           <b>hosts</b>: <u>[Host,</u> <u>...]</u>
               This option defines the Jabber IDs of the service. If the <u>hosts</u> option is not specified, the only
               Jabber ID will be the hostname of the virtual host with the prefix <u>"upload."</u>. The keyword <u>@HOST@</u>
               is replaced with the real virtual host name.

           <b>jid_in_url</b>: <u>node</u> <u>|</u> <u>sha1</u>
               When this option is set to <u>node</u>, the node identifier of the userâ€™s JID (i.e., the user name) is
               included in the GET and PUT URLs generated by <u>mod_http_upload</u>. Otherwise, a SHA-1 hash of the
               userâ€™s bare JID is included instead. The default value is <u>sha1</u>.

           <b>max_size</b>: <u>Size</u>
               This option limits the acceptable file size. Either a number of bytes (larger than zero) or
               <u>infinity</u> must be specified. The default value is <u>104857600</u>.

           <b>name</b>: <u>Name</u>
               A name of the service in the Service Discovery. The default value is <u>"HTTP</u> <u>File</u> <u>Upload"</u>. Please
               note this will only be displayed by some XMPP clients.

           <b>put_url</b>: <u>URL</u>
               This option specifies the initial part of the PUT URLs used for file uploads. The keyword <u>@HOST@</u>
               is replaced with the virtual host name. NOTE: different virtual hosts cannot use the same PUT
               URL. The default value is <u>"https://@HOST@:5443/upload"</u>.

           <b>rm_on_unregister</b>: <u>true</u> <u>|</u> <u>false</u>
               This option specifies whether files uploaded by a user should be removed when that user is
               unregistered. The default value is <u>true</u>.

           <b>secret_length</b>: <u>Length</u>
               This option defines the length of the random string included in the GET and PUT URLs generated by
               <u>mod_http_upload</u>. The minimum length is <u>8</u> characters, but it is recommended to choose a larger
               value. The default value is <u>40</u>.

           <b>service_url</b>
               Deprecated.

           <b>thumbnail</b>: <u>true</u> <u>|</u> <u>false</u>
               This option specifies whether ejabberd should create thumbnails of uploaded images. If a
               thumbnail is created, a &lt;thumbnail/&gt; element that contains the download &lt;uri/&gt; and some metadata
               is returned with the PUT response. The default value is <u>false</u>.

           <b>vcard</b>: <u>vCard</u>
               A custom vCard of the service that will be displayed by some XMPP clients in Service Discovery.
               The value of <u>vCard</u> is a YAML map constructed from an XML representation of vCard. Since the
               representation has no attributes, the mapping is straightforward.

               <b>Example</b>:

                   # This XML representation of vCard:
                   #   &lt;vCard xmlns='vcard-temp'&gt;
                   #     &lt;FN&gt;Conferences&lt;/FN&gt;
                   #     &lt;ADR&gt;
                   #       &lt;WORK/&gt;
                   #       &lt;STREET&gt;Elm Street&lt;/STREET&gt;
                   #     &lt;/ADR&gt;
                   #   &lt;/vCard&gt;
                   #
                   # is translated to:
                   vcard:
                     fn: Conferences
                     adr:
                       -
                         work: true
                         street: Elm Street

       <b>Example:</b>

               listen:
                 -
                   port: 5443
                   module: ejabberd_http
                   tls: true
                   request_handlers:
                     /upload: mod_http_upload

               modules:
                 mod_http_upload:
                   docroot: /ejabberd/upload
                   put_url: "https://@HOST@:5443/upload"

   <b>mod_http_upload_quota</b>
       This module adds quota support for mod_http_upload.

       This module depends on <u>mod_http_upload</u>.

       <b>Available</b> <b>options:</b>

           <b>access_hard_quota</b>: <u>AccessName</u>
               This option defines which access rule is used to specify the "hard quota" for the matching JIDs.
               That rule must yield a positive number for any JID that is supposed to have a quota limit. This
               is the number of megabytes a corresponding user may upload. When this threshold is exceeded,
               ejabberd deletes the oldest files uploaded by that user until their disk usage equals or falls
               below the specified soft quota (see also option <u>access_soft_quota</u>). The default value is
               <u>hard_upload_quota</u>.

           <b>access_soft_quota</b>: <u>AccessName</u>
               This option defines which access rule is used to specify the "soft quota" for the matching JIDs.
               That rule must yield a positive number of megabytes for any JID that is supposed to have a quota
               limit. See the description of the <u>access_hard_quota</u> option for details. The default value is
               <u>soft_upload_quota</u>.

           <b>max_days</b>: <u>Days</u>
               If a number larger than zero is specified, any files (and directories) older than this number of
               days are removed from the subdirectories of the <u>docroot</u> directory, once per day. The default
               value is <u>infinity</u>.

       <b>Examples:</b>

           Notice itâ€™s not necessary to specify the <u>access_hard_quota</u> and <u>access_soft_quota</u> options in order to
           use the quota feature. You can stick to the default names and just specify access rules such as those
           in this example:

               shaper_rules:
                 soft_upload_quota:
                   1000: all # MiB
                 hard_upload_quota:
                   1100: all # MiB

               modules:
                 mod_http_upload: {}
                 mod_http_upload_quota:
                   max_days: 100

   <b>mod_jidprep</b>
       This module allows XMPP clients to ask the server to normalize a JID as per the rules specified in RFC
       6122: XMPP Address Format. This might be useful for clients in certain constrained environments, or for
       testing purposes.

       <b>Available</b> <b>options:</b>

           <b>access</b>: <u>AccessName</u>
               This option defines which access rule will be used to control who is allowed to use this service.
               The default value is <u>local</u>.

   <b>mod_last</b>
       This module adds support for XEP-0012: Last Activity. It can be used to discover when a disconnected user
       last accessed the server, to know when a connected user was last active on the server, or to query the
       uptime of the ejabberd server.

       <b>Available</b> <b>options:</b>

           <b>cache_life_time</b>: <u>timeout()</u>
               Same as top-level <u>cache_life_time</u> option, but applied to this module only.

           <b>cache_missed</b>: <u>true</u> <u>|</u> <u>false</u>
               Same as top-level <u>cache_missed</u> option, but applied to this module only.

           <b>cache_size</b>: <u>pos_integer()</u> <u>|</u> <u>infinity</u>
               Same as top-level <u>cache_size</u> option, but applied to this module only.

           <b>db_type</b>: <u>mnesia</u> <u>|</u> <u>sql</u>
               Same as top-level <u>default_db</u> option, but applied to this module only.

           <b>use_cache</b>: <u>true</u> <u>|</u> <u>false</u>
               Same as top-level <u>use_cache</u> option, but applied to this module only.

   <b>mod_legacy_auth</b>
       The module implements XEP-0078: Non-SASL Authentication.

           <b>Note</b>

           This type of authentication was obsoleted in 2008 and you unlikely need this module unless you have
           something like outdated Jabber bots.

       The module has no options.

   <b>mod_mam</b>
       This module implements XEP-0313: Message Archive Management and XEP-0441: Message Archive Management
       Preferences. Compatible XMPP clients can use it to store their chat history on the server.

       <b>Available</b> <b>options:</b>

           <b>access_preferences</b>: <u>AccessName</u>
               This access rule defines who is allowed to modify the MAM preferences. The default value is <u>all</u>.

           <b>assume_mam_usage</b>: <u>true</u> <u>|</u> <u>false</u>
               This option determines how ejabberdâ€™s stream management code (see <u>mod_stream_mgmt</u>) handles
               unacknowledged messages when the connection is lost. Usually, such messages are either bounced or
               resent. However, neither is done for messages that were stored in the userâ€™s MAM archive if this
               option is set to <u>true</u>. In this case, ejabberd assumes those messages will be retrieved from the
               archive. The default value is <u>false</u>.

           <b>cache_life_time</b>: <u>timeout()</u>
               Same as top-level <u>cache_life_time</u> option, but applied to this module only.

           <b>cache_missed</b>: <u>true</u> <u>|</u> <u>false</u>
               Same as top-level <u>cache_missed</u> option, but applied to this module only.

           <b>cache_size</b>: <u>pos_integer()</u> <u>|</u> <u>infinity</u>
               Same as top-level <u>cache_size</u> option, but applied to this module only.

           <b>clear_archive_on_room_destroy</b>: <u>true</u> <u>|</u> <u>false</u>
               Whether to destroy message archive of a room (see <u>mod_muc</u>) when it gets destroyed. The default
               value is <u>true</u>.

           <b>compress_xml</b>: <u>true</u> <u>|</u> <u>false</u>
               When enabled, new messages added to archives are compressed using a custom compression algorithm.
               This feature works only with SQL backends. The default value is <u>false</u>.

           <b>db_type</b>: <u>mnesia</u> <u>|</u> <u>sql</u>
               Same as top-level <u>default_db</u> option, but applied to this module only.

           <b>default</b>: <u>always</u> <u>|</u> <u>never</u> <u>|</u> <u>roster</u>
               The option defines default policy for chat history. When <u>always</u> is set every chat message is
               stored. With <u>roster</u> only chat history with contacts from userâ€™s roster is stored. And <u>never</u> fully
               disables chat history. Note that a client can change its policy via protocol commands. The
               default value is <u>never</u>.

           <b>request_activates_archiving</b>: <u>true</u> <u>|</u> <u>false</u>
               If the value is <u>true</u>, no messages are stored for a user until their client issue a MAM request,
               regardless of the value of the <u>default</u> option. Once the server received a request, that userâ€™s
               messages are archived as usual. The default value is <u>false</u>.

           <b>use_cache</b>: <u>true</u> <u>|</u> <u>false</u>
               Same as top-level <u>use_cache</u> option, but applied to this module only.

           <b>user_mucsub_from_muc_archive</b>: <u>true</u> <u>|</u> <u>false</u>
               When this option is disabled, for each individual subscriber a separate mucsub message is stored.
               With this option enabled, when a user fetches archive virtual mucsub, messages are generated from
               muc archives. The default value is <u>false</u>.

   <b>mod_matrix_gw</b>
       <u>Note</u> about this option: added in 24.02.

       Matrix gateway. Erlang/OTP 25 or higher is required to use this module.

       <b>Available</b> <b>options:</b>

           <b>host</b>: <u>Host</u>
               This option defines the Jabber IDs of the service. If the <u>host</u> option is not specified, the
               Jabber ID will be the hostname of the virtual host with the prefix <u>"matrix."</u>. The keyword <u>@HOST@</u>
               is replaced with the real virtual host name.

           <b>key</b>: <u>string()</u>
               Value of the matrix signing key, in base64.

           <b>key_name</b>: <u>string()</u>
               Name of the matrix signing key.

           <b>matrix_domain</b>: <u>Domain</u>
               Specify a domain in the Matrix federation. The keyword <u>@HOST@</u> is replaced with the hostname. The
               default value is <u>@HOST@</u>.

           <b>matrix_id_as_jid</b>: <u>true</u> <u>|</u> <u>false</u>
               If set to <u>true</u>, all packets failing to be delivered via an XMPP server-to-server connection will
               then be routed to the Matrix gateway by translating a Jabber ID <u><a href="mailto:user@matrixdomain.tld">user@matrixdomain.tld</a></u> to a Matrix
               user identifier <u>@user:matrixdomain.tld</u>. When set to <u>false</u>, messages must be explicitly sent to
               the matrix gateway service Jabber ID to be routed to a remote Matrix server. In this case, to
               send a message to Matrix user <u>@user:matrixdomain.tld</u>, the client must send a message to the JID
               <u>user%<a href="mailto:matrixdomain.tld@matrix.myxmppdomain.tld">matrixdomain.tld@matrix.myxmppdomain.tld</a></u>, where <u>matrix.myxmppdomain.tld</u> is the JID of the
               gateway service as set by the <u>host</u> option. The default is <u>false</u>.

       <b>Example:</b>

               listen:
                 -
                   port: 8448
                   module: ejabberd_http
                   tls: true
                   request_handlers:
                     "/_matrix": mod_matrix_gw

               modules:
                 mod_matrix_gw:
                   key_name: "key1"
                   key: "XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX"
                   matrix_id_as_jid: true

   <b>mod_metrics</b>
       This module sends events to external backend (by now only grapherl is supported). Supported events are:

       â€¢   sm_register_connection

       â€¢   sm_remove_connection

       â€¢   user_send_packet

       â€¢   user_receive_packet

       â€¢   s2s_send_packet

       â€¢   s2s_receive_packet

       â€¢   register_user

       â€¢   remove_user

       â€¢   offline_message

       When enabled, every call to these hooks triggers a counter event to be sent to the external backend.

       <b>Available</b> <b>options:</b>

           <b>ip</b>: <u>IPv4Address</u>
               IPv4 address where the backend is located. The default value is <u>127.0.0.1</u>.

           <b>port</b>: <u>Port</u>
               An internet port number at which the backend is listening for incoming connections/packets. The
               default value is <u>11111</u>.

   <b>mod_mix</b>
       <u>Note</u> about this option: added in 16.03 and improved in 19.02.

       This module is an experimental implementation of XEP-0369: Mediated Information eXchange (MIX). Itâ€™s
       asserted that the MIX protocol is going to replace the MUC protocol in the future (see <u>mod_muc</u>).

       To learn more about how to use that feature, you can refer to our tutorial:
       <u>../../tutorials/mix-010.md|Getting</u> <u>started</u> <u>with</u> <u>MIX</u>

       The module depends on <u>mod_mam</u>.

       <b>Available</b> <b>options:</b>

           <b>access_create</b>: <u>AccessName</u>
               An access rule to control MIX channels creations. The default value is <u>all</u>.

           <b>db_type</b>: <u>mnesia</u> <u>|</u> <u>sql</u>
               Same as top-level <u>default_db</u> option, but applied to this module only.

           <b>host</b>
               Deprecated. Use <u>hosts</u> instead.

           <b>hosts</b>: <u>[Host,</u> <u>...]</u>
               This option defines the Jabber IDs of the service. If the <u>hosts</u> option is not specified, the only
               Jabber ID will be the hostname of the virtual host with the prefix <u>"mix."</u>. The keyword <u>@HOST@</u> is
               replaced with the real virtual host name.

           <b>name</b>: <u>Name</u>
               A name of the service in the Service Discovery. This will only be displayed by special XMPP
               clients. The default value is <u>Channels</u>.

   <b>mod_mix_pam</b>
       This module implements XEP-0405: Mediated Information eXchange (MIX): Participant Server Requirements.
       The module is needed if MIX compatible clients on your server are going to join MIX channels (either on
       your server or on any remote servers).

           <b>Note</b>

           <u>mod_mix</u> is not required for this module to work, however, without <u>mod_mix_pam</u> the MIX functionality
           of your local XMPP clients will be impaired.

       <b>Available</b> <b>options:</b>

           <b>cache_life_time</b>: <u>timeout()</u>
               Same as top-level <u>cache_life_time</u> option, but applied to this module only.

           <b>cache_missed</b>: <u>true</u> <u>|</u> <u>false</u>
               Same as top-level <u>cache_missed</u> option, but applied to this module only.

           <b>cache_size</b>: <u>pos_integer()</u> <u>|</u> <u>infinity</u>
               Same as top-level <u>cache_size</u> option, but applied to this module only.

           <b>db_type</b>: <u>mnesia</u> <u>|</u> <u>sql</u>
               Same as top-level <u>default_db</u> option, but applied to this module only.

           <b>use_cache</b>: <u>true</u> <u>|</u> <u>false</u>
               Same as top-level <u>use_cache</u> option, but applied to this module only.

   <b>mod_mqtt</b>
       This module adds <u>../guide/mqtt/index.md|support</u> <u>for</u> <u>the</u> <u>MQTT</u> protocol version <u>3.1.1</u> and <u>5.0</u>. Remember to
       configure <u>mod_mqtt</u> in <u>modules</u> and <u>listen</u> sections.

       <b>Available</b> <b>options:</b>

           <b>access_publish</b>: <u>{TopicFilter:</u> <u>AccessName}</u>
               Access rules to restrict access to topics for publishers. By default there are no restrictions.

           <b>access_subscribe</b>: <u>{TopicFilter:</u> <u>AccessName}</u>
               Access rules to restrict access to topics for subscribers. By default there are no restrictions.

           <b>cache_life_time</b>: <u>timeout()</u>
               Same as top-level <u>cache_life_time</u> option, but applied to this module only.

           <b>cache_missed</b>: <u>true</u> <u>|</u> <u>false</u>
               Same as top-level <u>cache_missed</u> option, but applied to this module only.

           <b>cache_size</b>: <u>pos_integer()</u> <u>|</u> <u>infinity</u>
               Same as top-level <u>cache_size</u> option, but applied to this module only.

           <b>db_type</b>: <u>mnesia</u> <u>|</u> <u>sql</u>
               Same as top-level <u>default_db</u> option, but applied to this module only.

           <b>match_retained_limit</b>: <u>pos_integer()</u> <u>|</u> <u>infinity</u>
               The option limits the number of retained messages returned to a client when it subscribes to some
               topic filter. The default value is <u>1000</u>.

           <b>max_queue</b>: <u>Size</u>
               Maximum queue size for outgoing packets. The default value is <u>5000</u>.

           <b>max_topic_aliases</b>: <u>0..65535</u>
               The maximum number of aliases a client is able to associate with the topics. The default value is
               <u>100</u>.

           <b>max_topic_depth</b>: <u>Depth</u>
               The maximum topic depth, i.e. the number of slashes (<u>/</u>) in the topic. The default value is <u>8</u>.

           <b>queue_type</b>: <u>ram</u> <u>|</u> <u>file</u>
               Same as top-level <u>queue_type</u> option, but applied to this module only.

           <b>ram_db_type</b>: <u>mnesia</u>
               Same as top-level <u>default_ram_db</u> option, but applied to this module only.

           <b>session_expiry</b>: <u>timeout()</u>
               The option specifies how long to wait for an MQTT session resumption. When <u>0</u> is set, the session
               gets destroyed when the underlying client connection is closed. The default value is <u>5</u> minutes.

           <b>use_cache</b>: <u>true</u> <u>|</u> <u>false</u>
               Same as top-level <u>use_cache</u> option, but applied to this module only.

   <b>mod_mqtt_bridge</b>
       This module adds ability to synchronize local MQTT topics with data on remote servers It can update
       topics on remote servers when local user updates local topic, or can subscribe for changes on remote
       server, and update local copy when remote data is updated. It is available since ejabberd 23.01.

       <b>Available</b> <b>options:</b>

           <b>replication_user</b>: <u>JID</u>
               Identifier of a user that will be assigned as owner of local changes.

           <b>servers</b>: <u>{ServerUrl:</u> <u>{Key:</u> <u>Value}}</u>
               Declaration of data to share for each ServerUrl. Server URLs can use schemas: <u>mqtt</u>, <u>mqtts</u> (mqtt
               with tls), <u>mqtt5</u>, <u>mqtt5s</u> (both to trigger v5 protocol), <u>ws</u>, <u>wss</u>, <u>ws5</u>, <u>wss5</u>. Keys must be:

               <b>authentication</b>: <u>{AuthKey:</u> <u>AuthValue}</u>
                   List of authentication information, where AuthKey can be: <u>username</u> and <u>password</u> fields, or
                   <u>certfile</u> pointing to client certificate. Certificate authentication can be used only with
                   mqtts, mqtt5s, wss, wss5.

               <b>publish</b>: <u>{LocalTopic:</u> <u>RemoteTopic}</u>
                   Either publish or subscribe must be set, or both.

               <b>subscribe</b>: <u>{RemoteTopic:</u> <u>LocalTopic}</u>
                   Either publish or subscribe must be set, or both.

       <b>Example:</b>

               modules:
                 mod_mqtt_bridge:
                   replication_user: "<a href="mailto:mqtt@xmpp.server.com">mqtt@xmpp.server.com</a>"
                   servers:
                     "mqtt://server.com":
                       authentication:
                         certfile: "/etc/ejabberd/mqtt_server.pem"
                       publish:
                         "localA": "remoteA" # local changes to 'localA' will be replicated on remote server as 'remoteA'
                         "topicB": "topicB"
                       subscribe:
                         "remoteB": "localB" # changes to 'remoteB' on remote server will be stored as 'localB' on local server

   <b>mod_muc</b>
       This module provides support for XEP-0045: Multi-User Chat. Users can discover existing rooms, join or
       create them. Occupants of a room can chat in public or have private chats.

       The MUC service allows any Jabber ID to register a nickname, so nobody else can use that nickname in any
       room in the MUC service. To register a nickname, open the Service Discovery in your XMPP client and
       register in the MUC service.

       It is also possible to register a nickname in a room, so nobody else can use that nickname in that room.
       If a nick is registered in the MUC service, that nick cannot be registered in any room, and vice versa: a
       nick that is registered in a room cannot be registered at the MUC service.

       This module supports clustering and load balancing. One module can be started per cluster node. Rooms are
       distributed at creation time on all available MUC module instances. The multi-user chat module is
       clustered but the rooms themselves are not clustered nor fault-tolerant: if the node managing a set of
       rooms goes down, the rooms disappear and they will be recreated on an available node on first connection
       attempt.

       <b>Available</b> <b>options:</b>

           <b>access</b>: <u>AccessName</u>
               You can specify who is allowed to use the Multi-User Chat service. By default everyone is allowed
               to use it.

           <b>access_admin</b>: <u>AccessName</u>
               This option specifies who is allowed to administrate the Multi-User Chat service. The default
               value is <u>none</u>, which means that only the room creator can administer their room. The
               administrators can send a normal message to the service JID, and it will be shown in all active
               rooms as a service message. The administrators can send a groupchat message to the JID of an
               active room, and the message will be shown in the room as a service message.

           <b>access_create</b>: <u>AccessName</u>
               To configure who is allowed to create new rooms at the Multi-User Chat service, this option can
               be used. The default value is <u>all</u>, which means everyone is allowed to create rooms.

           <b>access_mam</b>: <u>AccessName</u>
               To configure who is allowed to modify the <u>mam</u> room option. The default value is <u>all</u>, which means
               everyone is allowed to modify that option.

           <b>access_persistent</b>: <u>AccessName</u>
               To configure who is allowed to modify the <u>persistent</u> room option. The default value is <u>all</u>, which
               means everyone is allowed to modify that option.

           <b>access_register</b>: <u>AccessName</u>
               <u>Note</u> about this option: improved in 23.10. This option specifies who is allowed to register
               nickname within the Multi-User Chat service and rooms. The default is <u>all</u> for backward
               compatibility, which means that any user is allowed to register any free nick in the MUC service
               and in the rooms.

           <b>cleanup_affiliations_on_start</b>: <u>true</u> <u>|</u> <u>false</u>
               <u>Note</u> about this option: added in 22.05. Remove affiliations for non-existing local users on
               startup. The default value is <u>false</u>.

           <b>db_type</b>: <u>mnesia</u> <u>|</u> <u>sql</u>
               Same as top-level <u>default_db</u> option, but applied to this module only.

           <b>default_room_options</b>: <u>Options</u>
               Define the default room options. Note that the creator of a room can modify the options of his
               room at any time using an XMPP client with MUC capability. The <u>Options</u> are:

               <b>allow_change_subj</b>: <u>true</u> <u>|</u> <u>false</u>
                   Allow occupants to change the subject. The default value is <u>true</u>.

               <b>allow_private_messages_from_visitors</b>: <u>anyone</u> <u>|</u> <u>moderators</u> <u>|</u> <u>nobody</u>
                   Visitors can send private messages to other occupants. The default value is <u>anyone</u> which
                   means visitors can send private messages to any occupant.

               <b>allow_query_users</b>: <u>true</u> <u>|</u> <u>false</u>
                   Occupants can send IQ queries to other occupants. The default value is <u>true</u>.

               <b>allow_subscription</b>: <u>true</u> <u>|</u> <u>false</u>
                   Allow users to subscribe to room events as described in
                   <u>../../developer/xmpp-clients-bots/extensions/muc-sub.md|Multi-User</u> <u>Chat</u> <u>Subscriptions</u>. The
                   default value is <u>false</u>.

               <b>allow_user_invites</b>: <u>true</u> <u>|</u> <u>false</u>
                   Allow occupants to send invitations. The default value is <u>false</u>.

               <b>allow_visitor_nickchange</b>: <u>true</u> <u>|</u> <u>false</u>
                   Allow visitors to change nickname. The default value is <u>true</u>.

               <b>allow_visitor_status</b>: <u>true</u> <u>|</u> <u>false</u>
                   Allow visitors to send status text in presence updates. If disallowed, the status text is
                   stripped before broadcasting the presence update to all the room occupants. The default value
                   is <u>true</u>.

               <b>allow_voice_requests</b>: <u>true</u> <u>|</u> <u>false</u>
                   Allow visitors in a moderated room to request voice. The default value is <u>true</u>.

               <b>allowpm</b>: <u>anyone</u> <u>|</u> <u>participants</u> <u>|</u> <u>moderators</u> <u>|</u> <u>none</u>
                   Who can send private messages. The default value is <u>anyone</u>.

               <b>anonymous</b>: <u>true</u> <u>|</u> <u>false</u>
                   The room is anonymous: occupants donâ€™t see the real JIDs of other occupants. Note that the
                   room moderators can always see the real JIDs of the occupants. The default value is <u>true</u>.

               <b>captcha_protected</b>: <u>true</u> <u>|</u> <u>false</u>
                   When a user tries to join a room where they have no affiliation (not owner, admin or member),
                   the room requires them to fill a CAPTCHA challenge (see section <u>basic.md#captcha|CAPTCHA</u> in
                   order to accept their join in the room. The default value is <u>false</u>.

               <b>description</b>: <u>Room</u> <u>Description</u>
                   Short description of the room. The default value is an empty string.

               <b>enable_hats</b>: <u>true</u> <u>|</u> <u>false</u>
                   Allow extended roles as defined in XEP-0317 Hats. The default value is <u>false</u>.

               <b>lang</b>: <u>Language</u>
                   Preferred language for the discussions in the room. The language format should conform to RFC
                   5646. There is no value by default.

               <b>logging</b>: <u>true</u> <u>|</u> <u>false</u>
                   The public messages are logged using <u>mod_muc_log</u>. The default value is <u>false</u>.

               <b>mam</b>: <u>true</u> <u>|</u> <u>false</u>
                   Enable message archiving. Implies mod_mam is enabled. The default value is <u>false</u>.

               <b>max_users</b>: <u>Number</u>
                   Maximum number of occupants in the room. The default value is <u>200</u>.

               <b>members_by_default</b>: <u>true</u> <u>|</u> <u>false</u>
                   The occupants that enter the room are participants by default, so they have "voice". The
                   default value is <u>true</u>.

               <b>members_only</b>: <u>true</u> <u>|</u> <u>false</u>
                   Only members of the room can enter. The default value is <u>false</u>.

               <b>moderated</b>: <u>true</u> <u>|</u> <u>false</u>
                   Only occupants with "voice" can send public messages. The default value is <u>true</u>.

               <b>password</b>: <u>Password</u>
                   Password of the room. Implies option <u>password_protected</u> set to <u>true</u>. There is no default
                   value.

               <b>password_protected</b>: <u>true</u> <u>|</u> <u>false</u>
                   The password is required to enter the room. The default value is <u>false</u>.

               <b>persistent</b>: <u>true</u> <u>|</u> <u>false</u>
                   The room persists even if the last participant leaves. The default value is <u>false</u>.

               <b>presence_broadcast</b>: <u>[Role]</u>
                   List of roles for which presence is broadcasted. The list can contain one or several of:
                   <u>moderator</u>, <u>participant</u>, <u>visitor</u>. The default value is shown in the example below:

                   <b>Example</b>:

                       presence_broadcast:
                         - moderator
                         - participant
                         - visitor

               <b>public</b>: <u>true</u> <u>|</u> <u>false</u>
                   The room is public in the list of the MUC service, so it can be discovered. MUC admins and
                   room participants will see private rooms in Service Discovery if their XMPP client supports
                   this feature. The default value is <u>true</u>.

               <b>public_list</b>: <u>true</u> <u>|</u> <u>false</u>
                   The list of participants is public, without requiring to enter the room. The default value is
                   <u>true</u>.

               <b>pubsub</b>: <u>PubSub</u> <u>Node</u>
                   XMPP URI of associated Publish/Subscribe node. The default value is an empty string.

               <b>title</b>: <u>Room</u> <u>Title</u>
                   A human-readable title of the room. There is no default value

               <b>vcard</b>: <u>vCard</u>
                   A custom vCard for the room. See the equivalent mod_muc option.The default value is an empty
                   string.

               <b>voice_request_min_interval</b>: <u>Number</u>
                   Minimum interval between voice requests, in seconds. The default value is <u>1800</u>.

           <b>hibernation_timeout</b>: <u>infinity</u> <u>|</u> <u>Seconds</u>
               Timeout before hibernating the room process, expressed in seconds. The default value is <u>infinity</u>.

           <b>history_size</b>: <u>Size</u>
               A small history of the current discussion is sent to users when they enter the room. With this
               option you can define the number of history messages to keep and send to users joining the room.
               The value is a non-negative integer. Setting the value to <u>0</u> disables the history feature and, as
               a result, nothing is kept in memory. The default value is <u>20</u>. This value affects all rooms on the
               service. NOTE: modern XMPP clients rely on Message Archives (XEP-0313), so feel free to disable
               the history feature if youâ€™re only using modern clients and have <u>mod_mam</u> module loaded.

           <b>host</b>
               Deprecated. Use <u>hosts</u> instead.

           <b>hosts</b>: <u>[Host,</u> <u>...]</u>
               This option defines the Jabber IDs of the service. If the <u>hosts</u> option is not specified, the only
               Jabber ID will be the hostname of the virtual host with the prefix "conference.". The keyword
               <u>@HOST@</u> is replaced with the real virtual host name.

           <b>max_captcha_whitelist</b>: <u>Number</u>
               <u>Note</u> about this option: added in 21.01. This option defines the maximum number of characters that
               Captcha Whitelist can have when configuring the room. The default value is <u>infinity</u>.

           <b>max_password</b>: <u>Number</u>
               <u>Note</u> about this option: added in 21.01. This option defines the maximum number of characters that
               Password can have when configuring the room. The default value is <u>infinity</u>.

           <b>max_room_desc</b>: <u>Number</u>
               This option defines the maximum number of characters that Room Description can have when
               configuring the room. The default value is <u>infinity</u>.

           <b>max_room_id</b>: <u>Number</u>
               This option defines the maximum number of characters that Room ID can have when creating a new
               room. The default value is <u>infinity</u>.

           <b>max_room_name</b>: <u>Number</u>
               This option defines the maximum number of characters that Room Name can have when configuring the
               room. The default value is <u>infinity</u>.

           <b>max_rooms_discoitems</b>: <u>Number</u>
               When there are more rooms than this <u>Number</u>, only the non-empty ones are returned in a Service
               Discovery query. The default value is <u>100</u>.

           <b>max_user_conferences</b>: <u>Number</u>
               This option defines the maximum number of rooms that any given user can join. The default value
               is <u>100</u>. This option is used to prevent possible abuses. Note that this is a soft limit: some
               users can sometimes join more conferences in cluster configurations.

           <b>max_users</b>: <u>Number</u>
               This option defines at the service level, the maximum number of users allowed per room. It can be
               lowered in each room configuration but cannot be increased in individual room configuration. The
               default value is <u>200</u>.

           <b>max_users_admin_threshold</b>: <u>Number</u>
               This option defines the number of service admins or room owners allowed to enter the room when
               the maximum number of allowed occupants was reached. The default limit is <u>5</u>.

           <b>max_users_presence</b>: <u>Number</u>
               This option defines after how many users in the room, it is considered overcrowded. When a MUC
               room is considered overcrowded, presence broadcasts are limited to reduce load, traffic and
               excessive presence "storm" received by participants. The default value is <u>1000</u>.

           <b>min_message_interval</b>: <u>Number</u>
               This option defines the minimum interval between two messages send by an occupant in seconds.
               This option is global and valid for all rooms. A decimal value can be used. When this option is
               not defined, message rate is not limited. This feature can be used to protect a MUC service from
               occupant abuses and limit number of messages that will be broadcasted by the service. A good
               value for this minimum message interval is <u>0.4</u> second. If an occupant tries to send messages
               faster, an error is send back explaining that the message has been discarded and describing the
               reason why the message is not acceptable.

           <b>min_presence_interval</b>: <u>Number</u>
               This option defines the minimum of time between presence changes coming from a given occupant in
               seconds. This option is global and valid for all rooms. A decimal value can be used. When this
               option is not defined, no restriction is applied. This option can be used to protect a MUC
               service for occupants abuses. If an occupant tries to change its presence more often than the
               specified interval, the presence is cached by ejabberd and only the last presence is broadcasted
               to all occupants in the room after expiration of the interval delay. Intermediate presence
               packets are silently discarded. A good value for this option is <u>4</u> seconds.

           <b>name</b>: <u>string()</u>
               The value of the service name. This name is only visible in some clients that support XEP-0030:
               Service Discovery. The default is <u>Chatrooms</u>.

           <b>preload_rooms</b>: <u>true</u> <u>|</u> <u>false</u>
               Whether to load all persistent rooms in memory on startup. If disabled, the room is only loaded
               on first participant join. The default is <u>true</u>. It makes sense to disable room preloading when
               the number of rooms is high: this will improve server startup time and memory consumption.

           <b>queue_type</b>: <u>ram</u> <u>|</u> <u>file</u>
               Same as top-level <u>queue_type</u> option, but applied to this module only.

           <b>ram_db_type</b>: <u>mnesia</u> <u>|</u> <u>sql</u>
               Same as top-level <u>default_ram_db</u> option, but applied to this module only.

           <b>regexp_room_id</b>: <u>string()</u>
               This option defines the regular expression that a Room ID must satisfy to allow the room
               creation. The default value is the empty string.

           <b>room_shaper</b>: <u>none</u> <u>|</u> <u>ShaperName</u>
               This option defines shaper for the MUC rooms. The default value is <u>none</u>.

           <b>user_message_shaper</b>: <u>none</u> <u>|</u> <u>ShaperName</u>
               This option defines shaper for the users messages. The default value is <u>none</u>.

           <b>user_presence_shaper</b>: <u>none</u> <u>|</u> <u>ShaperName</u>
               This option defines shaper for the users presences. The default value is <u>none</u>.

           <b>vcard</b>: <u>vCard</u>
               A custom vCard of the service that will be displayed by some XMPP clients in Service Discovery.
               The value of <u>vCard</u> is a YAML map constructed from an XML representation of vCard. Since the
               representation has no attributes, the mapping is straightforward.

               <b>Example</b>:

                   # This XML representation of vCard:
                   #   &lt;vCard xmlns='vcard-temp'&gt;
                   #     &lt;FN&gt;Conferences&lt;/FN&gt;
                   #     &lt;ADR&gt;
                   #       &lt;WORK/&gt;
                   #       &lt;STREET&gt;Elm Street&lt;/STREET&gt;
                   #     &lt;/ADR&gt;
                   #   &lt;/vCard&gt;
                   #
                   # is translated to:
                   vcard:
                     fn: Conferences
                     adr:
                       -
                         work: true
                         street: Elm Street

   <b>mod_muc_admin</b>
       This module provides commands to administer local MUC services and their MUC rooms. It also provides
       simple WebAdmin pages to view the existing rooms.

       This module depends on <u>mod_muc</u>.

       <b>Available</b> <b>options:</b>

           <b>subscribe_room_many_max_users</b>: <u>Number</u>
               <u>Note</u> about this option: added in 22.05. How many users can be subscribed to a room at once using
               the <u>subscribe_room_many</u> API. The default value is <u>50</u>.

   <b>mod_muc_log</b>
       This module enables optional logging of Multi-User Chat (MUC) public conversations to HTML. Once you
       enable this module, users can join a room using a MUC capable XMPP client, and if they have enough
       privileges, they can request the configuration form in which they can set the option to enable room
       logging.

       Features:

       â€¢   Room details are added on top of each page: room title, JID, author, subject and configuration.

       â€¢   The room JID in the generated HTML is a link to join the room (using XMPP URI).

       â€¢   Subject and room configuration changes are tracked and displayed.

       â€¢   Joins, leaves, nick changes, kicks, bans and <u>/me</u> are tracked and displayed, including the reason if
           available.

       â€¢   Generated HTML files are XHTML 1.0 Transitional and CSS compliant.

       â€¢   Timestamps are self-referencing links.

       â€¢   Links on top for quicker navigation: Previous day, Next day, Up.

       â€¢   CSS is used for style definition, and a custom CSS file can be used.

       â€¢   URLs on messages and subjects are converted to hyperlinks.

       â€¢   Timezone used on timestamps is shown on the log files.

       â€¢   A custom link can be added on top of each page.

       The module depends on <u>mod_muc</u>.

       <b>Available</b> <b>options:</b>

           <b>access_log</b>: <u>AccessName</u>
               This option restricts which occupants are allowed to enable or disable room logging. The default
               value is <u>muc_admin</u>. NOTE: for this default setting you need to have an access rule for <u>muc_admin</u>
               in order to take effect.

           <b>cssfile</b>: <u>Path</u> <u>|</u> <u>URL</u>
               With this option you can set whether the HTML files should have a custom CSS file or if they need
               to use the embedded CSS. Allowed values are either <u>Path</u> to local file or an <u>URL</u> to a remote file.
               By default a predefined CSS will be embedded into the HTML page.

           <b>dirname</b>: <u>room_jid</u> <u>|</u> <u>room_name</u>
               Configure the name of the room directory. If set to <u>room_jid</u>, the room directory name will be the
               full room JID. Otherwise, the room directory name will be only the room name, not including the
               MUC service name. The default value is <u>room_jid</u>.

           <b>dirtype</b>: <u>subdirs</u> <u>|</u> <u>plain</u>
               The type of the created directories can be specified with this option. If set to <u>subdirs</u>,
               subdirectories are created for each year and month. Otherwise, the names of the log files contain
               the full date, and there are no subdirectories. The default value is <u>subdirs</u>.

           <b>file_format</b>: <u>html</u> <u>|</u> <u>plaintext</u>
               Define the format of the log files: <u>html</u> stores in HTML format, <u>plaintext</u> stores in plain text.
               The default value is <u>html</u>.

           <b>file_permissions</b>: <u>{mode:</u> <u>Mode,</u> <u>group:</u> <u>Group}</u>
               Define the permissions that must be used when creating the log files: the number of the mode, and
               the numeric id of the group that will own the files. The default value is shown in the example
               below:

               <b>Example</b>:

                   file_permissions:
                     mode: 644
                     group: 33

           <b>outdir</b>: <u>Path</u>
               This option sets the full path to the directory in which the HTML files should be stored. Make
               sure the ejabberd daemon user has write access on that directory. The default value is <u>www/muc</u>.

           <b>spam_prevention</b>: <u>true</u> <u>|</u> <u>false</u>
               If set to <u>true</u>, a special attribute is added to links that prevent their indexation by search
               engines. The default value is <u>true</u>, which mean that <u>nofollow</u> attributes will be added to user
               submitted links.

           <b>timezone</b>: <u>local</u> <u>|</u> <u>universal</u>
               The time zone for the logs is configurable with this option. If set to <u>local</u>, the local time, as
               reported to Erlang emulator by the operating system, will be used. Otherwise, UTC time will be
               used. The default value is <u>local</u>.

           <b>top_link</b>: <u>{URL:</u> <u>Text}</u>
               With this option you can customize the link on the top right corner of each log file. The default
               value is shown in the example below:

               <b>Example</b>:

                   top_link:
                     /: Home

           <b>url</b>: <u>URL</u>
               A top level <u>URL</u> where a client can access logs of a particular conference. The conference name is
               appended to the URL if <u>dirname</u> option is set to <u>room_name</u> or a conference JID is appended to the
               <u>URL</u> otherwise. There is no default value.

   <b>mod_muc_occupantid</b>
       <u>Note</u> about this option: added in 23.10.

       This module implements XEP-0421: Anonymous unique occupant identifiers for MUCs.

       When the module is enabled, the feature is enabled in all semi-anonymous rooms.

       The module has no options.

   <b>mod_muc_rtbl</b>
       <u>Note</u> about this option: added in 23.04.

       This module implement Real-time blocklists for MUC rooms.

       It works by observing remote pubsub node conforming with specification described in https://xmppbl.org/.

       <b>Available</b> <b>options:</b>

           <b>rtbl_node</b>: <u>PubsubNodeName</u>
               Name of pubsub node that should be used to track blocked users. The default value is
               <u>muc_bans_sha256</u>.

           <b>rtbl_server</b>: <u>Domain</u>
               Domain of xmpp server that serves block list. The default value is <u>xmppbl.org</u>

   <b>mod_multicast</b>
       This module implements a service for XEP-0033: Extended Stanza Addressing.

       <b>Available</b> <b>options:</b>

           <b>access</b>: <u>Access</u>
               The access rule to restrict who can send packets to the multicast service. Default value: <u>all</u>.

           <b>host</b>
               Deprecated. Use <u>hosts</u> instead.

           <b>hosts</b>: <u>[Host,</u> <u>...]</u>
               This option defines the Jabber IDs of the service. If the <u>hosts</u> option is not specified, the only
               Jabber ID will be the hostname of the virtual host with the prefix "multicast.". The keyword
               <u>@HOST@</u> is replaced with the real virtual host name. The default value is <u>multicast.@HOST@</u>.

           <b>limits</b>: <u>Sender:</u> <u>Stanza:</u> <u>Number</u>
               Specify a list of custom limits which override the default ones defined in XEP-0033. Limits are
               defined per sender type and stanza type, where:

               â€¢   <u>sender</u> can be: <u>local</u> or <u>remote</u>.

               â€¢   <u>stanza</u> can be: <u>message</u> or <u>presence</u>.

               â€¢   <u>number</u> can be a positive integer or <u>infinite</u>.

                   <b>Example</b>:

                       # Default values:
                       local:
                         message: 100
                         presence: 100
                       remote:
                         message: 20
                         presence: 20

           <b>name</b>
               Service name to provide in the Info query to the Service Discovery. Default is <u>"Multicast"</u>.

           <b>vcard</b>
               vCard element to return when queried. Default value is <u>undefined</u>.

       <b>Example:</b>

               # Only admins can send packets to multicast service
               access_rules:
                 multicast:
                   - allow: admin

               # If you want to allow all your users:
               access_rules:
                 multicast:
                   - allow

               # This allows both admins and remote users to send packets,
               # but does not allow local users
               acl:
                 allservers:
                   server_glob: "*"
               access_rules:
                 multicast:
                   - allow: admin
                   - deny: local
                   - allow: allservers

               modules:
                 mod_multicast:
                    host: multicast.example.org
                    access: multicast
                    limits:
                      local:
                        message: 40
                        presence: infinite
                      remote:
                        message: 150

   <b>mod_offline</b>
       This module implements XEP-0160: Best Practices for Handling Offline Messages and XEP-0013: Flexible
       Offline Message Retrieval. This means that all messages sent to an offline user will be stored on the
       server until that user comes online again. Thus it is very similar to how email works. A user is
       considered offline if no session presence priority &gt; 0 are currently open.

       The <u>delete_expired_messages</u> API allows one to delete expired messages, and <u>delete_old_messages</u> API
       deletes older ones.

       <b>Available</b> <b>options:</b>

           <b>access_max_user_messages</b>: <u>AccessName</u>
               This option defines which access rule will be enforced to limit the maximum number of offline
               messages that a user can have (quota). When a user has too many offline messages, any new
               messages that they receive are discarded, and a <u>&lt;resource-constraint/&gt;</u> error is returned to the
               sender. The default value is <u>max_user_offline_messages</u>.

           <b>bounce_groupchat</b>: <u>true</u> <u>|</u> <u>false</u>
               This option is use the disable an optimization that avoids bouncing error messages when groupchat
               messages could not be stored as offline. It will reduce chat room load, without any drawback in
               standard use cases. You may change default value only if you have a custom module which uses
               offline hook after <u>mod_offline</u>. This option can be useful for both standard MUC and MucSub, but
               the bounce is much more likely to happen in the context of MucSub, so it is even more important
               to have it on large MucSub services. The default value is <u>false</u>, meaning the optimization is
               enabled.

           <b>cache_life_time</b>: <u>timeout()</u>
               Same as top-level <u>cache_life_time</u> option, but applied to this module only.

           <b>cache_size</b>: <u>pos_integer()</u> <u>|</u> <u>infinity</u>
               Same as top-level <u>cache_size</u> option, but applied to this module only.

           <b>db_type</b>: <u>mnesia</u> <u>|</u> <u>sql</u>
               Same as top-level <u>default_db</u> option, but applied to this module only.

           <b>store_empty_body</b>: <u>true</u> <u>|</u> <u>false</u> <u>|</u> <u>unless_chat_state</u>
               Whether or not to store messages that lack a <u>&lt;body/&gt;</u> element. The default value is
               <u>unless_chat_state</u>, which tells ejabberd to store messages even if they lack the <u>&lt;body/&gt;</u> element,
               unless they only contain a chat state notification (as defined in XEP-0085: Chat State
               Notifications.

           <b>store_groupchat</b>: <u>true</u> <u>|</u> <u>false</u>
               Whether or not to store groupchat messages. The default value is <u>false</u>.

           <b>use_cache</b>: <u>true</u> <u>|</u> <u>false</u>
               Same as top-level <u>use_cache</u> option, but applied to this module only.

           <b>use_mam_for_storage</b>: <u>true</u> <u>|</u> <u>false</u>
               This is an experimental option. By enabling the option, this module uses the <u>archive</u> table from
               <u>mod_mam</u> instead of its own spool table to retrieve the messages received when the user was
               offline. This allows client developers to slowly drop XEP-0160 and rely on XEP-0313 instead. It
               also further reduces the storage required when you enable MucSub. Enabling this option has a
               known drawback for the moment: most of flexible message retrieval queries donâ€™t work (those that
               allow retrieval/deletion of messages by id), but this specification is not widely used. The
               default value is <u>false</u> to keep former behaviour as default.

       <b>Examples:</b>

           This example allows power users to have as much as 5000 offline messages, administrators up to 2000,
           and all the other users up to 100:

               acl:
                 admin:
                   user:
                     - admin1@localhost
                     - <a href="mailto:admin2@example.org">admin2@example.org</a>
                 poweruser:
                   user:
                     - <a href="mailto:bob@example.org">bob@example.org</a>
                     - <a href="mailto:jane@example.org">jane@example.org</a>

               shaper_rules:
                 max_user_offline_messages:
                   - 5000: poweruser
                   - 2000: admin
                   - 100

               modules:
                 ...
                 mod_offline:
                   access_max_user_messages: max_user_offline_messages
                 ...

   <b>mod_ping</b>
       This module implements support for XEP-0199: XMPP Ping and periodic keepalives. When this module is
       enabled ejabberd responds correctly to ping requests, as defined by the protocol.

       <b>Available</b> <b>options:</b>

           <b>ping_ack_timeout</b>: <u>timeout()</u>
               How long to wait before deeming that a client has not answered a given server ping request. NOTE:
               when <u>mod_stream_mgmt</u> is loaded and stream management is enabled by a client, this value is
               ignored, and the ack_timeout applies instead. The default value is <u>undefined</u>.

           <b>ping_interval</b>: <u>timeout()</u>
               How often to send pings to connected clients, if option <u>send_pings</u> is set to <u>true</u>. If a client
               connection does not send or receive any stanza within this interval, a ping request is sent to
               the client. The default value is <u>1</u> minute.

           <b>send_pings</b>: <u>true</u> <u>|</u> <u>false</u>
               If this option is set to <u>true</u>, the server sends pings to connected clients that are not active in
               a given interval defined in <u>ping_interval</u> option. This is useful to keep client connections alive
               or checking availability. The default value is <u>false</u>.

           <b>timeout_action</b>: <u>none</u> <u>|</u> <u>kill</u>
               What to do when a client does not answer to a server ping request in less than period defined in
               <u>ping_ack_timeout</u> option: <u>kill</u> means destroying the underlying connection, <u>none</u> means to do
               nothing. NOTE: when <u>mod_stream_mgmt</u> is loaded and stream management is enabled by a client,
               killing the client connection doesnâ€™t mean killing the client session - the session will be kept
               alive in order to give the client a chance to resume it. The default value is <u>none</u>.

       <b>Example:</b>

               modules:
                 mod_ping:
                   send_pings: true
                   ping_interval: 4 min
                   timeout_action: kill

   <b>mod_pres_counter</b>
       This module detects flood/spam in presence subscriptions traffic. If a user sends or receives more of
       those stanzas in a given time interval, the exceeding stanzas are silently dropped, and a warning is
       logged.

       <b>Available</b> <b>options:</b>

           <b>count</b>: <u>Number</u>
               The number of subscription presence stanzas (subscribe, unsubscribe, subscribed, unsubscribed)
               allowed for any direction (input or output) per time defined in <u>interval</u> option. Please note that
               two users subscribing to each other usually generate 4 stanzas, so the recommended value is <u>4</u> or
               more. The default value is <u>5</u>.

           <b>interval</b>: <u>timeout()</u>
               The time interval. The default value is <u>1</u> minute.

       <b>Example:</b>

               modules:
                 mod_pres_counter:
                   count: 5
                   interval: 30 secs

   <b>mod_privacy</b>
       This module implements XEP-0016: Privacy Lists.

           <b>Note</b>

           Nowadays modern XMPP clients rely on XEP-0191: Blocking Command which is implemented by <u>mod_blocking</u>.
           However, you still need <u>mod_privacy</u> loaded in order for <u>mod_blocking</u> to work.

       <b>Available</b> <b>options:</b>

           <b>cache_life_time</b>: <u>timeout()</u>
               Same as top-level <u>cache_life_time</u> option, but applied to this module only.

           <b>cache_missed</b>: <u>true</u> <u>|</u> <u>false</u>
               Same as top-level <u>cache_missed</u> option, but applied to this module only.

           <b>cache_size</b>: <u>pos_integer()</u> <u>|</u> <u>infinity</u>
               Same as top-level <u>cache_size</u> option, but applied to this module only.

           <b>db_type</b>: <u>mnesia</u> <u>|</u> <u>sql</u>
               Same as top-level <u>default_db</u> option, but applied to this module only.

           <b>use_cache</b>: <u>true</u> <u>|</u> <u>false</u>
               Same as top-level <u>use_cache</u> option, but applied to this module only.

   <b>mod_private</b>
       This module adds support for XEP-0049: Private XML Storage.

       Using this method, XMPP entities can store private data on the server, retrieve it whenever necessary and
       share it between multiple connected clients of the same user. The data stored might be anything, as long
       as it is a valid XML. One typical usage is storing a bookmark of all userâ€™s conferences (XEP-0048:
       Bookmarks).

       It also implements the bookmark conversion described in XEP-0402: PEP Native Bookmarks, see
       <u>bookmarks_to_pep</u> API.

       <b>Available</b> <b>options:</b>

           <b>cache_life_time</b>: <u>timeout()</u>
               Same as top-level <u>cache_life_time</u> option, but applied to this module only.

           <b>cache_missed</b>: <u>true</u> <u>|</u> <u>false</u>
               Same as top-level <u>cache_missed</u> option, but applied to this module only.

           <b>cache_size</b>: <u>pos_integer()</u> <u>|</u> <u>infinity</u>
               Same as top-level <u>cache_size</u> option, but applied to this module only.

           <b>db_type</b>: <u>mnesia</u> <u>|</u> <u>sql</u>
               Same as top-level <u>default_db</u> option, but applied to this module only.

           <b>use_cache</b>: <u>true</u> <u>|</u> <u>false</u>
               Same as top-level <u>use_cache</u> option, but applied to this module only.

   <b>mod_privilege</b>
       <u>Note</u> about this option: improved in 24.10.

       This module is an implementation of XEP-0356: Privileged Entity. This extension allows components to have
       privileged access to other entity data (send messages on behalf of the server or on behalf of a user,
       get/set user roster, access presence information, etc.). This may be used to write powerful external
       components, for example implementing an external PEP or MAM service.

       By default a component does not have any privileged access. It is worth noting that the permissions grant
       access to the component to a specific data type for all users of the virtual host on which <u>mod_privilege</u>
       is loaded.

       Make sure you have a listener configured to connect your component. Check the section about listening
       ports for more information.

           <b>Warning</b>

           Security issue: Privileged access gives components access to sensitive data, so permission should be
           granted carefully, only if you trust a component.

           <b>Note</b>

           This module is complementary to <u>mod_delegation</u>, but can also be used separately.

       <b>Available</b> <b>options:</b>

           <b>iq</b>: <u>{Namespace:</u> <u>Options}</u>
               This option defines namespaces and their IQ permissions. By default no permissions are given. The
               <u>Options</u> are:

               <b>both</b>: <u>AccessName</u>
                   Allows sending IQ stanzas of type <u>get</u> and <u>set</u>. The default value is <u>none</u>.

               <b>get</b>: <u>AccessName</u>
                   Allows sending IQ stanzas of type <u>get</u>. The default value is <u>none</u>.

               <b>set</b>: <u>AccessName</u>
                   Allows sending IQ stanzas of type <u>set</u>. The default value is <u>none</u>.

           <b>message</b>: <u>Options</u>
               This option defines permissions for messages. By default no permissions are given. The <u>Options</u>
               are:

               <b>outgoing</b>: <u>AccessName</u>
                   The option defines an access rule for sending outgoing messages by the component. The default
                   value is <u>none</u>.

           <b>presence</b>: <u>Options</u>
               This option defines permissions for presences. By default no permissions are given. The <u>Options</u>
               are:

               <b>managed_entity</b>: <u>AccessName</u>
                   An access rule that gives permissions to the component to receive server presences. The
                   default value is <u>none</u>.

               <b>roster</b>: <u>AccessName</u>
                   An access rule that gives permissions to the component to receive the presence of both the
                   users and the contacts in their roster. The default value is <u>none</u>.

           <b>roster</b>: <u>Options</u>
               This option defines roster permissions. By default no permissions are given. The <u>Options</u> are:

               <b>both</b>: <u>AccessName</u>
                   Sets read/write access to a userâ€™s roster. The default value is <u>none</u>.

               <b>get</b>: <u>AccessName</u>
                   Sets read access to a userâ€™s roster. The default value is <u>none</u>.

               <b>set</b>: <u>AccessName</u>
                   Sets write access to a userâ€™s roster. The default value is <u>none</u>.

       <b>Example:</b>

               modules:
                 mod_privilege:
                   iq:
                     <a href="http://jabber.org/protocol/pubsub">http://jabber.org/protocol/pubsub</a>:
                       get: all
                   roster:
                     get: all
                   presence:
                     managed_entity: all
                   message:
                     outgoing: all

   <b>mod_proxy65</b>
       This module implements XEP-0065: SOCKS5 Bytestreams. It allows ejabberd to act as a file transfer proxy
       between two XMPP clients.

       <b>Available</b> <b>options:</b>

           <b>access</b>: <u>AccessName</u>
               Defines an access rule for file transfer initiators. The default value is <u>all</u>. You may want to
               restrict access to the users of your server only, in order to avoid abusing your proxy by the
               users of remote servers.

           <b>auth_type</b>: <u>anonymous</u> <u>|</u> <u>plain</u>
               SOCKS5 authentication type. The default value is <u>anonymous</u>. If set to <u>plain</u>, ejabberd will use
               authentication backend as it would for SASL PLAIN.

           <b>host</b>
               Deprecated. Use <u>hosts</u> instead.

           <b>hostname</b>: <u>Host</u>
               Defines a hostname offered by the proxy when establishing a session with clients. This is useful
               when you run the proxy behind a NAT. The keyword <u>@HOST@</u> is replaced with the virtual host name.
               The default is to use the value of <u>ip</u> option. Examples: <u>proxy.mydomain.org</u>, <u>200.150.100.50</u>.

           <b>hosts</b>: <u>[Host,</u> <u>...]</u>
               This option defines the Jabber IDs of the service. If the <u>hosts</u> option is not specified, the only
               Jabber ID will be the hostname of the virtual host with the prefix "proxy.". The keyword <u>@HOST@</u>
               is replaced with the real virtual host name.

           <b>ip</b>: <u>IPAddress</u>
               This option specifies which network interface to listen for. The default value is an IP address
               of the serviceâ€™s DNS name, or, if fails, <u>127.0.0.1</u>.

           <b>max_connections</b>: <u>pos_integer()</u> <u>|</u> <u>infinity</u>
               Maximum number of active connections per file transfer initiator. The default value is <u>infinity</u>.

           <b>name</b>: <u>Name</u>
               The value of the service name. This name is only visible in some clients that support XEP-0030:
               Service Discovery. The default is "SOCKS5 Bytestreams".

           <b>port</b>: <u>1..65535</u>
               A port number to listen for incoming connections. The default value is <u>7777</u>.

           <b>ram_db_type</b>: <u>mnesia</u> <u>|</u> <u>redis</u> <u>|</u> <u>sql</u>
               Same as top-level <u>default_ram_db</u> option, but applied to this module only.

           <b>recbuf</b>: <u>Size</u>
               A size of the buffer for incoming packets. If you define a shaper, set the value of this option
               to the size of the shaper in order to avoid traffic spikes in file transfers. The default value
               is <u>65536</u> bytes.

           <b>shaper</b>: <u>Shaper</u>
               This option defines a shaper for the file transfer peers. A shaper with the maximum bandwidth
               will be selected. The default is <u>none</u>, i.e. no shaper.

           <b>sndbuf</b>: <u>Size</u>
               A size of the buffer for outgoing packets. If you define a shaper, set the value of this option
               to the size of the shaper in order to avoid traffic spikes in file transfers. The default value
               is <u>65536</u> bytes.

           <b>vcard</b>: <u>vCard</u>
               A custom vCard of the service that will be displayed by some XMPP clients in Service Discovery.
               The value of <u>vCard</u> is a YAML map constructed from an XML representation of vCard. Since the
               representation has no attributes, the mapping is straightforward.

       <b>Example:</b>

               acl:
                 admin:
                   user: <a href="mailto:admin@example.org">admin@example.org</a>
                 proxy_users:
                   server: example.org

               access_rules:
                 proxy65_access:
                   allow: proxy_users

               shaper_rules:
                 proxy65_shaper:
                   none: admin
                 proxyrate: proxy_users

               shaper:
                 proxyrate: 10240

               modules:
                 mod_proxy65:
                   host: proxy1.example.org
                   name: "File Transfer Proxy"
                   ip: 200.150.100.1
                   port: 7778
                   max_connections: 5
                   access: proxy65_access
                   shaper: proxy65_shaper
                   recbuf: 10240
                   sndbuf: 10240

   <b>mod_pubsub</b>
       This module offers a service for XEP-0060: Publish-Subscribe. The functionality in <u>mod_pubsub</u> can be
       extended using plugins. The plugin that implements PEP (XEP-0163: Personal Eventing via Pubsub) is
       enabled in the default ejabberd configuration file, and it requires <u>mod_caps</u>.

       <b>Available</b> <b>options:</b>

           <b>access_createnode</b>: <u>AccessName</u>
               This option restricts which users are allowed to create pubsub nodes using <u>acl</u> and <u>access</u>. By
               default any account in the local ejabberd server is allowed to create pubsub nodes. The default
               value is: <u>all</u>.

           <b>db_type</b>: <u>mnesia</u> <u>|</u> <u>sql</u>
               Same as top-level <u>default_db</u> option, but applied to this module only.

           <b>default_node_config</b>: <u>List</u> <u>of</u> <u>Key:Value</u>
               To override default node configuration, regardless of node plugin. Value is a list of key-value
               definition. Node configuration still uses default configuration defined by node plugin, and
               overrides any items by value defined in this configurable list.

           <b>force_node_config</b>: <u>List</u> <u>of</u> <u>Node</u> <u>and</u> <u>the</u> <u>list</u> <u>of</u> <u>its</u> <u>Key:Value</u>
               Define the configuration for given nodes. The default value is: <u>[]</u>.

               <b>Example</b>:

                   force_node_config:
                     ## Avoid buggy clients to make their bookmarks public
                     storage:bookmarks:
                       access_model: whitelist

           <b>host</b>
               Deprecated. Use <u>hosts</u> instead.

           <b>hosts</b>: <u>[Host,</u> <u>...]</u>
               This option defines the Jabber IDs of the service. If the <u>hosts</u> option is not specified, the only
               Jabber ID will be the hostname of the virtual host with the prefix "pubsub.". The keyword <u>@HOST@</u>
               is replaced with the real virtual host name.

           <b>ignore_pep_from_offline</b>: <u>false</u> <u>|</u> <u>true</u>
               To specify whether or not we should get last published PEP items from users in our roster which
               are offline when we connect. Value is <u>true</u> or <u>false</u>. If not defined, pubsub assumes true so we
               only get last items of online contacts.

           <b>last_item_cache</b>: <u>false</u> <u>|</u> <u>true</u>
               To specify whether or not pubsub should cache last items. Value is <u>true</u> or <u>false</u>. If not defined,
               pubsub does not cache last items. On systems with not so many nodes, caching last items speeds up
               pubsub and allows you to raise the user connection rate. The cost is memory usage, as every item
               is stored in memory.

           <b>max_item_expire_node</b>: <u>timeout()</u> <u>|</u> <u>infinity</u>
               <u>Note</u> about this option: added in 21.12. Specify the maximum item epiry time. Default value is:
               <u>infinity</u>.

           <b>max_items_node</b>: <u>non_neg_integer()</u> <u>|</u> <u>infinity</u>
               Define the maximum number of items that can be stored in a node. Default value is: <u>1000</u>.

           <b>max_nodes_discoitems</b>: <u>pos_integer()</u> <u>|</u> <u>infinity</u>
               The maximum number of nodes to return in a discoitem response. The default value is: <u>100</u>.

           <b>max_subscriptions_node</b>: <u>MaxSubs</u>
               Define the maximum number of subscriptions managed by a node. Default value is no limitation:
               <u>undefined</u>.

           <b>name</b>: <u>Name</u>
               The value of the service name. This name is only visible in some clients that support XEP-0030:
               Service Discovery. The default is <u>vCard</u> <u>User</u> <u>Search</u>.

           <b>nodetree</b>: <u>Nodetree</u>
               To specify which nodetree to use. If not defined, the default pubsub nodetree is used: <u>tree</u>. Only
               one nodetree can be used per host, and is shared by all node plugins.

               â€¢   <u>tree</u> nodetree store node configuration and relations on the database.  <u>flat</u> nodes are stored
                   without any relationship, and <u>hometree</u> nodes can have child nodes.

               â€¢   <u>virtual</u> nodetree does not store nodes on database. This saves resources on systems with tons
                   of nodes. If using the <u>virtual</u> nodetree, you can only enable those node plugins: <u>[flat,</u> <u>pep]</u>
                   or <u>[flat]</u>; any other plugins configuration will not work. Also, all nodes will have the
                   default configuration, and this can not be changed. Using <u>virtual</u> nodetree requires to start
                   from a clean database, it will not work if you used the default <u>tree</u> nodetree before.

           <b>pep_mapping</b>: <u>List</u> <u>of</u> <u>Key:Value</u>
               In this option you can provide a list of key-value to choose defined node plugins on given PEP
               namespace. The following example will use <u>node_tune</u> instead of <u>node_pep</u> for every PEP node with
               the tune namespace:

               <b>Example</b>:

                   modules:
                     ...
                     mod_pubsub:
                       pep_mapping:
                         <a href="http://jabber.org/protocol/tune">http://jabber.org/protocol/tune</a>: tune
                     ...

           <b>plugins</b>: <u>[Plugin,</u> <u>...]</u>
               To specify which pubsub node plugins to use. The first one in the list is used by default. If
               this option is not defined, the default plugins list is: <u>[flat]</u>. PubSub clients can define which
               plugin to use when creating a node: add <u>type='plugin-name</u>' attribute to the <u>create</u> stanza
               element.

               â€¢   <u>flat</u> plugin handles the default behaviour and follows standard XEP-0060 implementation.

               â€¢   <u>pep</u> plugin adds extension to handle Personal Eventing Protocol (XEP-0163) to the PubSub
                   engine. When enabled, PEP is handled automatically.

           <b>vcard</b>: <u>vCard</u>
               A custom vCard of the server that will be displayed by some XMPP clients in Service Discovery.
               The value of <u>vCard</u> is a YAML map constructed from an XML representation of vCard. Since the
               representation has no attributes, the mapping is straightforward.

               <b>Example</b>:

                   # This XML representation of vCard:
                   #   &lt;vCard xmlns='vcard-temp'&gt;
                   #     &lt;FN&gt;Conferences&lt;/FN&gt;
                   #     &lt;ADR&gt;
                   #       &lt;WORK/&gt;
                   #       &lt;STREET&gt;Elm Street&lt;/STREET&gt;
                   #     &lt;/ADR&gt;
                   #   &lt;/vCard&gt;
                   #
                   # is translated to:
                   vcard:
                     fn: Conferences
                     adr:
                       -
                         work: true
                         street: Elm Street

       <b>Examples:</b>

           Example of configuration that uses flat nodes as default, and allows use of flat, hometree and pep
           nodes:

               modules:
                 mod_pubsub:
                   access_createnode: pubsub_createnode
                   max_subscriptions_node: 100
                   default_node_config:
                     notification_type: normal
                     notify_retract: false
                     max_items: 4
                   plugins:
                     - flat
                     - pep

           Using relational database requires using mod_pubsub with db_type <u>sql</u>. Only flat, hometree and pep
           plugins supports SQL. The following example shows previous configuration with SQL usage:

               modules:
                 mod_pubsub:
                   db_type: sql
                   access_createnode: pubsub_createnode
                   ignore_pep_from_offline: true
                   last_item_cache: false
                   plugins:
                     - flat
                     - pep

   <b>mod_push</b>
       This module implements the XMPP serverâ€™s part of the push notification solution specified in XEP-0357:
       Push Notifications. It does not generate, for example, APNS or FCM notifications directly. Instead, itâ€™s
       designed to work with so-called "app servers" operated by third-party vendors of mobile apps. Those app
       servers will usually trigger notification delivery to the userâ€™s mobile device using platform-dependent
       backend services such as FCM or APNS.

       <b>Available</b> <b>options:</b>

           <b>cache_life_time</b>: <u>timeout()</u>
               Same as top-level <u>cache_life_time</u> option, but applied to this module only.

           <b>cache_missed</b>: <u>true</u> <u>|</u> <u>false</u>
               Same as top-level <u>cache_missed</u> option, but applied to this module only.

           <b>cache_size</b>: <u>pos_integer()</u> <u>|</u> <u>infinity</u>
               Same as top-level <u>cache_size</u> option, but applied to this module only.

           <b>db_type</b>: <u>mnesia</u> <u>|</u> <u>sql</u>
               Same as top-level <u>default_db</u> option, but applied to this module only.

           <b>include_body</b>: <u>true</u> <u>|</u> <u>false</u> <u>|</u> <u>Text</u>
               If this option is set to <u>true</u>, the message text is included with push notifications generated for
               incoming messages with a body. The option can instead be set to a static <u>Text</u>, in which case the
               specified text will be included in place of the actual message body. This can be useful to signal
               the app server whether the notification was triggered by a message with body (as opposed to other
               types of traffic) without leaking actual message contents. The default value is "New message".

           <b>include_sender</b>: <u>true</u> <u>|</u> <u>false</u>
               If this option is set to <u>true</u>, the senderâ€™s JID is included with push notifications generated for
               incoming messages with a body. The default value is <u>false</u>.

           <b>notify_on</b>: <u>messages</u> <u>|</u> <u>all</u>
               <u>Note</u> about this option: added in 23.10. If this option is set to <u>messages</u>, notifications are
               generated only for actual chat messages with a body text (or some encrypted payload). If itâ€™s set
               to <u>all</u>, any kind of XMPP stanza will trigger a notification. If unsure, itâ€™s strongly recommended
               to stick to <u>all</u>, which is the default value.

           <b>use_cache</b>: <u>true</u> <u>|</u> <u>false</u>
               Same as top-level <u>use_cache</u> option, but applied to this module only.

   <b>mod_push_keepalive</b>
       This module tries to keep the stream management session (see <u>mod_stream_mgmt</u>) of a disconnected mobile
       client alive if the client enabled push notifications for that session. However, the normal session
       resumption timeout is restored once a push notification is issued, so the session will be closed if the
       client doesnâ€™t respond to push notifications.

       The module depends on <u>mod_push</u>.

       <b>Available</b> <b>options:</b>

           <b>resume_timeout</b>: <u>timeout()</u>
               This option specifies the period of time until the session of a disconnected push client times
               out. This timeout is only in effect as long as no push notification is issued. Once that
               happened, the resumption timeout configured for <u>mod_stream_mgmt</u> is restored. The default value is
               <u>72</u> hours.

           <b>wake_on_start</b>: <u>true</u> <u>|</u> <u>false</u>
               If this option is set to <u>true</u>, notifications are generated for <b>all</b> registered push clients during
               server startup. This option should not be enabled on servers with many push clients as it can
               generate significant load on the involved push services and the server itself. The default value
               is <u>false</u>.

           <b>wake_on_timeout</b>: <u>true</u> <u>|</u> <u>false</u>
               If this option is set to <u>true</u>, a notification is generated shortly before the session would time
               out as per the <u>resume_timeout</u> option. The default value is <u>true</u>.

   <b>mod_register</b>
       This module adds support for XEP-0077: In-Band Registration. This protocol enables end users to use an
       XMPP client to:

       â€¢   Register a new account on the server.

       â€¢   Change the password from an existing account on the server.

       â€¢   Delete an existing account on the server.

       This module reads also the top-level <u>registration_timeout</u> option defined globally for the server, so
       please check that option documentation too.

       <b>Available</b> <b>options:</b>

           <b>access</b>: <u>AccessName</u>
               Specify rules to restrict what usernames can be registered. If a rule returns <u>deny</u> on the
               requested username, registration of that user name is denied. There are no restrictions by
               default. If <u>AccessName</u> is <u>none</u>, then registering new accounts using In-Band Registration is
               disabled and the corresponding stream feature is not announced to clients.

           <b>access_from</b>: <u>AccessName</u>
               By default, <u>ejabberd</u> doesnâ€™t allow the client to register new accounts from s2s or existing c2s
               sessions. You can change it by defining access rule in this option. Use with care: allowing
               registration from s2s leads to uncontrolled massive accounts creation by rogue users.

           <b>access_remove</b>: <u>AccessName</u>
               Specify rules to restrict access for user unregistration. By default any user is able to
               unregister their account.

           <b>allow_modules</b>: <u>all</u> <u>|</u> <u>[Module,</u> <u>...]</u>
               <u>Note</u> about this option: added in 21.12. List of modules that can register accounts, or <u>all</u>. The
               default value is <u>all</u>, which is equivalent to something like <u>[mod_register,</u> <u>mod_register_web]</u>.

           <b>captcha_protected</b>: <u>true</u> <u>|</u> <u>false</u>
               Protect registrations with <u>basic.md#captcha|CAPTCHA</u>. The default is <u>false</u>.

           <b>ip_access</b>: <u>AccessName</u>
               Define rules to allow or deny account registration depending on the IP address of the XMPP
               client. The <u>AccessName</u> should be of type <u>ip</u>. The default value is <u>all</u>.

           <b>password_strength</b>: <u>Entropy</u>
               This option sets the minimum Shannon entropy for passwords. The value <u>Entropy</u> is a number of bits
               of entropy. The recommended minimum is 32 bits. The default is <u>0</u>, i.e. no checks are performed.

           <b>redirect_url</b>: <u>URL</u>
               This option enables registration redirection as described in XEP-0077: In-Band Registration:
               Redirection.

           <b>registration_watchers</b>: <u>[JID,</u> <u>...]</u>
               This option defines a list of JIDs which will be notified each time a new account is registered.

           <b>welcome_message</b>: <u>{subject:</u> <u>Subject,</u> <u>body:</u> <u>Body}</u>
               Set a welcome message that is sent to each newly registered account. The message will have
               subject <u>Subject</u> and text <u>Body</u>.

               <b>Example</b>:

                   modules:
                     mod_register:
                       welcome_message:
                         subject: "Welcome!"
                         body: |-
                           Hi!
                           Welcome to this XMPP server

   <b>mod_register_web</b>
       This module provides a web page where users can:

       â€¢   Register a new account on the server.

       â€¢   Change the password from an existing account on the server.

       â€¢   Unregister an existing account on the server.

       This module supports <u>basic.md#captcha|CAPTCHA</u> to register a new account. To enable this feature,
       configure the top-level <u>captcha_cmd</u> and top-level <u>captcha_url</u> options.

       As an example usage, the users of the host <u>localhost</u> can visit the page: <u>https://localhost:5280/register/</u>
       It is important to include the last / character in the URL, otherwise the subpages URL will be incorrect.

       This module is enabled in <u>listen</u> â†’ <u>ejabberd_http</u> â†’ <u>listen-options.md#request_handlers|request_handlers</u>,
       no need to enable in <u>modules</u>. The module depends on <u>mod_register</u> where all the configuration is
       performed.

       The module has no options.

       <b>Example:</b>

               listen:
                 -
                   port: 5280
                   module: ejabberd_http
                   request_handlers:
                     /register: mod_register_web

               modules:
                 mod_register: {}

   <b>mod_roster</b>
       This module implements roster management as defined in RFC6121 Section 2. The module also adds support
       for XEP-0237: Roster Versioning.

       <b>Available</b> <b>options:</b>

           <b>access</b>: <u>AccessName</u>
               This option can be configured to specify rules to restrict roster management. If the rule returns
               <u>deny</u> on the requested user name, that user cannot modify their personal roster, i.e. they cannot
               add/remove/modify contacts or send presence subscriptions. The default value is <u>all</u>, i.e. no
               restrictions.

           <b>cache_life_time</b>: <u>timeout()</u>
               Same as top-level <u>cache_life_time</u> option, but applied to this module only.

           <b>cache_missed</b>: <u>true</u> <u>|</u> <u>false</u>
               Same as top-level <u>cache_missed</u> option, but applied to this module only.

           <b>cache_size</b>: <u>pos_integer()</u> <u>|</u> <u>infinity</u>
               Same as top-level <u>cache_size</u> option, but applied to this module only.

           <b>db_type</b>: <u>mnesia</u> <u>|</u> <u>sql</u>
               Same as top-level <u>default_db</u> option, but applied to this module only.

           <b>store_current_id</b>: <u>true</u> <u>|</u> <u>false</u>
               If this option is set to <u>true</u>, the current roster version number is stored on the database. If
               set to <u>false</u>, the roster version number is calculated on the fly each time. Enabling this option
               reduces the load for both ejabberd and the database. This option does not affect the client in
               any way. This option is only useful if option <u>versioning</u> is set to <u>true</u>. The default value is
               <u>false</u>. IMPORTANT: if you use <u>mod_shared_roster</u> or <u>mod_shared_roster_ldap</u>, you must set the value
               of the option to <u>false</u>.

           <b>use_cache</b>: <u>true</u> <u>|</u> <u>false</u>
               Same as top-level <u>use_cache</u> option, but applied to this module only.

           <b>versioning</b>: <u>true</u> <u>|</u> <u>false</u>
               Enables/disables Roster Versioning. The default value is <u>false</u>.

       <b>Example:</b>

               modules:
                 mod_roster:
                   versioning: true
                   store_current_id: false

   <b>mod_s2s_bidi</b>
       <u>Note</u> about this option: added in 24.10.

       The module adds support for XEP-0288: Bidirectional Server-to-Server Connections that allows using single
       s2s connection to communicate in both directions.

       The module has no options.

       <b>Example:</b>

               modules:
                 mod_s2s_bidi: {}

   <b>mod_s2s_dialback</b>
       The module adds support for XEP-0220: Server Dialback to provide server identity verification based on
       DNS.

           <b>Warning</b>

           DNS-based verification is vulnerable to DNS cache poisoning, so modern servers rely on verification
           based on PKIX certificates. Thus this module is only recommended for backward compatibility with
           servers running outdated software or non-TLS servers, or those with invalid certificates (as long as
           you accept the risks, e.g. you assume that the remote server has an invalid certificate due to poor
           administration and not because itâ€™s compromised).

       <b>Available</b> <b>options:</b>

           <b>access</b>: <u>AccessName</u>
               An access rule that can be used to restrict dialback for some servers. The default value is <u>all</u>.

       <b>Example:</b>

               modules:
                 mod_s2s_dialback:
                   access:
                     allow:
                       server: legacy.domain.tld
                       server: invalid-cert.example.org
                     deny: all

   <b>mod_scram_upgrade</b>
       <u>Note</u> about this option: added in 24.10.

       The module adds support for XEP-0480: SASL Upgrade Tasks that allows users to upgrade passwords to more
       secure representation.

       <b>Available</b> <b>options:</b>

           <b>offered_upgrades</b>: <u>list(sha256,</u> <u>sha512)</u>
               List with upgrade types that should be offered

       <b>Example:</b>

               modules:
                 mod_scram_upgrade:
                   offered_upgrades:
                     - sha256
                     - sha512

   <b>mod_service_log</b>
       This module forwards copies of all stanzas to remote XMPP servers or components. Every stanza is
       encapsulated into &lt;forwarded/&gt; element as described in XEP-0297: Stanza Forwarding.

       <b>Available</b> <b>options:</b>

           <b>loggers</b>: <u>[Domain,</u> <u>...]</u>
               A list of servers or connected components to which stanzas will be forwarded.

       <b>Example:</b>

               modules:
                 mod_service_log:
                   loggers:
                     - xmpp-server.tld
                     - component.domain.tld

   <b>mod_shared_roster</b>
       This module enables you to create shared roster groups: groups of accounts that can see members from
       (other) groups in their rosters.

       The big advantages of this feature are that end users do not need to manually add all users to their
       rosters, and that they cannot permanently delete users from the shared roster groups. A shared roster
       group can have members from any XMPP server, but the presence will only be available from and to members
       of the same virtual host where the group is created. It still allows the users to have / add their own
       contacts, as it does not replace the standard roster. Instead, the shared roster contacts are merged to
       the relevant users at retrieval time. The standard user rosters thus stay unmodified.

       Shared roster groups can be edited via the Web Admin, and some API commands called <u>srg</u><b>_</b>, for example
       <u>srg_add</u> API. Each group has a unique name and those parameters:

       â€¢   Label: Used in the rosters where this group is displayed.

       â€¢   Description: of the group, which has no effect.

       â€¢   Members: A list of JIDs of group members, entered one per line in the Web Admin. The special member
           directive <u>@all@</u> represents all the registered users in the virtual host; which is only recommended
           for a small server with just a few hundred users. The special member directive <u>@online@</u> represents
           the online users in the virtual host. With those two directives, the actual list of members in those
           shared rosters is generated dynamically at retrieval time.

       â€¢   Displayed: A list of groups that will be in the rosters of this groupâ€™s members. A group of other
           vhost can be identified with <u>groupid@vhost</u>.

       This module depends on <u>mod_roster</u>. If not enabled, roster queries will return 503 errors.

       <b>Available</b> <b>options:</b>

           <b>cache_life_time</b>: <u>timeout()</u>
               Same as top-level <u>cache_life_time</u> option, but applied to this module only.

           <b>cache_missed</b>: <u>true</u> <u>|</u> <u>false</u>
               Same as top-level <u>cache_missed</u> option, but applied to this module only.

           <b>cache_size</b>: <u>pos_integer()</u> <u>|</u> <u>infinity</u>
               Same as top-level <u>cache_size</u> option, but applied to this module only.

           <b>db_type</b>: <u>mnesia</u> <u>|</u> <u>sql</u>
               Same as top-level <u>default_db</u> option, but applied to this module only.

           <b>use_cache</b>: <u>true</u> <u>|</u> <u>false</u>
               Same as top-level <u>use_cache</u> option, but applied to this module only.

       <b>Examples:</b>

           Take the case of a computer club that wants all its members seeing each other in their rosters. To
           achieve this, they need to create a shared roster group similar to this one:

               Name: club_members
               Label: Club Members
               Description: Members from the computer club
               Members: <a href="mailto:member1@example.org">member1@example.org</a>, <a href="mailto:member2@example.org">member2@example.org</a>, <a href="mailto:member3@example.org">member3@example.org</a>
               Displayed Groups: club_members

           In another case we have a company which has three divisions: Management, Marketing and Sales. All
           group members should see all other members in their rosters. Additionally, all managers should have
           all marketing and sales people in their roster. Simultaneously, all marketeers and the whole sales
           team should see all managers. This scenario can be achieved by creating shared roster groups as shown
           in the following lists:

               First list:
               Name: management
               Label: Management
               Description: Management
               Members: <a href="mailto:manager1@example.org">manager1@example.org</a>, <a href="mailto:manager2@example.org">manager2@example.org</a>
               Displayed: management, marketing, sales

               Second list:
               Name: marketing
               Label: Marketing
               Description: Marketing
               Members: <a href="mailto:marketeer1@example.org">marketeer1@example.org</a>, <a href="mailto:marketeer2@example.org">marketeer2@example.org</a>, <a href="mailto:marketeer3@example.org">marketeer3@example.org</a>
               Displayed: management, marketing

               Third list:
               Name: sales
               Label: Sales
               Description: Sales
               Members: <a href="mailto:salesman1@example.org">salesman1@example.org</a>, <a href="mailto:salesman2@example.org">salesman2@example.org</a>, <a href="mailto:salesman3@example.org">salesman3@example.org</a>
               Displayed: management, sales

   <b>mod_shared_roster_ldap</b>
       This module lets the server administrator automatically populate users' rosters (contact lists) with
       entries based on users and groups defined in an LDAP-based directory.

           <b>Note</b>

           <u>mod_shared_roster_ldap</u> depends on <u>mod_roster</u> being enabled. Roster queries will return <u>503</u> errors if
           <u>mod_roster</u> is not enabled.

       The module accepts many configuration options. Some of them, if unspecified, default to the values
       specified for the top level of configuration. This lets you avoid specifying, for example, the bind
       password in multiple places.

       â€¢   Filters: <u>ldap_rfilter</u>, <u>ldap_ufilter</u>, <u>ldap_gfilter</u>, <u>ldap_filter</u>. These options specify LDAP filters
           used to query for shared roster information. All of them are run against the ldap_base.

       â€¢   Attributes: <u>ldap_groupattr</u>, <u>ldap_groupdesc</u>, <u>ldap_memberattr</u>, <u>ldap_userdesc</u>, <u>ldap_useruid</u>. These
           options specify the names of the attributes which hold interesting data in the entries returned by
           running filters specified with the filter options.

       â€¢   Control parameters: <u>ldap_auth_check</u>, <u>ldap_group_cache_validity</u>, <u>ldap_memberattr_format</u>,
           <u>ldap_memberattr_format_re</u>, <u>ldap_user_cache_validity</u>. These parameters control the behaviour of the
           module.

       â€¢   Connection parameters: The module also accepts the connection parameters, all of which default to the
           top-level parameter of the same name, if unspecified. See <u>ldap.md#ldap-connection|LDAP</u> <u>Connection</u>
           section for more information about them.

       Check also the <u>ldap.md#ldap-examples|Configuration</u> <u>examples</u> section to get details about retrieving the
       roster, and configuration examples including Flat DIT and Deep DIT.

       <b>Available</b> <b>options:</b>

           <b>cache_life_time</b>
               Same as top-level <u>cache_life_time</u> option, but applied to this module only.

           <b>cache_missed</b>
               Same as top-level <u>cache_missed</u> option, but applied to this module only.

           <b>cache_size</b>
               Same as top-level <u>cache_size</u> option, but applied to this module only.

           <b>ldap_auth_check</b>: <u>true</u> <u>|</u> <u>false</u>
               Whether the module should check (via the ejabberd authentication subsystem) for existence of each
               user in the shared LDAP roster. Set to <u>false</u> if you want to disable the check. Default value is
               <u>true</u>.

           <b>ldap_backups</b>
               Same as top-level <u>ldap_backups</u> option, but applied to this module only.

           <b>ldap_base</b>
               Same as top-level <u>ldap_base</u> option, but applied to this module only.

           <b>ldap_deref_aliases</b>
               Same as top-level <u>ldap_deref_aliases</u> option, but applied to this module only.

           <b>ldap_encrypt</b>
               Same as top-level <u>ldap_encrypt</u> option, but applied to this module only.

           <b>ldap_filter</b>
               Additional filter which is AND-ed together with "User Filter" and "Group Filter". For more
               information check the LDAP <u>ldap.md#filters|Filters</u> section.

           <b>ldap_gfilter</b>
               "Group Filter", used when retrieving human-readable name (a.k.a. "Display Name") and the members
               of a group. See also the parameters <u>ldap_groupattr</u>, <u>ldap_groupdesc</u> and <u>ldap_memberattr</u>. If
               unspecified, defaults to the top-level parameter of the same name. If that one also is
               unspecified, then the filter is constructed exactly like "User Filter".

           <b>ldap_groupattr</b>
               The name of the attribute that holds the group name, and that is used to differentiate between
               them. Retrieved from results of the "Roster Filter" and "Group Filter". Defaults to <u>cn</u>.

           <b>ldap_groupdesc</b>
               The name of the attribute which holds the human-readable group name in the objects you use to
               represent groups. Retrieved from results of the "Group Filter". Defaults to whatever
               <u>ldap_groupattr</u> is set.

           <b>ldap_memberattr</b>
               The name of the attribute which holds the IDs of the members of a group. Retrieved from results
               of the "Group Filter". Defaults to <u>memberUid</u>. The name of the attribute differs depending on the
               objectClass you use for your group objects, for example: <u>posixGroup</u> â†’ <u>memberUid</u>; <u>groupOfNames</u> â†’
               <u>member</u>; <u>groupOfUniqueNames</u> â†’ <u>uniqueMember</u>.

           <b>ldap_memberattr_format</b>
               A globbing format for extracting user ID from the value of the attribute named by
               <u>ldap_memberattr</u>. Defaults to <u>%u</u>, which means that the whole value is the member ID. If you change
               it to something different, you may also need to specify the User and Group Filters manually; see
               section Filters.

           <b>ldap_memberattr_format_re</b>
               A regex for extracting user ID from the value of the attribute named by <u>ldap_memberattr</u>. Check
               the LDAP <u>ldap.md#control-parameters|Control</u> <u>Parameters</u> section.

           <b>ldap_password</b>
               Same as top-level <u>ldap_password</u> option, but applied to this module only.

           <b>ldap_port</b>
               Same as top-level <u>ldap_port</u> option, but applied to this module only.

           <b>ldap_rfilter</b>
               So called "Roster Filter". Used to find names of all "shared roster" groups. See also the
               <u>ldap_groupattr</u> parameter. If unspecified, defaults to the top-level parameter of the same name.
               You must specify it in some place in the configuration, there is no default.

           <b>ldap_rootdn</b>
               Same as top-level <u>ldap_rootdn</u> option, but applied to this module only.

           <b>ldap_servers</b>
               Same as top-level <u>ldap_servers</u> option, but applied to this module only.

           <b>ldap_tls_cacertfile</b>
               Same as top-level <u>ldap_tls_cacertfile</u> option, but applied to this module only.

           <b>ldap_tls_certfile</b>
               Same as top-level <u>ldap_tls_certfile</u> option, but applied to this module only.

           <b>ldap_tls_depth</b>
               Same as top-level <u>ldap_tls_depth</u> option, but applied to this module only.

           <b>ldap_tls_verify</b>
               Same as top-level <u>ldap_tls_verify</u> option, but applied to this module only.

           <b>ldap_ufilter</b>
               "User Filter", used for retrieving the human-readable name of roster entries (usually full names
               of people in the roster). See also the parameters <u>ldap_userdesc</u> and <u>ldap_useruid</u>. For more
               information check the LDAP <u>ldap.md#filters|Filters</u> section.

           <b>ldap_uids</b>
               Same as top-level <u>ldap_uids</u> option, but applied to this module only.

           <b>ldap_userdesc</b>
               The name of the attribute which holds the human-readable user name. Retrieved from results of the
               "User Filter". Defaults to <u>cn</u>.

           <b>ldap_userjidattr</b>
               The name of the attribute which is used to map user id to XMPP jid. If not specified (and that is
               default value of this option), user jid will be created from user id and this module host.

           <b>ldap_useruid</b>
               The name of the attribute which holds the ID of a roster item. Value of this attribute in the
               roster item objects needs to match the ID retrieved from the <u>ldap_memberattr</u> attribute of a group
               object. Retrieved from results of the "User Filter". Defaults to <u>cn</u>.

           <b>use_cache</b>
               Same as top-level <u>use_cache</u> option, but applied to this module only.

   <b>mod_sic</b>
       This module adds support for XEP-0279: Server IP Check. This protocol enables a client to discover its
       external IP address.

           <b>Warning</b>

           The protocol extension is deferred and seems like there are no clients supporting it, so using this
           module is not recommended and, furthermore, the module might be removed in the future.

       The module has no options.

   <b>mod_sip</b>
       This module adds SIP proxy/registrar support for the corresponding virtual host.

           <b>Note</b>

           It is not enough to just load this module. You should also configure listeners and DNS records
           properly. For details see the section about the <u>listen.md#ejabberd_sip|ejabberd_sip</u> listen module in
           the ejabberd Documentation.

       <b>Available</b> <b>options:</b>

           <b>always_record_route</b>: <u>true</u> <u>|</u> <u>false</u>
               Always insert "Record-Route" header into SIP messages. With this approach it is possible to
               bypass NATs/firewalls a bit more easily. The default value is <u>true</u>.

           <b>flow_timeout_tcp</b>: <u>timeout()</u>
               The option sets a keep-alive timer for SIP outbound TCP connections. The default value is <u>2</u>
               minutes.

           <b>flow_timeout_udp</b>: <u>timeout()</u>
               The options sets a keep-alive timer for SIP outbound UDP connections. The default value is <u>29</u>
               seconds.

           <b>record_route</b>: <u>URI</u>
               When the option <u>always_record_route</u> is set to <u>true</u> or when SIP outbound is utilized, ejabberd
               inserts "Record-Route" header field with this <u>URI</u> into a SIP message. The default is a SIP URI
               constructed from the virtual host on which the module is loaded.

           <b>routes</b>: <u>[URI,</u> <u>...]</u>
               You can set a list of SIP URIs of routes pointing to this SIP proxy server. The default is a list
               containing a single SIP URI constructed from the virtual host on which the module is loaded.

           <b>via</b>: <u>[URI,</u> <u>...]</u>
               A list to construct "Via" headers for inserting them into outgoing SIP messages. This is useful
               if youâ€™re running your SIP proxy in a non-standard network topology. Every <u>URI</u> element in the
               list must be in the form of "scheme://host:port", where "transport" must be <u>tls</u>, <u>tcp</u>, or <u>udp</u>,
               "host" must be a domain name or an IP address and "port" must be an internet port number. Note
               that all parts of the <u>URI</u> are mandatory (e.g. you cannot omit "port" or "scheme").

       <b>Example:</b>

               modules:
                 mod_sip:
                   always_record_route: false
                   record_route: "sip:example.com;lr"
                   routes:
                     - "sip:example.com;lr"
                     - "sip:sip.example.com;lr"
                   flow_timeout_udp: 30 sec
                   flow_timeout_tcp: 1 min
                   via:
                     - tls://sip-tls.example.com:5061
                     - tcp://sip-tcp.example.com:5060
                     - udp://sip-udp.example.com:5060

   <b>mod_stats</b>
       This module adds support for XEP-0039: Statistics Gathering. This protocol allows you to retrieve the
       following statistics from your ejabberd server:

       â€¢   Total number of registered users on the current virtual host (users/total).

       â€¢   Total number of registered users on all virtual hosts (users/all-hosts/total).

       â€¢   Total number of online users on the current virtual host (users/online).

       â€¢   Total number of online users on all virtual hosts (users/all-hosts/online).

           <b>Note</b>

           The protocol extension is deferred and seems like even a few clients that were supporting it are now
           abandoned. So using this module makes very little sense.

       The module has no options.

   <b>mod_stream_mgmt</b>
       This module adds support for XEP-0198: Stream Management. This protocol allows active management of an
       XML stream between two XMPP entities, including features for stanza acknowledgments and stream
       resumption.

       <b>Available</b> <b>options:</b>

           <b>ack_timeout</b>: <u>timeout()</u>
               A time to wait for stanza acknowledgments. Setting it to <u>infinity</u> effectively disables the
               timeout. The default value is <u>1</u> minute.

           <b>cache_life_time</b>: <u>timeout()</u>
               Same as top-level <u>cache_life_time</u> option, but applied to this module only. The default value is
               <u>48</u> <u>hours</u>.

           <b>cache_size</b>: <u>pos_integer()</u> <u>|</u> <u>infinity</u>
               Same as top-level <u>cache_size</u> option, but applied to this module only.

           <b>max_ack_queue</b>: <u>Size</u>
               This option specifies the maximum number of unacknowledged stanzas queued for possible
               retransmission. When the limit is exceeded, the client session is terminated. The allowed values
               are positive integers and <u>infinity</u>. You should be careful when setting this value as it should
               not be set too low, otherwise, you could kill sessions in a loop, before they get the chance to
               finish proper session initiation. It should definitely be set higher that the size of the offline
               queue (for example at least 3 times the value of the max offline queue and never lower than
               <u>1000</u>). The default value is <u>5000</u>.

           <b>max_resume_timeout</b>: <u>timeout()</u>
               A client may specify the period of time until a session times out if the connection is lost.
               During this period of time, the client may resume its session. This option limits the period of
               time a client is permitted to request. It must be set to a timeout equal to or larger than the
               default <u>resume_timeout</u>. By default, it is set to the same value as the <u>resume_timeout</u> option.

           <b>queue_type</b>: <u>ram</u> <u>|</u> <u>file</u>
               Same as top-level <u>queue_type</u> option, but applied to this module only.

           <b>resend_on_timeout</b>: <u>true</u> <u>|</u> <u>false</u> <u>|</u> <u>if_offline</u>
               If this option is set to <u>true</u>, any message stanzas that werenâ€™t acknowledged by the client will
               be resent on session timeout. This behavior might often be desired, but could have unexpected
               results under certain circumstances. For example, a message that was sent to two resources might
               get resent to one of them if the other one timed out. Therefore, the default value for this
               option is <u>false</u>, which tells ejabberd to generate an error message instead. As an alternative,
               the option may be set to <u>if_offline</u>. In this case, unacknowledged messages are resent only if no
               other resource is online when the session times out. Otherwise, error messages are generated.

           <b>resume_timeout</b>: <u>timeout()</u>
               This option configures the (default) period of time until a session times out if the connection
               is lost. During this period of time, a client may resume its session. Note that the client may
               request a different timeout value, see the <u>max_resume_timeout</u> option. Setting it to <u>0</u> effectively
               disables session resumption. The default value is <u>5</u> minutes.

   <b>mod_stun_disco</b>
       <u>Note</u> about this option: added in 20.04.

       This module allows XMPP clients to discover STUN/TURN services and to obtain temporary credentials for
       using them as per XEP-0215: External Service Discovery.

       <b>Available</b> <b>options:</b>

           <b>access</b>: <u>AccessName</u>
               This option defines which access rule will be used to control who is allowed to discover
               STUN/TURN services and to request temporary credentials. The default value is <u>local</u>.

           <b>credentials_lifetime</b>: <u>timeout()</u>
               The lifetime of temporary credentials offered to clients. If ejabberdâ€™s built-in TURN service is
               used, TURN relays allocated using temporary credentials will be terminated shortly after the
               credentials expired. The default value is <u>12</u> <u>hours</u>. Note that restarting the ejabberd node
               invalidates any temporary credentials offered before the restart unless a <u>secret</u> is specified
               (see below).

           <b>offer_local_services</b>: <u>true</u> <u>|</u> <u>false</u>
               This option specifies whether local STUN/TURN services configured as ejabberd listeners should be
               announced automatically. Note that this will not include TLS-enabled services, which must be
               configured manually using the <u>services</u> option (see below). For non-anonymous TURN services,
               temporary credentials will be offered to the client. The default value is <u>true</u>.

           <b>secret</b>: <u>Text</u>
               The secret used for generating temporary credentials. If this option isnâ€™t specified, a secret
               will be auto-generated. However, a secret must be specified explicitly if non-anonymous TURN
               services running on other ejabberd nodes and/or external TURN <u>services</u> are configured. Also note
               that auto-generated secrets are lost when the node is restarted, which invalidates any
               credentials offered before the restart. Therefore, itâ€™s recommended to explicitly specify a
               secret if clients cache retrieved credentials (for later use) across service restarts.

           <b>services</b>: <u>[Service,</u> <u>...]</u>
               The list of services offered to clients. This list can include STUN/TURN services running on any
               ejabberd node and/or external services. However, if any listed TURN service not running on the
               local ejabberd node requires authentication, a <u>secret</u> must be specified explicitly, and must be
               shared with that service. This will only work with ejabberdâ€™s built-in STUN/TURN server and with
               external servers that support the same REST API For Access To TURN Services. Unless the
               <u>offer_local_services</u> is set to <u>false</u>, the explicitly listed services will be offered in addition
               to those announced automatically.

               <b>host</b>: <u>Host</u>
                   The hostname or IP address the STUN/TURN service is listening on. For non-TLS services, itâ€™s
                   recommended to specify an IP address (to avoid additional DNS lookup latency on the client
                   side). For TLS services, the hostname (or IP address) should match the certificate.
                   Specifying the <u>host</u> option is mandatory.

               <b>port</b>: <u>1..65535</u>
                   The port number the STUN/TURN service is listening on. The default port number is 3478 for
                   non-TLS services and 5349 for TLS services.

               <b>restricted</b>: <u>true</u> <u>|</u> <u>false</u>
                   This option determines whether temporary credentials for accessing the service are offered.
                   The default is <u>false</u> for STUN/STUNS services and <u>true</u> for TURN/TURNS services.

               <b>transport</b>: <u>tcp</u> <u>|</u> <u>udp</u>
                   The transport protocol supported by the service. The default is <u>udp</u> for non-TLS services and
                   <u>tcp</u> for TLS services.

               <b>type</b>: <u>stun</u> <u>|</u> <u>turn</u> <u>|</u> <u>stuns</u> <u>|</u> <u>turns</u>
                   The type of service. Must be <u>stun</u> or <u>turn</u> for non-TLS services, <u>stuns</u> or <u>turns</u> for TLS
                   services. The default type is <u>stun</u>.

               <b>Example</b>:

                   services:
                     -
                       host: 203.0.113.3
                       port: 3478
                       type: stun
                       transport: udp
                       restricted: false
                     -
                       host: 203.0.113.3
                       port: 3478
                       type: turn
                       transport: udp
                       restricted: true
                     -
                       host: 2001:db8::3
                       port: 3478
                       type: stun
                       transport: udp
                       restricted: false
                     -
                       host: 2001:db8::3
                       port: 3478
                       type: turn
                       transport: udp
                       restricted: true
                     -
                       host: server.example.com
                       port: 5349
                       type: turns
                       transport: tcp
                       restricted: true

   <b>mod_time</b>
       This module adds support for XEP-0202: Entity Time. In other words, the module reports serverâ€™s system
       time.

       The module has no options.

   <b>mod_vcard</b>
       This module allows end users to store and retrieve their vCard, and to retrieve other users vCards, as
       defined in XEP-0054: vcard-temp. The module also implements an uncomplicated Jabber User Directory based
       on the vCards of these users. Moreover, it enables the server to send its vCard when queried.

       <b>Available</b> <b>options:</b>

           <b>allow_return_all</b>: <u>true</u> <u>|</u> <u>false</u>
               This option enables you to specify if search operations with empty input fields should return all
               users who added some information to their vCard. The default value is <u>false</u>.

           <b>cache_life_time</b>: <u>timeout()</u>
               Same as top-level <u>cache_life_time</u> option, but applied to this module only.

           <b>cache_missed</b>: <u>true</u> <u>|</u> <u>false</u>
               Same as top-level <u>cache_missed</u> option, but applied to this module only.

           <b>cache_size</b>: <u>pos_integer()</u> <u>|</u> <u>infinity</u>
               Same as top-level <u>cache_size</u> option, but applied to this module only.

           <b>db_type</b>: <u>mnesia</u> <u>|</u> <u>sql</u> <u>|</u> <u>ldap</u>
               Same as top-level <u>default_db</u> option, but applied to this module only.

           <b>host</b>
               Deprecated. Use <u>hosts</u> instead.

           <b>hosts</b>: <u>[Host,</u> <u>...]</u>
               This option defines the Jabber IDs of the service. If the <u>hosts</u> option is not specified, the only
               Jabber ID will be the hostname of the virtual host with the prefix "vjud.". The keyword <u>@HOST@</u> is
               replaced with the real virtual host name.

           <b>matches</b>: <u>pos_integer()</u> <u>|</u> <u>infinity</u>
               With this option, the number of reported search results can be limited. If the optionâ€™s value is
               set to <u>infinity</u>, all search results are reported. The default value is <u>30</u>.

           <b>name</b>: <u>Name</u>
               The value of the service name. This name is only visible in some clients that support XEP-0030:
               Service Discovery. The default is <u>vCard</u> <u>User</u> <u>Search</u>.

           <b>search</b>: <u>true</u> <u>|</u> <u>false</u>
               This option specifies whether the search functionality is enabled or not. If disabled, the
               options <u>hosts</u>, <u>name</u> and <u>vcard</u> will be ignored and the Jabber User Directory service will not
               appear in the Service Discovery item list. The default value is <u>false</u>.

           <b>use_cache</b>: <u>true</u> <u>|</u> <u>false</u>
               Same as top-level <u>use_cache</u> option, but applied to this module only.

           <b>vcard</b>: <u>vCard</u>
               A custom vCard of the server that will be displayed by some XMPP clients in Service Discovery.
               The value of <u>vCard</u> is a YAML map constructed from an XML representation of vCard. Since the
               representation has no attributes, the mapping is straightforward.

               <b>Example</b>:

                   # This XML representation of vCard:
                   #
                   #   &lt;vCard xmlns='vcard-temp'&gt;
                   #     &lt;FN&gt;Conferences&lt;/FN&gt;
                   #     &lt;ADR&gt;
                   #       &lt;WORK/&gt;
                   #       &lt;STREET&gt;Elm Street&lt;/STREET&gt;
                   #     &lt;/ADR&gt;
                   #   &lt;/vCard&gt;
                   #
                   # is translated to:
                   #
                   vcard:
                     fn: Conferences
                     adr:
                       -
                         work: true
                         street: Elm Street

       <b>Available</b> <b>options</b> <b>for</b> <b>ldap</b> <b>backend:</b>

           <b>ldap_backups</b>
               Same as top-level <u>ldap_backups</u> option, but applied to this module only.

           <b>ldap_base</b>
               Same as top-level <u>ldap_base</u> option, but applied to this module only.

           <b>ldap_deref_aliases</b>
               Same as top-level <u>ldap_deref_aliases</u> option, but applied to this module only.

           <b>ldap_encrypt</b>
               Same as top-level <u>ldap_encrypt</u> option, but applied to this module only.

           <b>ldap_filter</b>
               Same as top-level <u>ldap_filter</u> option, but applied to this module only.

           <b>ldap_password</b>
               Same as top-level <u>ldap_password</u> option, but applied to this module only.

           <b>ldap_port</b>
               Same as top-level <u>ldap_port</u> option, but applied to this module only.

           <b>ldap_rootdn</b>
               Same as top-level <u>ldap_rootdn</u> option, but applied to this module only.

           <b>ldap_search_fields</b>: <u>{Name:</u> <u>Attribute,</u> <u>...}</u>
               This option defines the search form and the LDAP attributes to search within.  <u>Name</u> is the name
               of a search form field which will be automatically translated by using the translation files (see
               <u>msgs/*.msg</u> for available words).  <u>Attribute</u> is the LDAP attribute or the pattern <u>%u</u>.

               <b>Examples</b>:

               The default is:

                   User: "%u"
                   "Full Name": displayName
                   "Given Name": givenName
                   "Middle Name": initials
                   "Family Name": sn
                   Nickname: "%u"
                   Birthday: birthDay
                   Country: c
                   City: l
                   Email: mail
                   "Organization Name": o
                   "Organization Unit": ou

           <b>ldap_search_reported</b>: <u>{SearchField:</u> <u>VcardField},</u> <u>...}</u>
               This option defines which search fields should be reported.  <u>SearchField</u> is the name of a search
               form field which will be automatically translated by using the translation files (see <u>msgs/*.msg</u>
               for available words).  <u>VcardField</u> is the vCard field name defined in the <u>ldap_vcard_map</u> option.

               <b>Examples</b>:

               The default is:

                   "Full Name": FN
                   "Given Name": FIRST
                   "Middle Name": MIDDLE
                   "Family Name": LAST
                   "Nickname": NICKNAME
                   "Birthday": BDAY
                   "Country": CTRY
                   "City": LOCALITY
                   "Email": EMAIL
                   "Organization Name": ORGNAME
                   "Organization Unit": ORGUNIT

           <b>ldap_servers</b>
               Same as top-level <u>ldap_servers</u> option, but applied to this module only.

           <b>ldap_tls_cacertfile</b>
               Same as top-level <u>ldap_tls_cacertfile</u> option, but applied to this module only.

           <b>ldap_tls_certfile</b>
               Same as top-level <u>ldap_tls_certfile</u> option, but applied to this module only.

           <b>ldap_tls_depth</b>
               Same as top-level <u>ldap_tls_depth</u> option, but applied to this module only.

           <b>ldap_tls_verify</b>
               Same as top-level <u>ldap_tls_verify</u> option, but applied to this module only.

           <b>ldap_uids</b>
               Same as top-level <u>ldap_uids</u> option, but applied to this module only.

           <b>ldap_vcard_map</b>: <u>{Name:</u> <u>{Pattern,</u> <u>LDAPattributes},</u> <u>...}</u>
               With this option you can set the table that maps LDAP attributes to vCard fields.  <u>Name</u> is the
               type name of the vCard as defined in RFC 2426.  <u>Pattern</u> is a string which contains pattern
               variables <u>%u</u>, <u>%d</u> or <u>%s</u>.  <u>LDAPattributes</u> is the list containing LDAP attributes. The pattern
               variables <u>%s</u> will be sequentially replaced with the values of LDAP attributes from
               <u>List_of_LDAP_attributes</u>, <u>%u</u> will be replaced with the user part of a JID, and <u>%d</u> will be replaced
               with the domain part of a JID.

               <b>Examples</b>:

               The default is:

                   NICKNAME: {"%u": []}
                   FN: {"%s": [displayName]}
                   LAST: {"%s": [sn]}
                   FIRST: {"%s": [givenName]}
                   MIDDLE: {"%s": [initials]}
                   ORGNAME: {"%s": [o]}
                   ORGUNIT: {"%s": [ou]}
                   CTRY: {"%s": [c]}
                   LOCALITY: {"%s": [l]}
                   STREET: {"%s": [street]}
                   REGION: {"%s": [st]}
                   PCODE: {"%s": [postalCode]}
                   TITLE: {"%s": [title]}
                   URL: {"%s": [labeleduri]}
                   DESC: {"%s": [description]}
                   TEL: {"%s": [telephoneNumber]}
                   EMAIL: {"%s": [mail]}
                   BDAY: {"%s": [birthDay]}
                   ROLE: {"%s": [employeeType]}
                   PHOTO: {"%s": [jpegPhoto]}

       <b>Available</b> <b>options</b> <b>for</b> <b>mnesia</b> <b>backend:</b>

           <b>search_all_hosts</b>: <u>true</u> <u>|</u> <u>false</u>
               Whether to perform search on all virtual hosts or not. The default value is <u>true</u>.

   <b>mod_vcard_xupdate</b>
       The userâ€™s client can store an avatar in the user vCard. The vCard-Based Avatars protocol (XEP-0153)
       provides a method for clients to inform the contacts what is the avatar hash value. However, simple or
       small clients may not implement that protocol.

       If this module is enabled, all the outgoing client presence stanzas get automatically the avatar hash on
       behalf of the client. So, the contacts receive the presence stanzas with the <u>Update</u> <u>Data</u> described in
       XEP-0153 as if the client would had inserted it itself. If the client had already included such element
       in the presence stanza, it is replaced with the element generated by ejabberd.

       By enabling this module, each vCard modification produces a hash recalculation, and each presence sent by
       a client produces hash retrieval and a presence stanza rewrite. For this reason, enabling this module
       will introduce a computational overhead in servers with clients that change frequently their presence.
       However, the overhead is significantly reduced by the use of caching, so you probably donâ€™t want to set
       <u>use_cache</u> to <u>false</u>.

       The module depends on <u>mod_vcard</u>.

           <b>Note</b>

           Nowadays XEP-0153 is used mostly as "read-only", i.e. modern clients donâ€™t publish their avatars
           inside vCards. Thus in the majority of cases the module is only used along with <u>mod_avatar</u> for
           providing backward compatibility.

       <b>Available</b> <b>options:</b>

           <b>cache_life_time</b>: <u>timeout()</u>
               Same as top-level <u>cache_life_time</u> option, but applied to this module only.

           <b>cache_missed</b>: <u>true</u> <u>|</u> <u>false</u>
               Same as top-level <u>cache_missed</u> option, but applied to this module only.

           <b>cache_size</b>: <u>pos_integer()</u> <u>|</u> <u>infinity</u>
               Same as top-level <u>cache_size</u> option, but applied to this module only.

           <b>use_cache</b>: <u>true</u> <u>|</u> <u>false</u>
               Same as top-level <u>use_cache</u> option, but applied to this module only.

   <b>mod_version</b>
       This module implements XEP-0092: Software Version. Consequently, it answers ejabberdâ€™s version when
       queried.

       <b>Available</b> <b>options:</b>

           <b>show_os</b>: <u>true</u> <u>|</u> <u>false</u>
               Should the operating system be revealed or not. The default value is <u>true</u>.

</pre><h4><b>LISTENERS</b></h4><pre>
       This section describes listeners options of ejabberd 24.12.

       TODO

</pre><h4><b>AUTHOR</b></h4><pre>
       ProcessOne.

</pre><h4><b>VERSION</b></h4><pre>
       This document describes the configuration file of ejabberd 24.12. Configuration options of other ejabberd
       versions may differ significantly.

</pre><h4><b>REPORTING</b> <b>BUGS</b></h4><pre>
       Report bugs to https://github.com/processone/ejabberd/issues

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       Default configuration file: https://github.com/processone/ejabberd/blob/24.12/ejabberd.yml.example

       Main site: https://ejabberd.im

       Documentation: https://docs.ejabberd.im

       Configuration Guide: https://docs.ejabberd.im/admin/configuration

       Source code: https://github.com/processone/ejabberd

</pre><h4><b>COPYING</b></h4><pre>
       Copyright (c) 2002-2024 ProcessOne.

                                                   12/17/2024                                    <u><a href="../man5/EJABBERD.YML.5.html">EJABBERD.YML</a></u>(5)
</pre>
 </div>
</div></section>
</div>
</body>
</html>