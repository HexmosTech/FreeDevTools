<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>spark - Archive file format for RISC OS version of the PC archiver Arc</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/nspark">nspark_1.7.8B2+git20210317.cb30779-2_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       spark - Archive file format for RISC OS version of the PC archiver Arc

</pre><h4><b>CONVENTIONS</b></h4><pre>
       Strings are given in ASCII with C-style escapes. No terminating   is present if not explicitily included.

       Words are 32 bit little-endian numbers.

       Half words are 16 bit little-endian numbers.

</pre><h4><b>FORMAT</b></h4><pre>
       An  archive  file  consists  of  a sequence of archive marker, archive header and file data, ie. marker1,
       header1, data1, marker2, header2, data2, etc.  The archive marker is a single byte of  value  0x1a  (26).
       The archive finishes with an archive marker followed by a zero byte.

       <u>Header</u> <u>version</u> <u>number</u>
       This tells you how the file data is stored and how many bytes there are in the header. The header version
       numbers  for  the  PC,  are  detailed  below.  An  Archimedes  header  version number is identical to the
       corresponding PC number except it has bit 7 set.
            1    Old style, no compression
            2    New style, no compression
            3    Compression of repeated characters only (RLE)
            4    As 3 plus Huffman Squeezing
            5    Lempel-Ziv packing of repeated strings (old style)
            6    Lempel-Ziv packing of repeated strings (new style)
            7    Lempel-Ziv Welch packing with improved hash function
            8    Dynamic Lempel-Ziv packing with adaptive reset
            9    PKARC style squashing
            127  Un*x compression

       <u>Filename</u>
       14 bytes of name, zero terminated.

       <u>Compressed</u> <u>length</u>
       Compressed data length, one word.

       <u>Date</u>
       One half-word, date.
            year = (date &gt;&gt; 9) &amp; 0x7f;
            month = (date &gt;&gt; 5) &amp; 0x0f;
            day = date &amp; 0x1f;

       <u>Time</u>
       One half-word, time.
            hour = (time &gt;&gt; 11) &amp; 0x1f;
            minute = (time &gt;&gt; 5)  &amp; 0x3f;
            second = (time &amp; 0x1f) * 2;

       The time and date fields are always filled in. If the file has a load and exec  address,  these  are  the
       time  and  date  when  the  file was added to the archive otherwise, they are derived from the Archimedes
       datestamp. In all extract operations on Archimedes format archives, the contents of  the  load  and  exec
       fields take precedence.

       <u>CRC</u>
       One half-word, Cyclic Redundancy Check.

       <u>Original</u> <u>file</u> <u>length</u>
       Original file length, one word, only present if header type greater than 1.

       <u>Load</u> <u>address</u>
       Load address of the file, one word, only present if bit-7 of the header version number is set.

       <u>Exec</u> <u>address</u>
       Exec address of the file, one word, only present if bit-7 of the header version number is set.

       <u>Attributes</u>
       Attributes of the file, one word, only present if bit-7 of the header version number is set.

       <u>Compressed</u> <u>data...</u>
       Directories   are   stored  as  non-compressed  archives  within  archives,  ie.  their  load  address  &amp;
       0xffffff00=0xfffddc.

</pre><h4><b>COMPATIBILITY</b></h4><pre>
       PC and Archimedes formats may be mixed in one archive for use on the Archimedes.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <a href="../man5/arcfs.5.html">arcfs</a>(5), <a href="../man1/nspark.1.html">nspark</a>(1)

                                                                                                      <u><a href="../man5/SPARK.5.html">SPARK</a>(5)</u>()
</pre>
 </div>
</div></section>
</div>
</body>
</html>