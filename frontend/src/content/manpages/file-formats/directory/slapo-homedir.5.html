<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>slapo-homedir - Home directory provisioning overlay</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/slapd">slapd_2.6.9+dfsg-2ubuntu1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       slapo-homedir - Home directory provisioning overlay

</pre><h4><b>SYNOPSIS</b></h4><pre>
       /etc/ldap/slapd.conf

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The  <b>homedir</b>  overlay causes <b><a href="../man8/slapd.8.html">slapd</a></b>(8) to notice changes involving RFC-2307bis style user-objects and make
       appropriate changes to the local filesystem.  This can be performed on both master and  replica  systems,
       so it is possible to perform remote home directory provisioning.

</pre><h4><b>CONFIGURATION</b></h4><pre>
       Both slapd.conf and back-config style configuration is supported.

       <b>overlay</b> <b>homedir</b>
              This  directive  adds  the  homedir  overlay  to the current database, or to the frontend, if used
              before any database instantiation; see <b><a href="../man5/slapd.conf.5.html">slapd.conf</a></b>(5) for details.

       <b>homedir-skeleton-path</b> <b>&lt;pathname&gt;</b>

       <b>olcSkeletonPath:</b> <b>pathname</b>
              These options set the path to the skeleton account directory.   (Generally,  <a href="file:/etc/skel">/etc/skel</a>)  Files  in
              this  directory  will  be  copied  into  newly created home directories.  Copying is recursive and
              handles symlinks and fifos, but will skip most specials.

       <b>homedir-min-uidnumber</b> <b>&lt;user</b> <b>id</b> <b>number&gt;</b>

       <b>olcMinimumUidNumber:</b> <b>number</b>
              These options configure the minimum userid to use in any home directory attempt.  This is a  basic
              safety  measure  to prevent accidentally using system accounts.  See REPLICATION for more flexible
              options for selecting accounts.

       <b>homedir-regexp</b> <b>&lt;regexp&gt;</b> <b>&lt;path&gt;</b>

       <b>olcHomedirRegexp:</b> <b>regexp</b> <b>path</b>
              These options configure a set of regular expressions to use for matching and optionally  remapping
              incoming  <b>homeDirectory</b>  attribute values to pathnames on the local filesystem.  $number expansion
              is supported to access values captured in parentheses.

              For example, to accept any directory  starting  with  home  and  use  it  verbatim  on  the  local
              filesystem:

              <b>homedir-regexp</b> <b>^(<a href="file:/home/">/home/</a>[-_/a-z0-9]+)$</b> <b>$1</b>

              To  match  the same set of directories, but create them instead under exporthome, as is popular on
              Solaris NFS servers:

              <b>homedir-regexp</b> <b>^(<a href="file:/home/">/home/</a>[-_/a-z0-9]+)$</b> <b>/export$1</b>

       <b>homedir-delete-style</b> <b>style</b>

       <b>olcHomedirDeleteStyle:</b> <b>style</b>
              These options configure how deletes of posixAccount entries or their attributes are handled; valid
              styles are <b>IGNORE,</b> which does nothing, and <b>DELETE,</b> which immediately performs a  recursive  delete
              on  the  home directory, and <b>ARCHIVE,</b> which archives the home directory contents in a TAR file for
              later examination.  The default is IGNORE.  Use with caution.  ARCHIVE  requires  homedir-archive-
              path to be set, or it functions similar to IGNORE.

       <b>homedir-archive-path</b> <b>&lt;pathname&gt;</b>

       <b>olcHomedirArchivePath:</b> <b>pathname</b>
              These options specify the destination path for TAR files created by the ARCHIVE delete style.

</pre><h4><b>REPLICATION</b></h4><pre>
       The  homedir  overlay can operate on either master or replica systems with no changes.  See <b><a href="../man5/slapd.conf.5.html">slapd.conf</a></b>(5)
       or <b><a href="../man5/slapd-config.5.html">slapd-config</a></b>(5) for more information on configure syncrepl.

       Partial replication (e.g. with filters) is especially useful for providing different provisioning options
       to different sets of users.

</pre><h4><b>EXAMPLE</b></h4><pre>
       The following LDIF could be used to add this overlay to <b>cn=config</b> (adjust to suit)

              dn: cn=module{0},cn=config
              changetype: modify
              add: olcModuleLoad
              olcModuleLoad: homedir

              dn: olcOverlay=homedir,olcDatabase={1}mdb,cn=config
              changetype: add
              objectClass: olcOverlayConfig
              objectClass: olcHomedirConfig
              olcOverlay: homedir
              olcSkeletonPath: <a href="file:/etc/skel">/etc/skel</a>
              olcMinimumUidNumber: 1000
              olcHomedirRegexp: ^(<a href="file:/home/">/home/</a>[-_/a-z0-9]+)$ /export/$1
              olcHomedirDeleteStyle: ARCHIVE
              olcHomedirArchivePath: /archive

</pre><h4><b>BUGS</b></h4><pre>
       DELETE, MOD, and MODRDN operations that remove the unix attributes when delete style  is  set  to  DELETE
       will  recursively  delete  the  (regex  modified)  home  directory from the disk.  Please be careful when
       deleting or changing values.

       MOD and MODRDN will correctly respond to homeDirectory changes and  perform  a  non-destructive  rename()
       operation  on the filesystem, but this does not correctly retry with a recursive copy when moving between
       filesystems.

       The recursive copy/delete/chown/tar functions are not aware of ACLs, extended attributes,  forks,  sparse
       files, or hard links.  Block and character device archival is non-portable, but should not be an issue in
       home directories, hopefully.

       Copying  and  archiving  may  not support files larger than 2GiB on some architectures.  Bare POSIX UStar
       archives cannot support internal files larger than 8GiB.  The current tar generator does not  attempt  to
       resolve uid/gid into symbolic names.

       No  attempt is made to try to mkdir() the parent directories needed for a given home directory or archive
       path.

</pre><h4><b>FILES</b></h4><pre>
       /etc/ldap/slapd.conf
              default slapd configuration file

       <a href="file:/etc/skel">/etc/skel</a> (or similar)
              source of new homedir files.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man5/slapd.conf.5.html">slapd.conf</a></b>(5), <b><a href="../man5/slapd-config.5.html">slapd-config</a></b>(5), <b><a href="../man8/slapd.8.html">slapd</a></b>(8), RFC-2307, RFC-2307bis.

</pre><h4><b>ACKNOWLEDGEMENTS</b></h4><pre>
       This module was written in 2009 by Emily Backes for Symas Corporation.

OpenLDAP 2.6.9+dfsg-2ubuntu1                       2024/11/26                                   <u><a href="../man5/SLAPO-HOMEDIR.5.html">SLAPO-HOMEDIR</a></u>(5)
</pre>
 </div>
</div></section>
</div>
</body>
</html>