<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>auto.master - Master Map for automounter consulted by autofs</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/autofs">autofs_5.1.9-1.2ubuntu2_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       auto.master - Master Map for automounter consulted by autofs

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The  <b>auto.master</b>  map  is consulted to set up automount managed mount points when the <b><a href="../man8/autofs.8.html">autofs</a></b>(8) script is
       invoked or the <b><a href="../man8/automount.8.html">automount</a></b>(8) program is run. Each line describes a mount point and refers to an autofs map
       describing file systems to be mounted under the mount point.

       The default location of the master map is <b>/etc/auto.master</b> but an alternate name may be given on the com‐
       mand line when  running  the  automounter  and  the  default  master  map  may  changed  by  setting  the
       <b>MASTER_MAP_NAME</b>  configuration  variable in <b>/etc/default/autofs.</b>  If the master map name has no path then
       the system Name Service Switch configuration will be consulted and each of the sources searched  in  line
       with the rules given in the Name Service Switch configuration.

       Access to mounts in maps is governed by a key.

       For direct maps the mount point is always specified as:

       <b>/-</b>

       and  the key used within the direct map is the full path to the mount point. The direct map may have mul‐
       tiple entries in the master map.

       For indirect maps access is by using the path scheme:

       <b>/mount-point/key</b>

       where <u>mount-point</u> is one of the entries listed in the master map. The <u>key</u> is a single directory component
       and is matched against entries in the map given in the entry (See <b><a href="../man5/autofs.5.html">autofs</a></b>(5)).

       Additionally, a map may be included from its source as if it were itself present in the master map by in‐
       cluding a line of the form:

       <b>+</b>[<b>maptype</b>[,<b>format</b>]:]<b>map</b> [<b>options</b>]

       and <b><a href="../man8/automount.8.html">automount</a></b>(8) will process the map according to the specification described  below  for  map  entries.
       Plus  map  inclusion  is  only permitted in file map sources.  Indirect map entries must be unique in the
       master map so second and subsequent entries for an indirect mount point are ignored by <b><a href="../man8/automount.8.html">automount</a></b>(8).

       <b>NOTE:</b>  autofs currently does not collapse multiple slashes in paths, so it is important to  ensure  paths
              used in maps are correct. If unnecessary multiple slashes are present in a path it can lead to un‐
              expected  failures  such  as an inability to expire automounts. An exception to this is a trailing
              slash at the end of the automount point path in the master map which will be removed if present.

</pre><h4><b>FORMAT</b></h4><pre>
       Master map entries have three fields separated by an arbitrary number of spaces or tabs. Lines  beginning
       with  # are comments. The first field is the mount point described above and the second field is the name
       of the map to be consulted for the mount point followed by the third field which contains options  to  be
       applied to all entries in the map.

       The format of a master map entry is:

       <b>mount-point</b> [<b>map-type</b>[,<b>format</b>]:]<b>map</b> [<b>options</b>]

       <b>mount-point</b>
              Base  location  for the <b>autofs</b> filesystem to be mounted.  For indirect maps this directory will be
              created (as with <b>mkdir</b> <b>-p</b>) and is removed when the <b>autofs</b> filesystem is umounted.

       <b>map-type</b>
              Type of map used for this mount point.  The following are valid map types:

              <b>file</b>   The map is a regular text file.

              <b>program</b>
                     The map is an executable program, which is passed a key on the command line and returns  an
                     entry  (everything  besides the key) on stdout if successful.  Optionally, the keyword exec
                     may be used as a synonym for program to avoid confusion with amd formatted maps mount  type
                     program.

              <b>yp</b>     The map is a NIS (YP) database.

              <b>nisplus</b>
                     The map is a NIS+ database.

              <b>hesiod</b> The map is a hesiod database whose <b>filsys</b> entries are used for maps.

              <b>ldap</b> or <b>ldaps</b>
                     The  map  is stored in an LDAP directory. If <b>ldaps</b> is used the appropriate certificate must
                     be configured in the LDAP client.

              <b>multi</b>  This map type allows the specification of multiple maps separated by "--". These  maps  are
                     searched in order to resolve key lookups.

              <b>dir</b>    This  map  type can be used at <b>+</b> master map including notation. The contents of files under
                     given directory are included to the master map. The name of file to  be  included  must  be
                     ended  with  ".autofs". A file will be ignored if its name is not ended with the suffix. In
                     addition a dot file, a file which name is started with "." is also ignored.

       <b>format</b>
              Format of the map data; currently the formats recognized are <b>sun</b>, which is a subset of the Sun au‐
              tomounter map format, <b>hesiod</b>, for hesiod filesys entries and <b>amd</b> for amd  formatted  map  entries.
              If the format is left unspecified, it defaults to <b>sun</b> for all map types except <b>hesiod</b> unless it is
              a  top  level <b>amd</b> mount that has a configuration entry for the mount point path, in which case the
              format used is <b>amd</b>.

       <b>map</b>
              Name of the map to use.  This is an absolute UNIX pathname for maps of types <b>file</b>,  <b>dir</b>,  or  <b>pro‐</b>
              <b>gram</b>,  and the name of a database in the case for maps of type <b>yp</b>, <b>nisplus</b>, or <b>hesiod</b> or the <b>dn</b> of
              an LDAP entry for maps of type <b>ldap</b>.

       <b>options</b>
              Any remaining command line arguments without leading dashes (-)  are  taken  as  options  (<u>-o</u>)  to
              <b>mount</b>.   Arguments with leading dashes are considered options for the maps and are passed to auto‐
              mount (8).

              The <b>sun</b> format supports the following options:

              <u>-Dvariable=value</u>
                     Replace <u>variable</u> with <u>value</u> in map substitutions.

              <u>-strict</u>
                     Treat errors when mounting file systems as fatal. This is important when multiple file sys‐
                     tems should be mounted (`multimounts'). If this option is given, no file system is  mounted
                     at all if at least one file system can't be mounted.

              <u>[no]browse</u>
                     This  is  an autofs specific option that is a pseudo mount option and so is given without a
                     leading dash. Use of the browse option pre-creates mount  point  directories  for  indirect
                     mount maps so the map keys can be seen in a directory listing without being mounted. Use of
                     this option can cause performance problem if the indirect map is large so it should be used
                     with caution. The internal program default is to enable browse mode for indirect mounts but
                     the  default  installed configuration overrides this by setting BROWSE_MODE to "no" because
                     of the potential performance problem. This option does the same as the  deprecated  --ghost
                     option, the browse option is preferred because it is used by other autofs implementations.

              <u>nobind</u> This  is  an autofs specific option that is a pseudo mount option and so is given without a
                     leading dash. It may be used either in the master map entry (so it effects all the map  en‐
                     tries)  or  with  individual map entries to prevent bind mounting of local NFS filesystems.
                     For direct mount maps the option is only effective if specified on the first direct map en‐
                     try and is applied to all direct mount maps in the master map. It is ignored  if  given  on
                     subsequent direct map entries. It may be used on individual map entries of both types. Pre‐
                     venting  bind mounts of NFS file systems can no longer be done by using the "port=" option,
                     the nobind option must be used instead.

              <u>symlink</u>
                     This option makes bind mounting use a symlink instead of an actual bind  mount.  It  is  an
                     autofs  specific  option  that  is  a pseudo mount option and so is given without a leading
                     dash. It may be used with indirect map entries only, either in the master map  (so  it  ef‐
                     fects  all  map  entries)  or with individual map entries. The option is ignored for direct
                     mounts and non-root offest mount entries.

              <u>strictexpire</u>
                     Use a strict expire policy for this automount. Using this option means  that  last  use  of
                     autofs  directory  entries will not be updated during path walks so that mounts in an auto‐
                     mount won't be kept mounted by applications scanning the mount tree. Note that this doesn't
                     completely resolve the problem of expired automounts being immediately  re-mounted  due  to
                     application accesses triggered by the expire itself.

              <u>slave</u>, <u>private</u> or <u>shared</u>
                     This  option allows mount propagation of bind mounts to be set to <u>slave</u>, <u>private</u> or <u>shared</u>.
                     This option defaults to <u>slave</u> if no option is given. When using multi-mounts that have bind
                     mounts the bind mount will have the same properties as its parent which is commonly  propa‐
                     gation  <u>shared</u>. And if the mount target is also propagation <u>shared</u> this can lead to a dead‐
                     lock when attempting to access the offset mounts. When  this  happens  an  unwanted  offset
                     mount  is propagated back to the target file system resulting in a deadlock since the auto‐
                     mount target is itself an (unwanted) automount trigger.  This option is  an  autofs  pseudo
                     mount option that can be used in the master map only.

              <u>-r,</u> <u>--random-multimount-selection</u>
                     Enables the use of random selection when choosing a host from a list of replicated servers.
                     This option is applied to this mount only, overriding the global setting that may be speci‐
                     fied on the command line.

              <u>-w,</u> <u>--use-weight-only</u>
                     Use  only specified weights for server selection where more than one server is specified in
                     the map entry. If no server weights are given then each available server will be  tried  in
                     the order listed, within proximity.

              <u>-t,</u> <u>--timeout</u> <u>&lt;seconds&gt;</u>
                     Set  the expire timeout for map entries. This option can be used to override the global de‐
                     fault given either on the command line or in the configuration.

              <u>-n,</u> <u>--negative-timeout</u> <u>&lt;seconds&gt;</u>
                     Set the timeout for caching failed key lookups. This option can be  used  to  override  the
                     global default given either on the command line or in the configuration.

              <u>--mode</u> <u>&lt;octal_mode&gt;</u>
                     Set  the directory mode for the base location of the <b>autofs</b> mount point.  If this option is
                     given, <b>autofs</b> will chmod that directory with this mode.

</pre><h4><b>BUILTIN</b> <b>MAP</b> <b>-hosts</b></h4><pre>
       If "-hosts" is given as the map then accessing a key under the mount point which corresponds to  a  host‐
       name  will  allow access to the exports of that host. The hosts map cannot be dynamically updated and re‐
       quires a HUP signal to be sent to the daemon for it to check hosts for an update. Due to possible hierar‐
       chic dependencies within a mount tree, it might not be completely updated during the HUP signal  process‐
       ing.

       For  example,  with  an entry in the master map of <b>/net</b> <b>-hosts</b> accessing /net/myserver will mount exports
       from myserver on directories below /net/myserver.

       NOTE: mounts done from a hosts map will be mounted with the "nosuid,nodev" options unless  overridden  by
       explicitly specifying the "suid", "dev" options in the master map entry.

</pre><h4><b>BUILTIN</b> <b>MAP</b> <b>-null</b></h4><pre>
       If  "-null"  is  given as the map it is used to tell <a href="../man8/automount.8.html">automount</a>(8) to ignore a subsequent master map entry
       with the given path.

       It can be used for paths that appear in the master map or in direct mount maps (but not in  direct  mount
       maps themselves) or as a key in an indirect mount map.

       An  indirect mount map key can be nulled. If so the map key is ignored and does not result in a mount at‐
       tempt (essentially the key lookup is abandoned early on).

       An indirect mount map top level mount point path can be nulled. If so no mounts from the nulled mount are
       performed (essentially it isn't mounted).

       Direct mount map path entries can be nulled. Since they must be present at startup they are  (notionally)
       part  of the master map so direct mount paths that use the -null map may be used in the master map to ig‐
       nore subsequent direct mount map entries.

       A nulled master map entry path will ignore a single subsequent matching entry. Any matching entry follow‐
       ing that will be treated as it normally would be. An example use of this is allowing local master map en‐
       tries to override remote ones.

       NOTE: If a duplicate master map entry path is seen (excluding paths of null entries) it will  be  ignored
       and  noted  in  the  log, that is the first encountered master map entry is used unless there is a corre‐
       sponding null entry.

</pre><h4><b>LDAP</b> <b>MAPS</b></h4><pre>
       If the map type <b>ldap</b> is specified the mapname is  of  the  form  <b>[//servername/]dn</b>,  where  the  optional
       <b>servername</b>  is  the  name  of  the LDAP server to query, and <b>dn</b> is the Distinguished Name of a subtree to
       search for map entries.  The old style <b>ldap:servername:mapname</b> is  also  understood.  Alternatively,  the
       type can be obtained from the Name Service Switch configuration, in which case the map name alone must be
       given.

       If  no  schema is set in the autofs configuration then autofs will check each of the commonly used schema
       for a valid entry and if one is found it will be used for subsequent lookups.

       There are three common schemas in use:

       <u>nisMap</u>
              Entries in the <b>nisMap</b> schema are <b>nisObject</b> objects in the specified  subtree,  where  the  <b>cn</b>  at‐
              tribute  is the key (the wildcard key is "/"), and the <b>nisMapEntry</b> attribute contains the informa‐
              tion used by the automounter.

       <u>automountMap</u>
              The <b>automountMap</b> schema has two variations that differ in the attribute used for the map key.  En‐
              tries  in  the automountMap schema are <b>automount</b> objects in the specified subtree, where the <b>cn</b> or
              <b>automountKey</b> attribute (depending on local usage) is the key (the wildcard key is  "/"),  and  the
              <b>automountInformation</b>  attribute contains the information used by the automounter. Note that the <b>cn</b>
              attribute is case insensitive.

       The object classes and attributes used for accessing automount maps in LDAP can be changed by setting en‐
       tries in the autofs configuration located in <b>/etc/default/autofs.conf</b>.

       <b>NOTE:</b>  If a schema is given in the configuration then all the schema configuration values  must  be  set,
              any partial schema specification will be ignored.

       For <b>amd</b> format maps a different schema is used:

       <u>amdMap</u>
              The  <b>amdmap</b> schema contains attributes <b>amdmapName</b>, <b>amdmapKey</b> and <b>amdmapValue</b> where <b>amdmapName</b> con‐
              tains the name of the containing map, <b>amdmapKey</b> contains the map key and <b>amdmapValue</b> contains  the
              map entry.

</pre><h4><b>LDAP</b> <b>AUTHENTICATION,</b> <b>ENCRYPTED</b> <b>AND</b> <b>CERTIFIED</b> <b>CONNECTIONS</b></h4><pre>
       LDAP  authenticated binds, TLS encrypted connections and certification may be used by setting appropriate
       values in the autofs authentication configuration file and configuring the LDAP client  with  appropriate
       settings.  The default location of this file is <b>/etc/autofs_ldap_auth.conf</b>.

       If this file exists it will be used to establish whether TLS or authentication should be used.

       An example of this file is:

         &lt;?xml version="1.0" ?&gt;
         &lt;autofs_ldap_sasl_conf
                 usetls="yes"
                 tlsrequired="no"
                 authrequired="no"
                 authtype="DIGEST-MD5"
                 user="xyz"
                 secret="abc"
         /&gt;

       If  TLS encryption is to be used the location of the Certificate Authority certificate must be set within
       the LDAP client configuration in order to validate the server certificate. If, in addition,  a  certified
       connection  is to be used then the client certificate and private key file locations must also be config‐
       ured within the LDAP client.

       In OpenLDAP these may be configured in the <b>ldap.conf</b> file or in the per-user configuration. For  example,
       it  may  be  sensible  to use the system wide configuration for the location of the Certificate Authority
       certificate and set the location of the client certificate and private key in the per-user configuration.
       The location of these files and the configuration entry requirements is system dependent so the  documen‐
       tation for your installation will need to be consulted to get further information.

       See <b>autofs_ldap_auth.conf</b> <b>(5)</b> for more information.

</pre><h4><b>EXAMPLE</b></h4><pre>
         /-        auto.data
         <a href="file:/home">/home</a>     /etc/auto.home
         <a href="file:/mnt">/mnt</a>      yp:mnt.map

       This will generate two mountpoints for <u><a href="file:/home">/home</a></u> and <u><a href="file:/mnt">/mnt</a></u> and install direct mount triggers for each entry in
       the  direct  mount  map  <u>auto.data</u>.   All  accesses  to <u><a href="file:/home">/home</a></u> will lead to the consultation of the map in
       <u>/etc/auto.home</u> and all accesses to <u><a href="file:/mnt">/mnt</a></u> will consult the NIS map <u>mnt.map</u>.  All accesses to paths  in  the
       map  <u>auto.data</u>  will trigger mounts when they are accessed and the Name Service Switch configuration will
       be used to locate the source of the map <u>auto.data</u>.

       To avoid making edits to /etc/auto.master, /etc/auto.master.d may be used.  Files in that directory  must
       have  a  ".autofs"  suffix,  e.g.  <u>/etc/auto.master.d/extra.autofs.</u>  Such files contain lines of the same
       format as the auto.master file, e.g.

         /foo    /etc/auto.foo
         /baz    yp:baz.map

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man8/automount.8.html">automount</a></b>(8), <b><a href="../man5/autofs.5.html">autofs</a></b>(5), <b><a href="../man8/autofs.8.html">autofs</a></b>(8), <b><a href="../man5/autofs.conf.5.html">autofs.conf</a></b>(5), <b><a href="../man5/autofs_ldap_auth.conf.5.html">autofs_ldap_auth.conf</a></b>(5).

</pre><h4><b>AUTHOR</b></h4><pre>
       This manual page was written by Christoph Lameter &lt;<a href="mailto:chris@waterf.org">chris@waterf.org</a>&gt;, for the  Debian  GNU/Linux  system.
       Edited by &lt;<a href="mailto:hpa@transmeta.com">hpa@transmeta.com</a>&gt; and Ian Kent &lt;<a href="mailto:raven@themaw.net">raven@themaw.net</a>&gt; .

                                                   11 Apr 2006                                    <u><a href="../man5/AUTO.MASTER.5.html">AUTO.MASTER</a></u>(5)
</pre>
 </div>
</div></section>
</div>
</body>
</html>