<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>typerules - HylaFAX file type identification and conversion rules</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/hylafax-client">hylafax-client_6.0.7-13_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       typerules - <u>HylaFAX</u> file type identification and conversion rules

</pre><h4><b>DESCRIPTION</b></h4><pre>
       Only  three  types of files are accepted by the <u>HylaFAX</u> server for transmission as facsimile: POSTSCRIPTÂ®
       files, PDF files, and TIFF Class F (bilevel Group 3-encoded) files.  All other types  of  files  must  be
       converted to one of these three formats.  The facsimile submission program applies a set of rules against
       the  contents of each input file to identify the file's type and to figure out how to convert the file to
       a format that is suitable for transmission.  These rules are stored in the  file  <b>/etc/hylafax/typerules</b>,
       an ASCII file that is patterned after the <b><a href="file:/etc/magic">/etc/magic</a></b> file used by the System V <u><a href="../man1/file.1.html">file</a></u>(1) program.  However,
       there are significant differences, noted below.

       Type  rules  work  by  matching  data patterns in a file; typically patterns that appear in the first few
       bytes of the file (i.e.  magic numbers).  There are two types  of  rules,  <u>primary</u>  <u>rules</u>  and  <u>secondary</u>
       <u>rules</u>.   Secondary  rules  specify additional rules to apply <u>after</u> a primary rule has been matched.  When
       secondary rules are used, rule scanning continues up to the next primary type rule in the file.

       Each rule consists of a set of whitespace-separated fields:
            <u>offset</u>    <u>datatype</u>    <u>match</u>    <u>result</u>   <u>command</u>
       If an line is terminated with a backslash character, the entry is continued on the  next  line  with  any
       leading  whitespace  characters  compressed  to  a  single  space.   Comments  are  marked with the ``#''
       character; everything from to the end of the line is discarded.  Secondary rules have a  ``&gt;''  character
       in the first column of the line; primary rules do not.

       The fields in each rule entry are:

       <b>offset</b>    The byte offset in the file at which data should be extracted and compared to a matching string
                 or value.

       <b>datatype</b>  The  type  of  data  value  to extract at the specified offset for comparison purposes; one of:
                 ``byte'' (8 bit unsigned number), ``short'' (16 bit unsigned number), ``long'' (32 bit unsigned
                 number), ``string'' (an array of bytes), ``istring'' (a case-insensitive array  of  bytes),  or
                 ``ascii'' (an array of ASCII-only bytes).

       <b>match</b>     The  value and operation to use in matching; the value used is based on the datatype field.  If
                 value is ``x'', then it  is  interpreted  to  mean  <u>match</u>  <u>anything</u>;  otherwise  the  following
                 operators are supported (where <u>data</u> is the value extracted from the file and <u>value</u> is specified
                 in the match field) except for types ``string'', ``istring'', and ``ascii'':
                 =     data == value              !=    data != value
                 &gt;     data &gt; value               &lt;     data &lt; value
                 &lt;=    data &lt;= value              &gt;=    data &gt;= value
                 &amp;     (data &amp; value) == value    !     (data &amp; value) != value
                 ^     (data ^ value) != 0

       If no operation is specified then ``='' is used.

       For ``string'', ``istring'', and ``ascii'' no operator is allowed; the implicit
       operation is always ``=''.  In these cases, the field is terminated by
       a tab or end of line, not by ``#''.  Characters in the field have
       their literal value; there are no C-style character escapes.

       <b>result</b>    One  of  ``ps'',  ``tiff'',  or  ``error''  (case  insensitive).  The first two results specify
                 whether the rule generates a POSTSCRIPT file or a TIFF/F file (Group 3-encoded  bilevel  data),
                 respectively.   The  ``error'' result indicates that a file is unsuitable for transmission and,
                 if supplied for transmission, should cause the job to be aborted with the <u>command</u> field used in
                 an error message.

       <b>command</b>   A command description that is expanded and passed to the shell to convert the input file to the
                 result format (suitable for sending as facsimile).  Before the string is passed to  the  shell,
                 it is scanned and the following ``%'' escape codes are substituted for:
                 %i      input file name
                 %o      output file name
                 %r      output horizontal resolution in pixels/mm
                 %R      output horizontal resolution in pixels/inch
                 %v      output vertical resolution in lines/mm
                 %V      output vertical resolution in lines/inch
                 %f      data format, ``1'' for 1-d encoding or ``2'' for 2-d encoding
                 %w      page width in pixels
                 %W      page width in mm
                 %l      page length in pixels
                 %L      page length in mm
                 %s      page size by name
                 %F      the directory where <u>HylaFAX</u> filter programs reside
                 %&lt;x&gt;    the &lt;x&gt; character (e.g. ``%%'' results in ``%''
       See below for example uses of these codes.

</pre><h4><b>EXAMPLES</b></h4><pre>
       The following rules are used to match the formats that are handled directly by the server:
       #offset   datatype    match          result    command
       0         string      %!             ps                       # POSTSCRIPT
       0         string      %PDF           ps                       # POSTSCRIPT by Ghostscript
       0         short       0x4d4d         tiff                     # big-endian TIFF
       0         short       0x4949         tiff                     # little-endian TIFF

       These  rules  are  used  to  process the ASCII version of IRIS Inventor database files while blocking the
       transmission of the binary format variant:
       #offset   datatype    match          result    command
       0         string      #Inventor V    error     IRIS Inventor file
       &gt;15       string      binary         error     binary IRIS Inventor file
       &gt;15       string      ascii          ps        %F/textfmt -fCourier-Bold -p11bp\
                                                          -U -q &gt;%o &lt;%i

       This rule is typically the last entry in the file and is used to convert all unmatched ASCII  data  files
       to POSTSCRIPT:
       #offset   datatype    match          result    command
       0         ascii       x              ps        %F/textfmt -fCourier-Bold -p11bp -U -q &gt;%o &lt;%i

</pre><h4><b>NOTES</b></h4><pre>
       It  is  much  better  to  convert  data  that is to be transmitted to POSTSCRIPT because this data format
       permits the facsimile server to do the  final  imaging  according  to  the  optimal  transfer  parameters
       (resolution, binary encoding, etc.).

       It  might  be  better  to  allow secondary rules to augment a primary rule rather than just replace them.
       This would allow, for example, command line options to be selected based on file type.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <u><a href="../man1/sendfax.1.html">sendfax</a></u>(1), <u><a href="../man1/hylafax-client.1.html">hylafax-client</a></u>(1)

                                                  May 12, 1993                                      <u><a href="../man5/TYPERULES.5.html">TYPERULES</a></u>(5)
</pre>
 </div>
</div></section>
</div>
</body>
</html>