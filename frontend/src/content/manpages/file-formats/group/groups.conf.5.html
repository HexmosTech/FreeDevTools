<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>groups.conf - Configuration file for ClusterShell node groups</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/clustershell">clustershell_1.9.3-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       groups.conf - Configuration file for ClusterShell node groups

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The  ClusterShell  library  obtains  its  node  groups  configuration  from  the following sources in the
       following order:

          1. user configuration file (<u>$XDG_CONFIG_HOME/clustershell/groups.conf</u>)

          2. local pip user installation (<u>$HOME/.local/etc/clustershell/groups.conf</u>)

          3. Global      configuration      file      (<u>$CLUSTERSHELL_CFGDIR/groups.conf</u>,       defaults       to
             <u>/etc/clustershell/groups.conf</u>)

       If no <u>groups.conf</u> is found, group support will be disabled.

       Additional  configuration files are also read from the directories set by the confdir option, if present.
       See the <b>confdir</b> option below for further details.

       Configuration files have a format in the style of RFC 822 potentially composed of several sections  which
       may be present in any order. There are two types of sections: Main and <u>Group_source</u>:

       <b>Main</b>   Global configuration options. There should be only one Main section.

       <u>Group_source</u>
              The  <u>Group_source</u>  section(s)  define the configuration for each node group source (or namespace).
              This configuration consists in external commands definition (map, all, list and reverse).

       Only <u>Group_source</u> section(s) are allowed in additional configuration files.

   <b>[Main]</b> <b>OPTIONS</b>
       Configuration parameters of the <b>Main</b> section are described below.

       <b>default</b>
              Specify the default group source (group namespace) used by the NodeSet parser when the  user  does
              not explicitly specify the group source (eg. "@io").

       <b>confdir</b>
              Optional  list  of  directories  where  the ClusterShell library should look for <b>.conf</b> files which
              define group sources to use. Each file in these directories with the .conf suffix  should  contain
              one  or  more  <u>Group_source</u>  sections as documented in [<u>Group_source</u>] options below. These will be
              merged with the group sources defined in <u>/etc/clustershell/groups.conf</u> to form the complete set of
              group sources that ClusterShell will use. Duplicate <u>Group_source</u> sections are not allowed.   Note:
              .conf files that are not readable by the current user are ignored (except the one that defines the
              default  group  source).  The  variable  <u>$CFGDIR</u>  is  replaced by the path of the highest priority
              configuration directory found (where groups.conf resides).  The default confdir value enables both
              system-wide and any installed user configuration (thanks to <u>$CFGDIR</u>).  Duplicate  directory  paths
              are ignored.

       <b>autodir</b>
              Optional  list  of  directories  where  the  ClusterShell library should look for <b>.yaml</b> files that
              define in-file group dictionaries. No need to call external commands for  these  files,  they  are
              parsed  by the ClusterShell library itself.  Multiple group source definitions in the same file is
              supported. The variable <u>$CFGDIR</u> is replaced by the path  of  the  highest  priority  configuration
              directory  found  (where  groups.conf resides). The default confdir value enables both system-wide
              and any installed user configuration (thanks to <u>$CFGDIR</u>). Duplicate directory paths are ignored.

   <b>[</b><u><b>Group_source</b></u><b>]</b> <b>OPTIONS</b>
       Configuration parameters of each group source section are described below.

       <b>map</b>    Specify the external shell command used to resolve a group name into a nodeset, list of  nodes  or
              list  of  nodeset  (separated  by space characters or by carriage returns). The variable <u>$GROUP</u> is
              replaced before executing the command.

       <b>all</b>    Optional external shell command that should return a nodeset, list of nodes or list of nodeset  of
              all  nodes  for  this group source. If not specified, the library will try to resolve all nodes by
              using the <b>list</b> external command in the same group source followed by <b>map</b> for each group.

       <b>list</b>   Optional external shell command that should return the list of all groups for  this  group  source
              (separated by space characters or by carriage returns).

       <b>reverse</b>
              Optional  external shell command used to find the group(s) of a single node. The variable $NODE is
              previously replaced. If this upcall is not specified, the reverse operation is computed in  memory
              by  the  library  from the <u>list</u> and <u>map</u> external calls. Also, if the number of nodes to reverse is
              greater  than  the  number  of  available  groups,  the  <u>reverse</u>  external  command   is   avoided
              automatically.

       <b>cache_time</b>
              Number  of  seconds each upcall result is kept in cache, in memory only.  Default is 3600 seconds.
              This is useful only for daemons using nodegroups.

       When the library executes a group source  external  shell  command,  the  current  working  directory  is
       previously  set to the corresponding confdir. This allows the use of relative paths for third party files
       in the command.

       In addition to context-dependent $GROUP and $NODE variables described above, the two following  variables
       are always available and also replaced before executing shell commands:

       • <u>$CFGDIR</u> is replaced by groups.conf highest priority base directory path

       • <u>$SOURCE</u> is replaced by current source name

       Each  external  command  might return a non-zero return code when the operation is not doable. But if the
       call return zero, for instance, for a non-existing group, the user will not receive any error when trying
       to resolve such unknown group.  The desired behaviour is up to the system administrator.

</pre><h4><b>RESOURCE</b> <b>USAGE</b></h4><pre>
       All external command results are cached in memory to avoid multiple calls. Each  result  is  kept  for  a
       limited amount of time. See cache_time option to tune this behaviour.

</pre><h4><b>EXAMPLES</b></h4><pre>
       Simple configuration file for local groups and slurm partitions binding.

   <u><b>groups.conf</b></u>
       [Main]
       default: local
       confdir: /etc/clustershell/groups.conf.d $CFGDIR/groups.conf.d
       autodir: /etc/clustershell/groups.d $CFGDIR/groups.d

       [local]
       map: sed -n 's/^$GROUP:(.*)/1/p' /etc/clustershell/groups
       list: sed -n 's/^\(<b>[0-9A-Za-z_-]</b>*\):.*/\1/p' /etc/clustershell/groups

       [slurm]
       map: sinfo -h -o "%N" -p $GROUP
       all: sinfo -h -o "%N"
       list: sinfo -h -o "%P"
       reverse: sinfo -h -N -o "%P" -n $NODE

</pre><h4><b>FILES</b></h4><pre>
       <u>$CLUSTERSHELL_CFGDIR/groups.conf</u> <b>(defaults</b> <b>to</b> <u>/etc/clustershell/groups.conf</u><b>)</b>
              Global node groups configuration file.

       <u>$CLUSTERSHELL_CFGDIR/groups.conf.d/</u> <b>(defaults</b> <b>to</b>
              <u>/etc/clustershell/groups.conf.d/</u>) Recommended directory for additional configuration files.

       <u>$CLUSTERSHELL_CFGDIR/groups.d/</u> <b>(defaults</b> <b>to</b> <u>/etc/clustershell/groups.d/</u><b>)</b>
              Recommended directory for <u>autodir</u>, where native group definition files (.yaml files) are found.

       <u>$XDG_CONFIG_HOME/clustershell/groups.conf</u>
              Main    user    groups.conf    configuration   file.   If   $XDG_CONFIG_HOME   is   not   defined,
              <u>$HOME/.config/clustershell/groups.conf</u> is used instead.

       <u>$HOME/.local/etc/clustershell/groups.conf</u>
              Local groups.conf user configuration file (default installation for pip --user)

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man1/clubak.1.html">clubak</a></b>(1), <b><a href="../man1/cluset.1.html">cluset</a></b>(1), <b><a href="../man1/clush.1.html">clush</a></b>(1), <b><a href="../man1/nodeset.1.html">nodeset</a></b>(1)

        &lt;<a href="http://clustershell.readthedocs.org/">http://clustershell.readthedocs.org/</a>&gt;

</pre><h4><b>AUTHOR</b></h4><pre>
       Stephane Thiell, &lt;<a href="mailto:sthiell@stanford.edu">sthiell@stanford.edu</a>&gt;

</pre><h4><b>COPYRIGHT</b></h4><pre>
       GNU Lesser General Public License version 2.1 or later (LGPLv2.1+)

1.9.3                                              2025-01-23                                     <u><a href="../man5/GROUPS.CONF.5.html">GROUPS.CONF</a></u>(5)
</pre>
 </div>
</div></section>
</div>
</body>
</html>