<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>dpt-lib.sh - dpt shell library</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/pkg-perl-tools">pkg-perl-tools_0.82_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       dpt-lib.sh - dpt shell library

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>dpt-lib.sh</b> is sourced by <b><a href="../man1/dpt.1.html">dpt</a></b>(1) and contains a collection of shell functions and variables which can be
       used by dpt subcommands written in shell. As a side effect, it also sanity checks if the script is run
       from a source package directory with a <u>.git/</u> sub directory.

</pre><h4><b>USAGE</b></h4><pre>
       Source the file at the beginning of the shell script as

           . "${DPT__SCRIPTS:-/usr/share/pkg-perl-tools}/lib/dpt-lib.sh"

</pre><h4><b>AVAILABLE</b> <b>FUNCTIONS</b></h4><pre>
       "die"
           Parameters: $message

           Echos "E: $message" to STDERR and exits 1.

       "warn"
           Parameters: $message

           Echos "W: $message" to STDERR.

       "info"
           Parameters: $message

           Echos "I: $message" to STDERR.

       "header"
           Parameters: $title

           Outputs $title with an empty line before and underlined, kind of like a header.

       "anykey"
           Tells the user to press any key and waits for a keypress.

       "promptyesno"
           Parameters: $prompt

           Issues  a  <b>read()</b> request with y/N options, printing $prompt. Returns true, if 'y' or 'Y' is pressed,
           false otherwise.

       "is_command"
           Parameters: $command, $package (optional)

           Checks if $command can be executed (running "command -v"); returns  false,  outputs  a  warning  (and
           optionally a hint to install $package).

       "is_installed"
           Parameters: $package_name, $minimum_package_version (optional)

           Checks  if $package_name is installed, optionally at $minimum_package_version, and returns false with
           a warning otherwise.

       "is_pkg_perl"
           Checks if debian/control contains the Debian Perl Group email address.

       "gitddiff"
           Offers to show the diff against the last debian/ tag, if there is any.

       "colored"
           Parameters: $color, $text

           Outputs $text in $color, unless the NO_COLOR environment variable is set.

           Available colors are (in capital letters): "BLACK",  "RED",  "GREEN",  "YELLOW",  "BLUE",  "MAGENTA",
           "CYAN", "WHITE".

       "extra_colored"
           Parameters: $color, $bgcolor, $text

           Outputs $text in foreground $color on $bgcolor, unless the NO_COLOR environment variable is set.

           Available  colors  for  both  foreground  and  background  are  (in capital letters): "BLACK", "RED",
           "GREEN", "YELLOW", "BLUE", "MAGENTA", "CYAN", "WHITE".

</pre><h4><b>AVAILABLE</b> <b>VARIABLES</b></h4><pre>
       "PKG"
           Source package name, from <u>debian/changelog</u>.

       "VER"
           Source package version, from <u>debian/changelog</u>.

       "UVER"
           Upstream version, i.e. source package  version  (from  <u>debian/changelog</u>)  without  epoch  and  Debian
           revision.

       "DIST"
           Source package distribution, from <u>debian/changelog</u>.

       Colors
           Cf. the colored() function above.

           For using colors directly, the following variables exist;

           "C_BLACK", "C_RED", "C_GREEN", "C_YELLOW", "C_BLUE", "C_MAGENTA", "C_CYAN", "C_WHITE", plus "C_RESET"
           to go back from coloring.

           For background colors, the same colors exist as "BG_C_foo".

</pre><h4><b>ENVIRONMENT</b> <b>VARIABLES</b></h4><pre>
       "OOT"
           OOT  (as  in  "out-of-tree"),  if  set,  disables  the  check  if a script is run in a source package
           directory and a Git repository.

           Can be used as

               OOT=1 . "${DPT__SCRIPTS:-/usr/share/pkg-perl-tools}/lib/dpt-lib.sh"

           and is useful for scripts which are run on build results etc.

           This also means that the variables derived from <u>debian/changelog</u> are not available.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man5/dpt-config.5.html">dpt-config</a></b>(5) for discussion of "$DPT__SCRIPTS".

</pre><h4><b>COPYRIGHT</b> <b>&amp;</b> <b>LICENSE</b></h4><pre>
       Copyright 2022-2024 gregor herrmann <a href="mailto:gregoa@debian.org">gregoa@debian.org</a>

       Copyright 2022 Damyan Ivanov <a href="mailto:dmn@debian.org">dmn@debian.org</a>

       This program is free software; you can redistribute it and/or modify it under  the  same  terms  as  Perl
       itself.

pkg-perl-tools 0.82                                2025-02-28                                      <u><a href="../man5/dpt-lib.sh.5.html">dpt-lib.sh</a></u>(5)
</pre>
 </div>
</div></section>
</div>
</body>
</html>