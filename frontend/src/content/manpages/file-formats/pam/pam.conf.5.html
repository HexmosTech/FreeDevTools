<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>pam.conf, pam.d - PAM configuration files</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libpam-runtime">libpam-runtime_1.7.0-5ubuntu1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       pam.conf, pam.d - PAM configuration files

</pre><h4><b>DESCRIPTION</b></h4><pre>
       When a <u>PAM</u> aware privilege granting application is started, it activates its attachment to the PAM-API.
       This activation performs a number of tasks, the most important being the reading of the configuration
       file(s): /etc/pam.conf. Alternatively and preferably, the configuration can be set by individual
       configuration files located in a pam.d directory. The presence of this directory will cause <b>Linux-PAM</b> to
       <u>ignore</u> /etc/pam.conf.

       These files list the <u>PAM</u>s that will do the authentication tasks required by this service, and the
       appropriate behavior of the PAM-API in the event that individual <u>PAM</u>s fail.

       The syntax of the <a href="file:/etc/pam.conf">/etc/pam.conf</a> configuration file is as follows. The file is made up of a list of rules,
       each rule is typically placed on a single line, but may be extended with an escaped end of line: `\&lt;LF&gt;'.
       Comments are preceded with `#' marks and extend to the next end of line.

       The format of each rule is a space separated collection of tokens, the first three being
       case-insensitive:

        <b>service</b> <b>type</b> <b>control</b> <b>module-path</b> <b>module-arguments</b>

       The syntax of files contained in the <a href="file:/etc/pam.d/">/etc/pam.d/</a> directory, are identical except for the absence of any
       <u>service</u> field. In this case, the <u>service</u> is the name of the file in the <a href="file:/etc/pam.d/">/etc/pam.d/</a> directory. This
       filename must be in lower case.

       An important feature of <u>PAM</u>, is that a number of rules may be <u>stacked</u> to combine the services of a number
       of PAMs for a given authentication task.

       The <u>service</u> is typically the familiar name of the corresponding application: <u>login</u> and <u>su</u> are good
       examples. The <u>service</u>-name, <u>other</u>, is reserved for giving <u>default</u> rules. Only lines that mention the
       current service (or in the absence of such, the <u>other</u> entries) will be associated with the given
       service-application.

       The <u>type</u> is the management group that the rule corresponds to. It is used to specify which of the
       management groups the subsequent module is to be associated with. Valid entries are:

       account
           this module type performs non-authentication based account management. It is typically used to
           restrict/permit access to a service based on the time of day, currently available system resources
           (maximum number of users) or perhaps the location of the applicant user -- 'root' login only on the
           console.

       auth
           this module type provides two aspects of authenticating the user. Firstly, it establishes that the
           user is who they claim to be, by instructing the application to prompt the user for a password or
           other means of identification. Secondly, the module can grant group membership or other privileges
           through its credential granting properties.

       password
           this module type is required for updating the authentication token associated with the user.
           Typically, there is one module for each 'challenge/response' based authentication (auth) type.

       session
           this module type is associated with doing things that need to be done for the user before/after they
           can be given service. Such things include the logging of information concerning the opening/closing
           of some data exchange with a user, mounting directories, etc.

       If the <u>type</u> value from the list above is prepended with a <u>-</u> character the PAM library will not log to the
       system log if it is not possible to load the module because it is missing in the system. This can be
       useful especially for modules which are not always installed on the system and are not required for
       correct authentication and authorization of the login session.

       The third field, <u>control</u>, indicates the behavior of the PAM-API should the module fail to succeed in its
       authentication task. There are two types of syntax for this control field: the simple one has a single
       simple keyword; the more complicated one involves a square-bracketed selection of <u>value=action</u> pairs.

       For the simple (historical) syntax valid <u>control</u> values are:

       required
           failure of such a PAM will ultimately lead to the PAM-API returning failure but only after the
           remaining <u>stacked</u> modules (for this <u>service</u> and <u>type</u>) have been invoked.

       requisite
           like <u>required</u>, however, in the case that such a module returns a failure, control is directly
           returned to the application or to the superior PAM stack. The return value is that associated with
           the first required or requisite module to fail. Note, this flag can be used to protect against the
           possibility of a user getting the opportunity to enter a password over an unsafe medium. It is
           conceivable that such behavior might inform an attacker of valid accounts on a system. This
           possibility should be weighed against the not insignificant concerns of exposing a sensitive password
           in a hostile environment.

       sufficient
           if such a module succeeds and no prior <u>required</u> module has failed the PAM framework returns success
           to the application or to the superior PAM stack immediately without calling any further modules in
           the stack. A failure of a <u>sufficient</u> module is ignored and processing of the PAM module stack
           continues unaffected.

       optional
           the success or failure of this module is only important if it is the only module in the stack
           associated with this <u>service</u>+<u>type</u>.

       include
           include all lines of given type from the configuration file specified as an argument to this control.

       substack
           include all lines of given type from the configuration file specified as an argument to this control.
           This differs from <u>include</u> in that evaluation of the <u>done</u> and <u>die</u> actions in a substack does not cause
           skipping the rest of the complete module stack, but only of the substack. Jumps in a substack also
           can not make evaluation jump out of it, and the whole substack is counted as one module when the jump
           is done in a parent stack. The <u>reset</u> action will reset the state of a module stack to the state it
           was in as of beginning of the substack evaluation.

       For the more complicated syntax valid <u>control</u> values have the following form:

                 [value1=action1 value2=action2 ...]

       Where <u>valueN</u> corresponds to the return code from the function invoked in the module for which the line is
       defined. It is selected from one of these: <u>success</u>, <u>open_err</u>, <u>symbol_err</u>, <u>service_err</u>, <u>system_err</u>,
       <u>buf_err</u>, <u>perm_denied</u>, <u>auth_err</u>, <u>cred_insufficient</u>, <u>authinfo_unavail</u>, <u>user_unknown</u>, <u>maxtries</u>,
       <u>new_authtok_reqd</u>, <u>acct_expired</u>, <u>session_err</u>, <u>cred_unavail</u>, <u>cred_expired</u>, <u>cred_err</u>, <u>no_module_data</u>,
       <u>conv_err</u>, <u>authtok_err</u>, <u>authtok_recover_err</u>, <u>authtok_lock_busy</u>, <u>authtok_disable_aging</u>, <u>try_again</u>, <u>ignore</u>,
       <u>abort</u>, <u>authtok_expired</u>, <u>module_unknown</u>, <u>bad_item</u>, <u>conv_again</u>, <u>incomplete</u>, and <u>default</u>.

       The last of these, <u>default</u>, implies 'all <u>valueN</u>'s not mentioned explicitly. Note, the full list of PAM
       errors is available in /usr/include/security/_pam_types.h. The <u>actionN</u> can take one of the following
       forms:

       ignore
           when used with a stack of modules, the module's return status will not contribute to the return code
           the application obtains.

       bad
           this action indicates that the return code should be thought of as indicative of the module failing.
           If this module is the first in the stack to fail, its status value will be used for that of the whole
           stack. This is the default action for all return codes.

       die
           equivalent to <u>bad</u> with the side effect of terminating the module stack and PAM immediately returning
           to the application.

       ok
           this tells PAM that the administrator thinks this return code should contribute directly to the
           return code of the full stack of modules. In other words, if the former state of the stack would lead
           to a return of <u>PAM_SUCCESS</u>, the module's return code will override this value. Note, if the former
           state of the stack holds some value that is indicative of a modules failure, this 'ok' value will not
           be used to override that value.

       done
           equivalent to <u>ok</u> with the side effect of terminating the module stack and PAM immediately returning
           to the application unless there was a non-ignored module failure before.

       N (an unsigned integer)
           jump over the next N modules in the stack. Note that N equal to 0 is not allowed, it would be treated
           as <u>ignore</u> in such case. The side effect depends on the PAM function call: for <u>pam_authenticate</u>,
           <u>pam_acct_mgmt</u>, <u>pam_chauthtok</u>, and <u>pam_open_session</u> it is <u>ignore</u>; for <u>pam_setcred</u> and
           <u>pam_close_session</u> it is one of <u>ignore</u>, <u>ok</u>, or <u>bad</u> depending on the module's return value.

       reset
           clear all memory of the state of the module stack and start again with the next stacked module.

       If a return code's action is not specifically defined via a <u>valueN</u> token, and the <u>default</u> value is not
       specified, that return code's action defaults to <u>bad</u>.

       Each of the four keywords: required; requisite; sufficient; and optional, have an equivalent expression
       in terms of the [...] syntax. They are as follows:

       required
           [success=ok new_authtok_reqd=ok ignore=ignore default=bad]

       requisite
           [success=ok new_authtok_reqd=ok ignore=ignore default=die]

       sufficient
           [success=done new_authtok_reqd=done default=ignore]

       optional
           [success=ok new_authtok_reqd=ok default=ignore]

       <u>module-path</u> is either the full filename of the PAM to be used by the application (it begins with a '/'),
       or a relative pathname from the default module location: /lib/security/ or /lib64/security/, depending on
       the architecture.

       <u>module-arguments</u> are a space separated list of tokens that can be used to modify the specific behavior of
       the given PAM. Such arguments will be documented for each individual module. Note, if you wish to include
       spaces in an argument, you should surround that argument with square brackets.

               squid auth required pam_mysql.so user=passwd_query passwd=mada \
                     db=eminence [query=select user_name from internet_service \
                     where user_name='%u' and password=PASSWORD('%p') and \
                   service='web_proxy']

       When using this convention, you can include `[' characters inside the string, and if you wish to include
       a `]' character inside the string that will survive the argument parsing, you should use `\]'. In other
       words:

               [..[..\]..]    --&gt;   ..[..]..

       Any line in (one of) the configuration file(s), that is not formatted correctly, will generally tend
       (erring on the side of caution) to make the authentication process fail. A corresponding error is written
       to the system log files with a call to <b><a href="../man3/syslog.3.html">syslog</a></b>(3).

       More flexible than the single configuration file is it to configure libpam via the contents of pam.d
       directories. In this case the directories are filled with files each of which has a filename equal to a
       service-name (in lower-case): it is the personal configuration file for the named service.

       Vendor-supplied PAM configuration files might be installed in the system directory <a href="file:/usr/lib/pam.d/">/usr/lib/pam.d/</a> or a
       configurable vendor specific directory instead of the machine configuration directory <a href="file:/etc/pam.d/.">/etc/pam.d/.</a> If no
       machine configuration file is found, the vendor-supplied file is used. All files in <a href="file:/etc/pam.d/">/etc/pam.d/</a> override
       files with the same name in other directories.

       The syntax of each file in pam.d is similar to that of the <a href="file:/etc/pam.conf">/etc/pam.conf</a> file and is made up of lines of
       the following form:

           type  control  module-path  module-arguments

       The only difference being that the service-name is not present. The service-name is of course the name of
       the given configuration file. For example, <a href="file:/etc/pam.d/login">/etc/pam.d/login</a> contains the configuration for the <b>login</b>
       service.

</pre><h4><b>FILES</b></h4><pre>
       <a href="file:/etc/pam.conf">/etc/pam.conf</a>
           the configuration file

       <a href="file:/etc/pam.d">/etc/pam.d</a>
           the <b>Linux-PAM</b> configuration directory. Generally, if this directory is present, the <a href="file:/etc/pam.conf">/etc/pam.conf</a>
           file is ignored.

       <a href="file:/usr/lib/pam.d">/usr/lib/pam.d</a>
           the <b>Linux-PAM</b> vendor configuration directory. Files in <a href="file:/etc/pam.d">/etc/pam.d</a> override files with the same name
           in this directory.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man3/pam.3.html">pam</a></b>(3), <b><a href="../man8/PAM.8.html">PAM</a></b>(8), <b><a href="../man3/pam_start.3.html">pam_start</a></b>(3)

Linux-PAM                                          07/03/2025                                        <u><a href="../man5/PAM.CONF.5.html">PAM.CONF</a></u>(5)
</pre>
 </div>
</div></section>
</div>
</body>
</html>