<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>bgpd.conf — BGP routing daemon configuration file</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/openbgpd">openbgpd_8.8-1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       bgpd.conf — BGP routing daemon configuration file

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The <u><a href="../man8/bgpd.8.html">bgpd</a></u>(8) daemon implements the Border Gateway Protocol version 4 as described in RFC 4271.

       The <b>bgpd.conf</b> config file is divided into the following main sections:

       “MACROS”
             User-defined variables may be defined and used later, simplifying the configuration file.

       “GLOBAL CONFIGURATION”
             Global settings for <u><a href="../man8/bgpd.8.html">bgpd</a></u>(8).

       “SET CONFIGURATION”
             Various lookup tables are defined in this section.

       “NETWORK AND FLOWSPEC ANNOUNCEMENTS”
             Networks which should be announced by <u><a href="../man8/bgpd.8.html">bgpd</a></u>(8) are set in this section.

       “MPLS VPN CONFIGURATION”
             The definition and properties for BGP MPLS VPNs are set in this section.

       “NEIGHBORS AND GROUPS”
             <u><a href="../man8/bgpd.8.html">bgpd</a></u>(8)  establishes  sessions  with  <u>neighbors</u>.  The neighbor definition and properties are set in
             this section, as well as grouping neighbors for the ease of configuration.

       “FILTER”
             Filter rules for incoming and outgoing <u>UPDATES</u>.

       With the exception of macros, the sections should be grouped and appear in <b>bgpd.conf</b> in the  order  shown
       above.

       The  current  line  can  be  extended  over  multiple lines using a backslash (‘\’).  Comments can be put
       anywhere in the file using a hash mark (‘#’), and extend to the end of the current line.  Care should  be
       taken when commenting out multi-line text: the comment is effective until the end of the entire block.

       Argument names not beginning with a letter, digit, or underscore must be quoted.

       Additional configuration files can be included with the <b>include</b> keyword, for example:

             include "/etc/bgpd/bgpd-10.0.0.1.filter"

</pre><h4><b>MACROS</b></h4><pre>
       Macros  can  be  defined  that  will later be expanded in context.  Macro names must start with a letter,
       digit, or underscore, and may contain any of those characters.  Macro names may  not  be  reserved  words
       (for example, <b>AS</b>, <b>neighbor</b>, or <b>group</b>).  Macros are not expanded inside quotes.

       For example:

             peer1="1.2.3.4"
             neighbor $peer1 {
                     remote-as 65001
             }

</pre><h4><b>GLOBAL</b> <b>CONFIGURATION</b></h4><pre>
       These settings affect the operation of the <u><a href="../man8/bgpd.8.html">bgpd</a></u>(8) daemon as a whole.

       <b>AS</b> <u>as-number</u> [<u>as-number</u>]
               Set  the  local  <u>autonomous</u> <u>system</u> number to <u>as-number</u>.  A fallback 2-byte AS number may follow a
               4-byte AS number for neighbors that do not support 4-byte AS numbers.  The standard  and  default
               fallback AS number is 23456.

               The AS numbers are assigned by local RIRs, such as:

               AfriNIC   for Africa
               APNIC     for Asia Pacific
               ARIN      for North America and parts of the Caribbean
               LACNIC    for Latin America and the Caribbean
               RIPE NCC  for Europe, the Middle East, and parts of Asia

               The AS numbers 64512 – 65534 are designated for private use.  The AS number 23456 is reserved and
               should not be used.  4-byte AS numbers may be specified in either the ASPLAIN format:

                     AS 196618

               or in the older ASDOT format:

                     AS 3.10

       <b>connect-retry</b> <u>seconds</u>
               Set  the  number of seconds to wait before attempting to re-open a connection.  This timer should
               be sufficiently large in EBGP configurations.  The default is 120 seconds.

       <b>dump</b> [<b>rib</b> <u>name</u>] (<b>table-v2</b>|<b>table-mp</b>|<b>table</b>) <u>file</u> [<u>interval</u>]
       <b>dump</b> (<b>all</b>|<b>updates</b>) (<b>in</b>|<b>out</b>) <u>file</u> [<u>interval</u>]
               Dump the RIB, a.k.a. the <u>routing</u> <u>information</u> <u>base</u>,  or  dump  ongoing  BGP  activity,  in  Multi-
               threaded Routing Toolkit (MRT) format.  The <u>file</u> is subject to <u><a href="../man3/strftime.3.html">strftime</a></u>(3)-expansion.

               The  <b>table-v2</b>  and <b>table-mp</b> RIB formats store multi-protocol RIBs correctly, but the <b>table</b> format
               does not.  The latter two are provided only to support third-party tools lacking support for  the
               recommended <b>table-v2</b> format.  Dump an alternative RIB by specifying <u>name</u>.  Specify an <u>interval</u> in
               seconds for periodic RIB dumps.

               The following will dump the entire RIB table, at startup and every 5 minutes thereafter, to a new
               file:

                     dump table-v2 "/tmp/rib-dump-%H%M" 300

               Dumps  of  ongoing  BGP  activity  include all BGP state transitions, and all BGP messages in the
               specified direction.  Use <b>updates</b> to dump only BGP <u>UPDATE</u> messages,  without  state  transitions.
               Specify an <u>interval</u> in seconds to restart periodically with a new file:

                     dump all in "/tmp/all-in-%H%M" 300

       <b>fib-priority</b> <u>prio</u>
               Set the routing priority to <u>prio</u>.  The default is 48.

       <b>fib-update</b> (<b>yes</b>|<b>no</b>)
               If  set  to  <b>no</b>,  do not update the Forwarding Information Base, a.k.a. the kernel routing table.
               The default is <b>yes</b>.

       <b>holdtime</b> <u>seconds</u>
               Set the announced holdtime in seconds.   This  is  exchanged  with  a  neighbor  upon  connection
               establishment, in the <u>OPEN</u> message, and the shortest holdtime governs the session.

               The  neighbor session is dropped if the session holdtime passes without receipt of a <u>KEEPALIVE</u> or
               an <u>UPDATE</u> message from the neighbor.  The default is 90 seconds.

       <b>holdtime</b> <b>min</b> <u>seconds</u>
               The minimum acceptable holdtime in seconds.  This value must be at least 3.

       <b>listen</b> <b>on</b> <u>address</u> [<b>port</b> <u>port</u>]
               Specify the local IP address and optional port for <u><a href="../man8/bgpd.8.html">bgpd</a></u>(8) to  listen  on.   The  default  is  to
               listen on all local addresses on the current default routing domain.

       <b>log</b> <b>updates</b>
               Log sent and received BGP update messages.

       <b>nexthop</b> <b>qualify</b> <b>via</b> (<b>bgp</b>|<b>default</b>)
               If  set  to  <b>bgp</b>,  <u><a href="../man8/bgpd.8.html">bgpd</a></u>(8)  may verify nexthops using BGP routes.  If set to <b>default</b>, <u><a href="../man8/bgpd.8.html">bgpd</a></u>(8) may
               verify nexthops using the default route.  By default <u><a href="../man8/bgpd.8.html">bgpd</a></u>(8) uses only static  routes  or  routes
               added by other routing daemons, such as <u><a href="../man8/ospfd.8.html">ospfd</a></u>(8).

       <b>rde</b> <b>evaluate</b> (<b>default</b>|<b>all</b>)
               If  set  to <u>all</u>, keep evaluating alternative paths in case the selected path is filtered out.  By
               default if a path is filtered by the output filters then no alternative  path  is  sent  to  this
               peer.

       <b>rde</b> <b>med</b> <b>compare</b> (<b>always</b>|<b>strict</b>)
               If set to <b>always</b>, the <u>MULTI_EXIT_DISC</u> attributes will always be compared.  The default is <b>strict</b>,
               where the metric is only compared between peers belonging to the same AS.

       <b>rde</b> <b>rib</b> <u>name</u> [<b>no</b> <b>evaluate</b>]
       <b>rde</b> <b>rib</b> <u>name</u> [<b>rtable</b> <u>number</u>]
               Create  an  additional  RIB  named  <u>name</u>.   The  degree  to  which  its routes may be utilized is
               configurable.  They may be excluded from the decision process that selects usable routes with the
               <b>no</b> <b>evaluate</b> flag, and this precludes their export to any kernel routing table.   By  default  its
               routes  will  be  evaluated,  but  not  exported  to  the kernel.  They may be both evaluated and
               exported if associated with a given <b>rtable</b> <u>number</u>, which must belong to the routing  domain  that
               <u><a href="../man8/bgpd.8.html">bgpd</a></u>(8)  was  started in.  This table will not be consulted during nexthop verification unless it
               is the one that <u><a href="../man8/bgpd.8.html">bgpd</a></u>(8) was started in.  It is unnecessary  to  create  <b>Adj-RIB-In</b>  and  <b>Loc-RIB</b>,
               which are created automatically and used by default.

       <b>rde</b> <b>rib</b> <b>Loc-RIB</b> <b>include</b> <b>filtered</b>
               Include  filtered  prefixes  in  the <b>Loc-RIB</b>.  Filtered prefixes are not eligible by the decision
               process but can be displayed by <u><a href="../man8/bgpctl.8.html">bgpctl</a></u>(8).

       <b>rde</b> <b>route-age</b> (<b>ignore</b>|<b>evaluate</b>)
               If set to <b>evaluate</b>, the route decision process will  also  consider  the  age  of  the  route  in
               addition  to  its  path attributes, giving preference to the older, typically more stable, route.
               This renders the decision process nondeterministic.  The default is <b>ignore</b>.

       <b>reject</b> <b>as-set</b> (<b>yes</b>|<b>no</b>)
               If set to <b>yes</b>, <u>AS</u> <u>paths</u> attributes containing <u>AS_SET</u> path  segments  will  be  rejected  and  all
               prefixes will be treated as withdraws.  The default is <b>yes</b>.

       <b>router-id</b> <u>dotted-quad</u>
               Set  the  BGP  router ID, which must be non-zero and should be unique within the AS.  By default,
               the router ID is the highest IPv4 address assigned to the local machine.

                     router-id 10.0.0.1

       <b>rtable</b> <u>number</u>
               Work with the given kernel routing table instead of the default table, which is the  one  <u><a href="../man8/bgpd.8.html">bgpd</a></u>(8)
               was  started  in.  For nexthop verification, <u><a href="../man8/bgpd.8.html">bgpd</a></u>(8) will always consult the default table.  This
               is the same as using the following syntax:

                     rde rib Loc-RIB rtable number

       <b>socket</b> "<u>path</u>" [<b>restricted</b>]
               Create a control socket at <u>path</u>.  If <b>restricted</b> is specified, a restricted control socket will be
               created.  By default <u>/run/openbgpd/bgpd.sock.&lt;rdomain&gt;</u> is used where  <u>&lt;rdomain&gt;</u>  is  the  routing
               domain in which <u><a href="../man8/bgpd.8.html">bgpd</a></u>(8) has been started.  By default, no restricted socket is created.

       <b>staletime</b> <u>seconds</u>
               Set the upper bound in seconds stale routes are kept during graceful restart.  The default is 180
               seconds.

       <b>transparent-as</b> (<b>yes</b>|<b>no</b>)
               If  set  to <b>yes</b>, attribute transparency is enabled.  <u>AS</u> <u>paths</u> to EBGP neighbors are not prepended
               with the local AS.  Additionally, the  MULTI_EXIT_DISC  attribute  is  passed  transparently  and
               automatic   filtering   based   on   the  well-known  communities  <b>NO_EXPORT</b>,  <b>NO_ADVERTISE</b>,  and
               <b>NO_EXPORT_SUBCONFED</b> is disabled.  The default is <b>no</b>.

</pre><h4><b>SET</b> <b>CONFIGURATION</b></h4><pre>
       <u><a href="../man8/bgpd.8.html">bgpd</a></u>(8) supports the efficient lookup of data within  named  <u>sets</u>.   An  <b>as-set</b>,  a  <b>prefix-set</b>,  and  an
       <b>origin-set</b>  store  AS  numbers,  prefixes,  and prefixes/source-as pairs, respectively.  Such sets may be
       referenced by filter rules; see the “FILTER” section for details.  It is more efficient to evaluate a set
       than a long series of rules for filtering each of its members.

       One single <b>roa-set</b> may be defined, against which <u><a href="../man8/bgpd.8.html">bgpd</a></u>(8) will validate the origin of  each  prefix.   The
       <b>roa-set</b> and the <b>aspa-set</b> are merged with the corresponding tables received via <b>rtr</b> sessions.

       A  set  definition  can span multiple lines, and an optional comma is allowed between elements.  The same
       set can be defined more than once, in this case the definitions are merged into one common set.

       <b>as-set</b> <u>name</u> <b>{</b> <u>as-number</u> <u>...</u> <b>}</b>
               An <b>as-set</b> stores AS numbers, and can be used with the AS specific parameter in “FILTER” rules.

       <b>aspa-set</b> <b>{</b> <b>customer-as</b> <u>as-number</u> [<b>expires</b> <u>seconds</u>] <b>provider-as</b> <b>{</b> <u>as-number</u> <b>...</b> <b>}</b> <b>...</b> <b>}</b>
               The <b>aspa-set</b> holds a collection of <u>Validated</u> <u>ASPA</u> <u>Payloads</u> (VAPs).  Each as AS_PATH received from
               an eBGP peer is checked against the <b>aspa-set</b>,  and  the  ASPA  Validation  State  (AVS)  is  set.
               <b>expires</b> can be set to the seconds since Epoch until when this VAP is valid.

                     aspa-set {
                             customer-as 64511 provider-as { 64496 65496 }
                             customer-as 64496 provider-as { 65496 64544 }
                     }

       <b>origin-set</b> <u>name</u> <b>{</b> <u>address</u><b>/</b><u>len</u> [<b>maxlen</b> <u>mlen</u>] <b>source-as</b> <u>asn</u> <u>...</u> <b>}</b>
               An  <b>origin-set</b>  stores  prefix/source-as  pairs,  and can be used to filter on the combination by
               using the <b>origin-set</b> parameter in “FILTER” rules.

                     origin-set private { 10.0.0.0/8 maxlen 24 source-as 64511
                                          203.0.113.0/24 source-as 64496 }

       <b>prefix-set</b> <u>name</u> <b>{</b> <u>address</u><b>/</b><u>len</u> <u>...</u> <b>}</b>
               A <b>prefix-set</b> stores network prefixes and can be used in place of the <b>prefix</b> parameter in “FILTER”
               rules, and in <b>network</b> statements.  A prefix can be followed by the prefixlen operators listed for
               the <b>prefix</b> parameter in the “PARAMETERS” section.

               The first example below creates a set of prefixes called “private”, to hold a number of RFC  1918
               private network blocks.  The second example shows the use of prefixlen operators.

                     prefix-set private { 10.0.0.0/8, 172.16.0.0/12,
                                          192.168.0.0/16, fc00::/7 }
                     prefix-set as64496set { 192.0.2.0/24 prefixlen &gt;= 26,
                                             2001:db8::/32 or-longer }

       <b>roa-set</b> <b>{</b> <u>address</u><b>/</b><u>len</u> [<b>maxlen</b> <u>mlen</u>] <b>source-as</b> <u>asn</u> [<b>expires</b> <u>seconds</u>] ... <b>}</b>
               The <b>roa-set</b> holds a collection of <u>Validated</u> <u>ROA</u> <u>Payloads</u> (VRPs).  Each received prefix is checked
               against  the  <b>roa-set</b>,  and  the Origin Validation State (OVS) is set.  <b>expires</b> can be set to the
               seconds since Epoch until when this VRP is valid.

                     roa-set { 192.0.2.0/23 maxlen 24 source-as 64511
                               203.0.113.0/24 source-as 64496 }

       <b>rtr</b> <u>address</u> <b>{</b> <u>...</u> <b>}</b>
               The <b>rtr</b> block specifies a <u>RPKI</u> <u>to</u> <u>Router</u> (RTR) session.  <u>RTR</u> sessions provide  another  means  to
               load  <u>VRP</u> sets into <u><a href="../man8/bgpd.8.html">bgpd</a></u>(8).  Changes propagated via the RTR protocol do not need a config reload
               and are immediately applied.  The union of all <u>VRP</u> sets received via <b>rtr</b> sessions and the entries
               in the <b>roa-set</b> is used to validate the origin of routes.   The  rtr  session  properties  are  as
               follows:

               <b>descr</b> <u>description</u>
                       Add  a  description.   The  description is used in logging and status reports, but has no
                       further meaning for <u><a href="../man8/bgpd.8.html">bgpd</a></u>(8).

               <b>local-address</b> <u>address</u>
                       Bind to the specific IP address before opening the TCP connection to the <u>rtr</u> server.

                       <b>min-version</b> <u>number</u> Require a minimal RTR version of <u>number</u>.  To ensure that ASPA  records
                       are synchronised over RTR a minimal version of 2 is required.

               <b>port</b> <u>number</u>
                       Specify the TCP destination port for the <u>rtr</u> session.  If not specified, the default <b>port</b>
                       is <u>323</u>.

</pre><h4><b>NETWORK</b> <b>AND</b> <b>FLOWSPEC</b> <b>ANNOUNCEMENTS</b></h4><pre>
       <b>network</b> statements specify the networks that <u><a href="../man8/bgpd.8.html">bgpd</a></u>(8) will announce as its own.  An announcement must also
       be permitted by the “FILTER” rules.  By default <u><a href="../man8/bgpd.8.html">bgpd</a></u>(8) announces no networks.

       <b>network</b> <u>address</u><b>/</b><u>prefix</u> [<b>set</b> <b>...</b>]
               Announce the specified prefix as belonging to our AS.

       <b>network</b> (<b>inet</b>|<b>inet6</b>) <b>connected</b> [<b>set</b> <b>...</b>]
               Announce routes to directly attached networks.

       <b>network</b> <b>prefix-set</b> <u>name</u> [<b>set</b> <b>...</b>]
               Announce all networks in the prefix-set <u>name</u>.

       <b>network</b> (<b>inet</b>|<b>inet6</b>) <b>priority</b> <u>number</u> [<b>set</b> <b>...</b>]
               Announce routes having the specified <u>priority</u>.

       <b>network</b> (<b>inet</b>|<b>inet6</b>) <b>rtlabel</b> <u>label</u> [<b>set</b> <b>...</b>]
               Announce routes having the specified <u>label</u>.

       <b>network</b> (<b>inet</b>|<b>inet6</b>) <b>static</b> [<b>set</b> <b>...</b>]
               Announce all static routes.

       Each <b>network</b> statement may set default <u>AS</u> <u>path</u> <u>attributes</u>:

             network 192.168.7.0/24 set localpref 220

       See also the “ATTRIBUTE SET” section.

       <b>flowspec</b> statements specify the flowspec rules that <u><a href="../man8/bgpd.8.html">bgpd</a></u>(8) will announce as its own.  By default <u><a href="../man8/bgpd.8.html">bgpd</a></u>(8)
       announces no flowspec rules.

       <b>flowspec</b> (<b>inet</b>|<b>inet6</b>) <u>rule</u> [<b>set</b> <b>...</b>]
               Announce  an  IPv4  or  IPv6 specific flowspec <u>rule</u> including the <u>AS</u> <u>path</u> <u>attributes</u> specified by
               <u>set</u>.

       The following rule parameters can be set.  Most number arguments in the below rules can be specified as a
       list of ranges enclosed in curly brackets using these operators:

             =       (equal, default)
             !=      (unequal)
             &lt;       (less than)
             &lt;=      (less than or equal)
             &gt;       (greater than)
             &gt;=      (greater than or equal)
             -       (range including boundaries)
             &gt;&lt;      (except range)

       ‘&gt;&lt;’, and ‘-’ are binary operators (they take two arguments).

       <b>from</b> <u>source</u> [<b>port</b> <u>list</u>]
       <b>to</b> <u>dest</u> [<b>port</b> <u>list</u>]
               This rule applies only to packets with the specified source or destination addresses  and  ports.
               Addresses  can  be  specified  in  CIDR  notation  (matching netblocks) or using <b>any</b> to match any
               address.  In most cases a <b>to</b> address must be specified and be part of the announced networks.

               Ports can be specified either by number or by name.  For example, port 80  can  be  specified  as
               <b>www</b>.  For a list of all port name to number mappings see the file <u><a href="file:/etc/services">/etc/services</a></u>.
       <b>flags</b> <u>a</u>/<u>b</u>
               This  rule  only  applies  to  TCP  packets  that  have  the flags <u>a</u> set out of set <u>b</u>.  Flags not
               specified in <u>b</u> are ignored.  The flags are: (F)IN, (S)YN, (R)ST, (P)USH, (A)CK, (U)RG, (E)CE, and
               C(W)R.
       <b>fragment</b> <u>a</u>/<u>b</u>
               This rule only applies to fragmented packets which match the specified  flags.   The  flags  are:
               (D)on't fragment, (I)s fragment, (F)irst fragment, and (L)ast fragment.
       <b>icmp-type</b> <u>type</u> [<b>code</b> <u>code</u>]
       <b>icmp6-type</b> <u>type</u> [<b>code</b> <u>code</u>]
               This rule only applies to ICMP or ICMP6 packets with the specified type and code.  Text names for
               ICMP types and codes are listed in <u><a href="../man4/icmp.4.html">icmp</a></u>(4) and <u><a href="../man4/icmp6.4.html">icmp6</a></u>(4).
       <b>length</b> <u>pktlen</u>
               This rule applies only to packets matching the specified <u>pktlen</u>.
       <b>proto</b> <u>protocol</u>
               This  rule  applies only to packets of this protocol.  Common protocols are ICMP, ICMP6, TCP, and
               UDP.  For a list of all the protocol name to number mappings see the file <u><a href="file:/etc/protocols">/etc/protocols</a></u>.
       <b>tos</b> <u>string</u>|<u>number</u>
               This rule applies to packets with the specified TOS bits set.  <u>string</u> may  be  one  of  <b>critical</b>,
               <b>inetcontrol</b>,  <b>lowdelay</b>,  <b>netcontrol</b>, <b>throughput</b>, <b>reliability</b>, or one of the DiffServ Code Points:
               <b>ef</b>, <b>af11</b> ... <b>af43</b>, <b>cs0</b> ... <b>cs7</b>; <u>number</u> may be either a hex or decimal number.

       The action taken when a flowspec rules matches depends on extended communities.  For example to block all
       traffic either <b>ext-community</b> <b>flow-rate</b> <u>as-number</u>:0 or <b>ext-community</b> <b>flow-pps</b> <u>as-number</u>:0 need to be set.

</pre><h4><b>MPLS</b> <b>VPN</b> <b>CONFIGURATION</b></h4><pre>
       A <b>vpn</b> section configures a router to participate in an MPLS Virtual Private  Network.   It  specifies  an
       <u><a href="../man4/mpe.4.html">mpe</a></u>(4) interface to use, a description, and various properties of the VPN:

             vpn "description" on mpe1 {
                     rd 65002:1
                     import-target rt 65002:42
                     export-target rt 65002:42
                     network 192.168.1/24
             }

       <u><a href="../man8/bgpd.8.html">bgpd</a></u>(8)  will not exchange VPN routes with a neighbor by default, see the “NEIGHBORS AND GROUPS” section.
       The description is used when logging but has no further meaning to <u><a href="../man8/bgpd.8.html">bgpd</a></u>(8).

       The <u><a href="../man4/mpe.4.html">mpe</a></u>(4) interface will be used as the outgoing interface for routes to the  VPN,  and  local  networks
       will  be  announced  with  the  MPLS  label  specified  on  the interface.  The interface can provide VPN
       connectivity for another rdomain by being configured in that  rdomain.   The  required  rdomain  must  be
       configured  on the interface before <u><a href="../man8/bgpd.8.html">bgpd</a></u>(8) uses it.  Multiple VPNs may be connected to a single rdomain,
       including the rdomain that <u><a href="../man8/bgpd.8.html">bgpd</a></u>(8) is running in.

       An example <u><a href="../man5/hostname.if.5.html">hostname.if</a></u>(5) configuration for an <u><a href="../man4/mpe.4.html">mpe</a></u>(4) interface providing connectivity to rdomain 1:

             rdomain 1
             mplslabel 2000
             inet 192.198.0.1 255.255.255.255
             up

       The VPN properties are as follows:

       <b>export-target</b> <u>subtype</u> <u>as-number</u>:<u>local</u>
       <b>export-target</b> <u>subtype</u> <u>IP</u>:<u>local</u>
               Classify announced networks by tagging them with an <u>extended</u> <u>community</u> of  the  given  arguments.
               The  community  <u>subtype</u>  should be a <u>route</u> <u>target</u>, <b>rt</b>, to ensure interoperability.  The arguments
               are further detailed in the  “ATTRIBUTE  SET”  section.   More  than  one  <b>export-target</b>  can  be
               specified.

       <b>fib-update</b> (<b>yes</b>|<b>no</b>)
               If  set  to  <b>no</b>,  do not update the Forwarding Information Base, a.k.a. the kernel routing table.
               The default is <b>yes</b>.

       <b>import-target</b> <u>subtype</u> <u>as-number</u>:<u>local</u>
       <b>import-target</b> <u>subtype</u> <u>IP</u>:<u>local</u>
               The  rdomain  imports  only  those  prefixes  tagged  with  an  <u>extended</u>  <u>community</u>  matching  an
               <b>import-target</b>.   The  community <u>subtype</u> should be a <u>route</u> <u>target</u>, <b>rt</b>, to ensure interoperability.
               The arguments are further detailed in the “ATTRIBUTE SET” section.  More than  one  <b>import-target</b>
               can be specified.

       <b>network</b> <u>argument</u> <u>...</u>
               Announce the given networks within this VPN; see the “NETWORK ANNOUNCEMENTS” section.

       <b>rd</b> <u>as-number</u>:<u>local</u>
       <b>rd</b> <u>IP</u>:<u>local</u>
               The  Route  Distinguisher  <b>rd</b> supplies BGP with namespaces to disambiguate VPN prefixes, as these
               needn't be globally unique.  Unlike route targets, the <b>rd</b> neither identifies the  origin  of  the
               prefix  nor  controls  into  which  VPNs  the prefix is distributed.  The <u>as-number</u> or <u>IP</u> of a <b>rd</b>
               should be set to a number or IP that was assigned by an appropriate authority, whereas <u>local</u>  can
               be chosen by the local operator.

</pre><h4><b>NEIGHBORS</b> <b>AND</b> <b>GROUPS</b></h4><pre>
       <u><a href="../man8/bgpd.8.html">bgpd</a></u>(8)  establishes  TCP  connections  to  other  BGP  speakers  called  <u>neighbors</u>.   A neighbor and its
       properties are specified by a <b>neighbor</b> section:

             neighbor 10.0.0.2 {
                     remote-as 65002
                     descr "a neighbor"
             }

       Neighbors placed within a <b>group</b> section inherit the properties common to that group:

             group "peering AS65002" {
                     remote-as 65002
                     neighbor 10.0.0.2 {
                             descr "AS65002-p1"
                     }
                     neighbor 10.0.0.3 {
                             descr "AS65002-p2"
                     }
             }

       An entire network of neighbors may be accommodated by specifying an address/netmask pair:

             neighbor 10.0.0.0/8

       This is a <u>template</u> that recognises as a neighbor any connection from  within  the  given  network.   Such
       neighbors  inherit  their  template's  properties,  except  for  their  IP  address.  A template may omit
       <b>remote-as</b>; <u><a href="../man8/bgpd.8.html">bgpd</a></u>(8) then accepts any AS presented by the neighbor in the <u>OPEN</u> message.

       The neighbor properties are as follows:

       <b>announce</b> (<b>IPv4</b>|<b>IPv6</b>) (<b>none</b>|<b>unicast</b>|<b>vpn</b>|<b>flowspec</b>) [<b>enforce</b>]
               For the given address family, control which <u>subsequent</u> <u>address</u> <u>families</u> are announced during  the
               capabilities  negotiation.   Only  routes for that address family and subsequent address families
               will be announced and processed.

               At the moment, only <b>none</b>, which disables the announcement of that address family,  <b>unicast</b>,  <b>vpn</b>,
               which  allows  the  distribution of BGP MPLS VPNs, and <b>flowspec</b>, which allows the distribution of
               Flow Specification Rules, are supported.

               The default is <b>unicast</b> for the same address family of the session.

       <b>announce</b> <b>add-path</b> <b>recv</b> (<b>yes</b>|<b>no</b>|<b>enforce</b>)
               If set to <b>yes</b>, the receive add-path capability is announced, which allows reception  of  multiple
               paths per prefix.  The default is <b>no</b>.

       <b>announce</b> <b>add-path</b> <b>send</b> (<b>no</b>|<b>all</b>) [<b>enforce</b>]
       <b>announce</b> <b>add-path</b> <b>send</b> (<b>best</b>|<b>ecmp</b>|<b>as-wide-best</b>) [<b>plus</b> <u>num</u>] [<b>max</b> <u>num</u>] [<b>enforce</b>]
               If  set  to  <b>all</b>,  <b>best</b>,  <b>ecmp</b>, or <b>as-wide-best</b>, the send add-path capability is announced, which
               allows sending multiple paths per prefix.  The paths sent depend on which mode is selected:

               <b>no</b>            do not advertise add-path send capability
               <b>all</b>           send all valid paths
               <b>best</b>          send the best path
               <b>ecmp</b>          send paths with equal nexthop cost
               <b>as-wide-best</b>  send paths where the first 8 checks of the decision process match

               <b>plus</b> allows the inclusion of additional backup paths and works for <b>best</b>, <b>ecmp</b>, and  <b>as-wide-best</b>.
               <b>max</b>  can  be  used  to limit the total amount of paths sent for <b>ecmp</b> and <b>as-wide-best</b>.  Right now
               <b>ecmp</b> and <b>as-wide-best</b> are equivalent.  The default is <b>no</b>.  If <b>add-path</b> <b>send</b> is  active  then  the
               setting of <b>rde</b> <b>evaluate</b> is ignored.

       <b>announce</b> <b>as-4byte</b> (<b>yes</b>|<b>no</b>|<b>enforce</b>)
               If  set  to  <b>no</b>,  the  4-byte  AS  capability is not announced and so native 4-byte AS support is
               disabled.  If <b>enforce</b> is set, the session will only be established if the neighbor also announces
               the capability.  The default is <b>yes</b>.

       <b>announce</b> <b>enhanced</b> <b>refresh</b> (<b>yes</b>|<b>no</b>|<b>enforce</b>)
               If set to <b>yes</b>, the enhanced route refresh capability  is  announced.   If  <b>enforce</b>  is  set,  the
               session  will  only be established if the neighbor also announces the capability.  The default is
               <b>no</b>.

       <b>announce</b> <b>extended</b> <b>message</b> (<b>yes</b>|<b>no</b>|<b>enforce</b>)
               If set to <b>yes</b>, the extended message capability is announced.  If negotiated, the default  maximum
               message  size is increased from 4096 to 65535 bytes.  If <b>enforce</b> is set, the session will only be
               established if the neighbor also announces the capability.  The default is <b>no</b>.

       <b>announce</b> <b>extended</b> <b>nexthop</b> (<b>yes</b>|<b>no</b>|<b>enforce</b>)
               If set to <b>yes</b>, the extended nexthop  encoding  capability  is  announced.   If  negotiated,  <b>IPv4</b>
               <b>unicast</b> and <b>vpn</b> sessions can send paths with a IPv6 nexthop.  If <b>enforce</b> is set, the session will
               only be established if the neighbor also announces the capability.  The default is <b>no</b>.

       <b>announce</b> <b>graceful</b> <b>notification</b> (<b>yes</b>|<b>no</b>)
               If set to <b>yes</b>, the graceful notification extension to graceful restart is announced.  The default
               is <b>no</b>.  <b>announce</b> <b>refresh</b> must be enabled to enable graceful notifications.

       <b>announce</b> <b>policy</b> (<b>yes</b>|<b>no</b>|<b>enforce</b>)
               If  set  to  <b>yes</b>,  add  the  open  policy  role capability.  If the role of the neighbor does not
               correspond to the expected role then the session will be closed.  If <b>enforce</b> is set, the  session
               will only be established if the neighbor also announces the capability.  The default is <b>no</b>.

       <b>announce</b> <b>refresh</b> (<b>yes</b>|<b>no</b>|<b>enforce</b>)
               If set to <b>no</b>, the route refresh capability is not announced.  If <b>enforce</b> is set, the session will
               only be established if the neighbor also announces the capability.  The default is <b>yes</b>.

       <b>announce</b> <b>restart</b> (<b>yes</b>|<b>no</b>|<b>enforce</b>)
               If  set  to  <b>no</b>, the graceful restart capability is not announced.  Currently only the End-of-RIB
               marker is supported and announced by the <b>restart</b> capability.  If <b>enforce</b> is set, the session will
               only be established if the neighbor also announces the capability.  The default is <b>yes</b>.

       <b>as-override</b> (<b>yes</b>|<b>no</b>)
               If set to <b>yes</b>, all occurrences of the neighbor AS in the <u>AS</u> <u>path</u> will be replaced with the  local
               AS  before  running the filters.  The Adj-RIB-In still holds the unmodified AS path.  The default
               value is <b>no</b>.

       <b>demote</b> <u>group</u>
               Increase the <u><a href="../man4/carp.4.html">carp</a></u>(4) demotion counter on the  given  interface  group,  usually  <u>carp</u>,  when  the
               session  is  not in state <u>ESTABLISHED</u>.  The demotion counter will be increased as soon as <u><a href="../man8/bgpd.8.html">bgpd</a></u>(8)
               starts and decreased 60 seconds after the session went to state <u>ESTABLISHED</u>.  For neighbors added
               at runtime, the demotion counter is only increased after the  session  has  been  <u>ESTABLISHED</u>  at
               least once before dropping.

               For more information on interface groups, see the <b>group</b> keyword in <u><a href="../man8/ifconfig.8.html">ifconfig</a></u>(8).

       <b>depend</b> <b>on</b> <u>interface</u>
               The  neighbor  session  will  be  kept  in  state <u>IDLE</u> as long as <u>interface</u> reports no link.  For
               <u><a href="../man4/carp.4.html">carp</a></u>(4) interfaces, no link means that the interface is  currently  <u>backup</u>.   This  is  primarily
               intended to be used with <u><a href="../man4/carp.4.html">carp</a></u>(4) to reduce failover times.

               The state of the network interfaces on the system can be viewed using the <b>show</b> <b>interfaces</b> command
               to <u><a href="../man8/bgpctl.8.html">bgpctl</a></u>(8).

       <b>descr</b> <u>description</u>
               Add  a description.  The description is used when logging neighbor events, in status reports, for
               specifying neighbors, etc., but has no further meaning to <u><a href="../man8/bgpd.8.html">bgpd</a></u>(8).

       <b>down</b> [<u>reason</u>]
               Do not start the session when <u><a href="../man8/bgpd.8.html">bgpd</a></u>(8) comes up but stay in <u>IDLE</u>.  If the session  is  cleared  at
               runtime,  after  a  <b>down</b>  <u>reason</u>  was configured at runtime, the <u>reason</u> is sent as Administrative
               Shutdown Communication.  The <u>reason</u> cannot exceed 255 octets.

       <b>dump</b> (<b>all</b>|<b>updates</b>) (<b>in</b>|<b>out</b>) <u>file</u> [<u>interval</u>]
               Dump ongoing BGP activity for a particular neighbor.   See  also  the  <b>dump</b>  setting  in  “GLOBAL
               CONFIGURATION”.

       <b>enforce</b> <b>local-as</b> (<b>yes</b>|<b>no</b>)
               If  set  to  <b>no</b>,  <u>AS</u> <u>paths</u> will not be checked for AS loop detection.  This feature is similar to
               allowas-in in some other BGP implementations.  Since there is no AS path loop check, this feature
               is dangerous, and requires you to add filters  to  prevent  receiving  your  own  prefixes.   The
               default value is <b>yes</b>.

       <b>enforce</b> <b>neighbor-as</b> (<b>yes</b>|<b>no</b>)
               If  set  to  <b>yes</b>,  <u>AS</u>  <u>paths</u>  whose <u>leftmost</u> <u>AS</u> is not equal to the <u>remote</u> <u>AS</u> of the neighbor are
               rejected and a <u>NOTIFICATION</u> is sent back.  The default value for IBGP peers is <b>no</b>  otherwise  the
               default is <b>yes</b>.

       <b>export</b> (<b>none</b>|<b>default-route</b>)
               If  set  to <b>none</b>, no <u>UPDATE</u> messages will be sent to the neighbor.  If set to <b>default-route</b>, only
               the default route will be announced to the neighbor.

       <b>holdtime</b> <u>seconds</u>
               Set the holdtime in seconds.  Inherited from the global configuration if not given.

       <b>holdtime</b> <b>min</b> <u>seconds</u>
               Set the minimal acceptable holdtime.  Inherited from the global configuration if not given.

       <b>ipsec</b> (<b>ah</b>|<b>esp</b>) (<b>in</b>|<b>out</b>) <b>spi</b> <u>spi-number</u> <u>authspec</u> [<u>encspec</u>]
               Enable IPsec with static keying.  There must be at least  two  <b>ipsec</b>  statements  per  peer  with
               manual  keying,  one per direction.  <u>authspec</u> specifies the authentication algorithm and key.  It
               can be

                     sha1 &lt;key&gt;
                     md5 &lt;key&gt;

               <u>encspec</u> specifies the encryption algorithm and key.  <b>ah</b> does not support encryption.   With  <b>esp</b>,
               encryption is optional.  <u>encspec</u> can be

                     3des &lt;key&gt;
                     3des-cbc &lt;key&gt;
                     aes &lt;key&gt;
                     aes-128-cbc &lt;key&gt;

               Keys  must  be given in hexadecimal format.  After changing settings, a session needs to be reset
               to use the new keys.  The <b>ipsec</b> flows only work with session using the default port 179.

       <b>ipsec</b> (<b>ah</b>|<b>esp</b>) <b>ike</b>
               Enable IPsec with dynamic keying.  In this mode, <u><a href="../man8/bgpd.8.html">bgpd</a></u>(8) sets up the flows, and a key  management
               daemon  such  as <u><a href="../man8/isakmpd.8.html">isakmpd</a></u>(8) is responsible for managing the session keys.  With <u><a href="../man8/isakmpd.8.html">isakmpd</a></u>(8), it is
               sufficient to copy the peer's public key, found in <u>/etc/isakmpd/local.pub</u>, to the local  machine.
               It  must  be  stored  in  a  file  named  after  the  peer's  IP  address  and  must be stored in
               <u>/etc/isakmpd/pubkeys/ipv4/</u>.  The local public key must be copied to the peer in the same way.  As
               <u><a href="../man8/bgpd.8.html">bgpd</a></u>(8) manages the flows on its own, it is sufficient to restrict <u><a href="../man8/isakmpd.8.html">isakmpd</a></u>(8) to only  take  care
               of keying by specifying the flags <b>-Ka</b>.  This can be done in <u><a href="../man8/rc.conf.local.8.html">rc.conf.local</a></u>(8).  After starting the
               <u><a href="../man8/isakmpd.8.html">isakmpd</a></u>(8)  and <u><a href="../man8/bgpd.8.html">bgpd</a></u>(8) daemons on both sides, the session should be established.  After changing
               settings, a session needs to be reset to use the new  keys.   The  <b>ipsec</b>  flows  only  work  with
               session using the default port 179.

       <b>local-address</b> <u>address</u>
       <b>no</b> <b>local-address</b>
               When  <u><a href="../man8/bgpd.8.html">bgpd</a></u>(8) initiates the TCP connection to the neighbor system, it normally does not bind to a
               specific IP address.  If a <b>local-address</b> is given, <u><a href="../man8/bgpd.8.html">bgpd</a></u>(8)  binds  to  this  address  first.   <b>no</b>
               <b>local-address</b> reverts back to the default.

       <b>local-as</b> <u>as-number</u> [<u>as-number</u>]
               Set  the  AS  number  sent  to  the  remote  system.   Used  as  described  above  under  “GLOBAL
               CONFIGURATION” option <b>AS</b>.

               Since there is no AS path loop check, this option is dangerous, and requires you to  add  filters
               to prevent receiving your ASNs.  Intended to be used temporarily, for migrations to another AS.

       <b>log</b> <b>no</b>  Disable neighbor specific logging.

       <b>log</b> <b>updates</b>
               Log received and sent updates for this neighbor.

       <b>max-prefix</b> <u>number</u> [<b>restart</b> <u>number</u>]
               Terminate  the session when the maximum <u>number</u> of prefixes received is exceeded (no such limit is
               imposed by default).  If <b>restart</b> is  specified,  the  session  will  be  restarted  after  <u>number</u>
               minutes.

       <b>max-prefix</b> <u>number</u> <b>out</b> [<b>restart</b> <u>number</u>]
               Terminate  the  session  when  the  maximum <u>number</u> of prefixes sent is exceeded (no such limit is
               imposed by default).  If <b>restart</b> is  specified,  the  session  will  be  restarted  after  <u>number</u>
               minutes.

       <b>multihop</b> <u>hops</u>
               Neighbors  not  in the same AS as the local <u><a href="../man8/bgpd.8.html">bgpd</a></u>(8) normally have to be directly connected to the
               local machine.  If this is not the case, the <b>multihop</b> statement  defines  the  maximum  hops  the
               neighbor may be away.

       <b>passive</b>
               Do not attempt to actively open a TCP connection to the neighbor system.

       <b>port</b> <u>port</u>
               Connect to the peer using <u>port</u> instead of the default BGP port 179.

       <b>reject</b> <b>as-set</b> (<b>yes</b>|<b>no</b>)
               If  set  to  <b>yes</b>,  <u>AS</u>  <u>paths</u>  attributes containing <u>AS_SET</u> path segments will be rejected and all
               prefixes will be treated as withdraws.  The default is inherited from the  global  <b>reject</b>  <b>as-set</b>
               setting.

       <b>remote-as</b> <u>as-number</u>
               Set the AS number of the remote system.

       <b>rde</b> <b>evaluate</b> (<b>default</b>|<b>all</b>)
               If  set  to <u>all</u>, keep evaluating alternative paths in case the selected path is filtered out.  By
               default if a path is filtered by the output filters then no alternative  path  is  sent  to  this
               peer.  The default is inherited from the global <b>rde</b> <b>evaluate</b> setting.

       <b>rib</b> <u>name</u>
               Bind the neighbor to the specified RIB.

       <b>role</b> <u>role</u>
               Set  the local role for this eBGP session.  Setting a role is required for ASPA verification, the
               open policy role capability and Only-To-Customer (OTC) attribute of RFC 9234.  The  role  can  be
               one of <u>none</u>, <u>provider</u>, <u>customer</u>, <u>rs</u>, <u>rs-client</u>, or <u>peer</u>.  If the role is set to <u>none</u> the <b>announce</b>
               <b>policy</b> will also be disabled.  On iBGP session the role setting is ignored and forced to <u>none</u>.

       <b>route-reflector</b> [<u>address</u>]
               Act  as  an RFC 4456 <u>route-reflector</u> for this neighbor.  An optional cluster ID can be specified;
               otherwise the BGP ID will be used.

       <b>set</b> <u>attribute</u> <u>...</u>
               Set the <u>AS</u> <u>path</u> <u>attributes</u> to some default per <b>neighbor</b> or <b>group</b> block:

                     set localpref 300

               See also the “ATTRIBUTE SET” section.  Set parameters are applied to the received  prefixes;  the
               only  exceptions  are <b>prepend-self</b>, <b>nexthop</b> <b>no-modify</b> and <b>nexthop</b> <b>self</b>.  These sets are rewritten
               into filter rules and can be viewed with “bgpd -nv”.

       <b>staletime</b> <u>seconds</u>
               Set the upper bound stale time in seconds  for  graceful  restart.   Inherited  from  the  global
               configuration if not given.

       <b>tcp</b> <b>md5sig</b> <b>password</b> <u>secret</u>
       <b>tcp</b> <b>md5sig</b> <b>key</b> <u>secret</u>
               Enable  TCP  MD5 signatures per RFC 2385.  The shared secret can either be given as a password or
               hexadecimal key.

                     tcp md5sig password mekmitasdigoat
                     tcp md5sig key deadbeef
               After changing keys, a session needs to be reset to use the new keys.

       <b>transparent-as</b> (<b>yes</b>|<b>no</b>)
               If set to <b>yes</b>, attribute transparency is enabled.  See also the <b>transparent-as</b> setting in “GLOBAL
               CONFIGURATION”.  The default is inherited from the global <b>transparent-as</b> setting.

       <b>ttl-security</b> (<b>yes</b>|<b>no</b>)
               Enable or disable ttl-security.  When enabled, outgoing packets are sent using a TTL of 255 and a
               check is made against an incoming packet's TTL.  For directly connected peers,  incoming  packets
               are  required  to  have  a  TTL  of 255, ensuring they have not been routed.  For multihop peers,
               incoming packets are required to have a TTL of 256 minus multihop distance,  ensuring  they  have
               not passed through more than the expected number of hops.  The default is <b>no</b>.

</pre><h4><b>FILTER</b></h4><pre>
       <u><a href="../man8/bgpd.8.html">bgpd</a></u>(8)  filters  all  BGP  <u>UPDATE</u> messages, including its own announcements, and blocks them by default.
       Filter rules may match on neighbor, direction, <u>prefix</u> or <u>AS</u>  <u>path</u>  <u>attributes</u>.   Filter  rules  may  also
       modify <u>AS</u> <u>path</u> <u>attributes</u>.

       For  each  <u>UPDATE</u> processed by the filter, the filter rules are evaluated in sequential order, from first
       to last.  The last matching <b>allow</b> or <b>deny</b> rule decides what action is taken.  The default  action  is  to
       deny.

       The following actions can be used in the filter:

       <b>allow</b>     The <u>UPDATE</u> is passed.

       <b>deny</b>      The <u>UPDATE</u> is blocked.

       <b>match</b>     Apply the filter attribute set without influencing the filter decision.

</pre><h4><b>PARAMETERS</b></h4><pre>
       The  rule  parameters  specify the <u>UPDATES</u> to which a rule applies.  An <u>UPDATE</u> always comes from, or goes
       to, one neighbor.  Most parameters are optional, but each can  appear  at  most  once  per  rule.   If  a
       parameter is specified, the rule only applies to packets with matching attributes.

       <u>as-type</u> [<u>operator</u>] <u>as-number</u>
       <u>as-type</u> <b>as-set</b> <u>name</u>
               This  rule  applies only to <u>UPDATES</u> where the <u>AS</u> <u>path</u> matches.  The part of the <u>AS</u> <u>path</u> specified
               by the <u>as-type</u> is matched against the <u>as-number</u> or the <b>as-set</b> <u>name</u>:

               <b>AS</b>           (any part)
               <b>peer-as</b>      (leftmost AS number)
               <b>source-as</b>    (rightmost AS number)
               <b>transit-as</b>   (all but the rightmost AS number)

               <u>as-number</u> is an AS number as explained above under “GLOBAL CONFIGURATION”.   It  may  be  set  to
               <b>neighbor-as</b>,  which  is  expanded to the current neighbor remote AS number, or <b>local-as</b>, which is
               expanded to the locally assigned AS number.

               When specifying an <b>as-set</b> <u>name</u>, the AS path will instead be matched against all the AS numbers in
               the set.

               The <u>operator</u> can be unspecified (this case is identical to the equality operator), or one of  the
               numerical operators

                     =       (equal)
                     !=      (unequal)
                     -       (range including boundaries)
                     &gt;&lt;      (except range)

               &gt;&lt;  and  - are binary operators (they take two arguments); with these, <u>as-number</u> cannot be set to
               <b>neighbor-as</b>.

               Multiple <u>as-number</u> entries for a given type or <u>as-type</u> <u>as-number</u> entries may also  be  specified,
               separated by commas or whitespace, if enclosed in curly brackets:

                     deny from any AS { 1, 2, 3 }
                     deny from any { AS 1, source-as 2, transit-as 3 }
                     deny from any { AS { 1, 2, 3 }, source-as 4, transit-as 5 }

       <b>avs</b> (<b>valid</b> | <b>unknown</b> | <b>invalid</b>)
               This rule applies only to <u>UPDATES</u> where the ASPA Validation State (AVS) matches.

       <b>community</b> <u>as-number</u><b>:</b><u>local</u>
       <b>community</b> <u>name</u>
               This  rule  applies  only  to  <u>UPDATES</u> where the <b>community</b> path attribute is present and matches.
               Communities are specified as <u>as-number</u>:<u>local</u>, where <u>as-number</u> is an AS  number  and  <u>local</u>  is  a
               locally significant number between zero and <b>65535</b>.  Both <u>as-number</u> and <u>local</u> may be set to ‘*’ to
               do  wildcard  matching.   Alternatively,  well-known communities may be given by name instead and
               include <b>BLACKHOLE</b>, <b>GRACEFUL_SHUTDOWN</b>, <b>NO_EXPORT</b>, <b>NO_ADVERTISE</b>, <b>NO_EXPORT_SUBCONFED</b>, and  <b>NO_PEER</b>.
               Both  <u>as-number</u>  and  <u>local</u>  may be set to <b>neighbor-as</b>, which is expanded to the current neighbor
               remote AS number, or <b>local-as</b>, which is expanded to the locally assigned AS number.

       <b>large-community</b> <u>as-number</u>:<u>local</u>:<u>local</u>
               This rule applies only to <u>UPDATES</u> where  the  <b>Large</b>  <b>community</b>  path  attribute  is  present  and
               matches.  Communities are specified as <u>as-number</u>:<u>local</u>:<u>local</u>, where <u>as-number</u> is an AS number and
               <u>local</u>  is a locally significant number between zero and <b>4294967295</b>.  Both <u>as-number</u> and <u>local</u> may
               be set to ‘*’ to do wildcard matching, <b>neighbor-as</b>, which is expanded  to  the  current  neighbor
               remote AS number, or <b>local-as</b>, which is expanded to the locally assigned AS number.

       <b>ext-community</b> <u>subtype</u> <u>as-number</u>:<u>local</u>
       <b>ext-community</b> <u>subtype</u> <u>IP</u>:<u>local</u>
       <b>ext-community</b> <u>subtype</u> <u>numvalue</u>
       <b>ext-community</b> <b>ovs</b> (<b>valid</b> | <b>not-found</b> | <b>invalid</b>)
               This  rule  applies  only  to  <u>UPDATES</u> where the <u>extended</u> <u>community</u> path attribute is present and
               matches.  Extended Communities are specified by a <u>subtype</u> and normally  two  values,  a  globally
               unique  part  (e.g.  the  AS  number)  and  a local part.  Both <u>as-number</u> and <u>local</u> may be set to
               <b>neighbor-as</b>, which is expanded to the current neighbor remote AS number, or  <b>local-as</b>,  which  is
               expanded  to  the locally assigned AS number.  Wildcard matching is supported for <u>local</u>, <u>numvalue</u>
               and <u>subtype</u>.  If wildcard matching is used on the <u>subtype</u> then <u>numvalue</u> also needs to be  set  to
               ‘*’.  See also the “ATTRIBUTE SET” section for further information about the encoding.

       (<b>from</b>|<b>to</b>) <u>peer</u>
               This  rule  applies  only  to  <u>UPDATES</u>  coming from, or going to, this particular neighbor.  This
               parameter must be specified.  <u>peer</u> is one of the following:

               <b>any</b>          Any neighbor will be matched.
               <b>ibgp</b>         All <u>IBGP</u> neighbors will be matched.
               <b>ebgp</b>         All <u>EBGP</u> neighbors will be matched.
               <u>address</u>      Neighbors with this address will be matched.
               <b>group</b> <u>descr</u>  Neighbors in this group will be matched.
               <b>AS</b> <u>as-number</u>
                            Neighbors with this AS will be matched.

               Multiple <u>peer</u> entries may also be specified, separated by commas or whitespace,  if  enclosed  in
               curly brackets:

                     deny from { 128.251.16.1, 251.128.16.2, group hojo }

       (<b>inet</b>|<b>inet6</b>)
               Match  only  routes  in  the  IPv4  or IPv6 address families, respectively.  <b>inet</b> is an alias for
               "prefix 0.0.0.0/0 prefixlen &gt;= 0"; <b>inet6</b> is an alias for "prefix ::/0 prefixlen &gt;= 0".

       <b>max-as-len</b> <u>len</u>
               This rule applies only to <u>UPDATES</u> where the <u>AS</u> <u>path</u> has more than <u>len</u> elements.

       <b>max-as-seq</b> <u>len</u>
               This rule applies only to <u>UPDATES</u> where a single <u>AS</u> <u>number</u> is repeated more than <u>len</u> times.

       <b>max-communities</b>|<b>max-large-communities</b>|<b>max-ext-communities</b> <u>num</u>
               This rule applies only to <u>UPDATES</u> where the <u>Basic</u>, <u>Large</u>, or  <u>Extended</u>  <u>Community</u>  attribute  has
               more than <u>num</u> elements.

       <b>nexthop</b> <u>address</u>
               This  rule applies only to <u>UPDATES</u> where the nexthop is equal to <u>address</u>.  The <u>address</u> can be set
               to <u>neighbor</u> in which case the nexthop is compared against the address of the  neighbor.   Nexthop
               filtering  is  not  supported  on locally announced networks and one must take into consideration
               previous rules overwriting nexthops.

       <b>origin-set</b> <u>name</u>
               This rule applies only to <u>UPDATES</u> that match the given origin-set <u>name</u>.

       <b>ovs</b> (<b>valid</b> | <b>not-found</b> | <b>invalid</b>)
               This rule applies only to <u>UPDATES</u> where the Origin Validation State (OVS) matches.

       <b>prefix</b> <u>address</u><b>/</b><u>len</u>
       <b>prefix</b> <u>address</u><b>/</b><u>len</u> <b>prefixlen</b> <u>range</u>
       <b>prefix</b> <u>address</u><b>/</b><u>len</u> <b>or-longer</b>
       <b>prefix</b> <u>address</u><b>/</b><u>len</u> <b>maxlen</b> <u>mlen</u>
               This rule applies only to <u>UPDATES</u> for the specified prefix.

               Multiple entries may be specified, separated by  commas  or  whitespace,  if  enclosed  in  curly
               brackets:

                     deny from any prefix { 192.168.0.0/16, 10.0.0.0/8 or-longer }

               Multiple lists can also be specified, which is useful for macro expansion:

                     good="{ 192.168.0.0/16, 172.16.0.0/12, 10.0.0.0/8 }"
                     bad="{ 224.0.0.0/4 prefixlen &gt;= 4, 240.0.0.0/4 prefixlen &gt;= 4 }"
                     ugly="{ 127.0.0.1/8, 169.254.0.0/16 }"

                     deny from any prefix { $good $bad $ugly }

               Prefix length ranges are specified by using these operators:

                     =       (equal)
                     !=      (unequal)
                     &lt;       (less than)
                     &lt;=      (less than or equal)
                     &gt;       (greater than)
                     &gt;=      (greater than or equal)
                     -       (range including boundaries)
                     &gt;&lt;      (except range)

               &gt;&lt;  and  -  are  binary  operators  (they take two arguments).  For instance, to match all prefix
               lengths &gt;= 8 and &lt;= 12, and hence the CIDR netmasks 8, 9, 10, 11 and 12:

                     prefixlen 8-12

               Or, to match all prefix lengths &lt; 8 or &gt; 12, and hence the CIDR netmasks 0–7 and 13–32:

                     prefixlen 8&gt;&lt;12

               This will match all prefixes in the 10.0.0.0/8 netblock with netmasks longer than 16:

                     prefix 10.0.0.0/8 prefixlen &gt; 16

               <b>or-longer</b> is a shorthand for:

                     <b>prefix</b> <u>address</u><b>/</b><u>len</u> <b>prefixlen</b> <b>&gt;=</b> <u>len</u>

               <b>maxlen</b> <u>mlen</u> is a shorthand for:

                     <b>prefix</b> <u>address</u><b>/</b><u>len</u> <b>prefixlen</b> <b>&lt;=</b> <u>mlen</u>

       <b>prefix-set</b> <u>name</u> [<b>or-longer</b>]
               This rule applies only to <u>UPDATES</u> that match the given  prefix-set  <u>name</u>.   With  <b>or-longer</b>,  the
               <u>UPDATES</u> will match any prefix in the prefix-set where

                     <b>address/</b><u>len</u> <b>prefixlen</b> <b>&gt;=</b> <u>len</u>

       <b>quick</b>   If  an  <u>UPDATE</u>  matches  a  rule which has the <b>quick</b> option set, this rule is considered the last
               matching rule, and evaluation of subsequent rules is skipped.

       <b>rib</b> <u>name</u>
               Apply rule only to the specified RIB.  This only applies for received updates, so not  for  rules
               using the <u>to</u> <u>peer</u> parameter.

       <b>set</b> <u>attribute</u> <u>...</u>
               All  matching  rules  can  set the <u>AS</u> <u>path</u> <u>attributes</u> to some default.  The set of every matching
               rule is applied, not only the last matching one.  See also the following section.

</pre><h4><b>ATTRIBUTE</b> <b>SET</b></h4><pre>
       <u>AS</u> <u>path</u> <u>attributes</u> can be modified with <b>set</b>.

       <b>set</b> can be used on <b>network</b> statements, in <b>neighbor</b> or <b>group</b> blocks, and on filter rules.  Attribute  sets
       can be expressed as lists.

       The following attributes can be modified:

       <b>community</b> [<u>delete</u>] <u>as-number</u>:<u>local</u>
       <b>community</b> [<u>delete</u>] <u>name</u>
               Set  or  delete the <u>COMMUNITIES</u> AS path attribute.  Communities are specified as <u>as-number</u>:<u>local</u>,
               where <u>as-number</u> is an AS number and <u>local</u> is a locally significant number between zero and <b>65535</b>.
               Alternately, well-known communities may  be  specified  by  name:  <b>GRACEFUL_SHUTDOWN</b>,  <b>NO_EXPORT</b>,
               <b>NO_ADVERTISE</b>,  <b>NO_EXPORT_SUBCONFED</b>,  or <b>NO_PEER</b>.  For <b>delete</b>, both <u>as-number</u> and <u>local</u> may be set
               to ‘*’ to do wildcard matching.

       <b>large-community</b> [<u>delete</u>] <u>as-number</u>:<u>local</u>:<u>local</u>
       <b>large-community</b> [<u>delete</u>] <u>name</u>
               Set  or  delete  the  <u>Large</u>  <u>Communities</u>  path   attribute.    Communities   are   specified   as
               <u>as-number</u>:<u>local</u>:<u>local</u>,  where <u>as-number</u> is an AS number and <u>local</u> is a locally significant number
               between zero and <b>4294967295</b>.  For <b>delete</b>, both <u>as-number</u> and <u>local</u>  may  be  set  to  ‘*’  to  do
               wildcard matching.

       <b>ext-community</b> [<u>delete</u>] <u>subtype</u> <u>as-number</u>:<u>local</u>
       <b>ext-community</b> [<u>delete</u>] <u>subtype</u> <u>IP</u>:<u>local</u>
       <b>ext-community</b> [<u>delete</u>] <u>subtype</u> <u>numvalue</u>
       <b>ext-community</b> [<u>delete</u>] <b>ovs</b> (<b>valid</b> | <b>not-found</b> | <b>invalid</b>)
               Set  or delete the <u>Extended</u> <u>Community</u> AS path attribute.  Extended Communities are specified by a
               <u>subtype</u> and normally two values, a globally unique part (e.g. the AS number) and  a  local  part.
               The  type  is  selected  depending  on  the  encoding  of the global part.  Two-octet AS Specific
               Extended  Communities  and  Four-octet  AS  Specific  Extended   Communities   are   encoded   as
               <u>as-number</u>:<u>local</u>.   Four-octet  encoding  is  used if the <u>as-number</u> is bigger than 65535 or if the
               AS_DOT encoding is used.  IPv4 Address Specific Extended Communities  are  encoded  as  <u>IP</u>:<u>local</u>.
               Opaque Extended Communities are encoded with a single numeric value.  The <u>ovs</u> subtype can only be
               set to <u>valid</u>, <u>not-found</u>, or <u>invalid</u>.  Currently the following subtypes are supported:

                     bdc      BGP Data Collection
                     defgw    Default Gateway
                     esi-lab  ESI Label
                     esi-rt   ES-Import Route Target
                     l2vid    L2VPN Identifier
                     mac-mob  MAC Mobility
                     odi      OSPF Domain Identifier
                     ort      OSPF Route Type
                     ori      OSPF Router ID
                     ovs      BGP Origin Validation State
                     rt       Route Target
                     soo      Route Origin / Source of Origin
                     srcas    Source AS
                     vrfri    VRF Route Import

               Not  all  type  and  subtype  value  pairs are allowed by IANA and the parser will ensure that no
               invalid combination is created.

               For <b>delete</b>, <u>subtype</u>, <u>numvalue</u>, or <u>local</u>, may be set to ‘*’ to do wildcard matching.  If  wildcard
               matching is used on the <u>subtype</u> then <u>numvalue</u> also needs to be set to ‘*’.

       <b>localpref</b> <u>number</u>
               Set  the  <u>LOCAL_PREF</u>  AS  path attribute.  If <u>number</u> starts with a plus or minus sign, <u>LOCAL_PREF</u>
               will be adjusted by adding or subtracting <u>number</u>; otherwise  it  will  be  set  to  <u>number</u>.   The
               default is 100.

       <b>med</b> <u>number</u>
       <b>metric</b> <u>number</u>
               Set  the  <u>MULTI_EXIT_DISC</u>  AS  path  attribute.   If  <u>number</u>  starts  with  a plus or minus sign,
               <u>MULTI_EXIT_DISC</u> will be adjusted by adding or subtracting <u>number</u>; otherwise it  will  be  set  to
               <u>number</u>.

       <b>origin</b> (<b>igp</b>|<b>egp</b>|<b>incomplete</b>)
               Set  the  <u>ORIGIN</u> AS path attribute to mark the source of this route as being injected from an igp
               protocol, an egp protocol or being an aggregated route.

       <b>nexthop</b> (<u>address</u>|<b>blackhole</b>|<b>reject</b>|<b>self</b>|<b>no-modify</b>)
               Set the <u>NEXTHOP</u> AS path attribute to a different nexthop  address  or  use  blackhole  or  reject
               routes.   <u>blackhole</u>  and <u>reject</u> only affect the FIB and will not alter the nexthop address.  <u>self</u>
               forces the nexthop to be set to the local interface address.  If set to  <u>no-modify</u>,  the  nexthop
               attribute  is not modified for EBGP multihop sessions.  By default EBGP multihop sessions use the
               local interface address.  On other  IBGP  and  directly  connected  EBGP  sessions  <u>no-modify</u>  is
               ignored.   The  set <u>address</u> is used on IBGP session and on directly connected EBGP session if the
               <u>address</u> is part of the connected network.  On EBGP multihop session <u>no-modify</u> has to  be  set  to
               force the nexthop to <u>address</u>.

                     set nexthop 192.168.0.1
                     set nexthop blackhole
                     set nexthop reject
                     set nexthop no-modify
                     set nexthop self

       <b>pftable</b> <u>table</u>
               Add  the prefix in the update to the specified <u><a href="../man4/pf.4.html">pf</a></u>(4) table, regardless of whether or not the path
               was selected for routing.  This option may be useful in building realtime blacklists.

       <b>prepend-neighbor</b> <u>number</u>
               Prepend the neighbor's AS <u>number</u> times to the <u>AS</u> <u>path</u>.

       <b>prepend-self</b> <u>number</u>
               Prepend the local AS <u>number</u> times to the <u>AS</u> <u>path</u>.

       <b>rtlabel</b> <u>label</u>
               Add the prefix to the kernel routing table with the specified <u>label</u>.

       <b>weight</b> <u>number</u>
               The <u>weight</u> is used to tip prefixes with equally long AS paths in one or the other  direction.   A
               prefix  is weighed at a very late stage in the decision process.  If <u>number</u> starts with a plus or
               minus sign, the <u>weight</u> will be adjusted by adding or subtracting <u>number</u>; otherwise it will be set
               to <u>number</u>.  <u>Weight</u> is a local non-transitive attribute, and is a <u><a href="../man8/bgpd.8.html">bgpd</a></u>(8)-specific extension.  For
               prefixes with equally long paths, the prefix with the larger weight is selected.

</pre><h4><b>FILES</b></h4><pre>
       <u>/etc/bgpd.conf</u>  <u><a href="../man8/bgpd.8.html">bgpd</a></u>(8) configuration file.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <u><a href="../man3/strftime.3.html">strftime</a></u>(3),  <u><a href="../man4/ipsec.4.html">ipsec</a></u>(4),  <u><a href="../man4/pf.4.html">pf</a></u>(4),  <u><a href="../man4/rdomain.4.html">rdomain</a></u>(4),  <u><a href="../man4/tcp.4.html">tcp</a></u>(4),  <u><a href="../man8/bgpctl.8.html">bgpctl</a></u>(8),   <u><a href="../man8/bgpd.8.html">bgpd</a></u>(8),   <u><a href="../man8/ipsecctl.8.html">ipsecctl</a></u>(8),   <u><a href="../man8/isakmpd.8.html">isakmpd</a></u>(8),
       <u><a href="../man8/rc.conf.local.8.html">rc.conf.local</a></u>(8)

</pre><h4><b>HISTORY</b></h4><pre>
       The <b>bgpd.conf</b> file format first appeared in OpenBSD 3.5.

Debian                                          January 27, 2025                                    <u><a href="../man5/BGPD.CONF.5.html">BGPD.CONF</a></u>(5)
</pre>
 </div>
</div></section>
</div>
</body>
</html>