<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>snmptrapd.conf - configuration file for the Net-SNMP notification receiver</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/snmptrapd">snmptrapd_5.9.4+dfsg-2ubuntu1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       snmptrapd.conf - configuration file for the Net-SNMP notification receiver

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The  Net-SNMP  notification  receiver  (trap  daemon) uses one or more configuration files to control its
       operation and how incoming traps (and INFORM requests) should be processed.  This  file  (<b>snmptrapd.conf</b>)
       can be located in one of several locations, as described in the <u><a href="../man5/snmp_config.5.html">snmp_config</a></u>(5) manual page.

</pre><h4><b>IMPORTANT</b></h4><pre>
       Previously,  <b>snmptrapd</b>  would  accept  all incoming notifications, and log them automatically (even if no
       explicit configuration was provided).  Starting with release 5.3, access control checks will  be  applied
       to  incoming  notifications.  If  <b>snmptrapd</b>  is  run without a suitable configuration file (or equivalent
       access control settings), then such traps <b>WILL</b> <b>NOT</b> be processed.  See the section <b>ACCESS</b> <b>CONTROL</b> for more
       details.

       As with the agent configuration, the <u>snmptrapd.conf</u> directives can be divided into four distinct groups.

</pre><h4><b>TRAPD</b> <b>BEHAVIOUR</b></h4><pre>
       snmpTrapdAddr [&lt;transport-specifier&gt;:]&lt;transport-address&gt;[,...]
              defines a list of listening addresses, on which to receive incoming SNMP notifications.   See  the
              section  <b>LISTENING</b>  <b>ADDRESSES</b> in the <u><a href="../man8/snmpd.8.html">snmpd</a></u>(8) manual page for more information about the format of
              listening addresses.

              The default behaviour is to listen on UDP port 162 on all IPv4 interfaces.

       doNotRetainNotificationLogs yes
              disables support for the NOTIFICATION-LOG-MIB.  Normally the snmptrapd program keeps a  record  of
              the  traps  received,  which  can be retrieved by querying the nlmLogTable and nlmLogvariableTable
              tables.  This directive can be used to suppress this behaviour.

              See the <u><a href="../man8/snmptrapd.8.html">snmptrapd</a></u>(8) manual page and the NOTIFICATION-LOG-MIB for details.

       doNotLogTraps yes
              disables the logging of notifications altogether.  This is useful  if  the  <b>snmptrapd</b>  application
              should only run traphandle hooks and should not log traps to any location.

       doNotFork yes
              do not fork from the calling shell.

       pidFile PATH
              defines a file in which to store the process ID of the notification receiver.  By default, this ID
              is not saved.

</pre><h4><b>ACCESS</b> <b>CONTROL</b></h4><pre>
       Starting  with  release  5.3,  it  is necessary to explicitly specify who is authorised to send traps and
       informs to the notification receiver (and what types of processing these are allowed to  trigger).   This
       uses an extension of the VACM model, used in the main SNMP agent.

       There are currently three types of processing that can be specified:

              log    log  the  details  of the notification - either in a specified file, to standard output (or
                     stderr), or via <u>syslog</u> (or similar).

              execute
                     pass the details of the trap to a specified handler program, including embedded perl.

              net    forward the trap to another notification receiver.

       In the following directives, <u>TYPES</u> will be a (comma-separated) list of one or more of these tokens.  Most
       commonly, this will typically be <u>log,execute,net</u> to cover  any  style  of  processing  for  a  particular
       category  of  notification.  But  it is perfectly possible (even desirable) to limit certain notification
       sources to selected processing only.

       authCommunity   TYPES COMMUNITY  [SOURCE [OID | -v VIEW ]]
              authorises traps (and SNMPv2c INFORM requests) with the specified community to trigger  the  types
              of  processing  listed.   By  default, this will allow any notification using this community to be
              processed.  The SOURCE field can be used to specify that the configuration should  only  apply  to
              notifications received from particular sources - see <u><a href="../man5/snmpd.conf.5.html">snmpd.conf</a></u>(5) for more details.

       authUser   TYPES [-s MODEL] USER  [LEVEL [OID | -v VIEW ]]
              authorises SNMPv3 notifications with the specified user to trigger the types of processing listed.
              By  default,  this  will accept authenticated requests.  (<u>authNoPriv</u> or <u>authPriv</u>). The LEVEL field
              can be used to allow unauthenticated notifications (<u>noauth</u>), or to require encryption (<u>priv</u>), just
              as for the SNMP agent.

              With both of these  directives,  the  OID  (or  <u>-v</u>  <u>VIEW</u>)  field  can  be  used  to  retrict  this
              configuration to the processing of particular notifications.

              Note:  Unlike  the  VACM  processing  described in RFC 3415, this view is <b>only</b> matched against the
                     snmpTrapOID value of the incoming notification.  It is not applied to the payload  varbinds
                     held within that notification.

       authGroup  TYPES [-s MODEL] GROUP  [LEVEL [OID | -v VIEW ]]

       authAccess TYPES [-s MODEL] GROUP VIEW  [LEVEL [CONTEXT]]

       setAccess GROUP CONTEXT MODEL LEVEL PREFIX VIEW TYPES
              authorise  notifications  in the specified GROUP (configured using the <u>group</u> directive) to trigger
              the types of processing listed.  See <u><a href="../man5/snmpd.conf.5.html">snmpd.conf</a></u>(5) for more details.

       createUser [-e  ENGINEID] username (MD5|SHA|SHA-512|SHA-384|SHA-256|SHA-224) authpassphrase [DES|AES]
              See the <u><a href="../man5/snmpd.conf.5.html">snmpd.conf</a></u>(5) manual page for a description of  how  to  create  SNMPv3  users.   This  is
              roughly the same, but the file name changes to snmptrapd.conf from snmpd.conf.

       disableAuthorization yes
              will  disable  the  above access control checks, and revert to the previous behaviour of accepting
              all incoming notifications.

</pre><h4><b>LOGGING</b></h4><pre>
       format1 FORMAT

       format2 FORMAT
              specify the format used to display SNMPv1 TRAPs and SNMPv2 notifications respectively.  Note  that
              SNMPv2c and SNMPv3 both use the same SNMPv2 PDU format.

       format DESTINATION FORMAT
              specify the format used for different destinations.  DESTINATION is one of: <u>print</u>, <u>print1</u>, <u>print2</u>,
              <u>syslog</u>,  <u>syslog1</u>, <u>syslog2</u>, <u>execute</u>, <u>execute1</u>, <u>execute2</u>.  <u>print1</u> is used for printing SNMPv1 traps,
              <u>print2</u> is for SNMPv2.  <u>print</u> is used for both versions.  <u>syslog</u> is  similarly  used  when  sending
              traps to syslog, and <u>execute</u> used when sending traps to a program such as <u><a href="../man1/traptoemail.1.html">traptoemail</a></u>(1).

              The default formats are
              <u>format</u>  <u>print1</u>  <u>%.4y-%.2m-%.2l</u>  <u>%.2h:%.2j:%.2k</u>  <u>%B</u>  <u>[%b]</u> <u>(via</u> <u>%A</u> <u>[%a]):</u> <u>%N\n\t%W</u> <u>Trap</u> <u>(%q)</u> <u>Uptime:</u>
              <u>%#T\n%v\n</u>
              <u>format</u> <u>print2</u> <u>%.4y-%.2m-%.2l</u> <u>%.2h:%.2j:%.2k</u> <u>%B</u> <u>[%b]:\n%v\n</u>
              <u>format</u> <u>syslog1</u> <u>%a:</u> <u>%W</u> <u>Trap</u> <u>(%q)</u> <u>Uptime:</u> <u>%#T%#v\n</u>
              <u>format</u> <u>syslog2</u> <u>%B</u> <u>[%b]:</u> <u>Trap</u> <u>%#v\n</u>
              <u>format</u> <u>execute</u> <u>%B\n%b\n%V\n%v\n</u>

              See <u><a href="../man8/snmptrapd.8.html">snmptrapd</a></u>(8) for the layout characters available.

       ignoreAuthFailure yes
              instructs the receiver to ignore <u>authenticationFailure</u> traps.

              Note:  This currently only affects the logging of such notifications.  <u>authenticationFailure</u> traps
                     will still be  passed  to  trap  handler  scripts,  and  forwarded  to  other  notification
                     receivers.   This  behaviour  should  not be relied on, as it is likely to change in future
                     versions.

       logOption string
              specifies where notifications should be logged - to standard output, standard error,  a  specified
              file or via <u>syslog</u>.  See the section LOGGING OPTIONS in the <u><a href="../man1/snmpcmd.1.html">snmpcmd</a></u>(1) manual page for details.

       outputOption string
              specifies  various  characteristics  of  how  OIDs  and other values should be displayed.  See the
              section OUTPUT OPTIONS in the <u><a href="../man1/snmpcmd.1.html">snmpcmd</a></u>(1) manual page for details.

</pre><h4><b>MySQL</b> <b>Logging</b></h4><pre>
       There are two configuration variables that work together to control when queued traps are logged  to  the
       MySQL database. A non-zero value must be specified for sqlSaveInterval to enable MySQL logging.

       sqlMaxQueue max
              specifies the maximum number of traps to queue before a forced flush to the MySQL database.

       sqlSaveInterval seconds
              specified  the  number  of  seconds between periodic queue flushes.  A value of 0 for will disable
              MySQL logging.

</pre><h4><b>NOTIFICATION</b> <b>PROCESSING</b></h4><pre>
       As well as logging incoming notifications,  they  can  also  be  forwarded  on  to  another  notification
       receiver, or passed to an external program for specialised processing.

       traphandle OID|default PROGRAM [ARGS ...]
              invokes  the specified program (with the given arguments) whenever a notification is received that
              matches the OID token.  For SNMPv2c and SNMPv3 notifications, this token will be compared  against
              the  snmpTrapOID  value  taken  from the notification.  For SNMPv1 traps, the generic and specific
              trap values and the enterprise OID will be converted into the equivalent OID (following RFC 2576).

              Typically, the OID token will be the name (or numeric OID) of a NOTIFICATION-TYPE object, and  the
              specified  program  will  be  invoked for notifications that match this OID exactly.  However this
              token also supports a simple form of wildcard suffixing.  By appending the character  ´*'  to  the
              OID  token,  the  corresponding  program will be invoked for any notification based within subtree
              rooted at the specified OID.   For  example,  an  OID  token  of  .1.3.6.1.4.1*  would  match  any
              enterprise  specific  notification  (including  the  specified  OID  itself).   An  OID  token  of
              .1.3.6.1.4.1.* would would work in much the same way, but would not match this exact  OID  -  just
              notifications  that  lay  strictly  below  this root.  Note that this syntax does not support full
              regular expressions or wildcards - an OID token of the form oid.*.subids is <b>not</b> <b>valid.</b>

              If the OID field is the token <u>default</u> then the program will be invoked for  any  notification  not
              matching another (OID specific) <u>traphandle</u> entry.

       Details  of  the  notification are fed to the program via its standard input.  Note that this will always
       use the SNMPv2-style notification format, with SNMPv1 traps being converted as per RFC 2576, before being
       passed to the program.  The input format  is,  if  you  use  the  default  set  by  the  "format  execute
       %B\n%b\n%V\n%v\n", one entry per line:

              HOSTNAME
                     The name of the host that sent the notification, as determined by <u><a href="../man3/gethostbyaddr.3.html">gethostbyaddr</a></u>(3).

              ADDRESS
                     The transport address, like
                     "[UDP: [172.16.10.12]:23456-&gt;[10.150.0.8]]"

              VARBINDS
                     A list of variable bindings describing the contents of the notification, one per line.  The
                     first  token on each line (up until a space) is the OID of the varind, and the remainder of
                     the line is its value.  The format of both of these  are  controlled  by  the  <u>outputOption</u>
                     directive (or similar configuration).

                     The  first  OID  should  always  be  SNMPv2-MIB::sysUpTime.0,  and  the  second  should  be
                     SNMPv2-MIB::snmpTrapOID.0.  The remaining lines will contain the payload varbind list.  For
                     SNMPv1 traps, the final OID will be SNMPv2-MIB::snmpTrapEnterprise.0.

              Example:
                     A <b>traptoemail</b> script has been included in the Net-SNMP package that can be  used  within  a
                     <u>traphandle</u> directive:

                     traphandle   default   <a href="file:///usr/lib/w3m/cgi-bin/w3mman2html.cgi?perl">/usr/bin/perl</a>   /usr/bin/traptoemail   -s   mysmtp.somewhere.com  -f
                     <a href="mailto:admin@somewhere.com">admin@somewhere.com</a> <a href="mailto:me@somewhere.com">me@somewhere.com</a>

       forward OID|default DESTINATION
              forwards notifications that match the specified OID to another receiver listening on  DESTINATION.
              The interpretation of OID (and <u>default</u>) is the same as for the <u>traphandle</u> directive).

              See  the  section  <b>LISTENING</b>  <b>ADDRESSES</b> in the <u><a href="../man8/snmpd.8.html">snmpd</a></u>(8) manual page for more information about the
              format of listening addresses.

       addForwarderInfo 1|yes|true|0|no|false

              Each time a trap is forwarded, add an OID with the IP address of the system from  which  the  trap
              has   been   received.   The   following  OID  is  added:  .1.3.6.1.6.3.18.1.3.x  (SNMP-COMMUNITY-
              MIB::snmpTrapAddress.x) where x is the lowest index &gt;= 0 that does  not  yet  occur  in  the  trap
              payload.  The  end  recipient  (i.e.  the monitoring system) can determine the IPv4 address of the
              original sender by looking for the  varbind  with  OID  snmpTrapAddress.0.  If  that  OID  is  not
              populated  it  means  that  the trap has been sent directly or in other words that it has not been
              forwarded.

</pre><h4><b>NOTES</b></h4><pre>
       o      The daemon blocks while executing the <u>traphandle</u> commands.  (This should be fixed  in  the  future
              with an appropriate signal catch and wait() combination).

       o      All directives listed with a value of "yes" actually accept a range of boolean values.  These will
              accept  any  of  <u>1</u>, <u>yes</u> or <u>true</u> to enable the corresponding behaviour, or any of <u>0</u>, <u>no</u> or <u>false</u> to
              disable it.  The default in each case is for the feature to be turned off, so these directives are
              typically only used to enable the appropriate behaviour.

</pre><h4><b>FILES</b></h4><pre>
       /etc/snmp/snmptrapd.conf

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <a href="../man5/snmp_config.5.html">snmp_config</a>(5), <a href="../man8/snmptrapd.8.html">snmptrapd</a>(8), <a href="../man8/syslog.8.html">syslog</a>(8), <a href="../man1/traptoemail.1.html">traptoemail</a>(1), <a href="../man5/variables.5.html">variables</a>(5), <a href="../man3/netsnmp_config_api.3.html">netsnmp_config_api</a>(3).

V5.9.4.pre2                                        13 Mar 2014                                 <u><a href="../man5/SNMPTRAPD.CONF.5.html">SNMPTRAPD.CONF</a></u>(5)
</pre>
 </div>
</div></section>
</div>
</body>
</html>