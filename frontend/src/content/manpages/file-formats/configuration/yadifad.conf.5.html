<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>yadifad.conf - configuration file for yadifad(8).</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/yadifa">yadifa_3.0.2-3_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       yadifad.conf - configuration file for <u><a href="../man8/yadifad.8.html">yadifad</a></u>(8).

</pre><h4><b>SYNOPSIS</b></h4><pre>
       ${SYSCONFDIR}/yadifa/yadifad.conf

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The  configuration  of  yadifad  is  consistent  in  a text file that can optionally include others.  The
       general  structure  is  a  sequence  of  containers:  a  sequence  of  lines  of  text  starting  with  a
       &lt;container-name&gt;  and  ending  with  a  &lt;/container-name&gt;.  Each line between these delimitters is in the
       form: variable-name value.  The format of the value is determined by the type of the variable.

   <b>TYPES</b>
       There are 15 types:

       <u>ACL</u>
               A list of ACL descriptors. User-defined ACLs are found in the ACL section. The "any"  and  "none"
              descriptors are always defined. Elements of the list are separated by a "," or a ";".

       <u>DNSSECTYPE</u>
               A  DNSSEC  type  name.  It can be a DNSSEC-enabled value ("nsec", "nsec3" or "nsec3-optout") or a
              DNSSEC-disabled value ("none", "no", "off" or "0").

       <u>ENUM</u>
               A word from a specified set.

       <u>FLAG</u>
               A boolean value. It can be true ("1", "enable", "enabled", "on", "true", "yes")  or  false  ("0",
              "disable", "disabled", "off", "false", "no").

       <u>FQDN</u>
               A fully-qualified domain name text string. e.g.: www.eurid.eu.

       <u>GID</u>
               Group ID. (Can be a number or a name)

       <u>HOST(S)</u>
               A (list of) host(s). A host is defined by an IP (v4 or v6) and can be followed by the word `port'
              and a port number. Elements of the list are separated by a `,' or a `;'.

       <u>INTEGER</u> <u>/</u> <u>INT</u>
               A base-ten integer.

       <u>NETMOD</u>
               A word or integer that identifies the network model:
              <b>single</b> <b>or</b> <b>0</b> Each working thread reads a single message, processes its answer and replies to it.
              <b>buffered</b> <b>or</b> <b>1</b> Working threads are working by couple. One reads a single message and queues it, one
              de-queues it, processes its answer and replies to it.
              <b>multi</b>  <b>or</b>  <b>2</b> Each working thread reads a multiple messages, processes their answers and replies to
              them.

       <u>PATH</u> <u>/</u> <u>FILE</u>
               A file or directory path. i.e.: "/var/zones".

       <u>STRING</u> <u>/</u> <u>STR</u>
               A text string. Double quotes can be used but are not mandatory. Without quotes the string will be
              taken from the first non-blank character to the last non-blank character.

       <u>HEXSTR</u>
               A hexadecimal even-length text string.

       <u>RELDATE</u>
               A cron-like date to be matched, relative to  another.  The  columns  are  minutes  [0;59],  hours
              [0;23],  days  [0;31], months [1;12], weekdays [mon,tue,wed,thu,fri,sat,sun] and week-of-the-month
              [0;4]. Multiple values can be set in a column cell using ',' as a separator. The '*' character can
              be used to set all possible values of its column cell.

       <u>RELTIME</u>
               A time offset relative to another. It's written as +integer[unit-character]  (e.g.:  +24h)  where
              the unit character can be <u>s</u>econds, <u>m</u>inutes, <u>h</u>ours, <u>d</u>ays or <u>w</u>eeks.

       <u>SECONDS</u>
               A base-ten integer.

       <u>HOURS</u>
               A base-ten integer.

       <u>DAYS</u>
               A base-ten integer.

       <u>UID</u>
               User ID. (Can be a number or a name)

   <b>CONTAINERS</b>
       The configuration of yadifad has several containers:

       <b>&lt;main&gt;</b>
               General container

       <b>&lt;key&gt;</b>
               TSIG keys

       <b>&lt;acl&gt;</b>
               Access lists

       <b>&lt;nsid&gt;</b>
               NameServer IDentifier

       <b>&lt;rrl&gt;</b>
               Response Rate Limiting directives

       <b>&lt;zone&gt;</b>
               Description of the domain name in specific attributes.

       <b>&lt;channels&gt;</b>
               Description of the logger outputs.

       <b>&lt;dnssec-policy&gt;</b>
               Description of dnssec policies.

       <b>&lt;key-suite&gt;</b>
               Description of the key-suites needed if 'dnssec policies' are used.

       <b>&lt;key-roll&gt;</b>
               Description of the key-rolls needed if 'dnssec policies' are used.

       <b>&lt;key-template&gt;</b>
               Description of the key-templates needed if 'dnssec policies' are used.

       <b>&lt;denial&gt;</b>
               Description of 'denial', this can be used in certain 'dnssec policies'.

       The configuration supports included files.
       example: include /etc/yadifa/conf.d/local.conf

       The configuration files can be nested.

       The configuration consists of:

       <b>*</b>      Container, which starts with &lt;container name&gt; and ends with &lt;/container name&gt;

       <b>*</b>      Variable name

       <b>*</b>      1 or 2 arguments

       <b>*</b>      Arguments can contain 1 or more comma separated values.

   <b>STANDARD</b> <b>SECTIONS</b>
       <b>&lt;main&gt;</b>
               General container, contains all the configuration parameters needed to start up yadifad.

              <b>allow-control</b> <u>ACL</u>
                      default: none

                     Default server-control access control list. Only the sources matching the ACL are accepted.

              <b>allow-notify</b> <u>ACL</u>
                      default: any

                     Default notify access control list. Only the servers matching the ACL will be handled.

              <b>allow-query</b> <u>ACL</u>
                      default: any

                     Default query access control list. Only the clients matching the ACL will be replied to.

              <b>allow-transfer</b> <u>ACL</u>
                      default: none

                     Default  transfer access control list. Only the clients matching the ACL will be allowed to
                     transfer a zone (<u>axfr</u>/<u>ixfr</u>).

              <b>allow-update</b> <u>ACL</u>
                      default: none

                     Default update access control list. Only the clients matching the ACL will  be  allowed  to
                     update a zone.

              <b>allow-update-forwarding</b> <u>ACL</u>
                      default: none

                     Default  update-forwarding  access  control  list.  Only  the  sources matching the ACL are
                     accepted.

              <b>answer-formerr-packets</b> <u>FLAG</u>
                      default: true

                     If this flag is disabled; the server will not reply to badly formatted packets.

              <b>axfr-compress-packets</b> <u>FLAG</u>
                      default: true

                     Enables the <u>dns</u> packet compression of each <u>axfr</u> packet.

              <b>axfr-max-packet-size</b> <u>INT</u>
                      default: 4096 bytes

                     The maximum size of an <u>axfr</u> packet. (MIN: 512; MAX: 65535)

              <b>axfr-max-record-by-packet</b> <u>INT</u>
                      default: 0

                     The maximum number of records in each <u>axfr</u> packet. Older name servers can  only  handle  1.
                     Set to 0 to disable the limit. (MIN: 0; MAX: 65535)

              <b>axfr-retry-delay</b> <u>SECONDS</u>
                      default: 600

                     Number  of  seconds between each retry for the first transfer from the primary name server.
                     (MIN: 60; MAX: 86400)

              <b>axfr-retry-jitter</b> <u>SECONDS</u>
                      default: 180

                     Jitter applied to axfr-retry-delay. (MIN: 60; MAX: axfr-retry-delay)

              <b>axfr-retry-failure-delay-multiplier</b> <u>INT</u>
                      default: 5

                     Linear back-off multiplier. The multiplier times the number of failures  is  added  to  the
                     xfr-retry-delay. (MIN: 0; MAX: 86400)

              <b>axfr-retry-failure-delay-max</b> <u>SECONDS</u>
                      default: 3600

                     Maximum delay added for the back-off. (MIN: 0; MAX: 604800)

              <b>axfr-strict-authority</b> <u>FLAG</u>
                      default: yes (unless --enable-non-aa-axfr-support was used)

                     Tells yadifad to be strict with the AA flag in AXFR answers

              <b>chroot</b> <u>FLAG</u>
                      default: off

                     Enabling this flag will make the server jail itself in the chroot-path directory.

              <b>chroot-path;</b> <b>chrootpath</b> <u>PATH</u>
                      default: /

                     The directory used for the jail.

              <b>cpu-count-override</b> <u>INT</u>
                      default: 0

                     Overrides the detected number of logical cpus. Set to 0 for automatic. (MIN: 0; MAX: 256)

              <b>daemon;</b> <b>daemonize</b> <u>FLAG</u>
                      default: false

                     Enabling this flag will make the server detach from the console and work in background.

              <b>data-path;</b> <b>datapath</b> <u>PATH</u>
                      default: zones

                     The base path were lies the data (zone file path; journaling data; temporary files; etc.)

              <b>do-not-listen</b> <u>HOSTS</u>
                      default: -

                     An  exclusion  list of addresses to never listen to. If set, 0.0.0.0 and ::0 will always be
                     split by interface to isolate the address.

              <b>edns0-max-size</b> <u>INT</u>
                      default: 4096

                     <u>edns0</u> packets size. (MIN: 512; MAX: 65535)

              <b>gid;</b> <b>group</b> <u>GID</u>
                      default: 0 (or root)

                     The group ID that the server will use.

              <b>hidden-primary;</b> <b>hidden-master</b> <u>FLAG</u>
                      default: no

                     As a hidden primary  more CPU will be used for various maintenance tasks.

              <b>hostname-chaos;</b> <b>hostname</b> <u>STR</u>
                      default: the host name

                     The string returned by a hostname-chaos TXT CH query.

              <b>keys-path;</b> <b>keyspath</b> <u>PATH</u>
                      default: zones/keys

                     The base path of the <u>dnssec</u> keys.

              <b>listen</b> <u>HOSTS</u>
                      default: 0.0.0.0,::0

                     The list of interfaces to listen to.

              <b>log-files-disabled</b> <u>FLAG</u>
                      default: no

                     If set, disables checking the log-path directory for existence and writing rights.

              <b>log-path;</b> <b>logpath</b> <u>PATH</u>
                      default: log

                     The base path where the log files are written.

              <b>log-unprocessable</b> <u>FLAG</u>
                      default: off

                     Enabling this flag will make the server log unprocessable queries.

              <b>max-tcp-queries;</b> <b>max-tcp-connections</b> <u>INT</u>
                      default: 16

                     The maximum number of parallel <u>tcp</u> queries; allowed. (MIN: 1; MAX: 255)

              <b>network-model</b> <u>NETMOD</u>
                      default: multi

                     Sets the networking model of yadifa.

              <b>pid-file;</b> <b>pidfile</b> <u>STR</u>
                      default: run/yadifad.pid

                     The pid file name.

              <b>queries-log-type</b> <u>INT</u>
                      default: 1

                     Query log format. (0: none; 1: <u>yadifa</u> format; 2: BIND format; 3: <u>yadifa</u> and BIND format  at
                     once)

              <b>serverid-chaos;</b> <b>serverid</b> <u>STR</u>
                      default: -

                     The string returned by a id.server. TXT CH query. If not set; REFUSED is answered.

              <b>server-port;</b> <b>port</b> <u>INT</u>
                      default: 53

                     The default <u>dns</u> port. (MIN: 1; MAX: 65535)

              <b>sig-validity-interval</b> <u>DAYS</u>
                      default: 30

                     The number of days for which an automatic signature is valid. (MIN: 7 days; MAX: 30 days)

              <b>sig-validity-jitter;</b> <b>sig-jitter</b> <u>SECONDS</u>
                      default: 3600

                     The signature expiration validity jitter in seconds (1 hour). (MIN: 0 sec; MAX: 86400 sec)

              <b>sig-validity-regeneration</b> <u>HOURS</u>
                      default: automatic

                     Signatures  expiring  in  less  than  the indicated amount of hours will be recomputed. The
                     default will be chosen by <u>yadifa</u>.  (MIN: 24 hours; MAX: 168 hours)

              <b>statistics</b> <u>FLAG</u>
                      default: true

                     The server will log a report line about some internal statistics.

              <b>statistics-max-period</b> <u>SECONDS</u>
                      default: 60

                     The period in seconds between two statistics log lines.  (MIN:  1  sec;  MAX:  31  *  86400
                     seconds (31 days))

              <b>tcp-query-min-rate</b> <u>INT</u>
                      default: 512 bytes/second

                     The minimum transfer rate required in a <u>tcp</u> connection (read and write). Slower connections
                     are closed. The units are bytes per second. (MIN: 0; MAX: 4294967295

              <b>thread-affinity-base</b> <u>INT</u>
                      default: 0

                     Sets the first CPU to set affinity for. Set it to the real CPU of a core. (MIN: 0; MAX: 3)

              <b>thread-affinity-multiplier</b> <u>INT</u>
                      default: 0

                     Sets  the  multiplier  choosing CPU to set affinity for. Allows avoiding hyperthread cores.
                     Set to 0 for automatic avoiding. (MIN: 0; MAX: 4)

              <b>thread-count-by-address</b> <u>INT</u>
                      default: -1

                     Number of independent threads used to  process  each  listening  address.  Set  to  -1  for
                     automatic. Set to 0 for single threaded. (MIN: -1; MAX: number of CPU's)

              <b>uid;</b> <b>user</b> <u>UID</u>
                      default: 0 (or root)

                     The user ID that the server will use.

              <b>version-chaos;</b> <b>version</b> <u>STR</u>
                      default: yadifa version#

                     The text to include in the version TXT CH query.

              <b>xfr-connect-timeout</b> <u>SECONDS</u>
                      default: 5

                     Timeout  for  establishing  a  connection for <u>axfr</u> and <u>ixfr</u> transfers. Set to 0 to disable.
                     (MIN: 0; MAX: 4294967295)

              <b>xfr-path;</b> <b>xfrpath</b> <u>PATH</u>
                      default: zones/xfr

                     The base path used for <u>axfr</u> and journal storage.

              <b>zone-download-thread-count</b> <u>INT</u>
                      default: 4

                     Number of independent threads used to download the zones. (MIN: 0; MAX: 255)

              <b>zone-load-thread-count</b> <u>INT</u>
                      default: 1

                     Number of independent threads used to process loading of the zones. (MIN: 0; MAX: 255)

              <b>zone-store-thread-count</b> <u>INT</u>
                      default: 1

                     Sets the number of threads used to store a zone on disk (MIN: 1, MAX: 4).

              <b>zone-unload-thread-count</b> <u>INT</u>
                      default: 1

                     Sets the number of threads used to delete a zone from memory (MIN: 1, MAX: 4).

              <b>worker-backlog-queue-size</b> <u>INT</u>
                      default: 16384

                     For network-model 1, sets the size of the backlog queue (MIN: 4096, MAX: 1048576).

       <b>&lt;key&gt;</b>
               TSIG keys

              <b>algorithm</b> <u>ENUM</u>
                      default: -

                     Mandatory. Sets the algorithm of the key.

                     Supported values are:

                        <u>hmac-md5</u>

                        <u>hmac-sha1</u>

                        <u>hmac-sha224</u>

                        <u>hmac-sha256</u>

                        <u>hmac-sha384</u>

                        <u>hmac-sha512</u>

                     (the algorithm names are case insensitive)}

              <b>name</b> <u>FQDN</u>
                      default: -

                     Mandatory. Sets the name of the key.

              <b>secret</b> <u>TEXT</u>
                      default: -

                     Mandatory. Sets the value of the key. BASE64 encoded.

       <b>&lt;acl&gt;</b>
               Access lists

       Each entry of the acl section defines a rule of access.  Each rule is a name (a single user-defined word)
       followed by a rule in the form of a list of statements. The separator can be "," or ";".  The  "any"  and
       "none"  names are reserved.  A statement tells if a source is accepted or rejected. Reject statements are
       prefixed with "!".  Statements are evaluated in the following order: first from  more  specific  to  less
       specific,  then  from reject to accept.  If a statement matches, the evaluation will stop and accordingly
       accept or reject the source.  If no statement matches, then the source is rejected.

       A statement can be either:

              <b>*</b>      An IPv4 or an IPv6 address followed (or not) by a mask.
                     [<u>!</u>]ipv4 |ipv6 [<u>/mask</u>]

                     For example:

                     <b>*</b>      internal-network 192.0.2.128/26;2001:DB8::/32

              <b>*</b>      The word `key' followed by the name of a TSIG key.
                     key key-name

                     For example:

                     <b>*</b>      slaves key public-slave;key hidden-slave

              <b>*</b>      An ACL statement name from the <u>acl</u> section. Note that negation and recursion are  forbidden
                     and duly rejected.
                     acl-name

                     For example:

                     <b>*</b>      who-can-ask-for-an-ixfr primary;secondaries;127.0.0.1

       <b>&lt;nsid&gt;</b>
               NameServer IDentifier

              <b>ascii</b>  <u>STR</u>
                      default: ""

                     The string can be 512 characters long.

              <b>hex</b>
                      default: ""

       <b>&lt;rrl&gt;</b>
               Response Rate Limiting directives

              <b>responses-per-second</b>  <u>INT</u>
                      default: 5

                     Allowed response rate.

              <b>errors-per-second</b>  <u>INT</u>
                      default: 5

                     Allowed error rate.

              <b>slip</b>  <u>INT</u>
                      default: 2

                     Random slip parameter.

              <b>log-only</b>  <u>FLAG</u>
                      default: false

                     If set to true, logs what it should do without doing it.

              <b>ipv4-prefix-length</b>  <u>INT</u>
                      default: 24

                     Mask applied to group the IPv4 clients.

              <b>ipv6-prefix-length</b>  <u>INT</u>
                      default: 56

                     Mask applied to group the IPv6 clients.

              <b>exempt-clients</b>  <u>ACL</u>
                      default: none

                     Clients matching this rule are not subject to the RRL.

              <b>enabled</b>  <u>FLAG</u>
                      default: false

                     Enables the RRL

              <b>min-table-size</b>  <u>INT</u>
                      default: 1024

                     RRL buffer minimum size

              <b>max-table-size</b>  <u>INT</u>
                      default: 16384

                     RRL buffer maximum size

              <b>window</b>  <u>INT</u>
                      default: 15

                     RRL sliding window size in seconds

       <b>&lt;zone&gt;</b>
               Description of the domain name in specific attributes.

              <b>allow-control</b> <u>ACL</u>
                      default: as main

                     Control commands control list. Only the matching sources are allowed.

              <b>allow-notify</b> <u>ACL</u>
                      default: as main

                     Notify access control list. Only the servers matching the ACL will be handled.

              <b>allow-query</b> <u>ACL</u>
                      default: as main

                     Query access control list. Only the clients matching the ACL will be replied to.

              <b>allow-transfer</b> <u>ACL</u>
                      default: as main

                     Tansfer  access control list. Only the clients matching the ACL will be allowed to transfer
                     a zone (<u>axfr</u>/<u>ixfr</u>

              <b>allow-update</b> <u>ACL</u>
                      default: as main

                     Update access control list. Only the clients matching the ACL will be allowed to  update  a
                     zone.

              <b>allow-update-forwarding</b> <u>ACL</u>
                      default: as main

                     Update forwarding control list. Only the matching sources are allowed.

              <b>dnssec-mode;</b> <b>dnssec</b> <u>DNSSEC-TYPE</u>
                      default: off

                     Type  of  <u>dnssec</u> used for the zone. As primary name sever; <u>yadifa</u> will try to maintain that
                     state.

              <b>dnssec-policy</b> <u>STR</u>
                      default: -

                     Sets the dnssec-policy id to be used.

              <b>domain</b> <u>FQDN</u>
                      default: -

                     Mandatory. Sets the domain of the zone (i.e.: eurid.eu).

              <b>drop-before-load</b> <u>FLAG</u>
                      default: off

                     Enabling this flag will make the server drop the zone before loading the updated zone  from
                     disk. Use this on systems constrained for RAM.

              <b>file-name;</b> <b>file</b> <u>FILE</u>
                      default: -

                     Sets the zone file name. Only mandatory for a primary zone.

              <b>journal-size-kb</b> <u>INT</u>
                      default: 0

                     Puts a soft limit on the size of the journal; expressed in KB. (MIN: 0; MAX: 3698688 (3GB))

              <b>keys-path;</b> <b>keyspath</b> <u>PATH</u>
                      default: as main

                     The base path of the <u>dnssec</u> keys.

              <b>maintain-dnssec</b> <u>FLAG</u>
                      default: true

                     Enabling this flag will cause the server to try and maintain <u>rrsig</u> records

              <b>primaries;</b> <b>primary;</b> <b>masters;</b> <b>master</b> <u>HOSTS</u>
                      default: -

                     Mandatory for a secondary. Sets the primary server(s). Multiple primaries are supported.

              <b>multiprimary-retries;</b> <b>multimaster-retries</b> <u>INT</u>
                      default: 0

                     The  number  of  times  the  primary is unreachable before switching to a different primary
                     (MIN: 0; MAX: 255)

              <b>no-primary-updates;</b> <b>no-master-updates</b> <u>FLAG</u>
                      default: false

                     Enabling this flag will prevent the server from probing or  downloading  changes  from  the
                     primary

              <b>notifies;</b> <b>also-notify;</b> <b>notify</b> <u>HOSTS</u>
                      default: -

                     The  list  of  servers to notify in the event of a change. Currently only used by primaries
                     when a dynamic update occurs.

              <b>notify-auto</b> <u>FLAG</u>
                      default: true

                     Enabling this flag will cause <u>notify</u> messages to be sent to all name servers in  the  APEX.
                     Disabling this flags causes the content of APEX to be ignored (<u>ns</u> Records).

              <b>notify-retry-count</b> <u>INT</u>
                      default: 5

                     Number of times <u>yadifa</u> tries to send a <u>notify</u>.  (MIN: 0; MAX: 10)

              <b>notify-retry-period</b> <u>INT</u>
                      default: 1

                     Time period in minutes between two <u>notify</u> attempts. (MIN: 1; MAX: 600)

              <b>notify-retry-period-increase</b> <u>INT</u>
                      default: 0

                     Increase of the time period in minutes between two <u>notify</u> attempts. (MIN: 0; MAX: 600)

              <b>rrsig-nsupdate-allowed</b> <u>FLAG</u>
                      default: false

                     If this flag is set the server allows one to edit RRSIG records using dynamic updates.

              <b>sig-validity-interval</b> <u>DAYS</u>
                      default: as main

                     The number of days for which an automatic signature is valid. (MIN: 7 days; MAX: 30 days)

              <b>sig-validity-regeneration</b> <u>HOURS</u>
                      default: as main

                     The  signatures  expiring  in  less  than the indicated amount of hours will be recomputed.
                     (MIN: 24 hours; MAX: 168 hours)

              <b>sig-validity-jitter</b> <u>SECONDS</u>
                      default: as main

                     The signature expiration validity jitter in seconds. (MIN: 0 sec; MAX: 86400 sec)

              <b>true-multiprimary;</b> <b>true-multimaster</b> <u>FLAG</u>
                      default: off

                     Enabling this flag will make the server use <u>axfr</u> when switching to a new primary

              <b>type</b> <u>ENUM</u>
                      default: -

                     Mandatory. Sets the type of zone : either <u>primary</u>/<u>master</u> or <u>secondary</u>/<u>slave</u>.

       <b>&lt;channels&gt;</b>
               Description of the logger outputs.

       It contains a list descriptions of user-defined outputs for the logger.  Depending on the kind of output,
       the format is different.

       The "name" is arbitrary and is used for identification in the &lt;loggers&gt;.
       The "stream-name" defines the output type (ie: a file name, a program output or syslog).
       The "arguments" are specific to the output type (ie: unix  file  access  rights  or  syslog  options  and
       facilities).

              <b>*</b>      file output stream channel-name file-name access-rights (octal).

              <b>*</b>      pipe  to  a  program channel-name "| shell command" channel-name "| path-to-program program
                     arguments &gt;&gt; append-redirect"

              <b>*</b>      STDOUT, STDERR output stream channel-name stdout channel-name stderr

              <b>*</b>      syslog channel-name syslog syslog-facility

       <b>&lt;loggers&gt;</b>
               Description of the logger outputs sources.

       Sets the output of a pre-defined logger from yadifad.

       The format of the line is: logger-name output-filter comma-separated-channel-names

       Filters are:
       <u>DEBUG7</u>, <u>DEBUG6</u>, <u>DEBUG5</u>, <u>DEBUG4</u>, <u>DEBUG3</u>, <u>DEBUG2</u>, <u>DEBUG1</u>, <u>DEBUG</u>, <u>INFO</u>, <u>NOTICE</u>, <u>WARNING</u>, <u>ERR</u>,  <u>CRIT</u>,  <u>ALERT</u>,
       <u>EMERG</u>

       Additionally, there are:

              <b>*</b>      <u>ALL</u> (or '<u>*</u>') meaning all the filters.

              <b>*</b>      <u>PROD</u> means all but the DEBUG filters.

              The defined loggers are:

              <b>system</b>
                      contains  low  level  messages about the system such as memory allocation, threading, IOs,
                     timers and cryptography, ...

              <b>database</b>
                      It contains messages about most lower-level operations in the DNS database.  ie:  journal,
                     updates, zone loading and sanitization, DNS message query resolution, ...)

              <b>dnssec</b>
                      contains  messages  about  lower-level  dnssec operations in the DNS database. ie: status,
                     maintenance, verification, ...

              <b>server</b>
                      contains  messages  about  operations  in  the  DNS  server.  ie:  start   up,   shutdown,
                     configuration, transfers, various services status (database management, network management,
                     DNS notification management, dynamic update management, resource rate limiting, ...)

              <b>zone</b>
                      contains  messages  about  the  loading of a zone from a source (file parsing, transferred
                     binary zone reading, ...)

              <b>stats</b>
                      contains the statistics of the server.

              <b>queries</b>
                      contains the queries on the server.  Queries can be logged with the BIND and/or  with  the
                     YADIFA format.
                     <b>BIND</b> <b>format:</b>
                     client sender-ip#port: query: fqdn class type +SETDC (listen-ip)
                     <b>YADIFA</b> <b>format:</b>
                     query [ id ] {+SETDC} fqdn class type (sender-ip#port)
                     where:

                     id     is the query message id

                     +      means the message has the Recursion Desired flag set

                     S      means the message is signed with a TSIG

                     E      means the message is EDNS

                     T      means the message was sent using TCP instead of UDP

                     D      means the message has the DNSSEC OK flag set

                     C      means the message has the Checking Disabled flag set

                     fqdn   is the queried FQDN

                     class  is the queried class

                     type   is the queried type

                     sender-ip
                            is the IP of the client that sent the query

                     port   is the port of the client that sent the query

                     listen-ip
                            is the listen network interface that received the message

                     Note  that on YADIFA any unset flag is replaced by a '-', on BIND only the '+' follows that
                     rule.

              System operators will mostly be interested in the info and above messages of queries and stats, as
              well as the error and above messages of the other loggers.

   <b>DNSSEC-POLICY</b>
       There are 5 sections:

       <b>&lt;dnssec-policy&gt;</b>
               The dnssec-policy section binds up to four key suites and a denial mode. It is meant to  be  used
              as  a  dnssec-policy  parameter in a zone section.  Usually two key-suite will be given: one for a
              KSK and one for a ZSK. The denial mode can be either 'nsec' either the name of a denial section.

              <b>id</b> <u>STR</u>
                      default: -

                     <u>id</u> of the dnssec-policy section.

              <b>description</b> <u>STR</u>
                      default: -

                     Description for the dnssec-policy section.

              <b>key-suite</b> <u>STR</u>
                      default: -

                     <u>id</u> of the <u>key-suite</u> to be used. Usually both a KSK and a ZSK suites are given.

              <b>denial</b> <u>STR</u>
                      default: nsec

                     <u>id</u> of the <u>denial</u> to be used for <u>nsec3</u> or the argument 'nsec' to use <u>nsec</u>.

       <b>&lt;key-suite&gt;</b>
               The key-suite section is used by dnssec policies and is meant to be referenced by a dnssec-policy
              section.  A key-suite links a key definition (key-template) with a deployment calendar (key-roll).

              <b>id</b> <u>STR</u>
                      default: -

                     <u>id</u> of the key-suite section.

              <b>key-template</b> <u>STR</u>
                      default: -

                     <u>id</u> of the <u>key-template</u> to be used.

              <b>key-roll</b> <u>STR</u>
                      default: -

                     <u>id</u> of the <u>key-roll</u> to be used.

       <b>&lt;key-roll&gt;</b>
               The key-roll section is used by dnssec policies and is meant to  be  referenced  by  a  key-suite
              section.   It's  essentially a deployment calendar.  Each event is computed relatively to another.
              Dates are chosen so that there is always a key in an active state. Please look at the examples  as
              a  misconfiguration  could  easily  span  the  life  of  a  key  over several years. (e.g.: by too
              restrictive on the matching conditions) If the RELDATE format is being used, the first valid  date
              matching the line is used. Usage of the RELDATE format is recommended over the RELTIME one.

              <b>id</b> <u>RELDATE|RELTIME</u>
                      default: -

                     <u>id</u> of the key-roll section.

              <b>generate</b> <u>RELDATE|RELTIME</u>
                      default: -

                     Time  when the key must be generated. Pre-dated before so it's active right now if it's the
                     first  one.  Always  computed  so  that  the  next  activation  happens  before  the   last
                     deactivation.

              <b>publish</b> <u>RELDATE|RELTIME</u>
                      default: -

                     Time when the key must be published in the zone. Relative to the generation.

              <b>activate</b> <u>RELDATE|RELTIME</u>
                      default: -

                     Time  when  the  key will be used for signing the zone or apex of the zone. Relative to the
                     publication.

              <b>inactive</b> <u>RELDATE|RELTIME</u>
                      default: -

                     Time when the key will not be used anymore for signing. Relative to the activation.

              <b>delete</b> <u>RELDATE|RELTIME</u>
                      default: -

                     Time when the key will be removed out of the zone. Relative to the deactivation.

       <b>&lt;key-template&gt;</b>
               The key-template section is used by dnssec policies and is meant to be referenced by a  key-suite
              section.  It contains the various parameters of a key for its generation.

              <b>id</b> <u>STR</u>
                      default: -

                     <u>id</u> of the key-template section.

              <b>ksk</b> <u>FLAG</u>
                      default: false

                     When this flag is enabled a <u>ksk</u> will be generated. When disabled a <u>zsk</u> will be generated.

              <b>algorithm</b> <u>ENUM</u>
                      default: 7

                     Sets the algorithm of the key. Supported values are: <u>’DSA’</u>; <u>3</u>; <u>’RSASHA1’</u>; <u>5</u>; <u>’NSEC3DSA’</u>; <u>6</u>;
                     <u>’NSEC3RSASHA1’</u>;    <u>7</u>;    <u>’RSASHA256’</u>;    <u>8</u>;   <u>’RSASHA512’</u>;   <u>10</u>;   <u>’ECDSAP256SHA256’</u>;   <u>13</u>;
                     <u>’ECDSAP384SHA384’</u>; <u>14</u>.

              <b>size</b> <u>INT</u>
                      default: 0

                     The length of the key in bits (incompatible sizes will be rejected). (MIN: 0; MAX: 4096)

       <b>&lt;denial&gt;</b>
               The denial section is used by dnssec policies and is meant to be referenced  by  a  dnssec-policy
              section.   It  is  used to define the NSEC3 denial parameters of a dnssec policy. Policies using a
              NSEC denial don't need to use this section.

              <b>id</b> <u>STR</u>
                      default: -

                     <u>id</u> of the denial section.

              <b>salt</b> <u>HEXSTR</u>
                      default: empty

                     A base16 encoded sequence of bytes used as the salt parameter of the NSEC3 chain.

              <b>salt-length</b> <u>INT</u>
                      default: 0

                     If the salt parameter isn't set, generates a random salt parameter of that length. (MIN: 0;
                     MAX: 255)

              <b>iterations</b> <u>INT</u>
                      default: 1

                     Iteration parameter of the NSEC3 chain. (MIN: 0; MAX: 65535)

              <b>optout</b> <u>FLAG</u>
                      default: false

                     Enables opt-out coverage in the NSEC3 chain. When this flag is enabled,  delegations  which
                     do not have a DS record will not be covered by an NSEC3 record.

</pre><h4><b>EXAMPLES</b></h4><pre>
       Examples of containers defined for a configuration file.

       <b>*</b>      Main

              1.     Main section example

                     &lt;main&gt;
                         # Detach from the console (alias: daemonize)
                         daemon                  off

                         # Jail the application
                         chroot                  off

                         # The path of the log files (alias: chroot-path)
                         chrootpath              "/chroot/yadifad"

                         # The path of the log files (alias: log-path)
                         logpath                 "/var/log/yadifa"

                         # The location of the pid file (alias: pid-file)
                         pidfile                 "/var/run/yadifa/yadifad.pid"

                         # The path of the zone files (alias: data-path)
                         datapath                "/var/lib/yadifa"

                         # The path of the DNSSEC keys (alias: keys-path)
                         keyspath                "/var/lib/yadifa/keys"

                         # The path of the transfer and journaling files (AXFR &amp; IXFR) (alias: xfr-path)
                         xfrpath                 "/var/lib/yadifa/xfr"

                         # A string returned by a query of hostname. CH TXT
                         # note: if you leave this out, the real hostname will be given back (alias: hostname-chaos)
                         hostname                "server-yadifad"

                         # An ID returned by a query to id.server. CH TXT (alias: serverid-chaos)
                         serverid                "yadifad-01"

                         # The version returned by a query to version.yadifa. CH TXT (alias: version-chaos)
                         version                 {3.0.2}

                         # Set the maximum UDP packet size.
                         # note: the packetsize cannot be less than 512 or more than 65535.
                         #       Typical choice is 4096.
                         edns0-max-size          4096

                         # The maximum number of parallel TCP queries (max-tcp-connections)
                         max-tcp-queries         100

                         # The minimum data rate for a TCP query (in bytes per second)
                         tcp-query-min-rate      512

                         # The user id to use (alias: user)
                         uid                     yadifa

                         # The group id to use (alias: group)
                         gid                     yadifa

                         # The DNS port - any DNS query will use that port unless a specific value is used (alias: server-port)
                         port                    53

                         # The interfaces to listen to.
                         listen                  127.0.0.1, 192.0.2.2, 192.0.2.130 port 8053, 2001:db8::2

                         # Type of querylog to use
                         #   0: none
                         #   1: yadifa
                         #   2: bind
                         #   3: both yadifa and bind
                         queries-log-type        1

                         # Enable the collection and logging of statistics
                         statistics              on

                         # Maximum number of seconds between two statistics lines
                         statistics-max-period   60

                         # Drop queries with erroneous content
                         #
                         # answer-formerr-packets on
                         answer-formerr-packets  off

                         # Maximum number of records in an AXFR packet. Set to 1 for compatibility
                         # with very old name servers (alias: axfr-max-record-by-packet)
                         axfr-maxrecordbypacket  0

                         # Global Access Control rules
                         #
                         # Rules can be defined on network ranges, TSIG signatures, and ACL rules

                         # simple queries:
                         #
                         # allow-query any
                         allow-query             !192.0.2.251,any

                         # dynamic update of a zone
                         #
                         # allow-update none
                         allow-update            admins

                         # dynamic update of a secondary (forwarded to the primary)
                         #
                         # allow-update-forwarding   none
                         allow-update-forwarding admins,key abroad-admin-key

                         # transfer of a zone (AXFR or IXFR)
                         #
                         # allow-transfer any
                         allow-transfer          transferer

                         # notify of a change in the primary
                         #
                         # allow-notify any
                         allow-notify            primary,admins

                         # If YADIFA has the controller enabled, allow control only for these
                         # clients (none by default)
                         allow-control           controller

                         # overwrite the amount of CPUs detected by yadifad
                         cpu-count-override 3

                         # set the number of threads to serve queries
                         thread-count-by-address 2

                     &lt;/main&gt;

       <b>*</b>      Key
              TSIG-key configuration

              1.     Admin-key key definition (the name is arbitrary)

                     &lt;key&gt;
                         name        abroad-admin-key
                         algorithm   hmac-md5
                         secret      WorthlessKeyForExample==
                     &lt;/key&gt;

              2.     primary-secondary key definition (the name is arbitrary)

                     &lt;key&gt;
                         name        primary-secondary
                         algorithm   hmac-md5
                         secret      PrimaryAndSecondaryKey==
                     &lt;/key&gt;

       <b>*</b>      ACL
              Access Control List definitions

              1.     primary-secondary key use

                     &lt;acl&gt;
                         transferer  key primary-secondary
                         admins      192.0.2.0/24, 2001:db8::74
                         primary     192.0.2.53
                         localhost   127.0.0.0/8, ::1
                         controller  key controller # the ACL for the controller MUST use a key
                     &lt;/acl&gt;

       <b>*</b>      NSID
              DNS NameServer IDentifier

              1.     Example with ascii

                     &lt;nsid&gt;
                         ascii belgium-brussels-01
                     &lt;/nsid&gt;

              2.     Example with hex

                     &lt;nsid&gt;
                         hex 00320201
                     &lt;/nsid&gt;

       <b>*</b>      RRL
              Response Rate Limiting

              1.     Example

                     &lt;rrl&gt;
                         # Number of identical responses per second before responses are being limited
                         responses-per-second    5

                         # Number of errors per second before responses are being limited
                         errors-per-second       5

                         # Random slip parameter
                         slip                    10

                         # If enabled, the rate limits are only logged and not enforced
                         log-only                off

                         # Mask applied to group the IPv4 clients
                         ipv4-prefix-length      24

                         # Mask applied to group the IPv6 clients
                         ipv6-prefix-length      56

                         # Rate limits are not subject to the following clients (aka whitelist)
                         exempt-clients          none

                         # Enable or disable the rate limit capabilities
                         enabled                 yes
                     &lt;/rrl&gt;

       <b>*</b>      Zone

              1.     Primary domain zone config

                     &lt;zone&gt;
                         # This server is primary for the zone (mandatory)
                         type            primary

                         # The domain name (mandatory)
                         domain          mydomain.eu

                         # The zone file, relative to 'datapath'  (mandatory for a primary) (alias: file-name)
                         file            primaries/mydomain.eu

                         # List of servers also notified of a change (beside the ones in the zone file) (alias: notifies, notify)
                         also-notify     192.0.2.84, 192.0.2.149

                         # Set the size of the journal file in KB (alias: journal-size-kb)
                         journal-size    8192

                         # Allow dynupdate for these ACL entries
                         allow-update    admins

                         # Allow AXFR/IXFR for these ACL entries
                         allow-transfer  transferer

                         # Use DNSSEC policies otherwise remove or put in remark line below
                         dnssec-policy   1
                     &lt;/zone&gt;

              2.     Slave domain zone config

                     &lt;zone&gt;
                         # This server is slave for that zone (mandatory)
                         type            slave

                         # The domain name (mandatory)
                         domain          myotherdomain.eu

                         # The address of the primary (mandatory for a secondary, forbidden for a primary) (alias: primary)
                         primaries       191.0.2.53 port 4053 key primary-secondary

                         # The zone file, relative to 'datapath'.
                         file            slaves/myotherdomain.eu

                         # Accept notifes from these ACL entries
                         allow-notify    primary
                     &lt;/zone&gt;

       <b>*</b>      DNSSEC-Policy

       DNSSEC-Policy  needs  some  extra  sections:  key-suite,  key-roll,  key-template (and denial if NSEC3 is
       configured)

              1.     dnssec-policy example with all the needed sections

                     example with NSEC3
                     &lt;dnssec-policy&gt;
                         id              "1"

                         description     "Example of ZSK and KSK"
                         denial          "nsec3-with-salt-on"
                         key-suite       "zsk-1024"
                         key-suite       "ksk-2048"
                     &lt;/dnssec-policy&gt;

                     example with NSEC
                     &lt;dnssec-policy&gt;
                         id              "2"

                         description     "Example of ZSK and KSK"
                         denial          nsec
                         key-suite       "zsk-1024"
                         key-suite       "ksk-2048"
                     &lt;/dnssec-policy&gt;

              2.     key-suite
                     &lt;key-suite&gt;
                         id              "ksk-2048"

                         key-template    "ksk-2048"
                         key-roll        "yearly-schedule"
                     &lt;/key-suite&gt;

                     &lt;key-suite&gt;
                         id              "zsk-1024"

                         key-template    "zsk-1024"
                         key-roll        "monthly-schedule"
                     &lt;/key-suite&gt;

              3.     key-roll
                     &lt;key-roll&gt;
                         id                 "yearly-schedule"

                         generate            5          0           15                  6            *                 * # this year   (2018) 15/06 at 00:05
                         publish             10         0           15                  6            *                 * #                             00:10
                         activate            15         0           16                  6            *                 * #                    16/06 at 00:15
                         inactive            15         0           17                  6            *                 * #             (2019) 17/06 at 00:15
                         remove              15        11           18                  6            *                 * #             (2019) 18/06 at 11:15
                     &lt;/key-roll&gt;

                     &lt;key-roll&gt;
                         id                 "monthly-schedule"

                         generate            5          0           *                   *            tue               0 # 1 tuesday   of the month at 00:05
                         publish             10         0           *                   *            tue               0 #                             00:10
                         activate            15         0           *                   *            wed               0 # 1 wednesday of the month at 00:15
                         inactive            15         0           *                   *            thu               0 # 1 thursday  of the month at 00:15
                         remove              15        11           *                   *            fri               0 # 1 friday    of the month at 11:15
                     &lt;/key-roll&gt;

              4.     key-template
                     &lt;key-template&gt;
                         id              "ksk-2048"

                         ksk             true
                         algorithm       8
                         size            2048
                     &lt;/key-template&gt;

                     &lt;key-template&gt;
                         id              "zsk-1024"

                         ksk             false
                         algorithm       8
                         size            1024
                     &lt;/key-template&gt;

              5.     denial
                     &lt;denial&gt;
                         id              "nsec3-with-salt-on"

                         salt            "ABCD"
                         algorithm       1
                         iterations      5
                         optout          off
                     &lt;/denial&gt;

                     &lt;denial&gt;
                         id              "nsec3-with-salt-length-on"

                         salt-length     4
                         algorithm       1
                         iterations      5
                         optout          off
                     &lt;/denial&gt;

       <b>*</b>      Channels

       Logging output-channel configurations:

       It contains a list of user-defined outputs for the logger.

       The "name" is arbitrary and is used for identification in the &lt;loggers&gt;.
       The "stream-name" defines the output type (ie: a file name, a program output or syslog).
       The "arguments" are specific to the output type (ie: unix  file  access  rights  or  syslog  options  and
       facilities).

              1.     Example: YADIFA running as daemon channel definition.

                     &lt;channels&gt;
                     #   name        stream-name     arguments
                         database    database.log    0644
                         dnssec      dnssec.log      0644
                         server      server.log      0644
                         statistics  statistics.log  0644
                         system      system.log      0644
                         queries     queries.log     0644
                         zone        zone.log        0644
                         all         all.log         0644

                         gziplog     "|<a href="file:///usr/lib/w3m/cgi-bin/w3mman2html.cgi?gzip">/usr/bin/gzip</a> \- &gt;&gt; /var/log/yadifa.log.gz"

                         syslog      syslog          user
                     &lt;/channels&gt;

              2.     Example: YADIFA running in debug mode.
                     This  example  shows the "stderr" and "stdout" which can also be used in the first example,
                     but will output to the console.

                     &lt;channels&gt;
                     #   name        stream-name     arguments
                         syslog      syslog          user

                         stderr      STDERR
                         stdout      STDOUT
                     &lt;/channels&gt;

       <b>*</b>      Loggers

       Logging input configurations:

       The "bundle" is the name of the section of YADIDA being logged, sources are : database, dnssec,  queries,
       server, stats, system, zone.
       The "debuglevel" uses the same names as syslog.
       Additionally, "*" or "all" means all the levels; "prod" means all but the debug levels.

       The "channels" are a comma-separated list of channels.

              1.     Example without syslog

                     &lt;loggers&gt;
                     #   bundle          debuglevel                          channels
                         database        ALL                                 database,all
                         dnssec          warning                             dnssec,all
                         server          INFO,WARNING,ERR,CRIT,ALERT,EMERG   server,all
                         stats           prod                                statistics
                         system          *                                   system,all
                         queries         *                                   queries
                         zone            *                                   zone,all
                     &lt;/loggers&gt;

              2.     Example with syslog

                     &lt;loggers&gt;
                     #   bundle          debuglevel                          channels
                         database        ALL                                 database,syslog
                         dnssec          warning                             dnssec,syslog
                         server          INFO,WARNING,ERR,CRIT,ALERT,EMERG   server,syslog
                         stats           prod                                statistics, syslog
                         system          *                                   system,syslog
                         queries         *                                   queries,syslog
                         zone            *                                   zone,syslog
                     &lt;/loggers&gt;

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <u><a href="../man8/yadifad.8.html">yadifad</a></u>(8)

</pre><h4><b>NOTES</b></h4><pre>
       Since  unquoted  leading whitespace is generally ignored in the yadifad.conf you can indent everything to
       taste.

</pre><h4><b>CHANGES</b></h4><pre>
       Please check the file README from the sources.

</pre><h4><b>VERSION</b></h4><pre>
       Version: 3.0.2 of 2025-03-11.

</pre><h4><b>MAILING</b> <b>LISTS</b></h4><pre>
       There exists a mailinglist for questions relating to any program in the yadifa package:

       <b>*</b>      <b><a href="mailto:yadifa-users@mailinglists.yadifa.eu">yadifa-users@mailinglists.yadifa.eu</a></b>
              for submitting questions/answers.

       <b>*</b>      <b><a href="http://www.yadifa.eu/mailing-list-users">http://www.yadifa.eu/mailing-list-users</a></b>
              for subscription requests.

       If you would like to stay informed about new versions and official patches send a subscription request to
       via:

       <b>*</b>      <b><a href="http://www.yadifa.eu/mailing-list-announcements">http://www.yadifa.eu/mailing-list-announcements</a></b>

       (this is a readonly list).

</pre><h4><b>LICENSE</b> <b>AND</b> <b>COPYRIGHT</b></h4><pre>
       Copyright
              (C)2011-2023", EURid
              B-1831 Diegem, Belgium
              <b><a href="mailto:info@yadifa.eu">info@yadifa.eu</a></b>

</pre><h4><b>AUTHORS</b></h4><pre>
       Gery Van Emelen
       Email: <b><a href="mailto:Gery.VanEmelen@EURid.eu">Gery.VanEmelen@EURid.eu</a></b>
       Eric Diaz Fernandez
       Email: <b><a href="mailto:Eric.DiazFernandez@EURid.eu">Eric.DiazFernandez@EURid.eu</a></b>

       WWW: <b><a href="http://www.EURid.eu">http://www.EURid.eu</a></b>

YADIFA                                             2025-03-11                                    <u><a href="../man5/YADIFAD-CONF.5.html">YADIFAD-CONF</a></u>(5)
</pre>
 </div>
</div></section>
</div>
</body>
</html>