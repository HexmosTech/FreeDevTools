<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ctdb.conf - CTDB configuration file</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/ctdb">ctdb_4.22.3+dfsg-4ubuntu1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       ctdb.conf - CTDB configuration file

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This file contains CTDB configuration options that affect the operation of CTDB daemons and command-line
       tools. The default location of this file is /etc/ctdb/ctdb.conf.

       Note that this is a Samba-style configuration file, so it has a very different syntax to previous CTDB
       configuration files.

       For event script options please see <b><a href="../man5/ctdb-script.options.5.html">ctdb-script.options</a></b>(5).

       Configuration options are grouped into several sections below. There are only a few options in each
       section, allowing them to be ordered (approximately) in decreasing order of importance.

</pre><h4><b>LOGGING</b> <b>CONFIGURATION</b></h4><pre>
       Options in this section control CTDB's logging. They are valid within the <u>logging</u> section of file,
       indicated by [logging].

       log level = <u>LOGLEVEL</u>
           LOGLEVEL is a string that controls the verbosity of ctdbd's logging. See the LOG LEVELS section in
           <b><a href="../man7/ctdb.7.html">ctdb</a></b>(7) for more details.

           Default: NOTICE

       location = <u>STRING</u>
           STRING specifies where ctdbd will write its log.

           Valid values are:

           file:<u>FILENAME</u>
               FILENAME where ctdbd will write its log. This is usually /var/log/ctdb/log.ctdb.

           syslog[:<u>METHOD</u>]
               CTDB will log to syslog. By default this will use the <a href="../man3/syslog.3.html">syslog</a>(3) API.

               If METHOD is specified then it specifies an extension that causes logging to be done in a
               non-blocking fashion. This can be useful under heavy loads that might cause the syslog daemon to
               dequeue messages too slowly, which would otherwise cause CTDB to block when logging. METHOD must
               be one of:

               nonblocking
                   CTDB will log to syslog via /dev/log in non-blocking mode.

               udp
                   CTDB will log to syslog via UDP to localhost:514. The syslog daemon must be configured to
                   listen on (at least) localhost:514. Most implementations will log the messages against
                   hostname "localhost" - this is a limit of the implementation for compatibility with more
                   syslog daemon implementations.

               udp-rfc5424
                   As with "udp" but messages are sent in RFC5424 format. This method will log the correct
                   hostname but is not as widely implemented in syslog daemons.

           Default: file:/var/log/ctdb/log.ctdb

</pre><h4><b>CLUSTER</b> <b>CONFIGURATION</b></h4><pre>
       Options in this section affect the CTDB cluster setup. They are valid within the <u>cluster</u> section of file,
       indicated by [cluster].

       cluster lock = <u>LOCK</u>
           LOCK specifies the cluster-wide mutex used to detect and prevent a partitioned cluster (or "split
           brain").

           For information about the cluster lock please see the CLUSTER LOCK section in <b><a href="../man7/ctdb.7.html">ctdb</a></b>(7).

           Default: NONE. However, uses of a cluster lock is <u>strongly</u> <u>recommended</u>.

       leader capability = true|false
           Indicates whether a node can become the leader for the cluster. If this is set to false then the node
           will not be able to become the leader for the cluster. This feature is primarily used for making a
           cluster span across a WAN link and use CTDB as a WAN-accelerator.

           Please see the REMOTE CLUSTER NODES section in <b><a href="../man7/ctdb.7.html">ctdb</a></b>(7) for more information.

           Default: true

       leader timeout = <u>SECONDS</u>
           Number of SECONDS without a leader broadcast before a node triggers an election.

           Default: 5

       node address = <u>IPADDR</u>
           IPADDR is the private IP address that ctdbd will bind to.

           This option is only required when automatic address detection can not be used. This can be the case
           when running multiple ctdbd daemons/nodes on the same physical host (usually for testing) or using
           InfiniBand for the private network. Another unlikely possibility would be running on a platform with
           a feature like Linux's net.ipv4.ip_nonlocal_bind=1 enabled and no usable <a href="../man3/getifaddrs.3.html">getifaddrs</a>(3) implementation
           (or replacement) available.

           Default: CTDB selects the first address from the nodes list that it can bind to. See also the PRIVATE
           ADDRESS section in <b><a href="../man7/ctdb.7.html">ctdb</a></b>(7).

       nodes list = <u>SOURCE</u>
           SOURCE specifies the location containing the list of the private addresses of nodes in the cluster.

           Typically, SOURCE will be a path to a file that contains the list of private addresses for the
           cluster. For details about the content of the file please see the PRIVATE ADDRESSES section in
           <b><a href="../man7/ctdb.7.html">ctdb</a></b>(7).

           As an alternative to using a file one can use an arbitrary command to provide the contents of the
           nodes list. If an exclamation point ('!') is the first character of the SOURCE value, the remainder
           of the value will be executed when the private addresses are to be read. For example, a value of
           <b>!/usr/bin/mynodes</b> <b>cluster1</b> would run the given command with the specified arguments. The output
           generated by the command (on standard out) must be the same as what is supported by a SOURCE file.
           The command name must be a full path to an executable. Arguments are supported, but shell-style
           quoting is not, and space characters will always produce a new argument for the command. It is
           important to note that running this command blocks until the command has completed. The run time of
           this command will depend on how it is implemented and environmental factors. Be aware that if the
           command runs for a non-trivial amount of time it can introduce undesirable stalls into ctdbd.

           Default: /etc/ctdb/nodes

       transport = tcp|ib
           This option specifies which transport to use for ctdbd internode communications on the private
           network.

           ib means InfiniBand. The InfiniBand support is not regularly tested. If it is known to be broken then
           it may be disabled so that a value of ib is considered invalid.

           Default: tcp

</pre><h4><b>DATABASE</b> <b>CONFIGURATION</b></h4><pre>
       Options in this section affect the CTDB database setup. They are valid within the <u>database</u> section of
       file, indicated by [database].

       volatile database directory = <u>DIRECTORY</u>
           DIRECTORY on local storage where CTDB keeps a local copy of volatile TDB databases. This directory is
           local for each node and should not be stored on the shared cluster filesystem.

           Mounting a tmpfs (or similar memory filesystem) on this directory can provide a significant
           performance improvement when there is I/O contention on the local disk.

           Default: /var/lib/ctdb/volatile

       persistent database directory=<u>DIRECTORY</u>
           DIRECTORY on local storage where CTDB keeps a local copy of persistent TDB databases. This directory
           is local for each node and should not be stored on the shared cluster filesystem.

           Default: /var/lib/ctdb/persistent

       state database directory = <u>DIRECTORY</u>
           DIRECTORY on local storage where CTDB keeps a local copy of internal state TDB databases. This
           directory is local for each node and should not be stored on the shared cluster filesystem.

           Default: /var/lib/ctdb/state

       tdb mutexes = true|false
           This parameter enables TDB_MUTEX_LOCKING feature on volatile databases if the robust mutexes are
           supported. This optimizes the record locking using robust mutexes and is much more efficient that
           using posix locks.

           If robust mutexes are unreliable on the platform being used then they can be disabled by setting this
           to false.

       lock debug script = <u>FILENAME</u>
           FILENAME is a script used by CTDB's database locking code to attempt to provide debugging information
           when CTDB is unable to lock an entire database or a record.

           This script should be a bare filename relative to the CTDB configuration directory (/etc/ctdb/). Any
           directory prefix is ignored and the path is calculated relative to this directory.

           CTDB provides a lock debugging script and installs it as /etc/ctdb/debug_locks.sh.

           Default: NONE

</pre><h4><b>EVENT</b> <b>HANDLING</b> <b>CONFIGURATION</b></h4><pre>
       Options in this section affect CTDB event handling. They are valid within the <u>event</u> section of file,
       indicated by [event].

       debug script = <u>FILENAME</u>
           FILENAME is a script used by CTDB's event handling code to attempt to provide debugging information
           when an event times out.

           This script should be a bare filename relative to the CTDB configuration directory (/etc/ctdb/). Any
           directory prefix is ignored and the path is calculated relative to this directory.

           CTDB provides a script for debugging timed out event scripts and installs it as
           /etc/ctdb/debug-hung-script.sh.

           Default: NONE

</pre><h4><b>FAILOVER</b> <b>CONFIGURATION</b></h4><pre>
       Options in this section affect CTDB failover. They are valid within the <u>failover</u> section of file,
       indicated by [failover].

       disabled = true|false
           If set to true then public IP failover is disabled.

           Default: false

       shutdown extra timeout = <u>TIMEOUT</u>
           CTDB will wait for TIMEOUT seconds after failover completes during shutdown. This can provide extra
           time for SMB durable handles to be reclaimed. If set to 0 then no extra timeout occurs.

           This timeout only occurs if both of the following conditions are true:

           •   shutdown failover timeout (below) is not 0

           •   Failover during shutdown completes and does not time out

           Default: 0

       shutdown failover timeout = <u>TIMEOUT</u>
           CTDB will wait for TIMEOUT seconds for failover to complete during shutdown. This allows NFS servers
           on other nodes to go into grace during graceful shutdown of a node. Failover during shutdown also
           helps with SMB durable handle reclaim.

           Set this to 0 to disable explicit failover on shutdown.

           Default: 10

</pre><h4><b>LEGACY</b> <b>CONFIGURATION</b></h4><pre>
       Options in this section affect legacy CTDB setup. They are valid within the <u>legacy</u> section of file,
       indicated by [legacy].

       ctdb start as stopped = true|false
           If set to true CTDB starts in the STOPPED state.

           To allow the node to take part in the cluster it must be manually continued with the <b>ctdb</b> <b>continue</b>
           command.

           Please see the NODE STATES section in <b><a href="../man7/ctdb.7.html">ctdb</a></b>(7) for more information about the STOPPED state.

           Default: false

       start as disabled = true|false
           If set to true CTDB starts in the DISABLED state.

           To allow the node to host public IP addresses and services, it must be manually enabled using the
           <b>ctdb</b> <b>enable</b> command.

           Please see the NODE STATES section in <b><a href="../man7/ctdb.7.html">ctdb</a></b>(7) for more information about the DISABLED state.

           Default: false

       realtime scheduling = true|false
           Usually CTDB runs with real-time priority. This helps it to perform effectively on a busy system,
           such as when there are thousands of Samba clients. If you are running CTDB on a platform that does
           not support real-time priority, you can set this to false.

           Default: true

       lmaster capability = true|false
           Indicates whether a node can become a location master for records in a database. If this is set to
           false then the node will not be part of the vnnmap. This feature is primarily used for making a
           cluster span across a WAN link and use CTDB as a WAN-accelerator.

           Please see the REMOTE CLUSTER NODES section in <b><a href="../man7/ctdb.7.html">ctdb</a></b>(7) for more information.

           Default: true

       script log level = <u>LOGLEVEL</u>
           This option sets the debug level of event script output to LOGLEVEL.

           See the DEBUG LEVELS section in <b><a href="../man7/ctdb.7.html">ctdb</a></b>(7) for more information.

           Default: ERROR

</pre><h4><b>FILES</b></h4><pre>
           /etc/ctdb/ctdb.conf

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man1/ctdbd.1.html">ctdbd</a></b>(1), <b><a href="../man1/onnode.1.html">onnode</a></b>(1), <b><a href="../man5/ctdb.sysconfig.5.html">ctdb.sysconfig</a></b>(5), <b><a href="../man5/ctdb-script.options.5.html">ctdb-script.options</a></b>(5), <b><a href="../man7/ctdb.7.html">ctdb</a></b>(7), <b><a href="../man7/ctdb-tunables.7.html">ctdb-tunables</a></b>(7),
       <b><a href="http://ctdb.samba.org/">http://ctdb.samba.org/</a></b>

</pre><h4><b>AUTHOR</b></h4><pre>
       This documentation was written by Amitay Isaacs, Martin Schwenke

</pre><h4><b>COPYRIGHT</b></h4><pre>
       Copyright © 2007 Andrew Tridgell, Ronnie Sahlberg

       This program is free software; you can redistribute it and/or modify it under the terms of the GNU
       General Public License as published by the Free Software Foundation; either version 3 of the License, or
       (at your option) any later version.

       This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even
       the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public
       License for more details.

       You should have received a copy of the GNU General Public License along with this program; if not, see
       <b><a href="http://www.gnu.org/licenses">http://www.gnu.org/licenses</a></b>.

ctdb                                               07/21/2025                                       <u><a href="../man5/CTDB.CONF.5.html">CTDB.CONF</a></u>(5)
</pre>
 </div>
</div></section>
</div>
</body>
</html>