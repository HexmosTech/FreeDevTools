<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>mfsmaster.cfg - main configuration file for mfsmaster</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/moosefs-master">moosefs-master_4.57.5-1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       mfsmaster.cfg - main configuration file for <b>mfsmaster</b>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The file <b>mfsmaster.cfg</b> contains configuration of MooseFS master process.

</pre><h4><b>SYNTAX</b></h4><pre>
       Syntax is:

       <u>OPTION</u> <b>=</b> <u>VALUE</u>

       Lines starting with <b>#</b> character are ignored as comments.

</pre><h4><b>STARTUP</b> <b>OPTIONS</b></h4><pre>
       Changes in this section require process restart.

       <b>WORKING_USER</b>
              user to run daemon as

       <b>WORKING_GROUP</b>
              group to run daemon as; optional value - if empty, then user's default group will be used

       <b>SYSLOG_IDENT</b>
              name of process to place in syslog messages; default is mfsmaster

       <b>LOCK_MEMORY</b>
              whether to perform mlockall() to avoid swapping out mfsmaster process; default is 0, i.e. no

       <b>LIMIT_GLIBC_MALLOC_ARENAS</b>
              limit  malloc  arenas  to  given  value - prevents server from using huge amount of virtual memory
              (Linux only, default is 4)

       <b>DISABLE_OOM_KILLER</b>
              disable out of memory killer (Linux only, default is 1)

       <b>NICE_LEVEL</b>
              nice level to run daemon with; default is -19; note: process must be started as root  to  increase
              priority, if setting of priority fails, process retains the nice level it started with

       <b>FILE_UMASK</b>
              set default umask for group and others (user always has 0); default is 027 - block write for group
              and block all for others

       <b>DATA_PATH</b>
              where to store metadata files and lock file

</pre><h4><b>RUNTIME</b> <b>OPTIONS</b></h4><pre>
       Changes in this section require only process reload.

       <b>LICENCE_FILENAME</b>
              (pro only) alternate location/name of <b>mfslicence.bin</b> file

       <b>EXPORTS_FILENAME</b>
              alternate location/name of <b>mfsexports.cfg</b> file

       <b>TOPOLOGY_FILENAME</b>
              alternate location/name of <b>mfstopology.cfg</b> file

       <b>INSTANCE_NAME</b>
              optional  name  of  MooseFS instance (cluster) that will be displayed in CGI interface (default is
              empty string)

       <b>BACK_LOGS</b>
              number of metadata change log files (default is 50)

       <b>METADATA_SAVE_OFFSET</b>
              offset used  for  options:  METADATA_SAVE_FREQ,  (pro  only)  METADATA_DOWNLOAD_FREQ,  (pro  only)
              METADATA_CRCCHECK_FREQ (minutes - default is 0); format X:Y is also accepted and means X hours and
              Y  minutes,  suffix  "L" can be added to mean local(server) time zone instead of UTC; if hours are
              provided, modulo value of METADATA_SAVE_FREQ, METADATA_DOWNLOAD_FREQ, METADATA_CRCCHECK_FREQ  will
              be calculated and used, see NOTES

       <b>METADATA_SAVE_FREQ</b>
              how often (in hours) master (single or follower) will store metadata (default is 1)

       <b>METADATA_DOWNLOAD_FREQ</b>
              (pro only) how often (in hours) leader will download metadata from followers (default is 0 - which
              means never)

       <b>METADATA_CRCCHECK_FREQ</b>
              (pro  only) how often (in hours) leader will check metadata consistency with followers (also saves
              metadata ; default is 24)

       <b>METADATA_DOWNLOAD_LIMIT</b>
              (pro only) metadata downloading limit in mebibytes per second (0 means no limit, default is  50  -
              50MiB/s = ~52.4MB/s)

       <b>DEPUTY_ELECTION_TIME</b>
              (pro only) how many seconds until master-elect turns into master-deputy (a.k.a master-readonly) if
              there  are  not  enough chunkservers connected to become master-leader (default is 0 - which means
              never)

       <b>KEEP_LEADERSHIP</b>
              (pro only) if this option is set to 1, this master will try to assume leadership after it has lost
              it due to a restart or disconnection; it will  not  attempt  this  if  a  user  has  switched  the
              leadership  on  purpose;  for  detailed  explanation see NOTES (default is 0 - don't try to assume
              leadership)

       <b>BACK_META_KEEP_PREVIOUS</b>
              number of previous metadata files to be kept (default is 1)

       <b>CHANGELOG_PRESERVE_SECONDS</b>
              how many seconds of change logs have to be preserved in memory (default is  5000;  this  sets  the
              minimum,  actual  number  may  be  a bit bigger due to logs being kept in 5k blocks; zero disables
              extra logs storage)

       <b>CHANGELOG_PRESERVE_MB</b>
              how much RAM can be used to preserve change logs in memory in megabytes (deafult is 500; this sets
              the minimum, actual number may be a bit bigger due to logs being kept in 5k blocks; zero  disables
              extra  logs  storage);  master  will  always  preserve  the  lower  number of 5k blocks defined by
              <b>CHANGELOG_PRESERVE_SECONDS</b> and <b>CHANGELOG_PRESERVE_MB</b>, so be sure to set both appropriately

       <b>CHANGELOG_SAVE_MODE</b>
              Changelog save mode (default is 0)
              0 - write in background by different process (less safe, but doesn't make master stop in  case  of
              heavy hdd load)
              1 - write in foreground without syncing data (master waits for every changelog to be saved to hdd,
              but  without syncing - a little more safe than the background option, but may cause master to stop
              and wait for flushing hdd buffers)
              2 - write in foreground with fsync after each write (very safe, but may make your master very slow
              unless you have very sophisticated hardware)

       <b>MISSING_LOG_CAPACITY</b>
              how many missing chunks will be stored in master (up to 100*MISSING_LOG_CAPACITY bytes  of  memory
              will be allocated ; default value is 100000)

       <b>CONFIGURATION_TEST_PERIOD</b>
              (pro  only)  how  often  (in  hours) master leader should run a test, that checks if configuration
              options are consistent betewen modules (default is 24, max possible value is 168, 0 means no tests
              are performed)

       <b>SYSLOG_MIN_LEVEL</b>
              minimum level of messages that will be reported by master; levels in order of  importance:  ERROR,
              WARNING, NOTICE, INFO, DEBUG (default is INFO)

       <b>SYSLOG_ELEVATE_TO</b>
              reported  messages  of level lower than set by this option will be elevated to this level (i.e. if
              <b>SYSLOG_MIN_LEVEL</b> is set to DEBUG and <b>SYSLOG_ELEVATE_TO</b> is  set  to  NOTICE,  all  INFO  and  DEBUG
              messages will be sent to syslog as NOTICE ; default is NOTICE)

</pre><h4><b>COMMAND</b> <b>CONNECTION</b> <b>OPTIONS</b></h4><pre>
       Changes in this section require only process reload.

       <b>MATOML_LISTEN_HOST</b>
              IP  address  to  listen on for metalogger, (pro only) masters and supervisors connections (* means
              any)

       <b>MATOML_LISTEN_PORT</b>
              port to listen on for metalogger, (pro only) masters and supervisors connections

       <b>MATOML_TIMEOUT</b>
              default timeout in seconds  for  master-metalogger  (or  master  follower,  pro  only)  connection
              (default is 10)

       <b>MATOML_FORCE_TIMEOUT</b>
              forced timeout in seconds for master-metalogger (or master follower, pro only) connection (default
              is 0 - do not force timeouts)

</pre><h4><b>MASTER-LEADER</b> <b>CONNECTION</b> <b>OPTIONS</b></h4><pre>
       Changes in this section require only process reload.

       <b>MASTER_HOST</b>
              (pro only) MooseFS master host (default is mfsmaster)

       <b>MASTER_RECONNECTION_DELAY</b>
              (pro  only)  delay  in  seconds  before  next  try  to reconnect to master-leader if not connected
              (default is 5)

       <b>MASTER_TIMEOUT</b>
              (pro only) timeout in seconds for master-leader connections (default is 10)

       <b>BIND_HOST</b>
              (pro only) local address to use for connecting with master-leader  (default  is  *,  i.e.  default
              local address)

</pre><h4><b>CHUNKSERVER</b> <b>CONNECTION</b> <b>OPTIONS</b></h4><pre>
       Changes in this section require only process reload.

       <b>MATOCS_LISTEN_HOST</b>
              IP address to listen on for chunkserver connections (<b>*</b> means any)

       <b>MATOCS_LISTEN_PORT</b>
              port to listen on for chunkserver connections

       <b>MATOCS_TIMEOUT</b>
              default timeout in seconds for master-chunkserver connection (default is 10)

       <b>MATOCS_FORCE_TIMEOUT</b>
              forced timeout in seconds for master-chunkserver connection (default is 0 - do not force timeouts)

       <b>AUTH_CODE</b>
              Optional  authentication string. When defined - then only chunkservers with the same AUTH_CODE are
              allowed to connect to this master. When not defined (default) - then all chunkservers are allowed.
              If you want to switch on chunkserver authentication, then  first  define  AUTH_CODE  in  all  your
              chunkservers  (and  reload/restart them), then define this option in master and reload/restart it.
              Remember, that after reload currently connected chunkservers are NOT disconnected.  New  AUTH_CODE
              will be used only when chunkservers will make a new connection.

       <b>REMAP_BITS</b>, <b>REMAP_SOURCE_IP_CLASS</b>, <b>REMAP_DESTINATION_IP_CLASS</b>
              Optional  IP  class remapping. Remap chunkserver IP addresses with first REMAP_BITS of IP equal to
              first REMAP_BITS of REMAP_SOURCE_IP_CLASS. During remapping system will set first REMAP_BITS of IP
              address to first REMAP_BITS of REMAP_DESTINATION_IP_CLASS. All three option need to be defined for
              the remapping to work.

       <b>MULTILAN_BITS</b>, <b>MULTILAN_CLASSES</b>
              Optional LAN IP class remapping. Remap chunkservers  IP  addresses  with  first  MULTILAN_BITS  of
              client's  IP for all client IPs matching one of the MULTILAN_CLASSES (classes must be separated by
              comma). All masters and chunkservers must  have  valid  IPs  from  each  of  the  MULTILAN_CLASSES
              classes. Both options need to be defined for the remapping to work.

       <b>MULTILAN_IPMAP_FILENAME</b>
              alternate location/name of <b>mfsipmap.cfg</b> file. This file defines optional custom IP mapping.

</pre><h4><b>CHUNKSERVER</b> <b>WORKING</b> <b>OPTIONS</b></h4><pre>
       Changes in this section require only process reload.

       <b>REPLICATIONS_DELAY_INIT</b>
              initial delay in seconds before starting replications (default is 60)

       <b>REPLICATIONS_RESPECT_TOPOLOGY</b>
              whether to make undergoal replications respect topology (default is 0)
              0 - do not respect topology
              1 - pick a destination server at random, but then choose the best source server
              2  -  try  to  find  a  destination server in the same rack as one of the existing copies and then
              replicate the chunk locally (in the same rack)

       <b>CREATIONS_RESPECT_TOPOLOGY</b>
              whether new chunks should be recorded with respect to topology (default is 0)
              0 - do not respect topology
              N (N&gt;0) - first try to create new chunks on servers with topological distance LOWER  than  N  from
              the  client;  if  not  possible, for example because of storage class, chunk servers being busy or
              lacking space, then try servers with distance greater or equal to N

       <b>CHUNKS_UNIQUE_MODE</b>
              avoid using same ip/rack for different chunk copies (default is 0)
              0 - ignore ip and rackid (standard behaviour)
              1 - avoid storing more than one copy on chunkservers using same IP number
              2 - avoid storing more than one copy on chunkservers using IP number from the same rack id
              NOTICE! This parameter is available for backward compatibility purposes and should not be set to a
              value other than 0. Instead, distinguish feature from storage classes should be used.  However, if
              it is set to a value other than 0,  it  will  override  any  distinguish  definintion  in  storage
              classes.   For   more  informations  about  storage  classes  and  distinguish  feature  refer  to
              <b><a href="../man1/mfsscadmin.1.html">mfsscadmin</a></b>(1) manual.

       <b>CHUNKS_LOOP_MAX_CPS</b>
              Chunks loop shouldn't check more chunks per seconds than given number (default is 100000)

       <b>CHUNKS_LOOP_MIN_TIME</b>
              Chunks loop shouldn't be done in less seconds than given number (default is 300)

       <b>CHUNKS_SOFT_DEL_LIMIT</b>
              Soft maximum number of chunks to delete on one chunkserver (default is 10)

       <b>CHUNKS_HARD_DEL_LIMIT</b>
              Hard maximum number of chunks to delete on one chunkserver (default is 25)

       <b>CHUNKS_WRITE_REP_LIMIT</b>
              Maximum number of chunks to replicate to one chunkserver (default is 2,1,1,4,4 - see NOTES)

       <b>CHUNKS_READ_REP_LIMIT</b>
              Maximum number of chunks to replicate from one chunkserver (default is 10,5,2,5,10 - see NOTES)

       <b>CS_HEAVY_LOAD_THRESHOLD</b>
              Threshold for chunkserver load. (default is 150 - see NOTES)

       <b>CS_HEAVY_LOAD_RATIO_THRESHOLD</b>
              Threshold ratio for chunkserver load (default is 3.0 - see NOTES)

       <b>CS_HEAVY_LOAD_GRACE_PERIOD</b>
              Defines how long chunkservers will remain in 'grace' mode (default is 900 - see NOTES)

       <b>ACCEPTABLE_PERCENTAGE_DIFFERENCE</b>
              Maximum percentage difference between space usage of chunkservers (default is 1 = 1%)

       <b>PRIORITY_QUEUES_LENGTH</b>
              Length of priority queues (for endangered, undergoal etc. chunks - chunks that should be processed
              first - default is 1000000)

       <b>CS_MAINTENANCE_MODE_TIMEOUT</b>
              Maximum time server can be in maintenance mode (default value is 0 - which means  'forever');  for
              value formatting see TIME

       <b>CS_TEMP_MAINTENANCE_MODE_TIMEOUT</b>
              Maximum  time  server  can  be  in  "temporary"  maintenance mode (server is switched to this mode
              whenever it is stopped gracefully, after reconnection server  is  switched  back  to  normal  mode
              automatically ; default value: 30m); for value formatting see TIME

       <b>CS_DAYS_TO_REMOVE_UNUSED</b>
              How  many  days  unused (disconnected) chunkserver should be kept in master data structures (valid
              values: 0 - 365 ; 0 means indefinitely ; default value: 7)

</pre><h4><b>CLIENTS</b> <b>CONNECTION</b> <b>OPTIONS</b></h4><pre>
       Changes in this section require only process reload.

       <b>MATOCL_LISTEN_HOST</b>
              IP address to listen on for client (mount) connections (<b>*</b> means any)

       <b>MATOCL_LISTEN_PORT</b>
              port to listen on for client (mount) connections

       <b>MATOCL_TIMEOUT</b>
              default timeout in seconds for master-client connection (default is 10)

       <b>MATOCL_FORCE_TIMEOUT</b>
              forced timeout in seconds for master-client connection (default is 0 - do not force timeouts)

       <b>RESTRICT_INCOMPATIBLE_CLIENT_VERSIONS</b>
              Whether MooseFS should prevent  connections  from  clients  that  are  unable  to  read  all  data
              (especially erasure encoded data). Default is 1 - prevent connections. If this option is set to 0,
              clients that try to read data in a format they do not understand will return read errors. Use with
              caution.

</pre><h4><b>CLIENTS</b> <b>WORKING</b> <b>OPTIONS</b></h4><pre>
       Changes in this section require only process reload.

       <b>SESSION_SUSTAIN_TIME</b>
              How  long  to  sustain  a disconnected client session (default is 1 day); for value formatting see
              TIME

</pre><h4><b>FILE</b> <b>SYSTEM</b> <b>OPTIONS</b></h4><pre>
       Changes in this section require only process reload.

       <b>QUOTA_DEFAULT_GRACE_PERIOD</b>
              Default grace for soft quota (default is 7 days); for value formatting see TIME

       <b>ATIME_MODE</b>
              Set atime modification mode (default is 2 : similar to 'relatime' - see NOTES)

       <b>KEEP_EMPTY_FILES_IN_TRASH</b>
              Move empty files to trash after unlink? (default is 0 - delete empty files immediately  regardless
              of trash retention settings)

       <b>RESERVE_SPACE</b>
              Set  amount  of  space reserved for superuser (default is 0 = do not reserve space for superuser -
              see NOTES)

       <b>MAX_ALLOWED_HARD_LINKS</b>
              Define limit for number of hardlinks allowed for one object (default is 32767; possible values are
              from 8 to 65000)

       <b>INODE_REUSE_DELAY</b>
              Delay time after which inodes of deleted objects will be reused. BE AWARE if you change this value
              below 1 day you MUST ensure that this value is higher than any of the following  timeouts  in  all
              clients: <b>mfsattrcacheto</b>, <b>mfsxattrcacheto</b>, <b>mfsentrycacheto</b>, <b>mfsdirentrycacheto</b>, <b>mfsnegentrycacheto</b>,
              <b>mfssymlinkcacheto</b>.  (default  is  1d;  possible values are from 300 to 3000000 seconds); for value
              formatting see TIME TP <b>DEFAULT_EC_DATA_PARTS</b> How many data parts should the system  use  when  old
              style  EC definition is in use (@n instead of @8+n or @4+n; default is 8; possible values are 4 or
              8)

</pre><h4><b>TIME</b></h4><pre>
       For config variables that define time without requiring a single, specific unit, time can be defined as a
       number of seconds (integer) or a time period in one of two possible formats:

       first format: #.#T where T is one of: s-seconds, m-minutes, h-hours,  d-days  or  w-weeks;  fractions  of
       seconds will be rounded to full seconds

       second  format:  #w#d#h#m#s, any number of definitions can be ommited, but the remaining definitions must
       be in order (so #d#m is still a valid definition, but #m#d is not); ranges: s,m: 0 to 59, h: 0 to 23,  d:
       0  t  o  6,  w  is unlimited and the first definition is also always unlimited (i.e. for #d#h#m d will be
       unlimited)

       Examples:

       1.5h is the same as 1h30m, is the same as 90m, is the same as 5400s, is the same as 5400

       2.5d is the same as 2d12h, is the same as 60h; 1d36h is not a valid time  period  (h  is  not  the  first
       definition, so it is bound by range 0 to 23)

       1.03m is the same as 62s (61.8 seconds will be rounded up to 62)

</pre><h4><b>NOTES</b></h4><pre>
       Chunks   in   master  are  tested  in  a  loop.  Speed  (or  frequency)  is  regulated  by  two  options:
       <b>CHUNKS_LOOP_MIN_TIME</b> and <b>CHUNKS_LOOP_MAX_CPS</b>. First defines minimal time between iterations of  the  loop
       and second defines maximal number of chunk tests per second.  Typically at the beginning, when the number
       of  chunks  is  small,  time is constant, regulated by <b>CHUNK_LOOP_MIN_TIME</b>, but the when number of chunks
       becomes bigger, then time of loop can increase according to <b>CHUNKS_LOOP_MAX_CPS</b>.

       Example: <b>CHUNKS_LOOP_MIN_TIME</b> is set to 300, <b>CHUNKS_LOOP_MAX_CPS</b> is set to 100000 and  there  is  1000000
       (one  million)  chunks  in the system. 1000000/100000 = 10, which is less than 300, so one loop iteration
       will take 300 seconds.  With 1000000000 (one billion) chunks the  system  needs  10000  seconds  for  one
       iteration of the loop.

       Deletion  limits  are  defined as 'soft' and 'hard' limit. When number of chunks to delete increases from
       loop to loop, current limit can be temporarily increased above soft limit, but never above hard limit.

       Replication limits are divided into five cases:

       • first limit is for endangered chunks (chunks with only one copy)

       • second limit is for undergoal chunks (chunks with number of copies lower than specified goal)

       • third limit is for rebalance between servers with space usage close to arithmetic mean

       • fourth limit is for rebalance between other servers (very low or very high space usage)

       • fifth limit is for recovery replications caused by I/O operations (read/write)

       Usually first number should be greater than or equal to second, second greater than or  equal  to  third,
       and  fourth  greater  than or equal to third ( 1st &gt;= 2nd &gt;= 3rd &lt;= 4th ). Fifth limit should be equal or
       greater than any of the other limits. If one number is given, then all limits are set to this number (for
       backward compatibility). If only four numbers are given, the fifth will be set as  maximum  of  the  four
       (also for backward compatibility).

       Whenever chunkserver load is higher than <b>CS_HEAVY_LOAD_THRESHOLD</b>  and <b>CS_HEAVY_LOAD_RATIO_THRESHOLD</b> times
       higher than average load, then chunkserver is switched into 'grace' mode. Chunkserver stays in grace mode
       for <b>CS_HEAVY_LOAD_GRACE_PERIOD</b> seconds.

       There are five possible values for <b>ATIME_MODE</b> (all other values are treated as 0):

       • <b>0</b> = Always modify atime for files, folders and symlinks.

       • <b>1</b>  =  Always  modify  atime  but  only  in  case  of  files (do not modify atime in case of folders and
         symlinks).

       • <b>2</b> = Modify atime only when it is lower than ctime or mtime and when current time is higher  than  ctime
         or  mtime  respectively,  also modify atime when current atime is older than 24h. Do it for all objects
         during access (like "relatime" option in Linux).

       • <b>3</b> = Same as above but only in case of files. In case of folders and symlinks do not modify atime.

       • <b>4</b> = Never modify atime during access (like "noatime" option).

       You can reserve space for superuser using <b>RESERVE_SPACE</b> option. You can define it  as  number  of  bytes,
       percent of total space, capacity of biggest chunkserver, etc.

       • <u>#</u>  or  <u>#</u><b>B</b>  =  number of bytes reserved for superuser. Standard metric prefixes can be used - SI and IEC
         (k,K,M,Mi,G,Gi etc.)

       • <u>#</u><b>%</b> or <u>#</u><b>.</b><u>#</u><b>%</b> = percent of total capacity of MooseFS instance

       • <u>#</u><b>U</b> or <u>#</u><b>.</b><u>#</u><b>U</b> = multiplies of "U" value; U is defined as maximum number  of  bytes  currently  used  by  a
         single chunkserver

       • <u>#</u><b>C</b> or <u>#</u><b>.</b><u>#</u><b>C</b> = multiplies of "C" value; C is defined as maximum total capacity of a single chunkserver

       When your network has two (or more) IP classes you may want to use one network for standard communication
       between  MFS  modules  and  separate  network  only  for  I/O.  It  can  be  done  by setting <b>REMAP_BITS</b>,
       <b>REMAP_SOURCE_IP_CLASS</b> and <b>REMAP_DESTINATION_IP_CLASS</b>.  When you set these options then master will change
       internally IP addresses of chunkservers and will send them as  chunk  locations,  so  clients  will  make
       connections  with  chunkservers using new (destination) IP for all I/O, but still communicate with master
       using original (source) IP.  Also chunkservers will use original IP to communicate with master, but  they
       will  use  new  IP's  to  communicate  between themselves during replication. Beware that all clients and
       chunkservers must have access to both networks, but masters, metaloggers etc. will need  only  access  to
       the source network.

       When  your  clients  are separated into two or more LAN or VLAN networks, you may want them to connect to
       masters and chunkservers using IPs from their network. It  can  be  done  by  setting  <b>MULTILAN_BITS</b>  and
       <b>MULTILAN_CLASSES</b>.   Each  time  a client connects, the master will check whether the connection came from
       one of the defined LAN classes and if yes, it will remap the first <b>MULTILAN_BITS</b> of  any  chunkserver  IP
       before  it  sends  the chunkserver's IP to the client. Connections coming from other IP addresses will be
       treated as usual (i.e. original chunkserver IPs will be sent in response). All masters  and  chunkservers
       need  to  have  one  IP  from each of the defined <b>MULTILAN_CLASSES</b> and one module (chunkserver or master)
       needs to have the same IP suffix in each class.  Proper DNS configuration is also  required:  clients  in
       each  LAN  must  either get different IP when querying DNS about master host or must use different master
       host names that are resolved to IPs in their class.  See <b><a href="../man8/mfsmount.8.html">mfsmount</a></b>(8),  <b><a href="../man8/mfsbdev.8.html">mfsbdev</a></b>(8)  for  more  info  about
       master host name.

       The two above sets of options can be used together. One purpose would be to create a separate network for
       replication  of  data  between  chunkservers  while  also maintaning several separate networks (LANs) for
       separate sets of clients.  For example, with the following configuration:

       REMAP_BITS = 24
       REMAP_SOURCE_IP_CLASS = 10.0.0.0
       REMAP_DESTINATION_IP_CLASS = 10.0.1.0
       MULTILAN_BITS = 24
       MULTILAN_CLASSES = 192.168.1.0, 192.168.2.0, 192.168.3.0, 10.0.1.0

       all network traffic from clients matching one of the LAN classes will be handled on that  network  (so  a
       client  with  IP 192.168.1.17 will connect to the master and chunkservers using IPs with prefix 192.168.1
       and a client with IP 192.168.2.13 will connect to the master  and  chunkservers  using  IPs  with  prefix
       192.168.2),  all  metadata traffic between master and chunkservers will be handled on network with prefix
       10.0.0 and all direct communication between chunkservers (i.e. chunk replications)  will  be  handled  on
       network  with  prefix  10.0.1.   Be  aware  that  any client from outside of the defined LAN classes will
       connect to the chunkservers via IPs defined by <b>REMAP_DESTINATION_IP_CLASS</b>. This also assumes  proper  DNS
       configuration,  that  is, if master server uses IP suffix 1, a client with IP 192.168.1.17 should resolve
       master host name as 192.168.1.1 and a client with IP 192.168.2.13 should  resolve  master  host  name  as
       192.168.2.1.  A client from outside of the defined LAN classes may use any of master server IPs, although
       preferably 10.0.0.1

       Masters save metadata to a file on a local disk. The exact times of these  operations  are  regulated  by
       four  variables:  METADATA_SAVE_OFFSET, METADATA_SAVE_FREQ, (pro only) METADATA_DOWNLOAD_FREQ, (pro only)
       METADATA_CRCCHECK_FREQ.

       A single master will save metadata every METADATA_SAVE_FREQ hours.  First save  of  the  day  happens  at
       midnight,  every  other  one  is  after  METADATA_SAVE_FREQ  from  previous one. This can be changed with
       METADATA_SAVE_OFFSET. METADATA_SAVE_OFFSET set to a single value will  mean  minutes.  So  settings  like
       this:

       METADATA_SAVE_FREQ = 2
       METADATA_SAVE_OFFSET = 15

       will  mean saving at 00:15, 02:15, 04:15 etc., up to 22:15.  If hour is provided, this is also taken into
       account, but only as modulo, so:

       METADATA_SAVE_FREQ = 2
       METADATA_SAVE_OFFSET = 1:15

       will behave exactly the same as:

       METADATA_SAVE_FREQ = 2
       METADATA_SAVE_OFFSET = 5:15

       and will save metadata at 01:15, 03:15, 05:15 etc.

       All times mentioned above are calculated in UTC, unless "L" suffix is used. So, if your  servers  are  in
       CET zone (UTC-1), this setting:

       METADATA_SAVE_FREQ = 2
       METADATA_SAVE_OFFSET = 1:15

       will  mean  the  master  will  save metadata at 01:15, 3:15, etc. UTC, which means 0:15, 2:15, etc. local
       (CET) time.  To save at 01:15 (and every 2 hours from that) local time, you need to write:

       METADATA_SAVE_FREQ = 2
       METADATA_SAVE_OFFSET = 1:15L

       (pro only)  With  multiple  masters  the  leader  will  save  metadata  according  to  the  setting  from
       METADATA_CRCCHECK_FREQ, but also taking into account the offset.  So setting like:

       METADATA_CRCCHECK_FREQ = 12
       METADATA_SAVE_FREQ = 2
       METADATA_SAVE_OFFSET = 1:15

       will  mean  that  the  leader  saves  (and compares against followers) metadata at 01:15 and 13:15, while
       followers save at 01:15, 03:15, 05:15 etc.

       METADATA_DOWNLOAD_FREQ means the leader will download metadata from a follower and that  will  also  take
       into account the METADATA_SAVE_OFFSET in the manner identical that METADATA_CRCCHECK_FREQ does.

       Times mentioned above are calculated in UTC. So, if your servers are in PST zone (UTC-8), this setting:

       METADATA_CRCCHECK_FREQ = 12
       METADATA_SAVE_FREQ = 2
       METADATA_SAVE_OFFSET = 1:15

       will  mean  the leader will save metadata at 01:15 and 13:15 UTC, which means 17:15 and 5:15 (5:15 PM and
       5:15 AM) local (PST) time. To save at 01:15 and 13:15 (1:15 AM and 1:15  PM)  local  time,  you  need  to
       write:

       METADATA_CRCCHECK_FREQ = 12
       METADATA_SAVE_FREQ = 2
       METADATA_SAVE_OFFSET = 1:15L

       Setting:

       METADATA_SAVE_OFFSET = 0L

       can  be  used  to  adjust  saving  times  to  local timezone without changing the default metadata saving
       schedule.

       The <b>KEEP_LEADERSHIP</b> option can be used to select one master in a Pro installation, that will  assume  the
       role  of  LEADER  whenever  possible.  If  this  master  looses  leadership  for  reasons related to some
       malfunction (a disconnection of too many chunkservers from the cluster, a disconnection  of  this  master
       from  the  cluster - due to timeouts or other hardware problems) or due to a (intentional or not) process
       restart, it will try to assume back the LEADER role as soon as possible (as soon as it reaches  a  synced
       FOLLOWER  state).  If  a  user switches the leadership using the <b>mfssupervisor</b> tool, this master will not
       attempt to assume back leadership until such time, when it becomes LEADER again (this can happen for  one
       of  two  reasons:  deliberate switching of leadership by a user of when the current LEADER fails and this
       server happens to be elected as the new LEADER) or is restarted.

       Setting <b>KEEP_LEADERSHIP</b> option to 1 for more than one master server in a cluster is NOT  recommended  and
       may lead to unexpected behaviour.

</pre><h4><b>COPYRIGHT</b></h4><pre>
       Copyright (C) 2025 Jakub Kruszona-Zawadzki, Saglabs SA

       This file is part of MooseFS.

       MooseFS  is  free  software;  you can redistribute it and/or modify it under the terms of the GNU General
       Public License as published by the Free Software Foundation, version 2 (only).

       MooseFS is distributed in the hope that it will be useful, but WITHOUT ANY  WARRANTY;  without  even  the
       implied  warranty  of  MERCHANTABILITY  or  FITNESS  FOR A PARTICULAR PURPOSE. See the GNU General Public
       License for more details.

       You should have received a copy of the GNU General Public License along with MooseFS; if  not,  write  to
       the  Free  Software  Foundation,  Inc.,  51 Franklin St, Fifth Floor, Boston, MA 02111-1301, USA or visit
       <a href="http://www.gnu.org/licenses/gpl-2.0.html">http://www.gnu.org/licenses/gpl-2.0.html</a>

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man8/mfsmaster.8.html">mfsmaster</a></b>(8), <b><a href="../man5/mfsexports.cfg.5.html">mfsexports.cfg</a></b>(5) <b><a href="../man5/mfstopology.cfg.5.html">mfstopology.cfg</a></b>(5) <b><a href="../man5/mfsipmap.cfg.5.html">mfsipmap.cfg</a></b>(5)

MooseFS 4.57.5-1                                  February 2025                                 <u><a href="../man5/mfsmaster.cfg.5.html">mfsmaster.cfg</a></u>(5)
</pre>
 </div>
</div></section>
</div>
</body>
</html>