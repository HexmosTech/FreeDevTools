<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>afs_cache - Format of data stored in an AFS client disk cache</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/openafs-client">openafs-client_1.8.13.2-1ubuntu1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       afs_cache - Format of data stored in an AFS client disk cache

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The disk cache on a client machine is composed of multiple <u>Vn</u> files that contain the data, a <u>CacheItems</u>
       file that records index information for all of the <u>Vn</u> files, and a <u>VolumeItems</u> file that records the
       mapping between volume name and mount point for volumes.

       When it initializes, the Cache Manager creates the cache files in the configured cache location.  The
       standard directory name is <u>/usr/vice/cache</u>, but it is acceptable to use a directory on a partition with
       more available space. To designate a different directory, change the value in the second field of the
       <u>/etc/openafs/cacheinfo</u> file before issuing the <b>afsd</b> command, or include the <b>-cachedir</b> argument to the
       <b>afsd</b> command.

   <u><b>CacheItems</b></u>
       The CacheItems file records information about each file in the disk cache on a client machine (each <u>Vn</u>
       file). The information includes the file ID number and associated volume version number of the AFS file
       currently stored in the <b>V</b><u>n</u> file, which enables the Cache Manager to determine which <u>Vn</u> file contains the
       AFS data it needs to present to an application.

       As it initializes, the Cache Manager creates the binary-format <u>CacheItems</u> file in the same local disk
       cache directory as the <u>Vn</u> files that the <u>CacheItems</u> file describes, and it must always remain there.

   <u><b>VolumeItems</b></u>
       The <u>VolumeItems</u> file records the mapping between volume name and mount point for each volume that the
       Cache Manager has accessed since it initialized on a client machine using a disk cache. The Cache Manager
       uses the mappings to respond correctly to queries about the current working directory, which can come
       from the operating system or commands such as the UNIX <b>pwd</b> command.

       As it initializes, the Cache Manager creates the binary-format <u>VolumeItems</u> file in the local disk cache
       directory, and it must always remain there.

   <u><b>Vn</b></u>
       A <u>Vn</u> file can store a chunk of cached AFS data on a client machine that is using a disk cache. As the
       Cache Manager initializes, it verifies that the local disk cache directory houses a number of <u>Vn</u> files
       equal to the largest of the following:

       •   100

       •   One  and  a half times the result of dividing the cache size by the chunk size (cachesize/chunksize *
           1.5).

       •   The result of dividing the cache size by 10 MB (10,240).

       The Cache Manager determines the cache size from the <b>-blocks</b> argument to the  <b>afsd</b>  command,  or  if  the
       argument  is  not  included,  from the third field of the <u>/etc/openafs/cacheinfo</u> file.  The default chunk
       size is 64 KB; use the <b>-chunksize</b> argument to the <b>afsd</b> command to override it. To  override  the  default
       number of chunks resulting from the calculation, include the <b>-files</b> argument to the <b>afsd</b> command. <b><a href="../man8/afsd.8.html">afsd</a></b>(8)
       describes the restrictions on acceptable values for each of the arguments.

       If  the  disk  cache  directory houses fewer <u>Vn</u> files than necessary, the Cache Manager creates new ones,
       assigning each a unique integer <u>n</u> that distinguishes it from the other files; the integers start  with  1
       and  increment  by  one  for each <u>Vn</u> file created. The Cache Manager removes files if there are more than
       necessary. The Cache Manager also adds and removes <u>Vn</u> files in response to the <b>fs</b>  <b>setcachesize</b>  command,
       which can be used to alter the cache size between reboots.

       <u>Vn</u>  files  expand  and  contract  to  accommodate  the  size  of  the  AFS directory listing or file they
       temporarily house. As mentioned, by default each <u>Vn</u> file holds up to 64 KB (65,536 bytes) of a cached AFS
       element. AFS elements larger than 64 KB are divided among multiple <b>V</b><u>n</u> files. If  an  element  is  smaller
       than  64 KB, the <u>Vn</u> file expands only to the required size. A <u>Vn</u> file accommodates only a single element,
       so if there many small cached elements, it is possible to exhaust the available <u>Vn</u> files without reaching
       the maximum cache size.

</pre><h4><b>CAUTIONS</b></h4><pre>
       Editing or removing the <u>CacheItems</u> or <u>VolumeItems</u> files or a <u>Vn</u> file can cause a  kernel  panic.  If  the
       contents  of  <u>Vn</u> files seem out of date, clear the files by using the <b>fs</b> <b>flush</b> or <b>fs</b> <b>flushvolume</b> command.
       If any of the cache files are accidentally modified or deleted, rebooting the  machine  usually  restores
       normal performance.

       To  alter  cache size (and thus the number of <u>Vn</u> files) between reboots, use the <b>fs</b> <b>setcachesize</b> command.
       Alternatively, alter the value of the <b>-blocks</b>, <b>-files</b> or <b>-chunksize</b> arguments to the <b>afsd</b> command invoked
       in the machine's AFS initialization file, and reboot. To refresh the contents of one or  more  <u>Vn</u>  files,
       use the <b>fs</b> <b>flush</b> or <b>fs</b> <b>flushvolume</b> command.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man5/cacheinfo.5.html">cacheinfo</a></b>(5), <b><a href="../man8/afsd.8.html">afsd</a></b>(8), <b><a href="../man1/fs_checkvolumes.1.html">fs_checkvolumes</a></b>(1), <b><a href="../man1/fs_flush.1.html">fs_flush</a></b>(1), <b><a href="../man1/fs_flushvolume.1.html">fs_flushvolume</a></b>(1), <b><a href="../man1/fs_setcachesize.1.html">fs_setcachesize</a></b>(1)

</pre><h4><b>COPYRIGHT</b></h4><pre>
       IBM Corporation 2000. &lt;<a href="http://www.ibm.com/">http://www.ibm.com/</a>&gt; All Rights Reserved.

       This  documentation  is covered by the IBM Public License Version 1.0.  It was converted from HTML to POD
       by software written by Chas Williams and Russ Allbery, based on  work  by  Alf  Wachsmann  and  Elizabeth
       Cassell.

OpenAFS                                            2025-03-21                                       <u><a href="../man5/AFS_CACHE.5.html">AFS_CACHE</a></u>(5)
</pre>
 </div>
</div></section>
</div>
</body>
</html>