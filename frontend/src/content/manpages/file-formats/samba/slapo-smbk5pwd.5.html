<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>slapo-smbk5pwd - Samba & Kerberos password sync overlay to slapd</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/slapd-contrib">slapd-contrib_2.6.9+dfsg-2ubuntu1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       slapo-smbk5pwd - Samba &amp; Kerberos password sync overlay to slapd

</pre><h4><b>SYNOPSIS</b></h4><pre>
       ETCDIR/slapd.conf

              include <b>&lt;path</b> <b>to&gt;/krb5-kdc.schema</b>

              include <b>&lt;path</b> <b>to&gt;/samba.schema</b>

              moduleload <b>smbk5pwd.so</b>

               ...

              database mdb

               ...

              overlay <b>smbk5pwd</b>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The  <b>smbk5pwd</b>  overlay  to <b><a href="../man8/slapd.8.html">slapd</a></b>(8) overloads the Password Modify Extended Operation (RFC 3062) to update
       Kerberos keys and Samba password hashes for an LDAP user, as well as  updating  password  change  related
       attributes for Kerberos, Samba and/or UNIX user accounts.

       The  Samba  support  is  written using the Samba 3.0 LDAP schema; Kerberos support is written for Heimdal
       using its hdb-ldap backend.

       Additionally, a new <b>{K5KEY}</b> password hash mechanism is provided.  For <b>krb5KDCEntry</b> objects that have this
       scheme specifier in their <u>userPassword</u> attribute, Simple Binds will be checked against the Kerberos  keys
       of  the entry.  No data is needed after the <b>{K5KEY}</b> scheme specifier in the <u>userPassword</u>, it is looked up
       from the entry directly.

</pre><h4><b>CONFIGURATION</b></h4><pre>
       The <b>smbk5pwd</b> overlay supports the following <b>slapd.conf</b> configuration options, which should  appear  after
       the <b>overlay</b> directive:

       <b>smbk5pwd-enable</b> <u>&lt;module&gt;</u>
              can be used to enable only the desired modules.  Legal values for <u>&lt;module&gt;</u> are

              <b>krb5</b>   If  the  user has the <b>krb5KDCEntry</b> objectclass, update the <b>krb5Key</b> and <b>krb5KeyVersionNumber</b>
                     attributes using the new password in the Password Modify operation, provided  the  Kerberos
                     account is not expired.  Exiration is determined by evaluating the <b>krb5ValidEnd</b> attribute.

              <b>samba</b>  If  the  user  is a <b>sambaSamAccount</b> object, synchronize the <b>sambaNTPassword</b> to the password
                     entered in the Password Modify operation, and update <b>sambaPwdLastSet</b> accordingly.

              <b>shadow</b> Update the attribute <b>shadowLastChange</b>, if the entry has the objectclass <b>shadowAccount</b>.

              By default all modules compiled in are  enabled.   Setting  the  config  statement  restricts  the
              enabled modules to the ones explicitly mentioned.

       <b>smbk5pwd-can-change</b> <u>&lt;seconds&gt;</u>
              If  the  <b>samba</b>  module  is  enabled  and  the  user  is  a  <b>sambaSamAccount</b>,  update the attribute
              <b>sambaPwdCanChange</b> to point <u>&lt;seconds&gt;</u> into the  future,  essentially  denying  any  Samba  password
              change until then.  A value of <b>0</b> disables this feature.

       <b>smbk5pwd-must-change</b> <u>&lt;seconds&gt;</u>
              If  the  <b>samba</b>  module  is  enabled  and  the  user  is  a  <b>sambaSamAccount</b>,  update the attribute
              <b>sambaPwdMustChange</b> to point <u>&lt;seconds&gt;</u> into the future,  essentially  setting  the  Samba  password
              expiration time.  A value of <b>0</b> disables this feature.

       Alternatively,  the  overlay  supports  table-driven  configuration,  and thus can be run-time loaded and
       configured via back-config.

</pre><h4><b>EXAMPLE</b></h4><pre>
       The layout of a slapd.d based, table-driven configuration entry looks like:

               # {0}smbk5pwd, {1}mdb, config
               dn: olcOverlay={0}smbk5pwd,olcDatabase={1}mdb,cn=config
               objectClass: olcOverlayConfig
               objectClass: olcSmbK5PwdConfig
               olcOverlay: {0}smbk5pwd
               olcSmbK5PwdEnable: krb5
               olcSmbK5PwdEnable: samba
               olcSmbK5PwdMustChange: 2592000

       which enables both <b>krb5</b> and <b>samba</b> modules with a Samba password expiration time of  30  days  (=  <b>2592000</b>
       seconds).

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man5/slapd.conf.5.html">slapd.conf</a></b>(5), <b><a href="../man1/ldappasswd.1.html">ldappasswd</a></b>(1), <b><a href="../man3/ldap.3.html">ldap</a></b>(3),

       "OpenLDAP Administrator's Guide" (<a href="http://www.OpenLDAP.org/doc/admin/">http://www.OpenLDAP.org/doc/admin/</a>)

</pre><h4><b>ACKNOWLEDGEMENTS</b></h4><pre>
       This  manual page has been written by Peter Marschall based on the module's README file written by Howard
       Chu.

       <b>OpenLDAP</b> is developed and maintained by The OpenLDAP  Project  (<a href="http://www.openldap.org/">http://www.openldap.org/</a>).   <b>OpenLDAP</b>  is
       derived from University of Michigan LDAP 3.3 Release.

OpenLDAP LDVERSION                                 RELEASEDATE                                 <u><a href="../man5/SLAPO-SMBK5PWD.5.html">SLAPO-SMBK5PWD</a></u>(5)
</pre>
 </div>
</div></section>
</div>
</body>
</html>