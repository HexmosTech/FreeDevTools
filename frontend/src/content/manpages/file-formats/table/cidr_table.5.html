<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>cidr_table - format of Postfix CIDR tables</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/postfix">postfix_3.10.2-1ubuntu1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       cidr_table - format of Postfix CIDR tables

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>postmap</b> <b>-q</b> <b>"</b><u>string</u><b>"</b> <b>cidr:/etc/postfix/</b><u>filename</u>

       <b>postmap</b> <b>-q</b> <b>-</b> <b>cidr:/etc/postfix/</b><u>filename</u> <b>&lt;</b><u>inputfile</u>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The  Postfix  mail  system  uses  optional  lookup tables.  These tables are usually in <b>dbm</b> or <b>db</b> format.
       Alternatively, lookup tables can be specified in CIDR (Classless  Inter-Domain  Routing)  form.  In  this
       case,  each input is compared against a list of patterns. When a match is found, the corresponding result
       is returned and the search is terminated.

       To find out what types of lookup tables your Postfix system supports use the "<b>postconf</b> <b>-m</b>" command.

       To test lookup tables, use the "<b>postmap</b> <b>-q</b>" command as described in the SYNOPSIS above.

</pre><h4><b>TABLE</b> <b>FORMAT</b></h4><pre>
       The general form of a Postfix CIDR table is:

       <u>pattern</u>     <u>result</u>
              When a search string matches the specified  <u>pattern</u>,  use  the  corresponding  <u>result</u>  value.  The
              <u>pattern</u> must be in <u>network/prefix</u> or <u>network_address</u> form (see ADDRESS PATTERN SYNTAX below).

       <b>!</b><u>pattern</u>     <u>result</u>
              When  a  search  string  does not match the specified <u>pattern</u>, use the specified <u>result</u> value. The
              <u>pattern</u> must be in <u>network/prefix</u> or <u>network_address</u> form (see ADDRESS PATTERN SYNTAX below).

              This feature is available in Postfix 3.2 and later.

       <b>if</b> <u>pattern</u>

       <b>endif</b>  When a search string matches the specified <u>pattern</u>, match that search string against the  patterns
              between  <b>if</b> and <b>endif</b>.  The <u>pattern</u> must be in <u>network/prefix</u> or <u>network_address</u> form (see ADDRESS
              PATTERN SYNTAX below). The <b>if</b>..<b>endif</b> can nest.

              Note: do not prepend whitespace to text between <b>if</b>..<b>endif</b>.

              This feature is available in Postfix 3.2 and later.

       <b>if</b> <b>!</b><u>pattern</u>

       <b>endif</b>  When a search string does not match the specified <u>pattern</u>, match that search  string  against  the
              patterns  between <b>if</b> and <b>endif</b>. The <u>pattern</u> must be in <u>network/prefix</u> or <u>network_address</u> form (see
              ADDRESS PATTERN SYNTAX below). The <b>if</b>..<b>endif</b> can nest.

              Note: do not prepend whitespace to text between <b>if</b>..<b>endif</b>.

              This feature is available in Postfix 3.2 and later.

       blank lines and comments
              Empty lines and whitespace-only lines  are  ignored,  as  are  lines  whose  first  non-whitespace
              character is a `#'.

       multi-line text
              A  logical  line  starts  with non-whitespace text. A line that starts with whitespace continues a
              logical line.

</pre><h4><b>TABLE</b> <b>SEARCH</b> <b>ORDER</b></h4><pre>
       Patterns are applied in the order as specified in the table, until a pattern is found  that  matches  the
       search string.

</pre><h4><b>ADDRESS</b> <b>PATTERN</b> <b>SYNTAX</b></h4><pre>
       Postfix  CIDR  tables  are  pattern-based.  A pattern is either a <u>network_address</u> which requires an exact
       match, or a <u>network_address/prefix_length</u> where the  <u>prefix_length</u>  part  specifies  the  length  of  the
       <u>network_address</u> prefix that must be matched (the other bits in the <u>network_address</u> part must be zero).

       An  IPv4  network  address  is  a  sequence  of four decimal octets separated by ".", and an IPv6 network
       address is a sequence of three to eight hexadecimal octet pairs separated  by  ":"  or  "::",  where  the
       latter  is  short-hand  for a sequence of one or more all-zero octet pairs. The pattern 0.0.0.0/0 matches
       every IPv4 address, and ::/0 matches every IPv6 address.  IPv6 support is available in  Postfix  2.2  and
       later.

       Before  comparisons  are  made,  lookup  keys  and  table  entries  are  converted from string to binary.
       Therefore, IPv6 patterns will be matched regardless of leading zeros (a leading zero in an  IPv4  address
       octet indicates octal notation).

       Note: address information may be enclosed inside "[]" but this form is not required.

</pre><h4><b>INLINE</b> <b>SPECIFICATION</b></h4><pre>
       The contents of a table may be specified in the table name (Postfix 3.7 and later).  The basic syntax is:

       main.cf:
           <u>parameter</u> <b>=</b> <b>..</b> <b>cidr:{</b> <b>{</b> <u>rule-1</u> <b>},</b> <b>{</b> <u>rule-2</u> <b>}</b> <b>..</b> <b>}</b> <b>..</b>

       master.cf:
           <b>..</b> <b>-o</b> <b>{</b> <u>parameter</u> <b>=</b> <b>..</b> <b>cidr:{</b> <b>{</b> <u>rule-1</u> <b>},</b> <b>{</b> <u>rule-2</u> <b>}</b> <b>..</b> <b>}</b> <b>..</b> <b>}</b> <b>..</b>

       Postfix recursively expands any <u>$parametername</u> instances in the above parameter value, ignores whitespace
       after '{' and before '}', and writes each <u>rule</u> as one text line to an in-memory file:

       in-memory file:
           rule-1
           rule-2
           ..

       Postfix parses the result as if it is a file in /etc/postfix.

       Note:  if a rule contains <b>$</b>, specify <b>$$</b> to keep Postfix from trying to do <u>$name</u> expansion as it evaluates
       a parameter value.

</pre><h4><b>EXAMPLE</b> <b>SMTPD</b> <b>ACCESS</b> <b>MAP</b></h4><pre>
       /etc/postfix/main.cf:
           smtpd_client_restrictions = ... cidr:/etc/postfix/client.cidr ...

       /etc/postfix/client.cidr:
           # Rule order matters. Put more specific allowlist entries
           # before more general denylist entries.
           192.168.1.1             OK
           192.168.0.0/16          REJECT
           2001:db8::1             OK
           2001:db8::/32           REJECT

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <a href="../man1/postmap.1.html">postmap</a>(1), Postfix lookup table manager
       <a href="../man5/regexp_table.5.html">regexp_table</a>(5), format of regular expression tables
       <a href="../man5/pcre_table.5.html">pcre_table</a>(5), format of PCRE tables

</pre><h4><b>README</b> <b>FILES</b></h4><pre>
       Use "<b>postconf</b> <b>readme_directory</b>" or "<b>postconf</b> <b>html_directory</b>" to locate this information.
       DATABASE_README, Postfix lookup table overview

</pre><h4><b>HISTORY</b></h4><pre>
       CIDR table support was introduced with Postfix version 2.1.

</pre><h4><b>AUTHOR(S)</b></h4><pre>
       The CIDR table lookup code was originally written by:
       Jozsef Kadlecsik
       KFKI Research Institute for Particle and Nuclear Physics
       POB. 49
       1525 Budapest, Hungary

       Adopted and adapted by:
       Wietse Venema
       IBM T.J. Watson Research
       P.O. Box 704
       Yorktown Heights, NY 10598, USA

       Wietse Venema
       Google, Inc.
       111 8th Avenue
       New York, NY 10011, USA

                                                                                                   <u><a href="../man5/CIDR_TABLE.5.html">CIDR_TABLE</a></u>(5)
</pre>
 </div>
</div></section>
</div>
</body>
</html>