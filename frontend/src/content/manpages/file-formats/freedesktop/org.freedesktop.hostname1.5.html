<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>org.freedesktop.hostname1 - The D-Bus interface of systemd-hostnamed</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/systemd">systemd_257.7-1ubuntu1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       org.freedesktop.hostname1 - The D-Bus interface of systemd-hostnamed

</pre><h4><b>INTRODUCTION</b></h4><pre>
       <b><a href="../man8/systemd-hostnamed.service.8.html">systemd-hostnamed.service</a></b>(8) is a system service that can be used to control the hostname and related
       machine metadata from user programs. This page describes the hostname semantics and the D-Bus interface.

</pre><h4><b>THE</b> <b>D-BUS</b> <b>API</b></h4><pre>
       The service exposes the following interfaces on the bus:

           node /org/freedesktop/hostname1 {
             interface org.freedesktop.hostname1 {
               methods:
                 SetHostname(in  s hostname,
                             in  b interactive);
                 SetStaticHostname(in  s hostname,
                                   in  b interactive);
                 SetPrettyHostname(in  s hostname,
                                   in  b interactive);
                 SetIconName(in  s icon,
                             in  b interactive);
                 SetChassis(in  s chassis,
                            in  b interactive);
                 SetDeployment(in  s deployment,
                               in  b interactive);
                 SetLocation(in  s location,
                             in  b interactive);
                 GetProductUUID(in  b interactive,
                                out ay uuid);
                 GetHardwareSerial(out s serial);
                 Describe(out s json);
               properties:
                 readonly s Hostname = '...';
                 readonly s StaticHostname = '...';
                 readonly s PrettyHostname = '...';
                 @org.freedesktop.DBus.Property.EmitsChangedSignal("const")
                 readonly s DefaultHostname = '...';
                 readonly s HostnameSource = '...';
                 readonly s IconName = '...';
                 readonly s Chassis = '...';
                 readonly s Deployment = '...';
                 readonly s Location = '...';
                 @org.freedesktop.DBus.Property.EmitsChangedSignal("const")
                 readonly s KernelName = '...';
                 @org.freedesktop.DBus.Property.EmitsChangedSignal("const")
                 readonly s KernelRelease = '...';
                 @org.freedesktop.DBus.Property.EmitsChangedSignal("const")
                 readonly s KernelVersion = '...';
                 @org.freedesktop.DBus.Property.EmitsChangedSignal("const")
                 readonly s OperatingSystemPrettyName = '...';
                 @org.freedesktop.DBus.Property.EmitsChangedSignal("const")
                 readonly s OperatingSystemCPEName = '...';
                 @org.freedesktop.DBus.Property.EmitsChangedSignal("const")
                 readonly t OperatingSystemSupportEnd = ...;
                 @org.freedesktop.DBus.Property.EmitsChangedSignal("const")
                 readonly s HomeURL = '...';
                 @org.freedesktop.DBus.Property.EmitsChangedSignal("const")
                 readonly s HardwareVendor = '...';
                 @org.freedesktop.DBus.Property.EmitsChangedSignal("const")
                 readonly s HardwareModel = '...';
                 @org.freedesktop.DBus.Property.EmitsChangedSignal("const")
                 readonly s FirmwareVersion = '...';
                 @org.freedesktop.DBus.Property.EmitsChangedSignal("const")
                 readonly s FirmwareVendor = '...';
                 @org.freedesktop.DBus.Property.EmitsChangedSignal("const")
                 readonly t FirmwareDate = ...;
                 @org.freedesktop.DBus.Property.EmitsChangedSignal("const")
                 readonly ay MachineID = [...];
                 @org.freedesktop.DBus.Property.EmitsChangedSignal("const")
                 readonly ay BootID = [...];
                 @org.freedesktop.DBus.Property.EmitsChangedSignal("const")
                 readonly u VSockCID = ...;
             };
             interface org.freedesktop.DBus.Peer { ... };
             interface org.freedesktop.DBus.Introspectable { ... };
             interface org.freedesktop.DBus.Properties { ... };
           };

       Whenever the hostname or other metadata is changed via the daemon, <b>PropertyChanged</b> signals are sent out
       to subscribed clients. Changing a hostname using this interface is authenticated via <b>polkit</b>[1].

</pre><h4><b>SEMANTICS</b></h4><pre>
       The <u>StaticHostname</u> property exposes the "static" hostname configured in /etc/hostname. It is not always
       in sync with the current hostname as returned by the <b><a href="../man3/gethostname.3.html">gethostname</a></b>(3) system call. If no static hostname is
       configured this property will be the empty string.

       When <b><a href="../man1/systemd.1.html">systemd</a></b>(1) or <b><a href="../man8/systemd-hostnamed.service.8.html">systemd-hostnamed.service</a></b>(8) set the hostname, this static hostname <u>has</u> <u>the</u> <u>highest</u>
       <u>priority</u>.

       The <u>Hostname</u> property exposes the actual hostname configured in the kernel via <b><a href="../man2/sethostname.2.html">sethostname</a></b>(2). It can be
       different from the static hostname. This property is never empty.

       The <u>PrettyHostname</u> property exposes the <u>pretty</u> <u>hostname</u> which is a free-form UTF-8 hostname for
       presentation to the user. User interfaces should ensure that the pretty hostname and the static hostname
       stay in sync. E.g. when the former is "Lennart’s Computer" the latter should be "lennarts-computer". If
       no pretty hostname is set this setting will be the empty string. Applications should then find a suitable
       fallback, such as the dynamic hostname.

       The <u>DefaultHostname</u> property exposes the default hostname (configured through <b><a href="../man5/os-release.5.html">os-release</a></b>(5), or a
       fallback set at compilation time).

       The <u>HostnameSource</u> property exposes the origin of the currently configured hostname. One of "static" (set
       from <a href="file:/etc/hostname">/etc/hostname</a>), "transient" (a non-permanent hostname from an external source), "default" (the value
       from os-release or the compiled-in fallback).

       The <u>IconName</u> property exposes the <u>icon</u> <u>name</u> following the XDG icon naming spec. If not set, information
       such as the chassis type (see below) is used to find a suitable fallback icon name (i.e.
       "computer-laptop" vs.  "computer-desktop" is picked based on the chassis information). If no such data is
       available, the empty string is returned. In that case an application should fall back to a replacement
       icon, for example "computer". If this property is set to the empty string, the automatic fallback name
       selection is enabled again.

       The <u>Chassis</u> property exposes a <u>chassis</u> <u>type</u>, one of the currently defined chassis types: "desktop",
       "laptop", "server", "tablet", "handset", as well as the special chassis types "vm" and "container" for
       virtualized systems. Note that in most cases the chassis type will be determined automatically from
       DMI/SMBIOS/ACPI firmware information. Writing to this setting is hence useful only to override
       misdetected chassis types, or to configure the chassis type if it could not be auto-detected. Set this
       property to the empty string to reenable the automatic detection of the chassis type from firmware
       information.

       Note that systemd-hostnamed starts only on request and terminates after a short idle period. This
       effectively means that <b>PropertyChanged</b> messages are not sent out for changes made directly on the files
       (as in: administrator edits the files with vi). This is the intended behavior: manual configuration
       changes should require manual reloading.

       The transient (dynamic) hostname exposed by the <u>Hostname</u> property maps directly to the kernel hostname.
       This hostname should be assumed to be highly dynamic, and hence should be watched directly, without
       depending on <b>PropertyChanged</b> messages from systemd-hostnamed. To accomplish this, open
       <a href="file:/proc/sys/kernel/hostname">/proc/sys/kernel/hostname</a> and <b><a href="../man3/poll.3.html">poll</a></b>(3) for <b>SIGHUP</b> which is triggered by the kernel every time the hostname
       changes. Again: this is special for the transient (dynamic) hostname, and does not apply to the
       configured (fixed) hostname.

       Applications may read the hostname data directly if hostname change notifications are not necessary. Use
       <b><a href="../man2/gethostname.2.html">gethostname</a></b>(2), <a href="file:/etc/hostname">/etc/hostname</a> (possibly with per-distribution fallbacks), and <b><a href="../man5/machine-info.5.html">machine-info</a></b>(5) for that.
       For more information on these files and syscalls see the respective man pages.

       <u>KernelName</u>, <u>KernelRelease</u>, and <u>KernelVersion</u> expose the kernel name (e.g.  "Linux"), release (e.g.
       "5.0.0-11"), and version (i.e. the build number, e.g.  "#11") as reported by <b><a href="../man2/uname.2.html">uname</a></b>(2).
       <u>OperatingSystemPrettyName</u>, <u>OperatingSystemCPEName</u>, and <u>HomeURL</u> expose the <u>PRETTY_NAME=</u>, <u>CPE_NAME=</u> and
       <u>HOME_URL=</u> fields from <b><a href="../man5/os-release.5.html">os-release</a></b>(5). The purpose of those properties is to allow remote clients to access
       this information over D-Bus. Local clients can access the information directly.

       <u>MachineID</u> expose the 128bit machine ID, see <b><a href="../man5/machine-id.5.html">machine-id</a></b>(5) for details.

       <u>BootID</u> expose the 128bit boot ID, as per /proc/sys/kernel/random/boot_id.

       <u>VSockCID</u> exposes the system's local <b>AF_VSOCK</b> CID (Context Identifier, i.e. address) for the system, if
       one is available in the virtual machine environment. Set to <b>UINT32_MAX</b> otherwise. See <b><a href="../man7/vsock.7.html">vsock</a></b>(7) for
       details.

       <u>OperatingSystemSupportEnd</u> exposes when the OS' vendor support ends, if this information is known. It's an
       unsigned 64bit value, in µs since the UNIX epoch, UTC. If this information is not known carries the value
       2^64-1, i.e.  <b>UINT64_MAX</b>.

       <u>HardwareVendor</u> and <u>HardwareModel</u> expose information about the vendor of the hardware of the system. If no
       such information can be determined these properties are set to empty strings.

       <u>FirmwareVersion</u> and <u>FirmwareVendor</u> expose information about the system's firmware, i.e. a version string
       and a vendor name. If no such information can be determined these properties are set to empty strings.

       <u>FirmwareDate</u> exposes the firmware build date, if that information is known. It's an unsigned 64bit value,
       in µs since the UNIX epoch, UTC. If not known <b>UNIT64_MAX</b>.

   <b>Methods</b>
       <b>SetHostname()</b> sets the transient (dynamic) hostname, which is used if no static hostname is set. This
       value must be an internet-style hostname, 7-bit lowercase ASCII, no special chars/spaces. An empty string
       will unset the transient hostname.

       <b>SetStaticHostname()</b> sets the static hostname which is exposed by the <u>StaticHostname</u> property. When called
       with an empty argument, the static configuration in <a href="file:/etc/hostname">/etc/hostname</a> is removed. Since the static hostname
       has the highest priority, calling this function usually affects also the <u>Hostname</u> property and the
       effective hostname configured in the kernel.

       <b>SetPrettyHostname()</b> sets the pretty hostname which is exposed by the <u>PrettyHostname</u> property.

       <b>SetIconName()</b>, <b>SetChassis()</b>, <b>SetDeployment()</b>, and <b>SetLocation()</b> set the properties <u>IconName</u> (the name of
       the icon representing for the machine), <u>Chassis</u> (the machine form factor), <u>Deployment</u> (the system
       deployment environment), and <u>Location</u> (physical system location), respectively.

       <u>PrettyHostname</u>, <u>IconName</u>, <u>Chassis</u>, <u>Deployment</u>, and <u>Location</u> are stored in /etc/machine-info. See <b><a href="../man5/machineinfo.5.html">machine-</a></b>
       <b><a href="../man5/machineinfo.5.html">info</a></b>(5) for the semantics of those settings.

       <b>GetProductUUID()</b> returns the "product UUID" as exposed by the kernel based on DMI information in
       /sys/class/dmi/id/product_uuid. Reading the file directly requires root privileges, and this method
       allows access to unprivileged clients through the polkit framework.

       <b>GetHardwareSerial()</b> returns the "hardware serial" as exposed by the kernel based on DMI information.
       Reading the file directly requires root privileges, and this method allows access to unprivileged clients
       through the polkit framework.

       <b>Describe()</b> returns a JSON representation of all properties in one.

   <b>Security</b>
       The <u>interactive</u> boolean parameters can be used to control whether polkit should interactively ask the
       user for authentication credentials if required.

       The polkit action for <b>SetHostname()</b> is org.freedesktop.hostname1.set-hostname. For <b>SetStaticHostname()</b>
       and <b>SetPrettyHostname()</b> it is org.freedesktop.hostname1.set-static-hostname. For <b>SetIconName()</b>,
       <b>SetChassis()</b>, <b>SetDeployment()</b> and <b>SetLocation()</b> it is org.freedesktop.hostname1.set-machine-info.

</pre><h4><b>RECOMMENDATIONS</b></h4><pre>
       Here are three examples that show how the pretty hostname and the icon name should be used:

       •   When registering DNS-SD services: use the pretty hostname in the service name, and pass the icon name
           in the TXT data, if there is an icon name. Browsing clients can then show the server icon on each
           service. This is especially useful for WebDAV applications or UPnP media sharing.

       •   Set the bluetooth name to the pretty hostname.

       •   When your file browser has a "Computer" icon, replace the name with the pretty hostname if set, and
           the icon with the icon name, if it is set.

       To properly handle name lookups with changing local hostnames without having to edit <a href="file:/etc/hosts">/etc/hosts</a>, we
       recommend using systemd-hostnamed in combination with <b><a href="../man8/nss-myhostname.8.html">nss-myhostname</a></b>(8).

       Here are some recommendations to follow when generating a static (internet) hostname from a pretty name:

       •   Generate a single DNS label only, not an FQDN. That means no dots allowed. Strip them, or replace
           them with "-".

       •   It's probably safer to not use any non-ASCII chars, even if DNS allows this in some way these days.
           In fact, restrict your charset to "a-zA-Z0-9" and "-". Strip other chars, or try to replace them in
           some smart way with chars from this set, for example "ä" → "ae", and use "-" as the replacement for
           all punctuation characters and whitespace.

       •   Try to avoid creating repeated "-", as well as "-" as the first or last char.

       •   Limit the hostname to 63 chars, which is the length of a DNS label.

       •   If after stripping special chars the empty string is the result, you can pass this as-is to
           systemd-hostnamed in which case it will automatically use a suitable fallback.

       •   Uppercase characters should be replaced with their lowercase equivalents.

       Note that while systemd-hostnamed applies some checks to the hostname you pass they are much looser than
       the recommendations above. For example, systemd-hostnamed will also accept "_" in the hostname, but we
       recommend not using this to avoid clashes with DNS-SD service types. Also systemd-hostnamed allows longer
       hostnames, but because of the DNS label limitations, we recommend not making use of this.

       Here are a couple of example conversions:

       •   "Lennart's PC" → "lennarts-pc"

       •   "Müllers Computer" → "muellers-computer"

       •   "Voran!"  → "voran"

       •   "Es war einmal ein Männlein" → "es-war-einmal-ein-maennlein"

       •   "Jawoll. Ist doch wahr!"  → "jawoll-ist-doch-wahr"

       •   "レナート" → "localhost"

       •   "...zack!!! zack!..."  → "zack-zack"

       Of course, an already valid internet hostname label you enter and pass through this conversion should
       stay unmodified, so that users have direct control of it, if they want — by simply ignoring the fact that
       the pretty hostname is pretty and just edit it as if it was the normal internet name.

</pre><h4><b>EXAMPLES</b></h4><pre>
       <b>Example</b> <b>1.</b> <b>Introspect</b> <b>org.freedesktop.hostname1</b> <b>on</b> <b>the</b> <b>bus</b>

           $ gdbus introspect --system \
             --dest org.freedesktop.hostname1 \
             --object-path /org/freedesktop/hostname1

</pre><h4><b>VERSIONING</b></h4><pre>
       These D-Bus interfaces follow <b>the</b> <b>usual</b> <b>interface</b> <b>versioning</b> <b>guidelines</b>[2].

</pre><h4><b>HISTORY</b></h4><pre>
   <b>The</b> <b>D-Bus</b> <b>API</b>
       <u>FirmwareVersion</u> and <b>GetHardwareSerial()</b> were added in version 251.

       <u>OperatingSystemSupportEnd</u>, <u>FirmwareVendor</u>, and <u>FirmwareDate</u> were added in version 253.

       <u>MachineID</u>, <u>BootID</u> and <u>VSockCID</u> were added in version 256.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man1/systemd.1.html">systemd</a></b>(1), <b><a href="../man8/systemd-hostnamed.service.8.html">systemd-hostnamed.service</a></b>(8), <b><a href="../man1/hostnamectl.1.html">hostnamectl</a></b>(1), David Zeuthen's original Fedora <b>Feature</b> <b>page</b>
       <b>about</b> <b>xdg-hostname</b>[3]

</pre><h4><b>NOTES</b></h4><pre>
        1. polkit
           https://www.freedesktop.org/software/polkit/docs/latest/

        2. the usual interface versioning guidelines
           https://0pointer.de/blog/projects/versioning-dbus.html

        3. Feature page about xdg-hostname
           https://fedoraproject.org/wiki/Features/BetterHostname

systemd 257.7                                                                       <u><a href="../man5/ORG.FREEDESKTOP.HOSTNAME1.5.html">ORG.FREEDESKTOP.HOSTNAME1</a></u>(5)
</pre>
 </div>
</div></section>
</div>
</body>
</html>