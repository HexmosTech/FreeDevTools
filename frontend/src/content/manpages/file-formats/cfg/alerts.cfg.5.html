<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>alerts.cfg - Configuration for for xymond_alert module</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/xymon">xymon_4.3.30-4_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       alerts.cfg - Configuration for for xymond_alert module

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>~xymon/server/etc/alerts.cfg</b>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The alerts.cfg file controls the sending of alerts by Xymon when monitoring detects a failure.

</pre><h4><b>FILE</b> <b>FORMAT</b></h4><pre>
       The  configuration  file  consists of <b>rules</b>, that may have one or more <b>recipients</b> associated. A recipient
       specification may include additional rules that limit the circumstances when this recipient  is  eligible
       for receiving an alert.

       Blank  lines and lines starting with a hash mark (#) are treated as comments and ignored.  Long lines can
       be broken up by putting a backslash at the end of the line and continuing the entry on the next line.

</pre><h4><b>RULES</b></h4><pre>
       A rule consists of one of more filters using these keywords:

       <b>PAGE=targetstring</b> Rule matching an alert by the name of the page in Xymon. This is the path of  the  page
       as defined in the hosts.cfg file. E.g. if you have this setup:

              page servers All Servers
              subpage web Webservers
              10.0.0.1 www1.foo.com
              subpage db Database servers
              10.0.0.2 db1.foo.com

       Then the "All servers" page is found with <b>PAGE=servers</b>, the "Webservers" page is <b>PAGE=servers/web</b> and the
       "Database servers" page is <b>PAGE=servers/db</b>. Note that you can also use regular expressions to specify the
       page  name,  e.g.  <b>PAGE=%.*/db</b>  would  find the "Database servers" page regardless of where this page was
       placed in the hierarchy.

       The PAGE name of top-level page is an empty string. To match  this,  use  <b>PAGE=%^$</b>  to  match  the  empty
       string.

       <b>EXPAGE=targetstring</b> Rule excluding an alert if the pagename matches.

       <b>DISPLAYGROUP=groupstring</b>  Rule  matching  an  alert  by the text of the display-group (text following the
       group, group-only, group-except heading) in the hosts.cfg file. "groupstring" is the text for the  group,
       stripped of any HTML tags. E.g. if you have this setup:

              group Web
              10.0.0.1 www1.foo.com
              10.0.0.2 www2.foo.com
              group Production databases
              10.0.1.1 db1.foo.com

       Then  the  hosts  in  the Web-group can be matched with <b>DISPLAYGROUP=Web</b>, and the database servers can be
       matched with <b>DISPLAYGROUP="Production</b> <b>databases"</b>.  Note that you can also use regular  expressions,  e.g.
       <b>DISPLAYGROUP=%database</b>.  If there is no group-setting for the host, use "DISPLAYGROUP=NONE".

       <b>EXDISPLAYGROUP=groupstring</b> Rule excluding a group by matching the display-group string.

       <b>HOST=targetstring</b> Rule matching an alert by the hostname.

       <b>EXHOST=targetstring</b> Rule excluding an alert by matching the hostname.

       <b>SERVICE=targetstring</b> Rule matching an alert by the service name.

       <b>EXSERVICE=targetstring</b> Rule excluding an alert by matching the service name.

       <b>GROUP=groupname</b>  Rule  matching  an  alert by the group name. Groupnames are assigned to a status via the
       GROUP setting in the analysis.cfg file.

       <b>EXGROUP=groupname</b> Rule excluding an alert by the group name. Groupnames are assigned to a status via  the
       GROUP setting in the analysis.cfg file.

       <b>CLASS=classname</b>  Rule  matching an alert by the class that the host belongs to. By default, the classname
       is the operating system name; you can set another class either in <u><a href="../man5/hosts.cfg.5.html">hosts.cfg</a>(5)</u> using the CLASS tag, or  a
       client running on the server can set the class (via a parameter to the client startup-script).

       <b>EXCLASS=classname</b> Rule excluding an alert by the class name.

       <b>COLOR=color[,color]</b>  Rule  matching  an  alert  by  color. Can be "red", "yellow", or "purple". The forms
       "!red", "!yellow" and "!purple" can also be used to NOT send an alert if the color is the specified one.

       <b>TIME=timespecification</b> Rule matching an alert by the time-of-day.  This  is  specified  as  the  DOWNTIME
       timespecification in the hosts.cfg file.

       <b>EXTIME=timespecification</b>  Rule  excluding  an alert by the time-of-day. This is specified as the DOWNTIME
       timespecification in the hosts.cfg file.

       <b>DURATION&gt;time,</b> <b>DURATION&lt;time</b> Rule matching an alert if the event has lasted longer/shorter than the given
       duration. E.g. DURATION&gt;1h (lasted longer than 1 hour) or DURATION&lt;30 (only sends  alerts  the  first  30
       minutes).  The  duration  is  specified  as  a number, optionally followed by 'm' (minutes, default), 'h'
       (hours) or 'd' (days).

       <b>RECOVERED</b> Rule matches if the alert has recovered from an alert state.

       <b>NOTICE</b> Rule matches if the message is a "notify" message. This type of message is sent  when  a  host  or
       test is disabled or enabled.

       The  "targetstring"  is  either  a simple pagename, hostname or servicename, OR a '%' followed by a Perl-
       compatible regular expression. E.g. "HOST=%www(.*)" will match any hostname that begins with  "www".  The
       same for the "groupname" setting.

</pre><h4><b>RECIPIENTS</b></h4><pre>
       The  recipients  are  listed  after  the  initial  rule.  The  following  keywords  can be used to define
       recipients:

       <b>MAIL</b> <b>address[,address]</b> Recipient who receives an e-mail alert.  This  takes  one  parameter,  the  e-mail
       address.   The  strings  "&amp;host&amp;",  "&amp;service&amp;"  and  "&amp;color&amp;"  in  an address will be replaced with the
       hostname, service and color of the alert, respectively.

       <b>SCRIPT</b> <b>/path/to/script</b> <b>recipientID</b> Recipient that invokes a script. This takes two parameters: The script
       filename, and the recipient that gets passed to  the  script.   The  strings  "&amp;host&amp;",  "&amp;service&amp;"  and
       "&amp;color&amp;"  in  the  recipientID  will  be  replaced  with  the  hostname, service and color of the alert,
       respectively.

       <b>IGNORE</b> This is used to define a recipient that does NOT trigger  any  alerts,  and  also  terminates  the
       search  for  more recipients. It is useful if you have a rule that handles most alerts, but there is just
       that one particular server where you don't want cpu alerts on  Monday  morning.   Note  that  the  IGNORE
       recipient  always  has the STOP flag defined, so when the IGNORE recipient is matched, no more recipients
       will be considered. So the location of this recipient in your set of recipients is important.

       <b>FORMAT=formatstring</b> Format of the text message with the alert. Default is  "TEXT"  (suitable  for  e-mail
       alerts).  "PLAIN"  is  the same as text, but without the URL link to the status webpage. "SMS" is a short
       message with no subject for SMS alerts. "SCRIPT" is a brief message template for scripts.

       <b>REPEAT=time</b> How often an alert gets repeated. As with DURATION, time is a number optionally  followed  by
       'm', 'h' or 'd'.

       <b>UNMATCHED</b>  The  alert  is  sent  to this recipient ONLY if no other recipients received an alert for this
       event.

       <b>STOP</b> Stop looking for more recipients after this one matches. This is implicit on IGNORE recipients.

       <b>Rules</b> You can specify rules for a recipient  also.  This  limits  the  alerts  sent  to  this  particular
       recipient.

</pre><h4><b>MACROS</b></h4><pre>
       It is possible to use <b>macros</b> in the configuration file. To define a macro:

            $MYMACRO=text extending to end of line

       After  the definition of a macro, it can be used throughout the file. Wherever the text $MYMACRO appears,
       it will be substituted with the text of the macro before any processing of rules and recipients.

       It is possible to nest macros, as long as the macro is defined before it is used.

</pre><h4><b>ALERT</b> <b>SCRIPTS</b></h4><pre>
       Alerts can go out via custom scripts, by using the SCRIPT keyword for a  recipient.   Such  scripts  have
       access to the following environment variables:

       <b>BBALPHAMSG</b> The full text of the status log triggering the alert

       <b>ACKCODE</b> The "cookie" that can be used to acknowledge the alert

       <b>RCPT</b> The recipientID from the SCRIPT entry

       <b>BBHOSTNAME</b> The name of the host that the alert is about

       <b>MACHIP</b> The IP-address of the host that has a problem

       <b>BBSVCNAME</b> The name of the service that the alert is about

       <b>BBSVCNUM</b> The numeric code for the service. From the SVCCODES definition.

       <b>BBHOSTSVC</b> HOSTNAME.SERVICE that the alert is about.

       <b>BBHOSTSVCCOMMAS</b> As BBHOSTSVC, but dots in the hostname replaced with commas

       <b>BBNUMERIC</b> A 22-digit number made by BBSVCNUM, MACHIP and ACKCODE.

       <b>RECOVERED</b>  Is  "0"  if  the service is alerting, "1" if the service has recovered, "2" if the service was
       disabled.

       <b>EVENTSTART</b> Timestamp when the current status (color) began.

       <b>SECS</b> Number of seconds the service has been down.

       <b>DOWNSECSMSG</b> When recovered, holds the text "Event duration : N" where N is the DOWNSECS value.

       <b>CFID</b> Line-number in the alerts.cfg file that caused the  script  to  be  invoked.   Can  be  useful  when
       troubleshooting alert configuration rules.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <a href="../man8/xymond_alert.8.html">xymond_alert</a>(8), <a href="../man8/xymond.8.html">xymond</a>(8), <a href="../man7/xymon.7.html">xymon</a>(7), the "Configuring Xymon Alerts" guide in the Online documentation.

Xymon                                      Version 4.3.30:  4 Sep 2019                             <u><a href="../man5/ALERTS.CFG.5.html">ALERTS.CFG</a></u>(5)
</pre>
 </div>
</div></section>
</div>
</body>
</html>