<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>exclusion - Exclude a set of hosts from a definition in a shorewall configuration file.</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/shorewall">shorewall_5.2.8-6_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       exclusion - Exclude a set of hosts from a definition in a shorewall configuration file.

</pre><h4><b>SYNOPSIS</b></h4><pre>

       <b>!</b><u>address-or-range</u>[,<u>address-or-range</u>]...

       <b>!</b><u>zone-name</u>[,<u>zone-name</u>]...

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The first form of exclusion is used when you wish to exclude one or more addresses from a definition. An
       exclamation point is followed by a comma-separated list of addresses. The addresses may be single host
       addresses (e.g., 192.168.1.4) or they may be network addresses in CIDR format (e.g., 192.168.1.0/24). If
       your kernel and iptables include iprange support, you may also specify ranges of ip addresses of the form
       <u>lowaddress</u>-<u>highaddress</u>

       No embedded white-space is allowed.

       Exclusion can appear after a list of addresses and/or address ranges. In that case, the final list of
       address is formed by taking the first list and then removing the addresses defined in the exclusion.

       Beginning in Shorewall 4.4.13, the second form of exclusion is allowed after <b>all</b> and <b>any</b> in the SOURCE
       and DEST columns of <b>shorewall-rules</b>[1](5). It allows you to omit arbitrary zones from the list generated
       by those key words.

           <b>Warning</b>

           If you omit a sub-zone and there is an explicit or explicit CONTINUE policy, a connection to/from
           that zone can still be matched by the rule generated for a parent zone.

           For example:

           /etc/shorewall/zones:

               #ZONE          TYPE
               z1             ip
               z2:z1          ip
               ...

           /etc/shorewall/policy:

               #SOURCE         DEST          POLICY
               z1              net           CONTINUE
               z2              net           REJECT

           /etc/shorewall/rules:

               #ACTION         SOURCE        DEST        PROTO         DPORT
               ACCEPT          all!z2        net         tcp           22

           In this case, SSH connections from <b>z2</b> to <b>net</b> will be accepted by the generated <b>z1</b> to net ACCEPT rule.

       In most contexts, ipset names can be used as an <u>address-or-range</u>. Beginning with Shorewall 4.4.14, ipset
       lists enclosed in +[...] may also be included (see <b>shorewall-ipsets</b>[2] (5)). The semantics of these lists
       when used in an exclusion are as follows:

       •   !+[<u>set1</u>,<u>set2</u>,...<u>setN</u>] produces a packet match if the packet does not match at least one of the sets.
           In other words, it is like NOT match <u>set1</u> OR NOT match <u>set2</u> ... OR NOT match <u>setN</u>.

       •   +[!<u>set1</u>,!<u>set2</u>,...!<u>setN</u>] produces a packet match if the packet does not match any of the sets. In
           other words, it is like NOT match <u>set1</u> AND NOT match <u>set2</u> ... AND NOT match <u>setN</u>.

</pre><h4><b>EXAMPLES</b></h4><pre>
       IPv4 Example 1 - All IPv4 addresses except 192.168.3.4
           !192.168.3.4

       IPv4 Example 2 - All IPv4 addresses except the network 192.168.1.0/24 and the host 10.2.3.4
           !192.168.1.0/24,10.1.3.4

       IPv4 Example 3 - All IPv4 addresses except the range 192.168.1.3-192.168.1.12 and the network 10.0.0.0/8
           !192.168.1.3-192.168.1.12,10.0.0.0/8

       IPv4 Example 4 - The network 192.168.1.0/24 except hosts 192.168.1.3 and 192.168.1.9
           192.168.1.0/24!192.168.1.3,192.168.1.9

       Example 5 - All parent zones except loc
           any!loc

</pre><h4><b>FILES</b></h4><pre>
       /etc/shorewall/hosts

       /etc/shorewall/masq

       /etc/shorewall/rules

       /etc/shorewall/tcrules

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <a href="../man8/shorewall.8.html">shorewall</a>(8)

</pre><h4><b>NOTES</b></h4><pre>
        1. shorewall-rules
           https://shorewall.org/manpages/shorewall-rules.html

        2. shorewall-ipsets
           https://shorewall.org/manpages/shorewall-ipsets.html

Configuration Files                                09/24/2020                             <u><a href="../man5/SHOREWALL-EXCLUSION.5.html">SHOREWALL-EXCLUSION</a></u>(5)
</pre>
 </div>
</div></section>
</div>
</body>
</html>