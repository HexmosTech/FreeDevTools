<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>krb5.conf - Kerberos configuration file</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/krb5-doc">krb5-doc_1.21.3-5ubuntu1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       krb5.conf - Kerberos configuration file

       The krb5.conf file contains Kerberos configuration information, including the locations of KDCs and admin
       servers  for  the  Kerberos  realms  of  interest,  defaults  for  the  current  realm  and  for Kerberos
       applications, and mappings of  hostnames  onto  Kerberos  realms.   Normally,  you  should  install  your
       krb5.conf  file  in the directory <b><a href="file:/etc">/etc</a></b>.  You can override the default location by setting the environment
       variable <b>KRB5_CONFIG</b>.  Multiple colon-separated filenames may be  specified  in  <b>KRB5_CONFIG</b>;  all  files
       which  are  present  will  be  read.   Starting in release 1.14, directory names can also be specified in
       <b>KRB5_CONFIG</b>; all files within the directory  whose  names  consist  solely  of  alphanumeric  characters,
       dashes, or underscores will be read.

</pre><h4><b>STRUCTURE</b></h4><pre>
       The  krb5.conf  file  is  set  up  in  the  style of a Windows INI file.  Lines beginning with '#' or ';'
       (possibly after initial whitespace) are ignored as comments.  Sections are headed by the section name, in
       square brackets.  Each section may contain zero or more relations, of the form:

          foo = bar

       or:

          fubar = {
              foo = bar
              baz = quux
          }

       Placing a '*' after the closing bracket of a section name indicates that the section  is  <u>final</u>,  meaning
       that  if  the  same  section appears within a later file specified in <b>KRB5_CONFIG</b>, it will be ignored.  A
       subsection can be marked as final by placing a '*' after either the tag name or the closing brace.

       The krb5.conf file can include other files using either of the following directives at the beginning of a
       line:

          include FILENAME
          includedir DIRNAME

       <u>FILENAME</u> or <u>DIRNAME</u> should be an absolute path. The named file or directory must exist and  be  readable.
       Including  a directory includes all files within the directory whose names consist solely of alphanumeric
       characters, dashes, or underscores.  Starting in release 1.15, files with names  ending  in  ".conf"  are
       also  included, unless the name begins with ".".  Included profile files are syntactically independent of
       their parents, so each included file must begin with a section header.  Starting in release  1.17,  files
       are read in alphanumeric order; in previous releases, they may be read in any order.

       The  krb5.conf file can specify that configuration should be obtained from a loadable module, rather than
       the file itself, using the following directive at the beginning of a line before any section headers:

          module MODULEPATH:RESIDUAL

       <u>MODULEPATH</u> may be relative to the library path of the krb5 installation, or it may be an  absolute  path.
       <u>RESIDUAL</u>  is  provided  to  the  module  at  initialization  time.  If krb5.conf uses a module directive,
       <a href="../man5/kdc.conf.5.html">kdc.conf</a>(5) should also use one if it exists.

</pre><h4><b>SECTIONS</b></h4><pre>
       The krb5.conf file may contain the following sections:
                              ──────────────────────────────────────────────────────────
                                <u>[libdefaults]</u>    Settings  used  by  the  Kerberos  V5
                                                 library
                              ──────────────────────────────────────────────────────────
                                <u>[realms]</u>         Realm-specific   contact  information
                                                 and settings
                              ──────────────────────────────────────────────────────────
                                <u>[domain_realm]</u>   Maps  server  hostnames  to  Kerberos
                                                 realms
                              ──────────────────────────────────────────────────────────
                                <u>[capaths]</u>        Authentication        paths       for
                                                 non-hierarchical cross-realm
                              ──────────────────────────────────────────────────────────
                                <u>[appdefaults]</u>    Settings used  by  some  Kerberos  V5
                                                 applications
                              ──────────────────────────────────────────────────────────
                                <u>[plugins]</u>        Controls plugin module registration
                              ┌────────────────┬───────────────────────────────────────┐
                              │                │                                       │
--
</pre><h4><b>PKINIT</b> <b>OPTIONS</b></h4><pre>
       <b>NOTE:</b>
          The  following  are PKINIT-specific options.  These values may be specified in [libdefaults] as global
          defaults,  or  within  a  realm-specific  subsection  of  [libdefaults],  or  may  be   specified   as
          realm-specific  values  in  the  [realms]  section.   A realm-specific value overrides, not adds to, a
          generic [libdefaults] specification.  The search order is:

       1. realm-specific subsection of [libdefaults]:

             [libdefaults]
                 EXAMPLE.COM = {
                     pkinit_anchors = FILE:/usr/local/example.com.crt
                 }

       2. realm-specific value in the [realms] section:

             [realms]
                 OTHERREALM.ORG = {
                     pkinit_anchors = FILE:/usr/local/otherrealm.org.crt
                 }

       3. generic value in the [libdefaults] section:

             [libdefaults]
                 pkinit_anchors = DIR:/usr/local/generic_trusted_cas/

   <b>Specifying</b> <b>PKINIT</b> <b>identity</b> <b>information</b>
       The syntax for specifying Public Key identity,  trust,  and  revocation  information  for  PKINIT  is  as
       follows:

       <b>FILE:</b><u>filename</u>[<b>,</b><u>keyfilename</u>]
              This option has context-specific behavior.

              In  <b>pkinit_identity</b>  or  <b>pkinit_identities</b>,  <u>filename</u>  specifies  the  name  of  a PEM-format file
              containing the user's certificate.  If <u>keyfilename</u> is not specified, the  user's  private  key  is
              expected to be in <u>filename</u> as well.  Otherwise, <u>keyfilename</u> is the name of the file containing the
              private key.

              In <b>pkinit_anchors</b> or <b>pkinit_pool</b>, <u>filename</u> is assumed to be the name of an OpenSSL-style ca-bundle
              file.

       <b>DIR:</b><u>dirname</u>
              This option has context-specific behavior.

              In  <b>pkinit_identity</b> or <b>pkinit_identities</b>, <u>dirname</u> specifies a directory with files named <b>*.crt</b> and
              <b>*.key</b> where the first part of the file name is the same for  matching  pairs  of  certificate  and
              private key files.  When a file with a name ending with <b>.crt</b> is found, a matching file ending with
              <b>.key</b> is assumed to contain the private key.  If no such file is found, then the certificate in the
              <b>.crt</b> is not used.

              In  <b>pkinit_anchors</b>  or  <b>pkinit_pool</b>, <u>dirname</u> is assumed to be an OpenSSL-style hashed CA directory
              where each CA  cert  is  stored  in  a  file  named  <b>hash-of-ca-cert.#</b>.   This  infrastructure  is
              encouraged,  but  all files in the directory will be examined and if they contain certificates (in
              PEM format), they will be used.

              In <b>pkinit_revoke</b>, <u>dirname</u> is assumed to  be  an  OpenSSL-style  hashed  CA  directory  where  each
              revocation  list is stored in a file named <b>hash-of-ca-cert.r#</b>.  This infrastructure is encouraged,
              but all files in the directory will be examined and if they contain  a  revocation  list  (in  PEM
              format), they will be used.

       <b>PKCS12:</b><u>filename</u>
              <u>filename</u> is the name of a PKCS #12 format file, containing the user's certificate and private key.

       <b>PKCS11:</b>[<b>module_name=</b>]<u>modname</u>[<b>:slotid=</b><u>slot-id</u>][<b>:token=</b><u>token-label</u>][<b>:certid=</b><u>cert-id</u>][<b>:certlabel=</b><u>cert-label</u>]
              All  keyword/values  are  optional.  <u>modname</u> specifies the location of a library implementing PKCS
              #11.  If a value is encountered with no  keyword,  it  is  assumed  to  be  the  <u>modname</u>.   If  no
              module-name is specified, the default is <b>opensc-pkcs11.so</b>.  <b>slotid=</b> and/or <b>token=</b> may be specified
              to  force  the use of a particular smard card reader or token if there is more than one available.
              <b>certid=</b> and/or <b>certlabel=</b> may be specified to force the selection of a particular  certificate  on
              the  device.   See the <b>pkinit_cert_match</b> configuration option for more ways to select a particular
              certificate to use for PKINIT.

       <b>ENV:</b><u>envvar</u>
              <u>envvar</u> specifies the name of an environment variable which has been set to a value  conforming  to
              one  of  the  previous values.  For example, <b>ENV:X509_PROXY</b>, where environment variable <b>X509_PROXY</b>
              has been set to <b>FILE:/tmp/my_proxy.pem</b>.

   <b>PKINIT</b> <b>krb5.conf</b> <b>options</b>
       <b>pkinit_anchors</b>
              Specifies the location of trusted anchor (root) certificates which the client trusts to  sign  KDC
              certificates.  This option may be specified multiple times.  These values from the config file are
              not used if the user specifies X509_anchors on the command line.

       <b>pkinit_cert_match</b>
              Specifies  matching  rules  that  the  client  certificate must match before it is used to attempt
              PKINIT authentication.  If a user has multiple certificates available (on a  smart  card,  or  via
              other   media),   there   must   be  exactly  one  certificate  chosen  before  attempting  PKINIT
              authentication.  This option may be specified multiple times.  All the available certificates  are
              checked against each rule in order until there is a match of exactly one certificate.

              The  Subject  and  Issuer  comparison  strings  are  the  <u>RFC</u> <u>2253</u> string representations from the
              certificate Subject DN and Issuer DN values.

              The syntax of the matching rules is:
                 [<u>relation-operator</u>]<u>component-rule</u> ...

              where:

              <u>relation-operator</u>
                     can be either <b>&amp;&amp;</b>, meaning all component rules must match, or <b>||</b>, meaning only one component
                     rule must match.  The default is <b>&amp;&amp;</b>.

              <u>component-rule</u>
                     can be one of the following.  Note that there  is  no  punctuation  or  whitespace  between
                     component rules.
                        <b>&lt;SUBJECT&gt;</b><u>regular-expression</u>
                        <b>&lt;ISSUER&gt;</b><u>regular-expression</u>
                        <b>&lt;SAN&gt;</b><u>regular-expression</u>
                        <b>&lt;EKU&gt;</b><u>extended-key-usage-list</u>
                        <b>&lt;KU&gt;</b><u>key-usage-list</u>

                     <u>extended-key-usage-list</u>  is  a  comma-separated list of required Extended Key Usage values.
                     All values in the list must be present in the certificate.  Extended Key Usage  values  can
                     be:

                     • pkinit

                     • msScLogin

                     • clientAuth

                     • emailProtection

                     <u>key-usage-list</u>  is  a comma-separated list of required Key Usage values.  All values in the
                     list must be present in the certificate.  Key Usage values can be:

                     • digitalSignature

                     • keyEncipherment

              Examples:

                 pkinit_cert_match = ||&lt;SUBJECT&gt;.*DoE.*&lt;SAN&gt;.*@EXAMPLE.COM
                 pkinit_cert_match = &amp;&amp;&lt;EKU&gt;msScLogin,clientAuth&lt;ISSUER&gt;.*DoE.*
                 pkinit_cert_match = &lt;EKU&gt;msScLogin,clientAuth&lt;KU&gt;digitalSignature

       <b>pkinit_eku_checking</b>
              This option specifies what Extended Key Usage value the KDC certificate presented  to  the  client
              must  contain.  (Note that if the KDC certificate has the pkinit SubjectAlternativeName encoded as
              the Kerberos TGS name, EKU checking is not necessary since the issuing CA has certified this as  a
              KDC certificate.)  The values recognized in the krb5.conf file are:

              <b>kpKDC</b>  This  is  the default value and specifies that the KDC must have the id-pkinit-KPKdc EKU as
                     defined in <u>RFC</u> <u>4556</u>.

              <b>kpServerAuth</b>
                     If <b>kpServerAuth</b> is specified, a KDC certificate  with  the  id-kp-serverAuth  EKU  will  be
                     accepted.  This key usage value is used in most commercially issued server certificates.

              <b>none</b>   If  <b>none</b>  is  specified,  then  the KDC certificate will not be checked to verify it has an
                     acceptable EKU.  The use of this option is not recommended.

       <b>pkinit_dh_min_bits</b>
              Specifies the size of the Diffie-Hellman key the client  will  attempt  to  use.   The  acceptable
              values are 1024, 2048, and 4096.  The default is 2048.

       <b>pkinit_identities</b>
              Specifies  the  location(s)  to  be  used  to find the user's X.509 identity information.  If this
              option is specified multiple times, each value is attempted in order until certificates are found.
              Note that these values are not used if the user specifies <b>X509_user_identity</b> on the command line.

       <b>pkinit_kdc_hostname</b>
              The presence of this option indicates that the client is willing to accept a KDC certificate  with
              a dNSName SAN (Subject Alternative Name) rather than requiring the id-pkinit-san as defined in <u>RFC</u>
              <u>4556</u>.   This  option  may  be  specified  multiple times.  Its value should contain the acceptable
              hostname for the KDC (as contained in its certificate).

       <b>pkinit_pool</b>
              Specifies the location of intermediate certificates which may be used by the  client  to  complete
              the  trust  chain  between  a  KDC certificate and a trusted anchor.  This option may be specified
              multiple times.

       <b>pkinit_require_crl_checking</b>
              The  default  certificate  verification  process  will  always  check  the  available   revocation
              information  to see if a certificate has been revoked.  If a match is found for the certificate in
              a CRL, verification fails.  If the certificate being verified is not listed in a CRL, or there  is
              no  CRL  present  for  its issuing CA, and <b>pkinit_require_crl_checking</b> is false, then verification
              succeeds.

              However, if <b>pkinit_require_crl_checking</b> is true and there is no CRL information available for  the
              issuing CA, then verification fails.

              <b>pkinit_require_crl_checking</b>  should be set to true if the policy is such that up-to-date CRLs must
              be present for every CA.

       <b>pkinit_revoke</b>
              Specifies the location of Certificate Revocation List (CRL) information to be used by  the  client
              when  verifying  the  validity  of  the  KDC  certificate presented.  This option may be specified
              multiple times.

</pre><h4><b>PARAMETER</b> <b>EXPANSION</b></h4><pre>
       Starting with release 1.11, several variables,  such  as  <b>default_keytab_name</b>,  allow  parameters  to  be
       expanded.  Valid parameters are:
                              ─────────────────────────────────────────────────────────────
                                %{TEMP}             Temporary directory
                              ─────────────────────────────────────────────────────────────
                                %{uid}              Unix real UID or Windows SID
                              ─────────────────────────────────────────────────────────────
                                %{euid}             Unix effective user ID or Windows SID
                              ─────────────────────────────────────────────────────────────
                                %{USERID}           Same as %{uid}
                              ─────────────────────────────────────────────────────────────
                                %{null}             Empty string
                              ─────────────────────────────────────────────────────────────
                                %{LIBDIR}           Installation library directory
                              ─────────────────────────────────────────────────────────────
                                %{BINDIR}           Installation binary directory
                              ─────────────────────────────────────────────────────────────
                                %{SBINDIR}          Installation admin binary directory
                              ─────────────────────────────────────────────────────────────
                                %{username}         (Unix) Username of effective user ID
                              ─────────────────────────────────────────────────────────────
                                %{APPDATA}          (Windows)  Roaming  application  data
                                                    for current user
                              ─────────────────────────────────────────────────────────────
                                %{COMMON_APPDATA}   (Windows) Application  data  for  all
                                                    users
                              ─────────────────────────────────────────────────────────────
                                %{LOCAL_APPDATA}    (Windows)  Local application data for
                                                    current user
                              ─────────────────────────────────────────────────────────────
                                %{SYSTEM}           (Windows) Windows system folder
                              ─────────────────────────────────────────────────────────────
                                %{WINDOWS}          (Windows) Windows folder
                              ─────────────────────────────────────────────────────────────
                                %{USERCONFIG}       (Windows) Per-user  MIT  krb5  config
                                                    file directory
                              ─────────────────────────────────────────────────────────────
                                %{COMMONCONFIG}     (Windows) Common MIT krb5 config file
                                                    directory
                              ┌───────────────────┬───────────────────────────────────────┐
                              │                   │                                       │
<b>SAMPLE</b> <b>KRB5.CONF</b> <b>FILE</b>         │                   │                                       │
--
<b>FILES</b>                         │                   │                                       │
       <b>/etc/krb5.conf</b>         │                   │                                       │
                              │                   │                                       │
<b>SEE</b> <b>ALSO</b>                      │                   │                                       │
       <a href="../man3/syslog.3.html">syslog</a>(3)              │                   │                                       │
                              │                   │                                       │
<b>AUTHOR</b>                        │                   │                                       │
       MIT

</pre><h4><b>COPYRIGHT</b></h4><pre>
       1985-2024, MIT

1.21.3                                                                                              <u><a href="../man5/KRB5.CONF.5.html">KRB5.CONF</a></u>(5)
</pre>
 </div>
</div></section>
</div>
</body>
</html>