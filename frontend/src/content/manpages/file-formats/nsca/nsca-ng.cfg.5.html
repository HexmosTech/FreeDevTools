<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>nsca-ng.cfg - NSCA-ng server configuration file</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/nsca-ng-server">nsca-ng-server_1.6-7_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       <b>nsca-ng.cfg</b> - NSCA-ng server configuration file

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>/etc/nsca-ng.cfg</b>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The  <b><a href="../man8/nsca-ng.8.html">nsca-ng</a></b>(8)  process  reads configuration data from the file specified with <b>-c</b> on the command line or
       from <u>/etc/nsca-ng.cfg</u>.

   <b>File</b> <b>Format</b>
       Zero or more global settings and one or more authorizations must be defined  in  the  configuration  file
       (see the <b>Global</b> <b>Settings</b> subsection and the <b>Authorizations</b> subsection, respectively).  They may appear in
       arbitrary  order.   An  authorization  is  specified  using the <b>authorize</b> keyword followed by a (possibly
       quoted) client identity string and  a  brace-enclosed  block  of  corresponding  authorization  settings.
       However,  an  authorization  setting may also be specified as a global setting outside of these <b>authorize</b>
       sections.  In this case, it serves as a global fallback for authorization sections that don't define  the
       setting in question.

       Global  settings  and  authorization  settings  are  defined by specifying a variable name followed by an
       equals sign (“=”) and a value (or possibly a list of  values).   Values  can  be  strings,  integers,  or
       floating-point  numbers.   Strings  have  to  be  enclosed  in  single  or  double quotes if they contain
       whitespace characters, hash mark characters, or literal quotation marks.  Otherwise, quoting is optional.
       To specify a literal single or double quote in a  string,  either  escape  it  by  preceding  it  with  a
       backslash  (“\”)  or  quote  the  string  using  the  other quote character.  A literal backslash must be
       preceded with a second backslash if the string is enclosed in double quotes.

       A variable can be set to the value of an environment variable by specifying <b>${</b><u>FOO</u><b>},</b> where <u>FOO</u> is the name
       of the environment variable.  The same can be done by specifying <b>${</b><u>FOO</u><b>:-</b><u>bar</u><b>},</b> except that in  this  case,
       the value <u>bar</u> will be assigned when the environment variable <u>FOO</u> is not set.

       Any  whitespace  surrounding tokens is ignored.  Empty lines and comments are also ignored.  Comments are
       introduced with a hash mark character (“#”) and span to the end of the line.  If the last character of  a
       line  is a backslash (“\”), the subsequent line is treated as a continuation of the current line (and the
       backslash is otherwise ignored).

       The special directive <b>include("</b><u>file</u><b>")</b> tells <b><a href="../man8/nsca-ng.8.html">nsca-ng</a></b>(8) to treat the contents of the specified <u>file</u> as  if
       those  contents  had  appeared  at  the  point where this directive appears.  If a directory is specified
       instead of a <u>file</u>, all files with a <u>.cfg</u> or <u>.conf</u> extension in this directory and all subdirectories will
       be included.  Symbolic links are followed.

       In the following subsections, the type of each value is denoted after an equals sign in angle brackets.

   <b>Global</b> <b>Settings</b>
       The <b><a href="../man8/nsca-ng.8.html">nsca-ng</a></b>(8) server recognizes the following global variables.

       <b>chroot</b> = &lt;<u>string</u>&gt;
              On startup, perform a <b><a href="../man2/chroot.2.html">chroot</a></b>(2) operation to the specified directory.  By default, <b><a href="../man8/nsca-ng.8.html">nsca-ng</a></b>(8) does
              not call <b><a href="../man2/chroot.2.html">chroot</a></b>(2).  If this directive is used, the  <b>command_file</b>,  <b>pid_file</b>,  and  <b>temp_directory</b>
              must be specified relative to this directory.

       <b>command_file</b> = &lt;<u>string</u>&gt;
              Submit  monitoring commands to the specified path name.  This should be the named pipe (FIFO) that
              Nagios (or a compatible monitoring solution) checks for external commands to process.  The default
              is <u>/var/nagios/rw/nagios.cmd</u>.  The specified value will be overridden if <b><a href="../man8/nsca-ng.8.html">nsca-ng</a></b>(8) is called with
              the <b>-C</b> option.

       <b>listen</b> = &lt;<u>string</u>&gt;
              Bind to the specified IP address or host name.  The default setting is “*”, which tells <b><a href="../man8/nsca-ng.8.html">nsca-ng</a></b>(8)
              to listen on all available interfaces.  A colon (“:”) followed by a service name  or  port  number
              may  be appended to override the default port (5668) used by the <b><a href="../man8/nsca-ng.8.html">nsca-ng</a></b>(8) server.  The specified
              value will be ignored if <b><a href="../man8/nsca-ng.8.html">nsca-ng</a></b>(8) is called with the <b>-b</b> option, of if it is socket activated  by
              <b><a href="../man1/systemd.1.html">systemd</a></b>(1).

       <b>log_level</b> = &lt;<u>integer</u>&gt;
              Use the specified log level, which must be an integer value between 0 and 5 inclusive.  A value of
              0  tells <b><a href="../man8/nsca-ng.8.html">nsca-ng</a></b>(8) to generate only fatal error messages, 1 adds non-fatal error messages, 2 adds
              warnings, 3 additionally spits out every submitted command (plus startup and shutdown notices),  4
              also  logs  each  message sent or received at the protocol level, and 5 generates additional debug
              output.  The default log level is 3.  The specified value will  be  overridden  if  <b><a href="../man8/nsca-ng.8.html">nsca-ng</a></b>(8)  is
              called with the <b>-l</b> option.

       <b>max_command_size</b> = &lt;<u>integer</u>&gt;
              Refuse  monitoring  commands  (including  check  result  submissions)  which  are  longer than the
              specified number of bytes.  Setting this variable to 0 tells  <b><a href="../man8/nsca-ng.8.html">nsca-ng</a></b>(8)  to  accept  commands  of
              arbitrary length.  The default value is 16384.

       <b>max_queue_size</b> = &lt;<u>integer</u>&gt;
              Don't  queue more than the specified number of megabytes worth of monitoring commands while Nagios
              isn't running (or not reading the command file).  When the amount of available data  exceeds  this
              threshold,  the  queued  data  is thrown away.  If this variable is set to 0, <b><a href="../man8/nsca-ng.8.html">nsca-ng</a></b>(8) queues an
              unlimited amount of data (until it exits due to running out of memory).  The default value is 1024
              (i.e., 1 gigabyte).

       <b>pid_file</b> = &lt;<u>string</u>&gt;
              During startup, try to create and lock the  specified  file  and  write  the  process  ID  of  the
              <b><a href="../man8/nsca-ng.8.html">nsca-ng</a></b>(8) daemon into it.  Bail out if another process holds a lock on that file.  By default, no
              such PID file is written.  The specified value will be overridden if <b><a href="../man8/nsca-ng.8.html">nsca-ng</a></b>(8) is called with the
              <b>-p</b> option.

       <b>temp_directory</b> = &lt;<u>string</u>&gt;
              Write  temporary  files  to  the specified directory.  Temporary files are only written if clients
              submit very large commands (which cannot  be  written  to  the  named  pipe  atomically).   It  is
              recommended  to  specify  a  directory which resides on a memory file system.  By default, <u><a href="file:/tmp">/tmp</a></u> is
              used.

       <b>timeout</b> = &lt;<u>floating-point</u>&gt;
              Close the connection if a client didn't show any activity for the specified number of seconds.  If
              this value is set to 0.0, <b><a href="../man8/nsca-ng.8.html">nsca-ng</a></b>(8) won't enforce connection timeouts.  The  default  setting  is
              60.0 seconds.

       <b>tls_ciphers</b> = &lt;<u>string</u>&gt;
              Limit  the  acceptable  TLS-PSK cipher suites to the specified list of ciphers.  The format of the
              string is described in the <b><a href="../man1/ciphers.1.html">ciphers</a></b>(1) manual.  By default, the ciphers in the list PSK-AES256-CBC-
              SHA:PSK-AES128-CBC-SHA:PSK-3DES-EDE-CBC-SHA:PSK-RC4-SHA will be accepted.

       <b>user</b> = &lt;<u>string</u>&gt;
              Switch to the specified user, and to the groups the user  belongs  to.   This  is  done  early  on
              startup:  after  the  configuration  file  has  been  read,  but  before  the listening socket and
              (possibly) the PID file are created.  By default, <b><a href="../man8/nsca-ng.8.html">nsca-ng</a></b>(8)  runs  with  the  privileges  of  the
              invoking user.

   <b>Authorizations</b>
       As  mentioned  above,  an  authorization  section  is  introduced with the <b>authorize</b> keyword and a client
       identity field followed by a brace-delimited block of one  or  more  authorization  settings.   A  client
       provides  its identity during the connection handshake.  The server uses the provided identity string for
       looking up the <b>authorize</b> section applicable to the client.  The corresponding section,  if  any,  defines
       the  authentication  and  authorization  settings  for  the client in question.  If no section explicitly
       defined for this client identity is found, but a section for the special client identity  "*"  (including
       the  quotes)  is defined, this section is used as a fallback.  Note that no other wildcard characters are
       available, and that the “*” character has no special meaning in the client  identity  field  except  when
       specified exactly as described.

       Within  the  brace-delimited  block  of an authorization section, values may be assigned to the variables
       listed below.  The pattern strings assigned to the <b>commands</b>, <b>hosts</b>,  and  <b>services</b>  variables  are  POSIX
       “extended”  regular  expressions,  but  with  an  implicit “^” at the beginning and “$” at the end of the
       patterns.  Multiple patterns can be specified as a brace-enclosed, comma-separated  list;  check  results
       and  commands  will  then  be  accepted  if they match any of the specified patterns.  Commands and check
       results will be rejected unless these settings authorize the client to submit them.

       <b>commands</b> = &lt;<u>(list</u> <u>of)</u> <u>string(s)</u>&gt;
              Match the specified  regular  expression(s)  against  submitted  monitoring  commands  and  accept
              commands  that  match any of these expressions.  The patterns are matched against the full command
              string supplied by the client, <u>except</u> for the  leading  bracketed  timestamp  and  any  whitespace
              following that timestamp.

       <b>hosts</b> = &lt;<u>(list</u> <u>of)</u> <u>string(s)</u>&gt;
              Match  the  specified  regular  expression(s)  against  the  “host  name” field of client-supplied
              PROCESS_HOST_CHECK_RESULT  commands  and  accept  such  commands  if  they  match  any  of   these
              expressions.

       <b>password</b> = &lt;<u>string</u>&gt;
              Reject connections from clients that don't use the specified password.  This setting is mandatory.

       <b>services</b> = &lt;<u>(list</u> <u>of)</u> <u>string(s)</u>&gt;
              Match  the  specified  regular  expression(s)  against  the “service description” field of client-
              supplied PROCESS_SERVICE_CHECK_RESULT commands and accept such commands if they match any of these
              expressions.  If a specified string includes one or more at signs (“@”), only the  part  preceding
              the last of these at signs is matched against the “service description” field.  The part following
              this  at  sign is used as a separate pattern which is matched against the “host name” field of the
              same command.  A service check result is then accepted only if both matches succeed  for  a  given
              command.

</pre><h4><b>EXAMPLES</b></h4><pre>
       The <b>/etc/nsca-ng.cfg</b> file might look similar to the following example.

              user = "nagios"
              chroot = "/var/nagios" # Other paths are relative to this one!
              command_file = "/rw/nagios.cmd"
              pid_file = "/run/nsca-ng.pid"
              temp_directory = "<a href="file:/dev/shm">/dev/shm</a>"
              listen = "monitoring.example.com:5668"
              tls_ciphers = "PSK-AES256-CBC-SHA"
              log_level = 3
              max_command_size = 65536
              max_queue_size = 128
              timeout = 15.0

              #
              # Authenticated "root" clients may submit arbitrary check
              # results and any other monitoring commands (see:
              # &lt;<a href="http://nagios.org/developerinfo/externalcommands/">http://nagios.org/developerinfo/externalcommands/</a>&gt;).
              #
              authorize "root" {
                  password = "g3m25sMCUAO4NecZGld1H4xcJ9uDWvhH"
                  commands = ".*"
              }

              #
              # Authenticated "checker" clients may submit arbitrary check
              # results, but no other commands.
              #
              authorize "checker" {
                  password = "ilzNanlE9XjMLdjrMkXnk09XBCTFQrj5"
                  hosts = ".*"
                  services = ".*"
              }

              #
              # Authenticated "web-checker" clients may submit check results
              # for arbitrary services on hosts whose names begin with "www".
              #
              authorize "web-checker" {
                  password = "m2uaIWwiq3AIqN55m3QdjwptkU1Q4Oov"
                  services = ".+@www.*"
              }

              #
              # Authenticated "nsca-checker" clients may talk to the NSCA-ng
              # server, but may not submit anything to Nagios.
              #
              authorize "nsca-checker" {
                  password = "ceOKwxpz14lKXroC4yUjJZbov6VAyKuT"
              }

              #
              # Other authenticated clients may submit check results for the
              # "disk", "swap", and "load" services on arbitrary hosts.
              #
              authorize "*" {
                  password = "awHW5vxr3DcA9EvcUC9T3a90QfEexsWd"
                  services = {
                      "disk",
                      "swap",
                      "load"
                  }
              }

</pre><h4><b>CAVEATS</b></h4><pre>
       Please  set  the  permissions  appropriately  to  make  sure  that  only  authorized users can access the
       <b>/etc/nsca-ng.cfg</b> file.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man8/nsca-ng.8.html">nsca-ng</a></b>(8), <b><a href="../man8/send_nsca.8.html">send_nsca</a></b>(8), <b><a href="../man5/send_nsca.cfg.5.html">send_nsca.cfg</a></b>(5), <b><a href="../man7/regex.7.html">regex</a></b>(7)

       <u><a href="http://www.nagios.org/developerinfo/externalcommands/">http://www.nagios.org/developerinfo/externalcommands/</a></u>

</pre><h4><b>AUTHOR</b></h4><pre>
       Holger Weiss &lt;<a href="mailto:holger@weiss.in-berlin.de">holger@weiss.in-berlin.de</a>&gt;

Version 1.6                                      March 19, 2019                                   <u><a href="../man5/nsca-ng.cfg.5.html">nsca-ng.cfg</a></u>(5)
</pre>
 </div>
</div></section>
</div>
</body>
</html>