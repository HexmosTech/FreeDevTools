<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>nfs4_acl - NFSv4 Access Control Lists</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/nfs4-acl-tools">nfs4-acl-tools_0.4.2-1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       nfs4_acl - NFSv4 Access Control Lists

</pre><h4><b>DESCRIPTION</b></h4><pre>
       An  ACL  is  a list of permissions associated with a file or directory and consists of one or more Access
       Control Entries (ACEs).  NFSv4 ACLs provide  finer  granularity  than  typical  POSIX  read/write/execute
       permissions and are similar to CIFS ACLs.

       A  sample  NFSv4  file  ACL  might  look  like  the  following  (see  the <b>ACL</b> <b>FORMAT</b> section for detailed
       information):

              A::OWNER@:rwatTnNcCy
              A::<a href="mailto:alice@nfsdomain.org">alice@nfsdomain.org</a>:rxtncy
              A::<a href="mailto:bob@nfsdomain.org">bob@nfsdomain.org</a>:rwadtTnNcCy
              A:g:GROUP@:rtncy
              D:g:GROUP@:waxTC
              A::EVERYONE@:rtncy
              D::EVERYONE@:waxTC

       Some observations:

       -  In the example output above, the user `<a href="mailto:alice@nfsdomain.org">alice@nfsdomain.org</a>' has the equivalent of "read" and "execute"
          permissions, `<a href="mailto:bob@nfsdomain.org">bob@nfsdomain.org</a>' has "read" and  "write",  and  both  `GROUP@'  and  `EVERYONE@'  have
          "read".

       -  NFSv4  ACLs are "default-deny"; that is, if a permission is not explicitly granted by an Allow ACE, it
          is denied.  Because of this, the two Deny ACEs above are superfluous and  could  be  excluded  by  the
          server.  See the <b>A</b> <b>WARNING</b> <b>ABOUT</b> <b>DENY</b> <b>ACES</b> section for more information.

       -  NFSv4  servers  may  return  an  ACL  slightly different than one you set.  For example, a server that
          always allows reading the attributes of a file may silently turn on  the  read-attributes  <u>permission</u>,
          and  a  server that does not support separate write-data and append-data <u>permissions</u>, e.g., may choose
          to turn off both if you set only one.  In extreme cases the server may also reorder or  combine  ACEs.
          As  a  general  rule,  however,  servers  will attempt to ensure that the ACLs they return are no more
          permissive than the ones you set.

</pre><h4><b>ACL</b> <b>FORMAT</b></h4><pre>
       An NFSv4 ACL is written as an <u>acl_spec</u>, which is a comma- or tab-delimited string consisting  of  one  or
       more <u>ace_specs</u>.  A single NFSv4 ACE is written as an <u>ace_spec</u>, which is a colon-delimited, 4-field string
       in the following format:

              <u>type</u>:<u>flags</u>:<u>principal</u>:<u>permissions</u>

   <b>ACE</b> <b>TYPES:</b>
       There are four <u>types</u> of ACEs, each represented by a single character.  An ACE must have exactly one <u>type</u>.

       <b>A</b>      Allow - allow <u>principal</u> to perform actions requiring <u>permissions</u>.

       <b>D</b>      Deny - prevent <u>principal</u> from performing actions requiring <u>permissions</u>.

       <b>U</b>      Audit - log any attempted access by <u>principal</u> which requires <u>permissions</u>.  Requires one or both of
              the successful-access and failed-access <u>flags</u>.  System-dependent; not supported by all servers.

       <b>L</b>      Alarm  -  generate a system alarm at any attempted access by <u>principal</u> which requires <u>permissions</u>.
              Requires one or both of the successful-access  and  failed-access  <u>flags</u>.   System-dependent;  not
              supported by all servers.

   <b>ACE</b> <b>FLAGS:</b>
       There  are  three  kinds  of ACE <u>flags</u>: group, inheritance, and administrative.  An Allow or Deny ACE may
       contain zero or more <u>flags</u>, while an Audit or Alarm ACE must contain at  least  one  of  the  successful-
       access and failed-access <u>flags</u>.

       Note  that  ACEs  are  inherited  from  the  parent directory's ACL at the time a file or subdirectory is
       created.  Accordingly, inheritance flags can be used only in ACEs in a directory's ACL (and are therefore
       stripped from inherited ACEs in a new file's ACL).  Please see the <b>INHERITANCE</b> <b>FLAGS</b>  <b>COMMENTARY</b>  section
       for more information.

       <b>GROUP</b> <b>FLAG</b> - can be used in any ACE

       <b>g</b>      group - indicates that <u>principal</u> represents a group instead of a user.

       <b>INHERITED</b> <b>FLAG</b> - can be used in any ACE

       <b>I</b>      inherited - indicates that the ACE was inherited from the parent directory.  This flag can only be
              used with the NFSv4.1 protocol or newer when using the <b>--dacl</b> or <b>--sacl</b> options.

       <b>INHERITANCE</b> <b>FLAGS</b> - can be used in any directory ACE

       <b>d</b>      directory-inherit - newly-created subdirectories will inherit the ACE.

       <b>f</b>      file-inherit  -  newly-created  files  will  inherit the ACE, minus its inheritance <u>flags</u>.  Newly-
              created subdirectories will inherit the ACE; if directory-inherit is not  also  specified  in  the
              parent ACE, inherit-only will be added to the inherited ACE.

       <b>n</b>      no-propagate-inherit  -  newly-created  subdirectories will inherit the ACE, minus its inheritance
              <u>flags</u>.

       <b>i</b>      inherit-only - the ACE is not considered in permissions checks, but it is heritable; however,  the
              inherit-only <u>flag</u> is stripped from inherited ACEs.

       <b>ADMINISTRATIVE</b> <b>FLAGS</b> - can be used in <b>Audit</b> and <b>Alarm</b> ACEs

       <b>S</b>      successful-access  - trigger an alarm/audit when <u>principal</u> is allowed to perform an action covered
              by <u>permissions</u>.

       <b>F</b>      failed-access - trigger an alarm/audit when <u>principal</u>  is  prevented  from  performing  an  action
              covered by <u>permissions</u>.

   <b>ACE</b> <b>PRINCIPALS:</b>
       A  <u>principal</u>  is  either a named user (e.g., `<a href="mailto:myuser@nfsdomain.org">myuser@nfsdomain.org</a>') or group (provided the group <u>flag</u> is
       also set), or one of three special <u>principals</u>: `OWNER@', `GROUP@', and `EVERYONE@':

       <b>OWNER@</b> matches the file's owner

       <b>GROUP@</b> matches the file's group

       <b>EVERYONE@</b>
              always matches.  (Note this is different from the "other" used in mode bits or POSIX  ACLs,  which
              does not match the file's owner or group.)

   <b>ACE</b> <b>PERMISSIONS:</b>
       There  are a variety of different ACE <u>permissions</u> (13 for files, 14 for directories), each represented by
       a single character.  An ACE should have one or more of the following <u>permissions</u> specified:

       <b>r</b>      read-data (files) / list-directory (directories)

       <b>w</b>      write-data (files) / create-file (directories)

       <b>a</b>      append-data (files) / create-subdirectory (directories)

       <b>x</b>      execute (files) / change-directory (directories)

       <b>d</b>      delete - delete the file/directory.  Some servers will allow a delete  to  occur  if  either  this
              <u>permission</u>  is  set  in  the file/directory or if the delete-child <u>permission</u> is set in its parent
              directory.

       <b>D</b>      delete-child - remove a file or subdirectory from within the given directory (directories only)

       <b>t</b>      read-attributes - read the attributes of the file/directory.

       <b>T</b>      write-attributes - write the attributes of the file/directory.

       <b>n</b>      read-named-attributes - read the named attributes of the file/directory.

       <b>N</b>      write-named-attributes - write the named attributes of the file/directory.

       <b>c</b>      read-ACL - read the file/directory NFSv4 ACL.

       <b>C</b>      write-ACL - write the file/directory NFSv4 ACL.

       <b>o</b>      write-owner - change ownership of the file/directory.

       <b>y</b>      synchronize - allow clients to use synchronous I/O with the server.

</pre><h4><b>INHERITANCE</b> <b>FLAGS</b> <b>COMMENTARY</b></h4><pre>
       Inheritance <u>flags</u> can be divided into two categories: "primary" (file-inherit and directory-inherit); and
       "secondary" (no-propagate-inherit and inherit-only), which are significant only insofar  as  they  affect
       the two "primary" <u>flags</u>.

       The  no-propagate-inherit and inherit-only <u>flags</u> can be tricky to remember: the former determines whether
       or not a new child directory's inherited ACE is itself heritable by a grandchild subdirectory; the latter
       determines whether or not a heritable ACE affects the parent  directory  itself  (in  addition  to  being
       heritable).  They can be used in-tandem.

       When  a  subdirectory  inherits  an  ACE  from  its parent directory's ACL, this can happen in one of two
       different ways, depending on the server implementation:

       -  In the simple case, that exact same ACE is set in the subdirectory's ACL.

       -  In the other case, two different ACEs will instead be set in the  subdirectory's  ACL:  one  with  all
          inheritance  <u>flags</u>  removed,  and one with the inherit-only <u>flag</u> added.  The former is the "effective"
          inherited ACE (used in the subdirectory's own permissions  checks);  the  latter  is  the  "heritable"
          inherited  ACE  (when  the  subdirectory  has  directories  created within it, they inherit it).  This
          approach makes it easier to modify access rights to the  subdirectory  itself  without  modifying  its
          heritable ACEs. The Linux kernel server uses this approach.

</pre><h4><b>A</b> <b>WARNING</b> <b>ABOUT</b> <b>DENY</b> <b>ACES</b></h4><pre>
       Deny  ACEs  should be avoided whenever possible.  Although they are a valid part of NFSv4 ACLs, Deny ACEs
       can be confusing and complicated.  This stems primarily from the fact that, unlike POSIX  ACLs  and  CIFS
       ACLs, the ordering of ACEs within NFSv4 ACLs affects how they are evaluated.

       First,  it  is  important  to  note  that  (despite some unfortunate ambiguity in <u>RFC3530</u>) NFSv4 ACLs are
       "default-deny" in practice.  That is, if a <u>permission</u> is not explicitly granted, it is denied.

       In general, when a <u>principal</u> is attempting to perform an action over NFSv4 which  requires  one  or  more
       <u>permissions</u>,  an access check is performed.  The NFSv4 ACL (assuming one is present) is evaluated ACE-by-
       ACE until every one of those <u>permissions</u> has been addressed, or until the end of the ACL is reached.   If
       every  requisite  <u>permission</u>  was  granted  by  Allow  ACEs  and was not forbidden by Deny ACEs (see next
       paragraph), the action is allowed to proceed.  Otherwise, the action is forbidden.

       Note that each requisite <u>permission</u> is only addressed once --  that  is,  after  a  <u>permission</u>  has  been
       explicitly  Allowed  or  Denied  once during an access check, any subsequent ACEs in the ACL which affect
       that <u>permission</u> are no longer considered.  This often introduces problematic ordering  issues  when  Deny
       ACEs are present.

       Additionally,  in  some  cases  Group-Deny  ACEs can be difficult (if not impossible) to enforce, since a
       server might not know about all of a given <u>principal</u>'s memberships in remote groups, e.g.

       Because NFSv4 ACLs are "default-deny", the use of Deny ACEs can (and should) be avoided entirely in  most
       cases.

</pre><h4><b>AUTHORS</b></h4><pre>
       Tools  for  viewing and manipulating NFSv4 ACLs, <b>nfs4_getfacl</b> and <b>nfs4_setfacl</b>, were written by people at
       CITI, the Center for Information Technology Integration (<u><a href="http://www.citi.umich.edu">http://www.citi.umich.edu</a></u>).   This  manpage  was
       written by David Richter and J. Bruce Fields.

</pre><h4><b>CONTACT</b></h4><pre>
       Please send bug reports, feature requests, and comments to &lt;<u><a href="mailto:linux-nfs@vger.kernel.org">linux-nfs@vger.kernel.org</a></u>&gt;.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man1/nfs4_getfacl.1.html">nfs4_getfacl</a></b>(1), <b><a href="../man1/nfs4_setfacl.1.html">nfs4_setfacl</a></b>(1), <u>RFC3530</u> (NFSv4.0), NFSv4.1 Minor Version Draft.

Linux                                      version 0.3.4, August 2018                                <u><a href="../man5/NFS4_ACL.5.html">NFS4_ACL</a></u>(5)
</pre>
 </div>
</div></section>
</div>
</body>
</html>