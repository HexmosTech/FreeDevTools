<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>alpm-hooks - alpm hook file format</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libalpm-dev">libalpm-dev_15.0.0-1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       alpm-hooks - alpm hook file format

</pre><h4><b>SYNOPSIS</b></h4><pre>
       [Trigger] (Required, Repeatable)
       Operation = Install|Upgrade|Remove (Required, Repeatable)
       Type = Path|Package (Required)
       Target = &lt;Path|PkgName&gt; (Required, Repeatable)

       [Action] (Required)
       Description = ... (Optional)
       When = PreTransaction|PostTransaction (Required)
       Exec = &lt;Command&gt; (Required)
       Depends = &lt;PkgName&gt; (Optional)
       AbortOnFail (Optional, PreTransaction only)
       NeedsTargets (Optional)

</pre><h4><b>DESCRIPTION</b></h4><pre>
       libalpm provides the ability to specify hooks to run before or after transactions based on the packages
       and/or files being modified. Hooks consist of a single <u>[Action]</u> section describing the action to be run
       and one or more <u>[Trigger]</u> section describing which transactions it should be run for.

       Hooks are read from files located in the system hook directory /usr/share/libalpm/hooks, and additional
       custom directories specified in <b><a href="../man5/pacman.conf.5.html">pacman.conf</a></b>(5) (the default is /etc/pacman.d/hooks). The file names are
       required to have the suffix ".hook". Hooks are run in alphabetical order of their file name, where the
       ordering ignores the suffix.

</pre><h4><b>TRIGGERS</b></h4><pre>
       Hooks must contain at least one <u>[Trigger]</u> section that determines which transactions will cause the hook
       to run. If multiple trigger sections are defined the hook will run if the transaction matches <b>any</b> of the
       triggers.

       <b>Operation</b> <b>=</b> Install|Upgrade|Remove
           Select the type of operation to match targets against. May be specified multiple times. Installations
           are considered an upgrade if the package or file is already present on the system regardless of
           whether the new package version is actually greater than the currently installed version. For Path
           triggers, this is true even if the file changes ownership from one package to another. Required.

       <b>Type</b> <b>=</b> Path|Package
           Select whether targets are matched against transaction packages or files. See CAVEATS for special
           notes regarding Path triggers.  <u>File</u> is a deprecated alias for <u>Path</u> and will be removed in a future
           release. Required.

       <b>Target</b> <b>=</b> &lt;path|package&gt;
           The path or package name to match against the active transaction. Paths refer to the files in the
           package archive; the installation root should <b>not</b> be included in the path. Shell-style glob patterns
           are allowed. It is possible to invert matches by prepending a target with an exclamation mark. May be
           specified multiple times. Required.

</pre><h4><b>ACTIONS</b></h4><pre>
       <b>Description</b> <b>=</b> ...
           An optional description that describes the action being taken by the hook for use in front-end
           output.

       <b>Exec</b> <b>=</b> &lt;command&gt;
           Command to run. Command arguments are split on whitespace. Values containing whitespace should be
           enclosed in quotes. Required.

       <b>When</b> <b>=</b> PreTransaction|PostTransaction
           When to run the hook. Required.

       <b>Depends</b> <b>=</b> &lt;package&gt;
           Packages that must be installed for the hook to run. May be specified multiple times.

       <b>AbortOnFail</b>
           Causes the transaction to be aborted if the hook exits non-zero. Only applies to PreTransaction
           hooks.

       <b>NeedsTargets</b>
           Causes the list of matched trigger targets to be passed to the running hook on <u>stdin</u>.

</pre><h4><b>OVERRIDING</b> <b>HOOKS</b></h4><pre>
       Hooks may be overridden by placing a file with the same name in a higher priority hook directory. Hooks
       may be disabled by overriding them with a symlink to <u>/dev/null</u>.

</pre><h4><b>EXAMPLES</b></h4><pre>
           # Force disks to sync to reduce the risk of data corruption

           [Trigger]
           Operation = Install
           Operation = Upgrade
           Operation = Remove
           Type = Package
           Target = *

           [Action]
           Depends = coreutils
           When = PostTransaction
           Exec = <a href="file:///usr/lib/w3m/cgi-bin/w3mman2html.cgi?sync">/usr/bin/sync</a>

</pre><h4><b>CAVEATS</b></h4><pre>
       There are situations when path triggers may act in unexpected ways. Hooks are triggered using the file
       list of the installed, upgraded, or removed package. When installing or upgrading a file that is
       extracted with a <u>.pacnew</u> extension, the original file name is used in triggering the hook. When removing
       a package, all files owned by that package can trigger a hook whether or not they were actually present
       on the file system before package removal.

       PostTransaction hooks will <b>not</b> run if the transaction fails to complete for any reason.

       See the pacman website at https://archlinux.org/pacman/ for current information on pacman and its related
       tools.

</pre><h4><b>BUGS</b></h4><pre>
       Bugs? You must be kidding; there are no bugs in this software. But if we happen to be wrong, please
       report them to the issue tracker at https://gitlab.archlinux.org/pacman/pacman/-/issues with specific
       information such as your command-line, the nature of the bug, and even the package database if it helps.

</pre><h4><b>AUTHORS</b></h4><pre>
       Current maintainers:

       •   Allan McRae &lt;<a href="mailto:allan@archlinux.org">allan@archlinux.org</a>&gt;

       •   Andrew Gregory &lt;<a href="mailto:andrew.gregory.8@gmail.com">andrew.gregory.8@gmail.com</a>&gt;

       •   Morgan Adamiec &lt;<a href="mailto:morganamilo@archlinux.org">morganamilo@archlinux.org</a>&gt;

       Past major contributors:

       •   Judd Vinet &lt;<a href="mailto:jvinet@zeroflux.org">jvinet@zeroflux.org</a>&gt;

       •   Aurelien Foret &lt;<a href="mailto:aurelien@archlinux.org">aurelien@archlinux.org</a>&gt;

       •   Aaron Griffin &lt;<a href="mailto:aaron@archlinux.org">aaron@archlinux.org</a>&gt;

       •   Dan McGee &lt;<a href="mailto:dan@archlinux.org">dan@archlinux.org</a>&gt;

       •   Xavier Chantry &lt;<a href="mailto:shiningxc@gmail.com">shiningxc@gmail.com</a>&gt;

       •   Nagy Gabor &lt;<a href="mailto:ngaba@bibl.u-szeged.hu">ngaba@bibl.u-szeged.hu</a>&gt;

       •   Dave Reisner &lt;<a href="mailto:dreisner@archlinux.org">dreisner@archlinux.org</a>&gt;

       •   Eli Schwartz &lt;<a href="mailto:eschwartz@archlinux.org">eschwartz@archlinux.org</a>&gt;

       For additional contributors, use git shortlog -s on the pacman.git repository.

Pacman 7.0.0                                       2025-01-20                                      <u><a href="../man5/ALPM-HOOKS.5.html">ALPM-HOOKS</a></u>(5)
</pre>
 </div>
</div></section>
</div>
</body>
</html>