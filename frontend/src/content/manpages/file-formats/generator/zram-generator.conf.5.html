<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>zram-generator.conf - Systemd unit generator for zram swap devices (configuration)</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/systemd-zram-generator">systemd-zram-generator_1.2.1-2_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       <b>zram-generator.conf</b> - Systemd unit generator for zram swap devices (configuration)

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>/usr/lib/systemd/zram-generator.conf</b>
       <b>/usr/local/lib/systemd/zram-generator.conf</b>
       <b>/etc/systemd/zram-generator.conf</b>
       <b>/run/systemd/zram-generator.conf</b>

       <b>/usr/lib/systemd/zram-generator.conf.d/*.conf</b>
       <b>/usr/local/lib/systemd/zram-generator.conf.d/*.conf</b>
       <b>/etc/systemd/zram-generator.conf.d/*.conf</b>
       <b>/run/systemd/zram-generator.conf.d/*.conf</b>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       These  files  configure  devices  created  by  <a href="../man8/zram-generator.8.html">zram-generator</a>(8).  See  <a href="../man5/systemd.syntax.5.html">systemd.syntax</a>(5)  for  a general
       description of the syntax.

</pre><h4><b>CONFIGURATION</b> <b>DIRECTORIES</b> <b>AND</b> <b>PRECEDENCE</b></h4><pre>
       The       default       configuration       doesn't       specify       any       devices.        Consult
       <u>/usr/share/zram-generator/zram-generator.conf.example</u> for an example configuration file.

       When  packages  need  to  customize  the  configuration,  they  can  install  configuration  snippets  in
       <u>/usr/lib/systemd/zram-generator.conf.d/</u>. Files in <u><a href="file:/etc/">/etc/</a></u> are reserved for the local administrator, who may
       use this logic to override the configuration files installed by vendor packages. The  main  configuration
       file  is  read  before  any of the configuration directories, and has the lowest precedence; entries in a
       file in any configuration directory override entries in the  single  configuration  file.  Files  in  the
       <u>*.conf.d/</u> configuration subdirectories are sorted by their filename in lexicographic order, regardless of
       which  of  the  subdirectories  they  reside in. When multiple files specify the same option, for options
       which accept just a single value, the entry in the file with  the  lexicographically  latest  name  takes
       precedence. It is recommended to prefix all filenames in those subdirectories with a two-digit number and
       a dash, to simplify the ordering of the files.

       To  disable  a  configuration  file  supplied by the vendor, the recommended way is to place a symlink to
       <u>/dev/null</u> in the configuration directory in <u><a href="file:/etc/">/etc/</a></u>, with the same filename  as  the  vendor  configuration
       file.

       The  generator  understands  the  following  option  on the kernel command-line: <b>systemd.zram[=0|1]</b>. When
       specified with a true argument (or no argument), the <b>zram0</b> device will be created. Default options apply,
       but may be overridden by configuration on disk if present. When specified with a false argument, no  zram
       devices  will  be  created  by the generator. This option thus has higher priority than the configuration
       files.

</pre><h4><b>OPTIONS</b></h4><pre>
       Each device is configured independently in its <b>[zramN]</b> section, where N is  a  nonnegative  integer.  The
       global section may contain <u>DIRECTIVES</u>. Other sections are ignored.

       Devices with the final size of <u>0</u> will be discarded.

       •   <b>host-memory-limit</b>=

           Sets  the  upper  limit  on  the  total  usable  RAM (as defined by <u>MemTotal</u> in <b><a href="file:/proc/meminfo">/proc/meminfo</a></b>, confer
           <a href="../man5/proc.5.html">proc</a>(5)) above which the device will <u>not</u> be created.

           This takes a nonnegative number, representing that limit in megabytes, or the  literal  string  <u>none</u>,
           which can be used to override a limit set earlier.

           Defaults to <u>none</u>.

       •   <b>zram-size</b>=

           Sets the size of the zram device as a function of <u>MemTotal</u>, available as the <b>ram</b> variable. Additional
           variables may be provided by <u>DIRECTIVES</u>.

           Arithmetic  operators  (^%/*-+),  e,  π,  SI suffixes, log(), int(), ceil(), floor(), round(), abs(),
           min(), max(), and trigonometric functions are supported.

           Defaults to <u>min(ram</u> <u>/</u> <u>2,</u> <u>4096)</u>.

       •   <b>zram-resident-limit</b>=

           Sets the maximum resident memory limit of the zram device (or <u>0</u>  for  no  limit)  as  a  function  of
           <u>MemTotal</u>, available as the <b>ram</b> variable.

           Same format as <b>zram-size</b>. Defaults to <u>0</u>.

       •   <b>compression-algorithm</b>=

           Specifies the algorithm used to compress the zram device.

           This  takes a whitespace-separated list string, representing the algorithms to use, and parameters in
           parenteses.
           Consult <u>/sys/block/zram0/comp_algorithm</u> (and <u>.../recomp_algorithm</u>) for a  list  of  currently  loaded
           compression algorithms, but note that additional ones may be loaded on demand.

           If unset, none will be configured and the kernel's default will be used.
           If more than one is given, and recompression is enabled in the kernel, subsequent ones will be set as
           the recompression algorithms, with decreasing priority.

           If a compression algorithm is suffixed with a parenthesised comma-separated list of parameters, those
           are  given  to  <b>.../algorithm_params</b>  (and  <b>.../recompress</b>). A parenthesised parameter list <u>without</u> a
           compression algorithm is set as the global recompression parameters.

       •   <b>writeback-device</b>=

           Write incompressible pages, for which no gain was achieved, to  the  specified  device  under  memory
           pressure. This corresponds to the <u>/sys/block/zramX/backing_dev</u> parameter.

           Takes     a    path    to    a    block    device,    like    <u>/dev/disk/by-partuuid/2d54ffa0-01</u>    or
           <u>/dev/zvol/tarta-zoot/swap-writeback</u>.

           If unset, none is used, and incompressible pages are kept in RAM.

       •   <b>swap-priority</b>=

           Controls the relative swap priority, a value between -1 and 32767.  Higher  numbers  indicate  higher
           priority.

           If unset, 100 is used.

       •   <b>mount-point</b>=

           Format  the  device  with  a  file system (not as swap) and mount this file system over the specified
           directory. When neither this option nor <b>fs-type</b>= is specified, the device will be formatted as swap.

           Note that the device is temporary: contents will be destroyed automatically after the file system  is
           unmounted (to release the backing memory).

       •   <b>fs-type</b>=

           Specifies  how  the  device  shall be formatted. The default is <u>ext2</u> if <b>mount-point</b> is specified, and
           <u>swap</u> otherwise. (Effectively, the  device  will  be  formatted  as  swap,  if  neither  <b>fs-type</b>=  nor
           <b>mount-point</b>= are specified.)

           Note  that the device is temporary: contents will be destroyed automatically after the file system is
           unmounted (to release the backing memory).

           Also see <a href="../man8/systemd-makefs.8.html">systemd-makefs</a>(8).

       •   <b>options</b>=

           Sets mount or swapon options. Availability depends on <b>fs-type</b>.

           Defaults to <u>discard</u>.

</pre><h4><b>DIRECTIVES</b></h4><pre>
       The global section (before any section header) may contain directives in the following form:

       •   <b>set!</b><u>variable</u>=<u>program</u>

           <u>program</u> is executed by the shell as-if  by  <a href="../man3/system.3.html">system</a>(3),  its  standard  output  stream  parsed  as  an
           arithmetic  expression  (like  <b>zram-size</b>/<b>zram-resident-limit</b>),  then  the  result  is remembered into
           <u>variable</u>, usable in later <b>set!</b>s and <b>zram-size</b>s/<b>zram-resident-limit</b>s.

</pre><h4><b>ENVIRONMENT</b> <b>VARIABLES</b></h4><pre>
       Setting   <b>ZRAM_GENERATOR_ROOT</b>   during   parsing   will   cause   <u><a href="file:/proc/meminfo">/proc/meminfo</a></u>   to   be    read    from
       <u>$ZRAM_GENERATOR_ROOT/proc/meminfo</u>                               instead,                              and
       <u>{<a href="file:/usr/lib">/usr/lib</a>,<a href="file:/usr/local/lib">/usr/local/lib</a>,<a href="file:/etc">/etc</a>,<a href="file:/run">/run</a>}/systemd/zram-generator.conf</u>       to       be        read        from
       <u>$ZRAM_GENERATOR_ROOT/{<a href="file:/usr/lib">/usr/lib</a>,<a href="file:/usr/local/lib">/usr/local/lib</a>,<a href="file:/etc">/etc</a>,<a href="file:/run">/run</a>}/systemd/zram-generator.conf</u>.

</pre><h4><b>EXAMPLES</b></h4><pre>
       The default configuration will yield the following:

            zram device size
                ^
                │
             4G&gt;│               ooooooooooooo
                │             o
                │           o
                │         o
             2G&gt;│       o
                │     o
                │   o
           512M&gt;│ o
                0───────────────────────&gt; total usable RAM
                  ^     ^       ^
                  1G    4G      8G

       A piecewise-linear size 1:1 for the first 4G, then 1:2 above, up to a max of 32G:
         <b>zram-size</b> <b>=</b> <b>min(min(ram,</b> <b>4096)</b> <b>+</b> <b>max(ram</b> <b>-</b> <b>4096,</b> <b>0)</b> <b>/</b> <b>2,</b> <b>32</b> <b>*</b> <b>1024)</b>

            zram device size
                ^
            32G&gt;|                                                oooooooooooooo
                |                                            o
            30G&gt;|                                        o
                |
               /=/
                |
             8G&gt;│                           o
                │                       o
                │                   o
                │               o
                │           o
             4G&gt;│       o
                │     o
                │   o
             1G&gt;│ o
                0───────────────────────────────────||──────────────────────&gt; total usable RAM
                  ^     ^       ^               ^        ^       ^       ^
                  1G    4G      8G             12G      56G     60G     64G

</pre><h4><b>OBSOLETE</b> <b>OPTIONS</b></h4><pre>
       •   <b>memory-limit</b>=

           Compatibility alias for <b>host-memory-limit</b>.

       •   <b>zram-fraction</b>=

           Defines the scaling factor of the zram device's size with relation to the total usable RAM.

           This takes a nonnegative floating-point number representing that factor.

           Defaulted to <u>0.5</u>. Setting this or <b>max-zram-size</b> overrides <b>zram-size</b>.

       •   <b>max-zram-size</b>=

           Sets the limit on the zram device's size obtained by <b>zram-fraction</b>.

           This  takes  a  nonnegative number, representing that limit in megabytes, or the literal string <u>none</u>,
           which can be used to override a limit set earlier.

           Defaulted to <u>4096</u>. Setting this or <b>zram-fraction</b> overrides <b>zram-size</b>.

</pre><h4><b>REPORTING</b> <b>BUGS</b></h4><pre>
       <u>https://github.com/systemd/zram-generator/issues</u>

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <a href="../man8/zram-generator.8.html">zram-generator</a>(8), <a href="../man5/systemd.syntax.5.html">systemd.syntax</a>(5), <a href="../man5/proc.5.html">proc</a>(5)

       <u>https://github.com/systemd/zram-generator</u>

       Linux documentation of zram: <u>https://kernel.org/doc/html/latest/admin-guide/blockdev/zram.html</u>
       and the zram sysfs ABI: <u>https://kernel.org/doc/Documentation/ABI/testing/sysfs-block-zram</u>

       <b>fasteval</b>       documentation       for       the       entire       <b>zram-size</b>       arithmetic       DSL:
       <u>https://docs.rs/fasteval/0.2.4/fasteval/#the-fasteval-expression-mini-language</u>

zram-generator developers                           May 2025                              <u><a href="../man5/ZRAM-GENERATOR.CONF.5.html">ZRAM-GENERATOR.CONF</a></u>(5)
</pre>
 </div>
</div></section>
</div>
</body>
</html>