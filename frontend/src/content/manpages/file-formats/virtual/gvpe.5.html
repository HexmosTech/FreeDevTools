<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GNU-VPE - Overview of the GNU Virtual Private Ethernet suite.</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/gvpe">gvpe_3.1-2build5_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       GNU-VPE - Overview of the GNU Virtual Private Ethernet suite.

</pre><h4><b>DESCRIPTION</b></h4><pre>
       GVPE is a suite designed to provide a virtual private network for multiple nodes over an untrusted
       network. This document first gives an introduction to VPNs in general and then describes the specific
       implementation of GVPE.

   <b>WHAT</b> <b>IS</b> <b>A</b> <b>VPN?</b>
       VPN is an acronym, it stands for:

       Virtual
           Virtual  means that no physical network is created (of course), but a network is <u>emulated</u> by creating
           multiple tunnels between the member nodes by encapsulating and sending data  over  another  transport
           network.

           Usually  the  emulated network is a normal IP or Ethernet, and the transport network is the Internet.
           However, using a VPN system like GVPE to connect nodes over other untrusted networks such as Wireless
           LAN is not uncommon.

       Private
           Private means that non-participating nodes cannot decode ("sniff)" nor inject ("spoof") packets. This
           means that nodes can be connected over untrusted networks such as the public Internet without fear of
           being eavesdropped while at the same time being able to trust data sent by other nodes.

           In the case of GVPE, even participating nodes cannot sniff packets  send  to  other  nodes  or  spoof
           packets  as if sent from other nodes, so communications between any two nodes is private to those two
           nodes.

       Network
           Network means that more than two parties can  participate  in  the  network,  so  for  instance  it's
           possible  to  connect  multiple  branches  of  a  company into a single network. Many so-called "VPN"
           solutions only create point-to-point tunnels, which in turn can be used to build larger networks.

           GVPE provides a true multi-point network in which any number of  nodes  (at  least  a  few  dozen  in
           practise, the theoretical limit is 4095 nodes) can participate.

   <b>GVPE</b> <b>DESIGN</b> <b>GOALS</b>
       SIMPLE DESIGN
           Cipher,  HMAC  algorithms  and  other key parameters must be selected at compile time - this makes it
           possible to only link in algorithms you actually need. It also makes the crypto part  of  the  source
           very  transparent  and  easy  to  inspect,  and last not least this makes it possible to hardcode the
           layout of all packets into the binary. GVPE goes a step further and internally reserves blocks of the
           same length for all packets, which virtually removes all possibilities of buffer overflows, as  there
           is only a single type of buffer and it's always of fixed length.

       EASY TO SETUP
           A  few lines of config (the config file is shared unmodified between all hosts) and generating an RSA
           key-pair on each node suffices to make it work.

       MAC-BASED SECURITY
           Since every host has it's own private key, other hosts cannot spoof  traffic  from  this  host.  That
           makes  it  possible  to  filter packet by MAC address, e.g. to ensure that packets from a specific IP
           address come, in fact, from a specific host that is associated with that  IP  and  not  from  another
           host.

</pre><h4><b>PROGRAMS</b></h4><pre>
       Gvpe comes with two programs: one daemon (gvpe) and one control program (gvpectrl).

       gvpectrl
           This  program is used to generate the keys, check and give an overview of of the configuration and to
           control the daemon (restarting etc.).

       gvpe
           This is the daemon used to establish and maintain connections to the other network nodes.  It  should
           be run on the gateway of each VPN subnet.

</pre><h4><b>COMPILETIME</b> <b>CONFIGURATION</b></h4><pre>
       Please have a look at the <a href="../man5/gvpe.osdep.5.html">gvpe.osdep</a>(5) manpage for platform-specific information.

       Gvpe  hardcodes  most  encryption  parameters.  While this reduces flexibility, it makes the program much
       simpler and helps making buffer overflows impossible under most circumstances.

       Here are a few recipes for compiling your gvpe, showing the extremes  (fast,  small,  insecure  OR  slow,
       large, more secure), between which you should choose:

   <b>AS</b> <b>LOW</b> <b>PACKET</b> <b>OVERHEAD</b> <b>AS</b> <b>POSSIBLE</b>
          ./configure --enable-hmac-length=4 --enable-rand-length=0

       Minimize  the  header overhead of VPN packets (the above will result in only 4 bytes of overhead over the
       raw ethernet frame). This is a insecure configuration because a HMAC length of 4 makes collision  attacks
       almost trivial.

   <b>MINIMIZE</b> <b>CPU</b> <b>TIME</b> <b>REQUIRED</b>
          ./configure --enable-cipher=bf --enable-digest=md4

       Use  the  fastest  cipher  and  digest algorithms currently available in gvpe. MD4 has been broken and is
       quite insecure, though, so using another digest algorithm is recommended.

   <b>MAXIMIZE</b> <b>SECURITY</b>
          ./configure --enable-hmac-length=16 --enable-rand-length=12 --enable-digest=ripemd610

       This uses a 16 byte HMAC checksum to authenticate packets (I guess 8-12 would also be  pretty  secure  ;)
       and will additionally prefix each packet with 12 bytes of random data.

       In  general,  remember  that  AES-128  seems  to  be  as  secure but faster than AES-192 or AES-256, more
       randomness helps against sniffing and a longer HMAC helps against spoofing. MD4 is a fast  digest,  SHA1,
       RIPEMD160, SHA256 are consecutively better, and Blowfish is a fast cipher (and also quite secure).

</pre><h4><b>HOW</b> <b>TO</b> <b>SET</b> <b>UP</b> <b>A</b> <b>SIMPLE</b> <b>VPN</b></h4><pre>
       In this section I will describe how to get a simple VPN consisting of three hosts up and running.

   <b>STEP</b> <b>1:</b> <b>configuration</b>
       First you have to create a daemon configuration file and put it into the configuration directory. This is
       usually /etc/gvpe, depending on how you configured gvpe, and can be overwritten using the -c command line
       switch.

       Put the following lines into /etc/gvpe/gvpe.conf:

          udp-port = 50000 # the external port to listen on (configure your firewall)
          mtu = 1400       # minimum MTU of all outgoing interfaces on all hosts
          ifname = vpn0    # the local network device name

          node = first     # just a nickname
          hostname = first.example.net # the DNS name or IP address of the host

          node = second
          hostname = 133.55.82.9

          node = third
          hostname = third.example.net

       The  only other file necessary is the if-up script that initializes the virtual ethernet interface on the
       local  host.  Put  the  following  lines  into  /etc/gvpe/if-up  and  make  it  executable   (chmod   755
       /etc/gvpe/if-up):

          #!<a href="file:/bin/sh">/bin/sh</a>
          ip link set $IFNAME address $MAC mtu $MTU up
          [ $NODENAME = first  ] &amp;&amp; ip addr add 10.0.1.1 dev $IFNAME
          [ $NODENAME = second ] &amp;&amp; ip addr add 10.0.2.1 dev $IFNAME
          [ $NODENAME = third  ] &amp;&amp; ip addr add 10.0.3.1 dev $IFNAME
          ip route add 10.0.0.0/16 dev $IFNAME

       This  script will give each node a different IP address in the 10.0/16 network.  The internal network (if
       gvpe runs on a router) should then be set to a subset of that network, e.g.  10.0.1.0/24 on  node  first,
       10.0.2.0/24 on node second, and so on.

       By  enabling  routing on the gateway host that runs gvpe all nodes will be able to reach the other nodes.
       You can, of course, also use proxy ARP or other means of pseudo-bridging, or (best) full  routing  -  the
       choice is yours.

   <b>STEP</b> <b>2:</b> <b>create</b> <b>the</b> <b>RSA</b> <b>key</b> <b>pair</b> <b>for</b> <b>each</b> <b>node</b>
       Next  you  have to generate the RSA keys for the nodes. While you can set up GVPE so you can generate all
       keys on a single host and centrally distribute all keys, it is safer to generate the key for each node on
       the node, so that the secret/private key does not have to be copied over the network.

       To do so, run the following command to generate a key pair:

          gvpectrl -c /etc/gvpe -g nodekey

       This  will  create  two  files,  <u>nodekey</u>  and  <u>nodekey.privkey</u>.  The   former   should   be   copied   to
       <u>/etc/gvpe/pubkey/nodename</u>  on  the  host  where  your  config file is (you will have to create the <u>pubkey</u>
       directory first):

          scp nodekey confighost:/etc/gvpe/pubkey/nodename

       The private key <u>nodekey.privkey</u> should be moved to <u>/etc/gvpe/hostkey</u>:

          mkdir -p /etc/gvpe
          mv nodekey.privkey /etc/gvpe/hostkey

   <b>STEP</b> <b>3:</b> <b>distribute</b> <b>the</b> <b>config</b> <b>files</b> <b>to</b> <b>all</b> <b>nodes</b>
       Now distribute the config files and public keys to the other nodes.

       The example uses rsync-over-ssh to copy the config file and all the public keys:

          rsync -avzessh /etc/gvpe first.example.net:<a href="file:/etc/.">/etc/.</a> --exclude hostkey
          rsync -avzessh /etc/gvpe 133.55.82.9:<a href="file:/etc/.">/etc/.</a>       --exclude hostkey
          rsync -avzessh /etc/gvpe third.example.net:<a href="file:/etc/.">/etc/.</a> --exclude hostkey

       You should now check the configuration by issuing the command gvpectrl -c /etc/gvpe -s on each  node  and
       verify it's output.

   <b>STEP</b> <b>4:</b> <b>starting</b> <b>gvpe</b>
       You should then start gvpe on each node by issuing a command like:

          gvpe -D -l info first # first is the nodename

       This will make the gvpe daemon stay in foreground. You should then see "connection established" messages.
       If you don't see them check your firewall and routing (use tcpdump ;).

       If this works you should check your networking setup by pinging various endpoints.

       To  make  gvpe  run  more  permanently  you  can either run it as a daemon (by starting it without the -D
       switch), or, much better, from your inittab or equivalent. I use a line like this on all my systems:

          t1:2345:respawn:/opt/gvpe/sbin/gvpe -D -L first &gt;/dev/null 2&gt;&amp;1

   <b>STEP</b> <b>5:</b> <b>enjoy</b>
       ... and play around. Sending a -HUP (gvpectrl -kHUP) to the daemon will make it try  to  connect  to  all
       other  nodes again. If you run it from inittab gvpectrl -k (or simply killall gvpe) will kill the daemon,
       start it again, making it read it's configuration files again.

       To run the GVPE daemon permanently from your SysV init, you can add it to your <u>inittab</u>, e.g.:

          t1:2345:respawn:<a href="file:/bin/sh">/bin/sh</a> -c "exec nice -n-20 /path/to/gvpe -D node &gt;/var/log/gvpe.log 2&gt;&amp;1"

       For systems using systemd, you can use a unit file similar to this one:

          [Unit]
          Description=gvpe
          After=network.target
          Before=remote-fs.target

          [Service]
          ExecStart=/path/to/gvpe -D node
          KillMode=process
          Restart=always

          [Install]
          WantedBy=multi-user.target

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <u><a href="../man5/gvpe.osdep.5.html">gvpe.osdep</a></u>(5) for OS-dependent information, <u><a href="../man5/gvpe.conf.5.html">gvpe.conf</a></u>(5), <u><a href="../man8/gvpectrl.8.html">gvpectrl</a></u>(8),  and  for  a  description  of  the
       transports, protocol, and routing algorithm, <u><a href="../man7/gvpe.protocol.7.html">gvpe.protocol</a></u>(7).

       The GVPE mailing list, at &lt;<a href="http://lists.schmorp.de/">http://lists.schmorp.de/</a>&gt;, or <a href="mailto:gvpe@lists.schmorp.de">gvpe@lists.schmorp.de</a>.

</pre><h4><b>AUTHOR</b></h4><pre>
       Marc Lehmann &lt;<a href="mailto:gvpe@schmorp.de">gvpe@schmorp.de</a>&gt;

</pre><h4><b>COPYRIGHTS</b> <b>AND</b> <b>LICENSES</b></h4><pre>
       GVPE  itself is distributed under the GENERAL PUBLIC LICENSE (see the file COPYING that should be part of
       your distribution).

       In some configurations it uses modified versions of the tinc vpn suite, which is also available under the
       GENERAL PUBLIC LICENSE.

2.25                                               2016-11-02                                            <u><a href="../man5/GVPE.5.html">GVPE</a></u>(5)
</pre>
 </div>
</div></section>
</div>
</body>
</html>