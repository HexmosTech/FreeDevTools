<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>fdm.conf — fdm configuration file</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/fdm">fdm_1.9+git20181219-1.1build2_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       fdm.conf — fdm configuration file

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This  manual page describes the <u><a href="../man1/fdm.1.html">fdm</a></u>(1) configuration file.  It defines <u>accounts</u> from which to fetch mail,
       a number of possible <u>actions</u> to take, and <u>rules</u> connecting a regexp with an action.  The file  is  parsed
       once  from  top  to bottom, so action and account definitions must appear before they are referenced in a
       rule.  Rules are evaluated from first to last and (unless overridden by the <b>continue</b> keyword)  evaluation
       stops at the first match.

       The file has the following format:

       Empty lines and lines beginning with the ‘#’ character are ignored.

       Regexps  and  strings  must  be  enclosed  in  double  quotes.  Special characters in regexps and strings
       (including passwords) must be escaped.  Note that this may mean double-escaping in regexps.

       Possible commands are covered in the following sections.

</pre><h4><b>OPTIONS</b></h4><pre>
       Options are configured using the <b>set</b> command.  It may be followed  by  the  following  options,  one  per
       command:

       <b>maximum-size</b> <u>size</u>
               This is used to set the maximum size of a mail.  Mails larger than this limit are dropped and, if
               applicable, not deleted from the server.

               The  size  may be specified as a plain number in bytes or with a suffix of ‘K’ for kilobytes, ‘M’
               for megabytes or ‘G’ for gigabytes.  The default is 32 megabytes and the maximum is one gigabyte.

       <b>delete-oversized</b>
               If this option is specified, <u><a href="../man1/fdm.1.html">fdm</a></u>(1) attempts to delete messages which  exceed  <b>maximum-size</b>,  and
               continue.  If it is not specified, oversize messages are a fatal error and cause <u><a href="../man1/fdm.1.html">fdm</a></u>(1) to abort.

               Note  that <u><a href="../man1/fdm.1.html">fdm</a></u>(1) may have a number of messages queued (up to the <b>queue-high</b> setting, doubled for
               rewrite,  per  account),  so  this  setting  and  the  <b>queue-high</b>  option  should  be  set  after
               consideration  of  the space available in the temporary folder and the implications should <u><a href="../man1/fdm.1.html">fdm</a></u>(1)
               abort due to the space becoming full.

       <b>queue-high</b> <u>number</u>
               This sets the maximum number of messages <u><a href="../man1/fdm.1.html">fdm</a></u>(1) will hold simultaneously.  <u><a href="../man1/fdm.1.html">fdm</a></u>(1) will attempt to
               process previously queued messages as the next is being fetched.  Once this limit is reached,  no
               further messages will be fetched until the number of messages held drops to the <b>queue-low</b> value.

       <b>queue-low</b> <u>number</u>
               This  is  the  length  to  which  the message queue must drop before fetching continues after the
               <b>queue-high</b> limit has been reached.

       <b>ignore-errors</b>
               If set, <b>fdm.conf</b> will continue to process mail if a delivery fails rather than aborting.

       <b>allow-multiple</b>
               If this option is specified, <u><a href="../man1/fdm.1.html">fdm</a></u>(1) does not attempt to create a lock file  and  allows  multiple
               instances to run simultaneously.

       <b>lock-file</b> <u>path</u>
               This  sets  an  alternative  lock  file.   The  default  is  <u><a href="file:~/.fdm.lock">~/.fdm.lock</a></u>  for  non-root users and
               <u>/var/db/fdm.lock</u> for root.

       <b>lock-timeout</b> <u>time</u>
               Sets how long <b>fdm.conf</b> will try a lock file before giving up.

       <b>lock-wait</b>
               If present, <b>fdm.conf</b> will wait for <b>lock-file</b> for <b>lock-timeout</b>  rather  than  exiting  immediately
               with an error.

       <b>command-user</b> <u>user</u>
               This specifies the user used to run <b>exec</b> and <b>pipe</b> actions.  By default it is the user who invoked
               fdm.

       <b>default-user</b> <u>user</u>
               This  sets the default user to change to before delivering mail, if <u><a href="../man1/fdm.1.html">fdm</a></u>(1) is running as root and
               no alternative user is specified as part of the action or rule.  This option  may  be  overridden
               with the <b>-u</b> switch on the command line.  A default user must be given if running as root.

       <b>lookup-order</b> <u>location</u> <u>...</u>
               This  specifies  the  order  in  which  to do user lookup from left to right.  Possible types are
               <b>passwd</b> to use the <u><a href="../man5/passwd.5.html">passwd</a></u>(5) file, or <b>courier</b> to use Courier authlib (if support is compiled).

       <b>lock-types</b> <u>type</u> <u>...</u>
               This specifies the locks to be used for mbox locking.   Possible  types  are  <b>fcntl</b>,  <b>flock</b>,  and
               <b>dotlock</b>.  The <b>flock</b> and <b>fcntl</b> types are mutually exclusive.  The default is <b>flock</b>.

       <b>proxy</b> <u>url</u>
               This  instructs  <u><a href="../man1/fdm.1.html">fdm</a></u>(1)  to  proxy  all  connections  through  <u>url</u>.   HTTP and SOCKS5 proxies are
               supported at present (URLs of the form  http://<u>host</u>[:<u>port</u>]  or  socks://[<u>user</u>:<u>pass</u>@]host[:<u>port</u>]).
               No authentication is supported for HTTP.

       <b>unmatched-mail</b> <b>drop</b> | <b>keep</b>
               This  option  controls  what <u><a href="../man1/fdm.1.html">fdm</a></u>(1) does with mail that reaches the end of the ruleset (mail that
               matches no rules or matches only rules with the <b>continue</b> keyword).  <b>drop</b> will cause such mail  to
               be  discarded, and <b>keep</b> will attempt to leave the mail on the server.  The default is to keep the
               mail and log a warning that it reached the end of the ruleset.

       <b>purge-after</b> <u>count</u>
               The <b>purge-after</b> option makes <u><a href="../man1/fdm.1.html">fdm</a></u>(1) attempt to purge deleted mail from the server (if  supported)
               after  <u>count</u>  mails  have  been retrieved.  This is useful on unreliable connections to limit the
               potential number of mails refetched if the connection  drops,  but  note  that  it  can  incur  a
               considerable speed penalty.

       <b>no-received</b>
               If this option is present, <u><a href="../man1/fdm.1.html">fdm</a></u>(1) will not insert a ‘Received’ header into each mail.

       <b>no-create</b>
               If  this option is set, <u><a href="../man1/fdm.1.html">fdm</a></u>(1) will not attempt to create maildirs and mboxes or missing elements
               of their paths.

       <b>file-umask</b> <b>user</b> | <u>umask</u>
               This specifies the <u><a href="../man2/umask.2.html">umask</a></u>(2) to use when creating files.  <b>user</b> means to use  the  umask  set  when
               <u><a href="../man1/fdm.1.html">fdm</a></u>(1) is started, or <u>umask</u> may be specified as a three-digit octal number.  The default is 077.

       <b>file-group</b> <b>user</b> | <u>group</u>
               This  option  allows the default group ownership of files and directories created by <u><a href="../man1/fdm.1.html">fdm</a></u>(1) to be
               specified.  <u>group</u> may be a group name string or a numeric gid.  If <b>user</b> is used, or  this  option
               does  not appear in the configuration file, <u><a href="../man1/fdm.1.html">fdm</a></u>(1) does not attempt to set the group of new files
               and directories.

       <b>timeout</b> <u>time</u>
               This controls the maximum time to wait for a server to send data  before  closing  a  connection.
               The default is 900 seconds.

       <b>verify-certificates</b>
               Instructs <u><a href="../man1/fdm.1.html">fdm</a></u>(1) to verify SSL certificates for all SSL connections.

</pre><h4><b>INCLUDING</b> <b>FILES</b></h4><pre>
       Further configuration files may be including using the <b>include</b> command:

       <b>include</b> <u>path</u>

       The  file  to  include  is  searched  for  first  as  an absolute path and then relative to the directory
       containing the main configuration file.

</pre><h4><b>MACROS</b></h4><pre>
       Macros may be defined using the following syntax:

       <b>$</b><u>name</u> <b>=</b> <u>string</u>

       <b>%</b><u>name</u> <b>=</b> <u>number</u>

       Macros are prefixed with $ to indicate a string value and % to indicate a numeric value.  Once defined, a
       macro may be used in any place a string or number is expected.  Macros may  be  embedded  in  strings  by
       surrounding their name (after the $ or %) with {}s, like so:

             "abc ${mymacro} %{anothermacro} def"

       The  <b>ifdef</b>,  <b>ifndef</b>  and <b>endif</b> keywords may be used to conditionally parse a section of the configuration
       file depending on whether or not the macro given exists or does not exist.  <b>ifdef</b> and <b>ifndef</b>  blocks  may
       be nested.

</pre><h4><b>SHELL</b> <b>COMMANDS</b></h4><pre>
       The  result  of a shell command may be used at any point a string or number is expected by wrapping it in
       $() or %().  If the former is used, the command result is  used  as  a  string;  if  the  latter,  it  is
       converted to an integer.  Shell commands are executed when the configuration file is parsed.

</pre><h4><b>ACCOUNTS</b></h4><pre>
       The <b>account</b> command is used to instruct <u><a href="../man1/fdm.1.html">fdm</a></u>(1) to fetch mail from an account.  The syntax is:

       <b>account</b> <u>name</u> [<u>users</u>] [<b>disabled</b>] <u>type</u> [<u>args</u>] [<b>keep</b>]

       The  <u>name</u>  argument  is  a string specifying a name for the account.  The optional <u>users</u> argument has the
       following form:

       <b>user</b> <u>user</u> | <b>users</b> <b>{</b> <u>user</u> <u>...</u> <b>}</b>

       The first two options specify a user or list of users as which the  mail  should  be  delivered  when  an
       action  is  executed.   If  no users are specified, the default user (set with <b>set</b> <b>default-user</b>) is used.
       Users specified as part of the account definition may  be  overridden  by  similar  arguments  to  action
       definitions  or on match rules.  If <u><a href="../man1/fdm.1.html">fdm</a></u>(1) is run as non-root, it will still execute any actions once for
       each user, but will be unable to change to that user so the action will be executed multiple times as the
       current user.

       The <b>disabled</b> keyword instructs <u><a href="../man1/fdm.1.html">fdm</a></u>(1) to ignore this account unless it is explicitly enabled  with  a  <b>-a</b>
       option  on  the  command line.  If the <b>keep</b> keyword is specified, all mail collected from this account is
       kept (not deleted) even if it matches a <b>drop</b> action.

       Supported account types and arguments are:

       <b>stdin</b>   This account type reads mail from stdin, if it is connected to a  pipe.   This  may  be  used  to
               deliver mail from <u><a href="../man8/sendmail.8.html">sendmail</a></u>(8), see <u><a href="../man1/fdm.1.html">fdm</a></u>(1) for details.

       <b>pop3</b> <b>server</b> <u>host</u> [<b>port</b> <u>port</u>] [<b>user</b> <u>user</u>] [<b>pass</b> <u>pass</u>] [<u>only</u>] [<b>no-apop</b>] [<b>no-uidl</b>] [<b>starttls</b>] [<b>insecure</b>]

       <b>pop3s</b> <b>server</b> <u>host</u> [<b>port</b> <u>port</u>] [<u>userpass</u>] [<u>only</u>] [<b>no-apop</b>] [<b>no-verify</b>] [<b>no-uidl</b>] [<b>insecure</b>]
               These statements define a POP3 or POP3S account.  The <u>userpass</u> element has the following form:

               [<b>user</b> <u>user</u>] [<b>pass</b> <u>pass</u>]

               The  <u>host</u>,  <u>user</u> and <u>pass</u> arguments must be strings.  If the user or pass is not provided, <u><a href="../man1/fdm.1.html">fdm</a></u>(1)
               attempts to look it up in the <u><a href="file:~/.netrc">~/.netrc</a></u> file (see <u><a href="../man1/ftp.1.html">ftp</a></u>(1) for details of  the  file  format).   The
               port  option  may  be  either  a string which will be looked up in the <u><a href="../man5/services.5.html">services</a></u>(5) database, or a
               number.  If it is omitted, the default port (110 for POP3, 995 for POP3S) is used.

               The <u>only</u> option takes the form:

               [<b>new-only</b> | <b>old-only</b>] <b>cache</b> <u>path</u>

               <b>new-only</b> fetches only mail not previously fetched, and <b>old-only</b> is the inverse: it  fetches  only
               mail that has been fetched before.  The cache file is used to save the state of the POP3 mailbox.
               The  <b>no-apop</b>  flag  forces  <u><a href="../man1/fdm.1.html">fdm</a></u>(1)  not  to use the POP3 APOP command for authentication, and the
               <b>no-verify</b> keyword instructs <u><a href="../man1/fdm.1.html">fdm</a></u>(1) to skip SSL certificate  validation  for  this  account.   The
               <b>no-uidl</b>  keyword  makes <u><a href="../man1/fdm.1.html">fdm</a></u>(1) not use the UIDL command to retrieve mails.  This is mainly useful
               for broken POP3 servers.

               <b>starttls</b> attempts to use <u>STARTTLS</u> after connection.

               <b>insecure</b> allows the use of insecure protocols, which currently includes SSLv2, SSLv3 and TLS1.0.

       <b>pop3</b> <b>pipe</b> <u>command</u> [<u>userpass</u>] [<u>only</u>] [<b>no-apop</b>]
               This account type uses the POP3 protocol piped through <u>command</u>, such as <u><a href="../man1/ssh.1.html">ssh</a></u>(1).  If  the  command
               produces any output to stderr, it is logged.  For POP3 over a pipe, providing a user and password
               is not optional and it may not be read from <u><a href="file:~/.netrc">~/.netrc</a></u>.

       <b>imap</b>  <b>server</b>  <u>host</u>  [<b>port</b>  <u>port</u>]  [<u>userpass</u>]  [<b>folder</b>  <u>name</u>]  [<u>only</u>]  [<b>no-cram-md5</b>] [<b>no-login</b>] [<b>starttls</b>]
               [<b>insecure</b>]

       <b>imap</b> <b>server</b> <u>host</u> [<b>port</b> <u>port</u>] [<u>userpass</u>] [<b>folders</b>] <b>{</b> <u>name</u> <u>...</u> <b>}</b> [<u>only</u>]

       <b>imaps</b> <b>server</b> <u>host</u> [<b>port</b> <u>port</u>] [<u>userpass</u>] [<u>folders</u>] [<u>only</u>] [<b>no-verify</b>] [<b>no-cram-md5</b>] [<b>no-login</b>] [<b>insecure</b>]
               These define an IMAP or IMAPS account.  The parameters are as for a POP3 or POP3S account,  aside
               from  the  additional  <u>folders</u>  option  which  sets the name of the folder or folders to use (the
               default is to fetch from the inbox). This has the form:

               <b>folder</b> <u>name</u> | <b>folders</b> <b>{</b> <u>name</u> <u>...</u> <b>}</b>

               The default ports used are 143 for IMAP and 993 for IMAPS.  For IMAP, the <u>only</u> item consists only
               of one of the keywords <b>new-only</b> or <b>old-only</b> - a cache file is not required.

               Options <b>no-cram-md5</b> and <b>no-login</b> disable the given authentication method.  The default is to  use
               CRAM-MD5 if it is available, or LOGIN otherwise.

               <b>starttls</b> attempts to use <u>STARTTLS</u> after connection.

               <b>insecure</b> allows the use of insecure protocols, which currently includes SSLv2, SSLv3 and TLS1.0.

       <b>imap</b> <b>pipe</b> <u>command</u> [<u>userpass</u>] [<u>folders</u>] [<u>only</u>]
               As  with  <b>pop3</b>  <b>pipe</b>,  this  account  type  uses the IMAP protocol piped through <u>command</u>.  If the
               optional IMAP <u>user</u> and <u>pass</u> are supplied, they will be used if necessary, but if one is provided,
               both must be – using <u><a href="file:~/.netrc">~/.netrc</a></u> is not permitted.

               Mail fetched using the IMAP protocol is tagged with a folder tag  containing  the  source  folder
               name.

       <b>maildir</b> <u>path</u>

       <b>maildirs</b> <b>{</b> <u>path</u> <u>...</u> <b>}</b>
               These  account  types instruct <u><a href="../man1/fdm.1.html">fdm</a></u>(1) to fetch mail from the maildir or maildirs specified.  This
               allows <u><a href="../man1/fdm.1.html">fdm</a></u>(1) to be used to filter mail, fetching from a maildir and deleting (dropping) unwanted
               mail, or delivering mail to another maildir or to an mbox.

               Mail fetched from a maildir is tagged with a maildir tag containing  the  basename  of  the  mail
               file.

       <b>mbox</b> <u>path</u>

       <b>mboxes</b> <b>{</b> <u>path</u> <u>...</u> <b>}</b>
               These  are similar to <b>maildir</b> and <b>maildirs</b>, but cause <u><a href="../man1/fdm.1.html">fdm</a></u>(1) to fetch mail from an mbox or set of
               mboxes.

               Mail fetched from a mbox is tagged with a mbox tag containing the basename of the mbox file.

       <b>nntp</b> <b>server</b> <u>host</u> [<b>port</b> <u>port</u>] [<u>userpass</u>] <b>group</b> <u>group</u> <b>cache</b> <u>cache</u>

       <b>nntp</b> <b>server</b> <u>host</u> [<b>port</b> <u>port</u>] [<u>userpass</u>] <b>groups</b> <b>{</b> <u>group</u> <u>...</u> <b>}</b> <b>cache</b> <u>cache</u>

       <b>nntps</b> <b>server</b> <u>host</u> [<b>port</b> <u>port</u>] [<u>userpass</u>] <b>group</b> <u>group</u> <b>cache</b> <u>cache</u>

       <b>nntps</b> <b>server</b> <u>host</u> [<b>port</b> <u>port</u>] [<u>userpass</u>] <b>groups</b> <b>{</b> <u>group</u> <u>...</u> <b>}</b> <b>cache</b> <u>cache</u>
               An NNTP account.  Articles are fetched from the specified group or  groups  and  delivered.   The
               index  and  message-id  of the last article fetched in each group is saved in the specified cache
               file.  When <u><a href="../man1/fdm.1.html">fdm</a></u>(1) is run again, fetching begins at the  cached  article.   Note  that  the  <b>keep</b>
               option  is  completely  ignored  for  NNTP  accounts  – all mail is kept, and the cache is always
               updated.

</pre><h4><b>TAGGING</b></h4><pre>
       As mail is processed by <u><a href="../man1/fdm.1.html">fdm</a></u>(1), it is tagged with a number of name/value  pairs.   Some  tags  are  added
       automatically,  and  mail  may  also  be tagged explicitly by the user using the <b>tag</b> action.  Tags may be
       inserted in most strings in a similar manner to macros, except tags are processed at runtime rather  than
       as the configuration file is parsed.  A tag's value is inserted by wrapping its name in %[], for example:

       abc%[account]def

       %[hour]:%[minute]:%[second]

       The  default  tags  also  have  a  single-letter  shorthand.   Including a nonexistent tag in a string is
       equivalent to including a tag with an empty  value,  so  "abc%[nonexistent]def"  will  be  translated  to
       "abcdef".

       The automatically added tags are:

             account (%a)
                     The name of the account from which the mail was fetched.
             home (%h)
                     The delivery user's home directory.
             uid (%n)
                     The delivery user's uid.
             action (%t)
                     The name of the last action executed for this mail.
             user (%u)
                     The delivery user's username.
             hour (%H)
                     The current hour (00–23).
             minute (%M)
                     The current minute (00–59).
             second (%S)
                     The current second (00–59).
             day (%d)
                     The current day of the month (01–31).
             month (%m)
                     The current month (01–12).
             year (%y)
                     The current year.
             year2   The current year as two digits.
             dayofweek (%W)
                     The current day of the week (0–6, Sunday is 0).
             dayofyear (%Y)
                     The current day of the year (001–366).
             quarter (%Q)
                     The current quarter (1–4).
             rfc822date
                     The current date in RFC822 format.
             mail_hour
                     The  hour  from  the  mail's  date header, if it exists and is valid, otherwise the current
                     time.
             mail_minute
                     The minute from the mail's date header.
             mail_second
                     The second from the mail's date header.
             mail_day
                     The day from the mail's date header.
             mail_month
                     The month from the mail's date header.
             mail_year
                     The year from the mail's date header.
             mail_year2
                     The same as two digits.
             mail_dayofweek
                     The day of the week from the mail's date header.
             mail_dayofyear
                     The day of the year from the mail's date header.
             mail_quarter
                     The quarter (1–4) from the mail's date header.
             mail_rfc822date
                     The mail's date in RFC822 format.
             hostname
                     The local hostname.

       In addition, the shorthand %% is replaced with a literal %, and %0 to %9 are replaced with the result  of
       any bracket expressions in the last regexp.

</pre><h4><b>CACHES</b></h4><pre>
       <u><a href="../man1/fdm.1.html">fdm</a></u>(1) can maintain a cache file with a set of user-defined strings.  In order to use caches, <u><a href="../man1/fdm.1.html">fdm</a></u>(1) must
       have been compiled with them enabled.  Caches are declared with the <b>cache</b> keyword:

       <b>cache</b> <u>path</u> [<b>expire</b> <u>age</u>]

       The  <u>path</u>  is  the location of the cache file. If the <b>expire</b> keyword is specified, items in the cache are
       removed after they reach the age specified.  <u>age</u> may be given unadorned in seconds, or followed by one of
       the modifiers: <u>seconds</u>, <u>hours</u>, <u>minutes</u>, <u>days</u>, <u>months</u> or <u>years</u>.

       Caches must be declared before they are used. Items are added to caches using  the  <b>add-to-cache</b>  action,
       removed  using the <b>remove-from-cache</b> action, and searched for using the <b>in-cache</b> condition; see below for
       information on these.

</pre><h4><b>ACTIONS</b></h4><pre>
       The <b>action</b> command is used to define actions.  These may be specified by name in  rules  (see  below)  to
       perform some action on a mail.  The syntax is:

       <b>action</b> <u>name</u> [<u>users</u>] <u>action</u>

       <b>action</b> <u>name</u> [<u>users</u>] <b>{</b> <u>action</u> <u>...</u> <b>}</b>

       The  <u>name</u>  is  a  string  defining a name for the action.  The <u>users</u> argument has the same form as for an
       account definition.  An action's user setting may be overridden in the matching rule.

       The possible values for <u>action</u> are listed below.  If multiple actions are  specified  they  are  executed
       once in the order specified, for each user.

       <b>drop</b>    Discard the mail.

       <b>keep</b>    Keep the mail, do not remove it from the account.

       <b>tag</b> <u>string</u> [<b>value</b> <u>value</u>]
               This tags mail with <u>string</u>, and optionally <u>value</u>, which may be matched using the <b>tagged</b> or <b>string</b>
               conditions.

       <b>maildir</b> <u>path</u>
               Save  the mail to the maildir specified by <u>path</u>.  If the maildir or any part of its path does not
               exist, it is created, unless the <b>no-create</b> option is set.

               Mail delivered to a maildir is tagged with a mail_file tag containing the full path of  the  mail
               file.

       <b>mbox</b> <u>path</u> [<b>compress</b>]
               Append the mail to the mbox at <u>path</u>.  If <b>compress</b> is specified, <u><a href="../man1/fdm.1.html">fdm</a></u>(1) will add ‘.gz’ to <u>path</u> and
               attempt  to  write  mail using <u><a href="../man1/gzip.1.html">gzip</a></u>(1) compression.  If the mbox or any part of its path does not
               exist, it is created, unless the <b>no-create</b> option is set.

               Mail delivered to an mbox is tagged with a mbox_file tag containing the path of the mbox.

       <b>exec</b> <u>command</u>
               Execute <u>command</u>.

       <b>pipe</b> <u>command</u>
               Pipe the mail to <u>command</u>.  <b>exec</b> and <b>pipe</b> commands are run as the command user.

       <b>write</b> <u>path</u>
               Write the mail to <u>path</u>.

       <b>append</b> <u>path</u>
               Append the mail to <u>path</u>.

       <b>smtp</b> <b>server</b> <u>host</u> [<b>port</b> <u>port</u>] [<b>from</b> <u>from</u>] [<b>to</b> <u>to</u>]
               Connect to an SMTP server and attempt to deliver the mail to it.  If <u>from</u>  or  <u>to</u>  is  specified,
               they are passed to the server in the MAIL FROM or RCPT TO commands.  If not, the current user and
               host names are used.

       <b>rewrite</b> <u>command</u>
               Pipe  the  entire mail through <u>command</u> to generate a new mail and use that mail for any following
               actions or rules.  An example of the <b>rewrite</b> action is:

                     action "cat" pipe "cat"
                     action "rewrite" rewrite "sed 's/bob/fred/g'"
                     # this rule will rewrite the message
                     match all action "rewrite" continue
                     # this rule will cat the rewritten message
                     match all action "cat"

       <b>add-header</b> <u>name</u> <b>value</b> <u>value</u>
               Add a header <u>name</u> with contents <u>value</u>.

       <b>remove-header</b> <u>name</u>

       <b>remove-headers</b> <b>{</b> <u>name</u> <u>...</u> <b>}</b>
               Remove all occurrences of headers matching the <u><a href="../man3/fnmatch.3.html">fnmatch</a></u>(3) pattern <u>name</u>.

       <b>stdout</b>  Write the mail to stdout.

       <b>add-to-cache</b> <u>path</u> <b>key</b> <u>key</u>
               This action adds the string <u>key</u> to the cache specified by <u>path</u>.  If <u>key</u>  already  exists  in  the
               cache, it is replaced.

       <b>remove-from-cache</b> <u>path</u> <b>key</b> <u>key</u>
               Remove the string <u>key</u> from the cache <u>path</u>, if a matching key is present.

       <b>action</b> <u>name</u>
               This invokes another named action.  A maximum of five actions may be called in a sequence.

</pre><h4><b>RULES</b></h4><pre>
       Rules are specified using the <b>match</b> keyword.  It has the following basic form:

       <b>match</b> <u>condition</u> [<b>and</b> | <b>or</b> <u>condition</u> <u>...</u>] [<u>users</u>] <u>actions</u> [<b>continue</b>]

       The <u>condition</u> argument may be one of:

       <b>all</b>     Matches all mail.

       <b>matched</b>
               Matches only mail that has matched a previous rule and been passed on with <b>continue</b>.

       <b>unmatched</b>
               The opposite of <b>matched</b>: matches only mails which have matched no previous rules.

       <b>account</b> <u>name</u> | <b>accounts</b> <b>{</b> <u>name</u> <u>...</u> <b>}</b>
               Matches  only  mail  fetched  from  the named account or accounts.  The account names may include
               shell glob wildcards to match multiple accounts, as with the <b>-a</b> and <b>-x</b> command line options.

       <b>tagged</b> <u>string</u>
               Matches mails tagged with <u>string</u>.

       [<b>case</b>] <u>regexp</u> [<b>in</b> <b>headers</b> | <b>in</b> <b>body</b>]
               Specifies a regexp against which each  mail  should  be  matched.   The  regexp  matches  may  be
               restricted  to  either  the  headers or body of the message by specifying either <b>in</b> <b>headers</b> or <b>in</b>
               <b>body</b>.  The <b>case</b> keyword forces the regexp to be matched case-sensitively: the  default  is  case-
               insensitive matching.

       <b>exec</b> <u>command</u> [<b>user</b> <u>user</u>] <b>returns</b> (<u>return</u> <u>code</u>, <u>stdout</u> <u>regexp</u>)

       <b>pipe</b> <u>command</u> [<b>user</b> <u>user</u>] <b>returns</b> (<u>return</u> <u>code</u>, [<b>case</b>] <u>stdout</u> <u>regexp</u>)
               These  two  conditions  execute  a <u>command</u> and test its return value and output.  The <u>return</u> <u>code</u>
               argument is the numeric return code expected and <u>stdout</u> <u>regexp</u> is a regexp to be  tested  against
               the  output  of the command to stdout.  Either of these two arguments may be omitted: if both are
               specified, both must match for the condition to be true.  The <b>pipe</b> version will pipe the mail  to
               the  command's  stdin when executing it.  If a user is specified, <u><a href="../man1/fdm.1.html">fdm</a></u>(1) will change to that user
               before executing the command, otherwise the current user (or root if started as root) is used.

       <b>size</b> <b>&lt;</b> <u>number</u>

       <b>size</b> <b>&gt;</b> <u>number</u>
               Compare the mail size with <u>number</u>.

       <b>string</b> <u>string</u> <b>to</b> [<b>case</b>] <u>regexp</u>
               Match <u>string</u> against <u>regexp</u>.

       <b>age</b> <b>&lt;</b> <u>time</u>

       <b>age</b> <b>&gt;</b> <u>time</u>
               The <b>age</b> condition examines the mail's date header to determine its age, and matches if  the  mail
               is  older  (&gt;) or newer (&lt;) than the time specified.  The time may be given as a simple number in
               seconds, or followed by the word <u>seconds</u>, <u>hours</u>, <u>minutes</u>, <u>days</u>, <u>months</u> or <u>years</u> to specify a time
               in different units.

       <b>in-cache</b> <u>path</u> <b>key</b> <u>key</u>
               This condition evaluates to true if the string <u>key</u> is in the cache at <u>path</u>.

       <b>attachment</b> <b>count</b> <b>&lt;</b> <u>number</u>

       <b>attachment</b> <b>count</b> <b>&gt;</b> <u>number</u>

       <b>attachment</b> <b>count</b> <b>==</b> <u>number</u>

       <b>attachment</b> <b>count</b> <b>!=</b> <u>number</u>
               These conditions match if the mail possesses a number of attachments  less  than,  greater  than,
               equal to or not equal to <u>number</u>.

       <b>attachment</b> <b>total-size</b> <b>&lt;</b> <u>size</u>

       <b>attachment</b> <b>total-size</b> <b>&gt;</b> <u>size</u>
               Matches if the total size of all attachments is smaller or larger than <u>size</u>.

       <b>attachment</b> <b>any-size</b> <b>&lt;</b> <u>size</u>

       <b>attachment</b> <b>any-size</b> <b>&gt;</b> <u>size</u>
               Compare  each  individual  attachment  on  a mail to <u>size</u> and match if any of them are smaller or
               larger.

       <b>attachment</b> <b>any-type</b> <u>string</u>

       <b>attachment</b> <b>any-name</b> <u>string</u>
               Match true if any of a mail's attachments possesses a MIME type or filename that matches  <u>string</u>.
               <u><a href="../man3/fnmatch.3.html">fnmatch</a></u>(3) wildcards may be used.

       Multiple conditions may be chained together using the <b>and</b> or <b>or</b> keywords.  The conditions are tested from
       left to right.  Any condition may be prefixed by the <b>not</b> keyword to invert it.

       The  optional <u>users</u> argument to the first form has the same syntax as for an <b>action</b> definition.  A rule's
       user list overrides any users given as part of the actions.

       The <u>actions</u> list specifies the actions to perform when the rule matches  a  mail.   It  is  either  of  a
       similar form:

       <b>action</b> <u>name</u> | <b>actions</b> <b>{</b> <u>name</u> <u>...</u> <b>}</b>

       Or may specify a number of actions inline (lambda actions):

       <b>action</b> <u>action</u>

       <b>action</b> <b>{</b> <u>action</u> <u>...</u> <b>}</b>

       In  the  latter  case, <u>action</u> follows the same form as described in the ACTIONS section.  The actions are
       performed from first to last in the order they are specified in the rule definition.

       If the <b>continue</b> keyword is present, evaluation will not stop if this rule is  matched.   Instead,  <u><a href="../man1/fdm.1.html">fdm</a></u>(1)
       will continue to match further rules after performing any actions for this rule.

</pre><h4><b>NESTED</b> <b>RULES</b></h4><pre>
       Rules may be nested by specifying further rules in braces:

       <b>match</b> <u>condition</u> [<b>and</b> | <b>or</b> <u>condition</u> <u>...</u>] <b>{</b>

       <b>match</b> <u>...</u>

       <b>}</b>

       The  inner rules will not be evaluated unless the outer one matches.  Rules may be multiply nested.  Note
       that the outer rule does not count as a match for the purposes of the <b>matched</b> and <b>unmatched</b> conditions.

</pre><h4><b>FILES</b></h4><pre>
       <u><a href="file:~/.fdm.conf">~/.fdm.conf</a></u>          default <b>fdm.conf</b> configuration file
       <u>/etc/fdm.conf</u>        default system-wide configuration file
       <u><a href="file:~/.fdm.lock">~/.fdm.lock</a></u>          default lock file
       <u>/var/db/fdm.lock</u>     lock file for root user

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <u><a href="../man1/fdm.1.html">fdm</a></u>(1), <u><a href="../man7/re_format.7.html">re_format</a></u>(7)

</pre><h4><b>AUTHORS</b></h4><pre>
       Nicholas Marriott &lt;<u><a href="mailto:nicholas.marriott@gmail.com">nicholas.marriott@gmail.com</a></u>&gt;

Debian                                           August 21, 2006                                     <u><a href="../man5/FDM.CONF.5.html">FDM.CONF</a></u>(5)
</pre>
 </div>
</div></section>
</div>
</body>
</html>