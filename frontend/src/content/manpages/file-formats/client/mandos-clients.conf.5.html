<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>mandos-clients.conf - Configuration file for the Mandos server</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/mandos">mandos_1.8.19-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       mandos-clients.conf - Configuration file for the Mandos server

</pre><h4><b>SYNOPSIS</b></h4><pre>
       /etc/mandos/clients.conf

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The file /etc/mandos/clients.conf is a configuration file for <b><a href="../man8/mandos.8.html">mandos</a></b>(8), read by it at startup. The file
       needs to list all clients that should be able to use the service. The settings in this file can be
       overridden by runtime changes to the server, which it saves across restarts. (See the section called
       “PERSISTENT STATE” in <b><a href="../man8/mandos.8.html">mandos</a></b>(8).) However, any <u>changes</u> to this file (including adding and removing
       clients) will, at startup, override changes done during runtime.

       The format starts with a [<u>section</u> <u>header</u>] which is either [DEFAULT] or [<u>client</u> <u>name</u>]. The <u>client</u> <u>name</u> can
       be anything, and is not tied to a host name. Following the section header is any number of “<u>option</u>=<u>value</u>”
       entries, with continuations in the style of RFC 822.  “<u>option</u>: <u>value</u>” is also accepted. Note that leading
       whitespace is removed from values. Values can contain format strings which refer to other values in the
       same section, or values in the “DEFAULT” section (see the section called “EXPANSION”). Lines beginning
       with “#” or “;” are ignored and may be used to provide comments.

</pre><h4><b>OPTIONS</b></h4><pre>
       <u>Note:</u> all option values are subject to start time expansion, see the section called “EXPANSION”.

       Unknown options are ignored. The used options are as follows:

       <b>approval_delay</b> <b>=</b> <u>TIME</u>
           This option is <u>optional</u>.

           How long to wait for external approval before resorting to use the <b>approved_by_default</b> value. The
           default is “PT0S”, i.e. not to wait.

           The format of <u>TIME</u> is the same as for <u>timeout</u> below.

       <b>approval_duration</b> <b>=</b> <u>TIME</u>
           This option is <u>optional</u>.

           How long an external approval lasts. The default is 1 second.

           The format of <u>TIME</u> is the same as for <u>timeout</u> below.

       <b>approved_by_default</b> <b>=</b> <b>{</b> <b>1</b> <b>|</b> <b>yes</b> <b>|</b> <b>true</b> <b>|</b> <b>on</b> <b>|</b> <b>0</b> <b>|</b> <b>no</b> <b>|</b> <b>false</b> <b>|</b> <b>off</b> <b>}</b>
           Whether to approve a client by default after the <b>approval_delay</b>. The default is “True”.

       <b>checker</b> <b>=</b> <u>COMMAND</u>
           This option is <u>optional</u>.

           This option overrides the default shell command that the server will use to check if the client is
           still up. Any output of the command will be ignored, only the exit code is checked: If the exit code
           of the command is zero, the client is considered up. The command will be run using “<b><a href="file:/bin/sh">/bin/sh</a></b> <b>-c</b>”, so
           <u>PATH</u> will be searched. The default value for the checker command is “<b>fping</b> <b>-q</b> <b>--</b> %%(host)s”. Note
           that <b>mandos-keygen</b>, when generating output to be inserted into this file, normally looks for an SSH
           server on the Mandos client, and, if it finds one, outputs a <b>checker</b> option to check for the client’s
           SSH key fingerprint – this is more secure against spoofing.

           In addition to normal start time expansion, this option will also be subject to runtime expansion;
           see the section called “EXPANSION”.

       <b>extended_timeout</b> <b>=</b> <u>TIME</u>
           This option is <u>optional</u>.

           Extended timeout is an added timeout that is given once after a password has been sent successfully
           to a client. The timeout is by default longer than the normal timeout, and is used for handling the
           extra long downtime while a machine is booting up. Time to take into consideration when changing this
           value is file system checks and quota checks. The default value is 15 minutes.

           The format of <u>TIME</u> is the same as for <u>timeout</u> below.

       <b>fingerprint</b> <b>=</b> <u>HEXSTRING</u>
           This option is <u>required</u> if the <b>key_id</b> is not set, and <u>optional</u> otherwise.

           This option sets the OpenPGP fingerprint that (before GnuTLS 3.6.0) identified the public key that
           clients authenticate themselves with through TLS. The string needs to be in hexadecimal form, but
           spaces or upper/lower case are not significant.

       <b>key_id</b> <b>=</b> <u>HEXSTRING</u>
           This option is <u>required</u> if the <b>fingerprint</b> is not set, and <u>optional</u> otherwise.

           This option sets the certificate key ID that (with GnuTLS 3.6.6 or later) identifies the public key
           that clients authenticate themselves with through TLS. The string needs to be in hexadecimal form,
           but spaces or upper/lower case are not significant.

       <b>host</b> <b>=</b> <u>STRING</u>
           This option is <u>optional</u>, but highly <u>recommended</u> unless the <b>checker</b> option is modified to a
           non-standard value without “%%(host)s” in it.

           Host name for this client. This is not used by the server directly, but can be, and is by default,
           used by the checker. See the <b>checker</b> option.

       <b>interval</b> <b>=</b> <u>TIME</u>
           This option is <u>optional</u>.

           How often to run the checker to confirm that a client is still up.  <u>Note:</u> a new checker will not be
           started if an old one is still running. The server will wait for a checker to complete until the
           below “<u>timeout</u>” occurs, at which time the client will be disabled, and any running checker killed.
           The default interval is 2 minutes.

           The format of <u>TIME</u> is the same as for <u>timeout</u> below.

       <b>secfile</b> <b>=</b> <u>FILENAME</u>
           This option is only used if <b>secret</b> is not specified, in which case this option is <u>required</u>.

           Similar to the <b>secret</b>, except the secret data is in an external file. The contents of the file should
           <u>not</u> be base64-encoded, but will be sent to clients verbatim.

           File names of the form ~user/foo/bar and $<b>ENVVAR</b>/foo/bar are supported.

       <b>secret</b> <b>=</b> <u>BASE64_ENCODED_DATA</u>
           If this option is not specified, the <b>secfile</b> option is <u>required</u> to be present.

           If present, this option must be set to a string of base64-encoded binary data. It will be decoded and
           sent to the client matching the above <b>key_id</b> or <b>fingerprint</b>. This should, of course, be OpenPGP
           encrypted data, decryptable only by the client. The program <b><a href="../man8/mandos-keygen.8.html">mandos-keygen</a></b>(8) can, using its
           <b>--password</b> option, be used to generate this, if desired.

           Note: this value of this option will probably be very long. A useful feature to avoid having
           unreadably-long lines is that a line beginning with white space adds to the value of the previous
           line, RFC 822-style.

       <b>timeout</b> <b>=</b> <u>TIME</u>
           This option is <u>optional</u>.

           The timeout is how long the server will wait, after a successful checker run, until a client is
           disabled and not allowed to get the data this server holds. By default Mandos will use 5 minutes. See
           also the <b>extended_timeout</b> option.

           The <u>TIME</u> is specified as an RFC 3339 duration; for example “P1Y2M3DT4H5M6S” meaning one year, two
           months, three days, four hours, five minutes, and six seconds. Some values can be omitted, see RFC
           3339 Appendix A for details.

       <b>enabled</b> <b>=</b> <b>{</b> <b>1</b> <b>|</b> <b>yes</b> <b>|</b> <b>true</b> <b>|</b> <b>on</b> <b>|</b> <b>0</b> <b>|</b> <b>no</b> <b>|</b> <b>false</b> <b>|</b> <b>off</b> <b>}</b>
           Whether this client should be enabled by default. The default is “true”.

</pre><h4><b>EXPANSION</b></h4><pre>
       There are two forms of expansion: Start time expansion and runtime expansion.

   <b>START</b> <b>TIME</b> <b>EXPANSION</b>
       Any string in an option value of the form “%(<u>foo</u>)s” will be replaced by the value of the option <u>foo</u>
       either in the same section, or, if it does not exist there, the [DEFAULT] section. This is done at start
       time, when the configuration file is read.

       Note that this means that, in order to include an actual percent character (“%”) in an option value, two
       percent characters in a row (“%%”) must be entered.

   <b>RUNTIME</b> <b>EXPANSION</b>
       This is currently only done for the <u>checker</u> option.

       Any string in an option value of the form “%%(<u>foo</u>)s” will be replaced by the value of the attribute <u>foo</u>
       of the internal “Client” object in the Mandos server. The currently allowed values for <u>foo</u> are:
       “approval_delay”, “approval_duration”, “created”, “enabled”, “expires”, “key_id”, “fingerprint”, “host”,
       “interval”, “last_approval_request”, “last_checked_ok”, “last_enabled”, “name”, “timeout”, and, if using
       D-Bus, “dbus_object_path”. See the source code for details.  <b>Currently,</b> <u>none</u> <b>of</b> <b>these</b> <b>attributes</b> <b>except</b>
       <b>“host”</b> <b>are</b> <b>guaranteed</b> <b>to</b> <b>be</b> <b>valid</b> <b>in</b> <b>future</b> <b>versions.</b>  Therefore, please let the authors know of any
       attributes that are useful so they may be preserved to any new versions of this software.

       Note that this means that, in order to include an actual percent character (“%”) in a <u>checker</u> option,
       <u>four</u> percent characters in a row (“%%%%”) must be entered. Also, a bad format here will lead to an
       immediate but <u>silent</u> run-time fatal exit; debug mode is needed to expose an error of this kind.

</pre><h4><b>FILES</b></h4><pre>
       The file described here is /etc/mandos/clients.conf

</pre><h4><b>BUGS</b></h4><pre>
       The format for specifying times for <u>timeout</u> and <u>interval</u> is not very good.

       The difference between %%(<u>foo</u>)s and %(<u>foo</u>)s is obscure.

       Please report bugs to the Mandos development mailing list: &lt;<a href="mailto:mandos-dev@recompile.se">mandos-dev@recompile.se</a>&gt; (subscription
       required). Note that this list is public. The developers can be reached privately at
       &lt;<a href="mailto:mandos@recompile.se">mandos@recompile.se</a>&gt; (OpenPGP key fingerprint 153A 37F1 0BBA 0435 987F 2C4A 7223 2973 CA34 C2C4 for
       encrypted mail).

</pre><h4><b>EXAMPLE</b></h4><pre>
           [DEFAULT]
           timeout = PT5M
           interval = PT2M
           checker = fping -q -- %%(host)s

           # Client "foo"
           [foo]
           key_id = 788cd77115cd0bb7b2d5e0ae8496f6b48149d5e712c652076b1fd2d957ef7c1f
           fingerprint =  7788 2722 5BA7 DE53 9C5A  7CFA 59CF F7CD BD9A 5920
           secret =
                   hQIOA6QdEjBs2L/HEAf/TCyrDe5Xnm9esa+Pb/vWF9CUqfn4srzVgSu234
                   REJMVv7lBSrPE2132Lmd2gqF1HeLKDJRSVxJpt6xoWOChGHg+TMyXDxK+N
                   Xl89vGvdU1XfhKkVm9MDLOgT5ECDPysDGHFPDhqHOSu3Kaw2DWMV/iH9vz
                   3Z20erVNbdcvyBnuojcoWO/6yfB5EQO0BXp7kcyy00USA3CjD5FGZdoQGI
                   Tb8A/ar0tVA5crSQmaSotm6KmNLhrFnZ5BxX+TiE+eTUTqSloWRY6VAvqW
                   QHC7OASxK5E6RXPBuFH5IohUA2Qbk5AHt99pYvsIPX88j2rWauOokoiKZo
                   t/9leJ8VxO5l3wf/U64IH8bkPIoWmWZfd/nqh4uwGNbCgKMyT+AnvH7kMJ
                   3i7DivfWl2mKLV0PyPHUNva0VQxX6yYjcOhj1R6fCr/at8/NSLe2OhLchz
                   dC+Ls9h+kvJXgF8Sisv+Wk/1RadPLFmraRlqvJwt6Ww21LpiXqXHV2mIgq
                   WnR98YgSvUi3TJHrUQiNc9YyBzuRo0AjgG2C9qiE3FM+Y28+iQ/sR3+bFs
                   zYuZKVTObqiIslwXu7imO0cvvFRgJF/6u3HNFQ4LUTGhiM3FQmC6NNlF3/
                   vJM2hwRDMcJqDd54Twx90Wh+tYz0z7QMsK4ANXWHHWHR0JchnLWmenzbtW
                   5MHdW9AYsNJZAQSOpirE4Xi31CSlWAi9KV+cUCmWF5zOFy1x23P6PjdaRm
                   4T2zw4dxS5NswXWU0sVEXxjs6PYxuIiCTL7vdpx8QjBkrPWDrAbcMyBr2O
                   QlnHIvPzEArRQLo=
           host = foo.example.org
           interval = PT1M

           # Client "bar"
           [bar]
           key_id = F90C7A81D72D1EA69A51031A91FF8885F36C8B46D155C8C58709A4C99AE9E361
           fingerprint = 3e393aeaefb84c7e89e2f547b3a107558fca3a27
           secfile = /etc/mandos/bar-secret
           timeout = PT15M
           approved_by_default = False
           approval_delay = PT30S

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man8mandos/intro.8mandos.html">intro</a></b>(8mandos), <b><a href="../man8/mandos-keygen.8.html">mandos-keygen</a></b>(8), <b><a href="../man5/mandos.conf.5.html">mandos.conf</a></b>(5), <b><a href="../man8/mandos.8.html">mandos</a></b>(8), <b><a href="../man8/fping.8.html">fping</a></b>(8)

       RFC 3339: Date and Time on the Internet: Timestamps
           The time intervals are in the "duration" format, as specified in ABNF in Appendix A of RFC 3339.

</pre><h4><b>COPYRIGHT</b></h4><pre>
       Copyright © 2008-2023 Teddy Hogeborn, Björn Påhlsson

       This manual page is part of Mandos.

       Mandos is free software: you can redistribute it and/or modify it under the terms of the GNU General
       Public License as published by the Free Software Foundation, either version 3 of the License, or (at your
       option) any later version.

       Mandos is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the
       implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public
       License for more details.

       You should have received a copy of the GNU General Public License along with Mandos. If not, see
       <b><a href="http://www.gnu.org/licenses/">http://www.gnu.org/licenses/</a></b>.

Mandos 1.8.19                                      2025-06-27                               <u><a href="../man5/MANDOS-CLIENTS.CO.5.html">MANDOS-CLIENTS.CO</a></u>(5)
</pre>
 </div>
</div></section>
</div>
</body>
</html>