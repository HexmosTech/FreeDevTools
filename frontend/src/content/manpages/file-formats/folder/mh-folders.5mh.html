<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>mh-folders - storage format used by nmh message system</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/nmh">nmh_1.8-3_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       mh-folders - storage format used by nmh message system

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>nmh</b> stores messages in the files and directories of the host filesystem according to the following rules:

       <b>one</b> <b>folder</b> <b>per</b> <b>directory</b>
            An  <b>nmh</b>  folder corresponds to a directory.  There are no limits on folder names beyond those of the
            host filesystem.

       <b>one</b> <b>message</b> <b>per</b> <b>file</b>
            The file name is a positive integer.  Other files containing metadata or arbitrary names  can  exist
            in  a  folder; while the preference is that non-message files begin with “.”, all files that are not
            positive integers <u>must</u> be ignored by an <b>MH</b>-compatible implementation.  However, implementations  are
            free to indicate to the user the existence of non-message files that are not prefixed with a “.”.

            The  filename  for a new message is one greater than the highest numbered message in the folder; its
            full path can be accessed by the pseudo-sequence <u>new</u> (e.g., <b>mhpath</b>  <u>new</u>).   New  messages  are  <u>only</u>
            permitted to be added to a folder at the end of the message number range.

            To add a new message to a folder, the recommended sequence is:

            •   Create a temporary file in the desired folder.

            •   Attempt to link the temporary file to the new message number.

            •   If  successful,  remove the temporary file.  If the link fails, increment the message number and
                try again.
       <b>context</b>
            There is one context file.  Its default location is in the user's  Path  and  its  default  name  is
            <u>context</u>,  but  these  can  be  overridden  by  the $MHCONTEXT environment variable.  <b>context</b> has the
            following format:

                 <b>Current-Folder:</b> <b>+</b><u>folder</u>
                 <b>atr-</b><u>sequence-path</u><b>:</b> <u>m[-n]</u> <u>[...]</u>

            where <u>folder</u> is the directory name of the current folder.  Lines beginning with “atr” are  used  for
            private  sequences.   <u>sequence</u>  is  the  name  of the private sequence, <u>path</u> is the full path to the
            folder with the private sequence, and <u>m[-n]</u> is a message number or range of message numbers  in  the
            sequence.

       <b>sequences</b>
            There  is one sequences file in each <b>nmh</b> folder.  Its default name is <u>.mh_sequences</u>, but this can be
            overridden by the “mh-sequences” profile entry.  <b>sequences</b> has the following format:

                 <b>sequence:</b> <u>m[-n]</u> <u>[...]</u>

            showing the (possibly empty) message numbers and/or ranges of message numbers in each sequence.  The
            <b>cur</b> sequence has at most just a single message number, not a range.

            Sequence names have a maximum size of 998 characters.  Each line is also limited to a maximum of 998
            characters, but RFC 822 continuation rules apply; sequences can be continued across  multiple  lines
            by prefixing continuation lines with a whitespace character.

            If  an  implementation  finds  messages in a sequence that do not exist, the sequence file should be
            updated to remove the missing messages from the sequence.  If a sequence contains  no  messages,  it
            should  be  removed  from  the  sequence file.  The exception to this is the <b>cur</b> sequence, which can
            refer to a nonexistent message.

   <b>Locking</b>
       <b>nmh</b> programs read and write the context and sequences files, and lock these files  when  accessing  them.
       There should not be a need to access these files directly; instead, programs such as <b>flist</b>, <b>folder</b>, <b>mark</b>,
       <b>pick</b>,  and  <b>rcvstore</b>  should be used to query and update their contents.  Any program outside of <b>nmh</b> that
       accesses these files must be sure to lock them using the same locking method as <b>nmh</b>.   The  default  data
       locking  method  is  selected  when  <b>nmh</b>  is  configured  and  can  be accessed as a string using <b>mhparam</b>
       <b>datalocking</b>.  By default, fcntl locking is used, but this may be overridden by  the  <b>datalocking</b>  profile
       entry.

       A  second, possibly different, locking method is used by <u><a href="../man1/inc.1.html">inc</a></u>(1) when accessing the user's mail spool file
       or by <b>nmh</b> programs that open any  mbox  file.   This  locking  method  can  be  overridden  when  <b>nmh</b>  is
       configured,  or  in  the  <b>nmh</b>  mts  configuration  file,  and  can  be accessed as a string using <b>mhparam</b>
       <b>spoollocking</b>.  By default, kernel-level locking is used if appropriate for the platform, and  it  is  for
       popular  platforms.  That default should also be the same as used by the <b>mail</b> program, if provided on the
       platform.

   <b>Naming</b>
       <b>nmh</b> folders can be given arbitrary names, with one exception: folders should  not  be  given  all-numeric
       names.   This  limitation results from <b>nmh</b> messages themselves being stored in numerically named files --
       allowing folders to be named similarly would make <b>nmh</b> slower, and introduce usage ambiguities.

</pre><h4><b>FILES</b></h4><pre>
       &lt;mh-dir&gt;/context    The user's context.
       $MHCONTEXT          Overrides the above context.
       &lt;folder&gt;/.mh-sequences
                           Public sequences for &lt;folder&gt;.
</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <u><a href="../man1/flist.1.html">flist</a></u>(1),  <u><a href="../man1/folder.1.html">folder</a></u>(1),   <u><a href="../man1/mail.1.html">mail</a></u>(1),   <u><a href="../man1/mark.1.html">mark</a></u>(1),   <u><a href="../man1/mhparam.1.html">mhparam</a></u>(1),   <u><a href="../man1/mhpath.1.html">mhpath</a></u>(1),   <u><a href="../man5/mh-profile.5.html">mh-profile</a></u>(5),   <u><a href="../man5/mh-sequence.5.html">mh-sequence</a></u>(5),
       <u><a href="../man5/mh-tailor.5.html">mh-tailor</a></u>(5), <u><a href="../man1/pick.1.html">pick</a></u>(1), <u><a href="../man1/rcvstore.1.html">rcvstore</a></u>(1)

nmh-1.8                                            2016-02-25                                    <u><a href="../man5mh/MH-FOLDERS.5mh.html">MH-FOLDERS</a></u>(5mh)
</pre>
 </div>
</div></section>
</div>
</body>
</html>