<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>pkcs15-profile - format of profile for pkcs15-init</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/opensc">opensc_0.26.1-2_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       pkcs15-profile - format of profile for <b>pkcs15-init</b>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The <b>pkcs15-init</b> utility for PKCS #15 smart card personalization is controlled via profiles. When
       starting, it will read two such profiles at the moment, a generic application profile, and a card
       specific profile. The generic profile must be specified on the command line, while the card-specific file
       is selected based on the type of card detected.

       The generic application profile defines general information about the card layout, such as the path of
       the application DF, various PKCS #15 files within that directory, and the access conditions on these
       files. It also defines general information about PIN, key and certificate objects. Currently, there is
       only one such generic profile, pkcs15.profile.

       The card specific profile contains additional information required during card initialization, such as
       location of PIN files, key references etc. Profiles currently reside in /usr/share/opensc

       Basic PKCS#15 terminology:

        1. MF (Master File) is root of the filesystem hierarchy

        2. DF(PKCS#15) is directory containing the PKCS#15 files and directories

        3. EF(ODF) (Object Directory File) is elementary file containing pointers to other elementary files
           (PrKDFs, PuKDFs, SKDFs, CDFs, DODFs, AODFs)

        4. PrKDF (Private Key Directory File) is elementary file containing pointers to the private keys and
           additional information about the private keys

        5. PubKDF (Public Key Directory File) is elementary file containing pointers to the public keys and
           additional information about the public keys

        6. CDF (Certificate Directory File) is elementary file containing pointers to the certificates and
           additional information about the certificates

        7. EF(TokenInfo) is elementary file with generic information about the card

</pre><h4><b>SYNTAX</b> <b>AND</b> <b>SEMANTICS</b></h4><pre>
       The block syntax of profile files is in general similar to the configuration file. The profile file, is
       composed of blocks, which, in general, have the following format:

           <u>key</u> [, <u>name</u>...] {
                <u>block_contents</u>
           }

       <u>block_contents</u> is one or more <u>block_item</u>s where a <u>block_item</u> is one of

       •   # <u>comment</u> <u>string</u>

       •   <u>key</u>[, <u>name</u>...]  = <u>value</u>;

       •   <u>block</u>

       At the root level, the profile contains several configuration blocks. The block keys are as follows:

       •   cardinfo: Configuration for general information about card.

       •   pkcs15: Control for some of the general aspects of the PKCS#15 put onto the card.

       •   option: Profile options to modify the behavior of profile.

       •   PIN: Configuration and limits for particular PIN type.

       •   filesystem: Specification for filesystem that is to be created on the card.

       •   macros

   <b>Profile</b> <b>file</b> <b>configuration</b>
       <b>Configuration</b> <b>of</b> <b>Card</b> <b>Information</b>

           <b>cardinfo</b> <b>{</b> <u>block_contents</u> <b>}</b>
               Configuration for general information about card:

               <b>label</b> <b>=</b> <u>name</u><b>;</b>
                   Card label (Default: OpenSC Card).

               <b>manufacturer</b> <b>=</b> <u>name</u><b>;</b>
                   Card manufacturer (Default: OpenSC Project).

               <b>min-pin-length</b> <b>=</b> <u>int</u><b>;</b>
                   Minimal length of PIN (Default: 4).

               <b>max-pin-length</b> <b>=</b> <u>int</u><b>;</b>
                   Maximal length of PIN, should be overridden in the per-card profile (Default: 8).

               <b>pin-encoding</b> <b>=</b> <u>value</u><b>;</b>
                   Encoding type of PIN. Known parameters:

                   •   BCD: binary-coded decimal

                   •   ascii-numeric: ASCII numerical values

                   •   utf8

                   •   half-nibble-bcd

                   •   iso9564-1

                   (Default: ascii-numeric).

               <b>pin-pad-char</b> <b>=</b> <u>value</u><b>;</b>
                   Character used for padding the PIN when needed (Default: 0x00).

               <b>pin-domains</b> <b>=</b> <u>bool</u><b>;</b>
                   Some cards need to keep all their PINs in separate directories. The particular keys in that
                   domain will be put below the DF of the specified PIN. (Default: no)

       <b>Configuration</b> <b>of</b> <b>PKCS#15</b>

           <b>pkcs15</b> <b>{</b> <u>block_contents</u> <b>}</b>
               Control for some of the general aspects of the PKCS#15 put onto the card. Parameters in this
               block are:

               <b>direct-certificates</b> <b>=</b> <u>bool</u><b>;</b>
                   The PKCS#15 system must contain at least one CDF, it contains the certificates directly or
                   references to certificates. This options defines whether the certificates should be put
                   directly in the CDF itself or not (Default: no).

               <b>encode-df-length</b> <b>=</b> <u>bool</u><b>;</b>
                   Save length of DF into ODF file. Useful if we store certificates directly in the CDF for
                   better better performance and robustness (Default: no).

               <b>do-last-update</b> <b>=</b> <u>value</u><b>;</b>
                   Store information about last update in the EF(TokenInfo) (Default: yes).

               <b>pkcs15-id-style</b> <b>=</b> <u>value</u><b>;</b>
                   Method to calculate ID of the crypto objects. Known parameters:

                   •   native: 'E' + number_of_present_objects_of_the_same_type

                   •   mozilla: <a href="../manmodulus/SHA1.modulus.html">SHA1</a>(modulus) for RSA

                   •   rfc2459 SHA1(SequenceASN1 of public key components as ASN1 integers)
                                                                               (Default: native)
                                                                          .sp

               <b>minidriver-support-style</b> <b>=</b> <u>value</u><b>;</b>
                   Style of pkcs15-init support of minidriver. Known parameters:

                   •   none

                   •   gemalto

                   (Default: none)

       <b>Configuration</b> <b>of</b> <b>Profile</b> <b>Option</b>

           <b>option</b> <u>name</u> <b>{</b> <u>block_contents</u> <b>}</b>  .PP The name specifies profile options to modify the behavior of
           profile, it can be .PP .sp .RS 4 .ie•n

               <b>macros</b> <b>{</b> <b>block_contents</b> <b>}</b>
                   Macros are specified in form of name = value; pairs.

               <b>pkcs15</b> <b>{</b> <b>block_contents</b> <b>}</b>
                   Inner block for configuration of PKCS#15 structure.

       <b>Configuration</b> <b>of</b> <b>PINs</b>

           <b>PIN</b> <u>name</u> <b>{</b> <u>block_contents</u> <b>}</b>  .PP The name specifies PIN type, it can be .PP .sp .RS 4 .ie•n
               Known parameters are:

               <b>attempts</b> <b>=</b> <u>int</u><b>;</b>
                   Defines number of attempts for the given PIN (Default: 3).

               <b>flags</b> <b>=</b> <u>value...</u><b>;</b>
                   Flags define properties of the PIN. Possible flags:

                   •   case-sensitive

                   •   local

                   •   change-disabled

                   •   unblock-disabled

                   •   initialized

                   •   needs-padding

                   •   unblockingPin

                   •   soPin

                   •   disable-allowed

                   •   integrity-protected

                   •   confidentiality-protected

                   •   exchangeRefData

                   (Default: local,initialized,needs-padding).

               <b>auth-id</b> <b>=</b> <u>value</u><b>;</b>
                   Value used for auth ID (Default: 0).

               <b>min-length</b> <b>=</b> <u>int</u><b>;</b>
                   Minimal length of PIN (Default: value min-pin-length set in cardinfo block).

               <b>max-length</b> <b>=</b> <u>int</u><b>;</b>
                   Maximal length of PIN (Default: value max-pin-length set in cardinfo block).

               <b>reference</b> <b>=</b> <u>int</u><b>;</b>
                   Value of reference of the PIN (Default: set in particular card driver).

               <b>file</b> <b>=</b> <u>name</u><b>;</b>
                   File with PIN, obsolete option (Default: None).

               <b>offset</b> <b>=</b> <u>int</u><b>;</b>
                   Offset of PIN in PIN file, obsolete option (Default: 0).

               <b>encoding</b> <b>=</b> <u>value</u><b>;</b>
                   Encoding type of PIN. Possible values:

                   •   BCD

                   •   ascii-numeric

                   •   utf8

                   •   half-nibble-bcd

                   •   iso9564-1

                   (Default: value pin-encoding set in cardinfo block).

               <b>stored-length</b> <b>=</b> <u>int</u><b>;</b>
                   (Default: value max-pin-length set in cardinfo block).

               <b>max-unlocks</b> <b>=</b> <u>int</u><b>;</b>
                   (Default: 0).

           Values in this block can be set by macros. That allows to specify the particular values with the
           usage of option.

       <b>Configuration</b> <b>of</b> <b>Filesystem</b>
           <b>filesystem</b> <b>{</b>                          <u>block_contents</u>                          <b>}</b>
                               .PP This block contains the specification for filesystem that is to be created on
           the card. The filesystem consists of several nested blocks representing DF and EF files. When the DFs
           or EFs are specified in card specific profile, this is added to the file system info specified in the
           main profile.

           <b>EF</b> <u>name</u> <b>{</b> <u>block_contents</u> <b>}</b>  .PP This block defines elementary file in PKCS#15 file hierarchy. The
           name can be one of: .sp .RS 4 .ie•n

               <b>type</b> <b>=</b> <u>EF</u><b>;</b>
                   Type must match type of file.

               <b>acl</b> <b>=</b> <u>value</u><b>;</b>
                   Value of ACL (Access Control List) (Default: NONE)

               <b>file-id</b> <b>=</b> <u>EF</u><b>;</b>
                   File ID, relative path.

               <b>structure</b> <b>=</b> <u>value</u><b>;</b>
                   File structure is one of:

                   •   TRANSPARENT

                   •   LINEAR-FIXED

                   •   LINEAR-FIXED-TLV

                   •   LINEAR-VARIABLE

                   •   LINEAR-VARIABLE-TLV

                   •   CYCLIC

                   •   CYCLIC-TLV

           <b>DF</b> <u>name</u> <b>{</b> <u>block_contents</u> <b>}</b>  .PP This block defines directory file in PKCS#15 file hierarchy. The name
           can be one of: .sp .RS 4 .ie•n

               <b>type</b> <b>=</b> <u>DF</u><b>;</b>
                   Type must match type of file.

               <b>path</b> <b>=</b> <u>value</u><b>;</b>
                   Specification of path of the directory file.

               <b>file-id</b> <b>=</b> <u>value</u><b>;</b>
                   File ID, relative path.

               <b>aid</b> <b>=</b> <u>value</u><b>;</b>
                   Value of AID, in XX:XX:XX:...:XX:XX:XX notation.

               <b>acl</b> <b>=</b> <u>value</u><b>;</b>
                   Type must match type of file.

               <b>size</b> <b>=</b> <u>int</u><b>;</b>
                   Size of the file in bytes.

               <b>EF</b> <u>name</u> <b>{</b> <b>block_contents</b> <b>}</b>
                   Block specifying nested elementary file.

               Typically, the root DF is MF.

               It is mandatory that profile file contains DF entry for MF (Master File). Otherwise the profile
               file is incomplete and cannot be used.

           The DF can contain other DF or MF blocks. For examples how the filesystem structure may look like,
           please refer to pkcs15.profile or any other present profile file.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man1/pkcs15-init.1.html">pkcs15-init</a></b>(1), <b><a href="../man1/pkcs15-crypt.1.html">pkcs15-crypt</a></b>(1)

opensc                                             06/06/2025                                  <u><a href="../man5/PKCS15-PROFILE.5.html">PKCS15-PROFILE</a></u>(5)
</pre>
 </div>
</div></section>
</div>
</body>
</html>