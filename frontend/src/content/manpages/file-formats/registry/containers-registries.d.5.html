<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>containers-registries.d - Directory for various registries configurations</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/golang-github-containers-image">golang-github-containers-image_5.34.2-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       containers-registries.d - Directory for various registries configurations

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The  registries  configuration  directory  contains configuration for various registries (servers storing
       remote container images), and for content stored in them, so that the configuration does not have  to  be
       provided  in  command-line  options  over and over for every command, and so that it can be shared by all
       users of containers/image.

       By default, the registries configuration directory is <b>$HOME/.config/containers/registries.d</b> if it exists,
       otherwise <b>/etc/containers/registries.d</b> (unless overridden at compile-time); applications may allow  using
       a different directory instead.

</pre><h4><b>Directory</b> <b>Structure</b></h4><pre>
       The  directory  may  contain  any  number  of files with the extension <b>.yaml</b>, each using the YAML format.
       Other than the mandatory extension, names of the files don’t matter.

       The contents of these files are merged together; to have a well-defined and easy to understand  behavior,
       there  can  be  only  one  configuration  section  describing  a  single  namespace within a registry (in
       particular there can be at most one one <b>default-docker</b> section across all files, and there can be at most
       one instance of any key under the <b>docker</b> section; these sections are documented later).

       Thus, it is forbidden to have two conflicting configurations for a single registry or scope,  and  it  is
       also forbidden to split a configuration for a single registry or scope across more than one file (even if
       they are not semantically in conflict).

</pre><h4><b>Registries,</b> <b>Scopes</b> <b>and</b> <b>Search</b> <b>Order</b></h4><pre>
       Each YAML file must contain a “YAML mapping” (key-value pairs).  Two top-level keys are defined:

              • <b>default-docker</b>  is  the  <u>configuration</u> <u>section</u> (as documented below) for registries implementing
                "Docker Registry HTTP API V2".

       This key is optional.

              • <b>docker</b> is a mapping, using individual registries implementing "Docker Registry HTTP API V2",  or
                namespaces  and  individual  images  within these registries, as keys; the value assigned to any
                such key is a <u>configuration</u> <u>section</u>.

       This key is optional.

       Scopes matching individual images are named Docker references <u>in</u> <u>the</u> <u>fully</u> <u>expanded</u> <u>form</u>, either
          using a tag or digest. For example, <b>docker.io/library/busybox:latest</b> (<u>not</u> <b>busybox:latest</b>).

       More general scopes are prefixes of individual-image scopes, and specify a repository  (by  omitting  the
       tag or digest),
          a repository namespace, or a registry host (and a port if it differs from the default).

       Note that if a registry is accessed using a hostname+port configuration, the port-less hostname
          is <u>not</u> used as parent scope.

       When searching for a configuration to apply for an individual container image, only the configuration for
       the  most-precisely  matching  scope  is  used;  configuration using more general scopes is ignored.  For
       example, if <u>any</u> configuration exists for <b>docker.io/library/busybox</b>, the configuration  for  <b>docker.io</b>  is
       ignored   (even   if   some   element  of  the  configuration  is  defined  for  <b>docker.io</b>  and  not  for
       <b>docker.io/library/busybox</b>).

   <b>Built-in</b> <b>Defaults</b>
       If no <b>docker</b> section can be found for the container image, and no <b>default-docker</b> section is configured:

              • The      default      directory,      <b>/var/lib/containers/sigstore</b>      for       root       and
                <b>$HOME/.local/share/containers/sigstore</b>  for  unprivileged  user,   will  be used for reading and
                writing signatures.

              • Sigstore attachments will not be read/written.

</pre><h4><b>Individual</b> <b>Configuration</b> <b>Sections</b></h4><pre>
       A single configuration section is selected for a container image using the process described above.   The
       configuration section is a YAML mapping, with the following keys:

              • <b>lookaside-staging</b>  defines  an  URL  of of the signature storage, used for editing it (adding or
                deleting signatures).

       This key is optional; if it is missing, <b>lookaside</b> below is used.

              • <b>lookaside</b> defines an URL of the signature storage.   This  URL  is  used  for  reading  existing
                signatures, and if <b>lookaside-staging</b> does not exist, also for adding or removing them.

       This key is optional; if it is missing, no signature storage is defined (no signatures
          are  download  along  with  images,  adding  new  signatures  is possible only if <b>lookaside-staging</b> is
       defined).

              • <b>use-sigstore-attachments</b> specifies whether sigstore image attachments (signatures,  attestations
                and  the  like)  are going to be read/written along with the image.  If disabled, the images are
                treated as if no attachments exist; attempts to write attachments fail.

</pre><h4><b>Examples</b></h4><pre>
   <b>Using</b> <b>Containers</b> <b>from</b> <b>Various</b> <b>Origins</b>
       The following demonstrates how to to consume and run images from various registries and namespaces:

       docker:
           registry.database-supplier.com:
               lookaside: https://lookaside.database-supplier.com
           distribution.great-middleware.org:
               lookaside: https://security-team.great-middleware.org/lookaside
           docker.io/web-framework:
               lookaside: https://lookaside.web-framework.io:8080

   <b>Developing</b> <b>and</b> <b>Signing</b> <b>Containers,</b> <b>Staging</b> <b>Signatures</b>
       For developers in <b>example.com</b>:

              • Consume most container images using the public servers also used by clients.

              • Use a separate signature storage for an container images in a  namespace  corresponding  to  the
                developers' department, with a staging storage used before publishing signatures.

              • Craft an individual exception for a single branch a specific developer is working on locally.

       docker:
           registry.example.com:
               lookaside: https://registry-lookaside.example.com
           registry.example.com/mydepartment:
               lookaside: https://lookaside.mydepartment.example.com
               lookaside-staging: file:///mnt/mydepartment/lookaside-staging
           registry.example.com/mydepartment/myproject:mybranch:
               lookaside: <a href="http://localhost">http://localhost</a>:4242/lookaside
               lookaside-staging: file:///home/useraccount/webroot/lookaside

   <b>A</b> <b>Global</b> <b>Default</b>
       If a company publishes its products using a different domain, and different registry hostname for each of
       them,  it  is  still  possible  to  use  a  single  signature  storage server without listing each domain
       individually. This is expected to rarely happen, usually only for staging new signatures.

       default-docker:
           lookaside-staging: file:///mnt/company/common-lookaside-staging

</pre><h4><b>AUTHORS</b></h4><pre>
       Miloslav Trmač <a href="mailto:mitr@redhat.com">mitr@redhat.com</a> ⟨<a href="mailto:mitr@redhat.com">mailto:mitr@redhat.com</a>⟩

Man                                               Registries.d                        <u><a href="../man5/containers-registries.d.5.html">containers-registries.d</a></u>(5)
</pre>
 </div>
</div></section>
</div>
</body>
</html>