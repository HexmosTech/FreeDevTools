<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>modprobe.d - Configuration directory for modprobe</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/kmod">kmod_34.2-2ubuntu1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       modprobe.d - Configuration directory for modprobe

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <a href="file:/etc/modprobe.d/">/etc/modprobe.d/</a>*.conf

       /run/modprobe.d/*.conf

       /usr/local/lib/modprobe.d/*.conf

       <a href="file:/usr/lib/modprobe.d/">/usr/lib/modprobe.d/</a>*.conf

       <a href="file:/lib/modprobe.d/">/lib/modprobe.d/</a>*.conf

</pre><h4><b>DESCRIPTION</b></h4><pre>
       Because  the <b>modprobe</b> command can add or remove more than one module, due to modules having dependencies,
       we need a method of specifying what options are to be used with those modules. One can also use  them  to
       create  convenient  aliases:  alternate  names  for  a  module,  or they can override the normal <b>modprobe</b>
       behavior altogether for those with special requirements (such as inserting more than one module).

       Note that module and alias names  (like  other  module  names)  can  have  -  or  _  in  them:  both  are
       interchangeable throughout all the module commands as underscore conversion happens automatically.

</pre><h4><b>CONFIGURATION</b> <b>FORMAT</b></h4><pre>
       The  configuration  files  contain  one  command  per  line, with blank lines and lines starting with '#'
       ignored (useful for adding comments). A '\' at the end of a line causes it to continue on the next  line,
       which makes the files a bit neater.

       See the COMMANDS section below for more.

</pre><h4><b>CONFIGURATION</b> <b>DIRECTORIES</b> <b>AND</b> <b>PRECEDENCE</b></h4><pre>
       Configuration  files  are read from directories in listed in SYNOPSIS in that order of precedence. Once a
       file of a given filename is loaded, any file of the same name in subsequent directories is ignored.

       All configuration files are sorted in lexicographic order, regardless of the directory  they  reside  in.
       Configuration  files  can either be completely replaced (by having a new configuration file with the same
       name in a directory of higher priority) or partially replaced (by having a  configuration  file  that  is
       ordered later).

       NOTE: The configuration directories may be altered via the MODPROBE_OPTIONS environment variable. See the
       ENVIRONMENT section in <b><a href="../man8/modprobe.8.html">modprobe</a></b>(8).

</pre><h4><b>COMMANDS</b></h4><pre>
       alias <u>wildcard</u> <u>modulename</u>
           This   allows   you   to   give   alternate   names   for   a  module.  For  example:  "alias  my-mod
           really_long_modulename"   means   you   can   use   "modprobe   my-mod"    instead    of    "modprobe
           really_long_modulename".    You   can   also   use   shell-style   wildcards,   so   "alias   my-mod*
           really_long_modulename" means that "modprobe my-mod-something" has the same effect.  You  can't  have
           aliases  to  other aliases (that way lies madness), but aliases can have options, which will be added
           to any other options.

           Note that modules can also contain their own aliases, which you can see using <b>modinfo</b>. These  aliases
           are  used  as a last resort (ie. if there is no real module, <b>install</b>, <b>remove</b>, or <b>alias</b> command in the
           configuration).

       blacklist <u>modulename</u>
           Modules can contain their own aliases: usually these are aliases describing the devices they support,
           such as "pci:123...". These "internal" aliases can be overridden  by  normal  "alias"  keywords,  but
           there are cases where two or more modules both support the same devices, or a module invalidly claims
           to  support  a  device  that it does not: the <b>blacklist</b> keyword indicates that all of that particular
           module's internal aliases are to be ignored.

       install <u>modulename</u> <u>command...</u>
           This command instructs <b>modprobe</b> to run your command instead of inserting the module in the kernel  as
           normal.  The  command  can be any shell command: this allows you to do any kind of complex processing
           you might wish. For example, if the module "fred" works  better  with  the  module  "barney"  already
           installed  (but  it  doesn't  depend  on  it, so <b>modprobe</b> won't automatically load it), you could say
           "install fred <a href="file:/sbin/modprobe">/sbin/modprobe</a> barney; <a href="file:/sbin/modprobe">/sbin/modprobe</a> --ignore-install fred", which would do  what  you
           wanted.  Note  the  <b>--ignore-install</b>,  which  stops the second <b>modprobe</b> from running the same <b>install</b>
           command again. See also <b>remove</b> below.

           The long term future of this command as a solution to the  problem  of  providing  additional  module
           dependencies  is  not  assured  and  it  is intended to replace this command with a warning about its
           eventual removal or deprecation at some point in a future release. Its use complicates the  automated
           determination  of  module dependencies by distribution utilities, such as mkinitrd (because these now
           need to somehow interpret what the <b>install</b> commands might be doing. In a perfect world, modules would
           provide all dependency information without the use of this command and work is underway to  implement
           soft dependency support within the Linux kernel.

           If you use the string "$CMDLINE_OPTS" in the command, it will be replaced by any options specified on
           the  modprobe command line. This can be useful because users expect "modprobe fred opt=1" to pass the
           "opt=1" arg to the module, even if there's an install command in the configuration file. So our above
           example  becomes  "install  fred  <a href="file:/sbin/modprobe">/sbin/modprobe</a>   barney;   <a href="file:/sbin/modprobe">/sbin/modprobe</a>   --ignore-install   fred
           $CMDLINE_OPTS"

       options <u>modulename</u> <u>option...</u>
           This  command allows you to add options to the module <u>modulename</u> (which might be an alias) every time
           it is inserted into the kernel: whether directly (using <b>modprobe</b> <u>modulename</u>) or  because  the  module
           being inserted depends on this module.

           All options are added together: they can come from an <b>option</b> for the module itself, for an alias, and
           on the command line.

       remove <u>modulename</u> <u>command...</u>
           This is similar to the <b>install</b> command above, except it is invoked when "modprobe -r" is run.

       softdep <u>modulename</u> pre: <u>modules...</u> post: <u>modules...</u>
           The  <b>softdep</b>  command allows you to specify soft, or optional, module dependencies. <u>modulename</u> can be
           used without these optional modules installed, but usually with some features missing. For example, a
           driver for a storage HBA might require another module be loaded in order to use management features.

           pre-deps and post-deps modules are lists of names and/or aliases of other modules that modprobe  will
           attempt  to  install  (or  remove)  in order before and after the main module given in the <u>modulename</u>
           argument.

           Example: Assume "softdep c pre: a b post: d e" is provided in the configuration. Running "modprobe c"
           is now equivalent to "modprobe a b c d e" without the softdep.  Flags  such  as  --use-blacklist  are
           applied to all the specified modules, while module parameters only apply to module c.

           Note:  if  there  are  <b>install</b>  or  <b>remove</b>  commands with the same <u>modulename</u> argument, <b>softdep</b> takes
           precedence.

       weakdep <u>modulename</u> <u>modules...</u>
           The <b>weakdep</b> command allows you to specify weak module dependencies. Those are similar to pre softdep,
           with the difference that userspace doesn't attempt to  load  that  dependency  before  the  specified
           module.  Instead the kernel may request one or multiple of them during module probe, depending on the
           hardware it's binding to. The purpose of weak module is to allow a driver to specify that  a  certain
           dependency  may  be  needed,  so it should be present in the filesystem (e.g. in initramfs) when that
           module is probed.

           Example: Assume "weakdep c a b". A program creating an initramfs knows it should add a, b, and  c  to
           the  filesystem  since  a  and  b  may  be required/desired at runtime. When c is loaded and is being
           probed, it may issue calls to request_module() causing a or b to also be loaded.

</pre><h4><b>COMPATIBILITY</b></h4><pre>
       A future version of kmod will come with a strong warning to avoid use of the <b>install</b> as explained  above.
       This  will  happen  once  support  for  soft  dependencies  in  the kernel is complete. That support will
       complement the existing softdep support within this  utility  by  providing  such  dependencies  directly
       within the modules.

</pre><h4><b>COPYRIGHT</b></h4><pre>
       This manual page originally Copyright 2004, Rusty Russell, IBM Corporation.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man8/modprobe.8.html">modprobe</a></b>(8), <b><a href="../man5/modules.dep.5.html">modules.dep</a></b>(5)

</pre><h4><b>BUGS</b></h4><pre>
       Please  direct  any  bug  reports to kmod's issue tracker at https://github.com/kmod-project/kmod/issues/
       alongside with version used, steps to reproduce the problem and the expected outcome.

</pre><h4><b>AUTHORS</b></h4><pre>
       Numerous contributions have come from the linux-modules mailing list &lt;<a href="mailto:linux-modules@vger.kernel.org">linux-modules@vger.kernel.org</a>&gt;  and
       Github.  If  you have a clone of kmod.git itself, the output of <b><a href="../man1/git-shortlog.1.html">git-shortlog</a></b>(1) and <b><a href="../man1/git-blame.1.html">git-blame</a></b>(1) can show
       you the authors for specific parts of the project.

       <b>Lucas</b> <b>De</b> <b>Marchi</b> &lt;<a href="mailto:lucas.de.marchi@gmail.com">lucas.de.marchi@gmail.com</a>&gt; is the current maintainer of the project.

kmod                                               2025-06-11                                      <u><a href="../man5/MODPROBE.D.5.html">MODPROBE.D</a></u>(5)
</pre>
 </div>
</div></section>
</div>
</body>
</html>