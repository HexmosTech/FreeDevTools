<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>cyrus.conf - Cyrus IMAP documentation</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/cyrus-common">cyrus-common_3.10.2-1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       cyrus.conf - Cyrus IMAP documentation

       Cyrus configuration file

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>cyrus.conf</b> is the configuration file for the Cyrus <u><a href="../man8/master.8.html">master</a>(8)</u> process.  It defines the startup procedures,
       services, events and daemons to be spawned, managed and tended to by <b>master</b>.

       The <b>/etc/cyrus.conf</b> file consists of a series of entries divided into sections of the form

              <u>section</u> {
                  <u>name</u> <u>arguments</u>
                      <u>...</u>
                      <u>...</u>
                      <u>...</u>
              }

       <u>where</u>  <u>section</u>  <u>is</u>  <u>the</u>  <u>name</u>  <u>of</u>  <u>the</u>  <u>section,</u>  <u>name</u>  <u>is</u>  <u>the</u>  <u>name</u>  <u>of</u>  <u>the</u> <u>entry</u> <u>and</u> <u>arguments</u> <u>is</u> <u>the</u>
       <u>whitespace-separated</u> <u>list</u> <u>of</u> <u>arguments</u> <u>for</u> <u>the</u> <u>entry.</u>  <u>The</u> <u>name</u> <u>may</u> <u>be</u> <u>any</u>  <u>sequence</u>  <u>of</u>  <u>alphabetic</u>  <u>and</u>
       <u>numeric</u>  <u>characters,</u>  <u>but</u> <u>may</u> <u>not</u> <u>contain</u> <u>punctuation</u> <u>such</u> <u>as</u> <u>'-'</u> <u>or</u> <u>'_'.</u>  <u>In</u> <u>the</u> <b>SERVICES</b> <u>section,</u> <u>names</u>
       <u>must</u> <u>be</u> <u>unique.</u>

       <u>Blank</u> <u>lines</u> <u>and</u> <u>lines</u> <u>beginning</u> <u>with</u> <u>``#''</u> <u>are</u> <u>ignored.</u>

</pre><h4><b>SECTION</b> <b>DESCRIPTIONS</b></h4><pre>
       The paragraphs below detail the four sections (<b>START</b>, <b>SERVICES</b>, <b>EVENTS</b>, <b>DAEMON</b>) that can be placed in the
       <b>/etc/cyrus.conf</b> file.  The arguments that are available for each entry within the section are  described,
       and each argument's default value is shown.

       An  important  distinction  exists  between <b>SERVICES</b> and <b>DAEMON</b> ; the former have sockets which <u><a href="../man8/master.8.html">master</a>(8)</u>
       will listen on (either IP or Unix domain) while the latter do not.  Similarly, processes listed in  <b>START</b>
       will  be  run  to  completion  before  any <b>SERVICES</b> are started, while those in <b>DAEMON</b> will be managed by
       <u><a href="../man8/master.8.html">master</a>(8)</u>.

       <b>NOTE:</b>
          If <u><a href="../man8/master.8.html">master</a>(8)</u> is started in debugging mode (<b>-D</b>) the behavior of <b>DAEMON</b> will be  altered,  as  <u><a href="../man8/master.8.html">master</a>(8)</u>
          will  no  longer  be  backgrounded.   Thus,  processes  started  under DAEMON may not be terminated by
          <u><a href="../man8/master.8.html">master</a>(8)</u>.

       Arguments can appear in any order. Some arguments have no default value,  these  are  listed  with  ``&lt;no
       default&gt;''.  For string arguments, the value MUST be enclosed in double quotes.

   <b>START</b>
       This  section lists the processes to run before any <b>SERVICES</b> are spawned.  This section is typically used
       to initialize databases.  Master itself will not startup until all tasks in <b>START</b> have completed, so  put
       no blocking commands here.

          <b>cmd=</b>&lt;no default&gt;
          <b>The</b> <b>command</b> <b>(with</b> <b>options)</b> <b>to</b> <b>spawn</b> <b>as</b> <b>a</b> <b>child</b> <b>process.</b>  <b>This</b> <b>string</b> <b>argument</b> <b>is</b> <b>required.</b>

       <b>NOTE:</b>
          <b>Prior</b>  <b>to</b>  <b>v3,</b> <b>non-service</b> <b>daemons</b> <b>like</b> <b>idled</b> <b>were</b> <b>started</b> <b>from</b> <b>START</b> <b>but</b> <b>would</b> <b>background</b> <b>themselves,</b>
          <b>thus</b> <b>not</b> <b>blocking.</b>  <b>Post</b> <b>v3</b> <b>these</b> <b>are</b> <b>better</b> <b>managed</b> <b>through</b> <b>the</b> <b>DAEMON</b> <b>section,</b>  <b>under</b>  <b>which</b>  <b>master</b>
          <b>will</b> <b>provide</b> <b>life-cycle</b> <b>management</b> <b>(i.e.</b> <b>restarting</b> <b>dead</b> <b>processes).</b>

   <b>SERVICES</b>
       This  section is the heart of the <b>/etc/cyrus.conf</b> file.  It lists the processes that should be spawned to
       handle client connections made on certain Internet/UNIX sockets.

          <b>babysit=</b>0
          <b>Integer</b> <b>value</b> <b>-</b> <b>if</b> <b>non-zero,</b> <b>will</b> <b>make</b> <b>sure</b> <b>at</b> <b>least</b> <b>one</b> <b>process</b>  <b>is</b>  <b>pre-forked,</b>  <b>and</b>  <b>will</b>  <b>set</b>  <b>the</b>
          <b>maxforkrate</b> <b>to</b> <b>10</b> <b>if</b> <b>it's</b> <b>zero.</b>

          <b>cmd=&lt;no</b> <b>default&gt;</b>
          <b>The</b> <b>command</b> <b>(with</b> <b>options)</b> <b>to</b> <b>spawn</b> <b>as</b> <b>a</b> <b>child</b> <b>process.</b>  <b>This</b> <b>string</b> <b>argument</b> <b>is</b> <b>required.</b>

          <b>listen=&lt;no</b> <b>default&gt;</b>
          <b>The</b>  <b>UNIX</b>  <b>or</b>  <b>internet</b>  <b>socket</b>  <b>to</b>  <b>listen</b>  <b>on.</b>   <b>This</b>  <b>string</b> <b>field</b> <b>is</b> <b>required</b> <b>and</b> <b>takes</b> <b>one</b> <b>of</b> <b>the</b>
          <b>following</b> <b>forms:</b>

              <u>path</u>
              <b>[</b> <u>host</u> <b>:</b> <b>]</b> <u>port</u>

          <u>where</u> <u>path</u> <u>is</u> <u>the</u> <u>explicit</u> <u>path</u> <u>to</u> <u>a</u> <u>UNIX</u> <u>socket,</u> <u>host</u> <u>is</u> <u>either</u> <u>the</u> <u>hostname</u> <u>or</u>  <u>bracket-enclosed</u>  <u>IP</u>
          <u>address</u>  <u>of</u>  <u>a</u>  <u>network</u>  <u>interface,</u>  <u>and</u>  <u>port</u>  <u>is</u>  <u>either</u> <u>a</u> <u>port</u> <u>number</u> <u>or</u> <u>service</u> <u>name</u> <u>(as</u> <u>listed</u> <u>in</u>
          <b><a href="file:/etc/services">/etc/services</a></b><u>).</u>

          <u>If</u> <u>host</u> <u>is</u> <u>missing,</u> <u>0.0.0.0</u> <u>(all</u> <u>interfaces)</u> <u>is</u> <u>assumed.</u>   <u>Use</u>  <u>localhost</u>  <u>or</u>  <u>127.0.0.1</u>  <u>to</u>  <u>restrict</u>
          <u>access,</u> <u>i.e.</u> <u>when</u> <u>a</u> <u>proxy</u> <u>on</u> <u>the</u> <u>same</u> <u>host</u> <u>is</u> <u>front-ending</u> <u>Cyrus.</u>

          <u>Note</u>  <u>that</u>  <u>on</u>  <u>most</u>  <u>systems</u> <u>UNIX</u> <u>socket</u> <u>paths</u> <u>are</u> <u>limited</u> <u>to</u> <u>around</u> <u>100</u> <u>characters.</u>  <u>See</u> <u>your</u> <u>system</u>
          <u>documentation</u> <u>for</u> <u>specifics.</u>

          <b>proto=</b><u>tcp</u>
          <b>The</b> <b>protocol</b> <b>used</b> <b>for</b> <b>this</b> <b>service</b> <b>(</b><u>tcp</u><b>,</b> <u>tcp4</u><b>,</b> <u>tcp6</u><b>,</b>  <u>udp</u><b>,</b>  <u>udp4</u><b>,</b>  <u>udp6</u><b>).</b>   <b>This</b>  <b>string</b>  <b>argument</b>  <b>is</b>
          <b>optional.</b>

          <b>tcp4,</b> <b>udp4:</b> <b>These</b> <b>arguments</b> <b>are</b> <b>used</b> <b>to</b> <b>bind</b> <b>the</b> <b>service</b> <b>to</b> <b>IPv4</b> <b>only.</b>

          <b>tcp6,</b>  <b>udp6:</b>  <b>These</b>  <b>arguments</b>  <b>are</b>  <b>used</b>  <b>to</b>  <b>bind</b>  <b>the</b> <b>service</b> <b>to</b> <b>IPv6</b> <b>only,</b> <b>if</b> <b>the</b> <b>operating</b> <b>system</b>
          <b>supports</b> <b>this.</b>

          <b>tcp,</b> <b>udp:</b> <b>These</b> <b>arguments</b> <b>are</b> <b>used</b> <b>to</b> <b>bind</b> <b>to</b> <b>both</b> <b>IPv4</b> <b>and</b> <b>IPv6</b> <b>if</b> <b>possible.</b>

          <b>prefork=0</b>
          <b>The</b> <b>number</b> <b>of</b> <b>instances</b> <b>of</b> <b>this</b> <b>service</b> <b>to</b> <b>always</b> <b>have</b> <b>running</b>  <b>and</b>  <b>waiting</b>  <b>for</b>  <b>a</b>  <b>connection</b>  <b>(for</b>
          <b>faster</b>  <b>initial</b>  <b>response</b>  <b>time).</b>   <b>This</b> <b>integer</b> <b>value</b> <b>is</b> <b>optional.</b>  <b>Note</b> <b>that</b> <b>if</b> <b>you</b> <b>are</b> <b>listening</b> <b>on</b>
          <b>multiple</b> <b>network</b> <b>types</b> <b>(i.e.</b> <b>ipv4</b> <b>and</b> <b>ipv6)</b> <b>then</b> <b>one</b> <b>process</b> <b>will</b> <b>be</b> <b>forked</b> <b>for</b> <b>each</b> <b>address,</b>  <b>causing</b>
          <b>twice</b> <b>as</b> <b>many</b> <b>processes</b> <b>as</b> <b>you</b> <b>might</b> <b>expect.</b>

          <b>maxchild=-1</b>
          <b>The</b>  <b>maximum</b>  <b>number</b>  <b>of</b>  <b>instances</b>  <b>of</b>  <b>this</b>  <b>service</b> <b>to</b> <b>spawn.</b>  <b>A</b> <b>value</b> <b>of</b> <b>-1</b> <b>means</b> <b>unlimited.</b>  <b>This</b>
          <b>integer</b> <b>value</b> <b>is</b> <b>optional.</b>

          <b>maxfds=256</b>
          <b>The</b> <b>maximum</b> <b>number</b> <b>of</b> <b>file</b> <b>descriptors</b> <b>to</b> <b>which</b> <b>to</b> <b>limit</b> <b>this</b> <b>process.</b> <b>This</b> <b>integer</b> <b>value</b> <b>is</b> <b>optional.</b>

          <b>maxforkrate=0</b>
          <b>Maximum</b> <b>number</b> <b>of</b> <b>processes</b> <b>to</b> <b>fork</b> <b>per</b> <b>second</b> <b>-</b> <b>the</b> <b>master</b> <b>will</b> <b>insert</b> <b>sleeps</b> <b>to</b>  <b>ensure</b>  <b>it</b>  <b>doesn't</b>
          <b>fork</b> <b>faster</b> <b>than</b> <b>this</b> <b>on</b> <b>average.</b>

   <b>EVENTS</b>
       This  section  lists  processes  that  should  be  run at specific intervals, similar to cron jobs.  This
       section is typically used to perform scheduled cleanup/maintenance.

          <b>cmd=</b>&lt;no default&gt;
          <b>The</b> <b>command</b> <b>(with</b> <b>options)</b> <b>to</b> <b>spawn</b> <b>as</b> <b>a</b> <b>child</b> <b>process.</b>  <b>This</b> <b>string</b> <b>argument</b> <b>is</b> <b>required.</b>

          <b>period=0</b>
          <b>The</b> <b>interval</b> <b>(in</b> <b>minutes)</b> <b>at</b> <b>which</b> <b>to</b> <b>run</b> <b>the</b> <b>command.</b>  <b>This</b> <b>integer</b> <b>value</b> <b>is</b> <b>optional,</b> <b>but</b> <b>SHOULD</b>  <b>be</b>
          <b>a</b> <b>positive</b> <b>integer</b> <b>&gt;</b> <b>10.</b>

          <b>at=&lt;hhmm&gt;</b>
          <b>The</b>  <b>time</b>  <b>(24-hour</b> <b>format)</b> <b>at</b> <b>which</b> <b>to</b> <b>run</b> <b>the</b> <b>command</b> <b>each</b> <b>day.</b>  <b>If</b> <b>set</b> <b>to</b> <b>a</b> <b>valid</b> <b>time</b> <b>(0000-2359),</b>
          <b>period</b> <b>is</b> <b>automatically</b> <b>set</b> <b>to</b> <b>1440.</b> <b>This</b> <b>string</b> <b>argument</b> <b>is</b> <b>optional.</b>

   <b>DAEMON</b>
       This section lists long running daemons to start before any <b>SERVICES</b> are spawned.  <u><a href="../man8/master.8.html">master</a>(8)</u>  will ensure
       that these processes are running, restarting any process which dies or forks. All listed  processes  will
       be shutdown when <u><a href="../man8/master.8.html">master</a>(8)</u> is exiting.

          <b>cmd=</b>&lt;no default&gt;
          <b>The</b> <b>command</b> <b>(with</b> <b>options)</b> <b>to</b> <b>spawn</b> <b>as</b> <b>a</b> <b>child</b> <b>process.</b>  <b>This</b> <b>string</b> <b>argument</b> <b>is</b> <b>required.</b>

          <b>wait=0</b>
          <b>Switch:</b>  <b>whether</b>  <b>or</b> <b>not</b> <u><a href="../man8/master.8.html">master</a>(8)</u> <b>should</b> <b>wait</b> <b>for</b> <b>this</b> <b>daemon</b> <b>to</b> <b>successfully</b> <b>start</b> <b>before</b> <b>continuing</b>
          <b>to</b> <b>load.</b>

          <b>If</b> <u>wait=n</u> <b>(the</b> <b>default),</b> <b>the</b> <b>daemon</b> <b>will</b> <b>be</b> <b>started</b> <b>asynchronously</b> <b>along</b> <b>with</b> <b>the</b>  <b>service</b>  <b>processes.</b>
          <b>The</b> <b>daemon</b> <b>process</b> <b>will</b> <b>not</b> <b>have</b> <b>file</b> <b>descriptor</b> <b>3</b> <b>open,</b> <b>and</b> <b>does</b> <b>not</b> <b>need</b> <b>to</b> <b>indicate</b> <b>its</b> <b>readiness.</b>

          <b>If</b>  <u>wait=y</u><b>,</b>  <b>the</b> <b>daemon</b> <b>MUST</b> <b>write</b> <b>"ok\r\n"</b> <b>to</b> <b>file</b> <b>descriptor</b> <b>3</b> <b>to</b> <b>indicate</b> <b>its</b> <b>readiness;</b> <b>if</b> <b>it</b> <b>does</b>
          <b>not</b> <b>do</b> <b>this,</b> <b>and</b> <b>master</b> <b>has</b> <b>been</b> <b>told</b> <b>to</b> <b>wait,</b> <b>master</b> <b>will</b> <b>continue</b> <b>to</b> <b>wait....</b> <b>If</b> <b>it</b> <b>writes</b>  <b>anything</b>
          <b>else</b> <b>to</b> <b>this</b> <b>descriptor,</b> <b>or</b> <b>closes</b> <b>it</b> <b>before</b> <b>writing</b> <b>"ok\r\n",</b> <b>master</b> <b>will</b> <b>exit</b> <b>with</b> <b>an</b> <b>error.</b>

          <b>Daemons</b>  <b>with</b>  <u>wait=y</u> <b>will</b> <b>be</b> <b>started</b> <b>sequentially</b> <b>in</b> <b>the</b> <b>order</b> <b>they</b> <b>are</b> <b>listed</b> <b>in</b> <b>cyrus.conf,</b> <b>waiting</b>
          <b>for</b> <b>each</b> <b>to</b> <b>report</b> <b>readiness</b> <b>before</b> <b>the</b> <b>next</b> <b>is</b> <b>started.</b>

          <b>Service</b> <b>processes,</b> <b>and</b> <u>wait=n</u> <b>daemons,</b> <b>are</b> <b>not</b> <b>started</b> <b>until</b> <b>after</b> <b>the</b> <u>wait=y</u> <b>daemons</b> <b>are</b> <b>all</b>  <b>started</b>
          <b>and</b> <b>ready.</b>

          <b>At</b>  <b>shutdown,</b>  <u>wait=y</u>  <b>daemons</b> <b>will</b> <b>be</b> <b>terminated</b> <b>sequentially</b> <b>in</b> <b>the</b> <b>reverse</b> <b>order</b> <b>they</b> <b>were</b> <b>started,</b>
          <b>commencing</b> <b>after</b> <b>all</b> <b>other</b> <b>services</b> <b>and</b> <u>wait=n</u> <b>daemons</b> <b>have</b> <b>finished.</b>

          <b>If</b> <b>a</b> <b>daemon</b> <b>that</b> <b>was</b> <b>started</b> <b>with</b> <u>wait=y</u> <b>exits</b> <b>unexpectedly,</b> <b>such</b> <b>that</b> <b>master</b> <b>restarts</b> <b>it,</b> <b>master</b> <b>will</b>
          <b>restart</b> <b>it</b> <b>asynchronously,</b> <b>without</b> <b>waiting</b> <b>for</b> <b>it</b>  <b>to</b>  <b>report</b>  <b>its</b>  <b>readiness.</b>   <b>In</b>  <b>this</b>  <b>case,</b>  <b>file</b>
          <b>descriptor</b> <b>3</b> <b>will</b> <b>not</b> <b>be</b> <b>open</b> <b>and</b> <b>the</b> <b>daemon</b> <b>should</b> <b>not</b> <b>try</b> <b>to</b> <b>write</b> <b>to</b> <b>it.</b>

          <b>If</b>  <b>master</b> <b>is</b> <b>told</b> <b>to</b> <b>reread</b> <b>its</b> <b>config</b> <b>with</b> <b>a</b> <b>SIGHUP,</b> <b>this</b> <b>signal</b> <b>will</b> <b>be</b> <b>passed</b> <b>on</b> <b>to</b> <u>wait=y</u> <b>daemons</b>
          <b>like</b> <b>any</b> <b>other</b> <b>service.</b>  <b>If</b> <b>the</b> <b>daemon</b> <b>exits</b> <b>in</b>  <b>response</b>  <b>to</b>  <b>the</b>  <b>signal,</b>  <b>master</b>  <b>will</b>  <b>restart</b>  <b>it</b>
          <b>asynchronously,</b>  <b>without</b>  <b>waiting</b>  <b>for</b> <b>it</b> <b>to</b> <b>report</b> <b>its</b> <b>readiness.</b> <b>In</b> <b>this</b> <b>case</b> <b>too,</b> <b>file</b> <b>descriptor</b> <b>3</b>
          <b>will</b> <b>not</b> <b>be</b> <b>open</b> <b>and</b> <b>the</b> <b>daemon</b> <b>should</b> <b>not</b> <b>try</b> <b>to</b> <b>write</b> <b>to</b> <b>it.</b>

</pre><h4><b>EXAMPLES</b></h4><pre>
          # example cyrus.conf

          START {
              recover       cmd="ctl_cyrusdb -r"
          }

          SERVICES {
              imap          cmd="imapd" listen="imap" prefork=1
              imaps         cmd="imapd -s" listen="imaps" prefork=0
              lmtpunix      cmd="lmtpd" listen="/var/imap/socket/lmtp"
              lmtp          cmd="lmtpd" listen="localhost:lmtp"
          }

          EVENTS {
              checkpoint    cmd="ctl_cyrusdb -c" period=30
              delprune      cmd="cyr_expire -E 3" at=0400
              tlsprune      cmd="tls_prune" at=0400
          }

          DAEMON {
              idled         cmd="idled"
          }

</pre><h4><b>ACCESS</b> <b>CONTROL</b></h4><pre>
       When TCP Wrappers is used to control access to Cyrus services, the <u>name</u> of the service  entry  should  be
       used  as  the  process  name  in  the <b><a href="../man5/hosts_access.5.html">hosts_access</a>(5)</b> table.  For instance, in the example above, "imap",
       "imaps", "lmtpunix" and "lmtp" would be used as the process names.  This allows a single daemon  such  as
       imapd  to  be  run  in  different  modes or configurations (i.e., SSL and non-SSL enabled) yet still have
       separate access control rules.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <u><a href="../man8/master.8.html">master</a>(8)</u>, <u><a href="../man8/imapd.8.html">imapd</a>(8)</u>, <u><a href="../man8/pop3d.8.html">pop3d</a>(8)</u>, <u><a href="../man8/lmtpd.8.html">lmtpd</a>(8)</u>, <u><a href="../man8/smmapd.8.html">smmapd</a>(8)</u>, <u><a href="../man8/timsieved.8.html">timsieved</a>(8)</u>, <u><a href="../man8/idled.8.html">idled</a>(8)</u>,  <u><a href="../man8/notifyd.8.html">notifyd</a>(8)</u>,  <u><a href="../man8/ctl_cyrusdb.8.html">ctl_cyrusdb</a>(8)</u>,
       <u><a href="../man8/ctl_deliver.8.html">ctl_deliver</a>(8)</u>, <u><a href="../man8/tls_prune.8.html">tls_prune</a>(8)</u>, <b><a href="../man5/hosts_access.5.html">hosts_access</a>(5)</b>

</pre><h4><b>AUTHOR</b></h4><pre>
       The Cyrus Team, Nic Bernstein (Onlight)

</pre><h4><b>COPYRIGHT</b></h4><pre>
       1993â€“2025, The Cyrus Team

3.10.2                                            Jun 27, 2025                                     <u><a href="../man5/CYRUS.CONF.5.html">CYRUS.CONF</a></u>(5)
</pre>
 </div>
</div></section>
</div>
</body>
</html>