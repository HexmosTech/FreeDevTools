<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>transport - Postfix transport table format</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/postfix">postfix_3.10.2-1ubuntu1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       transport - Postfix transport table format

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>postmap</b> <b>/etc/postfix/transport</b>

       <b>postmap</b> <b>-q</b> <b>"</b><u>string</u><b>"</b> <b>/etc/postfix/transport</b>

       <b>postmap</b> <b>-q</b> <b>-</b> <b>/etc/postfix/transport</b> <b>&lt;</b><u>inputfile</u>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The  optional  <b><a href="../man5/transport.5.html">transport</a></b>(5) table specifies a mapping from email addresses to message delivery transports
       and next-hop destinations.  Message delivery transports  such  as  <b>local</b>  or  <b>smtp</b>  are  defined  in  the
       <b>master.cf</b>  file,  and next-hop destinations are typically hosts or domain names. The table is searched by
       the <b><a href="../man8/trivial-rewrite.8.html">trivial-rewrite</a></b>(8) daemon.

       This mapping overrides the default <u>transport</u>:<u>nexthop</u> selection that is built into Postfix:

       <b>local_transport</b> <b>(default:</b> <b>local:$myhostname)</b>
              This is the default for final delivery to domains listed with <b>mydestination</b>, and  for  [<u>ipaddress</u>]
              destinations  that match <b>$inet_interfaces</b> or <b>$proxy_interfaces</b>. The default <u>nexthop</u> destination is
              the MTA hostname.

       <b>virtual_transport</b> <b>(default:</b> <b>virtual:)</b>
              This is the default for final delivery to domains listed with <b>virtual_mailbox_domains</b>. The default
              <u>nexthop</u> destination is the recipient domain.

       <b>relay_transport</b> <b>(default:</b> <b>relay:)</b>
              This is the default for remote  delivery  to  domains  listed  with  <b>relay_domains</b>.  In  order  of
              decreasing    precedence,    the    <u>nexthop</u>    destination    is   taken   from   <b>relay_transport</b>,
              <b>sender_dependent_relayhost_maps</b>, <b>relayhost</b>, or from the recipient domain.

       <b>default_transport</b> <b>(default:</b> <b>smtp:)</b>
              This is the default for remote delivery to other destinations.  In order of decreasing precedence,
              the <u>nexthop</u> destination is taken from <b>sender_dependent_default_transport_maps,</b>  <b>default_transport</b>,
              <b>sender_dependent_relayhost_maps</b>, <b>relayhost</b>, or from the recipient domain.

       Normally,  the  <b><a href="../man5/transport.5.html">transport</a></b>(5)  table  is  specified  as a text file that serves as input to the <b><a href="../man1/postmap.1.html">postmap</a></b>(1)
       command.  The result, an indexed file in <b>dbm</b> or <b>db</b> format, is used for fast searching by the mail system.
       Execute the command "<b>postmap</b> <b>/etc/postfix/transport</b>" to  rebuild  an  indexed  file  after  changing  the
       corresponding transport table.

       When  the  table  is  provided via other means such as NIS, LDAP or SQL, the same lookups are done as for
       ordinary indexed files.

       Alternatively, the table can be provided as a regular-expression map where patterns are given as  regular
       expressions,  or  lookups can be directed to a TCP-based server. In those case, the lookups are done in a
       slightly different way as described below under "REGULAR EXPRESSION TABLES" or "TCP-BASED TABLES".

</pre><h4><b>CASE</b> <b>FOLDING</b></h4><pre>
       The search string is folded to lowercase before database lookup. As of Postfix 2.3, the search string  is
       not case folded with database types such as regexp: or pcre: whose lookup fields can match both upper and
       lower case.

</pre><h4><b>TABLE</b> <b>FORMAT</b></h4><pre>
       The input format for the <b><a href="../man1/postmap.1.html">postmap</a></b>(1) command is as follows:

       <u>pattern</u> <u>result</u>
              When <u>pattern</u> matches the recipient address or domain, use the corresponding <u>result</u>.

       blank lines and comments
              Empty  lines  and  whitespace-only  lines  are  ignored,  as  are lines whose first non-whitespace
              character is a `#'.

       multi-line text
              A logical line starts with non-whitespace text. A line that starts  with  whitespace  continues  a
              logical line.

       The  <u>pattern</u>  specifies  an  email  address,  a  domain name, or a domain name hierarchy, as described in
       section "TABLE SEARCH ORDER".

       The <u>result</u> is of the form <u>transport:nexthop</u> and specifies how or where to deliver mail. This is described
       in section "RESULT FORMAT".

</pre><h4><b>TABLE</b> <b>SEARCH</b> <b>ORDER</b></h4><pre>
       With lookups from indexed files such as DB or DBM, or from networked tables such as  NIS,  LDAP  or  SQL,
       patterns are tried in the order as listed below:

       <u>user+extension@domain</u> <u>transport</u>:<u>nexthop</u>
              Deliver mail for <u>user+extension@domain</u> through <u>transport</u> to <u>nexthop</u>.

       <u>user@domain</u> <u>transport</u>:<u>nexthop</u>
              Deliver mail for <u>user@domain</u> through <u>transport</u> to <u>nexthop</u>.

       <u>domain</u> <u>transport</u>:<u>nexthop</u>
              Deliver mail for <u>domain</u> through <u>transport</u> to <u>nexthop</u>.

       <u>.domain</u> <u>transport</u>:<u>nexthop</u>
              Deliver  mail for any subdomain of <u>domain</u> through <u>transport</u> to <u>nexthop</u>. This applies only when the
              string <b>transport_maps</b> is not listed in the <b>parent_domain_matches_subdomains</b> configuration setting.
              Otherwise, a domain name matches itself and its subdomains.

       <b>*</b> <u>transport</u>:<u>nexthop</u>
              The special pattern <b>*</b> represents any address (i.e. it functions as the wild-card pattern,  and  is
              unique to Postfix transport tables).

       Note  1:  the  null  recipient  address  is  looked  up as <b>$empty_address_recipient</b>@<b>$myhostname</b> (default:
       mailer-daemon@hostname).

       Note 2: <u>user@domain</u> or <u>user+extension@domain</u> lookup is available in Postfix 2.0 and later.

</pre><h4><b>RESULT</b> <b>FORMAT</b></h4><pre>
       The lookup result is of the form <u>transport</u><b>:</b><u>nexthop</u>.   The  <u>transport</u>  field  specifies  a  mail  delivery
       transport such as <b>smtp</b> or <b>local</b>. The <u>nexthop</u> field specifies where and how to deliver mail.

       The  transport  field  specifies the name of a mail delivery transport (the first name of a mail delivery
       service entry in the Postfix <b>master.cf</b> file).

       The nexthop field usually specifies one recipient  domain  or  hostname.  In  the  case  of  the  Postfix
       SMTP/LMTP  client,  the  nexthop  field  may contain a list of nexthop destinations separated by comma or
       whitespace (Postfix 3.5 and later).

       The syntax of a nexthop  destination  is  transport  dependent.   With  SMTP,  specify  a  service  on  a
       non-default port as <u>host</u>:<u>service</u>, and disable MX (mail exchanger) DNS lookups with [<u>host</u>] or [<u>host</u>]:<u>port</u>.
       The [] form is required when you specify an IP address instead of a hostname.

       A  null  <u>transport</u>  and  null <u>nexthop</u> field means "do not change": use the delivery transport and nexthop
       information that would be used when the entire transport table did not exist.

       A non-null <u>transport</u> field with a null <u>nexthop</u> field resets the  nexthop  information  to  the  recipient
       domain.

       A null <u>transport</u> field with non-null <u>nexthop</u> field does not modify the transport information.

</pre><h4><b>EXAMPLES</b></h4><pre>
       In  order  to deliver internal mail directly, while using a mail relay for all other mail, specify a null
       entry for internal destinations (do not change the delivery transport or  the  nexthop  information)  and
       specify a wildcard for all other destinations.

            <b>my.domain</b>    <b>:</b>
            <b>.my.domain</b>   <b>:</b>
            <b>*</b>            <b>smtp:outbound-relay.my.domain</b>

       In  order  to  send mail for <b>example.com</b> and its subdomains via the <b>uucp</b> transport to the UUCP host named
       <b>example</b>:

            <b>example.com</b>      <b>uucp:example</b>
            <b>.example.com</b>     <b>uucp:example</b>

       When no nexthop host name is specified, the destination domain name is used  instead.  For  example,  the
       following  directs  mail for <u>user</u>@<b>example.com</b> via the <b>slow</b> transport to a mail exchanger for <b>example.com</b>.
       The <b>slow</b> transport could be configured to run at most one delivery process at a time:

            <b>example.com</b>      <b>slow:</b>

       When no transport is specified, Postfix uses the transport that matches the  address  domain  class  (see
       DESCRIPTION  above).   The  following  sends  all  mail  for  <b>example.com</b>  and  its  subdomains  to  host
       <b>gateway.example.com</b>:

            <b>example.com</b>      <b>:[gateway.example.com]</b>
            <b>.example.com</b>     <b>:[gateway.example.com]</b>

       In the above example, the [] suppress MX lookups.  This prevents mail routing loops when your machine  is
       primary MX host for <b>example.com</b>.

       In the case of delivery via SMTP or LMTP, one may specify <u>host</u>:<u>service</u> instead of just a host:

            <b>example.com</b>      <b>smtp:bar.example:2025</b>

       This  directs  mail  for  <u>user</u>@<b>example.com</b>  to  host <b>bar.example</b> port <b>2025</b>. Instead of a numerical port a
       symbolic name may be used. Specify [] around the hostname if MX lookups must be disabled.

       Deliveries via SMTP or LMTP support multiple destinations (Postfix &gt;= 3.5):

            <b>example.com</b>      <b>smtp:bar.example,</b> <b>foo.example</b>

       This tries to deliver to <b>bar.example</b> before trying to deliver to <b>foo.example</b>.

       The error mailer can be used to bounce mail:

            <b>.example.com</b>     <b>error:mail</b> <b>for</b> <b>*.example.com</b> <b>is</b> <b>not</b> <b>deliverable</b>

       This causes all mail for <u>user</u>@<u>anything</u><b>.example.com</b> to be bounced.

</pre><h4><b>REGULAR</b> <b>EXPRESSION</b> <b>TABLES</b></h4><pre>
       This section describes how the table lookups change when the table  is  given  in  the  form  of  regular
       expressions.  For  a  description  of  regular  expression  lookup  table  syntax, see <b><a href="../man5/regexp_table.5.html">regexp_table</a></b>(5) or
       <b><a href="../man5/pcre_table.5.html">pcre_table</a></b>(5).

       Each pattern is a regular expression that is applied  to  the  entire  address  being  looked  up.  Thus,
       <u>some.domain.hierarchy</u>  is  not  looked  up  via  its  parent domains, nor is <u>user+foo@domain</u> looked up as
       <u>user@domain</u>.

       Patterns are applied in the order as specified in the table, until a pattern is found  that  matches  the
       search string.

       The  <b><a href="../man8/trivial-rewrite.8.html">trivial-rewrite</a></b>(8) server disallows regular expression substitution of $1 etc. in regular expression
       lookup tables, because that could open a security hole (Postfix version 2.3 and later).

</pre><h4><b>TCP-BASED</b> <b>TABLES</b></h4><pre>
       This section describes how the table lookups change when lookups are directed to a TCP-based server.  For
       a  description of the TCP client/server lookup protocol, see <b><a href="../man5/tcp_table.5.html">tcp_table</a></b>(5).  This feature is not available
       up to and including Postfix version 2.4.

       Each lookup operation uses the entire recipient address once.  Thus, <u>some.domain.hierarchy</u> is not  looked
       up via its parent domains, nor is <u>user+foo@domain</u> looked up as <u>user@domain</u>.

       Results are the same as with indexed file lookups.

</pre><h4><b>CONFIGURATION</b> <b>PARAMETERS</b></h4><pre>
       The  following  <b>main.cf</b>  parameters  are  especially  relevant.  The text below provides only a parameter
       summary. See <b><a href="../man5/postconf.5.html">postconf</a></b>(5) for more details including examples.

       <b>empty_address_recipient</b> <b>(MAILER-DAEMON)</b>
              The recipient of mail addressed to the null address.

       <b>parent_domain_matches_subdomains</b> <b>(see</b> <b>'postconf</b> <b>-d'</b> <b>output)</b>
              A list of Postfix features where the pattern "example.com" also matches subdomains of example.com,
              instead of requiring an explicit ".example.com" pattern.

       <b>transport_maps</b> <b>(empty)</b>
              Optional lookup tables with mappings  from  recipient  address  to  (message  delivery  transport,
              next-hop destination).

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <a href="../man8/trivial-rewrite.8.html">trivial-rewrite</a>(8), rewrite and resolve addresses
       <a href="../man5/master.5.html">master</a>(5), master.cf file format
       <a href="../man5/postconf.5.html">postconf</a>(5), configuration parameters
       <a href="../man1/postmap.1.html">postmap</a>(1), Postfix lookup table manager

</pre><h4><b>README</b> <b>FILES</b></h4><pre>
       Use "<b>postconf</b> <b>readme_directory</b>" or "<b>postconf</b> <b>html_directory</b>" to locate this information.
       ADDRESS_REWRITING_README, address rewriting guide
       DATABASE_README, Postfix lookup table overview
       FILTER_README, external content filter

</pre><h4><b>LICENSE</b></h4><pre>
       The Secure Mailer license must be distributed with this software.

</pre><h4><b>AUTHOR(S)</b></h4><pre>
       Wietse Venema
       IBM T.J. Watson Research
       P.O. Box 704
       Yorktown Heights, NY 10598, USA

       Wietse Venema
       Google, Inc.
       111 8th Avenue
       New York, NY 10011, USA

                                                                                                    <u><a href="../man5/TRANSPORT.5.html">TRANSPORT</a></u>(5)
</pre>
 </div>
</div></section>
</div>
</body>
</html>