<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>/proc/sys/fs/ - kernel variables related to filesystems</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/manpages">manpages_6.9.1-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       <a href="file:/proc/sys/fs/">/proc/sys/fs/</a> - kernel variables related to filesystems

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <u><a href="file:/proc/sys/fs/">/proc/sys/fs/</a></u>
              This directory contains the files and subdirectories for kernel variables related to filesystems.

       <u><a href="file:/proc/sys/fs/aio-max-nr">/proc/sys/fs/aio-max-nr</a></u> and <u><a href="file:/proc/sys/fs/aio-nr">/proc/sys/fs/aio-nr</a></u> (since Linux 2.6.4)
              <u>aio-nr</u>  is  the  running  total  of  the  number  of events specified by <b><a href="../man2/io_setup.2.html">io_setup</a></b>(2) calls for all
              currently active AIO contexts.  If <u>aio-nr</u> reaches <u>aio-max-nr</u>, then <b><a href="../man2/io_setup.2.html">io_setup</a></b>(2) will fail with  the
              error  <b>EAGAIN</b>.   Raising <u>aio-max-nr</u> does not result in the preallocation or resizing of any kernel
              data structures.

       <u><a href="file:/proc/sys/fs/binfmt_misc">/proc/sys/fs/binfmt_misc</a></u>
              Documentation for files in this directory can be found in the Linux  kernel  source  in  the  file
              <u>Documentation/admin-guide/binfmt-misc.rst</u> (or in <u>Documentation/binfmt_misc.txt</u> on older kernels).

       <u><a href="file:/proc/sys/fs/dentry-state">/proc/sys/fs/dentry-state</a></u> (since Linux 2.2)
              This  file  contains  information  about  the  status  of  the directory cache (dcache).  The file
              contains six  numbers,  <u>nr_dentry</u>,  <u>nr_unused</u>,  <u>age_limit</u>  (age  in  seconds),  <u>want_pages</u>  (pages
              requested by system) and two dummy values.

              •  <u>nr_dentry</u>  is the number of allocated dentries (dcache entries).  This field is unused in Linux
                 2.2.

              •  <u>nr_unused</u> is the number of unused dentries.

              •  <u>age_limit</u> is the age in seconds after which dcache entries can  be  reclaimed  when  memory  is
                 short.

              •  <u>want_pages</u>  is  nonzero  when  the kernel has called shrink_dcache_pages() and the dcache isn't
                 pruned yet.

       <u><a href="file:/proc/sys/fs/dir-notify-enable">/proc/sys/fs/dir-notify-enable</a></u>
              This file can be used to disable or enable the  <u>dnotify</u>  interface  described  in  <b><a href="../man2/fcntl.2.html">fcntl</a></b>(2)  on  a
              system-wide basis.  A value of 0 in this file disables the interface, and a value of 1 enables it.

       <u>/proc/sys/fs/dquot-max</u>
              This file shows the maximum number of cached disk quota entries.  On some (2.4) systems, it is not
              present.   If  the  number of free cached disk quota entries is very low and you have some awesome
              number of simultaneous system users, you might want to raise the limit.

       <u>/proc/sys/fs/dquot-nr</u>
              This file shows the number of allocated disk quota entries and  the  number  of  free  disk  quota
              entries.

       <u><a href="file:/proc/sys/fs/epoll/">/proc/sys/fs/epoll/</a></u> (since Linux 2.6.28)
              This directory contains the file <u>max_user_watches</u>, which can be used to limit the amount of kernel
              memory consumed by the <u>epoll</u> interface.  For further details, see <b><a href="../man7/epoll.7.html">epoll</a></b>(7).

       <u><a href="file:/proc/sys/fs/file-max">/proc/sys/fs/file-max</a></u>
              This file defines a system-wide limit on the number of open files for all processes.  System calls
              that  fail when encountering this limit fail with the error <b>ENFILE</b>.  (See also <b><a href="../man2/setrlimit.2.html">setrlimit</a></b>(2), which
              can be used by a process to set the per-process limit, <b>RLIMIT_NOFILE</b>, on the number  of  files  it
              may  open.)  If you get lots of error messages in the kernel log about running out of file handles
              (open file descriptions) (look for "VFS: file-max limit &lt;number&gt; reached"),  try  increasing  this
              value:

                  echo 100000 &gt; <a href="file:/proc/sys/fs/file-max">/proc/sys/fs/file-max</a>

              Privileged processes (<b>CAP_SYS_ADMIN</b>) can override the <u>file-max</u> limit.

       <u><a href="file:/proc/sys/fs/file-nr">/proc/sys/fs/file-nr</a></u>
              This  (read-only)  file  contains  three  numbers: the number of allocated file handles (i.e., the
              number of open file descriptions; see <b><a href="../man2/open.2.html">open</a></b>(2)); the number of free file handles; and  the  maximum
              number  of  file  handles  (i.e.,  the  same  value  as  <u><a href="file:/proc/sys/fs/file-max">/proc/sys/fs/file-max</a></u>).  If the number of
              allocated file handles is close to the  maximum,  you  should  consider  increasing  the  maximum.
              Before  Linux  2.6,  the kernel allocated file handles dynamically, but it didn't free them again.
              Instead the free file handles were kept in a list for reallocation; the "free file handles"  value
              indicates  the  size of that list.  A large number of free file handles indicates that there was a
              past peak in the usage of open file handles.  Since Linux 2.6, the kernel  does  deallocate  freed
              file handles, and the "free file handles" value is always zero.

       <u>/proc/sys/fs/inode-max</u> (only present until Linux 2.2)
              This  file contains the maximum number of in-memory inodes.  This value should be 3–4 times larger
              than the value in <u>file-max</u>, since <u>stdin</u>, <u>stdout</u> and network sockets also need an inode  to  handle
              them.  When you regularly run out of inodes, you need to increase this value.

              Starting  with Linux 2.4, there is no longer a static limit on the number of inodes, and this file
              is removed.

       <u><a href="file:/proc/sys/fs/inode-nr">/proc/sys/fs/inode-nr</a></u>
              This file contains the first two values from <u>inode-state</u>.

       <u><a href="file:/proc/sys/fs/inode-state">/proc/sys/fs/inode-state</a></u>
              This file contains seven numbers: <u>nr_inodes</u>, <u>nr_free_inodes</u>,  <u>preshrink</u>,  and  four  dummy  values
              (always zero).

              <u>nr_inodes</u>  is the number of inodes the system has allocated.  <u>nr_free_inodes</u> represents the number
              of free inodes.

              <u>preshrink</u> is nonzero when the <u>nr_inodes</u> &gt; <u>inode-max</u> and the system needs to prune the  inode  list
              instead of allocating more; since Linux 2.4, this field is a dummy value (always zero).

       <u><a href="file:/proc/sys/fs/inotify/">/proc/sys/fs/inotify/</a></u> (since Linux 2.6.13)
              This  directory  contains  files <u>max_queued_events</u>, <u>max_user_instances</u>, and <u>max_user_watches</u>, that
              can be used to limit the amount of kernel memory consumed by the <u>inotify</u> interface.   For  further
              details, see <b><a href="../man7/inotify.7.html">inotify</a></b>(7).

       <u><a href="file:/proc/sys/fs/lease-break-time">/proc/sys/fs/lease-break-time</a></u>
              This  file  specifies  the  grace  period that the kernel grants to a process holding a file lease
              (<b><a href="../man2/fcntl.2.html">fcntl</a></b>(2)) after it has sent a signal to that process notifying it that another process is waiting
              to open the file.  If the lease holder does not remove or downgrade the lease  within  this  grace
              period, the kernel forcibly breaks the lease.

       <u><a href="file:/proc/sys/fs/leases-enable">/proc/sys/fs/leases-enable</a></u>
              This file can be used to enable or disable file leases (<b><a href="../man2/fcntl.2.html">fcntl</a></b>(2)) on a system-wide basis.  If this
              file contains the value 0, leases are disabled.  A nonzero value enables leases.

       <u><a href="file:/proc/sys/fs/mount-max">/proc/sys/fs/mount-max</a></u> (since Linux 4.9)
              The value in this file specifies the maximum number of mounts that may exist in a mount namespace.
              The default value in this file is 100,000.

       <u><a href="file:/proc/sys/fs/mqueue/">/proc/sys/fs/mqueue/</a></u> (since Linux 2.6.6)
              This directory contains files <u>msg_max</u>, <u>msgsize_max</u>, and <u>queues_max</u>, controlling the resources used
              by POSIX message queues.  See <b><a href="../man7/mq_overview.7.html">mq_overview</a></b>(7) for details.

       <u><a href="file:/proc/sys/fs/nr_open">/proc/sys/fs/nr_open</a></u> (since Linux 2.6.25)
              This  file  imposes a ceiling on the value to which the <b>RLIMIT_NOFILE</b> resource limit can be raised
              (see <b><a href="../man2/getrlimit.2.html">getrlimit</a></b>(2)).  This ceiling is enforced for both unprivileged and privileged  process.   The
              default  value  in  this file is 1048576.  (Before Linux 2.6.25, the ceiling for <b>RLIMIT_NOFILE</b> was
              hard-coded to the same value.)

       <u><a href="file:/proc/sys/fs/overflowgid">/proc/sys/fs/overflowgid</a></u> and <u><a href="file:/proc/sys/fs/overflowuid">/proc/sys/fs/overflowuid</a></u>
              These files allow you to change the value of the fixed UID and GID.  The default is  65534.   Some
              filesystems  support only 16-bit UIDs and GIDs, although in Linux UIDs and GIDs are 32 bits.  When
              one of these filesystems is mounted with writes enabled, any UID or GID that would exceed 65535 is
              translated to the overflow value before being written to disk.

       <u><a href="file:/proc/sys/fs/pipe-max-size">/proc/sys/fs/pipe-max-size</a></u> (since Linux 2.6.35)
              See <b><a href="../man7/pipe.7.html">pipe</a></b>(7).

       <u><a href="file:/proc/sys/fs/pipe-user-pages-hard">/proc/sys/fs/pipe-user-pages-hard</a></u> (since Linux 4.5)
              See <b><a href="../man7/pipe.7.html">pipe</a></b>(7).

       <u><a href="file:/proc/sys/fs/pipe-user-pages-soft">/proc/sys/fs/pipe-user-pages-soft</a></u> (since Linux 4.5)
              See <b><a href="../man7/pipe.7.html">pipe</a></b>(7).

       <u><a href="file:/proc/sys/fs/protected_fifos">/proc/sys/fs/protected_fifos</a></u> (since Linux 4.19)
              The value in this file is/can be set to one of the following:

              0   Writing to FIFOs is unrestricted.

              1   Don't allow <b>O_CREAT</b> <b><a href="../man2/open.2.html">open</a></b>(2) on FIFOs that the caller  doesn't  own  in  world-writable  sticky
                  directories, unless the FIFO is owned by the owner of the directory.

              2   As for the value 1, but the restriction also applies to group-writable sticky directories.

              The  intent  of  the  above protections is to avoid unintentional writes to an attacker-controlled
              FIFO when a program expected to create a regular file.

       <u><a href="file:/proc/sys/fs/protected_hardlinks">/proc/sys/fs/protected_hardlinks</a></u> (since Linux 3.6)
              When the value in this file is 0, no restrictions are placed on the creation of hard links  (i.e.,
              this  is the historical behavior before Linux 3.6).  When the value in this file is 1, a hard link
              can be created to a target file only if one of the following conditions is true:

              •  The calling process has the <b>CAP_FOWNER</b> capability in its user namespace and the file UID has  a
                 mapping in the namespace.

              •  The  filesystem UID of the process creating the link matches the owner (UID) of the target file
                 (as described in <b><a href="../man7/credentials.7.html">credentials</a></b>(7), a process's  filesystem  UID  is  normally  the  same  as  its
                 effective UID).

              •  All of the following conditions are true:

                  •  the target is a regular file;

                  •  the target file does not have its set-user-ID mode bit enabled;

                  •  the target file does not have both its set-group-ID and group-executable mode bits enabled;
                     and

                  •  the  caller  has  permission  to  read  and  write  the  target file (either via the file's
                     permissions mask or because it has suitable capabilities).

              The default value in this file is 0.  Setting the value to 1  prevents  a  longstanding  class  of
              security  issues caused by hard-link-based time-of-check, time-of-use races, most commonly seen in
              world-writable directories such as <u><a href="file:/tmp">/tmp</a></u>.  The common method of exploiting this flaw  is  to  cross
              privilege  boundaries  when  following a given hard link (i.e., a root process follows a hard link
              created by another user).  Additionally, on  systems  without  separated  partitions,  this  stops
              unauthorized  users  from  "pinning"  vulnerable  set-user-ID and set-group-ID files against being
              upgraded by the administrator, or linking to special files.

       <u><a href="file:/proc/sys/fs/protected_regular">/proc/sys/fs/protected_regular</a></u> (since Linux 4.19)
              The value in this file is/can be set to one of the following:

              0   Writing to regular files is unrestricted.

              1   Don't allow <b>O_CREAT</b> <b><a href="../man2/open.2.html">open</a></b>(2) on regular files that the caller  doesn't  own  in  world-writable
                  sticky directories, unless the regular file is owned by the owner of the directory.

              2   As for the value 1, but the restriction also applies to group-writable sticky directories.

              The  intent  of  the above protections is similar to <u>protected_fifos</u>, but allows an application to
              avoid writes to an attacker-controlled regular file, where the application expected to create one.

       <u><a href="file:/proc/sys/fs/protected_symlinks">/proc/sys/fs/protected_symlinks</a></u> (since Linux 3.6)
              When the value in this file is 0, no restrictions are placed on following  symbolic  links  (i.e.,
              this  is  the  historical  behavior before Linux 3.6).  When the value in this file is 1, symbolic
              links are followed only in the following circumstances:

              •  the filesystem UID of the process following the link matches the owner (UID)  of  the  symbolic
                 link  (as  described  in <b><a href="../man7/credentials.7.html">credentials</a></b>(7), a process's filesystem UID is normally the same as its
                 effective UID);

              •  the link is not in a sticky world-writable directory; or

              •  the symbolic link and its parent directory have the same owner (UID)

              A system call that fails to follow a symbolic link because of the above restrictions  returns  the
              error <b>EACCES</b> in <u>errno</u>.

              The  default  value  in  this  file  is  0.  Setting the value to 1 avoids a longstanding class of
              security issues based on time-of-check, time-of-use races when accessing symbolic links.

       <u><a href="file:/proc/sys/fs/suid_dumpable">/proc/sys/fs/suid_dumpable</a></u> (since Linux 2.6.13)
              The value in this file is assigned to a process's "dumpable" flag in the  circumstances  described
              in  <b><a href="../man2/prctl.2.html">prctl</a></b>(2).   In  effect, the value in this file determines whether core dump files are produced
              for set-user-ID or otherwise protected/tainted binaries.  The "dumpable" setting also affects  the
              ownership of files in a process's <u><a href="file:/proc/">/proc/</a></u>pid directory, as described above.

              Three different integer values can be specified:

              <u>0</u> <u>(default)</u>
                     This  provides  the  traditional  (pre-Linux  2.6.13)  behavior.   A  core dump will not be
                     produced for a process which has changed credentials (by calling <b><a href="../man2/seteuid.2.html">seteuid</a></b>(2), <b><a href="../man2/setgid.2.html">setgid</a></b>(2),  or
                     similar,  or  by  executing a set-user-ID or set-group-ID program) or whose binary does not
                     have read permission enabled.

              <u>1</u> <u>("debug")</u>
                     All processes dump core when possible.  (Reasons why a process might nevertheless not  dump
                     core  are  described  in <b><a href="../man5/core.5.html">core</a></b>(5).)  The core dump is owned by the filesystem user ID of the
                     dumping process and no  security  is  applied.   This  is  intended  for  system  debugging
                     situations  only: this mode is insecure because it allows unprivileged users to examine the
                     memory contents of privileged processes.

              <u>2</u> <u>("suidsafe")</u>
                     Any binary which normally would not be dumped (see "0" above) is dumped  readable  by  root
                     only.   This allows the user to remove the core dump file but not to read it.  For security
                     reasons core dumps in this mode will not overwrite one another or other files.   This  mode
                     is   appropriate  when  administrators  are  attempting  to  debug  problems  in  a  normal
                     environment.

                     Additionally, since Linux 3.6, <u><a href="file:/proc/sys/kernel/core_pattern">/proc/sys/kernel/core_pattern</a></u> must  either  be  an  absolute
                     pathname or a pipe command, as detailed in <b><a href="../man5/core.5.html">core</a></b>(5).  Warnings will be written to the kernel
                     log if <u>core_pattern</u> does not follow these rules, and no core dump will be produced.

              For  details  of  the effect of a process's "dumpable" setting on ptrace access mode checking, see
              <b><a href="../man2/ptrace.2.html">ptrace</a></b>(2).

       <u>/proc/sys/fs/super-max</u>
              This file controls the maximum number of superblocks, and  thus  the  maximum  number  of  mounted
              filesystems  the  kernel  can  have.   You  need increase only <u>super-max</u> if you need to mount more
              filesystems than the current value in <u>super-max</u> allows you to.

       <u>/proc/sys/fs/super-nr</u>
              This file contains the number of filesystems currently mounted.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man5/proc.5.html">proc</a></b>(5), <b><a href="../man5/proc_sys.5.html">proc_sys</a></b>(5)

Linux man-pages 6.9.1                              2024-05-02                                     <u><a href="../man5/proc_sys_fs.5.html">proc_sys_fs</a></u>(5)
</pre>
 </div>
</div></section>
</div>
</body>
</html>