<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>upssched.conf - Configuration for upssched timer program</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/nut-client">nut-client_2.8.3-2_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       upssched.conf - Configuration for upssched timer program

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This file controls the operations of <b><a href="../man8/upssched.8.html">upssched</a></b>(8), the timer-based helper program for <b><a href="../man8/upsmon.8.html">upsmon</a></b>(8).

</pre><h4><b>IMPORTANT</b> <b>NOTES</b></h4><pre>
       •   Contents of this file should be pure ASCII (character codes not in range would be ignored with a
           warning message).

</pre><h4><b>CONFIGURATION</b> <b>DIRECTIVES</b></h4><pre>
       <b>CMDSCRIPT</b> <u>scriptname</u>
           Required. This must be above any AT lines. This script is used to invoke commands when your timers
           are triggered. It receives a single argument which is the name of the timer that caused it to
           trigger.

       <b>PIPEFN</b> <u>filename</u>
           Required. This sets the file name of the socket which will be used for interprocess communications.
           This should be in a directory where normal users can’t create the file, due to the possibility of
           symlinking and other evil.

           <b>Caution</b>

           if you are running Solaris or similar, the permissions that upssched sets on this file <b>are</b> <b>not</b> <b>enough</b>
           to keep you safe. If your OS ignores the permissions on a FIFO, then you MUST put this in a protected
           directory!

           <b>Note</b>

           by default, <b><a href="../man8/upsmon.8.html">upsmon</a></b>(8) will run upssched as whatever user you have defined with RUN_AS_USER in
           <b><a href="../man8/upsmon.conf.8.html">upsmon.conf</a></b>(8). Make sure that user can create files and write to files in the path you use for
           PIPEFN and LOCKFN.

       My recommendation: create a special directory for upssched, make it owned by your upsmon user, then use
       it for both.

       The stock version of the upssched.conf ships with PIPEFN disabled to make you visit this portion of the
       documentation and think about how your system works before potentially opening a security hole.

       <b>LOCKFN</b> <u>filename</u>
           Required. upssched attempts to create this file in order to avoid a race condition when two events
           are dispatched from upsmon at nearly the same time. This file will only exist briefly. It must not be
           created by any other process.

           You should put this in the same directory as PIPEFN.

       <b>AT</b> <u>notifytype</u> <u>upsname</u> <u>command</u>
           Define a handler for a specific event <u>notifytype</u> on UPS <u>upsname</u>.  <u>upsname</u> can be the special value *
           to apply this handler to every UPS.

           This will perform the command <u>command</u> when the <u>notifytype</u> and <u>upsname</u> match the current activity.
           Possible values for <u>command</u> are:

           <b>START-TIMER</b> <u>timername</u> <u>interval</u>
               Start a timer of <u>interval</u> seconds. When it triggers, it will pass the argument <u>timername</u> as an
               argument to your CMDSCRIPT.

               Example:

               Start a timer that will execute when any UPS (*) has been gone for 10 seconds

                   AT COMMBAD * START-TIMER upsgone 10

           <b>CANCEL-TIMER</b> <u>timername</u> [<u>cmd</u>]
               Cancel a running timer called <u>timername</u>, if possible. If the timer has passed then pass the
               optional argument <u>cmd</u> to CMDSCRIPT.

               Example:

               If a specific UPS (myups@localhost) comes back online, then stop the timer before it triggers

                   AT COMMOK myups@localhost CANCEL-TIMER upsgone

           <b>EXECUTE</b> <u>command</u>
               Immediately pass <u>command</u> as an argument to CMDSCRIPT.

               Example:

               If any UPS (*) reverts to utility power, then execute ups-back-on-line via CMDSCRIPT.

                   AT ONLINE * EXECUTE ups-back-on-line

       Note that any AT that matches both the <u>notifytype</u> and the <u>upsname</u> for the current event will be used.

       For a complete list of <u>notifytype</u> possible values, refer to the section NOTIFY EVENTS in <b><a href="../man8/upsmon.8.html">upsmon</a></b>(8).

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man8/upssched.8.html">upssched</a></b>(8), <b><a href="../man8/upsmon.8.html">upsmon</a></b>(8)

   <b>Internet</b> <b>resources:</b>
       The NUT (Network UPS Tools) home page: https://www.networkupstools.org/historic/v2.8.3/

Network UPS Tools 2.8.3                            07/08/2025                                   <u><a href="../man5/UPSSCHED.CONF.5.html">UPSSCHED.CONF</a></u>(5)
</pre>
 </div>
</div></section>
</div>
</body>
</html>