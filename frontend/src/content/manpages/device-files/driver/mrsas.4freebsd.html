<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>mrsas — LSI MegaRAID 6Gb/s and 12Gb/s SAS+SATA RAID controller driver</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/freebsd-manpages">freebsd-manpages_12.2-2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       mrsas — LSI MegaRAID 6Gb/s and 12Gb/s SAS+SATA RAID controller driver

</pre><h4><b>SYNOPSIS</b></h4><pre>
       To compile this driver into the kernel, place the following lines in your kernel configuration file:

             <b>device</b> <b>pci</b>
             <b>device</b> <b>mrsas</b>

       Alternatively, to load the driver as a module at boot time, place the following line in <u><a href="../man5/loader.conf.5.html">loader.conf</a></u>(5):

             mrsas_load="YES"

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The  <b>mrsas</b>  driver  will  detect  LSI's  next  generation  (6Gb/s  and  12Gb/s) PCI Express SAS/SATA RAID
       controllers.  See the <b>HARDWARE</b> section for the supported devices list.   A  disk  (virtual  disk/physical
       disk)  attached  to the <b>mrsas</b> driver will be visible to the user through <u><a href="../man8/camcontrol.8.html">camcontrol</a></u>(8) as <u>/dev/da?</u> device
       nodes.  A simple management interface is also provided on a  per-controller  basis  via  the  <u>/dev/mrsas?</u>
       device node.

       The  <b>mrsas</b>  name is derived from the phrase "MegaRAID SAS HBA", which is substantially different than the
       old "MegaRAID" Driver <u><a href="../man4/mfi.4.html">mfi</a></u>(4) which does not connect targets to the <u><a href="../man4/cam.4.html">cam</a></u>(4) layer and thus requires  a  new
       driver  which  attaches  targets to the <u><a href="../man4/cam.4.html">cam</a></u>(4) layer.  Older MegaRAID controllers are supported by <u><a href="../man4/mfi.4.html">mfi</a></u>(4)
       and will not work with <b>mrsas</b>, but both the <u><a href="../man4/mfi.4.html">mfi</a></u>(4) and  <b>mrsas</b>  drivers  can  detect  and  manage  the  LSI
       MegaRAID SAS 2208/2308/3008/3108 series of controllers.

       The  <u><a href="../man5/device.hints.5.html">device.hints</a></u>(5)  option  is  provided  to  tune  the  <b>mrsas</b>  driver's  behavior for LSI MegaRAID SAS
       2208/2308/3008/3108 controllers.  By default, the <u><a href="../man4/mfi.4.html">mfi</a></u>(4) driver will detect these controllers.   See  the
       <b>PRIORITY</b> section to know more about driver priority for MR-Fusion devices.

       <b>mrsas</b>  will  provide  a priority of (-30) (between BUS_PROBE_DEFAULT and BUS_PROBE_LOW_PRIORITY) at probe
       call for device id's 0x005B, 0x005D, and 0x005F so that <b>mrsas</b> does not  take  control  of  these  devices
       without user intervention.

       Solid-state  drives  (SSD)  get  ATA  TRIM  support with <b>mrsas</b> if underlying adapter allows it.  This may
       require configuring SSD as Non-RAID drive rather then JBOD virtual mode.

</pre><h4><b>HARDWARE</b></h4><pre>
       The <b>mrsas</b> driver supports the following hardware:

       [ Thunderbolt 6Gb/s MR controller ]
       <b>•</b>   LSI MegaRAID SAS 9265
       <b>•</b>   LSI MegaRAID SAS 9266
       <b>•</b>   LSI MegaRAID SAS 9267
       <b>•</b>   LSI MegaRAID SAS 9270
       <b>•</b>   LSI MegaRAID SAS 9271
       <b>•</b>   LSI MegaRAID SAS 9272
       <b>•</b>   LSI MegaRAID SAS 9285
       <b>•</b>   LSI MegaRAID SAS 9286
       <b>•</b>   DELL PERC H810
       <b>•</b>   DELL PERC H710/P

       [ Invader/Fury 12Gb/s MR controller ]
       <b>•</b>   LSI MegaRAID SAS 9380
       <b>•</b>   LSI MegaRAID SAS 9361
       <b>•</b>   LSI MegaRAID SAS 9341
       <b>•</b>   DELL PERC H830
       <b>•</b>   DELL PERC H730/P
       <b>•</b>   DELL PERC H330

</pre><h4><b>CONFIGURATION</b></h4><pre>
       To disable Online Controller Reset(OCR) for a specific <b>mrsas</b> driver instance, set the  following  tunable
       value in <u><a href="../man5/loader.conf.5.html">loader.conf</a></u>(5):

             dev.mrsas.X.disable_ocr=1

       where X is the adapter number.

       To  change the I/O timeout value for a specific <b>mrsas</b> driver instance, set the following tunable value in
       <u><a href="../man5/loader.conf.5.html">loader.conf</a></u>(5):

             dev.mrsas.X.mrsas_io_timeout=NNNNNN

       where NNNNNN is the timeout value in milli-seconds.

       To change the firmware fault check timer value for a specific <b>mrsas</b> driver instance,  set  the  following
       tunable value in <u><a href="../man5/loader.conf.5.html">loader.conf</a></u>(5):

             dev.mrsas.X.mrsas_fw_fault_check_delay=NN

       where NN is the fault check delay value in seconds.

       The current number of active I/O commands is shown in the <u>dev.mrsas.X.fw_outstanding</u> <u><a href="../man8/sysctl.8.html">sysctl</a></u>(8) variable.

</pre><h4><b>DEBUGGING</b></h4><pre>
       To enable debugging prints from the <b>mrsas</b> driver, set the <u>hw.mrsas.X.debug_level</u> variable, where X is the
       adapter  number,  either  in  <u><a href="../man5/loader.conf.5.html">loader.conf</a></u>(5)  or  via  <u><a href="../man8/sysctl.8.html">sysctl</a></u>(8).   The following bits have the described
       effects:

             0x01    Enable informational prints.

             0x02    Enable tracing prints.

             0x04    Enable prints for driver faults.

             0x08    Enable prints for OCR and I/O timeout.

             0x10    Enable prints for AEN events.

</pre><h4><b>PRIORITY</b></h4><pre>
       The <b>mrsas</b> driver will always set a default (-30) priority in the PCI subsystem for selection of MR-Fusion
       cards.  (It is between BUS_PROBE_DEFAULT and BUS_PROBE_LOW_PRIORITY).  MR-Fusion Controllers include  all
       cards with the Device IDs - 0x005B, 0x005D, 0x005F.

       The <u><a href="../man4/mfi.4.html">mfi</a></u>(4) driver will set a priority of either BUS_PROBE_DEFAULT or BUS_PROBE_LOW_PRIORITY (depending on
       the  device.hints  setting) in the PCI subsystem for selection of MR-Fusion cards.  With the above design
       in place, the <u><a href="../man4/mfi.4.html">mfi</a></u>(4) driver will attach to a MR-Fusion card given that it  has  a  higher  priority  than
       <b>mrsas</b>.

       Using  <u>/boot/device.hints</u> (as mentioned below), the user can provide a preference for the <b>mrsas</b> driver to
       detect a MR-Fusion card instead of the <u><a href="../man4/mfi.4.html">mfi</a></u>(4) driver.

             <b>hw.mfi.mrsas_enable="1"</b>

       At boot time, the <u><a href="../man4/mfi.4.html">mfi</a></u>(4) driver will get priority to detect MR-Fusion  controllers  by  default.   Before
       changing  this  default driver selection policy, LSI advises users to understand how the driver selection
       policy works.  LSI's policy is to provide priority to the <u><a href="../man4/mfi.4.html">mfi</a></u>(4) driver to detect  MR-Fusion  cards,  but
       allow for the ability to choose the <b>mrsas</b> driver to detect MR-Fusion cards.

       LSI recommends setting hw.mfi.mrsas_enable="0" for customers who are using the older <u><a href="../man4/mfi.4.html">mfi</a></u>(4) driver and do
       not  want  to  switch  to  <b>mrsas</b>.  For those customers who are using a MR-Fusion controller for the first
       time, LSI recommends using the <b>mrsas</b> driver and setting hw.mfi.mrsas_enable="1".

       Changing the default behavior is well tested under most conditions, but unexpected behavior may pop up if
       more complex and unrealistic operations are executed by switching between the <u><a href="../man4/mfi.4.html">mfi</a></u>(4)  and  <b>mrsas</b>  drivers
       for  MR-Fusion.   Switching  drivers is designed to happen only one time.  Although multiple switching is
       possible, it is not recommended.  The user should decide from <b>Start</b> <b>of</b> <b>Day</b> which driver they want to  use
       for the MR-Fusion card.

       The  user may see different device names when switching from <u><a href="../man4/mfi.4.html">mfi</a></u>(4) to <b>mrsas</b>.  This behavior is <b>Functions</b>
       <b>As</b> <b>Designed</b> and the user needs to change the <u><a href="../man5/fstab.5.html">fstab</a></u>(5) entry manually if they are  doing  any  experiments
       with <u><a href="../man4/mfi.4.html">mfi</a></u>(4) and <b>mrsas</b> interoperability.

</pre><h4><b>FILES</b></h4><pre>
       <u>/dev/da?</u>     array/logical disk interface
       <u>/dev/mrsas?</u>  management interface

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <u><a href="../man4/cam.4.html">cam</a></u>(4), <u><a href="../man4/mfi.4.html">mfi</a></u>(4), <u><a href="../man4/pci.4.html">pci</a></u>(4), <u><a href="../man5/device.hints.5.html">device.hints</a></u>(5), <u><a href="../man8/camcontrol.8.html">camcontrol</a></u>(8)

</pre><h4><b>HISTORY</b></h4><pre>
       The <b>mrsas</b> driver first appeared in FreeBSD 10.1.

       <b>mfi</b> <b>Driver:</b> <u><a href="../man4/mfi.4.html">mfi</a></u>(4) is the old FreeBSD driver which started with support for Gen-1 Controllers and was
       extended to support up to MR-Fusion (Device ID = 0x005B, 0x005D, 0x005F).

       <b>mrsas</b> <b>Driver:</b> <b>mrsas</b> is the new driver reworked by LSI which supports Thunderbolt and onward products.
       The SAS+SATA RAID controller with device id 0x005b is referred to as the Thunderbolt controller
       throughout this man page.

       <b>cam</b> <b>aware</b> <b>HBA</b> <b>drivers:</b> FreeBSD has a <u><a href="../man4/cam.4.html">cam</a></u>(4) layer which attaches storage devices and provides a common
       access mechanism to storage controllers and attached devices.  The <b>mrsas</b> driver is <u><a href="../man4/cam.4.html">cam</a></u>(4) aware and
       devices associated with <b>mrsas</b> can be seen using <u><a href="../man8/camcontrol.8.html">camcontrol</a></u>(8).  The <u><a href="../man4/mfi.4.html">mfi</a></u>(4) driver does not understand the
       <u><a href="../man4/cam.4.html">cam</a></u>(4) layer and it directly associates storage disks to the block layer.

       <b>Thunderbolt</b> <b>Controller:</b> This is the 6Gb/s MegaRAID HBA card which has device id 0x005B.

       <b>Invader</b> <b>Controller:</b> This is 12Gb/s MegaRAID HBA card which has device id 0x005D.

       <b>Fury</b> <b>Controller:</b> This is the 12Gb/s MegaRAID HBA card which has device id 0x005F.

</pre><h4><b>AUTHORS</b></h4><pre>
       The <b>mrsas</b> driver and this manual page were written by Kashyap Desai &lt;<u><a href="mailto:Kashyap.Desai@lsi.com">Kashyap.Desai@lsi.com</a></u>&gt;.

</pre><h4><b>TODO</b></h4><pre>
       The driver does not support big-endian architectures at this time.

       The  driver  does  not  support  alias for device name (it is required when the user switches between two
       drivers and does not want to edit <u><a href="file:/etc/fstab">/etc/fstab</a></u> manually).

       The <b>mrsas</b> driver exposes devices as <u>/dev/da?</u>, whereas <u><a href="../man4/mfi.4.html">mfi</a></u>(4) exposes devices as <u>/dev/mfid?</u>.

       <b>mrsas</b> does not support the Linux Emulator interface.

       <b>mrsas</b> will not work with <u><a href="../man8/mfiutil.8.html">mfiutil</a></u>(8).

Debian                                            Mar 13, 2019                                          <u><a href="../man4/MRSAS.4.html">MRSAS</a></u>(4)
</pre>
 </div>
</div></section>
</div>
</body>
</html>