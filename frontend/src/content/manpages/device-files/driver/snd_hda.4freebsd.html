<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>snd_hda — Intel High Definition Audio bridge device driver</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/freebsd-manpages">freebsd-manpages_12.2-2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       snd_hda — Intel High Definition Audio bridge device driver

</pre><h4><b>SYNOPSIS</b></h4><pre>
       To compile this driver into the kernel, place the following lines in your kernel configuration file:

             <b>device</b> <b>sound</b>
             <b>device</b> <b>snd_hda</b>

       Alternatively, to load the driver as a module at boot time, place the following line in <u><a href="../man5/loader.conf.5.html">loader.conf</a></u>(5):

             snd_hda_load="YES"

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The  High  Definition (HD) Audio specification was developed by Intel as the logical successor of the old
       AC'97 specification and has several advantages, such as higher bandwidth which allows more  channels  and
       more detailed formats, support for several logical audio devices, and general purpose DMA channels.

       The  <b>snd_hda</b>  driver  includes  HDA bus controller driver (hdac), HDA codec driver (hdacc) and HDA codecs
       audio functions bridge driver (hdaa) that allows the generic audio driver, <u><a href="../man4/sound.4.html">sound</a></u>(4), to be used with this
       hardware.  Only audio functions are supported by <b>snd_hda</b>.  Modem and other  possible  functions  are  not
       implemented.

       The  <b>snd_hda</b>  driver supports hardware that conforms with revision 1.0 of the Intel High Definition Audio
       specification and tries to behave much like  the  Microsoft  Universal  Audio  Architecture  (UAA)  draft
       (revision 0.7b) for handling audio devices.

       According  to  HDA  and  UAA  specifications,  depending on the number of HDA buses and codecs present in
       system, their audio capabilities and BIOS provided  configuration,  the  <b>snd_hda</b>  driver  often  provides
       several  PCM  audio devices.  For example, one device for main rear 7.1 output and inputs, one device for
       independent headset connectors at front and one  device  for  SPDIF  or  HDMI  audio  input/output.   The
       assignment  of  audio  inputs  and  outputs may be tuned with <u><a href="../man5/device.hints.5.html">device.hints</a></u>(5) or <u><a href="../man8/sysctl.8.html">sysctl</a></u>(8).  The driver's
       verbose boot messages provide a lot of information about the operation of the driver  and  present  audio
       setup.

       The  default  audio  device  may  be  tuned  by  setting  the <u>hw.snd.default_unit</u> sysctl, as described in
       <u><a href="../man4/sound.4.html">sound</a></u>(4), or explicitly specified in application settings.

   <b>Boot-time</b> <b>Configuration</b>
       The following variables are available at boot-time through the <u><a href="../man5/device.hints.5.html">device.hints</a></u>(5) file:

             <u>hint.hdac.%d.config</u>  Configures a range of  possible  controller  options.   Possible  values  are:
                                  “<b>64bit</b>”, “<b>dmapos</b>”, “<b>msi</b>”.  An option prefixed with “<b>no</b>”, such as “<b>nomsi</b>”, will
                                  do  the opposite and takes precedence.  Options can be separated by whitespace
                                  and commas.

             <u>hint.hdac.%d.msi</u>     Controls MSI (Message Signaled Interrupts) support.

             <u>hint.hdac.%d.cad%d.nid%d.config</u>
                                  Same as <u>hint.hdaa.%d.nid%d.config</u>

             <u>hint.hdaa.%d.config</u>  Configures a range of possible audio function options.  Possible  values  are:
                                  “<b>eapdinv</b>”,    “<b>ivref</b>”,    “<b>ivref50</b>”,   “<b>ivref80</b>”,   “<b>ivref100</b>”,   “<b>fixedrate</b>”,
                                  “<b>forcestereo</b>”,  “<b>ovref</b>”,   “<b>ovref50</b>”,   “<b>ovref80</b>”,   “<b>ovref100</b>”,   “<b>senseinv</b>”,
                                  “<b>softpcmvol</b>”,   and   “<b>vref</b>”.    An   option   prefixed  with  “<b>no</b>”,  such  as
                                  “<b>nofixedrate</b>”, will do the opposite and  takes  precedence.   Options  can  be
                                  separated by whitespace and commas.

                                  The  “<b>eapdinv</b>”  option  inverts  External  Amplifier  Power  Down signal.  The
                                  “<b>fixedrate</b>” denies all sampling rates except 48KHz.  The “<b>forcestereo</b>”  denies
                                  mono  playback/recording.   The  “<b>senseinv</b>” option inverts jack sensing logic.
                                  The “<b>ivref</b><u>X</u>” and “<b>ovref</b><u>X</u>” options control the voltage used to  power  external
                                  microphones.

             <u>dev.hdaa.%d.init_clear</u>
                                  Zero out the pin widget config setup by the system.  Some systems seem to have
                                  unuseable  audio devices if the pin widgit configuration is cleared.  Set this
                                  value to 0 to accept the default configuration values setup by the BIOS.

             <u>hint.hdaa.%d.gpio_config</u>
                                  Overrides audio  function  GPIO  pins  configuration  set  by  BIOS.   May  be
                                  specified  as  a  set  of space-separated “<u>num</u>=<u>value</u>” pairs, where <u>num</u> is GPIO
                                  line number, and <u>value</u> is  one  of:  “<b>keep</b>”,  “<b>set</b>”,  “<b>clear</b>”,  “<b>disable</b>”  and
                                  “<b>input</b>”.

                                  “<b>GPIO</b>s”  are  a  codec's  General  Purpose  I/O  pins which system integrators
                                  sometimes use to control external muters, amplifiers and so on.  If  you  have
                                  no  sound,  or  sound volume is not adequate, you may have to experiment a bit
                                  with the GPIO setup to find the optimal setup for your system.

             <u>hint.hdaa.%d.nid%d.config</u>
                                  Overrides audio function pin configuration set by BIOS.  May be specified as a
                                  32-bit hexadecimal value with a leading “0x”, or as a set  of  space-separated
                                  “<u>option</u>=<u>value</u>” pairs.

             <u>hint.pcm.%d.rec.autosrc</u>
                                  Controls automatic recording source feature:
                                  0   disabled,
                                  1   once on attach,
                                  2   enabled.
                                  When  enabled,  driver will automatically set recording source of the mixer to
                                  connected input using jack presence detection statuses.

       Pin configuration is the UAA driver's main source of information about codec usage.  This information  is
       usually  provided  by  the  codec  manufacturer  and  tuned  by  system  integrators  for specific system
       requirements.  The <b>snd_hda</b> driver allows users to override it to fix integrator mistakes or  to  use  the
       available  codec  in  alternative ways (for example to get stereo output and 2 inputs instead of a single
       5.1 output).

       The following options are supported:

             <u>as</u>       Association number.  Associations are used to group individual  pins  to  form  a  complex
                      multi-pin  device.   For  example, to group 4 connectors for 7.1 input/output, or to treat
                      several input connectors as sources for the same input device.  Association numbers can be
                      specified as numeric values from 0 to 15.  A value of 0 means disabled pin.  A value of 15
                      is a set of independent unassociated pins.  Each association includes  only  pins  of  the
                      same  direction  (in/out)  and  is detected atomically (all pins or none).  A separate PCM
                      audio device is created for every pair of input and output associations.

             <u>seq</u>      Sequence number.   A  unique,  per-association  number  used  to  order  pins  inside  the
                      particular association.  Sequence numbers can be specified as numeric values from 0 to 15.

                      The  sequence  number  15 has a special meaning for output associations.  Output pins with
                      this number and device type “<u>Headphones</u>” will  duplicate  (with  automatic  mute  if  jack
                      detection is supported) the first pin in that association.

                      The  sequence  numbers  14  and  15  has  a special meaning for input associations.  Their
                      presence in association defines it as multiplexed or mixed respectively.  If none of  them
                      are  present  and there are more than one pin in association, the association will provide
                      multichannel input.

                      For  multichannel  input/output  associations  sequence  numbers  encode   channel   pairs
                      positions: 0 - Front, 1 - Center/LFE, 2 - Back, 3 - Front Wide Center, 4 - Side.  Standard
                      combinations  are:  (0) - Stereo; (0, 2), (0, 4) - Quadro; (0, 1, 2), (0, 1, 4) - 5.1; (0,
                      1, 2, 4) - 7.1.

             <u>device</u>   Device type.  Can be specified as a number  from  0  to  15  or  as  a  name:  “<b>Line-out</b>”,
                      “<b>Speaker</b>”,  “<b>Headphones,</b>” “<b>CD</b>”, “<b>SPDIF-out</b>”, “<b>Digital-out</b>”, “<b>Modem-line</b>”, “<b>Modem-handset</b>”,
                      “<b>Line-in</b>”, “<b>AUX</b>”, “<b>Mic</b>”, “<b>Telephony</b>”, “<b>SPDIF-in</b>”, “<b>Digital-in</b>”, “<b>Res.E</b>”, or “<b>Other</b>”.   The
                      device  type also describes the pin direction (in/out).  For example, “<b>CD</b>” always means an
                      input pin, while “<b>Headphones</b>” always means an output.

             <u>conn</u>     Connection type.  Can be specified as a number from 0 to 3.  The connection type can  also
                      be  specified as one of the special names “<b>Jack</b>”, “<b>None</b>”, “<b>Fixed</b>”, or “<b>Both</b>”.  Pins with a
                      connection type of “<b>None</b>” are disabled.

             <u>ctype</u>    Connector physical type.  Can be specified as a number from 0 to 15.  This is a  reference
                      only value.  It is ignored by the <b>snd_hda</b> driver.

             <u>color</u>    Connector  color.   Can  be  specified  as  a  number  from 0 to 15 or as one of the names
                      “<b>Unknown</b>”, “<b>Black</b>”, “<b>Grey</b>”, “<b>Blue</b>”, “<b>Green</b>”, “<b>Red</b>”, “<b>Orange</b>”, “<b>Yellow</b>”, “<b>Purple</b>”,  “<b>Pink</b>”,
                      “<b>Res.A</b>”,  “<b>Res.B</b>”, “<b>Res.C</b>”, “<b>Res.D</b>”, “<b>White</b>”, or “<b>Other</b>”.  This is a reference only value.
                      It is ignored by the <b>snd_hda</b> driver.

             <u>loc</u>      Connector physical location.  Can be specified as a number  from  0  to  63.   This  is  a
                      reference only value.  It is ignored by the <b>snd_hda</b> driver.

             <u>misc</u>     Misc bits.  Can be specified as a number from 0 to 15.  Bit 0 has a special meaning.  When
                      set it means that jack detection is not implemented in hardware.

   <b>Runtime</b> <b>Configuration</b>
       The following <u><a href="../man8/sysctl.8.html">sysctl</a></u>(8) variables are available in addition to those available to all <u><a href="../man4/sound.4.html">sound</a></u>(4) devices:

             <u>dev.hdac.%d.pindump</u>         Setting  this  to a non-zero value dumps the current pin configuration,
                                         main capabilities and jack sense status of all audio functions  on  the
                                         controller to console and syslog.

             <u>dev.hdac.%d.polling</u>         Enables polling mode.  In this mode the driver operates by querying the
                                         device  state  on  timer  ticks using <u><a href="../man9/callout.9.html">callout</a></u>(9) instead of interrupts.
                                         Polling is disabled by default.  Do not enable it unless you are facing
                                         weird interrupt problems or if the device cannot generate interrupts at
                                         all.

             <u>dev.hdaa.%d.config</u>          Run-time equivalent of the <u>hint.hdaa.%d.config</u> tunable.

             <u>dev.hdaa.%d.gpi_state</u>       Current state of GPI lines.

             <u>dev.hdaa.%d.gpio_state</u>      Current state of GPIO lines.

             <u>dev.hdaa.%d.gpio_config</u>     Run-time equivalent of the <u>hint.hdaa.%d.gpio.config</u> tunable.

             <u>dev.hdaa.%d.gpo_state</u>       Current state of GPO lines.

             <u>dev.hdaa.%d.nid%d_config</u>    Run-time equivalent of the <u>hint.hdaa.%d.nid%d.config</u> tunable.

             <u>dev.hdaa.%d.nid%d_original</u>  Original pin configuration written by BIOS.

             <u>dev.hdaa.%d.reconfig</u>        Setting this to a non-zero value makes driver to destroy  existing  pcm
                                         devices    and    process    new    pins    configuration    set    via
                                         <u>dev.hdaa.%d.nid%d_config</u>.

             <u>dev.pcm.%d.play.32bit</u>, <u>dev.pcm.%d.rec.32bit</u>
                                         HDA controller uses 32bit representation for all samples of  more  then
                                         16  bits.   These  variables allow to specify how many bits of these 32
                                         should be used by CODEC.  Depending  on  codec  capabilities,  possible
                                         values are 20, 24 and 32 bit.  The default value is 24.

             <u>dev.pcm.%d.rec.autosrc</u>      Run-time equivalent of the <u>hint.pcm.%d.rec.autosrc</u> tunable.

</pre><h4><b>EXAMPLES</b></h4><pre>
       Taking  HP Compaq DX2300 with Realtek ALC888 HDA codec for example.  This system has two audio connectors
       on a front side, three audio connectors on a rear side and one internal speaker.   According  to  verbose
       driver  output  and the codec datasheet, this codec has five stereo DACs and two stereo ADCs, all of them
       are routable to any codec pin (external connector).  All codec pins are reversible (could  be  configured
       either as input or output).

       So  high  codec uniformity and flexibility allow driver to configure it in many different ways, depending
       on requested  pins  usage  described  by  pins  configuration.   The  driver  reports  such  default  pin
       configuration when verbose messages enabled:

       hdaa0: nid   0x    as seq device       conn  jack    loc        color   misc
       hdaa0: 20 01014020 2  0  Line-out      Jack  1/8     Rear       Green   0
       hdaa0: 21 99130110 1  0  Speaker       Fixed ATAPI   Onboard    Unknown 1
       hdaa0: 22 411111f0 15 0  Speaker       None  1/8     Rear       Black   1 DISA
       hdaa0: 23 411111f0 15 0  Speaker       None  1/8     Rear       Black   1 DISA
       hdaa0: 24 01a19830 3  0  Mic           Jack  1/8     Rear       Pink    8
       hdaa0: 25 02a1983f 3  15 Mic           Jack  1/8     Front      Pink    8
       hdaa0: 26 01813031 3  1  Line-in       Jack  1/8     Rear       Blue    0
       hdaa0: 27 0221401f 1  15 Headphones    Jack  1/8     Front      Green   0
       hdaa0: 28 411111f0 15 0  Speaker       None  1/8     Rear       Black   1 DISA
       hdaa0: 30 411111f0 15 0  Speaker       None  1/8     Rear       Black   1 DISA
       hdaa0: 31 411111f0 15 0  Speaker       None  1/8     Rear       Black   1 DISA

       Here  we  can  see, that the nodes with ID (nid) 25 and 27 are front panel connectors (Jack, Front), nids
       20, 24 and 26 are rear panel connectors (Jack, Rear) and nid 21 is a built-in speaker  (Fixed,  Onboard).
       Pins  with  nids 22, 23, 28, 30 and 31 will be disabled by driver due to "None" connectivity.  So the pin
       count and description matches to connectors that we have.

       Using association (as) and sequence (seq) fields values pins are grouped into 3 associations:

       hdaa0: Association 0 (1) out:
       hdaa0:   Pin nid=21 seq=0
       hdaa0:   Pin nid=27 seq=15
       hdaa0: Association 1 (2) out:
       hdaa0:   Pin nid=20 seq=0
       hdaa0: Association 2 (3) in:
       hdaa0:   Pin nid=24 seq=0
       hdaa0:   Pin nid=26 seq=1
       hdaa0:   Pin nid=25 seq=15

       Each <u><a href="../man4/pcm.4.html">pcm</a></u>(4) device uses two associations: one for playback and one for recording.  Associations processed
       and assigned to <u><a href="../man4/pcm.4.html">pcm</a></u>(4) devices in increasing numerical order.  In  this  case  association  #0  (1)  will
       become <b>pcm0</b> device playback, using the internal speakers and <u>Headphones</u> jack with speaker automute on the
       headphones  jack  connection.   Association  #1  (2)  will become <b>pcm1</b> playback, using the <u>Line-out</u> jack.
       Association #2 (3) will become <b>pcm0</b> recording, using the external microphones and the <u>Line-in</u> jack.

       The <b>snd_hda</b> driver provides extensive verbose messages to diagnose its operation logic and  describe  its
       current codec configuration.

       Using  <u><a href="../man5/device.hints.5.html">device.hints</a></u>(5)  it is possible to modify the configuration of the existing pins, allowing a broad
       range of different audio setups.  Here are a few examples of some setups  possible  for  this  particular
       hardware:

   <b>Example</b> <b>1</b>
       Setting the <u><a href="../man5/device.hints.5.html">device.hints</a></u>(5) options

       hint.hdac.0.cad0.nid20.config="as=1"
       hint.hdac.0.cad0.nid21.config="as=2"

       will  swap  line-out  and speaker functions.  So the <b>pcm0</b> device will play to the line-out and headphones
       jacks.  Line-out will be muted on the headphones jack connection.  Recording on <b>pcm0</b>  will  go  from  two
       external microphones and line-in jacks.  <b>pcm1</b> playback will go to the internal speaker.

   <b>Example</b> <b>2</b>
       Setting the <u><a href="../man5/device.hints.5.html">device.hints</a></u>(5) options

       hint.hdac.0.cad0.nid20.config="as=1 seq=15 device=Headphones"
       hint.hdac.0.cad0.nid27.config="as=2 seq=0"
       hint.hdac.0.cad0.nid25.config="as=4 seq=0"

       will  split the headphones and one of the microphones to a separate device.  The <b>pcm0</b> device will play to
       the internal speaker and to the line-out jack, with speaker automute on  the  line-out  jack  connection.
       Recording  on  <b>pcm0</b>  will  use input from one external microphone and the line-in jacks.  The <b>pcm1</b> device
       will be completely dedicated to a headset (headphones and mic) connected to the front connectors.

   <b>Example</b> <b>3</b>
       Setting the <u><a href="../man5/device.hints.5.html">device.hints</a></u>(5) options

       hint.hdac.0.cad0.nid20.config="as=1 seq=0"
       hint.hdac.0.cad0.nid26.config="as=2 seq=0"
       hint.hdac.0.cad0.nid27.config="as=3 seq=0"
       hint.hdac.0.cad0.nid25.config="as=4 seq=0"
       hint.hdac.0.cad0.nid24.config="as=5 seq=0 device=Line-out"
       hint.hdac.0.cad0.nid21.config="as=6 seq=0"

       will give 4 independent devices: <b>pcm0</b> (line-out and line-in), <b>pcm1</b> (headphones and mic), <b>pcm2</b> (additional
       line-out via retasked rear mic jack), and <b>pcm3</b> (internal speaker).

   <b>Example</b> <b>4</b>
       Setting the <u><a href="../man5/device.hints.5.html">device.hints</a></u>(5) options

       hint.hdac.0.cad0.nid20.config="as=1 seq=0"
       hint.hdac.0.cad0.nid24.config="as=1 seq=1 device=Line-out"
       hint.hdac.0.cad0.nid26.config="as=1 seq=2 device=Line-out"
       hint.hdac.0.cad0.nid21.config="as=2 seq=0"

       will give 2 devices: <b>pcm0</b> for 5.1 playback via 3 rear connectors (line-out and retasked mic and  line-in)
       and headset (headphones and mic) at front connectors.  <b>pcm1</b> for internal speaker playback.  On headphones
       connection rear connectors will be muted.

</pre><h4><b>MIXER</b> <b>CONTROLS</b></h4><pre>
       Depending on codec configuration, these controls and signal sources could be reported to <u><a href="../man4/sound.4.html">sound</a></u>(4):

             <u>vol</u>      overall output level (volume)

             <u>rec</u>      overall recording level

             <u>igain</u>    input-to-output monitoring loopback level

             <u>ogain</u>    external amplifier control

             <u>pcm</u>      PCM playback

             <u>mix</u>      input mix

             <u>mic</u>      first external or second internal microphone input

             <u>monitor</u>  first internal or second external microphone input

             <u>line</u>, <u>line1</u>, <u>line2</u>, <u>line3</u>
                      analog (line) inputs

             <u>dig1</u>, <u>dig2</u>, <u>dig3</u>
                      digital (S/PDIF, HDMI or DisplayPort) inputs

             <u>cd</u>       CD input

             <u>speaker</u>  PC speaker input

             <u>phin</u>, <u>phout</u>, <u>radio</u>, <u>video</u>
                      other random inputs

       Controls  have  different  precision.   Some  could  be  just  an  on/off triggers.  Most of controls use
       logarithmic scale.

</pre><h4><b>HARDWARE</b></h4><pre>
       The <b>snd_hda</b> driver supports controllers having PCI class 4 (multimedia) and subclass 3 (HDA),  compatible
       with Intel HDA specification.

       The <b>snd_hda</b> driver supports more than two hundred different controllers and CODECs.  There is no sense to
       list  all  of them here, as in most cases specific CODEC configuration and wiring are more important then
       type of the CODEC itself.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <u><a href="../man4/snd_ich.4.html">snd_ich</a></u>(4), <u><a href="../man4/sound.4.html">sound</a></u>(4), <u><a href="../man5/device.hints.5.html">device.hints</a></u>(5), <u><a href="../man5/loader.conf.5.html">loader.conf</a></u>(5), <u><a href="../man8/sysctl.8.html">sysctl</a></u>(8)

</pre><h4><b>HISTORY</b></h4><pre>
       The <b>snd_hda</b> device driver first appeared in FreeBSD 6.3.

</pre><h4><b>AUTHORS</b></h4><pre>
       The  <b>snd_hda</b>  driver  was  written  by  Stephane  E.  Potvin  &lt;<u><a href="mailto:sepotvin@videotron.ca">sepotvin@videotron.ca</a></u>&gt;,   Ariff   Abdullah
       &lt;<u><a href="mailto:ariff@FreeBSD.org">ariff@FreeBSD.org</a></u>&gt;  and  Alexander  Motin  &lt;<u><a href="mailto:mav@FreeBSD.org">mav@FreeBSD.org</a></u>&gt;.  This manual page was written by Joel Dahl
       &lt;<u><a href="mailto:joel@FreeBSD.org">joel@FreeBSD.org</a></u>&gt;, Alexander Motin &lt;<u><a href="mailto:mav@FreeBSD.org">mav@FreeBSD.org</a></u>&gt; and Giorgos Keramidas &lt;<u><a href="mailto:keramida@FreeBSD.org">keramida@FreeBSD.org</a></u>&gt;.

</pre><h4><b>BUGS</b></h4><pre>
       Some Hardware/OEM vendors tend to screw up BIOS settings or use custom unusual CODEC wiring  that  create
       problems  to  the  driver.   This  may result in missing pcm devices, or a state where the <b>snd_hda</b> driver
       seems to attach and work, but no sound is played.   Some  cases  can  be  solved  by  tuning  <u>loader.conf</u>
       variables.   But before trying to fix problem that way, make sure that there really is a problem and that
       the PCM audio device in use really corresponds to the expected audio connector.

       Some vendors use non-standardized General Purpose I/O (GPIO)  pins  of  the  codec  to  control  external
       amplifiers.   In  some  cases  setting  a  combination of GPIO bits may be needed to make sound work on a
       specific device.

       HDMI and DisplayPort audio may also require support from video driver.

Debian                                            July 16, 2019                                       <u><a href="../man4/SND_HDA.4.html">SND_HDA</a></u>(4)
</pre>
 </div>
</div></section>
</div>
</body>
</html>