<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>geom_uzip — GEOM based compressed disk images and partitions</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/freebsd-manpages">freebsd-manpages_12.2-2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       geom_uzip — GEOM based compressed disk images and partitions

</pre><h4><b>SYNOPSIS</b></h4><pre>
       To compile this driver into the kernel, place the following line in your kernel configuration file:

             <b>device</b> <b>xz</b>
             <b>options</b> <b>GEOM_UZIP</b>

       Alternatively, to load the driver as a module at boot time, place the following line in <u><a href="../man5/loader.conf.5.html">loader.conf</a></u>(5):

             geom_uzip_load="YES"

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The  <b>geom_uzip</b>  framework provides support for compressed read-only disk images.  This allows significant
       storage savings at the expense of a some CPU time on each read.  Data written  in  the  GEOM  label  area
       allows  <b>geom_uzip</b> to detect compressed images which have been created with <u><a href="../man8/mkuzip.8.html">mkuzip</a></u>(8) and presented to the
       kernel as a logical disk device via <u><a href="../man4/md.4.html">md</a></u>(4).  <b>geom_uzip</b> creates a unique <u>md#.uzip</u> device for each image.

       <b>geom_uzip</b> is not limited to supporting only <u><a href="../man4/md.4.html">md</a></u>(4) images.  The image can also reside on a  block  device.
       (For  example,  a  disk, USB flash drive, DVD-ROM, etc.) The appropriate device node will appear with the
       <u>.uzip</u> suffix.

             # gpart show da0
             =&gt;      0  7833600  da0  BSD  (3.7G)
                     0  2097152    1  freebsd-ufs  (1.0G)
               2097152  5736448       - free -  (2.7G)
             # gpart add -t freebsd-ufs -s 1G da0
             da0b added
             # dd if=/tmp/20160217_dcomp_zcomp.uzip bs=256k of=/dev/da0b
             3190+1 records in
             3190+1 records out
             836331008 bytes transferred in 111.021489 secs (7533055 bytes/sec)
             # fsck -t ffs /dev/da0b.uzip
             ** /dev/da0b.uzip (NO WRITE)
             ** Last Mounted on <a href="file:/mnt">/mnt</a>
             ** Phase 1 - Check Blocks and Sizes
             ** Phase 2 - Check Pathnames
             ** Phase 3 - Check Connectivity
             ** Phase 4 - Check Reference Counts
             ** Phase 5 - Check Cyl groups
             97455 files, 604242 used, 184741 free (2349 frags, 22799 blocks,
                0.3% fragmentation)
             # mount -o ro /dev/da0b.uzip <a href="file:/mnt">/mnt</a>
             # df /dev/da0b.uzip
             Filesystem     1K-blocks    Used  Avail Capacity  Mounted on
             /dev/da0b.uzip   3155932 2416968 738964    77%    <a href="file:/mnt">/mnt</a>

       The <b>geom_uzip</b> device is subsequently used by  FreeBSD  kernel  to  access  the  uncompressed  data.   The
       <b>geom_uzip</b>  driver  does  not  allow  write  operations  to  the  underlying  disk  image.  To check which
       “providers” match a given <b>geom_uzip</b> device:

             # geom uzip list
             Geom name: md1.uzip
             Providers:
             1. Name: md1.uzip
                Mediasize: 22003712 (21M)
                Sectorsize: 512
             Consumers:
             1. Name: md1
                Mediasize: 9563648 (9.1M)
                Sectorsize: 512

             Geom name: da0b.uzip
             Providers:
             1. Name: da0b.uzip
                Mediasize: 3355443200 (3.1G)
                Sectorsize: 512
             Consumers:
             1. Name: da0b
                Mediasize: 1073741824 (1.0G)
                Sectorsize: 512

       <b>geom_uzip</b> allows mounting the  root  file  system  from  a  compressed  disk  partition  by  setting  the
       vfs.root.mountfrom tunable.  See <u><a href="../man5/loader.conf.5.html">loader.conf</a></u>(5) for details.

</pre><h4><b>DIAGNOSTICS</b></h4><pre>
       Several  flags  are  provided  for  tracing  <b>geom_uzip</b>  I/O  operations and TOC parsing via the following
       sysctls.

       <u>kern.geom.uzip.debug</u>
               Log level.  Zero  disables  logging.   Higher  values  enable  more  verbose  debug  logging  for
               <b>geom_uzip</b>.  Supported levels are from 0 (no logging) to 4 (maximum amount of logging).

       <u>kern.geom.uzip.debug_block</u>
               Log operations involving compressed cluster number.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <u><a href="../man4/GEOM.4.html">GEOM</a></u>(4), <u><a href="../man4/md.4.html">md</a></u>(4), <u><a href="../man8/geom.8.html">geom</a></u>(8), <u><a href="../man8/mkuzip.8.html">mkuzip</a></u>(8)

</pre><h4><b>AUTHORS</b></h4><pre>
       The  <b>geom_uzip</b>  driver was written by Max Khon &lt;<u><a href="mailto:fjoe@FreeBSD.org">fjoe@FreeBSD.org</a></u>&gt;.  The block de-duplication code as well
       as some <b>geom_uzip</b> driver optimizations have been contributed by Maxim Sobolev &lt;<u><a href="mailto:sobomax@FreeBSD.org">sobomax@FreeBSD.org</a></u>&gt;.  The
       LZMA decompression support and CLOOP 3.0 support have been added by Aleksandr Rybalko &lt;<u><a href="mailto:ray@FreeBSD.org">ray@FreeBSD.org</a></u>&gt;.

       This manual page was written by Ceri Davies &lt;<u><a href="mailto:ceri@FreeBSD.org">ceri@FreeBSD.org</a></u>&gt;.

Debian                                          February 26, 2019                                   <u><a href="../man4/GEOM_UZIP.4.html">GEOM_UZIP</a></u>(4)
</pre>
 </div>
</div></section>
</div>
</body>
</html>