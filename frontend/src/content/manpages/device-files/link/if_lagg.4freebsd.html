<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>lagg — link aggregation and link failover interface</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/freebsd-manpages">freebsd-manpages_12.2-2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       lagg — link aggregation and link failover interface

</pre><h4><b>SYNOPSIS</b></h4><pre>
       To compile this driver into the kernel, place the following line in your kernel configuration file:

             <b>device</b> <b>lagg</b>

       Alternatively, to load the driver as a module at boot time, place the following line in <u><a href="../man5/loader.conf.5.html">loader.conf</a></u>(5):

             if_lagg_load="YES"

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The  <b>lagg</b>  interface  allows aggregation of multiple network interfaces as one virtual <b>lagg</b> interface for
       the purpose of providing fault-tolerance and high-speed links.

       A <b>lagg</b> interface can be created using the <b>ifconfig</b> <b>lagg</b><u>N</u> <b>create</b>  command.   It  can  use  different  link
       aggregation  protocols  specified  using the <b>laggproto</b> <u>proto</u> option.  Child interfaces can be added using
       the <b>laggport</b> <u>child-iface</u> option and removed using the <b>-laggport</b> <u>child-iface</u> option.

       The driver currently supports the  aggregation  protocols  <b>failover</b>  (the  default),  <b>lacp</b>,  <b>loadbalance</b>,
       <b>roundrobin</b>,  <b>broadcast</b>,  and <b>none</b>.  The protocols determine which ports are used for outgoing traffic and
       whether a specific port accepts incoming traffic.  The interface link state is used to  validate  if  the
       port is active or not.

       <b>failover</b>     Sends  traffic  only  through  the active port.  If the master port becomes unavailable, the
                    next active port is used.  The first interface added is  the  master  port;  any  interfaces
                    added after that are used as failover devices.

                    By  default,  received  traffic  is  only accepted when they are received through the active
                    port.  This constraint can be relaxed by setting the <u>net.link.lagg.failover_rx_all</u> <u><a href="../man8/sysctl.8.html">sysctl</a></u>(8)
                    variable to a nonzero value, which is useful for certain bridged network setups.

       <b>lacp</b>         Supports the IEEE 802.1AX (formerly 802.3ad) Link Aggregation Control  Protocol  (LACP)  and
                    the  Marker Protocol.  LACP will negotiate a set of aggregable links with the peer in to one
                    or more Link Aggregated Groups.  Each LAG is composed of ports of the  same  speed,  set  to
                    full-duplex  operation.   The  traffic will be balanced across the ports in the LAG with the
                    greatest total speed, in most cases there will only be one LAG which contains all ports.  In
                    the event of changes in physical connectivity, Link Aggregation will quickly converge  to  a
                    new configuration.

       <b>loadbalance</b>  Balances  outgoing  traffic  across  the  active  ports  based  on  hashed  protocol  header
                    information and accepts incoming traffic from any active port.  This is a static  setup  and
                    does  not  negotiate  aggregation with the peer or exchange frames to monitor the link.  The
                    hash includes the Ethernet source and destination address, and, if available, the VLAN  tag,
                    and the IP source and destination address.

       <b>roundrobin</b>   Distributes  outgoing  traffic  using  a  round-robin scheduler through all active ports and
                    accepts incoming traffic from any active port.  Using <b>roundrobin</b> mode  can  cause  unordered
                    packet  arrival  at  the  client.   Throughput  might be limited as the client performs CPU-
                    intensive packet reordering.

       <b>broadcast</b>    Sends frames to all ports of the LAG and receives frames on any port of the LAG.

       <b>none</b>         This protocol is intended to do nothing: it disables any traffic without disabling the  <b>lagg</b>
                    interface itself.

       Each  <b>lagg</b>  interface  is  created at runtime using interface cloning.  This is most easily done with the
       <u><a href="../man8/ifconfig.8.html">ifconfig</a></u>(8) <b>create</b> command or using the <u>cloned_interfaces</u> variable in <u><a href="../man5/rc.conf.5.html">rc.conf</a></u>(5).

       The MTU of the first interface to be added is used as  the  lagg  MTU.   All  additional  interfaces  are
       required to have exactly the same value.

       The  <b>loadbalance</b>  and  <b>lacp</b>  modes  will  use  the  RSS  hash from the network card if available to avoid
       computing one, this may give poor traffic distribution if the  hash  is  invalid  or  uses  less  of  the
       protocol  header  information.   Local  hash  computation  can  be  forced  per  interface by setting the
       <b>-use_flowid</b>   <u><a href="../man8/ifconfig.8.html">ifconfig</a></u>(8)   flag.    The   default    for    new    interfaces    is    set    via    the
       <u>net.link.lagg.default_use_flowid</u> <u><a href="../man8/sysctl.8.html">sysctl</a></u>(8).

</pre><h4><b>EXAMPLES</b></h4><pre>
       Create a link aggregation using LACP with two <u><a href="../man4/bge.4.html">bge</a></u>(4) Gigabit Ethernet interfaces:

             # ifconfig bge0 up
             # ifconfig bge1 up
             # ifconfig lagg0 create
             # ifconfig lagg0 laggproto lacp laggport bge0 laggport bge1 \
                     192.168.1.1 netmask 255.255.255.0

       Create  a  link aggregation using ROUNDROBIN with two <u><a href="../man4/bge.4.html">bge</a></u>(4) Gigabit Ethernet interfaces and set a stride
       of 500 packets per interface:

             # ifconfig bge0 up
             # ifconfig bge1 up
             # ifconfig lagg0 create
             # ifconfig lagg0 laggproto roundrobin laggport bge0 laggport bge1 \
                     192.168.1.1 netmask 255.255.255.0
             # ifconfig lagg0 rr_limit 500

       The following example uses an active failover interface to set up  roaming  between  wired  and  wireless
       networks  using  two  network  devices.   Whenever  the wired master interface is unplugged, the wireless
       failover device will be used:

             # ifconfig em0 up
             # ifconfig ath0 ether 00:11:22:33:44:55
             # ifconfig create wlan0 wlandev ath0 ssid my_net up
             # ifconfig lagg0 create
             # ifconfig lagg0 laggproto failover laggport em0 laggport wlan0 \
                     192.168.1.1 netmask 255.255.255.0

       (Note the mac address of the wireless device is forced to match the wired device as a workaround.)

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <u><a href="../man4/ng_one2many.4.html">ng_one2many</a></u>(4), <u><a href="../man8/ifconfig.8.html">ifconfig</a></u>(8), <u><a href="../man8/sysctl.8.html">sysctl</a></u>(8)

</pre><h4><b>HISTORY</b></h4><pre>
       The <b>lagg</b> device first appeared in FreeBSD 6.3.

</pre><h4><b>AUTHORS</b></h4><pre>
       The <b>lagg</b> driver was  written  under  the  name  <b>trunk</b>  by  Reyk  Floeter  &lt;<u><a href="mailto:reyk@openbsd.org">reyk@openbsd.org</a></u>&gt;.   The  LACP
       implementation was written by YAMAMOTO Takashi for NetBSD.

</pre><h4><b>BUGS</b></h4><pre>
       There  is  no  way to configure LACP administrative variables, including system and port priorities.  The
       current implementation always performs active-mode LACP and uses 0x8000 as system and port priorities.

Debian                                          November 18, 2017                                        <u><a href="../man4/LAGG.4.html">LAGG</a></u>(4)
</pre>
 </div>
</div></section>
</div>
</body>
</html>