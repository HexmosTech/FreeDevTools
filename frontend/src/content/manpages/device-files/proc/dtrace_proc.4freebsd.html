<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>dtrace_proc — a DTrace provider for tracing events related to user processes</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/freebsd-manpages">freebsd-manpages_12.2-2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       dtrace_proc — a DTrace provider for tracing events related to user processes

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>proc:::create</b>(<u>struct</u> <u>proc</u> <u>*</u>, <u>struct</u> <u>proc</u> <u>*</u>, <u>int</u>);

       <b>proc:::exec</b>(<u>char</u> <u>*</u>);

       <b>proc:::exec-failure</b>(<u>int</u>);

       <b>proc:::exec-success</b>(<u>char</u> <u>*</u>);

       <b>proc:::exit</b>(<u>int</u>);

       <b>proc:::signal-clear</b>(<u>int</u>, <u>ksiginfo_t</u> <u>*</u>);

       <b>proc:::signal-discard</b>(<u>struct</u> <u>thread</u> <u>*</u>, <u>struct</u> <u>proc</u> <u>*</u>, <u>int</u>);

       <b>proc:::signal-send</b>(<u>struct</u> <u>thread</u> <u>*</u>, <u>struct</u> <u>proc</u> <u>*</u>, <u>int</u>);

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The  DTrace  <b>proc</b>  provider  provides  insight  into events related to user processes: process and thread
       creation and termination events, and process signalling.

       The <b>proc:::create</b>() probe fires when a user process is created via the <u><a href="../man2/fork.2.html">fork</a></u>(2), <u><a href="../man2/vfork.2.html">vfork</a></u>(2),  <u><a href="../man2/pdfork.2.html">pdfork</a></u>(2),  or
       <u><a href="../man2/rfork.2.html">rfork</a></u>(2)  system  calls.   In particular, kernel processes created with the <u><a href="../man9/kproc.9.html">kproc</a></u>(9) KPI will not trigger
       this probe.  The <b>proc:::create</b>() probe's first two arguments are the new child process  and  its  parent,
       respectively.   The  third argument is a mask of <u><a href="../man2/rfork.2.html">rfork</a></u>(2) flags indicating which process resources are to
       be shared between the parent and child processes.

       The <b>proc:::exec</b>() probe fires when a process attempts to execute a file.  Its argument is  the  specified
       filename  for  the  file.  If the attempt fails because of an error, the <b>proc:::exec-failure</b>() probe will
       subsequently fire, providing the corresponding <u><a href="../man2/errno.2.html">errno</a></u>(2) value in  its  first  argument.   Otherwise,  the
       <b>proc:::exec-success</b>() probe will fire.

       The  <b>proc:::exit</b>()  probe fires when a process exits or is terminated.  Its argument is the corresponding
       SIGCHLD signal code; valid values are documented in the <u><a href="../man3/siginfo.3.html">siginfo</a></u>(3) manual page and defined  in  <u>signal.h</u>.
       For example, when a process exits normally, the value of args[0] will be CLD_EXITED.

       The  <b>proc:::signal-send</b>() probe fires when a signal is about to be sent to a process.  The <b>proc:::signal-</b>
       <b>discard</b>() probe fires when a signal is sent to a process that ignores it.  This probe will fire after the
       <b>proc:::signal-send</b>() probe for the signal in question.  The arguments to these probes are the thread  and
       process  to which the signal will be sent, and the signal number of the signal.  Valid signal numbers are
       defined in the <u><a href="../man3/signal.3.html">signal</a></u>(3) manual page.  The <b>proc:::signal-clear</b>() probe fires when a  pending  signal  has
       been  cleared  by  one of the <u><a href="../man2/sigwait.2.html">sigwait</a></u>(2), <u><a href="../man2/sigtimedwait.2.html">sigtimedwait</a></u>(2), or <u><a href="../man2/sigwaitinfo.2.html">sigwaitinfo</a></u>(2) system calls.  Its arguments
       are the signal number of the cleared signal, and a pointer to the corresponding signal information.   The
       <u>siginfo_t</u> for the signal can be obtained from args[1]-&gt;ksi_info.

</pre><h4><b>ARGUMENTS</b></h4><pre>
       Though  the  <b>proc</b>  provider probes use native FreeBSD arguments types, standard D types for processes and
       threads  are  available.   These  are  <u>psinfo_t</u>  and  <u>lwpsinfo_t</u>  respectively,  and   are   defined   in
       <u>/usr/lib/dtrace/psinfo.d</u>.   This file also defines two global variables, <u>curpsinfo</u> and <u>curlwpsinfo</u>, which
       provide representations of the current process and thread using these types.

       The fields of <u>psinfo_t</u> are:

             <u>int</u> <u>pr_nlwp</u>        Number of threads in the process.

             <u>pid_t</u> <u>pr_pid</u>       Process ID.

             <u>pid_t</u> <u>pr_ppid</u>      Process ID of the parent process, or 0 if the process does not have a parent.

             <u>pid_t</u> <u>pr_pgid</u>      Process ID of the process group leader.

             <u>pid_t</u> <u>pr_sid</u>       Session ID, or 0 if the process does not belong to a session.

             <u>pid_t</u> <u>pr_uid</u>       Real user ID.

             <u>pid_t</u> <u>pr_euid</u>      Effective user ID.

             <u>pid_t</u> <u>pr_gid</u>       Real group ID.

             <u>pid_t</u> <u>pr_egid</u>      Effective group ID.

             <u>uintptr_t</u> <u>pr_addr</u>  Pointer to the <u>struct</u> <u>proc</u> for the process.

             <u>string</u> <u>pr_psargs</u>   Process arguments.

             <u>u_int</u> <u>pr_arglen</u>    Length of the process argument string.

             <u>u_int</u> <u>pr_jailid</u>    Jail ID of the process.

       The fields of <u>lwpsinfo_t</u> are:

             <u>id_t</u> <u>pr_lwpid</u>       Thread ID.

             <u>int</u> <u>pr_flag</u>         Thread flags.

             <u>int</u> <u>pr_pri</u>          Real scheduling priority of the thread.

             <u>char</u> <u>pr_state</u>       Currently always 0.

             <u>char</u> <u>pr_sname</u>       Currently always ‘’?.

             <u>short</u> <u>pr_syscall</u>    Currently always 0.

             <u>uintptr_t</u> <u>pr_addr</u>   Pointer to the <u>struct</u> <u>thread</u> for the thread.

             <u>uintptr_t</u> <u>pr_wchan</u>  Current wait address on which the thread is sleeping.

</pre><h4><b>FILES</b></h4><pre>
       <u>/usr/lib/dtrace/psinfo.d</u>  DTrace type and translator definitions for the <b>proc</b> provider.

</pre><h4><b>EXAMPLES</b></h4><pre>
       The following script logs process execution events as they occur:

             #pragma D option quiet

             proc:::exec-success
             {
                     printf("%s", curpsinfo-&gt;pr_psargs);
             }

       Note that the pr_psargs field is subject to the limit defined by the <u>kern.ps_arg_cache_limit</u> sysctl.   In
       particular, processes with an argument list longer than the value defined by this sysctl cannot be logged
       in this way.

</pre><h4><b>COMPATIBILITY</b></h4><pre>
       The <b>proc</b> provider in FreeBSD is not compatible with the <b>proc</b> provider in Solaris.  In particular, FreeBSD
       uses  the  native  <u>struct</u>  <u>proc</u> and <u>struct</u> <u>thread</u> types for probe arguments rather than translated types.
       Additionally, a number of <b>proc</b> provider probes found in Solaris are not currently available on FreeBSD.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <u><a href="../man1/dtrace.1.html">dtrace</a></u>(1), <u><a href="../man2/errno.2.html">errno</a></u>(2), <u><a href="../man2/fork.2.html">fork</a></u>(2), <u><a href="../man2/pdfork.2.html">pdfork</a></u>(2),  <u><a href="../man2/rfork.2.html">rfork</a></u>(2),  <u><a href="../man2/vfork.2.html">vfork</a></u>(2),  <u><a href="../man3/siginfo.3.html">siginfo</a></u>(3),  <u><a href="../man3/signal.3.html">signal</a></u>(3),  <u><a href="../man4/dtrace_sched.4.html">dtrace_sched</a></u>(4),
       <u><a href="../man9/kproc.9.html">kproc</a></u>(9)

</pre><h4><b>HISTORY</b></h4><pre>
       The <b>proc</b> provider first appeared in FreeBSD 7.1.

</pre><h4><b>AUTHORS</b></h4><pre>
       This manual page was written by Mark Johnston &lt;<u><a href="mailto:markj@FreeBSD.org">markj@FreeBSD.org</a></u>&gt;.

Debian                                           April 17, 2016                                   <u><a href="../man4/DTRACE_PROC.4.html">DTRACE_PROC</a></u>(4)
</pre>
 </div>
</div></section>
</div>
</body>
</html>