<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>pim — Protocol Independent Multicast</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/freebsd-manpages">freebsd-manpages_12.2-2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       pim — Protocol Independent Multicast

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>options</b> <b>MROUTING</b>

       <b>#include</b> <b>&lt;sys/types.h&gt;</b>
       <b>#include</b> <b>&lt;sys/socket.h&gt;</b>
       <b>#include</b> <b>&lt;<a href="file:/usr/include/netinet/in.h">netinet/in.h</a>&gt;</b>
       <b>#include</b> <b>&lt;netinet/ip_mroute.h&gt;</b>
       <b>#include</b> <b>&lt;netinet/pim.h&gt;</b>

       <u>int</u>
       <b>getsockopt</b>(<u>int</u> <u>s</u>, <u>IPPROTO_IP</u>, <u>MRT_PIM</u>, <u>void</u> <u>*optval</u>, <u>socklen_t</u> <u>*optlen</u>);

       <u>int</u>
       <b>setsockopt</b>(<u>int</u> <u>s</u>, <u>IPPROTO_IP</u>, <u>MRT_PIM</u>, <u>const</u> <u>void</u> <u>*optval</u>, <u>socklen_t</u> <u>optlen</u>);

       <u>int</u>
       <b>getsockopt</b>(<u>int</u> <u>s</u>, <u>IPPROTO_IPV6</u>, <u>MRT6_PIM</u>, <u>void</u> <u>*optval</u>, <u>socklen_t</u> <u>*optlen</u>);

       <u>int</u>
       <b>setsockopt</b>(<u>int</u> <u>s</u>, <u>IPPROTO_IPV6</u>, <u>MRT6_PIM</u>, <u>const</u> <u>void</u> <u>*optval</u>, <u>socklen_t</u> <u>optlen</u>);

</pre><h4><b>DESCRIPTION</b></h4><pre>
       PIM  is the common name for two multicast routing protocols: Protocol Independent Multicast - Sparse Mode
       (PIM-SM) and Protocol Independent Multicast - Dense Mode (PIM-DM).

       PIM-SM is a multicast routing protocol that can use the underlying unicast routing information base or  a
       separate  multicast-capable  routing information base.  It builds unidirectional shared trees rooted at a
       Rendezvous Point (RP) per group, and optionally creates shortest-path trees per source.

       PIM-DM is a multicast routing protocol that uses the underlying unicast routing information base to flood
       multicast datagrams to all multicast routers.  Prune messages are used to prevent future  datagrams  from
       propagating to routers with no group membership information.

       Both  PIM-SM and PIM-DM are fairly complex protocols, though PIM-SM is much more complex.  To enable PIM-
       SM or PIM-DM multicast routing in a router, the user must enable multicast routing and PIM processing  in
       the  kernel  (see  “SYNOPSIS”  about  the  kernel configuration options), and must run a PIM-SM or PIM-DM
       capable user-level process.  From developer's point of view,  the  programming  guide  described  in  the
       “Programming Guide” section should be used to control the PIM processing in the kernel.

   <b>Programming</b> <b>Guide</b>
       After  a  multicast  routing  socket  is  open  and  multicast  forwarding  is enabled in the kernel (see
       <u><a href="../man4/multicast.4.html">multicast</a></u>(4)), one of the following socket options should be used to enable or disable PIM processing  in
       the kernel.  Note that those options require certain privilege (i.e., root privilege):

       /* IPv4 */
       int v = 1;        /* 1 to enable, or 0 to disable */
       setsockopt(mrouter_s4, IPPROTO_IP, MRT_PIM, (void *)&amp;v, sizeof(v));

       /* IPv6 */
       int v = 1;        /* 1 to enable, or 0 to disable */
       setsockopt(mrouter_s6, IPPROTO_IPV6, MRT6_PIM, (void *)&amp;v, sizeof(v));

       After PIM processing is enabled, the multicast-capable interfaces should be added (see <u><a href="../man4/multicast.4.html">multicast</a></u>(4)).  In
       case  of  PIM-SM,  the PIM-Register virtual interface must be added as well.  This can be accomplished by
       using the following options:

       /* IPv4 */
       struct vifctl vc;
       memset(&amp;vc, 0, sizeof(vc));
       /* Assign all vifctl fields as appropriate */
       ...
       if (is_pim_register_vif)
           vc.vifc_flags |= VIFF_REGISTER;
       setsockopt(mrouter_s4, IPPROTO_IP, MRT_ADD_VIF, (void *)&amp;vc,
                  sizeof(vc));

       /* IPv6 */
       struct mif6ctl mc;
       memset(&amp;mc, 0, <a href="../manmc/sizeof.mc.html">sizeof</a>(mc));
       /* Assign all mif6ctl fields as appropriate */
       ...
       if (is_pim_register_vif)
           mc.mif6c_flags |= MIFF_REGISTER;
       setsockopt(mrouter_s6, IPPROTO_IPV6, MRT6_ADD_MIF, (void *)&amp;mc,
                  <a href="../manmc/sizeof.mc.html">sizeof</a>(mc));

       Sending or receiving of PIM packets can be accomplished by opening first a “raw socket” (see  <u><a href="../man2/socket.2.html">socket</a></u>(2)),
       with protocol value of IPPROTO_PIM:

       /* IPv4 */
       int pim_s4;
       pim_s4 = socket(AF_INET, SOCK_RAW, IPPROTO_PIM);

       /* IPv6 */
       int pim_s6;
       pim_s6 = socket(AF_INET6, SOCK_RAW, IPPROTO_PIM);

       Then,  the  following  system  calls  can  be used to send or receive PIM packets: <u><a href="../man2/sendto.2.html">sendto</a></u>(2), <u><a href="../man2/sendmsg.2.html">sendmsg</a></u>(2),
       <u><a href="../man2/recvfrom.2.html">recvfrom</a></u>(2), <u><a href="../man2/recvmsg.2.html">recvmsg</a></u>(2).

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <u><a href="../man2/getsockopt.2.html">getsockopt</a></u>(2),  <u><a href="../man2/recvfrom.2.html">recvfrom</a></u>(2),  <u><a href="../man2/recvmsg.2.html">recvmsg</a></u>(2),  <u><a href="../man2/sendmsg.2.html">sendmsg</a></u>(2),  <u><a href="../man2/sendto.2.html">sendto</a></u>(2),  <u><a href="../man2/setsockopt.2.html">setsockopt</a></u>(2),  <u><a href="../man2/socket.2.html">socket</a></u>(2),   <u><a href="../man4/inet.4.html">inet</a></u>(4),
       <u><a href="../man4/intro.4.html">intro</a></u>(4), <u><a href="../man4/ip.4.html">ip</a></u>(4), <u><a href="../man4/multicast.4.html">multicast</a></u>(4)

</pre><h4><b>STANDARDS</b></h4><pre>
       The  PIM-SM protocol is specified in RFC 2362 (to be replaced by <u>draft-ietf-pim-sm-v2-new-*</u>).  The PIM-DM
       protocol is specified in <u>draft-ietf-pim-dm-new-v2-*</u>).

</pre><h4><b>AUTHORS</b></h4><pre>
       The original IPv4 PIM kernel support for IRIX and SunOS-4.x was implemented by Ahmed Helmy (USC and SGI).
       Later the code was ported to various BSD flavors and  modified  by  George  Edmond  Eddy  (Rusty)  (ISI),
       Hitoshi Asaeda (WIDE Project), and Pavlin Radoslavov (USC/ISI and ICSI).  The IPv6 PIM kernel support was
       implemented by the KAME project (<u><a href="http://www.kame.net">http://www.kame.net</a></u>), and was based on the IPv4 PIM kernel support.

       This manual page was written by Pavlin Radoslavov (ICSI).

Debian                                          February 12, 2007                                         <u><a href="../man4/PIM.4.html">PIM</a></u>(4)
</pre>
 </div>
</div></section>
</div>
</body>
</html>