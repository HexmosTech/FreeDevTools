<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ctl — CAM Target Layer</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/freebsd-manpages">freebsd-manpages_12.2-2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       ctl — CAM Target Layer

</pre><h4><b>SYNOPSIS</b></h4><pre>
       To compile this driver into the kernel, place the following line in your kernel configuration file:

             <b>device</b> <b>ctl</b>

       Alternatively, to load the driver as a module at boot time, place the following line in <u><a href="../man5/loader.conf.5.html">loader.conf</a></u>(5):

             ctl_load="YES"

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The <b>ctl</b> subsystem provides SCSI target devices emulation.  It supports features such as:

       <b>•</b>   Disk, CD-ROM and processor device emulation
       <b>•</b>   Tagged queueing
       <b>•</b>   SCSI task attribute support (ordered, head of queue, simple tags)
       <b>•</b>   SCSI implicit command ordering support
       <b>•</b>   Full task management support (abort, query, reset, etc.)
       <b>•</b>   Support for multiple ports, initiators, targets and backing stores
       <b>•</b>   Support  for  VMWare  VAAI  and Microsoft ODX offload (COMPARE AND WRITE, XCOPY, POPULATE TOKEN/WRITE
           USING TOKEN, WRITE SAME and UNMAP)
       <b>•</b>   Persistent reservation support
       <b>•</b>   Extensive VPD/mode/log pages support
       <b>•</b>   Featured error reporting, error injection and basic SMART support
       <b>•</b>   High Availability clustering support with ALUA
       <b>•</b>   All I/O handled in-kernel, no userland context switch overhead

       The <b>ctl</b> subsystem includes multiple frontends to provide access using different transport  protocols  and
       implementations:

       camsim   Provides access for local system via virtual initiator mode <u><a href="../man4/CAM.4.html">CAM</a></u>(4) SIM.

       camtgt   Provides access for remote systems via target mode <u><a href="../man4/CAM.4.html">CAM</a></u>(4) SIMs, such as Fibre Channel <u><a href="../man4/isp.4.html">isp</a></u>(4) and
                <u><a href="../man4/mpt.4.html">mpt</a></u>(4).

       cfumass  Provides access for remote systems via USB Mass Storage Class Bulk Only (BBB) Transport.

       ha       Internal frontend used to receive requests from other node ports in High Availability cluster.

       ioctl    Provides access for local user-level applications via <u><a href="../man2/ioctl.2.html">ioctl</a></u>(2) based API.

       iscsi    Provides access for remote systems via the iSCSI protocol using <u><a href="../man4/cfiscsi.4.html">cfiscsi</a></u>(4).

       tpc      Internal  frontend  used  to  receive  requests  from Third Party Copy engine, implementing copy
                offload operations.

       The <b>ctl</b> subsystem includes two backends to create logical units using different kinds of backing stores:

       block    Stores data in ZFS ZVOLs, files or raw block devices.

       ramdisk  Stores data in RAM,  that  makes  it  mostly  useful  for  performance  testing.   Depending  on
                configured capacity can work as black hole, thin or thick provisioned disk.

</pre><h4><b>SYSCTL</b> <b>VARIABLES</b></h4><pre>
       The following variables are available as both <u><a href="../man8/sysctl.8.html">sysctl</a></u>(8) variables and <u><a href="../man8/loader.8.html">loader</a></u>(8) tunables:

       <u>kern.cam.ctl.debug</u>
               Bit mask of enabled CTL log levels:
                     1       log commands with errors;
                     2       log all commands;
                     4       log data for commands other then READ/WRITE.
               Defaults to 0.

       <u>kern.cam.ctl.ha_id</u>
               Specifies  unique position of this node within High Availability cluster.  Default is 0 -- no HA,
               1 and 2 -- HA enabled at specified position.

       <u>kern.cam.ctl.ha_mode</u>
               Specifies High Availability cluster operation mode:
                     0       Active/Standby -- primary node has backend access  and  processes  requests,  while
                             secondary can only do basic LUN discovery and reservation;
                     1       Active/Active  --  both  nodes  have  backend  access  and  process requests, while
                             secondary node synchronizes processing with primary one;
                     2       Active/Active -- primary node has backend  access  and  processes  requests,  while
                             secondary node forwards all requests and data to primary one;
               All  above  modes  require established connection between HA cluster nodes.  If connection is not
               configured, secondary node will report Unavailable state; if configured but  not  established  --
               Transitioning state.  Defaults to 0.

       <u>kern.cam.ctl.ha_peer</u>
               String  value,  specifying  method  to  establish  connection  to  peer  HA node.  Can be "listen
               IP:port", "connect IP:port" or empty.

       <u>kern.cam.ctl.ha_link</u>
               Reports present state of connection between HA cluster nodes:
                     0       not configured;
                     1       configured but not established;
                     2       established.

       <u>kern.cam.ctl.ha_role</u>
               Specifies default role of this node:
                     0       primary;
                     1       secondary.
               This role can be overridden on per-LUN basis using "ha_role" LUN option, so that for one LUN  one
               node  is  primary,  while  for  another -- another.  Role change from primary to secondary for HA
               modes 0 and 2 closes backends, the opposite change -- opens.  If there is no primary  node  (both
               nodes  are  secondary,  or  secondary  node  has no connection to primary one), secondary node(s)
               report Transitioning state.  State with two primary nodes is illegal (split brain condition).

</pre><h4><b>TUNABLE</b> <b>VARIABLES</b></h4><pre>
       The following variables are available as <u><a href="../man8/loader.8.html">loader</a></u>(8) tunables:

       <u>kern.cam.ctl.max_luns</u>
               Specifies the maximum number of LUNs we support, must be a power of  2.   The  default  value  is
               1024.

       <u>kern.cam.ctl.max_ports</u>
               Specifies  the  maximum  number  of ports we support, must be a power of 2.  The default value is
               256.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <u><a href="../man4/cfiscsi.4.html">cfiscsi</a></u>(4), <u><a href="../man4/cfumass.4.html">cfumass</a></u>(4), <u><a href="../man8/ctladm.8.html">ctladm</a></u>(8), <u><a href="../man8/ctld.8.html">ctld</a></u>(8), <u><a href="../man8/ctlstat.8.html">ctlstat</a></u>(8)

</pre><h4><b>HISTORY</b></h4><pre>
       The <b>ctl</b> subsystem first appeared in FreeBSD 9.1.

</pre><h4><b>AUTHORS</b></h4><pre>
       The <b>ctl</b> subsystem was originally written by Kenneth Merry &lt;<u><a href="mailto:ken@FreeBSD.org">ken@FreeBSD.org</a></u>&gt;.  Later work was done by
       Alexander Motin &lt;<u><a href="mailto:mav@FreeBSD.org">mav@FreeBSD.org</a></u>&gt;.

Debian                                           March 29, 2017                                           <u><a href="../man4/CTL.4.html">CTL</a></u>(4)
</pre>
 </div>
</div></section>
</div>
</body>
</html>