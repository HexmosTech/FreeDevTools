<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ng_ether — Ethernet netgraph node type</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/freebsd-manpages">freebsd-manpages_12.2-2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       ng_ether — Ethernet netgraph node type

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;netgraph/ng_ether.h&gt;</b>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The  <b>ether</b>  netgraph  node  type  allows  Ethernet interfaces to interact with the <u><a href="../man4/netgraph.4.html">netgraph</a></u>(4) networking
       subsystem.  Once the <b>ng_ether</b> module is loaded into the kernel, a node is automatically created for  each
       Ethernet  interface  in  the  system.   Each  node  will attempt to name itself with the same name as the
       associated interface.

       Three hooks are supported: <u>lower</u>, <u>upper</u>, and <u>orphans</u>.  The hook name <u>divert</u> may be used as an  alias  for
       <u>lower</u>, and is provided for backward compatibility.  In reality, the two names represent the same hook.

       The  <u>lower</u>  hook  is  a  connection to the raw Ethernet device.  When connected, all incoming packets are
       forwarded to this hook, instead of being passed to the kernel for upper  layer  processing.   Writing  to
       this  hook  results in a raw Ethernet frame being transmitted by the device.  Normal outgoing packets are
       not affected by <u>lower</u> being connected.

       The <u>upper</u> hook is a connection to the upper protocol layers.  When connected, all  outgoing  packets  are
       forwarded  to  this  hook, instead of being transmitted by the device.  Writing to this hook results in a
       raw Ethernet frame being received by the kernel just as if it had come in over the wire.  Normal incoming
       packets are not affected by <u>upper</u> being connected.

       The <u>orphans</u> hook is equivalent to <u>lower</u>, except that only unrecognized packets (that would  otherwise  be
       discarded)  are  written  to  the  hook, while other normal incoming traffic is unaffected.  Unrecognized
       packets written to <u>upper</u> will be forwarded back out to <u>orphans</u> if connected.

       In all cases, frames are raw Ethernet frames with the standard 14 byte Ethernet header (but no checksum).

       When no hooks are connected, <u>upper</u> and <u>lower</u> are in effect  connected  together,  so  that  packets  flow
       normally upwards and downwards.

</pre><h4><b>HOOKS</b></h4><pre>
       This node type supports the following hooks:

       <u>lower</u>    Connection to the lower device link layer.

       <u>upper</u>    Connection to the upper protocol layers.

       <u>orphans</u>  Like <u>lower</u>, but only receives unrecognized packets.

</pre><h4><b>CONTROL</b> <b>MESSAGES</b></h4><pre>
       This node type supports the generic control messages, plus the following:

       NGM_ETHER_GET_IFNAME (<b>getifname</b>)
            Returns the name of the associated interface as a NUL-terminated ASCII string.  Normally this is the
            same as the name of the node.

       NGM_ETHER_GET_IFINDEX (<b>getifindex</b>)
            Returns the global index of the associated interface as a 32 bit integer.

       NGM_ETHER_GET_ENADDR (<b>getenaddr</b>)
            Returns the device's unique six byte Ethernet address.

       NGM_ETHER_SET_ENADDR (<b>setenaddr</b>)
            Sets the device's unique six byte Ethernet address.  This control message is equivalent to using the
            SIOCSIFLLADDR <u><a href="../man2/ioctl.2.html">ioctl</a></u>(2) system call.

       NGM_ETHER_SET_PROMISC (<b>setpromisc</b>)
            Enable or disable promiscuous mode.  This message includes a single 32 bit integer flag that enables
            or disables promiscuous mode on the interface.  Any non-zero value enables promiscuous mode.

       NGM_ETHER_GET_PROMISC (<b>getpromisc</b>)
            Get  the  current  value of the node's promiscuous flag.  The returned value is always either one or
            zero.  Note that this flag reflects the node's own promiscuous  setting  and  does  not  necessarily
            reflect  the  promiscuous state of the actual interface, which can be affected by other means (e.g.,
            <u><a href="../man4/bpf.4.html">bpf</a></u>(4)).

       NGM_ETHER_SET_AUTOSRC (<b>setautosrc</b>)
            Sets the automatic source address override flag.  This message includes a single 32 bit integer flag
            that causes all outgoing packets to have their source Ethernet address field  overwritten  with  the
            device's  unique  Ethernet  address.   If  this  flag is set to zero, the source address in outgoing
            packets is not modified.  The default setting for this flag is disabled.

       NGM_ETHER_GET_AUTOSRC (<b>getautosrc</b>)
            Get the current value of the node's source address override flag.   The  returned  value  is  always
            either one or zero.

       NGM_ETHER_ADD_MULTI (<b>addmulti</b>)
            Join  Ethernet  multicast  group.   This  control  message  is  equivalent to using the SIOCADDMULTI
            <u><a href="../man2/ioctl.2.html">ioctl</a></u>(2) system call.

       NGM_ETHER_DEL_MULTI (<b>delmulti</b>)
            Leave Ethernet multicast group.  This control  message  is  equivalent  to  using  the  SIOCDELMULTI
            <u><a href="../man2/ioctl.2.html">ioctl</a></u>(2) system call.

       NGM_ETHER_DETACH (<b>detach</b>)
            Detach from underlying Ethernet interface and shut down node.

</pre><h4><b>SHUTDOWN</b></h4><pre>
       Upon  receipt  of  the  NGM_SHUTDOWN  control  message,  all  hooks are disconnected, promiscuous mode is
       disabled, but the node is not removed.  Node  can  be  shut  down  only  using  NGM_ETHER_DETACH  control
       message.   If the interface itself is detached (e.g., because of PC Card removal), the node disappears as
       well.

</pre><h4><b>EXAMPLES</b></h4><pre>
       This command dumps all unrecognized packets received by the “<b>fxp0</b>” interface to standard  output  decoded
       in hex and ASCII:

             <b>nghook</b> <b>-a</b> <b>fxp0:</b> <b>orphans</b>

       This command sends the contents of <u>sample.pkt</u> out the interface “<b>fxp0</b>”:

             <b>cat</b> <b>sample.pkt</b> <b>|</b> <b>nghook</b> <b>fxp0:</b> <b>orphans</b>

       These  commands  insert  an <u><a href="../man4/ng_tee.4.html">ng_tee</a></u>(4) node between the <u>lower</u> and <u>upper</u> protocol layers, which can be used
       for tracing packet flow, statistics, etc.:

             ngctl mkpeer fxp0: tee lower right
             ngctl connect fxp0: lower upper left

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <u><a href="../man4/arp.4.html">arp</a></u>(4), <u><a href="../man4/netgraph.4.html">netgraph</a></u>(4), <u><a href="../man4/netintro.4.html">netintro</a></u>(4), <u><a href="../man8/ifconfig.8.html">ifconfig</a></u>(8), <u><a href="../man8/ngctl.8.html">ngctl</a></u>(8), <u><a href="../man8/nghook.8.html">nghook</a></u>(8)

</pre><h4><b>AUTHORS</b></h4><pre>
       Julian Elischer &lt;<u><a href="mailto:julian@FreeBSD.org">julian@FreeBSD.org</a></u>&gt;
       Archie Cobbs &lt;<u><a href="mailto:archie@FreeBSD.org">archie@FreeBSD.org</a></u>&gt;

</pre><h4><b>BUGS</b></h4><pre>
       The automatic KLD module loading mechanism that works for most other Netgraph node types  does  not  work
       for  the  <b>ether</b>  node type, because <b>ether</b> nodes are not created on demand; instead, they are created when
       Ethernet interfaces are attached or when the  KLD  is  first  loaded.   Therefore,  if  the  KLD  is  not
       statically compiled into the kernel, it is necessary to load the KLD manually in order to bring the <b>ether</b>
       nodes into existence.

Debian                                            June 23, 2011                                      <u><a href="../man4/NG_ETHER.4.html">NG_ETHER</a></u>(4)
</pre>
 </div>
</div></section>
</div>
</body>
</html>