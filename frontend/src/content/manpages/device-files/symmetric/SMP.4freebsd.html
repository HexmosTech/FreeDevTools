<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SMP — description of the FreeBSD Symmetric Multi-Processor kernel</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/freebsd-manpages">freebsd-manpages_12.2-2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       SMP — description of the FreeBSD Symmetric Multi-Processor kernel

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>options</b> <b>SMP</b>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The <b>SMP</b> kernel implements symmetric multi-processor support.

       <b>SMP</b> support can be disabled by setting the loader tunable <u>kern.smp.disabled</u> to 1.

       The number of CPUs detected by the system is available in the read-only sysctl variable <u>hw.ncpu</u>.

       The   number   of   online   threads  per  CPU  core  is  available  in  the  read-only  sysctl  variable
       <u>kern.smp.threads_per_core</u>.  The number of physical CPU cores detected by the system is available  in  the
       read-only sysctl variable <u>kern.smp.cores</u>.

       FreeBSD  allows  specific  CPUs  on  a multi-processor system to be disabled.  This can be done using the
       <u>hint.lapic.X.disabled</u> tunable, where X is the APIC ID of a CPU.  Setting this tunable to 1 will result in
       the corresponding CPU being disabled.

       FreeBSD supports simultaneous multithreading on x86 and powerpc platforms.  On x86, the logical CPUs  can
       be disabled by setting the <u>machdep.hyperthreading_allowed</u> tunable to zero.

       The  <u><a href="../man4/sched_ule.4.html">sched_ule</a></u>(4)  scheduler  implements  CPU topology detection and adjusts the scheduling algorithms to
       make better use of modern multi-core CPUs.  The sysctl  variable  <u>kern.sched.topology_spec</u>  reflects  the
       detected CPU hardware in a parsable XML format.  The top level XML tag is &lt;groups&gt;, which encloses one or
       more  &lt;group&gt;  tags  containing  data  about  individual  CPU groups.  A CPU group contains CPUs that are
       detected to be "close" together, usually by being cores in a  single  multi-core  processor.   Attributes
       available  in  a &lt;group&gt; tag are "level", corresponding to the nesting level of the CPU group and "cache-
       level", corresponding to the level of CPU caches shared by the  CPUs  in  the  group.   The  &lt;group&gt;  tag
       contains  the  &lt;cpu&gt;  and  &lt;flags&gt;  tags.  The &lt;cpu&gt; tag describes CPUs in the group.  Its attributes are
       "count", corresponding to the number of CPUs in the group and "mask", corresponding to the integer binary
       mask in which each bit position set to 1 signifies a CPU belonging to the group.  The contents (CDATA) of
       the &lt;cpu&gt; tag is the comma-delimited list of CPU  indexes  (derived  from  the  "mask"  attribute).   The
       &lt;flags&gt;  tag  contains  special  tags  (if  any)  describing  the relation of the CPUs in the group.  The
       possible flags are currently "HTT" and "SMT", corresponding to the various  implementations  of  hardware
       multithreading.  An example topology_spec output for a system consisting of two quad-core processors is:

       &lt;groups&gt;
         &lt;group level="1" cache-level="0"&gt;
           &lt;cpu count="8" mask="0xff"&gt;0, 1, 2, 3, 4, 5, 6, 7&lt;/cpu&gt;
           &lt;flags&gt;&lt;/flags&gt;
           &lt;children&gt;
             &lt;group level="2" cache-level="0"&gt;
               &lt;cpu count="4" mask="0xf"&gt;0, 1, 2, 3&lt;/cpu&gt;
               &lt;flags&gt;&lt;/flags&gt;
             &lt;/group&gt;
             &lt;group level="2" cache-level="0"&gt;
               &lt;cpu count="4" mask="0xf0"&gt;4, 5, 6, 7&lt;/cpu&gt;
               &lt;flags&gt;&lt;/flags&gt;
             &lt;/group&gt;
           &lt;/children&gt;
         &lt;/group&gt;
       &lt;/groups&gt;

       This  information  is  used  internally  by the kernel to schedule related tasks on CPUs that are closely
       grouped together.

</pre><h4><b>COMPATIBILITY</b></h4><pre>
       Support for multi-processor systems is present for  all  Tier-1  and  Tier-2  architectures  on  FreeBSD.
       Currently,  this  includes  x86, powerpc, arm, and sparc64.  Support is enabled using <b>options</b> <b>SMP</b>.  It is
       permissible to use the SMP kernel configuration on non-SMP hardware.

</pre><h4><b>I386</b> <b>NOTES</b></h4><pre>
       For i386 systems, the <b>SMP</b> kernel supports motherboards that follow the Intel  MP  specification,  version
       1.4.   In addition to <b>options</b> <b>SMP</b>, i386 also requires <b>device</b> <b>apic</b>.  The <u><a href="../man1/mptable.1.html">mptable</a></u>(1) command may be used to
       view the status of multi-processor support.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <u><a href="../man1/cpuset.1.html">cpuset</a></u>(1),  <u><a href="../man1/mptable.1.html">mptable</a></u>(1),  <u><a href="../man4/sched_4bsd.4.html">sched_4bsd</a></u>(4),  <u><a href="../man4/sched_ule.4.html">sched_ule</a></u>(4),  <u><a href="../man8/loader.8.html">loader</a></u>(8),  <u><a href="../man8/sysctl.8.html">sysctl</a></u>(8),   <u><a href="../man9/condvar.9.html">condvar</a></u>(9),   <u><a href="../man9/msleep.9.html">msleep</a></u>(9),
       <u><a href="../man9/mtx_pool.9.html">mtx_pool</a></u>(9), <u><a href="../man9/mutex.9.html">mutex</a></u>(9), <u><a href="../man9/rwlock.9.html">rwlock</a></u>(9), <u><a href="../man9/sema.9.html">sema</a></u>(9), <u><a href="../man9/sx.9.html">sx</a></u>(9)

</pre><h4><b>HISTORY</b></h4><pre>
       The  <b>SMP</b>  kernel's  early  history is not (properly) recorded.  It was developed in a separate CVS branch
       until April 26, 1997, at which point it was merged  into  3.0-current.   By  this  date  3.0-current  had
       already been merged with Lite2 kernel code.

       FreeBSD  5.0  introduced  support  for a host of new synchronization primitives, and a move towards fine-
       grained kernel locking rather than reliance on a Giant kernel lock.  The SMPng Project relied heavily  on
       the support of BSDi, who provided reference source code from the fine-grained SMP implementation found in
       BSD/OS.

       FreeBSD 5.0 also introduced support for SMP on the sparc64 architecture.

</pre><h4><b>AUTHORS</b></h4><pre>
       Steve Passe &lt;<u><a href="mailto:fsmp@FreeBSD.org">fsmp@FreeBSD.org</a></u>&gt;

</pre><h4><b>CAVEATS</b></h4><pre>
       The  <u>kern.smp.threads_per_core</u>  and  <u>kern.smp.cores</u> sysctl variables are provided as a best-effort guess.
       If an architecture or platform adds SMT and FreeBSD has  not  yet  implemented  detection,  the  reported
       values  may be inaccurate.  In this case, <u>kern.smp.threads_per_core</u> will report 1 and <u>kern.smp.cores</u> will
       report the same value as <u>hw.ncpu</u>.

Debian                                           January 4, 2019                                          <u><a href="../man4/SMP.4.html">SMP</a></u>(4)
</pre>
 </div>
</div></section>
</div>
</body>
</html>