<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ng_vlan — IEEE 802.1Q VLAN tagging netgraph node type</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/freebsd-manpages">freebsd-manpages_12.2-2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       ng_vlan — IEEE 802.1Q VLAN tagging netgraph node type

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;sys/types.h&gt;</b>
       <b>#include</b> <b>&lt;netgraph.h&gt;</b>
       <b>#include</b> <b>&lt;netgraph/ng_vlan.h&gt;</b>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The  <b>vlan</b>  node  type  multiplexes  frames tagged according to the IEEE 802.1Q standard between different
       hooks.

       Each node has two special hooks, <u>downstream</u> and <u>nomatch</u>, and an arbitrary number of  “vlan”  hooks,  each
       associated with a particular VLAN tag.

       An  ETHERTYPE_VLAN  frame received on the <u>downstream</u> hook with a tag that the node has been configured to
       filter is sent out the corresponding “vlan” hook.  If it does not match any of the configured tags, or is
       not of a type ETHERTYPE_VLAN, it is sent out the <u>nomatch</u> hook.  If the <u>nomatch</u> hook is not connected, the
       packet is dropped.

       An Ethernet frame received on the <u>nomatch</u> hook is passed unmodified to the <u>downstream</u> hook.

       An Ethernet frame received on any of the “vlan” hooks is tagged accordingly and sent out  the  <u>downstream</u>
       hook.

</pre><h4><b>HOOKS</b></h4><pre>
       This node type supports the following hooks:

       <u>downstream</u>            Typically this hook would be connected to a <u><a href="../man4/ng_ether.4.html">ng_ether</a></u>(4) node, using the <u>lower</u> hook.

       <u>nomatch</u>               Typically  this  hook would also be connected to an <u><a href="../man4/ng_ether.4.html">ng_ether</a></u>(4) type node using the
                             <u>upper</u> hook.

       ⟨<u>any</u> <u>valid</u> <u>name</u>⟩      Any other hook name will  be  accepted  and  should  later  be  associated  with  a
                             particular tag.  Typically this hook would be attached to an <u><a href="../man4/ng_eiface.4.html">ng_eiface</a></u>(4) type node
                             using the <u>ether</u> hook.

</pre><h4><b>CONTROL</b> <b>MESSAGES</b></h4><pre>
       This node type supports the generic control messages, plus the following:

       NGM_VLAN_ADD_FILTER (<b>addfilter</b>)
            Associates a hook with the tag.

       NGM_VLAN_DEL_FILTER (<b>delfilter</b>)
            Disassociates a hook from the tag.

       NGM_VLAN_GET_TABLE (<b>gettable</b>)
            Returns a table of all hook/tag associations.

</pre><h4><b>EXAMPLES</b></h4><pre>
       #!<a href="file:/bin/sh">/bin/sh</a>

       ETHER_IF=rl0

       ngctl -f- &lt;&lt;EOF
       shutdown ${ETHER_IF}:
       mkpeer ${ETHER_IF}: vlan lower downstream
       name ${ETHER_IF}:lower vlan
       connect ${ETHER_IF}: vlan: upper nomatch
       EOF

       ngctl mkpeer vlan: eiface vlan123 ether
       ngctl msg vlan: addfilter '{ vlan=123 hook="vlan123" }'

</pre><h4><b>SHUTDOWN</b></h4><pre>
       This  node  shuts  down  upon  receipt  of  a  NGM_SHUTDOWN  control message, or when all hooks have been
       disconnected.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <u><a href="../man4/netgraph.4.html">netgraph</a></u>(4), <u><a href="../man4/ng_eiface.4.html">ng_eiface</a></u>(4), <u><a href="../man4/ng_ether.4.html">ng_ether</a></u>(4), <u><a href="../man8/ngctl.8.html">ngctl</a></u>(8), <u><a href="../man8/nghook.8.html">nghook</a></u>(8)

</pre><h4><b>HISTORY</b></h4><pre>
       The <b>ng_vlan</b> node type appeared in FreeBSD 4.10.

</pre><h4><b>AUTHORS</b></h4><pre>
       Ruslan Ermilov &lt;<u><a href="mailto:ru@FreeBSD.org">ru@FreeBSD.org</a></u>&gt;

Debian                                            March 1, 2004                                       <u><a href="../man4/NG_VLAN.4.html">NG_VLAN</a></u>(4)
</pre>
 </div>
</div></section>
</div>
</body>
</html>