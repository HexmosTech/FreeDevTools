<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>nda — NVMe Direct Access device driver</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/freebsd-manpages">freebsd-manpages_12.2-2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       nda — NVMe Direct Access device driver

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>device</b> <b>nvme</b>
       <b>device</b> <b>scbus</b>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The  <b>nda</b>  driver provides support for direct access devices, implementing the NVMe command protocol, that
       are attached to the system through a host adapter supported by the CAM subsystem.

</pre><h4><b>SYSCTL</b> <b>VARIABLES</b></h4><pre>
       The following variables are available as both <u><a href="../man8/sysctl.8.html">sysctl</a></u>(8) variables and <u><a href="../man8/loader.8.html">loader</a></u>(8) tunables:

       <u>hw.nvme.use_nvd</u>
           The <u><a href="../man4/nvme.4.html">nvme</a></u>(4) driver will create <b>nda</b> device nodes for block storage  when  set  to  0.   Create  <u><a href="../man4/nvd.4.html">nvd</a></u>(4)
           device nodes for block storage when set to 1.  See <u><a href="../man4/nvd.4.html">nvd</a></u>(4) when set to 1.

       <u>kern.cam.nda.nvd_compat</u>
           When  set  to  1,  <u><a href="../man4/nvd.4.html">nvd</a></u>(4) aliases will be created for all <b>nda</b> devices, including partitions and other
           <u><a href="../man4/geom.4.html">geom</a></u>(4) providers that take their names from the disk's name.  <u>nvd</u>  devices  will  not,  however,  be
           reported in the <u>kern.disks</u> <u><a href="../man8/sysctl.8.html">sysctl</a></u>(8).

       <u>kern.cam.nda.sort_io_queue</u>
           This variable determines whether the software queued entries are sorted in LBA order or not.  Sorting
           is almost always a waste of time.  The default is to not sort.

       <u>kern.cam.nda.enable_biospeedup</u>
           This  variable  determines  if  the <b>nda</b> devices participate in the speedup protocol.  When the device
           participates in the speedup, then when the upper layers send a <u>BIO_SPEEDUP</u>,  all  current  <u>BIO_DELETE</u>
           requests  not  yet  sent to the hardware are completed successfully immediate without sending them to
           the hardware.  Used in low disk space scenarios when the filesystem encounters  a  critical  shortage
           and  needs  blocks  immediately.   Since trims have maximum benefit when the LBA is unused for a long
           time, skipping the trim when space is needed for immediate writes results  in  little  to  no  excess
           wear.  When participation is disabled, <u>BIO_SPEEDUP</u> requests are ignored.

       <u>kern.cam.nda.max_trim</u>
           The  maximum  number  of LBA ranges to be collected together for each DSM trims send to the hardware.
           Defaults to 256, which is the maximum number of ranges the protocol supports.   Sometimes  poor  trim
           performance can be mitigated by limiting the number of ranges sent to the device.  This value must be
           between 1 and 256 inclusive.

       The  following  report per-device settings, and are read-only unless otherwise indicated.  Replace <u>N</u> with
       the device unit number.

       <u>kern.cam.nda.N.rotating</u>
           This variable reports whether the storage volume is spinning or flash.  Its value is hard coded to  0
           indicating flash.

       <u>kern.cam.nda.N.unmapped_io</u>
           This variable reports whether the <b>nda</b> driver accepts unmapped I/O for this unit.

       <u>kern.cam.nda.N.flags</u>
           This variable reports the current flags.

           <u>OPEN</u>
               The device is open.

           <u>DIRTY</u>
               Set when a write to the drive is scheduled.  Cleared after flush commands.

           <u>SCTX_INIT</u>
               Internal flag set after <u><a href="../man8/sysctl.8.html">sysctl</a></u>(8) nodes have been created.

       <u>kern.cam.nda.N.sort_io_queue</u>
           Same as the <u>kern.cam.nda.sort_io_queue</u> tunable.

       <u>kern.cam.nda.N.trim_ticks</u>
           Writable.   When greater than zero, hold trims for up to this many ticks before sending to the drive.
           Sometimes waiting a little bit to collect more trims to send at one time improves  trim  performance.
           When 0, no delaying of trims are done.

       <u>kern.cam.nda.N.trim_goal</u>
           Writable.  When delaying a bit to collect multiple trims, send the accumulated DSM TRIM to the drive.

       <u>kern.cam.nda.N.trim_lbas</u>
           Total number of LBAs that have been trimmed.

       <u>kern.cam.nda.N.trim_ranges</u>
           Total number of LBA ranges that have been trimmed.

       <u>kern.cam.nda.N.trim_count</u>
           Total number of trims sent to the hardware.

       <u>kern.cam.nda.N.deletes</u>
           Total number of <u>BIO_DELETE</u> requests queued to the device.

</pre><h4><b>NAMESPACE</b> <b>MAPPING</b></h4><pre>
       Each <u><a href="../man4/nvme.4.html">nvme</a></u>(4) drive has one or more namespaces associated with it.  One instance of the <b>nda</b> driver will be
       created for each of the namespaces on the drive.  All the <b>nda</b> nodes for a <u><a href="../man4/nvme.4.html">nvme</a></u>(4) device are at target 0.
       However,  the  namespace  ID  maps  to the CAM lun, as reported in kernel messages and in the <u>devlist</u> sub
       command of <u><a href="../man8/camcontrol.8.html">camcontrol</a></u>(8).

       Namespaces are managed with the <u>ns</u> sub command of  <u><a href="../man8/nvmecontrol.8.html">nvmecontrol</a></u>(8).   Not  all  drives  support  namespace
       management,  but  all  drives  support  at least one namespace.  Device nodes for <b>nda</b> will be created and
       destroyed dynamically as namespaces are activated or detached.

</pre><h4><b>FILES</b></h4><pre>
       <u>/dev/nda*</u>  NVMe storage device nodes

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <u><a href="../man4/cam.4.html">cam</a></u>(4), <u><a href="../man4/geom.4.html">geom</a></u>(4), <u><a href="../man4/nvd.4.html">nvd</a></u>(4), <u><a href="../man4/nvme.4.html">nvme</a></u>(4), <u><a href="../man8/gpart.8.html">gpart</a></u>(8)

</pre><h4><b>HISTORY</b></h4><pre>
       The <b>nda</b> driver first appeared in FreeBSD 12.0.

</pre><h4><b>AUTHORS</b></h4><pre>
       Warner Losh &lt;<u><a href="mailto:imp@FreeBSD.org">imp@FreeBSD.org</a></u>&gt;

Debian                                            June 6, 2020                                            <u><a href="../man4/NDA.4.html">NDA</a></u>(4)
</pre>
 </div>
</div></section>
</div>
</body>
</html>