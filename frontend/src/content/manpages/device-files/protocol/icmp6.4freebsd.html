<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>icmp6 — Internet Control Message Protocol for IPv6</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/freebsd-manpages">freebsd-manpages_12.2-2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       icmp6 — Internet Control Message Protocol for IPv6

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;sys/socket.h&gt;</b>
       <b>#include</b> <b>&lt;<a href="file:/usr/include/netinet/in.h">netinet/in.h</a>&gt;</b>
       <b>#include</b> <b>&lt;<a href="file:/usr/include/netinet/icmp6.h">netinet/icmp6.h</a>&gt;</b>

       <u>int</u>
       <b>socket</b>(<u>AF_INET6</u>, <u>SOCK_RAW</u>, <u>IPPROTO_ICMPV6</u>);

</pre><h4><b>DESCRIPTION</b></h4><pre>
       ICMPv6  is  the  error and control message protocol used by IPv6 and the IPv6 protocol family (see <u><a href="../man4/ip6.4.html">ip6</a></u>(4)
       and <u><a href="../man4/inet6.4.html">inet6</a></u>(4)).  It may be  accessed  through  a  “raw  socket”  for  network  monitoring  and  diagnostic
       functions.

       The   <u>proto</u>  parameter  to  the  <u><a href="../man2/socket.2.html">socket</a></u>(2)  call  to  create  an  ICMPv6  socket  may  be  obtained  from
       <u><a href="../man3/getprotobyname.3.html">getprotobyname</a></u>(3).  ICMPv6 sockets are connectionless, and are  normally  used  with  the  <u><a href="../man2/sendto.2.html">sendto</a></u>(2)  and
       <u><a href="../man2/recvfrom.2.html">recvfrom</a></u>(2)  calls, though the <u><a href="../man2/connect.2.html">connect</a></u>(2) call may also be used to fix the destination for future packets
       (in which case <u><a href="../man2/read.2.html">read</a></u>(2) or <u><a href="../man2/recv.2.html">recv</a></u>(2) and <u><a href="../man2/write.2.html">write</a></u>(2) or <u><a href="../man2/send.2.html">send</a></u>(2) system calls may be used).

       Outgoing packets automatically have an IPv6 header prepended to them (based on the destination  address).
       Incoming packets on the socket are received with the IPv6 header and any extension headers removed.

   <b>Types</b>
       ICMPv6  messages  are classified according to the type and code fields present in the ICMPv6 header.  The
       abbreviations for the types and codes may be used in  rules  in  <u><a href="../man5/pf.conf.5.html">pf.conf</a></u>(5).   The  following  types  are
       defined:

             <b>Num</b>  <b>Abbrev.</b>         <b>Description</b>
             1    unreach         Destination unreachable
             2    toobig          Packet too big
             3    timex           Time exceeded
             4    paramprob       Invalid IPv6 header
             128  echoreq         Echo service request
             129  echorep         Echo service reply
             130  groupqry        Group membership query
             130  listqry         Multicast listener query
             131  grouprep        Group membership report
             131  listenrep       Multicast listener report
             132  groupterm       Group membership termination
             132  listendone      Multicast listener done
             133  routersol       Router solicitation
             134  routeradv       Router advertisement
             135  neighbrsol      Neighbor solicitation
             136  neighbradv      Neighbor advertisement
             137  redir           Shorter route exists
             138  routrrenum      Route renumbering
             139  fqdnreq         FQDN query
             139  niqry           Node information query
             139  wrureq          Who-are-you request
             140  fqdnrep         FQDN reply
             140  nirep           Node information reply
             140  wrurep          Who-are-you reply
             200  mtraceresp      mtrace response
             201  mtrace          mtrace messages

       The following codes are defined:

             <b>Num</b>  <b>Abbrev.</b>         <b>Type</b>        <b>Description</b>
             0    noroute-unr     unreach     No route to destination
             1    admin-unr       unreach     Administratively prohibited
             2    beyond-unr      unreach     Beyond scope of source address
             2    notnbr-unr      unreach     Not a neighbor (obsolete)
             3    addr-unr        unreach     Address unreachable
             4    port-unr        unreach     Port unreachable
             0    transit         timex       Time exceeded in transit
             1    reassemb        timex       Time exceeded in reassembly
             0    badhead         paramprob   Erroneous header field
             1    nxthdr          paramprob   Unrecognized next header
             2                    redir       Unrecognized option
             0    redironlink     redir       Redirection to on-link node
             1    redirrouter     redir       Redirection to better router

   <b>Headers</b>
       All  ICMPv6  messages  are  prefixed  with  an  ICMPv6  header.  This header corresponds to the <u>icmp6_hdr</u>
       structure and has the following definition:

             struct icmp6_hdr {
                     uint8_t  icmp6_type;    /* type field */
                     uint8_t  icmp6_code;    /* code field */
                     uint16_t icmp6_cksum;   /* checksum field */
                     union {
                             uint32_t icmp6_un_data32[1]; /* type-specific */
                             uint16_t icmp6_un_data16[2]; /* type-specific */
                             uint8_t  icmp6_un_data8[4];  /* type-specific */
                     } icmp6_dataun;
             } __packed;

             #define icmp6_data32    icmp6_dataun.icmp6_un_data32
             #define icmp6_data16    icmp6_dataun.icmp6_un_data16
             #define icmp6_data8     icmp6_dataun.icmp6_un_data8
             #define icmp6_pptr      icmp6_data32[0] /* parameter prob */
             #define icmp6_mtu       icmp6_data32[0] /* packet too big */
             #define icmp6_id        icmp6_data16[0] /* echo request/reply */
             #define icmp6_seq       icmp6_data16[1] /* echo request/reply */
             #define icmp6_maxdelay  icmp6_data16[0] /* mcast group membership*/

       <u>icmp6_type</u> describes the type  of  the  message.   Suitable  values  are  defined  in  ⟨<u>netinet/icmp6.h</u>⟩.
       <u>icmp6_code</u>  describes  the  sub-type  of the message and depends on <u>icmp6_type</u>.  <u>icmp6_cksum</u> contains the
       checksum for the message and is filled in by the kernel on outgoing messages.  The other fields are  used
       for type-specific purposes.

   <b>Filters</b>
       Because  of the extra functionality of ICMPv6 in comparison to ICMPv4, a larger number of messages may be
       potentially received on an ICMPv6 socket.  Input filters may therefore be used to  restrict  input  to  a
       subset of the incoming ICMPv6 messages so only interesting messages are returned by the <u><a href="../man2/recv.2.html">recv</a></u>(2) family of
       calls to an application.

       The  <u>icmp6_filter</u> structure may be used to refine the input message set according to the ICMPv6 type.  By
       default, all messages types are allowed on newly created raw ICMPv6 sockets.  The following macros may be
       used to refine the input set:

       <b>void</b> <b>ICMP6_FILTER_SETPASSALL</b>(<u>struct</u> <u>icmp6_filter</u> <u>*filterp</u>)
               Allow all incoming messages.  <u>filterp</u> is modified to allow all message types.

       <b>void</b> <b>ICMP6_FILTER_SETBLOCKALL</b>(<u>struct</u> <u>icmp6_filter</u> <u>*filterp</u>)
               Ignore all incoming messages.  <u>filterp</u> is modified to ignore all message types.

       <u>void</u> <b>ICMP6_FILTER_SETPASS</b>(<u>int</u> <u>type</u>, <u>struct</u> <u>icmp6_filter</u> <u>*filterp</u>)
               Allow ICMPv6 messages with the given <u>type</u>.  <u>filterp</u> is modified to allow such messages.

       <u>void</u> <b>ICMP6_FILTER_SETBLOCK"</b>(<u>int</u> <u>type</u>, <u>struct</u> <u>icmp6_filter</u> <u>*filterp</u>)
               Ignore ICMPv6 messages with the given <u>type</u>.  <u>filterp</u> is modified to ignore such messages.

       <u>int</u> <b>ICMP6_FILTER_WILLPASS"</b>(<u>int</u> <u>type</u>, <u>const</u> <u>struct</u> <u>icmp6_filter</u> <u>*filterp</u>)
               Determine if the given filter will allow an ICMPv6 message of the given type.

       <u>int</u> <b>ICMP6_FILTER_WILLBLOCK"</b>(<u>int</u> <u>type</u>, <u>const</u> <u>struct</u> <u>icmp6_filter</u> <u>*filterp</u>)
               Determine if the given filter will ignore an ICMPv6 message of the given type.

       The <u><a href="../man2/getsockopt.2.html">getsockopt</a></u>(2) and <u><a href="../man2/setsockopt.2.html">setsockopt</a></u>(2) calls may be used to obtain and install the filter on ICMPv6  sockets
       at  option level IPPROTO_ICMPV6 and name ICMP6_FILTER with a pointer to the <u>icmp6_filter</u> structure as the
       option value.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <u><a href="../man2/getsockopt.2.html">getsockopt</a></u>(2),  <u><a href="../man2/recv.2.html">recv</a></u>(2),  <u><a href="../man2/send.2.html">send</a></u>(2),  <u><a href="../man2/setsockopt.2.html">setsockopt</a></u>(2),  <u><a href="../man2/socket.2.html">socket</a></u>(2),   <u><a href="../man3/getprotobyname.3.html">getprotobyname</a></u>(3),   <u><a href="../man4/inet6.4.html">inet6</a></u>(4),   <u><a href="../man4/ip6.4.html">ip6</a></u>(4),
       <u><a href="../man4/netintro.4.html">netintro</a></u>(4)

       W. Stevens and M. Thomas, <u>Advanced</u> <u>Sockets</u> <u>API</u> <u>for</u> <u>IPv6</u>, RFC 2292, February 1998.

       A.  Conta  and S. Deering, <u>Internet</u> <u>Control</u> <u>Message</u> <u>Protocol</u> <u>(ICMPv6)</u> <u>for</u> <u>the</u> <u>Internet</u> <u>Protocol</u> <u>Version</u> <u>6</u>
       <u>(IPv6)</u> <u>Specification</u>, RFC 2463, December 1998.

Debian                                          November 7, 2012                                        <u><a href="../man4/ICMP6.4.html">ICMP6</a></u>(4)
</pre>
 </div>
</div></section>
</div>
</body>
</html>