<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>dgn_comp - NetHack dungeon compiler</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/nethack-common">nethack-common_3.6.7-1build3_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       dgn_comp - NetHack dungeon compiler

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>dgn_comp</b> [ <u>file</u> ]

       If no arguments are given, it reads standard input.

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <u>Dgn_comp</u>  is  a  dungeon  compiler for NetHack version 3.2 and higher.  It takes a description file as an
       argument and produces a dungeon "script" that is to be loaded by NetHack at runtime.

       The purpose of this tool is to provide NetHack administrators and implementors with a convenient  way  to
       create a custom dungeon for the game, without having to recompile the entire world.

</pre><h4><b>GRAMMAR</b></h4><pre>
       DUNGEON: <b>name</b> <b>bonesmarker</b> ( <b>base</b> , <b>rand</b> ) [ <b>%age</b> ]

       where  <b>name</b>  is the dungeon name, <b>bonesmarker</b> is a letter for marking bones files, ( <b>base</b> , <b>rand</b> ) is the
       number of levels, and <b>%age</b> is its percentage chance of being generated (if absent, 100% chance).

       DESCRIPTION: <b>tag</b>

       where <b>tag</b> is currently one of <b>HELLISH</b>, <b>MAZELIKE</b>, or <b>ROGUELIKE</b>.

       ALIGNMENT | LEVALIGN: [ <b>lawful</b> | <b>neutral</b> | <b>chaotic</b> | <b>unaligned</b> ]

       gives the alignment of the dungeon/level (default is unaligned).

       ENTRY: <b>level</b>

       the dungeon entry point.  The dungeon connection attaches at this level of the  given  dungeon.   If  the
       value  of  <b>level</b> is negative, the entry level is calculated from the bottom of the dungeon, with -1 being
       the last level.  If this line is not present in a dungeon description, the entry level defaults to 1.

       PROTOFILE: <b>name</b>

       the prototypical name for dungeon level files in this dungeon.  For example, the PROTOFILE name  for  the
       dungeon <u>Vlad's</u> <u>Tower</u> is <u>tower</u>.

       LEVEL: <b>name</b> <b>bonesmarker</b> @ ( <b>base</b> , <b>rand</b> ) [ <b>%age</b> ]

       where  <b>name</b>  is  the  level name, <b>bonesmarker</b> is a letter for marking bones files, ( <b>base</b> , <b>rand</b> ) is the
       location and <b>%age</b> is the generation percentage, as above.

       RNDLEVEL: <b>name</b> <b>bonesmarker</b> @ ( <b>base</b> , <b>rand</b> ) [ <b>%age</b> ] <b>rndlevs</b>

       where <b>name</b> is the level name, <b>bonesmarker</b> is a letter for marking bones files, ( <b>base</b> ,  <b>rand</b>  )  is  the
       location,  <b>%age</b>  is  the  generation  percentage,  as  above, and <b>rndlevs</b> is the number of similar levels
       available to choose from.

       CHAINLEVEL: <b>name</b> <b>bonesmarker</b> <b>prev_name</b> + ( <b>base</b> , <b>rand</b> ) [ <b>%age</b> ]

       where <b>name</b> is the level name, <b>bonesmarker</b> is a letter for marking bones files, <b>prev_name</b> is the name of a
       level defined previously, ( <b>base</b> , <b>rand</b> ) is the <u>offset</u> from the level being chained from,  and  <b>%age</b>  is
       the generation percentage.

       RNDCHAINLEVEL: <b>name</b> <b>bonesmarker</b> <b>prev_name</b> + ( <b>base</b> , <b>rand</b> ) [ <b>%age</b> ] <b>rndlevs</b>

       where <b>name</b> is the level name, <b>bonesmarker</b> is a letter for marking bones files, <b>prev_name</b> is the name of a
       level  defined  previously,  ( <b>base</b> , <b>rand</b> ) is the <u>offset</u> from the level being chained from, <b>%age</b> is the
       generation percentage, and <b>rndlevs</b> is the number of similar levels available to choose from.

       LEVELDESC: <b>type</b>

       where <b>type</b> is the level type, (see DESCRIPTION, above). The <b>type</b> is used to override  any  pre-set  value
       used to describe the entire dungeon, for this level only.

       BRANCH: <b>name</b> @ ( <b>base</b> , <b>rand</b> ) [ <b>stair</b> | <b>no_up</b> | <b>no_down</b> | <b>portal</b> ] [ <b>up</b> | <b>down</b> ]

       where  <b>name</b>  is  the name of the dungeon to branch to, and ( <b>base</b> , <b>rand</b> ) is the location of the branch.
       The last two optional arguments are the branch type and branch direction.  The type of a branch can be  a
       two-way stair connection, a one-way stair connection, or a magic portal.  A one-way stair is described by
       the  types  <b>no_up</b> and <b>no_down</b> which specify which stair direction is missing.  The default branch type is
       <b>stair</b>.  The direction for a stair can be either up or down; direction is not applicable to portals.   The
       default direction is <b>down</b>.

       CHAINBRANCH: <b>name</b> <b>prev_name</b> + ( <b>base</b> , <b>rand</b> ) [ <b>stair</b> | <b>no_up</b> | <b>no_down</b> | <b>portal</b> ] [ <b>up</b> | <b>down</b> ]

       where  <b>name</b>  is the name of the dungeon to branch to, <b>prev_name</b> is the name of a previously defined <b>level</b>
       and ( <b>base</b> , <b>rand</b> ) is the <u>offset</u> from the level being  chained  from.   The  optional  branch  type  and
       direction are the same as described above.

</pre><h4><b>GENERIC</b> <b>RULES</b></h4><pre>
       Each  dungeon  must  have  a  unique  <b>bonesmarker</b> <b>,</b> and each special level must have a <b>bonesmarker</b> unique
       within its dungeon (letters may be reused in different dungeons).  If the  <b>bonesmarker</b>  has  the  special
       value "none", no bones files will be created for that level or dungeon.

       The value <b>base</b> may be in the range of 1 to <b>MAXLEVEL</b> (as defined in <u>global.h</u> ).

       The value <b>rand</b> may be in the range of -1 to <b>MAXLEVEL</b>.

       If  <b>rand</b>  is  -1 it will be replaced with the value (num_dunlevs(dungeon) - base) during the load process
       (ie. from here to the end of the dungeon).

       If <b>rand</b> is 0 the level is located absolutely at <b>base</b>.

       Branches don't have a probability.  Dungeons do.  If a dungeon fails to be generated during load, all its
       levels and branches are skipped.

       No level or branch may be chained from a level with a percentage  generation  probability.   This  is  to
       prevent  non-resolution  during  the  load.   In  addition,  no  branch may be made from a dungeon with a
       percentage generation probability for the same reason.

       As a general rule using the dungeon compiler:

       If a dungeon has a <b>protofile</b> name associated with it (<u>eg.</u>  <b>tower</b>) that file will be used.

       If a special level is present, it will override the above rule and the appropriate file will be loaded.

       If neither of the above are present, the standard generator will take over and make a "normal" level.

       A level alignment, if present, will override the alignment of the dungeon that it exists within.

</pre><h4><b>EXAMPLE</b></h4><pre>
       Here is the current syntax of the dungeon compiler's "language":

       #
       #       The dungeon description file for the "standard" original
       #       3.0 NetHack.
       #
       DUNGEON:        "The Dungeons of Doom" "D" (25, 5)
       LEVEL:          "rogue" "none" @ (15, 4)
       LEVEL:          "oracle" "none" @ (5, 7)
       LEVEL:          "bigroom" "B" @ (12, 3) 15
       LEVEL:          "medusa" "none" @ (20, 5)
       CHAINLEVEL:     "castle" "medusa" + (1, 4)
       CHAINBRANCH:    "Hell" "castle" + (0, 0) no_down
       BRANCH:         "The Astral Plane" @ (1, 0) no_down up

       DUNGEON:        "Hell" "H" (25, 5)
       DESCRIPTION:    mazelike
       DESCRIPTION:    hellish
       BRANCH:         "Vlad's Tower" @ (13, 5) up
       LEVEL:          "wizard" "none" @ (15, 10)
       LEVEL:          "fakewiz" "A" @ (5, 5)
       LEVEL:          "fakewiz" "B" @ (10, 5)
       LEVEL:          "fakewiz" "C" @ (15, 5)
       LEVEL:          "fakewiz" "D" @ (20, 5)
       LEVEL:          "fakewiz" "E" @ (25, 5)

       DUNGEON:        "Vlad's Tower" "T" (3, 0)
       PROTOFILE:      "tower"
       DESCRIPTION:    mazelike
       ENTRY:          -1

       DUNGEON:        "The Astral Plane" "A" (1, 0)
       DESCRIPTION:    mazelike
       PROTOFILE:      "endgame"

       <u>NOTES:</u>
       Lines beginning with '#' are considered comments.
       A special level must be explicitly aligned.  The alignment of the dungeon it is in only applies  to  non-
       special levels within that dungeon.

</pre><h4><b>AUTHOR</b></h4><pre>
       M. Stephenson (from the level compiler by Jean-Christophe Collet).

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <a href="../man6/lev_comp.6.html">lev_comp</a>(6), <a href="../man6/nethack.6.html">nethack</a>(6)

</pre><h4><b>BUGS</b></h4><pre>
       Probably infinite.

</pre><h4><b>COPYRIGHT</b></h4><pre>
       This  file  is Copyright (C) Kenneth Lorber and was last modified 2018/04/25 (version NetHack-3.6.0:1.6).
       NetHack may be freely redistributed.  See license for details.

NETHACK                                            25 May 2015                                       <u><a href="../man6/DGN_COMP.6.html">DGN_COMP</a></u>(6)
</pre>
 </div>
</div></section>
</div>
</body>
</html>