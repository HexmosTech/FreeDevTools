<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ssh</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github.min.css">
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            line-height: 1.6;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f8f9fa;
        }
        .container {
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        .header {
            background: #2c3e50;
            color: white;
            padding: 20px;
            border-bottom: 1px solid #34495e;
        }
        .header h1 {
            margin: 0;
            font-size: 1.5em;
        }
        .content {
            padding: 20px;
        }
        pre {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 4px;
            padding: 16px;
            overflow-x: auto;
            margin: 0;
        }
        code {
            font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
            font-size: 14px;
        }
        .markdown-content {
            line-height: 1.7;
        }
        .markdown-content h1, .markdown-content h2, .markdown-content h3 {
            color: #2c3e50;
            border-bottom: 1px solid #e9ecef;
            padding-bottom: 8px;
        }
        .markdown-content pre {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 4px;
            padding: 16px;
            overflow-x: auto;
        }
        .markdown-content code {
            background: #f1f3f4;
            padding: 2px 4px;
            border-radius: 3px;
            font-size: 0.9em;
        }
        .markdown-content pre code {
            background: none;
            padding: 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Ssh</h1>
        </div>
        <div class="content">
            <div class="markdown-content"><h1>SSH Settings</h1>
<h3>SSH Version</h3>
<pre class="codehilite"><code>ssh -V
</code></pre>

<h3>Verify Connection</h3>
<pre class="codehilite"><code>ssh -T git@github.com
</code></pre>

<hr />
<ul>
<li>[ ] Is this really a cheat sheet? Or perhaps a longer form Gist article?</li>
</ul>
<h3>Bash (or other) Profile</h3>
<p>Add the following to <code>.profile</code> (preferred) or <code>.bash_profile</code></p>
<pre class="codehilite"><code># SSH
eval $(ssh-agent -s)
ssh-add ~/.ssh/ghe_rsa
trap $(kill $SSH_AGENT_PID) EXIT
</code></pre>

<blockquote>
<p><code>.bash_profile</code> is specific to bash, <code>.profile</code> is generic to all POSIX shells. <code>bash</code> will look first for .bash_profile, then default to <code>.profile</code>. – Barmar Sep 18 '13 at 20:54</p>
<p>The correct way to spawn ssh-agent for a "standard" (POSIX-compatible) shell is eval <code>$(ssh-agent -s)</code>. Note also that you have to make sure you properly get rid of the agent when you log out, so it's also advisable to put <code>trap 'kill $SSH_AGENT_PID' EXIT</code> in your <code>.profile</code> after the line which starts the agent. – kostix Sep 19 '13 at 10:16 </p>
<p>This solution from <a href="https://www.cygwin.com/ml/cygwin/2001-06/msg00537.html">Joseph M. Reagle</a> by way of Daniel Starin:</p>
</blockquote>
<pre class="codehilite"><code>SSH_ENV=&quot;$HOME/.ssh/environment&quot;

function start_agent {
     echo &quot;Initialising new SSH agent...&quot;
     /usr/bin/ssh-agent | sed 's/^echo/#echo/' &gt; &quot;${SSH_ENV}&quot;
     echo succeeded
     chmod 600 &quot;${SSH_ENV}&quot;
     . &quot;${SSH_ENV}&quot; &gt; /dev/null
     /usr/bin/ssh-add;
}

# Source SSH settings, if applicable

if [ -f &quot;${SSH_ENV}&quot; ]; then
     . &quot;${SSH_ENV}&quot; &gt; /dev/null
     #ps ${SSH_AGENT_PID} doesn't work under cywgin
     ps -ef | grep ${SSH_AGENT_PID} | grep ssh-agent$ &gt; /dev/null || {
         start_agent;
     }
else
     start_agent;
fi
</code></pre>

<h2>References</h2>
<ol>
<li><a href="http://mah.everybody.org/docs/ssh">Using ssh-agent with ssh</a></li>
<li><a href="https://stackoverflow.com/a/18915067/6146580">Start ssh-agent on login</a></li>
<li><a href="https://unix.stackexchange.com/a/90869">How can I run ssh-add automatically, without a password prompt?</a></li>
</ol></div>
        </div>
    </div>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <script>
        hljs.highlightAll();
    </script>
</body>
</html>