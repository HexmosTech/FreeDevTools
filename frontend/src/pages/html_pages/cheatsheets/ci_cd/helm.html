<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Readme</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github.min.css">
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            line-height: 1.6;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f8f9fa;
        }
        .container {
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        .header {
            background: #2c3e50;
            color: white;
            padding: 20px;
            border-bottom: 1px solid #34495e;
        }
        .header h1 {
            margin: 0;
            font-size: 1.5em;
        }
        .content {
            padding: 20px;
        }
        pre {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 4px;
            padding: 16px;
            overflow-x: auto;
            margin: 0;
        }
        code {
            font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
            font-size: 14px;
        }
        .markdown-content {
            line-height: 1.7;
        }
        .markdown-content h1, .markdown-content h2, .markdown-content h3 {
            color: #2c3e50;
            border-bottom: 1px solid #e9ecef;
            padding-bottom: 8px;
        }
        .markdown-content pre {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 4px;
            padding: 16px;
            overflow-x: auto;
        }
        .markdown-content code {
            background: #f1f3f4;
            padding: 2px 4px;
            border-radius: 3px;
            font-size: 0.9em;
        }
        .markdown-content pre code {
            background: none;
            padding: 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Readme</h1>
        </div>
        <div class="content">
            <div class="markdown-content"><h1>helm cheatsheet</h1>
<p>Helm helps you manage Kubernetes applications</p>
<h2>TOC</h2>
<ul>
<li><a href="#installing-helm">Installing Helm</a></li>
<li><a href="#global-flags">Global Flags</a></li>
<li><a href="#releases">Releases</a></li>
<li><a href="#rollbacks">Rollbacks</a></li>
<li><a href="#repositories">Repositories</a></li>
<li><a href="#search">Search</a></li>
<li><a href="#show">Show</a></li>
<li><a href="#charts">Charts</a></li>
</ul>
<h2>Installing Helm</h2>
<ul>
<li><a href="https://helm.sh/docs/intro/install/">Docs</a></li>
</ul>
<p>From a script:</p>
<pre class="codehilite"><code class="language-bash">curl -fsSL -o get_helm.sh https://raw.githubusercontent.com/helm/helm/main/scripts/get-helm-3 | bash
</code></pre>

<p>On Mac:</p>
<pre class="codehilite"><code class="language-bash">brew install helm
</code></pre>

<p>Manually from their <a href="https://github.com/helm/helm/releases">releases</a>:</p>
<pre class="codehilite"><code>wget https://get.helm.sh/helm-v3.9.4-darwin-amd64.tar.gz
tar helm-v3.9.4-darwin-amd64.tar.gz
mv darwin-amd64/helm /usr/local/bin
</code></pre>

<h2>Global Flags</h2>
<p>List of global flags of version <code>v3.9.3</code>:</p>
<pre class="codehilite"><code class="language-bash">Global Flags:
      --debug                       enable verbose output
      --kube-apiserver string       the address and the port for the Kubernetes API server
      --kube-as-group stringArray   group to impersonate for the operation, this flag can be repeated to specify multiple groups.
      --kube-as-user string         username to impersonate for the operation
      --kube-ca-file string         the certificate authority file for the Kubernetes API server connection
      --kube-context string         name of the kubeconfig context to use
      --kube-token string           bearer token used for authentication
      --kubeconfig string           path to the kubeconfig file
  -n, --namespace string            namespace scope for this request
      --registry-config string      path to the registry config file (default &quot;~/Library/Preferences/helm/registry/config.json&quot;)
      --repository-cache string     path to the file containing cached repository indexes (default &quot;~/Library/Caches/helm/repository&quot;)
      --repository-config string    path to the file containing repository names and URLs (default &quot;~/Library/Preferences/helm/repositories.yaml&quot;)
</code></pre>

<h2>Releases</h2>
<p>List a release:</p>
<pre class="codehilite"><code class="language-bash">helm ls --namespace &lt;namespace&gt;
</code></pre>

<p>View the history of releases:</p>
<pre class="codehilite"><code class="language-bash">helm history &lt;release&gt; --namespace &lt;namespace&gt;
</code></pre>

<h2>Repositories</h2>
<p>List repositories:</p>
<pre class="codehilite"><code class="language-bash">helm repo list
</code></pre>

<p>Add a repository:</p>
<pre class="codehilite"><code class="language-bash">helm repo add prometheus-community https://prometheus-community.github.io/helm-charts
</code></pre>

<p>Update repositories:</p>
<pre class="codehilite"><code class="language-bash">helm repo update
</code></pre>

<p>Remove a repository:</p>
<pre class="codehilite"><code class="language-bash">helm repo remove prometheus-community
</code></pre>

<h2>Rollbacks</h2>
<p>Rollback to a specific revision:</p>
<pre class="codehilite"><code class="language-bash">helm rollback &lt;release&gt; &lt;revision&gt; --namespace &lt;namespace&gt;
</code></pre>

<p>Rollback to the previous revision:</p>
<pre class="codehilite"><code class="language-bash">helm rollback &lt;release&gt; 0 --namespace &lt;namespace&gt;
</code></pre>

<h2>Search</h2>
<p>Search all release versions of a chart:</p>
<pre class="codehilite"><code class="language-bash">helm search repo prometheus-community/kube-prometheus-stack --versions
</code></pre>

<p>Search for release versions that starts with a specific number:</p>
<pre class="codehilite"><code class="language-bash">helm search repo prometheus-community/kube-prometheus-stack --versions --version &quot;^31.0&quot;
</code></pre>

<p>Search for release versions as a minimum and up:</p>
<pre class="codehilite"><code class="language-bash">helm search repo prometheus-community/kube-prometheus-stack --versions --version &quot;&gt;31.0&quot;
</code></pre>

<p>Search for a repo with regular expressions:</p>
<pre class="codehilite"><code class="language-bash">helm search repo -r &quot;bitnami/(re-).*&quot;
</code></pre>

<h2>Show</h2>
<p>Show the chart's values:</p>
<pre class="codehilite"><code class="language-bash">helm show values prometheus-community/kube-prometheus-stack --version &quot;39.0.0&quot;
</code></pre>

<p>Dumpe the chart's values to a file:</p>
<pre class="codehilite"><code class="language-bash">helm show values prometheus-community/kube-prometheus-stack --version &quot;39.0.0&quot; &gt; values.yaml
</code></pre>

<h2>Install</h2>
<p>Install a release with a local chart:</p>
<pre class="codehilite"><code class="language-bash">helm install my-hostname . -f values.yaml
</code></pre>

<h2>Upgrade</h2>
<p>Upgrade a release with a local chart and specify a timeout:</p>
<pre class="codehilite"><code class="language-bash">helm upgrade my-hostname . -f values.yaml --timeout 10s
</code></pre>

<h2>History</h2>
<p>View the deployment history:</p>
<pre class="codehilite"><code class="language-bash">helm history chart-name
</code></pre>

<h2>Rollbacks</h2>
<p>Rollback to most recent version:</p>
<pre class="codehilite"><code class="language-bash">helm rollback chart-name
</code></pre>

<p>Rollback to specific version:</p>
<pre class="codehilite"><code class="language-bash">helm rollback chart-name 2
</code></pre>

<h2>Chart Museum</h2>
<pre class="codehilite"><code class="language-bash">helm plugin install https://github.com/chartmuseum/helm-push
helm repo add cm --username ${HELM_REPO_USERNAME} --password ${HELM_REPO_PASSWORD} https://chartmuseum.mydomain.com/
helm create mychart
# helm package mychart # or cd mychart; helm package .
# helm dependency build -&gt; if you are in the chart directory with dependency in the Chart.yaml
cd mychart
helm cm-push . -f --username ${HELM_REPO_USERNAME} --password ${HELM_REPO_PASSWORD} https://chartmuseum.mydomain.com/ # chart name will be the directory name
</code></pre>

<h2>Helm Chart Resources</h2>
<ul>
<li><a href="https://phoenixnap.com/kb/helm-environment-variables">Environment Variables in Charts</a></li>
</ul>
<h2>Charts</h2>
<h3>Access Values</h3>
<p>Access <code>--set env=dev</code> in a chart:</p>
<pre class="codehilite"><code>{{ .Values.env | quote }}
</code></pre></div>
        </div>
    </div>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <script>
        hljs.highlightAll();
    </script>
</body>
</html>