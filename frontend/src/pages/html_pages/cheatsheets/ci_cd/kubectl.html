<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kubectl Cheatsheet - Manage Kubernetes Clusters</title>
    <meta name="description" content="Kubectl cheatsheet for managing Kubernetes clusters. Learn how to view pods, deployments, secrets, and more. Free and easy to use.">
    <meta name="keywords" content="kubectl, kubernetes, cheatsheet, kubernetes commands, kubectl commands, kubernetes tutorial, docker, containerization">
    <meta name="author" content="Hexmos">
    <meta name="robots" content="index, follow">
    <link rel="canonical" href="https://example.com/ci_cd/kubectl.html">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://example.com/ci_cd/kubectl.html">
    <meta property="og:title" content="Kubectl Cheatsheet - Manage Kubernetes Clusters">
    <meta property="og:description" content="Kubectl cheatsheet for managing Kubernetes clusters. Learn how to view pods, deployments, secrets, and more. Free and easy to use.">
    <meta property="og:image" content="https://example.com/images/kubectl-cheatsheet.png">

    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://example.com/ci_cd/kubectl.html">
    <meta property="twitter:title" content="Kubectl Cheatsheet - Manage Kubernetes Clusters">
    <meta property="twitter:description" content="Kubectl cheatsheet for managing Kubernetes clusters. Learn how to view pods, deployments, secrets, and more. Free and easy to use.">
    <meta property="twitter:image" content="https://example.com/images/kubectl-cheatsheet.png">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github.min.css">
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            line-height: 1.6;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f8f9fa;
        }
        .container {
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        .header {
            background: #2c3e50;
            color: white;
            padding: 20px;
            border-bottom: 1px solid #34495e;
        }
        .header h1 {
            margin: 0;
            font-size: 1.5em;
        }
        .content {
            padding: 20px;
        }
        pre {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 4px;
            padding: 16px;
            overflow-x: auto;
            margin: 0;
        }
        code {
            font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
            font-size: 14px;
        }
        .markdown-content {
            line-height: 1.7;
        }
        .markdown-content h2, .markdown-content h3 {
            color: #2c3e50;
            border-bottom: 1px solid #e9ecef;
            padding-bottom: 8px;
        }
        .markdown-content pre {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 4px;
            padding: 16px;
            overflow-x: auto;
        }
        .markdown-content code {
            background: #f1f3f4;
            padding: 2px 4px;
            border-radius: 3px;
            font-size: 0.9em;
        }
        .markdown-content pre code {
            background: none;
            padding: 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Kubectl Cheatsheet</h1>
        </div>
        <div class="content">
            <div class="markdown-content">
<h2>Table of Contents</h2>
<ul>
<li><a href="#secrets">Secrets</a></li>
<li><a href="#create-secret-from-file">Create Secret from File</a></li>
<li><a href="#create-secret-from-literals">Create Secret from Literals</a></li>
<li><a href="#view-secrets">View Secrets</a></li>
</ul>
<h2>External Resources</h2>
<ul>
<li><a href="https://medium.com/@jake.page91/the-guide-to-kubectl-i-never-had-3874cc6074ff">The guide to kubectl I never had</a></li>
</ul>
<h2>Diffs</h2>
<pre class="codehilite"><code class="language-bash">kubectl get configmap kube-proxy -n kube-system -o yaml | \
sed -e &quot;s/strictARP: false/strictARP: true/&quot; | \
kubectl diff -f - -n kube-system
diff -u -N /tmp/LIVE-1353412465/v1.ConfigMap.kube-system.kube-proxy /tmp/MERGED-1463100091/v1.ConfigMap.kube-system.kube-proxy
--- /tmp/LIVE-1353412465/v1.ConfigMap.kube-system.kube-proxy    2023-10-03 23:00:21.016935582 +0000
+++ /tmp/MERGED-1463100091/v1.ConfigMap.kube-system.kube-proxy  2023-10-03 23:00:21.016935582 +0000
@@ -33,7 +33,7 @@
       excludeCIDRs: []
       minSyncPeriod: 0s
       scheduler: rr
-      strictARP: false
+      strictARP: true
       syncPeriod: 30s
       tcpFinTimeout: 0s
       tcpTimeout: 0s
</code></pre>

<h2>List Resources in a Namespace</h2>
<p>To identify resources in a namespace:</p>
<pre class="codehilite"><code class="language-bash">kubectl api-resources --verbs=list --namespaced=true | awk '{ print $1 }' | xargs -n 1 kubectl get -n default
</code></pre>

<h2>Nodes</h2>
<p>Check nodes:</p>
<pre class="codehilite"><code class="language-bash">kubectl get nodes -o wide
</code></pre>

<p>Check if nodes have taints applied:</p>
<pre class="codehilite"><code class="language-bash">kubectl get nodes -o json | jq '.items[] | {name: .metadata.name, taints: .spec.taints}'
</code></pre>

<h2>Pods</h2>
<p>View pods:</p>
<pre class="codehilite"><code class="language-bash">kubectl get pods -n monitoring
</code></pre>

<p>View pods by label selector:</p>
<pre class="codehilite"><code class="language-bash">kubectl get pods -n monitoring --selector 'app.kubernetes.io/name=promtail' -w -o wide
</code></pre>

<h2>Deployments</h2>
<p>Rollout Restart:</p>
<pre class="codehilite"><code class="language-bash">kubectl rollout restart deployment/foo -n test
</code></pre>

<p>Status of Rollout Restart:</p>
<pre class="codehilite"><code class="language-bash">kubectl rollout status deployment foo -n test
</code></pre>

<h2>Manipulate Output</h2>
<p>Display only the pod name with label selectors:</p>
<pre class="codehilite"><code class="language-bash">kubectl get pods -n gitea -o custom-columns=NAME:.metadata.name -l 'app=gitea' --no-headers
# gitea-69f6b67895-6hwq6
</code></pre>

<h2 id="secrets">Secrets</h2>
<h3><a id="create-secret-from-file" href="#create-secret-from-file">Create Secret from File</a></h3>
<p>Create two files with the username and password:</p>
<pre class="codehilite"><code class="language-bash">echo -n 'admin' &gt; ./username.txt
echo -n '1f2d1e2e67df' &gt; ./password.txt
</code></pre>

<p>Create the secret:</p>
<pre class="codehilite"><code class="language-bash">kubectl create secret generic db-secrets --from-file=admin-user=./username.txt --from-file=password=./password.txt
</code></pre>

<h3><a id="create-secret-from-literals" href="#create-secret-from-literals">Create Secret from Literals</a></h3>
<p>Create the secret by specifying the values in the command:</p>
<pre class="codehilite"><code class="language-bash">kubectl create secret generic db-secrets --from-literal=admin-user=admin --from-literal=password='1f2d1e2e67df'
</code></pre>

<h3><a id="view-secrets" href="#view-secrets">View Secrets</a></h3>
<p>You can use <code>jsonpath</code>:</p>
<pre class="codehilite"><code class="language-bash">kubectl get secret mongodb-operator-passwords -o yaml -o jsonpath='{.data.password}'
</code></pre>

<p>The value is encoded with <code>base64</code>, to decode it:</p>
<pre class="codehilite"><code class="language-bash">kubectl get secret mongodb-operator-passwords -o yaml -o jsonpath='{.data.password}' | base64 -d ; echo
</code></pre>

<p>You can use <code>jq</code> to view secrets</p>
<pre class="codehilite"><code class="language-bash">kubectl get secret mongodb-operator-passwords -o json | jq -r '.data | with_entries(.value |= @base64d)'
</code></pre></div>
        </div>
    </div>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <script>
        hljs.highlightAll();
    </script>
</body>
</html>
