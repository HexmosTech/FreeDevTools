<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Docker Cheatsheet</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github.min.css">
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            line-height: 1.6;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f8f9fa;
        }
        .container {
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        .header {
            background: #2c3e50;
            color: white;
            padding: 20px;
            border-bottom: 1px solid #34495e;
        }
        .header h1 {
            margin: 0;
            font-size: 1.5em;
        }
        .content {
            padding: 20px;
        }
        pre {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 4px;
            padding: 16px;
            overflow-x: auto;
            margin: 0;
        }
        code {
            font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
            font-size: 14px;
        }
        .markdown-content {
            line-height: 1.7;
        }
        .markdown-content h1, .markdown-content h2, .markdown-content h3 {
            color: #2c3e50;
            border-bottom: 1px solid #e9ecef;
            padding-bottom: 8px;
        }
        .markdown-content pre {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 4px;
            padding: 16px;
            overflow-x: auto;
        }
        .markdown-content code {
            background: #f1f3f4;
            padding: 2px 4px;
            border-radius: 3px;
            font-size: 0.9em;
        }
        .markdown-content pre code {
            background: none;
            padding: 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Docker Cheatsheet</h1>
        </div>
        <div class="content">
            <div class="markdown-content"><h1>Docker Cheat Sheet</h1>
<h3>Handy Aliases</h3>
<pre class="codehilite"><code class="language-bash">alias dc='docker-compose'
alias de='docker-machine env'
alias di='docker images'
alias dl='docker-machine ls'
alias dm='docker-machine'
alias dps='docker ps'
alias dpsa='docker ps -a'
</code></pre>

<h4>Docker boilerplates</h4>
<p>See <a href="https://github.com/gauthamp10/dockerfile-boilerplates">Docker boilerplates a.k.a templates for most programming language</a>.</p>
<h4>Run an image</h4>
<p>Run a Docker container in detached mode and expose port 8080.</p>
<pre class="codehilite"><code class="language-bash">$ docker run -d --name my_docker -p 8080:8080 image_name
</code></pre>

<h4>Get the IP Address</h4>
<p><code>$ docker inspect -f "{{ .NetworkSettings.IPAddress }}" my_docker</code></p>
<h4>Attach to a container</h4>
<p>Attach to a running Docker container by ID.</p>
<pre class="codehilite"><code class="language-bash">$ docker exec -it 32adfbf6eb62 /bin/bash
</code></pre>

<p>Attach to a running Docker container by name and enter a Bash shell.</p>
<pre class="codehilite"><code class="language-bash">$ docker exec -it my_docker /bin/bash
</code></pre>

<p>To detach use the following escape sequence: <code>CTRL + p CTRL + q</code>.</p>
<h4>Mount current directory</h4>
<pre class="codehilite"><code class="language-bash">docker run --rm -v ${PWD}:/home/jovyan/work jupyter/scipy-notebook
</code></pre>

<p>On Windows. Note the above works with PowerShell.</p>
<pre class="codehilite"><code class="language-bash">docker run --rm %cd%:/home/jovyan/work jupyter/scipy-notebook
</code></pre>

<p>See https://stackoverflow.com/a/41489151</p>
<h4>Stop a container</h4>
<pre class="codehilite"><code class="language-bash">$ docker kill &lt;container_id&gt;
</code></pre>

<h4>Remove stopped container</h4>
<pre class="codehilite"><code class="language-bash">$ docker rm &lt;container_id&gt;
</code></pre>

<h4>Remove multiple containers</h4>
<pre class="codehilite"><code class="language-bash">docker rm $(docker ps --filter status=exited -q)
</code></pre>

<p>Or, using <code>xargs</code>:</p>
<pre class="codehilite"><code class="language-bash">docker ps --filter status=exited -q | xargs docker rm
</code></pre>

<p><a href="https://docs.docker.com/engine/reference/commandline/rm/">docker rm</a></p>
<h4>Start container with remove switch</h4>
<pre class="codehilite"><code class="language-bash">$ docker run -d --name my_docker image_name --rm
</code></pre>

<p>See <a href="http://stackoverflow.com/a/35122815/6146580">single command to stop and remove docker container</a></p>
<h4>See all containers</h4>
<pre class="codehilite"><code class="language-bash">$ docker ps -a
</code></pre>

<h4>Clean up everything</h4>
<pre class="codehilite"><code class="language-bash">$ docker system prune
</code></pre>

<h4>Remove all exited containers</h4>
<p><code>$ docker rm $(docker ps -a -f status=exited -q)</code></p>
<h4>Remove all stopped containers</h4>
<p><code>$ docker rm $(docker ps -a -q)</code></p>
<h4>See all images</h4>
<p><code>$ docker images -a</code></p>
<h4>Format image list</h4>
<pre class="codehilite"><code class="language-bash">$ docker images --format &quot;table {{.Repository}}\\t{{.Tag}}\\t{{.ID}}&quot;
</code></pre>

<p>Store the format in <code>~/.docker/config.json</code>. E.g.</p>
<pre class="codehilite"><code class="language-json">{
    &quot;psFormat&quot;: &quot;table {{.Names}}\\t{{.Image}}\\t{{.RunningFor}} ago\\t{{.Status}}\\t{{.Command}}&quot;,
    &quot;imagesFormat&quot;: &quot;table {{.Repository}}\\t{{.Tag}}\\t{{.ID}}\\t{{.Size}}&quot;
}
</code></pre>

<p><a href="http://container42.com/2016/03/27/docker-quicktip-7-psformat/">See Docker Quicktip #7: docker ps --format</a>.</p>
<h4>Remove all untagged images</h4>
<pre class="codehilite"><code class="language-bash">$ docker rmi $(docker images -q -f dangling=true)
$ docker rmi $(docker images | grep &quot;^&lt;none&gt;&quot; | awk '{print $3}')
$ docker images -q -a | xargs --no-run-if-empty docker rmi
</code></pre>

<h4>Remove images by tag</h4>
<pre class="codehilite"><code class="language-bash">docker rmi $(docker images --filter reference=*/*/my-image*:* -q)
</code></pre>

<p><a href="https://stackoverflow.com/a/47265229/6146580">How can I delete Docker images by tag, preferably with wildcarding?</a><br />
<a href="https://docs.docker.com/config/filter/">Docker | Using filters</a></p>
<h4>List volumes</h4>
<pre class="codehilite"><code class="language-bash">$docker volume ls
$docker volume ls -f dangling=true
</code></pre>

<h4>Remove all unused volumes</h4>
<pre class="codehilite"><code class="language-bash">$ docker volume prune
$ docker volume prune -f # Bypasses prompt
</code></pre>

<h4>Create a named volume</h4>
<pre class="codehilite"><code class="language-bash">$ docker volume create db_data
</code></pre>

<h4>Create a minimal container to view a volume's files</h4>
<pre class="codehilite"><code class="language-bash">docker run --rm -i -v=postgres-data:/tmp/myvolume busybox find /tmp/myvolume
</code></pre>

<h4>Rebuild when composing</h4>
<pre class="codehilite"><code class="language-bash">$ docker-compose up -d --build
</code></pre>

<h4>Tag image after building it</h4>
<pre class="codehilite"><code class="language-bash">$ docker build -t dev:latest .
</code></pre>

<h2>Other Cheat Sheets</h2>
<p><a href="https://github.com/wsargent/docker-cheat-sheet">Docker Cheat Sheet</a> by <a href="https://github.com/wsargent">wsargent</a></p>
<h2>Resources</h2>
<ul>
<li><a href="https://github.com/veggiemonk/awesome-docker">Awesome Docker</a></li>
<li><a href="https://github.com/docker/docker-bench-security">Docker Bench Security</a></li>
<li><a href="http://jimhoskins.com/2013/07/27/remove-untagged-docker-images.html">Remove Untagged Images From Docker</a></li>
<li><a href="http://www.projectatomic.io/blog/2015/07/what-are-docker-none-none-images/">What are Docker \&lt;none&gt;:\&lt;none&gt; images?</a></li>
<li><a href="http://blog.yohanliyanage.com/2015/05/docker-clean-up-after-yourself/">Docker â€“ Clean Up After Yourself!</a></li>
<li><a href="https://gist.github.com/ngpestelos/4fc2e31e19f86b9cf10b">How to remove unused Docker containers and images</a></li>
<li><a href="https://docs.docker.com/engine/reference/commandline/rmi/">docker rmi</a></li>
<li><a href="https://stackoverflow.com/questions/19688314/how-do-you-attach-and-detach-from-dockers-process">How do you attach and detach from Docker's process?</a></li>
<li><a href="http://stackoverflow.com/a/32723127/6146580">How to remove old and unused Docker images</a></li>
<li><a href="https://forums.docker.com/t/how-to-remove-none-images-after-building/7050/10">How to remove \&lt;none&gt; images after building</a></li>
<li><a href="https://www.digitalocean.com/community/tutorials/how-to-remove-docker-images-containers-and-volumes">How To Remove Docker Images, Containers, and Volumes</a></li>
<li><a href="https://stackoverflow.com/a/36330903">How to list the content of a named volume in docker 1.9+?</a></li>
<li><a href="https://stackoverflow.com/a/45606440">How to persist data in a dockerized postgres database using volumes</a></li>
</ul></div>
        </div>
    </div>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <script>
        hljs.highlightAll();
    </script>
</body>
</html>