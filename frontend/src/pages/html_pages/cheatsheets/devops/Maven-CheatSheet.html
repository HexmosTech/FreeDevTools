<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Maven Cheatsheet</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github.min.css">
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            line-height: 1.6;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f8f9fa;
        }
        .container {
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        .header {
            background: #2c3e50;
            color: white;
            padding: 20px;
            border-bottom: 1px solid #34495e;
        }
        .header h1 {
            margin: 0;
            font-size: 1.5em;
        }
        .content {
            padding: 20px;
        }
        pre {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 4px;
            padding: 16px;
            overflow-x: auto;
            margin: 0;
        }
        code {
            font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
            font-size: 14px;
        }
        .markdown-content {
            line-height: 1.7;
        }
        .markdown-content h1, .markdown-content h2, .markdown-content h3 {
            color: #2c3e50;
            border-bottom: 1px solid #e9ecef;
            padding-bottom: 8px;
        }
        .markdown-content pre {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 4px;
            padding: 16px;
            overflow-x: auto;
        }
        .markdown-content code {
            background: #f1f3f4;
            padding: 2px 4px;
            border-radius: 3px;
            font-size: 0.9em;
        }
        .markdown-content pre code {
            background: none;
            padding: 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Maven Cheatsheet</h1>
        </div>
        <div class="content">
            <div class="markdown-content"><h1>Maven Cheat Sheet</h1>
<h3>Generate from archetype</h3>
<pre class="codehilite"><code>mvn archetype:generate
</code></pre>

<p>For example to generate a Dropwizard poject.</p>
<pre class="codehilite"><code>mvn archetype:generate \
  -DarchetypeGroupId=io.dropwizard.archetypes \
  -DarchetypeArtifactId=java-simple \
  -DarchetypeVersion=4.0.8
</code></pre>

<p>There is also the JDK8 QuickStart.</p>
<pre class="codehilite"><code>mvn org.apache.maven.plugins:maven-archetype-plugin:3.1.2:generate \
  -DarchetypeArtifactId=&quot;archetype-quickstart-jdk8&quot; \
  -DarchetypeGroupId=&quot;com.github.ngeor&quot; \
  -DarchetypeVersion=&quot;2.8.1&quot; \
  -DgroupId=&quot;com.example&quot; \
  -DartifactId=&quot;demo&quot;
</code></pre>

<details>
  <summary>Results</summary>


<pre class="codehilite"><code>[INFO] --- archetype:3.1.2:generate (default-cli) @ standalone-pom ---
[INFO] Generating project in Interactive mode
[INFO] Archetype repository not defined. Using the one from [com.github.ngeor:archetype-quickstart-jdk8:3.0.0] found in catalog remote
[INFO] Using property: groupId = com.example
[INFO] Using property: artifactId = demo
Define value for property 'version' 1.0-SNAPSHOT: :
[INFO] Using property: package = com.example
Confirm properties configuration:
groupId: com.example
artifactId: demo
version: 1.0-SNAPSHOT
package: com.example
 Y: :
[INFO] ----------------------------------------------------------------------------
[INFO] Using following parameters for creating project from Archetype: archetype-quickstart-jdk8:2.8.1
[INFO] ----------------------------------------------------------------------------
[INFO] Parameter: groupId, Value: com.example
[INFO] Parameter: artifactId, Value: demo
[INFO] Parameter: version, Value: 1.0-SNAPSHOT
[INFO] Parameter: package, Value: com.example
[INFO] Parameter: packageInPathFormat, Value: com/example
[INFO] Parameter: package, Value: com.example
[INFO] Parameter: groupId, Value: com.example
[INFO] Parameter: artifactId, Value: demo
[INFO] Parameter: version, Value: 1.0-SNAPSHOT
[INFO] Project created from Archetype in dir: D:\Users\ghays\poc\demo
[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESS
[INFO] ------------------------------------------------------------------------
[INFO] Total time:  01:18 min
[INFO] Finished at: 2024-09-19T16:37:28-05:00
[INFO] ------------------------------------------------------------------------
</code></pre>


</details>

<h3>Maven Configuration</h3>
<p><code>.mvn</code> directory:
Located within the project's top level directory, the files
- <code>maven.config</code>
- <code>jvm.config</code>
- <code>extensions.xml</code></p>
<p><code>.mvn/maven.config</code> file:
NOTICE starting with Maven 3.9.0 each single argument must be put on a new line, so for the mentioned example your file will have content like:</p>
<pre class="codehilite"><code>-T3
-U 
--fail-at-end
</code></pre>

<h4>References</h4>
<ul>
<li><a href="https://maven.apache.org/configure.html">Configuring Apache Maven</a></li>
<li><a href="https://gist.github.com/LIttleAncientForestKami/46351176bc76538324f1809db0f2f79d">Maven and Java</a></li>
</ul>
<h3>Get project version</h3>
<pre class="codehilite"><code>mvn -q -Dexec.executable=&quot;echo&quot; -Dexec.args='${project.version}' --non-recursive exec:exec
1.0.0-SNAPSHOT
</code></pre>

<h3>Run a single test case</h3>
<pre class="codehilite"><code>mvn -Dtest=&lt;file&gt; test
</code></pre>

<p>Run a single test method</p>
<pre class="codehilite"><code>mvn -Dtest=TestClass#testMethod test
</code></pre>

<p>Debug tests -- tests will pause and await remote debugger on port 5005</p>
<pre class="codehilite"><code>mvn -Dtest=&lt;file&gt; -Dmaven.surefire.debug test
</code></pre>

<p>See <a href="https://maven.apache.org/surefire/maven-surefire-plugin/examples/debugging.html">Maven - Debugging Tests</a><br/>
See also: <a href="https://www.mkyong.com/maven/how-to-run-unit-test-with-maven/">How to run unit test with Maven</a></p>
<h3>Property references</h3>
<pre class="codehilite"><code>project.build.sourceDirectory
project.build.scriptSourceDirectory
project.build.testSourceDirectory
project.build.outputDirectory
project.build.testOutputDirectory
project.build.directory
</code></pre>

<p>See <a href="https://stackoverflow.com/a/13354567/6146580">Maven project.build.directory</a></p>
<h3>Remove platform encoding warning</h3>
<pre class="codehilite"><code class="language-xml">&lt;project ...&gt;
 ...
 &lt;properties&gt;
   &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;
   ...
 &lt;/properties&gt;
 ..
&lt;/project&gt;
</code></pre>

<h3>Get a dependency tree</h3>
<pre class="codehilite"><code class="language-bash">mvn dependency:tree
</code></pre>

<p>Filter on a specific group ID.</p>
<pre class="codehilite"><code class="language-bash">mvn dependency:tree | grep -n -A 5 -B 20 &quot;io.github&quot;
</code></pre>

<h3>Analyze dependencies</h3>
<pre class="codehilite"><code class="language-bash">mvn dependency:analyze
</code></pre>

<h3>Purge local Maven repository</h3>
<pre class="codehilite"><code class="language-bash">mvn dependency:purge-local-repository
</code></pre>

<h3>Override local repository</h3>
<pre class="codehilite"><code class="language-bash">mvn -Dmaven.repo.local=/build/.m2/repository
</code></pre>

<h3>Custom User settings file</h3>
<pre class="codehilite"><code class="language-bash">-s,--settings &lt;arg&gt; e.g.

mvn -s ~/custom/settings.xml
</code></pre>

<h3>Use global settings file</h3>
<pre class="codehilite"><code class="language-bash">-gs,--global-settings &lt;arg&gt; e.g.

mvn -gs /build/settings.xml
</code></pre>

<h3>Logging Level</h3>
<pre class="codehilite"><code class="language-bash">mvn clean package -Dorg.slf4j.simpleLogger.defaultLogLevel=DEBUG
</code></pre>

<p>Alternatively, you can edit it in <code>${MAVEN_HOME}/conf/logging/simplelogger.properties</code> or by creating <code>.mvn/jvm.config</code>.</p>
<h3>Force Update from Remote Repository</h3>
<pre class="codehilite"><code class="language-bash">-U,--update-snapshots e.g.

mvn -U
</code></pre>

<h3>Log File</h3>
<p><strong>Note</strong>: Suppresses output to the console.</p>
<pre class="codehilite"><code class="language-bash">-l,--log-file &lt;arg&gt; e.g.

mvn -l maven.log
</code></pre>

<h3>Batch Mode</h3>
<pre class="codehilite"><code class="language-bash">mvn -B
</code></pre>

<h3>Parallel Builds</h3>
<p>1 thread per available CPU core</p>
<pre class="codehilite"><code class="language-bash">mvn -T 1C
</code></pre>

<p>Alternatively</p>
<pre class="codehilite"><code class="language-bash">mvn -T 4 install -- will use 4 threads
mvn -T 2C install -- will use 2 threads per available CPU core
</code></pre>

<ol>
<li><a href="https://jrebel.com/rebellabs/your-maven-build-is-slow-speed-it-up/">Your Maven build is slow. Speed it up!</a></li>
<li><a href="https://www.jrebel.com/blog/how-to-speed-up-your-maven-build">How to Speed up Your Maven Build</a></li>
</ol>
<h3>List Modules and Directories</h3>
<p>Reactor Build Order</p>
<pre class="codehilite"><code>mvn validate
</code></pre>

<p>List modules by Artifact ID</p>
<p><strong>Note</strong>: On Windows, use double quotes (<code>"</code>) in the <code>awk</code> statement</p>
<pre class="codehilite"><code>mvn --also-make dependency:tree | grep maven-dependency-plugin | awk '{ print $(NF-1) }'
</code></pre>

<p>This variant does not require <code>awk</code>. As above, use double quotes for Windows.</p>
<pre class="codehilite"><code>mvn -Dexec.executable='echo' -Dexec.args='${project.artifactId}' exec:exec -q
</code></pre>

<p>List Module Directories</p>
<pre class="codehilite"><code>mvn -q --also-make exec:exec -Dexec.executable=&quot;pwd&quot;
</code></pre>

<ol>
<li><a href="https://stackoverflow.com/questions/3662291/how-to-list-active-sub-modules-in-a-maven-project">How to list active sub-modules in a Maven project?</a></li>
<li><a href="https://stackoverflow.com/questions/21170453/how-to-list-the-maven-build-compilation-sequence-based-on-dependencies">How to list the Maven build/compilation sequence based on dependencies?</a></li>
<li><a href="https://blog.sonatype.com/2009/10/maven-tips-and-tricks-advanced-reactor-options/">Maven Tips and Tricks: Advanced Reactor Options</a></li>
</ol>
<h3>Local Dependencies</h3>
<pre class="codehilite"><code class="language-xml">&lt;dependency&gt;
    &lt;groupId&gt;com.sample&lt;/groupId&gt;
    &lt;artifactId&gt;sample&lt;/artifactId&gt;
    &lt;version&gt;1.0&lt;/version&gt;
    &lt;scope&gt;system&lt;/scope&gt;
    &lt;systemPath&gt;${project.basedir}/src/main/resources/yourJar.jar&lt;/systemPath&gt;
&lt;/dependency&gt;
</code></pre>

<p>See <a href="https://stackoverflow.com/a/22300875">How to add local jar files to a Maven project?</a>.</p>
<p>Alternatively</p>
<pre class="codehilite"><code class="language-bash">mvn install:install-file
   -Dfile=&lt;path-to-file&gt;
   -DgroupId=&lt;group-id&gt;
   -DartifactId=&lt;artifact-id&gt;
   -Dversion=&lt;version&gt;
   -Dpackaging=&lt;packaging&gt;
   -DgeneratePom=true

Where: &lt;path-to-file&gt;  the path to the file to load
   &lt;group-id&gt;      the group that the file should be registered under
   &lt;artifact-id&gt;   the artifact name for the file
   &lt;version&gt;       the version of the file
   &lt;packaging&gt;     the packaging of the file e.g. jar
</code></pre>

<h3>Effective POM</h3>
<pre class="codehilite"><code class="language-bash">mvn help:effective-pom
</code></pre>

<p>Or</p>
<pre class="codehilite"><code class="language-bash">mvn -q help:effective-pom -Deffective-pom.xml
</code></pre>

<p><a href="https://stackoverflow.com/a/49736042/6146580">What are the difference between pom.xml and effective pom in Apache Maven?</a><br />
<a href="https://maven.apache.org/plugins/maven-help-plugin/effective-pom-mojo.html">Apache Maven Help Plugin</a><br />
<a href="https://maven.apache.org/plugins/maven-help-plugin/usage.html">Maven Help Plugin Usage</a></p>
<h3>Generate Maven Project</h3>
<pre class="codehilite"><code class="language-bash">mvn -B archetype:generate
    -DarchetypeGroupId=org.apache.maven.archetypes
    -DgroupId=com.log4j.maven
    -DartifactId=dependency-example
</code></pre>

<p><a href="https://www.theserverside.com/tutorial/Fix-broken-builds-with-this-log4j-Maven-dependency-example">Fix broken builds with this log4j Maven dependency example</a></p>
<p>Quick Start</p>
<pre class="codehilite"><code class="language-bash">mvn archetype:generate \
    -DarchetypeGroupId=org.apache.maven.archetypes \
    -DarchetypeArtifactId=maven-archetype-quickstart
</code></pre>

<h2>Plugins</h2>
<h3>Execute a specific plugin goal by ID</h3>
<pre class="codehilite"><code class="language-bash">mvn sql:execute@create-db
</code></pre>

<p>See <a href="https://stackoverflow.com/a/33279426/6146580">Maven plugin execution ID</a><br/>
See also: <a href="https://stackoverflow.com/a/28778436/6146580">Run a single Maven plugin execution?</a>z<br/>
See also: <a href="https://www.mojohaus.org/sql-maven-plugin/examples/execute.html">SQL Maven Plugin#Executions</a></p>
<h3>Shade or Uber JAR</h3>
<p>Automatically remove classes not being used.</p>
<pre class="codehilite"><code class="language-xml">&lt;project&gt;
  ...
  &lt;build&gt;
    &lt;plugins&gt;
      &lt;plugin&gt;
        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
        &lt;artifactId&gt;maven-shade-plugin&lt;/artifactId&gt;
        &lt;version&gt;3.1.0&lt;/version&gt;
        &lt;executions&gt;
          &lt;execution&gt;
            &lt;phase&gt;package&lt;/phase&gt;
            &lt;goals&gt;
              &lt;goal&gt;shade&lt;/goal&gt;
            &lt;/goals&gt;
            &lt;configuration&gt;
              &lt;minimizeJar&gt;true&lt;/minimizeJar&gt;
            &lt;/configuration&gt;
          &lt;/execution&gt;
        &lt;/executions&gt;
      &lt;/plugin&gt;
    &lt;/plugins&gt;
  &lt;/build&gt;
  ...
&lt;/project&gt;
</code></pre>

<p>See <a href="https://maven.apache.org/plugins/maven-shade-plugin/examples/includes-excludes.html">Selecting Contents for Uber JAR</a>.</p>
<h3>Release Plugin</h3>
<pre class="codehilite"><code class="language-xml">&lt;plugin&gt;
  &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
  &lt;artifactId&gt;maven-release-plugin&lt;/artifactId&gt;
  &lt;version&gt;2.5.3&lt;/version&gt;
  &lt;configuration&gt;
    &lt;tagNameFormat&gt;v@{project.version}&lt;/tagNameFormat&gt;
  &lt;/configuration&gt;
&lt;/plugin&gt;
</code></pre>

<p><a href="https://maven.apache.org/maven-release/maven-release-plugin/examples/prepare-release.html">Maven Release Plugin &gt; Prepare a Release</a></p>
<h2>Maven Lifecycle</h2>
<pre class="codehilite"><code>Lifecycle default -&gt; [validate, initialize, generate-sources, process-sources,
generate-resources, process-resources, compile, process-classes, generate-test-sources,
process-test-sources, generate-test-resources, process-test-resources, test-compile,
process-test-classes, test, prepare-package, package, pre-integration-test, integration-test,
post-integration-test, verify, install, deploy]
[DEBUG] Lifecycle clean -&gt; [pre-clean, clean, post-clean]
[DEBUG] Lifecycle site -&gt; [pre-site, site, post-site, site-deploy]
</code></pre>

<h2>Profiles</h2>
<h3>Deactivate a Profile</h3>
<pre class="codehilite"><code class="language-bash">mvn groupId:artifactId:goal -P !profile-1,!profile-2
</code></pre>

<p>With escape</p>
<pre class="codehilite"><code class="language-bash">mvn groupId:artifactId:goal -P \!profile-1
</code></pre>

<p>Or, as Shaun Morris suggested below, use - instead of !, but without whitespace between -P and the profiles:</p>
<pre class="codehilite"><code class="language-bash">mvn groupId:artifactId:goal -P-profile-1,-profile2
</code></pre>

<p><a href="https://stackoverflow.com/a/25201551">De-activate a maven profile from command line</a></p>
<h2>Command Line Options</h2>
<p>(Frequently used by me)</p>
<table>
<thead>
<tr>
<th>Options</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>-B,--batch-mode</td>
<td>Run in non-interactive (batch) mode (disables output color)</td>
</tr>
<tr>
<td>-D,--define</td>
<td>Define a system property</td>
</tr>
<tr>
<td>-e,--errors</td>
<td>Produce execution error messages</td>
</tr>
<tr>
<td>-f,--file</td>
<td>Force the use of an alternate POM file (or directory with pom.xml)</td>
</tr>
<tr>
<td>-N,--non-recursive</td>
<td>Do not recurse into sub-projects</td>
</tr>
<tr>
<td>-o,--offline</td>
<td>Work offline</td>
</tr>
<tr>
<td>-P,--activate-profiles</td>
<td>Comma-delimited list of profiles to activate</td>
</tr>
<tr>
<td>-pl,--projects</td>
<td>Comma-delimited list of specified reactor projects to build instead of all projects. A project can be specified by [groupId]:artifactId or by its relative path</td>
</tr>
<tr>
<td>-rf,--resume-from</td>
<td>Resume reactor from specified project</td>
</tr>
<tr>
<td>-s,--settings</td>
<td>Alternate path for the user settings file</td>
</tr>
<tr>
<td>-U,--update-snapshots</td>
<td>Forces a check for missing releases and updated snapshots on remote repositories</td>
</tr>
<tr>
<td>-v,--version</td>
<td>Display version information</td>
</tr>
<tr>
<td>-X,--debug</td>
<td>Produce execution debug output</td>
</tr>
</tbody>
</table>
<p>See all: <a href="https://books.sonatype.com/mvnref-book/reference/running-sect-options.html">Maven Command Line Options</a></p>
<h2>References</h2>
<ol>
<li><a href="https://www.digitalocean.com/community/tutorials/maven-commands-options-cheat-sheet">20+ Maven Commands and Options (Cheat Sheet)</a></li>
<li><a href="http://stackoverflow.com/a/16592061/6146580">Maven - alternative .m2 directory</a></li>
<li><a href="https://confluence.atlassian.com/bamkb/how-to-override-the-maven-local-repository-setting-838546993.html">How to Override the Maven Local Repository setting</a></li>
<li><a href="https://maven.apache.org/ref/3.6.0/maven-embedder/cli.html">Maven CLI Options Reference</a></li>
<li><a href="https://maven.apache.org/plugins/maven-dependency-plugin/examples/purging-local-repository.html">Purging local repository dependencies</a></li>
<li><a href="https://stackoverflow.com/a/47906431">What are all of the Maven Command Line Options?</a></li>
<li>Maven logging: <a href="https://binkley.blogspot.com/2017/04/maven-logging-and-command-line.html">Maven logging and the command line</a> and <a href="https://stackoverflow.com/a/19319402/6146580">How to change maven logging level...</a></li>
<li><a href="https://www.geeksforgeeks.org/maven-commands-and-options/">Maven Commands and Options</a></li>
<li><a href="https://maven.apache.org/guides/getting-started/maven-in-five-minutes.html">Maven in 5 Minutes</a></li>
</ol></div>
        </div>
    </div>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <script>
        hljs.highlightAll();
    </script>
</body>
</html>