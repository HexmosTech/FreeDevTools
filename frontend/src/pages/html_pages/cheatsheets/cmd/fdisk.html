<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fdisk Command - Linux Disk Partitioning Tool</title>
    <meta name="description" content="Master the fdisk command for Linux disk partitioning. Learn to list, create, delete, and manage disk partitions effectively with practical examples.">
    <meta name="keywords" content="fdisk, linux, disk partitioning, partition table, manage disks, command line, ext4, xfs, mkfs, lsblk, parted">
    <link rel="canonical" href="https://yourdomain.com/cmd/fdisk.html">
    <meta name="robots" content="index, follow">
    <meta property="og:title" content="Fdisk Command - Linux Disk Partitioning Tool">
    <meta property="og:description" content="Master the fdisk command for Linux disk partitioning. Learn to list, create, delete, and manage disk partitions effectively with practical examples.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://yourdomain.com/cmd/fdisk.html">
    <meta property="og:image" content="https://yourdomain.com/images/fdisk-og.jpg">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Fdisk Command - Linux Disk Partitioning Tool">
    <meta name="twitter:description" content="Master the fdisk command for Linux disk partitioning. Learn to list, create, delete, and manage disk partitions effectively with practical examples.">
    <meta name="twitter:image" content="https://yourdomain.com/images/fdisk-twitter.jpg">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github.min.css">
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            line-height: 1.6;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f8f9fa;
        }
        .container {
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        .header {
            background: #2c3e50;
            color: white;
            padding: 20px;
            border-bottom: 1px solid #34495e;
        }
        .header h1 {
            margin: 0;
            font-size: 1.5em;
        }
        .content {
            padding: 20px;
        }
        pre {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 4px;
            padding: 16px;
            overflow-x: auto;
            margin: 0;
        }
        code {
            font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
            font-size: 14px;
        }
        .markdown-content {
            line-height: 1.7;
        }
        .markdown-content h1, .markdown-content h2, .markdown-content h3 {
            color: #2c3e50;
            border-bottom: 1px solid #e9ecef;
            padding-bottom: 8px;
        }
        .markdown-content pre {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 4px;
            padding: 16px;
            overflow-x: auto;
        }
        .markdown-content code {
            background: #f1f3f4;
            padding: 2px 4px;
            border-radius: 3px;
            font-size: 0.9em;
        }
        .markdown-content pre code {
            background: none;
            padding: 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Fdisk Command Guide</h1>
        </div>
        <div class="content">
            <div class="markdown-content">
                <h2>Understanding the Fdisk Command</h2>
                <p>The <code>fdisk</code> command is a powerful, text-based utility for manipulating disk partition tables in Linux and other Unix-like operating systems. It allows users to create, delete, modify, and manage partitions on hard drives, SSDs, and other block devices. Understanding <code>fdisk</code> is crucial for system administration, disk management, and troubleshooting storage issues.</p>

                <h2>Fdisk Command Syntax and Basic Usage</h2>
                <p>The primary function of <code>fdisk</code> is to interact with a specified disk device. Here's a breakdown of its common syntax and options:</p>
                <pre><code class="language-bash"># List partitions on a block device (e.g., /dev/sda)
fdisk -l [BLKDEV]

# General usage for changing partition table
fdisk [options] &lt;disk&gt;

# General usage for listing partition table(s)
fdisk [options] -l &lt;disk&gt;

# Get partition size(s) in blocks
fdisk -s &lt;partition&gt;
</code></pre>

                <h3>Common Fdisk Options</h3>
                <ul>
                    <li><code>-b &lt;size&gt;</code>: Sets the sector size (e.g., 512, 1024, 2048, 4096).</li>
                    <li><code>-c[=&lt;mode&gt;]</code>: Enables compatible mode, either 'dos' or 'nondos' (default).</li>
                    <li><code>-h</code>: Displays the help text.</li>
                    <li><code>-u[=&lt;unit&gt;]</code>: Specifies the display units for sizes, either 'cylinders' or 'sectors' (default).</li>
                    <li><code>-v</code>: Shows the program version.</li>
                    <li><code>-C &lt;number&gt;</code>: Sets the number of cylinders.</li>
                    <li><code>-H &lt;number&gt;</code>: Sets the number of heads.</li>
                    <li><code>-S &lt;number&gt;</code>: Sets the number of sectors per track.</li>
                </ul>

                <h2>Interactive Fdisk Commands</h2>
                <p>Once you enter the interactive mode of <code>fdisk</code> (by running <code>fdisk /dev/sdX</code> where <code>sdX</code> is your disk), you can use several commands:</p>
                <ul>
                    <li><code>p</code>: Displays the current partition table.</li>
                    <li><code>d</code>: Deletes a partition. You will be prompted to enter the partition number.</li>
                    <li><code>l</code> or <code>L</code>: Lists all known partition types.</li>
                    <li><code>n</code>: Creates a new partition. You'll be guided through specifying the partition type, number, first sector, and last sector (or size).</li>
                    <li><code>t</code>: Changes the type of a partition. You'll need to know the partition type code.</li>
                    <li><code>w</code>: Writes the changes to the disk and exits. Use with caution!</li>
                    <li><code>q</code>: Quits without saving changes.</li>
                </ul>

                <h2>Managing New and Existing Disks</h2>
                <p>When adding a new physical disk or extending an existing one (common in virtual machine environments), <code>fdisk</code> plays a key role. Here's a typical workflow:</p>

                <h3>Adding a New Physical Disk</h3>
                <ol>
                    <li><strong>Identify the new disk:</strong> Use <code>lsblk</code> to see available block devices and identify the new disk (e.g., <code>/dev/sdd</code>).</li>
                    <li><strong>Start fdisk:</strong> Run <code>fdisk /dev/sdd</code>.</li>
                    <li><strong>Create a new partition:</strong> Use the <code>n</code> command to create a primary or extended partition. Follow the prompts to define its size and location.</li>
                    <li><strong>Set partition type (if necessary):</strong> Use the <code>t</code> command if you need to change the partition type.</li>
                    <li><strong>Write changes:</strong> Use the <code>w</code> command to save the partition table.</li>
                    <li><strong>Format the new partition:</strong> Use a filesystem command like <code>mkfs.xfs /dev/sdd1</code> or <code>mkfs.ext4 /dev/sdd1</code>.</li>
                    <li><strong>Get the UUID:</strong> Use <code>blkid /dev/sdd1</code> to find the partition's UUID.</li>
                    <li><strong>Update /etc/fstab:</strong> Add an entry to <code>/etc/fstab</code> to mount the new partition automatically on boot. For example: <code>UUID=&lt;blkid_output&gt; /mnt/new_drive xfs defaults 0 0</code>.</li>
                    <li><strong>Mount the partition:</strong> Use <code>mount -a</code> to mount all filesystems listed in <code>/etc/fstab</code>, or <code>mount /mnt/new_drive</code>.</li>
                    <li><strong>Verify:</strong> Use <code>df -h /mnt/new_drive</code> to check if it's mounted and showing the correct size.</li>
                </ol>

                <h3>Extending a Physical Disk (VM Example)</h3>
                <p>This process often involves resizing the virtual disk in your hypervisor, then using <code>fdisk</code> and filesystem tools to expand the partition:</p>
                <ol>
                    <li><strong>Unmount the drive:</strong> Comment out the relevant entry in <code>/etc/fstab</code> and unmount the partition (e.g., <code>umount /dev/sdc1</code>).</li>
                    <li><strong>Increase drive physical space:</strong> This is done at the hypervisor level (e.g., VMware, VirtualBox).</li>
                    <li><strong>Verify disk size:</strong> Use <code>parted /dev/sdc -p</code> to see the disk's reported size.</li>
                    <li><strong>Use fdisk to recreate the partition:</strong>
                        <ul>
                            <li>Run <code>fdisk /dev/sdc</code>.</li>
                            <li>Press <code>p</code> to print the current partition table. Note the start sector of the partition you want to extend.</li>
                            <li>Press <code>d</code> to delete the existing partition.</li>
                            <li>Press <code>n</code> to create a new partition. Choose the same partition number and ensure the start sector matches the old partition. For the end sector, accept the default to use the maximum available space.</li>
                            <li>Press <code>w</code> to write the changes.</li>
                        </ul>
                    </li>
                    <li><strong>Reboot (sometimes necessary):</strong> A reboot might be required for the kernel to recognize the partition table changes.</li>
                    <li><strong>Check filesystem integrity:</strong> Run <code>e2fsck -f /dev/sdc1</code> (replace <code>sdc1</code> with your partition).</li>
                    <li><strong>Resize the filesystem:</strong> Use <code>resize2fs /dev/sdc1</code>.</li>
                    <li><strong>Mount the partition:</strong> Uncomment the entry in <code>/etc/fstab</code> and mount the partition (e.g., <code>mount /dev/sdc1</code>).</li>
                    <li><strong>Verify:</strong> Check the size with <code>df -h /path/to/mountpoint</code>.</li>
                </ol>

                <h2>External Resources</h2>
                <ul>
                    <li><a href="https://man7.org/linux/man-pages/man8/fdisk.8.html" target="_blank" rel="noopener noreferrer">Fdisk man page</a></li>
                    <li><a href="https://www.gnu.org/software/parted/" target="_blank" rel="noopener noreferrer">GNU Parted</a> (an alternative partitioning tool)</li>
                    <li><a href="https://www.kernel.org/doc/html/latest/admin-guide/devices.html" target="_blank" rel="noopener noreferrer">Linux Device Drivers</a></li>
                </ul>
            </div>
        </div>
    </div>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <script>
        hljs.highlightAll();
    </script>
</body>
</html>