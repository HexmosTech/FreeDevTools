<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>
      Btrfs Commands - Manage Btrfs Filesystems | Online Free DevTools by Hexmos
    </title>
    <meta
      name="description"
      content="Learn essential Btrfs commands for managing Btrfs filesystems. Create, resize, add/remove devices, manage subvolumes, and take snapshots with our comprehensive guide."
    />
    <meta
      name="keywords"
      content="btrfs, btrfs commands, btrfs filesystem, btrfs subvolume, btrfs snapshot, linux filesystem, mkfs.btrfs, btrfs device add, btrfs device delete, btrfs subvolume create, btrfs subvolume list, btrfs subvolume delete, btrfs subvolume snapshot, btrfs-convert"
    />
    <link rel="canonical" href="https://yourdomain.com/cmd/btrfs.html" />
    <meta name="robots" content="index, follow" />
    <meta
      property="og:title"
      content="Btrfs Commands - Manage Btrfs Filesystems | Online Free DevTools by Hexmos"
    />
    <meta
      property="og:description"
      content="Learn essential Btrfs commands for managing Btrfs filesystems. Create, resize, add/remove devices, manage subvolumes, and take snapshots with our comprehensive guide."
    />
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://yourdomain.com/cmd/btrfs.html" />
    <meta
      property="og:image"
      content="https://yourdomain.com/path/to/og-image.jpg"
    />
    <meta name="twitter:card" content="summary_large_image" />
    <meta
      name="twitter:title"
      content="Btrfs Commands - Manage Btrfs Filesystems | Online Free DevTools by Hexmos"
    />
    <meta
      name="twitter:description"
      content="Learn essential Btrfs commands for managing Btrfs filesystems. Create, resize, add/remove devices, manage subvolumes, and take snapshots with our comprehensive guide."
    />
    <meta
      name="twitter:image"
      content="https://yourdomain.com/path/to/twitter-image.jpg"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github.min.css"
    />
    <style>
      body {
        font-family:
          -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
        line-height: 1.6;
        max-width: 1200px;
        margin: 0 auto;
        padding: 20px;
        background-color: #f8f9fa;
      }
      .container {
        background: white;
        border-radius: 8px;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        overflow: hidden;
      }
      .header {
        background: #2c3e50;
        color: white;
        padding: 20px;
        border-bottom: 1px solid #34495e;
      }
      .header h1 {
        margin: 0;
        font-size: 1.5em;
      }
      .content {
        padding: 20px;
      }
      pre {
        background: #f8f9fa;
        border: 1px solid #e9ecef;
        border-radius: 4px;
        padding: 16px;
        overflow-x: auto;
        margin: 0;
      }
      code {
        font-family: "Monaco", "Menlo", "Ubuntu Mono", monospace;
        font-size: 14px;
      }
      .markdown-content {
        line-height: 1.7;
      }
      .markdown-content h1,
      .markdown-content h2,
      .markdown-content h3 {
        color: #2c3e50;
        border-bottom: 1px solid #e9ecef;
        padding-bottom: 8px;
      }
      .markdown-content pre {
        background: #f8f9fa;
        border: 1px solid #e9ecef;
        border-radius: 4px;
        padding: 16px;
        overflow-x: auto;
      }
      .markdown-content code {
        background: #f1f3f4;
        padding: 2px 4px;
        border-radius: 3px;
        font-size: 0.9em;
      }
      .markdown-content pre code {
        background: none;
        padding: 0;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <div class="header">
        <h1>Btrfs Commands Guide</h1>
      </div>
      <div class="content">
        <div class="markdown-content">
          <h2>Btrfs Filesystem Management</h2>
          <p>
            Btrfs (B-tree file system) is a modern copy-on-write (CoW)
            filesystem for Linux. It offers advanced features such as snapshots,
            checksums, built-in RAID support, and subvolume management. This
            guide provides essential Btrfs commands to help you manage your
            Btrfs filesystems effectively.
          </p>

          <h2>Creating Btrfs Filesystems</h2>
          <p>
            The <code>mkfs.btrfs</code> command is used to create a new Btrfs
            filesystem. You can specify different RAID levels for data and
            metadata to ensure redundancy.
          </p>
          <pre><code class="language-bash"># Create a btrfs file system on /dev/sdb, /dev/sdc, and /dev/sdd
mkfs.btrfs /dev/sdb /dev/sdc /dev/sdd

# btrfs with just one hard drive, metadata not redundant
# (this is dangerous: if your metadata is lost, your data is lost as well)
mkfs.btrfs -m single /dev/sdb

# data to be redundant and metadata to be non-redundant:
mkfs.btrfs -m raid0 -d raid1 /dev/sdb /dev/sdc /dev/sdd

# both data and metadata to be redundant
mkfs.btrfs -d raid1 /dev/sdb /dev/sdc /dev/sdd
</code></pre>

          <h2>Filesystem Information and Resizing</h2>
          <p>View filesystem details and resize your Btrfs volumes online.</p>
          <pre><code class="language-bash"># To get a list of all btrfs file systems
btrfs filesystem show

# detailed df for a filesystem (mounted in /mnt)
btrfs filesystem df /mnt

# resize btrfs online (-2g decreases, +2g increases)
btrfs filesystem resize -2g /mnt

# use maximum space
btrfs filesystem resize max /mnt
</code></pre>

          <h2>Device Management</h2>
          <p>Add or remove devices from an existing Btrfs filesystem.</p>
          <pre><code class="language-bash"># add new device to a filesystem
btrfs device add /dev/sdf /mnt

# remove devices from a filesystem
btrfs device delete missing /mnt
</code></pre>

          <h2>Subvolume Management</h2>
          <p>
            Subvolumes are like independent filesystem trees within a Btrfs
            filesystem. They are crucial for features like snapshots.
          </p>
          <pre><code class="language-bash"># create the subvolume /mnt/sv1 in the /mnt volume
btrfs subvolume create /mnt/sv1

# list subvolumes
btrfs subvolume list /mnt

# mount subvolume without mounting the main filesystem
mount -o subvol=sv1 /dev/sdb /mnt

# delete subvolume
btrfs subvolume delete /mnt/sv1
</code></pre>

          <h2>Snapshots and Copy-on-Write</h2>
          <p>
            Btrfs snapshots allow you to create read-only or writable copies of
            subvolumes at a specific point in time. Copy-on-write (CoW) is a
            fundamental feature that enables efficient snapshots and data
            integrity.
          </p>
          <pre><code class="language-bash"># taking snapshot of a subvolume
btrfs subvolume snapshot /mnt/sv1 /mnt/sv1_snapshot

# taking snapshot of a file (copy file by reference)
cp --reflink /mnt/sv1/test1 /mnt/sv1/test3
</code></pre>

          <h2>Filesystem Conversion</h2>
          <p>
            Convert existing filesystems to Btrfs or convert Btrfs back to
            traditional Linux filesystems.
          </p>
          <pre><code class="language-bash"># convert ext3/ext4 to btrfs
btrfs-convert /dev/sdb1

# convert btrfs to ext3/ext4
btrfs-convert -r /dev/sdb1
</code></pre>

          <h3>Further Resources</h3>
          <ul>
            <li>
              <a
                href="https://btrfs.wiki.kernel.org/index.php/Main_Page"
                target="_blank"
                rel="noopener noreferrer"
                >Btrfs Wiki</a
              >
            </li>
            <li>
              <a
                href="https://man7.org/linux/man-pages/man8/mkfs.btrfs.8.html"
                target="_blank"
                rel="noopener noreferrer"
                >mkfs.btrfs man page</a
              >
            </li>
            <li>
              <a
                href="https://man7.org/linux/man-pages/man8/btrfs.8.html"
                target="_blank"
                rel="noopener noreferrer"
                >btrfs man page</a
              >
            </li>
          </ul>
        </div>
      </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <script>
      hljs.highlightAll();
    </script>
  </body>
</html>
