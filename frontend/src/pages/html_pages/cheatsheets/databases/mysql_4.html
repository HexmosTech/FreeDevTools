<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MySQL Cheatsheet - Essential Commands & Syntax | Free DevTools</title>
    <meta name="description" content="Master MySQL with our comprehensive cheatsheet. Find essential commands for permissions, table creation, data manipulation, performance tuning, and more. Your go-to MySQL reference.">
    <meta name="keywords" content="MySQL cheatsheet, MySQL commands, SQL syntax, database management, MySQL tutorial, MySQL performance, MySQL permissions, MySQL create table, MySQL insert data, MySQL repair table">
    <link rel="canonical" href="https://your-website.com/databases/mysql_4.html">
    <meta name="robots" content="index, follow">
    <meta property="og:title" content="MySQL Cheatsheet - Essential Commands & Syntax | Free DevTools">
    <meta property="og:description" content="Master MySQL with our comprehensive cheatsheet. Find essential commands for permissions, table creation, data manipulation, performance tuning, and more. Your go-to MySQL reference.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://your-website.com/databases/mysql_4.html">
    <meta property="og:image" content="https://your-website.com/path/to/mysql-cheatsheet-og-image.jpg">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="MySQL Cheatsheet - Essential Commands & Syntax | Free DevTools">
    <meta name="twitter:description" content="Master MySQL with our comprehensive cheatsheet. Find essential commands for permissions, table creation, data manipulation, performance tuning, and more. Your go-to MySQL reference.">
    <meta name="twitter:image" content="https://your-website.com/path/to/mysql-cheatsheet-twitter-image.jpg">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github.min.css">
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            line-height: 1.6;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f8f9fa;
        }
        .container {
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        .header {
            background: #2c3e50;
            color: white;
            padding: 20px;
            border-bottom: 1px solid #34495e;
        }
        .header h1 {
            margin: 0;
            font-size: 1.5em;
        }
        .content {
            padding: 20px;
        }
        pre {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 4px;
            padding: 16px;
            overflow-x: auto;
            margin: 0;
        }
        code {
            font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
            font-size: 14px;
        }
        .markdown-content {
            line-height: 1.7;
        }
        .markdown-content h1, .markdown-content h2, .markdown-content h3 {
            color: #2c3e50;
            border-bottom: 1px solid #e9ecef;
            padding-bottom: 8px;
        }
        .markdown-content pre {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 4px;
            padding: 16px;
            overflow-x: auto;
        }
        .markdown-content code {
            background: #f1f3f4;
            padding: 2px 4px;
            border-radius: 3px;
            font-size: 0.9em;
        }
        .markdown-content pre code {
            background: none;
            padding: 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>MySQL Cheatsheet</h1>
        </div>
        <div class="content">
            <div class="markdown-content">
                <h1>MySQL Cheatsheet - Essential Commands & Syntax</h1>
                <p>This MySQL cheatsheet provides a quick reference for essential commands and syntax for database management. It covers common operations such as managing permissions, creating tables, inserting and updating data, checking and repairing tables, and monitoring performance.</p>

                <ul>
                    <li><a href="#changing-tables">Changing Tables</a></li>
                    <li><a href="#check-and-repair-tables">Check and Repair Tables</a></li>
                    <li><a href="#rename-users">Rename Users</a></li>
                    <li><a href="#create-tables">Create Tables</a></li>
                    <li><a href="#delete">Delete Data</a></li>
                    <li><a href="#get-size-in-mb">Get Database Size in MB</a></li>
                    <li><a href="#view-logged-in-users">View Logged-in Users</a></li>
                    <li><a href="#indexes">Indexes</a></li>
                    <li><a href="#insert-data">Insert Data</a></li>
                    <li><a href="#performance-schema-metrics">Performance Schema Metrics</a></li>
                    <li><a href="#permissions">Permissions Management</a></li>
                    <li><a href="#repair-table">Repair Table</a></li>
                    <li><a href="#scripting">Scripting with MySQL</a></li>
                </ul>

                <h2>MySQL Permissions Management</h2>
                <p>Managing user permissions is crucial for database security. Here are common commands for creating databases, users, and granting privileges.</p>

                <h3>Create Database:</h3>
                <pre><code class="language-sql">mysql&gt; CREATE DATABASE my_db;
</code></pre>

                <h3>Create User:</h3>
                <pre><code class="language-sql">mysql&gt; CREATE USER 'user1'@'%' IDENTIFIED BY 'securepass';
</code></pre>

                <h3>Grant User All Permissions to Database:</h3>
                <pre><code class="language-sql">mysql&gt; GRANT ALL PRIVILEGES ON my_db.* TO 'user1'@'%';
</code></pre>

                <h3>Grant User All Permissions to All Databases with Grant Option:</h3>
                <pre><code class="language-sql">mysql&gt; GRANT ALL PRIVILEGES ON *.* TO 'user1'@'%' WITH GRANT OPTION;
</code></pre>

                <h3>Grant User Specific Permissions to Database in AWS RDS:</h3>
                <pre><code class="language-sql">mysql&gt; GRANT SELECT, UPDATE, DELETE, INSERT, CREATE, DROP, INDEX, ALTER, LOCK TABLES, EXECUTE, CREATE TEMPORARY TABLES, EXECUTE, TRIGGER, CREATE VIEW, SHOW VIEW, EVENT ON my_db.* TO user1@'%';
</code></pre>

                <h3>Update Password:</h3>
                <pre><code class="language-sql">mysql&gt; UPDATE mysql.user SET authentication_string = PASSWORD('foobar') WHERE User = 'demo' AND Host = '%';
# or
mysql&gt; SET PASSWORD FOR 'demo'@'%' = PASSWORD('foobar');
# or
mysql&gt; ALTER USER 'demo'@'%' IDENTIFIED BY 'foobar';
# or
mysql&gt; ALTER USER 'root'@'localhost' IDENTIFIED WITH mysql_native_password BY 'password';
</code></pre>

                <h3>Flush Privileges:</h3>
                <pre><code class="language-sql">mysql&gt; FLUSH PRIVILEGES;
</code></pre>

                <h2>Rename Users</h2>
                <p>You can rename existing MySQL users using the <code>RENAME USER</code> command.</p>
                <pre><code class="language-sql">RENAME USER 'john12' TO 'john.permanent';
</code></pre>

                <h2>Create Tables</h2>
                <p>Define the structure of your data with the <code>CREATE TABLE</code> statement. This section covers creating tables with various options, including primary keys and selecting data from existing tables.</p>

                <h3>Create a Basic Table:</h3>
                <pre><code class="language-sql">mysql&gt; CREATE TABLE domains (
  id INT(10) NOT NULL AUTO_INCREMENT,
  domain varchar(50) NOT NULL,
  owner  varchar(50),
  year_registered int(4)
);
</code></pre>

                <h3>Create a Table with a Primary Key:</h3>
                <pre><code class="language-sql">mysql&gt; CREATE TABLE domains (
  id INT(10) NOT NULL AUTO_INCREMENT,
  domain varchar(50) NOT NULL,
  owner  varchar(50),
  year_registered int(4),
  PRIMARY KEY (id)
);
</code></pre>

                <h3>Create a Table as a Select Query:</h3>
                <pre><code class="language-sql">mysql&gt; CREATE TABLE purchases_fnb_2016
       AS
         SELECT * FROM customers where date &gt;= '2016-01-01 00:00:00'
         AND date  &lt;= '2016-10-29 00:00:00'
         AND bank = 'fnb'
;
</code></pre>

                <h3>Create a Table with a Boolean Data Type:</h3>
                <pre><code class="language-sql">CREATE TABLE myusers(name VARCHAR(50), matriculated BOOLEAN);
</code></pre>

                <h3>Insert with Boolean Data:</h3>
                <pre><code class="language-sql">INSERT INTO myusers VALUES('tom', False);
</code></pre>

                <h3>Read Data (Boolean Example):</h3>
                <pre><code class="language-sql">mysql&gt; select name, matriculated from myusers limit 1;
+------+--------------+
| name | matriculated |
+------+--------------+
| tom  |            0 |
+------+--------------+
</code></pre>

                <h3>Use IF Statement and Replace Value (Boolean Example):</h3>
                <pre><code class="language-sql">mysql&gt; select name, IF(matriculated, 'yes', 'no') matriculated from myusers limit 1;
+------+--------------+
| name | matriculated |
+------+--------------+
| tom  | no           |
+------+--------------+
</code></pre>

                <h3>Query for People Not Matriculated:</h3>
                <pre><code class="language-sql">mysql&gt; select name, IF(matriculated, 'yes', 'no') matriculated from myusers where matriculated = false limit 1;
+------+--------------+
| name | matriculated |
+------+--------------+
| tom  | no           |
+------+--------------+

# You can also use it without the IF statement
</code></pre>

                <h3>View Unique Values:</h3>
                <pre><code class="language-sql">mysql&gt; select distinct country from people;
+---------+
| country |
+---------+
| MOZ     |
| NGA     |
| KEN     |
| ZWE     |
| IND     |
| GHA     |
+---------+
</code></pre>

                <h3>Create a Boolean Column with Default Value of False:</h3>
                <pre><code class="language-sql">CREATE TABLE users (
  active boolean not null default 0
);
</code></pre>

                <h3>Create a Timestamp Column:</h3>
                <pre><code class="language-sql">CREATE TABLE users (
  time_created TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
</code></pre>

                <p>Then create an entry with <code>now()</code>.</p>

                <h2>Changing Tables</h2>
                <p>Modify existing table structures using the <code>ALTER TABLE</code> statement.</p>

                <h3>Changing the Column Length:</h3>
                <pre><code class="language-sql">mysql&gt; ALTER TABLE contacts_business CHANGE COLUMN contact_number contact_number varchar(40);
</code></pre>

                <h2>Check and Repair Tables</h2>
                <p>Maintain data integrity by checking and repairing corrupted tables. The <code>mysqlcheck</code> utility is invaluable for this.</p>

                <h3>Check All Tables in a Specific Database:</h3>
                <pre><code class="language-sql">$ mysqlcheck -c mailscanner -u root -p
</code></pre>

                <h3>Check All Tables Across All Databases:</h3>
                <pre><code class="language-sql">$ mysqlcheck -c -u root -p --all-databases
</code></pre>

                <h3>Check a Single Table:</h3>
                <pre><code class="language-sql">$ check table maillog;
</code></pre>

                <h3>Analyze a Table:</h3>
                <p>Analyzes the <code>employee</code> table located in the <code>thegeekstuff</code> database.</p>
                <pre><code class="language-sql">$ mysqlcheck -a thegeekstuff employee -u root -p
</code></pre>

                <h3>Optimize a Table:</h3>
                <p>Optimizes the <code>employee</code> table located in the <code>thegeekstuff</code> database.</p>
                <pre><code class="language-sql">$ mysqlcheck -o thegeekstuff employee -u root -p
</code></pre>

                <h3>Repair a Table:</h3>
                <p>Repairs the <code>employee</code> table located in the <code>thegeekstuff</code> database.</p>
                <pre><code class="language-sql">$ mysqlcheck -r thegeekstuff employee -u root -p
</code></pre>

                <h3>Check, Optimize, and Repair All Corrupted Tables in a Database:</h3>
                <pre><code class="language-sql">$ mysqlcheck -u root -p --auto-repair -c -o thegeekstuff
</code></pre>

                <h3>Optimize and Repair All Tables Across All Databases:</h3>
                <pre><code class="language-sql">$ mysqlcheck -u root -p --auto-repair -c -o --all-databases
</code></pre>

                <h2>Delete Data</h2>
                <p>Remove unwanted data from your tables using the <code>DELETE</code> statement. It's often good practice to optimize the table afterward.</p>
                <pre><code class="language-sql">mysql&gt; delete from maillog where timestamp &lt; "2012-09-07";
mysql&gt; optimize table maillog;
</code></pre>

                <h2>Get Database Size in MB</h2>
                <p>Monitor your database storage usage with this query to view the size of each database in megabytes.</p>
                <pre><code class="language-sql">SELECT table_schema "Data Base Name",
sum( data_length + index_length ) / 1024 /
1024 "Data Base Size in MB",
sum( data_free )/ 1024 / 1024 "Free Space in MB"
FROM information_schema.TABLES
GROUP BY table_schema ;
</code></pre>

                <h2>View Logged-in Users</h2>
                <p>See who is currently connected to your MySQL server and their activity.</p>
                <pre><code class="language-sql">SELECT SUBSTRING_INDEX(host, ':', 1) AS host_short,
  GROUP_CONCAT(DISTINCT user) AS users,
  COUNT(*) AS threads
  FROM information_schema.processlist
  GROUP BY host_short
  ORDER BY COUNT(*), host_short;
</code></pre>

                <p>Or, to count connections per user:</p>
                <pre><code class="language-sql">SELECT `USER`, COUNT(*) FROM information_schema.processlist GROUP BY `USER`;
</code></pre>

                <h2>Indexes</h2>
                <p>Improve query performance by adding indexes to your tables. This is essential for large datasets.</p>
                <h3>Add an Index to an Existing Table:</h3>
                <p>Example: Adding an index to the <code>salary</code> column in the <code>salaries</code> table.</p>
                <pre><code class="language-sql">mysql&gt; DESCRIBE salaries;
+-----------+---------+------+-----+---------+-------+
| Field     | Type    | Null | Key | Default | Extra |
+-----------+---------+------+-----+---------+-------+
| emp_no    | int(11) | NO   | PRI | NULL    |       |
| salary    | int(11) | NO   |     | NULL    |       |
| from_date | date    | NO   | PRI | NULL    |       |
| to_date   | date    | NO   |     | NULL    |       |
+-----------+---------+------+-----+---------+-------+
4 rows in set (0.00 sec)

ALTER TABLE salaries ADD INDEX ( salary );
</code></pre>

                <h2>Insert Data</h2>
                <p>Populate your tables with new records using the <code>INSERT INTO</code> statement.</p>
                <h3>Insert Data into Our Domain Table:</h3>
                <pre><code class="language-sql">mysql&gt; INSERT INTO domains (domain,owner,year_registered) VALUES("example.com", "John", 2019);
</code></pre>

                <h2>Update Data</h2>
                <p>Modify existing records in your tables with the <code>UPDATE</code> statement.</p>
                <h3>Update a Student's Age and Language:</h3>
                <pre><code class="language-sql">mysql&gt; UPDATE students SET age = 30, language = 'english' WHERE student_id = 'fz9203493043';
</code></pre>

                <h2>Information Schema</h2>
                <p>The <code>information_schema</code> database provides metadata about your MySQL server, including connection details and variable settings.</p>

                <h3>Show Idle Connections:</h3>
                <pre><code class="language-sql">mysql&gt; select id, user, host, db, command, time from information_schema.processlist where command = "sleep";
+-----------+-------+---------------------+--------+---------+------+
| id        | user  | host                | db     | command | time |
+-----------+-------+---------------------+--------+---------+------+
| 659558686 | james | 172.31.27.126:37154 | mydb12 | Sleep   |  332 |
</code></pre>

                <h3>Show Connected Sessions:</h3>
                <pre><code class="language-sql">mysql&gt; select count(*) from information_schema.processlist;
+----------+
| count(*) |
+----------+
|       60 |
+----------+
</code></pre>
                <p>Or:</p>
                <pre><code class="language-sql">mysql&gt; show status where variable_name = 'threads_connected';
+-------------------+-------+
| Variable_name     | Value |
+-------------------+-------+
| Threads_connected | 61    |
+-------------------+-------+
</code></pre>

                <h3>Show Connection Related Variables:</h3>
                <pre><code class="language-sql">mysql&gt; SHOW VARIABLES LIKE '%connections%';
+-----------------------+-------+
| Variable_name         | Value |
+-----------------------+-------+
| extra_max_connections | 1     |
| max_connections       | 1296  |
| max_user_connections  | 0     |
+-----------------------+-------+
3 rows in set (0.16 sec)
</code></pre>
                <p>Or:</p>
                <pre><code class="language-sql">mysql&gt; show status like '%onn%';
+-----------------------------------------------+-----------+
| Variable_name                                 | Value     |
+-----------------------------------------------+-----------+
| Aborted_connects                              | 35        |
| Connection_errors_accept                      | 0         |
| Connection_errors_internal                    | 0         |
| Connection_errors_max_connections             | 0         |
| Connection_errors_peer_address                | 0         |
| Connection_errors_select                      | 0         |
| Connection_errors_tcpwrap                     | 0         |
| Connections                                   | 66059     |
| Max_used_connections                          | 502       |
| Performance_schema_session_connect_attrs_lost | 0         |
| Slave_connections                             | 0         |
| Slaves_connected                              | 1         |
| Ssl_client_connects                           | 0         |
| Ssl_connect_renegotiates                      | 0         |
| Ssl_finished_connects                         | 0         |
| Threads_connected                             | 46        |
| wsrep_connected                               | OFF       |
+-----------------------------------------------+-----------+
17 rows in set (0.16 sec)
</code></pre>

                <h3>Show Cache Information:</h3>
                <pre><code class="language-sql">mysql&gt; SHOW VARIABLES LIKE 'have_query_cache';
mysql&gt; SHOW STATUS LIKE 'Qcache%';
</code></pre>

                <h3>Show How Long a Connection Can Idle:</h3>
                <p>This setting determines the maximum time a connection can remain idle before being closed.</p>
                <p><a href="https://aws.amazon.com/blogs/database/best-practices-for-configuring-parameters-for-amazon-rds-for-mysql-part-3-parameters-related-to-security-operational-manageability-and-connectivity-timeout/">AWS Blog on Connection Timeout</a></p>
                <pre><code class="language-sql">mysql&gt; SHOW VARIABLES LIKE 'wait_timeout';
+---------------+-------+
| Variable_name | Value |
+---------------+-------+
| wait_timeout  | 28800 |
+---------------+-------+
</code></pre>

                <h3>Binlog Format:</h3>
                <p>Check the current binary log format.</p>
                <pre><code class="language-sql">mysql&gt; show variables like 'binlog_format';
</code></pre>

                <h2>Performance Schema Metrics</h2>
                <p>Leverage the Performance Schema to gain deep insights into your MySQL server's performance.</p>

                <h3>Execution Time of All Statement Types by Each User:</h3>
                <pre><code class="language-sql">mysql&gt; select * from sys.user_summary_by_statement_type;
+------------+----------------+-------+---------------+-------------+--------------+-----------+---------------+---------------+------------+
| user       | statement      | total | total_latency | max_latency | lock_latency | rows_sent | rows_examined | rows_affected | full_scans |
+------------+----------------+-------+---------------+-------------+--------------+-----------+---------------+---------------+------------+
| background | select         |     1 | 212.00 us     | 212.00 us   | 0 ps         |         1 |             0 |             0 |          0 |
| root       | insert         |   175 | 46.26 s       | 823.43 ms   | 6.33 s       |         0 |             0 |       3919027 |          0 |
| root       | select         |    50 | 12.21 s       | 10.00 s     | 10.41 ms     |       223 |       7498268 |             0 |         17 |
</code></pre>

                <h3>Slowest Statements (95th Percentile by Runtime):</h3>
                <pre><code class="language-sql">mysql&gt; select * from sys.statements_with_runtimes_in_95th_percentile\G
*************************** 1. row ***************************
            query: SELECT `sleep` (?)
               db: sys
        full_scan:
       exec_count: 1
        err_count: 0
       warn_count: 0
    total_latency: 10.00 s
      max_latency: 10.00 s
      avg_latency: 10.00 s
        rows_sent: 1
    rows_sent_avg: 1
    rows_examined: 0
rows_examined_avg: 0
       first_seen: 2019-07-04 11:21:23.155084
        last_seen: 2019-07-04 11:21:23.155084
           digest: x
</code></pre>

                <h3>Number of Queries That Generated Errors or Warnings:</h3>
                <pre><code class="language-sql">mysql&gt; SELECT SUM(errors) FROM sys.statements_with_errors_or_warnings;
+-------------+
| SUM(errors) |
+-------------+
|           4 |
+-------------+
</code></pre>

                <h2>Repair Table</h2>
                <p>Use the <code>REPAIR TABLE</code> command to fix corrupted tables. It's often used in conjunction with <code>OPTIMIZE TABLE</code>.</p>
                <pre><code class="language-sql">mysql&gt; repair table x;
mysql&gt; optimize table x;
</code></pre>

                <h2>Scripting with MySQL</h2>
                <p>Automate database tasks by embedding SQL commands within shell scripts. This example demonstrates creating a database, table, and inserting data using a bash script.</p>
                <pre><code class="language-bash">#!/usr/bin/env bash
user="root"
password="rootpassword"
database="my_db"

mysql -h 127.0.0.1 -u"$user" -p"$password" "$database" &lt;&lt;EOF
CREATE DATABASE IF NOT EXISTS foo;
CREATE TABLE IF NOT EXISTS foo.hashes (
  id INT AUTO_INCREMENT PRIMARY KEY,
  number INT(10) NOT NULL,
  hash VARCHAR(50) NOT NULL
);
EOF

for x in {1..10}
  do
    mysql -h 127.0.0.1 -u"$user" -p"$password" "$database" &lt;&lt;EOF
      INSERT IGNORE INTO foo.hashes (id, number, hash) VALUES ('', $x, "$(openssl rand -hex 8)");
    EOF
  done

mysql -h 127.0.0.1 -u"$user" -p"$password" "$database" &lt;&lt;EOF
  SELECT * FROM foo.hashes;
EOF
```</pre>

                <h2>External Resources:</h2>
                <ul>
                    <li><a href="https://www.mysqltutorial.org/mysql-inner-join.aspx/" target="_blank" rel="noopener noreferrer">MySQL Inner Join Tutorial</a></li>
                    <li><a href="https://www.mysqltutorial.org/mysql-index/mysql-create-index/" target="_blank" rel="noopener noreferrer">MySQL Create Index Tutorial</a></li>
                    <li><a href="https://dev.mysql.com/doc/" target="_blank" rel="noopener noreferrer">Official MySQL Documentation</a></li>
                    <li><a href="https://stackoverflow.com/questions/tagged/mysql" target="_blank" rel="noopener noreferrer">MySQL Questions on Stack Overflow</a></li>
                </ul>
            </div>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <script>
        hljs.highlightAll();
    </script>
</body>
</html>