<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Readme</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github.min.css">
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            line-height: 1.6;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f8f9fa;
        }
        .container {
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        .header {
            background: #2c3e50;
            color: white;
            padding: 20px;
            border-bottom: 1px solid #34495e;
        }
        .header h1 {
            margin: 0;
            font-size: 1.5em;
        }
        .content {
            padding: 20px;
        }
        pre {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 4px;
            padding: 16px;
            overflow-x: auto;
            margin: 0;
        }
        code {
            font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
            font-size: 14px;
        }
        .markdown-content {
            line-height: 1.7;
        }
        .markdown-content h1, .markdown-content h2, .markdown-content h3 {
            color: #2c3e50;
            border-bottom: 1px solid #e9ecef;
            padding-bottom: 8px;
        }
        .markdown-content pre {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 4px;
            padding: 16px;
            overflow-x: auto;
        }
        .markdown-content code {
            background: #f1f3f4;
            padding: 2px 4px;
            border-radius: 3px;
            font-size: 0.9em;
        }
        .markdown-content pre code {
            background: none;
            padding: 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Readme</h1>
        </div>
        <div class="content">
            <div class="markdown-content"><h1>postgresql cheatsheet</h1>
<h2>External Resources</h2>
<ul>
<li>https://www.codementor.io/engineerapart/getting-started-with-postgresql-on-mac-osx-are8jcopb</li>
<li>https://www.tutorialspoint.com/postgresql/postgresql_schema.htm</li>
</ul>
<h2>Setting Up</h2>
<p>Install:</p>
<pre class="codehilite"><code>brew install postgresql
</code></pre>

<p>Start:</p>
<pre class="codehilite"><code>brew services start postgresql
</code></pre>

<p>Access Postgres:</p>
<pre class="codehilite"><code>psql postgres
</code></pre>

<h2>Cheatsheet</h2>
<p>Create database:</p>
<pre class="codehilite"><code>CREATE database foo;
</code></pre>

<p>Create role:</p>
<pre class="codehilite"><code>CREATE ROLE user1 WITH LOGIN PASSWORD 'secret';
</code></pre>

<p>List roles:</p>
<pre class="codehilite"><code>\du
</code></pre>

<p>Allow user to create databases:</p>
<pre class="codehilite"><code>ALTER ROLE user1 CREATEDB;
</code></pre>

<p>Exit with <code>\q</code> and logon with <code>user1</code>:</p>
<pre class="codehilite"><code>psql postgres -U user1
</code></pre>

<p>Grant all privileges to database:</p>
<pre class="codehilite"><code>GRANT ALL PRIVILEGES ON DATABASE &quot;foo&quot; to user1;
</code></pre>

<p>Create user:</p>
<pre class="codehilite"><code>CREATE USER testuser with encrypted password 'sekretpw';
</code></pre>

<p>Grant privileges for user:</p>
<pre class="codehilite"><code>GRANT ALL PRIVILEGES ON database foo TO testuser;
</code></pre>

<p>Create a auto-incremental column:</p>
<pre class="codehilite"><code>CREATE TABLE fruits(id SERIAL PRIMARY KEY, name VARCHAR NOT NULL)
INSERT INTO fruits(id,name) VALUES(DEFAULT,'Apple');
</code></pre>

<p>List databases:</p>
<pre class="codehilite"><code>\l
</code></pre>

<p>Switch to database:</p>
<pre class="codehilite"><code>\c dbname
</code></pre>

<p>List tables:</p>
<pre class="codehilite"><code>\dt
\dt+
</code></pre>

<p>Backup Database:</p>
<pre class="codehilite"><code>pg_dump -h 127.0.0.1 -U postgres -p 5432 dbname &gt; dbname.bak
</code></pre>

<p>Restore Database:</p>
<pre class="codehilite"><code>psql -h dbname.x.eu-west-1.rds.amazonaws.com -U postgres dbname &lt; dbname.bak
</code></pre>

<p>Resources:</p>
<ul>
<li>https://www.digitalocean.com/community/tutorials/how-to-use-roles-and-manage-grant-permissions-in-postgresql-on-a-vps--2</li>
<li>https://www.postgresqltutorial.com/postgresql-cheat-sheet/</li>
<li>https://www.postgresqltutorial.com/postgresql-serial/</li>
<li>https://blog.ruanbekker.com/blog/2019/03/06/create-users-databases-and-granting-access-for-users-on-postgresql/</li>
</ul></div>
        </div>
    </div>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <script>
        hljs.highlightAll();
    </script>
</body>
</html>