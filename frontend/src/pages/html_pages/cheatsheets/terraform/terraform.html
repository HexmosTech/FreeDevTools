<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Readme</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github.min.css">
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            line-height: 1.6;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f8f9fa;
        }
        .container {
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        .header {
            background: #2c3e50;
            color: white;
            padding: 20px;
            border-bottom: 1px solid #34495e;
        }
        .header h1 {
            margin: 0;
            font-size: 1.5em;
        }
        .content {
            padding: 20px;
        }
        pre {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 4px;
            padding: 16px;
            overflow-x: auto;
            margin: 0;
        }
        code {
            font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
            font-size: 14px;
        }
        .markdown-content {
            line-height: 1.7;
        }
        .markdown-content h1, .markdown-content h2, .markdown-content h3 {
            color: #2c3e50;
            border-bottom: 1px solid #e9ecef;
            padding-bottom: 8px;
        }
        .markdown-content pre {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 4px;
            padding: 16px;
            overflow-x: auto;
        }
        .markdown-content code {
            background: #f1f3f4;
            padding: 2px 4px;
            border-radius: 3px;
            font-size: 0.9em;
        }
        .markdown-content pre code {
            background: none;
            padding: 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Readme</h1>
        </div>
        <div class="content">
            <div class="markdown-content"><h1>Terraform Cheatsheets</h1>
<h2>Cheatsheets</h2>
<h3>Terraform CLI Usage</h3>
<p>Terraform Format:</p>
<pre class="codehilite"><code class="language-bash">terraform fmt
</code></pre>

<p>Validate terraform syntax:</p>
<pre class="codehilite"><code class="language-bash">terraform validate
</code></pre>

<p>Validate terraform syntax and skip backend validation:</p>
<pre class="codehilite"><code class="language-bash">terraform validate -backend=false
</code></pre>

<p>Initialize and download providers:</p>
<pre class="codehilite"><code class="language-bash">terraform init
</code></pre>

<p>Terraform plan to review what will be changed:</p>
<pre class="codehilite"><code class="language-bash">terraform plan
</code></pre>

<p>Terraform Apply to create/delete resources:</p>
<pre class="codehilite"><code class="language-bash">terraform apply
</code></pre>

<p>To do a targeted plan:</p>
<pre class="codehilite"><code class="language-bash">terraform plan -target=module.platform -out=platform.tfplan
</code></pre>

<p>Then we can do a targeted destroy from the computed plan:</p>
<pre class="codehilite"><code class="language-bash">terraform apply &quot;platform.tfplan&quot;
</code></pre>

<h3>Merge function</h3>
<p>In this scenario, you can have default tags, but if you want to replace <code>Environment</code>, you can define the <code>var.environment</code> and include it in the merge function.</p>
<pre class="codehilite"><code class="language-terraform">variable &quot;default_tags&quot; {
  default = {
    ManagedBy   = &quot;terraform&quot;
    Environment = &quot;local&quot;
  }
}

variable &quot;name&quot; {
  default = &quot;testing&quot;
}

variable &quot;environment&quot; {
  default = &quot;dev&quot;
}

output &quot;merge_tags&quot; {
  value = &quot;${merge(var.default_tags, tomap({&quot;Name&quot; = &quot;prefix-${var.name}&quot;, &quot;Environment&quot; = &quot;${var.environment}&quot;}))}&quot;
}
</code></pre>

<h3>Validations</h3>
<p>Length:</p>
<pre class="codehilite"><code class="language-terraform">variable &quot;service_name&quot; {
  type = string

  validation {
    condition     = length(var.service_name) &lt; 40
    error_message = &quot;The service_name value cant be more than 40 characters.&quot;
  }
}
</code></pre>

<p>Regex match:</p>
<pre class="codehilite"><code class="language-terraform">variable &quot;env_name&quot; {
  type = string
  default = null
  validation {
    condition  = can(regex(&quot;^(dev|staging|production|ephemeral-.*)+$&quot;, var.env_name))
    error_message = &quot;For the env_name value only dev, staging, production and ephemeral-* are allowed.&quot;
  }
}
</code></pre>

<h3>Booleans to control</h3>
<p>We want to use a boolean variable to set the number:
- true = 1
- false = 0</p>
<pre class="codehilite"><code class="language-terraform">warm_pool = {
  pool_state                  = &quot;Running&quot;
  min_size                    = var.warm_pool_enabled ? 1 : 0
  max_group_prepared_capacity = var.warm_pool_enabled ? 1 : 0
}
</code></pre>

<h2>Resources</h2>
<p>Terraform Tutorials:</p>
<ul>
<li><a href="https://github.com/codeaprendiz/terraform-kitchen">@codeaprendiz terraform-kitchen</a></li>
</ul>
<p>Terraform Examples:</p>
<ul>
<li><a href="https://rtfm.co.ua/en/terraform-main-commands-state-files-backend-storages-and-modules-in-examples-on-aws/">rtfm.co.ua - AWS Examples</a></li>
<li><a href="https://github.com/geerlingguy/ansible-for-devops/tree/master/gluster">Jeff Geerling - Terraform and Vagrant Example</a></li>
<li><a href="https://github.com/geerlingguy/mac-dev-playbook">Jeff Geerling - Mac Playbook Examples</a></li>
<li><a href="https://github.com/Kulasangar/terraform-demo">Kulasangar - AWS with IAM Policies Example</a></li>
<li><a href="https://gist.github.com/ruanbekker/63ec1871ec3c6051a0d0cb75156e93bd">AWS with IAM Policy Exampe #2</a></li>
<li><a href="https://www.phillipsj.net/tags/terraform/">phillipsj.net Terraform Blogposts</a></li>
<li><a href="https://medium.com/4th-coffee/the-real-eks-anywhere-in-terraform-51fdf4a2ab59">Deploy EKS with Terraform</a></li>
<li><a href="https://github.com/alex/ecs-terraform">ECS with Terraform</a></li>
<li><a href="https://chandarachea.medium.com/vpc-peering-connetion-with-terraform-c4522a24bf3e">Cross Account VPC Peering</a></li>
<li><a href="https://medium.com/tensult/vpc-peering-using-terraform-105d554ed04d">VPC Peering with AWS</a></li>
<li><a href="https://github.com/tensult/terraform/tree/master/aws">Multiple AWS Examples</a></li>
<li><a href="https://github.com/comtravo/terraform-aws-api-gateway">AWS API Gateway</a></li>
<li><a href="https://sysgears.com/articles/moving-lambda-function-from-serverless-to-terraform/">API GW: Moving from Serverless Framework</a></li>
<li><a href="https://github.com/TailorDev/hello-lambda">Nodejs API GW with Lambda</a></li>
<li><a href="https://alite-international.com/minimal-viable-ci-cd-with-terraform-aws-codepipeline/">Minimal Viable CICD with Terraform and AWS CodePipeline</a></li>
</ul>
<p>Learn Guides:</p>
<ul>
<li><a href="https://learn.hashicorp.com/collections/terraform/modules">Hashicorp Terraform Modules</a></li>
<li><a href="https://github.com/ari-hacks/terraform-study-guide/">Terraform Study Guide</a></li>
</ul>
<p>Terraform Cheatsheets
- <a href="https://acloudguru.com/blog/engineering/the-ultimate-terraform-cheatsheet">acloudguru cheatsheet</a></p>
<p>Terraform AWS Workshops:
- <a href="https://tf-eks-workshop.workshop.aws/000_workshop_introduction.html">Terraform EKS AWS Workshop</a>
- <a href="https://terraformguru.com/terraform-certification-using-azure-cloud/01-Infrastructure-as-Code-IaC-Basics/">Terraform Guru</a></p>
<p>Terraform with Ansible Examples:</p>
<ul>
<li><a href="https://github.com/ramitsurana/terraform-ansible-setup">Terraform with Ansible Example #1</a></li>
<li><a href="https://github.com/insight-infrastructure/terraform-ansible-playbook">Terraform with Ansible Example #2</a></li>
<li><a href="https://leftasexercise.com/2019/12/23/using-ansible-with-a-jump-host/">Using a JumpHost in Ansible with Terraform</a> | <a href="https://github.com/nozaq/terraform-aws-lambda-auto-package">Lambda Auto Package</a></li>
</ul>
<p>Terraform States:</p>
<ul>
<li><a href="https://blog.gruntwork.io/how-to-manage-terraform-state-28f5697e68fa">gruntwork.io - Manage Terraform State</a></li>
</ul>
<p>Terraform Providers:</p>
<ul>
<li><a href="https://nicholasbering.ca/tools/2018/01/08/introducing-terraform-provider-ansible/">Terraform Ansible Provider #1</a></li>
</ul></div>
        </div>
    </div>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <script>
        hljs.highlightAll();
    </script>
</body>
</html>