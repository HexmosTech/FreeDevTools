<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ECR Policy - Allow CodeBuild Access</title>
    <meta name="description" content="Allow CodeBuild to access your ECR repository with this policy. Securely integrate CodeBuild with ECR for automated builds and deployments.">
    <meta name="keywords" content="ECR, CodeBuild, AWS, IAM, policy, container registry, CI/CD, DevOps, allow access">
    <meta name="author" content="Hexmos">
    <link rel="canonical" href="https://hexmos.com/aws-ecr/allow_codebuild.html">
    <meta name="robots" content="index, follow">

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://hexmos.com/aws-ecr/allow_codebuild.html">
    <meta property="og:title" content="ECR Policy - Allow CodeBuild Access">
    <meta property="og:description" content="Allow CodeBuild to access your ECR repository with this policy. Securely integrate CodeBuild with ECR for automated builds and deployments.">
    <meta property="og:image" content="https://hexmos.com/images/ecr-codebuild-banner.png">

    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://hexmos.com/aws-ecr/allow_codebuild.html">
    <meta property="twitter:title" content="ECR Policy - Allow CodeBuild Access">
    <meta property="twitter:description" content="Allow CodeBuild to access your ECR repository with this policy. Securely integrate CodeBuild with ECR for automated builds and deployments.">
    <meta property="twitter:image" content="https://hexmos.com/images/ecr-codebuild-banner.png">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github.min.css">
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            line-height: 1.6;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f8f9fa;
        }
        .container {
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        .header {
            background: #2c3e50;
            color: white;
            padding: 20px;
            border-bottom: 1px solid #34495e;
        }
        .header h1 {
            margin: 0;
            font-size: 1.5em;
        }
        .content {
            padding: 20px;
        }
        pre {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 4px;
            padding: 16px;
            overflow-x: auto;
            margin: 0;
        }
        code {
            font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
            font-size: 14px;
        }
        .markdown-content {
            line-height: 1.7;
        }
        .markdown-content h2, .markdown-content h3 {
            color: #2c3e50;
            border-bottom: 1px solid #e9ecef;
            padding-bottom: 8px;
        }
        .markdown-content pre {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 4px;
            padding: 16px;
            overflow-x: auto;
        }
        .markdown-content code {
            background: #f1f3f4;
            padding: 2px 4px;
            border-radius: 3px;
            font-size: 0.9em;
        }
        .markdown-content pre code {
            background: none;
            padding: 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Allow CodeBuild Access to ECR</h1>
        </div>
        <div class="content">
            <p>This IAM policy allows AWS CodeBuild to access your Amazon Elastic Container Registry (ECR) repository. By granting these permissions, CodeBuild can pull images from your ECR repository during the build process, enabling seamless integration for container-based deployments.</p>

            <h2>IAM Policy for CodeBuild ECR Access</h2>
            <p>Below is the JSON policy document that you can attach to your CodeBuild role. This policy grants the necessary permissions for CodeBuild to retrieve images from your ECR repository.</p>

            <pre><code class="language-json">{
  "Version": "2008-10-17",
  "Statement": [
    {
      "Sid": "CodeBuildAccess",
      "Effect": "Allow",
      "Principal": {
        "AWS": [
          "arn:aws:iam::xxxxxxxxxxxx:root"
        ],
        "Service": "codebuild.amazonaws.com"
      },
      "Action": [
        "ecr:BatchCheckLayerAvailability",
        "ecr:BatchGetImage",
        "ecr:GetDownloadUrlForLayer"
      ]
    }
  ]
}
</code></pre>

            <h2>Explanation of Policy Elements</h2>
            <ul>
                <li><strong>Version:</strong> Specifies the version of the policy language.</li>
                <li><strong>Statement:</strong> Contains an array of individual statements that define the permissions.</li>
                <li><strong>Sid:</strong> An optional identifier for the statement.</li>
                <li><strong>Effect:</strong> Determines whether the statement allows or denies access. In this case, it's "Allow".</li>
                <li><strong>Principal:</strong> Specifies the entity that is granted the permissions. Here, it includes the AWS account and the CodeBuild service.</li>
                <li><strong>Action:</strong> Lists the specific ECR actions that are allowed.</li>
            </ul>

            <h2>How to Use This Policy</h2>
            <ol>
                <li>Create an IAM role for your CodeBuild project.</li>
                <li>Attach this policy to the IAM role.</li>
                <li>Ensure that the AWS account ID in the Principal section matches your account.</li>
            </ol>

            <h2>Additional Resources</h2>
            <ul>
                <li><a href="https://docs.aws.amazon.com/codebuild/latest/userguide/setting-up.html" target="_blank" rel="noopener noreferrer">AWS CodeBuild Documentation</a></li>
                <li><a href="https://docs.aws.amazon.com/AmazonECR/latest/userguide/ecr-managing-permissions.html" target="_blank" rel="noopener noreferrer">Amazon ECR Permissions</a></li>
                <li><a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/access_policies.html" target="_blank" rel="noopener noreferrer">IAM Policies Overview</a></li>
            </ul>
        </div>
    </div>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <script>
        hljs.highlightAll();
    </script>
</body>
</html>
