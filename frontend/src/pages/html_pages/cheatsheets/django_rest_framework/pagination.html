<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pagination</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github.min.css">
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            line-height: 1.6;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f8f9fa;
        }
        .container {
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        .header {
            background: #2c3e50;
            color: white;
            padding: 20px;
            border-bottom: 1px solid #34495e;
        }
        .header h1 {
            margin: 0;
            font-size: 1.5em;
        }
        .content {
            padding: 20px;
        }
        pre {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 4px;
            padding: 16px;
            overflow-x: auto;
            margin: 0;
        }
        code {
            font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
            font-size: 14px;
        }
        .markdown-content {
            line-height: 1.7;
        }
        .markdown-content h1, .markdown-content h2, .markdown-content h3 {
            color: #2c3e50;
            border-bottom: 1px solid #e9ecef;
            padding-bottom: 8px;
        }
        .markdown-content pre {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 4px;
            padding: 16px;
            overflow-x: auto;
        }
        .markdown-content code {
            background: #f1f3f4;
            padding: 2px 4px;
            border-radius: 3px;
            font-size: 0.9em;
        }
        .markdown-content pre code {
            background: none;
            padding: 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Pagination</h1>
        </div>
        <div class="content">
            <div class="markdown-content"><h3>Pagination</h3>
<p>This can usually be obtained automatically with <code>generic class-based views</code> and <code>viewsets</code>. If you're using <code>APIView</code>, it must be explicitly applied.</p>
<h4>With Generic Class-based views or Viewsets</h4>
<p>For these views to use pagination, all we have to do is override <code>DEFAULT_PAGINATION_CLASS</code> and <code>PAGE_SIZE</code> in our DRF settings in <code>settings.py</code>.</p>
<pre class="codehilite"><code class="language-python">REST_FRAMEWORK = {
    'DEFAULT_PAGINATION_CLASS': 'rest_framework.pagination.LimitOffsetPagination',
    'PAGE_SIZE': 20
}
</code></pre>

<h4>With APIView or other Non-Generic View</h4>
<p>First we must define the default behaviour for our pagination, which is done in <code>settings.py</code>.</p>
<pre class="codehilite"><code class="language-python">REST_FRAMEWORK = {
    'DEFAULT_PAGINATION_CLASS': 'rest_framework.pagination.LimitOffsetPagination',
    'PAGE_SIZE': 20
}
</code></pre>

<p>Now we need to handle our pagination through our view (APIView in this case).</p>
<pre class="codehilite"><code class="language-python">from rest_framework.settings import api_settings
from rest_framework.views import APIView

class PostView(APIView):
    # ... queryset, serializer_class, etc
    pagination_class = api_settings.DEFAULT_PAGINATION_CLASS

    # We need to override the get method to achieve pagination
    def get(self, request):
        # ...
        page = self.paginate_queryset(self.queryset)
        if page is not None:
            serializer = self.serializer_class(page, many=True)
            return self.get_paginated_response(serializer.data)
        # ...

    # Now add the pagination handlers taken from 
    # django-rest-framework/rest_framework/generics.py
    @property
    def paginator(self):
        &quot;&quot;&quot;
        The paginator instance associated with the view, or `None`.
        &quot;&quot;&quot;
     if not hasattr(self, '_paginator'):
         if self.pagination_class is None:
             self._paginator = None
         else:
             self._paginator = self.pagination_class()
     return self._paginator

     def paginate_queryset(self, queryset):
         &quot;&quot;&quot;
         Return a single page of results, or `None` if pagination is disabled.
         &quot;&quot;&quot;
         if self.paginator is None:
             return None
         return self.paginator.paginate_queryset(queryset, self.request, view=self)

     def get_paginated_response(self, data):
         &quot;&quot;&quot;
         Return a paginated style `Response` object for the given output data.
         &quot;&quot;&quot;
         return self.paginator.get_paginated_response(data)
</code></pre>

<h4>Modify Pagination Class</h4>
<p>We can define our own pagination class and override default attributes. Using this new class, you can make one, multiple or all views use this instead of <code>LimitOffsetPagination</code> or other ones provided by DRF.</p>
<pre class="codehilite"><code class="language-python">class CustomPagination(PageNumberPagination):
    &quot;&quot;&quot;
    Client controls the response page size (with query param), limited to a maximum of `max_page_size` and default of `page_size`.
    &quot;&quot;&quot;
    page_size = 100
    page_size_query_param = 'page_size'
    max_page_size = 10000
</code></pre>

<p><a href="#drf-cheat-sheet">Back to Top â†‘</a></p>
<p><br/></p></div>
        </div>
    </div>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <script>
        hljs.highlightAll();
    </script>
</body>
</html>