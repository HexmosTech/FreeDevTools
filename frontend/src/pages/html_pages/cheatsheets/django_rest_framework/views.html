<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Django REST Framework Views - API View Creation</title>
    <meta name="description" content="Explore various methods for creating Django REST Framework views, from function-based to ViewSets, to build robust APIs. Learn about GET, POST, and custom actions.">
    <meta name="keywords" content="django rest framework, drf views, api views, function-based views, class-based views, generic views, mixins, viewsets, custom actions, python api">
    <link rel="canonical" href="https://yourdomain.com/django_rest_framework/views.html">
    <meta name="robots" content="index, follow">
    <meta property="og:title" content="Django REST Framework Views - API View Creation">
    <meta property="og:description" content="Explore various methods for creating Django REST Framework views, from function-based to ViewSets, to build robust APIs. Learn about GET, POST, and custom actions.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://yourdomain.com/django_rest_framework/views.html">
    <meta property="og:image" content="https://yourdomain.com/path/to/your/og-image.jpg">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Django REST Framework Views - API View Creation">
    <meta name="twitter:description" content="Explore various methods for creating Django REST Framework views, from function-based to ViewSets, to build robust APIs. Learn about GET, POST, and custom actions.">
    <meta name="twitter:image" content="https://yourdomain.com/path/to/your/twitter-image.jpg">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github.min.css">
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            line-height: 1.6;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f8f9fa;
        }
        .container {
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        .header {
            background: #2c3e50;
            color: white;
            padding: 20px;
            border-bottom: 1px solid #34495e;
        }
        .header h1 {
            margin: 0;
            font-size: 1.5em;
        }
        .content {
            padding: 20px;
        }
        pre {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 4px;
            padding: 16px;
            overflow-x: auto;
            margin: 0;
        }
        code {
            font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
            font-size: 14px;
        }
        .markdown-content {
            line-height: 1.7;
        }
        .markdown-content h1, .markdown-content h2, .markdown-content h3 {
            color: #2c3e50;
            border-bottom: 1px solid #e9ecef;
            padding-bottom: 8px;
        }
        .markdown-content pre {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 4px;
            padding: 16px;
            overflow-x: auto;
        }
        .markdown-content code {
            background: #f1f3f4;
            padding: 2px 4px;
            border-radius: 3px;
            font-size: 0.9em;
        }
        .markdown-content pre code {
            background: none;
            padding: 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Django REST Framework Views</h1>
        </div>
        <div class="content">
            <div class="markdown-content">
                <h2>Understanding API View Creation in Django REST Framework</h2>
                <p>There are many options for creating views for your API, it really depends on your API's requirements or personal preference.</p>
                <p>We'll write a <code>post_list</code> view with <code>GET</code> and <code>POST</code> methods for reading and creating new <a href="#base-example-model">Post</a> instances.</p>

                <h2>Function-Based Views for APIs</h2>
                <p>Function-based views offer a straightforward way to handle API requests. They are defined as Python functions that accept a request object and return a response object.</p>
                <h4>Using Function-based views:</h4>
                <pre class="codehilite"><code class="language-python">from rest_framework.decorators import api_view
from rest_framework.response import Response
from rest_framework.parsers import JSONParser
from rest_framework import status
from posts.models import Post
from posts.serializers import PostSerializer

@api_view(['GET', 'POST'])
def post_list(request, format=None):

    if request.method == 'GET':
        posts = Post.objects.all()
        serializer = PostSerializer(posts, many=True)
        return Response(serializer.data)

    elif request.method == 'POST':
        data = JSONParser().parse(request)
        serializer = PostSerializer(data=data)

        if serializer.is_valid():
            serializer.save()
            return Response(serializer.data, status=status.HTTP_201_CREATED)
        return Response(serializer.errors, status=status.HTTP_400_BAD_REQUEST)
</code></pre>

                <h2>Class-Based Views for APIs</h2>
                <p>Class-based views provide a more object-oriented approach to building APIs, allowing for better organization and reusability of code.</p>
                <h4>Using Class-based views:</h4>
                <pre class="codehilite"><code class="language-python">from rest_framework.response import Response
from rest_framework import status
from rest_framework.views import APIView
from posts.models import Post
from posts.serializers import PostSerializer


class PostList(APIView):
    def get(self, request, format=None):
        snippets = Post.objects.all()
        serializer = PostSerializer(snippets, many=True)
        return Response(serializer.data)

    def post(self, request, format=None):
        serializer = PostSerializer(data=request.data)
        if serializer.is_valid():
            serializer.save()
            return Response(serializer.data, status=status.HTTP_201_CREATED)

        return Response(serializer.errors, status=status.HTTP_400_BAD_REQUEST)
</code></pre>

                <h2>Leveraging Generic Class-Based Views</h2>
                <p>Django REST Framework offers a set of generic views that abstract common patterns, reducing boilerplate code significantly.</p>
                <h4>Using Generic Class-based views:</h4>
                <pre class="codehilite"><code class="language-python">from rest_framework import generics
from posts.models import Post
from posts.serializers import PostSerializer


class PostList(generics.ListCreateAPIView):
    queryset = Post.objects.all()
    serializer_class = PostSerializer
</code></pre>

                <h2>Building APIs with Mixins</h2>
                <p>Mixins provide specific actions that can be combined with generic views to create more specialized functionality.</p>
                <h4>Using Mixins:</h4>
                <pre class="codehilite"><code class="language-python">from rest_framework import generics, mixins
from posts.models import Post
from posts.serializers import PostSerializer


class PostList(generics.GenericAPIView,
               mixins.ListModelMixin,
               mixins.CreateModelMixin
               ):
    queryset = Post.objects.all()
    serializer_class = PostSerializer

    def get(self, request, *args, **kwargs):
        return self.list(request, *args, **kwargs)

    def post(self, request, *args, **kwargs):
        return self.create(request, *args, **kwargs)
</code></pre>

                <h2>Efficient API Management with ViewSets</h2>
                <p>ViewSets consolidate logic for multiple related views into a single class, simplifying URL routing and code management.</p>
                <h4>Using ViewSets:</h4>
                <p>With <code>ModelViewSet</code> (in this case), you don't have to create separate views for getting list of objects and detail of one object. ViewSet will handle it for you in a consistent way for both methods.</p>
                <pre class="codehilite"><code class="language-python">from rest_framework import viewsets
from posts.models import Post
from posts.serializers import PostSerializer


class PostViewSet(viewsets.ModelViewSet):
    &quot;&quot;&quot;
    A viewset for viewing and editing post instances.
    &quot;&quot;&quot;
    queryset = Post.objects.all()
    serializer_class = PostSerializer
</code></pre>

                <p>So basically, this would not only generate the <code>list</code> view, but also the <code>detail</code> view for every <a href="#base-example-model">Post</a> instance.</p>

                <h3>Routers for Automatic URL Configuration</h3>
                <p>Routers in ViewSets allow the URL configuration for your API to be automatically generated using naming standards, which is highly efficient.</p>
                <pre class="codehilite"><code class="language-python">from rest_framework.routers import DefaultRouter
from posts.views import PostViewSet

router = DefaultRouter()
router.register(r'users', UserViewSet)
urlpatterns = router.urls
</code></pre>

                <h3>Adding Custom Actions to ViewSets</h3>
                <p>DRF provides helpers to add custom actions for <em>ad-hoc</em> behaviours with the <code>@action</code> decorator. The router will configure its url accordingly.
                For example, we can add a <code>comments</code> action in the our <code>PostViewSet</code> to retrieve all the comments of a specific post as follows:</p>
                <pre class="codehilite"><code>from rest_framework import viewsets
from rest_framework.decorators import action
from posts.models import Post
from posts.serializers import PostSerializer, CommentSerializer

class PostViewSet(viewsets.ModelViewSet):
    queryset = Post.objects.all()
    serializer_class = PostSerializer

    @action(methods=['get'], detail=True)
    def comments(self, request, pk=None):
        try:
            post = Post.objects.get(id=pk)
        except Post.DoesNotExist:
            return Response({"error": "Post not found."},
                            status=status.HTTP_400_BAD_REQUEST)
        comments = post.comments.all()
        return Response(CommentSerializer(comments, many=True))
</code></pre>

                <p>Upon registering the view as <code>router.register(r'posts', PostViewSet)</code>, this action will then be available at the url <code>posts/{pk}/comments/</code>.</p>
                <p><a href="#drf-cheat-sheet">Back to Top ↑</a></p>
                <p><br/></p>
            </div>
        </div>
    </div>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <script>
        hljs.highlightAll();
    </script>
</body>
</html>