<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Prometheus Cheatsheet - PromQL Queries & Configuration</title>
    <meta name="description" content="Comprehensive Prometheus cheatsheet with PromQL query examples, scrape configurations, recording rules, and external resources for effective monitoring.">
    <meta name="keywords" content="Prometheus, PromQL, monitoring, metrics, cheatsheet, query examples, scrape config, recording rules, Grafana, node exporter, kube-state-metrics">
    <link rel="canonical" href="https://your-website.com/prometheus/prometheus.html">
    <meta name="robots" content="index, follow">
    <meta property="og:title" content="Prometheus Cheatsheet - PromQL Queries & Configuration">
    <meta property="og:description" content="Comprehensive Prometheus cheatsheet with PromQL query examples, scrape configurations, recording rules, and external resources for effective monitoring.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://your-website.com/prometheus/prometheus.html">
    <meta property="og:image" content="https://your-website.com/path/to/prometheus-og-image.png">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Prometheus Cheatsheet - PromQL Queries & Configuration">
    <meta name="twitter:description" content="Comprehensive Prometheus cheatsheet with PromQL query examples, scrape configurations, recording rules, and external resources for effective monitoring.">
    <meta name="twitter:image" content="https://your-website.com/path/to/prometheus-twitter-image.png">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github.min.css">
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            line-height: 1.6;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f8f9fa;
        }
        .container {
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        .header {
            background: #2c3e50;
            color: white;
            padding: 20px;
            border-bottom: 1px solid #34495e;
        }
        .header h1 {
            margin: 0;
            font-size: 1.5em;
        }
        .content {
            padding: 20px;
        }
        pre {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 4px;
            padding: 16px;
            overflow-x: auto;
            margin: 0;
        }
        code {
            font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
            font-size: 14px;
        }
        .markdown-content {
            line-height: 1.7;
        }
        .markdown-content h1, .markdown-content h2, .markdown-content h3 {
            color: #2c3e50;
            border-bottom: 1px solid #e9ecef;
            padding-bottom: 8px;
        }
        .markdown-content pre {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 4px;
            padding: 16px;
            overflow-x: auto;
        }
        .markdown-content code {
            background: #f1f3f4;
            padding: 2px 4px;
            border-radius: 3px;
            font-size: 0.9em;
        }
        .markdown-content pre code {
            background: none;
            padding: 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Prometheus Cheatsheet</h1>
        </div>
        <div class="content">
            <div class="markdown-content">
                <h2>Prometheus Cheatsheet Overview</h2>
                <ul>
                    <li><a href="#basics">Prometheus Metric Types and Basics</a></li>
                    <li><a href="#curated-examples">Curated Examples by Exporter</a></li>
                    <li><a href="#example-queries">PromQL Example Queries</a></li>
                    <li><a href="#scrape-config">Prometheus Scrape Configurations</a></li>
                    <li><a href="#recording-rules">Prometheus Recording Rules</a></li>
                    <li><a href="#external-sources">External Prometheus Resources</a></li>
                </ul>

                <h2>Prometheus Metric Types and Basics</h2>
                <ul>
                    <li><code>Counter</code>: A metric that only increases. Useful for tracking counts of events like requests or errors.</li>
                    <li><code>Gauge</code>: A metric that can increase or decrease. Ideal for measuring current values like memory usage or temperature.</li>
                    <li><code>Histogram</code>: A metric that samples observations (e.g., request durations) and counts them in configurable buckets. Also provides a sum and count of all observations.</li>
                    <li><code>Summary</code>: Similar to a histogram, but calculates quantiles on the client side. Less common than histograms in modern Prometheus setups.</li>
                    <li><a href="https://opensource.com/article/18/4/metrics-monitoring-and-python">Source and Statistics 101</a></li>
                </ul>
                <h3>PromQL Query Functions</h3>
                <ul>
                    <li><code>rate</code>: Calculates the per-second average rate of increase for a counter over a specified time window.</li>
                    <li><code>irate</code>: Calculates the *instantaneous* per-second rate of increase for a counter, using only the last two data points. Best for volatile counters.</li>
                    <li><code>increase</code>: Calculates the total increase of a counter over a specified time frame.</li>
                    <li><code>resets</code>: Counts the number of times a counter has been reset within a given time window.</li>
                </ul>

                <h2>Curated Examples by Exporter</h2>
                <p>Example queries categorized by common exporters:</p>
                <ul>
                    <li><a href="metric_examples/NODE_METRICS.md">Node Exporter Metrics</a></li>
                </ul>

                <h2>PromQL Example Queries</h2>
                <h3>General Queries</h3>
                <p>Show me all the metric names for the job=app:</p>
                <pre><code class="language-promql">group ({job="app"}) by (__name__)</code></pre>

                <p>How many nodes are up?</p>
                <pre><code class="language-promql">up</code></pre>

                <p>Count targets per job:</p>
                <pre><code class="language-promql">count by (job) (up)</code></pre>

                <h3>Combining and Manipulating Metrics</h3>
                <p>Combining values from 2 different vectors (Hostname with a Metric):</p>
                <pre><code class="language-promql">up * on(instance) group_left(nodename) (node_uname_info)</code></pre>

                <p>Exclude labels:</p>
                <pre><code class="language-promql">sum without(job) (up * on(instance) group_left(nodename) (node_uname_info))</code></pre>

                <h3>Memory and CPU Usage</h3>
                <p>Amount of Memory Available:</p>
                <pre><code class="language-promql">node_memory_MemAvailable_bytes</code></pre>

                <p>Amount of Memory Available in MB:</p>
                <pre><code class="language-promql">node_memory_MemAvailable_bytes / 1024 / 1024</code></pre>

                <p>Amount of Memory Available in MB 10 minutes ago:</p>
                <pre><code class="language-promql">node_memory_MemAvailable_bytes / 1024 / 1024 offset 10m</code></pre>

                <p>Average Memory Available for Last 5 Minutes:</p>
                <pre><code class="language-promql">avg_over_time(node_memory_MemFree_bytes[5m]) / 1024 / 1024</code></pre>

                <p>Memory Usage in Percent:</p>
                <pre><code class="language-promql">100 * (1 - ((avg_over_time(node_memory_MemFree_bytes[10m]) + avg_over_time(node_memory_Cached_bytes[10m]) + avg_over_time(node_memory_Buffers_bytes[10m])) / avg_over_time(node_memory_MemTotal_bytes[10m])))</code></pre>

                <p>CPU Utilization:</p>
                <pre><code class="language-promql">100 - (avg by(instance) (irate(node_cpu_seconds_total{mode="idle"}[5m])) * 100 )</code></pre>

                <p>CPU Utilization offset with 24 hours ago:</p>
                <pre><code class="language-promql">100 - (avg by(instance) (irate(node_cpu_seconds_total{mode="idle"}[5m] offset 24h)) * 100 )</code></pre>

                <p>CPU Utilization per Core:</p>
                <pre><code class="language-promql">( (1 - rate(node_cpu_seconds_total{job="node-exporter", mode="idle", instance="$instance"}[$__interval])) / ignoring(cpu) group_left() count without (cpu)( node_cpu_seconds_total{job="node-exporter", mode="idle", instance="$instance"}) )</code></pre>

                <p>CPU Utilization by Node:</p>
                <pre><code class="language-promql">100 - (avg by (instance) (irate(node_cpu_seconds_total{mode="idle"}[10m]) * 100) * on(instance) group_left(nodename) (node_uname_info))</code></pre>

                <p>Memory Available by Node:</p>
                <pre><code class="language-promql">node_memory_MemAvailable_bytes * on(instance) group_left(nodename) (node_uname_info)</code></pre>

                <p>Or if you rely on labels from other metrics:</p>
                <pre><code class="language-promql">(node_memory_MemTotal_bytes{job="node-exporter"} - node_memory_MemFree_bytes{job="node-exporter"} - node_memory_Buffers_bytes{job="node-exporter"} - node_memory_Cached_bytes{job="node-exporter"}) * on(instance) group_left(nodename) (node_uname_info{nodename=~"$nodename"})</code></pre>

                <p>Load Average in percentage:</p>
                <pre><code class="language-promql">avg(node_load1{instance=~"$name", job=~"$job"}) / count(count(node_cpu_seconds_total{instance=~"$name", job=~"$job"}) by (cpu)) * 100</code></pre>

                <p>Load Average per Instance:</p>
                <pre><code class="language-promql">sum(node_load5{}) by (instance) / count(node_cpu_seconds_total{mode="user"}) by (instance) * 100</code></pre>

                <p>Load Average (average per instance_id: lets say the metric has 2 identical label values but are different):</p>
                <pre><code class="language-promql">avg by (instance_id, instance) (node_load1{job=~"node-exporter", aws_environment="dev", instance="debug-dev"})</code></pre>

                <h3>Disk and Network IO</h3>
                <p>Disk Available by Node:</p>
                <pre><code class="language-promql">node_filesystem_free_bytes{mountpoint="/"} * on(instance) group_left(nodename) (node_uname_info)</code></pre>

                <p>Disk IO per Node: Outbound:</p>
                <pre><code class="language-promql">sum(rate(node_disk_read_bytes_total[1m])) by (device, instance) * on(instance) group_left(nodename) (node_uname_info)</code></pre>

                <p>Disk IO per Node: Inbound:</p>
                <pre><code class="language-promql">sum(rate(node_disk_written_bytes_total{job="node"}[1m])) by (device, instance) * on(instance) group_left(nodename) (node_uname_info)</code></pre>

                <p>Network IO per Node:</p>
                <pre><code class="language-promql">sum(rate(node_network_receive_bytes_total[1m])) by (device, instance) * on(instance) group_left(nodename) (node_uname_info)
sum(rate(node_network_transmit_bytes_total[1m])) by (device, instance) * on(instance) group_left(nodename) (node_uname_info)</code></pre>

                <h3>Process and Container Metrics</h3>
                <p>Process Restarts:</p>
                <pre><code class="language-promql">changes(process_start_time_seconds{job=~".+"}[15m])</code></pre>

                <p>Container Cycling:</p>
                <pre><code class="language-promql">(time() - container_start_time_seconds{job=~".+"}) &lt; 60</code></pre>

                <h3>Histogram and Time-Series Analysis</h3>
                <p>Histogram Quantile (e.g., 95th percentile request duration):</p>
                <pre><code class="language-promql">histogram_quantile(0.95, sum(rate(prometheus_http_request_duration_seconds_bucket[5m])) by (le, handler)) * 1e3</code></pre>

                <p>Metrics 24 hours ago (useful for comparison):</p>
                <pre><code class="language-promql"># query a
total_number_of_errors{instance="my-instance", region="eu-west-1"}
# query b
total_number_of_errors{instance="my-instance", region="eu-west-1"} offset 24h</code></pre>

                <h3>Container Orchestration (Kubernetes/Swarm)</h3>
                <p>Number of Nodes (Up):</p>
                <pre><code class="language-promql">count(up{job="cadvisor_my-swarm"})</code></pre>

                <p>Running Containers per Node:</p>
                <pre><code class="language-promql">count(container_last_seen) BY (container_label_com_docker_swarm_node_id)</code></pre>

                <p>Running Containers per Node, include corresponding hostnames:</p>
                <pre><code class="language-promql">count(container_last_seen) BY (container_label_com_docker_swarm_node_id) * ON (container_label_com_docker_swarm_node_id) GROUP_LEFT(node_name) node_meta</code></pre>

                <h3>HAProxy Metrics</h3>
                <p>HAProxy Response Codes:</p>
                <pre><code class="language-promql">haproxy_server_http_responses_total{backend=~"$backend", server=~"$server", code=~"$code", alias=~"$alias"} &gt; 0</code></pre>

                <h3>Resource Usage and Top Metrics</h3>
                <p>Metrics with the most resources (time series count):</p>
                <pre><code class="language-promql">topk(10, count by (__name__)({__name__=~".+"}))</code></pre>

                <p>Top 10 metrics per job:</p>
                <pre><code class="language-promql">topk(10, count by (__name__, job)({__name__=~".+"}))</code></pre>

                <p>Jobs with the most time series:</p>
                <pre><code class="language-promql">topk(10, count by (job)({__name__=~".+"}))</code></pre>

                <p>Top 5 per value (e.g., highest costs):</p>
                <pre><code class="language-promql">sort_desc(topk(5, aws_service_costs))</code></pre>

                <p>Table - Top 5 (enable instant as well):</p>
                <pre><code class="language-promql">sort(topk(5, aws_service_costs))</code></pre>

                <p>Most metrics per job, sorted:</p>
                <pre><code class="language-promql">sort_desc (sum by (job) (count by (__name__, job)({job=~".+"})))</code></pre>

                <p>Group per Day (Table) - WIP</p>
                <pre><code class="language-promql">aws_service_costs{service=~"$service"} + ignoring(year, month, day) group_right
  count_values without() ("year", year(timestamp(
    count_values without() ("month", month(timestamp(
      count_values without() ("day", day_of_month(timestamp(
        aws_service_costs{service=~"$service"}
      )))
    )))
  ))) * 0</code></pre>

                <p>Group Metrics per node hostname:</p>
                <pre><code class="language-promql">node_memory_MemAvailable_bytes * on(instance) group_left(nodename) (node_uname_info)</code></pre>

                <p>Subtract two gauge metrics (exclude the label that doesn't match):</p>
                <pre><code class="language-promql">polkadot_block_height{instance="polkadot", chain=~"$chain", status="sync_target"} - ignoring(status) polkadot_block_height{instance="polkadot", chain=~"$chain", status="finalized"}</code></pre>

                <p>Conditional joins when labels exist:</p>
                <pre><code class="language-promql">(
    # For all sensors that have a name (label "label"), join them with `node_hwmon_sensor_label` to get that name.
    (node_hwmon_temp_celsius * ignoring(label) group_left(label) node_hwmon_sensor_label)
  or
    # For all sensors that do NOT have a name (label "label") in `node_hwmon_sensor_label`, assign them `label="unknown-sensor-name"`.
    (label_replace((node_hwmon_temp_celsius unless ignoring(label) node_hwmon_sensor_label), "label", "unknown-sensor-name", "", ".*"))
)</code></pre>

                <p>Container CPU Average for 5m:</p>
                <pre><code class="language-promql">(sum by(instance, container_label_com_amazonaws_ecs_container_name, container_label_com_amazonaws_ecs_cluster) (rate(container_cpu_usage_seconds_total[5m])) * 100)</code></pre>

                <p>Container Memory Usage: Total:</p>
                <pre><code class="language-promql">sum(container_memory_rss{container_label_com_docker_swarm_task_name=~".+"})</code></pre>

                <p>Container Memory, per Task, Node:</p>
                <pre><code class="language-promql">sum(container_memory_rss{container_label_com_docker_swarm_task_name=~".+"}) BY (container_label_com_docker_swarm_task_name, container_label_com_docker_swarm_node_id)</code></pre>

                <p>Container Memory per Node:</p>
                <pre><code class="language-promql">sum(container_memory_rss{container_label_com_docker_swarm_task_name=~".+"}) BY (container_label_com_docker_swarm_node_id)</code></pre>

                <p>Memory Usage per Stack:</p>
                <pre><code class="language-promql">sum(container_memory_rss{container_label_com_docker_swarm_task_name=~".+"}) BY (container_label_com_docker_stack_namespace)</code></pre>

                <p>Remove metrics from results that do not contain a specific label:</p>
                <pre><code class="language-promql">container_cpu_usage_seconds_total{container_label_com_amazonaws_ecs_cluster!=""}</code></pre>

                <p>Remove labels from a metric:</p>
                <pre><code class="language-promql">sum without (age, country) (people_metrics)</code></pre>

                <p>View top 10 biggest metrics by name:</p>
                <pre><code class="language-promql">topk(10, count by (__name__)({__name__=~".+"}))</code></pre>

                <p>View top 10 biggest metrics by name, job:</p>
                <pre><code class="language-promql">topk(10, count by (__name__, job)({__name__=~".+"}))</code></pre>

                <p>View all metrics for a specific job:</p>
                <pre><code class="language-promql">{__name__=~".+", job="node-exporter"}</code></pre>

                <p>View all metrics for more than one job using vector selectors:</p>
                <pre><code class="language-promql">{__name__=~".+", job=~"traefik|cadvisor|prometheus"}</code></pre>

                <p>Website uptime with blackbox-exporter:</p>
                <pre><code class="language-promql"># https://www.robustperception.io/what-percentage-of-time-is-my-service-down-for
avg_over_time(probe_success{job="node"}[15m]) * 100</code></pre>

                <p>Remove / Replace label:</p>
                <ul>
                    <li><a href="https://medium.com/@texasdave2/replace-and-remove-a-label-in-a-prometheus-query-9500faa302f0">Prometheus Label Replace/Remove</a></li>
                </ul>

                <h3>Client and Server Request Metrics</h3>
                <p><strong>Client Request Counts</strong>:</p>
                <pre><code class="language-promql">irate(http_client_requests_seconds_count{job="web-metrics", environment="dev", uri!~".*actuator.*"}[5m])</code></pre>

                <p><strong>Client Response Time</strong>:</p>
                <pre><code class="language-promql">irate(http_client_requests_seconds_sum{job="web-metrics", environment="dev", uri!~".*actuator.*"}[5m]) /
irate(http_client_requests_seconds_count{job="web-metrics", environment="dev", uri!~".*actuator.*"}[5m])</code></pre>

                <p><strong>Requests per Second</strong>:</p>
                <pre><code class="language-promql">sum(increase(http_server_requests_seconds_count{service="my-service", env="dev"}[1m])) by (uri)</code></pre>

                <p>is the same as:</p>
                <pre><code class="language-promql">sum(rate(http_server_requests_seconds_count{service="my-service", env="dev"}[1m]) * 60 ) by (uri)</code></pre>

                <p>See this <a href="https://stackoverflow.com/questions/66282512/grafana-graphing-http-requests-per-minute-with-http-server-requests-seconds-coun">SO thread</a> for more details.</p>
                <p><strong>p95 Request Latencies</strong> with <code>histogram_quantile</code> (the latency experienced by the slowest 5% of requests in seconds):</p>
                <pre><code class="language-promql">histogram_quantile(0.95, sum by (le, store) (rate(myapp_latency_seconds_bucket{application="product-service", category=~".+"}[5m])))</code></pre>

                <h3>Resource Requests and Limits (Kubernetes)</h3>
                <p>For CPU: average rate of CPU usage over 15 minutes:</p>
                <pre><code class="language-promql">rate(container_cpu_usage_seconds_total{job="kubelet",container="my-application"}[15m])</code></pre>

                <p>For Memory: shows usage in MB:</p>
                <pre><code class="language-promql">container_memory_usage_bytes{job="kubelet",container="my-application"} / (1024 * 1024)</code></pre>

                <h2>Prometheus Scrape Configurations</h2>
                <h3>Relabeling Configurations</h3>
                <p>Example of relabeling to set the `instance` label:</p>
                <pre><code class="language-yaml">scrape_configs:
  - job_name: 'multipass-nodes'
    static_configs:
    - targets: ['ip-192-168-64-29.multipass:9100']
      labels:
        env: test
    - targets: ['ip-192-168-64-30.multipass:9100']
      labels:
        env: test
    relabel_configs:
    - source_labels: [__address__]
      separator: ':'
      regex: '(.*):(.*)'
      replacement: '${1}'
      target_label: instance</code></pre>
                <ul>
                    <li><a href="https://gist.github.com/ruanbekker/72216bea59fc56af189f5a7b2e3a8002">Full Relabeling Example</a></li>
                    <li><a href="https://medium.com/quiq-blog/prometheus-relabeling-tricks-6ae62c56cbda">Prometheus Relabeling Tricks</a></li>
                    <li><a href="https://blog.freshtracks.io/prometheus-relabel-rules-and-the-action-parameter-39c71959354a">Relabel Rules and Action Parameter</a></li>
                    <li><a href="https://www.robustperception.io/relabel_configs-vs-metric_relabel_configs">Relabel Configs vs Metric Relabel Configs</a></li>
                </ul>

                <h3>Static Configurations</h3>
                <p>Scraping a static list of targets:</p>
                <pre><code class="language-yaml">scrape_configs:
  - job_name: 'prometheus'
    scrape_interval: 5s
    static_configs:
         - targets: ['localhost:9090']
      labels:
        region: 'eu-west-1'</code></pre>

                <h3>Service Discovery (DNS SD)</h3>
                <p>Using DNS service discovery for MySQL exporter:</p>
                <pre><code class="language-yaml">scrape_configs:
  - job_name: 'mysql-exporter'
    scrape_interval: 5s
    dns_sd_configs:
    - names:
      - 'tasks.mysql-exporter'
      type: 'A'
      port: 9104
    relabel_configs:
    - source_labels: [__address__]
      regex: '.*'
      target_label: instance
      replacement: 'mysqld-exporter'</code></pre>
                <ul>
                    <li><a href="https://gist.github.com/trastle/1aa205354577ef0b329d4b8cc84c674a">More DNS SD Examples</a></li>
                </ul>

                <h2>Grafana with Prometheus</h2>
                <p>Customizing legend labels in Grafana:</p>
                <pre><code class="language-text"># If your output is like: {instance="10.0.2.66:9100",job="node",nodename="rpi-02"}
# Use this in the Grafana "Legend" input:
{{nodename}}</code></pre>

                <p>Displaying specific labels:</p>
                <pre><code class="language-text"># If you want to show 'exported_instance'
sum(exporter_memory_usage{exported_instance="myapp"})
# You might need to group by it:
sum by (exported_instance) (exporter_memory_usage{exported_instance="my_app"})
# Then in Grafana Legend:
{{exported_instance}}</code></pre>

                <h3>Grafana Variables</h3>
                <ul>
                    <li><strong>Hostname Variable</strong>:
                        <p>Name: <code>node</code></p>
                        <p>Label: <code>node</code></p>
                        <p>Query: <code>label_values(node_uname_info, nodename)</code></p>
                        <p>Usage in query: <code>node_uname_info{nodename=~"$node"}</code></p>
                    </li>
                    <li><strong>Node Exporter Address Variable</strong>:
                        <p>Type: <code>Query</code></p>
                        <p>Query: <code>label_values(node_network_up, instance)</code></p>
                    </li>
                    <li><strong>MySQL Exporter Address Variable</strong>:
                        <p>Type: <code>Query</code></p>
                        <p>Query: <code>label_values(mysql_up, instance)</code></p>
                    </li>
                    <li><strong>Static Values Variable</strong>:
                        <p>Type: <code>Custom</code></p>
                        <p>Name: <code>dc</code></p>
                        <p>Label: <code>dc</code></p>
                        <p>Values: <code>eu-west-1a,eu-west-1b,eu-west-1c</code></p>
                    </li>
                    <li><strong>Docker Swarm Stack Names Variable</strong>:
                        <p>Name: <code>stack</code></p>
                        <p>Label: <code>stack</code></p>
                        <p>Query: <code>label_values(container_last_seen,container_label_com_docker_stack_namespace)</code></p>
                    </li>
                    <li><strong>Docker Swarm Service Names Variable</strong>:
                        <p>Name: <code>service_name</code></p>
                        <p>Label: <code>service_name</code></p>
                        <p>Query: <code>label_values(container_last_seen,container_label_com_docker_swarm_service_name)</code></p>
                    </li>
                    <li><strong>Docker Swarm Manager NodeId Variable</strong>:
                        <p>Name: <code>manager_node_id</code></p>
                        <p>Label: <code>manager_node_id</code></p>
                        <p>Query: <code>label_values(container_last_seen{container_label_com_docker_swarm_service_name=~"proxy_traefik", container_label_com_docker_swarm_node_id=~".+"}, container_label_com_docker_swarm_node_id)</code></p>
                    </li>
                    <li><strong>Docker Swarm Stacks Running on Managers Variable</strong>:
                        <p>Name: <code>stack_on_manager</code></p>
                        <p>Label: <code>stack_on_manager</code></p>
                        <p>Query: <code>label_values(container_last_seen{container_label_com_docker_swarm_node_id=~"$manager_node_id"},container_label_com_docker_stack_namespace)</code></p>
                    </li>
                </ul>

                <h2>Prometheus Recording Rules</h2>
                <ul>
                    <li><a href="https://deploy.live/blog/today-i-learned-prometheus-recording-rules/">@deploy.live's Recording Rules Post</a></li>
                </ul>

                <h2>Application Instrumentation</h2>
                <h3>Python Flask</h3>
                <ul>
                    <li><a href="https://github.com/ramdesh/flask-prometheus-grafana-example">@ramdesh flask-prometheus-grafana-example</a></li>
                </ul>

                <h2>External Prometheus Resources</h2>
                <ul>
                    <li><a href="https://prometheus.io/docs/querying/basics/">Prometheus Querying Basics</a></li>
                    <li><a href="https://medium.com/@valyala/promql-tutorial-for-beginners-9ab455142085">PromQL Tutorial for Beginners</a></li>
                    <li><a href="https://medianetlab.gr/prometheus-101/">Prometheus 101</a></li>
                    <li><a href="https://www.section.io/blog/prometheus-querying/">Section.io: Prometheus Querying</a></li>
                    <li><a href="https://www.innoq.com/en/blog/prometheus-counters/">InnoQ: Prometheus Counters</a></li>
                    <li><a href="https://www.robustperception.io/which-are-my-biggest-metrics">RobustPerception: Biggest Metrics</a></li>
                    <li><a href="https://github.com/grafana/grafana/issues/6561">Top Metrics Discussion</a></li>
                    <li><a href="https://ordina-jworks.github.io/monitoring/2016/09/23/Monitoring-with-Prometheus.html">Ordina-Jworks: Monitoring with Prometheus</a></li>
                    <li><a href="https://github.com/infinityworks/prometheus-example-queries">Infinity Works: Example Queries</a></li>
                    <li><a href="https://medium.com/quiq-blog/prometheus-relabeling-tricks-6ae62c56cbda">Prometheus Relabeling Tricks</a></li>
                    <li><a href="https://timber.io/blog/promql-for-humans/">Timber: PromQL for Humans</a></li>
                    <li><a href="https://www.robustperception.io/understanding-machine-cpu-usage">RobustPerception: Machine CPU Usage</a></li>
                    <li><a href="https://www.robustperception.io/common-query-patterns-in-promql">RobustPerception: Common Query Patterns</a></li>
                    <li><a href="https://www.robustperception.io/what-percentage-of-time-is-my-service-down-for">RobustPerception: Website Uptime</a></li>
                    <li><a href="https://www.robustperception.io/how-does-a-prometheus-histogram-work">RobustPerception: Prometheus Histogram</a></li>
                    <li><a href="https://www.robustperception.io/how-does-a-prometheus-counter-work">RobustPerception: Prometheus Counter</a></li>
                    <li><a href="https://www.robustperception.io/how-does-a-prometheus-gauge-work">RobustPerception: Prometheus Gauge</a></li>
                    <li><a href="https://www.robustperception.io/how-does-a-prometheus-summary-work">RobustPerception: Prometheus Summary</a></li>
                    <li><a href="https://devconnected.com/the-definitive-guide-to-prometheus-in-2019/">DevConnected: Definitive Guide to Prometheus</a></li>
                    <li><a href="https://tech.showmax.com/2019/10/prometheus-introduction/">@showmax Prometheus Introduction</a></li>
                    <li><a href="https://rancher.com/docs/rancher/v2.0-v2.4/en/cluster-admin/tools/cluster-monitoring/expression/">Rancher: Cluster Monitoring</a></li>
                    <li><a href="https://utcc.utoronto.ca/~cks/space/blog/sysadmin/PrometheusCPUStats">Prometheus CPU Stats</a></li>
                    <li><a href="https://docs.aws.amazon.com/AmazonCloudWatch/latest/monitoring/ContainerInsights-Prometheus-Setup-configure.html#ContainerInsights-Prometheus-Setup-config-scrape">AWS Prometheus Rewrite Rules for k8s</a></li>
                    <li><a href="https://jarodw.com/posts/prometheus-ec2-sd-multiple-aws-accounts/">Prometheus AWS Cross Account ec2_sd_config</a></li>
                    <li><a href="https://medium.com/investing-in-tech/automatic-monitoring-for-all-new-aws-instances-using-prometheus-service-discovery-97d37a5b2ea2">Prometheus AWS ec2_sd_config Role</a></li>
                    <li><a href="https://fabianlee.org/2022/07/08/prometheus-monitoring-services-using-additional-scrape-config-for-prometheus-operator/">Fabianlee: Kubernetes Scrape Configs</a></li>
                    <li><a href="https://www.metricfire.com/blog/understanding-the-prometheus-rate-function/">MetricFire: Understanding the Rate Function</a></li>
                    <li><a href="https://niravshah2705.medium.com/prometheus-alert-for-missing-metrics-and-labels-afd4b8f12b1">Alerting on Missing Labels and Metrics</a></li>
                    <li><a href="https://devconnected.com/monitoring-disk-i-o-on-linux-with-the-node-exporter/">@devconnected Disk IO Dashboarding</a></li>
                    <li><a href="https://gist.github.com/max-rocket-internet/6a05ee757b6587668a1de8a5c177728b">CPU and Memory Requests</a></li>
                    <li><a href="https://levelup.gitconnected.com/prometheus-counter-metrics-d6c393d86076">Prometheus Counter Metrics</a></li>
                    <li><a href="https://last9.io/blog/promql-cheat-sheet/?ref=cheatsheets.ruanbekker.com">last9.io PromQL Cheatsheet</a></li>
                    <li><a href="https://ops.tips/blog/simulating-aws-tags-in-local-prometheus/">Simulating AWS Tags in Local Prometheus</a></li>
                </ul>
            </div>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <script>hljs.highlightAll();</script>
</body>
</html>