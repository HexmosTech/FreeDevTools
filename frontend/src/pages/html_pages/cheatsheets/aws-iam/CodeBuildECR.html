<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CodeBuild ECR Policy - Securely Push Images to ECR</title>
    <meta name="description" content="Securely push images to Amazon ECR using CodeBuild with this IAM policy. Learn how to grant CodeBuild the necessary permissions for ECR access.">
    <meta name="keywords" content="CodeBuild, ECR, IAM policy, AWS, Docker, container, image, repository, security, permissions">
    <meta name="author" content="Hexmos">
    <link rel="canonical" href="https://example.com/aws-iam/codebuild-ecr-policy">
    <meta name="robots" content="index, follow">

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://example.com/aws-iam/codebuild-ecr-policy">
    <meta property="og:title" content="CodeBuild ECR Policy - Securely Push Images to ECR">
    <meta property="og:description" content="Securely push images to Amazon ECR using CodeBuild with this IAM policy. Grant CodeBuild permissions for ECR access.">
    <meta property="og:image" content="https://example.com/images/codebuild-ecr-policy.png">

    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://example.com/aws-iam/codebuild-ecr-policy">
    <meta property="twitter:title" content="CodeBuild ECR Policy - Securely Push Images to ECR">
    <meta property="twitter:description" content="Securely push images to Amazon ECR using CodeBuild with this IAM policy. Grant CodeBuild permissions for ECR access.">
    <meta property="twitter:image" content="https://example.com/images/codebuild-ecr-policy.png">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github.min.css">
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            line-height: 1.6;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f8f9fa;
        }
        .container {
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        .header {
            background: #2c3e50;
            color: white;
            padding: 20px;
            border-bottom: 1px solid #34495e;
        }
        .header h1 {
            margin: 0;
            font-size: 1.5em;
        }
        .content {
            padding: 20px;
        }
        pre {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 4px;
            padding: 16px;
            overflow-x: auto;
            margin: 0;
        }
        code {
            font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
            font-size: 14px;
        }
        .markdown-content {
            line-height: 1.7;
        }
        .markdown-content h2, .markdown-content h3 {
            color: #2c3e50;
            border-bottom: 1px solid #e9ecef;
            padding-bottom: 8px;
        }
        .markdown-content pre {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 4px;
            padding: 16px;
            overflow-x: auto;
        }
        .markdown-content code {
            background: #f1f3f4;
            padding: 2px 4px;
            border-radius: 3px;
            font-size: 0.9em;
        }
        .markdown-content pre code {
            background: none;
            padding: 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>CodeBuild ECR Policy</h1>
        </div>
        <div class="content markdown-content">
            <p>This IAM policy allows CodeBuild to push images to Amazon ECR. Use this policy to grant CodeBuild the necessary permissions to access your ECR repository.</p>

            <h2>IAM Policy for CodeBuild ECR Access</h2>
            <p>Below is the JSON representation of the IAM policy. This policy grants permissions to get authorization tokens, initiate layer uploads, upload layer parts, complete layer uploads, check layer availability, and put images into your ECR repository.</p>

            <pre><code class="language-json">{
    "Version": "2012-10-17",
    "Statement": [
        {
        "Effect": "Allow",
        "Action": [
          "ecr:GetAuthorizationToken",
          "ecr:InitiateLayerUpload",
          "ecr:UploadLayerPart",
          "ecr:CompleteLayerUpload",
          "ecr:BatchCheckLayerAvailability",
          "ecr:PutImage"
        ],
        "Resource": [
          "arn:aws:ecr:eu-west-1:xxxxxxxxxxxx:repository/myrepo"
        ]
      }
    ]
}
</code></pre>

            <h2>Explanation of Permissions</h2>
            <p>This policy includes the following permissions:</p>
            <ul>
                <li><code>ecr:GetAuthorizationToken</code>: Allows CodeBuild to retrieve an authentication token to authenticate with ECR.</li>
                <li><code>ecr:InitiateLayerUpload</code>: Allows CodeBuild to initiate the upload of a new image layer.</li>
                <li><code>ecr:UploadLayerPart</code>: Allows CodeBuild to upload parts of an image layer.</li>
                <li><code>ecr:CompleteLayerUpload</code>: Allows CodeBuild to finalize the upload of an image layer.</li>
                <li><code>ecr:BatchCheckLayerAvailability</code>: Allows CodeBuild to check the availability of image layers.</li>
                <li><code>ecr:PutImage</code>: Allows CodeBuild to put (upload) an image into the ECR repository.</li>
            </ul>

            <h2>How to Use This Policy</h2>
            <ol>
                <li>Create an IAM role for your CodeBuild project.</li>
                <li>Attach this policy to the IAM role.</li>
                <li>Replace <code>arn:aws:ecr:eu-west-1:xxxxxxxxxxxx:repository/myrepo</code> with the actual ARN of your ECR repository.</li>
                <li>Configure your CodeBuild project to use the IAM role.</li>
            </ol>

            <h2>Additional Resources</h2>
            <p>For more information about AWS IAM policies and Amazon ECR, refer to the following resources:</p>
            <ul>
                <li><a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/access_policies.html" rel="noopener noreferrer">AWS IAM Policies Documentation</a></li>
                <li><a href="https://docs.aws.amazon.com/AmazonECR/latest/userguide/security-iam-policies.html" rel="noopener noreferrer">Amazon ECR IAM Policies</a></li>
            </ul>
        </div>
    </div>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <script>
        hljs.highlightAll();
    </script>
</body>
</html>
