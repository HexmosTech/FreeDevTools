<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SQLAlchemy Text Module - Execute Raw SQL</title>
    <meta name="description" content="Learn to execute raw SQL queries with SQLAlchemy's Text module. This guide covers inserting and selecting data using Python and SQLAlchemy for database operations.">
    <meta name="keywords" content="SQLAlchemy, Python, SQL, raw SQL, text module, database, ORM, execute SQL, insert data, select data, Python database">
    <link rel="canonical" href="https://yourwebsite.com/python/sqlalchemy.html">
    <meta name="robots" content="index, follow">

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://yourwebsite.com/python/sqlalchemy.html">
    <meta property="og:title" content="SQLAlchemy Text Module - Execute Raw SQL">
    <meta property="og:description" content="Learn to execute raw SQL queries with SQLAlchemy's Text module. This guide covers inserting and selecting data using Python and SQLAlchemy for database operations.">
    <meta property="og:image" content="https://yourwebsite.com/path/to/your/og-image.jpg">

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:url" content="https://yourwebsite.com/python/sqlalchemy.html">
    <meta name="twitter:title" content="SQLAlchemy Text Module - Execute Raw SQL">
    <meta name="twitter:description" content="Learn to execute raw SQL queries with SQLAlchemy's Text module. This guide covers inserting and selecting data using Python and SQLAlchemy for database operations.">
    <meta name="twitter:image" content="https://yourwebsite.com/path/to/your/twitter-image.jpg">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github.min.css">
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            line-height: 1.6;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f8f9fa;
        }
        .container {
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        .header {
            background: #2c3e50;
            color: white;
            padding: 20px;
            border-bottom: 1px solid #34495e;
        }
        .header h1 {
            margin: 0;
            font-size: 1.5em;
        }
        .content {
            padding: 20px;
        }
        pre {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 4px;
            padding: 16px;
            overflow-x: auto;
            margin: 0;
        }
        code {
            font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
            font-size: 14px;
        }
        .markdown-content {
            line-height: 1.7;
        }
        .markdown-content h1, .markdown-content h2, .markdown-content h3 {
            color: #2c3e50;
            border-bottom: 1px solid #e9ecef;
            padding-bottom: 8px;
        }
        .markdown-content pre {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 4px;
            padding: 16px;
            overflow-x: auto;
        }
        .markdown-content code {
            background: #f1f3f4;
            padding: 2px 4px;
            border-radius: 3px;
            font-size: 0.9em;
        }
        .markdown-content pre code {
            background: none;
            padding: 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>SQLAlchemy Text Module Guide</h1>
        </div>
        <div class="content">
            <div class="markdown-content">
                <h1>SQLAlchemy Raw SQL Execution</h1>
                <p>This guide demonstrates how to execute raw SQL queries using SQLAlchemy's powerful Text module in Python. This is particularly useful when you need to perform operations that are more efficiently handled by direct SQL statements or when working with complex queries not easily expressed through an ORM.</p>

                <h2>Using the Text Module for Database Operations</h2>
                <p>SQLAlchemy's <code>text()</code> construct allows you to embed literal SQL expressions within your Python code. This provides a flexible way to interact with your database, offering fine-grained control over SQL statements.</p>
                <p>Source:
                    - https://chartio.com/resources/tutorials/how-to-execute-raw-sql-in-sqlalchemy/</p>

                <h3>Importing Necessary SQLAlchemy Components</h3>
                <p>Begin by importing the required modules from SQLAlchemy:</p>
                <pre><code class="language-python">&gt;&gt;&gt; import sqlalchemy
&gt;&gt;&gt; from sqlalchemy import create_engine
&gt;&gt;&gt; from sqlalchemy import Table, Column, Integer, String, MetaData, ForeignKey
&gt;&gt;&gt; from sqlalchemy import inspect
</code></pre>

                <h3>Defining Database Schema with MetaData</h3>
                <p>Define your database schema using SQLAlchemy's <code>MetaData</code> and <code>Table</code> objects. This example sets up a simple 'book' table.</p>
                <pre><code class="language-python">&gt;&gt;&gt; metadata = MetaData()
&gt;&gt;&gt; books = Table('book', metadata, Column('id', Integer, primary_key=True), Column('title', String), Column('primary_author', String))
&gt;&gt;&gt; engine = create_engine('sqlite:///books.db')
&gt;&gt;&gt; metadata.create_all(engine)
</code></pre>

                <h3>Inspecting Database Table Structure</h3>
                <p>Use the <code>inspect</code> function to examine the structure of your database tables, such as retrieving column information.</p>
                <pre><code class="language-python">&gt;&gt;&gt; inspector = inspect(engine)
&gt;&gt;&gt; inspector.get_columns('book')
[
  {'name': 'id', 'type': INTEGER(), 'nullable': False, 'default': None, 'autoincrement': 'auto', 'primary_key': 1},
  {'name': 'title', 'type': VARCHAR(), 'nullable': True, 'default': None, 'autoincrement': 'auto', 'primary_key': 0},
  {'name': 'primary_author', 'type': VARCHAR(), 'nullable': True, 'default': None, 'autoincrement': 'auto', 'primary_key': 0}
]
</code></pre>

                <h3>Inserting Data using Parameterized SQL</h3>
                <p>Execute raw SQL INSERT statements using the <code>text()</code> construct with named parameters to safely insert data. This prevents SQL injection vulnerabilities.</p>
                <pre><code class="language-python">&gt;&gt;&gt; from sqlalchemy.sql import text
&gt;&gt;&gt; with engine.connect() as con:
...     data = ( { &quot;id&quot;: 1, &quot;title&quot;: &quot;Crushing It&quot;, &quot;primary_author&quot;: &quot;Gary Vaynerchuck&quot; },{ &quot;id&quot;: 2, &quot;title&quot;: &quot;Start with Why&quot;, &quot;primary_author&quot;: &quot;Simon Sinek&quot; })
...     statement = text(&quot;&quot;&quot;INSERT INTO book(id, title, primary_author) VALUES(:id, :title, :primary_author)&quot;&quot;&quot;)
...     for line in data:
...         con.execute(statement, **line)
...
&lt;sqlalchemy.engine.cursor.LegacyCursorResult object at 0x10106cf50&gt;
&lt;sqlalchemy.engine.cursor.LegacyCursorResult object at 0x101ed0c50&gt;
</code></pre>

                <h3>Selecting Data with Raw SQL Queries</h3>
                <p>Retrieve data from your database using a raw SQL SELECT statement executed via the connection object.</p>
                <pre><code class="language-python">&gt;&gt;&gt; with engine.connect() as con:
...     rs = con.execute('SELECT * FROM book')
...     for row in rs:
...         print(row)
...
(1, 'Crushing It', 'Gary Vaynerchuck')
(2, 'Start with Why', 'Simon Sinek')
</code></pre>

                <h2>External Resources for SQLAlchemy</h2>
                <p>Explore these resources to deepen your understanding of SQLAlchemy and its capabilities:</p>
                <ul>
                    <li><a href="https://www.sqlalchemy.org/library.html" target="_blank" rel="noopener noreferrer">SQLAlchemy Official Documentation</a></li>
                    <li><a href="https://auth0.com/blog/sqlalchemy-orm-tutorial-for-python-developers/" target="_blank" rel="noopener noreferrer">SQLAlchemy ORM Tutorial for Python Developers</a></li>
                    <li><a href="https://docs.sqlalchemy.org/en/20/core/sqlelement.html#sqlalchemy.sql.text" target="_blank" rel="noopener noreferrer">SQLAlchemy Text Construct Documentation</a></li>
                    <li><a href="https://developer.mozilla.org/en-US/docs/Web/SQL" target="_blank" rel="noopener noreferrer">MDN Web Docs: SQL</a></li>
                </ul>
            </div>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <script>
        hljs.highlightAll();
    </script>
</body>
</html>