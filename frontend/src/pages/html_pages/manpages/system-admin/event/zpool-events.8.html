<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>zpool-events — list recent events generated by kernel</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/zfsutils-linux">zfsutils-linux_2.3.2-1ubuntu3_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       zpool-events — list recent events generated by kernel

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>zpool</b> <b>events</b> [<b>-vHf</b>] [<u>pool</u>]
       <b>zpool</b> <b>events</b> <b>-c</b>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       Lists all recent events generated by the ZFS kernel modules.  These events are consumed by the <u><a href="../man8/zed.8.html">zed</a></u>(8) and
       used  to  automate  administrative  tasks  such  as replacing a failed device with a hot spare.  For more
       information about the subclasses and event payloads that can be generated see “EVENTS” and the  following
       sections.

</pre><h4><b>OPTIONS</b></h4><pre>
       <b>-c</b>      Clear all previous events.
       <b>-f</b>      Follow mode.
       <b>-H</b>      Scripted  mode.  Do not display headers, and separate fields by a single tab instead of arbitrary
               space.
       <b>-v</b>      Print the entire payload for each event.

</pre><h4><b>EVENTS</b></h4><pre>
       These are the different event subclasses.  The full event name would be <b>ereport.fs.zfs.</b><u>SUBCLASS</u>, but only
       the last part is listed here.

       <b>checksum</b>           Issued when a checksum error has been detected.
       <b>io</b>                 Issued when there is an I/O error in a vdev in the pool.
       <b>data</b>               Issued when there have been data errors in the pool.
       <b>deadman</b>            Issued when an I/O request is determined to be "hung", this  can  be  caused  by  lost
                          completion  events  due  to  flaky  hardware  or drivers.  See <b>zfs_deadman_failmode</b> in
                          <u><a href="../man4/zfs.4.html">zfs</a></u>(4) for additional information regarding "hung" I/O detection and configuration.
       <b>delay</b>              Issued when a completed I/O request exceeds the maximum allowed time specified by  the
                          <b>zio_slow_io_ms</b>  module  parameter.   This  can  be  an  indicator of problems with the
                          underlying storage  device.   The  number  of  delay  events  is  ratelimited  by  the
                          <b>zfs_slow_io_events_per_second</b> module parameter.
       <b>dio_verify_rd</b>      Issued when there was a checksum verify error after a Direct I/O read has been issued.
       <b>dio_verify_wr</b>      Issued  when  there  was  a  checksum  verify  error after a Direct I/O write has been
                          issued.    This   event   can   only   take   place   if    the    module    parameter
                          <b>zfs_vdev_direct_write_verify</b>  is  not set to zero.  See <u><a href="../man4/zfs.4.html">zfs</a></u>(4) for more details on the
                          <b>zfs_vdev_direct_write_verify</b> module parameter.
       <b>config</b>             Issued every time a vdev change have been done to the pool.
       <b>zpool</b>              Issued when a pool cannot be imported.
       <b>zpool.destroy</b>      Issued when a pool is destroyed.
       <b>zpool.export</b>       Issued when a pool is exported.
       <b>zpool.import</b>       Issued when a pool is imported.
       <b>zpool.reguid</b>       Issued when a REGUID (new unique identifier for the pool have been  regenerated)  have
                          been detected.
       <b>vdev.unknown</b>       Issued when the vdev is unknown.  Such as trying to clear device errors on a vdev that
                          have failed/been kicked from the system/pool and is no longer available.
       <b>vdev.open_failed</b>   Issued when a vdev could not be opened (because it didn't exist for example).
       <b>vdev.corrupt_data</b>  Issued when corrupt data have been detected on a vdev.
       <b>vdev.no_replicas</b>   Issued  when  there  are no more replicas to sustain the pool.  This would lead to the
                          pool being <u>DEGRADED</u>.
       <b>vdev.bad_guid_sum</b>  Issued when a missing device in the pool have been detected.
       <b>vdev.too_small</b>     Issued when the system (kernel) have removed a device, and ZFS notices that the device
                          isn't there any more.  This is usually followed by a <b>probe_failure</b> event.
       <b>vdev.bad_label</b>     Issued when the label is OK but invalid.
       <b>vdev.bad_ashift</b>    Issued when the ashift alignment requirement has increased.
       <b>vdev.remove</b>        Issued when a vdev is detached from a mirror (or a spare detached from a vdev where it
                          have been used to replace a failed drive - only works if the original drive have  been
                          re-added).
       <b>vdev.clear</b>         Issued when clearing device errors in a pool.  Such as running <b>zpool</b> <b>clear</b> on a device
                          in the pool.
       <b>vdev.check</b>         Issued when a check to see if a given vdev could be opened is started.
       <b>vdev.spare</b>         Issued when a spare have kicked in to replace a failed device.
       <b>vdev.autoexpand</b>    Issued when a vdev can be automatically expanded.
       <b>io_failure</b>         Issued when there is an I/O failure in a vdev in the pool.
       <b>probe_failure</b>      Issued when a probe fails on a vdev.  This would occur if a vdev have been kicked from
                          the system outside of ZFS (such as the kernel have removed the device).
       <b>log_replay</b>         Issued when the intent log cannot be replayed.  The can occur in the case of a missing
                          or damaged log device.
       <b>resilver.start</b>     Issued when a resilver is started.
       <b>resilver.finish</b>    Issued when the running resilver have finished.
       <b>scrub.start</b>        Issued when a scrub is started on a pool.
       <b>scrub.finish</b>       Issued when a pool has finished scrubbing.
       <b>scrub.abort</b>        Issued when a scrub is aborted on a pool.
       <b>scrub.resume</b>       Issued when a scrub is resumed on a pool.
       <b>scrub.paused</b>       Issued when a scrub is paused on a pool.
       <b>bootfs.vdev.attach</b>

</pre><h4><b>PAYLOADS</b></h4><pre>
       This is the payload (data, information) that accompanies an event.

       For <u><a href="../man8/zed.8.html">zed</a></u>(8), these are set to uppercase and prefixed with <b>ZEVENT_</b>.

       <b>pool</b>               Pool name.
       <b>pool_failmode</b>      Failmode  -  <b>wait</b>, <b>continue</b>, or <b>panic</b>.  See the <b>failmode</b> property in <u><a href="../man7/zpoolprops.7.html">zpoolprops</a></u>(7) for
                          more information.
       <b>pool_guid</b>          The GUID of the pool.
       <b>pool_context</b>       The load  state  for  the  pool  (0=none,  1=open,  2=import,  3=tryimport,  4=recover
                          5=error).
       <b>vdev_guid</b>          The  GUID of the vdev in question (the vdev failing or operated upon with <b>zpool</b> <b>clear</b>,
                          etc.).
       <b>vdev_type</b>          Type of vdev  -  <b>disk</b>,  <b>file</b>,  <b>mirror</b>,  etc.   See  the  <b>Virtual</b>  <b>Devices</b>  section  of
                          <u><a href="../man7/zpoolconcepts.7.html">zpoolconcepts</a></u>(7) for more information on possible values.
       <b>vdev_path</b>          Full path of the vdev, including any <u>-partX</u>.
       <b>vdev_devid</b>         ID of vdev (if any).
       <b>vdev_fru</b>           Physical FRU location.
       <b>vdev_state</b>         State  of  vdev  (0=uninitialized,  1=closed,  2=offline, 3=removed, 4=failed to open,
                          5=faulted, 6=degraded, 7=healthy).
       <b>vdev_ashift</b>        The ashift value of the vdev.
       <b>vdev_complete_ts</b>   The time the last I/O request completed for the specified vdev.
       <b>vdev_delta_ts</b>      The time since the last I/O request completed for the specified vdev.
       <b>vdev_spare_paths</b>   List of spares, including full path and any <u>-partX</u>.
       <b>vdev_spare_guids</b>   GUID(s) of spares.
       <b>vdev_read_errors</b>   How many read errors that have been detected on the vdev.
       <b>vdev_write_errors</b>  How many write errors that have been detected on the vdev.
       <b>vdev_cksum_errors</b>  How many checksum errors that have been detected on the vdev.
       <b>parent_guid</b>        GUID of the vdev parent.
       <b>parent_type</b>        Type of parent.  See <b>vdev_type</b>.
       <b>parent_path</b>        Path of the vdev parent (if any).
       <b>parent_devid</b>       ID of the vdev parent (if any).
       <b>zio_objset</b>         The object set number for a given I/O request.
       <b>zio_object</b>         The object number for a given I/O request.
       <b>zio_level</b>          The indirect level for the block.  Level 0 is  the  lowest  level  and  includes  data
                          blocks.  Values &gt; 0 indicate metadata blocks at the appropriate level.
       <b>zio_blkid</b>          The block ID for a given I/O request.
       <b>zio_err</b>            The  error  number  for  a  failure when handling a given I/O request, compatible with
                          <u><a href="../man3/errno.3.html">errno</a></u>(3) with the value of <b>EBADE</b> used to indicate a ZFS checksum error.
       <b>zio_offset</b>         The offset in bytes of where to write the I/O request for the specified vdev.
       <b>zio_size</b>           The size in bytes of the I/O request.
       <b>zio_flags</b>          The current flags describing how the I/O request should be handled.  See the <b>I/O</b> <b>FLAGS</b>
                          section for the full list of I/O flags.
       <b>zio_stage</b>          The current stage of the I/O in the pipeline.  See the <b>I/O</b> <b>STAGES</b> section for  a  full
                          list of all the I/O stages.
       <b>zio_pipeline</b>       The  valid pipeline stages for the I/O.  See the <b>I/O</b> <b>STAGES</b> section for a full list of
                          all the I/O stages.
       <b>zio_delay</b>          The time elapsed (in nanoseconds) waiting for the block  layer  to  complete  the  I/O
                          request.   Unlike  <b>zio_delta</b>,  this  does  not  include  any  vdev queuing time and is
                          therefore solely a measure of the block layer performance.
       <b>zio_timestamp</b>      The time when a given I/O request was submitted.
       <b>zio_delta</b>          The time required to service a given I/O request.
       <b>prev_state</b>         The previous state of the vdev.
       <b>cksum_algorithm</b>    Checksum algorithm used.  See  <u><a href="../man7/zfsprops.7.html">zfsprops</a></u>(7)  for  more  information  on  the  available
                          checksum algorithms.
       <b>cksum_byteswap</b>     Whether or not the data is byteswapped.
       <b>bad_ranges</b>         [<u>start</u>,  <u>end</u>)  pairs  of  corruption  offsets.  Offsets are always aligned on a 64-bit
                          boundary, and can include some gaps of non-corruption.  (See <b>bad_ranges_min_gap</b>)
       <b>bad_ranges_min_gap</b>
                          In order to bound the size of the <b>bad_ranges</b> array, gaps of non-corruption  less  than
                          or  equal  to  <b>bad_ranges_min_gap</b>  bytes  have  been  merged with adjacent corruption.
                          Always at least 8 bytes, since corruption is detected on a 64-bit word basis.
       <b>bad_range_sets</b>     This array has one element per range in <b>bad_ranges</b>.  Each element contains  the  count
                          of bits in that range which were clear in the good data and set in the bad data.
       <b>bad_range_clears</b>   This  array  has one element per range in <b>bad_ranges</b>.  Each element contains the count
                          of bits for that range which were set in the good data and clear in the bad data.
       <b>bad_set_bits</b>       If this field exists, it is an array of (<u>bad</u> <u>data</u> &amp; ~(<u>good</u> <u>data</u>)); that is,  the  bits
                          set  in  the  bad data which are cleared in the good data.  Each element corresponds a
                          byte whose offset is in a range in <b>bad_ranges</b>, and the array  is  ordered  by  offset.
                          Thus,  the first element is the first byte in the first <b>bad_ranges</b> range, and the last
                          element is the last byte in the last <b>bad_ranges</b> range.
       <b>bad_cleared_bits</b>   Like <b>bad_set_bits</b>, but contains (<u>good</u> <u>data</u> &amp; ~(<u>bad</u> <u>data</u>)); that is, the  bits  set  in
                          the good data which are cleared in the bad data.

</pre><h4><b>I/O</b> <b>STAGES</b></h4><pre>
       The  ZFS  I/O pipeline is comprised of various stages which are defined below.  The individual stages are
       used to construct these basic I/O operations: Read, Write, Free, Claim, Flush and Trim.  These stages may
       be set on an event to describe the life cycle of a given I/O request.

       Stage                           Bit Mask     Operations
       ────────────────────────────────────────────────────────
       ZIO_STAGE_OPEN                  0x00000001   RWFCXT

       ZIO_STAGE_READ_BP_INIT          0x00000002   R-----
       ZIO_STAGE_WRITE_BP_INIT         0x00000004   -W----
       ZIO_STAGE_FREE_BP_INIT          0x00000008   --F---
       ZIO_STAGE_ISSUE_ASYNC           0x00000010   -WF--T

       ZIO_STAGE_WRITE_COMPRESS        0x00000020   -W----
       ZIO_STAGE_ENCRYPT               0x00000040   -W----

       ZIO_STAGE_CHECKSUM_GENERATE     0x00000080   -W----

       ZIO_STAGE_NOP_WRITE             0x00000100   -W----

       ZIO_STAGE_BRT_FREE              0x00000200   --F---
       ZIO_STAGE_DDT_READ_START        0x00000400   R-----
       ZIO_STAGE_DDT_READ_DONE         0x00000800   R-----
       ZIO_STAGE_DDT_WRITE             0x00001000   -W----

       ZIO_STAGE_DDT_FREE              0x00002000   --F---
       ZIO_STAGE_GANG_ASSEMBLE         0x00004000   RWFC--

       ZIO_STAGE_GANG_ISSUE            0x00008000   RWFC--
       ZIO_STAGE_DVA_THROTTLE          0x00010000   -W----
       ZIO_STAGE_DVA_ALLOCATE          0x00020000   -W----
       ZIO_STAGE_DVA_FREE              0x00040000   --F---

       ZIO_STAGE_DVA_CLAIM             0x00080000   ---C--
       ZIO_STAGE_READY                 0x00100000   RWFCIT

       ZIO_STAGE_VDEV_IO_START         0x00200000   RW--XT
       ZIO_STAGE_VDEV_IO_DONE          0x00400000   RW--XT
       ZIO_STAGE_VDEV_IO_ASSESS        0x00800000   RW--XT

       ZIO_STAGE_CHECKSUM_VERIFY       0x01000000   R-----

       ZIO_STAGE_DIO_CHECKSUM_VERIFY   0x02000000   -W----
       ZIO_STAGE_DONE                  0x04000000   RWFCXT

</pre><h4><b>I/O</b> <b>FLAGS</b></h4><pre>
       Every I/O request in the pipeline contains a set of flags which describe its function  and  are  used  to
       govern its behavior.  These flags will be set in an event as a <b>zio_flags</b> payload entry.

       Flag                      Bit Mask
       ─────────────────────────────────────
       ZIO_FLAG_DONT_AGGREGATE   0x00000001
       ZIO_FLAG_IO_REPAIR        0x00000002
       ZIO_FLAG_SELF_HEAL        0x00000004
       ZIO_FLAG_RESILVER         0x00000008
       ZIO_FLAG_SCRUB            0x00000010
       ZIO_FLAG_SCAN_THREAD      0x00000020
       ZIO_FLAG_PHYSICAL         0x00000040

       ZIO_FLAG_CANFAIL          0x00000080
       ZIO_FLAG_SPECULATIVE      0x00000100
       ZIO_FLAG_CONFIG_WRITER    0x00000200
       ZIO_FLAG_DONT_RETRY       0x00000400
       ZIO_FLAG_NODATA           0x00001000
       ZIO_FLAG_INDUCE_DAMAGE    0x00002000

       ZIO_FLAG_IO_ALLOCATING    0x00004000
       ZIO_FLAG_IO_RETRY         0x00008000
       ZIO_FLAG_PROBE            0x00010000
       ZIO_FLAG_TRYHARD          0x00020000
       ZIO_FLAG_OPTIONAL         0x00040000

       ZIO_FLAG_DONT_QUEUE       0x00080000
       ZIO_FLAG_DONT_PROPAGATE   0x00100000
       ZIO_FLAG_IO_BYPASS        0x00200000
       ZIO_FLAG_IO_REWRITE       0x00400000
       ZIO_FLAG_RAW_COMPRESS     0x00800000
       ZIO_FLAG_RAW_ENCRYPT      0x01000000

       ZIO_FLAG_GANG_CHILD       0x02000000
       ZIO_FLAG_DDT_CHILD        0x04000000
       ZIO_FLAG_GODFATHER        0x08000000
       ZIO_FLAG_NOPWRITE         0x10000000
       ZIO_FLAG_REEXECUTED       0x20000000
       ZIO_FLAG_DELEGATED        0x40000000
       ZIO_FLAG_FASTWRITE        0x80000000

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <u><a href="../man4/zfs.4.html">zfs</a></u>(4), <u><a href="../man8/zed.8.html">zed</a></u>(8), <u><a href="../man8/zpool-wait.8.html">zpool-wait</a></u>(8)

OpenZFS                                         February 28, 2024                                <u><a href="../man8/ZPOOL-EVENTS.8.html">ZPOOL-EVENTS</a></u>(8)
</pre>
 </div>
</div></section>
</div>
</body>
</html>