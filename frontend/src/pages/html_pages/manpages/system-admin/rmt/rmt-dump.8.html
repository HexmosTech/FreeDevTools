<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>rmt - remote magtape protocol module</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/dump">dump_0.4b49-2_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       rmt - remote magtape protocol module

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>rmt</b>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>Rmt</b>  is  a  program  used by the remote <b><a href="../man8/dump.8.html">dump</a></b>(8), <b><a href="../man8/restore.8.html">restore</a></b>(8) or <b><a href="../man1/tar.1.html">tar</a></b>(1) programs in manipulating a magnetic
       tape drive through an interprocess communication connection.  <b>Rmt</b> is normally started up with an <b><a href="../man3/rexec.3.html">rexec</a></b>(3)
       or <b><a href="../man3/rcmd.3.html">rcmd</a></b>(3) call.

       The <b>rmt</b> program accepts requests specific to the manipulation of magnetic tapes, performs  the  commands,
       then  responds  with  a  status  indication.   All responses are in <b>ASCII</b> and in one of the following two
       forms.

       Successful commands have responses of:
              <b>A</b><u>number</u>\n

       where <u>number</u> is an <b>ASCII</b> representation of a decimal number.

       Unsuccessful commands are responded to with:
              <b>E</b><u>error-number</u>\n<u>error-message</u>\n

       where <u>error-number</u> is one of the possible error numbers described in <b><a href="../man2/intro.2.html">intro</a></b>(2) and  <u>error-message</u>  is  the
       corresponding error string as printed from a call to <b><a href="../man3/perror.3.html">perror</a></b>(3).

       The protocol is comprised of the following commands, which are sent as indicated - no spaces are supplied
       between  the  command and its arguments, or between its arguments, and \n indicates that a newline should
       be supplied:

       <b>O</b><u>device</u>\n<u>mode</u>\n
              Open the specified <u>device</u> using the indicated <u>mode</u>.  <u>Device</u> is a full  pathname  and  <u>mode</u>  is  an
              <b>ASCII</b> representation of a decimal number suitable for passing to <b><a href="../man2/open.2.html">open</a></b>(2).  If a device had already
              been opened, it is closed before a new open is performed.

       <b>C</b><u>device</u>\n
              Close the currently open device.  The <u>device</u> specified is ignored.

       <b>L</b><u>whence</u>\n<u>offset</u>\n
              Perform  an <b><a href="../man2/lseek.2.html">lseek</a></b>(2) operation using the specified parameters. The response value is that returned
              from the <b>lseek</b> call.

       <b>W</b><u>count</u>\n
              Write data onto the open device.  <b>Rmt</b> reads  <u>count</u>  bytes  from  the  connection,  aborting  if  a
              premature end-of-file is encountered.  The response value is that returned from the <b><a href="../man2/write.2.html">write</a></b>(2) call.

       <b>R</b><u>count</u>\n
              Read  <u>count</u>  bytes  of data from the open device. If <u>count</u> exceeds the size of the data buffer (10
              kilobytes), it is truncated to the data buffer size.  <b>Rmt</b> then performs the requested <b><a href="../man2/read.2.html">read</a></b>(2)  and
              responds  with <b>A</b><u>count-read</u>\n if the read was successful; otherwise an error in the standard format
              is returned. If the read was successful, the data read is then sent.

       <b>I</b><u>operation</u>\n<u>count</u>\n
              Perform a <b>MTIOCOP</b> <b><a href="../man2/ioctl.2.html">ioctl</a></b>(2) command using the specified parameters.  The parameters are interpreted
              as the <b>ASCII</b> representations of the decimal values to place in the <b>mt_op</b> and  <b>mt_count</b>  fields  of
              the  structure used in the <b>ioctl</b> call.  The return value is the <u>count</u> parameter when the operation
              is successful.

              By issuing the <b>I-1\n0\n</b> command, a client will specify that he is using the VERSION 1 protocol.

              For a VERSION 0 client, the <u>operation</u> parameter is the platform <b>mt_op</b> value (could be different if
              the client and the <b>rmt</b> server are on two  different  platforms).  For  a  VERSION  1  client,  the
              <u>operation</u> parameter is standardized as below:

              <b>0</b>      Issue a <b>MTWEOF</b> command (write <u>count</u> end-of-file records).

              <b>1</b>      Issue a <b>MTFSF</b> command (forward space over <u>count</u> file marks).

              <b>2</b>      Issue a <b>MTBSF</b> command (backward space over <u>count</u> file marks).

              <b>3</b>      Issue a <b>MTFSR</b> command (forward space <u>count</u> inter-record gaps).

              <b>4</b>      Issue a <b>MTBSR</b> command (backward space <u>count</u> inter-record gaps).

              <b>5</b>      Issue a <b>MTREW</b> command (rewind).

              <b>6</b>      Issue a <b>MTOFFL</b> command (rewind and put the drive offline).

              <b>7</b>      Issue a <b>MTNOP</b> command (no operation, set status only).

       <b>i</b><u>operation</u>\n<u>count</u>\n
              Perform  an  extended  <b>MTIOCOP</b> <b><a href="../man2/ioctl.2.html">ioctl</a></b>(2) command using the specified parameters. The parameters are
              interpreted as the <b>ASCII</b> representations of the decimal values to place in the <b>mt_op</b> and  <b>mt_count</b>
              fields  of the structure used in the <b>ioctl</b> call.  The return value is the <u>count</u> parameter when the
              operation is successful. The possible operations are:

              <b>0</b>      Issue a <b>MTCACHE</b> command (switch cache on).

              <b>1</b>      Issue a <b>MTNOCACHE</b> command (switch cache off).

              <b>2</b>      Issue a <b>MTRETEN</b> command (retension the tape).

              <b>3</b>      Issue a <b>MTERASE</b> command (erase the entire tape).

              <b>4</b>      Issue a <b>MTEOM</b> command (position to end of media).

              <b>5</b>      Issue a <b>MTNBSF</b> command (backward space count files to BOF).

       <b>S</b>      Return the status of the open device, as obtained with a <b>MTIOCGET</b> <b>ioctl</b> call.   If  the  operation
              was  successful,  an  “ack”  is sent with the size of the status buffer, then the status buffer is
              sent (in binary, which is non-portable between different platforms).

       <b>s</b><u>sub-command</u>
              This is a replacement for the previous <b>S</b> command, portable across different platforms. If the open
              device is a magnetic tape, return members of the magnetic tape status structure, as obtained  with
              a  <b>MTIOCGET</b>  ioctl  call.  If the open device is not a magnetic tape, an error is returned. If the
              <b>MTIOCGET</b> operation was successful, the numerical value of the  structure  member  is  returned  in
              decimal. The following sub commands are supported:

              <b>T</b>      return  the content of the structure member <b>mt_type</b> which contains the type of the magnetic
                     tape device.

              <b>D</b>      return the content of the structure  member  <b>mt_dsreg</b>  which  contains  the  "drive  status
                     register".

              <b>E</b>      return  the  content  of the structure member <b>mt_erreg</b> which contains the "error register".
                     This structure member must be retrieved first because it is  cleared  after  each  <b>MTIOCGET</b>
                     ioctl call.

              <b>R</b>      return  the  content  of the structure member <b>mt_resid</b> which contains the residual count of
                     the last I/O.

              <b>F</b>      return the content of the structure member <b>mt_fileno</b> which contains the file number of  the
                     current tape position.

              <b>B</b>      return  the content of the structure member <b>mt_blkno</b> which contains the block number of the
                     current tape position.

              <b>f</b>      return the content of the structure member <b>mt_flags</b> which  contains  MTF_  flags  from  the
                     driver.

              <b>b</b>      return  the  content  of  the  structure  member  <b>mt_bf</b> which contains the optimum blocking
                     factor.

       Any other command causes <b>rmt</b> to exit.

</pre><h4><b>DIAGNOSTICS</b></h4><pre>
       All responses are of the form described above.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man3/rcmd.3.html">rcmd</a></b>(3), <b><a href="../man3/rexec.3.html">rexec</a></b>(3), <u>/usr/include/sys/mtio.h,</u> <b><a href="../man8/rdump.8.html">rdump</a></b>(8), <b><a href="../man8/rrestore.8.html">rrestore</a></b>(8)

</pre><h4><b>BUGS</b></h4><pre>
       People should be discouraged from using this for a remote file access protocol.

</pre><h4><b>AUTHOR</b></h4><pre>
       The  <b>dump/restore</b>  backup  suit  was  ported  to  Linux's  Second  Extended  File  System  by  Remy  Card
       &lt;<a href="mailto:card@Linux.EU.Org">card@Linux.EU.Org</a>&gt;.  He  maintained  the  initial  versions of <b>dump</b> (up and including 0.4b4, released in
       january 1997).

       Starting with 0.4b5, the new maintainer is Stelian Pop &lt;<a href="mailto:stelian@popies.net">stelian@popies.net</a>&gt;.

</pre><h4><b>AVAILABILITY</b></h4><pre>
       The <b>dump/restore</b> backup suit is available from &lt;https://dump.sourceforge.io&gt;

</pre><h4><b>HISTORY</b></h4><pre>
       The <b>rmt</b> command appeared in 4.2BSD.

BSD                                       version 0.4b49 of 30 Nov 2024                                   <u><a href="../man8/RMT.8.html">RMT</a></u>(8)
</pre>
 </div>
</div></section>
</div>
</body>
</html>