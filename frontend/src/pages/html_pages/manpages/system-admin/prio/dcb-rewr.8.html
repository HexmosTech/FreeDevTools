<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>dcb-rewr - show / manipulate the rewrite table of the DCB (Data Center Bridging) subsystem</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/iproute2">iproute2_6.14.0-1ubuntu3_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       dcb-rewr - show / manipulate the rewrite table of the DCB (Data Center Bridging) subsystem

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>dcb</b> [ <u>OPTIONS</u> ] <b>rewr</b> { <u>COMMAND</u> | <u>help</u> }

       <b>dcb</b> <b>rewr</b>  <b>{</b>  <b>show</b>  <b>|</b>  <b>flush</b>  <b>}</b>  <b>dev</b> DEV [ <b>prio-dscp</b> ] [ <b>prio-pcp</b> ]

       <b>dcb</b> <b>rewr</b>  <b>{</b>  <b>add</b>  <b>|</b>  <b>del</b>  <b>|</b>  <b>replace</b>  <b>}</b>  <b>dev</b> DEV [ <b>prio-dscp</b> <u>DSCP-MAP</u> ] [ <b>prio-pcp</b> <u>PCP-MAP</u> ]

       <u>DSCP-MAP</u> := [ <u>DSCP-MAP</u> ] <u>DSCP-MAPPING</u>

       <u>DSCP-MAPPING</u> := <u>PRIO</u><b>:</b><u>{</u> DSCP <u>|</u> <b>all</b> <u>}</u>

       <u>PCP-MAP</u> := [ <u>PCP-MAP</u> ] <u>PCP-MAPPING</u>

       <u>PCP-MAPPING</u> := <u>PRIO</u><b>:</b><u>PCP</u>

       <u>DSCP</u> := { <b>0</b> .. <b>63</b> }

       <u>PCP</u> := { <b>0(nd/de)</b> .. <b>7(nd/de)</b> }

       <u>PRIO</u> := { <b>0</b> .. <b>7</b> }

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>dcb</b> <b>rewr</b> is used to configure the rewrite table, in the DCB (Data Center Bridging) subsystem.  The
       rewrite table is used to rewrite certain values in the packet headers, based on packet priority.

       DCB rewrite entries are, like DCB APP entries, 3-tuples of selector, protocol ID, and priority. Selector
       is an enumeration that picks one of the prioritization namespaces. Currently, only the DSCP and PCP
       selector namespaces are supported by dcb rewr.

       The rewrite table is a list of DCB rewrite rules, that applies to packets with matching priority.
       Notably, it is valid to have conflicting rewrite assignment for the same selector and priority. For
       example, the set of two rewrite entries (DSCP, 10, 1) and (DSCP, 11, 1), where packets with priority 1
       should have its DSCP value rewritten to both 10 and 11, form a well-defined rewrite table.  <b>dcb</b> <b>rewr</b> tool
       allows low-level management of the rewrite table by adding and deleting individual rewrite 3-tuples
       through <b>add</b> and <b>del</b> commands. On the other hand, the command <b>replace</b> does what one would typically want
       in this situation--first adds the new configuration, and then removes the obsolete one, so that only one
       rewrite rule is in effect for a given selector and priority.

</pre><h4><b>COMMANDS</b></h4><pre>
       <b>show</b>   Display  all  entries  with  a  given selector. When no selector is given, shows all rewrite table
              entries categorized per selector.

       <b>flush</b>  Remove all entries with a given selector. When no selector is given,  removes  all  rewrite  table
              entries.

       <b>add</b>
       <b>del</b>    Add and, respectively, remove individual rewrite 3-tuples to and from the DCB rewrite table.

       <b>replace</b>
              Take the list of entries mentioned as parameter, and add those that are not present in the rewrite
              table  yet.  Then  remove  those  entries,  whose  selector  and  priority  have been mentioned as
              parameter, but not with the exact same protocol ID. This has the effect of, for the given selector
              and priority, causing that the table only contains the protocol ID (or ID's) given as parameter.

</pre><h4><b>PARAMETERS</b></h4><pre>
       The following table shows parameters in a way that they would be used with <b>add</b>, <b>del</b> and <b>replace</b> commands.
       For <b>show</b> and <b>flush</b>, the parameter name is to be used as a simple keyword without further arguments.

       <b>prio-dscp</b> <u>DSCP-MAP</u>
              <u>DSCP-MAP</u> uses the array parameter syntax, see <b><a href="../man8/dcb.8.html">dcb</a></b>(8) for details. Keys are priorities, values  are
              DSCP  points  for  traffic  with  matching priority. DSCP points can be written either directly as
              numeric values, or using symbolic names specified in <b><a href="file:/etc/iproute2/rt_dsfield">/etc/iproute2/rt_dsfield</a></b> (however  note  that
              the file specifies full 8-bit dsfield values, whereas <b>dcb</b> <b>rewr</b> will only use the higher six bits).
              <b>dcb</b>  <b>rewr</b>  <b>show</b>  will similarly format DSCP values as symbolic names if possible. The command line
              option <b>-N</b> turns the show translation off.

       <b>prio-pcp</b> <u>PCP-MAP</u>
              <u>PCP-MAP</u> uses the array parameter syntax, see <b><a href="../man8/dcb.8.html">dcb</a></b>(8) for details. Keys are priorities.  Values  are
              PCP/DEI  for  traffic  with  matching  priority.  PCP/DEI  values  are written as a combination of
              numeric- and symbolic values, to accommodate for both. PCP always in numeric form e.g 0 ..  7  and
              DEI in symbolic form e.g 'de' (drop-eligible), indicating that the DEI bit is 1 or 'nd' (not-drop-
              eligible),  indicating  that  the  DEI  bit is 0.  In combination 1:2de translates to a mapping of
              priority 1 to PCP=2 and DEI=1.

</pre><h4><b>EXAMPLE</b> <b>&amp;</b> <b>USAGE</b></h4><pre>
       Add a rule to rewrite DSCP to 0, 24 and 48 for traffic with priority 0, 3 and 6, respectively:

       # dcb rewr add dev eth0 prio-dscp 0:0 3:24 6:48

       Add a rule to rewrite DSCP to 25 for traffic with priority 3:

       # dcb rewr add dev eth0 prio-dscp 3:25
       # dcb rewr show dev eth0 prio-dscp
       prio-dscp 0:0 3:CS3 3:25 6:CS6
       # dcb -N rewr show dev eth0 prio-dscp
       prio-dscp 0:0 3:24 3:25 6:48

       Reconfigure the table so that only one rule exists for rewriting traffic with priority 3.

       # dcb rewr replace dev eth0 prio-dscp 3:26
       # dcb rewr -N show dev eth0 prio-dscp
       prio-dscp 0:0 3:26 6:48

       Flush all DSCP rules:

       # dcb rewr flush dev eth0 prio-dscp
       # dcb rewr show dev eth0 prio-dscp
       (nothing)

       Add a rule to rewrite PCP to 1 and DEI to 0 for traffic with priority 1 and a rule to rewrite  PCP  to  2
       and DEI to 1 for traffic with priority 2:

       # dcb rewr add dev eth0 prio-pcp 1:1nd 2:2de
       # dcb rewr show dev eth0 prio-pcp
       prio-pcp 1:1nd 2:2de

</pre><h4><b>EXIT</b> <b>STATUS</b></h4><pre>
       Exit status is 0 if command was successful or a positive integer upon failure.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man8/dcb.8.html">dcb</a></b>(8) <b><a href="../man8/dcb-app.8.html">dcb-app</a></b>(8) <b><a href="../man8/dcb-apptrust.8.html">dcb-apptrust</a></b>(8)

</pre><h4><b>REPORTING</b> <b>BUGS</b></h4><pre>
       Report any bugs to the Network Developers mailing list <b>&lt;<a href="mailto:netdev@vger.kernel.org">netdev@vger.kernel.org</a>&gt;</b> where the development and
       maintenance is primarily done.  You do not have to be subscribed to the list to send a message there.

</pre><h4><b>AUTHOR</b></h4><pre>
       Daniel Machon &lt;<a href="mailto:daniel.machon@microchip.com">daniel.machon@microchip.com</a>&gt;

iproute2                                           15 may 2023                                       <u><a href="../man8/DCB-REWR.8.html">DCB-REWR</a></u>(8)
</pre>
 </div>
</div></section>
</div>
</body>
</html>