<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>zpool-iostat — display logical I/O statistics for ZFS storage pools</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/zfsutils-linux">zfsutils-linux_2.3.2-1ubuntu3_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       zpool-iostat — display logical I/O statistics for ZFS storage pools

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>zpool</b>    <b>iostat</b>    [[[<b>-c</b> <u>SCRIPT</u>] [<b>-lq</b>]]|<b>-rw</b>]    [<b>-T</b>    <b>u</b>|<b>d</b>]   [<b>-ghHLnpPvy</b>]   [<u>pool</u>…|[<u>pool</u>   <u>vdev</u>…]|<u>vdev</u>…]
             [<u>interval</u> [<u>count</u>]]

</pre><h4><b>DESCRIPTION</b></h4><pre>
       Displays logical I/O statistics for the given pools/vdevs.  Physical I/O statistics may be  observed  via
       <u><a href="../man1/iostat.1.html">iostat</a></u>(1).   If writes are located nearby, they may be merged into a single larger operation.  Additional
       I/O may be generated depending on the level of vdev redundancy.  To filter output, you may pass in a list
       of pools, a pool and list of vdevs in that pool, or a list of any vdevs from any pool.  If no  items  are
       specified, statistics for every pool in the system are shown.  When given an <u>interval</u>, the statistics are
       printed  every  <u>interval</u>  seconds  until  killed.  If <b>-n</b> flag is specified the headers are displayed only
       once, otherwise they are displayed periodically.  If <u>count</u> is specified, the command  exits  after  <u>count</u>
       reports  are printed.  The first report printed is always the statistics since boot regardless of whether
       <u>interval</u> and <u>count</u> are passed.  However, this behavior can be suppressed with the  <b>-y</b>  flag.   Also  note
       that  the  units of <b>K</b>, <b>M</b>, <b>G</b>… that are printed in the report are in base 1024.  To get the raw values, use
       the <b>-p</b> flag.

       <b>-c</b> [<u>SCRIPT1</u>[,<u>SCRIPT2</u>]…]
               Run a script (or scripts) on each vdev and include the output as a new column in the <b>zpool</b> <b>iostat</b>
               output.  Users can run any script  found  in  their  <u><a href="file:~/.zpool.d">~/.zpool.d</a></u>  directory  or  from  the  system
               <u>/etc/zfs/zpool.d</u>  directory.   Script  names  containing the slash (<b>/</b>) character are not allowed.
               The default search path can be overridden by setting the <b>ZPOOL_SCRIPTS_PATH</b> environment variable.
               A privileged user can only run <b>-c</b> if they have  the  <b>ZPOOL_SCRIPTS_AS_ROOT</b>  environment  variable
               set.   If  a  script  requires  the  use  of  a  privileged  command, like <u><a href="../man8/smartctl.8.html">smartctl</a></u>(8), then it's
               recommended  you  allow  the  user  access  to  it  in  <u><a href="file:/etc/sudoers">/etc/sudoers</a></u>  or  add  the  user  to  the
               <u>/etc/sudoers.d/zfs</u> file.

               If  <b>-c</b>  is  passed  without a script name, it prints a list of all scripts.  <b>-c</b> also sets verbose
               mode (<b>-v</b>).

               Script output should be in the form of "name=value".  The column name is set to  "name"  and  the
               value  is set to "value".  Multiple lines can be used to output multiple columns.  The first line
               of output not in the "name=value" format is displayed without a column title, and no more  output
               after  that  is displayed.  This can be useful for printing error messages.  Blank or NULL values
               are printed as a '-' to make output AWKable.

               The following environment variables are set before running each script:
               <b>VDEV_PATH</b>            Full path to the vdev
               <b>VDEV_UPATH</b>           Underlying path to  the  vdev  (<u>/dev/sd*</u>).   For  use  with  device  mapper,
                                    multipath, or partitioned vdevs.
               <b>VDEV_ENC_SYSFS_PATH</b>  The sysfs path to the enclosure for the vdev (if any).

       <b>-T</b> <b>u</b>|<b>d</b>  Display  a  time stamp.  Specify <b>u</b> for a printed representation of the internal representation of
               time.  See <u><a href="../man1/time.1.html">time</a></u>(1).  Specify <b>d</b> for standard date format.  See <u><a href="../man1/date.1.html">date</a></u>(1).

       <b>-g</b>      Display vdev GUIDs instead of the normal device names.  These GUIDs  can  be  used  in  place  of
               device names for the zpool detach/offline/remove/replace commands.

       <b>-H</b>      Scripted  mode.  Do not display headers, and separate fields by a single tab instead of arbitrary
               space.

       <b>-L</b>      Display real paths for vdevs resolving all symbolic links.  This can  be  used  to  look  up  the
               current block device name regardless of the <u><a href="file:/dev/disk/">/dev/disk/</a></u> path used to open it.

       <b>-n</b>      Print headers only once when passed

       <b>-p</b>      Display numbers in parsable (exact) values.  Time values are in nanoseconds.

       <b>-P</b>      Display full paths for vdevs instead of only the last component of the path.  This can be used in
               conjunction with the <b>-L</b> flag.

       <b>-r</b>      Print  request  size  histograms for the leaf vdev's I/O.  This includes histograms of individual
               I/O (ind) and aggregate I/O (agg).  These  stats  can  be  useful  for  observing  how  well  I/O
               aggregation is working.  Note that TRIM I/O may exceed 16M, but will be counted as 16M.

       <b>-v</b>      Verbose  statistics Reports usage statistics for individual vdevs within the pool, in addition to
               the pool-wide statistics.

       <b>-y</b>      Normally the first line of output reports the statistics since boot: suppress it.

       <b>-w</b>      Display latency histograms:
               <b>total_wait</b>         Total I/O time (queuing + disk I/O time).
               <b>disk_wait</b>          Disk I/O time (time reading/writing the disk).
               <b>syncq_wait</b>         Amount of time I/O spent in synchronous priority  queues.   Does  not  include
                                  disk time.
               <b>asyncq_wait</b>        Amount  of  time  I/O spent in asynchronous priority queues.  Does not include
                                  disk time.
               <b>scrub</b>              Amount of time I/O spent in scrub queue.  Does not include disk time.
               <b>rebuild</b>            Amount of time I/O spent in rebuild queue.  Does not include disk time.

       <b>-l</b>      Include average latency statistics:
               <b>total_wait</b>         Average total I/O time (queuing + disk I/O time).
               <b>disk_wait</b>          Average disk I/O time (time reading/writing the disk).
               <b>syncq_wait</b>         Average amount of time I/O spent in synchronous  priority  queues.   Does  not
                                  include disk time.
               <b>asyncq_wait</b>        Average  amount  of  time I/O spent in asynchronous priority queues.  Does not
                                  include disk time.
               <b>scrub</b>              Average queuing time in scrub queue.  Does not include disk time.
               <b>trim</b>               Average queuing time in trim queue.  Does not include disk time.
               <b>rebuild</b>            Average queuing time in rebuild queue.  Does not include disk time.

       <b>-q</b>      Include active queue statistics.  Each priority queue has both pending (<b>pend</b>) and active  (<b>activ</b>)
               I/O  requests.   Pending  requests are waiting to be issued to the disk, and active requests have
               been issued to disk and are waiting for completion.  These  stats  are  broken  out  by  priority
               queue:
               <b>syncq_read/write</b>   Current number of entries in synchronous priority queues.
               <b>asyncq_read/write</b>  Current number of entries in asynchronous priority queues.
               <b>scrubq_read</b>        Current number of entries in scrub queue.
               <b>trimq_write</b>        Current number of entries in trim queue.
               <b>rebuildq_write</b>     Current number of entries in rebuild queue.

               All  queue  statistics are instantaneous measurements of the number of entries in the queues.  If
               you specify an interval, the measurements will be sampled from the end of the interval.

</pre><h4><b>EXAMPLES</b></h4><pre>
   <b>Example</b> <b>13</b>: Adding Cache Devices to a ZFS Pool
       The following command adds two disks for use as cache devices to a ZFS storage pool:
             <b>#</b> <b>zpool</b> <b>add</b> <u>pool</u> <b>cache</b> <u>sdc</u> <u>sdd</u>

       Once added, the cache devices gradually fill with content from main memory.  Depending  on  the  size  of
       your  cache  devices,  it  could take over an hour for them to fill.  Capacity and reads can be monitored
       using the <b>iostat</b> subcommand as follows:
             <b>#</b> <b>zpool</b> <b>iostat</b> <b>-v</b> <u>pool</u> <u>5</u>

   <b>Example</b> <b>16</b>: Adding output columns
       Additional columns can be added to the <b>zpool</b> <b>status</b> and <b>zpool</b> <b>iostat</b> output with <b>-c</b>.
             # <b>zpool</b> <b>status</b> <b>-c</b> <u>vendor</u>,<u>model</u>,<u>size</u>
                NAME     STATE  READ WRITE CKSUM vendor  model        size
                tank     ONLINE 0    0     0
                mirror-0 ONLINE 0    0     0
                U1       ONLINE 0    0     0     SEAGATE ST8000NM0075 7.3T
                U10      ONLINE 0    0     0     SEAGATE ST8000NM0075 7.3T
                U11      ONLINE 0    0     0     SEAGATE ST8000NM0075 7.3T
                U12      ONLINE 0    0     0     SEAGATE ST8000NM0075 7.3T
                U13      ONLINE 0    0     0     SEAGATE ST8000NM0075 7.3T
                U14      ONLINE 0    0     0     SEAGATE ST8000NM0075 7.3T

             # <b>zpool</b> <b>iostat</b> <b>-vc</b> <u>size</u>
                           capacity     operations     bandwidth
             pool        alloc   free   read  write   read  write  size
             ----------  -----  -----  -----  -----  -----  -----  ----
             rpool       14.6G  54.9G      4     55   250K  2.69M
               sda1      14.6G  54.9G      4     55   250K  2.69M   70G
             ----------  -----  -----  -----  -----  -----  -----  ----

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <u><a href="../man1/iostat.1.html">iostat</a></u>(1), <u><a href="../man8/smartctl.8.html">smartctl</a></u>(8), <u><a href="../man8/zpool-list.8.html">zpool-list</a></u>(8), <u><a href="../man8/zpool-status.8.html">zpool-status</a></u>(8)

OpenZFS                                          March 16, 2022                                  <u><a href="../man8/ZPOOL-IOSTAT.8.html">ZPOOL-IOSTAT</a></u>(8)
</pre>
 </div>
</div></section>
</div>
</body>
</html>