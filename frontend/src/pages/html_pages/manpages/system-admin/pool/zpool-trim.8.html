<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>zpool-trim — initiate TRIM of free space in ZFS storage pool</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/zfsutils-linux">zfsutils-linux_2.3.2-1ubuntu3_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       zpool-trim — initiate TRIM of free space in ZFS storage pool

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>zpool</b> <b>trim</b> [<b>-dw</b>] [<b>-r</b> <u>rate</u>] [<b>-c</b>|<b>-s</b>] <u>pool</u> [<u>device</u>]…

</pre><h4><b>DESCRIPTION</b></h4><pre>
       Initiates  an  immediate  on-demand  TRIM  operation for all of the free space in a pool.  This operation
       informs the underlying storage devices of all blocks in the pool which are no longer allocated and allows
       thinly provisioned devices to reclaim the space.

       A manual on-demand TRIM operation can be initiated irrespective of the <b>autotrim</b>  pool  property  setting.
       See the documentation for the <b>autotrim</b> property above for the types of vdev devices which can be trimmed.

       <b>-d</b>, <b>--secure</b>
               Causes  a secure TRIM to be initiated.  When performing a secure TRIM, the device guarantees that
               data stored on the trimmed blocks has been erased.  This requires support from the device and  is
               not supported by all SSDs.

       <b>-r</b>, <b>--rate</b> <u>rate</u>
               Controls  the  rate at which the TRIM operation progresses.  Without this option TRIM is executed
               as quickly as possible.  The rate, expressed in bytes per second, is applied on a per-vdev  basis
               and may be set differently for each leaf vdev.

       <b>-c</b>, <b>--cancel</b>
               Cancel  trimming on the specified devices, or all eligible devices if none are specified.  If one
               or more target devices are invalid or are not currently being trimmed, the command will fail  and
               no cancellation will occur on any device.

       <b>-s</b>, <b>--suspend</b>
               Suspend trimming on the specified devices, or all eligible devices if none are specified.  If one
               or  more target devices are invalid or are not currently being trimmed, the command will fail and
               no suspension will occur on any device.  Trimming can then be resumed by running <b>zpool</b> <b>trim</b>  with
               no flags on the relevant target devices.

       <b>-w</b>, <b>--wait</b>
               Wait until the devices are done being trimmed before returning.

</pre><h4><b>PERIODIC</b> <b>TRIM</b></h4><pre>
       On  machines  using  systemd,  trim  timers can be enabled on a per-pool basis.  <b>weekly</b> and <b>monthly</b> timer
       units are provided.

               <b>systemctl</b> <b>enable</b> <b>zfs-trim-</b><u>weekly</u><b>@</b><u>rpool</u><b>.timer</b> <b>--now</b>

               <b>systemctl</b> <b>enable</b> <b>zfs-trim-</b><u>monthly</u><b>@</b><u>otherpool</u><b>.timer</b> <b>--now</b>

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <u>systemd.timer</u>(<b>5</b>)<b>,</b> <u>zpoolprops</u>(<b>7</b>)<b>,</b> <u>zpool-initialize</u>(<b>8</b>)<b>,</b> <u>zpool-wait</u>(<b>8</b>)

OpenZFS                                           May 27, 2021                                     <u><a href="../man8/ZPOOL-TRIM.8.html">ZPOOL-TRIM</a></u>(8)
</pre>
 </div>
</div></section>
</div>
</body>
</html>