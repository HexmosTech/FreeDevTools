<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>systemd-gpt-auto-generator - Generator for automatically discovering and mounting root, /home/, /srv/,</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/systemd">systemd_257.7-1ubuntu3_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       systemd-gpt-auto-generator - Generator for automatically discovering and mounting root, <a href="file:/home/">/home/</a>, <a href="file:/srv/">/srv/</a>,
       <a href="file:/var/">/var/</a> and <a href="file:/var/tmp/">/var/tmp/</a> partitions, as well as discovering and enabling swap partitions, based on GPT
       partition type GUIDs

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <a href="file:/usr/lib/systemd/system-generators/systemd-gpt-auto-generator">/usr/lib/systemd/system-generators/systemd-gpt-auto-generator</a>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       systemd-gpt-auto-generator is a unit generator that automatically discovers the root partition, <a href="file:/home/">/home/</a>,
       <a href="file:/srv/">/srv/</a>, <a href="file:/var/">/var/</a>, <a href="file:/var/tmp/">/var/tmp/</a>, the EFI System Partition (ESP), the Extended Boot Loader Partition (XBOOTLDR),
       and swap partitions and creates mount and swap units for them, based on the partition type GUIDs of GUID
       partition tables (GPT). See <b>UEFI</b> <b>Specification</b>[1], chapter 5 for more details. It implements the
       <b>Discoverable</b> <b>Partitions</b> <b>Specification</b>[2].

       Note that this generator has no effect on non-GPT systems. It will also not create mount point
       configuration for directories which already contain files or if the mount point is explicitly configured
       in <b><a href="../man5/fstab.5.html">fstab</a></b>(5). Additionally no unit will be created for the ESP or the XBOOTLDR partition if mount entries
       are found in the <a href="file:/boot/">/boot/</a> or /efi/ hierarchies in <b><a href="../man5/fstab.5.html">fstab</a></b>(5).

       If the units this generator creates are overridden, for example by units in directories with higher
       precedence, drop-ins and additional dependencies created by this generator might still be used.

       This generator will only look for the root partition on the same physical disk where the EFI System
       Partition (ESP) is located. Note that support from the boot loader is required: the EFI variable
       <u>LoaderDevicePartUUID</u> of the <b>4a67b082-0a4c-41cf-b6c7-440b29bb8c4f</b> vendor UUID is used to determine from
       which partition, and hence the disk, from which the system was booted. If the boot loader does not set
       this variable, this generator will not be able to detect the root partition. See the <b>Boot</b> <b>Loader</b>
       <b>Interface</b>[3] for details.

       Similarly, this generator will only look for the other partitions on the same physical disk as the root
       partition. In this case, boot loader support is not required. These partitions will not be searched for
       on systems where the root file system is distributed on multiple disks, for example via btrfs RAID.

       systemd-gpt-auto-generator is useful for centralizing file system configuration in the partition table
       and making configuration in <a href="file:/etc/fstab">/etc/fstab</a> or on the kernel command line unnecessary.

       This generator looks for the partitions based on their partition type GUID. The following partition type
       GUIDs are identified:

       <b>Table</b> <b>1.</b> <b>Partition</b> <b>Type</b> <b>GUIDs</b>
       ┌─────────────────────────┬──────────────────────────────────────┬─────────────────────┬─────────────────┬─────────────────────┐
       │ <b>Partition</b> <b>Type</b>          │ <b>GUID</b>                                 │ <b>Name</b>                │ <b>Mount</b> <b>Point</b>     │ <b>Explanation</b>         │
       ├─────────────────────────┼──────────────────────────────────────┼─────────────────────┼─────────────────┼─────────────────────┤
       │ <b>SD_GPT_ROOT_X86_64</b>      │ <b>4f68bce3-e8cd-4db1-96e7-fbcaf984b709</b> │ Root Partition      │ /               │ The first partition │
       │                         │                                      │ (x86-64)            │                 │ with this type      │
       │                         │                                      │                     │                 │ UUID, located on    │
       │                         │                                      │                     │                 │ the same disk as    │
       │                         │                                      │                     │                 │ the ESP used for    │
       │                         │                                      │                     │                 │ booting, is used as │
       │                         │                                      │                     │                 │ the root file       │
       │                         │                                      │                     │                 │ system / on AMD64 / │
       │                         │                                      │                     │                 │ 64-bit x86 systems. │
       ├─────────────────────────┼──────────────────────────────────────┼─────────────────────┼─────────────────┼─────────────────────┤
       │ <b>SD_GPT_ROOT_ARM64</b>       │ <b>b921b045-1df0-41c3-af44-4c6f280d3fae</b> │ Root Partition      │ /               │ The first partition │
       │                         │                                      │ (64-bit ARM)        │                 │ with this type      │
       │                         │                                      │                     │                 │ UUID, located on    │
       │                         │                                      │                     │                 │ the same disk as    │
       │                         │                                      │                     │                 │ the ESP used for    │
       │                         │                                      │                     │                 │ booting, is used as │
       │                         │                                      │                     │                 │ the root file       │
       │                         │                                      │                     │                 │ system / on AArch64 │
       │                         │                                      │                     │                 │ / 64-bit ARM        │
       │                         │                                      │                     │                 │ systems.            │
       ├─────────────────────────┼──────────────────────────────────────┼─────────────────────┼─────────────────┼─────────────────────┤
       │ <b>SD_GPT_ROOT_ALPHA</b>       │ ...                                  │ Root partitions for │ /               │ The first partition │
       │ <b>SD_GPT_ROOT_ARC</b>         │                                      │ other architectures │                 │ with the type UUID  │
       │ <b>SD_GPT_ROOT_ARM</b>         │                                      │                     │                 │ matching the        │
       │ <b>SD_GPT_ROOT_ARM64</b>       │                                      │                     │                 │ architecture,       │
       │ <b>SD_GPT_ROOT_IA64</b>        │                                      │                     │                 │ located on the same │
       │ <b>SD_GPT_ROOT_LOONGARCH64</b> │                                      │                     │                 │ disk as the ESP     │
       │ <b>SD_GPT_ROOT_MIPS</b>        │                                      │                     │                 │ used for booting,   │
       │ <b>SD_GPT_ROOT_MIPS64</b>      │                                      │                     │                 │ is used as the root │
       │ <b>SD_GPT_ROOT_MIPS_LE</b>     │                                      │                     │                 │ file system <a href="file:/.">/.</a> For  │
       │ <b>SD_GPT_ROOT_MIPS64_LE</b>   │                                      │                     │                 │ the full list and   │
       │ <b>SD_GPT_ROOT_PARISC</b>      │                                      │                     │                 │ constant values,    │
       │ <b>SD_GPT_ROOT_PPC</b>         │                                      │                     │                 │ see <b>Discoverable</b>    │
       │ <b>SD_GPT_ROOT_PPC64</b>       │                                      │                     │                 │ <b>Partitions</b>          │
       │ <b>SD_GPT_ROOT_PPC64_LE</b>    │                                      │                     │                 │ <b>Specification</b>[2].   │
       │ <b>SD_GPT_ROOT_RISCV32</b>     │                                      │                     │                 │                     │
       │ <b>SD_GPT_ROOT_RISCV64</b>     │                                      │                     │                 │                     │
       │ <b>SD_GPT_ROOT_S390</b>        │                                      │                     │                 │                     │
       │ <b>SD_GPT_ROOT_S390X</b>       │                                      │                     │                 │                     │
       │ <b>SD_GPT_ROOT_TILEGX</b>      │                                      │                     │                 │                     │
       │ <b>SD_GPT_ROOT_X86</b>         │                                      │                     │                 │                     │
       │ <b>SD_GPT_ROOT_X86_64</b>      │                                      │                     │                 │                     │
       │ <b>SD_GPT_USR_ALPHA</b>        │                                      │                     │                 │                     │
       │ <b>SD_GPT_USR_ARC</b>          │                                      │                     │                 │                     │
       │ <b>SD_GPT_USR_ARM</b>          │                                      │                     │                 │                     │
       │ <b>SD_GPT_USR_IA64</b>         │                                      │                     │                 │                     │
       │ <b>SD_GPT_USR_LOONGARCH64</b>  │                                      │                     │                 │                     │
       │ <b>SD_GPT_USR_MIPS_LE</b>      │                                      │                     │                 │                     │
       │ <b>SD_GPT_USR_MIPS64_LE</b>    │                                      │                     │                 │                     │
       │ <b>SD_GPT_USR_PARISC</b>       │                                      │                     │                 │                     │
       │ <b>SD_GPT_USR_PPC</b>          │                                      │                     │                 │                     │
       │ <b>SD_GPT_USR_PPC64</b>        │                                      │                     │                 │                     │
       │ <b>SD_GPT_USR_PPC64_LE</b>     │                                      │                     │                 │                     │
       │ <b>SD_GPT_USR_RISCV32</b>      │                                      │                     │                 │                     │
       │ <b>SD_GPT_USR_RISCV64</b>      │                                      │                     │                 │                     │
       │ <b>SD_GPT_USR_S390</b>         │                                      │                     │                 │                     │
       │ <b>SD_GPT_USR_S390X</b>        │                                      │                     │                 │                     │
       │ <b>SD_GPT_USR_TILEGX</b>       │                                      │                     │                 │                     │
       │ <b>SD_GPT_USR_X86</b>          │                                      │                     │                 │                     │
       ├─────────────────────────┼──────────────────────────────────────┼─────────────────────┼─────────────────┼─────────────────────┤
       │ <b>SD_GPT_HOME</b>             │ <b>933ac7e1-2eb4-4f13-b844-0e14e2aef915</b> │ Home Partition      │ <a href="file:/home/">/home/</a>          │ The first partition │
       │                         │                                      │                     │                 │ with this type UUID │
       │                         │                                      │                     │                 │ on the same disk as │
       │                         │                                      │                     │                 │ the root partition  │
       │                         │                                      │                     │                 │ is mounted to       │
       │                         │                                      │                     │                 │ <a href="file:/home/.">/home/.</a>             │
       ├─────────────────────────┼──────────────────────────────────────┼─────────────────────┼─────────────────┼─────────────────────┤
       │ <b>SD_GPT_SRV</b>              │ <b>3b8f8425-20e0-4f3b-907f-1a25a76f98e8</b> │ Server Data         │ <a href="file:/srv/">/srv/</a>           │ The first partition │
       │                         │                                      │ Partition           │                 │ with this type UUID │
       │                         │                                      │                     │                 │ on the same disk as │
       │                         │                                      │                     │                 │ the root partition  │
       │                         │                                      │                     │                 │ is mounted to       │
       │                         │                                      │                     │                 │ <a href="file:/srv/.">/srv/.</a>              │
       ├─────────────────────────┼──────────────────────────────────────┼─────────────────────┼─────────────────┼─────────────────────┤
       │ <b>SD_GPT_VAR</b>              │ <b>4d21b016-b534-45c2-a9fb-5c16e091fd2d</b> │ Variable Data       │ <a href="file:/var/">/var/</a>           │ The first partition │
       │                         │                                      │ Partition           │                 │ with this type UUID │
       │                         │                                      │                     │                 │ on the same disk as │
       │                         │                                      │                     │                 │ the root partition  │
       │                         │                                      │                     │                 │ is mounted to <a href="file:/var/">/var/</a> │
       │                         │                                      │                     │                 │ — under the         │
       │                         │                                      │                     │                 │ condition its       │
       │                         │                                      │                     │                 │ partition UUID      │
       │                         │                                      │                     │                 │ matches the first   │
       │                         │                                      │                     │                 │ 128 bit of the      │
       │                         │                                      │                     │                 │ HMAC-SHA256 of the  │
       │                         │                                      │                     │                 │ GPT type uuid of    │
       │                         │                                      │                     │                 │ this partition      │
       │                         │                                      │                     │                 │ keyed by the        │
       │                         │                                      │                     │                 │ machine ID of the   │
       │                         │                                      │                     │                 │ installation stored │
       │                         │                                      │                     │                 │ in <b><a href="../man5/machine-id.5.html">machine-id</a></b>(5).   │
       │                         │                                      │                     │                 │ This can be         │
       │                         │                                      │                     │                 │ generated using     │
       │                         │                                      │                     │                 │ <b><a href="../man1/systemd-id128.1.html">systemd-id128</a></b>(1).   │
       ├─────────────────────────┼──────────────────────────────────────┼─────────────────────┼─────────────────┼─────────────────────┤
       │ <b>SD_GPT_TMP</b>              │ <b>7ec6f557-3bc5-4aca-b293-16ef5df639d1</b> │ Temporary Data      │ <a href="file:/var/tmp/">/var/tmp/</a>       │ The first partition │
       │                         │                                      │ Partition           │                 │ with this type UUID │
       │                         │                                      │                     │                 │ on the same disk as │
       │                         │                                      │                     │                 │ the root partition  │
       │                         │                                      │                     │                 │ is mounted to       │
       │                         │                                      │                     │                 │ <a href="file:/var/tmp/.">/var/tmp/.</a>          │
       ├─────────────────────────┼──────────────────────────────────────┼─────────────────────┼─────────────────┼─────────────────────┤
       │ <b>SD_GPT_SWAP</b>             │ <b>0657fd6d-a4ab-43c4-84e5-0933c84b4f4f</b> │ Swap                │ n/a             │ All partitions with │
       │                         │                                      │                     │                 │ this type UUID on   │
       │                         │                                      │                     │                 │ the same disk as    │
       │                         │                                      │                     │                 │ the root partition  │
       │                         │                                      │                     │                 │ are used as swap.   │
       ├─────────────────────────┼──────────────────────────────────────┼─────────────────────┼─────────────────┼─────────────────────┤
       │ <b>SD_GPT_ESP</b>              │ <b>c12a7328-f81f-11d2-ba4b-00a0c93ec93b</b> │ EFI System          │ /efi/ or <a href="file:/boot/">/boot/</a> │ The first partition │
       │                         │                                      │ Partition (ESP)     │                 │ with this type UUID │
       │                         │                                      │                     │                 │ located on the same │
       │                         │                                      │                     │                 │ disk as the root    │
       │                         │                                      │                     │                 │ partition is        │
       │                         │                                      │                     │                 │ mounted to <a href="file:/boot/">/boot/</a>   │
       │                         │                                      │                     │                 │ or /efi/, see       │
       │                         │                                      │                     │                 │ below.              │
       ├─────────────────────────┼──────────────────────────────────────┼─────────────────────┼─────────────────┼─────────────────────┤
       │ <b>SD_GPT_XBOOTLDR</b>         │ <b>bc13c2ff-59e6-4262-a352-b275fd6f7172</b> │ Extended Boot       │ <a href="file:/boot/">/boot/</a>          │ The first partition │
       │                         │                                      │ Loader Partition    │                 │ with this type UUID │
       │                         │                                      │                     │                 │ located on the same │
       │                         │                                      │                     │                 │ disk as the root    │
       │                         │                                      │                     │                 │ partition is        │
       │                         │                                      │                     │                 │ mounted to <a href="file:/boot/">/boot/</a>,  │
       │                         │                                      │                     │                 │ see below.          │
       └─────────────────────────┴──────────────────────────────────────┴─────────────────────┴─────────────────┴─────────────────────┘

       This generator understands the following attribute flags for partitions:

       <b>Table</b> <b>2.</b> <b>Partition</b> <b>Attribute</b> <b>Flags</b>
       ┌──────────────────────────────────┬────────────────────┬──────────────────────┬───────────────────────┐
       │ <b>Flag</b>                             │ <b>Value</b>              │ <b>Applicable</b> <b>to</b>        │ <b>Explanation</b>           │
       ├──────────────────────────────────┼────────────────────┼──────────────────────┼───────────────────────┤
       │ <b>SD_GPT_FLAG_READ_ONLY</b>            │ <b>0x1000000000000000</b> │ /, <a href="file:/home/">/home/</a>, <a href="file:/srv/">/srv/</a>,    │ Partition is mounted  │
       │                                  │                    │ <a href="file:/var/">/var/</a>, <a href="file:/var/tmp/">/var/tmp/</a>,    │ read-only             │
       │                                  │                    │ Extended Boot Loader │                       │
       │                                  │                    │ Partition            │                       │
       ├──────────────────────────────────┼────────────────────┼──────────────────────┼───────────────────────┤
       │ <b>SD_GPT_FLAG_NO_AUTO</b>              │ <b>0x8000000000000000</b> │ /, <a href="file:/home/">/home/</a>, <a href="file:/srv/">/srv/</a>,    │ Partition is not      │
       │                                  │                    │ <a href="file:/var/">/var/</a>, <a href="file:/var/tmp/">/var/tmp/</a>,    │ mounted automatically │
       │                                  │                    │ Extended Boot Loader │                       │
       │                                  │                    │ Partition            │                       │
       ├──────────────────────────────────┼────────────────────┼──────────────────────┼───────────────────────┤
       │ <b>SD_GPT_FLAG_NO_BLOCK_IO_PROTOCOL</b> │ <b>0x0000000000000002</b> │ EFI System Partition │ Partition is not      │
       │                                  │                    │ (ESP)                │ mounted automatically │
       └──────────────────────────────────┴────────────────────┴──────────────────────┴───────────────────────┘

       The <a href="file:/home/">/home/</a>, <a href="file:/srv/">/srv/</a>, <a href="file:/var/">/var/</a>, <a href="file:/var/tmp/">/var/tmp/</a> and swap partitions may be encrypted in LUKS format. In this case, a
       device mapper device is set up under the names /dev/mapper/home, /dev/mapper/srv, /dev/mapper/var,
       /dev/mapper/tmp or /dev/mapper/swap. Note that this might create conflicts if the same partition is
       listed in <a href="file:/etc/crypttab">/etc/crypttab</a> with a different device mapper device name.

       When systemd is running in the initrd the / partition may be encrypted with LUKS as well. In this case, a
       device mapper device is set up under the name /dev/mapper/root, and a sysroot.mount is set up that mounts
       the device under /sysroot. For more information, see <b><a href="../man7/bootup.7.html">bootup</a></b>(7).

       The root partition can be specified by symlinking /run/systemd/volatile-root to <a href="file:/dev/block/">/dev/block/</a>$major:$minor.
       This is especially useful if the root mount has been replaced by some form of volatile file system
       (overlayfs).

       Mount and automount units for the EFI System Partition (ESP) and Extended Boot Loader Partition
       (XBOOTLDR) are generated on EFI systems. If the disk contains an XBOOTLDR partition, as defined in the
       <b>Boot</b> <b>Loader</b> <b>Specification</b>[4], it is made available at <a href="file:/boot/.">/boot/.</a> This generator creates an automount unit;
       the mount will only be activated on-demand when accessed. The mount point will be created if necessary.

       The ESP is mounted to <a href="file:/boot/">/boot/</a> if that directory exists and is not used for XBOOTLDR, and otherwise to
       /efi/. Same as for <a href="file:/boot/">/boot/</a>, an automount unit is used. The mount point will be created if necessary.

       No configuration is created for mount points that are configured in <b><a href="../man5/fstab.5.html">fstab</a></b>(5) or when the target directory
       contains files.

       When using this generator in conjunction with btrfs file systems, make sure to set the correct default
       subvolumes on them, using <b>btrfs</b> <b>subvolume</b> <b>set-default</b>.

       If the system was booted via <b><a href="../man7/systemd-stub.7.html">systemd-stub</a></b>(7) and the stub reported to userspace that the kernel image was
       measured to a TPM2 PCR, then any discovered root and <a href="file:/var/">/var/</a> volume identifiers (and volume encryption key
       in case it is encrypted) will be automatically measured into PCR 15 on activation, via <b>systemd-</b>
       <b>pcrfs@.<a href="../man8/service.8.html">service</a></b>(8).

       systemd-gpt-auto-generator implements <b><a href="../man7/systemd.generator.7.html">systemd.generator</a></b>(7).

</pre><h4><b>KERNEL</b> <b>COMMAND</b> <b>LINE</b></h4><pre>
       systemd-gpt-auto-generator understands the following kernel command line parameters:

       <u>systemd.gpt_auto</u>, <u>rd.systemd.gpt_auto</u>
           Those options take an optional boolean argument, and default to yes. The generator is enabled by
           default, and a false value may be used to disable it (e.g.  "systemd.gpt_auto=0").

           Added in version 242.

       <u>systemd.image_policy=</u>
           Takes an image dissection policy string as argument (as per <b><a href="../man7/systemd.image-policy.7.html">systemd.image-policy</a></b>(7)), and allows
           enforcing a policy on dissection and use of the automatically discovered GPT partition table entries.

           Added in version 254.

       <u>root=</u>, <u>rootfstype=</u>, <u>rootflags=</u>
           When <u>root=</u> is used with the special value "gpt-auto" (or if the parameter is not used at all),
           automatic discovery of the root partition based on the GPT partition type is enabled. Any other value
           disables this logic.

           The <u>rootfstype=</u> and <u>rootflags=</u> are used to select the file system type and options when the root file
           system is automatically discovered.

           Added in version 242.

       <u>rw</u>, <u>ro</u>
           Mount the root partition read-write or read-only <u>initially</u>.

           Note that unlike most kernel command line options these settings do not override configuration in the
           file system, and the file system may be remounted later. See <b><a href="../man8/systemd-remount-fs.service.8.html">systemd-remount-fs.service</a></b>(8).

           Added in version 242.

       <u>systemd.swap=</u>
           Takes a boolean argument or enables the option if specified without an argument. If disabled,
           automatic discovery of swap partition(s) based on GPT partition type is disabled. Defaults to
           enabled.

           Added in version 254.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man1/systemd.1.html">systemd</a></b>(1), <b><a href="../man5/systemd.mount.5.html">systemd.mount</a></b>(5), <b><a href="../man5/systemd.swap.5.html">systemd.swap</a></b>(5), <b><a href="../man8/systemd-fstab-generator.8.html">systemd-fstab-generator</a></b>(8), <b>systemd-</b>
       <b>cryptsetup@.<a href="../man8/service.8.html">service</a></b>(8), <b>systemd-pcrfs@.<a href="../man8/service.8.html">service</a></b>(8), <b><a href="../man5/machine-id.5.html">machine-id</a></b>(5), <b><a href="../man8/cryptsetup.8.html">cryptsetup</a></b>(8), <b><a href="../man5/fstab.5.html">fstab</a></b>(5), <b><a href="../man8/btrfs.8.html">btrfs</a></b>(8)

</pre><h4><b>NOTES</b></h4><pre>
        1. UEFI Specification
           https://uefi.org/specifications

        2. Discoverable Partitions Specification
           https://uapi-group.org/specifications/specs/discoverable_partitions_specification

        3. Boot Loader Interface
           https://systemd.io/BOOT_LOADER_INTERFACE

        4. Boot Loader Specification
           https://uapi-group.org/specifications/specs/boot_loader_specification

systemd 257.7                                                                      <u><a href="../man8/SYSTEMD-GPT-AUTO-GENERATOR.8.html">SYSTEMD-GPT-AUTO-GENERATOR</a></u>(8)
</pre>
 </div>
</div></section>
</div>
</body>
</html>