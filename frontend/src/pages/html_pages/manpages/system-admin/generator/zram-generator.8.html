<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>zram-generator - Systemd unit generator for zram swap devices</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/systemd-zram-generator">systemd-zram-generator_1.2.1-2_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       <b>zram-generator</b> - Systemd unit generator for zram swap devices

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>/usr/lib/systemd/system-generators/zram-generator</b> <b>TARGET_DIR</b> [<u>2RGET_DIR</u> <u>3RGET_DIR</u>]
       <b>/usr/lib/systemd/system-generators/zram-generator</b> --setup-device <b>DEVICE</b>
       <b>/usr/lib/systemd/system-generators/zram-generator</b> --reset-device <b>DEVICE</b>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>zram-generator</b> is a generator that creates systemd units to format and use compressed RAM devices, either
       as swap or a file system.

       The generator will be invoked by systemd early at boot. The generator will then:

       1.  read configuration files from <u>{<a href="file:/etc">/etc</a>,<a href="file:/lib">/lib</a>}/systemd/zram-generator.conf[.d]</u> (see <a href="../man5/zram-generator.conf.5.html">zram-generator.conf</a>(5)
           for details);

       2.  generate   <a href="../man5/systemd.swap.5.html">systemd.swap</a>(5)  and/or  <a href="../man5/systemd.mount.5.html">systemd.mount</a>(5)  units  into  <b>TARGET_DIR</b>  and  connect  them  to
           <b>swap.target</b> or <b>local-fs.target</b> as appropriate;

       3.  ensure the <b>zram</b> module is loaded and create the requested devices.

       The  generator  does  nothing  if  run  inside  a  container  (as  determined  by  <u><a href="../man8/systemd-detect-virt.8.html">systemd-detect-virt</a>(8)</u>
       <u>--container</u>).

       The  generator  also  understands the kernel command-line option <b>systemd.zram</b>. See <a href="../man5/zram-generator.conf.5.html">zram-generator.conf</a>(5)
       for details.

       Setting the <b>ZRAM_GENERATOR_ROOT</b> environment variable makes the generator run in test mode, in which  case
       containerisation is ignored and step <b>3</b> is skipped.
       For the ramifications of <b>ZRAM_GENERATOR_ROOT</b> on config handling, see <a href="../man5/zram-generator.conf.5.html">zram-generator.conf</a>(5).

       Generated <u>dev-zramN.swap</u> units depend on <b><a href="mailto:systemd-zram-setup@zramN.service">systemd-zram-setup@zramN.service</a></b>, which will:

       1.  read configuration files from <u>{<a href="file:/etc">/etc</a>,<a href="file:/lib">/lib</a>}/systemd/zram-generator.conf[.d]</u> (see <a href="../man5/zram-generator.conf.5.html">zram-generator.conf</a>(5)
           for details);

       2.  set the desired compression algorithm, if any; if the current kernel doesn't understand the specified
           algorithm, a warning is issued, but execution continues;

       3.  set the desired blockdev size and format it as swap with <u><a href="../man8/systemd-makefs.8.html">systemd-makefs</a>(8)</u>.

       Generated  <u>path-to-mount-point.mount</u>  units  depend  on  <b><a href="mailto:systemd-zram-setup@zramN.service">systemd-zram-setup@zramN.service</a></b>.  The effect is
       similar to what happens for swap units, but of course they are formatted with a file system.

       When the unit is stopped, the zram device is reset, freeing memory and allowing the device to be reused.

       <b>zram-generator</b> implements <a href="../man7/systemd.generator.7.html">systemd.generator</a>(7).

   <b>Applying</b> <b>config</b> <b>changes</b>
       This generator is invoked in early boot, and the devices it configures will be created very early too, so
       the easiest way to apply config changes is to simply reboot the machine.

       Nevertheless, sometimes it may be useful to add new devices or apply config changes at runtime.  Applying
       new  configuration  means  restarting the units, and that in turn means recreating the zram devices. This
       means that <u>file</u> <u>systems</u> <u>are</u> <u>temporarily</u> <u>unmounted</u> <u>and</u> <u>their</u> <u>contents</u> <u>lost</u>, and <u>pages</u> <u>are</u> <u>moved</u> <u>out</u> <u>of</u> <u>the</u>
       <u>compressed</u>   <u>swap</u>   <u>device</u>   into   other   memory.   If   this   is   acceptable,   <b>systemctl</b>    <b>restart</b>
       <b>systemd-zram-setup@zramN</b>  or  <b>systemctl</b>  <b>restart</b>  <b>systemd-zram-setup@*</b> may be used to recreate a specific
       device or all configured devices. (If the device didn't exist, <b>restart</b> will create it.) If  the  way  the
       device is used (e.g. the mount point or file system type) is changed, <b>systemctl</b> <b>daemon-reload</b> needs to be
       called  first  to  recreate  systemd units. If a device or mount point is removed from configuration, the
       unit should be stopped before calling <b>daemon-reload</b>. Otherwise, systemd will not know  how  to  stop  the
       unit properly.

</pre><h4><b>REPORTING</b> <b>BUGS</b></h4><pre>
       <u>https://github.com/systemd/zram-generator/issues</u>

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <a href="../man5/zram-generator.conf.5.html">zram-generator.conf</a>(5), <a href="../man7/systemd.generator.7.html">systemd.generator</a>(7), <a href="../man5/systemd.swap.5.html">systemd.swap</a>(5)

       <u>https://github.com/systemd/zram-generator</u>

       Linux documentation of zram: <u>https://kernel.org/doc/html/latest/admin-guide/blockdev/zram.html</u>
       and the zram sysfs ABI: <u>https://kernel.org/doc/Documentation/ABI/testing/sysfs-block-zram</u>

zram-generator developers                           May 2025                                   <u><a href="../man8/ZRAM-GENERATOR.8.html">ZRAM-GENERATOR</a></u>(8)
</pre>
 </div>
</div></section>
</div>
</body>
</html>