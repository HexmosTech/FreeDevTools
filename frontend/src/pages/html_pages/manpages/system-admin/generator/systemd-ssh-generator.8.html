<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>systemd-ssh-generator - Generator for binding a socket-activated SSH server to local AF_VSOCK and AF_UNIX</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/systemd">systemd_257.7-1ubuntu3_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       systemd-ssh-generator - Generator for binding a socket-activated SSH server to local <b>AF_VSOCK</b> and <b>AF_UNIX</b>
       sockets

</pre><h4><b>SYNOPSIS</b></h4><pre>
       /usr/lib/systemd/system-generators/systemd-ssh-generator

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>systemd-ssh-generator</b> binds a socket-activated SSH server to local <b>AF_VSOCK</b> and <b>AF_UNIX</b> sockets under
       certain conditions. It only has an effect if the <b><a href="../man8/sshd.8.html">sshd</a></b>(8) binary is installed. Specifically, it does the
       following:

       •   If invoked in a VM with <b>AF_VSOCK</b> support, a socket-activated SSH per-connection service is bound to
           <b>AF_VSOCK</b> port 22.

       •   If invoked in a container environment with a writable directory /run/host/unix-export/ pre-mounted it
           binds SSH to an <b>AF_UNIX</b> socket /run/host/unix-export/ssh. The assumption is that this directory is
           bind mounted to the host side as well, and can be used to connect to the container from there. See
           <b>Container</b> <b>Interface</b>[1] for more information about this interface.

       •   A local <b>AF_UNIX</b> socket /run/ssh-unix-local/socket is also bound, unconditionally. This may be used
           for SSH communication from the host to itself, without involving networking, for example to traverse
           security boundaries safely and with secure authentication.

       •   Additional <b>AF_UNIX</b> and <b>AF_VSOCK</b> sockets are optionally bound, based on the <u>systemd.ssh_listen=</u> kernel
           command line option or the ssh.listen system credential (see below).

       See <b><a href="../man1/systemd-ssh-proxy.1.html">systemd-ssh-proxy</a></b>(1) for details on how to connect to these sockets via the <b>ssh</b> client.

       The <u>ssh.authorized_keys.root</u> credential can be used to allow specific public keys to log in over SSH. See
       <b><a href="../man7/systemd.system-credentials.7.html">systemd.system-credentials</a></b>(7) for more information.

       The generator will use a packaged sshd@.service service template file if one exists, and otherwise
       generate a suitable service template file.

       <b>systemd-ssh-generator</b> implements <b><a href="../man7/systemd.generator.7.html">systemd.generator</a></b>(7).

</pre><h4><b>KERNEL</b> <b>COMMAND</b> <b>LINE</b></h4><pre>
       <b>systemd-ssh-generator</b> understands the following <b><a href="../man7/kernel-command-line.7.html">kernel-command-line</a></b>(7) parameters:

       <u>systemd.ssh_auto=</u>
           This option takes an optional boolean argument, and defaults to yes. If enabled, the automatic
           binding to the <b>AF_VSOCK</b> and <b>AF_UNIX</b> sockets listed above is done. If disable, this is not done,
           except for those explicitly requested via <u>systemd.ssh_listen=</u> on the kernel command line or via the
           <u>ssh.listen</u> system credential.

           Added in version 256.

       <u>systemd.ssh_listen=</u>
           This option configures an additional socket to bind SSH to. It may be used multiple times to bind
           multiple sockets. The syntax should follow the one of <u>ListenStream=</u>, see <b><a href="../man5/systemd.socket.5.html">systemd.socket</a></b>(5) for
           details. This functionality supports all socket families <b><a href="../man1/systemd.1.html">systemd</a></b>(1) supports, including <b>AF_INET</b> and
           <b>AF_INET6</b>.

           Added in version 256.

</pre><h4><b>CREDENTIALS</b></h4><pre>
       <b>systemd-ssh-generator</b> supports the system credentials logic. The following credentials are used when
       passed in:

       <u>ssh.listen</u>
           This credential should be a text file, with each line referencing one additional socket to bind SSH
           to. The syntax should follow the one of <u>ListenStream=</u>, see <b><a href="../man5/systemd.socket.5.html">systemd.socket</a></b>(5) for details. This
           functionality supports all socket families systemd supports, including <b>AF_INET</b> and <b>AF_INET6</b>.

           Added in version 256.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man1/systemd.1.html">systemd</a></b>(1), <b><a href="../man7/kernel-command-line.7.html">kernel-command-line</a></b>(7), <b><a href="../man7/systemd.system-credentials.7.html">systemd.system-credentials</a></b>(7), <b><a href="../man7/vsock.7.html">vsock</a></b>(7), <b><a href="../man7/unix.7.html">unix</a></b>(7), <b><a href="../man1/ssh.1.html">ssh</a></b>(1), <b><a href="../man8/sshd.8.html">sshd</a></b>(8)

</pre><h4><b>NOTES</b></h4><pre>
        1. Container Interface
           https://systemd.io/CONTAINER_INTERFACE

systemd 257.7                                                                           <u><a href="../man8/SYSTEMD-SSH-GENERATOR.8.html">SYSTEMD-SSH-GENERATOR</a></u>(8)
</pre>
 </div>
</div></section>
</div>
</body>
</html>