<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>sample - packet sampling tc action</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/iproute2">iproute2_6.14.0-1ubuntu3_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       sample - packet sampling tc action

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>tc</b> ... <b>action</b> <b>sample</b> <b>rate</b> <u>RATE</u> <b>group</b> <u>GROUP</u> [ <b>trunc</b> <u>SIZE</u> ] [ <b>index</b> <u>INDEX</u> ]

       <b>tc</b> ... <b>action</b> <b>sample</b> <b>index</b> <u>INDEX</u>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The <b>sample</b> action allows sampling packets matching classifier.

       The  packets  are  chosen  randomly  according  to  the <b>rate</b> parameter, and are sampled using the <b>psample</b>
       generic netlink channel. The user can also specify packet truncation to save  user-kernel  traffic.  Each
       sample  includes  some  informative  metadata  about  the  original  packet,  which is sent using netlink
       attributes, alongside the original packet data.

       The user can either specify the sample action parameters as presented in the first form above, or use  an
       existing sample action using its index, as presented in the second form.

</pre><h4><b>SAMPLED</b> <b>PACKETS</b> <b>METADATA</b> <b>FIELDS</b></h4><pre>
       The  metadata  are  delivered  to userspace applications using the <b>psample</b> generic netlink channel, where
       each sample includes the following netlink attributes:

       <b>PSAMPLE_ATTR_IIFINDEX</b>
              The input interface index of the packet, if there is one.

       <b>PSAMPLE_ATTR_OIFINDEX</b>
              The output interface index of the packet. This field is not relevant on ingress sampling

       <b>PSAMPLE_ATTR_ORIGSIZE</b>
              The size of the original packet (before truncation)

       <b>PSAMPLE_ATTR_SAMPLE_GROUP</b>
              The <b>psample</b> group the packet was sent to

       <b>PSAMPLE_ATTR_GROUP_SEQ</b>
              A sequence number of the sampled packet. This number is incremented with each  sampled  packet  of
              the current <b>psample</b> group

       <b>PSAMPLE_ATTR_SAMPLE_RATE</b>
              The rate the packet was sampled with

</pre><h4><b>OPTIONS</b></h4><pre>
       <b>rate</b> <u>RATE</u>
              The  packet sample rate.  <u>RATE</u> is the expected ratio between observed packets and sampled packets.
              For example, <u>RATE</u> of 100 will lead to an average of one sampled packet out of every 100 observed.

       <b>trunc</b> <u>SIZE</u>
              Upon set, defines the maximum size of the sampled packets, and causes truncation if needed

       <b>group</b> <u>GROUP</u>
              The <b>psample</b> group the packet will be sent to. The <b>psample</b> module defines the  concept  of  groups,
              which  allows  the  user to match specific sampled packets in the case of multiple sampling rules,
              thus identify only the packets that came from a specific rule.

       <b>index</b> <u>INDEX</u>
              Is a unique ID for an action. When creating new action instance, this parameter allows one to  set
              the  new  action  index.  When  using  existing  action,  this parameter allows one to specify the
              existing action index.  The index must 32bit unsigned integer greater than zero.

</pre><h4><b>EXAMPLES</b></h4><pre>
       Sample one of every 100 packets flowing into interface eth0 to psample group 12:

              tc qdisc add dev eth0 handle ffff: ingress
              tc filter add dev eth0 parent ffff: matchall \
                   action sample rate 100 group 12 index 19

       Use the same action instance to sample eth1 too:

              tc qdisc add dev eth1 handle ffff: ingress
              tc filter add dev eth1 parent ffff: matchall \
                   action sample index 19

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man8/tc.8.html">tc</a></b>(8), <b><a href="../man8/tc-matchall.8.html">tc-matchall</a></b>(8) <b><a href="../man1/psample.1.html">psample</a></b>(1)

iproute2                                           31 Jan 2017                     <u>Packet</u> <u>sample</u> <u>action</u> <u>in</u> <u><a href="../man8/tc.8.html">tc</a></u>(8)
</pre>
 </div>
</div></section>
</div>
</body>
</html>