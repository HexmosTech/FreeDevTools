<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>skbmod - user-friendly packet editor action</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/iproute2">iproute2_6.14.0-1ubuntu3_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       skbmod - user-friendly packet editor action

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>tc</b> ... <b>action</b> <b>skbmod</b> { <b>set</b> <u>SETTABLE</u> | <b>swap</b> <u>SWAPPABLE</u>  | <b>ecn</b> } [ <u>CONTROL</u> ] [ <b>index</b> <u>INDEX</u> ]

       <u>SETTABLE</u> :=  [ <b>dmac</b> <u>DMAC</u> ]  [ <b>smac</b> <u>SMAC</u> ]  [ <b>etype</b> <u>ETYPE</u> ]

       <u>SWAPPABLE</u> := <b>mac</b>

       <u>CONTROL</u> := { <b>reclassify</b> | <b>pipe</b> | <b>drop</b> | <b>shot</b> | <b>continue</b> | <b>pass</b> }

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The  <b>skbmod</b>  action is intended as a usability upgrade to the existing <b>pedit</b> action. Instead of having to
       manually edit 8-, 16-, or 32-bit chunks of an ethernet header, <b>skbmod</b>  allows  complete  substitution  of
       supported elements.  Action must be one of <b>set</b>, <b>swap</b> and <b>ecn</b>.  <b>set</b> and <b>swap</b> only affect Ethernet packets,
       while <b>ecn</b> only affects IP packets.

</pre><h4><b>OPTIONS</b></h4><pre>
       <b>dmac</b> <u>DMAC</u>
              Change the destination mac to the specified address.

       <b>smac</b> <u>SMAC</u>
              Change the source mac to the specified address.

       <b>etype</b> <u>ETYPE</u>
              Change the ethertype to the specified value.

       <b>mac</b>    Used to swap mac addresses.

       <b>ecn</b>    Used  to  mark  ECN  Capable  Transport (ECT) IP packets as Congestion Encountered (CE).  Does not
              affect Non ECN-Capable Transport (Non-ECT) packets.

       <u>CONTROL</u>
              The following keywords allow one to control how the tree of qdisc, classes, filters and actions is
              further traversed after this action.

              <b>reclassify</b>
                     Restart with the first filter in the current list.

              <b>pipe</b>   Continue with the next action attached to the same filter.

              <b>drop</b>
              <b>shot</b>   Drop the packet.

              <b>continue</b>
                     Continue classification with the next filter in line.

              <b>pass</b>   Finish classification process and return to calling qdisc for  further  packet  processing.
                     This is the default.

</pre><h4><b>EXAMPLES</b></h4><pre>
       To start, observe the following filter with a pedit action:

              tc filter add dev eth1 parent 1: protocol ip prio 10 \
                   u32 match ip protocol 1 0xff flowid 1:2 \
                   action pedit munge offset -14 u8 set 0x02 \
                   munge offset -13 u8 set 0x15 \
                   munge offset -12 u8 set 0x15 \
                   munge offset -11 u8 set 0x15 \
                   munge offset -10 u16 set 0x1515 \
                   pipe

       Using the skbmod action, this command can be simplified to:

              tc filter add dev eth1 parent 1: protocol ip prio 10 \
                   u32 match ip protocol 1 0xff flowid 1:2 \
                   action skbmod set dmac 02:15:15:15:15:15 \
                   pipe

       Complexity  will increase if source mac and ethertype are also being edited as part of the action. If all
       three fields are to be changed with skbmod:

              tc filter add dev eth5 parent 1: protocol ip prio 10 \
                   u32 match ip protocol 1 0xff flowid 1:2 \
                   action skbmod \
                   set etype 0xBEEF \
                   set dmac 02:12:13:14:15:16 \
                   set smac 02:22:23:24:25:26

       To swap the destination and source mac addresses in the Ethernet header:

              tc filter add dev eth3 parent 1: protocol ip prio 10 \
                   u32 match ip protocol 1 0xff flowid 1:2 \
                   action skbmod \
                   swap mac

       Finally, to mark the CE codepoint in the IP header for ECN Capable Transport (ECT) packets:

              tc filter add dev eth0 parent 1: protocol ip prio 10 \
                   u32 match ip protocol 1 0xff flowid 1:2 \
                   action skbmod \
                   ecn

       Only one of <b>set</b>, <b>swap</b> and <b>ecn</b> shall be used in a single command.  Trying to use more than one of them  in
       a single command is considered undefined behavior; pipe multiple commands together instead.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man8/tc.8.html">tc</a></b>(8), <b><a href="../man8/tc-u32.8.html">tc-u32</a></b>(8), <b><a href="../man8/tc-pedit.8.html">tc-pedit</a></b>(8)

iproute2                                           21 Sep 2016                            <u>skbmod</u> <u>action</u> <u>in</u> <u><a href="../man8/tc.8.html">tc</a></u>(8)
</pre>
 </div>
</div></section>
</div>
</body>
</html>