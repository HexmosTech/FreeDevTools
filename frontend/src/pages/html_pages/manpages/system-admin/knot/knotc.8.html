<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>knotc - Knot DNS control utility</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/knot">knot_3.4.6-2_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       knotc - Knot DNS control utility

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>knotc</b> [<u>config_option</u>] [<u>options</u>] [<u>action</u>]

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This program controls a running <u>knotd</u> process using a socket.

       If  an  <u>action</u>  is  specified,  it is performed and <u>knotc</u> exits, otherwise the program is executed in the
       interactive mode.

   <b>Config</b> <b>options</b>
       <b>-c</b>, <b>--config</b> <u>file</u>
              Use a textual configuration file (default is <b>/usr/local/etc/knot/knot.conf</b>).

       <b>-C</b>, <b>--confdb</b> <u>directory</u>
              Use a binary configuration database directory (default  is  <b>/usr/local/var/lib/knot/confdb</b>).   The
              default configuration database, if exists, has a preference to the default configuration file.

   <b>Options</b>
       <b>-m</b>, <b>--max-conf-size</b> <u>MiB</u>
              Set maximum size of the configuration database (default is 500 MiB, maximum 10000 MiB).

       <b>-s</b>, <b>--socket</b> <u>path</u>
              Use a control UNIX socket path (default is <b>/usr/local/var/run/knot/knot.sock</b>).

       <b>-t</b>, <b>--timeout</b> <u>seconds</u>
              Use  a  control  timeout  in  seconds.  Set to 0 for infinity (default is 60).  The control socket
              operations are also subject to the <u>timeout</u> parameter set on the server side  in  server's  Control
              configuration section.

       <b>-b</b>, <b>--blocking</b>
              Zone  event  trigger commands wait until the event is finished. Control timeout is set to infinity
              if not forced by explicit timeout specification.

       <b>-e</b>, <b>--extended</b>
              Show extended output (even empty items in zone status).

       <b>-f</b>, <b>--force</b>
              Forced operation. Overrides some checks.

       <b>-x</b>, <b>--mono</b>
              Don't generate colorized output.

       <b>-X</b>, <b>--color</b>
              Force colorized output in extended output or to a pipe.

       <b>-v</b>, <b>--verbose</b>
              Enable debug output.

       <b>-h</b>, <b>--help</b>
              Print the program help.

       <b>-V</b>, <b>--version</b>
              Print the program version. The option <b>-VV</b> makes the program print the compile  time  configuration
              summary.

   <b>Actions</b>
       <b>status</b> [<u>detail</u>]
              Check  if  the  server is running. Details are <b>version</b> for the running server version, <b>workers</b> for
              the numbers of worker threads, <b>configure</b> for the configure summary, or <b>cert-key</b> for the public key
              pin of the currently used certificate.

       <b>stop</b>   Stop the server if running.

       <b>reload</b> Reload the server configuration and modified zone files, and reopen the  log  files  if  they  are
              configured. All open zone transactions will be aborted!

       <b>stats</b> [<u>module</u>[<b>.</b><u>counter</u>]]
              Show global statistics counter(s). To print also counters with value 0, use force option.

       <b>zone-check</b> [<u>zone</u>...]
              Test  if  the  server  can  load  the  zone.  Semantic  checks  are  executed  if  enabled  in the
              configuration. If invoked with the force option, an error is returned when semantic check  warning
              appears. (*)

       <b>zone-status</b> [<u>zone</u>...] [<u>filter</u>]
              Show  the  zone  status. Filters are <b>+role</b>, <b>+serial</b>, <b>+transaction</b>, <b>+events</b>, <b>+freeze</b>, and <b>+catalog</b>.
              Empty zone parameters are omitted, unless the <b>--extended</b> option is used.  A  single  dash  in  the
              output  represents  an  unset  value. Automatic colorization can be overruled using the <b>--mono</b> and
              <b>--color</b> options.

              The color code is: <u>green</u> - zone acts as a master  /  <u>red</u>  -  zone  acts  as  a  slave,  <u>bold</u>  <u>font</u>
              <u>(highlited)</u>  -  zone  is  active  /  <u>normal</u>  - zone is empty, <u>underscored</u> - zone is an interpreted
              catalog member.

       <b>zone-reload</b> [<u>zone</u>...]
              Trigger a zone reload from a disk without checking its modification time. For secondary zone,  the
              refresh event from primary server(s) is scheduled; for primary zone, the notify event to secondary
              server(s)  is  scheduled.  An  open  zone  transaction  will be aborted! If invoked with the force
              option, also zone modules will be re-loaded, but blocking mode might not work reliably. (#)

       <b>zone-refresh</b> [<u>zone</u>...]
              Trigger a check for the zone serial on the zone's primary server. If  the  primary  server  has  a
              newer zone, a transfer is scheduled. This command is valid for secondary zones. (#)

       <b>zone-retransfer</b> [<u>zone</u>...]
              Trigger a zone transfer from the zone's primary server. The server doesn't check the serial of the
              primary server's zone. This command is valid for secondary zones. (#)

       <b>zone-notify</b> [<u>zone</u>...]
              Trigger  a  NOTIFY  message to all configured remotes. This can help in cases when previous NOTIFY
              had been lost or the secondary servers have been offline. (#)

       <b>zone-flush</b> [<u>zone</u>...] [<b>+outdir</b> <u>directory</u>]
              Trigger a zone journal flush to the configured zone file. If zonefile synchronization is disabled,
              the force option must be used.   If  an  output  directory  is  specified,  the  current  zone  is
              immediately  dumped  (in  the  blocking mode) to a zone file in the specified directory. See <u>Notes</u>
              below about the directory permissions. (#)

       <b>zone-backup</b> [<u>zone</u>...] <b>+backupdir</b> <u>directory</u> [<u>filter</u>...]
              Trigger a zone data  and  metadata  backup  to  a  specified  directory.   Available  filters  are
              <b>+zonefile</b>, <b>+journal</b>, <b>+timers</b>, <b>+kaspdb</b>, <b>+keysonly</b>, <b>+catalog</b>, <b>+quic</b>, and their negative counterparts
              <b>+nozonefile</b>,  <b>+nojournal</b>,  <b>+notimers</b>,  <b>+nokaspdb</b>, <b>+nokeysonly</b>, <b>+nocatalog</b>, and <b>+noquic</b>. With these
              filters set, zone contents, zone's journal, zone-related timers, zone-related  data  in  the  KASP
              database  together  with  keys (or keys without the KASP database), zone's catalog, and the server
              QUIC key and certificate, respectively, are backed up, or omitted from  the  backup.  By  default,
              filters  <b>+zonefile</b>,  <b>+timers</b>,  <b>+kaspdb</b>,  <b>+catalog</b>,  <b>+quic</b>, <b>+nojournal</b>, and <b>+nokeysonly</b> are set for
              backup. The same defaults are set for restore, with the only difference being <b>+noquic</b>.  Setting  a
              filter  for  an  item  doesn't  change the default settings for other items. The only exception is
              <b>+keysonly</b>, which disables all  other  filters  by  default,  but  they  can  still  be  turned  on
              explicitly.  If  zone flushing is disabled, the original zone file is backed up instead of writing
              out zone contents to a file. When backing-up a catalog zone, it is recommended to prevent  ongoing
              changes  to  it by use of <b>zone-freeze</b>. The force option allows an already existing backupdir to be
              overwritten. See <u>Notes</u> below about the directory permissions.  (#)

       <b>zone-restore</b> [<u>zone</u>...] <b>+backupdir</b> <u>directory</u> [<u>filter</u>...]
              Trigger a zone data and metadata restore from a specified backup directory.  Optional filters  are
              equivalent  to the same filters of <b>zone-backup</b>.  Restore from backups created by Knot DNS releases
              prior to 3.1 is possible with the force option. See <u>Notes</u> below about the  directory  permissions.
              (#)

       <b>zone-sign</b> [<u>zone</u>...]
              Trigger  a DNSSEC re-sign of the zone. Existing signatures will be dropped.  This command is valid
              for zones with DNSSEC signing enabled. (#)

       <b>zone-validate</b> [<u>zone</u>...]
              Trigger a DNSSEC validation of the zone. If the validation fails and the zone  is  secondary,  the
              zone expires immediately! (#)

       <b>zone-keys-load</b> [<u>zone</u>...]
              Trigger a load of DNSSEC keys and other signing material from KASP database (which might have been
              altered manually). If suitable, re-sign the zone afterwards (keeping valid signatures intact). (#)

       <b>zone-key-rollover</b> <u>zone</u> <u>key_type</u>
              Trigger  immediate key rollover. Publish new key and start a key rollover, even when the key has a
              lifetime to go. Key type can be <b>ksk</b> (also for CSK) or <b>zsk</b>. This command is valid  for  zones  with
              DNSSEC  signing  and automatic key management enabled. Note that complete key rollover consists of
              several steps and the blocking mode relates to the initial one only! (#)

       <b>zone-ksk-submitted</b> <u>zone</u>...
              Use when the zone's KSK rollover is in submission phase. By calling this command the user confirms
              manually that the parent zone contains DS record for the new KSK in submission phase and  the  old
              KSK can be retired. (#)

       <b>zone-freeze</b> [<u>zone</u>...]
              Trigger  a  zone  freeze.  All  running  events will be finished and all new and pending (planned)
              zone-changing events (load, refresh, update, flush, and DNSSEC signing) will be held up until  the
              zone is thawed. Up to 8 (this limit is hardcoded) DDNS updates per zone will be queued, subsequent
              updates will be refused. (#)

       <b>zone-thaw</b> [<u>zone</u>...]
              Trigger dismissal of zone freeze. (#)

       <b>zone-xfr-freeze</b> [<u>zone</u>...]
              Temporarily disable outgoing AXFR/IXFR for the zone(s). (#)

       <b>zone-xfr-thaw</b> [<u>zone</u>...]
              Dismiss outgoing XFR freeze. (#)

       <b>zone-read</b> <u>zone</u> [<u>owner</u> [<u>type</u>]]
              Get zone data that are currently being presented.

       <b>zone-begin</b> <u>zone</u>... [<b>+benevolent</b>]
              Begin a zone transaction. If <b>+benevolent</b> is used, the zone transaction will be committed even when
              it contains removals of non-existing or additions of existing records.

       <b>zone-commit</b> <u>zone</u>...
              Commit the zone transaction. All changes are applied to the zone.

       <b>zone-abort</b> <u>zone</u>...
              Abort the zone transaction. All changes are discarded.

       <b>zone-diff</b> <u>zone</u>
              Get zone changes within the transaction.

       <b>zone-get</b> <u>zone</u> [<u>owner</u> [<u>type</u>]]
              Get zone data within the transaction.

       <b>zone-set</b> <u>zone</u> <u>owner</u> [<u>ttl</u>] <u>type</u> <u>rdata</u>
              Add  zone  record  within  the  transaction.  The  first  record  in  a rrset requires a ttl value
              specified.

       <b>zone-unset</b> <u>zone</u> <u>owner</u> [<u>type</u> [<u>rdata</u>]]
              Remove zone data within the transaction.

       <b>zone-purge</b> <u>zone</u>... [<b>+orphan</b>] [<u>filter</u>...]
              Purge zone data, zone file, journal, timers, and/or  KASP  data  of  specified  zones.   Available
              filters  are  <b>+expire</b>,  <b>+zonefile</b>,  <b>+journal</b>,  <b>+timers</b>,  <b>+kaspdb</b>,  and  <b>+catalog</b>.  If no filter is
              specified, all filters are enabled.  If the zone is no longer configured,  add  <b>+orphan</b>  parameter
              (zone  file  cannot be purged in this case). When purging orphans, always check the server log for
              possible errors. For proper operation, it's necessary to prevent ongoing changes to the  zone  and
              triggering  of  zone  related  events  during purge; use of <b>zone-freeze</b> is advisable. This command
              always requires the force option. (#)

       <b>zone-stats</b> <u>zone</u> [<u>module</u>[<b>.</b><u>counter</u>]]
              Show zone statistics counter(s). To print also counters with value 0, use force option.

       <b>conf-init</b>
              Initialize the configuration database. If the database doesn't exist yet, execute this command  as
              an intended user to ensure the server is permitted to access the database (e.g. <u>sudo</u> <u>-u</u> <u>knot</u> <u>knotc</u>
              <u>conf-init</u>). (*)

       <b>conf-check</b>
              Check the server configuration. (*)

       <b>conf-import</b> <u>filename</u> [+nopurge]
              Import  a  configuration  file into the configuration database. If the database doesn't exist yet,
              execute this command as an intended user to ensure the server is permitted to access the  database
              (e.g. <u>sudo</u> <u>-u</u> <u>knot</u> <u>knotc</u> <u>conf-import</u> <u>...</u>).  An optional filter <b>+nopurge</b> prevents possibly existing
              configuration database from purging before the import itself.  Also ensure the server is not using
              the configuration database at the same time! (*)

       <b>conf-export</b> [<u>filename</u>] [+schema]
              Export the configuration database (or JSON schema) into a file or stdout. (*)

       <b>conf-list</b> [<u>item</u>]
              List the configuration database sections or section items.

       <b>conf-read</b> [<u>item</u>]
              Read the item from the active configuration database.

       <b>conf-begin</b>
              Begin a writing configuration database transaction. Only one transaction can be opened at a time.

       <b>conf-commit</b>
              Commit the configuration database transaction.

       <b>conf-abort</b>
              Rollback the configuration database transaction.

       <b>conf-diff</b> [<u>item</u>]
              Get the item difference in the transaction.

       <b>conf-get</b> [<u>item</u>]
              Get the item data from the transaction.

       <b>conf-set</b> <u>item</u> [<u>data</u>...]
              Set the item data in the transaction.

       <b>conf-unset</b> [<u>item</u>] [<u>data</u>...]
              Unset the item data in the transaction.

   <b>Notes</b>
       Empty or <b>--</b> <u>zone</u> parameter means all zones or all zones with a transaction.

       Use <b>@</b> <u>owner</u> to denote the zone name.

       Type <u>item</u> parameter in the form of <u>section</u>[<b>[</b><u>id</u><b>]</b>][<b>.</b><u>name</u>].

       (*) indicates a local operation which requires a configuration.

       (#) indicates an optionally blocking operation.

       The <b>-b</b> and <b>-f</b> options can be placed right after the command name.

       Responses returned by <u>knotc</u> commands depend on the mode:

       • In  the  blocking  mode,  <u>knotc</u>  reports  if  an error occurred during processing of the command by the
         server. If an error is reported, a more detailed information about the failure can usually be found  in
         the server log.

       • In  the  non-blocking  (default)  mode,  <u>knotc</u>  doesn't  report  processing errors.  The <u>OK</u> response to
         triggering commands means that the command has been successfully sent to the server. To verify  if  the
         operation succeeded, it's necessary to check the server log.

       Actions  <b>zone-flush</b>,  <b>zone-backup</b>,  and  <b>zone-restore</b> are carried out by the <u>knotd</u> process. The directory
       specified must be accessible to the user account that <u>knotd</u> runs  under  and  if  the  directory  already
       exists, its permissions must be appropriate for that user account.

   <b>Interactive</b> <b>mode</b>
       The  utility  provides  interactive  mode  with basic line editing functionality, command completion, and
       command history.

       Interactive mode behavior can be customized in <u><a href="file:~/.editrc">~/.editrc</a></u>. Refer to <b><a href="../man5/editrc.5.html">editrc</a>(5)</b> for details.

       Command history is saved in <u><a href="file:~/.knotc_history">~/.knotc_history</a></u>.

</pre><h4><b>EXIT</b> <b>VALUES</b></h4><pre>
       Exit status of 0 means successful operation. Any other exit status indicates an error.

</pre><h4><b>EXAMPLES</b></h4><pre>
   <b>Reload</b> <b>the</b> <b>whole</b> <b>server</b> <b>configuration</b>
          $ knotc reload

   <b>Flush</b> <b>the</b> <b>example.com</b> <b>and</b> <b>example.org</b> <b>zones</b>
          $ knotc zone-flush example.com example.org

   <b>Get</b> <b>the</b> <b>current</b> <b>server</b> <b>configuration</b>
          $ knotc conf-read server

   <b>Get</b> <b>the</b> <b>list</b> <b>of</b> <b>the</b> <b>current</b> <b>zones</b>
          $ knotc conf-read zone.domain

   <b>Get</b> <b>the</b> <b>primary</b> <b>servers</b> <b>for</b> <b>the</b> <b>example.com</b> <b>zone</b>
          $ knotc conf-read 'zone[example.com].master'

   <b>Add</b> <b>example.org</b> <b>zone</b> <b>with</b> <b>a</b> <b>zonefile</b> <b>location</b>
          $ knotc conf-begin
          $ knotc conf-set 'zone[example.org]'
          $ knotc conf-set 'zone[example.org].file' '/var/zones/example.org.zone'
          $ knotc conf-commit

   <b>Get</b> <b>the</b> <b>SOA</b> <b>record</b> <b>for</b> <b>each</b> <b>configured</b> <b>zone</b>
          $ knotc zone-read -- @ SOA

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man8/knotd.8.html">knotd</a>(8)</b>, <b><a href="../man5/knot.conf.5.html">knot.conf</a>(5)</b>, <b><a href="../man5/editrc.5.html">editrc</a>(5)</b>.

</pre><h4><b>AUTHOR</b></h4><pre>
       CZ.NIC Labs &lt;https://www.knot-dns.cz&gt;

</pre><h4><b>COPYRIGHT</b></h4><pre>
       Copyright 2010–2025, CZ.NIC, z.s.p.o.

3.4.6                                              2025-04-10                                           <u><a href="../man8/KNOTC.8.html">KNOTC</a></u>(8)
</pre>
 </div>
</div></section>
</div>
</body>
</html>