<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>pvck — Check metadata on physical volumes</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/lvm2">lvm2_2.03.31-2ubuntu1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       pvck — Check metadata on physical volumes

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>pvck</b> <u>option_args</u> <u>position_args</u>
           [ <u>option_args</u> ]

           <b>--commandprofile</b> <u>String</u>
           <b>--config</b> <u>String</u>
        <b>-d</b>|<b>--debug</b>
           <b>--devices</b> <u>PV</u>
           <b>--devicesfile</b> <u>String</u>
           <b>--driverloaded</b> <b>y</b>|<b>n</b>
           <b>--dump</b> <b>headers</b>|<b>metadata</b>|<b>metadata_all</b>|<b>metadata_search</b>
        <b>-f</b>|<b>--file</b> <u>String</u>
        <b>-h</b>|<b>--help</b>
           <b>--journal</b> <u>String</u>
           <b>--labelsector</b> <u>Number</u>
           <b>--lockopt</b> <u>String</u>
           <b>--longhelp</b>
           <b>--nohints</b>
           <b>--nolocking</b>
           <b>--profile</b> <u>String</u>
           <b>--</b>[<b>pv</b>]<b>metadatacopies</b> <b>0</b>|<b>1</b>|<b>2</b>
        <b>-q</b>|<b>--quiet</b>
           <b>--repair</b>
           <b>--repairtype</b> <b>pv_header</b>|<b>metadata</b>|<b>label_header</b>
           <b>--settings</b> <u>String</u>
        <b>-t</b>|<b>--test</b>
        <b>-v</b>|<b>--verbose</b>
           <b>--version</b>
        <b>-y</b>|<b>--yes</b>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       pvck checks and repairs LVM metadata on PVs.

   <b>Dump</b> <b>options</b>
       <b>headers</b>
       Print  LVM  on-disk  headers  and  structures: label_header, pv_header, mda_header(s), and metadata text.
       Warnings are printed if any values are incorrect.  The label_header and pv_header both  exist  in  a  512
       byte  sector, usually the second sector of the device.  An mda_header exists in a 512 byte sector at off‐
       set 4096 bytes.  A second mda_header can optionally exist near the end of the device.  The metadata  text
       exists in an area (about 1MiB by default) immediately following the mda_header sector.  The metadata text
       is checked but not printed (see other options).

       <b>metadata</b>
       Print  the  current  LVM VG metadata text (or save to a file), using headers to locate the latest copy of
       metadata.  If headers are damaged, metadata may not  be  found  (see  metadata_search).   Use  --settings
       "mda_num=2"  to  look  in  mda2 (the second mda at the end of the device, if used).  The metadata text is
       printed to stdout or saved to a file with --file.

       <b>metadata_all</b>
       List all versions of VG metadata found in the metadata area, using  headers  to  locate  metadata.   Full
       copies  of all metadata are saved to a file with the --file option.  If headers are damaged, metadata may
       not be found (see metadata_search).  Use --settings "mda_num=2" as above.  Use -v to include descriptions
       and dates when listing metadata versions.

       <b>metadata_search</b>
       List all versions of VG metadata found in the metadata area, searching common locations so  metadata  can
       be found if headers are damaged.  Full copies of all metadata are saved to a file with the --file option.
       To  save one specific version of metadata, use --settings "metadata_offset=&lt;offset&gt;", where the offset is
       taken from the list of versions found.  Use -v to include descriptions and dates  when  listing  metadata
       versions.

       <b>metadata_area</b>
       Save the entire text metadata area to a file without processing.

   <b>Repair</b> <b>options</b>
       <b>--repair</b>
       Repair  headers and metadata on a PV.  This uses a metadata input file that was extracted by --dump, or a
       backup file (from <u>/etc/lvm/backup</u>).  When possible, use metadata saved by --dump from another PV  in  the
       same VG (or from a second metadata area on the PV).

       There are cases where the PV UUID needs to be specified for the PV being repaired.  It is specified using
       --settings  "pv_uuid=&lt;UUID&gt;".  In particular, if the device name for the PV being repaired does not match
       the previous device name of the PV, then LVM may not be able to determine  the  correct  PV  UUID.   When
       headers are damaged on more than one PV in a VG, it is important for the user to determine the correct PV
       UUID  and specify it in --settings.  Otherwise, the wrong PV UUID could be used if device names have been
       swapped since the metadata was last written.

       If a PV has no metadata areas and the pv_header is damaged, then the repair will not know  to  create  no
       metadata  areas  during  repair.  It will by default repair metadata in mda1.  To repair with no metadata
       areas, use --settings "mda_offset=0 mda_size=0".

       There are cases where repair should be run on all PVs in the VG (using the same metadata file):   if  all
       PVs  in  the VG are damaged, if using an old metadata version, or if a backup file is used instead of raw
       metadata (taken from pvck dump.)

       Using --repair is equivalent to running --repairtype pv_header followed by --repairtype metadata.

       <b>--repairtype</b> <b>pv_header</b>
       Repairs the header sector, containing the pv_header and label_header.

       <b>--repairtype</b> <b>metadata</b>
       Repairs the mda_header and metadata text.  It requires the headers to be correct (having  been  undamaged
       or already repaired).

       <b>--repairtype</b> <b>label_header</b>
       Repairs label_header fields, leaving the pv_header (in the same sector) unchanged.  (repairtype pv_header
       should usually be used instead.)

   <b>Settings</b>
       The --settings option controls or overrides certain dump or repair behaviors.  All offset and size values
       in settings are in bytes (units are not recognized.)  These settings are subject to change.

       <b>mda_num=1|2</b>
       Select  which metadata area should be used.  By default the first metadata area (1) is used.  mda1 is al‐
       ways located at offset 4096.  mda2, at the end of the device, often does not exist (it's not  created  by
       default.) If mda1 is erased, mda2, if it exists, will often still have metadata.

       <b>metadata_offset=</b><u>bytes</u>
       Select  metadata  text  at  this offset.  Use with metadata_search to print/save one instance of metadata
       text.

       <b>mda_offset=</b><u>bytes</u> <b>mda_size=</b><u>bytes</u>
       Refers to a metadata area (mda) location and size.  An mda includes an mda_header and  circular  metadata
       text  buffer.   Setting  this  forces  metadata_search look for metadata in the given area instead of the
       standard locations.  When set to zero with repair, it indicates no metadata areas should exist.

       <b>mda2_offset=</b><u>bytes</u> <b>mda2_size=</b><u>bytes</u>
       When repairing a pv_header, this forces a specific offset and size for mda2 that should  be  recorded  in
       the pv_header.

       <b>pv_uuid=</b><u>uuid</u>
       Specify  the  PV UUID of the device being repaired.  When not specified, repair will attempt to determine
       the correct PV UUID by matching a device name in the metadata.

       <b>device_size=</b><u>bytes</u>
       <b>data_offset=</b><u>bytes</u>
       When repairing a pv_header, the device_size, data_offset, and pvid can  all  be  specified  directly,  in
       which  case these values are not taken from a metadata file (where they usually come from), and the meta‐
       data file can be omitted.  data_offset is the starting location of  the  first  physical  extent  (data),
       which follows the first metadata area.

</pre><h4><b>USAGE</b></h4><pre>
       Check for metadata on a device

       <b>pvck</b> <u>PV</u> ...
           [ COMMON_OPTIONS ]

       —

       Check and print LVM headers and metadata on a device

       <b>pvck</b> <b>--dump</b> <b>headers</b>|<b>metadata</b>|<b>metadata_all</b>|<b>metadata_search</b> <u>PV</u>
           [ <b>-f</b>|<b>--file</b> <u>String</u> ]
           [    <b>--settings</b> <u>String</u> ]
           [    <b>--</b>[<b>pv</b>]<b>metadatacopies</b> <b>0</b>|<b>1</b>|<b>2</b> ]
           [ COMMON_OPTIONS ]

       —

       Repair LVM headers or metadata on a device

       <b>pvck</b> <b>--repairtype</b> <b>pv_header</b>|<b>metadata</b>|<b>label_header</b> <u>PV</u>
           [ <b>-f</b>|<b>--file</b> <u>String</u> ]
           [    <b>--settings</b> <u>String</u> ]
           [ COMMON_OPTIONS ]

       —

       Repair LVM headers and metadata on a device

       <b>pvck</b> <b>--repair</b> <b>-f</b>|<b>--file</b> <u>String</u> <u>PV</u>
           [    <b>--settings</b> <u>String</u> ]
           [ COMMON_OPTIONS ]

       —

       Common options for command:
           [    <b>--labelsector</b> <u>Number</u> ]

       Common options for lvm:
           [ <b>-d</b>|<b>--debug</b> ]
           [ <b>-h</b>|<b>--help</b> ]
           [ <b>-q</b>|<b>--quiet</b> ]
           [ <b>-t</b>|<b>--test</b> ]
           [ <b>-v</b>|<b>--verbose</b> ]
           [ <b>-y</b>|<b>--yes</b> ]
           [    <b>--commandprofile</b> <u>String</u> ]
           [    <b>--config</b> <u>String</u> ]
           [    <b>--devices</b> <u>PV</u> ]
           [    <b>--devicesfile</b> <u>String</u> ]
           [    <b>--driverloaded</b> <b>y</b>|<b>n</b> ]
           [    <b>--journal</b> <u>String</u> ]
           [    <b>--lockopt</b> <u>String</u> ]
           [    <b>--longhelp</b> ]
           [    <b>--nohints</b> ]
           [    <b>--nolocking</b> ]
           [    <b>--profile</b> <u>String</u> ]
           [    <b>--version</b> ]

</pre><h4><b>OPTIONS</b></h4><pre>

       <b>--commandprofile</b> <u>String</u>
              The  command profile to use for command configuration.  See <b><a href="../man5/lvm.conf.5.html">lvm.conf</a></b>(5) for more information about
              profiles.

       <b>--config</b> <u>String</u>
              Config settings for the command. These override <b><a href="../man5/lvm.conf.5.html">lvm.conf</a></b>(5) settings.  The  String  arg  uses  the
              same format as <b><a href="../man5/lvm.conf.5.html">lvm.conf</a></b>(5), or may use section/field syntax.  See <b><a href="../man5/lvm.conf.5.html">lvm.conf</a></b>(5) for more information
              about config.

       <b>-d</b>|<b>--debug</b> ...
              Set  debug level. Repeat from 1 to 6 times to increase the detail of messages sent to the log file
              and/or syslog (if configured).

       <b>--devices</b> <u>PV</u>
              Restricts the devices that are visible and accessible to the command.  Devices not listed will ap‐
              pear to be missing. This option can be repeated, or accepts a comma  separated  list  of  devices.
              This overrides the devices file.

       <b>--devicesfile</b> <u>String</u>
              A  file listing devices that LVM should use.  The file must exist in <u>/etc/lvm/devices/</u> and is man‐
              aged with the <b><a href="../man8/lvmdevices.8.html">lvmdevices</a></b>(8) command.  This overrides the <b><a href="../man5/lvm.conf.5.html">lvm.conf</a></b>(5) <b>devices/devicesfile</b>  and  <b>de‐</b>
              <b>vices/use_devicesfile</b> settings.

       <b>--driverloaded</b> <b>y</b>|<b>n</b>
              If set to no, the command will not attempt to use device-mapper.  For testing and debugging.

       <b>--dump</b> <b>headers</b>|<b>metadata</b>|<b>metadata_all</b>|<b>metadata_search</b>
              Dump  headers  and metadata from a PV for debugging and repair.  Option values include: <b>headers</b> to
              print and check LVM headers, <b>metadata</b> to print or save the current text metadata, <b>metadata_all</b>  to
              list  or  save all versions of metadata, <b>metadata_search</b> to list or save all versions of metadata,
              searching standard locations in case of damaged headers, <b>metadata_area</b>  to  save  an  entire  text
              metadata area to a file.

       <b>-f</b>|<b>--file</b> <u>String</u>
              Metadata file to read or write.

       <b>-h</b>|<b>--help</b>
              Display help text.

       <b>--journal</b> <u>String</u>
              Record information in the systemd journal.  This information is in addition to information enabled
              by  the  lvm.conf  log/journal  setting.   command: record information about the command.  output:
              record the default command output.  debug: record full command debugging.

       <b>--labelsector</b> <u>Number</u>
              By default the PV is labelled with an LVM2 identifier in its second sector (sector 1).  This  lets
              you  use  a  different  sector  near  the  start  of the disk (between 0 and 3 inclusive - see LA‐
              BEL_SCAN_SECTORS in the source). Use with care.

       <b>--lockopt</b> <u>String</u>
              Used to pass options for special cases to lvmlockd.  See <b><a href="../man8/lvmlockd.8.html">lvmlockd</a></b>(8) for more information.

       <b>--longhelp</b>
              Display long help text.

       <b>--nohints</b>
              Do not use the hints file to locate devices for PVs. A command may read more devices to  find  PVs
              when  hints are not used. The command will still perform standard hint file invalidation where ap‐
              propriate.

       <b>--nolocking</b>
              Disable locking. Use with caution, concurrent commands may produce incorrect results.

       <b>--profile</b> <u>String</u>
              An alias for --commandprofile or --metadataprofile, depending on the command.

       <b>--</b>[<b>pv</b>]<b>metadatacopies</b> <b>0</b>|<b>1</b>|<b>2</b>
              The number of metadata areas to set aside on a PV for storing VG metadata.  When 2,  one  copy  of
              the  VG metadata is stored at the front of the PV and a second copy is stored at the end.  When 1,
              one copy of the VG metadata is stored at the front of the PV.  When 0, no copies of the VG metada‐
              ta are stored on the given PV.  This may be useful in VGs containing many PVs (this places limita‐
              tions on the ability to use vgsplit later.)

       <b>-q</b>|<b>--quiet</b> ...
              Suppress output and log messages. Overrides --debug and --verbose.  Repeat once to  also  suppress
              any prompts with answer 'no'.

       <b>--repair</b>
              Repair headers and metadata on a PV.

       <b>--repairtype</b> <b>pv_header</b>|<b>metadata</b>|<b>label_header</b>
              Repair headers and metadata on a PV. See command description.

       <b>--settings</b> <u>String</u>
              Specifies  command  specific settings in "Key = Value" form.  Combine multiple settings in quotes,
              or repeat the settings option for each.

       <b>-t</b>|<b>--test</b>
              Run in test mode. Commands will not update metadata.  This is implemented by disabling all metada‐
              ta writing but nevertheless returning success to the calling function. This may  lead  to  unusual
              error messages in multi-stage operations if a tool relies on reading back metadata it believes has
              changed but hasn't.

       <b>-v</b>|<b>--verbose</b> ...
              Set  verbose level. Repeat from 1 to 4 times to increase the detail of messages sent to stdout and
              stderr.

       <b>--version</b>
              Display version information.

       <b>-y</b>|<b>--yes</b>
              Do not prompt for confirmation interactively but always assume the answer yes.  Use  with  extreme
              caution.  (For automatic no, see -qq.)

</pre><h4><b>VARIABLES</b></h4><pre>
       <u>PV</u>     Physical  Volume name, a device path under /dev.  For commands managing physical extents, a PV po‐
              sitional arg generally accepts a suffix indicating a range (or multiple ranges)  of  physical  ex‐
              tents  (PEs).  When  the first PE is omitted, it defaults to the start of the device, and when the
              last PE is omitted it defaults to end.  Start and end range (inclusive): <u>PV</u>[<b>:</b><u>PE</u><b>-</b><u>PE</u>]...  Start  and
              length range (counting from 0): <u>PV</u>[<b>:</b><u>PE</u><b>+</b><u>PE</u>]...

       <u>String</u> See the option description for information about the string content.

       <u>Size</u>[UNIT]
              Size is an input number that accepts an optional unit.  Input units are always treated as base two
              values, regardless of capitalization, e.g. 'k' and 'K' both refer to 1024.  The default input unit
              is  specified  by  letter,  followed by |UNIT.  UNIT represents other possible input units: <b>b</b>|<b>B</b> is
              bytes, <b>s</b>|<b>S</b> is sectors of 512 bytes, <b>k</b>|<b>K</b> is KiB, <b>m</b>|<b>M</b> is MiB, <b>g</b>|<b>G</b> is GiB, <b>t</b>|<b>T</b> is TiB,  <b>p</b>|<b>P</b>  is  PiB,
              <b>e</b>|<b>E</b>  is  EiB.  (This should not be confused with the output control --units, where capital letters
              mean multiple of 1000.)

</pre><h4><b>ENVIRONMENT</b> <b>VARIABLES</b></h4><pre>
       See <b><a href="../man8/lvm.8.html">lvm</a></b>(8) for information about environment variables used by lvm.  For example, LVM_VG_NAME can  gener‐
       ally be substituted for a required VG parameter.

</pre><h4><b>EXAMPLES</b></h4><pre>
       If  the  partition  table is corrupted or lost on /dev/sda, and you suspect there was an LVM partition at
       approximately 100 MiB, then this area of the disk can be scanned using the <b>--labelsector</b> parameter with a
       value of 204800 (100 * 1024 * 1024 / 512 = 204800).
       <b>pvck</b> <b>--labelsector</b> <b>204800</b> <b>/dev/sda</b>

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man8/lvm.8.html">lvm</a></b>(8), <b><a href="../man5/lvm.conf.5.html">lvm.conf</a></b>(5), <b><a href="../man8/lvmconfig.8.html">lvmconfig</a></b>(8), <b><a href="../man8/lvmdevices.8.html">lvmdevices</a></b>(8),

       <b><a href="../man8/pvchange.8.html">pvchange</a></b>(8), <b><a href="../man8/pvck.8.html">pvck</a></b>(8), <b><a href="../man8/pvcreate.8.html">pvcreate</a></b>(8), <b><a href="../man8/pvdisplay.8.html">pvdisplay</a></b>(8), <b><a href="../man8/pvmove.8.html">pvmove</a></b>(8), <b><a href="../man8/pvremove.8.html">pvremove</a></b>(8), <b><a href="../man8/pvresize.8.html">pvresize</a></b>(8), <b><a href="../man8/pvs.8.html">pvs</a></b>(8), <b><a href="../man8/pvscan.8.html">pvscan</a></b>(8),

       <b><a href="../man8/vgcfgbackup.8.html">vgcfgbackup</a></b>(8), <b><a href="../man8/vgcfgrestore.8.html">vgcfgrestore</a></b>(8), <b><a href="../man8/vgchange.8.html">vgchange</a></b>(8), <b><a href="../man8/vgck.8.html">vgck</a></b>(8), <b><a href="../man8/vgcreate.8.html">vgcreate</a></b>(8), <b><a href="../man8/vgconvert.8.html">vgconvert</a></b>(8), <b><a href="../man8/vgdisplay.8.html">vgdisplay</a></b>(8),
       <b><a href="../man8/vgexport.8.html">vgexport</a></b>(8), <b><a href="../man8/vgextend.8.html">vgextend</a></b>(8), <b><a href="../man8/vgimport.8.html">vgimport</a></b>(8), <b><a href="../man8/vgimportclone.8.html">vgimportclone</a></b>(8), <b><a href="../man8/vgimportdevices.8.html">vgimportdevices</a></b>(8), <b><a href="../man8/vgmerge.8.html">vgmerge</a></b>(8), <b><a href="../man8/vgmknodes.8.html">vgmknodes</a></b>(8),
       <b><a href="../man8/vgreduce.8.html">vgreduce</a></b>(8), <b><a href="../man8/vgremove.8.html">vgremove</a></b>(8), <b><a href="../man8/vgrename.8.html">vgrename</a></b>(8), <b><a href="../man8/vgs.8.html">vgs</a></b>(8), <b><a href="../man8/vgscan.8.html">vgscan</a></b>(8), <b><a href="../man8/vgsplit.8.html">vgsplit</a></b>(8),

       <b><a href="../man8/lvcreate.8.html">lvcreate</a></b>(8), <b><a href="../man8/lvchange.8.html">lvchange</a></b>(8), <b><a href="../man8/lvconvert.8.html">lvconvert</a></b>(8), <b><a href="../man8/lvdisplay.8.html">lvdisplay</a></b>(8), <b><a href="../man8/lvextend.8.html">lvextend</a></b>(8), <b><a href="../man8/lvreduce.8.html">lvreduce</a></b>(8), <b><a href="../man8/lvremove.8.html">lvremove</a></b>(8), <b><a href="../man8/lvrename.8.html">lvrename</a></b>(8),
       <b><a href="../man8/lvresize.8.html">lvresize</a></b>(8), <b><a href="../man8/lvs.8.html">lvs</a></b>(8), <b><a href="../man8/lvscan.8.html">lvscan</a></b>(8),

       <b><a href="../man8/lvm-fullreport.8.html">lvm-fullreport</a></b>(8), <b><a href="../man8/lvm-lvpoll.8.html">lvm-lvpoll</a></b>(8), <b><a href="../man8/blkdeactivate.8.html">blkdeactivate</a></b>(8), <b><a href="../man8/lvmdump.8.html">lvmdump</a></b>(8),

       <b><a href="../man8/dmeventd.8.html">dmeventd</a></b>(8), <b><a href="../man8/lvmpolld.8.html">lvmpolld</a></b>(8), <b><a href="../man8/lvmlockd.8.html">lvmlockd</a></b>(8), <b><a href="../man8/lvmlockctl.8.html">lvmlockctl</a></b>(8), <b><a href="../man8/cmirrord.8.html">cmirrord</a></b>(8), <b><a href="../man8/lvmdbusd.8.html">lvmdbusd</a></b>(8), <b><a href="../man8/fsadm.8.html">fsadm</a></b>(8),

       <b><a href="../man7/lvmsystemid.7.html">lvmsystemid</a></b>(7), <b><a href="../man7/lvmreport.7.html">lvmreport</a></b>(7), <b><a href="../man7/lvmcache.7.html">lvmcache</a></b>(7), <b><a href="../man7/lvmraid.7.html">lvmraid</a></b>(7), <b><a href="../man7/lvmthin.7.html">lvmthin</a></b>(7), <b><a href="../man7/lvmvdo.7.html">lvmvdo</a></b>(7), <b><a href="../man7/lvmautoactivation.7.html">lvmautoactivation</a></b>(7)

Red Hat, Inc.                           LVM TOOLS <a href="../man2/2.03.31.2.html">2.03.31</a>(2) (2025-02-27)                                <u><a href="../man8/PVCK.8.html">PVCK</a></u>(8)
</pre>
 </div>
</div></section>
</div>
</body>
</html>