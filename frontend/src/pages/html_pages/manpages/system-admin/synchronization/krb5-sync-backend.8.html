<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>krb5-sync-backend - Manipulate Kerberos password and status change queue</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/krb5-sync-tools">krb5-sync-tools_3.1-3build1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       krb5-sync-backend - Manipulate Kerberos password and status change queue

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>krb5-sync-backend</b> (help|manual)

       <b>krb5-sync-backend</b> (disable|enable) [<b>-d</b> <u>queue</u>] <u>user</u>

       <b>krb5-sync-backend</b> list [<b>-d</b> <u>queue</u>]

       <b>krb5-sync-backend</b> process [<b>-s</b>] [<b>-d</b> <u>queue</u>]

       <b>krb5-sync-backend</b> password [<b>-d</b> <u>queue</u>] <u>user</u> ad &lt; <u>password</u>

       <b>krb5-sync-backend</b> purge [<b>-d</b> <u>queue</u>] <u>days</u>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>krb5-sync-backend</b> provides an interface to the queue of pending password and account status changes
       written by either this utility or by the synchronization plugin after failures.  It can queue account
       enables, disables, or password changes for Active Directory, list the queued actions, or process the
       queued actions with <b>krb5-sync</b> (telling it to take its action from a file).

       The queue directory will contain files with names in the format:

           &lt;username&gt;-&lt;domain&gt;-&lt;action&gt;-&lt;timestamp&gt;-&lt;count&gt;

       where &lt;username&gt; is the name of the affected account ("/" will be replaced with "." in the file name and
       the realm will be removed), &lt;domain&gt; is "ad", &lt;action&gt; is either "enable" (used for both enabling and
       disabling accounts) or "password", &lt;timestamp&gt; is a ISO 8601 timestamp in UTC, and &lt;count&gt; is a two-digit
       zero-padded number between 0 and 99 (so that we can handle multiple changes that arrive in the same
       second).  Each file contains a queued change in the format described in <u><a href="../man8/krb5-sync.8.html">krb5-sync</a></u>(8).

       Supported arguments to <b>krb5-sync-backend</b> are:

       disable <u>user</u>
           Queue a disable action (in Active Directory, as that's the only system currently supported for enable
           and disable) for <u>user</u>.

       enable <u>user</u>
           Queue an enable action (in Active Directory, as that's the only system currently supported for enable
           and disable) for <u>user</u>.

       help
           List the supported commands.

       list
           List the current contents of the queue.

       manual
           Display this documentation.

       process
           Process  the  queue.   All queued actions will be sorted alphanumerically (which due to the timestamp
           means that all changes for a particular user of a particular type will be done in the order  queued).
           <b>krb5-sync</b> will be called for each queued action, as long as it continues to succeed.  If it fails for
           a  queued action, all other actions sharing the same username, domain, and action will be skipped and
           queue processing will continue with the next action that differs in one of those three parameters.

       password <u>user</u> ad &lt; <u>password</u>
           Queue a password change for <u>user</u> in  Active  Directory,  setting  their  password  to  <u>password</u>.   By
           default, <u>password</u> is read from standard input.  It can also be passed as a command-line argument, but
           this  is  less  secure  since  the  password is then readable by anyone on the system who can see the
           command-line arguments of processes.

           The entire standard input is taken as the password, including any trailing newlines,  so  be  careful
           how  the  password  is  provided.   If  using  something  like  <b>echo</b>, use "echo -n" or the "\c" flag,
           depending on your system.

       purge <u>days</u>
           Delete all queued actions last modified longer than <u>days</u> days ago.  This can be used to clean up  old
           failed  change  propagations  in  situations  where  accounts may be created or have password changes
           queued that are later removed and never created in other environments.

</pre><h4><b>OPTIONS</b></h4><pre>
       Options must be specified after the command.

       <b>-d</b> <u>queue</u>, <b>--directory</b>=<u>queue</u>
           Use <u>queue</u> as the queue directory instead of the default of <u>/var/spool/krb5-sync</u>.  This  also  changes
           the lock file accordingly.  This option is supported for all commands except "help" and "manual".

       <b>-s</b>, <b>--silent</b>
           This  option is only allowed for the "process" command.  Filter out the output of <b>krb5-sync</b> to ignore
           common errors and success messages and only show uncommon errors.  This option will  filter  out  all
           output  when  <b>krb5-sync</b>  is  successful and will filter out error messages that normally indicate the
           account is missing in Active Directory.  The regexes can be modified at the start of this script.

</pre><h4><b>FILES</b></h4><pre>
       <u>/usr/sbin/krb5-sync</u>
           The path to the <b>krb5-sync</b> utility.  This may be changed at the top of this script.

       <u>/var/spool/krb5-sync</u>
           The default path to the queue.  This must match the queue_dir parameter  in  <u>krb5.conf</u>  used  by  the
           plugin.  It can be changed at the top of this script.

       <u>/var/spool/krb5-sync/.lock</u>
           An  empty  file used for locking the queue.  When writing to or querying the queue, <b>krb5-sync-backend</b>
           will open and lock this file with the Perl flock function, which normally calls <u><a href="../man2/flock.2.html">flock</a></u>(2).  Any  other
           queue writers need to use the same locking mechanism for safe operation.

</pre><h4><b>AUTHOR</b></h4><pre>
       Russ Allbery &lt;<a href="mailto:eagle@eyrie.org">eagle@eyrie.org</a>&gt;

</pre><h4><b>COPYRIGHT</b> <b>AND</b> <b>LICENSE</b></h4><pre>
       Copyright 2007, 2008, 2010, 2012, 2013 The Board of Trustees of the Leland Stanford Junior University

       Permission  is  hereby  granted,  free  of  charge,  to  any person obtaining a copy of this software and
       associated documentation files (the "Software"), to deal in the Software without  restriction,  including
       without  limitation  the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
       copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to  the
       following conditions:

       The  above  copyright  notice  and  this permission notice shall be included in all copies or substantial
       portions of the Software.

       THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR  IMPLIED,  INCLUDING  BUT  NOT
       LIMITED  TO  THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN
       NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY  CLAIM,  DAMAGES  OR  OTHER  LIABILITY,
       WHETHER  IN  AN  ACTION  OF  CONTRACT,  TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE
       SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <u><a href="../man8/krb5-sync.8.html">krb5-sync</a></u>(8)

       The    current    version    of    this    program    is    available    from    its    web    page    at
       &lt;<a href="http://www.eyrie.org/~eagle/software/krb5-sync/">http://www.eyrie.org/~eagle/software/krb5-sync/</a>&gt;.

3.1                                                2015-08-19                               <u><a href="../man8/KRB5-SYNC-BACKEND.8.html">KRB5-SYNC-BACKEND</a></u>(8)
</pre>
 </div>
</div></section>
</div>
</body>
</html>