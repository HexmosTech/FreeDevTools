<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>vfs_crossrename - server side rename files across filesystem boundaries</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/samba">samba_4.22.3+dfsg-4ubuntu1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       vfs_crossrename - server side rename files across filesystem boundaries

</pre><h4><b>SYNOPSIS</b></h4><pre>

       vfs objects = crossrename

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This VFS module is part of the <b><a href="../man7/samba.7.html">samba</a></b>(7) suite.

       The vfs_crossrename VFS module allows server side rename operations even if source and target are on
       different physical devices. A "move" in Explorer is usually a rename operation if it is inside of a
       single share or device. Usually such a rename operation returns NT_STATUS_NOT_SAME_DEVICE and the client
       has to move the file by manual copy and delete operations. If the rename by copy is done by the server
       this can be much more efficient. vfs_crossrename tries to do this server-side cross-device rename
       operation.

       There are however limitations that this module currently does not solve:

           The ACLs of files are not preserved,

           meta data in EAs are not preserved,

           renames of whole subdirectories cannot be done recursively, in that case we still return
           STATUS_NOT_SAME_DEVICE and let the client decide what to do,

           rename operations of huge files can cause hangs on the client because clients expect a rename
           operation to return fast.

       This module is not fully stackable. It can be combined with other modules, but should be the last module
       in the vfs objects list. It directly access the files in the OS filesystem.

</pre><h4><b>OPTIONS</b></h4><pre>
       crossrename:sizelimit = BYTES
           server-side cross-device-renames are only done for files if the filesize is not larger than the
           defined size in MiB to prevent timeouts. The default sizelimit is 20 (MiB)

</pre><h4><b>EXAMPLES</b></h4><pre>
       To add server-side cross-device renames inside of a share for all files sized up to 50MB:

                   <u>[testshare]</u>
                <b>path</b> <b>=</b> <b>/data/mounts</b>
                <b>vfs</b> <b>objects</b> <b>=</b> <b>crossrename</b>
                <b>crossrename:sizelimit</b> <b>=</b> <b>50</b>

</pre><h4><b>VERSION</b></h4><pre>
       This man page is part of version 4.22.3-Ubuntu-4.22.3+dfsg-4ubuntu1 of the Samba suite.

</pre><h4><b>AUTHOR</b></h4><pre>
       The original Samba software and related utilities were created by Andrew Tridgell. Samba is now developed
       by the Samba Team as an Open Source project similar to the way the Linux kernel is developed.

Samba 4.22.3-Ubuntu-4.22.3+dfs                     07/21/2025                                 <u><a href="../man8/VFS_CROSSRENAME.8.html">VFS_CROSSRENAME</a></u>(8)
</pre>
 </div>
</div></section>
</div>
</body>
</html>