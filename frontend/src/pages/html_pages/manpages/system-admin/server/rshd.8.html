<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>rshd — remote shell server</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/jammy/+package/rsh-server">rsh-server_0.17-22_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       rshd — remote shell server

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>rshd</b> [<b>-an</b>]

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The  <b>rshd</b>  server  is  the server for the <u><a href="../man3/rcmd.3.html">rcmd</a></u>(3) routine and, consequently, for the <u><a href="../man1/rsh.1.html">rsh</a></u>(1) program.  The
       server provides remote execution facilities with authentication based on  privileged  port  numbers  from
       trusted hosts.

       The  <b>rshd</b> server listens for service requests at the port indicated in the ``cmd'' service specification;
       see <u><a href="../man5/services.5.html">services</a></u>(5).  When a service request is received the following protocol is initiated:

       1.   The server checks the client's source port.  If the port is not in the range  512-1023,  the  server
            aborts the connection.

       2.   The  server  reads  characters  from  the  socket up to a null (`\0') byte.  The resultant string is
            interpreted as an ASCII number, base 10.

       3.   If the number received in step 2 is non-zero, it is interpreted as the port number  of  a  secondary
            stream  to be used for the <u>stderr</u>.  A second connection is then created to the specified port on the
            client's machine.  The source port of this second connection is also in the range 512-1023.

       4.   The server checks the client's  source  address  and  requests  the  corresponding  host  name  (see
            <u><a href="../man3/gethostbyaddr.3.html">gethostbyaddr</a></u>(3),  <u><a href="../man5/hosts.5.html">hosts</a></u>(5)  and  <u><a href="../man8/named.8.html">named</a></u>(8)).  If the hostname cannot be determined, the dot-notation
            representation of the host address is used.  If the hostname is in the same  domain  as  the  server
            (according  to  the  last  two  components  of  the  domain name), or if the <b>-a</b> option is given, the
            addresses for the hostname are requested, verifying  that  the  name  and  address  correspond.   If
            address verification fails, the connection is aborted with the message, ``Host address mismatch.''

       5.   A  null terminated user name of at most 16 characters is retrieved on the initial socket.  This user
            name is interpreted as the user identity on the <u>client</u>'s machine.

       6.   A null terminated user name of at most 16 characters is retrieved on the initial socket.  This  user
            name is interpreted as a user identity to use on the <b>server</b>'s machine.

       7.   A null terminated command to be passed to a shell is retrieved on the initial socket.  The length of
            the command is limited by the upper bound on the size of the system's argument list.

       8.   <b>Rshd</b>  then  validates  the user using <b>PAM</b>, which uses the file <u>/etc/hosts.equiv</u> and the <u>.rhosts</u> file
            found in the user's home directory.  Due to the way the protocol was designed, it is not possible to
            exchange information other than those specified here for authentication.   Thus  PAM  authentication
            modules such as pam_unix should not be used with this service.

            Also  note  that  the  design  of  the  <u>.rhosts</u>  system is COMPLETELY INSECURE except on a carefully
            firewalled private network. Under all other circumstances, <b>rshd</b> should be disabled entirely.

       9.   A null byte is returned on the initial socket and the command line is passed  to  the  normal  login
            shell of the user.  The shell inherits the network connections established by <b>rshd</b>.

       Transport-level  keepalive  messages  are  enabled unless the <b>-n</b> option is present.  The use of keepalive
       messages allows sessions to be timed out if the client crashes or becomes unreachable.

</pre><h4><b>DIAGNOSTICS</b></h4><pre>
       Except for the last one listed below, all diagnostic messages are returned on the initial  socket,  after
       which  any  network connections are closed.  An error is indicated by a leading byte with a value of 1 (0
       is returned in step 9 above upon successful completion of all the steps prior to  the  execution  of  the
       login shell).

       <b>Locuser</b> <b>too</b> <b>long.</b>
               The name of the user on the client's machine is longer than 16 characters.

       <b>Ruser</b> <b>too</b> <b>long.</b>
               The name of the user on the remote machine is longer than 16 characters.

       <b>Command</b> <b>too</b> <b>long</b>.
               The command line passed exceeds the size of the argument list (as configured into the system).

       <b>Remote</b> <b>directory.</b>
               The <u>chdir</u> command to the home directory failed.

       <b>Permission</b> <b>denied.</b>
               The  authentication procedure described above failed, or the user requested did not exist. (These
               conditions are intentionally conflated.)

       <b>Can't</b> <b>make</b> <b>pipe.</b>
               The pipe needed for the <u>stderr</u>, wasn't created.

       <b>Can't</b> <b>fork;</b> <b>try</b> <b>again.</b>
               A <u>fork</u> by the server failed.

       <b>&lt;shellname&gt;:</b> <b>...</b>
               The user's login shell could not  be  started.   This  message  is  returned  on  the  connection
               associated with the <u>stderr</u>, and is not preceded by a flag byte.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <u><a href="../man1/rsh.1.html">rsh</a></u>(1), <u><a href="../man3/rcmd.3.html">rcmd</a></u>(3), <u><a href="../man8/pam.8.html">pam</a></u>(8)

</pre><h4><b>BUGS</b></h4><pre>
       The  authentication  procedure  used here assumes the integrity of each client machine and the connecting
       medium.  This is insecure, but is useful in an ``open'' environment.

       A facility to allow all data exchanges to be encrypted should be present.

       A more extensible protocol (such as Telnet) should be used.

Linux NetKit (0.17)                              April 20, 1991                                          <u><a href="../man8/RSHD.8.html">RSHD</a></u>(8)
</pre>
 </div>
</div></section>
</div>
</body>
</html>