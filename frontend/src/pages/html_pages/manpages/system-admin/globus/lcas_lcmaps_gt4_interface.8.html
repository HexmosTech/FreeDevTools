<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>lcas_lcmaps_gt_interface - A Globus GSI-AuthZ plug-in to run LCAS and LCMAPS</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/lcas-lcmaps-gt4-interface">lcas-lcmaps-gt4-interface_0.3.1-1build2_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       lcas_lcmaps_gt_interface - A Globus GSI-AuthZ plug-in to run LCAS and LCMAPS

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>lcas_lcmaps_gt_interface.so</b>

       <b>lcas_lcmaps_gt4_interface.so</b>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This  is  a  plug-in  to be loaded from a GSI-AuthZ capable Globus service. The feature was introduced in
       Globus GT4 and is available for GT5 and GT6. The purpose of this call-out is to authorize a user  by  op‐
       tionally running the LCAS framework and subsequently running the LCMAPS framework to map the user creden‐
       tials  to  a Unix account. Both LCAS and LCMAPS are plug-in frameworks, where the plug-ins to do the real
       work.

       Some of these plug-ins are capable of imposing a certain policy on the user credentials, others are capa‐
       ble of off-loading the decision to a centralized service to make the decision or even provide an  account
       mapping in the process.

       This  plug-in  is dynamically loaded during each interaction that requires an account mapping in the GSI-
       AuthZ interface of a Globus service. It has no configuration file for itself, it is configured via  envi‐
       ronment variables and the LCAS and LCMAPS configuration files. It can be enabled for use in the GSI-AuthZ
       interface  using  the <u>gsi-authz.conf</u> file, by configuring it to call the function <u>lcmaps_callout()</u>, which
       can be done using <b><a href="../man8/gt4-interface-install.8.html">gt4-interface-install</a></b>(8).

</pre><h4><b>ENVIRONMENT</b> <b>VARIABLES</b></h4><pre>
       <b>LLGT_LOG_FILE</b>
              When this variable is set and it can be opened as file, log output will go to the given  file  in‐
              stead  of  to syslog. When either $LCAS_LOG_FILE or $LCMAPS_LOG_FILE is unset, it will also be set
              to this same file.

       <b>LLGT_LOG_FACILITY</b>
              Change the default logging facility with the $LLGT_LOG_FACILITY environment variable. Use the name
              of (standard syslog) facility names. Example: LOG_DAEMON, LOG_LOCAL1, etc.

       <b>LLGT_LOG_IDENT</b>
              The $LLGT_LOG_IDENT can (optionally) be set as the syslog ident value. This will be the  identify‐
              ing string in syslog for the current process. Not using this option will let syslog (or one of the
              GT  services)  to  set  these  options.  By default the syslog ident will be set to the executable
              name.

       <b>LLGT_RUN_LCAS</b>
              Set the environment variable $LLGT_RUN_LCAS to "no", "disabled" or "disable" to avoid LCAS to  run
              prior to the LCMAPS.

              There is a matching ./configure option "--enable-lcas" which can be used to change the default be‐
              haviour  to  run LCAS or not. The $LLGT_RUN_LCAS environment variable can still influence the LCAS
              run.

       <b>LLGT_LIFT_PRIVILEGED_PROTECTION</b>
              Normally the callout, after LCMAPS has finished, checks whether it is (still)  running  with  root
              privileges  (uid,  euid,  gid or egid) and fails if that is the case. This is to prevent erroneous
              configurations to silently result in a root-account mapping in services that do not have their own
              checks for this.

              When the environment variable $LLGT_LIFT_PRIVILEGED_PROTECTION is set,  this  check  is  disabled.
              This is NEEDED for services that:

              1.) don't user switch, and run as root.

              2.)  services  that  expect only a username to be returned and perform the user switch themselves,
              e.g. the Globus GSI-OpenSSHd.

       <b>LLGT_CACHE_CALLOUT</b>
              Set the environment variable $LLGT_CACHE_CALLOUT to  "no",  "disabled"  or  "disable"  to  disable
              reusing  the  result  of the `localname' callout for the `userok' callout. This results in calling
              the LCAS/LCMAPS authorization twice for e.g. gsisshd.

       <b>LLGT_DLCLOSE_LCMAPS</b>
              Set the environment variable $LLGT_DLCLOSE_LCMAPS to "no",  "disabled"  or  "disable"  to  prevent
              calling <u>dlclose()</u> on the LCMAPS library. This might be needed as a workaround on RH5-based systems
              in  an  installation  for  gsisshd,  when  the  use  of  PAM  is  enabled  ("UsePAM  Yes"  in  the
              <u>/etc/gsissh/sshd_config</u>).  The underlying bug is a combination between the OpenSSL, VOMS  and  PAM
              libraries, which can trigger a segfault when VOMS is initialized twice.

       <b>LLGT_DLCLOSE_LCAS</b>
              Set  the environment variable $LLGT_DLCLOSE_LCAS to "no", "disabled" or "disable" to prevent call‐
              ing <u>dlclose()</u> on the LCAS library. This might be needed as a workaround on RH5-based systems.  The
              underlying  bug is a combination between the OpenSSL, VOMS and Globus libraries, which can trigger
              a segfault when VOMS is initialized twice, which can happen when LCAS is using a VOMS based  plug‐
              in.  Normally should not be needed as LCAS is now dlclosed and terminated after LCMAPS.

       <b>LLGT_NO_CHANGE_USER</b> <u>(deprecated)</u>
              Deprecated  $LLGT_NO_CHANGE_USER in favour of $LLGT_LIFT_PRIVILEGED_PROTECTION.  (Deprecation does
              not mean non-functional anymore)

       <b>LLGT4_NO_CHANGE_USER</b> <u>(deprecated)</u>
              Deprecated $LLGT4_NO_CHANGE_USER in  favour  of  $LLGT_LIFT_PRIVILEGED_PROTECTION.   (Depreciation
              does not mean non-functional anymore)

       <b>LLGT_VOMS_DISABLE_CREDENTIAL_CHECK</b>
              The VOMS credentials are verified by the LCMAPS framework before further processing is done in the
              plug-ins.  The  LCMAPS framework has an API to enable or disable the verification of the VOMS cre‐
              dentials and this option will <b>disable</b> the verification of the VOMS credentials. A  vanilla  LCMAPS
              build will verify the VOMS credentials by default.

       <b>LLGT_VOMS_ENABLE_CREDENTIAL_CHECK</b>
              Similar  to the $LLGT_VOMS_DISABLE_CREDENTIAL_CHECK environment variable, this setting will <b>enable</b>
              the verification of the VOMS credentials, overriding the LCMAPS default setting to have the  veri‐
              fication  of  VOMS credentials to be disabled. A vanilla LCMAPS build will verify the VOMS creden‐
              tials by default, the OSG build has is disabled by default.

       <b>LLGT_LCAS_LIBDIR</b>
              Support for an alternative LCAS_LIBDIR as a run-time setting by exporting such as  $LLGT_LCAS_LIB‐
              DIR="/usr/lib/x86_64-linux-gnu/liblcas.so"

       <b>LLGT_LCAS_MODULEDIR_SFX</b>
              When  set, used as suffix instead of the default /lcas when setting the $LCAS_MODULES_DIR variable
              based on the $LLGT_LCAS_LIBDIR variable. Default /lcas. <b>NOTE</b>: current versions of LCAS do not  yet
              use the $LCAS_MODULES_DIR variable.

       <b>LLGT_LCMAPS_LIBDIR</b>
              Support  for  an  alternative  LCMAPS_LIBDIR  as  a  run-time  setting  by  exporting such as $LL‐
              GT_LCMAPS_LIBDIR="/usr/lib/x86_64-linux-gnu/liblcmaps.so". Must be an absolute path.  Setting this
              variable will also set the LCMAPS variable $LCMAPS_MODULES_DIR to the given libdir followed by ei‐
              ther the default /lcmaps or the value of $LLGT_LCMAPS_MODULEDIR_SFX.

       <b>LLGT_LCMAPS_MODULEDIR_SFX</b>
              When set, used as suffix instead of the default /lcmaps when setting the $LCMAPS_MODULES_DIR vari‐
              able based on the $LLGT_LCMAPS_LIBDIR variable. Default /lcmaps.

       <b>LLGT_ENABLE_DEBUG</b>
              If the $LLGT_ENABLE_DEBUG environment variable is set, then the debugging message logged at  level
              LOG_DEBUG  are  passed to the log. The scope of this setting is only within the LCAS-LCMAPS-GT-in‐
              terface

</pre><h4><b>INTERNAL</b> <b>ENVIRONMENT</b> <b>VARIABLES</b></h4><pre>
       <b>GATEKEEPER_JM_ID</b>
              An environment variable that is internally set to uniquely identify this gatekeeper  and  the  job
              manager.

       <b>JOB_REPOSITORY_ID</b>
              Similar to the $GATEKEEPER_JM_ID value, but its purpose is for the LCMAPS job repository plug-in.

</pre><h4><b>LCAS</b> <b>ENVIRONMENT</b> <b>VARIABLES</b></h4><pre>
       The following list of LCAS environment variables are handled specially by the interface.

       <b>LCAS_MODULES_DIR</b>
              Default directory for LCAS to look for in plug-ins (not yet supported by LCAS).  Will be set based
              on the values of $LLGT_LCAS_LIBDIR and $LLGT_LCAS_MODULEDIR_SFX or their defaults.

       <b>LCAS_LOG_FILE</b>
              When  set,  LCAS  will  log  there  instead  of  syslog. When unset, it will get the value of $LL‐
              GT_LOG_FILE when that one is set. When compiled  with  LCAS_LCMAPS_FORCE_LOG_TO_FILE  defined,  it
              will get set to /var/log/gt_lcas_lcmaps.log.

       <b>LCAS_DEBUG_LEVEL</b>
              LCAS log level. Default: 3.

       <b>LCAS_DB_FILE</b>
              Location of the LCAS configuration file. Default for the interface: /etc/lcas/lcas.db

</pre><h4><b>LCMAPS</b> <b>ENVIRONMENT</b> <b>VARIABLES</b></h4><pre>
       The following list of LCMAPS environment variables are handled specially by the interface.

       <b>LCMAPS_MODULES_DIR</b>
              Default  directory  for  LCMAPS  to  look for in plug-ins. Will be set based on the values of $LL‐
              GT_LCMAPS_LIBDIR and $LLGT_LCMAPS_MODULEDIR_SFX or their defaults.

       <b>LCMAPS_LOG_FILE</b>
              When set, LCMAPS will log there instead of syslog. When unset, it  will  get  the  value  of  $LL‐
              GT_LOG_FILE  when  that  one  is set. When compiled with LCAS_LCMAPS_FORCE_LOG_TO_FILE defined, it
              will get set to /var/log/gt_lcas_lcmaps.log.

       <b>LCMAPS_DEBUG_LEVEL</b>
              For LCMAPS 1.5.0 (and newer) the value "5" corresponds to syslog  LOG_DEBUG,  "4"  corresponds  to
              LOG_INFO, "3" to LOG_NOTICE and so on. The LCMAPS default is to log up to LOG_INFO.

       <b>LCMAPS_DB_FILE</b>
              Location of the LCMAPS configuration file. Default for the interface: /etc/lcmaps/lcmaps.db

</pre><h4><b>RETURN</b> <b>VALUES</b></h4><pre>
       <b>True</b>   The user is authorized and a local Unix account was procured.

       <b>False</b>  No mapping was possible.

</pre><h4><b>NOTES</b></h4><pre>
       From  version  0.3.1 onwards, the interface supports the 'sharing' service: it then expects an additional
       argument, (a PEM string) containing the credential on which the mapping should be based.

       From version 0.3.0 onwards, the interface tries to forward the requested username to LCMAPS (for  version
       1.6.0 and up). The mapping plugins can use this to support multiple username entries in the grid-mapfile,
       or enforcing pool account mappings to a specific pool account.

</pre><h4><b>BUGS</b></h4><pre>
       Please   report   any   errors  to  the  Nikhef  Grid  Middleware  Security  Team  &lt;grid-mw-security-sup‐
       <a href="mailto:port@nikhef.nl">port@nikhef.nl</a>&gt;.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man8/gt4-interface-install.8.html">gt4-interface-install</a></b>(8), <b><a href="../man5/lcas.db.5.html">lcas.db</a></b>(5), <b><a href="../man3/lcas.3.html">lcas</a></b>(3), <b><a href="../man5/lcmaps.db.5.html">lcmaps.db</a></b>(5), <b><a href="../man3/lcmaps.3.html">lcmaps</a></b>(3).

</pre><h4><b>AUTHORS</b></h4><pre>
       LCMAPS and the LCMAPS plug-ins were  written  by  the  Grid  Middleware  Security  Team  &lt;grid-mw-securi‐
       <a href="mailto:ty@nikhef.nl">ty@nikhef.nl</a>&gt;.

lcas-lcmaps-gt4-interface 0.3.1                 February 11, 2015                    <u><a href="../man8/lcas_lcmaps_gt_interface.8.html">lcas_lcmaps_gt_interface</a></u>(8)
</pre>
 </div>
</div></section>
</div>
</body>
</html>