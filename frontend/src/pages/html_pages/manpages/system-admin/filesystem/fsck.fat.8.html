<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>fsck.fat - check and repair MS-DOS FAT filesystems</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/dosfstools">dosfstools_4.2-1.2_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       fsck.fat - check and repair MS-DOS FAT filesystems

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>fsck.fat</b> [<u>OPTIONS</u>] <u>DEVICE</u>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>fsck.fat</b> verifies the consistency of MS-DOS filesystems and optionally tries to repair them.

       The following filesystem problems can be corrected (in this order):

       •   FAT contains invalid cluster numbers.  Cluster is changed to EOF.

       •   File's cluster chain contains a loop.  The loop is broken.

       •   Bad clusters (read errors).  The clusters are marked bad and they are removed from files owning them.
           This check is optional.

       •   Directories with a large number of bad entries (probably corrupt).  The directory can be deleted.

       •   Files . and .. are non-directories.  They can be deleted or renamed.

       •   Directories . and .. in root directory.  They are deleted.

       •   Bad filenames.  They can be renamed.

       •   Duplicate directory entries.  They can be deleted or renamed.

       •   Directories with non-zero size field.  Size is set to zero.

       •   Directory . does not point to parent directory.  The start pointer is adjusted.

       •   Directory .. does not point to parent of parent directory.  The start pointer is adjusted.

       •   .  and  ..  are  not  the two first entries in a non-root directory.  The entries are created, moving
           occupied slots if necessary.

       •   Start cluster number of a file is invalid.  The file is truncated.

       •   File contains bad or free clusters.  The file is truncated.

       •   File's cluster chain is longer than indicated by the size fields.  The file is truncated.

       •   Two or more files share the same cluster(s).  All but one of the files are truncated.   If  the  file
           being  truncated  is  a  directory file that has already been read, the filesystem check is restarted
           after truncation.

       •   File's cluster chain is shorter than indicated by the size fields.  The file is truncated.

       •   Volume label in root directory or label in boot sector is invalid.  Invalid labels are removed.

       •   Volume label in root directory and label in boot  sector  are  different.   Volume  label  from  root
           directory is copied to boot sector.

       •   Clusters are marked as used but are not owned by a file.  They are marked as free.

       Additionally, the following problems are detected, but not repaired:

       •   Invalid parameters in boot sector

       When  <b>fsck.fat</b> checks a filesystem, it accumulates all changes in memory and performs them only after all
       checks are complete.  This can be disabled with the <b>-w</b> option.

       Two different variants of the FAT filesystem are supported.  Standard  is  the  FAT12,  FAT16  and  FAT32
       filesystems as defined by Microsoft and widely used on hard disks and removable media like USB sticks and
       SD cards.  The other is the legacy Atari variant used on Atari ST.

       There  are  some  minor  differences  in  Atari  format: Some boot sector fields are interpreted slightly
       different, and the special FAT entries for end-of-file and bad cluster can be  different.   Under  MS-DOS
       0xfff8  is  used  for EOF and Atari employs 0xffff by default, but both systems recognize all values from
       0xfff8–0xffff as end-of-file.   MS-DOS  uses  only  0xfff7  for  bad  clusters,  where  on  Atari  values
       0xfff0–0xfff7 are for this purpose (but the standard value is still 0xfff7).

</pre><h4><b>OPTIONS</b></h4><pre>
       <b>-a</b>  Automatically repair the filesystem.  No user intervention is necessary.  Whenever there is more than
           one method to solve a problem, the least destructive approach is used.

       <b>-A</b>  Select using the Atari variation of the FAT filesystem if that isn't active already, otherwise select
           standard FAT filesystem.  This is selected by default if <b>mkfs.fat</b> is run on 68k Atari Linux.

       <b>-b</b>  Make read-only boot sector check.

       <b>-c</b> <u>PAGE</u>
           Use DOS codepage <u>PAGE</u> to decode short file names.  By default codepage 850 is used.

       <b>-d</b> <u>PATH</u>
           Delete  the  specified  file.   If more than one file with that name exist, the first one is deleted.
           This option can be given more than once.

       <b>-f</b>  Salvage unused cluster chains to files.  By default, unused clusters are added to the free disk space
           except in auto mode (<b>-a</b>).

       <b>-F</b> <u>NUM</u>
           Specify FAT table <u>NUM</u> for filesystem access.  By default value  <u>0</u>  is  assumed  and  then  the  first
           uncorrupted  FAT  table  is  chosen.   Uncorrupted  means that FAT table has valid first cluster.  If
           default value <u>0</u> is used and all FAT tables are corrupted then <b>fsck.fat</b> gives up and does not  try  to
           repair  FAT  filesystem.   If  non-zero  <u>NUM</u>  value is specified then <b>fsck.fat</b> uses FAT table <u>NUM</u> for
           repairing FAT filesystem.  If FAT table <u>NUM</u> has corrupted first cluster then <b>fsck.fat</b> will repair it.
           In any case, if FAT filesystem has more FAT tables then repaired  content  of  chosen  FAT  table  is
           copied  to  other FAT tables.  To repair corrupted first cluster it is required to call <b>fsck.fat</b> with
           non-zero <u>NUM</u> value.

       <b>-l</b>  List path names of files being processed.

       <b>-n</b>  No-operation mode: non-interactively check for errors, but don't write anything to the filesystem.

       <b>-p</b>  Same as <b>-a</b>, for compatibility with other *fsck.

       <b>-r</b>  Interactively repair the filesystem.  The user is asked for advice whenever there is  more  than  one
           approach  to  fix  an  inconsistency.   This  is the default mode and the option is only retained for
           backwards compatibility.

       <b>-S</b>  Consider short (8.3) file names with spaces in the middle to be invalid, like  previous  versions  of
           this  program  did.  While such file names are not forbidden by the FAT specification, and were never
           treated as errors by Microsoft file system checking tools, many DOS programs  are  unable  to  handle
           files with such names.  Using this option can make them accessible to these programs.

           Short file names which <u>start</u> with a space are considered invalid regardless of this option's setting.

           Previous  versions  of  this program exceptionally treated <u>EA</u> <u>DATA.</u> <u>SF</u> and <u>WP</u> <u>ROOT.</u> <u>SF</u> as valid short
           names; using this option does not preserve that exception.

       <b>-t</b>  Mark unreadable clusters as bad.

       <b>-u</b> <u>PATH</u>
           Try to undelete the specified file.  <b>fsck.fat</b> tries to allocate a  chain  of  contiguous  unallocated
           clusters  beginning with the start cluster of the undeleted file.  This option can be given more than
           once.

       <b>-U</b>  Consider lowercase volume and boot label as invalid and allow only uppercase characters.  Such labels
           are forbidden by the FAT specification, but they are widely used by Linux tools.  Moreover MS-DOS and
           Windows systems do not have problems to read them.  Therefore volume and boot labels  with  lowercase
           characters are by default permitted.

       <b>-v</b>  Verbose mode.  Generates slightly more output.

       <b>-V</b>  Perform  a verification pass.  The filesystem check is repeated after the first run.  The second pass
           should never report any fixable errors.  It may take considerably longer than the first pass, because
           the first pass may have generated long list of modifications that have to be scanned  for  each  disk
           read.

       <b>--variant</b> <u>TYPE</u>
           Create a filesystem of variant <u>TYPE</u>.  Acceptable values are <u>standard</u> and <u>atari</u> (in any combination of
           upper/lower case).  See above under DESCRIPTION for the differences.

       <b>-w</b>  Write changes to disk immediately.

       <b>-y</b>  Same as <b>-a</b> (automatically repair filesystem) for compatibility with other fsck tools.

       <b>--help</b>
           Display help message describing usage and options then exit.

</pre><h4><b>EXIT</b> <b>STATUS</b></h4><pre>
       0   No recoverable errors have been detected.

       1   Recoverable errors have been detected or <b>fsck.fat</b> has discovered an internal inconsistency.

       2   Usage error.  <b>fsck.fat</b> did not access the filesystem.

</pre><h4><b>FILES</b></h4><pre>
       <u>fsck0000.rec</u>, <u>fsck0001.rec</u>, ...
           When  recovering  from  a  corrupted  filesystem,  <b>fsck.fat</b>  dumps  recovered  data  into files named
           <u>fsckNNNN.rec</u> in the top level directory of the filesystem.

</pre><h4><b>BUGS</b></h4><pre>
       •   Does not remove entirely empty directories.

       •   Should give more diagnostic messages.

       •   Undeleting files should use a more sophisticated algorithm.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man8/fatlabel.8.html">fatlabel</a></b>(8), <b><a href="../man8/mkfs.fat.8.html">mkfs.fat</a></b>(8)

</pre><h4><b>HOMEPAGE</b></h4><pre>
       The home for the <b>dosfstools</b> project is its GitHub project page.

</pre><h4><b>AUTHORS</b></h4><pre>
       <b>dosfstools</b> were written by Werner Almesberger, Roman Hodek, and others.  Current maintainers are  Andreas
       Bombe and Pali Rohár.

dosfstools 4.2                                     2021-01-31                                        <u><a href="../man8/FSCK.FAT.8.html">FSCK.FAT</a></u>(8)
</pre>
 </div>
</div></section>
</div>
</body>
</html>