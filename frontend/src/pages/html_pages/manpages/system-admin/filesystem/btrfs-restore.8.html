<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>btrfs-restore - try to restore files from a damaged filesystem image</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/btrfs-progs">btrfs-progs_6.14-1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       btrfs-restore - try to restore files from a damaged filesystem image

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>btrfs</b> <b>restore</b> [options] &lt;device&gt; &lt;path&gt; | -l &lt;device&gt;

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>btrfs</b>  <b>restore</b>  is  used  to try to salvage files from a damaged filesystem and restore them into <u>path</u> or
       just list the subvolume tree roots. The filesystem image is not modified.

       If  the  filesystem  is  damaged  and  cannot  be  repaired  by  the  other  tools   (<u><a href="../man8/btrfs-check.8.html">btrfs-check</a>(8)</u>   or
       <u><a href="../man8/btrfs-rescue.8.html">btrfs-rescue</a>(8)</u>), <b>btrfs</b> <b>restore</b> could be used to retrieve file data, as far as the metadata are readable.
       The  checks done by restore are less strict and the process is usually able to get far enough to retrieve
       data from the whole filesystem. This comes at a cost that some data might be  incomplete  or  from  older
       versions if they're available.

       There  are  several  options to attempt restoration of various file metadata type.  You can try a dry run
       first to see how well the process goes and use further options to extend the set of restored metadata.

       For images with damaged tree structures, there are several options to point the  process  to  some  spare
       copy.

</pre><h4><b>OPTIONS</b></h4><pre>
       <b>-s|--snapshots</b>
              get also snapshots that are skipped by default

       <b>-x|--xattr</b>
              get extended attributes

       <b>-m|--metadata</b>
              restore owner, mode and times for files and directories

       <b>-S|--symlinks</b>
              restore symbolic links as well as normal files

       <b>-i|--ignore-errors</b>
              ignore errors during restoration and continue

       <b>-o|--overwrite</b>
              overwrite directories/files in <u>path</u>, e.g. for repeated runs

       <b>-t</b> <u>&lt;bytenr&gt;</u>
              use <u>bytenr</u> to read the root tree

       <b>-f</b> <u>&lt;bytenr&gt;</u>
              only restore files that are under specified subvolume root pointed by <u>bytenr</u>

       <b>-u|--super</b> <b>&lt;mirror&gt;</b>
              use given superblock mirror identified by &lt;mirror&gt;, it can be 0,1 or 2

       <b>-r|--root</b> <b>&lt;rootid&gt;</b>
              only restore files that are under a specified subvolume whose objectid is <u>rootid</u>

       <b>-d</b>     find directory

       <b>-l|--list-roots</b>
              list subvolume tree roots, can be used as argument for <u>-r</u>

       <b>-D|--dry-run</b>
              dry run (only list files that would be recovered)

       <b>--path-regex</b> <u>&lt;regex&gt;</u>
              restore only filenames matching a regular expression (<u><a href="../man7/regex.7.html">regex</a>(7)</u>) with a mandatory format

              <b>^/(|home(|/username(|/Desktop(|<a href="file:/.">/.</a>*))))$</b>

              The format is not very comfortable and restores all files in the directories in the whole path, so
              this is not useful for restoring single file in a deep hierarchy.

       <b>-c</b>     ignore case (<u>--path-regex</u> only)

       <b>-v|--verbose</b>
              (deprecated) alias for global <u>-v</u> option

       <b>Global</b> <b>options</b>

       <b>-v|--verbose</b>
              be verbose and print what is being restored

</pre><h4><b>EXIT</b> <b>STATUS</b></h4><pre>
       <b>btrfs</b> <b>restore</b> returns a zero exit status if it succeeds. Non zero is returned in case of failure.

</pre><h4><b>AVAILABILITY</b></h4><pre>
       <b>btrfs</b> is part of btrfs-progs.  Please refer to the documentation at <u>https://btrfs.readthedocs.io</u>.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <u><a href="../man8/btrfs-check.8.html">btrfs-check</a>(8)</u>, <u><a href="../man8/btrfs-rescue.8.html">btrfs-rescue</a>(8)</u>, <u><a href="../man8/mkfs.btrfs.8.html">mkfs.btrfs</a>(8)</u>

6.14                                              Apr 17, 2025                                  <u><a href="../man8/BTRFS-RESTORE.8.html">BTRFS-RESTORE</a></u>(8)
</pre>
 </div>
</div></section>
</div>
</body>
</html>