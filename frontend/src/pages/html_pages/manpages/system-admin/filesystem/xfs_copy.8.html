<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>xfs_copy - copy the contents of an XFS filesystem</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/xfsprogs">xfsprogs_6.13.0-2ubuntu1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       xfs_copy - copy the contents of an XFS filesystem

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>xfs_copy</b> [ <b>-bd</b> ] [ <b>-L</b> <u>log</u> ] <u>source</u> <u>target1</u> [ <u>target2</u> ... ]
       <b>xfs_copy</b> <b>-V</b>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>xfs_copy</b>  copies  an  XFS filesystem to one or more targets in parallel (see <b><a href="../man5/xfs.5.html">xfs</a></b>(5)).  The first (<u>source</u>)
       argument must be the pathname of the  device  or  file  containing  the  XFS  filesystem.  The  remaining
       arguments  specify  one or more <u>target</u> devices or file names. If the pathnames specify devices, a copy of
       the source XFS filesystem is created on each device. The <u>target</u> can also be the name of a  regular  file,
       in  which case an image of the source XFS filesystem is created in that file. If the file does not exist,
       <b>xfs_copy</b> creates the file. The length of  the  resulting  file  is  equal  to  the  size  of  the  source
       filesystem. However, if the file is created on an XFS filesystem, the file consumes roughly the amount of
       space  actually  used  in  the  source filesystem by the filesystem and the XFS log.  The space saving is
       because <b>xfs_copy</b> seeks over free blocks instead of copying them and the XFS  filesystem  supports  sparse
       files efficiently.

       <b>xfs_copy</b>  should  only  be  used  to copy unmounted filesystems, read-only mounted filesystems, or frozen
       filesystems (see <b><a href="../man8/xfs_freeze.8.html">xfs_freeze</a></b>(8)).   Otherwise,  the  generated  filesystem(s)  would  be  inconsistent  or
       corrupt.

       <b>xfs_copy</b>  does  not  alter the source filesystem in any way. Each new (target) filesystem is identical to
       the original filesystem except that new filesystems each have a new unique filesystem identifier  (UUID).
       Therefore, if both the old and new filesystems will be used as separate distinct filesystems, <b>xfs_copy</b> or
       <b><a href="../man8/xfsdump.8.html">xfsdump</a></b>(8)/<b><a href="../man8/xfsrestore.8.html">xfsrestore</a></b>(8)  should  be  used  to  generate  the new filesystem(s) instead of <b><a href="../man1/dd.1.html">dd</a></b>(1) or other
       programs that do block-by-block disk copying.

       <b>xfs_copy</b> uses synchronous writes to ensure that write errors are detected.

       <b>xfs_copy</b> uses <b><a href="../man7/pthreads.7.html">pthreads</a></b>(7) to perform simultaneous  parallel  writes.   <b>xfs_copy</b>  creates  one  additional
       thread for each target to be written.  All threads die if <b>xfs_copy</b> terminates or aborts.

</pre><h4><b>OPTIONS</b></h4><pre>
       <b>-d</b>     Create a duplicate (true clone) filesystem. This should be done only if the new filesystem will be
              used as a replacement for the original filesystem (such as in the case of disk replacement).

       <b>-b</b>     The  buffered  option can be used to ensure direct IO is not attempted to any of the target files.
              This is useful when the filesystem holding the target file does not support direct IO.

       <b>-L</b> <u>log</u> Specifies the location of the <u>log</u> if the default location of <u>/var/tmp/xfs_copy.log.XXXXXX</u>  is  not
              desired.

       <b>-V</b>     Prints the version number and exits.

</pre><h4><b>DIAGNOSTICS</b></h4><pre>
       <b>xfs_copy</b> reports errors to both <b>stderr</b> and in more detailed form to a generated log file whose name is of
       the  form  <u>/var/tmp/xfs_copy.log.XXXXXX</u>  or  a log file specified by the <b>-L</b> option. If <b>xfs_copy</b> detects a
       write error on a target, the copy of that one target is aborted and an error message is  issued  to  both
       stderr  and  the  log  file,  but  the rest of the copies continue. When <b>xfs_copy</b> terminates, all aborted
       targets are reported to both <b>stderr</b> and the log file.

       If all targets abort or if there is an error reading the source filesystem, <b>xfs_copy</b> immediately aborts.

       <b>xfs_copy</b> returns an exit code of 0 if all targets are successfully copied and an exit code of  1  if  any
       target fails.

</pre><h4><b>NOTES</b></h4><pre>
       When  moving  filesystems  from  one disk to another, if the original filesystem is significantly smaller
       than  the  new  filesystem,  and   will   be   made   larger,   we   recommend   that   <b><a href="../man8/mkfs.xfs.8.html">mkfs.xfs</a></b>(8)   and
       <b><a href="../man8/xfsdump.8.html">xfsdump</a></b>(8)/<b><a href="../man8/xfsrestore.8.html">xfsrestore</a></b>(8)  be  used  instead  of  using <b>xfs_copy</b> and <b><a href="../man8/xfs_growfs.8.html">xfs_growfs</a></b>(8).  The filesystem layout
       resulting  from  using  <b>xfs_copy</b>/<b>xfs_growfs</b>  is  almost  always  worse   than   the   result   of   using
       <b>mkfs.xfs</b>/<b>xfsdump</b>/<b>xfsrestore</b>  but in the case of small filesystems, the differences can have a significant
       performance impact. This is due to the way <b><a href="../man8/xfs_growfs.8.html">xfs_growfs</a></b>(8)  works,  and  not  due  to  any  shortcoming  in
       <b>xfs_copy</b> itself.

</pre><h4><b>CAVEATS</b></h4><pre>
       <b>xfs_copy</b>  does  not  copy  XFS filesystems that have a real-time section or XFS filesystems with external
       logs. In both cases, <b>xfs_copy</b> aborts with an error message.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man8/mkfs.xfs.8.html">mkfs.xfs</a></b>(8), <b><a href="../man8/xfsdump.8.html">xfsdump</a></b>(8), <b><a href="../man8/xfsrestore.8.html">xfsrestore</a></b>(8), <b><a href="../man8/xfs_freeze.8.html">xfs_freeze</a></b>(8), <b><a href="../man8/xfs_growfs.8.html">xfs_growfs</a></b>(8), <b><a href="../man5/xfs.5.html">xfs</a></b>(5).

                                                                                                     <u><a href="../man8/xfs_copy.8.html">xfs_copy</a></u>(8)
</pre>
 </div>
</div></section>
</div>
</body>
</html>