<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>btrfstune - tune various filesystem parameters</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/btrfs-progs">btrfs-progs_6.14-1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       btrfstune - tune various filesystem parameters

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>btrfstune</b> [options] &lt;device&gt; [&lt;device&gt;...]

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>btrfstune</b>  can  be  used to enable, disable, or set various filesystem parameters. The filesystem must be
       unmounted.

       The common use case is to enable features that were not enabled at mkfs time.  Please make sure that  you
       have  kernel  support  for  the features.  You can find a complete list of features and kernel version of
       their introduction at <u>Feature</u> <u>by</u> <u>version</u> page.  Also, the manual page <u><a href="../man8/mkfs.btrfs.8.html">mkfs.btrfs</a>(8)</u> contains more details
       about the features.

       Some of the features could be also enabled on a mounted filesystem by other means.  Please refer  to  the
       <u>FILESYSTEM</u> <u>FEATURES</u> in <u><a href="../man5/btrfs.5.html">btrfs</a>(5)</u>.

</pre><h4><b>OPTIONS</b></h4><pre>
       <b>--convert-to-block-group-tree</b>
              (since kernel 6.1)

              Convert  portions  of  extent  tree  that tracks block groups to a separate block group tree. This
              greatly reduces mount time. Can be also enabled at mkfs time.

       <b>--convert-from-block-group-tree</b>
              (since kernel 6.1)

              Convert block groups tracked in standalone block  group  tree  back  to  extent  tree  and  remove
              <u>block-group-tree</u> feature bit from the filesystem.

       <b>--convert-to-free-space-tree</b>
              (since kernel 4.5)

              Convert to free-space-tree feature (v2 of space cache).

       <b>--enable-simple-quota</b>
              (since kernel 6.7)

              Enable  simple  quota  accounting  (<u>squota</u> mkfs feature). This is an alternative to qgroups with a
              smaller performance impact but no notion of shared vs. exclusive usage.

       <b>--remove-simple-quota</b>
              Remove simple quota accounting related structures.

       <b>-f</b>     Allow dangerous changes, e.g. clear the seeding flag or change fsid.  Make sure that you are aware
              of the dangers.

       <b>-m</b>     (since kernel: 5.0)

              change fsid stored as <u>metadata_uuid</u> to a randomly generated UUID, see also <u>-U</u>

       <b>-M</b> <u>&lt;UUID&gt;</u>
              (since kernel: 5.0)

              change fsid stored as <u>metadata_uuid</u> to a given UUID, see also <u>-U</u>

              The metadata_uuid is stored only in the superblock and is a backward incompatible change. The fsid
              in metadata blocks remains  unchanged  and  is  not  overwritten,  thus  the  whole  operation  is
              significantly faster than <u>-U</u>.

              The  new  metadata_uuid  can  be  used for mount by UUID and is also used to identify devices of a
              multi-device filesystem.

       <b>-n</b>     (since kernel: 3.14)

              Enable no-holes feature (more efficient representation of file holes),  enabled  by  mkfs  feature
              <u>no-holes</u>.

       <b>-r</b>     (since kernel: 3.7)

              Enable  extended  inode  refs  (hardlink  limit per file in a directory is 65536), enabled by mkfs
              feature <u>extref</u>.

       <b>-S</b> <u>&lt;0|1&gt;</u>
              Enable seeding on a given device. Value 1 will enable seeding,  0  will  disable  it.   A  seeding
              filesystem is forced to be mounted read-only. A new device can be added to the filesystem and will
              capture  all  writes  keeping  the  seeding  device  intact.   See  also section <u>SEEDING</u> <u>DEVICE</u> in
              <u><a href="../man5/btrfs.5.html">btrfs</a>(5)</u>.

              <b>WARNING:</b>
                 Clearing the seeding flag on a device may be dangerous.   If  a  previously-seeding  device  is
                 changed,  all  filesystems  that  used that device will become unmountable. Setting the seeding
                 flag back will not fix that.

                 A valid usecase is <u>seeding</u> <u>device</u>  <u>as</u>  <u>a</u>  <u>base</u>  <u>image</u>.  Clear  the  seeding  flag,  update  the
                 filesystem and make it seeding again, provided that it's OK to throw away all filesystems built
                 on top of the previous base.

       <b>-u</b>     Change fsid to a randomly generated UUID or continue previous fsid change operation in case it was
              interrupted.

       <b>-U</b> <u>&lt;UUID&gt;</u>
              Change fsid to <u>UUID</u> in all metadata blocks.

              The <u>UUID</u> should be a 36 bytes string in <u><a href="../man3/printf.3.html">printf</a>(3)</u> format <b>%08x-%04x-%04x-%04x-%012x</b>.  If there is a
              previous  unfinished  fsid change, it will continue only if the <u>UUID</u> matches the unfinished one or
              if you use the option <u>-u</u>.

              All metadata blocks are rewritten, this may take some time, but the final filesystem compatibility
              is unaffected, unlike <u>-M</u>.

              <b>WARNING:</b>
                 Cancelling or interrupting a  UUID  change  operation  will  make  the  filesystem  temporarily
                 unmountable.  To fix it, rerun <b>btrfstune</b> <b>-u</b> and let it complete.

       <b>-x</b>     (since kernel: 3.10)

              Enable  skinny  metadata  extent  refs (more efficient representation of extents), enabled by mkfs
              feature <u>skinny-metadata</u>.

              All newly created extents will use  the  new  representation.  To  completely  switch  the  entire
              filesystem, run a full balance of the metadata. Please refer to <u><a href="../man8/btrfs-balance.8.html">btrfs-balance</a>(8)</u>.

       <b>--version</b>
              Print the <b>btrfstune</b> version, builtin features and exit.

</pre><h4><b>EXIT</b> <b>STATUS</b></h4><pre>
       <b>btrfstune</b> returns 0 if no error happened, 1 otherwise.

</pre><h4><b>COMPATIBILITY</b> <b>NOTE</b></h4><pre>
       This  deprecated tool exists for historical reasons but is still in use today.  Its functionality will be
       merged to the main tool, at which time <b>btrfstune</b> will be declared obsolete and scheduled for removal.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <u><a href="../man5/btrfs.5.html">btrfs</a>(5)</u>, <u><a href="../man8/btrfs-balance.8.html">btrfs-balance</a>(8)</u>, <u><a href="../man8/mkfs.btrfs.8.html">mkfs.btrfs</a>(8)</u>

6.14                                              Apr 17, 2025                                      <u><a href="../man8/BTRFSTUNE.8.html">BTRFSTUNE</a></u>(8)
</pre>
 </div>
</div></section>
</div>
</body>
</html>