<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>kopano-archiver-restore - Restore all stubbed and removed messages in a primary store with the messages</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/jammy/+package/kopano-utils">kopano-utils_8.7.0-7.1ubuntu10.1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       kopano-archiver-restore - Restore all stubbed and removed messages in a primary store with the messages
       found in the currently or previously attached archives(s).

</pre><h4><b>SYNOPSIS</b></h4><pre>

       <b>kopano-archiver-restore</b> [<u>OPTION</u>...]

</pre><h4><b>DESCRIPTION</b></h4><pre>
       kopano-archiver-restore can be used to repopulate a primary store to a state where no archive is required
       to read any message. In a less cryptic way this means that all stubbed messages are destubbed and all
       messages that were deleted after archiving are restored.

       The advantage of using kopano-archiver-restore over dragging the messages back from the archive in
       Outlook or Webaccess is that the restores messages are sanitized, allowing them to be properly rearchived
       later.

</pre><h4><b>STRATEGY</b></h4><pre>
       The strategy taken by kopano-archiver-restore is that it iterates through all folder in the primary
       store, and tries to open the archive folders that are attached to that store. There can be more than one
       attached archive folder, and these folders are not required to exist in an archive that is currently
       attached. So folders of previously used archives will be restored as well if they still exist.

       Once the archives have been resolved, kopano-archiver-restore will create a list of restorable messages
       based on the reference entryid found in the archived copies. When multiple archives are found, multiple
       archived copies for the same primary message can exist. In that case kopano-archiver-restore will choose
       the most recent one.

       Once the list of restorable messages is complete, kopano-archiver-restore will start restoring by first
       determining if the primary message, referenced by the reference entryid from the archived copies exist
       and if so if it is stubbed. If the primary message exists and is not stubbed, there's no need to restore
       anything. If the message exists but is stubbed, it will be destubbed. If the primary message does not
       exist, a new message is created based on the archived copy. In this case the archived copy is updated so
       it will reference the newly created message. This is needed to make sure a subsequent run of
       kopano-archiver-restore won't create another copy.

</pre><h4><b>OPTIONS</b></h4><pre>
       <b>--detach</b>
           Detach the selected or all archive stores before starting the restore procedure. This avoids the
           archiver from re-archiving restored messages.

       <b>--unhook</b>
           Unhook the selected ot all archive stores once the restore process has completed. This implies
           --detach and only works on archive stores.

       <b>--remove</b>
           Remove the selected ot all archive stores once the restore process has completed. This implies
           --unhook and only works on archive stores.

       <b>--user</b>, <b>-u</b> <u>NAME</u>
           Run the script for just the specified user(s). By default, it runs for all users.

       <b>--log-level</b>, <b>-l</b> <u>NAME</u>
           Specify log-level, for example, 'error', 'warning' 'info' or 'debug'.

       <b>--server-socket</b>, <b>-s</b> <u>SOCKET</u>
           Connect to storage server through specified socket.

       <b>--ssl-key</b>, <b>-k</b> <u>FILE</u>
           Specify SSL key file.

       <b>--ssl-pass</b>, <b>-p</b> <u>PASSWORD</u>
           Specify SSL key password.

</pre><h4><b>AUTHOR</b></h4><pre>
       Written by Zarafa.

Kopano 8                                          November 2016                       <u><a href="../man8/KOPANO-ARCHIVER-RESTORE.8.html">KOPANO-ARCHIVER-RESTORE</a></u>(8)
</pre>
 </div>
</div></section>
</div>
</body>
</html>