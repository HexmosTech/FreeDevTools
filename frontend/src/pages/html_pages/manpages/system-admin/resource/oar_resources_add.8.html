<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>oar_resource_add - Yet another helper script to define OAR resources</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/oar-server">oar-server_2.6.1-1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       oar_resource_add - Yet another helper script to define OAR resources

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>oar_resource_add</b> -H &lt;# of hosts&gt; [options]

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This tool generates the oarproperty and oarnodesetting commands to create OAR resources following the
       host / cpu / core (/ thread) hierarchy, possibly with GPU alongside.

       REMINDER: Each physical element (each cpu, each core, each thread, each gpu) must have a unique
       identifier in the OAR resources database. If some resources already exists in the database (e.g. from a
       previously installed cluster), offsets can be given in the command line or guessed with the auto-offset
       option, so that identifiers for newly created resources are unique.

       This tool is also a good example of how one can create OAR resources using script loops and the
       oarnodesetting command. If it does not exactly fit your needs, feel free to read the script code and
       adapt it.

</pre><h4><b>OPTIONS</b></h4><pre>
       <b>-T</b>, <b>--use-threads</b>
           Use (create) the thread property.

       <b>-H</b>, <b>--hosts</b> &lt;#&gt;
           # of hosts.

       <b>-C</b>, <b>--cpus</b> &lt;#&gt;
           # of cpu per host.

       <b>-c</b>, <b>--cores</b> &lt;#&gt;
           # of core per cpu.

       <b>-t</b>, <b>--threads</b> &lt;#&gt;
           # of threads per core.

       <b>-g</b>, <b>--gpus</b> &lt;#&gt;
           # of gpus per host.

           WARNING,  not all hardware configurations are supported: For multi-GPU configurations, the # of cores
           per cpu must be a multiple of the # of gpus per cpu.

           If not set, no gpu resources is handled.

       <b>--host-prefix</b> &lt;str&gt;
           Hostname prefix (default: "node-").

       <b>--host-suffix</b> &lt;str&gt;
           Hostname suffix (e.g. ".domain").

       <b>--host0</b> &lt;#&gt;
           First host id to use.

       <b>--cpu0</b> &lt;#&gt;
           First cpu id to use.

       <b>--core0</b> &lt;#&gt;
           First core id to use.

       <b>--thread0</b> &lt;#&gt;
           First thread id to use.

       <b>--gpu0</b> &lt;#&gt;
           First gpu id to use.

       <b>--cpusets</b> &lt;#&gt;
           # of cpusets on host (mainly useful for development purposes when one wants  to  emulate  more  cores
           than systems really have).

       <b>--cputopo</b> &lt;list|RR&gt;
           Provide  the  topology  for  the CPUs/cores/threads affinity (see hwloc), given a ordered list of the
           Linux CPU ids (as used in cpuset.cpus).

           Or, given the RR value, try to match a round-robin distribution of  the  core  ids,  with  optionally
           HyperThreads as well.

       <b>--gpudevices</b> &lt;#&gt;
           #  of  gpudevices on host (mainly useful for development purposes when one wants to emulate more GPUs
           than systems really have).

       <b>--gpudevice-prefix</b> &lt;str&gt;
           Path prefix to use for the path of the device file of the GPU (e.g.: /dev/nvidia).

       <b>--gputopo</b> &lt;list&gt;
           Provide the topology for the CPUs/GPUs affinity (see hwloc), given a ordered list of  the  Linux  GPU
           device ids.

       <b>-A</b>, <b>--append</b> &lt;str&gt;
           Append a text string (extra properties).

       <b>-o</b>, <b>--write-to</b> &lt;file&gt;
           Write commands to file.

       <b>-p</b>, <b>--no-create-properties</b>
           Do not generate oarproperty commands.

       <b>-a</b>, <b>--auto-offset</b>
           Guess   the   next   host/cpu/core/thread/gpu   ids   to   use   from   the   OAR   database  (unless
           host0/cpu0/core0/thread0/gpu0 is set).

           WARNING: properties must already exist in your database or you will get errors.

       <b>-Y</b>, <b>--yaml</b>
           Generate YAML output.

       <b>-h</b>, <b>--help</b>
           Display usage.

</pre><h4><b>WARNING</b></h4><pre>
       The oar_resource_add tool does not look at the actual hardware topology of the target machines. Core  and
       GPU  device  affinity  to  CPU  may  not  be correct. See the <b>hwloc</b> commands for instance to find out the
       correct topology and affinity, and use the --cputopo and --gputopo options accordingly.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man8/oarnodesetting.8.html">oarnodesetting</a></b>(8), <b><a href="../man8/oarproperty.8.html">oarproperty</a></b>(8), <b><a href="../man8/oar_resources_init.8.html">oar_resources_init</a></b>(8)

</pre><h4><b>COPYRIGHTS</b></h4><pre>
        Copyright 2003-2018 Laboratoire d'Informatique de Grenoble (<a href="http://www.liglab.fr">http://www.liglab.fr</a>). This software is licensed under the GNU General Public License Version 2 or above. There is NO warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.

oar_resources_add                                  2025-03-24                               <u><a href="../man8/oar_resources_add.8.html">oar_resources_add</a></u>(8)
</pre>
 </div>
</div></section>
</div>
</body>
</html>