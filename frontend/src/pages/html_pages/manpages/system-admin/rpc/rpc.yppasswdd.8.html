<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>rpc.yppasswdd - NIS password update daemon</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/ypserv">ypserv_4.2-2build2_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       rpc.yppasswdd - NIS password update daemon

</pre><h4><b>SYNOPSIS</b></h4><pre>

       <b>rpc.yppasswdd</b> [-D <u>directory</u>] -e <u>chsh</u>|<u>chfn</u> [--port <u>number</u>]

       <b>rpc.yppasswdd</b> [-s <u>shadow</u>] [-p <u>passwd</u>] -e <u>chsh</u>|<u>chfn</u> [--port <u>number</u>]

       <b>rpc.yppasswdd</b> -x <u>program</u> | -E <u>program</u>  -e <u>chsh</u>|<u>chfn</u> [--port <u>number</u>]

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>rpc.yppasswdd</b> is the RPC server that lets users change their passwords in the presence of NIS (a.k.a.
       YP). It must be run on the NIS master server for that NIS domain.

       When a <b><a href="../man1/yppasswd.1.html">yppasswd</a></b>(1) client contacts the server, it sends the old user password along with the new one.
       <b>rpc.yppasswdd</b> will search the system's <b>passwd</b> file for the specified user name, verify that the given
       (old) password matches, and update the entry. If the user specified does not exist, or if the password,
       UID or GID doesn't match the information in the password file, the update request is rejected, and an
       error returned to the client.

       If this version of the server is compiled with the CHECKROOT=1 option, the password given is also checked
       against the systems root password.

       After updating the <b>passwd</b> file and returning a success notification to the client, <b>rpc.yppasswdd</b> executes
       the <b>pwupdate</b> script that updates the NIS server's <b>passwd.*</b>  and <b>shadow.byname</b> maps. This script assumes
       all NIS maps are kept in directories named /var/yp/<u>nisdomain</u> that each contain a <b>Makefile</b> customized for
       that NIS domain. If no such <b>Makefile</b> is found, the scripts uses the generic one in /var/yp.

</pre><h4><b>OPTIONS</b></h4><pre>
       The following options are available:

       <b>-D</b> <u>directory</u>
           The <b>passwd</b> and <b>shadow</b> files are located under the specified directory path.  <b>rpc.yppasswdd</b> will use
           this files, not <a href="file:/etc/passwd">/etc/passwd</a> and /etc/shadow.  This is useful if you do not want to give all users in
           the NIS database automatic access to your NIS server.

       <b>-E</b> <u>program</u>
           Instead of rpc.yppasswdd editing the passwd &amp; shadow files, the specified program will be run to do
           the editing. The following environment variables will be set for the program: YP_PASSWD_OLD,
           YP_PASSWD_NEW, YP_USER, YP_GECOS, YP_SHELL. The program should return an exit status of 0 if the
           change completes successfully, 1 if the change completes successfully but pwupdate should not be run,
           and otherwise if the change fails.

       <b>-p</b> <u>passwdfile</u>
           This options tells <b>rpc.yppasswdd</b> to use a different source file instead of <a href="file:/etc/passwd">/etc/passwd</a> This is useful
           if you do not want to give all users in the NIS database automatic access to your NIS server.

       <b>-s</b> <u>shadowfile</u>
           This options tells <b>rpc.yppasswdd</b> to use a different source file instead of /etc/passwd. See below for
           a brief discussion of shadow support.

       <b>-e</b> <b>[chsh|chfn]</b>
           By default, <b>rpc.yppasswdd</b> will not allow users to change the shell or GECOS field of their <b>passwd</b>
           entry. Using the <b>-e</b> option, you can enable either of these. Note that when enabling support for
           <b><a href="../man1/ypchsh.1.html">ypchsh</a></b>(1), you have to list all shells users are allowed to select in /etc/shells.

       <b>-x</b> <b>program</b>
           When the -x option is used, rpc.yppasswdd will not attempt to modify any files itself, but will
           instead run the specified program, passing to its stdin information about the requested operation(s).
           There is a defined protocol used to communicate with this external program, which has total freedom
           in how it propagates the change request. See below for more details on this.

       <b>-m</b>
           Will be ignored, for compatibility with Solaris only.

       <b>--port</b> <b>number</b>
           rpc.yppasswdd will try to register itself to this port. This makes it possible to have a router
           filter packets to the NIS ports.

       <b>-v</b> <b>--version</b>
           Prints the version number and if this package is compiled with the CHECKROOT option.

</pre><h4><b>MISCELLANEOUS</b></h4><pre>
   <b>Shadow</b> <b>Passwords</b>
       Using Shadow passwords alongside NIS does not make too much sense, because the supposedly inaccesible
       passwords now become readable through a simple invocation of <b><a href="../man1/ypcat.1.html">ypcat</a></b>(1).

       Shadow support in <b>rpc.yppasswdd</b> does not mean that it offers a very clever solution to this problem, it
       simply means that it can read and write password entries in the system's <b>shadow</b> file. You have to produce
       a <b>shadow.byname</b> NIS map to distribute password information to your NIS clients.  <b>rpc.yppasswdd</b> will
       search at first in the <a href="file:/etc/passwd">/etc/passwd</a> file for the user and password. If it find's the user, but the
       password is "x" and a <a href="file:/etc/shadow">/etc/shadow</a> file exists, it will update the password in the shadow map.

   <b>Use</b> <b>of</b> <b>the</b> <b>-x</b> <b>option</b>
       The program should expect to read a single line from stdin, which is formatted as follows:

       &lt;username&gt; o:&lt;oldpass&gt; p:&lt;password&gt; s:&lt;shell&gt; g:&lt;gcos&gt;\n

       where any of the three fields [p, s, g] may or may not be present.

       This program should write "OK\n" to stdout if the operation succeeded. On any other result, rpc.yppasswdd
       will report failure to the client.

       Note that the program specified by the -x option is responsible for doing any NIS make and build, and for
       doing any necessary validation on the shell and gcos field information supplied. The password passed to
       the client will be in UNIX crypt() format.

   <b>Logging</b>
       <b>rpc.yppasswdd</b> logs all password update requests to <b><a href="../man8/syslogd.8.html">syslogd</a>(8)</b>'s auth facility. The logging information
       includes the originating host's IP address and the user name and UID contained in the request. The
       user-supplied password itself is not logged.

   <b>Security</b>
       <b>rpc.yppasswdd</b> should be as secure or insecure as any program relying on simple password authentication.
       If you feel that this is not enough, you may want to protect <b>rpc.yppasswdd</b> from outside access by using
       the `securenets' feature of the new <b><a href="../man8/portmap.8.html">portmap</a></b>(8) version 3. Better still, look at <b><a href="../man8/rpasswdd.8.html">rpasswdd</a></b>(8).

</pre><h4><b>FILES</b></h4><pre>
       /usr/sbin/rpc.yppasswdd

       /usr/lib/yp/pwupdate

       <a href="file:/etc/passwd">/etc/passwd</a>

       <a href="file:/etc/shadow">/etc/shadow</a>

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man5/passwd.5.html">passwd</a></b>(5), <b><a href="../man5/shadow.5.html">shadow</a></b>(5), <b><a href="../man1/passwd.1.html">passwd</a></b>(1), <b><a href="../man8/rpasswdd.8.html">rpasswdd</a></b>(8), <b><a href="../man1/yppasswd.1.html">yppasswd</a></b>(1), <b><a href="../man1/ypchsh.1.html">ypchsh</a></b>(1), <b><a href="../man1/ypchfn.1.html">ypchfn</a></b>(1), <b><a href="../man8/ypserv.8.html">ypserv</a></b>(8), <b><a href="../man1/ypcat.1.html">ypcat</a></b>(1)

</pre><h4><b>AUTHOR</b></h4><pre>
       Olaf Kirch &lt;<a href="mailto:okir@monad.swb.de">okir@monad.swb.de</a>&gt; and Thorsten Kukuk &lt;<a href="mailto:kukuk@linux-nis.org">kukuk@linux-nis.org</a>&gt;

NIS Reference Manual                               12/31/2020                                   <u><a href="../man8/RPC.YPPASSWDD.8.html">RPC.YPPASSWDD</a></u>(8)
</pre>
 </div>
</div></section>
</div>
</body>
</html>