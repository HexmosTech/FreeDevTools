<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>fence_mpath - Fence agent for multipath persistent reservation</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/fence-agents-mpath">fence-agents-mpath_4.16.0-3ubuntu1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       fence_mpath - Fence agent for multipath persistent reservation

</pre><h4><b>DESCRIPTION</b></h4><pre>
       fence_mpath  is an I/O Fencing agent that uses SCSI-3 persistent reservations to control access multipath
       devices. Underlying devices must support SCSI-3 persistent reservations (SPC-3 or greater) as well as the
       "preempt-and-abort" subcommand.  The fence_mpath agent works by having a unique key for  each  node  that
       has  to  be set in /etc/multipath.conf. Once registered, a single node will become the reservation holder
       by creating a "write exclusive, registrants only" reservation on the device(s). The result is  that  only
       registered  nodes  may  write  to  the  device(s). When a node failure occurs, the fence_mpath agent will
       remove the key belonging to the failed node from the device(s). The failed node will no longer be able to
       write to the device(s). A manual reboot is required.

       When used as a watchdog device you can define e.g. retry=1, retry-sleep=2 and verbose=yes  parameters  in
       /etc/sysconfig/stonith if you have issues with it failing.

       The  fence  agent  accepts  options  on  the  command line as well as from stdin. Fenced sends parameters
       through stdin when it execs the agent. The agent can be run by itself with command line options.  This is
       useful for testing and for turning outlets on or off from scripts.

       Vendor URL: https://www.sourceware.org/dm/

</pre><h4><b>PARAMETERS</b></h4><pre>

       <b>-o,</b> <b>--action=[action]</b>
              Fencing action (Default Value: off)

       <b>-d,</b> <b>--devices=[devices]</b>
              List of devices to use for current operation. Devices can be comma  or  space  separated  list  of
              device-mapper    multipath    devices    (eg.   /dev/mapper/3600508b400105df70000e00000ac0000   or
              /dev/mapper/mpath1). Each device must support SCSI-3 persistent reservations.

       <b>-k,</b> <b>--key=[key]</b>
              Replaced by port/-n/--plug

       <b>-n,</b> <b>--plug=[key]</b>
              Key to use for the current operation. This key should be unique to a node and have to  be  written
              in  /etc/multipath.conf.  For the "on" action, the key specifies the key use to register the local
              node. For the "off" action, this key specifies the key to be removed from  the  device(s).

       <b>--suppress-errors</b>
              Error log suppression.

       <b>-q,</b> <b>--quiet</b>
              Disable logging to stderr. Does not affect --verbose or --debug-file or logging to syslog.

       <b>-v,</b> <b>--verbose</b>
              Verbose  mode.  Multiple  -v  flags  can  be  stacked on the command line (e.g., -vvv) to increase
              verbosity.

       <b>--verbose-level</b>
              Level of debugging detail in output. Defaults to the number of --verbose flags  specified  on  the
              command  line,  or  to  1  if verbose=1 in a stonith device configuration (i.e., on stdin).

       <b>-D,</b> <b>--debug-file=[debugfile]</b>
              Write debug information to given file

       <b>-V,</b> <b>--version</b>
              Display version information and exit

       <b>-h,</b> <b>--help</b>
              Display help and exit

       <b>--plug-separator=[char]</b>
              Separator for plug parameter when specifying more than 1 plug (Default Value: ,)

       <b>--delay=[seconds]</b>
              Wait X seconds before fencing is started (Default Value: 0)

       <b>--disable-timeout=[true/false]</b>
              Disable timeout (true/false) (default: true when run from Pacemaker 2.0+)

       <b>--login-timeout=[seconds]</b>
              Wait X seconds for cmd prompt after login (Default Value: 5)

       <b>--mpathpersist-path=[path]</b>
              Path to mpathpersist binary (Default Value: <a href="file:///usr/lib/w3m/cgi-bin/w3mman2html.cgi?mpathpersist">/usr/sbin/mpathpersist</a>)

       <b>--power-timeout=[seconds]</b>
              Test X seconds for status change after ON/OFF (Default Value: 20)

       <b>--power-wait=[seconds]</b>
              Wait X seconds after issuing ON/OFF (Default Value: 0)

       <b>--shell-timeout=[seconds]</b>
              Wait X seconds for cmd prompt after issuing command (Default Value: 3)

       <b>--stonith-status-sleep=[seconds]</b>
              Sleep X seconds between status calls during a STONITH action (Default Value: 1)

       <b>--store-path=[path]</b>
              Path to directory where fence agent can store information (Default Value: /var/run/cluster)

       <b>--retry-on=[attempts]</b>
              Count of attempts to retry power on (Default Value: 1)

       <b>--use-sudo</b>
              Use sudo (without password) when calling 3rd party software

       <b>--sudo-path=[path]</b>
              Path to sudo binary (Default Value: <a href="file:///usr/lib/w3m/cgi-bin/w3mman2html.cgi?sudo">/usr/bin/sudo</a>)

</pre><h4><b>ACTIONS</b></h4><pre>

       <b>on</b>     Power on machine.

       <b>off</b>    Power off machine.

       <b>status</b> This returns the status of the plug/virtual machine.

       <b>monitor</b>
              Check the health of fence device

       <b>metadata</b>
              Display the XML metadata describing this resource.

       <b>manpage</b>
               The operational behavior of this is not known.

       <b>validate-all</b>
              Validate if all required parameters are entered.

</pre><h4><b>STDIN</b> <b>PARAMETERS</b></h4><pre>

       <b>action</b> Fencing action (Default Value: off)

       <b>devices</b>
              List of devices to use for current operation. Devices can be comma  or  space  separated  list  of
              device-mapper    multipath    devices    (eg.   /dev/mapper/3600508b400105df70000e00000ac0000   or
              /dev/mapper/mpath1). Each device must support SCSI-3 persistent reservations.

       <b>key</b>    Replaced by port/-n/--plug

       <b>plug</b>   Key to use for the current operation. This key should be unique to a node and have to  be  written
              in  /etc/multipath.conf.  For the "on" action, the key specifies the key use to register the local
              node. For the "off" action, this  key  specifies  the  key  to  be  removed  from  the  device(s).
              Obsoletes: port

       <b>suppress_errors</b>
              Error log suppression. Obsoletes: suppress-errors

       <b>quiet</b>  Disable logging to stderr. Does not affect --verbose or --debug-file or logging to syslog.

       <b>verbose</b>
              Verbose  mode.  Multiple  -v  flags  can  be  stacked on the command line (e.g., -vvv) to increase
              verbosity.

       <b>verbose_level</b>
              Level of debugging detail in output. Defaults to the number of --verbose flags  specified  on  the
              command  line,  or  to  1  if verbose=1 in a stonith device configuration (i.e., on stdin).

       <b>debug_file</b>
              Write debug information to given file Obsoletes: debug

       <b>version</b>
              Display version information and exit

       <b>help</b>   Display help and exit

       <b>plug_separator</b>
              Separator for plug parameter when specifying more than 1 plug (Default Value: ,)

       <b>delay</b>  Wait X seconds before fencing is started (Default Value: 0)

       <b>disable_timeout</b>
              Disable timeout (true/false) (default: true when run from Pacemaker 2.0+)

       <b>login_timeout</b>
              Wait X seconds for cmd prompt after login (Default Value: 5)

       <b>mpathpersist_path</b>
              Path to mpathpersist binary (Default Value: <a href="file:///usr/lib/w3m/cgi-bin/w3mman2html.cgi?mpathpersist">/usr/sbin/mpathpersist</a>)

       <b>power_timeout</b>
              Test X seconds for status change after ON/OFF (Default Value: 20)

       <b>power_wait</b>
              Wait X seconds after issuing ON/OFF (Default Value: 0)

       <b>shell_timeout</b>
              Wait X seconds for cmd prompt after issuing command (Default Value: 3)

       <b>stonith_status_sleep</b>
              Sleep X seconds between status calls during a STONITH action (Default Value: 1)

       <b>store_path</b>
              Path to directory where fence agent can store information (Default Value: /var/run/cluster)

       <b>retry_on</b>
              Count of attempts to retry power on (Default Value: 1)

       <b>use_sudo</b>
              Use sudo (without password) when calling 3rd party software Obsoletes: sudo

       <b>sudo_path</b>
              Path to sudo binary (Default Value: <a href="file:///usr/lib/w3m/cgi-bin/w3mman2html.cgi?sudo">/usr/bin/sudo</a>)

fence_mpath (Fence Agent)                          2009-10-20                                     <u><a href="../man8/FENCE_AGENT.8.html">FENCE_AGENT</a></u>(8)
</pre>
 </div>
</div></section>
</div>
</body>
</html>