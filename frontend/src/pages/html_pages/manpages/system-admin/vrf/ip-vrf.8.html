<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ip-vrf - run a command against a vrf</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/iproute2">iproute2_6.14.0-1ubuntu3_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       ip-vrf - run a command against a vrf

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>ip</b> <b>vrf</b>  { <u>COMMAND</u> | <b>help</b> }

       <b>ip</b> <b>vrf</b> <b>show</b> [ <u>NAME</u> ]

       <b>ip</b> <b>vrf</b> <b>identify</b> [ <u>PID</u> ]

       <b>ip</b> <b>vrf</b> <b>pids</b> <u>NAME</u>

       <b>ip</b> <b>vrf</b> <b>exec</b> [ <u>NAME</u> ] <u>command</u>...

</pre><h4><b>DESCRIPTION</b></h4><pre>
       A VRF provides traffic isolation at layer 3 for routing, similar to how a VLAN is used to isolate traffic
       at layer 2. Fundamentally, a VRF is a separate routing table. Network devices are associated with a VRF
       by enslaving the device to the VRF. At that point network addresses assigned to the device are local to
       the VRF with host and connected routes moved to the table associated with the VRF.

       A process can specify a VRF using several APIs -- binding the socket to the VRF device using
       SO_BINDTODEVICE, setting the VRF association using IP_UNICAST_IF or IPV6_UNICAST_IF, or specifying the
       VRF for a specific message using IP_PKTINFO or IPV6_PKTINFO.

       By default a process is not bound to any VRF. An association can be set explicitly by making the program
       use one of the APIs mentioned above or implicitly using a helper to set SO_BINDTODEVICE for all IPv4 and
       IPv6 sockets (AF_INET and AF_INET6) when the socket is created. This ip-vrf command is a helper to run a
       command against a specific VRF with the VRF association inherited parent to child.

       <b>ip</b> <b>vrf</b> <b>show</b> <b>[</b> <b>NAME</b> <b>]</b> <b>-</b> <b>Show</b> <b>all</b> <b>configured</b> <b>VRF</b>

              This command lists all VRF and their corresponding table ids. If NAME is given, then only that VRF
              and  table id is shown. The latter command is useful for scripting where the table id for a VRF is
              needed.

       <b>ip</b> <b>vrf</b> <b>exec</b> <b>[</b> <b>NAME</b> <b>]</b> <b>cmd</b> <b>...</b> <b>-</b> <b>Run</b> <b>cmd</b> <b>against</b> <b>the</b> <b>named</b> <b>VRF</b>

              This command allows applications that are VRF unaware to be run  against  a  VRF  other  than  the
              default VRF (main table). A command can be run against the default VRF by passing the "default" as
              the  VRF name. This is useful if the current shell is associated with another VRF (e.g, Management
              VRF).

              This  command  requires  the  system  to  be  booted  with  cgroup  v2  (e.g.  with  systemd,  add
              systemd.unified_cgroup_hierarchy=1 to the kernel command line).

              This  command also requires to be run as root. Alternatively it can be run by an unprivileged user
              if the following <b><a href="../man7/capabilities.7.html">capabilities</a></b>(7) are given:

              <b>CAP_BPF</b>
                     To load the BPF program.

              <b>CAP_NET_ADMIN</b>
                     To set the socket into the cgroup.

              <b>CAP_DAC_OVERRIDE</b>
                     To create the cgroup subdir in /sys.

              If these capabilities are added and if <b><a href="../man8/ip.8.html">ip</a></b>(8) is built with <b><a href="../man3/libcap.3.html">libcap</a></b>(3) then these capabilities  will
              be  dropped  before  <b>cmd</b>  is  executed by <b>ip</b> <b>vrf</b> <b>exec.</b>  For every other unprivileged invocation of
              <b><a href="../man8/ip.8.html">ip</a></b>(8) all capabilities will be dropped.

              <b>NOTE:</b> capabilities will <b>NOT</b> be dropped if <b>CAP_NET_ADMIN</b> is set to <b>INHERITABLE</b>  to  avoid  breaking
              programs with ambient capabilities that call ip.

       <b>ip</b> <b>vrf</b> <b>identify</b> <b>[PID]</b> <b>-</b> <b>Report</b> <b>VRF</b> <b>association</b> <b>for</b> <b>process</b>

              This  command shows the VRF association of the specified process. If PID is not specified then the
              id of the current process is used.

       <b>ip</b> <b>vrf</b> <b>pids</b> <b>NAME</b> <b>-</b> <b>Report</b> <b>processes</b> <b>associated</b> <b>with</b> <b>the</b> <b>named</b> <b>VRF</b>

              This command shows all process ids that are associated with the given VRF.

</pre><h4><b>CAVEATS</b></h4><pre>
       This command requires a kernel compiled with CGROUPS and CGROUP_BPF enabled.

       The VRF helper *only* affects network layer sockets.

</pre><h4><b>EXAMPLES</b></h4><pre>
       ip vrf exec red ssh 10.100.1.254
              Executes ssh to 10.100.1.254 against the VRF red table.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man8/ip.8.html">ip</a></b>(8), <b><a href="../man8/ip-link.8.html">ip-link</a></b>(8), <b><a href="../man8/ip-address.8.html">ip-address</a></b>(8), <b><a href="../man8/ip-route.8.html">ip-route</a></b>(8), <b><a href="../man8/ip-neighbor.8.html">ip-neighbor</a></b>(8)

</pre><h4><b>AUTHOR</b></h4><pre>
       Original Manpage by David Ahern

iproute2                                           7 Dec 2016                                          <u><a href="../man8/IP-VRF.8.html">IP-VRF</a></u>(8)
</pre>
 </div>
</div></section>
</div>
</body>
</html>