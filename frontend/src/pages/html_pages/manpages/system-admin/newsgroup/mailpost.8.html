<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>mailpost - Feed an e-mail message into a newsgroup</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/inn2">inn2_2.7.3-1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       mailpost - Feed an e-mail message into a newsgroup

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>mailpost</b> [<b>-hn</b>] [<b>-a</b> <u>addr</u>] [<b>-b</b> <u>database</u>] [<b>-c</b> <u>wait-time</u>] [<b>-d</b> <u>distribution</u>] [<b>-f</b> <u>addr</u>] [<b>-m</b> <u>mailing-list</u>] [<b>-o</b>
       <u>output-command</u>] [<b>-p</b> <u>port</u>] [<b>-r</b> <u>addr</u>] [<b>-t</b> <u>tempdir</u>] [<b>-x</b> <u>header</u>[<b>:</b><u>header</u>...]] [<b>-z</b> <u>header</u>[<b>:</b><u>header</u>...]]
       <u>newsgroups</u>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The <b>mailpost</b> program reads a properly formatted e-mail message from stdin and feeds it to <b>inews</b> for
       posting to a news server.  <u>newsgroups</u> is a whitespace-separated list of group names to which to post the
       article (at least one newsgroup must be specified).

       Before feeding the article to <b>inews</b>, it checks that the article has not been seen before, and it changes
       some header fields (cleaning up some address header fields, removing a few ones like X-Complaints-To and
       X-Trace, and putting "X-" in front of unknown header fields).  The Received and *-To header fields are
       also altered to prevent spamming the gateway (the name of the news server or the domain name set in
       <u>fromhost</u>, <u>pathhost</u> and <u>domain</u> in <u>inn.conf</u> are removed).

       If the article has been seen before (<b>mailpost</b> records the message-ID of each article it handles), then
       the article will be dropped with a non-zero error status.  Other errors will cause the article to be
       mailed to the newsmaster (selected at configure time and defaulting to "usenet").

       Normally, <b>mailpost</b> is run by <a href="../man8/sendmail.8.html">sendmail</a>(8) via an alias entry:

           local-mail-wreck-bikes: "|&lt;pathbin in inn.conf&gt;/mailpost
               -b /var/spool/mailpost -t <a href="file:/tmp">/tmp</a> -d local local.bicycles.racing"

       The <b>-b</b> and <b>-t</b> flags are useful to change the directories used by <b>mailpost</b> by default.  As a matter of
       fact, though it is recommended to run <b>mailpost</b> as the news user, it is as often as not run as another
       user, notably the mail user.  Therefore, you should make sure to create and set to be writable by the
       user that <b>mailpost</b> runs as the directories where to put the database and the temporary files.  Also,
       <b>mailpost</b> must be executable by that user.

       Instead of <u>/var/spool/mailpost</u>, the mail spool directory can be specified, or any other directory where
       the <b>mailpost</b> process has write access.

       A common practice to gateway a newsgroup to a mailing-list is to create a moderated newsgroup (running
       for instance the command "ctlinnd newgroup local.bicycles.racing m") and set the moderation address for
       this newsgroup in the <u>moderators</u> file in <u>pathetc</u> to the mailing-list address.  If you add an <b>-a</b> flag in
       the above example, then on the one hand, when a message is sent to the mailing-list, <b>mailpost</b> will be
       run, mark it as approved, and the message will directly reach the newsgroup.  On the other hand, when a
       message is posted to the newsgroup, it normally does not have an Approved header field, so it will be
       sent (by <b>nnrpd</b>) to the mailing-list address configured in the <u>moderators</u> file, which means the message
       reaches the mailing-list and, like any other messages posted to the mailing-list, it will be processed by
       <b>mailpost</b>, approved, and finally reach the newsgroup.

</pre><h4><b>OPTIONS</b></h4><pre>
       <b>-a</b> <u>addr</u>
           If  the  <b>-a</b>  flag  is  used, <u>addr</u> (which is usually the e-mail address of the poster) is added to the
           article as the body of an Approved header field.  It is useful if one of the newsgroup to  which  the
           article  should  be  posted  is  moderated.   (Of  course,  this flag should be added only if you are
           supposed to auto-approve your posts.)

           Be sure that the reader connection made by <b>inews</b> to post the article  is  allowed  to  post  approved
           articles (see the "A" letter in the <u>access</u> parameter of access blocks in <u>readers.conf</u>).

       <b>-b</b> <u>database</u>
           If  the  <b>-b</b>  flag  is used, then it defines the location of the persistent database used to store the
           message-IDs of articles sent on.  This is to  prevent  articles  looping  around  if  a  news-to-mail
           gateway  sends  them  back  here.   This option may be required if the <b>mailpost</b> process does not have
           write access to the news database directory (notably when it is executed  as  the  mail  user).   The
           default value is <u>pathdb</u> as set in <u>inn.conf</u>.

           Make sure the specified location exists and is writable by the user <b>mailpost</b> runs as.

       <b>-c</b> <u>wait-time</u>
           The  <b>-c</b>  flag indicates a length of time to sleep before posting.  If duplicate messages are received
           in this interval (by any instance of <b>mailpost</b> using the same database), the article  is  only  posted
           once,  but  with  Newsgroups  header  field  body  modified to crosspost the article to all indicated
           groups.  The units for <u>wait-time</u> are seconds; a  reasonable  value  may  be  anywhere  from  tens  to
           hundreds  of  seconds,  or  even higher, depending on how long mail can be delayed on its way to your
           system.

       <b>-d</b> <u>distribution</u>
           If the <b>-d</b> flag is used, the value given is added to the article  as  the  body  of  the  Distribution
           header field.

       <b>-f</b> <u>addr</u>
           The <b>-f</b> flag is a synonym for the <b>-r</b> flag.

       <b>-h</b>  Print usage information and exit.

       <b>-m</b> <u>mailing-list</u>
           If  the <b>-m</b> flag is used, the value given is added to the article in a List-ID header field, if such a
           header field doesn't already exist.

       <b>-n</b>  If the <b>-n</b> flag is used, neither an article is posted nor a mail is sent  in  case  an  error  occurs.
           Everything is written to the standard output.

       <b>-o</b> <u>output-command</u>
           Specifies  the  program  to  which  the  resulting article processed by <b>mailpost</b> should be sent.  For
           debugging purpose, "-o cat" can be used.  The default value is "inews -S -h".

       <b>-p</b> <u>port</u>
           Specifies the port on which <b>nnrpd</b> is listening, used for article posting.  If  given,  <b>-p</b>  is  passed
           along to <b>inews</b>.

       <b>-r</b> <u>addr</u>
           A  heuristic  is  used  to  determine a reasonable value for the Path header field body.  The <b>-r</b> flag
           indicates what to use if no other value can be determined.

       <b>-t</b> <u>tempdir</u>
           If the <b>-t</b> flag is used, then it defines the location of the directory to  use  to  temporarily  store
           error  messages  that  are  sent to the newsmaster.  This option may be required if the default value
           refers to a path that does not exist or the <b>mailpost</b> process does not have write access  to  (notably
           when  it  is executed as the mail user).  Two paths are tried by default: <u>pathtmp</u> as set in <u>inn.conf</u>,
           and then <u><a href="file:/var/tmp">/var/tmp</a></u> if <u>pathtmp</u> is not writable.

           Make sure the specified location exists and is writable by the user <b>mailpost</b> runs as.

       <b>-x</b> <u>header</u>[<b>:</b><u>header</u>...]
           A colon-separated list of additional header fields which should be treated as  known  header  fields;
           these header fields will be passed through to <b>inews</b> without having "X-" prepended.

           By default, known header fields are:

               Archive
               Archived-At
               Comments
               Content-*
               Date
               Distribution
               From
               Injection-Date
               Keywords
               List-ID
               Message-ID
               MIME-*
               Organization
               References
               Return-Path
               Sender
               Subject
               Summary

       <b>-z</b> <u>header</u>[<b>:</b><u>header</u>...]
           A colon-separated list of additional header fields which should be removed.

           By default, removed header fields are:

               X-Complaints-To
               X-Trace

</pre><h4><b>FILES</b></h4><pre>
       <u>pathbin</u>/mailpost
           The Perl script itself used to feed an e-mail message to a newsgroup.

       <u>pathdb</u>/mailpost-msgid.dir and <u>pathdb</u>/mailpost-msgid.pag
           The default database files which record previously seen message-IDs.

</pre><h4><b>HISTORY</b></h4><pre>
       Written  by  Paul  Vixie long ago and then hacked up by James Brister for INN integration.  Documentation
       improved by Julien Élie.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <a href="../man1/inews.1.html">inews</a>(1), <a href="../man5/inn.conf.5.html">inn.conf</a>(5), <a href="../man3/libinn_uwildmat.3.html">libinn_uwildmat</a>(3), <a href="../man5/moderators.5.html">moderators</a>(5), <a href="../man8/nnrpd.8.html">nnrpd</a>(8), <a href="../man5/readers.conf.5.html">readers.conf</a>(5).

INN 2.7.3                                          2025-05-19                                        <u><a href="../man8/MAILPOST.8.html">MAILPOST</a></u>(8)
</pre>
 </div>
</div></section>
</div>
</body>
</html>