<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>rwhod — system status server</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/rwhod">rwhod_0.17-16_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       rwhod — system status server

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>rwhod</b> [<b>-bpaf</b>] [-i &lt;if&gt;...] [<b>-u</b> <u>user</u>]

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>Rwhod</b>  is  the  server  which  maintains  the  database used by the <u><a href="../man1/rwho.1.html">rwho</a></u>(1) and <u><a href="../man1/ruptime.1.html">ruptime</a></u>(1) programs.  Its
       operation is predicated on the ability to <u>broadcast</u> messages on a network.

       <b>Rwhod</b> operates as both a producer and consumer of status information.  As a producer  of  information  it
       periodically  queries  the  state  of  the system and constructs status messages which are broadcast on a
       network.  As a consumer of information, it listens for other <b>rwhod</b> servers' status  messages,  validating
       them, then recording them in a collection of files located in the directory <u>/var/spool/rwho</u>.

       The  server  transmits and receives messages at the port indicated in the ``rwho'' service specification;
       see <u><a href="../man5/services.5.html">services</a></u>(5).

       The messages sent and received, are of the form:

             struct  outmp {
                     char    out_line[8];            /* tty name */
                     char    out_name[8];            /* user id */
                     long    out_time;               /* time on */
             };

             struct  whod {
                     char    wd_vers;
                     char    wd_type;
                     char    wd_fill[2];
                     int     wd_sendtime;
                     int     wd_recvtime;
                     char    wd_hostname[32];
                     int     wd_loadav[3];
                     int     wd_boottime;
                     struct  whoent {
                             struct  outmp we_utmp;
                             int     we_idle;
                     } wd_we[1024 / sizeof (struct whoent)];
             };

       All fields are converted to network  byte  order  prior  to  transmission.   The  load  averages  are  as
       calculated by the <u><a href="../man1/w.1.html">w</a></u>(1) program, and represent load averages over the 5, 10, and 15 minute intervals prior
       to  a  server's transmission; they are multiplied by 100 for representation in an integer.  The host name
       included is that returned by the <u><a href="../man2/gethostname.2.html">gethostname</a></u>(2) system call, with any trailing domain name omitted.   The
       array  at  the  end of the message contains information about the users logged in to the sending machine.
       This information includes the contents of the <u><a href="../man5/utmp.5.html">utmp</a></u>(5) entry for each non-idle terminal line and  a  value
       indicating the time in seconds since a character was last received on the terminal line.

       Messages  received  by the <u>rwho</u> server are discarded unless they originated at an <u>rwho</u> server's port.  In
       addition, if the host's name, as specified in the message, contains any unprintable ASCII characters, the
       message is discarded.  Valid messages received by <b>rwhod</b> are placed in files named  <u>whod.hostname</u>  in  the
       directory  <u>/var/spool/rwho</u>.   These  files  contain only the most recent message, in the format described
       above.

       Status messages are generated approximately once every 3 minutes.  <b>Rwhod</b> recomputes the system boot  time
       every 30 minutes because on some (non-Linux) systems it is not a totally reliable process.

</pre><h4><b>FLAGS</b></h4><pre>
       If  the  <b>-b</b> flag is supplied, only broadcast interfaces, such as ethernets, will be used.  If the <b>-p</b> flag
       is supplied, only point-to-point interfaces will be used. If the <b>-a</b> flag is supplied,  or  no  flags  are
       supplied, all interfaces will be used.

       Alternately,  you  may  specify  interfaces  by  name by providing one or more <b>-i</b> options followed by the
       interface name.

       If the <b>-u</b> flag is supplied, rwhod will run as the specified user instead of as rwhod.  The  initial  user
       until the daemon drops privileges is root.

       <b>Rwhod</b>  can  also  forward  packets between interfaces if started with <b>-f.</b> Please read the <u>CAVEATS</u> section
       before enabling <u>rwhod</u> forwarding.

</pre><h4><b>CAVEATS</b></h4><pre>
       While <u>rwhod</u> listens on any interface present on  the  host,  it  will  only  send  (or  forward)  to  the
       interfaces determined by the <b>-a</b> <b>-b</b> <b>-p</b> <b>-i</b> flags.

       When  operating  in  forwarding  mode (with <b>-f</b> ), <u>rwhod</u> forwards all correct rwhod packets received on an
       interface to all the other interfaces. You can create a broadcast storm  if  there  is  a  loop  in  your
       network  and  all  the routers in the loop run in forwarding mode. To prevent this from happenning, <u>rwhod</u>
       will shut down forwarding (and log the event to the syslog) if more than one <u>rwhod</u>  packet  is  forwarded
       per second on average over the last three minutes. If this happens, you must break the loop of forwarding
       routers.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <u><a href="../man1/rwho.1.html">rwho</a></u>(1), <u><a href="../man1/ruptime.1.html">ruptime</a></u>(1)

</pre><h4><b>BUGS</b></h4><pre>
       Some kind of proxying feature might be useful if your router doesn't run <u>rwhod.</u>

       People often interpret the server dying or network communication failures as a machine going down.

       <u>Rwhod</u> doesn't refresh its interface list, which might be useful when using <b>-a</b> <b>-b</b> <b>-p.</b>

</pre><h4><b>HISTORY</b></h4><pre>
       The <b>rwhod</b> command appeared in 4.2BSD.

       Philippe Troin &lt;<a href="mailto:phil@fifi.org">phil@fifi.org</a>&gt; implemented forwarding and interface selection flags.

Linux NetKit (0.17)                              March 10, 1999                                         <u><a href="../man8/RWHOD.8.html">RWHOD</a></u>(8)
</pre>
 </div>
</div></section>
</div>
</body>
</html>