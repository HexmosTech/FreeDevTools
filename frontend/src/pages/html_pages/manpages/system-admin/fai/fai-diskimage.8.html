<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>fai-diskimage - create a disk image for booting a VM</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/fai-server">fai-server_6.4.3ubuntu1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       fai-diskimage - create a disk image for booting a VM

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>fai-diskimage</b> <u>imagename</u>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>fai-diskimage</b>  creates  a  disk  image  that  can be used with Qemu/KVM, VirtualBox, VMware, Xen, Android
       device or by your cloud infrastructure. It runs the Fully Automatic Installation  using  a  list  of  FAI
       classes.  In  the  end  you  have  a bootable disk image. Following formats are supported: .raw, .raw.xz,
       .raw.zst, .qcow2, .qcow2.zst, .vdi, .vhdx, .vmdk, .simg.

</pre><h4><b>OPTIONS</b></h4><pre>
       <b>-c,</b> <b>--class</b> <u>CLASS</u>[,<u>CLASS</u>]
              Define list of FAI classes

       <b>-C</b> <b>CFDIR</b>
              Use CFDIR as the configuration directory. Default is /etc/fai.

       <b>-h,</b> <b>--help</b>
              Print help

       <b>-N,</b> <b>--new</b>
              This option will be passed to the fai call. It then  executes  the  scripts  in  class/[0-9]*  for
              defining classes.

       <b>-S,</b> <b>--size</b> <u>SIZE</u>
              Set size of raw image (suffixes k M G T are supported)

       <b>-s,</b> <b>--cspace</b> <u>URI</u>
              Location  of  the  config  space. If location starts with /, the prefix file:// will be added. See
              <a href="../man5/fai.conf.5.html">fai.conf</a>(5) for all supported protocols. Default is /srv/fai/config.

       <b>-u,</b> <b>--hostname</b> <u>name</u>
              Set hostname to name

       <b>-v,</b> <b>--verbose</b>
              Be verbose

</pre><h4><b>EXAMPLES</b></h4><pre>
       First, setup the configuration space. You will get an initial configuration including several examples.

        # fai-mk-configspace

       You can now build your fist disk image.

        # export FAI_BASEFILEURL=https://fai-project.org/download/basefiles/
        # cl="DEBIAN,BOOKWORM64,AMD64,FAIBASE,GRUB_PC,DHCPC,DEMO,CLOUD,LAST"
        # fai-diskimage -vu cloud3 -S2G -c$cl cloud.raw

       Creates a Debian system with a small set of software packages without a graphical desktop. The disk image
       cloud.raw will be of size 2 GB and the host is called cloud3.

        # export FAI_BASEFILEURL=https://fai-project.org/download/basefiles/
        # export NIC1=ens3
        # cl=DEBIAN,FAIBASE,UBUNTU,JAMMY64,AMD64,GRUB_PC,DHCPC,XORG,DEMO,LAST
        # fai-diskimage -vNu ubuntu -S15G -c$cl ubuntu.qcow2

       Creates a disk image of size 15GB called ubuntu.qcow2 for a Ubuntu 22.04 desktop.  You have  to  set  the
       variable  NIC1  to the name of the network interface inside the environment you will run this disk image.
       Here, ens3 is the network name inside a KVM/QEMU virtual machine.

</pre><h4><b>NOTES</b></h4><pre>
       fai-diskimage will use zerofree if it's available on the host for getting better compression of  the  raw
       images.

       fai-diskimage  is  not limited to creating images for virtual machines. The raw images can also be copied
       (via dd) onto a real disk for booting bare metal hosts.

       You can start fai-diskimage in a clean shell environment by calling:

        # env -i /usr/sbin/fai-diskimage -vNu cloudhost -S5G -cBOOKWORM64,CLOUD disk.raw

       You can also build cross-architecture disk images using fai-disimage. See the  chapter  "Building  cross-
       architecture disk images" in the FAI guide for details.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       This  program  is part of FAI (Fully Automatic Installation).  See the FAI manual for more information on
       how to use fai-monitor.  The FAI homepage is https://fai-project.org.

</pre><h4><b>AUTHOR</b></h4><pre>
       Thomas Lange &lt;<a href="mailto:lange@cs.uni-koeln.de">lange@cs.uni-koeln.de</a>&gt;

FAI 6                                             December 2023                                 <u><a href="../man8/fai-diskimage.8.html">fai-diskimage</a></u>(8)
</pre>
 </div>
</div></section>
</div>
</body>
</html>