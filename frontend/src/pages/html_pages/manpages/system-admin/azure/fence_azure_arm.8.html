<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>fence_azure_arm - Fence agent for Azure Resource Manager</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/fence-agents-azure-arm">fence-agents-azure-arm_4.16.0-3ubuntu1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       fence_azure_arm - Fence agent for Azure Resource Manager

</pre><h4><b>DESCRIPTION</b></h4><pre>
       fence_azure_arm  is  a  Power  Fencing  agent for Azure Resource Manager. It uses Azure SDK for Python to
       connect to Azure.

       For  instructions  to  setup  credentials   see:   https://docs.microsoft.com/en-us/azure/azure-resource-
       manager/resource-group-create-service-principal-portal

       Username and password are application ID and authentication key from "App registrations".

       NOTE: NETWORK FENCING
       Network  fencing  requires  an  additional  Subnet  named  "fence-subnet" for the Virtual Network using a
       Network Security Group with the following rules:
       +-----------+-----+-------------------------+------+------+-----+-----+--------+
       | DIRECTION | PRI | NAME                    | PORT | PROT | SRC | DST | ACTION |
       +-----------+-----+-------------------------+------+------+-----+-----+--------+
       | Inbound   | 100 | FENCE_DENY_ALL_INBOUND  | Any  | Any  | Any | Any | Deny   |
       | Outbound  | 100 | FENCE_DENY_ALL_OUTBOUND | Any  | Any  | Any | Any | Deny   |
       +-----------+-----+-------------------------+------+------+-----+-----+--------+

       When using network fencing the reboot-action will cause a quick-return once the network has  been  fenced
       (instead  of  waiting for the off-action to succeed). It will check the status during the monitor-action,
       and request power-on when the shutdown operation is complete.

       The fence agent accepts options on the command line as  well  as  from  stdin.  Fenced  sends  parameters
       through stdin when it execs the agent. The agent can be run by itself with command line options.  This is
       useful for testing and for turning outlets on or off from scripts.

       Vendor URL: <a href="http://www.microsoft.com">http://www.microsoft.com</a>

</pre><h4><b>PARAMETERS</b></h4><pre>

       <b>-o,</b> <b>--action=[action]</b>
              Fencing action (Default Value: reboot)

       <b>-p,</b> <b>--password=[authkey]</b>
              Authentication key

       <b>-S,</b> <b>--password-script=[script]</b>
              Script to run to retrieve password

       <b>-n,</b> <b>--plug=[id]</b>
              Physical  plug  number  on  device,  UUID  or  identification  of machine This parameter is always
              required.

       <b>-l,</b> <b>--username=[appid]</b>
              Application ID

       <b>--resourceGroup=[name]</b>
              Name of resource group. Metadata service is used if the value is not provided.

       <b>--tenantId=[name]</b>
              Id of Azure Active Directory tenant.

       <b>--subscriptionId=[name]</b>
              Id of the Azure subscription. Metadata service is used if the value is not provided.

       <b>--network-fencing</b>
              Use network fencing. See NOTE-section for configuration.

       <b>--msi</b>  Determines if Managed Service Identity should be used.

       <b>--cloud=[name]</b>
              Name of the cloud you want to use.

       <b>--metadata-endpoint=[URL]</b>
              URL to metadata endpoint (used when cloud=stack).

       <b>-q,</b> <b>--quiet</b>
              Disable logging to stderr. Does not affect --verbose or --debug-file or logging to syslog.

       <b>-v,</b> <b>--verbose</b>
              Verbose mode. Multiple -v flags can be stacked on  the  command  line  (e.g.,  -vvv)  to  increase
              verbosity.

       <b>--verbose-level</b>
              Level  of  debugging  detail in output. Defaults to the number of --verbose flags specified on the
              command line, or to 1 if verbose=1 in a stonith device  configuration  (i.e.,  on  stdin).

       <b>-D,</b> <b>--debug-file=[debugfile]</b>
              Write debug information to given file

       <b>-V,</b> <b>--version</b>
              Display version information and exit

       <b>-h,</b> <b>--help</b>
              Display help and exit

       <b>--plug-separator=[char]</b>
              Separator for plug parameter when specifying more than 1 plug (Default Value: ,)

       <b>-C,</b> <b>--separator=[char]</b>
              Separator for CSV created by 'list' operation (Default Value: ,)

       <b>--delay=[seconds]</b>
              Wait X seconds before fencing is started (Default Value: 0)

       <b>--disable-timeout=[true/false]</b>
              Disable timeout (true/false) (default: true when run from Pacemaker 2.0+)

       <b>--login-timeout=[seconds]</b>
              Wait X seconds for cmd prompt after login (Default Value: 5)

       <b>--power-timeout=[seconds]</b>
              Test X seconds for status change after ON/OFF (Default Value: 150)

       <b>--power-wait=[seconds]</b>
              Wait X seconds after issuing ON/OFF (Default Value: 0)

       <b>--shell-timeout=[seconds]</b>
              Wait X seconds for cmd prompt after issuing command (Default Value: 3)

       <b>--stonith-status-sleep=[seconds]</b>
              Sleep X seconds between status calls during a STONITH action (Default Value: 1)

       <b>--retry-on=[attempts]</b>
              Count of attempts to retry power on (Default Value: 1)

</pre><h4><b>ACTIONS</b></h4><pre>

       <b>on</b>     Power on machine.

       <b>off</b>    Power off machine.

       <b>reboot</b> Reboot machine.

       <b>status</b> This returns the status of the plug/virtual machine.

       <b>list</b>   List  available  plugs with aliases/virtual machines if there is support for more then one device.
              Returns N/A otherwise.

       <b>list-status</b>
              List available plugs with aliases/virtual machines and their power state if  it  can  be  obtained
              without additional commands.

       <b>monitor</b>
              Check the health of fence device

       <b>metadata</b>
              Display the XML metadata describing this resource.

       <b>manpage</b>
               The operational behavior of this is not known.

       <b>validate-all</b>
              Validate if all required parameters are entered.

</pre><h4><b>STDIN</b> <b>PARAMETERS</b></h4><pre>

       <b>action</b> Fencing action (Default Value: reboot)

       <b>password</b>
              Authentication key Obsoletes: passwd

       <b>password_script</b>
              Script to run to retrieve password Obsoletes: passwd_script

       <b>plug</b>   Physical  plug  number  on  device,  UUID  or  identification  of machine This parameter is always
              required. Obsoletes: port

       <b>username</b>
              Application ID Obsoletes: login

       <b>resourceGroup</b>
              Name of resource group. Metadata service is used if the value is not provided.

       <b>tenantId</b>
              Id of Azure Active Directory tenant.

       <b>subscriptionId</b>
              Id of the Azure subscription. Metadata service is used if the value is not provided.

       <b>network_fencing</b>
              Use network fencing. See NOTE-section for configuration. Obsoletes: network-fencing

       <b>msi</b>    Determines if Managed Service Identity should be used.

       <b>cloud</b>  Name of the cloud you want to use.

       <b>metadata_endpoint</b>
              URL to metadata endpoint (used when cloud=stack). Obsoletes: metadata-endpoint

       <b>quiet</b>  Disable logging to stderr. Does not affect --verbose or --debug-file or logging to syslog.

       <b>verbose</b>
              Verbose mode. Multiple -v flags can be stacked on  the  command  line  (e.g.,  -vvv)  to  increase
              verbosity.

       <b>verbose_level</b>
              Level  of  debugging  detail in output. Defaults to the number of --verbose flags specified on the
              command line, or to 1 if verbose=1 in a stonith device  configuration  (i.e.,  on  stdin).

       <b>debug_file</b>
              Write debug information to given file Obsoletes: debug

       <b>version</b>
              Display version information and exit

       <b>help</b>   Display help and exit

       <b>plug_separator</b>
              Separator for plug parameter when specifying more than 1 plug (Default Value: ,)

       <b>separator</b>
              Separator for CSV created by 'list' operation (Default Value: ,)

       <b>delay</b>  Wait X seconds before fencing is started (Default Value: 0)

       <b>disable_timeout</b>
              Disable timeout (true/false) (default: true when run from Pacemaker 2.0+)

       <b>login_timeout</b>
              Wait X seconds for cmd prompt after login (Default Value: 5)

       <b>power_timeout</b>
              Test X seconds for status change after ON/OFF (Default Value: 150)

       <b>power_wait</b>
              Wait X seconds after issuing ON/OFF (Default Value: 0)

       <b>shell_timeout</b>
              Wait X seconds for cmd prompt after issuing command (Default Value: 3)

       <b>stonith_status_sleep</b>
              Sleep X seconds between status calls during a STONITH action (Default Value: 1)

       <b>retry_on</b>
              Count of attempts to retry power on (Default Value: 1)

fence_azure_arm (Fence Agent)                      2009-10-20                                     <u><a href="../man8/FENCE_AGENT.8.html">FENCE_AGENT</a></u>(8)
</pre>
 </div>
</div></section>
</div>
</body>
</html>