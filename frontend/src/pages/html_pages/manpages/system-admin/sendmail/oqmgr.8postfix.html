<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>oqmgr - old Postfix queue manager</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/jammy/+package/postfix">postfix_3.6.4-1ubuntu1.3_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       oqmgr - old Postfix queue manager

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>oqmgr</b> [generic Postfix daemon options]

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The  <b><a href="../man8/oqmgr.8.html">oqmgr</a></b>(8)  daemon  awaits  the  arrival  of  incoming  mail and arranges for its delivery via Postfix
       delivery processes.  The actual mail routing strategy is  delegated  to  the  <b><a href="../man8/trivial-rewrite.8.html">trivial-rewrite</a></b>(8)  daemon.
       This program expects to be run from the <b><a href="../man8/master.8.html">master</a></b>(8) process manager.

       Mail  addressed  to  the local <b>double-bounce</b> address is logged and discarded.  This stops potential loops
       caused by undeliverable bounce notifications.

</pre><h4><b>MAIL</b> <b>QUEUES</b></h4><pre>
       The <b><a href="../man8/oqmgr.8.html">oqmgr</a></b>(8) daemon maintains the following queues:

       <b>incoming</b>
              Inbound mail from the network, or mail picked up by the local <b><a href="../man8/pickup.8.html">pickup</a></b>(8) agent  from  the  <b>maildrop</b>
              directory.

       <b>active</b> Messages  that  the  queue  manager  has opened for delivery. Only a limited number of messages is
              allowed to enter the <b>active</b> queue (leaky bucket strategy, for a fixed delivery rate).

       <b>deferred</b>
              Mail that could not be delivered upon the first attempt. The queue manager implements  exponential
              backoff by doubling the time between delivery attempts.

       <b>corrupt</b>
              Unreadable or damaged queue files are moved here for inspection.

       <b>hold</b>   Messages that are kept "on hold" are kept here until someone sets them free.

</pre><h4><b>DELIVERY</b> <b>STATUS</b> <b>REPORTS</b></h4><pre>
       The  <b><a href="../man8/oqmgr.8.html">oqmgr</a></b>(8)  daemon  keeps  an eye on per-message delivery status reports in the following directories.
       Each status report file has the same name as the corresponding message file:

       <b>bounce</b> Per-recipient status information about why mail is bounced.  These files  are  maintained  by  the
              <b><a href="../man8/bounce.8.html">bounce</a></b>(8) daemon.

       <b>defer</b>  Per-recipient  status  information  about  why mail is delayed.  These files are maintained by the
              <b><a href="../man8/defer.8.html">defer</a></b>(8) daemon.

       <b>trace</b>  Per-recipient status information as requested with the Postfix "<b>sendmail</b>  <b>-v</b>"  or  "<b>sendmail</b>  <b>-bv</b>"
              command.  These files are maintained by the <b><a href="../man8/trace.8.html">trace</a></b>(8) daemon.

       The  <b><a href="../man8/oqmgr.8.html">oqmgr</a></b>(8)  daemon  is  responsible  for  asking  the  <b><a href="../man8/bounce.8.html">bounce</a></b>(8), <b><a href="../man8/defer.8.html">defer</a></b>(8) or <b><a href="../man8/trace.8.html">trace</a></b>(8) daemons to send
       delivery reports.

</pre><h4><b>STRATEGIES</b></h4><pre>
       The queue manager implements a variety of strategies for  either  opening  queue  files  (input)  or  for
       message delivery (output).

       <b>leaky</b> <b>bucket</b>
              This  strategy  limits  the  number of messages in the <b>active</b> queue and prevents the queue manager
              from running out of memory under heavy load.

       <b>fairness</b>
              When the <b>active</b> queue has room, the queue manager takes one message from the  <b>incoming</b>  queue  and
              one  from the <b>deferred</b> queue. This prevents a large mail backlog from blocking the delivery of new
              mail.

       <b>slow</b> <b>start</b>
              This strategy eliminates "thundering herd" problems by slowly adjusting  the  number  of  parallel
              deliveries to the same destination.

       <b>round</b> <b>robin</b>
              The  queue  manager  sorts  delivery  requests by destination.  Round-robin selection prevents one
              destination from dominating deliveries to other destinations.

       <b>exponential</b> <b>backoff</b>
              Mail that cannot be delivered upon the first attempt  is  deferred.   The  time  interval  between
              delivery attempts is doubled after each attempt.

       <b>destination</b> <b>status</b> <b>cache</b>
              The queue manager avoids unnecessary delivery attempts by maintaining a short-term, in-memory list
              of unreachable destinations.

</pre><h4><b>TRIGGERS</b></h4><pre>
       On  an idle system, the queue manager waits for the arrival of trigger events, or it waits for a timer to
       go off. A trigger is a one-byte message.  Depending on the message received, the queue  manager  performs
       one  of  the  following  actions (the message is followed by the symbolic constant used internally by the
       software):

       <b>D</b> <b>(QMGR_REQ_SCAN_DEFERRED)</b>
              Start a deferred queue scan.  If a deferred queue scan is already in progress, that scan  will  be
              restarted as soon as it finishes.

       <b>I</b> <b>(QMGR_REQ_SCAN_INCOMING)</b>
              Start  an incoming queue scan. If an incoming queue scan is already in progress, that scan will be
              restarted as soon as it finishes.

       <b>A</b> <b>(QMGR_REQ_SCAN_ALL)</b>
              Ignore deferred queue file time stamps. The request affects the next deferred queue scan.

       <b>F</b> <b>(QMGR_REQ_FLUSH_DEAD)</b>
              Purge all information about dead transports and destinations.

       <b>W</b> <b>(TRIGGER_REQ_WAKEUP)</b>
              Wakeup call, This is used by the master server to instantiate servers  that  should  not  go  away
              forever. The action is to start an incoming queue scan.

       The  <b><a href="../man8/oqmgr.8.html">oqmgr</a></b>(8)  daemon  reads an entire buffer worth of triggers.  Multiple identical trigger requests are
       collapsed into one, and trigger requests are sorted so that <b>A</b> and <b>F</b> precede <b>D</b> and <b>I</b>. Thus,  in  order  to
       force  a deferred queue run, one would request <b>A</b> <b>F</b> <b>D</b>; in order to notify the queue manager of the arrival
       of new mail one would request <b>I</b>.

</pre><h4><b>STANDARDS</b></h4><pre>
       RFC 3463 (Enhanced status codes)
       RFC 3464 (Delivery status notifications)

</pre><h4><b>SECURITY</b></h4><pre>
       The <b><a href="../man8/oqmgr.8.html">oqmgr</a></b>(8) daemon is not security sensitive. It reads single-character messages  from  untrusted  local
       users, and thus may be susceptible to denial of service attacks. The <b><a href="../man8/oqmgr.8.html">oqmgr</a></b>(8) daemon does not talk to the
       outside world, and it can be run at fixed low privilege in a chrooted environment.

</pre><h4><b>DIAGNOSTICS</b></h4><pre>
       Problems  and  transactions  are logged to the <b><a href="../man8/syslogd.8.html">syslogd</a></b>(8) or <b><a href="../man8/postlogd.8.html">postlogd</a></b>(8) daemon.  Corrupted message files
       are saved to the <b>corrupt</b> queue for further inspection.

       Depending on the setting of the <b>notify_classes</b> parameter, the postmaster is notified of  bounces  and  of
       other trouble.

</pre><h4><b>BUGS</b></h4><pre>
       A  single  queue manager process has to compete for disk access with multiple front-end processes such as
       <b><a href="../man8/cleanup.8.html">cleanup</a></b>(8). A sudden burst of inbound mail can negatively impact outbound delivery rates.

</pre><h4><b>CONFIGURATION</b> <b>PARAMETERS</b></h4><pre>
       Changes to <b>main.cf</b> are not picked up automatically, as <b><a href="../man8/oqmgr.8.html">oqmgr</a></b>(8) is a persistent process. Use the  command
       "<b>postfix</b> <b>reload</b>" after a configuration change.

       The text below provides only a parameter summary. See <b><a href="../man5/postconf.5.html">postconf</a></b>(5) for more details including examples.

       In the text below, <u>transport</u> is the first field in a <b>master.cf</b> entry.

</pre><h4><b>COMPATIBILITY</b> <b>CONTROLS</b></h4><pre>
       Available before Postfix version 2.5:

       <b>allow_min_user</b> <b>(no)</b>
              Allow a sender or recipient address to have `-' as the first character.

       Available with Postfix version 2.7 and later:

       <b>default_filter_nexthop</b> <b>(empty)</b>
              When  a  content_filter  or  FILTER  request  specifies  no  explicit  next-hop  destination,  use
              $default_filter_nexthop instead; when that value  is  empty,  use  the  domain  in  the  recipient
              address.

</pre><h4><b>ACTIVE</b> <b>QUEUE</b> <b>CONTROLS</b></h4><pre>
       <b>qmgr_clog_warn_time</b> <b>(300s)</b>
              The  minimal  delay between warnings that a specific destination is clogging up the Postfix active
              queue.

       <b>qmgr_message_active_limit</b> <b>(20000)</b>
              The maximal number of messages in the active queue.

       <b>qmgr_message_recipient_limit</b> <b>(20000)</b>
              The maximal number of recipients held in memory by the Postfix queue manager, and the maximal size
              of the short-term, in-memory "dead" destination status cache.

</pre><h4><b>DELIVERY</b> <b>CONCURRENCY</b> <b>CONTROLS</b></h4><pre>
       <b>qmgr_fudge_factor</b> <b>(100)</b>
              Obsolete feature: the percentage of delivery resources that a busy mail system  will  use  up  for
              delivery of a large mailing  list message.

       <b>initial_destination_concurrency</b> <b>(5)</b>
              The initial per-destination concurrency level for parallel delivery to the same destination.

       <b>default_destination_concurrency_limit</b> <b>(20)</b>
              The default maximal number of parallel deliveries to the same destination.

       <b>transport_destination_concurrency_limit</b> <b>($default_destination_concurrency_limit)</b>
              A transport-specific override for the default_destination_concurrency_limit parameter value, where
              <u>transport</u> is the master.cf name of the message delivery transport.

       Available in Postfix version 2.5 and later:

       <b>transport_initial_destination_concurrency</b> <b>($initial_destination_concurrency)</b>
              A  transport-specific  override  for  the  initial_destination_concurrency  parameter value, where
              <u>transport</u> is the master.cf name of the message delivery transport.

       <b>default_destination_concurrency_failed_cohort_limit</b> <b>(1)</b>
              How many pseudo-cohorts must suffer connection or handshake failure before a specific  destination
              is considered unavailable (and further delivery is suspended).

       <b>transport_destination_concurrency_failed_cohort_limit</b>
       <b>($default_destination_concurrency_failed_cohort_limit)</b>
              A   transport-specific   override   for   the  default_destination_concurrency_failed_cohort_limit
              parameter value, where <u>transport</u> is the master.cf name of the message delivery transport.

       <b>default_destination_concurrency_negative_feedback</b> <b>(1)</b>
              The per-destination amount of delivery concurrency negative feedback, after a  delivery  completes
              with a connection or handshake failure.

       <b>transport_destination_concurrency_negative_feedback</b> <b>($default_destination_concurrency_negative_feedback)</b>
              A  transport-specific override for the default_destination_concurrency_negative_feedback parameter
              value, where <u>transport</u> is the master.cf name of the message delivery transport.

       <b>default_destination_concurrency_positive_feedback</b> <b>(1)</b>
              The per-destination amount of delivery concurrency positive feedback, after a  delivery  completes
              without connection or handshake failure.

       <b>transport_destination_concurrency_positive_feedback</b> <b>($default_destination_concurrency_positive_feedback)</b>
              A  transport-specific override for the default_destination_concurrency_positive_feedback parameter
              value, where <u>transport</u> is the master.cf name of the message delivery transport.

       <b>destination_concurrency_feedback_debug</b> <b>(no)</b>
              Make the queue manager's feedback algorithm verbose for performance analysis purposes.

</pre><h4><b>RECIPIENT</b> <b>SCHEDULING</b> <b>CONTROLS</b></h4><pre>
       <b>default_destination_recipient_limit</b> <b>(50)</b>
              The default maximal number of recipients per message delivery.

       <b>transport_destination_recipient_limit</b> <b>($default_destination_recipient_limit)</b>
              A transport-specific override for the default_destination_recipient_limit parameter  value,  where
              <u>transport</u> is the master.cf name of the message delivery transport.

</pre><h4><b>OTHER</b> <b>RESOURCE</b> <b>AND</b> <b>RATE</b> <b>CONTROLS</b></h4><pre>
       <b>minimal_backoff_time</b> <b>(300s)</b>
              The  minimal time between attempts to deliver a deferred message; prior to Postfix 2.4 the default
              value was 1000s.

       <b>maximal_backoff_time</b> <b>(4000s)</b>
              The maximal time between attempts to deliver a deferred message.

       <b>maximal_queue_lifetime</b> <b>(5d)</b>
              Consider a message as undeliverable, when delivery fails with a temporary error, and the  time  in
              the queue has reached the maximal_queue_lifetime limit.

       <b>queue_run_delay</b> <b>(300s)</b>
              The time between deferred queue scans by the queue manager; prior to Postfix 2.4 the default value
              was 1000s.

       <b>transport_retry_time</b> <b>(60s)</b>
              The  time  between  attempts  by  the  Postfix  queue  manager to contact a malfunctioning message
              delivery transport.

       Available in Postfix version 2.1 and later:

       <b>bounce_queue_lifetime</b> <b>(5d)</b>
              Consider a bounce message as undeliverable, when delivery fails with a temporary  error,  and  the
              time in the queue has reached the bounce_queue_lifetime limit.

       Available in Postfix version 2.5 and later:

       <b>default_destination_rate_delay</b> <b>(0s)</b>
              The  default  amount  of  delay that is inserted between individual message deliveries to the same
              destination and over the same message delivery transport.

       <b>transport_destination_rate_delay</b> <b>($default_destination_rate_delay)</b>
              A transport-specific  override  for  the  default_destination_rate_delay  parameter  value,  where
              <u>transport</u> is the master.cf name of the message delivery transport.

       Available in Postfix version 3.1 and later:

       <b>default_transport_rate_delay</b> <b>(0s)</b>
              The  default  amount of delay that is inserted between individual message deliveries over the same
              message delivery transport, regardless of destination.

       <b>transport_transport_rate_delay</b> <b>($default_transport_rate_delay)</b>
              A transport-specific override for the  default_transport_rate_delay  parameter  value,  where  the
              initial <u>transport</u> in the parameter name is the master.cf name of the message delivery transport.

</pre><h4><b>SAFETY</b> <b>CONTROLS</b></h4><pre>
       <b>qmgr_daemon_timeout</b> <b>(1000s)</b>
              How much time a Postfix queue manager process may take to handle a request before it is terminated
              by a built-in watchdog timer.

       <b>qmgr_ipc_timeout</b> <b>(60s)</b>
              The time limit for the queue manager to send or receive information over an internal communication
              channel.

       Available in Postfix version 3.1 and later:

       <b>address_verify_pending_request_limit</b> <b>(see</b> <b>'postconf</b> <b>-d'</b> <b>output)</b>
              A safety limit that prevents address verification requests from overwhelming the Postfix queue.

</pre><h4><b>MISCELLANEOUS</b> <b>CONTROLS</b></h4><pre>
       <b>config_directory</b> <b>(see</b> <b>'postconf</b> <b>-d'</b> <b>output)</b>
              The default location of the Postfix main.cf and master.cf configuration files.

       <b>defer_transports</b> <b>(empty)</b>
              The  names  of  message  delivery  transports  that  should not deliver mail unless someone issues
              "<b>sendmail</b> <b>-q</b>" or equivalent.

       <b>delay_logging_resolution_limit</b> <b>(2)</b>
              The maximal number of digits after the decimal point when logging sub-second delay values.

       <b>helpful_warnings</b> <b>(yes)</b>
              Log warnings about problematic configuration settings, and provide helpful suggestions.

       <b>process_id</b> <b>(read-only)</b>
              The process ID of a Postfix command or daemon process.

       <b>process_name</b> <b>(read-only)</b>
              The process name of a Postfix command or daemon process.

       <b>queue_directory</b> <b>(see</b> <b>'postconf</b> <b>-d'</b> <b>output)</b>
              The location of the Postfix top-level queue directory.

       <b>syslog_facility</b> <b>(mail)</b>
              The syslog facility of Postfix logging.

       <b>syslog_name</b> <b>(see</b> <b>'postconf</b> <b>-d'</b> <b>output)</b>
              A prefix that is prepended to the process name in syslog records, so that,  for  example,  "smtpd"
              becomes "prefix/smtpd".

       Available in Postfix version 3.0 and later:

       <b>confirm_delay_cleared</b> <b>(no)</b>
              After  sending  a  "your message is delayed" notification, inform the sender when the delay clears
              up.

       Available in Postfix 3.3 and later:

       <b>service_name</b> <b>(read-only)</b>
              The master.cf service name of a Postfix daemon process.

       Available in Postfix 3.5 and later:

       <b>info_log_address_format</b> <b>(external)</b>
              The email address form that will be used in non-debug logging (info, warning, etc.).

</pre><h4><b>FILES</b></h4><pre>
       /var/spool/postfix/incoming, incoming queue
       /var/spool/postfix/active, active queue
       /var/spool/postfix/deferred, deferred queue
       /var/spool/postfix/bounce, non-delivery status
       /var/spool/postfix/defer, non-delivery status
       /var/spool/postfix/trace, delivery status

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <a href="../man8/trivial-rewrite.8.html">trivial-rewrite</a>(8), address routing
       <a href="../man8/bounce.8.html">bounce</a>(8), delivery status reports
       <a href="../man5/postconf.5.html">postconf</a>(5), configuration parameters
       <a href="../man5/master.5.html">master</a>(5), generic daemon options
       <a href="../man8/master.8.html">master</a>(8), process manager
       <a href="../man8/postlogd.8.html">postlogd</a>(8), Postfix logging
       <a href="../man8/syslogd.8.html">syslogd</a>(8), system logging

</pre><h4><b>README</b> <b>FILES</b></h4><pre>
       Use "<b>postconf</b> <b>readme_directory</b>" or "<b>postconf</b> <b>html_directory</b>" to locate this information.
       QSHAPE_README, Postfix queue analysis

</pre><h4><b>LICENSE</b></h4><pre>
       The Secure Mailer license must be distributed with this software.

</pre><h4><b>AUTHOR(S)</b></h4><pre>
       Wietse Venema
       IBM T.J. Watson Research
       P.O. Box 704
       Yorktown Heights, NY 10598, USA

       Wietse Venema
       Google, Inc.
       111 8th Avenue
       New York, NY 10011, USA

                                                                                                 <u><a href="../man8postfix/OQMGR.8postfix.html">OQMGR</a></u>(8postfix)
</pre>
 </div>
</div></section>
</div>
</body>
</html>