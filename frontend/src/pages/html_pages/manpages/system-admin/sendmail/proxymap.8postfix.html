<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>proxymap - Postfix lookup table proxy server</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/jammy/+package/postfix">postfix_3.6.4-1ubuntu1.3_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       proxymap - Postfix lookup table proxy server

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>proxymap</b> [generic Postfix daemon options]

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The  <b><a href="../man8/proxymap.8.html">proxymap</a></b>(8) server provides read-only or read-write table lookup service to Postfix processes. These
       services are implemented with distinct service names: <b>proxymap</b> and <b>proxywrite</b>, respectively. The  purpose
       of these services is:

       •      To  overcome  chroot  restrictions. For example, a chrooted SMTP server needs access to the system
              passwd file in order to reject mail for non-existent local addresses, but it is not  practical  to
              maintain a copy of the passwd file in the chroot jail.  The solution:

              local_recipient_maps =
                  proxy:unix:passwd.byname $alias_maps

       •      To  consolidate  the  number  of  open  lookup  tables  by  sharing  one open table among multiple
              processes. For example, making mysql connections from every Postfix daemon process results in "too
              many connections" errors. The solution:

              virtual_alias_maps =
                  proxy:mysql:/etc/postfix/virtual_alias.cf

              The total number of connections is limited by the number of proxymap server processes.

       •      To provide single-updater functionality for lookup tables that do not  reliably  support  multiple
              writers (i.e. all file-based tables).

       The <b><a href="../man8/proxymap.8.html">proxymap</a></b>(8) server implements the following requests:

       <b>open</b> <u>maptype:mapname</u> <u>flags</u>
              Open  the table with type <u>maptype</u> and name <u>mapname</u>, as controlled by <u>flags</u>. The reply includes the
              <u>maptype</u> dependent flags (to distinguish a fixed string table from a regular expression table).

       <b>lookup</b> <u>maptype:mapname</u> <u>flags</u> <u>key</u>
              Look up the data stored under the requested key.  The reply is the request completion status  code
              and the lookup result value.  The <u>maptype:mapname</u> and <u>flags</u> are the same as with the <b>open</b> request.

       <b>update</b> <u>maptype:mapname</u> <u>flags</u> <u>key</u> <u>value</u>
              Update  the data stored under the requested key.  The reply is the request completion status code.
              The <u>maptype:mapname</u> and <u>flags</u> are the same as with the <b>open</b> request.

              To implement single-updater maps, specify a process limit of 1 in the master.cf file entry for the
              <b>proxywrite</b> service.

              This request is supported in Postfix 2.5 and later.

       <b>delete</b> <u>maptype:mapname</u> <u>flags</u> <u>key</u>
              Delete the data stored under the requested key.  The reply is the request completion status  code.
              The <u>maptype:mapname</u> and <u>flags</u> are the same as with the <b>open</b> request.

              This request is supported in Postfix 2.5 and later.

       <b>sequence</b> <u>maptype:mapname</u> <u>flags</u> <u>function</u>
              Iterate   over   the   specified   database.   The   <u>function</u>  is  one  of  DICT_SEQ_FUN_FIRST  or
              DICT_SEQ_FUN_NEXT.  The reply is the request completion status code and a lookup  key  and  result
              value, if found.

              This request is supported in Postfix 2.9 and later.

       The  request  completion status is one of OK, RETRY, NOKEY (lookup failed because the key was not found),
       BAD (malformed request) or DENY (the table is not approved for proxy read or update access).

       There is no <b>close</b> command, nor are tables implicitly closed when a client disconnects. The purpose is  to
       share tables among multiple client processes.

</pre><h4><b>SERVER</b> <b>PROCESS</b> <b>MANAGEMENT</b></h4><pre>
       <b><a href="../man8/proxymap.8.html">proxymap</a></b>(8)  servers  run under control by the Postfix <b><a href="../man8/master.8.html">master</a></b>(8) server.  Each server can handle multiple
       simultaneous connections.  When all servers are busy while a client connects, the <b><a href="../man8/master.8.html">master</a></b>(8) creates a new
       <b><a href="../man8/proxymap.8.html">proxymap</a></b>(8) server process, provided that the process limit is  not  exceeded.   Each  server  terminates
       after serving at least <b>$max_use</b> clients or after <b>$max_idle</b> seconds of idle time.

</pre><h4><b>SECURITY</b></h4><pre>
       The  <b><a href="../man8/proxymap.8.html">proxymap</a></b>(8)  server  opens only tables that are approved via the <b>proxy_read_maps</b> or <b>proxy_write_maps</b>
       configuration parameters, does not talk to users, and can run at fixed low privilege,  chrooted  or  not.
       However,  running  the  proxymap  server  chrooted  severely  limits  usability, because it can open only
       chrooted tables.

       The <b><a href="../man8/proxymap.8.html">proxymap</a></b>(8) server is not a trusted daemon process, and  must  not  be  used  to  look  up  sensitive
       information such as UNIX user or group IDs, mailbox file/directory names or external commands.

       In  Postfix  version  2.2  and  later,  the  proxymap  client  recognizes  requests to access a table for
       security-sensitive purposes, and opens the table directly. This allows the same  main.cf  setting  to  be
       used by sensitive and non-sensitive processes.

       Postfix-writable  data  files  should  be stored under a dedicated directory that is writable only by the
       Postfix mail system, such as the Postfix-owned <b>data_directory</b>.

       In particular, Postfix-writable files should never exist in root-owned directories. That would open up  a
       particular  type  of  security hole where ownership of a file or directory does not match the provider of
       its content.

</pre><h4><b>DIAGNOSTICS</b></h4><pre>
       Problems and transactions are logged to <b><a href="../man8/syslogd.8.html">syslogd</a></b>(8) or <b><a href="../man8/postlogd.8.html">postlogd</a></b>(8).

</pre><h4><b>BUGS</b></h4><pre>
       The <b><a href="../man8/proxymap.8.html">proxymap</a></b>(8) server provides service to multiple clients, and must therefore not be  used  for  tables
       that have high-latency lookups.

       The  <b><a href="../man8/proxymap.8.html">proxymap</a></b>(8)  read-write  service does not explicitly close lookup tables (even if it did, this could
       not be relied on, because the process may be terminated between table updates).  The  read-write  service
       should  therefore  not be used with tables that leave persistent storage in an inconsistent state between
       updates (for example, CDB). Tables that support "sync on update" should be safe  (for  example,  Berkeley
       DB) as should tables that are implemented by a real DBMS.

</pre><h4><b>CONFIGURATION</b> <b>PARAMETERS</b></h4><pre>
       On  busy  mail systems a long time may pass before <b><a href="../man8/proxymap.8.html">proxymap</a></b>(8) relevant changes to <b>main.cf</b> are picked up.
       Use the command "<b>postfix</b> <b>reload</b>" to speed up a change.

       The text below provides only a parameter summary. See <b><a href="../man5/postconf.5.html">postconf</a></b>(5) for more details including examples.

       <b>config_directory</b> <b>(see</b> <b>'postconf</b> <b>-d'</b> <b>output)</b>
              The default location of the Postfix main.cf and master.cf configuration files.

       <b>data_directory</b> <b>(see</b> <b>'postconf</b> <b>-d'</b> <b>output)</b>
              The directory with Postfix-writable data files (for example: caches, pseudo-random numbers).

       <b>daemon_timeout</b> <b>(18000s)</b>
              How much time a Postfix daemon process may take to handle a request before it is terminated  by  a
              built-in watchdog timer.

       <b>ipc_timeout</b> <b>(3600s)</b>
              The time limit for sending or receiving information over an internal communication channel.

       <b>max_idle</b> <b>(100s)</b>
              The  maximum  amount  of time that an idle Postfix daemon process waits for an incoming connection
              before terminating voluntarily.

       <b>max_use</b> <b>(100)</b>
              The maximal number of incoming connections that a  Postfix  daemon  process  will  service  before
              terminating voluntarily.

       <b>process_id</b> <b>(read-only)</b>
              The process ID of a Postfix command or daemon process.

       <b>process_name</b> <b>(read-only)</b>
              The process name of a Postfix command or daemon process.

       <b>proxy_read_maps</b> <b>(see</b> <b>'postconf</b> <b>-d'</b> <b>output)</b>
              The lookup tables that the <b><a href="../man8/proxymap.8.html">proxymap</a></b>(8) server is allowed to access for the read-only service.

       Available in Postfix 2.5 and later:

       <b>data_directory</b> <b>(see</b> <b>'postconf</b> <b>-d'</b> <b>output)</b>
              The directory with Postfix-writable data files (for example: caches, pseudo-random numbers).

       <b>proxy_write_maps</b> <b>(see</b> <b>'postconf</b> <b>-d'</b> <b>output)</b>
              The lookup tables that the <b><a href="../man8/proxymap.8.html">proxymap</a></b>(8) server is allowed to access for the read-write service.

       Available in Postfix 3.3 and later:

       <b>service_name</b> <b>(read-only)</b>
              The master.cf service name of a Postfix daemon process.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <a href="../man5/postconf.5.html">postconf</a>(5), configuration parameters
       <a href="../man5/master.5.html">master</a>(5), generic daemon options

</pre><h4><b>README</b> <b>FILES</b></h4><pre>
       Use "<b>postconf</b> <b>readme_directory</b>" or "<b>postconf</b> <b>html_directory</b>" to locate this information.
       DATABASE_README, Postfix lookup table overview

</pre><h4><b>LICENSE</b></h4><pre>
       The Secure Mailer license must be distributed with this software.

</pre><h4><b>HISTORY</b></h4><pre>
       The proxymap service was introduced with Postfix 2.0.

</pre><h4><b>AUTHOR(S)</b></h4><pre>
       Wietse Venema
       IBM T.J. Watson Research
       P.O. Box 704
       Yorktown Heights, NY 10598, USA

       Wietse Venema
       Google, Inc.
       111 8th Avenue
       New York, NY 10011, USA

                                                                                              <u><a href="../man8postfix/PROXYMAP.8postfix.html">PROXYMAP</a></u>(8postfix)
</pre>
 </div>
</div></section>
</div>
</body>
</html>