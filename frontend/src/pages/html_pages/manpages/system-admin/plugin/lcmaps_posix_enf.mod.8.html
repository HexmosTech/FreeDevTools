<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>lcmaps_posix_enf.mod - LCMAPS plugin to switch user identity</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/lcmaps-plugins-basic-posixenf">lcmaps-plugins-basic-posixenf_1.7.1-2_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       lcmaps_posix_enf.mod - LCMAPS plugin to switch user identity

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>lcmaps_posix_enf.mod</b>  [<b>-maxuid</b>  <u>number</u>  <u>of</u>  <u>uids</u>]  [<b>-maxpgid</b>  <u>number</u> <u>of</u> <u>primary</u> <u>gids</u>] [<b>-maxsgid</b> <u>number</u> <u>of</u>
       <u>secondary</u> <u>gids</u>]

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The Posix Enforcement plugin will enforce (apply) the  gathered  credentials  that  are  stacked  in  the
       datastructure  of the Plugin Manager.  The plugin will get the credential information that is gathered by
       one or more Acquisition plugins. This implies that at least one Acquisition should have been run prior to
       this Enforcement.  All of the gathered information will be checked by looking into the 'passwd'  file  of
       the  system  (FIXME:  shouldn't that be <b><a href="../man2/getpwent.2.html">getpwent</a></b>(2)?).  These files have information about all registered
       system account and its user groups.

       The Posix Enforcement plugin does not check whether the secondary groups have the primary UID as  a  mem‐
       ber, so it is possible to end up with more group memberships than what is defined in the group database.

       The  (BSD/POSIX) functions <b><a href="../man2/setreuid.2.html">setreuid</a></b>(2), <b><a href="../man2/setregid.2.html">setregid</a></b>(2) and <b><a href="../man2/setgroups.2.html">setgroups</a></b>(2) are used to change the privileges of
       the process from root to that of a local user.

</pre><h4><b>OPTIONS</b></h4><pre>
       <b>-maxuid</b> <u>number</u> <u>of</u> <u>uids</u>
              In principle, this will set the maximum number of allowed UIDs that this plugin will  handle,  but
              at  the  moment  only the first UID found will be enforced; the others will discarded.  By setting
              the value to a maximum there will be a failure raised when the amount of UIDs exceed the set maxi‐
              mum. Without this value the plugin will continue and will enforce only the first  found  value  in
              the credential data structure.

       <b>-maxpgid</b> <u>number</u> <u>of</u> <u>primary</u> <u>gids</u>
              This  will set the maximum number of allowed Primary GIDs that this plugin will handle, similar to
              <b>-maxuid</b>.  Also here only the first primary GID found will be taken into account.

       <b>-maxsgid</b> <u>number</u> <u>of</u> <u>secondary</u> <u>gids</u>
              This will set the maximum allowed Secondary GIDs that this plugin will  handle.   This  number  is
              limited  by the system (NGROUPS) and is usually 32. If the plugin cannot determine the system val‐
              ue, it limits itself to 32.

       The remaining options are considered dangerous, as they have the potential to allow a client  process  to
       gain root privileges.  <b>The</b> <b>use</b> <b>of</b> <b>these</b> <b>options</b> <b>is</b> <b>strongly</b> <b>discouraged.</b>

       <b>-set_only_euid</b> {<b>yes</b>|<b>no</b>}
              The result of setting this option to 'yes' is that only the effective uid is set.  In other words,
              it is still possible to regain root (uid) privileges for the process.  This is definitely undesir‐
              able  if  this  module  is used from a process like the gatekeeper, since it would be possible for
              user jobs to get root privileges.

       <b>-set_only_egid</b> {<b>yes</b>|<b>no</b>}
              Analogue to the previous option the result of setting this option to 'yes' is that only the effec‐
              tive (primary) gid is set.  In other words, it is still possible to regain root  (gid)  privileges
              for  the  process.   This is definitely undesirable if this module is used from a process like the
              gatekeeper, since it would be possible for user jobs to get root privileges. Possibly this  option
              should  be  set  if the module is used by gridFTP, since this service does not spawn user jobs and
              has to regain root pivileges at the end.

</pre><h4><b>RETURN</b> <b>VALUES</b></h4><pre>
       <b>LCMAPS_MOD_SUCCESS</b>
              Success.

       <b>LCMAPS_MOD_FAIL</b>
              Failure.

</pre><h4><b>BUGS</b></h4><pre>
       Please  report  any  errors  to  the  Nikhef  Grid  Middleware   Security   Team   &lt;grid-mw-security-sup‐
       <a href="mailto:port@nikhef.nl">port@nikhef.nl</a>&gt;.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man5/lcmaps.db.5.html">lcmaps.db</a></b>(5), <b><a href="../man3/lcmaps.3.html">lcmaps</a></b>(3), <b><a href="../man3/getpwent.3.html">getpwent</a></b>(3), <b><a href="../man3/getgrent.3.html">getgrent</a></b>(3), <b><a href="../man2/setreuid.2.html">setreuid</a></b>(2), <b><a href="../man2/setregid.2.html">setregid</a></b>(2), <b><a href="../man2/setgroups.2.html">setgroups</a></b>(2).

</pre><h4><b>AUTHORS</b></h4><pre>
       LCMAPS  and  the  LCMAPS  plug-ins  were  written  by  the Grid Middleware Security Team &lt;grid-mw-securi‐
       <a href="mailto:ty@nikhef.nl">ty@nikhef.nl</a>&gt;.

                                                 March 22, 2011                              <u><a href="../man8/LCMAPS_POSIX_ENF.8.html">LCMAPS_POSIX_ENF</a></u>(8)
</pre>
 </div>
</div></section>
</div>
</body>
</html>