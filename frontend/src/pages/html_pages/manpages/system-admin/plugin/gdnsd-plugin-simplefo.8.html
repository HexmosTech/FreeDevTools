<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>gdnsd-plugin-simplefo - gdnsd plugin for simple primary->secondary address failover</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/gdnsd">gdnsd_3.8.3-2_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       gdnsd-plugin-simplefo - gdnsd plugin for simple primary-&gt;secondary address failover

</pre><h4><b>SYNOPSIS</b></h4><pre>
       Example gdnsd config fragment using this plugin:

         plugins =&gt; {
           simplefo =&gt; {
             service_types =&gt; [ www ],
             pubwww =&gt; {
               primary =&gt; 192.0.2.1
               secondary =&gt; 192.0.2.100
             }
             www6 =&gt; {
               primary =&gt; 2001:DB8::1
               secondary =&gt; 2001:DB8::100
             }
             mixed =&gt; {
               service_types =&gt; [ www, xmpp ]
               addrs_v4 =&gt; {
                 primary =&gt; 192.0.2.1
                 secondary =&gt; 192.0.2.100
               }
               addrs_v6 =&gt; {
                 service_types =&gt; up
                 primary =&gt; 2001:DB8::1
                 secondary =&gt; 2001:DB8::100
               }
             }
           }
         }

       Example zonefile RRs:

         www 180 DYNA simplefo!pubwww
         www6 180 DYNA simplefo!www6
         mix 180 DYNA simplefo!mixed

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>gdnsd-plugin-simplefo</b> is designed to do simple active/passive failover between one primary address and
       one secondary address.  The status of the addresses are checked with standard gdnsd "service_types"
       monitoring.  If you need more than a simple two-address failover list, the "metafo" plugin is more
       appropriate.

</pre><h4><b>TOP-LEVEL</b> <b>PLUGIN</b> <b>CONFIG</b></h4><pre>
       At the top level of the plugin's configuration stanza, the special parameter "service_types" is
       supported. These sets the default per-resource "service_types" for all resources.  The default default
       "service_types" is "[ up ]", which simply sets them all "UP" statically.

       The rest of the hash entries at the top level are the names of the resources you define.  Each resource
       gets a configuration hash of its own for containing resource-specific address info.

</pre><h4><b>RESOURCE</b> <b>CONFIG</b></h4><pre>
       Within a resource, "service_types" is again supported, to set the monitored service type(s) for this
       specific resource.

       If "addrs_v4" is defined, it must be a hash containing two keys: "primary" and "secondary", each of which
       has an IPv4 string address value.

       Similarly, if "addrs_v6" is defined, it must be a hash containing two keys: "primary" and "secondary",
       each of which has an IPv6 string address value.

       If neither of those two sub-stanzas is defined, you must define a single pair of "primary" and
       "secondary" addresses for the whole resource.  These can be of either address family, so long as they are
       both the same family.

       When "addrs_v4" and/or "addrs_v6" are used, "service_types" can also be overridden within each, for
       different behavior per-address-family (e.g.  force one protocol always up/down).

</pre><h4><b>OPERATIONAL</b> <b>MECHANICS</b></h4><pre>
       For each address family for which you have supplied data, the following logic is applied independently:

       •   First,  the  worst monitored state of all "service_types" checks for the primary address is obtained.
           If this state is "UP", the primary address is used.

       •   If the primary address was "DOWN", the secondary address is checked: If the  secondary  is  "UP",  it
           will be used.  If the secondary is also "DOWN", then the primary is used.

       •   In any case other than the primary being exactly "UP", the response RR-set TTL from the zonefile will
           be cut in half for both address families.

       If  both  "primary"  and "secondary" were "DOWN" for <b>either</b> address family, this plugin will signal total
       resource failure to any upstream module (geoip or metafo).  The cutting of the TTL only happens once  for
       all address RRs, even if both families had a non-"UP" primary.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man5/gdnsd.config.5.html">gdnsd.config</a></b>(5), <b><a href="../man5/gdnsd.zonefile.5.html">gdnsd.zonefile</a></b>(5), <b><a href="../man8/gdnsd.8.html">gdnsd</a></b>(8), <b><a href="../man8/gdnsd-plugin-multifo.8.html">gdnsd-plugin-multifo</a></b>(8)

       The gdnsd manual.

</pre><h4><b>COPYRIGHT</b> <b>AND</b> <b>LICENSE</b></h4><pre>
       Copyright (c) 2012 Brandon L Black &lt;<a href="mailto:blblack@gmail.com">blblack@gmail.com</a>&gt;

       This file is part of gdnsd.

       gdnsd  is  free  software:  you  can  redistribute it and/or modify it under the terms of the GNU General
       Public License as published by the Free Software Foundation, either version 3 of the License, or (at your
       option) any later version.

       gdnsd is distributed in the hope that it will be useful, but  WITHOUT  ANY  WARRANTY;  without  even  the
       implied  warranty  of  MERCHANTABILITY  or  FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public
       License for more details.

       You should have received a copy of the GNU  General  Public  License  along  with  gdnsd.   If  not,  see
       &lt;<a href="http://www.gnu.org/licenses/">http://www.gnu.org/licenses/</a>&gt;.

gdnsd 3.8.3                                        2025-02-16                           <u><a href="../man8/GDNSD-PLUGIN-SIMPLEFO.8.html">GDNSD-PLUGIN-SIMPLEFO</a></u>(8)
</pre>
 </div>
</div></section>
</div>
</body>
</html>