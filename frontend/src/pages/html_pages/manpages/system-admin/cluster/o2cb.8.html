<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>o2cb - Cluster registration utility for the O2CB cluster stack.</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/ocfs2-tools">ocfs2-tools_1.8.8-3build1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       o2cb - Cluster registration utility for the <u>O2CB</u> cluster stack.

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>o2cb</b> [<b>--config-file</b>=path] [-<b>h</b>|<b>--help</b>] [-<b>v</b>|<b>--verbose</b>] [<b>-V</b>|<b>--version</b>] <u>COMMAND</u> [<u>ARGS</u>]

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b><a href="../man8/o2cb.8.html">o2cb</a>(8)</b>  is  used  to  add,  remove and list the information in the <b>O2CB</b> cluster configuration file. This
       utility is also used to register and unregister the cluster, as well as start and stop global heartbeat.

       The default location of the configuration file, /etc/ocfs2/cluster.conf,  can  be  overridden  using  the
       --config-file option.

</pre><h4><b>OPTIONS</b></h4><pre>
       <b>--config-file</b> <u>config-file</u>
              Specify  a  path  to  the  configuration  file.  If  not provided, it will use the default path of
              /etc/ocfs2/cluster.conf.

       <b>-v,</b> <b>--verbose</b>
              Verbose mode.

       <b>-h,</b> <b>--help</b>
              Help.

       <b>-V,</b> <b>--version</b>
              Show version and exit.

</pre><h4><b>O2CB</b> <b>COMMANDS</b></h4><pre>
       <b>add-cluster</b> <u>cluster-name</u>
              Adds a cluster to the configuration file. The <b>O2CB</b> configuration file can hold multiple  clusters.
              However, only one cluster can be active at any time.

       <b>remove-cluster</b> <u>cluster-name</u>
              Removes  a  cluster  from the configuration file. This command removes all the nodes and heartbeat
              regions assigned to the cluster.

       <b>add-node</b> <u>cluster-name</u> <u>node-name</u> [<b>--ip</b> <u>ip-address</u>] [<b>--port</b> <u>port</u>] [<b>--number</b> <u>node-number</u>]
              Adds a node to the cluster in the configuration file. It accepts three optional arguments.  If not
              provided, the <u>ip-address</u> defaults to the one assigned to the <u>node-name</u>, <u>port</u> to  7777,  and  <u>node-</u>
              <u>number</u> to the lowest unused node number.

       <b>remove-node</b> <u>cluster-name</u> <u>node-name</u>
              Removes a node from the cluster in the configuration file.

       <b>add-heartbeat</b> <u>cluster-name</u> [<u>uuid</u>|<u>device</u>]
              Adds a heartbeat region to the cluster in the configuration file.

       <b>remove-heartbeat</b> <u>cluster-name</u> [<u>uuid</u>|<u>device</u>]
              Removes a heartbeat region from the cluster in the configuration file.

       <b>heartbeat-mode</b> <u>cluster-name</u> [<b>local</b>|<b>global</b>]
              Sets the heartbeat mode for the cluster in the configuration file.

       <b>list-clusters</b>
              Lists all the cluster names in the configuration file.

       <b>list-cluster</b> <u>cluster-name</u> <b>--oneline</b>
              Lists all the nodes and heartbeat regions associated with the cluster in the configuration file.

       <b>list-nodes</b> <u>cluster-name</u> <b>--oneline</b>
              Lists all the nodes associated with the cluster in the configuration file.

       <b>list-heartbeats</b> <u>cluster-name</u> <b>--oneline</b>
              Lists all the heartbeat regions associated with the cluster in the configuration file.

       <b>register-cluster</b> <u>cluster-name</u>
              Registers  the cluster listed in the configuration file with configfs.  If called when the cluster
              is already registered, it will update configfs with the current configuration.

       <b>unregister-cluster</b> <u>cluster-name</u>
              Unregisters the cluster from configfs.

       <b>start-heartbeat</b> <u>cluster-name</u>
              Starts global heartbeat on all regions for the cluster as listed in  the  configuration  file.  If
              repeated,  it  will  start  heartbeat  on  new  regions and stop on regions since removed. It will
              silently exit if global heartbeat has not been enabled.

       <b>stop-heartbeat</b> <u>cluster-name</u>
              Stops global heartbeat on all regions for the cluster. It will silently exit if  global  heartbeat
              has not been enabled.

       <b>cluster-status</b> <u>[cluster-name]</u>
              Shows  whether  the  given  cluster  is offline or online. If no cluster is provided, it shows the
              currently active cluster, if any.

</pre><h4><b>EXAMPLE</b></h4><pre>
       To create a cluster, mycluster having two nodes, node1 and node2, do:

       $ o2cb add-cluster mycluster
       $ o2cb add-node mycluster node1 --ip 10.10.10.1
       $ o2cb add-node mycluster node2 --ip 10.10.10.2

       <b>To</b> <b>specify</b> <b>a</b> <b>global</b> <b>heartbeat</b> <b>device,</b> <b>/dev/sda1,</b> <b>do:</b>

       <b>$</b> <b>o2cb</b> <b>add-heartbeat</b> <b>mycluster</b> <b>/dev/sda1</b>

       To enable global heartbeat, do:

       $ o2cb heartbeat-mode mycluster global

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man7/o2cb.7.html">o2cb</a>(7)</b> <b><a href="../man5/o2cb.sysconfig.5.html">o2cb.sysconfig</a>(5)</b> <b><a href="../man5/ocfs2.cluster.conf.5.html">ocfs2.cluster.conf</a>(5)</b>

</pre><h4><b>AUTHORS</b></h4><pre>
       Oracle Corporation

</pre><h4><b>COPYRIGHT</b></h4><pre>
       Copyright Â© 2010, 2012 Oracle. All rights reserved.

Version 1.8.8                                     January 2012                                           <u><a href="../man8/o2cb.8.html">o2cb</a></u>(8)
</pre>
 </div>
</div></section>
</div>
</body>
</html>