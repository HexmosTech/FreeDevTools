<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>o2cluster - Change cluster stack stamped on an OCFS2 file system.</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/ocfs2-tools">ocfs2-tools_1.8.8-3build1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       o2cluster - Change cluster stack stamped on an <u>OCFS2</u> file system.

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>o2cluster</b> [<b>-o</b>|<b>--show-ondisk</b>] [<b>-r</b>|<b>--show-running</b>] [<b>-u</b>|<b>--update</b>[=&lt;clusterstack&gt;]] [<b>-hvVyn</b>] [device]

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>o2cluster</b>  is used to change the cluster stack stamped on an <b>OCFS2</b> file system.  It also used to list the
       active cluster stack and the one stamped on-disk. This utility does not expect the cluster to be  online.
       It  only  updates  the  file  system if it is reasonably assured that it is not in-use on any other node.
       Clean journals implies the file system is not in-use. This utility aborts if it detects  even  one  dirty
       journal.

       <u>Before</u>  <u>using</u>  <u>this</u> <u>utility,</u> <u>the</u> <u>user</u> <u>should</u> <u>use</u> <u>other</u> <u>means</u> <u>to</u> <u>ensure</u> <u>that</u> <u>the</u> <u>volume</u> <u>is</u> <u>not</u> <u>in-use,</u> <u>and</u>
       <u>more</u> <u>importantly,</u> <u>not</u> <u>about</u> <u>to</u> <u>be</u> <u>put</u> <u>in-use</u>. While clean journals implies the file system is not in-use,
       there is a tiny window after the check and before the update during which another node  could  mount  the
       file system using the older cluster stack.

       If  a  dirty  journal  is detected, it implies one of two scenarios. Either the file system is mounted on
       another node, or, the last node to have it mounted, crashed. There  is  no  way,  short  of  joining  the
       cluster,  that the utility can use to differentiate between the two. Considering this utility is targeted
       to be used in scenarios when the user is looking to change  the  on-disk  cluster  stack,  it  becomes  a
       chicken-and-egg problem.

       If  one  were  to run into this scenario, the user should manually re-confirm that the file system is not
       in-use on another node and then run <b><a href="../man8/fsck.ocfs2.8.html">fsck.ocfs2</a>(8)</b>. It will update the on-disk cluster stack to the active
       cluster stack, and, do a complete file system check.

</pre><h4><b>SPECIFYING</b> <b>CLUSTER</b> <b>STACK</b></h4><pre>
       The cluster stack can be specified in one of two forms. The  first  as  <b>default</b>,  denoting  the  original
       <u>classic</u> <u>o2cb</u> cluster stack with local heartbeat. The second as a triplet with the stack name, the cluster
       name and the cluster flags separated by commas. Like <b>o2cb,mycluster,global</b>.

       The valid stack names are <b>o2cb</b>, <b>pcmk</b>, and <b>cman</b>.

       The  cluster  name can be up to 16 characters. The <u>o2cb</u> stack further restricts the names to contain only
       alphanumeric characters.

       The valid flags for the <u>o2cb</u> stack are <b>local</b> and <b>global</b>, denoting the two heartbeat modes. The only valid
       flag for the other stacks is <b>none</b>.

</pre><h4><b>OPTIONS</b></h4><pre>
       <b>-o</b>|<b>--show-ondisk</b>
              Shows the cluster stack stamped on-disk.

       <b>-r</b>|<b>--show-running</b>
              Shows the active cluster stack.

       <b>-u</b>|<b>--update</b>[=<u>&lt;clusterstack&gt;</u>]
              Updates the on-disk cluster stack with the one provided. If no  cluster  stack  is  provided,  the
              utility detects the active cluster stack and stamps it on-disk.

       <b>-v,</b> <b>--verbose</b>
              Verbose mode.

       <b>-V,</b> <b>--version</b>
              Show version and exit.

       <b>-y,</b> <b>--yes</b>
              Always answer Yes in interactive command line.

       <b>-n,</b> <b>--no</b>
              Always answer No in interactive command line.

</pre><h4><b>EXAMPLES</b></h4><pre>
       # o2cluster -r
       o2cb,myactivecluster,global

       # o2cluster -o /dev/sda1
       o2cb,mycluster,global

       # o2cluster --update=o2cb,yourcluster,global /dev/sdb1
       Changing the clusterstack from o2cb,mycluster,global to o2cb,yourcluster,global. Continue? y
       Updated successfully.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man8/debugfs.ocfs2.8.html">debugfs.ocfs2</a>(8)</b>   <b><a href="../man8/fsck.ocfs2.8.html">fsck.ocfs2</a>(8)</b>   <b><a href="../man8/fsck.ocfs2.checks.8.html">fsck.ocfs2.checks</a>(8)</b>   <b><a href="../man8/mkfs.ocfs2.8.html">mkfs.ocfs2</a>(8)</b>  <b><a href="../man8/mount.ocfs2.8.html">mount.ocfs2</a>(8)</b>  <b><a href="../man8/mounted.ocfs2.8.html">mounted.ocfs2</a>(8)</b>
       <b><a href="../man8/o2image.8.html">o2image</a>(8)</b> <b><a href="../man1/o2info.1.html">o2info</a>(1)</b> <b><a href="../man8/tunefs.ocfs2.8.html">tunefs.ocfs2</a>(8)</b>

</pre><h4><b>AUTHORS</b></h4><pre>
       Oracle Corporation

</pre><h4><b>COPYRIGHT</b></h4><pre>
       Copyright Â© 2011, 2012 Oracle. All rights reserved.

Version 1.8.8                                     January 2012                                      <u><a href="../man8/o2cluster.8.html">o2cluster</a></u>(8)
</pre>
 </div>
</div></section>
</div>
</body>
</html>