<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ntpkeygen - create and manage NTP host keys</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/ntpsec">ntpsec_1.2.3+dfsg1-3_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       ntpkeygen - create and manage NTP host keys

</pre><h4><b>SYNOPSIS</b></h4><pre>
       ntpkeygen [-V]

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This program generates a file containing keys that can be used in NTP’s symmetric key cryptography.

       The program produces a file containing ten pseudo-random printable ASCII strings suitable for the MD5
       message digest algorithm. It also produces an additional ten hex-encoded random bit strings suitable for
       the SHA-1 and other message digest algorithms.

       The keys file must be distributed and stored using secure means beyond the scope of NTP itself. The keys
       can also be used as passwords for the ntpq &lt;ntpq.html&gt; utility program.

</pre><h4><b>COMMAND</b> <b>LINE</b> <b>OPTIONS</b></h4><pre>
       -V, --version
           Print the version string and exit.

</pre><h4><b>RUNNING</b> <b>THE</b> <b>PROGRAM</b></h4><pre>
       The simplest way to run the ntpkeygen program is logged in directly as root. The recommended procedure is
       to change to the keys directory, usually /etc/ntpsec/, then run the program. Then chown the output file
       to ntpsec:ntpsec. It should be mode 400.

           <b>Warning</b>

           ntpkeygen uses the system randomness source. On a POSIX system, this is usually /dev/urandom.
           Immediately after a reboot, on any OS, there may not be sufficient entropy available for this program
           to perform well. Do not run this program from any startup scripts. Only run this program on an active
           host with a lot of available entropy.

</pre><h4><b>KEY</b> <b>FILE</b> <b>ACCESS</b> <b>AND</b> <b>LOCATION</b></h4><pre>
       File names begin with the prefix <u>ntpkey</u> and end with the postfix <u>hostname.filestamp</u>, where <u>hostname</u> is
       the owner name, usually the string returned by the Unix gethostname() routine, and <u>filestamp</u> is the NTP
       seconds when the file was generated, in decimal digits.

       ntpkeygen also makes a soft link from ntp.keys to the generated file. ntp.keys is the normal file used in
       ntp.conf.

</pre><h4><b>RANDOM</b> <b>SEED</b> <b>FILE</b></h4><pre>
       All key generation schemes must have means to randomize the entropy seed used to initialize the internal
       pseudo-random number generator used by the library routines.

       It is important to understand that entropy must be evolved for each generation, for otherwise the random
       number sequence would be predictable. Various means dependent on external events, such as keystroke
       intervals can be used to do this and some systems have built-in entropy sources.

       This implementation uses Python’s random.SystemRandom class, which relies on os.urandom(). The security
       of os.urandom() is improved in Python 3.5+ &lt;https://docs.python.org/library/os.html#os.urandom&gt;.

</pre><h4><b>CRYPTOGRAPHIC</b> <b>DATA</b> <b>FILES</b></h4><pre>
       Unlike NTP Classic, this implementation generates only AES keys, not MD5 or SHA1.

       Since the file contains private shared keys, it should be visible only to root or ntp.

       In order to use a shared key, the line to be used must also be setup on the target server.

       This file is also used to authenticate remote configuration commands used by the <a href="../man1/ntpq.1.html">ntpq</a>(1) utility.

       Comments may appear in the file and are preceded with the # character.

       Following any headers the keys are entered one per line in the format:
       ┌───────┬────────────────────────────────────┐
       │       │                                    │
       │ Field │ Meaning                            │
       ├───────┼────────────────────────────────────┤
       │       │                                    │
       │ keyno │ Positive integer in the range      │
       │       │ 1-65,535                           │
       ├───────┼────────────────────────────────────┤
       │       │                                    │
       │ type  │ Type of key (MD5, SHA-1, AES-CMAC  │
       │       │ etc). This program generates only  │
       │       │ AES.                               │
       ├───────┼────────────────────────────────────┤
       │       │                                    │
       │ key   │ the actual key, printable ASCII or │
       │       │ hex                                │
       └───────┴────────────────────────────────────┘

</pre><h4><b>EXIT</b> <b>STATUS</b></h4><pre>
       One of the following exit values will be returned:

       0 (EXIT_SUCCESS)
           Successful program execution.

       1 (EXIT_FAILURE)
           The operation failed or the command syntax was not valid.

NTPsec                                             2024-05-07                                       <u><a href="../man8/NTPKEYGEN.8.html">NTPKEYGEN</a></u>(8)
</pre>
 </div>
</div></section>
</div>
</body>
</html>