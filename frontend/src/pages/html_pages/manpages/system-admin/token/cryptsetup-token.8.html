<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>cryptsetup-token - manage LUKS2 tokens</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/cryptsetup-bin">cryptsetup-bin_2.8.0-1ubuntu1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       cryptsetup-token - manage LUKS2 tokens

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>cryptsetup</b> <u>token</u> <b>&lt;add|remove|import|export|unassign&gt;</b> <b>[&lt;options&gt;]</b> <b>&lt;device&gt;</b>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       Action <u>add</u> creates a new keyring token to enable auto-activation of the device. For the auto-activation,
       the passphrase must be stored in keyring with the specified description. Usually, the passphrase should
       be stored in <u>user</u> or <u>user-session</u> keyring. The <u>token</u> command is supported only for LUKS2.

       For adding new keyring token, option --key-description is mandatory. Also, new token is assigned to key
       slot specified with --key-slot option or to all active key slots in the case --key-slot option is
       omitted.

       To remove existing token, specify the token ID which should be removed with --token-id option.

       <b>WARNING:</b> The action <u>token</u> <u>remove</u> removes any token type, not just <u>keyring</u> type from token slot specified
       by --token-id option.

       Action <u>import</u> can store arbitrary valid token json in LUKS2 header. It may be passed via standard input
       or via file passed in --json-file option. If you specify --key-slot then successfully imported token is
       also assigned to the key slot.

       Action <u>export</u> writes requested token JSON to a file passed with --json-file or to standard output.

       Action <u>unassign</u> removes token binding to specified keyslot. Both token and keyslot must be specified by
       --token-id and --key-slot parameters.

       If --token-id is used with action <u>add</u> or action <u>import</u> and a token with that ID already exists, option
       --token-replace can be used to replace the existing token.

       <b>&lt;options&gt;</b> can be [--header, --token-id, --key-slot, --key-description, --disable-external-tokens,
       --disable-locks, --disable-keyring, --json-file, --token-replace, --unbound, --external-tokens-path].

</pre><h4><b>OPTIONS</b></h4><pre>
       <b>--batch-mode,</b> <b>-q</b>
           Suppresses all confirmation questions. Use with care!

           If the --verify-passphrase option is not specified, this option also switches off the passphrase
           verification.

       <b>--debug</b> <b>or</b> <b>--debug-json</b>
           Run in debug mode with full diagnostic logs. Debug output lines are always prefixed by <b>#</b>.

           If --debug-json is used, additional LUKS2 JSON data structures are printed.

       <b>--disable-external-tokens</b>
           Disable loading of plugins for external LUKS2 tokens.

       <b>--disable-keyring</b>
           Do not load volume key in kernel keyring and store it directly in the dm-crypt target instead. This
           option is supported only for the LUKS2 type.

       <b>--disable-locks</b>
           Disable lock protection for metadata on disk. This option is valid only for LUKS2 and ignored for
           other formats.

           <b>WARNING:</b> Do not use this option unless you run cryptsetup in a restricted environment where locking
           is impossible to perform (where <a href="file:/run">/run</a> directory cannot be used).

       <b>--external-tokens-path</b> <u>absolute_path</u>
           Override system directory path where cryptsetup searches for external token handlers (or token
           plugins). It must be absolute path (starting with '/' character).

       <b>--header</b> <b>&lt;device</b> <b>or</b> <b>file</b> <b>storing</b> <b>the</b> <b>LUKS</b> <b>header&gt;</b>
           Use a detached (separated) metadata device or file where the LUKS header is stored. This option
           allows one to store ciphertext and LUKS header on different devices.

           For commands that change the LUKS header (e.g. <u>luksAddKey</u>), specify the device or file with the LUKS
           header directly as the LUKS device.

       <b>--help,</b> <b>-?</b>
           Show help text and default parameters.

       <b>--json-file</b>
           Read token JSON from a file or write token to it. --json-file=- reads JSON from standard input or
           writes it to standard output respectively.

       <b>--key-description</b> <b>&lt;text&gt;</b>
           Set key description in keyring that will be used for passphrase retrieval.

       <b>--key-slot,</b> <b>-S</b> <b>&lt;0-N&gt;</b>
           For LUKS operations that add key material, this option allows you to specify which key slot is
           selected for the new key.

           The maximum number of key slots depends on the LUKS version. LUKS1 can have up to 8 key slots. LUKS2
           can have up to 32 key slots based on key slot area size and key size, but a valid key slot ID can
           always be between 0 and 31 for LUKS2.

       <b>--token-id</b>
           Specify token number. If omitted, first unused token id is used when adding or importing new token.

       <b>--token-replace</b>
           Replace an existing token when adding or importing a token with the --token-id option.

       <b>--unbound</b>
           Creates new LUKS2 keyring token assigned to no keyslot. Usable only with <u>add</u> action.

       <b>--usage</b>
           Show short option help.

       <b>--version,</b> <b>-V</b>
           Show the program version.

</pre><h4><b>REPORTING</b> <b>BUGS</b></h4><pre>
       Report bugs at <b>cryptsetup</b> <b>mailing</b> <b>list</b> &lt;<a href="mailto:cryptsetup@lists.linux.dev">cryptsetup@lists.linux.dev</a>&gt; or in <b>Issues</b> <b>project</b> <b>section</b>
       &lt;https://gitlab.com/cryptsetup/cryptsetup/-/issues/new&gt;.

       Please attach output of the failed command with --debug option added.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b>Cryptsetup</b> <b>FAQ</b> &lt;https://gitlab.com/cryptsetup/cryptsetup/wikis/FrequentlyAskedQuestions&gt;

       <b><a href="../man8/cryptsetup.8.html">cryptsetup</a></b>(8), <b><a href="../man8/integritysetup.8.html">integritysetup</a></b>(8) and <b><a href="../man8/veritysetup.8.html">veritysetup</a></b>(8)

</pre><h4><b>CRYPTSETUP</b></h4><pre>
       Part of <b>cryptsetup</b> <b>project</b> &lt;https://gitlab.com/cryptsetup/cryptsetup/&gt;.

cryptsetup 2.8.0                                   2025-07-25                                <u><a href="../man8/CRYPTSETUP-TOKEN.8.html">CRYPTSETUP-TOKEN</a></u>(8)
</pre>
 </div>
</div></section>
</div>
</body>
</html>