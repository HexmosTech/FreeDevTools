<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>simple - basic example action</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/iproute2">iproute2_6.14.0-1ubuntu3_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       simple - basic example action

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>tc</b> ... <b>action</b> <b>simple</b> [ <b>sdata</b> <u>STRING</u> ] [ <b>index</b> <u>INDEX</u> ] [ <u>CONTROL</u> ]

       <u>CONTROL</u> := { <b>reclassify</b> | <b>pipe</b> | <b>drop</b> | <b>continue</b> | <b>ok</b> }

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This  is  a  pedagogical  example rather than an actually useful action. Upon every access, it prints the
       given <u>STRING</u> which may be of arbitrary length.

</pre><h4><b>OPTIONS</b></h4><pre>
       <b>sdata</b> <u>STRING</u>
              The actual string to print.

       <b>index</b> <u>INDEX</u>
              Optional action index value.

       <u>CONTROL</u>
              Indicate how <b>tc</b> should proceed after executing the action.  For  a  description  of  the  possible
              <u>CONTROL</u> values, see <b><a href="../man8/tc-actions.8.html">tc-actions</a></b>(8).

</pre><h4><b>EXAMPLES</b></h4><pre>
       The following example makes the kernel yell "Incoming ICMP!" every time it sees an incoming ICMP on eth0.
       Steps are:

       1)  Add an ingress qdisc point to eth0

       2)  Start a chain on ingress of eth0 that first matches ICMP then invokes the simple action to shout.

       3)  display stats and show that no packet has been seen by the action

       4)  Send one ping packet to google (expect to receive a response back)

       5)  grep the logs to see the logged message

       6)  display stats again and observe increment by 1

             $ tc qdisc add dev eth0 ingress
             $ tc filter add dev eth0 parent ffff: protocol ip prio 5 \
                 u32 match ip protocol 1 0xff flowid 1:1 action simple sdata "Incoming ICMP"

             $ sudo tc -s filter ls dev eth0 parent ffff:
              filter protocol ip pref 5 u32
              filter protocol ip pref 5 u32 fh 800: ht divisor 1
              filter protocol ip pref 5 u32 fh 800::800 order 2048 key ht 800 bkt 0 flowid 1:1
                match 00010000/00ff0000 at 8
                action order 1: Simple &lt;Incoming ICMP&gt;
                 index 4 ref 1 bind 1 installed 29 sec used 29 sec
                 Action statistics:
                     Sent 0 bytes 0 pkt (dropped 0, overlimits 0 requeues 0)
                     backlog 0b 0p requeues 0

             $ ping -c 1 www.google.ca
             PING www.google.ca (74.125.225.120) <a href="../man84/56.84.html">56</a>(84) bytes of data.
             64 bytes from ord08s08-in-f24.1e100.net (74.125.225.120): icmp_req=1 ttl=53 time=31.3 ms

             --- www.google.ca ping statistics ---
             1 packets transmitted, 1 received, 0% packet loss, time 0ms
             rtt min/avg/max/mdev = 31.316/31.316/31.316/0.000 ms

             $ dmesg | grep simple
             [135354.473951] simple: Incoming ICMP_1

             $ sudo tc/tc -s filter ls dev eth0 parent ffff:
             filter protocol ip pref 5 u32
             filter protocol ip pref 5 u32 fh 800: ht divisor 1
             filter protocol ip pref 5 u32 fh 800::800 order 2048 key ht 800 bkt 0 flowid 1:1
               match 00010000/00ff0000 at 8
                action order 1: Simple &lt;Incoming ICMP&gt;
                 index 4 ref 1 bind 1 installed 206 sec used 67 sec
                Action statistics:
                Sent 84 bytes 1 pkt (dropped 0, overlimits 0 requeues 0)
                backlog 0b 0p requeues 0

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man8/tc.8.html">tc</a></b>(8) <b><a href="../man8/tc-actions.8.html">tc-actions</a></b>(8)

iproute2                                           12 Jan 2015                            <u>Simple</u> <u>action</u> <u>in</u> <u><a href="../man8/tc.8.html">tc</a></u>(8)
</pre>
 </div>
</div></section>
</div>
</body>
</html>