<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>runsv - starts and monitors a service and optionally an appendant log service</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/runit">runit_2.2.0-3ubuntu1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       runsv - starts and monitors a service and optionally an appendant log service

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>runsv</b> <u>service</u>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <u>service</u> must be a directory.

       <b>runsv</b>  switches  to  the  directory  <u>service</u> and starts ./run.  If .<a href="file:/run">/run</a> exits and ./finish exists, <b>runsv</b>
       starts ./finish.  If ./finish doesn't exist or ./finish exits, <b>runsv</b> restarts ./run.

       If .<a href="file:/run">/run</a> or ./finish exit immediately, <b>runsv</b> waits a second before starting ./finish or restarting ./run.

       Two arguments are given to ./finish.  The first one is .<a href="file:/run">/run</a>'s exit code, or  -1  if  .<a href="file:/run">/run</a>  didn't  exit
       normally.   The  second one is the least significant byte of the exit status as determined by <b><a href="../man2/waitpid.2.html">waitpid</a></b>(2);
       for instance it is 0 if .<a href="file:/run">/run</a> exited normally, and the signal number if .<a href="file:/run">/run</a> was terminated by a signal.
       If <b>runsv</b> cannot start .<a href="file:/run">/run</a> for some reason, the exit code is 111 and the status is 0.

       If the file <u>service</u>/down exists, <b>runsv</b> does not start .<a href="file:/run">/run</a>  immediately.   The  control  interface  (see
       below) can be used to start the service and to give other commands to <b>runsv</b>.

       If  the  directory <u>service</u>/log exists, <b>runsv</b> creates a pipe, redirects <u>service</u><a href="file:/run">/run</a>'s and <u>service</u>/finish's
       standard output to the pipe, switches to the directory <u>service</u>/log and starts .<a href="file:/run">/run</a> script. The  standard
       input of the log service is redirected to read from the pipe.

       <b>runsv</b>  maintains status information in a binary format (compatible to the daemontools' <b>supervise</b> program)
       in  <u>service</u>/supervise/status  and  <u>service</u>/log/supervise/status,  and  in  a  human-readable  format   in
       <u>service</u>/supervise/stat, <u>service</u>/log/supervise/stat, <u>service</u>/supervise/pid, <u>service</u>/log/supervise/pid.

</pre><h4><b>CONTROL</b></h4><pre>
       The named pipes <u>service</u>/supervise/control, and (optionally) <u>service</u>/log/supervise/control are provided to
       give  commands  to  <b>runsv</b>.   You  can use <b><a href="../man8/sv.8.html">sv</a></b>(8) to control the service or just write one of the following
       characters to the named pipe:

       <b>u</b>      Up.  If the service is not running, start it.  If the service stops, restart it.

       <b>d</b>      Down.  If the service is running, send it a TERM signal, and then a CONT signal.  If .<a href="file:/run">/run</a>  exits,
              start ./finish if it exists.  After it stops, do not restart service.

       <b>o</b>      Once.  If the service is not running, start it.  Do not restart it if it stops.

       <b>p</b>      Pause.  If the service is running, send it a STOP signal.

       <b>c</b>      Continue.  If the service is running, send it a CONT signal.

       <b>h</b>      Hangup.  If the service is running, send it a HUP signal.

       <b>a</b>      Alarm.  If the service is running, send it a ALRM signal.

       <b>i</b>      Interrupt.  If the service is running, send it a INT signal.

       <b>q</b>      Quit.  If the service is running, send it a QUIT signal.

       <b>1</b>      User-defined 1.  If the service is running, send it a USR1 signal.

       <b>2</b>      User-defined 2.  If the service is running, send it a USR2 signal.

       <b>t</b>      Terminate.  If the service is running, send it a TERM signal.

       <b>k</b>      Kill.  If the service is running, send it a KILL signal.

       <b>x</b>      Exit.   If  the service is running, send it a TERM signal, and then a CONT signal.  Do not restart
              the service.  If the service is down, and no log service exists, <b>runsv</b> exits.  If the  service  is
              down  and  a log service exists, <b>runsv</b> closes the standard input of the log service, and waits for
              it to terminate.  If the log service is down, <b>runsv</b> exits.  This command is ignored if it is given
              to <u>service</u>/log/supervise/control.

       Example: to send a TERM signal to the socklog-unix service, either do
         # sv term /etc/service/socklog-unix
        or
         # printf t &gt;/etc/service/socklog-unix/supervise/control

       <b><a href="../man1/printf.1.html">printf</a></b>(1) usually blocks if no <b>runsv</b> process is running in the service directory.

</pre><h4><b>CUSTOMIZE</b> <b>CONTROL</b></h4><pre>
       For each control character <u>c</u> except "d" and  "x"  sent  to  the  control  pipe,  <b>runsv</b>  first  checks  if
       <u>service</u>/control/<u>c</u>  exists  and  is  executable.   If  so, it starts <u>service</u>/control/<u>c</u> and waits for it to
       terminate, before interpreting the command.  If the program exits with return code 0, <b>runsv</b> refrains from
       sending the service the corresponding signal.  The command <u>o</u> is  always  considered  as  command  <u>u</u>.   On
       command  <u>d</u>  first  <u>service</u>/control/t  is  checked,  and  then  <u>service</u>/control/d.   On  command  <u>x</u>  first
       <u>service</u>/control/t is checked, and then <u>service</u>/control/x.  Specifically:

       If the service is running or paused, control characters "d" and "x" are handled as follows:

       <b>1.</b>     <b>runsv</b> checks whether <u>service</u>/control/t exists and is executable and runs it if yes.

       <b>2.</b>     If <u>service</u>/control/t exits nonzero, or is not executable or doesn't exist, <b>runsv</b> sends the service
              a TERM signal.

       <b>3.</b>     <b>runsv</b> sends the service a CONT signal, disregarding <u>service</u>/control/c even if  it  exists  and  is
              executable.

       <b>4.</b>     <b>runsv</b> checks whether <u>service</u>/control/d (or control/x) exists and is executable and runs it if yes.
              Its exit status is ignored.

       The control of the optional log service cannot be customized.

</pre><h4><b>SIGNALS</b></h4><pre>
       If <b>runsv</b> receives a TERM signal, it acts as if the character x was written to the control pipe.

</pre><h4><b>EXIT</b> <b>CODES</b></h4><pre>
       <b>runsv</b> exits 111 on an error on startup or if another <b>runsv</b> is running in <u>service</u>.

       <b>runsv</b> exits 0 if it was told to exit.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <a href="../man8/sv.8.html">sv</a>(8), <a href="../man8/chpst.8.html">chpst</a>(8), <a href="../man8/svlogd.8.html">svlogd</a>(8), <a href="../man8/runit.8.html">runit</a>(8), <a href="../man8/runit-init.8.html">runit-init</a>(8), <a href="../man8/runsvdir.8.html">runsvdir</a>(8), <a href="../man8/runsvchdir.8.html">runsvchdir</a>(8), <a href="../man8/utmpset.8.html">utmpset</a>(8)

       <a href="http://smarden.org/runit/">http://smarden.org/runit/</a>

</pre><h4><b>AUTHOR</b></h4><pre>
       Gerrit Pape &lt;<a href="mailto:pape@smarden.org">pape@smarden.org</a>&gt;

                                                                                                        <u><a href="../man8/runsv.8.html">runsv</a></u>(8)
</pre>
 </div>
</div></section>
</div>
</body>
</html>