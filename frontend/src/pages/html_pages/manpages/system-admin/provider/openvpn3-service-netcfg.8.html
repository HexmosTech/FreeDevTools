<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>openvpn3-service-netcfg - OpenVPN 3 Linux Network Configuration Service</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/openvpn3-client">openvpn3-client_24.1+dfsg-1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       openvpn3-service-netcfg - OpenVPN 3 Linux Network Configuration Service

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>openvpn3-service-netcfg</b> <b>[OPTIONS]</b>
       <b>openvpn3-service-netcfg</b> <b>-h</b> | <b>--help</b>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The  <b>openvpn3-service-netcfg</b>  process  is a backend service for OpenVPN 3 Linux, responsible for creating
       and managing virtual network interfaces, routing and DNS configuration provided by VPN connections.  This
       service will be started automatically when the <b>openvpn3-service-client</b> starts and begins to  configure  a
       virtual network interface for its session.

       Only one network configuration service can run on the system.

       This  service  is  normally  started  automatically  when  needed,  via the <u>net.openvpn.v3.netcfg.service</u>
       auto-start configuration by the <b><a href="../man1/dbus-daemon.1.html">dbus-daemon</a></b>(1), but can also be started manually  on  the  command  line.
       This  service  must  start  as  <u>root</u>,  but  as  soon  as  it  has requested the needed privileges for its
       operations, it will drop the rest of the privileges  and  switch  to  the  <b>_</b><u>openvpn</u>  user.   Beware  that
       changing this to another user account also requires updating the D-Bus policy as well.

</pre><h4><b>OPTIONS</b></h4><pre>
       <b>-h</b>, <b>--help</b>
              Print  usage and help details to the terminal

       <b>--version</b>
              Prints the version of the program and exists

       <b>--log-level</b> <u>LEVEL</u>
              Sets the default log verbosity for log events generated by this service.  The default is <b>4</b>.  Valid
              values  are  <b>0</b>  to <b>6</b>.  Higher log levels results in more verbose logs and log level <b>6</b> will contain
              all debug log events.

       <b>--log-file</b> <u>LOG_DESTINATION</u>
              By default, logging will go via the <b>openvpn3-service-log</b> service.   By  providing  this  argument,
              logging  will also be sent to <u>LOG_DESTINATION</u>, which can be either a filename or <b>stdout:</b> where the
              latter one sends log data to the console.

       <b>--colour</b>
              This will add colours to log events when logging to file or terminal.  Log events will be coloured
              based on the log level of the event.

       <b>--signal-broadcast</b>
              Normally, the <b>openvpn3-service-netcfg</b>  will  attach  a  log  stream  to  the  <b>openvpn3-service-log</b>
              service.   By  providing this option, it will instead broadcast all log events to all listeners on
              the system.  This is more useful for debugging when the standard  logging  does  not  provide  any
              clues.  This is not recommended for production.

       <b>--idle-exit</b> <u>MINUTES</u>
              The  <b>openvpn3-service-netcfg</b>  service  will  exit  automatically  if  it is being idle for <u>MINUTES</u>
              minutes.  By being idle, it means no active virtual network interfaces is being  managed  by  this
              service.

       <b>--redirect-method</b> <u>METHOD</u>
              This defines how to handle route configurations which involves changing the default gateway.  This
              primarily  controls  how  the  network  traffic routing is done from the VPN client process to the
              remote server.  Valid <u>METHOD</u> arguments:

              <b>host-route</b> <b>(default)</b>
                     This will add an explicit direct host route for the VPN server's IP address to go  via  the
                     default gateway on the system.  This is quite similar to how OpenVPN 2.x behaves.

              <b>bind-device</b>
                     This will bind the device using the <u>SO_BINDDEV</u> socket option for the UDP/TCP socket used to
                     connect to the remote side.

              <b>none</b>   This  will  disable  any  specific  routing arrangement for the remote host access.  If the
                     default gateway is modified, this will most certainly make the VPN connection useless; thus
                     this is not recommended for production.

       <b>--set-somark</b> <u>MARK</u>
              This will add a <u>SO_MARK</u> based reference to the packets sent to the remote  server.   This  can  be
              used  by  <u>netfilters</u>  like  the  <b>--mark</b>  feature  in  <b>iptables</b>.   This can be used by itself or in
              combination with any <b>--redirect-method</b> settings, unless <b>openvpn3-service-client</b>  is  started  with
              <b>--disable-protect-socket</b>.

       <b>--state-dir</b> <u>DIRECTORY</u>
              This  option  will  define  a directory where <b>openvpn3-service-netcfg</b> will read configuration data
              from.  This configuration file is JSON based and will override the options from the command line.

   <b>DNS</b> <b>Resolver</b> <b>Configuration</b>
       The <b>openvpn3-service-netcfg</b> service is capable of configuring the DNS resolver based on what the  running
       VPN  sessions  have  been  pushed  from the OpenVPN servers.  The OpenVPN 3 Network Configuration service
       supports multiple approaches, but only one of them can be enabled.

       <b>--resolv-conf</b> <u>RESOLV-CONF-FILE</u>
              This method will modify the provided <u>RESOLV-CONF-FILE</u> directly.  The file will typically point  at
              <b><a href="file:/etc/resolv.conf">/etc/resolv.conf</a></b>.   But  beware that this approach may not be fail-safe in all scenarios and other
              network service may overwrite changes OpenVPN has applied or OpenVPN may overwrite changes outside
              of its control.

              OpenVPN will keep a backup file when it has modified it and will automatically restore the content
              when no running OpenVPN sessions has received any DNS configurations.

       <b>--systemd-resolved</b>
              This  will  enable  integration  with  the  <u><a href="../man8/systemd-resolved.8.html">systemd-resolved</a></u>(8)  service.   The  system  must   be
              preconfigured  to  use  this  service  for  OpenVPN's  changes  to fully take effect.  This is the
              preferred way, as the DNS resolver  settings  are  fully  managed  by  <u><a href="../man8/systemd-resolved.8.html">systemd-resolved</a></u>(8).   This
              approach will currently enable split-DNS by default.

   <b>Configuration</b> <b>file</b>
       The  default  location  for  the  configuration  file  is  under <b>/var/lib/openvpn3</b>.  This is a plain JSON
       configuration file which only considers a few fields:

          {
                  "log_level": LEVEL,
                  "log_file": FILENAME,
                  "idle_exit": MINUTES,
                  "resolv_conf_file": FILENAME,
                  "systemd_resolved": "",
                  "redirect_method": ["host-route" | "bind-device" | "none" ],
                  "set_somark": MARK
           }

       Only used settings need to be present.  If not set, the command line options will be able  to  set  these
       options.

   <b>Attribute:</b> <b>log_level</b>
       This is the equivalent of the <b>--log-level</b> command line argument.  Valid <b>LEVEL</b> values are <b>0</b> to <b>6</b>.

   <b>Attribute:</b> <b>log_file</b>
       This  is  the  equivalent of the <b>--log-file</b> command line argument.  Must be a filename where to write log
       files.  It also supports <b>stdout:</b> to write log data to the console/tty.  Logging will also be sent to  the
       <b><a href="../man8/openvpn3-service-log.8.html">openvpn3-service-log</a></b>(8) service regardless of this setting.

   <b>Attribute:</b> <b>idle_exit</b>
       This  is  the  equivalent of the <b>--idle-exit</b> command line argument.  This overrides the default automatic
       exit logic.  The argument it takes is a positive integer of how many minutes it will be  allowed  to  run
       idle, not managing any OpenVPN network devices before it shuts down automatically.

   <b>Attribute:</b> <b>resolv_conf_file</b>
       This  is  used  to enable the <b>resolv.conf</b> DNS resolver configuration integration.  See <b>--resolv-conf</b>  for
       details.

   <b>Attribute:</b> <b>systemd_resolved</b>
       This  is  used  to  enable  the  <b><a href="../man8/systemd-resolved.8.html">systemd-resolved</a></b>(8)  DNS  resolver   configuration   integratoin.    See
       <b>--systemd-resolved</b> for details.

   <b>Attribute:</b> <b>redirect_method</b>
       This is the equivalent of the <b>--redirect-method</b> option.  See that option for details.

   <b>Attribute:</b> <b>set_somark</b>
       This is the equivalent of <b>--set-somark</b>.  See that option for details.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man1/dbus-daemon.1.html">dbus-daemon</a></b>(1) <b><a href="../man1/openvpn3.1.html">openvpn3</a></b>(1) <b><a href="../man8/openvpn3-service-client.8.html">openvpn3-service-client</a></b>(8) <b><a href="../man8/openvpn3-service-log.8.html">openvpn3-service-log</a></b>(8)

                                                                                      <u><a href="../man8/OPENVPN3-SERVICE-NETCFG.8.html">OPENVPN3-SERVICE-NETCFG</a></u>(8)
</pre>
 </div>
</div></section>
</div>
</body>
</html>