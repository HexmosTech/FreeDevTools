<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>opadisableports</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/opa-fastfabric">opa-fastfabric_10.10.3.0.11-1ubuntu3_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       opadisableports

       <b>(Linux)</b> Accepts a CSV file listing links to disable. For each HFI-SW link, the switch side of the link is
       disabled.  For  each SW-SW link, the switch port closer to this node is disabled. This approach generally
       permits a future opaenableports operation to re-enable the port once the issue is corrected or  ready  to
       be retested. The list of disabled ports is tracked in /etc/opa/disabled*.csv.

</pre><h4><b>Syntax</b></h4><pre>
       opadisableports [-R] [-h  <u>hfi</u>] [-p  <u>port</u>] [ <u>reason</u>] &lt; disable.csv

</pre><h4><b>Options</b></h4><pre>
       --help

                 Produces full help text.

       -R

                 Does  not  attempt  to get routes for computation of distance. Instead, it disables the port of
                 the switch with the lower LID (which is often the side closest to the SM) assuming that  it  is
                 closer to this node.

       -h <u>hfi</u>

                 Specifies the HFI, numbered 1..n. Using 0 specifies that the -p <u>port</u> port is a system-wide port
                 number. Default is 0.

       -p <u>port</u>

                 Specifies the port, numbered 1..n. Using 0 specifies the first active port. Default is 0.

       <u>reason</u>

                 Specifies  optional text describing why ports are being disabled. If used, text is saved in the
                 reason field of the output file.

       disable.csv

                 Specifies  the  input  file  listing  the  links  to  disable.  The  list  is  of   the   form:
                 NodeGUID;PortNum;NodeType;NodeDesc;NodeGUID;PortNum; NodeType;NodeDesc;Reason

                 The  <u>reason</u>  field  is  optional.  An  input  file  such  as  this  can  be  generated by using
                 opaextractbadlinks, opaextractmissinglinks, or opaextractsellinks.

       Information about the links disabled and the reason is saved (in the same format) to an output file named
       /etc/opa/disabled:hfi:port.csv where the hfi:port part of the file name is replaced by the HFI number and
       the port number being operated on (such as  1:1  or  2:1).  This  CSV  file  can  be  used  as  input  to
       opaenableports.

</pre><h4><b>-h</b> <b>and</b> <b>-p</b> <b>options</b> <b>permit</b> <b>a</b> <b>variety</b> <b>of</b> <b>selections:</b></h4><pre>
       -h 0

                 First active port in system (Default).

       -h 0 -p 0

                 First active port in system.

       -h <u>x</u>

                 First active port on HFI <u>x</u>.

       -h <u>x</u> -p 0

                 First active port on HFI <u>x</u>.

       -h 0 -p <u>y</u>

                 Port <u>y</u> within system (no matter which ports are active).

       -h <u>x</u> -p <u>y</u>

                 HFI <u>x</u>, port <u>y</u>.

</pre><h4><b>Examples</b></h4><pre>
       opadisableports 'bad cable' &lt; disable.csv

       opadisableports -h 1 -p 1 'dead servers' &lt; disable.csv

       opaextractsellinks -F lid:3 | opadisableports 'bad server'

       opaextractmissinglinks -T /etc/opa/topology.0:0.xml | opadisableports

Copyright(C) 2015-2019                          Intel Corporation                             <u><a href="../man8/opadisableports.8.html">opadisableports</a></u>(8)
</pre>
 </div>
</div></section>
</div>
</body>
</html>