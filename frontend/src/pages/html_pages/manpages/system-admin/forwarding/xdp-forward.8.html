<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>xdp-forward - the XDP forwarding plane</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/xdp-tools">xdp-tools_1.5.1-1ubuntu2_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       xdp-forward - the XDP forwarding plane

</pre><h4><b>SYNOPSIS</b></h4><pre>
       xdp-forward  is  an  XDP  forwarding plane, which will accelerate packet forwarding using XDP. To use it,
       simply load it on the set of interfaces to accelerate forwarding between. The userspace component of xdp-
       forward will then configure and load XDP programs on those interfaces, and forward packets  between  them
       using  XDP_REDIRECT,  using  the kernel routing table or netfilter flowtable to determine the destination
       for each packet.

       Any packets that xdp-forward does not know how to forward will be passed up to the networking  stack  and
       handled  by  the  kernel  like  normal.  Depending  on  the  mode xdp-forward is loaded in, this leads to
       different forwarding behaviours.  See the sectinon on <b>Operating</b> <b>modes</b> below.

   <b>Running</b> <b>xdp-forward</b>
       The syntax for running xdp-forward is:

              xdp-forward COMMAND [options]

              Where COMMAND can be one of:
                     load        - Load the XDP forwarding plane
                     unload      - Unload the XDP forwarding plane
                     help        - show the list of available commands

       Each command, and its options are explained below. Or use <u>xdp-forward</u> <u>COMMAND</u> <u>--help</u> to see  the  options
       for each command.

</pre><h4><b>The</b> <b>LOAD</b> <b>command</b></h4><pre>
       The <u>load</u> command loads the XDP forwarding plane on a list of interfaces.

       The syntax for the <u>load</u> command is:

       <u>xdp-forward</u> <u>load</u> <u>[options]</u> <u>&lt;ifname...&gt;</u>

       Where <u>&lt;ifname...&gt;</u> is the name of the set of interfaces to forward packets between. An XDP program will be
       loaded  on  each  interface,  configured to forward packets to all other interfaces in the set (using the
       kernel routing table to determine the destination interface of each packet).

       The supported options are:

   <b>-f,</b> <b>--fwd-mode</b> <b>&lt;mode&gt;</b>
       Specifies which  forwarding  mode  <u>xdp-forward</u>  should  operate  in.  Depending  on  the  mode  selected,
       <u>xdp-forward</u>  will  perform forwarding in different ways, which can lead to different behaviour, including
       which subset of kernel configuration (such as firewall rules) is respected  during  forwarding.  See  the
       section <b>FORWARDING</b> <b>MODES</b> below for a full description of each mode.

   <b>-F,</b> <b>--fib-mode</b> <b>&lt;mode&gt;</b>
       Specifies  how  <u>xdp-forward</u> performs routing table lookup in the linux kernel.  See the section <b>FIB</b> <b>MODES</b>
       below for a full description of each mode.

   <b>-m,</b> <b>--mode</b> <b>&lt;mode&gt;</b>
       Specifies which mode to load the XDP program to be loaded in. The valid values are 'native', which is the
       default in-driver XDP mode, 'skb', which causes the so-called <u>skb</u> <u>mode</u> (also known as <u>generic</u> <u>XDP</u>) to  be
       used,  'hw' which causes the program to be offloaded to the hardware, or 'unspecified' which leaves it up
       to the kernel to pick a mode (which it will do by picking native mode  if  the  driver  supports  it,  or
       generic  mode  otherwise).  Note  that  using  'unspecified' can make it difficult to predict what mode a
       program will end up being loaded in. For this reason, the default is 'native'. Note  that  hardware  with
       support  for  the  'hw' mode is rare: Solarflare cards (using the 'sfc' driver) are the only devices with
       support for this in the mainline Linux kernel.

   <b>-v,</b> <b>--verbose</b>
       Enable debug logging. Specify twice for even more verbosity.

   <b>-h,</b> <b>--help</b>
       Display a summary of the available options

</pre><h4><b>The</b> <b>UNLOAD</b> <b>command</b></h4><pre>
       The <u>unload</u> command is used for unloading programs from an interface.

       The syntax for the <u>unload</u> command is:

       <u>xdp-forward</u> <u>unload</u> <u>[options]</u> <u>&lt;ifname...&gt;</u>

       Where <u>&lt;ifname...&gt;</u> is the list of interfaces to unload the XDP forwarding  plane  from.  Note  that  while
       <u>xdp-forward</u>  will  examine the XDP programs loaded on each interface and make sure to only unload its own
       program, it will not check that the list of supplied interfaces is the same as the  one  supplied  during
       load.  As  such,  it is possible to perform a partial unload by supplying a different list of interfaces,
       which may lead to unexpected behaviour.

       The supported options are:

   <b>-v,</b> <b>--verbose</b>
       Enable debug logging. Specify twice for even more verbosity.

   <b>-h,</b> <b>--help</b>
       Display a summary of the available options

</pre><h4><b>FORWARDING</b> <b>MODES</b></h4><pre>
       The <u>xdp-forward</u> utility supports the following forwarding modes (selected by the <u>--fwd-mode</u> parameter  to
       <u>xdp-forward</u> <u>load</u>.

   <b>fib</b> <b>(default)</b>
       In  the  <u>fib</u>  forwarding mode, <u>xdp-forward</u> will perform a lookup in the kernel routing table (or FIB) for
       each packet, and forward packets between the configured interfaces based on the result of the lookup. Any
       packet where the lookup fails will be passed  up  to  the  stack.  This  includes  packets  that  require
       neighbour discovery for the next hop, meaning that packets will periodically pass up the kernel stack for
       next hop discovery (initially, and when the nexthop entry expires).

       Note  that  no checks other than the FIB lookup is performed; in particular, this completely bypasses the
       netfilter subsystem, so firewall rules will not be checked before forwarding.

   <b>flowtable</b>
       The <u>flowtable</u> operating mode offloads netfilter sw flowtable logic in  the  XDP  layer  if  the  hardware
       flowtable  is  not  available.   At  the  moment <u>xdp-forward</u> is able to offload just TCP or UDP netfilter
       flowtable entries to XDP. The user is supposed to configure the flowtable separately.

</pre><h4><b>FIB</b> <b>MODES</b></h4><pre>
       The <u>xdp-forward</u> utility supports the following  fib  modes  (selected  by  the  <u>--fib-mode</u>  parameter  to
       <u>xdp-forward</u> <u>load</u>.

   <b>full</b> <b>(default)</b>
       In  the  <u>full</u> operating mode, <u>xdp-forward</u> will perform a full lookup in the kernel routing table (or FIB)
       for each packet, and forward packets between the configured interfaces based on the result of the lookup.
       In particular, it will apply any policy routing rules configured by the user.

   <b>direct</b>
       The <u>direct</u> mode functions like <u>full</u>, except it passes the <u>BPF_FIB_LOOKUP_DIRECT</u> flag to  the  FIB  lookup
       routine. This means that any policy routing rules configured will be skipped during the lookup, which can
       improve performance (but won't obey the policy of those rules, obviously).

</pre><h4><b>Examples</b></h4><pre>
       In  order  to  enable  flowtable  offloading  for  tcp  and udp traffic between NICs n0 and n1, issue the
       following commands:

              #nft -f <a href="file:/dev/stdin">/dev/stdin</a> &lt;&lt;EOF
              table inet filter {
                  flowtable ft {
                      hook ingress priority filter
                      devices = { n0, n1 }
                  }
                  chain forward {
                      type filter hook forward priority filter
                      meta l4proto { tcp, udp } flow add @ft
                  }
              }
              EOF

              #xdp-forward load -f flowtable n0 n1

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <u><a href="../man3/libxdp.3.html">libxdp</a>(3)</u> for details on the XDP loading semantics and kernel compatibility requirements.

</pre><h4><b>BUGS</b></h4><pre>
       Please report any bugs on Github: <u>https://github.com/xdp-project/xdp-tools/issues</u>

</pre><h4><b>AUTHOR</b></h4><pre>
       xdp-forward is written by  Toke  Høiland-Jørgensen,  based  on  the  xdp_fwd  kernel  sample,  which  was
       originally written by David Ahern. This man page was written by Toke Høiland-Jørgensen.

V1.5.1                                          OCTOBER 11, 2024                                  <u><a href="../man8/xdp-forward.8.html">xdp-forward</a></u>(8)
</pre>
 </div>
</div></section>
</div>
</body>
</html>