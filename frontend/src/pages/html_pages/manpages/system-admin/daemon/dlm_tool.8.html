<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>dlm_tool - a utility for the dlm and dlm_controld daemon</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/dlm-controld">dlm-controld_4.3.0-3build1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       dlm_tool - a utility for the dlm and dlm_controld daemon

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>dlm_tool</b> [COMMAND] [OPTIONS] [ <u>name</u> ]

</pre><h4><b>COMMANDS</b></h4><pre>
       <b>ls</b>
            Display dlm_controld internal lockspace state.

       <b>status</b>
            Dump dlm_controld daemon state.

       <b>dump</b>
            Dump dlm_controld debug buffer.

       <b>dump_config</b>
            Dump dlm_controld config settings.

       <b>reload_config</b>
            Reload dlm_controld config settings from dlm.conf.

       <b>set_config</b> <u>setting</u><b>=</b><u>value</u>
            Set dlm_controld config settings in the currently running daemon.

       <b>fence_ack</b> <u>nodeid</u>
            Cancel a waiting fencing operation and consider it successful.

       <b>log_plock</b>
            Dump dlm_controld plock debug buffer.

       <b>plocks</b> <u>lockspace_name</u>
            Dump posix locks from dlm_controld for the lockspace.

       <b>join</b> <u>lockspace_name</u>
            Join a lockspace.

       <b>leave</b> <u>lockspace_name</u>
            Leave a lockspace.

       <b>joinleave</b> <u>lockspace_name</u>
            Join then immediately leave a lockspace (for testing only.)

       <b>lockdebug</b> <u>lockspace_name</u>
            Complete display of locks from the lockspace.

       <b>lockdump</b> <u>lockspace_name</u>
            Minimal display of locks from the lockspace (deprecated).

       <b>run</b> <u>command</u>
            Run command and check for result (for lvmlockd only.)

       <b>run_start</b> <u>command</u>
            Run command and don't check for result.

       <b>run_check</b> <u>uuid</u>
            Check status of a command that was run.

       <b>run_cancel</b> <u>uuid</u>
            Cancel a command that was run and is not yet done.

       <b>run_list</b>
            Dump a list of running commands.

</pre><h4><b>OPTIONS</b></h4><pre>
       <b>-n</b> Show all node information from dlm_tool ls.

       <b>-d</b> 0|1 Resource directory off/on in join, default 0

       <b>-e</b> 0|1 Exclusive create off/on in join, default 0

       <b>-f</b> 0|1 FS (filesystem) flag off/on in join, default 0

       <b>-i</b> <u>sec</u> Seconds to wait in run_check.

       <b>-m</b> <u>mode</u> Permission mode for lockspace device (octal), default 0600

       <b>-s</b> Summary following lockdebug output (experiemental)

       <b>-v</b> Verbose lockdebug or status output

       <b>-w</b> Wide lockdebug output

       <b>-M</b> Include MSTCPY locks in lockdump output

       <b>-h</b> Print help, then exit

       <b>-V</b> Print program version information, then exit

</pre><h4><b>USAGE</b></h4><pre>
   <b>fence_ack</b>
       See dlm_tool status for information about waiting fencing operations for specific nodeid's.

   <b>set_config</b>
       dlm_tool  set_config can change certain config settings in the currently running dlm_controld.  Supported
       options:

       daemon_debug
       log_debug
       debug_logfile
       plock_debug
       plock_rate_limit
       drop_resources_time
       drop_resources_count
       drop_resources_age
       post_join_delay
       enable_quorum_fencing
       enable_quorum_lockspace
       repeat_failed_fencing

       Special cases to revert a previous set_config and restore the previous value (from default or dlm.conf):

       <b>dlm_tool</b> <b>set_config</b> <u>setting</u>=<b>restore</b>
       restores a single setting.

       <b>dlm_tool</b> <b>set_config</b> <b>restore_all</b>
       restores all settings.

   <b>dump_config</b>
       A config setting may have been set from: the default, the dlm_controld command line, dlm.conf at startup,
       dlm.conf from reload_config, dlm_tool set_config.  The dump_config output indicates how values were set:

       setting=value
              default value.

       setting=value (cli option)
              Set from a dlm_controld command line option.

       setting=value (dlm.conf)
              Set from dlm.conf (at startup or reload.)

       setting=value (set_config)
              Set from dlm_tool set_config.

</pre><h4><b>EXAMPLES</b></h4><pre>
   <b>dump_config</b>
       $ dlm_tool dump_config | head -n 5
       daemon_debug=1 (set_config)
       foreground=0
       log_debug=1 (dlm.conf)
       protocol=detect

       In this case, daemon_debug is set by set_config, log_debug is set from dlm.conf, foreground and  protocol
       are using default values.

   <b>set_config</b>
       $ dlm_tool dump_config | grep log_debug
       log_debug=1 (dlm.conf)

       $ dlm_tool set_config "log_debug=0"
       set_config done

       $ dlm_tool dump_config | grep log_debug
       log_debug=0 (set_config)

       $ dlm_tool set_config "log_debug=restore"
       set_config done

       $ dlm_tool dump_config | grep log_debug
       log_debug=1 (dlm.conf)

       log_debug  is  set  by  dlm.conf  (value  is  1), then run set_config to change to 0, then use restore to
       restore to dlm.conf setting.

   <b>set_config</b>
       $ dlm_tool dump_config | grep _debug
       daemon_debug=0
       log_debug=1 (dlm.conf)
       plock_debug=0

       $ dlm_tool set_config "daemon_debug=1 log_debug=1 plock_debug=1"
       set_config done

       $ dlm_tool dump_config | grep _debug
       daemon_debug=1 (set_config)
       log_debug=1 (set_config)
       plock_debug=1 (set_config)

       $ dlm_tool set_config "restore_all"
       set_config done

       $ dlm_tool dump_config | grep _debug
       daemon_debug=0
       log_debug=1 (dlm.conf)
       plock_debug=0

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man8/dlm_controld.8.html">dlm_controld</a></b>(8), <b><a href="../man5/dlm.conf.5.html">dlm.conf</a></b>(5)

dlm                                                2012-04-05                                        <u><a href="../man8/DLM_TOOL.8.html">DLM_TOOL</a></u>(8)
</pre>
 </div>
</div></section>
</div>
</body>
</html>