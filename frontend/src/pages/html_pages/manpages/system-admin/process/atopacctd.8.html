<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>atopacctd - process accounting daemon</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/atop">atop_2.11.1-3_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       <b>atopacctd</b> - process accounting daemon

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>atopacctd</b> [-v | topdirectory]

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The  <u>atopacctd</u>  daemon  switches  on  the  process  accounting  feature in the kernel and let the process
       accounting records be written to a file, called the source file from now.  After  process  accounting  is
       activated, the <u>atopacctd</u> daemon transfers every process accounting record that is available in the source
       file  to a shadow file.  Client processes (like <u>atop</u> processes) will read the shadow files instead of the
       process accounting source file.
       In this way, the <u>atopacctd</u> daemon operates as a 'layer' between  the  process  accounting  file  that  is
       written by the kernel and the shadow accounting files that are read by <u>atop</u> processes.

       This approach has the following advantages:

       <b>o</b>  The  <u>atopacctd</u>  daemon  takes  care  that  the  source file is kept to a limited size.  As soon as its
          maximum size is reached, it is truncated to a size of zero again (this is  not  noticed  by  the  <u>atop</u>
          processes).

       <b>o</b>  The  <u>atopacct</u>  daemon takes care that a shadow file is kept to a limited size.  As soon as the current
          shadow file reaches this maximum size, the <u>atopacctd</u> daemon creates a new  (subsequent)  shadow  file.
          While  client  processes still have the possibility to read the previous shadow file(s), the <u>atopacctd</u>
          daemon continues writing accounting records to the newest (current) shadow file.  For this reason, the
          name of a shadow file consists of a 10-digit sequence number followed by the extension '.paf' (process
          acounting file).  Old shadow files that are not used by client processes any more,  are  automatically
          removed by the garbage collector in the <u>atopacctd</u> daemon.

       <b>o</b>  When  no  client processes are active (any more), all shadow files will be deleted and no records will
          be transferred to a shadow file any more. As soon as at  least  one  client  is  activate  again,  the
          <u>atopacctd</u> daemon continues writing shadow files.

       The  directory  <b><a href="file:/run">/run</a></b>  is  used  as  the  default topdirectory.  Below this top-directory, the source file
       <b>pacct_source</b> is created to which the kernel writes the process accounting records.
       Furthermore, the subdirectory <b>pacct_shadow.d</b> is created as a 'container' for  the  shadow  files.   Apart
       from  the shadow files, also the file <b>current</b> is maintained in this subdirectory, containing the sequence
       number of the current (newest) shadow file and the maximum number of records that will be written in each
       shadow file.

       An alternative topdirectory can be specified as command line argument.  When an alternative  topdirectory
       is  defined, also modify the configuration file <b>/etc/atoprc</b> to inform <u>atop</u> clients about this alternative
       location (see the <b>atoprc</b> man page).  Such alternative topdirectory should be owned by root and may not be
       writable for the group or others (security reasons).

       Notice that the kernel suspends writing process accounting records when the free space of the  filesystem
       on which the process accounting file resides drops below 2%. Writing is resumed when the free space is 4%
       or  more.   These  lowwater  and  highwater  percentages  can be configured via the <b><a href="file:/proc/sys/kernel/acct">/proc/sys/kernel/acct</a></b>
       pseudo-file.
       The <u>atopacctd</u> daemon suspends transferring process accounting records to shadow files when the free space
       of the filesystem on which the process accounting file resides drops below 5%. Transfer is  resumed  when
       the  free  space is 5% or more.  Log messages are generated via syslog when writing to the current shadow
       file is suspended or resumed.

       The <b>-v</b> flag can be used to verify the version of the <u>atopacctd</u> daemon.

</pre><h4><b>FILES</b></h4><pre>
       <b>/run/pacct_source</b>
            Regular file to which the kernel writes the process accounting records.  This file will be regularly
            truncated.

       <b>/run/pacct_shadow.d/current</b>
            Regular file containing the sequence number of the current shadow file and  the  maximum  number  of
            records per shadow file.

       <b>/run/pacct_shadow.d/N.paf</b>
            Regular files containing the process accounting records that have been copied transparently from the
            source file (N represents a 10-digit sequence number).

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man1/atop.1.html">atop</a>(1),</b> <b><a href="../man1/atopsar.1.html">atopsar</a>(1),</b> <b><a href="../man5/atoprc.5.html">atoprc</a>(5),</b> <b><a href="../man4/netatop.4.html">netatop</a>(4),</b> <b><a href="../man8/netatopd.8.html">netatopd</a>(8)</b>
       <b>https://www.atoptool.nl</b>

</pre><h4><b>AUTHOR</b></h4><pre>
       Gerlof Langeveld (<a href="mailto:gerlof.langeveld@atoptool.nl">gerlof.langeveld@atoptool.nl</a>)

Linux                                             January 2024                                      <u><a href="../man8/ATOPACCTD.8.html">ATOPACCTD</a></u>(8)
</pre>
 </div>
</div></section>
</div>
</body>
</html>