<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>babeld - ad-hoc network routing daemon</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/babeld">babeld_1.13.1+ds-1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       babeld - ad-hoc network routing daemon

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>babeld</b> <u>option</u>...  [ <b>--</b> ] <u>interface</u>...

</pre><h4><b>DESCRIPTION</b></h4><pre>
       Babel  is  a  loop-avoiding  distance-vector  routing  protocol  roughly based on DSDV and AODV, but with
       provisions for link cost estimation and redistribution of routes from other routing protocols.

       While it is optimised for wireless mesh networks, Babel will also work efficiently on wired networks.

</pre><h4><b>OPTIONS</b></h4><pre>
       <b>-V</b>     Display babeld's version and quit.

       <b>-m</b> <u>multicast-address</u>
              Specify  the  link-local  multicast  address  to  be  used  by  the  protocol.   The  default   is
              <b>ff02:0:0:0:0:0:1:6</b>.

       <b>-p</b> <u>port</u>
              Specify the UDP port number to be used by the protocol.  The default is <b>6696</b>.

       <b>-S</b> <u>state-file</u>
              Set  the  name  of  the  file used for preserving long-term information between invocations of the
              <b>babeld</b> daemon.  If this file is deleted, the daemon will run in passive mode for 3 minutes when it
              is next started, and other hosts might initially ignore it. The default is <b>/var/lib/babel-state</b>.

       <b>-h</b> <u>hello-interval</u>
              Specify the interval in seconds at which scheduled hello packets are sent on wireless  interfaces.
              The default is 4 seconds.

       <b>-H</b> <u>wired-hello-interval</u>
              Specify  the  interval  in  seconds at which scheduled hello packets are sent on wired interfaces.
              The default is 4 seconds.

       <b>-M</b> <u>half-time</u>
              Specify the half-time in  seconds  of  the  exponential  decay  used  for  smoothing  metrics  for
              performing route selection; the value 0 disables smoothing.  The default is 4s.

       <b>-k</b> <u>priority</u>
              Specify the priority value used when installing routes into the kernel.  The default is 0.

       <b>-A</b> <u>priority</u>
              Allow  duplicating  external  routes  when their kernel priority is at least <u>priority</u>.  Do not use
              this option unless you know what you are doing, as it can cause persistent route flapping.

       <b>-l</b>     Use IFF_RUNNING (carrier sense) when determining interface availability.

       <b>-w</b>     Don't optimise wired links, assume all interfaces are wireless unless explicitly overridden in the
              configuration file.

       <b>-s</b>     Do not perform split-horizon processing on wired interfaces.  Split-horizon is  not  performed  on
              wireless interfaces.

       <b>-r</b>     Use  a random router-id.  The default is to use persistent router-ids derived from the MAC address
              of the first interface, which is easier to debug and more reliably prevents routing loops but  may
              sometimes cause a node to be unreachable for 120 seconds just after boot.

       <b>-d</b> <u>level</u>
              Debug  level.   A value of 1 requests a routing table dump at every iteration through the daemon's
              main loop.  A value of 2 additionally requests tracing every message sent or received.  A value of
              3 additionally dumps all interactions with the OS kernel.  The default is 0.

       <b>-g</b> <u>port</u>, <b>-g</b> <u>path</u>
              Set up a local configuration server on port <u>port</u> or at <u>path</u> in read-only mode.   The  protocol  is
              described in the section <b>Local</b> <b>Configuration</b> <b>Protocol</b> below.

       <b>-G</b> <u>port</u>, <b>-G</b> <u>path</u>
              Set  up  a local configuration server on port <u>port</u> or at <u>path</u> in read-write mode.  This allows any
              local user to change <b>babeld</b>'s configuration, and may therefore be a security issue.

       <b>-t</b> <u>table</u>
              Use the given kernel routing table for routes inserted by <b>babeld</b>.

       <b>-T</b> <u>table</u>
              Export routes from the given kernel routing table. This can be specified multiple times  in  order
              to export routes from more than one table.

       <b>-c</b> <u>filename</u>
              Specify  the  name  of  the  configuration  file.   This flag can be repeated multiple times.  The
              default is <b>/etc/babeld.conf</b>.

       <b>-C</b> <u>statement</u>
              Specify a configuration statement directly on the command line.

       <b>-D</b>     Daemonise at startup.

       <b>-L</b> <u>logfile</u>
              Specify a file to log random ``how do you do?'' messages to.  This defaults to standard  error  if
              not daemonising, and to <b>/var/log/babeld.log</b> otherwise.

       <b>-I</b> <u>pidfile</u>
              Specify a file to write our process id to, use no pidfile if set to the empty string.  The default
              is <b>/var/run/babeld.pid</b>.

       <u>interface</u>...
              The list of interfaces on which the protocol should operate.

</pre><h4><b>CONFIGURATION</b> <b>FILE</b> <b>FORMAT</b></h4><pre>
       The  configuration  file  is  a  sequence  of lines each of which specifies a global option, an interface
       specification or a filtering rule.  Comments are introduced by an octothorp ``<b>#</b>'' and  terminate  at  the
       end of the line.

   <b>Global</b> <b>options</b>
       <b>protocol-group</b> <u>group</u>
              This  specifies  the link-local multicast address to be used by the protocol, and is equivalent to
              the command-line option <b>-m</b>.

       <b>protocol-port</b> <u>port</u>
              This specifies the UDP port number to be used by the protocol, and is equivalent to  the  command-
              line option <b>-p</b>.

       <b>kernel-priority</b> <u>priority</u>
              This  specifies  the priority value used when installing routes into the kernel, and is equivalent
              to the command-line option <b>-k</b>.

       <b>reflect-kernel-metric</b> {<b>true</b>|<b>false</b>}
              Reflect route metrics as kernel priorities.  The priority effectively used  is  <b>kernel-priority</b>  +
              <b>metric</b>.

       <b>allow-duplicates</b> <u>priority</u>
              This  allows  duplicating external routes when their kernel priority is at least <u>priority</u>.  Do not
              use this option unless you know what you are doing, as it can cause persistent route flapping.

       <b>random-id</b> {<b>true</b>|<b>false</b>}
              This specifies whether to use a random router-id, and is equivalent to the command-line option <b>-r</b>.

       <b>ipv6-subtrees</b> {<b>true</b>|<b>false</b>}
              This specifies whether to use native source-specific IPv6 forwarding rather than multiple  routing
              tables.  The default is chosen automatically depending on the kernel version.

       <b>debug</b> <u>level</u>
              This specifies the debugging level, and is equivalent to the command-line option <b>-d</b>.

       <b>local-port</b> <u>port</u>
              This  specifies  the  TCP  port  on  which <b>babeld</b> will listen for connections from a configuration
              client in read-only mode, and is equivalent to the command-line option <b>-g</b>.

       <b>local-port-readwrite</b> <u>port</u>
              This specifies the TCP port on which <b>babeld</b> will  listen  for  connections  from  a  configuration
              client in read-write mode, and is equivalent to the command-line option <b>-G</b>.  This allows any local
              user to change <b>babeld</b>'s configuration, and may therefore be a security issue.

       <b>local-path</b> <u>path</u>
              This  specifies the filesystem path to a socket on which <b>babeld</b> will listen for connections from a
              configuration client in read-only mode, and is equivalent to the command-line option <b>-g</b>.

       <b>local-path-readwrite</b> <u>path</u>
              This specifies the filesystem path to a socket on which <b>babeld</b> will listen for connections from  a
              configuration  client  in  read-write  mode, and is equivalent to the command-line option <b>-G</b>.  Any
              user with write access to that socket will be able to change <b>babeld</b>'s configuration.

       <b>export-table</b> <u>table</u>
              This specifies the kernel routing table to use for routes inserted by <b>babeld</b>, and is equivalent to
              the command-line option <b>-t</b>.

       <b>import-table</b> <u>table</u>
              This specifies a kernel routing table from which routes are redistributed by <b>babeld</b>,  and  can  be
              specified  multiple times with a cumulative effect.  This is equivalent to the command-line option
              <b>-T</b>.

       <b>kernel-check-interval</b> <u>seconds</u>
              This specifies the interval between two kernel routing  table  dumps.   The  default  is  300s  (5
              minutes).  This may be set to 0 in order to never perform periodic kernel dumps.

       <b>shutdown-delay-ms</b> <u>milliseconds</u>
              During  shutdown we first notify neighbours of our imminent shutdown by sending route retractions,
              wait for the specified number of milliseconds and then  flush  kernel  routes.  This  ensures  any
              inflight  traffic is still properly forwarded. You may want to ensure the delay is appropriate for
              the maximum delay path in your network. Setting this to zero is permissible.

       <b>link-detect</b> {<b>true</b>|<b>false</b>}
              This specifies whether to use  carrier  sense  for  determining  interface  availability,  and  is
              equivalent to the command-line option <b>-l</b>.

       <b>smoothing-half-life</b> <u>seconds</u>
              This  specifies  the  half-life in seconds of the exponential decay used for smoothing metrics for
              performing route selection, and is equivalent to the command-line option <b>-M</b>.

       <b>daemonise</b> {<b>true</b>|<b>false</b>}
              This specifies whether to daemonize at startup, and is equivalent to the command-line option <b>-D</b>.

       <b>skip-kernel-setup</b> {<b>true</b>|<b>false</b>}
              If this flag is set, no kernel (sysctl) setup is performed on startup,  and  it  is  assumed  that
              enabling  forwarding,  disabling  redirects  and disabling the reverse-path filter is performed by
              other means.  This can be useful when running in environments  where  system  permissions  prevent
              setting kernel parameters, for instance without root permissions or inside a Linux container.

       <b>router-id</b> <u>id</u>
              Specify the router-id explicitly, as a modified EUI-64 or a MAC-48 address.  If two nodes have the
              same router-id, bad things will happen.  Don't use this option unless you know what you are doing.

       <b>state-file</b> <u>filename</u>
              This  specifies the name of the file used for preserving long-term information between invocations
              of the <b>babeld</b> daemon, and is equivalent to the command-line option <b>-S</b>.

       <b>log-file</b> <u>filename</u>
              This specifies the name of the file used to log random messages  to,  and  is  equivalent  to  the
              command-line option <b>-L</b>.

       <b>pid-file</b> <u>filename</u>
              This  specifies  the name of the file to which <b>babeld</b> writes out its process id, and is equivalent
              to the command-line option <b>-I</b>.

       <b>first-rule-priority</b> <u>priority</u>
              This specifies smallest (highest) rule priority used with source-specific routes.  The default  is
              100.

       <b>key</b> <b>id</b> <u>id</u> <b>type</b> {<b>hmac-sha256</b>|<b>blake2s128</b>} <b>value</b> <u>value</u>
              Configure  a  key  for  use  with  the  <b>key</b>  interface  option.  The <b>type</b> is one of <b>hmac-sha256</b> or
              <b>blake2s128</b>.  The <b>value</b> is a hexadecimal string (up to 64 bytes for <b>hmac-sha256</b>, up to 32 bytes for
              <b>blake2s128</b>).

   <b>Interface</b> <b>configuration</b>
       An interface is configured by a line with the following format:

              <b>interface</b> <u>name</u> [<u>parameter</u>...]

       where <u>name</u> is the name of the interface (something  like  <b>eth0</b>).   The  default  value  of  an  interface
       parameter can be specified changed by a line of the form

              <b>default</b> [<u>parameter</u>...]

       Each <u>parameter</u> can be one of:

       <b>type</b> {<b>auto</b>|<b>wired</b>|<b>wireless</b>|<b>tunnel</b>}

              The default is <b>auto</b> unless the <b>-w</b> command-line flag was specified.

       <b>link-quality</b> {<b>true</b>|<b>false</b>|<b>auto</b>}
              This specifies whether link quality estimation should be performed on this interface.  The default
              is to perform link quality estimation on wireless interfaces only.

       <b>split-horizon</b> {<b>true</b>|<b>false</b>|<b>auto</b>}
              This  specifies  whether to perform split-horizon processing on this interface.  The default is to
              perform split-horizon processing on on wired interfaces, unless the <b>-s</b> flag was set.

       <b>rxcost</b> <u>cost</u>
              This defines the cost of receiving frames on the given interface under ideal conditions (no packet
              loss); how this relates to the actual cost used for computing metrics of routes going through this
              interface depends on whether link quality estimation is being done.  The default  is  256  if  the
              interface is wireless, and 96 otherwise.

       <b>hello-interval</b> <u>interval</u>
              This  defines the interval between hello packets sent on this interface.  The default is specified
              with the <b>-h</b> and <b>-H</b> command-line flags.

       <b>update-interval</b> <u>interval</u>
              This defines the interval between full routing table dumps sent on  this  interface;  since  Babel
              uses  triggered  updates  and  doesn't count to infinity, this can be set to a fairly large value,
              unless significant packet loss is expected.  The default is four times the hello interval.

       <b>enable-timestamps</b> {<b>true</b>|<b>false</b>}
              Enable sending timestamps with each Hello and IHU message in order to  compute  RTT  values.   The
              default is <b>true</b> for tunnel interfaces, and <b>false</b> otherwise.

       <b>unicast</b> {<b>true</b>|<b>false</b>}
              Send  multiple  copies  of  TLVs  other than Hellos to all neighbours rather than sending a single
              multicast packet.  The default is false.

       <b>rfc6126-compatible</b> {<b>true</b>|<b>false</b>}
              Disable some features that are incompatible  with  RFC  6126  (the  older  version  of  the  Babel
              protocol), such as source-specific routing and RTT estimation over unicast.  The default is <b>false</b>.

       <b>rtt-decay</b> <u>decay</u>
              This  specifies  the  decay  factor for the exponential moving average of RTT samples, in units of
              1/256.  Must be between 1 and 256, inclusive.  Higher values  discard  old  samples  faster.   The
              default is <b>42</b>.

       <b>rtt-min</b> <u>rtt</u>
              This  specifies  the  minimum  RTT, in milliseconds, starting from which we increase the cost to a
              neighbour. The additional cost is linear in (rtt - <b>rtt-min</b>).  The default is <b>10</b> ms.

       <b>rtt-max</b> <u>rtt</u>
              This specifies the maximum RTT, in milliseconds, above which we  don't  increase  the  cost  to  a
              neighbour. The default is <b>120</b> ms.

       <b>max-rtt-penalty</b> <u>cost</u>
              This  specifies  the maximum cost added to a neighbour because of RTT, i.e. when the RTT is higher
              or equal than <b>rtt-max</b>.  The default is <b>96</b> if the interface is of type <b>tunnel,</b> and <b>0</b> otherwise.

       <b>v4-via-v6</b> {<b>true</b>|<b>false</b>}
              Whether to announce IPv4 routes through this interface even when there is no  IPv4  address.   The
              default depends on the kernel version.

       <b>probe-mtu</b> {<b>true</b>|<b>false</b>}
              Pad  all  packets  containing  a  Hello TLV to the MTU and disable fragmentation.  This will avoid
              establishing adjacencies across links with a mis-configured MTU, at the cost  of  slightly  higher
              network usage.

       <b>key</b> <u>id</u> Enable HMAC security on this interface, and use the key <u>id</u>.

       <b>accept-bad-signatures</b> {<b>true</b>|<b>false</b>}
              Accept  packets with no signature or an incorrect signature.  This only has an effect if a key was
              configured on an interface.  The default is false.

   <b>Filtering</b> <b>rules</b>
       A filtering rule is defined by a single line with the following format:

              <u>filter</u> <u>selector</u>...  <u>action</u>

       <u>Filter</u> specifies the filter to which this entry will be added, and can be one of <b>in</b>  (applied  to  routes
       learned  from  Babel  neighbours),  <b>out</b>  (applied  to routes announced to Babel neighbours), <b>redistribute</b>
       (applied to routes redistributed from the kernel), or <b>install</b>  (applied  to  routes  installed  into  the
       kernel).

       Each <u>selector</u> specifies the conditions under which the given statement matches.  It can be one of

       <b>ip</b> <u>prefix</u>
              This entry only applies to routes in the given prefix.

       <b>eq</b> <u>plen</u>
              This entry only applies to routes with a prefix length equal to <b>plen</b>.

       <b>le</b> <u>plen</u>
              This entry only applies to routes with a prefix length less or equal to <b>plen</b>.

       <b>ge</b> <u>plen</u>
              This entry only applies to routes with a prefix length greater or equal to <b>plen</b>.

       <b>src-ip</b> <u>prefix</u>
              This entry only applies to routes with a source prefix in the given prefix.

       <b>src-eq</b> <u>plen</u>
              This entry only applies to routes with a source prefix length equal to <b>plen</b>.

       <b>src-le</b> <u>plen</u>
              This entry only applies to routes with a source prefix length less or equal to <b>plen</b>.

       <b>src-ge</b> <u>plen</u>
              This entry only applies to routes with a source prefix length greater or equal to <b>plen</b>.

       <b>neigh</b> <u>address</u>
              This entry only applies to routes learned from a neighbour with link-local address <u>address</u>.

       <b>id</b> <u>id</u>  This entry only applies to routes originated by a router with router-id <u>id</u>.

       <b>proto</b> <u>p</u>
              This  entry  only  applies  to  kernel routes with kernel protocol number <u>p</u>.  If neither <b>proto</b> nor
              <b>local</b> is specified, this entry applies to all non-local kernel routes with  a  protocol  different
              from "boot".

       <b>local</b>  This entry only applies to local addresses.

       <b>if</b> <u>interface</u>
              For  an input filter, this specifies the interface over which the route is learned.  For an output
              filter, this specifies the interface over which this route  is  advertised.   For  a  redistribute
              statement, this specifies the interface over which the route forwards packets.

       <u>Action</u>  specifies  the  action  to  be  taken  when this entry matches.  It can have one of the following
       values:

       <b>allow</b>  Allow this route, without changing  its  metric  (or  setting  its  metric  to  0  in  case  of  a
              redistribute filter).

       <b>deny</b>   Ignore this route.

       <b>metric</b> <u>value</u>
              For  an  input  or  output  filter,  allow this route after increasing its metric by <u>value</u>.  For a
              redistribute filter, redistribute this route with metric <u>value</u>.

       <b>src-prefix</b> <u>prefix</u>
              For a redistribute filter, set the source prefix of this route to <u>prefix</u>.

       <b>table</b> <u>table</u>
              In an <b>install</b> filter, specify the kernel routing table to use.  For source-specific  routes,  this
              only works reliably for IPv6, and only when <b>ipv6-subtrees</b> is true.

       <b>pref-src</b> <u>ip</u>
              Specify the preferred source address to use with this route.  Only useful in an <b>install</b> filter.

       If <u>action</u> is not specified, it defaults to <b>allow</b>.

       By  default,  <b>babeld</b>  redistributes all local addresses, and no other routes.  In order to make sure that
       only the routes you specify are redistributed, you should include the line

              redistribute local deny

       as the last line in your configuration file.

</pre><h4><b>LOCAL</b> <b>CONFIGURATION</b> <b>INTERFACE</b></h4><pre>
       If <b>babeld</b> is invoked with the flag <b>-g</b>, it accepts TCP connections from local clients on  the  given  port
       and  address  <b>::1</b>  (the  IPv6 <b>localhost</b> address), or on the given UNIX-domain socket path if the argument
       starts with ‘/’.  When a client connects, <b>babeld</b> replies with <b>BABEL</b> followed with the  supported  version
       of  the  local  configuration  protocol (currently <b>1.0</b>).  This is followed with a number of informational
       lines (<b>version</b> etc.), terminated by <b>ok</b>.  The client can then  send  requests,  one  per  line.   To  each
       request, <b>babeld</b> replies with one or more lines of data terminated by one of <b>ok</b>, <b>no</b>, or <b>bad</b>.

       The following requests are currently defined:

       • any configuration file directive, including <b>interface</b>;

       • <b>flush</b> <b>interface</b>;

       • <b>dump</b>;

       • <b>monitor</b> and <b>unmonitor</b>;

       • <b>quit</b>.

</pre><h4><b>EXAMPLES</b></h4><pre>
       You can participate in a Babel network by simply running

              # babeld wlan0

       where <b>wlan0</b> is the name of your wireless interface.

       In order to gateway between multiple interfaces, just list them all on the command line:

              # babeld wlan0 eth0 sit1

       On an access point, you'll probably want to redistribute some external routes into Babel:

              # babeld \
                  -C 'redistribute metric 256' \
                  wlan0

       or, if you want to constrain the routes that you redistribute,

              # babeld \
                  -C 'redistribute proto 11 ip ::/0 le 64 metric 256' \
                  -C 'redistribute proto 11 ip 0.0.0.0/0 le 24 metric 256' \
                  wlan0

   <b>Source-specific</b> <b>routing</b>
       If  your want to redistribute kernel routes as source-specific to the network, with the 2001:DB8:0:1::/64
       prefix:

              redistribute src-prefix 2001:DB8:0:1::/64

       For more information about source-specific routing, please see

              Matthieu Boutier and Juliusz Chroboczek.  Source-sensitive  routing.   In  Proc.  IFIP  Networking
              2015.  2015.

       available online at

              <a href="http://arxiv.org/pdf/1403.0445v4.pdf">http://arxiv.org/pdf/1403.0445v4.pdf</a>

</pre><h4><b>FILES</b></h4><pre>
       <b>/etc/babeld.conf</b>
              The default location of the configuration file.

       <b>/var/lib/babel-state</b>
              The default location of the file storing long-term state.

       <b>/var/run/babeld.pid</b>
              The default location of the pid file.

       <b>/var/log/babeld.log</b>
              The default location of the log file.

</pre><h4><b>SIGNALS</b></h4><pre>
       <b>SIGUSR1</b>
              Dump Babel's routing tables to standard output or to the log file.

       <b>SIGUSR2</b>
              Check interfaces and kernel routes right now, then reopen the log file.

</pre><h4><b>SECURITY</b></h4><pre>
       Babel  is a completely insecure protocol: any attacker able to inject IP packets with a link-local source
       address can disrupt the protocol's operation.  This is no different from unsecured neighbour discovery or
       ARP.

       Usage of the <b>-G</b> flag allows any user logged on the local host to change <b>babeld</b>'s configuration.

       Since Babel uses link-local IPv6 packets only, there is no need to update firewalls to  allow  forwarding
       of  Babel  protocol  packets.   If  local  filtering is being done, UDP datagrams to the port used by the
       protocol should be allowed.  As Babel uses unicast packets in some cases, it is not enough to just  allow
       packets destined to Babel's multicast address.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man8/routed.8.html">routed</a></b>(8), <b><a href="../man8/route6d.8.html">route6d</a></b>(8), <b><a href="../man8/zebra.8.html">zebra</a></b>(8), <b><a href="../man8/ahcpd.8.html">ahcpd</a></b>(8).

</pre><h4><b>AUTHOR</b></h4><pre>
       Juliusz Chroboczek.

                                                                                                       <u><a href="../man8/BABELD.8.html">BABELD</a></u>(8)
</pre>
 </div>
</div></section>
</div>
</body>
</html>