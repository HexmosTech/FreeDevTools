<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ip-netns - process network namespace management</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/iproute2">iproute2_6.14.0-1ubuntu3_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       ip-netns - process network namespace management

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>ip</b> [ <u>OPTIONS</u> ] <b>netns</b>  { <u>COMMAND</u> | <b>help</b> }

       <b>ip</b> <b>netns</b> [ <b>list</b> ]

       <b>ip</b> <b>netns</b> <b>add</b> <u>NETNSNAME</u>

       <b>ip</b> <b>netns</b> <b>attach</b> <u>NETNSNAME</u> <u>PID</u>

       <b>ip</b> <b>[-all]</b> <b>netns</b> <b>del</b> [ <u>NETNSNAME</u> ]

       <b>ip</b> <b>netns</b> <b>set</b> <u>NETNSNAME</u> <u>NETNSID</u>

       <u>NETNSID</u> := <u>auto</u> | <u>POSITIVE-INT</u>

       <b>ip</b> <b>netns</b> <b>identify</b> [ <u>PID</u> ]

       <b>ip</b> <b>netns</b> <b>pids</b> <u>NETNSNAME</u>

       <b>ip</b> <b>[-all]</b> <b>netns</b> <b>exec</b> [ <u>NETNSNAME</u> ] <u>command</u>...

       <b>ip</b> <b>netns</b> <b>monitor</b>

       <b>ip</b> <b>netns</b> <b>list-id</b> [ target-nsid <u>POSITIVE-INT</u> ] [ nsid <u>POSITIVE-INT</u> ]

</pre><h4><b>DESCRIPTION</b></h4><pre>
       A network namespace is logically another copy of the network stack, with its own routes, firewall rules,
       and network devices.

       By default a process inherits its network namespace from its parent. Initially all the processes share
       the same default network namespace from the init process.

       By convention a named network namespace is an object at <b>/run/netns/</b>NAME that can be opened. The file
       descriptor resulting from opening <b>/run/netns/</b>NAME refers to the specified network namespace. Holding that
       file descriptor open keeps the network namespace alive. The file descriptor can be used with the <b><a href="../man2/setns.2.html">setns</a>(2)</b>
       system call to change the network namespace associated with a task.

       For applications that are aware of network namespaces, the convention is to look for global network
       configuration files first in <b>/etc/netns/</b>NAME<b>/</b> then in <b><a href="file:/etc/">/etc/</a></b>.  For example, if you want a different
       version of <b><a href="file:/etc/resolv.conf">/etc/resolv.conf</a></b> for a network namespace used to isolate your vpn you would name it
       <b>/etc/netns/myvpn/resolv.conf.</b>

       <b>ip</b> <b>netns</b> <b>exec</b> automates handling of this configuration, file convention for network namespace unaware
       applications, by creating a mount namespace and bind mounting all of the per network namespace configure
       files into their traditional location in /etc.

       <b>ip</b> <b>netns</b> <b>list</b> <b>-</b> <b>show</b> <b>all</b> <b>of</b> <b>the</b> <b>named</b> <b>network</b> <b>namespaces</b>

              This command displays all of the network namespaces in /run/netns

       <b>ip</b> <b>netns</b> <b>add</b> <b>NAME</b> <b>-</b> <b>create</b> <b>a</b> <b>new</b> <b>named</b> <b>network</b> <b>namespace</b>

              If NAME is available in /run/netns this command creates a new network namespace and assigns NAME.

       <b>ip</b> <b>netns</b> <b>attach</b> <b>NAME</b> <b>PID</b> <b>-</b> <b>assign</b> <b>a</b> <b>name</b> <b>to</b> <b>the</b> <b>network</b> <b>namespace</b> <b>of</b> <b>the</b> <b>process</b>

              If  NAME is available in /run/netns this command attaches the network namespace of the process PID
              to NAME as if it were created with ip netns.

       <b>ip</b> <b>[-all]</b> <b>netns</b> <b>delete</b> <b>[</b> <b>NAME</b> <b>]</b> <b>-</b> <b>delete</b> <b>the</b> <b>name</b> <b>of</b> <b>a</b> <b>network</b> <b>namespace(s)</b>

              If NAME is present in /run/netns it is umounted and the mount point is removed.  If  this  is  the
              last  user  of  the network namespace the network namespace will be freed and all physical devices
              will be moved to the default one, otherwise the network namespace persists until it  has  no  more
              users. ip netns delete may fail if the mount point is in use in another mount namespace.

              If <b>-all</b> option was specified then all the network namespace names will be removed.

              It  is  possible  to  lose  the physical device when it was moved to netns and then this netns was
              deleted with a running process:

                 $ ip netns add net0
                 $ ip link set dev eth0 netns net0
                 $ ip netns exec net0 SOME_PROCESS_IN_BACKGROUND
                 $ ip netns del net0

              and eth0 will appear in the default netns only after SOME_PROCESS_IN_BACKGROUND will exit or  will
              be  killed.  To  prevent  this  the processes running in net0 should be killed before deleting the
              netns:

                 $ ip netns pids net0 | xargs kill
                 $ ip netns del net0

       <b>ip</b> <b>netns</b> <b>set</b> <b>NAME</b> <b>NETNSID</b> <b>-</b> <b>assign</b> <b>an</b> <b>id</b> <b>to</b> <b>a</b> <b>peer</b> <b>network</b> <b>namespace</b>

              This command assigns a id to a peer network namespace. This  id  is  valid  only  in  the  current
              network  namespace.  If the keyword "auto" is specified an available nsid will be chosen.  This id
              will be used by the kernel in some netlink messages. If no id is assigned when  the  kernel  needs
              it,  it  will  be automatically assigned by the kernel.  Once it is assigned, it's not possible to
              change it.

       <b>ip</b> <b>netns</b> <b>identify</b> <b>[PID]</b> <b>-</b> <b>Report</b> <b>network</b> <b>namespaces</b> <b>names</b> <b>for</b> <b>process</b>

              This command walks through /run/netns and finds  all  the  network  namespace  names  for  network
              namespace of the specified process, if PID is not specified then the current process will be used.

       <b>ip</b> <b>netns</b> <b>pids</b> <b>NAME</b> <b>-</b> <b>Report</b> <b>processes</b> <b>in</b> <b>the</b> <b>named</b> <b>network</b> <b>namespace</b>

              This  command walks through proc and finds all of the process who have the named network namespace
              as their primary network namespace.

       <b>ip</b> <b>[-all]</b> <b>netns</b> <b>exec</b> <b>[</b> <b>NAME</b> <b>]</b> <b>cmd</b> <b>...</b> <b>-</b> <b>Run</b> <b>cmd</b> <b>in</b> <b>the</b> <b>named</b> <b>network</b> <b>namespace</b>

              This command allows applications that are network namespace unaware to be run in  something  other
              than  the  default  network  namespace  with  all  of  the configuration for the specified network
              namespace appearing in the customary global locations. A network namespace  and  bind  mounts  are
              used  to  move  files  from  their  network namespace specific location to their default locations
              without affecting other processes.

              If <b>-all</b> option was specified then <b>cmd</b> will be executed synchronously on  the  each  named  network
              namespace  even  if  <b>cmd</b>  fails  on  some  of  them. Network namespace name is printed on each <b>cmd</b>
              executing.

       <b>ip</b> <b>netns</b> <b>monitor</b> <b>-</b> <b>Report</b> <b>as</b> <b>network</b> <b>namespace</b> <b>names</b> <b>are</b> <b>added</b> <b>and</b> <b>deleted</b>

              This command watches network namespace name addition and deletion events and  prints  a  line  for
              each event it sees.

       <b>ip</b> <b>netns</b> <b>list-id</b> <b>[target-nsid</b> <b>POSITIVE-INT]</b> <b>[nsid</b> <b>POSITIVE-INT]</b> <b>-</b> <b>list</b> <b>network</b> <b>namespace</b> <b>ids</b> <b>(nsid)</b>

              Network  namespace  ids are used to identify a peer network namespace. This command displays nsids
              of the current network  namespace  and  provides  the  corresponding  iproute2  netns  name  (from
              /run/netns) if any.

              The  <b>target-nsid</b> option enables to display nsids of the specified network namespace instead of the
              current network namespace. This <b>target-nsid</b> is a nsid from the current network namespace.

              The <b>nsid</b> option enables to display only  this  nsid.  It  is  a  nsid  from  the  current  network
              namespace.  In combination with the <b>target-nsid</b> option, it enables to convert a specific nsid from
              the current network namespace to a nsid of the <b>target-nsid</b> network namespace.

</pre><h4><b>EXAMPLES</b></h4><pre>
       ip netns list
              Shows the list of current named network namespaces

       ip netns add vpn
              Creates a network namespace and names it vpn

       ip netns exec vpn ip link set lo up
              Bring up the loopback interface in the vpn network namespace.

       ip netns add foo
       ip netns add bar
       ip netns set foo 12
       ip netns set bar 13
       ip -n foo netns set foo 22
       ip -n foo netns set bar 23
       ip -n bar netns set foo 32
       ip -n bar netns set bar 33
       ip netns list-id target-nsid 12
              Shows the list of nsids from the network namespace foo.
       ip netns list-id target-nsid 12 nsid 13
              Get nsid of bar from the network namespace foo (result is 23).

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man8/ip.8.html">ip</a></b>(8)

</pre><h4><b>AUTHOR</b></h4><pre>
       Original Manpage by Eric W. Biederman
       Manpage revised by Nicolas Dichtel &lt;<a href="mailto:nicolas.dichtel@6wind.com">nicolas.dichtel@6wind.com</a>&gt;

iproute2                                           16 Jan 2013                                       <u><a href="../man8/IP-NETNS.8.html">IP-NETNS</a></u>(8)
</pre>
 </div>
</div></section>
</div>
</body>
</html>