<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>zfs-destroy — destroy ZFS dataset, snapshots, or bookmark</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/zfsutils-linux">zfsutils-linux_2.3.2-1ubuntu3_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       zfs-destroy — destroy ZFS dataset, snapshots, or bookmark

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>zfs</b> <b>destroy</b> [<b>-Rfnprv</b>] <u>filesystem</u>|<u>volume</u>
       <b>zfs</b> <b>destroy</b> [<b>-Rdnprv</b>] <u>filesystem</u>|<u>volume</u>@<u>snap</u>[%<u>snap</u>[,<u>snap</u>[%<u>snap</u>]]]…
       <b>zfs</b> <b>destroy</b> <u>filesystem</u>|<u>volume</u>#<u>bookmark</u>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>zfs</b> <b>destroy</b> [<b>-Rfnprv</b>] <u>filesystem</u>|<u>volume</u>
         Destroys  the  given  dataset.   By  default,  the command unshares any file systems that are currently
         shared, unmounts any file systems that are currently mounted, and refuses to destroy a dataset that has
         active dependents (children or clones).

         <b>-R</b>  Recursively destroy all dependents, including cloned file systems outside the target hierarchy.

         <b>-f</b>  Forcibly unmount file systems.  This option has no effect on non-file  systems  or  unmounted  file
             systems.

         <b>-n</b>  Do  a dry-run ("No-op") deletion.  No data will be deleted.  This is useful in conjunction with the
             <b>-v</b> or <b>-p</b> flags to determine what data would be deleted.

         <b>-p</b>  Print machine-parsable verbose information about the deleted data.

         <b>-r</b>  Recursively destroy all children.

         <b>-v</b>  Print verbose information about the deleted data.

         Extreme care should be taken when applying either the <b>-r</b> or the <b>-R</b> options, as they can  destroy  large
         portions of a pool and cause unexpected behavior for mounted file systems in use.

       <b>zfs</b> <b>destroy</b> [<b>-Rdnprv</b>] <u>filesystem</u>|<u>volume</u>@<u>snap</u>[%<u>snap</u>[,<u>snap</u>[%<u>snap</u>]]]…
         Attempts  to  destroy  the given snapshot(s).  This will fail if any clones of the snapshot exist or if
         the snapshot is held.  In this case, by default, <b>zfs</b> <b>destroy</b> will have no effect and exit in error.  If
         the <b>-d</b> option is applied, the command will instead mark the given snapshot for automatic destruction as
         soon as it becomes eligible.  While marked for destruction, a snapshot remains visible,  and  the  user
         may create new clones from it and place new holds on it.

         The  read-only  snapshot  properties  <b>defer_destroy</b>  and  <b>userrefs</b> are used by <b>zfs</b> <b>destroy</b> to determine
         eligibility and marked status.

         An inclusive range of snapshots may be specified by separating the first  and  last  snapshots  with  a
         percent sign.  The first and/or last snapshots may be left blank, in which case the filesystem's oldest
         or newest snapshot will be implied.

         Multiple  snapshots  (or  ranges  of  snapshots) of the same filesystem or volume may be specified in a
         comma-separated list of snapshots.  Only the snapshot's short name (the part after  the  <b>@</b>)  should  be
         specified when using a range or comma-separated list to identify multiple snapshots.

         <b>-R</b>  Recursively  destroy  all clones of these snapshots, including the clones, snapshots, and children.
             If this flag is specified, the <b>-d</b> flag will have no effect.

         <b>-d</b>  Rather than returning error if the given snapshot is ineligible for immediate destruction, mark  it
             for deferred, automatic destruction once it becomes eligible.

         <b>-n</b>  Do  a dry-run ("No-op") deletion.  No data will be deleted.  This is useful in conjunction with the
             <b>-p</b> or <b>-v</b> flags to determine what data would be deleted.

         <b>-p</b>  Print machine-parsable verbose information about the deleted data.

         <b>-r</b>  Destroy (or mark for deferred deletion) all snapshots with this name in descendent file systems.

         <b>-v</b>  Print verbose information about the deleted data.

         Extreme care should be taken when applying either the <b>-r</b> or the <b>-R</b> options, as they can  destroy  large
         portions of a pool and cause unexpected behavior for mounted file systems in use.

       <b>zfs</b> <b>destroy</b> <u>filesystem</u>|<u>volume</u>#<u>bookmark</u>
         The given bookmark is destroyed.

</pre><h4><b>EXAMPLES</b></h4><pre>
   <b>Example</b> <b>1</b>: Creating and Destroying Multiple Snapshots
       The  following  command  creates  snapshots  named  <u>yesterday</u> of <u>pool/home</u> and all of its descendent file
       systems.  Each snapshot is mounted on demand in the <u>.zfs/snapshot</u> directory  at  the  root  of  its  file
       system.  The second command destroys the newly created snapshots.
             <b>#</b> <b>zfs</b> <b>snapshot</b> <b>-r</b> <u>pool/home</u>@<u>yesterday</u>
             <b>#</b> <b>zfs</b> <b>destroy</b> <b>-r</b> <u>pool/home</u>@<u>yesterday</u>

   <b>Example</b> <b>2</b>: Promoting a ZFS Clone
       The following commands illustrate how to test out changes to a file system, and then replace the original
       file system with the changed one, using clones, clone promotion, and renaming:
             # <b>zfs</b> <b>create</b> <u>pool/project/production</u>
               populate /pool/project/production with data
             # <b>zfs</b> <b>snapshot</b> <u>pool/project/production</u>@<u>today</u>
             # <b>zfs</b> <b>clone</b> <u>pool/project/production@today</u> <u>pool/project/beta</u>
               make changes to /pool/project/beta and test them
             # <b>zfs</b> <b>promote</b> <u>pool/project/beta</u>
             # <b>zfs</b> <b>rename</b> <u>pool/project/production</u> <u>pool/project/legacy</u>
             # <b>zfs</b> <b>rename</b> <u>pool/project/beta</u> <u>pool/project/production</u>
               once the legacy version is no longer needed, it can be destroyed
             # <b>zfs</b> <b>destroy</b> <u>pool/project/legacy</u>

   <b>Example</b> <b>3</b>: Performing a Rolling Snapshot
       The  following  example shows how to maintain a history of snapshots with a consistent naming scheme.  To
       keep a week's worth of snapshots, the user destroys the oldest snapshot, renames the remaining snapshots,
       and then creates a new snapshot, as follows:
             # <b>zfs</b> <b>destroy</b> <b>-r</b> <u>pool/users@7daysago</u>
             # <b>zfs</b> <b>rename</b> <b>-r</b> <u>pool/users@6daysago</u> @<u>7daysago</u>
             # <b>zfs</b> <b>rename</b> <b>-r</b> <u>pool/users@5daysago</u> @<u>6daysago</u>
             # <b>zfs</b> <b>rename</b> <b>-r</b> <u>pool/users@4daysago</u> @<u>5daysago</u>
             # <b>zfs</b> <b>rename</b> <b>-r</b> <u>pool/users@3daysago</u> @<u>4daysago</u>
             # <b>zfs</b> <b>rename</b> <b>-r</b> <u>pool/users@2daysago</u> @<u>3daysago</u>
             # <b>zfs</b> <b>rename</b> <b>-r</b> <u>pool/users@yesterday</u> @<u>2daysago</u>
             # <b>zfs</b> <b>rename</b> <b>-r</b> <u>pool/users@today</u> @<u>yesterday</u>
             # <b>zfs</b> <b>snapshot</b> <b>-r</b> <u>pool/users</u>@<u>today</u>

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <u><a href="../man8/zfs-create.8.html">zfs-create</a></u>(8), <u><a href="../man8/zfs-hold.8.html">zfs-hold</a></u>(8), <u><a href="../man8/zfsprops.8.html">zfsprops</a></u>(8)

OpenZFS                                          March 16, 2022                                   <u><a href="../man8/ZFS-DESTROY.8.html">ZFS-DESTROY</a></u>(8)
</pre>
 </div>
</div></section>
</div>
</body>
</html>