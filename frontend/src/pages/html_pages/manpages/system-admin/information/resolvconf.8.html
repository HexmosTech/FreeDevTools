<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>resolvconf - manage nameserver information</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/jammy/+package/resolvconf">resolvconf_1.84ubuntu1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       resolvconf - manage nameserver information

</pre><h4><b>SYNOPSIS</b></h4><pre>
       cat <u>FILE</u> | <b>resolvconf</b> <b>-a</b> <u>IFACE.PROG</u>

       <b>resolvconf</b> <b>-d</b> <u>IFACE.PROG</u>

       <b>resolvconf</b> <b>-u</b>

       <b>resolvconf</b> <b>--enable-updates</b> | <b>--disable-updates</b> | <b>--updates-are-enabled</b>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The  resolvconf  package  comprises  a  simple  database for run-time nameserver information and a simple
       framework for notifying applications of changes in that information.  Resolvconf thus sets itself  up  as
       the  intermediary  between  programs  that  supply  nameserver information and applications that use that
       information.

       Information is added to or removed from the database using  the  <b>resolvconf</b>  program.   See  the  <b>OPTIONS</b>
       section below for a discussion of the available options.

</pre><h4><b>SUPPLIERS</b> <b>OF</b> <b>NAMESERVER</b> <b>INFORMATION</b></h4><pre>
       Normally  the <b>resolvconf</b> program is run only by network interface configuration programs such as <b><a href="../man8/ifup.8.html">ifup</a></b>(8),
       <b>ifdown</b>, <b><a href="../man8/NetworkManager.8.html">NetworkManager</a></b>(8), <b><a href="../man8/dhclient.8.html">dhclient</a></b>(8), and <b><a href="../man8/pppd.8.html">pppd</a></b>(8); and by local nameservers such as <b><a href="../man8/dnsmasq.8.html">dnsmasq</a></b>(8).   These
       programs obtain nameserver information from some source and push it to <b>resolvconf</b>.

   <b>dhclient</b>
       The  <b>dhclient</b>  program,  for example, may receive nameserver addresses and domain search list information
       during    its    negotiation    with    the    DHCP    server;     if     so,     its     hook     script
       <u>/etc/dhcp/dhclient-enter-hooks.d/resolvconf</u> pushes this information to <b>resolvconf.</b>

   <b>ifup</b>
       The   <b>ifup</b>   program   can   be   used   to   configure  network  interfaces  according  to  settings  in
       <u>/etc/network/interfaces</u>.  To make <b>ifup</b> push nameserver information to <b>resolvconf</b> when  it  configures  an
       interface  the  administrator  must  add <b>dns-</b> option lines to the relevant <b>iface</b> stanza in <u><a href="../man5/interfaces.5.html">interfaces</a></u>(5).
       The following option names are accepted: <b>dns-nameserver</b>, <b>dns-search</b>, and <b>dns-sortlist</b>.

       To add a nameserver IP address, add an option line consisting of <b>dns-nameserver</b> and the address.  To  add
       multiple nameserver addresses, include multiple such <b>dns-nameserver</b> lines.

           dns-nameserver 192.168.1.254
           dns-nameserver 8.8.8.8

       To add search domain names, add a line beginning with <b>dns-search</b>.

           dns-search foo.org bar.com

       The  <b>dns-nameservers</b> option is also accepted and, unlike <b>dns-nameserver</b>, can be given multiple arguments,
       separated by spaces.

       The <b>dns-domain</b> option is deprecated in favor of <b>dns-search</b>.

       The resulting stanza might look like the following example.

           iface eth0 inet static
               address 192.168.1.3
               netmask 255.255.255.0
               gateway 192.168.1.1
               dns-nameserver 192.168.1.254
               dns-nameserver 8.8.8.8
               dns-search foo.org bar.com

       N.B.: On a machine where resolvconf has just been or is about to be installed and which previously relied
       on a static <u><a href="file:/etc/resolv.conf">/etc/resolv.conf</a></u> file,

       •      the nameserver information in that static file, (which is to say the  information  on  <b>nameserver</b>,
              <b>domain</b>,  <b>search</b>  and  <b>sortlist</b>  lines)  should  be  migrated to the appropriate <b>iface</b> stanza(s) in
              <u>/etc/network/<a href="../man5/interfaces.5.html">interfaces</a></u>(5) as just described;

       •      options   (which    is    to    say,    any    <b>options</b>    lines)    should    be    migrated    to
              <u>/etc/resolvconf/resolv.conf.d/base</u>.

   <b>Command</b> <b>line</b>
       The  administrator  <u>can</u> run <b>resolvconf</b> from the command line to add or delete nameserver information, but
       this is not normally necessary or advisable.

</pre><h4><b>CONSUMERS</b> <b>OF</b> <b>NAMESERVER</b> <b>INFORMATION</b></h4><pre>
       Nameserver information  provided  to  <b>resolvconf</b>  is  stored  for  use  by  subscribers  to  <b>resolvconf</b>'s
       notification  service.   Subscriber  packages  that  need to know when nameserver information has changed
       should install a script in <u>/etc/resolvconf/update.d/</u> (or in <u>/etc/resolvconf/update-libc.d/</u>:  see  below).
       For  example,  DNS  caches  such as <b><a href="../man8/dnsmasq.8.html">dnsmasq</a></b>(8) and <b><a href="../man8/pdnsd.8.html">pdnsd</a></b>(8) subscribe to the notification service so that
       they know whither to forward queries.  Client hook scripts will  find  the  files  containing  nameserver
       information in the current directory.

   <b>libc</b>
       The  most  important  software  package  that subscribes to the notification service is the GNU C Library
       <u><a href="../man3/resolver.3.html">resolver</a></u>(3).  This library is used by  many  applications  that  need  to  resolve  domain  names.   When
       nameserver  information  is  updated, the script <u>/etc/resolvconf/update.d/libc</u> generates a new version of
       the resolver configuration file, <u>/run/resolvconf/resolv.conf</u>, as described below.  If the new version  of
       the   file   differs   from   the   previously   generated   one   then   the   hook   scripts  found  in
       <u>/etc/resolvconf/update-libc.d/</u> are executed.

       The  dynamically  generated  resolver  configuration  file   always   starts   with   the   contents   of
       <u>/etc/resolvconf/resolv.conf.d/head</u>  and  ends  with  the  contents of <u>/etc/resolvconf/resolv.conf.d/tail</u>.
       Between <u>head</u> and <u>tail</u> the <u>libc</u> script  inserts  dynamic  nameserver  information  compiled  from,  first,
       information     provided     for    configured    interfaces;    second,    static    information    from
       <u>/etc/resolvconf/resolv.conf.d/base</u>.  Specifically, it writes:

         1) up to three <b>nameserver</b> lines, ordered according to <u>/etc/resolvconf/interface-order</u>,  possibly  fewer
            if      one      of      the      addresses      is      a      loopback     address     and     the
            <b>TRUNCATE_NAMESERVER_LIST_AFTER_LOOPBACK_ADDRESS</b>  environment  variable  is  affirmatively  set,   as
            discussed in the <b>ENVIRONMENT</b> <b>VARIABLES</b> section;

         2) up  to  one  <b>search</b>  line  containing the combined domain search list from all "domain" and "search"
            input lines, also ordered according to <u><a href="../man5/interface-order.5.html">interface-order</a></u>(5);

         3) all other non-comment input lines.

       To make the resolver use this dynamically generated resolver configuration file the administrator  should
       ensure  that  <u><a href="file:/etc/resolv.conf">/etc/resolv.conf</a></u>  is a symbolic link to <u>/run/resolvconf/resolv.conf</u>.  This link is normally
       created on installation of the resolvconf package.  The link is never modified by the <b>resolvconf</b>  program
       itself.   If you find that <u><a href="file:/etc/resolv.conf">/etc/resolv.conf</a></u> is not being updated, please check to make sure that the link
       is intact.

       The GNU C Library resolver library isn't the only resolver  library  available.   However,  any  resolver
       library  that  reads  <u><a href="file:/etc/resolv.conf">/etc/resolv.conf</a></u>  (and most of them do, in order to be compatible) should work fine
       with resolvconf.

       Subscriber packages that need to know only when  the  resolver  configuration  file  has  changed  should
       install  a  script  in  <u>/etc/resolvconf/update-libc.d/</u>  rather  than  in <u>/etc/resolvconf/update.d/</u>.  (For
       example, two packages that install <u>update-libc.d/</u>  hook  scripts  are  <b>fetchmail</b>  and  <b>squid</b>.)   This  is
       important  for  synchronization  purposes:  scripts  in <u>update-libc.d/</u> are run <u>after</u> <u>resolv.conf</u> has been
       updated; the same is not necessarily true of scripts in <u>update.d/</u>.

</pre><h4><b>OPTIONS</b></h4><pre>
       <b>-a</b> <u>IFACE.PROG</u>
              Add or overwrite the record <u>IFACE.PROG</u> then run the update scripts if updating is  enabled.   When
              this  option  is  used the information must be provided to <b>resolvconf</b> on its standard input in the
              format of the <u><a href="../man5/resolv.conf.5.html">resolv.conf</a></u>(5) file.  Each line in the file must be terminated by a newline.

       <b>-d</b> <u>IFACE.PROG</u>
              Delete the record <u>IFACE.PROG</u> then run the update scripts if updating is enabled.

       The string <u>IFACE.PROG</u> may not contain spaces, slashes, an initial dot, an initial hyphen  or  an  initial
       tilde.  It is conventionally formed from <u>IFACE</u>, the name of the interface involved, a dot, and <u>IPROG</u>, the
       name of the interface configuration program, e.g., "eth0.dhclient".

       <b>-u</b>     Just run the update scripts (if updating is enabled).

       With <b>-a</b>, <b>-d</b> or <b>-u</b>:
              if  updating  is  not  enabled, schedule a delayed update.  The delayed update will be carried out
              when updates are enabled.

       <b>--enable-updates</b>
              Set the flag indicating that <b>resolvconf</b> should run update scripts when invoked in the future  with
              <b>-a</b>, <b>-d</b> or <b>-u</b>.  If a delayed update was scheduled then run update scripts.

       <b>--disable-updates</b>
              Clear the flag.

       <b>--updates-are-enabled</b>
              Return 0 if the flag is set, otherwise return 1.

</pre><h4><b>ENVIRONMENT</b> <b>VARIABLES</b></h4><pre>
       The  following  variables can be set in the configuration file <u>/etc/default/resolvconf</u>.  If the file does
       not exist you will have to create it.

       <b>REPORT_ABSENT_SYMLINK</b>
              If set to "yes" then <b>resolvconf</b> will print a message when <u><a href="file:/etc/resolv.conf">/etc/resolv.conf</a></u> is not a symbolic  link
              to  the  <b>resolvconf</b>-generated resolver configuration file.  Set to "no" to prevent the printing of
              this message.  The default is "yes".

       <b>TRUNCATE_NAMESERVER_LIST_AFTER_LOOPBACK_ADDRESS</b>
              If set to "yes" then the <u>libc</u> script will include no more nameserver  addresses  after  the  first
              nameserver address that is a loopback address.  (In IPv4 a loopback address is any one that starts
              with "127.".  In IPv6 the loopback address is "::1".)

              The advantage of truncating the nameserver list after a loopback address is that doing so inhibits
              unnecessary  changes  to  <u>resolv.conf</u>  and  thus  reduces  the  number  of  instances in which the
              <u>update-libc.d/</u> scripts have to be run.  When an interface is brought up or down the local  caching
              nameserver  that  listens  on  the  loopback  address  is  still informed of the change and adapts
              accordingly; the clients of the resolver which use the local caching nameserver do not need to  be
              notified  of  the  change.   A disadvantage of this mode of operation is that applications have no
              secondary or tertiary nameserver address to fall back  on  should  the  local  caching  nameserver
              crash.   Insofar  as  a  local  nameserver  crash  can be regarded as an unlikely event, this is a
              relatively minor disadvantage.  Set to "no" to disable truncation.  The default is "yes".

              A deprecated synonym for this variable is <b>TRUNCATE_NAMESERVER_LIST_AFTER_127</b>.

</pre><h4><b>FILES</b></h4><pre>
       <u>/etc/default/resolvconf</u>
              See the ENVIRONMENT VARIABLES section.

       <u>/etc/resolvconf/interface-order</u>
              Determines the order of precedence of nameserver addresses and search domain names.  See above and
              <b><a href="../man5/interface-order.5.html">interface-order</a></b>(5).

       <u>/etc/resolvconf/resolv.conf.d/base</u>
              File containing basic resolver information.  The lines in this file are included in  the  resolver
              configuration file even when no interfaces are configured.

       <u>/etc/resolvconf/resolv.conf.d/head</u>
              File  to  be prepended to the dynamically generated resolver configuration file.  Normally this is
              just a comment line.

       <u>/etc/resolvconf/resolv.conf.d/tail</u>
              File to be appended to the dynamically generated resolver configuration file.  To append  nothing,
              make  this  an  empty  file.   This  file is a good place to put a resolver <b>options</b> line if one is
              needed, e.g.,

                  options inet6

       <u>/etc/resolvconf/resolv.conf.d/original</u>
              Copy of the <u><a href="file:/etc/resolv.conf">/etc/resolv.conf</a></u> file before the resolvconf package was installed.  This file  has  no
              effect  on  the functioning of resolvconf; it is retained so that <u><a href="file:/etc/resolv.conf">/etc/resolv.conf</a></u> can be restored
              to its original state if the resolvconf package is removed.

              Note also that a copy of this file is included in  the  database  until  the  first  reboot  after
              installation   of   the  resolvconf  package;  this  ensures  that  nameservers  reachable  before
              installation of resolvconf are still reachable after installation of  resolvconf  even  though  at
              that  point  not  all  suppliers  of nameserver information may have supplied their information to
              <b><a href="../man8/resolvconf.8.html">resolvconf</a></b>(8).

              Note   also   that   the   administrator   can   choose   to   create   a   symbolic    link    in
              <u>/etc/resolvconf/resolv.conf.d/</u>  from  <u>tail</u> to <u>original</u> so that the contents of <u>original</u> are always
              added to the end of the dynamically generated file.

</pre><h4><b>BUGS</b></h4><pre>
       Currently <b>resolvconf</b> does not check the sanity of the information provided to it.

</pre><h4><b>AUTHOR</b></h4><pre>
       Written by Thomas Hood &lt;<a href="mailto:jdthood@gmail.com">jdthood@gmail.com</a>&gt; with contributions by Nathan Stratton Treadway.

</pre><h4><b>COPYRIGHT</b></h4><pre>
       Copyright © 2004-2013 Thomas Hood.
       This is free software; see the source for copying conditions.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man5/interface-order.5.html">interface-order</a></b>(5), <b><a href="../man5/resolv.conf.5.html">resolv.conf</a></b>(5), <b><a href="../man3/resolver.3.html">resolver</a></b>(3).

       Read the resolvconf package <u>README</u> file for more in-depth information.

resolvconf                                         3 Feb 2013                                      <u><a href="../man8/RESOLVCONF.8.html">RESOLVCONF</a></u>(8)
</pre>
 </div>
</div></section>
</div>
</body>
</html>