<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>lcmaps_jobrep.mod - jobrepository LCMAPS plug-in</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/lcmaps-plugins-jobrep">lcmaps-plugins-jobrep_1.5.7-1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       lcmaps_jobrep.mod - jobrepository LCMAPS plug-in

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>lcmaps_jobrep.mod</b>   [<b>--test</b>]   --dsn   <u>&lt;Database</u> <u>Service</u> <u>Name&gt;</u>   --username   <u>&lt;database</u> <u>user&gt;</u>  --password
       <u>&lt;database</u> <u>password&gt;</u>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The LCMAPS Jobrepository plug-in stores credentials and the resulting account mappings into a  relational
       database.  This  plugin  will  link  up  all the known in-process information from LCMAPS core memory and
       stores it in a database. This plug-in uses ODBC (<a href="http://en.wikipedia.org/wiki/ODBC">http://en.wikipedia.org/wiki/ODBC</a>)  to  connect  to  the
       database.

       The  current  state  of  the  mappings between various credentials and Unix accounts is stored in an open
       database on disk, but this information can change  over  time  through  (regular)  system  administrative
       interventions.  This  state  is  now  preserved  in a relational database with the added benefit of being
       accessible by other systems, e.g. GridSAFE and build-up an easy to backup historic view  on  the  mapping
       state.

       Quite  some systems seem to dig up data by trawling log files, e.g. to construct accounting data records.
       This method is subjected to the settings of the sub-systems which control the  format  of  the  log  file
       output. Log trawling tools are interacting with the log files as a glorified API. This lowers the ability
       for  tools,  e.g.  LCMAPS,  to alter their log output. By offering the LCMAPS Jobrepository plug-in as an
       alternative with the added benefit of offering the data in a structured fine-grained  database  with  the
       ability of an historic view the intend is to avoid the need and/or requirement for log file trawling.

</pre><h4><b>DATABASE</b> <b>SCHEMA</b> <b>EXTENSIONS</b></h4><pre>
       The  schema  can  be  used  to link up account mapping and/or credential mapping results originating from
       other credential types and link up more fine grained details from the specific work environment,  i.e.  a
       Gatekeeper  and  GridFTPd  will  be  able  to  add service specific information together with the mapping
       results.

</pre><h4><b>FUTURE</b></h4><pre>
       The LCMAPS Jobrepository plug-in is currently limited to MySQL and MariaDB despite its usage of the  ODBC
       database  interface.  The  intend  is  to  remove  this  limitation  and make the plug-in work with other
       database, e.g. PostgreSQL, Oracle and SQLite.

</pre><h4><b>OPTIONS</b></h4><pre>
       <b>--test</b> When enabled the plug-in will only test if the connection  to  the  database  can  be  established
              through  the ODBC coupling. The test will verify the correctness of the DSN, Username and Password
              combination. The plug-in will announce an LCMAPS SUCCESS when the connection was established,  and
              a FAILURE when it was not able to establish the connection.

       <b>--dsn</b> <b>&lt;Database</b> <b>Service</b> <b>Name&gt;</b>
              This will select the Data Source Name (DSN) that has been set in a <b>odbc.ini</b> file. Use the <b>odbc.ini</b>
              file  to  configure the database driver, server/host, port number and database name. See below for
              an example odbc.ini file.

       <b>--username</b> <b>&lt;database</b> <b>username&gt;</b>
              Specifies the database username that the LCMAPS module must  use  to  authorize  itself  with  the
              database.

       <b>--password</b> <b>&lt;database</b> <b>password&gt;</b>
              Specifies  the database password that the LCMAPS module must use to authorize itself with. You can
              omit the setting if you set the password in the odbc.ini file.

              <b>WARNING</b>: Be careful to assess the read permissions on the lcmaps.db file to be  exclusive  to  the
              service using this file, i.e. it's probably best to make the file exclusive to root:root.

</pre><h4><b>RETURN</b> <b>VALUES</b></h4><pre>
       <b>LCMAPS_MOD_SUCCESS</b>
              Success.

       <b>LCMAPS_MOD_FAIL</b>
              Failure.

</pre><h4><b>EXAMPLES</b></h4><pre>
       Notice the <b>--dsn</b> <b>&lt;value&gt;</b> matches the <b>DSN</b> shown in the .ini <b>section</b> <b>header</b>. Also notice that the posix_enf
       plug-in  is  executed  <b>after</b> the jobrep plug-in. The motivation is to be able to use privilege separation
       and with that protect the database password.

       <b>Example</b> <b>lcmaps.db</b>
              jobrep      = "lcmaps_jobrep.mod"
                            "--dsn <b>MySQL-test</b>"
                            "--username root"
                            "--password worteltjes"

              example_plugin_policy:
              verifyproxy -&gt; vomslocalgroup
              vomslocalgroup -&gt; vomspoolaccount
              vomspoolaccount -&gt; tracking_groupid
              tracking_groupid -&gt; jobrep
              jobrep -&gt; posix_enf

       <b>Example</b> <b>/etc/odbc.ini</b> <b>file:</b>
              [<b>MySQL-test</b>]
              Description = MySQL test database
              Driver      = MySQL
              SERVER      = 127.0.0.1
              PORT        = 3306
              DATABASE    = jobrepository

</pre><h4><b>SUPPORTED</b> <b>INSTALLATIONS</b></h4><pre>
       <b>Tested</b> <b>front-end</b> <b>tools</b> <b>and</b> <b>services</b>
              gLExec
              globus-gridftp-server
              globus-gatekeeper

       <b>Likely</b> <b>to</b> <b>work</b>
              SCAS
              lcmaps-rest (only the Full-SSL interface)
              gsi-openssh-server

       <b>Front-ends</b> <b>that</b> <b>will</b> <b>likely</b> <b>NOT</b> <b>work</b>
              WMProxy
              StoRM backend

</pre><h4><b>LIMITATIONS</b></h4><pre>
       The front-ends which do not use an LCMAPS interface that  provides  certificates  can  currently  not  be
       supported.  It is a requirement for the 1.5 version to be able to work from a certificate chain.

</pre><h4><b>BUGS</b></h4><pre>
       Please   report   any   errors   to   the   Nikhef   Grid  Middleware  Security  Team  &lt;grid-mw-security-
       <a href="mailto:support@nikhef.nl">support@nikhef.nl</a>&gt;.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man8/lcmaps.8.html">lcmaps</a></b>(8), <b><a href="../man8/lcmaps_jobrep.mod.8.html">lcmaps_jobrep.mod</a></b>(8), <b><a href="../man1/mysql.1.html">mysql</a></b>(1).
       More information can be found on-line at  the Nikhef Wiki on Site Access Control  and  the Nikhef Wiki on
       LCMAPS and other plug-ins.

</pre><h4><b>AUTHORS</b></h4><pre>
       The Jobrepository and the LCMAPS plug-ins were written by the Nikhef Grid Middleware Security Team &lt;grid-
       <a href="mailto:mw-security@nikhef.nl">mw-security@nikhef.nl</a>&gt;.

LCMAPS                                           August 31, 2012                            <u><a href="../man8/LCMAPS_JOBREP.MOD.8.html">LCMAPS_JOBREP.MOD</a></u>(8)
</pre>
 </div>
</div></section>
</div>
</body>
</html>