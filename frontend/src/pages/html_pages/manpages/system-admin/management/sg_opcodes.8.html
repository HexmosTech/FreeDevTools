<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>sg_opcodes - report supported SCSI commands or task management functions</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/sg3-utils">sg3-utils_1.48-2ubuntu1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       sg_opcodes - report supported SCSI commands or task management functions

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>sg_opcodes</b>    [<u>--alpha</u>]   [<u>--compact</u>]   [<u>--enumerate</u>]   [<u>--help</u>]   [<u>--hex</u>]   [<u>--inhex=FN</u>]   [<u>--json[=JO]</u>]
       [<u>--js-file=JFN</u>] [<u>--mask</u>] [<u>--mlu</u>] [<u>--no-inquiry</u>] [<u>--opcode=OP[,SA]</u>] [<u>--pdt=DT</u>] [<u>--raw</u>]  [<u>--rctd</u>]  [<u>--repd</u>]
       [<u>--sa=SA</u>] [<u>--tmf</u>] [<u>--unsorted</u>] [<u>--verbose</u>] [<u>--version</u>] <u>DEVICE</u>

       <b>sg_opcodes</b>  [<u>-a</u>]  [<u>-c</u>]  [<u>-e</u>] [<u>-H</u>] [<u>-i=FN</u>] [<u>-j</u>] [<u>-m</u>] [<u>-M</u>] [<u>-n</u>] [<u>-o=OP</u>] [<u>-p=DT</u>] [<u>-q</u>] [<u>-R</u>] [<u>-s=SA</u>] [<u>-t</u>] [<u>-u</u>]
       [<u>-v</u>] [<u>-V</u>] [<u>-?</u>] <u>DEVICE</u>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This utility sends a SCSI REPORT  SUPPORTED  OPERATION  CODES  or  a  REPORT  SUPPORTED  TASK  MANAGEMENT
       FUNCTIONS  command to the <u>DEVICE</u> and then outputs the response. The default action is to report supported
       operation codes. In this mode it will either list all supported commands or give detailed information  on
       a  specific  command  identified  by the <u>--opcode=OP</u> option (perhaps with additional information from the
       <u>--sa=SA</u> option).

       The name of a SCSI command depends on its peripheral device type (e.g.  a  disk).  The  REPORT  SUPPORTED
       OPERATION  CODES  and  REPORT  SUPPORTED  TASK MANAGEMENT FUNCTIONS commands are not supported in the MMC
       command set for CD and DVD devices. This utility does an INQUIRY to obtain the peripheral device type and
       prints out the vendor, product and revision strings.

       A similar facility to query supported operation codes previously was available via the CmdDt bit  in  the
       SCSI  INQUIRY command (see <a href="../man8/sg_inq.8.html">sg_inq</a>(8)). However that facility was made obsolete and replaced by the REPORT
       SUPPORTED OPERATION CODES command in SPC-3 (revision 4) during February 2002.

       This utility supports two command line syntaxes, the preferred one is shown first  in  the  synopsis  and
       explained  in  this  section. A later section on the old command line syntax outlines the second group of
       options.

</pre><h4><b>OPTIONS</b></h4><pre>
       Arguments to long options are mandatory for short options as well.

       <b>-a</b>, <b>--alpha</b>
              when all supported commands are being listed there is no requirement for the device  server  (i.e.
              the <u>DEVICE</u>) to sort the list of commands. When this option is given the list of supported commands
              is  sorted  by  name  (alphabetically).  When this option and the <b>--unsorted</b> option are both _not_
              given then the list of supported commands is sorted numerically (first by operation code and  then
              by service action).

       <b>-c</b>, <b>--compact</b>
              some  command  names,  especially  those associated with some service actions, are getting longer.
              This may cause line wrap in the one line per command mode on some terminals. When this  option  is
              given  the  opcode  and  service  action  fields are combined into a single field with the service
              action, prefixed by a comma shown directly after  the  opcode.  If  there  is  no  service  action
              associated with the command, then the comma and the service action are not shown after the opcode.
              The CDB size field is not shown when this option is given.

       <b>-e</b>, <b>--enumerate</b>
              this  option prints the name of the SCSI command based on the given opcode, peripheral device type
              and optionally the service action. If given, <u>DEVICE</u> is ignored. The opcode, peripheral device type
              and service action default to zero if not given. Thus if this option is the only option given then
              "Test Unit ready" is output since its opcode is 0, it has no service action and it  is  common  to
              all peripheral device types since it is defined in the SCSI Primary Commands (SPC) standard(s).

       <b>-h</b>, <b>--help</b>
              outputs the usage message summarizing command line options then exits. Ignores <u>DEVICE</u> if given.

       <b>-H</b>, <b>--hex</b>
              outputs  the  response  in  ASCII hexadecimal to stdout. When used once or twice, each line starts
              with a relative (hex) address starting at 0 on the first hex line output. The difference  is  when
              used  twice  the  hexadecimal bytes are rendered in ASCII at the right of each line; non-printable
              characters are replaced by "." .
              When used three or more times, there is no leading relative address on each line. This  output  is
              suitable for being redirected to a file which can later by given to the <u>--inhex=FN</u> option.

       <b>-i</b>, <b>--inhex</b>=<u>FN</u>
              where  <u>FN</u>  is  a  file  name whose contents are assumed to be ASCII hexadecimal. If <u>DEVICE</u> is also
              given then <u>DEVICE</u> is ignored, a warning is issued and the utility  continues,  decoding  the  file
              named  <u>FN</u>.  See  the  "HEX,  BINARY  AND  JSON  FORMATS" section in the sg3_utils manpage for more
              information. If the <u>--raw</u> option is also given then the contents of <u>FN</u> are treated as binary.

       <b>-j</b>[=<u>JO</u>], <b>--json</b>[=<u>JO</u>]
              output is in JSON format instead of plain text form. Note that arguments to  the  short  and  long
              form  are  themselves optional and if present start with "=" and no whitespace is permitted around
              that "=".
              See sg3_utils_json manpage or use '?' for <u>JO</u> to get a summary.

       <b>-J</b>, <b>--js-file</b>=<u>JFN</u>
              output is in JSON format and it is sent to a file named <u>JFN</u>.  If  that  file  exists  then  it  is
              truncated. By default, the JSON output is sent to stdout.
              When  this  option  is  given,  the  <u>--json[=JO]</u>  option  is  implied  and  need not be given. The
              <u>--json[=JO]</u> option may still be needed to set the <u>JO</u> parameter to non-default values.

       <b>-m</b>, <b>--mask</b>
              additionally prints out the cdb mask in hex. So a 12 byte cdb will  have  a  12  byte  hexadecimal
              mask.  If  the  hexadecimal  is  expanded  (mentally) to binary then a "1" means the corresponding
              position in the cdb may be set. And "0" means the corresponding position in the cdb  must  not  be
              set.  For "0" mask positions that a user tries to set in a cdb, the device may either ignore it or
              report an error, typically with a sense key of "illegal request".

       <b>-M</b>, <b>--mlu</b>
              additionally prints out an indication (0 or 1) whether the command effects all  logical  units  in
              the  containing  target.  MLU  (Multiple Logical Units) is a bit in the REPORT SUPPORTED OPERATION
              CODES response introduced by proposal 18-045r1 (and possibly in spc5r20). Without the option,  the
              default output format which lists all opcodes, does not include a MLU indication.

       <b>-n</b>, <b>--no-inquiry</b>
              Prior  to  calling  a  SCSI REPORT SUPPORTED OPERATION CODES or a REPORT SUPPORTED TASK MANAGEMENT
              FUNCTIONS command, a SCSI INQUIRY command is performed. The reason is to determine the  peripheral
              device  type  (pdt) of the <u>DEVICE</u> as this is helpful in translating operation codes to the command
              names. By default this utility prints a summary of INQUIRY command response  on  stdout.  If  this
              option (or the <u>--raw</u> option) is given then that summary is not printed on stdout.

       <b>-O</b>, <b>--old</b>
              Switch to older style options. Please use as first option.

       <b>-o</b>, <b>--opcode</b>=<u>OP[,SA]</u>
              the  <u>DEVICE</u>  will  be  queried for the given operation code (i.e. the <u>OP</u> value) which is the first
              byte of a SCSI command. Optionally, if a <u>SA</u> value is given, it will be used as that SCSI command's
              service action. Note that <u>OP</u> and <u>OP,0</u> are not the same thing,  as  SCSI  does  allow  the  service
              action  to  be  0 (but not in this command). <u>OP</u> and <u>SA</u> are decimal unless prefixed by "0x" or they
              have a trailing "h". <u>OP</u> should be in the range 0 to 255 (0xff) inclusive.  <u>SA</u>  should  be  in  the
              range  0  to  65535  (0xffff)  inclusive.  When  this  option is not given then all available SCSI
              commands supported by the <u>DEVICE</u> are listed.

       <b>-p</b>, <b>--pdt</b>=<u>DT</u>
              where <u>DT</u>  is  the  peripheral  device  type.  This  is  used  together  with  the  <u>--enumerate</u>  to
              differentiate  when  a  command  opcode  (and perhaps service action) is shared by multiple device
              types.
              Numerical values between -1 and 31 (inclusive) may be used where -1 implies what is in SPC.  Names
              like 'tape', 'disk' and 'processor' may also be given.
              This  option  may  also  be  used  with  the <u>--no-inquiry</u> option to suppress this utility doing an
              INQUIRY command since the main reason for doing that is to find the peripheral device type of  the
              <u>DEVICE</u>.

       <b>-r</b>, <b>--raw</b>
              output response in binary (to stdout) unless the <u>--inhex=FN</u> option is also given. In that case the
              input file name (<u>FN</u>) is decoded as binary (and the output is _not_ in binary (but may be hex)).

       <b>-R</b>, <b>--rctd</b>
              set  report  command timeout descriptor (RCTD) bit in the cdb. The response may or may not contain
              command timeout descriptors. If available they are output. If supported there are  two  values:  a
              nominal  command timeout and a recommended command timeout. Both have units of seconds. A value of
              zero means that no timeout is indicated and this is shown in the corresponding decoded  output  as
              "-".

       <b>-q</b>, <b>--repd</b>
              set  read extended parameter data (REPD) bit in the report task management functions cdb. 16 bytes
              rather than the default 4 bytes expected in the response. This was added in SPC-4 (revision 26).

       <b>-s</b>, <b>--sa</b>=<u>SA</u>
              the <u>DEVICE</u> will be queried for a command with the given service action (i.e. the <u>SA</u>  value).  Used
              in  conjunction with the <u>--opcode=OP</u> option. If this option is not given, <u>--opcode=OP</u> is given and
              the command in question does have a service action then a value  of  0  will  be  assumed.  <u>SA</u>  is
              decimal and expected to be in the range 0 to 65535 (0xffff) inclusive.

       <b>-t</b>, <b>--tmf</b>
              list  supported  task  management  functions.  This  is  done  with the SCSI REPORT SUPPORTED TASK
              MANAGEMENT FUNCTIONS command.  When this  option  is  chosen  the  <u>--alpha</u>,  <u>--opcode=OP</u>,  <u>--rctd</u>,
              <u>--sa=SA</u> and <u>--unsorted</u> options are ignored.

       <b>-u</b>, <b>--unsorted</b>
              when  all  supported commands are being listed there is no requirement for the device server (i.e.
              the <u>DEVICE</u>) to sort the list of commands. When this option is given the list of supported commands
              is in the order given by the <u>DEVICE</u>. When this option is not  given  the  supported  commands  are
              sorted numerically (first by operation code and then by service action).

       <b>-v</b>, <b>--verbose</b>
              increase level of verbosity. Can be used multiple times.

       <b>-V</b>, <b>--version</b>
              print out version string then exit.

</pre><h4><b>NOTES</b></h4><pre>
       As  of  SPC-5  revision  8 the recognized task management functions are: abort set, abort task set, clear
       ACA, clear task set, logical unit reset, query task, query asynchronous event, query task  set,  and  I_T
       nexus reset.  In SPC-4 revision 26 target reset and wakeup task management functions were made obsolete.

       In the 2.4 series of Linux kernels the <u>DEVICE</u> must be a SCSI generic (sg) device. In the 2.6 series block
       devices  (e.g.  SCSI  disks and DVD drives) can also be specified. For example "sg_opcodes /dev/sda" will
       work in the 2.6 series kernels.

</pre><h4><b>EXIT</b> <b>STATUS</b></h4><pre>
       The exit status of sg_opcodes is 0 when it is successful. Otherwise see the <a href="../man8/sg3_utils.8.html">sg3_utils</a>(8) man page.

</pre><h4><b>OLDER</b> <b>COMMAND</b> <b>LINE</b> <b>OPTIONS</b></h4><pre>
       The options in this section were the only ones available prior to sg3_utils version  1.23  .  Since  then
       this utility defaults to the newer command line options which can be overridden by using <u>--old</u> (or <u>-O</u>) as
       the  first  option. See the ENVIRONMENT VARIABLES section for another way to force the use of these older
       command line options.

       <b>-a</b>     sort command alphabetically. Equivalent to <u>--alpha</u> in main description.

       <b>-c</b>     see the <u>--compact</u> option above.

       <b>-e</b>     see the <u>--enumerate</u> option above.

       <b>-H</b>     see the <u>--hex</u> option above.

       <b>-m</b>     see the <u>--mask</u> option above.

       <b>-n</b>     don't print a summary of the SCSI INQUIRY response on stdout.

       <b>-N</b>, <b>--new</b>
              Switch to the newer style options.

       <b>-o</b>=<u>OP</u>  the <u>DEVICE</u> will be queried for the given operation code (i.e.  <u>OP</u>) which is the first  byte  of  a
              SCSI  command.  <u>OP</u>  is  hexadecimal  and expected to be in the range 0 to ff inclusive.  When this
              option is not given then all available SCSI commands supported by the <u>DEVICE</u> are listed.

       <b>-p</b>=<u>DT</u>  see the <u>--pdt=DT</u> option above.

       <b>-q</b>     set the read extended parameter data (REPD) bit in report TMF cdb.  Equivalent to <u>--repd</u>  in  main
              description.

       <b>-R</b>     set  the  report  command  timeout  descriptor  (RCTD)  bit  in  cdb. Equivalent to <u>--rctd</u> in main
              description.

       <b>-s</b>=<u>SA</u>  the <u>DEVICE</u> will be queried for a command  with  the  given  service  action  (i.e.  <u>SA</u>).  Used  in
              conjunction  with the <u>-o=OP</u> option. If this option is not given, <u>-o=OP</u> is given and the command in
              question does have a service action then a value of 0 will be  assumed.   <u>SA</u>  is  hexadecimal  and
              expected to be in the range 0 to ffff inclusive.

       <b>-t</b>     list supported task management functions. Equivalent to <u>--tmf</u> in the main description.

       <b>-u</b>     output  all  supported  commands  in  the order given by <u>DEVICE</u>.  Equivalent to <u>--unsorted</u> in main
              description.

       <b>-v</b>     increase level of verbosity. Can be used multiple times.

       <b>-V</b>     print out version string then exit.

       <b>-?</b>     output usage message. Ignore all other parameters.

</pre><h4><b>EXAMPLES</b></h4><pre>
       The examples in this page use Linux device names. For suitable device names in other supported  Operating
       Systems see the <a href="../man8/sg3_utils.8.html">sg3_utils</a>(8) man page.

       To  see the information about a specific command give its operation code to the '--op=' option. A command
       line invocation is shown first followed by a typical response:

          # sg_opcodes --op=93h /dev/sdb

         Opcode=0x93
         Command_name: Write <a href="../man16/same.16.html">same</a>(16)
         Command supported [conforming to SCSI standard]
         Usage data: 93 e2 00 00 00 00 ff ff ff ff 00 00 ff ff 00 00

       The next example shows the supported task management functions:

          # sg_opcodes --tmf -n /dev/sdb

       Task Management Functions supported by device:
           Abort task
           Abort task set
           Clear ACA
           Clear task set
           Logical unit reset
           Query task

       Enumerate can be used to look up a SCSI command name in the  absence  of  a  device  that  supports  that
       command. The opcode and service action (if required) should be supplied:

          # sg_opcodes --enumerate --op=0x9b,0xa

         SCSI command:
           Read <a href="../man16/buffer.16.html">buffer</a>(16), read data from echo buffer

</pre><h4><b>ENVIRONMENT</b> <b>VARIABLES</b></h4><pre>
       Since sg3_utils version 1.23 the environment variable SG3_UTILS_OLD_OPTS can be given. When it is present
       this  utility will expect the older command line options. So the presence of this environment variable is
       equivalent to using <u>--old</u> (or <u>-O</u>) as the first command line option.

</pre><h4><b>AUTHOR</b></h4><pre>
       Written by Douglas Gilbert

</pre><h4><b>REPORTING</b> <b>BUGS</b></h4><pre>
       Report bugs to &lt;dgilbert at interlog dot com&gt;.

</pre><h4><b>COPYRIGHT</b></h4><pre>
       Copyright © 2004-2023 Douglas Gilbert
       This software is distributed under the GPL version 2. There is NO warranty; not even for  MERCHANTABILITY
       or FITNESS FOR A PARTICULAR PURPOSE.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b>sg_inq,sg3_utils_json(sg3_utils)</b>

sg3_utils-1.48                                      June 2023                                      <u><a href="../man8/SG_OPCODES.8.html">SG_OPCODES</a></u>(8)
</pre>
 </div>
</div></section>
</div>
</body>
</html>