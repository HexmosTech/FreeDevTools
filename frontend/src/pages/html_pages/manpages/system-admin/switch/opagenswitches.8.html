<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>opagenswitches</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/opa-fastfabric">opa-fastfabric_10.10.3.0.11-1ubuntu3_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       opagenswitches

       Analyzes the present fabric and produces a list of Externally Managed switches in the required format for
       the /etc/opa/switches file.

</pre><h4><b>Syntax</b></h4><pre>
       opagenswitches [-t portsfile] [-p ports] [-R] [-L switches_file]
       [-o output_file] [-T topology_file] [-X snapshot_file] [-s] [-v level] [-K]

</pre><h4><b>Options</b></h4><pre>
       --help

                 Produces full help text.

       -t <u>portsfile</u>

                 Specifies the file with list of local HFI ports used to access fabric(s) for analysis.
                 Default is /etc/opa/ports file.

       -p <u>ports</u>

                 Specifies the list of local HFI ports used to access fabrics for counter clear.

                 Default  is first active port. The first HFI in the system is 1. The first port on an HFI is 1.
                 Uses the format hfi:port,
                 for example:

                 0:0       First active port in system.

                 0:y       Port <u>y</u> within system.

                 x:0       First active port on HFI <u>x</u>.

                 x:y       HFI <u>x</u>, port <u>y</u>.

       -R

                 Does not attempt to get routes for computation of distance.

       -s

                 Updates/resolves switch names using topology XML data.

       -L <u>switches_file</u>

                 Specifies the name of a pre-existing <u>switches_file</u> to be used as input in  conjunction  with  a
                 topology  file.  When  specified,  the  file is used instead of switches data obtained from the
                 actual fabric. The updated switches data is output to  stdout  (common  to  all  opagenswitches
                 operations). Does not generate switches data. Must also use -s option.

       -o <u>output_file</u>

                 Writes switches data to <u>output_file</u>. Default is stdout.

       -T <u>topology_file</u>

                 Specifies <u>topology_file</u> to use. May contain '%P' . Must also use -s.

                 Link data in the topology file is compared to actual fabric link data (obtained by opareport -o
                 links  or  opareport  -X  snapshot -o links). The data is also matched to a list of switch node
                 GUIDs and the switch NodeDesc values are generated. This list is then applied to  the  switches
                 data to update NodeDesc values. The comparison of topology link data to actual fabric link data
                 starts  with  the  host  names.  The  host  names  in the actual fabric must match those in the
                 topology file for the comparison to succeed. However, the  comparison  logic  allows  for  some
                 mismatches, which could be due to swapped or missing cables. Switch NodeDesc values are matched
                 to GUIDs based on which switch has the greater number of matching links.

       -X <u>snapshot_file</u>

                 Uses <u>snapshot_file</u> XML for fabric link information.
                 May contain '%P' . Must also use -s.

       -v <u>level</u>

                 Specifies the verbose level. Default is 0. Values include:

                 0         No output.

                 1         Progress output.

                 2         Reserved.

                 4         Time stamps.

                 8         Reserved.

       -K

                 Does  not clean temporary files. Temporary files are CSV format and contain lists of links used
                 during script operation. The files are not normally needed after execution,  but  they  can  be
                 retained for subsequent inspection or processing.

</pre><h4><b>Environment</b> <b>Variables</b></h4><pre>
       The following environment variables are also used by this command:

       <b>PORTS</b>

                 List of ports, used in absence of -t and -p.

       <b>PORTS_FILE</b>

                 File containing list of ports, used in absence of -t and -p.

       <b>FF_TOPOLOGY_FILE</b>

                 File containing topology XML data, used in absence of -T.

</pre><h4><b>Examples</b></h4><pre>
       opagenswitches

       opagenswitches -p '1:1 2:1'

       opagenswitches -o switches

       opagenswitches -s -o switches

       opagenswitches -L switches -s -o switches

       opagenswitches -s -T topology.%P.xml

       opagenswitches -L switches -s -T topology.%P.xml -X snapshot.%P.xml

Copyright(C) 2015-2019                          Intel Corporation                              <u><a href="../man8/opagenswitches.8.html">opagenswitches</a></u>(8)
</pre>
 </div>
</div></section>
</div>
</body>
</html>