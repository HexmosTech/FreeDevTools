<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ucarp - automatic IP failover</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/ucarp">ucarp_1.5.2+git20192404.1a9aaf7-1build2_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       <b>ucarp</b> - automatic IP failover

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>ucarp</b> [<b>-i</b>, <b>--interface</b>=INTERFACE]  [<b>-s</b>, <b>--srcip</b>=IPADDRESS]
             [<b>-m</b>, <b>--mcast</b>=&lt;ip&gt;] [<b>-v</b>, <b>--vhid</b>=VHID]  [<b>-p</b>, <b>--pass</b>=PASSWORD]
             [<b>-o</b>, <b>--passfile</b>=PASSFILE] [<b>-P</b>, <b>--preempt</b>] [<b>-n</b>, <b>--neutral</b>]
             [<b>-a</b>, <b>--addr</b>=IPADDR] [<b>-h</b>, <b>--help</b>] [<b>-b</b>, <b>--advbase</b>=SECS]
             [<b>-k</b>, <b>--advskew</b>=SKEW]  [<b>-u</b>, <b>--upscript</b>=SCRIPT] [<b>-d</b>, <b>--downscript</b>=SCRIPT]
             [<b>-r</b>, <b>--deadratio</b>=RATIO] [<b>-D</b>, <b>--debug</b>] [<b>-z</b>, <b>--shutdown</b>] [<b>-B</b>, <b>--daemonize</b>]
             [<b>-f</b>, <b>--facility</b>=FACILITY] [<b>-x</b>, <b>--xparam</b> <u>PARAM</u>] [<b>-S</b>, <b>--ignoreifstate</b>]
             [<b>-M</b>, <b>--nomcast</b>]

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>ucarp</b>  allows  a  pair of hosts to share common IP addresses in order to provide automatic failover of an
       address from one machine to another. It is a portable userland implementation of the secure  and  patent-
       free Common Address Redundancy Protocol, (CARP), OpenBSD's alternative to VRRP.

       Warning: Maximum length of the password used must be 20 characters.

</pre><h4><b>OPTIONS</b></h4><pre>
       <b>-i</b> <b>INTERFACE,</b> <b>--interface=INTERFACE</b>
              The network interface to bind to.

       <b>-s</b> <b>IPADDRESS,</b> <b>--srcip=IPADDRESS</b>
              The persistent source address, (real IP), associated with this interface.

       <b>-m</b> <b>IPADDRESS,</b> <b>--mcast=IPADDRESS</b>
              Multicast group IP address (default 224.0.0.18).

       <b>-v</b> <b>VHID,</b> <b>--vhid=VHID</b>
              The id of the virtual server [1-255].

       <b>-p</b> <b>PASSWORD,</b> <b>--pass=PASSWORD</b>
              The shared password, (this gets encrypted and is not sent in the clear).

       <b>-o</b> <b>PASSFILE,</b> <b>--passfile=PASSFILE</b>
              File to read the shared password from. The file specified should contain the password on the first
              line of the file.

       <b>-P,</b> <b>--preempt</b>
              Turn  on  preemptive  failover.  This  causes  an  instance of <b>ucarp</b> to assume master status right
              immediately.

       <b>-n,</b> <b>--neutral</b>
              Do not run the downscript on startup when the initial state is backup.

       <b>-a</b> <b>IPADDRESS,</b> <b>--addr=IPADDRESS</b>
              The IP address of the virtual server.

       <b>-h,</b> <b>--help</b>
              Display a brief summary of the command line options.

       <b>-b</b> <b>SECONDS,</b> <b>--advbase=SECONDS</b>
              Interval in seconds that advertisements will occur, (defaults to 1 second).

       <b>-k</b> <b>SKEW,</b> <b>--advskew=SKEW</b>
              Advertisement skew [1-255], (defaults to 0).

       <b>-u</b> <b>COMMAND</b> <b>--upscript=COMMAND</b>
              Specifies the command to run after <b>ucarp</b> has successfully become master, the interface  name  gets
              passed as an argument. Typically a script used to bring upthe virtual address, log the result, add
              routes, clear arp cache entries, etc.

       <b>-d</b> <b>COMMAND,</b> <b>--downscript=COMMAND</b>
              Specifies  the  command  that  is  run  after <b>ucarp</b> has  transitioned  to  the  backup state,  the
              interface name is passed as an argument. This is typically a script used to bring down the virtual
              interface, log the action, remove routes, etc.

       <b>-r</b> <b>RATIO,</b> <b>--deadratio=RATIO</b>
              Ratio used by the backup to  determine  how  long  to  wait  for  an  unresponsive  master  before
              considering it dead.

       <b>-D,</b> <b>--debug</b>
              Enable debug output.

       <b>-z,</b> <b>--shutdown</b>
              Use of this command causes the command specified by the <b>-d</b> argument to be invoked when <b>ucarp</b> shuts
              down.

       <b>-B,</b> <b>--daemonize</b>
              Causes <b>ucarp</b> to detach from the terminal and run in the background as a daemon.

       <b>-f,</b> <b>--facility=FACILITY</b>
              Set the syslog facility, defaults to daemon.

       <b>-x,</b> <b>--xparam=PARAMETER</b>
              Specify an extra parameter to be supplied to the up/down scripts.

       <b>-S,</b> <b>--ignoreifstate</b>
              Ignore  unplugged  network  cables.  This  option  is useful when <b>ucarp</b> nodes are connected with a
              crossover cable. Without this option the master will transition to backup when the other  node  is
              powered down, as it no longer has a link (NO-CARRIER).

       <b>-M,</b> <b>--nomcast</b>
              Use broadcast instead of multicast advertisements.

</pre><h4><b>EXAMPLES</b></h4><pre>
       A  host  with  a  real  IP  of 10.1.1.10 configured to be the master in a preemptive configuration with a
       virtual IP of 10.1.1.252.

           ucarp -i eth0 -s 10.1.1.10 -v 10 -p secret -a 10.1.1.252 --upscript=/etc/vip-up.sh --downscript=/etc/vip-down.sh -P

       The backup might be configured something like this.

           ucarp -i eth0 -s 10.1.1.11 -v 10 -p secret -a 10.1.1.252 --upscript=/etc/vip-up.sh --downscript=/etc/vip-down.sh

       A machine with a real IP of 192.168.1.19  is  the  preferred  master  for  a  virtual  IP  of  10.1.12.7,
       broadcasts are sent every 5 seconds.

           ucarp -b 5 -s 192.168.1.19 -v 27 -p badpass -a 10.1.12.7 -u /etc/vip-up.sh -d /etc/vip-down.sh -z

       <b>The</b>    hot   standby  with  an  IP  of  192.168.1.20  uses the following command, (note the advskew of 50
              putting it at a disadvantage and making the first machine preferred).

           ucarp -b 5 -k 50 -s 192.168.1.20 -v 27 -p badpass -a 10.1.12.7 -u /etc/vip-up.sh -d /etc/vip-down.sh -z

</pre><h4><b>SIGNALS</b></h4><pre>
       Sending the <b>ucarp</b> process a SIGUSR1 will have it log a  status  line  to  syslog,  eg  "Sep  13  12:59:56
       localhost  <b>ucarp</b>[2654]:  [INFO]  MASTER  on  eth0 id 1" or "Sep 13 13:00:25 localhost <b>ucarp</b>[2644]: [INFO]
       BACKUP on eth0 id 1"

       Sending the <b>ucarp</b> process a SIGUSR2 will cause it to  demote  itself  from  master  to  backup,  pause  3
       seconds,  then  proceed as usual to listen for other masters, and promote itself if necessary. This could
       be useful if you wish another node to take over master.

</pre><h4><b>AUTHOR</b></h4><pre>
       Written by Frank Denis &lt;<a href="mailto:j@pureftpd.org">j@pureftpd.org</a>&gt;.

       This manual page was written by Guilherme de Paula  Xavier  Segundo  &lt;<a href="mailto:guilherme.lnx@gmail.com">guilherme.lnx@gmail.com</a>&gt;  and  Eric
       Evans &lt;<a href="mailto:eevans@debian.org">eevans@debian.org</a>&gt; for the Debian project (but may be used by others).

ucarp-1.5.2+git20192404.1a9aaf7                    08 Jan 2023                                          <u><a href="../man8/ucarp.8.html">ucarp</a></u>(8)
</pre>
 </div>
</div></section>
</div>
</body>
</html>