<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>basic_ldap_auth - LDAP authentication helper for Squid</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/squid">squid_6.13-1ubuntu2_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       basic_ldap_auth - LDAP authentication helper for Squid

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>basic_ldap_auth</b> <b>-b</b> <b>"</b> base DN <b>"</b> <b>[-u</b> attribute <b>]</b> <b>[</b> options <b>]</b> <b>[</b> LDAP server name <b>[:</b> port <b>]|</b> URI <b>]...</b>
       <b>basic_ldap_auth</b>  <b>-b</b> <b>"</b>  base  DN <b>"</b> <b>-f</b> <b>"</b> LDAP search filter <b>"</b> <b>[</b> options <b>]</b> <b>[</b> LDAP server name <b>[:</b> port <b>]|</b> URI
       <b>]...</b>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>basic_ldap_auth</b> allows Squid to connect to a LDAP directory to validate the user  name  and  password  of
       Basic  HTTP  authentication.   LDAP  options  are  specified as parameters on the command line, while the
       username(s) and password(s) to be checked against the LDAP directory are specified on subsequent lines of
       input to the helper, one username/password pair per line separated by a space.

       As expected by the basic authentication construct of Squid, after  specifying  a  username  and  password
       followed  by  a  new line, this helper will produce either <b>OK</b> or <b>ERR</b> on the following line to show if the
       specified credentials are correct according to the LDAP directory.

       The program has two major modes of  operation.  In  the  default  mode  of  operation  the  users  DN  is
       constructed  using the base DN and user attribute. In the other mode of operation a search filter is used
       to locate valid user DN's below the base DN.

</pre><h4><b>OPTIONS</b></h4><pre>
       <b>-b</b> <b>basedn</b>   <b>REQUIRED.</b>  Specifies the base DN under which the users are located.

       <b>-f</b> <b>filter</b>   LDAP search <b>filter</b> to locate the user DN. Required if the users are in a hierarchy below  the
                   base DN, or if the login name is not what builds the user specific part of the users DN.
                   The  search  filter  can  contain  up  to  15 occurrences of <b>%s</b> which will be replaced by the
                   username, as in <b>"uid=%s"</b> for RFC2037 directories. For a detailed description of  LDAP  search
                   filter syntax see RFC2254.
                   Will crash if other <b>%</b> values than <b>%s</b> are used, or if more than 15 <b>%s</b> are used.

       <b>-u</b> <b>userattr</b> Specifies  the  name of the DN attribute that contains the username/login.  Combined with the
                   base DN to construct the users DN when no search filter is specified ( <b>-f</b>  option).  Defaults
                   to <b>uid</b>
                   <b>Note:</b> This can only be done if all your users are located directly under the same position in
                   the  LDAP tree and the login name is used for naming each user object. If your LDAP tree does
                   not match these criteria or if you want to filter who are valid users then you need to use  a
                   search filter to search for your users DN ( <b>-f</b> option).

       <b>-U</b> <b>passwordattr</b>
                   Use  <u>ldap_compare</u>  instead of <u>ldap_simple_bind</u> to verify the users password.  <b>passwordattr</b> is
                   the LDAP attribute storing the users password.

       <b>-s</b> <b>base|one|sub</b>
                   Search scope when performing user DN searches specified by the <b>-f</b> option. Defaults to <b>sub</b>

                   <b>base</b> object only,

                   <b>one</b> level below the base object or

                   <b>sub</b>tree below the base object

       <b>-D</b> <b>binddn</b> <b>-w</b> <b>password</b>
                   The DN and password to bind as while performing searches. Required by  the  <b>-f</b>  flag  if  the
                   directory does not allow anonymous searches.
                   As  the password needs to be printed in plain text in your Squid configuration it is strongly
                   recommended to use a account with minimal associated privileges.  This to limit the damage in
                   case someone could get hold of a copy of your Squid configuration file.

       <b>-D</b> <b>binddn</b> <b>-W</b> <b>secretfile</b>
                   The DN and the name of a file containing the password to bind as while performing searches.
                   Less insecure version of the former parameter pair with two advantages: The password does not
                   occur in the process listing, and the password is not being compromised if someone  gets  the
                   squid configuration file without getting the secretfile.

       <b>-P</b>          Use  a persistent LDAP connection. Normally the LDAP connection is only open while validating
                   a username to preserve resources at the LDAP server. This option causes the  LDAP  connection
                   to  be  kept  open,  allowing  it  to be reused for further user validations. Recommended for
                   larger installations.

       <b>-O</b>          Only bind once per LDAP connection. Some LDAP servers do not allow re-binding as another user
                   after a successful <u>ldap_bind.</u>  The use of this option always opens a new connection for  each
                   login  attempt.  If  combined  with  the  <b>-P</b>  option  for persistent LDAP connection then the
                   connection used for searching for the user DN is kept persistent  but  a  new  connection  is
                   opened to verify each users password once the DN is found.

       <b>-R</b>          Do not follow referrals

       <b>-a</b> <b>never|always|search|find</b>
                   when to dereference aliases. Defaults to <b>never</b>

                   <b>never</b> dereference aliases (default), <b>always</b> dereference aliases, only during a <b>search</b> or only
                   to <b>find</b> the base object.

       <b>-H</b> <b>ldap_uri</b> Specify the LDAP server to connect to by LDAP URI (requires OpenLDAP libraries).  Servers can
                   also be specified last on the command line.

       <b>-h</b> <b>ldap_server</b>
                   Specify  the  LDAP  server  to  connect to. Servers can also be specified last on the command
                   line.

       <b>-p</b> <b>ldap_port</b>
                   Specify an alternate TCP port where the LDAP server is listening if other  than  the  default
                   LDAP port 389. Can also be specified within the server specification by using servername:port
                   syntax.

       <b>-v</b> <b>2|3</b>      LDAP protocol version. Defaults to <b>3</b> if not specified.

       <b>-Z</b>          Use TLS encryption

       <b>-S</b> <b>certpath</b> Enable LDAP over SSL (requires Netscape LDAP API libraries)

       <b>-c</b> <b>connect_timeout</b>
                   Specify <b>timeout</b> used when connecting to LDAP servers (requires Netscape LDAP API libraries)

       <b>-t</b> <b>search_timeout</b>
                   Specify time limit on LDAP search operations

       <b>-d</b>          Debug  mode where each step taken will get reported in detail.  Useful for understanding what
                   goes wrong if the results is not what is expected.

</pre><h4><b>CONFIGURATION</b></h4><pre>
       For directories using the RFC2307 layout with a single domain, all you need to  specify  is  usually  the
       base DN under where your users are located and the server name:

              <b>basic_ldap_auth</b> <b>-b</b> <b>ou=people,dc=your,dc=domain</b> <b>ldapserver</b>

       If  you  have  sub-domains then you need to use a search filter approach to locate your user DNs as these
       can no longer be constructed directly from the base DN and login name alone:

              <b>basic_ldap_auth</b> <b>-b</b> <b>dc=your,dc=domain</b> <b>-f</b> <b>uid=%s</b> <b>ldapserver</b>

       And similarly if you only want to allow access to users having a specific attribute

              <b>basic_ldap_auth</b> <b>-b</b> <b>dc=your,dc=domain</b> <b>-f</b> <b>(&amp;(uid=%s)(specialattribute=value))</b> <b>ldapserver</b>

       Or if the user attribute of the user DN is <b>cn</b> instead of <b>uid</b> and you do not want to have  to  search  for
       the users then you could use something like the following example for Active Directory:

              <b>basic_ldap_auth</b> <b>-u</b> <b>cn</b> <b>-b</b> <b>cn=Users,dc=your,dc=domain</b> <b>ldapserver</b>

       If  you want to search for the user DN and your directory does not allow anonymous searches then you must
       also use the <b>-D</b> and <b>-w</b> flags to specify a user DN and password to log in as to perform the  searches,  as
       in the following complex Active Directory example

              <b>basic_ldap_auth</b>   <b>-P</b>   <b>-R</b>   <b>-b</b>   <b>dc=your,dc=domain</b>   <b>-D</b>   <b>cn=squid,cn=users,dc=your,dc=domain</b>   <b>-w</b>
              <b>secretsquidpassword</b> <b>-f</b> <b>(&amp;(userPrincipalName=%s)(objectClass=Person))</b> <b>activedirectoryserver</b>

       <b>NOTE:</b> When constructing search filters it is strongly recommended to test  the  filter  using  <b>ldapsearch</b>
       before you attempt to use <b>basic_ldap_auth.</b>  This to verify that the filter matches what you expect.

</pre><h4><b>AUTHOR</b></h4><pre>
       This  program  is  written  by  <u>Glenn</u>  <u>Newton</u>  <u>&lt;<a href="mailto:gnewton@wapiti.cisti.nrc.ca">gnewton@wapiti.cisti.nrc.ca</a>&gt;</u> <u>Henrik</u> <u>Nordstrom</u> <u>&lt;hno@squid-</u>
       <u>cache.org&gt;</u> This manual is written by <u>Henrik</u> <u>Nordstrom</u> <u>&lt;<a href="mailto:hno@squid-cache.org">hno@squid-cache.org</a>&gt;</u>

</pre><h4><b>COPYRIGHT</b></h4><pre>
        * Copyright (C) 1996-2024 The Squid Software Foundation and contributors
        *
        * Squid software is distributed under GPLv2+ license and includes
        * contributions from numerous individuals and organizations.
        * Please see the COPYING and CONTRIBUTORS files for details.

       This program and documentation is copyright to the authors named above.

       Distributed under the GNU General Public License (GNU GPL) version 2 or later (GPLv2+).

</pre><h4><b>QUESTIONS</b></h4><pre>
       Questions on  the  usage  of  this  program  can  be  sent  to  the  <u>Squid</u>  <u>Users</u>  <u>mailing</u>  <u>list</u>  &lt;squid-
       <a href="mailto:users@lists.squid-cache.org">users@lists.squid-cache.org</a>&gt;

       Or to your favorite LDAP list/friend if the question is more related to LDAP than Squid.

</pre><h4><b>REPORTING</b> <b>BUGS</b></h4><pre>
       Bug  reports  need  to  be  made  in English.  See https://wiki.squid-cache.org/SquidFaq/BugReporting for
       details of what you need to include with your bug report.

       Report bugs or bug fixes using https://bugs.squid-cache.org/

       Report serious security bugs to <u>Squid</u> <u>Bugs</u> <u>&lt;<a href="mailto:squid-bugs@lists.squid-cache.org">squid-bugs@lists.squid-cache.org</a>&gt;</u>

       Report ideas for new improvements to the <u>Squid</u> <u>Developers</u> <u>mailing</u> <u>list</u> &lt;<a href="mailto:squid-dev@lists.squid-cache.org">squid-dev@lists.squid-cache.org</a>&gt;

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man8/squid.8.html">squid</a></b>(8), <b><a href="../man1/ldapsearch.1.html">ldapsearch</a></b>(1), <b><a href="../man7/GPL.7.html">GPL</a></b>(7),
       Your favorite LDAP documentation.
       <b>RFC2254</b> - The String Representation of LDAP Search Filters,
       The Squid FAQ wiki https://wiki.squid-cache.org/SquidFaq
       The Squid Configuration Manual <a href="http://www.squid-cache.org/Doc/config/">http://www.squid-cache.org/Doc/config/</a>

                                                 14 January 2005                              <u><a href="../man8/basic_ldap_auth.8.html">basic_ldap_auth</a></u>(8)
</pre>
 </div>
</div></section>
</div>
</body>
</html>