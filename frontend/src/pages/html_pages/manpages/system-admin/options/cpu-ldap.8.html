<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>cpu - a user administration tool for LDAP backends</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/cpu">cpu_1.4.3-15_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       cpu - a user administration tool for LDAP backends

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>cpu</b> user{add,del,mod} [options] login

       <b>cpu</b> group{add,del,mod} [options] group

       <b>cpu</b> cat

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The  ldap  module  for  cpu  provides  a means for administering groups and users being stored on an LDAP
       backend. Complete compatibility with the  GNU/Linux  versions  of  the  shadow  utils  has  tried  to  be
       maintained  in  terms of command line options. This module also supports several options that traditional
       user utilities do not such as; selecting which hash to use for the  user,  generating  random  or  linear
       uid's and gid's and pulling information for a user from existing password and shadow files.

</pre><h4><b>LDAP</b> <b>OPTIONS</b></h4><pre>
       The  LDAP  options are options that are used specifically for the LDAP server.  They may be combined with
       any of the cpu functions.

       -2, --2
              Use LDAPv2 instead of LDAPv3

       -a <u>file</u>, --addfile=<u>file</u>
              If a filename is given, it will be parsed and any additional ldap  attributes  specified  in  this
              file  will be added along with the user or group. This file should not contain any attributes that
              CPU requires or that you have already specified in the configuration file.  If  you  do  this  the
              modification/addition  will  fail  or create multivalued attributes. The format of the file should
              be:

               &lt;attrdesc&gt;: &lt;attrvalue&gt;
               &lt;attrdesc&gt;: &lt;attrvalue&gt;
               &lt;attrdesc&gt;:: &lt;base64-encoded-value&gt;
               ...

       -A <u>cn</u>, --cn=<u>cn</u>
              This options specifies for a user what the dn should look like. If you specify  <b>-A</b>  foo  for  some
              user,  their  dn  will  look like foo=username,... This can be specified in the configuration file
              with USER_CN_STRING

       -B <u>base</u>, --groupbase=<u>base</u>
              This is the base to search for groups  in.  This  is  required  for  useradd  and  for  any  group
              functions.  This  should  be  a  fully  qualified  base  such  as  ou=groups,o=company,c=us.  This
              corresponds to the GROUP_BASE configuration option.

       -D <u>bind_dn</u>, --binddn=<u>bind_dn</u>
              The bind_dn should be a DN with adequate credentials for the operation that  you  are  requesting.
              This corresponds to the BIND_DN configuration file option.

       -F<u>[file]</u>, --passfile<u>[=file]</u>
              If an argument is provided, that file should be of a Unix style password format. If no argument is
              provided,  the  configuration  file  variable  PASSWORD_FILE will be used. Please be sure that the
              switch (<b>-F</b> or <b>--passfile</b>) has no trailing whitespace, it should be  immediately  followed  by  the
              argument.  The  information  associated with the user will be used for populating their LDAP entry
              (uid, gid, gecos, home directory, shell).

       -H <u>hash</u>, --hash=<u>hash</u>
              Hash should be one of sha1, md5, ssha1, smd5, crypt, md5crypt or clear. This  corresponds  to  the
              HASH configuration file variable. Select the hash that is being used at your site.

       -N <u>hostname</u>, --hostname=<u>hostname</u>
              Hostname  should  be  the  hostname that is running the LDAP service. This may be an IP address or
              hostname. This corresponds to the LDAP_HOST variable in the configuration file.

       -o, --nonposix
              Violate POSIX naming standards and allow characters in user and group names not in  the  character
              set [A-Za-z0-9._-]. This is useful for things like adding Samba machine accounts.

       -P <u>port</u>, --port=<u>port</u>
              Port  should  be  the port that the LDAP server is listening on. This corresponds to the LDAP_PORT
              option in the configuration file.

       -R <u>length</u>, --random=<u>random</u>
              <u>length</u> should be the length that you would like a randomly generated password to be. This password
              will be displayed to the user.

       -S<u>[file]</u>, --shadfile<u>[=file]</u>
              If an argument is provided, that file should be of a Unix style shadow format. If no  argument  is
              provided, the configuration file variable SHADOW_FILE will be used. Please be sure that the switch
              (<b>-S</b>  or <b>--shadfile</b>) has no trailing whitespace, it should be immediately followed by the argument.
              The information associated with the user will be used for populating their LDAP  entry  (password,
              sp_lstchg, sp_min, sp_max, sp_warn, sp_inact, sp_expire).

       -t <u>timeout</u>, --timeout=<u>timeout</u>
              This  value  is  used to specify how long (in seconds) before LDAP operations should time out. The
              corresponding configuration file is TIMEOUT.

       -U <u>base</u>, --userbase=<u>base</u>
              This is the base to search for users in. This is required for any user functions. This should be a
              fully  qualified  base  such  as  ou=users,o=company,c=us.  This  corresponds  to  the   USER_BASE
              configuration option.

       -w<u>[pass]</u>, --bindpass<u>[=pass]</u>
              If  an  argument  is  provided,  that  value will be used for the bind password. If no argument is
              provided, the user will be prompted for a password. This option can be omitted by  specifying  the
              password  in  the  configuration  file  with  the option BIND_PASS. If a value is specified at the
              command line, the switch should have no whitespace following it.

       -x, --tls
              Try to starttls before talking with the ldap server.

       The following options can be used for populating LDAP attributes.

       -f <u>name</u>, --firstname=<u>name</u>
              Name is used in possible combination with lastname in order to have a more complete CN. This value
              is also used for the givenName (gn) attribute. This value is not required by RFC2307.

       -E <u>name</u>, --lastname=<u>name</u>
              Name is used in possible combination with firstname in order to have  a  more  complete  CN.  This
              value is also used for the surname (sn) attribute. This value is not required by RFC2307.

       -e <u>address</u>, --email=<u>address</u>
              The  value  address  is  used  to  populate  the mail attribute. This attribute is not required by
              RFC2307 for posixAccount but many people's LDAP schemas do require it. inetOrgPerson is one object
              that contains it.

       The following options are not LDAP specific.

       -h, --help
              Display help.

       -v, --verbose
              Turn the verbose level up.

       -V, --version
              Display the version of the module.

</pre><h4><b>cpu</b> <b>cat</b></h4><pre>
       The <b>cat</b> command will cause any users and groups stored in the LDAP directory to be displayed  in  a  Unix
       style format. <b>cat</b> requires no options.

</pre><h4><b>cpu</b> <b>useradd</b> <b>[options]</b> <b>login</b></h4><pre>
       The <b>useradd</b> function is used to add new users to an LDAP directory. The options are similar to those used
       by traditional GNU/Linux user administration utilities.

       -c <u>comment</u>, --gecos=<u>comment</u>
              The  value  specified  is used to populate the gecos attribute. You can specify a default value in
              the configuration file using the GECOS variable. This is not required by RFC2307. This can also be
              populated using the -F option (see above).

       -d <u>home_dir</u>, --directory=<u>home_dir</u>
              The new user will be created using <u>home_dir</u> as the value  for  the  user's  login  directory.  The
              default  is  to  append  <u>login</u> to HOME_DIRECTORY (from the configuration file) and use that as the
              login directory name. This is required by RFC2307.

       -g <u>initial_group</u>, --gid=<u>initial_group</u>
              The group id or name of the user's initial login group. The group should exist but does  not  have
              to.  CPU  will  search  the LDAP directory and warn you if that group does not exist. If the group
              does exist, the users gidNumber will be set to the gidNumber of that group. This  is  required  by
              RFC2307.  If unspecified CPU will search for the next unused GID. This behavior can be adjusted by
              MAX_GIDNUMBER, MIN_GIDNUMBER, ID_MAX_PASSES, and RANDOM in the configuration file.

       -G <u>group,[...]</u> --sgroup=<u>group,[...]</u>
              A list of supplementary groups which the user is also a member of. Each group  is  separated  from
              the  next  by  a  comma,  with  no intervening whitespace. CPU will search the directory for these
              groups, and if found, add the user to those groups. The default is for the user to belong only  to
              the initial group.

       -k<u>[skeleton_dir]</u> --skel<u>[=skeleton_dir]</u>
              This  option  is  only  useful  is specified along with the <b>-m</b> option.  If both are specified, the
              contents of <u>skeleton_dir</u> will be copied to the  users  new  home  directory.  If  <u>skeleton_dir</u>  is
              specified  it  should  have  no whitespace between the command line switch. If <u>skeleton_dir</u> is not
              specified, the value of SKEL_DIR as specified in the configuration file will be used.

       -m, --makehome
              The user's home directory  will  be  created  if  it  does  not  exist.  The  files  contained  in
              <u>skeleton_dir</u>  will be copied to the home directory if the <b>-k</b> option is used. The <b>-k</b> option is only
              valid in conjunction with the <b>-m</b> options. The default is to not create the directory  and  to  not
              copy any files.

       -p<u>[passwd]</u> --password<u>[=password]</u>
              The  encrypted  or  unencrypted password. If no argument is given, the user is prompted to enter a
              password. If CPU was compiled with libcrack, the password will be checked  for  weakness.  If  the
              password  is  encrypted, hash should be the value of the hash type that was used. If not specified
              at the command line or found in the shadow file (if <b>-S</b> was used) * is used which should  lock  the
              account.

       -s <u>shell</u>, --shell=<u>shell</u>
              The  name  of the user's login shell. If not specified at the command line one can specify it with
              the DEFAULT_SHELL configuration file option. This is not required by RFC2307.

       -u <u>uid</u>, --uid=<u>uid</u>
              The numerical value of the user's ID. This value must be unique, the value must  be  non-negative.
              If  unspecified CPU will search for an unused UID. This behavior can be adjusted by MAX_UIDNUMBER,
              MIN_UIDNUMBER, ID_MAX_PASSES, and RANDOM in the configuration file.

       -X <u>script</u>, --exec=<u>script</u>
              After the user has successfully been added to the directory, execute this script.  The  script  is
              passed  the login name. If this option is not supplied, the configuration file will be checked for
              ADD_SCRIPT.

</pre><h4><b>cpu</b> <b>usermod</b> <b>[options]</b> <b>login</b></h4><pre>
       All options that apply to <b>useradd</b> also apply to <b>usermod</b> except for <b>-k</b>.

       -l <u>login_name</u>, --newusername=<u>login_name</u>
              The name of the user will be changed from <u>login</u> to <u>login_name</u>. The LDAP attributes cn and uid  are
              changed  to  <u>login_name</u>,  the  users rdn is also modified. If specified in conjunction with the <b>-m</b>
              switch, the users old home directory will be copied the  the  appropriate  new  location  (see  <b>-d</b>
              switch for behavior).

       -L, --lock
              Lock the given user account

       -U, --unlock
              Unlock the given user account

</pre><h4><b>cpu</b> <b>userdel</b> <b>[options]</b> <b>login</b></h4><pre>
       The <b>userdel</b> command modifies the LDAP directory, deleting all entries that refer to <u>login</u>. The named user
       must exist. The options which apply to the <b>userdel</b> command are:

       -r, --removehome
              Files in the user's home directory will be removed along with the home directory itself. The users
              mail  spool  is  not deleted. Files located in other file systems will have to be searched for and
              deleted manually.

       -X <u>script</u>, --exec=<u>script</u>
              After the user has successfully been removed from the directory, execute this script.  The  script
              is  passed  the login name. If this option is not supplied, the configuration file will be checked
              for DEL_SCRIPT.

</pre><h4><b>cpu</b> <b>groupadd</b> <b>[options]</b> <b>group</b></h4><pre>
       The <b>groupadd</b> command creates a new group account using the values specified on the command line  and  the
       default  values  from  the  configuration  file. The new group will be entered into the LDAP directory as
       needed. The options which apply to the <b>groupadd</b> command are

       -g <u>gid</u>, --gid=<u>gid</u>
              The numerical value of the group's ID. This value  should  be  unique.  The  value  must  be  non-
              negative.  A  new  gid  can  be  generated  by  not specifying this option. This generation can be
              modified by changing the configuration file.

</pre><h4><b>cpu</b> <b>groupmod</b> <b>[options]</b> <b>group</b></h4><pre>
       The <b>groupmod</b> command modifies the <u>group</u> specified at the command line. The options  which  apply  to  the
       <b>groupmod</b> command are

       -g <u>gid</u>, --gid=<u>gid</u>
              The  numerical  value  of  the  group's  ID.  This  value should be unique. The value must be non-
              negative.

       -n <u>group_name</u>, --newgroupname=<u>group_name</u>
              The name of the group will be changed from <u>group</u> to <u>group_name</u>.  The  cn  and  rdn  will  also  be
              modified.

</pre><h4><b>cpu</b> <b>groupdel</b> <b>[options]</b> <b>group</b></h4><pre>
       The <b>groupdel</b> command removes the <u>group</u> specified at the command line from the LDAP directory.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man5/cpu.conf.5.html">cpu.conf</a>(5)</b> <b><a href="../man8/cpu.8.html">cpu</a>(8)</b>

</pre><h4><b>AUTHORS</b></h4><pre>
       Blake Matheny &lt;<a href="mailto:bmatheny@purdue.edu">bmatheny@purdue.edu</a>&gt;

       The current version of this software is always available at <u><a href="http://cpu.sourceforge.net">http://cpu.sourceforge.net</a></u>

</pre><h4><b>BUGS</b></h4><pre>
       To report a bug or problem, please e-mail:

       <a href="mailto:cpu-users@lists.sourceforge.net">cpu-users@lists.sourceforge.net</a>

</pre><h4><b>TODO</b></h4><pre>
       See TODO file that accompanied software. Please e-mail us with any additional suggestions.

                                                17 February 2003                                     <u><a href="../man8/CPU-LDAP.8.html">CPU-LDAP</a></u>(8)
</pre>
 </div>
</div></section>
</div>
</body>
</html>