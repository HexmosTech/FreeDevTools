<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>drbdadm - Utility for DRBD administration</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/drbd-utils">drbd-utils_9.22.0-1.1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       drbdadm - Utility for DRBD administration

</pre><h4><b>SYNOPSIS</b></h4><pre>

       <b>drbdadm</b> [options...] [-- [<u>backend-options</u>...]] {<u>command</u>} {<u>context</u>...}

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The <b>drbdadm</b> utility is used for managing DRBD based on its configuration files, see <b><a href="../man5/drbd.conf.5.html">drbd.conf</a></b>(5). It
       translates high-level commands into one or more lower-level commands for the <b>drbdsetup</b> and <b>drbdmeta</b>
       utilities, which control the kernel module and manipulate the on-disk metadata.

       Depending on the command, the <b>drbdadm</b> utility operates on one or more resources, devices, connections, or
       peer devices. The following command contexts are defined:

       <u>resource</u>
           A resource specified by name, or the keyword <b>all</b> for all defined resources.

       <u>device</u>
           A device, specified by minor number (<b>minor-</b><u>minornumber</u>, e.g.  <b>minor-</b><u>0</u>) or by resource and volume
           number (<u>resource</u>/<u>volume</u>). If only a <u>resource</u> is specified, the command iterates over all devices of
           that resource.

       <u>connection</u>
           A connection, specified by resource and connection name (<u>resource</u>:<u>connection-name</u>). If only a
           <u>resource</u> is specified, the command iterates over all connections of that resource.

       <u>peer_device</u>
           A peer device, specified by resource, connection name, and volume number
           (<u>resource</u>:<u>connection-name</u>/<u>volume</u>). If only a <u>resource</u>, <u>device</u>, or <u>connection</u> is specified, the
           command iterates over all peer devices of that resource, device, or connection.

       All options following a double-dash are passed through to the lower-level utilities as specified. In
       addition, <b>drbdadm</b> understands most of the options of <b>drbdsetup</b>, and will pass them through even without
       the double-dash.

</pre><h4><b>OPTIONS</b></h4><pre>
       <b>-d</b>, <b>--dry-run</b>
           Show which commands <b>drbdadm</b> would execute instead of actually executing them (for example, <b>drbdadm</b> <b>-d</b>
           <b>up</b> <u>resource</u>). This can be a useful way to learn how <b>drbdsetup</b> and <b>drbdmeta</b> are used.

       <b>-c</b>, <b>--config-file</b> <u>file</u>
           Use an alternative configuration file. By default, <b>drbdadm</b> will use the the first of the following
           files that exists: <b>/etc/drbd-90.conf</b>, <b>/etc/drbd-84.conf</b>, <b>/etc/drbd-83.conf</b>, <b>/etc/drbd-82.conf</b>,
           <b>/etc/drbd-08.conf</b>, <b>/etc/drbd.conf</b>.

       <b>-t</b>, <b>--config-to-test</b> <u>file</u>
           Check an additional configuration file. This option is only allowed with the dump and the sh-nop
           commands.

       <b>-s</b>, <b>--drbdsetup</b> <u>file</u>
           Specifies the full path to the <b>drbdsetup</b> program. If this option is omitted, drbdadm will look for it
           beneath itself first, and then in the PATH.

       <b>-m</b>, <b>--drbdmeta</b> <u>file</u>
           Specifies the full path to the <b>drbdmeta</b> program. If this option is omitted, drbdadm will look for it
           beneath itself first, and then in the PATH.

       <b>-S</b>, <b>--stacked</b>
           Perform the command on a stacked resource.

</pre><h4><b>COMMANDS</b></h4><pre>
       adjust {<u>resource</u>}

           Adjust the configuration of the kernel module so that it matches the configuration files. The result
           should be the same as when stopping and restarting all resources (<b>drbdadm</b> <b>down</b> <b>all</b> followed by
           <b>drbdadm</b> <b>up</b> <b>all</b>), but without the interruptions.

           Note that the adjust command can misinterpret the configuration change in some cases. To be safe,
           check what the command would do (with the <b>--dry-run</b> option) before running the actual command.

       adjust-with-progress {<u>resource</u>}

           The same as <b>adjust</b>, but with some more information about the command's progress.

       apply-al {<u>device</u>}

           Apply the activity log of the specified device. See <b><a href="../man8/drbdmeta.8.html">drbdmeta</a></b>(8) for details.

       attach {<u>device</u>}
           Attach a lower-level device to an existing replicated device. See <b><a href="../man8/drbdsetup.8.html">drbdsetup</a></b>(8) for details.

       check-resize {<u>device</u>}

           Call drbdmeta to eventually move internal meta data. If the backing device was resized, while DRBD
           was not running, meta data has to be moved to the end of the device, so that the next <b>attach</b> command
           can succeed.

       connect {<u>connection</u>}

           Activate an exisiting connection to a peer. The connection needs to be created first with the
           <b>new-peer</b> command, and have at least one path created with the <b>new-path</b> command. See <b><a href="../man8/drbdsetup.8.html">drbdsetup</a></b>(8) for
           details.

       create-md {<u>device</u>}

           Initialize the metadata of a device. This is necessary before a device can be attached; see
           <b><a href="../man8/drbdmeta.8.html">drbdmeta</a></b>(8) for details.

       cstate {<u>connection</u>}

           Show the current state of a connection. See <b><a href="../man8/drbdsetup.8.html">drbdsetup</a></b>(8) for details.

       detach {<u>device</u>}

           Detach the lower-level device of a replicated device. See <b><a href="../man8/drbdsetup.8.html">drbdsetup</a></b>(8) for details.

       disconnect {<u>connection</u>}

           Remove a connection to a peer host. See <b><a href="../man8/drbdsetup.8.html">drbdsetup</a></b>(8) for details.

       disk-options {<u>device</u>}

           Change the disk options of an attached lower-level device. See <b><a href="../man8/drbdsetup.8.html">drbdsetup</a></b>(8) for details.

       down {<u>resource</u>}

           Take a resource down by removing all volumes, connections, and the resource itself. See <b><a href="../man8/drbdsetup.8.html">drbdsetup</a></b>(8)
           for details.

       dstate {<u>device</u>}

           Show the current disk state of a lower-level device. See <b><a href="../man8/drbdsetup.8.html">drbdsetup</a></b>(8) for details.

       dump {<u>resource</u>}

           Parse the configuration file and dump it to stdout. This will fail if the configuration file is
           syntactically incorrect.

       dump-md {<u>device</u>}

           Dump the metadata of a device in text form, including the bitmap and activity log. See <b><a href="../man8/drbdmeta.8.html">drbdmeta</a></b>(8)
           for details.

       get-gi {<u>peer_device</u>}

           Show the data generation identifiers for a device on a particular connection. Uses <b>drbdsetup</b> for
           attached devices and <b>drbdmeta</b> for unattached devices. See <b><a href="../man8/drbdsetup.8.html">drbdsetup</a></b>(8) for details.

       hidden-commands
           Shows all commands which are not explicitly documented.

       invalidate {<u>peer_device</u>}

           Replace the local data of a device with that of a peer. See <b><a href="../man8/drbdsetup.8.html">drbdsetup</a></b>(8) for details.

       invalidate-remote {<u>peer_device</u>}

           Replace a peer device's data of a resource with the local data. See <b><a href="../man8/drbdsetup.8.html">drbdsetup</a></b>(8) for details.

       net-options {<u>connection</u>}

           Change the network options of an existing connection. See <b><a href="../man8/drbdsetup.8.html">drbdsetup</a></b>(8) for details.

       new-current-uuid {<u>device</u>}

           Generate a new currend UUID. See <b><a href="../man8/drbdsetup.8.html">drbdsetup</a></b>(8) for details.

       outdate {<u>device</u>}

           Mark the data on a lower-level device as outdated. See <b><a href="../man8/drbdsetup.8.html">drbdsetup</a></b>(8) for details.

       pause-sync {<u>peer_device</u>}

           Stop resynchronizing between a local and a peer device by setting the local pause flag. See
           <b><a href="../man8/drbdsetup.8.html">drbdsetup</a></b>(8) for details.

       primary {<u>resource</u>}

           Change the role of a node in a resource to primary. See <b><a href="../man8/drbdsetup.8.html">drbdsetup</a></b>(8) for details.

       resize {<u>device</u>}

           Resize the lower-level devices of a replicated device on all nodes. This combines the <b>check-resize</b>
           and <b>resize</b> lower-level commands; see <b><a href="../man8/drbdsetup.8.html">drbdsetup</a></b>(8) for details.

       resource-options {<u>resource</u>}

           Change the resource options of an existing resource. See <b><a href="../man8/drbdsetup.8.html">drbdsetup</a></b>(8) for details.

       resume-sync {<u>peer_device</u>}

           Allow resynchronization to resume by clearing the local sync pause flag. See <b><a href="../man8/drbdsetup.8.html">drbdsetup</a></b>(8) for
           details.

       role {<u>resource</u>}

           Show the current role of a resource.

       secondary {<u>resource</u>}

           Change the role of a node in a resource to secondary. This command fails if the replicated device is
           in use.

       show-gi {<u>peer_device</u>}

           Show the data generation identifiers for a device on a particular connection. In addition, explain
           the output. See <b><a href="../man8/drbdsetup.8.html">drbdsetup</a></b>(8) for details.

       state {<u>resource</u>}

           This is an alias for <b>drbdsetup</b> <b>role</b>. Deprecated.

       up {<u>resource</u>}

           Bring up a resource by applying the activity log of all volumes, creating the resource, creating the
           replicated devices, attaching the lower-level devices, and connecting to all peers. See the <b>apply-al</b>
           drbdmeta command and the <b>new-resource</b>, <b>new-device</b>, <b>new-minor</b>, <b>attach</b>, and <b>connect</b> drbdsetup commands.

       verify {<u>peer_device</u>}

           Start online verification, change which part of the device will be verified, or stop online
           verification. See <b><a href="../man8/drbdsetup.8.html">drbdsetup</a></b>(8) for details.

       wait-connect {[<u>device</u>] | [<u>connection</u>] | [<u>resource</u>]}

           Wait until a device on a peer, all devices over a connection, or all devices on all peers are
           visible. See <b><a href="../man8/drbdsetup.8.html">drbdsetup</a></b>(8) for details.

       wait-sync {[<u>device</u>] | [<u>connection</u>] | [<u>resource</u>]}

           Wait until a device is connected and has finished eventual resync operation. Also available on
           connection and resource level. See <b><a href="../man8/drbdsetup.8.html">drbdsetup</a></b>(8) for details.

       wipe-md {<u>device</u>}

           Wipe out the DRBD metadata of a device. See <b><a href="../man8/drbdmeta.8.html">drbdmeta</a></b>(8) for details.

       forget-peer {<u>connection</u>}

           Completely remove any reference to a unconnected peer from meta-data. See <b><a href="../man8/drbdmeta.8.html">drbdmeta</a></b>(8) for details.

</pre><h4><b>VERSION</b></h4><pre>
       This document was revised for version 9.0.0 of the DRBD distribution.

</pre><h4><b>AUTHOR</b></h4><pre>
       Written by Philipp Reisner &lt;<a href="mailto:philipp.reisner@linbit.com">philipp.reisner@linbit.com</a>&gt; and Lars Ellenberg &lt;<a href="mailto:lars.ellenberg@linbit.com">lars.ellenberg@linbit.com</a>&gt;

</pre><h4><b>REPORTING</b> <b>BUGS</b></h4><pre>
       Report bugs to &lt;<a href="mailto:drbd-user@lists.linbit.com">drbd-user@lists.linbit.com</a>&gt;.

</pre><h4><b>COPYRIGHT</b></h4><pre>
       Copyright 2001-2018 LINBIT Information Technologies, Philipp Reisner, Lars Ellenberg. This is free
       software; see the source for copying conditions. There is NO warranty; not even for MERCHANTABILITY or
       FITNESS FOR A PARTICULAR PURPOSE.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man5/drbd.conf.5.html">drbd.conf</a></b>(5), <b><a href="../man8/drbd.8.html">drbd</a></b>(8), <b><a href="../man8/drbdsetup.8.html">drbdsetup</a></b>(8), <b><a href="../man8/drbdmeta.8.html">drbdmeta</a></b>(8) and the <b>DRBD</b> <b>project</b> <b>web</b> <b>site</b>[1]

</pre><h4><b>NOTES</b></h4><pre>
        1. DRBD project web site
           <a href="http://www.drbd.org/">http://www.drbd.org/</a>

DRBD 9.0.x                                       17 January 2018                                      <u><a href="../man8/DRBDADM.8.html">DRBDADM</a></u>(8)
</pre>
 </div>
</div></section>
</div>
</body>
</html>