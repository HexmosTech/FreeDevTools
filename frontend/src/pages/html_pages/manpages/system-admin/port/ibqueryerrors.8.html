<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IBQUERYERRORS - query and report IB port counters</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/infiniband-diags">infiniband-diags_56.1-1ubuntu1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       IBQUERYERRORS - query and report IB port counters

</pre><h4><b>SYNOPSIS</b></h4><pre>
       ibqueryerrors [options]

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The  default  behavior is to report the port error counters which exceed a threshold for each port in the
       fabric.  The default threshold is zero (0).  Error fields can also be suppressed entirely.

       In addition to reporting errors on every port.  ibqueryerrors can report the port  transmit  and  receive
       data as well as report full link information to the remote port if available.

</pre><h4><b>OPTIONS</b></h4><pre>
       <b>-s,</b> <b>--suppress</b> <b>&lt;err1,err2,...&gt;</b> Suppress the errors listed in the comma separated list provided.

       <b>-c,</b>  <b>--suppress-common</b> Suppress some of the common "side effect" counters.  These counters usually do not
       indicate an error condition and can be usually be safely ignored.

       <b>-r,</b> <b>--report-port</b> Report the port information.  This includes LID, port, external port  (if  applicable),
       link  speed  setting,  remote  GUID,  remote  port, remote external port (if applicable), and remote node
       description information.

       <b>--data</b> Include the optional transmit and receive data counters.

       <b>--threshold-file</b>   <b>&lt;filename&gt;</b>   Specify    an    alternate    threshold    file.     The    default    is
       /etc/infiniband-diags/error_thresholds

       <b>--switch</b>  print data for switch's only

       <b>--ca</b>  print data for CA's only

       <b>--skip-sl</b>   Use the default sl for queries. This is not recommended when using a QoS aware routing engine
       as it can cause a credit deadlock.

       <b>--router</b>  print data for routers only

       <b>--clear-errors</b> <b>-k</b> Clear error counters after read.

       <b>--clear-counts</b> <b>-K</b> Clear data counters after read.

       <b>CAUTION</b> clearing data or error counters will occur regardless  of  if  they  are  printed  or  not.   See
       <b>--counters</b> and <b>--data</b> for details on controlling which counters are printed.

       <b>--details</b> include receive error and transmit discard details

       <b>--counters</b> print data counters only

   <b>Partial</b> <b>Scan</b> <b>flags</b>
       The node to start a partial scan can be specified with the following addresses.

       <b>--port-guid,</b> <b>-G</b> <b>&lt;port_guid&gt;</b>  Specify a port_guid

       <b>-D,</b> <b>--Direct</b> <b>&lt;dr_path&gt;</b>     The address specified is a directed route

          Examples:
             -D "0"          # self port
             -D "0,1,2,1,4"  # out via port 1, then 2, ...

             (Note the second number in the path specified must match the port being
             used.  This can be specified using the port selection flag '-P' or the
             port found through the automatic selection process.)

       <b>Note:</b> For switches results are printed for all ports not just switch port 0.

       <b>-S</b> <b>&lt;port_guid&gt;</b> same as "-G". (provided only for backward compatibility)

   <b>Cache</b> <b>File</b> <b>flags</b>
       <b>--load-cache</b> <b>&lt;filename&gt;</b> Load and use the cached ibnetdiscover data stored in the specified filename.  May
       be useful for outputting and learning about other fabrics or a previous state of a fabric.

   <b>Port</b> <b>Selection</b> <b>flags</b>
       <b>-C,</b> <b>--Ca</b> <b>&lt;ca_name&gt;</b>    use the specified ca_name.

       <b>-P,</b> <b>--Port</b> <b>&lt;ca_port&gt;</b>    use the specified ca_port.

   <b>Local</b> <b>port</b> <b>Selection</b>
       Multiple  port/Multiple  CA  support:  when  no  IB  device  or  port  is  specified (see the "local umad
       parameters" below), the libibumad library selects the port to use by the following criteria:

          1. the first port that is ACTIVE.

          2. if not found, the first port that is UP (physical link up).

          If a port and/or CA name is specified, the libibumad library attempts to fulfill the user request, and
          will fail if it is not possible.

          For example:

              ibaddr                 # use the first port (criteria #1 above)
              ibaddr -C mthca1       # pick the best port from "mthca1" only.
              ibaddr -P 2            # use the second (active/up) port from the first available IB device.
              ibaddr -C mthca0 -P 2  # use the specified port only.

   <b>Configuration</b> <b>flags</b>
       <b>--config,</b> <b>-z</b>  <b>&lt;config_file&gt;</b> Specify alternate config file.
          Default: /etc/infiniband-diags/ibdiag.conf

       <b>--outstanding_smps,</b> <b>-o</b> <b>&lt;val&gt;</b>
              Specify the number of outstanding SMP's which should be issued during the scan

              Default: 2

       <b>--node-name-map</b> <b>&lt;node-name-map&gt;</b> Specify a node name map.
          This file maps GUIDs to more user friendly names.  See FILES section.

       <b>-t,</b> <b>--timeout</b> <b>&lt;timeout_ms&gt;</b> override the default timeout for the solicited mads.

       <b>-y,</b> <b>--m_key</b> <b>&lt;key&gt;</b>
              use the specified M_key for requests. If non-numeric value (like 'x') is specified  then  a  value
              will be prompted for.

   <b>Debugging</b> <b>flags</b>
       <b>-d</b>     raise the IB debugging level.  May be used several times (-ddd or -d -d -d).

       <b>-e</b>     show send and receive errors (timeouts and others)

       <b>-h,</b> <b>--help</b>      show the usage message

       <b>-v,</b> <b>--verbose</b>
              increase the application verbosity level.  May be used several times (-vv or -v -v -v)

       <b>-V,</b> <b>--version</b>     show the version info.

       <b>-R</b>  (This option is obsolete and does nothing)

</pre><h4><b>EXIT</b> <b>STATUS</b></h4><pre>
       <b>-1</b> if scan fails.

       <b>0</b> if scan succeeds without errors beyond thresholds

       <b>1</b> if errors are found beyond thresholds or inconsistencies are found in check mode.

</pre><h4><b>FILES</b></h4><pre>
   <b>ERROR</b> <b>THRESHOLD</b>
       /etc/infiniband-diags/error_thresholds

       Define threshold values for errors.  File format is simple "name=val".  Comments begin with '#'

       <b>Example:</b>

          # Define thresholds for error counters
          SymbolErrorCounter=10
          LinkErrorRecoveryCounter=10
          VL15Dropped=100

   <b>CONFIG</b> <b>FILE</b>
       /etc/infiniband-diags/ibdiag.conf

       A  global  config  file is provided to set some of the common options for all tools.  See supplied config
       file for details.

   <b>NODE</b> <b>NAME</b> <b>MAP</b> <b>FILE</b> <b>FORMAT</b>
       The node name map is used to specify user friendly names for nodes in the  output.   GUIDs  are  used  to
       perform the lookup.

       This  functionality is provided by the opensm-libs package.  See <b><a href="../man8/opensm.8.html">opensm</a>(8)</b> for the file location for your
       installation.

       <b>Generically:</b>

          # comment
          &lt;guid&gt; "&lt;name&gt;"

       <b>Example:</b>

          # IB1
          # Line cards
          0x0008f104003f125c "IB1 (Rack 11 slot 1   ) ISR9288/ISR9096 Voltaire sLB-24D"
          0x0008f104003f125d "IB1 (Rack 11 slot 1   ) ISR9288/ISR9096 Voltaire sLB-24D"
          0x0008f104003f10d2 "IB1 (Rack 11 slot 2   ) ISR9288/ISR9096 Voltaire sLB-24D"
          0x0008f104003f10d3 "IB1 (Rack 11 slot 2   ) ISR9288/ISR9096 Voltaire sLB-24D"
          0x0008f104003f10bf "IB1 (Rack 11 slot 12  ) ISR9288/ISR9096 Voltaire sLB-24D"

          # Spines
          0x0008f10400400e2d "IB1 (Rack 11 spine 1   ) ISR9288 Voltaire sFB-12D"
          0x0008f10400400e2e "IB1 (Rack 11 spine 1   ) ISR9288 Voltaire sFB-12D"
          0x0008f10400400e2f "IB1 (Rack 11 spine 1   ) ISR9288 Voltaire sFB-12D"
          0x0008f10400400e31 "IB1 (Rack 11 spine 2   ) ISR9288 Voltaire sFB-12D"
          0x0008f10400400e32 "IB1 (Rack 11 spine 2   ) ISR9288 Voltaire sFB-12D"

          # GUID   Node Name
          0x0008f10400411a08 "SW1  (Rack  3) ISR9024 Voltaire 9024D"
          0x0008f10400411a28 "SW2  (Rack  3) ISR9024 Voltaire 9024D"
          0x0008f10400411a34 "SW3  (Rack  3) ISR9024 Voltaire 9024D"
          0x0008f104004119d0 "SW4  (Rack  3) ISR9024 Voltaire 9024D"

</pre><h4><b>AUTHOR</b></h4><pre>
       <b>Ira</b> <b>Weiny</b>
              &lt;  &lt;<a href="mailto:ira.weiny@intel.com">ira.weiny@intel.com</a>&gt;  &gt;

                                                   2016-09-26                                   <u><a href="../man8/IBQUERYERRORS.8.html">IBQUERYERRORS</a></u>(8)
</pre>
 </div>
</div></section>
</div>
</body>
</html>