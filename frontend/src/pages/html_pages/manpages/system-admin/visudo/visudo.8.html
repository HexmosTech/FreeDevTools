<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>visudo — edit the sudoers file</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/sudo-ldap">sudo-ldap_1.9.16p2-1ubuntu1.1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       visudo — edit the sudoers file

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>visudo</b> [<b>-chIOPqsV</b>] [[<b>-f</b>] <u>sudoers</u>]

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>visudo</b>  edits  the  <u>sudoers</u>  file in a safe fashion, analogous to <u><a href="../man8/vipw.8.html">vipw</a></u>(8).  <b>visudo</b> locks the <u>sudoers</u> file
       against multiple simultaneous edits, performs basic validity checks, and checks for syntax errors  before
       installing  the edited file.  If the <u>sudoers</u> file is currently being edited you will receive a message to
       try again later.

       If the <u>sudoers</u> file does not exist, it will be created unless the editor exits  without  writing  to  the
       file.

       <b>visudo</b>  parses  the  <u>sudoers</u> file after editing and will not save the changes if there is a syntax error.
       Upon finding an error, <b>visudo</b> will print a message stating the line number(s) where  the  error  occurred
       and  the  user  will receive the “What now?” prompt.  At this point the user may enter ‘e’ to re-edit the
       <u>sudoers</u> file, ‘x’ to exit without saving the changes, or ‘Q’ to quit and save changes.   The  ‘Q’  option
       should  be used with extreme caution because if <b>visudo</b> believes there to be a syntax error, so will <b>sudo</b>.
       If ‘e’ is typed to edit the <u>sudoers</u> file after a syntax error has  been  detected,  the  cursor  will  be
       placed on the line where the error occurred (if the editor supports this feature).

       There are two <u>sudoers</u> settings that determine which editor <b>visudo</b> will run.

       editor      A  colon  (‘:’) separated list of editors allowed to be used with <b>visudo</b>.  <b>visudo</b> will choose
                   the editor that matches the user's SUDO_EDITOR, VISUAL, or  EDITOR  environment  variable  if
                   possible,  or  the  first  editor  in  the list that exists and is executable.  <b>sudo</b> does not
                   preserve the SUDO_EDITOR, VISUAL, or EDITOR environment variables unless they are present  in
                   the  <u>env_keep</u>  list  or  the  <u>env_reset</u>  option is disabled in the <u>sudoers</u> file.  The default
                   editor path is <u><a href="file:///usr/lib/w3m/cgi-bin/w3mman2html.cgi?editor">/usr/bin/editor</a></u> which can  be  set  at  compile  time  via  the  <b>--with-editor</b>
                   configure option.

       env_editor  If set, <b>visudo</b> will use the value of the SUDO_EDITOR, VISUAL, or EDITOR environment variables
                   before  falling  back  on  the  default editor list.  <b>visudo</b> is typically run as root so this
                   option may allow a user with <b>visudo</b> privileges to run  arbitrary  commands  as  root  without
                   logging.   An  alternative is to place a colon-separated list of “safe” editors in the <u>editor</u>
                   variable.  <b>visudo</b> will then only use SUDO_EDITOR, VISUAL, or EDITOR if  they  match  a  value
                   specified  in  <u>editor</u>.   If  the  <u>env_reset</u>  flag is enabled, the SUDO_EDITOR, VISUAL, and/or
                   EDITOR environment variables must be present in the <u>env_keep</u> list for the <u>env_editor</u> flag  to
                   function  when  <b>visudo</b>  is  invoked  via  <b>sudo</b>.  The default value is <u>on</u>, which can be set at
                   compile time via the <b>--with-env-editor</b> configure option.

       The options are as follows:

       <b>-c</b>, <b>--check</b>
               Enable <u>check-only</u> mode.  The existing <u>sudoers</u> file (and any other  files  it  includes)  will  be
               checked  for  syntax errors.  If the path to the <u>sudoers</u> file was not specified, <b>visudo</b> will also
               check the file ownership and permissions (see the <b>-O</b> and <b>-P</b> options).  A message will be  printed
               to  the  standard output describing the status of <u>sudoers</u> unless the <b>-q</b> option was specified.  If
               the check completes successfully,  <b>visudo</b>  will  exit  with  a  value  of  0.   If  an  error  is
               encountered, <b>visudo</b> will exit with a value of 1.

       <b>-f</b> <u>sudoers</u>, <b>--file</b>=<u>sudoers</u>
               Specify  an  alternate  <u>sudoers</u> file location, see below.  As of version 1.8.27, the <u>sudoers</u> path
               can be specified without using the <b>-f</b> option.

       <b>-h</b>, <b>--help</b>
               Display a short help message to the standard output and exit.

       <b>-I</b>, <b>--no-includes</b>
               Disable the editing of include files unless there is a pre-existing syntax  error.   By  default,
               <b>visudo</b>  will  edit  the  main  <u>sudoers</u>  file  and  any  files  included  via <u>@include</u> or <u>#include</u>
               directives.  Files included via <u>@includedir</u> or <u>#includedir</u> are never edited unless they contain a
               syntax error.

       <b>-O</b>, <b>--owner</b>
               Enforce the default ownership (user and group) of the <u>sudoers</u> file.  In edit mode, the  owner  of
               the edited file will be set to the default.  In check mode (<b>-c</b>), an error will be reported if the
               owner is incorrect.  This option is enabled by default if the <u>sudoers</u> file was not specified.

       <b>-P</b>, <b>--perms</b>
               Enforce the default permissions (mode) of the <u>sudoers</u> file.  In edit mode, the permissions of the
               edited  file  will  be  set to the default.  In check mode (<b>-c</b>), an error will be reported if the
               file permissions are incorrect.  This option is enabled by default if the <u>sudoers</u>  file  was  not
               specified.

       <b>-q</b>, <b>--quiet</b>
               Enable  <u>quiet</u>  mode.   In  this mode details about syntax errors are not printed.  This option is
               only useful when combined with the <b>-c</b> option.

       <b>-s</b>, <b>--strict</b>
               Enable <u>strict</u> checking of the <u>sudoers</u> file.  If an alias is referenced but not  actually  defined
               or if there is a cycle in an alias, <b>visudo</b> will consider this a syntax error.  It is not possible
               to  differentiate between an alias and a host name or user name that consists solely of uppercase
               letters, digits, and the underscore (‘_’) character.

       <b>-V</b>, <b>--version</b>
               Print the <b>visudo</b> and <u>sudoers</u> grammar versions and exit.

       A <u>sudoers</u> file may be specified instead of the default, <u><a href="file:/etc/sudoers">/etc/sudoers</a></u>.  The temporary  file  used  is  the
       specified  <u>sudoers</u> file with “.tmp” appended to it.  In <u>check-only</u> mode only, ‘-’ may be used to indicate
       that <u>sudoers</u> will be read from the standard input.  Because the policy is evaluated in its  entirety,  it
       is not sufficient to check an individual <u>sudoers</u> include file for syntax errors.

   <b>Debugging</b> <b>and</b> <b>sudoers</b> <b>plugin</b> <b>arguments</b>
       <b>visudo</b>  versions  1.8.4  and  higher  support a flexible debugging framework that is configured via <u>Debug</u>
       lines in the <u><a href="../man5/sudo.conf.5.html">sudo.conf</a></u>(5) file.

       Starting with <b>sudo</b> 1.8.12, <b>visudo</b> will also parse the arguments to the <u>sudoers</u>  plugin  to  override  the
       default  <u>sudoers</u>  path  name,  user-ID,  group-ID, and file mode.  These arguments, if present, should be
       listed after the path to the plugin (i.e., after  <u>sudoers.so</u>).   Multiple  arguments  may  be  specified,
       separated by white space.  For example:

           Plugin sudoers_policy sudoers.so sudoers_mode=0400

       The following arguments are supported:

       sudoers_file=pathname
             The <u>sudoers_file</u> argument can be used to override the default path to the <u>sudoers</u> file.

       sudoers_uid=user-ID
             The  <u>sudoers_uid</u> argument can be used to override the default owner of the sudoers file.  It should
             be specified as a numeric user-ID.

       sudoers_gid=group-ID
             The <u>sudoers_gid</u> argument can be used to override the default group of the sudoers file.  It must be
             specified as a numeric group-ID (not a group name).

       sudoers_mode=mode
             The <u>sudoers_mode</u> argument can be used to override the default file mode for the sudoers  file.   It
             should be specified as an octal value.

       For more information on configuring <u><a href="../man5/sudo.conf.5.html">sudo.conf</a></u>(5), refer to its manual.

</pre><h4><b>ENVIRONMENT</b></h4><pre>
       The  following environment variables may be consulted depending on the value of the <u>editor</u> and <u>env_editor</u>
       <u>sudoers</u> settings:

       SUDO_EDITOR      Invoked by <b>visudo</b> as the editor to use

       VISUAL           Used by <b>visudo</b> if SUDO_EDITOR is not set

       EDITOR           Used by <b>visudo</b> if neither SUDO_EDITOR nor VISUAL is set

</pre><h4><b>FILES</b></h4><pre>
       <u><a href="file:/etc/sudo.conf">/etc/sudo.conf</a></u>            Sudo front-end configuration

       <u><a href="file:/etc/sudoers">/etc/sudoers</a></u>              List of who can run what

       <u>/etc/sudoers.tmp</u>          Default temporary file used by visudo

</pre><h4><b>DIAGNOSTICS</b></h4><pre>
       In addition to reporting <u>sudoers</u> syntax errors, <b>visudo</b> may produce the following messages:

       <b>sudoers</b> <b>file</b> <b>busy,</b> <b>try</b> <b>again</b> <b>later.</b>
             Someone else is currently editing the <u>sudoers</u> file.

       <b><a href="file:/etc/sudoers">/etc/sudoers</a>:</b> <b>Permission</b> <b>denied</b>
             You didn't run <b>visudo</b> as root.

       <b>you</b> <b>do</b> <b>not</b> <b>exist</b> <b>in</b> <b>the</b> <b>passwd</b> <b>database</b>
             Your user-ID does not appear in the system passwd database.

       <b>Warning:</b> <b>{User,Runas,Host,Cmnd}_Alias</b> <b>referenced</b> <b>but</b> <b>not</b> <b>defined</b>
             Either you are trying to use an undeclared {User,Runas,Host,Cmnd}_Alias or you have a user or  host
             name  listed that consists solely of uppercase letters, digits, and the underscore (‘_’) character.
             In the latter case, you can ignore the warnings (<b>sudo</b> will not complain).  The message is  prefixed
             with  the path name of the <u>sudoers</u> file and the line number where the undefined alias was used.  In
             <b>-s</b> (strict) mode these are errors, not warnings.

       <b>Warning:</b> <b>unused</b> <b>{User,Runas,Host,Cmnd}_Alias</b>
             The specified {User,Runas,Host,Cmnd}_Alias was defined but never used.   The  message  is  prefixed
             with the path name of the <u>sudoers</u> file and the line number where the unused alias was defined.  You
             may wish to comment out or remove the unused alias.

       <b>Warning:</b> <b>cycle</b> <b>in</b> <b>{User,Runas,Host,Cmnd}_Alias</b>
             The  specified  {User,Runas,Host,Cmnd}_Alias  includes  a  reference  to itself, either directly or
             through an alias it includes.  The message is prefixed with the path name of the <u>sudoers</u>  file  and
             the  line  number  where the cycle was detected.  This is only a warning unless <b>visudo</b> is run in <b>-s</b>
             (strict) mode as <b>sudo</b> will ignore cycles when parsing the <u>sudoers</u> file.

       <b>ignoring</b> <b>editor</b> <b>backup</b> <b>file</b>
             While processing a <u>@includedir</u> or <u>#includedir</u>, a file was found with a name that  ends  in  ‘~’  or
             <u>.bak</u>.  Such files are skipped by <b>sudo</b> and <b>visudo</b>.

       <b>ignoring</b> <b>file</b> <b>name</b> <b>containing</b> <b>'.'</b>
             While  processing  a  <u>@includedir</u>  or <u>#includedir</u>, a file was found with a name that contains a ‘.’
             character.  Such files are skipped by <b>sudo</b> and <b>visudo</b>.

       <b>unknown</b> <b>defaults</b> <b>entry</b> <b>"name"</b>
             The <u>sudoers</u> file contains a <u>Defaults</u> setting not recognized by <b>visudo</b>.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <u><a href="../man1/vi.1.html">vi</a></u>(1), <u><a href="../man5/sudo.conf.5.html">sudo.conf</a></u>(5), <u><a href="../man5/sudoers.5.html">sudoers</a></u>(5), <u><a href="../man8/sudo.8.html">sudo</a></u>(8), <u><a href="../man8/vipw.8.html">vipw</a></u>(8)

</pre><h4><b>AUTHORS</b></h4><pre>
       Many people have worked on <b>sudo</b> over the years; this version consists of code written primarily by:

             Todd C. Miller

       See the CONTRIBUTORS.md file in the <b>sudo</b> distribution  (https://www.sudo.ws/about/contributors/)  for  an
       exhaustive list of people who have contributed to <b>sudo</b>.

</pre><h4><b>CAVEATS</b></h4><pre>
       There  is  no  easy  way  to prevent a user from gaining a root shell if the editor used by <b>visudo</b> allows
       shell escapes.

</pre><h4><b>BUGS</b></h4><pre>
       If you believe you have found a bug in <b>visudo</b>, you can either file a bug report in the sudo bug database,
       https://bugzilla.sudo.ws/, or open an issue at https://github.com/sudo-project/sudo/issues.  If you would
       prefer   to   use   email,   messages   may   be    sent    to    the    sudo-workers    mailing    list,
       https://www.sudo.ws/mailman/listinfo/sudo-workers (public) or &lt;<a href="mailto:sudo@sudo.ws">sudo@sudo.ws</a>&gt; (private).

       Please  not  report  security  vulnerabilities  through  public GitHub issues, Bugzilla or mailing lists.
       Instead, report them via email to &lt;<a href="mailto:Todd.Miller@sudo.ws">Todd.Miller@sudo.ws</a>&gt;.  You may encrypt your message with  PGP  if  you
       would like, using the key found at https://www.sudo.ws/dist/PGPKEYS.

</pre><h4><b>SUPPORT</b></h4><pre>
       Limited     free     support     is     available     via    the    sudo-users    mailing    list,    see
       https://www.sudo.ws/mailman/listinfo/sudo-users to subscribe or search the archives.

</pre><h4><b>DISCLAIMER</b></h4><pre>
       <b>visudo</b> is provided “AS IS” and any express or implied warranties, including,  but  not  limited  to,  the
       implied  warranties  of  merchantability  and  fitness  for a particular purpose are disclaimed.  See the
       LICENSE.md file distributed with <b>sudo</b> or https://www.sudo.ws/about/license/ for complete details.

Sudo 1.9.16p2                                     July 27, 2023                                        <u><a href="../man8/VISUDO.8.html">VISUDO</a></u>(8)
</pre>
 </div>
</div></section>
</div>
</body>
</html>