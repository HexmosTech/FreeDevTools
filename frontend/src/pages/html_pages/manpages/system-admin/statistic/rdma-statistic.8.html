<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>rdma-statistic - RDMA statistic counter configuration</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/iproute2">iproute2_6.14.0-1ubuntu3_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       rdma-statistic - RDMA statistic counter configuration

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>rdma</b> [ <u>OPTIONS</u> ] <b>statistic</b> { <u>COMMAND</u> | <b>help</b> }

       <b>rdma</b> <b>statistic</b> { <u>OBJECT</u> } <b>show</b>

       <b>rdma</b> <b>statistic</b> [ <u>OBJECT</u> ] <b>show</b> <b>link</b> [ <u>DEV/PORT_INDX</u> ] [ <u>FILTER_NAME</u> <u>FILTER_VALUE</u> ]

       <b>rdma</b> <b>statistic</b> <u>OBJECT</u> <b>mode</b>

       <b>rdma</b> <b>statistic</b> <u>OBJECT</u> <b>set</b> <u>COUNTER_SCOPE</u> [ <u>DEV/PORT_INDEX</u> ] <b>auto</b> { <u>CRITERIA</u> | <b>off</b> }

       <b>rdma</b> <b>statistic</b> <u>OBJECT</u> <b>bind</b> <u>COUNTER_SCOPE</u> [ <u>DEV/PORT_INDEX</u> ] [ <u>OBJECT-ID</u> ] [ <u>COUNTER-ID</u> ]

       <b>rdma</b> <b>statistic</b> <u>OBJECT</u> <b>unbind</b> <u>COUNTER_SCOPE</u> [ <u>DEV/PORT_INDEX</u> ] [ <u>COUNTER-ID</u> ] [ <u>OBJECT-ID</u> ]

       <b>rdma</b> <b>statistic</b> <b>mode</b> <b>[</b> <b>supported</b> <b>]</b> <b>link</b> [ <u>DEV/PORT_INDEX</u> ]

       <b>rdma</b> <b>statistic</b> <b>set</b> <b>link</b> [ <u>DEV/PORT_INDEX</u> ] <b>optional-counters</b> [ <u>OPTIONAL-COUNTERS</u> ]

       <b>rdma</b> <b>statistic</b> <b>unset</b> <b>link</b> [ <u>DEV/PORT_INDEX</u> ] <b>optional-counters</b>

       <u>COUNTER_SCOPE</u> := { <b>link</b> | <b>dev</b> }

       <u>OBJECT</u> := { <b>qp</b> | <b>mr</b> }

       <u>CRITERIA</u> := { <b>type</b> | <b>pid</b> }

       <u>FILTER_NAME</u> := { <b>cntn</b> | <b>lqpn</b> | <b>pid</b> | <b>qp-type</b> }

</pre><h4><b>DESCRIPTION</b></h4><pre>
   <b>rdma</b> <b>statistic</b> <b>[object]</b> <b>show</b> <b>-</b> <b>Queries</b> <b>the</b> <b>specified</b> <b>RDMA</b> <b>device</b> <b>for</b> <b>RDMA</b> <b>and</b> <b>driver-specific</b> <b>statistics.</b>
       <b>Show</b> <b>the</b> <b>default</b> <b>hw</b> <b>counters</b> <b>if</b> <b>object</b> <b>is</b> <b>not</b> <b>specified</b>
       <u>DEV</u> - specifies counters on this RDMA device to show.

       <u>PORT_INDEX</u> - specifies counters on this RDMA port to show.

       <u>FILTER_NAME</u> - specifies a filter to show only the results matching it.

   <b>rdma</b> <b>statistic</b> <b>&lt;object&gt;</b> <b>set</b> <b>-</b> <b>configure</b> <b>counter</b> <b>statistic</b> <b>auto-mode</b> <b>for</b> <b>a</b> <b>specific</b> <b>device/port</b>
       In auto mode all objects belong to one category are bind automatically to a single counter set. The "off"
       is global for all auto modes together. Not applicable for MR's.

   <b>rdma</b> <b>statistic</b> <b>&lt;object&gt;</b> <b>bind</b> <b>-</b> <b>manually</b> <b>bind</b> <b>an</b> <b>object</b> <b>(e.g.,</b> <b>a</b> <b>qp)</b> <b>with</b> <b>a</b> <b>counter</b>
       When bound the statistics of this object are available in this counter. Not applicable for MR's.

   <b>rdma</b> <b>statistic</b> <b>&lt;object&gt;</b> <b>unbind</b> <b>-</b> <b>manually</b> <b>unbind</b> <b>an</b> <b>object</b> <b>(e.g.,</b> <b>a</b> <b>qp)</b> <b>from</b> <b>the</b> <b>counter</b> <b>previously</b> <b>bound</b>
       When unbound the statistics of this object are no longer available in this counter; And if object id is
       not specified then all objects on this counter will be unbound. Not applicable for MR's.

       <u>COUNTER-ID</u> - specifies the id of the counter to be bound.  If this argument is omitted then a new counter
       will be allocated.

   <b>rdma</b> <b>statistic</b> <b>mode</b> <b>-</b> <b>Display</b> <b>the</b> <b>enabled</b> <b>optional</b> <b>counters</b> <b>for</b> <b>each</b> <b>link.</b>
   <b>rdma</b> <b>statistic</b> <b>mode</b> <b>supported</b> <b>-</b> <b>Display</b> <b>the</b> <b>supported</b> <b>optional</b> <b>counters</b> <b>for</b> <b>each</b> <b>link.</b>
   <b>rdma</b> <b>statistic</b> <b>set</b> <b>-</b> <b>Enable</b> <b>a</b> <b>set</b> <b>of</b> <b>optional</b> <b>counters</b> <b>for</b> <b>a</b> <b>specific</b> <b>device/port.</b>
       <u>OPTIONAL-COUNTERS</u> - specifies the name of the optional counters to enable. Optional counters that are not
       specified will be disabled. Note that optional counters are driver-specific.

   <b>rdma</b> <b>statistic</b> <b>unset</b> <b>-</b> <b>Disable</b> <b>all</b> <b>optional</b> <b>counters</b> <b>for</b> <b>a</b> <b>specific</b> <b>device/port.</b>
</pre><h4><b>EXAMPLES</b></h4><pre>
       rdma statistic show
           Shows the state of the default counter of all RDMA devices on the system.

       rdma statistic show link mlx5_2/1
           Shows the state of the default counter of specified RDMA port

       rdma statistic qp show
           Shows the state of all qp counters of all RDMA devices on the system.

       rdma statistic qp show link mlx5_2/1
           Shows the state of all qp counters of specified RDMA port.

       rdma statistic qp show link mlx5_2 pid 30489
           Shows the state of all qp counters of specified RDMA port and belonging to pid 30489

       rdma statistic qp show link mlx5_2 qp-type UD
           Shows the state of all qp counters of specified RDMA port and with QP type UD

       rdma statistic qp mode
           List current counter mode on all devices

       rdma statistic qp mode link mlx5_2/1
           List current counter mode of device mlx5_2 port 1

       rdma statistic qp set link mlx5_2/1 auto type on
           On device mlx5_2 port 1, for each new user QP bind it with a counter automatically. Per counter for
           QPs with same qp type.

       rdma statistic qp set link mlx5_2/1 auto pid on
           On device mlx5_2 port 1, for each new user QP bind it with a counter automatically. Per counter for
           QPs with same pid.

       rdma statistic qp set link mlx5_2/1 auto pid,type on
           On device mlx5_2 port 1, for each new user QP bind it with a counter automatically. Per counter for
           QPs with same pid and same type.

       rdma statistic qp set link mlx5_2/1 auto off
           Turn-off auto mode on device mlx5_2 port 1. The allocated counters can be manually accessed.

       rdma statistic qp bind link mlx5_2/1 lqpn 178
           On device mlx5_2 port 1, allocate a counter and bind the specified qp on it

       rdma statistic qp unbind link mlx5_2/1 cntn 4 lqpn 178
           On device mlx5_2 port 1, bind the specified qp on the specified counter

       rdma statistic qp unbind link mlx5_2/1 cntn 4
           On device mlx5_2 port 1, unbind all QPs on the specified counter. After that this counter will be
           released automatically by the kernel.

       rdma statistic show mr
           List all currently allocated MR's and their counters.

       rdma statistic show mr mrn 6
           Dump a specific MR statistics with mrn 6. Dumps nothing if does not exists.

       rdma statistic mode link mlx5_2/1
           Display the optional counters that was enabled on mlx5_2/1.

       rdma statistic mode supported link mlx5_2/1
           Display the optional counters that mlx5_2/1 supports.

       rdma statistic set link mlx5_2/1 optional-counters cc_rx_ce_pkts,cc_rx_cnp_pkts
           Enable the cc_rx_ce_pkts,cc_rx_cnp_pkts counters on device mlx5_2 port 1.

       rdma statistic unset link mlx5_2/1 optional-counters
           Disable all the optional counters on device mlx5_2 port 1.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man8/rdma.8.html">rdma</a></b>(8), <b><a href="../man8/rdma-dev.8.html">rdma-dev</a></b>(8), <b><a href="../man8/rdma-link.8.html">rdma-link</a></b>(8), <b><a href="../man8/rdma-resource.8.html">rdma-resource</a></b>(8),

</pre><h4><b>AUTHORS</b></h4><pre>
       Mark Zhang &lt;<a href="mailto:markz@mellanox.com">markz@mellanox.com</a>&gt;
       Erez Alfasi &lt;<a href="mailto:ereza@mellanox.com">ereza@mellanox.com</a>&gt;
       Neta Ostrovsky &lt;<a href="mailto:netao@nvidia.com">netao@nvidia.com</a>&gt;

iproute2                                          27 June 2019                                 <u><a href="../man8/RDMA-STATISTIC.8.html">RDMA-STATISTIC</a></u>(8)
</pre>
 </div>
</div></section>
</div>
</body>
</html>