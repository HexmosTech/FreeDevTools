<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>wsdd - A Web Service Discovery host and client daemon.</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/jammy/+package/wsdd">wsdd_0.7.0-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       wsdd - A Web Service Discovery host and client daemon.

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>wsdd</b> <b>[options</b>]

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>wsdd</b>  implements both a Web Service Discovery (WSD) host and a WSD client daemon. The host implementation
       enables (Samba) hosts, like your local NAS device, to be found by  Web  Service  Discovery  clients  like
       Windows. The client mode allows searching for other WSD hosts on the local network.

       The  default mode of operation is the host mode. The client or discovery mode must be enabled explictely.
       Unless configured otherwise, the host mode is always active. Both modes can be used at the same time.

</pre><h4><b>OPTIONS</b></h4><pre>
   <b>General</b> <b>options</b>
       <b>-4</b>, <b>--ipv4only</b>
              See below.

       <b>-6</b>, <b>--ipv6only</b>
              Restrict to the given address family. If both options are specified no addreses will be  available
              and wsdd will exit.

       <b>-A</b>, <b>--no-autostart</b>
              Do  not  start networking activities automatically when the program is started.  The API interface
              (see below) can be used to start and stop the  networking  activities  while  the  application  is
              running.

       <b>-c</b> <u>DIRECTORY</u>, <b>--chroot</b> <u>DIRECTORY</u>
              chroot  into  the  given  <u>DIRECTORY</u>  after  initialization has been performed and right before the
              handling of incoming messages starts. The new root directory can be empty. Consider using  the  <b>-u</b>
              option as well.

       <b>-h</b>, <b>--help</b>
              Show help and exit.

       <b>-H</b> <u>HOPLIMIT</u>, <b>--hoplimit</b> <u>HOPLIMIT</u>
              Set  the  hop  limit  for  multicast  packets.  The default is 1 which should prevent packets from
              leaving the local network segment.

       <b>-i</b> <u>INTERFACE/ADDRESS</u>, <b>--interface</b> <u>INTERFACE/ADDRESS</u>
              Specify on which interfaces wsdd will be  listening  on.  If  no  interfaces  are  specified,  all
              interfaces  are  used.  Loop-back  interfaces  are never used, even when explicitly specified. For
              interfaces with IPv6 addresses, only link-local addresses will be used for announcing the host  on
              the  network. This option can be provided multiple times in order to restrict traffic to more than
              one interface.  This option also accepts IP addresses that the service should bind to.  For  IPv6,
              only link local addresses are actually considered as noted above.

       <b>-s</b>, <b>--shortlog</b>
              Use  a  shorter  logging format that only includes the level and message.  This is useful in cases
              where the logging mechanism, like systemd on Linux, automatically prepends a date and process name
              plus ID to the log message.

       <b>-u</b> <u>USER[:GROUP]</u>, <b>--user</b> <u>USER[:GROUP]</u>
              Change user (and group) when running before handling  network  packets.   Together  with  <b>-c</b>  this
              option can be used to increase security if the execution environment, like the init system, cannot
              ensure this in another way.

       <b>-U</b> <u>UUID</u>, <b>--uuid</b> <u>UUID</u>
              The  WSD specification requires a device to have a unique address that is stable across reboots or
              changes in networks. In the context of the standard, it is assumed that this is something  like  a
              serial  number. wsdd uses the UUID version 5 with the DNS namespace and the host name of the local
              machine as inputs. Thus, the host name should be  stable  and  not  be  modified,  e.g.  by  DHCP.
              However, if you want wsdd to use a specific UUID you can use this option.

       <b>-v</b>, <b>--verbose</b>
              Additively  increase verbosity of the log output. A single occurrence of -v/--verbose sets the log
              level to INFO. More -v options set the log level to DEBUG.

       <b>-V</b>, <b>--version</b>
              Show the version number and exit.

   <b>Host</b> <b>Mode</b> <b>Options</b>
       <b>-d</b> <u>DOMAIN</u>, <b>--domain</b> <u>DOMAIN</u>
              Assume that the host running wsdd joined an ADS domain. This will make wsdd report the host  being
              a  domain  member.  It  disables  workgroup  membership  reporting.  The  (provided)  hostname  is
              automatically converted to lower case. Use the `-p` option to change this behavior.

       <b>-n</b> <u>HOSTNAME</u>, <b>--hostname</b> <u>HOSTNAME</u>
              Override the host name wsdd uses during discovery. By default the  machine's  host  name  is  used
              (look  at  <a href="../man1/hostname.1.html">hostname</a>(1)).  Only  the  host name part of a possible FQDN will be used in the default
              case.

       <b>-o</b>, <b>--no-host</b>
              Disable host operation mode. If this option is provided, the host cannot be  discovered  by  other
              (Windows)  hosts.  It  can be useful when client/discovery mode is used and no announcement of the
              host that runs wsdd should be made.

       <b>-p</b>, <b>--preserve-case</b>
              Preserve the hostname as it is. Without this option, the hostname is  converted  as  follows.  For
              workgroup  environments (see -w) the hostname is made upper case by default. Vice versa it is made
              lower case for usage in domains (see -d).

       <b>-t</b>, <b>--no-http</b>
              Do not service HTTP requests of the WSD protocol. This option is intended for  debugging  purposes
              where another process may handle the Get messages.

       <b>-w</b> <u>WORKGROUP</u>, <b>--workgroup</b> <u>WORKGROUP</u>
              By  default  wsdd  reports  the  host  is  a  member  of a workgroup rather than a domain (use the
              -d/--domain option to override this). With  -w/--workgroup  the  default  workgroup  name  can  be
              changed.  The  default  work  group  name  is  WORKGROUP. The (provided) hostname is automatically
              converted to upper case. Use the `-p` option to change this behavior.

   <b>Client/Discovery</b> <b>Mode</b> <b>Options</b>
       <b>-D</b>, <b>--discovery</b>
              Enable discovery mode to search for other WSD hosts/servers. Found  hosts  are  logged  with  INFO
              priority.  The  server interface (see below) can be used for a programatic interface. Refer to the
              man page for details of the server interface.

       <b>-l</b> <u>PATH/PORT</u>, <b>--listen</b> <u>PATH/PORT</u>
              Specify the location of the socket for the server programming interface.  If the option  value  is
              numeric, it is interpreted as numeric port for a TCP server port. Then, the server socket is bound
              to  the  localhost  only.   If the option value is non-numeric, it is assumed to be a path to UNIX
              domain socket to which a client can connect to.

</pre><h4><b>EXAMPLE</b> <b>USAGE</b></h4><pre>
   <b>Handle</b> <b>traffic</b> <b>on</b> <b>eth0</b> <b>and</b> <b>eth2</b> <b>only,</b> <b>but</b> <b>only</b> <b>with</b> <b>IPv6</b> <b>addresses</b>
           wsdd -i eth0 -i eth2 -6

           or

           wsdd --interface eth0 --interface eth2 --ipv6only

   <b>Set</b> <b>the</b> <b>Workgroup</b> <b>according</b> <b>to</b> <b>smb.conf,</b> <b>be</b> <b>verbose,</b>  <b>run</b>  <b>with</b>  <b>dropped</b>  <b>privileges,</b>  <b>and</b>  <b>change</b>  <b>the</b>  <b>root</b>
       <b>directory</b> <b>to</b> <b>an</b> <b>(empty)</b> <b>directory</b>
           SMB_GROUP=$(grep -i '^workgroup=' smb.conf | cut -f2 -d= | tr -d '[:blank:]')

           wsdd -v -w $SMB_GROUP -u daemon:daemon -c /var/run/wsdd/chroot

</pre><h4><b>FIREWALL</b> <b>SETUP</b></h4><pre>
       Traffic for the following ports, directions and addresses must be allowed:

       - Incoming and outgoing traffic to udp/3702 with multicast destination: 239.255.255.250 for IPv4 and
       ff02::c for IPv6

       - Outgoing unicast traffic from udp/3702

       - Incoming traffic to tcp/5357

       You should further restrict the traffic to the (link-)local subnet, e.g. by using the `fe80::/10` address
       space  for  IPv6.  Please  note  that IGMP traffic must be enabled in order to get IPv4 multicast traffic
       working.

</pre><h4><b>API</b> <b>INTERFACE</b></h4><pre>
       Wsdd provides a text-based, line-oriented API interface to query information  and  trigger  actions.  The
       interface  can be used with TCP and UNIX domain sockets (see <b>-l/--listen</b> option). The TCP socket is bound
       to the local host only. The following commands can be issued:

   <b>clear</b> - Clear list of discovered devices
       Clears the list of all discovered devices. Use the <b>probe</b>  command  to  search  for  devices  again.  This
       command does not return any data and is only available in discover mode.

   <b>list</b> - List discovered devices
       Returns  a  tab-separated  list of discovered devices with the following information.  The possibly empty
       list of detected hosts is always terminated with a single dot ('.') in  an  otherwise  empty  line.  This
       command is only available in discover mode.

       UUID   UUID  of  the  discovered  device. Note that a multi-homed device should appear only once but with
              multiple addresses (see below)

       name   The name reported by the device. For discovered Windows hosts, it is the configured computer  name
              that is reported here.

       association
              Specifies  the  domain  or  workgroup  to  which  the discovered host belongs to.  The type of the
              association (workgroup or domain) is separated from its value by a colon.

       last_seen
              The date and time the device was last seen as a consequence of Probe/Hello  messages  provided  in
              ISO8601 with seconds.

       addresses
              List  of  all  transport  addresses  that were collected during the discovery process delimited by
              commas.  Addresses are provided along with the interface (separated by '%')  on  which  they  were
              discovered.   IPv6 addresses are reported on square brackets. Note that the reported addresses may
              not match the actual device on which the device may be reached.

   <b>probe</b> <u><b>[INTERFACE]</b></u> - Search for devices
       Triggers a Probe message on the provided INTERFACE (eth0, e.g.) to search for WSD hosts. If no  interface
       is provided, all interfaces wsdd listens on are probed.  A Probe messages initiates the discovery message
       flow.  It  may  take some time for hosts to be actually discovered. This command does not return any data
       and is only available in discovery mode.

   <b>start</b> - Start networking activities
       This command starts the networking acitivies of wsdd if they haven't been started yet.  "Hello"  messages
       are  emitted  and  the host is announced on the network(s) when the host mode is active. If the discovery
       mode is enabled a probe process is also started.

   <b>stop</b> - Stop networking activities
       This is the reverse operation to start. When this command is received, "Bye" messages are sent  in  order
       to  notify  hosts  in the network about the host's disappearance. All networking sockets used for the WSD
       protocol are closed as well. Activities can be restarted with the start operation.

</pre><h4><b>SECURITY</b></h4><pre>
       wsdd does not implement any security feature, e.g. by using TLS for the http  service.  This  is  because
       wsdd's  intended usage is within private, i.e. home, LANs. The <u>Hello</u> message contains the hosts transport
       address, i.e. the IP address which speeds up discovery (avoids <u>Resolve</u> message).

</pre><h4><b>KNOWN</b> <b>ISSUES</b></h4><pre>
   <b>Using</b> <b>only</b> <b>IPv6</b> <b>on</b> <b>FreeBSD</b>
       If wsdd is running on FreeBSD using IPv6 only, the host running wsdd may not be reliably discovered.  The
       reason  appears to be that Windows is not always able to connect to the HTTP service for unknown reasons.
       As a workaround, run wsdd with IPv4 only.

   <b>Tunnel/Bridge</b> <b>Interface</b>
       If tunnel/bridge interfaces like those created by OpenVPN or Docker exist, they may interfere  with  wsdd
       if  executed  without  providing an interface that it should bind to (so it binds to all). In such cases,
       the wsdd hosts appears after wsdd has been started but it disappears when an update of the  Network  view
       in  Windows  Explorer is forced, either by refreshing the view or by a reboot of the Windows machine.  To
       solve this issue, the interface that is connected to the network on which the host  should  be  announced
       needs  to  be  specified  with  the  -i/--interface option.  This prevents the usage of the tunnel/bridge
       interfaces.

       Background: Tunnel/bridge interfaces may cause <u>Resolve</u> requests from Windows hosts  to  be  delivered  to
       wsdd  multiple  times, i.e. duplicates of such request are created. If wsdd receives such a request first
       from a tunnel/bridge it uses the transport address (IP address) of that interface and sends the  response
       via  unicast.  Further duplicates are not processed due to the duplicate message detection which is based
       on message UUIDs. The Windows host which receives the response appears to detect a mismatch  between  the
       transport  address  in  the  <u>ResolveMatch</u>  message (which is the tunnel/bridge address) and the IP of the
       sending host/interface (LAN IP, e.g.). Subsequently, the wsdd host is ignored by Windows.

                                                                                                         <u><a href="../man8/wsdd.8.html">wsdd</a></u>(8)
</pre>
 </div>
</div></section>
</div>
</body>
</html>