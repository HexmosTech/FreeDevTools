<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>amssl - Program to manage amanda ssl certificates</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/amanda-common">amanda-common_3.5.4-2_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       amssl - Program to manage amanda ssl certificates

</pre><h4><b>SYNOPSIS</b></h4><pre>

       <b>amssl</b> [--client] [--init | --create-ca | --create-server-cert <u>server-host</u> |
             --create-client-cert <u>client-host</u> [--server <u>server-host</u>] ] [--country <u>country-code</u>] [--state <u>state</u>]
             [--locality <u>locality</u>] [--organisation <u>organisation</u>] [--organisation-unit <u>organisation-unit</u>]
             [--common <u>common-name</u>] [--email <u>email</u>] [<b>-o</b> <u>configoption</u>...] [--config <u>config</u>]

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>amssl</b> is a program to manage amanda ssl certificates for the <b>ssl</b> auth. It can create self-signed CA,
       server certificate and client certificates.

</pre><h4><b>OPTIONS</b></h4><pre>
       <b>--create-ca</b>
           Create a self-signed CA.

       <b>--create-server-cert</b>
           Create a server certificate.

       <b>--create-client-cert</b> <u>CLIENT-HOSTNAME</u>
           Create a client certificate.

       <b>--server</b> <u>SERVER-HOSTNAME</u>
           The amanda server to connect to.

       <b>--batch</b>
           use the certificate fields set in the initialization, there is confirmation.

           This option is useless if one the fields was not set in the initiatization.

       <b>--client</b>
           When running <b>amssl</b> on a client.

       <b>--init</b>
           Initialize the host.

       The following options are the one needed by a certificate

       <b>--country</b>
           The two letter country code.

       <b>--state</b>
           The State.

       <b>--locality</b>
           The locality.

       <b>--organisation</b>
           The organisation

       <b>--organisation-unit</b>
           The organisation unit.

       <b>--common</b>
           The common name.

       <b>--email</b>
           The email.

</pre><h4><b>INITIALISATION</b></h4><pre>
       Must be run once before any other command

       Create a template openssl.cnf file and a configuration file with the value provided, they are used in
       future command so you do not need to enter them at every invocation.

       The value provided must be the one you want in the certificate.

       <b>amssl</b> [--client] --init [--country <u>country-code</u>] [--state <u>state</u>] [--locality <u>locality</u>]
             [--organisation <u>organisation</u>] [--organisation-unit <u>organisation-unit</u>] [--common <u>common-name</u>]
             [--email <u>email</u>] [<b>-o</b> <u>configoption</u>...] [--config <u>config</u>]

       A client is initialized with the --client options.

       Create

            <b>$SSL_DIR/openssl.cnf.template</b>
            <b>$SSL_DIR/openssl.data</b>

</pre><h4><b>CREATE</b> <b>A</b> <b>SELF-SIGNED</b> <b>CA</b></h4><pre>
       Create a self-signed CA.

       <b>amssl</b> --create-ca [--batch] [--config <u>CONFIG</u>]

       You can also provide all options of the initialization step

       You must enter a new CA passphrase, you must keep it secret and remember it. It will be required every
       time you need to create a new cetificate.

       After you enter the passphrase, it will be asked 3 other times.

       Create

            $SSL_DIR/CA/crt.pem
            $SSL_DIR/CA/private/key.pem

</pre><h4><b>CREATE</b> <b>THE</b> <b>SERVER</b> <b>CERTIFICATE</b></h4><pre>
       Create the amanda server certificate.

       <b>amssl</b> --create-server-cert <u>HOSTNAME</u> [--batch] [--config <u>CONFIG</u>]

       You can also provide all options of the initialization step

       The CA passphrase is asked.

       Create

            $SSL_DIR/me/crt.pem
            $SSL_DIR/me/fingerprint
            $SSL_DIR/me/private/key.pem
            $SSL_DIR/remote/<u>HOSTNAME</u> -&gt; ../me

</pre><h4><b>CREATE</b> <b>A</b> <b>CLIENT</b> <b>CERTIFICATE</b></h4><pre>
       Create a client certificate, sign it by the CA certicate on the server and both server and client learn
       the remore fingerprint.

       DO NOT RUN IT ON SERVER. This will detroy the server certificate

       It require to run amssl on the server and client at the same time

       <b>ssl-dir</b> must be set in amanda-client.conf on the client.

       Both server and client must already be initialized.

       Run on the server:

       <b>amssl</b> --create-client-cert <u>client-host</u> [--config <u>CONFIG</u>]

       It wait for the client to connect and then sign the client certificate, The CA passphrase is asked.

       Run on the client:

       <b>amssl</b> --client --create-client-cert <u>CLIENT-HOST</u> --server <u>SERVER-HOST</u> [--batch] [--config <u>CONFIG</u>]

       Create on server

            $SSL_DIR/remote/<u>CLIENT-HOST</u>/fingerprint

       Create on client

            $SSL_DIR/me/crt.pem
            $SSL_DIR/me/fingerprint
            $SSL_DIR/me/private/key.pem
            $SSL_DIR/remote/<u>SERVER-HOST</u>/fingerprint

</pre><h4><b>EXAMPLE</b></h4><pre>
       <b>Initialize</b> <b>the</b> <b>server</b>
           amssl --init --country US --state California --locality Sunnyvale --organisation zmanda
           --organistion-unit engineering --common boss --email '<a href="mailto:email@email.com">email@email.com</a>'

       <b>Create</b> <b>the</b> <b>CA</b> <b>on</b> <b>the</b> <b>server</b>
           amssl --create-ca

       <b>Create</b> <b>the</b> <b>server</b> <b>certificate</b>
           amssl --create-server-cert server.zmanda.com

       <b>Create</b> <b>a</b> <b>client</b> <b>certificate</b>

           <b>On</b> <b>server:</b>
               amssl --create-client-cert client.zmanda.com

           <b>On</b> <b>client:</b>
               amssl --client --init --country US --state California --locality Sunnyvale --organisation zmanda
               --organistion-unit engineering --common boss --email '<a href="mailto:email@email.com">email@email.com</a>'

               amssl --client --create-client-cert client.zmanda.com --server server.zmanda.com

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man8/amanda.8.html">amanda</a></b>(8), <b><a href="../man5/amanda.conf.5.html">amanda.conf</a></b>(5), <b><a href="../man5/amanda-client.conf.5.html">amanda-client.conf</a></b>(5), <b><a href="../man8/amanda.8.html">amanda</a></b>(8), <b><a href="../man7/amanda-auth.7.html">amanda-auth</a></b>(7), <b><a href="../man7/amanda-auth-ssl.7.html">amanda-auth-ssl</a></b>(7)

       The Amanda Wiki: : <a href="http://wiki.zmanda.com/">http://wiki.zmanda.com/</a>

</pre><h4><b>AUTHORS</b></h4><pre>
       <b>James</b> <b>da</b> <b>Silva</b> &lt;<a href="mailto:jds@amanda.org">jds@amanda.org</a>&gt;

       <b>Stefan</b> <b>G.</b> <b>Weichinger</b> &lt;<a href="mailto:sgw@amanda.org">sgw@amanda.org</a>&gt;

Amanda 3.5.4                                       01/25/2025                                           <u><a href="../man8/AMSSL.8.html">AMSSL</a></u>(8)
</pre>
 </div>
</div></section>
</div>
</body>
</html>