<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>sg_ses - access a SCSI Enclosure Services (SES) device</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/sg3-utils">sg3-utils_1.48-2ubuntu1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       sg_ses - access a SCSI Enclosure Services (SES) device

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>sg_ses</b>  [<u>--all</u>]  [<u>--ALL</u>]  [<u>--descriptor=DES</u>]  [<u>--dev-slot-num=SN</u>]  [<u>--eiioe=A_F</u>]  [<u>--filter</u>]  [<u>--get=STR</u>]
       [<u>--hex</u>]   [<u>--index=IIA</u>   |   <u>--index=TIA,II</u>]   [<u>--inner-hex</u>]   [<u>--join</u>]   [<u>--json[=JO]</u>]   [<u>--js-file=JFN</u>]
       [<u>--maxlen=LEN</u>]  [<u>--no-config</u>]  [<u>--no-time</u>]  [<u>--page=PG</u>]  [<u>--quiet</u>]  [<u>--raw</u>]  [<u>--readonly</u>] [<u>--sas-addr=SA</u>]
       [<u>--status</u>] [<u>--verbose</u>] [<u>--warn</u>] <u>DEVICE</u>

       <b>sg_ses</b>   <u>--control</u>   [<u>--byte1=B1</u>]   [<u>--clear=STR</u>]   [<u>--data=H,H...</u>]    [<u>--data=@FN</u>]    [<u>--descriptor=DES</u>]
       [<u>--dev-slot-num=SN</u>]    [<u>--index=IIA</u>    |   <u>--index=TIA,II</u>]   [<u>--mask</u>]   [<u>--maxlen=LEN</u>]   [<u>--nickname=SEN</u>]
       [<u>--nickid=SEID</u>]  [<u>--page=PG</u>] [<u>--readonly</u>] [<u>--sas-addr=SA</u>] [<u>--set=STR</u>] [<u>--verbose</u>] <u>DEVICE</u>

       <b>sg_ses</b> <u>--data=@FN</u> <u>--status</u> [<u>--raw</u> <u>--raw</u>] [&lt;all options from first form&gt;]
       <b>sg_ses</b> <u>--inhex=FN</u> <u>--status</u> [<u>--raw</u> <u>--raw</u>] [&lt;all options from first form&gt;]

       <b>sg_ses</b> [<u>--enumerate</u>] [<u>--index=IIA</u>] [<u>--list</u>] [<u>--help</u>] [<u>--version</u>]

</pre><h4><b>DESCRIPTION</b></h4><pre>
       Fetches management information from a SCSI Enclosure Service (SES) device.  This utility can also  modify
       the  state of a SES device. The <u>DEVICE</u> should be a SES device which may be a dedicated enclosure services
       processor in which case an INQUIRY response's Peripheral Device Type is 13 [0xd].  Alternatively  it  may
       be  attached  to  another  type  of SCSI device (e.g. a disk) in which case the EncServ bit is set in its
       INQUIRY response.

       If the <u>DEVICE</u> argument is given with no options then the names  of  all  SES  diagnostic  pages  (dpages)
       supported  are  listed.  Most  of  the named dpages are defined in the SES standards and drafts. The most
       recent reference for this utility is the draft SCSI Enclosure Services  4  document  T10/BSR  INCITS  555
       Revision  5 at https://www.t10.org . Existing standards for SES, SES-2 and SES-3 are ANSI INCITS 305-1998
       and ANSI INCITS 448-2008 and ANSI INCITS 518-2017 respectively.

       SAS expanders typically have a SES device attached via a virtual port. Some HBAs (SCSI initiators) choose
       to expose a SES device internally. That means the SCSI subsystem on the host  machine  can  see  the  SES
       device,  but  devices  connected to that HBA (e.g. a SAS expander) cannot see the HBA's SES device.  That
       internal SES device might report on the temperature(s) of the HBA and whether anything  is  connected  to
       its SCSI ports.

       The first form shown in the SYNOPSIS is for fetching and decoding dpages or fields from the SES <u>DEVICE</u>. A
       SCSI RECEIVE DIAGNOSTIC RESULTS command is sent to the <u>DEVICE</u> to obtain each dpage response.  Rather than
       decoding  a  fetched  dpage,  its  contents  may be output in hex or binary with the <u>--hex</u> or <u>--raw</u> <u>--raw</u>
       options.

       The second form in the SYNOPSIS is for modifying dpages or fields held in the SES  <u>DEVICE</u>.  A  SCSI  SEND
       DIAGNOSTIC  command  containing  a  "control"  dpage is sent to the <u>DEVICE</u> to cause changes. Changing the
       state of an enclosure (e.g. requesting the "ident" (locate) LED to flash on a disk tray in an  array)  is
       typically done using a read-modify-write cycle. See the section on CHANGING STATE below.

       The  third  form in the SYNOPSIS has two equivalent invocations shown. They decode the contents of a file
       (named <u>FN</u>) that holds a hexadecimal or binary representation  of  one,  or  many,  SES  dpage  responses.
       Typically  an  earlier  invocation  of  the first form of this utility with the '-HHHH' option would have
       generated that file. Since no SCSI commands are sent; the <u>DEVICE</u> argument, if given, will be ignored.

       The last form in the SYNOPSIS shows the options for providing command line help (i.e. usage information),
       listing out dpage and field information tables held by the utility (<u>--enumerate</u>), or printing the version
       string of this utility.

       There is a  web  page  discussing  this  utility  at  https://sg.danny.cz/sg/sg_ses.html  .  Support  for
       downloading microcode to a SES device has been placed in a separate utility called sg_ses_microcode.

       In  the  following  sections  "dpage"  refers  to  a  diagnostic page, either fetched with a SCSI RECEIVE
       DIAGNOSTIC RESULTS command, sent to the <u>DEVICE</u> with a SCSI SEND DIAGNOSTIC command, or fetched from  data
       supplied by the <u>--data=</u> or the <u>--inhex=FN</u> option.

</pre><h4><b>OPTIONS</b></h4><pre>
       Arguments  to  long  options  are  mandatory  for  short  options  as  well.  The options are arranged in
       alphabetical order based on the long option name.

       <b>-a</b>, <b>--all</b>
              shows the output of the <u>--join</u> option followed by the other SES  dpages.  Since  a  single  <u>--join</u>
              option  does not include the Threshold In dpage, it is listed separately in the "other SES dpages"
              section. In this context, "other" means all SES dpages that have not (explicitly) been  output  by
              the <u>--join</u> option.
              To output all pages without attempting a join, use the <u>--page=all</u> option rather than this option.
              If  this  option  is  used  twice, the Threshold In dpage (if available) is included in the <u>--join</u>
              option output. Note that now the Threshold In dpage is not listed separately  in  the  "other  SES
              dpages" section. Using this option twice is equivalent to invoking the <u>--ALL</u> option.
              This option implies the <u>--status</u> option as long as the <u>--control</u> option has not been given.
              Using  this  option  together  with the <u>-HHH</u>, <u>-HHHH</u> or <u>-HHHHH</u> options is considered an error as it
              produces confusing output.  To force the issue use <u>-H</u> times (as discouragement). Instead using the
              <u>--page=all</u> option together with the <u>-HHH</u>, <u>-HHHH</u> or <u>-HHHHH</u> options will  more  likely  produce  the
              desired  output:  a  dump of all SES diagnostics pages in hex suitable for later parsing or visual
              inspection with a text editor.

       <b>-z</b>, <b>--ALL</b>
              shows the output of the <u>--join</u> option invoked twice, followed by the other SES dpages.  Since  two
              <u>--join</u>  options  does  include  the Threshold In dpage, that dpage is not listed separately in the
              "other SES dpages" section.
              This option implies the <u>--status</u> option as long as the <u>--control</u> option has not been given.

       <b>-b</b>, <b>--byte1</b>=<u>B1</u>
              some modifiable dpages may need byte 1 (i.e. the second byte) set. In the Enclosure Control dpage,
              byte 1 contains the INFO, NON-CRIT, CRIT  and  UNRECOV  bits.  In  the  Subenclosure  String  Out,
              Subenclosure  Nickname  Control  and Download Microcode Control dpages, byte 1 is the Subenclosure
              identifier.  Active when the <u>--control</u> and <u>--data=H,H...</u> options are used and the default value is
              0. If the <u>--clear=STR</u> or <u>--set=STR</u> option is used then the value read from byte 1 is written  back
              to byte 1.  <u>B1</u> is in decimal unless it is prefixed by '0x' or '0X' (or has a trailing 'h' or 'H').

       <b>-C</b>, <b>--clear</b>=<u>STR</u>
              Used  to  clear  an  element  field  in the Enclosure Control or Threshold Out dpage. Must be used
              together with an indexing option to specify which element is to be changed. The Enclosure  Control
              dpage  is assumed if the <u>--page=PG</u> option is not given. See the STR FORMAT and the CLEAR, GET, SET
              sections below.

       <b>-c</b>, <b>--control</b>
              will send control information to the <u>DEVICE</u> via a SCSI SEND DIAGNOSTIC command. Cannot  give  both
              this  option  and  <u>--status</u>.   The  Enclosure  Control,  String  Out, Threshold Out, Array Control
              (obsolete in SES-2), Subenclosure String Out, Subenclosure Nickname Control and Download Microcode
              dpages can be set currently. This option is assumed if either the <u>--clear=STR</u> or <u>--set=STR</u>  option
              is given.

       <b>-d</b>, <b>--data</b>=<u>H,H...</u>
              permits  a  string  of  comma separated (ASCII) hex bytes to be specified (limit 1024). A (single)
              space separated string of hex bytes is also allowed but the list  needs  to  be  in  quotes.  This
              option  allows  the  parameters  to  a  control dpage to be specified. The string given should not
              include the first 4 bytes (i.e. page code and length). See the DATA SUPPLIED section below.

       <b>-d</b>, <b>--data</b>=-
              reads one or more data strings from stdin, limit almost 2**16 bytes. stdin may provide  ASCII  hex
              as  a  comma separated list (i.e. as with the <u>--data=H,H...</u> option). Additionally spaces, tabs and
              line feeds are permitted as separators from stdin . Stops reading stdin when an EOF  is  detected.
              See the DATA SUPPLIED section below.

       <b>-d</b>, <b>--data</b>=@<u>FN</u>
              reads  one or more data strings from the file called <u>FN</u>, limit almost 2**16 bytes. The contents of
              the file is decoded in the same fashion as stdin described in the previous option.  See  the  DATA
              SUPPLIED section below.

       <b>-D</b>, <b>--descriptor</b>=<u>DES</u>
              where <u>DES</u> is a descriptor name (string) as found in the Element Descriptor dpage. This is a medium
              level  indexing  alternative  to the low level <u>--index=</u> options. If the descriptor name contains a
              space then <u>DES</u> needs to be surrounded by quotes (single or double)  or  the  space  escaped  (e.g.
              preceded  by  a  backslash).  See  the DESCRIPTOR NAME, DEVICE SLOT NUMBER AND SAS ADDRESS section
              below.

       <b>-x</b>, <b>--dev-slot-num</b>=<u>SN</u>, <b>--dsn</b>=<u>SN</u>
              where <u>SN</u> is a device slot number found in the Additional Element Status dpage.  Only  entries  for
              FCP  and  SAS devices (with EIP=1) have device slot numbers. <u>SN</u> must be a number in the range 0 to
              255 (inclusive). 255 is used to indicate there is no corresponding device slot. This is  a  medium
              level indexing alternative to the low level <u>--index=</u> options. See the DESCRIPTOR NAME, DEVICE SLOT
              NUMBER AND SAS ADDRESS section below.

       <b>-E</b>, <b>--eiioe</b>=<u>A_F</u>
              <u>A_F</u>  is either the string 'auto' or 'force'. There was some fuzziness in the interpretation of the
              'element index' field in the Additional Element Status (AES) dpage between SES-2  and  SES-3.  The
              EIIOE  bit  was  introduced  to  resolve the problem but not all enclosures have caught up. In the
              SES-3 revision 12 draft the EIIOE bit was expanded to a 2 bit EIIOE field.  Using  '--eiioe=force'
              will decode the AES dpage as if the EIIOE field is set to 1.  Using '--eiioe=auto' will decode the
              AES  dpage  as  if the EIIOE field is set to 1 if the first AES descriptor has its EIP bit set and
              its element index field is 1 (in other words a heuristic to guess whether the EIIOE  field  should
              be set to 1 or 0).
              If  the  enclosure  sets the actual EIIOE field to 1 or more then this option has no effect. It is
              recommended that HP JBOD users set --eiioe=auto .

       <b>-e</b>, <b>--enumerate</b>
              enumerate all known diagnostic page (dpage) names and SES elements that  this  utility  recognizes
              plus  the abbreviations accepted by this utility. Ignores <u>DEVICE</u> if it is given. Essentially it is
              dumping out tables held internally by this utility.
              If <u>--enumerate</u> is given twice, then the recognized acronyms for  the  <u>--clear=STR</u>,  <u>--get=STR</u>  and
              <u>--set=STR</u>  options  are  listed.  The  utility exits after listing this information, so most other
              options and <u>DEVICE</u> are ignored. Since there are many acronyms  for  the  Enclosure  Control/Status
              dpage then the output can be further restricted by giving the <u>--index=IIA</u> option (e.g. "sg_ses -ee
              -I  ts" to only show the acronyms associated with the Enclosure Control/Status dpage's Temperature
              Sensor Element Type).

       <b>-f</b>, <b>--filter</b>
              cuts down on the amount of output from the Enclosure  Status  dpage  and  the  Additional  Element
              Status  dpage. When this option is given, any line which has all its binary flags cleared (i.e. 0)
              is filtered out (i.e.  ignored).  If a line has some other value on it (e.g. a  temperature)  then
              it  is output.  When this option is used twice only elements associated with the "status=ok" field
              (in the Enclosure status dpage) are output. The <u>--filter</u> option is useful for reducing the  amount
              of output generated by the <u>--join</u> option.

       <b>-G</b>, <b>--get</b>=<u>STR</u>
              Used  to  read  a  field  in  a status element. Must be used together with a an indexing option to
              specify which element is to be read. By default the Enclosure Status dpage is read, the only other
              dpages that can be read are the Threshold In and Additional Element Status dpages. If a  value  is
              found  it  is  output  in decimal to stdout (by default) or in hexadecimal preceded by "0x" if the
              <u>--hex</u> option is also given. See the STR FORMAT and the CLEAR, GET, SET sections below.

       <b>-h</b>, <b>--help</b>
              output the usage message then exit. Since there is a lot of information,  it  is  split  into  two
              pages.  The  most  important  is  shown  on the first page.  Use this option twice (e.g. '-hh') to
              output the second page. Note: the <u>--enumerate</u> option might also be viewed as a help or usage  type
              option. And like this option it has a "given twice" form: '-ee'.

       <b>-H</b>, <b>--hex</b>
              If  the  <u>--get=STR</u>  option  is  given  then output the value found (if any) in hexadecimal, with a
              leading "0x". Otherwise output the response in hexadecimal; with a leading  hex  address/index  at
              the  start of each line.  If given twice an ASCII rendering is given to the right of each line. If
              given three or more times, the hexadecimal bytes only are output, 16 bytes (or less) on each line.
              Ignored when all elements from several dpages are being accessed (e.g. when the <u>--join</u>  option  is
              used). Also see the <u>--raw</u> option which may be used with this option.
              To dump one of more dpage responses to stdout in ASCII parsable hexadecimal use <u>-HHH</u> or <u>-HHHH</u>. The
              triple  H form only outputs hexadecimal which is fine for a single dpage response. When all dpages
              are dumped (e.g.  with <u>--page=all</u>) then the quad H form adds the name of each dpage preceded by  a
              hash mark ('#'). Hence the output of the quad H form is still parsable plus it is easier for users
              to view and possibly edit. Using this option 5 times (e.g. <u>-HHHHH</u>) adds the page code in hex after
              the page's name in the comment before the hex rendering of that mode page.
              If  the <u>--inner-hex</u> option is also given it changes the action of this option. See the description
              of the <u>--inner-hex</u> option. Giving both <u>-HHHH</u> (or greater) and the <u>--inner-hex</u> option  is  reported
              as an error.
              Note  that  the  meaning  of  '-H'  and  '-HH'  have  been  swapped in version "2.72 20230130" for
              compatibility with other utilities in this package and the  description  of  this  option  in  the
              <a href="../man8/sg3_utils.8.html">sg3_utils</a>(8) manpage.

       <b>-I</b>, <b>--index</b>=<u>IIA</u>
              where  <u>IIA</u> is either an individual index (II) or an Element type abbreviation (A). See the INDEXES
              section below. If the <u>--page=PG</u> option is not given then the Enclosure Status (or  Control)  dpage
              is  assumed.  May be used with the <u>--join</u> option or one of the <u>--clear=STR</u>, <u>--get=STR</u> or <u>--set=STR</u>
              options. To enumerate the available Element type abbreviations use the <u>--enumerate</u> option.

       <b>-I</b>, <b>--index</b>=<u>TIA,II</u>
              where <u>TIA,II</u> is an type header index  (TI)  or  Element  type  abbreviation  (A)  followed  by  an
              individual  index  (II).  See the INDEXES section below. If the <u>--page=PG</u> option is not given then
              the Enclosure Status (or Control) dpage is assumed. May be used with the <u>--join</u> option or  one  of
              the  <u>--clear=STR</u>,  <u>--get=STR</u>  or  <u>--set=STR</u>  options.  To  enumerate  the  available  Element type
              abbreviations use the <u>--enumerate</u> option.

       <b>-X</b>, <b>--inhex</b>=<u>FN</u>
              where <u>FN</u> is a filename. It has the equivalent action of the <u>--data=@FN</u> option. If <u>FN</u> is  '-'  then
              stdin  is  read. This option has been given for compatibility with other utilities in this package
              that use <u>--inhex=FN</u> (or <u>--in=FN</u>) is a similar way. See the "HEX, BINARY AND JSON FORMATS"  section
              in the sg3_utils manpage for more information.

       <b>-i</b>, <b>--inner-hex</b>
              the  outer  levels  of a status dpage are decoded and printed out but the innermost level(s) (e.g.
              the Element Status Descriptor) is output in hex.  For dpages  that  depend  on  the  Configuration
              dpage,  its structure is taken into account with this option, while when the <u>--no-config</u> option is
              used, its structure is ignored. Can be used with an indexing option and/or  <u>--join</u>  options.  This
              option is mainly for debugging.
              This  option  may  also  be  used with the <u>--json[=JO]</u> option to lessen the decoding dependency on
              other dpages. This option may be used twice in this context.  See  the  JSON  INFORMATION  section
              below.
              The  <u>--hex</u>  option  may be given with this option to control whether ASCII appears to the right of
              each hex line of bytes, or not. Without a <u>--hex</u> option, ASCII appears to the  right  of  each  hex
              line of bytes; if the <u>--hex</u> option appear once, no ASCII rendering appears.

       <b>-j</b>, <b>--join</b>
              group elements from the Element Descriptor, Enclosure Status and Additional Element Status dpages.
              If  this  option  is  given  twice then elements from the Threshold In dpage are also grouped. The
              order is dictated by the Configuration dpage but that dpage is not explicitly shown.
              There can be a bewildering amount of information in the "join" output. The default  is  to  output
              everything.  Several  additional  options  are  provided  to cut down the amount displayed. If the
              indexing options is given, only the matching elements and their associated fields are output.  The
              <u>--filter</u>  option  (see  its  description)  can  be  added  to  reduce  the amount of output.  Also
              "--page=aes" (or "-p 0xa") can be added to suppress the output of rows that  don't  have  a  "aes"
              dpage  component. See the INDEXES and DESCRIPTOR NAME, DEVICE SLOT NUMBER AND SAS ADDRESS sections
              below.
              This option implies the <u>--status</u> option. Giving the <u>--control</u> option with this option is an error.

       <b>-J</b>[=<u>JO</u>], <b>--json</b>[=<u>JO</u>]
              output is in JSON format instead of plain text form. Note that arguments to  the  short  and  long
              form  are  themselves optional and if present start with "=" and no whitespace is permitted around
              that "=".
              See sg3_utils_json manpage or use '?' for <u>JO</u> to get a  summary.   For  more  specific  information
              about JSON output with this utility, see the JSON INFORMATION section below.

       <b>-Q</b>, <b>--js-file</b>=<u>JFN</u>
              output  is  in  JSON  format  and  it  is sent to a file named <u>JFN</u>. If that file exists then it is
              truncated. By default, the JSON output is sent to stdout.
              When this option is given,  the  <u>--json[=JO]</u>  option  is  implied  and  need  not  be  given.  The
              <u>--json[=JO]</u> option may still be needed to set the <u>JO</u> parameter to non-default values.

       <b>-l</b>, <b>--list</b>
              This option is equivalent to <u>--enumerate</u>. See that option.

       <b>-M</b>, <b>--mask</b>
              When  modifying  elements,  the  default action is a read (status element), mask, modify (based on
              <u>--clear=STR</u> or <u>--set=STR</u>) then write back as the control element. The mask step is new  in  sg_ses
              version  1.98 and is based on what is allowable (and in the same location) in draft SES-3 revision
              6. Those masks may evolve, as they have in the past. This option re-instates  the  previous  logic
              which was to ignore the mask step. The default action (i.e. without this option) is to perform the
              mask step in the read-mask-modify-write sequence.

       <b>-m</b>, <b>--maxlen</b>=<u>LEN</u>
              <u>LEN</u>  is placed in the ALLOCATION LENGTH field of the SCSI RECEIVE DIAGNOSTIC RESULTS commands sent
              by the utility. It represents the maximum size of data the SES device can return  (in  bytes).  It
              cannot  exceed  65535  and defaults to 65532 (bytes). Some systems may not permit such large sizes
              hence the need for this option. If <u>LEN</u> is less than 0 or greater  than  65535  then  an  error  is
              generated.  If  <u>LEN</u> is 0 then the default value is used, otherwise if it is less than 4 then it is
              ignored (and a warning is sent to stderr).

       <b>-n</b>, <b>--nickname</b>=<u>SEN</u>
              where <u>SEN</u> is the new Subenclosure Nickname. Only the first 32 characters (bytes) of <u>SEN</u> are  used,
              if more are given they are ignored. See the SETTING SUBENCLOSURE NICKNAME section below.

       <b>-N</b>, <b>--nickid</b>=<u>SEID</u>
              where  <u>SEID</u> is the Subenclosure identifier that the new Nickname (<u>SEN</u>) will be applied to. So <u>SEID</u>
              must be an existing Subenclosure identifier. The default value is 0 which is the main enclosure.

       <b>-F</b>, <b>--no-config</b>
              the Element status, Array status (obsolete), Element Descriptor,  Additional  element  status  and
              Threshold  In  dpages  all depend on the Configuration dpage for decoding. For debugging purposes,
              when there is something wrong with the relationship between these dpages, it may be useful to look
              at those pages without using the configuration dpage. That is what this option does. Those  dpages
              still  have some structure that can be output without the Configuration dpage, but the inner parts
              are typically output in hex when this option is given. This option  is  somewhat  related  to  the
              <u>--inner-hex</u> option which is also useful for debugging.
              This  option  is  ignored  on  dpages  that don't depend on the Configuration dpage, including the
              Configuration dpage itself.

       <b>-y</b>, <b>--no-time</b>
              this utility now issues a SCSI REPORT TIMESTAMP command just after an INQUIRY command at the start
              of its execution. This enables the utility to output a date-time stamp or an uptime duration.  The
              time  value  returned  is  in illiseconds from some epoch. If the value corresponds to a period of
              less than 3 years then it is considered to be an uptime duration and is  output  in  days,  hours,
              minutes,  seconds and milliseconds. Unix systems including Linux, FreeBSD and Solaris use 00:00 on
              1st January 1970 UTC as their epoch. The date-time stamp output is in RFC 2822 date format on  two
              adjacent lines, one in UTC and the other in local time.
              If  for  some  reason calling the REPORT TIMESTAMP command causes a problem, then this option will
              disable this feature.
              Note that the time returned is from the enclosure, not the machine that the  utility  is  executed
              from.  This  utility  can use modern SCSI disks as the <u>DEVICE</u> to fetch that disk't timestamp; this
              utility will then find thet the <u>DEVICE</u> is not an enclosure and exit without doing any harm.

       <b>-p</b>, <b>--page</b>=<u>PG</u>
              where <u>PG</u> is a dpage abbreviation or code (a number). If <u>PG</u> starts with a digit it is assumed to be
              in decimal unless prefixed by 0x for hex. Valid range is 0 to 255 (0x0 to 0xff) inclusive. Default
              is dpage 'sdp' which is page_code 0 (i.e. "Supported Diagnostic Pages") if no  other  options  are
              given.
              Page  code  0xff or abbreviation "all" is not a real dpage (as the highest real dpage is 0x3f) but
              instead causes all SES dpages whose page code is 0x2f or less to be output. This can be used  with
              either  the  <u>-HHHH</u> or <u>-rr</u> to send either hexadecimal ASCII or binary respectively to stdout. If an
              error is detected fetching or decoding a diagnostic page it is noted, the rest of  the  pages  are
              processed  then  the  deferred  error is reported in the exit status. If the <u>--warn</u> option is also
              given then <u>--page=all</u> will exit immediately when an error is detected.
              To list the available dpage abbreviations give "xxx" for <u>PG</u>; the  same  information  can  also  be
              found with the <u>--enumerate</u> option.

       <b>-q</b>, <b>--quiet</b>
              this  suppresses  the  number  of  warnings and messages output. The exit status of the utility is
              unaffected by this option.

       <b>-r</b>, <b>--raw</b>
              outputs the chosen status dpage in ASCII hex in a format suitable for a later invocation using the
              <u>--data=</u> option. A dpage less its first 4 bytes (page code and length) is output. When  used  twice
              (e.g. <u>-rr</u>) the full dpage contents is output in binary to stdout.
              Note that the use of a single <u>--raw</u> option is different from most other utilities in the sg3_utils
              package.
              When  <u>-rr</u>  is  used together with the <u>--data=-</u>, <u>--data=@FN</u>, or <u>--inhex=FN</u> then stdin or file FN is
              decoded as a binary stream that continues to be read until an end of file (EOF). Once that data is
              read then the internal raw option is cleared to 0 so the output is not effected. So the <u>-rr</u> option
              either changes how the input or output is treated, but not both in a single invocation.

       <b>-R</b>, <b>--readonly</b>
              open the <u>DEVICE</u> read-only (e.g. in Unix with the O_RDONLY  flag).   The  default  is  to  open  it
              read-write.

       <b>-A</b>, <b>--sas-addr</b>=<u>SA</u>
              this  is an indexing method for SAS end devices (e.g. SAS disks). The utility will try to find the
              element or slot in the Additional Element Status dpage whose SAS address matches  <u>SA</u>.  For  a  SAS
              disk or tape that SAS address is its target port identifier for the port connected to that element
              or slot.  Most SAS disks and tapes have two such target ports, usually numbered consecutively.
              SATA  devices  in  a SAS enclosure often receive "manufactured" target port identifiers from a SAS
              expander; typically will have a SAS address close to, but different from, the SAS address  of  the
              expander  itself.  Note  that  this  manufactured  target port identifier is different from a SATA
              disk's WWN.
              <u>SA</u> is a hex number that is up to 8 digits long. It may have a leading '0x' or '0X' or  a  trailing
              'h'  or 'H'. This option is a medium level indexing alternative to the low level <u>--index=</u> options.
              See the DESCRIPTOR NAME, DEVICE SLOT NUMBER AND SAS ADDRESS section below.

       <b>-S</b>, <b>--set</b>=<u>STR</u>
              Used to set an element field in the Enclosure Control  or  Threshold  Out  dpage.   Must  be  used
              together  with an indexing option to specify which element is to be changed. The Enclosure Control
              dpage is assumed if the <u>--page=PG</u> option is not given. See the STR  FORMAT  and  CLEAR,  GET,  SET
              sections below.

       <b>-s</b>, <b>--status</b>
              will  fetch  dpage  from  the  <u>DEVICE</u>  via  a  SCSI  RECEIVE  DIAGNOSTIC  RESULTS command (or from
              <u>--data=@FN</u>). In the absence of other options that imply modifying  a  dpage  (e.g.   <u>--control</u>  or
              <u>--set=STR</u>)  then  <u>--status</u>  is assumed, except when the <u>--data=</u> option is given.  When the <u>--data=</u>
              option is given there is no default action: either the <u>--control</u> or this option must be  given  to
              distinguish between the two different ways that data will be treated.

       <b>-v</b>, <b>--verbose</b>
              increase  the  level of verbosity. For example when this option is given four times (in which case
              the short form is more convenient: '-vvvv') then if the internal join  array  has  been  generated
              then it is output to stderr in a form suitable for debugging.

       <b>-V</b>, <b>--version</b>
              print the version string and then exit.

       <b>-w</b>, <b>--warn</b>
              warn  about  certain  irregularities with warnings sent to stderr. The join is a complex operation
              that requires fields from several dpages to be synchronized.  The quality of SES devices vary  and
              to  be  fair,  the descriptions from T10 drafts and standards have been tweaked several times (see
              the EIIOE field) in order to clear up confusion.
              This option will cause fetching all dpages with the <u>--page=all</u> option to exit immediately when  an
              error is detected.

</pre><h4><b>INDEXES</b></h4><pre>
       An  enclosure  can  have information about its disk and tape drives plus other supporting components like
       power supplies spread across several dpages.  Addressing  a  specific  element  (overall  or  individual)
       within  a dpage is complicated. This section describes low level indexing (i.e. choosing a single element
       (or a group of related elements) from a large  number  of  elements).  If  available,  the  medium  level
       indexing  described  in the following section (DESCRIPTOR NAME, DEVICE SLOT NUMBER AND SAS ADDRESS) might
       be simpler to use.

       The Configuration dpage is key to low level indexing: it contains a list of "type headers", each of which
       contains an Element type (e.g.  Array  Device  Slot),  a  Subenclosure  identifier  (0  for  the  primary
       enclosure)  and  a "Number of possible elements". Corresponding to each type header, the Enclosure Status
       dpage has one "overall" element plus "Number of possible elements" individual elements all of which  have
       the  given  Element  type.  For  some  Element  types  the "Number of possible elements" will be 0 so the
       Enclosure Status dpage has only one "overall" element corresponding to  that  type  header.  The  Element
       Descriptor  dpage  and the Threshold (In and Out) dpages follow a similar pattern as the Enclosure Status
       dpage.

       The numeric index corresponding to the overall element is "-1". If the Configuration  dpage  indicates  a
       particular element type has "n" elements then its indexes range from -1 to n-1 .

       The  Additional  Element  Status  dpage is a bit more complicated. It has entries for "Number of possible
       elements" of certain Element types. It does not have entries corresponding to the "overall" elements.  To
       make  the  correspondence  a little clearer each descriptor in this dpage optionally contains an "Element
       Index Present" (EIP) indicator. If EIP is set then each element's "Element Index"  field  refers  to  the
       position of the corresponding element in the Enclosure Status dpage.

       Addressing  a  single overall element or a single individual element is done with two indexes: TI and II.
       TI=0 corresponds to the first type header entry which must be a Device Slot or Array Device Slot  Element
       type  (according  to the SES-2 standard). To address the corresponding overall instance, II is set to -1,
       otherwise II can be set to the individual instance index. As an alternative  to  the  type  header  index
       (TI), an Element type abbreviation (A) (e.g. "ps" for Power Supply Element type) optionally followed by a
       number  (e.g.  "ps"  refers  to  the  first Power Supply Element type; "ps1" refers to the second) can be
       given.

       One of two command lines variants can be used to specify indexes: <u>--index=TIA,II</u> where <u>TIA</u> is  either  an
       type  header  index  (TI)  or  an  Element  type  abbreviation  (A) (e.g. "ps" or "ps1"). <u>II</u> is either an
       individual index or "-1" to specify the overall element. The second variant is <u>--index=IIA</u> where  <u>IIA</u>  is
       either an individual index (II) or an Element type abbreviation (A). When <u>IIA</u> is an individual index then
       the  option  is  equivalent  to <u>--index=0,II</u>. When <u>IIA</u> is an Element type abbreviation then the option is
       equivalent to <u>--index=A,-1</u>.

       Wherever an individual index is applicable, it can be replaced by an individual index range. It  has  the
       form:  &lt;first_ii&gt;:&lt;last_ii&gt;. For example: '3:5' will select individual indexes 3, 4 and 5 . Note that the
       range -1:255 represents all possible elements of an element type and is not an error, only those  element
       that  exist  will  be  selected.  Previously  '-'  was used as an index range separator but that leads to
       awkward syntax like -1-1 for indexes: -1 (overall element), 0 and 1 (individual elements).

       To cope with vendor specific Element types (whose type codes should be in  the  range  128  to  255)  the
       Element  type  code can be given as a number with a leading underscore. For example these are equivalent:
       <u>--index=arr</u> and <u>--index=_23</u> since the Array Device Slot Element type code is 23.   Also  <u>--index=ps1</u>  and
       <u>--index=_2_1</u> are equivalent.

       Another  example:  if  the first type header in the Configuration dpage has has Array Device Slot Element
       type then <u>--index=0,-1</u> is equivalent to <u>--index=arr</u>. Also <u>--index=arr,3</u> is equivalent to <u>--index=3</u>.

       The <u>--index=</u> option is used to reduce the amount of output (e.g. only showing the element associated with
       the second 12 volt power supply). It may also be used together with with the <u>--clear=STR</u>,  <u>--get=STR</u>  and
       <u>--set=STR</u> options which are described in the STR section below.

</pre><h4><b>DESCRIPTOR</b> <b>NAME,</b> <b>DEVICE</b> <b>SLOT</b> <b>NUMBER</b> <b>AND</b> <b>SAS</b> <b>ADDRESS</b></h4><pre>
       The  three options: <u>--descriptor=DES</u>, <u>--dev-slot-num=SN</u> and <u>--sas-addr=SA</u> allow medium level indexing, as
       an alternative to the low level <u>--index=</u> option. Only one  of  the  three  options  can  be  used  in  an
       invocation.  When  either of these three option is used a join operation is performed (but not displayed)
       before element selection takes place.

       These medium level indexing options need support from the SES device and that support  is  optional.  For
       example  the  <u>--descriptor=DES</u> needs the Element Descriptor dpage provided by the SES device however that
       is optional.  Also the provided descriptor names need to be useful, and having descriptor names which are
       all "0" is not very useful. Also some elements (e.g. overall elements) may not have descriptor names.

       These medium level indexing options can be used to reduce the amount of output  (e.g.  only  showing  the
       elements  related  to  device  slot number 3).  They may also be used together with with the <u>--clear=STR</u>,
       <u>--get=STR</u> and <u>--set=STR</u> options which are described in the following section. Note that even if  a  field
       can  be  set  (e.g. "do not remove" (dnr)) and that field can be read back with <u>--get=STR</u> confirming that
       change, the disk array may still ignore it (e.g. because it does not have the mechanism to lock the  disk
       drawer).

</pre><h4><b>STR</b> <b>FORMAT</b></h4><pre>
       The  <u>STR</u>  operands of the <u>--clear=STR</u>, <u>--get=STR</u> and <u>--set=STR</u> options all have the same structure. There
       are two forms:

             &lt;acronym&gt;[=&lt;value&gt;]
             &lt;start_byte&gt;:&lt;start_bit&gt;[:&lt;num_bits&gt;][=&lt;value&gt;]

       The &lt;acronym&gt; is one of a list of common fields (e.g. "ident" and  "fault")  that  the  utility  converts
       internally into the second form. The &lt;start_byte&gt; is usually in the range 0 to 3, the &lt;start_bit&gt; must be
       in  the  range 0 to 7 and the &lt;num_bits&gt; must be in the range 1 to 64 (default 1). The number of bits are
       read in the left to right sense of the element tables shown in  the  various  SES  draft  documents.  For
       example  the  8  bits of byte 2 would be represented as 2:7:8 with the most significant bit being 2:7 and
       the least significant bit being 2:0 .

       The &lt;value&gt; is optional but is ignored if provided to <u>--get=STR</u>.  For <u>--set=STR</u> the default &lt;value&gt; is  1
       while  for  <u>--clear=STR</u> the default value is 0 . &lt;value&gt; is assumed to be decimal, hexadecimal values can
       be given in the normal fashion.

       The supported list of &lt;acronym&gt;s can be viewed by using the <u>--enumerate</u> option twice (or "-ee").

</pre><h4><b>CLEAR,</b> <b>GET,</b> <b>SET</b></h4><pre>
       The <u>--clear=STR</u>, <u>--get=STR</u> and <u>--set=STR</u> options can be used up to 8 times in the  same  invocation.  Any
       &lt;acronym&gt;s used in the <u>STR</u> operands must refer to the same dpage.

       When  multiple of these options are used (maximum: 8), they are applied in the order in which they appear
       on the command line. So if options contradict each other, the last one appearing on the command line will
       be enforced. When there are multiple <u>--clear=STR</u> and <u>--set=STR</u> options, then the dpage they refer  to  is
       only written after the last one.

</pre><h4><b>DATA</b> <b>SUPPLIED</b></h4><pre>
       This section describes the two scenarios that can occur when the <u>--data=</u> option is given. These scenarios
       are  the  same irrespective of whether the argument to the <u>--data=</u> option is a string of hex bytes on the
       command line, stdin (indicated by <u>--data=-</u>) or names a file (e.g. <u>--data=@thresh_in_dpage.hex</u>).

       The first scenario is flagged by the <u>--control</u> option. It uses the supplied data  to  build  a  'control'
       dpage  that  will  be  sent to the <u>DEVICE</u> using the SCSI SCSI SEND DIAGNOSTIC command. The supplied dpage
       data should not include its first 4 bytes. Those 4 bytes are added by this utility  using  the  <u>--page=PG</u>
       option  with  <u>PG</u> placed at byte offset 0). If needed, the <u>--byte1=B1</u> option sets byte offset 1, else 0 is
       placed in that position. The number of bytes decoded from the data provided (i.e. its length)  goes  into
       byte offsets 2 and 3.

       The  second  scenario  is  flagged  by  the  <u>--status</u> option (or the absence of the <u>--control</u> option). It
       decodes the supplied data assuming that it represents the response to one or more SCSI RECEIVE DIAGNOSTIC
       RESULTS commands. Those responses have typically been captured from some earlier  invocation(s)  of  this
       utility. Those earlier invocations could use the '-HHH' or '-HHHH' option and file redirection to capture
       that response (or responses) in hexadecimal. The supplied dpage response data is decoded according to the
       other  command line options. For example the <u>--join</u> option could be given and that would require the data
       from multiple dpages typically:  Configuration,  Enclosure  status,  Element  descriptor  and  Additional
       element status dpages. If in doubt use <u>--page=all</u> in the capture phase; having more dpages than needed is
       not a problem.

       By  default  the  user  supplied  data  is assumed to be ASCII hexadecimal in lines that don't exceed 512
       characters. Anything on a line from and including a hash mark ('#') to the end of line is ignored. An end
       of line can be a LF or CR,LF and blank lines are ignored. Each separated  pair  (or  single)  hexadecimal
       digits  represent  a byte (and neither a leading '0x' nor a trailing 'h' should be given). Separators are
       either space, tab, comma or end of line.

       Alternatively binary can be used and this is flagged by the '-rr' option.  The <u>--data=H,H...</u> form  cannot
       use binary values for the 'H's, only ASCII hexadecimal. The other two forms (<u>--data=-</u> and <u>--data=@FN</u>) may
       contain  binary  data.  Note  that when the '-rr' option is used with <u>--data=@FN</u> that it only changes the
       interpretation of the input data, it does not change the decoding and output representation.

</pre><h4><b>CHANGING</b> <b>STATE</b></h4><pre>
       This utility has various techniques for changing the state of a SES  device.   As  noted  above  this  is
       typically a read-modify-write type operation.  Most modifiable dpages have a "status" (or "in") page that
       can  be read, and a corresponding "control" (or "out") dpage that can be written back to change the state
       of the enclosure.

       The lower level technique provided by this utility involves outputting  a  "status"  dpage  in  hex  with
       <u>--raw</u>.  Then  a  text editor can be used to edit the hex (note: to change an Enclosure Control descriptor
       the SELECT bit needs to be set). Next the control dpage data can fed back with the  <u>--data=H,H...</u>  option
       together with the <u>--control</u> option; the <u>--byte1=B1</u> option may need to be given as well.

       Changes  to the Enclosure Control dpage (and the Threshold Out dpage) can be done at a higher level. This
       involves choosing a dpage (the default in this case is the  Enclosure  Control  dpage).  Next  choose  an
       individual  or  overall  element  index  (or  name  it with its Element Descriptor string). Then give the
       element's name (e.g. "ident" for RQST IDENT) or its position within that element (e.g. in an Array Device
       Slot Control element RQST IDENT is byte 2, bit 1 and 1 bit long ("2:1:1")). Finally a value can be given,
       if not the value for <u>--set=STR</u> defaults to 1 and for <u>--clear=STR</u> defaults to 0.

</pre><h4><b>SETTING</b> <b>SUBENCLOSURE</b> <b>NICKNAME</b></h4><pre>
       The format of the Subenclosure Nickname control dpage is different from its corresponding  status  dpage.
       The status dpage reports all Subenclosure Nicknames (and Subenclosure identifier 0 is the main enclosure)
       while  the  control  dpage  allows  only  one  of  them  to be changed. Therefore using the <b>--data</b> option
       technique to change a Subenclosure nickname is difficult (but still possible).

       To simplify changing a Subenclosure nickname the  <u>--nickname=SEN</u>  and  <u>--nickid=SEID</u>  options  have  been
       added.  If the <u>SEN</u> string contains spaces or other punctuation, it should be quoted: surrounded by single
       or double quotes (or the offending characters  escaped).  If  the  <u>--nickid=SEID</u>  is  not  given  then  a
       Subenclosure  identifier  of  0  is  assumed.  As a guard the <u>--control</u> option must also be given. If the
       <u>--page=PG</u> option is not given then <u>--page=snic</u> is assumed.

       When <u>--nickname=SEN</u> is given then the Subenclosure Nickname Status dpage is read to obtain the Generation
       Code field. That Generation Code together with no more than 32 bytes from  the  Nickname  (<u>SEN</u>)  and  the
       Subenclosure Identifier (<u>SEID</u>) are written to the Subenclosure Nickname Control dpage.

       There is an example of changing a nickname in the EXAMPLES section below.

</pre><h4><b>NVME</b> <b>ENCLOSURES</b></h4><pre>
       Support  has been added to sg_ses (actually, its underlying library) for NVMe (also known as NVM Express)
       Enclosures. It can be considered experimental in sg3_utils package version 1.43 and sg_ses version 2.34 .

       This support is based on a decision by NVME-MI (Management Interface) developers  to  support  the  SES-3
       standard.  This  was  facilitated  by  adding NVME-MI SES Send and SES Receive commands that tunnel dpage
       contents as used by SES.

</pre><h4><b>JSON</b> <b>INFORMATION</b></h4><pre>
       The approach taken with JSON output (i.e. when the <u>--json[=JO]</u> option is given) is to  output  diagnostic
       page  information  unless  the  <u>--join</u> option is given. A problem specific to SES is that many diagnostic
       pages depend on other diagnostic pages (e.g. decoding the Enclosure Status  and  the  Element  Descriptor
       dpages both depend on the Configuration dpage).

       When  the  <u>--json[=JO]</u>  and  <u>--page=PG</u>  options  are  used  in  the  same  invocation, then if <u>PG</u> has any
       dependencies on other diagnostic pages, then those other pages  are  fetched.  For  example  the  Element
       Descriptor  dpage  depends on the Configuration dpage. In some cases (e.g. dpages misconfigured or in the
       process of being changed) it may be useful to decode whatever is possible, without fetching other dpages.
       The <u>--inner-hex</u> option may be used for this. Some dpages (e.g.  Enclosure Status dpage) cannot be decoded
       at all, without fetching the Configuration dpage, so each 4 byte element will be output in  hex.  In  the
       case of the Element Descriptor dpage, the descriptors may be output in ASCII and are when the <u>--inner-hex</u>
       option  is  given  once. If the <u>--inner-hex</u> option is given twice, then each descriptor will be output in
       hex.

       When the <u>--json[=JO]</u> and <u>--page=PG</u> options are used in the same invocation, then  the  top  level  object
       name is the name of <u>PG</u> in snake notation. This includes the "_diagnostic_page" suffix.

       When  the  <u>--json[=JO]</u>  and  <u>--join</u>  options are used in the same invocation (and the <u>--page=PG</u> option is
       _not_ given), then the top level object name is "join_of_diagnostic_pages" which contain a  (JSON)  array
       named  "element_list".  Each  element  in  that  array  starts  with  an "element_type" field followed by
       "descriptor" and "element_number" fields. The "descriptor" field's value is a string. All  elements  with
       the   same   "element_type"  are  grouped  together  starting  with  the  "overall_element"  first.   The
       "overall_element" has an "element_number" value of -1. Individual elements of the same "element_type" are
       in the following "element_list" array elements start with an  "element_number"  value  of  0.  After  the
       "element_number"  field  there  is  a  "overall"  field  with  an integer value of 0 (for an "individual"
       element) or a value of 1 (for "overall" element).  To reinforce that point there is a "individual"  field
       with  a  boolean  value  of  true  (for  an "individual" element) or false. Next there is an object named
       "status_descriptor" that contains the corresponding "Enclosure Status" dpage's Enclosure status  element.
       As  required,  the  corresponding  Additional  element  status,  Element  descriptor by type element, and
       Threshold status descriptors may also appear.

       The plain text output (which is output by default) tends to trim output when a line of element values are
       all 0. On the other hand when JSON output is chosen, all  fields,  that  meet  the  requirements  of  the
       command line options, are output.

</pre><h4><b>NOTES</b></h4><pre>
       This  utility  can  be  used  to  fetch  arbitrary  (i.e. non SES) dpages (using the SCSI READ DIAGNOSTIC
       command). To this end the <u>--page=PG</u> and <u>--hex</u> options would be appropriate. Non-SES dpages can be sent to
       a device with the sg_senddiag utility.

       The most troublesome part of the join operation is  associating  Additional  Element  Status  descriptors
       correctly.  At  least  one SES device vendor has misinterpreted the SES-2 standard, specifically with its
       "element index" field interpretation. The code in this utility interprets the "element  index"  field  as
       per  the  SES-2 standard and if that yields an inappropriate Element type, adjusts its indexing to follow
       that vendor's misinterpretation. The SES-3 drafts have  introduced  the  EIIOE  (Element  Index  Includes
       Overall  Elements)  bit  which  later became a 2 bit field to resolve this ambiguity. See the <u>--eiioe=A_F</u>
       option.

       In draft SES-3 revision 5 the "Door Lock" element name was changed to the "Door" (and an OPEN  field  was
       added to the status element). As a consequence the former 'dl' element type abbreviation has been changed
       to 'do'.

       Some  RAID  controllers  hide SES device nodes from the host Operating System.  It has been reported that
       some MegaRAID controllers do this and the following command is needed to expose them:

          perccli /cx set backplane expose=&lt;on/off&gt;

       where perccli is Dell's version of BroadCom's (LSI) storcli utility.

       There is a related command set called SAF-TE  (SCSI  attached  fault-tolerant  enclosure)  for  enclosure
       (including  RAID)  status  and  control.  SCSI  devices that support SAF-TE report "Processor" peripheral
       device type (0x3)  in  their  INQUIRY  response.  See  the  sg_safte  utility  in  this  package  or  the
       safte-monitor utility on the Internet.

       The  internal  join  array is statically allocated and its size is controlled by the MX_JOIN_ROWS define.
       Its current value is 520.

</pre><h4><b>EXAMPLES</b></h4><pre>
       Examples can also be found at https://sg.danny.cz/sg/sg_ses.html

       The following examples use Linux device names. For suitable device names  in  other  supported  Operating
       Systems see the <a href="../man8/sg3_utils.8.html">sg3_utils</a>(8) man page.

       To view the supported dpages:

          sg_ses /dev/bsg/6:0:2:0

       To view the Configuration Diagnostic dpage:

          sg_ses --page=cf /dev/bsg/6:0:2:0

       To view the Enclosure Status dpage:

          sg_ses --page=es /dev/bsg/6:0:2:0

       To  get  the  (attached)  SAS address of that device (which is held in the Additional Element Sense dpage
       (dpage 10)) printed on hex:

          sg_ses -p aes -D ArrayDevice07 -G at_sas_addr -H /dev/sg3

       To collate the information in the Enclosure Status, Element  Descriptor  and  Additional  Element  Status
       dpages the <u>--join</u> option can be used:

          sg_ses --join /dev/sg3

       This  will  produce  a  lot  of  output.  To filter out lines that don't contain much information add the
       <u>--filter</u> option:

          sg_ses --join --filter /dev/sg3

       Fields in the various elements of the Enclosure Control and Threshold dpages  can  be  changed  with  the
       <u>--clear=STR</u> and <u>--set=STR</u> options. [All modifiable dpages can be changed with the <u>--raw</u> and <u>--data=H,H...</u>
       options.]  The  following  example  looks  at  making  the  "ident"  LED  (also called "locate") flash on
       "ArrayDevice07" which is a disk (or more precisely the carrier drawer the disk is in):

          sg_ses --index=7 --set=2:1:1 /dev/sg3

       In the above invocation, the --set= option implies --control so the latter does not need to be given. The
       same applies to --clear=. On the other hand the --get= option implies --status .
       If the Element Descriptor diagnostic dpage shows that "ArrayDevice07" is the descriptor  name  associated
       with element index 7 then this invocation is equivalent to the previous one:

          sg_ses --descriptor=ArrayDevice07 --set=2:1:1 /dev/sg3

       Further  the  byte  2, bit 1 (for 1 bit) field in the Array Device Slot Control element is RQST IDENT for
       asking a disk carrier to flash a LED so it can be located. In this case "ident" (or "locate") is accepted
       as an acronym for that field:

          sg_ses --descriptor=ArrayDevice07 --set=ident /dev/sg3

       To stop that LED flashing:

          sg_ses --dev-slot-num=7 --clear=ident /dev/sg3

       The above assumes the descriptor name 'ArrayDevice07' corresponds to device slot number 7.

       Now for an example of a more general but lower level  technique  for  changing  a  modifiable  diagnostic
       dpage.  The  String  (In  and  Out)  diagnostics  dpage is relatively simple (compared with the Enclosure
       Status/Control dpage). However the use of this lower level technique is awkward  involving  three  steps:
       read, modify then write. First check the current String (In) dpage contents:

          sg_ses --page=str /dev/bsg/6:0:2:0

       Now  the  "read"  step.  The  following  command  will send the contents of the String dpage (from byte 4
       onwards) to stdout. The output will be in ASCII hex with pairs of hex  digits  representing  a  byte,  16
       pairs per line, space separated. The redirection puts stdout in a file called "t":

          sg_ses --page=str --raw /dev/bsg/6:0:2:0 &gt; t

       Then  with  the  aid  of  the  SES-3 document (in revision 3: section 6.1.6) use your favourite editor to
       change t. The changes can be sent to the device with:

          sg_ses --page=str --control --data=- /dev/bsg/6:0:2:0 &lt; t

       If the above is successful, the String dpage should have been changed. To check try:

          sg_ses --page=str /dev/bsg/6:0:2:0

       To change the nickname on the main enclosure:

          sg_ses --nickname='1st enclosure' --control /dev/bsg/6:0:2:0

       To capture the whole state of an enclosure (from a SES perspective) for later analysis, this can be done:

          sg_ses --page=all -HHHH /dev/sg5 &gt; enc_sg5_all.hex

       Note that if there are errors or warnings they will be sent to stderr so they will appear on the  command
       line  (since only stdout is redirected).  A text editor could be used to inspect enc_sg5_all.hex . If all
       looks in order at some later time, potentially on a different  machine  where  enc_sg5_all.hex  has  been
       copied,  a  "join" could be done. Note that join reflects the state of the enclosure when the capture was
       done.

          sg_ses --data=@enc_sg5_all.hex --status --join

       The above invocation can also be expressed as:
          sg_ses --inhex=enc_sg5_all.hex --join

       The --join option implies --status .

</pre><h4><b>EXIT</b> <b>STATUS</b></h4><pre>
       The exit status of sg_ses is 0 when it is successful. Otherwise see the <a href="../man8/sg3_utils.8.html">sg3_utils</a>(8) man page.

</pre><h4><b>AUTHORS</b></h4><pre>
       Written by Douglas Gilbert.

</pre><h4><b>REPORTING</b> <b>BUGS</b></h4><pre>
       Report bugs to &lt;dgilbert at interlog dot com&gt;.

</pre><h4><b>COPYRIGHT</b></h4><pre>
       Copyright  2004-2023 Douglas Gilbert
       This software is  distributed  under  a  BSD-2-Clause  license.  There  is  NO  warranty;  not  even  for
       MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b>sg_inq,</b> <b>sg_safte,</b> <b>sg_senddiag,</b> <b>sg_ses_microcode,</b> <b>sg3_utils</b> <b>(sg3_utils);</b> <b>safte-monitor</b> <b>(Internet)</b>

sg3_utils-1.48                                      June 2023                                          <u><a href="../man8/SG_SES.8.html">SG_SES</a></u>(8)
</pre>
 </div>
</div></section>
</div>
</body>
</html>