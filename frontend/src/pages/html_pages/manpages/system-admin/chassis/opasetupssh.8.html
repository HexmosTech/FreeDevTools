<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>opasetupssh</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/opa-fastfabric">opa-fastfabric_10.10.3.0.11-1ubuntu3_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       opasetupssh

       <b>(Linux</b>  <b>or</b> <b>Switch)</b> Creates SSH keys and configures them on all hosts or chassis so the system can use SSH
       and SCP into all other hosts or chassis without a password prompt. Typically, during cluster  setup  this
       tool  enables  the  root user on the Management Node to log into the other hosts (as root) or chassis (as
       admin) using password-less SSH.

</pre><h4><b>Syntax</b></h4><pre>
       opasetupssh [-C|p|U] [-f  <u>hostfile</u>] [-F  <u>chassisfile</u>] [-h '<u>hosts</u>']

       [-H '<u>chassis</u>'] [-i  <u>ipoib_suffix</u>] [-u  <u>user</u>] [-S] [-R|P]

</pre><h4><b>Options</b></h4><pre>
       --help

                 Produces full help text.

       -C

                 Performs operation against chassis. Default is hosts.

       -p

                 Performs operation against all chassis or hosts in parallel.

       -U

                 Performs connect only (to enter in local hosts, known hosts). When run in  this  mode,  the  -S
                 option is ignored.

       -f <u>hostfile</u>

                 Specifies the file with hosts in cluster.
                 Default is /etc/opa/hosts file.

       -F <u>chassisfile</u>

                 Specifies the file with chassis in cluster.
                 Default is /etc/opa/chassis file.

       -h <u>hosts</u>

                 Specifies the list of hosts to set up.

       -H <u>chassis</u>

                 Specifies the list of chassis to set up.

       -i <u>ipoib_suffix</u>

                 Specifies the suffix to apply to host names to create IPoIB host names. Default is -opa.

       -u <u>user</u>

                 Specifies  the user on remote system to allow this user to SSH to. Default is current user code
                 for host(s) and admin for chassis.

       -S

                 Securely prompts for password for user on remote system.

       -R

                 Skips setup of SSH to local host.

       -P

                 Skips ping of host (for SSH to devices on Internet with ping
                 firewalled).

</pre><h4><b>Examples</b></h4><pre>
</pre><h4><b>Operations</b> <b>on</b> <b>Hosts</b></h4><pre>
       opasetupssh -S -i ''

       opasetupssh -U

       opasetupssh -h 'arwen elrond' -U

       HOSTS='arwen elrond' opasetupssh -U

</pre><h4><b>Operations</b> <b>on</b> <b>Chassis</b></h4><pre>
       opasetupssh -C

       opasetupssh -C -H 'chassis1 chassis2'

       CHASSIS='chassis1 chassis2' opasetupssh -C

</pre><h4><b>Environment</b> <b>Variables</b></h4><pre>
       The following environment variables are also used by this command:

       <b>HOSTS_FILE</b>

                 File containing list of hosts, used in absence of -f and -h.

       <b>CHASSIS_FILE</b>

                 File containing list of chassis, used in absence of -F and -H.

       <b>HOSTS</b>

                 List of hosts, used if -h option not supplied.

       <b>CHASSIS</b>

                 List of chassis, used if -C is used and -H and -F options not supplied.

       <b>FF_MAX_PARALLEL</b>

                 When -p option is used, maximum concurrent operations.

       <b>FF_IPOIB_SUFFIX</b>

                 Suffix to append to hostname to create IPoIB hostname. Used in absence of -i.

       <b>FF_CHASSIS_LOGIN_METHOD</b>

                 How to log into chassis. Can be Telnet or SSH.

       <b>FF_CHASSIS_ADMIN_PASSWORD</b>

                 Password for admin on all chassis. Used in absence of -S option.

</pre><h4><b>Description</b></h4><pre>
       The Intel(R) Omni-Path Fabric Suite FastFabric Toolset provides additional flexibility in the translation
       between IPoIB and management network hostnames.

       opasetupssh provides an easy way to create SSH keys and distribute them to the hosts or  chassis  in  the
       cluster.  Many  of  the FastFabric tools (as well as many versions of MPI) require that SSH is set up for
       password-less operation. Therefore, opasetupssh is an important setup step.

       This tool also sets up SSH to the local host and the local host's IPoIB name. This capability is required
       by selected FastFabric Toolset commands and may be used by some applications (such as MPI).

       opasetupssh has two modes of operation. The mode is selected by the presence or absence of the -U option.
       Typically, opasetupssh is first run without the -U option, then it may later be run with the -U option.

</pre><h4><b>Host</b> <b>Initial</b> <b>Key</b> <b>Exchange</b></h4><pre>
       When run without the -U option, opasetupssh performs the initial key exchange and  enables  password-less
       SSH  and  SCP.  The preferred way to use opasetupssh for initial key exchange is with the -S option. This
       requires that all hosts are configured with the same password for the specified "user" (typically  root).
       In  this  mode,  the password is prompted for once and then SSH and SCP are used in conjunction with that
       password to complete the setup for the hosts. This mode also avoids the need  to  set  up  rsh/rcp/rlogin
       (which can be a security risk).

       opasetupssh  configures  password-less  SSH/SCP for both the management network and IPoIB. Typically, the
       management network is used for FastFabric Toolset operations while  IPoIB  is  used  for  MPI  and  other
       applications.

       During initial cluster installation, where the Intel(R) Omni-Path Fabric software is not yet installed on
       all  the  hosts,  IPoIB  is not yet running. In this situation, use the -i option with an empty string as
       follows:

       opasetupssh -i ''

       This causes the last part of the setup of SSH for IPoIB to be skipped.

</pre><h4><b>Refreshing</b> <b>Local</b> <b>Systems</b> <b>Known</b> <b>Hosts</b></h4><pre>
       If aspects of the host have changed, such as IP  addresses,  MAC  addresses,  software  installation,  or
       server  OS  reinstallation,  you can refresh the local host's SSH known_hosts file by running opasetupssh
       with the -U option. This option does not transfer the keys, but instead connects to each host (management
       network and IPoIB) to refresh the SSH keys. Existing entries for the specified hosts are replaced  within
       the  local  known_hosts  file. When run in this mode, the -S option is ignored. This mode assumes SSH has
       previously been set up for the hosts, as such no files are transferred to  the  specified  hosts  and  no
       passwords should be required.

       Typically  after  completing  the  installation  and  booting  of  Intel(R)  Omni-Path  Fabric  software,
       opasetupssh must be rerun with the -U option to update the known_hosts file.

</pre><h4><b>Chassis</b> <b>Initial</b> <b>Key</b> <b>Exchange</b></h4><pre>
       When run without the -U option, opasetupssh performs the initial key exchange and  enables  password-less
       SSH and SCP. For chassis, the key exchange uses SCP and the chassis CLI. During this command you log into
       the chassis using the configured mechanism for chassis login.

       The  preferred  way to use opasetupssh for initial key exchange is with the -S option. This requires that
       all chassis are configured with the same password for admin. In this  mode,  you  are  prompted  for  the
       password  once and then the <b>FF_CHASSIS_LOGIN_METHOD</b> and SCP are used in conjunction with that password to
       complete the setup for the chassis. This method also avoids the need to setup  the  chassis  password  in
       /etc/opa/opafastfabric.conf (which can be a security risk).

       For chassis, the -i option is ignored.

</pre><h4><b>Chassis</b> <b>Refreshing</b> <b>Local</b> <b>Systems</b> <b>Known</b> <b>Hosts</b></h4><pre>
       If  aspects of the chassis have changed, such as IP addresses or MAC addresses, you can refresh the local
       host's SSH known_hosts file by running opasetupssh with the -U option. This option does not transfer  the
       keys,  but  instead  connects to each chassis to refresh the SSH keys. Existing entries for the specified
       chassis are replaced within the local known_hosts file. When run in this mode, the -S option is  ignored.
       This mode assumes SSH has previously been set up for the chassis, because no files are transferred to the
       specified hosts and no passwords are required.

Copyright(C) 2015-2019                          Intel Corporation                                 <u><a href="../man8/opasetupssh.8.html">opasetupssh</a></u>(8)
</pre>
 </div>
</div></section>
</div>
</body>
</html>