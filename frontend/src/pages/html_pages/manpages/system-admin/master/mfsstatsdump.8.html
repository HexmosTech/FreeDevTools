<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>mfsstatsdump - dump usage data from master stats file in csv or png format</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/moosefs-master">moosefs-master_4.57.5-1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       mfsstatsdump - dump usage data from master stats file in csv or png format

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>mfsstatsdump</b>  <b>-f</b>  <u>fields</u>  [<b>-i</b> <u>stats_file</u>] [<b>-r</b> <u>range</u>] [<b>-s</b> <u>separator</u>] [<b>-p</b> <u>png_filename</u> [<b>-x</b> <u>chart_width</u>] [<b>-y</b>
       <u>chart_height</u>]] [<b>-hHd</b>]

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>mfsstatsdump</b> dumps usage data from master stats file.  These are the same data sets that are used to make
       CGI charts. Output can be either in text format (csv) or in graphical format (png). That means <b>-p</b>, <b>-x</b> and
       <b>-y</b> options are mutually exclusive with <b>-h</b>, <b>-H</b> and <b>-d</b> options.

       MooseFS master server saves the stats file in the <b>DATA_PATH</b> directory - see <b><a href="../man5/mfsmaster.cfg.5.html">mfsmaster.cfg</a></b>(5)

</pre><h4><b>OPTIONS</b></h4><pre>
       <b>-f</b>     field names separated by ',' (see FIELDS section); at least one field is mandatory; if an asterisk
              (*) is used, all fields are dumped

       <b>-i</b>     name of mfs binary stats file (default: <u>default_data_path</u>/stats.mfs)

       <b>-r</b>     range type: 0 - short range (minute) 1 - medium range (6 minutes) 2 - long range (30 minutes) 3  -
              very long range (day)

       <b>-s</b>     specify column separator (default: tabulator)

       <b>-p</b>     optional  PNG  filename (field name will be added before .png; YYYY -&gt; YYYY_FIELD.png, YYYY.png -&gt;
              YYYY_FIELD.png)

       <b>-x</b>     PNG chart width (default: 1600)

       <b>-y</b>     PNG chart height (should be divisible by 20 - if not then it will be adjusted; default:320)

       <b>-h</b>     "human-readable" numbers using base 2 prefixes (IEC 60027)

       <b>-H</b>     "human-readable" numbers using base 10 prefixes (SI)

       <b>-d</b>     show timestamps in YYYY-MM-DD HH:MM format

</pre><h4><b>FIELDS</b></h4><pre>
       ucpu            User cpu usage

       scpu            System cpu usage

       cpu             Total cpu usage (in csv sum of scpu and ucpu, in png shows both in different colors)

       delete          Number of chunk deletions

       replicate       Number of chunk replications

       statfs          Number of statfs operations

       getattr         Number of getattr operations

       setattr         Number of setattr operations

       lookup          Number of lookup operations

       mkdir           Number of mkdir operations

       rmdir           Number of rmdir operations

       symlink         Number of symlink operations

       readlink        Number of readlink operations

       mknod           Number of mknod operations

       unlink          Number of unlink operations

       rename          Number of rename operations

       link            Number of link operations

       readdir         Number of readdir operations

       open            Number of open operations

       read            Number of read operations

       write           Number of write operations

       prcvd           Received packets

       psent           Sent packets

       brcvd           Received bytes

       bsent           Sent bytes

       memoryrss       Resident memory usage

       memoryvirt      Virtual memory usage

       mem             Total memory usage (in csv is the same as memoryvirt, in png  shows  both  memoryrss  and
                       memoryvirt using two colors)

       usedspace       Used raw disk space

       totalspace      Total raw disk space

       space           Total  raw  disk  space  (in  csv the same as totalspace, in png shows both usedspace and
                       totalspace using two colors)

       readchunk       Number of chunk_read operations

       writechunk      Number of chunk_write operations

       create          Number of chunk creation attempts

       change          Number of chunk internal operation attempts

       delete_ok       Number of successful chunk deletions

       delete_err      Number of unsuccessful chunk deletions

       delete_stat     Sum of succesful and unsuccessful chunk  deletions  (in  png  shows  both  delete_ok  and
                       delete_err using two colors)

       replicate_ok    Number of successful chunk replications

       replicate_err   Number of unsuccessful chunk replications

       replicate_stat  Sum  of succesful and unsuccessful chunk replications (in png shows both replicate_ok and
                       replicate_err using two colors)

       create_ok       Number of successful chunk creations

       create_err      Number of unsuccessful chunk creations

       create_stat     Sum of succesful and unsuccessful chunk  creations  (in  png  shows  both  create_ok  and
                       create_err using two colors)

       change_ok       Number of successful chunk internal operations

       change_err      Number of unsuccessful chunk internal operations

       change_stat     Sum  of  succesful and unsuccessfulchunk internal operations (in png shows both change_ok
                       and change_err using two colors)

       split_ok        Number of successful chunk split operations

       split_err       Number of unsuccessful chunk split operations

       split_stat      Sum of succesful and unsuccessful chunk split operations (in png shows both split_ok  and
                       split_err using two colors)

       fileobjects     Number of file objects

       metaobjects     Number of non-file objects (directories,symlinks,etc.)

       objects         Number of all objects (in png shows both fileobjects and metaobjects using two colors)

       chunksec8       Total number of chunks stored in EC8 format

       chunksec4       Total number of chunks stored in EC4 format

       chunkscopy      Total number of chunks stored in COPY format

       chunks          Total  number  of  chunks  stored  in  any  format (in png shows chunksec8, chunksec4 and
                       chunkscopy using three colors)

       chregdanger     Number of endangered chunks (mark for removal excluded)

       chregunder      Number of undergoal chunks (mark for removal excluded)

       regunder        Number of endangered and undergoal chunks  (mark  for  removal  excluded,  in  png  shows
                       chregdanger and chregunder using two colors)

       challdanger     Number of endangered chunks (mark for removal included)

       challunder      Number of undergoal chunks (mark for removal included)

       allunder        Number  of  endangered  and  undergoal  chunks  (mark  for removal included, in png shows
                       challdanger and challunder using two colors)

       bytesread       Average number of bytes read per second by all clients

       byteswrite      Average number of bytes written per second by all clients

       fsync           Number of fsync operations

       lock            Number of lock operations

       snapshot        Number of snapshot operations

       truncate        Number of truncate operations

       getxattr        Number of getxattr operations

       setxattr        Number of setxattr operations

       getfacl         Number of getfacl operations

       setfacl         Number of setfacl operations

       fcreate         Number of file create operations

       meta            Number of extra metadata operations (sclass,trashretention,eattr etc.)

       delay           (pro only) Master max delay in seconds

       servers         Number of all registered chunk servers (both connected and disconnected)

       dservers        Number of all disconnected chunk servers

       mdservers       Number of disconnected chunk servers that are in maintenance mode

       cservers        Number of all registered chunk servers (in csv equals to servers, in png  shows  servers,
                       dservers and mdservers using three different colors)

       udiff           Difference in space usage percent between the most and least used chunk server

</pre><h4><b>OUTPUT</b></h4><pre>
       Text output - text (csv) file where first column is a timestamp (or date if <b>-d</b> option was specified), the
       following  column  are what was specified with the <b>-f</b> options, formatted according to used options (none,
       <b>-s</b> and <b>-h</b> or <b>-H</b>)

       Graphical output - one png file with a chart is created for every field specified  with  the  <b>-f</b>  option,
       according to the naming scheme declared with the <b>-p</b> option. Size may be adjusted with <b>-x</b> and <b>-y</b> options.

</pre><h4><b>NOTES</b></h4><pre>
       Data  sets <b>delete</b> and <b>delete_stat</b> in a properly working system should be roughly the same, but not always
       identical (in their CSV form), this stems from the fact that the  <b>delete</b>  set  is  calculated  using  the
       number  of requests sent by the master, and the <b>delete_stat</b> set is calculated using the number of replies
       received from chunk servers, so local fluctuations may  be  observed  (i.e.  one  minute  has  more  sent
       requests  -  higher  value  in  the  <b>delete</b>  set  and  the next minute has more answers - higher value in
       <b>delete_stat</b> set).  But if one were to calculate the sum of differences between the two  sets  over  time,
       this sum should never grow over a certain number.

       However,  if  there  is some kind of problem (with network communication and/or chunk server process(es))
       and some chunk delete requests are stalled/go missing, then <b>delete</b> values may be constantly  higher  than
       the  <b>delete_stat</b>  values  and  the  sum of differences between the two sets will be steadily growing over
       time.

       Same goes for <b>replicate</b>(_stat), <b>create</b>(_stat), <b>change</b>(_stat) and <b>split</b>(_stat) data sets.

</pre><h4><b>REPORTING</b> <b>BUGS</b></h4><pre>
       Report bugs to &lt;<a href="mailto:bugs@moosefs.com">bugs@moosefs.com</a>&gt;.

</pre><h4><b>COPYRIGHT</b></h4><pre>
       Copyright (C) 2025 Jakub Kruszona-Zawadzki, Saglabs SA

       This file is part of MooseFS.

       MooseFS is free software; you can redistribute it and/or modify it under the terms  of  the  GNU  General
       Public License as published by the Free Software Foundation, version 2 (only).

       MooseFS  is  distributed  in  the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the
       implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR  PURPOSE.  See  the  GNU  General  Public
       License for more details.

       You  should  have  received a copy of the GNU General Public License along with MooseFS; if not, write to
       the Free Software Foundation, Inc., 51 Franklin St, Fifth Floor, Boston,  MA  02111-1301,  USA  or  visit
       <a href="http://www.gnu.org/licenses/gpl-2.0.html">http://www.gnu.org/licenses/gpl-2.0.html</a>

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man8/mfsmount.8.html">mfsmount</a></b>(8), <b><a href="../man7/moosefs.7.html">moosefs</a></b>(7)

MooseFS 4.57.5-1                                  February 2025                                  <u><a href="../man8/mfsstatsdump.8.html">mfsstatsdump</a></u>(8)
</pre>
 </div>
</div></section>
</div>
</body>
</html>