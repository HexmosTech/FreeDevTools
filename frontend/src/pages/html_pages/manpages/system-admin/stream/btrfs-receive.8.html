<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>btrfs-receive - receive subvolumes from send stream</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/btrfs-progs">btrfs-progs_6.14-1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       btrfs-receive - receive subvolumes from send stream

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>btrfs</b> <b>receive</b> [options] &lt;path&gt;

       or

       <b>btrfs</b> <b>receive</b> --dump [options]

</pre><h4><b>DESCRIPTION</b></h4><pre>
       Receive  a stream of changes and replicate one or more subvolumes that were previously generated by <b>btrfs</b>
       <b>send</b>. The received subvolumes are stored to <u>path</u>, unless <u>--dump</u> option is given.

       If <u>--dump</u> option is specified, <b>btrfs</b> <b>receive</b> will only do the validation of the  stream,  and  print  the
       stream metadata, one operation per line.

       <b>btrfs</b> <b>receive</b> will fail in the following cases:

       1. receiving subvolume already exists

       2. previously received subvolume has been changed after it was received

       3. default subvolume has changed or you didn't mount the filesystem at the toplevel subvolume

       A subvolume is made read-only after the receiving process finishes successfully (see BUGS below).

       <b>Options</b>

       <b>-f</b> <u>&lt;FILE&gt;</u>
              read the stream from <u>FILE</u> instead of stdin,

       <b>-C|--chroot</b>
              confine the process to <u>path</u> using <u><a href="../man1/chroot.1.html">chroot</a>(1)</u>

       <b>-e</b>     terminate after receiving an <u>end</u> <u>cmd</u> marker in the stream.

              Without this option the receiver side terminates only in case of an error on end of file.

       <b>-E|--max-errors</b> <b>&lt;NERR&gt;</b>
              terminate as soon as NERR errors occur while stream processing commands from the stream

              Default value is 1. A value of 0 means no limit.

       <b>-m</b> <u>&lt;ROOTMOUNT&gt;</u>
              the root mount point of the destination filesystem

              By  default  the mount point is searched in :<u>file:<a href="file:/proc/self">/proc/self</a></u>/mounts`.  If <b><a href="file:/proc">/proc</a></b> is not accessible,
              e.g. in a chroot environment, use this option to tell us where this filesystem is mounted.

       <b>--force-decompress</b>
              if the stream contains compressed data (see <u>--compressed-data</u> in <u><a href="../man8/btrfs-send.8.html">btrfs-send</a>(8)</u>), always decompress
              it instead of writing it with encoded I/O

       <b>--dump</b> dump the stream metadata, one line per operation

              Does not require the <u>path</u> parameter. The filesystem remains unchanged.  Each stream command is  on
              one  line  in  the  form  of  <u>key=value</u>  and separated by one or more spaces.  Values that contain
              special characters (like paths or extended attributes) are encoded in C-like  way,  e.g.  <u>'\n'</u>  or
              octal  escape  sequence  like  <u>'\NNN'</u> where N is the char value. Same encoding as is used in <u><a href="file:/proc">/proc</a></u>
              files.

       <b>-q|--quiet</b>
              (deprecated) alias for global <u>-q</u> option

       <b>-v</b>     (deprecated) alias for global <u>-v</u> option

       <b>Global</b> <b>options</b>

       <b>-v|--verbose</b>
              increase verbosity about performed actions, print details about each operation

       <b>-q|--quiet</b>
              suppress all messages except errors

</pre><h4><b>BUGS</b></h4><pre>
       <b>btrfs</b> <b>receive</b> sets the subvolume read-only after it completes successfully.  However, while  the  receive
       is  in  progress,  users  who  have  write  access to files or directories in the receiving <u>path</u> can add,
       remove, or modify files, in which case the resulting read-only subvolume will not be an exact copy of the
       sent subvolume.

       If the intention is to create an exact copy, the receiving <u>path</u> should be protected from access by  users
       until the receive operation has completed and the subvolume is set to read-only.

       Additionally, receive does not currently do a very good job of validating that an incremental send stream
       actually  makes  sense, and it is thus possible for a specially crafted send stream to create a subvolume
       with reflinks to arbitrary files in the same filesystem.  Because of this, users are advised to  not  use
       <u>btrfs</u>  <u>receive</u>  on  send streams from untrusted sources, and to protect trusted streams when sending them
       across untrusted networks.

</pre><h4><b>EXIT</b> <b>STATUS</b></h4><pre>
       <b>btrfs</b> <b>receive</b> returns a zero exit status if it succeeds. Non zero is returned in case of failure.

</pre><h4><b>AVAILABILITY</b></h4><pre>
       <b>btrfs</b> is part of btrfs-progs.  Please refer to the documentation at <u>https://btrfs.readthedocs.io</u>.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <u><a href="../man8/btrfs-send.8.html">btrfs-send</a>(8)</u>, <u><a href="../man8/mkfs.btrfs.8.html">mkfs.btrfs</a>(8)</u>

6.14                                              Apr 17, 2025                                  <u><a href="../man8/BTRFS-RECEIVE.8.html">BTRFS-RECEIVE</a></u>(8)
</pre>
 </div>
</div></section>
</div>
</body>
</html>