<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ip-route - routing table management</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/iproute2">iproute2_6.14.0-1ubuntu3_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       ip-route - routing table management

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>ip</b> [ <u>ip-OPTIONS</u> ] <b>route</b>  { <u>COMMAND</u> | <b>help</b> }

       <b>ip</b> <b>route</b> { <b>show</b> | <b>flush</b> } <u>SELECTOR</u>

       <b>ip</b> <b>route</b> <b>save</b> <u>SELECTOR</u>

       <b>ip</b> <b>route</b> <b>restore</b>

       <b>ip</b> <b>route</b> <b>get</b> <u>ROUTE_GET_FLAGS</u> <b>[</b> <b>to</b> <b>]</b> <u>ADDRESS</u> [ <b>from</b> <u>ADDRESS</u> <b>iif</b> <u>STRING</u>  ] [ <b>oif</b> <u>STRING</u> ] [ <b>mark</b> <u>MARK</u> ] [
               <b>tos</b> <u>TOS</u> ] [ <b>vrf</b> <u>NAME</u> ] [ <b>ipproto</b> <u>PROTOCOL</u> ] [ <b>sport</b> <u>NUMBER</u> ] [ <b>dport</b> <u>NUMBER</u> ] [ <b>as</b> <u>ADDRESS</u> ] [
               <b>flowlabel</b> <u>FLOWLABEL</u> ]

       <b>ip</b> <b>route</b> { <b>add</b> | <b>del</b> | <b>change</b> | <b>append</b> | <b>replace</b> } <u>ROUTE</u>

       <u>SELECTOR</u> := [ <b>root</b> <u>PREFIX</u> ] [ <b>match</b> <u>PREFIX</u> ] [ <b>exact</b> <u>PREFIX</u> ] [ <b>table</b> <u>TABLE_ID</u> ] [ <b>vrf</b> <u>NAME</u> ] [ <b>proto</b>
               <u>RTPROTO</u> ] [ <b>type</b> <u>TYPE</u> ] [ <b>scope</b> <u>SCOPE</u> ]

       <u>ROUTE</u> := <u>NODE_SPEC</u> [ <u>INFO_SPEC</u> ]

       <u>NODE_SPEC</u> := [ <u>TYPE</u> ] <u>PREFIX</u> [ <b>tos</b> <u>TOS</u> ] [ <b>table</b> <u>TABLE_ID</u> ] [ <b>proto</b> <u>RTPROTO</u> ] [ <b>scope</b> <u>SCOPE</u> ] [ <b>metric</b>
               <u>METRIC</u> ] [ <b>ttl-propagate</b> { <b>enabled</b> | <b>disabled</b> } ]

       <u>INFO_SPEC</u> := { <u>NH</u> | <b>nhid</b> <u>ID</u> } <u>OPTIONS</u> <u>FLAGS</u> [ <b>nexthop</b> <u>NH</u> ] ...

       <u>NH</u> := [ <b>encap</b> <u>ENCAP</u> ] [ <b>via</b> [ <u>FAMILY</u> ] <u>ADDRESS</u> ] [ <b>dev</b> <u>STRING</u> ] [ <b>weight</b> <u>NUMBER</u> ] <u>NHFLAGS</u>

       <u>FAMILY</u> := [ <b>inet</b> | <b>inet6</b> | <b>mpls</b> | <b>bridge</b> | <b>link</b> ]

       <u>OPTIONS</u> := <u>FLAGS</u> [ <b>mtu</b> <u>NUMBER</u> ] [ <b>advmss</b> <u>NUMBER</u> ] [ <b>as</b> [ <b>to</b> ] <u>ADDRESS</u> ] <b>rtt</b> <u>TIME</u> ] [ <b>rttvar</b> <u>TIME</u> ] [
               <b>reordering</b> <u>NUMBER</u> ] [ <b>window</b> <u>NUMBER</u> ] [ <b>cwnd</b> <u>NUMBER</u> ] [ <b>ssthresh</b> <u>NUMBER</u> ] [ <b>realms</b> <u>REALM</u> ] [
               <b>rto_min</b> <u>TIME</u> ] [ <b>initcwnd</b> <u>NUMBER</u> ] [ <b>initrwnd</b> <u>NUMBER</u> ] [ <b>features</b> <u>FEATURES</u> ] [ <b>quickack</b> <u>BOOL</u> ] [
               <b>congctl</b> <u>NAME</u> ] [ <b>pref</b> <u>PREF</u> ] [ <b>expires</b> <u>TIME</u> ] [ <b>fastopen_no_cookie</b> <u>BOOL</u> ]

       <u>TYPE</u> := [ <b>unicast</b> | <b>local</b> | <b>broadcast</b> | <b>multicast</b> | <b>throw</b> | <b>unreachable</b> | <b>prohibit</b> | <b>blackhole</b> | <b>nat</b> ]

       <u>TABLE_ID</u> := [ <b>local</b>| <b>main</b> | <b>default</b> | <b>all</b> | <u>NUMBER</u> ]

       <u>SCOPE</u> := [ <b>host</b> | <b>link</b> | <b>global</b> | <u>NUMBER</u> ]

       <u>NHFLAGS</u> := [ <b>onlink</b> | <b>pervasive</b> ]

       <u>RTPROTO</u> := [ <b>kernel</b> | <b>boot</b> | <b>static</b> | <u>NUMBER</u> ]

       <u>FEATURES</u> := [ <b>ecn</b> | ]

       <u>PREF</u> := [ <b>low</b> | <b>medium</b> | <b>high</b> ]

       <u>ENCAP</u> := [ <u>ENCAP_MPLS</u> | <u>ENCAP_IP</u> | <u>ENCAP_BPF</u> | <u>ENCAP_SEG6</u> | <u>ENCAP_SEG6LOCAL</u> | <u>ENCAP_IOAM6</u> ]

       <u>ENCAP_MPLS</u> := <b>mpls</b> [ <u>LABEL</u> ] [ <b>ttl</b> <u>TTL</u> ]

       <u>ENCAP_IP</u> := <b>ip</b> <b>id</b> <u>TUNNEL_ID</u> <b>dst</b> <u>REMOTE_IP</u> [ <b>src</b> <u>SRC</u> ] [ <b>tos</b> <u>TOS</u> ] [ <b>ttl</b> <u>TTL</u> ] [ <b>key</b> ] [ <b>csum</b> ] [ <b>seq</b> ] [
               <u>GENEVE_OPTS</u> | <u>VXLAN_OPTS</u> | <u>ERSPAN_OPTS</u> ]

       <u>ENCAP_BPF</u> := <b>bpf</b> [ <b>in</b> <u>PROG</u> ] [ <b>out</b> <u>PROG</u> ] [ <b>xmit</b> <u>PROG</u> ] [ <b>headroom</b> <u>SIZE</u> ]

       <u>ENCAP_SEG6</u> := <b>seg6</b> <b>mode</b> [ <b>encap</b> | <b>encap.red</b> | <b>inline</b> | <b>l2encap</b> | <b>l2encap.red</b> ] <b>segs</b> <u>SEGMENTS</u> [ <b>hmac</b> <u>KEYID</u>
               ]

       <u>ENCAP_SEG6LOCAL</u> := <b>seg6local</b> <b>action</b> <u>SEG6_ACTION</u> [ <u>SEG6_ACTION_PARAM</u> ] [ <b>count</b> ]

       <u>ENCAP_IOAM6</u> := <b>ioam6</b> [ <b>freq</b> <u>K</u>/<u>N</u> ] <b>mode</b> [ <b>inline</b> | <b>encap</b> | <b>auto</b> ] [ <b>tunsrc</b> <u>ADDRESS</u> ] [ <b>tundst</b> <u>ADDRESS</u> ]
               <b>trace</b> <b>prealloc</b> <b>type</b> <u>IOAM6_TRACE_TYPE</u> <b>ns</b> <u>IOAM6_NAMESPACE</u> <b>size</b> <u>IOAM6_TRACE_SIZE</u>

       <u>ROUTE_GET_FLAGS</u> := <u>ROUTE_GET_FLAG</u> [ <u>ROUTE_GET_FLAGS</u> ]

       <u>ROUTE_GET_FLAG</u> := <b>[</b> <b>connected</b> | <b>fibmatch</b> | <b>notify</b> <b>]</b>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>ip</b> <b>route</b> is used to manipulate entries in the kernel routing tables.

       <b>Route</b> <b>types:</b>

               <b>unicast</b> - the route entry describes real paths to the destinations covered by the route prefix.

               <b>unreachable</b> - these destinations are unreachable. Packets are discarded and the ICMP message <u>host</u>
               <u>unreachable</u> is generated.  The local senders get an <u>EHOSTUNREACH</u> error.

               <b>blackhole</b> - these destinations are unreachable. Packets are discarded silently.  The local
               senders get an <u>EINVAL</u> error.

               <b>prohibit</b> - these destinations are unreachable. Packets are discarded and the ICMP message
               <u>communication</u> <u>administratively</u> <u>prohibited</u> is generated. The local senders get an <u>EACCES</u> error.

               <b>local</b> - the destinations are assigned to this host. The packets are looped back and delivered
               locally.

               <b>broadcast</b> - the destinations are broadcast addresses. The packets are sent as link broadcasts.

               <b>throw</b> - a special control route used together with policy rules. If such a route is selected,
               lookup in this table is terminated pretending that no route was found. Without policy routing it
               is equivalent to the absence of the route in the routing table. The packets are dropped and the
               ICMP message <u>net</u> <u>unreachable</u> is generated. The local senders get an <u>ENETUNREACH</u> error.

               <b>nat</b> - a special NAT route. Destinations covered by the prefix are considered to be dummy (or
               external) addresses which require translation to real (or internal) ones before forwarding. The
               addresses to translate to are selected with the attribute <b>via</b>.  <b>Warning:</b> Route NAT is no longer
               supported in Linux 2.6.

               <b>anycast</b> - <u>not</u> <u>implemented</u> the destinations are <u>anycast</u> addresses assigned to this host. They are
               mainly equivalent to <b>local</b> with one difference: such addresses are invalid when used as the
               source address of any packet.

               <b>multicast</b> - a special type used for multicast routing. It is not present in normal routing
               tables.

       <b>Route</b> <b>tables:</b> Linux-2.x can pack routes into several routing tables identified by a number in the range
       from 1 to 2^32-1 or by name from <b>/usr/share/iproute2/rt_tables</b> or <b><a href="file:/etc/iproute2/rt_tables">/etc/iproute2/rt_tables</a></b> (has precedence
       if exists).  By default all normal routes are inserted into the <b>main</b> table (ID 254) and the kernel only
       uses this table when calculating routes.  Values (0, 253, 254, and 255) are reserved for built-in use.

       Actually, one other table always exists, which is invisible but even more important. It is the <b>local</b>
       table (ID 255). This table consists of routes for local and broadcast addresses. The kernel maintains
       this table automatically and the administrator usually need not modify it or even look at it.

       The multiple routing tables enter the game when <u>policy</u> <u>routing</u> is used.

       ip route add
              add new route

       ip route change
              change route

       ip route replace
              change or add new one

              <b>to</b> <u>TYPE</u> <u>PREFIX</u> <b>(default)</b>
                     the  destination  prefix  of the route. If <u>TYPE</u> is omitted, <b>ip</b> assumes type <b>unicast</b>.  Other
                     values of <u>TYPE</u> are listed above.  <u>PREFIX</u> is an IP or IPv6 address optionally followed by  a
                     slash  and  the  prefix  length. If the length of the prefix is missing, <b>ip</b> assumes a full-
                     length host route. There is also a special <u>PREFIX</u> <b>default</b> - which is equivalent to  IP  <b>0/0</b>
                     or to IPv6 <b>::/0</b>.

              <b>tos</b> <u>TOS</u>

              <b>dsfield</b> <u>TOS</u>
                     the  Type  Of  Service  (TOS) key. This key has no associated mask and the longest match is
                     understood as: First, compare the TOS of the route and of  the  packet.  If  they  are  not
                     equal,  then  the  packet  may still match a route with a zero TOS.  <u>TOS</u> is either an 8 bit
                     hexadecimal   number   or   an   identifier    from    <b>/usr/share/iproute2/rt_dsfield</b>    or
                     <b><a href="file:/etc/iproute2/rt_dsfield">/etc/iproute2/rt_dsfield</a></b> (has precedence if exists).

              <b>metric</b> <u>NUMBER</u>

              <b>preference</b> <u>NUMBER</u>
                     the  preference value of the route.  <u>NUMBER</u> is an arbitrary 32bit number, where routes with
                     lower values are preferred.

              <b>table</b> <u>TABLEID</u>
                     the  table  to  add  this  route  to.   <u>TABLEID</u>  may  be  a  number  or   a   string   from
                     <b>/usr/share/iproute2/rt_tables</b>  or  <b><a href="file:/etc/iproute2/rt_tables">/etc/iproute2/rt_tables</a></b>  (has precedence if exists).  If
                     this parameter is omitted, <b>ip</b>  assumes  the  <b>main</b>  table,  with  the  exception  of  <b>local</b>,
                     <b>broadcast</b> and <b>nat</b> routes, which are put into the <b>local</b> table by default.

              <b>vrf</b> <u>NAME</u>
                     the vrf name to add this route to. Implicitly means the table associated with the VRF.

              <b>dev</b> <u>NAME</u>
                     the output device name.

              <b>via</b> <u>[</u> <u>FAMILY</u> <u>]</u> <u>ADDRESS</u>
                     the  address  of  the nexthop router, in the address family FAMILY.  Actually, the sense of
                     this field depends on the route type.  For normal <b>unicast</b> routes it is either the true next
                     hop router or, if it is a direct route installed in BSD compatibility mode,  it  can  be  a
                     local  address  of  the  interface.  For NAT routes it is the first address of the block of
                     translated IP destinations.

              <b>src</b> <u>ADDRESS</u>
                     the source address to prefer when sending to the destinations covered by the route prefix.

              <b>realm</b> <u>REALMID</u>
                     the realm to which this route is assigned.  <u>REALMID</u> may  be  a  number  or  a  string  from
                     <b>/usr/share/iproute2/rt_realms</b> or <b><a href="file:/etc/iproute2/rt_realms">/etc/iproute2/rt_realms</a></b> (has precedence if exists).

              <b>mtu</b> <u>MTU</u>

              <b>mtu</b> <b>lock</b> <u>MTU</u>
                     the MTU along the path to the destination. If the modifier <b>lock</b> is not used, the MTU may be
                     updated  by the kernel due to Path MTU Discovery. If the modifier <b>lock</b> is used, no path MTU
                     discovery will be tried, all packets will be sent without  the  DF  bit  in  IPv4  case  or
                     fragmented to MTU for IPv6.

              <b>window</b> <u>NUMBER</u>
                     the maximal window for TCP to advertise to these destinations, measured in bytes. It limits
                     maximal data bursts that our TCP peers are allowed to send to us.

              <b>rtt</b> <u>TIME</u>
                     the  initial  RTT ('Round Trip Time') estimate. If no suffix is specified the units are raw
                     values passed directly  to  the  routing  code  to  maintain  compatibility  with  previous
                     releases.   Otherwise if a suffix of s, sec or secs is used to specify seconds and ms, msec
                     or msecs to specify milliseconds.

              <b>rttvar</b> <u>TIME</u> <b>(Linux</b> <b>2.3.15+</b> <b>only)</b>
                     the initial RTT variance estimate. Values are specified as with <b>rtt</b> above.

              <b>rto_min</b> <u>TIME</u> <b>(Linux</b> <b>2.6.23+</b> <b>only)</b>
                     the minimum TCP Retransmission TimeOut to use when  communicating  with  this  destination.
                     Values are specified as with <b>rtt</b> above.

              <b>ssthresh</b> <u>NUMBER</u> <b>(Linux</b> <b>2.3.15+</b> <b>only)</b>
                     an estimate for the initial slow start threshold.

              <b>cwnd</b> <u>NUMBER</u> <b>(Linux</b> <b>2.3.15+</b> <b>only)</b>
                     the clamp for congestion window. It is ignored if the <b>lock</b> flag is not used.

              <b>initcwnd</b> <u>NUMBER</u> <b>(Linux</b> <b>2.5.70+</b> <b>only)</b>
                     the initial congestion window size for connections to this destination.  Actual window size
                     is  this  value  multiplied  by the MSS (``Maximal Segment Size'') for same connection. The
                     default is zero, meaning to use the values specified in RFC2414.

              <b>initrwnd</b> <u>NUMBER</u> <b>(Linux</b> <b>2.6.33+</b> <b>only)</b>
                     the initial receive window size for connections to this destination.  Actual window size is
                     this value multiplied by the MSS of the connection.  The default value is zero, meaning  to
                     use Slow Start value.

              <b>features</b> <u>FEATURES</u> <b>(Linux</b><u>3.18+</u><b>only)</b>
                     Enable  or disable per-route features. Only available feature at this time is <b>ecn</b> to enable
                     explicit congestion notification when  initiating  connections  to  the  given  destination
                     network.   When responding to a connection request from the given network, ecn will also be
                     used even if the <b>net.ipv4.tcp_ecn</b> sysctl is set to 0.

              <b>quickack</b> <u>BOOL</u> <b>(Linux</b> <b>3.11+</b> <b>only)</b>
                     Enable or disable quick ack for connections to this destination.

              <b>fastopen_no_cookie</b> <u>BOOL</u> <b>(Linux</b> <b>4.15+</b> <b>only)</b>
                     Enable TCP Fastopen without a cookie for connections to this destination.

              <b>congctl</b> <u>NAME</u> <b>(Linux</b> <b>3.20+</b> <b>only)</b>

              <b>congctl</b> <b>lock</b> <u>NAME</u> <b>(Linux</b> <b>3.20+</b> <b>only)</b>
                     Sets a specific TCP congestion control algorithm only for  a  given  destination.   If  not
                     specified,  Linux keeps the current global default TCP congestion control algorithm, or the
                     one set from the application. If  the  modifier  <b>lock</b>  is  not  used,  an  application  may
                     nevertheless  overwrite the suggested congestion control algorithm for that destination. If
                     the modifier <b>lock</b> is used, then an application is not allowed to  overwrite  the  specified
                     congestion  control  algorithm for that destination, thus it will be enforced/guaranteed to
                     use the proposed algorithm.

              <b>advmss</b> <u>NUMBER</u> <b>(Linux</b> <b>2.3.15+</b> <b>only)</b>
                     the MSS ('Maximal Segment Size') to advertise to these destinations when  establishing  TCP
                     connections.  If  it is not given, Linux uses a default value calculated from the first hop
                     device MTU.  (If the path to these destination is asymmetric, this guess may be wrong.)

              <b>reordering</b> <u>NUMBER</u> <b>(Linux</b> <b>2.3.15+</b> <b>only)</b>
                     Maximal reordering on the path to this destination.  If it is not  given,  Linux  uses  the
                     value selected with <b>sysctl</b> variable <b>net/ipv4/tcp_reordering</b>.

              <b>nexthop</b> <u>NEXTHOP</u>
                     the  nexthop  of a multipath route.  <u>NEXTHOP</u> is a complex value with its own syntax similar
                     to the top level argument lists:

                             <b>via</b> <u>[</u> <u>FAMILY</u> <u>]</u> <u>ADDRESS</u> - is the nexthop router.

                             <b>dev</b> <u>NAME</u> - is the output device.

                             <b>weight</b> <u>NUMBER</u> - is a weight for this element of a multipath  route  reflecting  its
                             relative bandwidth or quality.

                     The  internal  buffer  used  in  iproute2 limits the maximum number of nexthops that may be
                     specified in one go. If only <u>ADDRESS</u> is given, the current buffer size allows for 144  IPv6
                     nexthops  and  253  IPv4  ones.  For  IPv4,  this effectively limits the number of nexthops
                     possible per route. With IPv6, further nexthops may be appended to the same  route  via  <b>ip</b>
                     <b>route</b> <b>append</b> command.

              <b>scope</b> <u>SCOPE_VAL</u>
                     the  scope of the destinations covered by the route prefix.  <u>SCOPE_VAL</u> may be a number or a
                     string from <b>/usr/share/iproute2/rt_scopes</b> or  <b><a href="file:/etc/iproute2/rt_scopes">/etc/iproute2/rt_scopes</a></b>  (has  precedence  if
                     exists).   If  this parameter is omitted, <b>ip</b> assumes scope <b>global</b> for all gatewayed <b>unicast</b>
                     routes, scope <b>link</b> for direct <b>unicast</b> and <b>broadcast</b> routes and scope <b>host</b> for <b>local</b> routes.

              <b>protocol</b> <u>RTPROTO</u>
                     the routing protocol identifier of this route.  <u>RTPROTO</u> may be a number or  a  string  from
                     <b>/usr/share/iproute2/rt_protos</b>  or  <b><a href="file:/etc/iproute2/rt_protos">/etc/iproute2/rt_protos</a></b>  (has precedence if exists).  If
                     the routing protocol ID is not given, <b>ip</b> <b>assumes</b> <b>protocol</b> <b>boot</b> (i.e. it assumes  the  route
                     was  added  by someone who doesn't understand what they are doing). Several protocol values
                     have a fixed interpretation.  Namely:

                             <b>redirect</b> - the route was installed due to an ICMP redirect.

                             <b>kernel</b> - the route was installed by the kernel during autoconfiguration.

                             <b>boot</b> - the route was installed during the bootup sequence.   If  a  routing  daemon
                             starts, it will purge all of them.

                             <b>static</b>  - the route was installed by the administrator to override dynamic routing.
                             Routing daemon will respect them and, probably, even advertise them to its peers.

                             <b>ra</b> - the route was installed by Router Discovery protocol.

                     The rest of the values are not reserved and the administrator is free to assign (or not  to
                     assign) protocol tags.

              <b>onlink</b> pretend  that  the nexthop is directly attached to this link, even if it does not match any
                     interface prefix.

              <b>pref</b> <u>PREF</u>
                     the IPv6 route preference.  <u>PREF</u> is a string specifying the route preference as defined  in
                     RFC4191 for Router Discovery messages. Namely:

                             <b>low</b> - the route has a lowest priority

                             <b>medium</b> - the route has a default priority

                             <b>high</b> - the route has a highest priority

              <b>nhid</b> <u>ID</u>
                     use nexthop object with given id as nexthop specification.

              <b>encap</b> <u>ENCAPTYPE</u> <u>ENCAPHDR</u>
                     attach tunnel encapsulation attributes to this route.

                     <u>ENCAPTYPE</u> is a string specifying the supported encapsulation type. Namely:

                             <b>mpls</b> - encapsulation type MPLS

                             <b>ip</b> - IP encapsulation (Geneve, GRE, VXLAN, ...)

                             <b>bpf</b> - Execution of BPF program

                             <b>seg6</b> - encapsulation type IPv6 Segment Routing

                             <b>seg6local</b> - local SRv6 segment processing

                             <b>ioam6</b> - encapsulation type IPv6 IOAM

                             <b>xfrm</b> - encapsulation type XFRM

                     <u>ENCAPHDR</u> is a set of encapsulation attributes specific to the <u>ENCAPTYPE.</u>

                             <b>mpls</b>
                               <u>MPLSLABEL</u> - mpls label stack with labels separated by <u>/</u>

                               <b>ttl</b> <u>TTL</u> - TTL to use for MPLS header or 0 to inherit from IP header

                             <b>ip</b>
                               <b>id</b> <u>TUNNEL_ID</u> - Tunnel ID (for example VNI in VXLAN tunnel)

                               <b>dst</b> <u>REMOTE_IP</u> - Outer header destination IP address (IPv4 or IPv6)

                               <b>src</b> <u>SRC</u> - Outer header source IP address (IPv4 or IPv6)

                               <b>tos</b> <u>TOS</u> - Outer header TOS

                               <b>ttl</b> <u>TTL</u> - Outer header TTL

                               <b>key</b> - Outer header flags with key in GRE tunnel

                               <b>csum</b> - Outer header flags with csum in GRE tunnel

                               <b>seq</b> - Outer header flags with seq in GRE tunnel

                               <u>GENEVE_OPTS</u>  -  Specified in the form CLASS:TYPE:DATA, where CLASS is represented
                               as a 16bit hexadecimal value, TYPE as an 8bit hexadecimal value  and  DATA  as  a
                               variable  length  hexadecimal  value. Additionally multiple options may be listed
                               using a comma delimiter.

                               <u>VXLAN_OPTS</u> - Specified in the form GBP, as a 32bit number.  Multiple  options  is
                               not supported.

                               <u>ERSPAN_OPTS</u>  -  Specified  in  the  form VERSION:INDEX:DIR:HWID, where VERSION is
                               represented as a 8bit number, INDEX as an 32bit number, DIR and HWID  as  a  8bit
                               number.  Multiple options is not supported. Note INDEX is used when VERSION is 1,
                               and DIR and HWID are used when VERSION is 2.

                             <b>bpf</b>
                               <b>in</b> <u>PROG</u> - BPF program to execute for incoming packets

                               <b>out</b> <u>PROG</u> - BPF program to execute for outgoing packets

                               <b>xmit</b> <u>PROG</u> - BPF program to execute for transmitted packets

                               <b>headroom</b> <u>SIZE</u> - Size of header BPF program will attach (xmit)

                             <b>seg6</b>
                               <b>mode</b> <b>inline</b> - Directly insert Segment Routing Header after IPv6 header

                               <b>mode</b> <b>encap</b> - Encapsulate packet in an outer IPv6 header with SRH

                               <b>mode</b> <b>encap.red</b> - Encapsulate packet in an outer IPv6 header with SRH applying the
                               reduced segment list. When there is only one segment and the HMAC is not present,
                               the SRH is omitted.

                               <b>mode</b> <b>l2encap</b> - Encapsulate ingress L2 frame within an outer IPv6 header and SRH

                               <b>mode</b>  <b>l2encap.red</b>  - Encapsulate ingress L2 frame within an outer IPv6 header and
                               SRH applying the reduced segment list. When there is only  one  segment  and  the
                               HMAC is not present, the SRH is omitted.

                               <u>SEGMENTS</u> - List of comma-separated IPv6 addresses

                               <u>KEYID</u> - Numerical value in decimal representation. See <b><a href="../man8/ip-sr.8.html">ip-sr</a></b>(8).

                             <b>seg6local</b>
                               <u>SEG6_ACTION</u>  [  <u>SEG6_ACTION_PARAM</u>  ] [ <b>count</b> ] - Operation to perform on matching
                               packets. The optional <b>count</b> attribute  is  used  to  collect  statistics  on  the
                               processing  of  actions.   Three  counters  are implemented: 1) packets correctly
                               processed; 2) bytes correctly processed; 3) packets that cause a processing error
                               (i.e., missing SID List, wrong SID List, etc). To retrieve the  counters  related
                               to  an  action  use  the  <b>-s</b> flag in the <b>show</b> command.  The following actions are
                               currently supported (<b>Linux</b> <b>4.14+</b> <b>only</b>).

                                 <b>End</b> [ <b>flavors</b> <u>FLAVORS</u> ] -  Regular  SRv6  processing  as  intermediate  segment
                                 endpoint.   This  action  only  accepts  packets  with a non-zero Segments Left
                                 value. Other matching packets are dropped. The presence of flavors  can  change
                                 the regular processing of an End behavior according to the user-provided Flavor
                                 operations  and  information  carried  in  the  packet.  See <b>Flavors</b> <b>parameters</b>
                                 section.

                                 <b>End.X</b> <b>nh6</b> <u>NEXTHOP</u> [ <b>flavors</b> <u>FLAVORS</u> ] - Regular SRv6 processing as intermediate
                                 segment endpoint.  Additionally, forward processed packets to  given  next-hop.
                                 This  action  only  accepts  packets with a non-zero Segments Left value. Other
                                 matching packets are dropped. The presence of flavors can  change  the  regular
                                 processing   of  an  End.X  behavior  according  to  the  user-provided  Flavor
                                 operations and information carried  in  the  packet.   See  <b>Flavors</b>  <b>parameters</b>
                                 section.

                                 <b>End.DX6</b>  <b>nh6</b>  <u>NEXTHOP</u>  -  Decapsulate  inner  IPv6 packet and forward it to the
                                 specified next-hop. If the argument is set to ::, then the next-hop is selected
                                 according to the local selection rules. This action only accepts  packets  with
                                 either  a  zero Segments Left value or no SRH at all, and an inner IPv6 packet.
                                 Other matching packets are dropped.

                                 <b>End.DT6</b> { <b>table</b> | <b>vrftable</b> } <u>TABLEID</u> - Decapsulate the inner  IPv6  packet  and
                                 forward it according to the specified lookup table.  <u>TABLEID</u> is either a number
                                 or  a string from <b>/usr/share/iproute2/rt_tables</b> or <b><a href="file:/etc/iproute2/rt_tables">/etc/iproute2/rt_tables</a></b> (has
                                 precedence if exists).  If <b>vrftable</b> is used, the argument must be a VRF  device
                                 associated with the table id. Moreover, the VRF table associated with the table
                                 id    must    be    configured   with   the   VRF   strict   mode   turned   on
                                 (net.vrf.strict_mode=1). This action only accepts packets with  either  a  zero
                                 Segments  Left value or no SRH at all, and an inner IPv6 packet. Other matching
                                 packets are dropped.

                                 <b>End.DT4</b> <b>vrftable</b> <u>TABLEID</u> - Decapsulate the inner IPv4  packet  and  forward  it
                                 according  to  the  specified  lookup  table.   <u>TABLEID</u> is either a number or a
                                 string  from  <b>/usr/share/iproute2/rt_tables</b>  or  <b><a href="file:/etc/iproute2/rt_tables">/etc/iproute2/rt_tables</a></b>   (has
                                 precedence  if  exists).  The argument must be a VRF device associated with the
                                 table id.  Moreover, the VRF  table  associated  with  the  table  id  must  be
                                 configured  with  the  VRF  strict mode turned on (net.vrf.strict_mode=1). This
                                 action only accepts packets with either a zero Segments Left value or no SRH at
                                 all, and an inner IPv4 packet. Other matching packets are dropped.

                                 <b>End.DT46</b> <b>vrftable</b> <u>TABLEID</u> - Decapsulate the  inner  IPv4  or  IPv6  packet  and
                                 forward it according to the specified lookup table.  <u>TABLEID</u> is either a number
                                 or  a string from <b>/usr/share/iproute2/rt_tables</b> or <b><a href="file:/etc/iproute2/rt_tables">/etc/iproute2/rt_tables</a></b> (has
                                 precedence if exists).  The argument must be a VRF device associated  with  the
                                 table  id.   Moreover,  the  VRF  table  associated  with  the table id must be
                                 configured with the VRF strict mode  turned  on  (net.vrf.strict_mode=1).  This
                                 action only accepts packets with either a zero Segments Left value or no SRH at
                                 all, and an inner IPv4 or IPv6 packet. Other matching packets are dropped.

                                 <b>End.B6</b>  <b>srh</b> <b>segs</b> <u>SEGMENTS</u> [ <b>hmac</b> <u>KEYID</u> ] - Insert the specified SRH immediately
                                 after the IPv6 header, update the DA  with  the  first  segment  of  the  newly
                                 inserted  SRH,  then  forward  the  resulting  packet.  The original SRH is not
                                 modified. This action only accepts packets with a non-zero Segments Left value.
                                 Other matching packets are dropped.

                                 <b>End.B6.Encaps</b> <b>srh</b> <b>segs</b> <u>SEGMENTS</u> [ <b>hmac</b> <u>KEYID</u> ] -  Regular  SRv6  processing  as
                                 intermediate  segment  endpoint.  Additionally, encapsulate the matching packet
                                 within an outer IPv6 header followed by  the  specified  SRH.  The  destination
                                 address  of  the  outer IPv6 header is set to the first segment of the new SRH.
                                 The source address is set as described in <b><a href="../man8/ip-sr.8.html">ip-sr</a></b>(8).

                                 <b>Flavors</b> <b>parameters</b>

                                 The flavors represent additional operations that can modify or extend a  subset
                                 of the existing behaviors.

                                   <b>flavors</b> <u>OPERATION</u>[,<u>OPERATION</u>] [<u>ATTRIBUTES</u>]

                                     <u>OPERATION</u> := { <b>psp</b> | <b>usp</b> | <b>usd</b> | <b>next-csid</b> }

                                     <u>ATTRIBUTES</u> := { <u>KEY</u> <u>VALUE</u> } [ <u>ATTRIBUTES</u> ]

                                     <u>KEY</u> := { <b>lblen</b> | <b>nflen</b> }

                                   <b>psp</b> - The Penultimate Segment Pop (PSP) copies the last SID from the SID List
                                   (carried  by  the  outermost  SRH) into the IPv6 Destination Address (DA) and
                                   removes (i.e. pops) the SRH from the IPv6 header.  The  PSP  operation  takes
                                   place  only at a penultimate SR Segment Endpoint node (e.g., the Segment Left
                                   must be one) and does not happen  at  non-penultimate  endpoint  nodes.  This
                                   flavor is currently only supported by End behavior.

                                   <b>usp</b> - Ultimate Segment Pop of the SRH (not yet supported in kernel)

                                   <b>usd</b> - Ultimate Segment Decapsulation (not yet supported in kernel)

                                   <b>next-csid</b>  -  The  NEXT-C-SID  mechanism  offers  the possibility of encoding
                                   several SRv6 segments within a single 128 bit  SID  address.  The  NEXT-C-SID
                                   flavor  can be configured to support user-provided Locator-Block and Locator-
                                   Node Function lengths. If Locator-Block and/or Locator-Node Function  lengths
                                   are  not  provided  by  the user during configuration of an SRv6 End behavior
                                   instance with NEXT-C-SID flavor, the default value  is  32-bit  for  Locator-
                                   Block and 16-bit for Locator-Node Function.

                                   <b>lblen</b>  <u>VALUE</u>  -  defines the Locator-Block length for NEXT-C-SID flavor.  The
                                   Locator-Block length must be greater than 0 and evenly divisible by  8.  This
                                   attribute can be used only with NEXT-C-SID flavor.

                                   <b>nflen</b>  <u>VALUE</u>  -  defines  the  Locator-Node  Function  length  for NEXT-C-SID
                                   flavors. The Locator-Node Function length must be greater than 0  and  evenly
                                   divisible by 8. This attribute can be used only with NEXT-C-SID flavor.

                               <b>ioam6</b>
                                 <b>freq</b> <b>K/N</b> - Inject IOAM in K packets every N packets (default is 1/1).

                                 <b>mode</b> <b>inline</b> - Directly insert IOAM after IPv6 header (default mode).

                                 <b>mode</b> <b>encap</b> - Encapsulate packet in an outer IPv6 header with IOAM.

                                 <b>mode</b>  <b>auto</b> - Automatically use inline mode for local packets and encap mode for
                                 in-transit packets.

                                 <b>tunsrc</b> <u>ADDRESS</u> - IPv6 address of the tunnel source  (outer  header),  not  used
                                 with  inline  mode.  It is optional: if not provided, the tunnel source address
                                 is chosen automatically.

                                 <b>tundst</b> <u>ADDRESS</u> - IPv6 address of the tunnel  destination  (outer  header),  not
                                 used with inline mode.

                                 <b>type</b> <u>IOAM6_TRACE_TYPE</u> - List of IOAM data required in the trace, represented by
                                 a bitfield (24 bits).

                                 <b>ns</b>  <u>IOAM6_NAMESPACE</u>  -  Numerical value to represent an IOAM namespace. See <b><a href="../man8/ipioam.8.html">ip-</a></b>
                                 <b><a href="../man8/ipioam.8.html">ioam</a></b>(8).

                                 <b>size</b> <u>IOAM6_TRACE_SIZE</u> - Size, in octets, of the pre-allocated trace data block.

                               <b>xfrm</b>
                                 <b>if_id</b> <u>IF_ID</u>  <b>[</b> <b>link_dev</b> <u>LINK_DEV</u> ]

              <b>expires</b> <u>TIME</u> <b>(Linux</b> <b>4.4+</b> <b>only)</b>
                     the route will be deleted after the expires time.  <b>Only</b> support IPv6 at present.

              <b>ttl-propagate</b> { <b>enabled</b> | <b>disabled</b> }
                     Control whether TTL should be propagated from any encap into  the  un-encapsulated  packet,
                     overriding any global configuration. Only supported for MPLS at present.

       ip route delete
              delete route
              <b>ip</b> <b>route</b> <b>del</b> has the same arguments as <b>ip</b> <b>route</b> <b>add</b>, but their semantics are a bit different.

              Key  values (<b>to</b>, <b>tos</b>, <b>preference</b> and <b>table</b>) select the route to delete. If optional attributes are
              present, <b>ip</b> verifies that they coincide with the attributes of the route to delete.  If  no  route
              with the given key and attributes was found, <b>ip</b> <b>route</b> <b>del</b> fails.

       ip route show
              list routes
              the command displays the contents of the routing tables or the route(s) selected by some criteria.

              <b>to</b> <u>SELECTOR</u> <b>(default)</b>
                     only  select routes from the given range of destinations.  <u>SELECTOR</u> consists of an optional
                     modifier (<b>root</b>, <b>match</b> or <b>exact</b>) and a prefix.  <b>root</b> <u>PREFIX</u> selects routes with prefixes not
                     shorter than <u>PREFIX</u>.  F.e.  <b>root</b> <u>0/0</u>  selects  the  entire  routing  table.   <b>match</b>  <u>PREFIX</u>
                     selects  routes with prefixes not longer than <u>PREFIX</u>.  F.e.  <b>match</b> <u>10.0/16</u> selects <u>10.0/16</u>,
                     <u>10/8</u> and <u>0/0</u>, but it does not select <u>10.1/16</u> and <u>10.0.0/24</u>.   And  <b>exact</b>  <u>PREFIX</u>  (or  just
                     <u>PREFIX</u>)  selects routes with this exact prefix. If neither of these options are present, <b>ip</b>
                     assumes <b>root</b> <u>0/0</u> i.e. it lists the entire table.

              <b>tos</b> <u>TOS</u>

              <b>dsfield</b> <u>TOS</u>
                     only select routes with the given TOS.

              <b>table</b> <u>TABLEID</u>
                     show the routes from this table(s). The default setting is to show table <b>main</b>.  <u>TABLEID</u> may
                     either be the ID of a real table or one of the special values:

                             <b>all</b> - list all of the tables.

                             <b>cache</b> - dump the routing cache.

              <b>vrf</b> <u>NAME</u>
                     show the routes for the table associated with the vrf name

              <b>cloned</b>

              <b>cached</b> list cloned routes i.e. routes which were dynamically forked from other routes because some
                     route attribute (f.e. MTU) was updated.  Actually, it is equivalent to <b>table</b> <b>cache</b>.

              <b>from</b> <u>SELECTOR</u>
                     the same syntax as for <b>to</b>, but it binds the source address range rather than  destinations.
                     Note that the <b>from</b> option only works with cloned routes.

              <b>protocol</b> <u>RTPROTO</u>
                     only list routes of this protocol.

              <b>scope</b> <u>SCOPE_VAL</u>
                     only list routes with this scope.

              <b>type</b> <u>TYPE</u>
                     only list routes of this type.

              <b>dev</b> <u>NAME</u>
                     only list routes going via this device.

              <b>via</b> <u>[</u> <u>FAMILY</u> <u>]</u> <u>PREFIX</u>
                     only list routes going via the nexthop routers selected by <u>PREFIX</u>.

              <b>src</b> <u>PREFIX</u>
                     only list routes with preferred source addresses selected by <u>PREFIX</u>.

              <b>realm</b> <u>REALMID</u>

              <b>realms</b> <u>FROMREALM/TOREALM</u>
                     only list routes with these realms.

       ip route flush
              flush routing tables
              this command flushes routes selected by some criteria.

              The  arguments  have  the same syntax and semantics as the arguments of <b>ip</b> <b>route</b> <b>show</b>, but routing
              tables are not listed but purged. The only difference is the default action: <b>show</b> dumps all the IP
              main routing table but <b>flush</b> prints the helper page.

              With the <b>-statistics</b> option, the command becomes verbose. It prints  out  the  number  of  deleted
              routes  and the number of rounds made to flush the routing table. If the option is given twice, <b>ip</b>
              <b>route</b> <b>flush</b> also dumps all the deleted routes in the format described in the previous subsection.

       ip route get
              get a single route
              this command gets a single route to a destination and prints its contents exactly  as  the  kernel
              sees it.

              <b>fibmatch</b>
                     Return full fib lookup matched route. Default is to return the resolved dst entry

              <b>to</b> <u>ADDRESS</u> <b>(default)</b>
                     the destination address.

              <b>from</b> <u>ADDRESS</u>
                     the source address.

              <b>tos</b> <u>TOS</u>

              <b>dsfield</b> <u>TOS</u>
                     the Type Of Service.

              <b>iif</b> <u>NAME</u>
                     the device from which this packet is expected to arrive.

              <b>oif</b> <u>NAME</u>
                     force the output device on which this packet will be routed.

              <b>mark</b> <u>MARK</u>
                     the firewall mark (<b>fwmark</b>)

              <b>vrf</b> <u>NAME</u>
                     force the vrf device on which this packet will be routed.

              <b>ipproto</b> <u>PROTOCOL</u>
                     ip protocol as seen by the route lookup

              <b>sport</b> <u>NUMBER</u>
                     source port as seen by the route lookup

              <b>dport</b> <u>NUMBER</u>
                     destination port as seen by the route lookup

              <b>connected</b>
                     if no source address (option <b>from</b>) was given, relookup the route with the source set to the
                     preferred  address  received from the first lookup.  If policy routing is used, it may be a
                     different route.

              <b>flowlabel</b> <u>FLOWLABEL</u>
                     ipv6 flow label as seen by the route lookup

              Note that this operation is not equivalent to <b>ip</b> <b>route</b> <b>show</b>.  <b>show</b>  shows  existing  routes.   <b>get</b>
              resolves  them  and  creates  new clones if necessary. Essentially, <b>get</b> is equivalent to sending a
              packet along this path.  If the <b>iif</b> argument is not given, the kernel creates a  route  to  output
              packets  towards  the requested destination.  This is equivalent to pinging the destination with a
              subsequent <b>ip</b> <b>route</b> <b>ls</b> <b>cache</b>, however, no packets are actually sent. With the  <b>iif</b>  argument,  the
              kernel  pretends  that a packet arrived from this interface and searches for a path to forward the
              packet.

       ip route save
              save routing table information to stdout
              This command behaves like <b>ip</b> <b>route</b> <b>show</b> except that the output is raw data suitable for passing to
              <b>ip</b> <b>route</b> <b>restore</b>.

       ip route restore
              restore routing table information from stdin
              This command expects to read a data stream as returned from <b>ip</b> <b>route</b> <b>save</b>.   It  will  attempt  to
              restore  the  routing  table  information  exactly  as  it  was  at  the  time of the save, so any
              translation of information in the stream (such as device indexes) must be done first. Any existing
              routes are left unchanged. Any routes specified in the data stream that already exist in the table
              will be ignored.

</pre><h4><b>NOTES</b></h4><pre>
       Starting with Linux kernel version 3.6, there is no routing cache for IPv4 anymore. Hence <b>ip</b>  <b>route</b>  <b>show</b>
       <b>cached</b> will never print any entries on systems with this or newer kernel versions.

</pre><h4><b>EXAMPLES</b></h4><pre>
       ip ro
           Show all route entries in the kernel.

       ip route add default via 192.168.1.1 dev eth0
           Adds  a  default  route  (for all addresses) via the local gateway 192.168.1.1 that can be reached on
           device eth0.

       ip route add 10.1.1.0/30 encap mpls 200/300 via 10.1.1.1 dev eth0
           Adds an ipv4 route with mpls encapsulation attributes attached to it.

       ip -6 route add 2001:db8:1::/64 encap seg6 mode encap segs 2001:db8:42::1,2001:db8:ffff::2 dev eth0
           Adds an IPv6 route with SRv6 encapsulation and two segments attached.

       ip -6 route add 2001:db8:1::/64 encap seg6local action End.DT46 vrftable 100 dev vrf100
           Adds an IPv6 route with SRv6 decapsulation and forward with lookup in VRF table.

       ip -6 route add 2001:db8:1::/64 encap seg6local action End flavors psp dev eth0
           Adds an IPv6 route with SRv6 End behavior with psp flavor enabled.

       ip -6 route add 2001:db8:1::/64 encap seg6local action End flavors next-csid dev eth0
           Adds an IPv6 route with SRv6 End behavior with next-csid flavor enabled.

       ip -6 route add 2001:db8:1::/64 encap seg6local action End flavors next-csid lblen 48 nflen 16 dev eth0
           Adds an IPv6 route with SRv6 End behavior with next-csid flavor enabled  and  user-provided  Locator-
           Block and Locator-Node Function lengths.

       ip -6 route add 2001:db8:1::/64 encap ioam6 freq 2/5 mode encap tundst 2001:db8:42::1 trace prealloc type
       0x800000 ns 1 size 12 dev eth0
           Adds an IPv6 route with an IOAM Pre-allocated Trace encapsulation (ip6ip6) that only includes the hop
           limit  and  the  node  id,  configured  for the IOAM namespace 1 and a pre-allocated data block of 12
           octets (will be injected in 2 packets every 5 packets).

       ip route add 10.1.1.0/30 nhid 10
           Adds an ipv4 route using nexthop object with id 10.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man8/ip.8.html">ip</a></b>(8)

</pre><h4><b>AUTHOR</b></h4><pre>
       Original Manpage by Michail Litvak &lt;<a href="mailto:mci@owl.openwall.com">mci@owl.openwall.com</a>&gt;

iproute2                                           13 Dec 2012                                       <u><a href="../man8/IP-ROUTE.8.html">IP-ROUTE</a></u>(8)
</pre>
 </div>
</div></section>
</div>
</body>
</html>