<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>config-gfsd - set up a file spool node of Gfarm</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/gfsd">gfsd_2.7.20+dfsg-1.2_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       config-gfsd - set up a file spool node of Gfarm

</pre><h4><b>SYNOPSIS</b></h4><pre>

       <b>config-gfsd</b> [<u>options</u>]

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>config-gfsd</b> is a utility to set up a file sppol node of Gfarm file system. The server program for a file
       spool node is named <b>gfsd</b>.  <b>config-gfsd</b> is required to be run with the root privilege, unless you use the
       file system for private purpose such as development, evaluation or test of Gfarm.

       <b>config-gfsd</b> assumes that the configuration file %%SYSCONFDIR%%/gfarm2.conf (or %%SYSCONFDIR%%/gfsd.conf
       in case of the private-mode) exists on the host. Please copy the file from the metadata server, if
       missing.

       It performs the following processes, in that order:

        1. Crerate a spool directory.

        2. Update the Gfarm configuration file %%SYSCONFDIR%%/gfarm2.conf or %%SYSCONFDIR%%/gfsd.conf.

        3. Create a script (or a configuration file) to start/stop <b>gfsd</b>.

           On most systems, <b>config-gfsd</b> puts a start/stop script <b>gfsd</b> (or <b>gfsd-ADDRESS</b> in case of the private
           mode) onto either <a href="file:/etc/init.d">/etc/init.d</a> or /etc/rc.d/init.d, according to the operating system.

           On Linux with systemd such as Red Hat Enterprise Linux 7 or later, <b>config-gfsd</b> puts the unit
           configuration file gfsd.service (or gfsd-ADDRESS.service in case of the private mode) onto
           <a href="file:/etc/systemd/system">/etc/systemd/system</a>, and then executes <b>systemctl</b> <b>enable</b> <b>gfsd.service</b> (or <b>systemctl</b> <b>enable</b>
           <b>gfsd-ADDRESS.service</b> respectively).

        4. In case of the private mode, <b>config-gfsd</b> registers the host as a file spool node to the metadata
           server, by executing <b>gfhost</b> <b>-c</b> command. In the non-private mode, it shows how to register the host as
           a file spool node to the metadata server, like this:

               Please ask admin_user to register your host by the following command:

               /usr/bin/gfhost -c -a x86_64-centos7.0-linux -p 600 -n 2 ext540

        5. In case of the private mode, <b>config-gfsd</b> starts <b>gfsd</b>. In the non-private mode, it shows how to start
           <b>gfsd</b>, like as follows:

               After that, start gfsd by the following command as a root:

               systemctl start gfsd.service

        6.  Puts the script <b>unconfig-gfsd.sh</b> on %%SYSCONFDIR%%.  The script does unconfiguration of <b>gfsd</b>.  It
           stops <b>gfsd</b> and removes all files created by <b>config-gfsd</b> including <b>unconfig-gfsd.sh</b> itself.

       Before set up a file spool node using <b>config-gfsd</b>, it is recommended to execute <b>config-gfsd</b> <b>-t</b>. With <b>-t</b>
       option, the sets up is not performed. Instead, it shows values of all configurable parameters:

           $ config-gfsd -t

           prefix                 [--prefix]:
           hostname                     [-h]: host1.example.org
           listen address               [-l]: (all local IP addresses)
           architecture                 [-a]: x86_64-centos6.5-linux
           port                         [-p]: 600
           ncpu                         [-n]: 8
           spool directory                  : /var/gfarm-spool
           rc script                        : /etc/init.d/gfsd
           gfarm client conf file           : /etc/gfarm2.conf
           gfsd pid file                    : /var/run/gfsd.pid

       The option name surrounded by [ ] means that you can specify a value with that option.

</pre><h4><b>OPTIONS</b></h4><pre>
       <b>--prefix</b> <u>path</u>
           Configure some paths related to <b>gfsd</b>. Specifically, the followings are affected.

           •   The spool directory of <b>gfsd</b>. That is PREFIX/var/gfarm-spool.

           •   The directory to put a PID file of <b>gfsd</b>. That is PREFIX/var/run.

           •   The directory of configuration files. That is PREFIX/etc.

           •   The directory of start/stop script for <b>gfsd</b>. That is PREFIX/etc/init.d or PREFIX/rc.d/init.d/etc
               which is depending on operating systems.

           •   If systemd is running on the host, there is a special exception. When an empty prefix is given by
               <b>--prefix</b> option on such host, <b>config-gfsd</b> doesn't put a unit configuration file for systemd.
               Instead, it puts traditional start/stop script at PREFIX/etc/init.d.

           •   The unconfiguration script <b>unconfig-gfsd.sh</b>. That is <b>PREFIX/etc/unconfig-gfsd.sh</b>.

           The default is "" (empty).

       <b>-a</b> <u>architecture</u>
           Specify architecture of the host.  <b>config-gfsd</b> gives this value to <b>gfhost</b> <b>-c</b> as an argument of <b>-a</b>
           option.  <b>config-gfsd</b> guesses the architecture, and use it by default.

       <b>-p</b> <u>port</u>
           Specify a TCP port number the configured <b>gfsd</b> listens on. The default is 10600 if the private mode,
           600 otherwise.

       <b>-h</b> <u>hostname</u>
           Specify a hostname of the host.  <b>config-gfsd</b> gives this value to <b>gfhost</b> <b>-c</b> as an non-option argument.
           The default is the fully qualified domainname of the host on DNS.

       <b>-l</b> <u>address</u>
           Specify a listen address of <b>gfsd</b>. By default, it listens on all local IP addresses. If this option is
           specified, also the following changes occur:

           •   The name of start/stop script is changed from gfsd to gfsd-ADDRESS, when <b>config-gfsd</b> creates the
               script.

           •   The name of unit configuration file for systemd is changed from gfsd.service to
               gfsd-ADDRESS.service, when <b>config-gfsd</b> creates the file.

           •   The spool directory is changed from PREFIX/var/gfarm-spool to PREFIX/var/gfarm-spool-ADDRESS,
               where PREFIX is a prefix given by <b>--prefix</b> option.

       <b>-n</b> <u>ncpu</u>
           Specify the number of CPUs of the host.  <b>config-gfsd</b> gives this value to <b>gfhost</b> <b>-c</b> as an argument of
           <b>-n</b> option.  <b>config-gfsd</b> guesses the number of CPUs, and use it by default.

       <b>--help</b>
           Show usage, then exit.

       <b>-S</b>
           Enable the private mode.  <b>config-gfsd</b> sets up the Gfarm file system which can be run without root
           privilege. Specifically, <b>config-gfsd</b> changes the configuration procedures as follows:

           •   The default listen port of <b>gfsd</b> (corresponding with <b>-p</b> option) is changed from 600 to 10600.

           •   It updates the configuration file %%SYSCONFDIR%%/gfsd.conf, instead of
               %%SYSCONFDIR%%/gfarm2.conf.

           •   It registers the file spool node by executing <b>gfhost</b> <b>-c</b>.

           •   It starts <b>gfsd</b>, unless <b>-N</b> option is given.

           <b>-S</b> option never changes locations of a start/stop script and a configuration file. Since the default
           locations of those files are usually writable only for privilege users, <b>config-gfsd</b> fails to create
           them. To avoid this problem, also specify <b>--prefix</b> option.

       <b>-N</b>
           Do not start <b>gfsd</b>.

       <b>-f</b>
           Force overwriting an existing set up.

       <b>-t</b>
           Show values of all configurable parameters in human readable format, then exit immediately.

       <b>-T</b>
           Like '-t', but it shows values in KEY=VALUE format.

</pre><h4><b>FILES</b></h4><pre>
       %%SYSCONFDIR%%/gfarm2.conf
           configuration file for Gfarm clients

       %%SYSCONFDIR%%/gfsd.conf
           configuration file for <b>gfsd</b> (used only in the private mode)

       /etc/init.d/gfsd
           start/stop script for <b>gfsd</b>

       /etc/systemd/system/gfsd.service
           unit configuration file for <b>gfsd</b>, read by systemd

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man5/gfarm2.conf.5.html">gfarm2.conf</a></b>(5), <b><a href="../man8/config-gfarm.8.html">config-gfarm</a></b>(8), <b><a href="../man8/gfsd.8.html">gfsd</a></b>(8)

Gfarm                                              20 Jan 2015                                    <u><a href="../man8/CONFIG-GFSD.8.html">CONFIG-GFSD</a></u>(8)
</pre>
 </div>
</div></section>
</div>
</body>
</html>