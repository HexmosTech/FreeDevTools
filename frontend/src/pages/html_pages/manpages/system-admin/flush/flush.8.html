<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>flush - Postfix fast flush server</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/postfix">postfix_3.10.2-1ubuntu1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       flush - Postfix fast flush server

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>flush</b> [generic Postfix daemon options]

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The  <b><a href="../man8/flush.8.html">flush</a></b>(8)  server  maintains  a  record of deferred mail by destination.  This information is used to
       improve the performance of the SMTP <b>ETRN</b> request, and of its command-line equivalent, "<b>sendmail</b>  <b>-qR</b>"  or
       "<b>postqueue</b> <b>-f</b>".  This program expects to be run from the <b><a href="../man8/master.8.html">master</a></b>(8) process manager.

       The record is implemented as a per-destination logfile with as contents the queue IDs of deferred mail. A
       logfile  is append-only, and is truncated when delivery is requested for the corresponding destination. A
       destination is the part on the right-hand side of the right-most <b>@</b> in an email address.

       Per-destination logfiles of deferred mail are maintained only for  eligible  destinations.  The  list  of
       eligible destinations is specified with the <b>fast_flush_domains</b> configuration parameter, which defaults to
       <b>$relay_domains</b>.

       This server implements the following requests:

       <b>add</b> <u>sitename</u> <u>queueid</u>
              Inform  the  <b><a href="../man8/flush.8.html">flush</a></b>(8)  server  that  the  message  with  the  specified queue ID is queued for the
              specified destination.

       <b>send_site</b> <u>sitename</u>
              Request delivery of mail that is queued for the specified destination.

       <b>send_file</b> <u>queueid</u>
              Request delivery of the specified deferred message.

       <b>refresh</b>
              Refresh non-empty per-destination logfiles that were not read in  <b>$fast_flush_refresh_time</b>  hours,
              by simulating send requests (see above) for the corresponding destinations.

              Delete empty per-destination logfiles that were not updated in <b>$fast_flush_purge_time</b> days.

              This request completes in the background.

       <b>purge</b>  Do a <b>refresh</b> for all per-destination logfiles.

</pre><h4><b>SECURITY</b></h4><pre>
       The  <b><a href="../man8/flush.8.html">flush</a></b>(8)  server is not security-sensitive. It does not talk to the network, and it does not talk to
       local users.  The fast flush server can run chrooted at fixed low privilege.

</pre><h4><b>DIAGNOSTICS</b></h4><pre>
       Problems and transactions are logged to <b><a href="../man8/syslogd.8.html">syslogd</a></b>(8) or <b><a href="../man8/postlogd.8.html">postlogd</a></b>(8).

</pre><h4><b>BUGS</b></h4><pre>
       Fast flush logfiles are truncated only after a "send" request, not when mail is actually  delivered,  and
       therefore  can  accumulate  outdated  or  redundant  data. In order to maintain sanity, "refresh" must be
       executed periodically. This can be automated with a  suitable  wakeup  timer  setting  in  the  <b>master.cf</b>
       configuration file.

       Upon  receipt  of  a  request  to  deliver mail for an eligible destination, the <b><a href="../man8/flush.8.html">flush</a></b>(8) server requests
       delivery of all messages that are listed in that destination's logfile, regardless of the  recipients  of
       those  messages.  This  is not an issue for mail that is sent to a <b>relay_domains</b> destination because such
       mail typically only has recipients in one domain.

</pre><h4><b>CONFIGURATION</b> <b>PARAMETERS</b></h4><pre>
       Changes to <b>main.cf</b> are picked up automatically as <b><a href="../man8/flush.8.html">flush</a></b>(8) processes run for only  a  limited  amount  of
       time. Use the command "<b>postfix</b> <b>reload</b>" to speed up a change.

       The text below provides only a parameter summary. See <b><a href="../man5/postconf.5.html">postconf</a></b>(5) for more details including examples.

       <b>config_directory</b> <b>(see</b> <b>'postconf</b> <b>-d'</b> <b>output)</b>
              The default location of the Postfix main.cf and master.cf configuration files.

       <b>daemon_timeout</b> <b>(18000s)</b>
              How  much  time a Postfix daemon process may take to handle a request before it is terminated by a
              built-in watchdog timer.

       <b>fast_flush_domains</b> <b>($relay_domains)</b>
              Optional list of destinations that are eligible for per-destination logfiles  with  mail  that  is
              queued to those destinations.

       <b>fast_flush_refresh_time</b> <b>(12h)</b>
              The  time  after  which  a  non-empty  but unread per-destination "fast flush" logfile needs to be
              refreshed.

       <b>fast_flush_purge_time</b> <b>(7d)</b>
              The time after which an empty per-destination "fast flush" logfile is deleted.

       <b>ipc_timeout</b> <b>(3600s)</b>
              The time limit for sending or receiving information over an internal communication channel.

       <b>max_idle</b> <b>(100s)</b>
              The maximum amount of time that an idle Postfix daemon process waits for  an  incoming  connection
              before terminating voluntarily.

       <b>max_use</b> <b>(100)</b>
              The  maximal  number  of  incoming  connections  that a Postfix daemon process will service before
              terminating voluntarily.

       <b>parent_domain_matches_subdomains</b> <b>(see</b> <b>'postconf</b> <b>-d'</b> <b>output)</b>
              A list of Postfix features where the pattern "example.com" also matches subdomains of example.com,
              instead of requiring an explicit ".example.com" pattern.

       <b>process_id</b> <b>(read-only)</b>
              The process ID of a Postfix command or daemon process.

       <b>process_name</b> <b>(read-only)</b>
              The process name of a Postfix command or daemon process.

       <b>queue_directory</b> <b>(see</b> <b>'postconf</b> <b>-d'</b> <b>output)</b>
              The location of the Postfix top-level queue directory.

       <b>syslog_facility</b> <b>(mail)</b>
              The syslog facility of Postfix logging.

       <b>syslog_name</b> <b>(see</b> <b>'postconf</b> <b>-d'</b> <b>output)</b>
              A prefix that is prepended to the process name in syslog records, so that,  for  example,  "smtpd"
              becomes "prefix/smtpd".

       Available in Postfix 3.3 and later:

       <b>service_name</b> <b>(read-only)</b>
              The master.cf service name of a Postfix daemon process.

</pre><h4><b>FILES</b></h4><pre>
       /var/spool/postfix/flush, "fast flush" logfiles.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <a href="../man8/smtpd.8.html">smtpd</a>(8), SMTP server
       <a href="../man8/qmgr.8.html">qmgr</a>(8), queue manager
       <a href="../man5/postconf.5.html">postconf</a>(5), configuration parameters
       <a href="../man5/master.5.html">master</a>(5), generic daemon options
       <a href="../man8/master.8.html">master</a>(8), process manager
       <a href="../man8/postlogd.8.html">postlogd</a>(8), Postfix logging
       <a href="../man8/syslogd.8.html">syslogd</a>(8), system logging

</pre><h4><b>README</b> <b>FILES</b></h4><pre>
       Use "<b>postconf</b> <b>readme_directory</b>" or "<b>postconf</b> <b>html_directory</b>" to locate this information.
       ETRN_README, Postfix ETRN howto

</pre><h4><b>LICENSE</b></h4><pre>
       The Secure Mailer license must be distributed with this software.

</pre><h4><b>HISTORY</b></h4><pre>
       This service was introduced with Postfix version 1.0.

</pre><h4><b>AUTHOR(S)</b></h4><pre>
       Wietse Venema
       IBM T.J. Watson Research
       P.O. Box 704
       Yorktown Heights, NY 10598, USA

       Wietse Venema
       Google, Inc.
       111 8th Avenue
       New York, NY 10011, USA

                                                                                                        <u><a href="../man8/FLUSH.8.html">FLUSH</a></u>(8)
</pre>
 </div>
</div></section>
</div>
</body>
</html>