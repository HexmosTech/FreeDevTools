<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>xchpst — eXtended CHange Process STate</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/xchpst">xchpst_0.6.2-1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       xchpst — eXtended CHange Process STate

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>xchpst</b> <b>--help</b>
       <b>xchpst</b> <b>--version</b>
       <b>xchpst</b> <b>--exit</b>[=<u>retcode</u>]
       <b>xchpst</b> [<u>OPTIONS</u>] [<b>--</b>] <u>command</u> <u>...</u>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The  <b>xchpst</b>  utility  changes  process state according to the supplied options and then calls <b>exec</b>() on a
       named executable with the positional arguments.

       <b>xchpst</b> is a backwards-compatible extension to the <u><a href="../man8/chpst.8.html">chpst</a></u>(8) tool which is  supplied  with  runit.   <b>xchpst</b>
       enables  runit  service  scripts  to take advantage of hardening capabilities available with recent Linux
       kernels such as namespaces and capabilities.  <b>xchpst</b> can set up shadow  subtrees  within  the  filesystem
       hierarchy  to  isolate  long-running  services  from  parts  of the system to which they ought to need no
       access, e.g. with private <u><a href="file:/tmp">/tmp</a></u> areas and read-only <u>/usr.</u>

   <b>Extended</b> <b>xchpst</b> <b>options</b>
       The extra options provided by <b>xchpst</b> are as follows:

       <b>--help</b>      Show help text and usage.

       <b>--file</b> <u>file</u>
                   Read options from <u>file</u>.  See “Options file” for the file format.

       <b>--exit</b>[=<u>retcode</u>]
                   Exit immediately with exit  status  0  if  the  given  options  are  supported.   <u>retcode</u>  if
                   specified.

       <b>--mount-ns</b>  Create new mount namespace.  Various other options also implicitly enable mount namespaces as
                   this  is  important  to  their  operation;  this  option  is rarely likely to be needed to be
                   specified explicitly.

       <b>--net-ns</b>    Create new network namespace.  This will more or less isolate the process from the networking
                   subsystem.

       <b>--uts-ns</b>    Create new UTS namespace.

       <b>--pid-ns</b>    Create a PID namespace.  This implies <b>--fork-join</b> because a new process is needed to  act  as
                   PID 1 and in order to be able to mount a new procfs for the namespace.

       <b>--fork-join</b>
                   Fork  a  new  process  and wait for it to finish, passing on to the child process any signals
                   received by the  <b>xchpst</b>  process.   This  option  is  necessary  to  take  advantage  of  PID
                   namespaces.  The exit status is that of the child process.

       <b>--user-ns</b>   Create a user namespace.

       <b>--adopt-net</b> <u>path</u>
                   Adopt  the  network namespace bound to <u>path</u>.  The binding will be deleted from the filesystem
                   meaning that the namespace will disappear when the  process  exits,  if  there  is  no  other
                   reference  to  it. This allows the calling script to set up a suitable networking environment
                   for the process and hand it over.

       <b>--new-root</b>  Create a new root filesystem (will implicitly enable the creation of a new mount  namespace).
                   The  new  root  filesystem  is  created  as  a tmpfs and all the top-level directories in the
                   original root filesystem are bind mounted and any symlinks are replicated.

       <b>--private-run</b>
                   Mount an isolated <u><a href="file:/run">/run</a></u> directory for the process.  Unless <b>--new-root</b> is also  specified,  the
                   old shared <a href="file:/run">/run</a> directory will still be accessible if the stacked mount is removed.

       <b>--private-tmp</b>
                   Mount  an  isolated <u><a href="file:/tmp">/tmp</a></u> directory for the process.  Unless <b>--new-root</b> is also specified, the
                   old shared <a href="file:/tmp">/tmp</a> directory will still be accessible if the stacked mount is removed.

       <b>--protect-home</b>
                   Mount isolated <u><a href="file:/home">/home</a></u>, <u><a href="file:/root">/root</a></u> <u>and</u> <u><a href="file:/run/user">/run/user</a></u> directories for the process.  Unless <b>--new-root</b>  is
                   also  specified,  the  old  shared  host  directories will still be accessible if the stacked
                   mounts are removed.

       <b>--ro-sys</b>    Convert <u><a href="file:/usr">/usr</a></u> and <u><a href="file:/boot">/boot</a></u> into read-only mounts.  Note that if  the  hardened  process  has  the
                   rights  to  unmount  filesystems,  it  can  reveal  the  original  writable filesystems.  The
                   <b>--new-root</b> option is designed to prevent this.  Alternatively, use  <b>--cap-bs-drop</b>  to  remove
                   the ‘CAP_SYS_ADMIN’ capability, preventing the bind mount from being unmounted.

       <b>--ro-home</b>   Convert  <u><a href="file:/home">/home</a></u>,  <u><a href="file:/root">/root</a></u>  <u>and</u>  and  <u>/run/usr</u>  into  read-only mounts.  This option has the same
                   limitations as <b>--ro-sys</b>.

       <b>--ro-etc</b>    Convert <u><a href="file:/etc">/etc</a></u> into a read-only mount.  This option has the same limitations as <b>--ro-sys</b>.

       <b>--caps-bs-keep</b> <u>capability</u>[,capability...]
                   Keeps only the listed capabilities in the bounding set.

       <b>--caps-bs-drop</b> <u>capability</u>[,capability...]
                   Drops the listed capabilities from the bounding  set.   Use  only  one  of  the  two  options
                   governing the bounding set.

       <b>--caps-keep</b> <u>capability</u>[,capability...]
                   Retain the listed capabilities when dropping to a non-root user.

       <b>--caps-drop</b> <u>capability</u>[,capability...]
                   Drop the listed capabilities when dropping to a non-root user, but retain all others.

       <b>--no-new-privs</b>
                   Prevent    the    target    application    from    obtaining   any   new   privileges.    See
                   <u><a href="../man2const/PR_SET_NO_NEW_PRIVS.2const.html">PR_SET_NO_NEW_PRIVS</a></u>(2const).

       <b>--cpu-scheduler</b> <b>other</b>|<b>batch</b>|<b>idle</b>
                   Set the scheduler policy, as per <u><a href="../man2/sched_setscheduler.2.html">sched_setscheduler</a></u>(2).

       <b>--io-scheduler</b> <b>rt</b>|<b>best-effort</b>|<b>idle</b>[:<u>priority</u>]
                   Set the I/O scheduler policy and priority, as per <u><a href="../man1/ionice.1.html">ionice</a></u>(1).

       <b>--cpus</b> <u>start</u>[-<u>end</u>[:<u>stride</u>]][,...]
                   Set CPU affinity in the same format as <u><a href="../man1/taskset.1.html">taskset</a></u>(1).

       <b>--umask</b> <u>mode</u>
                   Set umask to the octal value <u>mode</u>.

       <b>--app</b> <u>name</u>  Override program name used for pre-creating system directories.

       <b>--run-dir</b>   Create a directory for the program under <u><a href="file:/run">/run</a></u>, owned by the appropriate user.

       <b>--state-dir</b>
                   Create a directory for the program under <u><a href="file:/var/lib">/var/lib</a></u>, owned by the appropriate user.

       <b>--log-dir</b>   Create a directory for the program under <u><a href="file:/var/log">/var/log</a></u>, owned by the appropriate user.

       <b>--cache-dir</b>
                   Create a directory for the program under <u><a href="file:/var/cache">/var/cache</a></u>, owned by the appropriate user.

       <b>--login</b>     Create a login environment, using the user specified by -u, -U or the current user, in  order
                   of  preference.  If this option is specified and no command is specified to be executed, then
                   the shell defined for the given user is launched, instead of an error being returned.

       <b>--oom</b> <u>adjustment</u>
                   Set the out-of-memory (OOM) score adjustment to <u>adjustment</u>.

       <b>-s</b> <u>bytes</u>    Set soft limit for stack segment size.

       <b>-a</b> <u>bytes</u>    Set soft limit for address space size.

       <b>--limit-memlock</b> <u>bytes</u>
                   Set soft limit for amount of locked memory.

       <b>--limit-msgqueue</b> <u>bytes</u>
                   Set soft limit for message queue space for this user.

       <b>--limit-nice</b> <u>niceness</u>
                   Set 20 minus the minimum niceness possible for this process.

       <b>--limit-rtptio</b> <u>prio</u>
                   Set soft limit for real time priority of the process.

       <b>--limit-rttime</b> <u>ms</u>
                   Set soft limit for amount of real time processing between blocking system calls.

       <b>--limit-sigpending</b> <u>number</u>
                   Set soft limit for the number of pending signals permitted for the process.

       <b>--limit-locks</b> <u>number</u>
                   Set soft limit for the number of file locks that this process may hold.

       <b>--hardlimit</b>
                   Also set the hard limit for any soft limit option that follows.

       <b>-@</b>          Switch to chpst-compatible option handling only for the remaining options. This is to support
                   scripts that can convert an <b>xchpst</b> invocation into a command line for <b>chpst</b> if <b>xchpst</b> is  not
                   present on the system.

   <b>chpst-compatible</b> <b>options</b>
       The options compatible with classic <b>chpst</b> are as follows:

       <b>-u</b> <u>user</u>[<u>:group</u>]...
                 Set  uid,  gid and supplementary groups. Prepend the argument with a colon for numerical inputs
                 rather than names to be looked up. If no group is specified then the specified user's group  is
                 used. There is no space within the argument.

       <b>-U</b> <u>user</u>[<u>:group</u>]
                 Like  <b>-u</b>  but  the  environment  variables  UID  and  GID are set instead of changing the user.
                 Supplementary groups are ignored.

       <b>-b</b> <u>argv0</u>  Set <u>argv[0]</u> to <u>argv0</u> instead of the target executable path when launching the program.

       <b>-e</b> <u>dir</u>    Populate environment.  For every file  within  <u>dir</u>,  the  filename  represents  an  environment
                 variable  that  will be set or unset.  The first line of the corresponding files is the content
                 to be set, with NUL characters replaced by LF and trailing whitespace removed.  If the file  is
                 0  bytes  long  then  the  variable  is  unset.   (So a file with just a newline results in the
                 variable being set with an empty value.)

       <b>-/</b> <u>dir</u>    Run in a chroot.  Change to the <u>dir</u> directory and make it the new root.

       <b>-C</b> <u>dir</u>    Change directory.  Change to the <u>dir</u> directory (after any chroot setting is applied).

       <b>-n</b> <u>inc</u>    Increase niceness by <u>inc</u>, which can be negative, resulting  in  the  process  taking  a  higher
                 priority.

       <b>-l</b> <u>file</u>   Wait for lock. Take a lock out on <u>file</u> and wait to obtain it before proceeding to <b>exec</b>().

       <b>-L</b> <u>file</u>   Try to obtain lock; bail out if it can't be obtained.

       <b>-m</b> <u>bytes</u>  Set soft limit for data and stack segments and virtual memory size and locked memory.

       <b>-d</b> <u>bytes</u>  Set soft limit for data segment size.

       <b>-o</b> <u>files</u>  Set soft limit for the number of open files.

       <b>-p</b> <u>procs</u>  Set soft limit for the number of processes for this user.

       <b>-f</b> <u>bytes</u>  Set soft limit for the size of file that this process may create.

       <b>-c</b> <u>bytes</u>  Set soft limit for the size of core this process may dump.

       <b>-t</b> <u>seconds</u>
                 Set soft limit for the amount of CPU time this process may consume.

       <b>-v</b>        Be verbose. This option may be repeated for increased verbosity to support debugging.

       <b>-V</b>        Show <b>xchpst</b> version number.

       <b>-P</b>        Make this process the process group leader, allocating a new session idea.

       <b>-0</b>        Close stdin.

       <b>-1</b>        Close stout.

       <b>-2</b>        Close stderr.

   <b>Resource</b> <b>limit</b> <b>options</b>
       The resource limit options above take a parameter in one of the following forms:

       <u>soft</u>       Set  only  the  soft  limit,  in  the  style  of  <b>chpst</b>  and <b>softlimit</b>, unless <b>--hardlimit</b> has
                  previously been specified, in which case both soft and hard limits are defined, in  the  style
                  of <b>prlimit</b>.

       <u>soft</u>:      Set only the soft limit, in the style of <u><a href="../man1/prlimit.1.html">prlimit</a></u>(1).

       <u>soft</u>:<u>hard</u>  Set soft and hard limits.

       :<u>hard</u>      Set only the hard limit.

       +<u>both</u>      Set both soft and hard limits.

       An unlimited limit may be selected by any value of ‘-1’, ‘unlimited’ or ‘infinity’.

   <b>Emulating</b> <b>ancestor</b> <b>tools</b>
       When  invoked  as  <b>chpst</b>,  <b>envdir</b>,  <b>envuidgid</b>,  <b>pgrphack</b>,  <b>setlock</b>,  <b>setuidgid</b>,  or <b>softlimit</b>, the <b>xchpst</b>
       executable emulates the corresponding tools from the “runit” or “daemontools” packages respectively.   As
       an additional feature, all these tools when so invoked, accept the <b>-v</b> option to increase verbosity.

   <b>Options</b> <b>file</b>
       An  options  file  specifies  additional options to apply, one option per line.  Each line begins with an
       option name.  Options that take an argument have horizontal white space and the  option  value  following
       the  option  name.  Comments begin with a ‘#’ character and may only be preceded by whitespace, otherwise
       they will be interpreted as part of an option name or value.

       Example options file:

             # Comment line
             private-tmp
             app my app
             run-dir
             pid-ns

</pre><h4><b>EXIT</b> <b>STATUS</b></h4><pre>
       0       The default exit status when <b>--exit</b> is specified is 0. This can be used for  a  quick  test  that
               <b>xchpst</b> is available on the system in shell scripts and that the given options are supported.

       100     The  return  code when an invalid option or option argument is specified, including if a username
               cannot be resolved, for example.

       111     When the requested process state cannot be changed.

       other   The <b>--exit</b> option takes an optional argument with a return code to use.

       If there is no error and the intended application is <b>exec</b>()'d, the  exit  status  will  be  that  of  the
       application, not <b>xchpst</b>.

   <b>Behaviour</b> <b>on</b> <b>failure</b> <b>to</b> <b>apply</b>
       The  table  below  divides  the  process change options between those that abort on failure to effect the
       requested change (with error code 111) and those that continue execution. Nonsense  configuration  values
       always fail with error code 100.

       ┌──────────────────┬──────────────────────────────────────────┬─────────────────────────────────────────┐
       │ <b>Option</b> <b>group</b>     │ <b>Abort</b> <b>on</b> <b>error</b>                           │<b>Continue</b> <b>on</b> <b>error</b>                        │
       ├──────────────────┼──────────────────────────────────────────┼─────────────────────────────────────────┤
       │ chpst            │ u e / C n L l m d s a o p f c r t        │U b 0 1 2                                │
       ├──────────────────┼──────────────────────────────────────────┼─────────────────────────────────────────┤
       │ rlimit           │ limit-memlock limit-msgqueue limit-nice  │                                         │
       │                  │ limit-rtprio     limit-rttime    limit-  │                                         │
       │                  │ sigpending limit-locks                   │                                         │
       ├──────────────────┼──────────────────────────────────────────┼─────────────────────────────────────────┤
       │ namespaces       │ fork-join  new-root   mount-ns   net-ns  │                                         │
       │                  │ user-ns pid-ns uts-ns net-adopt          │                                         │
       ├──────────────────┼──────────────────────────────────────────┼─────────────────────────────────────────┤
       │ capabilities [1] │                                          │cap-bs-keep cap-bs-drop caps-keep caps-  │
       │                  │                                          │drop                                     │
       ├──────────────────┼──────────────────────────────────────────┼─────────────────────────────────────────┤
       │ filesystem       │ private-run   private-tmp  protect-home  │                                         │
       │                  │ ro-sys ro-home ro-etc run-dir state-dir  │                                         │
       │                  │ cache-dir log-dir                        │                                         │
       ├──────────────────┼──────────────────────────────────────────┼─────────────────────────────────────────┤
       │ other            │                                          │cpus cpu-scheduler io-scheduler no-new-  │
       │                  │                                          │privs umask oom login                    │
       └──────────────────┴──────────────────────────────────────────┴─────────────────────────────────────────┘

       [1]  If capabilities are not available in the kernel, errors are ignored.  Otherwise any  failure  causes
            an abort.  See “BUGS”

</pre><h4><b>NOTES</b></h4><pre>
   <b>systemd</b> <b>option</b> <b>mapping</b>
       The  table  below shows how some systemd service directives map onto <b>xchpst</b> options.  See <u><a href="../man5/systemd.exec.5.html">systemd.exec</a></u>(5)
       This is not an exhaustive list.
       ┌──────────────────────────────┬───────────────┬────────────────────────────────────────────────────────┐
       │ <b>systemd</b>                      │ <b>xchpst</b>        │ <b>Differences</b>                                            │
       ├──────────────────────────────┼───────────────┼────────────────────────────────────────────────────────┤
       │ ProtectSystem=yes            │ ro-sys        │                                                        │
       ├──────────────────────────────┼───────────────┼────────────────────────────────────────────────────────┤
       │ ProtectSystem=full           │ ro-sys ro-etc │                                                        │
       ├──────────────────────────────┼───────────────┼────────────────────────────────────────────────────────┤
       │ ProtectHome=read-only        │ ro-home       │                                                        │
       ├──────────────────────────────┼───────────────┼────────────────────────────────────────────────────────┤
       │ ProtectHome=tmpfs            │ protect-home  │                                                        │
       ├──────────────────────────────┼───────────────┼────────────────────────────────────────────────────────┤
       │ PrivateTmp=yes               │ private-tmp   │                                                        │
       ├──────────────────────────────┼───────────────┼────────────────────────────────────────────────────────┤
       │ CapabilityBoundingSet=       │ cap-bs-keep   │                                                        │
       ├──────────────────────────────┼───────────────┼────────────────────────────────────────────────────────┤
       │ CapabilityBoundingSet=~      │ cap-bs-drop   │                                                        │
       ├──────────────────────────────┼───────────────┼────────────────────────────────────────────────────────┤
       │ AmbientCapabilities=         │ caps-keep     │                                                        │
       ├──────────────────────────────┼───────────────┼────────────────────────────────────────────────────────┤
       │ AmbientCapabilities=~        │ caps-drop     │                                                        │
       ├──────────────────────────────┼───────────────┼────────────────────────────────────────────────────────┤
       │ NoNewPrivileges=yes          │ no-new-privs  │                                                        │
       ├──────────────────────────────┼───────────────┼────────────────────────────────────────────────────────┤
       │ CPUAffinity=                 │ cpus          │ use <u><a href="../man1/taskset.1.html">taskset</a></u>(1) format                                  │
       ├──────────────────────────────┼───────────────┼────────────────────────────────────────────────────────┤
       │ CPUSchedulingPolicy=         │ cpu-scheduler │                                                        │
       ├──────────────────────────────┼───────────────┼────────────────────────────────────────────────────────┤
       │ IOSchedulingClass=           │ io-scheduler  │                                                        │
       │ IOSchedulingPriority=        │               │                                                        │
       ├──────────────────────────────┼───────────────┼────────────────────────────────────────────────────────┤
       │ UMask=                       │ umask         │                                                        │
       ├──────────────────────────────┼───────────────┼────────────────────────────────────────────────────────┤
       │ RuntimeDirectory=            │ run-dir       │ Leaf name governed by target command or ‘app’ option   │
       ├──────────────────────────────┼───────────────┼────────────────────────────────────────────────────────┤
       │ StateDirectory=              │ state-dir     │ Leaf name governed by target command or ‘app’ option   │
       ├──────────────────────────────┼───────────────┼────────────────────────────────────────────────────────┤
       │ CacheDirectory=              │ cache-dir     │ Leaf name governed by target command or ‘app’ option   │
       ├──────────────────────────────┼───────────────┼────────────────────────────────────────────────────────┤
       │ LogsDirectory=               │ log-dir       │ Leaf name governed by target command or ‘app’ option   │
       ├──────────────────────────────┼───────────────┼────────────────────────────────────────────────────────┤
       │ OOMScoreAdjust=              │ oom           │                                                        │
       ├──────────────────────────────┼───────────────┼────────────────────────────────────────────────────────┤
       │ User=                        │ u             │ Check  syntax. In particular, numeric ids begin with a │
       │ Group=                       │               │ colon.                                                 │
       ├──────────────────────────────┼───────────────┼────────────────────────────────────────────────────────┤
       │ User=  with  ExecStart=+  or │ U             │ In these  modes,  <b>systemd</b>  does  not  drop  the  user, │
       │ ExecStart=!                  │               │ expecting the application to do that, but instead uses │
       │                              │               │ the  specified  username  for  other options.  In this │
       │                              │               │ case the environment variable setting by <b>xchpst</b> is not │
       │                              │               │ useful but other options like ‘run-dir’ will  use  the │
       │                              │               │ right user.                                            │
       └──────────────────────────────┴───────────────┴────────────────────────────────────────────────────────┘

   <b>Resource</b> <b>limit</b> <b>option</b> <b>mapping</b>
       The table below shows how <b>xchpst</b> resource limit options correspond to those of other tools.
       ┌──────────────────┬───────┬───────────┬─────────┬─────────┬──────────────────┐
       │ <b>xchpst</b>           │ <b>chpst</b> │ <b>softlimit</b> │ <b>prlimit</b> │ <b>ulimit</b>  │ <b>systemd</b>          │
       ├──────────────────┼───────┼───────────┼─────────┼─────────┼──────────────────┤
       │ d                │ d     │ d         │ d       │ d       │ LimitDATA=       │
       ├──────────────────┼───────┼───────────┼─────────┼─────────┼──────────────────┤
       │ o                │ o     │ o         │ n       │ n       │ LimitNOFILE=     │
       ├──────────────────┼───────┼───────────┼─────────┼─────────┼──────────────────┤
       │ p                │ p     │ p         │ u       │ u       │ LimitNPROC=      │
       ├──────────────────┼───────┼───────────┼─────────┼─────────┼──────────────────┤
       │ f                │ f     │ f         │ f       │ f       │ LimitFSIZE=      │
       ├──────────────────┼───────┼───────────┼─────────┼─────────┼──────────────────┤
       │ c                │ c     │ c         │ c       │ c       │ LimitCORE=       │
       ├──────────────────┼───────┼───────────┼─────────┼─────────┼──────────────────┤
       │ t                │ t     │ t         │ t       │ t       │ LimitCPU=        │
       ├──────────────────┼───────┼───────────┼─────────┼─────────┼──────────────────┤
       │ r                │       │ r         │ m       │ m       │ LimitRSS=        │
       ├──────────────────┼───────┼───────────┼─────────┼─────────┼──────────────────┤
       │ s                │       │ s         │ s       │ s       │ LimitSTACK=      │
       ├──────────────────┼───────┼───────────┼─────────┼─────────┼──────────────────┤
       │ a                │       │ a         │ v       │ v       │ LimitAS=         │
       ├──────────────────┼───────┼───────────┼─────────┼─────────┼──────────────────┤
       │ m                │ m     │ m         │ d s l v │ d s l v │ LimitDATA=       │
       │                  │       │           │         │         │ LimitSTACK=      │
       │                  │       │           │         │         │ LimitAS=         │
       │                  │       │           │         │         │ LimitMEMLOCK=    │
       ├──────────────────┼───────┼───────────┼─────────┼─────────┼──────────────────┤
       │ limit-memlock    │       │ l         │ l       │ l       │ LimitMEMLOCK=    │
       ├──────────────────┼───────┼───────────┼─────────┼─────────┼──────────────────┤
       │ limit-msgqueue   │       │           │ q       │ q       │ LimitMSGQUEUE=   │
       ├──────────────────┼───────┼───────────┼─────────┼─────────┼──────────────────┤
       │ limit-nice       │       │           │ e       │ e       │ LimitNICE=       │
       ├──────────────────┼───────┼───────────┼─────────┼─────────┼──────────────────┤
       │ limit-rtprio     │       │           │ r       │ r       │ LimitRTPRIO=     │
       ├──────────────────┼───────┼───────────┼─────────┼─────────┼──────────────────┤
       │ limit-rttime     │       │           │ y       │ R       │ LimitRTTIME=     │
       ├──────────────────┼───────┼───────────┼─────────┼─────────┼──────────────────┤
       │ limit-sigpending │       │           │ i       │ i       │ LimitSIGPENDING= │
       ├──────────────────┼───────┼───────────┼─────────┼─────────┼──────────────────┤
       │ limit-locks      │       │           │ x       │ x       │ LimitLOCKS=      │
       └──────────────────┴───────┴───────────┴─────────┴─────────┴──────────────────┘
       The following options from the <b>bash</b> <b>ulimit</b> command are not available: <b>b</b> <b>k</b> <b>p</b> <b>P</b> <b>T</b>.

</pre><h4><b>BUGS</b></h4><pre>
       The <b>--cpu-scheduler</b> option should accept more scheduling policies and should accept additional parameters
       to  qualify  those  policies.  Currently unknown policy names are treated as the default Linux scheduling
       policy.

       When the kernel supports capabilities but not specific  capabilities  that  have  been  requested  to  be
       dropped or kept, <b>xchpst</b> should continue rather than aborting.

</pre><h4><b>EXAMPLES</b></h4><pre>
       Testing the emulation of ‘envdir’:
             <b>xchpst</b> <b>-b</b> <b>envdir</b> <b>--</b> <b>xchpst</b>

       Launch with read-only filesystem if <b>xchpst</b> is available, else use <b>chpst</b>:
             <b>xchpst</b>   <b>--exit</b>   <b>&amp;&amp;</b>   <b>exec</b>  <b>xchpst</b>  <b>--ro-sys</b>  <b>-l</b>  <b>/var/lock/ntpsec-ntpdate</b>  <b>ntpd;</b>  <b>exec</b>  <b>chpst</b>  <b>-l</b>
             <b>/var/log/ntpsec-ntpdate</b> <b>ntpd</b>

       Drop a capability from the bounding set:
             <b>xchpst</b> <b>--cap-bs-drop</b> <b>CAP_SYS_ADMIN</b> <b>--</b> <b>acmed</b>

       Drop user while retaining some capabilities:
             <b>xchpst</b> <b>-u</b> <b>:500:500</b> <b>--caps-keep</b> <b>CAP_DAC_OVERRIDE</b> <b>fakeroot</b> <b>/usr/sbin/gpm</b>  <b>-D</b>  <b>-m</b>  <b>/dev/input/mice</b>  <b>-t</b>
             <b>exps2</b>

   <b>Diagnostics</b>
       To  see  what is going on, including options enabled implicitly due to other options, add the ‘--verbose’
       option.

       Use ‘--login’ without a command name to explore the hardened environment from a shell.

       You can enter the created namespaces (but not other aspects of hardening), including any synthesised root
       filesystem, by identifying the process id of the hardened application and running:
             <b>nsenter</b> <b>-a</b> <b>-t</b> <b>PID</b>

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <u><a href="../man8/chpst.8.html">chpst</a></u>(8), <u><a href="../man8/runit.8.html">runit</a></u>(8),  <u><a href="../man1/unshare.1.html">unshare</a></u>(1),  <u><a href="../man1/capsh.1.html">capsh</a></u>(1),  <u><a href="../man1/taskset.1.html">taskset</a></u>(1),  <u><a href="../man1/chrt.1.html">chrt</a></u>(1),  <u><a href="../man1/choom.1.html">choom</a></u>(1),  <u><a href="../man5/proc_pid_oom_score_adj.5.html">proc_pid_oom_score_adj</a></u>(5),
       <u><a href="../man1/prlimit.1.html">prlimit</a></u>(1), <u><a href="../man2/prlimit.2.html">prlimit</a></u>(2), <u><a href="../man7/namespaces.7.html">namespaces</a></u>(7), <u><a href="../man7/capabilities.7.html">capabilities</a></u>(7)

</pre><h4><b>AUTHORS</b></h4><pre>
       Andrew Bower &lt;<u><a href="mailto:andrew@bower.uk">andrew@bower.uk</a></u>&gt;

Debian                                           March 21, 2025                                        <u><a href="../man8/xchpst.8.html">xchpst</a></u>(8)
</pre>
 </div>
</div></section>
</div>
</body>
</html>