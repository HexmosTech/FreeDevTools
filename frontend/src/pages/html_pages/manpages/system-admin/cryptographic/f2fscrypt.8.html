<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>f2fscrypt - f2fs filesystem encryption utility</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/f2fs-tools">f2fs-tools_1.16.0-1.1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       f2fscrypt - f2fs filesystem encryption utility

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>f2fscrypt</b> <b>add_key</b> <b>-S</b> [ <b>-k</b> <u>keyring</u> ] [<b>-v</b>] [<b>-q</b>] [  <u>path</u> ... ]
       <b>f2fscrypt</b> <b>new_session</b>
       <b>f2fscrypt</b> <b>get_policy</b> <u>path</u> ...
       <b>f2fscrypt</b> <b>set_policy</b> <u>policy</u> <u>path</u> ...

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>f2fscrypt</b> performs encryption management for f2fs file systems.

</pre><h4><b>COMMANDS</b></h4><pre>
       <b>f2fscrypt</b> <b>add_key</b> <b>-S</b> [ <b>-k</b> <u>keyring</u> ] [<b>-v</b>] [<b>-q</b>] [  <u>path</u> ... ]
              Prompts  the  user  for  a passphrase and inserts it into the specified keyring.  If no keyring is
              specified, f2fscrypt will use the session keyring if it exists or the user session keyring  if  it
              does not.

              If  one  or  more  directory  paths  are  specified, f2fscrypt will try to set the policy of those
              directories to use the key just entered by the user.

       <b>f2fscrypt</b> <b>get_policy</b> <u>path</u> ...
              Print the policy for the directories specified on the command line.

       <b>f2fscrypt</b> <b>new_session</b>
              Give the invoking process (typically a shell) a new session keyring, discarding  its  old  session
              keyring.

       <b>f2fscrypt</b> <b>set_policy</b> <u>policy</u> <u>path</u> ...
              Sets  the policy for the directories specified on the command line.  All directories must be empty
              to set the policy; if the directory already has a policy established, f2fscrypt will validate that
              the policy matches what was specified.  A policy is an encryption key identifier consisting of  16
              hexadecimal characters.

</pre><h4><b>NOTES</b></h4><pre>
       The target directory must be empty.

</pre><h4><b>EXAMPLE</b></h4><pre>
       Formats a f2fs filesystem that supports encrypt.

       # mkfs.f2fs -O encrypt /dev/sdxx
       # mount /dev/sdxx /encrypted/
       # mkdir /encrypted/dir

       First create the key in the keyring use an simple salt
       (or generate a random salt).
       Then use it to set the policy for the directory to be encrypted.

       # f2fscrypt add_key -S 0x1234
         Enter passphrase (echo disabled):
         Added key with descriptor [28e21cc0c4393da1]

       # f2fscrypt set_policy 28e21cc0c4393da1 /encrypted/dir
         Key with descriptor [28e21cc0c4393da1] applied to /encrypted/dir.

       # touch /encrypted/dir/test.txt
       # ls -l /encrypted/dir/
         -rw-r--r--. 1 root root 0 Mar  5 21:41 test.txt

       After each reboot, the same command can be used set the key for
       decryption of the directory and its descendants.

       # ls -l /encrypted/dir/
         -rw-r--r--. 1 root root 0 Mar  5 21:41 zbx7tsUEMLzh+AUVMkQcnB

       # f2fscrypt get_policy /encrypted/dir/
         /encrypted/dir/: 28e21cc0c4393da1

       # f2fscrypt add_key -S 0x1234
         Enter passphrase (echo disabled):
         Added key with descriptor [28e21cc0c4393da1]

       # ls -l /encrypted/dir/
         -rw-r--r--. 1 root root 0 Mar  5 21:41 test.txt

       Show process keyrings.

       # keyctl show
         Session Keyring
           84022412 --alswrv      0     0  keyring: _ses
          204615789 --alswrv      0 65534   \_ keyring: _uid.0
          529474961 --alsw-v      0     0   \_ logon: f2fs:28e21cc0c4393da1

</pre><h4><b>AUTHOR</b></h4><pre>
       Written  by  Kinglong  Mee &lt;<a href="mailto:kinglongmee@gmail.com">kinglongmee@gmail.com</a>&gt;, Migrated from e4crypt that Written by Michael Halcrow
       &lt;<a href="mailto:mhalcrow@google.com">mhalcrow@google.com</a>&gt;, Ildar Muslukhov &lt;<a href="mailto:muslukhovi@gmail.com">muslukhovi@gmail.com</a>&gt;, and Theodore Ts'o &lt;<a href="mailto:tytso@mit.edu">tytso@mit.edu</a>&gt;

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man1/keyctl.1.html">keyctl</a></b>(1), <b><a href="../man8/mkfs.f2fs.8.html">mkfs.f2fs</a></b>(8), <b><a href="../man8/mount.8.html">mount</a></b>(8).

                                                                                                    <u><a href="../man8/F2FSCRYPT.8.html">F2FSCRYPT</a></u>(8)
</pre>
 </div>
</div></section>
</div>
</body>
</html>