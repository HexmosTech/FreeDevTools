<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>dahdi_span_assignments - handle DAHDI spans assignments</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/dahdi">dahdi_3.1.0-2.1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       dahdi_span_assignments - handle DAHDI spans assignments

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>dahdi_span_assignments</b> <b>[-v|--verbose]</b> <b>[-n|--dry-run]</b> <b>&lt;add|remove|auto&gt;</b> <b>[</b><u>devpath</u><b>...]</b>

       <b>dahdi_span_assignments</b> <b>[-v|--verbose]</b> <b>list</b> <b>[</b><u>devpath</u><b>...]</b>

       <b>dahdi_span_assignments</b> <b>[-v|--verbose]</b> <b>[-k|--key</b> <u>key</u><b>]</b> <b>dumpconfig</b>

       <b>dahdi_span_assignments</b> <b>-h|--help</b>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       Channels  in  DAHDI  devices  (such  as  DAHDI PCI cards) are groups to logical units called "spans" (for
       example: a port in a digital card is a span).  When the kernel module parameter <b>dahdi.auto_assign_span</b> is
       unset, DAHDI devices that register with DAHDI don't cause their spans to be automatically assigned.

       This allows user-space to order DAHDI to assign them to specific span  and  channel  numbers.  That  way,
       specific  spans  on  specific  DAHDI  devices  may  be  assigned  with  specific span and channel numbers
       <b>regardless</b> of the registration order of the hardware (or if all hardware is present at all).

       <b>dahdi_span_assignments</b> is used to assign those spans or to help creating the configuration file  used  in
       their assignment: <b>/etc/dahdi/assigned-spans.conf</b> <b>.</b>

</pre><h4><b>SUB-COMMANDS</b></h4><pre>
       There are several sub-commands.

       All  sub-commands  take  an  optional list of paths to SysFS nodes of devices. If given, the command will
       only operate on those DAHDI devices. The default is to operate on all devices (which  would  normally  be
       the sane case when running from the command-line).

       <b>add</b> <b>[</b><u>devpath</u> <b>...]</b>
              Applies to all devices or to those listed on the command line.  Parameters are paths (in SysFS) to
              DAHDI devices with unassigned spans.

              The command will assign spans with DAHDI according to configuration in <b>assigned-spans.conf</b>.

              If  no  line  matches  the  span,  or if the assignment for it fails (it is not available) it will
              remain unassigned.

              If any of the span settings fails (the span number or range of channels is already  in  use),  the
              program  will  print  a  message,  but continue applying the others. In such a case you should fix
              assigned-spans.conf and re-run <b>add</b> (or run <b>auto</b> to give those channels the first  available  range
              and regenerate the file with 'dahdi_genconf assignedspans').

       <b>remove</b> <b>[</b><u>devpath</u> <b>...]</b>
              Applies to all devices or to those listed on the command line.  Parameters are paths (in SysFS) to
              DAHDI devices with assigned spans.

              The command will un-assign them.

       <b>auto</b> <b>[</b><u>devpath</u> <b>...]</b>
              Applies to all devices or to those listed on the command line.  Parameters are paths (in SysFS) to
              DAHDI devices with unassigned spans.

              Each   span   is   assigned   to   first   available  span  number  and  channel  numbers,  as  if
              <b>dahdi.auto_assign_span</b> was set. The configuration file doesn't affect these assignments.

       <b>list</b>
              List all spans in the system.

       <b>dumpconfig</b>
              List all assigned spans in the system in a format fit to be used in <b>assigned-spans.conf</b>. Use  this
              to  generate a configuration file after you have (automatically or manually) assigned all existing
              spans.

              <b>dahdi_genconf</b> <b>assignedspans</b> uses this command internally.

</pre><h4><b>OPTIONS</b></h4><pre>
       <b>-v</b> <b>--verbose</b>
              Verbose output.

       <b>-n</b> <b>--dry-run</b>
              Don't assign / un-assign spans. Only print commands used to do so.

       <b>-k</b> <u>key</u>
              For <b>dumpconfig</b> - The key by which to identify the hardware in the generated  configuration.  Legal
              values:

              <b>hwid</b>
                     Hardware  identifier  (e.g.:  software-readable serial number). This is the default. If the
                     device has no hwid, devpath is used.

              <b>location</b>
                     The location field (file) in the SysFS device node (directory) for the DAHDI device. If not
                     available (typically: DAHDI version &lt;= 2.7.x), devpath is used.

              <b>devpath</b>
                     Path in SysFS to the device node.

</pre><h4><b>CONFIGURATION</b></h4><pre>
       <b>/etc/dahdi/assigned-spans.conf</b> is a file with lines specifying assignment of spans.

       Empty lines or lines beginning with '#' are ignored.

       Each line is in the format of:

       <u>ID</u>        <u>spanspec</u> <u>...</u>

       The <u>ID</u> field specifies the DAHDI device and the <u>spanspecs</u> define how to assign its spans. A line may have
       multiple <u>spanspecs</u> in a single line (though dumpconfig generates a configuration with one per line).

   <b>Span</b> <b>Identifier</b>
       A DAHDI device may be specified either by a hardware identifier (a software  readable  serial  number  or
       whatever)  or  the location in which it is installed on the system. The former makes it simpler to change
       connector / slot whereas the latter makes it simpler to replace a unit.

       The value in this field is matched (when the commands <b>add</b> and <b>remove</b>) are used) to the following values:

        <u>hwid</u>
        <b>@</b><u>location</u>
        <u>devpath</u>

       See above for their descriptions. The value may include shell wildcards: *, ? and [], which are  used  in
       the  match.  The  values  to  be matched are first cleaned up: '!' is replaced with '/' and any character
       beyond "a-zA-Z0-9/:.-" is removed.

   <b>Span</b> <b>Specification</b>
       Each line should have one or more span specifications: this is the value used to assign a span with DAHDI
       in the SysFS interface. A specification has three colon-separated numbers:

       <u>rel_span_no:span_no:first_chan</u>

       for instance, the following are four span specifications for a  quad-E1  device:  1:6:53  2:7:84  3:8:115
       4:9:146 occupying spans 6-9 and channels 53-176.

       <b>rel_span_no</b>
              The relative number of the span in the device. E.g.: port number.

       <b>span_no</b>
              The desired DAHDI span number. Must be available.

       <b>first_chan</b>
              The  desired  DAHDI  channel  number for the first DAHDI channel in the span.  All channels of the
              span will be assigned following it and hence that space must be available.

</pre><h4><b>ENVIRONMENT</b></h4><pre>
       <b>DAHDICONFDIR</b>
              The directory in  which  assigned-spans.conf  resides.  /etc/dahdi  if  not  overridden  from  the
              environment.

       <b>DAHDISASSIGNEDSPANSCONF</b>
              The path to assigned-spans.conf resides. /etc/dahdi/assigned-spans.conf if not overridden from the
              environment.

       <b>SPAN_ASSIGNMENTS_KEY</b>
              The default value for -k . Defaults to "hwid" if not overridden from the environment.

</pre><h4><b>FILES</b></h4><pre>
       <b>/etc/dahdi/assigned-spans.conf</b>
              The default location for the configuration file.

       <b>/sys/bus/dahdi_devices/devices/</b><u>device</u>
              SysFS node for the device. In this directory reside the following files, among others:

              <b>location</b>
                     The value of the device's location field.

              <b>assign_span,</b> <b>unassign_span,</b> <b>auto_assign</b>
                     Write only files for the operations. Used by <b>add</b>, <b>remove</b> and <b>auto</b>, respectively.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <a href="../man8/dahdi_span_types.8.html">dahdi_span_types</a>(8), <a href="../man8/dahdi_genconf.8.html">dahdi_genconf</a>(8), <a href="../man8/dahdi_cfg.8.html">dahdi_cfg</a>(8)

</pre><h4><b>AUTHOR</b></h4><pre>
       dahdi_span_assignments  was  written  by  Oron  Peled.   This  manual  page was written by Tzafrir Cohen.
       Permission is granted to copy, distribute and/or modify this document under the terms of the GNU  General
       Public License, Version 2 any  later version published by the Free Software Foundation.

                                                   23 Jan 2014                         <u><a href="../man8/DAHDI_SPAN_ASSIGNMENTS.8.html">DAHDI_SPAN_ASSIGNMENTS</a></u>(8)
</pre>
 </div>
</div></section>
</div>
</body>
</html>