<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>sg_sanitize - remove all user data from disk with SCSI SANITIZE command</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/sg3-utils">sg3-utils_1.48-2ubuntu1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       sg_sanitize - remove all user data from disk with SCSI SANITIZE command

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>sg_sanitize</b>  [<u>--ause</u>]  [<u>--block</u>] [<u>--count=OC</u>] [<u>--crypto</u>] [<u>--dry-run</u>] [<u>--desc</u>] [<u>--early</u>] [<u>--fail</u>] [<u>--help</u>]
       [<u>--invert</u>] [<u>--ipl=LEN</u>] [<u>--overwrite</u>] [<u>--pattern=PF</u>] [<u>--quick</u>]  [<u>--test=TE</u>]  [<u>--timeout=SECS</u>]  [<u>--verbose</u>]
       [<u>--version</u>] [<u>--wait</u>] [<u>--zero</u>] [<u>--znr</u>] <u>DEVICE</u>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This  utility  invokes the SCSI SANITIZE command. This command was first introduced in the SBC-3 revision
       27 draft. The purpose of the sanitize operation is to alter the information  in  the  cache  and  on  the
       medium  of  a  logical unit (e.g. a disk) so that the recovery of user data is not possible. If that user
       data cannot be erased, or is in the process of being erased, then the sanitize operation prevents  access
       to that user data.

       Once  a  SCSI  SANITIZE  command  has  successfully  started,  then user data from that disk is no longer
       available. Even if the disk is power  cycled,  the  sanitize  operation  will  continue  after  power  is
       re-instated until it is complete.

       This  utility  requires  either  the  <u>--block</u>,  <u>--crypto</u>, <u>--fail</u> or <u>--overwrite</u> option. With the <u>--block</u>,
       <u>--crypto</u> or <u>--overwrite</u> option the user is given 15 seconds to reconsider whether they wish to erase  all
       the  data  on  a  disk,  unless  the  <u>--quick</u> option is given in which case the sanitize operation starts
       immediately. The disk's INQUIRY response strings are printed out just in case the wrong <u>DEVICE</u>  has  been
       given.

       If  the <u>--early</u> option is given then this utility will exit soon after starting the SANITIZE command with
       the IMMED bit set. The user can monitor the progress of the  sanitize  operation  with  the  "sg_requests
       --num=9999  --progress"  which  sends  a  REQUEST SENSE command every 30 seconds. Otherwise if the <u>--wait</u>
       option is given then this utility will wait until the SANITIZE command completes (or fails) and that  can
       be many hours.

       If the <u>--wait</u> option is not given then the SANITIZE command is started with the IMMED bit set. If neither
       the  <u>--early</u> nor the <u>--wait</u> options are given then this utility sends a REQUEST SENSE command after every
       60 seconds until there are no more progress indications in which case this  utility  exits  silently.  If
       additionally  the  <u>--verbose</u> option is given the exit will be marked by a short message that the sanitize
       seems to have succeeded.

</pre><h4><b>OPTIONS</b></h4><pre>
       Arguments to long options are mandatory  for  short  options  as  well.   The  options  are  arranged  in
       alphabetical order based on the long option name.

       <b>-A</b>, <b>--ause</b>
              sets  the  AUSE  bit  in  the  cdb. AUSE is an acronym for "allow unrestricted sanitize exit". The
              default action is to leave the AUSE bit cleared.

       <b>-B</b>, <b>--block</b>
              perform a "block erase" sanitize operation.

       <b>-c</b>, <b>--count</b>=<u>OC</u>
              where <u>OC</u> is the "overwrite count" associated with the "overwrite" sanitize operation. <u>OC</u> can be  a
              value between 1 and 31 and 1 is the default.

       <b>-C</b>, <b>--crypto</b>
              perform a "cryptographic erase" sanitize operation. Note that this erase is often very quick as it
              simply overwrites an internal cryptographic key with a new value. Those keys are not accessible to
              users  and  encrypt all data written then decrypt all data read from the media. The primary reason
              for doing that is to make this operation fast. This operation can not be reversed.

       <b>-d</b>, <b>--desc</b>
              sets the DESC field in the REQUEST SENSE command used for polling. By default this field is set to
              zero. A REQUEST SENSE polling loop is used after the SANITIZE command  is  issued  (assuming  that
              neither  the  <u>--early</u>  nor  the  <u>--wait</u>  option  have been given) to check on the progress of this
              command as it can take some time.

       <b>-D</b>, <b>--dry-run</b>
              this option will parse the command line, do all the preparation but  bypass  the  actual  SANITIZE
              command.

       <b>-e</b>, <b>--early</b>
              the  default  action  of  this  utility is to poll the disk every 60 seconds to fetch the progress
              indication until the sanitize is finished. When this  option  is  given  this  utility  will  exit
              "early"  as  soon  as the SANITIZE command with the IMMED bit set to 1 has been acknowledged. This
              option and <u>--wait</u> cannot both be given.

       <b>-F</b>, <b>--fail</b>
              perform an "exit failure mode" sanitize  operation.  Typically  requires  the  preceding  SANITIZE
              command to have set the AUSE bit.

       <b>-h</b>, <b>--help</b>
              print out the usage information then exit.

       <b>-i</b>, <b>--ipl</b>=<u>LEN</u>
              set  the  initialization  pattern  length  to <u>LEN</u> bytes. By default it is set to the length of the
              pattern file (<u>PF</u>) or 4 if the <u>--zero</u> option is given. Only active when the <u>--overwrite</u>  option  is
              also  given.  It  is  the number of bytes from the <u>PF</u> file that will be used as the initialization
              pattern (if the <u>--zero</u> option is not given).  The minimum size is 1 byte and the  maximum  is  the
              logical  block  size of the <u>DEVICE</u> (and not to exceed 65535). If <u>LEN</u> exceeds the <u>PF</u> file size then
              the initialization pattern is padded with zeros.

       <b>-I</b>, <b>--invert</b>
              set the INVERT bit in  the  overwrite  service  action  parameter  list.  This  only  affects  the
              "overwrite" sanitize operation. The default is a clear INVERT bit. When the INVERT bit is set then
              the initialization pattern is inverted between consecutive overwrite passes.

       <b>-O</b>, <b>--overwrite</b>
              perform  an "overwrite" sanitize operation. When this option is given then the <u>--pattern=PF</u> or the
              <u>--zero</u> option is required.

       <b>-p</b>, <b>--pattern</b>=<u>PF</u>
              where <u>PF</u> is the  filename  of  a  file  containing  the  initialization  pattern  required  by  an
              "overwrite"  sanitize  operation.  The  length  of  this  file  will  be used as the length of the
              initialization pattern unless the <u>--ipl=LEN</u> option is given.  The  length  of  the  initialization
              pattern must be from 1 to the logical block size of the <u>DEVICE</u>.

       <b>-Q</b>, <b>--quick</b>
              the  default  action  (i.e.  when  the  option  is  not  given)  is to give the user 15 seconds to
              reconsider doing a sanitize operation on the <u>DEVICE</u>.  When this option is given  that  step  (i.e.
              the 15 second warning period) is skipped.

       <b>-T</b>, <b>--test</b>=<u>TE</u>
              set  the  TEST  field  in  the  overwrite  service  action  parameter  list. This only affects the
              "overwrite" sanitize operation. The default is to place 0 in that field.

       <b>-t</b>, <b>--timeout</b>=<u>SECS</u>
              where <u>SECS</u> is the number of seconds used for the timeout on the SANITIZE command.

       <b>-v</b>, <b>--verbose</b>
              increase the level of verbosity, (i.e. debug output).

       <b>-V</b>, <b>--version</b>
              print the version string and then exit.

       <b>-w</b>, <b>--wait</b>
              the default action (i.e. without this option and the <u>--early</u> option)  is  to  start  the  SANITIZE
              command  with  the  IMMED  bit  set  then  poll for the progress indication with the REQUEST SENSE
              command until the sanitize operation is complete (or fails). When this option is  given  (and  the
              <u>--early</u>  option is not given) then the SANITIZE command is started with the IMMED bit clear. For a
              large disk this might take hours. [A cryptographic  erase  operation  could  potentially  be  very
              quick.]

       <b>-z</b>, <b>--zero</b>
              with an "overwrite" sanitize operation this option causes the initialization pattern to be zero (4
              zeros  are  used  as  the initialization pattern). Cannot be used with the <u>--pattern=PF</u> option. If
              this option is given twice (e.g. '-zz') then 0xff is used as the initialization byte.

       <b>-Z</b>, <b>--znr</b>
              sets ZNR bit (zoned no reset) in cdb. Introduced in the SBC-4 revision 7 draft.

</pre><h4><b>NOTES</b></h4><pre>
       The SCSI SANITIZE command is closely related to the ATA SANITIZE command, both are  relatively  new  with
       the  ATA  command being the first one defined.  The SCSI to ATA Translation (SAT) definition for the SCSI
       SANITIZE command appeared in the SAT-3 revision 4 draft.

       When a SAT layer is used to a (S)ATA disk then for OVERWRITE the initialization pattern must be  4  bytes
       long.  So  this  means  either  the  <u>--zero</u> option may be given, or a pattern file (with the <u>--pattern=PF</u>
       option) that is 4 bytes long or set to that length with the <u>--ipl=LEN</u> option.

       The SCSI SANITIZE command is related to the SCSI FORMAT UNIT command. It is likely  that  a  block  erase
       sanitize operation would take a similar amount of time as a format on the same disk (e.g. 9 hours for a 2
       Terabyte  disk).  The  primary  goal  of a format is the configuration of the disk at the end of a format
       (e.g. different logical block size or protection information added). Removal of user data is only a  side
       effect  of  a  format.   With  the SCSI SANITIZE command, removal of user data is the primary goal.  If a
       sanitize operation is interrupted (e.g. the disk is power cycled) then after power up any remaining  user
       data  will  not be available and the sanitize operation will continue. When a format is interrupted (e.g.
       the disk is power cycled) the drafts say very little about the state of the disk. In practice some of the
       original user data may remain and the format may need to be restarted.

       Finding out whether a disk (SCSI or ATA) supports SANITIZE can be a challenge. If the user  really  needs
       to find out and no other information is available then try 'sg_sanitize --fail -vvv &lt;device&gt;' and observe
       the  sense data returned may be the safest approach. Using the <u>--fail</u> variant of this utility should have
       no effect unless it follows an already failed sanitize operation. If the SCSI REPORT SUPPORTED  OPERATION
       CODES  command  (see  sg_opcodes)  is  supported  then using it would be a better approach for finding if
       sanitize is supported.

       If using the dd command to check the before and after data of a particular block (i.e.  check  the  erase
       actually  worked)  it is a good idea to use the 'iflag=direct' operand. Otherwise the first read might be
       cached and returned when the same LBA is read a little later. Obviously this utility should only be  used
       to sanitize data on a disk whose mounted file systems (if any) have been unmounted prior to the erase!

</pre><h4><b>EXAMPLES</b></h4><pre>
       These examples use Linux device names. For suitable device names in other supported Operating Systems see
       the <a href="../man8/sg3_utils.8.html">sg3_utils</a>(8) man page.

       As  a  precaution  if  this  utility  is called with no options then apart from printing a usage message,
       nothing happens:

          sg_sanitize /dev/sdm

       To do a "block erase" sanitize the <u>--block</u> option is required.  The user will be given a 15 second period
       to reconsider, the SCSI SANITIZE command will be started with the IMMED bit set, then this  utility  will
       poll for a progress indication with a REQUEST SENSE command until the sanitize operation is finished:

          sg_sanitize --block /dev/sdm

       To start a "block erase" sanitize and return from this utility once it is started (but not yet completed)
       use the <u>--early</u> option:

          sg_sanitize --block --early /dev/sdm

       If the 15 second reconsideration time is not required add the <u>--quick</u> option:

          sg_sanitize --block --quick --early /dev/sdm

       To do an "overwrite" sanitize a pattern file may be given:

          sg_sanitize --overwrite --pattern=rand.img /dev/sdm

       If the length of that "rand.img" is 512 bytes (a typically logical block size) then to use only the first
       17 bytes (repeatedly) in the "overwrite" sanitize operation:

          sg_sanitize --overwrite --pattern=rand.img --ipl=17 /dev/sdm

       To overwrite with zeros use:
          sg_sanitize --overwrite --zero /dev/sdm

</pre><h4><b>EXIT</b> <b>STATUS</b></h4><pre>
       The  exit  status  of  sg_sanitize  is  0 when it is successful. Otherwise see the <a href="../man8/sg3_utils.8.html">sg3_utils</a>(8) man page.
       Unless the <u>--wait</u> option is given, the exit status may not  reflect  the  success  of  otherwise  of  the
       format.

       The  Unix  convention  is  that "no news is good news" but that can be a bit unnerving after an operation
       like sanitize, especially if it finishes quickly (i.e. before the first progress poll  is  sent).  Giving
       the <u>--verbose</u> option once should supply enough additional output to settle those nerves.

</pre><h4><b>AUTHORS</b></h4><pre>
       Written by Douglas Gilbert.

</pre><h4><b>REPORTING</b> <b>BUGS</b></h4><pre>
       Report bugs to &lt;dgilbert at interlog dot com&gt;.

</pre><h4><b>COPYRIGHT</b></h4><pre>
       Copyright © 2011-2020 Douglas Gilbert
       This  software  is  distributed  under  a  BSD-2-Clause  license.  There  is  NO  warranty;  not even for
       MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man8/sg_requests.8.html">sg_requests</a>(8),</b> <b><a href="../man8/sg_format.8.html">sg_format</a>(8)</b>

sg3_utils-1.46                                    December 2020                                   <u><a href="../man8/SG_SANITIZE.8.html">SG_SANITIZE</a></u>(8)
</pre>
 </div>
</div></section>
</div>
</body>
</html>