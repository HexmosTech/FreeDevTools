<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>opalinkanalysis</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/opa-fastfabric">opa-fastfabric_10.10.3.0.11-1ubuntu3_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       opalinkanalysis

       <b>(Switch)</b>  Encapsulates  the  capabilities  for  link analysis. Additionally, this tool includes cable and
       fabric topology verification capabilities. This tool is built on  top  of  opareport  (and  its  analysis
       capabilities), and accepts the same syntax for input topology and snapshot files.

       In  addition  to  being able to run assorted opareport link analysis reports, and generate human-readable
       output, this tool additionally analyzes the results and appends a concise summary of issues found to  the
       FF_RESULT_DIR/punchlist.csv file.

</pre><h4><b>Syntax</b></h4><pre>
       opalinkanalysis [-U] [-t  <u>portsfile</u>] [-p  <u>ports</u>]  [-T  <u>topology_input</u>]

       [-X  <u>snapshot_input</u>] [-x  <u>snapshot_suffix</u>] [-c  <u>file</u>] reports ...

</pre><h4><b>Options</b></h4><pre>
       --help

                 Produces full help text.

       -U

                 Omits unexpected devices and links in punchlist file from verify reports.

       -t <u>portsfile</u>

                 Specifies  the file with list of local HFI ports used to access fabric(s) for analysis. Default
                 is /etc/opa/ports.

       -p <u>ports</u>

                 Specifies the list of local HFI ports used to access fabrics for analysis.

                 Default is first active port. The first HFI in the system is 1. The first port on an HFI is  1.
                 Uses the format hfi:port,
                 for example:

                 0:0       First active port in system.

                 0:y       Port <u>y</u> within system.

                 x:0       First active port on HFI <u>x</u>.

                 x:y       HFI <u>x</u>, port <u>y</u>.

       -T <u>topology_input</u>

                 Specifies  the  name  of  a  topology  input  file to use. Any  %P markers in this filename are
                 replaced  with  the  hfi:port  being  operated  on  (such  as   0:0   or   1:2).   Default   is
                 /etc/opa/topology.%P.xml.  If  NONE  is  specified,  does not use any topology_input files. See
                 <u>opareport</u> for more information on topology_input files.

       -X <u>snapshot_input</u>

                 Performs analysis using data in  <u>snapshot_input</u>.  <u>snapshot_input</u> must have been generated via a
                 previous opareport -o snapshot run. If an errors report is specified, snapshot must  have  been
                 generated  with  the  opareport  -s  option.  When  this  option  is used, only one port may be
                 specified to select a topology_input file (unless -T specified).  When  this  option  is  used,
                 clearerrors and clearhwerrors reports are not permitted.

       -x <u>snapshot_suffix</u>

                 Creates a snapshot file per selected port. The files are created in FF_RESULT_DIR with names of
                 the form: snapshotSUFFIX. <u>HFI:PORT</u>.xml.

       -c <u>file</u>

                 Specifies the error thresholds configuration file. The default is /etc/opa/opamon.si.conf.

       <u>reports</u>

                 Supports the following reports:

                 errors    Specifies link error analysis.

                 slowlinks Specifies links running slower than expected.

                 misconfiglinks
                           Specifies links configured to run slower than supported.

                 misconnlinks
                           Specifies links connected with mismatched speed potential.

                 all       Includes all reports above. (errors, slowlinks, misconfiglinks, and misconnlinks)

                 verifylinks
                           Verifies links against topology input.

                 verifyextlinks
                           Verifies links against topology input. Limits analysis to links external to systems.

                 verifyfilinks
                           Verifies links against topology input. Limits analysis to FI links.

                 verifyislinks
                           Verifies links against topology input. Limits analysis to inter-switch links.

                 verifyextislinks
                           Verifies links against topology input. Limits analysis to inter-switch links external
                           to systems.

                 verifyfis Verifies FIs against topology input.

                 verifysws Verifies switches against topology input.

                 verifynodes
                           Verifies FIs and switches against topology input.

                 verifysms Verifies SMs against topology input.

                 verifyall Verifies links, FIs, switches, and SMs against topology input.

                 clearerrors
                           Clears error counters, uses PM if available.

                 clearhwerrors
                           Clears hardware error counters, bypasses PM.

                 clear     Includes clearerrors and clearhwerrors.

       A punchlist of bad links is also appended to the file: FF_RESULT_DIR/punchlist.csv

</pre><h4><b>Examples</b></h4><pre>
       opalinkanalysis errors

       opalinkanalysis errors clearerrors

       opalinkanalysis -p '1:1 1:2 2:1 2:2'

</pre><h4><b>Environment</b> <b>Variables</b></h4><pre>
       The following environment variables are also used by this command:

       <b>PORTS</b>

                 List of ports, used in absence of -t and -p.

       <b>PORTS_FILE</b>

                 File containing list of ports, used in absence of -t and -p.

       <b>FF_TOPOLOGY_FILE</b>

                 File containing <u>topology_input</u>, used in absence of -T.

Copyright(C) 2015-2019                          Intel Corporation                             <u><a href="../man8/opalinkanalysis.8.html">opalinkanalysis</a></u>(8)
</pre>
 </div>
</div></section>
</div>
</body>
</html>