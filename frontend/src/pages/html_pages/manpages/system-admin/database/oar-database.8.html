<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>oar-database - manage OAR database.</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/oar-server">oar-server_2.6.1-1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       oar-database - manage OAR database.

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>oar-database</b> <u>--create</u> [<u>OPTIONS</u>]

       <b>oar-database</b> <u>--drop</u> [<u>OPTIONS</u>]

       <b>oar-database</b> <u>--upgrade</u> [<u>OPTIONS</u>]

       <b>oar-database</b> <u>--reset</u> [<u>OPTIONS</u>]

       <b>oar-database</b> <u>--check</u> [<u>OPTIONS</u>]

</pre><h4><b>DESCRIPTION</b></h4><pre>
       OAR uses a database for it's persitent data either using the MySQL or PostgreSQL backend (see oar.conf).
       oar-database is provided to manage that database.

</pre><h4><b>ACTIONS</b></h4><pre>
       <b>--create</b>
           Create an OAR database: inject schema and default data and create users/roles.

       <b>--drop</b>
           Drop an existing OAR database and associated users/roles.

       <b>--upgrade</b>
           Upgrade an existing OAR database.

       <b>--reset</b>
           Reset an existing OAR database to the state of the fresh new one.

       <b>--check</b>
           Check that OAR database is accessible and up to date (schema version).

</pre><h4><b>OPTIONS</b></h4><pre>
   <b>General</b> <b>parameters</b>
       <b>--conf</b>=<u>OAR_CONF_FILE</u>
           Define  the OAR configuration file to use. By default <u>/etc/oar/oar.conf</u> is used. If this file doesn't
           exist, the default parameters for each value are used.

       <b>--update-conf</b>
           The database parameters given in the command line are written to the OAR_CONF_FILE

       <b>-f,--force-sql</b>
           Force to continue the execution even if a SQL command fails

       <b>-y,--force-yes</b>
           Force oar-database to continue without prompt even if it could be harmful.

   <b>Database</b> <b>backend</b> <b>parameters</b>
       These parameters are only required by the <u>--create</u> and <u>--drop</u> actions.

       <b>--db-is-local</b>
           PostgreSQL: use local admin account to execute admin commands. MySQL: use the unix socket  connection
           to execute admin commands.

       <b>--db-admin-user</b>=<u>DB_ADMIN_USER</u>
           Set database backend admin username.

       <b>--db-admin-pass</b>=<u>DB_ADMIN_PASS</u>
           Set database backend admin password.

   <b>OAR</b> <b>database</b> <b>parameters</b>
       If  not  specified,  OAR  database  parameters  are  taken  from <u>OAR_CONF_FILE</u>. Please prefer setting the
       configurations in that file instead of using these options.

       <b>--db-type</b>=<u>DB_TYPE</u>
           Database backend to use, <u>mysql</u> or <u>Pg</u> (for PostgreSQL).

       <b>--db-user</b>=<u>DB_USER</u>
           Set OAR username to access the database. Override the one set in OAR_CONF_FILE.

       <b>--db-pass</b>=<u>DB_PASS</u>
           Set OAR user password to access the database. Override the one set in OAR_CONF_FILE.

       <b>--db-host</b>=<u>DB_HOST</u>
           Set the database backend hostname. Override the one set in OAR_CONF_FILE.

       <b>--db-port</b>=<u>DB_PORT</u>
           Set the database backend TCP port. Override the one set in OAR_CONF_FILE.

       <b>--db-name</b>=<u>DB_NAME</u>
           Set OAR database name. Override the one set in OAR_CONF_FILE.

       <b>--db-ro-user</b>=<u>DB_RO_USER</u>
           Set OAR username for read-only access the database. Override the one set in OAR_CONF_FILE.

       <b>--db-ro-pass</b>=<u>DB_RO_PASS</u>
           Set OAR user password for read-only access the database. Override the one set in OAR_CONF_FILE.

       <b>-d,--debug</b>
           Activate the display of debugging information.

       <b>-h,--help</b>
           Display this help.

</pre><h4><b>EXAMPLES</b></h4><pre>
   <b>MySQL</b>
       First you need to specify the database parameters in /etc/oar/oar.conf. These parameters will be used  by
       <b>oar-database</b>.

       To create a new database (assuming that the MySQL root password is <b>PASS</b>):

       <b>oar-database</b> <b>--create</b> <b>--db-admin-user</b> <b>root</b> <b>--db-admin-pass</b> <b>PASS</b>

       Or if the MySQL server is local and accessible using the unix socket:

       <b>oar-database</b> <b>--create</b> <b>--db-is-local</b>

       To upgrade an existing database:

       <b>oar-database</b> <b>--upgrade</b>

   <b>PostgreSQL</b>
       First  you need to specify the database parameters in /etc/oar/oar.conf. These parameters will be used by
       <b>oar-database</b>. If your PostgreSQL database is on the local system, you can use  the  <b>--db-is-local</b>  option
       which will use PostgreSQL unix account (needs root privileges).

       To create a new database:

       <b>oar-database</b> <b>--create</b> <b>--db-is-local</b>

       To upgrade an existing database:

       <b>oar-database</b> <b>--upgrade</b>

   <b>Advanced</b> <b>usages</b>
       To  make  some tests or to administrate several databases, you can also specify the sql parameters on the
       command line. For example:

       <b>oar-database</b> <b>--create</b> <b>--db-type=Pg</b> <b>--db-host=HOST</b> <b>\</b>
                      <b>--db-user=oar</b> <b>--db-pass=PASS</b> <b>\</b>
                      <b>--db-admin-user=ADMIN_USER</b> <b>--db-admin-pass=ADMIN_PASS</b>

       will create the oar database and the oar  user  on  the  postgresql  system  hosted  by  <b>HOST</b>.  The  user
       <b>ADMIN_USER</b> must have the right to create new databases and new roles on this system.

</pre><h4><b>FILES</b></h4><pre>
       /usr/lib/oar/database/mysql_structure.sql, /usr/lib/oar/database/pg_structure.sql
           SQL instructions for creating the structure of the oar database.

       /usr/lib/oar/database/mysql_default_admission_rules.sql,
       /usr/lib/oar/database/pg_default_admission_rules.sql
           SQL instructions for inserting the default admission rules in the oar database.

       /usr/lib/oar/database/default_data.sql
           SQL instructions for inserting the default data in the oar database.

       /usr/lib/oar/database/mysql_reset_structure.sql, /usr/lib/oar/database/pg_reset_structure.sql
           SQL instruction for emptying an existing oar database.

       /usr/lib/oar/database/mysql_structure_upgrade_*.sql, /usr/lib/oar/database/pg_structure_upgrade_*.sql
           SQL instructions for upgrading an existing database.

</pre><h4><b>COPYRIGHTS</b></h4><pre>
        Copyright 2003-2018 Laboratoire d'Informatique de Grenoble (<a href="http://www.liglab.fr">http://www.liglab.fr</a>). This software is licensed under the GNU General Public License Version 2 or above. There is NO warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.

oar-database                                       2025-03-24                                    <u><a href="../man8/oar-database.8.html">oar-database</a></u>(8)
</pre>
 </div>
</div></section>
</div>
</body>
</html>