<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ovdb_init - Prepare ovdb database for use</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/inn2">inn2_2.7.3-1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       ovdb_init - Prepare ovdb database for use

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>ovdb_init</b> [<b>-r</b>|<b>-u</b>]

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This command must be run before any other process can access the overview database.  <b>ovdb_init</b> is
       normally invoked automatically by <b>rc.news</b> when starting the news system.

       <b>ovdb_init</b> performs the following steps:

       1.  Creates the database environment, if necessary.

       2.  If  the database is idle (and if the <b>-u</b> option is not specified), it performs a normal recovery.  The
           recovery will remove stale locks, recreate the memory pool cache, and repair any damage caused  by  a
           system crash or improper shutdown.

       3.  If  the  <b>-u</b>  option  is  specified,  it  performs  any  necessary  upgrades to the database.  See the
           "UPGRADING" section below.

       4.  Starts the database housekeeping processes (<b>ovdb_monitor</b>) if they are not already  running.   (Unless
           the <b>-r</b> option is specified.)

       5.  Starts  the  ovdb  readserver processes (<b>ovdb_server</b>) if <u>readserver</u> in <u>ovdb.conf</u> is true, and if they
           are not already running.  (Unless the <b>-r</b> option is specified.)

       Returns exit status of "0" if all steps were completed successfully.  In the event of an error,  messages
       are written to syslog and/or stderr.

       If  a  recovery  was attempted but failed, the database may be damaged beyond repair, requiring a rebuild
       with <b>makehistory</b>.

       This command can be run multiple times.

</pre><h4><b>OPTIONS</b></h4><pre>
       <b>-r</b>  Perform recovery only.  <b>ovdb_monitor</b> is not started.

       <b>-u</b>  Perform any needed upgrades.  Recovery is not attempted.  <b>ovdb_monitor</b>  is  started  if  the  upgrade
           succeeded.

           This option can be used even if no upgrades are needed.

</pre><h4><b>UPGRADING</b></h4><pre>
       There are two situations in which the database will need to be upgraded:

       •   You  upgrade  the  Berkeley DB library to a newer version, for example from 2.7.7 to 3.1.17.  In this
           case, the Berkeley DB "db-&gt;upgrade()" method is used.

       •   You upgrade ovdb to a newer major version; i.e., ovdb-1.0 (shipped with INN 2.3.0 up to INN 2.3.5) to
           ovdb-2.0 (since INN 2.4.0).

       In both of these cases, the database is upgraded in-place; and the upgrade  cannot  be  undone.   Do  not
       interrupt  the  upgrade  process  once it has started, because there is a risk of irreparable corruption.
       The upgrade may take several minutes to complete.  If an upgrade does get interrupted,  try  running  the
       upgrade again.

       Here's   an   example   procedure   to   upgrade   a  database  created  with  Berkeley DB 2.7.7  to  use
       Berkeley DB 3.1.17:

       1.  Build and install the Berkeley DB 3.1.17 version;

       2.  Run <b>configure</b> in the INN source tree and make sure it picks up the right Berkeley DB directory (e.g.,
           <u>/usr/local/BerkeleyDB.3.1</u>);

       3.  Do a "make";

       4.  Shut down INN (e.g., with "rc.news stop") and be sure to kill all instances of <b>nnrpd</b> as well;

       5.  Do a "make update" to install the new binaries;

       6.  Run "ovdb_init -u" as the news user;

       7.  Start INN with the "rc.news" command.

</pre><h4><b>HISTORY</b></h4><pre>
       Written by Heath Kehoe &lt;<a href="mailto:hakehoe@avalon.net">hakehoe@avalon.net</a>&gt; for InterNetNews.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <a href="../man5/ovdb.5.html">ovdb</a>(5), <a href="../man8/makehistory.8.html">makehistory</a>(8), <a href="../man8/rc.news.8.html">rc.news</a>(8).

INN 2.7.3                                          2025-05-19                                       <u><a href="../man8/OVDB_INIT.8.html">OVDB_INIT</a></u>(8)
</pre>
 </div>
</div></section>
</div>
</body>
</html>