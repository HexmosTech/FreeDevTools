<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>smbd - server to provide SMB/CIFS services to clients</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/samba">samba_4.22.3+dfsg-4ubuntu1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       smbd - server to provide SMB/CIFS services to clients

</pre><h4><b>SYNOPSIS</b></h4><pre>

       smbd [-D|--daemon] [-i|--interactive] [-F|--foreground] [--no-process-group] [-b|--build-options]
        [-p &lt;port number(s)&gt;] [-P &lt;profiling level&gt;] [-d &lt;debug level&gt;] [--debug-stdout]
        [--configfile=&lt;configuration file&gt;] [--option=&lt;name&gt;=&lt;value&gt;] [-l|--log-basename &lt;log directory&gt;]
        [--leak-report] [--leak-report-full] [-V|--version]

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This program is part of the <b><a href="../man7/samba.7.html">samba</a></b>(7) suite.

       smbd is the server daemon that provides filesharing and printing services to Windows clients. The server
       provides filespace and printer services to clients using the SMB (or CIFS) protocol. This is compatible
       with the LanManager protocol, and can service LanManager clients. These include MSCLIENT 3.0 for DOS,
       Windows for Workgroups, Windows 95/98/ME, Windows NT, Windows 2000, OS/2, DAVE for Macintosh, and smbfs
       for Linux.

       An extensive description of the services that the server can provide is given in the man page for the
       configuration file controlling the attributes of those services (see <b><a href="../man5/smb.conf.5.html">smb.conf</a></b>(5). This man page will not
       describe the services, but will concentrate on the administrative aspects of running the server.

       Please note that there are significant security implications to running this server, and the <b><a href="../man5/smb.conf.5.html">smb.conf</a></b>(5)
       manual page should be regarded as mandatory reading before proceeding with installation.

       A session is created whenever a client requests one. Each client gets a copy of the server for each
       session. This copy then services all connections made by the client during that session. When all
       connections from its client are closed, the copy of the server for that client terminates.

       The configuration file, and any files that it includes, are automatically reloaded every three minutes,
       if they change. One can force a reload by sending a SIGHUP to the server. Reloading the configuration
       file will not affect connections to any service that is already established. Either the user will have to
       disconnect from the service, or smbd killed and restarted.

       Instead of sending a SIGHUP signal, a request to reload configuration file may be sent using
       <b><a href="../man1/smbcontrol.1.html">smbcontrol</a></b>(1) program.

</pre><h4><b>OPTIONS</b></h4><pre>
       -D|--daemon
           If specified, this parameter causes the server to operate as a daemon. That is, it detaches itself
           and runs in the background, fielding requests on the appropriate port. Operating the server as a
           daemon is the recommended way of running smbd for servers that provide more than casual use file and
           print services. This switch is assumed if smbd is executed on the command line of a shell.

       -i|--interactive
           If this parameter is specified it causes the server to run "interactively", not as a daemon, even if
           the server is executed on the command line of a shell. Setting this parameter negates the implicit
           daemon mode when run from the command line.  smbd will only accept one connection and terminate. It
           will also log to standard output, as if the -S parameter had been given.

       -F|--foreground
           If specified, this parameter causes the main smbd process to not daemonize, i.e. double-fork and
           disassociate with the terminal. Child processes are still created as normal to service each
           connection request, but the main process does not exit. This operation mode is suitable for running
           smbd under process supervisors such as supervise and svscan from Daniel J. Bernstein's daemontools
           package, or the AIX process monitor.

       --no-process-group
           Do not create a new process group for smbd.

       -b|--build-options
           Prints information about how Samba was built.

       -p|--port&lt;port number(s)&gt;
           <u>port</u> <u>number(s)</u> is a space or comma-separated list of TCP ports smbd should listen on. The default
           value is taken from the <b>ports</b> parameter in /etc/samba/smb.conf

           The default ports are 139 (used for SMB over NetBIOS over TCP) and port 445 (used for plain SMB over
           TCP).

       -P|--profiling-level&lt;profiling level&gt;
           <u>profiling</u> <u>level</u> is a number specifying the level of profiling data to be collected. 0 turns off
           profiling, 1 turns on counter profiling only, 2 turns on complete profiling, and 3 resets all
           profiling data.

       -d|--debuglevel=level
           <u>level</u> is an integer from 0 to 10. The default value if this parameter is not specified is 0.

           The higher this value, the more detail will be logged to the log files about the activities of the
           server. At level 0, only critical errors and serious warnings will be logged. Level 1 is a reasonable
           level for day-to-day running - it generates a small amount of information about operations carried
           out.

           Levels above 1 will generate considerable amounts of log data, and should only be used when
           investigating a problem. Levels above 3 are designed for use only by developers and generate HUGE
           amounts of log data, most of which is extremely cryptic.

           Note that specifying this parameter here will override the <b>log</b> <b>level</b> parameter in the
           /etc/samba/smb.conf file.

       --debug-stdout
           This will redirect debug output to STDOUT. By default server daemons are logging to a log file.

       --configfile=CONFIGFILE
           The file specified contains the configuration details required by the server. The information in this
           file includes server-specific information such as what printcap file to use, as well as descriptions
           of all the services that the server is to provide. See /etc/samba/smb.conf for more information. The
           default configuration file name is determined at compile time.

       --option=&lt;name&gt;=&lt;value&gt;
           Set the <b><a href="../man5/smb.conf.5.html">smb.conf</a></b>(5) option "&lt;name&gt;" to value "&lt;value&gt;" from the command line. This overrides
           compiled-in defaults and options read from the configuration file. If a name or a value includes a
           space, wrap whole --option=name=value into quotes.

       -l|--log-basename=logdirectory
           Base directory name for log/debug files. The extension <b>".progname"</b> will be appended (e.g.
           log.smbclient, log.smbd, etc...). The log file is never removed by the client.

       --leak-report
           Enable talloc leak reporting on exit.

       --leak-report-full
           Enable full talloc leak reporting on exit.

       -V|--version
           Prints the program version number.

       -?|--help
           Print a summary of command line options.

       --usage
           Display brief usage message.

</pre><h4><b>FILES</b></h4><pre>
       /etc/inetd.conf
           If the server is to be run by the inetd meta-daemon, this file must contain suitable startup
           information for the meta-daemon.

       /etc/rc
           or whatever initialization script your system uses).

           If running the server as a daemon at startup, this file will need to contain an appropriate startup
           sequence for the server.

       <a href="file:/etc/services">/etc/services</a>
           If running the server via the meta-daemon inetd, this file must contain a mapping of service name
           (e.g., netbios-ssn) to service port (e.g., 139) and protocol type (e.g., tcp).

       /usr/local/samba/lib/smb.conf
           This is the default location of the <b><a href="../man5/smb.conf.5.html">smb.conf</a></b>(5) server configuration file. Other common places that
           systems install this file are /usr/samba/lib/smb.conf and /etc/samba/smb.conf.

           This file describes all the services the server is to make available to clients. See <b><a href="../man5/smb.conf.5.html">smb.conf</a></b>(5) for
           more information.

</pre><h4><b>LIMITATIONS</b></h4><pre>
       On some systems smbd cannot change uid back to root after a setuid() call. Such systems are called
       trapdoor uid systems. If you have such a system, you will be unable to connect from a client (such as a
       PC) as two different users at once. Attempts to connect the second user will result in access denied or
       similar.

</pre><h4><b>ENVIRONMENT</b> <b>VARIABLES</b></h4><pre>
       <b>PRINTER</b>
           If no printer name is specified to printable services, most systems will use the value of this
           variable (or <b>lp</b> if this variable is not defined) as the name of the printer to use. This is not
           specific to the server, however.

</pre><h4><b>PAM</b> <b>INTERACTION</b></h4><pre>
       Samba uses PAM for authentication (when presented with a plaintext password), for account checking (is
       this account disabled?) and for session management. The degree too which samba supports PAM is restricted
       by the limitations of the SMB protocol and the <b>obey</b> <b>pam</b> <b>restrictions</b> <b><a href="../man5/smb.conf.5.html">smb.conf</a></b>(5) parameter. When this is
       set, the following restrictions apply:

              •   <u>Account</u> <u>Validation</u>: All accesses to a samba server are checked against PAM to see if the
                  account is valid, not disabled and is permitted to login at this time. This also applies to
                  encrypted logins.

              •   <u>Session</u> <u>Management</u>: When not using share level security, users must pass PAM's session checks
                  before access is granted. Note however, that this is bypassed in share level security. Note
                  also that some older pam configuration files may need a line added for session support.

</pre><h4><b>VERSION</b></h4><pre>
       This man page is part of version 4.22.3-Ubuntu-4.22.3+dfsg-4ubuntu1 of the Samba suite.

</pre><h4><b>DIAGNOSTICS</b></h4><pre>
       Most diagnostics issued by the server are logged in a specified log file. The log file name is specified
       at compile time, but may be overridden on the command line.

       The number and nature of diagnostics available depends on the debug level used by the server. If you have
       problems, set the debug level to 3 and peruse the log files.

       Most messages are reasonably self-explanatory. Unfortunately, at the time this man page was created,
       there are too many diagnostics available in the source code to warrant describing each and every
       diagnostic. At this stage your best bet is still to grep the source code and inspect the conditions that
       gave rise to the diagnostics you are seeing.

</pre><h4><b>TDB</b> <b>FILES</b></h4><pre>
       Samba stores it's data in several TDB (Trivial Database) files, usually located in /var/lib/samba.

       (*) information persistent across restarts (but not necessarily important to backup).

       account_policy.tdb*
           NT account policy settings such as pw expiration, etc...

       brlock.tdb
           byte range locks

       browse.dat
           browse lists

       gencache.tdb
           generic caching db

       group_mapping.tdb*
           group mapping information

       locking.tdb
           share modes &amp; oplocks

       login_cache.tdb*
           bad pw attempts

       messages.tdb
           Samba messaging system

       netsamlogon_cache.tdb*
           cache of user net_info_3 struct from net_samlogon() request (as a domain member)

       ntdrivers.tdb*
           installed printer drivers

       ntforms.tdb*
           installed printer forms

       ntprinters.tdb*
           installed printer information

       printing/
           directory containing tdb per print queue of cached lpq output

       registry.tdb
           Windows registry skeleton (connect via regedit.exe)

       smbXsrv_session_global.tdb
           session information (e.g. support for 'utmp = yes')

       smbXsrv_tcon_global.tdb
           share connections (used to enforce max connections, etc...)

       smbXsrv_open_global.tdb
           open file handles (used durable handles, etc...)

       share_info.tdb*
           share acls

       winbindd_cache.tdb
           winbindd's cache of user lists, etc...

       winbindd_idmap.tdb*
           winbindd's local idmap db

       wins.dat*
           wins database when 'wins support = yes'

</pre><h4><b>SIGNALS</b></h4><pre>
       Sending the smbd a SIGHUP will cause it to reload its smb.conf configuration file within a short period
       of time.

       To shut down a user's smbd process it is recommended that SIGKILL (-9) <u>NOT</u> be used, except as a last
       resort, as this may leave the shared memory area in an inconsistent state. The safe way to terminate an
       smbd is to send it a SIGTERM (-15) signal and wait for it to die on its own.

       The debug log level of smbd may be raised or lowered using <b><a href="../man1/smbcontrol.1.html">smbcontrol</a></b>(1) program (SIGUSR[1|2] signals are
       no longer used since Samba 2.2). This is to allow transient problems to be diagnosed, whilst still
       running at a normally low log level.

       Note that as the signal handlers send a debug write, they are not re-entrant in smbd. This you should
       wait until smbd is in a state of waiting for an incoming SMB before issuing them. It is possible to make
       the signal handlers safe by un-blocking the signals before the select call and re-blocking them after,
       however this would affect performance.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man5/hosts_access.5.html">hosts_access</a></b>(5), <b><a href="../man8/inetd.8.html">inetd</a></b>(8), <b><a href="../man8/nmbd.8.html">nmbd</a></b>(8), <b><a href="../man5/smb.conf.5.html">smb.conf</a></b>(5), <b><a href="../man1/smbclient.1.html">smbclient</a></b>(1), <b><a href="../man1/testparm.1.html">testparm</a></b>(1), and the Internet RFC's
       rfc1001.txt, rfc1002.txt. In addition the CIFS (formerly SMB) specification is available as a link from
       the Web page https://www.samba.org/cifs/.

</pre><h4><b>AUTHOR</b></h4><pre>
       The original Samba software and related utilities were created by Andrew Tridgell. Samba is now developed
       by the Samba Team as an Open Source project similar to the way the Linux kernel is developed.

Samba 4.22.3-Ubuntu-4.22.3+dfs                     07/21/2025                                            <u><a href="../man8/SMBD.8.html">SMBD</a></u>(8)
</pre>
 </div>
</div></section>
</div>
</body>
</html>