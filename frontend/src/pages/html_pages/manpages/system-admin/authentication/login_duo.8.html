<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>login_duo — second-factor authentication via Duo login service</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/login-duo">login-duo_1.11.3-1.2_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       login_duo — second-factor authentication via Duo login service

</pre><h4><b>SYNOPSIS</b></h4><pre>
       login_duo [<b>-d</b>] [<b>-c</b> <u>file</u>] [<b>-h</b> <u>host</u>] [<b>-f</b> <u>user</u>] [<u>command</u> [<u>args...</u>]]

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>login_duo</b>  provides  secondary  authentication  via  the Duo authentication service, executing the user's
       login shell or command only if successful.

       The following options are available:

       <b>-c</b>        Specify an alternate configuration file to load. Default is <u>/etc/duo/login_duo.conf</u>

       <b>-d</b>        Debug mode; send logs to stderr instead of syslog.

       <b>-h</b>        Specify the  remote  IP  address  for  this  login  (normally  taken  from  the  SSH_CONNECTION
                 environment variable, if set).

       <b>-f</b>        Specify an alternate Duo user to authenticate as.

       If <b>login_duo</b> is installed setuid root (the default), these options are only available to the super-user.

       After  successful  Duo  authentication,  the user's login shell is invoked, or if an alternate <u>command</u> or
       SSH_ORIGINAL_COMMAND environment variable is specified, it will be executed via the user's shell  with  a
       -c option.

</pre><h4><b>CONFIGURATION</b></h4><pre>
       The INI-format configuration file must have a “<b>duo</b>” section with the following options:

       <b>host</b>      Duo API host (required).

       <b>ikey</b>      Duo integration key (required).

       <b>skey</b>      Duo secret key (required).

       <b>groups</b>    If   specified,  Duo  authentication  is  required  only  for  users  whose  primary  group  or
                 supplementary group list matches one  of  the  space-separated  <u>pattern-lists</u>  (see  “PATTERNS”
                 below).

       <b>failmode</b>  On  service or configuration errors that prevent Duo authentication, fail “<b>safe</b>” (allow access)
                 or “<b>secure</b>” (deny access). Default is “<b>safe</b>”.

       <b>pushinfo</b>  Send command to be approved via Duo Push authentication. Default is “<b>no</b>”.

       <b>http_proxy</b>
                 Use the specified HTTP proxy, same format as the HTTP_PROXY environment variable.

       <b>autopush</b>  Upon successful first-factor authentication, automatically send a login request to the  primary
                 second-factor (usually Duo Push). Can be “<b>yes</b>” or “<b>no</b>”.  Default is “<b>no</b>”.

       <b>motd</b>      Print  the  contents  of  <u>/etc/motd</u>  to  screen after a successful login. Either "yes" or "no."
                 Default is "no".

       <b>prompts</b>   Number of login attempts a user gets. Default is 3. If using autopush, it is recommended to set
                 prompts to 1.

       <b>accept_env_factor</b>
                 Look for factor  selection  or  passcode  in  the  DUO_PASSCODE  environment  variable,  before
                 prompting the user. Can override autopush. Default is "no".

       <b>fallback_local_ip</b>
                 If unable to determine the authentication users's IP address, fallback on the IP address of the
                 server. Default is "no".

       <b>https_timeout</b>
                 Set  to  the  number  of seconds to wait for HTTPS responses from Duo Security. If Duo Security
                 takes longer than the configured number of seconds to respond to  the  preauth  API  call,  the
                 configured  failmode  is  triggered.  Other  network  operations  such  as  DNS resolution, TCP
                 connection establishment, and the SSL handshake have their own independent  timeout  and  retry
                 logic. Default is 0, which disables the HTTPS timeout.

       An example configuration file:

               [duo]
               host = api-deadbeef.duosecurity.com
               ikey = SI9F...53RI
               skey = 4MjR...Q2NmRiM2Q1Y
               pushinfo = yes
               autopush = yes

       If  installed  setuid  root (the default), <b>login_duo</b> performs Duo authentication as a dedicated privilege
       separation user, requiring that the configuration file be owned and readable only by this user.

</pre><h4><b>PATTERNS</b></h4><pre>
       A <u>pattern</u> consists of zero or more non-whitespace characters, ‘*’ (a wildcard that matches zero  or  more
       characters), or ‘?’ (a wildcard that matches exactly one character).

       A  <u>pattern-list</u>  is  a  comma-separated list of patterns. Patterns within pattern-lists may be negated by
       preceding them with an exclamation mark (‘!’).  For example, to specify Duo authentication for all  users
       (except those that are also admins), and for guests:

             <b>groups</b> <b>=</b> <b>users,!wheel,!*admin</b> <b>guests</b>

</pre><h4><b>EXAMPLES</b></h4><pre>
       <b>login_duo</b>  can  be enabled system-wide by specifying its full path as a <b>ForceCommand</b> in <u><a href="../man5/sshd_config.5.html">sshd_config</a></u>(5) to
       capture any SSH remote login (including subsystems, remote commands, and interactive login):

               ForceCommand /usr/local/sbin/login_duo

       Similarly, a group of administrators could require two-factor authentication for login to a  shared  root
       account by specifying <b>login_duo</b> as the forced command for each public key in <u>~root/.ssh/authorized_keys</u>:

               command="/usr/local/sbin/login_duo -f alice"
               ssh-rsa AAAAB2...19Q== <a href="mailto:alice@example.net">alice@example.net</a>
               command="/usr/local/sbin/login_duo -f bob"
               ssh-dss AAAAC3...51R== <a href="mailto:bob@example.net">bob@example.net</a>

       A  user  without root access could configure their own account to require Duo authentication via the same
       <u><a href="file:~/.ssh/authorized_keys">~/.ssh/authorized_keys</a></u> forced command mechanism and a user-installed (non-setuid) <b>login_duo</b>.

</pre><h4><b>FILES</b></h4><pre>
       <u>/etc/duo/login_duo.conf</u>
                 Default configuration file path

</pre><h4><b>AUTHORS</b></h4><pre>
       <b>login_duo</b> was written by Duo Security &lt;<a href="mailto:support@duosecurity.com">support@duosecurity.com</a>&gt;

</pre><h4><b>NOTES</b></h4><pre>
       When used to protect remote SSH access, only interactive sessions  support  interactive  Duo  login.  For
       <u><a href="../man1/scp.1.html">scp</a></u>(1),  <u><a href="../man1/sftp.1.html">sftp</a></u>(1),  <u><a href="../man1/rsync.1.html">rsync</a></u>(1),  and  other <u><a href="../man1/ssh.1.html">ssh</a></u>(1) remote commands, <b>login_duo</b> automatically tries the user's
       default out-of-band factor (smartphone push or voice callback)  and  disables  real-time  login  progress
       reporting to provide a clean shell environment.

Debian                                          September 3, 2010                                   <u><a href="../man8/LOGIN_DUO.8.html">LOGIN_DUO</a></u>(8)
</pre>
 </div>
</div></section>
</div>
</body>
</html>