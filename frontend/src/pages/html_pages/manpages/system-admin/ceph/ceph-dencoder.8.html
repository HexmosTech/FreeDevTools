<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ceph-dencoder - ceph encoder/decoder utility</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/ceph-common">ceph-common_19.2.1-0ubuntu3_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       ceph-dencoder - ceph encoder/decoder utility

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>ceph-dencoder</b> [commands...]

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>ceph-dencoder</b>  is  a  utility to encode, decode, and dump ceph data structures.  It is used for debugging
       and for testing inter-version compatibility.

       <b>ceph-dencoder</b> takes a simple list of commands and performs them in order.

</pre><h4><b>COMMANDS</b></h4><pre>
       <b>version</b>
              Print the version string for the <b>ceph-dencoder</b> binary.

       <b>import</b> <b>&lt;file&gt;</b>
              Read a binary blob of encoded data from the given file.  It will be placed in an in-memory buffer.

       <b>export</b> <b>&lt;file&gt;</b>
              Write the contents of the current in-memory buffer to the given file.

       <b>list_types</b>
              List the data types known to this build of <b>ceph-dencoder</b>.

       <b>type</b> <b>&lt;name&gt;</b>
              Select the given type for future <b>encode</b> or <b>decode</b> operations.

       <b>skip</b> <b>&lt;bytes&gt;</b>
              Seek &lt;bytes&gt; into the imported file before reading data structure, use this with objects that have
              a preamble/header before the object of interest.

       <b>decode</b> Decode the contents of the in-memory buffer into an instance of the previously selected type.   If
              there is an error, report it.

       <b>encode</b> Encode  the  contents  of  the in-memory instance of the previously selected type to the in-memory
              buffer.

       <b>dump_json</b>
              Print a JSON-formatted description of the in-memory object.

       <b>count_tests</b>
              Print the number of built-in test instances of the previously selected type that <b>ceph-dencoder</b>  is
              able to generate.

       <b>select_test</b> <b>&lt;n&gt;</b>
              Select the given built-in test instance as the in-memory instance of the type.

       <b>get_features</b>
              Print  the  decimal value of the feature set supported by this version of <b>ceph-dencoder</b>.  Each bit
              represents a feature.  These correspond to CEPH_FEATURE_* defines in src/include/ceph_features.h.

       <b>set_features</b> <b>&lt;f&gt;</b>
              Set the feature bits provided to <b>encode</b> to <u>f</u>.  This allows you to encode objects  such  that  they
              can be understood by old versions of the software (for those types that support it).

</pre><h4><b>EXAMPLE</b></h4><pre>
       Say you want to examine an attribute on an object stored by <b>ceph-osd</b>.  You can do this:

          $ cd /mnt/osd.12/current/2.b_head
          $ attr -l foo_bar_head_EFE6384B
          Attribute "ceph.snapset" has a 31 byte value for foo_bar_head_EFE6384B
          Attribute "ceph._" has a 195 byte value for foo_bar_head_EFE6384B
          $ attr foo_bar_head_EFE6384B -g ceph._ -q &gt; /tmp/a
          $ ceph-dencoder type object_info_t import /tmp/a decode dump_json
          { "oid": { "oid": "foo",
                "key": "bar",
                "snapid": -2,
                "hash": 4024842315,
                "max": 0},
            "locator": { "pool": 2,
                "preferred": -1,
                "key": "bar"},
            "category": "",
            "version": "9'1",
            "prior_version": "0'0",
            "last_reqid": "client.4116.0:1",
            "size": 1681,
            "mtime": "2012-02-21 08:58:23.666639",
            "lost": 0,
            "wrlock_by": "unknown.0.0:0",
            "snaps": [],
            "truncate_seq": 0,
            "truncate_size": 0,
            "watchers": {}}

       Alternatively, perhaps you wish to dump an internal CephFS metadata object, you might do that like this:

          $ rados -p metadata get mds_snaptable mds_snaptable.bin
          $ ceph-dencoder type SnapServer skip 8 import mds_snaptable.bin decode dump_json
          { "snapserver": { "last_snap": 1,
             "pending_noop": [],
             "snaps": [],
             "need_to_purge": {},
             "pending_create": [],
             "pending_destroy": []}}

</pre><h4><b>AVAILABILITY</b></h4><pre>
       <b>ceph-dencoder</b>  is  part  of  Ceph,  a massively scalable, open-source, distributed storage system. Please
       refer to the Ceph documentation at <u>https://docs.ceph.com</u> for more information.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <u><a href="../man8/ceph.8.html">ceph</a></u>(8)

</pre><h4><b>COPYRIGHT</b></h4><pre>
       2010-2014, Inktank Storage, Inc. and contributors. Licensed  under  Creative  Commons  Attribution  Share
       Alike 3.0 (CC-BY-SA-3.0)

dev                                               May 22, 2025                                  <u><a href="../man8/CEPH-DENCODER.8.html">CEPH-DENCODER</a></u>(8)
</pre>
 </div>
</div></section>
</div>
</body>
</html>