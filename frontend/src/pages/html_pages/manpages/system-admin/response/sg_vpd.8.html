<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>sg_vpd - fetch SCSI VPD page and/or decode its response</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/sg3-utils">sg3-utils_1.48-2ubuntu1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       sg_vpd - fetch SCSI VPD page and/or decode its response

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>sg_vpd</b>  [<u>--all</u>] [<u>--enumerate</u>] [<u>--examine</u>] [<u>--force</u>] [<u>--help</u>] [<u>--hex</u>] [<u>--ident</u>] [<u>--inhex=FN</u>] [<u>--json[=JO]</u>]
       [<u>--js-file=JFN</u>] [<u>--long</u>] [<u>--maxlen=LEN</u>] [<u>--page=PG</u>] [<u>--quiet</u>]  [<u>--raw</u>]  [<u>--sinq_inraw=RFN</u>]  [<u>--vendor=VP</u>]
       [<u>--verbose</u>] [<u>--version</u>] [<u>DEVICE</u>]

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This  utility, when <u>DEVICE</u> is given, fetches a Vital Product Data (VPD) page and decodes it or outputs it
       in ASCII hexadecimal or binary. VPD pages are fetched with a SCSI INQUIRY command.

       Alternatively the <u>--inhex=FN</u> option can be given. In this case <u>FN</u> is assumed to be a file name  ('-'  for
       stdin)  containing  ASCII hexadecimal representing a VPD page response. If the <u>--raw</u> option is also given
       then binary input is assumed (rather than ASCII hexadecimal).

       Probably the most important page is the Device Identification VPD page (page number: 0x83). Since  SPC-3,
       support  for  this  page  has  been  flagged  as mandatory. This page can be fetched by using the <u>--ident</u>
       option.

       The reference document used for interpreting VPD pages (and the INQUIRY  standard  response)  is  T10/BSR
       INCITS  566 Revision 6 which is draft SPC-6 dated 22 October 2021. It can be found at https://www.t10.org
       .

       When no options are given, other than a <u>DEVICE</u>, then the "Supported VPD pages" (0x0) VPD page is  fetched
       and decoded.

</pre><h4><b>OPTIONS</b></h4><pre>
       Arguments  to  long  options  are  mandatory  for  short  options  as  well.  The options are arranged in
       alphabetical order based on the long option name.

       <b>-a</b>, <b>--all</b>
              decode all VPD pages. When used with <u>DEVICE</u> the pages to be decoded are found  in  the  "Supported
              VPD  pages"  VPD page. Pages that cannot be decoded are displayed in hex; add the <u>--long</u> option to
              have ASCII displayed to the right of each line of hex.
              If this option is used with the <u>--inhex=FN</u> option then the file <u>FN</u> is assumed to contain 1 or more
              VPD pages (in ASCII hex or binary).  Decoding continues until the file is exhausted (or  an  error
              occurs).  Sanity  checks are applied on each VPD page's length and the ascending order of VPD page
              numbers (required by SPC-4) so bad data may be detected.
              If the <u>--page=PG</u> option is also given then no VPD page whose page number is greater  than  <u>PG</u>  (or
              its numeric equivalent) is decoded.

       <b>-e</b>, <b>--enumerate</b>
              list the names of the known VPD pages, first the standard pages (i.e.  those defined by T10), then
              the  vendor  specific pages. Each group is sorted in abbreviation order. The <u>DEVICE</u> and most other
              options are ignored and this utility exits after listing the VPD page names. May be used  together
              with  <u>--page=PG</u>  where  <u>PG</u>  is  numeric. If so, it searches for the summary lines of all VPD pages
              whose number matches <u>PG</u>. May be used with <u>--vendor=VP</u> to restrict output to known vendor  specific
              pages for vendor/product <u>VP</u>.

       <b>-E</b>, <b>--examine</b>
              scan  part  of all of the VPD space (page numbers 0x0 to 0xff) and output any pages found. If this
              option is given once, the scan starts at page 0x80; if it is given twice, the scan starts at  0x0;
              and  if  given three times the scan starts at 0xc0. This option takes no notice of the contents of
              VPD page 0x0 which should contain a list of all supported VPD pages. Some vendors either forget to
              list some standard pages or perhaps purposely don't list vendor specific pages which  are  in  the
              range 0xc0 to 0xff.
              If  the <u>--page=PG</u> option is not given then the scan finishes at page 0xff. if the <u>--page=PG</u> option
              is given then the scan finishes at page <u>PG</u>. A check is made before the scan to make sure the start
              page is less than or equal to the finish page; if not  the  start  and  finish  page  numbers  are
              swapped.
              The  sdparm  utility  which  lists  mode  and  VPD  pages also has a <b>--examine</b> option will similar
              functionility. Note that T10 has changed most of the pages that list supported  pages  (e.g.  VPD,
              mode and log pages; supported commands) to add the weasel words "may or may not list all ...".

       <b>-f</b>, <b>--force</b>
              As  a  sanity check, the normal action when fetching VPD pages other than page 0x0 (the "Supported
              VPD pages" VPD page), is to first fetch page 0x0 and only if the requested  page  is  one  of  the
              supported pages, to go ahead and fetch the requested page.
              When  this option is given, skip checking of VPD page 0x0 before accessing the requested VPD page.
              The prior check of VPD page 0x0 is known to crash certain USB devices, so use with care.

       <b>-h</b>, <b>--help</b>
              outputs the usage message summarizing command line options then exits.  Ignores <u>DEVICE</u> if given.

       <b>-H</b>, <b>--hex</b>
              outputs the requested VPD page in ASCII hexadecimal. Can be used multiple times,  see  section  on
              the ATA information vpd page.
              To  generate output suitable for placing in a file that can be used by a later invocation with the
              <u>--inhex=FN</u> option, use the '-HHHH' option (e.g. 'sg_vpd -p di -HHHH /dev/sg3 &gt;  dev_id.hex').  The
              reason  '-HHHH'  is  used  is  to  flag  that unadorned hexadecimal (without other text or address
              offsets) is sent to stdout.

       <b>-i</b>, <b>--ident</b>
              decode the device identification (0x83) VPD page. When used once this option has the  same  effect
              as '--page=di'. When use twice then the short form of the device identification VPD page's logical
              unit  designator  is  decoded.  In  the  latter  case  this option has the same effect as '--quiet
              --page=di_lu'.

       <b>-I</b>, <b>--inhex</b>=<u>FN</u>
              <u>FN</u> is expected to be a file name (or '-' for stdin) which contains  ASCII  hexadecimal  or  binary
              representing  a  VPD  page  (or  a  standard INQUIRY) response. This utility will then decode that
              response. It is preferable to also supply the <u>--page=PG</u> option, if not this utility  will  attempt
              to  guess  which  VPD  page (or standard INQUIRY) the response is associated with. The hexadecimal
              should be arranged as 1 or 2 digits representing a byte each  of  which  is  whitespace  or  comma
              separated.  Anything  from  and  including a hash mark to the end of line is ignored. If the <u>--raw</u>
              option is also given then <u>FN</u> is treated as binary.

       <b>-j</b>[=<u>JO</u>], <b>--json</b>[=<u>JO</u>]
              output is in JSON format instead of plain text form. Note that arguments to  the  short  and  long
              form  are  themselves optional and if present start with "=" and no whitespace is permitted around
              that "=".
              See sg3_utils_json manpage or use '?' for <u>JO</u> to get a summary.

       <b>-J</b>, <b>--js-file</b>=<u>JFN</u>
              output is in JSON format and it is sent to a file named <u>JFN</u>.  If  that  file  exists  then  it  is
              truncated. By default, the JSON output is sent to stdout.
              When  this  option  is  given,  the  <u>--json[=JO]</u>  option  is  implied  and  need not be given. The
              <u>--json[=JO]</u> option may still be needed to set the <u>JO</u> parameter to non-default values.

       <b>-l</b>, <b>--long</b>
              when decoding some VPD pages, give a little more output. For example the ATA Information VPD  page
              only  shows  the  signature (in hex) and the IDENTIFY (PACKET) DEVICE (in hex) when this option is
              given.

       <b>-m</b>, <b>--maxlen</b>=<u>LEN</u>
              where <u>LEN</u> is the (maximum) response length in bytes. It is placed in the cdb's "allocation length"
              field. If not given (or <u>LEN</u> is zero) then 252 is used (apart from the  ATA  Information  VPD  page
              which  defaults to 572) and, if the response indicates this value is insufficient, another INQUIRY
              command is sent with a larger value in the cdb's "allocation length" field.   If  this  option  is
              given  and  <u>LEN</u> is greater than 0 then only one INQUIRY command is sent. Since many simple devices
              implement the INQUIRY command badly (and do not support VPD pages) then the safest  value  to  use
              for <u>LEN</u> is 36. See the <a href="../man8/sg_inq.8.html">sg_inq</a>(8) man page for the more information.

       <b>-p</b>, <b>--page</b>=<u>PG</u>
              where <u>PG</u> is the VPD page to be decoded or output. The <u>PG</u> argument can either be an abbreviation, a
              number  or a pair or numbers/abbreviations separated by a comma. The VPD page abbreviations can be
              seen by using the <u>--enumerate</u> option. If a number is given it is assumed to be decimal  unless  it
              has  a  hexadecimal  indicator  which is either a leading '0x' or a trailing 'h'. If one number is
              given then it is assumed to be a VPD page number. If two numbers (or abbreviations) are given then
              the second one is the same as <u>VP</u> (see the <u>--vendor=VP</u> option). If this option is  not  given  (nor
              '-i',  '-l'  nor '-V') then the "Supported VPD pages" (0x0) VPD page is fetched and decoded. If <u>PG</u>
              is '-1' or 'sinq' then the standard INQUIRY response is output. This option may also be used  with
              the <u>--enumerate</u> (see its description).
              If  <u>PG</u>  is  not found in the 'Supported VPD pages' VPD page (0x0) then EDOM is returned. To bypass
              this check use the <u>--force</u> option.

       <b>-q</b>, <b>--quiet</b>
              suppress the amount of decoding and error output.

       <b>-r</b>, <b>--raw</b>
              if not used with <u>--inhex=FN</u> then output requested VPD page in binary.  The output should be  piped
              to  a  file  or another utility when this option is used. The binary is sent to stdout, and errors
              are sent to stderr.
              if used with <u>--inhex=FN</u> then the contents of <u>FN</u> is treated as binary.

       <b>-Q</b>, <b>--sinq_inraw</b>=<u>RFN</u>
              where <u>RFN</u> is a filename containing binary standard  INQUIRY  response  data  that  matches  either
              <u>DEVICE</u>  or  <u>FN</u>.  Linux  places  this  standard  INQUIRY response in its sysfs pseudo filesystem. A
              typical location is at <a href="file:/sys/class/scsi_device/">/sys/class/scsi_device/</a>&lt;hctl&gt;/device/inquiry where &lt;hctl&gt; is  a  four  part
              numeric  tuple  separated  by  colons.  This tuple distinguishes the device from any others on the
              system. Linux also places some VPD page responses in binary in the same directory with names  like
              "vpd_pg83"  where  the  last two digits form the hexadecimal VPD page number whose binary contents
              are therein.
              Some VPD pages (e.g. the Extended Inquiry VPD page) depend on knowing the settings in the standard
              INQUIRY response to interpret the fields in that VPD page. This option together  with  the  <u>--all</u>,
              <u>--examine</u>  or  <u>--page=PG</u> allows this utility to process both the standard INQUIRY response and VPD
              pages in the same invocation.
              The <u>--raw</u> option has no effect on this option. The <u>DEVICE</u> argument may be given with this option.

       <b>-M</b>, <b>--vendor</b>=<u>VP</u>
              where <u>VP</u> is a vendor (e.g. "sea" for Seagate) or vendor/product acronym  (e.g.  "hp3par"  for  the
              3PAR array from HP). Many vendors have re-used the numbers at the beginning of the vendor specific
              VPD  page  range  (e.g.   page 0xc0) and this option is a way of selecting only those which are of
              interest. Using a <u>VP</u> of "xxx" will list the available acronyms.
              If this option is used with <u>--page=PG</u> and <u>PG</u> is an acronym then this option is ignored. If <u>PG</u> is a
              number (e.g. 0xc0) then <u>VP</u> is used to choose the which vendor specific  page  (e.g.  sharing  page
              number 0xc0) to decode.

       <b>-v</b>, <b>--verbose</b>
              increases the level or verbosity.

       <b>-V</b>, <b>--version</b>
              print out version string then exit.

</pre><h4><b>ATA</b> <b>INFORMATION</b> <b>VPD</b> <b>PAGE</b></h4><pre>
       This  VPD page (0x89 or 'ai') is defined by the SCSI to ATA Translation standard. It contains information
       about the SAT layer, the "signature" of the ATA device and the response  to  the  ATA  IDENTIFY  (PACKET)
       DEVICE  command. The latter part has 512 bytes of identity, capability and settings data which the hdparm
       utility is capable of decoding (so this utility doesn't decode it).

       To unclutter the output for this page, the signature and the IDENTIFY (PACKET) DEVICE  response  are  not
       output  unless  the  <u>--long</u>  option  (or  <u>--hex</u>  or <u>--raw</u>) are given. When the <u>--long</u> option is given the
       IDENTIFY (PACKET) DEVICE response is output as 256 (16 bit) words as is the fashion for ATA  devices.  To
       see  that response as a string of bytes use the '-HH' option. To format the output suitable for hdparm to
       decode use either the '-HHH' or '-rr' option. For example if 'dev/sdb' is a SATA disk behind a SAT  layer
       then this command: 'sg_vpd -p ai -HHH /dev/sdb | hdparm --Istdin' should decode the ATA IDENTIFY (PACKET)
       DEVICE response.

</pre><h4><b>NOTES</b></h4><pre>
       Since  some  VPD  pages  (e.g.  the  Extended  INQUIRY  page)  depend on settings in the standard INQUIRY
       response, then the standard INQUIRY response is output as a pseudo VPD page when <u>PG</u> is  set  to  '-1'  or
       'sinq'.  Also  the  decoding of some fields (e.g. the Extended INQUIRY page's SPT field) is expanded when
       the '--long' option is given using the standard INQUIRY  response  information  (e.g.  the  PDT  and  the
       PROTECT fields).

       The <u>DEVICE</u> is opened with a read-only flag (e.g. in Unix with the O_RDONLY flag).

</pre><h4><b>EXIT</b> <b>STATUS</b></h4><pre>
       The exit status of sg_vpd is 0 when it is successful. Otherwise see the <a href="../man8/sg3_utils.8.html">sg3_utils</a>(8) man page.

</pre><h4><b>EXAMPLES</b></h4><pre>
       The  examples in this page use Linux device names. For suitable device names in other supported Operating
       Systems see the <a href="../man8/sg3_utils.8.html">sg3_utils</a>(8) man page.

       To see the VPD pages that a device supports, use with no options. The command line  invocation  is  shown
       first followed by a typical response:

          # sg_vpd /dev/sdb
       Supported VPD pages VPD page:
         Supported VPD pages [sv]
         Unit serial number [sn]
         Device identification [di]
         Extended inquiry data [ei]
         Block limits (SBC) [bl]

       To see the VPD page numbers associated with each supported page then add the '--long' option to the above
       command  line. To view a VPD page either its number or abbreviation can be given to the '--page=' option.
       The page name abbreviations are shown within square brackets above. In  the  next  example  the  Extended
       inquiry data VPD page is listed:

          # sg_vpd --page=ei /dev/sdb
          extended INQUIRY data VPD page:
            ACTIVATE_MICROCODE=0 SPT=0 GRD_CHK=0 APP_CHK=0 REF_CHK=0
            UASK_SUP=0 GROUP_SUP=0 PRIOR_SUP=0 HEADSUP=1 ORDSUP=1 SIMPSUP=1
            WU_SUP=0 CRD_SUP=0 NV_SUP=0 V_SUP=0
            P_I_I_SUP=0 LUICLR=0 R_SUP=0 CBCS=0
            Multi I_T nexus microcode download=0
            Extended self-test completion minutes=0
            POA_SUP=0 HRA_SUP=0 VSA_SUP=0

       To  check if any protection types are supported by a disk use the '--long' option on the Extended inquiry
       data VPD page:

          # sg_vpd --page=ei --long /dev/sdb
          extended INQUIRY data VPD page:
            ACTIVATE_MICROCODE=0
            SPT=1 [protection types 1 and 2 supported]
            GRD_CHK=1
            ....

       Search for the name (and acronym) of all pages that share VPD page number 0xb0 .

          # sg_vpd --page=0xb0 --enumerate
          Matching standard VPD pages:
            bl         0xb0      Block limits (SBC)
            oi         0xb0      OSD information
            sad        0xb0      Sequential access device capabilities (SSC)

       Some examples follow using the "--all" option. Send an ASCII hexadecimal representation of all VPD  pages
       to a file:

          # sg_vpd --all -HHHH /dev/sg3 &gt; all_vpds.hex

       At some later time that file could be decoded with:

          # sg_vpd --all --inhex=all_vpds.hex

       To do the equivalent as the previous example but use a file containing binary:

          # sg_vpd --all --raw /dev/sg3 &gt; all_vpds.bin
          # sg_vpd --all --raw --inhex=all_vpds.bin

       Notice  that  "--raw"  must  be  given  with  the  second  (--inhex) invocation to alert the utility that
       all_vpds.bin contains binary as it assumes  ASCII  hexadecimal  by  default.  Next  we  only  decode  T10
       specified VPD pages excluding vendor specific VPD pages that start at page number 0xc0:

          # sg_vpd --all --page=0xbf --raw --inhex=all_vpds.bin

       In  Linux,  binary  images of some important VPD page responses (e.g. 0, 80h and 83h) are cached in files
       within the sysfs pseudo file system. Since VPD pages hardly ever change their  contents,  decoding  those
       files  will  give  the same output as probing the device with the added benefit that decoding those files
       doesn't need root permissions. The long and short forms are shown:

          sg_vpd --raw --inhex=/sys/class/scsi_generic/sg3/device/vpd_pg83

          sg_vpd -rI /sys/class/scsi_generic/sg3/device/vpd_pg83

       If /dev/sg3 is a disk at 2:0:0:0 , then this invocation should give more verbose output  but  essentially
       the same as the previous two examples.

          sg_vpd -v -r -I /sys/class/scsi_disk/2:0:0:0/device/vpd_pg83

       Further examples can be found on the https://sg.danny.cz/sg/sg3_utils.html web page.

</pre><h4><b>AUTHOR</b></h4><pre>
       Written by Douglas Gilbert

</pre><h4><b>REPORTING</b> <b>BUGS</b></h4><pre>
       Report bugs to &lt;dgilbert at interlog dot com&gt;.

</pre><h4><b>COPYRIGHT</b></h4><pre>
       Copyright Â© 2006-2023 Douglas Gilbert
       This  software  is  distributed  under  a  BSD-2-Clause  license.  There  is  NO  warranty;  not even for
       MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b>sg_inq(sg3_utils),</b> <b>sg3_utils(sg3_utils),</b> <b>sdparm(sdparm),</b> <b>hdparm(hdparm)</b>

sg3_utils-1.48                                     April 2023                                          <u><a href="../man8/SG_VPD.8.html">SG_VPD</a></u>(8)
</pre>
 </div>
</div></section>
</div>
</body>
</html>