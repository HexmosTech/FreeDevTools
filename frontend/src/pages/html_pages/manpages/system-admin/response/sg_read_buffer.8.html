<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>sg_read_buffer - send SCSI READ BUFFER command</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/sg3-utils">sg3-utils_1.48-2ubuntu1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       sg_read_buffer - send SCSI READ BUFFER command

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>sg_read_buffer</b>   [<u>--eh_code=EHC</u>]  [<u>--help</u>]  [<u>--hex</u>]  [<u>--id=ID</u>]  [<u>--inhex=FN</u>]  [<u>--length=LEN</u>]  [<u>--mode=MO</u>]
       [<u>--no_output</u>] [<u>--offset=OFF</u>] [<u>--raw</u>] [<u>--readonly</u>] [<u>--specific=MS</u>] [<u>--verbose</u>] [<u>--version</u>] <u>DEVICE</u>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       Sends a SCSI READ BUFFER command to the <u>DEVICE</u>, and if there is a response either decodes it,  prints  it
       in  hexadecimal  or sends it in binary to stdout. If a response is received for a "descriptor" mode then,
       in the absence of <u>--hex</u> and <u>--raw</u>, it is  decoded.  Response  for  non-descriptor  modes  are  output  in
       hexadecimal unless the <u>--raw</u> option is given.

       The  responses  to the Read microcode status ('rd_microc_st' [0xf]) and Error history ('err_hist' [0x1c])
       modes are decoded as described in spc6r06.pdf and earlier T10 documents.

       This utility may be called without a <u>DEVICE</u> but with a <u>--inhex=FN</u> option instead. <u>FN</u> is expected to be  a
       file name (or
        '-' for stdin). The contents of the file (or stdin stream) is assumed to be hexadecimal (or binary) data
       that represents a SCSI READ BUFFER command response and is decoded as such.

</pre><h4><b>OPTIONS</b></h4><pre>
       Arguments to long options are mandatory for short options as well.

       <b>-e</b>, <b>--eh_code</b>=<u>EHC</u>
              <u>EHC</u>  is the error history code placed in the Buffer ID field of the cdb.  The Mode field is set to
              err_hist [0x1c]. The option is equivalent to using  the  '<u>--mode=eh</u>  <u>--id=EHC</u>'  options.  If  this
              option  and one of the other options is given, then an error will be generated if they contradict.
              The default (maximum) response length is increased to 64 bytes when may need to be  increased  (if
              so that is noted if the output is truncated).
              An  example  is setting <u>EHC</u> to 0 in which case the error history directory will be decoded (unless
              <u>--hex</u> or <u>--raw</u> options is given).

       <b>-h</b>, <b>--help</b>
              output the usage message then exit. If used multiple times also prints the mode  names  and  their
              acronyms.

       <b>-H</b>, <b>--hex</b>
              output  the  response  in  hexadecimal.  When  given  twice the response is output in hex with the
              corresponding representation in ASCII to the right of each line. When given three time the hex  is
              printed without addresses (indexes) at the start of each line; this type of format is suitable for
              the <u>--inhex=FN</u> option on a subsequent invocation.

       <b>-i</b>, <b>--id</b>=<u>ID</u>
              this  option  sets  the  Buffer  ID  field  in  the cdb. <u>ID</u> is a value between 0 (default) and 255
              inclusive. The meaning of the Buffer ID field varies with the value in the Mode field of the cdb.

       <b>-I</b>, <b>--inhex</b>=<u>FN</u>
              <u>FN</u> is expected to be a file name (or '-' for stdin) which contains  ASCII  hexadecimal  or  binary
              representing  a  READ BUFFER response. If known this utility will then decode that response. It is
              preferable to also supply the <u>--mode=MO</u>, <u>--id=ID</u> and possible <u>--specific=MS</u> options,  since  these
              are  not  present in the response. See the "HEX, BINARY AND JSON FORMATS" section in the sg3_utils
              manpage for more information. If the <u>--raw</u> option is also given then the contents of <u>FN</u> is treated
              as binary.

       <b>-l</b>, <b>--length</b>=<u>LEN</u>
              where <u>LEN</u> is the length, in bytes, that is placed in the "allocation length" field in the cdb. The
              default value is 4 (bytes) which is increased to 64 if the 'err_hist'  mode  [0x1c]  is  given  or
              implied. The device may respond with less bytes.
              If  the  <u>--inhex=FN</u>  option  is  given,  then the default value of the length is increased to 8192
              bytes. This length may then be reduced to match the number of bytes decoded from the  contents  of
              <u>FN</u>.

       <b>-m</b>, <b>--mode</b>=<u>MO</u>
              this  option  sets  the mode field in the cdb. <u>MO</u> is a value between 0 (default) and 31 inclusive.
              Alternatively an abbreviation can be given.  See the MODES section below. To  list  the  available
              mode abbreviations use an invalid one (e.g. '--mode=xxx'). As an example, to fetch the read buffer
              descriptor give '--mode=desc' .

       <b>-N</b>, <b>--no_output</b>
              when  this option is given after sending the SCSI command to the <u>DEVICE</u> the response is processed,
              looking for any errors, and then this utility exits. Any data read by the READ BUFFER  command  is
              ignored.
              May be useful for timing larger reads from the <u>DEVICE</u> buffer in 'data' mode [0x2].

       <b>-o</b>, <b>--offset</b>=<u>OFF</u>
              this  option  sets  the  buffer  offset  field  in the cdb. <u>OFF</u> is a value between 0 (default) and
              2**24-1 . It is a byte offset.

       <b>-r</b>, <b>--raw</b>
              if a response is received then it is sent in binary to stdout. When this option is given  together
              with  <u>--inhex=FN</u> then the contents of <u>FN</u> is assumed to be binary and the output of this utility is
              normal ASCII (i.e. _not_ in binary).

       <b>-R</b>, <b>--readonly</b>
              open the <u>DEVICE</u> read-only (e.g. in Unix with the O_RDONLY  flag).   The  default  is  to  open  it
              read-write.

       <b>-S</b>, <b>--specific</b>=<u>MS</u>
              this  option sets the mode specific field in the cdb. <u>MS</u> is a value between 0 and 7 as this is a 3
              bit field.

       <b>-v</b>, <b>--verbose</b>
              increase the level of verbosity, (i.e. debug output).

       <b>-V</b>, <b>--version</b>
              print the version string and then exit.

</pre><h4><b>MODES</b></h4><pre>
       Following is a list of READ BUFFER command settings for the MODE field.  First is an acronym accepted  by
       the  <u>MO</u> argument of this utility.  Following the acronym in square brackets are the corresponding decimal
       and hex values that may also be given for <u>MO</u>. The following are listed in numerical order.

       hd  [0, 0x0]
              Combined header and data (obsolete in SPC-4).

       vendor  [1, 0x1]
              Vendor specific.

       data  [2, 0x2]
              Data.

       desc  [3, 0x3]
              Descriptor: yields 4 bytes that contain an offset boundary field (1 byte) and buffer  capacity  (3
              bytes).

       echo  [10, 0xa]
              Read data from echo buffer (was called "Echo buffer" in SPC-3).

       echo_desc  [11, 0xb]
              Echo  buffer  descriptor:  yields  4  bytes  of which the last (lowest) 13 bits represent the echo
              buffer capacity. The maximum echo buffer size is 4096 bytes.

       rd_microc_st  [15, 0xf]
              Read microcode status. Added in spc5r20 .

       en_ex  [26, 0x1a]
              Enable expander communications protocol and Echo buffer. Made obsolete in SPC-4.

       err_hist|eh  [28, 0x1c]
              Error history. Either 'err_hist' or the short  'eh'  abbreviation  can  be  used  for  this  mode.
              Introduced in SPC-4.

</pre><h4><b>NOTES</b></h4><pre>
       All numbers given with options are assumed to be decimal.  Alternatively numerical values can be given in
       hexadecimal preceded by either "0x" or "0X" (or has a trailing "h" or "H").

</pre><h4><b>EXIT</b> <b>STATUS</b></h4><pre>
       The exit status of sg_read_buffer is 0 when it is successful. Otherwise see the <a href="../man8/sg3_utils.8.html">sg3_utils</a>(8) man page.

</pre><h4><b>AUTHORS</b></h4><pre>
       Written by Luben Tuikov and Douglas Gilbert.

</pre><h4><b>REPORTING</b> <b>BUGS</b></h4><pre>
       Report bugs to &lt;dgilbert at interlog dot com&gt;.

</pre><h4><b>COPYRIGHT</b></h4><pre>
       Copyright Â© 2006-2023 Luben Tuikov and Douglas Gilbert
       This  software  is  distributed  under  a  BSD-2-Clause  license.  There  is  NO  warranty;  not even for
       MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b>sg_write_buffer(sg3_utils)</b>

sg3_utils-1.48                                      June 2023                                  <u><a href="../man8/SG_READ_BUFFER.8.html">SG_READ_BUFFER</a></u>(8)
</pre>
 </div>
</div></section>
</div>
</body>
</html>