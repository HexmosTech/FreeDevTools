<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>sg_get_lba_status - send SCSI GET LBA STATUS(16 or 32) command</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/sg3-utils">sg3-utils_1.48-2ubuntu1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       sg_get_lba_status - send SCSI GET LBA STATUS(16 or 32) command

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>sg_get_lba_status</b>  [<u>--16</u>]  [<u>--32</u>]  [<u>--blockhex</u>] [<u>--brief</u>] [<u>--element-id=EI</u>] [<u>--help</u>] [<u>--hex</u>] [<u>--inhex=FN</u>]
       [<u>--json[=JO</u>]]  [<u>--lba=LBA</u>]  [<u>--maxlen=LEN</u>]  [<u>--raw</u>]   [<u>--readonly</u>]   [<u>--report-type=RT</u>]   [<u>--scan-len=SL</u>]
       [<u>--verbose</u>] [<u>--version</u>] <u>DEVICE</u>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       Send the SCSI GET LBA <a href="../man16/STATUS.16.html">STATUS</a>(16) or GET LBA <a href="../man32/STATUS.32.html">STATUS</a>(32) command to the <u>DEVICE</u> and output the response. The
       16  byte  command  variant  was  introduced in (draft) SBC-3 revision 20 and devices that support logical
       block provisioning should support this command. The GET LBA <a href="../man32/STATUS.32.html">STATUS</a>(32) command was added in (draft) SBC-4
       revision 14.

       The default action is to decode the response into one LBA status descriptor per line then output a header
       and the status descriptors to stdout. The descriptor LBA is output in hex  (prefixed  by  '0x')  and  the
       number  of  blocks  is  output  in  decimal  followed  by  the provisioning status, LBA accessibility and
       additional status in decimal. The provisioning status can be in the range 0 to 15 of which only 0 (mapped
       or unknown), 1 (unmapped), 2 (anchored), 3 (mapped) and 4 (unknown) are used  currently.  The  amount  of
       output can be reduced by the <u>--brief</u> option.

       Rather than send this SCSI command to <u>DEVICE</u>, if the <u>--inhex=FN</u> option is given, then the contents of the
       file named <u>FN</u> are decoded as ASCII hex and then processed if it was the response of this command.

</pre><h4><b>OPTIONS</b></h4><pre>
       Arguments to long options are mandatory for short options as well.

       <b>-S</b>, <b>--16</b>
              send  SCSI  GET LBA <a href="../man16/STATUS.16.html">STATUS</a>(16) command which is the 16 byte variant. In the absence of the <u>--16</u> or
              the <u>--32</u> options the SCSI GET LBA <a href="../man16/STATUS.16.html">STATUS</a>(16) command is sent. If both <u>--16</u> and  the  <u>--32</u>  options
              are given then the GET LBA <a href="../man16/STATUS.16.html">STATUS</a>(16) command is sent.

       <b>-T</b>, <b>--32</b>
              send  SCSI  GET  LBA <a href="../man32/STATUS.32.html">STATUS</a>(32) command which is the 32 byte variant. When given together with the
              <u>--16</u> option then this option is ignored (so the GET LBA <a href="../man16/STATUS.16.html">STATUS</a>(16) command is sent).

       <b>-b</b>, <b>--brief</b>
              when use once then one LBA status descriptor per line is output to stdout.   Each  line  has  this
              format:   "0x&lt;descriptor_LBA&gt;    0x&lt;blocks&gt;  &lt;provisioning_status&gt;  &lt;additional_status&gt;".  So  the
              descriptor's starting LBA and number of blocks are output in hex while the provisioning status and
              additional status are in decimal. When used twice (e.g.  '-bb'  or  '--brief  --brief')  then  the
              provisioning  status  of  the  given  <u>LBA</u> (or LBA 0 if the <u>--lba</u> option is not given) is output to
              stdout. A check is made that the given <u>LBA</u> lies in the range of  the  first  returned  LBA  status
              descriptor  (as  it  should  according to SBC-3 revision 20) and warnings are sent to stderr if it
              doesn't.

       <b>-B</b>, <b>--blockhex</b>
              the number of blocks in each LBA status descriptor is usually displayed in decimal.  An  exception
              is  when  the <u>--brief</u> option is given in which case it is shown in hexadecimal. When the option is
              given once, both cases are output in hexadecimal. When the option is given twice, both  cases  are
              output in decimal.

       <b>-e</b>, <b>--element-id</b>=<u>EI</u>
              where  <u>EI</u>  is  the element identifier of the physical element for which the LBAs shall be reported
              based on the value in the report type field (i.e.  <u>RT</u>). This option is only active with  the  SCSI
              GET LBA <a href="../man32/STATUS.32.html">STATUS</a>(32) command (i.e. it is ignored if the GET LBA <a href="../man16/STATUS.16.html">STATUS</a>(16) command is sent).
              Valid  element  identifiers  are non-zero. The default value of <u>EI</u> is 0 which means in the context
              that no element identifier is specified.

       <b>-h</b>, <b>--help</b>
              output the usage message then exit.

       <b>-H</b>, <b>--hex</b>
              output response to this command in  ASCII  hex.  To  produce  hex  output  suitable  for  a  later
              invocation to fetch with the <u>--inhex=FN</u> option, use this option three times. The short form option
              makes this more convenient: '-HHH'.

       <b>-i</b>, <b>--inhex</b>=<u>FN</u>
              where  <u>FN</u>  is  a  filename whose contents are assumed to be ASCII hexadecimal bytes. See the "HEX,
              BINARY AND JSON FORMATS" section in the sg3_utils manpage for more information. If <u>DEVICE</u> is  also
              given then it is ignored. If the <u>--raw</u> option is also given then the contents of <u>FN</u> are treated as
              binary.

       <b>-j</b>[=<u>JO</u>], <b>--json</b>[=<u>JO</u>]
              output  is  in  JSON  format instead of plain text form. Note that arguments to the short and long
              form are themselves optional and if present start with "=" and no whitespace is  permitted  around
              that "=".
              See sg3_utils_json manpage or use '?' for <u>JO</u> to get a summary.

       <b>-J</b>, <b>--js-file</b>=<u>JFN</u>
              output  is  in  JSON  format  and  it  is sent to a file named <u>JFN</u>. If that file exists then it is
              truncated. By default, the JSON output is sent to stdout.
              When this option is given,  the  <u>--json[=JO]</u>  option  is  implied  and  need  not  be  given.  The
              <u>--json[=JO]</u> option may still be needed to set the <u>JO</u> parameter to non-default values.

       <b>-l</b>, <b>--lba</b>=<u>LBA</u>
              where  <u>LBA</u>  is the starting Logical Block Address (LBA) to check the provisioning status for. Note
              that the <u>DEVICE</u> chooses how many following blocks that it will return provisioning status for.

       <b>-m</b>, <b>--maxlen</b>=<u>LEN</u>
              where <u>LEN</u> is the (maximum) response length in bytes. It is placed in the cdb's "allocation length"
              field. If not given then 24 is used. 24 is enough space for the response header and one LBA status
              descriptor.  <u>LEN</u> should be 8 plus a multiple of 16 (e.g. 24, 40, and 56 are suitable).

       <b>-r</b>, <b>--raw</b>
              output response in binary (to stdout) unless the <u>--inhex=FN</u> option is also given. In that case the
              input file name (<u>FN</u>) is decoded as binary (and the output is _not_ in binary).

       <b>-R</b>, <b>--readonly</b>
              open the <u>DEVICE</u> read-only (e.g. in Unix with the O_RDONLY  flag).   The  default  is  to  open  it
              read-write.

       <b>-t</b>, <b>--report-type</b>=<u>RT</u>
              where  <u>RT</u>  is  0  for report all LBAs; 1 for report LBAs using non-zero provisioning status; 2 for
              report LBAs that are mapped; 3 for report LBAs that are de-allocated; 4 for report LBAs  that  are
              anchored; 16 for report LBAs that may return an unrecovered error. The REPORT TYPE field was added
              to the GET LBA STATUS cdb in sbc4r12.
              Since  the  REPORT  TYPE  field  is  newer  than the command, the response contains the RTP bit to
              indicate whether or not the <u>DEVICE</u> acts on the REPORT TYPE field (set when  it  does  act  on  it,
              clear otherwise).

       <b>-s</b>, <b>--scan-len</b>=<u>SL</u>
              where <u>SL</u> is the scan length which is the maximum number of contiguous logical blocks to be scanned
              for  logical blocks that meet the given report type (i.e. <u>RT</u>). This option is only active with the
              SCSI GET LBA <a href="../man32/STATUS.32.html">STATUS</a>(32) command (i.e. it is ignored if the GET LBA <a href="../man16/STATUS.16.html">STATUS</a>(16) command is sent).
              The default value of <u>SL</u> is 0 which should be interpreted by the <u>DEVICE</u> as there is  no  limits  to
              the number of LBAs that shall be scanned.

       <b>-v</b>, <b>--verbose</b>
              increase  the  level of verbosity, (i.e. debug output). Additional output caused by this option is
              sent to stderr.

       <b>-V</b>, <b>--version</b>
              print the version string and then exit.

</pre><h4><b>NOTES</b></h4><pre>
       In SBC-3 revision 25 the calculation associated with the Parameter Data Length field in the response  was
       modified. Prior to that the byte offset was 8 and in revision 25 it was changed to 4.

       For  a discussion of logical block provisioning see section 4.7 of sbc4r14.pdf at https://www.t10.org (or
       the corresponding section of a later draft).

</pre><h4><b>EXAMPLES</b></h4><pre>
       This example uses a "canned" hex file rather than a real <u>DEVICE</u>.

          # cd &lt;folder at root of sg3_utils source package&gt;
          # sg_get_lba_status --inhex=inhex/get_lba_status.hex

         Command completed due to meeting capacity of medium
         RTP=0x0
         [1] LBA: 0x0             blocks:  287453952  mapped (or unknown);  LBA accessibility not reported
         [2] LBA: 0x11223300      blocks:         68   deallocated;   LBA  access  not  reported   [may  contain
       unrecovered errors]
         [3]  LBA:  0x11223344       blocks:          51   deallocated;   LBA  extent inaccessible  [may contain
       unrecovered errors]

</pre><h4><b>EXIT</b> <b>STATUS</b></h4><pre>
       The exit status of sg_get_lba_status is 0 when it is successful. Otherwise see the <a href="../man8/sg3_utils.8.html">sg3_utils</a>(8) man page.

</pre><h4><b>AUTHORS</b></h4><pre>
       Written by Douglas Gilbert.

</pre><h4><b>REPORTING</b> <b>BUGS</b></h4><pre>
       Report bugs to &lt;dgilbert at interlog dot com&gt;.

</pre><h4><b>COPYRIGHT</b></h4><pre>
       Copyright © 2009-2022 Douglas Gilbert
       This software is  distributed  under  a  BSD-2-Clause  license.  There  is  NO  warranty;  not  even  for
       MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b>sg_write_same,sg_unmap,sg3_utils,sg3_utils_json(sg3_utils)</b>

sg3_utils-1.48                                      June 2023                               <u><a href="../man8/SG_GET_LBA_STATUS.8.html">SG_GET_LBA_STATUS</a></u>(8)
</pre>
 </div>
</div></section>
</div>
</body>
</html>