<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>systemd-sysusers, systemd-sysusers.service - Allocate system users and groups</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/systemd-standalone-sysusers">systemd-standalone-sysusers_257.7-1ubuntu1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       systemd-sysusers, systemd-sysusers.service - Allocate system users and groups

</pre><h4><b>SYNOPSIS</b></h4><pre>

       <b>systemd-sysusers</b> [OPTIONS...] [<u>CONFIGFILE</u>...]

       systemd-sysusers.service

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>systemd-sysusers</b> creates system users and groups, based on files in the format described in
       <b><a href="../man5/sysusers.d.5.html">sysusers.d</a></b>(5).

       If invoked with no arguments, directives from the configuration files found in the directories specified
       by <b><a href="../man5/sysusers.d.5.html">sysusers.d</a></b>(5) are executed. When invoked with positional arguments, if option <b>--replace=</b><u>PATH</u> is
       specified, arguments specified on the command line are used instead of the configuration file <u>PATH</u>.
       Otherwise, just the configuration specified by the command line arguments is executed. If the string "-"
       is specified instead of a filename, the configuration is read from standard input. If the argument is a
       file name (without any slashes), all configuration directories are searched for a matching file and the
       file found that has the highest priority is executed. If the argument is a path, that file is used
       directly without searching the configuration directories for any other matching file.

</pre><h4><b>OPTIONS</b></h4><pre>
       The following options are understood:

       <b>--root=</b><u>root</u>
           Takes a directory path as an argument. All paths will be prefixed with the given alternate <u>root</u> path,
           including config search paths.

           Added in version 215.

       <b>--image=</b><u>image</u>
           Takes a path to a disk image file or block device node. If specified all operations are applied to
           file system in the indicated disk image. This is similar to <b>--root=</b> but operates on file systems
           stored in disk images or block devices. The disk image should either contain just a file system or a
           set of file systems within a GPT partition table, following the <b>Discoverable</b> <b>Partitions</b>
           <b>Specification</b>[1]. For further information on supported disk images, see <b><a href="../man1/systemd-nspawn.1.html">systemd-nspawn</a></b>(1)'s switch of
           the same name.

           Added in version 247.

       <b>--image-policy=</b><u>policy</u>
           Takes an image policy string as argument, as per <b><a href="../man7/systemd.image-policy.7.html">systemd.image-policy</a></b>(7). The policy is enforced when
           operating on the disk image specified via <b>--image=</b>, see above. If not specified, defaults to the "*"
           policy, i.e. all recognized file systems in the image are used.

       <b>--replace=</b><u>PATH</u>
           When this option is given, one or more positional arguments must be specified. All configuration
           files found in the directories listed in <b><a href="../man5/sysusers.d.5.html">sysusers.d</a></b>(5) will be read, and the configuration given on
           the command line will be handled instead of and with the same priority as the configuration file
           <u>PATH</u>.

           This option is intended to be used when package installation scripts are running and files belonging
           to that package are not yet available on disk, so their contents must be given on the command line,
           but the admin configuration might already exist and should be given higher priority.

           <b>Example</b> <b>1.</b> <b>RPM</b> <b>installation</b> <b>script</b> <b>for</b> <b>radvd</b>

               echo 'u radvd - "radvd daemon"' | \
                         systemd-sysusers --replace=/usr/lib/sysusers.d/radvd.conf -

           This will create the radvd user as if /usr/lib/sysusers.d/radvd.conf was already on disk. An admin
           might override the configuration specified on the command line by placing /etc/sysusers.d/radvd.conf
           or even /etc/sysusers.d/00-overrides.conf.

           Note that this is the expanded form, and when used in a package, this would be written using a macro
           with "radvd" and a file containing the configuration line as arguments.

           Added in version 238.

       <b>--dry-run</b>
           Process the configuration and figure out what entries would be created, but do not actually write
           anything.

           Added in version 250.

       <b>--inline</b>
           Treat each positional argument as a separate configuration line instead of a file name.

           Added in version 238.

       <b>--cat-config</b>
           Copy the contents of config files to standard output. Before each file, the filename is printed as a
           comment.

       <b>--tldr</b>
           Copy the contents of config files to standard output. Only the "interesting" parts of the
           configuration files are printed, comments and empty lines are skipped. Before each file, the filename
           is printed as a comment.

       <b>--no-pager</b>
           Do not pipe output into a pager.

       <b>-h</b>, <b>--help</b>
           Print a short help text and exit.

       <b>--version</b>
           Print a short version string and exit.

</pre><h4><b>CREDENTIALS</b></h4><pre>
       <b>systemd-sysusers</b> supports the service credentials logic as implemented by
       <u>ImportCredential=</u>/<u>LoadCredential=</u>/<u>SetCredential=</u> (see <b><a href="../man5/systemd.exec.5.html">systemd.exec</a></b>(5) for details). The following
       credentials are used when passed in:

       <u>passwd.hashed-password.user</u>
           A UNIX hashed password string to use for the specified user, when creating an entry for it. This is
           particularly useful for the "root" user as it allows provisioning the default root password to use
           via a unit file drop-in or from a container manager passing in this credential. Note that setting
           this credential has no effect if the specified user account already exists. This credential is hence
           primarily useful in first boot scenarios or systems that are fully stateless and come up with an
           empty <a href="file:/etc/">/etc/</a> on every boot.

           Added in version 249.

       <u>passwd.plaintext-password.user</u>
           Similar to "passwd.hashed-password.<u>user</u>" but expect a literal, plaintext password, which is then
           automatically hashed before used for the user account. If both the hashed and the plaintext
           credential are specified for the same user the former takes precedence. It's generally recommended to
           specify the hashed version; however in test environments with weaker requirements on security it
           might be easier to pass passwords in plaintext instead.

           Added in version 249.

       <u>passwd.shell.user</u>
           Specifies the shell binary to use for the specified account when creating it.

           Added in version 249.

       <u>sysusers.extra</u>
           The contents of this credential may contain additional lines to operate on. The credential contents
           should follow the same format as any other sysusers.d/ drop-in. If this credential is passed it is
           processed after all of the drop-in files read from the file system.

           Added in version 252.

       Note that by default the systemd-sysusers.service unit file is set up to inherit the
       "passwd.hashed-password.root", "passwd.plaintext-password.root", "passwd.shell.root" and "sysusers.extra"
       credentials from the service manager. Thus, when invoking a container with an unpopulated <a href="file:/etc/">/etc/</a> for the
       first time it is possible to configure the root user's password to be "systemd" like this:

           # systemd-nspawn --image=... --set-credential=passwd.hashed-password.root:'$y$j9T$yAuRJu1o5HioZAGDYPU5d.$F64ni6J2y2nNQve90M/p0ZP0ECP/qqzipNyaY9fjGpC' ...

       Note again that the data specified in this credential is consulted only when creating an account for the
       first time, it may not be used for changing the password or shell of an account that already exists.

       Use <b><a href="../man1/mkpasswd.1.html">mkpasswd</a></b>(1) for generating UNIX password hashes from the command line.

</pre><h4><b>EXIT</b> <b>STATUS</b></h4><pre>
       On success, 0 is returned, a non-zero failure code otherwise.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man1/systemd.1.html">systemd</a></b>(1), <b><a href="../man5/sysusers.d.5.html">sysusers.d</a></b>(5), <b>Users,</b> <b>Groups,</b> <b>UIDs</b> <b>and</b> <b>GIDs</b> <b>on</b> <b>systemd</b> <b>systems</b>[2], <b><a href="../man5/systemd.exec.5.html">systemd.exec</a></b>(5),
       <b><a href="../man1/mkpasswd.1.html">mkpasswd</a></b>(1)

</pre><h4><b>NOTES</b></h4><pre>
        1. Discoverable Partitions Specification
           https://uapi-group.org/specifications/specs/discoverable_partitions_specification

        2. Users, Groups, UIDs and GIDs on systemd systems
           https://systemd.io/UIDS-GIDS

systemd 257.7                                                                                <u><a href="../man8/SYSTEMD-SYSUSERS.8.html">SYSTEMD-SYSUSERS</a></u>(8)
</pre>
 </div>
</div></section>
</div>
</body>
</html>