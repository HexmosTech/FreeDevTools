<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>dnssec-trigger,  dnssec-triggerd,  dnssec-trigger-panel,  dnssec-trigger-control, dnssec-trigger-control-</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/dnssec-trigger">dnssec-trigger_0.17+repack-5.3_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       <b>dnssec-trigger,</b>  <b>dnssec-triggerd,</b>  <b>dnssec-trigger-panel,</b>  <b>dnssec-trigger-control,</b> <b>dnssec-trigger-control-</b>
       <b>setup,</b> <b>dnssec-trigger.conf</b> - check DNS servers for DNSSEC support and adjust to compensate.

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>dnssec-triggerd</b> [<b>-d</b>] [<b>-v</b>] [<b>-u</b>] [<b>-c</b> <u>file</u>]

       <b>dnssec-trigger-control</b> [<b>-c</b> <u>file</u>] [<b>-s</b> ip[@port] ] command [arguments]

       <b>dnssec-trigger-panel</b> [<b>-d</b>] [<b>-c</b> <u>file</u>]

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The <b>dnssec-trigger</b> programs steer <u><a href="../man8/unbound.8.html">unbound</a></u>(8) towards DNSSEC capable DNS servers.  A DHCP  hook  installed
       on  the system calls <b>dnssec-trigger-control</b> that contacts the daemon <b>dnssec-triggerd</b> that probes the list
       of servers.  The daemon then adjusts a running unbound through <u><a href="../man8/unbound-control.8.html">unbound-control</a></u>(8) and notifies  the  user
       applet <b>dnssec-trigger-panel</b> for GUI display.

       The  <b>dnssec-trigger-panel</b>  runs  after user login, displays notifications and status to the user.  It may
       popup a warning if no DNSSEC capable servers are available, with options  to  disconnect  or  to  connect
       insecurely.

       The  <b>dnssec-trigger-control</b>  tool is used in the background by scripts to notify the daemon of new (DHCP)
       DNS servers.  It can be used to test the system by providing a (fake) list of DNS server IP addresses.

       The <b>dnssec-trigger-control-setup</b> tool is used to setup the SSL keys that the daemon and user panel use to
       communicate securely.  It must be run once after installation.

</pre><h4><b>THE</b> <b>DNSSEC-TRIGGERD</b> <b>DAEMON</b></h4><pre>
       Thus the dnssec-triggerd daemon runs continually, and is started after boot.  It receives a  list  of  IP
       addresses,  probes  them,  and  adjusts  unbound  and  resolv.conf.  Unbound acts as the validating local
       resolver, running on 127.0.0.1.  And resolv.conf is modified to point to 127.0.0.1.

       <b>-c</b> <u>cfgfile</u>
              Set the config file with settings for the dnssec-triggerd to read instead of reading the  file  at
              the default location, <u>/etc/dnssec-trigger/dnssec-trigger.conf</u>. The syntax is described below.

       <b>-d</b>     Debug flag, do not fork into the background, but stay attached to the console.

       <b>-u</b>     uninstall dns override: makes resolv.conf mutable again, or other OS action.

       <b>-v</b>     Increase  verbosity.  If given multiple times, more information is logged.  This is in addition to
              the verbosity (if any) from the config file.

</pre><h4><b>THE</b> <b>DNSSEC-TRIGGER.CONF</b> <b>FILE</b></h4><pre>
       The config file contains options.  It is fairly simple, key: value.  You can make comments with  '#'  and
       have empty lines.  The parser is simple and expects one statement per line.

       <b>verbosity:</b> &lt;num&gt;
              Amount of logging, 1 is default. 0 is only errors, 2 is more detail, 4 for debug.

       <b>pidfile:</b> "&lt;file&gt;"
              The filename where the pid of the dnssec-triggerd is stored.  Default is /run/dnssec-triggerd.pid.

       <b>logfile:</b> "&lt;file&gt;"
              Log to a file instead of syslog, default is to syslog.

       <b>use-syslog:</b> &lt;yes or no&gt;
              Log  to  syslog,  default  is  yes.   Set  to  no logs to stderr (if no logfile) or the configured
              logfile.

       <b>unbound-control:</b> "&lt;command&gt;"
              The string gives the command to execute.  It can be "unbound-control" to search the runtime  PATH,
              or  a  full  pathname.  With a space after the command arguments can be configured to the command,
              i.e. "/usr/local/bin/unbound-control -c my.conf".

       <b>resolvconf:</b> "<a href="file:/etc/resolv.conf">/etc/resolv.conf</a>"
              The resolv.conf file to edit (on posix systems).  The daemon keeps the file readonly and only make
              it writable shortly to change it itself.  This is to keep other software from interfering.  On OSX
              (if compiled in) also the DNS settings are changed in the network configuration machinery (visible
              in the network settings control panel).  On Windows (if compiled), it sets registry  settings  for
              network  configuration  (may be visible in the control panel tab for network devices) and does not
              write a resolv.conf file.

       <b>domain:</b> "example.com"
              The domain to set in resolv.conf.  See <u><a href="../man5/resolv.conf.5.html">resolv.conf</a></u>(5).  Picked up once  during  installation,  and
              not from DHCP since it allows directing traffic elsewhere.

       <b>search:</b> "example.com"
              The  domain  name  search  path to set in resolv.conf.  See <u><a href="../man5/resolv.conf.5.html">resolv.conf</a></u>(5).  Picked up once during
              installation, and not from DHCP since it allows directing traffic elsewhere.

       <b>noaction:</b> &lt;yes or no&gt;
              Default is no.  If yes, no action is taken to change unbound-control or resolv.conf.  The software
              can be tested with this, probe results are available.

       <b>port:</b> &lt;8955&gt;
              Port number to use for communication with  dnssec-triggerd.   Communication  uses  127.0.0.1  (the
              loopback  interface).   SSL is used to secure it, and the keys are stored on the disk (see below).
              The other tools read this config file to find the port number and key locations.

       <b>login-command:</b> "sensible-browser"
              The command that is run when the user  clicks  Login  on  the  no  web  access  dialog.   That  is
              supposedly  a  web  browser, that is aimed to open some url so that the hot-spot network login can
              intercept and show its login page.  The default is a detected generic web browser.  The  ""  empty
              string turns off this feature and no command gets run.

       <b>login-location:</b> "<a href="http://www.nlnetlabs.nl/projects/dnssec-trigger">http://www.nlnetlabs.nl/projects/dnssec-trigger</a>"
              The url that is opened with the web browser.  Used as commandline argument.

       <b>server-key-file:</b> "/etc/dnssec-trigger/dnssec_trigger_server.key"

       <b>server-cert-file:</b> "/etc/dnssec-trigger/dnssec_trigger_server.pem"

       <b>control-key-file:</b> "/etc/dnssec-trigger/dnssec_trigger_control.key"

       <b>control-cert-file:</b> "/etc/dnssec-trigger/dnssec_trigger_control.pem"
              The  files  used  for  SSL secured communication with dnssec-triggerd.  These files can be created
              with dnssec-trigger-control-setup (run as root).

       <b>check-updates:</b> &lt;yes or no&gt;
              Check for software updates, if there are, download them and present the user with  a  dialog  that
              allows   them  to  run  the installer to upgrade the software.  It checks a SHA256 checksum on the
              download, the checksum is signed with DNSSEC (from a TXT record).  On windows and osx the  default
              is yes.  On other systems the default is no (it'll download the source tarball if enabled).

       <b>url:</b> "<a href="http://example.com">http://example.com</a> OK"
              This  command adds an url to probe via HTTP (port 80). The first word, before the space is the url
              to resolve.  The remainder is the string that is expected as page contents (that may  be  prefixed
              or  suffixed  with whitespace).  The url is resolved, a HTTP 1.1 query is sent.  The reply must be
              type 2xx and contain the page contents.  If this is not true, dnssec-trigger knows that there is a
              'hot spot' of some sort interfering with traffic.  If you do  not  configure  any  urls,  then  no
              probes  are done.  If you configure multiple urls then it probes a random selection of 3 urls, all
              of their IP addresses in turn, with IP4 and IP6 simultaneously.  At most 5 of the DHCP DNS servers
              are used to resolve (in parallel).  If an answer is gotten  and  it  fails  the  probe  stop,  the
              probing continues if there is no connection or response 404.

       <b>tcp80:</b> &lt;ip&gt;
              Add  an IP4 or IP6 address to the list of fallback open DNSSEC resolvers that are used on TCP port
              80.  These relay traffic from port 80 to regular DNS.

       <b>tcp443:</b> &lt;ip&gt;
              Add an IP4 or IP6 address to the list of fallback open DNSSEC resolvers that are used on TCP  port
              443.  These relay traffic from port 443 to regular DNS.

       <b>tcp443:</b> &lt;ip&gt; or &lt;ip&gt; { &lt;hash&gt;}
              Add  an  IP4  of IP6 address to the list of fallback SSL open DNSSEC resolvers.  They serve plain-
              DNS(tcp-style) over port 443, encapsulated in SSL.  The SSL certificate online is checked with the
              fingerprint (if configured here).  You may configure multiple hashes (one space between),  if  one
              matches its OK, so that pre-publish rollover of the certificates is possible.

       <b>use-vpn-forwarders:</b> &lt;yes or no&gt;
              Use DNS servers from VPN for all hosts, default is no. Only domains configured for this connection
              are  forwarded  to  VPN resolvers. If set yes, all DNS queries are resolved on servers supplied by
              VPN.

       <b>use-private-addresses:</b> &lt;yes or no&gt;
              Forward reverse zones of RFC 1918 private addresses to global forwarders, default is yes.  If  set
              no, private addresses are resolved only on this host. Addresses not configured locally will return
              NXDOMAIN.

</pre><h4><b>THE</b> <b>DNSSEC-TRIGGER-PANEL</b></h4><pre>
       The  dnssec-trigger-panel  is  an  applet  that runs in the tray.  It shows the DNSSEC status.  It can be
       invoked with -d to test in the build directory.  The -c <u>cfgfile</u> option can set the config file away  from
       the  default.  The applet keeps an SSL connection to the daemon and displays the status, and can show the
       user dialogs.

       The applet has a small menu.  The menu item <b>Reprobe</b> causes the daemon to probe the  last  seen  DHCP  DNS
       servers  again,  which  may  now  work  after  a  hotspot signon.  The menu item <b>Hotspot</b> <b>Signon</b> goes into
       insecure mode for hotspots where this must be used to sign on to the hot spot: use reprobe when  done  to
       resume  dnssec protection efforts.  The <b>Probe</b> <b>Result</b> menu item shows the results of the previous probe to
       the user, for technical help with network difficulties.

</pre><h4><b>THE</b> <b>DNSSEC-TRIGGER-CONTROL</b> <b>TOOL</b></h4><pre>
       The dnssec-trigger-control tool can be used to test.  It is  also  used  inside  DHCP  scripts  (platform
       specific).  It can send commands to the daemon.

       Options:

       <b>-c</b> <u>cfgfile</u>
              Set the config file to use away from the default.

       <b>-s</b> <u>ip[@port]</u>
              Default connects to 127.0.0.1 with the port from config file, but this options overrides that with
              an IPv4 or IPv6 address and optional a port.

       <b>-v</b>     increase verbosity of dnssec-trigger-control.

       Commands:

       <b>submit</b> &lt;ips&gt;
              Submit a list of space separated IP addresses (from DHCP) that are the DNS servers that the daemon
              will probe.  IPv4 and IPv6 addresses can be used.

       <b>unsafe</b> Test  command  that  probes  some  127/8 addresses in a way that makes the daemon conclude that no
              DNSSEC works.  Presents user with 'Insecure?' dialog.

       <b>status</b> Shows the last probe results.

       <b>reprobe</b>
              Probe the last probe again.  It also cancels forced insecure state from  hotspot  signon,  causing
              probes for dnssec to resume.  This command acts as the menu item with the same name.

       <b>skip_http</b>
              Skip  the http probe step.  Setup DNSSEC, as possible, without taking the result of the http probe
              into account.  Once http works again, it'll stop skipping the http results.  Useful, if  you  want
              to have DNSSEC on a network where web access is not possible.

       <b>hotspot_signon</b>
              This  command  acts as the menu item with the same name.  Use it to force insecure mode, where you
              can then interact with (weird) hotspot set ups.  When you are done,  do  the  reprobe  command  to
              resume DNSSEC protection efforts.

       <b>results</b>
              continuous feed of probe results.

       <b>cmdtray</b>
              Continuous input feed, used by the tray icon to send commands to the daemon.

       <b>stoppanels</b>
              Makes connected tray icons quit.  Useful for installers that need to update their executable.

       <b>stop</b>   stops the daemon.

</pre><h4><b>THE</b> <b>DNSSEC-TRIGGER-CONTROL-SETUP</b> <b>TOOL</b></h4><pre>
       This  tool aids setup of files.  Without arguments it creates the key files.  If key files already exist,
       it resigns certificates with existing private keys.  With <b>-d</b> <u>dir</u>  the  files  are  placed  in  the  given
       directory.

       With  <b>-i</b>  the  tool changes configuration files.  It tests if unbound has <b>remote-control</b>: <b>control-enable:</b>
       <u>yes</u>  and  if  not  appends  lines  to   unbound.conf   that   enable   unbound-control,   and   it   runs
       unbound-control-setup  to generate the keys for unbound-control.  It tests if unbound has a trust anchor,
       if not it enables the root.key as <b>auto-trust-anchor-file</b> and runs  <u><a href="../man8/unbound-anchor.8.html">unbound-anchor</a></u>(8)  to  initialize  the
       key.   It  picks  up the domain and search from resolv.conf and configures the dnssec-trigger.conf to use
       that.

       Note the tool trusts the domain and search path at install time.   You  should  review  them  or  perform
       configuration manually.

       With <b>-u</b> it removes the options it enabled in <u><a href="../man5/unbound.conf.5.html">unbound.conf</a></u>(5).

</pre><h4><b>FILES</b></h4><pre>
       <u>/etc/dnssec-trigger/dnssec-trigger.conf</u>
              The default configuration file.

       <u>/etc/dnssec-trigger</u>
              Directory with keys used for SSL connections to dnssec-triggerd.

       <u>/run/dnssec-triggerd.pid</u>
              Default pidfile with the pid of the running dnssec-triggerd.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <u><a href="../man8/unbound.8.html">unbound</a></u>(8), <u><a href="../man8/unbound-control.8.html">unbound-control</a></u>(8), <u><a href="../man5/unbound.conf.5.html">unbound.conf</a></u>(5), <u><a href="../man5/resolv.conf.5.html">resolv.conf</a></u>(5).

</pre><h4><b>AUTHORS</b></h4><pre>
       This program was developed by Wouter Wijngaards at NLnet Labs.

NLnet Labs                                         2018-06-25                                  <u><a href="../man8/dnssec-trigger.8.html">dnssec-trigger</a></u>(8)
</pre>
 </div>
</div></section>
</div>
</body>
</html>