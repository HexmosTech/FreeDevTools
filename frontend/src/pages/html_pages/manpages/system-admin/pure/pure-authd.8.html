<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>pure-authd - External authentication agent for Pure-FTPd.</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/pure-ftpd-common">pure-ftpd-common_1.0.50-2.2build3_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       pure-authd - External authentication agent for Pure-FTPd.

</pre><h4><b>SYNTAX</b></h4><pre>
       pure-authd [<u>-p</u> &lt;<u>/path/to/pidfile</u>&gt;] [<u>-u</u> uid] [<u>-g</u> gid] [<u>-B</u>] &lt;<u>-s</u> /path/to/socket&gt; <u>-r</u> /program/to/run

</pre><h4><b>DESCRIPTION</b></h4><pre>
       pure-authd  is a daemon that forks an authentication program, waits for an authentication reply, and feed
       them to an application server.

       pure-authd listens to a local Unix socket. A new connection to that socket  should  feed  pure-authd  the
       following structure:

              account:xxx

              password:xxx

              localhost:xxx

              localport:xxx

              peer:xxx

              end

       (replace xxx with appropriate values) . localhost, localport and peer are numeric IP addresses and ports.
       peer is the IP address of the remote client.

       These arguments are passed to the authentication program, as environment variables:

              AUTHD_ACCOUNT

              AUTHD_PASSWORD

              AUTHD_LOCAL_IP

              AUTHD_LOCAL_PORT

              AUTHD_REMOTE_IP

              AUTHD_ENCRYPTED

       The  authentication  program  should  take  appropriate  actions to fetch account info according to these
       arguments, and reply to the standard output a structure like the following one:

              auth_ok:1

              uid:42

              gid:21

              dir:/home/j

              end

       <b>auth_ok:</b>xxx
              If xxx is 0, the user was not found (the next authentication method passed to  pure-ftpd  will  be
              tried)  .  If  xxx  is -1, the user was found, but there was a fatal authentication error: user is
              root, password is wrong, account has expired, etc (next authentication methods will not be  tried)
              . If xxx is 1, the user was found and successfully authenticated.

       <b>uid:</b>xxx
              The system uid to be assigned to that user. Must be &gt; 0.

       <b>gid:</b>xxx
              The primary system gid. Must be &gt; 0.

       <b>dir:</b>xxx
              The absolute path to the home directory. Can contain <a href="file:/./">/./</a> for a chroot jail.

       <b>slow_tilde_expansion:</b>xxx <u>(optional,</u> <u>default</u> <u>is</u> <u>1)</u>
              When the command 'cd ~user' is issued, it's handy to go to that user's home directory, as expected
              in  a  shell  environment.  But fetching account info can be an expensive operation for non-system
              accounts. If xxx is 0, 'cd ~user' will expand to the system user home directory. If xxx is 1,  'cd
              ~user'  won't  expand.  You should use 1 in most cases with external authentication, when your FTP
              users don't match system users. You can also set xxx to  1  if  you're  using  slow  nss_*  system
              authentication modules.

       <b>throttling_bandwidth_ul:</b>xxx <u>(optional)</u>
              The allocated bandwidth for uploads, in bytes per second.

       <b>throttling_bandwidth_dl:</b>xxx <u>(optional)</u>
              The allocated bandwidth for downloads, in bytes per second.

       <b>user_quota_size:</b>xxx <u>(optional)</u>
              The maximal total size for this account, in bytes.

       <b>user_quota_files:</b>xxx <u>(optional)</u>
              The maximal number of files for this account.

       <b>ratio_upload:</b>xxx <u>(optional)</u>

       <b>radio_download:</b>xxx <u>(optional)</u>
              The user must match a ratio_upload:ratio_download ratio.

       <u>Only</u> <u>one</u> <u>authentication</u> <u>program</u> <u>is</u> <u>forked</u> <u>at</u> <u>a</u> <u>time.</u> <u>It</u> <u>must</u> <u>return</u> <u>quickly.</u>

</pre><h4><b>OPTIONS</b></h4><pre>
       <b>-u</b> &lt;<u>uid</u>&gt;
              Have the daemon run with that uid.

       <b>-g</b> &lt;<u>gid</u>&gt;
              Have the daemon run with that gid.

       <b>-B</b>     Fork in background (daemonization).

       <b>-s</b> &lt;<u>/path/to/socket</u>&gt;
              Set the full path to the local Unix socket.

       <b>-r</b> &lt;<u>/path/to/program</u>&gt;
              Set the full path to the authentication program.

       <b>-h</b>     Output help information and exit.

</pre><h4><b>EXAMPLES</b></h4><pre>
       To run this program the standard way type:

       pure-authd -s /var/run/ftpd.sock -r /usr/bin/my-auth-program &amp;

       pure-ftpd -lextauth:/var/run/ftpd.sock &amp;

       /usr/bin/my-auth-program can be as simple as:
              #! <a href="file:/bin/sh">/bin/sh</a>

              echo 'auth_ok:1'

              echo 'uid:42'

              echo 'gid:21'

              echo 'dir:/home/j'

              echo 'end'

</pre><h4><b>AUTHORS</b></h4><pre>
       Frank DENIS &lt;j at pureftpd dot org&gt;

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man1/ftp.1.html">ftp</a>(1)</b>,  <b><a href="../man8/pure-ftpd.8.html">pure-ftpd</a>(8)</b> <b><a href="../man8/pure-ftpwho.8.html">pure-ftpwho</a>(8)</b> <b><a href="../man8/pure-mrtginfo.8.html">pure-mrtginfo</a>(8)</b> <b><a href="../man8/pure-uploadscript.8.html">pure-uploadscript</a>(8)</b> <b><a href="../man8/pure-statsdecode.8.html">pure-statsdecode</a>(8)</b> <b><a href="../man8/pure-pw.8.html">pure-pw</a>(8)</b>
       <b><a href="../man8/pure-quotacheck.8.html">pure-quotacheck</a>(8)</b> <b><a href="../man8/pure-authd.8.html">pure-authd</a>(8)</b> <b><a href="../man8/pure-certd.8.html">pure-certd</a>(8)</b>

       <b>RFC</b> <b>959</b>, <b>RFC</b> <b>2389</b>, <b>RFC</b> <b>2228</b> and <b>RFC</b> <b>2428</b>.

Frank Denis                                          1.0.50                                        <u><a href="../man8/pure-authd.8.html">pure-authd</a></u>(8)
</pre>
 </div>
</div></section>
</div>
</body>
</html>