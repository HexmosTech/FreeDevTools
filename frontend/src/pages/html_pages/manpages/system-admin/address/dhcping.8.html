<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>dhcping - send a DHCP request to DHCP server to see if it's up and running</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/dhcping">dhcping_1.2-6_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       <b>dhcping</b> - send a DHCP request to DHCP server to see if it's up and running

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>dhcping</b> [<b>-v</b>] [<b>-q</b>] [<b>-i</b>] [<b>-r</b>] <b>-t</b> <u>maxwait</u> <b>-c</b> <u>client-IP-address</u> <b>-s</b> <u>server-IP-address</u> <b>-h</b> <u>client-hardware-</u>
       <u>address</u> [<b>-g</b> <u>gateway-IP-address</u>]

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This command allows the system administrator to check if a remote DHCP server is still functioning.

       Options are:

       <b>-v</b>   Verbose, print some information.

       <b>-V</b>   Very verbose, print a lot of information.

       <b>-i</b>   Use DHCPINFORM packets.

       <b>-r</b>   Use DHCPREQUEST packets (default behaviour).

       <b>-q</b>   Quiet, print nothing on the screen.

       <b>-t</b> <u>maxwait</u>
            Maximum time to wait for an answer from the server in seconds.  Default is 3 seconds.

       <b>-c</b> <u>client-IP-address</u>
            Request this IP address. Note that this is also the IP address the answer will be sent to.

       <b>-s</b> <u>server-IP-address</u>
            Send the DHCP packet to this IP address.

       <b>-h</b> <u>client-hardware-address</u>
            Use  this  hardware-address  in the DHCP request. It can be up to sixteen octets separated by colons
            (i.e. 01:02:03:04)

       <b>-g</b> <u>gateway-IP-address</u>
            Use this IP address for the gateway IP address in the DHCP packet.  This option is currently broken.

</pre><h4><b>RETURN</b> <b>VALUES</b></h4><pre>
       If everything goes okay, it returns 0. If there went something wrong, it returns 1.

</pre><h4><b>SETUP</b></h4><pre>
       This program should be installed setuid root or ran by root only.  See SECURITY for more information.

       On your DHCP server, add these lines to the dhcpd.conf:

         host &lt;your monitoring host FQDN&gt; {
            hardware ethernet &lt;your monitor host mac address&gt;;
            fixed-address     &lt;your monitoring host IP address&gt;;
         }

       Then try it:

       $ dhcping -c <u>your</u> <u>monitoring</u> <u>host</u> <u>IP</u> <u>address</u> \
                 -s <u>your</u> <u>DHCP</u> <u>server</u> <u>IP</u> <u>address</u> \
                 -h <u>your</u> <u>monitor</u> <u>host</u> <u>mac</u> <u>address</u>

       It will either respond with "no answer" or "Got answer from: <u>your</u> <u>DHCP</u> <u>server</u> <u>IP</u> <u>address</u>"

       The DHCP server logfile will give:
        DHCPREQUEST for 192.168.1.1 from 00:20:18:56:29:8f via ed0
        DHCPACK on 192.168.1.1 to 00:20:18:56:29:8f via ed0
        DHCPRELEASE of 192.168.1.1 from 00:20:18:56:29:8f via ed0 (found)

       Running in DHCPINFORM mode with <b>-i</b>:

       If you see "DHCPINFORM from 192.168.1.1 via xl0: not authoritative for subnet  192.168.1.0",  you  should
       add the authoritative statement to the subnet, See <b><a href="../man5/dhcpd.conf.5.html">dhcpd.conf</a></b>(5) for details.

       When  running in very verbose mode, <b>dhcping</b> tries to dump all data of the send and received DHCP packets.
       It will first dump the packet in hex-format, then decodes the header and finally the options.

</pre><h4><b>HOW</b> <b>IT</b> <b>WORKS</b></h4><pre>
       The client either sends a DHCPREQUEST or DHCPINFORM packet to the server and waits for an  answer.  Then,
       if a DHCPREQUEST was send, it will send a DHCPRELEASE back to the server.

</pre><h4><b>SECURITY</b></h4><pre>
       This  program  is installed setuid root as it requires the privileges to bind itself to port 68 (bootpc).
       Root privileges are dropped as soon as the program has bound itself to that port.

</pre><h4><b>BUGS</b></h4><pre>
       Currently (this may, or may not, change in the future) the ISC DHCP daemon does not write leases  with  a
       fixed IP address in the dhcpd.leases file.

       DHCPINFORM packets can only be used on subnets the server is authoritative for.  If the monitoring script
       runs  on  a  subnet  the  server  isn't  authoritative for, it should use the DHCPREQUEST packets. I also
       experienced some problems with ISC DHCPD v2 servers, but that is also in the README of it.

       The <b>-V</b> option is still working,  but  shouldn't  be  used  for  debugging  of  the  packets.  Better  use
       <u><a href="../man8/dhcpdump.8.html">dhcpdump</a></u>(8)  for that, which is available on my website. I wanted to remove it, but decided only to do it
       from the documentation, not from the code. Maybe I'll need it one day for debugging.

</pre><h4><b>AUTHOR</b></h4><pre>
       Edwin Groothuis, <a href="mailto:edwin@mavetju.org">edwin@mavetju.org</a> (<a href="http://www.mavetju.org">http://www.mavetju.org</a>)

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man8/dhcpd.8.html">dhcpd</a></b>(8), <b><a href="../man8/dhclient.8.html">dhclient</a></b>(8), <b><a href="../man5/dhcpd.conf.5.html">dhcpd.conf</a></b>(5), <b><a href="../man8/dhcpdump.8.html">dhcpdump</a></b>(8)

3rd Berkeley Distribution                       January 27, 2002                                      <u><a href="../man8/dhcping.8.html">dhcping</a></u>(8)
</pre>
 </div>
</div></section>
</div>
</body>
</html>