<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>tcplay — tool to manage TrueCrypt volumes</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/tcplay">tcplay_3.3-1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       tcplay — tool to manage TrueCrypt volumes

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>tcplay</b>  <b>-c</b>  <b>-d</b>  <u>device</u>  [<b>-g</b>]  [<b>-z</b>]  [<b>-w</b>]  [<b>-a</b>  <u>pbkdf_hash</u>]  [<b>-b</b>  <u>cipher</u>] [<b>-f</b> <u>keyfile_hidden</u>] [<b>-k</b> <u>keyfile</u>]
              [<b>-x</b> <u>pbkdf_hash</u>] [<b>-y</b> <u>cipher</u>]
       <b>tcplay</b> <b>-i</b> <b>-d</b> <u>device</u> [<b>-e</b>] [<b>-p</b>] [<b>-f</b> <u>keyfile_hidden</u>] [<b>-k</b> <u>keyfile</u>] [<b>-s</b> <u>system_device</u>] [<b>--fde</b>]  [<b>--use-backup</b>]
              [<b>--use-hdr-file</b> <u>hdr_file</u>] [<b>--use-hidden-hdr-file</b> <u>hdr_file</u>]
       <b>tcplay</b> <b>-j</b> <u>mapping</u>
       <b>tcplay</b>  <b>-m</b>  <u>mapping</u>  <b>-d</b> <u>device</u> [<b>-e</b>] [<b>-p</b>] [<b>-f</b> <u>keyfile_hidden</u>] [<b>-k</b> <u>keyfile</u>] [<b>-s</b> <u>system_device</u>] [<b>-t</b>] [<b>--fde</b>]
              [<b>--use-backup</b>] [<b>--use-hdr-file</b> <u>hdr_file</u>] [<b>--use-hidden-hdr-file</b> <u>hdr_file</u>]
       <b>tcplay</b>  <b>--modify</b>  <b>-d</b>  <u>device</u>  [<b>-k</b>  <u>keyfile</u>]  [<b>--new-keyfile</b>  <u>new_keyfile</u>]  [<b>--new-pbkdf-prf</b>   <u>pbkdf_hash</u>]
              [<b>-s</b>        <u>system_device</u>]       [<b>--fde</b>]       [<b>--use-backup</b>]       [<b>--use-hdr-file</b>       <u>hdr_file</u>]
              [<b>--use-hidden-hdr-file</b> <u>hdr_file</u>] [<b>--save-hdr-backup</b> <u>hdr_file</u>] [<b>-w</b>]
       <b>tcplay</b> <b>--modify</b> <b>-d</b> <u>device</u> [<b>-k</b> <u>keyfile</u>] <b>--restore-from-backup-hdr</b> [<b>-w</b>]
       <b>tcplay</b> <b>-u</b> <u>mapping</u>
       <b>tcplay</b> <b>-h</b> | <b>-v</b>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The <b>tcplay</b> utility provides full support for creating and opening/mapping  TrueCrypt-compatible  volumes.
       It supports the following commands, each with a set of options detailed further below:

       <b>-c</b>, <b>--create</b>
               Create a new encrypted TrueCrypt volume on the device specified by <b>--device</b>.

       <b>-h,</b> <b>--help</b>
               Print help message and exit.

       <b>-i</b>, <b>--info</b>
               Print out information about the encrypted device specified by <b>--device</b>.

       <b>-j</b> <u>mapping</u>, <b>--info-mapped</b>=<u>mapping</u>
               Print  out  information about the mapped tcplay volume specified by <u>mapping</u>.  Information such as
               key CRC and the PBKDF2 PRF is not available via this command.

       <b>--modify</b>
               Modify the volume header.  This mode allows changing passphrase, keyfiles, PBKDF2 PRF as well  as
               restoring from a backup header.

       <b>-m</b> <u>mapping</u>, <b>--map</b>=<u>mapping</u>
               Map  the encrypted TrueCrypt volume on the device specified by <b>--device</b> as a <u><a href="../man4/dm.4.html">dm</a></u>(4) mapping called
               <u>mapping</u>.  The <u>mapping</u> argument should not contain any spaces or special characters.

       <b>-u</b> <u>mapping</u>, <b>--unmap</b>=<u>mapping</u>
               Removes (unmaps) the <u><a href="../man4/dm.4.html">dm</a></u>(4) mapping specified by <u>mapping</u> as well as any related cascade  mappings.
               If  you  mapped a volume using full disk encryption and created mapping for individual partitions
               using <u><a href="../man8/kpartx.8.html">kpartx</a></u>(8), you must remove these prior to unmapping the volume.

       <b>-v,</b> <b>--version</b>
               Print version message and exit.

       Options common to all commands are:

       <b>-d</b> <u>device</u>, <b>--device</b>=<u>device</u>
               Specifies the disk <u>device</u> on which the TrueCrypt volume  resides/will  reside.   This  option  is
               mandatory for all commands.

       <b>-f</b> <u>keyfile_hidden</u>, <b>--keyfile-hidden</b>=<u>keyfile_hidden</u>
               Specifies  a keyfile to use in addition to the passphrase when either creating a hidden volume or
               when protecting a hidden volume while mapping or querying the outer volume.  If you  only  intend
               to  map  a  hidden  volume, the <b>--keyfile</b> option has to be used.  This option can appear multiple
               times; if so, multiple keyfiles will be used.  This option is not valid in the <b>--modify</b> mode.

       <b>-k</b> <u>keyfile</u>, <b>--keyfile</b>=<u>keyfile</u>
               Specifies a <u>keyfile</u> to use in addition to the passphrase.  This option can appear multiple times;
               if so, multiple keyfiles will be used.

       Additional options for the <b>--create</b> command are:

       <b>-a</b> <u>pbkdf_hash</u>, <b>--pbkdf-prf</b>=<u>pbkdf_hash</u>
               Specifies which hash algorithm  to  use  for  the  PBKDF2  password  derivation.   To  see  which
               algorithms are supported, specify <b>--pbkdf-prf</b>=<b>help</b>.

       <b>-b</b> <u>cipher</u>, <b>--cipher</b>=<u>cipher</u>
               Specifies  which cipher algorithm or cascade of ciphers to use to encrypt the new volume.  To see
               which algorithms are supported, specify <b>--cipher</b>=<b>help</b>.

       <b>-g,</b> <b>--hidden</b>
               Specifies that the newly created volume will contain a hidden volume.  The  keyfiles  applied  to
               the  passphrase  for the hidden volume are those specified by <b>--keyfile-hidden</b>.  The user will be
               prompted for the size of the hidden volume interactively.

       <b>-w,</b> <b>--weak-keys</b>
               Use <u><a href="../man4/urandom.4.html">urandom</a></u>(4) for key material instead of a strong entropy source.  This is in general a  really
               bad idea and should only be used for testing.

       <b>-x</b> <u>pbkdf_hash</u>, <b>--pbkdf-prf-hidden</b>=<u>pbkdf_hash</u>
               Specifies  which  hash algorithm to use for the PBKDF2 password derivation for the hidden volume.
               Only valid in conjunction with <b>--hidden</b>.  If no algorithm is specified, the same as for the outer
               volume will be used.  To see which algorithms are supported, specify <b>--pbkdf-prf-hidden</b>=<b>help</b>.

       <b>-y</b> <u>cipher</u>, <b>--cipher-hidden</b>=<u>cipher</u>
               Specifies which cipher algorithm or cascade of ciphers to use to encrypt the hidden volume on the
               new TrueCrypt volume.  Only valid in conjunction with <b>--hidden</b>.  If no cipher is  specified,  the
               same  as  for  the  outer  volume  will  be used.  To see which algorithms are supported, specify
               <b>--cipher-hidden</b>=<b>help</b>.

       <b>-z,</b> <b>--insecure-erase</b>
               Skips the secure erase of the disk.  Use this option carefully as it is a security risk!

       Additional options for the <b>--info</b>, <b>--map</b> and <b>--modify</b> commands are:

       <b>-e,</b> <b>--protect-hidden</b>
               Specifies that an outer volume will be queried or mapped, but its reported size will be  adjusted
               accordingly  to  the size of the hidden volume contained in it.  Both the hidden volume and outer
               volume passphrase and keyfiles will be required.  This option only  applies  to  the  <b>--info</b>  and
               <b>--map</b> commands.

       <b>-p,</b> <b>--prompt-passphrase</b>
               This  option causes <b>tcplay</b> to prompt for a passphrase immediately, even if a keyfile is provided.
               Normally, if a keyfile is supplied, <b>tcplay</b> will first attempt to unlock the volume using only the
               keyfile, and only prompt for a passphrase if that first unlocking attempt fails.  However,  since
               a  failed  unlocking  attempt  can  take a non-trivial amount of time, specifying this option can
               reduce the total unlocking time if both a keyfile and passphrase are required.  This option  only
               makes sense if <b>-k</b> or <b>-f</b> are used.

       <b>-s</b> <u>system_device</u>, <b>--system-encryption</b>=<u>system_device</u>
               This option is required if you are attempting to access a device that uses system encryption, for
               example  an  encrypted  Windows  system  partition.   It  does not apply to disks using full disk
               encryption.  The <b>--device</b> option  will  point  at  the  actual  encrypted  partition,  while  the
               <u>system_device</u>  argument  will  point  to the parent device (i.e. underlying physical disk) of the
               encrypted partition.

       <b>--fde</b>   This option is intended to be used with disks using full disk encryption (FDE).  When a disk  has
               been  encrypted  using  TrueCrypt's  FDE,  the complete disk is encrypted except for the first 63
               sectors.  The <b>--device</b> option should point to the  whole  disk  device,  not  to  any  particular
               partition.   The  resultant  mapping  will  cover the whole disk, and will not appear as separate
               partitions.  To access individual partitions after mapping, <u><a href="../man8/kpartx.8.html">kpartx</a></u>(8) can be used.

       <b>--use-backup</b>
               This option is intended to be used when the primary headers of  a  volume  have  been  corrupted.
               This  option  will  force  <b>tcplay</b>  to use the backup headers, which are located at the end of the
               device, to access the volume.

       Additional options only for the <b>--map</b> command are:

       <b>-t</b>, <b>--allow-trim</b>
               This option enables TRIM (discard) support on the mapped volume.

       Additional options only for the <b>--modify</b> command are:

       <b>--new-pbkdf-prf</b>=<u>pbkdf_hash</u>
               Specifies which hash algorithm to use for the PBKDF2  password  derivation  on  reencrypting  the
               volume header.  If this option is not specified, the reencrypted header will use the current PRF.
               To see which algorithms are supported, specify <b>--pbkdf-prf</b>=<b>help</b>.

       <b>--new-keyfile</b>=<u>keyfile</u>
               Specifies  a  <u>keyfile</u> to use in addition to the new passphrase on reencrypting the volume header.
               This option can appear multiple times; if so, multiple keyfiles will be used.

       <b>--restore-from-backup-hdr</b>
               If this option is specified, neither <b>--new-pbkdf-prf</b> nor <b>--new-keyfile</b> should be specified.  This
               option implies <b>--use-backup</b>.  Use this option to restore  the  volume  headers  from  the  backup
               header.

       Sending  a  SIGINFO or SIGUSR1 signal to a running <b>tcplay</b> process makes it print progress on slower tasks
       such as gathering entropy or wiping the volume.

</pre><h4><b>NOTES</b></h4><pre>
       TrueCrypt limits passphrases to  64  characters  (including  the  terminating  null  character).   To  be
       compatible  with  it,  <b>tcplay</b>  does  the  same.   All  passphrases (excluding keyfiles) are trimmed to 64
       characters.  Similarly, keyfiles are limited to a size of 1 MB, but up to 256 keyfiles can be used.

</pre><h4><b>PLAUSIBLE</b> <b>DENIABILITY</b></h4><pre>
       <b>tcplay</b> offers plausible deniability. Hidden volumes are created within an outer volume.  Which volume  is
       accessed  solely  depends  on the passphrase and keyfile(s) used.  If the passphrase and keyfiles for the
       outer volume are specified, no information about the existence of the hidden volume is exposed.   Without
       knowledge  of  the  passphrase  and keyfile(s) of the hidden volume its existence remains unexposed.  The
       hidden volume can be protected when mapping the outer volume by using  the  <b>--protect-hidden</b>  option  and
       specifying the passphrase and keyfiles for both the outer and hidden volumes.

</pre><h4><b>VERACRYPT</b> <b>SUPPORT</b></h4><pre>
       <b>tcplay</b>  offers  both  legacy  TrueCrypt  as  well  as VeraCrypt support.  When creating a new volume, the
       selected PBKDF2 PRF determines whether the volume will  use  the  TrueCrypt  or  VeraCrypt  format.   The
       formats  are  identical  other  than  the  rounds  of  the key derivation functions as well as the volume
       signature and minver fields in the header.  Converting volumes from one format or another using <b>tcplay</b> is
       simply a matter of using the <b>--modify</b> option specifying a PBKDF2 PRF hash matching  the  intended  target
       format with the <b>--new-pbkdf-prf</b> argument.

       PBKDF2  PRFs  suffixed  with  -VC  are  VeraCrypt  PRFs, whilst all others are legacy TrueCrypt PRFs.  By
       default, new volumes are created with a VeraCrypt PRF to offer better security.

       NOTE: Failed unlocking attempts even for legacy TrueCrypt volumes  now  take  significantly  longer  than
       before,  as  <b>tcplay</b>  will cycle through all PRFs, including the VeraCrypt PRFs with much higher number of
       PRF iterations.  Successful attempts should still take the same amount of time as before, as  the  legacy
       PRF  settings  are tried first.  One notable exception is if both a keyfile and a passphrase is required.
       Normally, <b>tcplay</b> would first attempt an unlock attempt with just the  keyfile,  and  only  prompt  for  a
       passphrase  after  that attempt failed.  If it is known in advance that both a keyfile and passphrase are
       required to unlock a volume, the <b>-p</b> option to <b>--info</b> and <b>--map</b> can more than halve the time  required  to
       unlock the volume.

</pre><h4><b>EXAMPLES</b></h4><pre>
       Create  a  new TrueCrypt volume on <u>/dev/vn0</u> using the cipher cascade of AES and Twofish and the Whirlpool
       hash algorithm for PBKDF2 password derivation and two keyfiles, <u>one.key</u> and <u>two.key</u>:

             <b>tcplay</b> <b>--create</b> <b>--device</b>=<b>/dev/vn0</b> <b>--cipher</b>=<b>TWOFISH-256-XTS,AES-256-XTS</b> <b>--pbkdf-prf</b>=<b>whirlpool</b>
             <b>--keyfile</b>=<b>one.key</b> <b>--keyfile</b>=<b>two.key</b>

       Map the outer volume on the TrueCrypt volume on <u>/dev/vn0</u> as <b>truecrypt1</b>, but protect  the  hidden  volume,
       using the keyfile <u>hidden.key</u>, from being overwritten:

             <b>tcplay</b> <b>--map</b>=<b>truecrypt1</b> <b>--device</b>=<b>/dev/vn0</b> <b>--protect-hidden</b> <b>--keyfile-hidden</b>=<b>hidden.key</b>

       Map the hidden volume on the TrueCrypt volume on <u>/dev/vn0</u> as <b>truecrypt2</b>, using the keyfile <u>hidden.key</u>:

             <b>tcplay</b> <b>--map</b>=<b>truecrypt2</b> <b>--device</b>=<b>/dev/vn0</b> <b>--keyfile</b>=<b>hidden.key</b>

       Map and mount the volume in the file <u>secvol</u> on Linux:

             <b>losetup</b> <b>/dev/loop1</b> <b>secvol</b>

             <b>tcplay</b> <b>--map</b>=<b>secv</b> <b>--device</b>=<b>/dev/loop1</b>

             <b>mount</b> <b>/dev/mapper/secv</b> <b><a href="file:/mnt">/mnt</a></b>

       Similarly on DragonFly:

             <b>vnconfig</b> <b>vn1</b> <b>secvol</b>

             <b>tcplay</b> <b>--map</b>=<b>secv</b> <b>--device</b>=<b>/dev/vn1</b>

             <b>mount</b> <b>/dev/mapper/secv</b> <b><a href="file:/mnt">/mnt</a></b>

       Unmapping the volume <b>truecrypt2</b> on both Linux and DragonFly after unmounting:

             <b>dmsetup</b> <b>remove</b> <b>truecrypt2</b>

       Or alternatively:

             <b>tcplay</b> <b>--unmap</b>=<b>truecrypt2</b>

       A  hidden  volume whose existence can be plausibly denied and its outer volume can for example be created
       with

             <b>tcplay</b> <b>--create</b> <b>--hidden</b> <b>--device</b>=<b>/dev/loop0</b> <b>--cipher</b>=<b>TWOFISH-256-XTS,AES-256-XTS</b>
             <b>--pbkdf-prf</b>=<b>whirlpool</b> <b>--keyfile</b>=<b>one.key</b> <b>--cipher-hidden</b>=<b>AES-256-XTS</b> <b>--pbkdf-prf-hidden</b>=<b>whirlpool</b>
             <b>--keyfile-hidden</b>=<b>hidden.key</b>

       <b>tcplay</b> will prompt the user for the passphrase for both the outer and hidden volume as well as  the  size
       of  the hidden volume inside the outer volume.  The hidden volume will be created inside the area spanned
       by the outer volume.  The hidden volume can optionally  use  a  different  cipher  and  prf  function  as
       specified  by the <b>--cipher-hidden</b> and <b>--pbkdf-prf-hidden</b> options.  Which volume is later accessed depends
       only on which passphrase and keyfile(s) are being used, so  that  the  existence  of  the  hidden  volume
       remains  unknown  without  knowledge of the passphrase and keyfile it is protected by since it is located
       within the outer volume.  To map the outer volume without potentially damaging  the  hidden  volume,  the
       passphrase  and keyfile(s) of the hidden volume must be known and provided alongside the <b>--protect-hidden</b>
       option.

       A disk encrypted using full disk encryption can be mapped using

             <b>tcplay</b> <b>--map</b>=<b>tcplay_sdb</b> <b>--device</b>=<b>/dev/sdb</b> <b>--fde</b>

       To access individual partitions on the now mapped disk, the following command will generate mappings  for
       each individual partition on the encrypted disk:

             <b>kpartx</b> <b>--av</b> <b>/dev/mapper/tcplay_sdb</b>

       To restore the main volume header from the backup header, the following command can be used:

             <b>tcplay</b> <b>--modify</b> <b>--device</b>=<b>/dev/sdb</b> <b>--restore-from-backup-hdr</b>

       As  with  most  other  commands,  which  header  is  saved (used as source) depends on the passphrase and
       keyfiles used.

       To save a backup copy of a header, the following command can be used:

             <b>tcplay</b> <b>--modify</b> <b>--device</b>=<b>/dev/sdb</b> <b>--save-hdr-backup</b>=<b>/tmp/sdb_backup_header.hdr</b>

       As with most other commands, which header is saved  (used  as  source)  depends  on  the  passphrase  and
       keyfiles used.

       To restore a header from a backup header file, the following command can be used:

             <b>tcplay</b> <b>--modify</b> <b>-use-hdr-file</b>=<b>/tmp/sdb_backup_header.hdr</b>

       Similarly, to restore a hidden header from a backup header file:

             <b>tcplay</b> <b>--modify</b> <b>-use-hidden-hdr-file</b>=<b>/tmp/sdb_backup_hidden_header.hdr</b>

       Which  header  is  used  as  the source of the operation will still depend on the passphrase and keyfiles
       used.  Even if you use the <b>--use-hidden-hdr-file</b> option, if you specify the passphrase and  keyfiles  for
       the main header, the main header will be used instead.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <u><a href="../man5/crypttab.5.html">crypttab</a></u>(5), <u><a href="../man8/cryptsetup.8.html">cryptsetup</a></u>(8), <u><a href="../man8/dmsetup.8.html">dmsetup</a></u>(8), <u><a href="../man8/kpartx.8.html">kpartx</a></u>(8)

</pre><h4><b>HISTORY</b></h4><pre>
       The <b>tcplay</b> utility appeared in DragonFly 2.11.

</pre><h4><b>AUTHORS</b></h4><pre>
       Alex Hornung

Debian                                          December 8, 2013                                       <u><a href="../man8/TCPLAY.8.html">TCPLAY</a></u>(8)
</pre>
 </div>
</div></section>
</div>
</body>
</html>