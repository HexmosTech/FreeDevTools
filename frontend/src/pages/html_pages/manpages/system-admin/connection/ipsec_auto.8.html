<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ipsec_auto - control automatically-keyed IPsec connections</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/libreswan">libreswan_4.14-1ubuntu2_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       ipsec_auto - control automatically-keyed IPsec connections

</pre><h4><b>SYNOPSIS</b></h4><pre>

       <b>ipsec</b> <u>auto</u> [--showonly] [--asynchronous]
             [--config <u>configfile</u>] [--verbose] <u>operation</u> <u>connection</u>

       <b>ipsec</b> <u>auto</u> [--showonly] [--asynchronous]
             [--config <u>configfile</u>] [--verbose] <u>operation</u> <u>connection</u>

</pre><h4><b>EXAMPLES</b></h4><pre>

       <b>ipsec</b> <u>auto</u> { --add | --delete | --replace | --start } <u>connection</u>

       <b>ipsec</b> <u>auto</u> { --up | --down } <u>connection</u>

       <b>ipsec</b> <u>auto</u> { --route | --unroute | --ondemand } <u>connection</u>

       <b>ipsec</b> <u>auto</u> { --status | --ready }

       <b>ipsec</b> <u>auto</u> [--utc] [--listall | --rereadall] [--rereadsecrets] [--listcerts] [--listpubkeys]
             [--checkpubkeys] [--listcacerts] [--fetchcrls] [--listcrls] [--purgeocsp]

       <b>ipsec</b> <u>auto</u> [--utc] [--rereadcerts] <u>connection</u>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <u>Auto</u> manipulates automatically-keyed Libreswan IPsec connections, setting them up and shutting them down
       based on the information in the IPsec configuration file. In the normal usage, <u>connection</u> is the name of
       a connection specification in the configuration file; <u>operation</u> is <b>--add</b>, <b>--delete</b>, <b>--replace</b>, <b>--start</b>,
       <b>--up</b>, <b>--down</b>, <b>--route</b>, <b>--unroute</b>, <b>--ondemand</b>, The <b>--ready</b>, <b>--rereadsecrets</b>, and <b>--status</b> <u>operations</u> do
       not take a connection name.  <u>Auto</u> generates suitable commands and feeds them to a shell for execution.

       The <b>--add</b> operation adds a connection specification to the internal database within <u>pluto</u>; it will fail
       if <u>pluto</u> already has a specification by that name. The <b>--delete</b> operation deletes a connection
       specification from <u>pluto</u>'s internal database (also tearing down any connections based on it); The
       <b>--replace</b> operation is equivalent to <b>--delete</b> (if there is already a loaded connection by the given name)
       followed by <b>--add</b>, and is a convenience for updating <u>pluto</u>'s internal specification to match an external
       one. (Note that a <b>--rereadsecrets</b> may also be needed.) The <b>--start</b> operation is equivalent to running
       first with <b>--add</b> and then with <b>--up</b>, causing same effect as connection configuration option <b>auto=start</b>.

       The <b>--up</b> operation asks <u>pluto</u> to establish a connection based on an entry in its internal database. The
       <b>--down</b> operation tells <u>pluto</u> to tear down such a connection.

       Normally, <u>pluto</u> establishes a route to the destination specified for a connection as part of the <b>--up</b>
       operation. However, the route can be established with the <b>--route</b> operation. Until and unless an actual
       connection is established, this discards any packets sent there, which may be preferable to having them
       sent elsewhere based on a more general route (e.g., a default route).

       Normally, <u>pluto</u>'s route to a destination remains in place when a <b>--down</b> operation is used to take the
       connection down (or if connection setup, or later automatic rekeying, fails). This permits establishing a
       new connection (perhaps using a different specification; the route is altered as necessary) without
       having a “window” in which packets might go elsewhere based on a more general route. Such a route can be
       removed using the <b>--unroute</b> operation (and is implicitly removed by <b>--delete</b>).

       The <b>--ondemand</b> operation is equivalent to running first with <b>--add</b> and then with <b>--route</b>, causing same
       effect as connection configuration option <b>auto=ondemand</b>.

       The <b>--ready</b> operation tells <u>pluto</u> to listen for connection-setup requests from other hosts. Doing an <b>--up</b>
       operation before doing <b>--ready</b> on both ends is futile and will not work, although this is now automated
       as part of IPsec startup and should not normally be an issue.

       The <b>--status</b> operation asks <u>pluto</u> for current connection status. The output format is ad-hoc and likely
       to change.

       The <b>--rereadsecrets</b> operation tells <u>pluto</u> to re-read the /etc/ipsec.secrets secret-keys file, which it
       normally reads only at startup time. (This is currently a synonym for <b>--ready</b>, but that may change.)

       The <b>--fetchcrls</b> operation reads all certificate revocation list (CRL) entries of loaded certificates and
       tries to fetch updates for these from the CRL servers.

       The <b>--rereadall</b> operation is equivalent to the execution of --rereadsecrets (in the past there were other
       kinds of reread operations)

       The <b>--listpubkeys</b> operation lists all RSA public keys either received from peers via the IKE protocol
       embedded in authenticated certificate payloads or loaded locally using the rightcert / leftcert or
       rightr- sasigkey / leftrsasigkey parameters in <a href="../man5/ipsec.conf.5.html">ipsec.conf</a>(5).

       The <b>--listcerts</b> operation lists all X.509 certificates loaded locally using the rightcert and leftcert
       parameters in <a href="../man5/ipsec.conf.5.html">ipsec.conf</a>(5). To see all certificates in the NSS database, use <b>certutil</b> <b>-d</b>
       <b>/var/lib/ipsec/nss</b> <b>-L</b>.

       The <b>--checkpubkeys</b> operation lists all loaded X.509 certificates that are about to expire or have
       expired.

       The <b>--listcacerts</b> operation lists all X.509 CA certificates contained in the NSS database.

       The <b>--listcrls</b> operation lists all Certificate Revocation Lists (CRLs) either loaded locally from the
       /etc/ipsec.d/crls directory or fetched dynamically from an HTTP or LDAP server.

       The <b>--listall</b> operation is equivalent to the execution of --listpubkeys, --listcerts, --listcacerts,
       --listcrls.

       The <b>--purgeocsp</b> operation displays --listall and purges the NSS OCSP cache.

       The <b>--showonly</b> option causes <u>auto</u> to show the commands it would run, on standard output, and not run
       them.

       The <b>--asynchronous</b> option, applicable only to the <b>up</b> operation, tells <u>pluto</u> to attempt to establish the
       connection, but does not delay to report results. This is especially useful to start multiple connections
       in parallel when network links are slow.

       The <b>--verbose</b> option instructs <u>auto</u> to pass through all output from <b><a href="../man8/ipsec_whack.8.html">ipsec_whack</a></b>(8), including log output
       that is normally filtered out as uninteresting.

       The <b>--config</b> option specifies a non-standard location for the IPsec configuration file (default
       /etc/ipsec.conf).

       See <b><a href="../man5/ipsec.conf.5.html">ipsec.conf</a></b>(5) for details of the configuration file.

</pre><h4><b>FILES</b></h4><pre>
           /etc/ipsec.conf               default IPSEC configuration file
           /var/lib/ipsec/nss            X.509 and Opportunistic Encryption files
           /var/run/pluto/pluto.ctl Pluto command socket

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man5/ipsec.conf.5.html">ipsec.conf</a></b>(5), <b><a href="../man8/ipsec.8.html">ipsec</a></b>(8), <b><a href="../man8/ipsec_pluto.8.html">ipsec_pluto</a></b>(8), <b><a href="../man8/ipsec_whack.8.html">ipsec_whack</a></b>(8)

</pre><h4><b>HISTORY</b></h4><pre>
       Originally written for the FreeS/WAN project &lt;<b>https://www.freeswan.org</b>&gt; by Henry Spencer.

</pre><h4><b>BUGS</b></h4><pre>
       Although an <b>--up</b> operation does connection setup on both ends, <b>--down</b> tears only one end of the
       connection down (although the orphaned end will eventually time out).

       There is no support for <b>passthrough</b> connections.

       A connection description that uses <b>%defaultroute</b> for one of its <b>nexthop</b> parameters but not the other may
       be falsely rejected as erroneous in some circumstances.

       The exit status of <b>--showonly</b> does not always reflect errors discovered during processing of the request.
       (This is fine for human inspection, but not so good for use in scripts.)

</pre><h4><b>AUTHOR</b></h4><pre>
       <b>Paul</b> <b>Wouters</b>
           placeholder to suppress warning

libreswan                                          03/31/2024                                      <u><a href="../man8/IPSEC_AUTO.8.html">IPSEC_AUTO</a></u>(8)
</pre>
 </div>
</div></section>
</div>
</body>
</html>