<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>tcpaccept.bt - Trace TCP passive connections (accept()). Uses bpftrace/eBPF</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/bpftrace">bpftrace_0.23.2-1ubuntu1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       tcpaccept.bt - Trace TCP passive connections (accept()). Uses bpftrace/eBPF

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>tcpaccept.bt</b>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This tool traces passive TCP connections (eg, via an accept() syscall; connect() are active connections).
       This can be useful for general troubleshooting to see what new connections the local server is accepting.

       This  uses  dynamic  tracing  of the kernel inet_csk_accept() socket function (from tcp_prot.accept), and
       will need to be modified to match kernel changes.

       This tool only traces successful TCP accept()s. Connection attempts to closed ports  will  not  be  shown
       (those can be traced via other functions).

       Since this uses BPF, only the root user can use this tool.

</pre><h4><b>REQUIREMENTS</b></h4><pre>
       CONFIG_BPF and bpftrace.

</pre><h4><b>EXAMPLES</b></h4><pre>
       Trace all passive TCP connections (accept()s):
              # <b>tcpaccept.bt</b>

       <b>FIELDS</b>

       TIME(s)
              Time of the call, in HH:MM:SS format.

       PID    Process ID

       COMM   Process name

       RADDR  Remote IP address.

       RPORT  Remote port.

       LADDR  Local IP address.

       LPORT  Local port

       BL     Current accept backlog vs maximum backlog

</pre><h4><b>OVERHEAD</b></h4><pre>
       This  traces  the  kernel  inet_csk_accept  function  and prints output for each event.  The rate of this
       depends on your server application. If it is a web or proxy server accepting many tens  of  thousands  of
       connections  per  second,  then the overhead of this tool may be measurable (although, still a lot better
       than tracing every packet). If it is less than a thousand a second, then the overhead is expected  to  be
       negligible. Test and understand this overhead before use.

</pre><h4><b>SOURCE</b></h4><pre>
       This is from bpftrace

              https://github.com/bpftrace/bpftrace

       Also  look  in  the  bpftrace  distribution  for a companion _examples.txt file containing example usage,
       output, and commentary for this tool.

       This is a bpftrace version of the bcc tool of the same name. The bcc tool may provide  more  options  and
       customizations.

              https://github.com/iovisor/bcc

</pre><h4><b>OS</b></h4><pre>
       Linux

</pre><h4><b>STABILITY</b></h4><pre>
       Unstable - in development.

</pre><h4><b>AUTHOR</b></h4><pre>
       Brendan Gregg, adapted for bpftrace by Dale Hamel

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <a href="../man8/tcpconnect.bt.8.html">tcpconnect.bt</a>(8), <a href="../man8/funccount.8.html">funccount</a>(8), <a href="../man8/tcpdump.8.html">tcpdump</a>(8)

USER COMMANDS                                      2018-10-24                                    <u><a href="../man8/tcpaccept.bt.8.html">tcpaccept.bt</a></u>(8)
</pre>
 </div>
</div></section>
</div>
</body>
</html>