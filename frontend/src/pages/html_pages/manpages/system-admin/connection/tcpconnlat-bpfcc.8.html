<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>tcpconnlat - Trace TCP active connection latency. Uses Linux eBPF/bcc.</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/bpfcc-tools">bpfcc-tools_0.31.0+ds-7ubuntu2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       tcpconnlat - Trace TCP active connection latency. Uses Linux eBPF/bcc.

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>tcpconnlat</b> <b>[-h]</b> <b>[-t]</b> <b>[-p</b> <b>PID]</b> <b>[-L]</b> <b>[-4</b> <b>|</b> <b>-6]</b> <b>[-v]</b> <b>[min_ms]</b>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This  tool  traces active TCP connections (eg, via a connect() syscall), and shows the latency (time) for
       the connection as measured locally: the time from SYN sent to the response  packet.   This  is  a  useful
       performance  metric  that  typically  spans kernel TCP/IP processing and the network round trip time (not
       application runtime).

       All connection attempts are traced, even if they ultimately fail (RST packet in response).

       This tool works by use of kernel dynamic tracing of TCP/IP functions, and will need updating to match any
       changes to these functions. This tool should be updated in the future to  use  static  tracepoints,  once
       they are available.

       Since this uses BPF, only the root user can use this tool.

</pre><h4><b>REQUIREMENTS</b></h4><pre>
       CONFIG_BPF and bcc.

</pre><h4><b>OPTIONS</b></h4><pre>
       -h     Print usage message.

       -t     Include a timestamp column.

       -p PID Trace this process ID only (filtered in-kernel).

       -L     Include a LPORT column.

       -4     Trace IPv4 family only.

       -6     Trace IPv6 family only.

       -v     Print the resulting BPF program, for debugging purposes.

       min_ms Minimum duration to trace, in milliseconds.

</pre><h4><b>EXAMPLES</b></h4><pre>
       Trace all active TCP connections, and show connection latency (SYN-&gt;response round trip):
              # <b>tcpconnlat</b>

       Include timestamps:
              # <b>tcpconnlat</b> <b>-t</b>

       Trace PID 181 only:
              # <b>tcpconnlat</b> <b>-p</b> <b>181</b>

       Trace connects, and include LPORT:
              # <b>tcpconnlat</b> <b>-L</b>

       Trace IPv4 family only:
              # <b>tcpconnlat</b> <b>-4</b>

       Trace IPv6 family only:
              # <b>tcpconnlat</b> <b>-6</b>

       Trace connects with latency longer than 10 ms:
              # <b>tcpconnlat</b> <b>10</b>

       Print the BPF program:
              # <b>tcpconnlat</b> <b>-v</b>

</pre><h4><b>FIELDS</b></h4><pre>
       TIME(s)
              Time of the response packet, in seconds.

       PID    Process ID that initiated the connection.

       COMM   Process name that initiated the connection.

       IP     IP address family (4 or 6).

       SADDR  Source IP address.

       DADDR  Destination IP address.

       LPORT  Source port

       DPORT  Destination port

       <a href="../manms/LAT.ms.html">LAT</a>(ms)
              The  time  from  when  a TCP connect was issued (measured in-kernel) to when a response packet was
              received for this connection (can be SYN,ACK, or RST, etc).  This  time  spans  kernel  to  kernel
              latency,  involving kernel TCP/IP processing and the network round trip in between. This typically
              does not include time spent by the application processing the new connection.

</pre><h4><b>OVERHEAD</b></h4><pre>
       This traces the kernel tcp_v[46]_connect functions and prints output for each event. As the rate of  this
       is  generally  expected to be low (&lt; 1000/s), the overhead is also expected to be negligible. If you have
       an application that is calling a high rate of  connects()s,  such  as  a  proxy  server,  then  test  and
       understand this overhead before use.

</pre><h4><b>SOURCE</b></h4><pre>
       This is from bcc.

              https://github.com/iovisor/bcc

       Also  look  in  the bcc distribution for a companion _examples.txt file containing example usage, output,
       and commentary for this tool.

</pre><h4><b>OS</b></h4><pre>
       Linux

</pre><h4><b>STABILITY</b></h4><pre>
       Unstable - in development.

</pre><h4><b>AUTHOR</b></h4><pre>
       Brendan Gregg

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <a href="../man8/tcpconnect.8.html">tcpconnect</a>(8), <a href="../man8/tcpaccept.8.html">tcpaccept</a>(8), <a href="../man8/funccount.8.html">funccount</a>(8), <a href="../man8/tcpdump.8.html">tcpdump</a>(8)

USER COMMANDS                                      2016-02-19                                      <u><a href="../man8/tcpconnlat.8.html">tcpconnlat</a></u>(8)
</pre>
 </div>
</div></section>
</div>
</body>
</html>