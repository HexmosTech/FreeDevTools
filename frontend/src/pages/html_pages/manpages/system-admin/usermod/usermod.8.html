<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>usermod - modify a user account</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/passwd">passwd_4.17.4-2ubuntu1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       usermod - modify a user account

</pre><h4><b>SYNOPSIS</b></h4><pre>

       <b>usermod</b> [<u>options</u>] <u>LOGIN</u>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The <b>usermod</b> command modifies the system account files.

</pre><h4><b>OPTIONS</b></h4><pre>
       The options which apply to the <b>usermod</b> command are:

       <b>-a</b>, <b>--append</b>
           Add the user to the supplementary group(s). Use only with the <b>-G</b> option.

       <b>-b</b>, <b>--badname</b>
           Allow names that do not conform to standards.

       <b>-c</b>, <b>--comment</b> <u>COMMENT</u>
           update the comment field of the user in <a href="file:/etc/passwd">/etc/passwd</a>, which is normally modified using the <b><a href="../man1/chfn.1.html">chfn</a></b>(1)
           utility.

       <b>-d</b>, <b>--home</b> <u>HOME_DIR</u>
           The user's new login directory.

           If the <b>-m</b> option is given, the contents of the current home directory will be moved to the new home
           directory, which is created if it does not already exist. If the current home directory does not
           exist the new home directory will not be created.

       <b>-e</b>, <b>--expiredate</b> <u>EXPIRE_DATE</u>
           The date on which the user account will be disabled. The date is specified in the format <u>YYYY-MM-DD</u>.
           Integers as input are interpreted as days after 1970-01-01.

           An input of -1 or an empty string will blank the account expiration field in the shadow password
           file. The account will remain available with no date limit.

           This option requires a <a href="file:/etc/shadow">/etc/shadow</a> file. A <a href="file:/etc/shadow">/etc/shadow</a> entry will be created if there were none.

       <b>-f</b>, <b>--inactive</b> <u>INACTIVE</u>
           defines the number of days after the password exceeded its maximum age during which the user may
           still login by immediately replacing the password. This grace period before the account becomes
           inactive is stored in the shadow password file. An input of 0 will disable an expired password with
           no delay. An input of -1 will blank the respective field in the shadow password file. See <b><a href="../man5/shadow.5.html">shadow</a></b>(5)
           for more information.

           This option requires a <a href="file:/etc/shadow">/etc/shadow</a> file. A <a href="file:/etc/shadow">/etc/shadow</a> entry will be created if there were none.

       <b>-g</b>, <b>--gid</b> <u>GROUP</u>
           The name or numerical ID of the user's new primary group. The group must exist.

           Any file from the user's home directory owned by the previous primary group of the user will be owned
           by this new group.

           The group ownership of files outside of the user's home directory must be fixed manually.

           The change of the group ownership of files inside of the user's home directory is also not done if
           the home dir owner uid is different from the current or new user id. This is a safety measure for
           special home directories such as <a href="file:/.">/.</a>

       <b>-G</b>, <b>--groups</b> <u>GROUP1</u>[<u>,GROUP2,...</u>[<u>,GROUPN</u>]]]
           A list of supplementary groups which the user is also a member of. Each group is separated from the
           next by a comma, with no intervening whitespace. The groups must exist.

           If the user is currently a member of a group which is not listed, the user will be removed from the
           group. This behaviour can be changed via the <b>-a</b> option, which appends the user to the current
           supplementary group list.

       <b>-l</b>, <b>--login</b> <u>NEW_LOGIN</u>
           The name of the user will be changed from <u>LOGIN</u> to <u>NEW_LOGIN</u>. Nothing else is changed. In particular,
           the user's home directory or mail spool should probably be renamed manually to reflect the new login
           name.

       <b>-L</b>, <b>--lock</b>
           Lock a user's password. This puts a '!' in front of the encrypted password, effectively disabling the
           password. You can't use this option with <b>-p</b> or <b>-U</b>.

           Note: if you wish to lock the account (not only access with a password), you should also set the
           <u>EXPIRE_DATE</u> to <u>1</u>.

       <b>-m</b>, <b>--move-home</b>
           moves the content of the user's home directory to the new location. If the current home directory
           does not exist the new home directory will not be created.

           This option is only valid in combination with the <b>-d</b> (or <b>--home</b>) option.

           <b>usermod</b> will try to adapt the ownership of the files and to copy the modes, ACL and extended
           attributes, but manual changes might be needed afterwards.

       <b>-o</b>, <b>--non-unique</b>
           allows to change the user ID to a non-unique value.

           This option is only valid in combination with the <b>-u</b> option. As a user identity serves as key to map
           between users on one hand and permissions, file ownerships and other aspects that determine the
           system's behavior on the other hand, more than one login name will access the account of the given
           UID.

       <b>-p</b>, <b>--password</b> <u>PASSWORD</u>
           defines a new password for the user. PASSWORD is expected to be encrypted, as returned by <b>crypt</b> (3).

           <b>Note:</b> Avoid this option on the command line because the password (or encrypted password) will be
           visible by users listing the processes.

           The password will be written in the local <a href="file:/etc/passwd">/etc/passwd</a> or <a href="file:/etc/shadow">/etc/shadow</a> file. This might differ from the
           password database configured in your PAM configuration.

           You should make sure the password respects the system's password policy.

       <b>-r</b>, <b>--remove</b>
           Remove the user from named supplementary group(s). Use only with the <b>-G</b> option.

       <b>-R</b>, <b>--root</b> <u>CHROOT_DIR</u>
           Apply changes in the <u>CHROOT_DIR</u> directory and use the configuration files from the <u>CHROOT_DIR</u>
           directory. Only absolute paths are supported.

       <b>-P</b>, <b>--prefix</b> <u>PREFIX_DIR</u>
           Apply changes within the directory tree starting with <u>PREFIX_DIR</u> and use as well the configuration
           files located there. This option does not chroot and is intended for preparing a cross-compilation
           target. Some limitations: NIS and LDAP users/groups are not verified. PAM authentication is using the
           host files. No SELINUX support.

       <b>-s</b>, <b>--shell</b> <u>SHELL</u>
           changes the user's login shell. An empty string for SHELL blanks the field in <a href="file:/etc/passwd">/etc/passwd</a> and logs
           the user into the system's default shell.

       <b>-u</b>, <b>--uid</b> <u>UID</u>
           The new value of the user's ID.

           This value must be unique, unless the <b>-o</b> option is used. The value must be non-negative.

           The user's mailbox, and any files which the user owns and which are located in the user's home
           directory will have the file user ID changed automatically.

           The ownership of files outside of the user's home directory must be fixed manually.

           The change of the user ownership of files inside of the user's home directory is also not done if the
           home dir owner uid is different from the current or new user id. This is a safety measure for special
           home directories such as <a href="file:/.">/.</a>

           No checks will be performed with regard to the <b>UID_MIN</b>, <b>UID_MAX</b>, <b>SYS_UID_MIN</b>, or <b>SYS_UID_MAX</b> from
           /etc/login.defs.

       <b>-U</b>, <b>--unlock</b>
           Unlock a user's password. This removes the '!' in front of the encrypted password. You can't use this
           option with <b>-p</b> or <b>-L</b>.

           Note: if you wish to unlock the account (not only access with a password), you should also set the
           <u>EXPIRE_DATE</u> (for example to <u>99999</u>, or to the <b>EXPIRE</b> value from <a href="file:/etc/default/useradd">/etc/default/useradd</a>).

       <b>-v</b>, <b>--add-subuids</b> <u>FIRST</u>-<u>LAST</u>
           Add a range of subordinate uids to the user's account.

           This option may be specified multiple times to add multiple ranges to a user's account.

           No checks will be performed with regard to <b>SUB_UID_MIN</b>, <b>SUB_UID_MAX</b>, or <b>SUB_UID_COUNT</b> from
           /etc/login.defs.

       <b>-V</b>, <b>--del-subuids</b> <u>FIRST</u>-<u>LAST</u>
           Remove a range of subordinate uids from the user's account.

           This option may be specified multiple times to remove multiple ranges to a user's account. When both
           <b>--del-subuids</b> and <b>--add-subuids</b> are specified, the removal of all subordinate uid ranges happens
           before any subordinate uid range is added.

           No checks will be performed with regard to <b>SUB_UID_MIN</b>, <b>SUB_UID_MAX</b>, or <b>SUB_UID_COUNT</b> from
           /etc/login.defs.

       <b>-w</b>, <b>--add-subgids</b> <u>FIRST</u>-<u>LAST</u>
           Add a range of subordinate gids to the user's account.

           This option may be specified multiple times to add multiple ranges to a user's account.

           No checks will be performed with regard to <b>SUB_GID_MIN</b>, <b>SUB_GID_MAX</b>, or <b>SUB_GID_COUNT</b> from
           /etc/login.defs.

       <b>-W</b>, <b>--del-subgids</b> <u>FIRST</u>-<u>LAST</u>
           Remove a range of subordinate gids from the user's account.

           This option may be specified multiple times to remove multiple ranges to a user's account. When both
           <b>--del-subgids</b> and <b>--add-subgids</b> are specified, the removal of all subordinate gid ranges happens
           before any subordinate gid range is added.

           No checks will be performed with regard to <b>SUB_GID_MIN</b>, <b>SUB_GID_MAX</b>, or <b>SUB_GID_COUNT</b> from
           /etc/login.defs.

       <b>-Z</b>, <b>--selinux-user</b> <u>SEUSER</u>
           defines the SELinux user to be mapped with <u>LOGIN</u>. An empty string ("") will remove the respective
           entry (if any). Note that the shadow system doesn't store the selinux-user, it uses <a href="../man8/semanage.8.html">semanage</a>(8) for
           that.

       <b>--selinux-range</b> <u>SERANGE</u>
           defines the SELinux MLS range for the new account. Note that the shadow system doesn't store the
           selinux-range, it uses <b><a href="../man8/semanage.8.html">semanage</a></b>(8) for that.

           This option is only valid if the <b>-Z</b> (or <b>--selinux-user</b>) option is specified.

</pre><h4><b>CAVEATS</b></h4><pre>
       You must make certain that the named user is not executing any processes when this command is being
       executed if the user's numerical user ID, the user's name, or the user's home directory is being changed.
       <b>usermod</b> checks this on Linux. On other operating systems it only uses utmp to check if the user is logged
       in.

       You must change the owner of any <b>crontab</b> files or <b>at</b> jobs manually.

       You must make any changes involving NIS on the NIS server.

</pre><h4><b>CONFIGURATION</b></h4><pre>
       The following configuration variables in <a href="file:/etc/login.defs">/etc/login.defs</a> change the behavior of this tool:

       <b>LASTLOG_UID_MAX</b> (number)
           Highest user ID number for which the lastlog entries should be updated. As higher user IDs are
           usually tracked by remote user identity and authentication services there is no need to create a huge
           sparse lastlog file for them.

           No <b>LASTLOG_UID_MAX</b> option present in the configuration means that there is no user ID limit for
           writing lastlog entries.

       <b>MAIL_DIR</b> (string)
           The mail spool directory. This is needed to manipulate the mailbox when its corresponding user
           account is modified or deleted. If not specified, a compile-time default is used. The parameter
           CREATE_MAIL_SPOOL in <a href="file:/etc/default/useradd">/etc/default/useradd</a> determines whether the mail spool should be created.

       <b>MAIL_FILE</b> (string)
           Defines the location of the users mail spool files relatively to their home directory.

       The <b>MAIL_DIR</b> and <b>MAIL_FILE</b> variables are used by <b>useradd</b>, <b>usermod</b>, and <b>userdel</b> to create, move, or delete
       the user's mail spool.

       <b>MAX_MEMBERS_PER_GROUP</b> (number)
           Maximum members per group entry. When the maximum is reached, a new group entry (line) is started in
           <a href="file:/etc/group">/etc/group</a> (with the same name, same password, and same GID).

           The default value is 0, meaning that there are no limits in the number of members in a group.

           This feature (split group) permits to limit the length of lines in the group file. This is useful to
           make sure that lines for NIS groups are not larger than 1024 characters.

           If you need to enforce such limit, you can use 25.

           Note: split groups may not be supported by all tools (even in the Shadow toolsuite). You should not
           use this variable unless you really need it.

       <b>SUB_GID_MIN</b> (number), <b>SUB_GID_MAX</b> (number), <b>SUB_GID_COUNT</b> (number)
           If <a href="file:/etc/subuid">/etc/subuid</a> exists, the commands <b>useradd</b> and <b>newusers</b> (unless the user already have subordinate
           group IDs) allocate <b>SUB_GID_COUNT</b> unused group IDs from the range <b>SUB_GID_MIN</b> to <b>SUB_GID_MAX</b> for each
           new user.

           The default values for <b>SUB_GID_MIN</b>, <b>SUB_GID_MAX</b>, <b>SUB_GID_COUNT</b> are respectively 100000, 600100000 and
           65536.

       <b>SUB_UID_MIN</b> (number), <b>SUB_UID_MAX</b> (number), <b>SUB_UID_COUNT</b> (number)
           If <a href="file:/etc/subuid">/etc/subuid</a> exists, the commands <b>useradd</b> and <b>newusers</b> (unless the user already have subordinate
           user IDs) allocate <b>SUB_UID_COUNT</b> unused user IDs from the range <b>SUB_UID_MIN</b> to <b>SUB_UID_MAX</b> for each
           new user.

           The default values for <b>SUB_UID_MIN</b>, <b>SUB_UID_MAX</b>, <b>SUB_UID_COUNT</b> are respectively 100000, 600100000 and
           65536.

</pre><h4><b>FILES</b></h4><pre>
       <a href="file:/etc/group">/etc/group</a>
           Group account information

       <a href="file:/etc/gshadow">/etc/gshadow</a>
           Secure group account information

       <a href="file:/etc/login.defs">/etc/login.defs</a>
           Shadow password suite configuration

       <a href="file:/etc/passwd">/etc/passwd</a>
           User account information

       <a href="file:/etc/shadow">/etc/shadow</a>
           Secure user account information

       <a href="file:/etc/subgid">/etc/subgid</a>
           Per user subordinate group IDs

       <a href="file:/etc/subuid">/etc/subuid</a>
           Per user subordinate user IDs

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man1/chfn.1.html">chfn</a></b>(1), <b><a href="../man1/chsh.1.html">chsh</a></b>(1), <b><a href="../man1/passwd.1.html">passwd</a></b>(1), <b><a href="../man3/crypt.3.html">crypt</a></b>(3), <b><a href="../man8/gpasswd.8.html">gpasswd</a></b>(8), <b><a href="../man8/groupadd.8.html">groupadd</a></b>(8), <b><a href="../man8/groupdel.8.html">groupdel</a></b>(8), <b><a href="../man8/groupmod.8.html">groupmod</a></b>(8), <b><a href="../man5/login.defs.5.html">login.defs</a></b>(5),
       <b><a href="../man5/subgid.5.html">subgid</a></b>(5), <b><a href="../man5/subuid.5.html">subuid</a></b>(5), <b><a href="../man8/useradd.8.html">useradd</a></b>(8), <b><a href="../man8/userdel.8.html">userdel</a></b>(8).

shadow-utils 4.17.4                                05/07/2025                                         <u><a href="../man8/USERMOD.8.html">USERMOD</a></u>(8)
</pre>
 </div>
</div></section>
</div>
</body>
</html>