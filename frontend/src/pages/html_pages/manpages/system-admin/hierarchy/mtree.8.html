<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>mtree — map a directory hierarchy</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/mtree-netbsd">mtree-netbsd_20180822-9_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       mtree — map a directory hierarchy

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>mtree</b> [<b>-cCdDelLMPruUWx</b>] [<b>-i</b> | <b>-m</b>] [<b>-f</b> <u>spec</u>] [<b>-p</b> <u>path</u>] [<b>-k</b> <u>keywords</u>] [<b>-K</b> <u>keywords</u>] [<b>-R</b> <u>keywords</u>] [<b>-E</b> <u>tags</u>]
             [<b>-I</b> <u>tags</u>] [<b>-N</b> <u>dbdir</u>] [<b>-s</b> <u>seed</u>] [<b>-X</b> <u>exclude-file</u>]

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The  <b>mtree</b>  utility  compares  the file hierarchy rooted in the current directory against a specification
       read from the standard input.   Messages  are  written  to  the  standard  output  for  any  files  whose
       characteristics  do  not  match the specification, or which are missing from either the file hierarchy or
       the specification.

       The options are as follows:

       <b>-c</b>    Print a specification for the file hierarchy to the standard output.

       <b>-d</b>    Ignore everything except directory type files.

       <b>-C</b>    Print (‘dump’) the specification as provided by <b>-f</b> <u>spec</u> in a format that's  easier  to  parse  with
             various  tools.  The full path name is always printed as the first field, and <b>-k</b>, <b>-K</b>, and <b>-R</b> can be
             used to control which other keywords are printed, and <b>-E</b> and <b>-I</b> can be used to control which  files
             are printed.

       <b>-D</b>    As per <b>-C</b>, except that the path name is always printed as the last field instead of the first.

       <b>-E</b> <u>tags</u>
             Add  the  comma separated tags to the “exclusion” list.  Non-directories with tags which are in the
             exclusion list are not printed with <b>-D</b>.

       <b>-e</b>    Don't complain about files that are in the file hierarchy, but not in the specification.

       <b>-f</b> <u>spec</u>
             Read the specification from <u>file</u>, instead of from the standard input.

       <b>-I</b> <u>tags</u>
             Add the comma separated tags to the “inclusion” list.  Non-directories with tags which are  in  the
             inclusion  list  are  printed with <b>-D</b>.  If no inclusion list is provided, the default is to display
             all files.

       <b>-i</b>    If specified, set the schg and/or sappnd flags.

       <b>-K</b> <u>keywords</u>
             Add the specified (whitespace or comma separated) keywords to the  current  set  of  keywords.   If
             ‘all’ is specified, add all of the other keywords.

       <b>-k</b> <u>keywords</u>
             Use  the  <b>type</b>  keyword  plus the specified (whitespace or comma separated) keywords instead of the
             current set of keywords.  If ‘all’ is specified, use all  of  the  other  keywords.   If  the  <b>type</b>
             keyword is not desired, suppress it with <b>-R</b> <u>type</u>.

       <b>-l</b>    Do  “loose” permissions checks, in which more stringent permissions will match less stringent ones.
             For example, a file marked mode 0444 will pass a check for mode 0644.  “Loose” checks apply only to
             read, write and execute permissions -- in  particular,  if  other  bits  like  the  sticky  bit  or
             suid/sgid  bits  are set either in the specification or the file, exact checking will be performed.
             This flag may not be set at the same time as the <b>-u</b> or <b>-U</b> flags.

       <b>-L</b>    Follow all symbolic links in the file hierarchy.

       <b>-m</b>    If the schg and/or sappnd flags are specified, reset these flags. Note that this is  only  possible
             with  securelevel  less than 1 (i.e. in single user mode or while the system is running in insecure
             mode). See <u><a href="../man8/init.8.html">init</a></u>(8) for information on security levels.

       <b>-M</b>    Permit merging of specification entries with different types, with the last entry take precedence.

       <b>-N</b> <u>dbdir</u>
             Use the user database text file <u>master.passwd</u> and group database text file <u>group</u> from <u>dbdir</u>, rather
             than using the results from the system's <u><a href="../man3/getpwnam.3.html">getpwnam</a></u>(3) and <u><a href="../man3/getgrnam.3.html">getgrnam</a></u>(3) (and related) library calls.

       <b>-p</b> <u>path</u>
             Use the file hierarchy rooted in <u>path</u>, instead of the current directory.

       <b>-P</b>    Don't follow symbolic links in the file hierarchy, instead consider the symbolic link itself in any
             comparisons.  This is the default.

       <b>-r</b>    Remove any files in the file hierarchy that are not described in the specification.

       <b>-R</b> <u>keywords</u>
             Remove the specified (whitespace or comma separated) keywords from the current set of keywords.  If
             ‘all’ is specified, remove all of the other keywords.

       <b>-s</b> <u>seed</u>
             Display a single checksum to the standard error output that represents all of the files  for  which
             the keyword <b>cksum</b> was specified.  The checksum is seeded with the specified value.

       <b>-u</b>    Modify  the owner, group, permissions, and flags of existing files, the device type of devices, and
             symbolic link targets, to match the specification.  Create  any  missing  directories,  devices  or
             symbolic  links.   User, group, and permissions must all be specified for missing directories to be
             created.  Note that unless the <b>-i</b> option is given, the schg and sappnd flags will not be set,  even
             if  specified. If <b>-m</b> is given, these flags will be reset.  Exit with a status of 0 on success, 2 if
             the file hierarchy did not match the specification, and 1 if any other error occurred.

       <b>-U</b>    Same as <b>-u</b> except that a mismatch is not considered to be an error if it was corrected.

       <b>-W</b>    Don't attempt to set various file attributes such as the  ownership,  mode,  flags,  or  time  when
             creating  new  directories or changing existing entries.  This option will be most useful when used
             in conjunction with <b>-u</b> or <b>-U</b>.

       <b>-x</b>    Don't descend below mount points in the file hierarchy.

       <b>-X</b> <u>exclude-file</u>
             The  specified  file  contains  <u><a href="../man3/fnmatch.3.html">fnmatch</a></u>(3)  patterns  matching  files  to  be  excluded  from   the
             specification,  one to a line.  If the pattern contains a ‘/’ character, it will be matched against
             entire pathnames (relative to the starting  directory);  otherwise,  it  will  be  matched  against
             basenames only.  Comments are permitted in the <u>exclude-list</u> file.

       Specifications  are  mostly  composed  of  “keywords”,  i.e. strings that that specify values relating to
       files.  No keywords have default values, and if a keyword has no value set, no checks  based  on  it  are
       performed.

       Currently supported keywords are as follows:

       <b>cksum</b>   The checksum of the file using the default algorithm specified by the <u><a href="../man1/cksum.1.html">cksum</a></u>(1) utility.

       <b>device</b>  The device number to use for <b>block</b> or <b>char</b> file types.  The argument must be one of the following
               forms:

               <u>format</u>,<u>major</u>,<u>minor</u>
                     A  device  with <u>major</u> and <u>minor</u> fields, for an operating system specified with <u>format</u>.  See
                     below for valid formats.

               <u>format</u>,<u>major</u>,<u>unit</u>,<u>subunit</u>
                     A device with <u>major</u>, <u>unit</u>, and <u>subunit</u> fields,  for  an  operating  system  specified  with
                     <u>format</u>.  (Currently this is only supported by the <b>bsdos</b> format.)

               <u>number</u>
                     Opaque number (as stored on the file system).

               The  following values for <u>format</u> are recognized: <b>native</b>, <b>386bsd</b>, <b>4bsd</b>, <b>bsdos</b>, <b>freebsd</b>, <b>hpux</b>, <b>isc</b>,
               <b>linux</b>, <b>netbsd</b>, <b>osf1</b>, <b>sco</b>, <b>solaris</b>, <b>sunos</b>, <b>svr3</b>, <b>svr4</b>, and <b>ultrix</b>.

               See <u><a href="../man8/mknod.8.html">mknod</a></u>(8) for more details.

       <b>flags</b>   The file flags as a symbolic name.  See <u><a href="../man1/chflags.1.html">chflags</a></u>(1) for information on these names.  If  no  flags
               are  to be set the string ‘none’ may be used to override the current default.  Note that the schg
               and sappnd flags are treated specially (see the <b>-i</b> and <b>-m</b> options).

       <b>ignore</b>  Ignore any file hierarchy below this file.

       <b>gid</b>     The file group as a numeric value.

       <b>gname</b>   The file group as a symbolic name.

       <b>link</b>    The file the symbolic link is expected to reference.

       <b>md5</b>     The MD5 cryptographic message digest of the file.

       <b>md5digest</b>
               Synonym for <b>md5</b>.

       <b>mode</b>    The current file's permissions as a numeric (octal) or symbolic value.

       <b>nlink</b>   The number of hard links the file is expected to have.

       <b>optional</b>
               The file is optional; don't complain about the file if it's not in the file hierarchy.

       <b>rmd160</b>  The RMD-160 cryptographic message digest of the file.

       <b>rmd160digest</b>
               Synonym for <b>rmd160</b>.

       <b>sha1</b>    The SHA-1 cryptographic message digest of the file.

       <b>sha1digest</b>
               Synonym for <b>sha1</b>.

       <b>sha256</b>  The 256-bits SHA-2 cryptographic message digest of the file.

       <b>sha256digest</b>
               Synonym for <b>sha256</b>.

       <b>sha384</b>  The 384-bits SHA-2 cryptographic message digest of the file.

       <b>sha384digest</b>
               Synonym for <b>sha384</b>.

       <b>sha512</b>  The 512-bits SHA-2 cryptographic message digest of the file.

       <b>sha512digest</b>
               Synonym for <b>sha512</b>.

       <b>size</b>    The size, in bytes, of the file.

       <b>tags</b>    Comma delimited tags to be matched with <b>-E</b> and <b>-I</b>.  These may be  specified  without  leading  or
               trailing commas, but will be stored internally with them.

       <b>time</b>    The last modification time of the file.

       <b>type</b>    The type of the file; may be set to any one of the following:

               <b>block</b>   block special device
               <b>char</b>    character special device
               <b>dir</b>     directory
               <b>fifo</b>    fifo
               <b>file</b>    regular file
               <b>link</b>    symbolic link
               <b>socket</b>  socket

       <b>uid</b>     The file owner as a numeric value.

       <b>uname</b>   The file owner as a symbolic name.

       The default set of keywords are <b>flags</b>, <b>gid</b>, <b>link</b>, <b>mode</b>, <b>nlink</b>, <b>size</b>, <b>time</b>, <b>type</b>, and <b>uid</b>.

       There are four types of lines in a specification:

       1.   Set  global  values  for  a  keyword.   This  consists  of the string ‘/set’ followed by whitespace,
            followed by sets of keyword/value pairs, separated by whitespace.  Keyword/value pairs consist of  a
            keyword, followed by an equals sign (‘=’), followed by a value, without whitespace characters.  Once
            a keyword has been set, its value remains unchanged until either reset or unset.

       2.   Unset  global  values  for a keyword.  This consists of the string ‘/unset’, followed by whitespace,
            followed by one or more keywords, separated by whitespace.  If ‘all’ is specified, unset all of  the
            keywords.

       3.   A  file  specification,  consisting of a path name, followed by whitespace, followed by zero or more
            whitespace separated keyword/value pairs.

            The path name may be preceded by whitespace characters.  The  path  name  may  contain  any  of  the
            standard  path name matching characters (‘[’, ‘]’, ‘?’ or ‘*’), in which case files in the hierarchy
            will be associated with the first pattern that they match.  <b>mtree</b>  uses  <u><a href="../man3/strsvis.3.html">strsvis</a></u>(3)  (in  VIS_CSTYLE
            format)  to encode path names containing non-printable characters. Whitespace characters are encoded
            as ‘\s’ (space), ‘\t’ (tab), and ‘\n’ (new line).  ‘#’ characters in path names  are  escaped  by  a
            preceding backslash ‘\’ to distinguish them from comments.

            Each  of the keyword/value pairs consist of a keyword, followed by an equals sign (‘=’), followed by
            the keyword's value, without whitespace characters.  These values override,  without  changing,  the
            global value of the corresponding keyword.

            The  first  path  name  entry listed must be a directory named ‘.’, as this ensures that intermixing
            full and relative path names will work consistently and correctly.  Multiple entries for a directory
            named ‘.’ are permitted; the settings for the last such entry override those of the existing entry.

            A path name that contains a slash (‘/’) that is not the first character will be treated  as  a  full
            path  (relative  to  the root of the tree).  All parent directories referenced in the path name must
            exist.  The current directory path used by  relative  path  names  will  be  updated  appropriately.
            Multiple entries for the same full path are permitted if the types are the same (unless <b>-M</b> is given,
            and then the types may differ); in this case the settings for the last entry take precedence.

            A  path  name  that  does  not  contain  a  slash  will be treated as a relative path.  Specifying a
            directory will cause subsequent files to be searched for in that directory hierarchy.

       4.   A line containing only the string ‘..’ which causes the current directory  path  (used  by  relative
            paths) to ascend one level.

       Empty lines and lines whose first non-whitespace character is a hash mark (‘#’) are ignored.

       The  <b>mtree</b>  utility  exits  with  a  status  of  0 on success, 1 if any error occurred, and 2 if the file
       hierarchy did not match the specification.

</pre><h4><b>FILES</b></h4><pre>
       <u>/etc/mtree</u>  system specification directory

</pre><h4><b>EXAMPLES</b></h4><pre>
       To detect system binaries that have been “trojan horsed”, it is recommended that <b>mtree</b> be run on the file
       systems, and a copy of the results stored on a different machine, or, at least, in encrypted  form.   The
       seed for the <b>-s</b> option should not be an obvious value and the final checksum should not be stored on-line
       under  any circumstances!  Then, periodically, <b>mtree</b> should be run against the on-line specifications and
       the final checksum compared with the previous value.  While it is possible for the bad guys to change the
       on-line specifications to conform to their modified binaries, it shouldn't be possible for them  to  make
       it  produce  the  same final checksum value.  If the final checksum value changes, the off-line copies of
       the specification can be used to detect which of the binaries have actually been modified.

       The <b>-d</b> and <b>-u</b> options can be used in combination to create directory hierarchies  for  distributions  and
       other such things.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <u><a href="../man1/chflags.1.html">chflags</a></u>(1), <u><a href="../man1/chgrp.1.html">chgrp</a></u>(1), <u><a href="../man1/chmod.1.html">chmod</a></u>(1), <u><a href="../man1/cksum.1.html">cksum</a></u>(1), <u><a href="../man2/stat.2.html">stat</a></u>(2), <u><a href="../man3/fnmatch.3.html">fnmatch</a></u>(3), <u><a href="../man3/fts.3.html">fts</a></u>(3), <u><a href="../man3/strsvis.3.html">strsvis</a></u>(3), <u><a href="../man8/chown.8.html">chown</a></u>(8), <u><a href="../man8/mknod.8.html">mknod</a></u>(8)

</pre><h4><b>HISTORY</b></h4><pre>
       The  <b>mtree</b>  utility  appeared  in 4.3BSD-Reno.  The <b>optional</b> keyword appeared in NetBSD 1.2.  The <b>-U</b> flag
       appeared in NetBSD 1.3.  The <b>flags</b> and <b>md5</b> keywords, and <b>-i</b> and <b>-m</b> flags appeared  in  NetBSD  1.4.   The
       <b>device</b>,  <b>rmd160</b>,  <b>sha1</b>,  <b>tags</b>,  and  <b>all</b>  keywords, <b>-D</b>, <b>-E</b>, <b>-I</b>, <b>-l</b>, <b>-L</b>, <b>-N</b>, <b>-P</b>, <b>-R</b>, <b>-W</b>, and <b>-X</b> flags, and
       support for full paths appeared in NetBSD 1.6.  The <b>sha256</b>,  <b>sha384</b>,  and  <b>sha512</b>  keywords  appeared  in
       NetBSD 3.0.

Debian                                         September 12, 2006                                       <u><a href="../man8/MTREE.8.html">MTREE</a></u>(8)
</pre>
 </div>
</div></section>
</div>
</body>
</html>