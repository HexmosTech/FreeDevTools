<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>news.daily - Perform daily Usenet maintenance tasks</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/inn2">inn2_2.7.3-1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       news.daily - Perform daily Usenet maintenance tasks

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>news.daily</b> [<b>delayrm</b>] [<b>expctl</b>=<u>path</u>] [<b>expdir</b>=<u>path</u>] [<b>expireover</b>] [<b>expireoverflags</b>=<u>args</u>] [<b>flags</b>=<u>args</u>]
       [<b>lowmark</b>] [<b>mailto</b>=<u>address</u>] [<b>noexpire</b>] [<b>noexpireover</b>] [<b>noexplog</b>] [<b>nologs</b>] [<b>nomail</b>] [<b>noprocbatch</b>]
       [<b>norenumber</b>] [<b>norm</b>] [<b>norotate</b>] [<b>nostat</b>] [<b>notdaily</b>] [<b>postexec</b>=<u>program</u>] [<b>procbatchdir</b>=<u>path</u>] [<b>tmpdir</b>=<u>path</u>]
       [<u>/path/to/a/program</u>]

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>news.daily</b> performs a number of important Usenet administrative functions.  This includes:

       • producing a status report with <b>innstat</b>;

       • removing old news articles (with <b>expirerm</b> if the <b>delayrm</b> keyword is specified);

       • purging  the  overview database with <b>expireover</b> (if the corresponding eponym keyword is specified or if
         <u>enableoverview</u> is true in <u>inn.conf</u>);

       • processing log files and rotating the archived log files with <b>scanlogs</b>;

       • processing <b>innfeed</b> dropped files with <b>procbatch</b>;

       • processing spooled messages with <b>rnews</b> invoked with the <b>-U</b> flag;

       • renumbering the <u>active</u> file with <b>ctlinnd</b>;

       • rebuilding the <u>history</u> file with <b>expire</b>;

       • removing any old socket files found in the <u>pathrun</u> directory;

       • collecting all the output and mailing it.

       Please note that this program should be run under the news administrator's account (usually "news"),  not
       as  root.   By  default,  <b>news.daily</b>  performs  all  of  its  functions  and mails the output to the news
       administrator, which is the user specified with <b>--with-news-master</b> at configure time (it is  "usenet"  by
       default).  You can also change this behaviour with the <b>mailto</b> keyword.

       By  specifying keywords on the command line, it is possible to modify the functions performed, as well as
       change the arguments given to <a href="../man8/expire.8.html">expire</a>(8)  and  <a href="../man8/expireover.8.html">expireover</a>(8).   <b>news.daily</b>  should  be  run  once  a  day,
       typically  out  of  <a href="../man8/cron.8.html">cron</a>(8).   Since  it  will slow the server down while it is running, it should be run
       during periods of low server usage, such as in the middle of the night.  To run it at 3am,  for  example,
       add the following entry to the news user's crontab file:

           0 3 * * * &lt;pathbin in inn.conf&gt;/news.daily expireover lowmark

       If  you're  using  any  non-CNFS  storage  methods,  add the <b>delayrm</b> keyword to the above option list for
       <b>news.daily</b>.

       It may be run more often, but such invocations should at least use the <b>norotate</b> keyword (or  perhaps  the
       <b>notdaily</b>  keyword)  to  prevent  the  log files from being processed and rotated too fast.  The <a href="../man8/shlock.8.html">shlock</a>(8)
       program is used to prevent simultaneous executions.

       The program specified by the given path <u>/path/to/a/program</u> is executed  just  before  any  expiration  is
       done.   A  typical  use  is  to  specify  an  alternate  expiration program and use the <b>noexpire</b> keyword.
       Multiple programs may be specified; they will be invoked in order.

</pre><h4><b>KEYWORDS</b></h4><pre>
       The following keywords may be used:

       <b>delayrm</b>
           This uses the <b>-z</b> flag when invoking <b>expire</b> and <b>expireover</b>.  The names of articles to be  removed  are
           written  to  a  temporary  file,  and then renamed after expiration by calling <b>expirerm</b> which in turn
           calls <b>fastrm</b>.

       <b>expctl</b>=<u>path</u>
           Specify the file to use as the <u>expire.ctl</u> file for <b>expire</b>.

       <b>expdir</b>=<u>path</u>
           By default, <b>expire</b> builds the new <u>history</u> file and database in the  same  directory  as  the  current
           files.   Using  this keyword specifies a different location to build the new files (by passing the <b>-d</b>
           flag to <b>expire</b>), which will then be moved to the right location when finished.

       <b>expireover</b>
           The <b>expireover</b> program is called after expiration to purge the overview  database.   If  no  overview
           data  is  created,  the <b>expireover</b> keyword is not needed.  This is the case when the server runs only
           for feeders (no reader).  By default, <b>expireover</b> is not called by <b>news.daily</b> unless <u>enableoverview</u> is
           set to true in <u>inn.conf</u>.

       <b>expireoverflags</b>=<u>args</u>
           If the <b>expireover</b> keyword is used, this keyword may be used to specify the  flags  to  be  passed  to
           <b>expireover</b>.   If  the  <b>delayrm</b>  keyword is used, then the default value is <b>-z</b> and the list of deleted
           files; otherwise, the default value is <b>-s</b>.

       <b>flags</b>=<u>args</u>
           By default, <b>expire</b> is invoked with argument <b>-v1</b>.  Using this keyword changes the arguments  to  those
           specified.  Be careful to use quotes if multiple arguments are needed.  This keyword has no effect if
           the <b>noexpire</b> keyword is used.

       <b>lowmark</b>
           If  the  <b>lowmark</b>  keyword is used, "ctlinnd lowmark" is used for renumbering <u>active</u>.  Normal "ctlinnd
           renumber" operation will take long time.  With the <b>lowmark</b> keyword, this will take less time.  If the
           <b>lowmark</b> keyword is used,  the  <b>norenumber</b>  keyword  is  not  needed  since  <b>news.daily</b>  specifies  it
           implicitly.

           If  the  <b>lowmark</b>  keyword  is  given  to  <b>news.daily</b>, then the <b>expireover</b> keyword must also be given;
           otherwise, that kind of renumbering will not be taken into account.

       <b>mailto</b>=<u>address</u>
           By default, <b>news.daily</b> mails the report to the newsmaster address specified  with  <b>--with-news-master</b>
           at  configure  time.  The <b>mailto</b> keyword can specify a different address to which to mail the report.
           Note that using this keyword has no effect if the <b>nomail</b> keyword is also specified.

       <b>noexpire</b>
           By default, <b>expire</b> is invoked to  remove  old  news  articles.   Using  this  keyword  disables  this
           function.

       <b>noexpireover</b>
           By  default,  <b>expireover</b>  is  invoked  to  remove  old  overview database if <u>enableoverview</u> is set in
           <u>inn.conf</u>.  Using this keyword disables this function.

       <b>noexplog</b>
           <b>expire</b> normally appends information to  <u>pathlog</u>/expire.log  (see  <a href="../man5/newslog.5.html">newslog</a>(5)).   Using  this  keyword
           causes  the  <b>expire</b>  output  to  be  handled as part of <b>news.daily</b>'s output.  It has no effect if the
           <b>noexpire</b> keyword is used.

       <b>nologs</b>
           After expiration, <b>scanlogs</b> is invoked to process the log files.  Using this keyword disables all  log
           processing functions.

       <b>nomail</b>
           <b>news.daily</b>  normally  sends  a  mail message containing the results to the administrator.  Using this
           keyword causes this message to be sent to stdout and stderr instead.  Normally, all utilities invoked
           by the script have their stdout and stderr redirected into a file.  If the file is empty, no  message
           is sent.

       <b>noprocbatch</b>
           This keyword disables the run of <b>procbatch</b> on <b>innfeed</b> dropped files generated in its spool directory.
           These files contain a list of articles which were not correctly sent to peers.  By default, they will
           be processed and removed afterwards.

       <b>norenumber</b>
           This  keyword  disables  the  "ctlinnd  renumber"  operation.   Normally, the low water marks for all
           newsgroups are reset in the <u>active</u> file.

       <b>norm</b>
           By default, any <b>ctlinnd</b> socket that has not been modified for two days will be removed.   Using  this
           keyword disables this function.

       <b>norotate</b>
           By default, log processing includes rotating and cleaning out log files.  Using this keyword disables
           the  rotating  and  cleaning  aspect  of  the  log  processing:  the  logs files are only scanned for
           information and no contents are altered.  This keyword has no effect if the <b>nologs</b> keyword  is  used.
           The <b>norotate</b> keyword is passed on to <b>scanlogs</b> if it is invoked.

       <b>nostat</b>
           This  keyword  disables  the  status  report  generated by <b>innstat</b>.  Without this keyword, the status
           report is the first function performed, just prior to obtaining the <b>news.daily</b> lock.

       <b>notdaily</b>
           By default, <b>news.daily</b> expects to be run only once a day, and it does various things  (like  rotating
           logs)  that normally should only be done on daily basis.  Use this keyword any extra times <b>news.daily</b>
           is run in the day and the normal log files processing (and rotation) will not be done.  This  keyword
           implies <b>nologs</b>.

       <b>postexec</b>=<u>program</u>
           The  program  specified  by  the  given  path  <u>program</u> is executed just after all expiration is done.
           Multiple programs may be specified; they will be invoked in order.

       <b>procbatchdir</b>=<u>path</u>
           <b>news.daily</b> tries to find the backlog directory of <b>innfeed</b> in <u>innfeed.conf</u>  and  <u>innfeed-delayed.conf</u>.
           In  case  several  instances of <b>innfeed</b> are running or when its configuration file is not the default
           one, the <b>procbatchdir</b> keyword can be used to specify the path of the backlog directory.  This keyword
           can be used more than once in the command-line, permitting specifying several backlog directories.

       <b>tmpdir</b>=<u>path</u>
           Overrides the <u>pathtmp</u> setting in <u>inn.conf</u> by  setting  the  environment  variable  "$TMPDIR"  to  the
           specified  path.   Various  parts of the expire process, such as sort, will then use this path as the
           directory for temporary files.

</pre><h4><b>HISTORY</b></h4><pre>
       <b>news.daily</b> and this manual page were  written  by  Landon  Curt  Noll  &lt;<a href="mailto:chongo@toad.com">chongo@toad.com</a>&gt;  and  Rich  $alz
       &lt;<a href="mailto:rsalz@uunet.uu.net">rsalz@uunet.uu.net</a>&gt; for InterNetNews.  It was converted to POD by Julien Elie.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <a href="../man5/active.5.html">active</a>(5),  <a href="../man8/ctlinnd.8.html">ctlinnd</a>(8),  <a href="../man8/expire.8.html">expire</a>(8),  <a href="../man5/expire.ctl.5.html">expire.ctl</a>(5),  <a href="../man8/expireover.8.html">expireover</a>(8),  <a href="../man8/expirerm.8.html">expirerm</a>(8), <a href="../man1/fastrm.1.html">fastrm</a>(1), <a href="../man5/inn.conf.5.html">inn.conf</a>(5),
       <a href="../man8/innstat.8.html">innstat</a>(8), <a href="../man5/newslog.5.html">newslog</a>(5), <a href="../man8/procbatch.8.html">procbatch</a>(8), <a href="../man8/scanlogs.8.html">scanlogs</a>(8), <a href="../man8/shlock.8.html">shlock</a>(8).

INN 2.7.3                                          2025-05-19                                      <u><a href="../man8/NEWS.DAILY.8.html">NEWS.DAILY</a></u>(8)
</pre>
 </div>
</div></section>
</div>
</body>
</html>