<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>install-mbr - install a Master Boot Record manager</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/mbr">mbr_1.2.2_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       install-mbr - install a Master Boot Record manager

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>install-mbr</b> &lt;<u>target</u>&gt;  [<b>--force</b>]  [<b>--install</b> &lt;<u>path</u>&gt;]  [<b>--keep</b>]  [<b>--list</b>]  [<b>--no-act</b>]  [<b>--offset</b> &lt;<u>offset</u>&gt;]
       [<b>--y2kbug</b>[<b>=utc</b>|<b>=local</b>]]    [<b>--parameters</b>  &lt;<u>path</u>&gt;]  [<b>--reset</b>]  [<b>--table</b> &lt;<u>path</u>&gt;]  [<b>--verbose</b>]  [<b>--version</b>]
       [<b>--help</b>]  [<b>--drive</b> &lt;<u>drive</u>&gt;]  [<b>--enable</b> &lt;<u>options</u>&gt;]   [<b>--interrupt</b>  &lt;<u>keys</u>&gt;]    [<b>--partition</b>  &lt;<u>partition</u>&gt;]
       [<b>--timeout</b> &lt;<u>timeout</u>&gt;]

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>install-mbr</b>  installs and configures a Master Boot Record manager on a device.  The behaviour of the boot
       manager is determined by the options given on the command line.  &lt;<u>target</u>&gt;  is  the  path  specifying  the
       device (or file) that the boot manager should be installed onto.

</pre><h4><b>MBR</b> <b>BEHAVIOUR</b></h4><pre>
       When the MBR is first loaded it waits for a configurable length of time (1 second by default), monitoring
       the  keyboard  for key presses.  The types of key which cause the MBR to be interrupted can be configured
       through the -i option to install-mbr.

       If the MBR is interrupted, it will display its prompt.  Otherwise it will load the first  sector  of  the
       default  partition  and  execute it.  If a disk error occurs or the boot signature is missing, the prompt
       will be displayed.

   <b>The</b> <b>boot</b> <b>prompt</b>
       The boot prompt looks something like this:

              14FA:

       This is the list of valid keys which may be pressed followed by a colon.  Numeric keys  indicate  primary
       partitions on the disk beginning with partition 1 and 'F' indicates the floppy disk.  Extended partitions
       cannot  be booted.  The 'A' means that 'advanced' mode may be entered, in which case any partition may be
       booted.  The only other valid key which may be pressed  is  RETURN,  which  continues  booting  with  the
       default partition.

       The prompt for advanced mode looks like this and works just the same as the normal prompt.

              1234F:

       The list of valid partitions and the default partition can be configured through the -e and -p options to
       install-mbr.

</pre><h4><b>OPTIONS</b></h4><pre>
   <b>Installation</b> <b>options</b>
       These options change the way the installation program operates.

       <b>--force</b>, <b>-f</b>
              This option currently overrides a check to make sure the specified target is valid.

       <b>--install</b> &lt;<u>path</u>&gt;, <b>-I</b> &lt;<u>path</u>&gt;
              This  option  may be used to install code other than that which is built in to <b>install-mbr</b>.  It is
              mainly useful for testing, but may be used to install older versions of the MBR.

       <b>--keep</b>, <b>-k</b>
              This option instructs the installer to modify the parameters stored in the  MBR  without  updating
              the code.

       <b>--list</b>, <b>-l</b>
              This  option  may  be  used  to  view  the  parameters being installed in the MBR.  It implies the
              <b>--no-act</b> and <b>--keep</b> flags unless an option other than <b>--offset</b>,  <b>--verbose</b>  or  <b>--list</b>  is  given.
              This allows the contents of the MBR to be examined.

       <b>--no-act</b>, <b>-n</b>
              This option ensures that the target is not modified, as it is opened in read-only mode.

       <b>--offset</b> &lt;<u>offset</u>&gt;, <b>-o</b> &lt;<u>offset</u>&gt;
              This  option  may  be  used  to install the MBR somewhere other than the start of the target.  The
              offset specifies the number of bytes from the start of the target  at  which  the  MBR  should  be
              installed.  For example, an offset of 128 may be used for DOSEMU disk images.

       <b>--y2kbug</b>[<b>=utc</b>|<b>=local</b>|<b>=off</b>], <b>-y</b>[<b>u</b>|<b>l</b>|<b>-</b>]
              This  option  specifies  the status of the Y2K bug fix parameter.  When set, an alternative MBR is
              installed that fixes a Y2K bug in some BIOSes that causes them to always boot up the machine  with
              the  year  ranging  from  94  to 99.  This MBR stores the current month and year and sets the year
              based on this when the computer is booted.  It also increases  the  year  automatically  when  the
              current  month is lower than the month of the last boot.  The initial year and month are set based
              on the current system time converted to UTC or the local time as specified by  the  argument.   If
              the  argument  is  not  specified,  the  default  is  read  from  /etc/default/rcS.   Due to space
              limitations, the alternative version of the MBR does not display the word MBR as it boots.  If the
              argument is <b>=off</b> or <b>-</b> the Y2K bug fix is disabled.  <b>WARNING:</b> The Y2K bug fix will work fine  until
              you  want  to set the date backwards.  When you do want to do this, you will need to reinstall the
              MBR.  You cannot just set the date in the BIOS (since the whole point of this option is  that  the
              year provided by the BIOS is ignored).

       <b>--parameters</b> &lt;<u>path</u>&gt;, <b>-P</b> &lt;<u>path</u>&gt;
              This  option  may  be  used  to  copy  parameters  from somewhere other than the target.  The path
              specifies a location where a version of this MBR has been installed and parameters are  read  from
              there.  It could be used to copy parameters from one disk to another disk.

       <b>--reset</b>, <b>-r</b>
              This  option  is  used to reset the boot parameters to the state found in the code being installed
              (or code which would be installed if <b>--keep</b> were not specified).

       <b>--table</b> &lt;<u>path</u>&gt;, <b>-T</b> &lt;<u>path</u>&gt;
              The master boot record currently uses the partition table in  the  sector  which  contains  it  to
              locate  boot sectors (This behaviour may change with future versions of the MBR, in which case the
              option may be withdrawn).  The <b>--table</b> option is used to  copy  a  partition  table  from  another
              location to the target location.  Any data stored on the target disk may be lost (as the partition
              table is overwritten), so this option should be used with extreme caution.  As the partition table
              is  copied,  any changes made to the original partition table will not be noticed.  This option is
              only provided to make installation to floppy easy.

       <b>--verbose</b>, <b>-v</b>
              When invoked with this option, <b>install-mbr</b> will display some information about what it is doing.

       <b>--version</b>, <b>-V</b>
              This option will cause <b>install-mbr</b> to display it's version number and exit.

       <b>--help</b>, <b>-h</b>
              This option will cause <b>install-mbr</b> to display a help message and exit.

   <b>Parameter</b> <b>options</b>
       These options change the parameters stored within the Master Boot Record.

       <b>--drive</b> &lt;<u>drive</u>&gt;, <b>-d</b> &lt;<u>drive</u>&gt;
              This option instructs the MBR to boot a drive other than the first hard disk.  It may be specified
              in decimal or hexadecimal if prefixed with 0x.  Hard disks are numbered starting from 128 (0x80).

       <b>--enable</b> &lt;<u>option</u>&gt;, <b>-e</b> &lt;<u>option</u>&gt;
              This option sets the list of boot sectors which may be loaded (or advanced mode).  A  boot  sector
              may be loaded from one of the first 4 partitions of the disk, or from the first floppy drive.  Use
              <b>--enable</b> <b>+</b>&lt;<u>spec</u>&gt; to add a boot sector to the list or <b>--enable</b> <b>-</b>&lt;<u>spec</u>&gt; to remove a boot sector from
              the list.  Use <b>--enable</b> <b>=</b>&lt;<u>spec</u>&gt; to set the list to &lt;<u>spec</u>&gt;.  &lt;<u>spec</u>&gt; may contain:

              <b>1</b>, <b>2</b>, <b>3</b>, <b>4</b>
                          The specified partition number.

              <b>F</b>           The first floppy disk.

              <b>A</b>           Advanced mode (not a boot sector).

       <b>--interrupt</b> &lt;<u>mode</u>&gt;, <b>-i</b> &lt;<u>mode</u>&gt;
              This  option  sets  the  list  of  events which will cause the MBR to display it's prompt.  Use -i
              +&lt;event&gt; to add an event to the list or -i -&lt;event&gt; to remove an event from the list.   Values  of
              &lt;event&gt; are:

              <b>s</b>      A shift or control key is pressed.

              <b>k</b>      A non shift-like key is pressed

              <b>a</b>      The prompt is always displayed.

              <b>n</b>      Never display the prompt (unless an error occurs).

       <b>-p</b> &lt;<u>partn</u>&gt;, <b>--partition</b> &lt;<u>partn</u>&gt;
              This specifies the default boot sector to load.  Valid values of &lt;<u>partn</u>&gt; are:

              <b>1</b>, <b>2</b>, <b>3</b>, <b>4</b>
                     The specified partition number.

              <b>F</b>      The first floppy disk.

              <b>D</b>      The partition marked with the bootable flag in the partition table.

       <b>-t</b> &lt;<u>timeout</u>&gt;, <b>--timeout</b> &lt;<u>timeout</u>&gt;
              This  option  changes the time which the MBR waits for before booting the default partition to the
              value specified in 1/18 seconds (approx).  The maximum timeout that  can  be  specified  is  65534
              which is about an hour.

</pre><h4><b>EXAMPLES</b></h4><pre>
       <b>install-mbr</b> <b>/dev/fd0</b> <b>-T</b> <b>/dev/hda</b>

       Install the default MBR image on <b>/dev/fd0</b>, taking the partition table from <b>/dev/hda</b>.

       <b>install-mbr</b> <b>-kr</b> <b>/dev/hda</b>

       Reset the parameters on <b>/dev/hda</b> without installing any new code.

       <b>install-mbr</b> <b>-I</b> <b>my-mbr</b> <b>-T</b> <b>/dev/hda</b> <b>-P</b> <b>my-parameters</b> <b>/dev/fd0</b>

       Install  to  <b>/dev/fd0</b>,  taking  code  from  <b>my-mbr</b>,  partition  table  from  <b>/dev/hda</b> and parameters from
       my-parameters.

       <b>install-mbr</b> <b>-l</b> <b>-o</b> <b>128</b> <b>hdimage</b>

       List the parameters stored at offset 128 in <b>hdimage</b> (may be a DOSEMU image).

       <b>install-mbr</b> <b>-d</b> <b>0x81</b> <b>-T</b> <b>/dev/hdb</b> <b>/dev/fd0</b>

       Install on <b>/dev/fd0</b> to boot from BIOS drive 129 (0x81) with partition table copied from <b>/dev/hdb</b>.

       <b>install-mbr</b> <b>-e</b> <b>13</b> <b>/dev/hda</b>

       <b>install-mbr</b> <b>-e</b> <b>2</b> <b>-e</b> <b>=13</b> <b>/dev/hda</b>

       <b>install-mbr</b> <b>-e1</b> <b>-e3</b> <b>/dev/hda</b>

       Enable booting from partitions 1 and 3 on <b>/dev/hda</b>.  Other locations are disabled.

       <b>install-mbr</b> <b>-e</b> <b>+f-a</b> <b>-i</b> <b>sk</b> <b>/dev/hda</b>

       Enabled booting from the floppy drive, and disable advanced mode.   Display  the  prompt  if  any  shift,
       control or non shift-like key is pressed.  Other settings are untouched.

</pre><h4><b>DIAGNOSTICS</b></h4><pre>
       <b>Cannot</b> <b>handle</b> <b>MBR</b> <b>version</b> <b>n</b> <b>(backwards</b> <b>compatible</b> <b>to</b> <b>n)</b>

              This  error  means  that  the  version  of MBR which is being installed is not known about by this
              installer.  Such files cannot have their parameters read or written.  If such a newer  version  is
              installed, it can be downgraded by specifying the <b>--reset</b> option (without specifying <b>--keep</b>).

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man8/grub.8.html">grub</a></b>(8), <b><a href="../man8/lilo.8.html">lilo</a></b>(8)

</pre><h4><b>BUGS</b></h4><pre>
       The operation of <b>--list</b> may be confusing.

</pre><h4><b>AUTHOR</b></h4><pre>
       <b>install-mbr</b> was written for the Debian project by Neil Turton &lt;neilt+<a href="mailto:mbr@chiark.greenend.org.uk">mbr@chiark.greenend.org.uk</a>&gt;.

Linux                                             16 April 2006                                   <u><a href="../man8/INSTALL-MBR.8.html">INSTALL-MBR</a></u>(8)
</pre>
 </div>
</div></section>
</div>
</body>
</html>