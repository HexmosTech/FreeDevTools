<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>sg_timestamp - report or set timestamp on SCSI device</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/sg3-utils">sg3-utils_1.48-2ubuntu1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       sg_timestamp - report or set timestamp on SCSI device

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>sg_timestamp</b>   [<u>--elapsed</u>]  [<u>--help</u>]  [<u>--hex</u>]  [<u>--milliseconds=MS</u>]  [<u>--no-timestamp</u>]  [<u>--origin</u>]  [<u>--raw</u>]
       [<u>--readonly</u>] [<u>--seconds=SECS</u>] [<u>--srep</u>] [<u>--verbose</u>] [<u>--version</u>] <u>DEVICE</u>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       Sends a SCSI REPORT TIMESTAMP or SET TIMESTAMP command to the <u>DEVICE</u>.  These commands are  found  in  the
       SPC-5 draft standard revision 7 (spc5r07.pdf).

       If  either the <u>--milliseconds=MS</u> or <u>--seconds=SECS</u> option is given (and both can't be given) then the SET
       TIMESTAMP command is sent; otherwise the REPORT TIMESTAMP command is sent.

       The timestamp is sent and received from the <u>DEVICE</u> as the number  of  milliseconds  since  the  epoch  of
       1970-01-01  00:00:00  UTC  and  is  held  in  a  48 bit unsigned integer. That same epoch is used by Unix
       machines, but they usually hold the number of seconds  since  that  epoch.  The  Unix  date  command  and
       especially  its  "+%s"  format  is  useful in converting to and from timestamps and more humanly readable
       forms. See the EXAMPLES section below.

       A companion utility called sg_sat_datetime with similar options is available to access or  set  the  date
       and  time  in an ATA device (typically a SATA disk).  sg_sat_datetime issues ATA commands via the SCSI to
       ATA Translation (SAT) layer.

</pre><h4><b>OPTIONS</b></h4><pre>
       Arguments to long options are mandatory for short options as well.

       <b>-e</b>, <b>--elapsed</b>
              assume the timestamp in the REPORT TIMESTAMP is an elapsed time from an  event  such  as  a  power
              cycle  or  hard reset and format the output as '&lt;n&gt; days hh:mm:ss.xxx' where hh is hours (00 to 23
              inclusive); mm is minutes (00 to 59 inclusive); ss is seconds (00 to  59  inclusive)  and  xxx  is
              milliseconds (000 to 999 inclusive). If the number of days is 0 then '0 days' is not output unless
              this option is given two or more times.

       <b>-h</b>, <b>--help</b>
              output the usage message then exit.

       <b>-H</b>, <b>--hex</b>
              output  the  response  to  REPORT  TIMESTAMP  in  ASCII hexadecimal on stderr. The response is not
              decoded.

       <b>-m</b>, <b>--milliseconds</b>=<u>MS</u>
              where <u>MS</u> is the number of milliseconds since 1970-01-01 00:00:00 UTC to set in the <u>DEVICE</u> with the
              SCSI SET TIMESTAMP command.

       <b>-N</b>, <b>--no-timestamp</b>
              when REPORT TIMESTAMP is called this option suppress the output of the timestamp value (in  either
              seconds  or milliseconds). This may be useful in uncluttering the output when trying to decode the
              timestamp origin (see the <u>--origin</u> option).

       <b>-o</b>, <b>--origin</b>
              the REPORT TIMESTAMP returned parameter data contains a "timestamp origin" field. When this option
              is given, that field is decoded and printed out before the timestamp value is output. The  default
              action (i.e. when the option is not given) is not to print out this decoded field.
              T10  defines this field as "the most recent event that initialized the returned device clock". The
              value 0 indicates a power up of hard reset initialized the clock;  2  indicates  a  SET  TIMESTAMP
              initialized the clock while 3 indicates some other method initialized the clock.
              When  used  once  a descriptive string is output (in a line before the timestamp value). When used
              twice the value of the TIMESTAMP ORIGIN field is output (in decimal,  a  value  between  0  and  7
              inclusive). When used thrice a line of the form 'TIMESTAMP_ORIGIN=&lt;value&gt;' is output.

       <b>-r</b>, <b>--raw</b>
              output  the  SCSI REPORT TIMESTAMP response (i.e. the data-out buffer) in binary (to stdout). Note
              that the <u>--origin</u> and <u>--srep</u> options are ignored when this option is given.  Also  all  error  and
              verbose messages are output to stderr.

       <b>-R</b>, <b>--readonly</b>
              open the <u>DEVICE</u> read-only. The default action is to open the <u>DEVICE</u> read-write.

       <b>-s</b>, <b>--seconds</b>=<u>SECS</u>
              where  <u>SECS</u>  is  the number of seconds since 1970-01-01 00:00:00 UTC to set in the <u>DEVICE</u> with the
              SCSI SET TIMESTAMP command. <u>SECS</u> is multiplied by 1000 before being  used  in  the  SET  TIMESTAMP
              command.

       <b>-S</b>, <b>--srep</b>
              report  the  number of seconds since 1970-01-01 00:00:00 UTC. This is done by dividing by 1000 the
              value returned by the SCSI REPORT TIMESTAMP command.

       <b>-v</b>, <b>--verbose</b>
              increase the level of verbosity, (i.e. debug output).

       <b>-V</b>, <b>--version</b>
              print the version string and then exit.

</pre><h4><b>EXIT</b> <b>STATUS</b></h4><pre>
       The exit status of sg_timestamp is 0 when it is successful. Otherwise see the <a href="../man8/sg3_utils.8.html">sg3_utils</a>(8) man page.

</pre><h4><b>NOTES</b></h4><pre>
       The TCMOS and the SCSIP bits in the Control extension mode page (see sdparm) modify the  actions  of  the
       timestamp held by a <u>DEVICE</u>.

       Currently  only the "Utilization usage rate based on date and time" parameters within the Utilization log
       page (sbc4r09.pdf) use timestamps. See the sg_logs utility. Vendor specific commands and pages  may  also
       be using timestamps.

</pre><h4><b>EXAMPLES</b></h4><pre>
       On  Unix  machines  (e.g.  Linux,  FreeBSD  and  Solaris)  the  date  command is useful when working with
       timestamps.

       To fetch the timestamp from a <u>DEVICE</u> and display it in a humanly readable form  the  following  could  be
       used:

          # sg_timestamp -S /dev/sdb
          1448993950
          # date --date=@1448993950
          Tue Dec  1 13:19:10 EST 2015
          # date -R --date="@1448993950"
          Tue, 01 Dec 2015 13:19:10 -0500

       The  latter  two  date  commands  show  different  forms of the same date (i.e.  1448993950 seconds since
       1970-01-01 00:00:00 UTC). The sg_timestamp and date commands can be combined using backquotes:

          # date -R --date=@`sg_timestamp -S /dev/sdc`
          Wed, 16 Dec 2015 20:12:59 -0500

       To set the timestamp on the <u>DEVICE</u> to now (approximately) the following could be used:

          # date +%s
          1448993955
          # sg_timestamp --seconds=1448993955 /dev/sdb

       Those two command lines could be combined into one by using backquotes:

          # sg_timestamp --seconds=`date +%s` /dev/sdb

</pre><h4><b>AUTHORS</b></h4><pre>
       Written by Douglas Gilbert.

</pre><h4><b>REPORTING</b> <b>BUGS</b></h4><pre>
       Report bugs to &lt;dgilbert at interlog dot com&gt;.

</pre><h4><b>COPYRIGHT</b></h4><pre>
       Copyright Â© 2015-2018 Douglas Gilbert
       This software is  distributed  under  a  BSD-2-Clause  license.  There  is  NO  warranty;  not  even  for
       MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b>sdparm(sdparm),</b> <b>sg_logs(sg3_utils),</b> <b>sg_sat_datetime(sg3_utils)</b>

sg3_utils-1.43                                     April 2018                                    <u><a href="../man8/SG_TIMESTAMP.8.html">SG_TIMESTAMP</a></u>(8)
</pre>
 </div>
</div></section>
</div>
</body>
</html>