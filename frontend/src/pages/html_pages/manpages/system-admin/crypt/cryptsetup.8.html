<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>cryptsetup - manage plain dm-crypt, LUKS, and other encrypted volumes</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/cryptsetup-bin">cryptsetup-bin_2.8.0-1ubuntu1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       cryptsetup - manage plain dm-crypt, LUKS, and other encrypted volumes

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>cryptsetup</b> <b>&lt;action&gt;</b> <b>[&lt;options&gt;]</b> <b>&lt;action</b> <b>args&gt;</b>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       cryptsetup is used to conveniently setup dm-crypt managed device-mapper mappings. These include plain
       dm-crypt volumes and LUKS volumes. The difference is that LUKS uses a metadata header and can hence offer
       more features than plain dm-crypt. On the other hand, the header is visible and vulnerable to damage.

       In addition, cryptsetup provides limited support for the use of loop-AES volumes, TrueCrypt, VeraCrypt,
       BitLocker and FileVault2 compatible volumes, and for hardware-based encryption on OPAL capable drives.

       For more information about specific cryptsetup action see <b>cryptsetup-&lt;action&gt;</b>(8), where <b>&lt;action&gt;</b> is the
       name of the cryptsetup action.

</pre><h4><b>BASIC</b> <b>ACTIONS</b></h4><pre>
       The following are valid actions for all supported device types.

   <b>OPEN</b>
       <b>open</b> <b>&lt;device&gt;</b> <b>&lt;name&gt;</b> <b>--type</b> <b>&lt;device_type&gt;</b>

       Opens (creates a mapping with) &lt;name&gt; backed by device &lt;device&gt;.
       See <b><a href="../man8/cryptsetup-open.8.html">cryptsetup-open</a></b>(8).

   <b>CLOSE</b>
       <b>close</b> <b>&lt;name&gt;</b>

       Removes the existing mapping &lt;name&gt; and wipes the key from kernel memory.
       See <b><a href="../man8/cryptsetup-close.8.html">cryptsetup-close</a></b>(8).

   <b>STATUS</b>
       <b>status</b> <b>&lt;name&gt;</b>

       Reports the status for the mapping &lt;name&gt;.
       See <b><a href="../man8/cryptsetup-status.8.html">cryptsetup-status</a></b>(8).

   <b>RESIZE</b>
       <b>resize</b> <b>&lt;name&gt;</b>

       Resizes an active mapping &lt;name&gt;.
       See <b><a href="../man8/cryptsetup-resize.8.html">cryptsetup-resize</a></b>(8).

   <b>REFRESH</b>
       <b>refresh</b> <b>&lt;name&gt;</b>

       Refreshes parameters of active mapping &lt;name&gt;.
       See <b><a href="../man8/cryptsetup-refresh.8.html">cryptsetup-refresh</a></b>(8).

   <b>REENCRYPT</b>
       <b>reencrypt</b> <b>&lt;device&gt;</b> <b>or</b> <b>--active-name</b> <b>&lt;name&gt;</b> <b>[&lt;new_name&gt;]</b>

       Run LUKS device reencryption.
       See <b><a href="../man8/cryptsetup-reencrypt.8.html">cryptsetup-reencrypt</a></b>(8).

</pre><h4><b>PLAIN</b> <b>MODE</b></h4><pre>
       Plain dm-crypt encrypts the device sector-by-sector with a single, non-salted hash of the passphrase. No
       checks are performed, no metadata is used. There is no formatting operation. When the raw device is
       mapped (opened), the usual device operations can be used on the mapped device, including filesystem
       creation. Mapped devices usually reside in <a href="file:/dev/mapper/">/dev/mapper/</a>&lt;name&gt;.

       The following are valid plain device type actions:

   <b>OPEN</b>
       <b>open</b> <b>--type</b> <b>plain</b> <b>&lt;device&gt;</b> <b>&lt;name&gt;</b>
       create &lt;name&gt; &lt;device&gt; (<b>OBSOLETE</b> <b>syntax</b>)

       Opens (creates a mapping with) &lt;name&gt; backed by device &lt;device&gt;.
       See <b><a href="../man8/cryptsetup-open.8.html">cryptsetup-open</a></b>(8).

</pre><h4><b>LUKS</b> <b>EXTENSION</b></h4><pre>
       LUKS, the Linux Unified Key Setup, is a standard for disk encryption. It adds a standardized header at
       the start of the device, a key-slot area directly behind the header and the bulk data area behind that.
       The whole set is called a 'LUKS container'. The device that a LUKS container resides on is called a 'LUKS
       device'. For most purposes, both terms can be used interchangeably. But note that when the LUKS header is
       at a nonzero offset in a device, then the device is not a LUKS device anymore, but has a LUKS container
       stored in it at an offset.

       LUKS can manage multiple passphrases that can be individually revoked or changed and that can be securely
       scrubbed from persistent media due to the use of anti-forensic stripes. Passphrases are protected against
       brute-force and dictionary attacks by Password-Based Key Derivation Function (PBKDF).

       LUKS2 is a new version of header format that allows additional extensions like different PBKDF algorithm
       or authenticated encryption. You can format device with LUKS2 header if you specify <b>--type</b> <b>luks2</b> in
       <b>luksFormat</b> command. For activation, the format is already recognized automatically.

       Each passphrase, also called a <b>key</b> in this document, is associated with one of 8 key-slots. Key
       operations that do not specify a slot affect the first slot that matches the supplied passphrase or the
       first empty slot if a new passphrase is added.

       The <b>&lt;device&gt;</b> parameter can also be specified by a LUKS UUID in the format UUID=&lt;uuid&gt;. Translation to
       real device name uses symlinks in <a href="file:/dev/disk/by-uuid">/dev/disk/by-uuid</a> directory.

       To specify a detached header, the <b>--header</b> parameter can be used in all LUKS commands and always takes
       precedence over the positional <b>&lt;device&gt;</b> parameter.

       The following are valid LUKS actions:

   <b>FORMAT</b>
       <b>luksFormat</b> <b>&lt;device&gt;</b> <b>[&lt;key</b> <b>file&gt;]</b>

       Initializes a LUKS partition and sets the initial passphrase (for key-slot 0).
       See <b><a href="../man8/cryptsetup-luksFormat.8.html">cryptsetup-luksFormat</a></b>(8).

   <b>OPEN</b>
       <b>open</b> <b>--type</b> <b>luks</b> <b>&lt;device&gt;</b> <b>&lt;name&gt;</b>
       luksOpen &lt;device&gt; &lt;name&gt; (<b>old</b> <b>syntax</b>)

       Opens the LUKS device &lt;device&gt; and sets up a mapping &lt;name&gt; after successful verification of the supplied
       passphrase.
       See <b><a href="../man8/cryptsetup-open.8.html">cryptsetup-open</a></b>(8).

   <b>SUSPEND</b>
       <b>luksSuspend</b> <b>&lt;name&gt;</b>

       Suspends an active device (all IO operations will block and accesses to the device will wait
       indefinitely) and wipes the encryption key from kernel memory.
       See <b><a href="../man8/cryptsetup-luksSuspend.8.html">cryptsetup-luksSuspend</a></b>(8).

   <b>RESUME</b>
       <b>luksResume</b> <b>&lt;name&gt;</b>

       Resumes a suspended device and reinstates the encryption key.
       See <b><a href="../man8/cryptsetup-luksResume.8.html">cryptsetup-luksResume</a></b>(8).

   <b>ADD</b> <b>KEY</b>
       <b>luksAddKey</b> <b>&lt;device&gt;</b> <b>[&lt;key</b> <b>file</b> <b>with</b> <b>new</b> <b>key&gt;]</b>

       Adds a new passphrase using an existing passphrase.
       See <b><a href="../man8/cryptsetup-luksAddKey.8.html">cryptsetup-luksAddKey</a></b>(8).

   <b>REMOVE</b> <b>KEY</b>
       <b>luksRemoveKey</b> <b>&lt;device&gt;</b> <b>[&lt;key</b> <b>file</b> <b>with</b> <b>passphrase</b> <b>to</b> <b>be</b> <b>removed&gt;]</b>

       Removes the supplied passphrase from the LUKS device.
       See <b><a href="../man8/cryptsetup-luksRemoveKey.8.html">cryptsetup-luksRemoveKey</a></b>(8).

   <b>CHANGE</b> <b>KEY</b>
       <b>luksChangeKey</b> <b>&lt;device&gt;</b> <b>[&lt;new</b> <b>key</b> <b>file&gt;]</b>

       Changes an existing passphrase.
       See <b><a href="../man8/cryptsetup-luksChangeKey.8.html">cryptsetup-luksChangeKey</a></b>(8).

   <b>CONVERT</b> <b>KEY</b>
       <b>luksConvertKey</b> <b>&lt;device&gt;</b>

       Converts an existing LUKS2 keyslot to new PBKDF parameters.
       See <b><a href="../man8/cryptsetup-luksConvertKey.8.html">cryptsetup-luksConvertKey</a></b>(8).

   <b>KILL</b> <b>SLOT</b>
       <b>luksKillSlot</b> <b>&lt;device&gt;</b> <b>&lt;key</b> <b>slot</b> <b>number&gt;</b>

       Wipe the key-slot number &lt;key slot&gt; from the LUKS device.
       See <b><a href="../man8/cryptsetup-luksKillSlot.8.html">cryptsetup-luksKillSlot</a></b>(8).

   <b>ERASE</b>
       <b>erase</b> <b>&lt;device&gt;</b>
       luksErase &lt;device&gt; (<b>old</b> <b>syntax</b>)

       Erase all keyslots and make the LUKS container permanently inaccessible.
       See <b><a href="../man8/cryptsetup-erase.8.html">cryptsetup-erase</a></b>(8).

   <b>UUID</b>
       <b>luksUUID</b> <b>&lt;device&gt;</b>

       Print or set the UUID of a LUKS device.
       See <b><a href="../man8/cryptsetup-luksUUID.8.html">cryptsetup-luksUUID</a></b>(8).

   <b>IS</b> <b>LUKS</b>
       <b>isLuks</b> <b>&lt;device&gt;</b>

       Returns true, if &lt;device&gt; is a LUKS device, false otherwise.
       See <b><a href="../man8/cryptsetup-isLuks.8.html">cryptsetup-isLuks</a></b>(8).

   <b>DUMP</b>
       <b>luksDump</b> <b>&lt;device&gt;</b>

       Dump the header information of a LUKS device.
       See <b><a href="../man8/cryptsetup-luksDump.8.html">cryptsetup-luksDump</a></b>(8).

   <b>HEADER</b> <b>BACKUP</b>
       <b>luksHeaderBackup</b> <b>&lt;device&gt;</b> <b>--header-backup-file</b> <b>&lt;file&gt;</b>

       Stores a binary backup of the LUKS header and keyslot area.
       See <b><a href="../man8/cryptsetup-luksHeaderBackup.8.html">cryptsetup-luksHeaderBackup</a></b>(8).

   <b>HEADER</b> <b>RESTORE</b>
       <b>luksHeaderRestore</b> <b>&lt;device&gt;</b> <b>--header-backup-file</b> <b>&lt;file&gt;</b>

       Restores a binary backup of the LUKS header and keyslot area from the specified file.
       See <b><a href="../man8/cryptsetup-luksHeaderRestore.8.html">cryptsetup-luksHeaderRestore</a></b>(8).

   <b>TOKEN</b>
       <b>token</b> <b>&lt;add|remove|import|export&gt;</b> <b>&lt;device&gt;</b>

       Manipulate token objects used for obtaining passphrases.
       See <b><a href="../man8/cryptsetup-token.8.html">cryptsetup-token</a></b>(8).

   <b>CONVERT</b>
       <b>convert</b> <b>&lt;device&gt;</b> <b>--type</b> <b>&lt;format&gt;</b>

       Converts the device between LUKS1 and LUKS2 format (if possible).
       See <b><a href="../man8/cryptsetup-convert.8.html">cryptsetup-convert</a></b>(8).

   <b>CONFIG</b>
       <b>config</b> <b>&lt;device&gt;</b>

       Set permanent configuration options (store to LUKS header).
       See <b><a href="../man8/cryptsetup-config.8.html">cryptsetup-config</a></b>(8).

</pre><h4><b>LOOP-AES</b> <b>EXTENSION</b></h4><pre>
       cryptsetup supports mapping loop-AES encrypted partition using a compatibility mode.

   <b>OPEN</b>
       <b>open</b> <b>--type</b> <b>loopaes</b> <b>&lt;device&gt;</b> <b>&lt;name&gt;</b> <b>--key-file</b> <b>&lt;keyfile&gt;</b>
       loopaesOpen &lt;device&gt; &lt;name&gt; --key-file &lt;keyfile&gt; (<b>old</b> <b>syntax</b>)

       Opens the loop-AES &lt;device&gt; and sets up a mapping &lt;name&gt;.
       See <b><a href="../man8/cryptsetup-open.8.html">cryptsetup-open</a></b>(8).

       See also section 7 of the FAQ and loop-AES &lt;<a href="http://loop-aes.sourceforge.net">http://loop-aes.sourceforge.net</a>&gt; for more information
       regarding loop-AES.

</pre><h4><b>TCRYPT</b> <b>(TRUECRYPT</b> <b>AND</b> <b>VERACRYPT</b> <b>COMPATIBLE)</b> <b>EXTENSION</b></h4><pre>
       cryptsetup supports mapping of TrueCrypt, tcplay or VeraCrypt encrypted partition using a native Linux
       kernel API. Header formatting and TCRYPT header change is not supported, cryptsetup never changes TCRYPT
       header on-device.

       TCRYPT extension requires kernel userspace crypto API to be available (introduced in Linux kernel
       2.6.38). If you are configuring kernel yourself, enable "User-space interface for symmetric key cipher
       algorithms" in "Cryptographic API" section (CRYPTO_USER_API_SKCIPHER .config option).

       Because TCRYPT header is encrypted, you have to always provide valid passphrase and keyfiles.

       Cryptsetup should recognize all header variants, except legacy cipher chains using LRW encryption mode
       with 64 bits encryption block (namely Blowfish in LRW mode is not recognized, this is limitation of
       kernel crypto API).

       VeraCrypt is extension of TrueCrypt header with increased iteration count so unlocking can take quite a
       lot of time.

       To open a VeraCrypt device with a custom Personal Iteration Multiplier (PIM) value, use either the
       <b>--veracrypt-pim=&lt;PIM&gt;</b> option to directly specify the PIM on the command- line or use
       <b>--veracrypt-query-pim</b> to be prompted for the PIM.

       The PIM value affects the number of iterations applied during key derivation. Please refer to PIM
       &lt;https://www.veracrypt.fr/en/Personal%20Iterations%20Multiplier%20%28PIM%29.html&gt; for more detailed
       information.

       If you need to disable VeraCrypt device support, use <b>--disable-veracrypt</b> option.

       <b>NOTE:</b> Activation with <b>tcryptOpen</b> is supported only for cipher chains using LRW or XTS encryption modes.

       The <b>tcryptDump</b> command should work for all recognized TCRYPT devices and doesn’t require superuser
       privilege.

       To map system device (device with boot loader where the whole encrypted system resides) use
       <b>--tcrypt-system</b> option. Please read specific info in <b><a href="../man8/cryptsetup-tcryptOpen.8.html">cryptsetup-tcryptOpen</a></b>(8) <b>--tcrypt-system</b> option
       section as mapping system-encrypted device is tricky.

       To use hidden header (and map hidden device, if available), use <b>--tcrypt-hidden</b> option.

       To explicitly use backup (secondary) header, use <b>--tcrypt-backup</b> option.

       <b>NOTE:</b> There is no protection for a hidden volume if the outer volume is mounted. The reason is that if
       there were any protection, it would require some metadata describing what to protect in the outer volume
       and the hidden volume would become detectable.

   <b>OPEN</b>
       <b>open</b> <b>--type</b> <b>tcrypt</b> <b>&lt;device&gt;</b> <b>&lt;name&gt;</b>
       tcryptOpen_ &lt;device&gt; &lt;name&gt; (<b>old</b> <b>syntax</b>)

       Opens the TCRYPT (a TrueCrypt-compatible) &lt;device&gt; and sets up a mapping &lt;name&gt;.
       See <b><a href="../man8/cryptsetup-open.8.html">cryptsetup-open</a></b>(8).

   <b>DUMP</b>
       <b>tcryptDump</b> <b>&lt;device&gt;</b>

       Dump the header information of a TCRYPT device.
       See <b><a href="../man8/cryptsetup-tcryptDump.8.html">cryptsetup-tcryptDump</a></b>(8).

       See also <b>TrueCrypt</b> &lt;https://en.wikipedia.org/wiki/TrueCrypt&gt; and <b>VeraCrypt</b>
       &lt;https://en.wikipedia.org/wiki/VeraCrypt&gt; pages for more information.

       Please note that cryptsetup does not use TrueCrypt or VeraCrypt code, please report all problems related
       to this compatibility extension to the cryptsetup project.

</pre><h4><b>BITLK</b> <b>(WINDOWS</b> <b>BITLOCKER</b> <b>COMPATIBLE)</b> <b>EXTENSION</b></h4><pre>
       cryptsetup supports mapping of BitLocker and BitLocker to Go encrypted partition using a native Linux
       kernel API. Header formatting and BITLK header changes are not supported, cryptsetup never changes BITLK
       header on-device.

       BITLK extension requires kernel userspace crypto API to be available (for details see TCRYPT section).

       Cryptsetup should recognize all BITLK header variants, except legacy header used in Windows Vista systems
       and partially decrypted BitLocker devices. Activation of legacy devices encrypted in CBC mode requires at
       least Linux kernel version 5.3 and for devices using Elephant diffuser kernel 5.6.

       The <b>bitlkDump</b> command should work for all recognized BITLK devices and doesn’t require superuser
       privilege.

       For unlocking with the <b>open</b> a password or a recovery passphrase or a startup key must be provided.

       Additionally unlocking using volume key is supported. You must provide BitLocker Full Volume Encryption
       Key (FVEK) using the --volume-key-file option. The key must be decrypted and without the header (only
       128/256/512 bits of key data depending on used cipher and mode).

       Other unlocking methods (TPM, SmartCard) are not supported.

   <b>OPEN</b>
       <b>open</b> <b>--type</b> <b>bitlk</b> <b>&lt;device&gt;</b> <b>&lt;name&gt;</b>
       bitlkOpen &lt;device&gt; &lt;name&gt; (<b>old</b> <b>syntax</b>)

       Opens the BITLK (a BitLocker-compatible) &lt;device&gt; and sets up a mapping &lt;name&gt;.
       See <b><a href="../man8/cryptsetup-open.8.html">cryptsetup-open</a></b>(8).

   <b>DUMP</b>
       <b>bitlkDump</b> <b>&lt;device&gt;</b>

       Dump the header information of a BITLK device.
       See <b><a href="../man8/cryptsetup-bitlkDump.8.html">cryptsetup-bitlkDump</a></b>(8).

       Please note that cryptsetup does not use any Windows BitLocker code, please report all problems related
       to this compatibility extension to the cryptsetup project.

</pre><h4><b>FVAULT2</b> <b>(APPLE</b> <b>MACOS</b> <b>FILEVAULT2</b> <b>COMPATIBLE)</b> <b>EXTENSION</b></h4><pre>
       cryptsetup supports the mapping of FileVault2 (FileVault2 full-disk encryption) by Apple for the macOS
       operating system using a native Linux kernel API.

       <b>NOTE:</b> cryptsetup supports only FileVault2 based on Core Storage and HFS+ filesystem (introduced in MacOS
       X 10.7 Lion). It does NOT support the new version of FileVault based on the APFS filesystem used in
       recent macOS versions.

       Header formatting and FVAULT2 header changes are not supported; cryptsetup never changes the FVAULT2
       header on-device.

       FVAULT2 extension requires kernel userspace crypto API to be available (for details, see TCRYPT section)
       and kernel driver for HFS+ (hfsplus) filesystem.

       Cryptsetup should recognize the basic configuration for portable drives.

       The <b>fvault2Dump</b> command should work for all recognized FVAULT2 devices and doesn’t require superuser
       privilege.

       For unlocking with the <b>open</b>, a password must be provided. Other unlocking methods are not supported.

   <b>OPEN</b>
       <b>open</b> <b>--type</b> <b>fvault2</b> <b>&lt;device&gt;</b> <b>&lt;name&gt;</b>
       fvault2Open &lt;device&gt; &lt;name&gt; (<b>old</b> <b>syntax</b>)

       Opens the FVAULT2 (a FileVault2-compatible) &lt;device&gt; (usually the second partition on the device) and
       sets up a mapping &lt;name&gt;.
       See <b><a href="../man8/cryptsetup-open.8.html">cryptsetup-open</a></b>(8).

</pre><h4><b>SED</b> <b>(SELF</b> <b>ENCRYPTING</b> <b>DRIVE)</b> <b>OPAL</b> <b>EXTENSION</b></h4><pre>
       cryptsetup supports using native hardware encryption on drives that provide an <b>OPAL</b> interface, both
       nested with <b>dm-crypt</b> and standalone. Passphrases, tokens and metadata are stored using the LUKS2 header
       format, and are thus compatible with any software or system that uses LUKS2 (e.g.: tokens).

       <b>WARNING:</b> this support is new and experimental, and requires at least kernel v6.4. Resizing devices is not
       supported.

       <b>--hw-opal</b> can be specified for OPAL + dm-crypt, and <b>--hw-opal-only</b> can be specified to use OPAL only,
       without a dm-crypt layer.

       Opening, closing and enrolling tokens work in the same way as with LUKS2 and dm-crypt. The new parameters
       are only necessary when formatting, the LUKS2 metadata will ensure the right setup is performed when
       opening or closing. If no <b>subsystem</b> is specified, it will be automatically set to <b>HW-OPAL</b> so that it is
       immediately apparent when a device uses OPAL.

   <b>FORMAT</b>
       <b>luksFormat</b> <b>--type</b> <b>luks2</b> <b>--hw-opal</b> <b>&lt;device&gt;</b> <b>[&lt;key</b> <b>file&gt;]</b>

       Additionally specify <b>--hw-opal-only</b> instead of <b>--hw-opal</b> to avoid the dm-crypt layer. Other than the
       usual passphrase, an admin password will have to be specified when formatting the first partition of the
       drive, and will have to be re-supplied when formatting any other partition until a factory reset is
       performed.

   <b>ERASE</b>
       <b>erase</b> <b>&lt;device&gt;</b>

       Securely erase a partition or device. Requires admin password. Additionally specify
       <b>--hw-opal-factory-reset</b> for a FULL factory reset of the drive, using the drive’s <b>PSID</b> (typically printed
       on the label) instead of the admin password.

       <b>NOTE</b>: PSID must be entered without any dashes, spaces or underscores.

       <b>WARNING</b>: a factory reset will cause ALL data on the device to be lost, regardless of the partition it is
       ran on, if any, and regardless of any LUKS2 header backup.

</pre><h4><b>MISCELLANEOUS</b> <b>ACTIONS</b></h4><pre>
   <b>REPAIR</b>
       <b>repair</b> <b>&lt;device&gt;</b>

       Tries to repair the device metadata if possible. Currently supported only for LUKS device type.
       See <b><a href="../man8/cryptsetup-repair.8.html">cryptsetup-repair</a></b>(8).

   <b>BENCHMARK</b>
       <b>benchmark</b> <b>&lt;options&gt;</b>

       Benchmarks ciphers and KDF (key derivation function).
       See <b><a href="../man8/cryptsetup-benchmark.8.html">cryptsetup-benchmark</a></b>(8).

</pre><h4><b>PLAIN</b> <b>DM-CRYPT</b> <b>OR</b> <b>LUKS?</b></h4><pre>
       Unless you understand the cryptographic background well, use LUKS. With plain dm-crypt there are a number
       of possible user errors that massively decrease security. While LUKS cannot fix them all, it can lessen
       the impact for many of them.

</pre><h4><b>WARNINGS</b></h4><pre>
       A lot of good information on the risks of using encrypted storage, on handling problems and on security
       aspects can be found in the Cryptsetup FAQ. Read it. Nonetheless, some risks deserve to be mentioned
       here.

       <b>Backup:</b> Storage media die. Encryption has no influence on that. Backup is mandatory for encrypted data as
       well, if the data has any worth. See the Cryptsetup FAQ for advice on how to do a backup of an encrypted
       volume.

       <b>Character</b> <b>encoding:</b> If you enter a passphrase with special symbols, the passphrase can change depending
       on character encoding. Keyboard settings can also change, which can make blind input hard or impossible.
       For example, switching from some ASCII 8-bit variant to UTF-8 can lead to a different binary encoding and
       hence different passphrase seen by cryptsetup, even if what you see on the terminal is exactly the same.
       It is therefore highly recommended to select passphrase characters only from 7-bit ASCII, as the encoding
       for 7-bit ASCII stays the same for all ASCII variants and UTF-8.

       <b>LUKS</b> <b>header:</b> If the header of a LUKS volume gets damaged, all data is permanently lost unless you have a
       header-backup. If a key-slot is damaged, it can only be restored from a header-backup or if another
       active key-slot with known passphrase is undamaged. Damaging the LUKS header is something people manage
       to do with surprising frequency. This risk is the result of a trade-off between security and safety, as
       LUKS is designed for fast and secure wiping by just overwriting header and key-slot area.

       <b>Previously</b> <b>used</b> <b>partitions:</b> If a partition was previously used, it is a very good idea to wipe filesystem
       signatures, data, etc. before creating a LUKS or plain dm-crypt container on it. For a quick removal of
       filesystem signatures, use <b><a href="../man8/wipefs.8.html">wipefs</a></b>(8). Take care though that this may not remove everything. In
       particular, MD RAID signatures at the end of a device may survive. It also does not remove data. For a
       full wipe, overwrite the whole partition before container creation. If you do not know how to do that,
       the cryptsetup FAQ describes several options.

</pre><h4><b>EXAMPLES</b></h4><pre>
       Example 1: Create LUKS 2 container on block device /dev/sdX.
           sudo cryptsetup --type luks2 luksFormat /dev/sdX

       Example 2: Add an additional passphrase to key slot 5.
           sudo cryptsetup luksAddKey --key-slot 5 /dev/sdX

       Example 3: Create LUKS header backup and save it to file.
           sudo cryptsetup luksHeaderBackup /dev/sdX --header-backup-file /var/tmp/NameOfBackupFile

       Example 4: Open LUKS container on /dev/sdX and map it to sdX_crypt.
           sudo cryptsetup open /dev/sdX sdX_crypt

       <b>WARNING:</b> <b>The</b> <b>command</b> <b>in</b> <b>example</b> <b>5</b> <b>will</b> <b>erase</b> <b>all</b> <b>key</b> <b>slots.</b>
           Your cannot use your LUKS container afterward anymore unless you have a backup to restore.

       Example 5: Erase all key slots on /dev/sdX.
           sudo cryptsetup erase /dev/sdX

       Example 6: Restore LUKS header from backup file.
           sudo cryptsetup luksHeaderRestore /dev/sdX --header-backup-file /var/tmp/NameOfBackupFile

</pre><h4><b>RETURN</b> <b>CODES</b></h4><pre>
       Cryptsetup returns <b>0</b> on success and a non-zero value on error.

       Error codes are: <b>1</b> wrong parameters, <b>2</b> no permission (bad passphrase), <b>3</b> out of memory, <b>4</b> wrong device
       specified, <b>5</b> device already exists or device is busy.

</pre><h4><b>NOTES</b></h4><pre>
   <b>Passphrase</b> <b>processing</b> <b>for</b> <b>PLAIN</b> <b>mode</b>
       Note that no iterated hashing or salting is done in plain mode. If hashing is done, it is a single direct
       hash. This means that low-entropy passphrases are easy to attack in plain mode.

       <b>From</b> <b>a</b> <b>terminal</b>: The passphrase is read until the first newline, i.e. '\n'. The input without the newline
       character is processed with the default hash or the hash specified with --hash. The hash result will be
       truncated to the key size of the used cipher, or the size specified with -s.

       <b>From</b> <b>stdin</b>: Reading will continue until a newline (or until the maximum input size is reached), with the
       trailing newline stripped. The maximum input size is defined by the same compiled-in default as for the
       maximum key file size and can be overwritten using --keyfile-size option.

       The data read will be hashed with the default hash or the hash specified with --hash. The hash result
       will be truncated to the key size of the used cipher, or the size specified with -s.

       Note that if --key-file=- is used for reading the key from stdin, trailing newlines are not stripped from
       the input.

       If "plain" is used as argument to --hash, the input data will not be hashed. Instead, it will be zero
       padded (if shorter than the key size) or truncated (if longer than the key size) and used directly as the
       binary key. This is useful for directly specifying a binary key. No warning will be given if the amount
       of data read from stdin is less than the key size.

       <b>From</b> <b>a</b> <b>key</b> <b>file</b>: It will be truncated to the key size of the used cipher or the size given by -s and
       directly used as a binary key.

       <b>WARNING</b>: The --hash argument is being ignored. The --hash option is usable only for stdin input in plain
       mode.

       If the key file is shorter than the key, cryptsetup will quit with an error. The maximum input size is
       defined by the same compiled-in default as for the maximum key file size and can be overwritten using
       --keyfile-size option.

   <b>Passphrase</b> <b>processing</b> <b>for</b> <b>LUKS</b>
       LUKS uses PBKDF to protect against dictionary attacks and to give some protection to low-entropy
       passphrases (see cryptsetup FAQ).

       <b>From</b> <b>a</b> <b>terminal</b>: The passphrase is read until the first newline and then processed by PBKDF2 without the
       newline character.

       <b>From</b> <b>stdin</b>: LUKS will read passphrases from stdin up to the first newline character or the compiled-in
       maximum key file length. If --keyfile-size is given, it is ignored.

       <b>From</b> <b>key</b> <b>file</b>: The complete keyfile is read up to the compiled-in maximum size. Newline characters do not
       terminate the input. The --keyfile-size option can be used to limit what is read.

       <b>Passphrase</b> <b>processing</b>: Whenever a passphrase is added to a LUKS header (luksAddKey, luksFormat), the user
       may specify how much the time the passphrase processing should consume. The time is used to determine the
       iteration count for PBKDF2 and higher times will offer better protection for low-entropy passphrases, but
       open will take longer to complete. For passphrases that have entropy higher than the used key length,
       higher iteration times will not increase security.

       The default setting of one or two seconds is sufficient for most practical cases. The only exception is a
       low-entropy passphrase used on a device with a slow CPU, as this will result in a low iteration count. On
       a slow device, it may be advisable to increase the iteration time using the --iter-time option in order
       to obtain a higher iteration count. This does slow down all later luksOpen operations accordingly.

   <b>Incoherent</b> <b>behavior</b> <b>for</b> <b>invalid</b> <b>passphrases/keys</b>
       LUKS checks for a valid passphrase when an encrypted partition is unlocked. The behavior of plain
       dm-crypt is different. It will always decrypt with the passphrase given. If the given passphrase is
       wrong, the device mapped by plain dm-crypt will essentially still contain encrypted data and will be
       unreadable.

   <b>Supported</b> <b>ciphers,</b> <b>modes,</b> <b>hashes</b> <b>and</b> <b>key</b> <b>sizes</b>
       The available combinations of ciphers, modes, hashes and key sizes depend on kernel support. See
       <a href="file:/proc/crypto">/proc/crypto</a> for a list of available options. You might need to load additional kernel crypto modules in
       order to get more options.

       For the --hash option, if the crypto backend is libgcrypt, then all algorithms supported by the gcrypt
       library are available. For other crypto backends, some algorithms may be missing.

   <b>Notes</b> <b>on</b> <b>passphrases</b>
       Mathematics can’t be bribed. Make sure you keep your passphrases safe. There are a few nice tricks for
       constructing a fallback, when suddenly out of the blue, your brain refuses to cooperate. These fallbacks
       need LUKS, as it’s only possible with LUKS to have multiple passphrases. Still, if your attacker model
       does not prevent it, storing your passphrase in a sealed envelope somewhere may be a good idea as well.

   <b>Notes</b> <b>on</b> <b>Random</b> <b>Number</b> <b>Generators</b>
       Random Number Generators (RNG) used in cryptsetup are always the kernel RNGs without any modifications or
       additions to data stream produced.

       There are two types of randomness cryptsetup/LUKS needs. One type (which always uses /dev/urandom) is
       used for salts, the AF splitter and for wiping deleted keyslots.

       The second type is used for the volume key. You can switch between using /dev/random and /dev/urandom
       here, see <b>--use-random</b> and <b>--use-urandom</b> options. Using /dev/random on a system without enough entropy
       sources can cause <b>luksFormat</b> to block until the requested amount of random data is gathered. In a
       low-entropy situation (embedded system), this can take a very long time and potentially forever. At the
       same time, using /dev/urandom in a low-entropy situation will produce low-quality keys. This is a serious
       problem, but solving it is out of scope for a mere man-page. See <b><a href="../man4/urandom.4.html">urandom</a>(4)</b> for more information.

   <b>Authenticated</b> <b>disk</b> <b>encryption</b> <b>(EXPERIMENTAL)</b>
       Since Linux kernel version 4.12 dm-crypt supports authenticated disk encryption.

       Normal disk encryption modes are length-preserving (plaintext sector is of the same size as a ciphertext
       sector) and can provide only confidentiality protection, but not cryptographically sound data integrity
       protection.

       Authenticated modes require additional space per-sector for authentication tag and use Authenticated
       Encryption with Additional Data (AEAD) algorithms.

       If you configure LUKS2 device with data integrity protection, there will be an underlying dm-integrity
       device, which provides additional per-sector metadata space and also provide data journal protection to
       ensure atomicity of data and metadata update. Because there must be additional space for metadata and
       journal, the available space for the device will be smaller than for length-preserving modes.

       The dm-crypt device then resides on top of such a dm-integrity device. All activation and deactivation of
       this device stack is performed by cryptsetup, there is no difference in using <b>luksOpen</b> for integrity
       protected devices. If you want to format LUKS2 device with data integrity protection, use <b>--integrity</b>
       option (see <b><a href="../man8/cryptsetup-luksFormat.8.html">cryptsetup-luksFormat</a>(8)</b>).

       Albeit Linux kernel 5.7 added TRIM support for standalone dm-integrity devices, <b><a href="../man8/cryptsetup.8.html">cryptsetup</a>(8)</b> can’t offer
       support for discards (TRIM) in authenticated encryption mode, because the underlying dm-crypt kernel
       module does not support this functionality when dm-integrity is used as auth tag space allocator (see
       <b>--allow-discards</b> in <b><a href="../man8/cryptsetup-open.8.html">cryptsetup-open</a>(8)</b>).

       Some integrity modes requires two independent keys (key for encryption and for authentication). Both
       these keys are stored in one LUKS keyslot.

       <b>WARNING:</b> All support for authenticated modes is experimental and there are only some modes available for
       now. Note that there are a very few authenticated encryption algorithms that are suitable for disk
       encryption. You also cannot use CRC32 or any other non-cryptographic checksums (other than the special
       integrity mode "none"). If for some reason you want to have integrity control without using
       authentication mode, then you should separately configure dm-integrity independently of LUKS2.

   <b>Notes</b> <b>on</b> <b>loopback</b> <b>device</b> <b>use</b>
       Cryptsetup is usually used directly on a block device (disk partition or LVM volume). However, if the
       device argument is a file, cryptsetup tries to allocate a loopback device and map it into this file. This
       mode requires Linux kernel 2.6.25 or more recent which supports the loop autoclear flag (loop device is
       cleared on the last close automatically). Of course, you can always map a file to a loop-device manually.
       See the cryptsetup FAQ for an example.

       When device mapping is active, you can see the loop backing file in the status command output. Also see
       <a href="../man8/losetup.8.html">losetup</a>(8).

   <b>LUKS2</b> <b>header</b> <b>locking</b>
       The LUKS2 on-disk metadata is updated in several steps and to achieve proper atomic update, there is a
       locking mechanism. For an image in file, code uses <b><a href="../man2/flock.2.html">flock</a>(2)</b> system call. For a block device, lock is
       performed over a special file stored in a locking directory (by default <b><a href="file:/run/cryptsetup">/run/cryptsetup</a></b>). The locking
       directory should be created with the proper security context by the distribution during the boot-up
       phase. Only LUKS2 uses locks, other formats do not use this mechanism.

   <b>LUKS</b> <b>on-disk</b> <b>format</b> <b>specification</b>
       For LUKS on-disk metadata specification see <b>LUKS1</b>
       &lt;https://gitlab.com/cryptsetup/cryptsetup/wikis/Specification&gt; and <b>LUKS2</b>
       &lt;https://gitlab.com/cryptsetup/LUKS2-docs&gt;.

</pre><h4><b>AUTHORS</b></h4><pre>
       Cryptsetup is originally written by Jana Saout &lt;<a href="mailto:jana@saout.de">jana@saout.de</a>&gt;.
       The LUKS extensions and original man page were written by Clemens Fruhwirth &lt;<a href="mailto:clemens@endorphin.org">clemens@endorphin.org</a>&gt;.
       Man page extensions by Milan Broz &lt;<a href="mailto:gmazyland@gmail.com">gmazyland@gmail.com</a>&gt;.
       Man page rewrite and extension by Arno Wagner &lt;<a href="mailto:arno@wagner.name">arno@wagner.name</a>&gt;.

</pre><h4><b>REPORTING</b> <b>BUGS</b></h4><pre>
       Report bugs at <b>cryptsetup</b> <b>mailing</b> <b>list</b> &lt;<a href="mailto:cryptsetup@lists.linux.dev">cryptsetup@lists.linux.dev</a>&gt; or in <b>Issues</b> <b>project</b> <b>section</b>
       &lt;https://gitlab.com/cryptsetup/cryptsetup/-/issues/new&gt;.

       Please attach output of the failed command with --debug option added.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b>Cryptsetup</b> <b>FAQ</b> &lt;https://gitlab.com/cryptsetup/cryptsetup/wikis/FrequentlyAskedQuestions&gt;

       <b><a href="../man8/cryptsetup.8.html">cryptsetup</a></b>(8), <b><a href="../man8/integritysetup.8.html">integritysetup</a></b>(8) and <b><a href="../man8/veritysetup.8.html">veritysetup</a></b>(8)

</pre><h4><b>CRYPTSETUP</b></h4><pre>
       Part of <b>cryptsetup</b> <b>project</b> &lt;https://gitlab.com/cryptsetup/cryptsetup/&gt;.

cryptsetup 2.8.0                                   2025-07-25                                      <u><a href="../man8/CRYPTSETUP.8.html">CRYPTSETUP</a></u>(8)
</pre>
 </div>
</div></section>
</div>
</body>
</html>