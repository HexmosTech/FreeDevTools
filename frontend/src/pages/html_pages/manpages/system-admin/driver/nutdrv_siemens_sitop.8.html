<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>nutdrv_siemens_sitop - Driver for the Siemens SITOP UPS500 series UPS</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/nut-server">nut-server_2.8.3-2_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       nutdrv_siemens_sitop - Driver for the Siemens SITOP UPS500 series UPS

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>nutdrv_siemens_sitop</b> -h

       <b>nutdrv_siemens_sitop</b> -a <u>UPS_NAME</u> [<u>OPTIONS</u>]

           <b>Note</b>

           This man page only documents the hardware-specific features of the <b>nutdrv_siemens_sitop</b> driver. For
           information about the core driver, see <b><a href="../man8/nutupsdrv.8.html">nutupsdrv</a></b>(8).

</pre><h4><b>SUPPORTED</b> <b>HARDWARE</b></h4><pre>
       <b>nutdrv_siemens_sitop</b> supports Siemens UPS models from the SITOP UPS500 series. Some models have a serial
       port, others have a USB port. The models with USB port actually contain a serial-over-USB chip, so as far
       as this driver is concerned, all models are serial models. This driver should work with all models in the
       SITOP UPS500 series, as long as your kernel has support for the serial port device (see section <b>USB</b>
       <b>driver</b> below).

           <b>Note</b>

           This driver has only been tested with the SITOP UPS500S-2.5 with USB port (Siemens product number
           6EP1933-2EC41).

</pre><h4><b>DEVICE</b> <b>SETTINGS</b></h4><pre>
       The UPS is configured via DIP-switches. For correct functioning in combination with NUT, set the
       DIP-switches to the following:

       <b>switch</b> <b>1-4</b>
           Choose whatever suits your situation. Any combination will work with NUT.

       <b>switch</b> <b>5</b> (⇒ / t)
           Set to OFF (t). This ensures that the UPS will not cut power unless NUT tells it to do so (or unless
           the batteries are exhausted).

       <b>switch</b> <b>6-10</b> (delay)
           Set to OFF (minimum delay). Setting a higher delay will actually also work, but any command from NUT
           will be delayed as well before being executed by the UPS. With the minimum setting, it will already
           take 5 seconds before a command from NUT is executed.

       <b>switch</b> <b>11</b> (INTERR.)
           Set to ON (interrupt the output after the timer expires). This ensures that the UPS briefly
           interrupts the output power in response to the shutdown.return command. See the section <b>Instant</b>
           <b>Commands</b> below.

       <b>switch</b> <b>12</b> (ON/OFF)
           set to ON (enable the UPS functionality). Without this, the UPS will never supply power from its
           batteries.

</pre><h4><b>USB</b> <b>DRIVER</b></h4><pre>
       The USB-versions of the UPS contain an FTDI USB-to-serial converter chip. It is programmed with a
       non-standard product ID (for example <u>0403:e0e3</u>), but can still be used with the normal ftdi_sio driver.

           <b>Note</b>

           The following hints may be specific to GNU/Linux.

       Use <b>lsusb</b> to figure out which product ID is used in your model, and replace all occurrences of <u>e0e3</u> in
       the following examples with the actual Product ID.

           modprobe ftdi_sio
           echo 0403 e0e3 &gt; /sys/bus/usb-serial/drivers/ftdi_sio/new_id

       If your system uses <b>udev</b>, this can be automated via an <b>udev</b> rule:

           ACTION=="add", ATTRS{idVendor}=="0403", ATTRS{idProduct}=="e0e3", \
             RUN+="<a href="file:/sbin/modprobe">/sbin/modprobe</a> ftdi_sio", \
             RUN+="<a href="file:/bin/sh">/bin/sh</a> -c 'echo 0403 e0e3 &gt; /sys/bus/usb-serial/drivers/ftdi_sio/new_id'"

       You can use the following udev rule to obtain a predictable device name, for example /dev/ttyUPS:

           SUBSYSTEM=="tty" ATTRS{idVendor}=="0403", ATTRS{idProduct}=="e0e3" SYMLINK+="ttyUPS"

</pre><h4><b>POLLING</b></h4><pre>
       The UPS does not have a special <u>get</u> <u>status</u> command. Instead, it continuously sends out status update
       messages (tens of messages per second). Every <b>pollinterval</b>, these messages are read from the serial port
       buffer.

       In order to react quickly on status changes from the UPS, and to prevent the serial buffer from
       overflowing, <b>pollinterval</b> should be set to a relatively low value. The recommended value is 1 (second).

</pre><h4><b>EXTRA</b> <b>ARGUMENTS</b></h4><pre>
       This driver supports the following optional settings:

       <b>max_polls_without_data</b>=<u>num</u>
           The serial port is polled periodically for new data (see <b>Polling</b>). If there is no valid new data
           after <u>num</u> polls, it is assumed that communication with the UPS is lost.

           The default value is <u>2</u>. Lower values may cause spurious <u>Data</u> <u>stale</u> messages, especially at startup.

</pre><h4><b>INSTANT</b> <b>COMMANDS</b></h4><pre>
       <b>shutdown.return</b>
           The behavior of this command depends on the line state:

           •   <b>on</b> <b>line</b>: after 5 seconds (or longer, if DIP switches 6-10 are not OFF), the UPS will shut off its
               output. After another 5 seconds, the output is activated again.

           •   <b>on</b> <b>battery</b>: after 5 seconds (or longer, if DIP switches 6-10 are not OFF), the UPS will shut off
               its output. The output will stay off, until the line voltage has returned.

       <b>shutdown.stayoff</b>
           The behavior of this command depends on the line state:

           •   <b>on</b> <b>line</b>: after 5 seconds (or longer, if DIP switches 6-10 are not OFF), the UPS will shut off its
               output. The output stays off, until the line voltage has been removed for at least 1 second, and
               has been re-applied.

           •   <b>on</b> <b>battery</b>: this command behaves the same as <b>shutdown.return</b>.

</pre><h4><b>INSTALLATION</b></h4><pre>
       Make sure that your operating system has created a serial device for the UPS. See the section <b>USB</b> <b>driver</b>
       for more information.

       Next, make sure that NUT has access rights to this device file. For example, by creating an udev rule
       that grants permission to the NUT user, or by adding the NUT user to a user group that can access serial
       devices (e.g. the <b>dialout</b> group on Debian-based systems).

</pre><h4><b>DIAGNOSTICS</b></h4><pre>
       You can verify the correct functioning of the hardware, by monitoring the serial port with a terminal
       program, for example picocom:

           :; picocom -b 9600 -d 8 -p n /dev/ttyUPS

       NUT must not be running when you do this. You should now see a continuous stream of 5-character texts
       coming in, for example:

           BUFRD
           BA&gt;85
           DC_OK

       To exit picocom, use Ctrl-A Ctrl-X.

</pre><h4><b>KNOWN</b> <b>ISSUES</b> <b>AND</b> <b>BUGS</b></h4><pre>
       <b>Untested</b> <b>models</b>
           As mentioned under <b>Supported</b> <b>hardware</b>, this driver has not been tested with all models in the SITOP
           UPS500 series.

       <b>Data</b> <b>stale</b> <b>messages</b>
           The firmware in these UPSes is quite buggy. After sending data to the UPS, it sometimes stops sending
           status updates. This driver tries to prevent this (e.g. by sending commands twice, and by sending
           additional LF characters after each command).

           Once the UPS is in this state, communication can only be restored by rebooting the UPS, or by
           unplugging and reconnecting the USB cable.

           During normal operation, no commands are sent to the UPS at all (only at shutdown), so this issue is
           expected to have little impact on usability.

           It is not certain if the serial models are affected by this issue as well.

</pre><h4><b>AUTHOR</b></h4><pre>
       Matthijs H. ten Berge

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
   <b>The</b> <b>core</b> <b>driver:</b>
       <b><a href="../man8/nutupsdrv.8.html">nutupsdrv</a></b>(8)

   <b>Internet</b> <b>resources:</b>
       The NUT (Network UPS Tools) home page: https://www.networkupstools.org/historic/v2.8.3/

Network UPS Tools 2.8.3                            07/08/2025                            <u><a href="../man8/NUTDRV_SIEMENS_SITOP.8.html">NUTDRV_SIEMENS_SITOP</a></u>(8)
</pre>
 </div>
</div></section>
</div>
</body>
</html>