<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>socomec_jbus - Driver for Socomec JBUS UPS with RS-232 serial Modbus connection.</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/nut-modbus">nut-modbus_2.8.3-2_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       socomec_jbus - Driver for Socomec JBUS UPS with RS-232 serial Modbus connection.

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>socomec_jbus</b> -h

       <b>socomec_jbus</b> -a <u>DEVICE_NAME</u> [<u>OPTIONS</u>]

           <b>Note</b>

           This man page only documents the hardware-specific features of the socomec_jbus driver. For
           information about the core driver, see <b><a href="../man8/nutupsdrv.8.html">nutupsdrv</a></b>(8).

</pre><h4><b>SUPPORTED</b> <b>HARDWARE</b></h4><pre>
       This driver supports Socomec JBUS series, online (double conversion) UPS with the following
       characteristics.

        1. Single phase and 3-phase UPS

        2. Connection: RS-232

       These are typically provided with a Netvision WEB/SNMP management card / external box that would be
       better served by the <b><a href="../man8/snmp-ups.8.html">snmp-ups</a></b>(8) driver. In case netvision isn’t available, you can hook up the UPS
       directly via the serial port and use this driver.

       Currently, it has only been tested on the following model.

       •   DIGYS 3/3 15kVA

       In theory, any Socomec JBUS model should work. It should be discovered as “Unknown Socomec JBUS” with a
       numeric id that I’ll need to add it to the list of supported UPSs.

       Sadly, Socomec document only mentions DELPHYS MX and DELPHYS MX elite and I have the id of my own DIGYS,
       so chances are, your model will not be recognized but will probably mostly work. Please report successful
       or unsuccessful results to the bug tracker or the mailing list. Make sure to include the full model
       number of your UPS manually in your report.

       socomec_jbus uses the libmodbus project, for Modbus implementation.

</pre><h4><b>CABLING</b></h4><pre>
       The UPS has an RS-232 port which should be connected with a NULL-modem cable to a PC serial port. The UPS
       tested has a female DB9 connector, so if you construct the cable yourself, make note of the connector
       type to avoid using gender changers.

       RS-232 is supported on all operating systems, either via a built-in serial port on your computer, or by
       using an external USB-to-RS-232 converter. If you plan to use an USB-to-RS-232 converter, make sure it’s
       supported by your operating system.

</pre><h4><b>INSTALLATION</b></h4><pre>
       This driver should be built by default if libmodbus and development headers are available. You can force
       the configure script to build it with the following arguments:

           :; ./configure --with-serial=yes --with-modbus=yes

       You also need to give proper (R/W) permissions on the local serial device file to allow the NUT driver
       run-time user to access it. This may need additional setup for start-up scripting, udev or upower rules,
       to apply the rights on every boot — especially if your device nodes are tracked by a virtual filesystem.

       For example, a USB-to-serial converter can be identified as /dev/ttyACM0 or /dev/ttyUSB0 on Linux, or
       /dev/ttyU0 on FreeBSD (note the capital "U"). A built-in serial port can be identified as /dev/ttyS0 on
       Linux or one of /dev/cua* names on FreeBSD.

</pre><h4><b>INSTANT</b> <b>COMMANDS</b></h4><pre>
       This driver does not (yet?) support sending commands to the UPS.

</pre><h4><b>VARIABLES</b></h4><pre>
       This driver does not support writable runtime variables (see <b><a href="../man8/upsrw.8.html">upsrw</a></b>(8)): for the same reasons. Both should
       be trivial to implement, but since I’ve already found one or two inconsistencies in the documentation,
       I’m withholding from trying them.

</pre><h4><b>KNOWN</b> <b>ISSUES</b> <b>AND</b> <b>BUGS</b></h4><pre>
       Well, it is an alpha release at best, but so far appears to report the UPS status reliably. Mostly based
       on the work of Yifeng Li &lt;<a href="mailto:tomli@tomli.me">tomli@tomli.me</a>&gt; on the <b><a href="../man8/huawei-ups2000.8.html">huawei-ups2000</a></b>(8) in that very same source tree.

   <b>Read</b> <b>failure</b> <b>on</b> <b>some</b> <b>JBUS</b> <b>addresses</b>
       The driver polls all documented JBUS addresses, and it is quite possible that your UPS model does not
       support one of them (e.g. the Digys does not support address <u>0x1020</u> which should provide the current UPS
       status). This should be logged with LOG_ERR from modbus_read_input_registers() along with the address
       that produced the error.

   <b>Data</b> <b>stale</b>
       Under certain circumstances, some registers can return invalid values and trigger a "data stale" error.
       Once a data stale error has occurred, you should see error messages similar to the example below in the
       system log.

           socomec_jbus: modbus_read_input_registers(addr:XXXX, count:Z):
               Illegal data address
           upsd: Data for UPS [socomec] is stale - check driver
           upsd: UPS [socomec] data is no longer stale

       So far all known problems have been fixed by the author, but an unknown one cannot be ruled out. If you
       have encountered "data stale" problems during normal uses, please file a bug report with full logs
       attached.

       Before troubleshooting or reporting a problem, it’s important to check your <b>dmesg</b> log for USB connect and
       disconnect events to avoid wasting time on the NUT driver when the actual problem is USB. For example, if
       someone yanks the cable out of the USB port, or if a new USB device is plugged into a USB host/hub that
       is struggling to power its ports (common on single-board computers like Raspberry Pi), or if you have
       flaky cabling or EMI noise, the serial converter can get disconnected from USB, at least briefly. This
       creates a permanent data stale, the driver must be restarted (plugging the USB back won’t fix it, since
       the driver is still using the nonexistent serial device). These USB problems usually have nothing to do
       with NUT. If it’s the case, you should solve the underlying USB problem — check the cable, check the
       converter, try a powered USB hub, try a full-speed USB isolator, etc.

</pre><h4><b>AUTHOR</b></h4><pre>
       Thanos Chatziathanassiou &lt;<a href="mailto:tchatzi@arx.net">tchatzi@arx.net</a>&gt;

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
   <b>The</b> <b>core</b> <b>driver:</b>
       <b><a href="../man8/nutupsdrv.8.html">nutupsdrv</a></b>(8)

   <b>Internet</b> <b>resources:</b>
       •   The NUT (Network UPS Tools) home page: https://www.networkupstools.org/historic/v2.8.3/

       •   Socomec JBUS/Modbus Reference Guide:
           https://www.socomec.com/files/live/sites/systemsite/files/GB-JBUS-MODBUS-for-Delphys-MP-and-Delphys-MX-operating-manual.pdf

       •   libmodbus home page: <a href="http://libmodbus.org">http://libmodbus.org</a>

Network UPS Tools 2.8.3                            07/08/2025                                    <u><a href="../man8/SOCOMEC_JBUS.8.html">SOCOMEC_JBUS</a></u>(8)
</pre>
 </div>
</div></section>
</div>
</body>
</html>