<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>belkinunv - Driver for Belkin "Universal UPS" and compatible</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/nut-server">nut-server_2.8.3-2_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       belkinunv - Driver for Belkin "Universal UPS" and compatible

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>belkinunv</b> -h

       <b>belkinunv</b> -a <u>UPS_NAME</u> [<u>OPTIONS</u>]

           <b>Note</b>

           This man page only documents the hardware-specific features of the belkin driver. For information
           about the core driver, see <b><a href="../man8/nutupsdrv.8.html">nutupsdrv</a></b>(8).

           <b>Note</b>

           This driver only supports serial connections. If your UPS has a USB port, please consult the Hardware
           Compatibility List (HCL) to see which of the USB drivers you should use.

</pre><h4><b>SUPPORTED</b> <b>HARDWARE</b></h4><pre>
       The belkinunv driver is known to work with the Belkin Universal UPS models F6C800-UNV and F6C120-UNV, and
       is expected to work with other Belkin Universal UPS models. The driver only supports serial
       communication, not USB.

       The Trust UPS and older Belkin units are not supported by this driver, and neither are the Belkin Home
       Office models (F6H500-SER and so forth). However, some Belkin models, such as the Regulator Pro, are
       supported by the <b><a href="../man8/belkin.8.html">belkin</a></b>(8) driver, and the Home Office models are supported using the <b><a href="../man8/genericups.8.html">genericups</a></b>(8)
       driver with upstype=7.

</pre><h4><b>SOFT</b> <b>SHUTDOWN</b> <b>WORKAROUND</b></h4><pre>
       One problem with the Belkin Universal UPS is that it cannot enter a soft shutdown (shut down the load
       until AC power returns) unless the batteries are completely depleted. Thus, one cannot just shut off the
       UPS after operating system shutdown; it will not come back on when the power comes back on. Therefore,
       the <b>belkinunv</b> driver should never be used with the <b>-k</b> option. Instead, the <b>-x</b> <b>wait</b> option is provided as
       a workaround.

       When called with the <b>-x</b> <b>wait</b> option, <b>belkinunv</b> behaves as a standalone program (i.e., it does not fork
       into the background). It performs one simple task: it connects to the UPS, waits for AC power to return,
       and then exits with status 0.

       This is meant to be used in a shutdown script as follows: during a shutdown, after all filesystems have
       been remounted read-only, and just before the system would normally be halted: check /etc/killpower (or
       similar) to see if this shutdown was caused by <b><a href="../man8/upsmon.8.html">upsmon</a></b>(8), and if yes, call <b>belkinunv</b> <b>-x</b> <b>wait</b>. If AC power
       comes back on, <b>belkinunv</b> exits, and things should be arranged so that the system reboots in this case. If
       AC power does not come back on, the UPS will eventually run out of batteries, kill the computer’s power
       supply, and go into soft shutdown mode, which means everything will reboot properly when the power
       returns. In either case, a deadlock is avoided.

       In addition, if an optional integer argument is given to the <b>-x</b> <b>wait</b> option, this causes <b>belkinunv</b> to
       wait not only for AC power to be present, but also for the battery charge to reach the given level. I use
       this as part of my startup scripts, to ensure that the batteries are sufficiently charged before the
       computer continues booting. This should be put very early in the startup script, before any filesystems
       are mounted read/write, and before any filesystem checks are performed.

       Several other <b>-x</b> options are provided to fine-tune this behavior. See the options below for detailed
       descriptions. See the examples below for examples of how to use <b>belkinunv</b> in shutdown and startup
       scripts.

</pre><h4><b>OPTIONS</b></h4><pre>
       See also <b><a href="../man8/nutupsdrv.8.html">nutupsdrv</a></b>(8) for generic options. Never use the <b>-k</b> option with this driver; it does not work
       properly.

       <b>-x</b> <b>wait</b>[=<u>level</u>]
           When this option is used, <b>belkinunv</b> does not fork into the background, but behaves as a standalone
           program. It connects to the UPS and waits until AC power is present. If <u>level</u> is specified, it also
           waits until the battery charge reaches at least the given level in percent. Then, and only then,
           <b>belkinunv</b> exits. In addition, while <b>belkinunv</b> runs in this mode, it displays a status line with
           information on the UPS status and battery level. This is intended for use in the computer’s shutdown
           and startup scripts, as described under Soft Shutdown Workaround above.

       <b>-x</b> <b>nohang</b>
           This option only has an effect when used in conjunction with the <b>-x</b> <b>wait</b> option. It causes <b>belkinunv</b>
           to exit if a connection with the UPS cannot be established or is lost, instead of retrying forever,
           which is the default behavior. The <b>-x</b> <b>nohang</b> option should be used in a startup script, to ensure the
           computer remains bootable even if the UPS has been disconnected during the power failure (for
           instance, you attached your computer to a generator, carried it to a neighbor’s house, or whatever).

       <b>-x</b> <b>flash</b>
           This option only has an effect when used in conjunction with the <b>-x</b> <b>wait</b> option. It causes the UPS
           load to be shut off for a short time ("flashed") just after the AC power has returned and the
           requested battery level (if any) has been attained. This is useful if slaves are attached to this
           UPS; the flash will cause all of them to reboot. Note that, due to the design of the Belkin UPS
           hardware, the load shutdown lasts ca. 1—2 minutes; a shorter flash cannot be performed reliably.
           Also, the computers will reboot at the scheduled time, on battery power if necessary, even if AC
           power fails again in the meantime. This should not be a problem, as your startup scripts can catch
           this situation.

       <b>-x</b> <b>silent</b>
           This option only has an effect when used in conjunction with the <b>-x</b> <b>wait</b> option. It suppresses the
           status line which <b>belkinunv</b> would normally print.

       <b>-x</b> <b>dumbterm</b>
           This option only has an effect when used in conjunction with the <b>-x</b> <b>wait</b> option. It changes the way
           in which <b>belkinunv</b> prints its status line. Normally, terminal control sequences are used to overwrite
           the same line with new status information, each time the status is updated. This may not work on all
           terminals. If the <b>-x</b> <b>dumbterm</b> option is given, each status update is written on a new line.

</pre><h4><b>VARIABLES</b></h4><pre>
       <b>battery.charge</b>, <b>battery.runtime</b>
           not supported by all hardware.

       <b>battery.voltage</b>, <b>battery.voltage.nominal</b>, <b>input.frequency</b>, <b>input.frequency.nominal</b>
           e.g. 60 for 60Hz

       <b>input.sensitivity</b>
           writable: normal/medium/low

       <b>input.transfer.high</b>
           writable: high transfer voltage point in V

       <b>input.transfer.low</b>
           writable: low transfer voltage point in V

       <b>input.voltage</b>, <b>input.voltage.maximum</b>, <b>input.voltage.minimum</b>, <b>input.voltage.nominal</b>, <b>output.frequency</b>,
       <b>output.voltage</b>, <b>ups.beeper.status</b>
           writable. Values: enabled/disabled/muted. This variable controls the state of the panel beeper.
           Enabled means sound when the alarm is present, disabled means never sound, and muted means the sound
           is temporarily disabled until the alarm would normally stop sounding. In the muted state, the beeper
           is automatically turned back on at the next event (AC failure, battery test, etc). Also, the beeper
           can’t be turned off during a critical event (low battery). Note that not all UPS models support the
           "disabled" state.

       <b>ups.firmware</b>, <b>ups.load</b>, <b>ups.model</b>, <b>ups.power.nominal</b>
           e.g. 800 for an 800VA system

       <b>ups.status</b>
           a list of flags; see the status flags below.

       <b>ups.temperature</b>
           not supported by all hardware.

       <b>ups.test.result</b>, <b>ups.delay.restart</b>
           time to restart (read only)

       <b>ups.delay.shutdown</b>
           time to shutdown (read only). This is always a multiple of 60 seconds.

       <b>ups.type</b>
           ONLINE/OFFLINE/LINEINT. This describes the basic layout of this UPS (for GUI clients which want to
           draw an animated picture of power flow). An offline UPS has a direct connection from AC input to AC
           output, and also a connection from AC input to the battery, and from the battery to AC output. An
           online UPS lacks the direct connection from AC input to AC output, whereas a line interactive UPS
           lacks the connection from AC input to the battery.

</pre><h4><b>COMMANDS</b></h4><pre>
       <b>beeper.enable,</b> <b>beeper.disable,</b> <b>beeper.mute</b>
           Enable, disable or mute the panel beeper. Note that if the beeper is muted, it is automatically
           turned back on at the next event (AC failure, battery test, etc). Also, the beeper can’t be turned
           muted during a critical event (low battery).

       <b>reset.input.minmax</b>
           Reset the variables <b>input.voltage.minimum</b> and <b>input.voltage.maximum</b>.

       <b>shutdown.reboot</b>
           Shut down load immediately for about 1—2 minutes.

       <b>shutdown.reboot.graceful</b>
           After 40 second delay, shut down load for about 1—2 minutes.

       <b>shutdown.stayoff</b>
           Shut down load immediately and stay off. The only way it can be turned back on is by manually
           pressing the front panel button.

       <b>test.battery.start,</b> <b>test.battery.stop</b>
           Start/stop 10 second battery test.

       <b>test.failure.start,</b> <b>test.failure.stop</b>
           Start/stop "deep" battery test.

</pre><h4><b>STATUS</b> <b>FLAGS</b></h4><pre>
       <b>OB</b>
           load is on battery, including during tests

       <b>OFF</b>
           load is off

       <b>OL</b>
           load is online

       <b>ACFAIL</b>
           AC failure. Note that this refers to the AC input, and thus it is not the same as "OB". An AC failure
           can occur at any time, for instance, during a battery test, or when the UPS load is off.

       <b>OVER</b>
           overload

       <b>OVERHEAT</b>
           overheat

       <b>COMMFAULT</b>
           UPS fault

       <b>LB</b>
           low battery

       <b>CHRG</b>
           charging

       <b>DEPLETED</b>
           the battery is depleted. When the UPS raises this flag, it simultaneously switches off the load.

       <b>RB</b>
           replace battery

</pre><h4><b>EXAMPLES</b></h4><pre>
       Here is an example for how <b>belkinunv</b> should be used in a computer’s shutdown script. These commands
       should go in the very last part of the shutdown script, after all file systems have been mounted
       read-only, and just before the computer halts. Note that <b>belkinunv</b> must be installed in a directory which
       is still readable at that point.

            # NEAR END OF SHUTDOWN SCRIPT:
            # if shutdown was caused by UPS, perform Belkin UPS workaround.
            if [ -f /etc/killpower ] || /usr/sbin/upsmon -K ; then
               echo "Waiting for AC power, or for UPS batteries to run out..."
               /usr/bin/belkinunv -x wait /dev/ttyS1

               # we get here if the power came back on. Reboot.
               echo "Power is back. Rebooting..."
               reboot
            fi

       And here is an example of how to use <b>belkinunv</b> in the startup script. These commands should go near the
       beginning of the startup script, before any file systems are mounted read/write, and before any file
       system integrity checks are done.

            # NEAR BEGINNING OF STARTUP SCRIPT:
            # if we are recovering from a power failure, wait for the UPS to
            # charge to a comfortable level before writing anything to disk
            if [ -f /etc/killpower ] || /usr/sbin/upsmon -K ; then
               echo "Waiting for UPS battery charge to reach 60%..."
               /usr/bin/belkinunv -x wait=60 -x nohang /dev/ttyS1
            fi

</pre><h4><b>EXIT</b> <b>STATUS</b></h4><pre>
       When used normally, <b>belkinunv</b> forks into the background and its diagnostics are the same as for all NUT
       drivers, see <b><a href="../man8/nutupsdrv.8.html">nutupsdrv</a></b>(8).

       When used with the <b>-x</b> <b>wait</b> option, the exit status is normally <b>0</b>. If the <b>-x</b> <b>nohang</b> option has also been
       specified, an exit status of <b>1</b> indicates that communication with the UPS was lost. If the <b>-x</b> <b>flash</b> option
       has been specified, an exit status of <b>2</b> indicates that the timed shutdown has failed.

</pre><h4><b>EXTRA</b> <b>ARGUMENTS</b></h4><pre>
       This driver does not support any extra settings in <b><a href="../man5/ups.conf.5.html">ups.conf</a></b>(5).

</pre><h4><b>AUTHOR</b></h4><pre>
       Peter Selinger &lt;<a href="mailto:selinger@users.sourceforge.net">selinger@users.sourceforge.net</a>&gt;

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
   <b>The</b> <b>core</b> <b>driver:</b>
       <b><a href="../man8/nutupsdrv.8.html">nutupsdrv</a></b>(8)

   <b>Other</b> <b>Belkin</b> <b>drivers:</b>
       <b><a href="../man8/belkinunv.8.html">belkinunv</a></b>(8), <b><a href="../man8/blazer_ser.8.html">blazer_ser</a></b>(8), <b><a href="../man8/blazer_usb.8.html">blazer_usb</a></b>(8), <b><a href="../man8/usbhid-ups.8.html">usbhid-ups</a></b>(8)

   <b>Internet</b> <b>resources:</b>
       •   The NUT (Network UPS Tools) home page: https://www.networkupstools.org/historic/v2.8.3/

       •   The documentation for the protocol used by this UPS: belkin-universal-ups.html (replica on NUT site)

Network UPS Tools 2.8.3                            07/08/2025                                       <u><a href="../man8/BELKINUNV.8.html">BELKINUNV</a></u>(8)
</pre>
 </div>
</div></section>
</div>
</body>
</html>