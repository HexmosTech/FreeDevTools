<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>nut-driver-enumerator - Tool to map NUT device entries to service instances</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/nut-server">nut-server_2.8.3-2_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       nut-driver-enumerator - Tool to map NUT device entries to service instances

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>nut-driver-enumerator.sh</b> -h

       <b>nut-driver-enumerator.sh</b> (no args)

       <b>nut-driver-enumerator.sh</b> [--COMMAND]

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>nut-driver-enumerator.sh</b> implements the set-up and querying of the mapping between NUT driver
       configuration sections for each individual monitored device, and the operating system service management
       framework service instances into which such drivers are wrapped for independent execution and management
       (on platforms where NUT currently supports this integration — currently this covers Linux distributions
       with systemd and systems derived from Solaris 10 codebase, including proprietary Sun/Oracle Solaris and
       numerous open-source illumos distributions with SMF). It may be not installed in packaging for other
       operating systems.

       This script provides a uniform interface for further NUT tools such as <b><a href="../man8/upsdrvsvcctl.8.html">upsdrvsvcctl</a></b>(8) to implement their
       logic as platform-independently as was possible and practical. It is not currently intended for end-user
       consumption (and so is located in the <u>libexec</u> directory), with <b>upsdrvsvcctl</b> exposing the most useful data
       and actions with its <u>list</u> and <u>resync</u> arguments.

       One part of the platform complexity that <b>nut-driver-enumerator.sh</b> hides is the difference of rules for
       valid service instance names in various frameworks, as well as system tools and naming patterns involved.

</pre><h4><b>COMMANDS</b></h4><pre>
       <b>nut-driver-enumerator.sh</b> <b>(no</b> <b>args)</b>
           Update wrapping of devices into services

       <b>nut-driver-enumerator.sh</b> <b>--daemon(=freq)</b>
           Update wrapping of devices into services in an infinite loop; Default freq is 60 sec.

       <b>nut-driver-enumerator.sh</b> <b>--daemon-after(=freq)</b>
           Update wrapping of devices into services in an infinite loop; first do one run of the loop though,
           then daemonize (this way service unit is deemed started only when NUT config and driver instances are
           in sync). Default freq is 60 sec.

       <b>nut-driver-enumerator.sh</b> <b>--reconfigure</b>
           Stop and un-register all service instances and recreate them (e.g. if new dependency template was
           defined in a new version of the script or package)

       <b>nut-driver-enumerator.sh</b> <b>--get-service-framework</b>
           Print the detected service management framework in this OS

       <b>nut-driver-enumerator.sh</b> <b>--list-devices</b>
           Print list of devices in NUT config

       <b>nut-driver-enumerator.sh</b> <b>--list-services</b>
           Print list of service instances which wrap registered NUT devices (full name of service unit)

       <b>nut-driver-enumerator.sh</b> <b>--list-instances</b>
           Print list of service instances which wrap registered NUT devices (just instance suffix)

       <b>nut-driver-enumerator.sh</b> <b>--get-service-for-device</b> <b>DEV</b>
           Print the full name of service unit which wraps a NUT device named DEV

       <b>nut-driver-enumerator.sh</b> <b>--get-device-for-service</b> <b>SVC</b>
           Print the NUT device name for full or instance-suffix name of a service unit SVC which wraps it

       <b>nut-driver-enumerator.sh</b> <b>--list-services-for-devices</b>
           Print a TAB-separated list of service units and corresponding NUT device names which each such unit
           wraps

       <b>nut-driver-enumerator.sh</b> <b>--show-all-configs</b>
           Show the complete normalized list of device configuration blocks (same as used later by the parser in
           the script to make decisions)

       <b>nut-driver-enumerator.sh</b> <b>--show-device-config</b> <b>DEV</b>
           Show configuration block of the specified NUT device

       <b>nut-driver-enumerator.sh</b> <b>--show-device-config-value</b> <b>DEV</b> <b>KEY</b>
           Show single configuration key of the specified NUT device

</pre><h4><b>ENVIRONMENT</b> <b>VARIABLES</b></h4><pre>
       By default <b>nut-driver-enumerator.sh</b> executed without arguments would automatically start any newly
       registered service instances wrapping the NUT devices, and would also restart the nut-server service if
       the configuration was changed. Environment variable AUTO_START=no disables this default part of the
       action.

       Also see below for environment variable REPORT_RESTART_42=no value.

</pre><h4><b>DIAGNOSTICS</b></h4><pre>
       <b>nut-driver-enumerator.sh</b> will return a zero exit code if it had nothing to do (all currently defined
       drivers match all of the currently defined service instances, one-to-one) and if it had no errors in its
       operation.

       Other codes can be returned as a result of re-synchronization of mappings:

       <b>42</b>
           NUT device sections and system service instances differed before, but now match up — so now the
           caller should likely restart some services. Note that the drivers' service instances may have been
           started or stopped as required (by AUTO_START=yes) — but maybe the upsmon or upssched services should
           restart. If you pass environment variable REPORT_RESTART_42=no then this codepath would return 0 (as
           a non-error exit code). In default mode, such non-null reconfiguration should cause the
           nut-driver-enumerator service to restart and this would propagate to other NUT services that depend
           on it.

       <b>13</b>
           Sections and services differed, and still do not match up

       <b>1</b>
           Bad inputs, e.g. unrecognized service management framework

       <b>2</b>
           Absent or unreadable ups.conf file

</pre><h4><b>AUTHOR</b></h4><pre>
       Jim Klimov &lt;jimklimov+<a href="mailto:nut@gmail.com">nut@gmail.com</a>&gt;

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man8/upsdrvsvcctl.8.html">upsdrvsvcctl</a></b>(8), <b><a href="../man5/ups.conf.5.html">ups.conf</a></b>(5)

   <b>Internet</b> <b>resources:</b>
       The NUT (Network UPS Tools) home page: https://www.networkupstools.org/historic/v2.8.3/

Network UPS Tools 2.8.3                            07/08/2025                              <u><a href="../man8/NUT-DRIVER-ENUMERA.8.html">NUT-DRIVER-ENUMERA</a></u>(8)
</pre>
 </div>
</div></section>
</div>
</body>
</html>