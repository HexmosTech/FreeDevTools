<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>expire - Usenet article and history expiration program</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/inn2">inn2_2.7.3-1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       expire - Usenet article and history expiration program

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>expire</b> [<b>-iNnptx</b>] [<b>-d</b> <u>dir</u>] [<b>-f</b> <u>file</u>] [<b>-g</b> <u>file</u>] [<b>-h</b> <u>file</u>] [<b>-r</b> <u>reason</u>] [<b>-s</b> <u>size</u>] [<b>-v</b> <u>level</u>] [<b>-w</b> <u>number</u>] [<b>-z</b>
       <u>file</u>] [<u>expire.ctl</u>]

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>expire</b> scans the <a href="../man5/history.5.html">history</a>(5)-format text file <u>pathdb</u>/history and uses the information recorded in it to
       purge itself of old news articles.  Its behaviour depends on the setting of <u>groupbaseexpiry</u> in <u>inn.conf</u>.

       When <u>groupbaseexpiry</u> is false, article expiration is primarily done by <b>expire</b> based on the expiration
       rules in <u>expire.ctl</u> that match the storage class of each article.  The articles and the history entries
       are removed by <b>expire</b>, and then <b>expireover</b> does the additional cleanup of removing the overview database
       entries.  History entries of expired articles are removed only if they are older than the number of days
       specified in the "/remember/" line in <u>expire.ctl</u>.  Articles stored using a storage method that has self-
       expire functionality like CNFS are by default not affected by <b>expire</b>'s primary behaviour (but see the <b>-N</b>
       flag to disable this).

       When <u>groupbaseexpiry</u> is true, article expiration is primarily done by <b>expireover</b> based on the expiration
       rules in <u>expire.ctl</u> that match each newsgroup.  Articles are removed from the news spool by <b>expireover</b>,
       and then <b>expire</b> does some additional cleanup to remove old history database entries.

       For articles in self-expiring storage methods when <u>groupbaseexpiry</u> is set to false in <u>inn.conf</u> and the <b>-N</b>
       flag is not given, or for <u>all</u> articles when <u>groupbaseexpiry</u> is set to true, <u>expire.ctl</u> is ignored except
       the "/remember/" line; <b>expire</b> then only probes to see if the article still exists, and purges the
       relevant history entries if appropriate.

       Regardless the setting of <u>groupbaseexpiry</u>, <b>expireover</b> should be run along with <b>expire</b>, usually via
       <b>news.daily</b> out of cron.

       Note that <b>expire</b> never purges articles which do not match any entry in <u>expire.ctl</u>.

       Also note that if <u>groupbaseexpiry</u> is true, the server needs an overview database in order to expire
       articles in storage backends that are not self-expiring.  If you do not plan to have an overview
       database, it would then be better to only use self-expiring backends like CNFS, as the history entries
       will still get cleaned up by <b>expire</b> when it detects that an article no longer exists in that backend.

</pre><h4><b>OPTIONS</b></h4><pre>
       <b>-d</b> <u>dir</u>
           If  the <b>-d</b> flag is used, then the new <u>history</u> file and database is created in the specified directory
           <u>dir</u>.  This is useful when the filesystem does not have sufficient space to hold both the old and  new
           history  files.   When  this  flag is used, <b>expire</b> leaves the server paused and creates a zero-length
           file named after the new history file,  with  an  extension  of  ".done"  to  indicate  that  it  has
           successfully  completed  the  expiration.  The calling script should install the new history file and
           unpause the server.  The <b>-r</b> flag should be used with this flag.

       <b>-f</b> <u>file</u>
           To specify an alternate history file, use the <b>-f</b> flag.  This flag is valid  when  used  with  the  <b>-d</b>
           flag, and the output will be written to the specified file.  The default without <b>-f</b> is "history".

       <b>-g</b> <u>file</u>
           If the <b>-g</b> flag is given, then a one-line summary equivalent to the output of <b>-v</b> <b>1</b>, except preceded by
           the current time, will be appended to the specified <u>file</u>.

       <b>-h</b> <u>file</u>
           To  specify  an alternate input text history file, use the <b>-h</b> flag.  <b>expire</b> uses the old <u>dbz</u> database
           to determine the size of the new one.  (If the <b>-d</b> flag is not used, the output filename will  be  the
           same as the input filename with an extension of ".n".)

           The default without the <b>-h</b> flag is <u>pathdb</u>/history.

       <b>-i</b>  To ignore the old database, use the <b>-i</b> flag.

       <b>-N</b>  The  control  file  is  normally  ignored  for  articles  in  storage  methods which have self-expire
           functionality.  If the <b>-N</b> flag is used, <b>expire</b> still uses the control file for these articles.

           This parameter is only useful when <u>groupbaseexpiry</u> is set to false in <u>inn.conf</u>.

       <b>-n</b>  If <b>innd</b> is not running, use the <b>-n</b> flag and <b>expire</b> will not send the "pause" or "go" commands.   (For
           more  details  on  the commands, see <a href="../man8/ctlinnd.8.html">ctlinnd</a>(8)).  Note that <b>expire</b> only needs exclusive access for a
           very short time -- long enough to see if any new articles arrived since it first hit the end  of  the
           file, and to rename the new files to the working files.

       <b>-p</b>  <b>expire</b> makes its decisions on the time the article arrived, as found in the <u>history</u> file.  This means
           articles are often kept a little longer than with other expiration programs that base their decisions
           on the article's posting date.  To use the article's posting date, use the <b>-p</b> flag.

       <b>-r</b> <u>reason</u>
           <b>expire</b>  normally  sends  a "pause" command to the local <b>innd</b> daemon when it needs exclusive access to
           the <u>history</u> file, using the string "Expiring" as the reason.  To give a different reason, use the  <b>-r</b>
           flag.   The  process  ID will be appended to the reason.  When <b>expire</b> is finished and the new <u>history</u>
           file is ready, it sends a "go" command.  See also the <b>-n</b> flag.

       <b>-s</b> <u>size</u>
           <b>expire</b> determines the optimal size of the new <u>history</u> file from the size of the old one.  In case you
           want to force a specific size, use this flag to optimize the new history database  for  approximately
           <u>size</u>  key-value  pairs  (i.e.  lines  in <u>history</u>).  Accurately specifying the size will create a more
           efficient database.  (The size should be the estimated eventual number  of  articles,  typically  the
           size of the old <u>history</u> file, in lines.)

       <b>-t</b>  If  the <b>-t</b> flag is used, then <b>expire</b> will generate a list of the tokens that should be removed on its
           standard output, and the new <u>history</u> file will be left in <u>history.n</u>,  <u>history.n.dir</u>,  <u>history.n.index</u>
           and  <u>history.n.hash</u>.  This flag is useful for debugging when used with the <b>-n</b> flag.  Note that if the
           <b>-f</b> flag is used, then the name specified with that flag will be used instead of <u>history</u>.

       <b>-v</b> <u>level</u>
           The <b>-v</b> flag is used to increase the verbosity of the program, generating messages to standard output.
           The <u>level</u> should be a number, where higher numbers result in  more  output.   Level  one  will  print
           totals  of  the various actions done (not valid if a new <u>history</u> file is not written), level two will
           print a report on each individual file, while level five results in  multiple  lines  of  output  for
           every history line processed.

       <b>-w</b> <u>number</u>
           Use  the  <b>-w</b>  flag  to  "warp"  time  so that <b>expire</b> thinks it is running at some time other than the
           current time.  The value should be a signed floating point number indicating the number  of  days  to
           use as the offset.

       <b>-x</b>  If  the <b>-x</b> flag is used, then <b>expire</b> will not create any new history files.  This is most useful when
           combined with the <b>-n</b> and <b>-t</b> flags to see how different expiration policies would change the amount of
           disk space used.

       <b>-z</b> <u>file</u>
           If the <b>-z</b> flag is used, then articles are not removed, but their names are appended to the  specified
           <u>file</u>.   See  the description of <b>delayrm</b> in <a href="../man8/news.daily.8.html">news.daily</a>(8).  If a filename is specified, it is taken as
           the control file and parsed according to the rules in <u>expire.ctl</u>.  A single dash ("-") may be used to
           read the file from standard input.  If no file is specified, the file <u>pathetc</u>/expire.ctl is read.

</pre><h4><b>HISTORY</b></h4><pre>
       Written by Rich $alz &lt;<a href="mailto:rsalz@uunet.uu.net">rsalz@uunet.uu.net</a>&gt; for InterNetNews.  Converted to POD by Julien Elie.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <a href="../man8/ctlinnd.8.html">ctlinnd</a>(8),   <a href="../man5/expire.ctl.5.html">expire.ctl</a>(5),   <a href="../man8/expireover.8.html">expireover</a>(8),   <a href="../man5/history.5.html">history</a>(5),    <a href="../man5/inn.conf.5.html">inn.conf</a>(5),    <a href="../man8/innd.8.html">innd</a>(8),    <a href="../man3/libinn_dbz.3.html">libinn_dbz</a>(3),
       <a href="../man3/libinn_inndcomm.3.html">libinn_inndcomm</a>(3), <a href="../man8/news.daily.8.html">news.daily</a>(8).

INN 2.7.3                                          2025-05-19                                          <u><a href="../man8/EXPIRE.8.html">EXPIRE</a></u>(8)
</pre>
 </div>
</div></section>
</div>
</body>
</html>