<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>vfs_snapper - Expose snapshots managed by snapper as shadow-copies</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/samba">samba_4.22.3+dfsg-4ubuntu1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       vfs_snapper - Expose snapshots managed by snapper as shadow-copies

</pre><h4><b>SYNOPSIS</b></h4><pre>

       vfs objects = snapper

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This VFS module is part of the <b><a href="../man8/samba.8.html">samba</a></b>(8) suite.

       The vfs_snapper VFS module exposes snapshots managed by snapper for use by Samba. This provides the
       ability for remote SMB clients to access shadow-copies via Windows Explorer using the "previous versions"
       dialog.

       Snapshots can also be created and remove remotely, using the File Server Remote VSS Protocol (FSRVP).
       Snapshot creation and deletion requests are forwarded to snapper via DBus.

       This module is stackable.

</pre><h4><b>CONFIGURATION</b></h4><pre>
       The underlying share path must have a corresponding snapper configuration file. The snapshot directory
       tree must allow access for relevant users.

                     <u>[share]</u>
                     <b>vfs</b> <b>objects</b> <b>=</b> <b>snapper</b>

       For remote snapshot creation and deletion, Samba's FSRVP server must be configured in the [global]
       section:

                     <u>[global]</u>
                     <b>registry</b> <b>shares</b> <b>=</b> <b>yes</b>
                     <b>include</b> <b>=</b> <b>registry</b>

</pre><h4><b>PERMISSIONS</b></h4><pre>
       Snapper stores snapshots under a .snapshots subdirectory. This directory must permit traversal for any
       users wishing to access snapshots via the Windows Explorer previous versions dialog. By default,
       traversal is forbidden for all non-root users. Additionally, users must be granted permission to list
       snapshots managed by snapper, via snapper's ALLOW_USERS or ALLOW_GROUPS options. Snapper can grant these
       users and groups .snapshots traversal access automatically via the SYNC_ACL option.

       Remote snapshot creation and deletion is only permitted by Samba for Active Directory administrators,
       backup operators, or users explicitly granted SeBackupPrivilege. Snapper must also permit creation and
       deletion for the appropriate user, via snapper's ALLOW_USERS or ALLOW_GROUPS options.

       The DiskShadow.exe FSRVP client initially authenticates as the Active Directory computer account. This
       account must therefore be granted the same permissions as the user account issuing the snapshot creation
       and deletion requests.

</pre><h4><b>VERSION</b></h4><pre>
       This man page is part of version 4.22.3-Ubuntu-4.22.3+dfsg-4ubuntu1 of the Samba suite.

</pre><h4><b>AUTHOR</b></h4><pre>
       The original Samba software and related utilities were created by Andrew Tridgell. Samba is now developed
       by the Samba Team as an Open Source project similar to the way the Linux kernel is developed.

Samba 4.22.3-Ubuntu-4.22.3+dfs                     07/21/2025                                     <u><a href="../man8/VFS_SNAPPER.8.html">VFS_SNAPPER</a></u>(8)
</pre>
 </div>
</div></section>
</div>
</body>
</html>