<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>vzcptcheck - show/test CPT properties</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/jammy/+package/vzctl">vzctl_4.9.4-6_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       vzcptcheck - show/test CPT properties

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>vzcptcheck</b> <u>property</u> [<b>argument</b> <u>...</u>]
       <b>vzcptcheck</b> <b>help</b>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This  low-level  utility is used by <b><a href="../man8/vzmigrate.8.html">vzmigrate</a></b>(8) to check if a container can be succesfully restored on a
       destination system before performing live migration. Currently, it is able to check CPT version  and  CPU
       flags compatibility.

       There are two modes of operation: to show a property and to test a property. Showing mode is invoked if a
       property  specified with no arguments; testing mode requires one or many arguments after a property name.
       Generally, one runs <b>vzcptcheck</b> on one node to get a property, and on the other  node  to  check  for  the
       property.

       Note  that  this  utility does not guarantee that migration will succeed even if all tests are passed. It
       merely gives a way to prevent migration which will definitely fail.

</pre><h4><b>OPTIONS</b></h4><pre>
       <b>vzcptcheck</b> <b>version</b>
       <b>vzcptcheck</b> <b>version</b> <u>num</u>
       To get CPT version number, run <b>vzcptcheck</b> <b>version</b> on the source node.  Then, to  check  if  this  version
       number is supported, run <b>vzcptcheck</b> <b>version</b> <u>num</u> on the destination node.

       <b>vzcptcheck</b> <b>caps</b>
       <b>vzcptcheck</b> <b>caps</b> <u>ctid</u> <u>capnum</u>
       <b>vzcptcheck</b> <b>caps</b> <u>capnum</u>
       To  get CPU capabilities number, run <b>vzcptcheck</b> <b>caps</b> on the destination node. Then, to check if a running
       CT can be live migrated to a node with such a CPU, run <b>vzcptcheck</b> <b>caps</b> <u>ctid</u> <u>capnum</u> on  the  source  node.
       To  check if a suspended container can be migrated (i.e. it can be restored on the destination node), use
       the form without <u>ctid</u>: <b>vzcptcheck</b> <b>caps</b> <u>capnum</u>.

</pre><h4><b>EXIT</b> <b>STATUS</b></h4><pre>
       In showing mode, returns <b>0</b> upon success, or <b>1</b> in case of an error.

       In testing mode, returns <b>0</b> if migration is possible (test passed), <b>1</b>  in  case  of  an  error,  or  <b>2</b>  if
       migration is not possible (test failed).

</pre><h4><b>EXAMPLES</b></h4><pre>
       To  check  if a CT 123 can be migrated to $DEST, run the following commands on the source node. Note that
       error checking is omitted for brevity.

          VEID=123
          VERSION=$(vzcptcheck version)
          echo Got CPT version: $VERSION
          ssh root@$DEST vzcptcheck version $VERSION
          echo Version check result: $?
          CAPS=$(ssh root@$DEST vzcptcheck caps)
          echo Got caps: $CAPS
          vzcptcheck caps $VEID $CAPS
          echo Caps check result: $?

       If both tests pass, you should get 0 as a result for both checks.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man8/vzmigrate.8.html">vzmigrate</a></b>(8).

</pre><h4><b>LICENSE</b></h4><pre>
       Copyright (C) 2013-2015, Parallels, Inc. Licensed under GNU GPL v2.

OpenVZ                                             21 Apr 2015                                     <u><a href="../man8/vzcptcheck.8.html">vzcptcheck</a></u>(8)
</pre>
 </div>
</div></section>
</div>
</body>
</html>