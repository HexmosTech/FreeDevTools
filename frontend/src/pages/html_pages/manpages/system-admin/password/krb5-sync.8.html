<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>krb5-sync - Synchronize passwords and status with Active Directory</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/krb5-sync-tools">krb5-sync-tools_3.1-3build1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       krb5-sync - Synchronize passwords and status with Active Directory

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>krb5-sync</b> [<b>-d</b> | <b>-e</b>] [<b>-p</b> <u>password</u>] <u>user</u>

       <b>krb5-sync</b> <b>-f</b> <u>file</u>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>krb5-sync</b> provides a command-line interface to the same functions provided by the password and status
       synchronization plugin.  It can push a new password to Active Directory (actually, to any password store
       that supports the Kerberos set-password protocol) or activate or deactivate an account in Active
       Directory.

       To synchronize passwords, provide the <b>-p</b> option and specify the password.  Note that the password is
       given on the command line and must be quoted if it contains special characters, and the password will be
       exposed to any other users on the system where this command is run.  This is useful primarily for testing
       and should not be used with production passwords.  Synchronization to Active Directory will be attempted
       based on the configuration in <u>krb5.conf</u> (see below).

       To enable or disable an account, provide the <b>-e</b> or <b>-d</b> option respectively.  These options can also be
       provided in conjunction with the <b>-p</b> option to take both actions at once.

       In either case, <u>user</u> should be the principal name for which these actions should be taken.  <u>user</u> may be
       either unqualified or in the local realm; either way, the Active Directory realm in which to make changes
       will be taken from the <u>krb5.conf</u> configuration.

       Alternately, <b>krb5-sync</b> also supports processing actions from a file.  To do this, use the <b>-f</b> flag and
       give the file on the command line.  The format of the file should be as follows:

           &lt;account&gt;
           ad
           password | enable | disable
           &lt;password&gt;

       where the fourth line is present only if the &lt;action&gt; is "password".  &lt;account&gt; should be the unqualified
       name of the account.  The second line should be the string "ad" to push the change to Windows Active
       Directory.  The third line should be one of "password", "enable", or "disable", corresponding to the <b>-p</b>,
       <b>-e</b>, and <b>-d</b> options respectively.  The "enable" and "disable" actions are only supported for AD.

       The file format is not particularly forgiving.  In particular, all of the keywords are case-sensitive and
       there must not be any whitespace at the beginning or end of the lines (except in the password, and only
       if that whitespace is part of the password), just a single newline terminating each line.

       When the <b>-f</b> option is given, the file will be deleted if the action was successful but left alone if the
       action failed.

       The configuration block in <u>krb5.conf</u> should look something like this:

           krb5-sync = {
               ad_keytab       = /etc/krb5kdc/ad-keytab
               ad_principal    = service/<a href="mailto:sync@WINDOWS.EXAMPLE.COM">sync@WINDOWS.EXAMPLE.COM</a>
               ad_realm        = WINDOWS.EXAMPLE.COM
               ad_admin_server = dc1.windows.example.com
               ad_ldap_base    = ou=People
           }

       If the configuration required for an action is not given, that action will not be performed but will
       apparently succeed from the perspective of the <b>krb5-sync</b> utility.  Therefore, if this utility reports
       success but no change is happening, double-check the configuration to ensure that all required options
       are present.

       The "ad_keytab" option specifies the location of a keytab for authenticating to the other realm, the
       "ad_principal" option specifies the principal to authenticate as (using the key in the keytab), and the
       "ad_realm" option specifies the foreign realm.  "ad_admin_server" is the host to contact via LDAP to push
       account status changes.  "ad_ldap_base" specifies the base tree inside Active Directory where account
       information is stored.  Omit the trailing "dc=" part; it will be added automatically from "ad_realm".

       Be aware that the "ad_instances", "ad_base_instance", and "ad_queue_only" configuration options that are
       used by the krb5-sync plugin are ignored by <b>krb5-sync</b>.  The <b>krb5-sync</b> command will push changes to
       whatever principal it was given, regardless of the normal limits on instances, and does not do any of the
       principal remapping configured with "ad_base_instance".

</pre><h4><b>OPTIONS</b></h4><pre>
       <b>-d</b>  Disable  the  specified  user  in  Active Directory.  Requires that all of the ad_* options be set in
           <u>krb5.conf</u>.  This option may not be specified at the same time as <b>-e</b>.

       <b>-e</b>  Enable the specified user in Active Directory.  Requires that all of  the  ad_*  options  be  set  in
           <u>krb5.conf</u>.  This option may not be specified at the same time as <b>-e</b>.

       <b>-f</b> <u>file</u>
           Rather  than  perform a particular action based on a username given on the command line, read a queue
           file and take action based on it.  The format of the queue file is described above.   If  the  action
           fails, the file will be left alone.  If the action succeeds, the file will be deleted.

       <b>-p</b> <u>password</u>
           Change the user's password to <u>password</u> in Active Directory.

</pre><h4><b>EXAMPLES</b></h4><pre>
       Disable the account "jdoe" in Active Directory (using the AD configuration found in <u>krb5.conf</u>):

           krb5-sync -d jdoe

       Change the password of the account "testuser" in Active Directory to "changeme":

           krb5-sync -p changeme <a href="mailto:testuser@EXAMPLE.COM">testuser@EXAMPLE.COM</a>

       The same, except also enable the account in Active Directory:

           krb5-sync -e -p changeme testuser

       Note that the realm for the user given on the command line is optional and ignored.

       Given a file named <u>jdoe-ad-1168560492</u> containing:

           jdoe
           ad
           password
           changeme

       the command:

           krb5-sync -f jdoe-ad-1168560492

       will change jdoe's password to "changeme" in Active Directory and then delete the file.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       The    current    version    of    this    program    is    available    from    its    web    page    at
       &lt;<a href="http://www.eyrie.org/~eagle/software/krb5-sync/">http://www.eyrie.org/~eagle/software/krb5-sync/</a>&gt;.

</pre><h4><b>AUTHOR</b></h4><pre>
       Russ Allbery &lt;<a href="mailto:eagle@eyrie.org">eagle@eyrie.org</a>&gt;

</pre><h4><b>COPYRIGHT</b> <b>AND</b> <b>LICENSE</b></h4><pre>
       Copyright 2007, 2008, 2010, 2012 The Board of Trustees of the Leland Stanford Junior University

       Copying and distribution of this file, with or without modification, are permitted in any medium  without
       royalty provided the copyright notice and this notice are preserved.  This file is offered as-is, without
       any warranty.

3.1                                                2015-08-19                                       <u><a href="../man8/KRB5-SYNC.8.html">KRB5-SYNC</a></u>(8)
</pre>
 </div>
</div></section>
</div>
</body>
</html>