<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>chpasswd - update passwords in batch mode</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/passwd">passwd_4.17.4-2ubuntu1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       chpasswd - update passwords in batch mode

</pre><h4><b>SYNOPSIS</b></h4><pre>

       <b>chpasswd</b> [<u>options</u>]

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The <b>chpasswd</b> command reads a list of user name and password pairs from standard input and uses this
       information to update a group of existing users. Each line is of the format:

       <u>user_name</u>:<u>password</u>

       By default the passwords must be supplied in clear-text, and are encrypted by <b>chpasswd</b>. Also the password
       age will be updated, if present.

       By default, passwords are encrypted by PAM, but (even if not recommended) you can select a different
       encryption method with the <b>-e</b>, <b>-m</b>, or <b>-c</b> options.

       Except when PAM is used to encrypt the passwords, <b>chpasswd</b> first updates all the passwords in memory, and
       then commits all the changes to disk if no errors occurred for any user.

       When PAM is used to encrypt the passwords (and update the passwords in the system database) then if a
       password cannot be updated <b>chpasswd</b> continues updating the passwords of the next users, and will return
       an error code on exit.

       This command is intended to be used in a large system environment where many accounts are created at a
       single time.

</pre><h4><b>OPTIONS</b></h4><pre>
       The options which apply to the <b>chpasswd</b> command are:

       <b>-c</b>, <b>--crypt-method</b> <u>METHOD</u>
           Use the specified method to encrypt the passwords.

           The available methods are <u>DES</u>, <u>MD5</u>, <u>SHA256</u>, <u>SHA512</u>, <u>YESCRYPT</u> and <u>NONE</u> if your libc supports these
           methods.

           By default, PAM is used to encrypt the passwords.

       <b>-e</b>, <b>--encrypted</b>
           Supplied passwords are in encrypted form.

       <b>-h</b>, <b>--help</b>
           Display help message and exit.

       <b>-m</b>, <b>--md5</b>
           Use MD5 encryption instead of DES when the supplied passwords are not encrypted.

       <b>-R</b>, <b>--root</b> <u>CHROOT_DIR</u>
           Apply changes in the <u>CHROOT_DIR</u> directory and use the configuration files from the <u>CHROOT_DIR</u>
           directory. Only absolute paths are supported.

       <b>-P</b>, <b>--prefix</b> <u>PREFIX_DIR</u>
           Apply changes to configuration files under the root filesystem found under the directory <u>PREFIX_DIR</u>.
           This option does not chroot and is intended for preparing a cross-compilation target. Some
           limitations: NIS and LDAP users/groups are not verified. PAM authentication is using the host files.
           No SELINUX support.

       <b>-s</b>, <b>--sha-rounds</b> <u>ROUNDS</u>
           Use the specified number of rounds to encrypt the passwords.

           You can only use this option with crypt method: <u>SHA256</u> <u>SHA512</u> <u>YESCRYPT</u>

           By default, the number of rounds for SHA256 or SHA512 is defined by the SHA_CRYPT_MIN_ROUNDS and
           SHA_CRYPT_MAX_ROUNDS variables in /etc/login.defs.

           A minimal value of 1000 and a maximal value of 999,999,999 will be enforced for SHA256 and SHA512.
           The default number of rounds is 5000.

           By default, the number of rounds for YESCRYPT is defined by the YESCRYPT_COST_FACTOR in
           /etc/login.defs.

           A minimal value of 1 and a maximal value of 11 will be enforced for YESCRYPT. The default number of
           rounds is 5.

</pre><h4><b>CAVEATS</b></h4><pre>
       Remember to set permissions or umask to prevent readability of unencrypted files by other users.

</pre><h4><b>CONFIGURATION</b></h4><pre>
       The following configuration variables in <a href="file:/etc/login.defs">/etc/login.defs</a> change the behavior of this tool:

       <b>SHA_CRYPT_MIN_ROUNDS</b> (number), <b>SHA_CRYPT_MAX_ROUNDS</b> (number)
           When <b>ENCRYPT_METHOD</b> is set to <u>SHA256</u> or <u>SHA512</u>, this defines the number of SHA rounds used by the
           encryption algorithm by default (when the number of rounds is not specified on the command line).

           With a lot of rounds, it is more difficult to brute force the password. But note also that more CPU
           resources will be needed to authenticate users.

           If not specified, the libc will choose the default number of rounds (5000), which is orders of
           magnitude too low for modern hardware.

           The values must be inside the 1000-999,999,999 range.

           If only one of the <b>SHA_CRYPT_MIN_ROUNDS</b> or <b>SHA_CRYPT_MAX_ROUNDS</b> values is set, then this value will
           be used.

           If <b>SHA_CRYPT_MIN_ROUNDS</b> &gt; <b>SHA_CRYPT_MAX_ROUNDS</b>, the highest value will be used.

           Note: This only affect the generation of group passwords. The generation of user passwords is done by
           PAM and subject to the PAM configuration. It is recommended to set this variable consistently with
           the PAM configuration.

       <b>YESCRYPT_COST_FACTOR</b> (number)
           When <b>ENCRYPT_METHOD</b> is set to <u>YESCRYPT</u>, this defines the cost factor used by the encryption algorithm
           by default (when the cost factor is not specified on the command line).

           With a high cost factor, it is more difficult to brute force the password. But note also that more
           CPU resources will be needed to authenticate users.

           The value must be inside the 1-11 range.

           Note: This only affect the generation of group passwords. The generation of user passwords is done by
           PAM and subject to the PAM configuration. It is recommended to set this variable consistently with
           the PAM configuration.

</pre><h4><b>FILES</b></h4><pre>
       <a href="file:/etc/passwd">/etc/passwd</a>
           User account information.

       <a href="file:/etc/shadow">/etc/shadow</a>
           Secure user account information.

       <a href="file:/etc/login.defs">/etc/login.defs</a>
           Shadow password suite configuration.

       <a href="file:/etc/pam.d/chpasswd">/etc/pam.d/chpasswd</a>
           PAM configuration for <b>chpasswd</b>.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man1/passwd.1.html">passwd</a></b>(1), <b><a href="../man8/newusers.8.html">newusers</a></b>(8), <b><a href="../man5/login.defs.5.html">login.defs</a></b>(5), <b><a href="../man8/useradd.8.html">useradd</a></b>(8).

shadow-utils 4.17.4                                05/07/2025                                        <u><a href="../man8/CHPASSWD.8.html">CHPASSWD</a></u>(8)
</pre>
 </div>
</div></section>
</div>
</body>
</html>