<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>cockpit-tls - TLS proxy for Cockpit web service</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/cockpit-ws">cockpit-ws_342-1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       cockpit-tls - TLS proxy for Cockpit web service

</pre><h4><b>SYNOPSIS</b></h4><pre>

       <b>cockpit-tls</b> [<b>--help</b>] [<b>--port</b> <u>PORT</u>] [<b>--no-tls</b>] [<b>--idle-timeout</b> <u>SECONDS</u>]

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The <b>cockpit-tls</b> program is a TLS terminating HTTP proxy for <b><a href="../man8/cockpit-ws.8.html">cockpit-ws</a></b>(8). It manages a set of isolated
       cockpit-ws instances, one per TLS client certificate, plus one for TLS without a client certificate, and
       one for unencrypted HTTP. With that, one session cannot tamper with another one through possible security
       vulnerability exploits.

       Users or administrators should never need to start this program as it automatically started by <b><a href="../man1/systemd.1.html">systemd</a></b>(1)
       via socket activation.

</pre><h4><b>TRANSPORT</b> <b>SECURITY</b></h4><pre>
       To specify the TLS certificate the web service should use, simply drop a file with the extension .cert in
       the /etc/cockpit/ws-certs.d directory, or below $XDG_CONFIG_DIRS if set (see <b>cockpit.conf</b>[1]). If there
       are multiple files in this directory, then the highest priority one is chosen after sorting.

       The .cert file should contain at least two OpenSSL style PEM blocks. First one or more BEGIN CERTIFICATE
       blocks for the server certificate and intermediate certificate authorities and a second one containing a
       BEGIN PRIVATE KEY or similar. The key must not be encrypted.

       If there is no TLS certificate, a self-signed certificate is automatically generated using <b>sscg</b> (if
       available) or <b>openssl</b> and stored in the 0-self-signed.cert file.

       When enrolling into a FreeIPA domain, an SSL certificate is requested from the IPA server and stored in
       10-ipa.cert.

       To check which certificate <b>cockpit-ws</b> will use, run the following command.

           $ sudo /usr/libexec/cockpit-certificate-ensure --check

       Or, on Debian-based systems:

           $ sudo /usr/lib/cockpit/cockpit-certificate-ensure --check

       If using certmonger to manage certificates, following command can be used to generate a certificate/key
       pair:

           CERT_FILE=/etc/cockpit/ws-certs.d/50-certmonger.crt
           KEY_FILE=/etc/cockpit/ws-certs.d/50-certmonger.key

           getcert request -f ${CERT_FILE} -k ${KEY_FILE} -D $(hostname --fqdn)

</pre><h4><b>OPTIONS</b></h4><pre>
       <b>--help</b>
           Show help options.

       <b>--port</b> <u>PORT</u>
           Serve HTTP requests on <u>PORT</u> instead of port 9090. Usually Cockpit is started on demand by <b>systemd</b>
           socket activation, and this option has no effect. Update the ListenStream directive cockpit.socket
           file in the usual <b>systemd</b> manner.

       <b>--no-tls</b>
           Don't use TLS. Certificates will not be read, and https connections denied. Then <b>cockpit-tls</b> will
           only manage a single cockpit-ws instance, and thus not do anything different than running <b>cockpit-ws</b>
           <b>--no-tls</b> directly. Only use this for debugging or testing.

       <b>--idle-timeout</b> <u>SECONDS</u>
           If greater than 0, exit if no connections have happened for the given number of seconds, i. e. the
           server is idle. If not given, the default is 90.

</pre><h4><b>ENVIRONMENT</b></h4><pre>
       The <b>cockpit-tls</b> program expects the RUNTIME_DIRECTORY environment variable to be set to an empty
       directory (preferably in <a href="file:/run/">/run/</a>) that is only accessible by the system user under which it is running.
       This contains the Unix sockets for communicating with the <b>cockpit-ws</b> instances, and in the future, state
       information about client certificates. This variable is normally set by the cockpit.service systemd unit.

       In addition, <b>cockpit-tls</b> will use the XDG_CONFIG_DIRS environment variable from the <b>XDG</b> <b>basedir</b> <b>spec</b>[2]
       to find its certificates and the <b><a href="../man5/cockpit.conf.5.html">cockpit.conf</a></b>(5) configuration file.

</pre><h4><b>BUGS</b></h4><pre>
       Please send bug reports to either the distribution bug tracker or the <b>upstream</b> <b>bug</b> <b>tracker</b>[3].

</pre><h4><b>AUTHOR</b></h4><pre>
       Cockpit has been written by many <b>contributors</b>[4].

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man8/cockpit-ws.8.html">cockpit-ws</a></b>(8) , <b><a href="../man5/cockpit.conf.5.html">cockpit.conf</a></b>(5) , <b><a href="../man1/systemd.1.html">systemd</a></b>(1)

</pre><h4><b>NOTES</b></h4><pre>
        1. cockpit.conf
           [set $man.base.url.for.relative.links]/./cockpit.conf.5.html

        2. XDG basedir spec
           https://specifications.freedesktop.org/basedir-spec/basedir-spec-latest.html

        3. upstream bug tracker
           https://github.com/cockpit-project/cockpit/issues/new

        4. contributors
           https://github.com/cockpit-project/cockpit/graphs/contributors

cockpit                                            07/09/2025                                     <u><a href="../man8/COCKPIT-TLS.8.html">COCKPIT-TLS</a></u>(8)
</pre>
 </div>
</div></section>
</div>
</body>
</html>