<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>kdb5_ldap_util - Kerberos configuration utility</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/krb5-kdc-ldap">krb5-kdc-ldap_1.21.3-5ubuntu1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       kdb5_ldap_util - Kerberos configuration utility

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>kdb5_ldap_util</b> [<b>-D</b> <u>user_dn</u> [<b>-w</b> <u>passwd</u>]] [<b>-H</b> <u>ldapuri</u>] <b>command</b> [<u>command_options</u>]

</pre><h4><b>DESCRIPTION</b></h4><pre>
       kdb5_ldap_util allows an administrator to manage realms, Kerberos services and ticket policies.

</pre><h4><b>COMMAND-LINE</b> <b>OPTIONS</b></h4><pre>
       <b>-r</b> <u>realm</u>
              Specifies the realm to be operated on.

       <b>-D</b> <u>user_dn</u>
              Specifies  the  Distinguished  Name  (DN)  of  the  user  who has sufficient rights to perform the
              operation on the LDAP server.

       <b>-w</b> <u>passwd</u>
              Specifies the password of <u>user_dn</u>.  This option is not recommended.

       <b>-H</b> <u>ldapuri</u>
              Specifies the URI of the LDAP server.

       By default, kdb5_ldap_util operates on the default realm (as specified in <a href="../man5/krb5.conf.5.html">krb5.conf</a>(5)) and connects  and
       authenticates  to  the  LDAP  server in the same manner as :ref:<a href="../man8/kadmind.8.html">kadmind</a>(8)` would given the parameters in
       dbdefaults in <a href="../man5/kdc.conf.5.html">kdc.conf</a>(5).

</pre><h4><b>COMMANDS</b></h4><pre>
   <b>create</b>
          <b>create</b> [<b>-subtrees</b> <u>subtree_dn_list</u>] [<b>-sscope</b> <u>search_scope</u>] [<b>-containerref</b>  <u>container_reference_dn</u>]  [<b>-k</b>
          <u>mkeytype</u>]   [<b>-kv</b>   <u>mkeyVNO</u>]   [<b>-M</b>  <u>mkeyname</u>]  [<b>-m|-P</b>  <u>password</u>|<b>-sf</b>  <u>stashfilename</u>]  [<b>-s</b>]  [<b>-maxtktlife</b>
          <u>max_ticket_life</u>] [<b>-maxrenewlife</b> <u>max_renewable_ticket_life</u>] [<u>ticket_flags</u>]

       Creates realm in directory. Options:

       <b>-subtrees</b> <u>subtree_dn_list</u>
              Specifies the list of subtrees containing the principals of a realm.  The list contains the DNs of
              the subtree objects separated by colon (<b>:</b>).

       <b>-sscope</b> <u>search_scope</u>
              Specifies the scope for searching the principals under the subtree.  The possible values are 1  or
              one (one level), 2 or sub (subtrees).

       <b>-containerref</b> <u>container_reference_dn</u>
              Specifies  the  DN of the container object in which the principals of a realm will be created.  If
              the container reference is not configured for a realm, the principals will be created in the realm
              container.

       <b>-k</b> <u>mkeytype</u>
              Specifies the key type of  the  master  key  in  the  database.   The  default  is  given  by  the
              <b>master_key_type</b> variable in <a href="../man5/kdc.conf.5.html">kdc.conf</a>(5).

       <b>-kv</b> <u>mkeyVNO</u>
              Specifies  the version number of the master key in the database; the default is 1.  Note that 0 is
              not allowed.

       <b>-M</b> <u>mkeyname</u>
              Specifies the principal name for the master key in the database.  If not specified,  the  name  is
              determined by the <b>master_key_name</b> variable in <a href="../man5/kdc.conf.5.html">kdc.conf</a>(5).

       <b>-m</b>     Specifies that the master database password should be read from the TTY rather than fetched from a
              file on the disk.

       <b>-P</b> <u>password</u>
              Specifies the master database password. This option is not recommended.

       <b>-sf</b> <u>stashfilename</u>
              Specifies the stash file of the master database password.

       <b>-s</b>     Specifies that the stash file is to be created.

       <b>-maxtktlife</b> <u>max_ticket_life</u>
              (getdate string) Specifies maximum ticket life for principals in this realm.

       <b>-maxrenewlife</b> <u>max_renewable_ticket_life</u>
              (getdate string) Specifies maximum renewable life of tickets for principals in this realm.

       <u>ticket_flags</u>
              Specifies global ticket flags for the realm.  Allowable flags are documented in the description of
              the <b>add_principal</b> command in <a href="../man1/kadmin.1.html">kadmin</a>(1).

       Example:

          kdb5_ldap_util -D cn=admin,o=org -H ldaps://ldap-server1.mit.edu
              -r ATHENA.MIT.EDU create -subtrees o=org -sscope SUB
          Password for "cn=admin,o=org":
          Initializing database for realm 'ATHENA.MIT.EDU'
          You will be prompted for the database Master Password.
          It is important that you NOT FORGET this password.
          Enter KDC database master key:
          Re-enter KDC database master key to verify:

   <b>modify</b>
          <b>modify</b>  [<b>-subtrees</b>  <u>subtree_dn_list</u>]  [<b>-sscope</b>  <u>search_scope</u>]  [<b>-containerref</b>  <u>container_reference_dn</u>]
          [<b>-maxtktlife</b> <u>max_ticket_life</u>] [<b>-maxrenewlife</b> <u>max_renewable_ticket_life</u>] [<u>ticket_flags</u>]

       Modifies the attributes of a realm.  Options:

       <b>-subtrees</b> <u>subtree_dn_list</u>
              Specifies the list of subtrees containing the principals of a realm.  The list contains the DNs of
              the subtree objects separated by colon (<b>:</b>).  This list replaces the existing list.

       <b>-sscope</b> <u>search_scope</u>
              Specifies the scope for searching the principals under the subtrees.  The possible values are 1 or
              one (one level), 2 or sub (subtrees).

       <b>-containerref</b> <u>container_reference_dn</u> Specifies the DN of the
              container object in which the principals of a realm will be created.

       <b>-maxtktlife</b> <u>max_ticket_life</u>
              (getdate string) Specifies maximum ticket life for principals in this realm.

       <b>-maxrenewlife</b> <u>max_renewable_ticket_life</u>
              (getdate string) Specifies maximum renewable life of tickets for principals in this realm.

       <u>ticket_flags</u>
              Specifies global ticket flags for the realm.  Allowable flags are documented in the description of
              the <b>add_principal</b> command in <a href="../man1/kadmin.1.html">kadmin</a>(1).

       Example:

          shell% kdb5_ldap_util -r ATHENA.MIT.EDU -D cn=admin,o=org -H
              ldaps://ldap-server1.mit.edu modify +requires_preauth
          Password for "cn=admin,o=org":
          shell%

   <b>view</b>
          <b>view</b>

       Displays the attributes of a realm.

       Example:

          kdb5_ldap_util -D cn=admin,o=org -H ldaps://ldap-server1.mit.edu
              -r ATHENA.MIT.EDU view
          Password for "cn=admin,o=org":
          Realm Name: ATHENA.MIT.EDU
          Subtree: ou=users,o=org
          Subtree: ou=servers,o=org
          SearchScope: ONE
          Maximum ticket life: 0 days 01:00:00
          Maximum renewable life: 0 days 10:00:00
          Ticket flags: DISALLOW_FORWARDABLE REQUIRES_PWCHANGE

   <b>destroy</b>
          <b>destroy</b> [<b>-f</b>]

       Destroys an existing realm. Options:

       <b>-f</b>     If specified, will not prompt the user for confirmation.

       Example:

          shell% kdb5_ldap_util -r ATHENA.MIT.EDU -D cn=admin,o=org -H
              ldaps://ldap-server1.mit.edu destroy
          Password for "cn=admin,o=org":
          Deleting KDC database of 'ATHENA.MIT.EDU', are you sure?
          (type 'yes' to confirm)? yes
          OK, deleting database of 'ATHENA.MIT.EDU'...
          shell%

   <b>list</b>
          <b>list</b>

       Lists the names of realms under the container.

       Example:

          shell% kdb5_ldap_util -D cn=admin,o=org -H
              ldaps://ldap-server1.mit.edu list
          Password for "cn=admin,o=org":
          ATHENA.MIT.EDU
          OPENLDAP.MIT.EDU
          MEDIA-LAB.MIT.EDU
          shell%

   <b>stashsrvpw</b>
          <b>stashsrvpw</b> [<b>-f</b> <u>filename</u>] <u>name</u>

       Allows an administrator to store the password for service object in a file so that KDC and Administration
       server can use it to authenticate to the LDAP server.  Options:

       <b>-f</b> <u>filename</u>
              Specifies   the    complete    path    of    the    service    password    file.    By    default,
              <b>/usr/local/var/service_passwd</b> is used.

       <u>name</u>   Specifies  the name of the object whose password is to be stored.  If <a href="../man8/krb5kdc.8.html">krb5kdc</a>(8) or <a href="../man8/kadmind.8.html">kadmind</a>(8) are
              configured for simple binding, this should be the distinguished name it will use as given  by  the
              <b>ldap_kdc_dn</b>  or  <b>ldap_kadmind_dn</b> variable in <a href="../man5/kdc.conf.5.html">kdc.conf</a>(5).  If the KDC or kadmind is configured for
              SASL  binding,  this  should  be  the  authentication  name  it  will  use   as   given   by   the
              <b>ldap_kdc_sasl_authcid</b> or <b>ldap_kadmind_sasl_authcid</b> variable.

       Example:

          kdb5_ldap_util stashsrvpw -f /home/andrew/conf_keyfile
              cn=service-kdc,o=org
          Password for "cn=service-kdc,o=org":
          Re-enter password for "cn=service-kdc,o=org":

   <b>create_policy</b>
          <b>create_policy</b>  [<b>-maxtktlife</b>  <u>max_ticket_life</u>] [<b>-maxrenewlife</b> <u>max_renewable_ticket_life</u>] [<u>ticket_flags</u>]
          <u>policy_name</u>

       Creates a ticket policy in the directory.  Options:

       <b>-maxtktlife</b> <u>max_ticket_life</u>
              (getdate string) Specifies maximum ticket life for principals.

       <b>-maxrenewlife</b> <u>max_renewable_ticket_life</u>
              (getdate string) Specifies maximum renewable life of tickets for principals.

       <u>ticket_flags</u>
              Specifies the ticket flags.  If this option is not specified, by default, no restriction  will  be
              set by the policy.  Allowable flags are documented in the description of the <b>add_principal</b> command
              in <a href="../man1/kadmin.1.html">kadmin</a>(1).

       <u>policy_name</u>
              Specifies the name of the ticket policy.

       Example:

          kdb5_ldap_util -D cn=admin,o=org -H ldaps://ldap-server1.mit.edu
              -r ATHENA.MIT.EDU create_policy -maxtktlife "1 day"
              -maxrenewlife "1 week" -allow_postdated +needchange
              -allow_forwardable tktpolicy
          Password for "cn=admin,o=org":

   <b>modify_policy</b>
          <b>modify_policy</b>  [<b>-maxtktlife</b>  <u>max_ticket_life</u>] [<b>-maxrenewlife</b> <u>max_renewable_ticket_life</u>] [<u>ticket_flags</u>]
          <u>policy_name</u>

       Modifies the attributes of a ticket policy.  Options are same as for <b>create_policy</b>.

       Example:

          kdb5_ldap_util -D cn=admin,o=org -H
              ldaps://ldap-server1.mit.edu -r ATHENA.MIT.EDU modify_policy
              -maxtktlife "60 minutes" -maxrenewlife "10 hours"
              +allow_postdated -requires_preauth tktpolicy
          Password for "cn=admin,o=org":

   <b>view_policy</b>
          <b>view_policy</b> <u>policy_name</u>

       Displays the attributes of the named ticket policy.

       Example:

          kdb5_ldap_util -D cn=admin,o=org -H ldaps://ldap-server1.mit.edu
              -r ATHENA.MIT.EDU view_policy tktpolicy
          Password for "cn=admin,o=org":
          Ticket policy: tktpolicy
          Maximum ticket life: 0 days 01:00:00
          Maximum renewable life: 0 days 10:00:00
          Ticket flags: DISALLOW_FORWARDABLE REQUIRES_PWCHANGE

   <b>destroy_policy</b>
          <b>destroy_policy</b> [<b>-force</b>] <u>policy_name</u>

       Destroys an existing ticket policy.  Options:

       <b>-force</b> Forces the deletion of the policy object.  If  not  specified,  the  user  will  be  prompted  for
              confirmation before deleting the policy.

       <u>policy_name</u>
              Specifies the name of the ticket policy.

       Example:

          kdb5_ldap_util -D cn=admin,o=org -H ldaps://ldap-server1.mit.edu
              -r ATHENA.MIT.EDU destroy_policy tktpolicy
          Password for "cn=admin,o=org":
          This will delete the policy object 'tktpolicy', are you sure?
          (type 'yes' to confirm)? yes
          ** policy object 'tktpolicy' deleted.

   <b>list_policy</b>
          <b>list_policy</b>

       Lists ticket policies.

       Example:

          kdb5_ldap_util -D cn=admin,o=org -H ldaps://ldap-server1.mit.edu
              -r ATHENA.MIT.EDU list_policy
          Password for "cn=admin,o=org":
          tktpolicy
          tmppolicy
          userpolicy

</pre><h4><b>ENVIRONMENT</b></h4><pre>
       See <a href="../man7/kerberos.7.html">kerberos</a>(7) for a description of Kerberos environment variables.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <a href="../man1/kadmin.1.html">kadmin</a>(1), <a href="../man7/kerberos.7.html">kerberos</a>(7)

</pre><h4><b>AUTHOR</b></h4><pre>
       MIT

</pre><h4><b>COPYRIGHT</b></h4><pre>
       1985-2024, MIT

1.21.3                                                                                         <u><a href="../man8/KDB5_LDAP_UTIL.8.html">KDB5_LDAP_UTIL</a></u>(8)
</pre>
 </div>
</div></section>
</div>
</body>
</html>