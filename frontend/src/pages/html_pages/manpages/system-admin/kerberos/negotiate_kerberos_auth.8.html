<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>negotiate_kerberos_auth - Squid kerberos based authentication helper</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/squid">squid_6.13-1ubuntu1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       negotiate_kerberos_auth - Squid kerberos based authentication helper

       Version 3.0.4sq

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>negotiate_kerberos_auth</b>   <b>[-h]</b>   <b>[-d]</b>   <b>[-i]</b>   <b>[-r]</b>  <b>[-s</b>  <b>Service-Principal-Name]</b>  <b>[-k</b>  <b>Keytab-Name]</b>  <b>[-c</b>
       <b>Replay-Cache-Directory]</b> <b>[-t</b> <b>Replay-Cache-Type]</b>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>negotiate_kerberos_auth</b> is an installed binary and allows Squid to authenticate users via  the  Negotiate
       protocol and Kerberos.

</pre><h4><b>OPTIONS</b></h4><pre>
       <b>-h</b>          Display the binary help and command line syntax info using stderr.

       <b>-d</b>          Write debug messages to stderr.

       <b>-i</b>          Write informational messages to stderr.

       <b>-r</b>          Remove realm from username before returning the username to squid.

       <b>-s</b> <b>Service-Principal-name</b>
                   Provide Service Principal Name.

       <b>-k</b> <b>Keytab-Name</b>
                   Provide Kerberos Keytab Name (Default: /etc/krb5.keytab)

       <b>-c</b> <b>Replay-Cache-Directory</b>
                   Provide Replay Cache Directory (Default: <a href="file:/var/tmp">/var/tmp</a>)

       <b>-t</b> <b>Replay-Cache-Type</b>
                   Provide Replay Cache Type (Default: dfl)

</pre><h4><b>CONFIGURATION</b></h4><pre>
       This helper is intended to be used as an <b>authentication</b> helper in <b>squid.conf.</b>

       auth_param negotiate program /path/to/negotiate_kerberos_auth
       auth_param negotiate children 10
       auth_param negotiate keep_alive on

       <b>NOTE:</b> The following squid startup file modification may be required:

       Add  the  following  lines to the squid startup script to point squid to a keytab file which contains the
       HTTP/fqdn service principal for the default Kerberos domain. The keytab name can also be provided by  the
       -k &lt;keytab name&gt; option. The fqdn must be the proxy name set in IE
        or firefox. You can not use an IP address.

       KRB5_KTNAME=/etc/squid/HTTP.keytab export KRB5_KTNAME

       If  you use a different Kerberos domain than the machine itself is in you can point squid to the separate
       Kerberos config file by setting the following environment variable in the startup script.

       KRB5_CONFIG=/etc/krb5-squid.conf export KRB5_CONFIG

       Kerberos can keep a replay cache to detect the reuse of Kerberos tickets (usually only possible  in  a  5
       minute  window)  . If squid is under high load with Negotiate(Kerberos) proxy authentication requests the
       replay cache checks can create high CPU load. If the environment  does  not  require  high  security  the
       replay  cache  check  can  be  disabled for MIT based Kerberos implementations by adding the below to the
       startup script or use the -t none option.

       KRB5RCACHETYPE=none export KRB5RCACHETYPE

       If negotiate_kerberos_auth doesn't determine for some reason the right service principal you can  provide
       it with -s HTTP/fqdn.

       If  you  serve  multiple  Kerberos  realms  add  a  HTTP/fqdn@REALM  service  principal  per realm to the
       HTTP.keytab file and use the -s GSS_C_NO_NAME option with negotiate_kerberos_auth.

</pre><h4><b>AUTHOR</b></h4><pre>
       This program was written by <u>Markus</u> <u>Moeller</u> <u>&lt;<a href="mailto:markus_moeller@compuserve.com">markus_moeller@compuserve.com</a>&gt;</u>

       This manual was written by <u>Markus</u> <u>Moeller</u> <u>&lt;<a href="mailto:markus_moeller@compuserve.com">markus_moeller@compuserve.com</a>&gt;</u>

</pre><h4><b>COPYRIGHT</b></h4><pre>
        * Copyright (C) 1996-2014 The Squid Software Foundation and contributors
        *
        * Squid software is distributed under GPLv2+ license and includes
        * contributions from numerous individuals and organizations.
        * Please see the COPYING and CONTRIBUTORS files for details.

       This program and documentation is copyright to the authors named above.

       Distributed under the GNU General Public License (GNU GPL) version 2 or later (GPLv2+).

</pre><h4><b>QUESTIONS</b></h4><pre>
       Questions  on  the  usage  of  this  program  can   be   sent   to   the   <u>Squid</u>   <u>Users</u>   <u>mailing</u>   <u>list</u>
       &lt;<a href="mailto:squid-users@lists.squid-cache.org">squid-users@lists.squid-cache.org</a>&gt;

</pre><h4><b>REPORTING</b> <b>BUGS</b></h4><pre>
       Bug  reports  need  to  be  made  in English.  See https://wiki.squid-cache.org/SquidFaq/BugReporting for
       details of what you need to include with your bug report.

       Report bugs or bug fixes using <a href="http://bugs.squid-cache.org/">http://bugs.squid-cache.org/</a>

       Report serious security bugs to <u>Squid</u> <u>Bugs</u> <u>&lt;<a href="mailto:squid-bugs@lists.squid-cache.org">squid-bugs@lists.squid-cache.org</a>&gt;</u>

       Report ideas for new improvements to the <u>Squid</u> <u>Developers</u> <u>mailing</u> <u>list</u> &lt;<a href="mailto:squid-dev@lists.squid-cache.org">squid-dev@lists.squid-cache.org</a>&gt;

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man8/squid.8.html">squid</a></b>(8) <b><a href="../man8/ext_kerberos_ldap_group_acl.8.html">ext_kerberos_ldap_group_acl</a></b>(8)
       <b>RFC4559</b> - SPNEGO-based Kerberos and NTLM HTTP Authentication in Microsoft Windows,
       <b>RFC2478</b> - The Simple and Protected GSS-API Negotiation Mechanism,
       <b>RFC1964</b> - The Kerberos Version 5 GSS-API Mechanism,
       The Squid FAQ wiki https://wiki.squid-cache.org/SquidFaq
       The          Squid          Configuration          Manual          <a href="http://www.squid-cache.org/Doc/config/">http://www.squid-cache.org/Doc/config/</a>
       https://wiki.squid-cache.org/ConfigExamples/Authenticate/Kerberos

                                                                                      <u><a href="../man8/negotiate_kerberos_auth.8.html">negotiate_kerberos_auth</a></u>(8)
</pre>
 </div>
</div></section>
</div>
</body>
</html>