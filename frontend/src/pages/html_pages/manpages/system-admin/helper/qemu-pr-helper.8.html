<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>qemu-pr-helper - QEMU persistent reservation helper</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/qemu-system-common">qemu-system-common_10.0.2+ds-1ubuntu2_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       qemu-pr-helper - QEMU persistent reservation helper

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>qemu-pr-helper</b> [<u>OPTION</u>]

</pre><h4><b>DESCRIPTION</b></h4><pre>
       Implements the persistent reservation helper for QEMU.

       SCSI persistent reservations allow restricting access to block devices to specific initiators in a shared
       storage  setup.  When implementing clustering of virtual machines, it is a common requirement for virtual
       machines to send persistent reservation SCSI commands.  However, the operating system  restricts  sending
       these  commands  to  unprivileged  programs  because incorrect usage can disrupt regular operation of the
       storage fabric. QEMU's SCSI  passthrough  devices  <b>scsi-block</b>  and  <b>scsi-generic</b>  support  passing  guest
       persistent  reservation requests to a privileged external helper program. <b>qemu-pr-helper</b> is that external
       helper; it creates a listener socket which will accept incoming connections for communication with QEMU.

       If you want to run VMs in a setup like this, this helper should be started as a system service,  and  you
       should  read  the  QEMU  manual section on "persistent reservation managers" to find out how to configure
       QEMU to connect to the socket created by <b>qemu-pr-helper</b>.

       After connecting to the socket, <b>qemu-pr-helper</b> can optionally drop  root  privileges,  except  for  those
       capabilities that are needed for its operation.

       <b>qemu-pr-helper</b>  can  also  use  the systemd socket activation protocol.  In this case, the systemd socket
       unit should specify a Unix stream socket, like this:

          [Socket]
          ListenStream=/var/run/qemu-pr-helper.sock

</pre><h4><b>OPTIONS</b></h4><pre>
       <b>-d,</b> <b>--daemon</b>
              run in the background (and create a PID file)

       <b>-q,</b> <b>--quiet</b>
              decrease verbosity

       <b>-v,</b> <b>--verbose</b>
              increase verbosity

       <b>-f,</b> <b>--pidfile=PATH</b>
              PID file when running as a daemon. By default the PID file is created in the system runtime  state
              directory, for example <b>/var/run/qemu-pr-helper.pid</b>.

       <b>-k,</b> <b>--socket=PATH</b>
              path  to  the  socket. By default the socket is created in the system runtime state directory, for
              example <b>/var/run/qemu-pr-helper.sock</b>.

       <b>-T,</b> <b>--trace</b> <b>[[enable=]PATTERN][,events=FILE][,file=FILE]</b>
              Specify tracing options.

              <b>[enable=]PATTERN</b>
                 Immediately enable events matching <u>PATTERN</u> (either event name or  a  globbing  pattern).   This
                 option  is  only  available  if  QEMU  has been compiled with the <b>simple</b>, <b>log</b> or <b>ftrace</b> tracing
                 backend.  To specify multiple events or patterns, specify the <b>-trace</b> option multiple times.

                 Use <b>-trace</b> <b>help</b> to print a list of names of trace points.

              <b>events=FILE</b>
                 Immediately enable events listed in <u>FILE</u>.  The file must contain one event name (as  listed  in
                 the  <b>trace-events-all</b>  file) per line; globbing patterns are accepted too.  This option is only
                 available if QEMU has been compiled with the <b>simple</b>, <b>log</b> or <b>ftrace</b> tracing backend.

              <b>file=FILE</b>
                 Log output traces to <u>FILE</u>.  This option is only available if QEMU has been  compiled  with  the
                 <b>simple</b> tracing backend.

       <b>-u,</b> <b>--user=USER</b>
              user to drop privileges to

       <b>-g,</b> <b>--group=GROUP</b>
              group to drop privileges to

       <b>-h,</b> <b>--help</b>
              Display a help message and exit.

       <b>-V,</b> <b>--version</b>
              Display version information and exit.

</pre><h4><b>COPYRIGHT</b></h4><pre>
       2025, The QEMU Project Developers

10.0.2                                            Jul 02, 2025                                 <u><a href="../man8/QEMU-PR-HELPER.8.html">QEMU-PR-HELPER</a></u>(8)
</pre>
 </div>
</div></section>
</div>
</body>
</html>