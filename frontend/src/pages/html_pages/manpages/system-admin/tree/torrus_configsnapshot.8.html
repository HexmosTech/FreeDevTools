<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>configsnapshot - Generates a configuration snapshot for a Torrus tree.</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/torrus-common">torrus-common_3.00-2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       configsnapshot - Generates a configuration snapshot for a Torrus tree.

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>torrus</b> <b>configsnapshot</b> --tree=<u>TREENAME</u> [<u>options...</u>]

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This command generates a configuration snapshot from current datasources for tree <u>TREENAME</u>. The output is
       an XML file, ready for compilation, representing all datasources, monitors and tokensets of a given tree.
       The snapshot does not include view definitions. Templates and file patterns are expanded inside the file.
       It does not require any other XML configuration files, except for <u>defaults.xml</u> and your custom view
       definitions.

       <b>Warning:</b> "configsnapshot" from RRFW release 0.1.5 will not work correctly with databases from previous
       releases. Use RRFW release "0.1.4bf2" instead.  "configsnapshot" utility from RRFW release 0.1.4bf2 does
       not preserve aliases.

       This utility is useful in Torrus upgrade process. In case when RRD files structure is changing in Torrus
       default templates, and user(s) demand to preserve the historical data, the following steps could be done:

       •   Stop the collector and monitor processes.

       •   Install newest Torrus software and do not run "compilexml" immediately.

       •   Create snapshots of the trees that you want to preserve for historical reasons:

             torrus configsnapshot --tree=myrouters \
               --out=/etc/torrus/xmlconfig/myrouters-snapshot.xml

       •   If  needed,  move  the  existing  RRD  files  into  different  directory.  Then change the "data-dir"
           parameters in the snapshot XML accordingly.

       •   Create a new tree with only the snapshot file in it. Compile the tree.

       •   At this stage, it is up to the user to decide whether to continue running the collector  and  monitor
           daemons  for this new tree. The old data may be preserved for historical reference, and collector may
           be run with the newest tree structure and definitions.

</pre><h4><b>OPTIONS</b></h4><pre>
       <b>--tree</b>=<u>TREE</u>
           Mandatory parameter specifying the tree name.

       <b>--out</b>=<u>FILE</u>
           Sets the output file to <u>FILE</u>. Default is <u>snapshot.xml</u>.

       <b>--param</b>=<u>PARAM</u>  <b>--value</b>=<u>VALUE</u>
           Sets the filter on datasource leaves that have to be included in the snapshot.  <u>PARAM</u>  specifies  the
           name  of  the  datasource  parameter,  and  <u>VALUE</u>  sets  the  matching  value. By default the numeric
           comparison is performed.

       <b>--op</b>=<u>OPERATOR</u>
           Sets the fiter comparison operator. Accepted values: <b>=</b> (numeric), <b>eq</b> (text string comparison), and <b>re</b>
           (regular expression match). Default is numeric comparison.

       <b>--verbose</b>
           Displays some extra information.

       <b>--help</b>
           Displays a help message.

</pre><h4><b>FILES</b></h4><pre>
       <u>/usr/share/torrus/xmlconfig/defaults.xml</u>
           XML configuration file with default settings for the datasources and tokensets, as  well  as  default
           view definitions.

       <u>snapshot.xml</u>
           Default <b>configsnapshot</b> output file.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man8/torrus.8.html">torrus</a></b>(8), <b><a href="../man8/torrus_compilexml.8.html">torrus_compilexml</a></b>(8)

</pre><h4><b>NOTES</b></h4><pre>
       See more documentation at Torrus home page: <a href="http://torrus.org">http://torrus.org</a>

</pre><h4><b>AUTHOR</b></h4><pre>
       Stanislav Sinyagin &lt;<a href="mailto:ssinyagin@k-open.com">ssinyagin@k-open.com</a>&gt;

torrus 3.00                                        2023-05-02                           <u><a href="../man8/TORRUS_CONFIGSNAPSHOT.8.html">TORRUS_CONFIGSNAPSHOT</a></u>(8)
</pre>
 </div>
</div></section>
</div>
</body>
</html>