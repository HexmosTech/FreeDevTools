<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>amsamba - Amanda Application to interface with smbclient</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/amanda-common">amanda-common_3.5.4-2_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       amsamba - Amanda Application to interface with smbclient

</pre><h4><b>DESCRIPTION</b></h4><pre>
       Amsamba is an Amanda Application API script. It should not be run by users directly. It uses smbclient to
       backup and restore data.

       The <b>diskdevice</b> in the disklist (DLE) must have the form '//CIFSHOST/SHARE/SUBDIR' where CIFSHOST is the
       CIFS host containing the data to be backed up, SHARE is the share to connect, and subdir is the
       subdirectory to backup. '/subdir' can be ommited, in which case the complete share is archived.

       Unlike most applications, amsamba backs up and restores data located on a different system from that
       where amsamba itself runs. The host containing the data is the CIFS host. In practice, amsamba is usually
       run on the same system as the Amanda server, with a DLE like

       localhost "//CIFSHOST/SHARENAME" amsamba-dumptype

       Include or exclude can be used, but not both. The path for 'exclude list' or 'include list' must be
       absolute path on the CIFS host. The estimate calculates the complete size of the share, without regard
       for include or exclude directives. It will be larger than the actual dump if you use include or exclude.
       Using 'estimate server' in the dumptype could give better estimate.

</pre><h4><b>PROPERTIES</b></h4><pre>
       This section lists the properties that control amsamba's functionality. See <b><a href="../man7/amanda-applications.7.html">amanda-applications</a></b>(7) for
       information on application properties and how they are configured.

       SMBCLIENT-PATH

           The path to the smbclient binary.  The default is set when Amanda is built by the --with-smbclient
           configure option.

       GNUTAR-PATH

           The path to the gnutar binary.  The default is set when Amanda is built by the --with-gnutar
           configure option. gnutar is used to create the index.

       AMANDAPASS

           Location of the amandapass file, defaulting to "$CONFIG_DIR/amandapass".  Relative pathnames are
           relative to the configuration directory, "$CONFIG_DIR/&lt;config&gt;".  Note that this file is located on
           the client, not on the server.  The format of the file is as follow:
             Sharename User%Password Domain

           Sharename is '//HOST/SHARE' without the SUBDIR.  Sharename can be quoted, it can be '*' to match all
           share, it can be '//pc-host/*' to match all share on pc-host.  User is the username use to connect to
           the share.  Password is the password use to connect to the share.  '%Password' is optional if the
           user can connect to the share without password.  'User%Password' is optional, the user 'guest'
           without password is use to connect to the share.  Domain is optional. Example:
             //another-pc/share otheruser%otherpw domain
             //another-pc/share otheruser%otherpw
             //another-pc/share myuser mydomain
             //another-pc/share myuser
             //another-pc/share

       ALLOW-ANONYMOUS

           This username without password is used to connect to the share if no matching entry is found in the
           amandapass file.

       DIRECTORY

           For restore command only, the data is recoved in that directory. Must be a unix path for "tar"
           RECOVER-MODE or a smb path for "smb" recover-MODE.

       RECOVER-MODE

           "tar" or "smb", default to "tar". If "tar", the data is recovered on the local machine, If "smb", the
           data is recovered on the smb client machine.

       REGEX-MATCH

           If set to "YES", amsamba use the 'r' tarmode which uses regex to do the include and exclude pattern
           matching, it can be slow.

</pre><h4><b>INCLUDE</b> <b>AND</b> <b>EXCLUDE</b> <b>LISTS</b></h4><pre>
       This application supplies exclude lists via the <b>smbclient</b> <b>-TX</b> option. Normal shell-style wildcard
       expressions, using * and ?, are not supported. All expressions are matched only from the base directory
       of the DLE. Expressions that match a directory may have a leading or trailing "/". Example expressions:

         ./temp-files           # exclude top-level dir "temp-files" entirely
         ./temp-files/          # same
         /temp-files            # same
         temp-files             # same
         ./temp-files/*         # BAD: does nothing
         *.iso                  # BAD: does nothing
         proxy/local/cache      # exclude "cache" in dir "proxy/local"

       Include lists are supported only if excludes are not given. They are handled via the <b>smbclient</b> <b>-TI</b>
       option. Include matching is identical to the exclude matching described above.

</pre><h4><b>EXAMPLE</b></h4><pre>
         define application app_amsamba {
           property "SMBCLIENT-PATH" "/usr/bin/smbclient"
           property "GNUTAR-PATH" "<a href="file:/bin/tar">/bin/tar</a>"
           property "AMANDAPASS" /etc/amandapass"
           property "ALLOW-ANONYMOUS" "guest"
         }

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man8/amanda.8.html">amanda</a></b>(8), <b><a href="../man5/amanda.conf.5.html">amanda.conf</a></b>(5), <b><a href="../man7/amanda-applications.7.html">amanda-applications</a></b>(7)

       The Amanda Wiki: : <a href="http://wiki.zmanda.com/">http://wiki.zmanda.com/</a>

</pre><h4><b>AUTHOR</b></h4><pre>
       <b>Jean-Louis</b> <b>Martineau</b> &lt;<a href="mailto:martineau@zmanda.com">martineau@zmanda.com</a>&gt;
           Zmanda, Inc. (<a href="http://www.zmanda.com">http://www.zmanda.com</a>)

Amanda 3.5.4                                       01/25/2025                                         <u><a href="../man8/AMSAMBA.8.html">AMSAMBA</a></u>(8)
</pre>
 </div>
</div></section>
</div>
</body>
</html>