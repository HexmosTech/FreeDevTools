<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>lcmaps_verify_proxy.mod - LCMAPS plugin to verify a certificate chain including proxies</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/lcmaps-plugins-verify-proxy">lcmaps-plugins-verify-proxy_1.5.10-2ubuntu2_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       lcmaps_verify_proxy.mod - LCMAPS plugin to verify a certificate chain including proxies

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>lcmaps_verify_proxy.mod</b>

       [<b>--allow-limited-proxy</b>] [<b>-certdir</b>|<b>-cadir</b>|<b>-capath</b>|<b>--capath</b> <u>&lt;certificate_directory&gt;</u>] [<b>--disallow-limited-</b>
       <b>proxy</b>] [<b>--discard_private_key_absence</b>] [<b>--max-proxy-level-ttl=&lt;level&gt;</b>|<b>--max-proxy-level-ttl@&lt;level&gt;</b>
       <u>&lt;timeperiod&gt;</u>] [<b>--max-voms-ttl</b> <u>&lt;timeperiod&gt;</u>] [<b>--never_discard_private_key_absence</b>] [<b>--only-enforce-</b>
       <b>lifetime-checks</b>] [<b>--require-limited-proxy</b>]

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This plugin will test if the presented proxy certificate is authentic. This is done using OpenSSL methods
       to  verify  the certificate chain, check if the End-Entity Certificate is not revoked by checking CRLs or
       OCSP(*). In an <b>lcmaps.db</b> (5) file it is advised to run this plug-in as the first  plug-in  and  fail  the
       policy if there is no other way of verifying the input credentials.

       Additional  this plug-in can impose other policies, like proxy and VOMS life-time restrictions or require
       that the certificate chain is offered in a certain way, e.g. by offering a Limited proxy or  (optionally)
       without a private key.

       The  plug-in  takes  its input from the LCMAPS framework. The certificate chain is coming from the regis‐
       tered (derived) STACK_OF(X509) * and the private key (when available) is taken from  the  registered  PEM
       string credentials.

       A  certificate chain will be checked and verified by OpenSSL, but additionally to these checks this plug-
       in also performs semantic checks on the certificate chain based on how GT2, GT3 and RFC 3820  proxy  cer‐
       tificates are to be constructed and used.

</pre><h4><b>OPTIONS</b></h4><pre>
       <b>--allow-limited-proxy</b>
              When enabled allow the certificate chain to contain a limited proxy certificate.  GT2, GT3 and RFC
              Limited proxies are treated as equal.

       <b>-certdir</b> <b>|</b> <b>-cadir</b> <b>|</b> <b>-capath</b> <b>|</b> <b>--capath</b> <u>&lt;certificate_directory&gt;</u>
              This  option sets the directory used to find the CA certificates, CRLs and other files used in the
              verification process of the presented certificate chain.  Setting this option is muted by the  op‐
              tion  <b>--only-enforce-lifetime-checks</b>.   When unset, the value of $X509_CERT_DIR will be used, when
              that is also unset, /etc/grid-security/certificates will be used.

       <b>--disallow-limited-proxy</b>
              When enabled all uses of limited proxies will be prohibited and treated as  a  failure  condition.
              GT2, GT3 and RFC Limited proxies are treated as equal.

       <b>--discard_private_key_absence</b>
              When  enabled  the  plug-in  verification process will not fail on the absence of the private key.
              Having a private key to present is part of the proof of possession of the  certificate  chain  its
              delegations,  therefore  a  fundamental  part  of the user credentials. Discarding the private key
              check is useful in cases where another process has already establish trust in the user credentials
              by performing the private key proof of possession steps.  Example: This feature can be enabled  in
              deployments  where gLExec is part of the CREAM CE. The CREAM CE's SSL handshake is taking ensuring
              that fully verified credentials get passed down.  Counter example: This feature is not-enabled  on
              a  gLExec-on-the-WN  deployment,  as gLExec will need to ensure that the pilot-job payload creden‐
              tials are fully verified before account mapping should occur.

       <b>--max-proxy-level-ttl=&lt;level&gt;</b> <b>|</b> <b>--max-proxy-level-ttl@&lt;level&gt;</b> <u>&lt;timeperiod&gt;</u>
              Set a maximum to the allowed validity period of the proxy certificate for  a  specific  delegation
              <b>&lt;level&gt;</b>.  The  first delegation after an EEC certificate is <b>&lt;level&gt;</b> 0. This delegation level could
              be used in a MyProxy. A typical setting would be <b>14d-00:00</b> to allow for a MyProxy certificate with
              a validity period of two weeks.

              A special <b>&lt;level&gt;</b> is indicated by an <b>l</b> or <b>L</b>. This is the leaf proxy or also  known  as  the  final
              delegation. A safe setting for this would be <b>1d-00:00</b> to allow a proxy certificate validity period
              of 1 day/24 hours.

              Set the &lt;timeperiod&gt; in the following format: <b>[0-99]d-[0-23][00-59]</b>. For example <b>2d-13:37</b>.

       <b>--max-voms-ttl</b> <u>&lt;timeperiod&gt;</u>
              Set  a  maximum  to the allowed validity period of the VOMS credentials (when present). Using VOMS
              credentials with a validity period longer then the set timeperiod&gt; will result in a failure.

       <b>--never_discard_private_key_absence</b>
              This setting will override the option <b>--discard_private_key_absence</b> and option to set the environ‐
              ment variable $VERIFY_PROXY_DISCARD_PRIVATE_KEY_ABSENCE which performs the same behavior.

       <b>--only-enforce-lifetime-checks</b>
              When enable this option will bypass all verification steps and  will  only  perform  the  lifetime
              checks  configured by <b>--max-proxy-level-ttl</b> and/or <b>--max-voms-ttl</b>. This option is ideal to be used
              in a Globus Gatekeeper, GridFTPd and/or GSI-OpenSSHd deployment.

       <b>--require-limited-proxy</b>
              Explicitly require the certificate chain to have a <b>limited</b> <b>proxy</b> as a final delegation. The  plug-
              in will fail if the certificate chain does not have a <b>limited</b> <b>proxy</b>.

</pre><h4><b>RETURN</b> <b>VALUES</b></h4><pre>
       <b>LCMAPS_MOD_SUCCESS</b>
              Success.

       <b>LCMAPS_MOD_FAIL</b>
              Failure.

</pre><h4><b>BUGS</b></h4><pre>
       OCSP is not functional and will be added when either CAB/Forum or the IGTF publish a clear profile.

       Please   report   any   errors  to  the  Nikhef  Grid  Middleware  Security  Team  &lt;grid-mw-security-sup‐
       <a href="mailto:port@nikhef.nl">port@nikhef.nl</a>&gt;.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man5/lcmaps.db.5.html">lcmaps.db</a></b>(5), <b><a href="../man3/lcmaps.3.html">lcmaps</a></b>(3).

</pre><h4><b>AUTHORS</b></h4><pre>
       LCMAPS and the LCMAPS plug-ins were  written  by  the  Grid  Middleware  Security  Team  &lt;grid-mw-securi‐
       <a href="mailto:ty@nikhef.nl">ty@nikhef.nl</a>&gt;.

LCMAPS plugins verify proxy 1.5.10              October 31, 2012                      <u><a href="../man8/LCMAPS_VERIFY_PROXY.MOD.8.html">LCMAPS_VERIFY_PROXY.MOD</a></u>(8)
</pre>
 </div>
</div></section>
</div>
</body>
</html>