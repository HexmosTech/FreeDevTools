<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>sg_modes - reads mode pages with SCSI MODE SENSE command</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/sg3-utils">sg3-utils_1.48-2ubuntu1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       sg_modes - reads mode pages with SCSI MODE SENSE command

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>sg_modes</b>  [<u>--all</u>]  [<u>--ALL</u>]  [<u>--control=PC</u>]  [<u>--dbd</u>]  [<u>--dbout</u>]  [<u>--examine</u>] [<u>--flexible</u>] [<u>--help</u>] [<u>--hex</u>]
       [<u>--list</u>] [<u>--llbaa</u>] [<u>--maxlen=LEN</u>]  [<u>--multiple</u>]  [<u>--page=PG[,SPG]</u>]  [<u>--raw</u>]  [<u>-R</u>]  [<u>--readwrite</u>]  [<u>--six</u>]
       [<u>--verbose</u>] [<u>--version</u>] [<u>DEVICE</u>]

       <b>sg_modes</b>  [<u>-6</u>] [<u>-a</u>] [<u>-A</u>] [<u>-c=PC</u>] [<u>-d</u>] [<u>-D</u>] [<u>-e</u>] [<u>-f</u>] [<u>-h</u>] [<u>-H</u>] [<u>-l</u>] [<u>-L</u>] [<u>-m=LEN</u>] [<u>-M</u>] [<u>-p=PG[,SPG]</u>] [<u>-r</u>]
       [<u>-subp=SPG</u>] [<u>-v</u>] [<u>-V</u>] [<u>-w</u>] [<u>-?</u>]  [<u>DEVICE</u>]

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This utility sends a MODE SENSE SCSI command to the <u>DEVICE</u> and outputs the response. There is  a  6  byte
       and  10  byte  (cdb) variant of the MODE SENSE command, this utility defaults to the 10 byte variant. The
       SPC-4 standard (and the SPC-5 standard) stated that implementers should migrate away from the  SCSI  MODE
       <a href="../man6/SELECT.6.html">SELECT</a>(6)  and  MODE  <a href="../man6/SENSE.6.html">SENSE</a>(6) commands in favour of the 10 byte variants (e.g. MODE <a href="../man10/SENSE.10.html">SENSE</a>(10)). In draft
       SPC-6 revision 7 the SCSI MODE <a href="../man6/SELECT.6.html">SELECT</a>(6) and MODE <a href="../man6/SENSE.6.html">SENSE</a>(6) commands have been removed.

       This utility decodes mode page headers and block descriptors but outputs the contents of each  mode  page
       in  hex.  It  also  has  no facility to change the mode page contents or block descriptor data. Mode page
       contents are decoded and can be changed with the <b>sdparm</b> utility.

       This utility supports two command line syntaxes, the preferred one is shown first  in  the  synopsis  and
       explained  in  this  section. A later section on the old command line syntax outlines the second group of
       options.

       If no page is given (and <u>--list</u> is not selected) then <u>--all</u> is assumed. The  <u>--all</u>  option  requests  all
       mode pages (but not subpages) in a single response.

</pre><h4><b>OPTIONS</b></h4><pre>
       Arguments to long options are mandatory for short options as well.

       <b>-a</b>, <b>--all</b>
              output  all the mode pages reported by the <u>DEVICE</u>. This is what the page code 63 (0x3f) is defined
              to do. When used once, mode subpages are not fetched. When used twice (e.g. '-aa'), all mode pages
              and subpages are requested which is equivalent to '--page=63,255'.

       <b>-A</b>, <b>--ALL</b>
              same meaning as using the <u>--all</u> option twice. That is, all mode pages and  subpages  are  fetched.
              The default is to fetch all the mode pages but not mode subpages.

       <b>-c</b>, <b>--control</b>=<u>PC</u>
              <u>PC</u> is the page control value. Up to four different versions of each page are held by the device:
                  <b>0</b> : current values (i.e. those active at present)
                  <b>1</b> : changeable values
                  <b>2</b> : default values (i.e. the manufacturer's settings)
                  <b>3</b> : saved values
              The  changeable values are bit masks showing which fields could be changed with a MODE SELECT. The
              saved values will be re-instated the next time the device is power cycled or reset. If this option
              is not given then current values [0] are assumed.

       <b>-d</b>, <b>--dbd</b>
              disable block descriptors. By default, block descriptors (usually one (for  disks)  or  none)  are
              returned  in  a MODE SENSE response. This option sets the "disable block descriptors" (DBD) bit in
              the cdb which instructs the device not to return any block  descriptors  in  its  response.  Older
              devices  may not support this setting and may return an "illegal request" sense key; alternatively
              they may ignore it. Oddly the Reduced Block Command set (RBC) requires this bit set.

       <b>-D</b>, <b>--dbout</b>
              disable outputting block descriptors. Irrespective of whether block descriptors are present in the
              response or not, they are not output.

       <b>-e</b>, <b>--examine</b>
              if the <u>--page=PG[,SPG]</u> option is not given, examine each mode page in the range 0  through  to  62
              (inclusive).  If  the  <u>--page=PG[,SPG]</u> option is give, then all subpages whose page code is <u>PN</u> are
              examined (subpages 0 through 254 (inclusive)). If some response is given then print out  the  mode
              (sub)page name or number (in hex) if the name is not known.
              The  sdparm  utility  which  lists  mode  and  VPD  pages also has a <b>--examine</b> option will similar
              functionility.

       <b>-f</b>, <b>--flexible</b>
              Some devices, bridges and/or drivers attempt crude translations between MODE SENSE 6 and  10  byte
              commands  without  correcting  the  response.  This  will cause the response to be mis-interpreted
              (usually with an error saying the response is malformed). With this  option,  the  length  of  the
              response  is  checked,  and  if  it looks wrong, the response is then decoded as if the other mode
              sense (cdb length) was sent.

       <b>-h</b>, <b>--help</b>
              print out the usage message then exit.

       <b>-H</b>, <b>--hex</b>
              Since this utility shows the structure of a MODE  SENSE  command  response  (i.e.   its  parameter
              header,  zero  or  more block descriptors followed by zero or more mode pages) but outputs most of
              the contents of the response in hexadecimal. When this option is used once, the only difference is
              that the mode page name, if known, is followed by it page number (and subpage number) bracketed in
              hex.
              When this option is given twice, then each line of hex output has an ASCII rendering of  that  hex
              place  at the end of each line. When this option is given three times, then the hexadimal address,
              shown at the start of each hexadecimal line is dropped, there is no ASCII rendering  of  hex,  and
              all test lines are removed. This leaves simple hex that is parsable that represents the MODE SENSE
              command response. The component parts of that response are put on separate line.
              When  the  option  is  given  four  or  more  times  (recommended  for a parsable form), the ASCII
              informational lines are back, but they all start with "#" which a parser  needs  to  ignore.   The
              output  is  sent  to stdout while any error messages or warning are sent to stderr. So simple Unix
              command line redirection of stdout to a file (done  with  '&gt;'  in  most  Unix  shells)  should  be
              sufficient  to  capture  the output. As noted above, the sdparm utility can be used to decode that
              hex file later with its '--inhex=FN' option.

       <b>-l</b>, <b>--list</b>
              lists all common page and subpage codes and their names that are found in  the  command  set  that
              matches  the peripheral type of the given <u>DEVICE</u>.  If no <u>DEVICE</u> and no <u>--page=PG</u> is given then the
              common page and subpage codes and their names are listed for SBC (e.g. a disk). If  no  <u>DEVICE</u>  is
              given  and  a <u>--page=PG</u> is given then the common page and subpage codes and their names are listed
              for the command set whose peripheral device type matches  the  value  given  to  <u>PG</u>.  For  example
              'sg_mode --list --page=1' lists the command mode pages and subpages for tape devices. Additionally
              if a sub_page_code is given then it is interpreted as a transport identifier and command transport
              specific  mode  page  codes  and  their names are listed following the main mode page list.  Other
              options are ignored.

       <b>-L</b>, <b>--llbaa</b>
              set the Long LBA Accepted (LLBAA) bit in the MODE SENSE (10) cdb. This bit is not defined  in  the
              MODE  SENSE  (6) cdb so setting the '-L' and '--six' options is reported as an error. When set the
              <u>DEVICE</u> may respond with 16 byte block descriptors as indicated  by  the  'LongLBA'  field  in  the
              response. In most cases setting this option is not needed.

       <b>-m</b>, <b>--maxlen</b>=<u>LEN</u>
              The  <u>LEN</u>  argument is the maximum response length in bytes. It is the 'allocation length' field in
              the cdb. When not given (or <u>LEN</u> is zero) then the allocation length field is set to 4096 for  MODE
              SENSE  (10)  or  252 for MODE SENSE (6). The <u>LEN</u> argument must be non-negative and no greater than
              65535 for MODE SENSE (10) and not greater than 255 for MODE SENSE (6).

       <b>-M</b>, <b>--multiple</b>
              for each mode page (and mode subpage), fetch all available page controls.  There may be up to four
              page controls as outlined in the  <u>--control=PC</u>  option.  The  mode  parameter  header,  and  block
              descriptors  are  output  that  same  way  as  without  this option. After the mode page name (and
              numbers) are output, there is a line with  either  current,  changeable,  default  or  saved  page
              control on it followed by that page control in hex.
              If the <u>--control=PC</u> option is given, it is overridden by this option.

       <b>-O</b>, <b>--old</b>
              Switch to older style options. Please use as first option.

       <b>-p</b>, <b>--page</b>=<u>PG</u>
              page  code  to  fetch.  The  <u>PG</u>  is assumed to be a decimal value unless prefixed by '0x' or has a
              trailing 'h'. It should be a value between 0 and 63 (inclusive). When not given and a  default  is
              required then a value of 63 (0x3f), which fetches all mode pages, is used.
              Alternatively  an acronym for the mode page can be given. The available acronyms can be listed out
              with the <u>--page=xxx</u> option. They are almost the same as the acronyms used for mode  pages  in  the
              sdparm utility.

       <b>-p</b>, <b>--page</b>=<u>PG,SPG</u>
              page  code  and  subpage  code  values  to  fetch. Both arguments are assumed to be decimal unless
              flagged as hexadecimal. The page code should be between 0  and  63  inclusive.  The  subpage  code
              should be between 0 and 255 inclusive. The default value for the subpage code is 0.

       <b>-r</b>, <b>--raw</b>
              output  the response in binary to stdout. Error messages and warnings, if any, are sent to stderr.
              When this option is used twice (e.g. '-rr') then has the same action as '-R'

       <b>-R</b>     output the selected mode page to stdout a byte per line. Each line contains two hexadecimal digits
              (e.g. "3e"). Useful as input (after editing) to the <a href="../man8/sg_wr_mode.8.html">sg_wr_mode</a>(8) utility.

       <b>-w</b>, <b>--readwrite</b>
              open <u>DEVICE</u> in "read-write" mode. Default is to open it in read-only mode.

       <b>-6</b>, <b>-s</b>, <b>--six</b>
              by default this utility sends a 10 byte MODE SENSE  command  to  the  <u>DEVICE</u>.  However  some  SCSI
              devices  only  support 6 byte MODE SENSE commands (e.g. SCSI-2 tape drives). This parameter forces
              the use of 6 byte MODE SENSE commands.

       <b>-v</b>, <b>--verbose</b>
              increase level of verbosity. Can be used multiple times.

       <b>-V</b>, <b>--version</b>
              print out version string then exit.

</pre><h4><b>NOTES</b></h4><pre>
       If the normal sg_modes utility fails with "illegal command operation code" then try the '--six' (or '-6')
       option.

       This utility performs a SCSI INQUIRY command to determine the peripheral type of the device  (e.g.  0  -&gt;
       Direct  Access  Device  (disk))  prior  to sending a MODE SENSE command. This helps in decoding the block
       descriptor and mode pages.

       This utility opens <u>DEVICE</u> in read-only mode (e.g. in Unix, with the O_RDONLY flag) by  default.  It  will
       open <u>DEVICE</u> in read-write mode if the <u>--readwrite</u> option is given.

       In the 2.4 series of Linux kernels the <u>DEVICE</u> must be a SCSI generic (sg) device. In the 2.6 series block
       devices  (e.g.  SCSI disks and DVD drives) can also be specified. For example "sg_modes -a /dev/sda" will
       work in the 2.6 series kernels.

       There is no JSON output from this utility because its primary output is mode  pages  in  hexadecimal.  So
       apart  from the mode page name and its structure, nothing is decoded. The sdparm utility does decode mode
       page contents and it does support JSON output.

</pre><h4><b>EXIT</b> <b>STATUS</b></h4><pre>
       The exit status of sg_modes is 0 when it is successful. Otherwise see the <a href="../man8/sg3_utils.8.html">sg3_utils</a>(8) man page.

</pre><h4><b>OLDER</b> <b>COMMAND</b> <b>LINE</b> <b>OPTIONS</b></h4><pre>
       The options in this section were the only ones available prior to sg3_utils version  1.23  .  Since  then
       this utility defaults to the newer command line options which can be overridden by using <u>--old</u> (or <u>-O</u>) as
       the  first  option. See the ENVIRONMENT VARIABLES section for another way to force the use of these older
       command line options.

       <b>-6</b>     by default this utility sends a 10 byte MODE SENSE command to the <u>DEVICE</u>.  This  parameter  forces
              the use of 6 byte MODE SENSE commands.  See <u>--six</u> in the main description.

       <b>-a</b>     see <u>--all</u> in the main description.

       <b>-A</b>     output  all  the mode pages and subpages supported by the <u>DEVICE</u>. Same as '--all --all' in the new
              syntax.

       <b>-c</b>=<u>PC</u>  <u>PC</u> is the page control value. See <b>--control</b>=<u>PC</u> in the main description.

       <b>-d</b>     see <b>--dbd</b> in the main description.

       <b>-D</b>     see <b>--dbout</b> in the main description.

       <b>-e</b>     see <b>--examine</b> in the main description.

       <b>-f</b>     see <b>--flexible</b> in the main description.

       <b>-h</b>     The default action is to decode known mode page numbers (and subpage numbers) into text. With this
              option mode page numbers (and subpage numbers) are output in hexadecimal.

       <b>-H</b>     same action as the '-h' option.

       <b>-l</b>     see <b>--list</b> in the main description.

       <b>-L</b>     see <b>--llbaa</b> in the main description.

       <b>-N</b>, <b>--new</b>
              Switch to the newer style options.

       <b>-m</b>=<u>LEN</u> see <b>--maxlen</b>=<u>LEN</u> in the main description.

       <b>-M</b>     see <b>--multiple</b> in the main description.

       <b>-p</b>=<u>PG</u>  <u>PG</u> is page code to fetch. Should be a hexadecimal number between 0  and  3f  inclusive  (0  to  63
              decimal).  The  default value when required is 3f (fetch all mode pages). Note that an acronym for
              the page and/or subpage values is not accepted in this older format (because any acronym  starting
              with the letters 'a' to 'f' is ambiguous; it could either be a hex number or an acronym).

       <b>-p</b>=<u>PG,SPG</u>
              page code and subpage code values to fetch. The page code should be a hexadecimal number between 0
              and  3f inclusive. The subpage code should be a hexadecimal number between 0 and ff inclusive. The
              default value for the subpage code is 0.

       <b>-r</b>     output the selected mode page to stdout a byte per line. Each line contains two hexadecimal digits
              (e.g. "3e"). Useful as input (after editing) to the <a href="../man8/sg_wr_mode.8.html">sg_wr_mode</a>(8) utility.

       <b>-subp</b>=<u>SPG</u>
              sub page code to fetch. Should be a hexadecimal number between 0 and 0xff inclusive.  The  default
              value is 0.

       <b>-v</b>     increase verbosity of output.

       <b>-V</b>     print out version string then exit.

       <b>-w</b>     see <b>--readwrite</b> in the main description.

       <b>-?</b>     output usage message then exit. Ignore all other parameters.

</pre><h4><b>ENVIRONMENT</b> <b>VARIABLES</b></h4><pre>
       Since sg3_utils version 1.23 the environment variable SG3_UTILS_OLD_OPTS can be given. When it is present
       this  utility will expect the older command line options. So the presence of this environment variable is
       equivalent to using <u>--old</u> (or <u>-O</u>) as the first command line option.

</pre><h4><b>EXAMPLES</b></h4><pre>
       All mode pages, but not mode subpages, can be dumped in hex to a file like this:

          # sg_modes -a -HHHH /dev/sdb &gt; modes_sdeb.hex

       If there are any errors then they are sent to stderr so they will appear on the console  and  not  within
       the  modes_sdeb.hex  file.  Nonetheless  the contents of modes_sdeb.hex may not be useful if an error has
       occurred.

       The '-HHHH' option produces hex output with comment lines starting with a  '#'  character.  Each  comment
       describes  the  following block.  If all is well, the modes_sdeb.hex file will be suitable for the sdparm
       utility to decode:

          # sdparm -a --inhex=modes_sdeb.hex

       See the <a href="../man8/sdparm.8.html">sdparm</a>(8) manpage for further information.
       To dump both mode pages and subpages, use this invocation:

          # sg_modes -aa -HHHH /dev/sdb &gt; modes_sdeb.hex

       No change is needed in the associated sdparm call. There is some example output in the inhex directory in
       the sg3_utils package, in a file called: modes_sdeb.hex . The file was produced by using this utility  on
       the scsi_debug driver in Linux.

       Each  mode page (and subpage) has up to four 'page controls': current, changeable, default and saved. The
       last three may or may not be supported by the device. All available page controls for all mode pages  and
       subpages can be placed in a hex file with this invocation:

          # sg_modes -aa -M -HHHH /dev/sdb &gt; modes_mm_sdeb.hex

       Again,  no  change  is  needed  in  the associated sdparm call. There is some example output in the inhex
       directory in the sg3_utils package, in a file called: modes_mm_sdeb.hex .

</pre><h4><b>AUTHOR</b></h4><pre>
       Written by Douglas Gilbert

</pre><h4><b>REPORTING</b> <b>BUGS</b></h4><pre>
       Report bugs to &lt;dgilbert at interlog dot com&gt;.

</pre><h4><b>COPYRIGHT</b></h4><pre>
       Copyright © 2000-2023 Douglas Gilbert
       This software is distributed under the GPL version 2. There is NO warranty; not even for  MERCHANTABILITY
       or FITNESS FOR A PARTICULAR PURPOSE.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man8/sdparm.8.html">sdparm</a>(8),</b> <b><a href="../man8/sg_wr_mode.8.html">sg_wr_mode</a>(8),</b> <b><a href="../man8/sginfo.8.html">sginfo</a>(8),</b> <b>sgmode(scsirastools),</b> <b>scsiinfo(net),</b> <b>scu(net),</b> <b>seatools(seagate)</b>

       All these utilities offer some facility to change mode page (or block descriptor) parameters.

sg3_utils-1.48                                      May 2023                                         <u><a href="../man8/SG_MODES.8.html">SG_MODES</a></u>(8)
</pre>
 </div>
</div></section>
</div>
</body>
</html>