<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>mandos-keygen - Generate key and password for Mandos client and server.</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/mandos-client">mandos-client_1.8.19-1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       mandos-keygen - Generate key and password for Mandos client and server.

</pre><h4><b>SYNOPSIS</b></h4><pre>

       <b>mandos-keygen</b> [<b>--dir</b> <u>DIRECTORY</u> | <b>-d</b> <u>DIRECTORY</u>]
                     [<b>--type</b> <u>KEYTYPE</u> | <b>-t</b> <u>KEYTYPE</u>]
                     [<b>--length</b> <u>BITS</u> | <b>-l</b> <u>BITS</u>]
                     [<b>--subtype</b> <u>KEYTYPE</u> | <b>-s</b> <u>KEYTYPE</u>]
                     [<b>--sublength</b> <u>BITS</u> | <b>-L</b> <u>BITS</u>]
                     [<b>--name</b> <u>NAME</u> | <b>-n</b> <u>NAME</u>]
                     [<b>--email</b> <u>ADDRESS</u> | <b>-e</b> <u>ADDRESS</u>]
                     [<b>--comment</b> <u>TEXT</u> | <b>-c</b> <u>TEXT</u>]
                     [<b>--expire</b> <u>TIME</u> | <b>-x</b> <u>TIME</u>]
                     [<b>--tls-keytype</b> <u>KEYTYPE</u> | <b>-T</b> <u>KEYTYPE</u>]
                     [<b>--force</b> | <b>-f</b>]

       <b>mandos-keygen</b> {<b>--password</b> | <b>-p</b> | <b>--passfile</b> <u>FILE</u> | <b>-F</b> <u>FILE</u>}
                     [<b>--dir</b> <u>DIRECTORY</u> | <b>-d</b> <u>DIRECTORY</u>]
                     [<b>--name</b> <u>NAME</u> | <b>-n</b> <u>NAME</u>] [<b>--no-ssh</b> | <b>-S</b>]

       <b>mandos-keygen</b> {<b>--help</b> | <b>-h</b>}

       <b>mandos-keygen</b> {<b>--version</b> | <b>-v</b>}

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>mandos-keygen</b> is a program to generate the TLS and OpenPGP keys used by <b><a href="../man8mandos/mandos-client.8mandos.html">mandos-client</a></b>(8mandos). The keys
       are normally written to /etc/keys/mandos for later installation into the initrd image, but this, and most
       other things, can be changed with command line options.

       This program can also be used with the <b>--password</b> or <b>--passfile</b> options to generate a ready-made section
       for clients.conf (see <b><a href="../man5/mandos-clients.conf.5.html">mandos-clients.conf</a></b>(5)).

</pre><h4><b>PURPOSE</b></h4><pre>
       The purpose of this is to enable <u>remote</u> <u>and</u> <u>unattended</u> <u>rebooting</u> of client host computer with an
       <u>encrypted</u> <u>root</u> <u>file</u> <u>system</u>. See the section called “OVERVIEW” for details.

</pre><h4><b>OPTIONS</b></h4><pre>
       <b>--help</b>, <b>-h</b>
           Show a help message and exit

       <b>--dir</b> <u>DIRECTORY</u>, <b>-d</b> <u>DIRECTORY</u>
           Target directory for key files. Default is /etc/keys/mandos.

       <b>--type</b> <u>TYPE</u>, <b>-t</b> <u>TYPE</u>
           OpenPGP key type. Default is “RSA”.

       <b>--length</b> <u>BITS</u>, <b>-l</b> <u>BITS</u>
           OpenPGP key length in bits. Default is 4096.

       <b>--subtype</b> <u>KEYTYPE</u>, <b>-s</b> <u>KEYTYPE</u>
           OpenPGP subkey type. Default is “RSA”

       <b>--sublength</b> <u>BITS</u>, <b>-L</b> <u>BITS</u>
           OpenPGP subkey length in bits. Default is 4096.

       <b>--email</b> <u>ADDRESS</u>, <b>-e</b> <u>ADDRESS</u>
           Email address of key. Default is empty.

       <b>--comment</b> <u>TEXT</u>, <b>-c</b> <u>TEXT</u>
           Comment field for key. Default is empty.

       <b>--expire</b> <u>TIME</u>, <b>-x</b> <u>TIME</u>
           Key expire time. Default is no expiration. See <b><a href="../man1/gpg.1.html">gpg</a></b>(1) for syntax.

       <b>--tls-keytype</b> <u>KEYTYPE</u>, <b>-T</b> <u>KEYTYPE</u>
           TLS key type. Default is “ed25519”

       <b>--force</b>, <b>-f</b>
           Force overwriting old key.

       <b>--password</b>, <b>-p</b>
           Prompt for a password and encrypt it with the key already present in either /etc/keys/mandos or the
           directory specified with the <b>--dir</b> option. Outputs, on standard output, a section suitable for
           inclusion in <b><a href="../man8/mandos-clients.conf.8.html">mandos-clients.conf</a></b>(8). The host name or the name specified with the <b>--name</b> option is
           used for the section header. All other options are ignored, and no key is created. Note: white space
           is stripped from the beginning and from the end of the password; See the section called “BUGS”.

       <b>--passfile</b> <u>FILE</u>, <b>-F</b> <u>FILE</u>
           The same as <b>--password</b>, but read from <u>FILE</u>, not the terminal, and white space is not stripped from
           the password in any way.

       <b>--no-ssh</b>, <b>-S</b>
           When <b>--password</b> or <b>--passfile</b> is given, this option will prevent <b>mandos-keygen</b> from calling
           <b>ssh-keyscan</b> to get an SSH fingerprint for this host and, if successful, output suitable config
           options to use this fingerprint as a <b>checker</b> option in the output. This is otherwise the default
           behavior.

</pre><h4><b>OVERVIEW</b></h4><pre>
       This is part of the Mandos system for allowing computers to have encrypted root file systems and at the
       same time be capable of remote and/or unattended reboots. The computers run a small client program in the
       initial RAM disk environment which will communicate with a server over a network. All network
       communication is encrypted using TLS. The clients are identified by the server using a TLS key; each
       client has one unique to it. The server sends the clients an encrypted password. The encrypted password
       is decrypted by the clients using a separate OpenPGP key, and the password is then used to unlock the
       root file system, whereupon the computers can continue booting normally.

       This program is a small utility to generate new TLS and OpenPGP keys for new Mandos clients, and to
       generate sections for inclusion in clients.conf on the server.

</pre><h4><b>EXIT</b> <b>STATUS</b></h4><pre>
       The exit status will be 0 if a new key (or password, if the <b>--password</b> option was used) was successfully
       created, otherwise not.

</pre><h4><b>ENVIRONMENT</b></h4><pre>
       <b>TMPDIR</b>
           If set, temporary files will be created here. See <b><a href="../man1/mktemp.1.html">mktemp</a></b>(1).

</pre><h4><b>FILES</b></h4><pre>
       Use the <b>--dir</b> option to change where <b>mandos-keygen</b> will write the key files. The default file names are
       shown here.

       /etc/keys/mandos/seckey.txt
           OpenPGP secret key file which will be created or overwritten.

       /etc/keys/mandos/pubkey.txt
           OpenPGP public key file which will be created or overwritten.

       /etc/keys/mandos/tls-privkey.pem
           Private key file which will be created or overwritten.

       /etc/keys/mandos/tls-pubkey.pem
           Public key file which will be created or overwritten.

       <a href="file:/tmp">/tmp</a>
           Temporary files will be written here if <u>TMPDIR</u> is not set.

</pre><h4><b>BUGS</b></h4><pre>
       The <b>--password</b>/<b>-p</b> option strips white space from the start and from the end of the password before using
       it. If this is a problem, use the <b>--passfile</b> option instead, which does not do this.

       Please report bugs to the Mandos development mailing list: &lt;<a href="mailto:mandos-dev@recompile.se">mandos-dev@recompile.se</a>&gt; (subscription
       required). Note that this list is public. The developers can be reached privately at
       &lt;<a href="mailto:mandos@recompile.se">mandos@recompile.se</a>&gt; (OpenPGP key fingerprint 153A 37F1 0BBA 0435 987F 2C4A 7223 2973 CA34 C2C4 for
       encrypted mail).

</pre><h4><b>EXAMPLE</b></h4><pre>
       Normal invocation needs no options:

       <b>mandos-keygen</b>

       Create key in another directory and of another type. Force overwriting old key files:

       <b>mandos-keygen</b> <b>--dir</b> <b><a href="file:~/keydir">~/keydir</a></b> <b>--type</b> <b>RSA</b> <b>--force</b>

       Prompt for a password, encrypt it with the keys in /etc/keys/mandos and output a section suitable for
       clients.conf.

       <b>mandos-keygen</b> <b>--password</b>

       Prompt for a password, encrypt it with the keys in the client-key directory and output a section suitable
       for clients.conf.

       <b>mandos-keygen</b> <b>--password</b> <b>--dir</b> <b>client-key</b>

</pre><h4><b>SECURITY</b></h4><pre>
       The <b>--type</b>, <b>--length</b>, <b>--subtype</b>, and <b>--sublength</b> options can be used to create keys of low security. If
       in doubt, leave them to the default values.

       The key expire time is <u>not</u> guaranteed to be honored by <b><a href="../man8/mandos.8.html">mandos</a></b>(8).

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man8mandos/intro.8mandos.html">intro</a></b>(8mandos), <b><a href="../man1/gpg.1.html">gpg</a></b>(1), <b><a href="../man5/mandos-clients.conf.5.html">mandos-clients.conf</a></b>(5), <b><a href="../man8/mandos.8.html">mandos</a></b>(8), <b><a href="../man8mandos/mandos-client.8mandos.html">mandos-client</a></b>(8mandos), <b><a href="../man1/ssh-keyscan.1.html">ssh-keyscan</a></b>(1)

</pre><h4><b>COPYRIGHT</b></h4><pre>
       Copyright © 2008-2019 Teddy Hogeborn, Björn Påhlsson

       This manual page is part of Mandos.

       Mandos is free software: you can redistribute it and/or modify it under the terms of the GNU General
       Public License as published by the Free Software Foundation, either version 3 of the License, or (at your
       option) any later version.

       Mandos is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the
       implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public
       License for more details.

       You should have received a copy of the GNU General Public License along with Mandos. If not, see
       <b><a href="http://www.gnu.org/licenses/">http://www.gnu.org/licenses/</a></b>.

Mandos 1.8.19                                      2019-07-18                                   <u><a href="../man8/MANDOS-KEYGEN.8.html">MANDOS-KEYGEN</a></u>(8)
</pre>
 </div>
</div></section>
</div>
</body>
</html>