<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>inetd — internet “super-server”</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/inetutils-inetd">inetutils-inetd_2.6-1ubuntu1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       inetd — internet “super-server”

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>inetd</b> [<u>option</u> <u>...</u>] [<u>conf-file</u> [<u>conf-dir</u>]] <u>...</u>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The  <b>inetd</b> program should be run at boot time by <u>/etc/rc</u> (see <u><a href="../man8/rc.8.html">rc</a></u>(8)).  It then listens for connections on
       certain internet sockets.  When a connection is found on one of its sockets, it decides what service  the
       socket  corresponds to, and invokes a program to service the request.  The server program is invoked with
       the service socket as its standard input, output and error descriptors.  After the program  is  finished,
       <b>inetd</b>  continues  to  listen  on  the  socket  (except  in  some  cases  which  will be described below).
       Essentially, <b>inetd</b> allows running one daemon to invoke several others, reducing load on the system.

</pre><h4><b>OPTIONS</b></h4><pre>
       The options available for <b>inetd</b>:

       <b>--foreground</b>
               Runs in foreground mode.

       <b>-d,</b> <b>--debug</b>
               Turns on debugging, and runs in foreground mode.

       <b>--environment</b>
               Pass local and remote address data via environment variables. See <b>ENVIRONMENT</b> below.

       <b>-p,</b> <b>--pidfile</b> [<u>filename</u>]
               Specifies the pidfile to use instead of the default.  When a  <u>filename</u>  is  not  specified,  that
               disables writing a pidfile.

       <b>-R,</b> <b>--rate</b> <u>rate</u>
               Specifies the maximum number of times a service can be invoked in one minute; the default is 40.

       <b>--resolve</b>
               Resolve  local  and  remote IP addresses and pass them to the server program via <b>TCPLOCALHOST</b> and
               <b>TCPREMOTEHOST</b> environment variables. See <b>ENVIRONMENT</b> below. This option implies <b>--environment</b>.

       <b>-V,</b> <b>--version</b>
               Shows the version.

       <b>-?,</b> <b>--help</b>
               Shows the help.

       <b>--usage</b>
               Shows the usage message.

</pre><h4><b>OPERATION</b></h4><pre>
       Upon execution, <b>inetd</b> reads its configuration information from a configuration file on the command  line,
       by  default,  <u>/etc/inetd.conf</u>  <u>and</u>  <u>/etc/inetd.d</u>.   If the configuration pathname is a directory, all the
       files in the directory are read like a configuration file. All of the configuration files  are  read  and
       merged.   There  must  be  an entry for each field in the configuration file, with entries for each field
       separated by a tab or a space.  Comments are denoted by a "#" at the beginning of a line.  The fields  of
       the configuration file are as follows:

             service name
             socket type
             protocol
             wait/nowait[.max]
             user[:group]
             server program
             server program arguments

       There  are  two  types  of  services that <b>inetd</b> can start: standard and TCPMUX.  A standard service has a
       well-known port assigned to it; it may be a service that implements an official Internet standard or is a
       BSD-specific service.  As described in RFC 1078, TCPMUX services are nonstandard  services  that  do  not
       have  a  well-known  port  assigned  to them.  They are invoked from <b>inetd</b> when a program connects to the
       “tcpmux” well-known port and specifies the service name.  This feature  is  useful  for  adding  locally-
       developed servers.

       The <u>service-name</u> entry is the name of a valid service in the file <u><a href="file:/etc/services">/etc/services</a></u>.  For “internal” services
       (discussed below), the service name <u>must</u> be the official name of the service (that is, the first entry in
       <u><a href="file:/etc/services">/etc/services</a></u>).  For TCPMUX services, the value of the <u>service-name</u> field consists of the string “tcpmux”
       followed  by  a slash and the locally-chosen service name.  The service names listed in <u><a href="file:/etc/services">/etc/services</a></u> and
       the name “help” are reserved.  Try to choose unique names for your TCPMUX services by prefixing them with
       your organization's name and suffixing them with a version number.

       The <u>socket-type</u> should be one of “stream”, “dgram”, “raw”, “rdm”, or “seqpacket”,  depending  on  whether
       the  socket  is  a stream, datagram, raw, reliably delivered message, or sequenced packet socket.  TCPMUX
       services must use “stream”.

       The <u>protocol</u> must be a valid protocol as given in <u><a href="file:/etc/protocols">/etc/protocols</a></u>.  Examples  might  be  “tcp”  or  “udp”.
       TCPMUX  services  must  use  “tcp”.   By  default the protocols will only listen on IPv4 connections.  To
       modify this behavior per service, either “4” or “6” can be appended to the protocol name, such as  “udp4”
       or  “tcp6”  to  accept  only IPv4 UDP connections or both IPv4 and IPv6 TCP connections respectively.  To
       restrict to IPv6-only connections, “6only” can be appended to the protocol name, such as “tcp6only”.

       The <u>wait/nowait[.max]</u> entry specifies whether the server that is invoked by  inetd  will  take  over  the
       socket  associated  with  the  service access point, and thus whether <b>inetd</b> should wait for the server to
       exit before listening for new service requests.  Datagram servers must use “wait”,  as  they  are  always
       invoked  with  the  original  datagram socket bound to the specified service address.  These servers must
       read at least one datagram from the socket before exiting.  If a datagram server connects  to  its  peer,
       freeing  the  socket  so  <b>inetd</b>  can  received  further  messages  on  the  socket,  it  is  said to be a
       “multi-threaded” server; it should read one datagram from the socket and create a new socket connected to
       the peer.  It should fork, and the parent should then exit to  allow  <b>inetd</b>  to  check  for  new  service
       requests  to  spawn  new  servers.  Datagram servers which process all incoming datagrams on a socket and
       eventually time out are said to  be  “single-threaded”.   <u><a href="../man8/Comsat.8.html">Comsat</a></u>(8),  (<u><a href="../man1/biff.1.html">biff</a></u>(1))  and  <u><a href="../man8/talkd.8.html">talkd</a></u>(8)  are  both
       examples  of  the  latter  type  of datagram server.  <u><a href="../man8/Tftpd.8.html">Tftpd</a></u>(8) is an example of a multi-threaded datagram
       server.  The optional “max” suffix (separated from “wait” or “nowait” by a  dot)  specifies  the  maximum
       number  of  times  a  service can be invoked in one minute; the default is 40.  If a service exceeds this
       limit, <b>inetd</b> will log the problem and stop servicing requests for the specific service for  ten  minutes.
       See also the <b>-R</b> option above.

       Servers  using  stream  sockets  generally  are  multi-threaded  and  use the “nowait” entry.  Connection
       requests for these services are accepted by <b>inetd</b>, and the server is given only the newly-accepted socket
       connected to a client of the service.  Most stream-based services operate in this  manner.   Stream-based
       servers  that  use  “wait”  are  started  with the listening service socket, and must accept at least one
       connection request before exiting.  Such a server would normally accept and process  incoming  connection
       requests until a timeout.  TCPMUX services must use “nowait”.

       The optional “max” suffix (separated from “wait” or “nowait” by a dot) is a decimal number that specifies
       the  maximum  number of server instances that may be spawned from <b>inetd</b> within an interval of 60 seconds.
       It overrides the settings of the <b>-R</b> command line option.

       The <u>user</u> entry should contain the user name, and the optional <u>group</u> name  (separated  from  “user”  by  a
       semicolon or a dot) of the user (and group) as whom the server should run.  This allows for servers to be
       given less permission than root.

       The <u>server-program</u> entry should contain the pathname of the program which is to be executed by <b>inetd</b> when
       a  request  is  found  on  its  socket.   If <b>inetd</b> provides this service internally, this entry should be
       “internal”.

       The <u>server</u> <u>program</u> <u>arguments</u> should be just as arguments normally are, starting with  argv[0],  which  is
       the  name  of  the  program.   If the service is provided internally, the word “internal” should take the
       place of this entry.

       The <b>inetd</b> program provides several “trivial” services internally by use of routines within itself.  These
       services are “echo”, “discard”, “chargen” (character generator), “daytime”  (human  readable  time),  and
       “time”  (machine  readable  time,  in the form of the number of seconds since midnight, January 1, 1900).
       All of these services are tcp based.  For details of these services, consult the appropriate RFC from the
       Network Information Center.

       The <b>inetd</b> program rereads its configuration file when it receives a hangup signal, SIGHUP.  Services  may
       be added, deleted or modified when the configuration file is reread.

</pre><h4><b>TCPMUX</b></h4><pre>
       RFC 1078 describes the TCPMUX protocol: "A TCP client connects to a foreign host on TCP port 1.  It sends
       the  service  name  followed  by  a  carriage-return  line-feed  &lt;CRLF&gt;.   The service name is never case
       sensitive.  The server  replies  with  a  single  character  indicating  positive  (+)  or  negative  (-)
       acknowledgment, immediately followed by an optional message of explanation, terminated with a &lt;CRLF&gt;.  If
       the  reply  was positive, the selected protocol begins; otherwise the connection is closed."  The program
       is passed the TCP connection as file descriptors 0 and 1.

       If the TCPMUX service name begins with a "+", <b>inetd</b> returns the positive reply  for  the  program.   This
       allows you to invoke programs that use stdin/stdout without putting any special server code in them.

       The special service name “help” causes <b>inetd</b> to list TCPMUX services in <u>inetd.conf</u>.

</pre><h4><b>ENVIRONMENT</b></h4><pre>
       If a connection is made with a streaming protocol (TCP) and if <b>--environment</b> option has been given, inetd
       will set the following environment variables before starting the program:

       <b>PROTO</b>: always "TCP".

       <b>TCPLOCALIP</b>: the local IP address of the interface which accepted the connection.

       <b>TCPLOCALPORT</b>: the port number on which the TCP connection was established.

       <b>TCPREMOTEIP</b>: the IP address of the remote client.

       <b>TCPREMOTEPORT</b>: the port number on the client side of the TCP connection.

       In  addition,  if  given the <b>--environment</b> or <b>--resolve</b> options, <b>inetd</b> will set the following environment
       variables:

       <b>TCPLOCALHOST</b>: the DNS name of <u>TCPLOCALIP</u>.

       <b>TCPREMOTEHOST</b>: the DNS name of <u>TCPREMOTEIP</u>.

</pre><h4><b>EXAMPLES</b></h4><pre>
       Here are several example service entries for the various types of services:

       ftp           stream  tcp   nowait root  /usr/libexec/ftpd       ftpd -l
       ntalk         dgram   udp   wait   root  /usr/libexec/ntalkd     ntalkd
       tcpmux/+date  stream  tcp   nowait guest <a href="file:/bin/date">/bin/date</a>               date
       tcpmux/phonebook stream tcp nowait guest /usr/local/bin/phonebook phonebook

</pre><h4><b>ERROR</b> <b>MESSAGES</b></h4><pre>
       The <b>inetd</b> server logs error messages using <u><a href="../man3/syslog.3.html">syslog</a></u>(3).  Important error messages  and  their  explanations
       are:

       <u>service</u>/<u>protocol</u> server failing (looping), service terminated.
       The  number of requests for the specified service in the past minute exceeded the limit. The limit exists
       to prevent a broken program or a malicious user from swamping the system.  This  message  may  occur  for
       several  reasons:  1)  there  are  lots  of hosts requesting the service within a short time period, 2) a
       'broken' client program is requesting the service too frequently,  3)  a  malicious  user  is  running  a
       program  to  invoke the service in a 'denial of service' attack, or 4) the invoked service program has an
       error that causes clients to retry quickly.  Use the [<b>-R</b>] option, as described above, to change the  rate
       limit.  Once the limit is reached, the service will be re-enabled automatically in 10 minutes.

       <u>service</u>/<u>protocol</u>: No such user '<u>user</u>', service ignored
       <u>service</u>/<u>protocol</u>: getpwnam: <u>user</u>: No such user
       No  entry  for  <u>user</u>  exists  in  the  <u>passwd</u>  file.  The  first  message occurs when <b>inetd</b> (re)reads the
       configuration file. The second message occurs when the service is invoked.

       <u>service</u>: can't set uid <u>number</u>
       <u>service</u>: can't set gid <u>number</u>
       The user or group ID for the entry's <u>user</u> is invalid.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <u><a href="../man8/comsat.8.html">comsat</a></u>(8), <u><a href="../man8/fingerd.8.html">fingerd</a></u>(8), <u><a href="../man8/ftpd.8.html">ftpd</a></u>(8), <u><a href="../man8/rexecd.8.html">rexecd</a></u>(8), <u><a href="../man8/rlogind.8.html">rlogind</a></u>(8), <u><a href="../man8/rshd.8.html">rshd</a></u>(8), <u><a href="../man8/telnetd.8.html">telnetd</a></u>(8), <u><a href="../man8/tftpd.8.html">tftpd</a></u>(8)

</pre><h4><b>BUGS</b></h4><pre>
       The environment variables (see <b>ENVIRONMENT</b>) are set only for TCP IPv4 nowait connections.

</pre><h4><b>HISTORY</b></h4><pre>
       The <b>inetd</b> command appeared in 4.3BSD.  TCPMUX is based on code and documentation by Mark Lottor.

GNU Network Utilities                            August 7, 2023                                         <u><a href="../man8/inetd.8.html">inetd</a></u>(8)
</pre>
 </div>
</div></section>
</div>
</body>
</html>