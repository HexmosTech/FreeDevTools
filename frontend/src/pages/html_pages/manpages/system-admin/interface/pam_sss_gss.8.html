<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>pam_sss_gss - PAM module for SSSD GSSAPI authentication</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libpam-sss">libpam-sss_2.10.1-2ubuntu4_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       pam_sss_gss - PAM module for SSSD GSSAPI authentication

</pre><h4><b>SYNOPSIS</b></h4><pre>

       <b>pam_sss_gss.so</b> [<u>debug</u>]

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>pam_sss_gss.so</b> authenticates user over GSSAPI in cooperation with SSSD.

       This module will try to authenticate the user using the GSSAPI hostbased service name host@hostname which
       translates to host/hostname@REALM Kerberos principal. The <u>REALM</u> part of the Kerberos principal name is
       derived by Kerberos internal mechanisms and it can be set explicitly in configuration of [domain_realm]
       section in /etc/krb5.conf.

       SSSD is used to provide desired service name and to validate the user's credentials using GSSAPI calls.
       If the service ticket is already present in the Kerberos credentials cache or if user's ticket granting
       ticket can be used to get the correct service ticket then the user will be authenticated.

       If <b>pam_gssapi_check_upn</b> is True (default) then SSSD requires that the credentials used to obtain the
       service tickets can be associated with the user. This means that the principal that owns the Kerberos
       credentials must match with the user principal name as defined in LDAP.

       To enable GSSAPI authentication in SSSD, set <b>pam_gssapi_services</b> option in [pam] or domain section of
       sssd.conf. The service credentials need to be stored in SSSD's keytab (it is already present if you use
       ipa or ad provider). The keytab location can be set with <b>krb5_keytab</b> option. See <b><a href="../man5/sssd.conf.5.html">sssd.conf</a></b>(5) and <b><a href="../man5/sssdkrb5.5.html">sssd-</a></b>
       <b><a href="../man5/sssdkrb5.5.html">krb5</a></b>(5) for more details on these options.

       Some Kerberos deployments allow to associate authentication indicators with a particular
       pre-authentication method used to obtain the ticket granting ticket by the user.  <b>pam_sss_gss.so</b> allows
       to enforce presence of authentication indicators in the service tickets before a particular PAM service
       can be accessed.

       If <b>pam_gssapi_indicators_map</b> is set in the [pam] or domain section of sssd.conf, then SSSD will perform a
       check of the presence of any configured indicators in the service ticket.

</pre><h4><b>OPTIONS</b></h4><pre>
       <b>debug</b>
           Print debugging information.

</pre><h4><b>MODULE</b> <b>TYPES</b> <b>PROVIDED</b></h4><pre>
       Only the <b>auth</b> module type is provided.

</pre><h4><b>RETURN</b> <b>VALUES</b></h4><pre>
       PAM_SUCCESS
           The PAM operation finished successfully.

       PAM_USER_UNKNOWN
           The user is not known to the authentication service or the GSSAPI authentication is not supported.

       PAM_AUTH_ERR
           Authentication failure.

       PAM_AUTHINFO_UNAVAIL
           Unable to access the authentication information. This might be due to a network or hardware failure.

       PAM_SYSTEM_ERR
           A system error occurred. The SSSD log files may contain additional information about the error.

</pre><h4><b>EXAMPLES</b></h4><pre>
       The main use case is to provide password-less authentication in sudo but without the need to disable
       authentication completely. To achieve this, first enable GSSAPI authentication for sudo in sssd.conf:

           [domain/MYDOMAIN]
           pam_gssapi_services = sudo, sudo-i

       And then enable the module in desired PAM stack (e.g. <a href="file:/etc/pam.d/sudo">/etc/pam.d/sudo</a> and <a href="file:/etc/pam.d/sudo-i">/etc/pam.d/sudo-i</a>).

           ...
           auth sufficient pam_sss_gss.so
           ...

</pre><h4><b>TROUBLESHOOTING</b></h4><pre>
       SSSD logs, pam_sss_gss debug output and syslog may contain helpful information about the error. Here are
       some common issues:

       1. I have KRB5CCNAME environment variable set and the authentication does not work: Depending on your
       sudo version, it is possible that sudo does not pass this variable to the PAM environment. Try adding
       KRB5CCNAME to <b>env_keep</b> in <a href="file:/etc/sudoers">/etc/sudoers</a> or in your LDAP sudo rules default options.

       2. Authentication does not work and syslog contains "Server not found in Kerberos database": Kerberos is
       probably not able to resolve correct realm for the service ticket based on the hostname. Try adding the
       hostname directly to <b>[domain_realm]</b> in /etc/krb5.conf like so:

       3. Authentication does not work and syslog contains "No Kerberos credentials available": You don't have
       any credentials that can be used to obtain the required service ticket. Use kinit or authenticate over
       SSSD to acquire those credentials.

       4. Authentication does not work and SSSD sssd-pam log contains "User with UPN [$UPN] was not found." or
       "UPN [$UPN] does not match target user [$username].": You are using credentials that can not be mapped to
       the user that is being authenticated. Try to use kswitch to select different principal, make sure you
       authenticated with SSSD or consider disabling <b>pam_gssapi_check_upn</b>.

           [domain_realm]
           .myhostname = MYREALM

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man8/sssd.8.html">sssd</a></b>(8), <b><a href="../man5/sssd.conf.5.html">sssd.conf</a></b>(5), <b><a href="../man5/sssd-ldap.5.html">sssd-ldap</a></b>(5), <b><a href="../man5/sssd-ldap-attributes.5.html">sssd-ldap-attributes</a></b>(5), <b><a href="../man5/sssd-krb5.5.html">sssd-krb5</a></b>(5), <b><a href="../man5/sssd-simple.5.html">sssd-simple</a></b>(5), <b><a href="../man5/sssd-ipa.5.html">sssd-ipa</a></b>(5),
       <b><a href="../man5/sssd-ad.5.html">sssd-ad</a></b>(5), <b><a href="../man5/sssd-files.5.html">sssd-files</a></b>(5), <b><a href="../man5/sssd-sudo.5.html">sssd-sudo</a></b>(5), <b><a href="../man5/sssd-session-recording.5.html">sssd-session-recording</a></b>(5), <b><a href="../man8/sss_cache.8.html">sss_cache</a></b>(8), <b><a href="../man8/sss_debuglevel.8.html">sss_debuglevel</a></b>(8),
       <b><a href="../man8/sss_obfuscate.8.html">sss_obfuscate</a></b>(8), <b><a href="../man8/sss_seed.8.html">sss_seed</a></b>(8), <b><a href="../man8/sssd_krb5_locator_plugin.8.html">sssd_krb5_locator_plugin</a></b>(8), <b><a href="../man1/sss_ssh_authorizedkeys.1.html">sss_ssh_authorizedkeys</a></b>(1),
       <b><a href="../man1/sss_ssh_knownhosts.1.html">sss_ssh_knownhosts</a></b>(1), <b><a href="../man5/sssd-ifp.5.html">sssd-ifp</a></b>(5), <b><a href="../man8/pam_sss.8.html">pam_sss</a></b>(8).  <b><a href="../man5/sss_rpcidmapd.5.html">sss_rpcidmapd</a></b>(5) <b><a href="../man5/sssd-systemtap.5.html">sssd-systemtap</a></b>(5)

</pre><h4><b>AUTHORS</b></h4><pre>
       <b>The</b> <b>SSSD</b> <b>upstream</b> <b>-</b> <b>https://github.com/SSSD/sssd/</b>

SSSD                                               03/24/2025                                     <u><a href="../man8/PAM_SSS_GSS.8.html">PAM_SSS_GSS</a></u>(8)
</pre>
 </div>
</div></section>
</div>
</body>
</html>