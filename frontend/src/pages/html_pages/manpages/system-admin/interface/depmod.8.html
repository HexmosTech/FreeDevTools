<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>depmod - Generate modules.dep and map files.</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/kmod">kmod_34.2-2ubuntu1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       depmod - Generate modules.dep and map files.

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>depmod</b> [<b>-b</b> <u>basedir</u>] [<b>-m</b> <u>moduledir</u>] [<b>-o</b> <u>outdir</u>] [<b>-e</b>] [<b>-E</b> <u>Module.symvers</u>]
              [<b>-F</b> <u>System.map</u>] [<b>-n</b>] [<b>-v</b>] [<b>-A</b>] [<b>-P</b> <u>prefix</u>] [<b>-w</b>] [<u>version</u>]

       <b>depmod</b> [<b>-e</b>] [<b>-E</b> <u>Module.symvers</u>] [<b>-F</b> <u>System.map</u>] [<b>-n</b>] [<b>-v</b>] [<b>-P</b> <u>prefix</u>]
              [<b>-w</b>] [<u>version</u>] [<u>filename</u>...]

</pre><h4><b>DESCRIPTION</b></h4><pre>
       Linux  kernel  modules can provide services (called "symbols") for other modules to use (using one of the
       EXPORT_SYMBOL variants in the code). If a second module uses this  symbol,  that  second  module  clearly
       depends on the first module. These dependencies can get quite complex.

       <b>depmod</b>  creates a list of module dependencies by reading each module under &lt;BASEDIR&gt;/&lt;MODULEDIR&gt;/<u>version</u>.
       By default &lt;MODULEDIR&gt; is <a href="file:/lib/modules">/lib/modules</a> and &lt;BASEDIR&gt; is empty. See options below to override when needed.
       It determines what symbols each module exports and needs.  This list is written  to  <b>modules.dep</b>,  and  a
       binary hashed version named modules.dep.bin, in the same directory. If filenames are given on the command
       line, only those modules are examined (which is rarely useful unless all modules are listed). <b>depmod</b> also
       creates  a  list  of  symbols provided by modules in the file named modules.symbols and its binary hashed
       version, modules.symbols.bin. Finally, <b>depmod</b> will output a file named modules.devname if modules  supply
       special  device  names  (devname) that should be populated in <a href="file:/dev">/dev</a> on boot (by a utility such as systemd-
       tmpfiles).

       If a <u>version</u> is provided, then that kernel version's module directory is used  rather  than  the  current
       kernel version (as returned by <b>uname</b> <b>-r</b>).

</pre><h4><b>OPTIONS</b></h4><pre>
       <b>-a</b>, <b>--all</b>
           Probe all modules. This option is enabled by default if no file names are given in the command-line.

       <b>-A</b>, <b>--quick</b>
           This  option scans to see if any modules are newer than the <b>modules.dep</b> file before any work is done:
           if not, it silently exits rather than regenerating the files.

       <b>-b</b> <u>basedir</u>, <b>--basedir</b>=<u>basedir</u>
           Override the base directory &lt;BASEDIR&gt; where modules are located. If your modules are not currently in
           the (normal) directory <a href="file:/lib/modules/">/lib/modules/</a><u>version</u>, but in a staging area, you can specify a  <u>basedir</u>  which
           is  prepended to the directory name. This <u>basedir</u> is stripped from the resulting <b>modules.dep</b> file, so
           it is ready to be moved into the normal location. Use this option if you are  a  distribution  vendor
           who needs to pre-generate the meta-data files rather than running <b>depmod</b> again later.

           If a relative path is given, it's relative to the current working directory.

           Example:
               depmod -b /my/build/staging/dir/

           This  expects all input files under <u>/my/build/staging/dir/lib/modules/$(uname</u> <u>-r)</u> and generates index
           files under that same directory.

       <b>-m</b> <u>moduledir</u>, <b>--moduledir</b>=<u>moduledir</u>
           Override the module directory &lt;MODULEDIR&gt;, which defaults to <a href="file:/lib/modules">/lib/modules</a> prefix set at  build  time.
           This  is  useful when building <b>modules.dep</b> file in <u>basedir</u> for a system that uses a different prefix,
           e.g. <u><a href="file:/usr/lib/modules">/usr/lib/modules</a></u> vs <u><a href="file:/lib/modules">/lib/modules</a></u>.

           Relative and absolute paths are accepted, but they are always relative to the <u>basedir</u>.

           Examples:
               depmod -b /tmp/build -m /kernel-modules
               depmod -b /tmp/build -m kernel-modules

           This expects all input files under <u>/tmp/build/kernel-modules/$(uname</u> <u>-r)</u> and  generates  index  files
           under that same directory.

           Without an accompanying <b>-b</b> argument, the moduledir is relative to <u>/</u>. Example:

               depmod -m foo/bar

           This  expects  all  input  files  under <u>/foo/bar/$(uname</u> <u>-r)</u> and generates index files under the same
           directory. Unless libkmod is prepared to handle that arbitrary location, it won't work in runtime.

       <b>-o</b> <u>outdir</u>, <b>--outdir</b>=<u>outdir</u>
           Set the output directory where <b>depmod</b> will store any generated file. <u>outdir</u> serves as a root to  that
           location,  similar  to  how  <u>basedir</u> is used. Also this setting takes precedence and if used together
           with <u>basedir</u> it will result in the input being that directory, but the output being the  one  set  by
           <u>outdir</u>.

           If a relative path is given, it's relative to the current working directory.

           Example:
               depmod -o /my/build/staging/dir/

           This  expects  all  input  files  under  <u><a href="file:/lib/modules/">/lib/modules/</a>$(uname</u>  <u>-r)</u>  and  generates  index files under
           <u>/my/build/staging/dir/lib/modules/$(uname</u> <u>-r)</u>.

       <b>-C</b> <u>file</u> <u>or</u> <u>directory</u>, <b>--config</b>=<u>file</u> <u>or</u> <u>directory</u>
           This option overrides the default configuration files. See <b><a href="../man5/depmod.d.5.html">depmod.d</a></b>(5).

       <b>-e</b>, <b>--errsyms</b>
           When combined with the <b>-F</b> option, this reports any  symbols  which  a  module  needs  which  are  not
           supplied by other modules or the kernel. Normally, any symbols not provided by modules are assumed to
           be  provided  by  the kernel (which should be true in a perfect world), but this assumption can break
           especially when additionally updated third party drivers are not correctly installed  or  were  built
           incorrectly.

       <b>-E</b> <u>Module.symvers</u>, <b>--symvers</b>=<u>Module.symvers</u>
           When  combined  with  the <b>-e</b> option, this reports any symbol versions supplied by modules that do not
           match with the symbol versions provided by the kernel in its <u>Module.symvers</u>. This option is  mutually
           incompatible with <b>-F</b>.

       <b>-F</b> <u>System.map</u>, <b>--filesyms</b>=<u>System.map</u>
           Supplied  with the <u>System.map</u> produced when the kernel was built, this allows the <b>-e</b> option to report
           unresolved symbols. This option is mutually incompatible with <b>-E</b>.

       <b>-h</b>, <b>--help</b>
           Print the help message and exit.

       <b>-n</b>, <b>--show</b>, <b>--dry-run</b>
           This sends the resulting <b>modules.dep</b> and the various map files to standard output rather than writing
           them into the module directory.

       <b>-P</b>
           Some architectures prefix symbols with an extraneous character. This  specifies  a  prefix  character
           (for example '_') to ignore.

       <b>-v</b>, <b>--verbose</b>
           In  verbose  mode,  <b>depmod</b>  will  print  (to  stdout)  all the symbols each module depends on and the
           module's file name which provides that symbol.

       <b>-V</b>, <b>--version</b>
           Show version of program and exit. See below for caveats when run on older kernels.

       <b>-w</b>
           Warn on duplicate dependencies, aliases, symbol versions, etc.

</pre><h4><b>COPYRIGHT</b></h4><pre>
       This manual page originally Copyright 2002,  Rusty  Russell,  IBM  Corporation.  Portions  Copyright  Jon
       Masters, and others.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man5/depmod.d.5.html">depmod.d</a></b>(5), <b><a href="../man8/modprobe.8.html">modprobe</a></b>(8), <b><a href="../man5/modules.dep.5.html">modules.dep</a></b>(5)

</pre><h4><b>BUGS</b></h4><pre>
       Please  direct  any  bug  reports to kmod's issue tracker at https://github.com/kmod-project/kmod/issues/
       alongside with version used, steps to reproduce the problem and the expected outcome.

</pre><h4><b>AUTHORS</b></h4><pre>
       Numerous contributions have come from the linux-modules mailing list &lt;<a href="mailto:linux-modules@vger.kernel.org">linux-modules@vger.kernel.org</a>&gt;  and
       Github.  If  you have a clone of kmod.git itself, the output of <b><a href="../man1/git-shortlog.1.html">git-shortlog</a></b>(1) and <b><a href="../man1/git-blame.1.html">git-blame</a></b>(1) can show
       you the authors for specific parts of the project.

       <b>Lucas</b> <b>De</b> <b>Marchi</b> &lt;<a href="mailto:lucas.de.marchi@gmail.com">lucas.de.marchi@gmail.com</a>&gt; is the current maintainer of the project.

kmod                                               2025-06-11                                          <u><a href="../man8/DEPMOD.8.html">DEPMOD</a></u>(8)
</pre>
 </div>
</div></section>
</div>
</body>
</html>