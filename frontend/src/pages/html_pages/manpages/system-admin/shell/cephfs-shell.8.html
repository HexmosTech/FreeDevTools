<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>cephfs-shell - Shell-like tool talking with CephFS</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/cephfs-shell">cephfs-shell_19.2.1-0ubuntu3_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       cephfs-shell - Shell-like tool talking with CephFS

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>cephfs-shell</b> [options] [command]
       <b>cephfs-shell</b> [options] -- [command, command,...]

</pre><h4><b>DESCRIPTION</b></h4><pre>
       CephFS Shell provides shell-like commands that directly interact with the Ceph File System.

       This  tool  can  be  used  in  interactive  mode  as  well  as  in non-interactive mode.  In former mode,
       cephfs-shell opens a shell session and after the given command is finished, it prints the  prompt  string
       and  waits  indefinitely. When the shell session is finished, cephfs-shell quits with the return value of
       last executed command. In non-interactive mode, cephfs-shell issues a command and exits right  after  the
       command's execution is complete with the command's return value.

       Behaviour  of  CephFS  Shell  can be tweaked using <b>cephfs-shell.conf</b>. Refer to <u>CephFS</u> <u>Shell</u> <u>Configuration</u>
       <u>File</u> for details.

</pre><h4><b>OPTIONS</b></h4><pre>
       <b>-b,</b> <b>--batch</b> <b>FILE</b>
              Path to batch file.

       <b>-c,</b> <b>--config</b> <b>FILE</b>
              Path to cephfs-shell.conf

       <b>-f,</b> <b>--fs</b> <b>FS</b>
              Name of filesystem to mount.

       <b>-t,</b> <b>--test</b> <b>FILE</b>
              Path to transcript(s) in FILE for testing

       <b>NOTE:</b>
          Latest version of the cmd2 module is required  for  running  cephfs-shell.   If  CephFS  is  installed
          through  source,  execute  cephfs-shell  in  the build directory. It can also be executed as following
          using virtualenv:

          [build]$ python3 -m venv venv &amp;&amp; source venv/bin/activate &amp;&amp; pip3 install cmd2 colorama
          [build]$ source vstart_environment.sh &amp;&amp; source venv/bin/activate &amp;&amp; python3 ../src/tools/cephfs/shell/cephfs-shell

</pre><h4><b>COMMANDS</b></h4><pre>
       <b>NOTE:</b>
          Apart from Ceph File System, CephFS Shell commands can also interact  directly  with  the  local  file
          system. To achieve this, <b>!</b> (an exclamation point) must precede the CephFS Shell command.

          Usage :
              !&lt;cephfs_shell_command&gt;

          For example,

              CephFS:~/&gt;&gt;&gt; !ls # Lists the local file system directory contents.
              CephFS:~/&gt;&gt;&gt; ls  # Lists the Ceph File System directory contents.

   <b>mkdir</b>
       Create the directory(ies), if they do not already exist.

       Usage :
          mkdir [-option] &lt;directory&gt;...

       • directory - name of the directory to be created.

       <b>Options</b> <b>:</b>

              <b>-m</b> <u>MODE</u>
                     Sets the access mode for the new directory.

              <b>-p</b>, <b>--parent</b>
                     Create parent directories as necessary. When this option is specified, no error is reported
                     if a directory already exists.

   <b>put</b>
       Copy a file/directory to Ceph File System from Local File System.

       Usage :
          put [options] &lt;source_path&gt; &lt;target_path&gt;

       •

         <b>source_path</b> <b>-</b> <b>local</b> <b>file/directory</b> <b>path</b> <b>to</b> <b>be</b> <b>copied</b> <b>to</b> <b>cephfs.</b>

                • if <u>.</u> copies all the file/directories in the local working directory.

                • if <u>-</u>  Reads the input from stdin.

       •

         <b>target_path</b> <b>-</b> <b>remote</b> <b>directory</b> <b>path</b> <b>where</b> <b>the</b> <b>files/directories</b> <b>are</b> <b>to</b> <b>be</b> <b>copied</b> <b>to.</b>

                • if <u>.</u> files/directories are copied to the remote working directory.

       <b>Options</b> <b>:</b>

              <b>-f</b>, <b>--force</b>
                     Overwrites the destination if it already exists.

   <b>get</b>
       Copy a file from Ceph File System to Local File System.

       Usage :
          get [options] &lt;source_path&gt; &lt;target_path&gt;

       •

         <b>source_path</b> <b>-</b> <b>remote</b> <b>file/directory</b> <b>path</b> <b>which</b> <b>is</b> <b>to</b> <b>be</b> <b>copied</b> <b>to</b> <b>local</b> <b>file</b> <b>system.</b>

                • if <u>.</u> copies all the file/directories in the remote working directory.

       •

         <b>target_path</b> <b>-</b> <b>local</b> <b>directory</b> <b>path</b> <b>where</b> <b>the</b> <b>files/directories</b> <b>are</b> <b>to</b> <b>be</b> <b>copied</b> <b>to.</b>

                • if <u>.</u> files/directories are copied to the local working directory.

                • if <u>-</u> Writes output to stdout.

       <b>Options:</b>

              <b>-f</b>, <b>--force</b>
                     Overwrites the destination if it already exists.

   <b>ls</b>
       List all the files and directories in the current working directory.

       Usage :
          ls [option] [directory]...

       •

         <b>directory</b> <b>-</b> <b>name</b> <b>of</b> <b>directory</b> <b>whose</b> <b>files/directories</b> <b>are</b> <b>to</b> <b>be</b> <b>listed.</b>

                • By default current working directory's files/directories are listed.

       <b>Options:</b>

              <b>-l</b>, <b>--long</b>
                     list with long format - show permissions

              <b>-r</b>, <b>--reverse</b>
                     reverse sort

              <b>-H</b>     human readable

              <b>-a</b>,<u>-a</u><b>ll</b>
                     ignore entries starting with .

              <b>-S</b>     Sort by file_size

   <b>cat</b>
       Concatenate files and print on the standard output

       Usage :
          cat  &lt;file&gt;....

       • file - name of the file

   <b>ln</b>
       Add a hard link to an existing file or create a symbolic link to an existing file or directory.

       Usage:
          ln [options] &lt;target&gt; [link_name]

       • target - file/directory to which a link is to be created

       • link_name - link to target with the name link_name

       <b>Options:</b>

              <b>-s</b>, <b>--symbolic</b>
                     Create symbolic link

              <b>-v</b>, <b>--verbose</b>
                     Print name of each linked file

              <b>-f</b>, <b>--force</b>
                     Force create link/symbolic link

   <b>cd</b>
       Change current working directory.

       Usage :
          cd [directory]

       •

         <b>directory</b> <b>-</b> <b>path/directory</b> <b>name.</b> <b>If</b> <b>no</b> <b>directory</b> <b>is</b> <b>mentioned</b> <b>it</b> <b>is</b> <b>changed</b> <b>to</b> <b>the</b> <b>root</b> <b>directory.</b>

                • If '.' moves to the parent directory of the current directory.

   <b>cwd</b>
       Get current working directory.

       Usage :
          cwd

   <b>quit/Ctrl</b> <b>+</b> <b>D</b>
       Close the shell.

   <b>chmod</b>
       Change the permissions of file/directory.

       Usage :
          chmod &lt;mode&gt; &lt;file/directory&gt;

   <b>mv</b>
       Moves files/Directory from source to destination.

       Usage :
          mv &lt;source_path&gt; &lt;destination_path&gt;

   <b>rmdir</b>
       Delete a directory(ies).

       Usage :
          rmdir &lt;directory_name&gt;.....

   <b>rm</b>
       Remove a file(es).

       Usage :
          rm &lt;file_name/pattern&gt;...

   <b>write</b>
       Create and Write a file.

       Usage :
          write &lt;file_name&gt; &lt;Enter Data&gt; Ctrl+D Exit.

   <b>lls</b>
       Lists  all files and directories in the specified directory.Current local directory files and directories
       are listed if no     path is mentioned

       Usage:
          lls &lt;path&gt;.....

   <b>lcd</b>
       Moves into the given local directory.

       Usage :
          lcd &lt;path&gt;

   <b>lpwd</b>
       Prints the absolute path of the current local directory.

       Usage :
          lpwd

   <b>umask</b>
       Set and get the file mode creation mask

       Usage :
          umask [mode]

   <b>alias</b>
       Define or display aliases

       Usage:
          alias [name] | [&lt;name&gt; &lt;value&gt;]

       • name - name of the alias being looked up, added, or replaced

       • value - what the alias will be resolved to (if adding or replacing) this can contain  spaces  and  does
         not need to be quoted

   <b>run_pyscript</b>
       Runs a python script file inside the console

       Usage:
          run_pyscript &lt;script_path&gt; [script_arguments]

       • Console  commands  can be executed inside this script with cmd ("your command") However, you cannot run
         nested "py" or "pyscript" commands from within this script. Paths or arguments that contain spaces must
         be enclosed in quotes

       <b>NOTE:</b>
          This command is available as <b>pyscript</b> for cmd2 versions 0.9.13 or less.

   <b>py</b>
       Invoke python command, shell, or script

       Usage :
          py &lt;command&gt;: Executes a Python command.  py: Enters interactive Python mode.

   <b>shortcuts</b>
       Lists shortcuts (aliases) available

       Usage :
          shortcuts

   <b>history</b>
       View, run, edit, and save previously entered commands.

       Usage :
          history [-h] [-r | -e | -s | -o FILE | -t TRANSCRIPT] [arg]

       <b>Options:</b>

              <b>-h</b>     show this help message and exit

              <b>-r</b>     run selected history items

              <b>-e</b>     edit and then run selected history items

              <b>-s</b>     script format; no separation lines

              <b>-o</b> <u>FILE</u>
                     output commands to a script file

              <b>-t</b> <u>TRANSCRIPT</u>
                     output commands and results to a transcript file

   <b>unalias</b>
       Unsets aliases

       Usage :
          unalias [-a] name [name ...]

       • name - name of the alias being unset

       <b>Options:</b>

              <b>-a</b>     remove all alias definitions

   <b>set</b>
       Sets a settable parameter or shows current settings of parameters.

       Usage :
          set [-h] [-a] [-l] [settable [settable ...]]

       • Call without arguments for a list of settable parameters with their values.

       <b>Options</b> <b>:</b>

              <b>-h</b>     show this help message and exit

              <b>-a</b>     display read-only settings as well

              <b>-l</b>     describe function of parameter

   <b>edit</b>
       Edit a file in a text editor.

       Usage:
          edit [file_path]

       • file_path - path to a file to open in editor

   <b>run_script</b>
       Runs commands in script file that is encoded as either ASCII or UTF-8 text.  Each command in  the  script
       should be separated by a newline.

       Usage:
          run_script &lt;file_path&gt;

       • file_path - a file path pointing to a script

       <b>NOTE:</b>
          This command is available as <b>load</b> for cmd2 versions 0.9.13 or less.

   <b>shell</b>
       Execute a command as if at the OS prompt.

       Usage:
          shell &lt;command&gt; [arguments]

   <b>locate</b>
       Find an item in File System

       Usage:
          locate [options] &lt;name&gt;

       <b>Options</b> <b>:</b>

              <b>-c</b>     Count number of items found

              <b>-i</b>     Ignore case

   <b>stat</b>
       Display file status.

       Usage :
          stat [-h] &lt;file_name&gt; [file_name ...]

       <b>Options</b> <b>:</b>

              <b>-h</b>     Shows the help message

   <b>snap</b>
       Create or Delete Snapshot

       Usage:
          snap {create|delete} &lt;snap_name&gt; &lt;dir_name&gt;

       • snap_name - Snapshot name to be created or deleted

       • dir_name - directory under which snapshot should be created or deleted

   <b>setxattr</b>
       Set extended attribute for a file

       Usage :
          setxattr [-h] &lt;path&gt; &lt;name&gt; &lt;value&gt;

       • path - Path to the file

       • name - Extended attribute name to get or set

       • value - Extended attribute value to be set

       <b>Options:</b>

              <b>-h</b>, <b>--help</b>
                     Shows the help message

   <b>getxattr</b>
       Get extended attribute value for the name associated with the path

       Usage :
          getxattr [-h] &lt;path&gt; &lt;name&gt;

       • path - Path to the file

       • name - Extended attribute name to get or set

       <b>Options:</b>

              <b>-h</b>, <b>--help</b>
                     Shows the help message

   <b>listxattr</b>
       List extended attribute names associated with the path

       Usage :
          listxattr [-h] &lt;path&gt;

       • path - Path to the file

       <b>Options:</b>

              <b>-h</b>, <b>--help</b>
                     Shows the help message

   <b>df</b>
       Display amount of available disk space

       Usage :
          df [-h] [file [file ...]]

       • file - name of the file

       <b>Options:</b>

              <b>-h</b>, <b>--help</b>
                     Shows the help message

   <b>du</b>
       Show disk usage of a directory

       Usage :
          du [-h] [-r] [paths [paths ...]]

       • paths - name of the directory

       <b>Options:</b>

              <b>-h</b>, <b>--help</b>
                     Shows the help message

              <b>-r</b>     Recursive Disk usage of all directories

   <b>quota</b>
       Quota management for a Directory

       Usage :
          quota [-h] [--max_bytes [MAX_BYTES]] [--max_files [MAX_FILES]] {get,set} path

       • {get,set} - quota operation type.

       • path - name of the directory.

       <b>Options</b> <b>:</b>

              <b>-h</b>, <b>--help</b>
                     Shows the help message

              <b>--max_bytes</b> <u>MAX_BYTES</u>
                     Set max cumulative size of the data under this directory

              <b>--max_files</b> <u>MAX_FILES</u>
                     Set total number of files under this directory tree

</pre><h4><b>CEPHFS</b> <b>SHELL</b> <b>CONFIGURATION</b> <b>FILE</b></h4><pre>
       By  default,  CephFS  Shell  looks for <b>cephfs-shell.conf</b> in the path provided by the environment variable
       <b>CEPHFS_SHELL_CONF</b> and then in user's home directory (<b><a href="file:~/.cephfs-shell.conf">~/.cephfs-shell.conf</a></b>).

       Right now, CephFS Shell inherits all its options from its  dependency  <b>cmd2</b>.   Therefore,  these  options
       might  vary  with  the  version of <b>cmd2</b> installed on your system. Refer to <b>cmd2</b> docs for a description of
       these options.

       Following is a sample <b>cephfs-shell.conf</b>

          [cephfs-shell]
          prompt = CephFS:~/&gt;&gt;&gt;
          continuation_prompt = &gt;

          quiet = False
          timing = False
          colors = True
          debug = False

          abbrev = False
          autorun_on_edit = False
          echo = False
          editor = vim
          feedback_to_output = False
          locals_in_py = True

</pre><h4><b>EXIT</b> <b>CODE</b></h4><pre>
       Following exit codes are returned by cephfs shell
                                ┌───────────────────────────────────────┬───────────┐
                                │ Error Type                            │ Exit Code │
                                ├───────────────────────────────────────┼───────────┤
                                │ Miscellaneous                         │ 1         │
                                ├───────────────────────────────────────┼───────────┤
                                │ Keyboard Interrupt                    │ 2         │
                                ├───────────────────────────────────────┼───────────┤
                                │ Operation not permitted               │ 3         │
                                ├───────────────────────────────────────┼───────────┤
                                │ Permission denied                     │ 4         │
                                ├───────────────────────────────────────┼───────────┤
                                │ No such file or directory             │ 5         │
                                ├───────────────────────────────────────┼───────────┤
                                │ I/O error                             │ 6         │
                                ├───────────────────────────────────────┼───────────┤
                                │ No space left on device               │ 7         │
                                ├───────────────────────────────────────┼───────────┤
                                │ File exists                           │ 8         │
                                ├───────────────────────────────────────┼───────────┤
                                │ No data available                     │ 9         │
                                ├───────────────────────────────────────┼───────────┤
                                │ Invalid argument                      │ 10        │
                                ├───────────────────────────────────────┼───────────┤
                                │ Operation not supported on  transport │ 11        │
                                │ endpoint                              │           │
                                ├───────────────────────────────────────┼───────────┤
                                │ Range error                           │ 12        │
                                ├───────────────────────────────────────┼───────────┤
                                │ Operation would block                 │ 13        │
                                ├───────────────────────────────────────┼───────────┤
                                │ Directory not empty                   │ 14        │
                                ├───────────────────────────────────────┼───────────┤
                                │ Not a directory                       │ 15        │
                                ├───────────────────────────────────────┼───────────┤
                                │ Disk quota exceeded                   │ 16        │
                                ├───────────────────────────────────────┼───────────┤
                                │ Broken pipe                           │ 17        │
                                ├───────────────────────────────────────┼───────────┤
                                │ Cannot  send after transport endpoint │ 18        │
                                │ shutdown                              │           │
                                ├───────────────────────────────────────┼───────────┤
                                │ Connection aborted                    │ 19        │
                                ├───────────────────────────────────────┼───────────┤
                                │ Connection refused                    │ 20        │
                                ├───────────────────────────────────────┼───────────┤
                                │ Connection reset                      │ 21        │
                                ├───────────────────────────────────────┼───────────┤
                                │ Interrupted function call             │ 22        │
                                └───────────────────────────────────────┴───────────┘

</pre><h4><b>FILES</b></h4><pre>
       <b><a href="file:~/.cephfs-shell.conf">~/.cephfs-shell.conf</a></b>

</pre><h4><b>COPYRIGHT</b></h4><pre>
       2010-2014, Inktank Storage, Inc. and contributors. Licensed  under  Creative  Commons  Attribution  Share
       Alike 3.0 (CC-BY-SA-3.0)

dev                                               May 22, 2025                                   <u><a href="../man8/CEPHFS-SHELL.8.html">CEPHFS-SHELL</a></u>(8)
</pre>
 </div>
</div></section>
</div>
</body>
</html>