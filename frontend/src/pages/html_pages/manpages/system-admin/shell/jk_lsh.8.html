<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>jk_lsh - a shell that limits the binaries it will execute</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/jailkit">jailkit_2.23-2_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       jk_lsh - a shell that limits the binaries it will execute

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>jk_lsh</b> <b>-c</b> <b>command</b>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The  jailkit limited shell jk_lsh is not an interactive shell. jk_lsh will only execute commands that are
       passed during startup (e.g. <a href="file:/bin/sh">/bin/sh</a> -c command) and  will  deny  to  start  all  but  explicitly  allowed
       commands. All other commands, or regular shell access are denied. This can be used to restrict an account
       to  a  specific use. For example, jk_lsh can be used to make rsync-, cvs-, sftp- or scp-only accounts, or
       even an account that can start firefox or opera but nothing else.

       The allowed actions are read from <u>/etc/jailkit/jk_lsh.ini</u> If you run jk_lsh inside a changed  root  jail,
       make sure jk_lsh.ini is present inside that chroot jail.

</pre><h4><b>LIMITATIONS</b></h4><pre>
       Some  shells  can process complex commandlines, such as command1 &amp;&amp; command2, or kill `ps |grep foo`. The
       limited shell jk_lsh cannot do anything like that, another shell should be used if you want  enable  such
       features. It is not planned to include this in any future version.

</pre><h4><b>OPTIONS</b></h4><pre>
       jk_lsh  can  do  word  expansion  such  as *.txt expanding to each file that ends with .txt. This is very
       useful when running rsync or scp with jk_lsh. Option allow_word_expansion should be set to 1 in order  to
       allow this.

       jk_lsh can also set environment variables. This is a comma separated list with key=value pairs.

       Options  can  be  set  for  a specific user, for the primary group of a user, or for all users in section
       DEFAULT.

</pre><h4><b>EXAMPLE</b></h4><pre>
       An example config file for user test or group test is shown below

       [DEFAULT]
       executables = <a href="file:///usr/lib/w3m/cgi-bin/w3mman2html.cgi?scp">/usr/bin/scp</a>, <a href="file:/usr/lib/sftp-server">/usr/lib/sftp-server</a>, <a href="file:///usr/lib/w3m/cgi-bin/w3mman2html.cgi?rsync">/usr/bin/rsync</a>
       paths = <a href="file:/usr/bin/">/usr/bin/</a>, <a href="file:/usr/lib">/usr/lib</a>
       allow_word_expansion = 1

       [test]
       executables = <a href="file:///usr/lib/w3m/cgi-bin/w3mman2html.cgi?scp">/usr/bin/scp</a>, <a href="file:/usr/lib/sftp-server">/usr/lib/sftp-server</a>
       paths = <a href="file:/usr/bin/">/usr/bin/</a>, <a href="file:/usr/lib">/usr/lib</a>
       allow_word_expansion = 0
       umask = 002

       [group test]
       executables = <a href="file:///usr/lib/w3m/cgi-bin/w3mman2html.cgi?rsync">/usr/bin/rsync</a>
       paths = <a href="file:/usr/bin/">/usr/bin/</a>
       allow_word_expansion = 1
       environment=TERM=linux,FOO=bar

       If user test has primary group test, however, he can not execute rsync in the above  example.  First  the
       user  section  is  checked, and only if no user section is found the primary group section is looked for,
       and only if no group section is found, the DEFAULT section is looked for. If no section is found,  jk_lsh
       aborts.

       The  <b>executables</b>  entry  specifies all executables that jk_lsh will execute. The <b>paths</b> entry specifies in
       which directories jk_lsh will look for these executables if no path is specified.  The  PATH  environment
       variable  is  ignored by jk_lsh. The <b>allow_word_expansion</b> if set to 1, will make jk_lsh do word expansion
       (*, ?, ~, $) using <b><a href="../man3/wordexp.3.html">wordexp</a>(3)</b> which is very useful for remote commands like <u>rsync</u> <u>server:./*</u>  <u>.</u>   or  <u>scp</u>
       <u>server:somedir/*</u> <u><a href="file:/tmp/">/tmp/</a></u> <b>umask</b> if you want a specific umask

       The  common  way  to  use  jk_lsh  is  to  use  it  as default shell for those restricted accounts. It is
       recommended to run these accounts inside a changed root using <b><a href="../man8/jk_chrootsh.8.html">jk_chrootsh</a>(8)</b>

</pre><h4><b>FILES</b></h4><pre>
       <u>/etc/jailkit/jk_lsh.ini</u> <u><a href="file:/etc/passwd">/etc/passwd</a></u> <u>JAIL/etc/jailkit/jk_lsh.ini</u> <u>JAIL/etc/passwd</u>

</pre><h4><b>DIAGNOSTICS</b></h4><pre>
       jk_lsh logs errors to syslog, so check your log files. If you run jk_lsh inside a changed root, you  have
       to have a /dev/log in that changed root. See <b><a href="../man8/jk_socketd.8.html">jk_socketd</a>(8)</b> for more information how to do this.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man8/jailkit.8.html">jailkit</a>(8)</b>  <b><a href="../man8/jk_check.8.html">jk_check</a>(8)</b>  <b><a href="../man8/jk_chrootlaunch.8.html">jk_chrootlaunch</a>(8)</b>  <b><a href="../man8/jk_chrootsh.8.html">jk_chrootsh</a>(8)</b>  <b><a href="../man8/jk_cp.8.html">jk_cp</a>(8)</b> <b><a href="../man8/jk_init.8.html">jk_init</a>(8)</b> <b><a href="../man8/jk_jailuser.8.html">jk_jailuser</a>(8)</b> <b><a href="../man8/jk_lsh.8.html">jk_lsh</a>(8)</b>
       <b><a href="../man8/jk_procmailwrapper.8.html">jk_procmailwrapper</a>(8)</b> <b><a href="../man8/jk_socketd.8.html">jk_socketd</a>(8)</b> <b><a href="../man8/jk_uchroot.8.html">jk_uchroot</a>(8)</b> <b><a href="../man8/jk_update.8.html">jk_update</a>(8)</b> <b><a href="../man2/chroot.2.html">chroot</a>(2)</b>

</pre><h4><b>COPYRIGHT</b></h4><pre>
       Copyright (C) 2003, 2004, 2005, 2006, 2007, 2008, 2009, 2010 Olivier Sessink

       Copying and distribution of this file, with or without modification, are permitted in any medium  without
       royalty provided the copyright notice and this notice are preserved.

JAILKIT                                            07-02-2010                                          <u><a href="../man8/jk_lsh.8.html">jk_lsh</a></u>(8)
</pre>
 </div>
</div></section>
</div>
</body>
</html>