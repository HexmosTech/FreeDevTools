<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>wpa_action - wpa_cli action script</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/wpasupplicant">wpasupplicant_2.10-24_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       wpa_action - wpa_cli action script

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>wpa_action</b> <u>IFACE</u> <u>ACTION</u>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>wpa_action</b>  is  a  shell  script  designed  to  control the <b>ifupdown</b> framework according to <u>ACTION</u> events
       received from <b>wpa_supplicant</b>.  <b>wpa_cli</b> receives <u>CONNECTED</u> and <u>DISCONNECTED</u> events from <b>wpa_supplicant</b> via
       the crtl_iface socket and gives the <u>ACTION</u> event to the <b>wpa_action</b> script as an argument, along with  the
       <u>IFACE</u> to be acted upon.

       <b>wpa_action</b>  also  receives  an  environment variable from <b>wpa_cli</b>, <u>WPA_ID_STR</u>, containing an alphanumeric
       identification string for the <u>CURRENT</u> network block. <u>WPA_ID_STR</u> is provided by the 'id_str' network block
       option of <b>wpa_supplicant.conf</b>, and provides a means to map the <u>ACTION</u> to a <u>LOGICAL</u>  interface  configured
       in the <b>interfaces</b> file.

       If  either the ifupdown <b>interfaces</b> or <u>ifstate</u> file cannot be found, <b>wpa_action</b> will exit silently (status
       0). <b>wpa_action</b> will search the following locations for their existence:
            /etc/network/run/ifstate
            /run/network/ifstate
            /etc/network/interfaces

</pre><h4><b>IFACE</b></h4><pre>
       Network interface to be acted upon, for example 'eth1' or 'wlan0'.

</pre><h4><b>ACTION</b></h4><pre>
       An <u>ACTION</u> to be performed on the <u>IFACE</u>.

       <b>CONNECTED</b>
              <b>wpa_supplicant</b> has completed authentication.  <b>ifup</b> <u>IFACE=WPA_ID_STR</u> is invoked and the  action  is
              logged to syslog. Network settings for the <u>LOGICAL</u> interface <u>WPA_ID_STR</u> are applied.

       <b>DISCONNECTED</b>
              <b>wpa_supplicant</b>  has  detected disconnection.  <b>ifdown</b> <u>IFACE=WPA_ID_STR</u> is invoked and the action is
              logged to syslog. Network settings for the <u>LOGICAL</u> interface <u>WPA_ID_STR</u> are undone.

       <b>stop</b>   The 'stop' <u>ACTION</u> is a called manually by the user, to stop  the  <b>wpa_cli</b>  daemon,  invoke  <b>ifdown</b>
              <u>IFACE</u> (if the <u>IFACE</u> is present in the <u>ifstate</u> file) and stop the <b>wpa_supplicant</b> daemon.

       <b>reload</b> The  'reload' <u>ACTION</u> can be used to reload the <b>wpa_supplicant</b> configuration file specified by <u>wpa-</u>
              <u>roam</u> . 'restart' is a synonym for 'reload' and can be  used  equally.  The  action  is  logged  to
              <u>/var/log/wpa_action.log</u>.

</pre><h4><b>ENVIRONMENT</b></h4><pre>
       An   alphanumeric   identification   string   provided   by   the   'id_str'   network  block  option  of
       <b>wpa_supplicant.conf</b> is exported to <b>wpa_action</b> as an environment variable, <u>WPA_ID_STR</u>.  When  'id_str'  is
       not  configured  for  the  <u>CURRENT</u>  network  block,  'default'  is  substituted for the absent <u>WPA_ID_STR</u>
       environment variable.

       A unique network identifier, <u>WPA_ID</u>, is exported to <b>wpa_action</b>. It is the number assigned to the  <u>CURRENT</u>
       <b>wpa_supplicant</b> network block (network_id).

</pre><h4><b>USAGE</b></h4><pre>
       The only reasons for <b>wpa_action</b> to be explicitly executed by the user is to stop <b>wpa_cli</b> from controlling
       <b>ifupdown</b> or reload the <u>wpa_supplicant.conf</u> file after editing.

              <b>wpa_action</b> <u>eth1</u> <u>stop</u>

       Otherwise, <b>wpa_action</b> is given as an argument to a <b>wpa_cli</b> daemon.

              <b>wpa_cli</b> <u>-i</u> <u>eth1</u> <u>-a</u> <u>/usr/sbin/wpa_action</u> <u>-B</u>

       This can be done by using the <u>wpa-roam</u> option in the <b>interfaces</b> file. <u>wpa-roam</u> takes one argument, a user
       provided <b>wpa_supplicant.conf</b> file.

       The inet <u>METHOD</u> must be 'manual' for this interface, as it will be configured according to <b>wpa_cli</b> action
       events.  Also supply a 'default' <b>interfaces</b> stanza using the dhcp inet <u>METHOD</u> so that networks without an
       'id_str' option can fallback to attempting to receive an ip via dhcp. If one or  more  networks  requires
       additional  network  configuration, provide an unique 'id_str' for each network, and an <b>interfaces</b> stanza
       using the 'id_str' value as a <u>LOGICAL</u> interface. The following interfaces file is configured to use  dhcp
       for  any  network  without an 'id_str', a static ip for the network with an 'id_str' of 'home_static' and
       dhcp plus an additional post-up command for the network with an 'id_str' of 'uni'.

       An example wpa_supplicant.conf configured to roam between 3 different networks:

              network={
                   ssid="foo"
                   id_str="uni"
                   key_mgmt=NONE
              }

              network={
                   ssid="bar"
                   id_str="home_static"
                   psk=123456789...
              }

              network={
                   ssid=""
                   key_mgmt=NONE
              }

       The corresponding <b>interfaces</b> file would  contain  <u>LOGICAL</u>  interfaces,  that  correlate  to  each  unique
       'id_str' provided by the configuration file:

              iface eth1 inet manual
                   wpa-driver wext
                   wpa-roam /etc/wpa_supplicant/wpa_supplicant.conf

              iface default inet dhcp

              iface uni inet dhcp

              iface home_static inet static
                      address 192.168.0.20
                      netmask 255.255.255.0
                      network 192.168.0.0
                      broadcast 192.168.0.255
                      gateway 192.168.0.1

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man8/wpa_cli.8.html">wpa_cli</a>(8)</b>, <b><a href="../man8/wpa_supplicant.8.html">wpa_supplicant</a>(8)</b>, <b><a href="../man5/wpa_supplicant.conf.5.html">wpa_supplicant.conf</a>(5)</b>, <b><a href="../man8/ifup.8.html">ifup</a>(8)</b>, <b><a href="../man5/interfaces.5.html">interfaces</a>(5)</b>

</pre><h4><b>AUTHOR</b></h4><pre>
       This manual page was written by Kel Modderman &lt;<a href="mailto:kel@otaku42.de">kel@otaku42.de</a>&gt; for the Debian GNU system (but may be used
       by others).

                                                   26 May 2006                                     <u><a href="../man8/WPA_ACTION.8.html">WPA_ACTION</a></u>(8)
</pre>
 </div>
</div></section>
</div>
</body>
</html>