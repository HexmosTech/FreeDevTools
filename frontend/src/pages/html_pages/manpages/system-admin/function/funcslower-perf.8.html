<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>funcslower - trace kernel functions slower than a threshold (microseconds). Uses Linux ftrace.</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/perf-tools-unstable">perf-tools-unstable_1.0.1~20200130+git49b8cdf-1ubuntu1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       funcslower - trace kernel functions slower than a threshold (microseconds). Uses Linux ftrace.

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>funcslower</b> [-aChHPt] [-p PID] [-L TID] [-d secs] funcstring latency_us

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This  uses  the  Linux ftrace function graph profiler to time kernel functions and filter them based on a
       latency threshold. Latency outliers can be studied this way, confirming  their  presence,  duration,  and
       rate. This tool is a proof of concept using Linux ftrace capabilities on older kernels.

       The  output  format  is  based  on the ftrace function graph trace format, described in the kernel source
       under Documentation/trace/ftrace.txt. Use the -H option to print column headings.  Note that  the  output
       may  be  shuffled  when  different  CPU  buffers  are  read; check the CPU column for changes, or include
       timestamps (-t) and post sort.

       WARNING: This uses dynamic tracing of kernel functions, and could cause kernel panics or  freezes.  Test,
       and know what you are doing, before use.

       Since this uses ftrace, only the root user can use this tool.

</pre><h4><b>REQUIREMENTS</b></h4><pre>
       FTRACE function graph, which you may already have enabled and available on recent kernels. And awk.

</pre><h4><b>OPTIONS</b></h4><pre>
       -a     All info. Same as -HPt.

       -C     Function durations measure on-CPU time only (exclude sleep time).

       -d seconds
              Set  the  duration  of  tracing, in seconds. Trace output will be buffered and printed at the end.
              This also reduces overheads by buffering in-kernel, instead of printing events as they occur.

              The ftrace buffer has a fixed size per-CPU (see /sys/kernel/debug/tracing/buffer_size_kb). If  you
              think events are missing, try increasing that size.

       -h     Print usage message.

       -H     Print column headers.

       -p PID Only trace kernel functions when this process ID is on-CPU.

       -L TID Only trace kernel functions when this thread ID is on-CPU.

       -P     Show process names and process IDs with every line of output.

       -t     Show timestamps on every line of output.

       funcstring
              A  function  name  to trace, which may include file glob style wildcards ("*") at the beginning or
              ending of a string only. Eg, "vfs*" means match "vfs" followed by anything. Since  the  output  is
              verbose, you probably only want to trace single functions, and not use wildcards.

       latency_us
              Minimum function duration to trace, in units of microseconds. This is filtered in-kernel.

</pre><h4><b>EXAMPLES</b></h4><pre>
       Trace calls to vfs_read(), showing events slower than 10 ms:
              # <b>funcslower</b> <b>vfs_read</b> <b>10000</b>

       Same as above, but include column headers, event timestamps, and process names:
              # <b>funcslower</b> <b>-HPt</b> <b>vfs_read</b> <b>10000</b>

       Trace slow vfs_read()s for PID 198 only:
              # <b>funcslower</b> <b>-p</b> <b>198</b> <b>vfs_read</b> <b>10000</b>

</pre><h4><b>FIELDS</b></h4><pre>
       The  output format depends on the kernel version, and headings can be printed using -H. The format is the
       same   as   the   ftrace   function   trace   format,   described   in   the    kernel    source    under
       Documentation/trace/ftrace.txt.

       Typical fields are:

       TIME   (Shown with -t.) Time of event, in seconds.

       CPU    The CPU this event occurred on.

       TASK/PID
              (Shown with -P.) The process name (which could include dashes), a dash, and the process ID.

       DURATION
              Elapsed  time  during  the  function  call, inclusive of children. This is also inclusive of sleep
              time, unless -C is used.

       FUNCTION CALLS
              Kernel function returns.

</pre><h4><b>OVERHEAD</b></h4><pre>
       OVERHEADS: Timing and filtering is performed  in-kernel  context,  costing  lower  overheads  than  post-
       processing  in user space. If you trace frequent events (eg, pick a common function and a low threshold),
       you might want to try the "-d secs" option, which buffers events in-kernel instead of printing them live.

       It's a good idea to start with a high threshold (eg, "100000" for 100 ms) then to  decrease  it.  If  you
       start low instead, you may start printing too many events.

</pre><h4><b>SOURCE</b></h4><pre>
       This is from the perf-tools collection:

              https://github.com/brendangregg/perf-tools

       Also  look  under the examples directory for a text file containing example usage, output, and commentary
       for this tool.

</pre><h4><b>OS</b></h4><pre>
       Linux

</pre><h4><b>STABILITY</b></h4><pre>
       Unstable - in development.

</pre><h4><b>AUTHOR</b></h4><pre>
       Brendan Gregg

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <a href="../man8/funccount.8.html">funccount</a>(8), <a href="../man8/functrace.8.html">functrace</a>(8), <a href="../man8/funcgraph.8.html">funcgraph</a>(8), <a href="../man8/kprobe.8.html">kprobe</a>(8)

USER COMMANDS                                      2014-07-30                                      <u><a href="../man8/funcslower.8.html">funcslower</a></u>(8)
</pre>
 </div>
</div></section>
</div>
</body>
</html>