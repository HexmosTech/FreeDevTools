<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>funcslower - Trace slow kernel or user function calls.</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/bpfcc-tools">bpfcc-tools_0.31.0+ds-7ubuntu2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       funcslower - Trace slow kernel or user function calls.

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>funcslower</b>  <b>[-hf]</b>  <b>[-p</b>  <b>PID]</b>  <b>[-U</b>  <b>|</b>  <b>-K]</b>  <b>[-m</b> <b>MIN_MS]</b> <b>[-u</b> <b>MIN_US]</b> <b>[-a</b> <b>ARGUMENTS]</b> <b>[-T]</b> <b>[-t]</b> <b>[-v]</b> <b>function</b>
       <b>[function</b> <b>...]</b>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This script traces a kernel or user function's entry and return points, and prints  a  message  when  the
       function's  latency  exceeded the specified threshold.  Multiple functions are supported, and you can mix
       kernel functions with user functions in different libraries.

       WARNING: See the OVERHEAD section.

       By default, a minimum millisecond threshold of 1 is used. Recursive functions are not supported: only the
       inner-most recursive invocation will be traced.

       Since this uses BPF, only the root user can use this tool.

</pre><h4><b>REQUIREMENTS</b></h4><pre>
       CONFIG_BPF and bcc.

</pre><h4><b>OPTIONS</b></h4><pre>
       -p PID Trace this PID only.

       -m MIN_NS
              Minimum duration to trace, in milliseconds. Default is 1 ms.

       -u MIN_US
              Minimum duration to trace, in microseconds.

       -a ARGUMENTS
              Print the function's arguments, up to 6.

       -T     Print a HH:MM:SS timestamp with each entry.

       -t     Print a seconds timestamp with each entry, at microsecond resolution.

       -f     Print output in folded stack format.

       -U     Show stacks from user space only (no kernel space stacks).

       -K     Show stacks from kernel space only (no user space stacks).

       -v     Print the resulting BPF program, for debugging purposes.

       function
              The function to trace -- multiple functions are supported. If a plain function name  is  provided,
              the  function is assumed to be a kernel function. For user functions, provide the library name and
              the function name, e.g. bash:readline or c:malloc.

</pre><h4><b>EXAMPLES</b></h4><pre>
       Trace vfs_write calls slower than 1ms:
              # <b>funcslower</b> <b>vfs_write</b>

       Trace open() calls in libc slower than 10us:
              # <b>funcslower</b> <b>-u</b> <b>10</b> <b>c:open</b>

       Trace both malloc() and free() slower than 10us, in pid 135 only:
              # <b>funcslower</b> <b>-p</b> <b>135</b> <b>-u</b> <b>10</b> <b>c:malloc</b> <b>c:free</b>

       Trace the write syscall and print its first 4 arguments:
              # <b>funcslower</b> <b>-a</b> <b>4</b> <b>SyS_write</b>

       Trace opens from libc and print the user and kernel stack frames:
              # <b>funcslower</b> <b>-UK</b> <b>c:open</b>

</pre><h4><b>FIELDS</b></h4><pre>
       TIME   Time of the event as a human-readable HH:MM:SS format, or a timestamp in seconds  at  microsecond-
              accuracy from the first event seen.

       COMM   Process name.

       PID    Process ID.

       LAT    Latency of the operation in either microseconds (us) or milliseconds (ms).

       RVAL   The  return  value  from the function. Often useful for diagnosing a relationship between slow and
              failed function calls.

       FUNC   The function name, followed by its arguments if requested.

</pre><h4><b>OVERHEAD</b></h4><pre>
       Depending on the function(s) being traced, overhead can become severe.  For  example,  tracing  a  common
       function like malloc() can slow down a C/C++ program by a factor of 2 or more. On the other hand, tracing
       a  low-frequency  event like the SyS_setreuid() function will probably not be as prohibitive, and in fact
       negligible for functions that are called up to 100-1000 times per second.

       You should first use the funclatency and argdist tools for investigation, because they summarize data in-
       kernel and have a much lower overhead than this tool. To get a general idea of  the  number  of  times  a
       particular function is called (and estimate the overhead), use the funccount tool, e.g.:

       # funccount c:open

</pre><h4><b>SOURCE</b></h4><pre>
       This is from bcc.

              https://github.com/iovisor/bcc

       Also  look  in  the bcc distribution for a companion _examples.txt file containing example usage, output,
       and commentary for this tool.

</pre><h4><b>OS</b></h4><pre>
       Linux

</pre><h4><b>STABILITY</b></h4><pre>
       Unstable - in development.

</pre><h4><b>AUTHOR</b></h4><pre>
       Sasha Goldshtein

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <a href="../man8/funccount.8.html">funccount</a>(8), <a href="../man8/funclatency.8.html">funclatency</a>(8), <a href="../man8/argdist.8.html">argdist</a>(8), <a href="../man8/trace.8.html">trace</a>(8)

USER COMMANDS                                      2017-03-30                                      <u><a href="../man8/funcslower.8.html">funcslower</a></u>(8)
</pre>
 </div>
</div></section>
</div>
</body>
</html>