<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>smp_phy_control - invoke PHY CONTROL SMP function</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/smp-utils">smp-utils_0.99-1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       smp_phy_control - invoke PHY CONTROL SMP function

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>smp_phy_control</b>   [<u>--attached=ADN</u>]   [<u>--expected=EX</u>]  [<u>--help</u>]  [<u>--hex</u>]  [<u>--interface=PARAMS</u>]  [<u>--max=MA</u>]
       [<u>--min=MI</u>]  [<u>--op=OP</u>]  [<u>--phy=ID</u>]  [<u>--pptv=TI</u>]  [<u>--pwrdis=PDC</u>]  [<u>--raw</u>]   [<u>--sa=SAS_ADDR</u>]   [<u>--sas_pa=CO</u>]
       [<u>--sas_sl=CO</u>] [<u>--sata_pa=CO</u>] [<u>--sata_sl=CO</u>] [<u>--verbose</u>] [<u>--version</u>] <u>SMP_DEVICE[,N]</u>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       Sends  a  SAS  Serial  Management  Protocol  (SMP) PHY CONTROL function request to an SMP target. The SMP
       target is identified by the <u>SMP_DEVICE</u> and the <u>SAS_ADDR</u>. Depending on the interface, the <u>SAS_ADDR</u> may  be
       deduced  from  the <u>SMP_DEVICE</u>. The mpt interface uses <u>SMP_DEVICE</u> to identify a HBA (an SMP initiator) and
       needs the additional <u>,N</u> to differentiate between HBAs if there are multiple present.

       The PHY CONTROL function is used to change the state of a phy within  an  SMP  target.  SMP  targets  are
       typically  SAS  expanders which have multiple phys.  Certain operation values (e.g. 'lr' (link reset) and
       'hr' (hard reset)) change the state of the attached phy. Sending such operation values to the phy in  the
       SMP target that is attached to the originator (i.e. the SMP initiator) may lead to a bad response.

       Invoking  this utility with no arguments (other than <u>SMP_DEVICE</u> which might be in an environment variable
       and <u>--sa=SAS_ADDR</u> which might be in an environment variable or not needed) is harmless. In other words  a
       phy's  state  is  only  changed  when either <u>--max=MA</u>, <u>--min=MI</u>, <u>--op=OP</u> or <u>--pptv=TI</u> is given with a non
       default value.

</pre><h4><b>OPTIONS</b></h4><pre>
       Mandatory arguments to long options are mandatory for short options as well.

       <b>-a</b>, <b>--attached</b>=<u>ADN</u>
              specifies the attached device name (<u>ADN</u>). The default value is 0 .  The <u>ADN</u> is in decimal  but  is
              likely  to  be  a  SAS  address  which  is  typically shown in hexadecimal. To specify a number in
              hexadecimal either prefix it with '0x' or put a trailing 'h' on it. This option is ignored by  the
              expander unless the '--op=sadn' option is also given.

       <b>-E</b>, <b>--expected</b>=<u>EX</u>
              set  the  'expected  expander  change  count' field in the SMP request.  The value <u>EX</u> is from 0 to
              65535 inclusive with 0 being the default value. When <u>EX</u> is greater than zero  then  if  the  value
              doesn't  match  the  expander  change count of the SMP target (i.e. the expander) when the request
              arrives then the target ignores the request and sets a function result of "invalid expander change
              count" in the response.

       <b>-h</b>, <b>--help</b>
              output the usage message then exit.

       <b>-H</b>, <b>--hex</b>
              output the response (less the CRC field) in hexadecimal.

       <b>-I</b>, <b>--interface</b>=<u>PARAMS</u>
              interface specific parameters. In this case "interface" refers to the path through  the  operating
              system to the SMP initiator. See the smp_utils man page for more information.

       <b>-M</b>, <b>--max</b>=<u>MA</u>
              permits  the programmed maximum physical link rate to be changed on the gven phy. Permitted values
              are:
                <b>0</b>  : no change
                <b>8</b>  : 1.5 Gbps
                <b>9</b>  : 3 Gbps
                <b>10</b> : 6 Gbps
                <b>11</b> : 12 Gbps
                <b>12</b> : 22.5 Gbps
              Default value is 0.

       <b>-m</b>, <b>--min</b>=<u>MI</u>
              permits the programmed minimum physical link rate to be changed on the given phy. Permitted values
              are:
                <b>0</b>  : no change
                <b>8</b>  : 1.5 Gbps
                <b>9</b>  : 3 Gbps
                <b>10</b> : 6 Gbps
                <b>11</b> : 12 Gbps
                <b>12</b> : 22.5 Gbps
              Default value is 0.

       <b>-o</b>, <b>--op</b>=<u>OP</u>
              specifies the operation to be performed on the given phy. The <u>OP</u> argument can be either numeric or
              a string. If a number is given, it is put into the 'phy operation' field of the request. Allowable
              strings are abbreviations of which only the first two characters need to match. Each line  in  the
              following list contains a numeric value, a string and then a brief explanation:
                <b>0</b> : <b>nop</b>  : no operation
                <b>1</b> : <b>lr</b>   : link reset
                <b>2</b> : <b>hr</b>   : hard reset
                <b>3</b> : <b>dis</b>  : disable phy
                <b>5</b> : <b>cel</b>  : clear error log
                <b>6</b> : <b>ca</b>   : clear affiliation
                <b>7</b> : <b>tspss</b>: transmit SATA port selection signal
                <b>8</b> : <b>citnl</b>: clear STP I_T nexus loss (bit)
                <b>9</b> : <b>sadn</b> : set attached device name
              The default value is 0 (no operation).

       <b>-p</b>, <b>--phy</b>=<u>ID</u>
              phy identifier. <u>ID</u> is a value between 0 and 254. Default is 0.

       <b>-P</b>, <b>--pptv</b>=<u>TI</u>
              partial  pathway  timeout value. The units are microseconds and the permitted values are between 0
              and 15 inclusive. 7 microseconds is recommended by sas2r07.

       <b>-D</b>, <b>--pwrdis</b>=<u>PDC</u>
              where <u>PDC</u> is the power disable control value. The default value is 0 which means  no  change.  The
              value  of  1  is  reserved;  2, if supported, instructs the management device server to negate the
              POWER DISABLE signal; while 3, if supported, instructs it to assert that signal. This  applies  to
              the phy given by <u>ID</u> (which defaults to 0).

       <b>-r</b>, <b>--raw</b>
              send the response (less the CRC field) to stdout in binary. All error messages are sent to stderr.

       <b>-s</b>, <b>--sa</b>=<u>SAS_ADDR</u>
              specifies the SAS address of the SMP target device. Typically this is an expander. This option may
              not be needed if the <u>SMP_DEVICE</u> has the target's SAS address within it. The <u>SAS_ADDR</u> is in decimal
              but  most SAS addresses are shown in hexadecimal. To give a number in hexadecimal either prefix it
              with '0x' or put a trailing 'h' on it.

       <b>-q</b>, <b>--sas_pa</b>=<u>CO</u>
              set the Enable SAS Partial field to <u>CO</u> which is two bits wide.  The defined values for  <u>CO</u>  are  0
              for  no  change;  1  for  manage  partial  phy  power  conditions; 2 for disable partial phy power
              conditions.

       <b>-l</b>, <b>--sas_sl</b>=<u>CO</u>
              set the Enable SAS Slumber field to <u>CO</u> which is two bits wide.  The defined values for  <u>CO</u>  are  0
              for  no  change;  1  for  manage  slumber  phy  power  conditions; 2 for disable slumber phy power
              conditions.

       <b>-Q</b>, <b>--sata_pa</b>=<u>CO</u>
              set the Enable SATA Partial field to <u>CO</u> which is two bits wide.  The defined values for <u>CO</u>  are  0
              for  no  change;  1  for  manage  partial  phy  power  conditions; 2 for disable partial phy power
              conditions.

       <b>-L</b>, <b>--sata_sl</b>=<u>CO</u>
              set the Enable SATA Slumber field to <u>CO</u> which is two bits wide.  The defined values for <u>CO</u>  are  0
              for  no  change;  1  for  manage  slumber  phy  power  conditions; 2 for disable slumber phy power
              conditions.

       <b>-v</b>, <b>--verbose</b>
              increase the verbosity of the output. Can be used multiple times

       <b>-V</b>, <b>--version</b>
              print the version string and then exit.

</pre><h4><b>NOTES</b></h4><pre>
       Once an expander phy has been disabled with <u>--op=dis</u> then it can be later re-enabled with a link reset or
       hard reset (e.g. <u>--op=lr</u>).

</pre><h4><b>EXAMPLES</b></h4><pre>
       See "Examples" section in <a href="http://sg.danny.cz/sg/smp_utils.html">http://sg.danny.cz/sg/smp_utils.html</a>

</pre><h4><b>CONFORMING</b> <b>TO</b></h4><pre>
       The SMP PHY CONTROL function was introduced in SAS-1 .

</pre><h4><b>AUTHORS</b></h4><pre>
       Written by Douglas Gilbert.

</pre><h4><b>REPORTING</b> <b>BUGS</b></h4><pre>
       Report bugs to &lt;dgilbert at interlog dot com&gt;.

</pre><h4><b>COPYRIGHT</b></h4><pre>
       Copyright Â© 2006-2015 Douglas Gilbert
       This software is distributed under a FreeBSD license. There is NO warranty; not even for  MERCHANTABILITY
       or FITNESS FOR A PARTICULAR PURPOSE.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b>smp_utils,</b> <b>smp_discover(smp_utils)</b>

smp_utils-0.99                                    November 2015                               <u><a href="../man8/SMP_PHY_CONTROL.8.html">SMP_PHY_CONTROL</a></u>(8)
</pre>
 </div>
</div></section>
</div>
</body>
</html>