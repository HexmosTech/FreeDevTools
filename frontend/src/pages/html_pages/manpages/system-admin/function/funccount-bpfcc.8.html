<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>funccount - Count function, tracepoint, and USDT probe calls matching a pattern. Uses Linux eBPF/bcc.</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/bpfcc-tools">bpfcc-tools_0.31.0+ds-7ubuntu2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       funccount - Count function, tracepoint, and USDT probe calls matching a pattern. Uses Linux eBPF/bcc.

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>funccount</b> <b>[-h]</b> <b>[-p</b> <b>PID]</b> <b>[-i</b> <b>INTERVAL]</b> <b>[-d</b> <b>DURATION]</b> <b>[-T]</b> <b>[-r]</b> <b>[-c</b> <b>CPU]</b> <b>[-D]</b> <b>pattern</b>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This  tool  is  a  quick way to determine which functions are being called, and at what rate. It uses in-
       kernel eBPF maps to count function calls.

       WARNING: This uses dynamic tracing of (what can be many) functions, an activity that has  had  issues  on
       some kernel versions (risk of panics or freezes). Test, and know what you are doing, before use.

       Since this uses BPF, only the root user can use this tool.

</pre><h4><b>REQUIREMENTS</b></h4><pre>
       CONFIG_BPF and bcc.

</pre><h4><b>OPTIONS</b></h4><pre>
       pattern  Search  pattern.  Supports  "*"  wildcards.  See  EXAMPLES.  You  can  also  use  -r for regular
       expressions.

       -h     Print usage message.

       -p PID Trace this process ID only.

       -i INTERVAL
              Print output every interval seconds.

       -d DURATION
              Total duration of trace in seconds.

       -T     Include timestamps on output.

       -r     Use regular expressions for the search pattern.

       -D     Print the BPF program before starting (for debugging purposes).

       -c CPU Trace on this CPU only.

</pre><h4><b>EXAMPLES</b></h4><pre>
       Count kernel functions beginning with "vfs_", until Ctrl-C is hit:
              # <b>funccount</b> <b>'vfs_*'</b>

       Count kernel functions beginning with "tcp_send", until Ctrl-C is hit:
              # <b>funccount</b> <b>'tcp_send*'</b>

       Print kernel functions beginning with "vfs_", every second:
              # <b>funccount</b> <b>-i</b> <b>1</b> <b>'vfs_*'</b>

       Print kernel functions beginning with "vfs_", for ten seconds only:
              # <b>funccount</b> <b>-d</b> <b>10</b> <b>'vfs_*'</b>

       Match kernel functions beginning with "vfs_", using regular expressions:
              # <b>funccount</b> <b>-r</b> <b>'^vfs_.*'</b>

       Count vfs calls for process ID 181 only:
              # <b>funccount</b> <b>-p</b> <b>181</b> <b>'vfs_*'</b>

       Count calls to the sched_fork tracepoint, indicating a fork() performed:
              # <b>funccount</b> <b>t:sched:sched_fork</b>

       Count all GC USDT probes in the Node process:
              # <b>funccount</b> <b>-p</b> <b>185</b> <b>u:node:gc*</b>

       Count all malloc() calls in libc:
              # <b>funccount</b> <b>c:malloc</b>

       Count kernel functions beginning with "vfs_" on CPU 1 only:
              # <b>funccount</b> <b>-c</b> <b>1</b> <b>'vfs_*'</b>

</pre><h4><b>FIELDS</b></h4><pre>
       FUNC   Function name

       COUNT  Number of calls while tracing

</pre><h4><b>OVERHEAD</b></h4><pre>
       This traces functions and maintains in-kernel counts, which  are  asynchronously  copied  to  user-space.
       While the rate of calls be very high (&gt;1M/sec), this is a relatively efficient way to trace these events,
       and  so  the overhead is expected to be small for normal workloads.  Measure in a test environment before
       use.

</pre><h4><b>SOURCE</b></h4><pre>
       This is from bcc.

              https://github.com/iovisor/bcc

       Also look in the bcc distribution for a companion _examples.txt file containing  example  usage,  output,
       and commentary for this tool.

</pre><h4><b>OS</b></h4><pre>
       Linux

</pre><h4><b>STABILITY</b></h4><pre>
       Unstable - in development.

</pre><h4><b>AUTHOR</b></h4><pre>
       Brendan Gregg, Sasha Goldshtein

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <a href="../man8/stackcount.8.html">stackcount</a>(8) <a href="../man8/funclatency.8.html">funclatency</a>(8) <a href="../man8/vfscount.8.html">vfscount</a>(8)

USER COMMANDS                                      2015-08-18                                       <u><a href="../man8/funccount.8.html">funccount</a></u>(8)
</pre>
 </div>
</div></section>
</div>
</body>
</html>