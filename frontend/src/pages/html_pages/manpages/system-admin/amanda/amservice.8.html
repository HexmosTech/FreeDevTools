<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>amservice - run an amanda service on a client</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/amanda-common">amanda-common_3.5.4-2_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       amservice - run an amanda service on a client

</pre><h4><b>SYNOPSIS</b></h4><pre>

       <b>amservice</b> [-f <u>input_file</u> [-s]] [--config <u>CONFIG</u>] [--features <u>FEATURES-STRING</u>] [--stream <u>NAME,IN,OUT</u>]*
                      [<b>-o</b> <u>configoption</u>...] <u>hostname</u> <u>auth</u> <u>service</u>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>Amservice</b> execute an Amanda service on a client. It can be used without amanda server configuration
       (amanda.conf and disklist). It can be used to check communication between a server and a client.
       Amservice reads stdin to capture the REQ packet to send to the client.

       See the <b><a href="../man8/amanda.8.html">amanda</a></b>(8) man page for more details about Amanda.

</pre><h4><b>OPTIONS</b></h4><pre>
       <b>hostname</b>
           The hostname of the client.

       <b>auth</b>
           The auth to use, one of: bsd, bsdudp, bsdtcp, ssh, rsh or krb5. The client must be configured with
           this auth.

       <b>service</b>
           The amanda service to execute on the client. One of noop, selfcheck or sendsize.

       <b>-f</b> <b>input_file</b>
           Use the file input_file instead of stdin to read the REQ packet from.

       <b>-s</b>
           Redirect the first connected stream to stdin/stdout. The -f argument is required for the REQ packet,
           the REP packet is not printed on stdout.

       <b>--config</b>
           The amanda configuration.

       <b>--features</b> <u>FEATURES-STRING</u>
           The features of the remote client.

       <b>--stream</b> <u>NAME,IN,OUT</u>
           The vstream to open, their name and the two file descriptors.

       <b>-o</b> <u>configoption</u>
           See the "CONFIGURATION OVERRIDE" section in <b><a href="../man8/amanda.8.html">amanda</a></b>(8).

</pre><h4><b>EXAMPLE</b></h4><pre>
       The noop service is easy to execute because it does not require a REQ packet:
       amservice hostname bsdtcp noop &lt; /dev/null

       The example executes the noop service on the client using bsdtcp auth. This is useful for debugging
       connection problems. It print an OPTIONS line upon success.

       It is more difficult to execute the selfcheck or sendsize service, as these require a valid REQ packet.
       If you have already uccessfully run amanda, you can find valid REQ packets in the amandad.*.debug files.

</pre><h4><b>EXIT</b> <b>CODE</b></h4><pre>
       The exit code of <b>amservice</b> is one of:
        0  = success
        1  = error executing amandad on the client.

       As <b>amservice</b> doesn't parse the REP packet, it can only detect failures in executing amandad on the
       client.  <b>amservice</b> can exit with value 0 even if the user is not authorized to execute the service. An
       error message will be printed.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man8/amanda.8.html">amanda</a></b>(8), <b><a href="../man8/amanda.8.html">amanda</a></b>(8), <b><a href="../man8/amcheck.8.html">amcheck</a></b>(8), <b><a href="../man8/amdump.8.html">amdump</a></b>(8), <b><a href="../man8/amadmin.8.html">amadmin</a></b>(8)

       The Amanda Wiki: : <a href="http://wiki.zmanda.com/">http://wiki.zmanda.com/</a>

</pre><h4><b>AUTHOR</b></h4><pre>
       <b>Jean-Louis</b> <b>Martineau</b> &lt;<a href="mailto:martineau@zmanda.com">martineau@zmanda.com</a>&gt;
           Zmanda, Inc. (<a href="http://www.zmanda.com">http://www.zmanda.com</a>)

Amanda 3.5.4                                       01/25/2025                                       <u><a href="../man8/AMSERVICE.8.html">AMSERVICE</a></u>(8)
</pre>
 </div>
</div></section>
</div>
</body>
</html>