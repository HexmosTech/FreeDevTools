<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>vfs_ceph_snapshots - Expose CephFS snapshots as shadow-copies</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/samba-vfs-ceph">samba-vfs-ceph_4.22.3+dfsg-4ubuntu1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       vfs_ceph_snapshots - Expose CephFS snapshots as shadow-copies

</pre><h4><b>SYNOPSIS</b></h4><pre>

       vfs objects = ceph_snapshots

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This VFS module is part of the <b><a href="../man8/samba.8.html">samba</a></b>(8) suite.

       The vfs_ceph_snapshots VFS module exposes CephFS snapshots for use by Samba. When enabled, SMB clients
       such as Windows Explorer's Previous Versions dialog, can enumerate snapshots and access them via
       "timewarp" tokens.

       This module can be combined with vfs_ceph, but vfs_ceph_snapshots must be listed first in the vfs objects
       parameter list.

       CephFS support for ceph.snap.btime virtual extended attributes is required for this module to work
       properly. This support was added via https://tracker.ceph.com/issues/38838.

</pre><h4><b>CONFIGURATION</b></h4><pre>
       When used atop vfs_ceph, path refers to an absolute path within the Ceph filesystem and should not be
       mounted locally:

                     <u>[share]</u>
                     <b>vfs</b> <b>objects</b> <b>=</b> <b>ceph_snapshots</b> <b>ceph</b>
                     <b>path</b> <b>=</b> <b>/non-mounted/cephfs/path</b>
                     <b>kernel</b> <b>share</b> <b>modes</b> <b>=</b> <b>no</b>

       vfs_ceph_snapshots can also be used atop a kernel CephFS mounted share path, without vfs_ceph. In this
       case Samba's default VFS backend vfs_default is used:

                     <u>[share]</u>
                     <b>vfs</b> <b>objects</b> <b>=</b> <b>ceph_snapshots</b>
                     <b>path</b> <b>=</b> <b>/mnt/cephfs/</b>

</pre><h4><b>OPTIONS</b></h4><pre>
       ceph:snapdir = subdirectory
           Allows for the configuration of the special CephFS snapshot subdirectory name. This parameter should
           only be changed from the ".snap" default if the ceph.conf client snapdir or snapdirname mount option
           settings are changed from their matching ".snap" defaults.

           Default: <b>ceph:snapdir</b> <b>=</b> <b>.snap</b>

           Example: <b>ceph:snapdir</b> <b>=</b> <b>.snapshots</b>

</pre><h4><b>VERSION</b></h4><pre>
       This man page is part of version 4.22.3-Ubuntu-4.22.3+dfsg-4ubuntu1 of the Samba suite.

</pre><h4><b>AUTHOR</b></h4><pre>
       The original Samba software and related utilities were created by Andrew Tridgell. Samba is now developed
       by the Samba Team as an Open Source project similar to the way the Linux kernel is developed.

Samba 4.22.3-Ubuntu-4.22.3+dfs                     07/21/2025                              <u><a href="../man8/VFS_CEPH_SNAPSHOTS.8.html">VFS_CEPH_SNAPSHOTS</a></u>(8)
</pre>
 </div>
</div></section>
</div>
</body>
</html>