<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>config-gfarm-update - upgrades/updates metadata server of Gfarm</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/gfmd">gfmd_2.7.20+dfsg-1.2_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       config-gfarm-update - upgrades/updates metadata server of Gfarm

</pre><h4><b>SYNOPSIS</b></h4><pre>

       <b>config-gfarm-update</b> [<u>options</u>]

       <b>config-gfarm-update</b> --update [<u>options</u>]

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>config-gfarm-update</b> upgrades/updates the backend database of a metadata server. Unless the metadata
       server is configured as the private mode, the root privilege is required to run this command. It reads
       the configuration file for <b>gfmd</b> (gfmd.conf), in order to get information for accessing the backend
       database.

       <b>config-gfarm-update</b> can enable the following features of the backend database:

       •   XML Path Language (XPath) support [-X]

       •   Metadata replication among metadata servers [-r]

       •   Checksum calculation [-d]

       Whether the backend database supports those features or not is initially configured by <b>config-gfarm</b>. If
       you would like to enable a feature after the configuration, run <b>config-gfarm-update</b> <b>--update</b> with an
       option surrounded by [ ] in the list above.

       <b>config-gfarm-update</b> is also used for upgrading the backend database. Sometimes Gfarm contains
       incompatible changes against older releases. With <b>--update</b> option, <b>config-gfarm-update</b> edits table schema
       and/or data in the database for upgrading, if needed.

       When you update/upgrade the metadata server, you must stop <b>gfmd</b> beforehand. If there are some metadata
       servers in a file system, run <b>config-gfarm-update</b> on every metadata servers. After the update/upgrade, it
       starts a metadata server on the host.

       Like <b>config-gfarm</b>, also <b>config-gfarm-update</b> has <b>-t</b> option which shows values of all configurable
       parameters, like this:

           $ config-gfarm-update -t
           prefix [--prefix]:
           metadata backend    [-b]: postgresql
           metadata directory  [-l]: /var/gfarm-pgsql
           postgresql admin user        [-U]: postgres
           postgresql admin password    [-W]: (auto generated)
           postgresql user              [-u]: gfarm
           postgresql password          [-w]: (auto generated)
           postgresql prefix            [-P]: <a href="file:/usr">/usr</a>
           postgresql version           [-V]: 8.4
           postgresql XML supported     [-X]: no
           postgresql data checksum support
                                        [-E]: no
           portmaster port              [-p]: 10602
           metadata replication         [-r]: yes
           metadata journal directory   [-j]: /var/gfarm-metadata/journal
           digest type                  [-d]: md5

       It is recommended to execute <b>config-gfarm-update</b> <b>-t</b> before update/upgrade.

       In case that the backend database is PostgreSQL and <b>config-gfarm-update</b> is executed without <b>--update</b>
       option, <b>psql</b> command is invoked.  <b>psql</b> is a front-end terminal to the backend database. It enables you to
       type in queries interactively. This is useful since a connection from <b>psql</b> to the PostgreSQL server is
       established automatically.

</pre><h4><b>OPTIONS</b></h4><pre>
       <b>--prefix</b> <u>path</u>
           If this option is given, <b>config-gfarm-update</b> reads PREFIX/etc/gfmd.conf as the configuration file of
           <b>gfmd</b>. By default, it reads %%SYSCONFDIR%%/etc/gfmd.conf.

       <b>-P</b> <u>prefix</u>
           Specify an installation prefix of the backend database (e.g. <a href="file:/usr/local">/usr/local</a>). When <b>config-gfarm-update</b>
           executes a PostgreSQL command such as <b>psql</b>, it assumes the command is installed under the given
           prefix. If this option is omitted, <b>config-gfarm-update</b> searches directories listed in the environment
           variable <b>PATH</b> for the commands.

       <b>-l</b> <u>path</u>
           Specify a path to the directory where the backend database puts files to store metadata of Gfarm.

           If the backend database is PostgreSQL, the directory is commonly called PGDATA directory. The default
           is PREFIX/var/gfarm-pgsql where PREFIX is a prefix given by <b>--prefix</b> option.

       <b>-f</b> <u>file</u>
           When <b>config-gfarm-update</b> invokes <b>psql</b> as a front-end terminal to PostgreSQL, <b>config-gfarm-update</b>
           passes <b>-f</b> option and the given <u>file</u> argument to <b>psql</b>.  <b>psql</b> interprets commands written in the file,
           instead of reading commands interactively. This option is ignored when also <b>--update</b> option is
           specified.

       <b>-o</b> <u>option</u>
           When <b>config-gfarm-update</b> invokes <b>psql</b> as a front-end terminal to PostgreSQL, <b>config-gfarm-update</b> also
           passes the given option to <b>psql</b>. This option is ignored when also <b>--update</b> option is specified.

       <b>-j</b> <u>file</u>
           Specify a path to the directory where <b>gfmd</b> puts journal files. The default value is
           PREFIX/var/gfarm-metadata/journal where PREFIX is a prefix given by <b>--prefix</b> option.

       <b>--help</b>
           Show usage, then exit.

       <b>-t</b>
           Show values of configurable parameters in human readable format, then exit immediately.

       <b>-N</b>
           Do not start <b>gfmd</b> after update/upgrade. This option takes effect only when also <b>--update</b> option is
           specified.

       <b>-r</b>
           Enable metadata replication among metadata servers. This option takes effect only when also <b>--update</b>
           option is specified.

       <b>-d</b>
           Enable checksum calculation and specify the digest type of the checksum. The <u>digest_type</u> argument is
           a lower-case name which is supported by the OpenSSL library on the host, such as "md5".

       <b>-X</b>
           Enable XML Path Language (XPath) support for querying XML extended attributes. This option takes
           effect only when also <b>--update</b> option is specified.

</pre><h4><b>FILES</b></h4><pre>
       %%SYSCONFDIR%%/gfmd.conf
           configuration file for <b>gfmd</b>

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man8/config-gfarm.8.html">config-gfarm</a></b>(8), <b><a href="../man8/gfmd.8.html">gfmd</a></b>(8), <b><a href="../man1/psql.1.html">psql</a></b>(1)

Gfarm                                              2 Feb 2015                              <u><a href="../man8/CONFIG-GFARM-UPDAT.8.html">CONFIG-GFARM-UPDAT</a></u>(8)
</pre>
 </div>
</div></section>
</div>
</body>
</html>