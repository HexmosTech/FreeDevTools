<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>refind-sb-healthcheck - Interactively check and update Shim and Secure Boot keys</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/refind">refind_0.14.2-2.1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       refind-sb-healthcheck - Interactively check and update Shim and Secure Boot keys

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>refind-sb-healthcheck</b>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       Booting  via  Secure  Boot relies upon a number of keys and, in most cases under Linux, the an EFI binary
       known as Shim (typically <u>shimx64.efi</u> for x86-64 computers). This Shim binary, and the keys upon which the
       whole process relies, can age out of usefulness.  Because  most  distributions  are  not  rEFInd-centric,
       keeping  the keys and Shim binary up-to-date falls on the individual system administrator. The <u>refind-sb-</u>
       <u>healthcheck</u> script helps with that; it performs a number of checks, and can  optionally  update  binaries
       and key files (but not public keys stored in NVRAM):

       <b>*</b>      The  script first attempts to identify the Shim binary that launched the current boot session. The
              script then searches the EFI  System  Partition  (ESP)  and  <u><a href="file:/usr">/usr</a></u>  for  newer  Shim  binaries  (as
              identified  by  the files' timestamps). If any newer Shim binaries are found, the script offers to
              update the currently-in-use Shim with the newer  binary.  The  MokManager  program  (<u>mmx64.efi</u>  on
              x86-64 systems) is updated along with Shim.

       <b>*</b>      The  <u>refind-install</u>  script  generates  local rEFInd keys, to be used when signing rEFInd binaries
              that are not signed or to override existing signatures. These keys  have  a  10-year  lifespan  by
              default.  The  <u>refind-sb-healthcheck</u> script checks the age of the current local rEFInd signing key
              and, if it's expired or within one year of expiration, offers to replace the  existing  key.  Note
              that, even if the user opts to update the key, existing rEFInd binaries are not re-signed. The new
              key  may be added to the MOK list, but if the rEFInd key was added to the Secure Boot db, updating
              the db is left to the user.

       <b>*</b>      The Machine Owner Key (MOK) list is stored in  NVRAM.  It  can  contain  keys  for  rEFInd,  Linux
              distributions,  and  other  keys,  all  of which will eventually expire. The <u>refind-sb-healthcheck</u>
              script scans the MOK and reports if there are any expired keys or keys that will expire  within  a
              year.  If  the  user  wants  to update such keys, the user must track down appropriate updates and
              install them manually with <u>mokutil</u> or <u>MokManager</u>. Note that keeping expired keys in the MOK is not
              necessarily a problem, although deleting expired keys is advisable from a security point of  view.
              Also,  expired  keys  have  probably  been  updated  by their maintainers, so their updates should
              probably be installed.

       <b>*</b>      <u>refind-sb-healthcheck</u> scans the Secure Boot db, KEK, and PK for expired keys much as it scans  the
              MOK list. The issues here are similar, except that these keys cannot be easily updated by the user
              without  first  taking full control of the Secure Boot subsystem. Updates provided by Microsoft, a
              Linux distribution, or a computer manufacturer may, however, include updates to  one  or  more  of
              these key sets.

</pre><h4><b>OPTIONS</b></h4><pre>
       <u>refind-sb-healthcheck</u>  is  an  interactive  program  that  provides no command-line options. Instead, the
       program scans for the information it needs, or occasionally asks the user  for  input  depending  on  the
       environment it discovers.

</pre><h4><b>LIMITATIONS</b></h4><pre>
       <u>refind-sb-healthcheck</u>  is a tool to assist in maintaining a rEFInd installation that uses Secure Boot. It
       is not meant to completely and automatically handle all  Secure  Boot  maintenance  tasks.  Some  notable
       limitations include:

       <b>*</b>      <u>refind-sb-healthcheck</u>  cannot update Secure Boot variables (except for the MOK). Even updating the
              MOK requires a reboot and manual interaction with MokManager at reboot.

       <b>*</b>      <u>refind-sb-healthcheck</u> relies on files' timestamps to locate Shim binaries that are newer than  the
              one currently in use. This is not completely reliable; a binary that was recently copied using the
              default <u>cp</u> flags will appear to be recent, even if it's very old by version number standards.

       <b>*</b>      The  script does not attempt to maintain non-rEFInd key files, such as those a user might maintain
              to sign kernel binaries or kernel modules.

       <b>*</b>      <u>refind-sb-healthcheck</u> incorporates a number of assumptions  about  the  locations  of  rEFInd  key
              files,  the  existence  of common support programs, and the nature of the current installation. It
              may fail in unusual ways if these assumptions are violated.

       <b>*</b>

       <b>*</b>

              q

</pre><h4><b>AUTHORS</b></h4><pre>
       Primary author: Roderick W. Smith (<a href="mailto:rodsmith@rodsbooks.com">rodsmith@rodsbooks.com</a>)

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man8/mvrefind.8.html">mvrefind</a></b>(8), <b><a href="../man8/mkrlconf.8.html">mkrlconf</a></b>(8), <b><a href="../man8/refind-install.8.html">refind-install</a></b>(8), <b><a href="../man8/refind-mkdefault.8.html">refind-mkdefault</a></b>(8), <b><a href="../man8/efibootmgr.8.html">efibootmgr</a></b>(8).

       <u>https://www.rodsbooks.com/refind/</u>

</pre><h4><b>AVAILABILITY</b></h4><pre>
       The <b>refind-mkdefault</b> command is part of the <u>rEFInd</u> package and is available from Roderick W. Smith.

Roderick W. Smith                                    0.14.2                             <u><a href="../man8/REFIND-SB-HEALTHCHECK.8.html">REFIND-SB-HEALTHCHECK</a></u>(8)
</pre>
 </div>
</div></section>
</div>
</body>
</html>