<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>thin_migrate</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/thin-provisioning-tools">thin-provisioning-tools_1.1.0-4ubuntu1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       <b>thin_migrate</b>

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>thin_migrate</b> [<u>options</u>] <b>--source-dev</b> {device} <b>--dest-dev</b> {device}
       <b>thin_migrate</b> [<u>options</u>] <b>--source-dev</b> {device} <b>--dest-file</b> {file}

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>thin_migrate</b>  copies provisioned data blocks from a thin device to another device or file. It is designed
       for cloning a read-only snapshot or thin volume within a live thin-pool. A metadata snapshot is  required
       to read the data mappings.

</pre><h4><b>OPTIONS</b></h4><pre>
       <b>-h,</b> <b>--help</b>
              Print help and exit.

       <b>-V,</b> <b>--version</b>
              Print version information and exit.

       <b>--source-dev</b> <b>{device}</b>
              The input read-only thin device to copy.

       <b>--dest-dev</b> <b>{device}</b>
              The output device as the copy destination.

       <b>--dest-file</b> <b>{file}</b>
              The output file as the copy destination.

       <b>-q,</b> <b>--quit</b>
              Suppress output messages, return only exit code.

       <b>--buffer-size-meg</b> <b>{size}</b>
              Specify the size of the data buffers, in megabytes.

</pre><h4><b>EXAMPLE</b></h4><pre>
       Assuming that there's a thin snapshot 'vg/snap' to copy, we must first set the snapshot to read-only:

           $ lvchange vg/snap --permission r

       Next, create a metadata snapshot for running <b>thin_migrate</b>:

           $ dmsetup message vg-mythinpool-tpool 0 reserve_metadata_snap

       Once  the  metadata  snapshot  is  created,  copy  the  snapshot  into another linear or thin volume. The
       destination volume must have the same size as the source device.

           $ thin_migrate --src-device /dev/vg/snap --dest-device /dev/vg2/dest

       Alternatively, copy the snapshot into a file. <b>thin_migrate</b> can optionally create the destination file  if
       it is not present, or the size of the file will be truncated to match that of the source device.

           $ thin_migrate --src-device /dev/vg/snap --dest-file dest.bin

       Finally, release the metadata snapshot after <b>thin_migrate</b> finishes its job:

           $ dmsetup message vg-mythinpool-tpool 0 release_metadata_snap

</pre><h4><b>DIAGNOSTICS</b></h4><pre>
       <b>thin_migrate</b> returns an exit code of 0 for success or 1 for error.

</pre><h4><b>AUTHOR</b></h4><pre>
       Joe Thornber &lt;<a href="mailto:ejt@redhat.com">ejt@redhat.com</a>&gt;

System Manager's Manual                        Device Mapper Tools                               <u><a href="../man8/thin_migrate.8.html">thin_migrate</a></u>(8)
</pre>
 </div>
</div></section>
</div>
</body>
</html>