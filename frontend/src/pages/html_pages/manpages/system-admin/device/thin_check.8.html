<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>thin_check - validates thin provisioning metadata on a device or file</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/thin-provisioning-tools">thin-provisioning-tools_1.1.0-4ubuntu1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       <b>thin_check</b> - validates thin provisioning metadata on a device or file

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>thin_check</b> [<u>options</u>] {device|file}

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>thin_check</b>  checks  thin provisioning metadata created by the device-mapper thin provisioning target on a
       device or file.

       The tool cannot be run on live metadata unless the <b>--metadata-snapshot</b> option is used.

</pre><h4><b>OPTIONS</b></h4><pre>
       <b>-q,</b> <b>--quiet</b>
              Suppress output messages, return only exit code.

       <b>-h,</b> <b>--help</b>
              Print help and exit.

       <b>-V,</b> <b>--version</b>
              Output version information and exit.

       <b>--super-block-only</b>
              Only check the superblock.

       <b>--skip-mappings</b>
              Skip checking of the block mappings which make up the bulk of the metadata.

       <b>--ignore-non-fatal-errors</b>
              Will only return a non-zero exit code if it finds a fatal error.

           An example of a nonfatal error is an incorrect data block reference count
           causing a block to be considered allocated when it in fact isn't.  Ignoring
           errors for a long time is not advised, you really should be using
           thin_repair to fix them.

       <b>--clear-needs-check-flag</b>
              Clears the 'needs_check' flag in the superblock.

           The kernel may set a flag to force the pool to be checked before it's next
           activated.  Set this switch to clear the flag if the check is successful.
           If the metadata check failed, the flag is not cleared and a thin_repair run
           is needed to fix any issues. After thin_repair succeeded, you may run
           thin_check again.

       <b>--metadata-snapshot,</b> <b>-m</b>
              Check the metadata snapshot.

           This will check the devices tree and mappings in a metadata snapshot.
           The snap does not contain space maps, so these will not be checked.  This
           may be used on live metadata.

       <b>--auto-repair</b>
              Automatically repair any trivial issues found with the metadata.

           Currently only fixes metadata leaks.

       <b>--override-mapping-root</b> <b>&lt;block&gt;</b>
              Specify a mapping root to use.

           Don't use this.  This overrides what's specified in the superblock.  Only
           use this if you really understand the metadata format and are trying to
           recover damaged metadata.

</pre><h4><b>EXAMPLE</b></h4><pre>
       Analyses thin provisioning metadata on logical volume /dev/vg/metadata:

           $ thin_check /dev/vg/metadata

       The device must not be actively used by the target when running.

</pre><h4><b>DIAGNOSTICS</b></h4><pre>
       <b>thin_check</b> returns an exit code of 0 for success or 1 for error.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man8/thin_dump.8.html">thin_dump</a></b>(8), <b><a href="../man8/thin_repair.8.html">thin_repair</a></b>(8), <b><a href="../man8/thin_restore.8.html">thin_restore</a></b>(8), <b><a href="../man8/thin_rmap.8.html">thin_rmap</a></b>(8), <b><a href="../man8/thin_metadata_size.8.html">thin_metadata_size</a></b>(8)

</pre><h4><b>AUTHOR</b></h4><pre>
       Joe Thornber &lt;<a href="mailto:ejt@redhat.com">ejt@redhat.com</a>&gt;, Heinz Mauelshagen &lt;<a href="mailto:heinzm@redhat.com">heinzm@redhat.com</a>&gt;

System Manager's Manual                        Device Mapper Tools                                 <u><a href="../man8/thin_check.8.html">thin_check</a></u>(8)
</pre>
 </div>
</div></section>
</div>
</body>
</html>