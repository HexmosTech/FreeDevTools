<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>sg_sat_datetime - report or set date and time on a ATA device</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/sg3-utils">sg3-utils_1.48-2ubuntu1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       sg_sat_datetime - report or set date and time on a ATA device

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>sg_sat_datetime</b>   [<u>--dma</u>]   [<u>--elapsed</u>]  [<u>--format</u>]  [<u>--help</u>]  [<u>--hex</u>]  [<u>--milliseconds=MS</u>]  [<u>--readonly</u>]
       [<u>--seconds=SECS</u>] [<u>--srep</u>] [<u>--verbose</u>] [<u>--version</u>] <u>DEVICE</u>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       Sends a SET DATE &amp; TIME EXT or READ LOG [DMA] EXT command to the ATA <u>DEVICE</u> to set the date and  time  or
       read  it  from  the Device Statistics log <a href="../man04h/address.04h.html">address</a>(04h), General Statistics page (01h). These commands are
       found in the ATA Command Set (ACS-5) standard.   ATA  commands  are  sent  using  ATA  PASS-THROUGH  SCSI
       commands.

       If  either the <u>--milliseconds=MS</u> or <u>--seconds=SECS</u> option is given (and both can't be given) then the SET
       DATE &amp; TIME command is sent.  Otherwise, the READ LOG EXT command, or if the --dma option  is  used,  the
       READ LOG DMA EXT command is sent to the device.

       The  date and time is sent and received from the <u>DEVICE</u> generally as the number of milliseconds since the
       epoch of 1970-01-01 00:00:00 UTC and is held in a 48 bit unsigned integer. That same  epoch  is  used  by
       Unix  machines,  but  they usually hold the number of seconds since that epoch. The Unix date command and
       especially its "+%s" format is useful in converting to and from  timestamps  and  more  humanly  readable
       forms. See the EXAMPLES section below. If the date and time is not set after power-on reset, the value is
       the same as the device power-on hours in milliseconds.

</pre><h4><b>OPTIONS</b></h4><pre>
       Arguments to long options are mandatory for short options as well.

       <b>-d</b>, <b>--dma</b>
              use READ LOG DMA EXT to read the date and time value from the device.  Ignored if setting the date
              and time.

       <b>-e</b>, <b>--elapsed</b>
              assume  the date and time from READ LOG [DMA] EXT is an elapsed time from an event such as a power
              cycle or hard reset and format the output as '&lt;n&gt; days hh:mm:ss.xxx' where hh is hours (00  to  23
              inclusive);  mm  is  minutes  (00  to 59 inclusive); ss is seconds (00 to 59 inclusive) and xxx is
              milliseconds (000 to 999 inclusive). If the number of days is 0 then '0 days' is not output unless
              this option is given two or more times.
              This option is especially useful if the date and time has not been set. Per ACS-5, when  not  set,
              the date and time is initialized to the power-on hours of the device in milliseconds.

       <b>-f</b>, <b>--format</b>
              output the date and time formatted using the default locale.

       <b>-h</b>, <b>--help</b>
              output the usage message then exit.

       <b>-H</b>, <b>--hex</b>
              output the date and time in ASCII hexadecimal.

       <b>-m</b>, <b>--milliseconds</b>=<u>MS</u>
              where <u>MS</u> is the number of milliseconds since 1970-01-01 00:00:00 UTC to set in the <u>DEVICE</u> with the
              ATA SET DATE &amp; TIME EXT command.

       <b>-R</b>, <b>--readonly</b>
              open the <u>DEVICE</u> read-only. The default action is to open the <u>DEVICE</u> read-write.

       <b>-s</b>, <b>--seconds</b>=<u>SECS</u>
              where  <u>SECS</u>  is  the number of seconds since 1970-01-01 00:00:00 UTC to set in the <u>DEVICE</u> with the
              ATA SET DATE &amp; TIME command. <u>SECS</u> is multiplied by 1000 before being used in the ATA  SET  DATE  &amp;
              TIME command.

       <b>-S</b>, <b>--srep</b>
              report  the  number  of  seconds since 1970-01-01 00:00:00 UTC. This is done by dividing the value
              returned by the ATA READ LOG [DMA] EXT command by 1000.

       <b>-v</b>, <b>--verbose</b>
              increase the level of verbosity, (i.e. debug output).

       <b>-V</b>, <b>--version</b>
              print the version string and then exit.

</pre><h4><b>EXIT</b> <b>STATUS</b></h4><pre>
       The exit status of sg_sat_datetime is 0 when it is successful. Otherwise, see the <a href="../man8/sg3_utils.8.html">sg3_utils</a>(8) man page.

</pre><h4><b>NOTES</b></h4><pre>
       The <u>DEVICE</u> should immediately start accumulating time after the date and time is set.  ie. If you set and
       then retrieve the date and time, the returned values will likely have increased.

       The ACS-5 standard makes no provision for a power-safe date and time  storage.   Unless  the  device  has
       vendor-specific power-safe capability, after a power-on reset, per ACS-5, the date and time should be the
       power-on hours of the device returned in milliseconds (or seconds if --srep option is used).

</pre><h4><b>EXAMPLES</b></h4><pre>
       On  Unix  machines  (e.g.  Linux,  FreeBSD,  and  Solaris)  the  date command is useful when working with
       timestamps.

       To fetch the timestamp from a <u>DEVICE</u> and display it in a humanly readable form  the  following  could  be
       used:

          # sg_sat_datetime -S /dev/sg2
       1681156506

          # date --date=@1681156506
       Mon Apr 10 02:55:06 PM CDT 2023

          # date -R --date="@1681156506"
       Mon, 10 Apr 2023 14:55:06 -0500

       The  latter  two  date  commands  show  different  forms of the same date (i.e.  1681156506 seconds since
       1970-01-01 00:00:00 UTC). The sg_sat_datetime and date commands can be combined using backquotes:

          # date -R --date=@`sg_sat_datetime -S /dev/sg2`
       Mon, 10 Apr 2023 14:55:06 -0500

       Alternatively, the --format option can be used to format the date and time using the default locale.
          # sg_sat_datetime --format /dev/sg2
       Mon Apr 10 15:02:54 2023

       To set the date and time on the <u>DEVICE</u> to now (approximately) the following could be used:

          # date +%s
       1681157099

          # sg_sat_datetime --seconds=1681157099 /dev/sg0

       Those two command lines could be combined into one by using backquotes:

          # sg_sat_datetime --seconds=`date +%s` /dev/sg0

</pre><h4><b>AUTHORS</b></h4><pre>
       Written by Jeremy Bauer and Daniel Woeste with extensive use of  sg_timestamp  and  sg_sat_read_gplog  by
       Douglas Gilbert.

</pre><h4><b>REPORTING</b> <b>BUGS</b></h4><pre>
       Report bugs to &lt;dgilbert at interlog dot com&gt;.

</pre><h4><b>COPYRIGHT</b></h4><pre>
       Copyright Â© 2023 Jeremy Bauer and Daniel Woeste of Western Digital Corporation
       This  software is distributed under a FreeBSD license. There is NO warranty; not even for MERCHANTABILITY
       or FITNESS FOR A PARTICULAR PURPOSE.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b>sdparm(sdparm),</b> <b>sg_logs(sg3_utils),</b> <b>sg_timestamp(sg3_utils),</b> <b>sg_sat_read_gplog(sg3_utils)</b>

sg3_utils-1.48                                      May 2023                                  <u><a href="../man8/SG_SAT_DATETIME.8.html">SG_SAT_DATETIME</a></u>(8)
</pre>
 </div>
</div></section>
</div>
</body>
</html>