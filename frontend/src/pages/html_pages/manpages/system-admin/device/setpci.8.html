<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>setpci - configure PCI devices</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/pciutils">pciutils_3.14.0-1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       setpci - configure PCI devices

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>setpci</b> [<b>options</b>] <b>devices</b> <b>operations</b>...

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>setpci</b> is a utility for querying and configuring PCI devices.

       All numbers are entered in hexadecimal notation.

       Root  privileges  are  necessary for almost all operations, excluding reads of the standard header of the
       configuration space on some operating systems.  Please see <b><a href="../man8/lspci.8.html">lspci</a>(8)</b> for details on access rights.

</pre><h4><b>OPTIONS</b></h4><pre>
   <b>General</b> <b>options</b>
       <b>-v</b>     Tells <u>setpci</u> to be verbose and display detailed information about configuration space accesses.

       <b>-f</b>     Tells <u>setpci</u> not to complain when there's nothing to do (when  no  devices  are  selected).   This
              option  is  intended  for  use  in  widely-distributed  configuration scripts where it's uncertain
              whether the device in question is present in the machine or not.

       <b>-D</b>     `Demo mode' -- don't write anything to the configuration registers.  It's useful to try <b>setpci</b> <b>-vD</b>
              to verify that your complex sequence of <b>setpci</b> operations does what you think it should do.

       <b>-r</b>     Avoids bus scan if each operation selects a specific device (uses the <b>-s</b>  selector  with  specific
              domain,  bus,  slot,  and  function).  This  is faster, but if the device does not exist, it fails
              instead of matching an empty set of devices.

       <b>--version</b>
              Show <u>setpci</u> version. This option should be used stand-alone.

       <b>--help</b> Show detailed help on available options. This option should be used stand-alone.

       <b>--dumpregs</b>
              Show a list of all known PCI registers and capabilities. This option should be used stand-alone.

   <b>PCI</b> <b>access</b> <b>options</b>
       The PCI utilities use the PCI library to talk to PCI devices (see <b><a href="../man7/pcilib.7.html">pcilib</a></b>(7) for details). You can use the
       following options to influence its behavior:

       <b>-A</b> <b>&lt;method&gt;</b>
              The library supports a variety of methods to access the PCI hardware.  By  default,  it  uses  the
              first  access method available, but you can use this option to override this decision. See <b>-A</b> <b>help</b>
              for a list of available methods and their descriptions.

       <b>-O</b> <b>&lt;param&gt;=&lt;value&gt;</b>
              The behavior of the library is controlled by several named parameters.  This option allows one  to
              set  the  value  of  any  of  the parameters. Use <b>-O</b> <b>help</b> for a list of known parameters and their
              default values.

       <b>-H1</b>    Use direct hardware access via Intel configuration mechanism 1.   (This  is  a  shorthand  for  <b>-A</b>
              <b>intel-conf1</b>.)

       <b>-H2</b>    Use  direct  hardware  access  via  Intel  configuration mechanism 2.  (This is a shorthand for <b>-A</b>
              <b>intel-conf2</b>.)

       <b>-G</b>     Increase debug level of the library.

</pre><h4><b>DEVICE</b> <b>SELECTION</b></h4><pre>
       Before each sequence of operations you need to select which devices you wish that operation to affect.

       <b>-s</b> <b>[[[[&lt;domain&gt;]:]&lt;bus&gt;]:][&lt;slot&gt;][.[&lt;func&gt;]]</b>
              Consider only devices in the specified domain (in case your machine has several host bridges, they
              can either share a common bus number space or each of them can address a PCI domain  of  its  own;
              domains  are  numbered from 0 to ffff), bus (0 to ff), slot (0 to 1f) and function (0 to 7).  Each
              component of the device address can be omitted or set  to  "*",  both  meaning  "any  value".  All
              numbers are hexadecimal.  E.g., "0:" means all devices on bus 0, "0" means all functions of device
              0  on  any  bus,  "0.3"  selects third function of device 0 on all buses and ".4" matches only the
              fourth function of each device.

       <b>-d</b> <b>[&lt;vendor&gt;]:[&lt;device&gt;][:&lt;class&gt;[:&lt;prog-if&gt;]]</b>
              Select devices with specified vendor, device, class ID, and programming interface.  The  ID's  are
              given  in  hexadecimal  and may be omitted or given as "*", both meaning "any value". The class ID
              can contain "x" characters which stand for "any digit".

       When <b>-s</b> and <b>-d</b> are combined, only devices that match both criteria are selected. When multiple options of
       the same kind are specified, the rightmost one overrides the others.

</pre><h4><b>OPERATIONS</b></h4><pre>
       There are two kinds of operations: reads and writes. To read a register, just specify  its  name.  Writes
       have  the  form  <u>name</u>=<u>value</u>,<u>value</u>...  where each <u>value</u> is either a hexadecimal number or an expression of
       type <u>data</u>:<u>mask</u> where both <u>data</u> and <u>mask</u> are hexadecimal numbers.  In  the  latter  case,  only  the  bits
       corresponding  to  binary  ones  in  the  <u>mask</u>  are  changed  (technically,  this  is a read-modify-write
       operation).

       There are several ways to identify a register:

       •      Tell its address in hexadecimal.

       •      Spell its name. Setpci knows the names of all registers in the standard configuration headers. Use
              `<b>setpci</b> <b>--dumpregs</b>' to get the complete list.  See PCI bus specifications for the precise  meaning
              of these registers or consult <b>header.h</b> or <b>/usr/include/pci/pci.h</b> for a brief sketch.

       •      If  the  register is a part of a PCI capability, you can specify the name of the capability to get
              the address of its first register. See the names starting with `CAP_' or `ECAP_' in the <b>--dumpregs</b>
              output.

       •      If the name of the capability is not known to <b>setpci</b>, you can refer to it by  its  number  in  the
              form CAP<b>id</b> or ECAP<b>id</b>, where <b>id</b> is the numeric identifier of the capability in hexadecimal.

       •      Each  of  the  previous  formats can be followed by <b>+offset</b> to add an offset (a hex number) to the
              address. This feature can be useful for addressing of registers living within a capability, or  to
              modify parts of standard registers.

       •      To  choose  how many bytes (1, 2, or 4) should be transferred, you should append a width specifier
              <b>.B</b>, <b>.W</b>, or <b>.L</b>. The width can be omitted if you are referring to a register by  its  name  and  the
              width of the register is well known.

       •      Finally,  if  a capability exists multiple times you can choose which one to target using <b>@number</b>.
              Indexing starts at 0.

       All names of registers and width specifiers are case-insensitive.

</pre><h4><b>EXAMPLES</b></h4><pre>
       COMMAND
              asks for the word-sized command register.

       4.w    is a numeric address of the same register.

       COMMAND.l
              asks for a 32-bit word starting at the location of the command register,  i.e.,  the  command  and
              status registers together.

       VENDOR_ID+1.b
              specifies the upper byte of the vendor ID register (remember, PCI is little-endian).

       CAP_PM+2.w
              corresponds to the second word of the power management capability.

       ECAP108.l
              asks for the first 32-bit word of the extended capability with ID 0x108.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man8/lspci.8.html">lspci</a></b>(8), <b><a href="../man7/pcilib.7.html">pcilib</a></b>(7)

</pre><h4><b>AUTHOR</b></h4><pre>
       The PCI Utilities are maintained by Martin Mares &lt;<a href="mailto:mj@ucw.cz">mj@ucw.cz</a>&gt;.

pciutils-3.14.0                                   21 June 2025                                         <u><a href="../man8/setpci.8.html">setpci</a></u>(8)
</pre>
 </div>
</div></section>
</div>
</body>
</html>