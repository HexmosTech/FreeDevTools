<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>sg_map26 - map SCSI generic (sg) device to corresponding device names</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/sg3-utils">sg3-utils_1.48-2ubuntu1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       sg_map26 - map SCSI generic (sg) device to corresponding device names

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>sg_map26</b> [<u>--dev_dir=DIR</u>] [<u>--given_is=</u>0|1] [<u>--help</u>] [<u>--result=</u>0|1|2|3] [<u>--symlink</u>] [<u>--verbose</u>] [<u>--version</u>]
       <u>DEVICE</u>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       Maps  a special file (block or char) associated with a SCSI device to the corresponding SCSI generic (sg)
       device,  or  vice  versa.   Can  also  be  given  a  sysfs  file,   for   example   '/sys/block/sda'   or
       '/sys/block/sda/dev'.

       Rather than map to or from a sg device, the sysfs file name matching a given device special file (or vice
       versa)  can  be  requested.  This  is done with '--result=2' and '--result=3'.  This feature works on ATA
       devices (e.g. 'dev/hdc') as well as SCSI devices.

       In this utility, "mapped" refers to finding the relationship between a SCSI generic  (sg)  node  and  the
       higher  level  SCSI device name; or vice versa. For example '/dev/sg0' may "map" to '/dev/sda'.  Mappings
       may not exist, if a relevant module is not loaded, for example. Also there are SCSI devices that can only
       be accessed via a sg node (e.g. SAF-TE and some SES devices).

       In this utility, "matching" refers to different representations of the same device accessed via the  same
       driver.  For  example, '/dev/hdc' and '/sys/block/hdc' usually refer to the same device and thus would be
       considered matching. A related example is that '/dev/cdrom' and '/dev/hdc' are also  considered  matching
       if '/dev/cdrom' is a symlink to '/dev/hdc'.

       Note  that  this  utility  requires  root  permissions  to  access  the  storage device nodes in the <a href="file:/dev">/dev</a>
       directory. The lsscsi utility may be used instead in  many  cases,  and  lsscsi  does  not  require  root
       permission as it "data-mines" the sysfs pseudo file system for the information it needs.

       For notes on bsg and nvme device nodes see the section on BSG and NVME DEVICES below.

</pre><h4><b>OPTIONS</b></h4><pre>
       Arguments to long options are mandatory for short options as well.

       <b>-d</b>, <b>--dev_dir</b>=<u>DIR</u>
              where  <u>DIR</u> is the directory to search for resultant device special files in (or symlinks to same).
              Only active when '--result=0' (the default) or '--result=2'. If  this  option  is  not  given  and
              <u>DEVICE</u>  is  a device special file then the directory part of <u>DEVICE</u> is assumed.  If this option is
              not given and <u>DEVICE</u> is a sysfs name, then if necessary '<a href="file:/dev">/dev</a>' is assumed as the directory.

       <b>-g</b>, <b>--given_is</b>=0 | 1
              specifies the <u>DEVICE</u> is either a device special file (when the argument is 0), or  a  sysfs  'dev'
              file  (when  the argument is 1). The parent directory of a sysfs 'dev' file is also accepted (e.g.
              either '/sys/block/sda/dev' or '/sys/block/sda' are accepted). Usually there is no  need  to  give
              this  option  since this utility first checks for special files (or symlinks to special files) and
              if not, assumes it has been given a sysfs 'dev' file (or its parent). Generates an error if  given
              and disagrees with variety of <u>DEVICE</u>.

       <b>-h</b>, <b>--help</b>
              output the usage message then exit.

       <b>-r</b>, <b>--result</b>=0 | 1 | 2 | 3
              specifies  what  variety  of  file  (or  files) that this utility tries to find.  The default is a
              "mapped" device special file, when the argument is 0.  When the argument is 1, this utility  tries
              to  find  the  "mapped"  sysfs  node  name. When the argument is 2, this utility tries to find the
              "matching" device special file. When the argument is 3, this utility tries to find the  "matching"
              sysfs node name.

       <b>-s</b>, <b>--symlink</b>
              when  a device special file is being sought (i.e. when '--result=0' (the default) or '--result=2')
              then also look for symlinks to that device special file in the same directory.

       <b>-v</b>, <b>--verbose</b>
              increase the level of verbosity, (i.e. debug output).

       <b>-V</b>, <b>--version</b>
              print the version string and then exit.

</pre><h4><b>BSG</b> <b>and</b> <b>NVME</b> <b>DEVICES</b></h4><pre>
       The  bsg  driver  (Block  Scsi  Generic)  presents  alternate  Unix  character  devices  of   the   form:
       /dev/bsg/&lt;h:c:t:l&gt;.  &lt;h:c:t:l&gt;  is  a 4 element tuple where 'h' is the host number, 'c' is the controller
       number, 't' is the target identifier and 'l' is the LUN (Logical Unit Number). Other than the bsg  device
       names,  each device, once open()-ed, operates in a similar fashion to a sg device: a generic interface at
       the SCSI command level.

       If a bsg device is given to this utility, it will first try to map it to a SCSI block device.  This  will
       either  be  of  the  form /dev/sd&lt;letter_s&gt; for a disk or /dev/sr&lt;number&gt; for a BD/DVD or CD drive. If no
       match is found, then a check is made for a SCSI tape drive with a name of the  form  /dev/st&lt;number&gt;.  If
       that  fails,  the  mapping to the corresponding sg device is made. If the <u>--result=2</u> option is given, the
       block device and tape davice checks are bypassed and the mapping to the corresponding sg device is made.

       Note that this utility makes no mapping to a bsg device. That is  pretty  easy  to  establish  using  the
       lsscsi  utility  as the 4 element &lt;h:c:t:l&gt; tuple is shown at the beginning of each line (by default) and
       it uniquely identifies each SCSI device. Each line will also show the primary device  name  and,  if  the
       --generic option is given, the sg device node.

       Currently NVMe device nodes come in several varieties, block devices of the form: /dev/nvme&lt;c&gt;n&lt;n&gt;[p&lt;pn&gt;]
       where  &lt;c&gt; is the controller number (starting at 0), &lt;n&gt; is the namespace identifier (starting at 1), and
       &lt;pn&gt; is the partition number (starting at 1). There are two forms of NVMe character device nodes: one  of
       the  form  /dev/nvme&lt;c&gt; and the other of the form /dev/ng&lt;c&gt;n&lt;n&gt; where "ng" is newer and termed as 'nvme-
       generic' in the <a href="file:/proc/devices">/proc/devices</a> output. This utility identifies but does not map NVMe devices. Their naming
       is more consistent so a utility like this is less needed. Udev might be used to remap the kernel's naming
       scheme for NVMe, removing its inherent naming consistency.

</pre><h4><b>NOTES</b></h4><pre>
       This utility is designed for the Linux 2.6 (and later) kernel series.  It uses  special  file  major  and
       minor  numbers  (and  whether the special is block or character) together with sysfs to do its mapping or
       matching. In the absence of any other information, device special files are assumed to be in  the  '<a href="file:/dev">/dev</a>'
       directory  while  sysfs  is assumed to be mounted at '<a href="file:/sys">/sys</a>'. Device names in sysfs are predictable, given
       the corresponding major and minor number of the device. However, due to udev rules, the  name  of  device
       special files can be anything the user desires (e.g. '/dev/sda' could be named '/dev/my_boot_disk'). When
       trying  to  find  a  resultant  device  special  file, this utility uses the major and minor numbers (and
       whether a block or char device is sought) to search the device directory.

       This utility only shows one relationship at a time. To get an overview of all SCSI devices, with  special
       file names and optionally the "mapped" sg device name, see the lsscsi utility.

       Even  though  lsscsi is a functional replacement for this utility, it has been reported that this utility
       runs faster in systems that have a lot of disks connected. Theoretically a Linux system may  have  up  to
       16383 SCSI disks connected to it.

</pre><h4><b>EXAMPLES</b></h4><pre>
       Assume sg2 maps to sdb while dvd, cdrom and hdc are all matching.

         # sg_map26 /dev/sg2
         /dev/sdb

         # sg_map26 /dev/sdb
         /dev/sg2

         # sg_map26 --result=0 /dev/sdb
         /dev/sg2

         # sg_map26 --result=3 /dev/sdb
         /sys/block/sda

         # sg_map26 --result=1 /dev/sdb
         /sys/class/scsi_generic/sg0

       Now look at '/dev/hdc' and friends

         # sg_map26 /dev/hdc
         &lt;error: a hd device does not map to a sg device&gt;

         # sg_map26 --result=3 /dev/hdc
         /sys/block/hdc

         # sg_map26 --result=2 /dev/hdc
         /dev/hdc

         # sg_map26 --result=2 --symlink /dev/hdc
         /dev/cdrom
         /dev/dvd
         /dev/hdc

         # sg_map26 --result=2 --symlink /sys/block/hdc
         /dev/cdrom
         /dev/dvd
         /dev/hdc

</pre><h4><b>EXIT</b> <b>STATUS</b></h4><pre>
       The exit status of sg_map26 is 0 when it is successful. Otherwise see the <a href="../man8/sg3_utils.8.html">sg3_utils</a>(8) man page.

</pre><h4><b>AUTHORS</b></h4><pre>
       Written by Douglas Gilbert.

</pre><h4><b>REPORTING</b> <b>BUGS</b></h4><pre>
       Report bugs to &lt;dgilbert at interlog dot com&gt;.

</pre><h4><b>COPYRIGHT</b></h4><pre>
       Copyright © 2005-2023 Douglas Gilbert
       This  software  is  distributed  under  a  BSD-2-Clause  license.  There  is  NO  warranty;  not even for
       MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man7/udev.7.html">udev</a>(7),</b> <b>lsscsi(lsscsi)</b>

sg3_utils-1.48                                     April 2023                                        <u><a href="../man8/SG_MAP26.8.html">SG_MAP26</a></u>(8)
</pre>
 </div>
</div></section>
</div>
</body>
</html>