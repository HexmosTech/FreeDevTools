<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>scsiformat - low level format an scsi disk device</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/scsitools">scsitools_0.12-6_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       scsiformat - low level format an scsi disk device

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>scsiformat</b> <b>[-</b><u>options...</u><b>]</b> <u>device</u>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       Low  level  formats  the SCSI device identified by the scsi disk or generic scsi device node <u>device</u>.  You
       must be root to perform this operation.  <b>scsiformat</b> will ask a simple question to get  your  confirmation
       and  check  if  partitions  on <u>device</u> are still mounted. Possible swap spaces on <u>device</u> are <b><a href="../man8/swapoff.8.html">swapoff</a></b>(8)'ed
       prior to formatting.

       During  formatting  a  file  like  <u>/tmp/scsiformat.xx:xx:xx:xx:xxxxxxxx</u>  is  used  to  hold  some  status
       information.

</pre><h4><b>OPTIONS</b></h4><pre>
       <b>scsiformat</b> supports the following option switches:

   <b>a)</b> <b>Controlling</b> <b>a/synchronous</b> <b>operation</b>
       <b>-b</b> <u>n</u>   block  during the format operation. This makes any display of real progress indicators impossible.
              However, cheesy SCSI devices   will need it. Scsiformat assumes that the operation will need about
              <u>n</u> seconds and provides some progress indication according to that.  <b>-b0</b> does not print any process
              indication, just sits and blocks until formatting completes.

              Read the <b>BUGS</b> section below!

       <b>-T</b>     just check for a running format command and output statistics.  A file <u>/tmp/scsiformat.*</u>  is  used
              to  hold  the starting time of the format operation. If formatting completed, this file is removed
              by the formatting <b>scsiformat</b> call (which forks of a child just for this purpose).  The exit  state
              of  <b>scsiformat</b>  is  true  as  long  as  the  format  operation  is  still in progress. A left over
              <u>/tmp/scsiformat.*</u>  file will make scsiformat think a program still runs. It will  not  accept  and
              remove files older than 48h nevertheless.

       <b>-t</b> <u>n</u>   check  progress  every  <u>n</u>  seconds (default is 5).  <b>-t0</b> makes scsiformat return without displaying
              progress.

   <b>b)</b> <b>Interleave</b> <b>factor</b>
       <b>-i</b> <u>n</u>   sets the sector interleave factor to be used. Usually you should stick with the default <b>-i0</b>  which
              selects a vendor specific default.

   <b>c)</b> <b>Initialisation</b> <b>pattern</b>
       By default the target will initialise the formatted sectors with a vendor specific test pattern.

       <b>-I</b> <u>sequence</u> <u>of</u> <u>bytes</u> <u>in</u> <u>hex</u>
              the bytes given in hex characters are repeated and used to init all blocks on the device.

       <b>-L</b>     The first four bytes of each logical block are set to the number of the logical block.

       <b>-P</b>     The  first four bytes of each physical block are set to the number of logical block, it will occur
              in.

   <b>c)</b> <b>Defect</b> <b>management</b>
       <b>-e</b>     Erase the grown defect list prior to formatting. You can issue new defects for  the  grown  defect
              list nevertheless and media certification may add defects too.

       <b>-p</b>     Ignore  the  vendor's  primary  defect  list. This is not recommended as the vendor probably had a
              reason to specify these primary defects.

       <b>-c</b>     Do not perform a media surface certification. This  may  speed  up  formatting  but  is  also  not
              recommended.

       <b>-s</b>     Stop  when  unable  to  access  primary  or grown defects due to some internal error in the target
              device. When not given, formatting continues but returns a recovered error upon completion. (Which
              is probably not well supported by <b>scsiformat</b>).

       <b>-S</b>     Erase MODE SELECT settings stored in NVRAM. These are those you can set with <b><a href="../man8/scsiinfo.8.html">scsiinfo</a></b>(8) or  <b><a href="../man8/scsiconfig.8.html">scsi-</a></b>
              <b><a href="../man8/scsiconfig.8.html">config</a></b>(8).

       <b>-d</b> <u>int</u><b>,</b> <b>...</b>
              A  comma  separated  list  of  logical  blocks  to  mark  as  defect.  Using this defect format is
              discouraged as there no clear concept of what a logical block is here because the  format  command
              may move around logical blocks and change the number of available blocks.

              The number can be preceded by <b>0</b> or <b>0x</b> for octal or hexadecimal notation.

       <b>-D</b> <u>int</u><b>:</b><u>int</u><b>:</b><u>int</u><b>,</b> <b>...</b>
              A  comma  separated list of expressions of the form <b>C:H:S</b> specifying a defect at physical location
              Cylinder:Head:Sector. A Sector <b>S</b> of <b>-1</b> marks the whole track as bad.

              The number can be preceded by <b>0</b> or <b>0x</b> for octal or hexadecimal notation.

       <b>-B</b> <u>int</u><b>:</b><u>int</u><b>:</b><u>int</u><b>,</b> <b>...</b>
              A comma separated list of expressions of the from <b>C:H:B</b> specifying defects at  Cylinder:Head:Bytes
              from Index. Again, a Bytes from Index value <b>B</b> of <b>-1</b> marks the whole track as bad.

              The number can be preceded by <b>0</b> or <b>0x</b> for octal or hexadecimal notation.

       You can specify more than one of the <b>-d</b>, <b>-D</b>, <b>-B</b> options but you must stick to one defect format!

   <b>d)</b> <b>Simple</b> <b>partitioning</b>
       For your convenience, <b>scsiformat</b> allow to preset the partition table in a simple way which often suffices
       for removable medias.  This is not intended as a replacement for <b><a href="../man8/fdisk.8.html">fdisk</a></b>(8) though.

       <b>-f</b> <u>arg</u> perform  simple  partitioning.   <b>-fdos</b>  sets  up  begin  and  start  of  the partition on cylinder
              boundaries.  <b>-ftight</b> does use as much of the disk as possible (but may  confuse  OS's  other  than
              Linux).

              If  you do not specify <b>-f</b> at all, <b>scsiformat</b> will not initialise the partition table. As it has to
              tell the kernel that the disk was reformatted and the kernel will try to  to  read  the  partition
              table, you are like to get some kernel warnings then.

       <b>-G</b> <u>heads</u><b>x</b><u>sectors</u>
              set  the disk geometry (Heads x Sectors) as DOS will see it for use in the partition table. If you
              don't specify it, scsiformat will ask the kernel what it thinks DOS will  get  from  the  adapters
              BIOS. This call might fail or return bogus data though. A wrong setting will not affect linux, but
              other OS's and esp. DOS and the BIOS (for booting).

       <b>-y</b> <u>type</u>
              set the type for the partition to set.  <u>type</u> is a two digit hex number. See <b><a href="../man8/fdisk.8.html">fdisk</a></b>(8),<b>command</b> <b>t</b> <b>for</b>
              <b>a</b> <b>list.</b> <b>Defaults</b> <b>to</b> <b>83</b> (Linux native).

       <b>-M</b> <u>size</u>
              Create  a  primary  partition  number  1  of maximal size <u>size</u>MB.  When <u>size</u> is <b>0</b>, no partition is
              created, and thus the partition table is simply initialised to be valid (but empty). If  the  size
              exceeds the disk capacity, a partition as large as possible is made. Defaults to <b>99999</b>.

   <b>e)</b> <b>Miscellaneous</b>
       <b>-H</b>     print some command line help to stdout.

       <b>-v</b>     print version information.

       <b>-F</b> <u>arg</u> forced operation, do not ask prior to format.  <u>arg</u> must be <b>'Ene</b> <b>Mene</b> <b>Meck,</b> <b>und</b> <b>Du</b> <b>bist</b> <b>weg!'</b>  with
              proper spaces and capitalisation. (this is a German child rhyme kissing someone goodbye...)

       <b>-V</b>     print some debugging information.

       <b>-X</b>     all  output  is  printed in numerics, useful for GUI interfaces like <b><a href="../man8/tk_scsiformat.8.html">tk_scsiformat</a></b>(8).  Also makes
              all operations non blocking. (By forking of a child process for those scsi operations which  would
              block).

       <b>-o</b>     The  settings of the flags <b>-c</b>, <b>-p</b>, <b>-s</b>, <b>-S</b>, <b>-I</b>, <b>-L</b>, <b>-P</b> are obeyed.  If you specify one of these, <b>-o</b>
              is silently added. Without <b>-o</b> or one of these flags some factory default is used.   Specifying  <b>-o</b>
              explicitly will allow you to not use any of these options which might not be the default chosen by
              the target device otherwise.

</pre><h4><b>RETURN</b> <b>CODES</b></h4><pre>
       Apart from the codes returned by the <b>-T</b> flag, <b>scsiformat</b> will generally return 1 for system errors, 2 for
       user errors, and 0 for successful operation.

</pre><h4><b>BUGS</b></h4><pre>
       Old status files in <u><a href="file:/tmp">/tmp</a></u> will confuse the <b>-T</b> option. However, they are removed after 48 hours.

       I  was  unable  to get hold of a disk supporting querying the progress status (and which I could stand to
       lose all data on). Therefore I commented  out  the  support  for  this  from  the  source  code  using  a
       <b>BLOCKING_ONLY</b>#define.  You are welcome to try and make this work.

       Restrictions  of  the  <b>SCSI_IOCTL_SEND_COMMAND</b>  <b><a href="../man2/ioctl.2.html">ioctl</a></b>(2)  call for the <b><a href="../man4/sd.4.html">sd</a></b>(4) device make it impossible to
       issue a <b>FORMAT_UNIT</b> command with more than 4096 bytes of arguments. This could be avoided  by  using  the
       proper generic scsi device <u>/dev/sg*</u> instead, at least where the kernel is compiled to support it. Most of
       the time this is not needed though and thus I'm myself to lazy to do it.

</pre><h4><b>FILES</b></h4><pre>
       <u>/tmp/scsiformat.xx:xx:xx:xx:xxxxxxxx</u>
       <u>/dev/sd*</u>
       <u>/dev/sg*</u>

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man8/tk_scsiformat.8.html">tk_scsiformat</a></b>(8), <b><a href="../man8/scsiinfo.8.html">scsiinfo</a></b>(8), <b><a href="../man8/scsi-config.8.html">scsi-config</a></b>(8), <b><a href="../man8/fdisk.8.html">fdisk</a></b>(8), <b><a href="../man4/sd.4.html">sd</a></b>(4).

</pre><h4><b>AUTHOR</b></h4><pre>
       Michael Weller &lt;<a href="mailto:eowmob@exp-math.uni-essen.de">eowmob@exp-math.uni-essen.de</a>&gt;

scsiinfo 1.7                                     23 August 1997                                    <u><a href="../man8/scsiformat.8.html">scsiformat</a></u>(8)
</pre>
 </div>
</div></section>
</div>
</body>
</html>