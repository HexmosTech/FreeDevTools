<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>blkdeactivate — utility to deactivate block devices</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/dmsetup">dmsetup_1.02.205-2ubuntu1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       blkdeactivate — utility to deactivate block devices

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>blkdeactivate</b> [<b>-d</b> <u>dm_options</u>] [<b>-e</b>] [<b>-h</b>] [<b>-l</b> <u>lvm_options</u>] [<b>-m</b> <u>mpath_options</u>] [<b>-r</b> <u>mdraid_options</u>] [<b>-o</b>
       <u>vdo_options</u>] [<b>-u</b>] [<b>-v</b>] [<u>device</u>]

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The blkdeactivate utility deactivates block devices. For mounted block devices, it attempts to unmount it
       automatically before trying to deactivate. The utility currently supports device-mapper devices (DM), in‐
       cluding  LVM volumes and software RAID MD devices. LVM volumes are handled directly using the <b><a href="../man8/lvm.8.html">lvm</a></b>(8) com‐
       mand, the rest of device-mapper based devices are handled using the <b><a href="../man8/dmsetup.8.html">dmsetup</a></b>(8) command.  MD  devices  are
       handled using the <b><a href="../man8/mdadm.8.html">mdadm</a></b>(8) command.

</pre><h4><b>OPTIONS</b></h4><pre>
       <b>-d</b>|<b>--dmoptions</b> <u>dm_options</u>
              Comma separated list of device-mapper specific options.  Accepted <b><a href="../man8/dmsetup.8.html">dmsetup</a></b>(8) options are:

              <b>retry</b>  Retry removal several times in case of failure.

              <b>force</b>  Force device removal.

       <b>-e</b>|<b>--errors</b>
              Show  errors  reported from tools called by <b>blkdeactivate</b>. Without this option, any error messages
              from these external tools are suppressed and the <b>blkdeactivate</b> itself provides only a summary mes‐
              sage to indicate the device was skipped.

       <b>-h</b>|<b>--help</b>
              Display the help text.

       <b>-l</b>|<b>--lvmoptions</b> <u>lvm_options</u>
              Comma-separated list of LVM specific options:

              <b>retry</b>  Retry removal several times in case of failure.

              <b>wholevg</b>
                     Deactivate the whole LVM Volume Group when processing a Logical Volume.   Deactivating  the
                     Volume Group as a whole is quicker than deactivating each Logical Volume separately.

       <b>-r</b>|<b>--mdraidoptions</b> <u>mdraid_options</u>
              Comma-separated list of MD RAID specific options:

              <b>wait</b>   Wait MD device's resync, recovery or reshape action to complete before deactivation.

       <b>-m</b>|<b>--mpathoptions</b> <u>mpath_options</u>
              Comma-separated list of device-mapper multipath specific options:

              <b>disablequeueing</b>
                     Disable  queueing  on  all  multipath devices before deactivation.  This avoids a situation
                     where blkdeactivate may end up waiting if all the paths are unavailable for any  underlying
                     device-mapper multipath device.

       <b>-o</b>|<b>--vdooptions</b> <u>vdo_options</u>
              Comma-separated list of VDO specific options:

              <b>configfile</b>=<u>file</u>
                     Use specified VDO configuration file.

       <b>-u</b>|<b>--umount</b>
              Unmount  a mounted device before trying to deactivate it.  Without this option used, a device that
              is mounted is not deactivated.

       <b>-v</b>, <b>--verbose</b>
              Run in verbose mode. Use <b>-vv</b> for even more verbose mode.

</pre><h4><b>EXAMPLES</b></h4><pre>
       Deactivate all supported block devices found in the system, skipping mounted devices.
       # <b>blkdeactivate</b>

       Deactivate all supported block devices found in the system, unmounting any mounted devices first, if pos‐
       sible.
       # <b>blkdeactivate</b> <b>-u</b>

       Deactivate the device /dev/vg/lvol0 together with all its holders, unmounting any mounted devices  first,
       if possible.
       # <b>blkdeactivate</b> <b>-u</b> <b>/dev/vg/lvol0</b>

       Deactivate all supported block devices found in the system. If the deactivation of a device-mapper device
       fails, retry it. Deactivate the whole Volume Group at once when processing an LVM Logical Volume.
       # <b>blkdeactivate</b> <b>-u</b> <b>-d</b> <b>retry</b> <b>-l</b> <b>wholevg</b>

       Deactivate all supported block devices found in the system. If the deactivation of a device-mapper device
       fails, retry it and force removal.
       # <b>blkdeactivate</b> <b>-d</b> <b>force,retry</b>

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man8/dmsetup.8.html">dmsetup</a></b>(8), <b><a href="../man8/lsblk.8.html">lsblk</a></b>(8), <b><a href="../man8/lvm.8.html">lvm</a></b>(8), <b><a href="../man8/mdadm.8.html">mdadm</a></b>(8), <b><a href="../man8/multipathd.8.html">multipathd</a></b>(8), <b><a href="../man8/vdo.8.html">vdo</a></b>(8), <b><a href="../man8/umount.8.html">umount</a></b>(8)

Red Hat, Inc                            LVM TOOLS <a href="../man2/2.03.31.2.html">2.03.31</a>(2) (2025-02-27)                       <u><a href="../man8/BLKDEACTIVATE.8.html">BLKDEACTIVATE</a></u>(8)
</pre>
 </div>
</div></section>
</div>
</body>
</html>