<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>sudo, sudoedit — execute a command as another user</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/sudo-ldap">sudo-ldap_1.9.16p2-1ubuntu1.1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       sudo, sudoedit — execute a command as another user

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>sudo</b> <b>-h</b> | <b>-K</b> | <b>-k</b> | <b>-V</b>
       <b>sudo</b> <b>-v</b> [<b>-ABkNnS</b>] [<b>-g</b> <u>group</u>] [<b>-h</b> <u>host</u>] [<b>-p</b> <u>prompt</u>] [<b>-u</b> <u>user</u>]
       <b>sudo</b> <b>-l</b> [<b>-ABkNnS</b>] [<b>-g</b> <u>group</u>] [<b>-h</b> <u>host</u>] [<b>-p</b> <u>prompt</u>] [<b>-U</b> <u>user</u>] [<b>-u</b> <u>user</u>] [<u>command</u> [<u>arg</u> <u>...</u>]]
       <b>sudo</b>  [<b>-ABbEHnPS</b>]  [<b>-C</b>  <u>num</u>]  [<b>-D</b>  <u>directory</u>]  [<b>-g</b>  <u>group</u>] [<b>-h</b> <u>host</u>] [<b>-p</b> <u>prompt</u>] [<b>-R</b> <u>directory</u>] [<b>-r</b> <u>role</u>]
            [<b>-t</b> <u>type</u>] [<b>-T</b> <u>timeout</u>] [<b>-u</b> <u>user</u>] [<u>VAR</u>=<u>value</u>] [<b>-i</b> | <b>-s</b>] [<u>command</u> [<u>arg</u> <u>...</u>]]
       <b>sudoedit</b> [<b>-ABkNnS</b>] [<b>-C</b> <u>num</u>] [<b>-D</b> <u>directory</u>] [<b>-g</b> <u>group</u>] [<b>-h</b> <u>host</u>] [<b>-p</b>  <u>prompt</u>]  [<b>-R</b>  <u>directory</u>]  [<b>-r</b>  <u>role</u>]
            [<b>-t</b> <u>type</u>] [<b>-T</b> <u>timeout</u>] [<b>-u</b> <u>user</u>] <u>file</u> <u>...</u>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>sudo</b>  allows  a permitted user to execute a <u>command</u> as the superuser or another user, as specified by the
       security policy.  The invoking user's real (<u>not</u> effective) user-ID is used to  determine  the  user  name
       with which to query the security policy.

       <b>sudo</b>  supports  a  plugin  architecture for security policies, auditing, and input/output logging.  Third
       parties can develop and distribute their own plugins to work seamlessly with  the  <b>sudo</b>  front-end.   The
       default  security policy is <u>sudoers</u>, which is configured via the file <u><a href="file:/etc/sudoers">/etc/sudoers</a></u>, or via LDAP.  See the
       “Plugins” section for more information.

       The security policy determines what privileges, if any, a user has to run <b>sudo</b>.  The policy  may  require
       that   users   authenticate   themselves  with  a  password  or  another  authentication  mechanism.   If
       authentication is required, <b>sudo</b> will exit if the user's password is not entered  within  a  configurable
       time  limit.  This limit is policy-specific; the default password prompt timeout for the <u>sudoers</u> security
       policy is 0 minutes.

       Security policies may support credential caching to allow the user to run <b>sudo</b> again for a period of time
       without requiring authentication.  By default, the <u>sudoers</u> policy caches credentials  on  a  per-terminal
       basis  for  15  minutes.   See  the  <u>timestamp_type</u>  and <u>timestamp_timeout</u> options in <u><a href="../man5/sudoers.5.html">sudoers</a></u>(5) for more
       information.  By running <b>sudo</b> with the <b>-v</b> option, a  user  can  update  the  cached  credentials  without
       running a <u>command</u>.

       On  systems  where  <b>sudo</b> is the primary method of gaining superuser privileges, it is imperative to avoid
       syntax errors in the security policy configuration files.  For the default security  policy,  <u><a href="../man5/sudoers.5.html">sudoers</a></u>(5),
       changes  to  the configuration files should be made using the <u><a href="../man8/visudo.8.html">visudo</a></u>(8) utility which will ensure that no
       syntax errors are introduced.

       When invoked as <b>sudoedit</b>, the <b>-e</b> option (described below), is implied.

       Security policies and audit plugins may log successful and failed attempts to run <b>sudo</b>.  If an I/O plugin
       is configured, the running <u>command</u>'s input and output may be logged as well.

       The options are as follows:

       <b>-A</b>, <b>--askpass</b>
               Normally, if <b>sudo</b> requires a password, it will read it from  the  user's  terminal.   If  the  <b>-A</b>
               (<u>askpass</u>)  option  is  specified,  a  (possibly graphical) helper program is executed to read the
               user's password and output the password to the standard output.  If the SUDO_ASKPASS  environment
               variable  is  set,  it  specifies  the  path  to  the helper program.  Otherwise, if <u><a href="../man5/sudo.conf.5.html">sudo.conf</a></u>(5)
               contains a line specifying the askpass program, that value will be used.  For example:

                   # Path to askpass helper program
                   Path askpass /usr/bin/ssh-askpass

               If no askpass program is available, <b>sudo</b> will exit with an error.

       <b>-B</b>, <b>--bell</b>
               Ring the bell as part of the password prompt when a terminal is  present.   This  option  has  no
               effect if an askpass program is used.

       <b>-b</b>, <b>--background</b>
               Run  the  given  <u>command</u>  in  the  background.   It  is  not possible to use shell job control to
               manipulate background processes started by <b>sudo</b>.  Most interactive <u>command</u>s  will  fail  to  work
               properly in background mode.

       <b>-C</b> <u>num</u>, <b>--close-from</b>=<u>num</u>
               Close  all file descriptors greater than or equal to <u>num</u> before executing a <u>command</u>.  Values less
               than three are not permitted.  By default, <b>sudo</b> will close all open file descriptors  other  than
               standard  input,  standard  output,  and  standard  error when executing a <u>command</u>.  The security
               policy may restrict the user's ability to use this option.  The <u>sudoers</u> policy only  permits  use
               of the <b>-C</b> option when the administrator has enabled the <u>closefrom_override</u> option.

       <b>-D</b> <u>directory</u>, <b>--chdir</b>=<u>directory</u>
               Run  the  <u>command</u>  in  the  specified  <u>directory</u>  instead  of the current working directory.  The
               security policy may return an error if the user does not have permission to specify  the  working
               directory.

       <b>-E</b>, <b>--preserve-env</b>
               Indicates  to  the  security  policy  that the user wishes to preserve their existing environment
               variables.  The security policy may return an error if the  user  does  not  have  permission  to
               preserve the environment.

       <b>--preserve-env=list</b>
               Indicates  to  the  security  policy  that  the  user  wishes  to add the comma-separated list of
               environment variables to those preserved from the user's environment.  The  security  policy  may
               return  an  error  if the user does not have permission to preserve the environment.  This option
               may be specified multiple times.

       <b>-e</b>, <b>--edit</b>
               Edit one or more <u>file</u>s instead of running a  <u>command</u>.   In  lieu  of  a  path  name,  the  string
               "sudoedit" is used when consulting the security policy.  If the user is authorized by the policy,
               the following steps are taken:

               1.   Temporary copies are made of the files to be edited with the owner set to the invoking user.

               2.   The  editor  specified by the policy is run to edit the temporary files.  The <u>sudoers</u> policy
                    uses the SUDO_EDITOR, VISUAL and EDITOR environment variables (in that order).  If  none  of
                    SUDO_EDITOR,  VISUAL  or  EDITOR  are set, the first program listed in the <u>editor</u> <u><a href="../man5/sudoers.5.html">sudoers</a></u>(5)
                    option is used.

               3.   If they have been modified, the temporary files are copied back to their  original  location
                    and the temporary versions are removed.

               To help prevent the editing of unauthorized files, the following restrictions are enforced unless
               explicitly allowed by the security policy:

                <b>•</b>  Symbolic links may not be edited (version 1.8.15 and higher).

                <b>•</b>  Symbolic  links  along  the  path  to be edited are not followed when the parent directory is
                   writable by the invoking user unless that user is root (version 1.8.16 and higher).

                <b>•</b>  Files located in a directory that is writable by the invoking user may not be  edited  unless
                   that user is root (version 1.8.16 and higher).

               Users are never allowed to edit device special files.

               If  the specified file does not exist, it will be created.  Unlike most <u>command</u>s run by <u>sudo</u>, the
               editor is run with the invoking user's environment unmodified.  If  the  temporary  file  becomes
               empty after editing, the user will be prompted before it is installed.  If, for some reason, <b>sudo</b>
               is  unable  to  update  a  file  with its edited version, the user will receive a warning and the
               edited copy will remain in a temporary file.

       <b>-g</b> <u>group</u>, <b>--group</b>=<u>group</u>
               Run the <u>command</u> with the primary group set to <u>group</u> instead of the primary group specified by the
               target user's password database entry.  The <u>group</u> may be either a group name or a numeric  group-
               ID  (GID)  prefixed  with  the ‘#’ character (e.g., ‘#0’ for GID 0).  When running a <u>command</u> as a
               GID, many shells require that the ‘#’ be escaped with a backslash (‘\’).   If  no  <b>-u</b>  option  is
               specified,  the <u>command</u> will be run as the invoking user.  In either case, the primary group will
               be set to <u>group</u>.  The <u>sudoers</u> policy permits any of the target user's groups to be specified  via
               the <b>-g</b> option as long as the <b>-P</b> option is not in use.

       <b>-H</b>, <b>--set-home</b>
               Request  that  the  security  policy  set  the  HOME  environment  variable to the home directory
               specified by the target user's password database entry.  Depending on the policy, this may be the
               default behavior.

       <b>-h</b>, <b>--help</b>
               Display a short help message to the standard output and exit.

       <b>-h</b> <u>host</u>, <b>--host</b>=<u>host</u>
               Run the <u>command</u> on the specified <u>host</u> if the security policy plugin supports remote <u>command</u>s. The
               <u>sudoers</u> plugin does not currently support running remote <u>command</u>s.  This  may  also  be  used  in
               conjunction with the <b>-l</b> option to list a user's privileges for the remote host.

       <b>-i</b>, <b>--login</b>
               Run  the  shell  specified  by  the target user's password database entry as a login shell.  This
               means that login-specific resource files such as <u>.profile</u>, <u>.bash_profile</u>, or <u>.login</u> will be  read
               by the shell.  If a <u>command</u> is specified, it is passed to the shell as a simple <u>command</u> using the
               <b>-c</b>  option.   The <u>command</u> and any <u>arg</u>s are concatenated, separated by spaces, after escaping each
               character (including white space) with a backslash (‘\’) except for  alphanumerics,  underscores,
               hyphens,  and  dollar signs.  If no <u>command</u> is specified, an interactive shell is executed.  <b>sudo</b>
               attempts to change to that user's home directory before running the shell.  The  <u>command</u>  is  run
               with  an  environment  similar  to  the  one  a user would receive at log in.  Most shells behave
               differently when a <u>command</u> is specified as  compared  to  an  interactive  session;  consult  the
               shell's  manual  for details.  The <u>Command</u> <u>environment</u> section in the <u><a href="../man5/sudoers.5.html">sudoers</a></u>(5) manual documents
               how the <b>-i</b> option affects the environment in which a <u>command</u> is run when the <u>sudoers</u> policy is in
               use.

       <b>-K</b>, <b>--remove-timestamp</b>
               Similar to the <b>-k</b> option, except that it removes every cached credential for the user, regardless
               of the terminal or parent process ID.  The next time <b>sudo</b> is run, a password must be  entered  if
               the  security  policy  requires  authentication.   It  is  not  possible  to use the <b>-K</b> option in
               conjunction with a <u>command</u> or other option.  This option does not require a  password.   Not  all
               security policies support credential caching.

       <b>-k</b>, <b>--reset-timestamp</b>
               When  used  without a <u>command</u>, invalidates the user's cached credentials for the current session.
               The next time <b>sudo</b> is run in the session, a password must  be  entered  if  the  security  policy
               requires authentication.  By default, the <b>sudoers</b> policy uses a separate record in the credential
               cache  for  each terminal (or parent process ID if no terminal is present).  This prevents the <b>-k</b>
               option from interfering with <b>sudo</b>  commands  run  in  a  different  terminal  session.   See  the
               <u>timestamp_type</u>  option  in  <u><a href="../man5/sudoers.5.html">sudoers</a></u>(5)  for  more  information.   This  option does not require a
               password, and was added to allow a user to revoke <b>sudo</b> permissions from a <u>.logout</u> file.

               When used in conjunction with a <u>command</u> or an option that may require  a  password,  this  option
               will  cause  <b>sudo</b>  to  ignore the user's cached credentials.  As a result, <b>sudo</b> will prompt for a
               password (if one is required by the security policy)  and  will  not  update  the  user's  cached
               credentials.

               Not all security policies support credential caching.

       <b>-l</b>, <b>--list</b>
               If  no  <u>command</u> is specified, list the privileges for the invoking user (or the <u>user</u> specified by
               the <b>-U</b> option) on the current host.  A longer list format is used if  this  option  is  specified
               multiple times and the security policy supports a verbose output format.

               If  a <u>command</u> is specified and is permitted by the security policy for the invoking user (or the,
               <u>user</u> specified by the <b>-U</b> option) on the current host, the fully-qualified path to the <u>command</u>  is
               displayed  along  with  any  <u>arg</u>s.  If  <b>-l</b>  is  specified more than once (and the security policy
               supports it), the matching rule is displayed in a verbose format along with the  <u>command</u>.   If  a
               <u>command</u> is specified but not allowed by the policy, <b>sudo</b> will exit with a status value of 1.

       <b>-N</b>, <b>--no-update</b>
               Do not update the user's cached credentials, even if the user successfully authenticates.  Unlike
               the  <b>-k</b>  flag, existing cached credentials are used if they are valid.  To detect when the user's
               cached credentials are valid (or when no authentication is required), the following can be used:

                   sudo -Nnv

               Not all security policies support credential caching.

       <b>-n</b>, <b>--non-interactive</b>
               Avoid prompting the user for input of any kind.  If a password is required  for  the  <u>command</u>  to
               run, <b>sudo</b> will display an error message and exit.

       <b>-P</b>, <b>--preserve-groups</b>
               Preserve  the  invoking  user's  group  vector  unaltered.   By  default, the <u>sudoers</u> policy will
               initialize the group vector to the list of groups the target user is a member of.  The  real  and
               effective group-IDs, however, are still set to match the target user.

       <b>-p</b> <u>prompt</u>, <b>--prompt</b>=<u>prompt</u>
               Use  a custom password prompt with optional escape sequences.  The following percent (‘%’) escape
               sequences are supported by the <u>sudoers</u> policy:

               %H  expanded to the host name including the domain name (only if the machine's host name is fully
                   qualified or the <u>fqdn</u> option is set in <u><a href="../man5/sudoers.5.html">sudoers</a></u>(5))

               %h  expanded to the local host name without the domain name

               %p  expanded to the name of the user whose password is  being  requested  (respects  the  <u>rootpw</u>,
                   <u>targetpw</u>, and <u>runaspw</u> flags in <u><a href="../man5/sudoers.5.html">sudoers</a></u>(5))

               %U  expanded  to  the  login name of the user the <u>command</u> will be run as (defaults to root unless
                   the <b>-u</b> option is also specified)

               %u  expanded to the invoking user's login name

               %%  two consecutive ‘%’ characters are collapsed into a single ‘%’ character

               The custom prompt will override the default prompt specified by either the security policy or the
               SUDO_PROMPT environment variable.  On systems that use PAM, the custom prompt will also  override
               the prompt specified by a PAM module unless the <u>passprompt_override</u> flag is disabled in <u>sudoers</u>.

       <b>-R</b> <u>directory</u>, <b>--chroot</b>=<u>directory</u>
               Change  to the specified root <u>directory</u> (see <u><a href="../man8/chroot.8.html">chroot</a></u>(8)) before running the <u>command</u>.  The security
               policy may return an error if the user does not have permission to specify the root directory.

       <b>-r</b> <u>role</u>, <b>--role</b>=<u>role</u>
               Run the <u>command</u> with an SELinux security context that includes the specified <u>role</u>.

       <b>-S</b>, <b>--stdin</b>
               Write the prompt to the standard error and read the password from the standard input  instead  of
               using the terminal device.

       <b>-s</b>, <b>--shell</b>
               Run  the shell specified by the SHELL environment variable if it is set or the shell specified by
               the invoking user's password database entry.  If a <u>command</u> is specified,  it  is  passed  to  the
               shell  as  a  simple  command  using  the  <b>-c</b> option.  The <u>command</u> and any <u>arg</u>s are concatenated,
               separated by spaces, after escaping each character (including white space) with a backslash (‘\’)
               except for alphanumerics, underscores, hyphens, and dollar signs.  If no <u>command</u> is specified, an
               interactive shell is executed.  Most shells behave differently when a  <u>command</u>  is  specified  as
               compared to an interactive session; consult the shell's manual for details.

       <b>-t</b> <u>type</u>, <b>--type</b>=<u>type</u>
               Run the <u>command</u> with an SELinux security context that includes the specified <u>type</u>.  If no <u>type</u> is
               specified, the default type is derived from the role.

       <b>-U</b> <u>user</u>, <b>--other-user</b>=<u>user</u>
               Used  in  conjunction  with  the  <b>-l</b>  option  to  list the privileges for <u>user</u> instead of for the
               invoking user.  The security policy may restrict listing other users' privileges.  When using the
               <u>sudoers</u> policy, the <b>-U</b> option is restricted to the root user and users  with  either  the  “list”
               priviege  for the specified <u>user</u> or the ability to run any <u>command</u> as root or <u>user</u> on the current
               host.

       <b>-T</b> <u>timeout</u>, <b>--command-timeout</b>=<u>timeout</u>
               Used to set a timeout for the <u>command</u>.  If the timeout expires before the <u>command</u> has exited, the
               <u>command</u> will be terminated.  The security policy may restrict the user's ability to set timeouts.
               The <u>sudoers</u> policy requires that user-specified timeouts be explicitly enabled.

       <b>-u</b> <u>user</u>, <b>--user</b>=<u>user</u>
               Run the <u>command</u> as a user other than the default target user (usually <b>root</b>).   The  <u>user</u>  may  be
               either a user name or a numeric user-ID (UID) prefixed with the ‘#’ character (e.g., ‘#0’ for UID
               0).  When running <u>command</u>s as a UID, many shells require that the ‘#’ be escaped with a backslash
               (‘\’).   Some  security policies may restrict UIDs to those listed in the password database.  The
               <u>sudoers</u> policy allows UIDs that are not in the password database as long as the  <u>targetpw</u>  option
               is not set.  Other security policies may not support this.

       <b>-V</b>, <b>--version</b>
               Print  the  <b>sudo</b>  version string as well as the version string of any configured plugins.  If the
               invoking user is already root, the <b>-V</b> option will display the options passed  to  configure  when
               <b>sudo</b> was built; plugins may display additional information such as default options.

       <b>-v</b>, <b>--validate</b>
               Update  the  user's  cached  credentials,  authenticating the user if necessary.  For the <u>sudoers</u>
               plugin, this extends the <b>sudo</b> timeout for another 15 minutes by  default,  but  does  not  run  a
               <u>command</u>.  Not all security policies support cached credentials.

       <b>--</b>      The  <b>--</b>  is  used  to  delimit the end of the <b>sudo</b> options.  Subsequent options are passed to the
               <u>command</u>.

       Options that take a value may only be specified once unless otherwise indicated in the description.  This
       is to help guard against problems caused by poorly written scripts that invoke <b>sudo</b> with  user-controlled
       input.

       Environment  variables  to  be  set  for  the  <u>command</u>  may also be passed as options to <b>sudo</b> in the form
       <u>VAR</u>=<u>value</u>, for example LD_LIBRARY_PATH=<u>/usr/local/pkg/lib</u>.   Environment  variables  may  be  subject  to
       restrictions  imposed  by  the security policy plugin.  The <u>sudoers</u> policy subjects environment variables
       passed as options to  the  same  restrictions  as  existing  environment  variables  with  one  important
       difference.   If the <u>setenv</u> option is set in <u>sudoers</u>, the <u>command</u> to be run has the SETENV tag set or the
       <u>command</u> matched is <b>ALL</b>, the user may set variables that would otherwise be forbidden.  See <u><a href="../man5/sudoers.5.html">sudoers</a></u>(5) for
       more information.

</pre><h4><b>COMMAND</b> <b>EXECUTION</b></h4><pre>
       When <b>sudo</b> executes a <u>command</u>, the security policy specifies the execution environment  for  the  <u>command</u>.
       Typically,  the  real  and effective user and group and IDs are set to match those of the target user, as
       specified in the password database, and the group vector is  initialized  based  on  the  group  database
       (unless the <b>-P</b> option was specified).

       The following parameters may be specified by security policy:

       <b>•</b>  real and effective user-ID

       <b>•</b>  real and effective group-ID

       <b>•</b>  supplementary group-IDs

       <b>•</b>  the environment list

       <b>•</b>  current working directory

       <b>•</b>  file creation mode mask (umask)

       <b>•</b>  SELinux role and type

       <b>•</b>  scheduling priority (aka nice value)

   <b>Process</b> <b>model</b>
       There are two distinct ways <b>sudo</b> can run a <u>command</u>.

       If an I/O logging plugin is configured to log terminal I/O, or if the security policy explicitly requests
       it,  a  new  pseudo-terminal  (“pty”)  is  allocated and <u><a href="../man2/fork.2.html">fork</a></u>(2) is used to create a second <b>sudo</b> process,
       referred to as the <u>monitor</u>.  The <u>monitor</u> creates a new terminal session with itself as the leader and the
       pty as its controlling terminal, calls <u><a href="../man2/fork.2.html">fork</a></u>(2) again, sets up  the  execution  environment  as  described
       above,  and  then  uses  the  <u><a href="../man2/execve.2.html">execve</a></u>(2) system call to run the <u>command</u> in the child process.  The <u>monitor</u>
       exists to relay job control signals between the user's terminal and the pty the <u>command</u> is being run  in.
       This  makes  it  possible  to  suspend and resume the <u>command</u> normally.  Without the <u>monitor</u>, the <u>command</u>
       would be in what POSIX terms an “orphaned process group” and it would not receive any job control signals
       from the kernel.  When the <u>command</u> exits or is terminated by a signal, the <u>monitor</u> passes  the  <u>command</u>'s
       exit status to the main <b>sudo</b> process and exits.  After receiving the <u>command</u>'s exit status, the main <b>sudo</b>
       process  passes  the  <u>command</u>'s exit status to the security policy's close function, as well as the close
       function of any configured audit plugin, and exits.  This mode is the default for  sudo  versions  1.9.14
       and above when using the sudoers policy.

       If no pty is used, <b>sudo</b> calls <u><a href="../man2/fork.2.html">fork</a></u>(2), sets up the execution environment as described above, and uses the
       <u><a href="../man2/execve.2.html">execve</a></u>(2)  system  call  to  run the <u>command</u> in the child process.  The main <b>sudo</b> process waits until the
       <u>command</u> has completed, then passes the <u>command</u>'s exit status to the security policy's close function,  as
       well  as the close function of any configured audit plugins, and exits.  As a special case, if the policy
       plugin does not define a close function, <b>sudo</b> will  execute  the  <u>command</u>  directly  instead  of  calling
       <u><a href="../man2/fork.2.html">fork</a></u>(2)  first.  The <u>sudoers</u> policy plugin will only define a close function when I/O logging is enabled,
       a pty is required, an SELinux  role  is  specified,  the  <u>command</u>  has  an  associated  timeout,  or  the
       <u>pam_session</u>  or <u>pam_setcred</u> options are enabled.  Both <u>pam_session</u> and <u>pam_setcred</u> are enabled by default
       on systems using PAM.  This mode is the default for sudo versions prior to 1.9.14 when using the  sudoers
       policy.

       On systems that use PAM, the security policy's close function is responsible for closing the PAM session.
       It may also log the <u>command</u>'s exit status.

   <b>Signal</b> <b>handling</b>
       When  the  <u>command</u>  is  run  as  a  child of the <b>sudo</b> process, <b>sudo</b> will relay signals it receives to the
       <u>command</u>.  The SIGINT and SIGQUIT signals are only relayed when the <u>command</u> is being run in a new  pty  or
       when  the  signal  was  sent by a user process, not the kernel.  This prevents the <u>command</u> from receiving
       SIGINT twice each time the user enters control-C.  Some signals, such as SIGSTOP and SIGKILL,  cannot  be
       caught and thus will not be relayed to the <u>command</u>.  As a general rule, SIGTSTP should be used instead of
       SIGSTOP when you wish to suspend a <u>command</u> being run by <b>sudo</b>.

       As  a  special  case,  <b>sudo</b>  will  not  relay  signals that were sent by the <u>command</u> it is running.  This
       prevents the <u>command</u> from accidentally killing itself.  On some  systems,  the  <u><a href="../man8/reboot.8.html">reboot</a></u>(8)  utility  sends
       SIGTERM  to  all  non-system processes other than itself before rebooting the system.  This prevents <b>sudo</b>
       from relaying the SIGTERM signal it received back to <u><a href="../man8/reboot.8.html">reboot</a></u>(8), which might then exit before  the  system
       was  actually rebooted, leaving it in a half-dead state similar to single user mode.  Note, however, that
       this check only applies to the <u>command</u> run by <b>sudo</b> and not any  other  processes  that  the  <u>command</u>  may
       create.   As a result, running a script that calls <u><a href="../man8/reboot.8.html">reboot</a></u>(8) or <u><a href="../man8/shutdown.8.html">shutdown</a></u>(8) via <b>sudo</b> may cause the system
       to end up in this undefined state unless the <u><a href="../man8/reboot.8.html">reboot</a></u>(8) or <u><a href="../man8/shutdown.8.html">shutdown</a></u>(8) are run using the <b>exec</b>() family  of
       functions instead of <b>system</b>() (which interposes a shell between the <u>command</u> and the calling process).

   <b>Plugins</b>
       Plugins  may  be specified via <u>Plugin</u> directives in the <u><a href="../man5/sudo.conf.5.html">sudo.conf</a></u>(5) file.  They may be loaded as dynamic
       shared objects (on systems that support them),  or  compiled  directly  into  the  <b>sudo</b>  binary.   If  no
       <u><a href="../man5/sudo.conf.5.html">sudo.conf</a></u>(5) file is present, or if it doesn't contain any <u>Plugin</u> lines, <b>sudo</b> will use <u><a href="../man5/sudoers.5.html">sudoers</a></u>(5) for the
       policy, auditing, and I/O logging plugins.  See the <u><a href="../man5/sudo.conf.5.html">sudo.conf</a></u>(5) manual for details of the <u><a href="file:/etc/sudo.conf">/etc/sudo.conf</a></u>
       file and the <u><a href="../man5/sudo_plugin.5.html">sudo_plugin</a></u>(5) manual for more information about the <b>sudo</b> plugin architecture.

</pre><h4><b>EXIT</b> <b>VALUE</b></h4><pre>
       Upon  successful execution of a <u>command</u>, the exit status from <b>sudo</b> will be the exit status of the program
       that was executed.  If the <u>command</u> terminated due to receipt of a signal, <b>sudo</b> will send itself the  same
       signal that terminated the <u>command</u>.

       If the <b>-l</b> option was specified without a <u>command</u>, <b>sudo</b> will exit with a value of 0 if the user is allowed
       to  run  <b>sudo</b>  and they authenticated successfully (as required by the security policy).  If a <u>command</u> is
       specified with the <b>-l</b> option, the exit value will only be 0 if the <u>command</u> is permitted by  the  security
       policy, otherwise it will be 1.

       If there is an authentication failure, a configuration/permission problem, or if the given <u>command</u> cannot
       be  executed,  <b>sudo</b>  exits  with  a  value  of 1.  In the latter case, the error string is printed to the
       standard error.  If <b>sudo</b> cannot <u><a href="../man2/stat.2.html">stat</a></u>(2) one or more entries in the user's PATH, an error  is  printed  to
       the  standard  error.   (If the directory does not exist or if it is not really a directory, the entry is
       ignored and no error is printed.)  This should not happen under normal circumstances.   The  most  common
       reason  for  <u><a href="../man2/stat.2.html">stat</a></u>(2)  to  return  “permission denied” is if you are running an automounter and one of the
       directories in your PATH is on a machine that is currently unreachable.

</pre><h4><b>SECURITY</b> <b>NOTES</b></h4><pre>
       <b>sudo</b> tries to be safe when executing external <u>command</u>s.

       To prevent command spoofing, <b>sudo</b> checks "." and "" (both denoting current directory) last when searching
       for a <u>command</u> in the user's PATH (if one or both are in the PATH).  Depending on the security policy, the
       user's PATH environment variable may be modified, replaced, or passed unchanged to the program that  <b>sudo</b>
       executes.

       Users  should  <u>never</u>  be  granted  <b>sudo</b> privileges to execute files that are writable by the user or that
       reside in a directory that is writable by the user.  If the user can modify or replace the <u>command</u>  there
       is no way to limit what additional <u>command</u>s they can run.

       By  default,  <b>sudo</b>  will only log the <u>command</u> it explicitly runs.  If a user runs a <u>command</u> such as ‘sudo
       su’ or ‘sudo sh’, subsequent <u>command</u>s run from that shell are not subject to <b>sudo</b>'s security policy.  The
       same is true for <u>command</u>s that offer shell escapes (including most editors).  If I/O logging is  enabled,
       subsequent  <u>command</u>s  will  have their input and/or output logged, but there will not be traditional logs
       for those <u>command</u>s. Because of this, care must be taken when giving users access to <u>command</u>s via <b>sudo</b>  to
       verify that the <u>command</u> does not inadvertently give the user an effective root shell.  For information on
       ways to address this, see the <u>Preventing</u> <u>shell</u> <u>escapes</u> section in <u><a href="../man5/sudoers.5.html">sudoers</a></u>(5).

       To prevent the disclosure of potentially sensitive information, <b>sudo</b> disables core dumps by default while
       it is executing (they are re-enabled for the <u>command</u> that is run).  This historical practice dates from a
       time  when  most  operating  systems  allowed  set-user-ID  processes to dump core by default.  To aid in
       debugging <b>sudo</b> crashes, you may wish to re-enable core dumps by setting “disable_coredump”  to  false  in
       the <u><a href="../man5/sudo.conf.5.html">sudo.conf</a></u>(5) file as follows:

           Set disable_coredump false

       See the <u><a href="../man5/sudo.conf.5.html">sudo.conf</a></u>(5) manual for more information.

</pre><h4><b>ENVIRONMENT</b></h4><pre>
       <b>sudo</b>  utilizes  the  following  environment  variables.   The security policy has control over the actual
       content of the <u>command</u>'s environment.

       EDITOR           Default editor to use in <b>-e</b> (sudoedit) mode if neither SUDO_EDITOR nor VISUAL is set.

       MAIL             Set to the mail spool of the target user when  the  <b>-i</b>  option  is  specified,  or  when
                        <u>env_reset</u> is enabled in <u>sudoers</u> (unless MAIL is present in the <u>env_keep</u> list).

       HOME             Set  to  the  home directory of the target user when the <b>-i</b> or <b>-H</b> options are specified,
                        when the <b>-s</b> option is specified and <u>set_home</u> is set in <u>sudoers</u>, when <u>always_set_home</u>  is
                        enabled  in  <u>sudoers</u>, or when <u>env_reset</u> is enabled in <u>sudoers</u> and HOME is not present in
                        the <u>env_keep</u> list.

       LOGNAME          Set to the login name of the target user when the  <b>-i</b>  option  is  specified,  when  the
                        <u>set_logname</u>  option  is  enabled  in <u>sudoers</u>, or when the <u>env_reset</u> option is enabled in
                        <u>sudoers</u> (unless LOGNAME is present in the <u>env_keep</u> list).

       PATH             May be overridden by the security policy.

       SHELL            Used to determine shell to run with <b>-s</b> option.

       SUDO_ASKPASS     Specifies the path to a helper program used to read  the  password  if  no  terminal  is
                        available or if the <b>-A</b> option is specified.

       SUDO_COMMAND     Set  to  the  <u>command</u>  run  by  sudo, including any <u>arg</u>s. The <u>arg</u>s are truncated at 4096
                        characters to prevent a potential execution error.

       SUDO_EDITOR      Default editor to use in <b>-e</b> (sudoedit) mode.

       SUDO_GID         Set to the group-ID of the user who invoked sudo.

       SUDO_HOME        Set to the home directory of the user who invoked sudo.

       SUDO_PROMPT      Used as the default password prompt unless the <b>-p</b> option was specified.

       SUDO_PS1         If set, PS1 will be set to its value for the program being run.

       SUDO_UID         Set to the user-ID of the user who invoked sudo.

       SUDO_USER        Set to the login name of the user who invoked sudo.

       USER             Set to the same value as LOGNAME, described above.

       VISUAL           Default editor to use in <b>-e</b> (sudoedit) mode if SUDO_EDITOR is not set.

</pre><h4><b>FILES</b></h4><pre>
       <u><a href="file:/etc/sudo.conf">/etc/sudo.conf</a></u>            <b>sudo</b> front-end configuration

</pre><h4><b>EXAMPLES</b></h4><pre>
       The following examples assume a properly configured security policy.

       To get a file listing of an unreadable directory:

           $ sudo ls /usr/local/protected

       To list the home directory of user yaz on a machine where the file system holding ~yaz is not exported as
       root:

           $ sudo -u yaz ls ~yaz

       To edit the <u>index.html</u> file as user www:

           $ sudoedit -u www ~www/htdocs/index.html

       To view system logs only accessible to root and users in the adm group:

           $ sudo -g adm more <a href="file:/var/log/syslog">/var/log/syslog</a>

       To run an editor as jim with a different primary group:

           $ sudoedit -u jim -g audio ~jim/sound.txt

       To shut down a machine:

           $ sudo shutdown -r +15 "quick reboot"

       To make a usage listing of the directories in the <a href="file:/home">/home</a> partition.  The <u>commands</u> are run in  a  sub-shell
       to allow the ‘cd’ command and file redirection to work.

           $ sudo sh -c "cd <a href="file:/home">/home</a> ; du -s * | sort -rn &gt; USAGE"

</pre><h4><b>DIAGNOSTICS</b></h4><pre>
       Error messages produced by <b>sudo</b> include:

       <b>editing</b> <b>files</b> <b>in</b> <b>a</b> <b>writable</b> <b>directory</b> <b>is</b> <b>not</b> <b>permitted</b>
             By default, <b>sudoedit</b> does not permit editing a file when any of the parent directories are writable
             by  the  invoking  user.   This  avoids  a race condition that could allow the user to overwrite an
             arbitrary file.  See the <u>sudoedit_checkdir</u> option in <u><a href="../man5/sudoers.5.html">sudoers</a></u>(5) for more information.

       <b>editing</b> <b>symbolic</b> <b>links</b> <b>is</b> <b>not</b> <b>permitted</b>
             By default, <b>sudoedit</b> does not follow symbolic links when opening files.   See  the  <u>sudoedit_follow</u>
             option in <u><a href="../man5/sudoers.5.html">sudoers</a></u>(5) for more information.

       <b>effective</b> <b>uid</b> <b>is</b> <b>not</b> <b>0,</b> <b>is</b> <b>sudo</b> <b>installed</b> <b>setuid</b> <b>root?</b>
             <b>sudo</b> was not run with root privileges.  The <b>sudo</b> binary must be owned by the root user and have the
             set-user-ID  bit  set.   Also,  it  must  not be located on a file system mounted with the ‘nosuid’
             option or on an NFS file system that maps uid 0 to an unprivileged uid.

       <b>effective</b> <b>uid</b> <b>is</b> <b>not</b> <b>0,</b> <b>is</b> <b>sudo</b> <b>on</b> <b>a</b> <b>file</b> <b>system</b> <b>with</b> <b>the</b> <b>'nosuid'</b> <b>option</b>  <b>set</b>  <b>or</b>  <b>an</b>  <b>NFS</b>  <b>file</b>  <b>system</b>
             <b>without</b> <b>root</b> <b>privileges?</b>
             <b>sudo</b> was not run with root privileges.  The <b>sudo</b> binary has the proper owner and permissions but it
             still  did  not  run with root privileges.  The most common reason for this is that the file system
             the <b>sudo</b> binary is located on is mounted with the ‘nosuid’ option or it is an NFS file system  that
             maps uid 0 to an unprivileged uid.

       <b>fatal</b> <b>error,</b> <b>unable</b> <b>to</b> <b>load</b> <b>plugins</b>
             An error occurred while loading or initializing the plugins specified in <u><a href="../man5/sudo.conf.5.html">sudo.conf</a></u>(5).

       <b>invalid</b> <b>environment</b> <b>variable</b> <b>name</b>
             One  or  more environment variable names specified via the <b>-E</b> option contained an equal sign (‘=’).
             The arguments to the <b>-E</b> option should be environment variable names without an associated value.

       <b>no</b> <b>password</b> <b>was</b> <b>provided</b>
             When <b>sudo</b> tried to read the password, it did not receive any characters.  This  may  happen  if  no
             terminal  is  available  (or the <b>-S</b> option is specified) and the standard input has been redirected
             from <u>/dev/null</u>.

       <b>a</b> <b>terminal</b> <b>is</b> <b>required</b> <b>to</b> <b>read</b> <b>the</b> <b>password</b>
             <b>sudo</b> needs to read the password but there is no mechanism available for it to do so.  A terminal is
             not present to read the password from, <b>sudo</b> has not been  configured  to  read  from  the  standard
             input,  the  <b>-S</b>  option  was  not  used,  and  no  askpass helper has been specified either via the
             <u><a href="../man5/sudo.conf.5.html">sudo.conf</a></u>(5) file or the SUDO_ASKPASS environment variable.

       <b>no</b> <b>writable</b> <b>temporary</b> <b>directory</b> <b>found</b>
             <b>sudoedit</b> was unable to find a usable temporary directory in which to store its intermediate files.

       <b>The</b> “no new privileges” flag is set, which prevents sudo from running as root.
             <b>sudo</b> was run by a process that has the Linux “no new privileges” flag is set.  This causes the set-
             user-ID bit to be ignored when running an executable, which will  prevent  <b>sudo</b>  from  functioning.
             The  most  likely cause for this is running <b>sudo</b> within a container that sets this flag.  Check the
             documentation to see if it is possible to configure the container such that the flag is not set.

       <b>sudo</b> <b>must</b> <b>be</b> <b>owned</b> <b>by</b> <b>uid</b> <b>0</b> <b>and</b> <b>have</b> <b>the</b> <b>setuid</b> <b>bit</b> <b>set</b>
             <b>sudo</b> was not run with root privileges.  The  <b>sudo</b>  binary  does  not  have  the  correct  owner  or
             permissions.  It must be owned by the root user and have the set-user-ID bit set.

       <b>sudoedit</b> <b>is</b> <b>not</b> <b>supported</b> <b>on</b> <b>this</b> <b>platform</b>
             It is only possible to run <b>sudoedit</b> on systems that support setting the effective user-ID.

       <b>timed</b> <b>out</b> <b>reading</b> <b>password</b>
             The user did not enter a password before the password timeout (5 minutes by default) expired.

       <b>you</b> <b>do</b> <b>not</b> <b>exist</b> <b>in</b> <b>the</b> <b>passwd</b> <b>database</b>
             Your user-ID does not appear in the system passwd database.

       <b>you</b> <b>may</b> <b>not</b> <b>specify</b> <b>environment</b> <b>variables</b> <b>in</b> <b>edit</b> <b>mode</b>
             It  is only possible to specify environment variables when running a <u>command</u>.  When editing a file,
             the editor is run with the user's environment unmodified.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <u><a href="../man1/su.1.html">su</a></u>(1), <u><a href="../man2/stat.2.html">stat</a></u>(2), <u><a href="../man3/login_cap.3.html">login_cap</a></u>(3), <u><a href="../man5/passwd.5.html">passwd</a></u>(5), <u><a href="../man5/sudo.conf.5.html">sudo.conf</a></u>(5), <u><a href="../man5/sudo_plugin.5.html">sudo_plugin</a></u>(5), <u><a href="../man5/sudoers.5.html">sudoers</a></u>(5),  <u><a href="../man5/sudoers_timestamp.5.html">sudoers_timestamp</a></u>(5),
       <u><a href="../man8/sudoreplay.8.html">sudoreplay</a></u>(8), <u><a href="../man8/visudo.8.html">visudo</a></u>(8)

</pre><h4><b>HISTORY</b></h4><pre>
       See the HISTORY.md file in the <b>sudo</b> distribution (https://www.sudo.ws/about/history/) for a brief history
       of sudo.

</pre><h4><b>AUTHORS</b></h4><pre>
       Many people have worked on <b>sudo</b> over the years; this version consists of code written primarily by:

             Todd C. Miller

       See  the  CONTRIBUTORS.md  file in the <b>sudo</b> distribution (https://www.sudo.ws/about/contributors/) for an
       exhaustive list of people who have contributed to <b>sudo</b>.

</pre><h4><b>CAVEATS</b></h4><pre>
       There is no easy way to prevent a user from gaining a root shell if that user is allowed to run arbitrary
       <u>commands</u> via <b>sudo</b>.  Also, many programs (such as editors) allow  the  user  to  run  <u>command</u>s  via  shell
       escapes,  thus  avoiding <b>sudo</b>'s checks.  However, on most systems it is possible to prevent shell escapes
       with the <u><a href="../man5/sudoers.5.html">sudoers</a></u>(5) plugin's <u>noexec</u> functionality.

       It is not meaningful to run the ‘cd’ <u>command</u> directly via sudo, e.g.,

           $ sudo cd /usr/local/protected

       since when the <u>command</u> exits the parent process (your shell) will still be the same.  The <b>-D</b>  option  can
       be used to run a <u>command</u> in a specific <u>directory</u>.

       Running shell scripts via <b>sudo</b> can expose the same kernel bugs that make set-user-ID shell scripts unsafe
       on  some  operating systems (if your OS has a <a href="file:/dev/fd/">/dev/fd/</a> directory, set-user-ID shell scripts are generally
       safe).

</pre><h4><b>BUGS</b></h4><pre>
       If you believe you have found a bug in <b>sudo</b>, you can either file a bug report in the sudo  bug  database,
       https://bugzilla.sudo.ws/, or open an issue at https://github.com/sudo-project/sudo/issues.  If you would
       prefer    to    use    email,    messages    may    be   sent   to   the   sudo-workers   mailing   list,
       https://www.sudo.ws/mailman/listinfo/sudo-workers (public) or &lt;<a href="mailto:sudo@sudo.ws">sudo@sudo.ws</a>&gt; (private).

       Please not report security vulnerabilities through public  GitHub  issues,  Bugzilla  or  mailing  lists.
       Instead,  report  them  via email to &lt;<a href="mailto:Todd.Miller@sudo.ws">Todd.Miller@sudo.ws</a>&gt;.  You may encrypt your message with PGP if you
       would like, using the key found at https://www.sudo.ws/dist/PGPKEYS.

</pre><h4><b>SUPPORT</b></h4><pre>
       Limited    free    support    is    available    via     the     sudo-users     mailing     list,     see
       https://www.sudo.ws/mailman/listinfo/sudo-users to subscribe or search the archives.

</pre><h4><b>DISCLAIMER</b></h4><pre>
       <b>sudo</b>  is  provided  “AS  IS”  and  any  express or implied warranties, including, but not limited to, the
       implied warranties of merchantability and fitness for a  particular  purpose  are  disclaimed.   See  the
       LICENSE.md file distributed with <b>sudo</b> or https://www.sudo.ws/about/license/ for complete details.

Sudo 1.9.16p2                                    August 9, 2023                                          <u><a href="../man8/SUDO.8.html">SUDO</a></u>(8)
</pre>
 </div>
</div></section>
</div>
</body>
</html>