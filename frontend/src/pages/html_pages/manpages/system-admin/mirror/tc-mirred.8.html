<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>mirred - mirror/redirect action</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/iproute2">iproute2_6.14.0-1ubuntu3_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       mirred - mirror/redirect action

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>tc</b> ... <b>action</b> <b>mirred</b> <u>DIRECTION</u> <u>ACTION</u> [ <b>index</b> <u>INDEX</u> ] <u>TARGET</u>

       <u>DIRECTION</u> := { <b>ingress</b> | <b>egress</b> }

       <u>TARGET</u> := { <u>DEV</u> | <u>BLOCK</u> }

       <u>DEV</u> := <b>dev</b> <u>DEVICENAME</u>

       <u>BLOCK</u> := <b>blockid</b> <u>BLOCKID</u>

       <u>ACTION</u> := { <b>mirror</b> | <b>redirect</b> }

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The  <b>mirred</b>  action  allows  packet mirroring (copying) or redirecting (stealing) the packet it receives.
       Mirroring is what is sometimes referred to as Switch Port Analyzer (SPAN) and is commonly used to analyze
       and/or debug flows.  When mirroring to a tc block, the packet will be mirrored to all the  ports  in  the
       block  with  exception  of  the  port  where  the packet ingressed, if that port is part of the tc block.
       Redirecting is similar to mirroring except that the behaviour is to mirror to the first N -  1  ports  in
       the block and redirect to the last one (note that the port in which the packet arrived is not going to be
       mirrored or redirected to).

</pre><h4><b>OPTIONS</b></h4><pre>
       <b>ingress</b>
       <b>egress</b> Specify the direction in which the packet shall appear on the destination interface.

       <b>mirror</b>
       <b>redirect</b>
              Define  whether  the  packet  should  be  copied  (<b>mirror</b>)  or moved (<b>redirect</b>) to the destination
              interface or block.

       <b>index</b> <u>INDEX</u>
              Assign a unique ID to this action instead of letting the kernel choose one  automatically.   <u>INDEX</u>
              is a 32bit unsigned integer greater than zero.

       <b>dev</b> <u>DEVICENAME</u>
              Specify the network interface to redirect or mirror to.

       <b>blockid</b> <u>BLOCKID</u>
              Specify the tc block to redirect or mirror to.

</pre><h4><b>EXAMPLES</b></h4><pre>
       Limit ingress bandwidth on eth0 to 1mbit/s, redirect exceeding traffic to lo for debugging purposes:

              # tc qdisc add dev eth0 handle ffff: clsact
              # tc filter add dev eth0 ingress u32 \
                   match u32 0 0 \
                   action police rate 1mbit burst 100k conform-exceed pipe \
                   action mirred egress redirect dev lo

       Mirror all incoming ICMP packets on eth0 to a dummy interface for examination with e.g. tcpdump:

              # ip link add dummy0 type dummy
              # ip link set dummy0 up
              # tc qdisc add dev eth0 handle ffff: clsact
              # tc filter add dev eth0 ingress protocol ip \
                   u32 match ip protocol 1 0xff \
                   action mirred egress mirror dev dummy0

       Using an <b>ifb</b> interface, it is possible to send ingress traffic through an instance of <b>sfq</b>:

              # modprobe ifb
              # ip link set ifb0 up
              # tc qdisc add dev ifb0 root sfq
              # tc qdisc add dev eth0 handle ffff: clsact
              # tc filter add dev eth0 ingress u32 \
                   match u32 0 0 \
                   action mirred egress redirect dev ifb0

</pre><h4><b>LIMITATIONS</b></h4><pre>
       The kernel restricts nesting to four levels to avoid the chance of nesting loops.

       Do  not  redirect  for  one  IFB device to another.  IFB is a very specialized case of packet redirecting
       device.  Redirecting from ifbX-&gt;ifbY will cause all packets to be dropped.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man8/tc.8.html">tc</a></b>(8), <b><a href="../man8/tc-u32.8.html">tc-u32</a></b>(8)

iproute2                                           11 Jan 2015                   <u>Mirror/redirect</u> <u>action</u> <u>in</u> <u><a href="../man8/tc.8.html">tc</a></u>(8)
</pre>
 </div>
</div></section>
</div>
</body>
</html>