<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>mfschunktool - checks chunk integrity offline</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/moosefs-chunkserver">moosefs-chunkserver_4.57.5-1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       mfschunktool - checks chunk integrity offline

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>mfschunktool</b> [<b>-f</b>] [<b>-r</b>] [<b>-n</b>] [<b>-e</b>] [<b>-x</b>] [<b>-m</b> <u>damaged_dir</u>] <u>chunk_file</u>|<u>mfs_hdd_path</u> ...

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>mfschunktool</b>  checks  chunk integrity using stored CRC checksums in chunk's header.  It can also 'repair'
       chunk (fix stored checksums). This tool may be useful to check last written chunks  after  possible  data
       corruption  (power down etc.)  If the supplied parameter is a file, the tool will check this file. If the
       supplied parameter is a directory, the tool will traverse this directory recursively and try to check all
       files that seem to be chunks (they are named like chunk files or, if <b>-n</b> option is used, also have headers
       like chunk files, even when the name is wrong).

       <b>Notice!</b> <b>This</b> <b>tool</b> <b>should</b> <b>never</b> <b>be</b> <b>used</b> <b>while</b> <b>the</b> <b>chunk</b> <b>server</b> <b>process</b> <b>is</b> <b>active!</b> If the tool is used on a
       chunk disk (aka path in mfshdd.cfg file) it will check if the chunk  server  is  working  and  refuse  to
       operate.  But  if  it's  used  on  a single file or subdirectory, such check is not possible and it's the
       reponsibility of the user to make sure the tool is not used on "working" chunks, as it could lead to data
       loss.

       Options:

       <b>-f</b>     turn on fast mode (in this mode only last block is  tested  -  usually  this  is  enough  to  find
              corrupted chunks)

       <b>-r</b>     turn  on  repair  mode  (if  checksums on given chunk don't match then they will be overwritten by
              checksums calculated using actual data)

       <b>-n</b>     turn on name fixing mode (if the chunk file name is not correct but there is proper  file  header,
              the tool will rename given file using data stored in the header)

       <b>-e</b>     turn  on  empty block crc check for 1.0 version chunks (force checking crc values for non existing
              blocks - may fail in case of chunks that were truncated)

       <b>-x</b>     turn on reporting successful check (print 'OK' message when everything is correct)

       <b>-m</b> <u>damaged_dir</u>
              move damaged chunks to a specified directory <u>damaged_dir</u>; see NOTES

</pre><h4><b>NOTES</b></h4><pre>
       The option to move damaged chunks to a specified directory is most useful when whole directories  (disks)
       with  chunks are scanned, and can be employed in different ways, depending on what other options are used
       at the same time.

       If <b>-r</b> option is used together with <b>-m</b> option, then only chunks that are unrepairable will be moved.  This
       is a fast approach to chunk reparing, that repairs and cleans the chunk directory (disk) in one go.

       If  only  option <b>-m</b> is used, then all damaged chunks will be moved to a specified directory. The user can
       then use the <b>mfschunktool</b> again in this directory, this time with the <b>-r</b> option,  to  repair  all  chunks
       that  can  be  repaired, but only introduce the repaired chunks back into the system if there is no other
       copy available from another chunkserver (a copy that did not need a repair operation in the first place).
       This is a more time consuming, but safer approach to  repairing  multiple  chunks,  e.g.  after  a  power
       failure.

</pre><h4><b>REPORTING</b> <b>BUGS</b></h4><pre>
       Report bugs to &lt;<a href="mailto:bugs@moosefs.com">bugs@moosefs.com</a>&gt;.

</pre><h4><b>COPYRIGHT</b></h4><pre>
       Copyright (C) 2025 Jakub Kruszona-Zawadzki, Saglabs SA

       This file is part of MooseFS.

       MooseFS  is  free  software;  you can redistribute it and/or modify it under the terms of the GNU General
       Public License as published by the Free Software Foundation, version 2 (only).

       MooseFS is distributed in the hope that it will be useful, but WITHOUT ANY  WARRANTY;  without  even  the
       implied  warranty  of  MERCHANTABILITY  or  FITNESS  FOR A PARTICULAR PURPOSE. See the GNU General Public
       License for more details.

       You should have received a copy of the GNU General Public License along with MooseFS; if  not,  write  to
       the  Free  Software  Foundation,  Inc.,  51 Franklin St, Fifth Floor, Boston, MA 02111-1301, USA or visit
       <a href="http://www.gnu.org/licenses/gpl-2.0.html">http://www.gnu.org/licenses/gpl-2.0.html</a>

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man8/mfschunkserver.8.html">mfschunkserver</a></b>(8)

MooseFS 4.57.5-1                                  February 2025                                  <u><a href="../man8/mfschunktool.8.html">mfschunktool</a></u>(8)
</pre>
 </div>
</div></section>
</div>
</body>
</html>