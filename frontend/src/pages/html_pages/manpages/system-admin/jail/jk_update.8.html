<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>jk_update - a utility to update and cleanup a jail according to changes on the real system</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/jailkit">jailkit_2.23-2_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       jk_update - a utility to update and cleanup a jail according to changes on the real system

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>jk_update</b> <b>-j</b> <b>&lt;jail&gt;</b>

       <b>jk_update</b> <b>-c</b> <b>&lt;section</b> <b>of</b> <b>configfile&gt;</b>

       <b>jk_update</b> <b>-v</b> <b>-d</b> <b>-k</b> <b>-j</b> <b>&lt;jail&gt;</b> <b>-s</b> <b>&lt;file</b> <b>to</b> <b>skip&gt;</b> <b>&lt;dir</b> <b>to</b> <b>scan</b> <b>for</b> <b>updates&gt;</b>

       <b>jk_update</b> <b>--verbose</b> <b>--dry-run</b> <b>--hardlink</b> <b>--jail=&lt;jail&gt;</b> <b>--skip=&lt;file</b> <b>to</b> <b>skip&gt;</b> <b>&lt;dir</b> <b>to</b> <b>scan</b> <b>for</b> <b>updates&gt;</b>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       jk_update  will  compare  the  files  in  a  jail with the corresponding files on the real system. If the
       corresponding file on the real system is newer, and the file on the real system is  different,  the  file
       from  the  real  system will be copied to the jail including any required libraries just like jk_cp would
       do. Files that do not exist on the real system will be deleted in the jail.

       jk_update works well to pass security updates on the real system to a jail. jk_update does not work  well
       with  larger  upgrades  on the real system. In that case files are often replaced by other files in which
       case jk_update will delete the old file but not copy the new file.

   <b>Avoid</b> <b>unwanted</b> <b>updates</b> <b>or</b> <b>cleanups</b>
       To avoid unwanted updates, or to avoid files being deleted,  files  or  directories  can  be  skipped  by
       jk_update, either by specifying them on the commandline or by specifying them in the configfile.

   <b>Directories</b> <b>to</b> <b>include</b> <b>in</b> <b>the</b> <b>update</b>
       By default jk_update will scan <a href="file:/usr">/usr</a>, <a href="file:/bin">/bin</a>, <a href="file:/opt">/opt</a>, and <a href="file:/lib">/lib</a> for updates. If one or more arguments is passed
       as  directories  to  update,  these  default  directories  are  not  scanned, unless they are part of the
       arguments. The default directories can also be set in the config file.

       <b>jk_update</b> <b>-j</b> <b>&lt;jail&gt;</b> will scan &lt;jail&gt;<a href="file:/usr">/usr</a>, &lt;jail&gt;<a href="file:/bin">/bin</a>, &lt;jail&gt;<a href="file:/opt">/opt</a>,  and  &lt;jail&gt;<a href="file:/lib">/lib</a>,  while  <b>jk_update</b>  <b>-j</b>
       <b>&lt;jail&gt;</b> <b><a href="file:/bin">/bin</a></b> will only scan &lt;jail&gt;<a href="file:/bin">/bin</a>

</pre><h4><b>EXAMPLE</b></h4><pre>
       An example configfile could look like this:

       [/home/testchroot]
       skips = /usr/bin/myscript
       hardlinks = 1
       directories = <a href="file:/usr">/usr</a>, <a href="file:/bin">/bin</a>, <a href="file:/lib">/lib</a>

       [/home/otherjail]
       skips = /usr/share/firefox, /usr/bin/firefox, /usr/lib/firefox

       where the options have the following meaning:

       <b>skips</b>
              the files and directories to skip
       <b>hardlinks</b>
              a boolean whether to use hardlinks (1) or copy the files (0)
       <b>directories</b>
              specifies the directories to include in the update.

</pre><h4><b>WARNING</b></h4><pre>
       If  you  have changed files in the jail, it is recommended to do a "dry run" first and see what jk_update
       will do. jk_update does now know if a file is manually changed or not. If a file in the jail is older and
       different from the file on the real system it is updated. If  a  file  in  the  jail  does  not  have  an
       equivalent on the real system it is deleted. Use the skip option to exclude any files that you changed or
       added manually.

</pre><h4><b>OPTIONS</b></h4><pre>
       <b>-v</b> <b>--verbose</b>
              Will give verbose output

       <b>-h</b> <b>--help</b>
              The help screen

       <b>-c</b> <b>&lt;section</b> <b>in</b> <b>configfile&gt;</b> <b>--configsection=&lt;section</b> <b>in</b> <b>configfile&gt;</b>
              The jail to update

       <b>-j</b> <b>&lt;jail&gt;</b> <b>--jail=&lt;jail&gt;</b>
              The jail to update

       <b>-d</b> <b>--dry-run</b>
              Do a "dry run". Show what will be done but don't do anything.

       <b>-k</b> <b>--hardlink</b>
              Try to create hardlinks instead of copying the files when updating

       <b>-s</b> <b>&lt;file</b> <b>to</b> <b>skip&gt;</b> <b>--skip</b> <b>&lt;file</b> <b>to</b> <b>skip&gt;</b>
              Do  not  update this file. The argument can either be the path in the jail or the path on the real
              system. In order to skip multiple files, use this option multiple times.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man8/jailkit.8.html">jailkit</a>(8)</b> <b><a href="../man8/jk_check.8.html">jk_check</a>(8)</b> <b><a href="../man8/jk_chrootlaunch.8.html">jk_chrootlaunch</a>(8)</b> <b><a href="../man8/jk_chrootsh.8.html">jk_chrootsh</a>(8)</b> <b><a href="../man8/jk_cp.8.html">jk_cp</a>(8)</b>  <b><a href="../man8/jk_init.8.html">jk_init</a>(8)</b>  <b><a href="../man8/jk_jailuser.8.html">jk_jailuser</a>(8)</b>  <b><a href="../man8/jk_list.8.html">jk_list</a>(8)</b>
       <b><a href="../man8/jk_lsh.8.html">jk_lsh</a>(8)</b> <b><a href="../man8/jk_procmailwrapper.8.html">jk_procmailwrapper</a>(8)</b> <b><a href="../man8/jk_socketd.8.html">jk_socketd</a>(8)</b> <b><a href="../man8/jk_uchroot.8.html">jk_uchroot</a>(8)</b> <b><a href="../man2/chroot.2.html">chroot</a>(2)</b>

</pre><h4><b>COPYRIGHT</b></h4><pre>
       Copyright (C) 2003, 2004, 2005, 2006, 2007, 2008, 2009, 2010 Olivier Sessink

       Copying  and distribution of this file, with or without modification, are permitted in any medium without
       royalty provided the copyright notice and this notice are preserved.

JAILKIT                                            07-02-2010                                       <u><a href="../man8/jk_update.8.html">jk_update</a></u>(8)
</pre>
 </div>
</div></section>
</div>
</body>
</html>