<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>tcpdrop.bt - Trace kernel-based TCP packet drops with details. Uses Linux bpftrace/eBPF</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/bpftrace">bpftrace_0.23.2-1ubuntu2_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       tcpdrop.bt - Trace kernel-based TCP packet drops with details. Uses Linux bpftrace/eBPF

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>tcpdrop.bt</b>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This  tool  traces TCP packets or segments that were dropped by the kernel, and shows details from the IP
       and TCP headers, the socket state, and the kernel stack trace. This is useful for debugging cases of high
       kernel drops, which can cause timer-based retransmits and performance issues.

       This tool works using dynamic tracing of the tcp_drop() kernel function, which requires a  recent  kernel
       version.

       This tool is limited to ipv4, and cannot parse tcpflags as bpftrace currently cannot parse socket buffers
       in the way that bcc can.

       Since this uses BPF, only the root user can use this tool.

</pre><h4><b>REQUIREMENTS</b></h4><pre>
       CONFIG_BPF and bpftrace.

</pre><h4><b>EXAMPLES</b></h4><pre>
       Trace all tcp drops:
              # <b>tcpdrop.bt</b>

       <b>FIELDS</b>

       TIME   Time of the call, in HH:MM:SS format.

       PID    Process  ID  that  was  on-CPU  during  the drop. This may be unrelated, as drops can occur on the
              receive interrupt and be unrelated to the PID that was interrupted.

       COMM   Process name

       SADDR  Source IP address.

       SPORT  Source TCP port.

       DADDR  Destination IP address.

       DPORT  Destination TCP port.

       STATE  TCP session state ("ESTABLISHED", etc).

</pre><h4><b>OVERHEAD</b></h4><pre>
       This traces the kernel tcp_drop() function, which should be low frequency, and therefore the overhead  of
       this tool should be negligible.

       As always, test and understand this tools overhead for your types of workloads before production use.

</pre><h4><b>SOURCE</b></h4><pre>
       This is from bpftrace

              https://github.com/bpftrace/bpftrace

       Also  look  in  the  bpftrace  distribution  for a companion _examples.txt file containing example usage,
       output, and commentary for this tool.

       This is a bpftrace version of the bcc tool of the same name. The bcc tool may provide  more  options  and
       customizations.

              https://github.com/iovisor/bcc

</pre><h4><b>OS</b></h4><pre>
       Linux

</pre><h4><b>STABILITY</b></h4><pre>
       Unstable - in development.

</pre><h4><b>AUTHOR</b></h4><pre>
       Brendan Gregg, adapted for bpftrace by Dale Hamel

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <a href="../man8/tcplife.bt.8.html">tcplife.bt</a>(8), <a href="../man8/tcpaccept.bt.8.html">tcpaccept.bt</a>(8), <a href="../man8/tcpconnect.bt.8.html">tcpconnect.bt</a>(8), <a href="../man8/tcptop.8.html">tcptop</a>(8)

USER COMMANDS                                      2018-11-24                                      <u><a href="../man8/tcpdrop.bt.8.html">tcpdrop.bt</a></u>(8)
</pre>
 </div>
</div></section>
</div>
</body>
</html>