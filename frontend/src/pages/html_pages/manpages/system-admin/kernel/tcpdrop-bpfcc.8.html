<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>tcpdrop - Trace kernel-based TCP packet drops with details. Uses Linux eBPF/bcc.</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/bpfcc-tools">bpfcc-tools_0.31.0+ds-7ubuntu2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       tcpdrop - Trace kernel-based TCP packet drops with details. Uses Linux eBPF/bcc.

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>tcpdrop</b> <b>[-4</b> <b>|</b> <b>-6]</b> <b>[-h]</b>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This  tool  traces TCP packets or segments that were dropped by the kernel, and shows details from the IP
       and TCP headers, the socket state, and the kernel stack trace. This is useful for debugging cases of high
       kernel drops, which can cause timer-based retransmits and performance issues.

       This tool works using dynamic tracing of the tcp_drop() kernel function, which requires a  recent  kernel
       version.

       Since this uses BPF, only the root user can use this tool.

</pre><h4><b>REQUIREMENTS</b></h4><pre>
       CONFIG_BPF and bcc.

</pre><h4><b>OPTIONS</b></h4><pre>
       -4     Trace IPv4 family only.

       -6     Trace IPv6 family only.

       -h     Print usage message.

</pre><h4><b>EXAMPLES</b></h4><pre>
       Trace kernel-based TCP packet drops with details:
              # <b>tcpdrop</b>

       Trace IPv4 family only:
              # <b>tcpdrop</b> <b>-4</b>

       Trace IPv6 family only:
              # <b>tcpdrop</b> <b>-6</b>

</pre><h4><b>FIELDS</b></h4><pre>
       TIME   Time of the drop, in HH:MM:SS format.

       PID    Process  ID  that  was  on-CPU  during  the drop. This may be unrelated, as drops can occur on the
              receive interrupt and be unrelated to the PID that was interrupted.

       IP     IP address family (4 or 6)

       SADDR  Source IP address.

       SPORT  Source TCP port.

       DADDR  Destination IP address.

       DPORT  Destionation TCP port.

       STATE  TCP session state ("ESTABLISHED", etc).

       FLAGS  TCP flags ("SYN", etc).

</pre><h4><b>OVERHEAD</b></h4><pre>
       This traces the kernel tcp_drop() function, which should be low frequency, and therefore the overhead  of
       this tool should be negligible.

       As always, test and understand this tools overhead for your types of workloads before production use.

</pre><h4><b>SOURCE</b></h4><pre>
       This is from bcc.

              https://github.com/iovisor/bcc

       Also  look  in  the bcc distribution for a companion _examples.txt file containing example usage, output,
       and commentary for this tool.

</pre><h4><b>OS</b></h4><pre>
       Linux

</pre><h4><b>STABILITY</b></h4><pre>
       Unstable - in development.

</pre><h4><b>AUTHOR</b></h4><pre>
       Brendan Gregg

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <a href="../man8/tcplife.8.html">tcplife</a>(8), <a href="../man8/tcpaccept.8.html">tcpaccept</a>(8), <a href="../man8/tcpconnect.8.html">tcpconnect</a>(8), <a href="../man8/tcptop.8.html">tcptop</a>(8)

USER COMMANDS                                      2018-05-30                                         <u><a href="../man8/tcpdrop.8.html">tcpdrop</a></u>(8)
</pre>
 </div>
</div></section>
</div>
</body>
</html>