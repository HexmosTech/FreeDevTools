<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>makefs — create a filesystem image from a directory tree</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/makefs">makefs_20190105-3_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       makefs — create a filesystem image from a directory tree

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>makefs</b>   [<b>-x</b>]   [<b>-B</b>   <u>byte-order</u>]   [<b>-b</b>  <u>free-blocks</u>]  [<b>-d</b>  <u>debug-mask</u>]  [<b>-F</b>  <u>specfile</u>]  [<b>-f</b>  <u>free-files</u>]
              [<b>-M</b>  <u>minimum-size</u>]  [<b>-m</b>  <u>maximum-size</u>]  [<b>-N</b>   <u>userdb-dir</u>]   [<b>-o</b>   <u>fs-options</u>]   [<b>-S</b>   <u>sector-size</u>]
              [<b>-s</b> <u>image-size</u>] [<b>-t</b> <u>fs-type</u>] [<b>-T</b> <u>maximum-time</u>] <u>image-file</u> <u>directory</u>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The  utility  <b>makefs</b>  creates  a  filesystem image into <u>image-file</u> from the directory tree <u>directory</u>.  No
       special devices or privileges are required to perform this task.

       The options are as follows:

       <b>-B</b> <u>byte-order</u>
             Set the byte order of the image to <u>byte-order</u>.  Valid byte orders are ‘4321’, ‘big’,  or  ‘be’  for
             big  endian,  and  ‘1234’,  ‘little’, or ‘le’ for little endian.  Some filesystems may have a fixed
             byte order; in those cases this argument will be ignored.

       <b>-b</b> <u>free-blocks</u>
             Ensure that a minimum of <u>free-blocks</u> free blocks exist in the image.  An optional ‘%’ suffix may be
             provided to indicate that <u>free-blocks</u> indicates a percentage of the calculated image size.

       <b>-d</b> <u>debug-mask</u>
             Enable various levels of debugging, depending upon which bits are set in <u>debug-mask</u>.  XXX: document
             these

       <b>-F</b> <u>specfile</u>
             Use <u>specfile</u> as an <u><a href="../man8/mtree.8.html">mtree</a></u>(8) ‘specfile’ specification.

             If a specfile entry exists in the underlying filesystem, its permissions and modification time will
             be used unless specifically overridden by the specfile.  An error will be raised  if  the  type  of
             entry in the specfile conflicts with that of an existing entry.

             In  the  opposite case (where a specfile entry does not have an entry in the underlying filesystem)
             the following occurs: If the specfile entry is marked <b>optional</b>,  the  specfile  entry  is  ignored.
             Otherwise,  the  entry  will  be  created in the image, and it is necessary to specify at least the
             following parameters in the specfile: <b>type</b>, <b>mode</b>, <b>gname</b>, or <b>gid</b>, and <b>uname</b> or <b>uid</b>, <b>device</b>  (in  the
             case  of  block  or  character  devices),  and <b>link</b> (in the case of symbolic links).  If <b>time</b> isn't
             provided, the current time will be used.  If <b>flags</b> isn't provided, the current file flags  will  be
             used.  Missing regular file entries will be created as zero-length files.

       <b>-f</b> <u>free-files</u>
             Ensure that a minimum of <u>free-files</u> free files (inodes) exist in the image.  An optional ‘%’ suffix
             may be provided to indicate that <u>free-files</u> indicates a percentage of the calculated image size.

       <b>-M</b> <u>minimum-size</u>
             Set the minimum size of the filesystem image to <u>minimum-size</u>.

       <b>-m</b> <u>maximum-size</u>
             Set  the  maximum  size  of  the  filesystem image to <u>maximum-size</u>.  An error will be raised if the
             target filesystem needs to be larger than this to accommodate the provided directory tree.

       <b>-N</b> <u>dbdir</u>
             Use the user database text file <u>master.passwd</u> and group database text file <u>group</u> from <u>dbdir</u>, rather
             than using the results from the system's <u><a href="../man3/getpwnam.3.html">getpwnam</a></u>(3) and <u><a href="../man3/getgrnam.3.html">getgrnam</a></u>(3) (and related) library calls.

       <b>-o</b> <u>fs-options</u>
             Set filesystem specific  options.   <u>fs-options</u>  is  a  comma  separated  list  of  options.   Valid
             filesystem specific options are detailed below.

       <b>-S</b> <u>sector-size</u>
             Set the filesystem sector size to <u>sector-size</u>.  Defaults to 512.

       <b>-s</b> <u>image-size</u>
             Set the size of the filesystem image to <u>image-size</u>.

       <b>-t</b> <u>fs-type</u>
             Create an <u>fs-type</u> filesystem image.  The following filesystem types are supported:

                   <b>ffs</b>     BSD fast filesystem (default).

                   <b>cd9660</b>  ISO 9660 filesystem.

       <b>-T</b> <u>maximum-time</u>
             Clamp superblock and file timestamps to <u>maximum-time</u> seconds since the Epoch.

       <b>-x</b>    Exclude filesystem nodes not explicitly listed in the specfile.

       Where  sizes  are specified, a decimal number of bytes is expected.  Two or more numbers may be separated
       by an “x” to indicate a product.  Each number may have one of the following optional suffixes:
             b    Block; multiply by 512
             k    Kibi; multiply by 1024 (1 KiB)
             m    Mebi; multiply by 1048576 (1 MiB)
             g    Gibi; multiply by 1073741824 (1 GiB)
             t    Tebi; multiply by 1099511627776 (1 TiB)
             w    Word; multiply by the number of bytes in an integer

   <b>FFS-specific</b> <b>options</b>
       <b>ffs</b> images have ffs-specific optional parameters that may be provided.  Each of the options consists of a
       keyword, an equal sign (‘=’), and a value.  The following keywords are supported:

             <b>avgfilesize</b>   Expected average file size.
             <b>avgfpdir</b>      Expected number of files per directory.
             <b>bsize</b>         Block size.
             <b>density</b>       Bytes per inode.
             <b>fsize</b>         Fragment size.
             <b>maxbpg</b>        Maximum blocks per file in a cylinder group.
             <b>minfree</b>       Minimum % free.
             <b>optimization</b>  Optimization preference; one of ‘space’ or ‘time’.
             <b>extent</b>        Maximum extent size.
             <b>maxbpcg</b>       Maximum total number of blocks in a cylinder group.
             <b>version</b>       UFS version.  1 for FFS (default), 2 for UFS2.

   <b>CD9660-specific</b> <b>options</b>
       <b>cd9660</b> images have ISO9660-specific optional parameters that may be provided.  The arguments consist of a
       keyword and, optionally, an equal sign (‘=’), and a value.  The following keywords are supported:

             <b>allow-deep-trees</b>      Allow the directory structure to exceed the maximum specified in the spec.
             <b>allow-max-name</b>        Allow 37 instead of 33 characters for filenames by omitting the version id.
             <b>allow-multidot</b>        Allow multiple dots in a filename.
             <b>applicationid</b>         Application ID of the image.
             <b>archimedes</b>            Use the ‘ARCHIMEDES’ extension to encode RISC OS metadata.
             <b>boot-info-table</b>       Write a legacy 56-byte table at offset 8 into the boot image (see below).
             <b>boot-load-segment</b>     Set load segment for the boot image.
             <b>bootimage</b>             Filename of a boot image in the format “sysid;filename”, where “sysid” is one
                                   of ‘i386’, ‘mac68k’, ‘macppc’, or ‘powerpc’.
             <b>creation-date</b>         Override PVD creation date.
             <b>effective-date</b>        Override PVD effective date.
             <b>expiration-date</b>       Override PVD expiration date.
             <b>generic-bootimage</b>     Load a generic boot image into the first 32K of the cd9660 image.
             <b>hard-disk-boot</b>        Boot image is a hard disk image.
             <b>hide-rr-moved</b>         Assign the <u>RR_MOVED</u> directory a rock ridge name of the empty  string  instead
                                   of the default <u>.rr_moved</u>.
             <b>keep-bad-images</b>       Don't  throw  away  images  whose  write  was  aborted  due to an error.  For
                                   debugging purposes.
             <b>label</b>                 Label name of the image.
             <b>modification-date</b>     Override PVD modification date.
             <b>no-boot</b>               Boot image is not bootable.
             <b>no-emul-boot</b>          Boot image is a “no emulation” ElTorito image.
             <b>no-trailing-padding</b>   Do not pad the image (apparently Linux needs the padding).
             <b>omit-trailing-period</b>  Violate the standard, do not append a trailing period to filenames without an
                                   extension.
             <b>preparer</b>              Preparer ID of the image.
             <b>publisher</b>             Publisher ID of the image.
             <b>rockridge</b>             Use RockRidge extensions (for longer filenames, etc.).
             <b>rr-squash</b>             Force uid 0, gid 0, and rationalised permission bits for RockRidge entries.
             <b>volumeid</b>              Volume set identifier of the image.

       The <b>boot-info-table</b> currently consists of the following fields (all 7.3.1 numbers), offsets  relative  to
       the boot image:
             <b>0</b>    8 bytes: kept as is, not part of checksum
             <b>8</b>    LBA of PVD
             <b>12</b>   LBA of boot image
             <b>16</b>   Size in bytes of boot image
             <b>20</b>   32-bit additive sum of all 32-bit words of boot image
             <b>24</b>   40 reserved bytes (MBZ)
             <b>64</b>   Begin of checksummed data, kept as is

       Dates  (to  override) are in 8.4.26.1 format (<u>YYYYmmddHHMMSS00</u>) and Universal Time, i.e. with zero offset
       from Greenwich Mean Time.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <u><a href="../man3/strsuftoll.3.html">strsuftoll</a></u>(3), <u><a href="../man8/installboot.8.html">installboot</a></u>(8), <u><a href="../man8/mtree.8.html">mtree</a></u>(8), <u><a href="../man8/newfs.8.html">newfs</a></u>(8)

</pre><h4><b>HISTORY</b></h4><pre>
       The <b>makefs</b> utility appeared in NetBSD 1.6.

       Support for overriding PVD dates and the boot info table was added in MirBSD 11.

</pre><h4><b>AUTHORS</b></h4><pre>
       Luke Mewburn &lt;<a href="mailto:lukem@NetBSD.org">lukem@NetBSD.org</a>&gt; (original program)
       Daniel Watt,
       Walter Deignan,
       Ryan Gabrys,
       Alan Perez-Rathke,
       Ram Vedam (cd9660 support)
       Thorsten Glaser &lt;<a href="mailto:tg@mirbsd.org">tg@mirbsd.org</a>&gt;

</pre><h4><b>CAVEATS</b></h4><pre>
       <b>makefs</b> may be limited to images less than 2 GiB in size due to internal use of the long type.

Debian                                          December 25, 2018                                      <u><a href="../man8/MAKEFS.8.html">MAKEFS</a></u>(8)
</pre>
 </div>
</div></section>
</div>
</body>
</html>