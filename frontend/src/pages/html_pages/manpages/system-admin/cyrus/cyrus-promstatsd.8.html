<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>promstatsd - Cyrus IMAP documentation</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/cyrus-admin">cyrus-admin_3.10.2-1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       promstatsd - Cyrus IMAP documentation

       Cyrus Prometheus statistics collating daemon

</pre><h4><b>SYNOPSIS</b></h4><pre>
          <b>promstatsd</b> [ <b>-C</b> <u>config-file</u> ] [ <b>-v</b> ] [ <b>-f</b> <u>frequency</u> ] [ <b>-d</b> ]

          <b>promstatsd</b> [ <b>-C</b> <u>config-file</u> ] [ <b>-v</b> ] <b>-c</b>

          <b>promstatsd</b> [ <b>-C</b> <u>config-file</u> ] [ <b>-v</b> ] <b>-1</b>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>promstatsd</b> is the Cyrus Prometheus statistics collating daemon.

       When  the  <b>prometheus_enabled</b>  <u><a href="../man5/imapd.conf.5.html">imapd.conf</a>(5)</u>  setting is true, various Cyrus service processes will count
       statistics as they run.  <b>promstatsd</b> collates these statistics into a text-based  report  that  Prometheus
       can ingest.

       The  report  produced by <b>promstatsd</b> is served by <u><a href="../man8/httpd.8.html">httpd</a>(8)</u> at the "/metrics" URL, if "prometheus" has been
       set in <b>httpmodules</b> in <u><a href="../man5/imapd.conf.5.html">imapd.conf</a>(5)</u>.

       <b>promstatsd</b> reads its configuration options out of the <u><a href="../man5/imapd.conf.5.html">imapd.conf</a>(5)</u> file unless  specified  otherwise  by
       <b>-C</b>.

       In  the  first synopsis, <b>promstatsd</b> will run as a daemon, updating the report at the specified <u>frequency</u>.
       If the optional <b>-f</b> <u>frequency</u> argument is not provided, the <b>prometheus_update_freq</b> from <u><a href="../man5/imapd.conf.5.html">imapd.conf</a>(5)</u> will
       be used, which defaults to 10 seconds.  This  invocation  should  be  run  from  the  DAEMON  section  of
       <u><a href="../man5/cyrus.conf.5.html">cyrus.conf</a>(5)</u> (see <u>Examples</u> below).

       In  the  second  synopsis,  <b>promstatsd</b> will clean up all statistics files and exit.  The statistics Cyrus
       maintains are only valid while Cyrus is running, so this invocation must be run from the START section of
       <u><a href="../man5/cyrus.conf.5.html">cyrus.conf</a>(5)</u> (see <u>Examples</u> below) to clean up after the previous run, before new service  processes  are
       started.

       In  the  third  synopsis, <b>promstatsd</b> will immediately update the report once, and then exit.  This can be
       safely used while another <b>promstatsd</b> process runs in daemon form.  It is useful if you need to update the
       report <u>now</u> for some reason, rather than waiting for the daemon's next update.

</pre><h4><b>OPTIONS</b></h4><pre>
       <b>-C</b> <b>config-file</b>
              Use the specified configuration file <u>config-file</u> rather than the default <u><a href="../man5/imapd.conf.5.html">imapd.conf</a>(5)</u>.

       <b>-D</b>     Run the external debugger specified in the <b>debug_command</b> <u><a href="../man5/imapd.conf.5.html">imapd.conf</a>(5)</u> option.

       <b>-1</b>     Update the report once and exit.

       <b>-c</b>     Clean up the stats directory and exit.

       <b>-d</b>     Debug mode -- <b>promstatsd</b> will not background itself, for aid in debugging.

       <b>-f</b> <b>frequency</b>
              Update the report every <u>frequency</u> seconds.  If  not  specified,  the  <b>prometheus_update_freq</b>  from
              <u><a href="../man5/imapd.conf.5.html">imapd.conf</a>(5)</u> will be used, which defaults to 10 seconds.

       <b>-v</b>     Increase verbosity.  Can be specified multiple times.

</pre><h4><b>EXAMPLES</b></h4><pre>
       To regularly produce a report that Prometheus can consume, <b>promstatsd</b> must be run from the DAEMON section
       of <u><a href="../man5/cyrus.conf.5.html">cyrus.conf</a>(5)</u> as per the first synopsis, like so:

          DAEMON {
              <b>promstatsd</b>    <b>cmd="promstatsd"</b>
          }

       <b>To</b>  <b>ensure</b>  <b>a</b>  <b>clean</b>  <b>statistical</b>  <b>state</b>  <b>at</b>  <b>startup,</b>  <b>promstatsd</b>  <b>must</b> <b>be</b> <b>run</b> <b>from</b> <b>the</b> <b>START</b> <b>section</b> <b>of</b>
       <u><a href="../man5/cyrus.conf.5.html">cyrus.conf</a>(5)</u> <b>as</b> <b>per</b> <b>the</b> <b>second</b> <b>synopsis,</b> <b>like</b> <b>so:</b>

          <b>START</b> <b>{</b>
              <b>statscleanup</b>  <b>cmd="promstatsd</b> <b>-c"</b>
          <b>}</b>

</pre><h4><b>HISTORY</b></h4><pre>
</pre><h4><b>FILES</b></h4><pre>
</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <u><a href="../man5/imapd.conf.5.html">imapd.conf</a>(5)</u>, <u><a href="../man5/cyrus.conf.5.html">cyrus.conf</a>(5)</u>, <u><a href="../man8/httpd.8.html">httpd</a>(8)</u>,

</pre><h4><b>AUTHOR</b></h4><pre>
       The Cyrus Team

</pre><h4><b>COPYRIGHT</b></h4><pre>
       1993â€“2025, The Cyrus Team

3.10.2                                            Jun 27, 2025                                     <u><a href="../man8/PROMSTATSD.8.html">PROMSTATSD</a></u>(8)
</pre>
 </div>
</div></section>
</div>
</body>
</html>