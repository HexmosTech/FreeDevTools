<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>cyr_dbtool - Cyrus IMAP documentation</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/cyrus-common">cyrus-common_3.10.2-1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       cyr_dbtool - Cyrus IMAP documentation

       Manage Cyrus databases

</pre><h4><b>SYNOPSIS</b></h4><pre>
          <b>cyr_dbtool</b> [ <b>-C</b> <u>config-file</u> ] [ <b>-M</b> ] [ <b>-n</b> ] [ <b>-o</b> ] [ <b>-T</b> ]
                  <u>db-file</u> <u>db-backend</u> <u>action</u> [ <u>key</u> ] [ <u>value</u> ]

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>cyr_dbtool</b> is used to manage a cyrusdb file. The usable actions are:
          <b>show</b> <u>[&lt;prefix&gt;]</u>

          <b>get</b> <u>&lt;key&gt;</u>

          <b>set</b> <u>&lt;key&gt;</u> <u>&lt;value&gt;</u>

          <b>delete</b> <u>&lt;key&gt;</u>

          <b>consistency</b>

          <b>repack</b>

       You  may omit <u>key</u> or <u>key/value</u> and specify one per line on stdin.  Keys are terminated by tab or newline,
       values are terminated by newline.

       Running without any options will list the available database backends and usable actions.

       The <u>consistency</u> action runs a consistency check on the DB by calling 'myconsistent' on it.

       The <u>repack</u> action will compress the database by removing stale data on backends which support it.  It's a
       NOOP otherwise.

       <b>cyr_dbtool</b> reads its configuration options out of the <u><a href="../man5/imapd.conf.5.html">imapd.conf</a>(5)</u> file unless  specified  otherwise  by
       <b>-C</b>.

       <b>NOTE:</b>
          Note  that  the file locations are NOT read out of the configuration file, and must be supplied on the
          command line.

       <b>TIP:</b>
          The   format   of   all   Cyrus   databases   is   detailed    in    the    distribution    in    file
          doc/internal/database-formats.html.  Please consult that for details.

</pre><h4><b>OPTIONS</b></h4><pre>
       <b>-C</b> <b>config-file</b>
              Use the specified configuration file <u>config-file</u> rather than the default <u><a href="../man5/imapd.conf.5.html">imapd.conf</a>(5)</u>.

       <b>-M,</b> <b>--improved-mboxlist-sort</b>
              Uses improved MBOX list sort

       <b>-n,</b> <b>--create</b>
              Create the database file if it doesn't already exist.

       <b>-T,</b> <b>--use-transaction</b>
              Use  a  transaction  to  do  the  action  (most  especially  for  'show') - the default used to be
              transactions.

</pre><h4><b>EXAMPLES</b></h4><pre>
       This series of examples address manipulating the <u>user_deny.db</u> database,  which  is  used  to  deny  users
       access to specific services.  This is typically a Cyrus "flat" format database.

       <u>user_deny.db</u>  is  indexed by userid and each record contains the database version number (currently 2), a
       list of "wildmat" patterns specifying Cyrus services to be denied, and a text message to be displayed  to
       the  user  upon  denial. The service names to be matched are those as used in <u><a href="../man5/cyrus.conf.5.html">cyrus.conf</a>(5)</u>.  <u><a href="../man8/cyr_deny.8.html">cyr_deny</a>(8)</u>
       provides more convenient way to manage <u>user_deny.db</u>.

       <b>NOTE:</b>
          Given that <u>keys</u> are tab-delimited,  these  examples  use  the  notation  &lt;tab&gt;  to  indicate  the  tab
          character.   When entering this via the command line, remember to escape tabs.  In a normal shell, one
          can do so with &lt;ctrl-v&gt; (^v).   The  sequence  "&lt;ctrl-v&gt;&lt;ctrl-i&gt;"  (^v^i)  works  well  to  enter  tab
          characters.

          <b>cyr_dbtool</b> /var/lib/imap/user_deny.db flat baduser "2&lt;tab&gt;pop3,imap&lt;tab&gt;Denied"
          <b>Deny</b> <b>the</b> <b>user</b> <b>'baduser'</b> <b>access</b> <b>to</b> <b>imap</b> <b>and</b> <b>pop3.</b>

          <b>cyr_dbtool</b> <b>/var/lib/imap/user_deny.db</b> <b>flat</b> <b>show</b>
          <b>Show</b> <b>all</b> <b>current</b> <b>database</b> <b>records.</b>

          <b>cyr_dbtool</b> <b>/var/lib/imap/user_deny.db</b> <b>flat</b> <b>get</b> <b>baduser</b>
          <b>Get</b> <b>the</b> <b>current</b> <b>database</b> <b>record(s)</b> <b>for</b> <b>user</b> <b>'baduser'.</b>

</pre><h4><b>FILES</b></h4><pre>
       /etc/imapd.conf

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <u><a href="../man5/imapd.conf.5.html">imapd.conf</a>(5)</u>

</pre><h4><b>AUTHOR</b></h4><pre>
       The Cyrus Team, Nic Bernstein (Onlight), Jeroen van Meeuwen (Kolab Systems)

</pre><h4><b>COPYRIGHT</b></h4><pre>
       1993â€“2025, The Cyrus Team

3.10.2                                            Jun 27, 2025                                     <u><a href="../man8/CYR_DBTOOL.8.html">CYR_DBTOOL</a></u>(8)
</pre>
 </div>
</div></section>
</div>
</body>
</html>