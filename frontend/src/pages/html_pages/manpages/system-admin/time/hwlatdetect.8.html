<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>hwlatdetect - program to control the ftrace kernel hardware latency detection</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/rt-tests">rt-tests_2.6-1.1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       hwlatdetect - program to control the ftrace kernel hardware latency detection

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>hwlatdetect</b>  [  --duration=&lt;time&gt;  ]  [--threshold=&lt;usecs&gt;  ]  [--window=&lt;time interval&gt; ] [--width=&lt;time
       interval&gt; ] [--hardlimit=&lt;microsecond value&gt; ] [--report=&lt;path&gt; ] [--debug ] [--quiet ] [--watch]

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>hwlatdetect</b>   is   a   program   that   controls   the   ftrace   kernel   hardware   latency    detector
       (hwlatdetector).hwlatdetector is used to detect large system latencies induced by the behavior of certain
       underlying  hardware  or  firmware,  independent  of  Linux itself.  The code was developed originally to
       detect SMIs (System Management Interrupts) on x86 systems, however there is nothing  x86  specific  about
       it.  It was originally written for use by the "RT" patch set since the Real Time kernel is highly latency
       sensitive.

       SMIs  are  usually  not  serviced  by  the Linux kernel, which typically does not even know that they are
       occurring. SMIs are instead are set up by BIOS code and are serviced by BIOS code, usually for "critical"
       events such as management of thermal sensors and fans. Sometimes though, SMIs are used  for  other  tasks
       and  those  tasks  can  spend  an  inordinate  amount  of  time  in  the  handler  (sometimes measured in
       milliseconds). Obviously this is a problem if you are trying to keep event service latencies down in  the
       microsecond range.

       The  ftrace  hardware  latency detector works by hogging all of the cpus for configurable amounts of time
       (by calling stop_machine()), polling the CPU Time Stamp Counter for some period, then looking for gaps in
       the TSC data. Any gap indicates a time when the polling was interrupted and since the machine is  stopped
       and interrupts turned off the only thing that could do that would be an SMI.

       The  hwlatdetector  script manages the mounting/unmounting of the debugfs as well as interacting with the
       ftrace hwlatdetector If the debugfs is already mounted then hwlatdetector will not  unmount  it  after  a
       run.

</pre><h4><b>OPTIONS</b></h4><pre>
       <b>--duration=&lt;time&gt;{s,m,d}</b>
              Run  the  detector  logic  in for the specified duration. The duration is a base 10 integer number
              that defaults to a value in seconds. An optional suffix may  be  specified  to  indicate  minutes,
              hours or days.

       <b>--threshold=&lt;microsecond</b> <b>value&gt;</b>
              Specify the TSC gap used to detect an SMI. Any gap value greater than &lt;threshold&gt; is considered to
              be the result of an SMI occurring.

       <b>--hardlimit=&lt;microsecond</b> <b>value&gt;</b>
              The test is considered to fail if a value above the hardlimit occurs.  This affects the exit value
              of hwlatdetect

       <b>--window=&lt;time</b> <b>value&gt;{us,ms,s,m,d}</b>
              specify the size of the sample window. Converted to microseconds when passed to the kernel.

       <b>--width=&lt;time</b> <b>value&gt;{us,ms,s,m,d}</b>
              The  amount of time within the sample window where the detector is actually sampling. Must be less
              than the --window value.

       <b>--report=FILENAME</b>
              Specify the output filename of the detector report. Default  behavior  is  to  print  to  standard
              output

       <b>--cpu-list=CPU-LIST</b>
              Specify the CPUs for hwlat thread to move across.

       <b>--debug</b>
              Turn on debug prints

       <b>--quiet</b>
              Turn off all information prints

       <b>--watch</b>
              print sample data to stdout as it arrives

</pre><h4><b>AUTHOR</b></h4><pre>
       <b>hwlatdetect</b> was written by Clark Williams &lt;<a href="mailto:williams@redhat.com">williams@redhat.com</a>&gt;
       <b>hwlat_detector.ko</b> was written by Jon Masters &lt;<a href="mailto:jcm@redhat.com">jcm@redhat.com</a>&gt;

                                                  May  12, 2009                                   <u><a href="../man8/HWLATDETECT.8.html">HWLATDETECT</a></u>(8)
</pre>
 </div>
</div></section>
</div>
</body>
</html>