<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HTB - Hierarchy Token Bucket</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/iproute2">iproute2_6.14.0-1ubuntu3_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       HTB - Hierarchy Token Bucket

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>tc</b>  <b>qdisc</b> <b>...</b> <b>dev</b> dev <b>(</b> <b>parent</b> classid <b>|</b> <b>root)</b> <b>[</b> <b>handle</b> major: <b>]</b> <b>htb</b> <b>[</b> <b>default</b> minor-id <b>]</b> <b>[</b> <b>r2q</b> divisor <b>]</b>
       <b>[</b> <b>offload</b> <b>]</b>

       <b>tc</b> <b>class</b> <b>...</b> <b>dev</b> dev <b>parent</b> major:[minor] <b>[</b> <b>classid</b> major:minor <b>]</b> <b>htb</b> <b>rate</b> rate <b>[</b> <b>ceil</b> rate <b>]</b> <b>burst</b> bytes
       <b>[</b> <b>cburst</b> bytes <b>]</b> <b>[</b> <b>prio</b> priority <b>]</b> <b>[</b> <b>quantum</b> bytes <b>]</b>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       HTB allows  control of the outbound bandwidth on a given link.  It allows simulating several slower links
       and to send different kinds of traffic on different simulated links. In both cases, you have  to  specify
       how  to divide the physical link into simulated links and how to decide which simulated link to use for a
       given packet to be sent.

       HTB shapes traffic based on the Token  Bucket  Filter  algorithm  which  does  not  depend  on  interface
       characteristics and so does not need to know the underlying bandwidth of the outgoing interface.

</pre><h4><b>SHAPING</b> <b>ALGORITHM</b></h4><pre>
       Shaping works as documented in <b>tc-tbf</b> <b>(8).</b>

</pre><h4><b>CLASSIFICATION</b></h4><pre>
       Within  the  one  HTB  instance  many classes may exist. Each of these classes contains another qdisc, by
       default <b><a href="../man8/tc-pfifo.8.html">tc-pfifo</a></b>(8).

       When enqueueing a packet, HTB starts at the root and uses various methods to determine which class should
       receive the data.

       In the absence of uncommon configuration options, the process is rather easy.  At each node we  look  for
       an  instruction,  and  then  go to the class the instruction refers us to. If the class found is a barren
       leaf-node (without children), we enqueue the packet there. If it is not yet a leaf node, we do the  whole
       thing over again starting from that node.

       The  following actions are performed, in order at each node we visit, until one sends us to another node,
       or terminates the process.

       (i)    Consult filters attached to the class. If sent to a leafnode, we are done.  Otherwise, restart.

       (ii)   If none of the above returned with an instruction, enqueue at this node.

       This algorithm makes sure that a packet always ends up somewhere, even while you are busy  building  your
       configuration.

</pre><h4><b>LINK</b> <b>SHARING</b> <b>ALGORITHM</b></h4><pre>
       FIXME

</pre><h4><b>QDISC</b></h4><pre>
       The root of a HTB qdisc class tree has the following parameters:

       parent major:minor | root
              This  mandatory  parameter  determines  the  place  of  the HTB instance, either at the <b>root</b> of an
              interface or within an existing class.

       handle major:
              Like all other qdiscs, the HTB can be assigned a handle. Should consist only of  a  major  number,
              followed by a colon. Optional, but very useful if classes will be generated within this qdisc.

       default minor-id
              Unclassified traffic gets sent to the class with this minor-id.

       r2q divisor
              Divisor  used  to  calculate  <b>quantum</b>  values  for  classes.   Classes divide <b>rate</b> by this number.
              Default value is 10.

       offload
              Offload the HTB algorithm to hardware (requires driver and device support).

</pre><h4><b>CLASSES</b></h4><pre>
       Classes have a host of parameters to configure their operation.

       parent major:minor
              Place of this class within the hierarchy. If attached directly to  a  qdisc  and  not  to  another
              class, minor can be omitted. Mandatory.

       classid major:minor
              Like qdiscs, classes can be named. The major number must be equal to the major number of the qdisc
              to which it belongs. Optional, but needed if this class is going to have children.

       prio priority
              In the round-robin process, classes with the lowest priority field are tried for packets first.

       rate rate
              Maximum rate this class and all its children are guaranteed. Mandatory.

       ceil rate
              Maximum  rate  at  which  a class can send, if its parent has bandwidth to spare.  Defaults to the
              configured rate, which implies no borrowing

       burst bytes
              Amount of bytes that can be burst at <b>ceil</b> speed, in excess of the configured <b>rate.</b>  Should  be  at
              least as high as the highest burst of all children.

       cburst bytes
              Amount  of  bytes  that can be burst at 'infinite' speed, in other words, as fast as the interface
              can transmit them. For perfect evening out, should be equal to at most one average packet.  Should
              be at least as high as the highest cburst of all children.

       quantum bytes
              Number  of  bytes  to serve from this class before the scheduler moves to the next class.  Default
              value is <b>rate</b> divided by the qdisc <b>r2q</b> parameter.  If specified, <b>r2q</b> is ignored.

</pre><h4><b>NOTES</b></h4><pre>
       Due to Unix timing constraints, the maximum ceil rate is not infinite and may in fact be  quite  low.  On
       Intel,  there  are  100 timer events per second, the maximum rate is that rate at which 'burst' bytes are
       sent each timer tick.  From this, the minimum burst size for a specified  rate  can  be  calculated.  For
       i386, a 10mbit rate requires a 12 kilobyte burst as 100*12kb*8 equals 10mbit.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man8/tc.8.html">tc</a></b>(8)

       HTB website: <a href="http://luxik.cdi.cz/~devik/qos/htb/">http://luxik.cdi.cz/~devik/qos/htb/</a>

</pre><h4><b>AUTHOR</b></h4><pre>
       Martin Devera &lt;<a href="mailto:devik@cdi.cz">devik@cdi.cz</a>&gt;. This manpage maintained by bert hubert &lt;<a href="mailto:ahu@ds9a.nl">ahu@ds9a.nl</a>&gt;

iproute2                                         10 January 2002                                          <u><a href="../man8/HTB.8.html">HTB</a></u>(8)
</pre>
 </div>
</div></section>
</div>
</body>
</html>