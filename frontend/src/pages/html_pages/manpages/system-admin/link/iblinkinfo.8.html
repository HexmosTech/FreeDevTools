<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IBLINKINFO - report link info for all links in the fabric</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/infiniband-diags">infiniband-diags_56.1-1ubuntu1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       IBLINKINFO - report link info for all links in the fabric

</pre><h4><b>SYNOPSIS</b></h4><pre>
       iblinkinfo &lt;options&gt;

</pre><h4><b>DESCRIPTION</b></h4><pre>
       iblinkinfo  reports link info for each port in an IB fabric, node by node.  Optionally, iblinkinfo can do
       partial scans and limit its output to parts of a fabric.

</pre><h4><b>OPTIONS</b></h4><pre>
       <b>--down,</b> <b>-d</b> Print only nodes which have a port in the "Down" state.

       <b>--line,</b> <b>-l</b> Print all information for each link on one line. Default is to print a header  with  the  node
       information and then a list for each port (useful for grep'ing output).

       <b>--additional,</b> <b>-p</b> Print additional port settings (&lt;LifeTime&gt;,&lt;HoqLife&gt;,&lt;VLStallCount&gt;)

       <b>--switches-only</b> Show only switches in output.

       <b>--cas-only</b> Show only CAs in output.

   <b>Partial</b> <b>Scan</b> <b>flags</b>
       The node to start a partial scan can be specified with the following addresses.

       <b>--port-guid,</b> <b>-G</b> <b>&lt;port_guid&gt;</b>  Specify a port_guid

       <b>-D,</b> <b>--Direct</b> <b>&lt;dr_path&gt;</b>     The address specified is a directed route

          Examples:
             -D "0"          # self port
             -D "0,1,2,1,4"  # out via port 1, then 2, ...

             (Note the second number in the path specified must match the port being
             used.  This can be specified using the port selection flag '-P' or the
             port found through the automatic selection process.)

       <b>Note:</b> For switches results are printed for all ports not just switch port 0.

       <b>--switch,</b> <b>-S</b> <b>&lt;port_guid&gt;</b> same as "-G". (provided only for backward compatibility)

       How much of the scan to be printed can be controlled with the following.

       <b>--all,</b>  <b>-a</b>  Print  all  nodes found in a partial fabric scan.  Normally a partial fabric scan will return
       only the node specified.  This option will print the other nodes found as well.

       <b>--hops,</b> <b>-n</b> <b>&lt;hops&gt;</b> Specify the number of hops away from a specified node  to  scan.   This  is  useful  to
       expand a partial fabric scan beyond the node specified.

   <b>Cache</b> <b>File</b> <b>flags</b>
       <b>--load-cache</b> <b>&lt;filename&gt;</b> Load and use the cached ibnetdiscover data stored in the specified filename.  May
       be useful for outputting and learning about other fabrics or a previous state of a fabric.

       <b>--diff</b>  <b>&lt;filename&gt;</b>  Load  cached  ibnetdiscover  data  and do a diff comparison to the current network or
       another cache.  A special diff output for ibnetdiscover output  will  be  displayed  showing  differences
       between  the  old  and current fabric.  By default, the following are compared for differences: switches,
       channel adapters, routers, and port connections.

       <b>--diffcheck</b> <b>&lt;key(s)&gt;</b> Specify what diff checks should be done in the <b>--diff</b> option above.  Comma  separate
       multiple  diff check key(s).  The available diff checks are: <b>port</b> = port connections, <b>state</b> = port state,
       <b>lid</b> = lids, <b>nodedesc</b> = node descriptions.  Note that <b>port</b>, <b>lid</b>, and <b>nodedesc</b> are  checked  only  for  the
       node  types  that  are  specified (e.g.  <b>switches-only</b>, <b>cas-only</b>).  If <b>port</b> is specified alongside <b>lid</b> or
       <b>nodedesc</b>, remote port lids and node descriptions will also be compared.

       <b>--filterdownports</b> <b>&lt;filename&gt;</b> Filter downports  indicated  in  a  ibnetdiscover  cache.   If  a  port  was
       previously indicated as down in the specified cache, and is still down, do not output it in the resulting
       output.   This option may be particularly useful for environments where switches are not fully populated,
       thus much of the default iblinkinfo info is considered useless.  See  <b>ibnetdiscover</b>  for  information  on
       caching ibnetdiscover output.

   <b>Port</b> <b>Selection</b> <b>flags</b>
       <b>-C,</b> <b>--Ca</b> <b>&lt;ca_name&gt;</b>    use the specified ca_name.

       <b>-P,</b> <b>--Port</b> <b>&lt;ca_port&gt;</b>    use the specified ca_port.

   <b>Local</b> <b>port</b> <b>Selection</b>
       Multiple  port/Multiple  CA  support:  when  no  IB  device  or  port  is  specified (see the "local umad
       parameters" below), the libibumad library selects the port to use by the following criteria:

          1. the first port that is ACTIVE.

          2. if not found, the first port that is UP (physical link up).

          If a port and/or CA name is specified, the libibumad library attempts to fulfill the user request, and
          will fail if it is not possible.

          For example:

              ibaddr                 # use the first port (criteria #1 above)
              ibaddr -C mthca1       # pick the best port from "mthca1" only.
              ibaddr -P 2            # use the second (active/up) port from the first available IB device.
              ibaddr -C mthca0 -P 2  # use the specified port only.

   <b>Configuration</b> <b>flags</b>
       <b>--config,</b> <b>-z</b>  <b>&lt;config_file&gt;</b> Specify alternate config file.
          Default: /etc/infiniband-diags/ibdiag.conf

       <b>--outstanding_smps,</b> <b>-o</b> <b>&lt;val&gt;</b>
              Specify the number of outstanding SMP's which should be issued during the scan

              Default: 2

       <b>--node-name-map</b> <b>&lt;node-name-map&gt;</b> Specify a node name map.
          This file maps GUIDs to more user friendly names.  See FILES section.

       <b>-t,</b> <b>--timeout</b> <b>&lt;timeout_ms&gt;</b> override the default timeout for the solicited mads.

       <b>-y,</b> <b>--m_key</b> <b>&lt;key&gt;</b>
              use the specified M_key for requests. If non-numeric value (like 'x') is specified  then  a  value
              will be prompted for.

   <b>Debugging</b> <b>flags</b>
       <b>-e</b>     show send and receive errors (timeouts and others)

       <b>-h,</b> <b>--help</b>      show the usage message

       <b>-v,</b> <b>--verbose</b>
              increase the application verbosity level.  May be used several times (-vv or -v -v -v)

       <b>-V,</b> <b>--version</b>     show the version info.

</pre><h4><b>EXIT</b> <b>STATUS</b></h4><pre>
       0 on success, -1 on failure to scan the fabric, 1 if check mode is used and inconsistencies are found.

</pre><h4><b>FILES</b></h4><pre>
   <b>CONFIG</b> <b>FILE</b>
       /etc/infiniband-diags/ibdiag.conf

       A  global  config  file is provided to set some of the common options for all tools.  See supplied config
       file for details.

   <b>NODE</b> <b>NAME</b> <b>MAP</b> <b>FILE</b> <b>FORMAT</b>
       The node name map is used to specify user friendly names for nodes in the  output.   GUIDs  are  used  to
       perform the lookup.

       This  functionality is provided by the opensm-libs package.  See <b><a href="../man8/opensm.8.html">opensm</a>(8)</b> for the file location for your
       installation.

       <b>Generically:</b>

          # comment
          &lt;guid&gt; "&lt;name&gt;"

       <b>Example:</b>

          # IB1
          # Line cards
          0x0008f104003f125c "IB1 (Rack 11 slot 1   ) ISR9288/ISR9096 Voltaire sLB-24D"
          0x0008f104003f125d "IB1 (Rack 11 slot 1   ) ISR9288/ISR9096 Voltaire sLB-24D"
          0x0008f104003f10d2 "IB1 (Rack 11 slot 2   ) ISR9288/ISR9096 Voltaire sLB-24D"
          0x0008f104003f10d3 "IB1 (Rack 11 slot 2   ) ISR9288/ISR9096 Voltaire sLB-24D"
          0x0008f104003f10bf "IB1 (Rack 11 slot 12  ) ISR9288/ISR9096 Voltaire sLB-24D"

          # Spines
          0x0008f10400400e2d "IB1 (Rack 11 spine 1   ) ISR9288 Voltaire sFB-12D"
          0x0008f10400400e2e "IB1 (Rack 11 spine 1   ) ISR9288 Voltaire sFB-12D"
          0x0008f10400400e2f "IB1 (Rack 11 spine 1   ) ISR9288 Voltaire sFB-12D"
          0x0008f10400400e31 "IB1 (Rack 11 spine 2   ) ISR9288 Voltaire sFB-12D"
          0x0008f10400400e32 "IB1 (Rack 11 spine 2   ) ISR9288 Voltaire sFB-12D"

          # GUID   Node Name
          0x0008f10400411a08 "SW1  (Rack  3) ISR9024 Voltaire 9024D"
          0x0008f10400411a28 "SW2  (Rack  3) ISR9024 Voltaire 9024D"
          0x0008f10400411a34 "SW3  (Rack  3) ISR9024 Voltaire 9024D"
          0x0008f104004119d0 "SW4  (Rack  3) ISR9024 Voltaire 9024D"

</pre><h4><b>AUTHOR</b></h4><pre>
       <b>Ira</b> <b>Weiny</b>
              &lt;  &lt;<a href="mailto:ira.weiny@intel.com">ira.weiny@intel.com</a>&gt;  &gt;

                                                   2018-07-09                                      <u><a href="../man8/IBLINKINFO.8.html">IBLINKINFO</a></u>(8)
</pre>
 </div>
</div></section>
</div>
</body>
</html>