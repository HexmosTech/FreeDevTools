<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>bbstoreaccounts - Box Backup store accounts manager</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/boxbackup-server">boxbackup-server_0.13~~git20231028.g3dd5194+ds-4_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       bbstoreaccounts - Box Backup store accounts manager

</pre><h4><b>SYNOPSIS</b></h4><pre>

       <b>bbstoreaccounts</b> [-c config-file] command account-id [command-specific arguments]

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>bbstoreaccounts</b> is the tool for managing accounts on the store server. It can be used to view information
       related to accounts, as well as create, change and delete accounts on the store server.

       <b>bbstoreaccounts</b> always takes at least 2 parameters: the command name and the account ID. Some commands
       require additional parameters, and some commands have optional parameters.

   <b>Options</b>
       <b>-c</b> <b>config-file</b>
           The configfile to use for connecting to the store. Default is <u>/etc/box/bbstored.conf</u>.

   <b>Commands</b>
       The commands tells bbstoreaccounts what action to perform.

       <b>check</b> <u>account-id</u> [fix]
           The <b>check</b> command verifies the integrity of the store account given, and optionally fixes any
           corruptions.  <b>Note</b>: It is recommended to run the 'simple' check command (without <b>fix</b>) before using
           the <b>fix</b> option. This gives an overview of the extent of any problems, before attempting to fix them.

       <b>create</b> <u>account-id</u> <u>disc-set</u> <u>soft-limit</u> <u>hard-limit</u>
           Creates a new store account with the parameters given. The parameters are as follows:

           <b>account-id</b>
               The ID of the new account to be created. A 32-bit hexadecimal number. Cannot already exist on the
               server.

           <b>disc-set</b>
               The disc set from <b><a href="../man5/raidfile.conf.5.html">raidfile.conf</a></b>(5) where the backups for this client will be stored. A number.
               Each RAID-file set has a number in raidfile.conf. This number is what's used.

           <b>soft-limit</b>
               The soft limit is the amount of storage that the server will guarantee to be available for
               storage.

           <b>hard-limit</b>
               The amount of storage that the the server will allow, before rejecting uploads, and starting to
               eliminate old and deleted files to get back down to soft-limit.

       <b>delete</b> <u>account-id</u> [yes]
           Deletes the account from the store server completely. Removes all backups and deletes all references
           to the account in the config files.

           <b>delete</b> will ask for confirmation from the user, when called. Using the <b>yes</b> flag, eliminates that
           need. This is useful when deleting accounts from within a script or some other automated means. 0

       <b>info</b> <u>account-id</u>
           Display information about the given account. Example:

               [root]# bbstoreaccounts info 1
                                 Account ID: 00000001
                             Last object ID: 58757
                                Blocks used: 9864063 (38531.50Mb)
                   Blocks used by old files: 62058 (242.41Mb)
               Blocks used by deleted files: 34025 (132.91Mb)
                 Blocks used by directories: 6679 (26.09Mb)
                           Block soft limit: 11796480 (46080.00Mb)
                           Block hard limit: 13107200 (51200.00Mb)
                        Client store marker: 1139559852000000

           Explanation:

           Account ID
               The account ID being displayed.

           Last Object ID
               A counter that keeps track of the objects that have been backed up. This number refers to the
               last file that was written to the store. The ID is displayed as a decimal number, and the object
               ID can be converted to a path name to a file as follows: convert the number to hex (e.g.: 58757
               =&gt; 0xE585); The last backed up file will be (relative from the client's store root): <u>e5/o85.rfw</u>.
               Longer numbers infer more directories in the structure, so as an example 3952697264 as the last
               object ID gives 0xEB995FB0, which translates to a backup pathname of <u>eb/99/5f/ob0.rfw</u>.

           Blocks used
               The number of blocks used by the store. The size in Mb depends on the number of blocks, as well
               as the block size for the disc set given in <b><a href="../man5/raidfile.conf.5.html">raidfile.conf</a></b>(5). In this case the block size is
               4096.

           Blocks used by old files
               The number of blocks occupied by files that have newer versions in the store. This data is at
               risk for being removed during housekeeping.

           Blocks used by deleted files
               The number of blocks used by files that have been deleted on the client. This data is at risk for
               being removed during housekeeping.

           Blocks used by directories
               The number of blocks used by directories in the store.

           Block soft limit
               The soft limit in blocks. The soft limit is the maximum guaranteed storage space available to the
               account. When housekeeping starts, and the old and deleted files are removed, they are removed in
               chronological order (oldest first), until the data used is less than the soft limit.

           Block hard limit
               The hard limit in blocks. The hard limit is the most amount of storage the server will allow in
               an account. Any data above this amount will be rejected. Housekeeping will reduce the storage
               use, so more data can be uploaded.

           Client store marker
               <b><a href="../man8/bbstored.8.html">bbstored</a></b>(8) uses this number to determine if it needs to rescan the entire store. If this number
               is different from the last time it checked, a rescan will take place.

       <b>setlimit</b> <u>account-id</u> <u>soft-limit</u> <u>hard-limit</u>
           Changes the storage space allocation for the given account. No server restart is needed.

           Parameters:

           <b>account-id</b>
               The ID of the account to be modified.

           <b>soft-limit</b>
               The soft limit is the amount of storage that the server will guarantee to be available for
               storage.

           <b>hard-limit</b>
               The amount of storage that the the server will allow before rejecting uploads and starting to
               eliminate old and deleted files to get back down to <b>soft-limit</b>.

</pre><h4><b>EXAMPLES</b></h4><pre>
       Create an account with ID 3af on disc set 0, with a 20GB soft-limit and a 22GB hard-limit:

           bbstoreaccounts create 3af 0 20G 22G

       Alter existing account ID 20 to have a 50GB soft-limit and a 55GB hard-limit:

           bbstoreaccounts setlimit 20 50G 55G

</pre><h4><b>FILES</b></h4><pre>
       <u>/etc/box/bbstored/accounts.txt</u>

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man8/bbstored.8.html">bbstored</a></b>(8), <b><a href="../man8/bbstored-config.8.html">bbstored-config</a></b>(8)

</pre><h4><b>AUTHORS</b></h4><pre>
       Ben Summers

       Per Thomsen

       James O'Gorman

Box Backup 0.11                                    06/06/2024                                 <u><a href="../man8/BBSTOREACCOUNTS.8.html">BBSTOREACCOUNTS</a></u>(8)
</pre>
 </div>
</div></section>
</div>
</body>
</html>