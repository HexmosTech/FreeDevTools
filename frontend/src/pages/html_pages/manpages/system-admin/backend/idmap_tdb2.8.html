<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>idmap_tdb2 - Samba's idmap_tdb2 Backend for Winbind</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/winbind">winbind_4.22.3+dfsg-4ubuntu1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       idmap_tdb2 - Samba's idmap_tdb2 Backend for Winbind

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The idmap_tdb2 plugin is a substitute for the default idmap_tdb backend used by winbindd for storing
       SID/uid/gid mapping tables in clustered environments with Samba and CTDB.

       In contrast to read only backends like idmap_rid, it is an allocating backend: This means that it needs
       to allocate new user and group IDs in order to create new mappings.

</pre><h4><b>IDMAP</b> <b>OPTIONS</b></h4><pre>
       range = low - high
           Defines the available matching uid and gid range for which the backend is authoritative.

       script
           This option can be used to configure an external program for performing id mappings instead of using
           the tdb counter. The mappings are then stored int tdb2 idmap database. For details see the section on
           IDMAP SCRIPT below.

</pre><h4><b>IDMAP</b> <b>SCRIPT</b></h4><pre>
       The tdb2 idmap backend supports an external program for performing id mappings through the smb.conf
       option <u>idmap</u> <u>config</u> <u>*</u> <u>:</u> <u>script</u> or its deprecated legacy form <u>idmap</u> <u>:</u> <u>script</u>.

       The mappings obtained by the script are then stored in the idmap tdb2 database instead of mappings
       created by the incrementing id counters. It is therefore important that the script covers the complete
       range of SIDs that can be passed in for SID to Unix ID mapping, since otherwise SIDs unmapped by the
       script might get mapped to IDs that had previously been mapped by the script.

       The script should accept the following command line options.

                SIDTOID S-1-xxxx
                IDTOSID UID xxxx
                IDTOSID GID xxxx

       And it should return one of the following responses as a single line of text.

                UID:yyyy
                GID:yyyy
                SID:yyyy
                ERR:yyyy

</pre><h4><b>EXAMPLES</b></h4><pre>
       This example shows how tdb2 is used as the default idmap backend.

                [global]
                idmap config * : backend = tdb2
                idmap config * : range = 1000000-2000000

       This example shows how tdb2 is used as the default idmap backend using an external program via the script
       parameter:

                [global]
                idmap config * : backend = tdb2
                idmap config * : range = 1000000-2000000
                idmap config * : script = /usr/local/samba/bin/idmap_script.sh

</pre><h4><b>AUTHOR</b></h4><pre>
       The original Samba software and related utilities were created by Andrew Tridgell. Samba is now developed
       by the Samba Team as an Open Source project similar to the way the Linux kernel is developed.

Samba 4.22.3-Ubuntu-4.22.3+dfs                     07/21/2025                                      <u><a href="../man8/IDMAP_TDB2.8.html">IDMAP_TDB2</a></u>(8)
</pre>
 </div>
</div></section>
</div>
</body>
</html>