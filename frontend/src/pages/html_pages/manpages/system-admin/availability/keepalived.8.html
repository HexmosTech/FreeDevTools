<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>keepalived - load-balancing and high-availability service</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/keepalived">keepalived_2.3.3-1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       keepalived - load-balancing and high-availability service

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>keepalived</b> [<b>-f</b>|<b>--use-file</b>=FILE] [<b>-P</b>|<b>--vrrp</b>] [<b>-C</b>|<b>--check</b>] [<b>-B</b>|<b>--no_bfd</b>] [<b>--all</b>] [<b>-l</b>|<b>--log-console</b>]
       [<b>-D</b>|<b>--log-detail</b>] [<b>-S</b>|<b>--log-facility</b>={0-7|local{0-7}|user|daemon}] [<b>-g</b>|<b>--log-file</b>=FILE]
       [<b>--flush-log-file</b>] [<b>-G</b>|<b>--no-syslog</b>] [<b>-X</b>|<b>--release-vips</b>] [<b>-V</b>|<b>--dont-release-vrrp</b>] [<b>-I</b>|<b>--dont-release-ipvs</b>]
       [<b>-R</b>|<b>--dont-respawn</b>] [<b>-n</b>|<b>--dont-fork</b>] [<b>-d</b>|<b>--dump-conf</b>] [<b>-p</b>|<b>--pid</b>=FILE] [<b>-r</b>|<b>--vrrp_pid</b>=FILE] [<b>-T</b>|<b>--genhash</b>]
       [<b>-c</b>|<b>--checkers_pid</b>=FILE] [<b>-a</b>|<b>--address-monitoring</b>] [<b>-b</b>|<b>--bfd_pid</b>=FILE] [<b>-s</b>|<b>--namespace</b>=NAME] [<b>-e</b>|<b>--all-</b>
       <b>config</b>] [<b>-i</b>|<b>--config-id</b> id] [<b>-x</b>|<b>--snmp</b>] [<b>-A</b>|<b>--snmp-agent-socket</b>=FILE] [<b>-u</b>|<b>--umask</b>=NUMBER]
       [<b>-m</b>|<b>--core-dump</b>] [<b>-M</b>|<b>--core-dump-pattern</b>[=PATTERN]] [<b>--signum</b>=SIGFUNC] [<b>-t</b>|<b>--config-test</b>[=FILE]]
       [<b>--perf</b>[={all|run|end}]] [<b>--debug</b>[=debug-options]] [<b>--no-mem-check</b>] [<b>--ignore-sigint</b>] [<b>-v</b>|<b>--version</b>]
       [<b>-h</b>|<b>--help</b>]

</pre><h4><b>DESCRIPTION</b></h4><pre>
       Keepalived provides simple and robust facilities for load-balancing and high-availability. The
       load-balancing framework relies on the well-known and widely used Linux Virtual Server (IPVS) kernel
       module providing Layer4 load-balancing. Keepalived implements a set of checkers to dynamically and
       adaptively maintain and manage a load-balanced server pool according to their health. Keepalived also
       implements the VRRPv2 and VRRPv3 protocols to achieve high-availability with director failover.

</pre><h4><b>OPTIONS</b></h4><pre>
        <b>-f,</b> <b>--use-file</b>=FILE
              Use    the    specified    configuration    file.    The    default    configuration    file    is
              "/etc/keepalived/keepalived.conf".

        <b>-P,</b> <b>--vrrp</b>
              Only run the VRRP subsystem. This is useful for configurations that  do  not  use  the  IPVS  load
              balancer.

        <b>-C,</b> <b>--check</b>
              Only  run  the  healthcheck  subsystem.  This  is useful for configurations that use the IPVS load
              balancer with a single director with no failover.

        <b>-B,</b> <b>--no_bfd</b>
              Don't run the BFD subsystem.

        <b>--all</b> Run all subsystems, even if they have no configuration.

        <b>-l,</b> <b>--log-console</b>
              Log messages to the local console. The default behavior is to log messages to syslog.

        <b>-D,</b> <b>--log-detail</b>
              Detailed log messages.

        <b>-S,</b> <b>--log-facility</b>={0-7|local{0-7}|user|daemon}
              Set syslog facility to LOG_LOCAL[0-7], LOG_USER or LOG_DAEMON.  The  default  syslog  facility  is
              LOG_DAEMON.

        <b>-g,</b> <b>--log-file</b>=FILE
              Write  log  entries  to  FILE. FILE will have _vrrp, _healthcheckers, and _bfd inserted before the
              last '.' in FILE for the log output for those processes.

        <b>--flush-log-file</b>
              If using the -g option, the log file stream will be flushed after each write.

        <b>-G,</b> <b>--no-syslog</b>
              Do not write log entries to syslog. This can be useful if the  rate  of  writing  log  entries  is
              sufficiently high that syslog will rate limit them, and the -g option is used instead.

        <b>-X,</b> <b>--release-vips</b>
              Drop VIP on transition from signal.

        <b>-V,</b> <b>--dont-release-vrrp</b>
              Don't  remove VRRP VIPs and VROUTEs on daemon stop. The default behavior is to remove all VIPs and
              VROUTEs when keepalived exits.

        <b>-I,</b> <b>--dont-release-ipvs</b>
              Don't remove IPVS topology on daemon stop. The default behavior it to remove all entries from  the
              IPVS virtual server table when keepalived exits.

        <b>-R,</b> <b>--dont-respawn</b>
              Don't  respawn  child processes. The default behavior is to restart the VRRP and checker processes
              if either process exits.

        <b>-n,</b> <b>--dont-fork</b>
              Don't fork the daemon process. This option will cause keepalived to run in the foreground.

        <b>-d,</b> <b>--dump-conf</b>
              Dump the configuration data.

        <b>-p,</b> <b>--pid</b>=FILE
              Use the specified pidfile for the parent keepalived process. The default pidfile for keepalived is
              "/run/keepalived.pid", unless a network namespace is being used. See  <b>NAMESPACES</b>  below  for  more
              details.

        <b>-r,</b> <b>--vrrp_pid</b>=FILE
              Use  the  specified  pidfile  for  the  VRRP child process. The default pidfile for the VRRP child
              process is "/run/keepalived_vrrp.pid", unless a network namespace is being used.

        <b>-T,</b> <b>--genhash</b>
              Enter genhash utility mode. Previous versions of keepalived were shipped with a dedicated  genhash
              utility.  genhash  is  now  part of the mainline code. We keep compatibility with previous genhash
              utility command line option. For more information please refer to the <a href="../man1/genhash.1.html">genhash</a>(1) manpage.

        <b>-c,</b> <b>--checkers_pid</b>=FILE
              Use the specified pidfile for checkers child process. The default pidfile for  the  checker  child
              process is "/run/keepalived_checkers.pid" unless a network namespace is being used.

        <b>-a,</b> <b>--address-monitoring</b>
              Log all address additions/deletions reported by netlink.

        <b>-b,</b> <b>--bfd_pid</b>=FILE
              Use the specified pidfile for the BFD child process. The default pidfile for the BFD child process
              is "/run/keepalived_bfd.pid" unless a network namespace is being used.

        <b>-s,</b> <b>--namespace</b>=NAME
              Run keepalived in network namespace NAME. See <b>NAMESPACES</b> below for more details.

        <b>-e,</b> <b>--all-config</b>
              Don't load if any configuration file is missing or cannot be read.

        <b>-i,</b> <b>--config-id</b> <b>ID</b>
              Use  configuration  id  ID, for conditional configuration (defaults to hostname without the domain
              name).

        <b>-x,</b> <b>--snmp</b>
              Enable the SNMP subsystem.

        <b>-A,</b> <b>--snmp-agent-socket</b>=FILE
              Use the specified socket for connection to SNMP master agent.

        <b>-u,</b> <b>--umask</b>=NUMBER
              The umask specified in the usual numeric way - see man <a href="../man2/umask.2.html">umask</a>(2)

        <b>-m,</b> <b>--core-dump</b>
              Override the RLIMIT_CORE hard and soft limits to enable keepalived to produce a  coredump  in  the
              event of a segfault or other failure.  This is most useful if keepalived has been built with 'make
              debug'.  Core dumps will be created in /, unless keepalived is run with the --dont-fork option, in
              which  case  they  will be created in the directory from which keepalived was run, or they will be
              created in the directory of a configuraton file if the fault occurs while reading the file.

        <b>-M,</b> <b>--core-dump-pattern</b>[=PATTERN]
              Sets option --core-dump, and also updates <a href="file:/proc/sys/kernel/core_pattern">/proc/sys/kernel/core_pattern</a> to the pattern  specified,
              or  'core'  if  none specified.  Provided the parent process doesn't terminate abnormally, it will
              restore <a href="file:/proc/sys/kernel/core_pattern">/proc/sys/kernel/core_pattern</a> to its original value on exit.

              <b>Note:</b> This will also affect any other process producing a core dump while keepalived is running.

        <b>--signum</b>=PATTERN
              Returns the signal number to use for STOP, RELOAD, DATA, STATS, STATS_CLEAR, JSON and TDATA.   For
              example, to stop keepalived running, execute:

              kill -s $(keepalived --signum=STOP) $(cat /run/keepalived.pid)

        <b>-t,</b> <b>--config-test</b>[=FILE]
              Keepalived  will  check  the  configuration  file  and exit with non-zero exit status if there are
              errors in the configuration, otherwise it exits with exit status 0  (see  <b>Exit</b>  <b>status</b>  below  for
              details).

              Rather  that  writing  to  syslog,  it  will  write  diagnostic  messages to stderr unless file is
              specified, in which case it will write to the file.

        <b>--perf</b>[={all|run|end}]
              Record perf data for vrrp process. Data will be written to /perf_vrrp.data.  The data recorded  is
              for use with the perf tool.

        <b>--no-mem-check</b>
              Disable malloc() etc mem-checks if they have been compiled into keepalived.

        <b>--ignore-sigint</b>
              Disable  SIGINT  handling  (defaults  to  terminating  keepalived).  This  is  needed  for running
              keepalived under GDB.

        <b>--debug</b>[=debug-options]]
              Enables debug options if they have been compiled into keepalived.  <u>debug-options</u> is made up  of  a
              sequence of strings of the form Ulll.
              The  upper  case  letter  specifies the debug option, and the lower case letters specify for which
              processes the option is to be enabled.
              If a debug option is not followed by any lower case letters, the debug option is enabled  for  all
              processes.

              The characters to identify the processes are:
              Chr   Process
              ──────────────────────
               p    Parent process
               b    BFD process
               c    Checker process
               v    VRRP process

              The characters used to identify the debug options are:
              Chr   Debug option
              ────────────────────────────────────────────
               D    Epoll thread dump
               E    Epoll debug
               F    VRRP fd debug
               N    Netlink timers
               P    Network timestamp
               X    Regex timers
               M    Email alert debug
               T    Timer debug
               S    TSM debug
               R    Regex debug
               B    Smtp connect debug
               U    Checksum diagnostics
               O    Track process debug
               A    Track process debug with extra detail
               C    Parser (config) debug
               H    Checker debug
               Z    Memory alloc/free error debug
               G    VRRP recvmsg() debug
               J    VRRP recvmsg() log rx data
               V    Script debugging
               K    Dump keywords

              <b>Example:</b> --debug=DvEcvNR

        <b>-v,</b> <b>--version</b>
              Display the version and exit.

        <b>-h,</b> <b>--help</b>
              Display this help message and exit.

   <b>Exit</b> <b>status:</b>
       0      if OK

       1      if unable to malloc memory

       2      if cannot initialise subsystems

       3      if running with --config-test and configuration cannot be run

       4      if  running  with  --config-test  and there are configuration errors but keepalived will run after
              modifying the configuration

       5      if running with --config-test and script security hasn't been enabled but scripts are configured.

</pre><h4><b>NAMESPACES</b></h4><pre>
       <b>keepalived</b> can be run in a network namespace (see <b><a href="../man5/keepalived.conf.5.html">keepalived.conf</a></b>(5) for configuration details). When run
       in    a    network    namespace,    a    local    mount    namespace     is     also     created,     and
       /run/keepalived/keepalived_NamespaceName  is  mounted  on /run/keepalived. By default, pid files with the
       usual default names are then created in /run/keepalived from the perspective of a process  in  the  mount
       namespace,  and they will be visible in /run/keepalived/keepalived_NamespaceName for a process running in
       the default mount namespace.

</pre><h4><b>SIGNALS</b></h4><pre>
       <b>keepalived</b> reacts to a set of signals.  You can send a signal to the parent <b>keepalived</b> process using  the
       following:

              kill -SIGNAL $(cat /run/keepalived.pid)

       or better:

              kill -s $(keepalived --signum=SIGFUNC) $(cat /run/keepalived.pid)

       Note  that if the first option is used, -SIGNAL must be replaced with the actual signal you are trying to
       send, e.g. with HUP. So it then becomes:

              kill -HUP $(cat /run/keepalived.pid)

       Signals other than for STOP, RELOAD, DATA and STATS may change depending on the  kernel,  and  also  what
       functionality is included in the version of the keepalived depending on the build options used.

       <b>HUP</b> or <b>SIGFUNC=RELOAD</b>
              This  causes  <b>keepalived</b> to close down all interfaces, reload its configuration, and start up with
              the new configuration.

              <b>Note:</b> If a virtual_ipaddress, virtual_route or virtual_rule is being moved from one VRRP  instance
              to   another   one,   two   reloads   will   be   necessary,  the  first  to  remove  the  virtual
              ipaddress/route/rule, and the second reload to add it to  the  VRRP  instance  it  is  now  to  be
              configured  on.  Failing to do this can result in the ipaddress/route/rule not being configured on
              the new instance if both the old and new instances are in master state.  It will usually work with
              a single reload, however, if either of the VRRP instances is not in MASTER state or  if  the  VRRP
              instance  the  ipaddress/route/rule  the  VRRP instance is being <b>added</b> <b>to</b> is later in the original
              configuration file than the instance it is being removed  from.   <b>Note2:</b>  If  a  configuration  is
              running  with  SNMP  enable,  and  then a reload is done with a configuration that does not enable
              SNMP, it is not possible to subsequently re-enable SNMP. The reason  for  this  is  not  currently
              understood.

       <b>TERM</b>, <b>INT</b> or <b>SIGFUNC=STOP</b>
              <b>keepalived</b> will shut down.

       <b>USR1</b> or <b>SIGFUNC=DATA</b>
              Write configuration data to <b>/tmp/keepalived.data</b> <b>or</b> <b>file</b> <b>configured</b> <b>by</b> <b>state_dump_file</b>

       <b>USR2</b> or <b>SIGFUNC=STATS</b>
              Write statistics info to <b>/tmp/keepalived.stats</b> <b>or</b> <b>file</b> <b>configured</b> <b>by</b> <b>stats_dump_file</b>

       <b>SIGFUNC=STATS_CLEAR</b>
              Write statistics info to <b>/tmp/keepalived.stats</b> <b>or</b> <b>file</b> <b>configured</b> <b>by</b> <b>stats_dump_file</b> and clear the
              statistics counters

       <b>SIGFUNC=JSON</b>
              Write   configuration   data  in  JSON  format  to  <b>/tmp/keepalived.json</b>  <b>or</b>  <b>file</b>  <b>configured</b>  <b>by</b>
              <b>json_dump_file</b>

       <b>SIGFUNC=TDATA</b>
              This causes <b>keepalived</b> to write the current state of its internal threads to the log

</pre><h4><b>USING</b> <b>KEEPALIVED</b> <b>WITH</b> <b>FIREWALLD</b></h4><pre>
       If you are running a firewall (see <b><a href="../man8/firewalld.8.html">firewalld</a></b>(8)<b>)</b>  you  must  allow  VRRP  protocol  traffic  through  the
       firewall. For example if this instance of <b><a href="../man8/keepalived.8.html">keepalived</a>(8)</b> has a peer node on IPv4 address 192.168.0.1:

              # firewall-cmd \
                  --add-rich-rule="rule family='ipv4' \
                                   source address='192.168.0.1' \
                                   protocol value='vrrp' accept" --permanent
              # firewall-cmd --reload

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man5/keepalived.conf.5.html">keepalived.conf</a></b>(5), <b><a href="../man8/ipvsadm.8.html">ipvsadm</a></b>(8)

</pre><h4><b>AUTHOR</b></h4><pre>
       This man page was written by Ryan O'Hara &lt;<a href="mailto:rohara@redhat.com">rohara@redhat.com</a>&gt;

                                                   2025-03-29                                      <u><a href="../man8/KEEPALIVED.8.html">KEEPALIVED</a></u>(8)
</pre>
 </div>
</div></section>
</div>
</body>
</html>