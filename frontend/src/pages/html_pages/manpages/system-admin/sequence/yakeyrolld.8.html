<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>YAKEYROLLD - utility for generating a sequence of KSK and ZSK for a zone.</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/yadifa">yadifa_3.0.2-3_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       YAKEYROLLD - utility for generating a sequence of KSK and ZSK for a zone.

</pre><h4><b>SYNOPSIS</b></h4><pre>
       yakeyrolld <b>command</b> [<u>argument</u>]

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The  yakeyrolld  program  generates  a  sequence  of  <u>KSK</u> and <u>ZSK</u> for a zone, with all the steps of their
       lifecycles.

       yakeyrolld is part of the YADIFA distribution from EURid vzw/asbl. The latest version of  YADIFA  can  be
       found on:
                                             <b><a href="http://www.yadifa.eu/download">http://www.yadifa.eu/download</a></b>

</pre><h4><b>LIFECYCLE</b></h4><pre>
       A lifecyle for a key has several steps:

       <b>*</b>      Time of creation

       <b>*</b>      Time of publication

       <b>*</b>      Time of activation

       <b>*</b>      Time of de-activation

       <b>*</b>      Time of un-publication.

       These times are determined using a cron-like schedule.

       For all these steps, it computes the following:

       <b>*</b>      The expected <u>DNSSEC</u> and <u>RRSIG</u> <u>DNSSEC</u> records on the primary before the step is started

       <b>*</b>      The <u>ZSK</u> files to add

       <b>*</b>      The <u>ZSK</u> files to remove

       <b>*</b>      The <u>DNSSEC</u> and <u>RRSIG</u> <u>DNSKEY</u> records to add

       <b>*</b>      The <u>DNSKEY</u> and <u>RRSIG</u> <u>DNSKEY</u> records to remove

       <b>*</b>      The expected <u>DNSKEY</u> and <u>RRSIG</u> <u>DNSKEY</u> records on the dns primary after the step has been completed.

       Each step is stored as a file. The file contains fields like:

       <b>epochus</b>  An integer with the epoch of the step expressed in microseconds.

       <b>dateus</b>  A user-friendly date text matching the epochus field.

       <b>actions</b>  A list of actions expected to happen on the step (informational).

       <b>debug</b>  A text meant to help understand the step (informational).

       <b>update</b>  Each entry is a dynamic update command to be sent to the server.

       <b>expect</b>  Each entry defines one record expected to be in the zone on the server prior to executing the
       current step.

       <b>endresult</b>  Each entry defines one record expected to be in the zone on the server after the step has been
       executed.

       <b>add</b>  Defines a key file to create in <u>keys-path</u>.

       <b>del</b>  Names a key file to delete from <u>keys-path</u>.

</pre><h4><b>COMMANDS</b></h4><pre>
       <b>--help|-h</b>  Shows the help

       <b>--version|-V</b>  Prints the version of the software

       <b>--config|-c</b>  <u>configfile</u> Sets the configuration file to use

       <b>--mode|-m</b>  <u>generate</u> <u>|</u> <u>play</u> <u>|</u> <u>playloop</u> <u>|</u> <u>print</u> <u>|</u> <u>print-json</u>  Sets the program mode

       <b>--domain</b>  <u>fqdn</u> The domain name

       <b>--path|-p</b>  <u>directory</u> The directory where to store the keys

       <b>--server|-s</b>  <u>address</u> The address of the server

       <b>--ttl|-t</b>  <u>seconds</u> The <u>ttl</u> to use for both <u>dnskey</u> and <u>rrsig</u> records

       <b>--explain</b>  prints the planned schedule

       <b>--reset</b>  start by removing all the keys and create a new KSK and a new ZSK. The server will not be
       queried.

       <b>--policy</b>  Name of the policy to use

       <b>--from</b>  <u>time</u> The lower time bound covered by the plan (now)

       <b>--until</b>  <u>time</u> The upper time bound covered by the plan (+1y)

       <b>--dryrun</b>  Do not write files to disk, do not send updates to the server

       <b>--wait</b>  Wait for yadifad to answer before starting to work (default)

       <b>--nowait</b>  Do not wait for yadifad to answer before starting to work

       <b>--daemon</b>  Daemonise the program for supported modes (default)

       <b>--nodaemon</b>  Do not daemonise the program

       <b>--noconfirm</b>  Do not ask for confirmation before doing a data reset

</pre><h4><b>USAGE</b></h4><pre>
       The  yakeyrolld daemon writes key files in the yadifad keys directory and pushes DNSKEY and RRSIG records
       with a dynamic update.
       Zones managed by the keyroll needs to have the rrsig-nsupdate-allowed setting enabled (&lt;zone&gt; section).
       In generation mode, the daemon needs access to both the plan and private keys directory.
       For all other modes, the private keys directory is ignored.
       When not doing any kind of generation, they should not be kept on the  machine.  Their  encrypted  backup
       sitting in a safe place.

       <b>Initialisation</b>
              Destroys  all  current data that could exist and starts from nothing. Creates all the steps of the
              rolls for the next two years. Creates all the private keys in a separate directory.
              The directory that contains the private key files is required for this  command  as  private  keys
              will be added.

              yakeyrolld <b>-m</b> <u>generate</u> <b>--until</b> <u>+1y</u> <u>--reset</u>

       <b>Renewal</b>
              In order to extend a plan further, simply do another generation.
              The operation loads the current plan, extends it to cover the new limit date and saves the updated
              modified version back on disk.
              Previously  stored  private  keys  may  be used to generate signatures and new private keys may be
              added.
              Because of this, the directory that contains the private key files is required for this command.

              yakeyrolld <b>-m</b> <u>generate</u> <b>--until</b> <u>+1y</u>

       <b>Plan</b> <b>calendar</b>
              Details of the current plan can be printed on stdout using:

              yakeyrolld <b>-m</b> <u>print</u>

              The output format of that command isn't meant to be parsed by a program.

              For a script, use instead:

              yakeyrolld <b>-m</b> <u>print-json</u>

       <b>Daemon</b>
              To start the rolling the keys and pushing them to the server, use:

              yakeyrolld <b>-m</b> <u>playloop</u>

</pre><h4><b>FILES</b></h4><pre>
       ${SYSCONFDIR}/yakeyrolld.conf
               The default yakeyrolld configuration file.

       yakeyrolld.conf.5
               Configuration man page for yakeyrolld.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <u><a href="../man5/yakeyrolld.conf.5.html">yakeyrolld.conf</a></u>(5)

</pre><h4><b>REQUIREMENTS</b></h4><pre>
       OpenSSL
              yakeyrolld requires OpenSSL version 1.1.1 or later.

</pre><h4><b>CHANGES</b></h4><pre>
       Please check the ChangeLog file from the sources code.

</pre><h4><b>VERSION</b></h4><pre>
       Version: 3.0.2 of 2025-03-11.

</pre><h4><b>MAILINGLIST</b></h4><pre>
       There is a mailinglist for questions relating to any program in the yadifa package:

       <b>*</b>      <b><a href="mailto:yadifa-users@mailinglists.yadifa.eu">yadifa-users@mailinglists.yadifa.eu</a></b>
              for submitting questions/answers.

       <b>*</b>      <b><a href="http://www.yadifa.eu/mailing-list-users">http://www.yadifa.eu/mailing-list-users</a></b>
              for subscription requests.

       If you would like to stay informed about new versions and official patches send a subscription request to
       via:

       <b>*</b>      <b><a href="http://www.yadifa.eu/mailing-list-announcements">http://www.yadifa.eu/mailing-list-announcements</a></b>

       (this is a read-only list).

</pre><h4><b>LICENSE</b> <b>AND</b> <b>COPYRIGHT</b></h4><pre>
       Copyright
              (C)2011-2025, EURid
              B-1831 Diegem, Belgium
              <b><a href="mailto:info@yadifa.eu">info@yadifa.eu</a></b>

</pre><h4><b>AUTHORS</b></h4><pre>
       Gery Van Emelen
       Email: <b><a href="mailto:Gery.VanEmelen@EURid.eu">Gery.VanEmelen@EURid.eu</a></b>
       Eric Diaz Fernandez
       Email: <b><a href="mailto:Eric.DiazFernandez@EURid.eu">Eric.DiazFernandez@EURid.eu</a></b>

       WWW: <b><a href="http://www.EURid.eu">http://www.EURid.eu</a></b>

YAKEYROLLD                                         2025-03-11                                      <u><a href="../man8/YAKEYROLLD.8.html">YAKEYROLLD</a></u>(8)
</pre>
 </div>
</div></section>
</div>
</body>
</html>