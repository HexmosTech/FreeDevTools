<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>multilog - reads a sequence of lines from stdin and appends selected lines to any number of logs.</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/daemontools">daemontools_0.76-14_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       multilog - reads a sequence of lines from stdin and appends selected lines to any number of logs.

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>multilog</b> <u>script</u>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <u>script</u>  consists  of any number of arguments. Each argument specifies one action. The actions are carried
       out in order for each line of input. Note that actions may contain shell metacharacters that need  to  be
       quoted when <b>multilog</b> is run from a shell.

       <b>multilog</b> exits 0 when it sees the end of stdin. If stdin has a partial final line then <b>multilog</b> inserts a
       final newline.

       <b>multilog</b> writes a message to stderr and exits 111, without reading any input, if it runs out of memory or
       if another <b>multilog</b> process is writing to one of the same automatically rotated logs.

       If  <b>multilog</b>  has  trouble  writing to disk after it starts reading input, it writes a message to stderr,
       pauses, and tries again, without losing any data. Note that this may block any program feeding  input  to
       <b>multilog</b>.

       If  <b>multilog</b> receives a TERM signal, it will read and process data until the next newline, and then exit,
       leaving stdin at the first byte of data it has not processed.

</pre><h4><b>SELECTING</b> <b>LINES</b></h4><pre>
       Each line is initially selected. The action

       <b>-</b><u>pattern</u>
              deselects the line if <u>pattern</u> matches the line. The action

       <b>+</b><u>pattern</u>
              selects the line if <u>pattern</u> matches the line.

       <u>pattern</u> is a string of stars and non-stars. It matches any concatenation of strings matched  by  all  the
       stars  and  non-stars  in  the  same  order.  A non-star matches itself. A star before the end of <u>pattern</u>
       matches any string that does not include the next character in <u>pattern</u>.  A star at  the  end  of  <u>pattern</u>
       matches any string.

       For example, the action

         +hello

       selects hello. It does not select hello world.

       The action

         -named[*]: Cleaned cache *

       deselects  named[135]: Cleaned cache of 3121 RRs. The first star matches any string that does not include
       a right bracket.

       The action

         -*

       deselects every line.

       To save memory, <b>multilog</b> actually checks pattern against only the first 1000 characters of each line.

</pre><h4><b>ALERTS</b></h4><pre>
       The action

       <b>e</b>      prints (the first 200 bytes of) each selected line to stderr.

</pre><h4><b>STATUS</b> <b>FILES</b></h4><pre>
       The action

       <b>=</b><u>file</u>  replaces the contents of <u>file</u> with (the first 1000 bytes  of)  each  selected  line,  padded  with
              newlines to 1001 bytes. There is no protection of <u>file</u> against power outages.

              For example, the sequence of actions

                   -*
                   +STAT*
                   =log/status

              maintains log/status as a copy of the most recent line starting with STAT.

</pre><h4><b>TIMESTAMPING</b></h4><pre>
       The action

       <b>t</b>      inserts  an  @,  a  precise timestamp, and a space in front of each line, using the same format as
              <b><a href="../man8/tai64n.8.html">tai64n</a></b>(8).  This is required to be the first action.

       Patterns apply to the line after the timestamp is inserted. For example, if

         multilog t '-*' '+* fatal: *' ./main

       reads the line

         fatal: out of memory

       then it will log a line such as

         @400000003b4a39c23294b13c fatal: out of memory

       with the first * matching the timestamp.

       You can use <b><a href="../man8/tai64nlocal.8.html">tai64nlocal</a></b>(8) to convert these timestamps to human-readable form.

</pre><h4><b>AUTOMATICALLY</b> <b>ROTATED</b> <b>LOGS</b></h4><pre>
       If <u>dir</u> starts with a dot or slash then the action

       <u>dir</u>    appends each selected line to a log named <u>dir</u>.  If <u>dir</u> does not exist, <b>multilog</b> creates it.

              Do not attempt to write to one log from two simultaneous <b>multilog</b> processes, or two actions in one
              process.

              The log format is as follows.  <u>dir</u> is a directory containing some number of old log files,  a  log
              file  named  <u>current</u>, and other files for <b>multilog</b> to keep track of its actions. Each old log file
              has a name beginning with @, continuing with  a  precise  timestamp  showing  when  the  file  was
              finished, and ending with one of the following codes:

       <b>.s</b>     This file is completely processed and safely written to disk.

       <b>.u</b>     This  file  was  being  created at the moment of an outage. It may have been truncated and has not
              been processed.

              Beware that NFS, async filesystems, and softupdates filesystems may discard files  that  were  not
              safely written to disk before an outage.

              While  <b>multilog</b>  is  running,  <u>current</u>  has mode 644. If <b>multilog</b> sees the end of stdin, it writes
              <u>current</u> safely to disk, and sets the mode of <u>current</u> to 744. When it restarts, it sets the mode of
              <u>current</u> back to 644 and continues writing new lines.

              When <b>multilog</b> decides that <u>current</u> is big enough, it writes <u>current</u> safely to disk, sets the  mode
              of <u>current</u> to 744, and renames <u>current</u> as an old log file. The action

       <b>s</b><u>size</u>  sets  the  maximum file size for subsequent <u>dir</u> actions.  <b>multilog</b> will decide that <u>current</u> is big
              enough if <u>current</u> has <u>size</u> bytes.  (<b>multilog</b> will also decide that <u>current</u> is  big  enough  if  it
              sees  a  newline  within 2000 bytes of the maximum file size; it tries to finish log files at line
              boundaries.)  <u>size</u> must be between 4096 and 16777215. The default maximum file size is 99999.

              In versions 0.75 and above: If <b>multilog</b> receives an  ALRM  signal,  it  immediately  decides  that
              <u>current</u> is big enough, if <u>current</u> is nonempty.  The action

       <b>n</b><u>num</u>   sets  the number of log files for subsequent <u>dir</u> actions. After renaming <u>current</u>, if <b>multilog</b> sees
              <u>num</u> or more old log files, it removes the old log file with the smallest timestamp.  <u>num</u>  must  be
              at least 2. The default number of log files is 10. The action

       <b>!</b><u>processor</u>
              sets  a  <u>processor</u>  for  subsequent <u>dir</u> actions.  <b>multilog</b> will feed <u>current</u> through <u>processor</u> and
              save the output as an old log file instead of <u>current</u>.  <b>multilog</b> will also save  any  output  that
              <u>processor</u>  writes  to  descriptor  5,  and  make that output readable on descriptor 4 when it runs
              <u>processor</u> on the next log file. For reliability, <u>processor</u> must exit nonzero if it has any trouble
              creating its output; <b>multilog</b> will then run it again. Note that running <u>processor</u>  may  block  any
              program feeding input to <b>multilog</b>.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <a href="../man8/supervise.8.html">supervise</a>(8),   <a href="../man8/svc.8.html">svc</a>(8),   <a href="../man8/svok.8.html">svok</a>(8),  <a href="../man8/svstat.8.html">svstat</a>(8),  <a href="../man8/svscanboot.8.html">svscanboot</a>(8),  <a href="../man8/svscan.8.html">svscan</a>(8),  <a href="../man8/readproctitle.8.html">readproctitle</a>(8),  <a href="../man8/fghack.8.html">fghack</a>(8),
       <a href="../man8/pgrphack.8.html">pgrphack</a>(8), <a href="../man8/tai64n.8.html">tai64n</a>(8), <a href="../man8/tai64nlocal.8.html">tai64nlocal</a>(8), <a href="../man8/setuidgid.8.html">setuidgid</a>(8), <a href="../man8/envuidgid.8.html">envuidgid</a>(8), <a href="../man8/envdir.8.html">envdir</a>(8), <a href="../man8/softlimit.8.html">softlimit</a>(8), <a href="../man8/setlock.8.html">setlock</a>(8)

       <a href="http://cr.yp.to/daemontools.html">http://cr.yp.to/daemontools.html</a>

                                                                                                     <u><a href="../man8/multilog.8.html">multilog</a></u>(8)
</pre>
 </div>
</div></section>
</div>
</body>
</html>