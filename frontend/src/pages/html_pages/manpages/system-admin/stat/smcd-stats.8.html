<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>smcd-stats - Print statistics about SMC-D usage</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/smc-tools">smc-tools_1.8.5-0ubuntu1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       smcd-stats - Print statistics about SMC-D usage

       smcr-stats - Print statistics about SMC-R usage

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>smcd</b> [ <u>OPTIONS</u> ] <b>stats</b>  { <u>COMMAND</u> | <b>help</b> }

       <b>smcr</b> [ <u>OPTIONS</u> ] <b>stats</b>  { <u>COMMAND</u> | <b>help</b> }

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The smcd stats and smcr stats commands display statistics about SMC-D and SMC-R, respectively. Data
       includes number of connections, number of failed connections, buffer information, and special calls.
       Statistics are collected at various data points in the smc kernel module.  Therefore, minor
       inconsistencies in the data can occur and are to be expected.

</pre><h4><b>COMMANDS</b></h4><pre>
       <b>show</b> (default)
              Display statistics on respective SMC mode usage. Values displayed are cumulative since last reset,
              unless option <b>-a/--absolute</b> is specified.

       <b>reset</b>  Display current statistics and reset all counters to zero.

       <b>json</b>   Display current statistics in JSON format.

</pre><h4><b>OPTIONS</b></h4><pre>
       <b>-d,</b> <b>--details</b>
              Display additional fields and information in the output.

       <b>-a,</b> <b>--absolute</b>
              Display values since smc module load, ignoring any resets.

</pre><h4><b>OUTPUT</b></h4><pre>
       The  <b>-d/--details</b>  option  displays a number of additional fields as indicated in the following.  It also
       breaks up a number of counters in section <u>Connections</u> <u>Summary</u> into separate counts for client and server.

   <b>Total</b> <b>connections</b> <b>handled</b>
       Total number of connections handled by the SMC module. Includes  <u>TCP</u>  <u>fallback</u>  connections  as  well  as
       <u>handshake</u> <u>errors</u>.

   <b>SMC</b> <b>connections</b>
       Number  of  connections  that  successfully  entered  the  respective  SMC  mode.  <b>-d/--details</b> breaks up
       connections by SMC versions.

   <b>Handshake</b> <b>errors</b>
       Number of connections that failed due to errors  during  the  handshaking  phase,  e.g.  peer  no  longer
       responding.

   <b>Avg</b> <b>requests</b> <b>per</b> <b>SMC</b> <b>conn</b>
       Average number of requests sent and received (including <u>special</u> <u>socket</u> <u>calls</u>) per SMC connection.

   <b>TCP</b> <b>fallback</b>
       Number of connections that fell back to TCP/IP.

   <b>Data</b> <b>transmitted</b>
       Amount of data sent (TX) or received (RX) in Bytes.

   <b>Total</b> <b>requests</b>
       Total number of individual send (TX) or receive (RX) requests handled.  Includes requests that ended with
       errors or did not transfer any data.

   <b>Buffer</b> <b>full</b>
       Number of occurrences where the respective send buffer (TX) could not contain all data to be sent, or did
       not contain as much data as requested in a receive call (RX).

   <b>Buffer</b> <b>full</b> <b>(remote)</b> <b>(--details</b> <b>only)</b>
       Number  of  occurrences  where  the peer's receive buffer was exceeded by writing data. That is, requests
       that fill the buffer up to the last bit are not included in the count.

   <b>Buffer</b> <b>too</b> <b>small</b> <b>(--details</b> <b>only)</b>
       Number of occurrences where a send request was larger than the local send buffer's total capacity.

   <b>Buffer</b> <b>too</b> <b>small</b> <b>(remote)</b> <b>(--details</b> <b>only)</b>
       Number of occurrences where a send request exceeded the total capacity of the peer's receive buffer.

   <b>Buffer</b> <b>downgrades</b> <b>(--details</b> <b>only)</b>
       Number of occurrences where a buffer of the requested size could not be allocated for a  new  connection,
       and a smaller buffer was used.

   <b>Buffer</b> <b>reuses</b> <b>(--details</b> <b>only)</b>
       Number  of  occurrences where a buffer was provided as requested for a new connection by reusing a buffer
       from a previous connection.

   <b>Bufs</b>
       Histogram of buffer sizes for all connections,  including  <u>buffer</u>  <u>downgrades</u>  and  <u>buffer</u>  <u>reuses</u>.   The
       histogram scale presents exact buffer sizes.

   <b>Reqs</b>
       Histogram  of  request  sizes.  The  histogram  scale  includes upper boundaries of request sizes. Counts
       reflect requested send sizes for TX, and actual receive sizes for RX. Difference to <u>Total</u> <u>requests</u> is due
       to requests not transferring any data and/or erroneous requests.

   <b>Special</b> <b>socket</b> <b>calls</b>
       Summarizes the total number of sockets calls that require special handling in SMC.  To  categorize  these
       calls into individual counters as follows, use the <u>-d/--details</u> option.

       <u>cork</u>   Counts  occurrences  of sockopt TCP_CORK enablements. That is, does not reflect the number of send
              requests with TCP_CORK enabled.

       <u>nodelay</u>
              Counts occurrences of sockopt TCP_NODELAY enablements. That is, does not  reflect  the  number  of
              send requests with TCP_CORK enabled.

       <u>sendpage</u>
              Counts occurrences of the AF_SMC implementation of the sendpage call.

       <u>splice</u> Counts number of calls of the splice() system call.

       <u>urgent</u> <u>data</u>
              Counts number of send and receive calls with MSG_OOB set.

</pre><h4><b>EXAMPLES</b></h4><pre>

       1. Show SMC-D statistics:
         <b>#</b> <b>smcd</b> <b>stats</b>

       2. Show detailed SMC-R statistics:
         <b>#</b> <b>smcr</b> <b>-d</b> <b>stats</b> <b>show</b>

       3. Show detailed SMC-R statistics and reset SMC-R statistics counters:
         <b>#</b> <b>smcr</b> <b>-d</b> <b>stats</b> <b>reset</b>

       4. Show detailed SMC-D statistics since module load in JSON format:
         <b>#</b> <b>smcd</b> <b>-da</b> <b>stats</b> <b>json</b>

       5. Show SMC-R statistics since module load:
         <b>#</b> <b>smcr</b> <b>-a</b> <b>stats</b>

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man8/smcd.8.html">smcd</a></b>(8), <b><a href="../man8/smcr.8.html">smcr</a></b>(8)

smc-tools                                           June 2021                                      <u><a href="../man8/SMCD-STATS.8.html">SMCD-STATS</a></u>(8)
</pre>
 </div>
</div></section>
</div>
</body>
</html>