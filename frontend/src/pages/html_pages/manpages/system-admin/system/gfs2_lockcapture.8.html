<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>gfs2_lockcapture - capture locking information from GFS2 file systems and DLM.</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/gfs2-utils">gfs2-utils_3.6.1-1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       gfs2_lockcapture - capture locking information from GFS2 file systems and DLM.

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>gfs2_lockcapture</b> [-dqyP] [-o <u>output</u> <u>directory]</u> [-r <u>number</u> <u>of</u> <u>runs]</u> [-s <u>seconds</u> <u>to</u> <u>sleep]</u> [-n <u>name</u> <u>of</u> <u>GFS2</u>
       <u>file</u> <u>system]</u>

       <b>gfs2_lockcapture</b> [-dqyi]

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <u>gfs2_lockcapture</u>  is  used  to  capture  the  GFS2 lockdump data and corresponding DLM data for GFS2 file
       systems. The number of captures and their frequency can be configured. By default all of the mounted GFS2
       file systems will have their data collected unless GFS2 file systems are specified.

       Please note that sysrq -t (thread) and -m (memory) dumps and the pid directories in <a href="file:/proc">/proc</a>  are  collected
       unless they are disabled with the -P option.

</pre><h4><b>OPTIONS</b></h4><pre>
       <b>-h,</b>  <b>--help</b>
              Prints out a short usage message and exits.

       <b>-d,</b>  <b>--debug</b>
              Enables debug logging.

       <b>-q,</b>  <b>--quiet</b>
              Disables logging to console.

       <b>-y,</b>  <b>--no_ask</b>
              Disables all questions and assumes yes.

       <b>-i,</b>  <b>--info</b>
              Prints information about the mounted GFS2 file systems.

       <b>-P,</b>  <b>--disable_process_gather</b>
              The gathering of process information will be disabled.

       <b>-o</b> <u>&lt;output</u> <u>directory&gt;,</u> <b>--path_to_output_dir</b>=<u>&lt;output</u> <u>directory&gt;</u>
              The directory where all the collect data will be stored.

       <b>-r</b> <u>&lt;number</u> <u>of</u> <u>runs&gt;,</u>  <b>--num_of_runs</b>=<u>&lt;number</u> <u>of</u> <u>runs&gt;</u>
              The number of runs capturing the lockdump data. The default is 3 runs.

       <b>-s</b> <u>&lt;seconds</u> <u>to</u> <u>sleep&gt;,</u>  <b>--seconds_sleep</b>=<u>&lt;seconds</u> <u>to</u> <u>sleep&gt;</u>
              The  number  of  seconds  to sleep between runs of capturing the lockdump data. The default is 120
              seconds.

       <b>-n</b> <u>&lt;name</u> <u>of</u> <u>GFS2</u> <u>filesystem&gt;,</u>  <b>--fs_name</b>=<u>&lt;name</u> <u>of</u> <u>GFS2</u> <u>filesystem&gt;</u>
              The name of the GFS2 filesystem(s) that will have their lockdump data captured.  By  default,  all
              mounted GFS2 file systems will have their data captured.

</pre><h4><b>NOTES</b></h4><pre>
       The output of the following commands will be captured:

       • uname -a

       • uptime

       • ps h -AL -o "tid,s,cmd"

       • df -h

       • lsof

       • mount -l

       • dlm_tool ls

       • dlm_tool lockdebug -v -s -w &lt;lockspace name&gt;

       • echo "t" &gt; <a href="file:/proc/sysrq-trigger">/proc/sysrq-trigger</a> (If <a href="file:/proc/1/stack">/proc/1/stack</a> does not exist)

       • echo "m" &gt; <a href="file:/proc/sysrq-trigger">/proc/sysrq-trigger</a> (If <a href="file:/proc/1/stack">/proc/1/stack</a> does not exist)

</pre><h4><b>AUTHOR</b></h4><pre>
       Shane Bradley &lt;<a href="mailto:sbradley@fedoraproject.org">sbradley@fedoraproject.org</a>&gt;

</pre><h4><b>FILES</b></h4><pre>
       <u><a href="file:/proc/mounts">/proc/mounts</a></u>
       <u><a href="file:/proc/slabinfo">/proc/slabinfo</a></u>
       <u>/sys/kernel/config/dlm/cluster/lkbtbl_size</u>
       <u>/sys/kernel/config/dlm/cluster/dirtbl_size</u>
       <u>/sys/kernel/config/dlm/cluster/rsbtbl_size</u>
       <u>/sys/kernel/debug/gfs2/</u>
       <u>/sys/kernel/debug/dlm/</u>
       <u><a href="file:/proc/">/proc/</a>&lt;int&gt;/</u> (If <a href="file:/proc/1/stack">/proc/1/stack</a> does exists)
       <u>/var/log/messages</u>
       <u>/var/log/cluster/</u>

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
                                                                                             <u><a href="../man8/gfs2_lockcapture.8.html">gfs2_lockcapture</a></u>(8)
</pre>
 </div>
</div></section>
</div>
</body>
</html>