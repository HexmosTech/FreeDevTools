<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>debugvmfs - VMFS file system debugger</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/vmfs-tools">vmfs-tools_0.2.5-1.1build2_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       debugvmfs - VMFS file system debugger

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>debugvmfs</b> <u>VOLUME</u>... <u>COMMAND</u> [ <u>OPTIONS</u> ]

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The <b>debugvmfs</b> program allows to display various informations about VMFS file systems, and to access data
       within the file systems.

       The <u>VOLUME</u> to be opened can be either a block device or an image file. When the VMFS spreads accross
       several extents, all extents must be given.

       Please note that most commands are still likely to change in future versions.

</pre><h4><b>SPECIFYING</b> <b>FILES</b></h4><pre>
       Some commands take a <u>filespec</u> as an argument. A <u>filespec</u> may take either of the following forms:

       •   A path name, relative to the root of the filesystem if it starts with '/', or relative to the current
           working directory otherwise (interactive mode only).

       •   An inode number, enclosed between angle brackets, e.g. '&lt;4&gt;', '&lt;0x1400004&gt;'

</pre><h4><b>COMMANDS</b></h4><pre>
       <b>cat</b> <u>filespec</u> [ ... ]
           Outputs the content of the given files from the VMFS.

       <b>ls</b> [ <b>-l</b> ] <u>filespec</u>
           Lists files contained at the given location within the VMFS.

           With <b>-l</b>, gives some more information, much like the output from <b><a href="../man1/ls.1.html">ls</a></b>(1) when given the <b>-l</b> option.

       <b>truncate</b> <u>filespec</u> <u>length</u>
           Truncate the file to the specified length. R/W support must be enabled.

       <b>chmod</b> <u>filespec</u> <u>mode</u>
           Change file permissions to the given mode.

       <b>df</b>
           Outputs information about file system size.

       <b>get_file_block</b> <u>filespec</u> <u>position</u>
           Get file block corresponding to position in the specified file.

       <b>check_vol_bitmaps</b>
           Checks volume bitmaps consistency.

       <b>show_heartbeats</b>
           Outputs active heartbeats on the file system.

       <b>read_block</b> <u>block_id</u> [ ... ]
           Outputs content within the specified block_id in binary

       <b>get_block_status</b> <u>block_id</u>
           Get status (allocated or free) of the specified block_id.

       <b>alloc_block_fixed</b> <u>block_id</u>
           Allocate the specified block_id. R/W support must be enabled.

       <b>alloc_block</b> <u>block_type</u>
           Allocate a block of the specified type. R/W support must be enabled.

           Allowed block types are: 1 (File Block), 2 (Sub-Block), 3 (Pointer Block) and 4 (File Descriptor /
           Inode).

       <b>free_block</b> <u>block_id</u>
           Free the specified block_id. R/W support must be enabled.

           Warning: can cause damage since no heartbeat is used at this time and a block used by a file can be
           freed.

       <b>show</b>
           Display value(s) of the given variable. See the <b>VARIABLES</b> section for more details. When no variable
           is given, it lists the top-level properties.

       <b>shell</b>
           Starts an interactive session. All of the above commands can be executed from within the interactive
           session.

           The current working directory can be changed with the <b>cd</b> command, followed by a filespec.

           The following output redirections are supported within the shell:

           •   <u>cmd</u> &gt; <u>output</u>

               Puts the output of <u>cmd</u> in the <u>output</u> file.

           •   <u>cmd</u> &gt;&gt; <u>output</u>

               Appends the output of <u>cmd</u> to the <u>output</u> file.

           •   <u>cmd</u> | <u>external</u> <u>command</u>

               Sends the output of <u>cmd</u> to the input of <u>external</u> <u>command</u>. The <u>external</u> <u>command</u> itself can contain
               output redirection.

               Examples:

               •   read_block 0x00000681 | less

               •   cat /.fdc.sf | hexdump -C

               •   cat /.fdc.sf | hexdump -C &gt; /tmp/fdc.hex

               •   cat /.fdc.sf | hexdump -C | less

</pre><h4><b>VARIABLES</b></h4><pre>
       Variables in debugvmfs represent structures on the filesystem. The currently supported top-level
       variables are the following:

       •   <b>vol_version</b>

       •   <b>version</b>

       •   <b>label</b>

       •   <b>mode</b>

       •   <b>uuid</b>

       •   <b>ctime</b>

       •   <b>block_size</b>

       •   <b>subblock_size</b>

       •   <b>fdc_header_size</b>

       •   <b>fdc_bitmap_count</b>

       •   <b>fbb</b>

       •   <b>fdc</b>

       •   <b>pbc</b>

       •   <b>sbc</b>

       •   <b>fs</b>

       •   <b>lvm</b>

       •   <b>blkid</b>[<u>blk</u>]

       •   <b>dirent</b>["<u>path</u>"]

       •   <b>inode</b>["<u>filespec</u>"]

       The <b>vol_version</b>, <b>version</b>, <b>label</b>, <b>mode</b>, <b>uuid</b>, <b>ctime</b>, <b>block_size</b>, <b>subblock_size</b>, <b>fdc_header_size</b>, and
       <b>fdc_bitmap_count</b> properties are low-level information about the filesystem.

       The <b>fbb</b>, <b>fdc</b>, <b>pbc</b> and <b>sbc</b> variables are bitmaps. Running them through the <b>show</b> command will display all
       the bitmaps header fields. Each of these fields can also be displayed individually:

       •   <u>bitmap</u>.<b>items_per_bitmap_entry</b>

       •   <u>bitmap</u>.<b>bmp_entries_per_area</b>

       •   <u>bitmap</u>.<b>hdr_size</b>

       •   <u>bitmap</u>.<b>data_size</b>

       •   <u>bitmap</u>.<b>area_size</b>

       •   <u>bitmap</u>.<b>area_count</b>

       •   <u>bitmap</u>.<b>total_items</b>

       •   <u>bitmap</u>.<b>used_items</b>

       •   <u>bitmap</u>.<b>free_items</b>

       •   <u>bitmap</u>.<b>entry</b>[<u>n</u>]

       e.g. to display the data size of the fdc bitmap, type <b>show</b> <b>fdc.data_size</b>.

       Each <u>bitmap</u>.<b>entry</b>[<u>n</u>] (where 0 ≤ <u>n</u> &lt; <u>bitmap</u>.<b>bmp_entries_per_area</b> * <u>bitmap</u>.<b>area_count</b>) contains information
       about each entry in the bitmap. The available fields are:

       •   <u>bitmap</u>.<b>entry</b>[<u>n</u>].id

       •   <u>bitmap</u>.<b>entry</b>[<u>n</u>].total

       •   <u>bitmap</u>.<b>entry</b>[<u>n</u>].free

       •   <u>bitmap</u>.<b>entry</b>[<u>n</u>].ffree

       •   <u>bitmap</u>.<b>entry</b>[<u>n</u>].mdh

       •   <u>bitmap</u>.<b>entry</b>[<u>n</u>].item[<u>m</u>]

       The <u>bitmap</u>.<b>entry</b>[<u>n</u>].mdh is a metadata header. See further below for more details about metadata headers.

       Each <u>bitmap</u>.<b>entry</b>[<u>n</u>].item[<u>m</u>] (where 0 ≤ <u>m</u> &lt; <u>bitmap</u>.<b>items_per_bitmap_entry</b>) contains information about a
       given item in the given entry. The available fields are:

       •   <u>bitmap</u>.<b>entry</b>[<u>n</u>].item[<u>m</u>].used

       •   <u>bitmap</u>.<b>entry</b>[<u>n</u>].item[<u>m</u>].dump

       The <b>pbc</b> bitmap has an additional field:

       •   <b>pbc</b>.<b>entry</b>[<u>n</u>].item[<u>m</u>].blocks

       The <b>lvm</b> variable contains low-level information about the physical and logical volumes. The available
       fields are:

       •   <b>lvm</b>.<b>uuid</b>

       •   <b>lvm</b>.<b>size</b>

       •   <b>lvm</b>.<b>blocks</b>

       •   <b>lvm</b>.<b>num_extents</b>

       •   <b>lvm</b>.<b>extent</b>[<u>n</u>]

       Each <b>lvm</b>.<b>extent</b>[<u>n</u>] (where 0 ≤ <u>n</u> &lt; <b>lvm</b>.<b>num_extents</b>) contains low-level information about the physical
       volumes. The available fields are:

       •   <b>lvm</b>.<b>extent</b>[<u>n</u>].device

       •   <b>lvm</b>.<b>extent</b>[<u>n</u>].uuid

       •   <b>lvm</b>.<b>extent</b>[<u>n</u>].lun

       •   <b>lvm</b>.<b>extent</b>[<u>n</u>].version

       •   <b>lvm</b>.<b>extent</b>[<u>n</u>].name

       •   <b>lvm</b>.<b>extent</b>[<u>n</u>].size

       •   <b>lvm</b>.<b>extent</b>[<u>n</u>].num_segments

       •   <b>lvm</b>.<b>extent</b>[<u>n</u>].first_segment

       •   <b>lvm</b>.<b>extent</b>[<u>n</u>].last_segment

       Each <b>blkid</b>[<u>blk</u>] (where <u>blk</u> is a block id) contains information on the given block id. The available
       fields are:

       •   <b>blkid</b>[<u>blk</u>].item

       •   <b>blkid</b>[<u>blk</u>].flags

       Each <b>dirent</b>[<u>path</u>] (where <u>path</u> is a path relative to the current directory in the shell or / outside the
       shell) contains information on the directory entry corresponding to the given path. The available fields
       are:

       •   <b>dirent</b>["<u>path</u>"].type

       •   <b>dirent</b>["<u>path</u>"].block_id

       •   <b>dirent</b>["<u>path</u>"].record_id

       •   <b>dirent</b>["<u>path</u>"].name

       Each <b>inode</b>[<u>filespec</u>] contains information on the inode corresponding to the given filespec. The available
       fields are:

       •   <b>inode</b>["<u>filespec</u>"].id

       •   <b>inode</b>["<u>filespec</u>"].id2

       •   <b>inode</b>["<u>filespec</u>"].nlink

       •   <b>inode</b>["<u>filespec</u>"].type

       •   <b>inode</b>["<u>filespec</u>"].flags

       •   <b>inode</b>["<u>filespec</u>"].size

       •   <b>inode</b>["<u>filespec</u>"].blk_size

       •   <b>inode</b>["<u>filespec</u>"].blk_count

       •   <b>inode</b>["<u>filespec</u>"].uid

       •   <b>inode</b>["<u>filespec</u>"].gid

       •   <b>inode</b>["<u>filespec</u>"].mode

       •   <b>inode</b>["<u>filespec</u>"].zla

       •   <b>inode</b>["<u>filespec</u>"].tbz

       •   <b>inode</b>["<u>filespec</u>"].cow

       •   <b>inode</b>["<u>filespec</u>"].atime

       •   <b>inode</b>["<u>filespec</u>"].mtime

       •   <b>inode</b>["<u>filespec</u>"].ctime

       •   <b>inode</b>["<u>filespec</u>"].rdm_id

       •   <b>inode</b>["<u>filespec</u>"].mdh

       •   <b>inode</b>["<u>filespec</u>"].blocks

       Metadata headers are being used in several places, such as <u>bitmap</u>.<b>entry</b>[<u>n</u>].mdh and <b>inode</b>["<u>filespec</u>"].mdh.
       They mostly contain information about clustered accesses to metadata on the filesystem. The available
       fields are:

       •   <u>mdh</u>.magic

       •   <u>mdh</u>.pos

       •   <u>mdh</u>.hb_pos

       •   <u>mdh</u>.hb_lock

       •   <u>mdh</u>.hb_uuid

       •   <u>mdh</u>.hb_seq

       •   <u>mdh</u>.obj_seq

       •   <u>mdh</u>.mtime

       Variable values can also be used in expressions using square brackets to use the variable value as an
       index. For example:

       •   <b>blkid</b>[<b>inode</b>["<u>filespec</u>"].id]

       Enclosing a variable name with parentheses will use that variable value as a variable name. For example:

       •   (<b>blkid</b>[<u>blk</u>].item).status

</pre><h4><b>AUTHORS</b></h4><pre>
       Christophe Fillot &lt;<b><a href="mailto:cf@utc.fr">cf@utc.fr</a></b>[1]&gt;, Mike Hommey &lt;<b><a href="mailto:mh@glandium.org">mh@glandium.org</a></b>[2]&gt;

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <a href="../man8/vmfs-fuse.8.html">vmfs-fuse</a>(8)

</pre><h4><b>NOTES</b></h4><pre>
        1. <a href="mailto:cf@utc.fr">cf@utc.fr</a>
           <a href="mailto:cf@utc.fr">mailto:cf@utc.fr</a>

        2. <a href="mailto:mh@glandium.org">mh@glandium.org</a>
           <a href="mailto:mh@glandium.org">mailto:mh@glandium.org</a>

  0.2.5-patched                                    04/01/2024                                       <u><a href="../man8/DEBUGVMFS.8.html">DEBUGVMFS</a></u>(8)
</pre>
 </div>
</div></section>
</div>
</body>
</html>