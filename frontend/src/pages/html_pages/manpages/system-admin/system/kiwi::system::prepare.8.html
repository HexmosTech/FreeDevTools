<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>kiwi::system::prepare - Prepare image root system</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/kiwi">kiwi_10.2.28-1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       kiwi::system::prepare - Prepare image root system

</pre><h4><b>SYNOPSIS</b></h4><pre>
          kiwi-ng [global options] service &lt;command&gt; [&lt;args&gt;]

          kiwi-ng system prepare -h | --help
          kiwi-ng system prepare --description=&lt;directory&gt; --root=&lt;directory&gt;
              [--allow-existing-root]
              [--clear-cache]
              [--ignore-repos]
              [--ignore-repos-used-for-build]
              [--set-repo=&lt;source,type,alias,priority,imageinclude,package_gpgcheck,{signing_keys},components,distribution,repo_gpgcheck,repo_sourcetype&gt;]
              [--set-repo-credentials=&lt;user:pass_or_filename&gt;]
              [--add-repo=&lt;source,type,alias,priority,imageinclude,package_gpgcheck,{signing_keys},components,distribution,repo_gpgcheck,repo_sourcetype&gt;...]
              [--add-repo-credentials=&lt;user:pass_or_filename&gt;...]
              [--add-package=&lt;name&gt;...]
              [--add-bootstrap-package=&lt;name&gt;...]
              [--delete-package=&lt;name&gt;...]
              [--set-container-derived-from=&lt;uri&gt;]
              [--set-container-tag=&lt;name&gt;]
              [--add-container-label=&lt;label&gt;...]
              [--set-type-attr=&lt;attribute=value&gt;...]
              [--set-release-version=&lt;version&gt;]
              [--signing-key=&lt;key-file&gt;...]
          kiwi-ng system prepare help

</pre><h4><b>DESCRIPTION</b></h4><pre>
       Create a new image root directory. The prepare step sets up a new image root directory from the specified
       XML  description. The specified directory acts as a root directory of the new image root system.  You can
       enter the system as root via chroot using the following command:

          $ chroot &lt;directory&gt; bash

</pre><h4><b>OPTIONS</b></h4><pre>
       <b>--add-bootstrap-package=</b><u>&lt;name&gt;</u>
              Specify a package to install as part of the early KIWI NG bootstrap  phase.   The  option  can  be
              specified multiple times.

       <b>--add-container-label=</b><u>&lt;name=value&gt;</u>
              Add  a  container  label to the container configuration metadata. It overwrites the label with the
              provided key-value pair if it was already defined in the XML description.

       <b>--add-package=</b><u>&lt;name&gt;</u>
              Specify a package to add (install). The option can be specified multiple times.

       <b>--add-repo=</b><u>&lt;source,type,alias,priority,imageinclude,package_gpgcheck,{signing_keys},components,distribution,repo_gpgcheck,repo_sourcetype&gt;</u>
              Add a new repository to the existing repository setup in the XML description. This option  can  be
              specified  multiple  times.   For  details  about  the supported option values, see the <b>--set-repo</b>
              information below

       <b>--add-repo-credentials=</b><u>&lt;user:pass_or_filename&gt;</u>
              For <b>uri://user:pass@location</b> type repositories, set  the  user  and  password  connected  with  an
              add-repo  specification.  If the provided value is a filename in the filesystem, the first line of
              the file is used as credentials.

       <b>--allow-existing-root</b>
              Allow to re-use an existing image root directory.

       <b>--clear-cache</b>
              Delete repository cache for each of the used repositories before installing any package.  This  is
              useful  if  an  image  build  validates  the signature of the package from the original repository
              source for any build. Some package managers unconditionally trust the contents of the cache, which
              works for cache data dedicated to one build. In case of KIWI  NG,  the  cache  is  shared  between
              multiple image builds on the host for performance reasons.

       <b>--delete-package=</b><u>&lt;name&gt;</u>
              Specify a package to delete. The option can be specified multiple times.

       <b>--description=</b><u>&lt;directory&gt;</u>
              Path  to  the  KIWI NG XML description. The directory must contain at least a config.xml of *.kiwi
              XML description.

       <b>--ignore-repos</b>
              Ignore all repository configurations in the XML description.  This  option  is  normally  used  in
              combination with the <b>--add-repo`</b> option. Otherwise, an image build operation results in an error.

       <b>--ignore-repos-used-for-build</b>
              Works  the  same way as <b>--ignore-repos</b>,` but the repository configurations that have the imageonly
              attribute set to <b>true</b> are not ignored.

       <b>--root=</b><u>&lt;directory&gt;</u>
              Path to the new root system.

       <b>--set-repo=</b><u>&lt;source,type,alias,priority,imageinclude,package_gpgcheck,{signing_keys},components,distribution,repo_gpgcheck,repo_sourcetype&gt;</u>
              Overwrite the first repository entry in the XML description with the provided information:

              • <b>source</b>

                Source URL pointing to a package repository that must be in a format supported by  the  selected
                package manager. See the URI_TYPES section for details about the supported source locators.

              • <b>type</b>

                Repository type: <b>rpm-md</b>, <b>apt-deb</b>.

              • <b>alias</b>

                An  alias  name  for the repository. If not specified, KIWI NG generates an alias name based hex
                representation of uuid4. While the hex is used to uniquely identify the repository,  it  is  not
                descriptive.  We recommend to use a descriptive and unique alias name.

              • <b>priority</b>

                A  number indicating the repository priority. How the value is evaluated depends on the selected
                package manager. Refer to the package manager documentation  for  details  about  the  supported
                priority ranges and their meaning.

              • <b>imageinclude</b>

                Set  to either <b>true</b> or <b>false</b> to specify if the repository is part of the system image repository
                setup or not.

              • <b>package_gpgcheck</b>

                Set to either <b>true</b> or <b>false</b> to specify if the repository must validate the package signatures.

                • <b>{signing_keys}</b>

                List of signing_keys enclosed in curly brackets and delimited by the semicolon. The reference to
                a signing key must be provided in the URI format.

              • <b>components</b>

                Component list for Debian-based repos as a space-delimited string.

              • <b>distribution</b>

                Main distribution name for Debian-based repos.

              • <b>repo_gpgcheck</b>

                Set to either <b>true</b> or <b>false</b> to specify if the repository must validate the repository signature.

              • <b>repo_sourcetype</b>

                Specify the source type of the repository  path.  Supported  values  are  baseurl,  metalink  or
                mirrorlist.  With  baseurl  the source path is interpreted as simple URI. If metalink is set the
                source path is resolved as metalink URI and if mirrorlist is set the source path is resolved  as
                a mirrorlist file. If not specified, baseurl is the default

       <b>--set-repo-credentials=</b><u>&lt;user:pass_or_filename&gt;</u>
              For  <b>uri://user:pass@location</b>  type  repositories,  set  the  user  and  password connected to the
              set-repo specification. If the provided value is a filename in the filesystem, the first  line  of
              that file is used as credentials.

       <b>--set-container-derived-from=</b><u>&lt;uri&gt;</u>
              Overwrite  the  source  location of the base container for the selected image type. The setting is
              only effective if the configured image type is setup with an initial derived_from reference

       <b>--set-container-tag=</b><u>&lt;name&gt;</u>
              Overwrite the container tag in the container configuration.   The  setting  applies  only  if  the
              container configuration provides an initial tag value.

       <b>--set-type-attr=</b><u>&lt;attribute=value&gt;</u>
              Overwrite/set  the  attribute with the provided value in the selected build type section. Example:
              <b>--set-type-attr</b> <b>volid=some</b>

       <b>--set-release-version=</b><u>&lt;version&gt;</u>
              Overwrite/set the release-version element in the selected build type preferences section

       <b>--signing-key=</b><u>&lt;key-file&gt;</u>
              Set the key file to be trusted and imported into the package manager  database  before  performing
              any operation. This is useful if an image build validates repository and package signatures during
              build time. This option can be specified multiple times.

</pre><h4><b>AUTHOR</b></h4><pre>
       Marcus Schäfer

</pre><h4><b>COPYRIGHT</b></h4><pre>
       2020-2025, Marcus Schäfer

10.2.28                                           Jul 24, 2025                          <u>KIWI::SYSTEM::<a href="../man8/PREPARE.8.html">PREPARE</a></u>(8)
</pre>
 </div>
</div></section>
</div>
</body>
</html>