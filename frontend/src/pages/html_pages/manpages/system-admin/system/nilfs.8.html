<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NILFS - the new implementation of a log-structured file system</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/nilfs-tools">nilfs-tools_2.2.11-2_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       NILFS - the new implementation of a log-structured file system

</pre><h4><b>SYNOPSIS</b></h4><pre>
       Overview of the NILFS file system and the related tools.

</pre><h4><b>DESCRIPTION</b></h4><pre>
       NILFS  is  a  log-structured file system developed for Linux.  NILFS provides versioning capability of an
       entire file system and continuous snapshotting that allows users to restore files mistakenly  overwritten
       or destroyed a while ago.

       The current major version of NILFS is version 2, which is referred to as NILFS2.  NILFS2 is equipped with
       an online garbage collector (also called cleaner) that reclaims disk space in the background with keeping
       multiple snapshots.

       When  data  is  written  or  any  change  is  made  to  a  NILFS2 file system, it automatically creates a
       checkpoint.  A checkpoint represents a consistent state of the NILFS2 file system of a  certain  instant.
       It  becomes mountable after being changed into a snapshot.  A snapshot is the checkpoint marked not to be
       deleted by the cleaner.  NILFS2 creates a number of checkpoints at regular intervals (unless there is  no
       change)  or  with  synchronous  writings.   There  is no practical limit on the number of checkpoints and
       snapshots.

       The following tools are available to manage the checkpoint and the snapshot:

       <b>lscp</b>        lists checkpoints or snapshots

       <b>mkcp</b>        makes a checkpoint or a snapshot

       <b>chcp</b>        changes an existing checkpoint to a snapshot or vice versa

       <b>rmcp</b>        invalidates specified checkpoint(s)

       These tools give the versioning capability to NILFS2;  a  user  can  select  significant  versions  among
       continuously created checkpoints and can change them to snapshots to be preserved for long periods.

       Every checkpoint except for the snapshot will become unprotected from the cleaner after a given period of
       time.     This   period   is   controlled   by   the   <b>protection_period</b>   parameter   defined   in   the
       <b>/etc/<a href="../man5/nilfs_cleanerd.conf.5.html">nilfs_cleanerd.conf</a></b>(5) file.

</pre><h4><b>MOUNT</b> <b>OPTIONS</b></h4><pre>
       Refer to the <b><a href="../man8/mount.nilfs2.8.html">mount.nilfs2</a></b>(8).

</pre><h4><b>EXAMPLES</b></h4><pre>
       <b>mkfs</b> <b>-t</b> <b>nilfs2</b> /dev/sdb1
              creates a NILFS2 file system on a block device `/dev/sdb1'.

       <b>mount</b> <b>-t</b> <b>nilfs2</b> /dev/sdb1 /nilfs
              mounts the NILFS2 file system on a mount point `/nilfs' like an ordinary POSIX file system.   This
              will  invoke  a  cleaner  process  <b><a href="../man8/nilfs_cleanerd.8.html">nilfs_cleanerd</a></b>(8)  through  an  external  mount  program  (i.e.
              <b><a href="../man8/mount.nilfs2.8.html">mount.nilfs2</a></b>(8)).

       <b>lscp</b>   lists checkpoints created in the file system as follows:

               CNO        DATE     TIME  MODE  FLG      BLKCNT       ICNT
                 1  2014-01-18 20:49:54   cp    -            4          2
                 2  2014-01-18 20:51:45   cp    -         3990         11
                 3  2014-01-18 20:51:45   cp    -         6058          3
                 4  2014-01-18 20:51:49   cp    -         4807          6
                 5  2014-01-18 20:51:49   cp    -          262          3
               ...

       <b>chcp</b> <b>ss</b> 2
              changes the checkpoint whose <u>checkpoint-number</u> is two to a snapshot.   Then  the  checkpoint  list
              will become as follows:

               CNO        DATE     TIME  MODE  FLG      BLKCNT       ICNT
                 1  2014-01-18 20:49:54   cp    -            4          2
                 2  2014-01-18 20:51:45   ss    -         3990         11
                 3  2014-01-18 20:51:45   cp    -         6058          3
                 4  2014-01-18 20:51:49   cp    -         4807          6
                 5  2014-01-18 20:51:49   cp    -          262          3
               ...

       <b>mount</b> <b>-t</b> <b>nilfs2</b> <b>-r</b> <b>-o</b> <b>cp=2</b> /dev/sdb1 /snapshot
              mounts  the  snapshot  on  another  directory  `/snapshot'  as  a read-only file system.  Here the
              snapshot mount requires at least two options, a read-only option (<b>-r</b> or <b>-o</b> <b>ro</b>) and the  <b>cp</b>  option
              (<b>-o</b>  <b>cp=</b><u>checkpoint-number</u>).   Note that a read/write mount and one or more snapshots are mountable
              independently, so the online backup is possible through the snapshot mounts.

               # mount -t nilfs2
               /dev/sdb1 on /nilfs type nilfs2 (rw,gcpid=13296)
               /dev/sdb1 on /snapshot type nilfs2 (ro,cp=2)

       <b>umount</b> /nilfs
              unmounts the NILFS2 file system mounted  on  `/nilfs'  and  will  shutdown  the  <b><a href="../man8/nilfs_cleanerd.8.html">nilfs_cleanerd</a></b>(8)
              through an external umount program (<b><a href="../man8/umount.nilfs2.8.html">umount.nilfs2</a></b>(8)) for the read/write mount.

</pre><h4><b>AUTHORS</b></h4><pre>
       <b>NILFS2</b> was developed by NILFS development team.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man8/mkfs.nilfs2.8.html">mkfs.nilfs2</a></b>(8),  <b><a href="../man8/mount.nilfs2.8.html">mount.nilfs2</a></b>(8),  <b><a href="../man8/umount.nilfs2.8.html">umount.nilfs2</a></b>(8),  <b><a href="../man8/nilfs_cleanerd.8.html">nilfs_cleanerd</a></b>(8),  <b><a href="../man5/nilfs_cleanerd.conf.5.html">nilfs_cleanerd.conf</a></b>(5),  <b><a href="../man8/nilfstune.8.html">nilfs-</a></b>
       <b><a href="../man8/nilfstune.8.html">tune</a></b>(8), <b><a href="../man8/nilfs-clean.8.html">nilfs-clean</a></b>(8), <b><a href="../man8/nilfs-resize.8.html">nilfs-resize</a></b>(8), <b><a href="../man1/lscp.1.html">lscp</a></b>(1), <b><a href="../man8/mkcp.8.html">mkcp</a></b>(8), <b><a href="../man8/chcp.8.html">chcp</a></b>(8), <b><a href="../man8/rmcp.8.html">rmcp</a></b>(8), <b><a href="../man1/lssu.1.html">lssu</a></b>(1), <b><a href="../man8/dumpseg.8.html">dumpseg</a></b>(8)

       https://nilfs.sourceforge.io/

nilfs-utils version 2.2                             Apr 2014                                            <u><a href="../man8/NILFS.8.html">NILFS</a></u>(8)
</pre>
 </div>
</div></section>
</div>
</body>
</html>