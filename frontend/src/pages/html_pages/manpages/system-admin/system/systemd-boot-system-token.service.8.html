<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>systemd-boot-system-token.service - Generate an initial boot loader system token and random seed</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/jammy/+package/systemd">systemd_249.11-0ubuntu3.16_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       systemd-boot-system-token.service - Generate an initial boot loader system token and random seed

</pre><h4><b>SYNOPSIS</b></h4><pre>
       systemd-boot-system-token.service

</pre><h4><b>DESCRIPTION</b></h4><pre>
       systemd-boot-system-token.service is a system service that automatically generates a 'system token' to
       store in an EFI variable in the system's NVRAM and a random seed to store on the EFI System Partition ESP
       on disk. The boot loader may then combine these two randomized data fields by cryptographic hashing, and
       pass it to the OS it boots as initialization seed for its entropy pool. The random seed stored in the ESP
       is refreshed on each reboot ensuring that multiple subsequent boots will boot with different seeds. The
       'system token' is generated randomly once, and then persistently stored in the system's EFI variable
       storage.

       The systemd-boot-system-token.service unit invokes the <b>bootctl</b> <b>random-seed</b> command, which updates the
       random seed in the ESP, and initializes the 'system token' if it's not initialized yet. The service is
       conditionalized so that it is run only when all of the below apply:

       •   A boot loader is used that implements the <b>Boot</b> <b>Loader</b> <b>Interface</b>[1] (which defines the 'system token'
           concept).

       •   Either a 'system token' was not set yet, or the boot loader has not passed the OS a random seed yet
           (and thus most likely has been missing the random seed file in the ESP).

       •   The system is not running in a VM environment. This case is explicitly excluded since on VM
           environments the ESP backing storage and EFI variable storage is typically not physically separated
           and hence booting the same OS image in multiple instances would replicate both, thus reusing the same
           random seed and 'system token' among all instances, which defeats its purpose. Note that it's still
           possible to use boot loader random seed provisioning in this mode, but the automatic logic
           implemented by this service has no effect then, and the user instead has to manually invoke the
           <b>bootctl</b> <b>random-seed</b> acknowledging these restrictions.

       For further details see <b><a href="../man1/bootctl.1.html">bootctl</a></b>(1), regarding the command this service invokes.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man1/systemd.1.html">systemd</a></b>(1), <b><a href="../man1/bootctl.1.html">bootctl</a></b>(1), <b><a href="../man7/systemd-boot.7.html">systemd-boot</a></b>(7)

</pre><h4><b>NOTES</b></h4><pre>
        1. Boot Loader Interface
           https://systemd.io/BOOT_LOADER_INTERFACE

systemd 249                                                                 <u><a href="../man8/SYSTEMD-BOOT-SYSTEM-TOKEN.SERVICE.8.html">SYSTEMD-BOOT-SYSTEM-TOKEN.SERVICE</a></u>(8)
</pre>
 </div>
</div></section>
</div>
</body>
</html>