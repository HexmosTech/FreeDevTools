<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>fsck_hfs — HFS file system consistency check</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/hfsprogs">hfsprogs_540.1.linux3-6_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       fsck_hfs — HFS file system consistency check

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>fsck_hfs</b> <b>-q</b> [<b>-df</b>] <u>special</u> <u>...</u>
       <b>fsck_hfs</b> <b>-p</b> [<b>-df</b>] <u>special</u> <u>...</u>
       <b>fsck_hfs</b>  [<b>-n</b>  | <b>-y</b> | <b>-r</b>] [<b>-dfgxlE</b>] [<b>-D</b> <u>flags</u>] [<b>-b</b> <u>size</u>] [<b>-B</b> <u>path</u>] [<b>-m</b> <u>mode</u>] [<b>-c</b> <u>size</u>] [<b>-R</b> <u>flags</u>] <u>special</u>
                <u>...</u>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The <b>fsck_hfs</b> utility verifies and repairs standard HFS and HFS+ file systems.

       The first form of <b>fsck_hfs</b> quickly checks the specified file  systems  to  determine  whether  they  were
       cleanly unmounted.

       The  second  form  of  <b>fsck_hfs</b> preens the specified file systems.  It is normally started by <u><a href="../man8/fsck.8.html">fsck</a></u>(8) run
       from <u>/etc/rc.boot</u> during automatic reboot, when a HFS  file  system  is  detected.   When  preening  file
       systems,  <b>fsck_hfs</b>  will fix common inconsistencies for file systems that were not unmounted cleanly.  If
       more serious problems are found, <b>fsck_hfs</b> does not try to fix them, indicates that it was not successful,
       and exits.

       The third form of  <b>fsck_hfs</b>  checks  the  specified  file  systems  and  tries  to  repair  all  detected
       inconsistencies.

       If no options are specified <b>fsck_hfs</b> will always check and attempt to fix the specified file systems.

       The options are as follows:

             <b>-c</b>  <u>size</u>  Specify  the  <u>size</u>  of  the cache used by <b>fsck_hfs</b> internally.  Bigger <u>size</u> can result in
                     better performance but can result in deadlock when  used  with  <b>-l</b>  option.   Size  can  be
                     specified  as  a  decimal,  octal, or hexadecimal number.  If the number ends with a ``k'',
                     ``m'', or ``g'', the number is multiplied by 1024 (1K), 1048576 (1M), or  1073741824  (1G),
                     respectively.

             <b>-d</b>      Display  debugging  information.   This option may provide useful information when <b>fsck_hfs</b>
                     cannot repair a damaged file system.

             <b>-D</b> <u>flags</u> Print extra debugging information.  The <u>flags</u> are a bitmap  that  control  which  kind  of
                     debug information is printed.  The following values are currently implemented:
                           0x0001  Informational messages
                           0x0002  Error messages
                           0x0010  Extended attributes related messages
                           0x0020  Overlapped extents related messages

             <b>-b</b> <u>size</u> Specify the size, in bytes, of the physical blocks used by the <b>-B</b> option.

             <b>-B</b>  <u>path</u>  Print  the files containing the physical blocks listed in the file <u>path</u>.  The file should
                     contain one or more decimal, octal (with  leading  0)  or  hexadecimal  (with  leading  0x)
                     numbers  separated by white space.  The physical block numbers are relative to the start of
                     the partition, so if you have block numbers relative to the start of the device,  you  will
                     have  to  subtract  the block number of the start of the partition.  The size of a physical
                     block is given with the <b>-b</b> option; the default is 512 bytes per block.

             <b>-f</b>      When used with the <b>-p</b> option, force <b>fsck_hfs</b> to check `clean' file  systems,  otherwise  it
                     means force <b>fsck_hfs</b> to check and repair journaled HFS+ file systems.

             <b>-g</b>      Causes  <b>fsck_hfs</b>  to  generate  its output strings in GUI format.  This option is used when
                     another application with a graphical user  interface  (like  Mac  OS  X  Disk  Utility)  is
                     invoking the <b>fsck_hfs</b> tool.

             <b>-x</b>      Causes  <b>fsck_hfs</b> to generate its output strings in XML (plist) format.  This option implies
                     the <b>-g</b> option.

             <b>-l</b>      Lock down the file system and perform a test-only check.  This makes it possible to check a
                     file system that is currently mounted, although no repairs can be made.

             <b>-m</b> <u>mode</u> Mode is an octal number that will be  used  to  set  the  permissions  for  the  lost+found
                     directory  when  it  is created.  The lost+found directory is only created when a volume is
                     repaired and orphaned files or directories are detected.  <b>fsck_hfs</b>  places  orphaned  files
                     and  directories  into  the  lost+found directory (located at the root of the volume).  The
                     default mode is 01777.

             <b>-p</b>      Preen the specified file systems.

             <b>-q</b>      Causes <b>fsck_hfs</b> to quickly check whether the volume was unmounted cleanly.  If  the  volume
                     was unmounted cleanly, then the exit status is 0.  If the volume was not unmounted cleanly,
                     then  the  exit  status will be non-zero.  In either case, a message is printed to standard
                     output describing whether the volume was clean or dirty.

             <b>-y</b>      Always attempt to repair any damage that is found.

             <b>-n</b>      Never attempt to repair any damage that is found.

             <b>-E</b>      Cause <b>fsck_hfs</b> to exit (with a value of 47) if it encounters any major errors.   A  ``major
                     error''  is  considered  one  which  would  impact  using  the  volume  in normal usage; an
                     inconsistency which would not impact such use is  considered  ``minor''  for  this  option.
                     Only valid with the <b>-n</b> option.

             <b>-R</b> <u>flags</u> Rebuilds the requested btree.  The following flags are supported:
                           a       Attribute btree
                           c       Catalog btree
                           e       Extents overflow btree
                     Rebuilding  a btree will only work if there is enough free space on the file system for the
                     new btree file, and if <b>fsck_hfs</b> is able to traverse each of  the  nodes  in  the  requested
                     btree successfully.  Rebuilding btrees is not supported on HFS Standard volumes.

             <b>-r</b>      Rebuild the catalog btree.  This is synonymous with <b>-Rc</b>.

       Because of inconsistencies between the block device and the buffer cache, the raw device should always be
       used.

</pre><h4><b>EXIT</b> <b>VALUES</b></h4><pre>
       <b>fsck_hfs</b> indicates some status by exit value.  The current list of exit status results is:
             0       No errors found, or successfully repaired.
             3       A quick-check (the <b>-n</b> option) found a dirty filesystem; no repairs were made.
             4       During  boot,  the  root  filesystem  was  found  to  be  dirty; repairs were made, and the
                     filesystem was remounted.  The system should be rebooted.
             8       A corrupt filesystem was found during a check, or repairs did not succeed.
             47      A major error was found with <b>-E</b>.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <u><a href="../man8/fsck.8.html">fsck</a></u>(8)

</pre><h4><b>BUGS</b></h4><pre>
       <b>fsck_hfs</b> is not able to fix some inconsistencies that it detects.

</pre><h4><b>HISTORY</b></h4><pre>
       The <b>fsck_hfs</b> command appeared in Mac OS X Server 1.0 .

Mac OS X                                         August 5, 2008                                      <u><a href="../man8/FSCK_HFS.8.html">FSCK_HFS</a></u>(8)
</pre>
 </div>
</div></section>
</div>
</body>
</html>