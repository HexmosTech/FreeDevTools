<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>pki-upgrade - Tool for upgrading system-wide PKI configuration.</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/jammy/+package/pki-base">pki-base_11.0.0-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       pki-upgrade - Tool for upgrading system-wide PKI configuration.

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>pki-upgrade</b> [<u>OPTIONS</u>]

</pre><h4><b>DESCRIPTION</b></h4><pre>
       There  are  two  parts to upgrading PKI system: upgrading the system configuration files used by both the
       client and the server processes and upgrading the server configuration files.

       When upgrading PKI system, the existing system configuration files (e.g. /etc/pki/pki.conf) may  need  to
       be  upgraded because the content may have changed from one version to another.  The configuration upgrade
       is executed automatically during RPM upgrade.  However, in case there is a problem, the process can  also
       be run manually using <b>pki-upgrade</b>.

       The  system  upgrade  process  is  done  incrementally using upgrade scriptlets.  The upgrade process and
       scriptlet execution is monitored in upgrade trackers.  A counter shows the latest index  number  for  the
       most  recently  executed scriptlet; when all scriptlets have run, the component tracker shows the updated
       version number.

       The upgrade scriptlets are stored  in  /usr/share/pki/upgrade/<u>version</u>/<u>index</u>-<u>name</u>.   The  <u>version</u>  is  the
       system version to be upgraded.  The <u>index</u> is the script execution order.  The <u>name</u> is the scriptlet name.

       During    upgrade,    the    scriptlets   will   back   up   all   changes   to   the   filesystem   into
       /var/log/pki/upgrade/<u>version</u>/<u>index</u>.  The <u>version</u> and <u>index</u> values indicate the scriptlet being  executed.
       A copy of the files and folders that are being modified or removed will be stored in <b>oldfiles</b>.  The names
       of the newly-added files and folders will be stored in <b>newfiles</b>.

       The system upgrade process is tracked in /etc/pki/pki.version.  The file stores the current configuration
       version and the last successful scriptlet index.

</pre><h4><b>OPTIONS</b></h4><pre>
   <b>General</b> <b>options</b>
       <b>--silent</b>
           Upgrade in silent mode.

       <b>--status</b>
           Show upgrade status only <b>without</b> performing the upgrade.

       <b>--revert</b>
           Revert the last version.

       <b>-X</b>
           Show advanced options.

       <b>-v</b>, <b>--verbose</b>
           Run in verbose mode.

       <b>-h</b>, <b>--help</b>
           Show this help message.

   <b>Advanced</b> <b>options</b>
       The  advanced options circumvent the normal component tracking process by changing the scriptlet order or
       changing the tracker information.

       <b>WARNING:</b> These options may render the system unusable.

       <b>--scriptlet-version</b> <u>version</u>
           Run scriptlets for a specific version only.

       <b>--scriptlet-index</b> <u>index</u>
           Run a specific scriptlet only.

       <b>--remove-tracker</b>
           Remove the tracker.

       <b>--reset-tracker</b>
           Reset the tracker to match the package version.

       <b>--set-tracker</b> <u>version</u>
           Set the tracker to a specific version.

</pre><h4><b>OPERATIONS</b></h4><pre>
   <b>Interactive</b> <b>mode</b>
       By default, <b>pki-upgrade</b> will run interactively.  It will ask for a  confirmation  before  executing  each
       scriptlet.

              $ pki-upgrade

       If there is an error, it will stop and show the error.

   <b>Silent</b> <b>mode</b>
       The upgrade process can also be done silently without user interaction:

              $ pki-upgrade --silent

       If there is an error, it will stop and show the error.

   <b>Checking</b> <b>upgrade</b> <b>status</b>
       It is possible to check the status of a running upgrade process.

              $ pki-upgrade --status

   <b>Troubleshooting</b>
       If there is an error, rerun the upgrade in verbose mode:

              $ pki-upgrade --verbose

       Check  the  scriptlet  to  see  which  operations  are  being executed.  Once the error is identified and
       corrected, the upgrade can be resumed by re-running <b>pki-upgrade</b>.

       It is possible to rerun a failed script by itself, specifying the instance and  subsystem,  version,  and
       scriptlet index:

              $ pki-upgrade --scriptlet-version 10.0.1 --scriptlet-index 1

   <b>Reverting</b> <b>an</b> <b>upgrade</b>
       If necessary, the upgrade can be reverted:

              $ pki-upgrade --revert

       Files  and  folders  that  were  created  by  the scriptlet will be removed.  Files and folders that were
       modified or removed by the scriptlet will be restored.

</pre><h4><b>FILES</b></h4><pre>
       /usr/sbin/pki-upgrade

</pre><h4><b>AUTHORS</b></h4><pre>
       Ade  Lee  lt;<a href="mailto:alee@redhat.comgt">alee@redhat.comgt</a>;,  Ella  Deon  Lackey  lt;<a href="mailto:dlackey@redhat.comgt">dlackey@redhat.comgt</a>;,  and   Endi   S.   Dewata
       lt;<a href="mailto:edewata@redhat.comgt">edewata@redhat.comgt</a>;.

</pre><h4><b>COPYRIGHT</b></h4><pre>
       Copyright  (c)  2013  Red  Hat,  Inc.   This  is licensed under the GNU General Public License, version 2
       (GPLv2).  A copy of this license is available at <a href="http://www.gnu.org/licenses/old-licenses/gpl-2.0.txt">http://www.gnu.org/licenses/old-licenses/gpl-2.0.txt</a>.

PKI                                               Jul 22, 2013                                    <u><a href="../man8/pki-upgrade.8.html">pki-upgrade</a></u>(8)
</pre>
 </div>
</div></section>
</div>
</body>
</html>