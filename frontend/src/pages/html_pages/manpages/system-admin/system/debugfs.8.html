<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>debugfs - ext2/ext3/ext4 file system debugger</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/e2fsprogs">e2fsprogs_1.47.2-3ubuntu1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       debugfs - ext2/ext3/ext4 file system debugger

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>debugfs</b>  [  <b>-DVwcin</b>  ]  [  <b>-b</b>  blocksize  ]  [  <b>-s</b>  superblock  ]  [  <b>-f</b>  cmd_file  ] [ <b>-R</b> request ] [ <b>-d</b>
       data_source_device ] [ <b>-z</b> <u>undo_file</u> ] [ device ]

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The <b>debugfs</b> program is an interactive file system debugger. It can be used  to  examine  and  change  the
       state of an ext2, ext3, or ext4 file system.

       <u>device</u> is a block device (e.g., /dev/sdXX) or a file containing the file system.

</pre><h4><b>OPTIONS</b></h4><pre>
       <u>-w</u>     Specifies that the file system should be opened in read-write mode.  Without this option, the file
              system is opened in read-only mode.

       <u>-n</u>     Disables  metadata checksum verification.  This should only be used if you believe the metadata to
              be correct despite the complaints of e2fsprogs.

       <u>-c</u>     Specifies that the file system should be opened in catastrophic mode, in which the inode and group
              bitmaps are not read initially.  This can be useful for file systems with significant  corruption,
              but because of this, catastrophic mode forces the file system to be opened read-only.

       <u>-i</u>     Specifies  that  <u>device</u>  represents  an ext2 image file created by the <b>e2image</b> program.  Since the
              ext2 image file only contains the superblock, block group descriptor, block and  inode  allocation
              bitmaps,  and  the  inode  table,  many  <b>debugfs</b> commands will not function properly.  <b>Warning:</b> no
              safety checks are in place, and <b>debugfs</b> may fail in interesting ways if commands such as <u>ls</u>, <u>dump</u>,
              etc. are tried without specifying the <u>data_source_device</u>  using  the  <u>-d</u>  option.   <b>debugfs</b>  is  a
              debugging tool.  It has rough edges!

       <u>-d</u> <u>data_source_device</u>
              Used  with the <u>-i</u> option, specifies that <u>data_source_device</u> should be used when reading blocks not
              found in the ext2 image file.  This includes data, directory, and indirect blocks.

       <u>-b</u> <u>blocksize</u>
              Forces the use of the given block size (in bytes) for the file system, rather than  detecting  the
              correct  block  size  automatically.  (This option is rarely needed; it is used primarily when the
              file system is extremely badly damaged/corrupted.)

       <u>-s</u> <u>superblock</u>
              Causes the file system superblock to be read from the given block number,  instead  of  using  the
              primary superblock (located at an offset of 1024 bytes from the beginning of the file system).  If
              you  specify  the  <u>-s</u>  option,  you  must also provide the blocksize of the file system via the <u>-b</u>
              option.   (This option is rarely needed; it is used primarily when the file  system  is  extremely
              badly damaged/corrupted.)

       <u>-f</u> <u>cmd_file</u>
              Causes  <b>debugfs</b>  to  read  in  commands from <u>cmd_file</u>, and execute them.  When <b>debugfs</b> is finished
              executing those commands, it will exit.

       <u>-D</u>     Causes <b>debugfs</b> to open the device using Direct I/O, bypassing the buffer cache.   Note  that  some
              Linux devices, notably device mapper as of this writing, do not support Direct I/O.

       <u>-R</u> <u>request</u>
              Causes <b>debugfs</b> to execute the single command <u>request</u>, and then exit.

       <u>-V</u>     print the version number of <b>debugfs</b> and exit.

       <b>-z</b> <u>undo_file</u>
              Before overwriting a file system block, write the old contents of the block to an undo file.  This
              undo  file  can  be  used  with  <b><a href="../man8/e2undo.8.html">e2undo</a></b>(8)  to  restore the old contents of the file system should
              something go wrong.  If the empty string is passed as the undo_file argument, the undo  file  will
              be   written   to   a  file  named  debugfs-<u>device</u>.e2undo  in  the  directory  specified  via  the
              <u>E2FSPROGS_UNDO_DIR</u> environment variable.

              WARNING: The undo file cannot be used to recover from a power or system crash.

</pre><h4><b>SPECIFYING</b> <b>FILES</b></h4><pre>
       Many <b>debugfs</b> commands take a <u>filespec</u> as an argument to specify an inode (as opposed to  a  pathname)  in
       the  file  system  which  is  currently opened by <b>debugfs</b>.  The <u>filespec</u> argument may be specified in two
       forms.  The first form is an inode number surrounded by angle brackets, e.g., <u>&lt;2&gt;</u>.  The second form is  a
       pathname;  if  the  pathname is prefixed by a forward slash ('/'), then it is interpreted relative to the
       root of the file system which is currently opened by  <b>debugfs</b>.   If  not,  the  pathname  is  interpreted
       relative  to  the  current working directory as maintained by <b>debugfs</b>.  This may be modified by using the
       <b>debugfs</b> command <u>cd</u>.

</pre><h4><b>COMMANDS</b></h4><pre>
       This is a list of the commands which <b>debugfs</b> supports.

       <b>blocks</b> <u>filespec</u>
              Print the blocks used by the inode <u>filespec</u> to stdout.

       <b>bmap</b> <u>[</u> <u>-a</u> <u>]</u> <u>filespec</u> <u>logical_block</u> <u>[physical_block]</u>
              Print or set the physical block number corresponding to the logical block number <u>logical_block</u>  in
              the inode <u>filespec</u>.  If the <u>-a</u> flag is specified, try to allocate a block if necessary.

       <b>block_dump</b> <u>'[</u> <u>-x</u> <u>]</u> <u>[-f</u> <u>filespec]</u> <u>block_num</u>
              Dump  the  file system block given by <u>block_num</u> in hex and ASCII format to the console.  If the <u>-f</u>
              option is specified, the block number is relative to the start of the given <b>filespec</b>.  If  the  <u>-x</u>
              option  is  specified, the block is interpreted as an extended attribute block and printed to show
              the structure of extended attribute data structures.

       <b>cat</b> <u>filespec</u>
              Dump the contents of the inode <u>filespec</u> to stdout.

       <b>cd</b> <u>filespec</u>
              Change the current working directory to <u>filespec</u>.

       <b>chroot</b> <u>filespec</u>
              Change the root directory to be the directory <u>filespec</u>.

       <b>close</b> <u>[-a]</u>
              Close the currently open file system.  If the <u>-a</u> option is specified, write out any changes to the
              superblock and block group descriptors to all of the backup superblocks, not just  to  the  master
              superblock.

       <b>clri</b> <u>filespec</u>
              Clear the contents of the inode <u>filespec</u>.

       <b>copy_inode</b> <u>source_inode</u> <u>destination_inode</u>
              Copy  the  contents  of  the  inode  structure  in  <u>source_inode</u> and use it to overwrite the inode
              structure at <u>destination_inode</u>.

       <b>dirsearch</b> <u>filespec</u> <u>filename</u>
              Search the directory <u>filespec</u> for <u>filename</u>.

       <b>dirty</b> <u>[-clean]</u>
              Mark the file system as dirty, so that the superblocks will be  written  on  exit.   Additionally,
              clear the superblock's valid flag, or set it if <u>-clean</u> is specified.

       <b>dump</b> <u>[-p]</u> <u>filespec</u> <u>out_file</u>
              Dump  the  contents  of the inode <u>filespec</u> to the output file <u>out_file</u>.  If the <u>-p</u> option is given
              set the owner, group and permissions information on <u>out_file</u> to match <u>filespec</u>.

       <b>dump_mmp</b> <u>[mmp_block]</u>
              Display the multiple-mount protection (mmp) field values.  If <u>mmp_block</u> is specified  then  verify
              and  dump  the  MMP values from the given block number, otherwise use the <b>s_mmp_block</b> field in the
              superblock to locate and use the existing MMP block.

       <b>dx_hash</b> <u>[-cv]</u> <u>[-h</u> <u>hash_alg]</u> <u>[-s</u> <u>hash_seed]</u> <u>filename</u>
              Calculate the directory hash of <u>filename</u>.   The  <u>-c</u>  option  will  casefold  the  filename  before
              calculating the hash.  The <u>-v</u> option will make the <b>dx_hash</b> command more verbose and print the hash
              algorithm  and  hash  seed to calculate the hash.  If a file system is open, use the hash_seed and
              default hash_algorithm used by the file system, although these can be overridden by the <u>-h</u> and  <u>-s</u>
              options.   The  hash  algorithm  specified with <u>-h</u> may be <b>legacy</b>, <b>half_md4</b>, or <b>tea</b>.  The hash seed
              specified with <u>-s</u> must be in UUID format.

       <b>dump_extents</b> <u>[-n]</u> <u>[-l]</u> <u>filespec</u>
              Dump the extent tree of the inode <u>filespec</u>.  The <u>-n</u> flag will cause <b>dump_extents</b> to  only  display
              the  interior  nodes in the extent tree.   The <u>-l</u> flag will cause <b>dump_extents</b> to only display the
              leaf nodes in the extent tree.

              (Please note that the length and range of blocks for the last extent in an  interior  node  is  an
              estimate  by  the  extents  library  functions,  and is not stored in file system data structures.
              Hence, the values displayed may not necessarily by accurate and does not  indicate  a  problem  or
              corruption in the file system.)

       <b>dump_unused</b>
              Dump unused blocks which contain non-null bytes.

       <b>ea_get</b> <u>[-f</u> <u>outfile]|[-xVC]</u> <u>[-r]</u> <u>filespec</u> <u>attr_name</u>
              Retrieve the value of the extended attribute <u>attr_name</u> in the file <u>filespec</u> and write it either to
              stdout or to <u>outfile</u>.

       <b>ea_list</b> <u>filespec</u>
              List the extended attributes associated with the file <u>filespec</u> to standard output.

       <b>ea_set</b> <u>[-f</u> <u>infile]</u> <u>[-r]</u> <u>filespec</u> <u>attr_name</u> <u>attr_value</u>
              Set  the  value  of  the  extended  attribute  <u>attr_name</u>  in the file <u>filespec</u> to the string value
              <u>attr_value</u> or read it from <u>infile</u>.

       <b>ea_rm</b> <u>filespec</u> <u>attr_names...</u>
              Remove the extended attribute <u>attr_name</u> from the file <u>filespec</u>.

       <b>expand_dir</b> <u>filespec</u>
              Expand the directory <u>filespec</u>.

       <b>fallocate</b> <u>filespec</u> <u>start_block</u> <u>[end_block]</u>
              Allocate and map  uninitialized  blocks  into  <u>filespec</u>  between  logical  block  <u>start_block</u>  and
              <u>end_block</u>,  inclusive.  If <u>end_block</u> is not supplied, this function maps until it runs out of free
              disk blocks or the maximum file size is reached.  Existing mappings are left alone.

       <b>feature</b> <u>[fs_feature]</u> <u>[-fs_feature]</u> <u>...</u>
              Set or clear various file system features in the superblock.  After setting or clearing  any  file
              system features that were requested, print the current state of the file system feature set.

       <b>filefrag</b> <u>[-dvr]</u> <u>filespec</u>
              Print  the number of contiguous extents in <u>filespec</u>.  If <u>filespec</u> is a directory and the <u>-d</u> option
              is not specified, <u>filefrag</u> will print the number of  contiguous  extents  for  each  file  in  the
              directory.  The <u>-v</u> option will cause <u>filefrag</u> print a tabular listing of the contiguous extents in
              the file.  The <u>-r</u> option will cause <u>filefrag</u> to do a recursive listing of the directory.

       <b>find_free_block</b> <u>[count</u> <u>[goal]]</u>
              Find the first <u>count</u> free blocks, starting from <u>goal</u> and allocate it.  Also available as <b>ffb</b>.

       <b>find_free_inode</b> <u>[dir</u> <u>[mode]]</u>
              Find  a  free  inode and allocate it.  If present, <u>dir</u> specifies the inode number of the directory
              which the inode is to be located.  The second optional argument <u>mode</u> specifies the permissions  of
              the  new  inode.   (If  the directory bit is set on the mode, the allocation routine will function
              differently.)  Also available as <b>ffi</b>.

       <b>freeb</b> <u>block</u> <u>[count]</u>
              Mark the block number <u>block</u> as not allocated.  If the optional argument  <u>count</u>  is  present,  then
              <u>count</u> blocks starting at block number <u>block</u> will be marked as not allocated.

       <b>freefrag</b> <u>[-c</u> <u>chunk_kb]</u>
              Report  free space fragmentation on the currently open file system.  If the <u>-c</u> option is specified
              then the filefrag command will print how many free chunks of size <u>chunk_kb</u> can  be  found  in  the
              file system.  The chunk size must be a power of two and be larger than the file system block size.

       <b>freei</b> <u>filespec</u> <u>[num]</u>
              Free  the  inode  specified  by  <u>filespec</u>.  If <u>num</u> is specified, also clear num-1 inodes after the
              specified inode.

       <b>get_quota</b> <u>quota_type</u> <u>id</u>
              Display quota information for given quota type (user, group, or project) and ID.

       <b>help</b>   Print a list of commands understood by <b>debugfs</b>.

       <b>htree_dump</b> <u>filespec</u>
              Dump the hash-indexed directory <u>filespec</u>, showing its tree structure.

       <b>icheck</b> <u>block</u> <u>...</u>
              Print a listing of the inodes which use the one or more blocks specified on the command line.

       <b>inode_dump</b> <u>[-b]|[-e]|[-x]</u> <u>filespec</u>
              Print the contents of the inode data structure in hex and ASCII format.  The <u>-b</u> option causes  the
              command to only dump the contents of the <b>i_blocks</b> array.  The <u>-e</u> option causes the command to only
              dump  the  contents  of the extra inode space, which is used to store in-line extended attributes.
              The <u>-x</u> option causes  the  command  to  dump  the  extra  inode  space  interpreted  and  extended
              attributes.  This is useful to debug corrupted inodes containing extended attributes.

       <b>imap</b> <u>filespec</u>
              Print the location of the inode data structure (in the inode table) of the inode <u>filespec</u>.

       <b>init_filesys</b> <u>device</u> <u>blocksize</u>
              Create  an  ext2  file system on <u>device</u> with device size <u>blocksize</u>.  Note that this does not fully
              initialize all of the data structures; to do this, use the <b><a href="../man8/mke2fs.8.html">mke2fs</a></b>(8) program.  This is just a call
              to the low-level library, which sets up the superblock and block descriptors.

       <b>journal_close</b>
              Close the open journal.

       <b>journal_open</b> <u>[-c]</u> <u>[-v</u> <u>ver]</u> <u>[-f</u> <u>ext_jnl]</u>
              Opens the journal for reading and writing.  Journal checksumming can be enabled by  supplying  <u>-c</u>;
              checksum  formats  2  and 3 can be selected with the <u>-v</u> option.  An external journal can be loaded
              from <u>ext_jnl</u>.

       <b>journal_run</b>
              Replay all transactions in the open journal.

       <b>journal_write</b> <u>[-b</u> <u>blocks]</u> <u>[-r</u> <u>revoke]</u> <u>[-c]</u> <u>file</u>
              Write a transaction to the open journal.  The list of blocks to write  should  be  supplied  as  a
              comma-separated  list  in  <u>blocks</u>;  the blocks themselves should be readable from <u>file</u>.  A list of
              blocks to revoke can be supplied as a comma-separated list in <u>revoke</u>.  By default, a commit record
              is written at the end; the <u>-c</u> switch writes an uncommitted transaction.

       <b>kill_file</b> <u>filespec</u>
              Deallocate the inode <u>filespec</u> and its blocks.  Note  that  this  does  not  remove  any  directory
              entries (if any) to this inode.  See the <b><a href="../man1/rm.1.html">rm</a></b>(1) command if you wish to unlink a file.

       <b>lcd</b> <u>directory</u>
              Change  the  current  working  directory  of  the  <b>debugfs</b> process to <u>directory</u> on the native file
              system.

       <b>list_quota</b> <u>quota_type</u>
              Display quota information for given quota type (user, group, or project).

       <b>ln</b> <u>filespec</u> <u>dest_file</u>
              Create a link named <u>dest_file</u> which is a hard link to <u>filespec</u>.  Note this  does  not  adjust  the
              inode reference counts.

       <b>logdump</b> <u>[-acsOS]</u> <u>[-b</u> <u>block]</u> <u>[-n</u> <u>num_trans</u> <u>]</u> <u>[-i</u> <u>filespec]</u> <u>[-f</u> <u>journal_file]</u> <u>[output_file]</u>
              Dump  the  contents  of  the ext3 journal.  By default, dump the journal inode as specified in the
              superblock.  However, this can be overridden with the <u>-i</u> option, which dumps the journal from  the
              internal  inode  given by <u>filespec</u>.  A regular file containing journal data can be specified using
              the <u>-f</u> option.  Finally, the <u>-s</u> option utilizes the backup information in the superblock to locate
              the journal.

              The <u>-S</u> option causes <b>logdump</b> to print the contents of the journal superblock.

              The <u>-a</u> option causes the <b>logdump</b> to print the contents of all of the descriptor  blocks.   The  <u>-b</u>
              option  causes  <b>logdump</b>  to  print  all journal records that refer to the specified block.  The <u>-c</u>
              option will print out the contents of all of the data blocks selected by the <u>-a</u> and <u>-b</u> options.

              The <u>-O</u> option causes logdump to display old (checkpointed) journal entries.  This can be  used  to
              try to track down journal problems even after the journal has been replayed.

              The  <u>-n</u>  option  causes  <b>logdump</b> to continue past a journal block which is missing a magic number.
              Instead, it will stop only when the entire log is printed or after <u>num_trans</u> transactions.

       <b>ls</b> <u>[-l]</u> <u>[-c]</u> <u>[-d]</u> <u>[-p]</u> <u>[-r]</u> <u>filespec</u>
              Print a listing of the files in the directory  <u>filespec</u>.   The  <u>-c</u>  flag  causes  directory  block
              checksums  (if  present) to be displayed.  The <u>-d</u> flag will list deleted entries in the directory.
              The <u>-l</u> flag will list files using a more verbose format.  The <u>-p</u> flag will list  the  files  in  a
              format  which  is  more easily parsable by scripts, as well as making it more clear when there are
              spaces or other non-printing characters at the end of filenames.   The  <u>-r</u>  flag  will  force  the
              printing of the filename, even if it is encrypted.

       <b>list_deleted_inodes</b> <u>[limit]</u>
              List deleted inodes, optionally limited to those deleted within <u>limit</u> seconds ago.  Also available
              as <b>lsdel</b>.

              This  command  was  useful  for  recovering  from accidental file deletions for ext2 file systems.
              Unfortunately, it is not useful for this purpose if the files were deleted  using  ext3  or  ext4,
              since the inode's data blocks are no longer available after the inode is released.

       <b>modify_inode</b> <u>filespec</u>
              Modify the contents of the inode structure in the inode <u>filespec</u>.  Also available as <b>mi</b>.

       <b>mkdir</b> <u>filespec</u>
              Make a directory.

       <b>mknod</b> <u>filespec</u> <u>[p|[[c|b]</u> <u>major</u> <u>minor]]</u>
              Create  a  special device file (a named pipe, character or block device).  If a character or block
              device is to be made, the <u>major</u> and <u>minor</u> device numbers must be specified.

       <b>ncheck</b> <u>[-c]</u> <u>inode_num</u> <u>...</u>
              Take the requested list of inode numbers, and print a listing of pathnames to those  inodes.   The
              <u>-c</u>  flag  will  enable  checking  the file type information in the directory entry to make sure it
              matches the inode's type.

       <b>open</b> <u>[-weficD]</u> <u>[-b</u> <u>blocksize]</u> <u>[-d</u> <u>image_filename]</u> <u>[-s</u> <u>superblock]</u> <u>[-z</u> <u>undo_file]</u> <u>device</u>
              Open a file system for editing.  The <u>-f</u> flag forces the file system to be opened even if there are
              some unknown or incompatible file system features which would normally  prevent  the  file  system
              from  being  opened.   The <u>-e</u> flag causes the file system to be opened in exclusive mode.  The <u>-b</u>,
              <u>-c</u>, <u>-d</u>, <u>-i</u>, <u>-s</u>, <u>-w</u>, and <u>-D</u> options behave the same as the command-line options to <b>debugfs</b>.

       <b>orphan_inodes</b>
              List the orphan inodes in the file system.

       <b>punch</b> <u>filespec</u> <u>start_blk</u> <u>[end_blk]</u>
              Delete the blocks in the inode ranging from <u>start_blk</u> to <u>end_blk</u>.  If <u>end_blk</u> is omitted then this
              command will function as a truncate command; that is, all of  the  blocks  starting  at  <u>start_blk</u>
              through to the end of the file will be deallocated.

       <b>symlink</b> <u>filespec</u> <u>target</u>
              Make a symbolic link.

       <b>pwd</b>    Print the current working directory.

       <b>quit</b>   Quit <b>debugfs</b>

       <b>rdump</b> <u>directory[...]</u> <u>destination</u>
              Recursively  dump  <u>directory</u>,  or  multiple  <u>directories</u>,  and all its contents (including regular
              files, symbolic links, and other directories) into the  named  <u>destination</u>,  which  should  be  an
              existing directory on the native file system.

       <b>rm</b> <u>pathname</u>
              Unlink  <u>pathname</u>.   If  this  causes the inode pointed to by <u>pathname</u> to have no other references,
              deallocate the file.  This command functions as the unlink() system call.

       <b>rmdir</b> <u>filespec</u>
              Remove the directory <u>filespec</u>.

       <b>setb</b> <u>block</u> <u>[count]</u>
              Mark the block number <u>block</u> as allocated.  If the optional argument <u>count</u> is present,  then  <u>count</u>
              blocks starting at block number <u>block</u> will be marked as allocated.

       <b>set_block_group</b> <u>bgnum</u> <u>field</u> <u>value</u>
              Modify  the  block  group  descriptor  specified by <u>bgnum</u> so that the block group descriptor field
              <u>field</u> has value <u>value</u>.  Also available as <b>set_bg</b>.

       <b>set_current_time</b> <u>time</u>
              Set current time in seconds since Unix epoch to use when setting file system fields.

       <b>seti</b> <u>filespec</u> <u>[num]</u>
              Mark inode <u>filespec</u> as in use in the inode bitmap.  If <u>num</u> is specified,  also  set  num-1  inodes
              after the specified inode.

       <b>set_inode_field</b> <u>filespec</u> <u>field</u> <u>value</u>
              Modify the inode specified by <u>filespec</u> so that the inode field <u>field</u> has value <u>value</u>.  The list of
              valid  inode  fields  which  can  be  set  via this command can be displayed by using the command:
              <b>set_inode_field</b> <b>-l</b> Also available as <b>sif</b>.

       <b>set_mmp_value</b> <u>field</u> <u>value</u>
              Modify the multiple-mount protection (MMP) data so that the MMP field <u>field</u> has value <u>value</u>.   The
              list  of valid MMP fields which can be set via this command can be displayed by using the command:
              <b>set_mmp_value</b> <b>-l</b> Also available as <b>smmp</b>.

       <b>set_super_value</b> <u>field</u> <u>value</u>
              Set the superblock field <u>field</u> to <u>value</u>.  The list of valid superblock fields which can be set via
              this command can be displayed by using the command: <b>set_super_value</b> <b>-l</b> Also available as <b>ssv</b>.

       <b>show_debugfs_params</b>
              Display <b>debugfs</b> parameters such as information about currently opened file system.

       <b>show_super_stats</b> <u>[-h]</u>
              List the contents of the super block and the block group descriptors.  If the <u>-h</u>  flag  is  given,
              only print out the superblock contents. Also available as <b>stats</b>.

       <b>stat</b> <u>filespec</u>
              Display the contents of the inode structure of the inode <u>filespec</u>.

       <b>supported_features</b>
              Display file system features supported by this version of <b>debugfs</b>.

       <b>testb</b> <u>block</u> <u>[count]</u>
              Test  if  the  block  number  <u>block</u>  is  marked as allocated in the block bitmap.  If the optional
              argument <u>count</u> is present, then <u>count</u> blocks starting at block number <u>block</u> will be tested.

       <b>testi</b> <u>filespec</u>
              Test if the inode <u>filespec</u> is marked as allocated in the inode bitmap.

       <b>undel</b> <u>&lt;inode_number&gt;</u> <u>[pathname]</u>
              Undelete the specified inode number (which must be surrounded by angle brackets) so  that  it  and
              its  blocks  are marked in use, and optionally link the recovered inode to the specified pathname.
              The <b>e2fsck</b> command should always be run after using the <b>undel</b> command to recover deleted files.

              Note that if you are recovering a large number of deleted files, linking the inode to a  directory
              may  require  the directory to be expanded, which could allocate a block that had been used by one
              of the yet-to-be-undeleted files.  So it is safer to undelete all of the inodes without specifying
              a destination pathname, and then in a separate pass, use the debugfs  <b>link</b>  command  to  link  the
              inode  to  the  destination  pathname,  or use <b>e2fsck</b> to check the file system and link all of the
              recovered inodes to the lost+found directory.

       <b>unlink</b> <u>pathname</u>
              Remove the link specified by <u>pathname</u> to an inode.  Note this does not adjust the inode  reference
              counts.

       <b>write</b> <u>source_file</u> <u>out_file</u>
              Copy the contents of <u>source_file</u> into a newly-created file in the file system named <u>out_file</u>.

       <b>zap_block</b> <u>[-f</u> <u>filespec]</u> <u>[-o</u> <u>offset]</u> <u>[-l</u> <u>length]</u> <u>[-p</u> <u>pattern]</u> <u>block_num</u>
              Overwrite  the  block specified by <u>block_num</u> with zero (NUL) bytes, or if <u>-p</u> is given use the byte
              specified by <u>pattern</u>.  If <u>-f</u> is given then <u>block_num</u> is relative to the start of the file given by
              <u>filespec</u>.  The <u>-o</u> and <u>-l</u> options limit the range of bytes to  zap  to  the  specified  <u>offset</u>  and
              <u>length</u> relative to the start of the block.

       <b>zap_block</b> <u>[-f</u> <u>filespec]</u> <u>[-b</u> <u>bit]</u> <u>block_num</u>
              Bit-flip  portions  of  the physical <u>block_num</u>.  If <u>-f</u> is given, then <u>block_num</u> is a logical block
              relative to the start of <u>filespec</u>.

</pre><h4><b>ENVIRONMENT</b> <b>VARIABLES</b></h4><pre>
       <b>DEBUGFS_PAGER,</b> <b>PAGER</b>
              The <b>debugfs</b> program always pipes the output of the some commands through a pager  program.   These
              commands   include:   <u>show_super_stats</u>   (<u>stats</u>),  <u>list_directory</u>  (<u>ls</u>),  <u>show_inode_info</u>  (<u>stat</u>),
              <u>list_deleted_inodes</u> (<u>lsdel</u>), and <u>htree_dump</u>.  The specific pager can explicitly specified  by  the
              <b>DEBUGFS_PAGER</b> environment variable, and if it is not set, by the <b>PAGER</b> environment variable.

              Note  that  since a pager is always used, the <b><a href="../man1/less.1.html">less</a></b>(1) pager is not particularly appropriate, since
              it clears the screen before displaying the output of the command and clears the output the  screen
              when  the pager is exited.  Many users prefer to use the <b><a href="../man1/less.1.html">less</a></b>(1) pager for most purposes, which is
              why the <b>DEBUGFS_PAGER</b> environment variable  is  available  to  override  the  more  general  <b>PAGER</b>
              environment variable.

</pre><h4><b>AUTHOR</b></h4><pre>
       <b>debugfs</b> was written by Theodore Ts'o &lt;<a href="mailto:tytso@mit.edu">tytso@mit.edu</a>&gt;.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man8/dumpe2fs.8.html">dumpe2fs</a></b>(8), <b><a href="../man8/tune2fs.8.html">tune2fs</a></b>(8), <b><a href="../man8/e2fsck.8.html">e2fsck</a></b>(8), <b><a href="../man8/mke2fs.8.html">mke2fs</a></b>(8), <b><a href="../man5/ext4.5.html">ext4</a></b>(5)

E2fsprogs version 1.47.2                          January 2025                                        <u><a href="../man8/DEBUGFS.8.html">DEBUGFS</a></u>(8)
</pre>
 </div>
</div></section>
</div>
</body>
</html>