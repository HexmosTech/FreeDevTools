<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DESCRIPTION</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/apt-transport-s3">apt-transport-s3_2.2.1-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
</pre><h4><b>DESCRIPTION</b></h4><pre>
       apt-transport-s3  -  it's  a  package which contains apt transport ('plugin') allowing apt to fetch files
       stored in private repositories held on AWS S3.

</pre><h4><b>Bucket</b> <b>name</b></h4><pre>
       According to the S3 bucket naming convention to make it working with this transport over TLS bucket  name
       can    NOT    contain    dots    in    it.    More    information    about    it    can   be   found   at
       https://docs.aws.amazon.com/AmazonS3/latest/dev/BucketRestrictions.html

</pre><h4><b>AWS</b> <b>Credentials</b></h4><pre>
       To access repositories held on S3 it is compulsory to have correct  permissions  into  the  bucket  where
       repository is located and those permissions have to be reflected in at least one of below two places.

       <b>IAM</b> <b>Roles</b> default place where S3 transport is looking for credentials allowing for fetching files from S3
       bucket

</pre><h4><b>Configuration</b></h4><pre>
       /etc/apt/s3auth.conf   or   IAM  role  (<a href="http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/iam-roles-for">http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/iam-roles-for</a>-
       amazon-ec2.html) can provide credentials required for using private apt repositories.

       NOTE: Region MUST match the region the buckets are stored in and if not defined it will try to  fetch  it
       from the metadata service.

       Setting Endpoint allows for using providers other than Amazon AWS.  If set, Endpoint disregards Region.

</pre><h4><b>Example</b> <b>of</b> <b>s3auth.conf</b> <b>file:</b></h4><pre>
              AccessKeyId     = myaccesskey
              SecretAccessKey = mysecretaccesskey
              Region          = 'us-east-1'
              Endpoint        = 'nyc3.digitaloceanspaces.com'
              PathStyle       = True

</pre><h4><b>Minimal</b> <b>IAM</b> <b>policy</b> <b>for</b> <b>accessing</b> <b>repository</b></h4><pre>
              {
                  "Version": "2012-10-17",
                  "Statement": [
                      {
                          "Sid": "VisualEditor0",
                          "Effect": "Allow",
                          "Action": [
                              "s3:GetObject",
                              "s3:ListBucket"
                          ],
                          "Resource": [
                              "arn:aws:s3:::[BUCKET_ID]/*",
                              "arn:aws:s3:::[BUCKET_ID]"
                          ]
                      }
                  ]
              }

</pre><h4><b>Usage</b></h4><pre>
       Install  the  .deb  package  from  the releases page.  The bucket repo should be specified using an s3://
       prefix, for example:

       deb s3://aptbucketname/repo/ trusty main contrib non-free

       if you need to use a proxy to connect to the internet you  can  specify  this  as  an  APT  configuration
       directive (for example in /etc/apt/apt.conf.d/90apt-transport-s3)

       Acquire::http::Proxy "<a href="http://myproxy">http://myproxy</a>:3128/";

       Bucket name hosting repo can not contain dots in itâ€™s name as this (according to AWS S3 naming convention
       (https://docs.aws.amazon.com/AmazonS3/latest/dev/BucketRestrictions.html))  will  invalidate virtual host
       style paths TLS certificates.

   <b>Testing</b>
       The module will run in interactive mode.  It accepts on stdin and outputs on  stdout.   The  messages  it
       accepts  on  stdin  are  in the following format and documented here (<a href="http://www.fifi.org/doc/libapt-pkg">http://www.fifi.org/doc/libapt-pkg</a>-
       doc/method.html/index.html#abstract).

              600 URI Acquire
              URI:s3://my-s3-repository/project-a/dists/trusty/main/binary-amd64/Packages
              Filename:Packages.downloaded
              Fail-Ignore:true
              Index-File:true

       This message will trigger an s3 get from the above bucket and key and save it to Filename.   It  needs  a
       blank line after the message to trigger the processing by the s3 method.

</pre><h4><b>Contribution</b></h4><pre>
       If  you want to contribute a patch via PR please create it against development branch.  Patches via email
       are welcome as well.

                                                 October 7, 2024                             <u><a href="../man8/APT-TRANSPORT-S3.8.html">APT-TRANSPORT-S3</a></u>(8)
</pre>
 </div>
</div></section>
</div>
</body>
</html>