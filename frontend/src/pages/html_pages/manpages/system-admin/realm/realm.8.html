<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>realm - Manage enrollment in realms</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/realmd">realmd_0.17.1-3build2_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       realm - Manage enrollment in realms

</pre><h4><b>SYNOPSIS</b></h4><pre>

       <b>realm</b> <b>discover</b> [realm-name]

       <b>realm</b> <b>join</b> [-U user] [realm-name]

       <b>realm</b> <b>leave</b> [-U user] [realm-name]

       <b>realm</b> <b>list</b>

       <b>realm</b> <b>permit</b> [-ax] [-R realm] {user@domain...}

       <b>realm</b> <b>deny</b> -a [-R realm]

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>realm</b> is a command line tool that can be used to manage enrollment in kerberos realms, like Active
       Directory domains or IPA domains.

       See the various sub commands below. The following global options can be used:

       <b>-i</b>, <b>--install=/path</b>
           Run in install mode. This makes realmd chroot into the directory specified by an absolute path and
           place files in appropriate locations for use during an installer. No packages will be installed or
           services will be started when running in this mode.

       <b>--unattended</b>
           Run in unattended mode without prompting for input.

       <b>-v</b>, <b>--verbose</b>
           Display verbose diagnostics while doing running commands.

</pre><h4><b>DISCOVER</b></h4><pre>
       Discover a realm and its capabilities.

           $ realm discover

           $ realm discover domain.example.com

       After discovering a realm, its name, type and capabilities are displayed.

       If no domain is specified, then the domain assigned through DHCP is used as a default.

       The following options can be used:

       <b>-a</b>, <b>--all</b>
           Show all discovered realms (in various configurations).

       <b>--client-software=xxx</b>
           Only discover realms for which we can use the given client software. Possible values include <u>sssd</u> or
           <u>winbind</u>.

       <b>-n</b>, <b>--name</b>
           Only show the names of the discovered realms.

       <b>--server-software=xxx</b>
           Only discover realms which run the given server software. Possible values include <u>active-directory</u> or
           <u>ipa</u>.

       <b>--membership-software=xxx</b>
           Only discover realms for which the given membership software can be used to subsequently perform
           enrollment. Possible values include <u>samba</u> or <u>adcli</u>.

       <b>--use-ldaps</b>
           See option description in the section called “JOIN”.

</pre><h4><b>JOIN</b></h4><pre>
       Configure the local machine for use with a realm.

           $ realm join domain.example.com

           $ realm join --user=admin --computer-ou=OU=Special domain.example.com

       The realm is first discovered, as we would with the <b>discover</b> command. If no domain is specified, then the
       domain assigned through DHCP is used as a default.

       After a successful join, the computer will be in a state where it is able to resolve remote user and
       group names from the realm. For kerberos realms, a computer account and host keytab is created.

       Joining arbitrary kerberos realms is not supported. The realm must have a supported mechanism for joining
       from a client machine, such as Active Directory or IPA.

       If the domain has been preconfigured, and unless --user is explicitly specified, an automatic join is
       attempted first.

       Note that the --user, --no-password, and --one-time-password options are mutually exclusive. At most one
       of them can be specified.

       It is generally possible to use kerberos credentials to perform a join operation. Use the <b>kinit</b> command
       to acquire credentials prior to starting the join. Do not specify the <b>--user</b> argument, the user will be
       selected automatically from the credential cache. The <b>realm</b> respects the KRB5_CCACHE environment
       variable, but uses the default kerberos credential cache if it's not present. Not all types of servers
       can be joined using kerberos credentials, some (like IPA) insist on prompting for a password.

       The following options can be used:

       <b>--automatic-id-mapping=no</b>
           Do not perform UID/GID mapping for users and groups, but expect these identifiers to be present in
           the domain already.

       <b>--client-software=xxx</b>
           Only join realms for which we can use the given client software. Possible values include <u>sssd</u> or
           <u>winbind</u>. Not all values are supported for all realms. By default the client software is automatically
           selected.

       <b>--computer-ou=OU=xxx</b>
           The distinguished name of an organizational unit to create the computer account. The exact format of
           the distinguished name depends on the client software and membership software. You can usually omit
           the root DSE portion of distinguished name. This is an Active Directory specific option.

       <b>--membership-software=xxx</b>
           The software to use when joining to the realm. Possible values include <u>samba</u> or <u>adcli</u>. Not all values
           are supported for all realms. By default the membership software is automatically selected.

       <b>--computer-name=xxx</b>
           This option only applies to Active Directory realms. Specify this option to override the default name
           used when creating the computer account. The system's FQDN will still be saved in the dNSHostName
           attribute.

           Specify the name as a string of 15 or fewer characters that is a valid NetBIOS computer name.

       <b>--no-password</b>
           Perform the join automatically without a password.

       <b>--one-time-password=xxxx</b>
           Perform the join using a one time password specified on the command line. This is not possible with
           all types of realms.

       <b>--os-name=xxx</b>
           The name of the operation system of the client. When joining an AD domain the value is store in the
           matching AD attribute.

       <b>--os-version=xxx</b>
           The version of the operation system of the client. When joining an AD domain the value is store in
           the matching AD attribute.

       <b>--server-software=xxx</b>
           Only join realms for run the given server software. Possible values include <u>active-directory</u> or <u>ipa</u>.

       <b>-U</b>, <b>--user=xxx</b>
           The user name to be used to authenticate with when joining the machine to the realm. You will be
           prompted for a password.

       <b>--user-principal=</b><u>host/name@REALM</u>
           Set the <b>userPrincipalName</b> field of the computer account to this kerberos principal. If you omit the
           value for this option, then a principal will be set based on the defaults of the membership software.

           AD makes a distinction between user and service principals. Only with user principals you can request
           a Kerberos Ticket-Granting-Ticket (TGT), i.e. only user principals can be used with the <b>kinit</b>
           command. By default the user principal and the canonical principal name of an AD computer account is
           shortname$@AD.DOMAIN, where shortname is the NetBIOS name which is limited to 15 characters.

           If there are applications which are not aware of the AD default and are using a hard-coded default
           principal the <b>--user-principal</b> can be used to make AD aware of this principal. Please note that
           <b>userPrincipalName</b> is a single value LDAP attribute, i.e. only one alternative user principal besides
           the AD default user principal can be set.

       <b>--use-ldaps</b>
           Use the ldaps port when connecting to AD where possible. In general this option is not needed because
           <b>realmd</b> itself only read public information from the Active Directory domain controller which is
           available anonymously. The supported membership software products will use encrypted connections
           protected with GSS-SPNEGO/GSSAPI which offers a comparable level of security than ldaps. This option
           is only needed if the standard LDAP port (389/tcp) is blocked by a firewall and only the LDAPS port
           (636/tcp) is available. Given that and to lower the initial effort to discover a remote domain <b>realmd</b>
           does not require a strict certificate check. If the validation of the LDAP server certificate fails
           <b>realmd</b> will continue to setup the encrypted connection to the LDAP server.

           If this option is set to <u>yes</u> <b>realmd</b> will use the ldaps port when reading the rootDSE and call the
           <b>adcli</b> membership software with the option <b>--use-ldaps</b>. The Samba base membership currently offers
           only deprecated ways to enable ldaps. Support will be added in <b>realmd</b> when a new way is available.

       <b>--do-not-touch-config</b>
           Run the join operation but do not touch the local configuration of the client except adding new
           Kerberos keys to the keytab. The purpose of this option is to synchronize the keytab entries with the
           ones stored in AD or recreate the computer object in AD without changing the local configuration
           which might contain changes which would get overwritten by a fully leave/join cycle.

           If running <b>realm</b> <b>join</b> with this options does not help to fix issues it is recommended to call <b>realm</b>
           <b>leave</b> followed by <b>realm</b> <b>join</b> to enforce a fresh configuration with default settings. Since this might
           overwrite manual changes to the related configuration files it is recommend to save those change
           before running the commands.

           This options is only available when joining AD domains.

</pre><h4><b>LEAVE</b></h4><pre>
       Deconfigure the local machine for use with a realm.

           $ realm leave

           $ realm leave domain.example.com

       If no realm name is specified, then the first configured realm will be used.

       The following options can be used:

       <b>--client-software=xxx</b>
           Only leave the realm which is using the given client software. Possible values include <u>sssd</u> or
           <u>winbind</u>.

       <b>--server-software=xxx</b>
           Only leave the realm which is using the given server software. Possible values include
           <u>active-directory</u> or <u>ipa</u>.

       <b>--remove</b>
           Remove or disable computer account from the directory while leaving the realm. This will usually
           prompt for a pasword.

       <b>-U</b>, <b>--user</b>
           The user name to be used to authenticate with when leaving the realm. You will be prompted for a
           password. Implies <b>--remove</b>.

       <b>--use-ldaps</b>
           See option description in the section called “JOIN”.

</pre><h4><b>LIST</b></h4><pre>
       List all the discovered and configured realms.

           $ realm list

       By default, realms that have been discovered, but not configured (using the <b>join</b> command), are not
       displayed. Also, by default, the list of realm details displayed is verbose. The options below can be
       used to change this default behavior

       The following options can be used:

       <b>--all</b>
           Show all discovered realms (whether or not they have been configured).

       <b>--name-only</b>
           Display only realm names (as opposed to verbose output).

</pre><h4><b>PERMIT</b></h4><pre>
       Permit local login by users of the realm.

           $ realm permit --all
           $ realm permit <a href="mailto:user@example.com">user@example.com</a>
           $ realm permit DOMAIN\\User2
           $ realm permit --withdraw <a href="mailto:user@example.com">user@example.com</a>

       The current login policy and format of the user names can be seen by using the <b>realm</b> <b>list</b> command.

       The following options can be used:

       <b>--all,</b> <b>-a</b>
           Permit logins using realm accounts on the local machine according to the realm policy.This usually
           defaults to allowing any realm user to log in.

       <b>--groups,</b> <b>-g</b>
           Treat the specified names as groups rather than user login names. Permit login by users in the
           specified groups.

       <b>--realm,</b> <b>-R</b>
           Specify the of the realm to change login policy for.

       <b>--withdraw,</b> <b>-x</b>
           Remove a login from the list of realm accounts permitted to log into the machine.

</pre><h4><b>DENY</b></h4><pre>
       Deny local login by realm accounts.

           $ realm deny --all

       This command prevents realm accounts from logging into the local machine. Use <b>realm</b> <b>permit</b> to restrict
       logins to specific accounts.

       The following options can be used:

       <b>--all,</b> <b>-a</b>
           This option should be specified

       <b>--realm,</b> <b>-R</b>
           Specify the name of the realm to deny users login to.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man5/realmd.conf.5.html">realmd.conf</a></b>(5)

</pre><h4><b>AUTHOR</b></h4><pre>
       <b>Stef</b> <b>Walter</b> &lt;<a href="mailto:stef@thewalter.net">stef@thewalter.net</a>&gt;
           Maintainer

realmd                                             03/31/2024                                           <u><a href="../man8/REALM.8.html">REALM</a></u>(8)
</pre>
 </div>
</div></section>
</div>
</body>
</html>