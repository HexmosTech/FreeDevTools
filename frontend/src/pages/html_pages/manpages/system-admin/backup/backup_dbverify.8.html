<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>backup_dbverify - Checks the integrity of the Backup Database</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/openafs-client">openafs-client_1.8.13.2-1ubuntu1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       backup_dbverify - Checks the integrity of the Backup Database

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>backup</b> <b>dbverify</b> [<b>-detail</b>] [<b>-localauth</b>]
           [<b>-cell</b> &lt;<u>cell</u> <u>name</u>&gt;]
           [<b>-help</b>]

       <b>backup</b> <b>db</b> [<b>-d</b>] [<b>-l</b>] [<b>-c</b> &lt;<u>cell</u> <u>name</u>&gt;] [<b>-h</b>]

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The <b>backup</b> <b>dbverify</b> command checks the integrity of the Backup Database. The command's output indicates
       whether the Backup Database is damaged (data is corrupted) or not. If the Backup Database is undamaged,
       it is safe to continue using it. If it is corrupted, discontinue any backup operations until it is
       repaired.

</pre><h4><b>CAUTIONS</b></h4><pre>
       While this command runs, no other backup operation can access the Backup Database; the other commands do
       not run until this command completes. Avoid issuing this command when other backup operations are likely
       to run. The <b>backup</b> <b>savedb</b> command repairs some types of corruption.

</pre><h4><b>OPTIONS</b></h4><pre>
       <b>-detail</b>
           Reports  the number of orphaned blocks found, any inconsistencies, and the name of the server machine
           running the Backup Server that is checking its copy of the database.

       <b>-localauth</b>
           Constructs a server ticket using a key from the local <u>/etc/openafs/server/KeyFile</u>  file.  The  <b>backup</b>
           command  interpreter  presents  it  to  the  Backup Server, Volume Server and VL Server during mutual
           authentication. Do not combine this flag with the <b>-cell</b> argument. For more details, see <b><a href="../man8/backup.8.html">backup</a></b>(8).

       <b>-cell</b> &lt;<u>cell</u> <u>name</u>&gt;
           Names the cell in which to run the command. Do not combine this argument with  the  <b>-localauth</b>  flag.
           For more details, see <b><a href="../man8/backup.8.html">backup</a></b>(8).

       <b>-help</b>
           Prints the online help for this command. All other valid options are ignored.

</pre><h4><b>OUTPUT</b></h4><pre>
       The command displays one of the following two messages:

       Database OK
           The database is undamaged and can be used.

       Database not OK
           The  database is damaged. You can use the backup savedb command to repair many kinds of corruption as
           it creates a backup copy.  For more detailed  instructions,  see  the  <u>OpenAFS</u>  <u>Administration</u>  <u>Guide</u>
           chapter about performing backup operations.

       The <b>-detail</b> flag provides additional information:

       •   The  number of <u>orphan</u> <u>blocks</u> found. These are ranges of memory that the Backup Server preallocated in
           the database but cannot use. Orphan blocks do not interfere with database access, but do  waste  disk
           space.  To free the unusable space, dump the database to tape by using the <b>backup</b> <b>savedb</b> command, and
           then restore it by using the <b>backup</b> <b>restoredb</b> command.

       •   Any inconsistencies in the database, such as invalid hostnames for Tape Coordinator machines.

       •   The name of the database server machine on which the Backup Database was checked, designated  as  the
           "Database   checker".   For   a   detailed   trace   of   the   verification   operation,   see   the
           <u>/var/log/openafs/BackupLog</u> file on the indicated machine. You can  use  the  <b>bos</b>  <b>getlog</b>  command  to
           display it.

</pre><h4><b>EXAMPLES</b></h4><pre>
       The following command confirms that the Backup Database is undamaged:

          % backup dbverify
          Database OK

       The  following command confirms that the Backup Database is undamaged and that it has no orphan blocks or
       invalid Tape Coordinator entries. The Backup Server running on the machine "db1.example.com" checked  its
       copy of the Database.

          % backup dbverify -detail
          Database OK
          Orphan blocks 0
          Database checker was db1.example.com

</pre><h4><b>PRIVILEGE</b> <b>REQUIRED</b></h4><pre>
       The  issuer  must  be  listed  in the <u>/etc/openafs/server/UserList</u> file on every machine where the Backup
       Server is running, or must be logged onto  a  server  machine  as  the  local  superuser  "root"  if  the
       <b>-localauth</b> flag is included.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man5/BackupLog.5.html">BackupLog</a></b>(5), <b><a href="../man8/backup.8.html">backup</a></b>(8), <b><a href="../man8/backup_restoredb.8.html">backup_restoredb</a></b>(8), <b><a href="../man8/backup_savedb.8.html">backup_savedb</a></b>(8), <b><a href="../man8/bos_getlog.8.html">bos_getlog</a></b>(8)

</pre><h4><b>COPYRIGHT</b></h4><pre>
       IBM Corporation 2000. &lt;<a href="http://www.ibm.com/">http://www.ibm.com/</a>&gt; All Rights Reserved.

       This  documentation  is covered by the IBM Public License Version 1.0.  It was converted from HTML to POD
       by software written by Chas Williams and Russ Allbery, based on  work  by  Alf  Wachsmann  and  Elizabeth
       Cassell.

OpenAFS                                            2025-03-21                                 <u><a href="../man8/BACKUP_DBVERIFY.8.html">BACKUP_DBVERIFY</a></u>(8)
</pre>
 </div>
</div></section>
</div>
</body>
</html>