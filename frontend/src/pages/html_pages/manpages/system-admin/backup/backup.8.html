<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>backup - Introduction to the backup command suite</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/openafs-client">openafs-client_1.8.13.2-1ubuntu1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       backup - Introduction to the backup command suite

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The commands in the <b>backup</b> command suite are the administrative interface to the AFS Backup System. There
       are several categories of commands in the suite:

       •   Commands  to  copy data from AFS volumes to tape or a backup data file, and to restore it to the file
           system: <b>backup</b> <b>diskrestore</b>, <b>backup</b> <b>dump</b>, <b>backup</b> <b>volrestore</b>, and <b>backup</b> <b>volsetrestore</b>.

       •   Commands to administer the records in the Backup Database: <b>backup</b>  <b>adddump</b>,  <b>backup</b>  <b>addhost</b>,  <b>backup</b>
           <b>addvolentry</b>, <b>backup</b> <b>addvolset</b>, <b>backup</b> <b>deldump</b>, <b>backup</b> <b>deletedump</b>, <b>backup</b> <b>delhost</b>, <b>backup</b> <b>delvolentry</b>,
           <b>backup</b>  <b>delvolset</b>,  <b>backup</b>  <b>dumpinfo</b>,  <b>backup</b> <b>listdumps</b>, <b>backup</b> <b>listhosts</b>, <b>backup</b> <b>listvolsets</b>, <b>backup</b>
           <b>scantape</b>, <b>backup</b> <b>setexp</b>, and <b>backup</b> <b>volinfo</b>.

       •   Commands to write and read tape labels: <b>backup</b> <b>labeltape</b> and <b>backup</b> <b>readlabel</b>.

       •   Commands to list and change the status of backup operations and the machines performing them:  <b>backup</b>
           <b>jobs</b>, <b>backup</b> <b>kill</b>, and <b>backup</b> <b>status</b>.

       •   Commands to enter and leave interactive mode: <b>backup</b> <b>interactive</b> and <b>backup</b> <b>quit</b>.

       •   Commands  to  check  for  and  repair  corruption  in  the  Backup  Database: <b>backup</b> <b>dbverify</b>, <b>backup</b>
           <b>restoredb</b>, and <b>backup</b> <b>savedb</b>.

       •   Commands to obtain help: <b>backup</b> <b>apropos</b> and <b>backup</b> <b>help</b>.

       •   A command to display the OpenAFS command suite version: <b>backup</b> <b>version</b>.

       The backup command interpreter interacts with two other processes:

       •   The Backup Server (<b>buserver</b>) process. It maintains the Backup Database,  which  stores  most  of  the
           administrative  information  used  by  the  Backup  System. In the standard configuration, the Backup
           Server runs on each database server  machine  in  the  cell,  and  uses  AFS's  distributed  database
           technology,  Ubik,  to  synchronize  its  copy  of the database with the copies on the other database
           server machines.

       •   The Backup Tape Coordinator (<b>butc</b>) process. A separate instance of the  process  controls  each  tape
           device  or  backup  data  file  used  to  dump  or  restore data. The Tape Coordinator runs on a Tape
           Coordinator machine, which is an AFS server or client machine that  has  one  or  more  tape  devices
           attached,  or  has  sufficient  disk  space to accommodate one or more backup data files on its local
           disk.

           Each   Tape   Coordinator   must   be   registered   in   the   Backup   Database    and    in    the
           <u>/var/lib/openafs/backup/tapeconfig</u>  configuration  file on the Tape Coordinator machine's local disk,
           and information in the two places must be  consistent  for  proper  Backup  System  performance.  The
           optional  <u>/var/lib/openafs/backup/CFG_device_name</u>  for each Tape Coordinator records information used
           to automate its operation.

       In addition to the standard command line interface, the <b>backup</b>  command  suite  provides  an  <u>interactive</u>
       interface,  which  has several useful features described in <b><a href="../man8/backup_interactive.8.html">backup_interactive</a></b>(8).  Three of the commands
       in the suite are available only in interactive mode: <b>backup</b> <b>jobs</b>, <b>backup</b> <b>kill</b>, and <b>backup</b> <b>quit</b>

</pre><h4><b>OPTIONS</b></h4><pre>
       The following options are available on many commands in the <b>backup</b> suite. The  reference  page  for  each
       command also lists them, but they are described here in greater detail.

       <b>-cell</b> &lt;<u>cell</u> <u>name</u>&gt;
           Names  the  cell  in  which  to  run the command. It is acceptable to abbreviate the cell name to the
           shortest form that distinguishes it from the other entries in the <u>/etc/openafs/CellServDB</u> file on the
           local machine. If the <b>-cell</b> argument is omitted, the command interpreter determines the name  of  the
           local cell by reading the following in order:

           •   The value of the AFSCELL environment variable.

           •   The local <u>/etc/openafs/ThisCell</u> file.

           Do  not  combine the <b>-cell</b> and <b>-localauth</b> options. A command on which the <b>-localauth</b> flag is included
           always runs in the local cell (as defined in the server machine's local  <u>/etc/openafs/server/ThisCell</u>
           file), whereas a command on which the <b>-cell</b> argument is included runs in the specified foreign cell.

           The <b>-cell</b> argument is not available on commands issued in interactive mode. The cell defined when the
           <b>backup</b>  command  interpreter  enters  interactive  mode  applies  to  all  commands issued during the
           interactive session.

       <b>-help</b>
           Prints a command's online help message on the standard output stream. Do not combine this  flag  with
           any  of  the  command's other options; when it is provided, the command interpreter ignores all other
           options, and only prints the help message.

       <b>-localauth</b>
           Constructs a server ticket using the server encryption key with the highest key version number in the
           local  <u>/etc/openafs/server/KeyFile</u>  or  <u>/etc/openafs/server/KeyFileExt</u>  file.  The   <b>backup</b>   command
           interpreter  presents the ticket, which never expires, to the Backup Server, Volume Server and Volume
           Location (VL) Server during mutual authentication.

           Use this flag only when issuing a command on a server machine; client machines do not usually have  a
           <u>/etc/openafs/server/KeyFile</u>  or  <u>/etc/openafs/server/KeyFileExt</u>  file.   The issuer of a command that
           includes this flag must be logged on to the server machine as the local superuser "root". The flag is
           useful for commands invoked by an unattended application program, such as a process controlled by the
           UNIX <b>cron</b> utility or by a cron entry in the machine's <u>/etc/openafs/BosConfig</u> file. It is also  useful
           if an administrator is unable to authenticate to AFS but is logged in as the local superuser "root".

           Do  not  combine the <b>-cell</b> and <b>-localauth</b> options. A command on which the <b>-localauth</b> flag is included
           always runs in the local cell (as defined in the server machine's local  <u>/etc/openafs/server/ThisCell</u>
           file), whereas a command on which the <b>-cell</b> argument is included runs in the specified foreign cell.

           The  <b>-localauth</b>  argument is not available on commands issued in interactive mode. The local identity
           and AFS tokens with which the <b>backup</b>  command  interpreter  enters  interactive  mode  apply  to  all
           commands issued during the interactive session.

       <b>-nobutcauth</b>
           Prior   to  the  fix  for  OPENAFS-SA-2018-001,  <b>butc</b>  did  not  allow  incoming  connections  to  be
           authenticated.  As part of that fix, <b>backup</b> was modified to authenticate to the  <b>butc</b>  services  when
           possible, but a <b>backup</b> utility with the security fix will not interoperate with a <b>butc</b> that lacks the
           fix  unless  this  option is passed, which forces the use of unauthenticated connections to the <b>butc</b>.
           Use of this option is strongly disrecommended, and it is provided only for backwards compatibility in
           environments where <b>backup</b> and <b>butc</b> communicate over a secure network environment that  denies  access
           to untrusted parties.

       <b>-portoffset</b> &lt;<u>TC</u> <u>port</u> <u>offset</u>&gt;
           Specifies  the  port offset number of the Tape Coordinator that is to execute the <b>backup</b> command. The
           port offset number uniquely identifies a pairing of a Tape Coordinator (<b>butc</b>) process and tape device
           or backup data file.

           The backup command interpreter and Tape Coordinator process communicate via a UDP  socket,  or  port.
           Before  issuing  a  <b>backup</b>  command that involves reading or writing a tape, the backup operator must
           start a <b>butc</b> process that controls the appropriate tape device and listens for requests sent  to  its
           port  number.  If a Backup System machine has multiple tape devices attached, they can perform backup
           operations simultaneously because each device has its own associated <b>butc</b>  process  and  port  offset
           number.

           The  Backup System associates a tape capacity and file mark size with each port offset (as defined in
           the <u>tapeconfig</u> file). For a compressing tape device, the capacity and file  mark  values  differ  for
           compression and non-compression modes, so the two modes have distinct port offset numbers.

           The  Backup  Database  can store up to 58,511 port offsets, so the legal values for this argument are
           the integers 0 through 58510. If the issuer omits the argument, it  defaults  to  0.  (The  limit  of
           58,511 port offsets results from the fact that UDP socket numbers are identified by a 16-bit integer,
           and  the  lowest  socket  number  used by the Backup System is 7025. The largest number that a 16-bit
           integer can represent is 65,535. Subtracting 7,025 yields 58,510.  The  addition  of  port  offset  0
           (zero) increases the maximum to 58,511.)

           Although  it is possible to define up to 58,511 port offset numbers for a cell, it is not possible to
           run 58,511 tape devices simultaneously, due to the following limits:

           •   The maximum number of dump or restore operations that can run simultaneously is 64.

           •   The maximum number of tape devices that can work together on a restore operation is 128 (that  is
               the  maximum  number  of  values  that can be provided for the <b>-portoffset</b> argument to the <b>backup</b>
               <b>diskrestore</b>, <b>backup</b> <b>volrestore</b>, or <b>backup</b> <b>volsetrestore</b> command).

           The Backup System does not reserve UDP sockets. If another application  is  already  using  the  Tape
           Coordinator's  socket  when it tries to start, the <b>butc</b> process fails and the following error message
           appears at the shell prompt:

              bind: Address already in use
              rxi_GetUDPSocket: bind failed

</pre><h4><b>PRIVILEGE</b> <b>REQUIRED</b></h4><pre>
       To issue any backup command that accesses the Backup Database only, the issuer  must  be  listed  in  the
       <u>/etc/openafs/server/UserList</u>  file  on  every  machine  where  the Backup Server is running. To issue any
       <b>backup</b> command that accesses volume data, the issuer must appear in the <u>UserList</u>  file  on  every  Backup
       Server  machine,  every  Volume  Location  (VL) Server machine, and every file server machine that houses
       affected volumes. By convention, a common <u>UserList</u> file is distributed to all database  server  and  file
       server  machines in the cell. See the chapter on privileged users in the <u>OpenAFS</u> <u>Administration</u> <u>Guide</u> for
       more information on this type of privilege.

       If the <b>-localauth</b> flag is included, the user must instead be logged on as the local superuser  "root"  on
       the server machine where the <b>backup</b> command is issued.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man5/BosConfig.5.html">BosConfig</a></b>(5), <b><a href="../man5/CellServDB.5.html">CellServDB</a></b>(5), <b><a href="../man5/KeyFile.5.html">KeyFile</a></b>(5), <b><a href="../man5/KeyFileExt.5.html">KeyFileExt</a></b>(5), <b><a href="../man5/ThisCell.5.html">ThisCell</a></b>(5), <b><a href="../man5/UserList.5.html">UserList</a></b>(5), <b><a href="../man5/butc.5.html">butc</a></b>(5), <b><a href="../man5/tapeconfig.5.html">tapeconfig</a></b>(5),
       <b><a href="../man8/backup_adddump.8.html">backup_adddump</a></b>(8),   <b><a href="../man8/backup_addhost.8.html">backup_addhost</a></b>(8),  <b><a href="../man8/backup_addvolentry.8.html">backup_addvolentry</a></b>(8),  <b><a href="../man8/backup_addvolset.8.html">backup_addvolset</a></b>(8),  <b><a href="../man8/backup_apropos.8.html">backup_apropos</a></b>(8),
       <b><a href="../man8/backup_dbverify.8.html">backup_dbverify</a></b>(8), <b><a href="../man8/backup_deldump.8.html">backup_deldump</a></b>(8),  <b><a href="../man8/backup_deletedump.8.html">backup_deletedump</a></b>(8),  <b><a href="../man8/backup_delhost.8.html">backup_delhost</a></b>(8),  <b><a href="../man8/backup_delvolentry.8.html">backup_delvolentry</a></b>(8),
       <b><a href="../man8/backup_delvolset.8.html">backup_delvolset</a></b>(8),    <b><a href="../man8/backup_diskrestore.8.html">backup_diskrestore</a></b>(8),    <b><a href="../man8/backup_dump.8.html">backup_dump</a></b>(8),   <b><a href="../man8/backup_dumpinfo.8.html">backup_dumpinfo</a></b>(8),   <b><a href="../man8/backup_help.8.html">backup_help</a></b>(8),
       <b><a href="../man8/backup_interactive.8.html">backup_interactive</a></b>(8),   <b><a href="../man8/backup_jobs.8.html">backup_jobs</a></b>(8),   <b><a href="../man8/backup_kill.8.html">backup_kill</a></b>(8),   <b><a href="../man8/backup_labeltape.8.html">backup_labeltape</a></b>(8),    <b><a href="../man8/backup_listdumps.8.html">backup_listdumps</a></b>(8),
       <b><a href="../man8/backup_listhosts.8.html">backup_listhosts</a></b>(8),  <b><a href="../man8/backup_listvolsets.8.html">backup_listvolsets</a></b>(8),  <b><a href="../man8/backup_quit.8.html">backup_quit</a></b>(8),  <b><a href="../man8/backup_readlabel.8.html">backup_readlabel</a></b>(8),  <b><a href="../man8/backup_restoredb.8.html">backup_restoredb</a></b>(8),
       <b><a href="../man8/backup_savedb.8.html">backup_savedb</a></b>(8),    <b><a href="../man8/backup_scantape.8.html">backup_scantape</a></b>(8),    <b><a href="../man8/backup_setexp.8.html">backup_setexp</a></b>(8),    <b><a href="../man8/backup_status.8.html">backup_status</a></b>(8),     <b><a href="../man8/backup_volinfo.8.html">backup_volinfo</a></b>(8),
       <b><a href="../man8/backup_volrestore.8.html">backup_volrestore</a></b>(8), <b><a href="../man8/backup_volsetrestore.8.html">backup_volsetrestore</a></b>(8), <b><a href="../man8/buserver.8.html">buserver</a></b>(8), <b><a href="../man8/butc.8.html">butc</a></b>(8)

</pre><h4><b>COPYRIGHT</b></h4><pre>
       IBM Corporation 2000. &lt;<a href="http://www.ibm.com/">http://www.ibm.com/</a>&gt; All Rights Reserved.

       This  documentation  is covered by the IBM Public License Version 1.0.  It was converted from HTML to POD
       by software written by Chas Williams and Russ Allbery, based on  work  by  Alf  Wachsmann  and  Elizabeth
       Cassell.

OpenAFS                                            2025-03-21                                          <u><a href="../man8/BACKUP.8.html">BACKUP</a></u>(8)
</pre>
 </div>
</div></section>
</div>
</body>
</html>