<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>scsi-config - query information from a scsi device with a nice user interface</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/scsitools">scsitools_0.12-6_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       scsi-config - query information from a scsi device with a nice user interface

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>scsi-config</b> <b>[</b><u>device</u><b>]</b>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>scsi-config</b>  queries  information  from  an  scsi target with a nice Tcl/Tk user interface. If you do not
       specify a device to query, <b>scsi-config</b> calculates a list of available devices and prompts it to you.

       By the nature of a graphical user interface, most things will explain them self.  Basically,  <b>scsi-config</b>
       shows a list of buttons for certain mode pages which you may press. Those buttons which you can press and
       the  text  windows  with  white backgrounds can be modified by you and the modifications send back to the
       device.

       In the main window there is a button to instruct the device to save the data in some non volatile  memory
       (if it supports it). Note that this will instruct the device to save the <b>Read-Write</b> <b>Error</b> <b>Recovery</b> <b>Page</b> <b>,</b>
       <b>Disconnect-Reconnect</b>  <b>Page</b>  <b>,</b>  <b>Format</b>  <b>Device</b>  <b>Page</b>  <b>,</b> <b>Caching</b> <b>Page</b> <b>,</b> <b>and</b> <b>Control</b> <b>Mode</b> <b>Page</b> <b>in</b> <b>its</b> <b>NVRAM.</b>
       <b>Usually</b> <b>saving</b> <b>even</b> <b>a</b> <b>single</b> <b>of</b> <b>those</b> <b>should</b> <b>write</b> them all to the NVRAM, but you never know.

       You can query the current, the factory default and the values in the NVRAM (which may not be the  current
       parameters) from the device.

       Not all combinations of button toggles or all values are valid. In general, try to set them and see which
       values  the  drive accepts.  <b>scsi-config</b> rereads the device configuration immediately, s.t. you see which
       values where accepted.

       Also note that some disk drives are notched, and that those have an  active  notch  (shown  in  the  main
       window) to which all your settings apply (at least those of notched pages, which are also marked in slate
       gray).  You  can  select the active notch to which your settings apply (and to which the values refer) in
       the <b>Notch</b> <b>Page</b>.

       For those devices which do not feature an NVRAM (generally removable media devices)  and  as  a  kind  of
       backup,  you  can  save the current settings to a file. Actually the file will be a <u><a href="file:/bin/sh">/bin/sh</a></u> script making
       the necessary <b><a href="../man8/scsiinfo.8.html">scsiinfo</a></b>(8) calls to set the saved parameters when executed.

       There is also a nice Overview button which will query many details about the disk geometry and draw  them
       in  a  nice  picture. This looks esp. nice for drives with many notches, that is different regions on the
       disk with different tracks per sector settings. It is also very useful for  notched  drives  as  you  can
       immediately select the mode pages for each notch.

</pre><h4><b>SOME</b> <b>USAGE</b> <b>GUIDELINES</b></h4><pre>
       <b>1.</b> <b>General</b> <b>Warning</b>
              Generally,  do  not  modify  settings you don't understand. It is useful to know the SCSI-II specs
              mentioned below. Some setting may render the device unusable or even damage it.  Usually  a  power
              cycle  resets  the  state  (if  you  do  not  save the weird settings in the NVRAM). Some settings
              affecting the assignment of logical sectors will render the disk unusable until the next low level
              format.

       <b>2.</b> <b>On</b> <b>Write</b> <b>Caching</b>
              As an old warning, this does also mean you should not generally switch the  write  cache  on.   At
              least on those drives where you have a choice at all. Reasons are twofold:

              <b>a)</b>     It is a priori unclear when the drive will actually perform the writes. This is a bad thing
                     when  considering  shutdown of your machine. On the other hand, it seems sensible to assume
                     that the drive will immediately write it's cache to disk when it is idle  (after  all  file
                     systems are unmounted) and due to the size of the on disk cache this will usually only need
                     a few seconds after the shutdown (but the drive lamp will usually not glow, as it is mostly
                     connected to the host adapter (if you have a lamp at all) and it is not participating).

                     There  is  a  SCSI command to flush the caches. Linux could call it prior to shutting down,
                     spinning a disk down. Due to my knowledge this is not yet done though.

              <b>b)</b>     As the writes are performed asynchronously, errors are reported  asynchronously.  The  disk
                     might  return  an  error  at  some  simple  read  instruction  related to a write which was
                     acknowledged OK  several  transactions  ago.  This  generally  confuses  things  and  makes
                     interpreting  errors very difficult. Some devices are known/said to not report write errors
                     in this mode of operation at all.

                     Just imagine that at the point where a file system is unmounted, or a new  removable  media
                     is detected it could tell: Oops, BTW, there was some write error ago although I told you it
                     was OK already.

              Thus, when you run a disk in write cache mode, keep it in mind when weird error messages occur and
              give  the disk time to flush it's buffers at shutdown. Generally it would be good if you knew more
              vendor specific details on how the disk operates in the write cache mode.

       <b>3.</b> <b>Reassigning</b> <b>Bad</b> <b>Blocks</b> <b>Automatically</b>
              One of the nice features of SCSI disk is that they allow to remap bad blocks automatically as they
              are detected without any user intervention. However, you actually have to enable this feature!  It
              turned out that you can not generally assume a disk in this mode. To enable this mode or check the
              settings, proceed as follows:

              <b>a)</b>     Go to the <b>Read-Write</b> <b>Error</b> <b>Recovery</b> <b>Page</b>.  <b>AWRE</b> (Automatic Write Reallocation  Enable)  and
                     <b>ARRE</b> (Automatic Read Reallocation Enable) buttons enable the automatic reallocation.

                     In the same window, you can select the maximal retries performed. EER allows the disk to do
                     some  Early  Error  Recovery  which  is  fast  (but might misdetect or miscorrect data).  A
                     selected DCR button (Disable  CoRrection  Codes)  disallows  the  disk  to  use  any  error
                     correction  codes at all (thus the drive will have to retry until it performs an error free
                     read).

                     Usually a sector will be reallocated after even a single read retry or the given number  of
                     failed  write  retries. When the sector cannot be recovered, it is reallocated but the data
                     is lost and an error is signalled.

                     The other buttons there apply to error reporting  as  well.  TB  Transmits  the  bad  Block
                     together  with  the  error,  RC  Reads Continuous, that is, does not pause a read operation
                     while retrying or using error code calculations to recover a bad block (thus may return bad
                     data). PER lets the disk report even recovered errors (Post ERror), DTE  (Disable  Transfer
                     on Error) even breaks a running data transmission when an error is detected.

              <b>b)</b>     Even  when  the  reallocation  is  enabled, the disk must actually have some reserved areas
                     where to remap the bad blocks. The <b>Format</b> <b>Page</b> controls this.  Either  a  given  number  of
                     Alternate  Sectors  Per  LUN is set aside for the whole disk or a given number of tracks is
                     defined to be a <u>zone</u> and for each zone a number of sectors or tracks is put  aside.   These
                     alternate data areas are where bad sectors are remapped.

                     Note  that  this  page  is very likely to apply only to the current notch on a notched disk
                     device.

                     If there are no, or not many alternate sectors reserved on your disk, you must change these
                     settings.

                     I found that those disks which allow to modify these settings are  very  often  set  to  no
                     reserved  sectors at all by the vendors, as this increases the disks capacity. For the sake
                     of stability, you should really modify these settings.

                     If you decide to modify the number of alternate sectors, you must

                     <b>i)</b>     Save the parameters to the NVRAM of the disk.

                     <b>ii)</b>    Low-level format the disk drive (and not erase the NVRAM during this operation).

                     to make the changes be effective.

              <b>c)</b>     Esp. when you set the disk to not report recovered errors (or when it is in a  write  cache
                     mode  or something), and just as a general guideline, keep an eye on the grown defects list
                     where the disk will report all the remappings which took place as your disk ages.

                     The old adventurers guide line applies: Save (Backup) Early, Save (Backup) Often. Find  the
                     right time to replace your disk avoiding too much work recovering your data.

</pre><h4><b>BUGS</b></h4><pre>
       <b>scsi-config</b>  could  be enhanced by making better use of Tcl/Tk. I learned much about it during my work on
       <b><a href="../man8/tk_scsiformat.8.html">tk_scsiformat</a></b>(8) and their would be much room for fixes and enhances. On  other  hand,  it  fulfils  it's
       purpose as it is quite nicely already.

       As <b>scsi-config</b> makes heavy use of <b><a href="../man8/scsiinfo.8.html">scsiinfo</a></b>(8) all it's bugs (esp. on defect reading) apply.

</pre><h4><b>FILES</b></h4><pre>
       <u>/usr/lib/scsi/cache</u>,      <u>/usr/lib/scsi/control</u>,      <u>/usr/lib/scsi/disconnect</u>,      <u>/usr/lib/scsi/error</u>,
       <u>/usr/lib/scsi/format</u>,      <u>/usr/lib/scsi/generic</u>,       <u>/usr/lib/scsi/inquiry</u>,       <u>/usr/lib/scsi/notch</u>,
       <u>/usr/lib/scsi/overview</u>,    <u>/usr/lib/scsi/peripheral</u>,   <u>/usr/lib/scsi/rigid</u>,   <u>/usr/lib/scsi/save-changes</u>,
       <u>/usr/lib/scsi/save-file</u>, <u>/usr/lib/scsi/tworands</u>, <u>/usr/lib/scsi/verify</u> (Tcl/Tk subroutines used  by  scsi-
       config).
       <u>/dev/sd*</u>
       <u>/dev/sg*</u>
       <u>/dev/scd*</u>
       <u>/dev/st*</u>
       <u>/dev/nst*</u>
       <u>/dev/rmt*</u>
       <u>/dev/nrmt*</u>

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man8/scsiinfo.8.html">scsiinfo</a></b>(8), <b><a href="../man8/scsiformat.8.html">scsiformat</a></b>(8), <b><a href="../man8/tk_scsiformat.8.html">tk_scsiformat</a></b>(8), <b><a href="../man8/fdisk.8.html">fdisk</a></b>(8), <b><a href="../man4/sd.4.html">sd</a></b>(4),

       <b>Draft</b> <b>proposed</b>
       <b>American</b> <b>National</b> <b>Standard</b>
       <b>for</b> <b>information</b> <b>systems</b>

       <b>SMALL</b> <b>COMPUTER</b> <b>SYSTEM</b> <b>INTERFACE</b> <b>-</b> <b>2</b>
       <b>(SCSI-2)</b>

       <b>MARCH</b> <b>9,</b> <b>1990</b>

</pre><h4><b>AUTHORS</b></h4><pre>
       Eric Youngdale.
       Michael Weller &lt;<a href="mailto:eowmob@exp-math.uni-essen.de">eowmob@exp-math.uni-essen.de</a>&gt;, Versions 1.5 &amp; 1.7

scsiinfo 1.7                                     24 August 1997                                   <u><a href="../man8/scsi-config.8.html">scsi-config</a></u>(8)
</pre>
 </div>
</div></section>
</div>
</body>
</html>