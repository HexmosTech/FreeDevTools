<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>tinyleaf - Very simple IHAVE-only NNTP server</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/inn2">inn2_2.7.3-1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       tinyleaf - Very simple IHAVE-only NNTP server

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>tinyleaf</b> <u>spool</u> [<u>processor</u>]

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>tinyleaf</b> is intended to be the simplest possible transit news server that still does something useful.
       It must be run under <a href="../man8/inetd.8.html">inetd</a>(8) or some equivalent, and only implements three commands (HELP, IHAVE, and
       QUIT).  When it receives an article, it saves it into the directory <u>spool</u> and, if <u>processor</u> is given,
       passes information about the article to <u>processor</u> via a pipe.  The file name of the article will be the
       MD5 hash of its message-ID, and if a file by that name already exists, <b>tinyleaf</b> will refuse the article,
       reporting it as a duplicate.

       If <u>processor</u> is given, it should specify the path to a program.  That program is started when <b>tinyleaf</b>
       starts, and its current working directory will be <u>spool</u>.  For each article received by <b>tinyleaf</b>, a single
       line will be sent to standard input of <u>processor</u>.  That line will consist of the file name of the
       received article (relative to <u>spool</u>), a single space, and the message-ID of the received article.  Note
       that the message-ID will be taken from the argument to the IHAVE command and may not match the Message-ID
       header field in the article.  When <b>tinyleaf</b> shuts down, standard input to <u>processor</u> will be closed.

       <b>tinyleaf</b> does no syntax verification of received articles whatsoever; it just stores them and optionally
       passes them off to <u>processor</u>.  It also never deletes articles; normally, <u>processor</u> should do that when
       it's finished doing whatever it needs to with the article.

       <b>tinyleaf</b> expects NNTP commands on standard input and replies on standard output.  Status information and
       any error messages are sent to standard error.  It does no authentication; any authentication must be
       done by <a href="../man8/inetd.8.html">inetd</a>(8) or by a wrapper program.  (One simple authentication mechanism is to invoke <b>tinyleaf</b> via
       <a href="../man8/tcpd.8.html">tcpd</a>(8) from TCP wrappers and use <u><a href="file:/etc/hosts.allow">/etc/hosts.allow</a></u> and <u><a href="file:/etc/hosts.deny">/etc/hosts.deny</a></u> to restrict who can talk to the
       server.)

       <b>tinyleaf</b> has a (currently hard-coded) maximum message size of 1 MB and a (similarly hard-coded) timeout
       of ten minutes for each command or chunk of article data.

</pre><h4><b>EXAMPLE</b></h4><pre>
       Suppose that you want to archive news articles on a particular host (like the FTP server for a newsgroup
       archive) where you don't want the overhead of running a full-blown news server.  Write a program that
       reads one line at a time from standard input and treats everything before the first space as the filename
       of a news article to archive.  Each time the program reads a line, it should archive that file and then
       delete it, and it should exit when it gets end of file on standard input.

       Then, add a line like:

           nntp stream tcp nowait archive /usr/sbin/tcpd \
             &lt;pathbin&gt;/tinyleaf &lt;pathspool&gt;/tinyleaf &lt;pathbin&gt;/archive

       (all on one line -- the backslash and split in this line is just for readability) where "archive" is the
       user that owns the archive, <u>/usr/sbin/tcpd</u> is the path to <a href="../man8/tcpd.8.html">tcpd</a>(8), <u>pathbin</u>/tinyleaf is the path to this
       program, <u>pathspool</u>/tinyleaf is some scratch directory that the user "archive" has write access to, and
       <u>pathbin</u>/archive is the path to your <b>archive</b> script.

       You can now restrict access to <b>tinyleaf</b> to just your local news server with "<a href="file:/etc/hosts.allow">/etc/hosts.allow</a>" and
       "<a href="file:/etc/hosts.deny">/etc/hosts.deny</a>" and set up an ordinary feed from the server to the archive host, just like you would to
       any other news server, of only the newsgroup that you want to archive.

       Note that the archiving script should probably perform basic syntax and validity checks on the input,
       since <b>tinyleaf</b> doesn't.

       This is the application that motivated the original development of this program.

</pre><h4><b>BUGS</b></h4><pre>
       The timeout and maximum message size should really be configurable.  <b>tinyleaf</b> should also probably not
       just respond 500 to every command other than HELP, IHAVE, and QUIT; there are more useful (and more
       expected) error codes that could be returned.

       An option to scan the spool directory for any left-over files and pass them to the processor when
       starting up would be useful.

</pre><h4><b>HISTORY</b></h4><pre>
       Written by Russ Allbery &lt;<a href="mailto:eagle@eyrie.org">eagle@eyrie.org</a>&gt; for InterNetNews.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <a href="../man5/hosts_access.5.html">hosts_access</a>(5), <a href="../man8/inetd.8.html">inetd</a>(8), <a href="../man8/tcpd.8.html">tcpd</a>(8).

INN 2.7.3                                          2025-05-19                                        <u><a href="../man8/TINYLEAF.8.html">TINYLEAF</a></u>(8)
</pre>
 </div>
</div></section>
</div>
</body>
</html>