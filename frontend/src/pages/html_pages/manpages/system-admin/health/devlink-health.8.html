<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>devlink-health - devlink health reporting and recovery</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/iproute2">iproute2_6.14.0-1ubuntu3_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       devlink-health - devlink health reporting and recovery

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>devlink</b> [ <u>OPTIONS</u> ] <b>health</b>  { <u>COMMAND</u> | <b>help</b> }

       <u>OPTIONS</u> := { <b>-V</b>[<u>ersion</u>] }

       <b>devlink</b> <b>health</b> <b>show</b> [ { <u>DEV</u> | <u>DEV/PORT_INDEX</u> } <b>reporter</b> <u>REPORTER</u> ]

       <b>devlink</b> <b>health</b> <b>recover</b> { <u>DEV</u> | <u>DEV/PORT_INDEX</u> } <b>reporter</b> <u>REPORTER</u>

       <b>devlink</b> <b>health</b> <b>diagnose</b> { <u>DEV</u> | <u>DEV/PORT_INDEX</u> } <b>reporter</b> <u>REPORTER</u>

       <b>devlink</b> <b>health</b> <b>dump</b> <b>show</b> { <u>DEV</u> | <u>DEV/PORT_INDEX</u> } <b>reporter</b> <u>REPORTER</u>

       <b>devlink</b> <b>health</b> <b>test</b> { <u>DEV</u> | <u>DEV/PORT_INDEX</u> } <b>reporter</b> <u>REPORTER</u>

       <b>devlink</b> <b>health</b> <b>dump</b> <b>clear</b> { <u>DEV</u> | <u>DEV/PORT_INDEX</u> } <b>reporter</b> <u>REPORTER</u>

       <b>devlink</b> <b>health</b> <b>set</b> { <u>DEV</u> | <u>DEV/PORT_INDEX</u> } <b>reporter</b> <u>REPORTER</u> [ <b>grace_period</b> <u>MSEC</u> ] [ <b>auto_recover</b> { <b>true</b>
               | <b>false</b> } ] [ <b>auto_dump</b> { <b>true</b> | <b>false</b> } ]

       <b>devlink</b> <b>health</b> <b>help</b>

</pre><h4><b>DESCRIPTION</b></h4><pre>
   <b>devlink</b> <b>health</b> <b>show</b> <b>-</b> <b>Show</b> <b>status</b> <b>and</b> <b>configuration</b> <b>on</b> <b>all</b> <b>supported</b> <b>reporters.</b>
       Displays info about reporters registered on devlink devices and ports.

       <u>DEV</u> - specifies the devlink device.
       <u>DEV/PORT_INDEX</u> - specifies the devlink port.

       <u>REPORTER</u> - specifies the reporter's name registered on specified devlink device or port.

   <b>devlink</b> <b>health</b> <b>recover</b> <b>-</b> <b>Initiate</b> <b>a</b> <b>recovery</b> <b>operation</b> <b>on</b> <b>a</b> <b>reporter.</b>
       This action performs a recovery and increases the recoveries counter on success.

       <u>DEV</u> - specifies the devlink device.
       <u>DEV/PORT_INDEX</u> - specifies the devlink port.

       <u>REPORTER</u> - specifies the reporter's name registered on specified devlink device or port.

   <b>devlink</b> <b>health</b> <b>diagnose</b> <b>-</b> <b>Retrieve</b> <b>diagnostics</b> <b>data</b> <b>on</b> <b>a</b> <b>reporter.</b>
       <u>DEV</u> - specifies the devlink device.
       <u>DEV/PORT_INDEX</u> - specifies the devlink port.

       <u>REPORTER</u> - specifies the reporter's name registered on specified devlink device or port.

   <b>devlink</b> <b>health</b> <b>test</b> <b>-</b> <b>Trigger</b> <b>a</b> <b>test</b> <b>event</b> <b>on</b> <b>a</b> <b>reporter.</b>
       <u>DEV</u> - specifies the devlink device.

       <u>REPORTER</u> - specifies the reporter's name registered on the devlink device.

   <b>devlink</b> <b>health</b> <b>dump</b> <b>show</b> <b>-</b> <b>Display</b> <b>the</b> <b>last</b> <b>saved</b> <b>dump.</b>
       devlink health saves a single dump per reporter. If an dump is
       not already stored by the Devlink, this command will generate a new
       dump. The dump can be generated either automatically when a
       reporter reports on an error or manually at the user's request.

       <u>DEV</u> - specifies the devlink device.
       <u>DEV/PORT_INDEX</u> - specifies the devlink port.

       <u>REPORTER</u> - specifies the reporter's name registered on specified devlink device or port.

   <b>devlink</b> <b>health</b> <b>dump</b> <b>clear</b> <b>-</b> <b>Delete</b> <b>the</b> <b>saved</b> <b>dump.</b>
       Deleting the saved dump enables a generation of a new dump on
       the next "devlink health dump show" command.

       <u>DEV</u> - specifies the devlink device.
       <u>DEV/PORT_INDEX</u> - specifies the devlink port.

       <u>REPORTER</u> - specifies the reporter's name registered on specified devlink device or port.

   <b>devlink</b> <b>health</b> <b>set</b> <b>-</b> <b>Configure</b> <b>health</b> <b>reporter.</b>
       Please note that some params are not supported on a reporter which doesn't support a recovery or dump
       method.

       <u>DEV</u> - specifies the devlink device.
       <u>DEV/PORT_INDEX</u> - specifies the devlink port.

       <u>REPORTER</u> - specifies the reporter's name registered on specified devlink device or port.

       <b>grace_period</b> <u>MSEC</u>
              Time interval between consecutive auto recoveries.

       <b>auto_recover</b> { <b>true</b> | <b>false</b> }
              Indicates whether the devlink should execute automatic recover on error.

       <b>auto_dump</b> { <b>true</b> | <b>false</b> }
              Indicates whether the devlink should execute automatic dump on error.

</pre><h4><b>EXAMPLES</b></h4><pre>
       devlink health show
           List status and configuration of available reporters on devices and ports.

       devlink health show pci/0000:00:09.0/1 reporter tx
           List status and configuration of tx reporter registered on port on pci/0000:00:09.0/1

       devlink health recover pci/0000:00:09.0 reporter fw_fatal
           Initiate recovery on fw_fatal reporter registered on device on pci/0000:00:09.0.

       devlink health recover pci/0000:00:09.0/1 reporter tx
           Initiate recovery on tx reporter registered on port on pci/0000:00:09.0/1.

       devlink health diagnose pci/0000:00:09.0 reporter fw
           List diagnostics data on the specified device and reporter.

       devlink health dump show pci/0000:00:09.0/1 reporter tx
           Display the last saved dump on the specified port and reporter.

       devlink health dump clear pci/0000:00:09.0/1 reporter tx
           Delete saved dump on the specified port and reporter.

       devlink health set pci/0000:00:09.0 reporter fw_fatal grace_period 3500
           Set  time  interval  between  auto  recoveries  to  minimum  of 3500 msec on the specified device and
           reporter.

       devlink health set pci/0000:00:09.0/1 reporter tx grace_period 3500
           Set time interval between auto recoveries to minimum of 3500 msec on the specified port and reporter.

       devlink health set pci/0000:00:09.0 reporter fw_fatal auto_recover false
           Turn off auto recovery on the specified device and reporter.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man8/devlink.8.html">devlink</a></b>(8), <b><a href="../man8/devlink-dev.8.html">devlink-dev</a></b>(8), <b><a href="../man8/devlink-port.8.html">devlink-port</a></b>(8), <b><a href="../man8/devlink-param.8.html">devlink-param</a></b>(8), <b><a href="../man8/devlink-region.8.html">devlink-region</a></b>(8),

</pre><h4><b>AUTHOR</b></h4><pre>
       Aya Levin &lt;<a href="mailto:ayal@mellanox.com">ayal@mellanox.com</a>&gt;

iproute2                                           20 Feb 2019                                 <u><a href="../man8/DEVLINK-HEALTH.8.html">DEVLINK-HEALTH</a></u>(8)
</pre>
 </div>
</div></section>
</div>
</body>
</html>