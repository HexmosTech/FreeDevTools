<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>fetch-crl - retrieve certificate revocation lists</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/fetch-crl">fetch-crl_3.0.23-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       fetch-crl - retrieve certificate revocation lists

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>fetch-crl</b>   [<b>-c</b> <b>config</b>]   [<b>-v</b>[<b>v</b>..<b>]</b>]    [<b>-q</b>]   [<b>-h</b>]  [<b>--inet6glue</b>]  [<b>-l</b> <b>infopath</b>]  [<b>-o</b> <b>outputpath</b>]  [<b>-s</b> <b>statepath</b>]
       [<b>-a</b> <b>agingtolerance</b>]   [<b>-T</b> <b>httptimeout</b>]   [<b>-r</b> <b>randomwait</b>]   [<b>-p</b> <b>parallelism</b>]    [<b>--formats</b> <b>openssl</b>|<b>pem</b>|<b>der</b>|<b>nss</b>] ..
       [<b>--define</b> <b>key</b>=<b>value</b>] ..  [<b>--cfgdir</b> <b>dirname</b>]

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The  <u>fetch-crl</u>  utility  will  retrieve  certificate revocation lists (CRLs) for a set of installed trust
       anchors, based on crl_url files or IGTF-style info files. It will install these for use with OpenSSL, NSS
       or third-party tools.

       It works based on a list of trust anchors, for each of which one or more CRLs should be  installed  in  a
       CRL  store. And for each of these CRLs, one or more URLs can be specified from which the specific CRL can
       be retrieved.  There are several supported formats for CRL stores:

       openssl
              has a directory in which <u>hash.</u>  <u>i</u> files are stored, one CRL per file, and all CRLs for  the  trust
              anchors  whose  subject  distinguished  name  hashes  to  <u>hash</u>  are  read  and  evaluated for each
              certificate issues by the CAs whose subject name hash matches <u>hash</u>

              OpenSSL in version 1 changes its subject name hashing algorithm, though, so  that  for  one  trust
              anchor  <b>two</b>  hashes  could  be used, depending on the specific OpenSSL version at hand. If OpenSSL
              version 1 or higher is used by <u>fetch-crl</u> and the default mode is used, each  CRL  is  written  out
              twice,  once  for  each possible hash value. This mode in controlled by the <u>opensslmode</u> = { <u>dual</u> |
              <u>single</u> } configuration option in the configuration file.

       pem    writes out the CRL in PEM (RFC 1421) format.

       der    writes out the CRL in binary under distinguished encoding rules

       nss    will use the crlutil from the Mozilla NSS tools to add or  replace  a  CRL  in  the  NSS  cert8.db
              database.

       Each CRLs can be retrieved from one of several URLs. These URLs are listed by default in the trust anchor
       meta-data:  the  <u>.info</u>  file or the <u>.crl_url</u> file, as shipped with the trust anchor. In the crl_url file,
       there is one URL per line; in the .info file, the <u>crl_url</u> attribute is a  semi-colon  separated  list  of
       URLs.  These  URLs  are  then  tried  in  order  to retrieve a fresh CRL. Once data has been successfully
       retrieved, this data is used as the CRL if it passes  verification,  signature  checking  and  expiration
       checks. Http, https, ftp and file URLs are supported. If data for a CRL has been downloaded but this data
       fails  any  of  the subsequent checks (signature validation, freshness), the CRL data is discarded and NO
       further URLs are tried for this CRL!

       URLs can be pre-pended or post-pended to the default list via the configuration file. This can be used to
       prefer a local mirror repository over any URLs shipped by the trust anchor provider, without the need  to
       modify  the  trust anchor metadata. By post-pending a URL, a 'last-resort' download location can be added
       in case the CA provided URLs cannot be used. The pre- and post-pended URLS are subject to token expansion
       of the tokens <u>@ALIAS@</u>, <u>@ANCHORNAME@</u>, and <u>@R@</u>, where <u>R</u> is the sequence number of the CRL  on  a  per-trust
       anchor basis.

       Retrieved  CRLs may be PEM (RFC1421) or DER encoded. They are automatically converted as needed by fetch-
       crl, using the OpenSSL command-line tool.

       Retrieving a CRL without having an accompanying CA root certificate in an OpenSSL-accessible  form  (like
       <u>@ALIAS@.0</u>  or  <u>@ANCHORNAME@.@R@</u>  will  result  in  a  verification  failures. The CA lookup directory and
       patterns can be configured via the configuration file

</pre><h4><b>TOKEN</b> <b>EXPANSION</b></h4><pre>
       In paths and name templates, tokens are expanded to allow a single pattern  to  be  used  for  all  trust
       anchors. The <u>nametemplate_*</u>, <u>catemplate</u>, <u>prepend_url</u>, and <u>postpend_url</u> configuration settings are subject
       to token expansion.

       The following tokens are recognised

       @ALIAS@
              The  alias  name of the trust anchor as defined in the <u>info</u> file. If there is no info file and the
              meta-data is retrieved from <u>crl_url</u> files, then the alias is set to the  basename  (excluding  the
              .crl_url suffix) of the filename of the trust anchor.

       @ANCHORNAME@
              The file name of the trust anchor, without any .info or .url_crl suffix.

       @R@    The  CRL  sequence  number,  counting from 0. Note that most trust anchors only have a single CRL,
              with sequence number "0".

</pre><h4><b>OPTIONS</b></h4><pre>
       <b>-h</b> <b>--help</b>
              Show help text.

       <b>-l</b> <b>--infodir</b> <b>metadata-directory</b>
              The script will search this directory for files with the suffix '.info' or '.crl_url'.  Note:  the
              CRL files to download must be in either PEM or DER format.

       <b>-o</b> <b>--out</b> <b>outputDirectory</b>
              Directory  where  to  put the downloaded and processed CRLs.  The directory to be used as argument
              for  this  option  is  typically  /etc/grid-security/certificates  Default:   infodir   (meta-data
              directory)

       <b>-a</b> <b>--agingtolerance</b> <b>hours</b>
              The  maximum  age  of  the  locally  downloaded  CRL before download failures trigger actual error
              messages. This error message suppression mechanism only works if the CRL has  been  downloaded  at
              least  once  and  either  the  crl_url files are named after the hash of the CRL issuer name, or a
              state directory is used to preserve state across invocations.

              Default: 24 hour aging tolerance

       <b>-q</b> <b>--quiet</b>
              Quiet mode (do not print information messages)

       <b>-r</b> <b>--randomwait</b> <b>s</b>
              Wait up to <u>s</u> seconds before starting the retrieval process(es).

       <b>-p</b> <b>--parallelism</b> <b>n</b>
              Do the retrieval for several trust anchors in parallel, with up to <u>n</u> processes  doing  retrievals.
              At  most  <u>n</u>  downloads will be active at any one time. Multiple CRLs for the same trust anchor are
              still downloaded sequentially.

       <b>--inet6glue</b>
              Load the Net::INET6Glue module to enable IPv6 support in LWP.

       <b>--define</b> <u>key</u><b>=</b><u>value</u>
              Add definitions to the configuration at runtime. The  key=value  pair  is  appended  to  the  main
              section of the configuration, unless a colon is used in the key: then the part before the colon is
              the  config file section name, and the part thereafter the key inside that section.  To merely set
              a valueless option, set to to the null-string "".

</pre><h4><b>CONFIGURATION</b></h4><pre>
       See  <b><a href="http://wiki.nikhef.nl/grid/FetchCRL3">http://wiki.nikhef.nl/grid/FetchCRL3</a></b>  or  the  included  example  file  for  a  description  of  the
       configuration   options.   The  default  location  of  the  configuration  file  is  <u>/etc/fetch-crl.conf</u>.
       Supplementary configuration is read from  all  files  located  in  <u>/etc/fetch-crl.d/</u>,  or  the  directory
       designated by the <u>cfgdir</u> directive, whose collated contents are added to the existing configuration data.

</pre><h4><b>NOTES</b></h4><pre>
       Defaults can be set in the fetch-crl system configuration file /etc/fetch-crl.conf.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <a href="../man1/openssl.1.html">openssl</a>(1), <a href="http://wiki.nikhef.nl/grid/FetchCRL3">http://wiki.nikhef.nl/grid/FetchCRL3</a>

</pre><h4><b>DIAGNOSTICS</b></h4><pre>
       Exit  status  is  normally  0;  if  an  error occurs, exit status is 1 and diagnostics will be written to
       standard error.

</pre><h4><b>LICENSE</b></h4><pre>
       Licensed under the Apache License, Version 2.0 (the "License");

       <b><a href="http://www.apache.org/licenses/LICENSE-2.0">http://www.apache.org/licenses/LICENSE-2.0</a></b>

</pre><h4><b>BUGS</b></h4><pre>
       Although fetch-crl3 will install multiple CRLs in the  CRL  stores  (called  '.r0',  '.r1',  or  labelled
       appropriately  in  an  NSS  store),  if the number of CRLs decreases the left-overs are not automatically
       removed. So if the number of CRLs for a particular CA does down from <u>n</u> to <u>n-1</u>, the  file  '.r<u>n</u>'  must  be
       removed manually.

Trust Anchor Utilities                                local                                         <u><a href="../man8/FETCH-CRL.8.html">FETCH-CRL</a></u>(8)
</pre>
 </div>
</div></section>
</div>
</body>
</html>