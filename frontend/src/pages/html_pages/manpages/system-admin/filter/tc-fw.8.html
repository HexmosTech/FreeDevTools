<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>fw - fwmark traffic control filter</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/iproute2">iproute2_6.14.0-1ubuntu3_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       fw - fwmark traffic control filter

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>tc</b> <b>filter</b> ... <b>fw</b> [ <b>classid</b> <u>CLASSID</u> ] [ <b>action</b> <u>ACTION_SPEC</u> ]

</pre><h4><b>DESCRIPTION</b></h4><pre>
       the <b>fw</b> filter allows one to classify packets based on a previously set <b>fwmark</b> by <b>iptables</b>.  If the masked
       value  of  the  <b>fwmark</b> matches the filter's masked <b>handle</b>, the filter matches. By default, all 32 bits of
       the <b>handle</b> and the <b>fwmark</b> are masked.  <b>iptables</b> allows one to mark single packets with the  <b>MARK</b>  target,
       or whole connections using <b>CONNMARK</b>.  The benefit of using this filter instead of doing the heavy-lifting
       with  <b>tc</b> itself is that on one hand it might be convenient to keep packet filtering and classification in
       one place, possibly having to match a packet just once, and on the other users familiar with <b>iptables</b> but
       not <b>tc</b> will have a less hard time adding QoS to their setups.

</pre><h4><b>OPTIONS</b></h4><pre>
       <b>classid</b> <u>CLASSID</u>
              Push matching packets to the class identified by <u>CLASSID</u>.

       <b>action</b> <u>ACTION_SPEC</u>
              Apply an action from the generic actions framework on matching packets.

</pre><h4><b>EXAMPLES</b></h4><pre>
       Take e.g. the following tc filter statement:

              tc filter add ... handle 6 fw classid 1:1

       will match if the packet's <b>fwmark</b> value is <b>6</b>.  This is a sample <b>iptables</b> statement marking packets coming
       in on eth0:

              iptables -t mangle -A PREROUTING -i eth0 -j MARK --set-mark 6

       Specific bits of the packet's <b>fwmark</b> can be set using the <b>skbedit</b> action. For example, to  only  set  one
       bit of the <b>fwmark</b> without changing any other bit:

              tc filter add ... action skbedit mark 0x8/0x8

       The <b>fw</b> filter can then be used to match on this bit by masking the <b>handle:</b>

              tc filter add ... handle 0x8/0x8 fw action drop

       This is useful when different bits of the <b>fwmark</b> are assigned different meanings.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man8/tc.8.html">tc</a></b>(8), <b><a href="../man8/iptables.8.html">iptables</a></b>(8), <b><a href="../man8/iptables-extensions.8.html">iptables-extensions</a></b>(8), <b><a href="../man8/tc-skbedit.8.html">tc-skbedit</a></b>(8)

iproute2                                           21 Oct 2015                 <u>Firewall</u> <u>mark</u> <u>classifier</u> <u>in</u> <u><a href="../man8/tc.8.html">tc</a></u>(8)
</pre>
 </div>
</div></section>
</div>
</body>
</html>