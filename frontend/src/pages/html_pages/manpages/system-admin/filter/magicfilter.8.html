<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>magicfilter - automatic configurable printer filter</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/magicfilter">magicfilter_1.2-68_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       magicfilter - automatic configurable printer filter

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>magicfilter</b> config-file [-c] [-n user] [-h host] [-iindent] [--debug] [other-options]

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>magicfilter</b>  is  an  extensible  and  customizable  automatic  printer filter.  It selects an appropriate
       conversion technique for the input data by seeking for <u>magic</u> <u>numbers</u>, and then utilizing the  appropriate
       conversion utility.

       <b>magicfilter</b>  is primarily intended for use as the ``input filter'' by the <b>lpd</b> print spooler.  The options
       accepted by <b>magicfilter</b> are exactly the ones passed to the input filter by <b>lpd</b>.

   <b>OPTIONS</b>
       Typically <b>magicfilter</b> will be invoked by <b>lpd</b> and hence provided the right  options  automatically.   This
       list is included for reference only.

       Note that only the <u>-n</u> and <u>-h</u> options may have spaces between the option letter and the option value.

       <u>-c</u>     Copy the input to the output without any conversion whatsoever (used by <b>lpd</b> whenever the <u>-l</u> option
              is passed to the <b>lpr</b> program).

       <u>-nuser,</u> <u>-n</u> <u>user</u>
              The  login  name  of  the user who submitted the job.  Available to subfilters as <b>$LPUSER</b>.  If the
              user has an associated GECOS entry it will be available as <b>$LPUSERNAME</b>.

       <u>-hhost,</u> <u>-h</u> <u>host</u>
              The host on which the job was submitted.  Available to subfilters as <b>$LPHOST</b>.

       <u>-iindent</u>
              A numeric option passed by <b>lpd</b>; can be set by  the  user  by  the  <u>-i</u>  option  to  <b>lpr.</b>   Although
              nominally  used  for  the  amount  of  indentation  requested,  <b>magicfilter</b>  makes it available to
              subfilters for any useful purpose as <b>$LPINDENT</b>.

       <u>-Cclassname</u>
              LPRng class (priority) name.  Available to subfilters as <b>$LPCLASS</b>.

       <u>-Fformat</u>
              Format letter (passed by LPRng only).  When used as input filter (if) this will be <u>f</u>, when used as
              other filter types it will be the option character corresponding to  this  filter.   Available  to
              subfilters as <b>$LPFORMAT</b>.

       <u>-Jjobname</u>
              The name of the printer job (passed by LPRng only).  Available to subfilters as <b>$LPJOB</b>.

       <u>-Kcopies</u>
              Copy count (passed by LPRng only).  Available to subfilters as <b>$LPCOPIES</b>.

       <u>-Lbannername</u>
              User name from the banner page (passed by LPRng only).  Available to subfilters as <b>$BANNERNAME</b>.

       <u>-Pprinter</u>
              Printer name (passed by LPRng only).  Available to subfilters as <b>$PRINTER</b>.

       <u>-Qqueuename</u>
              Spool queue name (passed by LPRng only).  Available to subfilters as <b>$LPQUEUE</b>.

       <u>-Raccountinfo</u>
              Accounting information (passed by LPRng only).  Available to subfilters as <b>$LPACCT</b>.

       <u>-Zoptions</u>
              LPRng  ``Z-options''.   The  LPRng  <b>lpr</b>  program  supports  a <u>-Z</u> option, which can be used to pass
              arbitrary information to the printer filters.  Available to subfilters as <b>$ZOPT</b>.

       <u>--debug</u>
              Write the name of each facility invoked (together with any options) to standard error.   This  can
              be useful for debugging complicated configuration files.

       <u>other</u> <u>options</u>
              Any other options, such as the <u>-w</u>, <u>-l</u>, <u>-x</u>, and <u>-y</u> options typically passed by <b>lpd</b> are ignored.

   <b>RUNNING</b> <b>MAGICFILTER</b> <b>FROM</b> <b>LPD</b>
       To  run  <b>magicfilter</b>  from  <b>lpd</b>  it  should  be  entered as one of the filters in the <u>/etc/printcap</u> file.
       Typically, it will be the input filter (if).  Since most version of <b>lpd</b> do not accept  arguments  entered
       as  part of the filter name, typically the filter name entered into the <u>/etc/printcap</u> file will simply be
       the name of the configuration file, which is set executable and starts with the line:

       <b>#!</b> <b>/usr/sbin/magicfilter</b>

       Most UNIX kernels will then be able to treat the configuration file  itself  as  if  it  was  the  actual
       program.

       For  systems  which  do  not  support  the  ``#!-hack'',  the  filter set in the if entry should point to
       <b>magicfilter</b> directly, and the accounting file (af) entry should point to the configuration  file.   This,
       however, is a less general, and hence less desirable solution.

       This   version   of  <b>magicfilter</b>  supports  the  enhanced  <b>lpd</b>  included  with  the  LPRng  package  from
       <u>dickory.sdsu.edu</u>.

   <b>THE</b> <b>CONFIGURATION</b> <b>FILE</b>
       The configuration file is used by <b>magicfilter</b> to redirect various types of data to the various conversion
       utilities.  The configuration file is printer-specific,  and  often  system-specific,  depending  on  the
       available  conversion  programs.   For example, a system which has GhostScript installed would be able to
       print PostScript to a non-PostScript printer, whereas other systems typically would not.

       The configuration file contains a sequence of lines of the form:

       <u>offset</u>    <u>magic</u>     <u>facility</u>

       where the <u>offset</u> represents the location  of  the  indentification  string  in  the  data  format,  <u>magic</u>
       represents the identification string itself, <u>facility</u> represents the type of action to take.

       Blank  lines  and  lines with a hash mark (#) as the first nonblank character are ignored.  A line may be
       continued onto the next line by ending the line in a backslash (\).

       The <u>offset</u> is a nonnegative integer, which can be represented either in  decimal  form  (default),  octal
       form (preceded by <u>0</u>), or hexadecimal form (preceded by <u>0x</u>).

       The  <u>magic</u>  is  a  string  of characters, which may include C-style \-escape sequences.  In addition, the
       sequence \? can be used to represent a ``wildcard'' byte.  If the string includes spaces, the spaces have
       to be preceded by a backslash, or the entire string must be enclosed in double quotation marks.

       For ambiguous matches, the first match is used.  Hence, the most specific match should always  be  placed
       first in the file.  In addition, the last line may be of the form:

       <b>default</b>   <u>facility</u>

       which designates a default action to be used in case no other action matches.  This will typically be the
       action for plain text.

   <b>FACILITIES</b>
       <b>magicfilter</b> provides the following options for the <u>facility</u> field in the configuration file:

       <b>cat</b> [<u>prefix</u> [<u>suffix</u>]]
              Copy the input to the output without any conversion, like the <b>cat</b> command.  If the optional <u>prefix</u>
              and <u>suffix</u> strings are specified, they are transmitted to the printer immediately before and after
              the  data itself.  The <u>prefix</u> and <u>suffix</u> strings are specified in the same way as the <u>magic</u> string
              (except that the wildcard sequence \? is not permitted), and like the <u>magic</u> sequence  can  contain
              any  control  character,  including  nulls (\0).  To specify a <u>suffix</u> without a <u>prefix</u>, specify an
              empty <u>prefix</u> string enclosed in double quotes (i.e. "").

       <b>text</b> [<u>prefix</u> [<u>suffix</u>]]
              Copy the input to the output, but add carriage return characters before every line feed  and  form
              feed  character  in  the  file, and a line feed-form feed sequence at end of file.  The <u>prefix</u> and
              <u>suffix</u> arguments are treated the same way as for the <b>cat</b> facility;  the  <u>suffix</u>,  if  present,  is
              added after the final line feed-form feed sequence.

       <b>postscript</b>
              Same  as  the  <b>text</b>  facility,  except add an ASCII EOT (Ctrl-D) character to the end of the data.
              This lets a PostScript printer  know  that  the  end  of  the  job  has  been  reached.   This  is
              functionally equivalent to the command

              <b>text</b> "" \004

       <b>ignore</b> Ignore the job; do not provide any output whatsoever.

       <b>reject</b> <u>message</u>
              Same  as  the  <b>ignore</b> facility, but attempt to send an email message to the user who submitted the
              job to inform that a job has been rejected and why.

       <b>filter</b> <u>command</u>
              Run the given <u>command</u>, feeding it the input data, and sending the output data to the printer.  The
              environment variables <b>LPUSER</b>, <b>LPHOST</b>, and <b>LPINDENT</b> is set to the values  of  the  user,  host  and
              indent  options  passed  to <b>magicfilter</b>.  Since the <u>command</u> is fed to <u><a href="file:/bin/sh">/bin/sh</a></u> it may contain shell
              special characters, and the sequences <b>$LPUSER</b>, <b>$LPHOST</b>, and <b>$LPINDENT</b> can be used  to  access  the
              values  of  the  passed  environment  variables.   If  the  <b>lpd</b> daemon on the system is LPRng, the
              following environment variables are also available, see the <b>OPTIONS</b> section for details:  <b>LPCLASS</b>,
              <b>LPFORMAT</b>, <b>LPJOB</b>, <b>LPCOPIES</b>, <b>BANNERNAME</b>, <b>PRINTER</b>, <b>LPQUEUE</b>, <b>LPACCT</b>, and <b>ZOPT</b>.

       <b>pipe</b> <u>command</u>
              Same  as  the  <b>filter</b>  facility,  except  that  the  output  data is fed back into <b>magicfilter</b> for
              reprocessing.  This is used for external filter programs which themselves do not produce a  format
              that the printer can accept, but which can be futher processed to obtain such a format.

       <b>ffilter</b> <u>command</u>

       <b>fpipe</b> <u>command</u>
              Same  as  the  <b>filter</b>  and  <b>pipe</b>  facilities,  respectively, except that the input is written to a
              temporary file before being fed to the filter program  given  by  <u>command</u>.   This  is  useful  for
              programs  which require seekable input, such as <b>dvips</b>, or which need to do multiple passes over an
              input file, such as <b>grog</b>.  The environment variable <b>FILE</b> is set to the name of the temporary  file
              (and, like the other ones, it can be accessed on the command line as <b>$FILE</b>).

</pre><h4><b>HINTS</b></h4><pre>
       Using the <b>pipe</b> facility together with <b>zcat</b> or <b>gunzip</b> lets you transparently print compressed files.

       The  <b>pbmplus</b>  or  <b>netpbm</b>  collections of image conversion utilities contain a large number of very useful
       external filter programs.

       You will probably  want  to  examine  the  sample  configuration  files  included  with  the  <b>magicfilter</b>
       distribution before creating your own.

</pre><h4><b>BUGS</b></h4><pre>
       Some data formats cannot be easily identified by a simple fixed-offset magic number check.

       Providing  large offsets can cause <b>magicfilter</b> to take up lots of memory.  Fortunately, large offsets for
       magic numbers are pretty much unheard of.

       Currently, there is no protection against the <b>pipe</b> or <b>fpipe</b> facilities going into an infinite loop.

</pre><h4><b>AUTHOR</b></h4><pre>
       H. Peter Anvin &lt;<a href="mailto:hpa@zytor.com">hpa@zytor.com</a>&gt;

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man5/printcap.5.html">printcap</a></b>(5), <b><a href="../man8/lpr.8.html">lpr</a></b>(8), <b><a href="../man1/dvips.1.html">dvips</a></b>(1), <b><a href="../man1/grog.1.html">grog</a></b>(1), <b><a href="../man1/gs.1.html">gs</a></b>(1), <b><a href="../man1/gzip.1.html">gzip</a></b>(1), <b><a href="../man1/troff.1.html">troff</a></b>(1).

March 1996                                         Version 1.2                                    <u><a href="../man8/MAGICFILTER.8.html">MAGICFILTER</a></u>(8)
</pre>
 </div>
</div></section>
</div>
</body>
</html>