<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>xdp-filter - a simple XDP-powered packet filter</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/xdp-tools">xdp-tools_1.5.1-1ubuntu2_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       xdp-filter - a simple XDP-powered packet filter

</pre><h4><b>SYNOPSIS</b></h4><pre>
       XDP-filter  is  a packet filtering utility powered by XDP. It is deliberately simple and so does not have
       the same matching capabilities as, e.g., netfilter.  Instead, thanks to XDP, it  can  achieve  very  high
       drop rates: tens of millions of packets per second on a single CPU core.

   <b>Running</b> <b>xdp-filter</b>
       The syntax for running xdp-filter is:

              xdp-filter COMMAND [options]

              Where COMMAND can be one of:
                     load        - load xdp-filter on an interface
                     unload      - unload xdp-filter from an interface
                     port        - add a port to the filter list
                     ip          - add an IP address to the filter list
                     ether       - add an Ethernet MAC address to the filter list
                     status      - show current xdp-filter status
                     poll        - poll statistics output
                     help        - show the list of available commands

       Each  command,  and  its options are explained below. Or use <u>xdp-filter</u> <u>COMMAND</u> <u>--help</u> to see the options
       for each command.

</pre><h4><b>The</b> <b>LOAD</b> <b>command</b></h4><pre>
       To use <u>xdp-filter</u>, it must first be loaded onto an interface. This is accomplished with the <u>load</u> command,
       which takes the name of the interface as a parameter, and optionally allows specifying the features  that
       should  be  included. By default all features are loaded, but de-selecting some features can speed up the
       packet matching, and increase performance by a substantial amount.

       The syntax for the <u>load</u> command is:

       <u>xdp-filter</u> <u>load</u> <u>[options]</u> <u>&lt;ifname&gt;</u>

       Where <u>&lt;ifname&gt;</u> is the name of the interface to load <u>xdp-filter</u> onto, and must be specified. The supported
       options are:

   <b>-m,</b> <b>--mode</b> <b>&lt;mode&gt;</b>
       Specifies which mode to load the XDP program to be loaded in. The valid values are 'native', which is the
       default in-driver XDP mode, 'skb', which causes the so-called <u>skb</u> <u>mode</u> (also known as <u>generic</u> <u>XDP</u>) to  be
       used, or 'hw' which causes the program to be offloaded to the hardware.

   <b>-p,</b> <b>--policy</b> <b>&lt;policy&gt;</b>
       This sets the policy <u>xdp-filter</u> applies to packets <b>not</b> matched by any of the filter rules. The default is
       <u>allow</u>,  in  which  packets not matching any rules are allowed to pass. The other option is <u>deny</u>, in which
       <b>all</b> packets are dropped <b>except</b> those matched by the filter options.

       <u>xdp-filter</u> cannot be loaded simultaneously in <u>deny</u> and <u>allow</u>  policy  modes  on  the  system.  Note  that
       loading  <u>xdp-filter</u>  in  <u>deny</u>  mode will drop all traffic on the interface until suitable allow rules are
       installed, so some care is needed to avoid being locked out of a remote system.

   <b>-f,</b> <b>--features</b> <b>&lt;feats&gt;</b>
       Use this option to select which features to include when loaded <u>xdp-filter</u>.  The default is to  load  all
       available features. So select individual features specify one or more of these:

       •   <b>tcp</b>: Support filtering on TCP port number

       •   <b>udp</b>: Support filtering on UDP port number

       •   <b>ipv6</b>: Support filtering on IPv6 addresses

       •   <b>ipv4</b>: Support filtering on IPv4 addresses

       •   <b>ethernet</b>: Support filtering on Ethernet MAC addresses

       Specify multiple features by separating them with a comma. E.g.: <u>tcp,udp,ipv6</u>.

   <b>-v,</b> <b>--verbose</b>
       Enable debug logging. Specify twice for even more verbosity.

   <b>-h,</b> <b>--help</b>
       Display a summary of the available options

</pre><h4><b>The</b> <b>UNLOAD</b> <b>command</b></h4><pre>
       The <u>unload</u> command unloads <u>xdp-filter</u> from one (or all) interfaces, and cleans up the program state.

       The syntax for the <u>load</u> command is:

       <u>xdp-filter</u> <u>unload</u> <u>[options]</u> <u>&lt;ifname&gt;</u>

       Where  <u>&lt;ifname&gt;</u>  is the name of the interface to unload <u>xdp-filter</u> from, and must be specified unless the
       <b>--all</b> option is used. The supported options are:

   <b>-a,</b> <b>--all</b>
       Specify this option to remove <u>xdp-filter</u> from all interfaces it  was  loaded  onto.  If  this  option  is
       specified, no <u>&lt;ifname&gt;</u> is needed.

       This  option  can  also  be  used to clean up all <u>xdp-filter</u> state if the XDP program(s) were unloaded by
       other means.

   <b>-k,</b> <b>--keep-maps</b>
       Specify this option to prevent <u>xdp-filter</u> from clearing its map state. By default, all BPF maps no longer
       needed by any loaded program are removed.  However, this will also remove the contents of the  maps  (the
       filtering  rules),  so  this  option  can  be  used  to  keep  the maps around so the rules persist until
       <u>xdp-filter</u> is loaded again.

   <b>-v,</b> <b>--verbose</b>
       Enable debug logging. Specify twice for even more verbosity.

   <b>-h,</b> <b>--help</b>
       Display a summary of the available options

</pre><h4><b>The</b> <b>PORT</b> <b>command</b></h4><pre>
       Use the <u>port</u> command to add a TCP or UDP port to the <u>xdp-filter</u> match list.  For this to work, <u>xdp-filter</u>
       must be loaded with either the <b>udp</b> or the <b>tcp</b> feature (or both) on at least one interface.

       The syntax for the <u>port</u> command is:

       <u>xdp-filter</u> <u>port</u> <u>[options]</u> <u>&lt;port&gt;</u>

       Where <u>&lt;port&gt;</u> is the port number to add (or remove if the <b>--remove</b> is specified).  The  supported  options
       are:

   <b>-r,</b> <b>--remove</b>
       Remove the port instead of adding it.

   <b>-m,</b> <b>--mode</b> <b>&lt;mode&gt;</b>
       Select  filtering  mode. Valid options are <b>src</b> and <b>dst</b>, both of which may be specified as <u>src,dst</u>. If <b>src</b>
       is specified, the port number will added as a <u>source</u> <u>port</u> match, while if  <b>dst</b>  is  specified,  the  port
       number  will  be  added  as  a <u>destination</u> <u>port</u> match. If both are specified, a packet will be matched if
       <b>either</b> its source or destination port is the specified port number.

   <b>-p,</b> <b>--proto</b> <b>&lt;proto&gt;</b>
       Specify one (or both) of <b>udp</b> and/or <b>tcp</b> to match UDP or TCP ports, respectively.

   <b>-s,</b> <b>--status</b>
       If this option is specified, the current list of matched ports will be printed after inserting  the  port
       number. Otherwise, nothing will be printed.

   <b>-v,</b> <b>--verbose</b>
       Enable debug logging. Specify twice for even more verbosity.

   <b>-h,</b> <b>--help</b>
       Display a summary of the available options

</pre><h4><b>The</b> <b>IP</b> <b>command</b></h4><pre>
       Use the <u>ip</u> command to add an IPv6 or an IPv4 address to the <u>xdp-filter</u> match list.

       The syntax for the <u>ip</u> command is:

       <u>xdp-filter</u> <u>ip</u> <u>[options]</u> <u>&lt;ip&gt;</u>

       Where  <u>&lt;ip&gt;</u>  is  the  IP  address  to  add  (or remove if the <b>--remove</b> is specified). Either IPv4 or IPv6
       addresses can be specified, but <u>xdp-filter</u> must be loaded with the corresponding features (<b>ipv4</b> and <b>ipv6</b>,
       respectively). The supported options are:

   <b>-r,</b> <b>--remove</b>
       Remove the IP address instead of adding it.

   <b>-m,</b> <b>--mode</b> <b>&lt;mode&gt;</b>
       Select filtering mode. Valid options are <b>src</b> and <b>dst</b>, both of which may be specified as <u>src,dst</u>.  If  <b>src</b>
       is  specified,  the IP address will added as a <u>source</u> <u>IP</u> match, while if <b>dst</b> is specified, the IP address
       will be added as a <u>destination</u> <u>IP</u> match. If both are specified, a packet will be matched  if  <b>either</b>  its
       source or destination IP is the specified IP address.

   <b>-s,</b> <b>--status</b>
       If  this  option  is  specified,  the  current list of matched ips will be printed after inserting the IP
       address. Otherwise, nothing will be printed.

   <b>-v,</b> <b>--verbose</b>
       Enable debug logging. Specify twice for even more verbosity.

   <b>-h,</b> <b>--help</b>
       Display a summary of the available options

</pre><h4><b>The</b> <b>ETHER</b> <b>command</b></h4><pre>
       Use the <u>ether</u> command to add an Ethernet MAC address to the <u>xdp-filter</u> match  list.  For  this  to  work,
       <u>xdp-filter</u> must be loaded with either the <b>ethernet</b> feature on at least one interface.

       The syntax for the <u>ether</u> command is:

       <u>xdp-filter</u> <u>ether</u> <u>[options]</u> <u>&lt;addr&gt;</u>

       Where  <u>&lt;addr&gt;</u>  is  the MAC address to add (or remove if the <b>--remove</b> is specified). The supported options
       are:

   <b>-r,</b> <b>--remove</b>
       Remove the MAC address instead of adding it.

   <b>-m,</b> <b>--mode</b> <b>&lt;mode&gt;</b>
       Select filtering mode. Valid options are <b>src</b> and <b>dst</b>, both of which may be specified as <u>src,dst</u>.  If  <b>src</b>
       is  specified,  the  MAC  address  will  added  as a <u>source</u> <u>MAC</u> match, while if <b>dst</b> is specified, the MAC
       address will be added as a <u>destination</u> <u>MAC</u> match. If both are specified, a  packet  will  be  matched  if
       <b>either</b> its source or destination MAC is the specified MAC address.

   <b>-s,</b> <b>--status</b>
       If  this  option  is  specified,  the current list of matched ips will be printed after inserting the MAC
       address. Otherwise, nothing will be printed.

   <b>-v,</b> <b>--verbose</b>
       Enable debug logging. Specify twice for even more verbosity.

   <b>-h,</b> <b>--help</b>
       Display a summary of the available options

</pre><h4><b>The</b> <b>STATUS</b> <b>command</b></h4><pre>
       The <u>status</u> command prints the current status of <u>xdp-filter</u>: Which interfaces it is loaded on, the current
       list of rules, and some statistics for how many packets have been processed in total, and how many  times
       each rule has been hit.

       The syntax for the <u>status</u> command is:

       <u>xdp-filter</u> <u>status</u> <u>[options]</u>

       Where the supported options are:

   <b>-v,</b> <b>--verbose</b>
       Enable debug logging. Specify twice for even more verbosity.

   <b>-h,</b> <b>--help</b>
       Display a summary of the available options

</pre><h4><b>The</b> <b>POLL</b> <b>command</b></h4><pre>
       The  <u>poll</u>  command  periodically  polls  the <u>xdp-filter</u> statistics map and prints out the total number of
       packets and bytes processed by <u>xdp-filter</u>, as well as the number in the last polling interval,  converted
       to  packets  (and  bytes)  per  second. This can be used to inspect the performance of <u>xdp-filter</u>, and to
       compare the performance of the different feature sets selectable by the <u>load</u> parameter.

       The syntax for the <u>poll</u> command is:

       <u>xdp-filter</u> <u>poll</u> <u>[options]</u>

       Where the supported options are:

   <b>-i,</b> <b>--interval</b> <b>&lt;interval&gt;</b>
       The polling interval, in milliseconds. Defaults to 1000 (1 second).

   <b>-v,</b> <b>--verbose</b>
       Enable debug logging. Specify twice for even more verbosity.

   <b>-h,</b> <b>--help</b>
       Display a summary of the available options

</pre><h4><b>Examples</b></h4><pre>
       To filter all packets arriving on port 80 on eth0, issue the following commands:

              # xdp-filter load eth0 -f tcp,udp
              # xdp-filter port 80

       To filter all packets <b>except</b> those  from  IP  address  fc00:dead:cafe::1  issue  the  following  commands
       (careful, this can lock you out of remote access!):

              # xdp-filter load eth0 -f ipv6 -p deny
              # xdp-filter ip fc00:dead:cafe::1 -m src

       To  allow  packets from <b>either</b> IP fc00:dead:cafe::1 <b>or</b> arriving on port 22, issue the following (careful,
       this can lock you out of remote access!):

              # xdp-filter load eth0 -f ipv6,tcp -p deny
              # xdp-filter port 22
              # xdp-filter ip fc00:dead:cafe::1 -m src

</pre><h4><b>BUGS</b></h4><pre>
       Please report any bugs on Github: <u>https://github.com/xdp-project/xdp-tools/issues</u>

</pre><h4><b>AUTHOR</b></h4><pre>
       xdp-filter was written by Toke Høiland-Jørgensen and Jesper Dangaard Brouer.  This man page  was  written
       by Toke Høiland-Jørgensen.

V1.5.1                                         SEPTEMBER  5, 2022                                  <u><a href="../man8/xdp-filter.8.html">xdp-filter</a></u>(8)
</pre>
 </div>
</div></section>
</div>
</body>
</html>