<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pacemaker - Part of the Pacemaker cluster resource manager</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/pacemaker-cli-utils">pacemaker-cli-utils_3.0.0-2ubuntu1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       Pacemaker - Part of the Pacemaker cluster resource manager

</pre><h4><b>SYNOPSIS</b></h4><pre>
       cibadmin &lt;command&gt; [options]

</pre><h4><b>DESCRIPTION</b></h4><pre>
       query and edit the Pacemaker configuration

</pre><h4><b>OPTIONS</b></h4><pre>
   <b>Help</b> <b>Options:</b>
       <b>-h</b>, <b>--help</b>
              Show help options

       <b>--help-all</b>
              Show all help options

       <b>--help-commands</b>
              Show command help

       <b>--help-data</b>
              Show data help

       <b>--help-additional</b>
              Show additional options

   <b>Commands:</b>
       <b>-u</b>, <b>--upgrade</b>
              Upgrade the configuration to the latest syntax

       <b>-Q</b>, <b>--query</b>
              Query the contents of the CIB

       <b>-E</b>, <b>--erase</b>
              Erase the contents of the whole CIB

       <b>-B</b>, <b>--bump</b>
              Increase the CIB's epoch value by 1

       <b>-C</b>, <b>--create</b>
              Create an object in the CIB (will fail if object already exists)

       <b>-M</b>, <b>--modify</b>
              Find object somewhere in CIB's XML tree and update it (fails if object does not exist unless <b>-c</b> is
              also specified)

       <b>-P</b>, <b>--patch</b>
              Supply an update in the form of an XML diff (see <a href="../man8/crm_diff.8.html">crm_diff</a>(8))

       <b>-R</b>, <b>--replace</b>
              Recursively replace an object in the CIB

       <b>-D</b>, <b>--delete</b>
              Delete  first object matching supplied criteria (for example, &lt;op id="rsc1_op1" name="monitor"/&gt;).
              The XML element name and all attributes must match in order for the element to be deleted.

       <b>-d</b>, <b>--delete-all</b>
              When used with <b>--xpath</b>, remove all matching objects in the configuration instead of just the first
              one

       <b>-a</b>, <b>--empty</b>=<u>[schema]</u>
              Output an empty CIB. Accepts an optional schema name argument to use as the  validate-with  value.
              If no schema is given, the latest will be used.

       <b>-5</b>, <b>--md5-sum</b>
              Calculate the on-disk CIB digest

       <b>-6</b>, <b>--md5-sum-versioned</b>
              Calculate an on-the-wire versioned CIB digest

   <b>Data:</b>
       <b>-X</b>, <b>--xml-text</b>=<u>value</u>
              Retrieve XML from the supplied string

       <b>-x</b>, <b>--xml-file</b>=<u>value</u>
              Retrieve XML from the named file

       <b>-p</b>, <b>--xml-pipe</b>
              Retrieve XML from stdin

   <b>Additional</b> <b>Options:</b>
       <b>-f</b>, <b>--force</b>
              Force the action to be performed

       <b>-t</b>, <b>--timeout</b>=<u>value</u>
              Time (in seconds) to wait before declaring the operation failed

       <b>-U</b>, <b>--user</b>=<u>value</u>
              Run  the  command  with  permissions  of  the  named  user  (valid only for the root and hacluster
              accounts)

       <b>-s</b>, <b>--sync-call</b>
              Wait for call to complete before returning

       <b>-o</b>, <b>--scope</b>=<u>value</u>
              Limit scope of operation to specific section of CIB Valid values: configuration, nodes, resources,
              constraints, crm_config, rsc_defaults,

       op_defaults, acls, fencing-topology, tags, alerts, status
              If both <b>--scope</b>/-o and <b>--xpath</b>/-a are specified, the last one to appear takes effect

       <b>-A</b>, <b>--xpath</b>=<u>value</u>
              A valid XPath to use instead of <b>--scope</b>/-o If both <b>--scope</b>/-o and <b>--xpath</b>/-a  are  specified,  the
              last one to appear takes effect

       <b>-e</b>, <b>--node-path</b>
              When   performing   XPath   queries,   return   paths   of   any   matches   found  (for  example,
              "/cib/configuration/resources/clone[@id='dummy-clone']/primitive[@id='dummy']")

       <b>-S</b>, <b>--show-access</b>=<u>[value]</u>
              Whether to use syntax highlighting for  ACLs  (with  <b>-Q</b>/--query  and  <b>-U</b>/--user)  Allowed  values:
              'color' (default for terminal), 'text' (plain text, default for non-terminal),

       'namespace', or 'auto' (use default value)
              Default value: 'auto'

       <b>--score</b>
              Treat  new  attribute  values  as  atomic  score  updates where possible (with <b>--modify</b>/-M).  This
              currently happens by default and cannot be disabled, but this default behavior is  deprecated  and
              will be removed in a future release. Set this flag if this behavior is desired.  This option takes
              effect  when  updating XML attributes. For an attribute named "name", if the new value is "name++"
              or "name+=X" for some score X, the new value is set as follows: If attribute "name" is not already
              set to some value in the element being updated, the new value is set as a literal string.  If  the
              new value is "name++", then the attribute is set to its existing value (parsed as a score) plus 1.
              If  the  new  value is "name+=X" for some score X, then the attribute is set to its existing value
              plus X, where the existing value and X are parsed and added as scores.  Scores are integer  values
              capped  at  INFINITY  and  <b>-INFINITY</b>.   Refer  to  Pacemaker Explained for more details on scores,
              including how they are parsed and added.

       <b>-c</b>, <b>--allow-create</b>
              (Advanced) Allow target of <b>--modify</b>/-M to be created if it does not exist

       <b>-n</b>, <b>--no-children</b>
              (Advanced) When querying an object, do not include its children in the result

       <b>-N</b>, <b>--node</b>=<u>value</u>
              (Advanced) Send command to the specified host

   <b>Application</b> <b>Options:</b>
       -$, <b>--version</b>
              Display software version and exit

       <b>-V</b>, <b>--verbose</b>
              Increase debug output (may be specified multiple times)

</pre><h4><b>EXAMPLES</b></h4><pre>
       Query the configuration:

              # cibadmin --query

       Query just the cluster options configuration:

              # cibadmin --query --scope crm_config

       Query all 'target-role' settings:

              # cibadmin --query --xpath "//nvpair[@name='target-role']"

       Remove all 'is-managed' settings:

              # cibadmin --delete-all --xpath "//nvpair[@name='is-managed']"

       Remove the resource named 'old':

              # cibadmin --delete --xml-text '&lt;primitive id="old"/&gt;'

       Remove all resources from the configuration:

              # cibadmin --replace --scope resources --xml-text '&lt;resources/&gt;'

       Replace complete configuration with contents of $HOME/pacemaker.xml:

              # cibadmin --replace --xml-file $HOME/pacemaker.xml

       Replace constraints section of configuration with contents of $HOME/constraints.xml:

              # cibadmin --replace --scope constraints --xml-file $HOME/constraints.xml

       Increase configuration version to prevent old configurations from being loaded accidentally:

              # cibadmin --modify --score --xml-text '&lt;cib admin_epoch="admin_epoch++"/&gt;'

       Edit the configuration with your favorite $EDITOR:

              # cibadmin --query &gt; $HOME/local.xml

              # $EDITOR $HOME/local.xml

              # cibadmin --replace --xml-file $HOME/local.xml

       Assuming terminal, render configuration in color (green for writable, blue for readable, red for  denied)
       to visualize permissions for user tony:

              # cibadmin --show-access=color --query --user tony | less -r

   <b>SEE</b> <b>ALSO:</b>
              <a href="../man8/crm.8.html">crm</a>(8), <a href="../man8/pcs.8.html">pcs</a>(8), <a href="../man8/crm_shadow.8.html">crm_shadow</a>(8), <a href="../man8/crm_diff.8.html">crm_diff</a>(8)

</pre><h4><b>AUTHOR</b></h4><pre>
       Written by Andrew Beekhof and the Pacemaker project contributors

Pacemaker 3.0.0                                     June 2025                                       <u><a href="../man8/PACEMAKER.8.html">PACEMAKER</a></u>(8)
</pre>
 </div>
</div></section>
</div>
</body>
</html>