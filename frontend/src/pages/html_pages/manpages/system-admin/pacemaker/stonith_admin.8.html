<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pacemaker - Part of the Pacemaker cluster resource manager</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/pacemaker-cli-utils">pacemaker-cli-utils_3.0.0-2ubuntu1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       Pacemaker - Part of the Pacemaker cluster resource manager

</pre><h4><b>SYNOPSIS</b></h4><pre>
       stonith_admin &lt;command&gt; [&lt;options&gt;]

</pre><h4><b>DESCRIPTION</b></h4><pre>
       stonith_admin - Access the Pacemaker fencing API

</pre><h4><b>OPTIONS</b></h4><pre>
   <b>Help</b> <b>Options:</b>
       -?, <b>--help</b>
              Show help options

       <b>--help-all</b>
              Show all help options

       <b>--help-output</b>
              Show output help

       <b>--help-definition</b>
              Show device definition help

       <b>--help-queries</b>
              Show query help

       <b>--help-fence</b>
              Show fence help

       <b>--help-additional</b>
              Show additional options

   <b>Output</b> <b>Options:</b>
       <b>--output-as</b>=<u>FORMAT</u>
              Specify output format as one of: text (default), html, xml

       <b>--output-to</b>=<u>DEST</u>
              Specify file name for output (or "-" for stdout)

       <b>--html-cgi</b>
              Add CGI headers (requires <b>--output-as</b>=<u>html</u>)

       <b>--html-stylesheet</b>=<u>URI</u>
              Link to an external stylesheet (requires <b>--output-as</b>=<u>html</u>)

       <b>--html-title</b>=<u>TITLE</u>
              Specify a page title (requires <b>--output-as</b>=<u>html</u>)

   <b>Device</b> <b>Definition</b> <b>Commands:</b>
       <b>-R</b>, <b>--register</b>=<u>DEVICE</u>
              Register the named stonith device. Requires: <b>--agent</b>.  Optional: <b>--option</b>, <b>--env-option</b>.

       <b>-D</b>, <b>--deregister</b>=<u>DEVICE</u>
              De-register the named stonith device.

       <b>-r</b>, <b>--register-level</b>=<u>TARGET</u>
              Register  a stonith level for the named target, specified as one of NAME, @PATTERN, or ATTR=VALUE.
              Requires: <b>--index</b> and one or more <b>--device</b> entries.

       <b>-d</b>, <b>--deregister-level</b>=<u>TARGET</u>
              Unregister a stonith level for the named target,  specified  as  for  <b>--register-level</b>.  Requires:
              <b>--index</b>

   <b>Queries:</b>
       <b>-l</b>, <b>--list</b>=<u>HOST</u>
              List devices that can terminate the specified host.  Optional: <b>--timeout</b>

       <b>-L</b>, <b>--list-registered</b>
              List all registered devices. Optional: <b>--timeout</b>.

       <b>-I</b>, <b>--list-installed</b>
              List all installed devices. Optional: <b>--timeout</b>.

       <b>-s</b>, <b>--list-targets</b>=<u>DEVICE</u>
              List the targets that can be fenced by the named device. Optional: <b>--timeout</b>.

       <b>-M</b>, <b>--metadata</b>
              Show agent metadata. Requires: <b>--agent</b>.  Optional: <b>--timeout</b>.

       <b>-Q</b>, <b>--query</b>=<u>DEVICE</u>
              Check the named device's status. Optional: <b>--timeout</b>.

       <b>-H</b>, <b>--history</b>=<u>NODE</u>
              Show last successful fencing operation for named node (or '*' for all nodes). Optional: <b>--timeout</b>,
              <b>--cleanup</b>,  <b>--quiet</b>  (show only the operation's epoch timestamp), <b>--verbose</b> (show all recorded and
              pending operations), <b>--broadcast</b> (update history from all nodes available).

       <b>-h</b>, <b>--last</b>=<u>NODE</u>
              Indicate when the named node was last fenced.  Optional: <b>--as-node-id</b>.

       <b>-K</b>, <b>--validate</b>
              Validate a fence device  configuration.   Requires:  <b>--agent</b>.  Optional:  <b>--option</b>,  <b>--env-option</b>,
              <b>--quiet</b> (print no output, only return status).

   <b>Fencing</b> <b>Commands:</b>
       <b>-F</b>, <b>--fence</b>=<u>HOST</u>
              Fence named host. Optional: <b>--timeout</b>, <b>--tolerance</b>, <b>--delay</b>.

       <b>-U</b>, <b>--unfence</b>=<u>HOST</u>
              Unfence named host. Optional: <b>--timeout</b>, <b>--tolerance</b>, <b>--delay</b>.

       <b>-B</b>, <b>--reboot</b>=<u>HOST</u>
              Reboot named host. Optional: <b>--timeout</b>, <b>--tolerance</b>, <b>--delay</b>.

       <b>-C</b>, <b>--confirm</b>=<u>HOST</u>
              Tell cluster that named host is now safely down.

   <b>Additional</b> <b>Options:</b>
       <b>-c</b>, <b>--cleanup</b>
              Cleanup wherever appropriate. Requires <b>--history</b>.

       <b>-b</b>, <b>--broadcast</b>
              Broadcast wherever appropriate.

       <b>-a</b>, <b>--agent</b>=<u>AGENT</u>
              The agent to use (for example, fence_xvm; with <b>--register</b>, <b>--metadata</b>, <b>--validate</b>).

       <b>-o</b>, <b>--option</b>=<u>PARAM</u>
              Specify  a  device  configuration  parameter  as NAME=VALUE (may be specified multiple times; with
              <b>--register</b>, <b>--validate</b>).

       <b>-e</b>, <b>--env-option</b>=<u>PARAM</u>
              Specify a device configuration  parameter  with  the  specified  name,  using  the  value  of  the
              environment  variable of the same name prefixed with OCF_RESKEY_ (may be specified multiple times;
              with <b>--register</b>, <b>--validate</b>).

       <b>-T</b>, <b>--tag</b>=<u>TAG</u>
              Identify fencing operations in logs with the specified tag; useful when  multiple  entities  might
              invoke stonith_admin (used with most commands).

       <b>-v</b>, <b>--device</b>=<u>DEVICE</u>
              Device  ID  (with  <b>--register-level</b>,  device  to  associate  with  a  given host and level; may be
              specified multiple times) (with <b>--validate</b>, name to use to load CIB secrets).

       <b>-i</b>, <b>--index</b>=<u>LEVEL</u>
              The stonith level (1-9) (with <b>--register-level</b>, <b>--deregister-level</b>).

       <b>-t</b>, <b>--timeout</b>=<u>SECONDS</u>
              Operation timeout in seconds (default 120; used with most commands).

       <b>-y</b>, <b>--delay</b>=<u>SECONDS</u>
              Apply a fencing delay in seconds. Any static/random delays from pcmk_delay_base/max will be added,
              otherwise all disabled with the value <b>-1</b> (default 0; with <b>--fence</b>, <b>--reboot</b>, <b>--unfence</b>).

       <b>-n</b>, <b>--as-node-id</b>
              (Advanced) The supplied node is the corosync node ID (with <b>--last</b>).

       <b>--tolerance</b>=<u>SECONDS</u>
              (Advanced) Do nothing if an equivalent <b>--fence</b> request  succeeded  less  than  this  many  seconds
              earlier (with <b>--fence</b>, <b>--unfence</b>, <b>--reboot</b>).

   <b>Application</b> <b>Options:</b>
       -$, <b>--version</b>
              Display software version and exit

       <b>-V</b>, <b>--verbose</b>
              Increase debug output (may be specified multiple times)

       <b>-q</b>, <b>--quiet</b>
              Be less descriptive in output.

</pre><h4><b>AUTHOR</b></h4><pre>
       Written by Andrew Beekhof and the Pacemaker project contributors

</pre><h4><b>REPORTING</b> <b>BUGS</b></h4><pre>
       Report bugs to https://bugs.clusterlabs.org/enter_bug.cgi?product=Pacemaker

Pacemaker 3.0.0                                     June 2025                                       <u><a href="../man8/PACEMAKER.8.html">PACEMAKER</a></u>(8)
</pre>
 </div>
</div></section>
</div>
</body>
</html>