<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ganesha-cache-config - NFS Ganesha Cache Configuration File</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/nfs-ganesha">nfs-ganesha_6.5-5_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       ganesha-cache-config - NFS Ganesha Cache Configuration File

</pre><h4><b>SYNOPSIS</b></h4><pre>
       /etc/ganesha/ganesha.conf

</pre><h4><b>DESCRIPTION</b></h4><pre>
       NFS-Ganesha reads the configuration data from: | /etc/ganesha/ganesha.conf

       This file lists NFS-Ganesha Cache config options.

   <b>MDCACHE</b> <b>{}</b>
       <b>NParts</b> <b>(uint32,</b> <b>range</b> <b>1</b> <b>to</b> <b>32633,</b> <b>default</b> <b>7)</b>
              Partitions in the MDCACHE tree.

       <b>Cache_Size(uint32,</b> <b>range</b> <b>1</b> <b>to</b> <b>UINT32_MAX,</b> <b>default</b> <b>32633)</b>
              Per-partition hash table size.

       <b>Use_Getattr_Directory_Invalidation(bool,</b> <b>default</b> <b>false)</b>
              Use getattr for directory invalidation.

       <b>Dir_Chunk(uint32,</b> <b>range</b> <b>0</b> <b>to</b> <b>UINT32_MAX,</b> <b>default</b> <b>128)</b>
              Size  of  per-directory  dirent cache chunks, 0 means directory chunking is not enabled. Dir_Chunk
              should always be enabled. Most FSAL modules  especially  FSAL_RGW/FSAL_GLUSTER  need  it  to  make
              readdir work well.

       <b>Detached_Mult(uint32,</b> <b>range</b> <b>1</b> <b>to</b> <b>UINT32_MAX,</b> <b>default</b> <b>1)</b>
              Max number of detached directory entries expressed as a multiple of the chunk size.

       <b>Entries_HWMark(uint32,</b> <b>range</b> <b>1</b> <b>to</b> <b>UINT32_MAX,</b> <b>default</b> <b>100000)</b>
              The point at which object cache entries will start being reused.

       <b>Entries_Release_Size(uint32,</b> <b>range</b> <b>0</b> <b>to</b> <b>UINT32_MAX,</b> <b>default</b> <b>100)</b>
              The  number  of  entries  attempted  to  release  each time when the handle cache has exceeded the
              entries high water mark.

       <b>Chunks_HWMark(uint32,</b> <b>range</b> <b>1</b> <b>to</b> <b>UINT32_MAX,</b> <b>default</b> <b>1000)</b>
              The point at which dirent cache chunks will start being reused.

       <b>Chunks_LWMark(uint32,</b> <b>range</b> <b>1</b> <b>to</b> <b>UINT32_MAX,</b> <b>default</b> <b>1000)</b>
              The target for reaping dirent cache chunks to drain the cache.

              Entries_HWMark, Dir_Chunk, Chunks_HWMark, Chunks_LWMark all play together.  While a  dirent  chunk
              is  cached,  the  object  cache entries that are part of that dirent chunk will be retained in the
              cache indefinitely. Note that this means that possibly Chunks_LWMark * Dir_Chunk entries  will  be
              retained.  If this is larger than Entries_HWMark, then the object cache may end up remaining above
              Entries_HWMark for a significant time. Consider the average size of the directories and the number
              of directories desired to be maintained in the cache and set Chunks_LWMark appropriately.

              Note that the Chunks_LWMark defaults to the same value as Chunks_HWMark and these are set to 1/100
              of  Entries_HWMark  suggesting  an  average  directory  size  of  100.  It may be desirable to set
              Chunks_LWMark less than Chunks_HWMark if it is desirable to allow large directory  chunks  to  not
              immediately  be re-used, but it is desirable to in the short term drain the dirent cache down to a
              smaller number.

       <b>LRU_Run_Interval(uint32,</b> <b>range</b> <b>1</b> <b>to</b> <b>24</b> <b>*</b> <b>3600,</b> <b>default</b> <b>90)</b>
              Base interval in seconds between runs of the LRU cleaner thread.

       <b>Cache_FDs(bool,</b> <b>default</b> <b>true)</b>
              If "Cache_FDs" is set to false, the reaper thread aggressively closes FDs , significantly reducing
              the number of open FDs.  This will help to maintain a minimal number of open FDs.

              If "Cache_FDs" is set to true (default), FDs are cached, and the LRU reaper thread closes FDs only
              when the current open FD count reaches or exceeds the "fds_lowat" threshold.

              Note, this setting has no effect when Close_Fast is set to true.

       <b>Close_Fast(bool,</b> <b>default</b> <b>false)</b>
              Whether to close files immediately after opening files and using them for read/write/commit.

       <b>FD_Limit_Percent(uint32,</b> <b>range</b> <b>0</b> <b>to</b> <b>100,</b> <b>default</b> <b>99)</b>
              The percentage of the system-imposed maximum of  file  descriptors  at  which  Ganesha  will  deny
              requests.

       <b>FD_HWMark_Percent(uint32,</b> <b>range</b> <b>0</b> <b>to</b> <b>100,</b> <b>default</b> <b>90)</b>
              The  percentage  of  the  system-imposed maximum of file descriptors above which Ganesha will make
              greater efforts at reaping.

       <b>FD_LWMark_Percent(uint32,</b> <b>range</b> <b>0</b> <b>to</b> <b>100,</b> <b>default</b> <b>50)</b>
              The percentage of the system-imposed maximum of file descriptors below which Ganesha will not reap
              file descriptors.

       <b>Reaper_Work(uint32,</b> <b>range</b> <b>1</b> <b>to</b> <b>2000,</b> <b>default</b> <b>0)</b>
              Roughly, the amount of work to do on  each  pass  through  the  thread  under  normal  conditions.
              (Ideally,  a  multiple  of  the  number  of  lanes.)   <u>This</u>  <u>setting</u>  <u>is</u>  <u>deprecated.</u>   <u>Please</u> <u>use</u>
              <u>Reaper_Work_Per_Lane</u>

       <b>Reaper_Work_Per_Lane(uint32,</b> <b>range</b> <b>1</b> <b>to</b> <b>UINT32_MAX,</b> <b>default</b> <b>50)</b>
              This is the number of handles per lane to scan when performing  LRU  maintenance.   This  task  is
              performed by the Reaper thread.

       <b>Biggest_Window(uint32,</b> <b>range</b> <b>1</b> <b>to</b> <b>100,</b> <b>default</b> <b>40)</b>
              The largest window (as a percentage of the system-imposed limit on FDs) of work that we will do in
              extremis.

       <b>Required_Progress(uint32,</b> <b>range</b> <b>1</b> <b>to</b> <b>50,</b> <b>default</b> <b>5)</b>
              Percentage of progress toward the high water mark required in in a pass through the thread when in
              extremis

       <b>Futility_Count(uint32,</b> <b>range</b> <b>1</b> <b>to</b> <b>50,</b> <b>default</b> <b>8)</b>
              Number of failures to approach the high watermark before we disable caching, when in extremis.

       <b>Dirmap_HWMark(uint32,</b> <b>range</b> <b>1</b> <b>to</b> <b>UINT32_MAX,</b> <b>default</b> <b>10000)</b>
              The  point  at  which  dirmap  entries  are  reused.  This puts a practical limit on the number of
              simultaneous readdirs that may be in progress on an export for a  whence-is-name  FSAL  (currently
              only FSAL_RGW)

       <b>Files_Delegatable_Percent(int32,</b> <b>range</b> <b>10</b> <b>to</b> <b>90,</b> <b>default</b> <b>90)</b>
              Total number of files ganesha can delegate to clients as a percent of Entries_HWMark

       <b>Use_Cached_Owner_On_Owner_Override(bool,</b> <b>true)</b>
              This  option  allows  mdcache_test_access  to  use the cached owner value for an object in case of
              owner override, even if the cache entry is not up to date. This  could  potentially  lead  to  the
              wrong  result,  but  can significantly improve performance saving the need to update attributes on
              many read/write operations.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <u><a href="../man8/ganesha-config.8.html">ganesha-config</a></u>(8)

                                                  Apr 18, 2025                           <u><a href="../man8/GANESHA-CACHE-CONFIG.8.html">GANESHA-CACHE-CONFIG</a></u>(8)
</pre>
 </div>
</div></section>
</div>
</body>
</html>