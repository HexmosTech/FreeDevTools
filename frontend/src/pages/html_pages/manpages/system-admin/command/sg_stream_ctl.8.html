<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>sg_stream_ctl - send SCSI STREAM CONTROL or GET STREAM STATUS command</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/sg3-utils">sg3-utils_1.48-2ubuntu1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       sg_stream_ctl - send SCSI STREAM CONTROL or GET STREAM STATUS command

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>sg_stream_ctl</b>  [<u>--brief</u>]  [<u>--close</u>]  [<u>--ctl=CTL</u>]  [<u>--get</u>]  [<u>--help</u>]  [<u>--id=SID</u>]  [<u>--maxlen=LEN</u>]  [<u>--open</u>]
       [<u>--readonly</u>] [<u>--verbose</u>] [<u>--version</u>] <u>DEVICE</u>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       Sends a SCSI STREAM CONTROL or GET STREAM STATUS command to the <u>DEVICE</u>.  These  commands,  together  with
       WRITE  STREAM(16  and  32)  and  several fields in the Block Limits Extension VPD page [0xb7] support the
       streams concept.  The stream commands were added in SBC-4 draft 8 (September 2015).

       Both STREAM CONTROL and GET  STREAM  STATUS  commands  expect  data  from  the  <u>DEVICE</u>  (referred  to  as
       'data-in').  In  the case of STREAM CONTROL only the 'open' (STR_CTL&lt;--0x1) actually needs the data-in as
       it contains the "Assigned stream id" if the open was successful. The assigned stream id should be used by
       subsequent WRITE STREAM commands and ultimately by the STREAM CONTROL close (STR_CTL&lt;--0x2). Valid stream
       ids are between 1 and 65535 inclusive.

</pre><h4><b>OPTIONS</b></h4><pre>
       Arguments to long options are mandatory for short options as well.

       <b>-b</b>, <b>--brief</b>
              this option reduces the output of the GET STREAM STATUS command to just one  number  (in  decimal)
              per  line sent to stdout. Those numbers are the currently open stream ids. If an error occurs then
              -1 is sent to stdout and error related messages are sent to stderr. The default is to  print  more
              words (and fields) from the GET STREAM STATUS response.

       <b>-c</b>, <b>--close</b>
              selects  the  STREAM  CONTROL  command and sets STR_CTL&lt;--0x2 (i.e. 'close').  The <u>--id=SID</u> option
              should also be given because it defaults to 0 which is not a valid stream id.

       <b>-C</b>, <b>--ctl</b>=<u>CTL</u>
              <u>CTL</u> is the value placed in the STR_CTL field of the STREAM CONTROL command (cdb). It is a two  bit
              field  so  has  4  variants:  0  and 3 are reserved; 1 opens are new stream and 2 closes the given
              stream id. '--ctl=1' is equivalent to '--open' while '--ctl=2' is equivalent to '--close'.

       <b>-g</b>, <b>--get</b>
              selects the GET STREAM STATUS command. If the <u>--id=SID</u> option  is  also  given  the  the  response
              starts  lists  open stream ids from and including <u>SID</u>. If the <u>--id=SID</u> option is not given (or <u>SID</u>
              is 0) then all open stream id will be returned in the response (data-in) as long as the allocation
              length (defaults to 248 bytes which can be overridden by the <u>--maxlen=LEN</u> option) is long  enough.
              This  is  the  default  action  of this utility (i.e. GET STREAM STATUS command) if no "selecting"
              options are given.

       <b>-h</b>, <b>--help</b>
              output the usage message then exit.

       <b>-i</b>, <b>--id</b>=<u>SID</u>
              <u>SID</u> is a stream id, a value between 1 and 65535. It is used by STREAM CONTROL (close) to  identify
              the  stream  to close. It is used by the GET STREAM STATUS command as the starting stream id (from
              and including); so stream ids that are less than <u>SID</u> will not appear in the response.

       <b>-m</b>, <b>--maxlen</b>=<u>LEN</u>
              <u>LEN</u> is the maximum length the response can be. It becomes the  ALLOCATION  LENGTH  field  in  both
              commands.  The default (in the absence of this option) is 8 bytes for STREAM CONTROL and 248 bytes
              for GET STREAM STATUS.

       <b>-o</b>, <b>--open</b>
              selects the STREAM CONTROL command and sets STR_CTL&lt;--0x1 (i.e. 'open').  If the  <u>--id=SID</u>  option
              is  given  then it is ignored. The user should observe the response as the "Assigned stream id" is
              printed on stdout if the open is successful, if not '-1' is sent to stdout and error messages  are
              sent to stderr. If the <u>--brief</u> option is also given then the only thing sent to stdout is a number
              of the assigned stream id (1 to 65535 inclusive) or '-1' if there is an error.

       <b>-r</b>, <b>--readonly</b>
              this  option  sets a 'read-only' flag when the underlying operating system opens the given <u>DEVICE</u>.
              This may not work since operating systems can not easily determine whether a pass-through  command
              is  a  logical  read  or write operation on the media (or its metadata) so they take a risk averse
              stance and require read-write type  permissions  on  the  <u>DEVICE</u>  open  irrespective  of  what  is
              performed by the pass-through.

       <b>-v</b>, <b>--verbose</b>
              increase the level of verbosity, (i.e. debug output).

       <b>-V</b>, <b>--version</b>
              print the version string and then exit.

</pre><h4><b>NOTES</b></h4><pre>
       There  are  no  special read commands for streams. This implies that "normal" READs (6, 10, 12, 16 or 32)
       can be used. Note that when a stream is closed, all resources associated with that stream id are removed,
       apart from the data in the written LBAs. To make sure the reading back data is not delayed  too  much  by
       error  recovery  (in  the  presence of media errors) the user may set the RECOVERY TIME LIMIT field (RTL,
       units for non-zero values: milliseconds) in the 'Read-write error recovery' mode page. This can  be  done
       with the sdparm utility.

       The SCSI WRITE STREAM (16 and 32) commands can be found in the sg_write_x utility in this package.

</pre><h4><b>EXIT</b> <b>STATUS</b></h4><pre>
       The exit status of sg_stream_ctl is 0 when it is successful. Otherwise see the <a href="../man8/sg3_utils.8.html">sg3_utils</a>(8) man page.

</pre><h4><b>AUTHORS</b></h4><pre>
       Written by Douglas Gilbert.

</pre><h4><b>REPORTING</b> <b>BUGS</b></h4><pre>
       Report bugs to &lt;dgilbert at interlog dot com&gt;.

</pre><h4><b>COPYRIGHT</b></h4><pre>
       Copyright Â© 2018 Douglas Gilbert
       This  software  is  distributed  under  a  BSD-2-Clause  license.  There  is  NO  warranty;  not even for
       MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b>sg_vpd,sg_write_x(sg3_utils);</b> <b>sdparm(sdparm)</b>

sg3_utils-1.43                                     March 2018                                   <u><a href="../man8/SG_STREAM_CTL.8.html">SG_STREAM_CTL</a></u>(8)
</pre>
 </div>
</div></section>
</div>
</body>
</html>