<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>opa2rm</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/opa-fastfabric">opa-fastfabric_10.10.3.0.11-1ubuntu3_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       opa2rm

       Permits  the  generation  of  configuration files for FastFabric or resource managers from a topology xml
       file.

       When using a topology spreadsheet and opaxlattopology to design and prepare for  deployment  verification
       of  a  fabric,  opa2rm  may  be  used to generate resource manager configuration from the planned cluster
       design. Using this approach will allow the resulting configuration files to be  complete,  even  if  some
       nodes in the fabric have not yet been installed or made operational. Alternatively, opareport -o topology
       can be used to generate a topology XML file for input to opa2rm. In this case, only the currently present
       nodes will be included.

       When working with SLURM, the opa2rm -o slurm option should typically be used. This option will generate a
       SLURM  configuration  file that lists the hosts directly connected to each switch in a syntax that can be
       used by SLURM's topology/tree plugin. It also generates a single "fake" switch shown  as  connecting  all
       the  other  switches together. This approach allows for SLURM job placement to be improved while avoiding
       undo overhead in SLURM. This option also allows for topologies that are not a pure fat-tree.

       When the configuration is a pure fat tree or oversubscribed fat tree, the opa2rm -o slurmfull option  may
       be  used  to generate the full description of the fabric, including all intermediate and core switches in
       the fat tree topology. This option may permit better job placement optimization than the output from  the
       opa2rm -o slurm option. However for larger fabrics, it may also increase the overhead within SLURM.

</pre><h4><b>Syntax</b></h4><pre>
       opa2rm [-v] [-q] -o  <u>output</u> [-g|-u|-t] [-F  <u>point</u>] [-p  <u>prefix</u>] [-s  <u>suffix</u>] topology_input

</pre><h4><b>Options</b></h4><pre>
       --help

                 Produces full help text.

       -v/--verbose

                 Specifies verbose output.

       -q/--quiet

                 Disables progress reports.

       -o/--output <u>output</u>

                 Specifies the output type:

                 slurm     SLURM tree nodes. Supports a variety of topologies.

                 slurmful  SLURM fat tree nodes and ISLs. Only supports pure trees.

                 hosts     FastFabric hosts file omitting this host

       -g/--guid

                 Specifies the output switch GUIDs instead of names.

       -u/--underscore

                 Changes spaces in switch names to underscores.

       -t/--trunc

                 Truncates switch names at first space.

                 This will treat large Director switches as a single, big switch.

                 If  -g,  -u  or  -t are not specified, the switch name's suffix, after the first space, will be
                 placed at the start of the name. For example, 'core5 Leaf 101' becomes 'Leaf101_core5'.

       -F/--focus <u>point</u>

                 Specifies the focus area for output. Limits the scope of output to links that match any of  the
                 given focus points.

       -p/--prefix <u>prefix</u>

                 Specifies the prefix to prepend to all FI hostnames.

       -s/--suffix <u>suffix</u>

                 Specifies the suffix to append to all FI hostnames.

       topology_input

                 Specifies the topology_input file to use. '-' may be used to specify stdin.

</pre><h4><b>Point</b> <b>Syntax</b></h4><pre>
       node:<u>value</u>

                 <u>value</u> is node description (node name).

       node:<u>value1</u>:port:<u>value2</u>

                 <u>value1</u> is node description (node name); <u>value2</u> is port number.

       nodepat:<u>value</u>

                 <u>value</u> is glob pattern for node description (node name).

       nodepat:<u>value1</u>:port:<u>value2</u>

                 <u>value1</u> is glob pattern for node description (node name); <u>value2</u> is port number.

       nodetype:<u>value</u>

                 <u>value</u> is node type (SW or FI).

       nodetype:<u>value1</u>:port:<u>value2</u>

                 <u>value1</u> is node type (SW or FI); <u>value2</u> is port number.

       rate:<u>value</u>

                 <u>value</u> is string for rate (25g, 50g, 75g, 100g).

       mtucap:<u>value</u>

                 <u>value</u> is MTU size (2048, 4096, 8192, 10240); omits switch mgmt port 0.

       labelpat:<u>value</u>

                 <u>value</u> is glob pattern for cable label.

       lengthpat:<u>value</u>

                 <u>value</u> is glob pattern for cable length.

       cabledetpat:<u>value</u>

                 <u>value</u> is glob pattern for cable details.

       linkdetpat:<u>value</u>

                 <u>value</u> is glob pattern for link details.

       portdetpat:<u>value</u>

                 <u>value</u> is glob pattern for port details to value.

</pre><h4><b>Examples</b></h4><pre>
       opa2rm -o slurm topology.xml

       opa2rm -o slurm -p 'opa-' topology.xml

       opa2rm -o slurm -s '-opa' topology.xml

       opa2rm -o slurm -F 'nodepat:compute*' -F 'nodepat:opacore1 *'
       topology.xml

       opa2rm -o nodes -F 'nodedetpat:compute*' topology.xml

       opa2rm -o hosts topology.xml

Copyright(C) 2015-2019                          Intel Corporation                                      <u><a href="../man8/opa2rm.8.html">opa2rm</a></u>(8)
</pre>
 </div>
</div></section>
</div>
</body>
</html>