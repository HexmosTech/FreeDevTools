<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>astribank_is_starting - Mark / check is a Xorcom Astribank (xpp) is starting</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/dahdi">dahdi_3.1.0-2.1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       astribank_is_starting - Mark / check is a Xorcom Astribank (xpp) is starting

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>astribank_is_starting</b> <b>[-d]</b> <b>[-v]</b> <b>[-t</b> <u>timeout</u><b>]</b> <b>&lt;-a|-r|-w&gt;</b>

       <b>astribank_is_starting</b> <b>[-d]</b> <b>[-v]</b>

       <b>astribank_is_starting</b> <b>-h</b>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>astribank_is_starting</b>  is  an  internal  tool  used  by  various xpp scripts to mark that there may be an
       Astribank device currently initializing, and to check for that mark.

       Technically the mark is a SysV semaphore.

</pre><h4><b>OPTIONS</b></h4><pre>
       <b>-a</b>
              <b>Add.</b>  Set the mark. Should return 0 unless there's an error.

       <b>-r</b>
              <b>Remove.</b>  Reset the mark. Should return 0 unless there's an error.

       <b>-t</b><u>timeout</u>
              <b>Timeout.</b>  Set the timeout value for the <b>-w</b> option. Default is 60 seconds.

       <b>-w</b>
              <b>Wait.</b>  Wait for mark to be reset. Should return 0 unless there's an error.

       Without -a or -r: return 0 if the mark has been set, or a non-zero value otherwise.

       <b>-d</b>
              Print debug information to stderr.

       <b>-v</b>
              Verbose execution.

       <b>-h</b>
              Displays usage message.

</pre><h4><b>FILES</b></h4><pre>
       <b><a href="file:/proc/sysvipc/sem">/proc/sysvipc/sem</a></b>
              If set, the astribank should appear there with the ID 11211168 (0xAB11A0).  Naturally the  ID  (or
              rather, the usage of a semaphore in the first place) is an implementation detail that may change.

</pre><h4><b>NOTES</b></h4><pre>
       <b>astribank_is_starting</b>  is  used  to  mark  the  fact  that  an  Astribank  may be currently reenumerating
       (technically: distonnecting and connecting as a new USB device) after  loading  the  firmware.  Thus  the
       script that loads the firmware (/usr/share/dahdi/xpp_fxloader) uses this utility to set the mark.

       The  mark is reset by /usr/share/dahdi/waitfor_xpds , which is typically run by the DAHDI init script and
       waits for all Astribanks to finish loading.

       Q: Why do you use a semaphore?

       A: because, unlike the filesystem, it is writable at any given time.

</pre><h4><b>BUGS</b></h4><pre>
       Option ordering matter. The <b>-v</b> and <b>-d</b> options should precede the actions (<b>-a</b>, <b>-r</b> and <b>-w</b>).  The  <b>-t</b><u>timeout</u>
       option should precede the <b>-w</b> option.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <a href="../man3/semctl.3.html">semctl</a>(3)

</pre><h4><b>AUTHOR</b></h4><pre>
       This  manual  page  was  written  by Tzafrir Cohen &lt;<a href="mailto:tzafrir.cohen@xorcom.com">tzafrir.cohen@xorcom.com</a>&gt; .  Permission is granted to
       copy, distribute and/or modify this document under the terms of the GNU General Public License, Version 2
       any later version published by the Free Software Foundation.

       On  Debian  systems,  the  complete  text  of  the  GNU  General  Public  License   can   be   found   in
       /usr/share/common-licenses/GPL.

                                                 16 August 2009                         <u><a href="../man8/ASTRIBANK_IS_STARTING.8.html">ASTRIBANK_IS_STARTING</a></u>(8)
</pre>
 </div>
</div></section>
</div>
</body>
</html>