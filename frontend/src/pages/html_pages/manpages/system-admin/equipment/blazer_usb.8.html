<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>blazer_usb - Driver for Megatec/Q1 protocol USB based UPS equipment</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/nut-server">nut-server_2.8.3-2_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       blazer_usb - Driver for Megatec/Q1 protocol USB based UPS equipment

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>blazer_usb</b> -h

       <b>blazer_usb</b> -a <u>UPS_NAME</u> [<u>OPTIONS</u>]

</pre><h4><b>NOTE</b></h4><pre>
       This man page only documents the hardware-specific features of the blazer driver. For information about
       the core driver, see <b><a href="../man8/nutupsdrv.8.html">nutupsdrv</a></b>(8).

</pre><h4><b>NOTE</b></h4><pre>
       Please note that this driver is deprecated and will not receive new development. If it works for managing
       your devices — fine, but if you are running it to try setting up a new device, please consider the newer
       <b><a href="../man8/nutdrv_qx.8.html">nutdrv_qx</a></b>(8) instead, which should handle all <u>Q*</u> protocol variants for NUT.

       Please do also report if your device works with this driver, but <b><a href="../man8/nutdrv_qx.8.html">nutdrv_qx</a></b>(8) would not actually support
       it with any subdriver!

</pre><h4><b>SUPPORTED</b> <b>HARDWARE</b></h4><pre>
       The blazer driver is known to work with various UPSes from Blazer, Energy Sistem, Fenton Technologies,
       General Electric, Mustek and many others. The NUT compatibility table lists all the known supported
       models. Keep in mind, however, that other models not listed there may also be supported, but haven’t been
       tested.

       All devices with a serial interface (use the <b>blazer_ser</b> driver) and many with a USB interface (use the
       <b>blazer_usb</b> driver) are supported.

</pre><h4><b>EXTRA</b> <b>ARGUMENTS</b></h4><pre>
       You may need to override or provide defaults for some values, depending on the make and model of your
       UPS. The following are the ones that most likely will need changing (see <b><a href="../man5/ups.conf.5.html">ups.conf</a></b>(5)):

       <b>default.battery.voltage.high</b> <b>=</b> <u>value</u>
           Maximum battery voltage that is reached after about 12 to 24 hours charging. If you want the driver
           to report a guesstimated <b>battery.charge</b>, you need to specify this (see BATTERY CHARGE GUESSTIMATION).

       <b>default.battery.voltage.low</b> <b>=</b> <u>value</u>
           Minimum battery voltage just before the UPS automatically shuts down. If you want the driver to
           report a guesstimated <b>battery.charge</b>, you need to specify this (see BATTERY CHARGE GUESSTIMATION).

       <b>default.battery.voltage.nominal</b> <b>=</b> <u>value</u>, <b>override.battery.voltage.nominal</b> <b>=</b> <u>value</u>
           Some devices show a wrong nominal battery voltage (or none at all), so you may need to override or
           set a default value.

       <b>override.battery.packs</b> <b>=</b> <u>value</u>
           Some devices report a part of the total battery voltage. For instance, if <b>battery.voltage.nominal</b> is
           24 V, but it reports a <b>battery.voltage</b> of around 2 V, the number of <b>battery.packs</b> to correct this
           reading would be 12. The driver will attempt to detect this automatically, but if this fails somehow,
           you may want to override this value.

       <b>ondelay</b> <b>=</b> <u>value</u>
           Time to wait before switching on the UPS (minutes). Note that a value below 3 minutes, may cause
           earlier firmware versions to not switch on automatically, so it defaults to 3 minutes. The acceptable
           range is 0..9999 minutes.

       <b>offdelay</b> <b>=</b> <u>value</u>
           Time to wait before shutting down the UPS (seconds). This value is truncated to units of 6 seconds
           (less than 60 seconds) or 60 seconds (more than 60 seconds). Defaults to 30 seconds. The acceptable
           range is 12..600 seconds.

       <b>norating</b>
           Some UPSes will lock up if you attempt to read rating information from them. Setting this flag will
           make the driver skip this step.

       <b>novendor</b>
           Some UPSes will lock up if you attempt to read vendor information from them. Setting this flag will
           make the driver skip this step.

       <b>protocol</b> <b>=</b> <u>string</u>
           Skip autodetection of the protocol to use and only use the one specified. Supported values are
           <u>megatec</u>, <u>megatec/old</u>, <u>mustek</u> and <u>zinto</u>.

       <b>runtimecal</b> <b>=</b> <u>value,value,value,value</u>
           Parameter used in the (optional) runtime estimation. This takes two runtimes at different loads.
           Typically, this uses the runtime at full load and the runtime at half load. For instance, if your UPS
           has a rated runtime of 240 seconds at full load and 720 seconds at half load, you would enter

               runtimecal = 240,100,720,50

           The first load should always be higher than the second. If you have values available for loads other
           than 100 and 50 % respectively, you can use those too, but keep them spaced apart as far as
           reasonably possible. Just don’t get too close to no load (prediction of runtime depends more on idle
           load for the battery then).

       <b>chargetime</b> <b>=</b> <u>value</u>
           The time needed to fully recharge the battery after being fully discharged. If not specified, the
           driver defaults to 43200 seconds (12 hours). Only used if <b>runtimecal</b> is also specified.

       <b>idleload</b> <b>=</b> <u>value</u>
           Minimum battery load used by the driver to estimate the runtime. If not specified, the driver
           defaults to 10%. Only used if <b>runtimecal</b> is also specified.

   <b>USB</b> <b>INTERFACE</b> <b>ONLY</b>
       <b>port</b> <b>=</b> <u>string</u>
           Some <u>value</u> must be set, typically <b>auto</b>.

               <b>Note</b>
               This could be a device filesystem path like /dev/usb/hiddev0 but current use of libusb API
               precludes knowing and matching by such identifiers. They may also be inherently unreliable
               (dependent on re-plugging and enumeration order). At this time the actual <u>value</u> is ignored, but
               syntactically some <u>port</u> configuration must still be there.

       It is possible to control multiple UPS units simultaneously by running several instances of this driver,
       provided they can be uniquely distinguished by setting some combination of the <b>vendor</b>, <b>product</b>, <b>vendorid</b>,
       <b>productid</b>, <b>serial</b>, <b>bus</b> and/or <b>device</b> options detailed below. For devices or operating systems that do not
       provide sufficient information, the <b>allow_duplicates</b> option can be of use (limited and risky!)

       <b>vendorid</b> <b>=</b> <u>regex</u>, <b>productid</b> <b>=</b> <u>regex</u>, <b>vendor</b> <b>=</b> <u>regex</u>, <b>product</b> <b>=</b> <u>regex</u>, <b>serial</b> <b>=</b> <u>regex</u>
           Select a specific UPS, in case there is more than one connected via USB. Each option specifies an
           extended regular expression (see <b><a href="../man7/regex.7.html">regex</a></b>(7) for more information on regular expressions), which must
           match the UPS’s entire respective vendor/product/serial string values (minus any surrounding
           whitespace), or the whole 4-digit hexadecimal code for vendorid and productid.

           Try <b><a href="../man8/lsusb.8.html">lsusb</a></b>(8) or running this NUT driver with -DD command-line argument for finding out the strings to
           match.

           Examples:

           •   -x vendor="Foo.Corporation.*"

           •   -x vendorid="051d*" (APC)

           •   -x product=".*(Smart|Back)-?UPS.*"

       <b>bus</b> <b>=</b> <u>regex</u>
           Select a UPS on a specific USB bus or group of buses. The argument is a regular expression that must
           match the bus name where the UPS is connected (e.g.  bus="002" or bus="00[2-3]") as seen on Linux in
           <a href="file:/sys/bus/usb/devices">/sys/bus/usb/devices</a> or <b><a href="../man8/lsusb.8.html">lsusb</a></b>(8); including leading zeroes.

       <b>device</b> <b>=</b> <u>regex</u>
           Select a UPS on a specific USB device or group of devices. The argument is a regular expression that
           must match the device name where the UPS is connected (e.g.  device="001" or device="00[1-2]") as
           seen on Linux in <a href="file:/sys/bus/usb/devices">/sys/bus/usb/devices</a> or <b><a href="../man8/lsusb.8.html">lsusb</a></b>(8); including leading zeroes.

               <b>Note</b>
               device numbers are not guaranteed by the OS to be stable across re-boots or device re-plugging.

       <b>busport</b> <b>=</b> <u>regex</u>
           If supported by the hardware, OS and libusb on the particular deployment, this option should allow to
           specify physical port numbers on an USB hub, rather than logical device enumeration values, and in
           turn — this should be less volatile across reboots or re-plugging. The value may be seen in the USB
           topology output of lsusb -tv on systems with that tool, for example.

               <b>Note</b>
               this option is not practically supported by some NUT builds (it should be ignored with a warning
               then), and not by all systems that NUT can run on.

       <b>allow_duplicates</b>
           If you have several UPS devices which may not be uniquely identified by the options above (e.g. only
           <u>VID:PID</u> can be discovered there), this flag allows each driver instance where it is set to take the
           first match if available, or proceed to try another.

           Normally the driver initialization would abort at this point claiming "Resource busy" or similar
           error, assuming that the otherwise properly matched device is unique — and some other process already
           handles it.

               <b>Warning</b>
               This feature is inherently non-deterministic! The association of driver instance name to actual
               device may vary between runs!

               If you only care to know that <b>at</b> <b>least</b> one of your no-name UPSes is online, this option can help.

               If you must really know <b>which</b> one, it will not!

       <b>usb_set_altinterface</b> <b>=</b> <u>bAlternateSetting</u>
           Force redundant call to usb_set_altinterface(), especially if needed for devices serving multiple USB
           roles where the UPS is not represented by the interface number 0 (default).

       <b>usb_config_index</b>, <b>usb_hid_rep_index</b>, <b>usb_hid_desc_index</b>, <b>usb_hid_ep_in</b>, <b>usb_hid_ep_out</b>
           Force use of specific interface, endpoint, descriptor index etc. numbers, rather than defaulting to <u>0</u>
           (rarely other values in certain drivers for some devices known to use non-zero numbers). Specified as
           a hexadecimal number.

           As a rule of thumb for usb_hid_desc_index discovery, you can see larger wDescriptorLength values
           (roughly 600+ bytes) in reports of lsusb or similar tools.

       <b>LIBUSB_DEBUG</b> <b>=</b> <u>INTEGER</u>
           Run-time troubleshooting of USB-capable NUT drivers can involve not only raising the common NUT debug
           verbosity (e.g. using the DEBUG_MIN setting in <b><a href="../man5/ups.conf.5.html">ups.conf</a></b>(5) or protocol commands to change the
           driver.debug value), but may also benefit from LibUSB specific debugging.

           For the latter, you can set the LIBUSB_DEBUG driver option; alternatively you can classically export
           the environment variable LIBUSB_DEBUG before starting a NUT driver program (may be set and "exported"
           in driver init script or service method, perhaps via <b><a href="../man5/nut.conf.5.html">nut.conf</a></b>(5)), to a numeric value such as 4 ("All
           messages are emitted").

           For more details, including the currently supported values for your version of the library, see e.g.:

           •   https://libusb.sourceforge.io/api-1.0/

           •   https://libusb.sourceforge.io/api-1.0/group__libusb__lib.html

       <b>subdriver</b> <b>=</b> <u>string</u>
           Select a serial-over-USB subdriver to use. You have a choice between <b>phoenix</b>, <b>ippon</b>, <b>cypress</b>, and
           <b>krauler</b>. When using this option, it is mandatory to also specify the <b>vendorid</b> and <b>productid</b>.

       <b>langid_fix</b> <b>=</b> <u>value</u>
           Apply the language ID workaround to the krauler subdriver. This is mandatory for some devices to work
           (LDLC, Dynamix and others). You must to provide <b>value</b> (0x409 or 0x4095), according to your device
           entry in NUT hardware compatibility list (HCL).

</pre><h4><b>UPS</b> <b>COMMANDS</b></h4><pre>
       This driver supports some instant commands (see <b><a href="../man8/upscmd.8.html">upscmd</a></b>(8)):

       <b>beeper.toggle</b>
           Toggle the UPS beeper. (Not available on some hardware.)

       <b>load.on</b>
           Turn on the load immediately.

       <b>load.off</b>
           Turn off the load immediately (see KNOWN PROBLEMS).

       <b>shutdown.return</b>
           Turn off the load and return when power is back. Uses the timers defined by <b>ondelay</b> and <b>offdelay</b>.

       <b>shutdown.stayoff</b>
           Turn off the load and remain off (see KNOWN PROBLEMS). Uses the timer defined by <b>offdelay</b>.

       <b>shutdown.stop</b>
           Stop a shutdown in progress.

       <b>test.battery.start.deep</b>
           Perform a long battery test (Not available on some hardware.)

       <b>test.battery.start.quick</b>
           Perform a (10 second) battery test.

       <b>test.battery.start</b> <u>value</u>
           Perform a battery test for the duration of <u>value</u> minutes.

       <b>test.battery.stop</b>
           Stop a running battery test (not available on some hardware.)

</pre><h4><b>BATTERY</b> <b>CHARGE</b> <b>GUESSTIMATION</b></h4><pre>
       Due to popular demand, this driver will report a guesstimated <b>battery.charge</b> value and optionally
       <b>battery.runtime</b>, provided you specified a couple of the EXTRA ARGUMENTS listed above.

       If you specify both <b>battery.voltage.high</b> and <b>battery.voltage.low</b> in <b><a href="../man5/ups.conf.5.html">ups.conf</a></b>(5), but don’t enter
       <b>runtimecal</b>, it will guesstimate the state of charge by looking at the battery voltage alone. This is not
       reliable under load, as this only gives reasonably accurate readings if you disconnect the load, let the
       battery rest for a couple of minutes and then measure the open cell voltage. This just isn’t practical if
       the power went out and the UPS is providing power for your systems.

                                battery.voltage - battery.voltage.low
           battery.charge =  ------------------------------------------ x 100 %
                             battery.voltage.high - battery.voltage.low

       There is a way to get better readings without disconnecting the load, but this requires one to keep track
       on how much (and how fast) current is going in- and out of the battery. If you specified the <b>runtimecal</b>,
       the driver will attempt to do this. Note however, that this heavily relies on the values you enter and
       that the UPS must be able to report the load as well. There are quite a couple of devices that report 0%
       (or any other fixed value) at all times, in which case this obviously doesn’t work.

       The driver also has no way of determining the degradation of the battery capacity over time, so you’ll
       have to deal with this yourself (by adjusting the values in <b>runtimecal</b>). Also note that the driver
       guesses the initial state of charge based on the battery voltage, so this may be less than 100%, even
       when you are certain that they are full. There is just no way to reliably measure this between 0 and 100%
       full charge.

       This is better than nothing (but not by much). If any of the above calculations are giving you incorrect
       readings, remember that you are the one who put in the values in <b><a href="../man5/ups.conf.5.html">ups.conf</a></b>(5), so don’t complain to the
       author. If you need something better, consider buy an UPS that reports <b>battery.charge</b> and <b>battery.runtime</b>
       all by itself without the help of a NUT driver.

</pre><h4><b>NOTES</b> <b>FOR</b> <b>THE</b> <b>PREVIOUS</b> <b>USER</b> <b>OF</b> <b>MEGATEC</b> <b>DRIVERS</b></h4><pre>
       The blazer drivers having replaced the megatec ones, some configuration changes may be required by users
       switching to blazer.

       Part of this, the following megatec options, in ups.conf, have to be changed:

       <b>battvolts</b>
           You need to use <u>default.battery.voltage.high</u> and <u>default.battery.voltage.low</u>

       <b>dtr</b> <b>and</b> <b>rts</b>
           You need to use <u>cablepower</u>

       <b>ignoreoff</b>
           This parameter can simply be discarded, since it was a wrong understanding of the specification.

</pre><h4><b>KNOWN</b> <b>PROBLEMS</b></h4><pre>
       Some UPS commands aren’t supported by all models. In most cases, the driver will send a message to the
       system log when the user tries to execute an unsupported command. Unfortunately, some models don’t even
       provide a way for the driver to check for this, so the unsupported commands will silently fail.

       Both the <b>load.off</b> and <b>shutdown.stayoff</b> instant commands are meant to turn the load off indefinitely.
       However, some UPS models don’t allow this.

       Some models report a bogus value for the beeper status (will always be <u>enabled</u> or <u>disabled</u>). So, the
       <b>beeper.toggle</b> command may appear to have no effect in the status reported by the driver when, in fact, it
       is working fine.

       The temperature and load value is known to be bogus in some models.

</pre><h4><b>AUTHORS</b></h4><pre>
       •   Arjen de Korte &lt;adkorte-guest at alioth.debian.org&gt;

       •   Alexander Gordeev &lt;lasaine at lvk.cs.msu.su&gt;

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man8/blazer_ser.8.html">blazer_ser</a></b>(8), <b><a href="../man8/nutupsdrv.8.html">nutupsdrv</a></b>(8), <b><a href="../man8/upsc.8.html">upsc</a></b>(8), <b><a href="../man8/upscmd.8.html">upscmd</a></b>(8), <b><a href="../man8/upsrw.8.html">upsrw</a></b>(8)

   <b>Internet</b> <b>Resources:</b>
       •   The NUT (Network UPS Tools) home page: https://www.networkupstools.org/

       •   The NUT HCL: https://www.networkupstools.org/stable-hcl.html

Network UPS Tools 2.8.3                            07/08/2025                                      <u><a href="../man8/BLAZER_USB.8.html">BLAZER_USB</a></u>(8)
</pre>
 </div>
</div></section>
</div>
</body>
</html>