<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>vfs_glusterfs - Utilize features provided by GlusterFS</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/samba-vfs-glusterfs">samba-vfs-glusterfs_4.22.3+dfsg-4ubuntu1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       vfs_glusterfs - Utilize features provided by GlusterFS

</pre><h4><b>SYNOPSIS</b></h4><pre>

       vfs objects = glusterfs

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This VFS module is part of the <b><a href="../man8/samba.8.html">samba</a></b>(8) suite.

       GlusterFS (<a href="http://www.gluster.org">http://www.gluster.org</a>) is an Open Source clustered file system capable of scaling to several
       peta-bytes. With its FUSE based native client, GlusterFS is available as a POSIX compliant file system
       and can hence be shared by Samba without additional steps.

       The vfs_glusterfs VFS module provides an alternative, and superior way to access a Gluster filesystem
       from Samba for sharing. It does not require a Gluster FUSE mount but directly accesses the GlusterFS
       daemon through its library libgfapi, thereby omitting the expensive kernel-userspace context switches and
       taking advantage of some of the more advanced features of GlusterFS.

       This module can be combined with other modules, but it should be the last module in the vfs objects list.
       Modules added to this list to the right of the glusterfs entry may not have any effect at all.

</pre><h4><b>CONFIGURATION</b></h4><pre>
       A basic configuration looks like this.

                     <u>[share]</u>
                     <b>vfs</b> <b>objects</b> <b>=</b> <b>glusterfs</b>
                     <b>path</b> <b>=</b> <b>/relative/base/path</b>
                     <b>glusterfs:volume</b> <b>=</b> <b>gv0</b>
                     <b>kernel</b> <b>share</b> <b>modes</b> <b>=</b> <b>no</b>

       Note that since vfs_glusterfs does not require a Gluster mount, the share path is treated differently
       than for other shares: It is interpreted as the base path of the share relative to the gluster volume
       used. Because this is usually not at the same time a system path, in a ctdb cluster setup where ctdb
       manages Samba, you need to set CTDB_SAMBA_SKIP_SHARE_CHECK=yes in ctdb's configuration file. Otherwise
       ctdb will not get healthy.

       Note that currently kernel share modes have to be disabled in a share running with the glusterfs vfs
       module for file serving to work properly.

</pre><h4><b>OPTIONS</b></h4><pre>
       glusterfs:logfile = path
           Defines whether and where to store a vfs_glusterfs specific logfile. Client variable substitution is
           supported (i.e. %M, %m, %I), hence per client log file can be specified.

           Example: glusterfs:logfile = /var/log/samba/glusterfs-vol2.%M.log

       glusterfs:loglevel = 0-9
           Defines the level of logging, with higher numbers corresponding to more verbosity. 0 - No logs; 9 -
           Trace log level; 7 being the info log level is preferred.

           If this option is not defined with an explicit loglevel, the glusterfs default is used (currently
           loglevel 7).

       glusterfs:volfile_server = servername
           Defines which volfile server to use, defaults to localhost. It could be list of white space separated
           elements where each element could be

           1. unix+/path/to/socket/file

           2. [tcp+]IP|hostname|\[IPv6\][:port]

           Note the restriction on naming a IPv6 host, it follows the same restriction that is based on IPv6
           naming in URL as per RFC 2732.

       glusterfs:volume = volumename
           Defines the glusterfs volumename to use for this share.

</pre><h4><b>CAVEATS</b></h4><pre>
       The GlusterFS write-behind performance translator, when used with Samba, could be a source of data
       corruption. The translator, while processing a write call, immediately returns success but continues
       writing the data to the server in the background. This can cause data corruption when two clients relying
       on Samba to provide data consistency are operating on the same file.

       The write-behind translator is enabled by default on GlusterFS. The vfs_glusterfs plugin will check for
       the presence of the translator and refuse to connect if detected. Please disable the write-behind
       translator for the GlusterFS volume to allow the plugin to connect to the volume. The write-behind
       translator can easily be disabled via calling

                                   gluster volume set &lt;volumename&gt; performance.write-behind off

       on the commandline.

       With GlusterFS versions &gt;= 9, we silently bypass write-behind translator during initial connect and
       failure is avoided.

</pre><h4><b>VERSION</b></h4><pre>
       This man page is part of version 4.22.3-Ubuntu-4.22.3+dfsg-4ubuntu1 of the Samba suite.

</pre><h4><b>AUTHOR</b></h4><pre>
       The original Samba software and related utilities were created by Andrew Tridgell. Samba is now developed
       by the Samba Team as an Open Source project similar to the way the Linux kernel is developed.

Samba 4.22.3-Ubuntu-4.22.3+dfs                     07/21/2025                                   <u><a href="../man8/VFS_GLUSTERFS.8.html">VFS_GLUSTERFS</a></u>(8)
</pre>
 </div>
</div></section>
</div>
</body>
</html>