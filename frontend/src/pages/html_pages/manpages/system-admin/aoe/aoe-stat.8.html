<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>aoe-stat - print aoe device status report</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/aoetools">aoetools_36-6_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       aoe-stat - print aoe device status report

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>modprobe</b> <b>aoe</b>
       <b>aoe-stat</b>
       <b>env</b> <b>sysfs_dir=<a href="file:/sys">/sys</a></b> <b>aoe-stat</b>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The <u>aoe-stat</u> script collects information on ATA over Ethernet devices from sysfs.

       For each AoE device the kernel has discovered, there is one row in the script's output.  Each row has the
       following columns.

       <b>devicename</b>
              The device name is of the form <u>eX.Y,</u>
               with <u>X</u> being the AoE device shelf address, and <u>Y</u> being the AoE slot address.

       <b>size</b>   The size of the AoE device is in gigabytes (billions of bytes).

       <b>ifname</b> The network interface name is printed in the third column.

       <b>payload</b>
              The  number  of bytes read from or written to the storage target in each AoE packet appears in the
              fourth column, unless the aoe driver does not export this information.

       <b>status</b> The device status is in the last column.  Possible values are   <u>up</u>,   <u>down</u>,  and   <u>down,closewait</u>.
              The "up" status means the aoe driver considers this device ready for I/O.  The "down" status means
              the opposite.  The "down,closewait" status means that some software still has the device open, and
              when this straggler closes the device, it will enter the "down" state.

</pre><h4><b>UNAVAILABLE</b> <b>TARGETS</b></h4><pre>
       If  a  discovered  AoE  target  will not respond to I/O commands, some of the information needed to allow
       Linux to use the device is not available.  The <u>aoe-stat</u> command shows the missing information  as  "(NA)"
       fields.

       It  is  normal  for  "(NA)" fields to appear during the brief time between the time that an AoE target is
       detected and the time the Linux kernel finishes reading its partition table.

</pre><h4><b>ENVIRONMENT</b> <b>VARIABLES</b></h4><pre>
       If the <u>sysfs_dir</u> variable is set in the environment, it will override the default location where <u>aoe-stat</u>
       will look for sysfs, namely  <u><a href="file:/sys">/sys</a></u>.

</pre><h4><b>WARNINGS</b></h4><pre>
       If the minor device number of a device node does not match that of its namesake, <u>aoe-stat</u>  will  print  a
       warning as shown below.

              nai:~# aoe-stat
                    e0.3         0.104GB   eth0 up
                    e0.4      4398.046GB   eth0 up
                   e20.0      1000.215GB   eth0 up
                   e42.0      2000.431GB   eth0 up
              aoe-stat Warning: device node /dev/etherd/e45.1 has wrong minor device number
                   e45.1      1152.874GB   eth0 up

       Using such a device node is dangerous, because its name doesn't match the actual device that you would be
       reading  from  and writing to.  Such a broken device node should be removed.  Device nodes are created by
       <u>udev</u> or (on systems without <u>udev</u>) by <u>aoe-mkdevs</u>.

</pre><h4><b>EXAMPLE</b></h4><pre>
       In this example, the root user on a host named <u>nai</u> loads the aoe driver module and then prints a list  of
       all the available aoe devices.  Then he remembers to bring up the storage network interfaces, does an AoE
       discovery, and prints the list again.  This time the list shows all the devices in shelf seven.

              nai:~# modprobe aoe
              nai:~# aoe-stat
              nai:~# ifconfig eth3 up
              nai:~# aoe-discover
              nai:~# aoe-stat
                    e0.0     10995.116GB   eth3 up
                    e0.1     10995.116GB   eth3 up
                    e0.2     10995.116GB   eth3 up
                    e1.0      1152.874GB   eth3 up
                    e7.0       370.566GB   eth3 up
              nai:~#

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <u><a href="../man8/aoe-discover.8.html">aoe-discover</a></u>(8), <u><a href="../man8/aoe-interfaces.8.html">aoe-interfaces</a></u>(8), <u><a href="../man8/aoe-mkdevs.8.html">aoe-mkdevs</a></u>(8), <u><a href="../man8/aoe-mkshelf.8.html">aoe-mkshelf</a></u>(8), <u><a href="../man8/aoetools.8.html">aoetools</a></u>(8), <u><a href="../man7/udev.7.html">udev</a></u>(7).

</pre><h4><b>AUTHOR</b></h4><pre>
       Ed L. Cashin (<a href="mailto:ecashin@coraid.com">ecashin@coraid.com</a>)

                                                                                                     <u><a href="../man8/aoe-stat.8.html">aoe-stat</a></u>(8)
</pre>
 </div>
</div></section>
</div>
</body>
</html>