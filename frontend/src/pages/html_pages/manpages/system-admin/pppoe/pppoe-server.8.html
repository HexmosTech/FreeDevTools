<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>pppoe-server - user-space PPPoE server</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/pppoe">pppoe_4.0-1ubuntu1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       pppoe-server - user-space PPPoE server

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>pppoe-server</b> [<u>options</u>]

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>pppoe-server</b> is a user-space server for PPPoE (Point-to-Point Protocol over Ethernet) for Linux and other
       UNIX  systems.  <b>pppoe-server</b> works in concert with the <b>pppoe</b> client to respond to PPPoE discovery packets
       and set up PPPoE sessions.

</pre><h4><b>OPTIONS</b></h4><pre>
       <b>-F</b>     The <b>-F</b> option causes <b>pppoe-server</b> not to fork and become a daemon.  The default  is  to  fork  and
              become a daemon.

       <b>-I</b> <u>interface</u>
              The <b>-I</b> option specifies the Ethernet interface to use.  Under Linux, it is typically <u>eth0</u> or <u>eth1</u>.
              The  interface should be "up" before you start <b>pppoe-server</b>, but need not have an IP address.  You
              can supply multiple <b>-I</b> options if you want the server to respond on more than one interface.

       <b>-X</b> <u>pidfile</u>
              This option causes <b>pppoe-server</b> to write its process ID to <u>pidfile</u>.  Additionally,  it  keeps  the
              file locked so that only a single process may be started for a given <u>pidfile</u>.

       <b>-q</b> <u>/path/to/pppd</u>
              Specifies  the full path to the <b>pppd</b> program.  The default is determined at compile time.  One use
              of this option is to supply a wrapper program that modifies the arguments passed  to  pppd.   This
              lets you do things not directly supported by the server (for example, specify IPv6 addresses.)

       <b>-Q</b> <u>/path/to/pppoe</u>
              Specifies  the  full  path to the <b>pppoe</b> program.  The default is determined at compile time.  This
              option is only relevant if you are <u>not</u> using kernel-mode PPPoE.

       <b>-T</b> <u>timeout</u>
              This option is passed directly to <b>pppoe</b>; see <b><a href="../man8/pppoe.8.html">pppoe</a></b>(8) for details.  If you are  using  kernel-mode
              PPPoE, this option has <u>no</u> <u>effect</u>.

       <b>-C</b> <u>ac_name</u>
              Specifies which name to report as the access concentrator name.  If not supplied, the host name is
              used.

       <b>-S</b> <u>name</u>
              Offer  a  service  named  <u>name</u>.   Multiple  <b>-S</b> options may be specified; each one causes the named
              service to be advertised in a Service-Name tag in the PADO frame.  The first <b>-S</b>  option  specifies
              the default service, and is used if the PPPoE client requests a Service-Name of length zero.

       <b>-m</b> <u>MSS</u> This  option  is passed directly to <b>pppoe</b>; see <b><a href="../man8/pppoe.8.html">pppoe</a></b>(8) for details.  If you are using kernel-mode
              PPPoE, this option has <u>no</u> <u>effect</u>.

       <b>-x</b> <u>n</u>   Limit the number of sessions per peer MAC address to <u>n</u>.  If a given MAC address attempts to create
              more than <u>n</u> sessions, then its PADI and PADR packets  are  ignored.   If  you  set  <u>n</u>  to  0  (the
              default), then no limit is imposed on the number of sessions per peer MAC address.

       <b>-s</b>     This option is passed directly to <b>pppoe</b>; see <b><a href="../man8/pppoe.8.html">pppoe</a></b>(8) for details.  In addition, it causes <b>pppd</b> to
              be invoked with the <u>sync</u> option.

       <b>-L</b> <u>ip</u>  Sets  the  local  IP  address.   This  is passed to spawned <b>pppd</b> processes.  If not specified, the
              default is 10.0.0.1.  If specified as 0.0.0.0 the selection of local IP address  is  delegated  to
              <b>pppd</b>.

       <b>-R</b> <u>ip</u>  Sets  the  starting  remote  IP  address.   As sessions are established, IP addresses are assigned
              starting from <u>ip</u>.   <b>pppoe-server</b> automatically keeps track of the pool of addresses and  passes  a
              valid  remote IP address to <b>pppd</b>.  If not specified, a starting address of 10.67.15.1 is used.  If
              specified as 0.0.0.0 remote IP allocation will be delegated to <b>pppd</b>.

       <b>-D</b>     Delegate the allocation of IP addresses to <b>pppd</b>.  If specified,  no  local  and  remote  addresses
              passed to pppd.

       <b>-N</b> <u>num</u> Allows at most <u>num</u> concurrent PPPoE sessions.  If not specified, the default is 64.

       <b>-M</b> <u>string</u>
              Sends <u>string</u> in a MOTM tag in a PADM packet right after sending the PADS to a client.

       <b>-H</b> <u>url</u> Sends  <u>url</u> in a HURL tag in a PADM packet right after sending the PADS to a client.  Note that <u>url</u>
              must start with either <b>http://</b> or <b>https://</b>.

       <b>-O</b> <u>fname</u>
              This option causes <b>pppoe-server</b> to tell <b>pppd</b> to use the option file <u>fname</u> instead of  the  default
              <u>/etc/ppp/pppoe-server-options</u>.

       <b>-p</b> <u>fname</u>
              Reads  the specified file <u>fname</u> which is a text file consisting of one IP address per line.  These
              IP addresses will be assigned to clients.  The number of sessions allowed will equal the number of
              addresses found in the file.  The <b>-p</b> option overrides both <b>-R</b> and <b>-N</b>.

              In addition to containing IP addresses, the pool file can contain lines of the form:

                   a.b.c.d-e

              which includes all IP addresses from a.b.c.d to a.b.c.e.  For example, the line:

                   1.2.3.4-7

              is equivalent to:

                   1.2.3.4
                   1.2.3.5
                   1.2.3.6
                   1.2.3.7

       <b>-r</b>     Tells the PPPoE server to randomly permute session numbers.  Instead of handing  out  sessions  in
              order, the session numbers are assigned in an unpredictable order.

       <b>-u</b>     Tells  the  server to invoke <b>pppd</b> with the <u>unit</u> option.  Note that this option only works for <b>pppd</b>
              version 2.4.0 or newer.

       <b>-o</b> <u>offset</u>
              Instead of numbering PPPoE sessions starting at 1, they will be  numbered  starting  at  <u>offset</u>+1.
              This  allows  you  to  run  multiple servers on a given machine; just make sure that their session
              numbers do not overlap.

       <b>-f</b> <b>disc:sess</b>
              The <b>-f</b> option sets the Ethernet frame types for PPPoE discovery and session frames.  The types are
              specified as hexadecimal numbers separated by a colon.  Standard PPPoE uses frame types 8863:8864.
              <u>You</u> <u>should</u> <u>not</u> <u>use</u> <u>this</u> <u>option</u> unless you are absolutely sure the peer you are dealing  with  uses
              non-standard frame types.

       <b>-k</b>     The  <b>-k</b>  option tells the server to use kernel-mode PPPoE on Linux.  This option is available only
              on Linux kernels 2.4.0 and later, and only if the server was built with kernel-mode support.

       <b>-g</b> <b>path</b>
              The <b>-g</b> option tells the server the full path to the pppoe.so or rp-pppoe.so  plugin  to  use  with
              kernel-mode PPPoE.  If omitted, a compiled-in default is used; this default can be displayed using
              the <b>-h</b> option.

       <b>-i</b>     The  <b>-i</b>  option  tells  the  server  to completely ignore PADI frames if there are no free session
              slots.

       <b>-h</b>     The <b>-h</b> option prints a brief usage message and exits.

       <b>-U</b> <b>path</b>
              The <b>-U</b> option creates a UNIX socket which can be connected to in order to manage  pppoe-server  at
              run-time.  Please refer to the <b>CONTROL-SOCKET</b> section below for more detailed instructions.

</pre><h4><b>OPERATION</b></h4><pre>
       <b>pppoe-server</b>  listens  for  incoming PPPoE discovery packets.  When a session is established, it spawns a
       <b>pppd</b> process.  The following options are passed to <b>pppd</b>:

       nodetach noaccomp nobsdcom nodeflate nopcomp novj novjccomp
       default-asyncmap

       In addition, the local and remote IP address are set based on the <b>-L</b> and <b>-R</b> options.  The <b>pty</b>  option  is
       supplied  along with a <b>pppoe</b> command to initiate the PPPoE session.  Finally, additional <b>pppd</b> options can
       be placed in the file <b>/etc/ppp/pppoe-server-options</b> (which must exist, even if it is just empty!)

       Note that <b>pppoe-server</b> is meant mainly for testing PPPoE clients.  It is <u>not</u>  a  high-performance  server
       meant for production use.

</pre><h4><b>CONTROL-SOCKET</b></h4><pre>
       The  control-socket  was  implemented  as a secondary mechanism to improve run-time control of the pppoe-
       server.  To use it you need to start pppoe-server with the <b>-U</b> option described above.  You can  then  (in
       the absence of a control-client currently) use netcat to connect to the control socket, for example:

       nc -U /run/pppoe-server.control

       Assuming <b>-U</b> <b>/run/pppoe-server.control</b> was passed to pppoe-server.

       The following commands are implemented:

       <b>set</b> <b>drain</b> <b>{off|on|quit}</b>
              This will set whether or not pppoe-server responds to PADI packets or not.  When set to off pppoe-
              server  will  respond,  else  PADI  packets  will  be ignored.  This allows the pppoe-server to be
              drained from clients.  In addition when set to quit will terminate pppoe-server  when  all  pppoe-
              clients have terminated.

              This  allows  for  (mostly) seamless upgrades in that the currently running instance can be issued
              with "set drain quit" prior to starting a new interface on the same interfaces, thus allowing  new
              connections to be made whilst maintaining proper state on existing clients.

       <b>show</b> <b>status</b>
              This will show basic status information for the connected-to pppoe-server.

</pre><h4><b>AUTHORS</b></h4><pre>
       <b>pppoe-server</b> was written by Dianne Skoll &lt;<a href="mailto:dianne@skoll.ca">dianne@skoll.ca</a>&gt;.

       The <b>pppoe</b> home page is <u>https://dianne.skoll.ca/projects/rp-pppoe/</u>.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <a href="../man8/pppd.8.html">pppd</a>(8), <a href="../man8/pppoe.8.html">pppoe</a>(8), <a href="../man8/pppoe-sniff.8.html">pppoe-sniff</a>(8), <a href="../man8/pppoe-relay.8.html">pppoe-relay</a>(8)

4th Berkeley Distribution                         21 June 2008                                   <u><a href="../man8/PPPOE-SERVER.8.html">PPPOE-SERVER</a></u>(8)
</pre>
 </div>
</div></section>
</div>
</body>
</html>