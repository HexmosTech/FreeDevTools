<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>jk_socketd - a daemon to create a rate-limited /dev/log socket inside a chroot</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/jailkit">jailkit_2.23-2_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       jk_socketd - a daemon to create a rate-limited /dev/log socket inside a chroot

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>jk_socketd</b>

       <b>jk_socketd</b> <b>-p</b> <u>pidfile</u> <b>-n</b>

       <b>jk_socketd</b> <b>--pidfile=</b> <u>pidfile</u> <b>--nodetach</b>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The   jailkit  socket  daemon  creates  a  rate-limited  /dev/log  socket  inside  a  jail  according  to
       <u>/etc/jailkit/jk_socketd.ini</u> and writes all data eventually to syslog using  the  real  <u>/dev/log</u>  Programs
       like jk_lsh and also many daemons need a /dev/log socket to do logging to syslog.

       jk_socketd is an alternative for syslog to create /dev/log inside the jail (see your syslog manual how to
       accomplish  this).  However,  if you are worrying about an attacker disrupting normal system operation by
       filling your logs you should use jk_socketd. jk_socketd can limit the number of bytes written trough  the
       socket.  If  the logging is limited by jk_socketd, processes that run inside the jail will be slowed down
       if they try to use the logging service. If you expect a high logging rate in a jail, it is recommended to
       use syslog to create the socket in the jail instead of jk_socketd.

       On (Open)Solaris /dev/log is not a socket and therefore jk_socketd will not  function.  On  (Open)Solaris
       you should create the devices <u>/dev/log</u> and <u>/dev/conslog</u> in the jail to enable logging inside the jail.

       The rate limiting is done based on three parameters, the base, the peak and the interval. The interval is
       the  number of seconds that jk_socketd will use to count up to the number of bytes. The base and peak are
       both a number in bytes.

       A socket is normally only allowed to have base bytes going trough per interval seconds. Only  if  in  the
       previous  interval  the  number  of bytes has been lower than base, peak number of bytes is allowed. So a
       peak can only happen if the previous interval has been lower than base.

       The config file consists of several entries where each entry looks like this:

       [/home/testchroot/dev/log]
       base = 512
       peak = 2048
       interval = 5.0

       The title of the section is the socket to be created. The directory to create the socket in should exist.

   <b>Security</b>
       The jailkit socket daemon will change to user nobody and will chroot() into an empty dir once all sockets
       are opened. If the /dev/log socket is closed by the syslog daemon  (for  example  during  log  rotation),
       <b>jk_socketd</b> <b>needs</b> <b>a</b> <b>restart</b> to open it again.

</pre><h4><b>OPTIONS</b></h4><pre>
       <b>-n</b> <b>--nodetach</b>
              do not detach from the terminal and print debugging output

       <b>-p</b> <b>pidfile</b> <b>--pidfile=pidfile</b>
              write PID to pidfile

       <b>-h</b> <b>--help</b>
              show help screen

       <b>--socket=/path/to/socket</b>
              do not read ini file, create specific socket

       <b>--base=integer</b>
              message rate limit (in bytes) per interval for socket specified by --socket

       <b>--peak=integer</b>
              message rate limit peak (in bytes) for socket specified by --socket

       <b>--interval=float</b>
              message rate limit interval in seconds for socket specified by --socket

</pre><h4><b>FILES</b></h4><pre>
       <u>/etc/jailkit/jk_socketd.ini</u>

</pre><h4><b>DIAGNOSTICS</b></h4><pre>
       jk_socketd logs errors to syslog, so check your log files

       otherwise  run  jk_socketd  -n and it will not detach from the terminal, and it will print some debugging
       output.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man8/jailkit.8.html">jailkit</a>(8)</b> <b><a href="../man8/jk_check.8.html">jk_check</a>(8)</b> <b><a href="../man8/jk_chrootlaunch.8.html">jk_chrootlaunch</a>(8)</b> <b><a href="../man8/jk_chrootsh.8.html">jk_chrootsh</a>(8)</b> <b><a href="../man8/jk_cp.8.html">jk_cp</a>(8)</b>  <b><a href="../man8/jk_init.8.html">jk_init</a>(8)</b>  <b><a href="../man8/jk_jailuser.8.html">jk_jailuser</a>(8)</b>  <b><a href="../man8/jk_list.8.html">jk_list</a>(8)</b>
       <b><a href="../man8/jk_lsh.8.html">jk_lsh</a>(8)</b> <b><a href="../man8/jk_procmailwrapper.8.html">jk_procmailwrapper</a>(8)</b> <b><a href="../man8/jk_uchroot.8.html">jk_uchroot</a>(8)</b> <b><a href="../man8/jk_update.8.html">jk_update</a>(8)</b> <b><a href="../man2/chroot.2.html">chroot</a>(2)</b> <b><a href="../man8/syslogd.8.html">syslogd</a>(8)</b>

</pre><h4><b>COPYRIGHT</b></h4><pre>
       Copyright (C) 2003, 2004, 2005, 2006, 2007, 2008, 2009, 2010, 2011, 2012 Olivier Sessink

       Copying  and distribution of this file, with or without modification, are permitted in any medium without
       royalty provided the copyright notice and this notice are preserved.

JAILKIT                                            02-08-2012                                      <u><a href="../man8/jk_socketd.8.html">jk_socketd</a></u>(8)
</pre>
 </div>
</div></section>
</div>
</body>
</html>