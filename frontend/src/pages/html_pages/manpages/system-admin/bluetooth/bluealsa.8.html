<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>bluealsa - Bluetooth Audio ALSA Backend</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/bluez-alsa-utils">bluez-alsa-utils_4.3.1-3_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       bluealsa - Bluetooth Audio ALSA Backend

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>bluealsa</b> -p <u>PROFILE</u> [<u>OPTION</u>]...

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>bluealsa</b>  is  a  Linux  daemon to give applications access to Bluetooth audio streams using the Bluetooth
       A2DP, HFP, HSP and/or BLE-MIDI profiles.  It provides a D-Bus API to applications, and  can  be  used  by
       ALSA applications via libasound plugins (see <b><a href="../man7/bluealsa-plugins.7.html">bluealsa-plugins</a>(7)</b> for details).

</pre><h4><b>OPTIONS</b></h4><pre>
       <b>-h</b>, <b>--help</b>
              Output a usage message and exit.

       <b>-V</b>, <b>--version</b>
              Output the version number and exit.

       <b>-S</b>, <b>--syslog</b>
              Send output to system logger (<b><a href="../man8/syslogd.8.html">syslogd</a>(8)</b>).  By default, log output is sent to stderr.

       <b>--loglevel=</b><u>LEVEL</u>
              Set  the priority level threshold for log messages. Only messages of the given level or higher are
              logged. The <u>LEVELs</u> are, in decreasing order:

              • <b>error</b>   - error conditions

              • <b>warning</b> - warning conditions

              • <b>info</b> - informational messages

              If <b>bluealsa</b> was built with debug enabled, then an additional, lowest, level is  available:

              • <b>debug</b> - debug messages

              If this option is not given then the default is to use the lowest level (i.e.,  all  messages  are
              logged).

       <b>-B</b> <u>NAME</u>, <b>--dbus=</b><u>NAME</u>
              BlueALSA  D-Bus  service  name  suffix.   Without  this  option,  <b>bluealsa</b>  registers itself as an
              "org.bluealsa" D-Bus service.  For more information see the EXAMPLES below.

       <b>-i</b> <u>hciX</u>, <b>--device=</b><u>hciX</u>
              HCI device to use. Can be specified multiple times to select  more  than  one  HCI.   Because  HCI
              numbering  can change after a system reboot, this option also accepts HCI MAC address for the <u>hciX</u>
              value, for example: <b>--device=00:11:22:33:44:55</b>

              Without this option, the default is to use all available HCI devices.

       <b>-p</b> <u>NAME</u>, <b>--profile=</b><u>NAME</u>
              Enable <u>NAME</u> Bluetooth profile.  May be given multiple number of times to enable multiple profiles.

              It is mandatory to enable at least one Bluetooth profile.  For the list of supported profiles  see
              Profiles in the <b>NOTES</b> section below.

       <b>-c</b> <u>NAME</u>, <b>--codec=</b><u>NAME</u>
              Enable or disable <u>NAME</u> Bluetooth audio codec.  May be given multiple number of times to enable (or
              disable) multiple codecs.

              In  order  to  disable  given  audio  codec  (remove  it  from the list of audio codecs enabled by
              default), the <u>NAME</u> has to be prefixed with <b>-</b> (minus) character.  It is not possible to disable SBC
              and CVSD codecs which are mandatory for A2DP and HFP/HSP respectively.

              By default BlueALSA enables SBC, AAC (if AAC support is compiled-in), CVSD, mSBC (if mSBC  support
              is  compiled-in) and LC3-SWB (if LC3-SWB support is compiled-in).  For the list of supported audio
              codecs see the "Available BT audio codecs" section of the <b>bluealsa</b> command-line help message.

       <b>--initial-volume=</b><u>NUM</u>
              Set the initial volume to <u>NUM</u> % when a device is first connected.  <u>NUM</u> must be an integer  in  the
              range from <b>0</b> to <b>100</b>.

              By  default  the  volume  of  all PCMs of a device is set to 100% (full volume) when the device is
              first connected. For some devices,  particularly  headphones,  this  can  lead  to  an  unpleasant
              experience.  This  option  allows the user to choose an alternative initial volume level. Only one
              value can be specified and each device on first connect will have the volume level of all its PCMs
              set to this value. However, a device with native volume control may then immediately override this
              level. On subsequent connects the volume will be  set  to  the  remembered  value  from  the  last
              disconnection.  See Volume control in the <b>NOTES</b> section below for more information.

       <b>--keep-alive=</b><u>SEC</u>
              Keep Bluetooth transport alive for <u>SEC</u> number of seconds after streaming was closed.

              This  option  is  required  when  using <b>bluealsa</b> with applications that close and then immediately
              re-open the same PCM as part of their initialization; for  example  applications  built  with  the
              <b>portaudio</b> portability library and many other "portable" applications.

              It  can also be useful when playing short audio files in quick succession.  It will reduce the gap
              between playbacks caused by Bluetooth audio transport acquisition.

       <b>--io-rt-priority=</b><u>NUM</u>
              Set the FIFO scheduler real-time priority of the I/O threads to <u>NUM</u>.

              By default all I/O threads run at the same priority as the main thread.  This  option  allows  the
              user  to  increase  the priority of the I/O threads.  This can be useful when playing audio with a
              low latency requirement.

              It is recommended to use this option when using the HFP profile with the mSBC codec, as the  Linux
              kernel  does  not provide any buffering for the mSBC SCO socket. If the data are not read from the
              socket in time, the kernel will drop them. This  can  lead  to  lots  of  "Missing  mSBC  packets"
              warnings which will be audible as clicks in the audio.

              For more information about scheduling policies and priorities see <b><a href="../man7/sched.7.html">sched</a>(7)</b>.

       <b>--disable-realtek-usb-fix</b>
              Since  Linux kernel 5.14 Realtek USB adapters have required <b>bluealsa</b> to apply a fix for mSBC. This
              option disables that fix and may be necessary when using an earlier kernel.

       <b>--a2dp-force-mono</b>
              Force monophonic sound for A2DP profile.

       <b>--a2dp-force-audio-cd</b>
              Force 44.1 kHz sampling frequency for A2DP profile.  Some Bluetooth  devices  can  handle  streams
              sampled at either 48kHz or 44.1kHz, in which case they normally default to using 48kHz.  With this
              option, <b>bluealsa</b> will request such a device uses only 44.1 kHz sample rate.

       <b>--a2dp-volume</b>
              Enable  native  A2DP  volume  control.   By  default  <b>bluealsa</b>  will  use its own internal scaling
              algorithm to attenuate the volume.  This option disables that internal scaling and instead  passes
              the  volume change request to the A2DP device.  This feature can also be controlled during runtime
              for individual PCMs via the BlueALSA D-Bus API or by the BlueALSA ALSA  plugins;  and  if  so  the
              changed  setting  will  be  remembered.  See  Volume  control  in the <b>NOTES</b> section below for more
              information.  Note that this feature might not work with all Bluetooth headsets.

       <b>--sbc-quality=</b><u>MODE</u>
              Set SBC encoder quality.  Default value is <b>high</b>.

              The <u>MODE</u> can be one of:

              • <b>low</b> - low audio quality (mono: 114 kbps, stereo: 213 kbps)

              • <b>medium</b> - medium audio quality (mono: 132 kbps, stereo: 237 kbps)

              • <b>high</b> - high audio quality (mono: 198 kbps, stereo: 345 kbps)

              • <b>xq</b> - SBC Dual Channel HD (SBC XQ) (452 kbps)

              • <b>xq+</b> - SBC Dual Channel HD (SBC XQ+) (551 kbps)

       <b>--mp3-algorithm=</b><u>TYPE</u>
              Select LAME encoder internal algorithm.  Default value is <b>expensive</b>.

              The <u>TYPE</u> can be one of:

              • <b>fast</b> - OK quality, really fast

              • <b>cheap</b> - good quality, fast

              • <b>expensive</b> - near-best quality, not too slow

              • <b>best</b> - best quality, slow

              If CPU power consumption is not an issue, one might safely select  <b>best</b>  as  the  algorithm  type.
              Also, please note that the true quality is determined by the selected bit rate or used VBR quality
              option (<b>--mp3-vbr-quality</b>).

       <b>--mp3-vbr-quality=</b><u>MODE</u>
              Set variable bit rate (VBR) quality.  Default value is <b>standard</b>.

              The <u>MODE</u> can be one of:

              • <b>low</b> - low audio quality (100-130 kbps)

              • <b>medium</b> - medium audio quality (140-185 kbps)

              • <b>standard</b> - standard audio quality (170-210 kbps)

              • <b>high</b> - high audio quality (190-250 kbps)

              • <b>extreme</b> - best audio quality, no low-pass filter (220-260 kbps)

       <b>--aac-afterburner</b>
              Enables  Fraunhofer  AAC  afterburner feature, which is a type of analysis by synthesis algorithm.
              This feature increases the audio quality at the cost of increased  processing  power  and  overall
              memory consumption.

       <b>--aac-bitrate=</b><u>BPS</u>
              Set the target bit rate for constant bit rate (CBR) mode or the maximum peak bit rate for variable
              bit rate (VBR) mode.  Default value is <b>220000</b> bits per second.

       <b>--aac-latm-version=</b><u>NUM</u>
              Select LATM syntax version used for AAC audio transport.  Default value is <b>1</b>.

              The <u>NUM</u> can be one of:

              • <b>0</b> - LATM syntax specified by ISO-IEC 14496-3 (2001), should work with all older BT devices

              • <b>1</b> - LATM syntax specified by ISO-IEC 14496-3 (2005), should work with newer BT devices

       <b>--aac-true-bps</b>
              Enable true "bit per second" bit rate.

              A2DP  AAC specification requires that for the constant bit rate (CBR) mode every RTP frame has the
              same bit rate and for the variable bit rate (VBR) mode the maximum peak bit rate limit is also per
              RTP frame.  However, a single RTP frame does not contain a single  full  second  of  audio.   This
              option enables true bit rate calculation (per second), which means that per RTP frame bit rate may
              vary  even  for  CBR  mode.   This feature is not enabled by default, because it violates A2DP AAC
              specification.  Enabling it should result in an enhanced audio quality, but will for sure  produce
              fragmented  RTP  frames.   If  RTP  fragmentation is not supported by used A2DP sink device (e.g.,
              headphones) one might hear clearly audible clicks in the playback audio.  In such case, please  do
              not enable this option.

       <b>--aac-vbr</b>
              Prefer variable bit rate mode over constant bit rate mode.

              Please note, that this option does not necessarily mean that the variable bit rate (VBR) mode will
              be used.  Used AAC configuration depends on a remote Bluetooth device capabilities.

       <b>--lc3plus-bitrate=</b><u>BPS</u>
              Set  LC3plus  encoder  bit  rate for constant bit rate mode (CBR) as <u>BPS</u>.  Default value is <b>396800</b>
              bits per second.

       <b>--ldac-abr</b>
              Enables LDAC adaptive bit rate, which  will  dynamically  adjust  encoder  quality  based  on  the
              connection stability.

       <b>--ldac-quality=</b><u>MODE</u>
              Specifies LDAC encoder quality.  Default value is <b>standard</b>.

              The <u>MODE</u> can be one of:

              • <b>mobile</b> - mobile quality (44.1 kHz: 303 kbps, 48 kHz: 330 kbps)

              • <b>standard</b> - standard quality (44.1 kHz: 606 kbps, 48 kHz: 660 kbps)

              • <b>high</b> - high quality (44.1 kHz: 909 kbps, 48 kHz: 990 kbps)

       <b>--midi-advertisement</b>
              Advertise BLE-MIDI service using Bluetooth LE advertising.

       <b>--xapl-resp-name=</b><u>NAME</u>
              Set  the  product  name  send  in  the  XAPL  response  message.   By  default, the name is set as
              "BlueALSA".  However, some devices (reported with e.g., Sony WM-1000XM4) will not provide  battery
              level notification unless the product name is set as "iPhone".

</pre><h4><b>NOTES</b></h4><pre>
   <b>Profiles</b>
       <b>bluealsa</b>  provides  support  for Bluetooth Advanced Audio Distribution Profile (A2DP), Hands-Free Profile
       (HFP), Headset Profile (HSP) and Bluetooth Low Energy MIDI (BLE-MIDI).  A2DP  profile  is  dedicated  for
       streaming  music  (i.e.,  stereo, 48 kHz or more sampling frequency), while HFP and HSP for two-way voice
       transmission (mono, 8 kHz or 16 kHz sampling frequency).  BLE-MIDI,  on  the  other  hand,  is  used  for
       transmitting MIDI messages over Bluetooth LE.

       The  Bluetooth audio profiles are not peer-to-peer; they each have a source or gateway role (a2dp-source,
       hfp-ag, or hsp-ag) and a sink or target role (a2dp-sink, hfp-hf, hsp-hs). The source/gateway role is  the
       audio  player  (e.g.,  mobile  phone),  the  sink/target  role is the audio renderer (e.g., headphones or
       speaker). The <b>bluealsa</b> daemon can perform any combination of profiles and  roles,  although  it  is  most
       common to use it either as a source/gateway:

          bluealsa -p a2dp-source -p hfp-ag -p hsp-ag

       or as a sink/target:

          bluealsa -p a2dp-sink -p hfp-hf -p hsp-hs

       or with oFono for HFP support,

       source/gateway:

          bluealsa -p a2dp-source -p hfp-ofono -p hsp-ag

       sink/target:

          bluealsa -p a2dp-sink -p hfp-ofono -p hsp-hs

       With  A2DP, <b>bluealsa</b> always includes the mandatory SBC codec and may also include various optional codecs
       like AAC, aptX, and other.

       With HFP, <b>bluealsa</b> always includes the mandatory CVSD codec and may also include the  optional  mSBC  and
       LC3-SWB codecs.

       The  full list of available optional codecs, which depends on selected compilation options, will be shown
       with <b>bluealsa</b> command-line help message.

       The list of profile <u>NAME</u>-s accepted by the <b>--profile=NAME</b> option:

       • <b>a2dp-source</b> - Advanced Audio Source (streaming audio to connected device)

       • <b>a2dp-sink</b> - Advanced Audio Sink (receiving audio from connected device)

       • <b>hfp-ofono</b> - Hands-Free AG/HF handled by oFono

       • <b>hfp-ag</b> - Hands-Free Audio Gateway

       • <b>hfp-hf</b> - Hands-Free

       • <b>hsp-ag</b> Headset Audio Gateway

       • <b>hsp-hs</b> - Headset

       • <b>midi</b> - Bluetooth LE MIDI

       The <b>hfp-ofono</b> and <b>midi</b> profiles are available only when <b>bluealsa</b> was compiled respectively with oFono and
       BLE-MIDI support.

       Enabling HFP over oFono will automatically disable <b>hfp-hf</b> and <b>hfp-ag</b>.  Also, it is important to note that
       BlueZ permits only one service to register the HFP profile, and that service is automatically  registered
       with every HCI device.

       For  the  A2DP  profile,  BlueZ  allows each HCI device to be registered to a different service, so it is
       possible to have multiple instances of <b>bluealsa</b> offering A2DP support, each with a  unique  service  name
       given  with  the  <b>--dbus=</b>  option,  so  long  as  they  are registered to different HCI devices using the
       <b>--device=</b> option. See the EXAMPLES below.

       A profile connection does not immediately initiate the audio stream(s); audio  can  only  flow  when  the
       profile  transport  is  "acquired".  Acquisition  can  only be performed by the source/gateway role. When
       acting as source/gateway, <b>bluealsa</b> acquires the profile transport (i.e., initiates the audio  connection)
       when  a  client  opens  a  PCM. When <b>bluealsa</b> is acting as target, a client can open a PCM as soon as the
       profile is connected, but the audio stream(s) will not begin until the remote source/gateway has acquired
       the transport.

   <b>Volume</b> <b>control</b>
       The Bluetooth specifications for HFP and HSP include optional support for volume control of the target by
       the gateway device. For A2DP, volume control is  optionally  provided  by  the  AVRCP  profile.  <b>bluealsa</b>
       provides  a  single,  consistent, abstracted interface for volume control of PCMs. This interface can use
       the native Bluetooth features or alternatively <b>bluealsa</b> also implements its own internal volume  control,
       called  "soft-volume".  For A2DP the default is to use soft-volume, but this can be overridden to use the
       Bluetooth native support where available by using the <b>--a2dp-volume</b> command line option. For HFP/HSP  the
       default is to use Bluetooth native volume control.

       When  using  soft-volume,  <b>bluealsa</b>  scales PCM samples before encoding, and after decoding, and does not
       interact with the Bluetooth AVRCP volume property or HFP/HSP volume control. Volume can only be  modified
       by  local  clients. (Note that Bluetooth headphones or speakers with their own volume controls will still
       be able to alter their own volume, but this change will not be notified to <b>bluealsa</b> local  clients,  they
       will only see the soft-volume setting).

       When  using  native volume control, <b>bluealsa</b> links the PCM volume setting to the AVRCP volume property or
       HFP/HSP volume control. No scaling of PCM samples is applied.  Volume  can  be  modified  by  both  local
       clients  and the remote device.  Local clients will be notified of volume changes made by controls on the
       remote device.

       A2DP native volume control does not permit independent values for left and  right  channels,  so  when  a
       client sets such values <b>bluealsa</b> will set the Bluetooth volume as the average of the two channels.

       Volume  level,  mute  status,  and  soft-volume selection can all be controlled for each PCM by using the
       D-Bus API (or by using ALSA plugins, see <b><a href="../man7/bluealsa-plugins.7.html">bluealsa-plugins</a>(7)</b> for more information). The current value  of
       these  settings for each PCM is stored in the filesystem so that the device can be disconnected and later
       re-connected without losing its volume settings.

       When a device is connected, the volume level of its PCMs is  set  according  to  the  following  criteria
       (highest priority first):

          1. saved value from previous connection of the device

          2. value set by the <b>--initial-volume</b> command line option

          3. <b>100%</b>

       its mute status according to:

          1. saved value from previous connection

          2. <b>false</b>

       and its soft-volume status according to:

          1. saved value from previous connection

          2. <b>false</b> for SCO (i.e., use native volume control).

          3. <b>false</b> for A2DP if the <b>--a2dp-volume</b> command line option is given

          4. <b>true</b> for A2DP (i.e., use soft-volume control).

       When native volume control is enabled, then the remote device may also modify the volume level after this
       initial  setting.  Mute  and  soft-volume  are  implemented  locally by the <b>bluealsa</b> daemon and cannot be
       modified by the remote device.

       Note that <b>bluealsa</b> relies on support from BlueZ to implement native volume control for A2DP using  AVRCP,
       and  BlueZ  has  not  always provided robust support here. It is recommended to use BlueZ release 5.65 or
       later to be certain that native A2DP volume control will always be available  with  those  devices  which
       provide it.

</pre><h4><b>FILES</b></h4><pre>
       <b>/etc/dbus-1/system.d/bluealsa.conf</b>
       <b>/usr/share/dbus-1/system.d/bluealsa.conf</b>

          BlueALSA  service  D-Bus policy file.  D-Bus will deny all access to the <b>org.bluealsa</b> service (even to
          <u>root</u>) unless permission is granted by a policy file. The default file permits only <u>root</u>  to  own  this
          service,  and  only  members  of  the  <u>audio</u> group to exchange messages with it. BlueALSA installs its
          default  file  into  the  directory  <b><a href="file:/usr/share/dbus-1/system.d">/usr/share/dbus-1/system.d</a></b>,  but  the   distribution   or   local
          administrator may override that by placing a modified policy file into <b><a href="file:/etc/dbus-1/system.d">/etc/dbus-1/system.d</a></b>

       <b>/var/lib/bluealsa/</b><u>XX:XX:XX:XX:XX:XX</u>
              BlueALSA  volume  persistent  state storage. Files are named after the Bluetooth device address to
              which they refer.

</pre><h4><b>EXAMPLES</b></h4><pre>
       Emulate Bluetooth headset with A2DP and HSP support:

          bluealsa -p a2dp-sink -p hsp-hs

       On systems with more than one HCI device, it is possible to expose different profiles  on  different  HCI
       devices.   A  system  with  three HCI devices might (for example) use <u>hci0</u> for an A2DP sink service named
       "org.bluealsa.sink" and both <u>hci1</u> and <u>hci2</u> for an A2DP source service named "org.bluealsa.source".   Such
       a setup might be created as follows:

          bluealsa -B sink -i hci0 -p a2dp-sink &amp;
          bluealsa -B source -i hci1 -i hci2 -p a2dp-source &amp;

       Setup  like  this  will  also require a change to the BlueALSA D-Bus configuration file in order to allow
       connection with BlueALSA services with suffixed names.  Please add following lines to the BlueALSA  D-Bus
       policy:

          ...
          &lt;allow send_destination="org.bluealsa.sink" /&gt;
          &lt;allow send_destination="org.bluealsa.source" /&gt;
          ...

</pre><h4><b>COPYRIGHT</b></h4><pre>
       Copyright (c) 2016-2024 Arkadiusz Bokowy.

       The bluez-alsa project is licensed under the terms of the MIT license.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man1/bluealsa-aplay.1.html">bluealsa-aplay</a>(1)</b>,    <b><a href="../man1/bluealsa-cli.1.html">bluealsa-cli</a>(1)</b>,    <b><a href="../man1/bluealsa-rfcomm.1.html">bluealsa-rfcomm</a>(1)</b>,    <b><a href="../man1/bluetoothctl.1.html">bluetoothctl</a>(1)</b>,    <b><a href="../man7/bluealsa-plugins.7.html">bluealsa-plugins</a>(7)</b>,
       <b><a href="../man8/bluetoothd.8.html">bluetoothd</a>(8)</b>

       <b>Project</b> <b>web</b> <b>site</b>
               &lt;https://github.com/arkq/bluez-alsa&gt;

BlueALSA v4.3.1                                     May 2024                                         <u><a href="../man8/BLUEALSA.8.html">BLUEALSA</a></u>(8)
</pre>
 </div>
</div></section>
</div>
</body>
</html>