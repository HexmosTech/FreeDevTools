<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>state_analyzer - Explores and queries the fileserver state database interactively</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/openafs-fileserver">openafs-fileserver_1.8.13.2-1ubuntu1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       state_analyzer - Explores and queries the fileserver state database interactively

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>state_analyzer</b> [<u>state</u> <u>dump</u> <u>file</u> | <b>-h</b>]

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The demand-attach file server makes host / callback information persistent. On shutdown, the state is
       saved to database <b><a href="../man5/fsstate.dat.5.html">fsstate.dat</a></b>(5).  On startup, the state is read, verified and restored.  This allows for
       file server shutdowns or restarts without breaking all callbacks (an operation that could otherwise take
       a long time).

       <b>state_analyzer</b> interactively explores and queries the saved state database, <b><a href="../man5/fsstate.dat.5.html">fsstate.dat</a></b>(5).

       This command is only supported on the demand-attach file server.  It operates at an extremely low-level
       and hence requires detailed knowledge of the OpenAFS architecture and code.

</pre><h4><b>COMMANDS</b></h4><pre>
       <b>state_analyzer</b> supports the following interactive commands:

       <b>h</b> <b>&lt;...</b>&gt;  -- host menu
           •   <b>hdr</b>      -- display the host_state_header struct

           •   <b>first</b>    -- display the first host

           •   <b>prev</b>     -- display the previous host

           •   <b>this</b>     -- display this host

           •   <b>next</b>     -- display the next host

           •   <b>last</b>     -- display the last host

           •   <b>dump</b>     -- display all hosts

       <b>fe</b> <b>&lt;...</b>&gt;  -- FileEntry menu
           •   <b>hdr</b>      -- display the callback_state_header struct

           •   <b>first</b>    -- display the first FE

           •   <b>prev</b>     -- display the previous FE

           •   <b>this</b>     -- display this FE

           •   <b>next</b>     -- display the next FE

           •   <b>last</b>     -- display the last FE

           •   <b>dump</b>     -- display all FEs

           •   <b>timeout</b>  -- display the timeout queue heads

           •   <b>hash</b>     -- display the file entry hash buckets

           •   <b>find</b> <b>by</b> <b>index</b> <u><b>id</b></u> -- find an fe by its array index

           •   <b>find</b> <b>by</b> <b>fid</b> <u><b>(vol,vnode,unique)</b></u> -- find an fe by its AFSFid

       <b>cb</b> <b>&lt;...</b>&gt;  -- CallBack menu
           •   <b>hdr</b>      -- display the callback_state_entry_header struct

           •   <b>first</b>    -- display the first CB

           •   <b>prev</b>     -- display the previous CB

           •   <b>this</b>     -- display this CB

           •   <b>next</b>     -- display the next CB

           •   <b>last</b>     -- display the last CB

           •   <b>dump</b>     -- display all CBs

       <b>hexdump</b> <b>[offset</b> <b>[len]]</b>  -- hex dump raw data
       <b>quit</b>     -- quit current menu
       <b>exit</b>     -- exit debugger
       <b>help</b>     -- help message

</pre><h4><b>PRIVILEGE</b> <b>REQUIRED</b></h4><pre>
       The  issuer  must  have  read access to the file server state database, <u>fsstate.dat</u>.  Usually, this means
       that the issuer must be the local superuser "root" on the file server machine.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man5/fsstate.dat.5.html">fsstate.dat</a></b>(5), <b><a href="../man8/fssync-debug.8.html">fssync-debug</a></b>(8), <b><a href="../man8/salvsync-debug.8.html">salvsync-debug</a></b>(8)

</pre><h4><b>COPYRIGHT</b></h4><pre>
       Copyright 2010 Davor Ocelic &lt;<a href="mailto:docelic@spinlocksolutions.com">docelic@spinlocksolutions.com</a>&gt;

       This documentation is covered by the IBM Public License Version 1.0.  This man page was written by  Davor
       Ocelic for OpenAFS, based on documentation from Tom Keiser, Steven Jenkins and others.

OpenAFS                                            2025-03-21                                  <u><a href="../man8/STATE_ANALYZER.8.html">STATE_ANALYZER</a></u>(8)
</pre>
 </div>
</div></section>
</div>
</body>
</html>