<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ostree-state-overlay@.service - Set up state overlays</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/ostree-boot">ostree-boot_2025.1-1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       ostree-state-overlay@.service - Set up state overlays

</pre><h4><b>SYNOPSIS</b></h4><pre>
       ostree-state-overlay@.service

</pre><h4><b>EXPERIMENTAL</b></h4><pre>
       <b>Note</b> <b>this</b> <b>feature</b> <b>is</b> <b>currently</b> <b>considered</b> <b>experimental.</b>  It may not work correctly and some of its
       semantics may be subject to change. Positive or negative feedback are both welcome and may be provided at
       <b>https://github.com/ostreedev/ostree/discussions</b>. If using the feature via rpm-ostree, feedback may also
       be provided at <b>https://github.com/coreos/rpm-ostree/issues/233</b>.

</pre><h4><b>DESCRIPTION</b></h4><pre>
       In some cases, it's useful to be able to have a directory as part of the OSTree commit yet still have
       this directory be writable client-side. One example is software that ships in /opt.  <a href="file:/opt">/opt</a> is its own
       vendor-namespaced alternate file hierarchy which may contain both code and state. With state overlays,
       it's possible to have the code part baked in the OSTree, but still allowing the directory to be writable
       so that state can be kept there.

       Since it's writable, nothing prevents sufficiently privileged code to modify or delete content that comes
       from the OSTree commit. This is in sharp contrast with content in <a href="file:/usr">/usr</a>, and more closely matches a
       package manager-based distro.

       Crucially, this state is automatically rebased during upgrades (or more generally, anytime a different
       OSTree commit is booted). The semantics of the rebase are as follows: any state file or directory that
       modified OSTree content is deleted, otherwise it is kept and merged onto the new base content (using
       overlayfs). This mostly matches the semantics of a package manager.

       To enable this feature, simply instantiate the unit template, using the target path (in escaped systemd
       path notation) as the instance name. For example, to enable it on <a href="file:/opt">/opt</a>:

               $ systemctl enable --now <a href="mailto:ostree-state-overlay@opt.service">ostree-state-overlay@opt.service</a>

ostree                                                                                     <u><a href="../man8/OSTREE-STATE-OVERL.8.html">OSTREE-STATE-OVERL</a></u>(8)
</pre>
 </div>
</div></section>
</div>
</body>
</html>