<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>fake - IP address takeover tool</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/fake">fake_1.1.11-3.1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       fake - IP address takeover tool

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>fake</b> [<b>remove</b>] <u>IP_ADDRESS</u>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The  <b>fake</b>  utility enables the switching in of a backup server by bringing up an additional interface and
       using ARP spoofing to take over <u>IP_ADDRESS</u>.

       Variants of the script have been used extensively at Zip World (<a href="http://www.zipworld.com.au/">http://www.zipworld.com.au/</a>) for  backing
       up mail, web and proxy servers.  Although this system has been shown to work you are well advised to test
       the system thoroughly before putting it into production.

       Please  read  the  documents  in  <u>/usr/share/doc/fake/</u>  for  an  explanation  of how <b>fake</b> works and for a
       discussion of issues surrounding its use.

</pre><h4><b>OPTIONS</b></h4><pre>
       <b>remove</b> Stop the takeover of an IP address.  Without this option,  fake  starts  the  takeover  of  an  IP
              address.

</pre><h4><b>GLOBAL</b> <b>CONFIGURATION</b> <b>FILE</b></h4><pre>
       The  global  configuration  file  is in <u>/etc/fake/.fakerc</u>.  The settings there are overridden by those in
       <u>${HOME}/.fakerc</u>.  Here is a sample configuration file.

       ############################################################
       # Set up basic environment for fake
       # Variables are set as bash variables
       # i.e. &lt;VARIABLE&gt;=&lt;value&gt;
       #
       # Must set:
       #  ARP_DELAY: Delay in seconds between gratuitous ARP
       #  PID_DIR: Directory where PID files are kept
       #  INSTANCE_CONFIG_DIR: Directory where specific
       #   configuration files for an IP address takeover are kept
       #  CLEAR_ROUTERS_FILE: New line delimited list of routers to rsh
       #    to and execute "clear arp-cache"
       #  FAKE_RSH: Programme to use to "rsh" to another machine
       #    to obtain macaddress by running ifconfig
       #
       # PATH can be set here to ensure that send_arp is in the
       #  path
       ############################################################

       FAKE_HOME="/etc/fake"

       #PATH=<a href="file:/sbin">/sbin</a>:<a href="file:/usr/sbin">/usr/sbin</a>:<a href="file:/bin">/bin</a>:<a href="file:/usr/bin">/usr/bin</a>

       ARP_DELAY=1
       CLEAR_ROUTERS_FILE="$FAKE_HOME/clear_routers"
       PID_DIR="<a href="file:/var/run">/var/run</a>"
       INSTANCE_CONFIG_DIR="$FAKE_HOME/instance_config"

       #Only needed if you wish to send gratuitous ARP
       #advertising the "real" mac address when turning fake off
       #FAKE_RSH=ssh

</pre><h4><b>INSTANCE</b> <b>CONFIGURATION</b></h4><pre>
       To configure an instance of <b>fake</b>, create <u>/etc/fake/instance_config/&lt;IP-address-to-take-over&gt;.cfg</u> with the
       following format:

       SPOOF_IP=&lt;IP-address-to-take-over&gt;

       The SPOOF_IP variable must contain the same IP address as appears in the  name  of  the  file.   This  is
       checked at run time.

       IFCONFIG=TRUE|FALSE
       SPOOF_NETMASK=&lt;netmask-of-network-that-IP-address-to-take-over-is-on&gt;
       TARGET_INTERFACE=&lt;interface-to-bring-up&gt;

       If  the  IFCONFIG  variable  is  set to <b>TRUE</b>, the address specified by SPOOF_IP will be brought up on the
       interface specified by TARGET_INTERFACE; SPOOF_NETMASK and TARGET_INTERFACE must also be defined.

       For obvious reasons it is very important that the TARGET_INTERFACEs of running instances of <b>fake</b>  all  be
       different from one another.

       Optionally  if  you wish to <b>rsh</b> to the main server and advertise the "real" MAC address when turning <b>fake</b>
       off then set the following;

       FOREIGN_INTERFACE=&lt;interface-on-foreign-host-with-MAC-address-to-use&gt;
       FOREIGN_ARP=&lt;number-of-ARPs-to-send-with-real-MAC-address&gt;

       To use this last feature in an automated fashion you will need to be able to $FAKE_RSH to $SPOOF_IP  from
       the  host  that  <b>fake</b>  runs  on  without manual authentication.  With <b>rsh</b> this is typically achived using
       <u>.rhosts</u>; with <b>ssh</b> an RSH key with an empty passphrase can be employed.

       Here is an example of <u>/etc/fake/instance_config/203.12.97.7.cfg</u>:

       SPOOF_IP=203.12.97.7
       IFCONFIG=TRUE
       SPOOF_NETMASK=255.255.255.0
       TARGET_INTERFACE=eth0:2
       FOREIGN_INTERFACE=eth0
       FOREIGN_ARP=5

</pre><h4><b>ACTIVATION</b></h4><pre>
       To activate <b>fake</b>, run:

       fake &lt;IP-address-to-take-over&gt; &amp;

       Logs will be made to the local0.notice syslog facility.

       On startup you should see messages in the syslog; running <b>ifconfig</b> should show the new interface; running
       <b>route</b> should show a route for the spoofed IP address on the new interface (which is needed so the machine
       that <b>fake</b> is running on can communicate correctly to this IP address); and running <b>tcpdump</b> <b>-i</b> <b>&lt;interface&gt;</b>
       <b>arp</b> should show the gratuitous ARP packets.

</pre><h4><b>DEACTIVATION</b></h4><pre>
       To deactivate, run:

       fake remove &lt;IP-address-to-take-over&gt;

       As of version 1.1.2 the <b>fake</b> process can be sent a SIGTERM or SIGHUP to effect the removal.

       On removal you should see a message in the syslog; <b>ifconfig</b> should show that the new interface  has  been
       removed;  <b>route</b>  should  show  that  the  new  route  has  been removed; and <b>tcpdump</b> should show that the
       gratuitous ARP has stopped.

       <b>Note:</b> Activating <b>fake</b> multiple times with the same arguments has the same effect as activating  it  once.
       Similarly,  deactivating  fake multiple times with the same arguments has the same effect as deactivating
       it once.

</pre><h4><b>FILES</b></h4><pre>
       <u>/etc/fake/.fakerc</u>

       <u>/etc/fake/clear_routers</u>

       <u>/etc/fake/instance_config/&lt;IP-address&gt;.cfg</u>

       <u>/var/run/fake.&lt;IP-address&gt;.pid</u>

</pre><h4><b>AUTHOR</b></h4><pre>
       Horms &lt;<a href="mailto:horms@verge.net.au">horms@verge.net.au</a>&gt;

                                                   9 June 2004                                           <u><a href="../man8/FAKE.8.html">FAKE</a></u>(8)
</pre>
 </div>
</div></section>
</div>
</body>
</html>