<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>fence_zvmip - Fence agent for use with z/VM Virtual Machines</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/fence-agents-zvm">fence-agents-zvm_4.16.0-3ubuntu1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       fence_zvmip - Fence agent for use with z/VM Virtual Machines

</pre><h4><b>DESCRIPTION</b></h4><pre>
       fence_zvmip is a Power Fencing agent for z/VM SMAPI service via TCP/IP.

       The  z/VM  SMAPI  service must be configured so that the virtual machine running the agent can connect to
       the service, access the system's directory manager,  and  shortly  thereafter  run  image_deactivate  and
       image_activate. This involves updating the VSMWORK1 NAMELIST and VSMWORK1 AUTHLIST VMSYS:VSMWORK1 files.

       The NAMELIST entry assigns all the required functions to one nick and should look similar to this:

       :nick.ZVM_FENCE
       :list.
       IMAGE_ACTIVATE
       IMAGE_DEACTIVATE
       IMAGE_STATUS_QUERY
       CHECK_AUTHENTICATION
       IMAGE_NAME_QUERY_DM

       The  AUTHLIST entry authorizes the user to perform all the functions associated with the nick, and should
       look similar to this:

       Column 1                   Column 66                Column 131

       |                          |                        |
       V                          V                        V

       XXXXXXXX                   ALL                      ZVM_FENCE

       where XXXXXXXX is the name of the user in the authuser field of the request.

       Refer to the official z/VM documentation for complete instructions and reference materials.

       The fence agent accepts options on the command line as  well  as  from  stdin.  Fenced  sends  parameters
       through stdin when it execs the agent. The agent can be run by itself with command line options.  This is
       useful for testing and for turning outlets on or off from scripts.

       Vendor URL: <a href="http://www.ibm.com">http://www.ibm.com</a>

</pre><h4><b>PARAMETERS</b></h4><pre>

       <b>-o,</b> <b>--action=[action]</b>
              Fencing action (Default Value: reboot)

       <b>-4,</b> <b>--inet4-only</b>
              Forces agent to use IPv4 addresses only

       <b>-6,</b> <b>--inet6-only</b>
              Forces agent to use IPv6 addresses only

       <b>-a,</b> <b>--ip=[ip]</b>
              IP address or hostname of fencing device This parameter is always required.

       <b>-u,</b> <b>--ipport=[port]</b>
              TCP/UDP port to use for connection with device (Default Value: 44444)

       <b>-m,</b> <b>--method=[method]</b>
              Method to fence (onoff|cycle) (Default Value: onoff)

       <b>-p,</b> <b>--password=[password]</b>
              Login password or passphrase

       <b>-S,</b> <b>--password-script=[script]</b>
              Script to run to retrieve password

       <b>-n,</b> <b>--plug=[id]</b>
              Physical  plug  number  on  device,  UUID  or  identification  of machine This parameter is always
              required.

       <b>-z,</b> <b>--ssl</b>
              Use SSL connection with verifying certificate (Default) (Default Value: 1)

       <b>--ssl-insecure</b>
              Use SSL connection without verifying certificate

       <b>--ssl-secure</b>
              Use SSL connection with verifying certificate

       <b>-l,</b> <b>--username=[name]</b>
              Login name This parameter is always required.

       <b>--disable-ssl</b>
              Don't use SSL

       <b>-q,</b> <b>--quiet</b>
              Disable logging to stderr. Does not affect --verbose or --debug-file or logging to syslog.

       <b>-v,</b> <b>--verbose</b>
              Verbose mode. Multiple -v flags can be stacked on  the  command  line  (e.g.,  -vvv)  to  increase
              verbosity.

       <b>--verbose-level</b>
              Level  of  debugging  detail in output. Defaults to the number of --verbose flags specified on the
              command line, or to 1 if verbose=1 in a stonith device  configuration  (i.e.,  on  stdin).

       <b>-D,</b> <b>--debug-file=[debugfile]</b>
              Write debug information to given file

       <b>-V,</b> <b>--version</b>
              Display version information and exit

       <b>-h,</b> <b>--help</b>
              Display help and exit

       <b>--plug-separator=[char]</b>
              Separator for plug parameter when specifying more than 1 plug (Default Value: ,)

       <b>-C,</b> <b>--separator=[char]</b>
              Separator for CSV created by 'list' operation (Default Value: ,)

       <b>--delay=[seconds]</b>
              Wait X seconds before fencing is started (Default Value: 0)

       <b>--disable-timeout=[true/false]</b>
              Disable timeout (true/false) (default: true when run from Pacemaker 2.0+)

       <b>--login-timeout=[seconds]</b>
              Wait X seconds for cmd prompt after login (Default Value: 5)

       <b>--missing-as-off</b>
              Missing port returns OFF instead of failure (Default Value: 1)

       <b>--power-timeout=[seconds]</b>
              Test X seconds for status change after ON/OFF (Default Value: 20)

       <b>--power-wait=[seconds]</b>
              Wait X seconds after issuing ON/OFF (Default Value: 0)

       <b>--shell-timeout=[seconds]</b>
              Wait X seconds for cmd prompt after issuing command (Default Value: 5)

       <b>--stonith-status-sleep=[seconds]</b>
              Sleep X seconds between status calls during a STONITH action (Default Value: 1)

       <b>--retry-on=[attempts]</b>
              Count of attempts to retry power on (Default Value: 1)

       <b>--gnutlscli-path=[path]</b>
              Path to gnutls-cli binary (Default Value: /usr/bin/gnutls-cli)

</pre><h4><b>ACTIONS</b></h4><pre>

       <b>on</b>     Power on machine.

       <b>off</b>    Power off machine.

       <b>reboot</b> Reboot machine.

       <b>status</b> This returns the status of the plug/virtual machine.

       <b>list</b>   List  available  plugs with aliases/virtual machines if there is support for more then one device.
              Returns N/A otherwise.

       <b>list-status</b>
              List available plugs with aliases/virtual machines and their power state if  it  can  be  obtained
              without additional commands.

       <b>monitor</b>
              Check the health of fence device

       <b>metadata</b>
              Display the XML metadata describing this resource.

       <b>manpage</b>
               The operational behavior of this is not known.

       <b>validate-all</b>
              Validate if all required parameters are entered.

</pre><h4><b>STDIN</b> <b>PARAMETERS</b></h4><pre>

       <b>action</b> Fencing action (Default Value: reboot)

       <b>inet4_only</b>
              Forces agent to use IPv4 addresses only

       <b>inet6_only</b>
              Forces agent to use IPv6 addresses only

       <b>ip</b>     IP  address  or  hostname  of  fencing device This parameter is always required. Obsoletes: ipaddr

       <b>ipport</b> TCP/UDP port to use for connection with device (Default Value: 44444)

       <b>method</b> Method to fence (onoff|cycle) (Default Value: onoff)

       <b>password</b>
              Login password or passphrase Obsoletes: passwd

       <b>password_script</b>
              Script to run to retrieve password Obsoletes: passwd_script

       <b>plug</b>   Physical plug number on device, UUID  or  identification  of  machine  This  parameter  is  always
              required. Obsoletes: port

       <b>ssl</b>    Use SSL connection with verifying certificate (Default) (Default Value: 1)

       <b>ssl_insecure</b>
              Use SSL connection without verifying certificate

       <b>ssl_secure</b>
              Use SSL connection with verifying certificate

       <b>username</b>
              Login name This parameter is always required. Obsoletes: login

       <b>disable_ssl</b>
              Don't use SSL

       <b>quiet</b>  Disable logging to stderr. Does not affect --verbose or --debug-file or logging to syslog.

       <b>verbose</b>
              Verbose  mode.  Multiple  -v  flags  can  be  stacked on the command line (e.g., -vvv) to increase
              verbosity.

       <b>verbose_level</b>
              Level of debugging detail in output. Defaults to the number of --verbose flags  specified  on  the
              command  line,  or  to  1  if verbose=1 in a stonith device configuration (i.e., on stdin).

       <b>debug_file</b>
              Write debug information to given file Obsoletes: debug

       <b>version</b>
              Display version information and exit

       <b>help</b>   Display help and exit

       <b>plug_separator</b>
              Separator for plug parameter when specifying more than 1 plug (Default Value: ,)

       <b>separator</b>
              Separator for CSV created by 'list' operation (Default Value: ,)

       <b>delay</b>  Wait X seconds before fencing is started (Default Value: 0)

       <b>disable_timeout</b>
              Disable timeout (true/false) (default: true when run from Pacemaker 2.0+)

       <b>login_timeout</b>
              Wait X seconds for cmd prompt after login (Default Value: 5)

       <b>missing_as_off</b>
              Missing port returns OFF instead of failure (Default Value: 1)

       <b>power_timeout</b>
              Test X seconds for status change after ON/OFF (Default Value: 20)

       <b>power_wait</b>
              Wait X seconds after issuing ON/OFF (Default Value: 0)

       <b>shell_timeout</b>
              Wait X seconds for cmd prompt after issuing command (Default Value: 5)

       <b>stonith_status_sleep</b>
              Sleep X seconds between status calls during a STONITH action (Default Value: 1)

       <b>retry_on</b>
              Count of attempts to retry power on (Default Value: 1)

       <b>gnutlscli_path</b>
              Path to gnutls-cli binary (Default Value: /usr/bin/gnutls-cli)

fence_zvmip (Fence Agent)                          2009-10-20                                     <u><a href="../man8/FENCE_AGENT.8.html">FENCE_AGENT</a></u>(8)
</pre>
 </div>
</div></section>
</div>
</body>
</html>