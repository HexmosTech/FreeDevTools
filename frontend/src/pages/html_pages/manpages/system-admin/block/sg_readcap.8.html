<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>sg_readcap - send SCSI READ CAPACITY command</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/sg3-utils">sg3-utils_1.48-2ubuntu1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       sg_readcap - send SCSI READ CAPACITY command

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>sg_readcap</b>   [<u>--10</u>]   [<u>--16</u>]   [<u>--brief</u>]  [<u>--help</u>]  [<u>--hex</u>]  [<u>--inhex=FN</u>]  [<u>--json[=JO]</u>]  [<u>--js-file=JFN</u>]
       [<u>--lba=LBA</u>] [<u>--long</u>] [<u>--pmi</u>] [<u>--raw</u>] [<u>--readonly</u>] [<u>--verbose</u>] [<u>--version</u>] [<u>--zbc</u>] <u>DEVICE</u>

       <b>sg_readcap</b> [<u>-16</u>] [<u>-b</u>] [<u>-h</u>] [<u>-H</u>] [<u>-lba=LBA</u>] [<u>-pmi</u>] [<u>-r</u>] [<u>-R</u>] [<u>-v</u>] [<u>-V</u>] [<u>-z</u>] <u>DEVICE</u>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The normal action of the SCSI READ CAPACITY command is to fetch the number of  blocks  (and  block  size)
       from the <u>DEVICE</u>.

       The  SCSI  READ  CAPACITY command (both 10 and 16 byte cdbs) actually yield the block address of the last
       block and the block size. The number of blocks is thus one plus the block address of the last  block  (as
       blocks  are  counted  origin zero (i.e. starting at block zero)). This is the source of many "off by one"
       errors.

       The READ <a href="../man16/CAPACITY.16.html">CAPACITY</a>(16) response provides  additional  information  not  found  in  the  READ  <a href="../man10/CAPACITY.10.html">CAPACITY</a>(10)
       response. This includes protection and logical block provisioning information, plus the number of logical
       blocks  per physical block. So even though the media size may not exceed what READ <a href="../man10/CAPACITY.10.html">CAPACITY</a>(10) can show,
       it may still be useful to examine the response to  READ  <a href="../man16/CAPACITY.16.html">CAPACITY</a>(16).  Sadly  there  are  horrible  SCSI
       command set implementations in the wild that crash when the READ <a href="../man16/CAPACITY.16.html">CAPACITY</a>(16) command is sent to them.

       Device  capacity  is  the  product  of the number of blocks by the block size.  This utility outputs this
       figure in bytes, MiB (1048576 bytes per MiB), GB (1000000000 bytes per GB) and, if large enough, TB (1000
       GB).

       If sg_readcap is called without the <u>--long</u> option then the 10 byte cdb version (i.e. READ CAPACITY  (10))
       is  sent  to the <u>DEVICE</u>. If the number of blocks in the response is reported as 0xffffffff (i.e. (2**32 -
       1) ) and the <u>--hex</u> option has not been given, then READ CAPACITY (16)  is  called  and  its  response  is
       output.

       This  utility  supports  two  command line syntaxes, the preferred one is shown first in the synopsis and
       explained in this section. A later section on the old command line syntax outlines the  second  group  of
       options.

</pre><h4><b>OPTIONS</b></h4><pre>
       Arguments  to  long  options  are  mandatory  for  short  options  as  well.  The options are arranged in
       alphabetical order based on the long option name.

       <b>--10</b>   Use the 10 byte cdb variant of the READ CAPACITY command. This is currently the default action  of
              this  utility. That default may change to the 16 byte variant, especially if T10 deprecates the 10
              byte variant.

       <b>--16</b>   Use the 16 byte cdb variant of the READ CAPACITY command. See the '--long'  option.   <b>-b</b>,  <b>--brief</b>
              outputs  two  hex  numbers (prefixed with '0x' and space separated) to stdout. The first number is
              the maximum number of blocks on the device (which is one plus  the  lba  of  the  last  accessible
              block).  The  second  number  is the size in bytes of each block. If the operation fails then "0x0
              0x0" is written to stdout.

       <b>-h</b>, <b>--help</b>
              print out the usage message then exit.

       <b>-H</b>, <b>--hex</b>
              output the response to the READ CAPACITY command (either the 10 or 16 byte cdb variant)  in  ASCII
              hexadecimal  on  stdout.  Each  line starts with a hexadecimal address or index, starting at 0. If
              this option is given twice, and ASCII rendering of the 16 bytes on each line is  appended  to  the
              right hand side of each line.
              If  this  option  is  given three times then 16 bytes of ASCII hexadecimal are output in each line
              with no leading address nor ASCII rendering to the right.  This output is suitable  for  importing
              into  a  later invocation of this utility with the file containing the hex given to the <u>--inhex=FN</u>
              option.  When given four (or more times) this option adds  a  comment  line  (starting  with  '#')
              describing the command that caused the output.

       <b>-i</b>, <b>--inhex</b>=<u>FN</u>
              where  <u>FN</u>  is  a  file  name whose contents are assumed to be ASCII hexadecimal. If <u>DEVICE</u> is also
              given then <u>DEVICE</u> is ignored, a warning is issued and the utility  continues,  decoding  the  file
              named  <u>FN</u>.  See  the  "HEX,  BINARY  AND  JSON  FORMATS" section in the sg3_utils manpage for more
              information. If the <u>--raw</u> option is also given then the contents of <u>FN</u> are treated as binary.

       <b>-j</b>[=<u>JO</u>], <b>--json</b>[=<u>JO</u>]
              output is in JSON format instead of plain text form. Note that arguments to  the  short  and  long
              form  are  themselves optional and if present start with "=" and no whitespace is permitted around
              that "=".
              See sg3_utils_json manpage or use '?' for <u>JO</u> to get a summary.

       <b>-J</b>, <b>--js-file</b>=<u>JFN</u>
              output is in JSON format and it is sent to a file named <u>JFN</u>.  If  that  file  exists  then  it  is
              truncated. By default, the JSON output is sent to stdout.
              When  this  option  is  given,  the  <u>--json[=JO]</u>  option  is  implied  and  need not be given. The
              <u>--json[=JO]</u> option may still be needed to set the <u>JO</u> parameter to non-default values.

       <b>-L</b>, <b>--lba</b>=<u>LBA</u>
              used in conjunction with <u>--pmi</u> option. This variant of READ CAPACITY will  yield  the  last  block
              address  after  <u>LBA</u> prior to a delay. For a disk, given a <u>LBA</u> it yields the highest numbered block
              on the same cylinder (i.e. before the heads need to move). <u>LBA</u> is assumed  to  be  decimal  unless
              prefixed  by "0x" or it has a trailing "h". Defaults to 0.  This option was made obsolete in SBC-3
              revision 26.

       <b>-l</b>, <b>--long</b>
              Use the 16 byte cdb variant of the READ CAPACITY command. The default action is to use the 10 byte
              cdb variant which limits the maximum block address to (2**32  -  2).  When  a  10  byte  cdb  READ
              CAPACITY  command  is  used  on  a  device  whose  size  is too large then a last block address of
              0xffffffff is returned (if the device complies with SBC-2 or later).

       <b>-O</b>, <b>--old</b>
              Switch to older style options. Please use as first option.

       <b>-p</b>, <b>--pmi</b>
              partial medium indicator: for finding the next block  address  prior  to  some  delay  (e.g.  head
              movement).  In  the  absence  of this option, the total number of blocks and the block size of the
              device are output.  Used in conjunction with the <u>--lba=LBA</u> option. This option was  made  obsolete
              in SBC-3 revision 26.

       <b>-r</b>, <b>--raw</b>
              output response in binary to stdout.

       <b>-R</b>, <b>--readonly</b>
              open  the  <u>DEVICE</u>  read-only  (e.g.  in  Unix  with  the  O_RDONLY  flag).   The  default for READ
              <a href="../man16/CAPACITY.16.html">CAPACITY</a>(16) is to open it read-write. The default for READ <a href="../man10/CAPACITY.10.html">CAPACITY</a>(10) is to open  it  read-only
              so this option does not change anything for this case.

       <b>-v</b>, <b>--verbose</b>
              increase level of verbosity. Can be used multiple times.

       <b>-V</b>, <b>--version</b>
              outputs version string then exits.

       <b>-z</b>, <b>--zbc</b>
              additionally  prints  out  the extra ZBC field (RC_BASIS) in the READ CAPACITY response. Using the
              option implicitly sets the <u>--16</u> option.

</pre><h4><b>NOTES</b></h4><pre>
       The response to READ <a href="../man16/CAPACITY.16.html">CAPACITY</a>(16) contains a LBPRZ bit in the  SBC-3  standard  (ANSI  INCITS  514-2014).
       There  was also a LBPRZ bit with the same meaning in the Logical block provisioning VPD page (0xb2). Then
       somewhat confusingly T10 expanded the LBPRZ bit to a 3 bit field in SBC-4 draft revision 7, but  only  in
       the  LB  provisioning  VPD  page.  The  reason  for  the  expansion  was  to  report  a new "provisioning
       initialization pattern" state (when an unmapped logical block is read). The new state has  been  assigned
       LBPRZ=2  in  the  VPD  page and it re-uses LBPRZ=0 in the READ <a href="../man16/CAPACITY.16.html">CAPACITY</a>(16) response. LBPRZ=1 retains the
       same meaning for both variants, namely that a block of zeroes will be returned when an  unmapped  logical
       block is read.

</pre><h4><b>EXIT</b> <b>STATUS</b></h4><pre>
       The exit status of sg_readcap is 0 when it is successful. Otherwise see the <a href="../man8/sg3_utils.8.html">sg3_utils</a>(8) man page.

</pre><h4><b>OLDER</b> <b>COMMAND</b> <b>LINE</b> <b>OPTIONS</b></h4><pre>
       The  options  in  this  section were the only ones available prior to sg3_utils version 1.23 . Since then
       this utility defaults to the newer command line options which can be overridden by using <u>--old</u> (or <u>-O</u>) as
       the first option. See the ENVIRONMENT VARIABLES section for another way to force the use of  these  older
       command line options.

       <b>-16</b>    Use  the  16  byte  cdb  variant  of  the READ CAPACITY command.  Equivalent to <u>--long</u> in the main
              description.

       <b>-b</b>     utility outputs two hex numbers (prefixed with '0x' and space  separated)  to  stdout.  The  first
              number  is  the  maximum  number  of  blocks  on the device (which is one plus the lba of the last
              accessible block). The second number is the size of each block. If the operation fails  then  "0x0
              0x0" is written to stdout.  Equivalent to <u>--brief</u> in the main description.

       <b>-h</b>     output  the  usage  message  then  exit.  Giving the <u>-?</u> option also outputs the usage message then
              exits.

       <b>-H</b>     output the response to the READ CAPACITY command (either the 10 or 16 byte cdb variant)  in  ASCII
              hexadecimal on stdout.

       <b>-lba</b>=<u>LBA</u>
              used  in  conjunction  with  <u>-pmi</u>  option. This variant of READ CAPACITY will yield the last block
              address after <u>LBA</u> prior to a delay.  Equivalent to <u>--lba=LBA</u> in the main description.

       <b>-N</b>, <b>--new</b>
              Switch to the newer style options.

       <b>-pmi</b>   partial medium indicator: for finding the next block  address  prior  to  some  delay  (e.g.  head
              movement).  In  the  absence  of this switch, the total number of blocks and the block size of the
              device are output.  Equivalent to <u>--pmi</u> in the main description.

       <b>-r</b>     output response in binary (to stdout).

       <b>-R</b>     Equivalent to <u>--readonly</u> in the main description.

       <b>-v</b>     verbose: print out cdb of issued commands prior to execution. '-vv' and '-vvv' are  also  accepted
              yielding greater verbosity.

       <b>-V</b>     outputs version string then exits.

       <b>-z</b>     Equivalent to <u>--zbc</u> in the main description.

</pre><h4><b>ENVIRONMENT</b> <b>VARIABLES</b></h4><pre>
       Since sg3_utils version 1.23 the environment variable SG3_UTILS_OLD_OPTS can be given. When it is present
       this  utility will expect the older command line options. So the presence of this environment variable is
       equivalent to using <u>--old</u> (or <u>-O</u>) as the first command line option.

</pre><h4><b>AUTHORS</b></h4><pre>
       Written by Douglas Gilbert

</pre><h4><b>COPYRIGHT</b></h4><pre>
       Copyright © 1999-2023 Douglas Gilbert
       This software is distributed under the GPL version 2. There is NO warranty; not even for  MERCHANTABILITY
       or FITNESS FOR A PARTICULAR PURPOSE.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b>sg_inq(sg3_utils)</b>

sg3_utils-1.48                                      June 2023                                      <u><a href="../man8/SG_READCAP.8.html">SG_READCAP</a></u>(8)
</pre>
 </div>
</div></section>
</div>
</body>
</html>