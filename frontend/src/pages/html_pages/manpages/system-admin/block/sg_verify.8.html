<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>sg_verify - invoke SCSI VERIFY command(s) on a block device</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/sg3-utils">sg3-utils_1.48-2ubuntu1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       sg_verify - invoke SCSI VERIFY command(s) on a block device

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>sg_verify</b>  [<u>--0</u>]  [<u>--16</u>] [<u>--bpc=BPC</u>] [<u>--count=COUNT</u>] [<u>--dpo</u>] [<u>--ff</u>] [<u>--ebytchk=BCH</u>] [<u>--group=GN</u>] [<u>--help</u>]
       [<u>--in=IF</u>] [<u>--lba=LBA</u>] [<u>--ndo=NDO</u>] [<u>--quiet</u>] [<u>--readonly</u>] [<u>--verbose</u>] [<u>--version</u>] [<u>--vrprotect=VRP</u>] <u>DEVICE</u>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       Sends one or more SCSI VERIFY (10 or 16) commands to <u>DEVICE</u>. These SCSI commands are defined in the SBC-2
       and SBC-3 standards at https://www.t10.org and SBC-4 drafts.

       When <u>--ndo=NDO</u> is not given then the verify starts at the logical block address given  by  the  <u>--lba=LBA</u>
       option  and continues for <u>--count=COUNT</u> blocks. No more than <u>--bpc=BPC</u> blocks are verified by each VERIFY
       command so if necessary multiple VERIFY commands are sent. Medium verification operations  are  performed
       by  the  <u>DEVICE</u>  (e.g.  assuming each block has additional EEC data, check this against the logical block
       contents). No news is good news (i.e. if there are no verify errors detected then no messages are sent to
       stderr and the Unix exit status is 0).

       When <u>--ndo=NDO</u> is given then the <u>--bpc=BPC</u> option is ignored. A single VERIFY command  is  issued  and  a
       comparison  starts  at  the  logical  block  address  given  by  the  <u>--lba=LBA</u>  option and continues for
       <u>--count=COUNT</u> blocks. The VERIFY command has an associated data-out buffer that is <u>NDO</u>  bytes  long.  The
       contents  of  the  data-out  buffer are obtained from the <u>FN</u> file (if <u>--in=FN</u> is given) or from stdin.  A
       comparison takes place between data-out buffer and the logical blocks on the <u>DEVICE</u>. If the comparison is
       good then no messages are sent to stderr and the Unix exit status is 0. If the comparison  fails  then  a
       sense  buffer  with  a sense key of MISCOMPARE is returned; in this case the Unix exit status will be 14.
       Messages will be sent to stderr associated with MISCOMPARE sense buffer  unless  the  <u>--quiet</u>  option  is
       given.

       In SBC-3 revision 34 the BYTCHK field in all SCSI VERIFY commands was expanded from one to two bits. That
       required some changes in the options of this utility, see the section below on OPTION CHANGES.

</pre><h4><b>OPTIONS</b></h4><pre>
       Arguments  to  long  options  are  mandatory  for  short  options  as  well.  The options are arranged in
       alphabetical order based on the long option name.

       <b>-0</b>, <b>--0</b>
              a buffer <u>NDO</u> bytes long full of zeros is sent as the data-out part of a VERIFY command.  So  stdin
              is  not read and if <u>--in=IF</u> is given, an error is generated. Useful when <u>BCH</u> is 3 to check if some
              or all of <u>DEVICE</u> (e.g. a disk) is zero filled blocks.

       <b>-S</b>, <b>--16</b>
              uses a <a href="../man16/VERIFY.16.html">VERIFY</a>(16) command (default <a href="../man10/VERIFY.10.html">VERIFY</a>(10)). Even without this option, using an <u>--lba=LBA</u> which
              is too large, will cause the utility to issue a <a href="../man16/VERIFY.16.html">VERIFY</a>(16) command.

       <b>-b</b>, <b>--bpc</b>=<u>BPC</u>
              this option is ignored if <u>--ndo=NDO</u> is given. Otherwise <u>BPC</u> specifies the maximum number of blocks
              that will be verified by a single SCSI VERIFY command. The  default  value  is  128  blocks  which
              equates  to  64  KB  for a disk with 512 byte blocks. If <u>BPC</u> is less than <u>COUNT</u> then multiple SCSI
              VERIFY commands are sent to the <u>DEVICE</u>. For  the  default  <a href="../man10/VERIFY.10.html">VERIFY</a>(10)  <u>BPC</u>  cannot  exceed  0xffff
              (65,535)  while  for  <a href="../man16/VERIFY.16.html">VERIFY</a>(16)  <u>BPC</u>  cannot  exceed 0x7fffffff (2,147,483,647). For recent block
              devices (disks) this value may be constrained by the maximum transfer length field  in  the  block
              limits VPD page.

       <b>-c</b>, <b>--count</b>=<u>COUNT</u>
              where <u>COUNT</u> specifies the number of blocks to verify. The default value is 1 . If <u>COUNT</u> is greater
              than  <u>BPC</u>  (or its default value of 128) and <u>NDO</u> is not given, 0 or less than multiple SCSI VERIFY
              commands are sent to the device. Otherwise <u>COUNT</u> becomes the contents of the  verification  length
              field  of  the  SCSI VERIFY command issued. The <b>sg_readcap</b> utility can be used to find the maximum
              number of blocks that a block device (e.g. a disk) has.

       <b>-d</b>, <b>--dpo</b>
              disable page out changes the cache retention priority of blocks read on the device's cache to  the
              lowest  priority.  This  means that blocks read by other commands are more likely to remain in the
              device's cache.

       <b>-E</b>, <b>--ebytchk</b>=<u>BCH</u>
              sets the BYTCHK field to <u>BCH</u> overriding the value (1) set by the <u>--ndo=NDO</u> option. Values of 1,  2
              or  3  are  accepted  for  <u>BCH</u>  however sbc3r34 reserves the value 2. If this option is given then
              <u>--ndo=NDO</u> must also be given. If <u>BCH</u> is 3 then <u>NDO</u> should be the size of one logical  block  (plus
              the size of some or all of the protection information if <u>VRP</u> is greater than 0).

       <b>-f</b>, <b>--ff</b>
              a  buffer  <u>NDO</u>  bytes long full of 0xff bytes is sent as the data-out part of a VERIFY command. So
              stdin is not read and if <u>--in=IF</u> is given, an error is generated. Useful when <u>BCH</u> is 3 to check if
              some or all of <u>DEVICE</u> (e.g. a disk) is 0xff byte filled blocks.

       <b>-g</b>, <b>--group</b>=<u>GN</u>
              where <u>GN</u> becomes the contents of the group number field in the SCSI <a href="../man16/VERIFY.16.html">VERIFY</a>(16) command. It can  be
              from  0  to  63 inclusive. The default value for <u>GN</u> is 0. Note that this option is ignored for the
              SCSI <a href="../man10/VERIFY.10.html">VERIFY</a>(10) command.

       <b>-h</b>, <b>--help</b>
              output the usage message then exit.

       <b>-i</b>, <b>--in</b>=<u>IF</u>
              where <u>IF</u> is the name of a file from which <u>NDO</u> bytes will  be  read  and  placed  in  the  data-out
              buffer.  This  is  only  done when the <u>--ndo=NDO</u> option is given. If this option is not given then
              stdin is read. If <u>IF</u> is "-" then stdin is also used.

       <b>-l</b>, <b>--lba</b>=<u>LBA</u>
              where <u>LBA</u> specifies the logical block address of the first block to start  the  verify  operation.
              <u>LBA</u>  is  assumed  to be decimal unless prefixed by '0x' or a trailing 'h' (see below). The default
              value is 0 (i.e. the start of the device).

       <b>-n</b>, <b>--ndo</b>=<u>NDO</u>
              <u>NDO</u> is the number of bytes to obtain from the <u>FN</u> file (if <u>--in=FN</u> is given) or from  stdin.  Those
              bytes  are placed in the data-out buffer associated with the SCSI VERIFY command and <u>NDO</u> is placed
              in the verification length field in the cdb. The default value for <u>NDO</u> is 0 and the maximum  value
              is  dependent on the OS. If the <u>--ebytchk=BCH</u> option is not given then the BYTCHK field in the cdb
              is set to 1.

       <b>-q</b>, <b>--quiet</b>
              suppress the sense buffer messages associated with a MISCOMPARE sense key that would otherwise  be
              sent  to  stderr.  Still  set  the  exit  status  to  14 which is the sense key value indicating a
              MISCOMPARE .

       <b>-r</b>, <b>--readonly</b>
              opens the DEVICE read-only rather than read-write which is the default. The Linux sg driver  needs
              read-write  access  for  the  SCSI  VERIFY  command but other access methods may require read-only
              access.

       <b>-v</b>, <b>--verbose</b>
              increase the level of verbosity, (i.e. debug output).

       <b>-V</b>, <b>--version</b>
              print the version string and then exit.

       <b>-P</b>, <b>--vrprotect</b>=<u>VRP</u>
              where <u>VRP</u> is the value in the vrprotect field in the VERIFY  command  cdb.  It  must  be  a  value
              between 0 and 7 inclusive. The default value is zero.

</pre><h4><b>BYTCHK</b></h4><pre>
       BYTCHK is the name of a field (two bits wide) in the <a href="../man10/VERIFY.10.html">VERIFY</a>(10) and <a href="../man16/VERIFY.16.html">VERIFY</a>(16) commands. When set to 1 or
       3  (sbc3r34  reserves  the value 2) it indicates that associated with the SCSI VERIFY command, a data-out
       buffer will be sent for the device (disk) to check. Using the <u>--ndo=NDO</u> option sets the BYTCHK field to 1
       and <u>NDO</u> is the number of bytes placed in the data-out buffer. Those bytes are obtained from stdin  or  <u>IF</u>
       (from  the  <u>--in=FN</u> option). The <u>--ebytchk=BCH</u> option may be used to override the BYTCHK field value of 1
       with <u>BCH</u>.

       The calculation of <u>NDO</u> is left up to the user. Its value depends on the logical block size (which can  be
       found  with the sg_readcap utility), the <u>COUNT</u> and the <u>VRP</u> values. If the <u>VRP</u> is greater than 0 then each
       logical block will contain an extra 8 bytes (at least) of protection information.

       When the BYTCHK field is 0 then the verification process done by the device (disk) is vendor specific. It
       typically involves checking each block on the disk against its error  correction  codes  (ECC)  which  is
       additional data also held on the disk.

       Many  Operating Systems put limits on the maximum size of the data-out (and data-in) buffer. For Linux at
       one time the limit was less than 1 MB but has been increased somewhat.

</pre><h4><b>OPTION</b> <b>CHANGES</b></h4><pre>
       Earlier versions of this utility had a <u>--bytchk=NDO</u> option which set the  BYTCHK  bit  and  set  the  cdb
       verification length field to <u>NDO</u>.  The shorter form of that option was <u>-B</u> <u>NDO</u>. For backward compatibility
       that  option  is still present but not documented. In its place is the <u>--ndo=NDO</u> whose shorter form of <u>-n</u>
       <u>NDO</u>.  <u>--ndo=NDO</u> sets the BYTCHK field to 1 unless that is overridden by the <u>--ebytchk=BCH</u>.

</pre><h4><b>NOTES</b></h4><pre>
       Various numeric arguments (e.g. <u>LBA</u>) may include multiplicative suffixes or be given in hexadecimal.  See
       the "NUMERIC ARGUMENTS" section in the <a href="../man8/sg3_utils.8.html">sg3_utils</a>(8) man page.

       The amount of error correction and the number of retries attempted before a block is considered defective
       are  controlled in part by the Verify Error Recovery mode page. A note in the SBC-3 draft (rev 29 section
       6.4.9 on the Verify Error Recovery mode page) advises that to minimize the number of  checks  (and  hence
       have the most "sensitive" verify check) do the following in that mode page: set the EER bit to 0, the PER
       bit  to  1,  the DTE bit to 1, the DCR bit to 1, the verify retry count to 0 and the verify recovery time
       limit to 0. Mode pages can be modified with the <b>sdparm</b> utility.

       The SCSI <a href="../man6/VERIFY.6.html">VERIFY</a>(6) command defined in the SSC-2 standard and later (i.e.  for tape drive systems) is  not
       supported by this utility.

</pre><h4><b>EXIT</b> <b>STATUS</b></h4><pre>
       The exit status of sg_verify is 0 when it is successful. When <u>BCH</u> is other than 0 then a comparison takes
       place  and  if it fails then the exit status is 14 which happens to be the sense key value of MISCOMPARE.
       Otherwise see the EXIT STATUS section in the <a href="../man8/sg3_utils.8.html">sg3_utils</a>(8) man page.

       Earlier versions of this utility set an exit status of 98 when there was a MISCOMPARE.

</pre><h4><b>AUTHORS</b></h4><pre>
       Written by Douglas Gilbert.

</pre><h4><b>REPORTING</b> <b>BUGS</b></h4><pre>
       Report bugs to &lt;dgilbert at interlog dot com&gt;.

</pre><h4><b>COPYRIGHT</b></h4><pre>
       Copyright © 2004-2019 Douglas Gilbert
       This software is  distributed  under  a  BSD-2-Clause  license.  There  is  NO  warranty;  not  even  for
       MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b>sdparm(sdparm),</b> <b>sg_modes(sg3_utils),</b> <b>sg_readcap(sg3_utils),</b> <b>sg_inq(sg3_utils)</b>

sg3_utils-1.45                                    December 2019                                     <u><a href="../man8/SG_VERIFY.8.html">SG_VERIFY</a></u>(8)
</pre>
 </div>
</div></section>
</div>
</body>
</html>