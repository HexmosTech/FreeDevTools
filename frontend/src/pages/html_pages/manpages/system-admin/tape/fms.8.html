<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>fms - Determine a tape's capacity and a tape device's filemark size</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/openafs-client">openafs-client_1.8.13.2-1ubuntu1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       fms - Determine a tape's capacity and a tape device's filemark size

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>fms</b> <b>-tape</b> &lt;<u>tape</u> <u>special</u> <u>file</u>&gt; [<b>-help</b>]

       <b>fms</b> <b>-t</b> &lt;<u>tape</u> <u>special</u> <u>file</u>&gt; [<b>-h</b>]

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The <b>fms</b> command determines the capacity of the tape currently in the tape device identified by the <b>-tape</b>
       argument, along with the size of the filemark for the device. The filemark is also referred to as the
       device's end-of-file (EOF) marker, and can differ for each combination of tape and tape device.

       As the Tape Coordinator writes a dump, it writes a filemark between the data included from each volume
       and also tracks the amount of space left before the end of the tape (EOT). For some tape devices, the
       filemark is large enough (multiple megabytes) that failure to consider it leads the Tape Coordinator
       significantly to overestimate the available space.

       The intended use of this command is to determine tape capacity and filemark size values that can be
       specified in a tape device's entry in the <u>/var/lib/openafs/backup/tapeconfig</u> file. For certain types of
       tape drives, the Tape Coordinator operates more efficiently when the <u>tapeconfig</u> file lists accurate
       values. For further discussion, see the <u>OpenAFS</u> <u>Administration</u> <u>Guide</u> chapter on configuring the Backup
       System.

       Insert a tape in the drive before issuing this command.

</pre><h4><b>CAUTIONS</b></h4><pre>
       Do not use this command on compressing tape devices in compression mode or with tape devices that handle
       tapes of multigigabyte (or multiterabyte) capacity. It does not produce accurate results in those cases.
       For alternate suggestions on the values to record in the <b>tapeconfig</b> file for compressing drives, see the
       <u>OpenAFS</u> <u>Administration</u> <u>Guide</u> chapter on configuring the Backup System.

       Running the command completely overwrites the tape, so use a blank one or one that can be recycled.

       Because it writes filemarks to the complete length of the tape, the command can take from several hours
       to more than a day to complete.

</pre><h4><b>OPTIONS</b></h4><pre>
       <b>-tape</b> &lt;<u>tape</u> <u>special</u> <u>file</u>&gt;
           Specifies  the  UNIX  device  name  of  the  tape device for which to determine filemark size and the
           capacity of the tape it currently contains. The format varies on different system types, but  usually
           begins with <u><a href="file:/dev">/dev</a></u>; an example is <u>/dev/sd0a</u>.

       <b>-help</b>
           Prints the online help for this command. All other valid options are ignored.

</pre><h4><b>OUTPUT</b></h4><pre>
       The  command  generates output both on the standard output stream and in the <u>fms.log</u> file that it creates
       in the current working directory. The output reports the capacity of the  tape  in  the  device  and  the
       device's filemark size.

       The  first  few  lines of output include status information about the execution of the command, including
       such information as the number of blocks and the number of file marks written to the tape by the command.
       The last two lines of both screen and file output provide the following information:

       •   "Tape capacity is <u>number</u> bytes": specifies the size, in bytes, of the tape in the device.

       •   "File marks are <u>number</u> bytes": specifies the device's filemark size in bytes.

       The following message indicates that the fms command interpreter  cannot  access  the  tape  device.  The
       command halts.

          Can't open tape drive I&lt;device&gt;

       The  following  message indicates that the command interpreter cannot create the <u>fms.log</u> log file. Again,
       the command halts.

          Can't open log file

</pre><h4><b>EXAMPLES</b></h4><pre>
       The following command illustrates the output for the device called <u>/dev/rmt1h</u>:

          % fms /dev/rmt1h
          wrote block: 130408
          Finished data capacity test - rewinding
          wrote 1109 blocks, 1109 file marks
          Finished file mark test
          Tape capacity is 2136604672 bytes
          File marks are 1910205 bytes

       The following appears in the <u>fms.log</u> file:

          fms test started
          wrote 9230 blocks
          Finished file mark test
          Tape capacity is 151224320 bytes
          File marks are 2375680 bytes

</pre><h4><b>PRIVILEGE</b> <b>REQUIRED</b></h4><pre>
       The issuer must be able to insert and write to files in the currently working directory, if  the  <u>fms.log</u>
       file does not already exist. If it already exists, the issuer need only be able to write to it.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man5/fms.log.5.html">fms.log</a></b>(5), <b><a href="../man5/tapeconfig.5.html">tapeconfig</a></b>(5)

</pre><h4><b>COPYRIGHT</b></h4><pre>
       IBM Corporation 2000. &lt;<a href="http://www.ibm.com/">http://www.ibm.com/</a>&gt; All Rights Reserved.

       This  documentation  is covered by the IBM Public License Version 1.0.  It was converted from HTML to POD
       by software written by Chas Williams and Russ Allbery, based on  work  by  Alf  Wachsmann  and  Elizabeth
       Cassell.

OpenAFS                                            2025-03-21                                             <u><a href="../man8/FMS.8.html">FMS</a></u>(8)
</pre>
 </div>
</div></section>
</div>
</body>
</html>