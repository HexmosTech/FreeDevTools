<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>fstrace_dump - Dumps a trace log</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/openafs-client">openafs-client_1.8.13.2-1ubuntu1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       fstrace_dump - Dumps a trace log

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>fstrace</b> <b>dump</b> [<b>-set</b> &lt;<u>set</u> <u>name</u>&gt;+]
           [<b>-follow</b> &lt;<u>log</u> <u>name</u>&gt;]
           [<b>-file</b> &lt;<u>output</u> <u>filename</u>&gt;]
           [<b>-sleep</b> &lt;<u>seconds</u> <u>between</u> <u>reads</u>&gt;]
           [<b>-help</b>]

       <b>fstrace</b> <b>d</b> [<b>-se</b> &lt;<u>set</u> <u>name</u>&gt;+]
           [<b>-fo</b> &lt;<u>log</u> <u>name</u>&gt;]
           [<b>-fi</b> &lt;<u>output</u> <u>filename</u>&gt;]
           [<b>-sl</b> &lt;<u>seconds</u> <u>between</u> <u>reads</u>&gt;]
           [<b>-h</b>]

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The <b>fstrace</b> <b>dump</b> command displays the current contents of the "cmfx" trace log on the standard output
       stream or writes it to the file named by the <b>-file</b> argument.

       To write the log continuously to the standard output stream or to a file, use the <b>-follow</b> argument. By
       default, the log's contents are written out every ten seconds and then automatically cleared. To change
       the interval between writes, use the <b>-sleep</b> argument.

</pre><h4><b>CAUTIONS</b></h4><pre>
       This command produces output only if the "cm" event set is active. To display or set the event set's
       state, use the <b>fstrace</b> <b>lsset</b> or <b>fstrace</b> <b>setset</b> command respectively.

       To make the output from this command maximally readable, the message catalog file called <u>afszcm.cat</u> must
       reside in the local <u>/etc/openafs/C</u> directory. If necessary, copy the file to that directory from the AFS
       Binary Distribution before activating tracing.

       When the "cm" event set is active, a defined amount of kernel memory (by default, 60 KB) is allocated for
       the "cmfx" trace log. As described in <b><a href="../man8/fstrace.8.html">fstrace</a></b>(8), when the buffer is full, messages are overwritten in a
       circular fashion (new messages overwrite the oldest ones). To allocate more kernel memory for the log,
       use the <b>fstrace</b> <b>setlog</b> command; to display the log buffer's current size, use the <b>fstrace</b> <b>lslog</b> command
       with the <b>-long</b> argument.

</pre><h4><b>OPTIONS</b></h4><pre>
       <b>-set</b> &lt;<u>set</u> <u>name</u>&gt;+
           Names  the  event  set  for which to write out the associated trace log. The only acceptable value is
           "cm" (for which the associated trace log is  "cmfx").  Provide  either  this  argument  or  the  <b>-log</b>
           argument, or omit both to write out the "cmfx" log by default.

       <b>-follow</b> &lt;<u>log</u> <u>name</u>&gt;
           Names the trace log to write out continuously at a specified interval (by default, every ten seconds;
           use the <b>-sleep</b> argument to change the interval). The log is cleared after each write operation.

           The  only acceptable value is "cmfx". Provide either this argument or the <b>-set</b> argument, or omit both
           to write out the "cmfx" log by default.

       <b>-file</b> &lt;<u>output</u> <u>filename</u>&gt;
           Specifies the pathname of the file to which to write the trace log's contents. It can be in AFS or on
           the local disk. Partial pathnames are interpreted relative to the current working directory. If  this
           argument is omitted, the trace log appears on the standard output stream.

       <b>-sleep</b> &lt;<u>seconds</u> <u>between</u> <u>reads</u>&gt;
           Sets the number of seconds between writes of the trace log's contents when it is dumped continuously.
           Provide  the  <b>-follow</b> argument along with this one. If this argument is omitted, the default interval
           is ten seconds.

       <b>-help</b>
           Prints the online help for this command. All other valid options are ignored.

</pre><h4><b>OUTPUT</b></h4><pre>
       The output begins with a header specifying the date and time at which the write operation began.  If  the
       <b>-follow</b>  argument  is not included, the header also reports the number of logs being dumped; it is always
       1, since there is only the "cmfx" trace log.  The format of the header is as follows:

          AFS Trace Dump -
            Date: I&lt;starting_timestamp&gt;
          Found 1 logs.
          Contents of log cmfx:

       Each subsequent message describes a Cache Manager operation in the following format:

          time &lt;timestamp&gt;, pid &lt;pid&gt;:&lt;event_message&gt;

       where

       &lt;timestamp&gt;
           Specifies the time at which the Cache Manager performed the operation, as the number of seconds since
           the dump began.

       &lt;pid&gt;
           Specifies the process ID of the process or thread associated with the message.

       &lt;event_message&gt;
           Is the message itself. They are generally meaningful only to someone familiar  with  the  AFS  source
           code.

       In addition, every 1024 seconds the fstrace command interpreter writes a message that records the current
       clock time, in the following format:

          time &lt;timestamp&gt;, pid &lt;pid&gt;: Current time: &lt;unix_time&gt;

       where

       &lt;timestamp&gt;
           Is the number of seconds from the start of trace logging.

       &lt;pid&gt;
           Is the process ID number.

       &lt;unix_time&gt;
           Is  the  machine's  clock  time,  represent in the standard UNIX time format as the number of seconds
           since midnight on January 1, 1970.

       Use this message to determine the actual clock time associated  with  each  log  message.  Determine  the
       actual time as follows:

       •   Locate the message of interest.

       •   Search backward through the trace file for the closest current time message.

       •   If  the current time message's timestamp is smaller than the log message's timestamp, subtract former
           from the latter.  If the current time message's timestamp is larger than the log message's timestamp,
           add 1024 to the latter and subtract the former from the result.

       •   Add the resulting number to the current time message's &lt;unix_time&gt; to  determine  the  log  message's
           actual time.

           If  any  of the data in the kernel trace buffer has been overwritten since tracing was activated, the
           following message appears at the appropriate place in the output:

              Log wrapped; data missing.

           To reduce the likelihood of overwriting, use the  <b>fstrace</b>  <b>setlog</b>  command  to  increase  the  kernel
           buffer's  size.  To  display  the current defined buffer size, use the <b>fstrace</b> <b>lslog</b> command with the
           <b>-long</b> argument.

           The following message at the end of the log dump indicates that it is completed:

              AFS Trace Dump - Completed

</pre><h4><b>EXAMPLES</b></h4><pre>
       The following command dumps the log associated with the cm event set to the standard output stream.

          # fstrace dump -set cm
          AFS Trace Dump -
             Date: Tue Apr  7 10:54:57 1998
          Found 1 logs.
          time 32.965783, pid 0: Tue Apr  7 10:45:52 1998
          time 32.965783, pid 33657: Close 0x5c39ed8 flags 0x20
          time 32.965897, pid 33657: Gn_close vp 0x5c39ed8 flags 0x20 (returns 0x0)
          time 35.159854, pid 10891: Breaking callback for 5bd95e4 states 1024 (volume 0)
          time 35.407081, pid 10891: Breaking callback for 5c0fadc states 1024 (volume 0)
                                           .
                                           .
                                           .
          time 71.440456, pid 33658: Lookup adp 0x5bbdcf0 name g3oCKs \
               fid (756 4fb7e:588d240.2ff978a8.6)
          time 71.440569, pid 33658: Returning code 2 from 19
          time 71.440619, pid 33658: Gn_lookup vp 0x5bbdcf0 name g3oCKs (returns 0x2)
          time 71.464989, pid 38267: Gn_open vp 0x5bbd000 flags 0x0 (returns 0x0)
          AFS Trace Dump - Completed

       The following command dumps the trace log associated with the cm event set on the local  machine  to  the
       file "cmfx.dump.file.1", using the default interval of 10 seconds between successive dumps:

          # fstrace dump -follow cmfx -file cmfx.dump.file.1

</pre><h4><b>PRIVILEGE</b> <b>REQUIRED</b></h4><pre>
       The issuer must be logged in as the local superuser "root".

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man5/afszcm.cat.5.html">afszcm.cat</a></b>(5), <b><a href="../man8/fstrace.8.html">fstrace</a></b>(8), <b><a href="../man8/fstrace_lslog.8.html">fstrace_lslog</a></b>(8), <b><a href="../man8/fstrace_setlog.8.html">fstrace_setlog</a></b>(8), <b><a href="../man8/fstrace_lsset.8.html">fstrace_lsset</a></b>(8)

</pre><h4><b>COPYRIGHT</b></h4><pre>
       IBM Corporation 2000. &lt;<a href="http://www.ibm.com/">http://www.ibm.com/</a>&gt; All Rights Reserved.

       This  documentation  is covered by the IBM Public License Version 1.0.  It was converted from HTML to POD
       by software written by Chas Williams and Russ Allbery, based on  work  by  Alf  Wachsmann  and  Elizabeth
       Cassell.

OpenAFS                                            2025-03-21                                    <u><a href="../man8/FSTRACE_DUMP.8.html">FSTRACE_DUMP</a></u>(8)
</pre>
 </div>
</div></section>
</div>
</body>
</html>