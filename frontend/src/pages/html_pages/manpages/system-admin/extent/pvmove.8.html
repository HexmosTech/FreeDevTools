<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>pvmove — Move extents from one physical volume to another</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/lvm2">lvm2_2.03.31-2ubuntu1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       pvmove — Move extents from one physical volume to another

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>pvmove</b> <u>position_args</u>
           [ <u>option_args</u> ]
           [ <u>position_args</u> ]

</pre><h4><b>DESCRIPTION</b></h4><pre>
       pvmove moves the allocated physical extents (PEs) on a source PV to one or more destination PVs.  You can
       optionally  specify  a  source  LV  in  which case only extents used by that LV will be moved to free (or
       specified) extents on the destination PV. If no destination PV is specified, the normal allocation  rules
       for the VG are used.

       If  pvmove  is interrupted for any reason (e.g. the machine crashes) then run pvmove again without any PV
       arguments to restart any operations that were in progress from the last  checkpoint.  Alternatively,  use
       the abort option at any time to abort the operation. The resulting location of LVs after an abort depends
       on whether the atomic option was used.

       More  than  one  pvmove  can  run  concurrently  if  they  are moving data from different source PVs, but
       additional pvmoves will ignore any LVs already in the process of being changed, so some  data  might  not
       get moved.

</pre><h4><b>USAGE</b></h4><pre>
       Move PV extents.

       <b>pvmove</b> <u>PV</u>
           [ <b>-A</b>|<b>--autobackup</b> <b>y</b>|<b>n</b> ]
           [ <b>-n</b>|<b>--name</b> <u>LV</u> ]
           [    <b>--alloc</b> <b>contiguous</b>|<b>cling</b>|<b>cling_by_tags</b>|<b>normal</b>|<b>anywhere</b>|<b>inherit</b> ]
           [    <b>--atomic</b> ]
           [    <b>--noudevsync</b> ]
           [    <b>--reportformat</b> <b>basic</b>|<b>json</b>|<b>json_std</b> ]
           [ COMMON_OPTIONS ]
           [ <u>PV</u> ... ]

       Continue or abort existing pvmove operations.

       <b>pvmove</b>
           [ COMMON_OPTIONS ]

       Common options for command:
           [ <b>-b</b>|<b>--background</b> ]
           [ <b>-i</b>|<b>--interval</b> <u>Number</u> ]
           [    <b>--abort</b> ]

       Common options for lvm:
           [ <b>-d</b>|<b>--debug</b> ]
           [ <b>-h</b>|<b>--help</b> ]
           [ <b>-q</b>|<b>--quiet</b> ]
           [ <b>-t</b>|<b>--test</b> ]
           [ <b>-v</b>|<b>--verbose</b> ]
           [ <b>-y</b>|<b>--yes</b> ]
           [    <b>--commandprofile</b> <u>String</u> ]
           [    <b>--config</b> <u>String</u> ]
           [    <b>--devices</b> <u>PV</u> ]
           [    <b>--devicesfile</b> <u>String</u> ]
           [    <b>--driverloaded</b> <b>y</b>|<b>n</b> ]
           [    <b>--journal</b> <u>String</u> ]
           [    <b>--lockopt</b> <u>String</u> ]
           [    <b>--longhelp</b> ]
           [    <b>--nohints</b> ]
           [    <b>--nolocking</b> ]
           [    <b>--profile</b> <u>String</u> ]
           [    <b>--version</b> ]

</pre><h4><b>OPTIONS</b></h4><pre>

       <b>--abort</b>
              Abort  any  pvmove  operations in progress. If a pvmove was started with the --atomic option, then
              all LVs will remain on the source PV.  Otherwise, segments that have been moved will remain on the
              destination PV, while unmoved segments will remain on the source PV.

       <b>--alloc</b> <b>contiguous</b>|<b>cling</b>|<b>cling_by_tags</b>|<b>normal</b>|<b>anywhere</b>|<b>inherit</b>
              Determines the allocation policy when a command needs to allocate Physical Extents (PEs) from  the
              VG.  Each VG and LV has an allocation policy which can be changed with vgchange/lvchange, or over‐
              ridden on the command line.  <b>normal</b> applies common  sense  rules  such  as  not  placing  parallel
              stripes  on  the same PV.  <b>inherit</b> applies the VG policy to an LV.  <b>contiguous</b> requires new PEs be
              placed adjacent to existing PEs.  <b>cling</b> places new PEs on the same PV as existing PEs in the  same
              stripe  of  the  LV.  If there are sufficient PEs for an allocation, but normal does not use them,
              <b>anywhere</b> will use them even if it reduces performance, e.g. by placing two stripes on the same PV.
              Optional positional PV args on the command line can also be used to limit which  PVs  the  command
              will use for allocation.  See <b><a href="../man8/lvm.8.html">lvm</a></b>(8) for more information about allocation.

       <b>--atomic</b>
              Makes  a  pvmove operation atomic, ensuring that all affected LVs are moved to the destination PV,
              or none are if the operation is aborted.

       <b>-A</b>|<b>--autobackup</b> <b>y</b>|<b>n</b>
              Specifies if metadata should be backed up automatically after a change.  Enabling this is strongly
              advised!  See <b><a href="../man8/vgcfgbackup.8.html">vgcfgbackup</a></b>(8) for more information.

       <b>-b</b>|<b>--background</b>
              If the operation requires polling, this option causes the command to return before  the  operation
              is complete, and polling is done in the background.

       <b>--commandprofile</b> <u>String</u>
              The  command profile to use for command configuration.  See <b><a href="../man5/lvm.conf.5.html">lvm.conf</a></b>(5) for more information about
              profiles.

       <b>--config</b> <u>String</u>
              Config settings for the command. These override <b><a href="../man5/lvm.conf.5.html">lvm.conf</a></b>(5) settings.  The  String  arg  uses  the
              same format as <b><a href="../man5/lvm.conf.5.html">lvm.conf</a></b>(5), or may use section/field syntax.  See <b><a href="../man5/lvm.conf.5.html">lvm.conf</a></b>(5) for more information
              about config.

       <b>-d</b>|<b>--debug</b> ...
              Set  debug level. Repeat from 1 to 6 times to increase the detail of messages sent to the log file
              and/or syslog (if configured).

       <b>--devices</b> <u>PV</u>
              Restricts the devices that are visible and accessible to the command.  Devices not listed will ap‐
              pear to be missing. This option can be repeated, or accepts a comma  separated  list  of  devices.
              This overrides the devices file.

       <b>--devicesfile</b> <u>String</u>
              A  file listing devices that LVM should use.  The file must exist in <u>/etc/lvm/devices/</u> and is man‐
              aged with the <b><a href="../man8/lvmdevices.8.html">lvmdevices</a></b>(8) command.  This overrides the <b><a href="../man5/lvm.conf.5.html">lvm.conf</a></b>(5) <b>devices/devicesfile</b>  and  <b>de‐</b>
              <b>vices/use_devicesfile</b> settings.

       <b>--driverloaded</b> <b>y</b>|<b>n</b>
              If set to no, the command will not attempt to use device-mapper.  For testing and debugging.

       <b>-h</b>|<b>--help</b>
              Display help text.

       <b>-i</b>|<b>--interval</b> <u>Number</u>
              Report progress at regular intervals.

       <b>--journal</b> <u>String</u>
              Record information in the systemd journal.  This information is in addition to information enabled
              by  the  lvm.conf  log/journal  setting.   command: record information about the command.  output:
              record the default command output.  debug: record full command debugging.

       <b>--lockopt</b> <u>String</u>
              Used to pass options for special cases to lvmlockd.  See <b><a href="../man8/lvmlockd.8.html">lvmlockd</a></b>(8) for more information.

       <b>--longhelp</b>
              Display long help text.

       <b>-n</b>|<b>--name</b> <u>String</u>
              Move only the extents belonging to the named LV.

       <b>--nohints</b>
              Do not use the hints file to locate devices for PVs. A command may read more devices to  find  PVs
              when  hints are not used. The command will still perform standard hint file invalidation where ap‐
              propriate.

       <b>--nolocking</b>
              Disable locking. Use with caution, concurrent commands may produce incorrect results.

       <b>--noudevsync</b>
              Disables udev synchronization. The process will not wait for notification from udev. It will  con‐
              tinue irrespective of any possible udev processing in the background. Only use this if udev is not
              running or has rules that ignore the devices LVM creates.

       <b>--profile</b> <u>String</u>
              An alias for --commandprofile or --metadataprofile, depending on the command.

       <b>-q</b>|<b>--quiet</b> ...
              Suppress  output  and log messages. Overrides --debug and --verbose.  Repeat once to also suppress
              any prompts with answer 'no'.

       <b>--reportformat</b> <b>basic</b>|<b>json</b>|<b>json_std</b>
              Overrides current output format for reports which is defined globally by the  report/output_format
              setting  in  <b><a href="../man5/lvm.conf.5.html">lvm.conf</a></b>(5).   <b>basic</b>  is the original format with columns and rows.  If there is more
              than one report per command, each report is prefixed with the report name for identification. <b>json</b>
              produces report output in JSON format. <b>json_std</b> produces report output in  JSON  format  which  is
              more compliant with JSON standard.  See <b><a href="../man7/lvmreport.7.html">lvmreport</a></b>(7) for more information.

       <b>-t</b>|<b>--test</b>
              Run in test mode. Commands will not update metadata.  This is implemented by disabling all metada‐
              ta  writing  but  nevertheless returning success to the calling function. This may lead to unusual
              error messages in multi-stage operations if a tool relies on reading back metadata it believes has
              changed but hasn't.

       <b>-v</b>|<b>--verbose</b> ...
              Set verbose level. Repeat from 1 to 4 times to increase the detail of messages sent to stdout  and
              stderr.

       <b>--version</b>
              Display version information.

       <b>-y</b>|<b>--yes</b>
              Do  not  prompt  for confirmation interactively but always assume the answer yes. Use with extreme
              caution.  (For automatic no, see -qq.)

</pre><h4><b>VARIABLES</b></h4><pre>
       <u>PV</u>     Physical Volume name, a device path under /dev.  For commands managing physical extents, a PV  po‐
              sitional  arg  generally  accepts a suffix indicating a range (or multiple ranges) of physical ex‐
              tents (PEs). When the first PE is omitted, it defaults to the start of the device,  and  when  the
              last  PE is omitted it defaults to end.  Start and end range (inclusive): <u>PV</u>[<b>:</b><u>PE</u><b>-</b><u>PE</u>]...  Start and
              length range (counting from 0): <u>PV</u>[<b>:</b><u>PE</u><b>+</b><u>PE</u>]...

       <u>String</u> See the option description for information about the string content.

       <u>Size</u>[UNIT]
              Size is an input number that accepts an optional unit.  Input units are always treated as base two
              values, regardless of capitalization, e.g. 'k' and 'K' both refer to 1024.  The default input unit
              is specified by letter, followed by |UNIT.  UNIT represents other possible  input  units:  <b>b</b>|<b>B</b>  is
              bytes,  <b>s</b>|<b>S</b>  is  sectors of 512 bytes, <b>k</b>|<b>K</b> is KiB, <b>m</b>|<b>M</b> is MiB, <b>g</b>|<b>G</b> is GiB, <b>t</b>|<b>T</b> is TiB, <b>p</b>|<b>P</b> is PiB,
              <b>e</b>|<b>E</b> is EiB.  (This should not be confused with the output control --units, where  capital  letters
              mean multiple of 1000.)

</pre><h4><b>ENVIRONMENT</b> <b>VARIABLES</b></h4><pre>
       See  <b><a href="../man8/lvm.8.html">lvm</a></b>(8) for information about environment variables used by lvm.  For example, LVM_VG_NAME can gener‐
       ally be substituted for a required VG parameter.

</pre><h4><b>NOTES</b></h4><pre>
       pvmove works as follows:

       1. A temporary 'pvmove' LV is created to store details of all the data movements required.

       2. Every LV in the VG is searched for contiguous data that need moving according to the command line  ar‐
       guments.  For each piece of data found, a new segment is added to the end of the pvmove LV.  This segment
       takes the form of a temporary mirror to copy the data from the original location to a newly allocated lo‐
       cation.   The  original LV is updated to use the new temporary mirror segment in the pvmove LV instead of
       accessing the data directly.

       3. The VG metadata is updated on disk.

       4. The first segment of the pvmove LV is activated and starts to mirror the first part of the data.  Only
       one segment is mirrored at once as this is usually more efficient.

       5. A daemon repeatedly checks progress at the specified time interval.  When it detects  that  the  first
       temporary  mirror is in sync, it breaks that mirror so that only the new location for that data gets used
       and writes a checkpoint into the VG metadata on disk.  Then it activates the mirror for the next  segment
       of the pvmove LV.

       6.  When  there are no more segments left to be mirrored, the temporary LV is removed and the VG metadata
       is updated so that the LVs reflect the new data locations.

       Note that this new process cannot support the original LVM1 type of on-disk metadata.   Metadata  can  be
       converted using <b><a href="../man8/vgconvert.8.html">vgconvert</a></b>(8).

       If  the  <b>--atomic</b> option is used, a slightly different approach is used for the move.  Again, a temporary
       'pvmove' LV is created to store the details of all the data movements required.  This temporary  LV  con‐
       tains  all the segments of the various LVs that need to be moved.  However, in this case, an identical LV
       is allocated that contains the same number of segments and a mirror is created to copy the contents  from
       the  first  temporary  LV  to  the second.  After a complete copy is made, the temporary LVs are removed,
       leaving behind the segments on the destination PV.  If an abort is issued during the move, all LVs  being
       moved will remain on the source PV.

</pre><h4><b>EXAMPLES</b></h4><pre>
       Move  all physical extents that are used by simple LVs on the specified PV to free physical extents else‐
       where in the VG.
       <b>pvmove</b> <b>/dev/sdb1</b>

       Use a specific destination PV when moving physical extents.
       <b>pvmove</b> <b>/dev/sdb1</b> <b>/dev/sdc1</b>

       Move extents belonging to a single LV.
       <b>pvmove</b> <b>-n</b> <b>lvol1</b> <b>/dev/sdb1</b> <b>/dev/sdc1</b>

       Rather than moving the contents of an entire device, it is possible to move a range of physical  extents,
       for example numbers 1000 to 1999 inclusive on the specified PV.
       <b>pvmove</b> <b>/dev/sdb1:1000-1999</b>

       A range of physical extents to move can be specified as start+length. For example, starting from PE 1000.
       (Counting starts from 0, so this refers to the 1001st to the 2000th PE inclusive.)
       <b>pvmove</b> <b>/dev/sdb1:1000+1000</b>

       Move a range of physical extents to a specific PV (which must have sufficient free extents).
       <b>pvmove</b> <b>/dev/sdb1:1000-1999</b> <b>/dev/sdc1</b>

       Move a range of physical extents to specific new extents on a new PV.
       <b>pvmove</b> <b>/dev/sdb1:1000-1999</b> <b>/dev/sdc1:0-999</b>

       If the source and destination are on the same disk, the <b>anywhere</b> allocation policy is needed.
       <b>pvmove</b> <b>--alloc</b> <b>anywhere</b> <b>/dev/sdb1:1000-1999</b> <b>/dev/sdb1:0-999</b>

       The part of a specific LV present within in a range of physical extents can also be picked out and moved.
       <b>pvmove</b> <b>-n</b> <b>lvol1</b> <b>/dev/sdb1:1000-1999</b> <b>/dev/sdc1</b>

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man8/lvm.8.html">lvm</a></b>(8), <b><a href="../man5/lvm.conf.5.html">lvm.conf</a></b>(5), <b><a href="../man8/lvmconfig.8.html">lvmconfig</a></b>(8), <b><a href="../man8/lvmdevices.8.html">lvmdevices</a></b>(8),

       <b><a href="../man8/pvchange.8.html">pvchange</a></b>(8), <b><a href="../man8/pvck.8.html">pvck</a></b>(8), <b><a href="../man8/pvcreate.8.html">pvcreate</a></b>(8), <b><a href="../man8/pvdisplay.8.html">pvdisplay</a></b>(8), <b><a href="../man8/pvmove.8.html">pvmove</a></b>(8), <b><a href="../man8/pvremove.8.html">pvremove</a></b>(8), <b><a href="../man8/pvresize.8.html">pvresize</a></b>(8), <b><a href="../man8/pvs.8.html">pvs</a></b>(8), <b><a href="../man8/pvscan.8.html">pvscan</a></b>(8),

       <b><a href="../man8/vgcfgbackup.8.html">vgcfgbackup</a></b>(8), <b><a href="../man8/vgcfgrestore.8.html">vgcfgrestore</a></b>(8), <b><a href="../man8/vgchange.8.html">vgchange</a></b>(8), <b><a href="../man8/vgck.8.html">vgck</a></b>(8), <b><a href="../man8/vgcreate.8.html">vgcreate</a></b>(8), <b><a href="../man8/vgconvert.8.html">vgconvert</a></b>(8), <b><a href="../man8/vgdisplay.8.html">vgdisplay</a></b>(8),
       <b><a href="../man8/vgexport.8.html">vgexport</a></b>(8), <b><a href="../man8/vgextend.8.html">vgextend</a></b>(8), <b><a href="../man8/vgimport.8.html">vgimport</a></b>(8), <b><a href="../man8/vgimportclone.8.html">vgimportclone</a></b>(8), <b><a href="../man8/vgimportdevices.8.html">vgimportdevices</a></b>(8), <b><a href="../man8/vgmerge.8.html">vgmerge</a></b>(8), <b><a href="../man8/vgmknodes.8.html">vgmknodes</a></b>(8),
       <b><a href="../man8/vgreduce.8.html">vgreduce</a></b>(8), <b><a href="../man8/vgremove.8.html">vgremove</a></b>(8), <b><a href="../man8/vgrename.8.html">vgrename</a></b>(8), <b><a href="../man8/vgs.8.html">vgs</a></b>(8), <b><a href="../man8/vgscan.8.html">vgscan</a></b>(8), <b><a href="../man8/vgsplit.8.html">vgsplit</a></b>(8),

       <b><a href="../man8/lvcreate.8.html">lvcreate</a></b>(8), <b><a href="../man8/lvchange.8.html">lvchange</a></b>(8), <b><a href="../man8/lvconvert.8.html">lvconvert</a></b>(8), <b><a href="../man8/lvdisplay.8.html">lvdisplay</a></b>(8), <b><a href="../man8/lvextend.8.html">lvextend</a></b>(8), <b><a href="../man8/lvreduce.8.html">lvreduce</a></b>(8), <b><a href="../man8/lvremove.8.html">lvremove</a></b>(8), <b><a href="../man8/lvrename.8.html">lvrename</a></b>(8),
       <b><a href="../man8/lvresize.8.html">lvresize</a></b>(8), <b><a href="../man8/lvs.8.html">lvs</a></b>(8), <b><a href="../man8/lvscan.8.html">lvscan</a></b>(8),

       <b><a href="../man8/lvm-fullreport.8.html">lvm-fullreport</a></b>(8), <b><a href="../man8/lvm-lvpoll.8.html">lvm-lvpoll</a></b>(8), <b><a href="../man8/blkdeactivate.8.html">blkdeactivate</a></b>(8), <b><a href="../man8/lvmdump.8.html">lvmdump</a></b>(8),

       <b><a href="../man8/dmeventd.8.html">dmeventd</a></b>(8), <b><a href="../man8/lvmpolld.8.html">lvmpolld</a></b>(8), <b><a href="../man8/lvmlockd.8.html">lvmlockd</a></b>(8), <b><a href="../man8/lvmlockctl.8.html">lvmlockctl</a></b>(8), <b><a href="../man8/cmirrord.8.html">cmirrord</a></b>(8), <b><a href="../man8/lvmdbusd.8.html">lvmdbusd</a></b>(8), <b><a href="../man8/fsadm.8.html">fsadm</a></b>(8),

       <b><a href="../man7/lvmsystemid.7.html">lvmsystemid</a></b>(7), <b><a href="../man7/lvmreport.7.html">lvmreport</a></b>(7), <b><a href="../man7/lvmcache.7.html">lvmcache</a></b>(7), <b><a href="../man7/lvmraid.7.html">lvmraid</a></b>(7), <b><a href="../man7/lvmthin.7.html">lvmthin</a></b>(7), <b><a href="../man7/lvmvdo.7.html">lvmvdo</a></b>(7), <b><a href="../man7/lvmautoactivation.7.html">lvmautoactivation</a></b>(7)

Red Hat, Inc.                           LVM TOOLS <a href="../man2/2.03.31.2.html">2.03.31</a>(2) (2025-02-27)                              <u><a href="../man8/PVMOVE.8.html">PVMOVE</a></u>(8)
</pre>
 </div>
</div></section>
</div>
</body>
</html>