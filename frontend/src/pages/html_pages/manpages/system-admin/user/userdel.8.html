<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>userdel - delete a user account and related files</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/passwd">passwd_4.17.4-2ubuntu1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       userdel - delete a user account and related files

</pre><h4><b>SYNOPSIS</b></h4><pre>

       <b>userdel</b> [options] <u>LOGIN</u>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>userdel</b> is a low level utility for removing users. On Debian, administrators should usually use
       <b><a href="../man8/deluser.8.html">deluser</a></b>(8) instead.

       The <b>userdel</b> command modifies the system account files, deleting all entries that refer to the user name
       <u>LOGIN</u>. The named user must exist.

</pre><h4><b>OPTIONS</b></h4><pre>
       The options which apply to the <b>userdel</b> command are:

       <b>-f</b>, <b>--force</b>
           This option forces the removal of the user account and any other requested actions, skipping any
           safety checks.

           <u>Note:</u> This option is dangerous and may leave your system in an inconsistent state.

       <b>-h</b>, <b>--help</b>
           Display help message and exit.

       <b>-r</b>, <b>--remove</b>
           Files in the user's home directory will be removed along with the home directory itself and the
           user's mail spool. Files located in other file systems will have to be searched for and deleted
           manually.

           The mail spool is defined by the <b>MAIL_DIR</b> variable in the login.defs file.

       <b>-R</b>, <b>--root</b> <u>CHROOT_DIR</u>
           Apply changes in the <u>CHROOT_DIR</u> directory and use the configuration files from the <u>CHROOT_DIR</u>
           directory. Only absolute paths are supported.

       <b>-P</b>, <b>--prefix</b> <u>PREFIX_DIR</u>
           Apply changes in the <u>PREFIX_DIR</u> directory and use the configuration files from the <u>PREFIX_DIR</u>
           directory. This option does not chroot and is intended for preparing a cross-compilation target. Some
           limitations: NIS and LDAP users/groups are not verified. PAM authentication is using the host files.
           No SELINUX support.

       <b>-Z</b>, <b>--selinux-user</b>
           Remove any SELinux user mapping for the user's login.

</pre><h4><b>CONFIGURATION</b></h4><pre>
       The following configuration variables in <a href="file:/etc/login.defs">/etc/login.defs</a> change the behavior of this tool:

       <b>MAIL_DIR</b> (string)
           The mail spool directory. This is needed to manipulate the mailbox when its corresponding user
           account is modified or deleted. If not specified, a compile-time default is used. The parameter
           CREATE_MAIL_SPOOL in <a href="file:/etc/default/useradd">/etc/default/useradd</a> determines whether the mail spool should be created.

       <b>MAIL_FILE</b> (string)
           Defines the location of the users mail spool files relatively to their home directory.

       The <b>MAIL_DIR</b> and <b>MAIL_FILE</b> variables are used by <b>useradd</b>, <b>usermod</b>, and <b>userdel</b> to create, move, or delete
       the user's mail spool.

       <b>MAX_MEMBERS_PER_GROUP</b> (number)
           Maximum members per group entry. When the maximum is reached, a new group entry (line) is started in
           <a href="file:/etc/group">/etc/group</a> (with the same name, same password, and same GID).

           The default value is 0, meaning that there are no limits in the number of members in a group.

           This feature (split group) permits to limit the length of lines in the group file. This is useful to
           make sure that lines for NIS groups are not larger than 1024 characters.

           If you need to enforce such limit, you can use 25.

           Note: split groups may not be supported by all tools (even in the Shadow toolsuite). You should not
           use this variable unless you really need it.

       <b>USERDEL_CMD</b> (string)
           If defined, this command is run when removing a user. It should remove any at/cron/print jobs etc.
           owned by the user to be removed (passed as the first argument).

           The return code of the script is not taken into account.

           Here is an example script, which removes the user's cron, at and print jobs:

               #! <a href="file:/bin/sh">/bin/sh</a>

               # Check for the required argument.
               if [ $# != 1 ]; then
                    echo "Usage: $0 username"
                    exit 1
               fi

               # Remove cron jobs.
               crontab -r -u $1

               # Remove at jobs.
               # Note that it will remove any jobs owned by the same UID,
               # even if it was shared by a different username.
               AT_SPOOL_DIR=/var/spool/cron/atjobs
               find $AT_SPOOL_DIR -name "[^.]*" -type f -user $1 -delete \;

               # Remove print jobs.
               lprm $1

               # All done.
               exit 0

       <b>USERGROUPS_ENAB</b> (boolean)
           If set to <u>yes</u>, <b>userdel</b> will remove the user's group if it contains no more members, and <b>useradd</b> will
           create by default a group with the name of the user.

</pre><h4><b>FILES</b></h4><pre>
       <a href="file:/etc/group">/etc/group</a>
           Group account information.

       <a href="file:/etc/login.defs">/etc/login.defs</a>
           Shadow password suite configuration.

       <a href="file:/etc/passwd">/etc/passwd</a>
           User account information.

       <a href="file:/etc/shadow">/etc/shadow</a>
           Secure user account information.

       /etc/shadow-maint/userdel-pre.d/*, /etc/shadow-maint/userdel-post.d/*
           Run-part files to execute during user deletion. The environment variable <b>ACTION</b> will be populated
           with <b>userdel</b> and <b>SUBJECT</b> with the username.  userdel-pre.d will be executed prior to any user
           deletion.  userdel-post.d will execute after user deletion. If a script exits non-zero then execution
           will terminate.

       <a href="file:/etc/subgid">/etc/subgid</a>
           Per user subordinate group IDs.

       <a href="file:/etc/subuid">/etc/subuid</a>
           Per user subordinate user IDs.

</pre><h4><b>EXIT</b> <b>VALUES</b></h4><pre>
       The <b>userdel</b> command exits with the following values:

       <u>0</u>
           success

       <u>1</u>
           can't update password file

       <u>2</u>
           invalid command syntax

       <u>6</u>
           specified user doesn't exist

       <u>8</u>
           user currently logged in

       <u>10</u>
           can't update group file

       <u>12</u>
           can't remove home directory

</pre><h4><b>CAVEATS</b></h4><pre>
       <b>userdel</b> will not allow you to remove an account if there are running processes which belong to this
       account. In that case, you may have to kill those processes or lock the user's password or account and
       remove the account later. The <b>-f</b> option can force the deletion of this account.

       You should manually check all file systems to ensure that no files remain owned by this user.

       You may not remove any NIS attributes on a NIS client. This must be performed on the NIS server.

       If <b>USERGROUPS_ENAB</b> is defined to <u>yes</u> in <a href="file:/etc/login.defs">/etc/login.defs</a>, <b>userdel</b> will delete the group with the same name
       as the user. To avoid inconsistencies in the passwd and group databases, <b>userdel</b> will check that this
       group is not used as a primary group for another user, and will just warn without deleting the group
       otherwise. The <b>-f</b> option can force the deletion of this group.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man1/chfn.1.html">chfn</a></b>(1), <b><a href="../man1/chsh.1.html">chsh</a></b>(1), <b><a href="../man1/passwd.1.html">passwd</a></b>(1), <b><a href="../man5/login.defs.5.html">login.defs</a></b>(5), <b><a href="../man8/gpasswd.8.html">gpasswd</a></b>(8), <b><a href="../man8/groupadd.8.html">groupadd</a></b>(8), <b><a href="../man8/groupdel.8.html">groupdel</a></b>(8), <b><a href="../man8/groupmod.8.html">groupmod</a></b>(8), <b><a href="../man5/subgid.5.html">subgid</a></b>(5),
       <b><a href="../man5/subuid.5.html">subuid</a></b>(5), <b><a href="../man8/useradd.8.html">useradd</a></b>(8), <b><a href="../man8/usermod.8.html">usermod</a></b>(8).

shadow-utils 4.17.4                                05/07/2025                                         <u><a href="../man8/USERDEL.8.html">USERDEL</a></u>(8)
</pre>
 </div>
</div></section>
</div>
</body>
</html>