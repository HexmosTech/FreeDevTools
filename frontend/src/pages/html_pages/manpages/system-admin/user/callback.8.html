<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>callback - call a user back, presenting a login prompt</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/mgetty">mgetty_1.2.1-2_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       callback - call a user back, presenting a login prompt

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>callback</b> [<b>-x</b>&lt;debug<b>level&gt;</b>] [<b>-V</b>] [<b>-l</b>&lt;modem<b>lines&gt;</b>] [<b>-m</b>&lt;initstring&gt;<b>]</b> [<b>-s</b>&lt;speed&gt;<b>]</b> [<b>-d</b>] [<b>-S</b>] [<u>phone-number</u>]

</pre><h4><b>DESCRIPTION</b></h4><pre>
       Call the given phone number (if none is given on the command line, ask user for one), and if a CONNECT is
       established, hand over control to <a href="../man8/mgetty.8.html">mgetty</a>(8) to present user with a login name prompt.

       <u>callback</u> is used for various purposes:

       * security: make sure your users are who they pretend to be by calling a well-known phone number.

       * cost savings: make your company call you back.

       <u>callback</u>  can  be  called  directly  from  the command line (but you must be "root" to do this, otherwise
       callback can't signal mgetty), or from mgetty's "login.config". See the login.config  file  shipped  with
       mgetty for an example.

</pre><h4><b>OPTIONS</b></h4><pre>
       <b>-x</b> <b>&lt;debug</b> <b>level&gt;</b>
              Use the given level of verbosity for logging - 0 means no logging, 5 is really noisy.

       <b>-V</b>     Print version number and quit.

       <b>-d</b>     Do not go into the background. This is helpful for debugging.

       <b>-l</b> <b>&lt;modem</b> <b>lines&gt;</b>
              Use  the  given  modem lines. Multiple lines can be separated by ":", as with <a href="../man8/sendfax.8.html">sendfax</a>(8). Example:
              callback -l tty1a:tty2a

       <b>-m</b> <b>&lt;init</b> <b>sequence&gt;</b>
              Set the modem initialization sequence (as usual: expect send expect  ...).   This  can  do  nearly
              everything,  as  long  as  it  leaves  the modem command responses on (that is, no ATQ1 here!) and
              switches the modem to data mode (AT+FCLASS=0) if it is used in data/fax mode.

       <b>-s</b> <b>&lt;speed&gt;</b>
              This is the bit rate that should be used for the machine-modem  connection.   Usually  you'll  set
              this via the "speed &lt;nnnn&gt;" option in "callback.config".

       <b>-S</b>     Use  the  line  where  callback is started from for dialing out. Callback can make use of multiple
              modem lines, and with this options, you can force it to use just one modem, the one where  a  call
              comes in.

</pre><h4><b>CONFIG</b> <b>FILE</b></h4><pre>
       <u>callback</u>    will   read   all   its   configuration   at   run-time   from   a   file,   usually   called
       /etc/mgetty/callback.config. See the documentation in the mgetty.info manual for details.

</pre><h4><b>DIAGNOSTICS</b></h4><pre>
       In most cases, <u>callback</u> can't print any error messages to the console,  because  it  must  detach  itself
       immediately  from  the  terminal, in case someone wants to be called back on the modem line he called in.
       So, nothing to print messages to...

       Because of this, all callback errors are logged to a protocol file (the extent of  the  data  written  is
       controlled  by the "-x" option), especially including the reason why a call was not made, or what exactly
       failed.

       Just two messages are printed on stdout, and those are self-explaining, a call from a non-root user,  and
       an invalid option.

</pre><h4><b>INTERNALS</b></h4><pre>
       How does it work?

       This  is  a  bit  tricky,  because  of the way <a href="../man8/init.8.html">init</a>(8) handles the <a href="../man5/utmp.5.html">utmp</a>(5) file.  You can't just have any
       program ask the user for a login name, and then start a "login shell", it won't work  (this  is  for  the
       same reason <u><a href="../man8/mgetty.8.html">mgetty</a>(8)</u> has to be started from /etc/inittab).

       So,  mgetty  has  to  do  the "asking for login name". But I do not want to have all that dialout code in
       mgetty, bloating it even more.

       The way it works is this: <u>callback</u> dials out on a modem device. It will only take a modem device that has
       a mgetty watching over it (!). When the connection is established (CONNECT), <u>callback</u> will send a  signal
       SIGUSR1  to  mgetty,  which,  in  turn,  will  send  the  same signal back to signal "I got your signal".
       <u>callback</u> then exits, and <u>mgetty</u> takes over the existing connection, prompts the user for  a  login  name,
       and forks off /bin/login.

       Conclusion:  this  will  not  work  with  mgetty  versions  before February 04, 1996 (no support for this
       signalling), and if it doesn't work for you, please send me <b>BOTH</b> the mgetty and the  callback  log  file,
       otherwise it's very hard to find the bugs.

</pre><h4><b>BUGS</b></h4><pre>
       <u>callback</u> is "alpha" code, not very stable right now.

       <u>callback</u> is fairly dumb concerning retries.

       <u>callback</u> must be run as root.

       Most of the documentation consists of "reading the source".

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <a href="../man8/mgetty.8.html">mgetty</a>(8), <a href="../man1/ct.1.html">ct</a>(1)

</pre><h4><b>AUTHOR</b></h4><pre>
       <u>callback</u> is Copyright (C) 1993-1996 by Gert Doering, &lt;<a href="mailto:gert@greenie.muc.de">gert@greenie.muc.de</a>&gt;.

greenie                                             27 Oct 93                                        <u><a href="../man8/callback.8.html">callback</a></u>(8)
</pre>
 </div>
</div></section>
</div>
</body>
</html>