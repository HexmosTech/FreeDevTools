<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>send-uucp - Send Usenet articles via UUCP</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/inn2">inn2_2.7.3-1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       send-uucp - Send Usenet articles via UUCP

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>send-uucp</b> [<u>site</u> ...]

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The <b>send-uucp</b> program processes batch files written by <a href="../man8/innd.8.html">innd</a>(8) to send Usenet articles to UUCP sites.  It
       reads a configuration file to control how it behaves with various sites.  Normally, it is run
       periodically out of cron to put together batches and send them to remote UUCP sites.

       It makes it possible to reduce bandwidth usage and to send news to remote UUCP sites which cannot receive
       a real-time feed (for instance if they are over dial-up connections).

</pre><h4><b>OPTIONS</b></h4><pre>
       Any arguments provided to the program are interpreted as a list of sites specified in <u>send-uucp.cf</u> for
       which batches should be generated.  If no arguments are supplied, then batches will be generated for all
       sites listed in that configuration file.

</pre><h4><b>CONFIGURATION</b></h4><pre>
       The sites to which articles are to be sent must be configured in the configuration file <u>send-uucp.cf</u> in
       <u>pathetc</u> as set in <u>inn.conf</u>.  Each site is specified with a line of the form:

           site[:host[:funnel]] [compressor [maxsize [batchtime]]]

       <u>site</u>
           The news site name being configured.  This must match a site name from <a href="../man5/newsfeeds.5.html">newsfeeds</a>(5).

       <u>host</u>
           The  UUCP  host  name  to which batches should be sent for this site.  If omitted, the news site name
           will be used as the UUCP host name.

       <u>funnel</u>
           In the case of a site configured as a funnel, <b>send-uucp</b> needs to  flush  the  channel  (or  exploder)
           being  used  as the target of the funnel instead of flushing the site.  This is the way to tell <b>send-</b>
           <b>uucp</b> the name of the channel or exploder to flush for  this  site.   If  not  specified,  default  to
           flushing the site.

       <u>compressor</u>
           The  compression  method  to  use  for batches.  This should be one of "bzip2", "compress", "gzip" or
           "none".  Arguments for the compression command may be specified by using "_" instead of spaces.   For
           example, "gzip_-9".  The default value is "gzip".

       <u>maxsize</u>
           The maximum size in bytes of a single batch <u>before</u> compression.  The default value is "500000" bytes.

       <u>batchtime</u>
           A  comma  separated  list  of  hours during which batches should be generated for a given site.  When
           <b>send-uucp</b> runs, a site will only be processed if the  current  hour  matches  one  of  the  hours  in
           <u>batchtime</u>.  The default is no limitation on when to generate batches.

       Fields are separated by spaces and only the site name needs to be specified, with defaults being used for
       unspecified  values.   If the first character on a line is a hash sign ("#") then the rest of the line is
       ignored.

</pre><h4><b>EXAMPLE</b></h4><pre>
       Here is an example for the <u>send-uucp.cf</u> configuration file:

           zoetermeer      gzip            1048576         5,18,22
           hoofddorp       gzip            1048576         5,18,22
           pa3ebv          gzip            1048576         5,18,22
           drinkel         bzip2           1048576         5,6,18,20,22,0,2
           manhole         compress        1048576         5,18,22
           owl             compress        1048576
           able
           pern::MYFUNNEL!

       This defines eight UUCP sites.  The first three and the last two use "gzip" compression, the fourth  site
       ("drinkel") uses "bzip2" and the remaining sites ("manhole" and "owl") use "compress".  The first six use
       a  batch  size of 1 MB, and the two last sites ("able" and "pern") use the default of 500,000 bytes.  The
       "zoetermeer", "hoofddorp", "pa3ebv", and "manhole" sites will only have batches generated for them during
       the hours of 05:00, 18:00, and 22:00, and the "drinkel" site will  only  have  batches  generated  during
       those  hours  and  06:00,  20:00,  00:00,  and  02:00.  There are no restrictions on when batches will be
       generated for "owl", "able" and "pern".

       The "pern" site is configured as  a  funnel  into  "MYFUNNEL!".   <b>send-uucp</b>  will  issue  "ctlinnd  flush
       MYFUNNEL!" instead of "ctlinnd flush pern".

       As  for  the  <u>newsfeeds</u> file, the usual flags used for a UUCP feed are "Tf,Wnb".  Here is a typical entry
       for "zoetermeer", where the batching is kept between 4 KB and 1 KB:

           zoetermeer\
               :*,!junk,!control,!control.*/!foo\
               :Tf,Wnb,B4096/1024:

</pre><h4><b>SETTING</b> <b>UP</b> <b>UUCP</b> <b>FEEDS</b></h4><pre>
       Here are the steps to follow to set up a UUCP feed over SSH between two  news  servers,  using  the  UUCP
       implementation  available  in  Debian  as  the  "uucp" package.  The mechanisms described below should be
       transposed if you use another UUCP implementation.  (And if you do, please  inform  the  INN  maintainers
       about  how  to  set  up  a  feed  with  another  UUCP  implementation,  so  that  it can be added to this
       documentation.)

       1.  First of all, make sure <b>rnews</b> is correctly installed setuid "news", owned by group "uucp",  and  mode
           "4550".   This  will  allow the UUCP subsystem to run <b>rnews</b> to process UUCP batches of news articles.
           The "configure" flag <b>--enable-uucp-rnews</b> takes care of it when  installing  INN.   Otherwise,  you'll
           have to manually change the permissions on <b>rnews</b>.

       2.  Install the "uucp" package.  It will notably provide <a href="../man8/uucico.8.html">uucico</a>(8) and <a href="../man1/uux.1.html">uux</a>(1).

       3.  Configure  in  <u>/etc/uucp/Poll</u> the remote news servers to poll, and the hours during which they are to
           be polled.  For instance, if you send to "news.server.to.feed" UUCP batches every 4  hours,  you  can
           use:

               schedule news.server.to.feed 00
               poll news.server.to.feed 00 04 08 12 16 20

           If sending is hourly, just list all the hours.

       4.  Configure  in  <u>/etc/uucp/call</u>  the  credentials  (usernames and passwords) to use when authenticating
           against remote news servers, one per line.  For instance:

               news.server.to.feed login password

       5.  Configure in <u>/etc/uucp/config</u> the UUCP name of the local news server.  For instance:

               nodename my.news.server

       6.  Check that <u>/etc/uucp/expire</u> fits your needs as for the number of days batches are retained as well as
           the configuration of daily reports.  Default values are normally fine, though you may want to receive
           a daily report only if unusual things happen (and in that case, just set "$important_only" to "1").

       7.  Configure in <u>/etc/uucp/passwd</u> the credentials (usernames and passwords  separated  by  a  tabulation)
           remote  news  servers  use  when  authenticating  against  the  local news server, one per line.  For
           instance:

               login&lt;TAB&gt;password

       8.  Configure in <u>/etc/uucp/sys</u> how remote news servers connect to the local news server.  A typical entry
           to set an SSH connection is the following one where <u>pathbin</u> should be changed to  the  real  path  to
           <b>rnews</b>:

               system news.server.to.feed
               call-login *
               call-password *
               commands &lt;pathbin&gt;/rnews
               time any
               chat "" \d\d\r\c ogin: \d\L word: \P
               chat-timeout 120
               protocol i
               port ssh.news.server.to.feed

       9.  Configure  in  <u>/etc/uucp/port</u>  how  to connect to remote news servers.  A typical entry to set an SSH
           connection using a private key is:

               port ssh.news.server.to.feed
               type pipe
               command <a href="file:/bin/ssh">/bin/ssh</a> -a -x -q -i &lt;key&gt; -l uucp news.server.to.feed
               reliable true
               protocol etyig

           where <u>key</u> is the path to  the  private  key  to  use  for  the  SSH  connection,  like  for  instance
           <u>/var/spool/uucp/.ssh/id_private_key</u>.

       10. Make  sure  the  administrators  of  remote  news  servers  have  added  the  public  key  related to
           <u>id_private_key</u> for connections to the "uucp" user of the remote news servers.

       11. Supposing the home directory of the "uucp" user is <u>/var/spool/uucp</u>, you need  to  configure  the  SSH
           keys  in  the  <u>.ssh</u>  subdirectory.   First,  add  the  public  keys  of  all  remote  news servers in
           <u>authorized_keys</u>.  A typical entry is the following one, which should be in 1 line (it is wrapped here
           for a proper display in man page):

               no-port-forwarding,no-X11-forwarding,no-agent-forwarding,
               command="/usr/sbin/uucico -l",from="news.server.to.feed"
               ssh-rsa xxxyyyzzz <a href="mailto:uucp@news.server.to.feed">uucp@news.server.to.feed</a>

           This ensures the SSH connection will not be used for another goal than exchanging UUCP batches.

       12. Make sure <u>id_private_key</u> is correctly present, as set in <u>/etc/uucp/port</u>, and  only  readable  by  the
           "uucp" user.

       13. Manually  run  as  the  "uucp" user the command set in <u>/etc/uucp/port</u> so as to create the <u>known_hosts</u>
           file to make sure the SSH setting is fine.

              <a href="file:/bin/ssh">/bin/ssh</a> -a -x -q -i &lt;key&gt; -l uucp news.server.to.feed

       14. Parameterize the feed to send to the remote servers.   A  typical  entry  in  <u>newsfeeds</u>  to  generate
           batches in <u>pathoutgoing</u> is:

               news.server.to.feed/pathname:*:Tf,Wnb,B4096/1024:

       15. Set  up  the  compression  method,  batch  sizes and when to generate them in <u>send-uucp.cf</u> located in
           <u>pathetc</u>, as described earlier in this documentation.

               news.server.to.feed   bzip2      1048576   3,7,11,15,19,23

       16. Check  that  <b>send-uucp</b>  is  started  hourly  in  crontab  by  the  "news"  user.   For  instance   in
           <u>/etc/cron.d/inn2</u>:

               52 * * * * news &lt;pathbin&gt;/send-uucp

           It  can  be  useful to set up a different launch time than your remote servers.  For instance, if you
           generate batches every hour at minute 52, a remote peer may do the same at minute 22.  This way,  you
           may exchange articles more frequently, depending on when each other connects.

       17. Check  that  UUCP programs are automatically started in crontab (usually, <b>uudemon.hr</b> is called hourly
           in <u>/etc/cron.d/uucp</u> to poll remote news servers, and <b>uudemon.day</b> daily in <u>/etc/cron.daily/uucp</u>).

           Like for <b>send-uucp</b>, adjust the launch time to maximize the number and the  freshness  of  batches  to
           exchanges.

       18. Check the logs in <u>/var/log/uucp</u> to ensure everything works fine, both polling and sending.

           You  will  see that <b>send-uucp</b> prepares <b>rnews</b> batches named like <u>D.0I8Y</u>, that are queued by <b>uux</b>.  When
           <b>uucico</b> is afterwards started from cron to transfer these batches, <b>uucico</b> takes available batches from
           the remote sites at the same time.  These received batches are then processed by  <b>uuxqt</b>  which  calls
           <b>rnews</b> to inject them.

           That's all!

</pre><h4><b>FILES</b></h4><pre>
       <u>pathbin</u>/send-uucp
           The Perl script itself used to create news batches from the outgoing files.

       <u>pathetc</u>/send-uucp.cf
           The configuration file which specifies a list of sites to be processed.

       <u>pathlog</u>/send-uucp.log
           The log file used if the syslog facility is not available.

</pre><h4><b>HISTORY</b></h4><pre>
       This  program  was  originally written by Edvard Tuinder &lt;<a href="mailto:ed@elm.net">ed@elm.net</a>&gt; and then maintained and extended by
       Miquel van Smoorenburg  &lt;<a href="mailto:miquels@cistron.nl">miquels@cistron.nl</a>&gt;.   Marco  d'Itri  &lt;<a href="mailto:md@linux.it">md@linux.it</a>&gt;  cleaned  up  the  code  for
       inclusion in INN.  This manual page was originally written by Mark Brown &lt;<a href="mailto:broonie@sirena.org.uk">broonie@sirena.org.uk</a>&gt;, and the
       detailed procedure to set up a UUCP feed added by Julien Ã‰lie.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <a href="../man8/innd.8.html">innd</a>(8), <a href="../man5/newsfeeds.5.html">newsfeeds</a>(5), <a href="../man8/uucp.8.html">uucp</a>(8).

INN 2.7.3                                          2025-05-19                                       <u><a href="../man8/SEND-UUCP.8.html">SEND-UUCP</a></u>(8)
</pre>
 </div>
</div></section>
</div>
</body>
</html>