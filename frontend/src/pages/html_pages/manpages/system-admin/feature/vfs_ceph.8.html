<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>vfs_ceph - Utilize features provided by CephFS</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/samba-vfs-ceph">samba-vfs-ceph_4.22.3+dfsg-4ubuntu1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       vfs_ceph - Utilize features provided by CephFS

</pre><h4><b>SYNOPSIS</b></h4><pre>

       vfs objects = ceph

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This VFS module is part of the <b><a href="../man8/samba.8.html">samba</a></b>(8) suite.

       The vfs_ceph VFS module exposes CephFS specific features for use by Samba.

       Ceph is a distributed network file system designed to provide excellent performance, reliability, and
       scalability. This is a shared library allowing applications to access a Ceph distributed file system via
       a POSIX-like interface.

       This module can be combined with other modules, but it should be the last module in the vfs objects list.
       Modules added to this list to the right of the ceph entry may not have any effect at all.

       vfs_ceph performs mapping between Windows and POSIX Access Control Lists (ACLs). To ensure correct
       processing and enforcement of POSIX ACLs, the following Ceph configuration parameters are automatically
       applied:

                     client acl type = posix_acl
                     fuse default permissions = false

</pre><h4><b>CONFIGURATION</b></h4><pre>
       vfs_ceph requires that the underlying share path is a Ceph filesystem.

                     <u>[share]</u>
                     <b>vfs</b> <b>objects</b> <b>=</b> <b>ceph</b>
                     <b>path</b> <b>=</b> <b>/non-mounted/cephfs/path</b>
                     <b>kernel</b> <b>share</b> <b>modes</b> <b>=</b> <b>no</b>

       Since vfs_ceph does not require a filesystem mount, the share path is treated differently: it is
       interpreted as an absolute path within the Ceph filesystem on the attached Ceph cluster. In a ctdb
       cluster environment where ctdb manages Samba, CTDB_SAMBA_SKIP_SHARE_CHECK=yes must be configured to
       disable local share path checks, otherwise ctdb will not reach a healthy state.

       Note that currently kernel share modes have to be disabled in a share running with the CephFS vfs module
       for file serving to work properly.

</pre><h4><b>OPTIONS</b></h4><pre>
       ceph:config_file = path
           Allows one to define a ceph configfile to use. Empty by default.

           Example: ceph:config_file = /etc/ceph/ceph.conf

       ceph:user_id = name
           Allows one to explicitly set the client ID used for the CephFS mount handle. Empty by default (use
           the libcephfs client default).

           Example: ceph:user_id = samba

       ceph:filesystem = fs_name
           Allows one to explicitly select the CephFS file system to use when the Ceph cluster supports more
           than one file system. Empty by default (use the default file system of the Ceph cluster).

           Example: ceph:filesystem = myfs2

</pre><h4><b>VERSION</b></h4><pre>
       This man page is part of version 4.22.3-Ubuntu-4.22.3+dfsg-4ubuntu1 of the Samba suite.

</pre><h4><b>AUTHOR</b></h4><pre>
       The original Samba software and related utilities were created by Andrew Tridgell. Samba is now developed
       by the Samba Team as an Open Source project similar to the way the Linux kernel is developed.

Samba 4.22.3-Ubuntu-4.22.3+dfs                     07/21/2025                                        <u><a href="../man8/VFS_CEPH.8.html">VFS_CEPH</a></u>(8)
</pre>
 </div>
</div></section>
</div>
</body>
</html>