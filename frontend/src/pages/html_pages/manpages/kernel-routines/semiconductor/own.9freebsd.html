<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>own,  own_send_command,  own_commmand_wait,  own_self_command, own_acquire_bus, own crc, own_release_bus,</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/freebsd-manpages">freebsd-manpages_12.2-2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       own,  own_send_command,  own_commmand_wait,  own_self_command, own_acquire_bus, own crc, own_release_bus,
       OWN_ACQUIRE_BUS, OWN_CRC, OWN_RELEASE_BUS, OWN_SEND_COMMAND â€” Dallas  Semiconductor  1-Wire  Network  and
       Transport Interface

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;sys/bus.h&gt;</b>
       <b>#include</b> <b>&lt;dev/ow/own.h&gt;</b>

       <u>int</u>
       <b>own_send_command</b>(<u>device_t</u> <u>pdev</u>, <u>struct</u> <u>ow_cmd</u> <u>*cmd</u>);

       <u>int</u>
       <b>own_command_wait</b>(<u>device_t</u> <u>pdev</u>, <u>struct</u> <u>ow_cmd</u> <u>*cmd</u>);

       <u>int</u>
       <b>own_self_command</b>(<u>device_t</u> <u>pdev</u>, <u>struct</u> <u>ow_cmd</u> <u>*cmd</u>, <u>uint8_t</u> <u>xpt_cmd</u>);

       <u>int</u>
       <b>own_acquire_bus</b>(<u>device_t</u> <u>pdev</u>, <u>int</u> <u>how</u>);

       <u>int</u>
       <b>own_release_bus</b>(<u>device_t</u> <u>pdev</u>);

       <u>int</u>
       <b>own_crc</b>(<u>device_t</u> <u>pdev</u>, <u>uint8_t</u> <u>*buffer</u>, <u>size_t</u> <u>len</u>);

       <u>int</u>
       <b>OWN_SEND_COMMAND</b>(<u>device_t</u> <u>ndev</u>, <u>device_t</u> <u>pdev</u>, <u>struct</u> <u>ow_cmd</u> <u>*cmd</u>);

       <u>int</u>
       <b>OWN_ACQUIRE_BUS</b>(<u>device_t</u> <u>ndev</u>, <u>device_t</u> <u>pdev</u>, <u>int</u> <u>how</u>);

       <u>void</u>
       <b>OWN_RELEASE_BUS</b>(<u>device_t</u> <u>ndev</u>, <u>device_t</u> <u>pdev</u>);

       <u>uint8_t</u>
       <b>OWN_CRC</b>(<u>device_t</u> <u>ndev</u>, <u>device_t</u> <u>pdev</u>, <u>uint8_t</u> <u>*buffer</u>, <u>size_t</u> <u>len</u>);

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The  <b>own</b> interface defines three sets of functions for interacting with 1-Wire devices: sending commands,
       reserving the bus, and ensuring data integrity.  Wrappers are provided for the raw <b>OWN</b> <u><a href="../man9/kobj.9.html">kobj</a></u>(9) interfaces
       and should be used for improved safety over the <u><a href="../man9/kobj.9.html">kobj</a></u>(9) ones.

   <b>Bus</b> <b>Commands</b>
       The 1-Wire bus defines different layers of access to the devices on the bus.  The <b>own</b>  functions  provide
       access  to  the  network  and  transport  layers.  The network layer designates the next command as being
       either for all devices on the bus, or for a specific device.  The network layer also specifies the  speed
       used by the link layer.

       <u>struct</u>  <u>ow_cmd</u>  encapsulates network access, speed, and timing information.  It specifies the commands to
       send and whether or not to read data.  Its members are:

       <u>flags</u>
             Flags controlling the interpretation of the structure.  These flags are defined in &lt;<u>dev/ow/ow.h</u>&gt;:

             OW_FLAG_OVERDRIVE
                     Send <u>xpt_cmd</u> bytes and read <u>xpt_read</u> bytes at overdrive speed.

             OW_FLAG_READ_BIT
                     Interpret <u>xpt_read_len</u> to be in bits to be read after <u>xpt_cmd</u> rather than bytes.

       <u>rom_cmd</u>
             ROM command bytes to send.

       <u>rom_len</u>
             Number of ROM command bytes to send.

       <u>rom_read_len</u>
             Number of bytes to read after sending the ROM command.

       <u>rom_read</u>
             Buffer for bytes read after the ROM command.

       <u>xpt_cmd</u>
             Transport command to send.

       <u>xpt_len</u>
             Length of the transport command bytes to send.  Specify 0 for no transport command.

       <u>xpt_read_len</u>
             Number of bytes to read after <u>xpt_cmd</u> bytes are sent.  If the OW_FLAG_READ_BIT bit is set in <u>flags</u>,
             then it is the number of bits to read.  Bits read are packed into bytes.

       <u>xpt_read</u>
             Buffer for data read.

       <b>own_command_wait</b>() acquires the 1-Wire bus, waiting if necessary, sends the command,  and  then  releases
       the  bus.   <b>own_send_command</b>() sends the command without bus reservation.  <u>pdev</u> is the client device (the
       presentation layer device) sending the command.  The <u>cmd</u> argument describes the transaction  to  send  to
       the 1-Wire bus.

       <b>own_self_command</b>()  fills in <u>cmd</u> with a MATCH_ROM ROM command, the ROM address of <u>pdev</u> and the <u>xpt_cmd</u> as
       a convenient way to create directed commands.

   <b>Bus</b> <b>Reservation</b>
       The 1-Wire system includes an advisory lock for the bus  that  presentation  layer  devices  can  use  to
       coordinate access.  Locking is purely advisory at this time.

       <b>own_acquire_bus</b>()  reserves  the  bus.  It waits indefinitely if the <u>how</u> argument is OWN_WAIT and returns
       the error EWOULDBLOCK if passed OWN_DONTWAIT when the bus is owned by another client.

       <b>own_release_bus</b>() releases the bus.

   <b>Data</b> <b>Integrity</b>
       <b>own_crc</b>() computes the 1-Wire standard CRC function over the data passed in <u>buffer</u> and  <u>len</u>  and  returns
       the result.

   <b>Notes</b>
       The  1-Wire  standard  (Maxim  AN937)  defines layers that are akin to ISO networking layers.  The lowest
       relevant layer, the link layer, defines the polling windows and the timing of the signaling of  different
       modes.   The  network layer is built on top of the link layer and is used to address devices in a unicast
       or multicast manner.  The  transport  layer  defines  commands  and  responses  from  the  devices.   The
       presentation  layer  is composed of the device specific commands and actions used to control the specific
       1-Wire devices on bus.

       These interfaces are implemented by the <u><a href="../man4/ow.4.html">ow</a></u>(4) device.  Presentation layer devices (children of the newbus
       <u><a href="../man4/ow.4.html">ow</a></u>(4) device) should only call the functions described here.  The functionality provided  by  the  <u><a href="../man4/owc.4.html">owc</a></u>(4)
       device (specifically the <u><a href="../man9/owll.9.html">owll</a></u>(9) interface) should only be called by the <u><a href="../man4/ow.4.html">ow</a></u>(4) driver.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <u><a href="../man4/ow.4.html">ow</a></u>(4), <u><a href="../man4/owc.4.html">owc</a></u>(4), <u><a href="../man9/owll.9.html">owll</a></u>(9) <u>https://pdfserv.maximintegrated.com/en/an/AN937.pdf</u>

</pre><h4><b>LEGAL</b></h4><pre>
       1-Wire is a registered trademark of Maxim Integrated Products, Inc.

</pre><h4><b>HISTORY</b></h4><pre>
       The <b>own</b> driver first appeared in FreeBSD 11.0.

</pre><h4><b>AUTHORS</b></h4><pre>
       The <b>own</b> device driver and this manual page were written by Warner Losh.

Debian                                            July 20, 2015                                           <u><a href="../man9/OWN.9.html">OWN</a></u>(9)
</pre>
 </div>
</div></section>
</div>
</body>
</html>