<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>module — structure describing a kernel module</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/freebsd-manpages">freebsd-manpages_12.2-2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       module — structure describing a kernel module

</pre><h4><b>DESCRIPTION</b></h4><pre>
       Each  module  in the kernel is described by a <u>module_t</u> structure.  The structure contains the name of the
       device, a unique ID number, a pointer to an event handler function and to an argument, which is given  to
       the event handler, as well as some kernel internal data.

       The <u><a href="../man9/DECLARE_MODULE.9.html">DECLARE_MODULE</a></u>(9) macro registers the module with the system.

       When the module is loaded, the event handler function is called with the <u>what</u> argument set to MOD_LOAD.

       On  unload  it  is  first  called with <u>what</u> set to MOD_QUIESCE.  If the unload was not forced, a non-zero
       return will prevent the unload from happening.

       If the unload continues <u>what</u> is set to MOD_UNLOAD.  If the module returns non-zero to  this,  the  unload
       will not happen.

       The  difference  between  MOD_QUIESCE  and MOD_UNLOAD is that the module should fail MOD_QUIESCE if it is
       currently in use, whereas MOD_UNLOAD should only fail if it is  impossible  to  unload  the  module,  for
       instance because there are memory references to the module which cannot be revoked.

       When the system is shutting down, <u>what</u> contains the value of MOD_SHUTDOWN.

       The module should return EOPNOTSUPP for unsupported and unrecognized values of <u>what</u>.

</pre><h4><b>EXAMPLES</b></h4><pre>
       #include &lt;sys/param.h&gt;
       #include &lt;sys/kernel.h&gt;
       #include &lt;sys/module.h&gt;

       static int foo_handler(module_t mod, int /*modeventtype_t*/ what,
                              void *arg);

       static moduledata_t mod_data= {
               "foo",
               foo_handler,
               NULL
       };

       MODULE_VERSION(foo, 1);
       MODULE_DEPEND(foo, bar, 1, 3, 4);

       DECLARE_MODULE(foo, mod_data, SI_SUB_EXEC, SI_ORDER_ANY);

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <u><a href="../man9/DECLARE_MODULE.9.html">DECLARE_MODULE</a></u>(9),     <u><a href="../man9/DEV_MODULE.9.html">DEV_MODULE</a></u>(9),     <u><a href="../man9/DRIVER_MODULE.9.html">DRIVER_MODULE</a></u>(9),     <u><a href="../man9/MODULE_DEPEND.9.html">MODULE_DEPEND</a></u>(9),     <u><a href="../man9/MODULE_PNP_INFO.9.html">MODULE_PNP_INFO</a></u>(9),
       <u><a href="../man9/MODULE_VERSION.9.html">MODULE_VERSION</a></u>(9), <u><a href="../man9/SYSCALL_MODULE.9.html">SYSCALL_MODULE</a></u>(9)

       <u>/usr/share/examples/kld</u>

</pre><h4><b>AUTHORS</b></h4><pre>
       This manual page was written by Alexander Langer &lt;<u><a href="mailto:alex@FreeBSD.org">alex@FreeBSD.org</a></u>&gt;.

Debian                                          February 12, 2018                                      <u><a href="../man9/MODULE.9.html">MODULE</a></u>(9)
</pre>
 </div>
</div></section>
</div>
</body>
</html>