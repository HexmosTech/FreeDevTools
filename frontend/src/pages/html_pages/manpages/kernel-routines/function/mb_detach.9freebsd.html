<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>mbchain,  mb_init,  mb_initm,  mb_done,  mb_detach, mb_fixhdr, mb_reserve, mb_put_uint8, mb_put_uint16be,</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/freebsd-manpages">freebsd-manpages_12.2-2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       mbchain,  mb_init,  mb_initm,  mb_done,  mb_detach, mb_fixhdr, mb_reserve, mb_put_uint8, mb_put_uint16be,
       mb_put_uint16le,   mb_put_uint32be,   mb_put_uint32le,   mb_put_int64be,   mb_put_int64le,    mb_put_mem,
       mb_put_mbuf, mb_put_uio — set of functions to build an mbuf chain from various data types

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>options</b> <b>LIBMCHAIN</b>
       <b>kldload</b> <b>libmchain</b>

       <b>#include</b> <b>&lt;sys/param.h&gt;</b>
       <b>#include</b> <b>&lt;sys/uio.h&gt;</b>
       <b>#include</b> <b>&lt;sys/mchain.h&gt;</b>

       <u>int</u>
       <b>mb_init</b>(<u>struct</u> <u>mbchain</u> <u>*mbp</u>);

       <u>void</u>
       <b>mb_initm</b>(<u>struct</u> <u>mbchain</u> <u>*mbp</u>, <u>struct</u> <u>mbuf</u> <u>*m</u>);

       <u>void</u>
       <b>mb_done</b>(<u>struct</u> <u>mbchain</u> <u>*mbp</u>);

       <u>struct</u> <u>mbuf</u> <u>*</u>
       <b>mb_detach</b>(<u>struct</u> <u>mbchain</u> <u>*mbp</u>);

       <u>int</u>
       <b>mb_fixhdr</b>(<u>struct</u> <u>mbchain</u> <u>*mbp</u>);

       <u>caddr_t</u>
       <b>mb_reserve</b>(<u>struct</u> <u>mbchain</u> <u>*mbp</u>, <u>int</u> <u>size</u>);

       <u>int</u>
       <b>mb_put_uint8</b>(<u>struct</u> <u>mbchain</u> <u>*mbp</u>, <u>uint8_t</u> <u>x</u>);

       <u>int</u>
       <b>mb_put_uint16be</b>(<u>struct</u> <u>mbchain</u> <u>*mbp</u>, <u>uint16_t</u> <u>x</u>);

       <u>int</u>
       <b>mb_put_uint16le</b>(<u>struct</u> <u>mbchain</u> <u>*mbp</u>, <u>uint16_t</u> <u>x</u>);

       <u>int</u>
       <b>mb_put_uint32be</b>(<u>struct</u> <u>mbchain</u> <u>*mbp</u>, <u>uint32_t</u> <u>x</u>);

       <u>int</u>
       <b>mb_put_uint32le</b>(<u>struct</u> <u>mbchain</u> <u>*mbp</u>, <u>uint32_t</u> <u>x</u>);

       <u>int</u>
       <b>mb_put_int64be</b>(<u>struct</u> <u>mbchain</u> <u>*mbp</u>, <u>int64_t</u> <u>x</u>);

       <u>int</u>
       <b>mb_put_int64le</b>(<u>struct</u> <u>mbchain</u> <u>*mbp</u>, <u>int64_t</u> <u>x</u>);

       <u>int</u>
       <b>mb_put_mem</b>(<u>struct</u> <u>mbchain</u> <u>*mbp</u>, <u>c_caddr_t</u> <u>source</u>, <u>int</u> <u>size</u>, <u>int</u> <u>type</u>);

       <u>int</u>
       <b>mb_put_mbuf</b>(<u>struct</u> <u>mbchain</u> <u>*mbp</u>, <u>struct</u> <u>mbuf</u> <u>*m</u>);

       <u>int</u>
       <b>mb_put_uio</b>(<u>struct</u> <u>mbchain</u> <u>*mbp</u>, <u>struct</u> <u>uio</u> <u>*uiop</u>, <u>int</u> <u>size</u>);

</pre><h4><b>DESCRIPTION</b></h4><pre>
       These  functions  are used to compose mbuf chains from various data types.  The <u>mbchain</u> structure is used
       as a working context and should be initialized with a call to either <b>mb_init</b>() or <b>mb_initm</b>().  It has the
       following fields:

       <u>mb_top</u>    (<u>struct</u> <u>mbuf</u> <u>*</u>) A pointer to the top of constructed mbuf chain.

       <u>mb_cur</u>    (<u>struct</u> <u>mbuf</u> <u>*</u>) A pointer to the currently filled mbuf.

       <u>mb_mleft</u>  (<u>int</u>) Number of bytes left in the current mbuf.

       <u>mb_count</u>  (<u>int</u>) Total number of bytes placed in the mbuf chain.

       <u>mb_copy</u>   (<u>mb_copy_t</u> <u>*</u>) User-defined function to perform a copy into mbuf; useful  if  any  unusual  data
                 conversion is necessary.

       <u>mb_udata</u>  (<u>void</u> <u>*</u>) User-supplied data which can be used in the <u>mb_copy</u> function.

       <b>mb_done</b>() function disposes an mbuf chain pointed to by <u>mbp-&gt;mb_top</u> field and sets the field to NULL.

       <b>mb_detach</b>() function returns the value of <u>mbp-&gt;mb_top</u> field and sets its value to NULL.

       <b>mb_fixhdr</b>() recalculates the length of an mbuf chain and updates the <u>m_pkthdr.len</u> field of the first mbuf
       in the chain.  It returns the calculated length.

       <b>mb_reserve</b>() ensures that the object of the length specified by the <u>size</u> argument will fit in the current
       mbuf  (mbuf  allocation  is  performed  if  necessary), and advances all pointers as if the real data was
       placed.  Returned value will point to the beginning of the reserved space.  Note that  the  size  of  the
       object should not exceed MLEN bytes.

       All  <b>mb_put_*</b>() functions perform an actual copy of the data into mbuf chain.  Functions which have <b>le</b> or
       <b>be</b> suffixes will perform conversion to the little- or big-endian data formats.

       <b>mb_put_mem</b>() function copies <u>size</u> bytes of data specified by the <u>source</u> argument to an mbuf  chain.   The
       <u>type</u> argument specifies the method used to perform a copy, and can be one of the following:

       MB_MSYSTEM  Use <b>bcopy</b>() function.

       MB_MUSER    Use <u><a href="../man9/copyin.9.html">copyin</a></u>(9) function.

       MB_MINLINE  Use an “inline” loop which does not call any function.

       MB_MZERO    Do not copy any data, but just fill the destination with zero bytes.

       MB_MCUSTOM  Call function specified by the <u>mbp-&gt;mb_copy</u> field.

</pre><h4><b>RETURN</b> <b>VALUES</b></h4><pre>
       All <u>int</u> functions except <b>mb_fixhdr</b>() return zero if successful and an error code otherwise.

       <u>Note</u>:  after  failure  of  any  function,  an  mbuf chain is left in the broken state, and only <b>mb_done</b>()
       function can safely be called to destroy it.

</pre><h4><b>EXAMPLES</b></h4><pre>
       struct mbchain *mbp;
       struct mbuf *m;

       <a href="../manmbp/mb_init.mbp.html">mb_init</a>(mbp);
       mb_put_uint8(mbp, 33);
       mb_put_uint16le(mbp, length);
       m = m_copym(mbp-&gt;mb_top, 0, M_COPYALL, M_WAIT);
       <a href="../manm/send.m.html">send</a>(m);
       <a href="../manmbp/mb_done.mbp.html">mb_done</a>(mbp);

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <u><a href="../man9/mbuf.9.html">mbuf</a></u>(9), <u><a href="../man9/mdchain.9.html">mdchain</a></u>(9)

</pre><h4><b>AUTHORS</b></h4><pre>
       This manual page was written by Boris Popov &lt;<u><a href="mailto:bp@FreeBSD.org">bp@FreeBSD.org</a></u>&gt;.

Debian                                          February 20, 2001                                     <u><a href="../man9/MBCHAIN.9.html">MBCHAIN</a></u>(9)
</pre>
 </div>
</div></section>
</div>
</body>
</html>