<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PCI_IOV_ADD_VF — inform a PF driver that a VF is being created</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/freebsd-manpages">freebsd-manpages_12.2-2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       PCI_IOV_ADD_VF — inform a PF driver that a VF is being created

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;sys/bus.h&gt;</b>
       <b>#include</b> <b>&lt;machine/stdarg.h&gt;</b>
       <b>#include</b> <b>&lt;sys/nv.h&gt;</b>
       <b>#include</b> <b>&lt;dev/pci/pci_iov.h&gt;</b>

       <u>int</u>
       <b>PCI_IOV_ADD_VF</b>(<u>device_t</u> <u>dev</u>, <u>uint16_t</u> <u>vfnum</u>, <u>const</u> <u>nvlist_t</u> <u>*vf_config</u>);

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The  <b>PCI_IOV_ADD_VF</b>()  method is called by the PCI Single-Root I/O Virtualization (SR-IOV) infrastructure
       when it is initializating a new Virtual Function (VF) as a child of  the  given  Physical  Function  (PF)
       device.   This method will not be called until a successful call to <u><a href="../man9/PCI_IOV_INIT.9.html">PCI_IOV_INIT</a></u>(9) has been made.  It is
       not guaranteed that this method will be called following a successful call to  <u><a href="../man9/PCI_IOV_INIT.9.html">PCI_IOV_INIT</a></u>(9).   If  the
       infrastructure  encounters  a failure to allocate resources following the call to <u><a href="../man9/PCI_IOV_INIT.9.html">PCI_IOV_INIT</a></u>(9), the VF
       creation will be aborted and <u><a href="../man9/PCI_IOV_UNINIT.9.html">PCI_IOV_UNINIT</a></u>(9) will be called immediately without any preceding calls  to
       <b>PCI_IOV_ADD_VF</b>.

       The  index  of  the  VF  being  initialized  is  passed  in  the <u>vfnum</u> argument.  VFs are always numbered
       sequentially starting at 0.

       If the driver requested device-specific  configuration  parameters  via  a  VF  schema  in  its  call  to
       <u><a href="../man9/pci_iov_attach.9.html">pci_iov_attach</a></u>(9),  those  parameters  will  be  contained  in the <u>vf_config</u> argument.  All configuration
       parameters that were either set as required parameters or that had a default value set in the  VF  schema
       are  guaranteed  to  be present in <u>vf_config</u>.  Configuration parameters that were neither set as required
       nor were given a default value are optional and may or may not be present in <u>vf_config</u>.   <u>vf_config</u>  will
       not  contain  any  configuration  parameters that were not specified in the VF schema.  All configuration
       parameters will have the correct type and will be in the range of valid values specified in the schema.

       Note that it is possible for the user to set different configuration values on different VF devices  that
       are  children  of  the same PF.  The PF driver must not cache configuration parameters passed in previous
       calls to <b>PCI_IOV_ADD_VF</b>() for other VFs and apply those parameters to the current VF.

       This  function  will  not  be  called  twice  for  the  same  <u>vf_num</u>  on  the  same  PF  device   without
       <u><a href="../man9/PCI_IOV_UNINIT.9.html">PCI_IOV_UNINIT</a></u>(9) and <u><a href="../man9/PCI_IOV_INIT.9.html">PCI_IOV_INIT</a></u>(9) first being called, in that order.

</pre><h4><b>RETURN</b> <b>VALUES</b></h4><pre>
       This  method returns 0 on success, otherwise an appropriate error is returned.  If this method returns an
       error then the current VF device will be destroyed but the rest of the VF devices will be created and SR-
       IOV will be enabled on the PF.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <u><a href="../man9/nv.9.html">nv</a></u>(9), <u><a href="../man9/pci.9.html">pci</a></u>(9), <u><a href="../man9/PCI_IOV_INIT.9.html">PCI_IOV_INIT</a></u>(9), <u><a href="../man9/pci_iov_schema.9.html">pci_iov_schema</a></u>(9), <u><a href="../man9/PCI_IOV_UNINIT.9.html">PCI_IOV_UNINIT</a></u>(9)

</pre><h4><b>AUTHORS</b></h4><pre>
       This manual page was written by Ryan Stone &lt;<u><a href="mailto:rstone@FreeBSD.org">rstone@FreeBSD.org</a></u>&gt;.

Debian                                            May 28, 2015                                 <u><a href="../man9/PCI_IOV_ADD_VF.9.html">PCI_IOV_ADD_VF</a></u>(9)
</pre>
 </div>
</div></section>
</div>
</body>
</html>