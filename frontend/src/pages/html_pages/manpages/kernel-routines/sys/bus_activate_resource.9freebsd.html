<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>bus_activate_resource, bus_deactivate_resource — activate or deactivate a resource</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/freebsd-manpages">freebsd-manpages_12.2-2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       bus_activate_resource, bus_deactivate_resource — activate or deactivate a resource

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;sys/param.h&gt;</b>
       <b>#include</b> <b>&lt;sys/bus.h&gt;</b>

       <b>#include</b> <b>&lt;machine/bus.h&gt;</b>
       <b>#include</b> <b>&lt;sys/rman.h&gt;</b>
       <b>#include</b> <b>&lt;machine/resource.h&gt;</b>

       <u>int</u>
       <b>bus_activate_resource</b>(<u>device_t</u> <u>dev</u>, <u>int</u> <u>type</u>, <u>int</u> <u>rid</u>, <u>struct</u> <u>resource</u> <u>*r</u>);

       <u>int</u>
       <b>bus_deactivate_resource</b>(<u>device_t</u> <u>dev</u>, <u>int</u> <u>type</u>, <u>int</u> <u>rid</u>, <u>struct</u> <u>resource</u> <u>*r</u>);

</pre><h4><b>DESCRIPTION</b></h4><pre>
       These  functions  activate  or deactivate a previously allocated resource.  In general, resources must be
       activated before they can be accessed by the driver.  Bus  drivers  may  perform  additional  actions  to
       ensure  that  the  resource  is  ready  to  be  accessed.  For example, the PCI bus driver enables memory
       decoding in a PCI device's command register when activating a memory resource.

       The arguments are as follows:

       <u>dev</u>     The device that requests ownership of the resource.  Before allocation, the resource is owned  by
               the parent bus.

       <u>type</u>    The type of resource you want to allocate.  It is one of:

               PCI_RES_BUS     for PCI bus numbers
               SYS_RES_IRQ     for IRQs
               SYS_RES_DRQ     for ISA DMA lines
               SYS_RES_IOPORT  for I/O ports
               SYS_RES_MEMORY  for I/O memory

       <u>rid</u>     A pointer to a bus specific handle that identifies the resource being allocated.

       <u>r</u>       A pointer to the <u>struct</u> <u>resource</u> returned by <u><a href="../man9/bus_alloc_resource.9.html">bus_alloc_resource</a></u>(9).

   <b>Resource</b> <b>Mapping</b>
       Resources  which  can  be mapped for CPU access by a <u><a href="../man9/bus_space.9.html">bus_space</a></u>(9) tag and handle will create a mapping of
       the entire resource when activated.  The tag and handle for this mapping are  stored  in  <u>r</u>  and  can  be
       retrieved  via <u><a href="../man9/rman_get_bustag.9.html">rman_get_bustag</a></u>(9) and <u><a href="../man9/rman_get_bushandle.9.html">rman_get_bushandle</a></u>(9).  These can be used with the <u><a href="../man9/bus_space.9.html">bus_space</a></u>(9) API
       to access device registers or memory described by <u>r</u>.   If  the  mapping  is  associated  with  a  virtual
       address, the virtual address can be retrieved via <u><a href="../man9/rman_get_virtual.9.html">rman_get_virtual</a></u>(9).

       This implicit mapping can be disabled by passing the RF_UNMAPPED flag to <u><a href="../man9/bus_alloc_resource.9.html">bus_alloc_resource</a></u>(9).  A driver
       may use this if it wishes to allocate its own mappings of a resource using <u><a href="../man9/bus_map_resource.9.html">bus_map_resource</a></u>(9).

       A  wrapper  API  for  <u><a href="../man9/bus_space.9.html">bus_space</a></u>(9)  is  also  provided  that accepts the associated resource as the first
       argument in place of the <u><a href="../man9/bus_space.9.html">bus_space</a></u>(9) tag and handle.  The  functions  in  this  wrapper  API  are  named
       similarly  to  the  <u><a href="../man9/bus_space.9.html">bus_space</a></u>(9)  API  except  that  “_space”  is  removed from their name.  For example,
       <b>bus_read_4</b>() can be used in place of <b>bus_space_read_4</b>().  The wrapper API is preferred in new drivers.

       These two statements both read a 32-bit register at the start of a resource:

               bus_space_read_4(rman_get_bustag(res), rman_get_bushandle(res), 0);
               bus_read_4(res, 0);

</pre><h4><b>RETURN</b> <b>VALUES</b></h4><pre>
       Zero is returned on success, otherwise an error is returned.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <u><a href="../man9/bus_alloc_resource.9.html">bus_alloc_resource</a></u>(9), <u><a href="../man9/bus_map_resource.9.html">bus_map_resource</a></u>(9), <u><a href="../man9/bus_space.9.html">bus_space</a></u>(9), <u><a href="../man9/device.9.html">device</a></u>(9), <u><a href="../man9/driver.9.html">driver</a></u>(9)

</pre><h4><b>AUTHORS</b></h4><pre>
       This manual page was written by Warner Losh &lt;<u><a href="mailto:imp@FreeBSD.org">imp@FreeBSD.org</a></u>&gt;.

Debian                                            May 20, 2016                          <u><a href="../man9/BUS_ACTIVATE_RESOURCE.9.html">BUS_ACTIVATE_RESOURCE</a></u>(9)
</pre>
 </div>
</div></section>
</div>
</body>
</html>