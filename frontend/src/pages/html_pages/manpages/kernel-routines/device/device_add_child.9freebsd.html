<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>device_add_child, device_add_child_ordered — add a new device as a child of an existing device</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/freebsd-manpages">freebsd-manpages_12.2-2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       device_add_child, device_add_child_ordered — add a new device as a child of an existing device

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;sys/param.h&gt;</b>
       <b>#include</b> <b>&lt;sys/bus.h&gt;</b>

       <u>device_t</u>
       <b>device_add_child</b>(<u>device_t</u> <u>dev</u>, <u>const</u> <u>char</u> <u>*name</u>, <u>int</u> <u>unit</u>);

       <u>device_t</u>
       <b>device_add_child_ordered</b>(<u>device_t</u> <u>dev</u>, <u>int</u> <u>order</u>, <u>const</u> <u>char</u> <u>*name</u>, <u>int</u> <u>unit</u>);

</pre><h4><b>DESCRIPTION</b></h4><pre>
       Create  a  new  child device of <u>dev</u>.  The <u>name</u> and <u>unit</u> arguments specify the name and unit number of the
       device.  If the name is unknown then the caller should pass NULL.  If the unit is unknown then the caller
       should pass -1 and the system will choose the next available unit number.

       The name of the device is used to determine which drivers might be appropriate for the device.  If a name
       is specified then only drivers of that name are probed.  If no name is given then  all  drivers  for  the
       owning  bus  are  probed.   In  any  event,  only the name of the device is stored so that one may safely
       unload/load a driver bound to that name.

       This allows buses which can uniquely identify device instances (such as PCI)  to  allow  each  driver  to
       check  each  device  instance  for  a match.  For buses which rely on supplied probe hints where only one
       driver can have a chance of probing the device, the driver name should be specified as the device name.

       Normally unit numbers will be chosen automatically by the system and a unit number of -1 should be given.
       When a specific unit number is desired (e.g., for wiring  a  particular  piece  of  hardware  to  a  pre-
       configured  unit number), that unit should be passed.  If the specified unit number is already allocated,
       a new unit will be allocated and a diagnostic message printed.

       If the devices attached to a bus must be probed in a specific order (e.g., for the ISA bus  some  devices
       are  sensitive  to  failed  probe  attempts of unrelated drivers and therefore must be probed first), the
       <u>order</u> argument of <b>device_add_child_ordered</b>() should be used to  specify  a  partial  ordering.   The  new
       device  will  be  added  before any existing device with a greater order.  If <b>device_add_child</b>() is used,
       then the new child will be added as if its order was zero.

       When adding a device in the context  of  <u><a href="../man9/DEVICE_IDENTIFY.9.html">DEVICE_IDENTIFY</a></u>(9)  routine,  the  <u><a href="../man9/device_find_child.9.html">device_find_child</a></u>(9)  routine
       should be used to ensure that the device has not already been added to the tree.  Because the device name
       and  <u>devclass_t</u>  are associated at probe time (not child addition time), previous instances of the driver
       (say in a module that was later unloaded) may have already added the instance.  Authors  of  bus  drivers
       must  likewise  be careful when adding children when they are loaded and unloaded to avoid duplication of
       children devices.

       When adding a child to another device node, such as in an identify routine, use <u><a href="../man9/BUS_ADD_CHILD.9.html">BUS_ADD_CHILD</a></u>(9)  instead
       of  <u><a href="../man9/device_add_child.9.html">device_add_child</a></u>(9).   <u><a href="../man9/BUS_ADD_CHILD.9.html">BUS_ADD_CHILD</a></u>(9) will call <u><a href="../man9/device_add_child.9.html">device_add_child</a></u>(9) and add the proper bus-specific
       data to the new child.  <b>device_add_child</b>() does not call <u><a href="../man9/BUS_ADD_CHILD.9.html">BUS_ADD_CHILD</a></u>(9).

</pre><h4><b>RETURN</b> <b>VALUES</b></h4><pre>
       The new device if successful, NULL otherwise.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <u><a href="../man9/BUS_ADD_CHILD.9.html">BUS_ADD_CHILD</a></u>(9), <u><a href="../man9/device.9.html">device</a></u>(9), <u><a href="../man9/device_delete_child.9.html">device_delete_child</a></u>(9), <u><a href="../man9/device_find_child.9.html">device_find_child</a></u>(9), <u><a href="../man9/DEVICE_IDENTIFY.9.html">DEVICE_IDENTIFY</a></u>(9)

</pre><h4><b>AUTHORS</b></h4><pre>
       This manual page was written by Doug Rabson.

Debian                                          February 11, 2018                            <u><a href="../man9/DEVICE_ADD_CHILD.9.html">DEVICE_ADD_CHILD</a></u>(9)
</pre>
 </div>
</div></section>
</div>
</body>
</html>