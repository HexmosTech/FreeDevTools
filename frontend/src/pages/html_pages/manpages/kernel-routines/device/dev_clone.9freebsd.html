<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>dev_clone, drain_dev_clone_events — eventhandler for name-based device cloning in devfs</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/freebsd-manpages">freebsd-manpages_12.2-2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       dev_clone, drain_dev_clone_events — eventhandler for name-based device cloning in devfs

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;sys/param.h&gt;</b>
       <b>#include</b> <b>&lt;sys/conf.h&gt;</b>

       <u>void</u>
       <b>clone_handler</b>(<u>void</u> <u>*arg</u>, <u>struct</u> <u>ucred</u> <u>*cr</u>, <u>char</u> <u>*name</u>, <u>int</u> <u>namelen</u>, <u>struct</u> <u>cdev</u> <u>**dev</u>);

       EVENTHANDLER_REGISTER(dev_clone, clone_handler, arg, priority);

       <u>void</u>
       <b>drain_dev_clone_events</b>();

</pre><h4><b>DESCRIPTION</b></h4><pre>
       A  device  driver  may  register a listener that will be notified each time a name lookup on the <u><a href="../man5/devfs.5.html">devfs</a></u>(5)
       mount point fails to find the vnode.  A listener shall be  registered  for  the  <u>dev_clone</u>  event.   When
       called,  it  is  supplied  with  the  first argument <u>arg</u> that was specified at handler registration time,
       appropriate credentials <u>cr</u>, and a name <u>name</u> of length <u>namelen</u> that we look for.  If the  handler  decides
       that  the  name  is  appropriate and wants to create the device that will be associated with the name, it
       should return it to devfs in the <u>dev</u> argument.

       The <b>drain_dev_clone_events</b>() function is a barrier.  It is guaranteed that all calls to eventhandlers for
       <b>dev_clone</b> that were started before <b>drain_dev_clone_events</b>() call, are finished before it returns control.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <u><a href="../man5/devfs.5.html">devfs</a></u>(5), <u><a href="../man9/namei.9.html">namei</a></u>(9)

Debian                                           January 3, 2009                                    <u><a href="../man9/DEV_CLONE.9.html">DEV_CLONE</a></u>(9)
</pre>
 </div>
</div></section>
</div>
</body>
</html>