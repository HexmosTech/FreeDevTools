<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>cnvlist_get, cnvlist_take, cnvlist_free — API for managing name/value pairs by cookie.</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/freebsd-manpages">freebsd-manpages_12.2-2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       cnvlist_get, cnvlist_take, cnvlist_free — API for managing name/value pairs by cookie.

</pre><h4><b>LIBRARY</b></h4><pre>
       library “libnv”

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;sys/cnv.h&gt;</b>

       <u>const</u> <u>char</u> <u>*</u>
       <b>cnvlist_name</b>(<u>const</u> <u>void</u> <u>*cookie</u>);

       <u>int</u>
       <b>cnvlist_type</b>(<u>const</u> <u>void</u> <u>*cookie</u>);

       <u>bool</u>
       <b>cnvlist_get_bool</b>(<u>const</u> <u>void</u> <u>*cookie</u>);

       <u>uint64_t</u>
       <b>cnvlist_get_number</b>(<u>const</u> <u>void</u> <u>*cookie</u>);

       <u>const</u> <u>char</u> <u>*</u>
       <b>cnvlist_get_string</b>(<u>const</u> <u>void</u> <u>*cookie</u>);

       <u>const</u> <u>nvlist_t</u> <u>*</u>
       <b>cnvlist_get_nvlist</b>(<u>const</u> <u>void</u> <u>*cookie</u>);

       <u>const</u> <u>void</u> <u>*</u>
       <b>cnvlist_get_binary</b>(<u>const</u> <u>void</u> <u>*cookie</u>, <u>size_t</u> <u>*sizep</u>);

       <u>const</u> <u>bool</u> <u>*</u>
       <b>cnvlist_get_bool_array</b>(<u>const</u> <u>void</u> <u>*cookie</u>, <u>size_t</u> <u>*nitemsp</u>);

       <u>const</u> <u>uint64_t</u> <u>*</u>
       <b>cnvlist_get_number_array</b>(<u>const</u> <u>void</u> <u>*cookie</u>, <u>size_t</u> <u>*nitemsp</u>);

       <u>const</u> <u>char</u> <u>*</u> <u>const</u> <u>*</u>
       <b>cnvlist_get_string_array</b>(<u>const</u> <u>void</u> <u>*cookie</u>, <u>size_t</u> <u>*nitemsp</u>);

       <u>const</u> <u>nvlist_t</u> <u>*</u> <u>const</u> <u>*</u>
       <b>cnvlist_get_nvlist_array</b>(<u>const</u> <u>void</u> <u>*cookie</u>, <u>size_t</u> <u>*nitemsp</u>);

       <u>int</u>
       <b>cnvlist_get_descriptor</b>(<u>const</u> <u>void</u> <u>*cookie</u>);

       <u>const</u> <u>int</u> <u>*</u>
       <b>cnvlist_get_descriptor_array</b>(<u>const</u> <u>void</u> <u>*cookie</u>, <u>size_t</u> <u>*nitemsp</u>);

       <u>bool</u>
       <b>cnvlist_take_bool</b>(<u>void</u> <u>*cookie</u>);

       <u>uint64_t</u>
       <b>cnvlist_take_number</b>(<u>void</u> <u>*cookie</u>);

       <u>const</u> <u>char</u> <u>*</u>
       <b>cnvlist_take_string</b>(<u>void</u> <u>*cookie</u>);

       <u>const</u> <u>nvlist_t</u> <u>*</u>
       <b>cnvlist_take_nvlist</b>(<u>void</u> <u>*cookie</u>);

       <u>const</u> <u>void</u> <u>*</u>
       <b>cnvlist_take_binary</b>(<u>void</u> <u>*cookie</u>, <u>size_t</u> <u>*sizep</u>);

       <u>const</u> <u>bool</u> <u>*</u>
       <b>cnvlist_take_bool_array</b>(<u>void</u> <u>*cookie</u>, <u>size_t</u> <u>*nitemsp</u>);

       <u>const</u> <u>uint64_t</u> <u>*</u>
       <b>cnvlist_take_number_array</b>(<u>void</u> <u>*cookie</u>, <u>size_t</u> <u>*nitemsp</u>);

       <u>const</u> <u>char</u> <u>*</u> <u>const</u> <u>*</u>
       <b>cnvlist_take_string_array</b>(<u>void</u> <u>*cookie</u>, <u>size_t</u> <u>*nitemsp</u>);

       <u>const</u> <u>nvlist_t</u> <u>*</u> <u>const</u> <u>*</u>
       <b>cnvlist_take_nvlist_array</b>(<u>void</u> <u>*cookie</u>, <u>size_t</u> <u>*nitemsp</u>);

       <u>int</u>
       <b>cnvlist_take_descriptor</b>(<u>void</u> <u>*cookie</u>);

       <u>const</u> <u>int</u> <u>*</u>
       <b>cnvlist_take_descriptor_array</b>(<u>void</u> <u>*cookie</u>, <u>size_t</u> <u>*nitemsp</u>);

       <u>void</u>
       <b>cnvlist_free_null</b>(<u>void</u> <u>*cookie</u>);

       <u>void</u>
       <b>cnvlist_free_bool</b>(<u>void</u> <u>*cookie</u>);

       <u>void</u>
       <b>cnvlist_free_number</b>(<u>void</u> <u>*cookie</u>);

       <u>void</u>
       <b>cnvlist_free_string</b>(<u>void</u> <u>*cookie</u>);

       <u>void</u>
       <b>cnvlist_free_nvlist</b>(<u>void</u> <u>*cookie</u>);

       <u>void</u>
       <b>cnvlist_free_descriptor</b>(<u>void</u> <u>*cookie</u>);

       <u>void</u>
       <b>cnvlist_free_binary</b>(<u>void</u> <u>*cookie</u>);

       <u>void</u>
       <b>cnvlist_free_bool_array</b>(<u>void</u> <u>*cookie</u>);

       <u>void</u>
       <b>cnvlist_free_number_array</b>(<u>void</u> <u>*cookie</u>);

       <u>void</u>
       <b>cnvlist_free_string_array</b>(<u>void</u> <u>*cookie</u>);

       <u>void</u>
       <b>cnvlist_free_nvlist_array</b>(<u>void</u> <u>*cookie</u>);

       <u>void</u>
       <b>cnvlist_free_descriptor_array</b>(<u>void</u> <u>*cookie</u>);

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The <b>libnv</b> library permits easy management of name/value pairs and can send and receive them over sockets.
       For more information, also see <u><a href="../man9/nv.9.html">nv</a></u>(9).

       The  concept  of cookies is explained in <b>nvlist_next</b>(), <b>nvlist_get_parent</b>(), and <b>nvlist_get_pararr</b>() from
       <u><a href="../man9/nv.9.html">nv</a></u>(9).

       The <b>cnvlist_name</b>() function returns the name of an element associated with the given cookie.

       The <b>cnvlist_type</b>() function returns the type of an element associated with the given cookie.  Types which
       can be returned are described in <u><a href="../man9/nv.9.html">nv</a></u>(9).

       The <b>cnvlist_get</b> family of functions obtains  the  value  associated  with  the  given  cookie.   Returned
       strings,  nvlists,  descriptors,  binaries,  or arrays must not be modified by the user, since they still
       belong to the nvlist.  The nvlist must not be in an error state.

       The <b>cnvlist_take</b> family of functions returns the value associated with the given cookie and  removes  the
       element  from  the nvlist.  When the value is a string, binary, or array value, the caller is responsible
       for freeing the returned memory with <b>free</b>(<u>3</u>).  When the value is an nvlist, the caller is responsible for
       destroying the returned nvlist with <b>nvlist_destroy</b>().  When the value is  a  descriptor,  the  caller  is
       responsible for closing the returned descriptor with the <b>close</b>(<u>2</u>).

       The  <b>cnvlist_free</b>  family of functions removes an element of the supplied cookie and frees all resources.
       If an element of the given cookie has the wrong type or does not exist, the program is aborted.

</pre><h4><b>EXAMPLE</b></h4><pre>
       The following example demonstrates how to deal with cnvlist API.

       int type;
       void *cookie, *scookie, *bcookie;
       nvlist_t *nvl;
       char *name;

       nvl = <a href="../man0/nvlist_create.0.html">nvlist_create</a>(0);
       nvlist_add_bool(nvl, "test", 1 == 2);
       nvlist_add_string(nvl, "test2", "cnvlist");
       cookie = NULL;

       while (nvlist_next(nvl, &amp;type, &amp;cookie) != NULL) {
               switch (type) {
               case NV_TYPE_BOOL:
                       printf("test: %d\n", cnvlist_get_bool(cookie));
                       bcookie = cookie;
                       break;
               case NV_TYPE_STRING:
                       printf("test2: %s\n", cnvlist_get_string(cookie));
                       scookie = cookie;
                       break;
               }
       }

       name = cnvlist_take_string(scookie);
       cnvlist_free_bool(bcookie);

       printf("test2: %s\n", name);
       free(name);

       printf("nvlist_empty = %d\n", nvlist_empty(nvl));
       nvlist_destroy(nvl);

       return (0);

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <u><a href="../man2/close.2.html">close</a></u>(2), <u><a href="../man3/free.3.html">free</a></u>(3), <u><a href="../man9/nv.9.html">nv</a></u>(9)

</pre><h4><b>AUTHORS</b></h4><pre>
       The <b>cnv</b> API was created during the Google Summer Of Code 2016 by Adam Starak.

Debian                                            June 18, 2018                                           <u><a href="../man9/CNV.9.html">CNV</a></u>(9)
</pre>
 </div>
</div></section>
</div>
</body>
</html>