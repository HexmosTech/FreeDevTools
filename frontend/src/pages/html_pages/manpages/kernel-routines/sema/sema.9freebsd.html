<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>sema,  sema_init,  sema_destroy,  sema_post, sema_wait, sema_timedwait, sema_trywait, sema_value — kernel</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/freebsd-manpages">freebsd-manpages_12.2-2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       sema,  sema_init,  sema_destroy,  sema_post, sema_wait, sema_timedwait, sema_trywait, sema_value — kernel
       counting semaphore

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;sys/types.h&gt;</b>
       <b>#include</b> <b>&lt;sys/lock.h&gt;</b>
       <b>#include</b> <b>&lt;sys/sema.h&gt;</b>

       <u>void</u>
       <b>sema_init</b>(<u>struct</u> <u>sema</u> <u>*sema</u>, <u>int</u> <u>value</u>, <u>const</u> <u>char</u> <u>*description</u>);

       <u>void</u>
       <b>sema_destroy</b>(<u>struct</u> <u>sema</u> <u>*sema</u>);

       <u>void</u>
       <b>sema_post</b>(<u>struct</u> <u>sema</u> <u>*sema</u>);

       <u>void</u>
       <b>sema_wait</b>(<u>struct</u> <u>sema</u> <u>*sema</u>);

       <u>int</u>
       <b>sema_timedwait</b>(<u>struct</u> <u>sema</u> <u>*sema</u>, <u>int</u> <u>timo</u>);

       <u>int</u>
       <b>sema_trywait</b>(<u>struct</u> <u>sema</u> <u>*sema</u>);

       <u>int</u>
       <b>sema_value</b>(<u>struct</u> <u>sema</u> <u>*sema</u>);

</pre><h4><b>DESCRIPTION</b></h4><pre>
       Counting semaphores provide a mechanism for synchronizing access to a pool of resources.  Unlike mutexes,
       semaphores do not have the concept of an owner, so they can also be useful in situations where one thread
       needs to acquire a resource, and another thread needs to release it.  Each semaphore has an integer value
       associated with it.   Posting  (incrementing)  always  succeeds,  but  waiting  (decrementing)  can  only
       successfully complete if the resulting value of the semaphore is greater than or equal to zero.

       Semaphores  should not be used where mutexes and condition variables will suffice.  Semaphores are a more
       complex synchronization mechanism than mutexes and condition variables, and are not as efficient.

       Semaphores are created with <b>sema_init</b>(), where <u>sema</u> is a pointer to space for a <u>struct</u> <u>sema</u>, <u>value</u> is the
       initial value of the semaphore, and <u>description</u> is a pointer to a null-terminated character  string  that
       describes  the  semaphore.   Semaphores  are  destroyed  with  <b>sema_destroy</b>().   A  semaphore  is  posted
       (incremented)  with  <b>sema_post</b>().   A  semaphore   is   waited   on   (decremented)   with   <b>sema_wait</b>(),
       <b>sema_timedwait</b>(), or <b>sema_trywait</b>().  The <u>timo</u> argument to <b>sema_timedwait</b>() specifies the minimum time in
       ticks  to  wait  before  returning  with  failure.  <b>sema_value</b>() is used to read the current value of the
       semaphore.

</pre><h4><b>RETURN</b> <b>VALUES</b></h4><pre>
       The <b>sema_value</b>() function returns the current value of the semaphore.

       If decrementing the semaphore would result in its value  being  negative,  <b>sema_trywait</b>()  returns  0  to
       indicate failure.  Otherwise, a non-zero value is returned to indicate success.

       The <b>sema_timedwait</b>() function returns 0 if waiting on the semaphore succeeded; otherwise a non-zero error
       code is returned.

</pre><h4><b>ERRORS</b></h4><pre>
       The <b>sema_timedwait</b>() function will fail if:

       [EWOULDBLOCK]      Timeout expired.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <u><a href="../man9/condvar.9.html">condvar</a></u>(9), <u><a href="../man9/locking.9.html">locking</a></u>(9), <u><a href="../man9/mtx_pool.9.html">mtx_pool</a></u>(9), <u><a href="../man9/mutex.9.html">mutex</a></u>(9), <u><a href="../man9/rwlock.9.html">rwlock</a></u>(9), <u><a href="../man9/sx.9.html">sx</a></u>(9)

Debian                                          February 1, 2006                                         <u><a href="../man9/SEMA.9.html">SEMA</a></u>(9)
</pre>
 </div>
</div></section>
</div>
</body>
</html>