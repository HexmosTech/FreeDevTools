<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>accf_http — buffer incoming connections until a certain complete HTTP requests arrive</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/freebsd-manpages">freebsd-manpages_12.2-2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       accf_http — buffer incoming connections until a certain complete HTTP requests arrive

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>options</b> <b>INET</b>
       <b>options</b> <b>ACCEPT_FILTER_HTTP</b>
       <b>kldload</b> <b>accf_http</b>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This  is  a  filter  to  be  placed  on  a  socket  that  will be using <b>accept</b>() to receive incoming HTTP
       connections.

       It prevents the application from receiving the connected descriptor via  <b>accept</b>()  until  either  a  full
       HTTP/1.0 or HTTP/1.1 HEAD or GET request has been buffered by the kernel.

       If  something other than a HTTP/1.0 or HTTP/1.1 HEAD or GET request is received the kernel will allow the
       application to receive the connection descriptor via <b>accept</b>().

       The utility of <b>accf_http</b> is such that a server will not have  to  context  switch  several  times  before
       performing  the  initial  parsing  of  the  request.  This effectively reduces the amount of required CPU
       utilization to handle incoming requests by keeping active processes in preforking servers such as  Apache
       low  and  reducing  the  size  of  the file descriptor set that needs to be managed by interfaces such as
       <b>select</b>(), <b>poll</b>() or <b>kevent</b>() based servers.

       The <b>accf_http</b> kernel option is also a module that can be enabled at runtime via <u><a href="../man8/kldload.8.html">kldload</a></u>(8)  if  the  INET
       option has been compiled into the kernel.

</pre><h4><b>EXAMPLES</b></h4><pre>
       Assuming  ACCEPT_FILTER_HTTP has been included in the kernel config file or the <b>accf_http</b> module has been
       loaded, this will enable the http accept filter on the socket <u>sok</u>.

               struct accept_filter_arg afa;

               bzero(&amp;afa, sizeof(afa));
               strcpy(afa.af_name, "httpready");
               setsockopt(sok, SOL_SOCKET, SO_ACCEPTFILTER, &amp;afa, sizeof(afa));

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <u><a href="../man2/setsockopt.2.html">setsockopt</a></u>(2), <u><a href="../man9/accept_filter.9.html">accept_filter</a></u>(9)

</pre><h4><b>HISTORY</b></h4><pre>
       The accept filter mechanism and the accf_http filter were introduced in FreeBSD 4.0.

</pre><h4><b>AUTHORS</b></h4><pre>
       This manual page and the filter were written by Alfred Perlstein.

Debian                                          November 15, 2000                                   <u><a href="../man9/ACCF_HTTP.9.html">ACCF_HTTP</a></u>(9)
</pre>
 </div>
</div></section>
</div>
</body>
</html>