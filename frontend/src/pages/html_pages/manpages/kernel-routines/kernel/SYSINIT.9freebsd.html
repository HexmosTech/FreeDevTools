<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SYSINIT, SYSUNINIT — a framework for dynamic kernel initialization</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/freebsd-manpages">freebsd-manpages_12.2-2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       SYSINIT, SYSUNINIT — a framework for dynamic kernel initialization

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;sys/param.h&gt;</b>
       <b>#include</b> <b>&lt;sys/kernel.h&gt;</b>

       <b>SYSINIT</b>(<u>uniquifier</u>,  <u>enum</u>  <u>sysinit_sub_id</u> <u>subsystem</u>, <u>enum</u> <u>sysinit_elem_order</u> <u>order</u>, <u>sysinit_cfunc_t</u> <u>func</u>,
           <u>const</u> <u>void</u> <u>*ident</u>);

       <b>SYSUNINIT</b>(<u>uniquifier</u>, <u>enum</u> <u>sysinit_sub_id</u> <u>subsystem</u>, <u>enum</u> <u>sysinit_elem_order</u> <u>order</u>, <u>sysinit_cfunc_t</u> <u>func</u>,
           <u>const</u> <u>void</u> <u>*ident</u>);

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>SYSINIT</b> is a mechanism for scheduling the execution of initialization and  teardown  routines.   This  is
       similar  to  init  and  fini routines with the addition of explicit ordering metadata.  It allows runtime
       ordering of subsystem initialization in the kernel as well as kernel modules (KLDs).

       The <b>SYSINIT</b>() macro creates a <u>struct</u> <u>sysinit</u> and stores it in a startup linker set.  The  <u>struct</u>  <u>sysinit</u>
       type  as  well  as  the  subsystem  identifier constants (SI_SUB_*) and initialization ordering constants
       (SI_ORDER_*) are defined in &lt;<u>sys/kernel.h</u>&gt;:

       struct sysinit {
               enum sysinit_sub_id subsystem;  /* subsystem identifier*/
               enum sysinit_elem_order order;  /* init order within subsystem*/
               sysinit_cfunc_t func;           /* function             */
               const void      *udata;         /* multiplexer/argument */
       };

       The <b>SYSINIT</b>() macro takes a <u>uniquifier</u> argument to identify the particular function  dispatch  data,  the
       <u>subsystem</u>  type of startup interface, the subsystem element <u>order</u> of initialization within the subsystem,
       the <u>func</u> function to call, and the data specified in <u>ident</u> argument to pass the function.

       The <b>SYSUNINIT</b>() macro behaves similarly to the <b>SYSINIT</b>() macro except that it adds the data to a shutdown
       linker set.

       The startup linker set for the kernel is scanned during boot to build a  sorted  list  of  initialization
       routines.   The  initialization routines are then executed in the sorted order.  The <u>subsystem</u> is used as
       the primary key and is sorted in ascending order.  The <u>order</u> is used as the secondary key and  is  sorted
       in  ascending  order.   The  relative  order  of  two  routines that have the same <u>subsystem</u> and <u>order</u> is
       undefined.

       The startup linker sets for modules that are loaded together with the  kernel  by  the  boot  loader  are
       scanned  during  the  SI_SUB_KLD  subsystem  initialization.   These modules' initialization routines are
       sorted and merged into the kernel's list of startup routines and are executed during boot along with  the
       kernel's  initialization  routines.   Note that this has the effect that any initialization routines in a
       kernel module that are scheduled earlier than SI_SUB_KLD are not executed until after  SI_SUB_KLD  during
       boot.

       The  startup  linker  set  for  a  kernel module loaded at runtime via <u><a href="../man2/kldload.2.html">kldload</a></u>(2) is scanned, sorted, and
       executed when the module is loaded.

       The shutdown linker set for a kernel module is scanned, sorted, and executed  when  a  kernel  module  is
       unloaded.   The  teardown  routines  are sorted in the reverse order of the initialization routines.  The
       teardown routines of the kernel and any loaded modules are <b>not</b> executed during shutdown.

</pre><h4><b>EXAMPLES</b></h4><pre>
       This example shows the SYSINIT which displays the copyright notice during boot:

             static void
             print_caddr_t(void *data)
             {
                     printf("%s", (char *)data);
             }
             SYSINIT(announce, SI_SUB_COPYRIGHT, SI_ORDER_FIRST, print_caddr_t,
                 copyright);

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <u><a href="../man4/kld.4.html">kld</a></u>(4), <u><a href="../man9/DECLARE_MODULE.9.html">DECLARE_MODULE</a></u>(9), <u><a href="../man9/DEV_MODULE.9.html">DEV_MODULE</a></u>(9), <u><a href="../man9/DRIVER_MODULE.9.html">DRIVER_MODULE</a></u>(9), <u><a href="../man9/MTX_SYSINIT.9.html">MTX_SYSINIT</a></u>(9), <u><a href="../man9/SYSCALL_MODULE.9.html">SYSCALL_MODULE</a></u>(9)

</pre><h4><b>HISTORY</b></h4><pre>
       The <b>SYSINIT</b> framework first appeared in FreeBSD 2.2.

</pre><h4><b>AUTHORS</b></h4><pre>
       The <b>SYSINIT</b> framework was written by Terrence Lambert &lt;<u><a href="mailto:terry@FreeBSD.org">terry@FreeBSD.org</a></u>&gt;.

       This manual page was written by Hiten Pandya &lt;<u><a href="mailto:hmp@FreeBSD.org">hmp@FreeBSD.org</a></u>&gt;.

Debian                                          December 1, 2010                                      <u><a href="../man9/SYSINIT.9.html">SYSINIT</a></u>(9)
</pre>
 </div>
</div></section>
</div>
</body>
</html>