<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>encoder_ratio - an electronic gear to synchronize two axes</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/linuxcnc-uspace">linuxcnc-uspace_2.9.4-2ubuntu1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       encoder_ratio - an electronic gear to synchronize two axes

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>loadrt</b> <b>encoder_ratio</b> <b>[num_chan=</b><u>num</u> <b>|</b> <b>names=</b><u>name1</u><b>[,</b><u>name2...</u><b>]]</b>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>encoder_ratio</b>  can be used to synchronize two axes (like an "electronic gear").  It counts encoder pulses
       from both axes in software, and produces an error value that can be used with a  PID  loop  to  make  the
       slave encoder track the master encoder with a specific ratio.

       This  module  supports  up  to  eight  axis  pairs.   The  number of pairs is set by the module parameter
       <b>num_chan</b>.  Alternatively, specify <b>names=</b> and unique names separated by commas.

       The <b>num_chan=</b> and <b>names=</b> specifiers  are  mutually  exclusive.   If  neither  <b>num_chan=</b>  nor  <b>names=</b>  are
       specified, the default value is one.

</pre><h4><b>FUNCTIONS</b></h4><pre>
       <b>encoder-ratio.sample</b>
              Read all input pins.  Must be called at twice the maximum desired count rate.

       <b>encoder-ratio.update</b> <b>(uses</b> <b>floating-point)</b>
              Updates all output pins.  May be called from a slower thread.

</pre><h4><b>NAMING</b></h4><pre>
       The names for pins and parameters are prefixed as:
         <b>encoder-ratio.N.</b> for N=0,1,...,num-1 when using <b>num_chan=num</b>
         <b>nameN.</b> for nameN=name1,name2,... when using <b>names=name1,name2,...</b>

       The <b>encoder-ratio.N.</b> format is shown in the following descriptions.

</pre><h4><b>PINS</b></h4><pre>
       <b>encoder-ratio.</b><u>N</u><b>.master-A</b> bit in
       <b>encoder-ratio.</b><u>N</u><b>.master-B</b> bit in
       <b>encoder-ratio.</b><u>N</u><b>.slave-A</b> bit in
       <b>encoder-ratio.</b><u>N</u><b>.slave-B</b> bit in
              The encoder channels of the master and slave axes

       <b>encoder-ratio.</b><u>N</u><b>.enable</b> bit in
              When  the  enable  pin  is  FALSE,  the  error  pin  simply  reports  the  slave axis position, in
              revolutions.  As such, it would normally be connected to the feedback  pin  of  a  PID  block  for
              closed  loop  control  of  the  slave  axis.   Normally the command input of the PID block is left
              unconnected (zero), so the slave axis simply sits still.  However when the enable input goes TRUE,
              the error pin becomes the slave position minus the scaled master position.  The  scale  factor  is
              the  ratio  of  master teeth to slave teeth.  As the master moves, error becomes non-zero, and the
              PID loop will drive the slave axis to track the master.

       <b>encoder-ratio.</b><u>N</u><b>.error</b> float out
              The error in the position of the slave (in revolutions)

</pre><h4><b>PARAMETERS</b></h4><pre>
       <b>encoder-ratio.N.master-ppr</b> unsigned rw
       <b>encoder-ratio.N.slave-ppr</b> unsigned rw
              The number of pulses per revolution of the master and slave axes

       <b>encoder-ratio.N.master-teeth</b> unsigned rw
       <b>encoder-ratio.N.slave-teeth</b> unsigned rw
              The number of "teeth" on the master and slave gears.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man9/encoder.9.html">encoder</a>(9)</b>

LinuxCNC Documentation                             2007-01-16                                   <u><a href="../man9/ENCODER_RATIO.9.html">ENCODER_RATIO</a></u>(9)
</pre>
 </div>
</div></section>
</div>
</body>
</html>