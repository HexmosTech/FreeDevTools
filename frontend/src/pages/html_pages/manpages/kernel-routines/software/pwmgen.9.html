<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>pwmgen - software PWM/PDM generation</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/linuxcnc-uspace">linuxcnc-uspace_2.9.4-2ubuntu1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       pwmgen - software PWM/PDM generation

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>loadrt</b> <b>pwmgen</b> <b>output_type=</b><u>type0</u>[,<u>type1</u>...]

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>pwmgen</b>  is  used to generate PWM (pulse width modulation) or PDM (pulse density modulation) signals.  The
       maximum PWM frequency and the resolution is quite limited compared to hardware-based approaches,  but  in
       many cases software PWM can be very useful.  If better performance is needed, a hardware PWM generator is
       a better choice.

       <b>pwmgen</b>  supports  a  maximum  of  eight  channels.  The number of channels actually loaded depends on the
       number of <u>type</u> values given.  The value of each <u>type</u> determines the outputs for that channel.

       type 0: single output A single output pin, <b>pwm</b>, whose duty cycle is determined by the input value for
       positive inputs, and which is off (or at <b>min-dc</b>) for negative inputs.
              Suitable for single ended circuits.

       type 1: pwm/direction
              Two output pins, <b>pwm</b> and <b>dir</b>.  The duty cycle on <b>pwm</b> varies as a function of the input value.  <b>dir</b>
              is low for positive inputs and high for negative inputs.

       type 2: up/down
              Two output pins, <b>up</b> and <b>down</b>.  For positive inputs, the PWM/PDM waveform appears on <b>up</b>, while <b>down</b>
              is low.  For negative inputs, the waveform appears on <b>down</b>, while <b>up</b> is low.  Suitable for driving
              the two sides of an H-bridge to generate a bipolar output.

</pre><h4><b>FUNCTIONS</b></h4><pre>
       <b>pwmgen.make-pulses</b> (no floating-point)
              Generates the actual PWM waveforms, using information computed  by  <b>update</b>.   Must  be  called  as
              frequently  as  possible,  to  maximize  the attainable PWM frequency and resolution, and minimize
              jitter.  Operates on all channels at once.

       <b>pwmgen.update</b> (uses floating point)
              Accepts an input value, performs scaling and limit checks, and converts it into a form  usable  by
              <b>make-pulses</b>  for PWM/PDM generation.  Can (and should) be called less frequently than <b>make-pulses</b>.
              Operates on all channels at once.

</pre><h4><b>PINS</b></h4><pre>
       <b>pwmgen.</b><u>N</u><b>.enable</b> bit in
              Enables PWM generator <u>N</u> - when false, all <b>pwmgen.</b><u>N</u> output pins are low.

       <b>pwmgen.</b><u>N</u><b>.value</b> float in
              Commanded value.  When <b>value</b> = 0.0, duty cycle is 0%, and when <b>value</b> = ±<b>scale</b>,  duty  cycle  is  ±
              100% (subject to <b>min-dc</b> and <b>max-dc</b> limitations).

       <b>pwmgen.</b><u>N</u><b>.pwm</b> bit out (output types 0 and 1 only)
              PWM/PDM waveform.

       <b>pwmgen.</b><u>N</u><b>.dir</b> bit out (output type 1 only)
              Direction output: low for forward, high for reverse.

       <b>pwmgen.</b><u>N</u><b>.up</b> bit out (output type 2 only)
              PWM/PDM waveform for positive input values, low for negative inputs.

       <b>pwmgen.</b><u>N</u><b>.down</b> bit out (output type 2 only)
              PWM/PDM waveform for negative input values, low for positive inputs.

       <b>pwmgen.</b><u>N</u><b>.curr-dc</b> float out
              The  current  duty  cycle,  after all scaling and limits have been applied.  Range is from -1.0 to
              +1.0.

       <b>pwmgen.</b><u>N</u><b>.max-dc</b> float in/out
              The maximum duty cycle.  A value of 1.0 corresponds to  100%.   This  can  be  useful  when  using
              transistor  drivers  with  bootstrapped power supplies, since the supply requires some low time to
              recharge.

       <b>pwmgen.</b><u>N</u><b>.min-dc</b> float in/out
              The minimum duty cycle.  A value of 1.0 corresponds to 100%.  Note that when the pwm generator  is
              disabled, the outputs are constantly low, regardless of the setting of <b>min-dc</b>.

       <b>pwmgen.</b><u>N</u><b>.scale</b> float in/out
       <b>pwmgen.</b><u>N</u><b>.offset</b> float in/out
              These parameters provide a scale and offset from the <b>value</b> pin to the actual duty cycle.  The duty
              cycle is calculated according to <u>dc</u> <u>=</u> <u>(value/scale)</u> <u>+</u> <u>offset</u>, with 1.0 meaning 100%.

       <b>pwmgen.</b><u>N</u><b>.pwm-freq</b> float in/out
              PWM  frequency  in  Hz.  The upper limit is half of the frequency at which <b>make-pulses</b> is invoked,
              and values above that limit will be changed to the limit.  If <b>dither-pwm</b> is false, the value  will
              be  changed  to  the  nearest  integer  submultiple of the <b>make-pulses</b> frequency.  A value of zero
              produces Pulse Density Modulation instead of Pulse Width Modulation.

       <b>pwmgen.</b><u>N</u><b>.dither-pwm</b> bit in/out
              Because software-generated PWM uses a fairly slow timebase (several to many microseconds), it  has
              limited  resolution.   For  example,  if <b>make-pulses</b> is called at a 20 kHz rate, and <b>pwm-freq</b> is 2
              kHz, there are only 10 possible duty cycles.  If <b>dither-pwm</b> is false,  the  commanded  duty  cycle
              will  be rounded to the nearest of those values.  Assuming <b>value</b> remains constant, the same output
              will repeat every PWM cycle.  If <b>dither-pwm</b> is true,  the  output  duty  cycle  will  be  dithered
              between  the  two  closest  values,  so that the long-term average is closer to the desired level.
              <b>dither-pwm</b> has no effect if <b>pwm-freq</b> is zero (PDM mode),  since  PDM  is  an  inherently  dithered
              process.

LinuxCNC Documentation                             2007-01-16                                          <u><a href="../man9/PWMGEN.9.html">PWMGEN</a></u>(9)
</pre>
 </div>
</div></section>
</div>
</body>
</html>