<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>pci_iov_schema,     pci_iov_schema_alloc_node,     pci_iov_schema_add_bool,    pci_iov_schema_add_string,</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/freebsd-manpages">freebsd-manpages_12.2-2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       pci_iov_schema,     pci_iov_schema_alloc_node,     pci_iov_schema_add_bool,    pci_iov_schema_add_string,
       pci_iov_schema_add_uint8,              pci_iov_schema_add_uint16,              pci_iov_schema_add_uint32,
       pci_iov_schema_add_uint64, pci_iov_schema_add_unicast_mac â€” PCI SR-IOV config schema interface

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;machine/stdarg.h&gt;</b>
       <b>#include</b> <b>&lt;sys/nv.h&gt;</b>
       <b>#include</b> <b>&lt;sys/iov_schema.h&gt;</b>

       <u>nvlist_t</u> <u>*</u>
       <b>pci_iov_schema_alloc_node</b>(<u>void</u>);

       <u>void</u>
       <b>pci_iov_schema_add_bool</b>(<u>nvlist_t</u> <u>*schema</u>, <u>const</u> <u>char</u> <u>*name</u>, <u>uint32_t</u> <u>flags</u>, <u>int</u> <u>defaultVal</u>);

       <u>void</u>
       <b>pci_iov_schema_add_string</b>(<u>nvlist_t</u> <u>*schema</u>, <u>const</u> <u>char</u> <u>*name</u>, <u>uint32_t</u> <u>flags</u>, <u>const</u> <u>char</u> <u>*defaultVal</u>);

       <u>void</u>
       <b>pci_iov_schema_add_uint8</b>(<u>nvlist_t</u> <u>*schema</u>, <u>const</u> <u>char</u> <u>*name</u>, <u>uint32_t</u> <u>flags</u>, <u>uint8_t</u> <u>defaultVal</u>);

       <u>void</u>
       <b>pci_iov_schema_add_uint16</b>(<u>nvlist_t</u> <u>*schema</u>, <u>const</u> <u>char</u> <u>*name</u>, <u>uint32_t</u> <u>flags</u>, <u>uint16_t</u> <u>defaultVal</u>);

       <u>void</u>
       <b>pci_iov_schema_add_uint32</b>(<u>nvlist_t</u> <u>*schema</u>, <u>const</u> <u>char</u> <u>*name</u>, <u>uint32_t</u> <u>flags</u>, <u>uint32_t</u> <u>defaultVal</u>);

       <u>void</u>
       <b>pci_iov_schema_add_uint64</b>(<u>nvlist_t</u> <u>*schema</u>, <u>const</u> <u>char</u> <u>*name</u>, <u>uint32_t</u> <u>flags</u>, <u>uint64_t</u> <u>defaultVal</u>);

       <u>void</u>
       <b>pci_iov_schema_add_unicast_mac</b>(<u>nvlist_t</u>     <u>*schema</u>,     <u>const</u>     <u>char</u>     <u>*name</u>,     <u>uint32_t</u>    <u>flags</u>,
           <u>const</u> <u>uint8_t</u> <u>*defaultVal</u>);

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The PCI Single-Root I/O Virtualization (SR-IOV) configuration schema is a data structure  that  describes
       the  device-specific  configuration parameters that a PF driver will accept when SR-IOV is enabled on the
       PF device.  Each PF driver defines two schema instances: the PF schema and the VF schema.  The PF  schema
       describes  configuration that applies to the PF device as a whole.  The VF schema describes configuration
       that applies to an individual VF device.  Different VF devices may have different  configuration  applied
       to them, as long as the configuration for each VF conforms to the VF schema.

       A PF driver builds a configuration schema by first allocating a schema node and then adding configuration
       parameter specifications to the schema.  The configuration parameter specification consists of a name and
       a value type.

       Configuration  parameter names are case-insensitive.  It is an error to specify two or more configuration
       parameters with the same name.  It is also an error to specific a configuration parameter that  uses  the
       same  name  as  a  configuration  parameter  used  by  the SR-IOV infrastructure.  See <u><a href="../man5/iovctl.conf.5.html">iovctl.conf</a></u>(5) for
       documentation of all configuration parameters used by the SR-IOV infrastructure.

       The parameter type constrains the possible values that the configuration parameter may take.

       A configuration parameter may be specified as a required parameter  by  setting  the  IOV_SCHEMA_REQUIRED
       flag  in  the  <u>flags</u> argument.  Required parameters must be specified by the user when SR-IOV is enabled.
       If the user does not specify a required parameter, the SR-IOV infrastructure will abort  the  request  to
       enable SR-IOV and return an error to the user.

       Alternatively,   a   configuration   parameter   may   be   given   a   default   value  by  setting  the
       IOV_SCHEMA_HASDEFAULT flag in the <u>flags</u> argument.  If a configuration parameter has a default  value  but
       the  user  has  not  specified  a  value  for  that  parameter, then the SR-IOV infrastructure will apply
       <u>defaultVal</u> for that parameter in the configuration before passing it to the PF driver.  It  is  an  error
       for  the  value of the <u>defaultVal</u> parameter to not conform to the restrictions of the specified type.  If
       this flag is not specified then the <u>defaultVal</u> argument is ignored.  This flag is not compatible with the
       IOV_SCHEMA_REQUIRED flag; it is an error to specify both on the same parameter.

       The SR-IOV infrastructure guarantees that all configuration  parameters  that  are  either  specified  as
       required  or  given  a  default  value  will  be  present  in  the configuration passed to the PF driver.
       Configuration parameters that are neither specified as required nor given a default  value  are  optional
       and may or may not be present in the configuration passed to the PF driver.

       It  is  highly recommended that a PF driver reserve the use of optional parameters for configuration that
       is truly optional.  For example, a Network Interface PF device might have the option to  encapsulate  all
       traffic  to  and  from  a  VF  device  in a vlan tag.  The PF driver could expose that option as a "vlan"
       parameter accepting an integer argument specifying the vlan tag.  In this case, it would  be  appropriate
       to  set the "vlan" parameter as an optional parameter as it would be legitimate for a VF to be configured
       to have no vlan tagging enabled at all.

       Alternatively, if the PF device had an boolean option that controlled  whether  the  VF  was  allowed  to
       change  its  MAC  address,  it would not be appropriate to set this parameter as optional.  The PF driver
       must either allow the MAC to change or not, so it would be more appropriate for the PF driver to document
       the default behaviour by specifying a default value in the schema (or potentially force the user to  make
       the choice by setting the parameter to be required).

       Configuration  parameters  that  have security implications must default to the most secure configuration
       possible.

       All device-specific configuration parameters must be documented in the manual page for the PF driver,  or
       in a separate manual page that is cross-referenced from the main driver manual page.

       It  is  not  necessary  for  a  PF  driver to check for failure from any of these functions.  If an error
       occurs, it is flagged in the schema.  The <u><a href="../man9/pci_iov_attach.9.html">pci_iov_attach</a></u>(9) function checks for this error and will  fail
       to  initialize  SR-IOV  on  the  PF  device  if  an  error  is  set in the schema.  If this occurs, it is
       recommended that the PF driver still succeed in attaching and run with SR-IOV disabled on the device.

       The <b>pci_iov_schema_alloc_node</b>() function is used to allocate an empty configuration schema.   It  is  not
       necessary  to  check  for  failure  from this function.  The SR-IOV infrastructure will gracefully handle
       failure to allocate a schema and will simply not enable SR-IOV on the PF device.

       The <b>pci_iov_schema_add_bool</b>() function is used to specify a configuration parameter in the  given  schema
       with the name <u>name</u> and having a boolean type.  Boolean values can only take the value true or false (1 or
       0, respectively).

       The <b>pci_iov_schema_add_string</b>() function is used to specify a configuration parameter in the given schema
       with the name <u>name</u> and having a string type.  String values are standard C strings.

       The  <b>pci_iov_schema_add_uint8</b>() function is used to specify a configuration parameter in the given schema
       with the name <u>name</u> and having a <u>uint8_t</u> type.  Values of type <u>uint8_t</u> are unsigned integers in the  range
       0 to 255, inclusive.

       The <b>pci_iov_schema_add_uint16</b>() function is used to specify a configuration parameter in the given schema
       with  the  name  <u>name</u>  and  having a <u>uint16_t</u> type.  Values of type <u>uint16_t</u> are unsigned integers in the
       range 0 to 65535, inclusive.

       The <b>pci_iov_schema_add_uint32</b>() function is used to specify a configuration parameter in the given schema
       with the name <u>name</u> and having a <u>uint32_t</u> type.  Values of type <u>uint32_t</u>  are  unsigned  integers  in  the
       range 0 to (2**32 - 1), inclusive.

       The <b>pci_iov_schema_add_uint64</b>() function is used to specify a configuration parameter in the given schema
       with  the  name  <u>name</u>  and  having a <u>uint64_t</u> type.  Values of type <u>uint64_t</u> are unsigned integers in the
       range 0 to (2**64 - 1), inclusive.

       The <b>pci_iov_schema_add_unicast_mac</b>() function is used to specify a configuration parameter in  the  given
       schema  with  the  name <u>name</u> and having a unicast-mac type.  Values of type unicast-mac are binary values
       exactly 6 bytes long.  The MAC address is guaranteed to not be a multicast or broadcast address.

</pre><h4><b>RETURN</b> <b>VALUES</b></h4><pre>
       The <b>pci_iov_schema_alloc_node</b>() function returns a pointer to the allocated schema, or NULL if a  failure
       occurs.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <u><a href="../man9/pci.9.html">pci</a></u>(9), <u><a href="../man9/PCI_IOV_ADD_VF.9.html">PCI_IOV_ADD_VF</a></u>(9), <u><a href="../man9/PCI_IOV_INIT.9.html">PCI_IOV_INIT</a></u>(9)

</pre><h4><b>AUTHORS</b></h4><pre>
       This manual page was written by Ryan Stone &lt;<a href="mailto:rstone@FreeBSD.org">rstone@FreeBSD.org</a>&gt;.

Debian                                            July 8, 2015                                 <u><a href="../man9/PCI_IOV_SCHEMA.9.html">PCI_IOV_SCHEMA</a></u>(9)
</pre>
 </div>
</div></section>
</div>
</body>
</html>