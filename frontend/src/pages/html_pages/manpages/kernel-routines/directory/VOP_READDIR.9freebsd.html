<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VOP_READDIR — read contents of a directory</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/freebsd-manpages">freebsd-manpages_12.2-2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       VOP_READDIR — read contents of a directory

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;sys/param.h&gt;</b>
       <b>#include</b> <b>&lt;sys/dirent.h&gt;</b>
       <b>#include</b> <b>&lt;sys/vnode.h&gt;</b>

       <u>int</u>
       <b>VOP_READDIR</b>(<u>struct</u>  <u>vnode</u>  <u>*vp</u>,  <u>struct</u>  <u>uio</u>  <u>*uio</u>,  <u>struct</u>  <u>ucred</u>  <u>*cred</u>,  <u>int</u>  <u>*eofflag</u>, <u>int</u> <u>*ncookies</u>,
           <u>u_long</u> <u>**cookies</u>);

</pre><h4><b>DESCRIPTION</b></h4><pre>
       Read directory entries.

       <u>vp</u>        The vnode of the directory.

       <u>uio</u>       Where to read the directory contents.

       <u>cred</u>      The caller's credentials.

       <u>eofflag</u>   Return end of file status (NULL if not wanted).

       <u>ncookies</u>  Number of directory cookies generated for NFS (NULL if not wanted).

       <u>cookies</u>   Directory seek cookies generated for NFS (NULL if not wanted).
       The directory contents are read into <u>struct</u> <u>dirent</u> structures.  If the  on-disc  data  structures  differ
       from this then they should be translated.

</pre><h4><b>LOCKS</b></h4><pre>
       The directory should be locked on entry and will still be locked on exit.

</pre><h4><b>RETURN</b> <b>VALUES</b></h4><pre>
       Zero is returned on success, otherwise an error code is returned.

       If  this is called from the NFS server, the extra arguments <u>eofflag</u>, <u>ncookies</u> and <u>cookies</u> are given.  The
       value of <u>*eofflag</u> should be set to TRUE if the end of  the  directory  is  reached  while  reading.   The
       directory  seek  cookies are returned to the NFS client and may be used later to restart a directory read
       part way through the directory.  There should be one cookie returned per directory entry.  The  value  of
       the  cookie  should  be  the  offset  within  the  directory where the on-disc version of the appropriate
       directory entry starts.  Memory for the cookies should be allocated using:

               ...;
               *ncookies = number of entries read;
               *cookies = malloc(*ncookies * sizeof(u_long), M_TEMP, M_WAITOK);

</pre><h4><b>ERRORS</b></h4><pre>
       [EINVAL]           An attempt was made to read from an illegal offset in the directory.

       [EIO]              A read error occurred while reading the directory.

       [EINTEGRITY]       Corrupted data was detected while reading the directory.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <u><a href="../man9/vnode.9.html">vnode</a></u>(9)

</pre><h4><b>AUTHORS</b></h4><pre>
       This manual page was written by Doug Rabson.

Debian                                           March 30, 2020                                   <u><a href="../man9/VOP_READDIR.9.html">VOP_READDIR</a></u>(9)
</pre>
 </div>
</div></section>
</div>
</body>
</html>