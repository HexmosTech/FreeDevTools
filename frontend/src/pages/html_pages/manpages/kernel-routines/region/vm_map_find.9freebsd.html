<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>vm_map_find — find a free region within a map, and optionally map a vm_object</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/freebsd-manpages">freebsd-manpages_12.2-2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       vm_map_find — find a free region within a map, and optionally map a vm_object

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;sys/param.h&gt;</b>
       <b>#include</b> <b>&lt;vm/vm.h&gt;</b>
       <b>#include</b> <b>&lt;vm/vm_map.h&gt;</b>

       <u>int</u>
       <b>vm_map_find</b>(<u>vm_map_t</u> <u>map</u>,  <u>vm_object_t</u> <u>object</u>,  <u>vm_ooffset_t</u> <u>offset</u>, <u>vm_offset_t</u> <u>*addr</u>, <u>vm_size_t</u> <u>length</u>,
           <u>vm_offset_t</u> <u>max_addr</u>, <u>int</u> <u>find_space</u>, <u>vm_prot_t</u> <u>prot</u>, <u>vm_prot_t</u> <u>max</u>, <u>int</u> <u>cow</u>);

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The <b>vm_map_find</b>() function attempts to find a free region in the target <u>map</u>, with the given <u>length.</u> If  a
       free region is found, <b>vm_map_find</b>() creates a mapping of <u>object</u> via a call to <u><a href="../man9/vm_map_insert.9.html">vm_map_insert</a></u>(9).

       The  arguments  <u>offset</u>,  <u>prot</u>,  <u>max</u>,  and  <u>cow</u> are passed unchanged to <u><a href="../man9/vm_map_insert.9.html">vm_map_insert</a></u>(9) when creating the
       mapping, if and only if a free region is found.

       If <u>object</u> is non-NULL, the reference count on the object must be incremented by the caller before calling
       this function to account for the new entry.

       If <u>max_addr</u> is non-zero, it specifies an upper bound on the mapping.  The mapping will only succeed if  a
       free region can be found that resides entirely below <u>max_addr</u>.

       The  <u>find_space</u>  argument specifies the strategy to use when searching for a free region of the requested
       length.  For all values other than VMFS_NO_SPACE, <u><a href="../man9/vm_map_findspace.9.html">vm_map_findspace</a></u>(9) is called to locate a  free  region
       of  the  requested  length  with  a  starting  address  at  or above <u>*addr</u>.  The following strategies are
       supported:

       VMFS_NO_SPACE             The mapping will only succeed if there is a free region of the requested length
                                 at the given address <u>*addr</u>.

       VMFS_ANY_SPACE            The mapping will succeed as long as there is a free region.

       VMFS_SUPER_SPACE          The mapping will succeed as long as there is a free region  that  begins  on  a
                                 superpage boundary.  If <u>object</u> is non-NULL and is already backed by superpages,
                                 then  the  mapping  will  require  a  free  region  that aligns relative to the
                                 existing superpages rather than one beginning on a superpage boundary.

       VMFS_OPTIMAL_SPACE        The mapping will succeed as long as there is a free region.  However, if <u>object</u>
                                 is non-NULL and is already backed by superpages, this strategy will attempt  to
                                 find a free region aligned relative to the existing superpages.

       VMFS_ALIGNED_SPACE(<u>n</u>)     The mapping will succeed as long as there is a free region that aligns on a 2^<u>n</u>
                                 boundary.

</pre><h4><b>IMPLEMENTATION</b> <b>NOTES</b></h4><pre>
       This function acquires a lock on <u>map</u> by calling <u><a href="../man9/vm_map_lock.9.html">vm_map_lock</a></u>(9), and holds it until the function returns.

       The search for a free region is defined to be first-fit, from the address <u>addr</u> onwards.

</pre><h4><b>RETURN</b> <b>VALUES</b></h4><pre>
       The  <b>vm_map_find</b>() function returns KERN_SUCCESS if the mapping was successfully created.  If space could
       not be found  or  <u>find_space</u>  was  VMFS_NO_SPACE  and  the  given  address,  <u>addr</u>,  was  already  mapped,
       KERN_NO_SPACE  will  be  returned.   If the discovered range turned out to be bogus, KERN_INVALID_ADDRESS
       will be returned.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <u><a href="../man9/vm_map.9.html">vm_map</a></u>(9), <u><a href="../man9/vm_map_findspace.9.html">vm_map_findspace</a></u>(9), <u><a href="../man9/vm_map_insert.9.html">vm_map_insert</a></u>(9), <u><a href="../man9/vm_map_lock.9.html">vm_map_lock</a></u>(9)

</pre><h4><b>AUTHORS</b></h4><pre>
       This manual page was written by Bruce M Simpson &lt;<u><a href="mailto:bms@spc.org">bms@spc.org</a></u>&gt;.

Debian                                         September 12, 2013                                 <u><a href="../man9/VM_MAP_FIND.9.html">VM_MAP_FIND</a></u>(9)
</pre>
 </div>
</div></section>
</div>
</body>
</html>