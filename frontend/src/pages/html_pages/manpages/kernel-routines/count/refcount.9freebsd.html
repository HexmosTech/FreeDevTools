<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>refcount, refcount_init, refcount_acquire, refcount_release — manage a simple reference counter</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/freebsd-manpages">freebsd-manpages_12.2-2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       refcount, refcount_init, refcount_acquire, refcount_release — manage a simple reference counter

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;sys/param.h&gt;</b>
       <b>#include</b> <b>&lt;sys/refcount.h&gt;</b>

       <u>void</u>
       <b>refcount_init</b>(<u>volatile</u> <u>u_int</u> <u>*count</u>, <u>u_int</u> <u>value</u>);

       <u>void</u>
       <b>refcount_acquire</b>(<u>volatile</u> <u>u_int</u> <u>*count</u>);

       <u>bool</u>
       <b>refcount_release</b>(<u>volatile</u> <u>u_int</u> <u>*count</u>);

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The  <b>refcount</b>  functions  provide  an  API to manage a simple reference counter.  The caller provides the
       storage for the counter in an unsigned integer.  A pointer to this integer is passed via <u>count</u>.   Usually
       the counter is used to manage the lifetime of an object and is stored as a member of the object.

       The  <b>refcount_init</b>()  function  is used to set the initial value of the counter to <u>value</u>.  It is normally
       used when creating a reference-counted object.

       The <b>refcount_acquire</b>() function is used to acquire a  new  reference.   The  caller  is  responsible  for
       ensuring  that  it holds a valid reference while obtaining a new reference.  For example, if an object is
       stored on a list and the list holds a reference on the object, then holding a lock that protects the list
       provides sufficient protection for acquiring a new reference.

       The <b>refcount_release</b>() function is used to release an existing reference.  The function returns  true  if
       the reference being released was the last reference; otherwise, it returns false.

       Note  that  these  routines  do  not  provide  any  inter-CPU synchronization, data protection, or memory
       ordering guarantees except for managing the counter.   The  caller  is  responsible  for  any  additional
       synchronization  needed  by  consumers  of  any  containing  objects.   In  addition,  the caller is also
       responsible for managing the life cycle of any containing  objects  including  explicitly  releasing  any
       resources when the last reference is released.

</pre><h4><b>RETURN</b> <b>VALUES</b></h4><pre>
       The <b>refcount_release</b> function returns true when releasing the last reference and false when releasing any
       other reference.

</pre><h4><b>HISTORY</b></h4><pre>
       These functions were introduced in FreeBSD 6.0.

Debian                                            July 21, 2019                                      <u><a href="../man9/REFCOUNT.9.html">REFCOUNT</a></u>(9)
</pre>
 </div>
</div></section>
</div>
</body>
</html>