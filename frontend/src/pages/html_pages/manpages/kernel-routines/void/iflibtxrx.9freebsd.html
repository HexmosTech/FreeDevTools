<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>iflibtxrx — Device Dependent Transmit and Receive Functions</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/freebsd-manpages">freebsd-manpages_12.2-2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       iflibtxrx — Device Dependent Transmit and Receive Functions

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;ifdi_if.h&gt;</b>

   <b>Interface</b> <b>Manipulation</b> <b>Functions</b>
       <u>int</u>
       <b>isc_txd_encap</b>(<u>void</u> <u>*sc</u>, <u>if_pkt_into_t</u> <u>pi</u>);

       <u>void</u>
       <b>isc_txd_flush</b>(<u>void</u> <u>*sc</u>, <u>uint16_t</u> <u>qid</u>, <u>uint32_t</u> <b>_</b><u>pidx_or_credits</u><b>_</b>);

       <u>int</u>
       <b>isc_txd_credits_update</b>(<u>void</u> <u>*sc</u>, <u>uint16_t</u> <u>qid</u>, <u>bool</u> <u>clear</u>);

       <u>int</u>
       <b>isc_rxd_available</b>(<u>void</u> <u>*sc</u>, <u>uint16_t</u> <u>qsid</u>, <u>uint32_t</u> <u>cidx</u>);

       <u>void</u>
       <b>isc_rxd_refill</b>(<u>void</u> <u>*sc</u>,  <u>uint16_t</u> <u>qsid</u>,  <u>uint8_t</u> <u>flid</u>, <u>uint32_t</u> <u>pidx</u>, <u>uint64_t</u> <u>*paddrs</u>, <u>caddr_t</u> <u>*vaddrs</u>,
           <u>uint16_t</u> <u>count</u>);

       <u>void</u>
       <b>isc_rxd_flush</b>(<u>void</u> <u>*sc</u>, <u>uint16_t</u> <u>qsid</u>, <u>uint8_t</u> <u>flid</u>, <u>uint32_t</u> <u>pidx</u>);

       <u>int</u>
       <b>isc_rxd_pkt_get</b>(<u>void</u> <u>*sc</u>, <u>if_rxd_info_t</u> <u>ri</u>);

   <b>Global</b> <b>Variables</b>
       <u>extern</u> <u>struct</u> <u>if_txrx</u>

</pre><h4><b>DATA</b> <b>STRUCTURES</b></h4><pre>
       The device dependent mechanisms for handling packet transmit and receive are  primarily  defined  by  the
       functions named above.  The if_pkt_info data structure contains statistics and identifying info necessary
       for packet transmission.  While the data structure for packet receipt is the if_rxd_info structure.

   <b>The</b> <b>if_pkt_info</b> <b>Structure</b>
       The fields of <u>struct</u> <u>if_pkt_info</u> are as follows:

             <u>ipi_len</u>          (<u>uint32_t</u>) Denotes the size of packet to be sent on the transmit queue.

             <u>ipi_segs</u>         (<u>bus_dma_segment_t</u>  <u>*</u>)  A pointer to the bus_dma_segment of the device independent
                              transfer queue defined in iflib.

             <u>ipi_qsidx</u>        Unique index  value  assigned  sequentially  to  each  transmit  queue.   Used  to
                              reference the currently transmitting queue.

             <u>ipi_nsegs</u>        (<u>uint16_t</u>)  Number  of  descriptors  to be read into the device dependent transfer
                              descriptors.

             <u>ipi_ndescs</u>       (<u>uint16_t</u>) Number of descriptors in use.  Calculated by subtracting the  old  pidx
                              value from the new pidx value.

             <u>ipi_flags</u>        (<u>uint16_t</u>) Flags defined on a per packet basis.

             <u>ipi_pidx</u>         (<u>uint32_t</u>)  Value  of  first pidx sent to the isc_encap function for encapsulation
                              and subsequent transmission.

             <u>ipi_new_pidx</u>     (<u>uint32_t</u>) Value set after the termination of the isc_encap function.  This  value
                              will  become  the first pidx sent to the isc-encap the next time that the function
                              is called.

             <b>The</b> <b>Following</b> <b>Fields</b> <b>Are</b> <b>Used</b> <b>For</b> <b>Offload</b> <b>Handling</b>

             <u>ipi_csum_flags</u>   (<u>uint64_t</u>) Flags describing the checksum values, used on a per packet basis.

             <u>ipi_tso_segsz</u>    (<u>uint16_t</u>) Size of the TSO Segment Size.

             <u>ipi_mflags</u>       (<u>uint16_t</u>) Flags describing the operational parameters of the mbuf.

             <u>ipi_vtag</u>         (<u>uint16_t</u>) Contains the VLAN information in the Ethernet Frame.

             <u>ipi_etype</u>        (<u>uint16_t</u>)  Type  of  ethernet  header  protocol  as  contained  by   the   struct
                              ether_vlan_header.

             <u>ipi_ehrdlen</u>      (<u>uint8_t</u>) Length of the Ethernet Header.

             <u>ipi_ip_hlen</u>      (<u>uint8_t</u>) Length of the TCP Header

             <u>ipi_tcp_hlen</u>     (<u>uint8_t</u>) Length of the TCP Header.

             <u>ipi_tcp_hflags</u>   (<u>uint8_t</u>) Flags describing the operational parameters of the TCP Header.

             <u>ipi_ipproto</u>      (<u>uint8_t</u>) Specifies the type of IP Protocol in use.  Example TCP, UDP, or SCTP.

   <b>The</b> <b>if_rxd_info</b> <b>Structure</b>
       The fields of <u>struct</u> <u>if_rxd_info</u> are as follows:

             <u>iri_qsidx</u>        (<u>uint16_t</u>)  Unique  index value assigned sequentially to each receive queue.  Used
                              to reference the currently receiving queue.

             <u>iri_vtag</u>         (<u>uint16_t</u>) Contains the VLAN information in the Ethernet Frame.

             <u>iri_len</u>          (<u>uint16_t</u>) Denotes the size of a received packet.

             <u>iri_next_offset</u>  (<u>uint16_t</u>) Denotes the offset value for the next packet to  be  receive.   A  Null
                              value signifies the end of packet.

             <u>iri_cidx</u>         (<u>uint32_t</u>)  Denotes the index value of the packet currently being processed in the
                              consumer queue.

             <u>iri_flowid</u>       (<u>uint32_t</u>) Value of the RSS hash for the packet.

             <u>iri_flags</u>        (<u>uint</u>)
                               Flags describing the operational parameters of the mbuf contained in the
                               receive packet.

             <u>iri_csum_flags</u>   (<u>uint32_t</u>) Flags describing the checksum value contained in the receive packet.

             <u>iri_csum_data</u>    (<u>uint32_t</u>) Checksum data contained in the <u><a href="../man9/mbuf.9.html">mbuf</a></u>(9) packet header.

             <u>iri_m</u>            (<u>struct</u> <u>mbuf</u> <u>*</u>) A mbuf for drivers that manage their own receive queues.

             <u>iri_ifp</u>          (<u>struct</u> <u>ifnet</u> <u>*</u>) A link back to the interface structure.  Utilized by drivers that
                              have multiple interface per softc.

             <u>iri_rsstype</u>      (<u>uint8_t</u>) The value of the RSS hash type.

             <u>iri_pad</u>          (<u>uint8_t</u>) The length of any padding contained by the received data.

             <u>iri_qidx</u>         (<u>uint8_t</u>) Represents the type of queue event.  If  value  &gt;=  0  then  it  is  the
                              freelist id otherwise it is a completion queue event.

</pre><h4><b>FUNCTIONS</b></h4><pre>
       All  function  calls are associated exclusively with either packet transmission or receipt.  The void *sc
       passed as the first argument to all of the following functions represents the driver's softc.

   <b>Transmit</b> <b>Packet</b> <b>Functions</b>
             <b>isc_txd_encap</b>()
             Transmit function that sends a packet on an interface.  The  if_pkt_info  data  structure  contains
             data information fields describing the packet.  This function returns 0 if successful, otherwise an
             error value is returned.

             <b>isc_txd_flush</b>()
             Flush  function  is  called  immediately  after  the isc_txd_encap function transmits a packet.  It
             updates the hardware producer index or increments the descriptors used to  pidx_or_credits  in  the
             queue designated by the qid number.  This is often referred to as poking the doorbell register.

             <b>isc_txd_credits_update</b>()
             Credit function advances the buffer ring and calculates the credits (descriptors) processed.  Until
             the I/O is complete it cleans the range in case of multisegments and updates the count of processed
             packets.  The function returns the number of processed credits.

   <b>Receive</b> <b>Packet</b> <b>Functions</b>
             <b>isc_rxd_available</b>()
             Function calculates the remaining number of descriptors from a position given by idx.  The function
             returns this value.

             <b>isc_rxd_refill</b>()
             Starting  with  the  physical  address paddrs, the function reads a packet into the rx_ring until a
             value designated by count is reached.  vaddrs is typically not needed and is provided  for  devices
             that place their own metadata in the packet header.

             <b>isc_rxd_flush</b>()
             Flush  function  updates the producer pointer on the free list flid in queue set number qid to pidx
             to reflect the presence of new buffers.

             <b>isc_rxd_pkt_get</b>()
             Process a single software descriptor.  rxr-&gt;rx_base[i]  contains  a  descriptor  that  describes  a
             received  packet.   Hardware specific information about the buffer referred to by ri is returned in
             the data structure if_rxd_info

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <u><a href="../man9/iflibdd.9.html">iflibdd</a></u>(9), <u><a href="../man9/iflibdi.9.html">iflibdi</a></u>(9), <u><a href="../man9/mbuf.9.html">mbuf</a></u>(9)

</pre><h4><b>AUTHORS</b></h4><pre>
       This manual page was written by Nicole Graziano

Debian                                           April 16, 2019                                     <u><a href="../man9/IFLIBTXTX.9.html">IFLIBTXTX</a></u>(9)
</pre>
 </div>
</div></section>
</div>
</body>
</html>