<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>iflibdi — Device Independent Configuration Functions</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/freebsd-manpages">freebsd-manpages_12.2-2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       iflibdi — Device Independent Configuration Functions

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;ifdi_if.h&gt;</b>

   <b>Device</b> <b>Independent</b> <b>Functions</b>
       <u>int</u>
       <b>iflib_device_attach</b>(<u>device_t</u> <u>dev</u>);

       <u>int</u>
       <b>iflib_device_detach</b>(<u>device_t</u> <u>dev</u>);

       <u>int</u>
       <b>iflib_device_suspend</b>(<u>device_t</u> <u>dev</u>);

       <u>int</u>
       <b>iflib_device_resume</b>(<u>device_t</u> <u>dev</u>);

       <u>int</u>
       <b>iflib_device_register</b>(<u>device_t</u> <u>dev</u>, <u>void</u> <u>*softc</u>, <u>if_shared_ctx_t</u> <u>sctx</u>, <u>if_ctx_t</u> <u>*ctxp</u>);

       <u>int</u>
       <b>iflib_device_deregister</b>(<u>if_ctx_t</u> <u>ctx</u>);

       <u>int</u>
       <b>iflib_irq_alloc</b>(<u>if_ctx_t</u> <u>ctx</u>,   <u>if_irq_t</u> <u>irq_info</u>,   <u>int</u> <u>rid</u>,  <u>driver_filter_t</u> <u>filter</u>,  <u>void</u> <u>*filter_arg</u>,
           <u>driver_intr_t</u> <u>handler</u>, <u>void</u> <u>*arg</u>, <u>char</u> <u>*name</u>);

       <u>int</u>
       <b>iflib_irq_alloc_generic</b>(<u>if_ctx_t</u> <u>ctx</u>, <u>if_irq_t</u> <u>irq</u>, <u>int</u> <u>rid</u>,  <u>intr_type_t</u> <u>type</u>,  <u>driver_filter_t</u> <u>*filter</u>,
           <u>void</u> <u>*filter_arg</u>, <u>int</u> <u>qid</u>, <u>char</u> <u>*name</u>);

       <u>void</u>
       <b>iflib_led_create</b>(<u>if_ctx_t</u> <u>ctx</u>);

       <u>void</u>
       <b>iflib_tx_intr_deferred</b>(<u>if_ctx_t</u> <u>ctx</u>, <u>int</u> <u>txqid</u>);

       <u>void</u>
       <b>iflib_rx_intr_deferred</b>(<u>if_ctx_t</u> <u>ctx</u>, <u>int</u> <u>rxqid</u>);

       <u>void</u>
       <b>iflib_link_intr_deferred</b>(<u>if_ctx_t</u> <u>ctx</u>);

       <u>void</u>
       <b>iflib_link_state_change</b>(<u>if_ctx_t</u> <u>ctx</u>, <u>int</u> <u>linkstate</u>);

       <u>void</u>
       <b>iflib_add_int_delay_sysctl</b>(<u>if_ctx_t</u> <u>ctx</u>, <u>const</u> <u>char</u> <u>*</u>, <u>const</u> <u>char</u> <u>*</u>, <u>if_int_delay_info_t</u>, <u>int</u>, <u>int</u>);

   <b>Global</b> <b>Variables</b>
       <u>extern</u> <u>struct</u> <u>if_txrx</u>

</pre><h4><b>DATA</b> <b>STRUCTURES</b></h4><pre>
       The  <u>if_ctx_t</u> Structure is the device independent data structure that contains statistics and identifying
       information used to transmit and receive data packets.  The interface is  associated  with  an  array  of
       queues  assigned  sequentially.   Each queue has its own transmit (iflib_txq_t) and receive (iflib_rxq_t)
       queue.  The transmit queue is used to hold packets while the interface  is  in  the  process  of  sending
       another.  The receive queue is used to receive packets that are awaiting processing.

   <b>The</b> <b>if_ctx_t</b> <b>Structure</b>
       The fields of <u>struct</u> <u>if_ctx_t</u> are as follows:

             <u>if_softc</u>         (<u>void</u>) A pointer to the driver's private state block.

             <u>ifc_dev</u>          (<u>device_t</u>) The underlying device structure.

             <u>ifc_ip</u>           (<u>if_t</u>) A link back to the interface structure

             <u>ifc_cpus</u>         (<u>cpuset_t</u>)

             <u>ifc_mutex</u>        (<u>struct</u> <u>mtx</u>) Mutex lock used to maintain data integrity

             <u>ifc_mtx_name</u>     (<u>char</u> <u>*</u>) The name of the mutex

             <u>ifc_txqs</u>         (<u>iflib_txq_t</u>) Device independent transmit queue maintained internally by iflib

             <u>ifc_rxqs</u>         (<u>iflib_rxq_t</u>) Device independent receive queue maintained internally by iflib

             <u>ifc_qsets</u>        (<u>iflib_qset_t</u>)  Output  queue  that  contains  a  single  transmit (ifc_txq_t) and
                              receive (ifc_rxq_t) queue

             <u>ifc_if_flags</u>     (<u>uint32_t</u>) Flags describing the operational parameter of the interface

             <u>ifc_in_detach</u>    (<u>int</u>)

             <u>ifc_link_state</u>   (<u>int</u>) Describes the current link state of the Ethernet  interface.   Its  possible
                              values are either active or inactive.

             <u>ifc_link_irq</u>     (<u>int</u>)

             <u>ifc_vlan_attach_event</u>
                              (<u>eventhandler_tag</u>)

             <u>ifc_vlan_detach_event</u>
                              (<u>eventhandler_tag</u>)

             <u>ifc_pause_frames</u>
                              (<u>int</u>)

             <u>ifc_watchdog_events</u>
                              (<u>int</u>)

             <u>ifc_mac</u>          (<u>uint8_t</u>)

             <u>ifc_msix_mem</u>     (<u>struct</u> <u>resource</u> <u>*</u>)

             <u>ifc_legacy_irq</u>   (<u>struct</u> <u>if_irq</u>)

             <u>ifc_admin_task</u>   (<u>struct</u>  <u>grouptask</u>)  Taskqueue  task scheduled for link state change events of the
                              interface

             <u>ifc_filter_info</u>  (<u>struct</u> <u>iflib_filter_info</u>) Statistics and information relating  to  the  interface
                              device filter

             <u>ifc_media</u>        (<u>struct</u> <u>ifmedia</u>)

             <u>ifc_txrx</u>         (<u>struct</u> <u>if_txrx</u>)

</pre><h4><b>FUNCTIONS</b></h4><pre>
       The  above  named  functions  are  found  exclusively  in  iflib.  They are independent of the underlying
       hardware type or configuration.

   <b>Device</b> <b>Independent</b> <b>Functions</b>
             <b>iflib_device_attach</b>()
             Function initiates a device registration with the iflib framework.   It  calls  the  iflib_register
             function, which is responsible for allocating and initializing the <u>if_ctx_t</u> structure.

             <b>iflib_device_detach</b>()
             Shutdown  and  detach  the  device.  Unregister vlan events, drain any dependent tasks, and release
             irq, pci, and msix memory.

             <b>iflib_device_suspend</b>()
             Suspend a device by calling the device dependent suspend function and bus_generic_suspend.

             <b>iflib_device_resume</b>()
             Resume a device by calling the device dependent resume function,  the  iflib_init_locked  function,
             and bus_generic_resume.

             <b>iflib_device_register</b>()
             Register a device with the iflib framework.  Allocate and initialize the <u>if_ctx_t</u> structure.  Setup
             and initialize the MSI or MSI/X interrupt queues if necessary.  Allocate memory for queues and qset
             structure setup.

             <b>iflib_device_irq_alloc</b>()
             Allocate  an  interrupt  resource  for  a  given  rid  value  with an associated filter and handler
             function.

             <b>iflib_device_irq_alloc_generic</b>()
             Performs the same function as iflib_device_irq_alloc along with  the  additional  functionality  of
             adding a taskgroup.  The data fields and callback function are determined by the type of interrupt,
             such as IFLIB_INTR_TX, IFLIB_INTR_RX, and IFLIB_INTR_ADMIN.

             <b>iflib_led_create</b>()
             Calls led_create to initialize the ctx-&gt;ifc_led_dev field

             <b>iflib_tx_intr_deferred</b>()
             Calls GROUPTASK_ENQUEUE to enqueue the transfer queues ift_task.

             <b>iflib_rx_intr_deferred</b>()
             Calls GROUPTASK_ENQUEUE to enqueue the receive queues ifr_task.

             <b>iflib_link_intr_deferred</b>()
             Calls GROUPTASK_ENQUEUE to enqueue the link task

             <b>iflib_link_state_change</b>()
             Change  the  interface  link  status to either LINK_STATE_UP or LINK_STATE_DOWN as specified by the
             second argument to the function.

             <u>Interface</u> <u>Link</u> <u>States</u> The following link states are currently defined:

             LINK_STATE_UP
             The link is up.

             LINK_STATE_DOWN
             The link is down.

             <b>iflib_add_int_delay_sysctl</b>()
             Modifies settings to user defined values for a given set of variables.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <u><a href="../man9/iflibdd.9.html">iflibdd</a></u>(9), <u><a href="../man9/iflibtxrx.9.html">iflibtxrx</a></u>(9)

</pre><h4><b>AUTHORS</b></h4><pre>
       This manual page was written by Nicole Graziano

Debian                                            May 24, 2017                                        <u><a href="../man9/IFLIBDI.9.html">IFLIBDI</a></u>(9)
</pre>
 </div>
</div></section>
</div>
</body>
</html>