<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ofw_bus_is_compatible ofw_bus_is_compatible_strict ofw_bus_node_is_compatible ofw_bus_search_compatible —</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/freebsd-manpages">freebsd-manpages_12.2-2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       ofw_bus_is_compatible ofw_bus_is_compatible_strict ofw_bus_node_is_compatible ofw_bus_search_compatible —
       check device tree nodes for compatibility with drivers

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;dev/ofw/openfirm.h&gt;</b>
       <b>#include</b> <b>&lt;dev/ofw/ofw_bus.h&gt;</b>
       <b>#include</b> <b>&lt;dev/ofw/ofw_bus_subr.h&gt;</b>

       <u>int</u>
       <b>ofw_bus_is_compatible</b>(<u>device_t</u> <u>dev</u>, <u>const</u> <u>char</u> <u>*compatstr</u>);

       <u>int</u>
       <b>ofw_bus_is_compatible_strict</b>(<u>device_t</u> <u>dev</u>, <u>const</u> <u>char</u> <u>*compatstr</u>);

       <u>int</u>
       <b>ofw_bus_node_is_compatible</b>(<u>phandle_t</u> <u>node</u>, <u>const</u> <u>char</u> <u>*compatstr</u>);

       <u>const</u> <u>struct</u> <u>ofw_compat_data</u> <u>*</u>
       <b>ofw_bus_search_compatible</b>(<u>device_t</u> <u>dev</u>, <u>const</u> <u>struct</u> <u>ofw_compat_data</u> <u>*compat</u>);

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The  "compatible"  property  of  the device tree node is used to identify the type of the device the node
       represents.  The property is a list of one or more strings that represent hardware types  the  device  is
       compatible  with.   The  common  format  for  such  strings  is  "vendor,hardware"  where  "vendor" is an
       abbreviated name of the manufacturer and "hardware" is a  device  identifier,  for  instance,  "fsl"  for
       "Freescale"  and "imx6ul-i2c" for the I2C controller.  More than one string is required for compatibility
       with older revisions of the driver.  If hardware revision B is backward compatible with revision A device
       tree node can signal this compatibility by providing both "vndr,hrdwrA" and "vndr,hrdwrB" strings in  the
       "compatibile"  property  value.  This way older driver can use features available only in revision A, and
       the new version of the driver can take advantage of revision B feature set.

       <b>ofw_bus_is_compatible</b>() returns 1 if the <u>compatstr</u> value occurs in the "compatible" property list of  the
       device tree node associated with the device <u>dev</u>, and 0 otherwise.

       <b>ofw_bus_is_compatible_strict</b>()  return  1 if the "compatible" property of the device tree node associated
       with the device <u>dev</u> consists of only one string and this string is equal to <u>compatstr</u>, and 0 otherwise.

       <b>ofw_bus_node_is_compatible</b>() returns 1 if the <u>compatstr</u> value occurs in the "compatible" property list of
       the device tree node <u>node</u>, and 0 otherwise.

       <b>ofw_bus_search_compatible</b>() returns pointer to the first entry of the <u>compat</u> table  whose  ocd_str  field
       occurs in "compatible" property of the device tree node associated with the device <u>dev</u>.  The <u>compat</u> table
       is an array of struct ofw_compat_data elements defined as follows:

             struct ofw_compat_data {
                     const char *ocd_str;
                     uintptr_t  ocd_data;
             };
       The  <u>compat</u>  table  must be terminated by the entry with ocd_str set to NULL.  If the device tree node is
       not compatible with any of the entries, the function returns the pointer to the terminating entry.

</pre><h4><b>EXAMPLES</b></h4><pre>
             static struct ofw_compat_data compat_data[] = {
                     {"arm,hrdwrA",          FEATURE_A},
                     {"arm,hrdwrB",          FEATURE_A | FEATURE_B},
                     {NULL,                  0}
             };

             static int
             hrdwr_probe(device_t dev)
             {
                     ...
                     if (!ofw_bus_search_compatible(dev, compat_data)-&gt;ocd_data)
                             return (ENXIO);
                     ...
             }

             static int
             hrdwr_attach(device_t dev)
             {
                     ...
                     sc = device_get_softc(dev);
                     sc-&gt;sc_features = ofw_bus_search_compatible(dev, compat_data)-&gt;ocd_data;
                     ...
             }

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <u><a href="../man9/ofw_bus_find_compatible.9.html">ofw_bus_find_compatible</a></u>(9)

</pre><h4><b>AUTHORS</b></h4><pre>
       This manual page was written by Oleksandr Tymoshenko.

Debian                                            April 8, 2018                         <u><a href="../man9/ofw_bus_is_compatible.9.html">ofw_bus_is_compatible</a></u>(9)
</pre>
 </div>
</div></section>
</div>
</body>
</html>