<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>vm_page_busied,     vm_page_busy_downgrade,     vm_page_busy_sleep,    vm_page_sbusied,    vm_page_sbusy,</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/freebsd-manpages">freebsd-manpages_12.2-2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       vm_page_busied,     vm_page_busy_downgrade,     vm_page_busy_sleep,    vm_page_sbusied,    vm_page_sbusy,
       vm_page_sleep_if_busy,    vm_page_sunbusy,    vm_page_trysbusy,    vm_page_tryxbusy,     vm_page_xbusied,
       vm_page_xbusy, vm_page_xunbusy, vm_page_assert_sbusied, vm_page_assert_unbusied, vm_page_assert_xbusied â€”
       protect page identity changes and page content references

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;sys/param.h&gt;</b>
       <b>#include</b> <b>&lt;vm/vm.h&gt;</b>
       <b>#include</b> <b>&lt;vm/vm_page.h&gt;</b>

       <u>int</u>
       <b>vm_page_busied</b>(<u>vm_page_t</u> <u>m</u>);

       <u>void</u>
       <b>vm_page_busy_downgrade</b>(<u>vm_page_t</u> <u>m</u>);

       <u>void</u>
       <b>vm_page_busy_sleep</b>(<u>vm_page_t</u> <u>m</u>, <u>const</u> <u>char</u> <u>*msg</u>);

       <u>int</u>
       <b>vm_page_sbusied</b>(<u>vm_page_t</u> <u>m</u>);

       <u>void</u>
       <b>vm_page_sbusy</b>(<u>vm_page_t</u> <u>m</u>);

       <u>int</u>
       <b>vm_page_sleep_if_busy</b>(<u>vm_page_t</u> <u>m</u>, <u>const</u> <u>char</u> <u>*msg</u>);

       <u>void</u>
       <b>vm_page_sunbusy</b>(<u>vm_page_t</u> <u>m</u>);

       <u>int</u>
       <b>vm_page_trysbusy</b>(<u>vm_page_t</u> <u>m</u>);

       <u>int</u>
       <b>vm_page_tryxbusy</b>(<u>vm_page_t</u> <u>m</u>);

       <u>int</u>
       <b>vm_page_xbusied</b>(<u>vm_page_t</u> <u>m</u>);

       <u>void</u>
       <b>vm_page_xbusy</b>(<u>vm_page_t</u> <u>m</u>);

       <u>void</u>
       <b>vm_page_xunbusy</b>(<u>vm_page_t</u> <u>m</u>);

       <b>options</b> <b>INVARIANTS</b>
       <b>options</b> <b>INVARIANT_SUPPORT</b>

       <u>void</u>
       <b>vm_page_assert_sbusied</b>(<u>vm_page_t</u> <u>m</u>);

       <u>void</u>
       <b>vm_page_assert_unbusied</b>(<u>vm_page_t</u> <u>m</u>);

       <u>void</u>
       <b>vm_page_assert_xbusied</b>(<u>vm_page_t</u> <u>m</u>);

</pre><h4><b>DESCRIPTION</b></h4><pre>
       Page  identity  is  usually  protected  by  higher  level  locks  like vm_object locks and vm page locks.
       However, sometimes it is not possible to hold such locks for the time necessary to complete the  identity
       change.   In such case the page can be exclusively busied by a thread which needs to own the identity for
       a certain amount of time.

       In other situations, threads do not need to change the identity of the page  but  they  want  to  prevent
       other  threads  from  changing  the  identity  themselves.  For example, when a thread wants to access or
       update page contents without a lock held the page is shared busied.

       Before busying a page the vm_object lock must be held.  The same rule applies when a  page  is  unbusied.
       This makes the vm_object lock a real busy interlock.

       The  <b>vm_page_busied</b>()  function  returns  non-zero  if the current thread busied <u>m</u> in either exclusive or
       shared mode.  Returns zero otherwise.

       The <b>vm_page_busy_downgrade</b>() function must be used to downgrade <u>m</u> from  an  exclusive  busy  state  to  a
       shared busy state.

       The  <b>vm_page_busy_sleep</b>()  function  puts the invoking thread to sleep using the appropriate waitchannels
       for the busy mechanism.  The parameter <u>msg</u> is a string describing the sleep condition for userland tools.

       The <b>vm_page_busied</b>() function returns non-zero if the current thread busied <u>m</u> in  shared  mode.   Returns
       zero otherwise.

       The <b>vm_page_sbusy</b>() function shared busies <u>m</u>.

       The   <b>vm_page_sleep_if_busy</b>()  function  puts  the  invoking  thread  to  sleep,  using  the  appropriate
       waitchannels for the busy mechanism, if <u>m</u>.  is busied  in  either  exclusive  or  shared  mode.   If  the
       invoking  thread  slept  a  non-zero  value is returned, otherwise 0 is returned.  The parameter <u>msg</u> is a
       string describing the sleep condition for userland tools.

       The <b>vm_page_sunbusy</b>() function shared unbusies <u>m</u>.

       The <b>vm_page_trysbusy</b>()  attempts  to  shared  busy  <u>m</u>.   If  the  operation  cannot  immediately  succeed
       <b>vm_page_trysbusy</b>() returns 0, otherwise a non-zero value is returned.

       The  <b>vm_page_tryxbusy</b>()  attempts  to  exclusive  busy  <u>m</u>.   If  the operation cannot immediately succeed
       <b>vm_page_tryxbusy</b>() returns 0, otherwise a non-zero value is returned.

       The <b>vm_page_xbusied</b>() function returns non-zero if  the  current  thread  busied  <u>m</u>  in  exclusive  mode.
       Returns zero otherwise.

       The <b>vm_page_xbusy</b>() function exclusive busies <u>m</u>.

       The <b>vm_page_xunbusy</b>() function exclusive unbusies <u>m</u>.  Assertions on the busy state allow kernels compiled
       with <b>options</b> <b>INVARIANTS</b> and <b>options</b> <b>INVARIANT_SUPPORT</b> to panic if they are not respected.

       The <b>vm_page_assert_sbusied</b>() function panics if <u>m</u> is not shared busied.

       The <b>vm_page_assert_unbusied</b>() function panics if <u>m</u> is not unbusied.

       The <b>vm_page_assert_xbusied</b>() function panics if <u>m</u> is not exclusive busied.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <u><a href="../man9/vm_page_aflag.9.html">vm_page_aflag</a></u>(9),     <u><a href="../man9/vm_page_alloc.9.html">vm_page_alloc</a></u>(9),    <u><a href="../man9/vm_page_deactivate.9.html">vm_page_deactivate</a></u>(9),    <u><a href="../man9/vm_page_free.9.html">vm_page_free</a></u>(9),    <u><a href="../man9/vm_page_grab.9.html">vm_page_grab</a></u>(9),
       <u><a href="../man9/vm_page_insert.9.html">vm_page_insert</a></u>(9), <u><a href="../man9/vm_page_lookup.9.html">vm_page_lookup</a></u>(9), <u><a href="../man9/vm_page_rename.9.html">vm_page_rename</a></u>(9), <u><a href="../man9/VOP_GETPAGES.9.html">VOP_GETPAGES</a></u>(9)

Debian                                           August 07, 2013                                 <u><a href="../man9/VM_PAGE_BUSY.9.html">VM_PAGE_BUSY</a></u>(9)
</pre>
 </div>
</div></section>
</div>
</body>
</html>