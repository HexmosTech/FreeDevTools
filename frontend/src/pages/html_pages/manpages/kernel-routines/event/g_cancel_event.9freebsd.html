<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>g_post_event, g_waitfor_event, g_cancel_event — GEOM events management</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/freebsd-manpages">freebsd-manpages_12.2-2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       g_post_event, g_waitfor_event, g_cancel_event — GEOM events management

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;geom/geom.h&gt;</b>

       <u>int</u>
       <b>g_post_event</b>(<u>g_event_t</u> <u>*func</u>, <u>void</u> <u>*arg</u>, <u>int</u> <u>flag</u>, <u>...</u>);

       <u>int</u>
       <b>g_waitfor_event</b>(<u>g_event_t</u> <u>*func</u>, <u>void</u> <u>*arg</u>, <u>int</u> <u>flag</u>, <u>...</u>);

       <u>void</u>
       <b>g_cancel_event</b>(<u>void</u> <u>*ref</u>);

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The GEOM framework has its own event queue to inform classes about important events.  The event queue can
       be  also  used  by GEOM classes themselves, for example to work around some restrictions in the I/O path,
       where sleeping, heavy weight tasks, etc. are not permitted.

       The <b>g_post_event</b>() function tells the GEOM framework to call function <u>func</u> with  argument  <u>arg</u>  from  the
       event  queue.   The <u>flag</u> argument is passed to <u><a href="../man9/malloc.9.html">malloc</a></u>(9) for memory allocations inside of <b>g_post_event</b>().
       The only allowed flags are M_WAITOK and M_NOWAIT.  The rest of the arguments are used  as  references  to
       identify  the  event.   An  event  can be canceled by using any of the given references as an argument to
       <b>g_cancel_event</b>().  The list of references has to end with a NULL value.

       The <b>g_waitfor_event</b>() function is a blocking version of the <b>g_post_event</b>() function.  It waits until  the
       event is finished or canceled and then returns.

       The  <b>g_cancel_event</b>()  function  cancels  all  event(s) identified by <u>ref</u>.  Cancellation is equivalent to
       calling the requested function with requested arguments and argument <u>flag</u> set to EV_CANCEL.

</pre><h4><b>RESTRICTIONS/CONDITIONS</b></h4><pre>
       <b>g_post_event</b>():

             The argument <u>flag</u> has to be M_WAITOK or M_NOWAIT.

             The list of references has to end with a NULL value.

       <b>g_waitfor_event</b>():

             The argument <u>flag</u> has to be M_WAITOK or M_NOWAIT.

             The list of references has to end with a NULL value.

             The <b>g_waitfor_event</b>() function cannot be called from an event, since doing so  would  result  in  a
             deadlock.

</pre><h4><b>RETURN</b> <b>VALUES</b></h4><pre>
       The  <b>g_post_event</b>()  and  <b>g_waitfor_event</b>()  functions return 0 if successful; otherwise an error code is
       returned.

</pre><h4><b>EXAMPLES</b></h4><pre>
       Example of a function called from the event queue.

             void
             example_event(void *arg, int flag)
             {

                     if (flag == EV_CANCEL) {
                             printf("Event with argument %p canceled.\n", arg);
                             return;
                     }

                     printf("Event with argument %p called.\n", arg);
             }

</pre><h4><b>ERRORS</b></h4><pre>
       Possible errors for the <b>g_post_event</b>() function:

       [ENOMEM]           The <u>flag</u> argument was set to M_NOWAIT and there was insufficient memory.

       Possible errors for the <b>g_waitfor_event</b>() function:

       [EAGAIN]           The event was canceled.

       [ENOMEM]           The <u>flag</u> argument was set to M_NOWAIT and there was insufficient memory.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <u><a href="../man4/geom.4.html">geom</a></u>(4), <u><a href="../man9/DECLARE_GEOM_CLASS.9.html">DECLARE_GEOM_CLASS</a></u>(9), <u><a href="../man9/g_access.9.html">g_access</a></u>(9), <u><a href="../man9/g_attach.9.html">g_attach</a></u>(9), <u><a href="../man9/g_bio.9.html">g_bio</a></u>(9), <u><a href="../man9/g_consumer.9.html">g_consumer</a></u>(9), <u><a href="../man9/g_data.9.html">g_data</a></u>(9),  <u><a href="../man9/g_geom.9.html">g_geom</a></u>(9),
       <u><a href="../man9/g_provider.9.html">g_provider</a></u>(9), <u><a href="../man9/g_provider_by_name.9.html">g_provider_by_name</a></u>(9), <u><a href="../man9/g_wither_geom.9.html">g_wither_geom</a></u>(9)

</pre><h4><b>AUTHORS</b></h4><pre>
       This manual page was written by Pawel Jakub Dawidek &lt;<u><a href="mailto:pjd@FreeBSD.org">pjd@FreeBSD.org</a></u>&gt;.

Debian                                          January 16, 2004                                      <u><a href="../man9/G_EVENT.9.html">G_EVENT</a></u>(9)
</pre>
 </div>
</div></section>
</div>
</body>
</html>