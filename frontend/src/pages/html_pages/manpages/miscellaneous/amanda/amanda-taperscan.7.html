<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>amanda-taperscan - Amanda Taperscan Algorithms</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/amanda-common">amanda-common_3.5.4-2_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       amanda-taperscan - Amanda Taperscan Algorithms

</pre><h4><b>DESCRIPTION</b></h4><pre>
       Amanda uses a <u>taperscan</u> <u>algorithm</u> to select volumes on which to store dumps. Historically Amanda has
       provided only one, fairly complex taperscan algorithm, but this algorithm did not suit the needs of all
       users. Now Amanda offers a wide array of algorithms to suit varied needs. Adding new algorithms is not
       difficult.

       The taperscan algorithm is specified with the <b>taperscan</b> parameter, which has a default value of
       <b>traditional</b>.

       Taperscan algorithms are implemented as perl packages with the prefix Amanda::Taper::Scan::. See the perl
       documentation for Amanda::Taper::Scan for more information.

</pre><h4><b>DEFINING</b> <b>A</b> <b>TAPERSCAN</b></h4><pre>
       An taperscan is defined in <b><a href="../man5/amanda.conf.5.html">amanda.conf</a></b>(5) as follows:

       define taperscan $taperscan_name {
          comment "$comment"
          plugin "$pluginname"
          property "$PROPERTY_NAME" "$PROPERTY_VALUE"
          ...
       }
       and then referenced in the global section as

         taperscan "$taperscan_name"

       Taperscan properties, like Amanda configuration parameters, are insensitive to case, and - (dash) and _
       (underscore) may be used interchangeably.

       See the individual plugin documentation below for properties applicable to each plugin.

</pre><h4><b>TAPERSCAN</b> <b>ALGORITHMS</b></h4><pre>
       In general, these algorithms will only select reusable volumes. These are volumes which are listed in the
       <b><a href="../man5/tapelist.5.html">tapelist</a></b>(5) with the <u>reuse</u> flag, and which are not among the <u>tapecycle-1</u> most recent volumes in the list.
       Put another way, reusable volumes do not contain data that must be retained. Note that if fewer than
       <u>tapecycle-1</u> volumes have been written then there are no reusable volumes. Newly labeled volumes (volumes
       that have been labeled with <b>amlabel</b> but never used) are considered reusable.

       Many of these algorithms look for the oldest reusable volume. In most cases, this is the best volume to
       overwrite, as the data it contains is older than that on any other volume. If there are no reusable
       volumes, then there is no oldest reusable volume.

   <b>traditional</b>
       This algorithm duplicates Amanda's historical behavior, and it operates in two stages.

       First, if there is an oldest reusable volume and if the changer supports "fast" searches, then the
       algorithm uses the changer to search for that volume. Newly labeled volumes are not considered when
       calculating the oldest reusable volume. Consequently, this taperscan algorithm prefers volumes which have
       been used before to newly-labeled volumes when a fast-searchable changer is in use.

       Second, if there is no oldest reusable volume, or if that volume is not available in the changer, then
       the algorithm begins a sequential scan of the changer, starting at the current slot. It selects the first
       suitable volume it finds: a reusable volume (perhaps newly-labeled) or, if <b>autolabel</b> includes <b>empty</b>, a
       blank volume. Even across multiple invocations (when <u>runtapes</u> <u>&gt;</u> <u>1</u>), it will not return the same slot
       twice.

           <b>Note</b>
           This algorithm shows an undue preference for volumes already containing data, by omitting
           newly-labeled volumes from its first stage.  Historically, many Amanda changer scripts were not
           fast-searchable (including <u>chg-multi</u>, <u>chg-disk</u> and, if <u>havereader=0</u>, <u>chg-zd-mtx</u>), and thus skipped
           the first stage, allowing new volumes to find their way into the tape cycle.  New changers are almost
           all fast-searchable, so both stages of the algorithm are used and new tapes may be unexpectedly
           excluded.  If this causes an undesirable change in behavior, consider one of the other taperscan
           algorithms..sp .5v

   <b>oldest</b>
       This algorithm works with the Changer API (see <b><a href="../man7/amanda-changers.7.html">amanda-changers</a></b>(7)), using the inventory returned by the
       changer to locate the oldest acceptable volume available. Note that this will not work with changers that
       do not support inventory (old changers). The algorithms scans unknown slots only if no known usable
       volume is found in the inventory.

       An acceptable volume is a reusable volume, a new labeled volume or an unlabeled volume that can be
       labeled according to <b>autolabel</b>. Note that changers do not always know the contents of every slot - for
       example, a tape with an unknown barcode will not be considered usable.

       Use <b>amtape</b> <b>CONF</b> <b>inventory</b> to see the changer's inventory, and use <b>amtape</b> <b>CONF</b> <b>update</b> to update it.

   <b>lexical</b>
       This algorithm also works with the Changer API, using the inventory to determine the acceptable volumes;
       it then uses the volume which follows the last-used volume in lexical order. For volume labels containing
       leading zeros, e.g., CORP-010, this algorithm will run through the volumes in the natural order.

       It scans unknown slots only if no usable volume is found in the inventory.

       See <b>oldest</b>, above, for a definition of acceptable volumes.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man8/amanda.8.html">amanda</a></b>(8), <b><a href="../man5/amanda.conf.5.html">amanda.conf</a></b>(5), <b><a href="../man5/tapelist.5.html">tapelist</a></b>(5), <b><a href="../man7/amanda-changers.7.html">amanda-changers</a></b>(7), <b><a href="../man7/amanda-interactivity.7.html">amanda-interactivity</a></b>(7)

       The Amanda Wiki: : <a href="http://wiki.zmanda.com/">http://wiki.zmanda.com/</a>

</pre><h4><b>AUTHOR</b></h4><pre>
       <b>Dustin</b> <b>J.</b> <b>Mitchell</b> &lt;<a href="mailto:dustin@zmanda.com">dustin@zmanda.com</a>&gt;
           Zmanda, Inc. (<a href="http://www.zmanda.com">http://www.zmanda.com</a>)

Amanda 3.5.4                                       01/25/2025                                <u><a href="../man7/AMANDA-TAPERSCAN.7.html">AMANDA-TAPERSCAN</a></u>(7)
</pre>
 </div>
</div></section>
</div>
</body>
</html>