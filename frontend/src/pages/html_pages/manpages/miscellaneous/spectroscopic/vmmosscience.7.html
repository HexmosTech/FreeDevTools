<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>vmmosscience - Extraction of scientific spectra</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/noble/+package/cpl-plugin-vimos-doc">cpl-plugin-vimos-doc_4.1.7+dfsg-2build3_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       vmmosscience - Extraction of scientific spectra

</pre><h4><b>SYNOPSIS</b></h4><pre>
       esorex <b>vmmosscience</b> [OPTIONS] FILE.sof

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This  recipe  is  used to reduce scientific spectra using the extraction mask and the products created by
       the recipe vimos_calib. The spectra are bias subtracted, flat fielded (if  a  normalised  flat  field  is
       specified) and remapped eliminating the optical distortions. The wavelength calibration can be optionally
       upgraded  using  a  number of sky lines: if no sky lines catalog of wavelengths is specified, an internal
       one is used instead.

       If the alignment to the sky lines is performed, the input dispersion coefficients table is  upgraded  and
       saved  to  disk,  and a new CCD wavelengths map is created. A configuration table (typically depending on
       the grism in use) may also be specified: this table  contains  a  default  recipe  parameter  setting  to
       control  the way spectra are extracted for a specific instrument mode, as it is used for automatic run of
       the pipeline on Paranal and in Garching. If this table is specified, it will modify  the  default  recipe
       parameter  setting,  with  the  exception  of those parameters which have been explicitly modifyed on the
       command line. If a configuration table is not specified, the input recipe parameters values  will  always
       be  read  from  the  command line, or from an esorex configuration file if present, or from their generic
       default values (which are rarely meaningful).

       Either a scientific or a standard star exposure can be specified in input.

       Only in case of a standard star exposure input, the atmospheric extinction table and  a  table  with  the
       physical fluxes of the observed standard star must be specified in input, and a spectro-photometric table
       is  created  in  output.  This  table  can then be input again to this recipe, always with an atmospheric
       extinction table, and if a photometric calibration is requested then flux calibrated spectra (in units of
       erg/cm/cm/s/Angstrom) are also written in output.

       Input files:

         DO category:                Type:       Explanation:         Required:
         MOS_SCIENCE                 Raw         Scientific exposure     Y
         or MOS_STANDARD             Raw         Standard star exposure  Y

         MASTER_BIAS                 Calib       Master bias             Y
         SKY_LINE_CATALOG            Calib       Sky lines catalog       .

         MOS_MASTER_SCREEN_FLAT      Calib       Normalised flat field   .

         MOS_DISP_COEFF              Calib       Inverse dispersion      Y
         MOS_CURV_COEFF              Calib       Spectral curvature      Y
         MOS_SLIT_LOCATION           Calib       Slits positions table   Y
         CONFIG_TABLE                Calib       Configuration table     .

         In case MOS_STANDARD is specified in input,

         EXTINCT_TABLE               Calib       Atmospheric extinction  Y
         STD_FLUX_TABLE              Calib       Standard star flux      Y
         TELLURIC_CONTAMINATION      Calib       Telluric regions list    .

         In case a photometric calibration is requested for scientific
         data, the following inputs are mandatory:

         EXTINCT_TABLE              Calib       Atmospheric extinction  Y
         MOS_SPECPHOT_TABLE         Calib       Response curves         Y

         If requested for standard star data, the SPECPHOT_TABLE can be dropped:
         in this case the correction is applied using the SPECPHOT_TABLE produced
         in the same run.

       Output files  (acronym  _STD_  replaces  _SCI_  and  _STANDARD_  replaces  _SCIENCE_  in  case  input  is
       MOS_STANDARD rather than MOS_SCIENCE):

         DO category:                Data type:  Explanation:
         MOS_SCIENCE_REDUCED           Image  Extracted scientific spectra
         MOS_SCI_SKY_REDUCED           Image  Extracted sky spectra
         MOS_SCI_ERROR_REDUCED         Image  Errors on extracted spectra
         MOS_UNMAPPED_SCIENCE          Image  Sky subtracted scientific spectra
         MOS_SCIENCE_EXTRACTED         Image  Rectified scientific spectra
         MOS_SCIENCE_SKY_EXTRACTED     Image  Rectified science spectra with sky
         MOS_SCIENCE_SKY               Image  Rectified sky spectra
         MOS_SCI_UNMAPPED_SKY          Image  Sky on CCD
         MOS_SCI_GLOBAL_SKY_SPECTRUM   Table  Global sky spectrum
         OBJECT_SCI_TABLE              Table  Positions of detected objects

         Only if fringing correction is requested (dithered exposures):
         MOS_SCI_FRINGES               Image  Fringe map

         Only if the sky-alignment of the wavelength solution is requested:
         MOS_SCI_SKYLINES_OFFSETS_SLIT Table  Sky lines offsets
         MOS_SCI_DISP_COEFF_SKY        Table  Upgraded dispersion coefficients
         MOS_SCI_WAVELENGTH_MAP_SKY    Image  Upgraded wavelength map

         Only if a MOS_STANDARD is specified in input:
         MOS_SPECPHOT_TABLE            Table  Efficiency and response curves

         Only if MOS_SPECPHOT_TABLE or MOS_MASTER_RESPONSE are specified in input:
         MOS_SCIENCE_FLUX_REDUCED      Image  Flux calibrated scientific spectra
         MOS_SCI_ERROR_FLUX_REDUCED    Image  Errors on flux calibrated spectra
         MOS_SCIENCE_FLUX_EXTRACTED    Image  Flux calibrated slit spectra

</pre><h4><b>OPTIONS</b></h4><pre>
       <b>--skyalign</b> <u>&lt;int&gt;</u>
              Polynomial  order  for  sky lines alignment, or -1 to avoid alignment (int; default: -1). The full
              name of this option for the EsoRex configuration file is  <b>vimos.vmmosscience.skyalign</b>  [default  =
              <u>-1</u>].

       <b>--flatfield</b> <u>&lt;bool&gt;</u>
              Apply  flat field (bool; default: True). The full name of this option for the EsoRex configuration
              file is <b>vimos.vmmosscience.flatfield</b> [default = <u>True</u>].

       <b>--skyglobal</b> <u>&lt;bool&gt;</u>
              Subtract global sky spectrum from CCD (bool; default: False). The full name of this option for the
              EsoRex configuration file is <b>vimos.vmmosscience.skyglobal</b> [default = <u>False</u>].

       <b>--skymedian</b> <u>&lt;bool&gt;</u>
              Sky subtraction from extracted slit spectra (bool; default: False). The full name of  this  option
              for the EsoRex configuration file is <b>vimos.vmmosscience.skymedian</b> [default = <u>False</u>].

       <b>--skylocal</b> <u>&lt;bool&gt;</u>
              Sky  subtraction from CCD slit spectra (bool; default: True). The full name of this option for the
              EsoRex configuration file is <b>vimos.vmmosscience.skylocal</b> [default = <u>True</u>].

       <b>--cosmics</b> <u>&lt;bool&gt;</u>
              Eliminate cosmic rays hits (only if global or local sky  subtraction  is  also  requested)  (bool;
              default:   True).   The   full   name  of  this  option  for  the  EsoRex  configuration  file  is
              <b>vimos.vmmosscience.cosmics</b> [default = <u>True</u>].

       <b>--slit_margin</b> <u>&lt;int&gt;</u>
              Number of pixels to exclude at each slit in object detection and extraction (int; default: 3). The
              full name of this option for  the  EsoRex  configuration  file  is  <b>vimos.vmmosscience.slit_margin</b>
              [default = <u>3</u>].

       <b>--ext_radius</b> <u>&lt;int&gt;</u>
              Maximum  extraction  radius  for detected objects (pixel) (int; default: 6). The full name of this
              option for the EsoRex configuration file is <b>vimos.vmmosscience.ext_radius</b> [default = <u>6</u>].

       <b>--cont_radius</b> <u>&lt;int&gt;</u>
              Minimum distance at which two objects of equal luminosity do not contaminate  each  other  (pixel)
              (int;  default:  0).  The  full  name  of  this  option  for  the  EsoRex  configuration  file  is
              <b>vimos.vmmosscience.cont_radius</b> [default = <u>0</u>].

       <b>--ext_mode</b> <u>&lt;int&gt;</u>
              Object extraction method: 0 = aperture, 1 = Horne optimal extraction (int; default: 1).  The  full
              name  of  this  option for the EsoRex configuration file is <b>vimos.vmmosscience.ext_mode</b> [default =
              <u>1</u>].

       <b>--detection</b> <u>&lt;float&gt;</u>
              Object detection threshold (ADU) (float; default: 2.0). The full  name  of  this  option  for  the
              EsoRex configuration file is <b>vimos.vmmosscience.detection</b> [default = <u>2.0</u>].

       <b>--resp_fit_nknots</b> <u>&lt;int&gt;</u>
              Number of knots in spline fitting of the instrument response. (-1: No fitting. -2: Read from grism
              table)  (int;  default:  -2).  The  full  name of this option for the EsoRex configuration file is
              <b>vimos.vmmosscience.resp_fit_nknots</b> [default = <u>-2</u>].

       <b>--resp_fit_degree</b> <u>&lt;int&gt;</u>
              Degree of polynomial in fitting of the instrument response. (-1: No fitting. -2: Read  from  grism
              table)  (int;  default:  -2).  The  full  name of this option for the EsoRex configuration file is
              <b>vimos.vmmosscience.resp_fit_degree</b> [default = <u>-2</u>].

       <b>--resp_ignore_mode</b> <u>&lt;str&gt;</u>
              Types of lines/regions to ignore in response. Valid ones are ´stellar_absorption´, ´telluric´  and
              ´command_line´        (from        parameter        resp_ignore_lines)        (str;       default:
              ´stellar_absorption,telluric,command_line´).  The  full  name  of  this  option  for  the   EsoRex
              configuration       file       is       <b>vimos.vmmosscience.resp_ignore_mode</b>       [default       =
              <u>stellar_absorption,telluric,command_line</u>].

       <b>--resp_ignore_points</b> <u>&lt;str&gt;</u>
              Extra lines/regions to ignore in response. Use a comma separated list of values. A  range  can  be
              specified  like  4500.0-4600.0  (str;  default:  ´´).  The full name of this option for the EsoRex
              configuration file is <b>vimos.vmmosscience.resp_ignore_points</b> [default = ].

       <b>--resp_use_flat_sed</b> <u>&lt;str&gt;</u>
              Use the flat SED to normalise the observed spectra. Value  are  true,  false,  grism_table.  (str;
              default:  ´grism_table´).  The  full  name  of  this  option  for the EsoRex configuration file is
              <b>vimos.vmmosscience.resp_use_flat_sed</b> [default = <u>grism_table</u>].

       <b>--resp_shift</b> <u>&lt;float&gt;</u>
              The extracted standard star will be shifted these many angstroms before using it  to  compute  the
              response.  This  is  useful for observed std stars not centered in the slits. Positive values will
              shift the spectrum to the red. Shift is given in Angstroms but  no  fraction  of  pixels  will  be
              shifted.  (float; default: 0.0). The full name of this option for the EsoRex configuration file is
              <b>vimos.vmmosscience.resp_shift</b> [default = <u>0.0</u>].

       <b>--time_normalise</b> <u>&lt;bool&gt;</u>
              Normalise output spectra by the exposure time (bool; default: True). The full name of this  option
              for the EsoRex configuration file is <b>vimos.vmmosscience.time_normalise</b> [default = <u>True</u>].

       <b>--anyframe</b> <u>&lt;bool&gt;</u>
              Look  for a standard star in any frame classified as MOS_STANDARD (bool; default: False). The full
              name of this option for the EsoRex configuration file is  <b>vimos.vmmosscience.anyframe</b>  [default  =
              <u>False</u>].

       <b>--alignment</b> <u>&lt;str&gt;</u>
              Type  of  alignment  of  dithered frames, either to the nearest neighbour pixel or to fractions of
              pixel (str; default: ´integer´). The full name of this option for the EsoRex configuration file is
              <b>vimos.vmmosscience.alignment</b> [default = <u>integer</u>].

       <b>--stack_method</b> <u>&lt;str&gt;</u>
              Frames combination method (str; default: ´average´). The full name of this option for  the  EsoRex
              configuration file is <b>vimos.vmmosscience.stack_method</b> [default = <u>average</u>].

       <b>--minrejection</b> <u>&lt;int&gt;</u>
              Number  of  lowest  values  to be rejected (int; default: 1). The full name of this option for the
              EsoRex configuration file is <b>vimos.vmmosscience.minrejection</b> [default = <u>1</u>].

       <b>--maxrejection</b> <u>&lt;int&gt;</u>
              Number of highest values to be rejected (int; default: 1). The full name of this  option  for  the
              EsoRex configuration file is <b>vimos.vmmosscience.maxrejection</b> [default = <u>1</u>].

       <b>--klow</b> <u>&lt;float&gt;</u>
              Low  threshold in ksigma method (float; default: 3.0). The full name of this option for the EsoRex
              configuration file is <b>vimos.vmmosscience.klow</b> [default = <u>3.0</u>].

       <b>--khigh</b> <u>&lt;float&gt;</u>
              High threshold in ksigma method (float; default: 3.0). The full name of this option for the EsoRex
              configuration file is <b>vimos.vmmosscience.khigh</b> [default = <u>3.0</u>].

       <b>--kiter</b> <u>&lt;int&gt;</u>
              Max number of iterations in ksigma method (int; default: 999). The full name of  this  option  for
              the EsoRex configuration file is <b>vimos.vmmosscience.kiter</b> [default = <u>999</u>].

       <b>--dither</b> <u>&lt;bool&gt;</u>
              Align  dithered  frames before stacking(for multiple input frames) (bool; default: True). The full
              name of this option for the EsoRex configuration  file  is  <b>vimos.vmmosscience.dither</b>  [default  =
              <u>True</u>].

       <b>--compute</b> <u>&lt;bool&gt;</u>
              Compute  offsets  of  dithered  images  from  detected objects (true), or read offsets from header
              (false) (bool; default: False). The full name of this option for the EsoRex configuration file  is
              <b>vimos.vmmosscience.dither.compute</b> [default = <u>False</u>].

       <b>--fringing</b> <u>&lt;bool&gt;</u>
              Apply fringing correction (only for dithered observations) (bool; default: True). The full name of
              this option for the EsoRex configuration file is <b>vimos.vmmosscience.fringing</b> [default = <u>True</u>].

       <b>--offset</b> <u>&lt;float&gt;</u>
              Minimum  required  offset  between  exposures  for  applying  the sky fringing correction. (float;
              default:  3.0).  The  full  name  of  this  option  for   the   EsoRex   configuration   file   is
              <b>vimos.vmmosscience.fringing.offset</b> [default = <u>3.0</u>].

       <b>--generate_idp</b> <u>&lt;bool&gt;</u>
              Generate  IDP  products  (bool;  default:  False).  The  full  name  of this option for the EsoRex
              configuration file is <b>vimos.vmmosscience.generate_idp</b> [default = <u>False</u>].

       Note that it is possible to create a configuration file containing these  options,  along  with  suitable
       default values. Please refer to the details provided by the 'esorex --help' command.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       The full documentation for the vimos pipeline can be downloaded as a PDF file using the following URL:

              <b><a href="ftp://ftp.eso.org/pub/dfs/pipelines/vimos/vimos-pipeline-manual-6.9.pdf">ftp://ftp.eso.org/pub/dfs/pipelines/vimos/vimos-pipeline-manual-6.9.pdf</a></b>

       An    overview    over    the    existing    ESO    pipelines    can   be   found   on   the   web   page
       <b>https://www.eso.org/sci/software/pipelines/</b>.

       Basic documentation about the EsoRex program can be found at the esorex (1) man page.

       It  is  possible  to  call   the   pipelines   from   python   using   the   python-cpl   package.    See
       <b>https://packages.python.org/python-cpl/index.html</b> for further information.

       The other recipes of the vimos pipeline are <u><a href="../man7/vimos_ima_bias.7.html">vimos_ima_bias</a></u>(7), <u><a href="../man7/vimos_ima_dark.7.html">vimos_ima_dark</a></u>(7), <u><a href="../man7/vimos_ima_det_noise.7.html">vimos_ima_det_noise</a></u>(7),
       <u><a href="../man7/vimos_ima_fringe.7.html">vimos_ima_fringe</a></u>(7),  <u><a href="../man7/vimos_ima_science.7.html">vimos_ima_science</a></u>(7), <u><a href="../man7/vimos_ima_standard.7.html">vimos_ima_standard</a></u>(7), <u><a href="../man7/vimos_ima_twilight_flat.7.html">vimos_ima_twilight_flat</a></u>(7), <u><a href="../man7/vmbias.7.html">vmbias</a></u>(7),
       <u><a href="../man7/vmdark.7.html">vmdark</a></u>(7),    <u><a href="../man7/vmdet.7.html">vmdet</a></u>(7),    <u><a href="../man7/vmifucalib.7.html">vmifucalib</a></u>(7),    <u><a href="../man7/vmifucombine.7.html">vmifucombine</a></u>(7),    <u><a href="../man7/vmifucombinecube.7.html">vmifucombinecube</a></u>(7),    <u><a href="../man7/vmifuscience.7.html">vmifuscience</a></u>(7),
       <u><a href="../man7/vmifustandard.7.html">vmifustandard</a></u>(7), <u><a href="../man7/vmmoscalib.7.html">vmmoscalib</a></u>(7), <u><a href="../man7/vmspphot.7.html">vmspphot</a></u>(7)

</pre><h4><b>VERSION</b></h4><pre>
       vmmosscience 4.1.7

</pre><h4><b>AUTHOR</b></h4><pre>
       Carlo Izzo &lt;https://support.eso.org&gt;

</pre><h4><b>BUG</b> <b>REPORTS</b></h4><pre>
       Please  report  any  problems to https://support.eso.org. Alternatively, you may send a report to the ESO
       User Support Department &lt;<a href="mailto:usd-help@eso.org">usd-help@eso.org</a>&gt;.

</pre><h4><b>LICENSE</b></h4><pre>
       This file is part of the VIMOS Instrument Pipeline Copyright (C) 2019 European Southern Observatory

       This program is free software; you can redistribute it and/or modify  it  under  the  terms  of  the  GNU
       General  Public License as published by the Free Software Foundation; either version 2 of the License, or
       (at your option) any later version.

       This program is distributed in the hope that it will be useful, but WITHOUT ANY  WARRANTY;  without  even
       the  implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public
       License for more details.

       You should have received a copy of the GNU General Public License along with this program; if not,  write
       to the Free Software Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA

vmmosscience                                          4.1.7                                      <u><a href="../man7/VMMOSSCIENCE.7.html">VMMOSSCIENCE</a></u>(7)
</pre>
 </div>
</div></section>
</div>
</body>
</html>