<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>fors_science - Extraction of scientific spectra</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/noble/+package/cpl-plugin-fors-doc">cpl-plugin-fors-doc_5.5.7+dfsg-2build1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       fors_science - Extraction of scientific spectra

</pre><h4><b>SYNOPSIS</b></h4><pre>
       esorex <b>fors_science</b> [OPTIONS] FILE.sof

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This  recipe  is  used to reduce scientific spectra using the extraction mask and the products created by
       the recipe fors_calib. The spectra are bias subtracted, flat fielded  (if  a  normalised  flat  field  is
       specified) and remapped eliminating the optical distortions. The wavelength calibration can be optionally
       upgraded  using  a  number of sky lines: if no sky lines catalog of wavelengths is specified, an internal
       one is used instead.

       If the alignment to the sky lines is performed, the input dispersion coefficients table is  upgraded  and
       saved to disk, and a new CCD wavelengths map is created.

       This  recipe  accepts  both  FORS1 and FORS2 frames. A grism table (typically depending on the instrument
       mode, and in particular on the grism used) may also be specified: this table contains  a  default  recipe
       parameter  setting to control the way spectra are extracted for a specific instrument mode, as it is used
       for automatic run of the pipeline on Paranal and in Garching. If this table is specified, it will  modify
       the  default  recipe parameter setting, with the exception of those parameters which have been explicitly
       modifyed on the command line. If a grism table is not specified, the input recipe parameters values  will
       always  be  read  from  the  command line, or from an esorex configuration file if present, or from their
       generic default values (that are rarely meaningful).

       In the table below the MXU acronym can be read alternatively as MOS and LSS, depending on the  instrument
       mode  of  the  input  data.  The  acronym  SCI  on  products should be read STD in case of standard stars
       observations A CURV_COEFF table is not (yet) expected for LSS data.

       Either a scientific or a standard star exposure can be specified in input.

       Only in case of a standard star exposure input, the atmospheric extinction table and  a  table  with  the
       physical fluxes of the observed standard star must be specified in input, and a spectro-photometric table
       is  created  in  output.  This  table  can then be input again to this recipe, always with an atmospheric
       extinction table, and if a photometric calibration is requested then flux calibrated spectra (in units of
       erg/cm/cm/s/Angstrom) are also written in output.

       Input files:

         DO category:               Type:       Explanation:         Required:
         SCIENCE_MXU                Raw         Scientific exposure      Y
         or STANDARD_MXU            Raw         Standard star exposure   Y
         MASTER_BIAS                Calib       Master bias              Y
         GRISM_TABLE                Calib       Grism table              .

         MASTER_SKYLINECAT          Calib       Sky lines catalog        .

         MASTER_NORM_FLAT_MXU       Calib       Normalised flat field    .

         DISP_COEFF_MXU             Calib       Inverse dispersion       Y
         CURV_COEFF_MXU             Calib       Spectral curvature       Y
         SLIT_LOCATION_MXU          Calib       Slits positions table    Y
         FLAT_SED_MXU               Calib       Slits dispersion profile .

         or, in case of LSS-like MOS/MXU data,

         MASTER_NORM_FLAT_LONG_MXU  Calib       Normalised flat field    .

         DISP_COEFF_LONG_MXU        Calib       Inverse dispersion       Y
         SLIT_LOCATION_LONG_MXU     Calib       Slits positions table    Y
         GLOBAL_DISTORTION_TABLE    Calib       Global distortion        .

         In case STANDARD_MXU is specified in input,

         EXTINCT_TABLE              Calib       Atmospheric extinction   Y
         STD_FLUX_TABLE             Calib       Standard star flux       Y
         TELLURIC_CONTAMINATION     Calib       Telluric regions list    .

         The following input files are mandatory if photometric calibrated  spectra are desired:

         EXTINCT_TABLE              Calib       Atmospheric extinction   Y
         SPECPHOT_TABLE             Calib       Response curves          Y

         If requested for standard star data, the SPECPHOT_TABLE can be dropped:
         in this case the correction is applied using the SPECPHOT_TABLE produced
         in the same run.

       Output files:

         DO category:               Data type:  Explanation:
         REDUCED_SCI_MXU            FITS image  Extracted scientific spectra
         REDUCED_SKY_SCI_MXU        FITS image  Extracted sky spectra
         REDUCED_ERROR_SCI_MXU      FITS image  Errors on extracted spectra
         UNMAPPED_SCI_MXU           FITS image  Sky subtracted scientific spectra
         MAPPED_SCI_MXU             FITS image  Rectified scientific spectra
         MAPPED_ALL_SCI_MXU         FITS image  Rectified science spectra with sky
         MAPPED_SKY_SCI_MXU         FITS image  Rectified sky spectra
         UNMAPPED_SKY_SCI_MXU       FITS image  Sky on CCD
         OBJECT_TABLE_SCI_MXU       FITS table  Positions of detected objects

         Only if the global sky subtraction is requested:
         GLOBAL_SKY_SPECTRUM_MXU    FITS table  Global sky spectrum

         Only if the sky-alignment of the wavelength solution is requested:
         SKY_SHIFTS_LONG_SCI_MXU    FITS table  Sky lines offsets (LSS-like data)
         or SKY_SHIFTS_SLIT_SCI_MXU FITS table  Sky lines offsets (MOS-like data)
         DISP_COEFF_SCI_MXU         FITS table  Upgraded dispersion coefficients
         WAVELENGTH_MAP_SCI_MXU     FITS image  Upgraded wavelength map

         Only if a STANDARD_MXU is specified in input:
         SPECPHOT_TABLE             FITS table  Efficiency and response curves

         Only if a photometric calibration was requested:
         REDUCED_FLUX_SCI_MXU       FITS image  Flux calibrated scientific spectra
         REDUCED_FLUX_ERROR_SCI_MXU FITS image  Errors on flux calibrated spectra
         MAPPED_FLUX_SCI_MXU        FITS image  Flux calibrated slit spectra

</pre><h4><b>OPTIONS</b></h4><pre>
       <b>--skyalign</b> <u>&lt;int&gt;</u>
              Polynomial order for sky lines alignment, or -1 to avoid alignment (int; default:  -1).  The  full
              name  of  this  option  for the EsoRex configuration file is <b>fors.fors_science.skyalign</b> [default =
              <u>-1</u>].

       <b>--flatfield</b> <u>&lt;bool&gt;</u>
              Apply flat field (bool; default: True). The full name of this option for the EsoRex  configuration
              file is <b>fors.fors_science.flatfield</b> [default = <u>True</u>].

       <b>--skyglobal</b> <u>&lt;bool&gt;</u>
              Subtract global sky spectrum from CCD (bool; default: False). The full name of this option for the
              EsoRex configuration file is <b>fors.fors_science.skyglobal</b> [default = <u>False</u>].

       <b>--skymedian</b> <u>&lt;bool&gt;</u>
              Sky  subtraction  from extracted slit spectra (bool; default: False). The full name of this option
              for the EsoRex configuration file is <b>fors.fors_science.skymedian</b> [default = <u>False</u>].

       <b>--skylocal</b> <u>&lt;bool&gt;</u>
              Sky subtraction from CCD slit spectra (bool; default: True). The full name of this option for  the
              EsoRex configuration file is <b>fors.fors_science.skylocal</b> [default = <u>True</u>].

       <b>--cosmics</b> <u>&lt;bool&gt;</u>
              Eliminate  cosmic  rays hits, only if either global or local (not for LSS) sky subtraction is also
              requested. (bool; default: False). The full name of this option for the EsoRex configuration  file
              is <b>fors.fors_science.cosmics</b> [default = <u>False</u>].

       <b>--slit_margin</b> <u>&lt;int&gt;</u>
              Number of pixels to exclude at each slit in object detection and extraction (int; default: 3). The
              full  name  of  this  option  for  the  EsoRex configuration file is <b>fors.fors_science.slit_margin</b>
              [default = <u>3</u>].

       <b>--ext_radius</b> <u>&lt;int&gt;</u>
              Maximum extraction radius for detected objects (unbinned pixel) (int; default: 12). The full  name
              of this option for the EsoRex configuration file is <b>fors.fors_science.ext_radius</b> [default = <u>12</u>].

       <b>--cont_radius</b> <u>&lt;int&gt;</u>
              Minimum  distance  at  which two objects of equal luminosity do not contaminate each other (pixel)
              (int;  default:  0).  The  full  name  of  this  option  for  the  EsoRex  configuration  file  is
              <b>fors.fors_science.cont_radius</b> [default = <u>0</u>].

       <b>--ext_mode</b> <u>&lt;int&gt;</u>
              Object  extraction  method: 0 = aperture, 1 = Horne optimal extraction (int; default: 1). The full
              name of this option for the EsoRex configuration file is <b>fors.fors_science.ext_mode</b> [default = <u>1</u>].

       <b>--resp_fit_nknots</b> <u>&lt;int&gt;</u>
              Number of knots in spline fitting of the instrument response. (-1: No fitting. -2: Read from grism
              table) (int; default: -2). The full name of this option  for  the  EsoRex  configuration  file  is
              <b>fors.fors_science.resp_fit_nknots</b> [default = <u>-2</u>].

       <b>--resp_fit_degree</b> <u>&lt;int&gt;</u>
              Degree  of  polynomial in fitting of the instrument response. (-1: No fitting. -2: Read from grism
              table) (int; default: -2). The full name of this option  for  the  EsoRex  configuration  file  is
              <b>fors.fors_science.resp_fit_degree</b> [default = <u>-2</u>].

       <b>--resp_ignore_mode</b> <u>&lt;str&gt;</u>
              Types  of lines/regions to ignore in response. Valid ones are ´stellar_absorption´, ´telluric´ and
              ´command_line´       (from        parameter        resp_ignore_lines)        (str;        default:
              ´stellar_absorption,telluric,command_line´).   The  full  name  of  this  option  for  the  EsoRex
              configuration       file       is       <b>fors.fors_science.resp_ignore_mode</b>       [default        =
              <u>stellar_absorption,telluric,command_line</u>].

       <b>--resp_ignore_points</b> <u>&lt;str&gt;</u>
              Extra  lines/regions  to  ignore in response. Use a comma separated list of values. A range can be
              specified like 4500.0-4600.0 (str; default: ´´). The full name  of  this  option  for  the  EsoRex
              configuration file is <b>fors.fors_science.resp_ignore_points</b> [default = ].

       <b>--resp_use_flat_sed</b> <u>&lt;str&gt;</u>
              Use  the  flat  SED  to  normalise the observed spectra. Value are true, false, grism_table. (str;
              default: ´grism_table´). The full name of  this  option  for  the  EsoRex  configuration  file  is
              <b>fors.fors_science.resp_use_flat_sed</b> [default = <u>grism_table</u>].

       <b>--nonlinear_level</b> <u>&lt;float&gt;</u>
              Level  above  which  the  detector  is not linear (float; default: 60000.0). The full name of this
              option for the EsoRex configuration file is <b>fors.fors_science.nonlinear_level</b> [default = <u>60000.0</u>].

       <b>--generate_idp</b> <u>&lt;bool&gt;</u>
              Set to TRUE to request IDP generation (bool; default: True). The full name of this option for  the
              EsoRex configuration file is <b>fors.fors_science.generate_idp</b> [default = <u>True</u>].

       Note  that  it  is  possible to create a configuration file containing these options, along with suitable
       default values. Please refer to the details provided by the 'esorex --help' command.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       The full documentation for the fors pipeline can be downloaded as a PDF file using the following URL:

              <b><a href="ftp://ftp.eso.org/pub/dfs/pipelines/fors/fors-pipeline-manual-4.9.pdf">ftp://ftp.eso.org/pub/dfs/pipelines/fors/fors-pipeline-manual-4.9.pdf</a></b>

       An   overview   over   the   existing   ESO   pipelines    can    be    found    on    the    web    page
       <b>https://www.eso.org/sci/software/pipelines/</b>.

       Basic documentation about the EsoRex program can be found at the esorex (1) man page.

       It   is   possible   to   call   the   pipelines   from   python   using  the  python-cpl  package.   See
       <b>https://packages.python.org/python-cpl/index.html</b> for further information.

       The other recipes of  the  fors  pipeline  are  <u><a href="../man7/fors_align_sky.7.html">fors_align_sky</a></u>(7),  <u><a href="../man7/fors_align_sky_lss.7.html">fors_align_sky_lss</a></u>(7),  <u><a href="../man7/fors_bias.7.html">fors_bias</a></u>(7),
       <u><a href="../man7/fors_calib.7.html">fors_calib</a></u>(7),     <u><a href="../man7/fors_config.7.html">fors_config</a></u>(7),    <u><a href="../man7/fors_dark.7.html">fors_dark</a></u>(7),    <u><a href="../man7/fors_detect_objects.7.html">fors_detect_objects</a></u>(7),    <u><a href="../man7/fors_detect_spectra.7.html">fors_detect_spectra</a></u>(7),
       <u><a href="../man7/fors_extract.7.html">fors_extract</a></u>(7), <u><a href="../man7/fors_extract_objects.7.html">fors_extract_objects</a></u>(7), <u><a href="../man7/fors_extract_slits.7.html">fors_extract_slits</a></u>(7), <u><a href="../man7/fors_flatfield.7.html">fors_flatfield</a></u>(7),  <u><a href="../man7/fors_img_science.7.html">fors_img_science</a></u>(7),
       <u><a href="../man7/fors_img_screen_flat.7.html">fors_img_screen_flat</a></u>(7),      <u><a href="../man7/fors_img_sky_flat.7.html">fors_img_sky_flat</a></u>(7),      <u><a href="../man7/fors_normalise_flat.7.html">fors_normalise_flat</a></u>(7),      <u><a href="../man7/fors_photometry.7.html">fors_photometry</a></u>(7),
       <u><a href="../man7/fors_pmos_calib.7.html">fors_pmos_calib</a></u>(7), <u><a href="../man7/fors_pmos_extract.7.html">fors_pmos_extract</a></u>(7),  <u><a href="../man7/fors_pmos_science.7.html">fors_pmos_science</a></u>(7),  <u><a href="../man7/fors_remove_bias.7.html">fors_remove_bias</a></u>(7),  <u><a href="../man7/fors_resample.7.html">fors_resample</a></u>(7),
       <u><a href="../man7/fors_spec_mflat.7.html">fors_spec_mflat</a></u>(7),  <u><a href="../man7/fors_subtract_sky.7.html">fors_subtract_sky</a></u>(7), <u><a href="../man7/fors_subtract_sky_lss.7.html">fors_subtract_sky_lss</a></u>(7), <u><a href="../man7/fors_sumflux.7.html">fors_sumflux</a></u>(7), <u><a href="../man7/fors_trace_flat.7.html">fors_trace_flat</a></u>(7),
       <u><a href="../man7/fors_wave_calib.7.html">fors_wave_calib</a></u>(7), <u><a href="../man7/fors_wave_calib_lss.7.html">fors_wave_calib_lss</a></u>(7), <u><a href="../man7/fors_zeropoint.7.html">fors_zeropoint</a></u>(7)

</pre><h4><b>VERSION</b></h4><pre>
       fors_science 5.5.7

</pre><h4><b>AUTHOR</b></h4><pre>
       Carlo Izzo &lt;<a href="mailto:usd-help@eso.org">usd-help@eso.org</a>&gt;

</pre><h4><b>BUG</b> <b>REPORTS</b></h4><pre>
       Please report any problems to <a href="mailto:usd-help@eso.org">usd-help@eso.org</a>. Alternatively, you may send a  report  to  the  ESO  User
       Support Department &lt;<a href="mailto:usd-help@eso.org">usd-help@eso.org</a>&gt;.

</pre><h4><b>LICENSE</b></h4><pre>
       This  file  is  currently  part of the FORS Instrument Pipeline Copyright (C) 2002-2011 European Southern
       Observatory

       This program is free software; you can redistribute it and/or modify  it  under  the  terms  of  the  GNU
       General  Public License as published by the Free Software Foundation; either version 2 of the License, or
       (at your option) any later version.

       This program is distributed in the hope that it will be useful, but WITHOUT ANY  WARRANTY;  without  even
       the  implied  warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public
       License for more details.

       You should have received a copy of the GNU General Public License along with this program; if not,  write
       to the Free Software Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA  02110-1301  USA

fors_science                                          5.5.7                                      <u><a href="../man7/FORS_SCIENCE.7.html">FORS_SCIENCE</a></u>(7)
</pre>
 </div>
</div></section>
</div>
</body>
</html>