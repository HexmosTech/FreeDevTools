<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ibacm_prov - InfiniBand communication management assistant provider interface</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/ibacm">ibacm_56.1-1ubuntu1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       ibacm_prov - InfiniBand communication management assistant provider interface

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;infiniband/acm_prov.h&gt;</b>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The  ibacm  provider  interface provides a plugin interface that allows a vendor to implement proprietary
       solutions to support scalable address and route resolution services over InfiniBand.

       To add a provider to the ibacm core service, the provider must

       1. be implemented as a shared library;

       2. be installed under a configured directory, eg., /usr/lib/x86_64-linux-gnu/ibacm;

       3  export a function provider_query() that returns a pointer to its provider info
              and version info.

       The prototype of provider_query function is defined below:

       int provider_query(struct acm_provider **info, uint32_t *version);

       This function should return a pointer to its provider structure:

       struct acm_provider {
            size_t    size;
            uint32_t  version;
            char      *name;
            int  (*open_device)(const struct acm_device *device,
                      void **dev_context);
            void (*close_device)(void *dev_context);
            int  (*open_port)(const struct acm_port *port,
                      void *dev_context, void **port_context);
            void (*close_port)(void *port_context);
            int  (*open_endpoint)(const struct acm_endpoint *endpoint,
                      void *port_context, void **ep_context);
            void (*close_endpoint)(void *ep_context);
            int  (*add_address)(const struct acm_address *addr, void *ep_context,
                      void **addr_context);
            void (*remove_address)(void *addr_context);
            int  (*resolve)(void *addr_context, struct acm_msg *msg, uint64_t id);
            int  (*query)(void *addr_context, struct acm_msg *msg, uint64_t id);
            int  (*handle_event)(void *port_context, enum ibv_event_type type);
            void (*query_perf)(void *ep_context, uint64_t *values, uint8_t *cnt);
       };

       The size and version fields provide a way to detect version compatibility.  When a port  is  assigned  to
       the provider, the ibacm core will call the open/add_address functions;  Similarly, when a port is down or
       re-assigned to another provider, the close/remove_address functions will be invoked to release resources.
       The  ibacm  core  will  centralize the management of events for each device and events not handled by the
       ibacm core will be forwarded to the relevant port through the  handle_event()  function.   The  resolve()
       function  will  be  called  to  resolve  a  destination  name into a path record.  The performance of the
       provider for each endpoint can be queried by calling perf_query().

       To share a configuration file, the path for the ibacm configuration file is exported through the variable
       opts_file. Each loaded provider can open this configuration file and parse the contents  related  to  its
       own operation.  Non-related sections should be ignored.

       Some  helper  functions  are  also  exported  by  the ibacm core. For example, the acm_log define (or the
       acm_write() function) can be used to log messages into ibacm's  log  file  (default  /var/log/ibacm.log).
       For details, refer to the acm_prov.h file.

</pre><h4><b>NOTES</b></h4><pre>
       A  provider  should  always  set  the  version  in its provider info structure as the value of the define
       ACM_PROV_VERSION at the time the provider is implemented.  Never  set  the  version  to  ACM_PROV_VERSION
       itself as the define may be changed over time when the provider interface is changed, unless the provider
       itself  is  placed  in  ibacm  source  tree.   This is to avoid the version problem when the old provider
       implementation is built against a new acm_prov.h file.  The ibacm will always check the  version  of  the
       provider at loading time.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <a href="../man1/ib_acme.1.html">ib_acme</a>(1), <a href="../man7/ibacm.7.html">ibacm</a>(7), <a href="../man8/ibacm.8.html">ibacm</a>(8)

IBACM_PROV                                         2014-06-16                                      <u><a href="../man7/IBACM_PROV.7.html">IBACM_PROV</a></u>(7)
</pre>
 </div>
</div></section>
</div>
</body>
</html>