<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>dgit-sponsorship - tutorial for Debian upload sponsorship, using git</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/dgit">dgit_13.11_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       dgit-sponsorship - tutorial for Debian upload sponsorship, using git

</pre><h4><b>INTRODUCTION</b> <b>AND</b> <b>SCOPE</b></h4><pre>
       This tutorial describes how a Debian sponsored contributor and a sponsoring DD (or DM) can collaborate
       and publish using git.

       The sponsor must be intending to use dgit for the upload.  (If the sponsor does not use dgit, it is not
       possible to properly publish a sponsee's git branch.)

       It is best if the sponsee also uses dgit; but also covered (later on) is the case where the sponsee
       provides a proposed upload in source package form, but the sponsor would like to work in git.

       This tutorial does not provide a checklist for the sponsor's review.  Both contributors are expected to
       be familiar with Debian packaging and Debian's processes, and with git.

</pre><h4><b>SPONSEE</b> <b>WORKFLOW</b></h4><pre>
       This section is addressed to the sponsee:

   <b>General</b>
       You should prepare the package as if you were going to upload it with "dgit push-source" or "dgit
       push-built" yourself.

       For a straightforward NMU, consult <b><a href="../man7/dgit-nmu-simple.7.html">dgit-nmu-simple</a></b>(7).

       If you are the (prospective) maintainer, you can adopt any suitable (dgit-compatible) git workflow.  The
       dgit-maint-*(7) tutorials describe some of the possibilities.

   <b>Upload</b> <b>preparation</b>
       You should go through all of the steps a self-uploading maintainer would do, including building for ad
       hoc tests, and checking via a formal build (eg using "dgit sbuild") that the package builds on sid (or
       the target release).

       At the point where you would, if you were a DD, do the actual upload by running dgit push, you hand off
       to your sponsor.

       If you were going to use one of the "--quilt=" options to dgit, or "dgit --gbp" or "dgit --dpm", you must
       specify that in your handoff email - see below.

   <b>git+origs</b> <b>based</b> <b>handoff</b>
       The elements of the handoff consists of:

       •   The git branch.

       •   Any   .orig   tarballs   which   will   be   needed,  or  sample  <b><a href="../man1/git-deborig.1.html">git-deborig</a></b>(1),  <b><a href="../man1/git-archive.1.html">git-archive</a></b>(1)  or
           <b><a href="../man1/gbp-buildpackage.1.html">gbp-buildpackage</a></b>(1) command(s) to generate them.

       •   A sample dgit push-source command, containing any dgit --quilt=, --gbp or --dpm option needed

       •   Plus of course all the usual information about the state of the package, any  caveats  or  areas  you
           would like the sponsor to focus their review, constraints about upload timing, etc.

       If the handoff is done by email, the elements above should be a in a single, signed, message.  This could
       be an RFS submission against the sponsorship-requests pseudo-package.

       <u>git</u> <u>branch</u>

           The  sponsee  should  push their HEAD as a git branch to any suitable git server.  They can use their
           own git server; salsa is another possibility.

           The branch names used by the sponsee on their local machine, and on the server, do not matter.

           Instead, the sponsee should include the git commit id of their HEAD in their handover email.

       <u>orig</u> <u>tarballs</u>

           If there are any .origs that are not in the archive already, the sponsor will need them  as  part  of
           the upload.  (When using a native source package format, no origs are needed.)

           If  the  sponsee generated these tarballs with <b><a href="../man1/git-deborig.1.html">git-deborig</a></b>(1), <b><a href="../man1/git-archive.1.html">git-archive</a></b>(1) or <b><a href="../man1/gbp-buildpackage.1.html">gbp-buildpackage</a></b>(1),
           they can simply include a sample invocation of <b><a href="../man1/git-deborig.1.html">git-deborig</a></b>(1) or  <b><a href="../man1/git-archive.1.html">git-archive</a></b>(1)  or  ensure  that  a
           suitable gbp.conf is present in the source package to generate the tarball.

           Otherwise, the simplest approach is to commit the orig tarballs with <b><a href="../man1/pristine-tar.1.html">pristine-tar</a></b>(1), e.g.

               % pristine-tar commit ../foo_1.2.3.orig.tar.xz upstream/1.2.3

           and  be  sure  to  push  the  pristine-tar  branch.   If you are using <b><a href="../man1/git-buildpackage.1.html">git-buildpackage</a></b>(1), just pass
           <u>--git-pristine-tar</u> and <u>--git-pristine-tar-commit</u>.

           Alternatively, the sponsee can put them on a suitable webserver, or attach to the e-mail, if they are
           small.

           The sponsee should quote sha256sums of the .origs  in  their  handoff  email,  unless  they  supplied
           commands to generate them.

       <u>quilt</u> <u>options</u>

           Some  workflows  involve  git  branches  which  are not natively dgit-compatible.  Normally dgit will
           convert them as needed, during push.

           Supply a sample "dgit push-source" command including any "--gbp" (aka  "--quilt=gbp"),  "--dpm"  (aka
           "--quilt=dpm"), or other "--quilt=" option they need to use.  e.g.

               % dgit --gbp push-source

</pre><h4><b>SPONSOR</b> <b>WORKFLOW</b></h4><pre>
       This part is addressed to the sponsor:

   <b>Receiving</b> <b>and</b> <b>validating</b> <b>the</b> <b>sponsorship</b> <b>request</b>
       You should check the signature on the email.

       Use  "git  fetch" or "git clone" to obtain the git branch prepared by your sponsee, and obtain any .origs
       mentioned by the sponsee (to extract .origs committed with pristine-tar, you can use <b><a href="../man1/origtargz.1.html">origtargz</a></b>(1), or use
       "gbp clone --pristine-tar".)

       Check the git commit ID of the sponsee's branch tip, and  the  sha256sums  of  the  .origs,  against  the
       handoff email.

       Now you can check out the branch tip, and do your substantive review.

   <b>Dealing</b> <b>with</b> <b>branches</b> <b>that</b> <b>want</b> <b>--quilt=</b>
       If  your  sponsee  mentioned  a "--quilt" option, and you don't want to grapple with their preferred tree
       format, you can convert their tree into the standard dgit view:

           % dgit -wgf --quilt=foo --dgit-view-save=unquilted quilt-fixup
           % git checkout unquilted

       You should check that what you're looking at is a descendant of the sponsee's branch.

   <b>Some</b> <b>hints</b> <b>which</b> <b>may</b> <b>help</b> <b>the</b> <b>review</b>
       "dgit fetch sid" will get you an up-to-date "refs/remotes/dgit/dgit/sid" showing what's  in  the  archive
       already.

       "dgit -wgf --damp-run push-source" will check that dgit can build an appropriate source package.

       There  is  no  need to run debdiff.  dgit will not upload anything that doesn't unpack to exactly the git
       commit you are pushing, so you can rely on what you see in "git diff".

   <b>Doing</b> <b>the</b> <b>upload</b>
       When you have completed your source review, and use "dgit -wgf [--quilt=...] sbuild -A -C" or similar, to
       to the build, and then "dgit -wgf [--quilt=...] push-source" or "dgit -wgf [--quilt=...]  push-built"  to
       do the upload.

       Check  whether  the  sponsee  made  a  debian/<u>version</u> tag.  If they did, ensure you have their tag in the
       repository you are pushing from, or pass "--no-dep14tag".  This avoids identically  named,  non-identical
       tags, which can be confusing.

       (It  is  possible  to  upload  from  the  quilt-cache dgit view.  If you want to do this, <b>do</b> <b>not</b> pass the
       "--quilt" or "--gbp" or "--dpm" options again, and <b>do</b> pass "--no-dep14tag", since the debian/<u>version</u>  tag
       should go on the sponsee's branch.)

       If this was the first upload done with dgit, you may need to pass "--trust-changelog" to dgit.

       Alternatively,  if  this  was  the  first  ever  dgit  push  of  the  package to this suite, you can pass
       "--deliberately-not-fast-forward" instead of "--trust-changelog".  This avoids introducing a  new  origin
       commit into the dgit view of the sponsee's git history which is unnecessary and could be confusing.

</pre><h4><b>SPONSORING</b> <b>A</b> <b>NON-GIT-USING</b> <b>SPONSEE</b></h4><pre>
       This part is addressed to the sponsor:

       If your sponsee does not use git, you can still do your review with git, and use dgit for the upload.

       Your  sponsee will provide you with a source package: that is, a .dsc and the files it refers to.  Obtain
       these files, and check signatures as appropriate.  Then:

           % dgit clone PACKAGE
           % cd PACKAGE
           % dgit import-dsc /path/to/sponsee's.dsc +sponsee
           % git checkout sponsee

       Or for an entirely new package:

           % mkdir PACKAGE
           % cd PACKAGE
           % git init
           % dgit -pPACKAGE import-dsc /path/to/sponsee's.dsc +sponsee

       This will leave you looking at the sponsee's package, formatted as a dgit branch.

       When you have finished your review and your tests, you can do the dgit push-source (or  dgit  sbuild  and
       dgit push-built) directly from the "sponsee" branch.

       You  will  need  to  pass  "--trust-changelog" to dgit push for every successive upload.  This disables a
       safety catch which would normally spot situations where changes are accidentally lost.  When your sponsee
       is sending you source packages - perhaps multiple source packages with the same version  number  -  these
       safety catches are inevitably ineffective.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man1/dgit.1.html">dgit</a></b>(1), <b><a href="../man7/dgit.7.html">dgit</a></b>(7), <b><a href="../man7/dgit-nmu-simple.7.html">dgit-nmu-simple</a></b>(7), dgit-maint-*(7)

perl v5.40.1                                     Debian Project                              <u><a href="../man7/dgit-sponsorship.7.html">dgit-sponsorship</a></u>(7)
</pre>
 </div>
</div></section>
</div>
</body>
</html>