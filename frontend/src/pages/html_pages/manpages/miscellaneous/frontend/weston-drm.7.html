<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>weston-drm - the DRM backend for Weston</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/weston">weston_14.0.2-1build1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       weston-drm - the DRM backend for Weston

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>weston</b> <b>--backend=drm</b>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The  DRM  backend is the native Weston backend for systems that support the Linux kernel DRM, kernel mode
       setting (KMS), and evdev input devices.  It is the recommended backend  for  desktop  PCs,  and  aims  to
       provide  the  full  Wayland  experience with the "every frame is perfect" concept.  It also relies on the
       Mesa GBM interface.

       With the DRM backend, <b>weston</b> runs without any underlying windowing system. The backend uses the Linux KMS
       API  to  detect  connected  monitors.  Monitor  hot-plugging  is  supported.  Input  devices  are   found
       automatically  by  <b><a href="../man7/udev.7.html">udev</a></b>(7).   Compositing  happens mainly in GL ES 2, initialized through EGL. It is also
       possible to take advantage of hardware cursors and overlays, when they exist and  are  functional.  Full-
       screen  surfaces  will  be scanned out directly without compositing, when possible.  Hardware accelerated
       clients are supported via EGL.

       The backend chooses the DRM graphics device first based on seat id.  If seat identifiers are not set,  it
       looks  for  the graphics device that was used in boot. If that is not found, it finally chooses the first
       DRM device returned by <b><a href="../man7/udev.7.html">udev</a></b>(7).  Combining multiple graphics devices is not supported yet.

       The DRM backend also supports virtual outputs that are transmitted over an RTP session  as  a  series  of
       JPEG images (RTP payload type 26) to a remote client. Virtual outputs are configured in the <b>remote-output</b>
       section of <b>weston.ini.</b>

</pre><h4><b>CONFIGURATION</b></h4><pre>
       The DRM backend uses the following entries from <b>weston.ini</b>.

   <b>Section</b> <b>core</b>
       <b>gbm-format</b>=<u>format</u>
              Sets  the  default  pixel  format  for DRM KMS framebuffers.  <u>Format</u> can be <b>xrgb8888</b>, <b>xrgb2101010</b>,
              <b>rgb565</b> or others. Weston recognizes the names of most pixel formats  defined  by  the  kernel  DRM
              subsystem  in  <b>drm_fourcc.h</b>  header  without the DRM_FORMAT_ prefix.  The actually supported pixel
              formats depend on the DRM driver and hardware, and the renderer used. Using Pixman-renderer,  DRM-
              backend  supports  <b>xrgb8888</b>,  <b>xrgb2101010</b>,  <b>rgb565</b>  and  some  of their permutations.  The formats
              supported with GL-renderer depend on the EGL and OpenGL ES 2 or 3 implementations. The  names  are
              case-insensitive.   This   setting  applies  only  to  outputs  in  SDR  mode,  see  <b>eotf-mode</b>  in
              <b><a href="../man5/weston.ini.5.html">weston.ini</a></b>(5).  If the hardware platform supports hardware planes placed  under  the  DRM  primary
              plane  type  (underlays), specifying <b>argb8888</b> would be needed for Weston to display content lifted
              into such hardware planes.  If not specified, <b>xrgb8888</b> is used.  See  also  <b>gbm-format</b>  in  <b>output</b>
              section.

       <b>pageflip-timeout</b>=<u>milliseconds</u>
              sets  Weston's  pageflip timeout in milliseconds.  This sets a timer to exit gracefully with a log
              message and an exit code of 1 in case the DRM driver is non-responsive.  Setting it to 0  disables
              this feature.

   <b>Section</b> <b>output</b>
       <b>name</b>=<u>connector</u>
              The KMS connector name identifying the output, for instance <u>LVDS1</u>.

       <b>mode</b>=<u>mode</u>
              Specify  the  video mode for the output. The argument <u>mode</u> can be one of the words <b>off</b> to turn the
              output off, <b>preferred</b> to use the monitor's preferred video mode, or <b>current</b>  to  use  the  current
              video mode and avoid a mode switch.  It can also be a resolution as:

       <b>mode</b>=<u>width</u><b>x</b><u>height</u>

       <b>mode</b>=<u>width</u><b>x</b><u>height</u><b>@</b><u>refresh_rate</u>
              Specify a mode with a given refresh-rate measured in Hz.

       <b>mode</b>=<u>width</u><b>x</b><u>height</u><b>@</b><u>refresh_rate</u> <u>ratio</u>
              Here  <u>ratio</u>  is  Picture Aspect-Ratio which can have values as 4:3, 16:9, 64:27, and 256:135. This
              resolution-format helps to select a CEA mode, if such a video mode is present in the mode-list  of
              the output.

              CEA  defines  the  timing of a video mode, which is considered as a standard for HDMI spcification
              and compliance testing. It defines each and  every  parameter  of  a  video  mode,  like  hactive,
              vactive,  vfront,  vback  etc.,  including aspect-ratio information. For CEA modes, the drm layer,
              stores this aspect-ratio information in user-mode (drmModeModeInfo) flag bits 19-22. For the  non-
              CEA modes a value of 0 is stored in the aspect-ratio flag bits.

              Each  CEA-mode  is identified by a unique, Video Identification Code (VIC).  For example, VIC=4 is
              1280x720@60 aspect-ratio 16:9. This mode will be different than a non-CEA  mode  1280x720@60  0:0.
              When  the  video  mode 1280x720@60 0:0 is applied, since its timing doesn't exactly match with the
              CEA information for VIC=4, it would be treated as a non-CEA mode. Also, while  setting  the  HDMI-
              AVI-Inforframe, VIC parameter will be given as '0'. If video mode 1280x720@60 16:9 is applied, its
              CEA timimgs matches with that of video mode with VIC=4, so the VIC parameter in HDMI-AVI-Infoframe
              will be set to 4.

              Many  a  times,  an  output may have both CEA and non-CEA modes, which are similar in all resepct,
              differing only in the aspect-ratio. A user can select a CEA mode by giving the aspect-ratio, along
              with the other arguments for the mode.  By omitting the aspect-ratio, user can specify the non-CEA
              modes.  This helps when certification testing is done,  in  tests  like  7-27,  the  HDMI-analyzer
              applies  a  particular  CEA  mode,  and  expects the applied mode to be with exactly same timings,
              including the aspect-ratio and VIC field.

              The resolution can also be a detailed mode line as below.

       <b>mode</b>=<u>dotclock</u> <u>hdisp</u> <u>hsyncstart</u> <u>hsyncend</u> <u>htotal</u> <u>vdisp</u> <u>vsyncstart</u> <u>vsyncend</u> <u>vtotal</u> <u>hflag</u> <u>vflag</u>
              Use the given detailed mode line as the video mode for this output.  The definition is the same as
              in <b><a href="../man5/xorg.conf.5.html">xorg.conf</a></b>(5), and <b><a href="../man1/cvt.1.html">cvt</a></b>(1) can generate detailed mode lines.

       <b>transform</b>=<u>transform</u>
              Transform for the output, which can be rotated in 90-degree steps and possibly  flipped.  Possible
              values  are  <b>normal</b>,  <b>rotate-90</b>,  <b>rotate-180</b>,  <b>rotate-270</b>,  <b>flipped</b>,  <b>flipped-rotate-90</b>,  <b>flipped-</b>
              <b>rotate-180</b>, and <b>flipped-rotate-270</b>.

       <b>gbm-format</b>=<u>format</u>
              Set the DRM KMS framebuffer format for this specific output. If not set, the value from <b>gbm-format</b>
              option in <b>core</b> section is used for SDR mode outputs and <b>xrgb2101010</b>  for  other  modes.   For  the
              possible  values for <u>format</u> see <b>gbm-format</b> option in <b>core</b> section.  For SDR mode, see <b>eotf-mode</b> in
              <b><a href="../man7/weston.ini.7.html">weston.ini</a></b>(7).

       <b>pixman-shadow</b>=<u>boolean</u>
              If using the Pixman-renderer, use shadow framebuffers. Defaults to <b>true</b>.

       <b>clone-of</b>=<u>name</u>
              Make this output (connector) a clone of another. The argument <u>name</u> is the <b>name</b>  value  of  another
              output  section.  The referred to output section must exist. When this key is present in an output
              section, all other keys have no effect on the configuration.

       <b>force-on</b>=<u>true</u>
              Force the output to be enabled even if the connector is disconnected.   Defaults  to  false.  Note
              that  <b>mode=off</b>  will  override  <b>force-on=true</b>.  When a connector is disconnected, there is no EDID
              information to provide a list of video modes.  Therefore  a  forced  output  should  also  have  a
              detailed mode line specified.

       <b>max-bpc</b>=<u>N</u>
              Set  "<b>max</b>  <b>bpc</b>"  KMS property to value <u>N</u>, silently clamped to the hardware driver supported range.
              This artificially limits the driver chosen link bits-per-channel which may be useful  for  working
              around sink hardware (e.g. monitor) limitations. The default is 16 which is practically unlimited.
              If  you need to work around hardware issues, try a lower value like 8. A value of 0 means that the
              current max bpc will be reprogrammed.

   <b>Section</b> <b>remote-output</b>
       <b>name</b>=<u>name</u>
              Specify unique name for the output.

       <b>mode</b>=<u>mode</u>
              Specify the video mode for the output. The argument <u>mode</u> is a resolution setting, such as:

       <b>mode</b>=<u>widthxheight</u>

       <b>mode</b>=<u>widthxheight@refresh_rate</u>
              If refresh_rate is not specified it will default to a 60Hz.

       <b>host</b>=<u>host</u>
              Specify the host name or IP Address that the remote output will be transmitted to.

       <b>port</b>=<u>port</u>
              Specify the port number to transmit the remote output to. Usable port range is 1-65533.

       <b>gst-pipeline</b>=<u>pipeline</u>
              Specify the gstreamer pipeline. It is necessary that source is appsrc, its name is "src", and sink
              name is "sink" in <u>pipeline</u>.  Ignore port and host configuration if the gst-pipeline is specified.

</pre><h4><b>OPTIONS</b></h4><pre>
       When the DRM backend is loaded, <b>weston</b> will understand the following additional command line options.

       <b>--current-mode</b>
              By default, use the current video mode of  all  outputs,  instead  of  switching  to  the  monitor
              preferred mode.

       <b>--drm-device</b>=<u>cardN</u>
              Use  the DRM device <u>cardN</u> for rendering and output instead of the default heuristics based on seat
              assignments and boot VGA status. For example, use <b>card0</b>.

       <b>--additional-devices</b>=<u>cardN</u>
              Comma separated list of secondary DRM devices <u>cardM,cardN</u> that will only be used as  outputs,  but
              not for rendering. For example, use <b>card1,card2</b>.

       <b>--seat</b>=<u>seatid</u>
              Use  graphics  and  input  devices  designated  for seat <u>seatid</u> instead of the seat defined in the
              environment variable <b>XDG_SEAT</b>. If neither is specified, seat0 will be assumed.

       <b>--continue-without-input</b>
              Allow Weston to start without input devices. Used for testing purposes.

</pre><h4><b>ENVIRONMENT</b></h4><pre>
       <b>WESTON_LIBINPUT_LOG_PRIORITY</b>
              The minimum libinput verbosity level to be printed to Weston's log.  Valid values are <b>debug</b>, <b>info</b>,
              and <b>error</b>. Default is <b>info</b>.

       <b>XDG_SEAT</b>
              The seat Weston will start on, unless overridden on the command line.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man1/weston.1.html">weston</a></b>(1)

Weston 14.0.2                                      2012-11-27                                      <u><a href="../man7/WESTON-DRM.7.html">WESTON-DRM</a></u>(7)
</pre>
 </div>
</div></section>
</div>
</body>
</html>