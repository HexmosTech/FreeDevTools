<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ctags-optlib - Universal Ctags parser definition language</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/universal-ctags">universal-ctags_5.9.20210829.0-2build1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       ctags-optlib - Universal Ctags parser definition language

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>ctags</b> [options] [file(s)]
       <b>etags</b> [options] [file(s)]

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <u>Exuberant</u>  <u>Ctags</u>,  the  ancestor  of  <u>Universal</u>  <u>Ctags</u>,  has provided the way to define a new parser from
       command line.  Universal Ctags extends and refines this feature. <u>optlib</u>  <u>parser</u>  is  the  name  for  such
       parser  in  Universal  Ctags. "opt" intends a parser is defined with combination of command line options.
       "lib" intends an optlib parser can be more than ad-hoc personal configuration.

       This man page is for people who want to define an optlib parser. The  readers  should  read  <a href="../man1/ctags.1.html">ctags</a>(1)  of
       Universal Ctags first.

       Following options are for defining (or customizing) a parser:

       • <b>--langdef=&lt;name&gt;</b>

       • <b>--map-&lt;LANG&gt;=[+|-]&lt;extension&gt;|&lt;pattern&gt;</b>

       • <b>--kinddef-&lt;LANG&gt;=&lt;letter&gt;,&lt;name&gt;,&lt;description&gt;</b>

       • <b>--regex-&lt;LANG&gt;=/&lt;line_pattern&gt;/&lt;name_pattern&gt;/&lt;kind-spec&gt;/[&lt;flags&gt;]</b>

       • <b>--mline-regex-&lt;LANG&gt;=/&lt;line_pattern&gt;/&lt;name_pattern&gt;/&lt;kind-spec&gt;/[&lt;flags&gt;]</b>

       Following options are for controlling loading parser definition:

       • <b>--options=&lt;pathname&gt;</b>

       • <b>--options-maybe=&lt;pathname&gt;</b>

       • <b>--optlib-dir=[+]&lt;directory&gt;</b>

       The  design  of  options and notations for defining a parser in Exuberant Ctags may focus on reducing the
       number of typing by user.  Reducing the number of typing is important for users who want  to  define  (or
       customize) a parser quickly.

       On  the  other  hand, the design in Universal Ctags focuses on maintainability. The notation of Universal
       Ctags is redundant than that of Exuberant Ctags; the newly introduced kind should be declared explicitly,
       (long) names are approved than one-letter flags specifying kinds, and naming rules are stricter.

       This man page explains only stable options and  flags.   Universal  Ctags  also  introduces  experimental
       options  and  flags which have names starting with <b>_</b>. For documentation on these options and flags, visit
       Universal Ctags web site at  &lt;https://ctags.io/&gt; .

   <b>Storing</b> <b>a</b> <b>parser</b> <b>definition</b> <b>to</b> <b>a</b> <b>file</b>
       Though it is possible to define a parser from command line, you don't want to type the same command  line
       each time when you need the parser.  You can store options for defining a parser into a file.

       ctags  loads  files (preload files) listed in "FILES" section of <a href="../man1/ctags.1.html">ctags</a>(1) at program starting up. You can
       put your parser definition needed usually to the files.

       <b>--options=&lt;pathname&gt;</b>, <b>--options-maybe=&lt;pathname&gt;</b>, and <b>--optlib-dir=[+]&lt;directory&gt;</b> are for loading  optlib
       files you need occasionally. See "Option File Options" section of <a href="../man1/ctags.1.html">ctags</a>(1) for these options.

       As  explained  in  "FILES"  section  of <a href="../man1/ctags.1.html">ctags</a>(1), options for defining a parser listed line by line in an
       optlib file. Prefixed white spaces are ignored. A line  starting  with  '#'  is  treated  as  a  comment.
       Escaping shell meta character is not needed.

       Use <b>.ctags</b> as file extension for optlib file. You can define multiple parsers in an optlib file but it is
       better to make a file for each parser definition.

       <b>--_echo=&lt;msg&gt;</b> and <b>--_force-quit=&lt;num&gt;</b> options are for debugging optlib parser.

   <b>Overview</b> <b>for</b> <b>defining</b> <b>a</b> <b>parser</b>
       1. Design the parser

          You  need  know  both  the target language and the ctags' concepts (definition, reference, kind, role,
          field, extra). About the concepts, <a href="../man1/ctags.1.html">ctags</a>(1) of Universal Ctags may help you.

       2. Give a name to the parser

          Use <b>--langdef=&lt;name&gt;</b> option. <u>&lt;name&gt;</u> is referred as <u>&lt;LANG&gt;</u> in the later steps.

       3. Give a file pattern or file extension for activating the parser

          Use <b>--map-&lt;LANG&gt;=[+|-]&lt;extension&gt;|&lt;pattern&gt;</b>.

       4. Define kinds

          Use <b>--kinddef-&lt;LANG&gt;=&lt;letter&gt;,&lt;name&gt;,&lt;description&gt;</b> option.  Universal Ctags  introduces  this  option.
          Exuberant  Ctags  doesn't  have.  In Exuberant Ctags, a kind is defined as a side effect of specifying
          <b>--regex-&lt;LANG&gt;=</b> option. So user doesn't have a chance to recognize how  important  the  definition  of
          kind.

       5. Define patterns

          Use   <b>--regex-&lt;LANG&gt;=/&lt;line_pattern&gt;/&lt;name_pattern&gt;/&lt;kind-spec&gt;/[&lt;flags&gt;]</b>  option  for  a  single-line
          regular              expression.              You              can              also               use
          <b>--mline-regex-&lt;LANG&gt;=/&lt;line_pattern&gt;/&lt;name_pattern&gt;/&lt;kind-spec&gt;/[&lt;flags&gt;]</b>   option  for  a  multi-line
          regular expression.

          As     <u>&lt;kind-spec&gt;</u>,     you     can      use      the      one-letter      flag      defined      with
          <b>--kinddef-&lt;LANG&gt;=&lt;letter&gt;,&lt;name&gt;,&lt;description&gt;</b> option.

</pre><h4><b>OPTIONS</b></h4><pre>
       <b>--langdef=&lt;name&gt;</b>
              Defines  a new user-defined language, <u>&lt;name&gt;</u>, to be parsed with regular expressions. Once defined,
              <u>&lt;name&gt;</u> may be used in other options taking language names.

              <u>&lt;name&gt;</u> must consist  of  alphanumeric  characters,  '<b>#</b>',  or  '<b>+</b>'  ('[a-zA-Z0-9#+]+').  The  graph
              characters  other  than  '<b>#</b>'  and  '<b>+</b>'  are  disallowed  (or reserved). Some of them (<b>[-=:{.]</b>) are
              disallowed because they can make the command line parser of ctags confused. The rest of  them  are
              just reserved for future extending ctags.

              <b>all</b>  is an exception.  <b>all</b> as <u>&lt;name&gt;</u> is not acceptable. It is a reserved word. See the description
              of <b>--kinds-(&lt;LANG&gt;|all)=[+|-](&lt;kinds&gt;|*)</b> option in <a href="../man1/ctags.1.html">ctags</a>(1) about how the reserved word is used.

              The names of built-in parsers are capitalized. When ctags evaluates an option in a  command  line,
              and chooses a parser, ctags uses the names of parsers in a case-insensitive way. Therefore, giving
              a  name  started from a lowercase character doesn't help you to avoid the parser name confliction.
              However, in a tags file, ctags prints parser names in a case-sensitive way;  it  prints  a  parser
              name  as specified in <b>--langdef=&lt;name&gt;</b> option.  Therefore, we recommend you to give a name started
              from a lowercase character to your private optlib parser. With this convention,  people  can  know
              where a tag entry in a tag file comes from a built-in parser or a private optlib parser.

       <b>--kinddef-&lt;LANG&gt;=&lt;letter&gt;,&lt;name&gt;,&lt;description&gt;</b>
              Define a kind for <u>&lt;LANG&gt;</u>.  Be not confused this with <b>--kinds-&lt;LANG&gt;</b>.

              <u>&lt;letter&gt;</u>  must  be an alphabetical character ('[a-zA-EG-Z]') other than "F". "F" has been reserved
              for representing a file since Exuberant Ctags.

              <u>&lt;name&gt;</u>  must  start  with  an  alphabetic  character,  and  the   rest   must    be   alphanumeric
              ('[a-zA-Z][a-zA-Z0-9]*').  Do  not  use  "file" as <u>&lt;name&gt;</u>. It has been reserved for representing a
              file since Exuberant Ctags.

              Note that using a number character in a <u>&lt;name&gt;</u> violates the version 2 of tags file  format  though
              ctags accepts it. For more detail, see <a href="../man5/tags.5.html">tags</a>(5).

              <u>&lt;description&gt;</u>  comes  from any printable ASCII characters. The exception is <b>{</b> and <b>\</b>. <b>{</b> is reserved
              for adding flags this option in the future. So put <b>\</b> before <b>{</b> to include <b>{</b> to  a  description.  To
              include <b>\</b> itself to a description, put <b>\</b> before <b>\</b>.

              Both <u>&lt;letter&gt;</u>, <u>&lt;name&gt;</u> and their combination must be unique in a <u>&lt;LANG&gt;</u>.

              This  option  is  newly  introduced in Universal Ctags.  This option reduces the typing defining a
              regex pattern with <b>--regex-&lt;LANG&gt;=</b>, and keeps the consistency of kind definitions in a language.

              The <u>&lt;letter&gt;</u> can be used as an argument for <b>--kinds-&lt;LANG&gt;</b> option to enable or disable  the  kind.
              Unless  <b>K</b>  field  is  enabled, the <u>&lt;letter&gt;</u> is used as value in the "kind" extension field in tags
              output.

              The <u>&lt;name&gt;</u> surrounded by braces can be used as an argument for <b>--kind-&lt;LANG&gt;</b> option. If <b>K</b> field is
              enabled, the <u>&lt;name&gt;</u> is used as value in the "kind" extension field in tags output.

              The <u>&lt;description&gt;</u> and <u>&lt;letter&gt;</u> are listed in  <b>--list-kinds</b>  output.  All  three  elements  of  the
              kind-spec are listed in <b>--list-kinds-full</b> output. Don't use braces in the <u>&lt;description&gt;</u>. They will
              be used meta characters in the future.

       <b>--regex-&lt;LANG&gt;=/&lt;line_pattern&gt;/&lt;name_pattern&gt;/&lt;kind-spec&gt;/[&lt;flags&gt;]</b>
              Define a single-line regular expression.

              The <u>/&lt;line_pattern&gt;/&lt;name_pattern&gt;/</u> pair defines a regular expression replacement pattern, similar
              in  style  to  <b>sed</b>  substitution commands, <b>s/regexp/replacement/</b>, with which to generate tags from
              source files mapped to the  named  language,  <u>&lt;LANG&gt;</u>,  (case-insensitive;  either  a  built-in  or
              user-defined language).

              The  regular expression, <u>&lt;line_pattern&gt;</u>, defines an extended regular expression (roughly that used
              by <a href="../man1/egrep.1.html">egrep</a>(1)), which is used to locate a single source line containing a tag and  may  specify  tab
              characters using <b>\t</b>.

              When  a  matching  line  is found, a tag will be generated for the name defined by <u>&lt;name_pattern&gt;</u>,
              which generally will contain the special back-references  <b>\1</b>  through  <b>\9</b>  to  refer  to  matching
              sub-expression groups within <u>&lt;line_pattern&gt;</u>.

              The  '<b>/</b>' separator characters shown in the parameter to the option can actually be replaced by any
              character. Note that whichever separator character  is  used  will  have  to  be  escaped  with  a
              backslash  ('<b>\</b>')  character  wherever  it  is  used  in  the  parameter  as something other than a
              separator. The regular expression defined by this option is added to the current list  of  regular
              expressions  for the specified language unless the parameter is omitted, in which case the current
              list is cleared.

              Unless modified by <u>&lt;flags&gt;</u>, <u>&lt;line_pattern&gt;</u> is interpreted as a POSIX extended regular  expression.
              The  <u>&lt;name_pattern&gt;</u> should expand for all matching lines to a non-empty string of characters, or a
              warning message will be reported unless <b>{placeholder}</b> regex flag is specified.

              A kind specifier (<u>&lt;kind-spec&gt;</u>) for tags matching regexp  may  follow  <u>&lt;name_pattern&gt;</u>,  which  will
              determine what kind of tag is reported in the <b>kind</b> extension field (see <a href="../man5/tags.5.html">tags</a>(5)).

              <u>&lt;kind-spec&gt;</u> has two forms: <u>one-letter</u> <u>form</u> and <u>full</u> <u>form</u>.

              The      one-letter  form  in  the  form  of <b>&lt;letter&gt;</b>. It just refers a kind <u>&lt;letter&gt;</u> defined with
              <b>--kinddef-&lt;LANG&gt;</b>. This form is recommended in Universal Ctags.

              The full form of <u>&lt;kind-spec&gt;</u> is in the form of <b>&lt;letter&gt;,&lt;name&gt;,&lt;description&gt;</b>.      Either the kind
              <u>&lt;name&gt;</u>   and/or   the    <u>&lt;description&gt;</u>    can    be    omitted.    See    the    description    of
              <b>--kinddef-&lt;LANG&gt;=&lt;letter&gt;,&lt;name&gt;,&lt;description&gt;</b> option about the elements.

              The  full form is supported only for keeping the compatibility with Exuberant Ctags which does not
              have <b>--kinddef-&lt;LANG&gt;</b> option. Supporting the form will be removed  from  Universal  Ctags  in  the
              future.

              About <u>&lt;flags&gt;</u>, see "FLAGS FOR <b>--regex-&lt;LANG&gt;</b> OPTION".

              For more information on the regular expressions used by ctags, see either the regex(5,7) man page,
              or the GNU info documentation for regex (e.g. "<b>info</b> <b>regex</b>").

       <b>--list-regex-flags</b>
              Lists the flags that can be used in <b>--regex-&lt;LANG&gt;</b> option.

       <b>--list-mline-regex-flags</b>
              Lists the flags that can be used in <b>--mline-regex-&lt;LANG&gt;</b> option.

       <b>--mline-regex-&lt;LANG&gt;=/&lt;line_pattern&gt;/&lt;name_pattern&gt;/&lt;kind-spec&gt;/[&lt;flags&gt;]</b>
              Define a multi-line regular expression.

              This  option is similar to <b>--regex-&lt;LANG&gt;</b> option except the pattern is applied to the whole file’s
              contents, not line by line.

       <b>--_echo=&lt;message&gt;</b>
              Print <u>&lt;message&gt;</u> to the standard error stream.  This is helpful to understand  (and  debug)  optlib
              loading feature of Universal Ctags.

       <b>--_force-quit[=&lt;num&gt;]</b>
              Exits  immediately when this option is processed.  If <u>&lt;num&gt;</u> is used as exit status. The default is
              0.  This is helpful to debug optlib loading feature of Universal Ctags.

   <b>FLAGS</b> <b>FOR</b> <b>--regex-&lt;LANG&gt;</b> <b>OPTION</b>
       You can specify more than one flag, <b>&lt;letter&gt;|{&lt;name&gt;}</b>, at  the  end  of  <b>--regex-&lt;LANG&gt;</b>  to  control  how
       Universal Ctags uses the pattern.

       Exuberant  Ctags  uses  a <u>&lt;letter&gt;</u> to represent a flag. In Universal Ctags, a <u>&lt;name&gt;</u> surrounded by braces
       (name form) can be used in addition to <u>&lt;letter&gt;</u>. The name form  makes  a  user  reading  an  optlib  file
       easier.

       The  most  of  all  flags newly added in Universal Ctags don't have the one-letter representation. All of
       them have only the name representation. <b>--list-regex-flags</b> lists all the flags.

       <b>basic</b> <b>(one-letter</b> <b>form</b> <b>b)</b>
              The pattern is interpreted as a POSIX basic regular expression.

       <b>exclusive</b> <b>(one-letter</b> <b>form</b> <b>x)</b>
              Skip testing the other patterns if a line is matched to this pattern.  This  is  useful  to  avoid
              using CPU to parse line comments.

       <b>extend</b> <b>(one-letter</b> <b>form</b> <b>e)</b>
              The pattern is interpreted as a POSIX extended regular expression (default).

       <b>icase</b> <b>(one-letter</b> <b>form</b> <b>i)</b>
              The regular expression is to be applied in a case-insensitive manner.

       <b>placeholder</b>
              Don't  emit a tag captured with a regex pattern.  The replacement can be an empty string.  See the
              following description of <b>scope=...</b> flag about how this is useful.

       <b>scope=(ref|push|pop|clear|set)</b>
          Specify what to do with the internal scope stack.

          A parser programmed with <b>--regex-&lt;LANG&gt;</b> has a stack (scope stack)  internally.  You  can  use  it  for
          tracking scope information. The <b>scope=...</b> flag is for manipulating and utilizing the scope stack.

          If  <b>{scope=push}</b> is specified, a tag captured with <b>--regex-&lt;LANG&gt;</b> is pushed to the stack. <b>{scope=push}</b>
          implies <b>{scope=ref}</b>.

          You can fill the scope field of captured tag with <b>{scope=ref}</b>. If <b>{scope=ref}</b>  flag  is  given,  ctags
          attaches the tag at the top to the tag captured with <b>--regex-&lt;LANG&gt;</b> as the value for the <b>scope:</b> field.

          ctags  pops  the  tag  at  the top of the stack when <b>--regex-&lt;LANG&gt;</b> with <b>{scope=pop}</b> is matched to the
          input line.

          Specifying <b>{scope=clear}</b> removes all the tags in the scope.  Specifying <b>{scope=set}</b>  removes  all  the
          tags in the scope, and then pushes the captured tag as <b>{scope=push}</b> does.

          In  some  cases,  you  may  want  to  use  <b>--regex-&lt;LANG&gt;</b>  only for its side effects: using it only to
          manipulate the stack but not for capturing a tag. In such a case,  make  <u>&lt;name_pattern&gt;</u>  component  of
          <b>--regex-&lt;LANG&gt;</b>  option  empty while specifying <b>{placeholder}</b> as a regex flag. For example, a non-named
          tag can be put on the stack by giving a regex flag "<b>{scope=push}{placeholder}</b>".

          You may wonder what happens if a regex pattern with <b>{scope=ref}</b> flag matches an  input  line  but  the
          stack is empty, or a non-named tag is at the top. If the regex pattern contains a <b>{scope=ref}</b> flag and
          the stack is empty, the <b>{scope=ref}</b> flag is ignored and nothing is attached to the <b>scope:</b> field.

          If  the  top  of  the  stack contains an unnamed tag, ctags searches deeper into the stack to find the
          top-most named tag. If it reaches the bottom of the stack without finding a named tag, the <b>{scope=ref}</b>
          flag is ignored and nothing is attached to the <b>scope:</b> field.

          When a named tag on the stack is popped or cleared as the side effect of  a  pattern  matching,  ctags
          attaches the line number of the match to the <b>end:</b> field of the named tag.

          ctags  clears  all of the tags on the stack when it reaches the end of the input source file. The line
          number of the end is attached to the <b>end:</b> field of the cleared tags.

       <b>warning=&lt;message&gt;</b>
              print the given <u>&lt;message&gt;</u> at WARNING level

       <b>fatal=&lt;message&gt;</b>
              print the given <u>&lt;message&gt;</u> and exit

</pre><h4><b>EXAMPLES</b></h4><pre>
   <b>Perl</b> <b>Pod</b>
       This    is    the    definition    (pod.ctags)    used     in     ctags     for     parsing     Pod     (
       &lt;https://perldoc.perl.org/perlpod.html&gt; ) file.

          --langdef=pod
          --map-pod=+.pod

          --kinddef-pod=c,chapter,chapters
          --kinddef-pod=s,section,sections
          --kinddef-pod=S,subsection,subsections
          --kinddef-pod=t,subsubsection,subsubsections

          --regex-pod=/^=head1[ \t]+(.+)/\1/c/
          --regex-pod=/^=head2[ \t]+(.+)/\1/s/
          --regex-pod=/^=head3[ \t]+(.+)/\1/S/
          --regex-pod=/^=head4[ \t]+(.+)/\1/t/

   <b>Using</b> <b>scope</b> <b>regex</b> <b>flags</b>
       Let's think about writing a parser for a very small subset of the Ruby language.

       input source file (<b>input.srb</b>):

          class Example
            def methodA
                  puts "in class_method"
            end
            def methodB
                  puts "in class_method"
            end
          end

       The  parser  for the input should capture <b>Example</b> with <b>class</b> kind, <b>methodA</b>, and <b>methodB</b> with <b>method</b> kind.
       <b>methodA</b> and <b>methodB</b> should have <b>Example</b> as their scope. <b>end:</b>  fields  of  each  tag  should  have  proper
       values.

       optlib file (<b>sub-ruby.ctags</b>):

          --langdef=subRuby
          --map-subRuby=.srb
          --kinddef-subRuby=c,class,classes
          --kinddef-subRuby=m,method,methods
          --regex-subRuby=/^class[ \t]+([a-zA-Z][a-zA-Z0-9]+)/\1/c/{scope=push}
          --regex-subRuby=/^end///{scope=pop}{placeholder}
          --regex-subRuby=/^[ \t]+def[ \t]+([a-zA-Z][a-zA-Z0-9_]+)/\1/m/{scope=push}
          --regex-subRuby=/^[ \t]+end///{scope=pop}{placeholder}

       command line and output:

          $ ctags --quiet --fields=+eK \
          --options=./sub-ruby.ctags -o - input.srb
          Example input.srb       /^class Example$/;"     class   end:8
          methodA input.srb       /^  def methodA$/;"     method  class:Example   end:4
          methodB input.srb       /^  def methodB$/;"     method  class:Example   end:7

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       The official Universal Ctags web site at:

        &lt;https://ctags.io/&gt;

       <a href="../man1/ctags.1.html">ctags</a>(1), <a href="../man5/tags.5.html">tags</a>(5), <a href="../man3/regex.3.html">regex</a>(3), <a href="../man7/regex.7.html">regex</a>(7), <a href="../man1/egrep.1.html">egrep</a>(1)

</pre><h4><b>AUTHOR</b></h4><pre>
       Universal Ctags project
        &lt;https://ctags.io/&gt; (This man page partially derived from <a href="../man1/ctags.1.html">ctags</a>(1) of Executable-ctags)

       Darren Hiebert &lt; &lt;<a href="mailto:dhiebert@users.sourceforge.net">dhiebert@users.sourceforge.net</a>&gt; &gt;
        &lt;<a href="http://DarrenHiebert.com/">http://DarrenHiebert.com/</a>&gt;

5.9.0                                                                                            <u><a href="../man7/CTAGS-OPTLIB.7.html">CTAGS-OPTLIB</a></u>(7)
</pre>
 </div>
</div></section>
</div>
</body>
</html>