<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>fors_normalise_flat - Normalise master flat spectrum</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/noble/+package/cpl-plugin-fors-doc">cpl-plugin-fors-doc_5.5.7+dfsg-2build1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       fors_normalise_flat - Normalise master flat spectrum

</pre><h4><b>SYNOPSIS</b></h4><pre>
       esorex <b>fors_normalise_flat</b> [OPTIONS] FILE.sof

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This  recipe  is  used to normalise a master flat field frame dividing it by its large scale illumination
       trend. This recipe can be applied both to generic multi-slit (MOS/MXU) and to long slit exposures (either
       LSS, or LSS-like MOS/MXU), even if different normalisation methods are applied in such  different  cases.
       The  input  master  flat field image is the product of the recipe fors_flat. The input spectral curvature
       table, product of the recipe fors_detect_spectra, is only required in the case of multi-slit data.

       In the case of multi-slit data, the flat field spectra are spatially  rectified,  heavily  smoothed,  and
       then  mapped  back  on  the  CCD.  Then the master flat image is divided by its smoothed counterpart. The
       smoothing may be obtained either by applying a running median filter of specified sizes, or by polynomial
       fitting along the dispersion direction performed independently for each row  of  the  spatially  remapped
       spectra.

       In  the  case  of long-slit data, the smoothing can still be obtained either by applying a running median
       filter or by polynomial fitting,  but  the  polynomial  fitting  will  be  performed  along  the  spatial
       direction, for each column of the spectrum.

       In the table below the MXU acronym can be alternatively read as MOS or LSS.

       Input files:

         DO category:               Type:       Explanation:         Required:
         MASTER_SCREEN_FLAT_MXU     Calib       Master flat frame       Y
         DISP_COEFF_MXU             Calib       Wavelength calibration  Y
         CURV_COEFF_MXU             Calib       Spectral curvature      .

         SLIT_LOCATION_MXU          Calib       Slit detection          .

         GRISM_TABLE                Calib       Grism table             Y

       Output files:

         DO category:               Data type:  Explanation:
         MASTER_NORM_FLAT_MXU       FITS image  Normalised flat field

</pre><h4><b>OPTIONS</b></h4><pre>
       <b>--dispersion</b> <u>&lt;float&gt;</u>
              Expected  spectral dispersion (Angstrom/pixel) (float; default: 0.0). The full name of this option
              for the EsoRex configuration file is <b>fors.fors_normalise_flat.dispersion</b> [default = <u>0.0</u>].

       <b>--startwavelength</b> <u>&lt;float&gt;</u>
              Start wavelength in spectral extraction (float; default: 0.0). The full name of  this  option  for
              the EsoRex configuration file is <b>fors.fors_normalise_flat.startwavelength</b> [default = <u>0.0</u>].

       <b>--endwavelength</b> <u>&lt;float&gt;</u>
              End  wavelength in spectral extraction (float; default: 0.0). The full name of this option for the
              EsoRex configuration file is <b>fors.fors_normalise_flat.endwavelength</b> [default = <u>0.0</u>].

       <b>--spa_polydegree</b> <u>&lt;int&gt;</u>
              Polynomial degree for the flat field fitting along spatial direction (int; default: -1). The  full
              name  of  this option for the EsoRex configuration file is <b>fors.fors_normalise_flat.spa_polydegree</b>
              [default = <u>-1</u>].

       <b>--sradius</b> <u>&lt;int&gt;</u>
              Smooth box radius for flat field along spatial direction (int; default: 10). The full name of this
              option for the EsoRex configuration file is <b>fors.fors_normalise_flat.sradius</b> [default = <u>10</u>].

       <b>--disp_nknots</b> <u>&lt;int&gt;</u>
              Number of knots in flat field fitting splines along dispersion direction (int; default:  -1).  The
              full name of this option for the EsoRex configuration file is <b>fors.fors_normalise_flat.disp_nknots</b>
              [default = <u>-1</u>].

       <b>--dradius</b> <u>&lt;int&gt;</u>
              Smooth  box radius (median) for flat field along dispersion direction (int; default: 10). The full
              name of this option for the EsoRex configuration file is <b>fors.fors_normalise_flat.dradius</b> [default
              = <u>10</u>].

       <b>--dradius_aver</b> <u>&lt;int&gt;</u>
              Smooth box radius (average) for flat field along  dispersion  direction  (performed  after  median
              smoothing)  (int;  default: 10). The full name of this option for the EsoRex configuration file is
              <b>fors.fors_normalise_flat.dradius_aver</b> [default = <u>10</u>].

       <b>--splfit_threshold</b> <u>&lt;float&gt;</u>
              Threshold percentage for flat spline fittingwith respect to the maximum  (float;  default:  0.01).
              The    full    name    of    this    option    for    the    EsoRex    configuration    file    is
              <b>fors.fors_normalise_flat.splfit_threshold</b> [default = <u>0.01</u>].

       Note that it is possible to create a configuration file containing these  options,  along  with  suitable
       default values. Please refer to the details provided by the 'esorex --help' command.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       The full documentation for the fors pipeline can be downloaded as a PDF file using the following URL:

              <b><a href="ftp://ftp.eso.org/pub/dfs/pipelines/fors/fors-pipeline-manual-4.9.pdf">ftp://ftp.eso.org/pub/dfs/pipelines/fors/fors-pipeline-manual-4.9.pdf</a></b>

       An    overview    over    the    existing    ESO    pipelines    can   be   found   on   the   web   page
       <b>https://www.eso.org/sci/software/pipelines/</b>.

       Basic documentation about the EsoRex program can be found at the esorex (1) man page.

       It  is  possible  to  call   the   pipelines   from   python   using   the   python-cpl   package.    See
       <b>https://packages.python.org/python-cpl/index.html</b> for further information.

       The  other  recipes  of  the  fors  pipeline  are <u><a href="../man7/fors_align_sky.7.html">fors_align_sky</a></u>(7), <u><a href="../man7/fors_align_sky_lss.7.html">fors_align_sky_lss</a></u>(7), <u><a href="../man7/fors_bias.7.html">fors_bias</a></u>(7),
       <u><a href="../man7/fors_calib.7.html">fors_calib</a></u>(7),    <u><a href="../man7/fors_config.7.html">fors_config</a></u>(7),    <u><a href="../man7/fors_dark.7.html">fors_dark</a></u>(7),    <u><a href="../man7/fors_detect_objects.7.html">fors_detect_objects</a></u>(7),     <u><a href="../man7/fors_detect_spectra.7.html">fors_detect_spectra</a></u>(7),
       <u><a href="../man7/fors_extract.7.html">fors_extract</a></u>(7),  <u><a href="../man7/fors_extract_objects.7.html">fors_extract_objects</a></u>(7), <u><a href="../man7/fors_extract_slits.7.html">fors_extract_slits</a></u>(7), <u><a href="../man7/fors_flatfield.7.html">fors_flatfield</a></u>(7), <u><a href="../man7/fors_img_science.7.html">fors_img_science</a></u>(7),
       <u><a href="../man7/fors_img_screen_flat.7.html">fors_img_screen_flat</a></u>(7),       <u><a href="../man7/fors_img_sky_flat.7.html">fors_img_sky_flat</a></u>(7),       <u><a href="../man7/fors_photometry.7.html">fors_photometry</a></u>(7),        <u><a href="../man7/fors_pmos_calib.7.html">fors_pmos_calib</a></u>(7),
       <u><a href="../man7/fors_pmos_extract.7.html">fors_pmos_extract</a></u>(7),   <u><a href="../man7/fors_pmos_science.7.html">fors_pmos_science</a></u>(7),   <u><a href="../man7/fors_remove_bias.7.html">fors_remove_bias</a></u>(7),  <u><a href="../man7/fors_resample.7.html">fors_resample</a></u>(7),  <u><a href="../man7/fors_science.7.html">fors_science</a></u>(7),
       <u><a href="../man7/fors_spec_mflat.7.html">fors_spec_mflat</a></u>(7), <u><a href="../man7/fors_subtract_sky.7.html">fors_subtract_sky</a></u>(7), <u><a href="../man7/fors_subtract_sky_lss.7.html">fors_subtract_sky_lss</a></u>(7), <u><a href="../man7/fors_sumflux.7.html">fors_sumflux</a></u>(7),  <u><a href="../man7/fors_trace_flat.7.html">fors_trace_flat</a></u>(7),
       <u><a href="../man7/fors_wave_calib.7.html">fors_wave_calib</a></u>(7), <u><a href="../man7/fors_wave_calib_lss.7.html">fors_wave_calib_lss</a></u>(7), <u><a href="../man7/fors_zeropoint.7.html">fors_zeropoint</a></u>(7)

</pre><h4><b>VERSION</b></h4><pre>
       fors_normalise_flat 5.5.7

</pre><h4><b>AUTHOR</b></h4><pre>
       Carlo Izzo &lt;<a href="mailto:usd-help@eso.org">usd-help@eso.org</a>&gt;

</pre><h4><b>BUG</b> <b>REPORTS</b></h4><pre>
       Please  report  any  problems  to  <a href="mailto:usd-help@eso.org">usd-help@eso.org</a>. Alternatively, you may send a report to the ESO User
       Support Department &lt;<a href="mailto:usd-help@eso.org">usd-help@eso.org</a>&gt;.

</pre><h4><b>LICENSE</b></h4><pre>
       This file is currently part of the FORS Instrument Pipeline Copyright  (C)  2002-2010  European  Southern
       Observatory

       This  program  is  free  software;  you  can  redistribute it and/or modify it under the terms of the GNU
       General Public License as published by the Free Software Foundation; either version 2 of the License,  or
       (at your option) any later version.

       This  program  is  distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even
       the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU  General  Public
       License for more details.

       You  should have received a copy of the GNU General Public License along with this program; if not, write
       to the Free Software Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA  02110-1301  USA

fors_normalise_flat                                   5.5.7                               <u><a href="../man7/FORS_NORMALISE_FLAT.7.html">FORS_NORMALISE_FLAT</a></u>(7)
</pre>
 </div>
</div></section>
</div>
</body>
</html>