<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EVP_MAC-KMAC, EVP_MAC-KMAC128, EVP_MAC-KMAC256 - The KMAC EVP_MAC implementations</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/openssl">openssl_3.5.0-2ubuntu1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       EVP_MAC-KMAC, EVP_MAC-KMAC128, EVP_MAC-KMAC256 - The KMAC EVP_MAC implementations

</pre><h4><b>DESCRIPTION</b></h4><pre>
       Support for computing KMAC MACs through the <b>EVP_MAC</b> API.

   <b>Identity</b>
       These implementations are identified with one of these names and properties, to be used with
       <b>EVP_MAC_fetch()</b>:

       "KMAC-128", "provider=default" or "provider=fips"
       "KMAC-256", "provider=default" or "provider=fips"

   <b>Supported</b> <b>parameters</b>
       The general description of these parameters can be found in "PARAMETERS" in <b><a href="../man3/EVP_MAC.3.html">EVP_MAC</a></b>(3).

       All  these  parameters  (except for "block-size") can be set with <b>EVP_MAC_CTX_set_params()</b>.  Furthermore,
       the "size" parameter can be retrieved with <b>EVP_MAC_CTX_get_params()</b>, or with  <b>EVP_MAC_CTX_get_mac_size()</b>.
       The  length  of  the  "size"  parameter  should  not exceed that of a <b>size_t</b>.  Likewise, the "block-size"
       parameter can be retrieved with <b>EVP_MAC_CTX_get_params()</b>, or with <b>EVP_MAC_CTX_get_block_size()</b>.

       "key" (<b>OSSL_MAC_PARAM_KEY</b>) &lt;octet string&gt;
           Sets the MAC key.  Setting this parameter is identical to passing  a  <u>key</u>  to  <b><a href="../man3/EVP_MAC_init.3.html">EVP_MAC_init</a></b>(3).   The
           length of the key (in bytes) must be in the range 4...512.

       "custom" (<b>OSSL_MAC_PARAM_CUSTOM</b>) &lt;octet string&gt;
           Sets  the  customization  string.  It is an optional value with a length of at most 512 bytes, and is
           empty by default.

       "size" (<b>OSSL_MAC_PARAM_SIZE</b>) &lt;unsigned integer&gt;
           Sets the MAC size.  By default, it is 32 for "KMAC-128" and 64 for "KMAC-256".

       "block-size" (<b>OSSL_MAC_PARAM_BLOCK_SIZE</b>) &lt;unsigned integer&gt;
           Gets the MAC block size.  It is 168 for "KMAC-128" and 136 for "KMAC-256".

       "xof" (<b>OSSL_MAC_PARAM_XOF</b>) &lt;integer&gt;
           The "xof" parameter value is expected to be 1 or 0. Use 1 to enable XOF mode.  The default  value  is
           0.

       "fips-indicator" (<b>OSSL_MAC_PARAM_FIPS_APPROVED_INDICATOR</b>) &lt;int&gt;
           This settable parameter is described in <b><a href="../man7/provider-mac.7.html">provider-mac</a></b>(7).

       "no-short-mac" (<b>OSSL_MAC_PARAM_FIPS_NO_SHORT_MAC</b>) &lt;integer&gt;
           This settable parameter is described in <b><a href="../man7/provider-mac.7.html">provider-mac</a></b>(7).  It is used by the OpenSSL FIPS provider and
           the minimum length output for KMAC is defined by NIST's SP 800-185 8.4.2.

       "key-check" (<b>OSSL_MAC_PARAM_FIPS_KEY_CHECK</b>) &lt;integer&gt;
           This settable parameter is described in <b><a href="../man7/provider-mac.7.html">provider-mac</a></b>(7).

       The "custom" and "no-short-mac" parameters must be set as part of or before the <b>EVP_MAC_init()</b> call.  The
       "xof" and "size" parameters can be set at any time before <b>EVP_MAC_final()</b>.  The "key" parameter is set as
       part of the <b>EVP_MAC_init()</b> call, but can be set before it instead.

</pre><h4><b>EXAMPLES</b></h4><pre>
         #include &lt;openssl/evp.h&gt;
         #include &lt;openssl/params.h&gt;

         static int do_kmac(const unsigned char *in, size_t in_len,
                            const unsigned char *key, size_t key_len,
                            const unsigned char *custom, size_t custom_len,
                            int xof_enabled, unsigned char *out, int out_len)
         {
             EVP_MAC_CTX *ctx = NULL;
             EVP_MAC *mac = NULL;
             OSSL_PARAM params[4], *p;
             int ret = 0;
             size_t l = 0;

             mac = EVP_MAC_fetch(NULL, "KMAC-128", NULL);
             if (mac == NULL)
                 goto err;
             ctx = <a href="../manmac/EVP_MAC_CTX_new.mac.html">EVP_MAC_CTX_new</a>(mac);
             /* The mac can be freed after it is used by EVP_MAC_CTX_new */
             <a href="../manmac/EVP_MAC_free.mac.html">EVP_MAC_free</a>(mac);
             if (ctx == NULL)
                 goto err;

             /*
              * Setup parameters required before calling EVP_MAC_init()
              * The parameters OSSL_MAC_PARAM_XOF and OSSL_MAC_PARAM_SIZE may also be
              * used at this point.
              */
             p = params;
             *p++ = OSSL_PARAM_construct_octet_string(OSSL_MAC_PARAM_KEY,
                                                      (void *)key, key_len);
             if (custom != NULL &amp;&amp; custom_len != 0)
               *p++ = OSSL_PARAM_construct_octet_string(OSSL_MAC_PARAM_CUSTOM,
                                                        (void *)custom, custom_len);
             *p = OSSL_PARAM_construct_end();
             if (!EVP_MAC_CTX_set_params(ctx, params))
                 goto err;

             if (!EVP_MAC_init(ctx))
                 goto err;

             /*
              * Note: the following optional parameters can be set any time
              * before EVP_MAC_final().
              */
             p = params;
             *p++ = OSSL_PARAM_construct_int(OSSL_MAC_PARAM_XOF, &amp;xof_enabled);
             *p++ = OSSL_PARAM_construct_int(OSSL_MAC_PARAM_SIZE, &amp;out_len);
             *p = OSSL_PARAM_construct_end();
             if (!EVP_MAC_CTX_set_params(ctx, params))
                 goto err;

             /* The update may be called multiple times here for streamed input */
             if (!EVP_MAC_update(ctx, in, in_len))
                 goto err;
             if (!EVP_MAC_final(ctx, out, &amp;l, out_len))
                 goto err;
             ret = 1;
         err:
             EVP_MAC_CTX_free(ctx);
             return ret;
         }

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man3/EVP_MAC_CTX_get_params.3.html">EVP_MAC_CTX_get_params</a></b>(3),  <b><a href="../man3/EVP_MAC_CTX_set_params.3.html">EVP_MAC_CTX_set_params</a></b>(3),  "PARAMETERS"  in  <b><a href="../man3/EVP_MAC.3.html">EVP_MAC</a></b>(3),  <b><a href="../man3/OSSL_PARAM.3.html">OSSL_PARAM</a></b>(3),  SP
       800-185 8.4.2 &lt;https://nvlpubs.nist.gov/nistpubs/SpecialPublications/NIST.SP.800-185.pdf&gt;

</pre><h4><b>COPYRIGHT</b></h4><pre>
       Copyright 2018-2024 The OpenSSL Project Authors. All Rights Reserved.

       Licensed under the Apache License 2.0 (the "License").  You may not use this file  except  in  compliance
       with  the  License.   You  can  obtain  a  copy  in  the  file  LICENSE  in the source distribution or at
       &lt;https://www.openssl.org/source/license.html&gt;.

3.5.0                                              2025-06-04                                 <u><a href="../man7SSL/EVP_MAC-KMAC.7SSL.html">EVP_MAC-KMAC</a></u>(7SSL)
</pre>
 </div>
</div></section>
</div>
</body>
</html>