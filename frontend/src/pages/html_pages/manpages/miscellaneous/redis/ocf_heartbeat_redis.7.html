<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ocf_heartbeat_redis - Redis server</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/resource-agents-extra">resource-agents-extra_4.16.0-3ubuntu1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       ocf_heartbeat_redis - Redis server

</pre><h4><b>SYNOPSIS</b></h4><pre>

       <b>redis</b> [start | stop | status | monitor | promote | demote | meta-data | validate-all]

</pre><h4><b>DESCRIPTION</b></h4><pre>
       Resource agent script for redis server.

       This resource fully supports master/slave replication. The master preference of a node is determined by
       the 'slave_priority' parameter of the redis config. When taking the resource from 'unmanaged' to
       'managed', the currently active master will be given a priority of 1000 (plus 1 for each active
       connection). The default 'slave_priority' is 100, so the master will stay master. For a slave to become
       master after converting the resource to managed, set a slave_priority greater than 1000.

</pre><h4><b>SUPPORTED</b> <b>PARAMETERS</b></h4><pre>
       <b>bin</b>
           Path to `redis-server`

           (optional, string, default "/usr/bin/redis-server")

       <b>client_bin</b>
           Path to `redis-cli`

           (optional, string, default "/usr/bin/redis-cli")

       <b>config</b>
           Path to 'redis.conf'

           (unique, optional, string, default "/etc/redis/redis.conf")

       <b>user</b>
           User to run redis as

           (optional, string, default "redis")

       <b>rundir</b>
           Directory to store socket and pid file in

           (unique, optional, string, default "/var/run/redis")

       <b>pidfile_name</b>
           The filename to use for the pidfile. Will be created in the rundir. Should only be a basename, not a
           full path.

           (optional, string, default "redis-server.pid")

       <b>socket_name</b>
           The filename to use for the socket. Will be crated in the rundir. Should only be a basename, not a
           full path.

           (optional, string, default "redis.sock")

       <b>port</b>
           Port for replication client to connect to on remote server

           (optional, string, default "6379")

       <b>tunnel_host</b>
           When replication traffic is tunnelled, this is the host to target to forward outgoing traffic to the
           redis master. The resource agent configures the redis slave to target the master via
           tunnel_host:tunnel_port.

           Note that in order to enable replication traffic tunneling, parameter {tunnel_port_map} must be
           populated.

           (optional, string, default "127.0.0.1")

       <b>tunnel_port_map</b>
           A mapping of pacemaker node names to redis port number.

           To be used when redis servers need to tunnel replication traffic. On every node where the redis
           resource is running, the redis server listens to a different port. Each redis server can access its
           peers for replication traffic via a tunnel accessible at {tunnel_host}:port.

           The mapping the form of:
           pcmk1-name:port-for-redis1;pcmk2-name:port-for-redis2;pcmk3-name:port-for-redis3

           where the redis resource started on node pcmk1-name would listen on port port-for-redis1

           (optional, string, no default)

       <b>wait_last_known_master</b>
           During redis cluster bootstrap, wait for the last known master to be promoted before allowing any
           other instances in the cluster to be promoted. This lessens the risk of data loss when persistent
           data is in use.

           (optional, boolean, default false)

</pre><h4><b>SUPPORTED</b> <b>ACTIONS</b></h4><pre>
       This resource agent supports the following actions (operations):

       <b>start</b>
           Starts the resource. Suggested minimum timeout: 120s.

       <b>stop</b>
           Stops the resource. Suggested minimum timeout: 120s.

       <b>status</b>
           Performs a status check. Suggested minimum timeout: 60s.

       <b>monitor</b>
           Performs a detailed status check. Suggested minimum timeout: 60s. Suggested interval: 45s.

       <b>monitor</b> <b>(Promoted</b> <b>role)</b>
           Performs a detailed status check. Suggested minimum timeout: 60s. Suggested interval: 20s.

       <b>promote</b>
           Promotes the resource to the Master role. Suggested minimum timeout: 120s.

       <b>demote</b>
           Demotes the resource to the Slave role. Suggested minimum timeout: 120s.

       <b>notify</b>
           Suggested minimum timeout: 90s.

       <b>validate-all</b>
           Performs a validation of the resource configuration. Suggested minimum timeout: 5s.

       <b>meta-data</b>
           Retrieves resource agent metadata (internal use only). Suggested minimum timeout: 5s.

</pre><h4><b>EXAMPLE</b> <b>CRM</b> <b>SHELL</b></h4><pre>
       The following is an example configuration for a redis resource using the <b><a href="../man8/crm.8.html">crm</a></b>(8) shell:

           primitive p_redis ocf:heartbeat:redis \
             op monitor depth="0" timeout="60s" interval="45s" \
             op monitor role="Promoted" depth="0" timeout="60s" interval="20s"

           ms ms_redis p_redis \
             meta notify="true" interleave="true"

</pre><h4><b>EXAMPLE</b> <b>PCS</b></h4><pre>
       The following is an example configuration for a redis resource using <b><a href="../man8/pcs.8.html">pcs</a></b>(8)

           pcs resource create p_redis ocf:heartbeat:redis \
             op monitor OCF_CHECK_LEVEL="0" timeout="60s" interval="45s" \
             op monitor role="Promoted" OCF_CHECK_LEVEL="0" timeout="60s" interval="20s" promotable

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="http://clusterlabs.org/">http://clusterlabs.org/</a></b>

</pre><h4><b>AUTHOR</b></h4><pre>
       <b>ClusterLabs</b> <b>contributors</b> <b>(see</b> <b>the</b> <b>resource</b> <b>agent</b> <b>source</b> <b>for</b> <b>information</b> <b>about</b> <b>individual</b> <b>authors)</b>

resource-agents 4.16.0-3ubuntu                     06/25/2025                             <u><a href="../man7/OCF_HEARTBEAT_REDIS.7.html">OCF_HEARTBEAT_REDIS</a></u>(7)
</pre>
 </div>
</div></section>
</div>
</body>
</html>