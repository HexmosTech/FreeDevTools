<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ROLLBACK_TO_SAVEPOINT - roll back to a savepoint</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/postgresql-client-17">postgresql-client-17_17.5-1build1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       ROLLBACK_TO_SAVEPOINT - roll back to a savepoint

</pre><h4><b>SYNOPSIS</b></h4><pre>
       ROLLBACK [ WORK | TRANSACTION ] TO [ SAVEPOINT ] <u>savepoint_name</u>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       Roll back all commands that were executed after the savepoint was established and then start a new
       subtransaction at the same transaction level. The savepoint remains valid and can be rolled back to again
       later, if needed.

       <b>ROLLBACK</b> <b>TO</b> <b>SAVEPOINT</b> implicitly destroys all savepoints that were established after the named savepoint.

</pre><h4><b>PARAMETERS</b></h4><pre>
       <u>savepoint_name</u>
           The savepoint to roll back to.

</pre><h4><b>NOTES</b></h4><pre>
       Use <b>RELEASE</b> <b>SAVEPOINT</b> to destroy a savepoint without discarding the effects of commands executed after it
       was established.

       Specifying a savepoint name that has not been established is an error.

       Cursors have somewhat non-transactional behavior with respect to savepoints. Any cursor that is opened
       inside a savepoint will be closed when the savepoint is rolled back. If a previously opened cursor is
       affected by a <b>FETCH</b> or <b>MOVE</b> command inside a savepoint that is later rolled back, the cursor remains at
       the position that <b>FETCH</b> left it pointing to (that is, the cursor motion caused by <b>FETCH</b> is not rolled
       back). Closing a cursor is not undone by rolling back, either. However, other side-effects caused by the
       cursor's query (such as side-effects of volatile functions called by the query) <u>are</u> rolled back if they
       occur during a savepoint that is later rolled back. A cursor whose execution causes a transaction to
       abort is put in a cannot-execute state, so while the transaction can be restored using <b>ROLLBACK</b> <b>TO</b>
       <b>SAVEPOINT</b>, the cursor can no longer be used.

</pre><h4><b>EXAMPLES</b></h4><pre>
       To undo the effects of the commands executed after my_savepoint was established:

           ROLLBACK TO SAVEPOINT my_savepoint;

       Cursor positions are not affected by savepoint rollback:

           BEGIN;

           DECLARE foo CURSOR FOR SELECT 1 UNION SELECT 2;

           SAVEPOINT foo;

           FETCH 1 FROM foo;
            ?column?
           ----------
                   1

           ROLLBACK TO SAVEPOINT foo;

           FETCH 1 FROM foo;
            ?column?
           ----------
                   2

           COMMIT;

</pre><h4><b>COMPATIBILITY</b></h4><pre>
       The SQL standard specifies that the key word SAVEPOINT is mandatory, but PostgreSQL and Oracle allow it
       to be omitted. SQL allows only WORK, not TRANSACTION, as a noise word after ROLLBACK. Also, SQL has an
       optional clause AND [ NO ] CHAIN which is not currently supported by PostgreSQL. Otherwise, this command
       conforms to the SQL standard.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man7/BEGIN.7.html">BEGIN</a></b>(7), <b><a href="../man7/COMMIT.7.html">COMMIT</a></b>(7), RELEASE SAVEPOINT (<b><a href="../man7/RELEASE_SAVEPOINT.7.html">RELEASE_SAVEPOINT</a></b>(7)), <b><a href="../man7/ROLLBACK.7.html">ROLLBACK</a></b>(7), <b><a href="../man7/SAVEPOINT.7.html">SAVEPOINT</a></b>(7)

PostgreSQL 17.5                                       2025                              <u>ROLLBACK</u> <u>TO</u> <u><a href="../man7/SAVEPOINT.7.html">SAVEPOINT</a></u>(7)
</pre>
 </div>
</div></section>
</div>
</body>
</html>