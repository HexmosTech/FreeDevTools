<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ocf_heartbeat_pgsqlms - A PostgreSQL multi-state resource agent for Pacemaker</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/resource-agents-paf">resource-agents-paf_2.3.0-2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       ocf_heartbeat_pgsqlms - A PostgreSQL multi-state resource agent for Pacemaker

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>pgsqlms</b> [start | stop | monitor | promote | demote | notify | reload | methods | meta-data |
       validate-all]

</pre><h4><b>DESCRIPTION</b></h4><pre>
       Resource script for PostgreSQL in replication. It manages PostgreSQL servers using streaming replication
       as an HA resource.

</pre><h4><b>SUPPORTED</b> <b>PARAMETERS</b></h4><pre>
       <b>pgdata</b>
           Location of the PGDATA of your instance

           (optional, string, default "/var/lib/pgsql/data")

       <b>pghost</b>
           The socket directory or IP address to use to connect to the local instance

           (optional, string, default "/var/run/postgresql")

       <b>pgport</b>
           The port to connect to the local instance

           (optional, integer, default "5432")

       <b>bindir</b>
           Location of the PostgreSQL binaries.

           (optional, string, default "<a href="file:/usr/bin">/usr/bin</a>")

       <b>system_user</b>
           The system owner of your instance's process

           (optional, string, default "postgres")

       <b>recovery_template</b>
           <b>ONLY</b> for PostgreSQL 11 and bellow.

           The  local  template that will be copied as the "PGDATA/recovery.conf" file.  This template file must
           exists on all node.

           With PostgreSQL 12 and higher, the cluster will refuse to  start  if  this  parameter  is  set  or  a
           template file is found.

           (optional, string, default "$PGDATA/recovery.conf.pcmk")

       <b>maxlag</b>
           Maximum  lag  allowed  on  a standby before we set a negative master score on it.  The calculation is
           based on the difference between the current xlog location on the master and the write location on the
           standby.

           (optional, integer, default "0" disables this feature)

       <b>datadir</b>
           Path to the directory set in "data_directory" from your postgresql.conf  file.   This  parameter  has
           same default than PostgreSQL itself: the "pgdata" parameter value.

           Unless you have a special PostgreSQL setup and you understand this parameter, <b>ignore</b> <b>it</b>

           (optional, string, default to the value of "pgdata")

       <b>start_opts</b>
           Additional  arguments  given  to the postgres process on startup. See "postgres --help" for available
           options. Useful when the postgresql.conf file is not in the data directory (PGDATA), eg.:

             -c config_file=/etc/postgresql/9.3/main/postgresql.conf

           (optinal, string, default "")

</pre><h4><b>SUPPORTED</b> <b>ACTIONS</b></h4><pre>
       This resource agent supports the following actions (operations):

       <b>start</b>
           Starts the resource. Suggested minimum timeout: 60.

       <b>stop</b>
           Stops the resource. Suggested minimum timeout: 60.

       <b>reload</b>
           Suggested minimum timeout: 20.

       <b>promote</b>
           Promotes the resource to the Master role. Suggested minimum timeout: 30.

       <b>demote</b>
           Demotes the resource to the Slave role. Suggested minimum timeout: 120.

       <b>monitor</b> <b>(Master</b> <b>role)</b>
           Performs a detailed status check. Suggested minimum timeout: 10.  Suggested interval: 15.

       <b>monitor</b> <b>(Slave</b> <b>role)</b>
           Performs a detailed status check. Suggested minimum timeout: 10.  Suggested interval: 16.

       <b>notify</b>
           Suggested minimum timeout: 60

       <b>meta-data</b>
           Retrieves resource agent metadata (internal use only).  Suggested minimum timeout: 5.

       <b>methods</b>
           Suggested minimum timeout: 5.

       <b>validate-all</b>
           Performs a validation of the resource configuration.  Suggested minimum timeout: 5.

</pre><h4><b>EXAMPLE</b> <b>CRM</b> <b>SHELL</b></h4><pre>
       The following is an example configuration for a pgsqlms resource using the <b><a href="../man8/crm.8.html">crm</a></b>(8) shell:

         primitive pgsqld pgsqlms                                                 \
           params pgdata="/var/lib/postgresql/9.6/main"                           \
             bindir="/usr/lib/postgresql/9.6/bin"                                 \
             pghost="/var/run/postgresql"                                         \
             recovery_template="/etc/postgresql/9.6/main/recovery.conf.pcmk"      \
             start_opts="-c config_file=/etc/postgresql/9.6/main/postgresql.conf" \
           op start timeout=60s                                                   \
           op stop timeout=60s                                                    \
           op promote timeout=30s                                                 \
           op demote timeout=120s                                                 \
           op monitor interval=15s timeout=10s role="Master"                      \
           op monitor interval=16s timeout=10s role="Slave"                       \
           op notify timeout=60s

         ms pgsql-ha pgsqld meta notify=true

</pre><h4><b>EXAMPLE</b> <b>PCS</b></h4><pre>
       The following is an example configuration for a pgsqlms resource using <b><a href="../man8/pcs.8.html">pcs</a></b>(8):

         pcs resource create pgsqld ocf:heartbeat:pgsqlms            \
           bindir=/usr/pgsql-9.6/bin pgdata=/var/lib/pgsql/9.6/data  \
           op start timeout=60s                                      \
           op stop timeout=60s                                       \
           op promote timeout=30s                                    \
           op demote timeout=120s                                    \
           op monitor interval=15s timeout=10s role="Master"         \
           op monitor interval=16s timeout=10s role="Slave"          \
           op notify timeout=60s --master notify=true

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <a href="http://clusterlabs.org/">http://clusterlabs.org/</a>

</pre><h4><b>AUTHOR</b></h4><pre>
       Jehan-Guillaume de Rorthais and Mael Rimbault.

2.3.0                                              2024-03-18                           <u><a href="../man7/OCF_HEARTBEAT_PGSQLMS.7.html">OCF_HEARTBEAT_PGSQLMS</a></u>(7)
</pre>
 </div>
</div></section>
</div>
</body>
</html>