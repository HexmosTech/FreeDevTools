<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ocf_heartbeat_smb-share - Manages samba shares on the fly</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/resource-agents-extra">resource-agents-extra_4.16.0-3ubuntu1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       ocf_heartbeat_smb-share - Manages samba shares on the fly

</pre><h4><b>SYNOPSIS</b></h4><pre>

       <b>smb-share</b> [start | stop | status | monitor | meta-data | validate-all]

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This RA is used to control samba shares on the fly. For adding and removing samba shares no restart of
       the samba daemon is needed. This is the equivalent of the exportfs RA which is used for nfs shares.

       For this RA to work as expected you need a cloned samba daemon which have to be startet before. After
       this RA manages config snippets placed in the filesystem and after a fence of that node these snippets
       will still located there you will have to use a tmpfs mount for this. Also you need a basic smb.conf file
       in which all global parameters an permanent shares should be placed. Within this smb.conf also you must
       put a line in the global section like this:

       include = /etc/samba/conf.d/pacemaker-includes.conf

       The filename can be changed by setting the parameter includesfile. Every share created by this RA will
       create a new file located in:

       /etc/samba/conf.d/

       This directory also can be changed by setting the RA parameter confd.

</pre><h4><b>SUPPORTED</b> <b>PARAMETERS</b></h4><pre>
       <b>share</b>
           Set the name of a windows share which should be added to Samba example name "myshare" resulting in
           [myshare].

           (unique, required, string, no default)

       <b>path</b>
           Set the path to share for cifs clients. example path "/srv/data/myshare".

           (unique, optional, string, no default)

       <b>hosts_allow</b>
           This parameter is a comma, space, or tab delimited set of hosts which are permitted to access a
           service.

           (optional, string, no default)

       <b>browseable</b>
           This controls whether this share is seen in the list of available shares in a net view and in the
           browse list.

           (optional, string, no default)

       <b>writeable</b>
           Inverted synonym for read only.

           (optional, string, no default)

       <b>read_only</b>
           This option can be used to turn the writing backends tdb, tdb2, and ldap into read only mode. This
           can be useful e.g. in cases where a pre-filled database exists that should not be extended
           automatically.

           (optional, string, no default)

       <b>guest_ok</b>
           If this parameter is yes for a service, then no password is required to connect to the service.
           Privileges will be those of the guest account.

           (optional, string, no default)

       <b>directory_mask</b>
           This parameter is the octal modes which are used when converting DOS modes to UNIX modes when
           creating UNIX directories.

           (optional, string, no default)

       <b>create_mask</b>
           When a file is created, the necessary permissions are calculated according to the mapping from DOS
           modes to UNIX permissions, and the resulting UNIX mode is then bit-wise ANDed with this parameter.
           This parameter may be thought of as a bit-wise MASK for the UNIX modes of a file.

           (optional, string, no default)

       <b>printable</b>
           If this parameter is yes, then clients may open, write to and submit spool files on the directory
           specified for the service.

           (optional, string, no default)

       <b>valid_users</b>
           This is a list of users that should be allowed to login to this service. Names starting with @, + and
           &amp; are interpreted using the same rules as described in the invalid users parameter.

           (optional, string, no default)

       <b>force_user</b>
           This specifies a UNIX user name that will be assigned as the default user for all users connecting to
           this service. This is useful for sharing files.

           (optional, string, no default)

       <b>force_group</b>
           This specifies a UNIX group name that will be assigned as the default primary group for all users
           connecting to this service. This is useful for sharing files by ensuring that all access to files on
           service will use the named group for their permissions checking.

           (optional, string, no default)

       <b>extraopt</b>
           This option can be used to define an additional key = value pair. In this parameter also a semicolon
           could be placed. Need to set e.g somthinspecial = value

           (optional, string, no default)

       <b>extraopt_list</b>
           This option can be used to define multiple additional key = value pairs. Define the list of element
           semicolon separated. e.g somethingspecial = value;one more = value2

           (optional, string, no default)

       <b>outfile</b>
           Set the path and filename where the snipped should be written. example
           "/etc/samba/conf.d/myshare.inc".

           (unique, required, string, no default)

       <b>confd</b>
           Set the path where the includes will be written. This folder have to be a tmpfs mount This defaults
           to "/etc/samba/conf.d".

           (optional, string, default "/etc/samba/conf.d")

       <b>includesfile</b>
           Set the path and filename in which the include should be placed. example includesfile
           "/etc/samba/conf.d/pacemaker-includes.conf". This option manages the include= parameter within this
           file

           (optional, string, default "/etc/samba/conf.d/pacemaker-includes.conf")

</pre><h4><b>SUPPORTED</b> <b>ACTIONS</b></h4><pre>
       This resource agent supports the following actions (operations):

       <b>start</b>
           Starts the resource. Suggested minimum timeout: 20s.

       <b>stop</b>
           Stops the resource. Suggested minimum timeout: 20s.

       <b>status</b>
           Performs a status check. Suggested minimum timeout: 20s. Suggested interval: 10s.

       <b>monitor</b>
           Performs a detailed status check. Suggested minimum timeout: 20s. Suggested interval: 10s.

       <b>meta-data</b>
           Retrieves resource agent metadata (internal use only). Suggested minimum timeout: 5s.

       <b>validate-all</b>
           Performs a validation of the resource configuration. Suggested minimum timeout: 20s.

</pre><h4><b>EXAMPLE</b> <b>CRM</b> <b>SHELL</b></h4><pre>
       The following is an example configuration for a smb-share resource using the <b><a href="../man8/crm.8.html">crm</a></b>(8) shell:

           primitive p_smb-share ocf:heartbeat:smb-share \
             params \
               share=<u>string</u> \
               outfile=<u>string</u> \
             op monitor depth="0" timeout="20s" interval="10s"

</pre><h4><b>EXAMPLE</b> <b>PCS</b></h4><pre>
       The following is an example configuration for a smb-share resource using <b><a href="../man8/pcs.8.html">pcs</a></b>(8)

           pcs resource create p_smb-share ocf:heartbeat:smb-share \
             share=<u>string</u> \
             outfile=<u>string</u> \
             op monitor OCF_CHECK_LEVEL="0" timeout="20s" interval="10s"

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="http://clusterlabs.org/">http://clusterlabs.org/</a></b>

</pre><h4><b>AUTHOR</b></h4><pre>
       <b>ClusterLabs</b> <b>contributors</b> <b>(see</b> <b>the</b> <b>resource</b> <b>agent</b> <b>source</b> <b>for</b> <b>information</b> <b>about</b> <b>individual</b> <b>authors)</b>

resource-agents 4.16.0-3ubuntu                     06/25/2025                             <u><a href="../man7/OCF_HEARTBEAT_SMB-S.7.html">OCF_HEARTBEAT_SMB-S</a></u>(7)
</pre>
 </div>
</div></section>
</div>
</body>
</html>