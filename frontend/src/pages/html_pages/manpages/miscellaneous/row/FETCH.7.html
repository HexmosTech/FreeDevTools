<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FETCH - retrieve rows from a query using a cursor</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/postgresql-client-17">postgresql-client-17_17.5-1build1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       FETCH - retrieve rows from a query using a cursor

</pre><h4><b>SYNOPSIS</b></h4><pre>
       FETCH [ <u>direction</u> ] [ FROM | IN ] <u>cursor_name</u>

       where <u>direction</u> can be one of:

           NEXT
           PRIOR
           FIRST
           LAST
           ABSOLUTE <u>count</u>
           RELATIVE <u>count</u>
           <u>count</u>
           ALL
           FORWARD
           FORWARD <u>count</u>
           FORWARD ALL
           BACKWARD
           BACKWARD <u>count</u>
           BACKWARD ALL

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>FETCH</b> retrieves rows using a previously-created cursor.

       A cursor has an associated position, which is used by <b>FETCH</b>. The cursor position can be before the first
       row of the query result, on any particular row of the result, or after the last row of the result. When
       created, a cursor is positioned before the first row. After fetching some rows, the cursor is positioned
       on the row most recently retrieved. If <b>FETCH</b> runs off the end of the available rows then the cursor is
       left positioned after the last row, or before the first row if fetching backward.  <b>FETCH</b> <b>ALL</b> or <b>FETCH</b>
       <b>BACKWARD</b> <b>ALL</b> will always leave the cursor positioned after the last row or before the first row.

       The forms NEXT, PRIOR, FIRST, LAST, ABSOLUTE, RELATIVE fetch a single row after moving the cursor
       appropriately. If there is no such row, an empty result is returned, and the cursor is left positioned
       before the first row or after the last row as appropriate.

       The forms using FORWARD and BACKWARD retrieve the indicated number of rows moving in the forward or
       backward direction, leaving the cursor positioned on the last-returned row (or after/before all rows, if
       the <u>count</u> exceeds the number of rows available).

       RELATIVE 0, FORWARD 0, and BACKWARD 0 all request fetching the current row without moving the cursor,
       that is, re-fetching the most recently fetched row. This will succeed unless the cursor is positioned
       before the first row or after the last row; in which case, no row is returned.

           <b>Note</b>

           This page describes usage of cursors at the SQL command level. If you are trying to use cursors
           inside a PL/pgSQL function, the rules are different â€” see Section 41.7.3.

</pre><h4><b>PARAMETERS</b></h4><pre>
       <u>direction</u>
           <u>direction</u> defines the fetch direction and number of rows to fetch. It can be one of the following:

           NEXT
               Fetch the next row. This is the default if <u>direction</u> is omitted.

           PRIOR
               Fetch the prior row.

           FIRST
               Fetch the first row of the query (same as ABSOLUTE 1).

           LAST
               Fetch the last row of the query (same as ABSOLUTE -1).

           ABSOLUTE <u>count</u>
               Fetch the <u>count</u>'th row of the query, or the abs(<u>count</u>)'th row from the end if <u>count</u> is negative.
               Position before first row or after last row if <u>count</u> is out of range; in particular, ABSOLUTE 0
               positions before the first row.

           RELATIVE <u>count</u>
               Fetch the <u>count</u>'th succeeding row, or the abs(<u>count</u>)'th prior row if <u>count</u> is negative.  RELATIVE
               0 re-fetches the current row, if any.

           <u>count</u>
               Fetch the next <u>count</u> rows (same as FORWARD <u>count</u>).

           ALL
               Fetch all remaining rows (same as FORWARD ALL).

           FORWARD
               Fetch the next row (same as NEXT).

           FORWARD <u>count</u>
               Fetch the next <u>count</u> rows.  FORWARD 0 re-fetches the current row.

           FORWARD ALL
               Fetch all remaining rows.

           BACKWARD
               Fetch the prior row (same as PRIOR).

           BACKWARD <u>count</u>
               Fetch the prior <u>count</u> rows (scanning backwards).  BACKWARD 0 re-fetches the current row.

           BACKWARD ALL
               Fetch all prior rows (scanning backwards).

       <u>count</u>
           <u>count</u> is a possibly-signed integer constant, determining the location or number of rows to fetch. For
           FORWARD and BACKWARD cases, specifying a negative <u>count</u> is equivalent to changing the sense of
           FORWARD and BACKWARD.

       <u>cursor_name</u>
           An open cursor's name.

</pre><h4><b>OUTPUTS</b></h4><pre>
       On successful completion, a <b>FETCH</b> command returns a command tag of the form

           FETCH <u>count</u>

       The <u>count</u> is the number of rows fetched (possibly zero). Note that in psql, the command tag will not
       actually be displayed, since psql displays the fetched rows instead.

</pre><h4><b>NOTES</b></h4><pre>
       The cursor should be declared with the SCROLL option if one intends to use any variants of <b>FETCH</b> other
       than <b>FETCH</b> <b>NEXT</b> or <b>FETCH</b> <b>FORWARD</b> with a positive count. For simple queries PostgreSQL will allow
       backwards fetch from cursors not declared with SCROLL, but this behavior is best not relied on. If the
       cursor is declared with NO SCROLL, no backward fetches are allowed.

       ABSOLUTE fetches are not any faster than navigating to the desired row with a relative move: the
       underlying implementation must traverse all the intermediate rows anyway. Negative absolute fetches are
       even worse: the query must be read to the end to find the last row, and then traversed backward from
       there. However, rewinding to the start of the query (as with FETCH ABSOLUTE 0) is fast.

       <b>DECLARE</b> is used to define a cursor. Use <b>MOVE</b> to change cursor position without retrieving data.

</pre><h4><b>EXAMPLES</b></h4><pre>
       The following example traverses a table using a cursor:

           BEGIN WORK;

           -- Set up a cursor:
           DECLARE liahona SCROLL CURSOR FOR SELECT * FROM films;

           -- Fetch the first 5 rows in the cursor liahona:
           FETCH FORWARD 5 FROM liahona;

            code  |          title          | did | date_prod  |   kind   |  len
           -------+-------------------------+-----+------------+----------+-------
            BL101 | The Third Man           | 101 | 1949-12-23 | Drama    | 01:44
            BL102 | The African Queen       | 101 | 1951-08-11 | Romantic | 01:43
            JL201 | Une Femme est une Femme | 102 | 1961-03-12 | Romantic | 01:25
            P_301 | Vertigo                 | 103 | 1958-11-14 | Action   | 02:08
            P_302 | Becket                  | 103 | 1964-02-03 | Drama    | 02:28

           -- Fetch the previous row:
           FETCH PRIOR FROM liahona;

            code  |  title  | did | date_prod  |  kind  |  len
           -------+---------+-----+------------+--------+-------
            P_301 | Vertigo | 103 | 1958-11-14 | Action | 02:08

           -- Close the cursor and end the transaction:
           CLOSE liahona;
           COMMIT WORK;

</pre><h4><b>COMPATIBILITY</b></h4><pre>
       The SQL standard defines <b>FETCH</b> for use in embedded SQL only. The variant of <b>FETCH</b> described here returns
       the data as if it were a <b>SELECT</b> result rather than placing it in host variables. Other than this point,
       <b>FETCH</b> is fully upward-compatible with the SQL standard.

       The <b>FETCH</b> forms involving FORWARD and BACKWARD, as well as the forms FETCH <u>count</u> and FETCH ALL, in which
       FORWARD is implicit, are PostgreSQL extensions.

       The SQL standard allows only FROM preceding the cursor name; the option to use IN, or to leave them out
       altogether, is an extension.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man7/CLOSE.7.html">CLOSE</a></b>(7), <b><a href="../man7/DECLARE.7.html">DECLARE</a></b>(7), <b><a href="../man7/MOVE.7.html">MOVE</a></b>(7)

PostgreSQL 17.5                                       2025                                              <u><a href="../man7/FETCH.7.html">FETCH</a></u>(7)
</pre>
 </div>
</div></section>
</div>
</body>
</html>