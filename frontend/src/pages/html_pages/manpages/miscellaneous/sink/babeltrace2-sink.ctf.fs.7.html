<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>babeltrace2-sink.ctf.fs - Babeltrace 2: File system CTF sink component class</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/babeltrace2">babeltrace2_2.1.1-1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       babeltrace2-sink.ctf.fs - Babeltrace 2: File system CTF sink component class

</pre><h4><b>DESCRIPTION</b></h4><pre>
       A Babeltrace 2 <b>sink.ctf.fs</b> component writes the messages it consumes to one or more CTF (see
       &lt;https://diamon.org/ctf/&gt;) 1.8 or CTF 2 traces on the file system.

                       +-------------+
                       | sink.ctf.fs |
                       |             +--&gt; CTF trace(s) on
           Messages --&gt;@ in          |    the file system
                       +-------------+

       See <b><a href="../man7/babeltrace2-intro.7.html">babeltrace2-intro</a></b>(7) to learn more about the Babeltrace 2 project and its core concepts.

       The <b>ctf-version</b> parameter controls the CTF version of the resulting traces.

       As of this version, a <b>sink.ctf.fs</b> component may only write:

       CTF 1.8 traces
           When working under version 0 of the Message Interchange Protocol (MIP).

       CTF 2 traces
           When working under version 1 of the MIP.

       Therefore, the "get supported MIP versions" method of a <b>sink.ctf.fs</b> component class reports to support
       only MIP 0 with the <b>ctf-version</b> parameter set to <b>1</b> and only MIP 1 with <b>ctf-version</b> set to <b>2</b>.

       A <b>sink.ctf.fs</b> component doesn’t merge traces: it writes the messages of different input traces to
       different output traces.

   <b>Trace</b> <b>IR</b> <b>to</b> <b>CTF</b> <b>1.8</b> <b>translation</b>
       A <b>sink.ctf.fs</b> component makes a best effort to write CTF 1.8 traces that are semantically equivalent to
       the input traces. As of this version, with the <b>ctf-version</b> parameter set to <b>1</b>, the following field class
       translations can occur:

       •   The component translates a boolean field class to a CTF unsigned 8-bit integer field class.

           The value of the unsigned integer field is 0 when the value of the boolean field is false and 1 when
           it’s true.

       •   The component translates a bit array field to a CTF unsigned integer field class having the same
           length.

       •   The component translates an option field class to a CTF variant field class where the options are an
           empty structure field class and the optional field class itself.

           The empty structure field is selected when the option field has no field.

       In all the cases above, the component adds a comment in the metadata stream, above the field class, to
       indicate that a special translation occurred.

       The component doesn’t translate any user attribute: a CTF 1.8 metadata stream has no way to represent
       them.

   <b>Trace</b> <b>IR</b> <b>to</b> <b>CTF</b> <b>2</b> <b>translation</b>
       As of this version, with the <b>ctf-version</b> parameter set to <b>2</b>:

       •   The component sets the <b>sink.ctf.fs</b> attribute, under the <b>babeltrace.org,2020</b> namespace, of the
           preamble fragment to <b>true</b>.

       •   The structure member class names of packet context field classes having a CTF 2 role have the
           metadata stream UUID as a prefix to avoid clashes with user member classes.

           For example, the packet content length member class could be named <b>afe9ed0e-</b>
           <b>ce73-413f-8956-83663bab2047-content_size</b>.

       •   The component translates an event class log level to the <b>log-level</b> attribute under the
           <b>babeltrace.org,2020</b> namespace as such:

           <b>BT_EVENT_CLASS_LOG_LEVEL_EMERGENCY</b>
               <b>"emergency"</b>

           <b>BT_EVENT_CLASS_LOG_LEVEL_ALERT</b>
               <b>"alert"</b>

           <b>BT_EVENT_CLASS_LOG_LEVEL_CRITICAL</b>
               <b>"critical"</b>

           <b>BT_EVENT_CLASS_LOG_LEVEL_ERROR</b>
               <b>"error"</b>

           <b>BT_EVENT_CLASS_LOG_LEVEL_WARNING</b>
               <b>"warning"</b>

           <b>BT_EVENT_CLASS_LOG_LEVEL_NOTICE</b>
               <b>"notice"</b>

           <b>BT_EVENT_CLASS_LOG_LEVEL_INFO</b>
               <b>"info"</b>

           <b>BT_EVENT_CLASS_LOG_LEVEL_DEBUG_SYSTEM</b>
               <b>"debug:system"</b>

           <b>BT_EVENT_CLASS_LOG_LEVEL_DEBUG_PROGRAM</b>
               <b>"debug:program"</b>

           <b>BT_EVENT_CLASS_LOG_LEVEL_DEBUG_PROCESS</b>
               <b>"debug:process"</b>

           <b>BT_EVENT_CLASS_LOG_LEVEL_DEBUG_MODULE</b>
               <b>"debug:module"</b>

           <b>BT_EVENT_CLASS_LOG_LEVEL_DEBUG_UNIT</b>
               <b>"debug:unit"</b>

           <b>BT_EVENT_CLASS_LOG_LEVEL_DEBUG_FUNCTION</b>
               <b>"debug:function"</b>

           <b>BT_EVENT_CLASS_LOG_LEVEL_DEBUG_LINE</b>
               <b>"debug:line"</b>

           <b>BT_EVENT_CLASS_LOG_LEVEL_DEBUG</b>
               <b>"debug:debug"</b>

       •   The component translates an event class EMF URI to the <b>emf-uri</b> attribute under the
           <b>babeltrace.org,2020</b> namespace as a JSON string.

       •   When the component needs to generate a length/selector field class <b>F</b> for dynamic field classes
           without a length/selector field:

           •   The structure member name of <b>F</b> is unspecified.

           •   <b>F</b> contains the attribute <b>is-key-only</b>, under the <b>babeltrace.org,2020</b> namespace, set to <b>true</b>.

       •   The component doesn’t translate trace and stream user attributes: a CTF 2 metadata stream has no way
           to represent them.

   <b>Input</b> <b>message</b> <b>constraints</b>
       Because of limitations in CTF regarding how discarded events and packets are encoded:

       •   If a stream class supports discarded events and the <b>ignore-discarded-events</b> parameter is NOT true:

           •   The stream class must support packets.

           •   Discarded events messages must have times.

           •   Any discarded events message must occur between a packet end and a packet beginning message.

           •   The beginning time of a discarded events message must be the same as the time of the last packet
               end message.

           •   The end time of a discarded events message must be the same as the time of the next packet end
               message.

           •   Time ranges of discarded events messages must not overlap.

       •   If a stream class supports discarded packets and the <b>ignore-discarded-packets</b> parameter is NOT true:

           •   The stream class must support packets.

           •   Discarded packets messages must have times.

           •   The beginning time of a discarded events message must be the same as the time of the last packet
               end message.

           •   The end time of a discarded events message must be the same as the time of the next packet
               beginning message.

           •   Time ranges of discarded packets messages must not overlap.

       The messages which a <b>source.ctf.fs</b> component creates satisfy all the requirements above.

       If a discarded events or packets message has no events/packets count, then the <b>sink.ctf.fs</b> component
       adds 1 to the counter of the corresponding CTF stream.

   <b>Alignment</b> <b>and</b> <b>byte</b> <b>order</b>
       A <b>sink.ctf.fs</b> component always aligns data fields as such:

       Fixed-length bit array fields with a size which isn’t a multiple of 8
           1-bit.

       All other scalar fields (fixed-length bit array, null-terminated string, BLOB)
           8-bit.

       The component writes fields using the native byte order of the machine. As of this version, there’s no
       way to force a custom byte order.

   <b>Output</b> <b>path</b>
       The path of a CTF trace is the directory which directly contains the metadata and data stream files.

       The current strategy to build a path in which to write the streams of a given input trace is, in this
       order:

        1. If the <b>assume-single-trace</b> parameter is true, then the output trace path to use for the single input
           trace is the directory specified by the <b>path</b> parameter.

        2. If the component recognizes the input trace as an LTTng (2.11 or greater) trace, then it checks
           specific trace environment values to build a trace path relative to the directory specified by the
           <b>path</b> parameter:

           Linux kernel domain

                   <u>HOST</u>/<u>SNAME</u>-<u>STIME</u>/kernel

           User space domain, per-UID buffering

                   <u>HOST</u>/<u>SNAME</u>-<u>STIME</u>/ust/uid/<u>UID</u>/<u>ARCHW</u>-bit

           User space domain, per-PID buffering

                   <u>HOST</u>/<u>SNAME</u>-<u>STIME</u>/ust/pid/<u>PNAME</u>-<u>PID</u>-<u>PTIME</u>

           With:

           <u>HOST</u>
               Target hostname.

           <u>SNAME</u>
               Tracing session name.

           <u>STIME</u>
               Tracing session creation date/time.

           <u>UID</u>
               User ID.

           <u>ARCHW</u>
               Architecture width (<b>32</b> or <b>64</b>).

           <u>PNAME</u>
               Process name.

           <u>PID</u>
               Process ID.

           <u>PTIME</u>
               Process date/time.

        3. If the input trace has a name, then the component sanitizes this name and uses it as a relative path
           to the directory specified by the <b>path</b> parameter.

           The trace name sanitization operation:

           •   Replaces <b>.</b>  subdirectories with <b>_</b>.

           •   Replaces <b>..</b>  subdirectories with <b>__</b>.

           •   Removes any trailing <b>/</b> character.

        4. The component uses the subdirectory <b>trace</b> relative to the directory specified by the <b>path</b> parameter.

       In all the cases above, if the effective output trace path already exists on the file system, then the
       component appends a numeric suffix to the name of the last subdirectory. The suffix starts at 0 and
       increments until the path doesn’t exist.

</pre><h4><b>INITIALIZATION</b> <b>PARAMETERS</b></h4><pre>
       <b>assume-single-trace</b>=<u>VAL</u> [optional boolean]
           If <u>VAL</u> is true, then assume that the component only receives messages related to a single input
           trace.

           This parameter affects how the component builds the output trace path (see “Output path”).

           Default: false.

       <b>ctf-version</b>=<u>VERSION</u> [optional string]
           Write traces following version <u>VERSION</u> of CTF, where <u>VERSION</u> is one of:

           <b>1</b>, <b>1.8</b>
               CTF 1.8.

           <b>2</b>, <b>2.0</b>
               CTF 2.

           Default: <b>2</b>.

       <b>ignore-discarded-events</b>=<u>VAL</u> [optional boolean]
           If <u>VAL</u> is true, then ignore discarded events messages.

           Default: false.

       <b>ignore-discarded-packets</b>=<u>VAL</u> [optional boolean]
           If <u>VAL</u> is true, then ignore discarded packets messages.

           Default: false.

       <b>path</b>=<u>PATH</u> [string]
           Base output path.

           See “Output path” to learn how the component uses this parameter to build the output path for a given
           input trace.

       <b>quiet</b>=<u>VAL</u> [optional boolean]
           If <u>VAL</u> is true, then don’t write anything to the standard output.

           Default: false.

</pre><h4><b>PORTS</b></h4><pre>
           +-------------+
           | sink.ctf.fs |
           |             |
           @ in          |
           +-------------+

   <b>Input</b>
       <b>in</b>
           Single input port.

</pre><h4><b>BUGS</b></h4><pre>
       If you encounter any issue or usability problem, please report it on the Babeltrace bug tracker (see
       &lt;https://bugs.lttng.org/projects/babeltrace&gt;).

</pre><h4><b>RESOURCES</b></h4><pre>
       The Babeltrace project shares some communication channels with the LTTng project (see
       &lt;https://lttng.org/&gt;).

       •   Babeltrace website (see &lt;https://babeltrace.org/&gt;)

       •   Mailing list (see &lt;https://lists.lttng.org&gt;) for support and development: <b><a href="mailto:lttng-dev@lists.lttng.org">lttng-dev@lists.lttng.org</a></b>

       •   IRC channel (see &lt;irc://irc.oftc.net/lttng&gt;): <b>#lttng</b> on <b>irc.oftc.net</b>

       •   Bug tracker (see &lt;https://bugs.lttng.org/projects/babeltrace&gt;)

       •   Git repository (see &lt;https://git.efficios.com/?p=babeltrace.git&gt;)

       •   GitHub project (see &lt;https://github.com/efficios/babeltrace&gt;)

       •   Continuous integration (see &lt;https://ci.lttng.org/view/Babeltrace/&gt;)

       •   Code review (see &lt;https://review.lttng.org/q/project:babeltrace&gt;)

</pre><h4><b>AUTHORS</b></h4><pre>
       The Babeltrace 2 project is the result of hard work by many regular developers and occasional
       contributors.

       The current project maintainer is Jérémie Galarneau &lt;<a href="mailto:jeremie.galarneau@efficios.com">mailto:jeremie.galarneau@efficios.com</a>&gt;.

</pre><h4><b>COPYRIGHT</b></h4><pre>
       This component class is part of the Babeltrace 2 project.

       Babeltrace is distributed under the MIT license (see &lt;https://opensource.org/licenses/MIT&gt;).

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man7/babeltrace2-intro.7.html">babeltrace2-intro</a></b>(7), <b><a href="../man7/babeltrace2-plugin-ctf.7.html">babeltrace2-plugin-ctf</a></b>(7)

Babeltrace 2.1.1                                 16 October 2024                            <u><a href="../man7/BABELTRACE2-SINK..7.html">BABELTRACE2-SINK.</a></u>(7)
</pre>
 </div>
</div></section>
</div>
</body>
</html>