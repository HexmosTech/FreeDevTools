<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>shellia - library for interactive shell scripts</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/shellia">shellia_5.9_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       shellia - library for interactive shell scripts

</pre><h4><b>SYNOPSIS</b></h4><pre>
          <b>.</b> <b>/usr/share/shellia/ia[.interactive|.check|.debug|]</b>

</pre><h4><b>NAME</b></h4><pre>
       <b>shellia</b>  is  a  library  that  allows to run <b>shell</b> scripts interactive.  The word interactive is the most
       characteristic adjective for <b>shellia</b> and the shortest abbreviation found for interactive is <b>ia</b>.   Such  a
       short  abbreviation  is needed, because most commands brought by <b>shellia</b> start with this short prefix <b>ia</b>.
       <b>shellia</b> is composed from <b>shell</b> and <b>ia</b>.

       See also <b>PREFIX</b> in <a href="../man3/shellia.3.html">shellia</a>(3).

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>shellia</b> is a library that allows to run shell scripts silently or interactive and helps to  check  errors
       of commands that are combined in <b>steps</b>.

       This  makes  it  easy  to  familiarize  oneself with a shell script that uses <b>shellia</b> and find unexpected
       behaviour in the shell script.  Also when running the shell script silently <b>shellia</b> can check it <b>step</b>  by
       <b>step</b>.

       Shell  scripts  often  become  large  with  many  subfunctions, calling many commands.  This leads to the
       following problems, where <b>shellia</b> can help:

       • It is not easy to run only parts of the script, to learn about an existing script, to find an error  in
         a  script, to change the order of parts of the script for testing or to rerun only a part of the script
         that failed.

       • It is not easy to find out, from which part of the script errors, warnings or messages that  appear  on
         stdout  or  stderr are created.  And it is often not clear if output of a shell script is ok and can be
         ignored.

       • Often commands are started in a shell script without checking for Errors because this  would  make  the
         scripts too complex.

       • Many  programs can only enable debug at start time.  This can result in much debug output, also if only
         specific debug output is needed.

       The shellia library can help with the following features.

       • run a script or parts of a script interactively

       • check each command for unexpected output or returncode

       • jump to interactive mode if an error occurs or exit the script

       • helps to structure large scripts

       • in interactive mode shellia can toggled the debug output level

</pre><h4><b>NOTES</b></h4><pre>
       When building a <u>./script.using.shellia</u> the following hints may be helpful:

   <b>Do</b> <b>not</b> <b>use</b> <b>a</b> <b>single</b> <b>command</b> <b>as</b> <b>a</b> <b>step</b>
       It is important to find the right size of a <b>step</b> to be uses in <b>shellia</b>.  The idea of a  <b>step</b>  is  not  to
       check  the  execution  of  a single command.  Instead a single command can be part of a function, that is
       called by a <b>step</b>.

   <b>Input</b> <b>and</b> <b>Output</b> <b>of</b> <b>a</b> <b>step</b>
       Each <b>step</b> should be interactively runable by an end user of the script.  This means the end  user  should
       be  able  to  handle  input  and output of a <b>step</b>.  This often means a <b>step</b> should not read stdin or send
       stdout to another <b>step</b>.  For example a backup script could have one <b>step</b> to backup <a href="file:/home">/home</a> and another <b>step</b>
       to backup /usr.  But a <b>step</b> that reads data from work disk and another <b>step</b> that writes backup data to  a
       backup disk should better be combined in a single <b>step</b>.

   <b>Reasonable</b> <b>size</b> <b>of</b> <b>interactive</b> <b>steps</b>
       If the user of the script can not imagine what an interactive <b>step</b> does, this <b>step</b> may be to detailed and
       to  small.   If to many errors may happen in the interactive <b>step</b>, the <b>step</b> may be to large. For example,
       if you need to mount an external disk, this should be a separate interactive <b>step</b>. Because this can  give
       errors, if the disk is not readable. And this errors can again lead to follow up errors.

   <b>When</b> <b>to</b> <b>use</b> <b>check</b> <b>option</b> <b>-c</b> <b>and</b> <b>-C</b>
       Both  options  will  check  the  output  and  the exit code of a <b>step</b>.  All output has to be allowed with
       extended regular expressions in <b>check-mode</b>.  To be able to control the exit code in  the  same  way,  the
       line  <u>exit=&lt;exit</u>  <u>code&gt;</u>  (with  <u>&lt;exit</u> <u>code&gt;</u> replace by the exit code), will be added, if the exit code is
       nonzero.

       With option <b>-c</b>, per default every output to <b>stdout</b> and <b>stderr</b> is seen as one output and is  displayed  as
       an  error.   The developer can change this with <b>ia_stdout</b> and <b>ia_ignore</b>.  This means with <b>-c</b> every output
       is checked, also output that would normally go to <b>stdout</b>.  This makes it easy to find changed output from
       a command used, e.g.  when upgrading to a new operating system version.

       With option <b>-C</b>, per default every output to <b>stdout</b> is unchanged and all output to <b>stderr</b> is  seen  as  an
       error.   The devloper can ignore error output with <b>ia_ignore</b>.  This means the developer has not to handle
       <b>stdout</b>, which can be good and bad.

       If a <b>step</b> calls a programm, that produces <u>stdout</u> and <u>stderr</u> output, and it is most  important  to  retain
       the  order  of  the  output, option <b>-c</b> should be used. With option <b>-c</b> the output of both streams would be
       combined by <b>shellia</b> to one stream.  If it is important to know if output is from <u>stdout</u> or from <u>stderr</u> to
       decide if it is an error, option <b>-C</b> should be used.

   <b>Use</b> <b>--quiet,</b> <b>--silent</b> <b>or</b> <b>similar</b> <b>if</b> <b>available</b>
       If commands are used with check option <b>-c</b> or <b>-C</b>, less <b>ia_stdout</b> or <b>ia_stderr</b> lines have  to  written,  if
       the commands create less output.

</pre><h4><b>EXAMPLE</b></h4><pre>
       For  example  imagine  a  backup  script,  that  writes  to an external disk, that should then contain an
       encrypted and bootable backup.

       This script may call the following <b>steps</b>, that are itself functions in the script.

       The main part of the script could look like this:

          eval "$ia_init"
          ia_add "opencrypt &lt;-i&gt;"
          ia_add "mountbkup &lt;-i&gt;"
          ia_add "synccopy"
          ia_add "lvcopyvms &lt;-i&gt;
          ia_add "fixcrypttab"
          ia_add "fixfstab"
          ia_add "prepare_chroot"
          ia_add "fixinitrd"
          ia_add "run_grub"
          ia_add "clean_chroot"
          ia_add "umountbkup &lt;-i&gt;"
          ia_add "closecrypt &lt;-i&gt;"
          ia -C

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <a href="../man1/shellia.1.html">shellia</a>(1), <a href="../man3/shellia.3.html">shellia</a>(3)

</pre><h4><b>AUTHOR</b></h4><pre>
       <a href="mailto:bernd.schumacher@hpe.com">bernd.schumacher@hpe.com</a>

       License: GNU General Public License, version 3

</pre><h4><b>COPYRIGHT</b></h4><pre>
       Bernd Schumacher &lt;<a href="mailto:bernd.schumacher@hpe.com">bernd.schumacher@hpe.com</a>&gt; (2007-2020)

0.1                                                2020-08-07                                         <u><a href="../man7/SHELLIA.7.html">SHELLIA</a></u>(7)
</pre>
 </div>
</div></section>
</div>
</body>
</html>