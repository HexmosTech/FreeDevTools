<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EVP_PKEY-SM2, EVP_KEYMGMT-SM2, SM2 - EVP_PKEY keytype support for the Chinese SM2 signature and</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/openssl">openssl_3.5.0-2ubuntu1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       EVP_PKEY-SM2, EVP_KEYMGMT-SM2, SM2 - EVP_PKEY keytype support for the Chinese SM2 signature and
       encryption algorithms

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The <b>SM2</b> algorithm was first defined by the Chinese national standard GM/T 0003-2012 and was later
       standardized by ISO as ISO/IEC 14888. <b>SM2</b> is actually an elliptic curve based algorithm. The current
       implementation in OpenSSL supports both signature and encryption schemes via the EVP interface.

       When doing the <b>SM2</b> signature algorithm, it requires a distinguishing identifier to form the message
       prefix which is hashed before the real message is hashed.

   <b>Common</b> <b>SM2</b> <b>parameters</b>
       SM2 uses the parameters defined in "Common EC parameters" in <b><a href="../man7/EVP_PKEY-EC.7.html">EVP_PKEY-EC</a></b>(7).  The following parameters
       are different:

       "cofactor" (<b>OSSL_PKEY_PARAM_EC_COFACTOR</b>) &lt;unsigned integer&gt;
           This parameter is ignored for <b>SM2</b>.

       (<b>OSSL_PKEY_PARAM_DEFAULT_DIGEST</b>) &lt;UTF8 string&gt;
           Getter that returns the default digest name.  (Currently returns "SM3" as of OpenSSL 3.0).

</pre><h4><b>NOTES</b></h4><pre>
       <b>SM2</b>   signatures   can   be   generated   by  using  the  'DigestSign'  series  of  APIs,  for  instance,
       <b>EVP_DigestSignInit()</b>, <b>EVP_DigestSignUpdate()</b>  and  <b>EVP_DigestSignFinal()</b>.   Ditto  for  the  verification
       process  by calling the 'DigestVerify' series of APIs.  Note that the SM2 algorithm requires the presence
       of the public key for signatures, as such the <b>OSSL_PKEY_PARAM_PUB_KEY</b> option must be set on any key  used
       in signature generation.

       Before computing an <b>SM2</b> signature, an <b>EVP_PKEY_CTX</b> needs to be created, and an <b>SM2</b> ID must be set for it,
       like this:

        EVP_PKEY_CTX_set1_id(pctx, id, id_len);

       Before  calling the <b>EVP_DigestSignInit()</b> or <b>EVP_DigestVerifyInit()</b> functions, that <b>EVP_PKEY_CTX</b> should be
       assigned to the <b>EVP_MD_CTX</b>, like this:

        EVP_MD_CTX_set_pkey_ctx(mctx, pctx);

       There is normally no need to pass a <b>pctx</b> parameter to <b>EVP_DigestSignInit()</b> or  <b>EVP_DigestVerifyInit()</b>  in
       such a scenario.

       SM2  can  be  tested  with the <b><a href="../man1/openssl-speed.1.html">openssl-speed</a></b>(1) application since version 3.0.  Currently, the only valid
       algorithm name is <b>sm2</b>.

       Since version 3.0, SM2 keys can be generated and loaded only when the domain parameters specify  the  SM2
       elliptic curve.

</pre><h4><b>EXAMPLES</b></h4><pre>
       This  example  demonstrates  the  calling sequence for using an <b>EVP_PKEY</b> to verify a message with the SM2
       signature algorithm and the SM3 hash algorithm:

        #include &lt;openssl/evp.h&gt;

        /* obtain an EVP_PKEY using whatever methods... */
        mctx = EVP_MD_CTX_new();
        pctx = EVP_PKEY_CTX_new(pkey, NULL);
        EVP_PKEY_CTX_set1_id(pctx, id, id_len);
        EVP_MD_CTX_set_pkey_ctx(mctx, pctx);
        EVP_DigestVerifyInit(mctx, NULL, EVP_sm3(), NULL, pkey);
        EVP_DigestVerifyUpdate(mctx, msg, msg_len);
        EVP_DigestVerifyFinal(mctx, sig, sig_len)

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man3/EVP_PKEY_CTX_new.3.html">EVP_PKEY_CTX_new</a></b>(3),     <b><a href="../man3/EVP_DigestSignInit.3.html">EVP_DigestSignInit</a></b>(3),     <b><a href="../man3/EVP_DigestVerifyInit.3.html">EVP_DigestVerifyInit</a></b>(3),     <b><a href="../man3/EVP_PKEY_CTX_set1_id.3.html">EVP_PKEY_CTX_set1_id</a></b>(3),
       <b><a href="../man3/EVP_MD_CTX_set_pkey_ctx.3.html">EVP_MD_CTX_set_pkey_ctx</a></b>(3)

</pre><h4><b>COPYRIGHT</b></h4><pre>
       Copyright 2018-2024 The OpenSSL Project Authors. All Rights Reserved.

       Licensed  under  the  Apache License 2.0 (the "License").  You may not use this file except in compliance
       with the License.  You can obtain  a  copy  in  the  file  LICENSE  in  the  source  distribution  or  at
       &lt;https://www.openssl.org/source/license.html&gt;.

3.5.0                                              2025-06-04                                 <u><a href="../man7SSL/EVP_PKEY-SM2.7SSL.html">EVP_PKEY-SM2</a></u>(7SSL)
</pre>
 </div>
</div></section>
</div>
</body>
</html>