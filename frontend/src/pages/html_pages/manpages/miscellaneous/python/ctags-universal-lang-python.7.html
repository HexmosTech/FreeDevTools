<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ctags-lang-python - Random notes about tagging python source code with Universal Ctags</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/universal-ctags">universal-ctags_5.9.20210829.0-2build1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       ctags-lang-python - Random notes about tagging python source code with Universal Ctags

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>ctags</b> ... --languages=+Python ...
       <b>ctags</b> ... --language-force=Python ...
       <b>ctags</b> ... --map-Python=+.py ...

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This man page gathers random notes about tagging python source code.

</pre><h4><b>TAGGING</b> <b>IMPORT</b> <b>STATEMENTS</b></h4><pre>
   <b>Summary</b>
       <u>import</u> <u>X</u>
                                  ┌──────┬────────┬──────────┬────────────────────────┐
                                  │ name │ kind   │ role     │ other       noticeable │
                                  │      │        │          │ fields                 │
                                  ├──────┼────────┼──────────┼────────────────────────┤
                                  │ X    │ module │ imported │ N/A                    │
                                  └──────┴────────┴──────────┴────────────────────────┘

       <u>import</u> <u>X</u> <u>as</u> <u>Y</u>
                           ┌──────┬───────────┬────────────────────┬────────────────────────┐
                           │ name │ kind      │ role               │ other       noticeable │
                           │      │           │                    │ fields                 │
                           ├──────┼───────────┼────────────────────┼────────────────────────┤
                           │ X    │ module    │ indirectlyImported │ N/A                    │
                           ├──────┼───────────┼────────────────────┼────────────────────────┤
                           │ Y    │ namespace │ definition         │ nameref:module:X       │
                           └──────┴───────────┴────────────────────┴────────────────────────┘

       <u>from</u> <u>X</u> <u>import</u> <u>*</u>
                                 ┌──────┬────────┬───────────┬────────────────────────┐
                                 │ name │ kind   │ role      │ other       noticeable │
                                 │      │        │           │ fields                 │
                                 ├──────┼────────┼───────────┼────────────────────────┤
                                 │ <u>X</u>    │ module │ namespace │ N/A                    │
                                 └──────┴────────┴───────────┴────────────────────────┘

       <u>from</u> <u>X</u> <u>import</u> <u>Y</u>
                                 ┌──────┬─────────┬───────────┬────────────────────────┐
                                 │ name │ kind    │ role      │ other       noticeable │
                                 │      │         │           │ fields                 │
                                 ├──────┼─────────┼───────────┼────────────────────────┤
                                 │ <u>X</u>    │ module  │ namespace │ N/A                    │
                                 ├──────┼─────────┼───────────┼────────────────────────┤
                                 │ <u>Y</u>    │ unknown │ imported  │ scope:module:<u>X</u>         │
                                 └──────┴─────────┴───────────┴────────────────────────┘

       <u>from</u> <u>X</u> <u>import</u> <u>Y</u> <u>as</u> <u>Z</u>
                            ┌──────┬─────────┬────────────────────┬────────────────────────┐
                            │ name │ kind    │ role               │ other       noticeable │
                            │      │         │                    │ fields                 │
                            ├──────┼─────────┼────────────────────┼────────────────────────┤
                            │ <u>X</u>    │ module  │ namespace          │ N/A                    │
                            ├──────┼─────────┼────────────────────┼────────────────────────┤
                            │ <u>Y</u>    │ unknown │ indirectlyImported │ scope:module:<u>X</u>         │
                            ├──────┼─────────┼────────────────────┼────────────────────────┤
                            │ <u>Z</u>    │ unknown │ definition         │ nameref:unknown:<u>Y</u>      │
                            └──────┴─────────┴────────────────────┴────────────────────────┘

   <b>Examples</b>
       "input.py"

          import X0

       "output.tags" with "--options=NONE -o - --extras=+r --fields=+rzK input.py"

          X0      input.py        /^import X0$/;" kind:module     roles:imported

       A tag for an imported module has <b>module</b> kind with <b>imported</b> role.  The module is not defined here;  it  is
       defined  in  another file. So the tag for the imported module is a reference tag; specify <b>--extras=+r</b> (or
       <b>--extras=+{reference}</b>) option for tagging it.  "roles:" field enabled with <b>--fields=+r</b> is  for  recording
       the module is "imported" to the tag file.

       "input.py"

          import X1 as Y1

       "output.tags" with "--options=NONE -o - --extras=+r --fields=+rzK --fields-Python=+{nameref} input.py"

          X1      input.py        /^import X1 as Y1$/;"   kind:module     roles:indirectlyImported
          Y1      input.py        /^import X1 as Y1$/;"   kind:namespace  roles:def       nameref:module:X1

       "Y1"  introduces a new name and is defined here. So "Y1" is tagged as a definition tag.  "X1" is imported
       in a way that its name cannot be used in this source file. For letting client tools know  that  the  name
       cannot  be  used,  <b>indirectlyImported</b>  role is assigned for "X1".  "Y1" is the name for accessing objects
       defined in the module imported via "X1".  For recording this relationship, <b>nameref:</b> field is attached  to
       the  tag of "Y1".  Instead of <b>module</b> kind, <b>namespace</b> kind is assigned to "Y1" because "Y1" itself isn't a
       module.

       "input.py"

          from X2 import *

       "output.tags" with "--options=NONE -o - --extras=+r --fields=+rzK input.py"

          X2      input.py        /^from X2 import *$/;"  kind:module     roles:namespace

       The module is not defined here; it is defined in another file. So the tag for the imported  module  is  a
       reference  tag. Unlike "X0" in "import X0", "X2" may not be used because the names defined in "X2" can be
       used in this source file. To represent the difference <b>namespace</b> role  is  attached  to  "X2"  instead  of
       <b>imported</b>.

       "input.py"

          from X3 import Y3

       "output.tags" with "--options=NONE -o - --extras=+r --fields=+rzKZ input.py"

          X3      input.py        /^from X3 import Y3$/;" kind:module     roles:namespace
          Y3      input.py        /^from X3 import Y3$/;" kind:unknown    scope:module:X3 roles:imported

       "Y3"  is  a  name  for  a  language  object  defined  in  "X3" module. "scope:module:X3" attached to "Y3"
       represents this relation between "Y3" and "X3". ctags assigns <b>unknown</b> kind to "Y3" because  ctags  cannot
       know whether "Y3" is a class, a variable, or a function from the input file.

       "input.py"

          from X4 import Y4 as Z4

       "output.tags" with "--options=NONE -o - --extras=+r --fields=+rzKZ input.py"

          X4      input.py        /^from X4 import Y4 as Z4$/;"   kind:module     roles:namespace
          Y4      input.py        /^from X4 import Y4 as Z4$/;"   kind:unknown    scope:module:X4 roles:indirectlyImported
          Z4      input.py        /^from X4 import Y4 as Z4$/;"   kind:unknown    roles:def       nameref:unknown:Y4

       "Y4" is similar to "Y3" of "from X3 import Y3" but the name cannot be used here.  <b>indirectlyImported</b> role
       assigned  to  "Y4" representing this. "Z4" is the name for accessing the language object named in "Y4" in
       "X4" module. "nameref:unknown:Y4" attached to "Z4" and "scope:module:X4" attached to "Y4"  represent  the
       relations.

</pre><h4><b>LAMBDA</b> <b>EXPRESSION</b> <b>AND</b> <b>TYPE</b> <b>HINT</b></h4><pre>
   <b>Summary</b>
       <u>id</u> <u>=</u> <u>lambda</u> <u>var0:</u> <u>var0</u>
                                ┌──────┬──────────┬────────────┬────────────────────────┐
                                │ name │ kind     │ role       │ other       noticeable │
                                │      │          │            │ fields                 │
                                ├──────┼──────────┼────────────┼────────────────────────┤
                                │ <u>id</u>   │ function │ definition │ signature:(<u>var0</u>)       │
                                └──────┴──────────┴────────────┴────────────────────────┘

       <u>id_t:</u> <u>Callable[[int],</u> <u>int]</u> <u>=</u> <u>lambda</u> <u>var1:</u> <u>var1</u>
                        ┌───────────┬──────────┬────────────┬──────────────────────────────────┐
                        │ name      │ kind     │ role       │ other       noticeable           │
                        │           │          │            │ fields                           │
                        ├───────────┼──────────┼────────────┼──────────────────────────────────┤
                        │ <u>id_t</u>      │ variable │ definition │ typeref:typename:<u>Callable[[int],</u> │
                        │           │          │            │ <u>int]</u>                             │
                        │           │          │            │ nameref:function:anonFuncN       │
                        ├───────────┼──────────┼────────────┼──────────────────────────────────┤
                        │ anonFuncN │ function │ definition │ signature:(<u>var1</u>)                 │
                        └───────────┴──────────┴────────────┴──────────────────────────────────┘

   <b>Examples</b>
       "input.py"

          from typing import Callable
          id = lambda var0: var0
          id_t: Callable[[int], int] = lambda var1: var1

       "output.tags"    with    "--options=NONE   -o   -   --sort=no   --fields=+KS   --fields-Python=+{nameref}
       --extras=+{anonymous} input.py"

          id      input.py        /^id = lambda var0: var0$/;"    function        signature:(var0)
          id_t    input.py        /^id_t: Callable[[int], int] = lambda var1: var1$/;"\
                  variable        typeref:typename:Callable[[int], int]   nameref:function:anonFunc84011d2c0101
          anonFunc84011d2c0101    input.py        /^id_t: Callable[[int], int] = lambda var1: var1$/;"\
                  function        signature:(var1)

       If a variable ("id") with no type hint is initialized with a lambda expression,  ctags  assigns  <b>function</b>
       kind for the tag of "id".

       If  a  variable ("id_t") with a type hint is initialized with a lambda expression, ctags assigns <b>variable</b>
       kind for the tag of "id_t" with <b>typeref:</b> and <b>nameref:</b> fields. ctags fills <b>typeref:</b> field with  the  value
       of the type hint. The way of filling <b>nameref:</b> is a bit complicated.

       For  the  lambda expression used in initializing the type-hint'ed variable, ctags creates <b>anonymous</b> extra
       tag ("anonFunc84011d2c0101"). ctags fills the <b>nameref:</b> field of "id_t" with the name of  <b>anonymous</b>  extra
       tag: "nameref:function:anonFunc84011d2c0101".

       You  may  think  why  ctags does so complicated, and why ctags doesn't emit following tags output for the
       input:

          id      input.py        /^id = \\$/;"   function        signature:(var0)
          id_t    input.py        /^id_t: \\$/;"  function        typeref:typename:Callable[[int], int]   signature:(var1)

       There is a reason. The other languages of ctags obey the following rule: ctags fills <b>typeref:</b> field for a
       tag of a callable object (like function) with the type of its return value. If we consider  "id_t"  is  a
       function,   its   <b>typeref:</b>   field  should  have  "typename:int".  However,  for  filling  <b>typeref:</b>  with
       "typename:int", ctags has to analyze "Callable[[int], int]" deeper. We don't want to do so.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <a href="../man1/ctags.1.html">ctags</a>(1), <a href="../man7/ctags-client-tools.7.html">ctags-client-tools</a>(7), <a href="../man7/ctags-lang-iPythonCell.7.html">ctags-lang-iPythonCell</a>(7)

5.9.0                                                                                       <u><a href="../man7/CTAGS-LANG-PYTHON.7.html">CTAGS-LANG-PYTHON</a></u>(7)
</pre>
 </div>
</div></section>
</div>
</body>
</html>