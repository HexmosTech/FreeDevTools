<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>This  manual  page  is part of the POSIX Programmer's Manual.  The Linux implementation of this interface</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/manpages-posix-dev">manpages-posix-dev_2017a-2_all</a> <br><br><pre>
</pre><h4><b>PROLOG</b></h4><pre>
       This  manual  page  is part of the POSIX Programmer's Manual.  The Linux implementation of this interface
       may differ (consult the corresponding Linux manual page for details of Linux behavior), or the  interface
       may not be implemented on Linux.

</pre><h4><b>NAME</b></h4><pre>
       sys/stat.h — data returned by the stat() function

</pre><h4><b>SYNOPSIS</b></h4><pre>
       #include &lt;sys/stat.h&gt;

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The  <u>&lt;sys/stat.h&gt;</u>  header  shall  define  the structure of the data returned by the <u>fstat</u>(), <u>lstat</u>(), and
       <u>stat</u>() functions.

       The <u>&lt;sys/stat.h&gt;</u> header shall define the <b>stat</b> structure, which  shall  include  at  least  the  following
       members:

           dev_t st_dev            Device ID of device containing file.
           ino_t st_ino            File serial number.
           mode_t st_mode          Mode of file (see below).
           nlink_t st_nlink        Number of hard links to the file.
           uid_t st_uid            User ID of file.
           gid_t st_gid            Group ID of file.
           dev_t st_rdev           Device ID (if file is character or block special).
           off_t st_size           For regular files, the file size in bytes.
                                   For symbolic links, the length in bytes of the
                                   pathname contained in the symbolic link.
                                   For a shared memory object, the length in bytes.
                                   For a typed memory object, the length in bytes.
                                   For other file types, the use of this field is
                                   unspecified.
           struct timespec st_atim Last data access timestamp.
           struct timespec st_mtim Last data modification timestamp.
           struct timespec st_ctim Last file status change timestamp.
           blksize_t st_blksize    A file system-specific preferred I/O block size
                                   for this object. In some file system types, this
                                   may vary from file to file.
           blkcnt_t st_blocks      Number of blocks allocated for this object.

       The <u>st_ino</u> and <u>st_dev</u> fields taken together uniquely identify the file within the system.

       The  <u>&lt;sys/stat.h&gt;</u>  header  shall  define  the  <b>blkcnt_t</b>, <b>blksize_t</b>, <b>dev_t</b>, <b>ino_t</b>, <b>mode_t</b>, <b>nlink_t</b>, <b>uid_t</b>,
       <b>gid_t</b>, <b>off_t</b>, and <b>time_t</b> types as described in <u>&lt;sys/types.h&gt;</u>.

       The <u>&lt;sys/stat.h&gt;</u> header shall define the <b>timespec</b> structure as described in  <u>&lt;time.h&gt;</u>.   Times  shall  be
       given in seconds since the Epoch.

       Which  structure members have meaningful values depends on the type of file. For further information, see
       the descriptions of <u>fstat</u>(), <u>lstat</u>(), and <u>stat</u>() in the System Interfaces volume of POSIX.1‐2017.

       For compatibility with earlier versions of this standard, the <u>st_atime</u> macro shall be  defined  with  the
       value  <u>st_atim.tv_sec</u>.   Similarly,  <u>st_ctime</u>  and  <u>st_mtime</u>  shall  be defined as macros with the values
       <u>st_ctim.tv_sec</u> and <u>st_mtim.tv_sec</u>, respectively.

       The <u>&lt;sys/stat.h&gt;</u> header shall define the following symbolic constants for the file types encoded in  type
       <b>mode_t</b>.  The values shall be suitable for use in <b>#if</b> preprocessing directives:

       S_IFMT      Type of file.

                   S_IFBLK     Block special.

                   S_IFCHR     Character special.

                   S_IFIFO     FIFO special.

                   S_IFREG     Regular.

                   S_IFDIR     Directory.

                   S_IFLNK     Symbolic link.

                   S_IFSOCK    Socket.

       The  <u>&lt;sys/stat.h&gt;</u>  header shall define the following symbolic constants for the file mode bits encoded in
       type <b>mode_t</b>, with the indicated numeric values. These macros shall expand to an expression  which  has  a
       type  that  allows  them  to  be  used,  either singly or OR'ed together, as the third argument to <u>open</u>()
       without the need for a <b>mode_t</b> cast. The values shall be suitable for use in <b>#if</b> preprocessing directives.
                      ┌─────────┬───────────────┬──────────────────────────────────────────────┐
                      │  <b>Name</b>   │ <b>Numeric</b> <b>Value</b> │                 <b>Description</b>                  │
                      ├─────────┼───────────────┼──────────────────────────────────────────────┤
                      │ S_IRWXU │      0700     │ Read, write, execute/search by owner.        │
                      │ S_IRUSR │      0400     │ Read permission, owner.                      │
                      │ S_IWUSR │      0200     │ Write permission, owner.                     │
                      │ S_IXUSR │      0100     │ Execute/search permission, owner.            │
                      ├─────────┼───────────────┼──────────────────────────────────────────────┤
                      │ S_IRWXG │       070     │ Read, write, execute/search by group.        │
                      │ S_IRGRP │       040     │ Read permission, group.                      │
                      │ S_IWGRP │       020     │ Write permission, group.                     │
                      │ S_IXGRP │       010     │ Execute/search permission, group.            │
                      ├─────────┼───────────────┼──────────────────────────────────────────────┤
                      │ S_IRWXO │        07     │ Read, write, execute/search by others.       │
                      │ S_IROTH │        04     │ Read permission, others.                     │
                      │ S_IWOTH │        02     │ Write permission, others.                    │
                      │ S_IXOTH │        01     │ Execute/search permission, others.           │
                      ├─────────┼───────────────┼──────────────────────────────────────────────┤
                      │ S_ISUID │     04000     │ Set-user-ID on execution.                    │
                      │ S_ISGID │     02000     │ Set-group-ID on execution.                   │
                      │ S_ISVTX │     01000     │ On directories, restricted deletion flag.    │
                      └─────────┴───────────────┴──────────────────────────────────────────────┘

       The following macros shall be provided to test whether a file is of  the  specified  type.  The  value  <u>m</u>
       supplied  to the macros is the value of <u>st_mode</u> from a <b>stat</b> structure. The macro shall evaluate to a non-
       zero value if the test is true; 0 if the test is false.

       S_ISBLK(<u>m</u>)    Test for a block special file.

       S_ISCHR(<u>m</u>)    Test for a character special file.

       S_ISDIR(<u>m</u>)    Test for a directory.

       S_ISFIFO(<u>m</u>)   Test for a pipe or FIFO special file.

       S_ISREG(<u>m</u>)    Test for a regular file.

       S_ISLNK(<u>m</u>)    Test for a symbolic link.

       S_ISSOCK(<u>m</u>)   Test for a socket.

       The implementation may implement message queues, semaphores, or shared memory objects  as  distinct  file
       types.  The following macros shall be provided to test whether a file is of the specified type. The value
       of the <u>buf</u> argument supplied to the macros is a pointer to a <b>stat</b> structure. The macro shall evaluate  to
       a  non-zero  value  if the specified object is implemented as a distinct file type and the specified file
       type is contained in the <b>stat</b> structure referenced by <u>buf</u>.  Otherwise, the macro shall evaluate to zero.

       S_TYPEISMQ(<u>buf</u>)
                     Test for a message queue.

       S_TYPEISSEM(<u>buf</u>)
                     Test for a semaphore.

       S_TYPEISSHM(<u>buf</u>)
                     Test for a shared memory object.

       The implementation may implement typed memory objects as distinct file types,  and  the  following  macro
       shall  test whether a file is of the specified type. The value of the <u>buf</u> argument supplied to the macros
       is a pointer to a <b>stat</b> structure. The macro shall evaluate to a non-zero value if the specified object is
       implemented as a distinct file type and the specified file  type  is  contained  in  the  <b>stat</b>  structure
       referenced by <u>buf</u>.  Otherwise, the macro shall evaluate to zero.

       S_TYPEISTMO(<u>buf</u>)
                     Test macro for a typed memory object.

       The  <u>&lt;sys/stat.h&gt;</u> header shall define the following symbolic constants as distinct integer values outside
       of the range [0,999999999], for use with the <u>futimens</u>() and <u>utimensat</u>() functions: UTIME_NOW UTIME_OMIT

       The following shall be declared as functions and may also be defined as macros. Function prototypes shall
       be provided.

           int    chmod(const char *, mode_t);
           int    fchmod(int, mode_t);
           int    fchmodat(int, const char *, mode_t, int);
           int    fstat(int, struct stat *);
           int    fstatat(int, const char *restrict, struct stat *restrict, int);
           int    futimens(int, const struct timespec [2]);
           int    lstat(const char *restrict, struct stat *restrict);
           int    mkdir(const char *, mode_t);
           int    mkdirat(int, const char *, mode_t);
           int    mkfifo(const char *, mode_t);
           int    mkfifoat(int, const char *, mode_t);
           int    mknod(const char *, mode_t, dev_t);
           int    mknodat(int, const char *, mode_t, dev_t);
           int    stat(const char *restrict, struct stat *restrict);
           mode_t <a href="../manmode_t/umask.mode_t.html">umask</a>(mode_t);
           int    utimensat(int, const char *, const struct timespec [2], int);

       Inclusion of the <u>&lt;sys/stat.h&gt;</u> header may make visible all symbols from the <u>&lt;time.h&gt;</u> header.

       <u>The</u> <u>following</u> <u>sections</u> <u>are</u> <u>informative.</u>

</pre><h4><b>APPLICATION</b> <b>USAGE</b></h4><pre>
       Use of the macros is recommended for determining the type of a file.

</pre><h4><b>RATIONALE</b></h4><pre>
       A conforming C-language application must include <u>&lt;sys/stat.h&gt;</u> for functions that have arguments or return
       values of type <b>mode_t</b>, so that symbolic values for that type can be used.  An  alternative  would  be  to
       require that these constants are also defined by including <u>&lt;sys/types.h&gt;</u>.

       The  S_ISUID  and  S_ISGID  bits  may  be  cleared  on  any write, not just on <u>open</u>(), as some historical
       implementations do.

       System calls that update the time  entry  fields  in  the  <b>stat</b>  structure  must  be  documented  by  the
       implementors.  POSIX-conforming  systems  should not update the time entry fields for functions listed in
       the System Interfaces volume of POSIX.1‐2017 unless the standard requires that they  do,  except  in  the
       case of documented extensions to the standard.

       Upon  assignment,  file  timestamps  are  immediately  converted  to the resolution of the file system by
       truncation (i.e., the recorded time can be older than the actual time). For example, if the  file  system
       resolution  is  1  microsecond,  then a conforming <u>stat</u>() must always return an <u>st_mtim.tv_nsec</u> that is a
       multiple of 1000. Some older  implementations  returned  higher-resolution  timestamps  while  the  <u>inode</u>
       information  was cached, and then spontaneously truncated the <u>tv_nsec</u> fields when they were stored to and
       retrieved from disk, but this behavior does not conform.

       Note that <u>st_dev</u> must be unique within a Local Area Network (LAN) in a ``system''  made  up  of  multiple
       computers' file systems connected by a LAN.

       Networked  implementations  of a POSIX-conforming system must guarantee that all files visible within the
       file tree (including parts of the tree that may be remotely mounted from other machines on  the  network)
       on each individual processor are uniquely identified by the combination of the <u>st_ino</u> and <u>st_dev</u> fields.

       The  unit  for  the  <u>st_blocks</u>  member  of the <b>stat</b> structure is not defined within POSIX.1‐2008. In some
       implementations it is 512 bytes. It may differ on a file system basis. There is  no  correlation  between
       values of the <u>st_blocks</u> and <u>st_blksize</u>, and the <u>f_bsize</u> (from <u>&lt;sys/statvfs.h&gt;</u>) structure members.

       Traditionally,  some  implementations defined the multiplier for <u>st_blocks</u> in <u>&lt;sys/param.h&gt;</u> as the symbol
       DEV_BSIZE.

       Some earlier versions of this standard did  not  specify  values  for  the  file  mode  bit  macros.  The
       expectation  was  that some implementors might choose to use a different encoding for these bits than the
       traditional one, and that new applications would use symbolic file modes instead of numeric. This version
       of the standard specifies the traditional encoding, in recognition that nearly 20 years after  the  first
       publication  of  this  standard numeric file modes are still in widespread use by application developers,
       and that all conforming implementations still use the traditional encoding.

</pre><h4><b>FUTURE</b> <b>DIRECTIONS</b></h4><pre>
       No new S_IFMT symbolic names for the file type values of <b>mode_t</b> will be defined by POSIX.1‐2008;  if  new
       file types are required, they will only be testable through <u>S_ISxx</u>() or <u>S_TYPEISxxx</u>() macros instead.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b>&lt;sys_statvfs.h&gt;</b>, <b>&lt;sys_types.h&gt;</b>, <b>&lt;time.h&gt;</b>

       The System Interfaces volume of POSIX.1‐2017, <u>chmod</u>(), <u>fchmod</u>(), <u>fstat</u>(), <u>fstatat</u>(), <u>futimens</u>(), <u>mkdir</u>(),
       <u>mkfifo</u>(), <u>mknod</u>(), <u>umask</u>()

</pre><h4><b>COPYRIGHT</b></h4><pre>
       Portions of this text are reprinted and reproduced in electronic form from IEEE Std 1003.1-2017, Standard
       for  Information  Technology  --  Portable  Operating  System  Interface  (POSIX),  The  Open  Group Base
       Specifications Issue 7, 2018 Edition, Copyright (C) 2018 by the Institute of Electrical  and  Electronics
       Engineers, Inc and The Open Group.  In the event of any discrepancy between this version and the original
       IEEE  and The Open Group Standard, the original IEEE and The Open Group Standard is the referee document.
       The original Standard can be obtained online at <a href="http://www.opengroup.org/unix/online.html">http://www.opengroup.org/unix/online.html</a> .

       Any typographical or formatting errors that appear in this page are most likely to have  been  introduced
       during   the   conversion  of  the  source  files  to  man  page  format.  To  report  such  errors,  see
       https://www.kernel.org/doc/man-pages/reporting_bugs.html .

IEEE/The Open Group                                   2017                                    <u><a href="../man7POSIX/sys_stat.h.7POSIX.html">sys_stat.h</a></u>(7POSIX)
</pre>
 </div>
</div></section>
</div>
</body>
</html>