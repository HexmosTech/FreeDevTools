<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>visir_img_reduce  -  Combines  a  stack  of chopped, jittered and/or nodded exposures and can compute the</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/noble/+package/cpl-plugin-visir-doc">cpl-plugin-visir-doc_4.4.2+dfsg-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       visir_img_reduce  -  Combines  a  stack  of chopped, jittered and/or nodded exposures and can compute the
       sensitivity for standard star observations

</pre><h4><b>SYNOPSIS</b></h4><pre>
       esorex <b>visir_img_reduce</b> [OPTIONS] FILE.sof

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This recipe recombines the data observed in chopping/nodding  or  chopping  or  nodding  modes  into  one
       combined image using optionally cross-correlation methods.

       The   files  listed  in  the  Set  Of  Frames  (sof-file)  must  be  tagged:  VISIR-observation-file.fits
       IM_OBS_CHO_NOD_JIT   or   VISIR-observation-file.fits   IM_OBS_CHO_JIT   or   VISIR-observation-file.fits
       IM_OBS_NOD_JIT   or   VISIR-observation-file.fits  IM_OBS_DIR_JIT  or  VISIR-observation-file.fits  BURST
       VISIR-Standard-star-catalog   IMG_STD_CATALOG   (optional)   VISIR-linearty-table.fits    LINEARITY_TABLE
       (optional)  Additionally,  a  bad  pixel map with a PRO.CATG of IMG_BPM may be added to the Set Of Frames
       with tag: BPM.

</pre><h4><b>OPTIONS</b></h4><pre>
       <b>--planestart</b> <u>&lt;int&gt;</u>
              Plane number to start repacking from in each nod cycle,earlier planes are skipped. (int;  default:
              0).    The    full    name    of    this   option   for   the   EsoRex   configuration   file   is
              <b>visir.visir_util_repack.planestart</b> [default = <u>0</u>].

       <b>--planelimit</b> <u>&lt;int&gt;</u>
              Limit number of processed inputplanes. It will repack until at least this number of  input  images
              have  been  processed  or  the  full dataset has been repacked. Always full chop cycles need to be
              repacked so the number is adjusted upward to the next multiple of images per chop cycle.  &lt;= 0 for
              no limit. (int; default: -1). The full name of this option for the EsoRex  configuration  file  is
              <b>visir.visir_util_repack.planelimit</b> [default = <u>-1</u>].

       <b>--trimlow</b> <u>&lt;int&gt;</u>
              Burst  data only. Number of additional planes to cut from before each plane with chopper movement.
              (int;  default:  0).  The  full  name  of  this  option  for  the  EsoRex  configuration  file  is
              <b>visir.visir_util_repack.trimlow</b> [default = <u>0</u>].

       <b>--trimhigh</b> <u>&lt;int&gt;</u>
              Burst  data  only. Number of additional planes to cut from after each plane with chopper movement.
              A value of -1 does not skip the plane of the movement. (int; default: 0). The full  name  of  this
              option for the EsoRex configuration file is <b>visir.visir_util_repack.trimhigh</b> [default = <u>0</u>].

       <b>--lincorrect</b> <u>&lt;bool&gt;</u>
              Apply  linearity correction. Should only be enabled on high flux observations, may degrade results
              otherwise. (bool; default: False). The full name of this option for the EsoRex configuration  file
              is <b>visir.visir_util_repack.lincorrect</b> [default = <u>False</u>].

       <b>--template</b> <u>&lt;str&gt;</u>
              Correlation template used to detect shifts and reject bad images.  If none given an averaged image
              is  used (str; default: ´NONE´). The full name of this option for the EsoRex configuration file is
              <b>visir.visir_util_detect_shift.template</b> [default = <u>NONE</u>].

       <b>--min-correlation</b> <u>&lt;float&gt;</u>
              Minimal correlation to the template required to be accepted (float; default: 0.5). The  full  name
              of  this option for the EsoRex configuration file is <b>visir.visir_util_detect_shift.min-correlation</b>
              [default = <u>0.5</u>].

       <b>--max-shift</b> <u>&lt;float&gt;</u>
              Maximal allowed object shift for an image to be accepted (float; default: 10.0). The full name  of
              this  option for the EsoRex configuration file is <b>visir.visir_util_detect_shift.max-shift</b> [default
              = <u>10.0</u>].

       <b>--max-mad</b> <u>&lt;float&gt;</u>
              Maximal allowed median absolute deviation for an image to be  accepted.   &lt;=  0  equals  no  limit
              (float;  default:  0.0).  The  full  name  of  this  option  for  the EsoRex configuration file is
              <b>visir.visir_util_detect_shift.max-mad</b> [default = <u>0.0</u>].

       <b>--naverage</b> <u>&lt;int&gt;</u>
              Number of planes to average before attempting to detect the shifts.  (int; default: 1).  The  full
              name  of  this  option for the EsoRex configuration file is <b>visir.visir_util_detect_shift.naverage</b>
              [default = <u>1</u>].

       <b>--method</b> <u>&lt;str&gt;</u>
              Method to determine beam shifts.  xcorrelate: use the cross correlation shift.  brightest: use the
              position of the brightest pixel (str; default: ´xcorrelate´). The full name of this option for the
              EsoRex configuration file is <b>visir.visir_util_detect_shift.method</b> [default = <u>xcorrelate</u>].

       <b>--no-shift</b> <u>&lt;bool&gt;</u>
              Sets whether to apply the determined shifts in following recipes. Set to TRUE of shifts appear too
              large. (bool; default: False). The full name of this option for the EsoRex configuration  file  is
              <b>visir.visir_util_detect_shift.no-shift</b> [default = <u>False</u>].

       <b>--no-reject</b> <u>&lt;bool&gt;</u>
              If  true  images  with  bad statistics will not be rejected and no shift correction is done (bool;
              default:  True).  The  full  name  of  this  option  for  the   EsoRex   configuration   file   is
              <b>visir.visir_util_detect_shift.no-reject</b> [default = <u>True</u>].

       <b>--beampos</b> <u>&lt;str&gt;</u>
              Define  the  positions  of  the beams. These positions are cut by the window to extract the single
              beam images.  Format: sign:x,y,window;sign:x,y,window;...   where sign is "pos" or "neg" depending
              on whether the beam is positive or negative.  The window is optional and defines the size  of  the
              cut  image around the beam. The default window is the chop throw.  E.g.: pos:50,60;neg:50,160;  By
              default autodetection is attempted.  (str; default: ´NONE´). The full name of this option for  the
              EsoRex configuration file is <b>visir.visir_util_detect_shift.beampos</b> [default = <u>NONE</u>].

       <b>--eccmax</b> <u>&lt;float&gt;</u>
              The  maximum  eccentricity  allowed  in the combination of the three (in parallel nod/chopping) or
              four (in perpendicular nod/chopping) beams.  In parallel  mode,  three  perfectly  aligned  points
              spaced  with  the chopnod throw will have eccentricity 0, while in perpedicular mode a square with
              the chopnod throw as the side length will have eccentricity 0 (float; default: 3.0). The full name
              of this option for the EsoRex configuration file is <b>visir.visir_util_detect_shift.eccmax</b>  [default
              = <u>3.0</u>].

       <b>--keepfrac</b> <u>&lt;float&gt;</u>
              The  fraction of pixels to keep for the initialmedian (float; default: 0.9). The full name of this
              option for the EsoRex configuration file is <b>visir.visir_util_clip.keepfrac</b> [default = <u>0.9</u>].

       <b>--kappa</b> <u>&lt;float&gt;</u>
              Clip outside + or - kappa * sigma (the standard deviation) (float; default: 5.0). The full name of
              this option for the EsoRex configuration file is <b>visir.visir_util_clip.kappa</b> [default = <u>5.0</u>].

       <b>--maxite</b> <u>&lt;int&gt;</u>
              Max number of kappa-sigma clipping iterations (int; default: 3). The full name of this option  for
              the EsoRex configuration file is <b>visir.visir_util_clip.maxite</b> [default = <u>3</u>].

       <b>--shift-beams</b> <u>&lt;bool&gt;</u>
              Account  for  movements of the object defined in CRPIX[12] (bool; default: True). The full name of
              this option for the EsoRex configuration  file  is  <b>visir.visir_util_clip.shift-beams</b>  [default  =
              <u>True</u>].

       <b>--error-source</b> <u>&lt;str&gt;</u>
              Defines  the  way errors are generated:  img-stdev: stdev of image timeseries: stdev of each pixel
              over the time axis of the cube  none: no error generation (str; default:  ´img-stdev´).  The  full
              name  of  this  option  for  the  EsoRex  configuration file is <b>visir.visir_util_clip.error-source</b>
              [default = <u>img-stdev</u>].

       <b>--badimage</b> <u>&lt;float&gt;</u>
              If percentage of clipped pixels above this  value  the  whole  image  is  considered  bad  (float;
              default:   0.2).   The   full   name   of  this  option  for  the  EsoRex  configuration  file  is
              <b>visir.visir_util_clip.badimage</b> [default = <u>0.2</u>].

       <b>--output-all</b> <u>&lt;bool&gt;</u>
              Output a coadded image for each input file in addition to the complete coaddition. (bool; default:
              False).   The   full   name   of   this   option   for   the   EsoRex   configuration   file    is
              <b>visir.visir_util_run_swarp.output-all</b> [default = <u>False</u>].

       <b>--extra_config</b> <u>&lt;str&gt;</u>
              Additional  configuration  parameters (str; default: ´NONE´). The full name of this option for the
              EsoRex configuration file is <b>visir.visir_util_run_swarp.extra_config</b> [default = <u>NONE</u>].

       <b>--config_fname</b> <u>&lt;str&gt;</u>
              Swarp       configure       file        name.        (str;        default:        ´/usr/share/cpl-
              plugins/visir-4.4.2/config/visir_default.swarp´).  The  full  name  of  this option for the EsoRex
              configuration      file      is      <b>visir.visir_util_run_swarp.config_fname</b>      [default       =
              <u>/usr/share/cpl-plugins/visir-4.4.2/config/visir_default.swarp</u>].

       <b>--nprocs</b> <u>&lt;int&gt;</u>
              Maximum  number  of  swarp  processes that can be spawned simultaneously.  (int; default: -1). The
              full name of this option for the EsoRex configuration  file  is  <b>visir.visir_util_run_swarp.nprocs</b>
              [default = <u>-1</u>].

       <b>--jy_val</b> <u>&lt;float&gt;</u>
              The flux of the standard star in Jansky (float; default: -999.0). The full name of this option for
              the EsoRex configuration file is <b>visir.visir_old_img_phot.jy_val</b> [default = <u>-999.0</u>].

       <b>--radii</b> <u>&lt;str&gt;</u>
              Radii  :  star_max  bg_int bg_ext (str; default: ´20-20-30´). The full name of this option for the
              EsoRex configuration file is <b>visir.visir_old_img_phot.radii</b> [default = <u>20-20-30</u>].

       <b>--delete-temp</b> <u>&lt;bool&gt;</u>
              Delete temporary files created during processing (bool; default: True).  The  full  name  of  this
              option for the EsoRex configuration file is <b>visir.visir_img_reduce.delete-temp</b> [default = <u>True</u>].

       Note  that  it  is  possible to create a configuration file containing these options, along with suitable
       default values. Please refer to the details provided by the 'esorex --help' command.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       The full documentation for the visir pipeline can be downloaded as a PDF file using the following URL:

              <b><a href="ftp://ftp.eso.org/pub/dfs/pipelines/visir/visir-pipeline-manual-1.4.pdf">ftp://ftp.eso.org/pub/dfs/pipelines/visir/visir-pipeline-manual-1.4.pdf</a></b>

       An   overview   over   the   existing   ESO   pipelines    can    be    found    on    the    web    page
       <b>https://www.eso.org/sci/software/pipelines/</b>.

       Basic documentation about the EsoRex program can be found at the esorex (1) man page.

       It   is   possible   to   call   the   pipelines   from   python   using  the  python-cpl  package.   See
       <b>https://packages.python.org/python-cpl/index.html</b> for further information.

       The other recipes of the  visir  pipeline  are  <u><a href="../man7/visir_img_dark.7.html">visir_img_dark</a></u>(7),  <u><a href="../man7/visir_img_ff.7.html">visir_img_ff</a></u>(7),  <u><a href="../man7/visir_img_trans.7.html">visir_img_trans</a></u>(7),
       <u><a href="../man7/visir_old_img_combine.7.html">visir_old_img_combine</a></u>(7),    <u><a href="../man7/visir_old_img_phot.7.html">visir_old_img_phot</a></u>(7),    <u><a href="../man7/visir_old_spc_obs.7.html">visir_old_spc_obs</a></u>(7),    <u><a href="../man7/visir_old_spc_obs_ech.7.html">visir_old_spc_obs_ech</a></u>(7),
       <u><a href="../man7/visir_old_spc_phot.7.html">visir_old_spc_phot</a></u>(7),   <u><a href="../man7/visir_old_spc_phot_ech.7.html">visir_old_spc_phot_ech</a></u>(7),   <u><a href="../man7/visir_old_spc_wcal.7.html">visir_old_spc_wcal</a></u>(7),   <u><a href="../man7/visir_old_spc_wcal_ech.7.html">visir_old_spc_wcal_ech</a></u>(7),
       <u><a href="../man7/visir_old_util_destripe.7.html">visir_old_util_destripe</a></u>(7),     <u><a href="../man7/visir_spc_reduce.7.html">visir_spc_reduce</a></u>(7),    <u><a href="../man7/visir_util_apply_calib.7.html">visir_util_apply_calib</a></u>(7),    <u><a href="../man7/visir_util_clip.7.html">visir_util_clip</a></u>(7),
       <u><a href="../man7/visir_util_convert_weight.7.html">visir_util_convert_weight</a></u>(7), <u><a href="../man7/visir_util_detect_shift.7.html">visir_util_detect_shift</a></u>(7), <u><a href="../man7/visir_util_img_std_cat.7.html">visir_util_img_std_cat</a></u>(7),  <u><a href="../man7/visir_util_join.7.html">visir_util_join</a></u>(7),
       <u><a href="../man7/visir_util_qc.7.html">visir_util_qc</a></u>(7),      <u><a href="../man7/visir_util_repack.7.html">visir_util_repack</a></u>(7),      <u><a href="../man7/visir_util_run_swarp.7.html">visir_util_run_swarp</a></u>(7),     <u><a href="../man7/visir_util_spc_std_cat.7.html">visir_util_spc_std_cat</a></u>(7),
       <u><a href="../man7/visir_util_spc_txt2fits.7.html">visir_util_spc_txt2fits</a></u>(7), <u><a href="../man7/visir_util_undistort.7.html">visir_util_undistort</a></u>(7)

</pre><h4><b>VERSION</b></h4><pre>
       visir_img_reduce 4.4.2

</pre><h4><b>AUTHOR</b></h4><pre>
       Julian Taylor &lt;<a href="mailto:jtaylor@partner.eso.org">jtaylor@partner.eso.org</a>&gt;

</pre><h4><b>BUG</b> <b>REPORTS</b></h4><pre>
       Please report any problems to <a href="mailto:jtaylor@partner.eso.org">jtaylor@partner.eso.org</a>. Alternatively, you may send a report  to  the  ESO
       User Support Department &lt;<a href="mailto:usd-help@eso.org">usd-help@eso.org</a>&gt;.

</pre><h4><b>LICENSE</b></h4><pre>
       This file is part of the VISIR Instrument Pipeline Copyright (C) 2015 European Southern Observatory

       This  program  is  free  software;  you  can  redistribute it and/or modify it under the terms of the GNU
       General Public License as published by the Free Software Foundation; either version 2 of the License,  or
       (at your option) any later version.

       This  program  is  distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even
       the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General  Public
       License for more details.

       You  should have received a copy of the GNU General Public License along with this program; if not, write
       to the Free Software Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA  02111-1307  USA

visir_img_reduce                                      4.4.2                                  <u><a href="../man7/VISIR_IMG_REDUCE.7.html">VISIR_IMG_REDUCE</a></u>(7)
</pre>
 </div>
</div></section>
</div>
</body>
</html>