<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VSL - Varnish Shared Memory Logging</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/varnish">varnish_7.7.0-3_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       VSL - Varnish Shared Memory Logging

</pre><h4><b>OVERVIEW</b></h4><pre>
       This  document describes the format and content of all the Varnish shared memory logging tags. These tags
       are used by the <a href="../man1/varnishlog.1.html">varnishlog</a>(1), <a href="../man1/varnishtop.1.html">varnishtop</a>(1), etc.  logging tools supplied with Varnish.

   <b>VSL</b> <b>tags</b>
       <b>BackendClose</b> <b>-</b> <b>Backend</b> <b>connection</b> <b>closed</b>
              Logged when a backend connection is closed.

              The format is:

                 %d %s %s [ %s ]
                 |  |  |    |
                 |  |  |    +- Optional reason, see SessClose for explanation
                 |  |  +------ "close" or "recycle"
                 |  +--------- Backend display name
                 +------------ Connection file descriptor

       <b>BackendOpen</b> <b>-</b> <b>Backend</b> <b>connection</b> <b>opened</b>
              Logged when a new backend connection is opened.

              The format is:

                 %d %s %s %s %s %s %s
                 |  |  |  |  |  |  |
                 |  |  |  |  |  |  +- "connect" or "reuse"
                 |  |  |  |  |  +---- Local port
                 |  |  |  |  +------- Local address
                 |  |  |  +---------- Remote port
                 |  |  +------------- Remote address
                 |  +---------------- Backend display name
                 +------------------- Connection file descriptor

       <b>Backend_health</b> <b>-</b> <b>Backend</b> <b>health</b> <b>check</b>
              The result of a backend health probe.

              The format is:

                 %s %s %s %s %u %u %u %f %f %s
                 |  |  |  |  |  |  |  |  |  |
                 |  |  |  |  |  |  |  |  |  +- Probe HTTP response / error information
                 |  |  |  |  |  |  |  |  +---- Average response time
                 |  |  |  |  |  |  |  +------- Response time
                 |  |  |  |  |  |  +---------- Probe window size
                 |  |  |  |  |  +------------- Probe threshold level
                 |  |  |  |  +---------------- Number of good probes in window
                 |  |  |  +------------------- Probe window bits
                 |  |  +---------------------- "healthy" or "sick"
                 |  +------------------------- "Back", "Still" or "Went"
                 +---------------------------- Backend name

              Probe window bits are:

                 '-': Could not connect
                 '4': Good IPv4
                 '6': Good IPv6
                 'U': Good UNIX
                 'x': Error Xmit
                 'X': Good Xmit
                 'r': Error Recv
                 'R': Good Recv
                 'H': Happy

              When the backend is just created, the window bits for health check  slots  that  haven't  run  yet
              appear as '-' like failures to connect.

       <b>Begin</b> <b>-</b> <b>Marks</b> <b>the</b> <b>start</b> <b>of</b> <b>a</b> <b>VXID</b>
              The first record of a VXID transaction.

              The format is:

                 %s %d %s [%u]
                 |  |  |   |
                 |  |  |   +- Task sub-level
                 |  |  +----- Reason
                 |  +-------- Parent vxid
                 +----------- Type ("sess", "req" or "bereq")

       <b>BereqAcct</b> <b>-</b> <b>Backend</b> <b>request</b> <b>accounting</b>
              Contains byte counters from backend request processing.

              The format is:

                 %d %d %d %d %d %d
                 |  |  |  |  |  |
                 |  |  |  |  |  +- Total bytes received
                 |  |  |  |  +---- Body bytes received
                 |  |  |  +------- Header bytes received
                 |  |  +---------- Total bytes transmitted
                 |  +------------- Body bytes transmitted
                 +---------------- Header bytes transmitted

       <b>BereqHeader</b> <b>-</b> <b>Backend</b> <b>request</b> <b>header</b>
              HTTP header contents.

              The format is:

                 %s: %s
                 |   |
                 |   +- Header value
                 +----- Header name

              NOTE:  HTTP  header  fields  are  free form records and not strictly made of 2 fields. Accessing a
              specific header with the prefix notation helps treating the header value as a single string.

       <b>BereqMethod</b> <b>-</b> <b>Backend</b> <b>request</b> <b>method</b>
              The HTTP request method used.

       <b>BereqProtocol</b> <b>-</b> <b>Backend</b> <b>request</b> <b>protocol</b>
              The HTTP protocol version information.

       <b>BereqURL</b> <b>-</b> <b>Backend</b> <b>request</b> <b>URL</b>
              The HTTP request URL.

       <b>BereqUnset</b> <b>-</b> <b>Backend</b> <b>request</b> <b>unset</b> <b>header</b>
              HTTP header contents.

              The format is:

                 %s: %s
                 |   |
                 |   +- Header value
                 +----- Header name

              NOTE: HTTP header fields are free form records and not strictly made  of  2  fields.  Accessing  a
              specific header with the prefix notation helps treating the header value as a single string.

       <b>BerespHeader</b> <b>-</b> <b>Backend</b> <b>response</b> <b>header</b>
              HTTP header contents.

              The format is:

                 %s: %s
                 |   |
                 |   +- Header value
                 +----- Header name

              NOTE:  HTTP  header  fields  are  free form records and not strictly made of 2 fields. Accessing a
              specific header with the prefix notation helps treating the header value as a single string.

       <b>BerespProtocol</b> <b>-</b> <b>Backend</b> <b>response</b> <b>protocol</b>
              The HTTP protocol version information.

       <b>BerespReason</b> <b>-</b> <b>Backend</b> <b>response</b> <b>reason</b>
              The HTTP response reason string.

       <b>BerespStatus</b> <b>-</b> <b>Backend</b> <b>response</b> <b>status</b>
              The HTTP response status code.

       <b>BerespUnset</b> <b>-</b> <b>Backend</b> <b>response</b> <b>unset</b> <b>header</b>
              HTTP header contents.

              The format is:

                 %s: %s
                 |   |
                 |   +- Header value
                 +----- Header name

              NOTE: HTTP header fields are free form records and not strictly made  of  2  fields.  Accessing  a
              specific header with the prefix notation helps treating the header value as a single string.

       <b>BogoHeader</b> <b>-</b> <b>Bogus</b> <b>HTTP</b> <b>received</b>
              Contains  the first 20 characters of received HTTP headers we could not make sense of.  Applies to
              both req.http and beresp.http.

       <b>CLI</b> <b>-</b> <b>CLI</b> <b>communication</b>
              CLI communication between varnishd master and child process.

       <b>Debug</b> <b>-</b> <b>Debug</b> <b>messages</b>
              Debug messages can normally be ignored, but are sometimes helpful during  trouble-shooting.   Most
              debug messages must be explicitly enabled with parameters.

              Debug  messages  may be added, changed or removed without prior notice and shouldn't be considered
              stable.

              NB: This log record is masked by default.

       <b>ESI_xmlerror</b> <b>-</b> <b>ESI</b> <b>parser</b> <b>error</b> <b>or</b> <b>warning</b> <b>message</b>
              An error or warning was generated during parsing of an ESI object. The log  record  describes  the
              problem encountered.

       <b>End</b> <b>-</b> <b>Marks</b> <b>the</b> <b>end</b> <b>of</b> <b>a</b> <b>VXID</b>
              The last record of a VXID transaction.

       <b>Error</b> <b>-</b> <b>Error</b> <b>messages</b>
              Error messages are stuff you probably want to know.

       <b>ExpBan</b> <b>-</b> <b>Object</b> <b>evicted</b> <b>due</b> <b>to</b> <b>ban</b>
              Logs the VXID when an object is banned.

       <b>ExpKill</b> <b>-</b> <b>Object</b> <b>expiry</b> <b>event</b>
              Logs events related to object expiry. The events are:

              <b>EXP_Rearm</b>
                     Logged when the expiry time of an object changes.

              <b>EXP_Inbox</b>
                     Logged when the expiry thread picks an object from the inbox for processing.

              <b>EXP_Kill</b>
                     Logged when the expiry thread kills an object from the inbox.

              <b>EXP_When</b>
                     Logged when the expiry thread moves an object on the binheap.

              <b>EXP_Inspect</b>
                     Logged when the expiry thread inspects the next object scheduled to expire.

              <b>EXP_Expired</b>
                     Logged when the expiry thread expires an object.

              <b>EXP_Removed</b>
                     Logged when the expiry thread removes an object before expiry.

              <b>VBF_Superseded</b>
                     Logged when an object supersedes another.

              <b>LRU_Cand</b>
                     Logged when an object is evaluated for LRU force expiry.

              <b>LRU</b>    Logged when an object is force expired due to LRU.

              <b>LRU_Fail</b>
                     Logged when no suitable candidate object is found for LRU force expiry.

              The format is:

                 EXP_Rearm p=%p E=%f e=%f f=0x%x
                 EXP_Inbox p=%p e=%f f=0x%x
                 EXP_Kill p=%p e=%f f=0x%x
                 EXP_When p=%p e=%f f=0x%x
                 EXP_Inspect p=%p e=%f f=0x%x
                 EXP_Expired x=%u t=%f h=%u
                 EXP_Removed x=%u t=%f h=%u
                 VBF_Superseded x=%u n=%u
                 LRU_Cand p=%p f=0x%x r=%d
                 LRU x=%u
                 LRU_Fail

                 Legend:
                 p=%p         Objcore pointer
                 t=%f         Remaining TTL (s)
                 e=%f         Expiry time (unix epoch)
                 E=%f         Old expiry time (unix epoch)
                 f=0x%x       Objcore flags
                 r=%d         Objcore refcount
                 x=%u         Object VXID
                 n=%u         New object VXID
                 h=%u         Objcore hits

       <b>FetchError</b> <b>-</b> <b>Error</b> <b>while</b> <b>fetching</b> <b>object</b>
              Logs the error message of a failed fetch operation.

       <b>Fetch_Body</b> <b>-</b> <b>Body</b> <b>fetched</b> <b>from</b> <b>backend</b>
              Ready to fetch body from backend.

              The format is:

                 %d %s %s
                 |  |  |
                 |  |  +---- 'stream' or '-'
                 |  +------- Text description of body fetch mode
                 +---------- Body fetch mode

       <b>Filters</b> <b>-</b> <b>Body</b> <b>filters</b>
              List of filters applied to the body

       <b>Gzip</b> <b>-</b> <b>G(un)zip</b> <b>performed</b> <b>on</b> <b>object</b>
              A  Gzip  record  is emitted for each instance of gzip or gunzip work performed. Worst case, an ESI
              transaction stored in gzipped objects but delivered gunzipped, will run into many of these.

              The format is:

                 %c %c %c %d %d %d %d %d
                 |  |  |  |  |  |  |  |
                 |  |  |  |  |  |  |  +- Bit length of compressed data
                 |  |  |  |  |  |  +---- Bit location of 'last' bit
                 |  |  |  |  |  +------- Bit location of first deflate block
                 |  |  |  |  +---------- Bytes output
                 |  |  |  +------------- Bytes input
                 |  |  +---------------- 'E': ESI, '-': Plain object
                 |  +------------------- 'F': Fetch, 'D': Deliver
                 +---------------------- 'G': Gzip, 'U': Gunzip, 'u': Gunzip-test

              Examples:

                 U F E 182 159 80 80 1392
                 G F E 159 173 80 1304 1314

       <b>H2RxBody</b> <b>-</b> <b>Received</b> <b>HTTP2</b> <b>frame</b> <b>body</b>
              Binary data

       <b>H2RxHdr</b> <b>-</b> <b>Received</b> <b>HTTP2</b> <b>frame</b> <b>header</b>
              Binary data

       <b>H2TxBody</b> <b>-</b> <b>Transmitted</b> <b>HTTP2</b> <b>frame</b> <b>body</b>
              Binary data

       <b>H2TxHdr</b> <b>-</b> <b>Transmitted</b> <b>HTTP2</b> <b>frame</b> <b>header</b>
              Binary data

       <b>Hash</b> <b>-</b> <b>Value</b> <b>added</b> <b>to</b> <b>hash</b>
              This value was added to the object lookup hash.

              NB: This log record is masked by default.

       <b>Hit</b> <b>-</b> <b>Hit</b> <b>object</b> <b>in</b> <b>cache</b>
              Object looked up in cache.

              The format is:

                 %u %f %f %f [%u [%u]]
                 |  |  |  |   |   |
                 |  |  |  |   |   +- Content length
                 |  |  |  |   +----- Fetched so far
                 |  |  |  +--------- Keep period
                 |  |  +------------ Grace period
                 |  +--------------- Remaining TTL
                 +------------------ VXID of the object

       <b>HitMiss</b> <b>-</b> <b>Hit</b> <b>for</b> <b>miss</b> <b>object</b> <b>in</b> <b>cache.</b>
              Hit-for-miss object looked up in cache.

              The format is:

                 %u %f
                 |  |
                 |  +- Remaining TTL
                 +---- VXID of the object

       <b>HitPass</b> <b>-</b> <b>Hit</b> <b>for</b> <b>pass</b> <b>object</b> <b>in</b> <b>cache.</b>
              Hit-for-pass object looked up in cache.

              The format is:

                 %u %f
                 |  |
                 |  +- Remaining TTL
                 +---- VXID of the object

       <b>HttpGarbage</b> <b>-</b> <b>Unparseable</b> <b>HTTP</b> <b>request</b>
              Logs the content of unparseable HTTP requests.

       <b>Length</b> <b>-</b> <b>Size</b> <b>of</b> <b>object</b> <b>body</b>
              Logs the size of a fetch object body.

       <b>Link</b> <b>-</b> <b>Links</b> <b>to</b> <b>a</b> <b>child</b> <b>VXID</b>
              Links this VXID to any child VXID it initiates.

              The format is:

                 %s %d %s [%u]
                 |  |  |   |
                 |  |  |   +- Child task sub-level
                 |  |  +----- Reason
                 |  +-------- Child vxid
                 +----------- Child type ("sess", "req" or "bereq")

       <b>LostHeader</b> <b>-</b> <b>Failed</b> <b>attempt</b> <b>to</b> <b>set</b> <b>HTTP</b> <b>header</b>
              Logs the header name of a failed HTTP header operation due to resource  exhaustion  or  configured
              limits.

       <b>Notice</b> <b>-</b> <b>Informational</b> <b>messages</b> <b>about</b> <b>request</b> <b>handling</b>
              Informational log messages on events occurred during request handling.

              The format is:

                 %s: %s
                 |   |
                 |   +- Short description of the notice message
                 +----- Manual page containing the detailed description

              See the NOTICE MESSAGES section below or the individual VMOD manual pages for detailed information
              of notice messages.

       <b>ObjHeader</b> <b>-</b> <b>Object</b> <b>header</b>
              HTTP header contents.

              The format is:

                 %s: %s
                 |   |
                 |   +- Header value
                 +----- Header name

              NOTE:  HTTP  header  fields  are  free form records and not strictly made of 2 fields. Accessing a
              specific header with the prefix notation helps treating the header value as a single string.

       <b>ObjProtocol</b> <b>-</b> <b>Object</b> <b>protocol</b>
              The HTTP protocol version information.

       <b>ObjReason</b> <b>-</b> <b>Object</b> <b>reason</b>
              The HTTP response reason string.

       <b>ObjStatus</b> <b>-</b> <b>Object</b> <b>status</b>
              The HTTP response status code.

       <b>ObjUnset</b> <b>-</b> <b>Object</b> <b>unset</b> <b>header</b>
              HTTP header contents.

              The format is:

                 %s: %s
                 |   |
                 |   +- Header value
                 +----- Header name

              NOTE: HTTP header fields are free form records and not strictly made  of  2  fields.  Accessing  a
              specific header with the prefix notation helps treating the header value as a single string.

       <b>PipeAcct</b> <b>-</b> <b>Pipe</b> <b>byte</b> <b>counts</b>
              Contains byte counters for pipe sessions.

              The format is:

                 %d %d %d %d
                 |  |  |  |
                 |  |  |  +------- Piped bytes to client
                 |  |  +---------- Piped bytes from client
                 |  +------------- Backend request headers
                 +---------------- Client request headers

       <b>Proxy</b> <b>-</b> <b>PROXY</b> <b>protocol</b> <b>information</b>
              PROXY protocol information.

              The format is:

                 %d %s %d %s %d
                 |  |  |  |  |
                 |  |  |  |  +- server port
                 |  |  |  +---- server ip
                 |  |  +------- client port
                 |  +---------- client ip
                 +------------- PROXY protocol version

                 All fields are "local" for PROXY local connections (command 0x0)

       <b>ProxyGarbage</b> <b>-</b> <b>Unparseable</b> <b>PROXY</b> <b>request</b>
              A PROXY protocol header was unparseable.

       <b>ReqAcct</b> <b>-</b> <b>Request</b> <b>handling</b> <b>byte</b> <b>counts</b>
              Contains  byte  counts  for  the  request  handling.   The  body bytes count includes transmission
              overhead (ie: chunked encoding).  ESI sub-requests show the body bytes this ESI fragment including
              any subfragments contributed to the top level request.  The format is:

                 %d %d %d %d %d %d
                 |  |  |  |  |  |
                 |  |  |  |  |  +- Total bytes transmitted
                 |  |  |  |  +---- Body bytes transmitted
                 |  |  |  +------- Header bytes transmitted
                 |  |  +---------- Total bytes received
                 |  +------------- Body bytes received
                 +---------------- Header bytes received

       <b>ReqHeader</b> <b>-</b> <b>Client</b> <b>request</b> <b>header</b>
              HTTP header contents.

              The format is:

                 %s: %s
                 |   |
                 |   +- Header value
                 +----- Header name

              NOTE: HTTP header fields are free form records and not strictly made  of  2  fields.  Accessing  a
              specific header with the prefix notation helps treating the header value as a single string.

       <b>ReqMethod</b> <b>-</b> <b>Client</b> <b>request</b> <b>method</b>
              The HTTP request method used.

       <b>ReqProtocol</b> <b>-</b> <b>Client</b> <b>request</b> <b>protocol</b>
              The HTTP protocol version information.

       <b>ReqStart</b> <b>-</b> <b>Client</b> <b>request</b> <b>start</b>
              Start  of  request  processing.  Logs  the client address, port number  and listener endpoint name
              (from the -a command-line argument).

              The format is:

                 %s %s %s
                 |  |  |
                 |  |  +-- Listener name (from -a)
                 |  +----- Client Port number (0 for Unix domain sockets)
                 +-------- Client IP4/6 address (0.0.0.0 for UDS)

       <b>ReqURL</b> <b>-</b> <b>Client</b> <b>request</b> <b>URL</b>
              The HTTP request URL.

       <b>ReqUnset</b> <b>-</b> <b>Client</b> <b>request</b> <b>unset</b> <b>header</b>
              HTTP header contents.

              The format is:

                 %s: %s
                 |   |
                 |   +- Header value
                 +----- Header name

              NOTE: HTTP header fields are free form records and not strictly made  of  2  fields.  Accessing  a
              specific header with the prefix notation helps treating the header value as a single string.

       <b>RespHeader</b> <b>-</b> <b>Client</b> <b>response</b> <b>header</b>
              HTTP header contents.

              The format is:

                 %s: %s
                 |   |
                 |   +- Header value
                 +----- Header name

              NOTE:  HTTP  header  fields  are  free form records and not strictly made of 2 fields. Accessing a
              specific header with the prefix notation helps treating the header value as a single string.

       <b>RespProtocol</b> <b>-</b> <b>Client</b> <b>response</b> <b>protocol</b>
              The HTTP protocol version information.

       <b>RespReason</b> <b>-</b> <b>Client</b> <b>response</b> <b>reason</b>
              The HTTP response reason string.

       <b>RespStatus</b> <b>-</b> <b>Client</b> <b>response</b> <b>status</b>
              The HTTP response status code.

       <b>RespUnset</b> <b>-</b> <b>Client</b> <b>response</b> <b>unset</b> <b>header</b>
              HTTP header contents.

              The format is:

                 %s: %s
                 |   |
                 |   +- Header value
                 +----- Header name

              NOTE: HTTP header fields are free form records and not strictly made  of  2  fields.  Accessing  a
              specific header with the prefix notation helps treating the header value as a single string.

       <b>SessClose</b> <b>-</b> <b>Client</b> <b>connection</b> <b>closed</b>
              SessClose is the last record for any client connection.

              The format is:

                 %s %f
                 |  |
                 |  +- How long the session was open
                 +---- Why the connection closed

              <b>Explanation</b> <b>of</b> <b>reasons</b> <b>(first</b> <b>column):</b>

                     • <b>REM_CLOSE</b>: Client Closed

                     • <b>REQ_CLOSE</b>: Client requested close

                     • <b>REQ_HTTP10</b>: Proto &lt; HTTP/1.1

                     • <b>RX_BAD</b>: Received bad req/resp

                     • <b>RX_BODY</b>: Failure receiving body

                     • <b>RX_JUNK</b>: Received junk data

                     • <b>RX_OVERFLOW</b>: Received buffer overflow

                     • <b>RX_TIMEOUT</b>: Receive timeout

                     • <b>RX_CLOSE_IDLE</b>: timeout_idle reached

                     • <b>TX_PIPE</b>: Piped transaction

                     • <b>TX_ERROR</b>: Error transaction

                     • <b>TX_EOF</b>: EOF transmission

                     • <b>RESP_CLOSE</b>: Backend/VCL requested close

                     • <b>OVERLOAD</b>: Out of some resource

                     • <b>PIPE_OVERFLOW</b>: Session pipe overflow

                     • <b>RANGE_SHORT</b>: Insufficient data for range

                     • <b>REQ_HTTP20</b>: HTTP2 not accepted

                     • <b>VCL_FAILURE</b>: VCL failure

                     • <b>RAPID_RESET</b>: HTTP2 rapid reset

       <b>SessError</b> <b>-</b> <b>Client</b> <b>connection</b> <b>accept</b> <b>failed</b>
              Accepting a client connection has failed.

              The format is:

                 %s %s %s %d %d %s
                 |  |  |  |  |  |
                 |  |  |  |  |  +- Detailed error message
                 |  |  |  |  +---- Error Number (errno) from <a href="../man2/accept.2.html">accept</a>(2)
                 |  |  |  +------- File descriptor number
                 |  |  +---------- Local TCP port / 0 for UDS
                 |  +------------- Local IPv4/6 address / 0.0.0.0 for UDS
                 +---------------- Socket name (from -a argument)

       <b>SessOpen</b> <b>-</b> <b>Client</b> <b>connection</b> <b>opened</b>
              The first record for a client connection, with the socket-endpoints of the connection.

              The format is:

                 %s %d %s %s %s %f %d
                 |  |  |  |  |  |  |
                 |  |  |  |  |  |  +- File descriptor number
                 |  |  |  |  |  +---- Session start time (unix epoch)
                 |  |  |  |  +------- Local TCP port / 0 for UDS
                 |  |  |  +---------- Local IPv4/6 address / 0.0.0.0 for UDS
                 |  |  +------------- Socket name (from -a argument)
                 |  +---------------- Remote TCP port / 0 for UDS
                 +------------------- Remote IPv4/6 address / 0.0.0.0 for UDS

       <b>Storage</b> <b>-</b> <b>Where</b> <b>object</b> <b>is</b> <b>stored</b>
              Type and name of the storage backend the object is stored in.

              The format is:

                 %s %s
                 |  |
                 |  +- Name of storage backend
                 +---- Type ("malloc", "file", "persistent" etc.)

       <b>TTL</b> <b>-</b> <b>TTL</b> <b>set</b> <b>on</b> <b>object</b>
              A  TTL  record  is  emitted whenever the ttl, grace or keep values for an object is set as well as
              whether the object is  cacheable or not.

              The format is:

                 %s %d %d %d %d [ %d %d %u %u ] %s
                 |  |  |  |  |    |  |  |  |    |
                 |  |  |  |  |    |  |  |  |    +- "cacheable" or "uncacheable"
                 |  |  |  |  |    |  |  |  +------ Max-Age from Cache-Control header
                 |  |  |  |  |    |  |  +--------- Expires header
                 |  |  |  |  |    |  +------------ Date header
                 |  |  |  |  |    +--------------- Age (incl Age: header value)
                 |  |  |  |  +-------------------- Reference time for TTL
                 |  |  |  +----------------------- Keep
                 |  |  +-------------------------- Grace
                 |  +----------------------------- TTL
                 +-------------------------------- "RFC", "VCL" or "HFP"

              The four optional fields are only present in "RFC" headers.

              Examples:

                 RFC 60 10 -1 1312966109 1312966109 1312966109 0 60 cacheable
                 VCL 120 10 0 1312966111 uncacheable
                 HFP 2 0 0 1312966113 uncacheable

       <b>Timestamp</b> <b>-</b> <b>Timing</b> <b>information</b>
              Contains timing information for the Varnish worker threads.

              Time stamps are issued by Varnish on certain events, and show the absolute time of the event,  the
              time  spent  since  the  start  of  the work unit, and the time spent since the last timestamp was
              logged. See the TIMESTAMPS section below for information about the individual time stamps.

              The format is:

                 %s: %f %f %f
                 |   |  |  |
                 |   |  |  +- Time since last timestamp
                 |   |  +---- Time since start of work unit
                 |   +------- Absolute time of event
                 +----------- Event label

       <b>VCL_Error</b> <b>-</b> <b>VCL</b> <b>execution</b> <b>error</b> <b>message</b>
              Logs error messages generated during VCL execution.

       <b>VCL_Log</b> <b>-</b> <b>Log</b> <b>statement</b> <b>from</b> <b>VCL</b>
              User generated log messages insert from VCL through std.log()

       <b>VCL_acl</b> <b>-</b> <b>VCL</b> <b>ACL</b> <b>check</b> <b>results</b>
              ACLs with the <u>+log</u> flag emits this record with the result.

              The format is:

                 %s [%s [%s [fixed: %s]]]
                 |   |   |          |
                 |   |   |          +- Fix info (see below)
                 |   |   +------------ Matching entry (only for MATCH)
                 |   +---------------- Name of the ACL for MATCH or NO_MATCH
                 +-------------------- MATCH, NO_MATCH or NO_FAM

              • Fix info: either contains network/mask for non-canonical entries (see  acl  +pedantic  flag)  or
                <b>folded</b> for entries which were the result of a fold operation (see acl +fold flag).

              • <b>MATCH</b> denotes an ACL match

              • <b>NO_MATCH</b> denotes that a checked ACL has not matched

              • <b>NO_FAM</b> denotes a missing address family and should not occur.

       <b>VCL_call</b> <b>-</b> <b>VCL</b> <b>method</b> <b>called</b>
              Logs the VCL method name when a VCL method is called.

       <b>VCL_return</b> <b>-</b> <b>VCL</b> <b>method</b> <b>return</b> <b>value</b>
              Logs the VCL method terminating statement.

       <b>VCL_trace</b> <b>-</b> <b>VCL</b> <b>trace</b> <b>data</b>
              Logs VCL execution trace data.

              The format is:

                 %s %u %u.%u.%u
                 |  |  |  |  |
                 |  |  |  |  +- VCL program line position
                 |  |  |  +---- VCL program line number
                 |  |  +------- VCL program source index
                 |  +---------- VCL trace point index
                 +------------- VCL configname

              NB: This log record is masked by default.

       <b>VCL_use</b> <b>-</b> <b>VCL</b> <b>in</b> <b>use</b>
              Records the name of the VCL being used.

              The format is:

                 %s [ %s %s ]
                 |    |  |
                 |    |  +- Name of label used to find it
                 |    +---- "via"
                 +--------- Name of VCL put in use

       <b>VSL</b> <b>-</b> <b>VSL</b> <b>API</b> <b>warnings</b> <b>and</b> <b>error</b> <b>message</b>
              Warnings and error messages generated by the VSL API while reading the shared memory log.

       <b>VdpAcct</b> <b>-</b> <b>Deliver</b> <b>filter</b> <b>accounting</b>
              Contains name of VDP and statistics.

              The format is:

                 %s %d %d
                 |  |  |
                 |  |  +- Total bytes produced
                 |  +---- Number of calls made
                 +------- Name of filter

              NB: This log record is masked by default.

       <b>VfpAcct</b> <b>-</b> <b>Fetch</b> <b>filter</b> <b>accounting</b>
              Contains name of VFP and statistics.

              The format is:

                 %s %d %d
                 |  |  |
                 |  |  +- Total bytes produced
                 |  +---- Number of calls made
                 +------- Name of filter

              NB: This log record is masked by default.

       <b>Witness</b> <b>-</b> <b>Lock</b> <b>order</b> <b>witness</b> <b>records</b>
              Diagnostic recording of locking order.

       <b>WorkThread</b> <b>-</b> <b>Logs</b> <b>thread</b> <b>start/stop</b> <b>events</b>
              Logs worker thread creation and termination events.

              The format is:

                 %p %s
                 |  |
                 |  +- [start|end]
                 +---- Worker struct pointer

              NB: This log record is masked by default.

</pre><h4><b>TIMESTAMPS</b></h4><pre>
       Timestamps are inserted in the log on completing certain events during the worker thread's task handling.
       The  timestamps has a label showing which event was completed. The reported fields show the absolute time
       of the event, the time spent since the start of the task and the time spent since the last timestamp  was
       logged.

       The  timestamps logged automatically by Varnish are inserted after completing events that are expected to
       have delays (e.g. network IO or spending time on a waitinglist). Timestamps can also be inserted from VCL
       using the std.timestamp() function. If one is doing time consuming tasks in the VCL configuration, it's a
       good idea to log a timestamp after completing that task. This keeps the timing information in  subsequent
       timestamps from including the time spent on the VCL event.

   <b>Request</b> <b>handling</b> <b>timestamps</b>
       <b>Start</b>  The start of request processing (first byte received or restart).

       <b>Req</b>    Complete client request received.

       <b>ReqBody</b>
              Client request body processed (discarded, cached or passed to the backend).

       <b>Waitinglist</b>
              Came off waitinglist.

       <b>Fetch</b>  Fetch processing finished (completely fetched or ready for streaming).

       <b>Process</b>
              Processing finished, ready to deliver the client response.

       <b>Resp</b>   Delivery of response to the client finished.

       <b>Restart</b>
              Client request is being restarted.

       <b>Reset</b>  The client closed its connection, reset its stream or caused a stream error that forced Varnish to
              reset  the  stream.  Request  processing is interrupted and considered failed, with a 408 "Request
              Timeout" status code.

   <b>Pipe</b> <b>handling</b> <b>timestamps</b>
       The following timestamps are client timestamps specific to pipe transactions:

       <b>Pipe</b>   Opened a pipe to the backend and forwarded the request.

       <b>PipeSess</b>
              The pipe session has finished.

       The following timestamps change meaning in a pipe transaction:

       <b>Process</b>
              Processing finished, ready to begin the pipe delivery.

   <b>Backend</b> <b>fetch</b> <b>timestamps</b>
       <b>Start</b>  Start of the backend fetch processing.

       <b>Fetch</b>  Came off vcl_backend_fetch ready to send the backend request.

       <b>Connected</b>
              Successfully established a backend connection, or selected a recycled connection from the pool.

       <b>Bereq</b>  Backend request sent.

       <b>Beresp</b> Backend response headers received.

       <b>Process</b>
              Processing finished, ready to fetch the response body.

       <b>BerespBody</b>
              Backend response body received.

       <b>Retry</b>  Backend request is being retried.

       <b>Error</b>  Backend request failed to vcl_backend_error.

</pre><h4><b>NOTICE</b> <b>MESSAGES</b></h4><pre>
       Notice messages contain informational messages about the handling of a request. These can be  exceptional
       circumstances  encountered that causes deviation from the normal handling. The messages are prefixed with
       <b>vsl:</b> for core Varnish generated messages, and VMOD authors are encouraged to use <b>vmod_&lt;name&gt;:</b>  for  their
       own  notice  messages.  This  matches  the  name of the manual page where detailed descriptions of notice
       messages are expected.

       The core messages are described below.

   <b>Conditional</b> <b>fetch</b> <b>wait</b> <b>for</b> <b>streaming</b> <b>object</b>
       The backend answered 304 Not Modified on a conditional fetch using an object that has not yet been  fully
       fetched  as  the  stale template object. This can only happen when the TTL of the object is less than the
       time it takes to fetch it. The fetch is halted until the stale object is fully fetched,  upon  which  the
       new object is created as normal. While waiting, any grace time on the stale object will be in effect.

   <b>High</b> <b>number</b> <b>of</b> <b>variants</b>
       Objects  are  primarily  looked  up  from  an  index using the hash key computed from the <b>hash_data()</b> VCL
       function. When variants are involved, that is to say when a backend  response  was  stored  with  a  <b>Vary</b>
       header,  a secondary lookup is performed but it is not indexed. As the number of variants for a given key
       increases, this can slow cache lookups down, and since this  happens  under  a  lock,  this  can  greatly
       increase  lock  contention,  even  more so for frequently requested objects. Variants should therefore be
       used sparingly on cacheable responses, but since they can originate from either VCL  or  origin  servers,
       this notice should help identify problematic resources.

</pre><h4><b>HISTORY</b></h4><pre>
       This document was initially written by Poul-Henning Kamp, and later updated by Martin Blix Grydeland.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       • <u><a href="../man1/varnishhist.1.html">varnishhist</a>(1)</u>

       • <u><a href="../man1/varnishlog.1.html">varnishlog</a>(1)</u>

       • <u><a href="../man1/varnishncsa.1.html">varnishncsa</a>(1)</u>

       • <u><a href="../man1/varnishtop.1.html">varnishtop</a>(1)</u>

</pre><h4><b>COPYRIGHT</b></h4><pre>
       This document is licensed under the same licence as Varnish itself. See LICENCE for details.

       • Copyright (c) 2006 Verdens Gang AS

       • Copyright (c) 2006-2015 Varnish Software AS

                                                                                                          <u><a href="../man7/VSL.7.html">VSL</a></u>(7)
</pre>
 </div>
</div></section>
</div>
</body>
</html>