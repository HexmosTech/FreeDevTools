<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>namespaces - overview of Linux namespaces</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/manpages">manpages_6.9.1-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       namespaces - overview of Linux namespaces

</pre><h4><b>DESCRIPTION</b></h4><pre>
       A namespace wraps a global system resource in an abstraction that makes it appear to the processes within
       the  namespace  that they have their own isolated instance of the global resource.  Changes to the global
       resource are visible to other processes that are members of the namespace, but  are  invisible  to  other
       processes.  One use of namespaces is to implement containers.

       This page provides pointers to information on the various namespace types, describes the associated <u><a href="file:/proc">/proc</a></u>
       files, and summarizes the APIs for working with namespaces.

   <b>Namespace</b> <b>types</b>
       The  following  table shows the namespace types available on Linux.  The second column of the table shows
       the flag value that is used to specify the namespace type in various APIs.  The third  column  identifies
       the  manual  page  that  provides  details  on  the  namespace type.  The last column is a summary of the
       resources that are isolated by the namespace type.
       <b>Namespace</b> <b>Flag</b>            <b>Page</b>                  <b>Isolates</b>
       Cgroup    <b>CLONE_NEWCGROUP</b> <b><a href="../man7/cgroup_namespaces.7.html">cgroup_namespaces</a></b>(7)  Cgroup root directory
       IPC       <b>CLONE_NEWIPC</b>    <b><a href="../man7/ipc_namespaces.7.html">ipc_namespaces</a></b>(7)     System  V  IPC,  POSIX
                                                       message queues
       Network   <b>CLONE_NEWNET</b>    <b><a href="../man7/network_namespaces.7.html">network_namespaces</a></b>(7) Network       devices,
                                                       stacks, ports, etc.
       Mount     <b>CLONE_NEWNS</b>     <b><a href="../man7/mount_namespaces.7.html">mount_namespaces</a></b>(7)   Mount points
       PID       <b>CLONE_NEWPID</b>    <b><a href="../man7/pid_namespaces.7.html">pid_namespaces</a></b>(7)     Process IDs
       Time      <b>CLONE_NEWTIME</b>   <b><a href="../man7/time_namespaces.7.html">time_namespaces</a></b>(7)    Boot   and   monotonic
                                                       clocks
       User      <b>CLONE_NEWUSER</b>   <b><a href="../man7/user_namespaces.7.html">user_namespaces</a></b>(7)    User and group IDs
       UTS       <b>CLONE_NEWUTS</b>    <b><a href="../man7/uts_namespaces.7.html">uts_namespaces</a></b>(7)     Hostname    and    NIS
                                                       domain name

   <b>The</b> <b>namespaces</b> <b>API</b>
       As well as various <u><a href="file:/proc">/proc</a></u> files described below, the namespaces API includes the following system calls:

       <b><a href="../man2/clone.2.html">clone</a></b>(2)
              The <b><a href="../man2/clone.2.html">clone</a></b>(2) system call creates a new process.  If the <u>flags</u> argument of the call  specifies  one
              or  more  of the <b>CLONE_NEW*</b> flags listed above, then new namespaces are created for each flag, and
              the child process is made a member of those namespaces.   (This  system  call  also  implements  a
              number of features unrelated to namespaces.)

       <b><a href="../man2/setns.2.html">setns</a></b>(2)
              The  <b><a href="../man2/setns.2.html">setns</a></b>(2) system call allows the calling process to join an existing namespace.  The namespace
              to join is specified via a file descriptor that refers to one of the <u><a href="file:/proc/">/proc/</a></u>pid<u>/ns</u> files  described
              below.

       <b><a href="../man2/unshare.2.html">unshare</a></b>(2)
              The <b><a href="../man2/unshare.2.html">unshare</a></b>(2) system call moves the calling process to a new namespace.  If the <u>flags</u> argument of
              the  call  specifies  one  or  more  of the <b>CLONE_NEW*</b> flags listed above, then new namespaces are
              created for each flag, and the calling process is made a member of those namespaces.  (This system
              call also implements a number of features unrelated to namespaces.)

       <b><a href="../man2/ioctl.2.html">ioctl</a></b>(2)
              Various <b><a href="../man2/ioctl.2.html">ioctl</a></b>(2)  operations  can  be  used  to  discover  information  about  namespaces.   These
              operations are described in <b><a href="../man2/ioctl_nsfs.2.html">ioctl_nsfs</a></b>(2).

       Creation  of  new  namespaces  using  <b><a href="../man2/clone.2.html">clone</a></b>(2)  and  <b><a href="../man2/unshare.2.html">unshare</a></b>(2)  in most cases requires the <b>CAP_SYS_ADMIN</b>
       capability, since, in the new namespace, the creator will have the power to change global resources  that
       are  visible to other processes that are subsequently created in, or join the namespace.  User namespaces
       are the exception: since Linux 3.8, no privilege is required to create a user namespace.

   <b>The</b> <u><b><a href="file:/proc/">/proc/</a></b></u><b>pid</b><u><b>/ns/</b></u> <b>directory</b>
       Each process has a <u><a href="file:/proc/">/proc/</a></u>pid<u>/ns/</u> subdirectory containing one entry for each namespace that supports being
       manipulated by <b><a href="../man2/setns.2.html">setns</a></b>(2):

           $ <b>ls</b> <b>-l</b> <b><a href="file:/proc/">/proc/</a>$$/ns</b> <b>|</b> <b>awk</b> <b>'{print</b> <b>$1,</b> <b>$9,</b> <b>$10,</b> <b>$11}'</b>
           total 0
           lrwxrwxrwx. cgroup -&gt; cgroup:[4026531835]
           lrwxrwxrwx. ipc -&gt; ipc:[4026531839]
           lrwxrwxrwx. mnt -&gt; mnt:[4026531840]
           lrwxrwxrwx. net -&gt; net:[4026531969]
           lrwxrwxrwx. pid -&gt; pid:[4026531836]
           lrwxrwxrwx. pid_for_children -&gt; pid:[4026531834]
           lrwxrwxrwx. time -&gt; time:[4026531834]
           lrwxrwxrwx. time_for_children -&gt; time:[4026531834]
           lrwxrwxrwx. user -&gt; user:[4026531837]
           lrwxrwxrwx. uts -&gt; uts:[4026531838]

       Bind mounting (see <b><a href="../man2/mount.2.html">mount</a></b>(2)) one of the files in this directory to somewhere else in the filesystem keeps
       the corresponding namespace of the process specified by <u>pid</u> alive even if all processes currently in  the
       namespace terminate.

       Opening one of the files in this directory (or a file that is bind mounted to one of these files) returns
       a  file  handle  for  the  corresponding namespace of the process specified by <u>pid</u>.  As long as this file
       descriptor remains open, the namespace will  remain  alive,  even  if  all  processes  in  the  namespace
       terminate.  The file descriptor can be passed to <b><a href="../man2/setns.2.html">setns</a></b>(2).

       In  Linux  3.7  and  earlier,  these  files  were visible as hard links.  Since Linux 3.8, they appear as
       symbolic links.  If two processes are in the same namespace, then the device IDs  and  inode  numbers  of
       their  <u><a href="file:/proc/">/proc/</a></u>pid<u>/ns/</u>xxx  symbolic  links  will  be  the  same;  an  application  can check this using the
       <u>stat.st_dev</u> and <u>stat.st_ino</u> fields returned by <b><a href="../man2/stat.2.html">stat</a></b>(2).  The content of this symbolic link  is  a  string
       containing the namespace type and inode number as in the following example:

           $ <b>readlink</b> <b><a href="file:/proc/">/proc/</a>$$/ns/uts</b>
           uts:[4026531838]

       The symbolic links in this subdirectory are as follows:

       <u><a href="file:/proc/">/proc/</a></u>pid<u>/ns/cgroup</u> (since Linux 4.6)
              This file is a handle for the cgroup namespace of the process.

       <u><a href="file:/proc/">/proc/</a></u>pid<u>/ns/ipc</u> (since Linux 3.0)
              This file is a handle for the IPC namespace of the process.

       <u><a href="file:/proc/">/proc/</a></u>pid<u>/ns/mnt</u> (since Linux 3.8)
              This file is a handle for the mount namespace of the process.

       <u><a href="file:/proc/">/proc/</a></u>pid<u>/ns/net</u> (since Linux 3.0)
              This file is a handle for the network namespace of the process.

       <u><a href="file:/proc/">/proc/</a></u>pid<u>/ns/pid</u> (since Linux 3.8)
              This  file  is  a  handle  for the PID namespace of the process.  This handle is permanent for the
              lifetime of the process (i.e., a process's PID namespace membership never changes).

       <u><a href="file:/proc/">/proc/</a></u>pid<u>/ns/pid_for_children</u> (since Linux 4.12)
              This file is a handle for the PID namespace of child processes created by this process.  This  can
              change  as  a consequence of calls to <b><a href="../man2/unshare.2.html">unshare</a></b>(2) and <b><a href="../man2/setns.2.html">setns</a></b>(2) (see <b><a href="../man7/pid_namespaces.7.html">pid_namespaces</a></b>(7)), so the file
              may differ from <u><a href="file:/proc/">/proc/</a></u>pid<u>/ns/pid</u>.  The symbolic link gains a value  only  after  the  first  child
              process is created in the namespace.  (Beforehand, <b><a href="../man2/readlink.2.html">readlink</a></b>(2) of the symbolic link will return an
              empty buffer.)

       <u><a href="file:/proc/">/proc/</a></u>pid<u>/ns/time</u> (since Linux 5.6)
              This file is a handle for the time namespace of the process.

       <u><a href="file:/proc/">/proc/</a></u>pid<u>/ns/time_for_children</u> (since Linux 5.6)
              This file is a handle for the time namespace of child processes created by this process.  This can
              change  as a consequence of calls to <b><a href="../man2/unshare.2.html">unshare</a></b>(2) and <b><a href="../man2/setns.2.html">setns</a></b>(2) (see <b><a href="../man7/time_namespaces.7.html">time_namespaces</a></b>(7)), so the file
              may differ from <u><a href="file:/proc/">/proc/</a></u>pid<u>/ns/time</u>.

       <u><a href="file:/proc/">/proc/</a></u>pid<u>/ns/user</u> (since Linux 3.8)
              This file is a handle for the user namespace of the process.

       <u><a href="file:/proc/">/proc/</a></u>pid<u>/ns/uts</u> (since Linux 3.0)
              This file is a handle for the UTS namespace of the process.

       Permission to dereference or read (<b><a href="../man2/readlink.2.html">readlink</a></b>(2)) these symbolic links is governed by a ptrace access  mode
       <b>PTRACE_MODE_READ_FSCREDS</b> check; see <b><a href="../man2/ptrace.2.html">ptrace</a></b>(2).

   <b>The</b> <u><b><a href="file:/proc/sys/user">/proc/sys/user</a></b></u> <b>directory</b>
       The  files in the <u><a href="file:/proc/sys/user">/proc/sys/user</a></u> directory (which is present since Linux 4.9) expose limits on the number
       of namespaces of various types that can be created.  The files are as follows:

       <u>max_cgroup_namespaces</u>
              The value in this file defines a per-user limit on the number of cgroup  namespaces  that  may  be
              created in the user namespace.

       <u>max_ipc_namespaces</u>
              The  value  in  this  file  defines  a  per-user limit on the number of ipc namespaces that may be
              created in the user namespace.

       <u>max_mnt_namespaces</u>
              The value in this file defines a per-user limit on the number of  mount  namespaces  that  may  be
              created in the user namespace.

       <u>max_net_namespaces</u>
              The  value  in  this file defines a per-user limit on the number of network namespaces that may be
              created in the user namespace.

       <u>max_pid_namespaces</u>
              The value in this file defines a per-user limit on the  number  of  PID  namespaces  that  may  be
              created in the user namespace.

       <u>max_time_namespaces</u> (since Linux 5.7)
              The  value  in  this  file  defines  a per-user limit on the number of time namespaces that may be
              created in the user namespace.

       <u>max_user_namespaces</u>
              The value in this file defines a per-user limit on the number  of  user  namespaces  that  may  be
              created in the user namespace.

       <u>max_uts_namespaces</u>
              The  value  in  this  file  defines  a  per-user limit on the number of uts namespaces that may be
              created in the user namespace.

       Note the following details about these files:

       •  The values in these files are modifiable by privileged processes.

       •  The values exposed by these files are the limits for the user namespace in which the  opening  process
          resides.

       •  The limits are per-user.  Each user in the same user namespace can create namespaces up to the defined
          limit.

       •  The limits apply to all users, including UID 0.

       •  These  limits  apply  in  addition  to  any other per-namespace limits (such as those for PID and user
          namespaces) that may be enforced.

       •  Upon encountering these limits, <b><a href="../man2/clone.2.html">clone</a></b>(2) and <b><a href="../man2/unshare.2.html">unshare</a></b>(2) fail with the error <b>ENOSPC</b>.

       •  For the initial user namespace, the default value in each of these files is  half  the  limit  on  the
          number  of  threads  that  may  be  created  (<u><a href="file:/proc/sys/kernel/threads-max">/proc/sys/kernel/threads-max</a></u>).   In  all descendant user
          namespaces, the default value in each file is <b>MAXINT</b>.

       •  When a namespace is  created,  the  object  is  also  accounted  against  ancestor  namespaces.   More
          precisely:

          •  Each user namespace has a creator UID.

          •  When  a namespace is created, it is accounted against the creator UIDs in each of the ancestor user
             namespaces, and the kernel ensures that the corresponding namespace limit for the  creator  UID  in
             the ancestor namespace is not exceeded.

          •  The  aforementioned  point  ensures that creating a new user namespace cannot be used as a means to
             escape the limits in force in the current user namespace.

   <b>Namespace</b> <b>lifetime</b>
       Absent any other factors, a namespace is automatically torn down when the last process in  the  namespace
       terminates  or  leaves  the  namespace.   However,  there  are  a  number of other factors that may pin a
       namespace into existence even though it has no member processes.  These factors include the following:

       •  An open file descriptor or a bind mount exists for the corresponding <u><a href="file:/proc/">/proc/</a></u>pid<u>/ns/*</u> file.

       •  The namespace is hierarchical (i.e., a PID or user namespace), and has a child namespace.

       •  It is a user namespace that owns one or more nonuser namespaces.

       •  It  is  a  PID  namespace,  and  there  is  a  process  that   refers   to   the   namespace   via   a
          <u><a href="file:/proc/">/proc/</a></u>pid<u>/ns/pid_for_children</u> symbolic link.

       •  It   is   a   time   namespace,   and  there  is  a  process  that  refers  to  the  namespace  via  a
          <u><a href="file:/proc/">/proc/</a></u>pid<u>/ns/time_for_children</u> symbolic link.

       •  It is an IPC namespace, and a corresponding mount of an <u>mqueue</u> filesystem (see <b><a href="../man7/mq_overview.7.html">mq_overview</a></b>(7))  refers
          to this namespace.

       •  It is a PID namespace, and a corresponding mount of a <b><a href="../man5/proc.5.html">proc</a></b>(5) filesystem refers to this namespace.

</pre><h4><b>EXAMPLES</b></h4><pre>
       See <b><a href="../man2/clone.2.html">clone</a></b>(2) and <b><a href="../man7/user_namespaces.7.html">user_namespaces</a></b>(7).

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man1/nsenter.1.html">nsenter</a></b>(1),   <b><a href="../man1/readlink.1.html">readlink</a></b>(1),   <b><a href="../man1/unshare.1.html">unshare</a></b>(1),   <b><a href="../man2/clone.2.html">clone</a></b>(2),   <b><a href="../man2/ioctl_nsfs.2.html">ioctl_nsfs</a></b>(2),   <b><a href="../man2/setns.2.html">setns</a></b>(2),   <b><a href="../man2/unshare.2.html">unshare</a></b>(2),  <b><a href="../man5/proc.5.html">proc</a></b>(5),
       <b><a href="../man7/capabilities.7.html">capabilities</a></b>(7),      <b><a href="../man7/cgroup_namespaces.7.html">cgroup_namespaces</a></b>(7),      <b><a href="../man7/cgroups.7.html">cgroups</a></b>(7),      <b><a href="../man7/credentials.7.html">credentials</a></b>(7),      <b><a href="../man7/ipc_namespaces.7.html">ipc_namespaces</a></b>(7),
       <b><a href="../man7/network_namespaces.7.html">network_namespaces</a></b>(7), <b><a href="../man7/pid_namespaces.7.html">pid_namespaces</a></b>(7), <b><a href="../man7/user_namespaces.7.html">user_namespaces</a></b>(7), <b><a href="../man7/uts_namespaces.7.html">uts_namespaces</a></b>(7), <b><a href="../man8/lsns.8.html">lsns</a></b>(8), <b><a href="../man8/switch_root.8.html">switch_root</a></b>(8)

Linux man-pages 6.9.1                              2024-06-13                                      <u><a href="../man7/namespaces.7.html">namespaces</a></u>(7)
</pre>
 </div>
</div></section>
</div>
</body>
</html>