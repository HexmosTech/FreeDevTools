<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ocf_heartbeat_IPaddr2 - Manages virtual IPv4 and IPv6 addresses (Linux specific version)</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/resource-agents-base">resource-agents-base_4.16.0-3ubuntu1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       ocf_heartbeat_IPaddr2 - Manages virtual IPv4 and IPv6 addresses (Linux specific version)

</pre><h4><b>SYNOPSIS</b></h4><pre>

       <b>IPaddr2</b> [start | stop | status | monitor | meta-data | validate-all]

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This Linux-specific resource manages IP alias IP addresses. It can add an IP alias, or remove one. In
       addition, it can implement Cluster Alias IP functionality if invoked as a clone resource.

       If used as a clone, "shared address with a trivial, stateless (autonomous) load-balancing/mutual
       exclusion on ingress" mode gets applied (as opposed to "assume resource uniqueness" mode otherwise). For
       that, Linux firewall (kernel and userspace) is assumed, and since recent distributions are ambivalent in
       plain "iptables" command to particular back-end resolution, "iptables-legacy" (when present) gets
       prioritized so as to avoid incompatibilities (note that respective ipt_CLUSTERIP firewall extension in
       use here is, at the same time, marked deprecated, yet said "legacy" layer can make it workable,
       literally, to this day) with "netfilter" one (as in "iptables-nft"). In that case, you should explicitly
       set clone-node-max &gt;= 2, and/or clone-max &lt; number of nodes. In case of node failure, clone instances
       need to be re-allocated on surviving nodes. This would not be possible if there is already an instance on
       those nodes, and clone-node-max=1 (which is the default).

       When the specified IP address gets assigned to a respective interface, the resource agent sends
       unsolicited ARP (Address Resolution Protocol, IPv4) or NA (Neighbor Advertisement, IPv6) packets to
       inform neighboring machines about the change. This functionality is controlled for both IPv4 and IPv6 by
       shared 'arp_*' parameters.

</pre><h4><b>SUPPORTED</b> <b>PARAMETERS</b></h4><pre>
       <b>ip</b>
           The IPv4 (dotted quad notation) or IPv6 address (colon hexadecimal notation) example IPv4
           "192.168.1.1". example IPv6 "2001:db8:DC28:0:0:FC57:D4C8:1FFF".

           (unique, required, string, no default)

       <b>nic</b>
           The base network interface on which the IP address will be brought online. If left empty, the script
           will try and determine this from the routing table.

           Do NOT specify an alias interface in the form eth0:1 or anything here; rather, specify the base
           interface only. If you want a label, see the iflabel parameter.

           Prerequisite:

           There must be at least one static IP address, which is not managed by the cluster, assigned to the
           network interface. If you can not assign any static IP address on the interface, modify this kernel
           parameter:

           sysctl -w net.ipv4.conf.all.promote_secondaries=1 # (or per device)

           (optional, string, no default)

       <b>cidr_netmask</b>
           The netmask for the interface in CIDR format (e.g., 24 and not 255.255.255.0)

           If unspecified, the script will also try to determine this from the routing table.

           (optional, string, no default)

       <b>broadcast</b>
           Broadcast address associated with the IP. It is possible to use the special symbols '+' and '-'
           instead of the broadcast address. In this case, the broadcast address is derived by setting/resetting
           the host bits of the interface prefix.

           (optional, string, no default)

       <b>proto</b>
           Proto to match when finding network. E.g. "kernel".

           (optional, string, no default)

       <b>iflabel</b>
           You can specify an additional label for your IP address here. This label is appended to your
           interface name.

           The kernel allows alphanumeric labels up to a maximum length of 15 characters including the interface
           name and colon (e.g. eth0:foobar1234)

           A label can be specified in nic parameter but it is deprecated. If a label is specified in nic name,
           this parameter has no effect.

           (optional, string, no default)

       <b>lvs_support</b>
           Enable support for LVS Direct Routing configurations. In case a IP address is stopped, only move it
           to the loopback device to allow the local node to continue to service requests, but no longer
           advertise it on the network.

           Notes for IPv6: It is not necessary to enable this option on IPv6. Instead, enable
           'lvs_ipv6_addrlabel' option for LVS-DR usage on IPv6.

           (optional, boolean, default false)

       <b>lvs_ipv6_addrlabel</b>
           Enable adding IPv6 address label so IPv6 traffic originating from the address's interface does not
           use this address as the source. This is necessary for LVS-DR health checks to realservers to work.
           Without it, the most recently added IPv6 address (probably the address added by IPaddr2) will be used
           as the source address for IPv6 traffic from that interface and since that address exists on loopback
           on the realservers, the realserver response to pings/connections will never leave its loopback. See
           RFC3484 for the detail of the source address selection.

           See also 'lvs_ipv6_addrlabel_value' parameter.

           (optional, boolean, default true)

       <b>lvs_ipv6_addrlabel_value</b>
           Specify IPv6 address label value used when 'lvs_ipv6_addrlabel' is enabled. The value should be an
           unused label in the policy table which is shown by 'ip addrlabel list' command. You would rarely need
           to change this parameter.

           (optional, integer, default 99)

       <b>mac</b>
           Set the interface MAC address explicitly. Currently only used in case of the Cluster IP Alias. Leave
           empty to chose automatically.

           (optional, string, no default)

       <b>clusterip_hash</b>
           Specify the hashing algorithm used for the Cluster IP functionality.

           (optional, string, default "sourceip-sourceport")

       <b>unique_clone_address</b>
           If true, add the clone ID to the supplied value of IP to create a unique address to manage

           (optional, boolean, default false)

       <b>arp_interval</b>
           Specify the interval between unsolicited ARP (IPv4) or NA (IPv6) packets in milliseconds.

           This parameter is deprecated and used for the backward compatibility only. It is effective only for
           the send_arp binary which is built with libnet, and send_ua for IPv6. It has no effect for other
           arp_sender.

           (optional, integer, default 200)

       <b>arp_count</b>
           Number of unsolicited ARP (IPv4) or NA (IPv6) packets to send at resource initialization.

           (optional, integer, default 5)

       <b>arp_count_refresh</b>
           For IPv4, number of unsolicited ARP packets to send during resource monitoring. Doing so helps
           mitigate issues of stuck ARP caches resulting from split-brain situations.

           (optional, integer, default 0)

       <b>arp_bg</b>
           Whether or not to send the ARP (IPv4) or NA (IPv6) packets in the background. The default is true for
           IPv4 and false for IPv6.

           (optional, string, no default)

       <b>arp_sender</b>
           For IPv4, the program to send ARP packets with on start. Available options are: - send_arp: default -
           ipoibarping: default for infiniband interfaces if ipoibarping is available - iputils_arping: use
           arping in iputils package - libnet_arping: use another variant of arping based on libnet

           (optional, string, no default)

       <b>send_arp_opts</b>
           For IPv4, extra options to pass to the arp_sender program. Available options are vary depending on
           which arp_sender is used.

           A typical use case is specifying '-A' for iputils_arping to use ARP REPLY instead of ARP REQUEST as
           Gratuitous ARPs.

           (optional, string, no default)

       <b>flush_routes</b>
           Flush the routing table on stop. This is for applications which use the cluster IP address and which
           run on the same physical host that the IP address lives on. The Linux kernel may force that
           application to take a shortcut to the local loopback interface, instead of the interface the address
           is really bound to. Under those circumstances, an application may, somewhat unexpectedly, continue to
           use connections for some time even after the IP address is deconfigured. Set this parameter in order
           to immediately disable said shortcut when the IP address goes away.

           (optional, boolean, default false)

       <b>run_arping</b>
           For IPv4, whether or not to run arping for collision detection check.

           (optional, string, default "false")

       <b>nodad</b>
           For IPv6, do not perform Duplicate Address Detection when adding the address.

           (optional, string, default "false")

       <b>noprefixroute</b>
           Use noprefixroute flag (see 'man ip-address').

           (optional, string, default "false")

       <b>preferred_lft</b>
           For IPv6, set the preferred lifetime of the IP address. This can be used to ensure that the created
           IP address will not be used as a source address for routing. Expects a value as specified in section
           5.5.4 of RFC 4862.

           (optional, string, default "forever")

       <b>network_namespace</b>
           Specifies the network namespace to operate within. The namespace must already exist, and the
           interface to be used must be within the namespace.

           (optional, string, no default)

</pre><h4><b>SUPPORTED</b> <b>ACTIONS</b></h4><pre>
       This resource agent supports the following actions (operations):

       <b>start</b>
           Starts the resource. Suggested minimum timeout: 20s.

       <b>stop</b>
           Stops the resource. Suggested minimum timeout: 20s.

       <b>status</b>
           Performs a status check. Suggested minimum timeout: 20s. Suggested interval: 10s.

       <b>monitor</b>
           Performs a detailed status check. Suggested minimum timeout: 20s. Suggested interval: 10s.

       <b>meta-data</b>
           Retrieves resource agent metadata (internal use only). Suggested minimum timeout: 5s.

       <b>validate-all</b>
           Performs a validation of the resource configuration. Suggested minimum timeout: 20s.

</pre><h4><b>EXAMPLE</b> <b>CRM</b> <b>SHELL</b></h4><pre>
       The following is an example configuration for a IPaddr2 resource using the <b><a href="../man8/crm.8.html">crm</a></b>(8) shell:

           primitive p_IPaddr2 ocf:heartbeat:IPaddr2 \
             params \
               ip=<u>string</u> \
             op monitor depth="0" timeout="20s" interval="10s"

</pre><h4><b>EXAMPLE</b> <b>PCS</b></h4><pre>
       The following is an example configuration for a IPaddr2 resource using <b><a href="../man8/pcs.8.html">pcs</a></b>(8)

           pcs resource create p_IPaddr2 ocf:heartbeat:IPaddr2 \
             ip=<u>string</u> \
             op monitor OCF_CHECK_LEVEL="0" timeout="20s" interval="10s"

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="http://clusterlabs.org/">http://clusterlabs.org/</a></b>

</pre><h4><b>AUTHOR</b></h4><pre>
       <b>ClusterLabs</b> <b>contributors</b> <b>(see</b> <b>the</b> <b>resource</b> <b>agent</b> <b>source</b> <b>for</b> <b>information</b> <b>about</b> <b>individual</b> <b>authors)</b>

resource-agents 4.16.0-3ubuntu                     06/25/2025                            <u><a href="../man7/OCF_HEARTBEAT_IPADDR.7.html">OCF_HEARTBEAT_IPADDR</a></u>(7)
</pre>
 </div>
</div></section>
</div>
</body>
</html>