<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>vmmoscalib - Determination of the extraction mask</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/noble/+package/cpl-plugin-vimos-doc">cpl-plugin-vimos-doc_4.1.7+dfsg-2build3_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       vmmoscalib - Determination of the extraction mask

</pre><h4><b>SYNOPSIS</b></h4><pre>
       esorex <b>vmmoscalib</b> [OPTIONS] FILE.sof

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This  recipe  is used to identify reference lines on MOS arc lamp exposures, and trace the spectral edges
       on the corresponding flat field exposures. This information is used to determine the spectral  extraction
       mask  to  be applied in the scientific data reduction, performed with the recipe vimos_science. The input
       arc lamp and flat field exposures are assumed to be obtained quasi-simultaneously, so that they would  be
       described by exactly the same instrument distortions.

       A line catalog must be specified, containing the wavelengths of the reference arc lamp lines used for the
       wavelength  calibration.  A grism table (typically depending on the instrument mode, and in particular on
       the grism used) may also be specified: this table contains a default recipe parameter setting to  control
       the  way  spectra  are  extracted  for a specific instrument mode, as it is used for automatic run of the
       pipeline on Paranal and in Garching. If this table is  specified,  it  will  modify  the  default  recipe
       parameter  setting,  with  the  exception  of those parameters which have been explicitly modifyed on the
       command line.

       If a grism table is not specified, the input recipe parameters  values  will  always  be  read  from  the
       command line, or from an esorex configuration file if present, or from their generic default values (that
       are rarely meaningful). Finally a master bias frame must be input to this recipe.

       In  the  table  below  the  MOS_CURV_COEFF,  MOS_CURV_TRACES, MOS_SPATIAL_MAP MOS_ARC_SPECTRUM_EXTRACTED,
       MOS_SPECTRA_DETECTION, MOS_SLIT_MAP, and MOS_SLIT_LOCATION, are never created in case  of  long-slit-like
       data.

       The products MOS_SPECTRA_DETECTION, MOS_SLIT_MAP, and MOS_DISP_RESIDUALS, are just created if the --check
       parameter  is  set  to true. The product GLOBAL_DISTORTION_TABLE is just created if more than 12 separate
       spectra are found in the CCD.

       Input files:

         DO category:               Type:       Explanation:         Required:
         MOS_SCREEN_FLAT            Raw         Flat field exposures    Y
         MOS_ARC_SPECTRUM           Raw         Arc lamp exposure       Y
         MASTER_BIAS                Calib       Bias frame              Y
         LINE_CATALOG               Calib       Line catalog            Y
         CONFIG_TABLE               Calib       Grism table             .

       Output files:

         DO category:               Data type:  Explanation:
         MOS_COMBINED_SCREEN_FLAT   FITS image  Combined (sum) flat field
         MOS_MASTER_SCREEN_FLAT     FITS image  Normalised flat field
         MOS_ARC_SPECTRUM_EXTRACTED FITS image  Wavelength calibrated arc spectrum
         MOS_DISP_COEFF             FITS table  Inverse dispersion coefficients
         MOS_DISP_RESIDUALS         FITS image  Residuals in wavelength calibration
         MOS_DISP_RESIDUALS_TABLE   FITS table  Residuals in wavelength calibration
         MOS_DELTA_IMAGE            FITS image  Offset vs linear wavelength calib
         MOS_WAVELENGTH_MAP         FITS image  Wavelength for each pixel on CCD
         MOS_SPECTRA_DETECTION      FITS image  Check for preliminary detection
         MOS_SLIT_MAP               FITS image  Map of central wavelength on CCD
         MOS_CURV_TRACES            FITS table  Spectral curvature traces
         MOS_CURV_COEFF             FITS table  Spectral curvature coefficients
         MOS_SPATIAL_MAP            FITS image  Spatial position along slit on CCD
         MOS_SPECTRAL_RESOLUTION    FITS table  Resolution at reference arc lines
         MOS_SLIT_LOCATION          FITS table  Slits on product frames and CCD
         GLOBAL_DISTORTION_TABLE    FITS table  Global distortions table

</pre><h4><b>OPTIONS</b></h4><pre>
       <b>--dispersion</b> <u>&lt;float&gt;</u>
              Expected spectral dispersion (Angstrom/pixel) (float; default: 0.0). The full name of this  option
              for the EsoRex configuration file is <b>vimos.vmmoscalib.dispersion</b> [default = <u>0.0</u>].

       <b>--peakdetection</b> <u>&lt;float&gt;</u>
              Initial peak detection threshold (ADU) (float; default: 0.0). The full name of this option for the
              EsoRex configuration file is <b>vimos.vmmoscalib.peakdetection</b> [default = <u>0.0</u>].

       <b>--wdegree</b> <u>&lt;int&gt;</u>
              Degree  of  wavelength  calibration polynomial (int; default: 0). The full name of this option for
              the EsoRex configuration file is <b>vimos.vmmoscalib.wdegree</b> [default = <u>0</u>].

       <b>--wradius</b> <u>&lt;int&gt;</u>
              Search radius if iterating pattern-matching with first-guess method (pixel) (int; default: 4). The
              full name of this option for the EsoRex configuration file is <b>vimos.vmmoscalib.wradius</b> [default  =
              <u>4</u>].

       <b>--wreject</b> <u>&lt;float&gt;</u>
              Rejection  threshold  in  dispersion  relation fit (pixel) (float; default: 1.0). The full name of
              this option for the EsoRex configuration file is <b>vimos.vmmoscalib.wreject</b> [default = <u>1.0</u>].

       <b>--wmodelss</b> <u>&lt;int&gt;</u>
              Interpolation mode of wavelength solution (0 = no interpolation, 1 = fill gaps, 2 = global  model)
              (int;  default:  2).  The  full  name  of  this  option  for  the  EsoRex  configuration  file  is
              <b>vimos.vmmoscalib.wmodelss</b> [default = <u>2</u>].

       <b>--wmodemos</b> <u>&lt;int&gt;</u>
              Interpolation mode of wavelength solution (0 = no interpolation, 1 = local (slit)  solution,  2  =
              global model) (int; default: 1). The full name of this option for the EsoRex configuration file is
              <b>vimos.vmmoscalib.wmodemos</b> [default = <u>1</u>].

       <b>--ignore_lines</b> <u>&lt;str&gt;</u>
              Catalog lines nearest to wavelengths in this list will be ignored for wavelength calibration (str;
              default:   ´´).   The   full   name   of   this  option  for  the  EsoRex  configuration  file  is
              <b>vimos.vmmoscalib.ignore_lines</b> [default = ].

       <b>--used_linesets</b> <u>&lt;str&gt;</u>
              Linesets to use. Valid are ´standard´ and´extended´ (see column LINE_SET in  the  line  catalogue)
              (str;  default:  ´standard´).  The  full  name of this option for the EsoRex configuration file is
              <b>vimos.vmmoscalib.used_linesets</b> [default = <u>standard</u>].

       <b>--cdegree</b> <u>&lt;int&gt;</u>
              Degree of spectral curvature polynomial (int; default: 0). The full name of this  option  for  the
              EsoRex configuration file is <b>vimos.vmmoscalib.cdegree</b> [default = <u>0</u>].

       <b>--cmode</b> <u>&lt;int&gt;</u>
              Interpolation  mode  of  curvature solution applicable to MOS-like data (0 = no interpolation, 1 =
              fill gaps, 2 = global model) (int; default: 1). The full  name  of  this  option  for  the  EsoRex
              configuration file is <b>vimos.vmmoscalib.cmode</b> [default = <u>1</u>].

       <b>--startwavelength</b> <u>&lt;float&gt;</u>
              Start  wavelength  in  spectral extraction (float; default: 0.0). The full name of this option for
              the EsoRex configuration file is <b>vimos.vmmoscalib.startwavelength</b> [default = <u>0.0</u>].

       <b>--endwavelength</b> <u>&lt;float&gt;</u>
              End wavelength in spectral extraction (float; default: 0.0). The full name of this option for  the
              EsoRex configuration file is <b>vimos.vmmoscalib.endwavelength</b> [default = <u>0.0</u>].

       <b>--reference</b> <u>&lt;float&gt;</u>
              Reference  wavelength  for  slit  map  (float; default: 0.0). The full name of this option for the
              EsoRex configuration file is <b>vimos.vmmoscalib.reference</b> [default = <u>0.0</u>].

       <b>--slit_ident</b> <u>&lt;bool&gt;</u>
              Attempt slit  identification.For  multiplexing  data  slit  identification  is  always  performed.
              Switching  it  off  will  cause systematic errors in the absolute flux calibration if the FLAT_SED
              correction is used (see pipeline manual for details) (bool; default: True). The full name of  this
              option for the EsoRex configuration file is <b>vimos.vmmoscalib.slit_ident</b> [default = <u>True</u>].

       <b>--s_degree</b> <u>&lt;int&gt;</u>
              Polynomial  degree for the flat field fitting along spatial direction (int; default: -1). The full
              name of this option for the EsoRex configuration file is <b>vimos.vmmoscalib.s_degree</b> [default = <u>-1</u>].

       <b>--sradius</b> <u>&lt;int&gt;</u>
              Smooth box radius for flat field along spatial direction (used if s_degree  &lt;  0)  (int;  default:
              -1).  The  full  name of this option for the EsoRex configuration file is <b>vimos.vmmoscalib.sradius</b>
              [default = <u>-1</u>].

       <b>--d_nknots</b> <u>&lt;int&gt;</u>
              Number of knots in flat field fitting splines along dispersion direction (int; default:  -1).  The
              full name of this option for the EsoRex configuration file is <b>vimos.vmmoscalib.d_nknots</b> [default =
              <u>-1</u>].

       <b>--dradius</b> <u>&lt;int&gt;</u>
              Smooth  box  radius for flat field along dispersion direction (if d_knots &lt; 0) (int; default: 10).
              The full name of this  option  for  the  EsoRex  configuration  file  is  <b>vimos.vmmoscalib.dradius</b>
              [default = <u>10</u>].

       <b>--fit_threshold</b> <u>&lt;float&gt;</u>
              Threshold  percentage  for flat spline fitting with respect to the maximum (float; default: 0.01).
              The full name of this option for the EsoRex configuration file  is  <b>vimos.vmmoscalib.fit_threshold</b>
              [default = <u>0.01</u>].

       <b>--line_ident_tol</b> <u>&lt;float&gt;</u>
              Tolerance  for  the  ratio  of detected lines vs reference lines. This is used during for arc line
              identification. (float; default: 0.05). The full name of this option for the EsoRex  configuration
              file is <b>vimos.vmmoscalib.line_ident_tol</b> [default = <u>0.05</u>].

       <b>--normalise_spa_local</b> <u>&lt;bool&gt;</u>
              If  TRUE  the  normalization along the spatial axis is performed row-by- row otherwise a collapsed
              slit is used. (bool; default: True). The full name of this option  for  the  EsoRex  configuration
              file is <b>vimos.vmmoscalib.normalise_spa_local</b> [default = <u>True</u>].

       Note  that  it  is  possible to create a configuration file containing these options, along with suitable
       default values. Please refer to the details provided by the 'esorex --help' command.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       The full documentation for the vimos pipeline can be downloaded as a PDF file using the following URL:

              <b><a href="ftp://ftp.eso.org/pub/dfs/pipelines/vimos/vimos-pipeline-manual-6.9.pdf">ftp://ftp.eso.org/pub/dfs/pipelines/vimos/vimos-pipeline-manual-6.9.pdf</a></b>

       An   overview   over   the   existing   ESO   pipelines    can    be    found    on    the    web    page
       <b>https://www.eso.org/sci/software/pipelines/</b>.

       Basic documentation about the EsoRex program can be found at the esorex (1) man page.

       It   is   possible   to   call   the   pipelines   from   python   using  the  python-cpl  package.   See
       <b>https://packages.python.org/python-cpl/index.html</b> for further information.

       The other recipes of the vimos pipeline are <u><a href="../man7/vimos_ima_bias.7.html">vimos_ima_bias</a></u>(7), <u><a href="../man7/vimos_ima_dark.7.html">vimos_ima_dark</a></u>(7), <u><a href="../man7/vimos_ima_det_noise.7.html">vimos_ima_det_noise</a></u>(7),
       <u><a href="../man7/vimos_ima_fringe.7.html">vimos_ima_fringe</a></u>(7), <u><a href="../man7/vimos_ima_science.7.html">vimos_ima_science</a></u>(7), <u><a href="../man7/vimos_ima_standard.7.html">vimos_ima_standard</a></u>(7), <u><a href="../man7/vimos_ima_twilight_flat.7.html">vimos_ima_twilight_flat</a></u>(7),  <u><a href="../man7/vmbias.7.html">vmbias</a></u>(7),
       <u><a href="../man7/vmdark.7.html">vmdark</a></u>(7),    <u><a href="../man7/vmdet.7.html">vmdet</a></u>(7),    <u><a href="../man7/vmifucalib.7.html">vmifucalib</a></u>(7),    <u><a href="../man7/vmifucombine.7.html">vmifucombine</a></u>(7),    <u><a href="../man7/vmifucombinecube.7.html">vmifucombinecube</a></u>(7),    <u><a href="../man7/vmifuscience.7.html">vmifuscience</a></u>(7),
       <u><a href="../man7/vmifustandard.7.html">vmifustandard</a></u>(7), <u><a href="../man7/vmmosscience.7.html">vmmosscience</a></u>(7), <u><a href="../man7/vmspphot.7.html">vmspphot</a></u>(7)

</pre><h4><b>VERSION</b></h4><pre>
       vmmoscalib 4.1.7

</pre><h4><b>AUTHOR</b></h4><pre>
       Carlo Izzo &lt;https://support.eso.org&gt;

</pre><h4><b>BUG</b> <b>REPORTS</b></h4><pre>
       Please report any problems to https://support.eso.org. Alternatively, you may send a report  to  the  ESO
       User Support Department &lt;<a href="mailto:usd-help@eso.org">usd-help@eso.org</a>&gt;.

</pre><h4><b>LICENSE</b></h4><pre>
       This  file  is  currently part of the VIMOS Instrument Pipeline Copyright (C) 2002-2006 European Southern
       Observatory

       This program is free software; you can redistribute it and/or modify  it  under  the  terms  of  the  GNU
       General  Public License as published by the Free Software Foundation; either version 2 of the License, or
       (at your option) any later version.

       This program is distributed in the hope that it will be useful, but WITHOUT ANY  WARRANTY;  without  even
       the  implied  warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public
       License for more details.

       You should have received a copy of the GNU General Public License along with this program; if not,  write
       to the Free Software Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA  02110-1301  USA

vmmoscalib                                            4.1.7                                        <u><a href="../man7/VMMOSCALIB.7.html">VMMOSCALIB</a></u>(7)
</pre>
 </div>
</div></section>
</div>
</body>
</html>