<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>fors_calib - Determination of the extraction mask</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/noble/+package/cpl-plugin-fors-doc">cpl-plugin-fors-doc_5.5.7+dfsg-2build1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       fors_calib - Determination of the extraction mask

</pre><h4><b>SYNOPSIS</b></h4><pre>
       esorex <b>fors_calib</b> [OPTIONS] FILE.sof

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This  recipe  is  used  to identify reference lines on LSS, MOS and MXU arc lamp exposures, and trace the
       spectral edges on the corresponding flat field exposures. This  information  is  used  to  determine  the
       spectral  extraction  mask  to  be  applied  in  the scientific data reduction, performed with the recipe
       fors_science.

       This recipe accepts both FORS1 and FORS2 frames. The input arc lamp and flat field exposures are  assumed
       to  be  obtained  quasi-simultaneously,  so  that  they would be described by exactly the same instrument
       distortions.

       A line catalog must be specified, containing the wavelengths of the reference arc lamp lines used for the
       wavelength calibration. A grism table (typically depending on the instrument mode, and in  particular  on
       the  grism used) may also be specified: this table contains a default recipe parameter setting to control
       the way spectra are extracted for a specific instrument mode, as it is used  for  automatic  run  of  the
       pipeline  on  Paranal  and  in  Garching.  If  this table is specified, it will modify the default recipe
       parameter setting, with the exception of those parameters which have  been  explicitly  modified  on  the
       command line.

       If  a  grism  table  is  not  specified,  the input recipe parameters values will always be read from the
       command line, or from an esorex configuration file if present, or from their generic default values (that
       are rarely meaningful). Finally a master bias frame must be input to this recipe.

       In the table below the MXU acronym can be read alternatively as  MOS  and  LSS,  with  the  exception  of
       CURV_COEFF_LSS,  CURV_TRACES_LSS, SPATIAL_MAP_LSS, SPECTRA_DETECTION_LSS, and and SLIT_MAP_LSS, which are
       never created. The products SPECTRA_DETECTION_MXU, SLIT_MAP_MXU, and DISP_RESIDUALS_MXU, are just created
       if the --check parameter is set to true. The product GLOBAL_DISTORTION_TABLE is just created if more than
       12 separate spectra are found in the CCD.

       Input files:

         DO category:             Type:       Explanation:         Required:
         SCREEN_FLAT_MXU          Raw         Flat field exposures    Y
         LAMP_MXU                 Raw         Arc lamp exposure       Y
         MASTER_BIAS              Calib       Master Bias frame       Y
         MASTER_LINECAT           Calib       Line catalog            Y
         GRISM_TABLE              Calib       Grism table             .

       Output files:

         DO category:             Data type:  Explanation:
         MASTER_SCREEN_FLAT_MXU   FITS image  Combined (sum) flat field
         MASTER_NORM_FLAT_MXU     FITS image  Normalised flat field
         MAPPED_SCREEN_FLAT_MXU   FITS image  Wavelength calibrated flat field
         MAPPED_NORM_FLAT_MXU     FITS image  Wavelength calibrated normalised flat
         REDUCED_LAMP_MXU         FITS image  Wavelength calibrated arc spectrum
         DISP_COEFF_MXU           FITS table  Inverse dispersion coefficients
         DISP_RESIDUALS_MXU       FITS image  Residuals in wavelength calibration
         DISP_RESIDUALS_TABLE_MXU FITS table  Residuals in wavelength calibration
         DELTA_IMAGE_MXU          FITS image  Offset vs linear wavelength calib
         WAVELENGTH_MAP_MXU       FITS image  Wavelength for each pixel on CCD
         SPECTRA_DETECTION_MXU    FITS image  Check for preliminary detection
         SLIT_MAP_MXU             FITS image  Map of central wavelength on CCD
         CURV_TRACES_MXU          FITS table  Spectral curvature traces
         CURV_COEFF_MXU           FITS table  Spectral curvature coefficients
         SPATIAL_MAP_MXU          FITS image  Spatial position along slit on CCD
         SPECTRAL_RESOLUTION_MXU  FITS table  Resolution at reference arc lines
         DETECTED_LINES_MXU       FITS table  All the lines detected in the arc
         ARC_RECTIFIED_MXU        FITS image  The spatial rectified arc
         SLIT_LOCATION_MXU        FITS table  Slits on product frames and CCD
         GLOBAL_DISTORTION_TABLE  FITS table  Global distortions table
         FLAT_SED_LSS             FITS image  Average SED for each of the slitsi

</pre><h4><b>OPTIONS</b></h4><pre>
       <b>--dispersion</b> <u>&lt;float&gt;</u>
              Expected spectral dispersion (Angstrom/pixel) (float; default: 0.0). The full name of this  option
              for the EsoRex configuration file is <b>fors.fors_calib.dispersion</b> [default = <u>0.0</u>].

       <b>--peakdetection</b> <u>&lt;float&gt;</u>
              Initial peak detection threshold (ADU) (float; default: 0.0). The full name of this option for the
              EsoRex configuration file is <b>fors.fors_calib.peakdetection</b> [default = <u>0.0</u>].

       <b>--wdegree</b> <u>&lt;int&gt;</u>
              Degree  of  wavelength  calibration polynomial (int; default: 0). The full name of this option for
              the EsoRex configuration file is <b>fors.fors_calib.wdegree</b> [default = <u>0</u>].

       <b>--wradius</b> <u>&lt;int&gt;</u>
              Search radius if iterating pattern-matching with first-guess method (int; default:  4).  The  full
              name of this option for the EsoRex configuration file is <b>fors.fors_calib.wradius</b> [default = <u>4</u>].

       <b>--wreject</b> <u>&lt;float&gt;</u>
              Rejection  threshold  in  dispersion  relation fit (pixel) (float; default: 0.7). The full name of
              this option for the EsoRex configuration file is <b>fors.fors_calib.wreject</b> [default = <u>0.7</u>].

       <b>--wmode</b> <u>&lt;int&gt;</u>
              Interpolation mode of wavelength solution applicable to LSS-like data (0 = no interpolation,  1  =
              fill  gaps,  2  =  global  model)  (int;  default: 2). The full name of this option for the EsoRex
              configuration file is <b>fors.fors_calib.wmode</b> [default = <u>2</u>].

       <b>--wmosmode</b> <u>&lt;int&gt;</u>
              Interpolation mode of wavelength solution (0 = no interpolation, 1 = local (slit)  solution,  2  =
              global model) (int; default: 0). The full name of this option for the EsoRex configuration file is
              <b>fors.fors_calib.wmosmode</b> [default = <u>0</u>].

       <b>--ignore_lines</b> <u>&lt;str&gt;</u>
              Catalog lines nearest to wavelengths in this list will be ignored for wavelength calibration (str;
              default:   ´´).   The   full   name   of   this  option  for  the  EsoRex  configuration  file  is
              <b>fors.fors_calib.ignore_lines</b> [default = ].

       <b>--used_linesets</b> <u>&lt;str&gt;</u>
              Linesets to use. Valid are ´standard´ and´extended´ (see column LINE_SET in  the  line  catalogue)
              (str;  default:  ´standard´).  The  full  name of this option for the EsoRex configuration file is
              <b>fors.fors_calib.used_linesets</b> [default = <u>standard</u>].

       <b>--cdegree</b> <u>&lt;int&gt;</u>
              Degree of spectral curvature polynomial (int; default: -1). The full name of this option  for  the
              EsoRex configuration file is <b>fors.fors_calib.cdegree</b> [default = <u>-1</u>].

       <b>--cmode</b> <u>&lt;int&gt;</u>
              Interpolation  mode  of  curvature solution applicable to MOS-like data (0 = no interpolation, 1 =
              fill gaps, 2 = global model) (int; default: 1). The full  name  of  this  option  for  the  EsoRex
              configuration file is <b>fors.fors_calib.cmode</b> [default = <u>1</u>].

       <b>--startwavelength</b> <u>&lt;float&gt;</u>
              Start  wavelength  in  spectral extraction (float; default: 0.0). The full name of this option for
              the EsoRex configuration file is <b>fors.fors_calib.startwavelength</b> [default = <u>0.0</u>].

       <b>--endwavelength</b> <u>&lt;float&gt;</u>
              End wavelength in spectral extraction (float; default: 0.0). The full name of this option for  the
              EsoRex configuration file is <b>fors.fors_calib.endwavelength</b> [default = <u>0.0</u>].

       <b>--slit_ident</b> <u>&lt;bool&gt;</u>
              Attempt  slit  identification  for MOS or MXU (bool; default: False). The full name of this option
              for the EsoRex configuration file is <b>fors.fors_calib.slit_ident</b> [default = <u>False</u>].

       <b>--stack_method</b> <u>&lt;str&gt;</u>
              Frames combination method (str; default: ´sum´). The full name  of  this  option  for  the  EsoRex
              configuration file is <b>fors.fors_calib.stack_method</b> [default = <u>sum</u>].

       <b>--ksigma</b> <u>&lt;str&gt;</u>
              Low  and  high threshold in ksigma method (str; default: ´-3.0,3.0´). The full name of this option
              for the EsoRex configuration file is <b>fors.fors_calib.ksigma</b> [default = <u>-3.0,3.0</u>].

       <b>--kiter</b> <u>&lt;int&gt;</u>
              Max number of iterations in ksigma method (int; default: 999). The full name of  this  option  for
              the EsoRex configuration file is <b>fors.fors_calib.kiter</b> [default = <u>999</u>].

       <b>--s_degree</b> <u>&lt;int&gt;</u>
              Polynomial  degree for the flat field fitting along spatial direction (int; default: -1). The full
              name of this option for the EsoRex configuration file is <b>fors.fors_calib.s_degree</b> [default = <u>-1</u>].

       <b>--sradius</b> <u>&lt;int&gt;</u>
              Smooth box radius for flat field along spatial direction (int; default: -1). The full name of this
              option for the EsoRex configuration file is <b>fors.fors_calib.sradius</b> [default = <u>-1</u>].

       <b>--d_nknots</b> <u>&lt;int&gt;</u>
              Number of knots in flat field fitting splines along dispersion direction (int; default:  -1).  The
              full  name of this option for the EsoRex configuration file is <b>fors.fors_calib.d_nknots</b> [default =
              <u>-1</u>].

       <b>--dradius</b> <u>&lt;int&gt;</u>
              Smooth box radius (median) for flat field along dispersion direction (int; default: 10). The  full
              name of this option for the EsoRex configuration file is <b>fors.fors_calib.dradius</b> [default = <u>10</u>].

       <b>--dradius_aver</b> <u>&lt;int&gt;</u>
              Smooth  box  radius  (average)  for  flat field along dispersion direction (performed after median
              smoothing) (int; default: -1). The full name of this option for the EsoRex configuration  file  is
              <b>fors.fors_calib.dradius_aver</b> [default = <u>-1</u>].

       <b>--fit_threshold</b> <u>&lt;float&gt;</u>
              Threshold  percentage  for  flat spline fittingwith respect to the maximum (float; default: 0.01).
              The full name of this option for the EsoRex configuration  file  is  <b>fors.fors_calib.fit_threshold</b>
              [default = <u>0.01</u>].

       <b>--nonlinear_level</b> <u>&lt;float&gt;</u>
              Level  above  which  the  detector  is not linear (float; default: 60000.0). The full name of this
              option for the EsoRex configuration file is <b>fors.fors_calib.nonlinear_level</b> [default = <u>60000.0</u>].

       <b>--max_nonlinear_ratio</b> <u>&lt;float&gt;</u>
              Maximum allowed ratio of non-linear pixels per slit (float; default: 0.2). The full name  of  this
              option for the EsoRex configuration file is <b>fors.fors_calib.max_nonlinear_ratio</b> [default = <u>0.2</u>].

       Note  that  it  is  possible to create a configuration file containing these options, along with suitable
       default values. Please refer to the details provided by the 'esorex --help' command.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       The full documentation for the fors pipeline can be downloaded as a PDF file using the following URL:

              <b><a href="ftp://ftp.eso.org/pub/dfs/pipelines/fors/fors-pipeline-manual-4.9.pdf">ftp://ftp.eso.org/pub/dfs/pipelines/fors/fors-pipeline-manual-4.9.pdf</a></b>

       An   overview   over   the   existing   ESO   pipelines    can    be    found    on    the    web    page
       <b>https://www.eso.org/sci/software/pipelines/</b>.

       Basic documentation about the EsoRex program can be found at the esorex (1) man page.

       It   is   possible   to   call   the   pipelines   from   python   using  the  python-cpl  package.   See
       <b>https://packages.python.org/python-cpl/index.html</b> for further information.

       The other recipes of  the  fors  pipeline  are  <u><a href="../man7/fors_align_sky.7.html">fors_align_sky</a></u>(7),  <u><a href="../man7/fors_align_sky_lss.7.html">fors_align_sky_lss</a></u>(7),  <u><a href="../man7/fors_bias.7.html">fors_bias</a></u>(7),
       <u><a href="../man7/fors_config.7.html">fors_config</a></u>(7),    <u><a href="../man7/fors_dark.7.html">fors_dark</a></u>(7),    <u><a href="../man7/fors_detect_objects.7.html">fors_detect_objects</a></u>(7),    <u><a href="../man7/fors_detect_spectra.7.html">fors_detect_spectra</a></u>(7),   <u><a href="../man7/fors_extract.7.html">fors_extract</a></u>(7),
       <u><a href="../man7/fors_extract_objects.7.html">fors_extract_objects</a></u>(7),       <u><a href="../man7/fors_extract_slits.7.html">fors_extract_slits</a></u>(7),       <u><a href="../man7/fors_flatfield.7.html">fors_flatfield</a></u>(7),       <u><a href="../man7/fors_img_science.7.html">fors_img_science</a></u>(7),
       <u><a href="../man7/fors_img_screen_flat.7.html">fors_img_screen_flat</a></u>(7),      <u><a href="../man7/fors_img_sky_flat.7.html">fors_img_sky_flat</a></u>(7),      <u><a href="../man7/fors_normalise_flat.7.html">fors_normalise_flat</a></u>(7),      <u><a href="../man7/fors_photometry.7.html">fors_photometry</a></u>(7),
       <u><a href="../man7/fors_pmos_calib.7.html">fors_pmos_calib</a></u>(7), <u><a href="../man7/fors_pmos_extract.7.html">fors_pmos_extract</a></u>(7),  <u><a href="../man7/fors_pmos_science.7.html">fors_pmos_science</a></u>(7),  <u><a href="../man7/fors_remove_bias.7.html">fors_remove_bias</a></u>(7),  <u><a href="../man7/fors_resample.7.html">fors_resample</a></u>(7),
       <u><a href="../man7/fors_science.7.html">fors_science</a></u>(7),  <u><a href="../man7/fors_spec_mflat.7.html">fors_spec_mflat</a></u>(7),  <u><a href="../man7/fors_subtract_sky.7.html">fors_subtract_sky</a></u>(7),  <u><a href="../man7/fors_subtract_sky_lss.7.html">fors_subtract_sky_lss</a></u>(7),  <u><a href="../man7/fors_sumflux.7.html">fors_sumflux</a></u>(7),
       <u><a href="../man7/fors_trace_flat.7.html">fors_trace_flat</a></u>(7), <u><a href="../man7/fors_wave_calib.7.html">fors_wave_calib</a></u>(7), <u><a href="../man7/fors_wave_calib_lss.7.html">fors_wave_calib_lss</a></u>(7), <u><a href="../man7/fors_zeropoint.7.html">fors_zeropoint</a></u>(7)

</pre><h4><b>VERSION</b></h4><pre>
       fors_calib 5.5.7

</pre><h4><b>AUTHOR</b></h4><pre>
       Carlo Izzo &lt;<a href="mailto:usd-help@eso.org">usd-help@eso.org</a>&gt;

</pre><h4><b>BUG</b> <b>REPORTS</b></h4><pre>
       Please report any problems to <a href="mailto:usd-help@eso.org">usd-help@eso.org</a>. Alternatively, you may send a  report  to  the  ESO  User
       Support Department &lt;<a href="mailto:usd-help@eso.org">usd-help@eso.org</a>&gt;.

</pre><h4><b>LICENSE</b></h4><pre>
       This  file  is  currently  part of the FORS Instrument Pipeline Copyright (C) 2002-2010 European Southern
       Observatory

       This program is free software; you can redistribute it and/or modify  it  under  the  terms  of  the  GNU
       General  Public License as published by the Free Software Foundation; either version 2 of the License, or
       (at your option) any later version.

       This program is distributed in the hope that it will be useful, but WITHOUT ANY  WARRANTY;  without  even
       the  implied  warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public
       License for more details.

       You should have received a copy of the GNU General Public License along with this program; if not,  write
       to the Free Software Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA  02110-1301  USA

fors_calib                                            5.5.7                                        <u><a href="../man7/FORS_CALIB.7.html">FORS_CALIB</a></u>(7)
</pre>
 </div>
</div></section>
</div>
</body>
</html>