<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>termkey - terminal keypress reading library</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libtermkey-dev">libtermkey-dev_0.22-2_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       termkey - terminal keypress reading library

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>termkey</b>  is  a  library  that  allows  programs  to  read  and interpret keypress and other events from a
       terminal. It understands encoding schemes used by terminals to encode keypresses, and UTF-8 , allowing it
       to return events representing key events.

       <b>termkey</b> operates in a pseudo object-oriented fashion. It  provides  one  function,  <b><a href="../man3/termkey_new.3.html">termkey_new</a></b>(3),  that
       returns  a  pointer  to a newly-allocated structure. All other functions take this pointer as their first
       argument. A typical use of this library would consist of a call  to  <b>termkey_new</b>()  to  construct  a  new
       instance  to  represent  the  <u>stdin</u>  stream,  then  use  the  <b><a href="../man3/termkey_waitkey.3.html">termkey_waitkey</a></b>(3) function to wait for and
       interpret key press events. The <b><a href="../man3/termkey_destroy.3.html">termkey_destroy</a></b>(3) function can be used to deallocate resources  used  by
       the instance if the program has finished using it.

   <b>Reading</b> <b>Events</b>
       Each  instance  of  a  <b>termkey</b>  structure may be used in one of three ways by the program. It may be used
       synchronously, blocking to wait for  keypresses  from  a  filehandle.  It  may  be  used  asynchronously,
       returning  keypresses if they are available, while co-operating with a non-blocking program. Or it may be
       used abstractly, interpreting key press bytes fed to it directly by the containing program.

       To obtain the next key event synchronously, a program  may  call  <b><a href="../man3/termkey_waitkey.3.html">termkey_waitkey</a></b>(3).  This  will  either
       return  an  event  from  its  internal buffer, or block until a key is available, returning it when it is
       ready. It behaves similarly to <b><a href="../man3/getc.3.html">getc</a></b>(3), <b><a href="../man3/fgetc.3.html">fgetc</a></b>(3), or similar, except  that  it  understands  and  returns
       entire key press events, rather than single bytes.

       To  work  with an asynchronous program, two other functions are used. <b><a href="../man3/termkey_advisereadable.3.html">termkey_advisereadable</a></b>(3) informs a
       <b>termkey</b> instance that more bytes of input may be available from  its  file  handle,  so  it  should  call
       <b><a href="../man2/read.2.html">read</a></b>(2)  to  obtain  them. The program can then call <b><a href="../man3/termkey_getkey.3.html">termkey_getkey</a></b>(3) to extract key press events out of
       the internal buffer, in a way similar to <b>termkey_waitkey</b>().

       Finally, bytes of input can be fed into the <b>termkey</b> instance directly, by calling  <b><a href="../man3/termkey_push_bytes.3.html">termkey_push_bytes</a></b>(3).
       This  may  be useful if the bytes have already been read from the terminal by the application, or even in
       situations that don't directly involve a terminal filehandle. Because of these situations, it is possible
       to construct a <b>termkey</b> instance not associated with a file handle, by passing -1 as the file descriptor.

       A <b>termkey</b> instance contains a buffer of pending bytes that  have  been  read  but  not  yet  consumed  by
       <b><a href="../man3/termkey_getkey.3.html">termkey_getkey</a></b>(3).  <b><a href="../man3/termkey_get_buffer_remaining.3.html">termkey_get_buffer_remaining</a></b>(3) returns the number of bytes of buffer space currently
       free in the instance. <b><a href="../man3/termkey_set_buffer_size.3.html">termkey_set_buffer_size</a></b>(3) and <b><a href="../man3/termkey_get_buffer_size.3.html">termkey_get_buffer_size</a></b>(3) can be  used  to  control
       and return the total size of this buffer.

   <b>Key</b> <b>Events</b>
       Key  events  are  stored  in structures. Each structure holds details of one key event. This structure is
       defined as follows.

           typedef struct {
               TermKeyType type;
               union {
                   long       codepoint; /* TERMKEY_TYPE_UNICODE  */
                   int        number;    /* TERMKEY_TYPE_FUNCTION */
                   TermKeySym sym;       /* TERMKEY_TYPE_KEYSYM   */
               } code;
               int modifiers;
               char utf8[7];
           } TermKeyKey;

       The <u>type</u> field indicates the type of event, and determines which of the members  of  the  <u>code</u>  union  is
       valid. It will be one of the following constants:

       <b>TERMKEY_TYPE_UNICODE</b>
              a  Unicode  codepoint.  This  value  indicates  that <u>code.codepoint</u> is valid, and will contain the
              codepoint number of the keypress. In Unicode mode (if the <b>TERMKEY_FLAG_UTF8</b> bit is set) this  will
              be its Unicode character number. In raw byte mode, this will contain a single 8-bit byte.

       <b>TERMKEY_TYPE_FUNCTION</b>
              a  numbered  function key. This value indicates that <u>code.number</u> is valid, and contains the number
              of the numbered function key.

       <b>TERMKEY_TYPE_KEYSYM</b>
              a symbolic key. This value indicates that <u>code.sym</u> is valid, and contains the symbolic key value.

       <b>TERMKEY_TYPE_MOUSE</b>
              a mouse button press, release, or movement.  The  <u>code</u>  structure  should  be  considered  opaque;
              <b><a href="../man3/termkey_interpret_mouse.3.html">termkey_interpret_mouse</a></b>(3) may be used to interpret it.

       <b>TERMKEY_TYPE_POSITION</b>
              a    cursor    position    report.    The    <u>code</u>   structure   should   be   considered   opaque;
              <b><a href="../man3/termkey_interpret_position.3.html">termkey_interpret_position</a></b>(3) may be used to interpret it.

       <b>TERMKEY_TYPE_MODEREPORT</b>
              an  ANSI  or  DEC  mode  value  report.  The  <u>code</u>  structure   should   be   considered   opaque;
              <b><a href="../man3/termkey_interpret_modereport.3.html">termkey_interpret_modereport</a></b>(3) may be used to interpret it.

       <b>TERMKEY_TYPE_DCS</b>
              a  DCS  sequence  including  its  terminator.  The  <u>code</u>  structure  should  be considered opaque;
              <b><a href="../man3/termkey_interpret_string.3.html">termkey_interpret_string</a></b>(3) may be used to interpret it.

       <b>TERMKEY_TYPE_OSC</b>
              a OSC sequence  including  its  terminator.  The  <u>code</u>  structure  should  be  considered  opaque;
              <b><a href="../man3/termkey_interpret_string.3.html">termkey_interpret_string</a></b>(3) may be used to interpret it.

       <b>TERMKEY_TYPE_UNKNOWN_CSI</b>
              an    unrecognised   CSI   sequence.   The   <u>code</u>   structure   should   be   considered   opaque;
              <b><a href="../man3/termkey_interpret_csi.3.html">termkey_interpret_csi</a></b>(3) may be used to interpret it.

       The  <u>modifiers</u>  bitmask  is  composed  of   a   bitwise-or   of   the   constants   <b>TERMKEY_KEYMOD_SHIFT</b>,
       <b>TERMKEY_KEYMOD_CTRL</b> and <b>TERMKEY_KEYMOD_ALT</b>.

       The  <u>utf8</u> field is only set on events whose <u>type</u> is <b>TERMKEY_TYPE_UNICODE</b>. It should not be read for other
       events.

       Key events that represent special keys (<u>type</u> is <b>TERMKEY_TYPE_KEYSYM</b>) have with  them  as  symbolic  value
       that  identifies  the  special key, in <u>code.sym</u>. <b><a href="../man3/termkey_get_keyname.3.html">termkey_get_keyname</a></b>(3) may be used to turn this symbolic
       value into a string, and <b><a href="../man3/termkey_lookup_keyname.3.html">termkey_lookup_keyname</a></b>(3) may be used to turn string names into symbolic values.

       A pair of functions are also provided to convert  between  key  events  and  strings.  <b><a href="../man3/termkey_strfkey.3.html">termkey_strfkey</a></b>(3)
       converts a key event into a string, and <b><a href="../man3/termkey_strpkey.3.html">termkey_strpkey</a></b>(3) parses a string turning it into a key event.

       Key events may be compared for equality or ordering by using <b><a href="../man3/termkey_keycmp.3.html">termkey_keycmp</a></b>(3).

   <b>Control</b> <b>Flags</b>
       Details   of   the   behaviour   of  a  <b>termkey</b>  instance  are  controlled  by  two  bitmasks  of  flags.
       <b><a href="../man3/termkey_set_flags.3.html">termkey_set_flags</a></b>(3) and <b><a href="../man3/termkey_get_flags.3.html">termkey_get_flags</a></b>(3) set or  return  the  flags  used  to  control  the  general
       behaviour,  and  <b><a href="../man3/termkey_set_canonflags.3.html">termkey_set_canonflags</a></b>(3)  and  <b><a href="../man3/termkey_get_canonflags.3.html">termkey_get_canonflags</a></b>(3)  set  or return the flags that
       control the key value canonicalisation behaviour performed by <b><a href="../man3/termkey_canonicalise.3.html">termkey_canonicalise</a></b>(3).

       The following control flags are recognised.

       <b>TERMKEY_FLAG_NOINTERPRET</b>
              Do not attempt to interpret <u>C0</u> codes into  keysyms.  Instead  report  them  as  plain  <u>Ctrl-letter</u>
              events.

       <b>TERMKEY_FLAG_CONVERTKP</b>
              Convert xterm's alternative keypad symbols into the plain ASCII codes they would represent.

       <b>TERMKEY_FLAG_RAW</b>
              Ignore  locale  settings;  do  not  attempt  to recombine UTF-8 sequences. Instead report only raw
              values.

       <b>TERMKEY_FLAG_UTF8</b>
              Ignore locale settings; force UTF-8 recombining on. This flag overrides <b>TERMKEY_FLAG_RAW</b>.

       <b>TERMKEY_FLAG_NOTERMIOS</b>
              Even if the terminal file descriptor <u>fd</u> represents a TTY device,  do  not  call  the  <b><a href="../man3/tcsetattr.3.html">tcsetattr</a></b>(3)
              <b>termios</b> function on it to set it to canonical input mode.

       <b>TERMKEY_FLAG_SPACESYMBOL</b>
              Report  space  as  being  a symbolic key rather than a Unicode codepoint. Setting or clearing this
              flag in fact sets or clears the <b>TERMKEY_CANON_SPACESYMBOL</b> canonicalisation flag.

       <b>TERMKEY_FLAG_CTRLC</b>
              Disable the <b>SIGINT</b> behaviour of <u>Ctrl-C</u>. If this flag is provided, then <u>Ctrl-C</u> will be available as
              a normal keypress, rather than sending the process group a <b>SIGINT</b>. This  flag  only  takes  effect
              without <b>TERMKEY_FLAG_NOTERMIOS</b>; with it, none of the signal keys are disabled anyway.

       <b>TERMKEY_FLAG_EINTR</b>
              Without  this flag, IO operations are retried when interrupted by a signal (<b>EINTR</b>). With this flag
              the <b>TERMKEY_RES_ERROR</b> result is returned instead.

       <b>TERMKEY_FLAG_NOSTART</b>
              This   flag   is   only   meaningful   to   the   constructor   functions    <b><a href="../man3/termkey_new.3.html">termkey_new</a></b>(3)    and
              <b><a href="../man3/termkey_new_abstract.3.html">termkey_new_abstract</a></b>(3).  If  set,  the  constructor will not call <b><a href="../man3/termkey_start.3.html">termkey_start</a></b>(3) as part of the
              construction process. The user must call that at some future time  before  the  instance  will  be
              usable.

       The following canonicalisation flags are recognised.

       <b>TERMKEY_CANON_SPACESYMBOL</b>
              If  this  flag  is  set  then a Unicode space character is represented using the <b>TERMKEY_SYM_SPACE</b>
              symbol. If this flag is not set, it is represented by the U+0020 Unicode codepoint.

       <b>TERMKEY_CANON_DELBS</b>
              If this flag is set then an ASCII  DEL  character  is  represented  by  the  <b>TERMKEY_SYM_BACKSPACE</b>
              symbol.  If not, it is represented by <b>TERMKEY_SYM_DEL</b>. An ASCII BS character is always represented
              by <b>TERMKEY_SYM_BACKSPACE</b>, regardless of this flag.

   <b>Multi-byte</b> <b>Events</b>
       Special keys, mouse events, and UTF-8 encoded Unicode text, are all represented by more than one byte. If
       the start of a multi-byte sequence is seen by <b>termkey_waitkey</b>() it will wait a short time to see  if  the
       remainder  of  the  sequence  arrives.  If the sequence remains unfinished after this timeout, it will be
       returned  in  its  incomplete  state.  Partial  escape  sequences  are  returned   as   an   Escape   key
       (<b>TERMKEY_SYM_ESCAPE</b>) followed by the text contained in the sequence. Partial UTF-8 sequences are returned
       as the Unicode replacement character, U+FFFD.

       The amount of time that the <b>termkey</b> instance will wait is set by <b><a href="../man3/termkey_set_waittime.3.html">termkey_set_waittime</a></b>(3), and is returned
       by <b><a href="../man3/termkey_get_waittime.3.html">termkey_get_waittime</a></b>(3). Initially it will be set to 50 miliseconds.

   <b>Mouse</b> <b>Events</b>
       The  <b>TERMKEY_TYPE_MOUSE</b>  event type indicates a mouse event. The <u>code</u> field of the event structure should
       be considered opaque, though <u>modifiers</u> will be valid. In order to obtain the details of the mouse  event,
       call  <b><a href="../man3/termkey_interpret_mouse.3.html">termkey_interpret_mouse</a></b>(3) passing the event structure and pointers to integers to store the result
       in.

       <b>termkey</b> recognises three mouse protocols: the original X10 protocol (CSI M followed by three bytes),  SGR
       encoding (CSI &lt; ... M, as requested by CSI ? 1006 h), and rxvt encoding (CSI ... M, as requested by CSI ?
       1015 h). Which encoding is in use is inferred automatically by <b>termkey</b>, and does not need to be specified
       explicitly.

   <b>Position</b> <b>Events</b>
       The  <b>TERMKEY_TYPE_POSITION</b>  event  type  indicates  a cursor position report. This is typically sent by a
       terminal in response to the Report Cursor Position command (CSI ? 6 n). The event bytes are  opaque,  but
       can  be  obtained  by  calling  <b><a href="../man3/termkey_interpret_position.3.html">termkey_interpret_position</a></b>(3) passing the event structure and pointers to
       integers to store the result in. Note that only a DEC CPR sequence (CSI ? R) is recognised, and  not  the
       non-DEC prefixed CSI R because the latter could be interpreted as the F3 function key instead.

   <b>Mode</b> <b>Reports</b>
       The  <b>TERMKEY_TYPE_MODEREPORT</b> event type indicates an ANSI or DEC mode report. This is typically sent by a
       terminal in response to the Request Mode command (CSI $p or CSI ? $p). The event bytes  are  opaque,  but
       can  be  obtained  by calling <b><a href="../man3/termkey_interpret_modereport.3.html">termkey_interpret_modereport</a></b>(3) passing the event structure and pointers to
       integers to store the result in.

   <b>Control</b> <b>Strings</b>
       The <b>TERMKEY_TYPE_DCS</b> and <b>TERMKEY_TYPE_OSC</b> event types indicate a DCS or OSC  control  string.  These  are
       typically  sent  by  the  terminal  in  response of similar kinds of strings being sent as queries by the
       application. The event bytes are opaque, but the body of the string itself can  be  obtained  by  calling
       <b><a href="../man3/termkey_interpret_string.3.html">termkey_interpret_string</a></b>(3)  immediately  after  this  event is received. The underlying <b>termkey</b> instance
       itself can only store one pending string, so the application should be sure to call this  function  in  a
       timely  manner  soon  after  the event is received; at the very least, before calling any other functions
       that will insert bytes into or remove key events from the instance.

   <b>Unrecognised</b> <b>CSIs</b>
       The <b>TERMKEY_TYPE_UNKNOWN_CSI</b> event type indicates a CSI sequence that the <b>termkey</b> does not recognise.  It
       will  have  been  extracted  from  the  stream, but is available to the application to inspect by calling
       <b><a href="../man3/termkey_interpret_csi.3.html">termkey_interpret_csi</a></b>(3). It is important that if the application wishes to inspect this sequence  it  is
       done  immediately,  before  any other IO operations on the <b>termkey</b> instance (specifically, before calling
       <b>termkey_waitkey</b>() or <b>termkey_getkey</b>() again), otherwise the buffer space consumed by the sequence will be
       overwritten. Other types of key event do not suffer  this  limitation  as  the  <b>TermKeyKey</b>  structure  is
       sufficient to contain all the information required.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man3/termkey_new.3.html">termkey_new</a></b>(3), <b><a href="../man3/termkey_waitkey.3.html">termkey_waitkey</a></b>(3), <b><a href="../man3/termkey_getkey.3.html">termkey_getkey</a></b>(3)

                                                                                                      <u><a href="../man7/TERMKEY.7.html">TERMKEY</a></u>(7)
</pre>
 </div>
</div></section>
</div>
</body>
</html>