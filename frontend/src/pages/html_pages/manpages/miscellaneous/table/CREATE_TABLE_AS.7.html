<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CREATE_TABLE_AS - define a new table from the results of a query</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/postgresql-client-17">postgresql-client-17_17.5-1build1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       CREATE_TABLE_AS - define a new table from the results of a query

</pre><h4><b>SYNOPSIS</b></h4><pre>
       CREATE [ [ GLOBAL | LOCAL ] { TEMPORARY | TEMP } | UNLOGGED ] TABLE [ IF NOT EXISTS ] <u>table_name</u>
           [ (<u>column_name</u> [, ...] ) ]
           [ USING <u>method</u> ]
           [ WITH ( <u>storage_parameter</u> [= <u>value</u>] [, ... ] ) | WITHOUT OIDS ]
           [ ON COMMIT { PRESERVE ROWS | DELETE ROWS | DROP } ]
           [ TABLESPACE <u>tablespace_name</u> ]
           AS <u>query</u>
           [ WITH [ NO ] DATA ]

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>CREATE</b> <b>TABLE</b> <b>AS</b> creates a table and fills it with data computed by a <b>SELECT</b> command. The table columns
       have the names and data types associated with the output columns of the <b>SELECT</b> (except that you can
       override the column names by giving an explicit list of new column names).

       <b>CREATE</b> <b>TABLE</b> <b>AS</b> bears some resemblance to creating a view, but it is really quite different: it creates a
       new table and evaluates the query just once to fill the new table initially. The new table will not track
       subsequent changes to the source tables of the query. In contrast, a view re-evaluates its defining
       <b>SELECT</b> statement whenever it is queried.

       <b>CREATE</b> <b>TABLE</b> <b>AS</b> requires CREATE privilege on the schema used for the table.

</pre><h4><b>PARAMETERS</b></h4><pre>
       GLOBAL or LOCAL
           Ignored for compatibility. Use of these keywords is deprecated; refer to CREATE TABLE
           (<b><a href="../man7/CREATE_TABLE.7.html">CREATE_TABLE</a></b>(7)) for details.

       TEMPORARY or TEMP
           If specified, the table is created as a temporary table. Refer to CREATE TABLE (<b><a href="../man7/CREATE_TABLE.7.html">CREATE_TABLE</a></b>(7)) for
           details.

       UNLOGGED
           If specified, the table is created as an unlogged table. Refer to CREATE TABLE (<b><a href="../man7/CREATE_TABLE.7.html">CREATE_TABLE</a></b>(7)) for
           details.

       IF NOT EXISTS
           Do not throw an error if a relation with the same name already exists; simply issue a notice and
           leave the table unmodified.

       <u>table_name</u>
           The name (optionally schema-qualified) of the table to be created.

       <u>column_name</u>
           The name of a column in the new table. If column names are not provided, they are taken from the
           output column names of the query.

       USING <u>method</u>
           This optional clause specifies the table access method to use to store the contents for the new
           table; the method needs be an access method of type TABLE. See Chapter 61 for more information. If
           this option is not specified, the default table access method is chosen for the new table. See
           default_table_access_method for more information.

       WITH ( <u>storage_parameter</u> [= <u>value</u>] [, ... ] )
           This clause specifies optional storage parameters for the new table; see Storage Parameters in the
           CREATE TABLE (<b><a href="../man7/CREATE_TABLE.7.html">CREATE_TABLE</a></b>(7)) documentation for more information. For backward-compatibility the
           WITH clause for a table can also include OIDS=FALSE to specify that rows of the new table should
           contain no OIDs (object identifiers), OIDS=TRUE is not supported anymore.

       WITHOUT OIDS
           This is backward-compatible syntax for declaring a table WITHOUT OIDS, creating a table WITH OIDS is
           not supported anymore.

       ON COMMIT
           The behavior of temporary tables at the end of a transaction block can be controlled using ON COMMIT.
           The three options are:

           PRESERVE ROWS
               No special action is taken at the ends of transactions. This is the default behavior.

           DELETE ROWS
               All rows in the temporary table will be deleted at the end of each transaction block.
               Essentially, an automatic <b>TRUNCATE</b> is done at each commit.

           DROP
               The temporary table will be dropped at the end of the current transaction block.

       TABLESPACE <u>tablespace_name</u>
           The <u>tablespace_name</u> is the name of the tablespace in which the new table is to be created. If not
           specified, default_tablespace is consulted, or temp_tablespaces if the table is temporary.

       <u>query</u>
           A <b>SELECT</b>, <b>TABLE</b>, or <b>VALUES</b> command, or an <b>EXECUTE</b> command that runs a prepared <b>SELECT</b>, <b>TABLE</b>, or
           <b>VALUES</b> query.

       WITH [ NO ] DATA
           This clause specifies whether or not the data produced by the query should be copied into the new
           table. If not, only the table structure is copied. The default is to copy the data.

</pre><h4><b>NOTES</b></h4><pre>
       This command is functionally similar to SELECT INTO (<b><a href="../man7/SELECT_INTO.7.html">SELECT_INTO</a></b>(7)), but it is preferred since it is
       less likely to be confused with other uses of the <b>SELECT</b> <b>INTO</b> syntax. Furthermore, <b>CREATE</b> <b>TABLE</b> <b>AS</b> offers
       a superset of the functionality offered by <b>SELECT</b> <b>INTO</b>.

</pre><h4><b>EXAMPLES</b></h4><pre>
       Create a new table films_recent consisting of only recent entries from the table films:

           CREATE TABLE films_recent AS
             SELECT * FROM films WHERE date_prod &gt;= '2002-01-01';

       To copy a table completely, the short form using the TABLE command can also be used:

           CREATE TABLE films2 AS
             TABLE films;

       Create a new temporary table films_recent, consisting of only recent entries from the table films, using
       a prepared statement. The new table will be dropped at commit:

           PREPARE recentfilms(date) AS
             SELECT * FROM films WHERE date_prod &gt; $1;
           CREATE TEMP TABLE films_recent ON COMMIT DROP AS
             EXECUTE recentfilms('2002-01-01');

</pre><h4><b>COMPATIBILITY</b></h4><pre>
       <b>CREATE</b> <b>TABLE</b> <b>AS</b> conforms to the SQL standard. The following are nonstandard extensions:

       •   The standard requires parentheses around the subquery clause; in PostgreSQL, these parentheses are
           optional.

       •   In the standard, the WITH [ NO ] DATA clause is required; in PostgreSQL it is optional.

       •   PostgreSQL handles temporary tables in a way rather different from the standard; see CREATE TABLE
           (<b><a href="../man7/CREATE_TABLE.7.html">CREATE_TABLE</a></b>(7)) for details.

       •   The WITH clause is a PostgreSQL extension; storage parameters are not in the standard.

       •   The PostgreSQL concept of tablespaces is not part of the standard. Hence, the clause TABLESPACE is an
           extension.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       CREATE MATERIALIZED VIEW (<b><a href="../man7/CREATE_MATERIALIZED_VIEW.7.html">CREATE_MATERIALIZED_VIEW</a></b>(7)), CREATE TABLE (<b><a href="../man7/CREATE_TABLE.7.html">CREATE_TABLE</a></b>(7)), <b><a href="../man7/EXECUTE.7.html">EXECUTE</a></b>(7),
       <b><a href="../man7/SELECT.7.html">SELECT</a></b>(7), SELECT INTO (<b><a href="../man7/SELECT_INTO.7.html">SELECT_INTO</a></b>(7)), <b><a href="../man7/VALUES.7.html">VALUES</a></b>(7)

PostgreSQL 17.5                                       2025                                    <u>CREATE</u> <u>TABLE</u> <u><a href="../man7/AS.7.html">AS</a></u>(7)
</pre>
 </div>
</div></section>
</div>
</body>
</html>