<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>action_notify - Generic notification handler for Torrus monitor</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/torrus-common">torrus-common_3.00-2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       action_notify - Generic notification handler for Torrus monitor

</pre><h4><b>SYNOPSIS</b></h4><pre>
        &lt;action name="notify"&gt;
          &lt;param name="action-type" value="exec" /&gt;
          &lt;param name="command"&gt;
            $TORRUS_BIN/action_notify
          &lt;/param&gt;
          &lt;param name="launch-when" value="set" /&gt;
        &lt;/action&gt;

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This program is designed for usage from a monitor action only. It takes the arguments from environment
       variables, as described in action-type "exec" in <b>Torrus</b> <b>XML</b> <b>Configuration</b> <b>Guide</b>.

       The handler reads its configuration from &lt;notify-siteconfig.pl&gt;, a small Perl file which defines the
       notification paths for various conditions.

       Example:

         %Torrus::Notify::programs =
           (
            'mailto' =&gt; '$TORRUS_BIN/action_printemail | /usr/bin/mail $ARG1',
            'page' =&gt; '<a href="file:///usr/lib/w3m/cgi-bin/w3mman2html.cgi?echo">/usr/bin/echo</a> $TORRUS_NODEPATH:$TORRUS_MONITOR ' .
            '&gt;&gt; /tmp/monitor.$ARG1.log'
            );

         %Torrus::Notify::policies =
           (
            'CUST_A' =&gt; {
                'match' =&gt; sub { $ENV{'TORRUS_P_notify_policy'} eq 'A' },
                'severity' =&gt; {
                    '3' =&gt; [ '<a href="mailto:aaa@domain.com">mailto:aaa@domain.com</a>',
                             '<a href="mailto:bbb@domain.com">mailto:bbb@domain.com</a>' ],
                    '5' =&gt; [ 'page:1234', '<a href="mailto:boss@domain.com">mailto:boss@domain.com</a>' ] } } );

       In this example, we define two message handlers: e-mail sender and a dummy replacement for a pager
       program. Then we define the notification policies. For the customer <u>A</u>, we define the policy so that the
       parameter "notify-policy" should match the name "A". The parameter is defined in the datasource tree and
       marks only those leaves that belong to this customer.  Then, depending on the monitor severity, different
       notification paths are defined. For severity values higher or equal 3, <a href="mailto:aaa@domain.com">aaa@domain.com</a> and <a href="mailto:bbb@domain.com">bbb@domain.com</a>
       will receive the email notifications, and for severity higher than or equal 5 all recipients will receive
       the notification.

       The "match" argument is a Perl subroutine, and can depend on various parameters, such as time of day or
       day of the week, the tree name, and so on.

</pre><h4><b>FILES</b></h4><pre>
       <u>/etc/torrus/conf/notify-siteconfig.pl</u>
           Notification policies configuration

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man8/torrus.8.html">torrus</a></b>(8)

</pre><h4><b>NOTES</b></h4><pre>
       See more documentation at Torrus home page: <a href="http://torrus.org">http://torrus.org</a>

</pre><h4><b>AUTHOR</b></h4><pre>
       Stanislav Sinyagin &lt;<a href="mailto:ssinyagin@k-open.com">ssinyagin@k-open.com</a>&gt;

torrus 3.00                                        2023-05-02                            <u><a href="../man7/TORRUS_ACTION_NOTIFY.7.html">TORRUS_ACTION_NOTIFY</a></u>(7)
</pre>
 </div>
</div></section>
</div>
</body>
</html>