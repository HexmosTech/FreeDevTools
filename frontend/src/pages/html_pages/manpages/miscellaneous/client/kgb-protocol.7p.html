<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KGB_protocol - specification of the client-server communication protocol</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/kgb-bot">kgb-bot_1.61-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       KGB_protocol - specification of the client-server communication protocol

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The protocol used by the KGB collaboration service is based on JSON-RPC (&lt;<a href="http://json-rpc.org/">http://json-rpc.org/</a>&gt;).

       KGB service helps collaboration by relaying notifications about commits in a version control system to
       IRC. It consists of client, hooked to the version control system which sends information about changes to
       the server, and a server, listening for client's notifications and relaying them on configured IRC
       channels.

</pre><h4><b>AUTHENTICATION</b></h4><pre>
       Message content is authenticated by using two HTTP headers. The <b>X-KGB-Project</b> header must contain the
       project ID, as defined in server's configuration. The <b>X-KGB-Auth</b> header must contain a SHA1 hash (in
       hexadecimal notation) calculated over the shared secret, the project ID and the JSON-encoded message.

       Upon receiving the HTTP request the server calculates the hash using the supplied project ID, the server
       copy of the shared secret for that project and the content of the HTTP request. If the hash matches the
       one provided in the <b>X-KGB-Auth</b> header, the authentication succeeds and the request is processed.
       Otherwise an error is returned.

</pre><h4><b>METHODS</b></h4><pre>
   <b>commit_v4</b> <u><b>arguments</b></u>
       This method takes information about a single commit and relays it to IRC.  <u>arguments</u> is a map with the
       members described below. Any additional members are ignored.

       <b>commit_id</b> <u>string</u>
           A  string identifying the commit in the version control system. Git (short) hash, Subversion revision
           number, this kind of thing.

       <b>rev_prefix</b> <u>string</u>
           A string to prepend to the commit  ID  when  displaying  on  IRC.  "r"  is  particularly  useful  for
           Subversion repositories.

       <b>author</b> <u>string</u>
           A string representing the commit author.

       <b>branch</b> <u>string</u>
           A string representing the commit branch.

       <b>module</b> <u>string</u>
           A string representing the commit module or sub-project.

       <b>commit_log</b> <u>string</u>
           The commit message.

       <b>changes</b> <u>list</u> <u>of</u> <u>strings</u>
           List  of  changes  files/directories  in the commit. Each string is a path, optionally prepended with
           "(A)" for added paths, "(M)" for modified paths and "(D)" for deleted paths. If no  prefix  is  given
           modification  is  assumed.  An  additional  plus  sign flags property changes (Specific to Subversion
           term), e.g.  "(M+)".

       <b>extra</b> <u>map</u>
           A map with additional parameters. Currently supported members are:

           <b>web_link</b>
               A URL with commit details (e.g. gitweb or viewvc).

           <b>use_irc_notices</b>
               A flag whether to use IRC notices instead of regular messages.

           <b>use_color</b>
               A flag whether to use colors when sending commit notifications. Defaults to 1.

   <b>relay_message</b> <u><b>message</b></u>
       This method takes only one string  argument  which  is  the  message  to  relay  to  IRC.  There  are  no
       restrictions or requirements to the message content, which is relayed verbatim to project's IRC channels.

   <b>ERRORS</b>
       <u>Errors</u> <u>reported</u> <u>on</u> <u>HTTP</u> <u>level</u>

       Authentication  errors  use HTTP code 401, while other errors -- bad or missing headers and problems with
       the JSON data use HTTP code 400.

       The error text is in the reason phrase of the HTTP status line (see RFC 2616, section 6.1).

       <u>Errors</u> <u>reported</u> <u>on</u> <u>JSON-RPC</u> <u>level</u>

       After successful authentication and decoding of the JSON request, all the errors are reported as mandated
       by the JSON-RPC specification.

</pre><h4><b>AUTHOR</b></h4><pre>
       Damyan Ivanov <a href="mailto:dmn@debian.org">dmn@debian.org</a>

</pre><h4><b>COPYRIGHT</b> <b>&amp;</b> <b>LICENSE</b></h4><pre>
       Copyright (C) 2012 Damyan Ivanov

       This program is free software; you can redistribute it and/or modify  it  under  the  terms  of  the  GNU
       General  Public License as published by the Free Software Foundation; either version 2 of the License, or
       (at your option) any later version.

       This program is distributed in the hope that it will be useful, but WITHOUT ANY  WARRANTY;  without  even
       the  implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public
       License for more details.

       You should have received a copy of the GNU General Public License along with this program; if not,  write
       to the Free Software Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.

perl v5.40.0                                       2024-09-20                                   <u><a href="../man7p/KGB-PROTOCOL.7p.html">KGB-PROTOCOL</a></u>(7p)
</pre>
 </div>
</div></section>
</div>
</body>
</html>