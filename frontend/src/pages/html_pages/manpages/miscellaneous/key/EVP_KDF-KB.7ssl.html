<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EVP_KDF-KB - The Key-Based EVP_KDF implementation</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/openssl">openssl_3.5.0-2ubuntu1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       EVP_KDF-KB - The Key-Based EVP_KDF implementation

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The EVP_KDF-KB algorithm implements the Key-Based key derivation function (KBKDF).  KBKDF derives a key
       from repeated application of a keyed MAC to an input secret (and other optional values).

       The output is considered to be keying material.

   <b>Identity</b>
       "KBKDF" is the name for this implementation; it can be used with the <b>EVP_KDF_fetch()</b> function.

   <b>Supported</b> <b>parameters</b>
       The supported parameters are:

       "mode" (<b>OSSL_KDF_PARAM_MODE</b>) &lt;UTF8 string&gt;
           The  mode parameter determines which flavor of KBKDF to use - currently the choices are "counter" and
           "feedback". "counter" is the default, and will be used if unspecified.

       "mac" (<b>OSSL_KDF_PARAM_MAC</b>) &lt;UTF8 string&gt;
           The value is either CMAC, HMAC, KMAC128 or KMAC256.

       "digest" (<b>OSSL_KDF_PARAM_DIGEST</b>) &lt;UTF8 string&gt;
       "cipher" (<b>OSSL_KDF_PARAM_CIPHER</b>) &lt;UTF8 string&gt;
       "properties" (<b>OSSL_KDF_PARAM_PROPERTIES</b>) &lt;UTF8 string&gt;
       "key" (<b>OSSL_KDF_PARAM_KEY</b>) &lt;octet string&gt;
       "salt" (<b>OSSL_KDF_PARAM_SALT</b>) &lt;octet string&gt;
       "info (<b>OSSL_KDF_PARAM_INFO</b>) &lt;octet string&gt;
       "seed" (<b>OSSL_KDF_PARAM_SEED</b>) &lt;octet string&gt;
           The seed parameter is unused in counter mode.

       "use-l" (<b>OSSL_KDF_PARAM_KBKDF_USE_L</b>) &lt;integer&gt;
           Set to <b>0</b> to disable use of the optional Fixed Input data 'L' (see SP800-108).  The default value of <b>1</b>
           will be used if unspecified.

       "use-separator" (<b>OSSL_KDF_PARAM_KBKDF_USE_SEPARATOR</b>) &lt;integer&gt;
           Set to <b>0</b> to disable use of the optional Fixed Input data 'zero separator'  (see  SP800-108)  that  is
           placed between the Label and Context.  The default value of <b>1</b> will be used if unspecified.

       "r" (<b>OSSL_KDF_PARAM_KBKDF_R</b>) &lt;integer&gt;
           Set the fixed value 'r', indicating the length of the counter in bits.

           Supported values are <b>8</b>, <b>16</b>, <b>24</b>, and <b>32</b>.  The default value of <b>32</b> will be used if unspecified.

       The OpenSSL FIPS provider also supports the following parameters:

       "fips-indicator" (<b>OSSL_KDF_PARAM_FIPS_APPROVED_INDICATOR</b>) &lt;integer&gt;
           A  getter  that  returns 1 if the operation is FIPS approved, or 0 otherwise.  This may be used after
           calling EVP_KDF_derive. It returns 0 if "key-check" is set to 0 and the check fails.

       "key-check" (<b>OSSL_KDF_PARAM_FIPS_KEY_CHECK</b>) &lt;integer&gt;
           The default value of 1 causes an error during <b>EVP_KDF_CTX_set_params()</b> if the  length  of  used  key-
           derivation  key  (<b>OSSL_KDF_PARAM_KEY</b>) is shorter than 112 bits.  Setting this to zero will ignore the
           error and set the approved "fips-indicator" to 0.  This option breaks FIPS compliance  if  it  causes
           the approved "fips-indicator" to return 0.

       Depending  on  whether  mac  is  CMAC or HMAC, either digest or cipher is required (respectively) and the
       other is unused. They are unused for KMAC128 and KMAC256.

       The parameters key, salt, info, and seed correspond to KI,  Label,  Context,  and  IV  (respectively)  in
       SP800-108.  As in that document, salt, info, and seed are optional and may be omitted.

       "mac", "digest", cipher" and "properties" are described in "PARAMETERS" in <b><a href="../man3/EVP_KDF.3.html">EVP_KDF</a></b>(3).

</pre><h4><b>NOTES</b></h4><pre>
       A context for KBKDF can be obtained by calling:

        EVP_KDF *kdf = EVP_KDF_fetch(NULL, "KBKDF", NULL);
        EVP_KDF_CTX *kctx = EVP_KDF_CTX_new(kdf);

       The output length of an KBKDF is specified via the "keylen" parameter to the <b><a href="../man3/EVP_KDF_derive.3.html">EVP_KDF_derive</a></b>(3) function.

       Note  that currently OpenSSL only implements counter and feedback modes.  Other variants may be supported
       in the future.

</pre><h4><b>EXAMPLES</b></h4><pre>
       This example derives 10 bytes using COUNTER-HMAC-SHA256, with KI "secret",  Label  "label",  and  Context
       "context".

        EVP_KDF *kdf;
        EVP_KDF_CTX *kctx;
        unsigned char out[10];
        OSSL_PARAM params[6], *p = params;

        kdf = EVP_KDF_fetch(NULL, "KBKDF", NULL);
        kctx = EVP_KDF_CTX_new(kdf);
        EVP_KDF_free(kdf);

        *p++ = OSSL_PARAM_construct_utf8_string(OSSL_KDF_PARAM_DIGEST,
                                                "SHA2-256", 0);
        *p++ = OSSL_PARAM_construct_utf8_string(OSSL_KDF_PARAM_MAC,
                                                "HMAC", 0);
        *p++ = OSSL_PARAM_construct_octet_string(OSSL_KDF_PARAM_KEY,
                                                 "secret", strlen("secret"));
        *p++ = OSSL_PARAM_construct_octet_string(OSSL_KDF_PARAM_SALT,
                                                 "label", strlen("label"));
        *p++ = OSSL_PARAM_construct_octet_string(OSSL_KDF_PARAM_INFO,
                                                 "context", strlen("context"));
        *p = OSSL_PARAM_construct_end();
        if (EVP_KDF_derive(kctx, out, sizeof(out), params) &lt;= 0)
            error("EVP_KDF_derive");

        EVP_KDF_CTX_free(kctx);

       This  example  derives  10  bytes  using  FEEDBACK-CMAC-AES256,  with  KI "secret", Label "label", and IV
       "sixteen bytes iv".

        EVP_KDF *kdf;
        EVP_KDF_CTX *kctx;
        unsigned char out[10];
        OSSL_PARAM params[8], *p = params;
        unsigned char *iv = "sixteen bytes iv";

        kdf = EVP_KDF_fetch(NULL, "KBKDF", NULL);
        kctx = EVP_KDF_CTX_new(kdf);
        EVP_KDF_free(kdf);

        *p++ = OSSL_PARAM_construct_utf8_string(OSSL_KDF_PARAM_CIPHER, "AES256", 0);
        *p++ = OSSL_PARAM_construct_utf8_string(OSSL_KDF_PARAM_MAC, "CMAC", 0);
        *p++ = OSSL_PARAM_construct_utf8_string(OSSL_KDF_PARAM_MODE, "FEEDBACK", 0);
        *p++ = OSSL_PARAM_construct_octet_string(OSSL_KDF_PARAM_KEY,
                                                 "secret", strlen("secret"));
        *p++ = OSSL_PARAM_construct_octet_string(OSSL_KDF_PARAM_SALT,
                                                 "label", strlen("label"));
        *p++ = OSSL_PARAM_construct_octet_string(OSSL_KDF_PARAM_INFO,
                                                 "context", strlen("context"));
        *p++ = OSSL_PARAM_construct_octet_string(OSSL_KDF_PARAM_SEED,
                                                 iv, strlen(iv));
        *p = OSSL_PARAM_construct_end();
        if (EVP_KDF_derive(kctx, out, sizeof(out), params) &lt;= 0)
            error("EVP_KDF_derive");

        EVP_KDF_CTX_free(kctx);

</pre><h4><b>CONFORMING</b> <b>TO</b></h4><pre>
       NIST SP800-108, IETF RFC 6803, IETF RFC 8009.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man3/EVP_KDF.3.html">EVP_KDF</a></b>(3),  <b><a href="../man3/EVP_KDF_CTX_free.3.html">EVP_KDF_CTX_free</a></b>(3),   <b><a href="../man3/EVP_KDF_CTX_get_kdf_size.3.html">EVP_KDF_CTX_get_kdf_size</a></b>(3),   <b><a href="../man3/EVP_KDF_derive.3.html">EVP_KDF_derive</a></b>(3),   "PARAMETERS"   in
       <b><a href="../man3/EVP_KDF.3.html">EVP_KDF</a></b>(3)

</pre><h4><b>HISTORY</b></h4><pre>
       This functionality was added in OpenSSL 3.0.

       Support for KMAC was added in OpenSSL 3.1.

</pre><h4><b>COPYRIGHT</b></h4><pre>
       Copyright 2019-2024 The OpenSSL Project Authors. All Rights Reserved.  Copyright 2019 Red Hat, Inc.

       Licensed  under  the  Apache License 2.0 (the "License").  You may not use this file except in compliance
       with the License.  You can obtain  a  copy  in  the  file  LICENSE  in  the  source  distribution  or  at
       &lt;https://www.openssl.org/source/license.html&gt;.

3.5.0                                              2025-06-04                                   <u><a href="../man7SSL/EVP_KDF-KB.7SSL.html">EVP_KDF-KB</a></u>(7SSL)
</pre>
 </div>
</div></section>
</div>
</body>
</html>