<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EVP_KDF-KRB5KDF - The RFC3961 Krb5 KDF EVP_KDF implementation</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/openssl">openssl_3.5.0-2ubuntu1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       EVP_KDF-KRB5KDF - The RFC3961 Krb5 KDF EVP_KDF implementation

</pre><h4><b>DESCRIPTION</b></h4><pre>
       Support for computing the <b>KRB5KDF</b> KDF through the <b>EVP_KDF</b> API.

       The EVP_KDF-KRB5KDF algorithm implements the key derivation function defined in RFC 3961, section 5.1 and
       is used by Krb5 to derive session keys.  Three inputs are required to perform key derivation: a cipher,
       (for example AES-128-CBC), the initial key, and a constant.

   <b>Identity</b>
       "KRB5KDF" is the name for this implementation; it can be used with the <b>EVP_KDF_fetch()</b> function.

   <b>Supported</b> <b>parameters</b>
       The supported parameters are:

       "properties" (<b>OSSL_KDF_PARAM_PROPERTIES</b>) &lt;UTF8 string&gt;
       "cipher" (<b>OSSL_KDF_PARAM_CIPHER</b>) &lt;UTF8 string&gt;
       "key" (<b>OSSL_KDF_PARAM_KEY</b>) &lt;octet string&gt;
           These parameters work as described in "PARAMETERS" in <b><a href="../man3/EVP_KDF.3.html">EVP_KDF</a></b>(3).

       "constant" (<b>OSSL_KDF_PARAM_CONSTANT</b>) &lt;octet string&gt;
           This  parameter  sets  the  constant  value for the KDF.  If a value is already set, the contents are
           replaced.

</pre><h4><b>NOTES</b></h4><pre>
       A context for KRB5KDF can be obtained by calling:

        EVP_KDF *kdf = EVP_KDF_fetch(NULL, "KRB5KDF", NULL);
        EVP_KDF_CTX *kctx = EVP_KDF_CTX_new(kdf);

       The  output  length  of  the  KRB5KDF  derivation  is  specified  via  the  <u>keylen</u>   parameter   to   the
       <b><a href="../man3/EVP_KDF_derive.3.html">EVP_KDF_derive</a></b>(3)  function, and MUST match the key length for the chosen cipher or an error is returned.
       Moreover, the constant's length must not exceed the block size of the cipher.  Since the  KRB5KDF  output
       length  depends  on the chosen cipher, calling <b><a href="../man3/EVP_KDF_CTX_get_kdf_size.3.html">EVP_KDF_CTX_get_kdf_size</a></b>(3) to obtain the requisite length
       returns the correct length only after the cipher is set. Prior to that  <b>EVP_MAX_KEY_LENGTH</b>  is  returned.
       The  caller  must  allocate a buffer of the correct length for the chosen cipher, and pass that buffer to
       the <b><a href="../man3/EVP_KDF_derive.3.html">EVP_KDF_derive</a></b>(3) function along with that length.

</pre><h4><b>EXAMPLES</b></h4><pre>
       This example derives a key using the AES-128-CBC cipher:

        EVP_KDF *kdf;
        EVP_KDF_CTX *kctx;
        unsigned char key[16] = "01234...";
        unsigned char constant[] = "I'm a constant";
        unsigned char out[16];
        size_t outlen = sizeof(out);
        OSSL_PARAM params[4], *p = params;

        kdf = EVP_KDF_fetch(NULL, "KRB5KDF", NULL);
        kctx = EVP_KDF_CTX_new(kdf);
        EVP_KDF_free(kdf);

        *p++ = OSSL_PARAM_construct_utf8_string(OSSL_KDF_PARAM_CIPHER,
                                                SN_aes_128_cbc,
                                                strlen(SN_aes_128_cbc));
        *p++ = OSSL_PARAM_construct_octet_string(OSSL_KDF_PARAM_KEY,
                                                 key, (size_t)16);
        *p++ = OSSL_PARAM_construct_octet_string(OSSL_KDF_PARAM_CONSTANT,
                                                 constant, strlen(constant));
        *p = OSSL_PARAM_construct_end();
        if (EVP_KDF_derive(kctx, out, outlen, params) &lt;= 0)
            /* Error */

        EVP_KDF_CTX_free(kctx);

</pre><h4><b>CONFORMING</b> <b>TO</b></h4><pre>
       RFC 3961

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man3/EVP_KDF.3.html">EVP_KDF</a></b>(3),  <b><a href="../man3/EVP_KDF_CTX_free.3.html">EVP_KDF_CTX_free</a></b>(3),   <b><a href="../man3/EVP_KDF_CTX_get_kdf_size.3.html">EVP_KDF_CTX_get_kdf_size</a></b>(3),   <b><a href="../man3/EVP_KDF_derive.3.html">EVP_KDF_derive</a></b>(3),   "PARAMETERS"   in
       <b><a href="../man3/EVP_KDF.3.html">EVP_KDF</a></b>(3)

</pre><h4><b>HISTORY</b></h4><pre>
       This functionality was added in OpenSSL 3.0.

</pre><h4><b>COPYRIGHT</b></h4><pre>
       Copyright 2016-2021 The OpenSSL Project Authors. All Rights Reserved.

       Licensed  under  the  Apache License 2.0 (the "License").  You may not use this file except in compliance
       with the License.  You can obtain  a  copy  in  the  file  LICENSE  in  the  source  distribution  or  at
       &lt;https://www.openssl.org/source/license.html&gt;.

3.5.0                                              2025-06-04                              <u><a href="../man7SSL/EVP_KDF-KRB5KDF.7SSL.html">EVP_KDF-KRB5KDF</a></u>(7SSL)
</pre>
 </div>
</div></section>
</div>
</body>
</html>