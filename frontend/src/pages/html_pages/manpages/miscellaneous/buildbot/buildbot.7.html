<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>buildbot - master instances creation, upgrade and management</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/buildbot">buildbot_4.2.1-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       buildbot - master instances creation, upgrade and management

</pre><h4><b>DESCRIPTION</b></h4><pre>
       Buildbot  master instances are located under individual folders in <u>/var/lib/buildbot/masters</u>. This manual
       explains how to manage them.

</pre><h4><b>CREATION</b></h4><pre>
       To create a new Buildbot master instance named <u>$NAME</u>, use the following commands:

           buildbot create-master /var/lib/buildbot/masters/$NAME
           chown -R buildbot: /var/lib/buildbot/masters/$NAME

       After which, you should review and edit the <u>master.cfg.sample</u> configuration file located  in  the  master
       base directory and rename it to <u>master.cfg</u>.

       The  configuration  file  syntax is extensively described in <u>/usr/share/doc/buildbot/html</u> (installed with
       the <b>buildbot-doc</b> package).

       <b>note</b>
           In the default configuration Buildbot uses a file-based SQLite database, stored in  the  <u>state.sqlite</u>
           file  of  the  master's  base  directory. If you want to use another database engine, you may need to
           install additional packages (e.g., <b>postgresql</b> and <b>python3-psycopg2</b> to use PostgreSQL). Refer  to  the
           Buildbot documentation for the associated <u>master.cfg</u> syntax.

       <b>ATTENTION</b>
           The new Buildbot web dashboard cannot be integrated into Debian yet because of policy violation (See:
           bug  #883529).  In  the meantime, if you want to enable it in your configuration, it can be installed
           with <b>pip3</b> <b>install</b> <b>buildbot-www</b>.

       You may use the following command to validate your configuration file:

           buildbot checkconfig /var/lib/buildbot/masters/$NAME/master.cfg

       Once you are satisfied with your  configuration  file,  you  may  start  the  Buildbot  master  instance.
       Depending on the init system you use, this is done differently.

   <b>systemd</b>
       To start the instance:

           systemctl start buildbot@$NAME.service

       To enable automatic start on boot:

           systemctl enable buildbot@$NAME.service

       If you want to tune the way the instance is started (e.g., to change the user that runs the process), you
       may use a systemd drop-in:

           mkdir -p /etc/systemd/system/buildbot@$NAME.service.d
           editor /etc/systemd/system/buildbot@$NAME.service.d/user.conf

       With the following contents:

           [Service]
           User=my-user
           Group=my-group

   <b>sysvinit</b>
       First,  you  need  to  edit  <u>/etc/default/buildbot</u> and configure your instance. The syntax is pretty self
       explanatory, but here is an example:

           # 1-enabled, 0-disabled
           MASTER_ENABLED[1]=1
           # short name printed on start/stop
           MASTER_NAME[1]="$NAME"
           # user to run master as
           MASTER_USER[1]="buildbot"
           # basedir to master (absolute path)
           MASTER_BASEDIR[1]="/var/lib/buildbot/masters/$NAME"
           # buildbot options
           MASTER_OPTIONS[1]=""
           # prefix command, i.e. nice, linux32, dchroot
           MASTER_PREFIXCMD[1]=""

       After which, you may start the instance:

           service buildbot start $NAME

       By default, it will automatically start on boot.

</pre><h4><b>UPGRADE</b></h4><pre>
       By default, Buildbot master instances are automatically  upgraded  when  installing  new  versions.  This
       consists in the following operations for each instance:

       •   The instance is stopped.
       •   <u>buildbot</u> <u>upgrade-master</u> <u>/var/lib/buildbot/masters/$NAME</u> is executed.
       •   The instance is started again.

       You may disable the automatic upgrade globally by running:

           dpkg-reconfigure buildbot

       Or for a specific master instance by creating a <u>.no-auto-upgrade</u> file in its base directory:

           touch /var/lib/buildbot/masters/$NAME/.no-auto-upgrade

       In  any  case,  the upgrade operation is mandatory and Buildbot will fail to restart an instance that has
       not been upgraded.

       After upgrading, you will find that Buildbot has created a new <u>master.cfg.sample</u>  file  in  the  instance
       base directory. You can review it and check the differences with your own configuration file. But in most
       cases, it is safe to delete this file.

   <b>upgrading</b> <b>from</b> <b>0.8.x</b>
       If  upgrading from a 0.8.x version, all master instances in must be manually migrated. This may require a
       number of changes to the master  configuration.  Please  refer  to  the  "nine-upgrade"  chapter  in  the
       documentation for details. Once you have finished migrating, you may delete the <u>.no-auto-upgrade</u> files to
       allow further automatic upgrades to proceed.

       The <u>buildmaster</u> service has been renamed to <u>buildbot</u>.

       Also, to avoid spurious errors on boot, the automatic start of each existing instance has been "disabled"
       in  <u>/etc/default/buildbot</u>  (which was renamed from <u>/etc/default/buildmaster</u>). If you which to use systemd
       to manage your instances, please refer to the <b>CREATION</b> section of this manual.

</pre><h4><b>FILES</b></h4><pre>
       <u>/var/lib/buildbot/masters/$NAME</u>
           Working directory for the <u>$NAME</u> Buildbot master instance.

       <u>/etc/systemd/system/buildbot@$NAME.service.d</u>
           Directory containing customization drop-ins for the <u>$NAME</u> Buildbot master instance service.

       <u>/etc/default/buildbot</u>
           The master instances services definition for sysvinit users.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man1/buildbot.1.html">buildbot</a></b>(1), <b><a href="../man1/systemctl.1.html">systemctl</a></b>(1), <b><a href="../man5/systemd.unit.5.html">systemd.unit</a></b>(5), <b><a href="../man8/service.8.html">service</a></b>(8)

</pre><h4><b>AUTHOR</b></h4><pre>
       Robin Jarry &lt;<a href="mailto:robin@jarry.cc">robin@jarry.cc</a>&gt;

                                                   2025-01-17                                        <u><a href="../man7/buildbot.7.html">buildbot</a></u>(7)
</pre>
 </div>
</div></section>
</div>
</body>
</html>