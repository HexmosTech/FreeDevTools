<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>muse_wavecal - Detect arc emission lines and determine the wavelength solution for each slice.</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/noble/+package/cpl-plugin-muse-doc">cpl-plugin-muse-doc_2.8.7+dfsg-3_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       muse_wavecal - Detect arc emission lines and determine the wavelength solution for each slice.

</pre><h4><b>SYNOPSIS</b></h4><pre>
       esorex <b>muse_wavecal</b> [OPTIONS] FILE.sof

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This  recipe  detects  arc emission lines and fits a wavelength solution to each slice of the instrument.
       The wavelength calibration table contains polynomials defining the wavelength solution of the  slices  on
       the  CCD.  Processing  trims the raw data and records the overscan statistics, subtracts the bias (taking
       account of the overscan, if --overscan is not "none") and converts them from adu  to  count.  Optionally,
       the  dark  can  be subtracted and the data can be divided by the flat-field, but this is not recommended.
       The data is then combined using input parameters, into separate images for  each  lamp.  To  compute  the
       wavelength  solution,  arc lines are detected at the center of each slice (using threshold detection on a
       S/N image) and subsequently assigned wavelengths, using pattern matching to identify lines from the input
       line catalog. Each line is then traced to the edges of the slice, using Gaussian centering  in  each  CCD
       column.  The  Gaussians not only yield center, but also centering error, and line properties (e.g. FWHM).
       Deviant fits are detected using polynomial fits to  each  arc  line  (using  the  xorder  parameter)  and
       rejected.  These  analysis  and  measuring  steps  are  carried  out  separately on images exposed by the
       different arc lamps, reducing the amount of blending, that can otherwise  influence  line  identification
       and  Gaussian  centering.  The  final  two-dimensional  fit  uses  all  positions  (of  all lamps), their
       wavelengths, and the given polynomial orders to compute the final wavelength  solution  for  each  slice,
       iteratively  rejecting  outliers.  This  final  fit can be either unweighted (fitweighting="uniform", for
       fastest processing) or weighted (other values of fitweighting, for higher accuracy).

</pre><h4><b>OPTIONS</b></h4><pre>
       <b>--nifu</b> <u>&lt;int&gt;</u>
              IFU to handle. If set to 0, all IFUs are processed serially. If set to -1, all IFUs are  processed
              in  parallel. (int; default: 0). The full name of this option for the EsoRex configuration file is
              <b>muse.muse_wavecal.nifu</b> [default = <u>0</u>].

       <b>--overscan</b> <u>&lt;str&gt;</u>
              If this is "none", stop when detecting discrepant overscan levels (see ovscsigma), for "offset" it
              assumes that the mean overscan level represents  the  real  offset  in  the  bias  levels  of  the
              exposures  involved,  and  adjusts  the  data accordingly; for "vpoly", a polynomial is fit to the
              vertical overscan and subtracted from the whole quadrant. (str; default: ´vpoly´). The  full  name
              of this option for the EsoRex configuration file is <b>muse.muse_wavecal.overscan</b> [default = <u>vpoly</u>].

       <b>--ovscreject</b> <u>&lt;str&gt;</u>
              This influences how values are rejected when computing overscan statistics. Either no rejection at
              all  ("none"), rejection using the DCR algorithm ("dcr"), or rejection using an iterative constant
              fit ("fit"). (str; default: ´dcr´). The full name of this option for the EsoRex configuration file
              is <b>muse.muse_wavecal.ovscreject</b> [default = <u>dcr</u>].

       <b>--ovscsigma</b> <u>&lt;float&gt;</u>
              If the deviation of mean overscan levels between a raw input image  and  the  reference  image  is
              higher  than  |ovscsigma x stdev|, stop the processing. If overscan="vpoly", this is used as sigma
              rejection level for the iterative polynomial fit (the level comparison  is  then  done  afterwards
              with  |100 x stdev| to guard against incompatible settings).  Has no effect for overscan="offset".
              (float; default: 30.0). The full name  of  this  option  for  the  EsoRex  configuration  file  is
              <b>muse.muse_wavecal.ovscsigma</b> [default = <u>30.0</u>].

       <b>--ovscignore</b> <u>&lt;int&gt;</u>
              The number of pixels of the overscan adjacent to the data section of the CCD that are ignored when
              computing  statistics  or  fits.  (int;  default:  3). The full name of this option for the EsoRex
              configuration file is <b>muse.muse_wavecal.ovscignore</b> [default = <u>3</u>].

       <b>--combine</b> <u>&lt;str&gt;</u>
              Type of lampwise image combination to use. (str; default: ´sigclip´). The full name of this option
              for the EsoRex configuration file is <b>muse.muse_wavecal.combine</b> [default = <u>sigclip</u>].

       <b>--lampwise</b> <u>&lt;bool&gt;</u>
              Identify and measure the arc emission lines on images  separately  for  each  lamp  setup.  (bool;
              default:   True).   The   full   name  of  this  option  for  the  EsoRex  configuration  file  is
              <b>muse.muse_wavecal.lampwise</b> [default = <u>True</u>].

       <b>--sigma</b> <u>&lt;float&gt;</u>
              Sigma level used to detect arc emission lines above the median background level in the  S/N  image
              of  the  central  column of each slice (float; default: 1.0). The full name of this option for the
              EsoRex configuration file is <b>muse.muse_wavecal.sigma</b> [default = <u>1.0</u>].

       <b>--dres</b> <u>&lt;float&gt;</u>
              The allowed range of resolutions for pattern matching (of detected arc  lines  to  line  list)  in
              fractions  relative to the expected value (float; default: 0.05). The full name of this option for
              the EsoRex configuration file is <b>muse.muse_wavecal.dres</b> [default = <u>0.05</u>].

       <b>--tolerance</b> <u>&lt;float&gt;</u>
              Tolerance for pattern matching (of detected arc lines to line list)  (float;  default:  0.1).  The
              full name of this option for the EsoRex configuration file is <b>muse.muse_wavecal.tolerance</b> [default
              = <u>0.1</u>].

       <b>--xorder</b> <u>&lt;int&gt;</u>
              Order of the polynomial for the horizontal curvature within each slice (int; default: 2). The full
              name of this option for the EsoRex configuration file is <b>muse.muse_wavecal.xorder</b> [default = <u>2</u>].

       <b>--yorder</b> <u>&lt;int&gt;</u>
              Order  of  the  polynomial used to fit the dispersion relation (int; default: 6). The full name of
              this option for the EsoRex configuration file is <b>muse.muse_wavecal.yorder</b> [default = <u>6</u>].

       <b>--linesigma</b> <u>&lt;float&gt;</u>
              Sigma level for iterative rejection of deviant fits  for  each  arc  line  within  each  slice,  a
              negative  value  means  to  use  the default (2.5).  (float; default: -1.0). The full name of this
              option for the EsoRex configuration file is <b>muse.muse_wavecal.linesigma</b> [default = <u>-1.0</u>].

       <b>--residuals</b> <u>&lt;bool&gt;</u>
              Create a table containing residuals of the fits to the data of all arc lines. This  is  useful  to
              assess  the quality of the wavelength solution in detail. (bool; default: False). The full name of
              this option for the EsoRex configuration file is <b>muse.muse_wavecal.residuals</b> [default = <u>False</u>].

       <b>--fitsigma</b> <u>&lt;float&gt;</u>
              Sigma level for iterative rejection of deviant datapoints during the final  polynomial  wavelength
              solution  within  each  slice,  a  negative value means to use the default (3.0). (float; default:
              -1.0).   The   full   name   of   this   option   for   the   EsoRex   configuration    file    is
              <b>muse.muse_wavecal.fitsigma</b> [default = <u>-1.0</u>].

       <b>--fitweighting</b> <u>&lt;str&gt;</u>
              Type  of weighting to use in the final polynomial wavelength solution fit, using centroiding error
              estimate and/or scatter of  each  single  line  as  estimates  of  its  accuracy.  (str;  default:
              ´cerrscatter´).   The   full   name   of   this  option  for  the  EsoRex  configuration  file  is
              <b>muse.muse_wavecal.fitweighting</b> [default = <u>cerrscatter</u>].

       <b>--saveimages</b> <u>&lt;bool&gt;</u>
              Save (bool; default: False). The full name of this option for the  EsoRex  configuration  file  is
              <b>muse.muse_wavecal.saveimages</b> [default = <u>False</u>].

       <b>--resample</b> <u>&lt;bool&gt;</u>
              Resample  the  input  arc  images  onto  2D images for a visual check using tracing and wavelength
              calibration solutions. Note that the  image  produced  will  show  small  wiggles  even  when  the
              calibration  was  successful!  (bool; default: False). The full name of this option for the EsoRex
              configuration file is <b>muse.muse_wavecal.resample</b> [default = <u>False</u>].

       <b>--wavemap</b> <u>&lt;bool&gt;</u>
              Create a wavelength map of the input images (bool; default: False). The full name of  this  option
              for the EsoRex configuration file is <b>muse.muse_wavecal.wavemap</b> [default = <u>False</u>].

       <b>--merge</b> <u>&lt;bool&gt;</u>
              Merge  output  products  from  different IFUs into a common file. (bool; default: False). The full
              name of this option for the  EsoRex  configuration  file  is  <b>muse.muse_wavecal.merge</b>  [default  =
              <u>False</u>].

       Note  that  it  is  possible to create a configuration file containing these options, along with suitable
       default values. Please refer to the details provided by the 'esorex --help' command.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       The full documentation for the muse pipeline can be downloaded as a PDF file using the following URL:

              <b><a href="ftp://ftp.eso.org/pub/dfs/pipelines/muse/muse-pipeline-cookbook-2.8.7.pdf">ftp://ftp.eso.org/pub/dfs/pipelines/muse/muse-pipeline-cookbook-2.8.7.pdf</a></b>

       An   overview   over   the   existing   ESO   pipelines    can    be    found    on    the    web    page
       <b>https://www.eso.org/sci/software/pipelines/</b>.

       Basic documentation about the EsoRex program can be found at the esorex (1) man page.

       It   is   possible   to   call   the   pipelines   from   python   using  the  python-cpl  package.   See
       <b>https://packages.python.org/python-cpl/index.html</b> for further information.

       The  other  recipes  of  the  muse   pipeline   are   <u><a href="../man7/muse_ampl.7.html">muse_ampl</a></u>(7),   <u><a href="../man7/muse_astrometry.7.html">muse_astrometry</a></u>(7),   <u><a href="../man7/muse_bias.7.html">muse_bias</a></u>(7),
       <u><a href="../man7/muse_create_sky.7.html">muse_create_sky</a></u>(7), <u><a href="../man7/muse_dark.7.html">muse_dark</a></u>(7), <u><a href="../man7/muse_exp_align.7.html">muse_exp_align</a></u>(7), <u><a href="../man7/muse_exp_combine.7.html">muse_exp_combine</a></u>(7), <u><a href="../man7/muse_flat.7.html">muse_flat</a></u>(7), <u><a href="../man7/muse_geometry.7.html">muse_geometry</a></u>(7),
       <u><a href="../man7/muse_illum.7.html">muse_illum</a></u>(7),   <u><a href="../man7/muse_lingain.7.html">muse_lingain</a></u>(7),   <u><a href="../man7/muse_lsf.7.html">muse_lsf</a></u>(7),   <u><a href="../man7/muse_qi_mask.7.html">muse_qi_mask</a></u>(7),   <u><a href="../man7/muse_scibasic.7.html">muse_scibasic</a></u>(7),  <u><a href="../man7/muse_scipost.7.html">muse_scipost</a></u>(7),
       <u><a href="../man7/muse_scipost_apply_astrometry.7.html">muse_scipost_apply_astrometry</a></u>(7),   <u><a href="../man7/muse_scipost_calibrate_flux.7.html">muse_scipost_calibrate_flux</a></u>(7),    <u><a href="../man7/muse_scipost_combine_pixtables.7.html">muse_scipost_combine_pixtables</a></u>(7),
       <u><a href="../man7/muse_scipost_correct_dar.7.html">muse_scipost_correct_dar</a></u>(7),            <u><a href="../man7/muse_scipost_correct_rv.7.html">muse_scipost_correct_rv</a></u>(7),            <u><a href="../man7/muse_scipost_make_cube.7.html">muse_scipost_make_cube</a></u>(7),
       <u><a href="../man7/muse_scipost_raman.7.html">muse_scipost_raman</a></u>(7),         <u><a href="../man7/muse_scipost_subtract_sky.7.html">muse_scipost_subtract_sky</a></u>(7),         <u><a href="../man7/muse_scipost_subtract_sky_simple.7.html">muse_scipost_subtract_sky_simple</a></u>(7),
       <u><a href="../man7/muse_standard.7.html">muse_standard</a></u>(7), <u><a href="../man7/muse_twilight.7.html">muse_twilight</a></u>(7)

</pre><h4><b>VERSION</b></h4><pre>
       muse_wavecal 2.8.7

</pre><h4><b>AUTHOR</b></h4><pre>
       Peter Weilbacher &lt;https://support.eso.org&gt;

</pre><h4><b>BUG</b> <b>REPORTS</b></h4><pre>
       Please  report  any  problems to https://support.eso.org. Alternatively, you may send a report to the ESO
       User Support Department &lt;<a href="mailto:usd-help@eso.org">usd-help@eso.org</a>&gt;.

</pre><h4><b>LICENSE</b></h4><pre>
       This file is part of the MUSE Instrument Pipeline Copyright (C) 2005, 2019 European Southern Observatory

       This program is free software; you can redistribute it and/or modify  it  under  the  terms  of  the  GNU
       General  Public License as published by the Free Software Foundation; either version 2 of the License, or
       (at your option) any later version.

       This program is distributed in the hope that it will be useful, but WITHOUT ANY  WARRANTY;  without  even
       the  implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public
       License for more details.

       You should have received a copy of the GNU General Public License along with this program; if not,  write
       to the Free Software Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA  02111-1307  USA

muse_wavecal                                          2.8.7                                      <u><a href="../man7/MUSE_WAVECAL.7.html">MUSE_WAVECAL</a></u>(7)
</pre>
 </div>
</div></section>
</div>
</body>
</html>