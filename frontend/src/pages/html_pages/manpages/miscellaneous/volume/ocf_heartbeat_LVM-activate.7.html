<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ocf_heartbeat_LVM-activate - This agent activates/deactivates logical volumes.</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/resource-agents-base">resource-agents-base_4.16.0-3ubuntu1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       ocf_heartbeat_LVM-activate - This agent activates/deactivates logical volumes.

</pre><h4><b>SYNOPSIS</b></h4><pre>

       <b>LVM-activate</b> [start | stop | monitor | meta-data | validate-all]

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This agent manages LVM activation/deactivation work for a given volume group.

       It supports the following modes, controlled by the vg_access_mode parameter:

       * lvmlockd * system_id * clvmd * tagging

       Notes:

       1. There are two possible configuration combinations: lvmlockd+LVM-activate and clvm+LVM-activate.
       However, it is not possible to use both at the same time!

       2. Put all "lvmlockd"/"clvmd" volume groups into auto management by the agent if using the cluster to
       manage at least one of them. If you manage some manually, the stop action of the lvmlockd agent may fail
       and the node may get fenced, because some DLM lockspaces might be in use and cannot be closed
       automatically.

       3. The autoactivation property of volume group will be disabled when vg_access_mode is set to system_id.

       Option: OCF_CHECK_LEVEL

       The standard monitor operation of depth 0 checks if the VG or LV is valid. If you want deeper tests, set
       OCF_CHECK_LEVEL to 10:

       10: read first 1 byte of the underlying device (raw read)

       If there are many underlying devs in VG, it will only read one of the devs. This is not perfect solution
       for detecting underlying devices livable. e.g. iscsi SAN IO timeout will return EIO, and it makes monitor
       failed.

</pre><h4><b>SUPPORTED</b> <b>PARAMETERS</b></h4><pre>
       <b>vgname</b>
           The volume group name.

           (required, string, no default)

       <b>lvname</b>
           If set, only the specified LV will be activated.

           (optional, string, no default)

       <b>vg_access_mode</b>
           This option decides which solution will be used to protect the volume group in cluster environment.
           Optional solutions are: lvmlockd, clvmd, system_id and tagging.

           (required, string, no default)

       <b>activation_mode</b>
           The activation mode decides the visibility of logical volumes in the cluster. There are two different
           modes: "shared" for cluster filesystem and "exclusive" for local filesystem. With "shared", an LV can
           be activated concurrently from multiple nodes. With "exclusive", an LV can be activated by one node
           at a time.

           This option only has effect on "lvmlockd"/"clvmd" vg_access_mode. For "system_id" and "tagging", they
           always mean exclusive activation.

           (optional, string, default "exclusive")

       <b>tag</b>
           The tag used for tagging activation mode.

           (optional, string, default "pacemaker")

       <b>partial_activation</b>
           If set, the volume group will be activated partially even with some physical volumes missing. It
           helps to set to true when using mirrored logical volumes.

           (optional, string, default "false")

       <b>degraded_activation</b>
           Activate RAID LVs using the "degraded" activation mode. This allows RAID LVs to be activated with
           missing PVs if all data can be provided with RAID redundancy. The RAID level determines the number of
           PVs that are required for degraded activation to succeed. If fewer PVs are available, then degraded
           activation will fail. Also enable majority_pvs.

           (optional, string, default "false")

       <b>majority_pvs</b>
           If set, the VG system ID can be reassigned to a new host if a majority of PVs in the VG are present.
           Otherwise, VG failover with system ID will fail when the VG is missing PVs. Also enable
           degraded_activation when RAID LVs are used.

           (optional, string, default "false")

</pre><h4><b>SUPPORTED</b> <b>ACTIONS</b></h4><pre>
       This resource agent supports the following actions (operations):

       <b>start</b>
           Starts the resource. Suggested minimum timeout: 90s.

       <b>stop</b>
           Stops the resource. Suggested minimum timeout: 90s.

       <b>monitor</b>
           Performs a detailed status check. Suggested minimum timeout: 90s. Suggested interval: 30s.

       <b>meta-data</b>
           Retrieves resource agent metadata (internal use only). Suggested minimum timeout: 10s.

       <b>validate-all</b>
           Performs a validation of the resource configuration. Suggested minimum timeout: 20s.

</pre><h4><b>EXAMPLE</b> <b>CRM</b> <b>SHELL</b></h4><pre>
       The following is an example configuration for a LVM-activate resource using the <b><a href="../man8/crm.8.html">crm</a></b>(8) shell:

           primitive p_LVM-activate ocf:heartbeat:LVM-activate \
             params \
               vgname=<u>string</u> \
               vg_access_mode=<u>string</u> \
             op monitor timeout="90s" interval="30s" depth="0"

</pre><h4><b>EXAMPLE</b> <b>PCS</b></h4><pre>
       The following is an example configuration for a LVM-activate resource using <b><a href="../man8/pcs.8.html">pcs</a></b>(8)

           pcs resource create p_LVM-activate ocf:heartbeat:LVM-activate \
             vgname=<u>string</u> \
             vg_access_mode=<u>string</u> \
             op monitor timeout="90s" interval="30s" OCF_CHECK_LEVEL="0"

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="http://clusterlabs.org/">http://clusterlabs.org/</a></b>

</pre><h4><b>AUTHOR</b></h4><pre>
       <b>ClusterLabs</b> <b>contributors</b> <b>(see</b> <b>the</b> <b>resource</b> <b>agent</b> <b>source</b> <b>for</b> <b>information</b> <b>about</b> <b>individual</b> <b>authors)</b>

resource-agents 4.16.0-3ubuntu                     06/25/2025                             <u><a href="../man7/OCF_HEARTBEAT_LVM-A.7.html">OCF_HEARTBEAT_LVM-A</a></u>(7)
</pre>
 </div>
</div></section>
</div>
</body>
</html>