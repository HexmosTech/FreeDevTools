<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>nng_pair - pair protocol</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libnng-dev">libnng-dev_1.10.1-2_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       nng_pair - pair protocol

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>Version</b> <b>0</b>

           #include &lt;nng/protocol/pair0/pair.h&gt;

       <b>Version</b> <b>1</b>

           #include &lt;nng/protocol/pair1/pair.h&gt;

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The <u>pair</u> protocol implements a peer-to-peer pattern, where relationships between peers are one-to-one.

   <b>Socket</b> <b>Operations</b>
       The nng_pair_open() functions create a <u>pair</u> socket.

       Normally, this pattern will block when attempting to send a message if no peer is able to receive the
       message.

           <b>Note</b>

           Even though this mode may appear to be reliable, because back-pressure prevents discarding messages
           most of the time, there are topologies involving <u>devices</u> (see nng_device()) or raw mode sockets (see
           NNG_OPT_RAW) where messages may be discarded. Applications that require reliable delivery semantics
           should consider using <u>req</u> sockets, or implement their own acknowledgment layer on top of <u>pair</u>
           sockets.

   <b>Protocol</b> <b>Versions</b>
       Version 0 is the legacy version of this protocol. It lacks any header information, and is suitable when
       building simple one-to-one topologies.

           <b>Tip</b>

           Use version 0 if you need to communicate with other implementations, including the legacy nanomsg
           &lt;https://github.com/nanomsg/nanomsg&gt; library or mangos &lt;https://github.com/go-mangos/mangos&gt;.

       Version 1 of the protocol offers improved protection against loops when used with nng_device().

   <b>Polyamorous</b> <b>Mode</b>
           <b>Warning</b>

           Polyamorous mode is deprecated, and support for it will likely be removed in a future release.
           Applications are strongly discouraged from making further use of it.

       Normally pair sockets are for one-to-one communication, and a given peer will reject new connections if
       it already has an active connection to another peer.

       <u>Polyamorous</u> mode changes this, to allow a socket to communicate with multiple directly-connected peers.
       This mode is enabled by opening a socket with the nng_pair1_open_poly() function

           <b>Note</b>

           Polyamorous mode is only available when using pair version 1.

       In polyamorous mode a socket can support many one-to-one connections. In this mode, the application must
       choose the remote peer to receive an outgoing message by setting the nng_pipe to use for the outgoing
       message with the nng_msg_set_pipe() function.

       If no remote peer is specified by the sender, then the protocol will select any available connected peer.

       Most often the value of the outgoing pipe will be obtained from an incoming message using the
       nng_msg_get_pipe() function, such as when replying to an incoming message.

           <b>Note</b>

           Directed send <u>only</u> works with directly connected peers. It will not function across device proxies.

       In order to prevent head-of-line blocking, if the peer on the given pipe is not able to receive (or the
       pipe is no longer available, such as if the peer has disconnected), then the message will be discarded
       with no notification to the sender.

   <b>Protocol</b> <b>Options</b>
       The following protocol-specific options are available.

       NNG_OPT_MAXTTL
           (int, version 1 only). Maximum time-to-live.

       NNG_OPT_PAIR1_POLY
           (bool, version 1 only)  This option is no longer supported. Formerly it was used to configure
           <u>polyamorous</u> mode, but that mode is now established by using the nng_pair1_open_poly() function.

   <b>Protocol</b> <b>Headers</b>
       Version 0 of the pair protocol has no protocol-specific headers.

       Version 1 of the pair protocol uses a single 32-bit unsigned value. The low-order (big-endian) byte of
       this value contains a "hop" count, and is used in conjunction with the NNG_OPT_MAXTTL option to guard
       against device forwarding loops. This value is initialized to 1, and incremented each time the message is
       received by a new node.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <a href="../man3/nng_pair_open.3.html">nng_pair_open</a>(3), <a href="../man5/nng_options.5.html">nng_options</a>(5), <a href="../man7/nng.7.html">nng</a>(7)

                                                   2025-04-20                                        <u><a href="../man7/NNG_PAIR.7.html">NNG_PAIR</a></u>(7)
</pre>
 </div>
</div></section>
</div>
</body>
</html>