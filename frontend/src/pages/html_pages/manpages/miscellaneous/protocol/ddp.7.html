<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ddp - Linux AppleTalk protocol implementation</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/manpages">manpages_6.9.1-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       ddp - Linux AppleTalk protocol implementation

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;sys/socket.h&gt;</b>
       <b>#include</b> <b>&lt;<a href="file:/usr/include/netatalk/at.h">netatalk/at.h</a>&gt;</b>

       <u>ddp_socket</u> <b>=</b> <b>socket(AF_APPLETALK,</b> <b>SOCK_DGRAM,</b> <b>0);</b>
       <u>raw_socket</u> <b>=</b> <b>socket(AF_APPLETALK,</b> <b>SOCK_RAW,</b> <u>protocol</u><b>);</b>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       Linux  implements the AppleTalk protocols described in <u>Inside</u> <u>AppleTalk</u>.  Only the DDP layer and AARP are
       present in the kernel.  They are designed to be used via the  <b>netatalk</b>  protocol  libraries.   This  page
       documents the interface for those who wish or need to use the DDP layer directly.

       The  communication  between AppleTalk and the user program works using a BSD-compatible socket interface.
       For more information on sockets, see <b><a href="../man7/socket.7.html">socket</a></b>(7).

       An AppleTalk socket is created by calling the  <b><a href="../man2/socket.2.html">socket</a></b>(2)  function  with  a  <b>AF_APPLETALK</b>  socket  family
       argument.   Valid  socket  types  are  <b>SOCK_DGRAM</b>  to open a <b>ddp</b> socket or <b>SOCK_RAW</b> to open a <b>raw</b> socket.
       <u>protocol</u> is the AppleTalk protocol to be received or sent.  For <b>SOCK_RAW</b> you must specify <b>ATPROTO_DDP</b>.

       Raw sockets may be opened only by a process with effective  user  ID  0  or  when  the  process  has  the
       <b>CAP_NET_RAW</b> capability.

   <b>Address</b> <b>format</b>
       An  AppleTalk  socket  address is defined as a combination of a network number, a node number, and a port
       number.

           struct at_addr {
               unsigned short s_net;
               unsigned char  s_node;
           };

           struct sockaddr_atalk {
               sa_family_t    sat_family;    /* address family */
               unsigned char  sat_port;      /* port */
               struct at_addr sat_addr;      /* net/node */
           };

       <u>sat_family</u> is always set to <b>AF_APPLETALK</b>.  <u>sat_port</u> contains the port.  The port numbers  below  129  are
       known  as  <u>reserved</u>  <u>ports</u>.   Only  processes  with  the  effective user ID 0 or the <b>CAP_NET_BIND_SERVICE</b>
       capability may <b><a href="../man2/bind.2.html">bind</a></b>(2) to these sockets.  <u>sat_addr</u> is the host address.  The <u>net</u> member of <u>struct</u> <u>at_addr</u>
       contains the host network in network byte order.  The value of <b>AT_ANYNET</b> is a wildcard and  also  implies
       “this  network.”   The  <u>node</u>  member  of  <u>struct</u>  <u>at_addr</u>  contains  the  host node number.  The value of
       <b>AT_ANYNODE</b> is a wildcard and also implies “this  node.”  The  value  of  <b>ATADDR_BCAST</b>  is  a  link  local
       broadcast address.

   <b>Socket</b> <b>options</b>
       No protocol-specific socket options are supported.

   <b><a href="file:/proc">/proc</a></b> <b>interfaces</b>
       IP  supports a set of <u><a href="file:/proc">/proc</a></u> interfaces to configure some global AppleTalk parameters.  The parameters can
       be accessed by reading or writing files in the directory <u>/proc/sys/net/atalk/</u>.

       <u>aarp-expiry-time</u>
              The time interval (in seconds) before an AARP cache entry expires.

       <u>aarp-resolve-time</u>
              The time interval (in seconds) before an AARP cache entry is resolved.

       <u>aarp-retransmit-limit</u>
              The number of retransmissions of an AARP query before the node is declared dead.

       <u>aarp-tick-time</u>
              The timer rate (in seconds) for the timer driving AARP.

       The default values match the specification and should never need to be changed.

   <b>Ioctls</b>
       All ioctls described in <b><a href="../man7/socket.7.html">socket</a></b>(7) apply to DDP.

</pre><h4><b>ERRORS</b></h4><pre>
       <b>EACCES</b> The user tried to execute an operation without the necessary permissions.  These  include  sending
              to  a  broadcast  address  without having the broadcast flag set, and trying to bind to a reserved
              port without effective user ID 0 or <b>CAP_NET_BIND_SERVICE</b>.

       <b>EADDRINUSE</b>
              Tried to bind to an address already in use.

       <b>EADDRNOTAVAIL</b>
              A nonexistent interface was requested or the requested source address was not local.

       <b>EAGAIN</b> Operation on a nonblocking socket would block.

       <b>EALREADY</b>
              A connection operation on a nonblocking socket is already in progress.

       <b>ECONNABORTED</b>
              A connection was closed during an <b><a href="../man2/accept.2.html">accept</a></b>(2).

       <b>EHOSTUNREACH</b>
              No routing table entry matches the destination address.

       <b>EINVAL</b> Invalid argument passed.

       <b>EISCONN</b>
              <b><a href="../man2/connect.2.html">connect</a></b>(2) was called on an already connected socket.

       <b>EMSGSIZE</b>
              Datagram is bigger than the DDP MTU.

       <b>ENODEV</b> Network device not available or not capable of sending IP.

       <b>ENOENT</b> <b>SIOCGSTAMP</b> was called on a socket where no packet arrived.

       <b>ENOMEM</b> and <b>ENOBUFS</b>
              Not enough memory available.

       <b>ENOPKG</b> A kernel subsystem was not configured.

       <b>ENOPROTOOPT</b> and <b>EOPNOTSUPP</b>
              Invalid socket option passed.

       <b>ENOTCONN</b>
              The operation is defined only on a connected socket, but the socket wasn't connected.

       <b>EPERM</b>  User doesn't have permission to set high priority, make a configuration change, or send signals to
              the requested process or group.

       <b>EPIPE</b>  The connection was unexpectedly closed or shut down by the other end.

       <b>ESOCKTNOSUPPORT</b>
              The socket was unconfigured, or an unknown socket type was requested.

</pre><h4><b>VERSIONS</b></h4><pre>
       AppleTalk is supported by Linux 2.0 or higher.  The <u><a href="file:/proc">/proc</a></u> interfaces exist since Linux 2.2.

</pre><h4><b>NOTES</b></h4><pre>
       Be very careful with the <b>SO_BROADCAST</b> option; it is not privileged in Linux.  It is easy to overload  the
       network with careless sending to broadcast addresses.

   <b>Compatibility</b>
       The  basic  AppleTalk  socket  interface  is  compatible  with <b>netatalk</b> on BSD-derived systems.  Many BSD
       systems fail to check <b>SO_BROADCAST</b>  when  sending  broadcast  frames;  this  can  lead  to  compatibility
       problems.

       The  raw  socket  mode is unique to Linux and exists to support the alternative CAP package and AppleTalk
       monitoring tools more easily.

</pre><h4><b>BUGS</b></h4><pre>
       There are too many inconsistent error values.

       The ioctls used to configure routing tables,  devices,  AARP  tables,  and  other  devices  are  not  yet
       described.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man2/recvmsg.2.html">recvmsg</a></b>(2), <b><a href="../man2/sendmsg.2.html">sendmsg</a></b>(2), <b><a href="../man7/capabilities.7.html">capabilities</a></b>(7), <b><a href="../man7/socket.7.html">socket</a></b>(7)

Linux man-pages 6.9.1                              2024-05-02                                             <u><a href="../man7/ddp.7.html">ddp</a></u>(7)
</pre>
 </div>
</div></section>
</div>
</body>
</html>