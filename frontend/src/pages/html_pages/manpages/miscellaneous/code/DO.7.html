<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DO - execute an anonymous code block</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/postgresql-client-17">postgresql-client-17_17.5-1build1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       DO - execute an anonymous code block

</pre><h4><b>SYNOPSIS</b></h4><pre>
       DO [ LANGUAGE <u>lang_name</u> ] <u>code</u>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>DO</b> executes an anonymous code block, or in other words a transient anonymous function in a procedural
       language.

       The code block is treated as though it were the body of a function with no parameters, returning void. It
       is parsed and executed a single time.

       The optional LANGUAGE clause can be written either before or after the code block.

</pre><h4><b>PARAMETERS</b></h4><pre>
       <u>code</u>
           The procedural language code to be executed. This must be specified as a string literal, just as in
           <b>CREATE</b> <b>FUNCTION</b>. Use of a dollar-quoted literal is recommended.

       <u>lang_name</u>
           The name of the procedural language the code is written in. If omitted, the default is plpgsql.

</pre><h4><b>NOTES</b></h4><pre>
       The procedural language to be used must already have been installed into the current database by means of
       <b>CREATE</b> <b>EXTENSION</b>.  plpgsql is installed by default, but other languages are not.

       The user must have USAGE privilege for the procedural language, or must be a superuser if the language is
       untrusted. This is the same privilege requirement as for creating a function in the language.

       If <b>DO</b> is executed in a transaction block, then the procedure code cannot execute transaction control
       statements. Transaction control statements are only allowed if <b>DO</b> is executed in its own transaction.

</pre><h4><b>EXAMPLES</b></h4><pre>
       Grant all privileges on all views in schema public to role webuser:

           DO $$DECLARE r record;
           BEGIN
               FOR r IN SELECT table_schema, table_name FROM information_schema.tables
                        WHERE table_type = 'VIEW' AND table_schema = 'public'
               LOOP
                   EXECUTE 'GRANT ALL ON ' || quote_ident(r.table_schema) || '.' || quote_ident(r.table_name) || ' TO webuser';
               END LOOP;
           END$$;

</pre><h4><b>COMPATIBILITY</b></h4><pre>
       There is no <b>DO</b> statement in the SQL standard.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       CREATE LANGUAGE (<b><a href="../man7/CREATE_LANGUAGE.7.html">CREATE_LANGUAGE</a></b>(7))

PostgreSQL 17.5                                       2025                                                 <u><a href="../man7/DO.7.html">DO</a></u>(7)
</pre>
 </div>
</div></section>
</div>
</body>
</html>