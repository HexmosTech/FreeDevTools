<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>signal-safety - async-signal-safe functions</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/manpages">manpages_6.9.1-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       signal-safety - async-signal-safe functions

</pre><h4><b>DESCRIPTION</b></h4><pre>
       An  <u>async-signal-safe</u>  function  is  one  that  can  be safely called from within a signal handler.  Many
       functions are <u>not</u> async-signal-safe.  In particular, nonreentrant functions are generally unsafe to  call
       from a signal handler.

       The  kinds  of  issues  that  render  a  function unsafe can be quickly understood when one considers the
       implementation of the <u>stdio</u> library, all of whose functions are not async-signal-safe.

       When performing buffered I/O on a file, the <u>stdio</u> functions must maintain  a  statically  allocated  data
       buffer  along  with  associated counters and indexes (or pointers) that record the amount of data and the
       current position in the buffer.  Suppose that the main program is in the middle of  a  call  to  a  <u>stdio</u>
       function such as <b><a href="../man3/printf.3.html">printf</a></b>(3) where the buffer and associated variables have been partially updated.  If, at
       that  moment,  the  program is interrupted by a signal handler that also calls <b><a href="../man3/printf.3.html">printf</a></b>(3), then the second
       call to <b><a href="../man3/printf.3.html">printf</a></b>(3) will operate on inconsistent data, with unpredictable results.

       To avoid problems with unsafe functions, there are two possible choices:

       (a)  Ensure that (1) the signal handler calls  only  async-signal-safe  functions,  and  (2)  the  signal
            handler itself is reentrant with respect to global variables in the main program.

       (b)  Block  signal  delivery  in  the main program when calling functions that are unsafe or operating on
            global data that is also accessed by the signal handler.

       Generally, the second choice is difficult in programs of any complexity, so the first choice is taken.

       POSIX.1  specifies  a  set  of  functions  that  an  implementation  must  make  async-signal-safe.   (An
       implementation  may provide safe implementations of additional functions, but this is not required by the
       standard and other implementations may not provide the same guarantees.)

       In general, a function is async-signal-safe either because it is reentrant or because it is  atomic  with
       respect to signals (i.e., its execution can't be interrupted by a signal handler).

       The  set  of  functions required to be async-signal-safe by POSIX.1 is shown in the following table.  The
       functions not otherwise noted were required to be async-signal-safe in POSIX.1-2001;  the  table  details
       changes in the subsequent standards.

       <b>Function</b>               <b>Notes</b>
       <b><a href="../man3/abort.3.html">abort</a></b>(3)               Added in POSIX.1-2001 TC1
       <b><a href="../man2/accept.2.html">accept</a></b>(2)
       <b><a href="../man2/access.2.html">access</a></b>(2)
       <b><a href="../man3/aio_error.3.html">aio_error</a></b>(3)
       <b><a href="../man3/aio_return.3.html">aio_return</a></b>(3)
       <b><a href="../man3/aio_suspend.3.html">aio_suspend</a></b>(3)         See notes below
       <b><a href="../man2/alarm.2.html">alarm</a></b>(2)
       <b><a href="../man2/bind.2.html">bind</a></b>(2)
       <b><a href="../man3/cfgetispeed.3.html">cfgetispeed</a></b>(3)
       <b><a href="../man3/cfgetospeed.3.html">cfgetospeed</a></b>(3)
       <b><a href="../man3/cfsetispeed.3.html">cfsetispeed</a></b>(3)
       <b><a href="../man3/cfsetospeed.3.html">cfsetospeed</a></b>(3)
       <b><a href="../man2/chdir.2.html">chdir</a></b>(2)
       <b><a href="../man2/chmod.2.html">chmod</a></b>(2)
       <b><a href="../man2/chown.2.html">chown</a></b>(2)
       <b><a href="../man2/clock_gettime.2.html">clock_gettime</a></b>(2)
       <b><a href="../man2/close.2.html">close</a></b>(2)
       <b><a href="../man2/connect.2.html">connect</a></b>(2)
       <b><a href="../man2/creat.2.html">creat</a></b>(2)
       <b><a href="../man2/dup.2.html">dup</a></b>(2)
       <b><a href="../man2/dup2.2.html">dup2</a></b>(2)
       <b><a href="../man3/execl.3.html">execl</a></b>(3)               Added   in  POSIX.1-2008;  see  notes
                              below
       <b><a href="../man3/execle.3.html">execle</a></b>(3)              See notes below
       <b><a href="../man3/execv.3.html">execv</a></b>(3)               Added in POSIX.1-2008
       <b><a href="../man2/execve.2.html">execve</a></b>(2)
       <b><a href="../man2/_exit.2.html">_exit</a></b>(2)
       <b><a href="../man2/_Exit.2.html">_Exit</a></b>(2)
       <b><a href="../man2/faccessat.2.html">faccessat</a></b>(2)           Added in POSIX.1-2008
       <b><a href="../man2/fchdir.2.html">fchdir</a></b>(2)              Added in POSIX.1-2008 TC1
       <b><a href="../man2/fchmod.2.html">fchmod</a></b>(2)
       <b><a href="../man2/fchmodat.2.html">fchmodat</a></b>(2)            Added in POSIX.1-2008
       <b><a href="../man2/fchown.2.html">fchown</a></b>(2)
       <b><a href="../man2/fchownat.2.html">fchownat</a></b>(2)            Added in POSIX.1-2008
       <b><a href="../man2/fcntl.2.html">fcntl</a></b>(2)
       <b><a href="../man2/fdatasync.2.html">fdatasync</a></b>(2)
       <b><a href="../man3/fexecve.3.html">fexecve</a></b>(3)             Added in POSIX.1-2008
       <b><a href="../man3/ffs.3.html">ffs</a></b>(3)                 Added in POSIX.1-2008 TC2
       <b><a href="../man2/fork.2.html">fork</a></b>(2)                See notes below
       <b><a href="../man2/fstat.2.html">fstat</a></b>(2)
       <b><a href="../man2/fstatat.2.html">fstatat</a></b>(2)             Added in POSIX.1-2008
       <b><a href="../man2/fsync.2.html">fsync</a></b>(2)
       <b><a href="../man2/ftruncate.2.html">ftruncate</a></b>(2)
       <b><a href="../man3/futimens.3.html">futimens</a></b>(3)            Added in POSIX.1-2008
       <b><a href="../man2/getegid.2.html">getegid</a></b>(2)
       <b><a href="../man2/geteuid.2.html">geteuid</a></b>(2)
       <b><a href="../man2/getgid.2.html">getgid</a></b>(2)
       <b><a href="../man2/getgroups.2.html">getgroups</a></b>(2)
       <b><a href="../man2/getpeername.2.html">getpeername</a></b>(2)
       <b><a href="../man2/getpgrp.2.html">getpgrp</a></b>(2)
       <b><a href="../man2/getpid.2.html">getpid</a></b>(2)
       <b><a href="../man2/getppid.2.html">getppid</a></b>(2)
       <b><a href="../man2/getsockname.2.html">getsockname</a></b>(2)
       <b><a href="../man2/getsockopt.2.html">getsockopt</a></b>(2)
       <b><a href="../man2/getuid.2.html">getuid</a></b>(2)
       <b><a href="../man3/htonl.3.html">htonl</a></b>(3)               Added in POSIX.1-2008 TC2
       <b><a href="../man3/htons.3.html">htons</a></b>(3)               Added in POSIX.1-2008 TC2
       <b><a href="../man2/kill.2.html">kill</a></b>(2)
       <b><a href="../man2/link.2.html">link</a></b>(2)
       <b><a href="../man2/linkat.2.html">linkat</a></b>(2)              Added in POSIX.1-2008
       <b><a href="../man2/listen.2.html">listen</a></b>(2)
       <b><a href="../man3/longjmp.3.html">longjmp</a></b>(3)             Added in POSIX.1-2008 TC2; see  notes
                              below
       <b><a href="../man2/lseek.2.html">lseek</a></b>(2)
       <b><a href="../man2/lstat.2.html">lstat</a></b>(2)
       <b><a href="../man3/memccpy.3.html">memccpy</a></b>(3)             Added in POSIX.1-2008 TC2
       <b><a href="../man3/memchr.3.html">memchr</a></b>(3)              Added in POSIX.1-2008 TC2
       <b><a href="../man3/memcmp.3.html">memcmp</a></b>(3)              Added in POSIX.1-2008 TC2
       <b><a href="../man3/memcpy.3.html">memcpy</a></b>(3)              Added in POSIX.1-2008 TC2
       <b><a href="../man3/memmove.3.html">memmove</a></b>(3)             Added in POSIX.1-2008 TC2
       <b><a href="../man3/memset.3.html">memset</a></b>(3)              Added in POSIX.1-2008 TC2
       <b><a href="../man2/mkdir.2.html">mkdir</a></b>(2)
       <b><a href="../man2/mkdirat.2.html">mkdirat</a></b>(2)             Added in POSIX.1-2008
       <b><a href="../man3/mkfifo.3.html">mkfifo</a></b>(3)
       <b><a href="../man3/mkfifoat.3.html">mkfifoat</a></b>(3)            Added in POSIX.1-2008
       <b><a href="../man2/mknod.2.html">mknod</a></b>(2)               Added in POSIX.1-2008
       <b><a href="../man2/mknodat.2.html">mknodat</a></b>(2)             Added in POSIX.1-2008
       <b><a href="../man3/ntohl.3.html">ntohl</a></b>(3)               Added in POSIX.1-2008 TC2
       <b><a href="../man3/ntohs.3.html">ntohs</a></b>(3)               Added in POSIX.1-2008 TC2
       <b><a href="../man2/open.2.html">open</a></b>(2)
       <b><a href="../man2/openat.2.html">openat</a></b>(2)              Added in POSIX.1-2008
       <b><a href="../man2/pause.2.html">pause</a></b>(2)
       <b><a href="../man2/pipe.2.html">pipe</a></b>(2)
       <b><a href="../man2/poll.2.html">poll</a></b>(2)
       <b><a href="../man3/posix_trace_event.3.html">posix_trace_event</a></b>(3)
       <b><a href="../man2/pselect.2.html">pselect</a></b>(2)
       <b><a href="../man3/pthread_kill.3.html">pthread_kill</a></b>(3)        Added in POSIX.1-2008 TC1
       <b><a href="../man3/pthread_self.3.html">pthread_self</a></b>(3)        Added in POSIX.1-2008 TC1
       <b><a href="../man3/pthread_sigmask.3.html">pthread_sigmask</a></b>(3)     Added in POSIX.1-2008 TC1
       <b><a href="../man3/raise.3.html">raise</a></b>(3)
       <b><a href="../man2/read.2.html">read</a></b>(2)
       <b><a href="../man2/readlink.2.html">readlink</a></b>(2)
       <b><a href="../man2/readlinkat.2.html">readlinkat</a></b>(2)          Added in POSIX.1-2008
       <b><a href="../man2/recv.2.html">recv</a></b>(2)
       <b><a href="../man2/recvfrom.2.html">recvfrom</a></b>(2)
       <b><a href="../man2/recvmsg.2.html">recvmsg</a></b>(2)
       <b><a href="../man2/rename.2.html">rename</a></b>(2)
       <b><a href="../man2/renameat.2.html">renameat</a></b>(2)            Added in POSIX.1-2008
       <b><a href="../man2/rmdir.2.html">rmdir</a></b>(2)
       <b><a href="../man2/select.2.html">select</a></b>(2)
       <b><a href="../man3/sem_post.3.html">sem_post</a></b>(3)
       <b><a href="../man2/send.2.html">send</a></b>(2)
       <b><a href="../man2/sendmsg.2.html">sendmsg</a></b>(2)
       <b><a href="../man2/sendto.2.html">sendto</a></b>(2)
       <b><a href="../man2/setgid.2.html">setgid</a></b>(2)
       <b><a href="../man2/setpgid.2.html">setpgid</a></b>(2)
       <b><a href="../man2/setsid.2.html">setsid</a></b>(2)
       <b><a href="../man2/setsockopt.2.html">setsockopt</a></b>(2)
       <b><a href="../man2/setuid.2.html">setuid</a></b>(2)
       <b><a href="../man2/shutdown.2.html">shutdown</a></b>(2)
       <b><a href="../man2/sigaction.2.html">sigaction</a></b>(2)
       <b><a href="../man3/sigaddset.3.html">sigaddset</a></b>(3)
       <b><a href="../man3/sigdelset.3.html">sigdelset</a></b>(3)
       <b><a href="../man3/sigemptyset.3.html">sigemptyset</a></b>(3)
       <b><a href="../man3/sigfillset.3.html">sigfillset</a></b>(3)
       <b><a href="../man3/sigismember.3.html">sigismember</a></b>(3)
       <b><a href="../man3/siglongjmp.3.html">siglongjmp</a></b>(3)          Added  in POSIX.1-2008 TC2; see notes
                              below
       <b><a href="../man2/signal.2.html">signal</a></b>(2)
       <b><a href="../man3/sigpause.3.html">sigpause</a></b>(3)
       <b><a href="../man2/sigpending.2.html">sigpending</a></b>(2)
       <b><a href="../man2/sigprocmask.2.html">sigprocmask</a></b>(2)
       <b><a href="../man2/sigqueue.2.html">sigqueue</a></b>(2)
       <b><a href="../man3/sigset.3.html">sigset</a></b>(3)
       <b><a href="../man2/sigsuspend.2.html">sigsuspend</a></b>(2)
       <b><a href="../man3/sleep.3.html">sleep</a></b>(3)
       <b><a href="../man3/sockatmark.3.html">sockatmark</a></b>(3)          Added in POSIX.1-2001 TC2
       <b><a href="../man2/socket.2.html">socket</a></b>(2)
       <b><a href="../man2/socketpair.2.html">socketpair</a></b>(2)
       <b><a href="../man2/stat.2.html">stat</a></b>(2)
       <b><a href="../man3/stpcpy.3.html">stpcpy</a></b>(3)              Added in POSIX.1-2008 TC2
       <b><a href="../man3/stpncpy.3.html">stpncpy</a></b>(3)             Added in POSIX.1-2008 TC2
       <b><a href="../man3/strcat.3.html">strcat</a></b>(3)              Added in POSIX.1-2008 TC2
       <b><a href="../man3/strchr.3.html">strchr</a></b>(3)              Added in POSIX.1-2008 TC2
       <b><a href="../man3/strcmp.3.html">strcmp</a></b>(3)              Added in POSIX.1-2008 TC2
       <b><a href="../man3/strcpy.3.html">strcpy</a></b>(3)              Added in POSIX.1-2008 TC2
       <b><a href="../man3/strcspn.3.html">strcspn</a></b>(3)             Added in POSIX.1-2008 TC2
       <b><a href="../man3/strlen.3.html">strlen</a></b>(3)              Added in POSIX.1-2008 TC2
       <b><a href="../man3/strncat.3.html">strncat</a></b>(3)             Added in POSIX.1-2008 TC2
       <b><a href="../man3/strncmp.3.html">strncmp</a></b>(3)             Added in POSIX.1-2008 TC2
       <b><a href="../man3/strncpy.3.html">strncpy</a></b>(3)             Added in POSIX.1-2008 TC2
       <b><a href="../man3/strnlen.3.html">strnlen</a></b>(3)             Added in POSIX.1-2008 TC2
       <b><a href="../man3/strpbrk.3.html">strpbrk</a></b>(3)             Added in POSIX.1-2008 TC2
       <b><a href="../man3/strrchr.3.html">strrchr</a></b>(3)             Added in POSIX.1-2008 TC2
       <b><a href="../man3/strspn.3.html">strspn</a></b>(3)              Added in POSIX.1-2008 TC2
       <b><a href="../man3/strstr.3.html">strstr</a></b>(3)              Added in POSIX.1-2008 TC2
       <b><a href="../man3/strtok_r.3.html">strtok_r</a></b>(3)            Added in POSIX.1-2008 TC2
       <b><a href="../man2/symlink.2.html">symlink</a></b>(2)
       <b><a href="../man2/symlinkat.2.html">symlinkat</a></b>(2)           Added in POSIX.1-2008
       <b><a href="../man3/tcdrain.3.html">tcdrain</a></b>(3)
       <b><a href="../man3/tcflow.3.html">tcflow</a></b>(3)
       <b><a href="../man3/tcflush.3.html">tcflush</a></b>(3)
       <b><a href="../man3/tcgetattr.3.html">tcgetattr</a></b>(3)
       <b><a href="../man3/tcgetpgrp.3.html">tcgetpgrp</a></b>(3)
       <b><a href="../man3/tcsendbreak.3.html">tcsendbreak</a></b>(3)
       <b><a href="../man3/tcsetattr.3.html">tcsetattr</a></b>(3)
       <b><a href="../man3/tcsetpgrp.3.html">tcsetpgrp</a></b>(3)
       <b><a href="../man2/time.2.html">time</a></b>(2)
       <b><a href="../man2/timer_getoverrun.2.html">timer_getoverrun</a></b>(2)
       <b><a href="../man2/timer_gettime.2.html">timer_gettime</a></b>(2)
       <b><a href="../man2/timer_settime.2.html">timer_settime</a></b>(2)
       <b><a href="../man2/times.2.html">times</a></b>(2)
       <b><a href="../man2/umask.2.html">umask</a></b>(2)
       <b><a href="../man2/uname.2.html">uname</a></b>(2)
       <b><a href="../man2/unlink.2.html">unlink</a></b>(2)
       <b><a href="../man2/unlinkat.2.html">unlinkat</a></b>(2)            Added in POSIX.1-2008
       <b><a href="../man2/utime.2.html">utime</a></b>(2)
       <b><a href="../man2/utimensat.2.html">utimensat</a></b>(2)           Added in POSIX.1-2008
       <b><a href="../man2/utimes.2.html">utimes</a></b>(2)              Added in POSIX.1-2008
       <b><a href="../man2/wait.2.html">wait</a></b>(2)
       <b><a href="../man2/waitpid.2.html">waitpid</a></b>(2)
       <b><a href="../man3/wcpcpy.3.html">wcpcpy</a></b>(3)              Added in POSIX.1-2008 TC2
       <b><a href="../man3/wcpncpy.3.html">wcpncpy</a></b>(3)             Added in POSIX.1-2008 TC2
       <b><a href="../man3/wcscat.3.html">wcscat</a></b>(3)              Added in POSIX.1-2008 TC2
       <b><a href="../man3/wcschr.3.html">wcschr</a></b>(3)              Added in POSIX.1-2008 TC2
       <b><a href="../man3/wcscmp.3.html">wcscmp</a></b>(3)              Added in POSIX.1-2008 TC2
       <b><a href="../man3/wcscpy.3.html">wcscpy</a></b>(3)              Added in POSIX.1-2008 TC2
       <b><a href="../man3/wcscspn.3.html">wcscspn</a></b>(3)             Added in POSIX.1-2008 TC2
       <b><a href="../man3/wcslen.3.html">wcslen</a></b>(3)              Added in POSIX.1-2008 TC2
       <b><a href="../man3/wcsncat.3.html">wcsncat</a></b>(3)             Added in POSIX.1-2008 TC2
       <b><a href="../man3/wcsncmp.3.html">wcsncmp</a></b>(3)             Added in POSIX.1-2008 TC2
       <b><a href="../man3/wcsncpy.3.html">wcsncpy</a></b>(3)             Added in POSIX.1-2008 TC2
       <b><a href="../man3/wcsnlen.3.html">wcsnlen</a></b>(3)             Added in POSIX.1-2008 TC2
       <b><a href="../man3/wcspbrk.3.html">wcspbrk</a></b>(3)             Added in POSIX.1-2008 TC2
       <b><a href="../man3/wcsrchr.3.html">wcsrchr</a></b>(3)             Added in POSIX.1-2008 TC2
       <b><a href="../man3/wcsspn.3.html">wcsspn</a></b>(3)              Added in POSIX.1-2008 TC2
       <b><a href="../man3/wcsstr.3.html">wcsstr</a></b>(3)              Added in POSIX.1-2008 TC2
       <b><a href="../man3/wcstok.3.html">wcstok</a></b>(3)              Added in POSIX.1-2008 TC2
       <b><a href="../man3/wmemchr.3.html">wmemchr</a></b>(3)             Added in POSIX.1-2008 TC2
       <b><a href="../man3/wmemcmp.3.html">wmemcmp</a></b>(3)             Added in POSIX.1-2008 TC2
       <b><a href="../man3/wmemcpy.3.html">wmemcpy</a></b>(3)             Added in POSIX.1-2008 TC2
       <b><a href="../man3/wmemmove.3.html">wmemmove</a></b>(3)            Added in POSIX.1-2008 TC2
       <b><a href="../man3/wmemset.3.html">wmemset</a></b>(3)             Added in POSIX.1-2008 TC2
       <b><a href="../man2/write.2.html">write</a></b>(2)

       Notes:

       •  POSIX.1-2001 and POSIX.1-2001 TC2 required the functions <b><a href="../man3/fpathconf.3.html">fpathconf</a></b>(3), <b><a href="../man3/pathconf.3.html">pathconf</a></b>(3), and <b><a href="../man3/sysconf.3.html">sysconf</a></b>(3)  to
          be async-signal-safe, but this requirement was removed in POSIX.1-2008.

       •  If  a  signal handler interrupts the execution of an unsafe function, and the handler terminates via a
          call to <b><a href="../man3/longjmp.3.html">longjmp</a></b>(3) or <b><a href="../man3/siglongjmp.3.html">siglongjmp</a></b>(3) and the program subsequently calls an unsafe  function,  then  the
          behavior of the program is undefined.

       •  POSIX.1-2001  TC1  clarified that if an application calls <b><a href="../man2/fork.2.html">fork</a></b>(2) from a signal handler and any of the
          fork handlers registered by <b><a href="../man3/pthread_atfork.3.html">pthread_atfork</a></b>(3) calls a function  that  is  not  async-signal-safe,  the
          behavior is undefined.  A future revision of the standard is likely to remove <b><a href="../man2/fork.2.html">fork</a></b>(2) from the list of
          async-signal-safe functions.

       •  Asynchronous signal handlers that call functions which are cancelation points and nest over regions of
          deferred  cancelation  may  trigger  cancelation  whose behavior is as if asynchronous cancelation had
          occurred and may cause application state to become inconsistent.

   <b>errno</b>
       Fetching and setting the value of <u>errno</u> is async-signal-safe provided that the signal handler saves <u>errno</u>
       on entry and restores its value before returning.

   <b>Deviations</b> <b>in</b> <b>the</b> <b>GNU</b> <b>C</b> <b>library</b>
       The following known deviations from the standard occur in the GNU C library:

       •  Before glibc 2.24, <b><a href="../man3/execl.3.html">execl</a></b>(3) and <b><a href="../man3/execle.3.html">execle</a></b>(3) employed <b><a href="../man3/realloc.3.html">realloc</a></b>(3) internally  and  were  consequently  not
          async-signal-safe.  This was fixed in glibc 2.24.

       •  The   glibc   implementation   of   <b><a href="../man3/aio_suspend.3.html">aio_suspend</a></b>(3)   is   not   async-signal-safe   because   it  uses
          <b><a href="../man3/pthread_mutex_lock.3.html">pthread_mutex_lock</a></b>(3) internally.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man2/sigaction.2.html">sigaction</a></b>(2), <b><a href="../man7/signal.7.html">signal</a></b>(7), <b><a href="../man7/standards.7.html">standards</a></b>(7)

Linux man-pages 6.9.1                              2024-05-02                                   <u><a href="../man7/signal-safety.7.html">signal-safety</a></u>(7)
</pre>
 </div>
</div></section>
</div>
</body>
</html>