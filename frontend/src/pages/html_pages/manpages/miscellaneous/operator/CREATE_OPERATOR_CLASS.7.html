<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CREATE_OPERATOR_CLASS - define a new operator class</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/postgresql-client-17">postgresql-client-17_17.5-1build1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       CREATE_OPERATOR_CLASS - define a new operator class

</pre><h4><b>SYNOPSIS</b></h4><pre>
       CREATE OPERATOR CLASS <u>name</u> [ DEFAULT ] FOR TYPE <u>data_type</u>
         USING <u>index_method</u> [ FAMILY <u>family_name</u> ] AS
         {  OPERATOR <u>strategy_number</u> <u>operator_name</u> [ ( <u>op_type</u>, <u>op_type</u> ) ] [ FOR SEARCH | FOR ORDER BY <u>sort_family_name</u> ]
          | FUNCTION <u>support_number</u> [ ( <u>op_type</u> [ , <u>op_type</u> ] ) ] <u>function_name</u> ( <u>argument_type</u> [, ...] )
          | STORAGE <u>storage_type</u>
         } [, ... ]

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>CREATE</b> <b>OPERATOR</b> <b>CLASS</b> creates a new operator class. An operator class defines how a particular data type
       can be used with an index. The operator class specifies that certain operators will fill particular roles
       or “strategies” for this data type and this index method. The operator class also specifies the support
       functions to be used by the index method when the operator class is selected for an index column. All the
       operators and functions used by an operator class must be defined before the operator class can be
       created.

       If a schema name is given then the operator class is created in the specified schema. Otherwise it is
       created in the current schema. Two operator classes in the same schema can have the same name only if
       they are for different index methods.

       The user who defines an operator class becomes its owner. Presently, the creating user must be a
       superuser. (This restriction is made because an erroneous operator class definition could confuse or even
       crash the server.)

       <b>CREATE</b> <b>OPERATOR</b> <b>CLASS</b> does not presently check whether the operator class definition includes all the
       operators and functions required by the index method, nor whether the operators and functions form a
       self-consistent set. It is the user's responsibility to define a valid operator class.

       Related operator classes can be grouped into operator families. To add a new operator class to an
       existing family, specify the FAMILY option in <b>CREATE</b> <b>OPERATOR</b> <b>CLASS</b>. Without this option, the new class
       is placed into a family named the same as the new class (creating that family if it doesn't already
       exist).

       Refer to Section 36.16 for further information.

</pre><h4><b>PARAMETERS</b></h4><pre>
       <u>name</u>
           The name of the operator class to be created. The name can be schema-qualified.

       DEFAULT
           If present, the operator class will become the default operator class for its data type. At most one
           operator class can be the default for a specific data type and index method.

       <u>data_type</u>
           The column data type that this operator class is for.

       <u>index_method</u>
           The name of the index method this operator class is for.

       <u>family_name</u>
           The name of the existing operator family to add this operator class to. If not specified, a family
           named the same as the operator class is used (creating it, if it doesn't already exist).

       <u>strategy_number</u>
           The index method's strategy number for an operator associated with the operator class.

       <u>operator_name</u>
           The name (optionally schema-qualified) of an operator associated with the operator class.

       <u>op_type</u>
           In an OPERATOR clause, the operand data type(s) of the operator, or NONE to signify a prefix
           operator. The operand data types can be omitted in the normal case where they are the same as the
           operator class's data type.

           In a FUNCTION clause, the operand data type(s) the function is intended to support, if different from
           the input data type(s) of the function (for B-tree comparison functions and hash functions) or the
           class's data type (for B-tree sort support functions, B-tree equal image functions, and all functions
           in GiST, SP-GiST, GIN and BRIN operator classes). These defaults are correct, and so <u>op_type</u> need not
           be specified in FUNCTION clauses, except for the case of a B-tree sort support function that is meant
           to support cross-data-type comparisons.

       <u>sort_family_name</u>
           The name (optionally schema-qualified) of an existing btree operator family that describes the sort
           ordering associated with an ordering operator.

           If neither FOR SEARCH nor FOR ORDER BY is specified, FOR SEARCH is the default.

       <u>support_number</u>
           The index method's support function number for a function associated with the operator class.

       <u>function_name</u>
           The name (optionally schema-qualified) of a function that is an index method support function for the
           operator class.

       <u>argument_type</u>
           The parameter data type(s) of the function.

       <u>storage_type</u>
           The data type actually stored in the index. Normally this is the same as the column data type, but
           some index methods (currently GiST, GIN, SP-GiST and BRIN) allow it to be different. The STORAGE
           clause must be omitted unless the index method allows a different type to be used. If the column
           <u>data_type</u> is specified as anyarray, the <u>storage_type</u> can be declared as anyelement to indicate that
           the index entries are members of the element type belonging to the actual array type that each
           particular index is created for.

       The OPERATOR, FUNCTION, and STORAGE clauses can appear in any order.

</pre><h4><b>NOTES</b></h4><pre>
       Because the index machinery does not check access permissions on functions before using them, including a
       function or operator in an operator class is tantamount to granting public execute permission on it. This
       is usually not an issue for the sorts of functions that are useful in an operator class.

       The operators should not be defined by SQL functions. An SQL function is likely to be inlined into the
       calling query, which will prevent the optimizer from recognizing that the query matches an index.

       Before PostgreSQL 8.4, the OPERATOR clause could include a RECHECK option. This is no longer supported
       because whether an index operator is “lossy” is now determined on-the-fly at run time. This allows
       efficient handling of cases where an operator might or might not be lossy.

</pre><h4><b>EXAMPLES</b></h4><pre>
       The following example command defines a GiST index operator class for the data type _int4 (array of
       int4). See the intarray module for the complete example.

           CREATE OPERATOR CLASS gist__int_ops
               DEFAULT FOR TYPE _int4 USING gist AS
                   OPERATOR        3       &amp;&amp;,
                   OPERATOR        6       = (anyarray, anyarray),
                   OPERATOR        7       @&gt;,
                   OPERATOR        8       &lt;@,
                   OPERATOR        20      @@ (_int4, query_int),
                   FUNCTION        1       g_int_consistent (internal, _int4, smallint, oid, internal),
                   FUNCTION        2       g_int_union (internal, internal),
                   FUNCTION        3       g_int_compress (internal),
                   FUNCTION        4       g_int_decompress (internal),
                   FUNCTION        5       g_int_penalty (internal, internal, internal),
                   FUNCTION        6       g_int_picksplit (internal, internal),
                   FUNCTION        7       g_int_same (_int4, _int4, internal);

</pre><h4><b>COMPATIBILITY</b></h4><pre>
       <b>CREATE</b> <b>OPERATOR</b> <b>CLASS</b> is a PostgreSQL extension. There is no <b>CREATE</b> <b>OPERATOR</b> <b>CLASS</b> statement in the SQL
       standard.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       ALTER OPERATOR CLASS (<b><a href="../man7/ALTER_OPERATOR_CLASS.7.html">ALTER_OPERATOR_CLASS</a></b>(7)), DROP OPERATOR CLASS (<b><a href="../man7/DROP_OPERATOR_CLASS.7.html">DROP_OPERATOR_CLASS</a></b>(7)), CREATE
       OPERATOR FAMILY (<b><a href="../man7/CREATE_OPERATOR_FAMILY.7.html">CREATE_OPERATOR_FAMILY</a></b>(7)), ALTER OPERATOR FAMILY (<b><a href="../man7/ALTER_OPERATOR_FAMILY.7.html">ALTER_OPERATOR_FAMILY</a></b>(7))

PostgreSQL 17.5                                       2025                              <u>CREATE</u> <u>OPERATOR</u> <u><a href="../man7/CLASS.7.html">CLASS</a></u>(7)
</pre>
 </div>
</div></section>
</div>
</body>
</html>