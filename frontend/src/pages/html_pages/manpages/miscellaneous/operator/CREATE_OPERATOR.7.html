<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CREATE_OPERATOR - define a new operator</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/postgresql-client-17">postgresql-client-17_17.5-1build1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       CREATE_OPERATOR - define a new operator

</pre><h4><b>SYNOPSIS</b></h4><pre>
       CREATE OPERATOR <u>name</u> (
           {FUNCTION|PROCEDURE} = <u>function_name</u>
           [, LEFTARG = <u>left_type</u> ] [, RIGHTARG = <u>right_type</u> ]
           [, COMMUTATOR = <u>com_op</u> ] [, NEGATOR = <u>neg_op</u> ]
           [, RESTRICT = <u>res_proc</u> ] [, JOIN = <u>join_proc</u> ]
           [, HASHES ] [, MERGES ]
       )

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>CREATE</b> <b>OPERATOR</b> defines a new operator, <u>name</u>. The user who defines an operator becomes its owner. If a
       schema name is given then the operator is created in the specified schema. Otherwise it is created in the
       current schema.

       The operator name is a sequence of up to NAMEDATALEN-1 (63 by default) characters from the following
       list:

           + - * / &lt; &gt; = ~ ! @ # % ^ &amp; | ` ?

       There are a few restrictions on your choice of name:

       •   -- and /* cannot appear anywhere in an operator name, since they will be taken as the start of a
           comment.

       •   A multicharacter operator name cannot end in + or -, unless the name also contains at least one of
           these characters:

               ~ ! @ # % ^ &amp; | ` ?

           For example, @- is an allowed operator name, but *- is not. This restriction allows PostgreSQL to
           parse SQL-compliant commands without requiring spaces between tokens.

       •   The symbol =&gt; is reserved by the SQL grammar, so it cannot be used as an operator name.

       The operator != is mapped to &lt;&gt; on input, so these two names are always equivalent.

       For binary operators, both LEFTARG and RIGHTARG must be defined. For prefix operators only RIGHTARG
       should be defined. The <u>function_name</u> function must have been previously defined using <b>CREATE</b> <b>FUNCTION</b> and
       must be defined to accept the correct number of arguments (either one or two) of the indicated types.

       In the syntax of CREATE OPERATOR, the keywords FUNCTION and PROCEDURE are equivalent, but the referenced
       function must in any case be a function, not a procedure. The use of the keyword PROCEDURE here is
       historical and deprecated.

       The other clauses specify optional operator optimization attributes. Their meaning is detailed in
       Section 36.15.

       To be able to create an operator, you must have USAGE privilege on the argument types and the return
       type, as well as EXECUTE privilege on the underlying function. If a commutator or negator operator is
       specified, you must own those operators.

</pre><h4><b>PARAMETERS</b></h4><pre>
       <u>name</u>
           The name of the operator to be defined. See above for allowable characters. The name can be
           schema-qualified, for example CREATE OPERATOR myschema.+ (...). If not, then the operator is created
           in the current schema. Two operators in the same schema can have the same name if they operate on
           different data types. This is called overloading.

       <u>function_name</u>
           The function used to implement this operator.

       <u>left_type</u>
           The data type of the operator's left operand, if any. This option would be omitted for a prefix
           operator.

       <u>right_type</u>
           The data type of the operator's right operand.

       <u>com_op</u>
           The commutator of this operator.

       <u>neg_op</u>
           The negator of this operator.

       <u>res_proc</u>
           The restriction selectivity estimator function for this operator.

       <u>join_proc</u>
           The join selectivity estimator function for this operator.

       HASHES
           Indicates this operator can support a hash join.

       MERGES
           Indicates this operator can support a merge join.

       To give a schema-qualified operator name in <u>com_op</u> or the other optional arguments, use the OPERATOR()
       syntax, for example:

           COMMUTATOR = OPERATOR(myschema.===) ,

</pre><h4><b>NOTES</b></h4><pre>
       Refer to Section 36.14 and Section 36.15 for further information.

       When you are defining a self-commutative operator, you just do it. When you are defining a pair of
       commutative operators, things are a little trickier: how can the first one to be defined refer to the
       other one, which you haven't defined yet? There are three solutions to this problem:

       •   One way is to omit the COMMUTATOR clause in the first operator that you define, and then provide one
           in the second operator's definition. Since PostgreSQL knows that commutative operators come in pairs,
           when it sees the second definition it will automatically go back and fill in the missing COMMUTATOR
           clause in the first definition.

       •   Another, more straightforward way is just to include COMMUTATOR clauses in both definitions. When
           PostgreSQL processes the first definition and realizes that COMMUTATOR refers to a nonexistent
           operator, the system will make a dummy entry for that operator in the system catalog. This dummy
           entry will have valid data only for the operator name, left and right operand types, and owner, since
           that's all that PostgreSQL can deduce at this point. The first operator's catalog entry will link to
           this dummy entry. Later, when you define the second operator, the system updates the dummy entry with
           the additional information from the second definition. If you try to use the dummy operator before
           it's been filled in, you'll just get an error message.

       •   Alternatively, both operators can be defined without COMMUTATOR clauses and then <b>ALTER</b> <b>OPERATOR</b> can
           be used to set their commutator links. It's sufficient to <b>ALTER</b> either one of the pair.

       In all three cases, you must own both operators in order to mark them as commutators.

       Pairs of negator operators can be defined using the same methods as for commutator pairs.

       It is not possible to specify an operator's lexical precedence in <b>CREATE</b> <b>OPERATOR</b>, because the parser's
       precedence behavior is hard-wired. See Section 4.1.6 for precedence details.

       The obsolete options SORT1, SORT2, LTCMP, and GTCMP were formerly used to specify the names of sort
       operators associated with a merge-joinable operator. This is no longer necessary, since information about
       associated operators is found by looking at B-tree operator families instead. If one of these options is
       given, it is ignored except for implicitly setting MERGES true.

       Use <b>DROP</b> <b>OPERATOR</b> to delete user-defined operators from a database. Use <b>ALTER</b> <b>OPERATOR</b> to modify
       operators in a database.

</pre><h4><b>EXAMPLES</b></h4><pre>
       The following command defines a new operator, area-equality, for the data type box:

           CREATE OPERATOR === (
               LEFTARG = box,
               RIGHTARG = box,
               FUNCTION = area_equal_function,
               COMMUTATOR = ===,
               NEGATOR = !==,
               RESTRICT = area_restriction_function,
               JOIN = area_join_function,
               HASHES, MERGES
           );

</pre><h4><b>COMPATIBILITY</b></h4><pre>
       <b>CREATE</b> <b>OPERATOR</b> is a PostgreSQL extension. There are no provisions for user-defined operators in the SQL
       standard.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       ALTER OPERATOR (<b><a href="../man7/ALTER_OPERATOR.7.html">ALTER_OPERATOR</a></b>(7)), CREATE OPERATOR CLASS (<b><a href="../man7/CREATE_OPERATOR_CLASS.7.html">CREATE_OPERATOR_CLASS</a></b>(7)), DROP OPERATOR
       (<b><a href="../man7/DROP_OPERATOR.7.html">DROP_OPERATOR</a></b>(7))

PostgreSQL 17.5                                       2025                                    <u>CREATE</u> <u><a href="../man7/OPERATOR.7.html">OPERATOR</a></u>(7)
</pre>
 </div>
</div></section>
</div>
</body>
</html>