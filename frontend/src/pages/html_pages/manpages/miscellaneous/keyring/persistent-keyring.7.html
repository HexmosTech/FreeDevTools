<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>persistent-keyring - per-user persistent keyring</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/manpages">manpages_6.9.1-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       persistent-keyring - per-user persistent keyring

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The  persistent  keyring is a keyring used to anchor keys on behalf of a user.  Each UID the kernel deals
       with has its own persistent keyring that is shared between all threads owned by that UID.  The persistent
       keyring has a name (description) of the form  <b>_</b><u>persistent.&lt;UID&gt;</u>  where  <u>&lt;UID&gt;</u>  is  the  user  ID  of  the
       corresponding user.

       The  persistent  keyring  may  not  be  accessed  directly,  even  by processes with the appropriate UID.
       Instead, it must first be linked to one of a process's keyrings,  before  that  keyring  can  access  the
       persistent   keyring   by   virtue   of   its   possessor   permits.   This  linking  is  done  with  the
       <b><a href="../man3/keyctl_get_persistent.3.html">keyctl_get_persistent</a></b>(3) function.

       If a persistent keyring does not exist when it is accessed by the <b><a href="../man3/keyctl_get_persistent.3.html">keyctl_get_persistent</a></b>(3) operation,  it
       will be automatically created.

       Each  time the <b><a href="../man3/keyctl_get_persistent.3.html">keyctl_get_persistent</a></b>(3) operation is performed, the persistent keyring's expiration timer
       is reset to the value in:

           <a href="file:/proc/sys/kernel/keys/persistent_keyring_expiry">/proc/sys/kernel/keys/persistent_keyring_expiry</a>

       Should the timeout be reached, the persistent keyring will be removed and everything it pins can then  be
       garbage collected.  The keyring will then be re-created on a subsequent call to <b><a href="../man3/keyctl_get_persistent.3.html">keyctl_get_persistent</a></b>(3).

       The  persistent  keyring  is not directly searched by <b><a href="../man2/request_key.2.html">request_key</a></b>(2); it is searched only if it is linked
       into one of the keyrings that is searched by <b><a href="../man2/request_key.2.html">request_key</a></b>(2).

       The persistent keyring is independent of  <b><a href="../man2/clone.2.html">clone</a></b>(2),  <b><a href="../man2/fork.2.html">fork</a></b>(2),  <b><a href="../man2/vfork.2.html">vfork</a></b>(2),  <b><a href="../man2/execve.2.html">execve</a></b>(2),  and  <b><a href="../man2/_exit.2.html">_exit</a></b>(2).   It
       persists  until  its  expiration timer triggers, at which point it is garbage collected.  This allows the
       persistent keyring to carry keys beyond the life of the kernel's record of  the  corresponding  UID  (the
       destruction  of which results in the destruction of the <b><a href="../man7/user-keyring.7.html">user-keyring</a></b>(7) and the <b><a href="../man7/user-session-keyring.7.html">user-session-keyring</a></b>(7)).
       The persistent keyring can thus be used to hold authentication tokens for processes that run without user
       interaction, such as programs started by <b><a href="../man8/cron.8.html">cron</a></b>(8).

       The persistent keyring is used to store UID-specific  objects  that  themselves  have  limited  lifetimes
       (e.g.,  kerberos  tokens).   If  those  tokens  cease  to  be  used  (i.e., the persistent keyring is not
       accessed), then the timeout of  the  persistent  keyring  ensures  that  the  corresponding  objects  are
       automatically discarded.

   <b>Special</b> <b>operations</b>
       The <u>keyutils</u> library provides the <b><a href="../man3/keyctl_get_persistent.3.html">keyctl_get_persistent</a></b>(3) function for manipulating persistent keyrings.
       (This  function is an interface to the <b><a href="../man2/keyctl.2.html">keyctl</a></b>(2) <b>KEYCTL_GET_PERSISTENT</b> operation.)  This operation allows
       the calling thread to get the persistent keyring corresponding to its own UID or, if the thread  has  the
       <b>CAP_SETUID</b> capability, the persistent keyring corresponding to some other UID in the same user namespace.

</pre><h4><b>NOTES</b></h4><pre>
       Each  user  namespace  owns  a  keyring  called  <u>.persistent_register</u>  that  contains links to all of the
       persistent keys in that namespace.  (The <u>.persistent_register</u>  keyring  can  be  seen  when  reading  the
       contents  of the <u><a href="file:/proc/keys">/proc/keys</a></u> file for the UID 0 in the namespace.)  The <b><a href="../man3/keyctl_get_persistent.3.html">keyctl_get_persistent</a></b>(3) operation
       looks for a key with a name of the form <b>_</b><u>persistent.</u>UID in that keyring, creates the key if it  does  not
       exist, and links it into the keyring.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man1/keyctl.1.html">keyctl</a></b>(1), <b><a href="../man3/keyctl.3.html">keyctl</a></b>(3), <b><a href="../man3/keyctl_get_persistent.3.html">keyctl_get_persistent</a></b>(3), <b><a href="../man7/keyrings.7.html">keyrings</a></b>(7), <b><a href="../man7/process-keyring.7.html">process-keyring</a></b>(7), <b><a href="../man7/session-keyring.7.html">session-keyring</a></b>(7),
       <b><a href="../man7/thread-keyring.7.html">thread-keyring</a></b>(7), <b><a href="../man7/user-keyring.7.html">user-keyring</a></b>(7), <b><a href="../man7/user-session-keyring.7.html">user-session-keyring</a></b>(7)

Linux man-pages 6.9.1                              2024-05-02                              <u><a href="../man7/persistent-keyring.7.html">persistent-keyring</a></u>(7)
</pre>
 </div>
</div></section>
</div>
</body>
</html>