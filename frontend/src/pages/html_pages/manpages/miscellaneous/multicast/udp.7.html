<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>udp - User Datagram Protocol for IPv4</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/manpages">manpages_6.9.1-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       udp - User Datagram Protocol for IPv4

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;sys/socket.h&gt;</b>
       <b>#include</b> <b>&lt;<a href="file:/usr/include/netinet/in.h">netinet/in.h</a>&gt;</b>
       <b>#include</b> <b>&lt;<a href="file:/usr/include/netinet/udp.h">netinet/udp.h</a>&gt;</b>

       <u>udp_socket</u> <b>=</b> <b>socket(AF_INET,</b> <b>SOCK_DGRAM,</b> <b>0);</b>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This  is  an  implementation  of  the  User  Datagram  Protocol  described  in  RFC 768.  It implements a
       connectionless, unreliable datagram packet service.  Packets may be reordered or duplicated  before  they
       arrive.  UDP generates and checks checksums to catch transmission errors.

       When  a  UDP  socket  is  created, its local and remote addresses are unspecified.  Datagrams can be sent
       immediately using <b><a href="../man2/sendto.2.html">sendto</a></b>(2) or <b><a href="../man2/sendmsg.2.html">sendmsg</a></b>(2)  with  a  valid  destination  address  as  an  argument.   When
       <b><a href="../man2/connect.2.html">connect</a></b>(2)  is called on the socket, the default destination address is set and datagrams can now be sent
       using <b><a href="../man2/send.2.html">send</a></b>(2) or <b><a href="../man2/write.2.html">write</a></b>(2) without specifying a destination address.  It is  still  possible  to  send  to
       other  destinations  by  passing an address to <b><a href="../man2/sendto.2.html">sendto</a></b>(2) or <b><a href="../man2/sendmsg.2.html">sendmsg</a></b>(2).  In order to receive packets, the
       socket can be bound to a local address  first  by  using  <b><a href="../man2/bind.2.html">bind</a></b>(2).   Otherwise,  the  socket  layer  will
       automatically assign a free local port out of the range defined by <u><a href="file:/proc/sys/net/ipv4/ip_local_port_range">/proc/sys/net/ipv4/ip_local_port_range</a></u>
       and bind the socket to <b>INADDR_ANY</b>.

       All  receive  operations return only one packet.  When the packet is smaller than the passed buffer, only
       that much data is returned; when it is bigger, the packet is truncated and the  <b>MSG_TRUNC</b>  flag  is  set.
       <b>MSG_WAITALL</b> is not supported.

       IP  options  may  be sent or received using the socket options described in <b><a href="../man7/ip.7.html">ip</a></b>(7).  They are processed by
       the kernel only when the appropriate <u><a href="file:/proc">/proc</a></u> parameter is enabled (but still passed to the user  even  when
       it is turned off).  See <b><a href="../man7/ip.7.html">ip</a></b>(7).

       When  the  <b>MSG_DONTROUTE</b>  flag is set on sending, the destination address must refer to a local interface
       address and the packet is sent only to that interface.

       By default, Linux UDP does path MTU (Maximum Transmission Unit) discovery.  This means  the  kernel  will
       keep track of the MTU to a specific target IP address and return <b>EMSGSIZE</b> when a UDP packet write exceeds
       it.   When this happens, the application should decrease the packet size.  Path MTU discovery can be also
       turned off using the <b>IP_MTU_DISCOVER</b> socket option or the  <u><a href="file:/proc/sys/net/ipv4/ip_no_pmtu_disc">/proc/sys/net/ipv4/ip_no_pmtu_disc</a></u>  file;  see
       <b><a href="../man7/ip.7.html">ip</a></b>(7)  for  details.   When  turned off, UDP will fragment outgoing UDP packets that exceed the interface
       MTU.  However, disabling it is not recommended for performance and reliability reasons.

   <b>Address</b> <b>format</b>
       UDP uses the IPv4 <u>sockaddr_in</u> address format described in <b><a href="../man7/ip.7.html">ip</a></b>(7).

   <b>Error</b> <b>handling</b>
       All fatal errors will be passed to the user as an error return even when the  socket  is  not  connected.
       This  includes asynchronous errors received from the network.  You may get an error for an earlier packet
       that was sent on the same socket.  This behavior differs from many other BSD socket implementations which
       don't pass any errors unless the socket is connected.  Linux's behavior is mandated by <b>RFC</b> <b>1122</b>.

       For compatibility with legacy code, in Linux 2.0  and  2.2  it  was  possible  to  set  the  <b>SO_BSDCOMPAT</b>
       <b>SOL_SOCKET</b> option to receive remote errors only when the socket has been connected (except for <b>EPROTO</b> and
       <b>EMSGSIZE</b>).   Locally  generated  errors are always passed.  Support for this socket option was removed in
       later kernels; see <b><a href="../man7/socket.7.html">socket</a></b>(7) for further information.

       When the <b>IP_RECVERR</b> option is enabled, all errors are stored in  the  socket  error  queue,  and  can  be
       received by <b><a href="../man2/recvmsg.2.html">recvmsg</a></b>(2) with the <b>MSG_ERRQUEUE</b> flag set.

   <b><a href="file:/proc">/proc</a></b> <b>interfaces</b>
       System-wide UDP parameter settings can be accessed by files in the directory <u><a href="file:/proc/sys/net/ipv4/">/proc/sys/net/ipv4/</a></u>.

       <u>udp_mem</u> (since Linux 2.6.25)
              This  is  a vector of three integers governing the number of pages allowed for queueing by all UDP
              sockets.

              <u>min</u>    Below this number of pages, UDP is not bothered about its memory appetite.  When the amount
                     of memory allocated by UDP exceeds this number, UDP starts to moderate memory usage.

              <u>pressure</u>
                     This value was introduced to follow the format of <u>tcp_mem</u> (see <b><a href="../man7/tcp.7.html">tcp</a></b>(7)).

              <u>max</u>    Number of pages allowed for queueing by all UDP sockets.

              Defaults values for these three items are calculated at boot time from  the  amount  of  available
              memory.

       <u>udp_rmem_min</u> (integer; default value: PAGE_SIZE; since Linux 2.6.25)
              Minimal  size, in bytes, of receive buffers used by UDP sockets in moderation.  Each UDP socket is
              able to use the size for receiving data, even  if  total  pages  of  UDP  sockets  exceed  <u>udp_mem</u>
              pressure.

       <u>udp_wmem_min</u> (integer; default value: PAGE_SIZE; since Linux 2.6.25)
              Minimal size, in bytes, of send buffer used by UDP sockets in moderation.  Each UDP socket is able
              to use the size for sending data, even if total pages of UDP sockets exceed <u>udp_mem</u> pressure.

   <b>Socket</b> <b>options</b>
       To  set  or get a UDP socket option, call <b><a href="../man2/getsockopt.2.html">getsockopt</a></b>(2) to read or <b><a href="../man2/setsockopt.2.html">setsockopt</a></b>(2) to write the option with
       the option level argument set to <b>IPPROTO_UDP</b>.  Unless otherwise noted, <u>optval</u> is a pointer to an <u>int</u>.

       Following is a list of UDP-specific socket options.  For details of some other socket  options  that  are
       also applicable for UDP sockets, see <b><a href="../man7/socket.7.html">socket</a></b>(7).

       <b>UDP_CORK</b> (since Linux 2.5.44)
              If  this  option  is  enabled,  then  all  data output on this socket is accumulated into a single
              datagram that is transmitted when the option is disabled.  This option should not be used in  code
              intended to be portable.

       <b>UDP_SEGMENT</b> (since Linux 4.18)
              Enables  UDP  segmentation  offload.   Segmentation  offload  reduces <b><a href="../man2/send.2.html">send</a></b>(2) cost by transferring
              multiple datagrams worth of data as a single large packet through the kernel transmit  path,  even
              when  that  exceeds  MTU.   As  late as possible, the large packet is split by segment size into a
              series of datagrams.  This segmentation offload step is deferred to hardware  if  supported,  else
              performed  in  software.   This  option  takes  a  value in the range [<b>0</b>, <b>USHRT_MAX</b>] that sets the
              segment size: the size of datagram payload, excluding the UDP header.  The segment  size  must  be
              chosen  such  that  at  most  64  datagrams are sent in a single call and that the datagrams after
              segmentation meet  the  same  MTU  rules  that  apply  to  datagrams  sent  without  this  option.
              Segmentation  offload  depends  on  checksum  offload,  as  datagram  checksums are computed after
              segmentation.  The option may also be set for individual <b><a href="../man2/sendmsg.2.html">sendmsg</a></b>(2)  calls  by  passing  it  as  a
              <b><a href="../man3/cmsg.3.html">cmsg</a></b>(3).   A  value of zero disables the feature.  This option should not be used in code intended
              to be portable.

       <b>UDP_GRO</b> (since Linux 5.0)
              Enables UDP receive offload.  If enabled, the socket may receive multiple datagrams worth of  data
              as a single large buffer, together with a <b><a href="../man3/cmsg.3.html">cmsg</a></b>(3) that holds the segment size.  This option is the
              inverse  of segmentation offload.  It reduces receive cost by handling multiple datagrams worth of
              data as a single large packet in the kernel receive path, even when that exceeds MTU.  This option
              should not be used in code intended to be portable.

   <b>Ioctls</b>
       These ioctls can be accessed using <b><a href="../man2/ioctl.2.html">ioctl</a></b>(2).  The correct syntax is:

              <b>int</b> <u>value</u><b>;</b>
              <u>error</u> <b>=</b> <b>ioctl(</b><u>udp_socket</u><b>,</b> <u>ioctl_type</u><b>,</b> <b>&amp;</b><u>value</u><b>);</b>

       <b>FIONREAD</b> (<b>SIOCINQ</b>)
              Gets a pointer to an integer as argument.  Returns the size of the next pending  datagram  in  the
              integer  in bytes, or 0 when no datagram is pending.  <b>Warning:</b> Using <b>FIONREAD</b>, it is impossible to
              distinguish the case where no datagram is pending from the case where the  next  pending  datagram
              contains  zero  bytes  of data.  It is safer to use <b><a href="../man2/select.2.html">select</a></b>(2), <b><a href="../man2/poll.2.html">poll</a></b>(2), or <b><a href="../man7/epoll.7.html">epoll</a></b>(7) to distinguish
              these cases.

       <b>TIOCOUTQ</b> (<b>SIOCOUTQ</b>)
              Returns the number of data bytes in the local send queue.   Supported  only  with  Linux  2.4  and
              above.

       In addition, all ioctls documented in <b><a href="../man7/ip.7.html">ip</a></b>(7) and <b><a href="../man7/socket.7.html">socket</a></b>(7) are supported.

</pre><h4><b>ERRORS</b></h4><pre>
       All errors documented for <b><a href="../man7/socket.7.html">socket</a></b>(7) or <b><a href="../man7/ip.7.html">ip</a></b>(7) may be returned by a send or receive on a UDP socket.

       <b>ECONNREFUSED</b>
              No  receiver  was  associated  with  the  destination address.  This might be caused by a previous
              packet sent over the socket.

</pre><h4><b>VERSIONS</b></h4><pre>
       <b>IP_RECVERR</b> is a new feature in Linux 2.2.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man7/ip.7.html">ip</a></b>(7), <b><a href="../man7/raw.7.html">raw</a></b>(7), <b><a href="../man7/socket.7.html">socket</a></b>(7), <b><a href="../man7/udplite.7.html">udplite</a></b>(7)

       The kernel source file <u>Documentation/networking/ip-sysctl.txt</u>.

       RFC 768 for the User Datagram Protocol.
       RFC 1122 for the host requirements.
       RFC 1191 for a description of path MTU discovery.

Linux man-pages 6.9.1                              2024-05-02                                             <u><a href="../man7/udp.7.html">udp</a></u>(7)
</pre>
 </div>
</div></section>
</div>
</body>
</html>