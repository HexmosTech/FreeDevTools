<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>zmq_pgm - 0MQ reliable multicast transport using PGM</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libzmq3-dev">libzmq3-dev_4.3.5-1build2_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       zmq_pgm - 0MQ reliable multicast transport using PGM

</pre><h4><b>SYNOPSIS</b></h4><pre>
       PGM (Pragmatic General Multicast) is a protocol for reliable multicast transport of data over IP
       networks.

</pre><h4><b>DESCRIPTION</b></h4><pre>
       0MQ implements two variants of PGM, the standard protocol where PGM datagrams are layered directly on top
       of IP datagrams as defined by RFC 3208 (the <u>pgm</u> transport) and "Encapsulated PGM" or EPGM where PGM
       datagrams are encapsulated inside UDP datagrams (the <u>epgm</u> transport).

       The <u>pgm</u> and <u>epgm</u> transports can only be used with the <u>ZMQ_PUB</u> and <u>ZMQ_SUB</u> socket types.

       Further, PGM sockets are rate limited by default. For details, refer to the <u>ZMQ_RATE</u>, and
       <u>ZMQ_RECOVERY_IVL</u> options documented in <b><a href="../man3/zmq_setsockopt.3.html">zmq_setsockopt</a></b>(3).

           <b>Caution</b>

           The <u>pgm</u> transport implementation requires access to raw IP sockets. Additional privileges may be
           required on some operating systems for this operation. Applications not requiring direct
           interoperability with other PGM implementations are encouraged to use the <u>epgm</u> transport instead
           which does not require any special privileges.

</pre><h4><b>ADDRESSING</b></h4><pre>
       A 0MQ endpoint is a string consisting of a <u>transport</u>:// followed by an <u>address</u>. The <u>transport</u> specifies
       the underlying protocol to use. The <u>address</u> specifies the transport-specific address to connect to.

       For the PGM transport, the transport is pgm, and for the EPGM protocol the transport is epgm. The meaning
       of the <u>address</u> part is defined below.

   <b>Connecting</b> <b>a</b> <b>socket</b>
       When connecting a socket to a peer address using <u>zmq_connect()</u> with the <u>pgm</u> or <u>epgm</u> transport, the
       <u>endpoint</u> shall be interpreted as an <u>interface</u> followed by a semicolon, followed by a <u>multicast</u> <u>address</u>,
       followed by a colon and a port number.

       An <u>interface</u> may be specified by either of the following:

       •   The interface name as defined by the operating system.

       •   The primary IPv4 address assigned to the interface, in its numeric representation.

           <b>Note</b>

           Interface names are not standardised in any way and should be assumed to be arbitrary and platform
           dependent. On Win32 platforms no short interface names exist, thus only the primary IPv4 address may
           be used to specify an <u>interface</u>. The <u>interface</u> part can be omitted, in that case the default one will
           be selected.

       A <u>multicast</u> <u>address</u> is specified by an IPv4 multicast address in its numeric representation.

</pre><h4><b>WIRE</b> <b>FORMAT</b></h4><pre>
       Consecutive PGM datagrams are interpreted by 0MQ as a single continuous stream of data where 0MQ messages
       are not necessarily aligned with PGM datagram boundaries and a single 0MQ message may span several PGM
       datagrams. This stream of data consists of 0MQ messages encapsulated in <u>frames</u> as described in
       <b><a href="../man7/zmq_tcp.7.html">zmq_tcp</a></b>(7).

   <b>PGM</b> <b>datagram</b> <b>payload</b>
       The following ABNF grammar represents the payload of a single PGM datagram as used by 0MQ:

           datagram               = (offset data)
           offset                 = 2OCTET
           data                   = *OCTET

       In order for late joining consumers to be able to identify message boundaries, each PGM datagram payload
       starts with a 16-bit unsigned integer in network byte order specifying either the offset of the first
       message <u>frame</u> in the datagram or containing the value 0xFFFF if the datagram contains solely an
       intermediate part of a larger message.

       Note that offset specifies where the first message begins rather than the first message part. Thus, if
       there are trailing message parts at the beginning of the packet the offset ignores them and points to
       first initial message part in the packet.

       The following diagram illustrates the layout of a single PGM datagram payload:

           +------------------+----------------------+
           | offset (16 bits) |         data         |
           +------------------+----------------------+

       The following diagram further illustrates how three example 0MQ frames are laid out in consecutive PGM
       datagram payloads:

           First datagram payload
           +--------------+-------------+---------------------+
           | Frame offset |   Frame 1   |   Frame 2, part 1   |
           |    0x0000    | (Message 1) | (Message 2, part 1) |
           +--------------+-------------+---------------------+

           Second datagram payload
           +--------------+---------------------+
           | Frame offset |   Frame 2, part 2   |
           | 0xFFFF       | (Message 2, part 2) |
           +--------------+---------------------+

           Third datagram payload
           +--------------+----------------------------+-------------+
           | Frame offset |   Frame 2, final 8 bytes   |   Frame 3   |
           | 0x0008       | (Message 2, final 8 bytes) | (Message 3) |
           +--------------+----------------------------+-------------+

</pre><h4><b>CONFIGURATION</b></h4><pre>
       The PGM is protocol is capable of multicasting data at high rates (500Mbps+) with large messages (1MB+),
       however it requires setting the relevant ZMQ socket options that are documented in <b><a href="../man3/zmq_setsockopt.3.html">zmq_setsockopt</a></b>(3):

       •   The <u>ZMQ_RATE</u> should be set sufficiently high, e.g. 1Gbps

       •   The <u>ZMQ_RCVBUF</u> should be increased on the subscriber, e.g. 4MB

       •   The <u>ZMQ_SNDBUF</u> should be increased on the publisher, e.g. 4MB

       It’s important to note that the <u>ZMQ_RCVBUF</u> and <u>ZMQ_SNDBUF</u> options are limited by the underlying host OS
       tx/rx buffer size limit. On linux, these can be increased for the current session with the following
       commands:

           # set tx/rx buffers to 4MB (default can also be read as the initial buffer size)
           sudo sysctl -w net.core.rmem_max=4194304
           sudo sysctl -w net.core.wmem_max=4194304
           sudo sysctl -w net.core.rmem_default=4194304
           sudo sysctl -w net.core.wmem_default=4194304

</pre><h4><b>EXAMPLE</b></h4><pre>
       <b>Connecting</b> <b>a</b> <b>socket</b>.

           //  Connecting to the multicast address 239.192.1.1, port 5555,
           //  using the first Ethernet network interface on Linux
           //  and the Encapsulated PGM protocol
           rc = zmq_connect(socket, "epgm://eth0;239.192.1.1:5555");
           assert (rc == 0);
           //  Connecting to the multicast address 239.192.1.1, port 5555,
           //  using the network interface with the address 192.168.1.1
           //  and the standard PGM protocol
           rc = zmq_connect(socket, "pgm://192.168.1.1;239.192.1.1:5555");
           assert (rc == 0);

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man3/zmq_connect.3.html">zmq_connect</a></b>(3) <b><a href="../man3/zmq_setsockopt.3.html">zmq_setsockopt</a></b>(3) <b><a href="../man7/zmq_tcp.7.html">zmq_tcp</a></b>(7) <b><a href="../man7/zmq_ipc.7.html">zmq_ipc</a></b>(7) <b><a href="../man7/zmq_inproc.7.html">zmq_inproc</a></b>(7) <b><a href="../man7/zmq_vmci.7.html">zmq_vmci</a></b>(7) <b><a href="../man7/zmq.7.html">zmq</a></b>(7)

</pre><h4><b>AUTHORS</b></h4><pre>
       This page was written by the 0MQ community. To make a change please read the 0MQ Contribution Policy at
       <b><a href="http://www.zeromq.org/docs">http://www.zeromq.org/docs</a>:contributing</b>.

0MQ 4.3.5                                          03/31/2024                                         <u><a href="../man7/ZMQ_PGM.7.html">ZMQ_PGM</a></u>(7)
</pre>
 </div>
</div></section>
</div>
</body>
</html>