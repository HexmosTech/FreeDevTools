<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>filter - cups file conversion filter interface</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/cups">cups_2.4.12-0ubuntu1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       filter - cups file conversion filter interface

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>filter</b> <u>job</u> <u>user</u> <u>title</u> <u>num-copies</u> <u>options</u> [ <u>filename</u> ]

       <b>#include</b> <b>&lt;cups/cups.h&gt;</b>

       <b>ssize_t</b> <b>cupsBackChannelRead</b>(<b>char</b> <b>*</b><u>buffer</u>, <b>size_t</b> <u>bytes</u>,
                                   <b>double</b> <u>timeout</u>);

       <b>cups_sc_status_t</b> <b>cupsSideChannelDoRequest</b>(<b>cups_sc_command_t</b> <u>command</u>,
                                                 <b>char</b> <b>*</b><u>data</u>, <b>int</b> <b>*</b><u>datalen</u>,
                                                 <b>double</b> <u>timeout</u>);

       <b>#include</b> <b>&lt;cups/ppd.h&gt;</b>

       <b>const</b> <b>char</b> <b>*cupsGetOption</b>(<b>const</b> <b>char</b> <b>*</b><u>name</u>, <b>int</b> <u>num_options</u>,
                        <b>cups_option_t</b> <b>*</b><u>options</u>);

       <b>int</b> <b>cupsMarkOptions</b>(<b>ppd_file_t</b> <b>*</b><u>ppd</u>, <b>int</b> <u>num_options</u>,
                           <b>cups_option_t</b> <b>*</b><u>options</u>);

       <b>int</b> <b>cupsParseOptions</b>(<b>const</b> <b>char</b> <b>*</b><u>arg</u>, <b>int</b> <u>num_options</u>,
                            <b>cups_option_t</b> <b>**</b><u>options</u>);

       <b>ppd_choice_t</b> <b>*ppdFindMarkedChoice</b>(<b>ppd_file_t</b> <b>*</b><u>ppd</u>, <b>const</b> <b>char</b> <b>*</b><u>keyword</u>);

       <b>void</b> <b>ppdMarkDefaults</b>(<b>ppd_file_t</b> <b>*</b><u>ppd</u>);

       <b>ppd_file_t</b> <b>*ppdOpenFile</b>(<b>const</b> <b>char</b> <b>*</b><u>filename</u>);

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The  CUPS  filter  interface  provides  a  standard  method  for adding support for new document types or
       printers to CUPS.  Each filter is capable of converting from one or more input formats to another  format
       that can either be printed directly or piped into another filter to get it to a printable format.

       Filters  <b>MUST</b>  be  capable  of  reading  from  a filename on the command-line or from the standard input,
       copying the standard input to a temporary file as required by the file format.  All output <b>MUST</b>  be  sent
       to  the  standard  output.   Filters  <b>MUST</b>  <b>NOT</b>  attempt  to communicate directly with the printer, other
       processes, or other services.

       The command name (<u>argv[0]</u>) is set to the name of the destination printer but is  also  available  in  the
       <b>PRINTER</b> <u>environment</u> <u>variable.</u>

</pre><h4><b>OPTIONS</b></h4><pre>
       Options are passed in <u>argv[5]</u> and are encoded from the corresponding IPP attributes used when the job was
       submitted.  Use  the  <b>cupsParseOptions</b>()  function to load the options into a <b>cups_option_t</b> array and the
       <b>cupsGetOption</b>() function to get the value of a specific attribute.  Be careful to look for common aliases
       of IPP attributes such as "landscape" for the IPP "orientation-requested" attribute.

       Options passed on the command-line typically do not include the default choices the printer's  PPD  file.
       Use the <b>ppdMarkDefaults</b>() and <b>cupsMarkOptions</b>() functions in the CUPS library to apply the options to the
       PPD  defaults  and map any IPP attributes to the corresponding PPD options.  Use <b>ppdFindMarkedChoice</b>() to
       get the user-selected choice for a PPD option. For example, a filter might  use  the  following  code  to
       determine the current value of the <b>Duplex</b> PPD option:

           ppd_file_t *ppd = ppdOpenFile(getenv("PPD"));
           cups_option_t *options = NULL;
           int num_options = cupsParseOptions(argv[5], 0, &amp;options);

           ppdMarkDefaults(ppd);
           cupsMarkOptions(ppd, num_options, options);

           ppd_choice_t *choice = ppdFindMarkedChoice(ppd, "Duplex");

       Raster filters should use option choices set through the raster page header, as those reflect the options
       in  effect  for a given page.  Options specified on the command-line determine the default values for the
       entire job, which can be overridden on a per-page basis.

</pre><h4><b>LOG</b> <b>MESSAGES</b></h4><pre>
       Messages sent to the standard  error  are  generally  stored  in  the  printer's  "printer-state-message"
       attribute and the current <b>ErrorLog</b> file.  Each line begins with a standard prefix:

       <b>ALERT:</b> <u>message</u>
            Sets  the  "printer-state-message"  attribute and adds the specified message to the current <b>ErrorLog</b>
            using the "alert" log level.

       <b>ATTR:</b> <u>attribute=value</u> [ <u>...</u> <u>attribute=value</u>]
            Sets the named job or printer attribute(s). The following job attributes  can  be  set:  "job-media-
            progress".  The  following  printer  attributes  can  be set: "auth-info-required", "marker-colors",
            "marker-high-levels",  "marker-levels",   "marker-low-levels",   "marker-message",   "marker-names",
            "marker-types", "printer-alert", and "printer-alert-description".

       <b>CRIT:</b> <u>message</u>
            Sets  the  "printer-state-message"  attribute and adds the specified message to the current <b>ErrorLog</b>
            using the "critical" log level.

       <b>DEBUG:</b> <u>message</u>
            Adds the specified message to the current <b>ErrorLog</b> using the "debug" log level.  <b>DEBUG</b> messages  are
            never stored in the "printer-state-message" attribute.

       <b>DEBUG2:</b> <u>message</u>
            Adds  the  specified  message to the current <b>ErrorLog</b> using the "debug2" log level.  <b>DEBUG2</b> messages
            are never stored in the "printer-state-message" attribute.

       <b>EMERG:</b> <u>message</u>
            Sets the "printer-state-message" attribute and adds the specified message to  the  current  <b>ErrorLog</b>
            using the "emergency" log level.

       <b>ERROR:</b> <u>message</u>
            Sets  the  "printer-state-message"  attribute and adds the specified message to the current <b>ErrorLog</b>
            using the "error" log level.

       <b>INFO:</b> <u>message</u>
            Sets the "printer-state-message" attribute. If the current <b>LogLevel</b> is set to  "debug2",  also  adds
            the specified message to the current <b>ErrorLog</b> using the "info" log level.

       <b>NOTICE:</b> <u>message</u>
            Sets  the  "printer-state-message"  attribute and adds the specified message to the current <b>ErrorLog</b>
            using the "notice" log level.

       <b>PAGE:</b> <u>page-number</u> <u>#-copies</u>

       <b>PAGE:</b> <u>total</u> <u>#-pages</u>
            Adds an entry to the current <b>PageLog</b>.  The  first  form  adds  <u>#-copies</u>  to  the  "job-media-sheets-
            completed" attribute. The second form sets the "job-media-sheets-completed" attribute to <u>#-pages</u>.

       <b>PPD:</b> <u>Keyword=Value</u> [ <u>...</u> <u>KeywordN=Value</u> ]
            Sets  the  named keywords in the printer's PPD file. This is typically used to update default option
            keywords such as <b>DefaultPageSize</b> and the various installable options in the PPD file.

       <b>STATE:</b> <u>printer-state-reason</u> [ <u>...</u> <u>printer-state-reason</u> ]

       <b>STATE:</b> <b>+</b> <u>printer-state-reason</u> [ <u>...</u> <u>printer-state-reason</u> ]

       <b>STATE:</b> <b>-</b> <u>printer-state-reason</u> [ <u>...</u> <u>printer-state-reason</u> ]
            Sets, adds, or removes "printer-state-reason" keywords for the current queue. Typically this is used
            to indicate media, ink, and toner conditions on a printer.

       <b>WARNING:</b> <u>message</u>
            Sets the "printer-state-message" attribute and adds the specified message to  the  current  <b>ErrorLog</b>
            using the "warning" log level.

</pre><h4><b>ENVIRONMENT</b> <b>VARIABLES</b></h4><pre>
       The following environment variables are defined by the CUPS server when executing the filter:

       <b>CHARSET</b>
            The default text character set, typically "utf-8".

       <b>CLASS</b>
            When  a  job  is  submitted  to a printer class, contains the name of the destination printer class.
            Otherwise this environment variable will not be set.

       <b>CONTENT_TYPE</b>
            The MIME media type associated with the submitted job file, for example "application/postscript".

       <b>CUPS_CACHEDIR</b>
            The directory where semi-persistent cache files can be found and stored.

       <b>CUPS_DATADIR</b>
            The directory where data files can be found.

       <b>CUPS_FILETYPE</b>
            The type of file being printed: "job-sheet" for a banner page and "document"  for  a  regular  print
            file.

       <b>CUPS_MAX_MESSAGE</b>
            The maximum size of a message sent to <u>stderr</u>, including any leading prefix and the trailing newline.

       <b>CUPS_SERVERROOT</b>
            The root directory of the server.

       <b>FINAL_CONTENT_TYPE</b>
            The   MIME   media   type  associated  with  the  output  destined  for  the  printer,  for  example
            "application/vnd.cups-postscript".

       <b>LANG</b> The default language locale (typically C or en).

       <b>PATH</b> The standard execution path for external programs that may be run by the filter.

       <b>PPD</b>  The full pathname of the PostScript Printer Description (PPD) file for this printer.

       <b>PRINTER</b>
            The name of the printer.

       <b>RIP_CACHE</b>
            The recommended amount of memory to use for Raster Image Processors (RIPs).

       <b>SOFTWARE</b>
            The name and version number of the server (typically CUPS/<u>major.minor</u>).

       <b>TZ</b>   The timezone of the server.

       <b>USER</b> The user executing the filter, typically "lp" or "root"; consult the <u>cups-files.conf</u>  file  for  the
            current setting.

</pre><h4><b>CONFORMING</b> <b>TO</b></h4><pre>
       While  the filter interface is compatible with System V interface scripts, CUPS does not support System V
       interface scripts.

</pre><h4><b>NOTES</b></h4><pre>
       CUPS printer drivers and backends are deprecated and will no longer be  supported  in  a  future  feature
       release  of  CUPS.   Printers  that  do  not  support  IPP  can  be  supported using applications such as
       <b><a href="../man1/ippeveprinter.1.html">ippeveprinter</a></b>(1).

       CUPS filters are not meant to be run directly by the user.  Aside from  the  legacy  System  V  interface
       issues  (<u>argv[0]</u>  is  the printer name), CUPS filters also expect specific environment variables and file
       descriptors, and typically run in a user session that (on macOS) has additional restrictions that  affect
       how it runs.  Unless you are a developer and know what you are doing, please do not run filters directly.
       Instead, use the <b><a href="../man8/cupsfilter.8.html">cupsfilter</a></b>(8) program to use the appropriate filters to do the conversions you need.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man7/backend.7.html">backend</a></b>(7), <b><a href="../man1/cups.1.html">cups</a></b>(1), <b><a href="../man5/cups-files.conf.5.html">cups-files.conf</a></b>(5), <b><a href="../man8/cupsd.8.html">cupsd</a></b>(8), <b><a href="../man8/cupsfilter.8.html">cupsfilter</a></b>(8),
       CUPS Online Help (<a href="http://localhost">http://localhost</a>:631/help)

</pre><h4><b>COPYRIGHT</b></h4><pre>
       Copyright © 2020-2024 by OpenPrinting.

2021-02-28                                            CUPS                                             <u><a href="../man7/filter.7.html">filter</a></u>(7)
</pre>
 </div>
</div></section>
</div>
</body>
</html>