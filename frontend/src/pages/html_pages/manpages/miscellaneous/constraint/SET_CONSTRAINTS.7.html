<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SET_CONSTRAINTS - set constraint check timing for the current transaction</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/postgresql-client-17">postgresql-client-17_17.5-1build1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       SET_CONSTRAINTS - set constraint check timing for the current transaction

</pre><h4><b>SYNOPSIS</b></h4><pre>
       SET CONSTRAINTS { ALL | <u>name</u> [, ...] } { DEFERRED | IMMEDIATE }

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>SET</b> <b>CONSTRAINTS</b> sets the behavior of constraint checking within the current transaction.  IMMEDIATE
       constraints are checked at the end of each statement.  DEFERRED constraints are not checked until
       transaction commit. Each constraint has its own IMMEDIATE or DEFERRED mode.

       Upon creation, a constraint is given one of three characteristics: DEFERRABLE INITIALLY DEFERRED,
       DEFERRABLE INITIALLY IMMEDIATE, or NOT DEFERRABLE. The third class is always IMMEDIATE and is not
       affected by the <b>SET</b> <b>CONSTRAINTS</b> command. The first two classes start every transaction in the indicated
       mode, but their behavior can be changed within a transaction by <b>SET</b> <b>CONSTRAINTS</b>.

       <b>SET</b> <b>CONSTRAINTS</b> with a list of constraint names changes the mode of just those constraints (which must
       all be deferrable). Each constraint name can be schema-qualified. The current schema search path is used
       to find the first matching name if no schema name is specified.  <b>SET</b> <b>CONSTRAINTS</b> <b>ALL</b> changes the mode of
       all deferrable constraints.

       When <b>SET</b> <b>CONSTRAINTS</b> changes the mode of a constraint from DEFERRED to IMMEDIATE, the new mode takes
       effect retroactively: any outstanding data modifications that would have been checked at the end of the
       transaction are instead checked during the execution of the <b>SET</b> <b>CONSTRAINTS</b> command. If any such
       constraint is violated, the <b>SET</b> <b>CONSTRAINTS</b> fails (and does not change the constraint mode). Thus, <b>SET</b>
       <b>CONSTRAINTS</b> can be used to force checking of constraints to occur at a specific point in a transaction.

       Currently, only UNIQUE, PRIMARY KEY, REFERENCES (foreign key), and EXCLUDE constraints are affected by
       this setting.  NOT NULL and CHECK constraints are always checked immediately when a row is inserted or
       modified (<u>not</u> at the end of the statement). Uniqueness and exclusion constraints that have not been
       declared DEFERRABLE are also checked immediately.

       The firing of triggers that are declared as “constraint triggers” is also controlled by this setting —
       they fire at the same time that the associated constraint should be checked.

</pre><h4><b>NOTES</b></h4><pre>
       Because PostgreSQL does not require constraint names to be unique within a schema (but only per-table),
       it is possible that there is more than one match for a specified constraint name. In this case <b>SET</b>
       <b>CONSTRAINTS</b> will act on all matches. For a non-schema-qualified name, once a match or matches have been
       found in some schema in the search path, schemas appearing later in the path are not searched.

       This command only alters the behavior of constraints within the current transaction. Issuing this outside
       of a transaction block emits a warning and otherwise has no effect.

</pre><h4><b>COMPATIBILITY</b></h4><pre>
       This command complies with the behavior defined in the SQL standard, except for the limitation that, in
       PostgreSQL, it does not apply to NOT NULL and CHECK constraints. Also, PostgreSQL checks non-deferrable
       uniqueness constraints immediately, not at end of statement as the standard would suggest.

PostgreSQL 17.5                                       2025                                    <u>SET</u> <u><a href="../man7/CONSTRAINTS.7.html">CONSTRAINTS</a></u>(7)
</pre>
 </div>
</div></section>
</div>
</body>
</html>