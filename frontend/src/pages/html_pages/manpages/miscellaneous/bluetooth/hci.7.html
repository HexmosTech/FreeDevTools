<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>hci - Bluetooth HCI protocol</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libbluetooth-dev">libbluetooth-dev_5.83-1~exp1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       hci - Bluetooth HCI protocol

</pre><h4><b>SYNOPSIS</b></h4><pre>
          #include &lt;sys/socket.h&gt;
          #include &lt;bluetooth/bluetooth.h&gt;
          #include &lt;bluetooth/hci.h&gt;

          hci_socket = socket(PF_BLUETOOTH, SOCK_RAW, BTPROTO_HCI);

</pre><h4><b>DESCRIPTION</b></h4><pre>
       Bluetooth  Host  Controller  Interface  (HCI)  is  the  standard  protocol  to communicate with Bluetooth
       adapters. HCI protocol provides a uniform command method for the Host to access  Controller  capabilities
       and to control connections to other Controllers.

</pre><h4><b>SOCKET</b> <b>ADDRESS</b></h4><pre>
          struct sockaddr_hci {
              sa_family_t    hci_family;
              unsigned short hci_dev;
              unsigned short hci_channel;
          };

       Possible values for hci_channel:
                            ┌─────────────────────┬───────┬──────────────────────────────┐
                            │ Define              │ Value │ Description                  │
                            ├─────────────────────┼───────┼──────────────────────────────┤
                            │ <b>HCI_CHANNEL_RAW</b>     │ 0x00  │ Raw  channel  - Used for raw │
                            │                     │       │ HCI communication            │
                            ├─────────────────────┼───────┼──────────────────────────────┤
                            │ <b>HCI_CHANNEL_USER</b>    │ 0x01  │ User  channel  -  Used   for │
                            │                     │       │ userspace  HCI communication │
                            │                     │       │ (disables kernel processing) │
                            ├─────────────────────┼───────┼──────────────────────────────┤
                            │ <b>HCI_CHANNEL_MONITOR</b> │ 0x02  │ Monitor channel -  Used  for │
                            │                     │       │ monitoring    HCI    traffic │
                            │                     │       │ (<a href="../man1/btmon.1.html">btmon</a>(1))                   │
                            ├─────────────────────┼───────┼──────────────────────────────┤
                            │ <b>HCI_CHANNEL_CONTROL</b> │ 0x03  │ Control channel  -  Used  to │
                            │                     │       │ manage     local    adapters │
                            │                     │       │ (<a href="../man7/bluetoothd.7.html">bluetoothd</a>(7))              │
                            ├─────────────────────┼───────┼──────────────────────────────┤
                            │ <b>HCI_CHANNEL_LOGGING</b> │ 0x04  │ Logging channel  -  Used  to │
                            │                     │       │ inject    logging   messages │
                            │                     │       │ (<a href="../man7/bluetoothd.7.html">bluetoothd</a>(7))              │
                            └─────────────────────┴───────┴──────────────────────────────┘

       Example:

          struct sockaddr_hci addr;

          memset(&amp;addr, 0, sizeof(addr));
          addr.hci_family = AF_BLUETOOTH;
          addr.hci_dev = HCI_DEV_NONE;
          addr.hci_channel = HCI_CHANNEL_CONTROL;

</pre><h4><b>SOCKET</b> <b>OPTIONS</b></h4><pre>
       The socket options listed below can be set by using <b><a href="../man2/setsockopt.2.html">setsockopt</a>(2)</b> and read with  <b><a href="../man2/getsockopt.2.html">getsockopt</a>(2)</b>  with  the
       socket level set to SOL_BLUETOOTH or SOL_HCI (HCI_FILTER).

   <b>HCI_FILTER</b> <b>(since</b> <b>Linux</b> <b>2.6)</b>
       Filter by HCI events, requires hci_channel to be set to HCI_CHANNEL_RAW, possible values:

          struct hci_filter {
              uint32_t type_mask;
              uint32_t event_mask[2];
              uint16_t opcode;
          };

       Example:

          struct hci_filter flt;

          memset(&amp;flt, 0, sizeof(flt));
          flt.type_mask = 1 &lt;&lt; BT_H4_EVT_PKT;
          flt.event_mask[0] = 0xffffffff;
          flt.event_mask[1] = 0xffffffff;

          setsockopt(fd, SOL_HCI, HCI_FILTER, &amp;flt, sizeof(flt));

   <b>BT_SNDBUF</b> <b>(since</b> <b>Linux</b> <b>5.16)</b>
       Set  send  buffer  size,  requires  hci_channel  to be set to HCI_CHANNEL_MONITOR, HCI_CHANNEL_CONTROL or
       HCI_CHANNEL_LOGGING.

       Default value is 1028.

       Example:

          uint16_t mtu = UINT16_MAX;
          int err;

          err = setsockopt(fd, SOL_BLUETOOTH, BT_SNDMTU, &amp;mtu, <a href="../manmtu/sizeof.mtu.html">sizeof</a>(mtu));

   <b>BT_RCVBUF</b> <b>(since</b> <b>Linux</b> <b>5.16)</b>
       Set receive buffer size, requires hci_channel to be set to  HCI_CHANNEL_MONITOR,  HCI_CHANNEL_CONTROL  or
       HCI_CHANNEL_LOGGING.

       Default value is 1028.

       Example:

          uint16_t mtu;
          socklen_t len;
          int err;

          len = <a href="../manmtu/sizeof.mtu.html">sizeof</a>(mtu);
          err = getsockopt(sock, SOL_BLUETOOTH, BT_RCVMTU, mtu, &amp;len);

</pre><h4><b>RESOURCES</b></h4><pre>
        &lt;<a href="http://www.bluez.org">http://www.bluez.org</a>&gt;

</pre><h4><b>REPORTING</b> <b>BUGS</b></h4><pre>
        &lt;<a href="mailto:linux-bluetooth@vger.kernel.org">linux-bluetooth@vger.kernel.org</a>&gt;

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <a href="../man7/socket.7.html">socket</a>(7)

</pre><h4><b>COPYRIGHT</b></h4><pre>
       Free use of this software is granted under the terms of the GNU Lesser General Public Licenses (LGPL).

BlueZ                                             October 2024                                            <u><a href="../man7/HCI.7.html">HCI</a></u>(7)
</pre>
 </div>
</div></section>
</div>
</body>
</html>