<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SET_ROLE - set the current user identifier of the current session</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/postgresql-client-17">postgresql-client-17_17.5-1build1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       SET_ROLE - set the current user identifier of the current session

</pre><h4><b>SYNOPSIS</b></h4><pre>
       SET [ SESSION | LOCAL ] ROLE <u>role_name</u>
       SET [ SESSION | LOCAL ] ROLE NONE
       RESET ROLE

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This command sets the current user identifier of the current SQL session to be <u>role_name</u>. The role name
       can be written as either an identifier or a string literal. After <b>SET</b> <b>ROLE</b>, permissions checking for SQL
       commands is carried out as though the named role were the one that had logged in originally. Note that
       <b>SET</b> <b>ROLE</b> and <b>SET</b> <b>SESSION</b> <b>AUTHORIZATION</b> are exceptions; permissions checks for those continue to use the
       current session user and the initial session user (the authenticated user), respectively.

       The current session user must have the SET option for the specified <u>role_name</u>, either directly or
       indirectly via a chain of memberships with the SET option. (If the session user is a superuser, any role
       can be selected.)

       The SESSION and LOCAL modifiers act the same as for the regular <b>SET</b> command.

       SET ROLE NONE sets the current user identifier to the current session user identifier, as returned by
       <b>session_user</b>.  RESET ROLE sets the current user identifier to the connection-time setting specified by
       the command-line options, <b>ALTER</b> <b>ROLE</b>, or <b>ALTER</b> <b>DATABASE</b>, if any such settings exist. Otherwise, RESET
       ROLE sets the current user identifier to the current session user identifier. These forms can be executed
       by any user.

</pre><h4><b>NOTES</b></h4><pre>
       Using this command, it is possible to either add privileges or restrict one's privileges. If the session
       user role has been granted memberships WITH INHERIT TRUE, it automatically has all the privileges of
       every such role. In this case, <b>SET</b> <b>ROLE</b> effectively drops all the privileges except for those which the
       target role directly possesses or inherits. On the other hand, if the session user role has been granted
       memberships WITH INHERIT FALSE, the privileges of the granted roles can't be accessed by default.
       However, if the role was granted WITH SET TRUE, the session user can use <b>SET</b> <b>ROLE</b> to drop the privileges
       assigned directly to the session user and instead acquire the privileges available to the named role. If
       the role was granted WITH INHERIT FALSE, SET FALSE then the privileges of that role cannot be exercised
       either with or without SET ROLE.

       <b>SET</b> <b>ROLE</b> has effects comparable to <b>SET</b> <b>SESSION</b> <b>AUTHORIZATION</b>, but the privilege checks involved are quite
       different. Also, <b>SET</b> <b>SESSION</b> <b>AUTHORIZATION</b> determines which roles are allowable for later <b>SET</b> <b>ROLE</b>
       commands, whereas changing roles with <b>SET</b> <b>ROLE</b> does not change the set of roles allowed to a later <b>SET</b>
       <b>ROLE</b>.

       <b>SET</b> <b>ROLE</b> does not process session variables as specified by the role's <b>ALTER</b> <b>ROLE</b> settings; this only
       happens during login.

       <b>SET</b> <b>ROLE</b> cannot be used within a SECURITY DEFINER function.

</pre><h4><b>EXAMPLES</b></h4><pre>
           SELECT SESSION_USER, CURRENT_USER;

            session_user | current_user
           --------------+--------------
            peter        | peter

           SET ROLE 'paul';

           SELECT SESSION_USER, CURRENT_USER;

            session_user | current_user
           --------------+--------------
            peter        | paul

</pre><h4><b>COMPATIBILITY</b></h4><pre>
       PostgreSQL allows identifier syntax ("<u>rolename</u>"), while the SQL standard requires the role name to be
       written as a string literal. SQL does not allow this command during a transaction; PostgreSQL does not
       make this restriction because there is no reason to. The SESSION and LOCAL modifiers are a PostgreSQL
       extension, as is the RESET syntax.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       SET SESSION AUTHORIZATION (<b><a href="../man7/SET_SESSION_AUTHORIZATION.7.html">SET_SESSION_AUTHORIZATION</a></b>(7))

PostgreSQL 17.5                                       2025                                           <u>SET</u> <u><a href="../man7/ROLE.7.html">ROLE</a></u>(7)
</pre>
 </div>
</div></section>
</div>
</body>
</html>