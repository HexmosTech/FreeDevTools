<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ALTER_DOMAIN - change the definition of a domain</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/postgresql-client-17">postgresql-client-17_17.5-1build1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       ALTER_DOMAIN - change the definition of a domain

</pre><h4><b>SYNOPSIS</b></h4><pre>
       ALTER DOMAIN <u>name</u>
           { SET DEFAULT <u>expression</u> | DROP DEFAULT }
       ALTER DOMAIN <u>name</u>
           { SET | DROP } NOT NULL
       ALTER DOMAIN <u>name</u>
           ADD <u>domain_constraint</u> [ NOT VALID ]
       ALTER DOMAIN <u>name</u>
           DROP CONSTRAINT [ IF EXISTS ] <u>constraint_name</u> [ RESTRICT | CASCADE ]
       ALTER DOMAIN <u>name</u>
            RENAME CONSTRAINT <u>constraint_name</u> TO <u>new_constraint_name</u>
       ALTER DOMAIN <u>name</u>
           VALIDATE CONSTRAINT <u>constraint_name</u>
       ALTER DOMAIN <u>name</u>
           OWNER TO { <u>new_owner</u> | CURRENT_ROLE | CURRENT_USER | SESSION_USER }
       ALTER DOMAIN <u>name</u>
           RENAME TO <u>new_name</u>
       ALTER DOMAIN <u>name</u>
           SET SCHEMA <u>new_schema</u>

       where <u>domain_constraint</u> is:

       [ CONSTRAINT <u>constraint_name</u> ]
       { NOT NULL | CHECK (<u>expression</u>) }

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>ALTER</b> <b>DOMAIN</b> changes the definition of an existing domain. There are several sub-forms:

       SET/DROP DEFAULT
           These forms set or remove the default value for a domain. Note that defaults only apply to subsequent
           <b>INSERT</b> commands; they do not affect rows already in a table using the domain.

       SET/DROP NOT NULL
           These forms change whether a domain is marked to allow NULL values or to reject NULL values. You can
           only SET NOT NULL when the columns using the domain contain no null values.

       ADD <u>domain_constraint</u> [ NOT VALID ]
           This form adds a new constraint to a domain. When a new constraint is added to a domain, all columns
           using that domain will be checked against the newly added constraint. These checks can be suppressed
           by adding the new constraint using the NOT VALID option; the constraint can later be made valid using
           <b>ALTER</b> <b>DOMAIN</b> <b>...</b> <b>VALIDATE</b> <b>CONSTRAINT</b>. Newly inserted or updated rows are always checked against all
           constraints, even those marked NOT VALID.  NOT VALID is only accepted for CHECK constraints.

       DROP CONSTRAINT [ IF EXISTS ]
           This form drops constraints on a domain. If IF EXISTS is specified and the constraint does not exist,
           no error is thrown. In this case a notice is issued instead.

       RENAME CONSTRAINT
           This form changes the name of a constraint on a domain.

       VALIDATE CONSTRAINT
           This form validates a constraint previously added as NOT VALID, that is, it verifies that all values
           in table columns of the domain type satisfy the specified constraint.

       OWNER
           This form changes the owner of the domain to the specified user.

       RENAME
           This form changes the name of the domain.

       SET SCHEMA
           This form changes the schema of the domain. Any constraints associated with the domain are moved into
           the new schema as well.

       You must own the domain to use <b>ALTER</b> <b>DOMAIN</b>. To change the schema of a domain, you must also have CREATE
       privilege on the new schema. To alter the owner, you must be able to SET ROLE to the new owning role, and
       that role must have CREATE privilege on the domain's schema. (These restrictions enforce that altering
       the owner doesn't do anything you couldn't do by dropping and recreating the domain. However, a superuser
       can alter ownership of any domain anyway.)

</pre><h4><b>PARAMETERS</b></h4><pre>
       <u>name</u>
           The name (possibly schema-qualified) of an existing domain to alter.

       <u>domain_constraint</u>
           New domain constraint for the domain.

       <u>constraint_name</u>
           Name of an existing constraint to drop or rename.

       NOT VALID
           Do not verify existing stored data for constraint validity.

       CASCADE
           Automatically drop objects that depend on the constraint, and in turn all objects that depend on
           those objects (see Section 5.15).

       RESTRICT
           Refuse to drop the constraint if there are any dependent objects. This is the default behavior.

       <u>new_name</u>
           The new name for the domain.

       <u>new_constraint_name</u>
           The new name for the constraint.

       <u>new_owner</u>
           The user name of the new owner of the domain.

       <u>new_schema</u>
           The new schema for the domain.

</pre><h4><b>NOTES</b></h4><pre>
       Although <b>ALTER</b> <b>DOMAIN</b> <b>ADD</b> <b>CONSTRAINT</b> attempts to verify that existing stored data satisfies the new
       constraint, this check is not bulletproof, because the command cannot “see” table rows that are newly
       inserted or updated and not yet committed. If there is a hazard that concurrent operations might insert
       bad data, the way to proceed is to add the constraint using the NOT VALID option, commit that command,
       wait until all transactions started before that commit have finished, and then issue <b>ALTER</b> <b>DOMAIN</b>
       <b>VALIDATE</b> <b>CONSTRAINT</b> to search for data violating the constraint. This method is reliable because once the
       constraint is committed, all new transactions are guaranteed to enforce it against new values of the
       domain type.

       Currently, <b>ALTER</b> <b>DOMAIN</b> <b>ADD</b> <b>CONSTRAINT</b>, <b>ALTER</b> <b>DOMAIN</b> <b>VALIDATE</b> <b>CONSTRAINT</b>, and <b>ALTER</b> <b>DOMAIN</b> <b>SET</b> <b>NOT</b> <b>NULL</b>
       will fail if the named domain or any derived domain is used within a container-type column (a composite,
       array, or range column) in any table in the database. They should eventually be improved to be able to
       verify the new constraint for such nested values.

</pre><h4><b>EXAMPLES</b></h4><pre>
       To add a NOT NULL constraint to a domain:

           ALTER DOMAIN zipcode SET NOT NULL;

       To remove a NOT NULL constraint from a domain:

           ALTER DOMAIN zipcode DROP NOT NULL;

       To add a check constraint to a domain:

           ALTER DOMAIN zipcode ADD CONSTRAINT zipchk CHECK (char_length(VALUE) = 5);

       To remove a check constraint from a domain:

           ALTER DOMAIN zipcode DROP CONSTRAINT zipchk;

       To rename a check constraint on a domain:

           ALTER DOMAIN zipcode RENAME CONSTRAINT zipchk TO zip_check;

       To move the domain into a different schema:

           ALTER DOMAIN zipcode SET SCHEMA customers;

</pre><h4><b>COMPATIBILITY</b></h4><pre>
       <b>ALTER</b> <b>DOMAIN</b> conforms to the SQL standard, except for the OWNER, RENAME, SET SCHEMA, and VALIDATE
       CONSTRAINT variants, which are PostgreSQL extensions. The NOT VALID clause of the ADD CONSTRAINT variant
       is also a PostgreSQL extension.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       CREATE DOMAIN (<b><a href="../man7/CREATE_DOMAIN.7.html">CREATE_DOMAIN</a></b>(7)), DROP DOMAIN (<b><a href="../man7/DROP_DOMAIN.7.html">DROP_DOMAIN</a></b>(7))

PostgreSQL 17.5                                       2025                                       <u>ALTER</u> <u><a href="../man7/DOMAIN.7.html">DOMAIN</a></u>(7)
</pre>
 </div>
</div></section>
</div>
</body>
</html>