<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>tuned-profiles-cpu-partitioning - Partition CPUs into isolated and housekeeping.</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/tuned">tuned_2.25.1-1ubuntu1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       tuned-profiles-cpu-partitioning - Partition CPUs into isolated and housekeeping.

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The  cpu-partitioning*  profiles  partition  the  system  CPUs into isolated and housekeeping CPUs. These
       profiles are intended for latency-sensitive workloads.

       An isolated CPU incurs reduced jitter and reduced interruptions  by  the  kernel.  This  is  achieved  by
       clearing the CPU from user-space processes, movable kernel threads, interruption handlers, kernel timers,
       etc.  The  only  fixed source of interruptions is the 1Hz tick maintained by the kernel to keep CPU usage
       statistics. Otherwise, the incurred jitter and interruptions, if any, depend on the kernel services  used
       by  the thread running on the isolated CPU. Threads that run a busy loop without doing system calls, such
       as user-space drivers that access the hardware directly, are only  expected  to  be  interrupted  once  a
       second by the 1Hz tick.

       A  housekeeping  CPU  is  the  opposite  of  an  isolated  CPU.  Housekeeping CPUs run all daemons, shell
       processes, kernel threads, interruption handlers and work that can be dispatched from isolated CPUs  such
       as disk I/O, RCU work, timers, etc.

</pre><h4><b>PROFILES</b></h4><pre>
       The following profiles are provided:

       <b>cpu-partitioning</b>
              Profile partitioning the system CPUs into isolated and housekeeping CPUs.

       <b>cpu-partitioning-powersave</b>
              Profile  similar  to  the  cpu-partitioning  profile,  but  with  more flexibility on the C-states
              configuration.

</pre><h4><b>CONFIGURATION</b></h4><pre>
       The cpu-partitioning profile is  configured  by  editing  the  <u>/etc/tuned/cpu-partitioning-variables.conf</u>
       file. There are two configuration options:

       <b>isolated_cores=&lt;CPU-LIST&gt;</b>
              List  of  CPUs  to  isolate.  This option is mandatory. Any CPUs not in this list is automatically
              considered a housekeeping CPU.

       <b>no_balance_cores=&lt;CPU-LIST&gt;</b>
              List of CPUs not be considered by the  kernel  when  doing  system  wide  process  load-balancing.
              Usually, this list should be the same as isolated_cores=. This option is optional.

       The       cpu-partitioning-powersave       profile       is      configured      by      editing      the
       <u>/etc/tuned/cpu-partitioning-powersave-variables.conf</u>  file.  It  supports  the  same   options   as   the
       cpu-partitioning profile and one additional option:

       <b>max_power_state=&lt;MAX_CSTATE&gt;</b>
              Maximum  c-state  the  cores  are allowed to enter. Can be expressed as it's name (C1E) or minimum
              wake-up latency, in micro-seconds.  This parameter is provided as-is to `force_latency`.   Default
              is set to "cstate.name:C1|10" to behave as cpu-partitioning profile.

</pre><h4><b>IMPORTANT</b> <b>NOTES</b></h4><pre>
       * The  system  should  be  rebooted  after  applying the cpu-partitioning* profiles for the first time or
         changing its configuration

       * The cpu-partitioning* profiles can be used in bare-metal and virtual machines

       * When using the cpu-partitioning* profiles in bare-metal, it is strongly recommended to "mask"  the  ksm
         and ksmtuned services in systemd (if they are installed). This can be done with the following command:

             # systemctl mask ksm ksmtuned

       * The cpu-partitioning* profiles do not use the kernel's isolcpus= feature

       * On a NUMA system, it is recommended to have at least one housekeeping CPU per NUMA node

       * The  cpu-partitioning*  profiles  do not support isolating the L3 cache. This means that a housekeeping
         CPU can still thrash cache entries pertaining  to  isolated  CPUs.  It  is  recommended  to  use  cache
         isolation technologies to remedy this problem, such as Intel's Cache Allocation Technology

       * Whether  or  not the kernel is going to be able to deactivate the tick on isolated CPUs depend on a few
         factors concerning the running thread behavior.  Please, consult the  nohz_full  documentation  in  the
         kernel to learn more

       * The  Linux  real-time  project  has put together a document on the best practices for writing real-time
         applications. Even though the cpu-partitioning* profiles do not guarantee real-time response time, much
         of the techniques for writing real-time applications also apply for applications intended to run  under
         the cpu-partitioning* profiles. Please, refer to this document at <u>https://rt.wiki.kernel.org</u>

</pre><h4><b>FILES</b></h4><pre>
       <u>/etc/tuned/cpu-partitioning-variables.conf</u>
       <u>/etc/tuned/cpu-partitioning-powersave-variables.conf</u>
       <u>/etc/tuned/tuned-main.conf</u>

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man8/tuned.8.html">tuned</a></b>(8)      <b><a href="../man8/tuned-adm.8.html">tuned-adm</a></b>(8)      <b><a href="../man7/tuned-profiles.7.html">tuned-profiles</a></b>(7)      <b><a href="../man7/tuned-profiles-atomic.7.html">tuned-profiles-atomic</a></b>(7)     <b><a href="../man7/tuned-profiles-sap.7.html">tuned-profiles-sap</a></b>(7)
       <b><a href="../man7/tuned-profiles-sap-hana.7.html">tuned-profiles-sap-hana</a></b>(7)  <b><a href="../man7/tuned-profiles-mssql.7.html">tuned-profiles-mssql</a></b>(7)  <b><a href="../man7/tuned-profiles-oracle.7.html">tuned-profiles-oracle</a></b>(7)  <b><a href="../man7/tuned-profiles-realtime.7.html">tuned-profiles-realtime</a></b>(7)
       <b><a href="../man7/tuned-profiles-nfv-host.7.html">tuned-profiles-nfv-host</a></b>(7)              <b><a href="../man7/tuned-profiles-nfv-guest.7.html">tuned-profiles-nfv-guest</a></b>(7)              <b><a href="../man7/tuned-profiles-compat.7.html">tuned-profiles-compat</a></b>(7)
       <b><a href="../man7/tuned-profiles-postgresql.7.html">tuned-profiles-postgresql</a></b>(7) <b><a href="../man7/tuned-profiles-openshift.7.html">tuned-profiles-openshift</a></b>(7) <b><a href="../man7/tuned-profiles-spectrumscale-ece.7.html">tuned-profiles-spectrumscale-ece</a></b>(7)

</pre><h4><b>AUTHOR</b></h4><pre>
       Jaroslav Å karvada &lt;<a href="mailto:jskarvad@redhat.com">jskarvad@redhat.com</a>&gt;
       Luiz Capitulino &lt;<a href="mailto:lcapitulino@redhat.com">lcapitulino@redhat.com</a>&gt;
       Andrew Theurer &lt;<a href="mailto:atheurer@redhat.com">atheurer@redhat.com</a>&gt;

TuneD                                              22 Feb 2018                <u><a href="../man7/TUNED_PROFILES_CPU_PARTITIONING.7.html">TUNED_PROFILES_CPU_PARTITIONING</a></u>(7)
</pre>
 </div>
</div></section>
</div>
</body>
</html>