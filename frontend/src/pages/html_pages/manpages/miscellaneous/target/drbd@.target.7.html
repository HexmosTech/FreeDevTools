<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>drbd@.target - System target unit indicating a configured (optionally: promotable) DRBD resource</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/drbd-utils">drbd-utils_9.22.0-1.1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       drbd@.target - System target unit indicating a configured (optionally: promotable) DRBD resource

</pre><h4><b>SYNOPSIS</b></h4><pre>
       drbd@.target

</pre><h4><b>DESCRIPTION</b></h4><pre>
       Usually you do not want to "hardcode" an unconditional promotion attempt of DRBD resources, because you
       usually cannot know a-priory whether this instance of DRBD will have access to good data (yet).

       Typical setups are using a cluster manager like <b>pacemaker</b> or the less feature rich but also less complex
       <b>drbd-reactor</b> to coordinate promotion attempts and service starts.

       But in situation where you "know" that you always want this node to promote and use DRBD and the peer(s)
       are never going to take over, but only used for "DR" purposes, then this target unit may be useful.

       It is intended to be used as dependency of any mount or other use of the specific DRBD resource. The
       implicit dependency on <b>drbd@</b><u>RESNAME</u><b>.service</b> will configure DRBD, an optional
       <b>drbd-lvchange@</b><u>RESNAME</u><b>.service</b> can be used to attempt to activate the backend logical volumes first. The
       optional (but in this scenario necessary) <b>drbd-wait-promotable@</b><u>RESNAME</u><b>.service</b> is then used to wait for
       DRBD to connect to its peers and establish access to good data.

</pre><h4><b>EXAMPLE</b></h4><pre>
       Assuming you have a DRBD resource named <u>webdata</u>, its backing devices being LVM logical volumes, with an
       xfs on one volume showing up as <u>/dev/drbd0</u>, this should make your boot sequence successfully mount that
       drbd to <u>/mnt/point</u> (unless DRBD really finds no access to good data in time, or some peer is already
       primary):

           systemctl enable <a href="mailto:drbd-lvchange@webdata.service">drbd-lvchange@webdata.service</a>
           systemctl enable <a href="mailto:drbd-wait-promotable@webdata.service">drbd-wait-promotable@webdata.service</a>
           echo "/dev/drbdX /mnt/point xfs defaults,nofail,x-systemd.requires=<a href="mailto:drbd@webdata.target">drbd@webdata.target</a> 0 0" &gt;&gt; <a href="file:/etc/fstab">/etc/fstab</a>

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man1/drbd-reactor.1.html">drbd-reactor</a></b>(1), <b><a href="../man5/drbd-reactor.promoter.5.html">drbd-reactor.promoter</a></b>(5)

</pre><h4><b>AUTHORS</b></h4><pre>
       <b>LINBIT</b> <b>HA</b> <b>Solutions</b> <b>GmbH</b> <b>https://linbit.com</b>

drbd-utils                                         2024-07-17                                    <u>DRBD@.<a href="../man7/TARGET.7.html">TARGET</a></u>(7)
</pre>
 </div>
</div></section>
</div>
</body>
</html>