<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ffproxy.quick — filtering HTTP/HTTPS proxy server quick introduction</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/ffproxy">ffproxy_1.6-13_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       ffproxy.quick — filtering HTTP/HTTPS proxy server quick introduction

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>ffproxy</b>  is  a filtering HTTP/HTTPS proxy server.  It is able to filter by host, URL, and header.  Custom
       header entries can be filtered and added.  It can even drop its privileges and  optionally  <u><a href="../man2/chroot.2.html">chroot</a></u>(2)  to
       some  directory.  Logging to <u><a href="../man3/syslog.3.html">syslog</a></u>(3) is supported, as is using another auxiliary proxy server.  An HTTP
       accelerator feature (acting as a front-end to an HTTP server) is included.  Contacting  IPv6  servers  as
       well as binding to IPv6 is supported and allows transparent IPv6 over IPv4 browsing (and vice versa).

       This manual describes how to set up a basic HTTP proxy installation.  It is assumed that you already have
       compiled the program or installed it via port or package.

</pre><h4><b>COPYING</b> <b>FILES</b></h4><pre>
       The program comes with default configuration files that contain both examples and suggested entries.  You
       can  simply  copy  them  to a directory of your choice.  This directory will become the program's working
       directory.

             mkdir /var/ffproxy
             tar cf - db/ html/ | ( cd /var/ffproxy ; tar xf - )
             cp sample.config /var/ffproxy/ffproxy.conf

       Above example would install all  needed  files  to  <u>/var/ffproxy</u>,  which  is  ffproxy's  default  working
       directory.

</pre><h4><b>SECURING</b></h4><pre>
       The  proxy  now  has its own working directory.  By default, ffproxy does not change UID/GID after start.
       For security reasons we want to enable it.  You have two choices know: Either use existing UID/GID or add
       custom UID/GID for ffproxy.  See <u><a href="../man8/adduser.8.html">adduser</a></u>(8) or <u><a href="../man8/useradd.8.html">useradd</a></u>(8), depending on your system, on how to create new
       IDs.

       Edit <u>ffproxy.conf</u> and change the lines containing uid and gid

             # change UID and GID
             #
             # to use, both uid and gid must be set
             # (disabled by default)
             #uid proxy
             #gid proxy
             uid _ffproxy
             gid _ffproxy

       In addition to changing UID and GID, ffproxy should be executed change-rooted to its  working  directory.
       So we change chroot_dir and db_files_path in the configuration file

             # change root to (only in connection with uid and gid change)
             # (disabled by default)
             chroot_dir /var/ffproxy

             # path to db/ and html/ directories
             # (default: /var/ffproxy)
             db_files_path .

       db_files_path   must   be  changed,  too,  since  that  is  relative  to  new  root.   Finally,  we  copy
       <a href="file:/etc/resolv.conf">/etc/resolv.conf</a> to ffproxy's home to enable DNS in chroot and chown /var/ffproxy so the  proxy's  master
       process can write its PID file

             mkdir /var/ffproxy/etc
             cp <a href="file:/etc/resolv.conf">/etc/resolv.conf</a> /var/ffproxy/etc/
             chmod 750 /var/ffproxy
             chown _ffproxy._ffproxy /var/ffproxy

</pre><h4><b>ACCESS</b> <b>TO</b> <b>THE</b> <b>PROXY</b></h4><pre>
       By default, nobody is allowed to connect to ffproxy.  Let's say, we want to provide LAN users a filtering
       proxy  to  shut down malicious content coming from the Internet.  So the proxy has to be listening on the
       local network interface only.  We change bind_ipv4 and bind_ipv6 appropiately in <u>ffproxy.conf</u>

             bind_ipv4 martyr.burden.eu.org
             bind_ipv6 martyr.burden.eu.org

       Additionally, we have to change <u>db/access.ip</u>.  By, for example,

             ^192\.168\.10\.

       we allow 192.168.10.0/24 to use our proxy.

</pre><h4><b>STARTING</b> <b>THE</b> <b>PROXY</b></h4><pre>
       Last step is starting ffproxy.  Keep in mind that we run the program change-rooted  to  /var/ffproxy,  so
       files are relative to new root.

             cd /var/ffproxy ; /usr/local/bin/ffproxy -f ffproxy.conf

       starts  ffproxy.   Now  test  if  it works correctly.  If not, change ffproxy.conf and/or read <u><a href="../man8/ffproxy.8.html">ffproxy</a></u>(8)
       <u><a href="../man5/ffproxy.conf.5.html">ffproxy.conf</a></u>(5)

       ffproxy is not running as daemon right know.  If everything seems to work, simply shut down the proxy  by
       pressing CTRL-C, set `daemonize yes' in the configuration file and start ffproxy again.

</pre><h4><b>TRANSPARENT</b> <b>OPERATION</b></h4><pre>
       The  proxy allows transparent operation, that is, HTTP traffic is redirect to the proxy which simulates a
       HTTP server so that the users don't have to specify a proxy server.  Consider forced  usage  of  a  proxy
       server  as  well.  To do that, you will have to configure your NAT accordingly.  On OpenBSD you'll want a
       line like

             rdr on rl0 proto tcp from any to any port 80 -&gt; 127.0.0.1 port 8080

       in <u>/etc/pf.conf</u>.  See your NAT's documentation for details on how to do this.

</pre><h4><b>VERSION</b></h4><pre>
       This manual documents ffproxy 1.6 (2005-01-05).

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <u><a href="../man8/ffproxy.8.html">ffproxy</a></u>(8), <u><a href="../man5/ffproxy.conf.5.html">ffproxy.conf</a></u>(5), <u><a href="../man5/pf.conf.5.html">pf.conf</a></u>(5)

                                                   Jan 5, 2005                                  <u><a href="../man7/ffproxy.quick.7.html">ffproxy.quick</a></u>(7)
</pre>
 </div>
</div></section>
</div>
</body>
</html>