<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ocf_heartbeat_nfsserver - Manages an NFS server</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/resource-agents-extra">resource-agents-extra_4.16.0-3ubuntu1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       ocf_heartbeat_nfsserver - Manages an NFS server

</pre><h4><b>SYNOPSIS</b></h4><pre>

       <b>nfsserver</b> [start | stop | monitor | meta-data | validate-all]

</pre><h4><b>DESCRIPTION</b></h4><pre>
       Nfsserver helps one to manage the Linux nfs server as a failover-able resource in Linux-HA. It depends on
       Linux specific NFS implementation details, so is considered not portable to other platforms yet.

</pre><h4><b>SUPPORTED</b> <b>PARAMETERS</b></h4><pre>
       <b>nfs_init_script</b>
           The default init script shipped with the Linux distro. The nfsserver resource agent offloads the
           start/stop/monitor work to the init script because the procedure to start/stop/monitor nfsserver
           varies on different Linux distro. In the event that this option is not set, this agent will attempt
           to use an init script at this location, /etc/init.d/nfsserver, or detect a systemd unit-file to use
           in the event that no init script is detected.

           (optional, string, default "auto detected")

       <b>nfsv4_only</b>
           Run in NFSv4 only mode (rpc-statd and rpcbind services masked).

           (optional, boolean, default false)

       <b>nfs_no_notify</b>
           Do not send reboot notifications to NFSv3 clients during server startup.

           (optional, boolean, default false)

       <b>nfs_notify_foreground</b>
           Keeps the sm-notify attached to its controlling terminal and running in the foreground.

           (optional, boolean, default false)

       <b>nfs_smnotify_retry_time</b>
           Specifies the length of sm-notify retry time, in minutes, to continue retrying notifications to
           unresponsive hosts. If this option is not specified, sm-notify attempts to send notifications for 15
           minutes. Specifying a value of 0 causes sm-notify to continue sending notifications to unresponsive
           peers until it is manually killed.

           (optional, integer, no default)

       <b>nfs_server_scope</b>
           RFC8881, 8.4.2.1 State Reclaim:

           If the server scope is different, the client should not attempt to reclaim locks. In this situation,
           no lock reclaim is possible. Any attempt to re-obtain the locks with non-reclaim operations is
           problematic since there is no guarantee that the existing filehandles will be recognized by the new
           server, or that if recognized, they denote the same objects. It is best to treat the locks as having
           been revoked by the reconfiguration event.

           For lock reclaim to even be attempted, we have to define and set the same server scope for NFSD on
           all cluster nodes in the NFS failover cluster.

           This agent won't "guess" a suitable server scope name for you, you need to explicitly specify this.
           But without it, NFSv4 lock reclaim after failover won't work properly. Suggested value: the failover
           "service IP".

           (optional, string, no default)

       <b>nfs_ip</b>
           Comma separated list of floating IP addresses used to access the nfs service

           (optional, string, no default)

       <b>nfs_shared_infodir</b>
           The nfsserver resource agent will save nfs related information in this specific directory. And this
           directory must be able to fail-over before nfsserver itself.

           (optional, string, no default)

       <b>rpcpipefs_dir</b>
           The mount point for the sunrpc file system. Default is /var/lib/nfs/rpc_pipefs. This script will
           mount (bind) nfs_shared_infodir on /var/lib/nfs/ (cannot be changed), and this script will mount the
           sunrpc file system on /var/lib/nfs/rpc_pipefs (default, can be changed by this parameter). If you
           want to move only rpc_pipefs/ (e.g. to keep rpc_pipefs/ local) from default, please set this value.

           (optional, string, default "/var/lib/nfs/rpc_pipefs")

</pre><h4><b>SUPPORTED</b> <b>ACTIONS</b></h4><pre>
       This resource agent supports the following actions (operations):

       <b>start</b>
           Starts the resource. Suggested minimum timeout: 40s.

       <b>stop</b>
           Stops the resource. Suggested minimum timeout: 20s.

       <b>monitor</b>
           Performs a detailed status check. Suggested minimum timeout: 20s. Suggested interval: 10s.

       <b>meta-data</b>
           Retrieves resource agent metadata (internal use only). Suggested minimum timeout: 5s.

       <b>validate-all</b>
           Performs a validation of the resource configuration. Suggested minimum timeout: 30s.

</pre><h4><b>EXAMPLE</b> <b>CRM</b> <b>SHELL</b></h4><pre>
       The following is an example configuration for a nfsserver resource using the <b><a href="../man8/crm.8.html">crm</a></b>(8) shell:

           primitive p_nfsserver ocf:heartbeat:nfsserver \
             op monitor depth="0" timeout="20s" interval="10s"

</pre><h4><b>EXAMPLE</b> <b>PCS</b></h4><pre>
       The following is an example configuration for a nfsserver resource using <b><a href="../man8/pcs.8.html">pcs</a></b>(8)

           pcs resource create p_nfsserver ocf:heartbeat:nfsserver \
             op monitor OCF_CHECK_LEVEL="0" timeout="20s" interval="10s"

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="http://clusterlabs.org/">http://clusterlabs.org/</a></b>

</pre><h4><b>AUTHOR</b></h4><pre>
       <b>ClusterLabs</b> <b>contributors</b> <b>(see</b> <b>the</b> <b>resource</b> <b>agent</b> <b>source</b> <b>for</b> <b>information</b> <b>about</b> <b>individual</b> <b>authors)</b>

resource-agents 4.16.0-3ubuntu                     06/25/2025                            <u><a href="../man7/OCF_HEARTBEAT_NFSSER.7.html">OCF_HEARTBEAT_NFSSER</a></u>(7)
</pre>
 </div>
</div></section>
</div>
</body>
</html>