<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>debhelper-compat-upgrade-checklist - Upgrade checklist for supported debhelper compat levels</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/debhelper">debhelper_13.24.2ubuntu1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       debhelper-compat-upgrade-checklist - Upgrade checklist for supported debhelper compat levels

</pre><h4><b>SYNOPSIS</b></h4><pre>
       This document is an upgrade checklist of all the supported debhelper compat levels. It also lists all the
       supported debhelper compat levels.

       Information about how to declare the compat level is in "COMPATIBILITY LEVELS" in <b><a href="../man7/debhelper.7.html">debhelper</a></b>(7).

       If you are upgrading from a (now) obsolete compat level, then please refer to
       <b><a href="../man7/debhelper-obsolete-compat.7.html">debhelper-obsolete-compat</a></b>(7).

</pre><h4><b>DESCRIPTION</b></h4><pre>
   <b>Upgrade</b> <b>checklist</b> <b>for</b> <b>supported</b> <b>compatibility</b> <b>levels</b>
       These are the available compatibility levels:

       v15 This compatibility level is still open for development; use with caution.

           Changes from v14 are:

           -       The  <b>single-binary</b>  add-on  for  <b>dh</b> is no longer implicitly activated by source packages that
                   have a single <b>Package</b> stanza in <u>debian/control</u>. If  the  package  needs  the  short-cuts  for
                   single-binary packages, it must explicitly activate the <b>single-binary</b> add-in.

                   This can be done via a <b>Build-Depends</b> on <b>dh-sequence-single-binary</b>.

                   Any <b>--without</b> <b>single-binary</b> passed to <b>dh</b> to avoid the warning in compat 14 can now be removed
                   to simplify <u>debian/rules</u> without triggering the warning.

           -       It  is  now an error to use package-less versions of debhelper configuration files when there
                   are 2 or more binary packages listed in <u>debian/control</u> in most cases.  Legacy files should be
                   renamed to <u>debian/package.foo</u> (from <u>debian/foo</u>) where <u>package</u> is  the  first  binary  package
                   listed in <u>debian/control</u>.

                   The  primary  exception  to  this change are files such as <u>debian/changelog</u>, <u>debian/NEWS</u>, and
                   <u>debian/copyright</u>, where the same file is used for all packages by default.  These cases  will
                   remain unchanged.

           -       It  is now an error to use a packaging file without the package prefix for <b>--name</b> even if the
                   source package only produces one binary package. As example, if you had a  <u>debian/bar.service</u>
                   with the following snippet in <u>debian/rules</u>:

                    override_dh_installsystemd:
                       dh_installsystemd -p foo --name bar

                   Then you need to rename <u>debian/bar.service</u> to <u>debian/foo.bar.service</u>.

       v14 This compatibility level is still open for development; use with caution.

           Changes from v13 are:

           -       The  <b>dh_installpam</b> tool will now install PAM configuration files under <u>/usr/lib/pam.d/package</u>
                   instead of <u>/etc/pam.d/package</u>.

                   Please consider using the "rm_conffile" feature from <b><a href="../man1/dh_installdeb.1.html">dh_installdeb</a></b>(1) to  ensure  the  proper
                   removal of previous PAM files.

           -       Packages using the <b>dh</b> sequencer should be aware the following changes:

                   -   The  order  and  placement  has  changed  for  <b>dh_strip_nondeterminism</b>,  <b>dh_compress</b>, and
                       <b>dh_fixperm</b>. Previously, these three  commands  were  run  in  the  listed  order  between
                       <b>dh_installxfonts</b> and <b>dh_missing</b>.

                       Their  new placement is after <b>dh_missing</b> (arch:all) or <b>dh_shlibdeps</b> (arch:any) and before
                       <b>dh_installdeb</b>. Additionally, their new order is <b>dh_fixperms</b>, <b>dh_strip_nondeterminism</b>, and
                       then <b>dh_compress</b>.

                       This change may require updates to third-party add-ons that use  either  of  these  three
                       commands  as  anchor  or  to hook targets for any of these commands that made assumptions
                       about the command order.

                       Additionally, <b>dh_strip_nondeterminism</b> and <b>dh_compress</b> plus any commands added  by  third-
                       party add-ons using these as anchors will no longer be able to rely on the mode/ownership
                       normalization  by  <b>dh_fixperms</b>,  which  may  expose bugs in the form of incorrect mode or
                       ownership in the resulting binary package.

                       Please file any such bugs against the relevant tool. Feel free to include  the  <b>debhelper</b>
                       maintainers in CC.

                   -   The  tool  <b>dh_installsysusers</b>  is  now included in the default sequence. This helper tool
                       will process systemd sysusers files.

                   -   The <b>dh_installsystemduser</b> tool will default to enabling systemd user units, start them on
                       installation, restart them on upgrades and stop them on uninstalling the package.

                   -   Use of the <b>dh_gconf</b> command in override and  hook  targets  now  causes  an  error.   The
                       <b>dh_gconf</b> command has been a no-op for years and was removed in debhelper 13.4.

                   -   The  <b>dh_installalternatives</b>  tool  will  now  be  run  after  <b>dh_link</b>  rather  than after
                       <b>dh_installinitramfs</b> in the default <b>dh</b> sequence.

                   -   <u>This</u> <u>item</u> <u>only</u> <u>applies</u> <u>to</u> <u>source</u>  <u>packages</u>  <u>that</u>  <u>have</u>  <u>exactly</u>  <u>one</u>  <u><b>Package</b></u>  <u>stanza</u>  <u>in</u>
                       <u>debian/control.</u>

                       The <b>dh_auto_install</b> command now unconditionally uses <b>--destdir=debian/tmp</b> by default. The
                       special-case for source packages building a single binary package is now moved to <b>single-</b>
                       <b>binary</b> <b>dh</b> addon. Note, this add-on is activated by default in compat 14 but not in compat
                       15 (see next bullet item).

                   -   <u>This</u>  <u>item</u>  <u>only</u>  <u>applies</u>  <u>to</u>  <u>source</u>  <u>packages</u>  <u>that</u>  <u>have</u> <u>exactly</u> <u>one</u> <u><b>Package</b></u> <u>stanza</u> <u>in</u>
                       <u>debian/control.</u>

                       The <b>dh</b> sequencer will warn if the <b>single-binary</b> addon is  implicitly  activated  to  warn
                       maintainers  of  the pending compat 15 change in <b>dh_auto_install</b>. The implicit activation
                       is a transitional feature to reduce the changes of risks with this change.  In compat 15,
                       the implicit activation will no longer trigger.

                       Maintainers are urged to either explicitly activate the <b>single-binary</b> addon  to  preserve
                       the  existing  behaviour (e.g., by adding <b>dh-sequence-single-binary</b> to Build-Depends), or
                       explicitly passing <b>--destdir</b> to  <b>dh_auto_install</b>  if  used  and  then  passing  <b>--without</b>
                       <b>single-binary</b> to <b>dh</b> (the latter to silence the warning).

                       The rationale for this change is to avoid "surprises" when adding a second binary package
                       later.   Previously,  debhelper  would silently change behaviour often resulting in empty
                       binary packages being uploaded to the archive by mistake. With  the  new  behaviour,  the
                       <b>single-binary</b>  addon will detect the mismatch and warn the maintainer of what is about to
                       happen.

           -       The <b>dh_gencontrol</b> tool now automatically applies relationship substvars to  relevant  fields.
                   That  means  that many substvars such as <b>${misc:Depends}</b> and <b>${shlibs:Depends}</b> no longer need
                   to be explicitly mentioned in <u>debian/control</u>. This applies to  any  substvar  named  after  a
                   field  that  the  installed version of <b>dpkg</b> considers a relation or dependency-like field. At
                   the time of writing, the list consists of:

                   -   Pre-Depends

                   -   Depends

                   -   Recommends

                   -   Suggests

                   -   Enhances

                   -   Conflicts

                   -   Breaks

                   -   Replaces

                   -   Provides

                   -   Built-Using

                   -   Static-Built-Using

                   This means that <b>Depends:</b> <b>foo,</b>  <b>${misc:Depends}</b>  in  <u>debian/control</u>  can  now  be  reduced  to
                   <b>Depends:</b>  <b>foo</b>  and  <b>Depends:</b>  <b>${misc:Depends},</b>  <b>${shlibs:Depends}</b>  can be removed entirely as
                   examples of how the feature works.

                   Note that other substvars such as <b>${binary:Version}</b> are unaffected by this change and  should
                   still  be  used  explicitly  as  necessary.  Additionally,  for  <b>Essential:</b> <b>yes</b> packages that
                   manually promoted <b>${shlibs:Depends}</b> into <b>Pre-Depends</b> field,  <b>dh_shlibdeps</b>  will  handle  this
                   automatically as well (see the next compat item).

                   See  &lt;https://lists.debian.org/debian-devel/2024/02/msg00230.html&gt;  for  the  details of this
                   proposal. The summary in  &lt;https://lists.debian.org/debian-devel/2024/03/msg00030.html&gt;  also
                   covers  when  the substvars need tweaking.  The most common case involves using the <b>-d</b> option
                   from <b>dpkg-shlibdeps</b> possibly via <b>dh_shlibdeps</b>.

                   Note: This change will  cause  false-positives  from  an  unfixed  <b><a href="../man1/lintian.1.html">lintian</a></b>(1).  Please  check
                   &lt;https://bugs.debian.org/1067653&gt; for <b><a href="../man1/lintian.1.html">lintian</a></b>(1) support for this change.

           -       The  <b>dh_shlibdeps</b>  tool  now  defaults  to  using <b>${shlibs:Pre-Depends}</b> for packages that are
                   <b>Essential:</b> <b>yes</b>.

                   Note due to the <b>dh_gencontrol</b> change above, any package using <b>dh_gencontrol</b> will not have  to
                   do anything for this migration.

           -       When  running  <b>dh_auto_install</b>, <b>debhelper</b> provided build systems will now ensure all paths in
                   the <b>destdir</b> have minimal user permissions (<b>chmod</b> <b>-R</b> <b>u+rwX</b>) to avoid weird  <u>permission</u>  <u>denied</u>
                   errors during builds.

                   Third-party  provided  debhelper build systems are recommended to support this as well.  This
                   can be done by running

                        $this-&gt;ensure_minimal_permissions($destdir) if not <a href="../man13/compat.13.html">compat</a>(13);

                   in the <b>debhelper</b> Buildsystem code from their <b>sub</b> <b>install</b> implementation  after  the  upstream
                   code has been run.

                   If you are not using <b>dh_auto_install</b> and you run into weird <u>permission</u> <u>denied</u> errors, you can
                   often  solve  this  by running <b>chmod</b> <b>-R</b> <b>u+rwX</b> <b>DIRECTORY</b> after running the install target from
                   the upstream build system.

                   Please take care to check if your package has any special cases for permissions  where  files
                   or  directories for some reason must not have the "user write bit" set. Known cases are <b>*.ali</b>
                   files and <b><a href="file:/etc/sudoers.d">/etc/sudoers.d</a></b>, which <b>dh_fixperms</b> will fix up by default.

                   The problem with uncommon permissions have always been present in  theory.  However,  it  has
                   become  considerable  more  visible  with  <b>dh_fixperms</b>  being run later in the sequence as of
                   compat 14 and with the move to remove <b>fakeroot</b> by default (which papered over some  of  these
                   issues). This change is aimed at mitigating the problem.

           -       The debhelper configuration files are subject to the following changes:

                   -   It  now  triggers a warning to use package-less versions of debhelper configuration files
                       when there are 2 or more binary packages listed in <u>debian/control</u> in most cases.   Legacy
                       files  should  be  renamed  to  <u>debian/package.foo</u> (from <u>debian/foo</u>) where <u>package</u> is the
                       first binary package listed in <u>debian/control</u>.

                       The primary exception to this change are files such as <u>debian/changelog</u>, <u>debian/NEWS</u>, and
                       <u>debian/copyright</u>, where the same file is used for all packages by default.   These  cases
                       will  remain  unchanged.   The  debhelper  tool  using the files will trigger warnings on
                       usage.

                       In compat 15 (or later), this is changed to an error.

                   -   It now triggers a warning to use a packaging file without the package prefix  for  <b>--name</b>
                       even  if  the  source  package only produces one binary package. As example, if you had a
                       <u>debian/bar.service</u> with the following snippet in <u>debian/rules</u>:

                        override_dh_installsystemd:
                           dh_installsystemd -p foo --name bar

                       Then you need to rename <u>debian/bar.service</u> to <u>debian/foo.bar.service</u>.

                       In compat 15 (or later), this is changed to an error.

                   -   The default look up rules for <b>Dh_Lib</b> based tools now assume that configuration files  are
                       no  longer  named (<b>--name</b>) nor support architecture restrictions by default.  If you work
                       with a third-party debhelper-like tool and need support for  either  of  these  features,
                       please  file  a bug against the tool asking it to declare its configuration file with the
                       relevant options in its <b>pkgfile</b> call.

                       Note that <b>debhelper</b> itself tweaked its rules for most of  its  tools  as  well  based  on
                       analysis  of  usage  via  <b>codesearch.debian.org</b>.  Should you be relying on a feature like
                       architecture restrictions for a given config file that is  no  longer  supported,  please
                       file a feature request for the use-case and it might be restored.

           -       Packages using the <b>cmake</b> build system should be aware of the following changes:

                   -   The  <b>cmake</b>  buildsystem now passes <b>-DCMAKE_BUILD_RPATH_USE_ORIGIN=ON</b> to <b><a href="../man1/cmake.1.html">cmake</a></b>(1) to avoid
                       some reproducibility issues.

                   -   The <b>cmake</b> build system now sets the <b>ASMFLAGS</b> environment variable when it  is  unset  and
                       <b>ASFLAGS</b>  is  present.  The  former  name  (<b>ASMFLAGS</b>) is the name <b>cmake</b> expects, while the
                       latter (<b>ASFLAGS</b>) is the name that <b><a href="../man1/dpkg-buildpackage.1.html">dpkg-buildpackage</a></b>(1) uses.

                   -   The <b>cmake</b> build  systems  now  use  <b>cmake</b>  <b>--install</b>  instead  of  <b>make</b>  <b>install</b>  in  the
                       <b><a href="../man1/dh_auto_install.1.html">dh_auto_install</a></b>(1) call.  Any override of <b>dh_auto_install</b> that passes extra parameters to
                       the upstream build system should be reviewed.

           -       Packages using the <b>meson</b> build system should be aware of the following changes:

                   -   The <b>meson</b> build system now passes <b>--auto-features=enabled</b> to <b>meson</b>.

                   -   The  <b>meson+ninja</b>  build  system  now  use  <b>meson</b>  <b>install</b> instead of <b>ninja</b> <b>install</b> in the
                       <b><a href="../man1/dh_auto_install.1.html">dh_auto_install</a></b>(1) call.  Any override of <b>dh_auto_install</b> that passes extra parameters to
                       the upstream build system should be reviewed.

           -       The <u>debian/compat</u> file is no longer accepted as a source for specifying the debhelper  compat
                   level. Put the compat level in the <b>X-DH-Compat</b> field of the <b>Source</b> stanza of <u>debian/control</u>.

                   Note  to avoid breaking packages that already migrated to compat 14 immediately, while it was
                   experimental this change is first enforced when compat 14 becomes stable.

           -       The tool <b>dh_installtmpfiles</b> now runs with <b>--remove</b> on package removal, and <b>--purge</b> on package
                   purge. systemd v256 is required for the latter.

           -       The <b>dh_lintian</b> tool no longer accepts architecture specific overrides files for packages with
                   <b>Multi-Arch:</b> <b>same</b> in <u>debian/control</u>,  since  these  would  not  be  co-installable.  Instances
                   affected by this error should migrate to <b><a href="../man1/lintian.1.html">lintian</a></b>(1) architecture specific overrides.

       v13 This is the recommended mode of operation.

           Changes from v12 are:

           -       The  <b>meson+ninja</b> build system now uses <b>meson</b> <b>test</b> instead of <b>ninja</b> <b>test</b> when running the test
                   suite.  Any override of <b>dh_auto_test</b> that passes extra parameters  to  upstream  test  runner
                   should be reviewed as <b>meson</b> <b>test</b> is not command line compatible with <b>ninja</b> <b>test</b>.

           -       All  debhelper  like  tools  based  on  the  official debhelper library (including <b>dh</b> and the
                   official <b>dh_*</b> tools) no longer accepts abbreviated command parameters.  At the same time,  <b>dh</b>
                   now optimizes out calls to redundant <b>dh_*</b> helpers even when passed long command line options.

           -       The  ELF related debhelper tools (<b>dh_dwz</b>, <b>dh_strip</b>, <b>dh_makeshlibs</b>, <b>dh_shlibdeps</b>) are now only
                   run for arch dependent packages by default (i.e. they are excluded from <b>*-indep</b>  targets  and
                   are  passed  <b>-a</b>  by  default).  If you need them for <b>*-indep</b> targets, you can add an explicit
                   Build-Depends on <b>dh-sequence-elf-tools</b>.

           -       The third-party  <b>gradle</b>  build  system  (from  <b>gradle-debian-helper</b>  package)  now  runs  the
                   upstream-provided   test   suite   automatically.    To   suppress  such  behavior,  override
                   <b>dh_auto_test</b>.

           -       The <b>dh_installman</b> tool now aborts if it sees conflicting  definitions  of  a  manpage.   This
                   typically  happens  if  the  upstream build system is installing a compressed version and the
                   package lists an uncompressed version of the manpage in <u>debian/package.manpages</u>.   Often  the
                   easiest fix is to remove the manpage from <u>debian/package.manpages</u> (assuming both versions are
                   identical).

           -       The <b>dh_auto_*</b> helpers now reset the environment variable <b>HOME</b> and the common <b>XDG_*</b> variables.
                   Please  see description of the environment variables in "ENVIRONMENT" in <b><a href="../man1/debhelper.1.html">debhelper</a></b>(1) for how
                   this is handled.

                   <u>This</u> <u>feature</u> <u>changed</u> <u>between</u> <u>debhelper</u> <u>13</u> <u>and</u> <u>debhelper</u> <u>13.2.</u>

           -       The <b>dh</b> command will now error if an override or hook  target  for  an  obsolete  command  are
                   present in <u>debian/rules</u> (e.g. <b>override_dh_systemd_enable:</b>).

           -       The  <b>dh_missing</b>  command  will now default to <b>--fail-missing</b>.  This can be reverted to a non-
                   fatal warning by explicitly passing <b>--list-missing</b> like it was in compat 12.

                   If you do not want the warning either, please omit the call to <b>dh_missing</b>.  If you use the <b>dh</b>
                   command sequencer, then you can do  this  by  inserting  an  empty  override  target  in  the
                   <u>debian/rules</u> file of the relevant package.  As an example:

                       # Disable dh_missing
                       override_dh_missing:

           -       The  <b>dh</b>  command  sequencer  now  runs  <b>dh_installtmpfiles</b>  in  the  default  sequence.   The
                   <b>dh_installtmpfiles</b>  takes  over  handling  of  tmpfiles.d   configuration   files.    Related
                   functionality in <b>dh_installsystemd</b> is now disabled.

                   Note that <b>dh_installtmpfiles</b> responds to <u>debian/package.tmpfiles</u> where <b>dh_installsystemd</b> used
                   a name without the trailing "s".

           -       Many <b>dh_*</b> tools now support limited variable expansion via the <b>${foo}</b> syntax.  In many cases,
                   this  can  be  used  to  reference  paths  that contain either spaces or <b><a href="../man1/dpkg-architecture.1.html">dpkg-architecture</a></b>(1)
                   values.  While this can reduce the need for <b><a href="../man1/dh-exec.1.html">dh-exec</a></b>(1) in some cases, it is <b>not</b> a replacement
                   <b><a href="../man1/dh-exec.1.html">dh-exec</a></b>(1) in general.  If you need filtering, renaming, etc., the package  will  still  need
                   <b><a href="../man1/dh-exec.1.html">dh-exec</a></b>(1).

                   Please  see  "Substitutions  in debhelper config files" for syntax and available substitution
                   variables.  To <b>dh_*</b> tool writers, substitution expansion occurs as a part  of  the  <b>filearray</b>
                   and <b>filedoublearray</b> functions.

           -       The <b>dh</b> command sequencer will now skip all hook and override targets for <b>dh_auto_test</b>, <b>dh_dwz</b>
                   and <b>dh_strip</b> when <b>DEB_BUILD_OPTIONS</b> lists the relevant <b>nocheck</b> / <b>nostrip</b> options.

                   Any  package relying on these targets to always be run should instead move relevant logic out
                   of those targets.  E.g. non-test related packaging code from <b>override_dh_auto_test</b> would have
                   to be moved to <b>execute_after_dh_auto_build</b> or <b>execute_before_dh_auto_install</b>.

           -       The <b>cmake</b> buildsystem now passes <b>-DCMAKE_SKIP_INSTALL_ALL_DEPENDENCY=ON</b> to <b><a href="../man1/cmake.1.html">cmake</a></b>(1) to  speed
                   up  automatic  installation  process. If for some reason you need previous behavior, override
                   the flag:

                       dh_auto_configure -- -DCMAKE_SKIP_INSTALL_ALL_DEPENDENCY=OFF ...

       v12 Changes from v11 are:

           -       The <b>dh_makeshlibs</b> tool now generates shlibs files with versioned dependency by default.  This
                   means that <b>-VUpstream-Version</b> (a.k.a. <b>-V</b>) is now the default.

                   If an unversioned dependency in the shlibs file is wanted, this can be  obtained  by  passing
                   <b>-VNone</b>  instead.   However,  please  see  <b><a href="../man1/dh_makeshlibs.1.html">dh_makeshlibs</a></b>(1)  for  the  caveat  of  unversioned
                   dependencies.

           -       The <b>-s</b> (<b>--same-arch</b>) option is removed.  Please use <b>-a</b> (<b>--arch</b>) instead.

           -       Invoking <b>dh_clean</b> <b>-k</b> now causes an error instead of a deprecation warning.

           -       The <b>--no-restart-on-upgrade</b> option in <b>dh_installinit</b> has been removed.  Please  use  the  new
                   name <b>--no-stop-on-upgrade</b>

           -       There  was a bug in the <b>doit</b> (and similar) functions from Debian::Debhelper::Dh_Lib that made
                   them spawn a shell in one particular circumstance.  This bug is now removed  and  will  cause
                   helpers that rely on the bug to fail with a "command not found"-error.

           -       The  <b>--list-missing</b> and <b>--fail-missing</b> in <b>dh_install</b> has been removed.  Please use <b>dh_missing</b>
                   and its corresponding options, which can also see the files installed by other helpers.

           -       The <b>dh_installinit</b> helper no longer installs  configuration  for  the  upstart  init  system.
                   Instead, it will abort the build if it finds an old upstart configuration file.  The error is
                   there  to remind the package maintainer to ensure the proper removal of the conffiles shipped
                   in previous versions of the package (if any).

           -       The <b>dh_installdeb</b> tool will do basic validation of some  <b><a href="../man1/dpkg-maintscript-helper.1.html">dpkg-maintscript-helper</a></b>(1)  commands
                   and will error out if the commands appear to be invalid.

           -       The <b>dh_missing</b> tool will now default to <b>--list-missing</b>.

           -       The  <b>dh_makeshlibs</b>  tool will now only pass libraries to <b><a href="../man1/dpkg-gensymbols.1.html">dpkg-gensymbols</a></b>(1) if the ELF binary
                   has a SONAME (containing ".so").

           -       The  <b>dh_compress</b>  tool  no  longer  compresses   examples   (i.e.   anything   installed   in
                   <u>&lt;/usr/share/doc/package/examples</u>&gt;.)

           -       The  standard  sequence  in  <b>dh</b> now includes <b>dh_dwz</b> and <b>dh_installinitramfs</b> by default.  This
                   makes the <b>dwz</b> and <b>installinitramfs</b> sequences obsolete and they will now fail with  an  error.
                   If  you  want to skip these commands, then please insert an empty override target for them in
                   <u>debian/rules</u> (e.g. <u>override_dh_dwz:</u>)

           -       The build systems <b>meson</b> and <b>autoconf</b> no longer explicitly set the <b>--libexecdir</b>  variable  and
                   thus  relies on the build system default - which should be <b><a href="file:/usr/libexec">/usr/libexec</a></b> (per FHS 3.0, adopted
                   in Debian Policy 4.1.5).

                   If a particular upstream package does not use the correct default, the parameter can often be
                   passed manually via <b><a href="../man1/dh_auto_configure.1.html">dh_auto_configure</a></b>(1).  E.g.  via the following example:

                       override_dh_auto_configure:
                           dh_auto_configure -- --libexecdir=<a href="file:/usr/libexec">/usr/libexec</a>

                   Note the <b>--</b> before the <b>--libexecdir</b> parameter.

           -       <b>Retroactively</b> <b>removed</b> <b>in</b> <b>debhelper/13.5</b>:

                   The <b>dh_installdeb</b> tool would no longer install the maintainer provided <u>conffiles</u> file  as  it
                   was deemed unnecessary.  However, the <b>remove-on-upgrade</b> from dpkg/1.20 made the file relevant
                   again and <b>dh_installdeb</b> now installs it again in compat levels 12+.

           -       The  <b>dh_installsystemd</b>  tool no longer relies on <b>dh_installinit</b> for handling systemd services
                   that have a sysvinit alternative.  Both tools must now be used in such a case to  ensure  the
                   service is properly started under both sysvinit and systemd.

                   If  you  have  an override for <b>dh_installinit</b> (e.g. to call it with <b>--no-start</b>) then you will
                   probably need one for <b>dh_installsystemd</b> as well now.

                   This change makes  <b>dh_installinit</b>  inject  a  <u>misc:Pre-Depends</u>  for  <b>init-system-helpers</b>  <b>(&gt;=</b>
                   <b>1.54~)</b>.   Please  ensure  that the package lists <b>${misc:Pre-Depends}</b> in its <b>Pre-Depends</b> field
                   before upgrading to compat 12.

           -       The  third-party  <b>dh_golang</b>  tool  (from  <b>dh-golang</b>  package)  now   defaults   on   honoring
                   <b>DH_GOLANG_EXCLUDES</b>  variable for source installation in -dev packages and not only during the
                   building process. Please set <b>DH_GOLANG_EXCLUDES_ALL</b>  to  false  to  revert  to  the  previous
                   behaviour. See <b>Debian::Debhelper::Buildsystem::<a href="../man3pm/golang.3pm.html">golang</a>(3pm)</b> for details and examples.

           -       <b>dh_installsystemduser</b> is now included in the <b>dh</b> standard sequence by default.

           -       The  <b>python-distutils</b>  buildsystem  is  now removed.  Please use the third-party build system
                   <b>pybuild</b> instead.

       v11 This mode is discouraged.

           The compat 11 is discouraged for  new  packages  as  it  suffers  from  feature  interaction  between
           dh_installinit  and  dh_installsystemd  causing  services to not run correctly in some cases.  Please
           consider using compatibility mode 10 or 12 instead.  More details about the issue  are  available  in
           Debian#887904 and &lt;https://lists.debian.org/debian-release/2019/04/msg01442.html&gt;.

           Changes from v10 are:

           -       <b>dh_installinit</b>  no longer installs <u>service</u> or <u>tmpfile</u> files, nor generates maintainer scripts
                   for those files.  Please use the new <b>dh_installsystemd</b> helper.

           -       The  <b>dh_systemd_enable</b>  and  <b>dh_systemd_start</b>  helpers  have  been  replaced   by   the   new
                   <b>dh_installsystemd</b>  helper.   For  the  same reason, the <b>systemd</b> sequence for <b>dh</b> has also been
                   removed.  If you need to disable the <b>dh_installsystemd</b>  helper  tool,  please  use  an  empty
                   override target.

                   Please  note that the <b>dh_installsystemd</b> tool has a slightly different behaviour in some cases
                   (e.g. when using the <b>--name</b> parameter).

           -       <b>dh_installdirs</b> no longer creates debian/<u>package</u> directories unless explicitly  requested  (or
                   it has to create a subdirectory in it).

                   The vast majority of all packages will be unaffected by this change.

           -       The  <b>makefile</b>  buildsystem  now  passes  <b>INSTALL="install</b>  <b>--strip-program=true"</b>  to <b><a href="../man1/make.1.html">make</a></b>(1).
                   Derivative buildsystems (e.g. <b>configure</b> or <b>cmake</b>) are unaffected by this change.

           -       The <b>autoconf</b> buildsystem now passes <b>--runstatedir=<a href="file:/run">/run</a></b> to <u>./configure</u>.

           -       The <b>cmake</b> buildsystem now passes <b>-DCMAKE_INSTALL_RUNSTATEDIR=<a href="file:/run">/run</a></b> to <b><a href="../man1/cmake.1.html">cmake</a></b>(1).

           -       <b>dh_installman</b> will now prefer detecting the language from  the  path  name  rather  than  the
                   extension.

           -       <b>dh_auto_install</b>  will  now  only  create  the destination directory it needs.  Previously, it
                   would create the package build directory for all packages.  This  will  not  affect  packages
                   that  only  build with debhelper commands, but it may expose bugs in commands not included in
                   debhelper.

           -       The helpers <b>dh_installdocs</b>, <b>dh_installexamples</b>, <b>dh_installinfo</b>, and <b>dh_installman</b>  now  error
                   out  if their config has a pattern that does not match anything or reference a path that does
                   not exist.

                   Known exceptions include building with the <b>nodoc</b> profile, where the above tools will silently
                   permit failed matches where the patterns are used to specify documentation.

           -       The helpers <b>dh_installdocs</b>, <b>dh_installexamples</b>, <b>dh_installinfo</b>, and <b>dh_installman</b> now  accept
                   the  parameter  <b>--sourcedir</b>  with same meaning as <b>dh_install</b>. Furthermore, they now also fall
                   back to <u>debian/tmp</u> like <b>dh_install</b>.

                   Migration note: A bug in debhelper 11 up to 11.1.5  made  <b>dh_installinfo</b>  incorrectly  ignore
                   <b>--sourcedir</b>.

           -       The  <b>perl-makemaker</b>  and  <b>perl-build</b> build systems no longer pass <b>-I.</b> to perl.  Packages that
                   rely on this behavior can often use the <b>PERL5LIB</b> environment variable as a substitute.   E.g.
                   by adding <b>export</b> <b>PERL5LIB=.</b> in their debian/rules file (or similar).

           -       The  <b>PERL_USE_UNSAFE_INC</b>  environment variable is no longer set by <b>dh</b> or any of the <b>dh_auto_*</b>
                   tools.  It was added as a temporary work around to avoid a lot of packages failing  to  build
                   at the same time.

                   Note  this  item  will eventually become obsolete as upstream intends to drop support for the
                   <b>PERL_USE_UNSAFE_INC</b> environment variable.  When perl drops support for it, then this variable
                   will be removed retroactively from existing compat levels as well.

           -       The <b>dh_makeshlibs</b> helper will now exit with an error if objdump returns a non-zero exit  from
                   analysing a given file.

           -       The  <b>dh_installdocs</b> and <b>dh_installexamples</b> tools may now install <u>most</u> of the documentation in
                   a different path to comply with the recommendation from Debian policy  ยง12.3  (since  version
                   3.9.7).

                   Note  that  if a given source package only contains a single binary package in <u>debian/control</u>
                   or none of the packages are <u>-doc</u> packages, then this change is not relevant for  that  source
                   package and you can skip to the next change.

                   By  default, these tools will now attempt to determine a "main package for the documentation"
                   (called a <u>doc-main-package</u> from here on) for every <u>-doc</u> package.  If they find  such  a  <u>doc-</u>
                   <u>main-package</u>,  they will now install the documentation into the path <u>/usr/share/doc/doc-main-</u>
                   <u>package</u> in the given doc package.  I.e. the path can change but the  documentation  is  still
                   shipped in the <u>-doc</u> package.

                   The <b>--doc-main-package</b> option can be used when the auto-detection is insufficient or to reset
                   the  path  to  its  previous  value  if  there  is  a  reason  to  diverge from Debian policy
                   recommendation.

                   Some documentation will not be  affected  by  this  change.   These  exceptions  include  the
                   copyright  file, changelog files, README.Debian, etc.  These files will still be installed in
                   the path <u>/usr/share/doc/package</u>.

           -       The <b>dh_strip</b> and <b>dh_shlibdeps</b> tools no longer uses filename patterns to determine which files
                   to process.  Instead, they open the file and look for an ELF header to determine if  a  given
                   file is an shared object or an ELF executable.

                   This change may cause the tools to process more files than previously.

       v10 Changes from v9 are:

           -       <b>dh_installinit</b> will no longer installs a file named debian/<u>package</u> as an init script.

           -       <b>dh_installdocs</b> will error out if it detects links created with --link-doc between packages of
                   architecture "all" and non-"all" as it breaks binNMUs.

           -       <b>dh_installdeb</b>  no  longer installs a maintainer-provided debian/<u>package</u>.shlibs file.  This is
                   now done by <b>dh_makeshlibs</b> instead.

           -       <b>dh_installwm</b> refuses to create a broken package if no man page  can  be  found  (required  to
                   register for the x-window-manager alternative).

           -       Debhelper  will  default  to  <b>--parallel</b> for all buildsystems that support parallel building.
                   This can be disabled by using either <b>--no-parallel</b> or passing <b>--max-parallel</b> with a value  of
                   1.

           -       The  <b>dh</b>  command  will  not accept any of the deprecated "manual sequence control" parameters
                   (<b>--before</b>, <b>--after</b>, etc.).  Please use override targets instead.

                   <b>Retroactively</b> <b>applied</b> <b>to</b> <b>earlier</b> <b>compat</b> <b>levels</b>: <b>dh</b> no  longer  accepts  any  of  these  since
                   debhelper/12.4.

           -       The  <b>dh</b>  command  will no longer use log files to track which commands have been run.  The <b>dh</b>
                   command <u>still</u> keeps track of whether it already ran the "build" sequence and skip  it  if  it
                   did.

                   The main effects of this are:

                   -   With this, it is now easier to debug the <u>install</u> or/and <u>binary</u> sequences because they can
                       now trivially be re-run (without having to do a full "clean and rebuild" cycle)

                   -   The  main  caveat is that <b>dh_*</b> now only keeps track of what happened in a single override
                       target.  When all the calls to a given <b>dh_cmd</b> command happens in the same override target
                       everything will work as before.

                       Example of where it can go wrong:

                         override_dh_foo:
                           dh_foo -pmy-pkg

                         override_dh_bar:
                           dh_bar
                           dh_foo --remaining

                       In this case, the call to <b>dh_foo</b> <b>--remaining</b>  will  <u>also</u>  include  <u>my-pkg</u>,  since  <b>dh_foo</b>
                       <b>-pmy-pkg</b>  was  run  in  a  separate  override  target.   This  issue  is  not  limited to
                       <b>--remaining</b>, but also includes <b>-a</b>, <b>-i</b>, etc.

           -       The <b>dh_installdeb</b> command now shell-escapes the lines in the <u>maintscript</u> config  file.   This
                   was  the  original intent but it did not work properly and packages have begun to rely on the
                   incomplete shell escaping (e.g. quoting file names).

           -       The <b>dh_installinit</b> command now defaults to <b>--restart-after-upgrade</b>.  For packages needing the
                   previous behaviour, please use <b>--no-restart-after-upgrade</b>.

           -       The <b>autoreconf</b> sequence is now enabled by default.  Please pass <b>--without</b> <b>autoreconf</b> to <b>dh</b> if
                   this is not desirable for a given package

           -       The <b>systemd</b> sequence is now enabled by default.  Please pass <b>--without</b> <b>systemd</b> to <b>dh</b> if  this
                   is not desirable for a given package.

           -       <b>Retroactively</b> <b>removed</b>: <b>dh</b> no longer creates the package build directory when skipping running
                   debhelper  commands.  This  will not affect packages that only build with debhelper commands,
                   but it may expose bugs in commands not included in debhelper.

                   This compatibility feature had a bug since its inception in debhelper/9.20130516 that made it
                   fail to apply in compat 9 and earlier.  As there has been no reports of issues caused by this
                   bug in those ~5 years, this item have been removed rather than fixed.

       v9  Changes from v8 are:

           -       Multiarch support. In particular, <b>dh_auto_configure</b> passes multiarch directories to  <b>autoconf</b>
                   in --libdir and --libexecdir.

           -       dh  is aware of the usual dependencies between targets in debian/rules.  So, "dh binary" will
                   run any build, build-arch, build-indep, install, etc targets that exist in  the  rules  file.
                   There's  no  need to define an explicit binary target with explicit dependencies on the other
                   targets.

           -       <b>dh_strip</b> compresses debugging symbol files to reduce the installed size of -dbg packages.

           -       <b>dh_auto_configure</b> does not include  the  source  package  name  in  --libexecdir  when  using
                   <b>autoconf</b>.

           -       <b>dh</b> does not default to enabling --with=python-support

                   (Obsolete:  As  the <b>dh_pysupport</b> tool was removed from Debian stretch.  Since debhelper/10.3,
                   <b>dh</b> no longer enables this sequence add-on regardless of compat level)

           -       All of the <b>dh_auto_</b><u>*</u> debhelper programs and <b>dh</b> set  environment  variables  listed  by  <b>dpkg-</b>
                   <b>buildflags</b>, unless they are already set.

           -       <b>dh_auto_configure</b>  passes  <b>dpkg-buildflags</b>  CFLAGS, CPPFLAGS, and LDFLAGS to perl <u>Makefile.PL</u>
                   and <u>Build.PL</u>

           -       <b>dh_strip</b> puts separated debug symbols in a location based on their build-id.

           -       Executable debhelper config files are run and their output used as the configuration.

           This mode is deprecated.

       v8  Changes from v7 are:

           -       Commands will fail rather than warning when they are passed unknown options.

           -       <b>dh_makeshlibs</b> will run <b>dpkg-gensymbols</b> on all shared libraries that it generates shlibs files
                   for. So <b>-X</b> can be used to exclude libraries.  Also, libraries in unusual locations that <b>dpkg-</b>
                   <b>gensymbols</b> would not have processed before will be passed to it, a behavior change  that  can
                   cause some packages to fail to build.

           -       <b>dh</b>  requires  the  sequence to run be specified as the first parameter, and any switches come
                   after it. Ie, use "<b>dh</b> <b>$@</b> <b>--foo</b>", not "<b>dh</b> <b>--foo</b> <b>$@</b>".

           -       <b>dh_auto_</b><u>*</u> prefer to use Perl's <b>Module::Build</b> in preference to <u>Makefile.PL</u>.

           This mode is deprecated.

       v7  This mode is deprecated.

           This is the lowest supported compatibility level.

           If you are upgrading from an earlier compatibility level, please review <b><a href="../man7/debhelper-obsolete-compat.7.html">debhelper-obsolete-compat</a></b>(7).

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man7/debhelper-obsolete-compat.7.html">debhelper-obsolete-compat</a></b>(7)
           Upgrading from a (now) obsolete compatibility level? This document covers the upgrade checklist up to
           the earliest supported level.

       <b><a href="../man7/debhelper.7.html">debhelper</a></b>(7)
           General information about the debhelper framework. This document also  covers  how  to  declare  your
           chosen debhelper compat level.

</pre><h4><b>AUTHORS</b></h4><pre>
       Niels Thykier &lt;<a href="mailto:niels@thykier.net">niels@thykier.net</a>&gt;

       Joey Hess

13.24.2ubuntu1                                     2025-05-22                                       <u><a href="../man7/debhelper.7.html">debhelper</a></u>(7)
</pre>
 </div>
</div></section>
</div>
</body>
</html>