<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>systemd-boot, sd-boot - A simple UEFI boot manager</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/systemd-boot">systemd-boot_257.7-1ubuntu1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       systemd-boot, sd-boot - A simple UEFI boot manager

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>systemd-boot</b> (short: <b>sd-boot</b>) is a simple UEFI boot manager. It provides a textual menu to select the
       entry to boot and an editor for the kernel command line.  <b>systemd-boot</b> supports systems with UEFI
       firmware only.

       <b>systemd-boot</b> loads boot entry information from the EFI system partition (ESP), usually mounted at /efi/,
       <a href="file:/boot/">/boot/</a>, or <a href="file:/boot/efi/">/boot/efi/</a> during OS runtime, as well as from the Extended Boot Loader partition (XBOOTLDR) if
       it exists (usually mounted to <a href="file:/boot/">/boot/</a>). Configuration file fragments, kernels, initrds and other EFI
       images to boot generally need to reside on the ESP or the Extended Boot Loader partition. Linux kernels
       must be built with <b>CONFIG_EFI_STUB</b> to be able to be directly executed as an EFI image. During boot
       <b>systemd-boot</b> automatically assembles a list of boot entries from the following sources:

       •   Boot entries defined with <b>Boot</b> <b>Loader</b> <b>Specification</b>[1] Type #1 description files located in
           /loader/entries/ on the ESP and the Extended Boot Loader Partition. These usually describe Linux
           kernel images with associated initrd images, but alternatively may also describe other arbitrary EFI
           executables.

       •   Unified kernel images, <b>Boot</b> <b>Loader</b> <b>Specification</b>[1] Type #2, which are executable EFI binaries in
           /EFI/Linux/ on the ESP and the Extended Boot Loader Partition.

       •   The Microsoft Windows EFI boot manager, if installed.

       •   The Apple macOS boot manager, if installed.

       •   The EFI Shell binary, if installed.

       •   A "Reboot Into Firmware Interface" option, if supported by the UEFI firmware.

       •   Secure Boot variables enrollment if the UEFI firmware is in setup-mode and files are provided on the
           ESP.

       <b>systemd-boot</b> supports the following features:

       •   Basic boot manager configuration changes (such as timeout configuration, default boot entry
           selection, ...) may be made directly from the boot loader UI at boot-time, as well as during system
           runtime with EFI variables.

       •   The boot manager integrates with the <b>systemctl</b> command to implement features such as <b>systemctl</b> <b>reboot</b>
           <b>--boot-loader-entry=...</b>  (for rebooting into a specific boot menu entry, i.e. "reboot into Windows")
           and <b>systemctl</b> <b>reboot</b> <b>--boot-loader-menu=...</b>  (for rebooting into the boot loader menu), by
           implementing the <b>Boot</b> <b>Loader</b> <b>Interface</b>[2]. See <b><a href="../man1/systemctl.1.html">systemctl</a></b>(1) for details.

       •   An EFI variable set by the boot loader informs the OS about the EFI System Partition used during
           boot. This is then used to automatically mount the correct EFI System Partition to /efi/ or <a href="file:/boot/">/boot/</a>
           during OS runtime. See <b><a href="../man8/systemd-gpt-auto-generator.8.html">systemd-gpt-auto-generator</a></b>(8) for details.

       •   The boot manager provides information about the boot time spent in UEFI firmware using the <b>Boot</b>
           <b>Loader</b> <b>Interface</b>[2]. This information can be displayed using <b><a href="../man1/systemd-analyze.1.html">systemd-analyze</a></b>(1).

       •   The boot manager implements boot counting and automatic fallback to older, working boot entries on
           failure. See <b>Automatic</b> <b>Boot</b> <b>Assessment</b>[3].

       •   The boot manager optionally reads a random seed from the ESP partition, combines it with a 'system
           token' stored in a persistent EFI variable and derives a random seed to use by the OS as entropy pool
           initialization, providing a full entropy pool during early boot.

       •   The boot manager allows for Secure Boot variables to be enrolled if the UEFI firmware is in
           setup-mode. Additionally, variables can be automatically enrolled if configured.

       <b><a href="../man1/bootctl.1.html">bootctl</a></b>(1) may be used from a running system to locate the ESP and the Extended Boot Loader Partition,
       list available entries, and install <b>systemd-boot</b> itself.

       <b><a href="../man8/kernel-install.8.html">kernel-install</a></b>(8) may be used to copy kernel images onto the ESP or the Extended Boot Loader Partition
       and to generate description files compliant with the Boot Loader Specification.

       <b><a href="../man7/systemd-stub.7.html">systemd-stub</a></b>(7) may be used as UEFI boot stub for executed kernels, which is useful to show graphical
       boot splashes before transitioning into the Linux world. It is also capable of automatically picking up
       auxiliary credential files (for boot parameterization) and system extension images, as companion files to
       the booted kernel images.

</pre><h4><b>KEY</b> <b>BINDINGS</b></h4><pre>
       The following keys may be used in the boot menu:

       ↑ (Up), ↓ (Down), j, k, PageUp, PageDown, Home, End
           Navigate up/down in the entry list

           Added in version 239.

       ↵ (Enter), → (Right)
           Boot selected entry

           Added in version 239.

       d
           Make selected entry the default

           Added in version 239.

       e
           Edit the kernel command line for selected entry

           Added in version 239.

       +, t
           Increase the timeout before default entry is booted

           Added in version 239.

       -, T
           Decrease the timeout

           Added in version 239.

       r
           Change screen resolution, skipping any unsupported modes.

           Added in version 250.

       R
           Reset screen resolution to firmware or configuration file default.

           Added in version 250.

       p
           Print status

           Added in version 250.

       h, ?, F1
           Show a help screen

           Added in version 239.

       f
           Reboot into firmware interface.

           For compatibility with the keybindings of several firmware implementations this operation may also be
           reached with F2, F10, Del and Esc.

           Added in version 250.

       Shift+o
           Power off the system.

           Added in version 255.

       Shift+b
           Reboot the system.

           Added in version 255.

       The following keys may be pressed during bootup or in the boot menu to directly boot a specific entry:

       l
           Linux

           Added in version 239.

       w
           Windows

           Added in version 239.

       a
           macOS

           Added in version 239.

       s
           EFI shell

           Added in version 239.

       1, 2, 3, 4, 5, 6, 7, 8, 9
           Boot entry number 1 ... 9

           Added in version 239.

       The boot menu is shown when a non-zero menu timeout has been configured. If the menu timeout has been set
       to zero, it is sufficient to press any key — before the boot loader initializes — to bring up the boot
       menu, except for the keys listed immediately above as they directly boot into the selected boot menu
       item. Note that depending on the firmware implementation the time window where key presses are accepted
       before the boot loader initializes might be short. If the window is missed, reboot and try again,
       possibly pressing a suitable key (e.g. the space bar) continuously; on most systems it should be possible
       to hit the time window after a few attempts. To avoid this problem, consider setting a non-zero timeout,
       thus showing the boot menu unconditionally. Some desktop environments might offer an option to directly
       boot into the boot menu, to avoid the problem altogether. Alternatively, use the command line <b>systemctl</b>
       <b>reboot</b> <b>--boot-loader-menu=0</b> from the shell.

       In the editor, most keys simply insert themselves, but the following keys may be used to perform
       additional actions:

       ← (Left), → (Right), Home, End
           Navigate left/right

           Added in version 239.

       Esc, Ctrl+c
           Abort the edit and quit the editor

           Added in version 239.

       Ctrl+k
           Clear the command line forwards

           Added in version 239.

       Ctrl+w, Alt+Backspace
           Delete word backwards

           Added in version 239.

       Ctrl+Del, Alt+d
           Delete word forwards

           Added in version 239.

       ↵ (Enter)
           Boot entry with the edited command line

           Added in version 239.

       Note that unless configured otherwise in the UEFI firmware, systemd-boot will use the US keyboard layout,
       so key labels might not match for keys like +/-.

</pre><h4><b>FILES</b></h4><pre>
       The files <b>systemd-boot</b> processes generally reside on the UEFI ESP which is usually mounted to /efi/,
       <a href="file:/boot/">/boot/</a> or <a href="file:/boot/efi/">/boot/efi/</a> during OS runtime. It also processes files on the Extended Boot Loader partition
       which is typically mounted to <a href="file:/boot/">/boot/</a>, if it exists.

       <b>systemd-boot</b> reads runtime configuration such as the boot timeout and default entry from
       /loader/loader.conf on the ESP (in combination with data read from EFI variables). See <b><a href="../man5/loader.conf.5.html">loader.conf</a></b>(5).

       Boot entry description files following the <b>Boot</b> <b>Loader</b> <b>Specification</b>[1] are read from /loader/entries/ on
       the ESP and the Extended Boot Loader partition.

       Unified kernel boot entries following the <b>Boot</b> <b>Loader</b> <b>Specification</b>[1] are read from /EFI/Linux/ on the
       ESP and the Extended Boot Loader partition.

       Optionally, a random seed for early boot entropy pool provisioning is stored in /loader/random-seed in
       the ESP.

       During initialization, <b>sd-boot</b> automatically loads all driver files placed in the /EFI/systemd/drivers/
       directory of the ESP. The files placed there must have an extension of the EFI architecture ID followed
       by .efi (e.g. for x86-64 this means a suffix of x64.efi). This may be used to automatically load file
       system drivers and similar, to extend the native firmware support.

       Enrollment of Secure Boot variables can be performed manually or automatically if files are available
       under /loader/keys/<u>NAME</u>/{db,dbx,KEK,PK}.auth, <u>NAME</u> being the display name for the set of variables in the
       menu. If one of the sets is named auto then it might be enrolled automatically depending on whether
       "secure-boot-enroll" is set to force or not.

</pre><h4><b>EFI</b> <b>VARIABLES</b></h4><pre>
       The following EFI variables are defined, set and read by <b>systemd-boot</b>, under the vendor UUID
       "4a67b082-0a4c-41cf-b6c7-440b29bb8c4f", for communication between the boot loader and the OS:

       <u>LoaderBootCountPath</u>
           If boot counting is enabled, contains the path to the file in whose name the boot counters are
           encoded. Set by the boot loader.  <b><a href="../man8/systemd-bless-boot.service.8.html">systemd-bless-boot.service</a></b>(8) uses this information to mark a boot
           as successful as determined by the successful activation of the boot-complete.target target unit.

           Added in version 240.

       <u>LoaderConfigTimeout</u>, <u>LoaderConfigTimeoutOneShot</u>
           The menu timeout in seconds. Read by the boot loader.  <u>LoaderConfigTimeout</u> is maintained
           persistently, while <u>LoaderConfigTimeoutOneShot</u> is a one-time override which is read once (in which
           case it takes precedence over <u>LoaderConfigTimeout</u>) and then removed.  <u>LoaderConfigTimeout</u> may be
           manipulated with the t/T keys, see above.

           Added in version 240.

       <u>LoaderConfigConsoleMode</u>
           The numerical menu console mode. Read by the boot loader.  <u>LoaderConfigConsoleMode</u> is maintained
           persistently.  <u>LoaderConfigConsoleMode</u> may be manipulated with the r/R keys, see above.

           Added in version 250.

       <u>LoaderDevicePartUUID</u>
           Contains the partition UUID of the partition the boot loader has been started from on the current
           boot (usually an EFI System Partition). Set by the boot loader. (Note that <b><a href="../man7/systemd-stub.7.html">systemd-stub</a></b>(7) will set
           this too, if not set yet, to support systems that boot directly into a unified kernel image,
           bypassing any boot loader.)  <b><a href="../man8/systemd-gpt-auto-generator.8.html">systemd-gpt-auto-generator</a></b>(8) uses this information to automatically
           find the disk booted from, in order to discover various other partitions on the same disk
           automatically.

           Added in version 220.

       <u>LoaderEntries</u>
           A list of the identifiers of all discovered boot loader entries. Set by the boot loader.

           Added in version 240.

       <u>LoaderEntryDefault</u>, <u>LoaderEntryOneShot</u>
           The identifier of the default boot loader entry. Set primarily by the OS and read by the boot loader.
           <u>LoaderEntryOneShot</u> sets the default entry for the next boot only, while <u>LoaderEntryDefault</u> sets it
           persistently for all future boots.  <b><a href="../man1/bootctl.1.html">bootctl</a></b>(1)'s <b>set-default</b> and <b>set-oneshot</b> commands make use of
           these variables. The boot loader modifies <u>LoaderEntryDefault</u> on request, when the d key is used, see
           above.

           Added in version 240.

       <u>LoaderEntryLastBooted</u>
           The identifier of the boot loader entry last attempted. Set and read by the boot loader, only when
           /loader/loader.conf has default set to "@saved". See <b><a href="../man5/loader.conf.5.html">loader.conf</a></b>(5).

           The boot loader will ensure <u>LoaderEntryLastBooted</u> is up-to date for every boot, updating it as needed
           and will omit changing it all together when <u>LoaderEntryOneShot</u> is set.

           The boot loader reads the variable, which takes higher priority than <u>LoaderEntryDefault</u>. The variable
           is ignored when <u>LoaderEntryOneShot</u> is set.

           <u>LoaderEntryLastBooted</u> cannot be used as indication that the last boot was successful or not.

           Added in version 250.

       <u>LoaderEntrySelected</u>
           The identifier of the boot loader entry currently being booted. Set by the boot loader.

           Added in version 240.

       <u>LoaderFeatures</u>
           A set of flags indicating the features the boot loader supports. Set by the boot loader. Use
           <b><a href="../man1/bootctl.1.html">bootctl</a></b>(1) to view this data.

           Added in version 240.

       <u>LoaderFirmwareInfo</u>, <u>LoaderFirmwareType</u>
           Brief firmware information. Set by the boot loader. Use <b><a href="../man1/bootctl.1.html">bootctl</a></b>(1) to view this data.

           Added in version 240.

       <u>LoaderImageIdentifier</u>
           The file system path to the EFI executable of the boot loader for the current boot, relative to the
           partition's root directory (i.e. relative to the partition indicated by <u>LoaderDevicePartUUID</u>, see
           above). Set by the boot loader. (Note that <b>systemd-stub</b> will set this too, if not set yet, to support
           systems that directly boot into a unified kernel image, bypassing any boot loader.) Use <b><a href="../man1/bootctl.1.html">bootctl</a></b>(1) to
           view this data.

           Added in version 220.

       <u>LoaderInfo</u>
           Brief information about the boot loader. Set by the boot loader. Use <b><a href="../man1/bootctl.1.html">bootctl</a></b>(1) to view this data.

           Added in version 240.

       <u>LoaderTimeExecUSec</u>, <u>LoaderTimeInitUSec</u>, <u>LoaderTimeMenuUsec</u>
           Information about the time spent in various parts of the boot loader. Set by the boot loader. Use
           <b><a href="../man1/systemd-analyze.1.html">systemd-analyze</a></b>(1) to view this data.

           Added in version 240.

       <u>LoaderSystemToken</u>
           A binary random data field, that is used for generating the random seed to pass to the OS (see
           above). Note that this random data is generally only generated once, during OS installation, and is
           then never updated again.

           Added in version 243.

       Many of these variables are defined by the <b>Boot</b> <b>Loader</b> <b>Interface</b>[2].

</pre><h4><b>SMBIOS</b> <b>TYPE</b> <b>11</b> <b>STRINGS</b></h4><pre>
       <b>systemd-boot</b> can be configured using SMBIOS Type 11 strings. Applicable strings consist of a name,
       followed by "=", followed by the value. Unless <b>systemd-boot</b> detects it is running inside a confidential
       computing environment, <b>systemd-boot</b> will search the table for a string with a specific name, and if
       found, use its value. The following strings are read:

       <u>io.systemd.boot.kernel-cmdline-extra</u>
           If set, the value of this string is added to the list of kernel command line arguments for Boot
           Loader Specification Type 1 entries that are measured in PCR12 and passed to the kernel.

           Added in version 256.

</pre><h4><b>BOOT</b> <b>COUNTING</b></h4><pre>
       <b>systemd-boot</b> implements a simple boot counting mechanism on top of the <b>Boot</b> <b>Loader</b> <b>Specification</b>[1], for
       automatic and unattended fallback to older kernel versions/boot loader entries when a specific entry
       continuously fails. Any boot loader entry file and unified kernel image file that contains a "+" followed
       by one or two numbers (if two they need to be separated by a "-"), before the .conf or .efi suffix is
       subject to boot counting: the first of the two numbers ('tries left') is decreased by one on every boot
       attempt, the second of the two numbers ('tries done') is increased by one (if 'tries done' is absent it
       is considered equivalent to 0). Depending on the current value of these two counters the boot entry is
       considered to be in one of three states:

        1. If the 'tries left' counter of an entry is greater than zero the entry is considered to be in
           'indeterminate' state. This means the entry has not completed booting successfully yet, but also has
           not been determined not to work.

        2. If the 'tries left' counter of an entry is zero it is considered to be in 'bad' state. This means no
           further attempts to boot this item will be made (that is, unless all other boot entries are also in
           'bad' state), as all attempts to boot this entry have not completed successfully.

        3. If the 'tries left' and 'tries done' counters of an entry are absent it is considered to be in 'good'
           state. This means further boot counting for the entry is turned off, as it successfully booted at
           least once. The <b><a href="../man8/systemd-bless-boot.service.8.html">systemd-bless-boot.service</a></b>(8) service moves the currently booted entry from
           'indeterminate' into 'good' state when a boot attempt completed successfully.

       Generally, when new entries are added to the boot loader, they first start out in 'indeterminate' state,
       i.e. with a 'tries left' counter greater than zero. The boot entry remains in this state until either it
       managed to complete a full boot successfully at least once (in which case it will be in 'good' state) —
       or the 'tries left' counter reaches zero (in which case it will be in 'bad' state).

       Example: let's say a boot loader entry file foo.conf is set up for 3 boot tries. The installer will hence
       create it under the name foo+3.conf. On first boot, the boot loader will rename it to foo+2-1.conf. If
       that boot does not complete successfully, the boot loader will rename it to foo+1-2.conf on the following
       boot. If that fails too, it will finally be renamed foo+0-3.conf by the boot loader on next boot, after
       which it will be considered 'bad'. If the boot succeeds however the entry file will be renamed to
       foo.conf by the OS, so that it is considered 'good' from then on.

       The boot menu takes the 'tries left' counter into account when sorting the menu entries: entries in 'bad'
       state are ordered at the beginning of the list, and entries in 'good' or 'indeterminate' at the end. The
       user can freely choose to boot any entry of the menu, including those already marked 'bad'. If the menu
       entry to boot is automatically determined, this means that 'good' or 'indeterminate' entries are
       generally preferred (as the bottom item of the menu is the one booted by default), and 'bad' entries will
       only be considered if there are no 'good' or 'indeterminate' entries left.

       The <b><a href="../man8/kernel-install.8.html">kernel-install</a></b>(8) kernel install framework optionally sets the initial 'tries left' counter to the
       value specified in /etc/kernel/tries when a boot loader entry is first created.

</pre><h4><b>USING</b> <b>SYSTEMD-BOOT</b> <b>IN</b> <b>VIRTUAL</b> <b>MACHINES</b></h4><pre>
       When using qemu with OVMF (UEFI Firmware for virtual machines) the <b>-kernel</b> switch works not only for
       linux kernels, but for any EFI binary, including sd-boot and unified linux kernels. Example command line
       for loading <b>systemd-boot</b> on x64:

       <b>qemu-system-x86_64</b> <u>[</u> <u>...</u> <u>]</u> <b>-kernel</b> <b>/usr/lib/systemd/boot/efi/systemd-bootx64.efi</b>

       systemd-boot will detect that it was started directly instead of being loaded from ESP and will search
       for the ESP in that case, taking into account boot order information from the hypervisor (if available).

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man1/bootctl.1.html">bootctl</a></b>(1), <b><a href="../man5/loader.conf.5.html">loader.conf</a></b>(5), <b><a href="../man8/systemd-bless-boot.service.8.html">systemd-bless-boot.service</a></b>(8), <b><a href="../man8/systemd-boot-random-seed.service.8.html">systemd-boot-random-seed.service</a></b>(8), <b><a href="../man8/kernelinstall.8.html">kernel-</a></b>
       <b><a href="../man8/kernelinstall.8.html">install</a></b>(8), <b><a href="../man7/systemd-stub.7.html">systemd-stub</a></b>(7), <b>Boot</b> <b>Loader</b> <b>Specification</b>[1], <b>Boot</b> <b>Loader</b> <b>Interface</b>[2], <b>TPM2</b> <b>PCR</b>
       <b>Measurements</b> <b>Made</b> <b>by</b> <b>systemd</b>[4]

</pre><h4><b>NOTES</b></h4><pre>
        1. Boot Loader Specification
           https://uapi-group.org/specifications/specs/boot_loader_specification

        2. Boot Loader Interface
           https://systemd.io/BOOT_LOADER_INTERFACE

        3. Automatic Boot Assessment
           https://systemd.io/AUTOMATIC_BOOT_ASSESSMENT

        4. TPM2 PCR Measurements Made by systemd
           https://systemd.io/TPM2_PCR_MEASUREMENTS

systemd 257.7                                                                                    <u><a href="../man7/SYSTEMD-BOOT.7.html">SYSTEMD-BOOT</a></u>(7)
</pre>
 </div>
</div></section>
</div>
</body>
</html>