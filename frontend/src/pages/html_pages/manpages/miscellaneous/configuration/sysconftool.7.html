<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>sysconftool - format of configuration files installed by sysconftool</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/sysconftool">sysconftool_0.21-1build1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       sysconftool - format of configuration files installed by sysconftool

</pre><h4><b>SYNOPSIS</b></h4><pre>
          #
          ##VERSION: $Id$

          ##NAME: configname1:configname1version
          #
          # Description

          SETTING1=VALUE1

          ##NAME: configname2:configname2version
          #
          # Description

          SETTING2=VALUE2

          ...

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This manual page describes the format of configuration files installed by <b><a href="../man1/sysconftool.1.html">sysconftool</a></b>(1)[1]. This format
       is flexible enough to accommodate any kind of application configuration file format.  <b>sysconftool</b> makes
       four assumptions about the configuration file:

        1. It is a plain text file.

        2. Lines that begin with a single '#' character are comments that contain a description of the following
           configuration setting.

        3. Lines that do not begin with the '#' character contain the configuration setting described by the
           previous comment lines.

        4. Configuration settings are self contained, and completely independent, changing one configuration
           setting never requires that another, different, configuration setting must be changed too (perhaps
           any logical conflicts are automatically resolved by the application in a safe, fallback, manner)

       The additional information used by <b>sysconftool</b> is encoded as specially-formatted comment lines that begin
       with two '#' characters.

</pre><h4><b>FILENAMES</b></h4><pre>
       An application installs a default configuration file as "filename.dist", when the actual name of the
       configuration file is really "filename". If there is no existing filename, <b>sysconftool</b> simply copies
       filename.dist to filename, and calls it a day. Otherwise, <b>sysconftool</b> copies the existing filename to
       filename.bak and creates a new filename based on the contents of both files.

       <b>sysconftool</b> is designed to solve a common problem with application configuration. New versions of
       applications often include additional functionality that requires new configuration settings. Without the
       new configuration settings the application will not work, so new configuration files should be installed
       during the upgrade. However, when that happens, any changes to the existing configuration settings are
       lost.  <b>sysconftool</b> is designed to solve this dillemma, and merge old configuration settings with new
       ones.  <b>sysconftool</b> is designed in a fail-safe way. Whenever there's a doubt as to what's The Right Thing
       To Do, <b>sysconftool</b> will use the configuration settings from the new file, that are supposedly known to be
       good, and leave it up to a physical being to sort out any conflicts and make any manual decisions.

</pre><h4><b>FILE</b> <b>VERSIONING</b></h4><pre>
       The following line should appear at the beginning of filename.dist:

              ##VERSION: <u>version</u>

       This doesn't have to be the very first line in filename.dist, but it should appear somewhere within the
       first twenty lines, right before the first configuration setting. "version" should be some kind of an
       identifier for this particular version of the configuration files. All that <b>sysconftool</b> cares about is
       that any change to the default configuration, in filename.dist, results in a different <u>version</u>. An
       excellent way to do this is to simply use the $Id$ RCS/CVS version identification strings, and have this
       little detail taken care of automatically.

       New revisions of an application should not necessarily have a new configuration file <u>version</u>. If the
       default application configuration settings have not changed from the previous release, <u>version</u> can remain
       the same.  <u>version</u> is copied from filename.dist to filename.

       If there's an existing filename, and it includes the same <u>version</u> identifier, <b>sysconftool</b> silently skips
       over this configuration file, and doesn't do anything, assuming that this configuration file has already
       been installed. Therefore, running <b>sysconftool</b> more than once (accidentally) will not break anything.

       If there's an existing filename, but it's <u>version</u> is different, <b>sysconftool</b> backs it up to filename.bak,
       then creates a new filename. If there's an existing filename, but it doesn't contain a recognizable
       "##VERSION: <u>version</u>" line, <b>sysconftool</b> assumes that the previous version of the application did not use
       the <b>sysconftool</b> tool. That's not a problem.  filename is copied to filename.bak, and filename.dist gets
       installed as the new filename, allowing <b>sysconftool</b> to work with the next version of this configuration
       file.

</pre><h4><b>CONFIGURATION</b> <b>SETTING</b> <b>VERSIONING</b></h4><pre>
       Each configuration setting uses the following format in the configuration file:

              ##NAME: <u>name</u>:<u>revision</u>
              #
              # <u>description</u>

              <u>setting</u>

       <b>sysconftool</b> looks for a line that begins with "##NAME". This line gives the name and the revision of the
       following setting.  <u>name</u> must be unique within its configuration file (the same <u>name</u> can be used by
       different configuration files, <b>sysconftool</b> works with one file at a time).  <u>revision</u> is used by
       <b>sysconftool</b> to decide when the configuration setting can be safely carried over from an older
       configuration file, and when it is better to reinstall the default setting from the new configuration
       file.

       One or more comment lines - lines that begin with the '#' character - may follow "##NAME". The first line
       that does not begin with '#' is considered to be the first line that contains the value of the
       configuration setting, which lasts. The value can be spread over multiple lines. The configuration
       setting is considered to last until either the end of the file, or until the first following line that
       begins with another "##NAME".

       Aside from that, <b>sysconftool</b> does not care how the configuration setting is represented. It can be
       "NAME=VALUE", it can be "NAME: VALUE", or "NAME&lt;tab&gt;VALUE", it can even be a base64-encoded binary
       object, and it can always have leading or trailing blank lines.  <b>sysconftool</b> merely looks at which lines
       begin with the '#' comment character. After the '##NAME:' line, <b>sysconftool</b> looks ahead until the first
       line that does not begin with '#', and that's the first line of the configuration setting. Then,
       <b>sysconftool</b> looks ahead until the next line that starts with a "##NAME:", which marks the end of this
       configuration setting.

       For this reason it is important that all commented description lines that follow '##NAME:' must begin
       with the '#' character. If a blank line follows the line with '##NAME:' it is assumed to be the start of
       the corresponding configuration setting. For example, this is correct:

              ##NAME: flag1:0
              #
              #
              # This is the first configuration flag
              #

              flag1=1

       This is not correct:

              ##NAME: flag1:0

              #
              # This is the first configuration flag
              #

              flag1=1

</pre><h4><b>CONFIGURATION</b> <b>FILE</b> <b>CREATION</b></h4><pre>
       A new configuration file, "filename", is created from its previous version, "filename.bak" and the new
       default configuration file, "filename.dist", using the following, simple, two-step process.

        1. <b>sysconftool</b> begins with filename.dist in hand. This makes sure that <b>sysconftool</b> begins with a good,
           known, default configuration file.

        2. <b>sysconftool</b> then takes each configuration setting in filename.dist, then searches filename.bak. If it
           finds a configuration setting that has an identical "<u>name</u>" and "<u>version</u>", then the corresponding
           configuration setting value is taken from filename.bak, replacing the default in filename.dist. After
           all configuration settings in filename.dist are looked up (and potentially replaced), what's left
           becomes the new filename.

</pre><h4><b>THE</b> <b>END</b> <b>RESULT</b></h4><pre>
       The above process is a logical description. The actual technical implementation is slightly different
       (for example, filename is not backed up to filename.bak until the new configuration file has been already
       created), but is logically equivalent to this process. This process carries a number of consequences that
       must be considered.

       If a new application revision needs a new configuration setting, it will get a new <u>name</u> and <u>version</u>.
       Since filename.dist is used as a starting point for the new configuration file, the new configuration
       file will include the new configuration setting. When a configuration setting is removed, it will
       disappear from the new configuration file for the same exact reason.

</pre><h4><b>CONFIGURATION</b> <b>SETTING</b> <b>VERSION</b></h4><pre>
       <b>sysconftool</b> looks at both <u>name</u> and <u>version</u>. A configuration setting with the same <u>name</u> but different
       <u>version</u>s are seen by <b>sysconftool</b> as completely different settings. The existence of <u>version</u> allows a
       finer-grained control of configuration upgrades, as described below.

       <b>sysconftool</b> copies setting values with the same <u>name</u> and <u>version</u> from the old configuration file to the
       new configuration file. However, the associated descriptive comments are not copied, and are taken from
       the new filename.dist. Therefore, if a new version of the configuration file contains an updated or an
       embellished description of a particular setting, it will be included in the new configuration file, but
       the existing configuration value will be preserved! Generally, if a configuration setting does not change
       its meaning or function, its <u>name</u> and <u>version</u> should remain the same. Its comments can be edited to fix a
       typo, or revised in a more substantive fashion.  <u>Name</u> and <u>version</u> should only be changed if there's a
       functional change in the configuration setting.

       What to do with <u>name</u> and <u>version</u> after a functional change depends on the nature and the magnitude of the
       change. The nature and the magnitude of the change must be considered not only with respect to the most
       recent revision of the application, but to all the previous revisions as well. When in doubt, go based
       upon the largest change in magnitude, in order to guarantee a functional default setting, from
       filename.dist, and leave it up to a living being to manually figure it out.

       If only the default value of a setting should be changed for new application installation, but the
       existing installations can continue to use the existing value of the setting, both the <u>name</u> and <u>version</u>
       should be left alone. Existing configuration settings will be preserved, and new installations will get
       the new default. The descriptive comment of this setting can be updated too (see above).

       This should be done only as long as <u>ALL</u> previous values of this configuration setting will ALWAYS be
       valid in the new application revision. If some possible values of this configuration setting will no
       longer be valid, <u>version</u> should be changed.  <b>sysconftool</b> does not care how <u>name</u> and <u>version</u> are
       formatted. Both are opaque labels. The only requirements is for the label to be different. The difference
       between changing <u>version</u> and changing both <u>name</u> and <u>version</u> is this:

       If there's an old configuration setting with the same <u>name</u> but different <u>version</u>, <b>sysconftool</b> will still
       use the new, safe, default value from filename.dist, however <b>sysconftool</b> will also append an additional
       comment, on its own accord, reminding the reader that this configuration value has been reset, and the
       reader should consider whether to manually restore the configuration value from the old configuration.

</pre><h4><b>MISCELLANEA</b></h4><pre>
       When <b>sysconftool</b> decides to keep an existing setting, with the same <u>name</u> and <u>value</u>, it will also insert a
       short comment to that effect, reminding the reader to check the default in filename.dist.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man1/sysconftool.1.html">sysconftool</a></b>(1)[1].

</pre><h4><b>AUTHORS</b></h4><pre>
       <b>Double</b> <b>Precision,</b> <b>Inc.</b>

</pre><h4><b>NOTES</b></h4><pre>
        1. <b><a href="../man1/sysconftool.1.html">sysconftool</a></b>(1)
           [set $man.base.url.for.relative.links]/sysconftool.1.html

Courier Mail Server                                10/28/2019                                     <u><a href="../man7/SYSCONFTOOL.7.html">SYSCONFTOOL</a></u>(7)
</pre>
 </div>
</div></section>
</div>
</body>
</html>