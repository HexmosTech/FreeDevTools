<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>zpool-features — description of ZFS pool features</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/zfsutils-linux">zfsutils-linux_2.3.2-1ubuntu3_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       zpool-features — description of ZFS pool features

</pre><h4><b>DESCRIPTION</b></h4><pre>
       ZFS  pool  on-disk  format  versions  are  specified  via “features” which replace the old on-disk format
       numbers (the last supported on-disk format number is 28).  To enable a feature on a pool  use  the  <b>zpool</b>
       <b>upgrade</b>, or set the <b>feature</b>@<u>feature-name</u> property to <b>enabled</b>.  Please also see the “Compatibility feature
       sets” section for information on how sets of features may be enabled together.

       The  pool  format  does  not affect file system version compatibility or the ability to send file systems
       between pools.

       Since most features can be enabled independently of each  other,  the  on-disk  format  of  the  pool  is
       specified  by  the  set of all features marked as <b>active</b> on the pool.  If the pool was created by another
       software version this set may include unsupported features.

   <b>Identifying</b> <b>features</b>
       Every feature has a GUID of the form <u>com.example</u>:<u>feature-name</u>.  The reversed DNS name  ensures  that  the
       feature's  GUID is unique across all ZFS implementations.  When unsupported features are encountered on a
       pool they will be identified by their GUIDs.  Refer to the documentation for the ZFS implementation  that
       created the pool for information about those features.

       Each supported feature also has a short name.  By convention a feature's short name is the portion of its
       GUID  which  follows  the  ‘:’  (i.e.   <u>com.example</u>:<u>feature-name</u> would have the short name <u>feature-name</u>),
       however a feature's short name may differ across ZFS implementations if following  the  convention  would
       result in name conflicts.

   <b>Feature</b> <b>states</b>
       Features can be in one of three states:

       <b>active</b>    This  feature's  on-disk format changes are in effect on the pool.  Support for this feature is
                 required to import the pool in read-write mode.  If this feature is not  read-only  compatible,
                 support is also required to import the pool in read-only mode (see “Read-only compatibility”).

       <b>enabled</b>   An  administrator  has  marked  this  feature as enabled on the pool, but the feature's on-disk
                 format changes have not been made yet.  The pool can still be imported by  software  that  does
                 not  support this feature, but changes may be made to the on-disk format at any time which will
                 move the feature to the <b>active</b> state.  Some features may support returning to the <b>enabled</b> state
                 after becoming <b>active</b>.  See feature-specific documentation for details.

       <b>disabled</b>  This feature's on-disk format changes have not been  made  and  will  not  be  made  unless  an
                 administrator  moves  the  feature to the <b>enabled</b> state.  Features cannot be disabled once they
                 have been enabled.

       The state of supported features is exposed through pool properties of the form <b>feature</b>@<u>short-name</u>.

   <b>Read-only</b> <b>compatibility</b>
       Some features may make on-disk format changes that do not interfere with other software's ability to read
       from the pool.  These features are referred to as “read-only compatible”.  If all unsupported features on
       a pool are read-only compatible, the pool can be imported in  read-only  mode  by  setting  the  <b>readonly</b>
       property during import (see <u><a href="../man8/zpool-import.8.html">zpool-import</a></u>(8) for details on importing pools).

   <b>Unsupported</b> <b>features</b>
       For  each unsupported feature enabled on an imported pool, a pool property named <b>unsupported</b>@<u>feature-name</u>
       will indicate why the import was allowed despite the  unsupported  feature.   Possible  values  for  this
       property are:

       <b>inactive</b>  The feature is in the <b>enabled</b> state and therefore the pool's on-disk format is still compatible
                 with software that does not support this feature.

       <b>readonly</b>  The feature is read-only compatible and the pool has been imported in read-only mode.

   <b>Feature</b> <b>dependencies</b>
       Some  features  depend  on  other  features  being enabled in order to function.  Enabling a feature will
       automatically enable any features it depends on.

   <b>Compatibility</b> <b>feature</b> <b>sets</b>
       It is sometimes necessary for a pool to  maintain  compatibility  with  a  specific  on-disk  format,  by
       enabling  and  disabling  particular  features.   The  <b>compatibility</b> feature facilitates this by allowing
       feature sets to be read from text files.  When set to <b>off</b> (the default), compatibility feature  sets  are
       disabled  (i.e.  all  features  are enabled); when set to <b>legacy</b>, no features are enabled.  When set to a
       comma-separated list of filenames (each  filename  may  either  be  an  absolute  path,  or  relative  to
       <u>/etc/zfs/compatibility.d</u>  or  <u>/usr/share/zfs/compatibility.d</u>),  the  lists of requested features are read
       from those files, separated by whitespace and/or commas.  Only features present in all files are enabled.

       Simple sanity checks are applied to the files: they must be between 1 B and 16 KiB in size, and must  end
       with a newline character.

       The  requested  features  are  applied  when  a pool is created using <b>zpool</b> <b>create</b> <b>-o</b> <b>compatibility</b>=<u>…</u> and
       controls which features are enabled when using <b>zpool</b> <b>upgrade</b>.  <b>zpool</b> <b>status</b> will not show a warning about
       disabled features which are not part of the requested feature set.

       The special value <b>legacy</b> prevents any features from being enabled, either via <b>zpool</b> <b>upgrade</b> or <b>zpool</b>  <b>set</b>
       <b>feature</b>@<u>feature-name</u>=<b>enabled</b>.   This  setting  also  prevents  pools from being upgraded to newer on-disk
       versions.  This is a safety measure to prevent new features from  being  accidentally  enabled,  breaking
       compatibility.

       By  convention,  compatibility  files in <u>/usr/share/zfs/compatibility.d</u> are provided by the distribution,
       and include feature sets supported by important versions  of  popular  distributions,  and  feature  sets
       commonly  supported  at  the  start  of  each  year.  Compatibility files in <u>/etc/zfs/compatibility.d</u>, if
       present, will take precedence over files with the same name in <u>/usr/share/zfs/compatibility.d</u>.

       If an unrecognized feature is found in these files, an error message will be shown.  If the  unrecognized
       feature  is  in a file in <u>/etc/zfs/compatibility.d</u>, this is treated as an error and processing will stop.
       If the unrecognized feature is under <u>/usr/share/zfs/compatibility.d</u>, this is treated  as  a  warning  and
       processing  will continue.  This difference is to allow distributions to include features which might not
       be recognized by the currently-installed binaries.

       Compatibility files may include comments: any text from ‘#’ to the end of the line is ignored.

       <b>Example</b>:
           example# <b>cat</b> <u>/usr/share/zfs/compatibility.d/grub2</u>
           # Features which are supported by GRUB2 versions from v2.12 onwards.
           allocation_classes
           async_destroy
           block_cloning
           bookmarks
           device_rebuild
           embedded_data
           empty_bpobj
           enabled_txg
           extensible_dataset
           filesystem_limits
           hole_birth
           large_blocks
           livelist
           log_spacemap
           lz4_compress
           project_quota
           resilver_defer
           spacemap_histogram
           spacemap_v2
           userobj_accounting
           zilsaxattr
           zpool_checkpoint

           example# <b>cat</b> <u>/usr/share/zfs/compatibility.d/grub2-2.06</u>
           # Features which are supported by GRUB2 versions prior to v2.12.
           #
           # GRUB is not able to detect ZFS pool if snapshot of top level boot pool
           # is created. This issue is observed with GRUB versions before v2.12 if
           # extensible_dataset feature is enabled on ZFS boot pool.
           #
           # This file lists all read-only compatible features except
           # extensible_dataset and any other feature that depends on it.
           #
           allocation_classes
           async_destroy
           block_cloning
           device_rebuild
           embedded_data
           empty_bpobj
           enabled_txg
           hole_birth
           log_spacemap
           lz4_compress
           resilver_defer
           spacemap_histogram
           spacemap_v2
           zpool_checkpoint

           example# <b>zpool</b> <b>create</b> <b>-o</b> <b>compatibility</b>=<u>grub2</u> <u>bootpool</u> <u>vdev</u>

       See <u><a href="../man8/zpool-create.8.html">zpool-create</a></u>(8) and <u><a href="../man8/zpool-upgrade.8.html">zpool-upgrade</a></u>(8) for more information on  how  these  commands  are  affected  by
       feature sets.

</pre><h4><b>FEATURES</b></h4><pre>
       The following features are supported on this system:

       <b>allocation_classes</b>
               GUID                  <b>org.zfsonlinux:allocation_classes</b>
               READ-ONLY COMPATIBLE  yes

               This feature enables support for separate allocation classes.

               This  feature becomes <b>active</b> when a dedicated allocation class vdev (dedup or special) is created
               with the <b>zpool</b> <b>create</b> or <b>zpool</b> <b>add</b> commands.  With device removal, it  can  be  returned  to  the
               <b>enabled</b> state if all the dedicated allocation class vdevs are removed.

       <b>async_destroy</b>
               GUID                  <b>com.delphix:async_destroy</b>
               READ-ONLY COMPATIBLE  yes

               Destroying a file system requires traversing all of its data in order to return its used space to
               the  pool.   Without <b>async_destroy</b>, the file system is not fully removed until all space has been
               reclaimed.  If the destroy operation is interrupted by a reboot or power outage, the next attempt
               to open the pool will need to complete the destroy operation synchronously.

               When <b>async_destroy</b> is enabled, the file system's data will be reclaimed by a background  process,
               allowing  the  destroy  operation  to  complete  without  traversing the entire file system.  The
               background process is able to resume  interrupted  destroys  after  the  pool  has  been  opened,
               eliminating the need to finish interrupted destroys as part of the open operation.  The amount of
               space  remaining  to  be  reclaimed  by  the  background process is available through the <b>freeing</b>
               property.

               This feature is only <b>active</b> while <b>freeing</b> is non-zero.

       <b>blake3</b>
               GUID                  <b>org.openzfs:blake3</b>
               DEPENDENCIES          <b>extensible_dataset</b>
               READ-ONLY COMPATIBLE  no

               This feature enables the use of the BLAKE3 hash algorithm for checksum and dedup.   BLAKE3  is  a
               secure hash algorithm focused on high performance.

               When  the  <b>blake3</b> feature is set to <b>enabled</b>, the administrator can turn on the <b>blake3</b> checksum on
               any dataset using <b>zfs</b> <b>set</b> <b>checksum</b>=<b>blake3</b> <u>dset</u> (see <u><a href="../man8/zfs-set.8.html">zfs-set</a></u>(8)).   This  feature  becomes  <b>active</b>
               once  a  <b>checksum</b>  property  has  been  set  to <b>blake3</b>, and will return to being <b>enabled</b> once all
               filesystems that have ever had their checksum set to <b>blake3</b> are destroyed.

       <b>block_cloning</b>
               GUID                  <b>com.fudosecurity:block_cloning</b>
               READ-ONLY COMPATIBLE  yes

               When this feature is enabled ZFS will use block cloning for operations  like  <b>copy_file_range</b>(<u>2</u>).
               Block  cloning  allows  to  create multiple references to a single block.  It is much faster than
               copying the data (as the actual data is neither read nor written) and takes no additional  space.
               Blocks  can  be  cloned  across  datasets  under some conditions (like equal <b>recordsize</b>, the same
               master encryption key, etc.).  ZFS tries its best to clone across  datasets  including  encrypted
               ones.  This is limited for various (nontrivial) reasons depending on the OS and/or ZFS internals.

               This  feature becomes <b>active</b> when first block is cloned.  When the last cloned block is freed, it
               goes back to the enabled state.

       <b>bookmarks</b>
               GUID                  <b>com.delphix:bookmarks</b>
               DEPENDENCIES          <b>extensible_dataset</b>
               READ-ONLY COMPATIBLE  yes

               This feature enables use of the <b>zfs</b> <b>bookmark</b> command.

               This feature is <b>active</b> while any bookmarks exist in the pool.  All bookmarks in the pool  can  be
               listed by running <b>zfs</b> <b>list</b> <b>-t</b> <b>bookmark</b> <b>-r</b> <u>poolname</u>.

       <b>bookmark_v2</b>
               GUID                  <b>com.datto:bookmark_v2</b>
               DEPENDENCIES          <b>bookmark</b>, <b>extensible_dataset</b>
               READ-ONLY COMPATIBLE  no

               This  feature  enables the creation and management of larger bookmarks which are needed for other
               features in ZFS.

               This feature becomes <b>active</b> when a v2 bookmark is created and will be  returned  to  the  <b>enabled</b>
               state when all v2 bookmarks are destroyed.

       <b>bookmark_written</b>
               GUID                  <b>com.delphix:bookmark_written</b>
               DEPENDENCIES          <b>bookmark</b>, <b>extensible_dataset</b>, <b>bookmark_v2</b>
               READ-ONLY COMPATIBLE  no

               This  feature  enables  additional  bookmark  accounting  fields,  enabling  the <b>written</b>#<u>bookmark</u>
               property (space written since a bookmark) and estimates of send  stream  sizes  for  incrementals
               from bookmarks.

               This  feature becomes <b>active</b> when a bookmark is created and will be returned to the <b>enabled</b> state
               when all bookmarks with these fields are destroyed.

       <b>device_rebuild</b>
               GUID                  <b>org.openzfs:device_rebuild</b>
               READ-ONLY COMPATIBLE  yes

               This feature enables the ability for the <b>zpool</b> <b>attach</b>  and  <b>zpool</b>  <b>replace</b>  commands  to  perform
               sequential reconstruction (instead of healing reconstruction) when resilvering.

               Sequential  reconstruction  resilvers  a  device  in  LBA order without immediately verifying the
               checksums.  Once complete, a scrub is started, which then verifies the checksums.  This  approach
               allows  full redundancy to be restored to the pool in the minimum amount of time.  This two-phase
               approach will take longer than a healing resilver when  the  time  to  verify  the  checksums  is
               included.  However, unless there is additional pool damage, no checksum errors should be reported
               by  the  scrub.   This  feature  is incompatible with raidz configurations.  This feature becomes
               <b>active</b> while a sequential resilver is in progress, and  returns  to  <b>enabled</b>  when  the  resilver
               completes.

       <b>device_removal</b>
               GUID                  <b>com.delphix:device_removal</b>
               READ-ONLY COMPATIBLE  no

               This  feature  enables  the  <b>zpool</b>  <b>remove</b>  command to remove top-level vdevs, evacuating them to
               reduce the total size of the pool.

               This feature becomes <b>active</b> when the <b>zpool</b> <b>remove</b> command is used on a top-level vdev,  and  will
               never return to being <b>enabled</b>.

       <b>draid</b>
               GUID                  <b>org.openzfs:draid</b>
               READ-ONLY COMPATIBLE  no

               This  feature  enables  use  of the <b>draid</b> vdev type.  dRAID is a variant of RAID-Z which provides
               integrated distributed hot spares that allow faster resilvering while retaining the  benefits  of
               RAID-Z.   Data, parity, and spare space are organized in redundancy groups and distributed evenly
               over all of the devices.

               This feature becomes <b>active</b> when creating a pool which uses the <b>draid</b> vdev type, or when adding a
               new <b>draid</b> vdev to an existing pool.

       <b>edonr</b>
               GUID                  <b>org.illumos:edonr</b>
               DEPENDENCIES          <b>extensible_dataset</b>
               READ-ONLY COMPATIBLE  no

               This feature enables the use of the Edon-R hash algorithm for checksum,  including  for  nopwrite
               (if  compression  is  also enabled, an overwrite of a block whose checksum matches the data being
               written will be ignored).  In an abundance of caution, Edon-R  requires  verification  when  used
               with dedup: <b>zfs</b> <b>set</b> <b>dedup</b>=<b>edonr</b>,<b>verify</b> (see <u><a href="../man8/zfs-set.8.html">zfs-set</a></u>(8)).

               Edon-R is a very high-performance hash algorithm that was part of the NIST SHA-3 competition.  It
               provides  extremely  high  hash performance (over 350% faster than SHA-256), but was not selected
               because of its unsuitability as a general purpose secure  hash  algorithm.   This  implementation
               utilizes  the new salted checksumming functionality in ZFS, which means that the checksum is pre-
               seeded with a secret 256-bit random key (stored on the pool) before being fed the data  block  to
               be  checksummed.   Thus  the  produced  checksums  are  unique  to  a given pool, preventing hash
               collision attacks on systems with dedup.

               When the <b>edonr</b> feature is set to <b>enabled</b>, the administrator can turn on the <b>edonr</b> checksum on any
               dataset using <b>zfs</b> <b>set</b> <b>checksum</b>=<b>edonr</b> <u>dset</u> (see <u><a href="../man8/zfs-set.8.html">zfs-set</a></u>(8)).  This feature becomes <b>active</b>  once  a
               <b>checksum</b>  property  has  been set to <b>edonr</b>, and will return to being <b>enabled</b> once all filesystems
               that have ever had their checksum set to <b>edonr</b> are destroyed.

       <b>embedded_data</b>
               GUID                  <b>com.delphix:embedded_data</b>
               READ-ONLY COMPATIBLE  no

               This feature improves the  performance  and  compression  ratio  of  highly-compressible  blocks.
               Blocks whose contents can compress to 112 bytes or smaller can take advantage of this feature.

               When  this feature is enabled, the contents of highly-compressible blocks are stored in the block
               “pointer” itself (a misnomer in this case, as it contains the  compressed  data,  rather  than  a
               pointer  to its location on disk).  Thus the space of the block (one sector, typically 512 B or 4
               KiB) is saved, and no additional I/O is needed to read and write the data  block.   This  feature
               becomes <b>active</b> as soon as it is enabled and will never return to being <b>enabled</b>.

       <b>empty_bpobj</b>
               GUID                  <b>com.delphix:empty_bpobj</b>
               READ-ONLY COMPATIBLE  yes

               This  feature  increases  the  performance of creating and using a large number of snapshots of a
               single filesystem or volume, and also reduces the disk space required.

               When there are many snapshots, each snapshot uses many Block Pointer Objects  (bpobjs)  to  track
               blocks  associated  with  that  snapshot.  However, in common use cases, most of these bpobjs are
               empty.  This feature allows us to create each bpobj on-demand, thus eliminating the empty bpobjs.

               This feature is <b>active</b> while there are any filesystems, volumes, or snapshots which were  created
               after enabling this feature.

       <b>enabled_txg</b>
               GUID                  <b>com.delphix:enabled_txg</b>
               READ-ONLY COMPATIBLE  yes

               Once  this feature is enabled, ZFS records the transaction group number in which new features are
               enabled.  This has no user-visible impact, but other features may depend on this feature.

               This feature becomes <b>active</b> as soon as it is enabled and will never return to being <b>enabled</b>.

       <b>encryption</b>
               GUID                  <b>com.datto:encryption</b>
               DEPENDENCIES          <b>bookmark_v2</b>, <b>extensible_dataset</b>
               READ-ONLY COMPATIBLE  no

               This feature enables the creation and management of natively encrypted datasets.

               This feature becomes <b>active</b> when an encrypted dataset is created and  will  be  returned  to  the
               <b>enabled</b> state when all datasets that use this feature are destroyed.

       <b>fast_dedup</b>
               GUID                  <b>com.klarasystems:fast_dedup</b>
               READ-ONLY COMPATIBLE  yes

               This feature allows more advanced deduplication features to be enabled on new dedup tables.

               This  feature will be <b>active</b> when the first deduplicated block is written after a new dedup table
               is created (i.e. after a new pool creation,  or  new  checksum  used  on  a  dataset  with  <b>dedup</b>
               enabled).   It  will  be  returned to the <b>enabled</b> state when all deduplicated blocks using it are
               freed.

       <b>extensible_dataset</b>
               GUID                  <b>com.delphix:extensible_dataset</b>
               READ-ONLY COMPATIBLE  no

               This feature allows more flexible use of internal ZFS  data  structures,  and  exists  for  other
               features to depend on.

               This feature will be <b>active</b> when the first dependent feature uses it, and will be returned to the
               <b>enabled</b> state when all datasets that use this feature are destroyed.

       <b>filesystem_limits</b>
               GUID                  <b>com.joyent:filesystem_limits</b>
               DEPENDENCIES          <b>extensible_dataset</b>
               READ-ONLY COMPATIBLE  yes

               This  feature  enables  filesystem  and snapshot limits.  These limits can be used to control how
               many filesystems and/or snapshots can be created at the point in the tree on which the limits are
               set.

               This feature is <b>active</b> once either of the limit properties has been set on  a  dataset  and  will
               never return to being <b>enabled</b>.

       <b>head_errlog</b>
               GUID                  <b>com.delphix:head_errlog</b>
               READ-ONLY COMPATIBLE  no

               This  feature  enables the upgraded version of errlog, which required an on-disk error log format
               change.  Now the error log of each head dataset is stored separately in the zap object and  keyed
               by the head id.  With this feature enabled, every dataset affected by an error block is listed in
               the output of <b>zpool</b> <b>status</b>.  In case of encrypted filesystems with unloaded keys we are unable to
               check  their  snapshots  or clones for errors and these will not be reported.  An "access denied"
               error will be reported.

               This feature becomes <b>active</b> as soon as it is enabled and will never return to being <b>enabled</b>.

       <b>hole_birth</b>
               GUID                  <b>com.delphix:hole_birth</b>
               DEPENDENCIES          <b>enabled_txg</b>
               READ-ONLY COMPATIBLE  no

               This feature has/had bugs, the result of which is that, if you do a <b>zfs</b> <b>send</b> <b>-i</b> (or <b>-R</b>, since  it
               uses <b>-i</b>) from an affected dataset, the receiving party will not see any checksum or other errors,
               but  the  resulting  destination  snapshot will not match the source.  Its use by <b>zfs</b> <b>send</b> <b>-i</b> has
               been disabled by default (see <b>send_holes_without_birth_time</b> in <u><a href="../man4/zfs.4.html">zfs</a></u>(4)).

               This feature improves performance of incremental sends (<b>zfs</b> <b>send</b> <b>-i</b>)  and  receives  for  objects
               with many holes.  The most common case of hole-filled objects is zvols.

               An  incremental  send stream from snapshot <b>A</b> to snapshot <b>B</b> contains information about every block
               that changed between <b>A</b> and <b>B</b>.  Blocks which  did  not  change  between  those  snapshots  can  be
               identified  and  omitted from the stream using a piece of metadata called the “block birth time”,
               but birth times are not recorded for holes (blocks filled only with zeroes).  Since holes created
               after <b>A</b> cannot be distinguished from holes created before <b>A</b>, information about every hole in  the
               entire filesystem or zvol is included in the send stream.

               For  workloads  where  holes  are  rare  this  is  not  a  problem.   However, when incrementally
               replicating filesystems or zvols with many holes (for  example  a  zvol  formatted  with  another
               filesystem) a lot of time will be spent sending and receiving unnecessary information about holes
               that already exist on the receiving side.

               Once  the  <b>hole_birth</b>  feature  has  been  enabled the block birth times of all new holes will be
               recorded.  Incremental sends between snapshots created after this feature  is  enabled  will  use
               this  new  metadata  to avoid sending information about holes that already exist on the receiving
               side.

               This feature becomes <b>active</b> as soon as it is enabled and will never return to being <b>enabled</b>.

       <b>large_blocks</b>
               GUID                  <b>org.open-zfs:large_blocks</b>
               DEPENDENCIES          <b>extensible_dataset</b>
               READ-ONLY COMPATIBLE  no

               This feature allows the record size on a dataset to be set larger than 128 KiB.

               This feature becomes <b>active</b> once a dataset contains a file with a block size larger than 128 KiB,
               and will return to being <b>enabled</b> once all filesystems that have ever had their recordsize  larger
               than 128 KiB are destroyed.

       <b>large_dnode</b>
               GUID                  <b>org.zfsonlinux:large_dnode</b>
               DEPENDENCIES          <b>extensible_dataset</b>
               READ-ONLY COMPATIBLE  no

               This  feature  allows  the size of dnodes in a dataset to be set larger than 512 B.  This feature
               becomes <b>active</b> once a dataset contains an object with a dnode larger than 512 B, which occurs  as
               a  result  of  setting  the <b>dnodesize</b> dataset property to a value other than <b>legacy</b>.  The feature
               will return to being <b>enabled</b> once all filesystems that have ever contained a  dnode  larger  than
               512  B  are  destroyed.   Large  dnodes  allow  more  data to be stored in the bonus buffer, thus
               potentially improving performance by avoiding the use of spill blocks.

       <b>large_microzap</b>
               GUID                  <b>com.klarasystems:large_microzap</b>
               DEPENDENCIES          <b>extensible_dataset</b>, <b>large_blocks</b>
               READ-ONLY COMPATIBLE  yes

               This feature allows "micro" ZAPs to grow larger than 128 KiB  without  being  upgraded  to  "fat"
               ZAPs.

               This feature becomes <b>active</b> the first time a micro ZAP grows larger than 128KiB.  It will only be
               returned to the <b>enabled</b> state when all datasets that ever had a large micro ZAP are destroyed.

               Note  that  even when this feature is enabled, micro ZAPs cannot grow larger than 128 KiB without
               also changing the <b>zap_micro_max_size</b> module parameter.  See <u><a href="../man4/zfs.4.html">zfs</a></u>(4).

       <b>livelist</b>
               GUID                  <b>com.delphix:livelist</b>
               DEPENDENCIES          <b>extensible_dataset</b>
               READ-ONLY COMPATIBLE  yes

               This feature allows clones to be deleted faster than the traditional method when a  large  number
               of  random/sparse  writes  have  been  made to the clone.  All blocks allocated and freed after a
               clone is created are tracked by the the clone's livelist which is referenced during the  deletion
               of  the  clone.   The  feature  is activated when a clone is created and remains <b>active</b> until all
               clones have been destroyed.

       <b>log_spacemap</b>
               GUID                  <b>com.delphix:log_spacemap</b>
               DEPENDENCIES          <b>com.delphix:spacemap_v2</b>
               READ-ONLY COMPATIBLE  yes

               This feature improves performance for heavily-fragmented pools,  especially  when  workloads  are
               heavy  in  random-writes.   It  does  so by logging all the metaslab changes on a single spacemap
               every TXG instead of scattering multiple writes to all the metaslab spacemaps.

               This feature becomes <b>active</b> as soon as it is enabled and will never return to being <b>enabled</b>.

       <b>longname</b>
               GUID                  <b>org.zfsonlinux:longname</b>
               DEPENDENCIES          <b>extensible_dataset</b>
               READ-ONLY COMPATIBLE  no

               This feature allows creating files and directories with name up to 1023 bytes in length.   A  new
               dataset  property  <b>longname</b>  is  also  introduced  to  toggle  longname  support for each dataset
               individually.  This property can be disabled even if it contains longname files.  In  such  case,
               new file cannot be created with longname but existing longname files can still be looked up.

               This  feature  becomes  <b>active</b>  when  a  file  name greater than 255 is created in a dataset, and
               returns to being <b>enabled</b> when all such datasets are destroyed.

       <b>lz4_compress</b>
               GUID                  <b>org.illumos:lz4_compress</b>
               READ-ONLY COMPATIBLE  no

               <b>lz4</b> is a high-performance real-time compression  algorithm  that  features  significantly  faster
               compression  and  decompression  as  well  as  a  higher  compression  ratio  than the older <b>lzjb</b>
               compression.  Typically, <b>lz4</b> compression is approximately 50% faster  on  compressible  data  and
               200%  faster  on  incompressible  data  than  <b>lzjb</b>.   It  is  also  approximately  80%  faster on
               decompression, while giving approximately a 10% better compression ratio.

               When the <b>lz4_compress</b> feature is set to <b>enabled</b>, the administrator can turn on <b>lz4</b> compression on
               any dataset on the pool using the  <u><a href="../man8/zfs-set.8.html">zfs-set</a></u>(8)  command.   All  newly  written  metadata  will  be
               compressed with the <b>lz4</b> algorithm.

               This feature becomes <b>active</b> as soon as it is enabled and will never return to being <b>enabled</b>.

       <b>multi_vdev_crash_dump</b>
               GUID                  <b>com.joyent:multi_vdev_crash_dump</b>
               READ-ONLY COMPATIBLE  no

               This  feature  allows  a  dump  device  to be configured with a pool comprised of multiple vdevs.
               Those vdevs may be arranged in any mirrored or raidz configuration.

               When the <b>multi_vdev_crash_dump</b> feature is set to <b>enabled</b>, the administrator can use <u><a href="../man8/dumpadm.8.html">dumpadm</a></u>(8) to
               configure a dump device on a pool comprised of multiple vdevs.

               Under FreeBSD and Linux this feature is unused, but  registered  for  compatibility.   New  pools
               created  on  these  systems will have the feature <b>enabled</b> but will never transition to <b>active</b>, as
               this functionality is not required for crash dump support.  Existing pools where this feature  is
               <b>active</b> can be imported.

       <b>obsolete_counts</b>
               GUID                  <b>com.delphix:obsolete_counts</b>
               DEPENDENCIES          <b>device_removal</b>
               READ-ONLY COMPATIBLE  yes

               This  feature is an enhancement of <b>device_removal</b>, which will over time reduce the memory used to
               track removed devices.  When indirect blocks are freed or remapped, we note that  their  part  of
               the indirect mapping is “obsolete” – no longer needed.

               This  feature  becomes <b>active</b> when the <b>zpool</b> <b>remove</b> command is used on a top-level vdev, and will
               never return to being <b>enabled</b>.

       <b>project_quota</b>
               GUID                  <b>org.zfsonlinux:project_quota</b>
               DEPENDENCIES          <b>extensible_dataset</b>
               READ-ONLY COMPATIBLE  yes

               This feature allows administrators to account the spaces and objects  usage  information  against
               the project identifier (ID).

               The  project  ID  is  an  object-based attribute.  When upgrading an existing filesystem, objects
               without a project ID will be assigned a zero project ID.  When this  feature  is  enabled,  newly
               created  objects inherit their parent directories' project ID if the parent's inherit flag is set
               (via <b>chattr</b> <b>[+-]P</b> or <b>zfs</b> <b>project</b> <b>-s</b>|<b>-C</b>).  Otherwise, the new object's project ID  will  be  zero.
               An object's project ID can be changed at any time by the owner (or privileged user) via <b>chattr</b> <b>-p</b>
               <u>prjid</u> or <b>zfs</b> <b>project</b> <b>-p</b> <u>prjid</u>.

               This feature will become <b>active</b> as soon as it is enabled and will never return to being <b>disabled</b>.
               Each  filesystem  will  be  upgraded  automatically when remounted, or when a new file is created
               under  that  filesystem.  The  upgrade  can  also  be  triggered  on  filesystems  via  <b>zfs</b>   <b>set</b>
               <b>version</b>=<b>current</b>  <u>fs</u>.  The upgrade process runs in the background and may take a while to complete
               for filesystems containing large amounts of files.

       <b>raidz_expansion</b>
               GUID                  <b>org.openzfs:raidz_expansion</b>
               DEPENDENCIES          <b>none</b>
               READ-ONLY COMPATIBLE  no

               This feature enables the <b>zpool</b> <b>attach</b> subcommand to attach  a  new  device  to  a  RAID-Z  group,
               expanding the total amount usable space in the pool.  See <u><a href="../man8/zpool-attach.8.html">zpool-attach</a></u>(8).

       <b>redaction_bookmarks</b>
               GUID                  <b>com.delphix:redaction_bookmarks</b>
               DEPENDENCIES          <b>bookmarks</b>, <b>extensible_dataset</b>
               READ-ONLY COMPATIBLE  no

               This  feature enables the use of redacted <b>zfs</b> <b>send</b>s, which create redaction bookmarks storing the
               list of blocks redacted by the send that created  them.   For  more  information  about  redacted
               sends, see <u><a href="../man8/zfs-send.8.html">zfs-send</a></u>(8).

       <b>redacted_datasets</b>
               GUID                  <b>com.delphix:redacted_datasets</b>
               DEPENDENCIES          <b>extensible_dataset</b>
               READ-ONLY COMPATIBLE  no

               This  feature  enables the receiving of redacted <b>zfs</b> <b>send</b> streams, which create redacted datasets
               when received.  These datasets are missing some of their blocks, and so cannot be safely mounted,
               and their contents cannot be safely read.  For more  information  about  redacted  receives,  see
               <u><a href="../man8/zfs-send.8.html">zfs-send</a></u>(8).

       <b>redaction_list_spill</b>
               GUID                  <b>com.delphix:redaction_list_spill</b>
               DEPENDENCIES          <b>redaction_bookmarks</b>
               READ-ONLY COMPATIBLE  no

               This  feature  enables  the  redaction list created by zfs redact to store many more entries.  It
               becomes <b>active</b> when a redaction list is created with more than 36 entries, and returns  to  being
               <b>enabled</b>  when  no  long  redaction lists remain in the pool.  For more information about redacted
               sends, see <u><a href="../man8/zfs-send.8.html">zfs-send</a></u>(8).

       <b>resilver_defer</b>
               GUID                  <b>com.datto:resilver_defer</b>
               READ-ONLY COMPATIBLE  yes

               This feature allows ZFS to postpone new resilvers if an existing  one  is  already  in  progress.
               Without  this  feature,  any new resilvers will cause the currently running one to be immediately
               restarted from the beginning.

               This feature becomes <b>active</b> once a resilver has been deferred, and returns to being <b>enabled</b>  when
               the deferred resilver begins.

       <b>sha512</b>
               GUID                  <b>org.illumos:sha512</b>
               DEPENDENCIES          <b>extensible_dataset</b>
               READ-ONLY COMPATIBLE  no

               This  feature  enables  the  use  of  the  SHA-512/256  truncated hash algorithm (FIPS 180-4) for
               checksum and dedup.  The  native  64-bit  arithmetic  of  SHA-512  provides  an  approximate  50%
               performance  boost  over SHA-256 on 64-bit hardware and is thus a good minimum-change replacement
               candidate for systems where hash performance is important, but these systems cannot for  whatever
               reason utilize the faster <b>skein</b> and <b>edonr</b> algorithms.

               When  the  <b>sha512</b> feature is set to <b>enabled</b>, the administrator can turn on the <b>sha512</b> checksum on
               any dataset using <b>zfs</b> <b>set</b> <b>checksum</b>=<b>sha512</b> <u>dset</u> (see <u><a href="../man8/zfs-set.8.html">zfs-set</a></u>(8)).   This  feature  becomes  <b>active</b>
               once  a  <b>checksum</b>  property  has  been  set  to <b>sha512</b>, and will return to being <b>enabled</b> once all
               filesystems that have ever had their checksum set to <b>sha512</b> are destroyed.

       <b>skein</b>
               GUID                  <b>org.illumos:skein</b>
               DEPENDENCIES          <b>extensible_dataset</b>
               READ-ONLY COMPATIBLE  no

               This feature enables the use of the Skein hash algorithm for checksum  and  dedup.   Skein  is  a
               high-performance  secure  hash  algorithm  that was a finalist in the NIST SHA-3 competition.  It
               provides a very high security margin and high performance on 64-bit  hardware  (80%  faster  than
               SHA-256).   This  implementation  also utilizes the new salted checksumming functionality in ZFS,
               which means that the checksum is pre-seeded with a secret 256-bit random key (stored on the pool)
               before being fed the data block to be checksummed.  Thus the produced checksums are unique  to  a
               given pool, preventing hash collision attacks on systems with dedup.

               When the <b>skein</b> feature is set to <b>enabled</b>, the administrator can turn on the <b>skein</b> checksum on any
               dataset  using  <b>zfs</b> <b>set</b> <b>checksum</b>=<b>skein</b> <u>dset</u> (see <u><a href="../man8/zfs-set.8.html">zfs-set</a></u>(8)).  This feature becomes <b>active</b> once a
               <b>checksum</b> property has been set to <b>skein</b>, and will return to being <b>enabled</b>  once  all  filesystems
               that have ever had their checksum set to <b>skein</b> are destroyed.

       <b>spacemap_histogram</b>
               GUID                  <b>com.delphix:spacemap_histogram</b>
               READ-ONLY COMPATIBLE  yes

               This  features  allows  ZFS to maintain more information about how free space is organized within
               the pool.  If this feature is <b>enabled</b>, it will be activated  when  a  new  space  map  object  is
               created,  or an existing space map is upgraded to the new format, and never returns back to being
               <b>enabled</b>.

       <b>spacemap_v2</b>
               GUID                  <b>com.delphix:spacemap_v2</b>
               READ-ONLY COMPATIBLE  yes

               This feature enables the use of the new space map encoding which consists of two  words  (instead
               of  one)  whenever  it  is  advantageous.   The new encoding allows space maps to represent large
               regions of space more efficiently on-disk while also increasing their maximum addressable offset.

               This feature becomes <b>active</b> once it is <b>enabled</b>, and never returns back to being <b>enabled</b>.

       <b>userobj_accounting</b>
               GUID                  <b>org.zfsonlinux:userobj_accounting</b>
               DEPENDENCIES          <b>extensible_dataset</b>
               READ-ONLY COMPATIBLE  yes

               This feature allows administrators to account the object usage information by user and group.

               This feature becomes <b>active</b> as soon as it is enabled and will  never  return  to  being  <b>enabled</b>.
               Each  filesystem  will  be  upgraded  automatically when remounted, or when a new file is created
               under  that  filesystem.  The  upgrade  can  also  be  triggered  on  filesystems  via  <b>zfs</b>   <b>set</b>
               <b>version</b>=<b>current</b>  <u>fs</u>.  The upgrade process runs in the background and may take a while to complete
               for filesystems containing large amounts of files.

       <b>vdev_zaps_v2</b>
               GUID                  <b>com.klarasystems:vdev_zaps_v2</b>
               READ-ONLY COMPATIBLE  no

               This feature creates a ZAP object for the root vdev.

               This feature becomes active after the next <b>zpool</b> <b>import</b>  or  <b>zpool</b>  <b>reguid</b>.   Properties  can  be
               retrieved  or set on the root vdev using <b>zpool</b> <b>get</b> and <b>zpool</b> <b>set</b> with <b>root</b> as the vdev name which
               is an alias for <b>root-0</b>.

       <b>zilsaxattr</b>
               GUID                  <b>org.openzfs:zilsaxattr</b>
               DEPENDENCIES          <b>extensible_dataset</b>
               READ-ONLY COMPATIBLE  yes

               This feature enables <b>xattr</b>=<b>sa</b> extended attribute  logging  in  the  ZIL.   If  enabled,  extended
               attribute  changes  (both  <b>xattrdir</b>=<b>dir</b>  and <b>xattr</b>=<b>sa</b>) are guaranteed to be durable if either the
               dataset had <b>sync</b>=<b>always</b> set at the time the changes were  made,  or  <u><a href="../man2/sync.2.html">sync</a></u>(2)  is  called  on  the
               dataset after the changes were made.

               This  feature  becomes <b>active</b> when a ZIL is created for at least one dataset and will be returned
               to the <b>enabled</b> state when it is destroyed for all datasets that use this feature.

       <b>zpool_checkpoint</b>
               GUID                  <b>com.delphix:zpool_checkpoint</b>
               READ-ONLY COMPATIBLE  yes

               This feature enables the <b>zpool</b> <b>checkpoint</b> command that can checkpoint the state of  the  pool  at
               the time it was issued and later rewind back to it or discard it.

               This  feature  becomes  <b>active</b>  when the <b>zpool</b> <b>checkpoint</b> command is used to checkpoint the pool.
               The feature will only return back to being <b>enabled</b> when the pool is rewound or the checkpoint has
               been discarded.

       <b>zstd_compress</b>
               GUID                  <b>org.freebsd:zstd_compress</b>
               DEPENDENCIES          <b>extensible_dataset</b>
               READ-ONLY COMPATIBLE  no

               <b>zstd</b> is a high-performance compression algorithm that features a combination of high  compression
               ratios  and high speed.  Compared to <b>gzip</b>, <b>zstd</b> offers slightly better compression at much higher
               speeds.  Compared to <b>lz4</b>, <b>zstd</b> offers much better compression while being only  modestly  slower.
               Typically,  <b>zstd</b> compression speed ranges from 250 to 500 MB/s per thread and decompression speed
               is over 1 GB/s per thread.

               When the <b>zstd</b> feature is set to <b>enabled</b>, the administrator can turn on <b>zstd</b>  compression  of  any
               dataset  using  <b>zfs</b>  <b>set</b> <b>compress</b>=<b>zstd</b> <u>dset</u> (see <u><a href="../man8/zfs-set.8.html">zfs-set</a></u>(8)).  This feature becomes <b>active</b> once a
               <b>compress</b> property has been set to <b>zstd</b>, and will return to being  <b>enabled</b>  once  all  filesystems
               that have ever had their <b>compress</b> property set to <b>zstd</b> are destroyed.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <u><a href="../man8/zfs.8.html">zfs</a></u>(8), <u><a href="../man8/zpool.8.html">zpool</a></u>(8)

OpenZFS                                          October 2, 2024                               <u><a href="../man7/ZPOOL-FEATURES.7.html">ZPOOL-FEATURES</a></u>(7)
</pre>
 </div>
</div></section>
</div>
</body>
</html>