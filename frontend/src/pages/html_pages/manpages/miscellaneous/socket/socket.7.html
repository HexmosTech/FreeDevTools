<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>socket - Linux socket interface</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/manpages">manpages_6.9.1-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       socket - Linux socket interface

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;sys/socket.h&gt;</b>

       <u>sockfd</u> <b>=</b> <b>socket(int</b> <u>socket_family</u><b>,</b> <b>int</b> <u>socket_type</u><b>,</b> <b>int</b> <u>protocol</u><b>);</b>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This  manual page describes the Linux networking socket layer user interface.  The BSD compatible sockets
       are the uniform interface between the user process and the network protocol stacks in  the  kernel.   The
       protocol  modules  are  grouped into <u>protocol</u> <u>families</u> such as <b>AF_INET</b>, <b>AF_IPX</b>, and <b>AF_PACKET</b>, and <u>socket</u>
       <u>types</u> such as <b>SOCK_STREAM</b> or <b>SOCK_DGRAM</b>.  See <b><a href="../man2/socket.2.html">socket</a></b>(2) for more information on families and types.

   <b>Socket-layer</b> <b>functions</b>
       These functions are used by the user  process  to  send  or  receive  packets  and  to  do  other  socket
       operations.  For more information, see their respective manual pages.

       <b><a href="../man2/socket.2.html">socket</a></b>(2) creates a socket, <b><a href="../man2/connect.2.html">connect</a></b>(2) connects a socket to a remote socket address, the <b><a href="../man2/bind.2.html">bind</a></b>(2) function
       binds  a  socket  to  a  local  socket  address, <b><a href="../man2/listen.2.html">listen</a></b>(2) tells the socket that new connections shall be
       accepted, and <b><a href="../man2/accept.2.html">accept</a></b>(2) is used to get a new  socket  with  a  new  incoming  connection.   <b><a href="../man2/socketpair.2.html">socketpair</a></b>(2)
       returns two connected anonymous sockets (implemented only for a few local families like <b>AF_UNIX</b>)

       <b><a href="../man2/send.2.html">send</a></b>(2),  <b><a href="../man2/sendto.2.html">sendto</a></b>(2), and <b><a href="../man2/sendmsg.2.html">sendmsg</a></b>(2) send data over a socket, and <b><a href="../man2/recv.2.html">recv</a></b>(2), <b><a href="../man2/recvfrom.2.html">recvfrom</a></b>(2), <b><a href="../man2/recvmsg.2.html">recvmsg</a></b>(2) receive
       data from a socket.  <b><a href="../man2/poll.2.html">poll</a></b>(2) and <b><a href="../man2/select.2.html">select</a></b>(2) wait for arriving data  or  a  readiness  to  send  data.   In
       addition, the standard I/O operations like <b><a href="../man2/write.2.html">write</a></b>(2), <b><a href="../man2/writev.2.html">writev</a></b>(2), <b><a href="../man2/sendfile.2.html">sendfile</a></b>(2), <b><a href="../man2/read.2.html">read</a></b>(2), and <b><a href="../man2/readv.2.html">readv</a></b>(2) can be
       used to read and write data.

       <b><a href="../man2/getsockname.2.html">getsockname</a></b>(2)  returns  the  local  socket address and <b><a href="../man2/getpeername.2.html">getpeername</a></b>(2) returns the remote socket address.
       <b><a href="../man2/getsockopt.2.html">getsockopt</a></b>(2) and <b><a href="../man2/setsockopt.2.html">setsockopt</a></b>(2) are used to set or get socket layer or protocol options.  <b><a href="../man2/ioctl.2.html">ioctl</a></b>(2) can be
       used to set or read some other options.

       <b><a href="../man2/close.2.html">close</a></b>(2) is used to close a socket.  <b><a href="../man2/shutdown.2.html">shutdown</a></b>(2) closes parts of a full-duplex socket connection.

       Seeking, or calling <b><a href="../man2/pread.2.html">pread</a></b>(2) or <b><a href="../man2/pwrite.2.html">pwrite</a></b>(2) with a nonzero position is not supported on sockets.

       It is possible to do nonblocking I/O on  sockets  by  setting  the  <b>O_NONBLOCK</b>  flag  on  a  socket  file
       descriptor  using  <b><a href="../man2/fcntl.2.html">fcntl</a></b>(2).   Then  all  operations  that  would block will (usually) return with <b>EAGAIN</b>
       (operation should be retried later); <b><a href="../man2/connect.2.html">connect</a></b>(2) will return <b>EINPROGRESS</b> error.  The user  can  then  wait
       for various events via <b><a href="../man2/poll.2.html">poll</a></b>(2) or <b><a href="../man2/select.2.html">select</a></b>(2).
       ┌───────────────────────────────────────────────────────────────────────────────────────────────────────┐
       │                                              I/O events                                               │
       ├────────────┬───────────┬──────────────────────────────────────────────────────────────────────────────┤
       │ Event      │ Poll flag │ Occurrence                                                                   │
       ├────────────┼───────────┼──────────────────────────────────────────────────────────────────────────────┤
       │ Read       │ POLLIN    │ New data arrived.                                                            │
       ├────────────┼───────────┼──────────────────────────────────────────────────────────────────────────────┤
       │ Read       │ POLLIN    │ A connection setup has been completed (for connection-oriented sockets)      │
       ├────────────┼───────────┼──────────────────────────────────────────────────────────────────────────────┤
       │ Read       │ POLLHUP   │ A disconnection request has been initiated by the other end.                 │
       ├────────────┼───────────┼──────────────────────────────────────────────────────────────────────────────┤
       │ Read       │ POLLHUP   │ A  connection  is broken (only for connection-oriented protocols).  When the │
       │            │           │ socket is written <b>SIGPIPE</b> is also sent.                                      │
       ├────────────┼───────────┼──────────────────────────────────────────────────────────────────────────────┤
       │ Write      │ POLLOUT   │ Socket has enough send buffer space for writing new data.                    │
       ├────────────┼───────────┼──────────────────────────────────────────────────────────────────────────────┤
       │ Read/Write │ POLLIN |  │ An outgoing <b><a href="../man2/connect.2.html">connect</a></b>(2) finished.                                             │
       │            │ POLLOUT   │                                                                              │
       ├────────────┼───────────┼──────────────────────────────────────────────────────────────────────────────┤
       │ Read/Write │ POLLERR   │ An asynchronous error occurred.                                              │
       ├────────────┼───────────┼──────────────────────────────────────────────────────────────────────────────┤
       │ Read/Write │ POLLHUP   │ The other end has shut down one direction.                                   │
       ├────────────┼───────────┼──────────────────────────────────────────────────────────────────────────────┤
       │ Exception  │ POLLPRI   │ Urgent data arrived.  <b>SIGURG</b> is sent then.                                   │
       └────────────┴───────────┴──────────────────────────────────────────────────────────────────────────────┘

       An alternative to <b><a href="../man2/poll.2.html">poll</a></b>(2) and <b><a href="../man2/select.2.html">select</a></b>(2) is to let the kernel inform the application about  events  via  a
       <b>SIGIO</b> signal.  For that the <b>O_ASYNC</b> flag must be set on a socket file descriptor via <b><a href="../man2/fcntl.2.html">fcntl</a></b>(2) and a valid
       signal handler for <b>SIGIO</b> must be installed via <b><a href="../man2/sigaction.2.html">sigaction</a></b>(2).  See the <u>Signals</u> discussion below.

   <b>Socket</b> <b>address</b> <b>structures</b>
       Each  socket  domain  has  its own format for socket addresses, with a domain-specific address structure.
       Each of these structures begins with an integer "family" field (typed as <u>sa_family_t</u>) that indicates  the
       type  of  the  address  structure.   This  allows  the  various  system calls (e.g., <b><a href="../man2/connect.2.html">connect</a></b>(2), <b><a href="../man2/bind.2.html">bind</a></b>(2),
       <b><a href="../man2/accept.2.html">accept</a></b>(2), <b><a href="../man2/getsockname.2.html">getsockname</a></b>(2), <b><a href="../man2/getpeername.2.html">getpeername</a></b>(2)), which are generic to all socket  domains,  to  determine  the
       domain of a particular socket address.

       To  allow  any  type  of  socket  address  to be passed to interfaces in the sockets API, the type <u>struct</u>
       <u>sockaddr</u> is defined.  The purpose of this type is purely  to  allow  casting  of  domain-specific  socket
       address types to a "generic" type, so as to avoid compiler warnings about type mismatches in calls to the
       sockets API.

       In  addition,  the  sockets API provides the data type <u>struct</u> <u>sockaddr_storage</u>.  This type is suitable to
       accommodate all supported domain-specific socket address structures; it is large enough  and  is  aligned
       properly.  (In particular, it is large enough to hold IPv6 socket addresses.)  The structure includes the
       following  field,  which  can  be  used  to  identify  the  type of socket address actually stored in the
       structure:

               sa_family_t ss_family;

       The <u>sockaddr_storage</u> structure is useful in programs that must handle socket addresses in a  generic  way
       (e.g., programs that must deal with both IPv4 and IPv6 socket addresses).

   <b>Socket</b> <b>options</b>
       The  socket  options  listed below can be set by using <b><a href="../man2/setsockopt.2.html">setsockopt</a></b>(2) and read with <b><a href="../man2/getsockopt.2.html">getsockopt</a></b>(2) with the
       socket level set to <b>SOL_SOCKET</b> for all sockets.  Unless otherwise noted, <u>optval</u> is a pointer to an <u>int</u>.

       <b>SO_ACCEPTCONN</b>
              Returns a value indicating whether or not this socket has been marked to accept  connections  with
              <b><a href="../man2/listen.2.html">listen</a></b>(2).   The value 0 indicates that this is not a listening socket, the value 1 indicates that
              this is a listening socket.  This socket option is read-only.

       <b>SO_ATTACH_FILTER</b> (since Linux 2.2)
       <b>SO_ATTACH_BPF</b> (since Linux 3.19)
              Attach a classic BPF (<b>SO_ATTACH_FILTER</b>) or an extended BPF (<b>SO_ATTACH_BPF</b>) program to  the  socket
              for  use  as a filter of incoming packets.  A packet will be dropped if the filter program returns
              zero.  If the filter program returns a nonzero value which is less than the packet's data  length,
              the  packet  will  be  truncated  to  the length returned.  If the value returned by the filter is
              greater than or equal to the packet's data length, the packet is allowed to proceed unmodified.

              The argument for <b>SO_ATTACH_FILTER</b> is a <u>sock_fprog</u> structure, defined in <u>&lt;linux/filter.h&gt;</u>:

                  struct sock_fprog {
                      unsigned short      len;
                      struct sock_filter *filter;
                  };

              The argument for <b>SO_ATTACH_BPF</b> is a file descriptor returned by the <b><a href="../man2/bpf.2.html">bpf</a></b>(2) system  call  and  must
              refer to a program of type <b>BPF_PROG_TYPE_SOCKET_FILTER</b>.

              These  options  may  be  set  multiple  times for a given socket, each time replacing the previous
              filter program.  The classic and extended versions may be called  on  the  same  socket,  but  the
              previous filter will always be replaced such that a socket never has more than one filter defined.

              Both    classic    and    extended    BPF    are    explained    in   the   kernel   source   file
              <u>Documentation/networking/filter.txt</u>

       <b>SO_ATTACH_REUSEPORT_CBPF</b>
       <b>SO_ATTACH_REUSEPORT_EBPF</b>
              For use with the <b>SO_REUSEPORT</b>  option,  these  options  allow  the  user  to  set  a  classic  BPF
              (<b>SO_ATTACH_REUSEPORT_CBPF</b>) or an extended BPF (<b>SO_ATTACH_REUSEPORT_EBPF</b>) program which defines how
              packets  are  assigned  to  the  sockets  in  the reuseport group (that is, all sockets which have
              <b>SO_REUSEPORT</b> set and are using the same local address to receive packets).

              The BPF program must return an index between 0  and  N-1  representing  the  socket  which  should
              receive the packet (where N is the number of sockets in the group).  If the BPF program returns an
              invalid index, socket selection will fall back to the plain <b>SO_REUSEPORT</b> mechanism.

              Sockets  are  numbered  in  the  order in which they are added to the group (that is, the order of
              <b><a href="../man2/bind.2.html">bind</a></b>(2) calls for UDP sockets or the order of <b><a href="../man2/listen.2.html">listen</a></b>(2) calls for TCP sockets).  New sockets added
              to a reuseport group will inherit the BPF program.  When a socket  is  removed  from  a  reuseport
              group  (via  <b><a href="../man2/close.2.html">close</a></b>(2)),  the  last  socket  in  the  group  will be moved into the closed socket's
              position.

              These options may be set repeatedly at any time on any socket in the group to replace the  current
              BPF program used by all sockets in the group.

              <b>SO_ATTACH_REUSEPORT_CBPF</b>    takes    the    same    argument    type   as   <b>SO_ATTACH_FILTER</b>   and
              <b>SO_ATTACH_REUSEPORT_EBPF</b> takes the same argument type as <b>SO_ATTACH_BPF</b>.

              UDP support for this feature is available since Linux 4.5; TCP support is  available  since  Linux
              4.6.

       <b>SO_BINDTODEVICE</b>
              Bind  this  socket  to a particular device like “eth0”, as specified in the passed interface name.
              If the name is an empty string or the option length is zero, the socket device binding is removed.
              The passed option is a variable-length null-terminated interface name string with the maximum size
              of <b>IFNAMSIZ</b>.  If a socket is bound to an interface, only packets  received  from  that  particular
              interface  are  processed  by  the  socket.   Note  that  this  works  only for some socket types,
              particularly <b>AF_INET</b> sockets.  It is not supported for packet sockets (use normal <b><a href="../man2/bind.2.html">bind</a></b>(2) there).

              Before Linux 3.8, this socket option could be set, but could  not  retrieved  with  <b><a href="../man2/getsockopt.2.html">getsockopt</a></b>(2).
              Since  Linux 3.8, it is readable.  The <u>optlen</u> argument should contain the buffer size available to
              receive the device name and is recommended to be <b>IFNAMSIZ</b> bytes.  The real device name  length  is
              reported back in the <u>optlen</u> argument.

       <b>SO_BROADCAST</b>
              Set  or  get  the broadcast flag.  When enabled, datagram sockets are allowed to send packets to a
              broadcast address.  This option has no effect on stream-oriented sockets.

       <b>SO_BSDCOMPAT</b>
              Enable BSD bug-to-bug compatibility.  This is used by the UDP protocol module  in  Linux  2.0  and
              2.2.   If  enabled,  ICMP errors received for a UDP socket will not be passed to the user program.
              In later kernel versions, support for this option has been phased out: Linux 2.4 silently  ignores
              it,  and Linux 2.6 generates a kernel warning (printk()) if a program uses this option.  Linux 2.0
              also enabled BSD bug-to-bug  compatibility  options  (random  header  changing,  skipping  of  the
              broadcast flag) for raw sockets with this option, but that was removed in Linux 2.2.

       <b>SO_DEBUG</b>
              Enable  socket  debugging.   Allowed  only  for  processes with the <b>CAP_NET_ADMIN</b> capability or an
              effective user ID of 0.

       <b>SO_DETACH_FILTER</b> (since Linux 2.2)
       <b>SO_DETACH_BPF</b> (since Linux 3.19)
              These two options, which are synonyms, may be used to remove the classic or extended  BPF  program
              attached to a socket with either <b>SO_ATTACH_FILTER</b> or <b>SO_ATTACH_BPF</b>.  The option value is ignored.

       <b>SO_DOMAIN</b> (since Linux 2.6.32)
              Retrieves  the socket domain as an integer, returning a value such as <b>AF_INET6</b>.  See <b><a href="../man2/socket.2.html">socket</a></b>(2) for
              details.  This socket option is read-only.

       <b>SO_ERROR</b>
              Get and clear the pending socket error.  This socket option is read-only.  Expects an integer.

       <b>SO_DONTROUTE</b>
              Don't send via a gateway, send only to directly connected hosts.  The same effect can be  achieved
              by setting the <b>MSG_DONTROUTE</b> flag on a socket <b><a href="../man2/send.2.html">send</a></b>(2) operation.  Expects an integer boolean flag.

       <b>SO_INCOMING_CPU</b> (gettable since Linux 3.19, settable since Linux 4.4)
              Sets or gets the CPU affinity of a socket.  Expects an integer flag.

                  int cpu = 1;
                  setsockopt(fd, SOL_SOCKET, SO_INCOMING_CPU, &amp;cpu,
                             sizeof(cpu));

              Because  all of the packets for a single stream (i.e., all packets for the same 4-tuple) arrive on
              the single RX queue that is associated with a particular CPU, the typical use case  is  to  employ
              one listening process per RX queue, with the incoming flow being handled by a listener on the same
              CPU that is handling the RX queue.  This provides optimal NUMA behavior and keeps CPU caches hot.

       <b>SO_INCOMING_NAPI_ID</b> (gettable since Linux 4.12)
              Returns  a  system-level  unique ID called NAPI ID that is associated with a RX queue on which the
              last packet associated with that socket is received.

              This can be used by an application to split the incoming flows among worker threads based  on  the
              RX  queue  on  which  the  packets  associated with the flows are received.  It allows each worker
              thread to be associated with a NIC HW receive  queue  and  service  all  the  connection  requests
              received  on that RX queue.  This mapping between an app thread and a HW NIC queue streamlines the
              flow of data from the NIC to the application.

       <b>SO_KEEPALIVE</b>
              Enable sending of keep-alive messages on connection-oriented sockets.  Expects an integer  boolean
              flag.

       <b>SO_LINGER</b>
              Sets or gets the <b>SO_LINGER</b> option.  The argument is a <u>linger</u> structure.

                  struct linger {
                      int l_onoff;    /* linger active */
                      int l_linger;   /* how many seconds to linger for */
                  };

              When  enabled,  a <b><a href="../man2/close.2.html">close</a></b>(2) or <b><a href="../man2/shutdown.2.html">shutdown</a></b>(2) will not return until all queued messages for the socket
              have been successfully sent or the linger timeout has been reached.  Otherwise, the  call  returns
              immediately  and  the  closing  is  done  in the background.  When the socket is closed as part of
              <b><a href="../man2/exit.2.html">exit</a></b>(2), it always lingers in the background.

       <b>SO_LOCK_FILTER</b>
              When set, this option will prevent changing the filters associated with the socket.  These filters
              include    any    set    using    the    socket    options    <b>SO_ATTACH_FILTER</b>,     <b>SO_ATTACH_BPF</b>,
              <b>SO_ATTACH_REUSEPORT_CBPF</b>, and <b>SO_ATTACH_REUSEPORT_EBPF</b>.

              The  typical  use  case  is  for  a  privileged  process to set up a raw socket (an operation that
              requires the <b>CAP_NET_RAW</b> capability), apply a restrictive filter, set the  <b>SO_LOCK_FILTER</b>  option,
              and  then either drop its privileges or pass the socket file descriptor to an unprivileged process
              via a UNIX domain socket.

              Once the <b>SO_LOCK_FILTER</b> option has been enabled, attempts to change or remove the filter  attached
              to a socket, or to disable the <b>SO_LOCK_FILTER</b> option will fail with the error <b>EPERM</b>.

       <b>SO_MARK</b> (since Linux 2.6.25)
              Set  the  mark  for each packet sent through this socket (similar to the netfilter MARK target but
              socket-based).  Changing the mark can be used for mark-based  routing  without  netfilter  or  for
              packet  filtering.   Setting  this  option  requires the <b>CAP_NET_ADMIN</b> or <b>CAP_NET_RAW</b> (since Linux
              5.17) capability.

       <b>SO_OOBINLINE</b>
              If this option is enabled, out-of-band data is directly  placed  into  the  receive  data  stream.
              Otherwise, out-of-band data is passed only when the <b>MSG_OOB</b> flag is set during receiving.

       <b>SO_PASSCRED</b>
              Enable or disable the receiving of the <b>SCM_CREDENTIALS</b> control message.  For more information, see
              <b><a href="../man7/unix.7.html">unix</a></b>(7).

       <b>SO_PASSSEC</b>
              Enable  or  disable  the receiving of the <b>SCM_SECURITY</b> control message.  For more information, see
              <b><a href="../man7/unix.7.html">unix</a></b>(7).

       <b>SO_PEEK_OFF</b> (since Linux 3.4)
              This option, which is currently supported only for <b><a href="../man7/unix.7.html">unix</a></b>(7) sockets, sets the value  of  the  "peek
              offset" for the <b><a href="../man2/recv.2.html">recv</a></b>(2) system call when used with <b>MSG_PEEK</b> flag.

              When  this  option  is  set to a negative value (it is set to -1 for all new sockets), traditional
              behavior is provided: <b><a href="../man2/recv.2.html">recv</a></b>(2) with the <b>MSG_PEEK</b> flag will peek data from the front of the queue.

              When the option is set to a value greater than or equal to zero, then the next peek at data queued
              in the socket will occur at the byte offset specified by the option value.  At the same time,  the
              "peek  offset" will be incremented by the number of bytes that were peeked from the queue, so that
              a subsequent peek will return the next data in the queue.

              If data is removed from the front of the queue via a call to  <b><a href="../man2/recv.2.html">recv</a></b>(2)  (or  similar)  without  the
              <b>MSG_PEEK</b>  flag,  the  "peek  offset"  will  be decreased by the number of bytes removed.  In other
              words, receiving data without the <b>MSG_PEEK</b> flag will cause the "peek offset"  to  be  adjusted  to
              maintain the correct relative position in the queued data, so that a subsequent peek will retrieve
              the data that would have been retrieved had the data not been removed.

              For  datagram  sockets,  if  the "peek offset" points to the middle of a packet, the data returned
              will be marked with the <b>MSG_TRUNC</b> flag.

              The following example serves to illustrate the use of <b>SO_PEEK_OFF</b>.  Suppose a  stream  socket  has
              the following queued input data:

                  aabbccddeeff

              The following sequence of <b><a href="../man2/recv.2.html">recv</a></b>(2) calls would have the effect noted in the comments:

                  int ov = 4;                  // Set peek offset to 4
                  setsockopt(fd, SOL_SOCKET, SO_PEEK_OFF, &amp;ov, sizeof(ov));

                  recv(fd, buf, 2, MSG_PEEK);  // Peeks "cc"; offset set to 6
                  recv(fd, buf, 2, MSG_PEEK);  // Peeks "dd"; offset set to 8
                  recv(fd, buf, 2, 0);         // Reads "aa"; offset set to 6
                  recv(fd, buf, 2, MSG_PEEK);  // Peeks "ee"; offset set to 8

       <b>SO_PEERCRED</b>
              Return  the  credentials  of  the peer process connected to this socket.  For further details, see
              <b><a href="../man7/unix.7.html">unix</a></b>(7).

       <b>SO_PEERSEC</b> (since Linux 2.6.2)
              Return the security context of the peer socket connected to this socket.  For further details, see
              <b><a href="../man7/unix.7.html">unix</a></b>(7) and <b><a href="../man7/ip.7.html">ip</a></b>(7).

       <b>SO_PRIORITY</b>
              Set the protocol-defined priority for all packets to be sent on  this  socket.   Linux  uses  this
              value  to  order  the  networking  queues:  packets  with a higher priority may be processed first
              depending on the selected device queueing discipline.  Setting a priority outside the range 0 to 6
              requires the <b>CAP_NET_ADMIN</b> capability.

       <b>SO_PROTOCOL</b> (since Linux 2.6.32)
              Retrieves the socket protocol as  an  integer,  returning  a  value  such  as  <b>IPPROTO_SCTP</b>.   See
              <b><a href="../man2/socket.2.html">socket</a></b>(2) for details.  This socket option is read-only.

       <b>SO_RCVBUF</b>
              Sets  or gets the maximum socket receive buffer in bytes.  The kernel doubles this value (to allow
              space for bookkeeping overhead) when it is set using <b><a href="../man2/setsockopt.2.html">setsockopt</a></b>(2),  and  this  doubled  value  is
              returned  by <b><a href="../man2/getsockopt.2.html">getsockopt</a></b>(2).  The default value is set by the <u><a href="file:/proc/sys/net/core/rmem_default">/proc/sys/net/core/rmem_default</a></u> file,
              and the maximum allowed value  is  set  by  the  <u><a href="file:/proc/sys/net/core/rmem_max">/proc/sys/net/core/rmem_max</a></u>  file.   The  minimum
              (doubled) value for this option is 256.

       <b>SO_RCVBUFFORCE</b> (since Linux 2.6.14)
              Using  this  socket  option,  a  privileged  (<b>CAP_NET_ADMIN</b>)  process can perform the same task as
              <b>SO_RCVBUF</b>, but the <u>rmem_max</u> limit can be overridden.

       <b>SO_RCVLOWAT</b> and <b>SO_SNDLOWAT</b>
              Specify the minimum number of bytes in the buffer until the socket layer will pass the data to the
              protocol (<b>SO_SNDLOWAT</b>) or the user on receiving (<b>SO_RCVLOWAT</b>).  These two values  are  initialized
              to  1.   <b>SO_SNDLOWAT</b>  is not changeable on Linux (<b><a href="../man2/setsockopt.2.html">setsockopt</a></b>(2) fails with the error <b>ENOPROTOOPT</b>).
              <b>SO_RCVLOWAT</b> is changeable only since Linux 2.4.

              Before Linux 2.6.28 <b><a href="../man2/select.2.html">select</a></b>(2), <b><a href="../man2/poll.2.html">poll</a></b>(2), and <b><a href="../man7/epoll.7.html">epoll</a></b>(7) did not respect the  <b>SO_RCVLOWAT</b>  setting  on
              Linux,  and  indicated  a  socket  as  readable  when even a single byte of data was available.  A
              subsequent read from the socket would then block until <b>SO_RCVLOWAT</b>  bytes  are  available.   Since
              Linux  2.6.28,  <b><a href="../man2/select.2.html">select</a></b>(2),  <b><a href="../man2/poll.2.html">poll</a></b>(2),  and  <b><a href="../man7/epoll.7.html">epoll</a></b>(7) indicate a socket as readable only if at least
              <b>SO_RCVLOWAT</b> bytes are available.

       <b>SO_RCVTIMEO</b> and <b>SO_SNDTIMEO</b>
              Specify the receiving or sending timeouts until reporting an error.   The  argument  is  a  <u>struct</u>
              <u>timeval</u>.  If an input or output function blocks for this period of time, and data has been sent or
              received, the return value of that function will be the amount of data transferred; if no data has
              been transferred and the timeout has been reached, then -1 is returned with <u>errno</u> set to <b>EAGAIN</b> or
              <b>EWOULDBLOCK</b>,  or  <b>EINPROGRESS</b>  (for  <b><a href="../man2/connect.2.html">connect</a></b>(2))  just  as  if  the  socket  was  specified  to be
              nonblocking.  If the timeout is set to zero (the default), then the operation will never  timeout.
              Timeouts  only  have effect for system calls that perform socket I/O (e.g., <b><a href="../man2/accept.2.html">accept</a></b>(2), <b><a href="../man2/connect.2.html">connect</a></b>(2),
              <b><a href="../man2/read.2.html">read</a></b>(2), <b><a href="../man2/recvmsg.2.html">recvmsg</a></b>(2), <b><a href="../man2/send.2.html">send</a></b>(2),  <b><a href="../man2/sendmsg.2.html">sendmsg</a></b>(2));  timeouts  have  no  effect  for  <b><a href="../man2/select.2.html">select</a></b>(2),  <b><a href="../man2/poll.2.html">poll</a></b>(2),
              <b><a href="../man2/epoll_wait.2.html">epoll_wait</a></b>(2), and so on.

       <b>SO_REUSEADDR</b>
              Indicates  that  the  rules  used  in validating addresses supplied in a <b><a href="../man2/bind.2.html">bind</a></b>(2) call should allow
              reuse of local addresses.  For <b>AF_INET</b> sockets this means that a  socket  may  bind,  except  when
              there  is  an active listening socket bound to the address.  When the listening socket is bound to
              <b>INADDR_ANY</b> with a specific port then it is not possible  to  bind  to  this  port  for  any  local
              address.  Argument is an integer boolean flag.

       <b>SO_REUSEPORT</b> (since Linux 3.9)
              Permits  multiple  <b>AF_INET</b>  or  <b>AF_INET6</b> sockets to be bound to an identical socket address.  This
              option must be set on each socket (including the first socket) prior to  calling  <b><a href="../man2/bind.2.html">bind</a></b>(2)  on  the
              socket.  To prevent port hijacking, all of the processes binding to the same address must have the
              same effective UID.  This option can be employed with both TCP and UDP sockets.

              For  TCP  sockets, this option allows <b><a href="../man2/accept.2.html">accept</a></b>(2) load distribution in a multi-threaded server to be
              improved by using a distinct listener  socket  for  each  thread.   This  provides  improved  load
              distribution  as  compared  to traditional techniques such using a single <b><a href="../man2/accept.2.html">accept</a></b>(2)ing thread that
              distributes connections, or having multiple threads  that  compete  to  <b><a href="../man2/accept.2.html">accept</a></b>(2)  from  the  same
              socket.

              For  UDP  sockets, the use of this option can provide better distribution of incoming datagrams to
              multiple processes (or threads) as compared  to  the  traditional  technique  of  having  multiple
              processes compete to receive datagrams on the same socket.

       <b>SO_RXQ_OVFL</b> (since Linux 2.6.33)
              Indicates  that  an  unsigned 32-bit value ancillary message (cmsg) should be attached to received
              skbs indicating the number of packets dropped by the socket since its creation.

       <b>SO_SELECT_ERR_QUEUE</b> (since Linux 3.10)
              When this option is set on a socket, an error condition on a socket causes notification  not  only
              via the <u>exceptfds</u> set of <b><a href="../man2/select.2.html">select</a></b>(2).  Similarly, <b><a href="../man2/poll.2.html">poll</a></b>(2) also returns a <b>POLLPRI</b> whenever an <b>POLLERR</b>
              event is returned.

              Background:  this  option  was  added  when  waking up on an error condition occurred only via the
              <u>readfds</u> and <u>writefds</u> sets of <b><a href="../man2/select.2.html">select</a></b>(2).  The option  was  added  to  allow  monitoring  for  error
              conditions  via the <u>exceptfds</u> argument without simultaneously having to receive notifications (via
              <u>readfds</u>) for regular data that can be read from the socket.  After changes in Linux 4.16, the  use
              of  this  flag  to  achieve  the  desired  notifications  is  no longer necessary.  This option is
              nevertheless retained for backwards compatibility.

       <b>SO_SNDBUF</b>
              Sets or gets the maximum socket send buffer in bytes.  The kernel doubles  this  value  (to  allow
              space  for  bookkeeping  overhead)  when  it is set using <b><a href="../man2/setsockopt.2.html">setsockopt</a></b>(2), and this doubled value is
              returned by <b><a href="../man2/getsockopt.2.html">getsockopt</a></b>(2).  The default value is set by the  <u><a href="file:/proc/sys/net/core/wmem_default">/proc/sys/net/core/wmem_default</a></u>  file
              and  the  maximum  allowed  value  is  set  by  the <u><a href="file:/proc/sys/net/core/wmem_max">/proc/sys/net/core/wmem_max</a></u> file.  The minimum
              (doubled) value for this option is 2048.

       <b>SO_SNDBUFFORCE</b> (since Linux 2.6.14)
              Using this socket option, a privileged (<b>CAP_NET_ADMIN</b>)  process  can  perform  the  same  task  as
              <b>SO_SNDBUF</b>, but the <u>wmem_max</u> limit can be overridden.

       <b>SO_TIMESTAMP</b>
              Enable  or  disable  the  receiving  of  the  <b>SO_TIMESTAMP</b> control message.  The timestamp control
              message is sent with level <b>SOL_SOCKET</b> and a <u>cmsg_type</u> of <b>SCM_TIMESTAMP</b>.  The <u>cmsg_data</u> field is  a
              <u>struct</u>  <u>timeval</u>  indicating the reception time of the last packet passed to the user in this call.
              See <b><a href="../man3/cmsg.3.html">cmsg</a></b>(3) for details on control messages.

       <b>SO_TIMESTAMPNS</b> (since Linux 2.6.22)
              Enable or disable the receiving of the <b>SO_TIMESTAMPNS</b>  control  message.   The  timestamp  control
              message  is sent with level <b>SOL_SOCKET</b> and a <u>cmsg_type</u> of <b>SCM_TIMESTAMPNS</b>.  The <u>cmsg_data</u> field is
              a <u>struct</u> <u>timespec</u> indicating the reception time of the last packet passed  to  the  user  in  this
              call.   The  clock  used  for the timestamp is <b>CLOCK_REALTIME</b>.  See <b><a href="../man3/cmsg.3.html">cmsg</a></b>(3) for details on control
              messages.

              A socket cannot mix <b>SO_TIMESTAMP</b> and <b>SO_TIMESTAMPNS</b>: the two modes are mutually exclusive.

       <b>SO_TYPE</b>
              Gets the socket type as an integer (e.g., <b>SOCK_STREAM</b>).  This socket option is read-only.

       <b>SO_BUSY_POLL</b> (since Linux 3.11)
              Sets the approximate time in microseconds to busy poll on a blocking  receive  when  there  is  no
              data.  Increasing this value requires <b>CAP_NET_ADMIN</b>.  The default for this option is controlled by
              the <u><a href="file:/proc/sys/net/core/busy_read">/proc/sys/net/core/busy_read</a></u> file.

              The  value in the <u><a href="file:/proc/sys/net/core/busy_poll">/proc/sys/net/core/busy_poll</a></u> file determines how long <b><a href="../man2/select.2.html">select</a></b>(2) and <b><a href="../man2/poll.2.html">poll</a></b>(2) will
              busy poll when they operate on sockets with <b>SO_BUSY_POLL</b> set and no events to report are found.

              In both cases, busy polling will only be done when the socket last received data  from  a  network
              device that supports this option.

              While  busy  polling  may  improve  latency of some applications, care must be taken when using it
              since this will increase both CPU utilization and power usage.

   <b>Signals</b>
       When writing onto a connection-oriented socket that has been shut down (by the local or the  remote  end)
       <b>SIGPIPE</b> is sent to the writing process and <b>EPIPE</b> is returned.  The signal is not sent when the write call
       specified the <b>MSG_NOSIGNAL</b> flag.

       When requested with the <b>FIOSETOWN</b> <b><a href="../man2/fcntl.2.html">fcntl</a></b>(2) or <b>SIOCSPGRP</b> <b><a href="../man2/ioctl.2.html">ioctl</a></b>(2), <b>SIGIO</b> is sent when an I/O event occurs.
       It  is  possible  to  use  <b><a href="../man2/poll.2.html">poll</a></b>(2)  or <b><a href="../man2/select.2.html">select</a></b>(2) in the signal handler to find out which socket the event
       occurred on.  An alternative (in Linux 2.2) is to set a real-time signal using the <b>F_SETSIG</b> <b><a href="../man2/fcntl.2.html">fcntl</a></b>(2); the
       handler of the real time signal will be called with the  file  descriptor  in  the  <u>si_fd</u>  field  of  its
       <u>siginfo_t</u>.  See <b><a href="../man2/fcntl.2.html">fcntl</a></b>(2) for more information.

       Under  some circumstances (e.g., multiple processes accessing a single socket), the condition that caused
       the <b>SIGIO</b> may have already disappeared when the process reacts to  the  signal.   If  this  happens,  the
       process should wait again because Linux will resend the signal later.

   <b><a href="file:/proc">/proc</a></b> <b>interfaces</b>
       The core socket networking parameters can be accessed via files in the directory <u><a href="file:/proc/sys/net/core/">/proc/sys/net/core/</a></u>.

       <u>rmem_default</u>
              contains the default setting in bytes of the socket receive buffer.

       <u>rmem_max</u>
              contains  the  maximum  socket  receive  buffer  size  in  bytes which a user may set by using the
              <b>SO_RCVBUF</b> socket option.

       <u>wmem_default</u>
              contains the default setting in bytes of the socket send buffer.

       <u>wmem_max</u>
              contains the maximum socket send buffer size in bytes which a user may set by using the  <b>SO_SNDBUF</b>
              socket option.

       <u>message_cost</u> and <u>message_burst</u>
              configure  the  token bucket filter used to load limit warning messages caused by external network
              events.

       <u>netdev_max_backlog</u>
              Maximum number of packets in the global input queue.

       <u>optmem_max</u>
              Maximum length of ancillary data and user control data like the iovecs per socket.

   <b>Ioctls</b>
       These operations can be accessed using <b><a href="../man2/ioctl.2.html">ioctl</a></b>(2):

           <u>error</u> <b>=</b> <b>ioctl(</b><u>ip_socket</u><b>,</b> <u>ioctl_type</u><b>,</b> <u>&amp;value_result</u><b>);</b>

       <b>SIOCGSTAMP</b>
              Return a <u>struct</u> <u>timeval</u> with the receive timestamp of the last packet passed to the user.  This is
              useful for accurate round trip time measurements.  See <b><a href="../man2/setitimer.2.html">setitimer</a></b>(2) for a  description  of  <u>struct</u>
              <u>timeval</u>.  This ioctl should be used only if the socket options <b>SO_TIMESTAMP</b> and <b>SO_TIMESTAMPNS</b> are
              not  set  on the socket.  Otherwise, it returns the timestamp of the last packet that was received
              while <b>SO_TIMESTAMP</b> and <b>SO_TIMESTAMPNS</b> were not set, or  it  fails  if  no  such  packet  has  been
              received, (i.e., <b><a href="../man2/ioctl.2.html">ioctl</a></b>(2) returns -1 with <u>errno</u> set to <b>ENOENT</b>).

       <b>SIOCSPGRP</b>
              Set  the  process  or  process  group  that is to receive <b>SIGIO</b> or <b>SIGURG</b> signals when I/O becomes
              possible or urgent data is available.  The argument is a pointer to a <u>pid_t</u>.  For further details,
              see the description of <b>F_SETOWN</b> in <b><a href="../man2/fcntl.2.html">fcntl</a></b>(2).

       <b>FIOASYNC</b>
              Change the <b>O_ASYNC</b> flag to enable or disable asynchronous I/O mode of  the  socket.   Asynchronous
              I/O  mode  means  that  the  <b>SIGIO</b> signal or the signal set with <b>F_SETSIG</b> is raised when a new I/O
              event occurs.

              Argument is an integer boolean flag.  (This operation is synonymous with the use  of  <b><a href="../man2/fcntl.2.html">fcntl</a></b>(2)  to
              set the <b>O_ASYNC</b> flag.)

       <b>SIOCGPGRP</b>
              Get  the current process or process group that receives <b>SIGIO</b> or <b>SIGURG</b> signals, or 0 when none is
              set.

       Valid <b><a href="../man2/fcntl.2.html">fcntl</a></b>(2) operations:

       <b>FIOGETOWN</b>
              The same as the <b>SIOCGPGRP</b> <b><a href="../man2/ioctl.2.html">ioctl</a></b>(2).

       <b>FIOSETOWN</b>
              The same as the <b>SIOCSPGRP</b> <b><a href="../man2/ioctl.2.html">ioctl</a></b>(2).

</pre><h4><b>VERSIONS</b></h4><pre>
       <b>SO_BINDTODEVICE</b> was introduced in Linux 2.0.30.  <b>SO_PASSCRED</b> is new in Linux 2.2.  The  <u><a href="file:/proc">/proc</a></u>  interfaces
       were  introduced  in  Linux 2.2.  <b>SO_RCVTIMEO</b> and <b>SO_SNDTIMEO</b> are supported since Linux 2.3.41.  Earlier,
       timeouts were fixed to a protocol-specific setting, and could not be read or written.

</pre><h4><b>NOTES</b></h4><pre>
       Linux assumes that half of the send/receive buffer is used  for  internal  kernel  structures;  thus  the
       values in the corresponding <u><a href="file:/proc">/proc</a></u> files are twice what can be observed on the wire.

       Linux  will  allow  port  reuse  only  with  the <b>SO_REUSEADDR</b> option when this option was set both in the
       previous program that performed a <b><a href="../man2/bind.2.html">bind</a></b>(2) to the port and in the program that wants to  reuse  the  port.
       This  differs  from  some  implementations  (e.g., FreeBSD) where only the later program needs to set the
       <b>SO_REUSEADDR</b> option.  Typically this difference is invisible, since, for example,  a  server  program  is
       designed to always set this option.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man1/wireshark.1.html">wireshark</a></b>(1),  <b><a href="../man2/bpf.2.html">bpf</a></b>(2), <b><a href="../man2/connect.2.html">connect</a></b>(2), <b><a href="../man2/getsockopt.2.html">getsockopt</a></b>(2), <b><a href="../man2/setsockopt.2.html">setsockopt</a></b>(2), <b><a href="../man2/socket.2.html">socket</a></b>(2), <b><a href="../man3/pcap.3.html">pcap</a></b>(3), <b><a href="../man7/address_families.7.html">address_families</a></b>(7),
       <b><a href="../man7/capabilities.7.html">capabilities</a></b>(7), <b><a href="../man7/ddp.7.html">ddp</a></b>(7), <b><a href="../man7/ip.7.html">ip</a></b>(7), <b><a href="../man7/ipv6.7.html">ipv6</a></b>(7), <b><a href="../man7/packet.7.html">packet</a></b>(7), <b><a href="../man7/tcp.7.html">tcp</a></b>(7), <b><a href="../man7/udp.7.html">udp</a></b>(7), <b><a href="../man7/unix.7.html">unix</a></b>(7), <b><a href="../man8/tcpdump.8.html">tcpdump</a></b>(8)

Linux man-pages 6.9.1                              2024-05-02                                          <u><a href="../man7/socket.7.html">socket</a></u>(7)
</pre>
 </div>
</div></section>
</div>
</body>
</html>