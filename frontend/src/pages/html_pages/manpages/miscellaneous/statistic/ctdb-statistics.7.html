<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ctdb-statistics - CTDB statistics output</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/ctdb">ctdb_4.22.3+dfsg-4ubuntu1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       ctdb-statistics - CTDB statistics output

</pre><h4><b>OVERALL</b> <b>STATISTICS</b></h4><pre>
       CTDB maintains information about various messages communicated and some of the important operations per
       node. See the <b><a href="../man1/ctdb.1.html">ctdb</a></b>(1) commands <b>statistics</b> and <b>statisticsreset</b> for displaying statistics.

   <b>Example:</b> <b>ctdb</b> <b>statistics</b>
           CTDB version 1
           Current time of statistics  :                Fri Sep 12 13:32:32 2014
           Statistics collected since  : (000 01:49:20) Fri Sep 12 11:43:12 2014
            num_clients                        6
            frozen                             0
            recovering                         0
            num_recoveries                     2
            client_packets_sent           281293
            client_packets_recv           296317
            node_packets_sent             452387
            node_packets_recv             182394
            keepalive_packets_sent          3927
            keepalive_packets_recv          3928
            node
                req_call                   48605
                reply_call                     1
                req_dmaster                23404
                reply_dmaster              24917
                reply_error                    0
                req_message                  958
                req_control               197513
                reply_control             153705
            client
                req_call                  130866
                req_message                  770
                req_control               168921
            timeouts
                call                           0
                control                        0
                traverse                       0
            locks
                num_calls                    220
                num_current                    0
                num_pending                    0
                num_failed                     0
            total_calls                   130866
            pending_calls                      0
            childwrite_calls                   1
            pending_childwrite_calls             0
            memory_used                   334490
            max_hop_count                     18
            total_ro_delegations               2
            total_ro_revokes                   2
            hop_count_buckets: 42816 5464 26 1 0 0 0 0 0 0 0 0 0 0 0 0
            lock_buckets: 9 165 14 15 7 2 2 0 0 0 0 0 0 0 0 0
            locks_latency      MIN/AVG/MAX     0.000685/0.160302/6.369342 sec out of 214
            reclock_ctdbd      MIN/AVG/MAX     0.004940/0.004969/0.004998 sec out of 2
            reclock_recd       MIN/AVG/MAX     0.000000/0.000000/0.000000 sec out of 0
            call_latency       MIN/AVG/MAX     0.000006/0.000719/4.562991 sec out of 126626
            childwrite_latency MIN/AVG/MAX     0.014527/0.014527/0.014527 sec out of 1

   <b>CTDB</b> <b>version</b>
       Version of the ctdb protocol used by the node.

   <b>Current</b> <b>time</b> <b>of</b> <b>statistics</b>
       Time when the statistics are generated.

       This is useful when collecting statistics output periodically for post-processing.

   <b>Statistics</b> <b>collected</b> <b>since</b>
       Time when ctdb was started or the last time statistics was reset. The output shows the duration and the
       timestamp.

   <b>num_clients</b>
       Number of processes currently connected to CTDB's unix socket. This includes recovery daemon, ctdb tool
       and samba processes (smbd, winbindd).

   <b>frozen</b>
       1 if the databases are currently frozen, 0 otherwise.

   <b>recovering</b>
       1 if recovery is active, 0 otherwise.

   <b>num_recoveries</b>
       Number of recoveries since the start of ctdb or since the last statistics reset.

   <b>client_packets_sent</b>
       Number of packets sent to client processes via unix domain socket.

   <b>client_packets_recv</b>
       Number of packets received from client processes via unix domain socket.

   <b>node_packets_sent</b>
       Number of packets sent to the other nodes in the cluster via TCP.

   <b>node_packets_recv</b>
       Number of packets received from the other nodes in the cluster via TCP.

   <b>keepalive_packets_sent</b>
       Number of keepalive messages sent to other nodes.

       CTDB periodically sends keepalive messages to other nodes. See KeepaliveInterval tunable in <b><a href="../man7/ctdbtunables.7.html">ctdb-</a></b>
       <b><a href="../man7/ctdbtunables.7.html">tunables</a></b>(7) for more details.

   <b>keepalive_packets_recv</b>
       Number of keepalive messages received from other nodes.

   <b>node</b>
       This section lists various types of messages processed which originated from other nodes via TCP.

       <b>req_call</b>

           Number of REQ_CALL messages from the other nodes.

       <b>reply_call</b>

           Number of REPLY_CALL messages from the other nodes.

       <b>req_dmaster</b>

           Number of REQ_DMASTER messages from the other nodes.

       <b>reply_dmaster</b>

           Number of REPLY_DMASTER messages from the other nodes.

       <b>reply_error</b>

           Number of REPLY_ERROR messages from the other nodes.

       <b>req_message</b>

           Number of REQ_MESSAGE messages from the other nodes.

       <b>req_control</b>

           Number of REQ_CONTROL messages from the other nodes.

       <b>reply_control</b>

           Number of REPLY_CONTROL messages from the other nodes.

       <b>req_tunnel</b>

           Number of REQ_TUNNEL messages from the other nodes.

   <b>client</b>
       This section lists various types of messages processed which originated from clients via unix domain
       socket.

       <b>req_call</b>

           Number of REQ_CALL messages from the clients.

       <b>req_message</b>

           Number of REQ_MESSAGE messages from the clients.

       <b>req_control</b>

           Number of REQ_CONTROL messages from the clients.

       <b>req_tunnel</b>

           Number of REQ_TUNNEL messages from the clients.

   <b>timeouts</b>
       This section lists timeouts occurred when sending various messages.

       <b>call</b>

           Number of timeouts for REQ_CALL messages.

       <b>control</b>

           Number of timeouts for REQ_CONTROL messages.

       <b>traverse</b>

           Number of timeouts for database traverse operations.

   <b>locks</b>
       This section lists locking statistics.

       <b>num_calls</b>

           Number of completed lock calls. This includes database locks and record locks.

       <b>num_current</b>

           Number of scheduled lock calls. This includes database locks and record locks.

       <b>num_pending</b>

           Number of queued lock calls. This includes database locks and record locks.

       <b>num_failed</b>

           Number of failed lock calls. This includes database locks and record locks.

   <b>total_calls</b>
       Number of req_call messages processed from clients. This number should be same as client --&gt; req_call.

   <b>pending_calls</b>
       Number of req_call messages which are currently being processed. This number indicates the number of
       record migrations in flight.

   <b>childwrite_calls</b>
       Number of record update calls. Record update calls are used to update a record under a transaction.

   <b>pending_childwrite_calls</b>
       Number of record update calls currently active.

   <b>memory_used</b>
       The amount of memory in bytes currently used by CTDB using talloc. This includes all the memory used for
       CTDB's internal data structures. This does not include the memory mapped TDB databases.

   <b>max_hop_count</b>
       The maximum number of hops required for a record migration request to obtain the record. High numbers
       indicate record contention.

   <b>total_ro_delegations</b>
       Number of readonly delegations created.

   <b>total_ro_revokes</b>
       Number of readonly delegations that were revoked. The difference between total_ro_revokes and
       total_ro_delegations gives the number of currently active readonly delegations.

   <b>hop_count_buckets</b>
       Distribution of migration requests based on hop counts values. Buckets are 0, &lt; 2, &lt; 4, &lt; 8, &lt; 16, &lt; 32,
       &lt; 64, &lt; 128, &lt; 256, &lt; 512, &lt; 1024, &lt; 2048, &lt; 4096, &lt; 8192, &lt; 16384, ≥ 16384.

   <b>lock_buckets</b>
       Distribution of record lock requests based on time required to obtain locks. Buckets are &lt; 1ms, &lt; 10ms,
       &lt; 100ms, &lt; 1s, &lt; 2s, &lt; 4s, &lt; 8s, &lt; 16s, &lt; 32s, &lt; 64s, ≥ 64s.

   <b>locks_latency</b>
       The minimum, the average and the maximum time (in seconds) required to obtain record locks.

   <b>reclock_ctdbd</b>
       The minimum, the average and the maximum time (in seconds) required to check if recovery lock is still
       held by recovery daemon when recovery mode is changed. This check is done in ctdb daemon.

   <b>reclock_recd</b>
       The minimum, the average and the maximum time (in seconds) required to check if recovery lock is still
       held by recovery daemon during recovery. This check is done in recovery daemon.

   <b>call_latency</b>
       The minimum, the average and the maximum time (in seconds) required to process a REQ_CALL message from
       client. This includes the time required to migrate a record from remote node, if the record is not
       available on the local node.

   <b>childwrite_latency</b>
       Default: 0

       The minimum, the average and the maximum time (in seconds) required to update records under a
       transaction.

</pre><h4><b>DATABASE</b> <b>STATISTICS</b></h4><pre>
       CTDB maintains per database statistics about important operations. See the <b><a href="../man1/ctdb.1.html">ctdb</a></b>(1) command <b>dbstatistics</b>
       for displaying database statistics.

   <b>Example:</b> <b>ctdb</b> <b>dbstatistics</b> <b>notify_index.tdb</b>
           DB Statistics: notify_index.tdb
            ro_delegations                     0
            ro_revokes                         0
            locks
                total                        131
                failed                         0
                current                        0
                pending                        0
            hop_count_buckets: 9890 5454 26 1 0 0 0 0 0 0 0 0 0 0 0 0
            lock_buckets: 4 117 10 0 0 0 0 0 0 0 0 0 0 0 0 0
            locks_latency      MIN/AVG/MAX     0.000683/0.004198/0.014730 sec out of 131
            Num Hot Keys:     3
                Count:7 Key:2f636c75737465726673
                Count:18 Key:2f636c757374657266732f64617461
                Count:7 Key:2f636c757374657266732f646174612f636c69656e7473

   <b>DB</b> <b>Statistics</b>
       Name of the database.

   <b>ro_delegations</b>
       Number of readonly delegations created in the database.

   <b>ro_revokes</b>
       Number of readonly delegations revoked. The difference in ro_delegations and ro_revokes indicates the
       currently active readonly delegations.

   <b>locks</b>
       This section lists locking statistics.

       <b>total</b>

           Number of completed lock calls. This includes database locks and record locks.

       <b>failed</b>

           Number of failed lock calls. This includes database locks and record locks.

       <b>current</b>

           Number of scheduled lock calls. This includes database locks and record locks.

       <b>pending</b>

           Number of queued lock calls. This includes database locks and record locks.

   <b>hop_count_buckets</b>
       Distribution of migration requests based on hop counts values. Buckets are 0, &lt; 2, &lt; 4, &lt; 8, &lt; 16, &lt; 32,
       &lt; 64, &lt; 128, &lt; 256, &lt; 512, &lt; 1024, &lt; 2048, &lt; 4096, &lt; 8192, &lt; 16384, ≥ 16384.

   <b>lock_buckets</b>
       Distribution of record lock requests based on time required to obtain locks. Buckets are &lt; 1ms, &lt; 10ms,
       &lt; 100ms, &lt; 1s, &lt; 2s, &lt; 4s, &lt; 8s, &lt; 16s, &lt; 32s, &lt; 64s, ≥ 64s.

   <b>locks_latency</b>
       The minimum, the average and the maximum time (in seconds) required to obtain record locks.

   <b>Num</b> <b>Hot</b> <b>Keys</b>
       Number of contended records determined by hop count. CTDB keeps track of top 10 hot records and the
       output shows hex encoded keys for the hot records.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man1/ctdb.1.html">ctdb</a></b>(1), <b><a href="../man1/ctdbd.1.html">ctdbd</a></b>(1), <b><a href="../man7/ctdb-tunables.7.html">ctdb-tunables</a></b>(7), <b><a href="http://ctdb.samba.org/">http://ctdb.samba.org/</a></b>

</pre><h4><b>AUTHOR</b></h4><pre>
       This documentation was written by Amitay Isaacs, Martin Schwenke

</pre><h4><b>COPYRIGHT</b></h4><pre>
       Copyright © 2007 Andrew Tridgell, Ronnie Sahlberg

       This program is free software; you can redistribute it and/or modify it under the terms of the GNU
       General Public License as published by the Free Software Foundation; either version 3 of the License, or
       (at your option) any later version.

       This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even
       the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public
       License for more details.

       You should have received a copy of the GNU General Public License along with this program; if not, see
       <b><a href="http://www.gnu.org/licenses">http://www.gnu.org/licenses</a></b>.

ctdb                                               07/21/2025                                 <u><a href="../man7/CTDB-STATISTICS.7.html">CTDB-STATISTICS</a></u>(7)
</pre>
 </div>
</div></section>
</div>
</body>
</html>