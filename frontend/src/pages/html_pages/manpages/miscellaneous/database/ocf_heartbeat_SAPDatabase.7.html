<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ocf_heartbeat_SAPDatabase - Manages a SAP database instance as an HA resource.</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/resource-agents-extra">resource-agents-extra_4.16.0-3ubuntu1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       ocf_heartbeat_SAPDatabase - Manages a SAP database instance as an HA resource.

</pre><h4><b>SYNOPSIS</b></h4><pre>

       <b>SAPDatabase</b> [start | stop | status | monitor | meta-data | validate-all]

</pre><h4><b>DESCRIPTION</b></h4><pre>
       Resource script for SAP databases. It manages a SAP database of any type as an HA resource.

       The purpose of the resource agent is to start, stop and monitor the database instance of a SAP system.
       Together with the RDBMS system it will also control the related network service for the database. Like
       the Oracle Listener and the xserver of MaxDB. The resource agent expects a standard SAP installation of
       the database and therefore needs less parameters to configure. The resource agent supports the following
       databases:

       - Oracle 10.2, 11.2 and 12

       - DB/2 UDB for Windows and Unix 9.x

       - SAP-DB / MaxDB 7.x

       - Sybase ASE 15.7

       - SAP HANA Database since 1.00 - with SAP note 1625203 (<a href="http://sdn.sap.com">http://sdn.sap.com</a>)

       In fact this resource agent does not run any database commands directly. It uses the SAP standard process
       SAPHostAgent to control the database. The SAPHostAgent must be installed on each cluster node locally. It
       will not work, if you try to run the SAPHostAgent also as a HA resource. Please follow SAP note 1031096
       for the installation of SAPHostAgent. The required minimum version of SAPHostAgent is: Release: 7.20
       Patch Number: 90 or compile time after: Dec 17 2011

       To exemplify the usage, for a HANA database with SID "TST" and instance number "10", the resource
       configuration using crmsh syntax looks like:

       primitive rsc_SAPDatabase_TST_HDB10 ocf:heartbeat:SAPDatabase \ params DBTYPE="HDB" SID="TST" \ op start
       interval="0" timeout="3600" \ op monitor interval="120" timeout="700" \ op stop interval="0"
       timeout="600"

       Make sure to tune the operations timeout values accordingly with your chosen Database and available
       infrastructure.

       Note that the same configuration can be achieved using any other CLI tool for cluster configuration
       available, like pcs or cibadmin.

</pre><h4><b>SUPPORTED</b> <b>PARAMETERS</b></h4><pre>
       <b>SID</b>
           The unique database system identifier. e.g. P01

           (unique, required, string, no default)

       <b>DIR_EXECUTABLE</b>
           The full qualified path where to find saphostexec and saphostctrl. Usually you can leave this empty.
           Then the default: /usr/sap/hostctrl/exe is used.

           (optional, string, default "/usr/sap/hostctrl/exe")

       <b>DBTYPE</b>
           The name of the database vendor you use. Set either: ADA, DB6, ORA, SYB, HDB

           (required, string, no default)

       <b>DBINSTANCE</b>
           Must be used for special database implementations, when database instance name is not equal to the
           SID (e.g. Oracle DataGuard)

           (unique, optional, string, no default)

       <b>DBOSUSER</b>
           The parameter can be set, if the database processes on operating system level are not executed with
           the default user of the used database type. Defaults: ADA=taken from /etc/opt/sdb, DB6=db2SID,
           ORA=oraSID and oracle, SYB=sybSID, HDB=SIDadm

           (unique, optional, string, no default)

       <b>NETSERVICENAME</b>
           Deprecated - do not use anymore. This parameter will be deleted in one of the next releases.

           (optional, string, no default)

       <b>DBJ2EE_ONLY</b>
           Deprecated - do not use anymore. This parameter will be deleted in one of the next releases.

           (optional, boolean, default false)

       <b>JAVA_HOME</b>
           Deprecated - do not use anymore. This parameter will be deleted in one of the next releases.

           (optional, string, no default)

       <b>STRICT_MONITORING</b>
           This controls how the resource agent monitors the database. If set to true, it will use 'saphostctrl
           -function GetDatabaseStatus' to test the database state. If set to false, only operating system
           processes are monitored.

           (optional, boolean, default false)

       <b>AUTOMATIC_RECOVER</b>
           If you set this to true, 'saphostctrl -function StartDatabase' will always be called with the
           '-force' option.

           (optional, boolean, default false)

       <b>MONITOR_SERVICES</b>
           Defines which services are monitored by the SAPDatabase resource agent. Service names must correspond
           with the output of the 'saphostctrl -function GetDatabaseStatus' command. The default
           MONITOR_SERVICES value is derived from the database type DBTYPE. For reference:

           - DBTYPE "ORA" sets MONITOR_SERVICES="Instance|Database|Listener";

           - DBTYPE "HDB" sets MONITOR_SERVICES="hdbindexserver|hdbnameserver";

           - DBTYPE "ADA" sets MONITOR_SERVICES="Database";

           - DBTYPE "DB6" sets MONITOR_SERVICES="{SID}|{db2sid}";

           - DBTYPE "SYB" sets MONITOR_SERVICES="Server".

           This parameter should be set ONLY if is needed to monitor different services than the ones listed
           above.

           (optional, string, no default)

       <b>DIR_BOOTSTRAP</b>
           Deprecated - do not use anymore. This parameter will be deleted in one of the next releases.

           (optional, string, no default)

       <b>DIR_SECSTORE</b>
           Deprecated - do not use anymore. This parameter will be deleted in one of the next releases.

           (optional, string, no default)

       <b>DB_JARS</b>
           Deprecated - do not use anymore. This parameter will be deleted in one of the next releases.

           (optional, string, no default)

       <b>PRE_START_USEREXIT</b>
           The full qualified path where to find a script or program which should be executed before this
           resource gets started.

           (optional, string, no default)

       <b>POST_START_USEREXIT</b>
           The full qualified path where to find a script or program which should be executed after this
           resource got started.

           (optional, string, no default)

       <b>PRE_STOP_USEREXIT</b>
           The full qualified path where to find a script or program which should be executed before this
           resource gets stopped.

           (optional, string, no default)

       <b>POST_STOP_USEREXIT</b>
           The full qualified path where to find a script or program which should be executed after this
           resource got stopped.

           (optional, string, no default)

</pre><h4><b>SUPPORTED</b> <b>ACTIONS</b></h4><pre>
       This resource agent supports the following actions (operations):

       <b>start</b>
           Starts the resource. Suggested minimum timeout: 1800s.

       <b>stop</b>
           Stops the resource. Suggested minimum timeout: 1800s.

       <b>status</b>
           Performs a status check. Suggested minimum timeout: 60s.

       <b>monitor</b>
           Performs a detailed status check. Suggested minimum timeout: 60s. Suggested interval: 120s.

       <b>validate-all</b>
           Performs a validation of the resource configuration. Suggested minimum timeout: 5s.

       <b>meta-data</b>
           Retrieves resource agent metadata (internal use only). Suggested minimum timeout: 5s.

       <b>methods</b>
           Suggested minimum timeout: 5s.

</pre><h4><b>EXAMPLE</b> <b>CRM</b> <b>SHELL</b></h4><pre>
       The following is an example configuration for a SAPDatabase resource using the <b><a href="../man8/crm.8.html">crm</a></b>(8) shell:

           primitive p_SAPDatabase ocf:heartbeat:SAPDatabase \
             params \
               SID=<u>string</u> \
               DBTYPE=<u>string</u> \
             op monitor depth="0" timeout="60s" interval="120s"

</pre><h4><b>EXAMPLE</b> <b>PCS</b></h4><pre>
       The following is an example configuration for a SAPDatabase resource using <b><a href="../man8/pcs.8.html">pcs</a></b>(8)

           pcs resource create p_SAPDatabase ocf:heartbeat:SAPDatabase \
             SID=<u>string</u> \
             DBTYPE=<u>string</u> \
             op monitor OCF_CHECK_LEVEL="0" timeout="60s" interval="120s"

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="http://clusterlabs.org/">http://clusterlabs.org/</a></b>

</pre><h4><b>AUTHOR</b></h4><pre>
       <b>ClusterLabs</b> <b>contributors</b> <b>(see</b> <b>the</b> <b>resource</b> <b>agent</b> <b>source</b> <b>for</b> <b>information</b> <b>about</b> <b>individual</b> <b>authors)</b>

resource-agents 4.16.0-3ubuntu                     06/25/2025                            <u><a href="../man7/OCF_HEARTBEAT_SAPDAT.7.html">OCF_HEARTBEAT_SAPDAT</a></u>(7)
</pre>
 </div>
</div></section>
</div>
</body>
</html>