<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ecm-toolchains - ECM Toolchains Reference</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/extra-cmake-modules">extra-cmake-modules_6.17.0-0ubuntu1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       ecm-toolchains - ECM Toolchains Reference

</pre><h4><b>INTRODUCTION</b></h4><pre>
       Extra  CMake Modules (ECM) provides some toolchain modules. Unlike normal modules, these are not included
       directly in projects, but specified with the <b>CMAKE_TOOLCHAIN_FILE</b> cache variable on the commandline.

</pre><h4><b>ALL</b> <b>MODULES</b></h4><pre>
   <b>AndroidToolchain</b>
       Enable easy compilation of cmake projects on Android.

       By using this android toolchain, the projects will be set up to compile the specified  project  targeting
       an  Android  platform, depending on its input.  Furthermore, if desired, an APK can be directly generated
       by using the <u>androiddeployqt</u> tool.

       CMake upstream has Android support now. This module will still give  us  some  useful  features  offering
       androiddeployqt integration and adequate executables format for our Android applications.

       Since  we  are  using  CMake  Android  support, any information from CMake documentation still applies: ‐
       <u>https://cmake.org/cmake/help/v3.7/manual/cmake-toolchains.7.html#cross-compiling-for-android</u>

       <b>NOTE:</b>
          This module requires CMake 3.18.

       Since 1.7.0.

   <b>Usage</b>
       To use this file, you need to set the <b>CMAKE_TOOLCHAIN_FILE</b> to point to <b>Android.cmake</b> on the command line:

          cmake -DCMAKE_TOOLCHAIN_FILE=/usr/share/ECM/toolchain/Android.cmake

       You will also need to provide the locations of the  Android  NDK  and  SDK.  This  can  be  done  on  the
       commandline or with environment variables; in either case the variable names are:

       <b>CMAKE_ANDROID_NDK</b>
              The NDK root path.

       <b>ANDROID_SDK_ROOT</b>
              The SDK root path.

       Additional options are specified as cache variables (eg: on the command line):

       <b>ANDROID_ABI</b>
              The  ABI  to  use.  See  the <b>sources/cxx-stl/gnu-libstdc++/*/libs</b> directories in the NDK. Default:
              <b>armeabi-v7a</b>.

       <b>ANDROID_SDK_COMPILE_API</b>
              The platform API level to compile against. May be different from the NDK target.  Default:  newest
              installed version (e.g. android-30).

       <b>ANDROID_SDK_BUILD_TOOLS_REVISION</b>
              The build tools version to use.  Default: newest installed version (e.g. <b>30.0.2</b>).

       <b>ANDROID_EXTRA_LIBS</b>
              The “;”-separated list of full paths to libs to include in resulting APK (Qt 5 only).

       For integrating other libraries which are not part of the Android toolchain, like Qt5, and installed to a
       separate  prefix  on  the  host  system,  the  install  prefixes  of  those  libraries would be passed as
       alternative roots as list via <b>ECM_ADDITIONAL_FIND_ROOT_PATH</b>. Since 5.30.0.

       For example, for integrating a Qt5 for Android present at <b><a href="file:~/Qt/5.14.2/android/">~/Qt/5.14.2/android/</a></b> and some  other  libraries
       installed to the prefix <b>/opt/android/foo</b>, you would use:

          cmake \
            -DCMAKE_TOOLCHAIN_FILE=/usr/share/ECM/toolchain/Android.cmake \
            -DECM_ADDITIONAL_FIND_ROOT_PATH="<a href="file:~/Qt/5.14.2/android/">~/Qt/5.14.2/android/</a>;/opt/android/foo"

       If  your  project  uses  <b>find_package()</b>  to  locate  build  tools  on  the host system, make sure to pass
       <b>CMAKE_FIND_ROOT_PATH_BOTH</b> or <b>NO_CMAKE_FIND_ROOT_PATH</b> as argument in  the  call.  See  the  <b>find_package()</b>
       documentation for more details.

   <b>Deploying</b> <b>Qt</b> <b>5</b> <b>Applications</b>
       After  building  the  application,  you  will  need to generate an APK that can be deployed to an Android
       device. This module integrates androiddeployqt support to help with this for Qt-based projects. To enable
       this, set the <b>QTANDROID_EXPORTED_TARGET</b> variable to the targets you wish  to  export  as  an  APK  (in  a
       ;-separed  list),  as well as <b>ANDROID_APK_DIR</b> to a directory containing some basic information. This will
       create a <b>create-apk-&lt;target&gt;</b> target that will generate the APK file.  See the <u>Qt</u>  <u>on</u>  <u>Android</u>  <u>deployment</u>
       <u>documentation</u> for more information.

       For example, you could do:

          cmake \
            -DCMAKE_TOOLCHAIN_FILE=/usr/share/ECM/toolchain/Android.cmake \
            -DQTANDROID_EXPORTED_TARGET=myapp \
            -DANDROID_APK_DIR=myapp-apk
          make
          make create-apk-myapp

       You  can  specify  the  APK output directory by setting <b>ANDROID_APK_OUTPUT_DIR</b>.  Otherwise the APK can be
       found in <b>myapp_build_apk/</b> in the build directory.

       The create-apk-myapp target  will  be  able  to  take  an  ARGS  parameter  with  further  arguments  for
       androiddeployqt. For example, one can use:

          make create-apk-myapp ARGS="--install"

       To install the apk to test. To generate a signed apk, one can do it with the following syntax:

          make create-apk-myapp ARGS="--sign <a href="file:~/my.keystore">~/my.keystore</a> alias_name"

       In  case  it’s needed for your application to set the APK directory from cmake scripting you can also set
       the directory as the ANDROID_APK_DIR property of the create-apk-myapp target.

       See Android documentation on how to create a keystore to use

   <b>Advanced</b> <b>Options</b>
       The following packaging  options  are  mainly  interesting  for  automation  or  integration  with  CI/CD
       pipelines:

       <b>ANDROID_APK_OUTPUT_DIR</b>
              Specifies a folder where the generated APK files should be placed.

       <b>ANDROID_FASTLANE_METADATA_OUTPUT_DIR</b>
              Specifies a folder where the generated metadata for the F-Droid store should be placed.

       <b>ANDROIDDEPLOYQT_EXTRA_ARGS</b>
              Allows  to  pass  additional  arguments  to  <u>androiddeployqt</u>.  This is an alternative to the <u>ARGS=</u>
              argument for <u>make</u> and unlike that works with all CMake generators.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <u><a href="../man7/ecm.7.html">ecm</a>(7)</u>

</pre><h4><b>COPYRIGHT</b></h4><pre>
       KDE Developers

6.17                                              Aug 08, 2025                                 <u><a href="../man7/ECM-TOOLCHAINS.7.html">ECM-TOOLCHAINS</a></u>(7)
</pre>
 </div>
</div></section>
</div>
</body>
</html>