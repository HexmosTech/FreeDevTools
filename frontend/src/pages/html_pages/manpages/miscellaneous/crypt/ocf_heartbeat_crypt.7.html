<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ocf_heartbeat_crypt - LUKS/crypt resource agent</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/resource-agents-extra">resource-agents-extra_4.16.0-3ubuntu1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       ocf_heartbeat_crypt - LUKS/crypt resource agent

</pre><h4><b>SYNOPSIS</b></h4><pre>

       <b>crypt</b> [start | stop | monitor | meta-data | validate-all]

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This is a LUKS/crypt Resource Agent managing encrypted devices via <a href="../man8/cryptsetup.8.html">cryptsetup</a>(8). The agent imposes
       limitations on device types supported: luks, luks[1..N].

</pre><h4><b>SUPPORTED</b> <b>PARAMETERS</b></h4><pre>
       <b>encrypted_dev</b>
           Encrypted backing device, which should be defined by UUID, 36 characters including '-'s as reported
           by <a href="../man8/blkid.8.html">blkid</a>(8).

           Although it can be defined as a block device path (e.g. /dev/sdh), the UUID should be preferred over
           the block device path to allow for the unique discovery of the crypt backing device given the
           volatile nature of <a href="file:/dev">/dev</a> entries (e.g. /dev/sdh on one node may be /dev/sdg on another).

           Only define as block device path if you know what you are doing.

           (unique, required, string, no default)

       <b>crypt_dev</b>
           Encrypted device name, no path. I.e. the one given in "cryptsetup open name ...". The resulting block
           device path is /dev/mapper/name.

           (unique, required, string, no default)

       <b>key_file</b>
           Key file path containing the encryption passphrase (aka key; see <a href="../man8/cryptsetup.8.html">cryptsetup</a>(8)). For LUKS, the
           passphrase as of the key_file parameter is used to decrypt a randomly selected key when the device
           was created.

           (required, string, no default)

       <b>crypt_type</b>
           Encryption (device) type (e.g. "luks" or "luks2").

           This parameter affirms the encryption format as of the crypt metadata thus allowing for safety
           measures when starting the encrypted resource.

           (required, string, no default)

       <b>force_stop</b>
           If processes or kernel threads are using the crypt device, it cannot be stopped. We will try to stop
           processes, first by sending TERM and then, if that doesn't help in seconds, using KILL. The <a href="../man8/lsof.8.html">lsof</a>(8)
           program is required to get the list of array users. Of course, the kernel threads cannot be stopped
           this way. If the processes are critical for data integrity, then set this parameter to false. Note
           that in that case the stop operation will fail and the node will be fenced.

           (optional, boolean, default false)

</pre><h4><b>SUPPORTED</b> <b>ACTIONS</b></h4><pre>
       This resource agent supports the following actions (operations):

       <b>start</b>
           Starts the resource. Suggested minimum timeout: 20s.

       <b>stop</b>
           Stops the resource. Suggested minimum timeout: 20s.

       <b>monitor</b>
           Performs a detailed status check. Suggested minimum timeout: 20s. Suggested interval: 10s.

       <b>meta-data</b>
           Retrieves resource agent metadata (internal use only). Suggested minimum timeout: 5s.

       <b>validate-all</b>
           Performs a validation of the resource configuration. Suggested minimum timeout: 10s.

</pre><h4><b>EXAMPLE</b> <b>CRM</b> <b>SHELL</b></h4><pre>
       The following is an example configuration for a crypt resource using the <b><a href="../man8/crm.8.html">crm</a></b>(8) shell:

           primitive p_crypt ocf:heartbeat:crypt \
             params \
               encrypted_dev=<u>string</u> \
               crypt_dev=<u>string</u> \
               key_file=<u>string</u> \
               crypt_type=<u>string</u> \
             op monitor timeout="20s" interval="10s" depth="0"

</pre><h4><b>EXAMPLE</b> <b>PCS</b></h4><pre>
       The following is an example configuration for a crypt resource using <b><a href="../man8/pcs.8.html">pcs</a></b>(8)

           pcs resource create p_crypt ocf:heartbeat:crypt \
             encrypted_dev=<u>string</u> \
             crypt_dev=<u>string</u> \
             key_file=<u>string</u> \
             crypt_type=<u>string</u> \
             op monitor timeout="20s" interval="10s" OCF_CHECK_LEVEL="0"

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="http://clusterlabs.org/">http://clusterlabs.org/</a></b>

</pre><h4><b>AUTHOR</b></h4><pre>
       <b>ClusterLabs</b> <b>contributors</b> <b>(see</b> <b>the</b> <b>resource</b> <b>agent</b> <b>source</b> <b>for</b> <b>information</b> <b>about</b> <b>individual</b> <b>authors)</b>

resource-agents 4.16.0-3ubuntu                     06/25/2025                             <u><a href="../man7/OCF_HEARTBEAT_CRYPT.7.html">OCF_HEARTBEAT_CRYPT</a></u>(7)
</pre>
 </div>
</div></section>
</div>
</body>
</html>