<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LISTEN - listen for a notification</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/postgresql-client-17">postgresql-client-17_17.5-1build1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       LISTEN - listen for a notification

</pre><h4><b>SYNOPSIS</b></h4><pre>
       LISTEN <u>channel</u>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>LISTEN</b> registers the current session as a listener on the notification channel named <u>channel</u>. If the
       current session is already registered as a listener for this notification channel, nothing is done.

       Whenever the command <b>NOTIFY</b> <u>channel</u> is invoked, either by this session or another one connected to the
       same database, all the sessions currently listening on that notification channel are notified, and each
       will in turn notify its connected client application.

       A session can be unregistered for a given notification channel with the <b>UNLISTEN</b> command. A session's
       listen registrations are automatically cleared when the session ends.

       The method a client application must use to detect notification events depends on which PostgreSQL
       application programming interface it uses. With the libpq library, the application issues <b>LISTEN</b> as an
       ordinary SQL command, and then must periodically call the function <b>PQnotifies</b> to find out whether any
       notification events have been received. Other interfaces such as libpgtcl provide higher-level methods
       for handling notify events; indeed, with libpgtcl the application programmer should not even issue <b>LISTEN</b>
       or <b>UNLISTEN</b> directly. See the documentation for the interface you are using for more details.

</pre><h4><b>PARAMETERS</b></h4><pre>
       <u>channel</u>
           Name of a notification channel (any identifier).

</pre><h4><b>NOTES</b></h4><pre>
       <b>LISTEN</b> takes effect at transaction commit. If <b>LISTEN</b> or <b>UNLISTEN</b> is executed within a transaction that
       later rolls back, the set of notification channels being listened to is unchanged.

       A transaction that has executed <b>LISTEN</b> cannot be prepared for two-phase commit.

       There is a race condition when first setting up a listening session: if concurrently-committing
       transactions are sending notify events, exactly which of those will the newly listening session receive?
       The answer is that the session will receive all events committed after an instant during the
       transaction's commit step. But that is slightly later than any database state that the transaction could
       have observed in queries. This leads to the following rule for using <b>LISTEN</b>: first execute (and commit!)
       that command, then in a new transaction inspect the database state as needed by the application logic,
       then rely on notifications to find out about subsequent changes to the database state. The first few
       received notifications might refer to updates already observed in the initial database inspection, but
       this is usually harmless.

       <b><a href="../man7/NOTIFY.7.html">NOTIFY</a></b>(7) contains a more extensive discussion of the use of <b>LISTEN</b> and <b>NOTIFY</b>.

</pre><h4><b>EXAMPLES</b></h4><pre>
       Configure and execute a listen/notify sequence from psql:

           LISTEN virtual;
           NOTIFY virtual;
           Asynchronous notification "virtual" received from server process with PID 8448.

</pre><h4><b>COMPATIBILITY</b></h4><pre>
       There is no <b>LISTEN</b> statement in the SQL standard.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man7/NOTIFY.7.html">NOTIFY</a></b>(7), <b><a href="../man7/UNLISTEN.7.html">UNLISTEN</a></b>(7), max_notify_queue_pages

PostgreSQL 17.5                                       2025                                             <u><a href="../man7/LISTEN.7.html">LISTEN</a></u>(7)
</pre>
 </div>
</div></section>
</div>
</body>
</html>