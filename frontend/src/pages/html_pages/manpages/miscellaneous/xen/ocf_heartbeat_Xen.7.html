<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ocf_heartbeat_Xen - Manages Xen unprivileged domains (DomUs)</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/resource-agents-extra">resource-agents-extra_4.16.0-3ubuntu1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       ocf_heartbeat_Xen - Manages Xen unprivileged domains (DomUs)

</pre><h4><b>SYNOPSIS</b></h4><pre>

       <b>Xen</b> [start | stop | monitor | migrate_to | migrate_from | meta-data | validate-all]

</pre><h4><b>DESCRIPTION</b></h4><pre>
       Resource Agent for the Xen Hypervisor. Manages Xen virtual machine instances by mapping cluster resource
       start and stop, to Xen create and shutdown, respectively.

       A note on names

       We will try to extract the name from the config file (the xmfile attribute). If you use a simple
       assignment statement, then you should be fine. Otherwise, if there's some python acrobacy involved such
       as dynamically assigning names depending on other variables, and we will try to detect this, then please
       set the name attribute. You should also do that if there is any chance of a pathological situation where
       a config file might be missing, for example if it resides on a shared storage. If all fails, we finally
       fall back to the instance id to preserve backward compatibility.

       Para-virtualized guests can also be migrated by enabling the meta_attribute allow-migrate.

       This resource agent may be configured for <u>native</u> <u>migration</u> if available in the cluster manager. For
       Pacemaker, the <u>allow-migrate="true"</u> meta attribute enables native migration.

</pre><h4><b>SUPPORTED</b> <b>PARAMETERS</b></h4><pre>
       <b>xmfile</b>
           Absolute path to the Xen control file, for this virtual machine.

           (required, string, default "/etc/xen/vm/MyDomU")

       <b>name</b>
           Name of the virtual machine.

           (optional, string, no default)

       <b>shutdown_timeout</b>
           The Xen agent will first try an orderly shutdown using xl shutdown. Should this not succeed within
           this timeout, the agent will escalate to xl destroy, forcibly killing the node.

           If this is not set, it will default to two-third of the stop action timeout.

           Setting this value to 0 forces an immediate destroy.

           (optional, string, no default)

       <b>shutdown_acpi</b>
           Handle shutdown by simulating an ACPI power button event. Enable this to allow graceful shutdown for
           HVM domains without installed PV drivers.

           (optional, boolean, default 0)

       <b>allow_mem_management</b>
           This parameter enables dynamic adjustment of memory for start and stop actions used for Dom0 and the
           DomUs. The default is to not adjust memory dynamically.

           (optional, boolean, default 0)

       <b>node_ip_attribute</b>
           In case of a live migration, the system will default to using the IP address associated with the
           hostname via DNS or /etc/hosts.

           This parameter allows you to specify a node attribute that will be queried instead for the target
           node, overriding the IP address. This allows you to use a dedicated network for live migration
           traffic to a specific node.

           Warning: make very sure the IP address does point to the right node. Or else the live migration will
           end up somewhere else, greatly confusing the cluster and causing havoc.

           (optional, string, no default)

       <b>reserved_Dom0_memory</b>
           In case memory management is used, this parameter defines the minimum amount of memory to be reserved
           for the dom0. The default minimum memory is 512MB.

           (optional, string, default "512")

       <b>autoset_utilization_cpu</b>
           If set true, the agent will detect the number of domain's vCPUs from Xen, and put it into the CPU
           utilization of the resource when the monitor is executed. Before enabling make sure node utilization
           is also set (using NodeUtilization agent or manually) or the resource might not be able to start
           anywhere.

           (optional, boolean, default false)

       <b>autoset_utilization_hv_memory</b>
           If set true, the agent will detect the number of memory from Xen, and put it into the hv_memory
           utilization of the resource when the monitor is executed. Before enabling make sure node utilization
           is also set (using NodeUtilization agent or manually) or the resource might not be able to start
           anywhere.

           (optional, boolean, default false)

       <b>monitor_scripts</b>
           To additionally monitor services within the unprivileged domain, add this parameter with a list of
           scripts to monitor.

           (optional, string, no default)

</pre><h4><b>SUPPORTED</b> <b>ACTIONS</b></h4><pre>
       This resource agent supports the following actions (operations):

       <b>start</b>
           Starts the resource. Suggested minimum timeout: 60s.

       <b>stop</b>
           Stops the resource. Suggested minimum timeout: 40s.

       <b>migrate_from</b>
           Executes steps necessary for migrating the resource <u>away</u> <u>from</u> the node. Suggested minimum timeout:
           120s.

       <b>migrate_to</b>
           Executes steps necessary for migrating the resource <u>to</u> the node. Suggested minimum timeout: 120s.

       <b>monitor</b>
           Performs a detailed status check. Suggested minimum timeout: 30s. Suggested interval: 10s.

       <b>meta-data</b>
           Retrieves resource agent metadata (internal use only). Suggested minimum timeout: 5s.

       <b>validate-all</b>
           Performs a validation of the resource configuration. Suggested minimum timeout: 5s.

</pre><h4><b>EXAMPLE</b> <b>CRM</b> <b>SHELL</b></h4><pre>
       The following is an example configuration for a Xen resource using the <b><a href="../man8/crm.8.html">crm</a></b>(8) shell:

           primitive p_Xen ocf:heartbeat:Xen \
             params \
               xmfile="/etc/xen/vm/MyDomU" \
             meta allow-migrate="true" \
             op monitor depth="0" timeout="30s" interval="10s"

</pre><h4><b>EXAMPLE</b> <b>PCS</b></h4><pre>
       The following is an example configuration for a Xen resource using <b><a href="../man8/pcs.8.html">pcs</a></b>(8)

           pcs resource create p_Xen ocf:heartbeat:Xen \
             xmfile="/etc/xen/vm/MyDomU" \
             op monitor OCF_CHECK_LEVEL="0" timeout="30s" interval="10s"

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="http://clusterlabs.org/">http://clusterlabs.org/</a></b>

</pre><h4><b>AUTHOR</b></h4><pre>
       <b>ClusterLabs</b> <b>contributors</b> <b>(see</b> <b>the</b> <b>resource</b> <b>agent</b> <b>source</b> <b>for</b> <b>information</b> <b>about</b> <b>individual</b> <b>authors)</b>

resource-agents 4.16.0-3ubuntu                     06/25/2025                               <u><a href="../man7/OCF_HEARTBEAT_XEN.7.html">OCF_HEARTBEAT_XEN</a></u>(7)
</pre>
 </div>
</div></section>
</div>
</body>
</html>