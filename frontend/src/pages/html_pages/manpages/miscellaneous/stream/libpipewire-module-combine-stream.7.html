<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>libpipewire-module-combine-stream - Combine Stream</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libpipewire-0.3-modules">libpipewire-0.3-modules_1.4.5-1ubuntu2_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       libpipewire-module-combine-stream - Combine Stream

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The combine stream can make:

       • a new virtual sink that forwards audio to other sinks

       • a new virtual source that combines audio from other sources

       The  sources  and  sink that need to be combined can be selected using generic match rules. This makes it
       possible to combine static nodes or nodes based on certain properties.

</pre><h4><b>MODULE</b> <b>NAME</b></h4><pre>
       libpipewire-module-combine-stream

</pre><h4><b>MODULE</b> <b>OPTIONS</b></h4><pre>
       • node.name: a unique name for the stream

       • node.description: a human readable name for the stream

       • combine.mode = capture | playback | sink | source, default sink

       • combine.latency-compensate: use delay buffers to match stream latencies

       • combine.on-demand-streams: use metadata to create streams on demand

       • combine.props = {}: properties to be passed to the sink/source

       • stream.props = {}: properties to be passed to the streams

       • stream.rules = {}: rules for matching streams, use create-stream actions

</pre><h4><b>GENERAL</b> <b>OPTIONS</b></h4><pre>
       Options with well-known behavior.

       • <b>remote.name</b>

       • <b>audio.channels</b>

       • <b>audio.position</b>

       • <b>media.name</b>

       • <b>node.latency</b>

       • <b>node.name</b>

       • <b>node.description</b>

       • <b>node.group</b>

       • <b>node.virtual</b>

       • <b>media.class</b>

</pre><h4><b>STREAM</b> <b>OPTIONS</b></h4><pre>
       • audio.position: Set the stream channel map. By default this is the same  channel  map  as  the  combine
         stream.

       • combine.audio.position: map the combine audio positions to the stream positions. combine input channels
         are mapped one-by-one to stream output channels.

</pre><h4><b>EXAMPLE</b> <b>CONFIGURATION</b></h4><pre>
       # <a href="file:~/.config/pipewire/pipewire.conf.d/my-combine-stream-1.conf">~/.config/pipewire/pipewire.conf.d/my-combine-stream-1.conf</a>

       context.modules = [
       {   name = libpipewire-module-combine-stream
           args = {
               combine.mode = sink
               node.name = "combine_sink"
               node.description = "My Combine Sink"
               combine.latency-compensate = false
               combine.props = {
                   audio.position = [ FL FR ]
               }
               stream.props = {
               }
               stream.rules = [
                   {
                       matches = [
                           # any of the items in matches needs to match, if one does,
                           # actions are emitted.
                           {
                               # all keys must match the value. ! negates. ~ starts regex.
                               #node.name = "~alsa_input.*"
                               media.class = "Audio/Sink"
                           }
                       ]
                       actions = {
                           create-stream = {
                               #combine.audio.position = [ FL FR ]
                               #audio.position = [ FL FR ]
                           }
                       }
                   }
               ]
           }
       }
       ]

       Below is an example configuration that makes a 5.1 virtual audio sink from 3 separate stereo sinks.

       # <a href="file:~/.config/pipewire/pipewire.conf.d/my-combine-stream-2.conf">~/.config/pipewire/pipewire.conf.d/my-combine-stream-2.conf</a>

       context.modules = [
       {   name = libpipewire-module-combine-stream
           args = {
               combine.mode = sink
               node.name = "combine_sink_5_1"
               node.description = "My 5.1 Combine Sink"
               combine.latency-compensate = false
               combine.props = {
                   audio.position = [ FL FR FC LFE SL SR ]
               }
               stream.props = {
                       stream.dont-remix = true      # link matching channels without remixing
               }
               stream.rules = [
                   {   matches = [
                           {   media.class = "Audio/Sink"
                               node.name = "alsa_output.usb-Topping_E30-00.analog-stereo"
                           } ]
                       actions = { create-stream = {
                               combine.audio.position = [ FL FR ]
                               audio.position = [ FL FR ]
                       } } }
                   {   matches = [
                           {   media.class = "Audio/Sink"
                               node.name = "alsa_output.usb-BEHRINGER_UMC404HD_192k-00.pro-output-0"
                           } ]
                       actions = { create-stream = {
                               combine.audio.position = [ FC LFE ]
                               audio.position = [ AUX0 AUX1 ]
                       } } }
                   {   matches = [
                           {   media.class = "Audio/Sink"
                               node.name = "alsa_output.pci-0000_00_1b.0.analog-stereo"
                           } ]
                       actions = { create-stream = {
                               combine.audio.position = [ SL SR ]
                               audio.position = [ FL FR ]
                       } } }
               ]
           }
       }
       ]

       Below is an example configuration that makes a 4.0 virtual audio source from 2 separate stereo sources.

       # <a href="file:~/.config/pipewire/pipewire.conf.d/my-combine-stream-3.conf">~/.config/pipewire/pipewire.conf.d/my-combine-stream-3.conf</a>

       context.modules = [
       {   name = libpipewire-module-combine-stream
           args = {
               combine.mode = source
               node.name = "combine_source_4_0"
               node.description = "My 4.0 Combine Source"
               combine.props = {
                   audio.position = [ FL FR SL SR ]
               }
               stream.props = {
                       stream.dont-remix = true
               }
               stream.rules = [
                   {   matches = [
                           {   media.class = "Audio/Source"
                               node.name = "alsa_input.usb-046d_HD_Pro_Webcam_C920_09D53E1F-02.analog-stereo"
                           } ]
                       actions = { create-stream = {
                               audio.position = [ FL FR ]
                               combine.audio.position = [ FL FR ]
                       } } }
                   {   matches = [
                           {   media.class = "Audio/Source"
                               node.name = "alsa_input.usb-046d_0821_9534DE90-00.analog-stereo"
                           } ]
                       actions = { create-stream = {
                               audio.position = [ FL FR ]
                               combine.audio.position = [ SL SR ]
                       } } }
               ]
           }
       }
       ]

PipeWire                                              1.4.5                 <u><a href="../man7/libpipewire-module-combine-stream.7.html">libpipewire-module-combine-stream</a></u>(7)
</pre>
 </div>
</div></section>
</div>
</body>
</html>