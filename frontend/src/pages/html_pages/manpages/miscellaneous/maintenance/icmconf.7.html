<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>icmconf - Configuration file for the icmbuild(1) program maintenance script</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/icmake">icmake_13.04.00-1ubuntu2_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       icmconf - Configuration file for the <b><a href="../man1/icmbuild.1.html">icmbuild</a></b>(1) program maintenance script

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The <u>icmconf</u> configuration file is used to configure program maintenance performed by <b><a href="../man1/icmbuild.1.html">icmbuild</a></b>(1). It uses
       various directives determining how the program or library maintenance is performed.

       <u>Icmconf’s</u>  directives  are  biased  towards the construction of <b>C++</b> programs, but program maintenance for
       other languages (e.g., <b>C</b>) can also easily be configured.

       The <b><a href="../man1/icmbuild.1.html">icmbuild</a></b>(1) script ignores empty lines and lines whose first non-blank characters are two consecutive
       forward slashes (//) or start with a hash-character (<u>#</u>). Long lines can be split over multiple  lines  by
       writing a final backslash character at lines continuing at the next line.

</pre><h4><b>CLASS</b> <b>DEPENDENCIES</b></h4><pre>
       Traditional  make-utilities  recompile  all  dependent  sources  once  header  files  are  modified. When
       developing <b>C++</b> programs this is hardly ever requird, as adding new member functions to classes  does  not
       require  you  to  recompile already existing source files. Recompilation <u>is</u> required when the data member
       organization of classes is altered.

       To handle class dependencies in a more sensible  way,  <b><a href="../man1/icmake.1.html">icmake</a></b>(1)  checks  class  dependencies  using  its
       support  programs <u>icm-dep</u>, visiting the classes listed in the <u>CLASSES</u> file if <u>icmconf’s</u> <u>USE_ALL</u> directive
       was specified. If a directory mentioned in the <u>CLASSES</u> file contains a file having a name  equal  to  the
       name specified at the <u>USE_ALL</u> parameter, then all sources of classes that depend on that particular class
       are  also  recompiled.  In  practice this means that when you change the data organization of a class you
       only need to <u>touch</u> it that directory the file whose name was specified by the <u>USE_ALL</u> directive. E.g., if
       your class is named <u>Data</u>, its sources are in the  sub-directory  <u>./data</u>,  and  <u>#define</u>  <u>USE_ALL</u>  <u>"a"</u>  was
       specified then after modifying the data organization of the class <u>Data</u> you only need to issue the command
       <u>touch</u>  <u>data/a</u>.  Subsequently,  at  the next <u>icmbuild</u> call all sources in <u>./data</u> as well as all sources in
       directories whose (header) files include <u>data.h</u> are recompiled as well.

       Likewise, if <u>#define</u> <u>SPCH</u> or (deprecated) <u>#define</u> <u>PRECOMP</u> was used, a similar action is performed for the
       precompiled headers: if a local file that’s (directly or indirectly) included by  internal  header  files
       has  changed,  then  the  Single  Pre-Compiled  Header (SPCH) file is recompiled (or (deprecated), having
       specified <u>PRECOMP</u> the modified class headers are recompiled).

       The <b><a href="../man1/icmbuild.1.html">icmbuild</a></b>(1) script itself does not  inspect  these  dependencies,  but  calls  the  support  programs
       <u>icm-spch</u>  and  <u>icm-dep</u> to perform the requird tests. The usage summaries of these programs are written to
       the standard output stream when calling, respectively <b>icmake</b> <u>-S</u> and <b>icmake</b> <u>-d</u>.

</pre><h4><b>DEFAULT</b> <b>DEFINE</b> <b>SPECIFICATIONS</b></h4><pre>
       The following <u>#defines</u>, except for those that are  shown  as  commented  (e.g.,  <u>//#define</u>  <u>REFRESH</u>)  are
       required.

       o      <b>//#define</b> <b>ADD_LIBRARIES</b>       <b>""</b>
              when  a  program must be linked against additional libraries (other than the name of the program’s
              library itself (cf. <u>LIBRARY</u>, below) then those libraries should be specified here.  E.g.,  when  a
              program is linked against <u>libbobcat</u> then the specification is:
                  #define ADD_LIBRARIES  "bobcat"

              If your program is linked against multiple libraries, then use a blank-separated list of libraries
              (like <u>#define</u> <u>ADD_LIBRARIES</u> <u>"bobcat</u> <u>math"</u>);

       o      <b>//#define</b> <b>ADD_LIBRARY_PATHS</b>  <b>""</b>
              this directtive must be specified if <u>ADD_LIBRARIES</u> is also specified, although it may be specified
              as  an  empty  string.   When  additional  libraries  (specified  at <u>ADD_LIBRARIES</u>) are located in
              non-standard library locations (e.g., not in <u><a href="file:/lib">/lib</a></u> and <u><a href="file:/usr/lib">/usr/lib</a></u>) then these  additional  paths  are
              (blank space separated) specified here. Specify only the paths, not the <u>-L</u> flags.

              It is stronly advised to specify full pathnames here.  Relative path specifications can be used by
              specifying paths relative to the directory that is specified at the <u>TMP_DIR</u> directive (see below);

       o      <b>//#define</b> <b>CLS</b>
              the  <u>clear</u>  <u>screen</u>  directive. If defined <u>tput</u> <u>clear</u> is called to clear the terminal screen before
              starting compilations. By default it is not defined. Alternatively the <u>-c</u> option can be passed  to
              <u>icmbuild</u>;

       o      <b>#define</b> <b>CXX</b> <b>"g++"</b>
              the  C++  compiler  to  use.  For a <b>C</b> compiler specify, e.g., <u>#define</u> <u>CC</u> <u>"gcc"</u>. Their settings are
              overruled by identically named environment variables. If only <b>C</b> files are  compiled  then  <u>#define</u>
              <u>CXX</u> can be omitted.

              By  specifying,  e.g.,  <b>#define</b>  <b>CXX</b>  <b>"ccache</b>  <b>g++"</b> compilations use caching facilities, which may
              impressively reduce recompilation times. Refer to the <b><a href="../man1/cccache.1.html">cccache</a></b>(1) man-page for details.

       o      <b>#define</b> <b>CXXFLAGS</b> <b>"-Werror</b> <b>-Wall</b> <b>-O2"</b>
              <b>C++</b> compiler options to use (here showing the default options). When the <b>C</b> compiler is  used,  use
              <u>#define</u> <u>CFLAGS</u> rather than <u>CXXFLAGS</u>. Their settings are overruled by identically named environment
              variables. If only <b>C</b> files are compiled then <u>#define</u> <u>CXXFLAGS</u> can be omitted.

              Additional  options  can  be  defined  by  adding  them  to  the CXXFLAGS definition. In addition,
              compilations use the environment variable <u>ICMAKE_CPPSTD</u> to set the  <b>C++</b>  standard  to  use.  E.g.,
              after defining

                  ICMAKE_CPPSTD=--std=c++26

              the compiler uses the options

                  --std=c++26 -Werror -Wall -O2

       o      <b>//#define</b> <b>DEFCOM</b>  <b>"..."</b>
              a  <u>DEFCOM</u> directive may be added to the <u>icmconf</u> file (the <b><a href="../man1/icmstart.1.html">icmstart</a></b>(1) script can do this for you).
              It can be specified as:
                  #define DEFCOM  "program"

              in which case <u>icmbuild</u> does program maintenance, or as
                  #define DEFCOM  "library"

              in which case <u>icmbuild</u> does library maintenance.;

       o      <b>//#define</b> <b>ICM_DEP</b>   <b>"-V</b> <b>go"</b>
              the existence and implied  existence  of  <u>USE_ALL</u>  files  (see  the  description  of  the  <u>USE_ALL</u>
              directive).  When  the  (deprecated)  <u>PRECOMP</u>  directive  is  specified the recency of precompiled
              headers is ensured (see also the <u>SPCH</u> description, below). By default <u>icm_dep</u> is called  with  the
              shown  default  arguments. If <u>icm_dep</u> should not be called define <u>ICM_DEP</u> as an empty string (<u>""</u>).
              <b><a href="../man1/Icmake.1.html">Icmake</a></b>(1)’s man-page contains a separate section about the <u>icm_dep</u> support program;

       o      <b>#define</b> <b>IH</b> <b>".ih"</b>
              the extension used for internal header files. See <u>#define</u> <u>SPCH</u> below. If  <u>SPCH</u>  is  specified  the
              ttI#define H) directive must also be specified;

       o      <b>//#define</b> <b>LDFLAGS</b>   <b>""</b>
              linker options to use. By default no options are passed to the linker. Its setting is overruled by
              an identically named environment variable;

       o      <b>//#define</b> <b>LIBRARY</b>   <b>"ofiles"</b>
              by  defining this directive a local library (<u>libofiles.a</u>) is constructed. When a binary program is
              built it is linked against this library rather than to the individual object files.

              If a library instead of a program must be constructed (see also the <u>DEFCOM</u>  directive),  then  the
              <u>LIBRARY</u>  directive  specifies  the  library’s base name (without the <u>lib</u> prefix and without the <u>.a</u>
              extension). In that case source files are  expected  in  sub-directories  of  the  project’s  main
              directory  (i.e.,  the  directory containing <u>icmconf</u>). In that case avoid having source and header
              files in the project’s main directory. Instead, move such files to a separate sub-directory;

       o      <b>//#define</b> <b>MAIN</b>   <b>"main.cc"</b>
              the source file in which the <u>int</u> <u>main</u> function is defined. This directive is required  when  doing
              program (rather than library) maintenance.

              Note:  if  source  files  are  located  in the project’s main directory but library maintenance is
              intended (e.g., by specifying <u>#define</u> <u>DEFCOM</u> <u>library</u>) then define <u>MAIN</u> to specify  a  pseudo  main
              source, whose base name is the base name of the header file in the project’s main directory. This,
              however,  is considered a kludge, and should be avoided by moving those source and header files to
              a separate sub-directory;

       o      <b>//#define</b> <b>MULTICOMP</b>   <b>"..."</b>
              Example: <u>#define</u> <u>MULTICOMP</u>  <u>"jobs</u> <u>-q"</u>

              This directive activates threaded compilation of source files. When used its first word  specifies
              the name of a file to contain information about which files must be compiled. This must be a plain
              filename,  not containing directory specifiers (like <u>/</u>). Refer to the <b><a href="../man1/icmake.1.html">icmake</a></b>(1) man-page’s section
              <u>ICM-MULTICOMP</u> covering options, arguments, and usage of <b>icm-multicomp</b> which is called when <u>#define</u>
              <u>MULTICOMP</u> is specified;

       o      <b>//#define</b> <b>NO_PRECOMP_WARNING"</b>
              when <u>#define</u> <u>PRECOMP</u> (now deprecated) is  specified  (see  below)  a  warning  is  issued  when  a
              class-directory   does   not  contain  a  <u>IH</u>  file.  Such  warnings  are  suppressed  by  defining
              <u>NO_PRECOMP_WARNING</u>. This option is only considered when <u>#define</u> <u>PRECOMP</u> is specified;

       o      <b>#define</b> <b>OBJ_EXT</b>   <b>".o"</b>
              this directive specifies the extension of object modules created by the compiler;

       o      <b>//#define</b> <b>PRECOMP</b>   <b>"-x</b> <b>c++-header"</b>
              (deprecated, consider declaring <u>#define</u> <u>SPCH</u> instead)
              define this directive to construct class-specific pre-compiled headers  (in  which  case  the  <u>IH</u>)
              directive  must  also  be  specified. Dependencies between (precompiled) headers are automatically
              considered.
              Existing precompiled headers are removed by <u>icmbuild</u> <u>cleangch</u>  (or  <u>icmbuild</u>  <u>clean</u>.  When  source
              files  of  other  languages  are  compiled  the  <u>PRECOMP’s</u>  <u>-x</u>  argument  must be adapted to those
              languages;

       o      <b>//#define</b> <b>REFRESH</b>
              define <u>REFRESH</u> to relink the binary program when <u>icmbuild</u> <u>program</u> is called, even when no file was
              (re)compiled. This is useful when the program links  to  external  libraries  which  were  updated
              separately from the currrent project;

       o      <b>//#define</b> <b>SHARED</b>
              this  directive  is  only interpreted when <u>LIBRARY</u> is also specified.  If defined a shared library
              (extension <u>.so*</u>) is built in addition to a static library (extension <u>.a</u>);
              The shared library receives <u>VERSION</u> as its version number while soft links  using  <u>VERSION</u>’s  (see
              below)  major  version  number  an  no version number are also made available. E.g., if <u>VERSION</u> is
              defined as <u>1.02.03</u> and <u>#define</u> <u>LIBRARY</u> <u>"demo"</u> then the shared library becomes  <u>libdemo.so.1.02.03</u>,
              with <u>libdemo.so.1</u> soft-linking to it, and <u>libdemo.so</u> soft-linking to <u>libdemo.so.1</u>;

       o      <b>//#define</b> <b>SHAREDREQ</b>   <b>""</b>
              when  creating  a shared library <u>SHAREDREQ</u> specifies the names of libraries and library paths that
              are required by  the  constructed  shared  library  itself.   E.g.,  if  a  library  is  found  in
              <u>/usr/lib/special</u>,  assuming  that  the name of the required library is <u>libspecial.so</u>, then use the
              specification <u>#define</u> <u>SHAREDREQ</u> <u>"-L/usr/lib/special</u> <u>-lspecial"</u>.  The <u><a href="file:/lib">/lib</a></u> and <u><a href="file:/usr/lib">/usr/lib</a></u>  paths  are
              usually  automatically  visited  by the linker and do not have the be specified. This directive is
              required (possibly as an empty string) if <u>SHARED</u> is defined;

       o      <b>#define</b> <b>SOURCES</b>   <b>"*.cc"</b>
              the pattern to locate sources in directories;

       o      <b>//#define</b> <b>SPCH</b>   <b>"..."</b>
              Example: <u>#define</u> <u>SPCH</u> <u>""</u>
              If <u>#define</u> <u>SPCH</u> is specified then <u>#define</u> <u>IH</u> must also be specified.
              This directive activates the construction of a Single Pre-Compiled Header  (SPCH).  Refer  to  the
              <b><a href="../man1/icmake.1.html">icmake</a></b>(1)  man-page,  section  <b>ICM-SPCH</b> for specific details and options when constructing a SPCH.
              The argument string  can  be  empty,  or  it  can  contain  specifications  which  are  used  when
              constructing  a  SPCH.  The  <u>--internal</u>  (or  <u>-i</u>)  option should not be specified as it is used by
              default when calling <b>icmake</b> <b>-S</b>.
              By default the (<u>g++</u>) command constructing the SPCH is echoed to the standard output  stream.  This
              can  be  suppressed  by  specifying  <u>--quiet</u> (or <u>-q</u>) in the <u>SPCH</u> string (e.g., <u>#define</u> <u>SPCH</u> <u>"-q"</u>).
              Additional options for the compiler can be specified using <u>--option</u> (or <u>-o</u>) specifications.

       o      <b>//#define</b> <b>SPCH_ARGS</b>   <b>"..."</b>
              Example: <u>#define</u> <u>SPCH_ARGS</u> <u>"specs</u> <u>f:compiler"</u>
              In practice the  <u>#define</u>  <u>SPCH_ARGS</u>  specification  is  hardly  ever  required.  It  requires  the
              specification of the <u>#define</u> <u>SPCH</u> directive. Refer to the <b><a href="../man1/icmake.1.html">icmake</a></b>(1) man-page, section <b>ICM-SPCH</b> for
              specific details about this specification.
              The  first  word  (<u>specs</u>) defines the name of the file (used by <b>icmake</b> <b>-S</b>) to contain the names of
              the headers used when constructing the SPCH. If <u>SPCH_ARGS</u> is  not  specified  then  <b>icmake</b>  <b>-S</b>  by
              default  uses  <u>specs</u>.  When  <u>SPCH_ARGS</u>  is  used  the specified name must be a plain filename, not
              containing directory specifiers (like <u>/</u>) or an extension.
              The second word (here: <u>f:compiler</u>) is optional, but when provided defines the file containing  the
              compiler-command  to  use when constructing the SPCH. By default the SPCH is constructed using the
              following command (all on one line):

              g++ -c -o $2 ${ICMAKE_CPPSTD} -Wall -Werror -O2 -x c++-header $1

              To the compiler-command options specified by <u>-o</u> specifications provided in the <u>#define</u> <u>SPCH</u> string
              are added. It is also possible (but probably less convenient) to specify the command  directly  as
              <u>SPCH_ARGS’s</u>  second  word.  In that case surround the command by <u>\\’</u> (two backslashes and a quote)
              characters to ensure that the multi-word specification is interpreted by <b>icmake</b>  <b>-S</b>  as  a  single
              argument.

       o      <b>#define</b> <b>TMP_DIR</b>   <b>"tmp"</b>
              the  directory in which intermediate results are stored. To avoid cross-device communications it’s
              probably best to define <u>TMP_DIR</u> as a sub-directory of the project’s main directory;

       o      <b>//#define</b> <b>USE_ALL</b>   <b>"a"</b>
              when defining this directive <b>icmbuild</b> looks for directories  containing  files  having  the  names
              defined  by the <u>USE_ALL</u> specification. All source files in those directories as well as all source
              files in directories that (recursively) depend on the set of directories under  consideration  are
              recompiled, after which the <u>USE_ALL</u> files are removed;

       o      <b>//#define</b> <b>USE_ECHO</b>   <b>ON</b>
              when defined as <u>ON</u> (rather than <u>OFF</u>) (system) commands executed by <u>icmbuild</u> are echoed;

       o      <b>//#define</b> <b>USE_VERSION</b>
              when  defined  (it  is  defined  by  default)  a  file <u>VERSION</u> is read by <u>icmconf</u> to determine the
              program’s or library’s version, and  the  project’s  release  years.  The  file  <u>VERSION</u>  must  be
              available in the project’s main directory containing lines like:
                  VERSION=1.02.03
                  YEARS=2010-2025

              )

</pre><h4><b>PARSER</b> <b>MAINTENANCE</b></h4><pre>
       The  following  directives  are  available  in  cases where  a program uses a parser generator creating a
       parser class from a grammar specification. By default they’re all commented out, and can be removed if  a
       parser  generator is not used. See also the <b><a href="../man7/icmstart.rc.7.html">icmstart.rc</a></b>(7) man-page (section(FINE-TUNING ICMCONF)) for an
       alternative way to specify the parser-related <u>#defines</u>.

       o      <b>//#define</b> <b>PARSER_DIR</b>   <b>""</b>
              the sub-directory containing the parser’s specification  file.  If  the  <u>PARSER_DIR</u>  directory  is
              specified then all other directives in this section must also be specified;

       o      <b>//#define</b> <b>PARSFILES</b>   <b>""</b>
              if the parser specification file named at <u>PARSSPEC</u> itself includes additional specification files,
              then  patterns matching these additional grammar specification files should be specified here. The
              pattern is interpreted in the directory specified at <u>PARSER_DIR</u> and could contain  a  subdirectory
              name (e.g. <u>specs/*</u>). When files matching the pattern are modified then a new parser is created;

       o      <b>//#define</b> <b>PARSFLAGS</b>   <b>"-V"</b>
              the flags that are used when calling the program specified at <u>PARSGEN</u>;

       o      <b>//#define</b> <b>PARSGEN</b>   <b>"bisonc++"</b>
              the name of the program generating the parser;

       o      <b>//#define</b> <b>PARSOUT</b>   <b>"parse.cc"</b>
              the  name  of  the  file  generated  by  the  parser generator (used by <u>icmbuild</u> when checking the
              timestamps of parser specification <b>s</b>);

       o      <b>//#define</b> <b>PARSSPEC</b>   <b>"grammar"</b>
              the name of the parser specification file. This file is expected in the directory specified by the
              <u>PARSER_DIR</u> directive.

</pre><h4><b>SCANNER</b> <b>MAINTENANCE</b></h4><pre>
       The following directives are available in cases where a program  uses  a  scanner  generator  creating  a
       lexical scanner class from a set of regular expressions. By default they’re all commented out, and can be
       removed  if  a  scanner  generator is not used. See also the <b><a href="../man7/icmstart.rc.7.html">icmstart.rc</a></b>(7) man-page (section(FINE-TUNING
       ICMCONF)) for an alternative way to specify the scanner-related <u>#defines</u>.

       o      <b>#define</b> <b>SCANNER_DIR</b>   <b>""</b>
              the subdirectory containing the scanner’s specification file.  If  the  <u>SCANNER_DIR</u>  directory  is
              specified then all other directives in this section must also be specified;

       o      <b>#define</b> <b>SCANFILES</b>   <b>""</b>
              if   the  lexical  scanner  specification  file  named  at  <u>SCANSPEC</u>  itself  includes  additional
              specification files, then patterns matching these additional lexer specification files  should  be
              specified  here.  The  pattern  is interpreted in the directory specified at <u>SCANNER_DIR</u> and could
              contain a subdirectory name (e.g. <u>specs/*</u>). When files matching the pattern are  modified  then  a
              new lexical scanner is created. By default no additional specification files are used;

       o      <b>#define</b> <b>SCANFLAGS</b>   <b>""</b>
              the flags that are used when calling the program specified at <u>SCANGEN</u>;

       o      <b>#define</b> <b>SCANGEN</b>   <b>"flexc++"</b>
              the name of the program generating the lexical scanner;

       o      <b>#define</b> <b>SCANOUT</b>   <b>"lex.cc"</b>
              the name of the file generated by the lexical scanner (which is used by <u>icmbuild</u> when checking the
              timestamps of scanner specification <b>s</b>).

       o      <b>#define</b> <b>SCANSPEC</b>   <b>"lexer"</b>
              the  name  of  the  lexical  scanner  specification  file.  This file is expected in the directory
              specified by the <u>SCANNER_DIR</u> directive.

</pre><h4><b>FILES</b></h4><pre>
       The mentioned paths are sugestive only and may be installation dependent:

       o      <b>/usr/share/icmake/CLASSES</b>
              : example of an <b>icmconf</b> <u>CLASSES</u> file;

       o      <b>/usr/share/icmake/icmconf</b>
              : default (skeleton) <b>icmbuild</b> resource files, like <u>main.cc,</u> <u>usage.cc</u>, etc.;

       o      <b>/etc/icmake</b>
              : directory containing the default system-wide <b><a href="../man1/icmstart.1.html">icmstart</a></b>(1) configuration file;

       o      <b>$HOME/.icmake</b>
              :  optional  user-defined  directory  containing  user-defined   specifications   overruling   the
              system-wide  definitions.  This  directory  is  the proper location for a file <u>AUTHOR</u> defining the
              <u>AUTHOR</u> directive with the user’s name. E.g., my <u>.icmake/AUTHOR</u> file contains:
                  #define AUTHOR  "Frank B. Brokken (<a href="mailto:f.b.brokken@rug.nl">f.b.brokken@rug.nl</a>)";

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man1/ccache.1.html">ccache</a></b>(1), <b><a href="../man1/icmake.1.html">icmake</a></b>(1), <b><a href="../man1/icmbuild.1.html">icmbuild</a></b>(1), <b><a href="../man1/icmstart.1.html">icmstart</a></b>(1), <b><a href="../man7/icmstart.rc.7.html">icmstart.rc</a></b>(7).

</pre><h4><b>BUGS</b></h4><pre>
       None reported.

</pre><h4><b>COPYRIGHT</b></h4><pre>
       This is free software, distributed under the terms of the GNU General Public License (GPL).

</pre><h4><b>AUTHOR</b></h4><pre>
       Frank B. Brokken (<b><a href="mailto:f.b.brokken@rug.nl">f.b.brokken@rug.nl</a></b>).

icmake.13.04.00                                     1992-2025                                         <u><a href="../man7/icmconf.7.html">icmconf</a></u>(7)
</pre>
 </div>
</div></section>
</div>
</body>
</html>