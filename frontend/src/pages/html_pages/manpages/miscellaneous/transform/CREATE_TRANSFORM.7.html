<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CREATE_TRANSFORM - define a new transform</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/postgresql-client-17">postgresql-client-17_17.5-1build1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       CREATE_TRANSFORM - define a new transform

</pre><h4><b>SYNOPSIS</b></h4><pre>
       CREATE [ OR REPLACE ] TRANSFORM FOR <u>type_name</u> LANGUAGE <u>lang_name</u> (
           FROM SQL WITH FUNCTION <u>from_sql_function_name</u> [ (<u>argument_type</u> [, ...]) ],
           TO SQL WITH FUNCTION <u>to_sql_function_name</u> [ (<u>argument_type</u> [, ...]) ]
       );

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>CREATE</b> <b>TRANSFORM</b> defines a new transform.  <b>CREATE</b> <b>OR</b> <b>REPLACE</b> <b>TRANSFORM</b> will either create a new
       transform, or replace an existing definition.

       A transform specifies how to adapt a data type to a procedural language. For example, when writing a
       function in PL/Python using the hstore type, PL/Python has no prior knowledge how to present hstore
       values in the Python environment. Language implementations usually default to using the text
       representation, but that is inconvenient when, for example, an associative array or a list would be more
       appropriate.

       A transform specifies two functions:

       •   A “from SQL” function that converts the type from the SQL environment to the language. This function
           will be invoked on the arguments of a function written in the language.

       •   A “to SQL” function that converts the type from the language to the SQL environment. This function
           will be invoked on the return value of a function written in the language.

       It is not necessary to provide both of these functions. If one is not specified, the language-specific
       default behavior will be used if necessary. (To prevent a transformation in a certain direction from
       happening at all, you could also write a transform function that always errors out.)

       To be able to create a transform, you must own and have USAGE privilege on the type, have USAGE privilege
       on the language, and own and have EXECUTE privilege on the from-SQL and to-SQL functions, if specified.

</pre><h4><b>PARAMETERS</b></h4><pre>
       <u>type_name</u>
           The name of the data type of the transform.

       <u>lang_name</u>
           The name of the language of the transform.

       <u>from_sql_function_name</u>[(<u>argument_type</u> [, ...])]
           The name of the function for converting the type from the SQL environment to the language. It must
           take one argument of type internal and return type internal. The actual argument will be of the type
           for the transform, and the function should be coded as if it were. (But it is not allowed to declare
           an SQL-level function returning internal without at least one argument of type internal.) The actual
           return value will be something specific to the language implementation. If no argument list is
           specified, the function name must be unique in its schema.

       <u>to_sql_function_name</u>[(<u>argument_type</u> [, ...])]
           The name of the function for converting the type from the language to the SQL environment. It must
           take one argument of type internal and return the type that is the type for the transform. The actual
           argument value will be something specific to the language implementation. If no argument list is
           specified, the function name must be unique in its schema.

</pre><h4><b>NOTES</b></h4><pre>
       Use <b>DROP</b> <b>TRANSFORM</b> to remove transforms.

</pre><h4><b>EXAMPLES</b></h4><pre>
       To create a transform for type hstore and language plpython3u, first set up the type and the language:

           CREATE TYPE hstore ...;

           CREATE EXTENSION plpython3u;

       Then create the necessary functions:

           CREATE FUNCTION hstore_to_plpython(val internal) RETURNS internal
           LANGUAGE C STRICT IMMUTABLE
           AS ...;

           CREATE FUNCTION plpython_to_hstore(val internal) RETURNS hstore
           LANGUAGE C STRICT IMMUTABLE
           AS ...;

       And finally create the transform to connect them all together:

           CREATE TRANSFORM FOR hstore LANGUAGE plpython3u (
               FROM SQL WITH FUNCTION hstore_to_plpython(internal),
               TO SQL WITH FUNCTION plpython_to_hstore(internal)
           );

       In practice, these commands would be wrapped up in an extension.

       The contrib section contains a number of extensions that provide transforms, which can serve as
       real-world examples.

</pre><h4><b>COMPATIBILITY</b></h4><pre>
       This form of <b>CREATE</b> <b>TRANSFORM</b> is a PostgreSQL extension. There is a <b>CREATE</b> <b>TRANSFORM</b> command in the SQL
       standard, but it is for adapting data types to client languages. That usage is not supported by
       PostgreSQL.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       CREATE FUNCTION (<b><a href="../man7/CREATE_FUNCTION.7.html">CREATE_FUNCTION</a></b>(7)), CREATE LANGUAGE (<b><a href="../man7/CREATE_LANGUAGE.7.html">CREATE_LANGUAGE</a></b>(7)), CREATE TYPE (<b><a href="../man7/CREATE_TYPE.7.html">CREATE_TYPE</a></b>(7)),
       DROP TRANSFORM (<b><a href="../man7/DROP_TRANSFORM.7.html">DROP_TRANSFORM</a></b>(7))

PostgreSQL 17.5                                       2025                                   <u>CREATE</u> <u><a href="../man7/TRANSFORM.7.html">TRANSFORM</a></u>(7)
</pre>
 </div>
</div></section>
</div>
</body>
</html>