<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>devctl — device event reporting and device control interface</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/freebsd-manpages">freebsd-manpages_12.2-2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       devctl — device event reporting and device control interface

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The  <b>devctl</b>  device is used to report device events from the kernel.  Future versions will allow for some
       device control as well.

</pre><h4><b>IMPLEMENTATION</b> <b>NOTES</b></h4><pre>
       This design allows only one reader for <u>/dev/devctl</u>.  This is not desirable in the long run, but will  get
       a lot of hair out of this implementation.  Maybe we should make this device a clonable device.

       Also note: we specifically do not attach a device to the <u>device_t</u> tree to avoid potential chicken and egg
       problems.   One could argue that all of this belongs to the root node.  One could also further argue that
       the <u><a href="../man3/sysctl.3.html">sysctl</a></u>(3) interface that we have now might more properly be an <u><a href="../man2/ioctl.2.html">ioctl</a></u>(2) interface.

       SIGIO support is included in the driver.  However, the author is not sure that the SIGIO support is  done
       correctly.   It  was  copied  from  a driver that had SIGIO support that likely has not been tested since
       FreeBSD 3.4 or FreeBSD 2.2.8!

       The read channel for this device is used to report changes to userland in realtime.  We return one record
       at a time.  If you try to read this device a character at a time, you will lose the  rest  of  the  data.
       Listening programs are expected to cope.

       The  sysctl  <u>hw.bus.devctl_queue</u>  can  be used to control queue length.  It is set to 0 to disable <b>devctl</b>
       when no <u><a href="../man8/devd.8.html">devd</a></u>(8) is running.

</pre><h4><b>PROTOCOL</b></h4><pre>
       The <b>devctl</b> device uses an ASCII protocol.  The driver returns one record at a time to its readers.   Each
       record is terminated with a newline.  The first character of the record is the event type.

       <u>Type</u>    <u>Description</u>
       !       A notify event, such as a link state change.
       +       Device node in tree attached.
       -       Device node in tree detached.
       ?       Unknown device detected.

   <b>Message</b> <b>Formats</b>
       Except for the first character in the record, attach and detach messages have the same format.

             <u>Tdev</u> <b>at</b> <u>parent</u> <b>on</b> <u>location</u>

       <u>Part</u>        <u>Description</u>
       <u>T</u>           + or -
       <u>dev</u>         The device name that was attached/detached.
       <u>parent</u>      The device name of the parent bus that attached the device.
       <u>location</u>    Bus specific location information.

       The  nomatch  messages  can be used to load devices driver.  If you load a device driver, then one of two
       things can happen.  If the device driver attaches to something, you will get a device  attached  message.
       If it does not, then nothing will happen.

       The  attach  and detach messages arrive after the event.  This means one cannot use the attach message to
       load an alternate driver.  The attach message driver has already claimed this device.  One cannot use the
       detach messages to flush data to the device.  The device is already gone.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <u><a href="../man8/devd.8.html">devd</a></u>(8)

Debian                                           March 26, 2014                                        <u><a href="../man4/DEVCTL.4.html">DEVCTL</a></u>(4)
</pre>
 </div>
</div></section>
</div>
</body>
</html>