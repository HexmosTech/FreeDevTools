<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>vcs, vcsa - virtual console memory</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/manpages">manpages_6.9.1-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       vcs, vcsa - virtual console memory

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <u>/dev/vcs0</u>  is  a  character  device  with  major  number 7 and minor number 0, usually with mode 0644 and
       ownership root:tty.  It refers to the memory of the currently displayed virtual console terminal.

       <u>/dev/vcs[1-63]</u> are character devices for virtual console terminals, they have major number  7  and  minor
       number  1  to  63,  usually  mode  0644  and ownership root:tty.  <u>/dev/vcsa[0-63]</u> are the same, but using
       <u>unsigned</u> <u>short</u>s (in host byte order) that include attributes, and prefixed with  four  bytes  giving  the
       screen  dimensions  and  cursor position: <u>lines</u>, <u>columns</u>, <u>x</u>, <u>y</u>.  (<u>x</u> = <u>y</u> = 0 at the top left corner of the
       screen.)

       When a 512-character font is loaded, the 9th bit  position  can  be  fetched  by  applying  the  <b><a href="../man2/ioctl.2.html">ioctl</a></b>(2)
       <b>VT_GETHIFONTMASK</b> operation (available since Linux 2.6.18) on <u>/dev/tty[1-63]</u>; the value is returned in the
       <u>unsigned</u> <u>short</u> pointed to by the third <b><a href="../man2/ioctl.2.html">ioctl</a></b>(2) argument.

       These devices replace the screendump <b><a href="../man2/ioctl.2.html">ioctl</a></b>(2) operations of <b><a href="../man2/ioctl_console.2.html">ioctl_console</a></b>(2), so the system administrator
       can control access using filesystem permissions.

       The devices for the first eight virtual consoles may be created by:

           for x in 0 1 2 3 4 5 6 7 8; do
               mknod -m 644 /dev/vcs$x c 7 $x;
               mknod -m 644 /dev/vcsa$x c 7 $[$x+128];
           done
           chown root:tty /dev/vcs*

       No <b><a href="../man2/ioctl.2.html">ioctl</a></b>(2) requests are supported.

</pre><h4><b>FILES</b></h4><pre>
       <u>/dev/vcs[0-63]</u>
       <u>/dev/vcsa[0-63]</u>

</pre><h4><b>VERSIONS</b></h4><pre>
       Introduced with Linux 1.1.92.

</pre><h4><b>EXAMPLES</b></h4><pre>
       You may do a screendump on vt3 by switching to vt1 and typing

           cat /dev/vcs3 &gt;foo

       Note that the output does not contain newline characters, so some processing may be required, like in

           fold -w 81 /dev/vcs3 | lpr

       or (horrors)

           setterm -dump 3 -file /proc/self/fd/1

       The <u>/dev/vcsa0</u> device is used for Braille support.

       This program displays the character and screen attributes under the cursor of the second virtual console,
       then changes the background color there:

       #include &lt;<a href="file:/usr/include/unistd.h">unistd.h</a>&gt;
       #include &lt;<a href="file:/usr/include/stdlib.h">stdlib.h</a>&gt;
       #include &lt;<a href="file:/usr/include/stdio.h">stdio.h</a>&gt;
       #include &lt;<a href="file:/usr/include/fcntl.h">fcntl.h</a>&gt;
       #include &lt;sys/ioctl.h&gt;
       #include &lt;<a href="file:/usr/include/linux/vt.h">linux/vt.h</a>&gt;

       int
       main(void)
       {
           int fd;
           char *device = "/dev/vcsa2";
           char *console = "/dev/tty2";
           struct {unsigned char lines, cols, x, y;} scrn;
           unsigned short s;
           unsigned short mask;
           unsigned char attrib;
           int ch;

           fd = open(console, O_RDWR);
           if (fd &lt; 0) {
               perror(console);
               exit(EXIT_FAILURE);
           }
           if (ioctl(fd, VT_GETHIFONTMASK, &amp;mask) &lt; 0) {
               perror("VT_GETHIFONTMASK");
               exit(EXIT_FAILURE);
           }
           (void) close(fd);
           fd = open(device, O_RDWR);
           if (fd &lt; 0) {
               perror(device);
               exit(EXIT_FAILURE);
           }
           (void) read(fd, &amp;scrn, 4);
           (void) lseek(fd, 4 + 2*(scrn.y*scrn.cols + scrn.x), SEEK_SET);
           (void) read(fd, &amp;s, 2);
           ch = s &amp; 0xff;
           if (s &amp; mask)
               ch |= 0x100;
           attrib = ((s &amp; ~mask) &gt;&gt; 8);
           printf("ch=%#03x attrib=%#02x\n", ch, attrib);
           s ^= 0x1000;
           (void) lseek(fd, -2, SEEK_CUR);
           (void) write(fd, &amp;s, 2);
           exit(EXIT_SUCCESS);
       }

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man2/ioctl_console.2.html">ioctl_console</a></b>(2), <b><a href="../man4/tty.4.html">tty</a></b>(4), <b><a href="../man4/ttyS.4.html">ttyS</a></b>(4), <b><a href="../man8/gpm.8.html">gpm</a></b>(8)

Linux man-pages 6.9.1                              2024-06-15                                             <u><a href="../man4/vcs.4.html">vcs</a></u>(4)
</pre>
 </div>
</div></section>
</div>
</body>
</html>