<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ddb — interactive kernel debugger</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/freebsd-manpages">freebsd-manpages_12.2-2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       ddb — interactive kernel debugger

</pre><h4><b>SYNOPSIS</b></h4><pre>
       In order to enable kernel debugging facilities include:

             <b>options</b> <b>KDB</b>
             <b>options</b> <b>DDB</b>

       To prevent activation of the debugger on kernel <u><a href="../man9/panic.9.html">panic</a></u>(9):

             <b>options</b> <b>KDB_UNATTENDED</b>

       In order to print a stack trace of the current thread on the console for a panic:

             <b>options</b> <b>KDB_TRACE</b>

       To print the numerical value of symbols in addition to the symbolic representation, define:

             <b>options</b> <b>DDB_NUMSYM</b>

       To enable the <u><a href="../man1/gdb.1.html">gdb</a></u>(1) backend, so that remote debugging with <u><a href="../man1/kgdb.1.html">kgdb</a></u>(1) is possible, include:

             <b>options</b> <b>GDB</b>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The  <b>ddb</b> kernel debugger is an interactive debugger with a syntax inspired by <u><a href="../man1/gdb.1.html">gdb</a></u>(1).  If linked into the
       running kernel, it can be invoked locally with the  ‘debug’  <u><a href="../man5/keymap.5.html">keymap</a></u>(5)  action.   The  debugger  is  also
       invoked  on  kernel <u><a href="../man9/panic.9.html">panic</a></u>(9) if the <u>debug.debugger_on_panic</u> <u><a href="../man8/sysctl.8.html">sysctl</a></u>(8) MIB variable is set non-zero, which
       is the default unless the KDB_UNATTENDED option is specified.

       The current location is called <u>dot</u>.  The <u>dot</u> is displayed with a hexadecimal format  at  a  prompt.   The
       commands  <b>examine</b>  and  <b>write</b>  update  <u>dot</u>  to the address of the last line examined or the last location
       modified, and set <u>next</u> to the address of the next location to be examined or changed.  Other commands  do
       not change <u>dot</u>, and set <u>next</u> to be the same as <u>dot</u>.

       The general command syntax is: <u>command</u>[<b>/</b><u>modifier</u>] [<u>addr</u>][,<u>count</u>]

       A  blank  line  repeats  the  previous  command  from  the  address  <u>next</u>  with count 1 and no modifiers.
       Specifying <u>addr</u> sets <u>dot</u> to the address.  Omitting <u>addr</u> uses <u>dot</u>.  A missing <u>count</u> is taken to be  1  for
       printing commands or infinity for stack traces.  A <u>count</u> of -1 is equivalent to a missing <u>count</u>.  Options
       that are supplied but not supported by the given <u>command</u> are usually ignored.

       The  <b>ddb</b>  debugger  has  a  pager  feature  (like the <u><a href="../man1/more.1.html">more</a></u>(1) command) for the output.  If an output line
       exceeds the number set in the <u>lines</u> variable, it displays “<b>--More--</b>” and waits for a response.  The valid
       responses for it are:

       <b>SPC</b>  one more page
       <b>RET</b>  one more line
       <b>q</b>    abort the current command, and return to the command input mode

       Finally, <b>ddb</b> provides a small (currently 10 items) command history, and offers simple <b>emacs</b>-style command
       line editing capabilities.  In addition to the <b>emacs</b> control keys, the usual ANSI arrow keys may be  used
       to browse through the history buffer, and move the cursor within the current line.

</pre><h4><b>COMMANDS</b></h4><pre>
       <b>examine</b>[<b>/AISabcdghilmorsuxz</b> <b>...</b>] [<u>addr</u>][,<u>count</u>]
       <b>x</b>[<b>/AISabcdghilmorsuxz</b> <b>...</b>] [<u>addr</u>][,<u>count</u>]
               Display  the  addressed  locations  according  to the formats in the modifier.  Multiple modifier
               formats display multiple locations.  If no format is specified, the  last  format  specified  for
               this command is used.

               The format characters are:
               <b>b</b>       look at by bytes (8 bits)
               <b>h</b>       look at by half words (16 bits)
               <b>l</b>       look at by long words (32 bits)
               <b>g</b>       look at by quad words (64 bits)
               <b>a</b>       print the location being displayed
               <b>A</b>       print the location with a line number if possible
               <b>x</b>       display in unsigned hex
               <b>z</b>       display in signed hex
               <b>o</b>       display in unsigned octal
               <b>d</b>       display in signed decimal
               <b>u</b>       display in unsigned decimal
               <b>r</b>       display in current radix, signed
               <b>c</b>       display  low  8  bits  as a character.  Non-printing characters are displayed as an octal
                       escape code (e.g., ‘\000’).
               <b>s</b>       display  the  null-terminated  string  at  the  location.   Non-printing  characters  are
                       displayed as octal escapes.
               <b>m</b>       display  in  unsigned  hex  with character dump at the end of each line.  The location is
                       also displayed in hex at the beginning of each line.
               <b>i</b>       display as an instruction
               <b>I</b>       display as an instruction with possible alternate formats depending on the  machine.   On
                       i386, this selects the alternate format for the instruction decoding (16 bits in a 32-bit
                       code segment and vice versa).
               <b>S</b>       display a symbol name for the pointer stored at the address

       <b>xf</b>      Examine  forward: execute an <b>examine</b> command with the last specified parameters to it except that
               the next address displayed by it is used as the start address.

       <b>xb</b>      Examine backward: execute an <b>examine</b> command with the last specified parameters to it except that
               the last start address subtracted by the size displayed by it is used as the start address.

       <b>print</b>[<b>/acdoruxz</b>]
       <b>p</b>[<b>/acdoruxz</b>]
               Print <u>addr</u>s according to the modifier character (as described above for <b>examine</b>).  Valid  formats
               are:  <b>a</b>,  <b>x</b>,  <b>z</b>, <b>o</b>, <b>d</b>, <b>u</b>, <b>r</b>, and <b>c</b>.  If no modifier is specified, the last one specified to it is
               used.  The argument <u>addr</u> can be a string, in which case it is printed as it is.  For example:

                     print/x "eax = " $eax "\necx = " $ecx "\n"

               will print like:

                     eax = xxxxxx
                     ecx = yyyyyy

       <b>write</b>[<b>/bhl</b>] <u>addr</u> <u>expr1</u> [<u>expr2</u> <u>...</u>]
       <b>w</b>[<b>/bhl</b>] <u>addr</u> <u>expr1</u> [<u>expr2</u> <u>...</u>]
               Write the expressions specified after <u>addr</u> on the command line at succeeding  locations  starting
               with  <u>addr</u>.  The write unit size can be specified in the modifier with a letter <b>b</b> (byte), <b>h</b> (half
               word) or <b>l</b> (long word) respectively.  If omitted, long word is assumed.

               <b>Warning</b>: since there is no delimiter between expressions, strange things may happen.  It is  best
               to enclose each expression in parentheses.

       <b>set</b> <b>$</b><u>variable</u> [<b>=</b>] <u>expr</u>
               Set  the  named  variable or register with the value of <u>expr</u>.  Valid variable names are described
               below.

       <b>break</b>[<b>/u</b>] [<u>addr</u>][,<u>count</u>]
       <b>b</b>[<b>/u</b>] [<u>addr</u>][,<u>count</u>]
               Set a break point at <u>addr</u>.  If <u>count</u> is supplied, the <b>continue</b> command  will  not  stop  at  this
               break  point  on  the  first  <u>count</u> - 1 times that it is hit.  If the break point is set, a break
               point number is printed with ‘#’.  This number can be used in deleting the break point or  adding
               conditions to it.

               If  the  <b>u</b> modifier is specified, this command sets a break point in user address space.  Without
               the <b>u</b> option, the address is considered to be in the kernel space, and a wrong space  address  is
               rejected  with  an  error  message.  This modifier can be used only if it is supported by machine
               dependent routines.

               <b>Warning</b>: If a user text is shadowed by a normal user space debugger, user space break points  may
               not  work  correctly.   Setting  a break point at the low-level code paths may also cause strange
               behavior.

       <b>delete</b> [<u>addr</u>]
       <b>d</b> [<u>addr</u>]
       <b>delete</b> <b>#</b><u>number</u>
       <b>d</b> <b>#</b><u>number</u>
               Delete the specified break point.  The break point can be specified by a break point number  with
               ‘#’,  or  by  using the same <u>addr</u> specified in the original <b>break</b> command, or by omitting <u>addr</u> to
               get the default address of <u>dot</u>.

       <b>watch</b> [<u>addr</u>][,<u>size</u>]
               Set a watchpoint for a region.  Execution stops when an attempt to modify the region occurs.  The
               <u>size</u> argument defaults to 4.  If you specify a wrong space address, the request is rejected  with
               an error message.

               <b>Warning</b>: Attempts to watch wired kernel memory may cause unrecoverable error in some systems such
               as i386.  Watchpoints on user addresses work best.

       <b>hwatch</b> [<u>addr</u>][,<u>size</u>]
               Set a hardware watchpoint for a region if supported by the architecture.  Execution stops when an
               attempt to modify the region occurs.  The <u>size</u> argument defaults to 4.

               <b>Warning</b>:  The hardware debug facilities do not have a concept of separate address spaces like the
               watch command does.  Use <b>hwatch</b> for setting watchpoints on kernel  address  locations  only,  and
               avoid its use on user mode address spaces.

       <b>dhwatch</b> [<u>addr</u>][,<u>size</u>]
               Delete specified hardware watchpoint.

       <b>step</b>[<b>/p</b>][,<u>count</u>]
       <b>s</b>[<b>/p</b>][,<u>count</u>]
               Single  step  <u>count</u>  times.  If the <b>p</b> modifier is specified, print each instruction at each step.
               Otherwise, only print the last instruction.

               <b>Warning</b>: depending on machine type, it may not be possible to single-step through some  low-level
               code  paths or user space code.  On machines with software-emulated single-stepping (e.g., pmax),
               stepping through code executed by interrupt handlers will probably do the wrong thing.

       <b>continue</b>[<b>/c</b>]
       <b>c</b>[<b>/c</b>]   Continue execution until a breakpoint or watchpoint.  If  the  <b>c</b>  modifier  is  specified,  count
               instructions while executing.  Some machines (e.g., pmax) also count loads and stores.

               <b>Warning</b>: when counting, the debugger is really silently single-stepping.  This means that single-
               stepping on low-level code may cause strange behavior.

       <b>until</b>[<b>/p</b>]
               Stop  at  the  next  call  or return instruction.  If the <b>p</b> modifier is specified, print the call
               nesting depth and the cumulative instruction count at each call or return.  Otherwise, only print
               when the matching return is hit.

       <b>next</b>[<b>/p</b>]
       <b>match</b>[<b>/p</b>]
               Stop at the matching return instruction.  If the <b>p</b> modifier is specified, print the call  nesting
               depth  and  the  cumulative instruction count at each call or return.  Otherwise, only print when
               the matching return is hit.

       <b>trace</b>[<b>/u</b>] [<u>pid</u> | <u>tid</u>][,<u>count</u>]
       <b>t</b>[<b>/u</b>] [<u>pid</u> | <u>tid</u>][,<u>count</u>]
       <b>where</b>[<b>/u</b>] [<u>pid</u> | <u>tid</u>][,<u>count</u>]
       <b>bt</b>[<b>/u</b>] [<u>pid</u> | <u>tid</u>][,<u>count</u>]
               Stack trace.  The <b>u</b> option traces user space; if omitted, <b>trace</b> only traces  kernel  space.   The
               optional  argument  <u>count</u>  is the number of frames to be traced.  If <u>count</u> is omitted, all frames
               are printed.

               <b>Warning</b>: User space stack trace is valid only if the machine dependent code supports it.

       <b>search</b>[<b>/bhl</b>] <u>addr</u> <u>value</u> [<u>mask</u>][,<u>count</u>]
               Search memory for <u>value</u>.  The optional <u>count</u> argument limits the search.

       <b>findstack</b> <u>addr</u>
               Prints the thread address for a thread kernel-mode stack of which contains the specified address.
               If the thread is not found, search the thread stack cache and prints the  cached  stack  address.
               Otherwise, prints nothing.

       <b>show</b> <b>all</b> <b>procs</b>[<b>/a</b>]
       <b>ps</b>[<b>/a</b>]  Display all process information.  The process information may not be shown if it is not supported
               in  the  machine,  or  the bottom of the stack of the target process is not in the main memory at
               that time.  The <b>a</b> modifier will print command line arguments for each process.

       <b>show</b> <b>all</b> <b>trace</b>
       <b>alltrace</b>
               Show a stack trace for every thread in the system.

       <b>show</b> <b>all</b> <b>ttys</b>
               Show all TTY's within the system.  Output is similar to <u><a href="../man8/pstat.8.html">pstat</a></u>(8), but also includes  the  address
               of the TTY structure.

       <b>show</b> <b>all</b> <b>vnets</b>
               Show  the  same  output  as "show vnet" does, but lists all virtualized network stacks within the
               system.

       <b>show</b> <b>allchains</b>
               Show the same information like "show lockchain" does, but for every thread in the system.

       <b>show</b> <b>alllocks</b>
               Show all locks that are currently held.  This command is only available if <u><a href="../man4/witness.4.html">witness</a></u>(4) is included
               in the kernel.

       <b>show</b> <b>allpcpu</b>
               The same as "show pcpu", but for every CPU present in the system.

       <b>show</b> <b>allrman</b>
               Show information related with resource management, including interrupt request lines, DMA request
               lines, I/O ports, I/O memory addresses, and Resource IDs.

       <b>show</b> <b>apic</b>
               Dump data about APIC IDT vector mappings.

       <b>show</b> <b>breaks</b>
               Show breakpoints set with the "break" command.

       <b>show</b> <b>bio</b> <u>addr</u>
               Show information about the bio structure <u>struct</u> <u>bio</u> present at <u>addr</u>.  See  the  <u>sys/bio.h</u>  header
               file and <u><a href="../man9/g_bio.9.html">g_bio</a></u>(9) for more details on the exact meaning of the structure fields.

       <b>show</b> <b>buffer</b> <u>addr</u>
               Show  information  about  the buf structure <u>struct</u> <u>buf</u> present at <u>addr</u>.  See the <u>sys/buf.h</u> header
               file for more details on the exact meaning of the structure fields.

       <b>show</b> <b>callout</b> <u>addr</u>
               Show information about the callout structure <u>struct</u> <u>callout</u> present at <u>addr</u>.

       <b>show</b> <b>cbstat</b>
               Show brief information about the TTY subsystem.

       <b>show</b> <b>cdev</b>
               Without argument, show the list of all created cdev's, consisting of devfs node name  and  struct
               cdev address.  When address of cdev is supplied, show some internal devfs state of the cdev.

       <b>show</b> <b>conifhk</b>
               Lists hooks currently waiting for completion in run_interrupt_driven_config_hooks().

       <b>show</b> <b>cpusets</b>
               Print numbered root and assigned CPU affinity sets.  See <u><a href="../man2/cpuset.2.html">cpuset</a></u>(2) for more details.

       <b>show</b> <b>cyrixreg</b>
               Show registers specific to the Cyrix processor.

       <b>show</b> <b>devmap</b>
               Prints  the  contents  of  the  static device mapping table.  Currently only available on the ARM
               architecture.

       <b>show</b> <b>domain</b> <u>addr</u>
               Print protocol domain structure <u>struct</u> <u>domain</u> at address <u>addr</u>.  See the <u>sys/domain.h</u> header  file
               for more details on the exact meaning of the structure fields.

       <b>show</b> <b>ffs</b> [<u>addr</u>]
               Show  brief  information  about  ffs mount at the address <u>addr</u>, if argument is given.  Otherwise,
               provides the summary about each ffs mount.

       <b>show</b> <b>file</b> <u>addr</u>
               Show information about the file structure <u>struct</u> <u>file</u> present at address <u>addr</u>.

       <b>show</b> <b>files</b>
               Show information about every file structure in the system.

       <b>show</b> <b>freepages</b>
               Show the number of physical pages in each of the free lists.

       <b>show</b> <b>geom</b> [<u>addr</u>]
               If the <u>addr</u> argument is not given, displays the entire GEOM topology.  If <u>addr</u> is given, displays
               details about the given GEOM object (class, geom, provider or consumer).

       <b>show</b> <b>idt</b>
               Show IDT layout.  The first column specifies the IDT vector.  The second one is the name  of  the
               interrupt/trap handler.  Those functions are machine dependent.

       <b>show</b> <b>igi_list</b> <u>addr</u>
               Show information about the IGMP structure <u>struct</u> <u>igmp_ifsoftc</u> present at <u>addr</u>.

       <b>show</b> <b>inodedeps</b> [<u>addr</u>]
               Show brief information about each inodedep structure.  If <u>addr</u> is given, only inodedeps belonging
               to the fs located at the supplied address are shown.

       <b>show</b> <b>inpcb</b> <u>addr</u>
               Show information on IP Control Block <u>struct</u> <u>in_pcb</u> present at <u>addr</u>.

       <b>show</b> <b>intr</b>
               Dump information about interrupt handlers.

       <b>show</b> <b>intrcnt</b>
               Dump the interrupt statistics.

       <b>show</b> <b>irqs</b>
               Show interrupt lines and their respective kernel threads.

       <b>show</b> <b>jails</b>
               Show  the list of <u><a href="../man8/jail.8.html">jail</a></u>(8) instances.  In addition to what <u><a href="../man8/jls.8.html">jls</a></u>(8) shows, also list kernel internal
               details.

       <b>show</b> <b>lapic</b>
               Show information from the local APIC registers for this CPU.

       <b>show</b> <b>lock</b> <u>addr</u>
               Show lock structure.  The output format is as follows:

               <b>class:</b>
                      Class of the lock.  Possible types include <u><a href="../man9/mutex.9.html">mutex</a></u>(9), <u><a href="../man9/rmlock.9.html">rmlock</a></u>(9), <u><a href="../man9/rwlock.9.html">rwlock</a></u>(9), <u><a href="../man9/sx.9.html">sx</a></u>(9).

               <b>name:</b>  Name of the lock.

               <b>flags:</b>
                      Flags passed to the lock initialization function.  <u>flags</u> values are lock class specific.

               <b>state:</b>
                      Current state of a lock.  <u>state</u> values are lock class specific.

               <b>owner:</b>
                      Lock owner.

       <b>show</b> <b>lockchain</b> <u>addr</u>
               Show all threads a particular thread at address <u>addr</u> is waiting on based on non-spin locks.

       <b>show</b> <b>lockedbufs</b>
               Show the same information as "show buf", but for every locked <u>struct</u> <u>buf</u> object.

       <b>show</b> <b>lockedvnods</b>
               List all locked vnodes in the system.

       <b>show</b> <b>locks</b>
               Prints all locks that are currently acquired.  This command is only available  if  <u><a href="../man4/witness.4.html">witness</a></u>(4)  is
               included in the kernel.

       <b>show</b> <b>locktree</b>

       <b>show</b> <b>malloc</b>
               Prints <u><a href="../man9/malloc.9.html">malloc</a></u>(9) memory allocator statistics.  The output format is as follows:

                     <b>Type</b>      Specifies  a  type  of memory.  It is the same as a description string used while
                               defining the given memory type with <u><a href="../man9/MALLOC_DECLARE.9.html">MALLOC_DECLARE</a></u>(9).
                     <b>InUse</b>     Number of memory allocations of the given type, for which <u><a href="../man9/free.9.html">free</a></u>(9)  has  not  been
                               called yet.
                     <b>MemUse</b>    Total memory consumed by the given allocation type.
                     <b>Requests</b>  Number of memory allocation requests for the given memory type.

               The same information can be gathered in userspace with “<b>vmstat</b> <b>-m</b>”.

       <b>show</b> <b>map</b>[<b>/f</b>] <u>addr</u>
               Prints the VM map at <u>addr</u>.  If the <b>f</b> modifier is specified the complete map is printed.

       <b>show</b> <b>msgbuf</b>
               Print  the  system's message buffer.  It is the same output as in the “<b>dmesg</b>” case.  It is useful
               if you got a kernel panic, attached a serial cable to the  machine  and  want  to  get  the  boot
               messages from before the system hang.
       <b>show</b> <b>mount</b>
               Displays short info about all currently mounted file systems.

       <b>show</b> <b>mount</b> <u>addr</u>
               Displays details about the given mount point.

       <b>show</b> <b>object</b>[<b>/f</b>] <u>addr</u>
               Prints the VM object at <u>addr</u>.  If the <b>f</b> option is specified the complete object is printed.

       <b>show</b> <b>panic</b>
               Print the panic message if set.

       <b>show</b> <b>page</b>
               Show statistics on VM pages.

       <b>show</b> <b>pageq</b>
               Show statistics on VM page queues.

       <b>show</b> <b>pciregs</b>
               Print  PCI  bus registers.  The same information can be gathered in userspace by running “<b>pciconf</b>
               <b>-lv</b>”.

       <b>show</b> <b>pcpu</b>
               Print current processor state.  The output format is as follows:

                     <b>cpuid</b>             Processor identifier.
                     <b>curthread</b>         Thread pointer, process identifier and the name of the process.
                     <b>curpcb</b>            Control block pointer.
                     <b>fpcurthread</b>       FPU thread pointer.
                     <b>idlethread</b>        Idle thread pointer.
                     <b>APIC</b> <b>ID</b>           CPU identifier coming from APIC.
                     <b>currentldt</b>        LDT pointer.
                     <b>spin</b> <b>locks</b> <b>held</b>   Names of spin locks held.

       <b>show</b> <b>pgrpdump</b>
               Dump process groups present within the system.

       <b>show</b> <b>proc</b> [<u>addr</u>]
               If no [<u>addr</u>] is  specified,  print  information  about  the  current  process.   Otherwise,  show
               information about the process at address <u>addr</u>.

       <b>show</b> <b>procvm</b>
               Show process virtual memory layout.

       <b>show</b> <b>protosw</b> <u>addr</u>
               Print protocol switch structure <u>struct</u> <u>protosw</u> at address <u>addr</u>.

       <b>show</b> <b>registers</b>[<b>/u</b>]
               Display  the register set.  If the <b>u</b> modifier is specified, it displays user registers instead of
               kernel registers or the currently saved one.

               <b>Warning</b>: The support of the <b>u</b> modifier depends on  the  machine.   If  not  supported,  incorrect
               information will be displayed.

       <b>show</b> <b>rman</b> <u>addr</u>
               Show  resource  manager object <u>struct</u> <u>rman</u> at address <u>addr</u>.  Addresses of particular pointers can
               be gathered with "show allrman" command.

       <b>show</b> <b>rtc</b>
               Show real time clock value.  Useful for long debugging sessions.

       <b>show</b> <b>sleepchain</b>
               Deprecated.  Now an alias for <b>show</b> <b>lockchain</b>.

       <b>show</b> <b>sleepq</b>
       <b>show</b> <b>sleepqueue</b>
               Both commands provide the same functionality.  They show sleepqueue <u>struct</u> <u>sleepqueue</u>  structure.
               Sleepqueues  are used within the FreeBSD kernel to implement sleepable synchronization primitives
               (thread holding a lock might sleep or be context switched), which at the  time  of  writing  are:
               <u><a href="../man9/condvar.9.html">condvar</a></u>(9), <u><a href="../man9/sx.9.html">sx</a></u>(9) and standard <u><a href="../man9/msleep.9.html">msleep</a></u>(9) interface.

       <b>show</b> <b>sockbuf</b> <u>addr</u>
       <b>show</b> <b>socket</b> <u>addr</u>
               Those commands print <u>struct</u> <u>sockbuf</u> and <u>struct</u> <u>socket</u> objects placed at <u>addr</u>.  Output consists of
               all  values  present  in  structures mentioned.  For exact interpretation and more details, visit
               <u>sys/socket.h</u> header file.

       <b>show</b> <b>sysregs</b>
               Show system registers (e.g., <b>cr0-4</b> on i386.)  Not present on some platforms.

       <b>show</b> <b>tcpcb</b> <u>addr</u>
               Print TCP control block <u>struct</u> <u>tcpcb</u> lying at address <u>addr</u>.  For exact interpretation of  output,
               visit <u>netinet/tcp.h</u> header file.

       <b>show</b> <b>thread</b> [<u>addr</u>]
               If  no <u>addr</u> is specified, show detailed information about current thread.  Otherwise, information
               about thread at <u>addr</u> is printed.

       <b>show</b> <b>threads</b>
               Show all threads within the system.  Output format is as follows:

                     <b>First</b> <b>column</b>   Thread identifier (TID)
                     <b>Second</b> <b>column</b>  Thread structure address
                     <b>Third</b> <b>column</b>   Backtrace.

       <b>show</b> <b>tty</b> <u>addr</u>
               Display the contents of a TTY structure in a readable form.

       <b>show</b> <b>turnstile</b> <u>addr</u>
               Show turnstile <u>struct</u> <u>turnstile</u> structure at address <u>addr</u>.  Turnstiles are structures used within
               the FreeBSD kernel to implement synchronization primitives which, while holding a  specific  type
               of  lock,  cannot  sleep  or  context  switch to another thread.  Currently, those are: <u><a href="../man9/mutex.9.html">mutex</a></u>(9),
               <u><a href="../man9/rwlock.9.html">rwlock</a></u>(9), <u><a href="../man9/rmlock.9.html">rmlock</a></u>(9).

       <b>show</b> <b>uma</b>
               Show UMA allocator statistics.  Output consists five columns:

                     <b>Zone</b>      Name of the UMA zone.  The same string that was passed  to  <u><a href="../man9/uma_zcreate.9.html">uma_zcreate</a></u>(9)  as  a
                               first argument.
                     <b>Size</b>      Size of a given memory object (slab).
                     <b>Used</b>      Number of slabs being currently used.
                     <b>Free</b>      Number of free slabs within the UMA zone.
                     <b>Requests</b>  Number of allocations requests to the given zone.

               The very same information might be gathered in the userspace with the help of “<b>vmstat</b> <b>-z</b>”.

       <b>show</b> <b>unpcb</b> <u>addr</u>
               Shows UNIX domain socket private control block <u>struct</u> <u>unpcb</u> present at the address <u>addr</u>.

       <b>show</b> <b>vmochk</b>
               Prints, whether the internal VM objects are in a map somewhere and none have zero ref counts.

       <b>show</b> <b>vmopag</b>
               This  is  supposed  to  show  physical  addresses  consumed by a VM object.  Currently, it is not
               possible to use this command when <u><a href="../man4/witness.4.html">witness</a></u>(4) is compiled in the kernel.

       <b>show</b> <b>vnet</b> <u>addr</u>
               Prints virtualized network stack <u>struct</u> <u>vnet</u> structure present at the address <u>addr</u>.

       <b>show</b> <b>vnode</b> [<u>addr</u>]
               Prints vnode <u>struct</u> <u>vnode</u> structure lying at [<u>addr</u>].  For the exact interpretation of the output,
               look at the <u>sys/vnode.h</u> header file.

       <b>show</b> <b>vnodebufs</b> <u>addr</u>
               Shows clean/dirty buffer lists of the vnode located at <u>addr</u>.

       <b>show</b> <b>vpath</b> <u>addr</u>
               Walk the namecache to lookup the pathname of the vnode located at <u>addr</u>.

       <b>show</b> <b>watches</b>
               Displays all watchpoints.  Shows watchpoints set with "watch" command.

       <b>show</b> <b>witness</b>
               Shows information about lock acquisition coming from the <u><a href="../man4/witness.4.html">witness</a></u>(4) subsystem.

       <b>gdb</b>     Toggles between remote GDB and DDB mode.  In remote GDB mode, another machine  is  required  that
               runs  <u><a href="../man1/gdb.1.html">gdb</a></u>(1)  using the remote debug feature, with a connection to the serial console port on the
               target machine.  Currently only available on the i386 architecture.

       <b>halt</b>    Halt the system.

       <b>kill</b> <u>sig</u> <u>pid</u>
               Send signal <u>sig</u> to process <u>pid</u>.  The signal is acted on upon returning from the  debugger.   This
               command  can  be used to kill a process causing resource contention in the case of a hung system.
               See <u><a href="../man3/signal.3.html">signal</a></u>(3) for a list of signals.  Note that the arguments are reversed relative to <u><a href="../man2/kill.2.html">kill</a></u>(2).

       <b>reboot</b> [<u>seconds</u>]
       <b>reset</b> [<u>seconds</u>]
               Hard reset the system.  If the optional argument <u>seconds</u> is given, the  debugger  will  wait  for
               this long, at most a week, before rebooting.

       <b>help</b>    Print a short summary of the available commands and command abbreviations.

       <b>capture</b> <b>on</b>
       <b>capture</b> <b>off</b>
       <b>capture</b> <b>reset</b>
       <b>capture</b> <b>status</b>
               <b>ddb</b>  supports  a  basic  output  capture  facility,  which can be used to retrieve the results of
               debugging commands from userspace using <u><a href="../man3/sysctl.3.html">sysctl</a></u>(3).  <b>capture</b> <b>on</b> enables  output  capture;  <b>capture</b>
               <b>off</b>  disables capture.  <b>capture</b> <b>reset</b> will clear the capture buffer and disable capture.  <b>capture</b>
               <b>status</b> will report current buffer use, buffer size, and disposition of output capture.

               Userspace processes may inspect and manage <b>ddb</b> capture state using <u><a href="../man8/sysctl.8.html">sysctl</a></u>(8):

               debug.ddb.capture.bufsize may be used to query or set the current capture buffer size.

               debug.ddb.capture.maxbufsize may be used to query the compile-time limit on  the  capture  buffer
               size.

               debug.ddb.capture.bytes  may  be  used  to  query  the number of bytes of output currently in the
               capture buffer.

               debug.ddb.capture.data returns the contents of  the  buffer  as  a  string  to  an  appropriately
               privileged process.

               This  facility  is  particularly useful in concert with the scripting and <u><a href="../man4/textdump.4.html">textdump</a></u>(4) facilities,
               allowing scripted debugging output to be captured and committed to disk as part of a textdump for
               later analysis.  The contents of the capture buffer may also be inspected in a kernel  core  dump
               using <u><a href="../man1/kgdb.1.html">kgdb</a></u>(1).

       <b>run</b>
       <b>script</b>
       <b>scripts</b>
       <b>unscript</b>
               Run,  define,  list, and delete scripts.  See the “SCRIPTING” section for more information on the
               scripting facility.

       <b>textdump</b> <b>dump</b>
       <b>textdump</b> <b>set</b>
       <b>textdump</b> <b>status</b>
       <b>textdump</b> <b>unset</b>
               Use the <b>textdump</b> <b>dump</b> command to immediately perform a textdump.  More information may  be  found
               in  <u><a href="../man4/textdump.4.html">textdump</a></u>(4).  The <b>textdump</b> <b>set</b> command may be used to force the next kernel core dump to be a
               textdump rather than a traditional memory dump or minidump.  <b>textdump</b> <b>status</b>  reports  whether  a
               textdump  has been scheduled.  <b>textdump</b> <b>unset</b> cancels a request to perform a textdump as the next
               kernel core dump.

</pre><h4><b>VARIABLES</b></h4><pre>
       The debugger accesses registers and variables as <b>$</b><u>name</u>.  Register names are as in  the  “<b>show</b>  <b>registers</b>”
       command.   Some  variables  are  suffixed  with  numbers,  and  may  have some modifier following a colon
       immediately after the variable name.  For example, register variables can have a <b>u</b> modifier  to  indicate
       user register (e.g., “<b>$eax:u</b>”).

       Built-in variables currently supported are:

       <u>radix</u>     Input and output radix.
       <u>maxoff</u>    Addresses are printed as “<u>symbol</u><b>+</b><u>offset</u>” unless <u>offset</u> is greater than <u>maxoff</u>.
       <u>maxwidth</u>  The width of the displayed line.
       <u>lines</u>     The number of lines.  It is used by the built-in pager.  Setting it to 0 disables paging.
       <u>tabstops</u>  Tab stop width.
       <u>workxx</u>    Work variable; <u>xx</u> can take values from 0 to 31.

</pre><h4><b>EXPRESSIONS</b></h4><pre>
       Most expression operators in C are supported except ‘~’, ‘^’, and unary ‘&amp;’.  Special rules in <b>ddb</b> are:

       Identifiers  The  name  of a symbol is translated to the value of the symbol, which is the address of the
                    corresponding object.  ‘.’ and ‘:’ can be used in the identifier.  If supported by an object
                    format dependent routine, [<u>filename</u>:]<u>func</u>:<u>lineno</u>, [<u>filename</u>:]<u>variable</u>, and [<u>filename</u>:]<u>lineno</u>
                    can be accepted as a symbol.

       Numbers      Radix is determined by the first  two  letters:  ‘0x’:  hex,  ‘0o’:  octal,  ‘0t’:  decimal;
                    otherwise, follow current radix.

       <b>.</b>            <u>dot</u>

       <b>+</b>            <u>next</u>

       <b>..</b>           address of the start of the last line examined.  Unlike <u>dot</u> or <u>next</u>, this is only changed by
                    <b>examine</b> or <b>write</b> command.

       <b>'</b>            last address explicitly specified.

       <b>$</b><u>variable</u>    Translated  to  the  value  of  the  specified  variable.   It  may be followed by a ‘:’ and
                    modifiers as described above.

       <u>a</u><b>#</b><u>b</u>          A binary operator which rounds up the left hand side to the  next  multiple  of  right  hand
                    side.

       <b>*</b><u>expr</u>        Indirection.  It may be followed by a ‘:’ and modifiers as described above.

</pre><h4><b>SCRIPTING</b></h4><pre>
       <b>ddb</b>  supports a basic scripting facility to allow automating tasks or responses to specific events.  Each
       script consists of a list of DDB commands to be executed sequentially, and is  assigned  a  unique  name.
       Certain script names have special meaning, and will be automatically run on various <b>ddb</b> events if scripts
       by those names have been defined.

       The  <b>script</b>  command may be used to define a script by name.  Scripts consist of a series of <b>ddb</b> commands
       separated with the ‘;’ character.  For example:

             script kdb.enter.panic=bt; show pcpu
             script lockinfo=show alllocks; show lockedvnods

       The <b>scripts</b> command lists currently defined scripts.

       The <b>run</b> command execute a script by name.  For example:

             run lockinfo

       The <b>unscript</b> command may be used to delete a script by name.  For example:

             unscript kdb.enter.panic

       These functions may also be performed from userspace using the <u><a href="../man8/ddb.8.html">ddb</a></u>(8) command.

       Certain scripts are run automatically, if defined, for specific <b>ddb</b> events.  The follow scripts  are  run
       when various events occur:

       kdb.enter.acpi       The kernel debugger was entered as a result of an <u><a href="../man4/acpi.4.html">acpi</a></u>(4) event.

       kdb.enter.bootflags  The  kernel debugger was entered at boot as a result of the debugger boot flag being
                            set.

       kdb.enter.break      The kernel debugger was entered as a result of a serial or console break.

       kdb.enter.cam        The kernel debugger was entered as a result of a <u><a href="../man4/CAM.4.html">CAM</a></u>(4) event.

       kdb.enter.mac        The kernel debugger was  entered  as  a  result  of  an  assertion  failure  in  the
                            <u><a href="../man4/mac_test.4.html">mac_test</a></u>(4) module of the TrustedBSD MAC Framework.

       kdb.enter.ndis       The kernel debugger was entered as a result of an <u><a href="../man4/ndis.4.html">ndis</a></u>(4) breakpoint event.

       kdb.enter.netgraph   The kernel debugger was entered as a result of a <u><a href="../man4/netgraph.4.html">netgraph</a></u>(4) event.

       kdb.enter.panic      <u><a href="../man9/panic.9.html">panic</a></u>(9) was called.

       kdb.enter.powerfail  The  kernel  debugger  was  entered  as  a  result of a powerfail NMI on the sparc64
                            platform.

       kdb.enter.powerpc    The kernel debugger was entered as a result of an unimplemented  interrupt  type  on
                            the powerpc platform.

       kdb.enter.sysctl     The kernel debugger was entered as a result of the debug.kdb.enter sysctl being set.

       kdb.enter.trapsig    The  kernel  debugger  was  entered  as  a  result of a trapsig event on the sparc64
                            platform.

       kdb.enter.unionfs    The kernel debugger was entered as a result of an assertion  failure  in  the  union
                            file system.

       kdb.enter.unknown    The kernel debugger was entered, but no reason has been set.

       kdb.enter.vfslock    The kernel debugger was entered as a result of a VFS lock violation.

       kdb.enter.watchdog   The kernel debugger was entered as a result of a watchdog firing.

       kdb.enter.witness    The kernel debugger was entered as a result of a <u><a href="../man4/witness.4.html">witness</a></u>(4) violation.

       In the event that none of these scripts is found, <b>ddb</b> will attempt to execute a default script:

       kdb.enter.default    The  kernel  debugger  was  entered,  but  a  script exactly matching the reason for
                            entering was not defined.  This can be used as  a  catch-all  to  handle  cases  not
                            specifically  of  interest;  for example, kdb.enter.witness might be defined to have
                            special handling, and kdb.enter.default might be defined to simply panic and reboot.

</pre><h4><b>HINTS</b></h4><pre>
       On machines with an ISA expansion bus, a simple NMI generation card can be constructed  by  connecting  a
       push  button  between  the  A01  and  B01  (CHCHK# and GND) card fingers.  Momentarily shorting these two
       fingers together may cause the bridge chipset to generate an NMI, which causes the kernel to pass control
       to <b>ddb</b>.  Some bridge chipsets do not generate a NMI on CHCHK#, so your mileage may vary.  The NMI  allows
       one  to break into the debugger on a wedged machine to diagnose problems.  Other bus' bridge chipsets may
       be able to generate NMI using bus specific methods.  There are many PCI and PCIe add-in cards  which  can
       generate  NMI  for  debugging.  Modern server systems typically use IPMI to generate signals to enter the
       debugger.  The devel/ipmitool port can be used to send the <b>chassis</b> <b>power</b> <b>diag</b> command which  delivers  an
       NMI  to  the  processor.  Embedded systems often use JTAG for debugging, but rarely use it in combination
       with <b>ddb</b>.

       For serial consoles, you can enter the debugger by sending a  BREAK  condition  on  the  serial  line  if
       <b>options</b>  <b>BREAK_TO_DEBUGGER</b> is specified in the kernel.  Most terminal emulation programs can send a break
       sequence with a special key sequence or via a menu item.  However, in some setups, sending the break  can
       be  difficult  to  arrange or happens spuriously, so if the kernel contains <b>options</b> <b>ALT_BREAK_TO_DEBUGGER</b>
       then the sequence of CR TILDE CTRL-B enters the debugger; CR TILDE  CTRL-P  causes  a  panic  instead  of
       entering the debugger; and CR TILDE CTRL-R causes an immediate reboot.  In all the above sequences, CR is
       a  Carriage  Return  and  is  usually  sent by hitting the Enter or Return key.  TILDE is the ASCII tilde
       character (~).  CTRL-x is Control x created by hitting the control key and  then  x  and  then  releasing
       both.

       The  break  to  enter  the  debugger  behavior  may  be  enabled  at  run-time  by  setting the <u><a href="../man8/sysctl.8.html">sysctl</a></u>(8)
       debug.kdb.break_to_debugger to 1.  The alternate sequence to enter the debugger behavior may  be  enabled
       at  run-time  by setting the <u><a href="../man8/sysctl.8.html">sysctl</a></u>(8) debug.kdb.alt_break_to_debugger to 1.  The debugger may be entered
       by setting the <u><a href="../man8/sysctl.8.html">sysctl</a></u>(8) debug.kdb.enter to 1.

</pre><h4><b>FILES</b></h4><pre>
       Header files mentioned in this manual page can be found below <u><a href="file:/usr/include">/usr/include</a></u> directory.

       <b>-</b>   <u>sys/buf.h</u>
       <b>-</b>   <u>sys/domain.h</u>
       <b>-</b>   <u>netinet/in_pcb.h</u>
       <b>-</b>   <u>sys/socket.h</u>
       <b>-</b>   <u>sys/vnode.h</u>

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <u><a href="../man1/gdb.1.html">gdb</a></u>(1), <u><a href="../man1/kgdb.1.html">kgdb</a></u>(1), <u><a href="../man4/acpi.4.html">acpi</a></u>(4), <u><a href="../man4/CAM.4.html">CAM</a></u>(4), <u><a href="../man4/mac_test.4.html">mac_test</a></u>(4), <u><a href="../man4/ndis.4.html">ndis</a></u>(4),  <u><a href="../man4/netgraph.4.html">netgraph</a></u>(4),  <u><a href="../man4/textdump.4.html">textdump</a></u>(4),  <u><a href="../man4/witness.4.html">witness</a></u>(4),  <u><a href="../man8/ddb.8.html">ddb</a></u>(8),
       <u><a href="../man8/sysctl.8.html">sysctl</a></u>(8), <u><a href="../man9/panic.9.html">panic</a></u>(9)

</pre><h4><b>HISTORY</b></h4><pre>
       The  <b>ddb</b>  debugger  was  developed  for Mach, and ported to 386BSD 0.1.  This manual page translated from
       <u><a href="../man7/man.7.html">man</a></u>(7) macros by Garrett Wollman.

       Robert N. M. Watson added support for <b>ddb</b> output capture, <u><a href="../man4/textdump.4.html">textdump</a></u>(4) and scripting in FreeBSD 7.1.

Debian                                          September 7, 2018                                         <u><a href="../man4/DDB.4.html">DDB</a></u>(4)
</pre>
 </div>
</div></section>
</div>
</body>
</html>