<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ng_mppc — Microsoft MPPC/MPPE compression and encryption netgraph node type</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/freebsd-manpages">freebsd-manpages_12.2-2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       ng_mppc — Microsoft MPPC/MPPE compression and encryption netgraph node type

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;sys/types.h&gt;</b>
       <b>#include</b> <b>&lt;netgraph/ng_mppc.h&gt;</b>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The  <b>mppc</b>  node  type  implements the Microsoft Point-to-Point Compression (MPPC) and Microsoft Point-to-
       Point Encryption (MPPE) sub-protocols of the PPP protocol.  These protocols are often used in conjunction
       with the Point-to-Point Tunneling Protocol (PPTP).

       The node has two hooks, comp for compression and decomp for decompression.   Typically  one  or  both  of
       these  hooks  would  be  connected  to  the <u><a href="../man4/ng_ppp.4.html">ng_ppp</a></u>(4) node type hook of the same name.  Each direction of
       traffic flow is independent of the other.

</pre><h4><b>HOOKS</b></h4><pre>
       This node type supports the following hooks:

       <u>comp</u>    Connection to <u><a href="../man4/ng_ppp.4.html">ng_ppp</a></u>(4) comp hook.  Incoming frames are compressed  and/or  encrypted,  and  sent
               back out the same hook.

       <u>decomp</u>  Connection to <u><a href="../man4/ng_ppp.4.html">ng_ppp</a></u>(4) decomp hook.  Incoming frames are decompressed and/or decrypted, and sent
               back out the same hook.

</pre><h4><b>CONTROL</b> <b>MESSAGES</b></h4><pre>
       This node type supports the generic control messages, plus the following:

       NGM_MPPC_CONFIG_COMP
            This  command  resets and configures the node for a session in the outgoing traffic direction (i.e.,
            for compression and/or encryption).  This command takes a struct ng_mppc_config as an argument:

            /* Length of MPPE key */
            #define MPPE_KEY_LEN      16

            /* MPPC/MPPE PPP negotiation bits */
            #define MPPC_BIT          0x00000001      /* mppc compression bits */
            #define MPPE_40           0x00000020      /* use 40 bit key */
            #define MPPE_56           0x00000080      /* use 56 bit key */
            #define MPPE_128          0x00000040      /* use 128 bit key */
            #define MPPE_BITS         0x000000e0      /* mppe encryption bits */
            #define MPPE_STATELESS    0x01000000      /* use stateless mode */
            #define MPPC_VALID_BITS   0x010000e1      /* possibly valid bits */

            /* Configuration for a session */
            struct ng_mppc_config {
                u_char    enable;                 /* enable */
                uint32_t  bits;                   /* config bits */
                u_char    startkey[MPPE_KEY_LEN]; /* start key */
            };

            The enabled field enables traffic flow through the node.   The  bits  field  contains  the  bits  as
            negotiated by the Compression Control Protocol (CCP) in PPP.  The startkey is only necessary if MPPE
            was  negotiated,  and must be equal to the session start key as defined for MPPE.  This key is based
            on the MS-CHAP credentials used at link authentication time.

       NGM_MPPC_CONFIG_DECOMP
            This command resets and configures the node for a session in the incoming traffic  direction  (i.e.,
            for decompression and/or decryption).  This command takes a struct ng_mppc_config as an argument.

       NGM_MPPC_RESETREQ
            This  message  contains  no  arguments,  and  is  bi-directional.   If  an  error is detected during
            decompression, this message is sent by the node to  the  originator  of  the  NGM_MPPC_CONFIG_DECOMP
            message  that initiated the session.  The receiver should respond by sending a PPP CCP Reset-Request
            to the peer.

            This message may also be received by this node type when a CCP  Reset-Request  is  received  by  the
            local  PPP  entity.  The node will respond by flushing its outgoing compression and encryption state
            so the remote side can resynchronize.

</pre><h4><b>SHUTDOWN</b></h4><pre>
       This node shuts down upon receipt of a NGM_SHUTDOWN  control  message,  or  when  both  hooks  have  been
       disconnected.

</pre><h4><b>COMPILATION</b></h4><pre>
       The  kernel  options  NETGRAPH_MPPC_COMPRESSION  and NETGRAPH_MPPC_ENCRYPTION are supplied to selectively
       compile in either or both capabilities.  At least one of these must be defined, or else this node type is
       useless.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <u><a href="../man4/netgraph.4.html">netgraph</a></u>(4), <u><a href="../man4/ng_ppp.4.html">ng_ppp</a></u>(4), <u><a href="../man8/ngctl.8.html">ngctl</a></u>(8)

       G. Pall, <u>Microsoft</u> <u>Point-To-Point</u> <u>Compression</u> <u>(MPPC)</u> <u>Protocol</u>, RFC 2118.

       G. S.  Pall  and  G.  Zorn,  <u>Microsoft</u>  <u>Point-To-Point</u>  <u>Encryption</u>  <u>(MPPE)</u>  <u>Protocol</u>,  draft-ietf-pppext-
       mppe-04.txt.

       K.  Hamzeh,  G.  Pall,  W. Verthein, J. Taarud, W. Little, and G. Zorn, <u>Point-to-Point</u> <u>Tunneling</u> <u>Protocol</u>
       <u>(PPTP)</u>, RFC 2637.

</pre><h4><b>AUTHORS</b></h4><pre>
       Archie Cobbs &lt;<u><a href="mailto:archie@FreeBSD.org">archie@FreeBSD.org</a></u>&gt;

</pre><h4><b>BUGS</b></h4><pre>
       In PPP, encryption should be handled by the Encryption Control Protocol (ECP) rather than CCP.   However,
       Microsoft  combined  both  compression  and  encryption  into  their  ``compression'' algorithm, which is
       confusing.

Debian                                            June 7, 2016                                        <u><a href="../man4/NG_MPPC.4.html">NG_MPPC</a></u>(4)
</pre>
 </div>
</div></section>
</div>
</body>
</html>