<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>if_ipsec — IPsec virtual tunneling interface</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/freebsd-manpages">freebsd-manpages_12.2-2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       if_ipsec — IPsec virtual tunneling interface

</pre><h4><b>SYNOPSIS</b></h4><pre>
       The  <b>if_ipsec</b>  network  interface  is a part of the FreeBSD IPsec implementation.  To compile it into the
       kernel, place this line in the kernel configuration file:

             <b>options</b> <b>IPSEC</b>

       It can also be loaded as part of the <b>ipsec</b> kernel module if the kernel was compiled with

             <b>options</b> <b>IPSEC_SUPPORT</b>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The <b>if_ipsec</b> network interface is targeted for creating route-based VPNs.  It can tunnel  IPv4  and  IPv6
       traffic over either IPv4 or IPv6 and secure it with ESP.

       <b>if_ipsec</b>  interfaces  are  dynamically  created  and  destroyed  with  the <u><a href="../man8/ifconfig.8.html">ifconfig</a></u>(8) <b>create</b> and <b>destroy</b>
       subcommands.  The administrator must configure IPsec <b>tunnel</b> endpoint addresses.  These addresses will  be
       used  for  the  outer  IP  header  of ESP packets.  The administrator can also configure the protocol and
       addresses for the inner IP header with <u><a href="../man8/ifconfig.8.html">ifconfig</a></u>(8), and modify the routing table  to  route  the  packets
       through the <b>if_ipsec</b> interface.

       When  the  <b>if_ipsec</b>  interface  is configured, it automatically creates special security policies.  These
       policies can be used to acquire  security  associations  from  the  IKE  daemon,  which  are  needed  for
       establishing  an  IPsec tunnel.  It is also possible to create needed security associations manually with
       the <u><a href="../man8/setkey.8.html">setkey</a></u>(8) utility.

       Each <b>if_ipsec</b> interface has an additional numeric configuration option <b>reqid</b> <u>id</u>.   This  <u>id</u>  is  used  to
       distinguish  traffic  and  security  policies  between  several  <b>if_ipsec</b>  interfaces.   The <b>reqid</b> can be
       specified on interface creation and changed later.  If not specified, it is automatically assigned.  Note
       that changing <b>reqid</b> will lead to generation of new security policies, and this may require  creating  new
       security associations.

</pre><h4><b>EXAMPLES</b></h4><pre>
       The  example  below  shows manual configuration of an IPsec tunnel between two FreeBSD hosts.  Host A has
       the IP address 192.168.0.3, and host B has the IP address 192.168.0.5.

       On host A:

             ifconfig ipsec0 create reqid 100
             ifconfig ipsec0 inet tunnel 192.168.0.3 192.168.0.5
             ifconfig ipsec0 inet 172.16.0.3/16 172.16.0.5
             setkey -c
             add 192.168.0.3 192.168.0.5 esp 10000 -m tunnel -u 100 -E rijndael-cbc "VerySecureKey!!1";
             add 192.168.0.5 192.168.0.3 esp 10001 -m tunnel -u 100 -E rijndael-cbc "VerySecureKey!!2";
             ^D

       On host B:

             ifconfig ipsec0 create reqid 200
             ifconfig ipsec0 inet tunnel 192.168.0.5 192.168.0.3
             ifconfig ipsec0 inet 172.16.0.5/16 172.16.0.3
             setkey -c
             add 192.168.0.3 192.168.0.5 esp 10000 -m tunnel -u 200 -E rijndael-cbc "VerySecureKey!!1";
             add 192.168.0.5 192.168.0.3 esp 10001 -m tunnel -u 200 -E rijndael-cbc "VerySecureKey!!2";
             ^D

       Note the value 100 on host A and value 200 on host B are used as reqid.  The same value must be  used  as
       identifier of the policy entry in the <u><a href="../man8/setkey.8.html">setkey</a></u>(8) command.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <u><a href="../man4/gif.4.html">gif</a></u>(4), <u><a href="../man4/gre.4.html">gre</a></u>(4), <u><a href="../man4/ipsec.4.html">ipsec</a></u>(4), <u><a href="../man8/ifconfig.8.html">ifconfig</a></u>(8), <u><a href="../man8/setkey.8.html">setkey</a></u>(8)

</pre><h4><b>AUTHORS</b></h4><pre>
       Andrey V. Elsukov &lt;<u><a href="mailto:ae@FreeBSD.org">ae@FreeBSD.org</a></u>&gt;

Debian                                          February 6, 2017                                     <u><a href="../man4/if_ipsec.4.html">if_ipsec</a></u>(4)
</pre>
 </div>
</div></section>
</div>
</body>
</html>