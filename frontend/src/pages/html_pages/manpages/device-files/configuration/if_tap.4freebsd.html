<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>tap, vmnet — Ethernet tunnel software network interface</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/freebsd-manpages">freebsd-manpages_12.2-2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       tap, vmnet — Ethernet tunnel software network interface

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>device</b> <b>tuntap</b>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The <b>tap</b> interface is a software loopback mechanism that can be loosely described as the network interface
       analog of the <u><a href="../man4/pty.4.html">pty</a></u>(4), that is, <b>tap</b> does for network interfaces what the <u><a href="../man4/pty.4.html">pty</a></u>(4) driver does for terminals.

       The  <b>tap</b> driver, like the <u><a href="../man4/pty.4.html">pty</a></u>(4) driver, provides two interfaces: an interface like the usual facility it
       is simulating (an Ethernet network interface in the case of  <b>tap</b>,  or  a  terminal  for  <u><a href="../man4/pty.4.html">pty</a></u>(4)),  and  a
       character-special  device “control” interface.  A client program transfers Ethernet frames to or from the
       <b>tap</b> “control” interface.  The <u><a href="../man4/tun.4.html">tun</a></u>(4) interface provides similar functionality at  the  network  layer:  a
       client will transfer IP (by default) packets to or from a <u><a href="../man4/tun.4.html">tun</a></u>(4) “control” interface.

       The  network interfaces are named “<b>tap0</b>”, “<b>tap1</b>”, etc., one for each control device that has been opened.
       These Ethernet network interfaces persist until <u>if_tuntap.ko</u> module is unloaded, or  until  removed  with
       "ifconfig destroy" (see below).

       <b>tap</b>  devices are created using interface cloning.  This is done using the “ifconfig tap<b>N</b> create” command.
       This is the preferred method of creating <b>tap</b> devices.  The same method allows removal of interfaces.  For
       this, use the “ifconfig tap<b>N</b> destroy” command.

       If the <u><a href="../man8/sysctl.8.html">sysctl</a></u>(8) variable <u>net.link.tap.devfs_cloning</u> is non-zero, the <b>tap</b> interface permits opens on  the
       special  control  device  <u>/dev/tap</u>.   When this device is opened, <b>tap</b> will return a handle for the lowest
       unused <b>tap</b> device (use <u><a href="../man3/devname.3.html">devname</a></u>(3) to determine which).

       <u>Disabling</u> <u>the</u> <u>legacy</u> <u>devfs</u> <u>cloning</u> <u>functionality</u> <u>may</u> <u>break</u> <u>existing</u> <u>applications</u> <u>which</u> <u>use</u> <b>tap</b><u>,</u>  <u>such</u>  <u>as</u>
       VMware <u>and</u> <u>ssh</u>(<u>1</u>)<u>.</u>  <u>It</u> <u>therefore</u> <u>defaults</u> <u>to</u> <u>being</u> <u>enabled</u> <u>until</u> <u>further</u> <u>notice.</u>

       Control  devices  (once  successfully  opened) persist until <u>if_tuntap.ko</u> is unloaded or the interface is
       destroyed.

       Each interface supports the usual Ethernet  network  interface  <u><a href="../man2/ioctl.2.html">ioctl</a></u>(2)s  and  thus  can  be  used  with
       <u><a href="../man8/ifconfig.8.html">ifconfig</a></u>(8)  like any other Ethernet interface.  When the system chooses to transmit an Ethernet frame on
       the network interface, the frame can be read from the control  device  (it  appears  as  “input”  there);
       writing  an Ethernet frame to the control device generates an input frame on the network interface, as if
       the (non-existent) hardware had just received it.

       The Ethernet tunnel device, normally <u>/dev/tap</u><b>N</b>, is exclusive-open (it cannot be opened if it  is  already
       open)  and  is restricted to the super-user, unless the <u><a href="../man8/sysctl.8.html">sysctl</a></u>(8) variable <u>net.link.tap.user_open</u> is non-
       zero.  If the <u><a href="../man8/sysctl.8.html">sysctl</a></u>(8) variable <u>net.link.tap.up_on_open</u> is non-zero, the tunnel device  will  be  marked
       “up”  when the control device is opened.  A <b>read</b>() call will return an error (EHOSTDOWN) if the interface
       is not “ready”.  Once the interface is ready, <b>read</b>() will return an Ethernet frame if one  is  available;
       if  not,  it  will either block until one is or return EWOULDBLOCK, depending on whether non-blocking I/O
       has been enabled.  If the frame is longer than is allowed for in the buffer passed to <b>read</b>(),  the  extra
       data will be silently dropped.

       A  <u><a href="../man2/write.2.html">write</a></u>(2) call passes an Ethernet frame in to be “received” on the pseudo-interface.  Each <b>write</b>() call
       supplies exactly one frame; the frame length is taken from  the  amount  of  data  provided  to  <b>write</b>().
       Writes  will  not  block;  if  the frame cannot be accepted for a transient reason (e.g., no buffer space
       available), it is silently dropped; if the reason is not transient (e.g., frame too large), an  error  is
       returned.  The following <u><a href="../man2/ioctl.2.html">ioctl</a></u>(2) calls are supported (defined in &lt;<u>net/if_tap.h</u>&gt;):

       TAPSIFINFO           Set  network  interface information (line speed and MTU).  The type must be the same
                            as returned by TAPGIFINFO or set to IFT_ETHER else the <u><a href="../man2/ioctl.2.html">ioctl</a></u>(2) call will fail.  The
                            argument should be a pointer to a <u>struct</u> <u>tapinfo</u>.

       TAPGIFINFO           Retrieve network interface information (line speed, MTU  and  type).   The  argument
                            should be a pointer to a <u>struct</u> <u>tapinfo</u>.

       TAPSDEBUG            The  argument  should  be  a  pointer  to  an  <u>int</u>; this sets the internal debugging
                            variable to that value.  What, if anything, this variable controls is not documented
                            here; see the source code.

       TAPGDEBUG            The argument should be a pointer to an  <u>int</u>;  this  stores  the  internal  debugging
                            variable's value into it.

       TAPGIFNAME           Retrieve  network  interface  name.   The  argument  should be a pointer to a <u>struct</u>
                            <u>ifreq</u>.  The interface name will be returned in the <u>ifr_name</u> field.

       FIONBIO              Turn non-blocking I/O for reads off or on, according as the argument <u>int</u>'s value  is
                            or is not zero (Writes are always nonblocking).

       FIOASYNC             Turn asynchronous I/O for reads (i.e., generation of SIGIO when data is available to
                            be read) off or on, according as the argument <u>int</u>'s value is or is not zero.

       FIONREAD             If  any  frames  are  queued  to  be  read, store the size of the first one into the
                            argument <u>int</u>; otherwise, store zero.

       TIOCSPGRP            Set the process group to receive SIGIO signals, when asynchronous I/O is enabled, to
                            the argument <u>int</u> value.

       TIOCGPGRP            Retrieve the process group value for SIGIO signals into the argument <u>int</u> value.

       SIOCGIFADDR          Retrieve the Media Access Control (MAC) address of the “remote” side.  This  command
                            is  used  by  the  VMware port and expected to be executed on descriptor, associated
                            with control device (usually <u>/dev/vmnet</u><b>N</b> or <u>/dev/tap</u><b>N</b>).  The <u>buffer</u>, which is passed
                            as the argument, is expected to have enough space to store the MAC address.  At  the
                            open  time  both  “local”  and  “remote” MAC addresses are the same, so this command
                            could be used to retrieve the “local” MAC address.

       SIOCSIFADDR          Set the Media Access Control (MAC) address of the “remote” side.   This  command  is
                            used  by  VMware  port  and expected to be executed on a descriptor, associated with
                            control device (usually <u>/dev/vmnet</u><b>N</b>).

       The control device also supports <u><a href="../man2/select.2.html">select</a></u>(2) for  read;  selecting  for  write  is  pointless,  and  always
       succeeds, since writes are always non-blocking.

       On the last close of the data device, the interface is brought down (as if with “ifconfig tap<b>N</b> down”) and
       has  all  of  its configured addresses deleted unless the device is a <u>VMnet</u> device, or has IFF_LINK0 flag
       set.  All queued frames are thrown away.  If the interface is up when the data device is not open, output
       frames are thrown away rather than letting them pile up.

       The <b>tap</b> device can also be used with the VMware port as a replacement for the old  <u>VMnet</u>  device  driver.
       <u>VMnet</u>  devices  do not <u><a href="../man8/ifconfig.8.html">ifconfig</a></u>(8) themselves down when the control device is closed.  Everything else is
       the same.

       In addition to the above mentioned <u><a href="../man2/ioctl.2.html">ioctl</a></u>(2) calls, there is an additional one for the VMware port.

       VMIO_SIOCSIFFLAGS    VMware SIOCSIFFLAGS.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <u><a href="../man4/inet.4.html">inet</a></u>(4), <u><a href="../man4/intro.4.html">intro</a></u>(4), <u><a href="../man4/tun.4.html">tun</a></u>(4)

Debian                                          January 13, 2020                                          <u><a href="../man4/TAP.4.html">TAP</a></u>(4)
</pre>
 </div>
</div></section>
</div>
</body>
</html>