<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ahci — Serial ATA Advanced Host Controller Interface driver</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/freebsd-manpages">freebsd-manpages_12.2-2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       ahci — Serial ATA Advanced Host Controller Interface driver

</pre><h4><b>SYNOPSIS</b></h4><pre>
       To compile this driver into the kernel, place the following lines in your kernel configuration file:

             <b>device</b> <b>pci</b>
             <b>device</b> <b>scbus</b>
             <b>device</b> <b>ahci</b>

       Alternatively, to load the driver as a module at boot time, place the following line in <u><a href="../man5/loader.conf.5.html">loader.conf</a></u>(5):

             ahci_load="YES"

       The following tunables are settable from the <u><a href="../man8/loader.8.html">loader</a></u>(8):

       <u>hint.ahci.X.msi</u>
       controls Message Signaled Interrupts (MSI) usage by the specified controller.

             0     MSI disabled;
             1     single MSI vector used, if supported;
             2     multiple MSI vectors used, if supported (default);

       <u>hint.ahci.X.ccc</u>
       controls  Command  Completion Coalescing (CCC) usage by the specified controller.  Non-zero value enables
       CCC and defines maximum time (in ms), request can wait for interrupt, if there  are  some  more  requests
       present  on  controller  queue.   CCC  reduces  number  of context switches on systems with many parallel
       requests, but it can decrease disk performance on some workloads due to additional command latency.

       <u>hint.ahci.X.direct</u>
       controls whether the driver should use direct command completion from interrupt thread(s), or queue  them
       to  CAM  completion  threads.   Default value depends on number of MSI interrupts supported and number of
       implemented SATA ports.

       <u>hint.ahcich.X.pm_level</u>
       controls SATA interface Power Management for the specified channel, allowing some power to  be  saved  at
       the cost of additional command latency.  Possible values:

             0     interface Power Management is disabled (default);
             1     device is allowed to initiate PM state change, host is passive;
             2     host initiates PARTIAL PM state transition every time port becomes idle;
             3     host initiates SLUMBER PM state transition every time port becomes idle.
             4     driver initiates PARTIAL PM state transition 1ms after port becomes idle;
             5     driver initiates SLUMBER PM state transition 125ms after port becomes idle.

       Some  controllers,  such  as  ICH8,  do not implement modes 2 and 3 with NCQ used.  Because of artificial
       entering latency, performance degradation in modes 4 and 5 is much smaller then in modes 2 and 3.

       Note that interface Power Management complicates device presence detection.  A  manual  bus  reset/rescan
       may be needed after device hot-plug, unless hardware implements Cold Presence Detection.

       <u>hint.ahcich.X.sata_rev</u>
       setting to nonzero value limits maximum SATA revision (speed).  Values 1, 2 and 3 are respectively 1.5, 3
       and 6Gbps.

       <u>hw.ahci.force</u>
       setting  to  nonzero  value  forces  driver  attach  to  some  known  AHCI-capable chips even if they are
       configured for legacy IDE emulation.  Default is 1.

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This driver provides the <u><a href="../man4/CAM.4.html">CAM</a></u>(4) subsystem with  native  access  to  the  SATA  ports  of  AHCI-compatible
       controllers.   Each  SATA  port found is represented to CAM as a separate bus with one target, or, if HBA
       supports Port Multipliers, 16 targets.  Most of the bus-management  details  are  handled  by  the  SATA-
       specific  transport  of  CAM.  Connected ATA disks are handled by the ATA protocol disk peripheral driver
       <u><a href="../man4/ada.4.html">ada</a></u>(4).  ATAPI devices are handled by the SCSI protocol peripheral drivers <u><a href="../man4/cd.4.html">cd</a></u>(4), <u><a href="../man4/da.4.html">da</a></u>(4), <u><a href="../man4/sa.4.html">sa</a></u>(4), etc.

       Driver features include support for Serial ATA and ATAPI devices, Port Multipliers  (including  FIS-based
       switching, when supported), hardware command queues (up to 32 commands per port), Native Command Queuing,
       SATA interface Power Management, device hot-plug and Message Signaled Interrupts.

       Driver supports "LED" enclosure management messages, defined by the AHCI.  When supported by hardware, it
       allows  to  control per-port activity, locate and fault LEDs via the <u><a href="../man4/led.4.html">led</a></u>(4) API or emulated <u><a href="../man4/ses.4.html">ses</a></u>(4) device
       for  localization  and  status  reporting  purposes.   Supporting  AHCI  controllers  may  transmit  that
       information  to  the backplane controllers via SGPIO interface.  Backplane controllers interpret received
       statuses in some way (IBPI standard) to report them using present indicators.

</pre><h4><b>HARDWARE</b></h4><pre>
       The <b>ahci</b> driver supports AHCI compatible controllers having PCI class 1 (mass storage), subclass 6 (SATA)
       and programming interface 1 (AHCI).

       Also, in cooperation with atamarvell and atajmicron drivers of <a href="../man4/ata.4.html">ata</a>(4), it supports AHCI part  of  legacy-
       PATA + AHCI-SATA combined controllers, such as JMicron JMB36x and Marvell 88SE61xx.

       The  <b>ahci</b> driver also supports AHCI devices that act as PCI bridges for <u><a href="../man4/nvme.4.html">nvme</a></u>(4) using Intel Rapid Storage
       Technology (RST).  To use the <u><a href="../man4/nvme.4.html">nvme</a></u>(4) device, either one must set the SATA mode in the BIOS to AHCI (from
       RST), or one must accept the performance with  RST  enabled  due  to  interrupt  sharing.   FreeBSD  will
       automatically detect AHCI devices with this extension that are in RST mode.  When that happens, <b>ahci</b> will
       attach <u><a href="../man4/nvme.4.html">nvme</a></u>(4) children to the <u><a href="../man4/ahci.4.html">ahci</a></u>(4) device.

</pre><h4><b>FILES</b></h4><pre>
       <u>/dev/led/ahci*.*.act</u>     activity LED device nodes

       <u>/dev/led/ahci*.*.fault</u>   fault LED device nodes

       <u>/dev/led/ahci*.*.locate</u>  locate LED device nodes

</pre><h4><b>SYSCTL</b></h4><pre>
       <u>dev.ahcich.X.disable_phy</u>
               Set  to 1 to disable the phy for the drive on channel X.  Set to 0 to enable the phy.  Useful for
               turning off troublemakers.  Also useful for debugging when you need the ada drive to come and go.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <u><a href="../man4/ada.4.html">ada</a></u>(4), <u><a href="../man4/ata.4.html">ata</a></u>(4), <u><a href="../man4/cam.4.html">cam</a></u>(4), <u><a href="../man4/cd.4.html">cd</a></u>(4), <u><a href="../man4/da.4.html">da</a></u>(4), <u><a href="../man4/sa.4.html">sa</a></u>(4), <u><a href="../man4/ses.4.html">ses</a></u>(4)

</pre><h4><b>HISTORY</b></h4><pre>
       The <b>ahci</b> driver first appeared in FreeBSD 8.0.

</pre><h4><b>AUTHORS</b></h4><pre>
       Alexander Motin &lt;<u><a href="mailto:mav@FreeBSD.org">mav@FreeBSD.org</a></u>&gt;

Debian                                           August 21, 2019                                         <u><a href="../man4/AHCI.4.html">AHCI</a></u>(4)
</pre>
 </div>
</div></section>
</div>
</body>
</html>