<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ptnet — Ethernet driver for passed-through netmap ports</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/freebsd-manpages">freebsd-manpages_12.2-2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       ptnet — Ethernet driver for passed-through netmap ports

</pre><h4><b>SYNOPSIS</b></h4><pre>
       This  network  driver  is  included  in  <u><a href="../man4/netmap.4.html">netmap</a></u>(4),  and it can be compiled into the kernel by adding the
       following line in your kernel configuration file:

             <b>device</b> <b>netmap</b>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The <b>ptnet</b> device driver provides direct access to host netmap ports, from within a Virtual Machine  (VM).
       Applications  running  inside  the  VM  can  access the TX/RX rings and buffers of a netmap port that the
       hypervisor has passed-through to the VM.   Hypervisor  support  for  <b>ptnet</b>  is  currently  available  for
       QEMU/KVM.   Any  <u><a href="../man4/netmap.4.html">netmap</a></u>(4)  port  can  be  passed-through, including physical NICs, <u><a href="../man4/vale.4.html">vale</a></u>(4) ports, netmap
       pipes, etc.

       The main use-case for netmap passthrough  is  Network  Function  Virtualization  (NFV),  where  middlebox
       applications  running  within VMs may want to process very high packet rates (e.g., 1-10 millions packets
       per second or more).  Note, however, that those applications must use the device in netmap mode in  order
       to  achieve  such  rates.   In  addition to the general advantages of netmap, the improved performance of
       <b>ptnet</b> when compared to hypervisor device emulation or paravirtualization (e.g., <u><a href="../man4/vtnet.4.html">vtnet</a></u>(4),  <u><a href="../man4/vmx.4.html">vmx</a></u>(4))  comes
       from  the hypervisor being completely bypassed in the data-path.  For example, when using <u><a href="../man4/vtnet.4.html">vtnet</a></u>(4) the VM
       has to convert each <u><a href="../man9/mbuf.9.html">mbuf</a></u>(9) to a VirtIO-specific packet representation  and  publish  that  to  a  VirtIO
       queue;  on  the  hypervisor  side,  the  packet  is  extracted  from  the VirtIO queue and converted to a
       hypervisor-specific packet representation.  The overhead of format conversions  (and  packet  copies,  in
       same  cases)  is  not  incured by <b>ptnet</b> in netmap mode, because mbufs are not used at all, and the packet
       format is the one defined by netmap (e.g., <u>struct</u> <u>netmap_slot</u>) along  the  whole  data-path.   No  format
       conversions or copies happen.

       It  is  also  possible  to  use a <b>ptnet</b> device like a regular network interface, which interacts with the
       FreeBSD network stack (i.e., not in netmap mode).  However, in that case it is necessary to pay the  cost
       of  data  copies  between  mbufs and netmap buffers, which generally results in lower TCP/UDP performance
       than <u><a href="../man4/vtnet.4.html">vtnet</a></u>(4) or other paravirtualized network devices.  If the passed-through netmap port  supports  the
       VirtIO  network  header, <b>ptnet</b> is able to use it, and support TCP/UDP checksum offload (for both transmit
       and receive), TCP segmentation offload (TSO) and TCP large receive  offload  (LRO).   Currently,  <u><a href="../man4/vale.4.html">vale</a></u>(4)
       ports  support  the  header.  Note that the VirtIO network header is generally not used in NFV use-cases,
       because middleboxes are not endpoints of TCP/UDP connections.

</pre><h4><b>TUNABLES</b></h4><pre>
       Tunables can be set at the <u><a href="../man8/loader.8.html">loader</a></u>(8) prompt before booting the kernel or stored in <u><a href="../man5/loader.conf.5.html">loader.conf</a></u>(5).

       <u>dev.netmap.ptnet_vnet_hdr</u>
               This tunable enables (1) or disables (0) the VirtIO network header.  If enabled, <b>ptnet</b>  uses  the
               same  header  used by <u><a href="../man4/vtnet.4.html">vtnet</a></u>(4) to exchange offload metadata with the hypervisor.  If disabled, no
               header is prepended to transmitted and received packets.  The metadata is  necessary  to  support
               TCP/UDP checksum offloads, TSO, and LRO.  The default value is 1.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <u><a href="../man4/netintro.4.html">netintro</a></u>(4), <u><a href="../man4/netmap.4.html">netmap</a></u>(4), <u><a href="../man4/vale.4.html">vale</a></u>(4), <u><a href="../man4/virtio.4.html">virtio</a></u>(4), <u><a href="../man4/vmx.4.html">vmx</a></u>(4), <u><a href="../man8/ifconfig.8.html">ifconfig</a></u>(8)

</pre><h4><b>HISTORY</b></h4><pre>
       The  <b>ptnet</b>  driver  was  written  by  Vincenzo  Maffione  &lt;<u><a href="mailto:vmaffione@FreeBSD.org">vmaffione@FreeBSD.org</a></u>&gt;.   It first appeared in
       FreeBSD 12.0.

Debian                                          December 11, 2018                                       <u><a href="../man4/PTNET.4.html">PTNET</a></u>(4)
</pre>
 </div>
</div></section>
</div>
</body>
</html>