<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>pwmc — PWM (Pulse Width Modulation) control device driver</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/freebsd-manpages">freebsd-manpages_12.2-2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       pwmc — PWM (Pulse Width Modulation) control device driver

</pre><h4><b>SYNOPSIS</b></h4><pre>
       To compile this driver into the kernel, place the following lines in your kernel configuration file:

             <b>device</b> <b>pwmbus</b>
             <b>device</b> <b>pwmc</b>

       Alternatively, to load the driver as a module at boot time, place the following line in <u><a href="../man5/loader.conf.5.html">loader.conf</a></u>(5):

             pwmc_load="YES"

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The  <b>pwmc</b>  driver  provides  device-control access to a channel of PWM hardware.  Each instance of a <b>pwmc</b>
       device is associated with a single PWM output channel.

       Some PWM hardware is organized with multiple channels sharing a common clock or other resources.  In such
       cases, a separate <b>pwmc</b> instance will exist for each channel, but changing the period or duty cycle of any
       one channel may affect other channels within the hardware which share the same  resources.   Consult  the
       documentation for the underlying PWM hardware device driver for details on channels that share resources.

       An  instance  of  <b>pwmc</b>  creates  a character device named <u>/dev/pwm/pwmcX.Y</u> where <u>X</u> is a sequential number
       assigned to each PWM hardware controller as it is discovered by the system, and <u>Y</u> is the  channel  number
       within  that  hardware  controller.   The  driver  can  be configured to create aliases that point to the
       <u>pwmcX.Y</u> entries, in effect creating named channels.

       The <b>pwmc</b> driver provides control of a PWM channel with the following <u><a href="../man2/ioctl.2.html">ioctl</a></u>(2) calls and data  structures,
       defined in &lt;<u>dev/pwm/pwmc.h</u>&gt;:

       PWMGETSTATE (<u>struct</u> <u>pwm_state</u>)
               Retrieve the current state of the channel.

       PWMSETSTATE (<u>struct</u> <u>pwm_state</u>)
               Set  the current state of the channel.  All parameters are updated on every call.  To change just
               one of the values, use PWMGETSTATE to get the current state and then submit the  same  data  back
               with just the appropriate value changed.

       The <u>pwm_state</u> structure is defined as follows:

       struct pwm_state {
               u_int           period;
               u_int           duty;
               uint32_t        flags;
               bool            enable;
       };

       <u>period</u>  The duration, in nanoseconds, of one complete on-off cycle.

       <u>duty</u>    The duration, in nanoseconds, of the on portion of one cycle.

       <u>flags</u>   Flags  that  affect  the  output  signal  can  be bitwise-ORed together.  The following flags are
               currently defined:

               PWM_POLARITY_INVERTED  Invert the signal polarity.

       <u>enable</u>  False to disable the output signal or true to enable it.

</pre><h4><b>HINTS</b> <b>CONFIGURATION</b></h4><pre>
       On a <u><a href="../man5/device.hints.5.html">device.hints</a></u>(5) based system, such as <b>MIPS</b>, these values are configurable for <b>pwmc</b>:

       <u>hint.pwmc.%d.at</u>
               The pwmbus instance the <b>pwmc</b> instance is attached to.

       <u>hint.pwmc.%d.channel</u>
               The hardware channel number the instance is attached to.  Channel numbers count up from zero.

       <u>hint.pwmc.%d.label</u>
               If this optional hint is set, the driver creates an alias in <u>/dev/pwm</u> with the given name,  which
               points to the instance.

</pre><h4><b>FDT</b> <b>CONFIGURATION</b></h4><pre>
       On  an  <u><a href="../man4/fdt.4.html">fdt</a></u>(4)  based system, a <b>pwmc</b> device is described with a child node of the pwm hardware controller
       node.  When the hardware supports multiple channels within the controller, it is not necessary to include
       a <b>pwmc</b> child node for every channel the hardware supports.  Define only the channels you need to control.

       The following properties are required for a <b>pwmc</b> device node:

       <u>compatible</u>
               Must be the string "freebsd,pwmc".

       <u>reg</u>     The hardware channel number.

       The following properties are optional for the <b>pwmc</b> device node:

       <u>label</u>   A string containing only characters legal in a file name.  The driver creates an alias  with  the
               given name in <u>/dev/pwm</u> which points to the instance's <u>/dev/pwm/pwmcX.Y</u> device entry.

       Example of a PWM hardware node containing one <b>pwmc</b> child node:

       &amp;ehrpwm0 {
           status = "okay";
           pinctrl-names = "default";
           pinctrl-0 = &lt;&amp;ehrpwm0_AB_pins&gt;;

           pwmcontrol@0 {
               compatible = "freebsd,pwmc";
               reg = &lt;0&gt;;
               label = "backlight";
           };
       };

</pre><h4><b>FILES</b></h4><pre>
       <u>/dev/pwm/pwmc*</u>

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <u><a href="../man4/fdt.4.html">fdt</a></u>(4), <u><a href="../man5/device.hints.5.html">device.hints</a></u>(5), <u><a href="../man8/pwm.8.html">pwm</a></u>(8), <u><a href="../man9/pwm.9.html">pwm</a></u>(9)

</pre><h4><b>HISTORY</b></h4><pre>
       The <b>pwmc</b> driver appeared in FreeBSD 13.0.

Debian                                            June 17, 2019                                          <u><a href="../man4/PWMC.4.html">PWMC</a></u>(4)
</pre>
 </div>
</div></section>
</div>
</body>
</html>