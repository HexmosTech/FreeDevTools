<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ti — Alteon Networks Tigon I and Tigon II Gigabit Ethernet driver</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/freebsd-manpages">freebsd-manpages_12.2-2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       ti — Alteon Networks Tigon I and Tigon II Gigabit Ethernet driver

</pre><h4><b>SYNOPSIS</b></h4><pre>
       To compile this driver into the kernel, place the following lines in your kernel configuration file:

             <b>device</b> <b>ti</b>
             <b>options</b> <b>TI_SF_BUF_JUMBO</b>
             <b>options</b> <b>TI_JUMBO_HDRSPLIT</b>

       Alternatively, to load the driver as a module at boot time, place the following line in <u><a href="../man5/loader.conf.5.html">loader.conf</a></u>(5):

             if_ti_load="YES"

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The  <b>ti</b>  driver  provides  support  for  PCI Gigabit Ethernet adapters based on the Alteon Networks Tigon
       Gigabit Ethernet controller chip.  The Tigon contains an  embedded  R4000  CPU,  gigabit  MAC,  dual  DMA
       channels  and  a PCI interface unit.  The Tigon II contains two R4000 CPUs and other refinements.  Either
       chip can be used in either a 32-bit or 64-bit PCI slot.  Communication with the chip is achieved via  PCI
       shared  memory and bus master DMA.  The Tigon I and II support hardware multicast address filtering, VLAN
       tag extraction and insertion, and jumbo Ethernet frames sizes up to 9000 bytes.  Note that  the  Tigon  I
       chipset is no longer in active production: all new adapters should come equipped with Tigon II chipsets.

       While  the  Tigon chipset supports 10, 100 and 1000Mbps speeds, support for 10 and 100Mbps speeds is only
       available on boards with the proper transceivers.  Most adapters are only designed to work  at  1000Mbps,
       however the driver should support those NICs that work at lower speeds as well.

       Support  for  jumbo  frames is provided via the interface MTU setting.  Selecting an MTU larger than 1500
       bytes with the <u><a href="../man8/ifconfig.8.html">ifconfig</a></u>(8) utility configures the adapter to receive and transmit  jumbo  frames.   Using
       jumbo  frames  can  greatly  improve  performance  for  certain  tasks,  such  as file transfers and data
       streaming.

       Header splitting support for Tigon 2 boards (this option has no effect for the Tigon 1) can be turned  on
       with  the TI_JUMBO_HDRSPLIT option.  See <u><a href="../man9/zero_copy.9.html">zero_copy</a></u>(9) for more discussion on zero copy receive and header
       splitting.

       The <b>ti</b> driver uses UMA backed jumbo receive buffers, but can be  configured  to  use  <u><a href="../man2/sendfile.2.html">sendfile</a></u>(2)  buffer
       allocator.  To turn on <u><a href="../man2/sendfile.2.html">sendfile</a></u>(2) buffer allocator, use the TI_SF_BUF_JUMBO option.

       Support  for  vlans  is  also  available  using the <u><a href="../man4/vlan.4.html">vlan</a></u>(4) mechanism.  See the <u><a href="../man4/vlan.4.html">vlan</a></u>(4) man page for more
       details.

       The <b>ti</b> driver supports the following media types:

       autoselect            Enable autoselection of the media type and options.  The user can manually override
                             the autoselected mode by adding media options to the <u>/etc/rc.conf</u> file.

       10baseT/UTP           Set 10Mbps operation.  The <u>mediaopt</u> option  can  also  be  used  to  select  either
                             <u>full-duplex</u> or <u>half-duplex</u> modes.

       100baseTX             Set  100Mbps  (Fast  Ethernet)  operation.  The <u>mediaopt</u> option can also be used to
                             select either <u>full-duplex</u> or <u>half-duplex</u> modes.

       1000baseSX            Set 1000Mbps (Gigabit Ethernet) operation.  Only <u>full-duplex</u> mode is  supported  at
                             this speed.

       The <b>ti</b> driver supports the following media options:

       full-duplex           Force full-duplex operation.

       half-duplex           Force half duplex operation.

       For more information on configuring this device, see <u><a href="../man8/ifconfig.8.html">ifconfig</a></u>(8).

</pre><h4><b>HARDWARE</b></h4><pre>
       The <b>ti</b> driver supports Gigabit Ethernet adapters based on the Alteon Tigon I and II chips.  The <b>ti</b> driver
       has been tested with the following adapters:

       <b>•</b>   3Com 3c985-SX Gigabit Ethernet adapter (Tigon 1)
       <b>•</b>   3Com 3c985B-SX Gigabit Ethernet adapter (Tigon 2)
       <b>•</b>   Alteon AceNIC V Gigabit Ethernet adapter (1000baseSX)
       <b>•</b>   Alteon AceNIC V Gigabit Ethernet adapter (1000baseT)
       <b>•</b>   Digital EtherWORKS 1000SX PCI Gigabit adapter
       <b>•</b>   Netgear GA620 Gigabit Ethernet adapter (1000baseSX)
       <b>•</b>   Netgear GA620T Gigabit Ethernet adapter (1000baseT)

       The following adapters should also be supported but have not yet been tested:

       <b>•</b>   Asante GigaNIX1000T Gigabit Ethernet adapter
       <b>•</b>   Asante PCI 1000BASE-SX Gigabit Ethernet adapter
       <b>•</b>   Farallon PN9000SX Gigabit Ethernet adapter
       <b>•</b>   NEC Gigabit Ethernet
       <b>•</b>   Silicon Graphics PCI Gigabit Ethernet adapter

</pre><h4><b>LOADER</b> <b>TUNABLES</b></h4><pre>
       Tunables can be set at the <u><a href="../man8/loader.8.html">loader</a></u>(8) prompt before booting the kernel or stored in <u><a href="../man5/loader.conf.5.html">loader.conf</a></u>(5).

       <u>hw.ti.%d.dac</u>
               If  this  tunable  is  set to 0 it will disable DAC (Dual Address Cycle).  The default value is 1
               which means driver will use full 64bit DMA addressing.

</pre><h4><b>SYSCTL</b> <b>VARIABLES</b></h4><pre>
       The following variables are available as both <u><a href="../man8/sysctl.8.html">sysctl</a></u>(8) variables and <u><a href="../man8/loader.8.html">loader</a></u>(8) tunables.  The  interface
       has  to  be brought down and up again before a change takes effect when any of the following tunables are
       changed.  The one microsecond clock tick referenced below is a nominal time and the actual  hardware  may
       not  provide granularity to this level.  For example, on Tigon 2 (revision 6) cards with release 12.0 the
       clock granularity is 5 microseconds.

       <u>dev.ti.%d.rx_coal_ticks</u>
               This value, receive coalesced ticks, controls the number of clock ticks (of 1 microseconds  each)
               that  must  elapse  before  the  NIC  DMAs  the  receive  return producer pointer to the Host and
               generates an interrupt.  This parameter works in conjunction with  the  rx_max_coal_bds,  receive
               max coalesced BDs, tunable parameter.  The NIC will return the receive return producer pointer to
               the  Host  when  either of the thresholds is exceeded.  A value of 0 means that this parameter is
               ignored and receive BDs will only be returned  when  the  receive  max  coalesced  BDs  value  is
               reached.  The default value is 170.

       <u>dev.ti.%d.rx_max_coal_bds</u>
               This  value,  receive  max  coalesced BDs, controls the number of receive buffer descriptors that
               will be coalesced before the NIC updates the receive return ring producer index.  If  this  value
               is set to 0 it will disable receive buffer descriptor coalescing.  The default value is 64.

       <u>dev.ti.%d.ti_tx_coal_ticks</u>
               This  value,  send  coalesced  ticks, controls the number of clock ticks (of 1 microseconds each)
               that must elapse before the NIC DMAs the send consumer pointer  to  the  Host  and  generates  an
               interrupt.  This parameter works in conjunction with the tx_max_coal_bds, send max coalesced BDs,
               tunable  parameter.  The NIC will return the send consumer pointer to the Host when either of the
               thresholds is exceeded.  A value of 0 means that this parameter is ignored and send BDs will only
               be returned when the send max coalesced BDs value is reached.  The default value is 2000.

       <u>dev.ti.%d.tx_max_coal_bds</u>
               This value, send max coalesced BDs, controls the number of send buffer descriptors that  will  be
               coalesced  before  the  NIC  updates  the send consumer index.  If this value is set to 0 it will
               disable send buffer descriptor coalescing.  The default value is 32.

       <u>dev.ti.%d.tx_buf_ratio</u>
               This value controls the ratio of the remaining memory in  the  NIC  that  should  be  devoted  to
               transmit  buffer  vs.  receive buffer.  The lower 7 bits are used to indicate the ratio in 1/64th
               increments.  For example, setting this value to 16 will set the transmit buffer  to  1/4  of  the
               remaining  buffer space.  In no cases will the transmit or receive buffer be reduced below 68 KB.
               For a 1 MB NIC the approximate total space for data buffers is 800 KB.  For a  512  KB  NIC  that
               number is 300 KB.  The default value is 21.

       <u>dev.ti.%d.stat_ticks</u>
               The  value,  stat  ticks,  controls  the number of clock ticks (of 1 microseconds each) that must
               elapse before the NIC DMAs the statistics block to the Host and generates a STATS_UPDATED  event.
               If set to zero then statistics are never DMAed to the Host.  It is recommended that this value be
               set  to  a  high  enough  frequency to not mislead someone reading statistics refreshes.  Several
               times a second is enough.  The default value is 2000000 (2 seconds).

</pre><h4><b>IOCTLS</b></h4><pre>
       In addition to the standard <u><a href="../man2/socket.2.html">socket</a></u>(2) <u><a href="../man2/ioctl.2.html">ioctl</a></u>(2) calls implemented by most network drivers, the  <b>ti</b>  driver
       also includes a character device interface that can be used for additional diagnostics, configuration and
       debugging.  With this character device interface, and a specially patched version of <u><a href="../man1/gdb.1.html">gdb</a></u>(1), the user can
       debug firmware running on the Tigon board.

       These ioctls and their arguments are defined in the &lt;<u>sys/tiio.h</u>&gt; header file.

       TIIOCGETSTATS     Return  card  statistics  DMAed  from the card into kernel memory approximately every 2
                         seconds.  (That time interval can  be  changed  via  the  TIIOCSETPARAMS  ioctl.)   The
                         argument is <u>struct</u> <u>ti_stats</u>.

       TIIOCGETPARAMS    Get  various performance-related firmware parameters that largely affect how interrupts
                         are coalesced.  The argument is <u>struct</u> <u>ti_params</u>.

       TIIOCSETPARAMS    Set various performance-related firmware parameters that largely affect how  interrupts
                         are coalesced.  The argument is <u>struct</u> <u>ti_params</u>.

       TIIOCSETTRACE     Tell   the  NIC  to  trace  the  requested  types  of  information.   The  argument  is
                         <u>ti_trace_type</u>.

       TIIOCGETTRACE     Dump the trace buffer from the card.  The argument is <u>struct</u> <u>ti_trace_buf</u>.

       ALT_ATTACH        This ioctl is used for compatibility with Alteon's  Solaris  driver.   They  apparently
                         only  have  one  character interface for debugging, so they have to tell it which Tigon
                         instance they want to debug.  This ioctl is a noop for FreeBSD.

       ALT_READ_TG_MEM   Read the requested memory region from the Tigon board.  The argument is <u>struct</u> <u>tg_mem</u>.

       ALT_WRITE_TG_MEM  Write to the requested memory region on  the  Tigon  board.   The  argument  is  <u>struct</u>
                         <u>tg_mem</u>.

       ALT_READ_TG_REG   Read the requested register from the Tigon board.  The argument is <u>struct</u> <u>tg_reg</u>.

       ALT_WRITE_TG_REG  Write to the requested register on the Tigon board.  The argument is <u>struct</u> <u>tg_reg</u>.

</pre><h4><b>FILES</b></h4><pre>
       <u>/dev/ti[0-255]</u>  Tigon driver character interface.

</pre><h4><b>DIAGNOSTICS</b></h4><pre>
       <b>ti%d:</b> <b>couldn't</b> <b>map</b> <b>memory</b>  A fatal initialization error has occurred.

       <b>ti%d:</b> <b>couldn't</b> <b>map</b> <b>interrupt</b>  A fatal initialization error has occurred.

       <b>ti%d:</b>  <b>no</b>  <b>memory</b>  <b>for</b>  <b>softc</b>  <b>struct!</b>    The  driver  failed  to allocate memory for per-device instance
       information during initialization.

       <b>ti%d:</b> <b>failed</b> <b>to</b> <b>enable</b> <b>memory</b> <b>mapping!</b>  The driver failed to initialize PCI shared memory mapping.   This
       might happen if the card is not in a bus-master slot.

       <b>ti%d:</b>  <b>no</b>  <b>memory</b>  <b>for</b>  <b>jumbo</b>  <b>buffers!</b>    The  driver  failed to allocate memory for jumbo frames during
       initialization.

       <b>ti%d:</b> <b>bios</b> <b>thinks</b> <b>we're</b> <b>in</b> <b>a</b> <b>64</b> <b>bit</b> <b>slot,</b> <b>but</b> <b>we</b> <b>aren't</b>  The BIOS has programmed the NIC as though it had
       been installed in a 64-bit PCI slot, but in fact the NIC is in a 32-bit slot.  This happens as  a  result
       of  a  bug  in some BIOSes.  This can be worked around on the Tigon II, but on the Tigon I initialization
       will fail.

       <b>ti%d:</b> <b>board</b> <b>self-diagnostics</b> <b>failed!</b>  The ROMFAIL bit in the CPU state  register  was  set  after  system
       startup, indicating that the on-board NIC diagnostics failed.

       <b>ti%d:</b>  <b>unknown</b>  <b>hwrev</b>   The driver detected a board with an unsupported hardware revision.  The <b>ti</b> driver
       supports revision 4 (Tigon 1) and revision 6 (Tigon 2) chips and has firmware only for those devices.

       <b>ti%d:</b> <b>watchdog</b> <b>timeout</b>  The device has stopped responding to the network, or there is a problem with  the
       network connection (cable).

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <u><a href="../man2/sendfile.2.html">sendfile</a></u>(2), <u><a href="../man4/altq.4.html">altq</a></u>(4), <u><a href="../man4/arp.4.html">arp</a></u>(4), <u><a href="../man4/netintro.4.html">netintro</a></u>(4), <u><a href="../man4/ng_ether.4.html">ng_ether</a></u>(4), <u><a href="../man4/vlan.4.html">vlan</a></u>(4), <u><a href="../man8/ifconfig.8.html">ifconfig</a></u>(8), <u><a href="../man9/zero_copy.9.html">zero_copy</a></u>(9)

</pre><h4><b>HISTORY</b></h4><pre>
       The <b>ti</b> device driver first appeared in FreeBSD 3.0.

</pre><h4><b>AUTHORS</b></h4><pre>
       The  <b>ti</b>  driver  was written by Bill Paul &lt;<u><a href="mailto:wpaul@bsdi.com">wpaul@bsdi.com</a></u>&gt;.  The header splitting firmware modifications,
       character <u><a href="../man2/ioctl.2.html">ioctl</a></u>(2) interface and debugging support  were  written  by  Kenneth  Merry  &lt;<u><a href="mailto:ken@FreeBSD.org">ken@FreeBSD.org</a></u>&gt;.
       Initial zero copy support was written by Andrew Gallatin &lt;<u><a href="mailto:gallatin@FreeBSD.org">gallatin@FreeBSD.org</a></u>&gt;.

Debian                                          November 14, 2011                                          <u><a href="../man4/TI.4.html">TI</a></u>(4)
</pre>
 </div>
</div></section>
</div>
</body>
</html>