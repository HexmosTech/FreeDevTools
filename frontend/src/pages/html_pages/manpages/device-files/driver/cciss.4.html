<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>cciss - HP Smart Array block driver</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/manpages">manpages_6.9.1-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       cciss - HP Smart Array block driver

</pre><h4><b>SYNOPSIS</b></h4><pre>
       modprobe cciss [ cciss_allow_hpsa=1 ]

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>Note</b>:  This obsolete driver was removed in Linux 4.14, as it is superseded by the <b><a href="../man4/hpsa.4.html">hpsa</a></b>(4) driver in newer
       kernels.

       <b>cciss</b> is a block driver for older HP Smart Array RAID controllers.

   <b>Options</b>
       <u>cciss_allow_hpsa=1</u>: This option prevents the <b>cciss</b> driver from attempting to drive any  controllers  that
       the  <b><a href="../man4/hpsa.4.html">hpsa</a></b>(4)  driver  is  capable of controlling, which is to say, the <b>cciss</b> driver is restricted by this
       option to the following controllers:

           Smart Array 5300
           Smart Array 5i
           Smart Array 532
           Smart Array 5312
           Smart Array 641
           Smart Array 642
           Smart Array 6400
           Smart Array 6400 EM
           Smart Array 6i
           Smart Array P600
           Smart Array P400i
           Smart Array E200i
           Smart Array E200
           Smart Array E200i
           Smart Array E200i
           Smart Array E200i
           Smart Array E500

   <b>Supported</b> <b>hardware</b>
       The <b>cciss</b> driver supports the following Smart Array boards:

           Smart Array 5300
           Smart Array 5i
           Smart Array 532
           Smart Array 5312
           Smart Array 641
           Smart Array 642
           Smart Array 6400
           Smart Array 6400 U320 Expansion Module
           Smart Array 6i
           Smart Array P600
           Smart Array P800
           Smart Array E400
           Smart Array P400i
           Smart Array E200
           Smart Array E200i
           Smart Array E500
           Smart Array P700m
           Smart Array P212
           Smart Array P410
           Smart Array P410i
           Smart Array P411
           Smart Array P812
           Smart Array P712m
           Smart Array P711m

   <b>Configuration</b> <b>details</b>
       To configure HP Smart Array controllers, use the HP Array Configuration  Utility  (either  <b><a href="../man8/hpacuxe.8.html">hpacuxe</a></b>(8)  or
       <b><a href="../man8/hpacucli.8.html">hpacucli</a></b>(8))  or the Offline ROM-based Configuration Utility (ORCA) run from the Smart Array's option ROM
       at boot time.

</pre><h4><b>FILES</b></h4><pre>
   <b>Device</b> <b>nodes</b>
       The device naming scheme is as follows:

       Major numbers:

              104   cciss0
              105   cciss1
              106   cciss2
              105   cciss3
              108   cciss4
              109   cciss5
              110   cciss6
              111   cciss7

       Minor numbers:

           b7 b6 b5 b4 b3 b2 b1 b0
           |----+----| |----+----|
                |           |
                |           +-------- Partition ID (0=wholedev, 1-15 partition)
                |
                +-------------------- Logical Volume number

       The device naming scheme is:
       <u>/dev/cciss/c0d0</u>     Controller 0, disk 0, whole device
       <u>/dev/cciss/c0d0p1</u>   Controller 0, disk 0, partition 1
       <u>/dev/cciss/c0d0p2</u>   Controller 0, disk 0, partition 2
       <u>/dev/cciss/c0d0p3</u>   Controller 0, disk 0, partition 3

       <u>/dev/cciss/c1d1</u>     Controller 1, disk 1, whole device
       <u>/dev/cciss/c1d1p1</u>   Controller 1, disk 1, partition 1
       <u>/dev/cciss/c1d1p2</u>   Controller 1, disk 1, partition 2
       <u>/dev/cciss/c1d1p3</u>   Controller 1, disk 1, partition 3

   <b>Files</b> <b>in</b> <b><a href="file:/proc">/proc</a></b>
       The files <u>/proc/driver/cciss/cciss[0-9]+</u> contain information about the configuration of each  controller.
       For example:

           $ <b>cd</b> <b>/proc/driver/cciss</b>
           $ <b>ls</b> <b>-l</b>
           total 0
           -rw-r--r-- 1 root root 0 2010-09-10 10:38 cciss0
           -rw-r--r-- 1 root root 0 2010-09-10 10:38 cciss1
           -rw-r--r-- 1 root root 0 2010-09-10 10:38 cciss2
           $ <b>cat</b> <b>cciss2</b>
           cciss2: HP Smart Array P800 Controller
           Board ID: 0x3223103c
           Firmware Version: 7.14
           IRQ: 16
           Logical drives: 1
           Current Q depth: 0
           Current # commands on controller: 0
           Max Q depth since init: 1
           Max # commands on controller since init: 2
           Max SG entries since init: 32
           Sequential access devices: 0

           cciss/c2d0:   36.38GB       RAID 0

   <b>Files</b> <b>in</b> <b><a href="file:/sys">/sys</a></b>
       <u><a href="file:/sys/bus/pci/devices/">/sys/bus/pci/devices/</a></u>dev<u>/cciss</u>X<u>/c</u>X<u>d</u>Y<u>/model</u>
              Displays the SCSI INQUIRY page 0 model for logical drive <u>Y</u> of controller <u>X</u>.

       <u><a href="file:/sys/bus/pci/devices/">/sys/bus/pci/devices/</a></u>dev<u>/cciss</u>X<u>/c</u>X<u>d</u>Y<u>/rev</u>
              Displays the SCSI INQUIRY page 0 revision for logical drive <u>Y</u> of controller <u>X</u>.

       <u><a href="file:/sys/bus/pci/devices/">/sys/bus/pci/devices/</a></u>dev<u>/cciss</u>X<u>/c</u>X<u>d</u>Y<u>/unique_id</u>
              Displays the SCSI INQUIRY page 83 serial number for logical drive <u>Y</u> of controller <u>X</u>.

       <u><a href="file:/sys/bus/pci/devices/">/sys/bus/pci/devices/</a></u>dev<u>/cciss</u>X<u>/c</u>X<u>d</u>Y<u>/vendor</u>
              Displays the SCSI INQUIRY page 0 vendor for logical drive <u>Y</u> of controller <u>X</u>.

       <u><a href="file:/sys/bus/pci/devices/">/sys/bus/pci/devices/</a></u>dev<u>/cciss</u>X<u>/c</u>X<u>d</u>Y<u>/block:cciss!c</u>X<u>d</u>Y
              A symbolic link to <u>/sys/block/cciss!c</u>X<u>d</u>Y.

       <u><a href="file:/sys/bus/pci/devices/">/sys/bus/pci/devices/</a></u>dev<u>/cciss</u>X<u>/rescan</u>
              When  this  file is written to, the driver rescans the controller to discover any new, removed, or
              modified logical drives.

       <u><a href="file:/sys/bus/pci/devices/">/sys/bus/pci/devices/</a></u>dev<u>/cciss</u>X<u>/resettable</u>
              A value of 1 displayed in this file indicates that the "reset_devices=1" kernel parameter (used by
              <b>kdump</b>) is honored by this controller.  A value of 0 indicates that  the  "reset_devices=1"  kernel
              parameter will not be honored.  Some models of Smart Array are not able to honor this parameter.

       <u><a href="file:/sys/bus/pci/devices/">/sys/bus/pci/devices/</a></u>dev<u>/cciss</u>X<u>/c</u>X<u>d</u>Y<u>/lunid</u>
              Displays the 8-byte LUN ID used to address logical drive <u>Y</u> of controller <u>X</u>.

       <u><a href="file:/sys/bus/pci/devices/">/sys/bus/pci/devices/</a></u>dev<u>/cciss</u>X<u>/c</u>X<u>d</u>Y<u>/raid_level</u>
              Displays the RAID level of logical drive <u>Y</u> of controller <u>X</u>.

       <u><a href="file:/sys/bus/pci/devices/">/sys/bus/pci/devices/</a></u>dev<u>/cciss</u>X<u>/c</u>X<u>d</u>Y<u>/usage_count</u>
              Displays the usage count (number of opens) of logical drive <u>Y</u> of controller <u>X</u>.

   <b>SCSI</b> <b>tape</b> <b>drive</b> <b>and</b> <b>medium</b> <b>changer</b> <b>support</b>
       SCSI  sequential access devices and medium changer devices are supported and appropriate device nodes are
       automatically created (e.g., <u>/dev/st0</u>, <u>/dev/st1</u>, etc.; see <b><a href="../man4/st.4.html">st</a></b>(4) for  more  details.)   You  must  enable
       "SCSI tape drive support for Smart Array 5xxx" and "SCSI support" in your kernel configuration to be able
       to use SCSI tape drives with your Smart Array 5xxx controller.

       Additionally,  note  that  the  driver  will  not  engage the SCSI core at init time.  The driver must be
       directed to dynamically engage the SCSI core via the <u><a href="file:/proc">/proc</a></u> filesystem entry, which the  "block"  side  of
       the  driver  creates  as <u>/proc/driver/cciss/cciss*</u> at run time.  This is because at driver init time, the
       SCSI core may not yet be initialized (because the driver is a block driver) and attempting to register it
       with the SCSI core in such a case would cause a hang.  This is best done  via  an  initialization  script
       (typically in <u><a href="file:/etc/init.d">/etc/init.d</a></u>, but could vary depending on distribution).  For example:

           for x in /proc/driver/cciss/cciss[0-9]*
           do
               echo "engage scsi" &gt; $x
           done

       Once  the SCSI core is engaged by the driver, it cannot be disengaged (except by unloading the driver, if
       it happens to be linked as a module.)

       Note also that if no sequential access devices or medium changers are detected, the SCSI core will not be
       engaged by the action of the above script.

   <b>Hot</b> <b>plug</b> <b>support</b> <b>for</b> <b>SCSI</b> <b>tape</b> <b>drives</b>
       Hot plugging of SCSI tape drives is supported, with some caveats.  The <b>cciss</b> driver must be informed that
       changes to the SCSI bus have been made.  This may be done via the <u><a href="file:/proc">/proc</a></u> filesystem.  For example:

              echo "rescan" &gt; /proc/scsi/cciss0/1

       This causes the driver to:

              (1)  query the adapter about changes to the physical SCSI buses and/or  fiber  channel  arbitrated
                   loop, and

              (2)  make note of any new or removed sequential access devices or medium changers.

       The  driver  will output messages indicating which devices have been added or removed and the controller,
       bus, target, and lun used to address each device.  The driver then notifies the SCSI  midlayer  of  these
       changes.

       Note  that  the  naming  convention  of the <u><a href="file:/proc">/proc</a></u> filesystem entries contains a number in addition to the
       driver name (e.g., "cciss0" instead of just "cciss", which you might expect).

       Note: <u>Only</u> sequential access devices and medium changers are  presented  as  SCSI  devices  to  the  SCSI
       midlayer  by  the  <b>cciss</b>  driver.   Specifically, physical SCSI disk drives are <u>not</u> presented to the SCSI
       midlayer.  The only disk devices that are presented to the kernel  are  logical  drives  that  the  array
       controller constructs from regions on the physical drives.  The logical drives are presented to the block
       layer  (not  to  the SCSI midlayer).  It is important for the driver to prevent the kernel from accessing
       the physical drives directly, since these drives are used  by  the  array  controller  to  construct  the
       logical drives.

   <b>SCSI</b> <b>error</b> <b>handling</b> <b>for</b> <b>tape</b> <b>drives</b> <b>and</b> <b>medium</b> <b>changers</b>
       The  Linux  SCSI  midlayer  provides an error-handling protocol that is initiated whenever a SCSI command
       fails to complete within a certain amount of time (which can vary depending on the command).   The  <b>cciss</b>
       driver participates in this protocol to some extent.  The normal protocol is a four-step process:

       (1)  First, the device is told to abort the command.

       (2)  If that doesn't work, the device is reset.

       (3)  If that doesn't work, the SCSI bus is reset.

       (4)  If that doesn't work, the host bus adapter is reset.

       The  <b>cciss</b> driver is a block driver as well as a SCSI driver and only the tape drives and medium changers
       are presented to the SCSI midlayer.  Furthermore, unlike more  straightforward  SCSI  drivers,  disk  I/O
       continues  through  the  block  side during the SCSI error-recovery process.  Therefore, the <b>cciss</b> driver
       implements only the first two of these actions, aborting the command, and  resetting  the  device.   Note
       also  that  most tape drives will not oblige in aborting commands, and sometimes it appears they will not
       even obey a reset command, though in most circumstances they will.  If the command cannot be aborted  and
       the device cannot be reset, the device will be set offline.

       In  the  event  that  the  error-handling code is triggered and a tape drive is successfully reset or the
       tardy command is successfully aborted, the tape drive may still not allow  I/O  to  continue  until  some
       command  is  issued  that positions the tape to a known position.  Typically you must rewind the tape (by
       issuing <u>mt</u> <u>-f</u> <u>/dev/st0</u> <u>rewind</u> for example) before I/O can proceed again to a tape drive that was reset.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man4/hpsa.4.html">hpsa</a></b>(4), <b><a href="../man8/cciss_vol_status.8.html">cciss_vol_status</a></b>(8), <b><a href="../man8/hpacucli.8.html">hpacucli</a></b>(8), <b><a href="../man8/hpacuxe.8.html">hpacuxe</a></b>(8)

       <a href="http://cciss.sf.net">http://cciss.sf.net</a>,               and                <u>Documentation/blockdev/cciss.txt</u>                and
       <u>Documentation/ABI/testing/sysfs-bus-pci-devices-cciss</u> in the Linux kernel source tree

Linux man-pages 6.9.1                              2024-05-02                                           <u><a href="../man4/cciss.4.html">cciss</a></u>(4)
</pre>
 </div>
</div></section>
</div>
</body>
</html>