<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>acpi_ibm — ACPI extras driver for IBM laptops</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/freebsd-manpages">freebsd-manpages_12.2-2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       acpi_ibm — ACPI extras driver for IBM laptops

</pre><h4><b>SYNOPSIS</b></h4><pre>
       To compile this driver into the kernel, place the following line in your kernel configuration file:

             <b>device</b> <b>acpi_ibm</b>

       Alternatively, to load the driver as a module at boot time, place the following line in <u><a href="../man5/loader.conf.5.html">loader.conf</a></u>(5):

             acpi_ibm_load="YES"

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The  <b>acpi_ibm</b>  driver provides support for hotkeys and other components of IBM laptops.  The main purpose
       of this driver is  to  provide  an  interface,  accessible  via  <u><a href="../man8/sysctl.8.html">sysctl</a></u>(8)  and  <u><a href="../man8/devd.8.html">devd</a></u>(8),  through  which
       applications can determine the status of various laptop components.

       While  the  <u><a href="../man8/sysctl.8.html">sysctl</a></u>(8)  interface is enabled automatically after loading the driver, the <u><a href="../man8/devd.8.html">devd</a></u>(8) interface
       has to be enabled explicitly, as it may alter the default action  of  certain  keys.   This  is  done  by
       setting  the  <u>events</u>  sysctl as described below.  Specifying which keys should generate events is done by
       setting a bitmask, whereas each bit represents one key or key combination.  This bitmask, accessible  via
       the  <u>eventmask</u>  sysctl, is set to <u>availmask</u> by default, a value representing all possible keypress events
       on the specific ThinkPad model.

   <u><b><a href="../man8/devd.8.html">devd</a></b></u>(8) Events
       Hotkey events received by <u><a href="../man8/devd.8.html">devd</a></u>(8) provide the following information:

             system     "<b>ACPI</b>"
             subsystem  "<b>IBM</b>"
             type       The source of the event in the ACPI namespace.  The value depends on the model.
             notify     Event code (see below).

       Depending on the ThinkPad model, event codes may vary.  On a ThinkPad T41p these are as follows:

             <b>0x01</b>       Fn + F1
             <b>0x02</b>       Fn + F2
             <b>0x03</b>       Fn + F3 (LCD backlight)
             <b>0x04</b>       Fn + F4 (Suspend to RAM)
             <b>0x05</b>       Fn + F5 (Bluetooth)
             <b>0x06</b>       Fn + F6
             <b>0x07</b>       Fn + F7 (Screen expand)
             <b>0x08</b>       Fn + F8
             <b>0x09</b>       Fn + F9
             <b>0x0a</b>       Fn + F10
             <b>0x0b</b>       Fn + F11
             <b>0x0c</b>       Fn + F12 (Suspend to disk)
             <b>0x0d</b>       Fn + Backspace
             <b>0x0e</b>       Fn + Insert
             <b>0x0f</b>       Fn + Delete
             <b>0x10</b>       Fn + Home (Brightness up)
             <b>0x11</b>       Fn + End (Brightness down)
             <b>0x12</b>       Fn + PageUp (ThinkLight)
             <b>0x13</b>       Fn + PageDown
             <b>0x14</b>       Fn + Space (Zoom)
             <b>0x15</b>       Volume Up
             <b>0x16</b>       Volume Down
             <b>0x17</b>       Mute
             <b>0x18</b>       Access IBM Button

   <u><b><a href="../man4/led.4.html">led</a></b></u>(4) Interface
       The <b>acpi_ibm</b> driver provides a <u><a href="../man4/led.4.html">led</a></u>(4) interface for the ThinkLight.  The ThinkLight can be made to  blink
       by writing ASCII strings to the <u>/dev/led/thinklight</u> device.

</pre><h4><b>SYSCTL</b> <b>VARIABLES</b></h4><pre>
       The following sysctls are currently implemented:

       <u>dev.acpi_ibm.0.initialmask</u>
               (read-only) Bitmask of ACPI events before the <b>acpi_ibm</b> driver was loaded.

       <u>dev.acpi_ibm.0.availmask</u>
               (read-only) Bitmask of all supported ACPI events.

       <u>dev.acpi_ibm.0.events</u>
               Enable ACPI events and set the <u>eventmask</u> to <u>availmask</u>.  Without the <b>acpi_ibm</b> driver being loaded,
               only the Fn+F4 button generates an ACPI event.

       <u>dev.acpi_ibm.0.eventmask</u>
               Sets the ACPI events which are reported to <u><a href="../man8/devd.8.html">devd</a></u>(8).  Fn+F3, Fn+F4 and Fn+F12 always generate ACPI
               events,  regardless  which  value <u>eventmask</u> has.  Depending on the ThinkPad model, the meaning of
               different bits in the <u>eventmask</u> may vary.  On a ThinkPad  T41p  this  is  a  bitwise  OR  of  the
               following:

               <b>1</b>           Fn + F1
               <b>2</b>           Fn + F2
               <b>4</b>           Fn + F3 (LCD backlight)
               <b>8</b>           Fn + F4 (Suspend to RAM)
               <b>16</b>          Fn + F5 (Bluetooth)
               <b>32</b>          Fn + F6
               <b>64</b>          Fn + F7 (Screen expand)
               <b>128</b>         Fn + F8
               <b>256</b>         Fn + F9
               <b>512</b>         Fn + F10
               <b>1024</b>        Fn + F11
               <b>2048</b>        Fn + F12 (Suspend to disk)
               <b>4096</b>        Fn + Backspace
               <b>8192</b>        Fn + Insert
               <b>16384</b>       Fn + Delete
               <b>32768</b>       Fn + Home (Brightness up)
               <b>65536</b>       Fn + End (Brightness down)
               <b>131072</b>      Fn + PageUp (ThinkLight)
               <b>262144</b>      Fn + PageDown
               <b>524288</b>      Fn + Space (Zoom)
               <b>1048576</b>     Volume Up
               <b>2097152</b>     Volume Down
               <b>4194304</b>     Mute
               <b>8388608</b>     Access IBM Button

       <u>dev.acpi_ibm.0.hotkey</u>
               (read-only)  Status  of  several  buttons.  Every time a button is pressed, the respecting bit is
               toggled.  It is a bitwise OR of the following:

               <b>1</b>           Home Button
               <b>2</b>           Search Button
               <b>4</b>           Mail Button
               <b>8</b>           Access IBM Button
               <b>16</b>          Zoom
               <b>32</b>          Wireless LAN Button
               <b>64</b>          Video Button
               <b>128</b>         Hibernate Button
               <b>256</b>         ThinkLight Button
               <b>512</b>         Screen Expand
               <b>1024</b>        Brightness Up/Down Button
               <b>2048</b>        Volume Up/Down/Mute Button

       <u>dev.acpi_ibm.0.lcd_brightness</u>
               Current brightness level of the display.

       <u>dev.acpi_ibm.0.volume</u>
               Speaker volume.

       <u>dev.acpi_ibm.0.mute</u>
               Indicates, whether the speakers are muted or not.

       <u>dev.acpi_ibm.0.thinklight</u>
               Indicates, whether the ThinkLight keyboard light is activated or not.

       <u>dev.acpi_ibm.0.bluetooth</u>
               Toggle Bluetooth chip activity.

       <u>dev.acpi_ibm.0.wlan</u>
               (read-only) Indicates whether the WLAN chip is active or not.

       <u>dev.acpi_ibm.0.fan</u>
               Indicates whether the fan is in automatic (1) or manual (0) mode.   Default  is  automatic  mode.
               This  sysctl  should be used with extreme precaution, since disabling automatic fan control might
               overheat the ThinkPad and lead to permanent damage if the <u>fan_level</u> is not set accordingly.

       <u>dev.acpi_ibm.0.fan_level</u>
               Indicates at what speed the fan should run when being in manual mode.  Valid values range from  0
               (off)  to  7  (max) and 8.  Level 8 is used by the driver to set the fan in unthrottled mode.  In
               this mode, the fan is set to spin freely and will quickly reach a very high speed.  Use this mode
               only if absolutely necessary, e.g., if the system has reached its critical temperature and it  is
               about  to  shut  down.   The  resulting  speed differs from model to model.  On a T41p this is as
               follows:

               <b>0</b>           off
               <b>1,</b> <b>2</b>        ~3000 RPM
               <b>3,</b> <b>4,</b> <b>5</b>     ~3600 RPM
               <b>6,</b> <b>7</b>        ~4300 RPM
               <b>8</b>           ~6400 RPM (Full-speed, unthrottled)

       <u>dev.acpi_ibm.0.fan_speed</u>
               (read-only) Fan speed in rounds per minute.  A few older ThinkPads report the fan speed in levels
               ranging from 0 (off) to 7 (max).

       <u>dev.acpi_ibm.0.thermal</u>
               (read-only) Shows the readings of up to eight  different  temperature  sensors.   Most  ThinkPads
               include   six   or  more  temperature  sensors  but  only  expose  the  CPU  temperature  through
               <u><a href="../man4/acpi_thermal.4.html">acpi_thermal</a></u>(4).  Some ThinkPads have the below sensor layout which might vary depending  on  the
               specific model:

               1.   CPU
               2.   Mini PCI Module
               3.   HDD
               4.   GPU
               5.   Built-in battery
               6.   UltraBay battery
               7.   Built-in battery
               8.   UltraBay battery

       <u>dev.acpi_ibm.0.handlerevents</u>
               <u><a href="../man8/devd.8.html">devd</a></u>(8)  events  handled  by  <b>acpi_ibm</b>  when  <u>events</u>  is  set  to  1.   Events are specified as a
               whitespace-separated list of event code in hexadecimal or decimal  form.   Note  that  the  event
               maybe handled twice (e.g., Brightness up/down) if ACPI BIOS already handled the event.

       Defaults for these sysctls can be set in <u><a href="../man5/sysctl.conf.5.html">sysctl.conf</a></u>(5).

</pre><h4><b>FILES</b></h4><pre>
       <u>/dev/led/thinklight</u>  ThinkLight <u><a href="../man4/led.4.html">led</a></u>(4) device node

</pre><h4><b>EXAMPLES</b></h4><pre>
       The   following   can   be   added   to   <u><a href="../man5/devd.conf.5.html">devd.conf</a></u>(5)   in   order   to   pass   button   events   to  a
       <u>/usr/local/sbin/acpi_oem_exec.sh</u> script:

             notify 10 {
                     match "system"          "ACPI";
                     match "subsystem"       "IBM";
                     action "/usr/local/sbin/acpi_oem_exec.sh $notify ibm";
             };

       A possible <u>/usr/local/sbin/acpi_oem_exec.sh</u> script might look like:

             #!<a href="file:/bin/sh">/bin/sh</a>
             #
             if [ "$1" = "" -o "$2" = "" ]
             then
                     echo "usage: $0 notify oem_name"
                     exit 1
             fi
             NOTIFY=`echo $1`
             LOGGER="logger"
             CALC="bc"
             BC_PRECOMMANDS="scale=2"
             ECHO="echo"
             CUT="cut"
             MAX_LCD_BRIGHTNESS=7
             MAX_VOLUME=14
             OEM=$2
             DISPLAY_PIPE=/tmp/acpi_${OEM}_display

             case ${NOTIFY} in
                     0x05)
                             LEVEL=`sysctl -n dev.acpi_${OEM}.0.bluetooth`
                             if [ "$LEVEL" = "1" ]
                             then
                                     sysctl dev.acpi_${OEM}.0.bluetooth=0
                                     MESSAGE="bluetooth disabled"
                             else
                                     sysctl dev.acpi_${OEM}.0.bluetooth=1
                                     MESSAGE="bluetooth enabled"
                             fi
                             ;;
                     0x10|0x11)
                             LEVEL=`sysctl -n dev.acpi_${OEM}.0.lcd_brightness`
                             PERCENT=`${ECHO} "${BC_PRECOMMANDS} ; \
                                      ${LEVEL} / ${MAX_LCD_BRIGHTNESS} * 100" |\
                                      ${CALC} | ${CUT} -d . -f 1`
                             MESSAGE="brightness level ${PERCENT}%"
                             ;;
                     0x12)
                             LEVEL=`sysctl -n dev.acpi_${OEM}.0.thinklight`
                             if [ "$LEVEL" = "1" ]
                             then
                                     MESSAGE="thinklight enabled"
                             else
                                     MESSAGE="thinklight disabled"
                             fi
                             ;;
                     0x15|0x16)
                             LEVEL=`sysctl -n dev.acpi_${OEM}.0.volume`
                             PERCENT=`${ECHO} "${BC_PRECOMMANDS} ; \
                                     ${LEVEL} / ${MAX_VOLUME} * 100" | \
                                      ${CALC} | ${CUT} -d . -f 1`
                             MESSAGE="volume level ${PERCENT}%"
                             ;;
                     0x17)
                             LEVEL=`sysctl -n dev.acpi_${OEM}.0.mute`
                             if [ "$LEVEL" = "1" ]
                             then
                                     MESSAGE="volume muted"
                             else
                                     MESSAGE="volume unmuted"
                             fi
                             ;;
                     *)
                             ;;
             esac
             ${LOGGER} ${MESSAGE}
             if [ -p ${DISPLAY_PIPE} ]
             then
                     ${ECHO} ${MESSAGE} &gt;&gt; ${DISPLAY_PIPE} &amp;
             fi
             exit 0

       The following example specify that event code 0x04 (Suspend  to  RAM),  0x10  (Brightness  up)  and  0x11
       (Brightness down) are handled by <b>acpi_ibm</b>.

             sysctl dev.acpi_ibm.0.handlerevents='0x04 0x10 0x11'

       in <u><a href="../man5/sysctl.conf.5.html">sysctl.conf</a></u>(5):

             dev.acpi_ibm.0.handlerevents=0x04\ 0x10\ 0x11

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <u><a href="../man4/acpi.4.html">acpi</a></u>(4), <u><a href="../man4/led.4.html">led</a></u>(4), <u><a href="../man5/sysctl.conf.5.html">sysctl.conf</a></u>(5), <u><a href="../man8/devd.8.html">devd</a></u>(8), <u><a href="../man8/sysctl.8.html">sysctl</a></u>(8)

</pre><h4><b>HISTORY</b></h4><pre>
       The <b>acpi_ibm</b> device driver first appeared in FreeBSD 6.0.

</pre><h4><b>AUTHORS</b></h4><pre>
       The <b>acpi_ibm</b> driver was written by Takanori Watanabe &lt;<u><a href="mailto:takawata@FreeBSD.org">takawata@FreeBSD.org</a></u>&gt; and later mostly rewritten by
       Markus   Brueffer   &lt;<u><a href="mailto:markus@FreeBSD.org">markus@FreeBSD.org</a></u>&gt;.    This   manual   page   was  written  by  Christian  Brueffer
       &lt;<u><a href="mailto:brueffer@FreeBSD.org">brueffer@FreeBSD.org</a></u>&gt; and Markus Brueffer &lt;<u><a href="mailto:markus@FreeBSD.org">markus@FreeBSD.org</a></u>&gt;.

Debian                                            June 24, 2020                                      <u><a href="../man4/ACPI_IBM.4.html">ACPI_IBM</a></u>(4)
</pre>
 </div>
</div></section>
</div>
</body>
</html>