<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>dtrace_udp — a DTrace provider for tracing events related to the UDP protocol</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/freebsd-manpages">freebsd-manpages_12.2-2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       dtrace_udp — a DTrace provider for tracing events related to the UDP protocol

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>udp:::receive</b>(<u>pktinfo_t</u> <u>*</u>, <u>csinfo_t</u> <u>*</u>, <u>ipinfo_t</u> <u>*</u>, <u>udpsinfo_t</u> <u>*</u>, <u>udpinfo_t</u> <u>*</u>);

       <b>udp:::send</b>(<u>pktinfo_t</u> <u>*</u>, <u>csinfo_t</u> <u>*</u>, <u>ipinfo_t</u> <u>*</u>, <u>udpsinfo_t</u> <u>*</u>, <u>udpinfo_t</u> <u>*</u>);

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The  DTrace  <b>udp</b>  provider  allows  users  to  trace  events  in the <u><a href="../man4/udp.4.html">udp</a></u>(4) protocol implementation.  The
       <b>udp:::send</b>() probe fires whenever the kernel prepares to transmit a UDP packet, and  the  <b>udp:::receive</b>()
       probe  fires  whenever  the  kernel  receives  a  UDP  packet,  unless  the UDP header is incomplete, the
       destination port is 0, the length field is invalid, or the checksum is wrong.   The  arguments  to  these
       probes  can  be  used  to  obtain  detailed information about the IP and UDP headers of the corresponding
       packet.

</pre><h4><b>ARGUMENTS</b></h4><pre>
       The <u>pktinfo_t</u>  argument  is  currently  unimplemented  and  is  included  for  compatibility  with  other
       implementations of this provider.  Its fields are:

             <u>uintptr_t</u> <u>pkt_addr</u>  Always set to 0.

       The  <u>csinfo_t</u>  argument  is  currently  unimplemented  and  is  included  for  compatibility  with  other
       implementations of this provider.  Its fields are:

             <u>uintptr_t</u> <u>cs_addr</u>  Always set to 0.

             <u>uint64_t</u> <u>cs_cid</u>    A pointer to the <u>struct</u> <u>inpcb</u> for this packet, or NULL.

             <u>pid_t</u> <u>cs_pid</u>       Always set to 0.

       The <u>ipinfo_t</u> argument contains IP fields common to both IPv4 and IPv6 packets.  Its fields are:

             <u>uint8_t</u> <u>ip_ver</u>       IP version of the packet, 4 for IPv4 packets and 6 for IPv6 packets.

             <u>uint32_t</u> <u>ip_plength</u>  IP payload size.  This does not include the size of  the  IP  header  or  IPv6
                                  option headers.

             <u>string</u> <u>ip_saddr</u>      IP source address.

             <u>string</u> <u>ip_daddr</u>      IP destination address.

       The  <u>udpsinfo_t</u> argument contains the state of the UDP connection associated with the packet.  Its fields
       are:

             <u>uintptr_t</u> <u>udps_addr</u>  Pointer to the <u>struct</u> <u>inpcb</u> containing the IP state for the associated socket.

             <u>uint16_t</u> <u>udps_lport</u>  Local UDP port.

             <u>uint16_t</u> <u>udps_rport</u>  Remote UDP port.

             <u>string</u> <u>udps_laddr</u>    Local IPv4 or IPv6 address.

             <u>string</u> <u>udps_raddr</u>    Remote IPv4 or IPv6 address.

       The <u>udpinfo_t</u> argument is the raw UDP header of the packet, with all fields in host  order.   Its  fields
       are:

             <u>uint16_t</u> <u>udp_sport</u>      Source UDP port.

             <u>uint16_t</u> <u>udp_dport</u>      Destination UDP port.

             <u>uint16_t</u> <u>udp_length</u>     Length of the UDP header and payload, in bytes.

             <u>uint16_t</u> <u>udp_checksum</u>   A  checksum  of  the  UDP  header  and  payload,  or  0  if no checksum was
                                     calculated.

             <u>struct</u> <u>udphdr</u> <u>*udp_hdr</u>  A pointer to the raw UDP header.

</pre><h4><b>FILES</b></h4><pre>
       <u>/usr/lib/dtrace/udp.d</u>  DTrace type and translator definitions for the <b>udp</b> provider.

</pre><h4><b>EXAMPLES</b></h4><pre>
       The following script counts transmitted packets by destination port.

             udp:::send
             {
                     @num[args[4]-&gt;udp_dport] = count();
             }

       This script will print some details of each UDP packet as it is sent or received by the kernel:

             #pragma D option quiet
             #pragma D option switchrate=10Hz

             dtrace:::BEGIN
             {
                     printf(" %10s %36s    %-36s %6s\n", "DELTA(us)", "SOURCE",
                         "DEST", "BYTES");
                     last = timestamp;
             }

             udp:::send
             {
                     this-&gt;elapsed = (timestamp - last) / 1000;
                     self-&gt;dest = strjoin(strjoin(args[2]-&gt;ip_daddr, ":"),
                          lltostr(args[4]-&gt;udp_dport));
                     printf(" %10d %30s:%-5d -&gt; %-36s %6d\n", this-&gt;elapsed,
                         args[2]-&gt;ip_saddr, args[4]-&gt;udp_sport,
                         self-&gt;dest, args[4]-&gt;udp_length);
                     last = timestamp;
             }

             udp:::receive
             {
                     this-&gt;elapsed = (timestamp - last) / 1000;
                     self-&gt;dest = strjoin(strjoin(args[2]-&gt;ip_saddr, ":"),
                          lltostr(args[4]-&gt;udp_sport));
                     printf(" %10d %30s:%-5d &lt;- %-36s %6d\n", this-&gt;elapsed,
                         args[2]-&gt;ip_daddr, args[4]-&gt;udp_dport,
                         self-&gt;dest, args[4]-&gt;udp_length);
                     last = timestamp;
             }

</pre><h4><b>COMPATIBILITY</b></h4><pre>
       This provider is compatible with the <b>udp</b> provider in Solaris.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <u><a href="../man1/dtrace.1.html">dtrace</a></u>(1), <u><a href="../man4/dtrace_ip.4.html">dtrace_ip</a></u>(4), <u><a href="../man4/dtrace_sctp.4.html">dtrace_sctp</a></u>(4), <u><a href="../man4/dtrace_tcp.4.html">dtrace_tcp</a></u>(4), <u><a href="../man4/dtrace_udplite.4.html">dtrace_udplite</a></u>(4), <u><a href="../man4/udp.4.html">udp</a></u>(4), <u><a href="../man9/SDT.9.html">SDT</a></u>(9)

</pre><h4><b>HISTORY</b></h4><pre>
       The <b>udp</b> provider first appeared in FreeBSD 10.0.

</pre><h4><b>AUTHORS</b></h4><pre>
       This manual page was written by Mark Johnston &lt;<u><a href="mailto:markj@FreeBSD.org">markj@FreeBSD.org</a></u>&gt;.

Debian                                           August 1, 2018                                    <u><a href="../man4/DTRACE_UDP.4.html">DTRACE_UDP</a></u>(4)
</pre>
 </div>
</div></section>
</div>
</body>
</html>