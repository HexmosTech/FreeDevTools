<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ng_pptpgre — PPTP GRE protocol netgraph node type</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/freebsd-manpages">freebsd-manpages_12.2-2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       ng_pptpgre — PPTP GRE protocol netgraph node type

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;sys/types.h&gt;</b>
       <b>#include</b> <b>&lt;netgraph/ng_pptpgre.h&gt;</b>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The  <b>pptpgre</b>  node  type  performs  Generic  Routing Encapsulation (GRE) over IP for the PPTP protocol as
       specified by RFC 2637.  This involves packet encapsulation, sequencing, acknowledgement, and an  adaptive
       timeout sliding window mechanism.  This node type does not handle any of the TCP control protocol or call
       negotiation defined by PPTP.

       This  node type expects to receive complete IP packets, including the IP header, on the “<b>lower</b>” hook, but
       it transmits outgoing frames without any IP header.  The typical use for  this  node  type  would  be  to
       connect  the  “<b>upper</b>”  hook  to  one  of  the link hooks of a <u><a href="../man4/ng_ppp.4.html">ng_ppp</a></u>(4) node, and the “<b>lower</b>” hook to the
       “<b>inet/raw/gre</b>” hook of a <u><a href="../man4/ng_ksocket.4.html">ng_ksocket</a></u>(4) node.

</pre><h4><b>HOOKS</b></h4><pre>
       This node type supports the following hooks:

       <u>session_hhhh</u>  Session 0xhhhh data packets to the upper protocol layers

       <u>upper</u>         Same as session_hhhh, but for single session with configurable cid (legacy)

       <u>lower</u>         Connection to the lower protocol layers

</pre><h4><b>CONTROL</b> <b>MESSAGES</b></h4><pre>
       This node type supports the generic control messages, plus the following:

       NGM_PPTPGRE_SET_CONFIG (<b>setconfig</b>)
            This command resets and configures hook for a session.  If corresponding session_hhhh  hook  is  not
            connected,  upper  hook  will  be  configured.   This  command  takes a <u>struct</u> <u>ng_pptpgre_conf</u> as an
            argument:

            /* Configuration for a session */
            struct ng_pptpgre_conf {
                u_char      enabled;          /* enables traffic flow */
                u_char      enableDelayedAck; /* enables delayed acks */
                u_char      enableAlwaysAck;  /* always include ack with data */
                u_char      enableWindowing;  /* enable windowing algorithm */
                uint16_t    cid;              /* my call id */
                uint16_t    peerCid;          /* peer call id */
                uint16_t    recvWin;          /* peer recv window size */
                uint16_t    peerPpd;          /* peer packet processing delay
                                                 (in 1/10 of a second) */
            };

            The <u>enabled</u> field enables traffic flow through the node.  The <u>enableDelayedAck</u> field enables delayed
            acknowledgement (maximum 250 milliseconds), which is a useful optimization and should  generally  be
            turned  on.  <u>enableAlwaysAck</u> field enables sending acknowledgements with every data packet, which is
            probably helpful as well.

            <u>enableWindowing</u> enables the PPTP packet windowing mechanism specified by  the  protocol.   Disabling
            this  will  cause  the  node to violate the protocol, possibly confusing other PPTP peers, but often
            results in better performance.  The windowing mechanism is a design  error  in  the  PPTP  protocol;
            L2TP, the successor to PPTP, removes it.

            The remaining fields are as supplied by the PPTP virtual call setup process.

       NGM_PPTPGRE_GET_CONFIG (<b>getconfig</b>)
            Takes two byte argument as cid and returns the current configuration as a <u>struct</u> <u>ng_pptpgre_conf</u>.

       NGM_PPTPGRE_GET_STATS (<b>getstats</b>)
            This command returns a <u>struct</u> <u>ng_pptpgre_stats</u> containing various node statistics.

       NGM_PPTPGRE_CLR_STATS (<b>clrstats</b>)
            This command resets the node statistics.

       NGM_PPTPGRE_GETCLR_STATS (<b>getclrstats</b>)
            This command atomically gets and resets the node statistics, returning a <u>struct</u> <u>ng_pptpgre_stats</u>.

</pre><h4><b>SHUTDOWN</b></h4><pre>
       This  node  shuts  down  upon  receipt  of  a  NGM_SHUTDOWN control message, or when both hooks have been
       disconnected.

</pre><h4><b>SYSCTL</b> <b>VARIABLES</b></h4><pre>
       A set of <u><a href="../man8/sysctl.8.html">sysctl</a></u>(8) variables controls ability of this node to deal with some  amount  of  packet  reorder
       that sometimes happens in transit.  Packet reorder results in packet drops (unless the order is restored)
       as  PPP  protocol  can  not  deliver reordered data.  These variables are shown below together with their
       default value and meaning:

       <u>net.graph.pptpgre.reorder_max:</u> <u>1</u>
               Defines maximum length of node's private reorder  queue  used  to  keep  data  waiting  for  late
               packets.  Zero value disables reordering.  Default value allows the node to restore the order for
               two  packets  swapped  in  transit.   Greater values allow the node to deliver packets being late
               after more packets in sequence at cost of increased kernel memory usage.

       <u>net.graph.pptpgre.reorder_timeout:</u> <u>1</u>
               Defines time value in miliseconds used to wait for late packets.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <u><a href="../man4/netgraph.4.html">netgraph</a></u>(4), <u><a href="../man4/ng_ksocket.4.html">ng_ksocket</a></u>(4), <u><a href="../man4/ng_ppp.4.html">ng_ppp</a></u>(4), <u><a href="../man8/ngctl.8.html">ngctl</a></u>(8), <u><a href="../man8/sysctl.8.html">sysctl</a></u>(8)

       K. Hamzeh, G. Pall, W. Verthein, J. Taarud, W. Little, and G.  Zorn,  <u>Point-to-Point</u>  <u>Tunneling</u>  <u>Protocol</u>
       <u>(PPTP)</u>, RFC 2637.

       S. Hanks, T. Li, D. Farinacci, and P. Traina, <u>Generic</u> <u>Routing</u> <u>Encapsulation</u> <u>over</u> <u>IPv4</u> <u>networks</u>, RFC 1702.

</pre><h4><b>HISTORY</b></h4><pre>
       The <b>ng_pptpgre</b> node type was implemented in FreeBSD 4.0.

</pre><h4><b>AUTHORS</b></h4><pre>
       Archie Cobbs &lt;<u><a href="mailto:archie@FreeBSD.org">archie@FreeBSD.org</a></u>&gt;

</pre><h4><b>BUGS</b></h4><pre>
       The  node  should  not expect incoming GRE packets to have an IP header.  This behavior is inherited from
       the (converse) behavior of raw IP sockets.  An intermediate node that strips IP headers in one  direction
       should be used instead.

Debian                                          November 4, 2018                                   <u><a href="../man4/NG_PPTPGRE.4.html">NG_PPTPGRE</a></u>(4)
</pre>
 </div>
</div></section>
</div>
</body>
</html>