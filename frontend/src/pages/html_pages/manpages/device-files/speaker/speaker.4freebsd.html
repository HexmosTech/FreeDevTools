<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>speaker, spkr — console speaker device driver</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/freebsd-manpages">freebsd-manpages_12.2-2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       speaker, spkr — console speaker device driver

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>device</b> <b>speaker</b>
       <b>#include</b> <b>&lt;dev/speaker/speaker.h&gt;</b>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The  speaker device driver allows applications to control the PC console speaker on an IBM-PC--compatible
       machine running FreeBSD.

       Only one process may have this device open at any given time; <u><a href="../man2/open.2.html">open</a></u>(2) and <u><a href="../man2/close.2.html">close</a></u>(2) are used to  lock  and
       relinquish  it.   An  attempt  to  open when another process has the device locked will return -1 with an
       EBUSY error indication.  Writes to the device are interpreted as `play strings' in a simple ASCII  melody
       notation.  An <u><a href="../man2/ioctl.2.html">ioctl</a></u>(2) request for tone generation at arbitrary frequencies is also supported.

       Sound-generation  does not monopolize the processor; in fact, the driver spends most of its time sleeping
       while the PC hardware is emitting tones.  Other processes may emit beeps while the driver is running.

       Applications may call <u><a href="../man2/ioctl.2.html">ioctl</a></u>(2) on a speaker file descriptor  to  control  the  speaker  driver  directly;
       definitions  for  the  <u><a href="../man2/ioctl.2.html">ioctl</a></u>(2)  interface  are in &lt;<u>dev/speaker/speaker.h</u>&gt;.  The <b>tone_t</b> structure used in
       these calls has two fields, specifying a frequency (in Hz) and a duration (in 1/100ths of a  second).   A
       frequency of zero is interpreted as a rest.

       At  present  there are two such <u><a href="../man2/ioctl.2.html">ioctl</a></u>(2) calls.  SPKRTONE accepts a pointer to a single tone structure as
       third argument and plays it.  SPKRTUNE accepts a pointer to the first of an array of tone structures  and
       plays them in continuous sequence; this array must be terminated by a final member with a zero duration.

       The play-string language is modeled on the PLAY statement conventions of IBM Advanced BASIC 2.0.  The <b>MB</b>,
       <b>MF</b>,  and  <b>X</b> primitives of PLAY are not useful in a timesharing environment and are omitted.  The `octave-
       tracking' feature and the slur mark are new.

       There are 84 accessible notes numbered 1-84 in 7 octaves, each running from C to  B,  numbered  0-6;  the
       scale  is  equal-tempered  A440  and  octave 3 starts with middle C.  By default, the play function emits
       half-second notes with the last 1/16th second being `rest time'.

       Play strings are interpreted left to right as a series of play command groups; letter  case  is  ignored.
       Play command groups are as follows:

       <b>CDEFGAB</b>    Letters  A  through G cause the corresponding note to be played in the current octave.  A note
                  letter may optionally be followed by an “<u>accidental</u> <u>sign</u>”, one of # + or -; the first  two  of
                  these  cause  it  to be sharped one half-tone, the last causes it to be flatted one half-tone.
                  It may also be followed by a time value number and by sustain dots (see below).   Time  values
                  are interpreted as for the L command below.

       <b>O</b> <b>n</b>        If  <b>n</b>  is  numeric,  this  sets  the current octave.  <b>n</b> may also be one of <b>L</b> or <b>N</b> to enable or
                  disable  octave-tracking  (it  is  disabled  by  default).   When   octave-tracking   is   on,
                  interpretation of a pair of letter notes will change octaves if necessary in order to make the
                  smallest possible jump between notes.  Thus ``olbc'' will be played as ``olb&gt;c'', and ``olcb''
                  as  ``olc&lt;b''.   Octave locking is disabled for one letter note following &gt;, &lt; and O[0123456].
                  (The octave-locking feature is not supported in IBM BASIC.)

       <b>&gt;</b>          Bump the current octave up one.

       <b>&lt;</b>          Drop the current octave down one.

       <b>N</b> <b>n</b>        Play note <b>n</b>, <b>n</b> being 1 to 84 or 0 for a rest of  current  time  value.   May  be  followed  by
                  sustain dots.

       <b>L</b> <b>n</b>        Sets  the  current  time  value for notes.  The default is <b>L4</b>, quarter or crotchet notes.  The
                  lowest possible value is 1; values up to 64 are accepted.  <b>L1</b> sets whole notes, <b>L2</b>  sets  half
                  notes, <b>L4</b> sets quarter notes, etc.

       <b>P</b> <b>n</b>        Pause  (rest),  with  <b>n</b> interpreted as for <b>L</b> <b>n</b>.  May be followed by sustain dots.  May also be
                  written <b>~</b>.

       <b>T</b> <b>n</b>        Sets the number of quarter notes per minute; default is 120.  Musical names for  common  tempi
                  are:

                                        Tempo           Beats Per Minute
                        very slow       Larghissimo
                                        Largo           40-60
                                        Larghetto       60-66
                                        Grave
                                        Lento
                                        Adagio          66-76
                        slow            Adagietto
                                        Andante         76-108
                        medium          Andantino
                                        Moderato        108-120
                        fast            Allegretto
                                        Allegro         120-168
                                        Vivace
                                        Veloce
                                        Presto          168-208
                        very fast       Prestissimo

       <b>M[LNS]</b>     Set  articulation.   <b>MN</b>  (<b>N</b>  for normal) is the default; the last 1/8th of the note's value is
                  rest time.  You can set <b>ML</b> for legato (no rest space) or <b>MS</b> for staccato (1/4 rest space).

       Notes (that is, <b>CDEFGAB</b> or <b>N</b> command character groups) may be followed by sustain dots.  Each dot  causes
       the  note's value to be lengthened by one-half for each one.  Thus, a note dotted once is held for 3/2 of
       its undotted value; dotted twice, it is held 9/4, and three times would give 27/8.

       A note and its sustain dots may also be followed by a slur mark (underscore).   This  causes  the  normal
       micro-rest  after  the  note  to  be  filled  in,  slurring it to the next one.  (The slur feature is not
       supported in IBM BASIC.)

       Whitespace in play strings is simply skipped and may be used to separate melody sections.

</pre><h4><b>FILES</b></h4><pre>
       <u>/dev/speaker</u>    speaker device file

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <u><a href="../man8/spkrtest.8.html">spkrtest</a></u>(8)

</pre><h4><b>HISTORY</b></h4><pre>
       The <b>speaker</b> device appeared in FreeBSD 1.0.

</pre><h4><b>AUTHORS</b></h4><pre>
       Eric S. Raymond &lt;<u><a href="mailto:esr@snark.thyrsus.com">esr@snark.thyrsus.com</a></u>&gt;, June 1990

</pre><h4><b>PORTED</b> <b>BY</b></h4><pre>
       Andrew A. Chernov &lt;<u><a href="mailto:ache@astral.msk.su">ache@astral.msk.su</a></u>&gt;

</pre><h4><b>BUGS</b></h4><pre>
       Due to roundoff in the pitch tables and slop in the tone-generation and timer hardware (neither of  which
       was  designed  for precision), neither pitch accuracy nor timings will be mathematically exact.  There is
       no volume control.

       The action of two or more sustain dots does not reflect standard musical notation, in which each dot adds
       half the value of the previous dot modifier, not half the value of the note as modified.   Thus,  a  note
       dotted  once  is  held for 3/2 of its undotted value; dotted twice, it is held 7/4, and three times would
       give 15/8.  The multiply-by-3/2 interpretation, however, is specified in the IBM  BASIC  manual  and  has
       been retained for compatibility.

       In  play  strings  which  are  very long (longer than your system's physical I/O blocks) note suffixes or
       numbers may occasionally be parsed incorrectly due to crossing a block boundary.

Debian                                          November 10, 2005                                        <u><a href="../man4/SPKR.4.html">SPKR</a></u>(4)
</pre>
 </div>
</div></section>
</div>
</body>
</html>