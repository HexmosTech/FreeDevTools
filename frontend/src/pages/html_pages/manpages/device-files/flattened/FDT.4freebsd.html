<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>fdt — Flattened Device Tree support</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/freebsd-manpages">freebsd-manpages_12.2-2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       fdt — Flattened Device Tree support

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>options</b> <b>FDT</b>
       <b>makeoptions</b> <b>FDT_DTS_FILE=&lt;board</b> <b>name&gt;.dts</b>
       <b>options</b> <b>FDT_DTB_STATIC</b>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <u>Flattened</u>  <u>Device</u>  <u>Tree</u> is a mechanism for describing computer hardware resources, which cannot be probed
       or self enumerated, in a uniform and portable way.  The primary consumers of this technology are <u>embedded</u>
       <u>systems,</u> where a lot of designs are based on similar chips, but have different assignment of pins, memory
       layout, addresses bindings, interrupts routing and other resources.

       Configuration data, which cannot be self discovered in run-time, has to be supplied from external source.
       The concept of a flattened device tree is a platform and architecture independent approach for  resolving
       such  problems.   The  idea  is  inherited  from Open Firmware IEEE 1275 device-tree notion, and has been
       successfully adopted by the embedded industry.  The scheme works in the following way:

       <b>•</b>   Hardware platform resources are <u>manually</u> described in a human readable text source format, where  all
           non self-enumerating information is gathered.

       <b>•</b>   This  source  description  is  converted <u>(compiled)</u> into a binary object i.e. a flattened device tree
           <u>blob</u> which is passed to the kernel at boot time.

       <b>•</b>   The kernel (driver) learns about hardware resources details and dependencies  from  this  [externally
           supplied] blob, which eliminates the need for embedding any information about the underlying platform
           hardware resources in the kernel.

       <b>•</b>   The  flattened  device  tree  mechanism  in  principle  does not depend on any particular first-stage
           bootloader or firmware features.  The only overall requirement for the environment is  to  provide  a
           complete device tree description to the kernel.

       The  <b>fdt</b>  layer  allows  any platform code in the kernel to retrieve information about hardware resources
       from a unified origin, which brings  advantages  to  the  embedded  applications  (eliminates  hard-coded
       configuration  approach,  enforces  code  to be data driven and extensible) leading to easier porting and
       maintenance.

</pre><h4><b>DEFINITIONS</b></h4><pre>
       <u>Device</u> <u>tree</u> <u>source</u> <u>(DTS)</u>
                     The device tree source is a text file which describes  hardware  resources  of  a  computer
                     system in a human-readable form, with certain hierarchical structure (a tree).  The default
                     location for DTS files in the FreeBSD source repository is <u>sys/dts</u> directory.

       <u>Device</u> <u>tree</u> <u>blob</u> <u>(DTB)</u>
                     The  textual device tree description (DTS file) is first converted (compiled) into a binary
                     object (the device tree blob) i.e. the DTB, which is handed  over  to  the  final  consumer
                     (typically kernel) for parsing and processing of its contents.

       <u>Device</u> <u>tree</u> <u>compiler</u> <u>(DTC)</u>
                     A  utility  program executed on the host, which transforms (compiles) a textual description
                     of a device tree (DTS) into a binary object (DTB).

       <u>Device</u> <u>tree</u> <u>bindings</u>
                     While the device tree textual description and the binary object are  media  to  convey  the
                     hardware  configuration  information,  an actual meaning and interpretation of the contents
                     are defined  by  the  device  tree  <u>bindings</u>.   They  are  certain  conventions  describing
                     definitions  (encoding)  of particular nodes in a device tree and their properties, allowed
                     values, ranges and so on.  Such reference conventions were  provided  by  the  legacy  Open
                     Firmware bindings, further supplemented by the ePAPR specification.

</pre><h4><b>BUILDING</b> <b>THE</b> <b>WORLD</b></h4><pre>
       In order for the system to support <b>fdt</b> it is required that FreeBSD world be built with the <u>WITH_FDT</u> build
       knob supplied either via <u><a href="../man5/src.conf.5.html">src.conf</a></u>(5) or command line defined with -D.

       This creates the user space <u>dtc</u> compiler and enables <b>fdt</b> support in <u><a href="../man8/loader.8.html">loader</a></u>(8).

</pre><h4><b>BUILDING</b> <b>KERNEL</b></h4><pre>
       There is a couple of options for managing <b>fdt</b> support at the FreeBSD kernel level.

       <u>makeoptions</u> <u>DTS+=&lt;board</u> <u>name&gt;.dts</u>
                     Specifies  device tree source (DTS) files for a given kernel.  The indicated DTS files will
                     be converted (compiled) into a binary form along with building the kernel itself.  Any  DTS
                     file  names  not  written  as  an  absolute  path must be specified relative to the default
                     location of DTS sources i.e., <u>sys/dts</u>.

       <u>makeoptions</u> <u>DTSO+=&lt;overlay</u> <u>name&gt;.dtso</u>
                     Specifies device tree source overlay (DTSO) files for a given kernel.  Overlay  files  will
                     be  built  with  the  kernel  as  with  the  makeoption <u>DTS</u> described above.  Overlay files
                     specified as relative paths will be relative to the default location of  DTS  overlays  for
                     the platform being built i.e., <u>sys/dts/arm/overlays</u>.

       <u>options</u> <u>FDT</u>   The  primary  option  for  enabling <b>fdt</b> support in the kernel.  It covers all low-level and
                     infrastructure parts  of  <b>fdt</b>  kernel  support,  which  primarily  are  the  <u><a href="../man4/fdtbus.4.html">fdtbus</a></u>(4)  and
                     <u><a href="../man4/simplebus.4.html">simplebus</a></u>(4) drivers, as well as helper routines and libraries.

       <u>makeoptions</u> <u>FDT_DTS_FILE=&lt;board</u> <u>name&gt;.dts</u>
                     Specifies  a preferred (default) device tree source (DTS) file for a given kernel.  It will
                     be built along with the kernel as if it were supplied  via  the  makeoption  <u>DTS</u>  described
                     above.  This makeoption is not mandatory unless FDT_DTB_STATIC is also defined (see below).

       <u>options</u> <u>FDT_DTB_STATIC</u>
                     Typically,  the  device tree blob (DTB) is a stand-alone file, physically separate from the
                     kernel, but this option lets statically embed a DTB file into a kernel  image.   Note  that
                     when  this is specified the FDT_DTS_FILE makeoption becomes mandatory (as there needs to be
                     a DTS file specified in order to embed it into the kernel image).

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <u><a href="../man4/fdtbus.4.html">fdtbus</a></u>(4), <u><a href="../man4/openfirm.4.html">openfirm</a></u>(4), <u><a href="../man4/simplebus.4.html">simplebus</a></u>(4)

</pre><h4><b>STANDARDS</b></h4><pre>
       IEEE Std 1275: IEEE Standard for Boot (Initialization  Configuration)  Firmware:  Core  Requirements  and
       Practices (<u>Open</u> <u>Firmware</u>).

       Power.org Standard for Embedded Power Architecture Platform Requirements (<u>ePAPR</u>).

</pre><h4><b>HISTORY</b></h4><pre>
       The <b>fdt</b> support first appeared in FreeBSD 9.0.

</pre><h4><b>AUTHORS</b></h4><pre>
       The  <b>fdt</b>  support  was  developed by Semihalf under sponsorship from the FreeBSD Foundation.  This manual
       page was written by Rafal Jaworowski.

Debian                                           March 28, 2019                                           <u><a href="../man4/FDT.4.html">FDT</a></u>(4)
</pre>
 </div>
</div></section>
</div>
</body>
</html>