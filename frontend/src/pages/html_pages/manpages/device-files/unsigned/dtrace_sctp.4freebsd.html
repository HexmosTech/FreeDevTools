<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>dtrace_sctp — a DTrace provider for tracing events related to the sctp(4) protocol</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/freebsd-manpages">freebsd-manpages_12.2-2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       dtrace_sctp — a DTrace provider for tracing events related to the <u><a href="../man4/sctp.4.html">sctp</a></u>(4) protocol

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>sctp:cwnd::init</b>(<u>uint32_t</u>, <u>uint32_t</u>, <u>uintptr_t</u>, <u>int</u>, <u>int</u>);

       <b>sctp:cwnd::ack</b>(<u>uint32_t</u>, <u>uint32_t</u>, <u>uintptr_t</u>, <u>int</u>, <u>int</u>);

       <b>sctp:cwnd::rttvar</b>(<u>uint64_t</u>, <u>uint64_t</u>, <u>uint64_t</u>, <u>uint64_t</u>, <u>uint64_t</u>);

       <b>sctp:cwnd::rttstep</b>(<u>uint64_t</u>, <u>uint64_t</u>, <u>uint64_t</u>, <u>uint64_t</u>, <u>uint64_t</u>);

       <b>sctp:cwnd::fr</b>(<u>uint32_t</u>, <u>uint32_t</u>, <u>uintptr_t</u>, <u>int</u>, <u>int</u>);

       <b>sctp:cwnd::to</b>(<u>uint32_t</u>, <u>uint32_t</u>, <u>uintptr_t</u>, <u>int</u>, <u>int</u>);

       <b>sctp:cwnd::bl</b>(<u>uint32_t</u>, <u>uint32_t</u>, <u>uintptr_t</u>, <u>int</u>, <u>int</u>);

       <b>sctp:cwnd::ecn</b>(<u>uint32_t</u>, <u>uint32_t</u>, <u>uintptr_t</u>, <u>int</u>, <u>int</u>);

       <b>sctp:cwnd::pd</b>(<u>uint32_t</u>, <u>uint32_t</u>, <u>uintptr_t</u>, <u>int</u>, <u>int</u>);

       <b>sctp:rwnd:assoc:val</b>(<u>uint32_t</u>, <u>uint32_t</u>, <u>int</u>, <u>int</u>);

       <b>sctp:flightsize:net:val</b>(<u>uint32_t</u>, <u>uint32_t</u>, <u>uintptr_t</u>, <u>int</u>, <u>int</u>);

       <b>sctp:flightsize:assoc:val</b>(<u>uint32_t</u>, <u>uint32_t</u>, <u>int</u>, <u>int</u>);

       <b>sctp:::receive</b>(<u>pktinfo_t</u> <u>*</u>, <u>csinfo_t</u> <u>*</u>, <u>ipinfo_t</u> <u>*</u>, <u>sctpsinfo_t</u> <u>*</u>, <u>sctpinfo_t</u> <u>*</u>);

       <b>sctp:::send</b>(<u>pktinfo_t</u> <u>*</u>, <u>csinfo_t</u> <u>*</u>, <u>ipinfo_t</u> <u>*</u>, <u>sctpsinfo_t</u> <u>*</u>, <u>sctpinfo_t</u> <u>*</u>);

       <b>sctp:::state-change</b>(<u>void</u> <u>*</u>, <u>csinfo_t</u> <u>*</u>, <u>void</u> <u>*</u>, <u>sctpsinfo_t</u> <u>*</u>, <u>void</u> <u>*</u>, <u>sctplsinfo_t</u> <u>*</u>);

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The  DTrace  <b>sctp</b>  provider  allows  users  to trace events in the <u><a href="../man4/sctp.4.html">sctp</a></u>(4) protocol implementation.  This
       provider is similar to the <u><a href="../man4/dtrace_ip.4.html">dtrace_ip</a></u>(4) and <u><a href="../man4/dtrace_udp.4.html">dtrace_udp</a></u>(4) providers,  but  additionally  contains  probes
       corresponding to protocol events at a level higher than packet reception and transmission.

       The  <b>sctp:cwnd::</b>()  probes  track  changes  in the congestion window on a netp.  The <b>sctp:rwnd::</b>() probes
       track changes in the receiver window for an assoc.  The <b>sctp:flightsize:net:val</b>() probe tracks changes in
       the flight size on a net or assoc and the <b>sctp:flightsize:assoc:val</b>() probe  provides  the  total  flight
       version.

       The arguments of all <b>sctp</b> probes except for <b>sctp:cwnd::rtt*</b>() and <b>sctp::assoc:val</b>() are the Vtag for this
       end,  the  port number of the local side, the pointer to struct sctp_nets *changing, the old value of the
       cwnd, and the new value of the cwnd.

       The arguments of <b>sctp:::val</b>() are similar to the above except the fourth argument is the up/down amount.

       The <b>sctp:cwnd::rtt*</b>() probe arguments are a bitmap of Vtag &lt;&lt; 32 | localport &lt;&lt; 16 | remoteport, a bitmap
       of obw | nbw, a bitmap of bwrtt | newrtt, flight, and  a  bitmap  of  (cwnd  &lt;&lt;  32)  |  point  &lt;&lt;  16  |
       retval(0/1).

       The <b>sctp:cwnd::init</b>() probe fires when a remotely-initiated active SCTP open succeeds.  At this point the
       new  connection  is  in the ESTABLISHED state, and the probe arguments expose the headers associated with
       the final ACK of the four-way handshake.

       The <b>sctp:::send</b>() and <b>sctp:::receive</b>() probes fire when the  host  sends  or  receives  an  SCTP  packet,
       respectively.   As  with  the <u><a href="../man4/dtrace_udp.4.html">dtrace_udp</a></u>(4) provider, <b>sctp</b> probes fire only for packets sent by or to the
       local host; forwarded packets are handled in the IP layer  and  are  only  visible  to  the  <u><a href="../man4/dtrace_ip.4.html">dtrace_ip</a></u>(4)
       provider.

       The  <b>sctp:::state-change</b>()  probe  fires upon local SCTP association state transitions.  Its first, third
       and fifth arguments are currently always NULL.   Its  last  argument  describes  the  from-state  in  the
       transition, and the to-state can be obtained from args[3]-&gt;sctps_state.

</pre><h4><b>FILES</b></h4><pre>
       <u>/usr/lib/dtrace/sctp.d</u>  DTrace type and translator definitions for the <b>sctp</b> provider.

</pre><h4><b>EXAMPLES</b></h4><pre>
       A script that logs SCTP packets in real time:

             #pragma D option quiet
             #pragma D option switchrate=10hz

             dtrace:::BEGIN
             {
                     printf(" %3s %15s:%-5s      %15s:%-5s0, "CPU",
                         "LADDR", "LPORT", "RADDR", "RPORT");
             }

             sctp:::send
             {
                     printf(" %3d %16s:%-5d -&gt; %16s:%-5d0, cpu,
                         args[2]-&gt;ip_saddr, args[4]-&gt;sctp_sport,
                         args[2]-&gt;ip_daddr, args[4]-&gt;sctp_dport);
             }

             sctp:::receive
             {
                     printf(" %3d %16s:%-5d &lt;- %16s:%-5d0, cpu,
                         args[2]-&gt;ip_daddr, args[4]-&gt;sctp_dport,
                         args[2]-&gt;ip_saddr, args[4]-&gt;sctp_sport);
             }
       A script that logs SCTP association state changes as they occur:

             #pragma D option quiet
             #pragma D option switchrate=10

             int last[int];

             dtrace:::BEGIN
             {
                     printf(" %3s %12s  %-25s    %-25s0,
                         "CPU", "DELTA(us)", "OLD", "NEW");
             }

             sctp:::state-change
             / last[args[1]-&gt;cs_cid] /
             {
                     this-&gt;elapsed = (timestamp - last[args[1]-&gt;cs_cid]) / 1000;
                     printf(" %3d %12d  %-25s -&gt; %-25s0, cpu, this-&gt;elapsed,
                         sctp_state_string[args[5]-&gt;sctps_state],
                         sctp_state_string[args[3]-&gt;sctps_state]);
                     last[args[1]-&gt;cs_cid] = timestamp;
             }

             sctp:::state-change
             / last[args[1]-&gt;cs_cid] == 0 /
             {
                     printf(" %3d %12s  %-25s -&gt; %-25s0, cpu, "-",
                         sctp_state_string[args[5]-&gt;sctps_state],
                         sctp_state_string[args[3]-&gt;sctps_state]);
                     last[args[1]-&gt;cs_cid] = timestamp;
             }

</pre><h4><b>COMPATIBILITY</b></h4><pre>
       The  <b>sctp:::send</b>(),  <b>sctp:::receive</b>(),  and  <b>sctp:::state-change</b>()  probes  are  compatible with the <b>sctp</b>
       provider in Solaris.  All other probes are only available in FreeBSD.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <u><a href="../man1/dtrace.1.html">dtrace</a></u>(1), <u><a href="../man4/dtrace_ip.4.html">dtrace_ip</a></u>(4), <u><a href="../man4/dtrace_udp.4.html">dtrace_udp</a></u>(4), <u><a href="../man4/dtrace_udplite.4.html">dtrace_udplite</a></u>(4), <u><a href="../man4/sctp.4.html">sctp</a></u>(4), <u><a href="../man9/SDT.9.html">SDT</a></u>(9)

</pre><h4><b>AUTHORS</b></h4><pre>
       This manual page was written by Devin Teske &lt;<u><a href="mailto:dteske@FreeBSD.org">dteske@FreeBSD.org</a></u>&gt;.

Debian                                           August 22, 2018                                  <u><a href="../man4/DTRACE_SCTP.4.html">DTRACE_SCTP</a></u>(4)
</pre>
 </div>
</div></section>
</div>
</body>
</html>