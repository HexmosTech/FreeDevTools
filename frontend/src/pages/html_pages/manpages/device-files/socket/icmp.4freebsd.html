<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>icmp — Internet Control Message Protocol</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/freebsd-manpages">freebsd-manpages_12.2-2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       icmp — Internet Control Message Protocol

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;sys/types.h&gt;</b>
       <b>#include</b> <b>&lt;sys/socket.h&gt;</b>
       <b>#include</b> <b>&lt;<a href="file:/usr/include/netinet/in.h">netinet/in.h</a>&gt;</b>

       <u>int</u>
       <b>socket</b>(<u>AF_INET</u>, <u>SOCK_RAW</u>, <u>proto</u>);

</pre><h4><b>DESCRIPTION</b></h4><pre>
       ICMP  is  the  error and control message protocol used by IP and the Internet protocol family.  It may be
       accessed through a “raw socket” for network monitoring and diagnostic functions.  The <u>proto</u> parameter  to
       the  socket  call  to  create  an  ICMP  socket  is  obtained  from  <u><a href="../man3/getprotobyname.3.html">getprotobyname</a></u>(3).  ICMP sockets are
       connectionless, and are normally used with the <u><a href="../man2/sendto.2.html">sendto</a></u>(2) and <u><a href="../man2/recvfrom.2.html">recvfrom</a></u>(2)  calls,  though  the  <u><a href="../man2/connect.2.html">connect</a></u>(2)
       call may also be used to fix the destination for future packets (in which case the <u><a href="../man2/read.2.html">read</a></u>(2) or <u><a href="../man2/recv.2.html">recv</a></u>(2) and
       <u><a href="../man2/write.2.html">write</a></u>(2) or <u><a href="../man2/send.2.html">send</a></u>(2) system calls may be used).

       Outgoing  packets  automatically  have an IP header prepended to them (based on the destination address).
       Incoming packets are received with the IP header and options intact.

   <b>Types</b>
       ICMP messages are classified according to the type and code fields  present  in  the  ICMP  header.   The
       abbreviations  for  the  types  and  codes  may  be used in rules in <u><a href="../man5/pf.conf.5.html">pf.conf</a></u>(5).  The following types are
       defined:

             <b>Num</b>  <b>Abbrev.</b>         <b>Description</b>
             0    echorep         Echo reply
             3    unreach         Destination unreachable
             4    squench         Packet loss, slow down
             5    redir           Shorter route exists
             6    althost         Alternate host address
             8    echoreq         Echo request
             9    routeradv       Router advertisement
             10   routersol       Router solicitation
             11   timex           Time exceeded
             12   paramprob       Invalid IP header
             13   timereq         Timestamp request
             14   timerep         Timestamp reply
             15   inforeq         Information request
             16   inforep         Information reply
             17   maskreq         Address mask request
             18   maskrep         Address mask reply
             30   trace           Traceroute
             31   dataconv        Data conversion problem
             32   mobredir        Mobile host redirection
             33   ipv6-where      IPv6 where-are-you
             34   ipv6-here       IPv6 i-am-here
             35   mobregreq       Mobile registration request
             36   mobregrep       Mobile registration reply
             39   skip            SKIP
             40   photuris        Photuris

       The following codes are defined:

             <b>Num</b>  <b>Abbrev.</b>         <b>Type</b>        <b>Description</b>
             0    net-unr         unreach     Network unreachable
             1    host-unr        unreach     Host unreachable
             2    proto-unr       unreach     Protocol unreachable
             3    port-unr        unreach     Port unreachable
             4    needfrag        unreach     Fragmentation needed but DF bit set
             5    srcfail         unreach     Source routing failed
             6    net-unk         unreach     Network unknown
             7    host-unk        unreach     Host unknown
             8    isolate         unreach     Host isolated
             9    net-prohib      unreach     Network administratively prohibited
             10   host-prohib     unreach     Host administratively prohibited
             11   net-tos         unreach     Invalid TOS for network
             12   host-tos        unreach     Invalid TOS for host
             13   filter-prohib   unreach     Prohibited access
             14   host-preced     unreach     Precedence violation
             15   cutoff-preced   unreach     Precedence cutoff
             0    redir-net       redir       Shorter route for network
             1    redir-host      redir       Shorter route for host
             2    redir-tos-net   redir       Shorter route for TOS and network
             3    redir-tos-host  redir       Shorter route for TOS and host
             0    normal-adv      routeradv   Normal advertisement
             16   common-adv      routeradv   Selective advertisement
             0    transit         timex       Time exceeded in transit
             1    reassemb        timex       Time exceeded in reassembly
             0    badhead         paramprob   Invalid option pointer
             1    optmiss         paramprob   Missing option
             2    badlen          paramprob   Invalid length
             1    unknown-ind     photuris    Unknown security index
             2    auth-fail       photuris    Authentication failed
             3    decrypt-fail    photuris    Decryption failed

   <b>MIB</b> <b>Variables</b>
       The ICMP protocol implements a number of variables in the <u>net.inet.icmp</u> branch of the <u><a href="../man3/sysctl.3.html">sysctl</a></u>(3) MIB.

       <u>maskrepl</u>        (<u>boolean</u>) Enable/disable replies to ICMP  Address  Mask  Request  packets.   Defaults  to
                       false.

       <u>maskfake</u>        (<u>unsigned</u>  <u>integer</u>)  When  <u>maskrepl</u>  is  set  and this value is non-zero, it will be used
                       instead of the real address mask when the system replies to an ICMP Address Mask  Request
                       packet.  Defaults to 0.

       <u>icmplim</u>         (<u>integer</u>)  Bandwidth  limit  for  ICMP  replies  in  packets/second.   If set to zero, no
                       limiting will occur.  Defaults to 200.

       <u>icmplim_output</u>  (<u>boolean</u>) Enable/disable logging of ICMP replies bandwidth limiting.  Defaults to true.

       <u>drop_redirect</u>   (<u>boolean</u>) Enable/disable dropping of ICMP Redirect packets.  Defaults to false.

       <u>log_redirect</u>    (<u>boolean</u>) Enable/disable logging of ICMP Redirect packets.  Defaults to false.

       <u>bmcastecho</u>      (<u>boolean</u>) Enable/disable ICMP replies received via broadcast or multicast.   Defaults  to
                       false.

       <u>reply_src</u>       (<u>str</u>)  An  interface name used for the ICMP reply source in response to packets which are
                       not directly addressed to us.  By default continue with normal source selection.

       <u>reply_from_interface</u>
                       (<u>boolean</u>) Use the IP address of the interface the packet came through in for responses to
                       packets which are not directly addressed to us.   If  enabled,  this  rule  is  processed
                       before  all  others.   By  default, continue with normal source selection.  Enabling this
                       option is particularly useful on routers because it makes external traceroutes  show  the
                       actual path a packet has taken instead of the possibly different return path.

       <u>quotelen</u>        (<u>integer</u>)  Number  of  bytes from original packet to quote in ICMP reply.  This number is
                       internally enforced to be at least 8 bytes (per RFC792) and at  most  the  maximal  space
                       left in the ICMP reply mbuf.

       <u>tstamprepl</u>      (<u>boolean</u>) Enable/disable replies to ICMP Timestamp packets.  Defaults to true.

</pre><h4><b>ERRORS</b></h4><pre>
       A socket operation may fail with one of the following errors returned:

       [EISCONN]          when  trying  to  establish  a  connection  on a socket which already has one, or when
                          trying to send a datagram with the destination address specified  and  the  socket  is
                          already connected;

       [ENOTCONN]         when  trying  to  send  a  datagram,  but no destination address is specified, and the
                          socket has not been connected;

       [ENOBUFS]          when the system runs out of memory for an internal data structure;

       [EADDRNOTAVAIL]    when an attempt is made to create a socket with a network address for which no network
                          interface exists.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <u><a href="../man2/recv.2.html">recv</a></u>(2), <u><a href="../man2/send.2.html">send</a></u>(2), <u><a href="../man4/inet.4.html">inet</a></u>(4), <u><a href="../man4/intro.4.html">intro</a></u>(4), <u><a href="../man4/ip.4.html">ip</a></u>(4), <u><a href="../man5/pf.conf.5.html">pf.conf</a></u>(5)

</pre><h4><b>HISTORY</b></h4><pre>
       The <b>icmp</b> protocol appeared in 4.3BSD.

Debian                                           March 26, 2015                                          <u><a href="../man4/ICMP.4.html">ICMP</a></u>(4)
</pre>
 </div>
</div></section>
</div>
</body>
</html>