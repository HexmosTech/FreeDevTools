<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>bup-fsck - verify or repair a bup repository</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/bup-doc">bup-doc_0.33.7-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       bup-fsck - verify or repair a bup repository

</pre><h4><b>SYNOPSIS</b></h4><pre>
       bup fsck [-r] [-g] [-v] [--quick] [-j <u>jobs</u>] [--par2-ok] [--disable-par2] [filenames...]

</pre><h4><b>DESCRIPTION</b></h4><pre>
       bup  fsck  is  a  tool  for  validating  bup  repositories  in  the  same way that git fsck validates git
       repositories.

       It can also generate and/or use “recovery blocks” using the <a href="../man1/par2.1.html">par2</a>(1) tool  (if  you  have  it  installed).
       This allows you to recover from damaged blocks covering up to 5% of your .pack files.

       In  a  normal  backup  system,  damaged  blocks are less important, because there tends to be enough data
       duplicated between backup sets that a single damaged backup set  is  non-critical.   In  a  deduplicating
       backup  system  like  bup,  however,  no block is ever stored more than once, even if it is used in every
       single backup.  If that block were to be unrecoverable, <u>all</u> your backup sets would be  damaged  at  once.
       Thus,  it’s  important to be able to verify the integrity of your backups and recover from disk errors if
       they occur.

       <u>WARNING</u>: bup fsck’s recovery features are  not  available  unless  you  have  the  free  <a href="../man1/par2.1.html">par2</a>(1)  package
       installed on your bup server.

       <u>WARNING</u>:  bup fsck obviously cannot recover from a complete disk failure.  If your backups are important,
       you need to carefully consider redundancy (such as  using  RAID  for  multi-disk  redundancy,  or  making
       off-site backups for site redundancy).

</pre><h4><b>OPTIONS</b></h4><pre>
       -r, --repair
              attempt to repair any damaged packs using existing recovery blocks.  (Requires <a href="../man1/par2.1.html">par2</a>(1).)

       -g, --generate
              generate recovery blocks for any packs that don’t already have them.  (Requires <a href="../man1/par2.1.html">par2</a>(1).)

       -v, --verbose
              increase verbosity (can be used more than once).

       --quick
              don’t  run  a full git verify-pack on each pack file; instead just check the final checksum.  This
              can cause a significant speedup with no obvious decrease in reliability.  However, you may want to
              avoid this option if you’re  paranoid.   Has  no  effect  on  packs  that  already  have  recovery
              information.

       -j, --jobs=<u>numjobs</u>
              maximum  number of pack verifications to run at a time.  The optimal value for this option depends
              how fast your CPU can verify packs vs. your disk throughput.  If you run too many  jobs  at  once,
              your disk will get saturated by seeking back and forth between files and performance will actually
              decrease, even if <u>numjobs</u> is less than the number of CPU cores on your system.  You can experiment
              with this option to find the optimal value.

       --par2-ok
              immediately  return  0 if <a href="../man1/par2.1.html">par2</a>(1) is installed and working, or 1 otherwise.  Do not actually check
              anything.

       --disable-par2
              pretend that <a href="../man1/par2.1.html">par2</a>(1) is not installed, and ignore all recovery blocks.

</pre><h4><b>EXAMPLES</b></h4><pre>
              # generate recovery blocks for all packs that don't
              # have them
              bup fsck -g

              # generate recovery blocks for a particular pack
              bup fsck -g <a href="file:~/.bup/objects/pack/153a1420cb1c8">~/.bup/objects/pack/153a1420cb1c8</a>*.pack

              # check all packs for correctness (can be very slow!)
              bup fsck

              # check all packs for correctness and recover any
              # damaged ones
              bup fsck -r

              # check a particular pack for correctness and recover
              # it if damaged
              bup fsck -r <a href="file:~/.bup/objects/pack/153a1420cb1c8">~/.bup/objects/pack/153a1420cb1c8</a>*.pack

              # check if recovery blocks are available on this system
              if bup fsck --par2-ok; then
                  echo "par2 is ok"
              fi

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <a href="../man1/bup-damage.1.html">bup-damage</a>(1), <a href="../man1/fsck.1.html">fsck</a>(1), <a href="../man1/git-fsck.1.html">git-fsck</a>(1)

</pre><h4><b>BUP</b></h4><pre>
       Part of the <a href="../man1/bup.1.html">bup</a>(1) suite.

</pre><h4><b>AUTHORS</b></h4><pre>
       Avery Pennarun <a href="mailto:apenwarr@gmail.com">apenwarr@gmail.com</a>

Bup 0.33.7                                         2025-01-11                                        <u><a href="../man1/bup-fsck.1.html">bup-fsck</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>