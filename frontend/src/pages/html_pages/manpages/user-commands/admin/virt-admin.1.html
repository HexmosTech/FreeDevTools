<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>virt-admin - daemon administration interface</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/libvirt-daemon-common">libvirt-daemon-common_11.0.0-2ubuntu6.2_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       virt-admin - daemon administration interface

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>virt-admin</b> [<u>OPTION</u>]... [<u>COMMAND_STRING</u>]

       <b>virt-admin</b> [<u>OPTION</u>]... <u>COMMAND</u> [<u>ARG</u>]...

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The   <b>virt-admin</b>  program  is  the  main  administration  interface  for  modifying  the  libvirt  daemon
       configuration at runtime, changing daemon behaviour as well as for monitoring and  managing  all  clients
       connected to the daemon.

       The basic structure of most virt-admin usage is:

          virt-admin [OPTION]... &lt;command&gt; [ARG]...

       Where  <u>command</u>  is  one of the commands listed below. Any <u>command</u> starting with <b>#</b> is treated as a comment
       and silently ignored, all other unrecognized <u>commands</u> are diagnosed.

       The <b>virt-admin</b> program can be used either to run one <u>COMMAND</u> by giving the command and its  arguments  on
       the  shell  command  line,  or  a  <u>COMMAND_STRING</u> which is a single shell argument consisting of multiple
       <u>COMMAND</u> actions and their arguments joined with  whitespace  and  separated  by  semicolons  or  newlines
       between  commands,  where unquoted backslash-newline pairs are elided.  Within <u>COMMAND_STRING</u>, virt-admin
       understands the same single, double, and backslash escapes as the shell, although you  must  add  another
       layer  of  shell  escaping  in  creating the single shell argument, and any word starting with unquoted <u>#</u>
       begins a comment that ends at newline.  If no command is given in the command line, <b>virt-admin</b> will  then
       start a minimal interpreter waiting for your commands, and the <b>quit</b> command will then exit the program.

       The <b>virt-admin</b> program understands the following <u>OPTIONS</u>.

       <b>-c</b>, <b>--connect</b> <u>URI</u>

       Connect to the specified <u>URI</u>, as if by the <b>connect</b> command, instead of the default connection. See NOTES.

       <b>-d</b>, <b>--debug</b> <u>LEVEL</u>

       Enable  debug  messages  at  integer  <u>LEVEL</u>  and  above.  <u>LEVEL</u> can range from 0 to 4 (default).  See the
       documentation of <b>VIRT_ADMIN_DEBUG</b> environment variable below for the description of each <u>LEVEL</u>.

       <b>-h</b>, <b>--help</b>

       Ignore all other arguments, and behave as if the <b>help</b> command were given instead.

       <b>-l</b>, <b>--log</b> <u>FILE</u>

       Output logging details to <u>FILE</u>.

       <b>-q</b>, <b>--quiet</b>

       Avoid extra informational messages.

       <b>-v</b>, <b>--version[=short]</b>

       Ignore all other arguments, and prints the version of the libvirt library virt-admin is coming from

       <b>-V</b>, <b>--version=long</b>

       Ignore all other arguments, and prints the version of the libvirt library virt-admin is coming from.

</pre><h4><b>NOTES</b></h4><pre>
       The   <b>virt-admin</b>   supports   both   the   monolithic   <b>libvirtd</b>   daemon   and   the   modular   daemons
       &lt;https://libvirt.org/daemons.html#modular-driver-daemons&gt;

       whichever  is  in use by your system. The connection <u>URI</u> used with <b>-c/--connect</b> or the connect command is
       based on the name of the controlled daemon e.g.: <b>virtqemud:///system</b>, <b>libvirtd:///system</b>.

       Running <b>virt-admin</b> requires root privileges when communicating with the system instance of a daemon  (<u>URI</u>
       ending in <b>/system</b>) due to the communications channels used to talk to the daemon.

</pre><h4><b>GENERIC</b> <b>COMMANDS</b></h4><pre>
       The following commands are generic.

   <b>help</b>
       <b>Syntax:</b>

          help [command-or-group]

       This  lists each of the virt-admin commands.  When used without options, all commands are listed, one per
       line, grouped into related categories, displaying the keyword for each group.

       To display detailed information for a specific command, use its name as the option.

   <b>quit,</b> <b>exit</b>
       <b>Syntax:</b>

          quit
          exit

       quit this interactive terminal

   <b>version</b>
       <b>Syntax:</b>

          version

       will print out the version info about which libvirt library was this client built  from.  As  opposed  to
       <u>virsh</u> client, the output already includes the version of the daemon.

       <b>Example:</b>

          $ virt-admin version
          Compiled against library: libvirt 1.2.21
          Using library: libvirt 1.2.21
          Running against daemon: 1.2.20

   <b>cd</b>
       <b>Syntax:</b>

          cd [directory]

       Will  change  current  directory  to  <u>directory</u>.   The  default  directory for the <b>cd</b> command is the home
       directory or, if there is no <u>HOME</u> variable in the environment, the root directory.

       This command is only available in interactive mode.

   <b>pwd</b>
       <b>Syntax:</b>

          pwd

       Will print the current directory.

   <b>connect</b>
       <b>Syntax:</b>

          connect [URI]

       (Re)-Connect to a daemon's administrating server. The <u>URI</u> parameter  specifies  how  to  connect  to  the
       administrating  server.   If  <u>LIBVIRT_ADMIN_DEFAULT_URI</u>  or  <u>uri_default</u> (see below) were set, <u>connect</u> is
       automatically issued every time a command that requires an active connection is executed. Note that  this
       only applies if there is no connection at all or there is an inactive one.

       See NOTES on picking the correct <u>URI</u> corresponding to a libvirt daemon.

       To find the currently used URI, check the <u>uri</u> command documented below.

   <b>uri</b>
       <b>Syntax:</b>

          uri

       Prints  the  administrating  server  canonical URI, can be useful in shell mode. If no <u>uri</u> was specified,
       neither <u>LIBVIRT_ADMIN_DEFAULT_URI</u> environment variable nor <u>uri_default</u> option  (libvirt-admin.conf)  were
       set, libvirtd:///system is used.

</pre><h4><b>DAEMON</b> <b>COMMANDS</b></h4><pre>
       The  following  commands  allow one to monitor the daemon's state as well as directly change its internal
       configuration.

   <b>server-list</b>
       <b>Syntax:</b>

          server-list

       Lists all manageable servers contained within the daemon the client is currently connected to.

   <b>daemon-log-filters</b>
       <b>Syntax:</b>

          daemon-log-filters [--filters string]

       When run without arguments, this returns the currently defined  set  of  logging  filters.  Providing  an
       argument will cause the command to define a new set of logging filters.

       • <u>--filters</u>

       Define  a  new  set  of  logging  filters where multiple filters are delimited by space. Each filter must
       conform to the form described in detail by <u>/etc/libvirt/libvirtd.conf</u> (section 'Logging filters').

       <b>Example:</b>

       To define a filter which suppresses all e.g. 'virObjectUnref' DEBUG messages, use the following:

          $ virt-admin daemon-log-filters "4:util.object"

       (Note the '.' symbol which can be used to more fine-grained filters  tailored  to  specific  modules,  in
       contrast, to affect the whole directory containing several modules this would become "4:util"):

   <b>daemon-log-outouts</b>
       <b>Syntax:</b>

          daemon-log-outputs [--outputs string]

       When  run  without  arguments,  this  returns  the currently defined set of logging outputs. Providing an
       argument will cause the command to define a new set of logging outputs.

       • <u>--outputs</u>

       Define a new set of logging outputs where multiple outputs are  delimited  by  space.  Each  output  must
       conform to the form described in detail by <u>/etc/libvirt/libvirtd.conf</u> (section 'Logging outputs').

       <b>Example:</b>

       To  replace  the  current setting for logging outputs with one that writes to a file while logging errors
       only, the following could be used:

          $ virt-admin daemon-log-outputs "4:file:&lt;absolute_path_to_the_file&gt;"

       To define multiple outputs at once they need to be delimited by spaces:

          $ virt-admin daemon-log-outputs "4:stderr 2:syslog:&lt;msg_ident&gt;"

   <b>daemon-timeout</b>
       <b>Syntax:</b>

          daemon-timeout [--timeout] NUM

       Sets the daemon timeout to the value of '--timeout' argument. Use <b>--timeout</b> <b>0</b> to disable auto-shutdown of
       the daemon.

</pre><h4><b>SERVER</b> <b>COMMANDS</b></h4><pre>
       The following commands manipulate daemon's server internal configuration.  The <u>server</u> is specified by its
       name.

   <b>server-threadpool-info</b>
       <b>Syntax:</b>

          server-threadpool-info server

       Retrieve server's threadpool attributes. These attributes include:

       • <u>minWorkers</u> as the bottom limit to the number of active workers,

       • <u>maxWorkers</u> as the top limit to the number of active workers,

       • <u>nWorkers</u> as the current number of workers in the threadpool,

       • <u>freeWorkers</u> as the current number of workers available for a task,

       • <u>prioWorkers</u> as the current number of priority workers in the threadpool, and

       • <u>jobQueueDepth</u> as the current depth of threadpool's job queue.

       <b>Background</b>

       Each daemon server utilizes a threadpool to accomplish tasks requested by clients connected to it.  Every
       time  a client request arrives to the server, it checks whether there is a worker available to accomplish
       the given task or it should create a new worker for the job (rather  than  being  destroyed,  the  worker
       becomes free once the task is finished). Creating new workers, however, is only possible when the current
       number  of workers is still below the configured upper limit.  In addition to these 'standard' workers, a
       threadpool also contains a special set of workers called <u>priority</u> workers. Their purpose  is  to  perform
       tasks  that,  unlike  tasks  carried out by normal workers, are within libvirt's full control and libvirt
       guarantees that such a task cannot hang, thus will always finish. An example of such a task this would be
       destroying a domain:

          $ virsh destroy &lt;domain&gt;.

   <b>server-threadpool-set</b>
       <b>Syntax:</b>

          server-threadpool-set server [--min-workers count] [--max-workers count] [--priority-workers count]

       Change  threadpool  attributes  on  a  server.  Only  a  fraction  of  all  attributes  as  described  in
       <u>server-threadpool-info</u> is supported for the setter.

       • <u>--min-workers</u>

         The bottom limit to number of active workers in a threadpool.

       • <u>--max-workers</u>

         The  upper  limit  to  number  of  active  workers  in a threadpool. If used in combination with option
         <u>--min-workers</u>, the value for the upper limit has to be greater than the value  for  the  bottom  limit,
         otherwise the command results in an error.

       • <u>--priority-workers</u>

         The current number of active priority workers in a threadpool.

   <b>server-clients-info</b>
       <b>Syntax:</b>

          server-clients-info server

       Get  information  about  the  current  setting  of  limits  regarding  connections  of  new clients. This
       information comprises of the limits to the maximum number of clients connected to <u>server</u>, maximum  number
       of  clients  waiting  for  authentication, in order to be connected to the server, as well as the current
       runtime values, more specifically, the current number of clients connected  to  <u>server</u>  and  the  current
       number of clients waiting for authentication.

       <b>Example:</b>

          # virt-admin server-clients-info libvirtd
          nclients_max        : 120
          nclients            : 3
          nclients_unauth_max : 20
          nclients_unauth     : 0

   <b>server-clients-set</b>
       <b>Syntax:</b>

          server-clients-set server [--max-clients count] [--max-unauth-clients count]

       Set new client-related limits on <u>server</u>.

       • <u>--max-clients</u>

         Change the upper limit of the maximum overall number of clients connected to <u>server</u> to value <b>count</b>. The
         value for this limit has to be always greater than the value of <u>--max-unauth-clients</u>.

       • <u>--max-unauth-clients</u>

         Change  the  upper  limit  of  the maximum number of clients waiting for authentication, in order to be
         connected to <u>server</u>, to value <b>count</b>.  The value for this limit has to be always lower than the value of
         <u>--max-clients</u>.

   <b>server-update-tls</b>
       <b>Syntax:</b>

          server-update-tls server

       Update tls context on <u>server</u>.

       • <u>server</u>

         Available servers on a daemon. Currently only supports 'libvirtd' or 'virtproxyd'.

</pre><h4><b>CLIENT</b> <b>COMMANDS</b></h4><pre>
       The following commands provide management  and  monitoring  of  clients  connected  to  one  of  daemon's
       available  servers.  Clients  are  specified by their numeric ID which is obtained by listing all clients
       connected to a specified server (see command <b>client-list</b>).

   <b>client-list</b>
       <b>Syntax:</b>

          client-list server

       Print a table showing the list of  clients  connected  to  &lt;server&gt;,  also  providing  information  about
       transport  type used on client's connection (supported transports include <b>unix</b>, <b>tcp</b>, and <b>tls</b>), as well as
       providing information about client's connection time (system local time is used).

   <b>client-info</b>
       <b>Syntax:</b>

          client-info server client

       Retrieve identity information about <u>client</u> from <u>server</u>. The attributes returned may vary depending on the
       connection transport used.  Transport-dependent attributes include local client process's pid, uid,  user
       name, and group name, as well as socket address of the remote peer, see <b>Examples</b> below.

       On  the  other hand, transport-independent attributes include client's SELinux context (if enabled on the
       host) and SASL username (if SASL authentication is enabled within daemon).

       <b>Examples:</b>

          # virt-admin client-info libvirtd 1
          id             : 1
          connection_time: 2016-05-03 13:27:04+0200
          transport      : unix
          readonly       : yes
          unix_user_id   : 0
          unix_user_name : root
          unix_group_id  : 0
          unix_group_name: root
          unix_process_id: 10201

          # virt-admin client-info libvirtd 2
          id             : 2
          connection_time: 2016-05-03 13:30:33+0200
          transport      : tcp
          readonly       : no
          sock_addr      : 127.0.0.1:57060

   <b>client-disconnect</b>
       <b>Syntax:</b>

          client-disconnect server client

       Close a connection originating from <u>client</u>. The <u>server</u> argument specifies the name of the  server  <u>client</u>
       is currently connected to.

</pre><h4><b>ENVIRONMENT</b></h4><pre>
       The following environment variables can be set to alter the behaviour of <b>virt-admin</b>

       • VIRT_ADMIN_DEBUG=&lt;0 to 4&gt;

         Turn on verbose debugging of virt-admin commands. Valid levels are

         • VIRT_ADMIN_DEBUG=0

           DEBUG - Messages at ALL levels get logged

         • VIRT_ADMIN_DEBUG=1

           INFO - Logs messages at levels INFO, NOTICE, WARNING and ERROR

         • VIRT_ADMIN_DEBUG=2

           NOTICE - Logs messages at levels NOTICE, WARNING and ERROR

         • VIRT_ADMIN_DEBUG=3

           WARNING - Logs messages at levels WARNING and ERROR

         • VIRT_ADMIN_DEBUG=4

           ERROR - Messages at only ERROR level gets logged.

       • VIRT_ADMIN_LOG_FILE=``LOGFILE``

         The file to log virt-admin debug messages.

       • LIBVIRT_ADMIN_DEFAULT_URI

         The  daemon  whose  admin  server  to  connect  to by default. Set this to a URI, in the same format as
         accepted by the <b>connect</b> option. This overrides the default URI set in any client config file.

       • VIRT_ADMIN_HISTSIZE

         The number of commands to remember in the command  history.  The default value is 500.

       • LIBVIRT_DEBUG=LEVEL

         Turn on verbose debugging of all libvirt API calls. Valid levels are

         • LIBVIRT_DEBUG=1

           Messages at level DEBUG or above

         • LIBVIRT_DEBUG=2

           Messages at level INFO or above

         • LIBVIRT_DEBUG=3

           Messages at level WARNING or above

         • LIBVIRT_DEBUG=4

           Messages at level ERROR or above

       For further information about debugging options consult
        &lt;https://libvirt.org/logging.html&gt;

</pre><h4><b>AUTHORS</b></h4><pre>
       Please refer to the AUTHORS file distributed with libvirt.

</pre><h4><b>BUGS</b></h4><pre>
       Please report all bugs you discover.  This should be done via either:

       1. the mailing list

           &lt;https://libvirt.org/contact.html&gt;

       2. the bug tracker

           &lt;https://libvirt.org/bugs.html&gt;

       Alternatively, you may report bugs to your software distributor / vendor.

</pre><h4><b>COPYRIGHT</b></h4><pre>
       Copyright (C) 2015 Red Hat, Inc., and the authors listed in the libvirt AUTHORS file.

</pre><h4><b>LICENSE</b></h4><pre>
       <b>virt-admin</b> is distributed under the terms of the GNU LGPL v2+.  This is free software; see the source for
       copying conditions. There is NO warranty; not even  for  MERCHANTABILITY  or  FITNESS  FOR  A  PARTICULAR
       PURPOSE

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <a href="../man1/virsh.1.html">virsh</a>(1), <a href="../man1/virt-xml-validate.1.html">virt-xml-validate</a>(1), <a href="../man1/virt-host-validate.1.html">virt-host-validate</a>(1),
        &lt;https://libvirt.org/&gt;

                                                                                                   <u><a href="../man1/VIRT-ADMIN.1.html">VIRT-ADMIN</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>