<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>pg_ctl - initialize, start, stop, or control a PostgreSQL server</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/postgresql-17">postgresql-17_17.5-0ubuntu0.25.04.1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       pg_ctl - initialize, start, stop, or control a PostgreSQL server

</pre><h4><b>SYNOPSIS</b></h4><pre>

       <b>pg_ctl</b> <b>init[db]</b> [<b>-D</b> <u>datadir</u>] [<b>-s</b>] [<b>-o</b> <u>initdb-options</u>]

       <b>pg_ctl</b> <b>start</b> [<b>-D</b> <u>datadir</u>] [<b>-l</b> <u>filename</u>] [<b>-W</b>] [<b>-t</b> <u>seconds</u>] [<b>-s</b>] [<b>-o</b> <u>options</u>] [<b>-p</b> <u>path</u>] [<b>-c</b>]

       <b>pg_ctl</b> <b>stop</b> [<b>-D</b> <u>datadir</u>] [<b>-m</b> <b>s[mart]</b> | <b>f[ast]</b> | <b>i[mmediate]</b>] [<b>-W</b>] [<b>-t</b> <u>seconds</u>] [<b>-s</b>]

       <b>pg_ctl</b> <b>restart</b> [<b>-D</b> <u>datadir</u>] [<b>-m</b> <b>s[mart]</b> | <b>f[ast]</b> | <b>i[mmediate]</b>] [<b>-W</b>] [<b>-t</b> <u>seconds</u>] [<b>-s</b>] [<b>-o</b> <u>options</u>] [<b>-c</b>]

       <b>pg_ctl</b> <b>reload</b> [<b>-D</b> <u>datadir</u>] [<b>-s</b>]

       <b>pg_ctl</b> <b>status</b> [<b>-D</b> <u>datadir</u>]

       <b>pg_ctl</b> <b>promote</b> [<b>-D</b> <u>datadir</u>] [<b>-W</b>] [<b>-t</b> <u>seconds</u>] [<b>-s</b>]

       <b>pg_ctl</b> <b>logrotate</b> [<b>-D</b> <u>datadir</u>] [<b>-s</b>]

       <b>pg_ctl</b> <b>kill</b> <u>signal_name</u> <u>process_id</u>

       On Microsoft Windows, also:

       <b>pg_ctl</b> <b>register</b> [<b>-D</b> <u>datadir</u>] [<b>-N</b> <u>servicename</u>] [<b>-U</b> <u>username</u>] [<b>-P</b> <u>password</u>] [<b>-S</b> <b>a[uto]</b> | <b>d[emand]</b>]
              [<b>-e</b> <u>source</u>] [<b>-W</b>] [<b>-t</b> <u>seconds</u>] [<b>-s</b>] [<b>-o</b> <u>options</u>]

       <b>pg_ctl</b> <b>unregister</b> [<b>-N</b> <u>servicename</u>]

</pre><h4><b>DESCRIPTION</b></h4><pre>
       pg_ctl is a utility for initializing a PostgreSQL database cluster, starting, stopping, or restarting the
       PostgreSQL database server (<b><a href="../man1/postgres.1.html">postgres</a></b>(1)), or displaying the status of a running server. Although the
       server can be started manually, pg_ctl encapsulates tasks such as redirecting log output and properly
       detaching from the terminal and process group. It also provides convenient options for controlled
       shutdown.

       The <b>init</b> or <b>initdb</b> mode creates a new PostgreSQL database cluster, that is, a collection of databases
       that will be managed by a single server instance. This mode invokes the <b>initdb</b> command. See <b><a href="../man1/initdb.1.html">initdb</a></b>(1) for
       details.

       <b>start</b> mode launches a new server. The server is started in the background, and its standard input is
       attached to /dev/null (or nul on Windows). On Unix-like systems, by default, the server's standard output
       and standard error are sent to pg_ctl's standard output (not standard error). The standard output of
       pg_ctl should then be redirected to a file or piped to another process such as a log rotating program
       like rotatelogs; otherwise <b>postgres</b> will write its output to the controlling terminal (from the
       background) and will not leave the shell's process group. On Windows, by default the server's standard
       output and standard error are sent to the terminal. These default behaviors can be changed by using <b>-l</b> to
       append the server's output to a log file. Use of either <b>-l</b> or output redirection is recommended.

       <b>stop</b> mode shuts down the server that is running in the specified data directory. Three different shutdown
       methods can be selected with the <b>-m</b> option.  “Smart” mode disallows new connections, then waits for all
       existing clients to disconnect. If the server is in hot standby, recovery and streaming replication will
       be terminated once all clients have disconnected.  “Fast” mode (the default) does not wait for clients to
       disconnect. All active transactions are rolled back and clients are forcibly disconnected, then the
       server is shut down.  “Immediate” mode will abort all server processes immediately, without a clean
       shutdown. This choice will lead to a crash-recovery cycle during the next server start.

       <b>restart</b> mode effectively executes a stop followed by a start. This allows changing the <b>postgres</b>
       command-line options, or changing configuration-file options that cannot be changed without restarting
       the server. If relative paths were used on the command line during server start, <b>restart</b> might fail
       unless pg_ctl is executed in the same current directory as it was during server start.

       <b>reload</b> mode simply sends the <b>postgres</b> server process a SIGHUP signal, causing it to reread its
       configuration files (postgresql.conf, pg_hba.conf, etc.). This allows changing configuration-file options
       that do not require a full server restart to take effect.

       <b>status</b> mode checks whether a server is running in the specified data directory. If it is, the server's
       PID and the command line options that were used to invoke it are displayed. If the server is not running,
       pg_ctl returns an exit status of 3. If an accessible data directory is not specified, pg_ctl returns an
       exit status of 4.

       <b>promote</b> mode commands the standby server that is running in the specified data directory to end standby
       mode and begin read-write operations.

       <b>logrotate</b> mode rotates the server log file. For details on how to use this mode with external log
       rotation tools, see Section 24.3.

       <b>kill</b> mode sends a signal to a specified process. This is primarily valuable on Microsoft Windows which
       does not have a built-in kill command. Use --help to see a list of supported signal names.

       <b>register</b> mode registers the PostgreSQL server as a system service on Microsoft Windows. The <b>-S</b> option
       allows selection of service start type, either “auto” (start service automatically on system startup) or
       “demand” (start service on demand).

       <b>unregister</b> mode unregisters a system service on Microsoft Windows. This undoes the effects of the
       <b>register</b> command.

</pre><h4><b>OPTIONS</b></h4><pre>
       <b>-c</b>
       <b>--core-files</b>
           Attempt to allow server crashes to produce core files, on platforms where this is possible, by
           lifting any soft resource limit placed on core files. This is useful in debugging or diagnosing
           problems by allowing a stack trace to be obtained from a failed server process.

       <b>-D</b> <u>datadir</u>
       <b>--pgdata=</b><u>datadir</u>
           Specifies the file system location of the database configuration files. If this option is omitted,
           the environment variable <b>PGDATA</b> is used.

       <b>-l</b> <u>filename</u>
       <b>--log=</b><u>filename</u>
           Append the server log output to <u>filename</u>. If the file does not exist, it is created. The umask is set
           to 077, so access to the log file is disallowed to other users by default.

       <b>-m</b> <u>mode</u>
       <b>--mode=</b><u>mode</u>
           Specifies the shutdown mode.  <u>mode</u> can be smart, fast, or immediate, or the first letter of one of
           these three. If this option is omitted, fast is the default.

       <b>-o</b> <u>options</u>
       <b>--options=</b><u>options</u>
           Specifies options to be passed directly to the <b>postgres</b> command.  <b>-o</b> can be specified multiple times,
           with all the given options being passed through.

           The <u>options</u> should usually be surrounded by single or double quotes to ensure that they are passed
           through as a group.

       <b>-o</b> <u>initdb-options</u>
       <b>--options=</b><u>initdb-options</u>
           Specifies options to be passed directly to the <b>initdb</b> command.  <b>-o</b> can be specified multiple times,
           with all the given options being passed through.

           The <u>initdb-options</u> should usually be surrounded by single or double quotes to ensure that they are
           passed through as a group.

       <b>-p</b> <u>path</u>
           Specifies the location of the postgres executable. By default the postgres executable is taken from
           the same directory as <b>pg_ctl</b>, or failing that, the hard-wired installation directory. It is not
           necessary to use this option unless you are doing something unusual and get errors that the postgres
           executable was not found.

           In init mode, this option analogously specifies the location of the initdb executable.

       <b>-s</b>
       <b>--silent</b>
           Print only errors, no informational messages.

       <b>-t</b> <u>seconds</u>
       <b>--timeout=</b><u>seconds</u>
           Specifies the maximum number of seconds to wait when waiting for an operation to complete (see option
           <b>-w</b>). Defaults to the value of the <b>PGCTLTIMEOUT</b> environment variable or, if not set, to 60 seconds.

       <b>-V</b>
       <b>--version</b>
           Print the pg_ctl version and exit.

       <b>-w</b>
       <b>--wait</b>
           Wait for the operation to complete. This is supported for the modes start, stop, restart, promote,
           and register, and is the default for those modes.

           When waiting, <b>pg_ctl</b> repeatedly checks the server's PID file, sleeping for a short amount of time
           between checks. Startup is considered complete when the PID file indicates that the server is ready
           to accept connections. Shutdown is considered complete when the server removes the PID file.  <b>pg_ctl</b>
           returns an exit code based on the success of the startup or shutdown.

           If the operation does not complete within the timeout (see option <b>-t</b>), then <b>pg_ctl</b> exits with a
           nonzero exit status. But note that the operation might continue in the background and eventually
           succeed.

       <b>-W</b>
       <b>--no-wait</b>
           Do not wait for the operation to complete. This is the opposite of the option <b>-w</b>.

           If waiting is disabled, the requested action is triggered, but there is no feedback about its
           success. In that case, the server log file or an external monitoring system would have to be used to
           check the progress and success of the operation.

           In prior releases of PostgreSQL, this was the default except for the stop mode.

       <b>-?</b>
       <b>--help</b>
           Show help about pg_ctl command line arguments, and exit.

       If an option is specified that is valid, but not relevant to the selected operating mode, pg_ctl ignores
       it.

   <b>Options</b> <b>for</b> <b>Windows</b>
       <b>-e</b> <u>source</u>
           Name of the event source for pg_ctl to use for logging to the event log when running as a Windows
           service. The default is PostgreSQL. Note that this only controls messages sent from pg_ctl itself;
           once started, the server will use the event source specified by its event_source parameter. Should
           the server fail very early in startup, before that parameter has been set, it might also log using
           the default event source name PostgreSQL.

       <b>-N</b> <u>servicename</u>
           Name of the system service to register. This name will be used as both the service name and the
           display name. The default is PostgreSQL.

       <b>-P</b> <u>password</u>
           Password for the user to run the service as.

       <b>-S</b> <u>start-type</u>
           Start type of the system service.  <u>start-type</u> can be auto, or demand, or the first letter of one of
           these two. If this option is omitted, auto is the default.

       <b>-U</b> <u>username</u>
           User name for the user to run the service as. For domain users, use the format DOMAIN\username.

</pre><h4><b>ENVIRONMENT</b></h4><pre>
       <b>PGCTLTIMEOUT</b>
           Default limit on the number of seconds to wait when waiting for startup or shutdown to complete. If
           not set, the default is 60 seconds.

       <b>PGDATA</b>
           Default data directory location.

       Most <b>pg_ctl</b> modes require knowing the data directory location; therefore, the <b>-D</b> option is required
       unless <b>PGDATA</b> is set.

       For additional variables that affect the server, see <b><a href="../man1/postgres.1.html">postgres</a></b>(1).

</pre><h4><b>FILES</b></h4><pre>
       postmaster.pid
           pg_ctl examines this file in the data directory to determine whether the server is currently running.

       postmaster.opts
           If this file exists in the data directory, pg_ctl (in <b>restart</b> mode) will pass the contents of the
           file as options to postgres, unless overridden by the <b>-o</b> option. The contents of this file are also
           displayed in <b>status</b> mode.

</pre><h4><b>EXAMPLES</b></h4><pre>
   <b>Starting</b> <b>the</b> <b>Server</b>
       To start the server, waiting until the server is accepting connections:

           $ <b>pg_ctl</b> <b>start</b>

       To start the server using port 5433, and running without <b>fsync</b>, use:

           $ <b>pg_ctl</b> <b>-o</b> <b>"-F</b> <b>-p</b> <b>5433"</b> <b>start</b>

   <b>Stopping</b> <b>the</b> <b>Server</b>
       To stop the server, use:

           $ <b>pg_ctl</b> <b>stop</b>

       The <b>-m</b> option allows control over <u>how</u> the server shuts down:

           $ <b>pg_ctl</b> <b>stop</b> <b>-m</b> <b>smart</b>

   <b>Restarting</b> <b>the</b> <b>Server</b>
       Restarting the server is almost equivalent to stopping the server and starting it again, except that by
       default, <b>pg_ctl</b> saves and reuses the command line options that were passed to the previously-running
       instance. To restart the server using the same options as before, use:

           $ <b>pg_ctl</b> <b>restart</b>

       But if <b>-o</b> is specified, that replaces any previous options. To restart using port 5433, disabling <b>fsync</b>
       upon restart:

           $ <b>pg_ctl</b> <b>-o</b> <b>"-F</b> <b>-p</b> <b>5433"</b> <b>restart</b>

   <b>Showing</b> <b>the</b> <b>Server</b> <b>Status</b>
       Here is sample status output from pg_ctl:

           $ <b>pg_ctl</b> <b>status</b>

           pg_ctl: server is running (PID: 13718)
           /usr/local/pgsql/bin/postgres "-D" "/usr/local/pgsql/data" "-p" "5433" "-B" "128"

       The second line is the command that would be invoked in restart mode.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man1/initdb.1.html">initdb</a></b>(1), <b><a href="../man1/postgres.1.html">postgres</a></b>(1)

PostgreSQL 17.5                                       2025                                             <u><a href="../man1/PG_CTL.1.html">PG_CTL</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>