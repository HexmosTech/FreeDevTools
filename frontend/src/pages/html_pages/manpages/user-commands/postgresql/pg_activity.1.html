<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>pg_activity - Realtime PostgreSQL database server monitoring tool</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/pg-activity">pg-activity_3.5.1-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       pg_activity - Realtime PostgreSQL database server monitoring tool

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>pg_activity</b> [option..] [connection string]

</pre><h4><b>DESCRIPTION</b></h4><pre>
       Command line tool for PostgreSQL server activity monitoring.

       pg_activity must run on the same server as the instance and as the user running the instance (or root) to
       show CPU, MEM, READ or WRITE columns and other system information.

   <b>THE</b> <b>HEADER</b>
       The first line of the header displays PostgreSQL's version, the host name, the connection string, the
       refresh rate and the duration mode.

       The header is then divided in tree groups: <b>instance</b>, <b>worker</b> <b>processes</b>, <b>system</b>.  The information is
       filtered according to the filter parameters when appropriate. This is shown in the following descriptions
       with the "(filtered)" mention. Depending on the version you are on, some information might not be
       available. In that case, it will be replaced by a dash.

       The <b>instance</b> group displays information aubout the PostgreSQL instance (or cluster). This group can be
       displayed or hidden with the I Key.

       Global :

       - <b>uptime</b>: since when is the instance running;
       - <b>dbs</b> <b>size</b>: total size of the databases (filtered);
       - <b>growth</b>: growth in B/s of the databases (filtered);
       - <b>cache</b> <b>hit</b> <b>ratio</b>: the percentage of page read from the PostgreSQL's cache since last snapshot
       (filtered).

       Sessions :

       - <b>total</b>: session count (filtered) / max_connections;
       - <b>active</b>: number of active sessions (filtered);
       - <b>idle</b>: number of idle sessions (filtered);
       - <b>idle</b> <b>in</b> <b>txn</b>: number of sessions who are in the idle in transaction state (filtered);
       - <b>idle</b> <b>in</b> <b>txn</b> <b>abrt</b>: number of sessions who are in the idle in transaction aborted state (filtered);
       - <b>waiting</b>: number of sessions that are waiting for a lock (filtered).

       Activity :

       - <b>tps</b>: transaction per second (sum of commit &amp; rollback for all databases / time elapsed since last
       snapshot) (filtered);
       - <b>insert/s</b>: number of inserts per second (filtered);
       - <b>updates/s</b>: number of updates per second (filtered);
       - <b>delete/s</b>: number of deletes per second (filtered);
       - <b>tuples</b> <b>returned/s</b>: number of tuples returned per second (filtered);
       - <b>temp</b> <b>files</b>: number of temporary files created on the instance;
       - <b>temp</b> <b>size</b>: total temporary file size on the instance.

       The  <b>worker</b>  <b>processes</b>  group  displays  information  about  backgroup workers, autovacuum processes, wal
       senders and wal receivers. It also gives information about replication slots. Except for  the  autovacuum
       workers  count,  most  of  this information is not related to a specific database, therefore their values
       will be zero when the data is filtered.

       Worker processes:

       - <b>total</b>: total worker count / maximum number of worker slots, parallel workers and logical replication
       wokers are taken from this amount (filtered);
       - <b>logical</b> <b>wokers</b>: logical replication worker count / maximum number of logical replication wokers
       (filtered);
       - <b>parallel</b> <b>workers</b>: parallel worker count for maintenance &amp; queries / maximum number of parallel workers
       (filtered).

       Other processes &amp; information:

       - <b>autovacuum</b> <b>workers</b>: number of autovacuum worker in action / maximum number of autovacuum workers
       (filtered);
       - <b>wal</b> <b>senders</b>: number of wal senders / maximum number of wal senders processes (filtered);
       - <b>wal</b> <b>receivers</b>: number of wal receivers / maximum number of wal receiver processes (filtered);
       - <b>repl.</b> <b>slots</b>: number of replication slots / maximum number of replication slots (filtered).

       The last group displays <b>system</b> <b>information</b>:

       - <b>Mem.</b>: total / free / used and buff+cached memory with the related percentages;
       - <b>Swap</b>: total / free / used swap;
       - <b>IO</b>: the number of IO per second, current Read and Write throughput (aggregated data gathered with the
       psutil library);
       - <b>Load</b>: CPU load for the last 1, 5, 15 minutes;

   <b>THE</b> <b>RUNNING</b> <b>QUERIES</b> <b>PANEL</b>
       The running queries panel  shows  all  running  queries,  transactions  or  backends  (depending  on  the
       <b>DURATION_MODE</b>  setting)  which  have lasted for more than <b>min</b> <b>duration</b> seconds. It displays the following
       information:

       - <b>PID</b>: process id of the backend which executes the query;
       - <b>DATABASE</b>: database specified in the connection string;
       - <b>APP</b>: application name specified in the connection string;
       - <b>USER</b>: user name specified in the connection string;
       - <b>CLIENT</b>: client address or "local" in case of linux socker connection;
       - <b>CPU%</b>: percentage of CPU used by the backend as reported by the psutil library;
       - <b>MEM%</b>: percentage of memory used by the backend as reported by the psutil library;
       - <b>READ/s</b>:  read thruput as reported by the psutil library;
       - <b>WRITE/s</b>: write thruput as reported by the psutil library;
       - <b>TIME</b>: time since the beginning of the query / transaction / backend start depending on the
       <b>DURATION_MODE</b> currently in use;
       - <b>Waiting</b>: for PostgreSQL 9.6+: a specific wait event or nothing. Otherwise, a boolean indicating if we
       are waiting for a Lock;
       - <b>IOW</b>: boolean indicating that the process is waiting for IO as reported by the psutil library;
       - <b>state</b>: state of the backend;
       - <b>Query</b>: the query.

   <b>THE</b> <b>WAITING</b> <b>QUERIES</b> <b>PANEL</b>
       The waiting queries view  displays  queries  that  are  waiting  for  a  lock.  It  shows  the  following
       information:

       - <b>PID</b>: process id of the backend which executes the query;
       - <b>DATABASE</b>: database specified in the connection string;
       - <b>APP</b>: application name specified in the connection string;
       - <b>USER</b>: user name specified in the connection string;
       - <b>CLIENT</b>: client address or "local" in case of linux socker connection;
       - <b>RELATION</b>: the name of the relation being locked if applicable;
       - <b>TYPE</b>: the type of lock;
       - <b>MODE</b>: the mode of the lock;
       - <b>TIME+</b>: the duration of the query, transaction or session depending on the <b>DURATION_MODE</b> setting;
       - <b>state</b>: the state of the transaction;
       - <b>Query</b>: the query.

   <b>THE</b> <b>BLOCKING</b> <b>QUERIES</b> <b>PANEL</b>
       The  blocking queries view displays the queries that lock an object which is required by another session.
       It shows following information:

       - <b>PID</b>: process id of the backend which executes the query;
       - <b>DATABASE</b>: database specified in the connection string;
       - <b>APP</b>: application name specified in the connection string;
       - <b>USER</b>: user name specified in the connection string;
       - <b>CLIENT</b>: client address or "local" in case of linux socker connection;
       - <b>RELATION</b>: the name of the relation being locked if applicable;
       - <b>TYPE</b>: the type of lock;
       - <b>MODE</b>: the mode of the lock;
       - <b>TIME+</b>: the duration of the query, transaction or session depending on the <b>DURATION_MODE</b> setting;
       - <b>Waiting</b>: for PostgreSQL 9.6+: a specific wait event or nothing. Otherwise, a boolean indicating if we
       are waiting for a Lock;
       - <b>state</b>: the state of the transaction;
       - <b>Query</b>: the query.

</pre><h4><b>COMMAND-LINE</b> <b>OPTIONS</b></h4><pre>
   <b>CONFIGURATION</b>
       <b>-P</b> <b>PROFILE</b>, <b>--profile=PROFILE</b>
                 Configuration profile matching a PROFILE.conf file in ${XDG_CONFIG_HOME:<a href="file:~/.config">~/.config</a>}/pg_activity/ or /etc/pg_activity/, or a built-in profile.

   <b>OPTIONS</b>
       <b>--blocksize=BLOCKSIZE</b>
                 Filesystem blocksize (default: 4096).

       <b>--rds</b>
                 Enable support for AWS RDS (implies --no-tempfiles and filters out the rdsadmin database from space calculation).

       <b>--output=FILEPATH</b>
                 Store running queries as CSV.

       <b>--no-db-size</b>
                 Skip total size of DB.

       <b>--no-tempfiles</b>
                 Skip tempfile count and size.

       <b>--no-walreceiver</b>
                 Skip walreceiver checks.

       <b>--no-walreceiver</b>
                 Skip walreceiver checks.

       <b>-w,</b> <b>--wrap-query</b>
                 Wrap query column instead of truncating.

       <b>--min-duration=SECONDS</b>
                 Don't display queries with smaller than specified duration (in seconds).

       <b>--filter=FIELD:REGEX</b>
                 Filter activities with a (case insensitive) regular expression applied on selected fields. Known fields are: dbname.

                 Note: It's possible to filter out a database with negative lookahead, eg: '^(?!database_name)'

       <b>--help</b>
                 Show this help message and exit.

       <b>--version</b>
                 Show program's version number and exit.

   <b>CONNECTION</b> <b>OPTIONS</b>
       <b>-U</b> <b>USERNAME</b>, <b>--username=USERNAME</b>
                 Database user name.

       <b>-p</b> <b>PORT</b>, <b>--port=PORT</b>
                 Database server port.

       <b>-h</b> <b>HOSTNAME</b>, <b>--host=HOSTNAME</b>
                 Database server host or socket directory.

       <b>-d</b> <b>DBNAME</b>, <b>--dbname=DBNAME</b>
             Database name to connect to.

   <b>PROCESS</b> <b>DISPLAY</b> <b>OPTIONS</b>
       <b>--no-pid</b>
                 Disable PID.

       <b>--no-database</b>
                 Disable DATABASE.

       <b>--no-user</b>
                 Disable USER.

       <b>--no-client</b>
                 Disable CLIENT.

       <b>--no-cpu</b>
                 Disable CPU%.

       <b>--no-mem</b>
                 Disable MEM%.

       <b>--no-read</b>
                 Disable READ/s.

       <b>--no-write</b>
                 Disable WRITE/s.

       <b>--no-time</b>
                 Disable TIME+.

       <b>--no-wait</b>
                 Disable W.

       <b>--no-app-name</b>
                 Disable App.

   <b>HEADER</b> <b>DISPLAY</b> <b>OPTIONS</b>
       <b>--no-inst-info</b>
                 Hide instance information.

       <b>--no-sys-info</b>
                 Hide system information.

       <b>--no-proc-info</b>
                 Hide workers process information.

   <b>OTHER</b> <b>DISPLAY</b> <b>OPTIONS</b>
       <b>--refresh</b>
                 Change the refresh rate, allowed values are: 0.5, 1, 2, 3, 4, 5 (in seconds) (default: 2).

</pre><h4><b>ENVIRONMENT</b> <b>VARIABLES</b></h4><pre>
         All the environment variables supported  by  libpq  (PostgreSQL's  query  protocol)  are  supported  by
         pg_activity.

         See: https://www.postgresql.org/docs/current/libpq-envars.html

</pre><h4><b>INTERACTIVE</b> <b>COMMANDS</b></h4><pre>
       <b>r</b>     Sort by READ/s, descending.
       <b>w</b>     Sort by WRITE/s, descending.
       <b>c</b>     Sort by CPU%, descending.
       <b>m</b>     Sort by MEM%, descending.
       <b>t</b>     Sort by TIME+, descending.
       <b>T</b>     Change duration mode: query, transaction, backend.
       <b>Space</b> Pause on/off.
       <b>v</b>     Change queries display mode: full, truncated, indented.
       <b>UP</b> <b>/</b> <b>DOWN</b> Scroll process list.
       <b>k</b> <b>/</b> <b>j</b> Scroll process list.
       <b>q</b>     Quit.
       <b>+</b>     Increase refresh time. Maximum value: 3s.
       <b>-</b>     Decrease refresh time. Minimum Value: 1s.
       <b>F1/1</b>  Running queries monitoring.
       <b>F2/2</b>  Waiting queries monitoring.
       <b>F3/3</b>  Blocking queries monitoring.
       <b>h</b>     Help page.
       <b>R</b>     Refresh.
       <b>D</b>     Refresh database size.

</pre><h4><b>NAVIGATION</b> <b>MODE</b></h4><pre>
       <b>UP</b> <b>/</b> <b>k</b>    Move up the cursor.
       <b>DOWN</b> <b>/</b> <b>j</b>  Move down the cursor.
       <b>PAGE</b> <b>UP</b>    Move the cursor to the first line.
       <b>PAGE</b> <b>DOWN</b>  Move the cursor to the last line.
       <b>K</b>     Terminate the current backend/tagged backends.
       <b>C</b>     Cancel the current backend/tagged backends.
       <b>Space</b> Tag or untag the process.
       <b>q</b>     Quit.
       <b>Other</b> Back to activity.

</pre><h4><b>MISSING</b> <b>DATA</b> <b>IN</b> <b>THE</b> <b>UI?</b></h4><pre>
       pg_activity  is best used with a user owning the SUPERUSER privilege. Ordinary users can only see all the
       information about their own sessions (sessions belonging to a role that they are a member  of).  In  rows
       about  other  sessions,  many  columns will be null or not picked by pg_activity. It will impact both the
       information gathered in the <b>HEADER</b> section and the <b>ACTIVITY</b> <b>PANEL</b>

       If a user doesn't have the CONNECT privilege on a database the <b>pg_database_size()</b> function will fail  and
       pg_activity  will crash. The <b>--no-db-size</b> option can be used in this case. This situation is frequent for
       cloud database where the service provider has created a service database with a restricted access.

       Some  settings  are  visible  only  to  superusers  or  members  of  pg_read_all_settings  such  as   the
       data_directory  guc.  If  the  user  cannot  read  this  parameter  or  access the pid file in the PGDATA
       directory, the <b>system</b> <b>information</b> <b>HEADER</b> group will not be displayed. The <b>%CPU</b>, <b>%MEM</b>, <b>Read/s</b> and  <b>Write/s</b>
       columns will also be missing from the <b>ACTIVITY</b> <b>PANEL</b>.

       On  some  OS  like  MacOS,  psutil's  <b>io_counters()</b> is not implemented. The effects are the same as those
       described when data_directory is not readable.

       pg_activity needs to access the pgsql_tmp directory stored in all tablespaces in  order  to  compute  the
       number  and  size  of  the  temporary  files.  This requires the usage of the <b>pg_ls_tmpdir()</b> function (or
       <b>pg_ls_dir()</b> and <b>pg_stats_file()</b> for versions older than  PostgreSQL  12).  The  user  needs  to  own  the
       SUPERUSER  privilege, be a member of pg_read_server_files or have EXECUTE rights on the function to fetch
       the information. When the number of tempfiles grows a lot,  the  query  might  also  timeout.  The  first
       failure  to  access  this  data  will  disable  tempfile  statistics.  The  feature  can be disabled with
       <b>--no-tempfiles</b>.

       Aurora doesn't provide the <b>pg_stat_get_wal_receiver()</b> function.  Therefore there is no wal receiver  data
       in  the  <b>process</b> <b>&amp;</b> <b>information</b> <b>HEADER</b> group. The first failure to access this data might be logged by the
       PostgreSQL, the following checks will be skipped.  Wal receiver checks can be  completely  disabled  with
       <b>--no-walreceiver</b>.

       Finally,  some  information is not available in older version of PostgreSQL, the fields will therefore be
       empty.

</pre><h4><b>EXAMPLES</b></h4><pre>
       PGPASSWORD='mypassword' pg_activity -U pgadmin -h 127.0.0.1 --no-client

       pg_activity -h /var/run/postgresql

       pg_activity -h myserver -p 5433 -d nagios -U nagios

pg_activity 3.5.1                                  2024-04-03                                     <u><a href="../man1/PG_ACTIVITY.1.html">PG_ACTIVITY</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>