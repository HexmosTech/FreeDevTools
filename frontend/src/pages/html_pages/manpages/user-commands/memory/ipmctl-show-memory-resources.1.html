<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ipmctl-show-memory-resources - Shows PMem module and DDR memory allocation</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/ipmctl">ipmctl_03.00.00.0485-1build1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       ipmctl-show-memory-resources - Shows PMem module and DDR memory allocation

</pre><h4><b>SYNOPSIS</b></h4><pre>
           ipmctl show [OPTIONS] -memoryresources

</pre><h4><b>DESCRIPTION</b></h4><pre>
       Shows PMem module and DDR memory allocation information for this platform.

</pre><h4><b>OPTIONS</b></h4><pre>
       -h, -help
           Displays help for the command.

       -ddrt
           Used to specify DDRT as the desired transport protocol for the current invocation of ipmctl.

       -smbus
           Used to specify SMBUS as the desired transport protocol for the current invocation of ipmctl.

           <b>Note</b>

           The -ddrt and -smbus options are mutually exclusive and may not be used together.

       -o (text|nvmxml), -output (text|nvmxml)
           Changes the output format. One of: "text" (default) or "nvmxml".

       -u (B|MB|MiB|GB|GiB|TB| TiB), -units (B|MB|MiB|GB|GiB|TB| TiB)
           Changes the units that capacities are displayed in for this command. One of: bytes (B), megabytes
           (MB), mebibytes (MiB), gigabytes (GB), gibibytes (GiB), terabytes (TB) or tebibytes (TiB).

</pre><h4><b>EXAMPLES</b></h4><pre>
       Shows the PMem module and DDR memory allocation.

           ipmctl show -memoryresources

</pre><h4><b>LIMITATIONS</b></h4><pre>
       In order to successfully execute this command:

       •   The caller must have the appropriate privileges.

       •   The specified PMem modules must be manageable by the host software.

</pre><h4><b>RETURN</b> <b>DATA</b></h4><pre>
       Returns a table containing the attributes listed below.

           <b>Note</b>

           Capacities from unmanageable PMem modules are not included in the following aggregated totals.

       Volatile DDR Capacity
           Total DDR capacity that is used as volatile memory.

       Volatile PMem module Capacity
           Total PMem module capacity that is used as volatile memory.

       Total Volatile Capacity
           Total DDR and PMem module capacity that is used as volatile memory.

       AppDirect PMem module Capacity
           Total PMem module capacity used as persistent memory.

       Total AppDirect Capacity
           Total DDR and PMem module capacity used as persistent memory.

       Cache DDR Capacity
           Total DDR capacity used as a cache for PMem modules.

       Total Cache Capacity
           Total DDR capacity used as a cache for PMem modules.

       Inaccessible DDR Capacity
           Total DDR capacity that is inaccessible.

       Inaccessible PMem module Capacity
           Total PMem module capacity that is inaccessible due to any of:

           •   Platform configuration prevents accessing this capacity. For example, MemoryCapacity is
               configured but MemoryMode is not enabled by platform FW (current Memory Mode is 1LM).

           •   Capacity is inaccessible because it is not mapped into the System Physical Address space (SPA).
               This is usually due to platform firmware memory alignment requirements.

           •   Persistent capacity that is reserved. This capacity is the persistent memory partition capacity
               (rounded down for alignment) less any App Direct capacity. Reserved capacity typically results
               from a Memory Allocation Goal request that specified the Reserved property. This capacity is not
               mapped to System Physical Address space (SPA).

           •   Capacity that is unusable because it has not been configured.

           •   PMem module configured capacity but SKU prevents usage. For example, AppDirectCapacity but PMem
               module SKU is MemoryMode only.

       Total Inaccessible Capacity
           Total capacity of DDR and PMem module that is inaccessible.

       Physical DDR Capacity
           Total physical DDR capacity populated on the platform.

       Physical PMem module Capacity
           Total physical PMem module capacity populated on the platform.

       Total Physical Capacity
           Total physical capacity populated on the platform.

</pre><h4><b>DETAILS</b></h4><pre>
       PMem modules are partitioned into Memory and Persistent partitions. Memory partitions are aligned on a 1
       GiB boundary by ipmctl with the Persistent partition consuming the remaining capacity. Any capacity that
       falls outside the Memory and Persistent partitions is InaccessibleCapacity and is not usable. If the PMem
       module is configured for 100% Memory Mode, then the Memory partition consumes all of the capacity and the
       Persistent partition has none.

       The mode determines how the DDR capacities are allocated. In 1LM and AppDirect, all DDR capacity is used
       as additional volatile memory. In MemoryMode, all DDR capacity that the CPU will support is used as a
       cache for the PMem module.

       Platform firmware alignment restrictions may result in some capacity from the Memory and Persistent
       partitions not mapped to System Physical Address space (SPA). This memory is considered
       InaccessibleCapacity and is not usable.

       The definitions and calculations that follow intend to describe how each of the values are determined.

       <b>Definitions:</b>

       Intel PMem module Current Config
           See the <u>Intel®</u> <u>Optane™</u> <u>Persistent</u> <u>Memory</u> <u>Software-Firmware</u> <u>Interface</u> <u>Specification</u>, document number
           556488, for details.

       PMem module Partition Info
           PMem module partition information provided by PMem module firmware. See the <u>Intel®</u> <u>Optane™</u> <u>Firmware</u>
           <u>Interface</u> <u>Specification</u>, document number 626912, for details.

       PMem module Physical Capacity (PC)
           Total usable capacity reported by PMem module Partition Info

       PMem module Memory Partition Capacity (MPC)
           Volatile capacity reported by PMem module Partition Info

       PMem module Persistent Partition Capacity (PPC)
           Persistent capacity reported by PMem module Partition Info

       PMem module Volatile Memory Capacity (VMC)
           Usable volatile memory capacity as reported by platform FW via the <u>Intel®</u> <u>PMem</u> <u>module</u> <u>Current</u>
           <u>Config→Volatile</u> <u>Memory</u> <u>Size</u> <u>Mapped</u> <u>into</u> <u>SPA</u> field

       PMem module Persistent Memory Capacity (PMC)
           Usable persistent memory capacity as reported by platform FW via the <u>Intel®</u> <u>PMem</u> <u>module</u> <u>Current</u>
           <u>Config→Persistent</u> <u>Memory</u> <u>Size</u> <u>Mapped</u> <u>into</u> <u>SPA</u> field

       DDR Total Capacity (DDRTC)
           Total amount of memory available for use on the populated DDRs

       <b>Calculations:</b>

           if (CurrentMode == 1LM) then
             DDRCacheCapacity = 0
             DDRVolatileCapacity = DDRTC
           else if (CurrentMode == 2LM) then
             DDRCacheCapacity = DDRTC
             DDRVolatileCapacity = 0

           TotalVolatileCapacity = VMC + DDRVolatileCapacity

           InaccessibleCapacity = PC - PMC
            if (CurrentMode != 1LM) then
             InaccessibleCapacity -= VMC (rounded down for alignment)

ipmctl                                             2024-04-22                    <u><a href="../man1/IPMCTL-SHOW-MEMORY-RESOURCES.1.html">IPMCTL-SHOW-MEMORY-RESOURCES</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>