<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>debmirror - Ubuntu partial mirror script, with ftp, http or rsync and package pool support</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/debmirror">debmirror_2.43ubuntu2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       debmirror - Ubuntu partial mirror script, with ftp, http or rsync and package pool support

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>debmirror</b> [<u>options</u>] <u>mirrordir</u>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This program downloads and maintains a partial local Ubuntu mirror. It can mirror any combination of
       architectures, distributions, and sections. Files are transferred by ftp, and package pools are fully
       supported. It also does locking and updates trace files.

       The partial mirror created by this program is not suitable to be used as a public Ubuntu mirror. If that
       is your aim, you should instead follow the instructions at &lt;<a href="http://www.debian.org/mirrors/ftpmirror">http://www.debian.org/mirrors/ftpmirror</a>&gt;.

       This program mirrors in three steps.

       1. download Packages and Sources files
           First it downloads all Packages and Sources files for the subset of Ubuntu it was instructed to get.

       2. download everything else
           The  Packages and Sources files are scanned, to build up a list of all the files they refer to. A few
           other miscellaneous files are added to the list.  Then the program makes sure that each file  in  the
           list  is  present  on  the  local mirror and is up-to-date, using file size (and optionally checksum)
           checks.  Any necessary files are downloaded.

       3. clean up unknown files
           Any files and directories on the local mirror that are not in the list are removed.

</pre><h4><b>OPTIONS</b></h4><pre>
       <u>mirrordir</u>
           This required (unless defined in a configuration file) parameter specifies  where  the  local  mirror
           directory  is.  If the directory does not exist, it will be created. Be careful; telling this program
           that your home directory is the mirrordir is guaranteed to replace your home directory with an Ubuntu
           mirror!

       <b>-p</b>, <b>--progress</b>
           Displays progress bars as files are downloaded.

       <b>-v</b>, <b>--verbose</b>
           Displays progress between file downloads.

       <b>--debug</b>
           Enables verbose debug output, including ftp protocol dump.

       <b>--dry-run</b>
           Simulate a mirror run. This will still download the meta files to the <u>./.temp</u> working directory,  but
           won't replace the old meta files, won't download debs and source files and only simulates cleanup.

       <b>--skip-installer</b>=<u>foo[,bar,..]</u>
           Don't download debian-installer files for the specified distribution.

       <b>--help</b>
           Display a usage summary.

       <b>--version</b>
           Print version number and exit.

       <b>-h</b>, <b>--host</b>=<u>remotehost</u>
           Specify  the  remote host to mirror from. Defaults to <u>archive.ubuntu.com</u>, you are strongly encouraged
           to find a closer mirror.

       <b>-r</b>, <b>--root</b>=<u>directory</u>
           Specifies the directory on the remote host that is the  root  of  the  Ubuntu  archive.  Defaults  to
           <u>ubuntu</u>, which will work for most mirrors. The root directory has a <u>dists</u> subdirectory.

       <b>--method</b>=<u>method</u>
           Specify  the  method to download files. Currently, supported methods are <b>ftp</b>, <b>http</b>, <b>https</b>, and <b>rsync</b>.
           The <b>file</b> method is experimentally supported.

       <b>--passive</b>
           Download in passive mode when using ftp.

       <b>-u</b>, <b>--user</b>=<u>remoteusername</u>
           Specify the remote user name to use to log into the remote host.  Defaults to "anonymous".

       <b>--passwd</b>=<u>remoteuserpassword</u>
           Specify the remote user password to use to log into the remote ftp host.  It is used with <b>--user</b>  and
           defaults to "anonymous@".

       <b>--proxy</b>=<u><a href="http://user">http://user</a>:pass@url:port/</u>
           Specifies the http proxy (like Squid) to use for http or ftp methods.

       <b>-d</b>, <b>--dist</b>=<u>foo[,bar,..]</u>
           Specify the distribution (bionic, focal, jammy) of Ubuntu to mirror. This switch may be used multiple
           times, and multiple distributions may be specified at once, separated by commas.

           You may also use the stable, testing, unstable, names.

       <b>--omit-suite-symlinks</b>
           With  this  option set, <b>debmirror</b> will not create the symlink from <u>suite</u> to <u>codename</u>.  This is needed
           for example when mirroring archived Ubuntu  releases  as  they  will  all  have  either  "stable"  or
           "oldstable" as suite in their <u>Release</u> files.

       <b>-s</b>, <b>--section</b>=<u>foo[,bar,..]</u>
           Specify        the       section       of       Ubuntu       to       mirror.       Defaults       to
           "main,contrib,non-free,non-free-firmware,main/debian-installer".

       <b>-a</b>, <b>--arch</b>=<u>foo[,bar,..]</u>
           Specify the architectures to mirror. The default is <b>--arch=i386</b>.  Specifying <b>--arch=none</b> will  mirror
           no archs.

       <b>--rsync-extra</b>=<u>foo[,bar,..]</u>
           Allows you to also mirror files from a number of directories that are not part of the package archive
           itself.

           <b>Debmirror</b> will <b>always</b> use rsync for the transfer of these files, irrespective of what transfer method
           is  specified  in  the  <b>--method</b> option.  This will therefore not work if your remote mirror does not
           support rsync, or if the mirror needs a different <b>--root</b> option for rsync than for the main  transfer
           method specified with <b>--method</b>.

           Note that excluding individual files in the directories is not supported.

           The following values are supported.

           <b>doc</b>
             Download  all files and subdirectories in <u>doc</u> directory, and all README files in the root directory
             of the archive.

           <b>indices</b>
             Download all files and subdirectories in <u>indices</u> directory. Note that this  directory  can  contain
             some rather large files; don't include this type unless you know you need these files.

           <b>tools</b>
             Download all files and subdirectories in <u>tools</u> directory.

           <b>trace</b>
             Download  the  remote  mirror's  trace files for the archive (<u>project/trace/*</u>).  This is enabled by
             default.

           <b>none</b>
             This can be used to disable getting extra files with rsync.

           If specified, the update of trace files will be done at the beginning of the mirror  run;  the  other
           types are done near the end.

           This  switch  may  be used multiple times, and multiple values may be specified at once, separated by
           commas; unknown values are ignored.

       <b>--di-dist</b>=<u>dists</u> <u>|</u> <u>foo[,bar,..]</u>
           Mirror current Ubuntu Installer images for the specified dists.  See further the  section  "Mirroring
           Ubuntu Installer images" below.

       <b>--di-arch</b>=<u>arches</u> <u>|</u> <u>foo[,bar,..]</u>
           Mirror  current  Ubuntu  Installer  images  for the specified architectures.  See further the section
           "Mirroring Ubuntu Installer images" below.

       <b>--source</b>
           Include source in the mirror (default).

       <b>--nosource</b>
           Do not include source.

       <b>--i18n</b>
           Additionally download <u>Translation-&lt;lang&gt;.*</u> files, which contain translations of package descriptions.
           Selection of specific translations is possible using the <b>--include</b> and <b>--exclude</b> options. The default
           is to download only the English file.

       <b>--getcontents</b>
           Additionally download <u>Contents.&lt;arch&gt;.gz</u> files. Note that these files can be relatively big  and  can
           change frequently, especially for the testing and unstable suites. Use of the available diff files is
           strongly recommended (see the <b>--diff</b> option).

       <b>--checksums</b>
           Use  checksums  to determine if files on the local mirror that are the correct size actually have the
           correct content. Not enabled by default, because it is too paranoid, and too slow.

           When the state cache is used, <b>debmirror</b> will only check checksums during runs  where  the  cache  has
           expired or been invalidated, so it is worth considering to use these two options together.

       <b>--ignore-missing-release</b>
           Don't fail if the <u>Release</u> file is missing.

       <b>--check-gpg</b>, <b>--no-check-gpg</b>
           Controls  whether gpg signatures from the <u>Release.gpg</u> file should be checked. The default is to check
           signatures.

       <b>--keyring</b>=<u>file</u>
           Use <u>file</u> as an additional gpg-format keyring.  May be given multiple times.

           Note that these will be used in addition to $GNUPGHOME/trustedkeys.gpg.  The latter  can  be  removed
           from the set of keyrings by setting $GNUPGHOME to something non-existent when using this option.

           On a typical Ubuntu system, the Ubuntu archive keyring can be used directly with this option:

               debmirror --keyring /usr/share/keyrings/debian-archive-keyring.gpg ...

       <b>--ignore-release-gpg</b>
           Don't  fail  if the <u>Release.gpg</u> file is missing. If the file does exist, it is mirrored and verified,
           but any errors are ignored.

       <b>--ignore</b>=<u>regex</u>
           Never delete any files whose filenames match the regex. May be used multiple times.

       <b>--exclude</b>=<b>regex</b>
           Never download any files whose filenames match the regex. May be used multiple times.

       <b>--include</b>=<u>regex</u>
           Don't exclude any files whose filenames match the regex. May be used multiple times.

       <b>--exclude-deb-section</b>=<u>regex</u>
           Never download any files whose Ubuntu Section (games, doc, oldlibs, science, ...)  match  the  regex.
           May be used multiple times.

       <b>--limit-priority</b>=<u>regex</u>
           Limit  download  to files whose Ubuntu Priority (required, extra, optional, ...) match the regex. May
           be used multiple times.

       <b>--exclude-field</b>=<u>fieldname</u>=<u>regex</u>
           Never download any binary packages where the contents of <u>fieldname</u>  match  the  regex.  May  be  used
           multiple  times.  If  this  option is used and the mirror includes source packages, only those source
           packages corresponding to included binary packages will be downloaded.

       <b>--include-field</b>=<u>fieldname</u>=<u>regex</u>
           Don't exclude any binary packages where the contents of  <u>fieldname</u>  match  the  regex.  May  be  used
           multiple  times.  If  this  option is used and the mirror includes source packages, only those source
           packages corresponding to included binary packages will be downloaded.

       <b>-t</b>, <b>--timeout</b>=<u>seconds</u>
           Specifies the timeout to use for network operations (either FTP or rsync).   Set  this  to  a  higher
           value if you experience failed downloads. Defaults to 300 seconds.

       <b>--max-batch</b>=<u>number</u>
           Download at most max-batch number of files (and ignore rest).

       <b>--rsync-batch</b>=<u>number</u>
           Download at most number of files with each rsync call and then loop.

       <b>--rsync-options</b>=<u>options</u>
           Specify alternative rsync options to be used. Default options are "-aL --partial". Care must be taken
           when  specifying  alternative  options  not  to  disrupt  operations,  it's best to only add to those
           options.

           The most likely option to add is "--bwlimit=x" to avoid saturating the bandwidth of your link.

       <b>--postcleanup</b>
           Clean up the local mirror but only after mirroring is complete and only if there was no error.

           This is the default, because it ensures that the mirror is consistent at all times.

       <b>--precleanup</b>
           Clean up the local mirror before starting mirroring.

           This option may be useful if you have limited disk space, but  it  will  result  in  an  inconsistent
           mirror when debmirror is running.

           The deprecated <b>--cleanup</b> option also enables this mode.

       <b>--nocleanup</b>
           Do not clean up the local mirror.

       <b>--skippackages</b>
           Don't re-download <u>Packages</u> and <u>Sources</u> files.  Useful if you know they are up-to-date.

       <b>--diff</b>=<u>use|mirror|none</u>
           If  <b>--diff=use</b> is specified and the <u>Release</u> file contains entries for diff files, then debmirror will
           attempt to use them to update <u>Packages</u>, <u>Sources</u>, and <u>Contents</u> files (which can  significantly  reduce
           the  download  size  for  meta  files),  but will not include them in the mirror. This is the default
           behavior and avoids having time consuming diff files for a fast local mirror.

           Specifying <b>--diff=mirror</b> does the same as <b>use</b>, but will also include the downloaded diff files in the
           local mirror. Specify <b>--diff=none</b> to completely ignore diff files.

           Note that if rsync is used as method to download files and the archive being mirrored has "rsyncable"
           gzipped meta files, then using <b>--diff=none</b> may be the most efficient way to download  them.  See  the
           <b><a href="../man1/gzip.1.html">gzip</a></b>(1) man page for information about its rsyncable option.

       <b>--gzip-options</b>=<u>options</u>
           Specify  alternative  options  to  be used when calling <b><a href="../man1/gzip.1.html">gzip</a></b>(1) to compress meta files after applying
           diffs. The default options are "-9 -n --rsyncable" which corresponds with the options  used  to  gzip
           meta files for the main Ubuntu archive.

           These  options  may  need to be modified if the checksum of the file as gzipped by debmirror does not
           match the checksum listed in the <u>Release</u> file (which will result in the gzipped file being downloaded
           unnecessarily after diffs were successfully applied).

       <b>--slow-cpu</b>
           By default debmirror saves some bandwidth by performing  cpu-intensive  tasks,  such  as  compressing
           files  to  generate .gz and .xz files. Use this mode if the computer's CPU is slow, and it makes more
           sense to use more bandwidth and less CPU.

           This option implies <b>--diff=none</b>.

       <b>--state-cache-days</b>=<u>number</u>
           Save the state of the mirror in a cache file between runs. The cache will expire after the  specified
           number of days, at which time a full check and cleanup of the mirror will be done. While the cache is
           valid, <b>debmirror</b> will trust that the mirror is consistent with this cache.

           The cache is only used for files that have a unique name, i.e. binary packages and source files. If a
           mirror  update  fails  for  any reason, the cache will be invalidated and the next run will include a
           full check.

           Main advantage of using the state cache is that it  avoids  a  large  amount  of  disk  access  while
           checking which files need to be fetched. It may also reduce the time required for mirror updates.

       <b>--ignore-small-errors</b>
           Normally  <b>debmirror</b>  will  report an error if any deb files or sources fail to download and refuse to
           update the meta data to an inconsistent mirror. Normally this  is  a  good  things  as  it  indicates
           something  went  wrong  during  download  and  should  be  retried. But sometimes the upstream mirror
           actually is broken. Specifying <b>--ignore-small-errors</b> causes <b>debmirror</b> to ignore missing or broken deb
           and source files but still be pedantic about checking meta files.

       <b>--allow-dist-rename</b>
           The directory name for a dist should be equal to its Codename and not to a Suite. If the local mirror
           currently has directories named after Suites, <b>debmirror</b> can rename them automatically.   An  existing
           symlink from <u>codename</u> to <u>suite</u> will be removed, but <b>debmirror</b> will automatically create a new symlink
           suite -&gt; codename  (immediately  after  moving  meta  files in place). This conversion should only be
           needed once.

       <b>--disable-ssl-verification</b>
           When https is used, debmirror checks that the SSL certificate is value.

           If the server has a self-signed certificate, the check can be disabled with this option.

       <b>--debmarshal</b>
           On each pull, keep the repository meta data from dists/* in a numbered subdirectory, and  maintain  a
           symlink  latest  to  the  most  recent  pull.   This  is  similar to Debmarshal in tracking mode, see
           debmarshal.debian.net for examples and  use.   debmirror  cleanup  is  disabled  when  this  flag  is
           specified.      Separate    pool    and    snapshot    cleanup    utilities    are    available    at
           <a href="http://code.google.com/p/debmarshal/source/browse/">http://code.google.com/p/debmarshal/source/browse/</a>#svn/trunk/repository2

       <b>--config-file</b>=<u>file</u>
           Specify a configuration file. This option may be repeated to read multiple  configuration  files.  By
           default debmirror reads /etc/debmirror.conf and <a href="file:~/.debmirror.conf">~/.debmirror.conf</a> (see section FILES).

   <b>Experimental</b> <b>options</b>
       <b>--retry-rsync-packages</b>=<u>number</u>
           While  downloading  Packages and related files via rsync, try up to this many times if rsync fails to
           connect. Defaults to 1, to try only once. (A typical nondefault value is  10.  To  try  an  unlimited
           number of times, use -1 or 0.)

</pre><h4><b>USING</b> <b>DEBMIRROR</b></h4><pre>
   <b>Using</b> <b>regular</b> <b>expressions</b> <b>in</b> <b>options</b>
       Various  options accept regular expressions that can be used to tune what is included in the mirror. They
       can be any regular expression valid in <u>perl</u>, which also means that extended syntax is standard. Make sure
       to anchor regular expressions appropriately: this is not done by debmirror.

       The --include and --exclude options can be combined. This combination for example  will,  if  the  --i18n
       option  is  used,  exclude  all <u>Translation</u> files, except for the ones for Portuguese (pt) and Brazillian
       (pt_BR):

         --exclude='/Translation-.*' --include='/Translation-pt.*'

   <b>Mirroring</b> <b>Ubuntu</b> <b>Installer</b> <b>images</b>
       Debmirror will only mirror the "current" images that are on the  remote  mirror.  At  least  one  of  the
       options --di-dist or --di-arch must be passed to enable mirroring of the images.

       The  special  values  "dists"  and  "arches"  can  be  used  to  tell debmirror to use the same dists and
       architectures for D-I images as for the archive, but it is also possible to specify different values.  If
       either option is not set, it will default to the same values as for the archive.

       If  you  wish to create custom CD images using for example <u>debian-cd</u>, you will probably also want add the
       option "--rsync-extra=doc,tools".

       <b>Limitations</b>

       There are no progress updates displayed for D-I images.

   <b>Archive</b> <b>size</b>
       The tables in the file <u>/usr/share/doc/debmirror/mirror_size</u> give an indication of  the  space  needed  to
       mirror the Ubuntu archive. They are particularly useful if you wish to set up a partial mirror.  Only the
       size  of  source  and  binary  packages  is included. You should allow for around 1-4 GB of meta data (in
       <u>./dists/&lt;dist&gt;</u>) per suite (depending  in  your  settings).  Plus  whatever  space  is  needed  for  extra
       directories (e.g. <u>tools</u>, <u>doc</u>) you wish to mirror.

       The  tables  also  show  how  much  additional  space  is  required  if  you  add a release on top of its
       predecessor. Note that the additional space needed for testing and (to a lesser extent)  unstable  varies
       during  the  development  cycle of a release. The additional space needed for testing is zero immediately
       after a stable release and grows from that time onwards.

       <b>Note</b> Debmirror keeps an extra copy of all meta data. This is necessary to guarantee that the local mirror
       stays consistent while debmirror is running.

</pre><h4><b>EXAMPLES</b></h4><pre>
       Simply  make  a  mirror  in  <u>/srv/mirror/debian</u>,  using  all  defaults  (or  the  settings   defined   in
       <u>debmirror.conf</u>):

         debmirror /srv/mirror/debian

       Make  a  mirror  of  i386  and  amd64  binaries,  main and universe only, and include both LTS and latest
       versions of Ubuntu; download from 'archive.ubuntu.com':

         debmirror -a i386,amd64 -d focal -d jammy -s main,universe --nosource \
                   -h archive.ubuntu.com --progress $HOME/mirror/debian

       Make a mirror using rsync (rsync server is 'ftp.debian.org::debian'), excluding the section  'debug'  and
       the package 'foo-doc':

         debmirror -e rsync $HOME/mirror/debian --exclude='/foo-doc_' \
                   --exclude-deb-section='^debug$'

</pre><h4><b>FILES</b></h4><pre>
         /etc/debmirror.conf
         <a href="file:~/.debmirror.conf">~/.debmirror.conf</a>

           Debmirror will look for the presence of these files and load them
           in the indicated order if they exist.
           See the example in /usr/share/doc/debmirror/examples for syntax.

         <a href="file:~/.gnupg/trustedkeys.gpg">~/.gnupg/trustedkeys.gpg</a>

           When gpg checking is enabled,
           debmirror uses gpgv to verify Release and Release.gpg using the
           default keying <a href="file:~/.gnupg/trustedkeys.gpg.">~/.gnupg/trustedkeys.gpg.</a> This can be changed by
           exporting GNUPGHOME resulting in $GNUPGHOME/trustedkeys.gpg being
           used.  (Note that keyring files can also be specified directly
           with debmirror's --keyring option -- see above).

           To add the right key to this keyring you can import it from the
           ubuntu keyring (in case of the Ubuntu archive) using:

             gpg --keyring <a href="file:/usr/share/keyrings/ubuntu-archive-keyring.gpg">/usr/share/keyrings/ubuntu-archive-keyring.gpg</a> --export \
                 | gpg --no-default-keyring --keyring trustedkeys.gpg --import

           or download the key from a keyserver:

             gpg --no-default-keyring --keyring trustedkeys.gpg \
                 --keyserver keyserver.ubuntu.com --recv-keys &lt;key ID&gt;

           The &lt;key ID&gt; can be found in the gpgv error message in debmirror:
           gpgv: Signature made Tue Jan 23 09:07:53 2007 CET using DSA key ID 2D230C5F

</pre><h4><b>COPYRIGHT</b></h4><pre>
       This  program  is  copyright 2000-2001, 2010-2014 by Joey Hess &lt;<a href="mailto:joeyh@debian.org">joeyh@debian.org</a>&gt;, under the terms of the
       GNU GPL (either version 2 of the licence or, at your option, any later version), copyright  2001-2002  by
       Joerg  Wendland  &lt;<a href="mailto:joergland@debian.org">joergland@debian.org</a>&gt;, copyright 2003-2007 by Goswin von Brederlow &lt;<a href="mailto:goswin-v-b@web.de">goswin-v-b@web.de</a>&gt;,
       copyright 2009-2010 by Frans Pop &lt;<a href="mailto:fjp@debian.org">fjp@debian.org</a>&gt;, copyright 2015 by Thaddeus H. Black  &lt;<a href="mailto:thb@debian.org">thb@debian.org</a>&gt;,
       and copyright 2016 by Colin Watson &lt;<a href="mailto:cjwatson@debian.org">cjwatson@debian.org</a>&gt;.

       The  author  disclaims  any  responsibility  for  any mangling of your system, unexpected bandwidth usage
       bills, meltdown of the Ubuntu/Ubuntu mirror network, etc, that this script may  cause.  See  NO  WARRANTY
       section of GPL.

</pre><h4><b>AUTHOR</b></h4><pre>
        Author:
          Joey Hess &lt;<a href="mailto:joeyh@debian.org">joeyh@debian.org</a>&gt;

        Previous maintainers:
          Joerg Wendland &lt;<a href="mailto:joergland@debian.org">joergland@debian.org</a>&gt;
          Goswin von Brederlow &lt;<a href="mailto:goswin-v-b@web.de">goswin-v-b@web.de</a>&gt;
          Frans Pop &lt;<a href="mailto:fjp@debian.org">fjp@debian.org</a>&gt;
          Joey Hess &lt;<a href="mailto:joeyh@debian.org">joeyh@debian.org</a>&gt;
          Thaddeus H. Black &lt;<a href="mailto:thb@debian.org">thb@debian.org</a>&gt;

        Current maintainer:
          Colin Watson &lt;<a href="mailto:cjwatson@debian.org">cjwatson@debian.org</a>&gt;

</pre><h4><b>MOTTO</b></h4><pre>
       Waste bandwidth -- put a partial mirror on your laptop today!

perl v5.40.0                                       2025-02-11                                       <u><a href="../man1/DEBMIRROR.1.html">DEBMIRROR</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>