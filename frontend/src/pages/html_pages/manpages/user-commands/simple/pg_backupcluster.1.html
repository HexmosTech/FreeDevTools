<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>pg_backupcluster - simple pg_basebackup and pg_dump front-end</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/postgresql-common">postgresql-common_274_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       pg_backupcluster - simple pg_basebackup and pg_dump front-end

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>pg_backupcluster</b> [<u>options</u>] <u>version</u> <u>cluster</u> <u>action</u>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>pg_backupcluster</b> provides a simple interface to create PostgreSQL cluster backups using <b><a href="../man1/pg_basebackup.1.html">pg_basebackup</a></b>(1)
       and <b><a href="../man1/pg_dump.1.html">pg_dump</a></b>(1).

       To ease integration with <b>systemd</b> operation, the alternative syntax "<b>pg_basebackup</b> <u>version</u><b>-</b><u>cluster</u> <u>action</u>"
       is also supported.

</pre><h4><b>ACTIONS</b></h4><pre>
       <b>createdirectory</b>
           Create  /var/backups/postgresql  and /var/backups/postgresql/<u>version</u>-<u>cluster</u>.  This action can be run
           as root to create the directories required for backups.  All  other  actions  will  also  attempt  to
           create  the  directories when missing, but can of course only do that when running as root. They will
           switch to the cluster owner after this step.

       <b>basebackup</b>
           Backup using <b><a href="../man1/pg_basebackup.1.html">pg_basebackup</a></b>(1). The resulting basebackup  contains  the  WAL  files  required  to  run
           recovery on startup.

       <b>dump</b>
           Backup  using  <b><a href="../man1/pg_dump.1.html">pg_dump</a></b>(1).  Global  objects  (users,  tablespaces)  are  dumped  using  <b><a href="../man1/pg_dumpall.1.html">pg_dumpall</a></b>(1)
           <b>--globals-only</b>. Individual databases are dumped into PostgreSQL's custom format.

       <b>expirebasebackups</b> <u>N</u>
           Remove all but last the <u>N</u> basebackups.

       <b>expiredumps</b> <u>N</u>
           Remove all but last the <u>N</u> dumps.

       <b>deletebroken</b>
           Remove all broken backups.

       <b>receivewal</b>
           Launch pg_receivewal. WAL files are gzip-compressed in PG 10+.

       <b>compresswal</b>
           Compress WAL files in archive.

       <b>archivecleanup</b>
           Remove obsolete WAL files from archive using <b><a href="../man1/pg_archivecleanup.1.html">pg_archivecleanup</a></b>(1).

       <b>list</b>
           Show dumps, basebackups, and WAL, with size.

</pre><h4><b>OPTIONS</b></h4><pre>
       <b>-c</b> <b>--checkpoint=spread|fast</b>
           Passed to <b>pg_basebackup</b>. Default is <b>spread</b>.

       <b>-k</b> <b>--keep-on-error</b>
           Keep broken backup directory on error. By default backups are deleted on error.  Broken  backups  can
           be cleaned up using the <b>deletebroken</b> action.

       <b>-v</b> <b>--verbose</b>
           Verbose output, even when not running on a terminal.

       <b>-Z</b> <u>level</u> <b>--compress=</b><u>level</u>
           Passed  to  <b>pg_dump</b>, <b>pg_basebackup</b> and <b>pg_receivewal</b>.  Default is pg_dump's default compression, <b>gzip</b>
           for pg_basebackup, and <b>5</b> for pg_receivewal.

</pre><h4><b>FILES</b></h4><pre>
       /var/backups/postgresql
           Default root directory for cluster backup directories.

       /var/backups/postgresql/<u>version</u>-<u>cluster</u>
           Default directory for cluster backups.

       /var/backups/postgresql/<u>version</u>-<u>cluster</u>/<u>timestamp</u><b>.basebackup</b>
           Backup from <b>pg_backupcluster</b> <b>...</b> <b>basebackup</b>.

           config.tar.gz
               Tarball  of   cluster   configuration   directory   (postgresql.conf,   pg_hba.conf,   ...)    in
               /etc/postgresql.

           <u>tablespace</u>.tar.gz, pg_wal.tar.gz, backup_manifest
               Tablespace and WAL tarballs and backup info written by <b>pg_basebackup</b>.

           status
               Completion timestamp of backup run.

       /var/backups/postgresql/<u>version</u>-<u>cluster</u>/<u>timestamp</u><b>.dump</b>
           Backup from <b>pg_backupcluster</b> <b>...</b> <b>dump</b>.

           config.tar.gz
               Tarball   of   cluster   configuration   directory   (postgresql.conf,   pg_hba.conf,   ...)   in
               /etc/postgresql.

           createcluster.opts
               Options (encoding, locale, data checksums) to be passed to <b>pg_createcluster</b>  for  restoring  this
               cluster.

           globals.sql
               Global objects (roles, tablespaces) from <b>pg_dumpall</b> <b>--globals-only</b>.

           databases.sql
               SQL commands to create databases and restore database-level options.

           <u>database</u>.dump
               Database dumps from <b>pg_dump</b> <b>--format=custom</b>.

           status
               Completion timestamp of backup run.

       /var/backups/postgresql/<u>version</u>-<u>cluster</u>/<b>wal</b>
           WAL files from <b>pg_receivewal</b>.

</pre><h4><b>CAVEATS</b></h4><pre>
       For dump-style backups, not all properties of the original cluster are preserved:

       • In PostgreSQL 10 and earlier, ALTER ROLE ... IN DATABASE is not supported.

       • Not   all   <b>initdb</b>  options  are  carried  over.  Currently  supported  are  <b>--encoding</b>,  <b>--lc-collate</b>,
         <b>--lc-collate</b>, and <b>-k</b> <b>--data-checksums</b>.

       The earliest PostgreSQL version supported for dumps is 9.3.   For  basebackups,  the  earliest  supported
       version is 9.1.  <b>receivewal</b> (and hence archive recovery) are supported in 9.5 and later.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man1/pg_restorecluster.1.html">pg_restorecluster</a></b>(1),       <b><a href="../man1/pg_dump.1.html">pg_dump</a></b>(1),      <b><a href="../man1/pg_dumpall.1.html">pg_dumpall</a></b>(1),      <b><a href="../man1/pg_basebackup.1.html">pg_basebackup</a></b>(1),      <b><a href="../man1/pg_receivewal.1.html">pg_receivewal</a></b>(1),
       <b><a href="../man1/pg_archivecleanup.1.html">pg_archivecleanup</a></b>(1).

</pre><h4><b>AUTHOR</b></h4><pre>
       Christoph Berg &lt;<a href="mailto:myon@debian.org">myon@debian.org</a>&gt;

Debian                                             2025-02-20                                <u><a href="../man1/PG_BACKUPCLUSTER.1.html">PG_BACKUPCLUSTER</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>