<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>tox-stages — run Tox environments in groups, stop on failure</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/tox-stages">tox-stages_0.2.0-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       tox-stages — run Tox environments in groups, stop on failure

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>tox-stages</b> [<b>-f</b> <u>filename</u>] <b>available</b>
       <b>tox-stages</b>   [<b>-f</b>   <u>filename</u>]   <b>run</b>   [<b>--arg</b>   <u>arg...</u>   |   <b>-A</b>  <u>arg...</u>]  [<b>--match-spec</b>  <u>spec</u>  |  <b>-m</b>  <u>spec</u>]
                  [<b>--parallel</b> <u>spec</u> | <b>-p</b> <u>spec</u>] [<u>stage...</u>]

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The <b>tox-stages</b> tool is used to run Tox test environments in several  stages,  one  or  more  environments
       running  in  parallel  at  each  stage.   If  any of the test environments run at some stage should fail,
       <b>tox-stages</b> will stop, not run anything further, and exit with a non-zero exit code.   This  allows  quick
       static  check  tools  like  e.g.   <b>ruff</b> to stop the testing process early, and also allows scenarios like
       running all the static check tools before the package's unit or functional  tests  to  avoid  unnecessary
       failures on simple errors.

</pre><h4><b>TAGGING</b> <b>TOX</b> <b>TEST</b> <b>ENVIRONMENTS</b></h4><pre>
       The  <b>tox-stages</b>  tool expects to be able to invoke an installation of Tox that will load the <b>tox_trivtags</b>
       plugin module distributed as part of the <b>test-stages</b> library.  This  module  will  add  a  <u>tags</u>  list  of
       strings  to  the  definition  of each Tox environment; those tags can be specified in the <u>tox.ini</u> file as
       follows:

             <b>[testenv:format]</b>
             <b>skip_install</b> <b>=</b> <b>True</b>
             <b>tags</b> <b>=</b>
               <b>check</b>
               <b>format</b>
             <b>deps</b> <b>=</b>
               <b>...</b>

</pre><h4><b>SUBCOMMANDS</b></h4><pre>
   <b>available</b> <b>-</b> <b>can</b> <b>the</b> <b>tox-stages</b> <b>tool</b> <b>be</b> <b>run</b> <b>on</b> <b>this</b> <b>system</b>
       The <b>tox-stages</b> <b>available</b> subcommand exits with a code of zero (indicating success) if there is a suitable
       version of Tox installed in the same Python execution environment as the <b>tox-stages</b> tool itself.

   <b>run</b> <b>-</b> <b>run</b> <b>some</b> <b>Tox</b> <b>environments</b> <b>in</b> <b>stages</b>
       The <b>tox-stages</b> <b>run</b> subcommand starts the process of running Tox test environments, grouped in stages.  If
       any of the test environments run at some stage should  fail,  <b>tox-stages</b>  will  stop,  not  run  anything
       further, and exit with a non-zero exit code.

       The <b>run</b> subcommand accepts the following options:

       <b>--arg</b> <u>argument</u> | <b>-A</b> <u>argument</u>
               Pass  an  additional  command-line argument to each Tox invocation.  This option may be specified
               more than once, and the arguments will be passed in the order given.

       <b>--match-spec</b> <u>spec</u> | <b>-m</b> <u>spec</u>
               Pass an additional specification for Tox environments to satisfy, e.g.  “-m '@check'” to only run
               static checkers and not unit tests.

       <b>--parallel</b> <u>spec</u> | <b>-p</b> <u>spec</u>
               Specify which stages to run in parallel.  The <u>spec</u> parameter is a list of stage  indices  (1,  2,
               etc.) or ranges (4-6); the tests in the specified stages will be run in parallel, while the tests
               in  the  rest  of  the  stages will not.  By default, all tests are run in parallel.  The special
               values “” (an empty string), “0” (a single character, the digit zero), or “none” will be  treated
               as an empty set, and no tests will be run in parallel.

       The  positional arguments to the <b>run</b> subcommand are interpreted as test stage specifications as described
       in the parse-stages library's documentation.  If no stage specifications are given on the  command  line,
       <b>tox-stages</b> will read the <u>pyproject.toml</u> file in the same directory as the <u>tox.ini</u> file, and will look for
       a <u>tool.test-stages.stages</u> list of strings to use.

</pre><h4><b>FILES</b></h4><pre>
       If no stage specifications are given on the command line, <b>tox-stages</b> will read the <u>pyproject.toml</u> file in
       the  same  directory  as the <u>tox.ini</u> file, and will look for a <u>tool.test-stages.stages</u> list of strings to
       use.

</pre><h4><b>EXAMPLES</b></h4><pre>
       Run all the stages as defined in the <u>pyproject.toml</u>
        file's <u>tool.test-stages.stages</u> parameter:

             <b>tox-stages</b> <b>run</b>

       Group Tox environments into stages as defined in the <u>pyproject.toml</u> file, but  then  only  run  the  ones
       marked with the "check" tag that also have names containing the string "format":

             <b>tox-stages</b> <b>run</b> <b>-m</b> <b>'@check</b> <b>and</b> <b>format'</b>

       Run  a  specific  set  of  stages,  passing  <u>--</u> <u>-k</u> <u>slug</u> as additional Tox arguments so that e.g. a <b>pytest</b>
       environment that uses the Tox <u>{posargs}</u> variable may only run a selected subset of tests:

             <b>tox-stages</b> <b>-A</b> <b>--</b> <b>-A</b> <b>-k</b> <b>-A</b> <b>slug</b> <b>@check</b> <b>unit-tests</b>

       Execute a somewhat more complicated recipe:

       -  first, run all test environments with names containing "ruff" in parallel

       -  then, run the rest of the test environments marked with the "check"  tag,  but  not  marked  with  the
          "manual" tag, one by one

       -  then, run all test environments with names containing "unit" in parallel

       -  finally,  run  the  rest of the test environments marked with the "tests" tag, but not marked with the
          "manual" tag, in parallel

             <b>tox-stages</b> <b>-p</b> <b>1,3-4</b> <b>ruff</b> <b>'@check</b> <b>and</b> <b>not</b> <b>@manual'</b> <b>unit</b> <b>'@tests</b> <b>and</b> <b>not</b> <b>@manual'</b>

</pre><h4><b>AUTHORS</b></h4><pre>
       The <b>tox-stages</b> tool, along with its documentation, is developed as part of  the  <b>test-stages</b>  <b>library</b>  <b>by</b>
       Peter Pentchev ⟨<a href="mailto:roam@ringlet.net">roam@ringlet.net</a>⟩.

Debian                                            May 13, 2023                                     <u><a href="../man1/TOX-STAGES.1.html">TOX-STAGES</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>