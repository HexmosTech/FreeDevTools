<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>postmap - Postfix lookup table management</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/postfix">postfix_3.9.1-10ubuntu1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       postmap - Postfix lookup table management

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>postmap</b> [<b>-bfFhimnNoprsuUvw</b>] [<b>-c</b> <u>config_dir</u>] [<b>-d</b> <u>key</u>] [<b>-q</b> <u>key</u>]
               [<u>file_type</u>:]<u>file_name</u> ...

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The <b><a href="../man1/postmap.1.html">postmap</a></b>(1) command creates or queries one or more Postfix lookup tables, or updates an existing one.

       If  the  result files do not exist they will be created with the same group and other read permissions as
       their source file.

       While the table update is in progress, signal delivery is postponed, and an exclusive, advisory, lock  is
       placed on the entire table, in order to avoid surprises in spectator processes.

</pre><h4><b>INPUT</b> <b>FILE</b> <b>FORMAT</b></h4><pre>
       The format of a lookup table input file is as follows:

       •      A table entry has the form

                   <u>key</u> whitespace <u>value</u>

       •      Empty  lines  and  whitespace-only  lines  are  ignored,  as  are lines whose first non-whitespace
              character is a `#'.

       •      A logical line starts with non-whitespace text. A line that starts  with  whitespace  continues  a
              logical line.

       The <u>key</u> and <u>value</u> are processed as is, except that surrounding white space is stripped off. Whitespace in
       lookup  keys  is  supported in Postfix 3.2 and later, by surrounding the key with double quote characters
       `"'. Within the double quotes, double quote `"' and backslash `\' characters can be included  by  quoting
       them with a preceding backslash.

       When  the  <b>-F</b>  option  is  given,  the <u>value</u> must specify one or more filenames separated by comma and/or
       whitespace; <b><a href="../man1/postmap.1.html">postmap</a></b>(1) will concatenate the file content  (with  a  newline  character  inserted  between
       files) and will store the base64-encoded result instead of the <u>value</u>.

       When  the <u>key</u> specifies email address information, the localpart should be enclosed with double quotes if
       required by RFC 5322. For example, an address localpart that contains ";", or a localpart that starts  or
       ends with ".".

       By  default the lookup key is mapped to lowercase to make the lookups case insensitive; as of Postfix 2.3
       this case folding happens only with tables whose lookup keys are fixed-case strings such as btree:,  dbm:
       or hash:. With earlier versions, the lookup key is folded even with tables where a lookup field can match
       both  upper  and  lower  case  text, such as regexp: and pcre:. This resulted in loss of information with
       $<u>number</u> substitutions.

</pre><h4><b>COMMAND-LINE</b> <b>ARGUMENTS</b></h4><pre>
       <b>-b</b>     Enable message body query mode. When reading lookup keys from standard input with "<b>-q</b> <b>-</b>",  process
              the  input as if it is an email message in RFC 5322 format.  Each line of body content becomes one
              lookup key.

              By default, the <b>-b</b> option starts generating lookup keys at the first non-header  line,  and  stops
              when  the  end  of  the  message  is  reached.  To simulate <b><a href="../man5/body_checks.5.html">body_checks</a></b>(5) processing, enable MIME
              parsing with <b>-m</b>. With this, the <b>-b</b> option generates no body-style lookup keys for attachment  MIME
              headers and for attached message/* headers.

              NOTE:  with  "smtputf8_enable = yes", the <b>-b</b> option disables UTF-8 syntax checks on query keys and
              lookup results. Specify the <b>-U</b> option to force UTF-8 syntax checks anyway.

              This feature is available in Postfix version 2.6 and later.

       <b>-c</b> <u>config_dir</u>
              Read the <b>main.cf</b> configuration file in the named directory instead of  the  default  configuration
              directory.

       <b>-d</b> <u>key</u> Search  the specified maps for <u>key</u> and remove one entry per map.  The exit status is zero when the
              requested information was found.

              If a key value of <b>-</b> is specified, the program reads key values from the standard input stream. The
              exit status is zero when at least one of the requested keys was found.

       <b>-f</b>     Do not fold the lookup key to lower case while creating or querying a table.

              With Postfix version 2.3 and later, this option has  no  effect  for  regular  expression  tables.
              There, case folding is controlled by appending a flag to a pattern.

       <b>-F</b>     When  querying  a map, or listing a map, base64-decode each value. When creating a map from source
              file, process each value as a list of filenames, concatenate the content of those files, and store
              the base64-encoded result instead of the value (see INPUT FILE FORMAT for details).

              This feature is available in Postfix version 3.4 and later.

       <b>-h</b>     Enable message header query mode. When reading lookup  keys  from  standard  input  with  "<b>-q</b>  <b>-</b>",
              process  the  input  as  if  it  is an email message in RFC 5322 format.  Each logical header line
              becomes one lookup key. A multi-line header becomes one lookup  key  with  one  or  more  embedded
              newline characters.

              By  default,  the  <b>-h</b> option generates lookup keys until the first non-header line is reached.  To
              simulate <b><a href="../man5/header_checks.5.html">header_checks</a></b>(5) processing, enable MIME parsing with <b>-m</b>. With this, the <b>-h</b>  option  also
              generates header-style lookup keys for attachment MIME headers and for attached message/* headers.

              NOTE:  with  "smtputf8_enable  =  yes", the <b>-b</b> option option disables UTF-8 syntax checks on query
              keys and lookup results. Specify the <b>-U</b> option to force UTF-8 syntax checks anyway.

              This feature is available in Postfix version 2.6 and later.

       <b>-i</b>     Incremental mode. Read entries from standard input and do not truncate an  existing  database.  By
              default, <b><a href="../man1/postmap.1.html">postmap</a></b>(1) creates a new database from the entries in <b>file_name</b>.

       <b>-m</b>     Enable MIME parsing with "<b>-b</b>" and "<b>-h</b>".

              This feature is available in Postfix version 2.6 and later.

       <b>-N</b>     Include  the  terminating  null  character  that  terminates  lookup  keys and values. By default,
              <b><a href="../man1/postmap.1.html">postmap</a></b>(1) does whatever is the default for the host operating system.

       <b>-n</b>     Don't include the terminating null character that terminates lookup keys and values.  By  default,
              <b><a href="../man1/postmap.1.html">postmap</a></b>(1) does whatever is the default for the host operating system.

       <b>-o</b>     Do not release root privileges when processing a non-root input file. By default, <b><a href="../man1/postmap.1.html">postmap</a></b>(1) drops
              root privileges and runs as the source file owner instead.

       <b>-p</b>     Do not inherit the file access permissions from the input file when creating a new file.  Instead,
              create a new file with default access permissions (mode 0644).

       <b>-q</b> <u>key</u> Search  the  specified maps for <u>key</u> and write the first value found to the standard output stream.
              The exit status is zero when the requested information was found.

              Note: this performs a single query with the key as specified, and does not make iterative  queries
              with  substrings of the key as described for <a href="../man5/access.5.html">access</a>(5), <a href="../man5/canonical.5.html">canonical</a>(5), <a href="../man5/transport.5.html">transport</a>(5), <a href="../man5/virtual.5.html">virtual</a>(5) and
              other Postfix table-driven features.

              If a key value of <b>-</b> is specified, the program reads key values from the standard input stream  and
              writes  one  line of <u>key</u> <u>value</u> output for each key that was found. The exit status is zero when at
              least one of the requested keys was found.

       <b>-r</b>     When updating a table, do not complain about attempts to update existing entries, and  make  those
              updates anyway.

       <b>-s</b>     Retrieve  all  database  elements,  and  write  one line of <u>key</u> <u>value</u> output for each element. The
              elements are printed in database order, which is not necessarily the same as  the  original  input
              order.

              This  feature is available in Postfix version 2.2 and later, and is not available for all database
              types.

       <b>-u</b>     Disable UTF-8 support. UTF-8 support is enabled  by  default  when  "smtputf8_enable  =  yes".  It
              requires that keys and values are valid UTF-8 strings.

       <b>-U</b>     With "smtputf8_enable = yes", force UTF-8 syntax checks with the <b>-b</b> and <b>-h</b> options.

       <b>-v</b>     Enable  verbose logging for debugging purposes. Multiple <b>-v</b> options make the software increasingly
              verbose.

       <b>-w</b>     When updating a table, do not complain about attempts to update existing entries, and ignore those
              attempts.

       Arguments:

       <u>file_type</u>
              The database type. To find out what types are supported, use the "<b>postconf</b> <b>-m</b>" command.

              The <b><a href="../man1/postmap.1.html">postmap</a></b>(1) command can query any supported file type, but it can  create  only  the  following
              file types:

              <b>btree</b>  The  output  file  is  a btree file, named <u>file_name</u><b>.db</b>.  This is available on systems with
                     support for <b>db</b> databases.

              <b>cdb</b>    The output consists of one file, named <u>file_name</u><b>.cdb</b>.  This is available  on  systems  with
                     support for <b>cdb</b> databases.

              <b>dbm</b>    The output consists of two files, named <u>file_name</u><b>.pag</b> and <u>file_name</u><b>.dir</b>.  This is available
                     on systems with support for <b>dbm</b> databases.

              <b>fail</b>   A  table  that reliably fails all requests. The lookup table name is used for logging only.
                     This table exists to simplify Postfix error tests.

              <b>hash</b>   The output file is a hashed file, named <u>file_name</u><b>.db</b>.  This is available  on  systems  with
                     support for <b>db</b> databases.

              <b>lmdb</b>   The  output  is  a btree-based file, named <u>file_name</u><b>.lmdb</b>.  <b>lmdb</b> supports concurrent writes
                     and reads from different processes, unlike other  supported  file-based  tables.   This  is
                     available on systems with support for <b>lmdb</b> databases.

              <b>sdbm</b>   The output consists of two files, named <u>file_name</u><b>.pag</b> and <u>file_name</u><b>.dir</b>.  This is available
                     on systems with support for <b>sdbm</b> databases.

              When  no  <u>file_type</u>  is  specified,  the  software  uses  the  database  type  specified  via  the
              <b>default_database_type</b> configuration parameter.

       <u>file_name</u>
              The name of the lookup table source file when rebuilding a database.

</pre><h4><b>DIAGNOSTICS</b></h4><pre>
       Problems are logged to the standard error stream and to <b><a href="../man8/syslogd.8.html">syslogd</a></b>(8) or <b><a href="../man8/postlogd.8.html">postlogd</a></b>(8).  No output means  that
       no problems were detected. Duplicate entries are skipped and are flagged with a warning.

       <b><a href="../man1/postmap.1.html">postmap</a></b>(1) terminates with zero exit status in case of success (including successful "<b>postmap</b> <b>-q</b>" lookup)
       and terminates with non-zero exit status in case of failure.

</pre><h4><b>ENVIRONMENT</b></h4><pre>
       <b>MAIL_CONFIG</b>
              Directory with Postfix configuration files.

       <b>MAIL_VERBOSE</b>
              Enable verbose logging for debugging purposes.

</pre><h4><b>CONFIGURATION</b> <b>PARAMETERS</b></h4><pre>
       The following <b>main.cf</b> parameters are especially relevant to this program.  The text below provides only a
       parameter summary. See <b><a href="../man5/postconf.5.html">postconf</a></b>(5) for more details including examples.

       <b>berkeley_db_create_buffer_size</b> <b>(16777216)</b>
              The per-table I/O buffer size for programs that create Berkeley DB hash or btree tables.

       <b>berkeley_db_read_buffer_size</b> <b>(131072)</b>
              The per-table I/O buffer size for programs that read Berkeley DB hash or btree tables.

       <b>config_directory</b> <b>(see</b> <b>'postconf</b> <b>-d'</b> <b>output)</b>
              The default location of the Postfix main.cf and master.cf configuration files.

       <b>default_database_type</b> <b>(see</b> <b>'postconf</b> <b>-d'</b> <b>output)</b>
              The default database type for use in <b><a href="../man1/newaliases.1.html">newaliases</a></b>(1), <b><a href="../man1/postalias.1.html">postalias</a></b>(1) and <b><a href="../man1/postmap.1.html">postmap</a></b>(1) commands.

       <b>import_environment</b> <b>(see</b> <b>'postconf</b> <b>-d'</b> <b>output)</b>
              The list of environment variables that a privileged Postfix process will import from a non-Postfix
              parent process, or name=value environment overrides.

       <b>smtputf8_enable</b> <b>(yes)</b>
              Enable  preliminary  SMTPUTF8  support  for the protocols described in RFC 6531, RFC 6532, and RFC
              6533.

       <b>syslog_facility</b> <b>(mail)</b>
              The syslog facility of Postfix logging.

       <b>syslog_name</b> <b>(see</b> <b>'postconf</b> <b>-d'</b> <b>output)</b>
              A prefix that is prepended to the process name in syslog records, so that,  for  example,  "smtpd"
              becomes "prefix/smtpd".

       Available in Postfix 2.11 and later:

       <b>lmdb_map_size</b> <b>(16777216)</b>
              The initial OpenLDAP LMDB database size limit in bytes.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <a href="../man1/postalias.1.html">postalias</a>(1), create/update/query alias database
       <a href="../man1/postconf.1.html">postconf</a>(1), supported database types
       <a href="../man5/postconf.5.html">postconf</a>(5), configuration parameters
       <a href="../man8/postlogd.8.html">postlogd</a>(8), Postfix logging
       <a href="../man8/syslogd.8.html">syslogd</a>(8), system logging

</pre><h4><b>README</b> <b>FILES</b></h4><pre>
       Use "<b>postconf</b> <b>readme_directory</b>" or "<b>postconf</b> <b>html_directory</b>" to locate this information.
       DATABASE_README, Postfix lookup table overview

</pre><h4><b>LICENSE</b></h4><pre>
       The Secure Mailer license must be distributed with this software.

</pre><h4><b>AUTHOR(S)</b></h4><pre>
       Wietse Venema
       IBM T.J. Watson Research
       P.O. Box 704
       Yorktown Heights, NY 10598, USA

       Wietse Venema
       Google, Inc.
       111 8th Avenue
       New York, NY 10011, USA

                                                                                                      <u><a href="../man1/POSTMAP.1.html">POSTMAP</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>