<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>stilts-tapskymatch - Crossmatches table on sky position against TAP table</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/stilts">stilts_3.5.1-2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       stilts-tapskymatch - Crossmatches table on sky position against TAP table

</pre><h4><b>SYNOPSIS</b></h4><pre>

       <b>stilts</b> <b>tapskymatch</b> [ifmt=<u>&lt;in-format&gt;</u>] [istream=<u>true|false</u>] [in=<u>&lt;table&gt;</u>] [icmd=<u>&lt;cmds&gt;</u>] [ocmd=<u>&lt;cmds&gt;</u>]
                          [omode=<u>out|meta|stats|count|checksum|cgi|discard|topcat|samp|tosql|gui</u>] [out=<u>&lt;out-</u>
                          <u>table&gt;</u>] [ofmt=<u>&lt;out-format&gt;</u>] [inlon=<u>&lt;expr/deg&gt;</u>] [inlat=<u>&lt;expr/deg&gt;</u>] [tapurl=<u>&lt;url-value&gt;</u>]
                          [interface=<u>tap1.0|tap1.1|cap</u>] [auth=<u>true|false</u>] [taptable=<u>&lt;name&gt;</u>] [taplon=<u>&lt;column&gt;</u>]
                          [taplat=<u>&lt;column&gt;</u>] [tapcols=<u>&lt;colname,...&gt;</u>] [sr=<u>&lt;expr/deg&gt;</u>] [find=<u>all|best|each|each-</u>
                          <u>dist</u>] [blocksize=<u>&lt;int-value&gt;</u>] [maxrec=<u>&lt;int-value&gt;</u>] [sync=<u>true|false</u>]
                          [blockmaxrec=<u>&lt;nrow&gt;</u>] [compress=<u>true|false</u>] [fixcols=<u>none|dups|all</u>] [suffixin=<u>&lt;label&gt;</u>]
                          [suffixremote=<u>&lt;label&gt;</u>]

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <u>tapskymatch</u>  allows you to perform a positional crossmatch of a local table with one held in a remote TAP
       service, as long as that TAP supports upload queries. This task does three main jobs. First, it  prepares
       the  ADQL queries and TAP negotiations for you so that you don't need to remember the syntax for perform‐
       ing positional crossmatches against a TAP service. Second, it organises data transfer so that only  those
       columns  required  (basically  the  positional  ones) are transmitted to and from the service, to save on
       bandwidth. And third it divides the job up into chunks, so that the TAP service only  has  to  perform  a
       manageable-sized  query at a time. If the job is large this chunking can be useful to monitor progress of
       the job, and it also allows you to perform a match which would otherwise hit the upload or output  limits
       imposed by the service.

       The  positional  match may be done in any spherical coordinate system, it's up to the user to ensure that
       the same coordinates are provided for the local and remote tables.

       Note that <u>cdsskymatch</u> provides similar functionality by accessing a different external service, which  is
       usually  much  faster; if the table you wish to match is part of the VizieR database, you may wish to use
       that command instead.

</pre><h4><b>OPTIONS</b></h4><pre>
       <b>ifmt=</b><u>&lt;in-format&gt;</u>
              Specifies the format of the input table as specified by parameter <u>in</u>. The known formats are listed
              in SUN/256. This flag can be used if you know what format your table is in. If it has the  special
              value  <u>(auto)</u>  (the default), then an attempt will be made to detect the format of the table auto‐
              matically. This cannot always be done correctly however, in which case the program will exit  with
              an  error  explaining which formats were attempted. This parameter is ignored for scheme-specified
              tables.

       <b>istream=</b><u>true|false</u>
              If set true, the input table specified by the <u>in</u> parameter will be read as a stream. It is  neces‐
              sary  to give the <u>ifmt</u> parameter in this case. Depending on the required operations and processing
              mode, this may cause the read to fail (sometimes it is necessary  to  read  the  table  more  than
              once).  It is not normally necessary to set this flag; in most cases the data will be streamed au‐
              tomatically if that is the best thing to do. However it can sometimes result in less resource  us‐
              age  when  processing  large files in certain formats (such as VOTable). This parameter is ignored
              for scheme-specified tables.

       <b>in=</b><u>&lt;table&gt;</u>
              The location of the input table. This may take one of the following forms:

                * A filename.

                * A URL.

                * The special value "<u>-</u>", meaning standard input. In this case the input format must be given ex‐
                  plicitly using the <u>ifmt</u> parameter. Note that not all formats can be streamed in this way.

                * A scheme specification of the form <u>:&lt;scheme-name&gt;:&lt;scheme-args&gt;</u>.

                * A system command line with either a "<u>&lt;</u>" character at the start, or a "<u>|</u>" character at the  end
                  ("<u>&lt;syscmd</u>" or "<u>syscmd|</u>"). This executes the given pipeline and reads from its standard output.
                  This will probably only work on unix-like systems.
               In  any case, compressed data in one of the supported compression formats (gzip, Unix compress or
              bzip2) will be decompressed transparently.

       <b>icmd=</b><u>&lt;cmds&gt;</u>
              Specifies processing to be performed on the input table as specified by parameter <u>in</u>,  before  any
              other  processing  has  taken place. The value of this parameter is one or more of the filter com‐
              mands described in SUN/256. If more than one is given, they must be separated by semicolon charac‐
              ters (";"). This parameter can be repeated multiple times on the same command line to build  up  a
              list  of  processing  steps.  The  sequence  of  commands given in this way defines the processing
              pipeline which is performed on the table.

              Commands may alternatively be supplied in an external file, by  using  the  indirection  character
              '<u>@</u>'. Thus a value of "<u>@filename</u>" causes the file <u>filename</u> to be read for a list of filter commands
              to execute. The commands in the file may be separated by newline characters and/or semicolons, and
              lines which are blank or which start with a '<u>#</u>' character are ignored. A backslash character '<u>\fR'</u>
              <u>at</u> <u>the</u> <u>end</u> <u>of</u> <u>a</u> <u>line</u> <u>joins</u> <u>it</u> <u>with</u> <u>the</u> <u>following</u> <u>line.</u>

       <b>ocmd=</b><u>&lt;cmds&gt;</u>
              Specifies  processing  to  be  performed on the output table, after all other processing has taken
              place. The value of this parameter is one or more of the filter commands described in SUN/256.  If
              more  than  one is given, they must be separated by semicolon characters (";"). This parameter can
              be repeated multiple times on the same command line to build up a list of  processing  steps.  The
              sequence  of  commands given in this way defines the processing pipeline which is performed on the
              table.

              Commands may alternatively be supplied in an external file, by  using  the  indirection  character
              '<u>@</u>'. Thus a value of "<u>@filename</u>" causes the file <u>filename</u> to be read for a list of filter commands
              to execute. The commands in the file may be separated by newline characters and/or semicolons, and
              lines which are blank or which start with a '<u>#</u>' character are ignored. A backslash character '<u>\fR'</u>
              <u>at</u> <u>the</u> <u>end</u> <u>of</u> <u>a</u> <u>line</u> <u>joins</u> <u>it</u> <u>with</u> <u>the</u> <u>following</u> <u>line.</u>

       <b>omode=</b><u>out|meta|stats|count|checksum|cgi|discard|topcat|samp|tosql|gui</u>
              The  mode  in which the result table will be output. The default mode is <u>out</u>, which means that the
              result will be written as a new table to disk or elsewhere, as determined by the <u>out</u> and <u>ofmt</u>  pa‐
              rameters. However, there are other possibilities, which correspond to uses to which a table can be
              put other than outputting it, such as displaying metadata, calculating statistics, or populating a
              table  in  an SQL database. For some values of this parameter, additional parameters (<u>&lt;mode-args&gt;</u>)
              are required to determine the exact behaviour.

              Possible values are

                * <u>out</u>

                * <u>meta</u>

                * <u>stats</u>

                * <u>count</u>

                * <u>checksum</u>

                * <u>cgi</u>

                * <u>discard</u>

                * <u>topcat</u>

                * <u>samp</u>

                * <u>tosql</u>

                * <u>gui</u>
               Use the <u>help=omode</u> flag or see SUN/256 for more information.

       <b>out=</b><u>&lt;out-table&gt;</u>
              The location of the output table. This is usually a filename to write to. If it is  equal  to  the
              special value "-" (the default) the output table will be written to standard output.

              This parameter must only be given if <u>omode</u> has its default value of "<u>out</u>".

       <b>ofmt=</b><u>&lt;out-format&gt;</u>
              Specifies  the  format  in  which  the  output table will be written (one of the ones in SUN/256 -
              matching is case-insensitive and you can use just the first few letters). If it  has  the  special
              value  "<u>(auto)</u>" (the default), then the output filename will be examined to try to guess what sort
              of file is required usually by looking at the extension. If it's not  obvious  from  the  filename
              what output format is intended, an error will result.

              This parameter must only be given if <u>omode</u> has its default value of "<u>out</u>".

       <b>inlon=</b><u>&lt;expr/deg&gt;</u>
              Longitude  in degrees for the position of each row in the input table. This may simply be a column
              name, or it may be an algebraic expression as explained in SUN/256.  The  coordinate  system  must
              match that used for the coordinates in the remote table.

       <b>inlat=</b><u>&lt;expr/deg&gt;</u>
              Longitude  in degrees for the position of each row in the input table. This may simply be a column
              name, or it may be an algebraic expression as explained in SUN/256.  The  coordinate  system  must
              match that used for the coordinates in the remote table.

       <b>tapurl=</b><u>&lt;url-value&gt;</u>
              The  base  URL  of  a  Table  Access  Protocol  service.  This  is the bare URL without a trailing
              "/[a]sync".

              In the usual case, the default values of the various endpoints (sync and async  query  submission,
              tables  metadata, service-provided examples etc) use this URL as a parent and append standard sub-
              paths.

              In some cases however, determination of the endpoints is more complicated, as  determined  by  the
              <u>interface</u>  parameter  which  may  cause  endpoints  to  be  read from the capabilities document at
              <u>tapurl/capabilities</u>, and by other endpoint-specific parameters (<u>syncurl</u>, <u>asyncurl</u>, <u>tablesurl</u>,  <u>ca‐</u>
              <u>pabilitiesurl</u>, <u>availabilityurl</u>, <u>examplesurl</u>) for fine tuning.

       <b>interface=</b><u>tap1.0|tap1.1|cap</u>
              Defines how the service endpoints and the version of the TAP protocol to use for queries is deter‐
              mined. This may take one of the following (case-insensitive) values:

                * <u>TAP1.0</u>: The standard TAP endpoints are used, without examining the service's capabilities doc‐
                  ument. The service is queried using version 1.0 of the TAP protocol.

                * <u>TAP1.1</u>: The standard TAP endpoints are used, without examining the service's capabilities doc‐
                  ument. The service is queried using version 1.1 of the TAP protocol.

                * <u>cap</u>: The service's capabilities document is examined, and the endpoints listed there are used.

              The  capabilities  document,  if used, is read from <u>tapurl</u>/capabilities unless the <u>capabilitiesurl</u>
              parameter is defined, in which case that is used.

              The baseline value of all the TAP service endpoints (<u>sync</u>, <u>async</u>, <u>tables</u>, <u>capabilities</u>,  <u>examples</u>)
              are determined by this parameter, but each of those endpoint values may be overridden individually
              by  other endpoint-specific parameters (<u>syncurl</u>, <u>asyncurl</u>, <u>tablesurl</u>, <u>capabilitiesurl</u>, <u>availabili‐</u>
              <u>tyurl</u>, <u>examplesurl</u>)

              For default (unauthenticated) access, the default value is usually suitable.

       <b>auth=</b><u>true|false</u>
              If true, then an attempt will be made to authenticate with the TAP service even if anonymous oper‐
              ation is permitted. If the service offers authentication, you will be asked for credentials.

              To use this option in non-interactive  contexts,  you  may  want  to  use  the  <u>auth.username</u>  and
              <u>auth.password</u> system properties.

       <b>taptable=</b><u>&lt;name&gt;</u>
              Name of the table in the given TAP service against which the matching will be performed.

       <b>taplon=</b><u>&lt;column&gt;</u>
              Longitude  in degrees for the position of each row in the remote table. This is an ADQL expression
              interpreted within the TAP service, typically just a column name. The coordinate system must match
              that used for the input table.

       <b>taplat=</b><u>&lt;column&gt;</u>
              Latitude in degrees for the position of each row in the remote table. This is an  ADQL  expression
              interpreted within the TAP service, typically just a column name. The coordinate system must match
              that used for the input table.

       <b>tapcols=</b><u>&lt;colname,...&gt;</u>
              Comma-separated  list  of  column names to retrieve from the remote table. If no value is supplied
              (the default), all columns from the remote table will be returned.

       <b>sr=</b><u>&lt;expr/deg&gt;</u>
              Maximum distance in degrees from the local table (lat,lon) position at which counterparts from the
              remote table will be identified. This is an ADQL expression interpreted within the TAP service, so
              it may be a constant value or may involve columns in the remote table.

       <b>find=</b><u>all|best|each|each-dist</u>
              Determines which pair matches are included in the result.

                * <u>all</u>: All matches

                * <u>best</u>: Matched rows, best remote row for each input row

                * <u>each</u>: One row per input row, contains best remote match or blank

                * <u>each-dist</u>: One row per input row, column giving distance only for best match
               Note only the <u>all</u> mode is symmetric between the two tables.

       <b>blocksize=</b><u>&lt;int-value&gt;</u>
              The number of rows uploaded in each TAP query. TAP services may have limits on the number of  rows
              in a table uploaded for matching. This command can therefore break up input tables into blocks and
              make  a number of individual TAP queries to generate the result. This parameter controls the maxi‐
              mum number of rows uploaded in each individual request. For an input table with  fewer  rows  than
              this value, the whole thing is done as a single query.

       <b>maxrec=</b><u>&lt;int-value&gt;</u>
              Limit  to the number of rows resulting from this operation. If the value is negative (the default)
              no limit is imposed. Note however that there can be truncation of the  result  if  the  number  of
              records returned from a single chunk exceeds limits imposed by the service.

       <b>sync=</b><u>true|false</u>
              Determines  whether  the TAP queries are submitted in synchronous or asynchronous mode. Since this
              command uses chunking to keep requests to a reasonable size, hopefully requests will not take  too
              long to execute, therefore the default is synchronous (true).

       <b>blockmaxrec=</b><u>&lt;nrow&gt;</u>
              Sets  the  MAXREC  parameter passed to the TAP service for each uploaded block. This allows you to
              request that the service overrides its default limit for the number of rows output from  a  single
              query.  The service may still impose some "hard" limit beyond which the output row count cannot be
              increased.

              Note this differs from the <u>maxrec</u> parameter, which gives the maximum total number of  rows  to  be
              returned from this command.

       <b>compress=</b><u>true|false</u>
              If  true,  the service is requested to provide HTTP-level compression for the response stream (Ac‐
              cept-Encoding header is set to "<u>gzip</u>", see RFC 2616). This does  not  guarantee  that  compression
              will  happen  but if the service honours this request it may result in a smaller amount of network
              traffic at the expense of more processing on the server and client.

       <b>fixcols=</b><u>none|dups|all</u>
              Determines how input columns are renamed before use in the output table. The choices are:

                * <u>none</u>: columns are not renamed

                * <u>dups</u>: columns which would otherwise have duplicate names in the output will be renamed to  in‐
                  dicate which table they came from

                * <u>all</u>: all columns will be renamed to indicate which table they came from
               If columns are renamed, the new ones are determined by <u>suffix*</u> parameters.

       <b>suffixin=</b><u>&lt;label&gt;</u>
              If  the  <u>fixcols</u>  parameter is set so that input columns are renamed for insertion into the output
              table, this parameter determines how the renaming is done. It gives a suffix which is appended  to
              all renamed columns from the input table.

       <b>suffixremote=</b><u>&lt;label&gt;</u>
              If  the  <u>fixcols</u>  parameter is set so that input columns are renamed for insertion into the output
              table, this parameter determines how the renaming is done. It gives a suffix which is appended  to
              all renamed columns from the TAP result table.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man1/stilts.1.html">stilts</a></b>(1)

       If the package stilts-doc is installed, the full documentation <b>SUN/256</b> is available in HTML format:
       file:///usr/share/doc/stilts/sun256/index.html

</pre><h4><b>VERSION</b></h4><pre>
       STILTS version 3.5.1-debian

       This  is the Debian version of Stilts, which lack the support of some file formats and network protocols.
       For differences see
       file:///usr/share/doc/stilts/README.Debian

</pre><h4><b>AUTHOR</b></h4><pre>
       Mark Taylor (Bristol University)

                                                    Mar 2017                               <u><a href="../man1/STILTS-TAPSKYMATCH.1.html">STILTS-TAPSKYMATCH</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>