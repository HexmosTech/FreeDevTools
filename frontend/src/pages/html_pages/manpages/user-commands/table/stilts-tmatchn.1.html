<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>stilts-tmatchn - Crossmatches multiple tables using flexible criteria</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/stilts">stilts_3.5.1-2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       stilts-tmatchn - Crossmatches multiple tables using flexible criteria

</pre><h4><b>SYNOPSIS</b></h4><pre>

       <b>stilts</b> <b>tmatchn</b> [nin=<u>&lt;count&gt;</u>] [ifmtN=<u>&lt;in-format&gt;</u>] [inN=<u>&lt;tableN&gt;</u>] [icmdN=<u>&lt;cmds&gt;</u>] [ocmd=<u>&lt;cmds&gt;</u>]
                      [omode=<u>out|meta|stats|count|checksum|cgi|discard|topcat|samp|tosql|gui</u>] [out=<u>&lt;out-table&gt;</u>]
                      [ofmt=<u>&lt;out-format&gt;</u>] [multimode=<u>pairs|group</u>] [iref=<u>&lt;table-index&gt;</u>] [matcher=<u>&lt;matcher-name&gt;</u>]
                      [params=<u>&lt;match-params&gt;</u>] [tuning=<u>&lt;tuning-params&gt;</u>] [valuesN=<u>&lt;expr-list&gt;</u>]
                      [joinN=<u>default|match|nomatch|always</u>] [fixcols=<u>none|dups|all</u>] [suffixN=<u>&lt;label&gt;</u>]
                      [progress=<u>none|log|time|profile</u>] [runner=<u>parallel|parallel&lt;n&gt;|parallel-</u>
                      <u>all|sequential|classic|partest</u>]

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <u>tmatchn</u>  performs  efficient and flexible crossmatching between multiple tables. It can match rows on the
       basis of their relative position in the sky, or alternatively using many other criteria such  as  separa‐
       tion in in some isotropic or anisotropic Cartesian space, identity of a key value, or some combination of
       these; the full range of match criteria is dicussed in SUN/256.

       Since the match criteria define what counts as a match between two objects, it is not immediately obvious
       what  is  meant  by  a multi-table match. In fact the command can work in one of two distinct modes, con‐
       trolled by the <u>multimode</u> parameter. In <u>pairs</u> mode, one table (by default the first input table) is desig‐
       nated the reference table, and pair matches between each of the other tables and that one are identified.
       In <u>group</u> mode groups of objects from all the input tables are identified, as discussed in  SUN/256.  Cur‐
       rently,  in  both  cases an output matched row cannot contain more than one object from each input table.
       Options for output of multiple rows per input table per match may be forthcoming in  future  releases  if
       there is demand.

       <u>tmatchn</u>  is intended for use with more than two input tables - see <u>tmatch1</u> and <u>tmatch2</u> for 1- and 2-table
       crossmatching respectively.

</pre><h4><b>OPTIONS</b></h4><pre>
       <b>nin=</b><u>&lt;count&gt;</u>
              The number of input tables for this task. For each of the input tables N there will be  associated
              parameters <u>ifmtN</u>, <u>inN</u> and <u>icmdN</u>.

       <b>ifmtN=</b><u>&lt;in-format&gt;</u>
              Specifies the format of input table #N as specified by parameter <u>inN</u>. The known formats are listed
              in  SUN/256. This flag can be used if you know what format your table is in. If it has the special
              value <u>(auto)</u> (the default), then an attempt will be made to detect the format of the  table  auto‐
              matically.  This cannot always be done correctly however, in which case the program will exit with
              an error explaining which formats were attempted. This parameter is ignored  for  scheme-specified
              tables.

       <b>inN=</b><u>&lt;tableN&gt;</u>
              The location of input table #N. This may take one of the following forms:

                * A filename.

                * A URL.

                * The special value "<u>-</u>", meaning standard input. In this case the input format must be given ex‐
                  plicitly using the <u>ifmtN</u> parameter. Note that not all formats can be streamed in this way.

                * A scheme specification of the form <u>:&lt;scheme-name&gt;:&lt;scheme-args&gt;</u>.

                * A  system command line with either a "<u>&lt;</u>" character at the start, or a "<u>|</u>" character at the end
                  ("<u>&lt;syscmd</u>" or "<u>syscmd|</u>"). This executes the given pipeline and reads from its standard output.
                  This will probably only work on unix-like systems.
               In any case, compressed data in one of the supported compression formats (gzip, Unix compress  or
              bzip2) will be decompressed transparently.

       <b>icmdN=</b><u>&lt;cmds&gt;</u>
              Specifies  processing  to be performed on input table #N as specified by parameter <u>inN</u>, before any
              other processing has taken place. The value of this parameter is one or more of  the  filter  com‐
              mands described in SUN/256. If more than one is given, they must be separated by semicolon charac‐
              ters  (";").  This parameter can be repeated multiple times on the same command line to build up a
              list of processing steps. The sequence of commands  given  in  this  way  defines  the  processing
              pipeline which is performed on the table.

              Commands  may  alternatively  be  supplied in an external file, by using the indirection character
              '<u>@</u>'. Thus a value of "<u>@filename</u>" causes the file <u>filename</u> to be read for a list of filter commands
              to execute. The commands in the file may be separated by newline characters and/or semicolons, and
              lines which are blank or which start with a '<u>#</u>' character are ignored. A backslash character '<u>\fR'</u>
              <u>at</u> <u>the</u> <u>end</u> <u>of</u> <u>a</u> <u>line</u> <u>joins</u> <u>it</u> <u>with</u> <u>the</u> <u>following</u> <u>line.</u>

       <b>ocmd=</b><u>&lt;cmds&gt;</u>
              Specifies processing to be performed on the output table, after all  other  processing  has  taken
              place.  The value of this parameter is one or more of the filter commands described in SUN/256. If
              more than one is given, they must be separated by semicolon characters (";"). This  parameter  can
              be  repeated  multiple  times on the same command line to build up a list of processing steps. The
              sequence of commands given in this way defines the processing pipeline which is performed  on  the
              table.

              Commands  may  alternatively  be  supplied in an external file, by using the indirection character
              '<u>@</u>'. Thus a value of "<u>@filename</u>" causes the file <u>filename</u> to be read for a list of filter commands
              to execute. The commands in the file may be separated by newline characters and/or semicolons, and
              lines which are blank or which start with a '<u>#</u>' character are ignored. A backslash character '<u>\fR'</u>
              <u>at</u> <u>the</u> <u>end</u> <u>of</u> <u>a</u> <u>line</u> <u>joins</u> <u>it</u> <u>with</u> <u>the</u> <u>following</u> <u>line.</u>

       <b>omode=</b><u>out|meta|stats|count|checksum|cgi|discard|topcat|samp|tosql|gui</u>
              The mode in which the result table will be output. The default mode is <u>out</u>, which means  that  the
              result  will be written as a new table to disk or elsewhere, as determined by the <u>out</u> and <u>ofmt</u> pa‐
              rameters. However, there are other possibilities, which correspond to uses to which a table can be
              put other than outputting it, such as displaying metadata, calculating statistics, or populating a
              table in an SQL database. For some values of this parameter, additional  parameters  (<u>&lt;mode-args&gt;</u>)
              are required to determine the exact behaviour.

              Possible values are

                * <u>out</u>

                * <u>meta</u>

                * <u>stats</u>

                * <u>count</u>

                * <u>checksum</u>

                * <u>cgi</u>

                * <u>discard</u>

                * <u>topcat</u>

                * <u>samp</u>

                * <u>tosql</u>

                * <u>gui</u>
               Use the <u>help=omode</u> flag or see SUN/256 for more information.

       <b>out=</b><u>&lt;out-table&gt;</u>
              The  location  of  the output table. This is usually a filename to write to. If it is equal to the
              special value "-" (the default) the output table will be written to standard output.

              This parameter must only be given if <u>omode</u> has its default value of "<u>out</u>".

       <b>ofmt=</b><u>&lt;out-format&gt;</u>
              Specifies the format in which the output table will be written (one  of  the  ones  in  SUN/256  -
              matching  is  case-insensitive  and you can use just the first few letters). If it has the special
              value "<u>(auto)</u>" (the default), then the output filename will be examined to try to guess what  sort
              of  file  is  required  usually by looking at the extension. If it's not obvious from the filename
              what output format is intended, an error will result.

              This parameter must only be given if <u>omode</u> has its default value of "<u>out</u>".

       <b>multimode=</b><u>pairs|group</u>
              Defines what is meant by a multi-table match. There are two possibilities:

                * <u>pairs</u>: Each output row corresponds to a single row of the reference table (see parameter <u>iref</u>)
                  and contains entries from other tables which are pair matches to that. If  a  reference  table
                  row matches multiple rows from one of the other tables, only the best one is included.

                * <u>group</u>: Each output row corresponds to a group of entries from the input tables which are mutu‐
                  ally  linked by pair matches between them. This means that although you can get from any entry
                  to any other entry via one or more pair matches, there is no guarantee that  any  entry  is  a
                  pair  match  with  any  other entry. No table has privileged status in this case. If there are
                  multiple entries from a given table in the match group, an arbitrary one is chosen for  inclu‐
                  sion (there is no unique way to select the best). See SUN/256 for more discussion.
               Note that which rows actually appear in the output is also influenced by the <u>joinN</u> parameter.

       <b>iref=</b><u>&lt;table-index&gt;</u>
              If <u>multimode</u>=<u>pairs</u> this parameter gives the index of the table in the input table list which is to
              serve  as  the  reference  table (the one which must be matched by other tables). Ignored in other
              modes.

              Row ordering in the output table is usually tidiest if the default setting of 1 is used  (i.e.  if
              the first input table is used as the reference table).

       <b>matcher=</b><u>&lt;matcher-name&gt;</u>
              Defines  the  nature  of the matching that will be performed. Depending on the name supplied, this
              may be positional matching using celestial or Cartesian coordinates, exact matching on  the  value
              of  a  string column, or other things. A list and explanation of the available matching algorithms
              is given in SUN/256. The value supplied for this parameter determines the meanings of  the  values
              required by the <u>params</u>, <u>values*</u> and <u>tuning</u> parameter(s).

       <b>params=</b><u>&lt;match-params&gt;</u>
              Determines  the  parameters  of this match. This is typically one or more tolerances such as error
              radii. It may contain zero or more values; the values that are required depend on the  match  type
              selected  by  the  <u>matcher</u>  parameter.  If  it contains multiple values, they must be separated by
              spaces; values which contain a space can be 'quoted' or "quoted".

       <b>tuning=</b><u>&lt;tuning-params&gt;</u>
              Tuning values for the matching process, if appropriate. It may contain zero or  more  values;  the
              values  that  are permitted depend on the match type selected by the <u>matcher</u> parameter. If it con‐
              tains multiple values, they must be separated by spaces; values  which  contain  a  space  can  be
              'quoted'  or  "quoted". If this optional parameter is not supplied, sensible defaults will be cho‐
              sen.

       <b>valuesN=</b><u>&lt;expr-list&gt;</u>
              Defines the values from table N which are used to determine whether a match  has  occurred.  These
              will  typically  be  coordinate values such as RA and Dec and perhaps some per-row error values as
              well, though exactly what values are required is determined by the kind of match as determined  by
              <u>matcher</u>.  Depending  on the kind of match, the number and type of the values required will be dif‐
              ferent. Multiple values should be separated by whitespace; if whitespace occurs  within  a  single
              value  it  must  be 'quoted' or "quoted". Elements of the expression list are commonly just column
              names, but may be algebraic expressions calculated from zero  or  more  columns  as  explained  in
              SUN/256.

       <b>joinN=</b><u>default|match|nomatch|always</u>
              Determines  which rows from input table N are included in the output table. The matching algorithm
              determines which of the rows in each of the input tables correspond to which rows in the other in‐
              put tables, and this parameter determines what to do with that information.

              The default behaviour is that a row will appear in the output table if it represents  a  match  of
              rows  from two or more of the input tables. This can be altered on a per-input-table basis however
              by choosing one of the non-default options below:

                * <u>match</u>: Rows are included only if they contain an entry from input table N.

                * <u>nomatch</u>: Rows are included only if they do not contain an entry from input table N.

                * <u>always</u>: Rows are included if they contain an entry from input table N (overrides any match and
                  nomatch settings of other tables).

                * <u>default</u>: Input table N has no special effect on whether rows are included.

       <b>fixcols=</b><u>none|dups|all</u>
              Determines how input columns are renamed before use in the output table. The choices are:

                * <u>none</u>: columns are not renamed

                * <u>dups</u>: columns which would otherwise have duplicate names in the output will be renamed to  in‐
                  dicate which table they came from

                * <u>all</u>: all columns will be renamed to indicate which table they came from
               If columns are renamed, the new ones are determined by <u>suffix*</u> parameters.

       <b>suffixN=</b><u>&lt;label&gt;</u>
              If  the  <u>fixcols</u>  parameter is set so that input columns are renamed for insertion into the output
              table, this parameter determines how the renaming is done. It gives a suffix which is appended  to
              all renamed columns from table N.

       <b>progress=</b><u>none|log|time|profile</u>
              Determines  whether  information  on  progress of the match should be output to the standard error
              stream as it progresses. For lengthy matches this is a useful reassurance and  can  give  guidance
              about how much longer it will take. It can also be useful as a performance diagnostic.

              The options are:

                * <u>none</u>: no progress is shown

                * <u>log</u>: progress information is shown

                * <u>time</u>: progress information and some time profiling information is shown

                * <u>profile</u>: progress information and limited time/memory profiling information are shown

       <b>runner=</b><u>parallel|parallel&lt;n&gt;|parallel-all|sequential|classic|partest</u>
              Selects the threading implementation. The options are currently:

                * <u>parallel</u>:  uses multithreaded implementation for large tables, with default parallelism, which
                  is the smaller of 6 and the number of available processors

                * <u>parallel&lt;n&gt;</u>: uses multithreaded implementation for large tables, with parallelism given by the
                  supplied value <u>&lt;n&gt;</u>

                * <u>parallel-all</u>: uses multithreaded implementation for large tables, with a parallelism given  by
                  the number of available processors

                * <u>sequential</u>: uses multithreaded implementation but with only a single thread

                * <u>classic</u>: uses legacy sequential implementation

                * <u>partest</u>: uses multithreaded implementation even when tables are small
               The  <u>parallel*</u>  options should normally run faster than <u>sequential</u> or <u>classic</u> (which are provided
              mainly for testing purposes), at least for large matches and where multiple processing  cores  are
              available.

              The  default value "<u>parallel</u>" is currently limited to a parallelism of 6 since larger values yield
              diminishing returns given that some parts of the matching algorithms  run  sequentially  (Amdahl's
              Law), and using too many threads can sometimes end up doing more work or impacting on other opera‐
              tions  on  the same machine. But you can experiment with other concurrencies, e.g. "<u>parallel16</u>" to
              run on 16 cores (if available) or "<u>parallel-all</u>" to run on all available cores.

              The value of this parameter should make no difference to the matching results. If you  notice  any
              discrepancies <b>please</b> <b>report</b> <b>them</b>.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man1/stilts.1.html">stilts</a></b>(1)

       If the package stilts-doc is installed, the full documentation <b>SUN/256</b> is available in HTML format:
       file:///usr/share/doc/stilts/sun256/index.html

</pre><h4><b>VERSION</b></h4><pre>
       STILTS version 3.5.1-debian

       This  is the Debian version of Stilts, which lack the support of some file formats and network protocols.
       For differences see
       file:///usr/share/doc/stilts/README.Debian

</pre><h4><b>AUTHOR</b></h4><pre>
       Mark Taylor (Bristol University)

                                                    Mar 2017                                   <u><a href="../man1/STILTS-TMATCHN.1.html">STILTS-TMATCHN</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>