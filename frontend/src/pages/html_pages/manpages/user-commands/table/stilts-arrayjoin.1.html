<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>stilts-arrayjoin - Adds table-per-row data as array-valued columns</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/stilts">stilts_3.5.1-2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       stilts-arrayjoin - Adds table-per-row data as array-valued columns

</pre><h4><b>SYNOPSIS</b></h4><pre>

       <b>stilts</b> <b>arrayjoin</b> [ifmt=<u>&lt;in-format&gt;</u>] [istream=<u>true|false</u>] [in=<u>&lt;table&gt;</u>] [icmd=<u>&lt;cmds&gt;</u>] [ocmd=<u>&lt;cmds&gt;</u>]
                        [omode=<u>out|meta|stats|count|checksum|cgi|discard|topcat|samp|tosql|gui</u>] [out=<u>&lt;out-</u>
                        <u>table&gt;</u>] [ofmt=<u>&lt;out-format&gt;</u>] [atable=<u>&lt;loc-expr&gt;</u>] [afmt=<u>&lt;in-format&gt;</u>] [astream=<u>true|false</u>]
                        [acmd=<u>&lt;cmds&gt;</u>] [keepall=<u>true|false</u>] [aparams=<u>&lt;name-list&gt;</u>] [cache=<u>true|false</u>]
                        [fixcols=<u>none|dups|all</u>] [suffixarray=<u>&lt;label&gt;</u>]

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <u>arrayjoin</u>  takes  an  input  table  and  for  each row adds the contents of a separate "array" table. The
       columns added are the columns from the array table, and the value of each cell is the value of the  whole
       column from the array table represented as an array. The assumption is that all the array tables have the
       same form (the same columns, though not necessarily the same row counts).

       This can be useful for constructing a single table with array-valued columns containing data that is made
       available  in multiple external files, for instance via the DataLink protocol; this is illustrated in the
       Examples subsection below. Note however that this command does not understand DataLink directly, and can‐
       not itself determine the location of the external array tables; an expression giving their per-row  loca‐
       tion (filename or URL) must be supplied.

</pre><h4><b>OPTIONS</b></h4><pre>
       <b>ifmt=</b><u>&lt;in-format&gt;</u>
              Specifies the format of the input table as specified by parameter <u>in</u>. The known formats are listed
              in  SUN/256. This flag can be used if you know what format your table is in. If it has the special
              value <u>(auto)</u> (the default), then an attempt will be made to detect the format of the  table  auto‐
              matically.  This cannot always be done correctly however, in which case the program will exit with
              an error explaining which formats were attempted. This parameter is ignored  for  scheme-specified
              tables.

       <b>istream=</b><u>true|false</u>
              If  set true, the input table specified by the <u>in</u> parameter will be read as a stream. It is neces‐
              sary to give the <u>ifmt</u> parameter in this case. Depending on the required operations and  processing
              mode,  this  may  cause  the  read  to fail (sometimes it is necessary to read the table more than
              once). It is not normally necessary to set this flag; in most cases the data will be streamed  au‐
              tomatically  if that is the best thing to do. However it can sometimes result in less resource us‐
              age when processing large files in certain formats (such as VOTable). This  parameter  is  ignored
              for scheme-specified tables.

       <b>in=</b><u>&lt;table&gt;</u>
              The location of the input table. This may take one of the following forms:

                * A filename.

                * A URL.

                * The special value "<u>-</u>", meaning standard input. In this case the input format must be given ex‐
                  plicitly using the <u>ifmt</u> parameter. Note that not all formats can be streamed in this way.

                * A scheme specification of the form <u>:&lt;scheme-name&gt;:&lt;scheme-args&gt;</u>.

                * A  system command line with either a "<u>&lt;</u>" character at the start, or a "<u>|</u>" character at the end
                  ("<u>&lt;syscmd</u>" or "<u>syscmd|</u>"). This executes the given pipeline and reads from its standard output.
                  This will probably only work on unix-like systems.
               In any case, compressed data in one of the supported compression formats (gzip, Unix compress  or
              bzip2) will be decompressed transparently.

       <b>icmd=</b><u>&lt;cmds&gt;</u>
              Specifies  processing  to be performed on the input table as specified by parameter <u>in</u>, before any
              other processing has taken place. The value of this parameter is one or more of  the  filter  com‐
              mands described in SUN/256. If more than one is given, they must be separated by semicolon charac‐
              ters  (";").  This parameter can be repeated multiple times on the same command line to build up a
              list of processing steps. The sequence of commands  given  in  this  way  defines  the  processing
              pipeline which is performed on the table.

              Commands  may  alternatively  be  supplied in an external file, by using the indirection character
              '<u>@</u>'. Thus a value of "<u>@filename</u>" causes the file <u>filename</u> to be read for a list of filter commands
              to execute. The commands in the file may be separated by newline characters and/or semicolons, and
              lines which are blank or which start with a '<u>#</u>' character are ignored. A backslash character '<u>\fR'</u>
              <u>at</u> <u>the</u> <u>end</u> <u>of</u> <u>a</u> <u>line</u> <u>joins</u> <u>it</u> <u>with</u> <u>the</u> <u>following</u> <u>line.</u>

       <b>ocmd=</b><u>&lt;cmds&gt;</u>
              Specifies processing to be performed on the output table, after all  other  processing  has  taken
              place.  The value of this parameter is one or more of the filter commands described in SUN/256. If
              more than one is given, they must be separated by semicolon characters (";"). This  parameter  can
              be  repeated  multiple  times on the same command line to build up a list of processing steps. The
              sequence of commands given in this way defines the processing pipeline which is performed  on  the
              table.

              Commands  may  alternatively  be  supplied in an external file, by using the indirection character
              '<u>@</u>'. Thus a value of "<u>@filename</u>" causes the file <u>filename</u> to be read for a list of filter commands
              to execute. The commands in the file may be separated by newline characters and/or semicolons, and
              lines which are blank or which start with a '<u>#</u>' character are ignored. A backslash character '<u>\fR'</u>
              <u>at</u> <u>the</u> <u>end</u> <u>of</u> <u>a</u> <u>line</u> <u>joins</u> <u>it</u> <u>with</u> <u>the</u> <u>following</u> <u>line.</u>

       <b>omode=</b><u>out|meta|stats|count|checksum|cgi|discard|topcat|samp|tosql|gui</u>
              The mode in which the result table will be output. The default mode is <u>out</u>, which means  that  the
              result  will be written as a new table to disk or elsewhere, as determined by the <u>out</u> and <u>ofmt</u> pa‐
              rameters. However, there are other possibilities, which correspond to uses to which a table can be
              put other than outputting it, such as displaying metadata, calculating statistics, or populating a
              table in an SQL database. For some values of this parameter, additional  parameters  (<u>&lt;mode-args&gt;</u>)
              are required to determine the exact behaviour.

              Possible values are

                * <u>out</u>

                * <u>meta</u>

                * <u>stats</u>

                * <u>count</u>

                * <u>checksum</u>

                * <u>cgi</u>

                * <u>discard</u>

                * <u>topcat</u>

                * <u>samp</u>

                * <u>tosql</u>

                * <u>gui</u>
               Use the <u>help=omode</u> flag or see SUN/256 for more information.

       <b>out=</b><u>&lt;out-table&gt;</u>
              The  location  of  the output table. This is usually a filename to write to. If it is equal to the
              special value "-" (the default) the output table will be written to standard output.

              This parameter must only be given if <u>omode</u> has its default value of "<u>out</u>".

       <b>ofmt=</b><u>&lt;out-format&gt;</u>
              Specifies the format in which the output table will be written (one  of  the  ones  in  SUN/256  -
              matching  is  case-insensitive  and you can use just the first few letters). If it has the special
              value "<u>(auto)</u>" (the default), then the output filename will be examined to try to guess what  sort
              of  file  is  required  usually by looking at the extension. If it's not obvious from the filename
              what output format is intended, an error will result.

              This parameter must only be given if <u>omode</u> has its default value of "<u>out</u>".

       <b>atable=</b><u>&lt;loc-expr&gt;</u>
              Gives the location of the table whose rows will be turned into an array-valued column.  This  will
              generally  be  an  expression giving a URL or filename that is different for each row of the input
              table. If table loading fails for the given location, for instance becase the file is not found or
              an HTTP 404 response is received, the array cells in the corresponding row will be blank.

              The first non-blank table loaded defines the array columns to be added. If subsequent tables  have
              a  different structure (do not contain similar columns in a similar sequence) an error may result.
              If the external array tables are not all homogenous in this way, the <u>acmd</u> parameter can be used to
              filter them so that they are.

       <b>afmt=</b><u>&lt;in-format&gt;</u>
              Specifies the format of array tables as specified by parameter <u>atable</u>. The known formats are list‐
              ed in SUN/256. This flag can be used if you know what format your table is in. If it has the  spe‐
              cial  value  <u>(auto)</u>  (the default), then an attempt will be made to detect the format of the table
              automatically. This cannot always be done correctly however, in which case the program  will  exit
              with an error explaining which formats were attempted. This parameter is ignored for scheme-speci‐
              fied tables.

       <b>astream=</b><u>true|false</u>
              If set true, array tables specified by the <u>atable</u> parameter will be read as a stream. It is neces‐
              sary  to give the <u>afmt</u> parameter in this case. Depending on the required operations and processing
              mode, this may cause the read to fail (sometimes it is necessary  to  read  the  table  more  than
              once).  It is not normally necessary to set this flag; in most cases the data will be streamed au‐
              tomatically if that is the best thing to do. However it can sometimes result in less resource  us‐
              age  when  processing  large files in certain formats (such as VOTable). This parameter is ignored
              for scheme-specified tables.

       <b>acmd=</b><u>&lt;cmds&gt;</u>
              Specifies processing to be performed on array tables as specified by parameter <u>atable</u>, before  any
              other  processing  has  taken place. The value of this parameter is one or more of the filter com‐
              mands described in SUN/256. If more than one is given, they must be separated by semicolon charac‐
              ters (";"). This parameter can be repeated multiple times on the same command line to build  up  a
              list  of  processing  steps.  The  sequence  of  commands given in this way defines the processing
              pipeline which is performed on the table.

              Commands may alternatively be supplied in an external file, by  using  the  indirection  character
              '<u>@</u>'. Thus a value of "<u>@filename</u>" causes the file <u>filename</u> to be read for a list of filter commands
              to execute. The commands in the file may be separated by newline characters and/or semicolons, and
              lines which are blank or which start with a '<u>#</u>' character are ignored. A backslash character '<u>\fR'</u>
              <u>at</u> <u>the</u> <u>end</u> <u>of</u> <u>a</u> <u>line</u> <u>joins</u> <u>it</u> <u>with</u> <u>the</u> <u>following</u> <u>line.</u>

       <b>keepall=</b><u>true|false</u>
              This parameter determines what happens when the <u>atable</u> parameter does not name a table that can be
              loaded. If this parameter is false, the input table row is output with blank values in the columns
              supplied  by  the  array tables, so that the output table has the same number of rows as the input
              table. If it is true, only rows with successfully loaded tables are included in the output.

       <b>aparams=</b><u>&lt;name-list&gt;</u>
              Lists the table parameters (per-table metadata) that will be read from loaded  tables  and  turned
              into scalar-valued columns in the output. By default parameters are discarded, but you can include
              them in the output by naming them using this parameter.

              Parameters are supplied as a space- or comma-separated list. Matching against table names is case-
              insensitive,  and  the  asterisk  character "<u>*</u>" may be used as a wildcard to match any sequence of
              characters. The list is interpreted relative to the first external table which is loaded.  Supply‐
              ing the value "<u>*</u>" therefore will include a column for each parameter in the first loaded table.

       <b>cache=</b><u>true|false</u>
              Determines  whether  the array data will be cached the first time an array table is read (true) or
              re-read from the array table every time the row is accessed (false). Since  the  row  construction
              may  be  an expensive step, especially if the tables are downloaded, it usually makes sense to set
              this true (the default). When true it also enables the metadata to be adjusted to report  constant
              array  length  where  applicable,  which cannot be done before all the rows have been scanned, and
              which may enable more efficient file output. However, if you want to stream the data you  can  set
              it false.

       <b>fixcols=</b><u>none|dups|all</u>
              Determines how input columns are renamed before use in the output table. The choices are:

                * <u>none</u>: columns are not renamed

                * <u>dups</u>:  columns which would otherwise have duplicate names in the output will be renamed to in‐
                  dicate which table they came from

                * <u>all</u>: all columns will be renamed to indicate which table they came from
               If columns are renamed, the new ones are determined by <u>suffix*</u> parameters.

       <b>suffixarray=</b><u>&lt;label&gt;</u>
              If the <u>fixcols</u> parameter is set so that input columns are renamed for insertion  into  the  output
              table,  this parameter determines how the renaming is done. It gives a suffix which is appended to
              all renamed columns from the array tables.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man1/stilts.1.html">stilts</a></b>(1)

       If the package stilts-doc is installed, the full documentation <b>SUN/256</b> is available in HTML format:
       file:///usr/share/doc/stilts/sun256/index.html

</pre><h4><b>VERSION</b></h4><pre>
       STILTS version 3.5.1-debian

       This is the Debian version of Stilts, which lack the support of some file formats and network  protocols.
       For differences see
       file:///usr/share/doc/stilts/README.Debian

</pre><h4><b>AUTHOR</b></h4><pre>
       Mark Taylor (Bristol University)

                                                    Mar 2017                                 <u><a href="../man1/STILTS-ARRAYJOIN.1.html">STILTS-ARRAYJOIN</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>