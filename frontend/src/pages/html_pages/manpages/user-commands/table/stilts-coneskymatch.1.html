<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>stilts-coneskymatch - Crossmatches table on sky position against remote cone service</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/stilts">stilts_3.5.1-2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       stilts-coneskymatch - Crossmatches table on sky position against remote cone service

</pre><h4><b>SYNOPSIS</b></h4><pre>

       <b>stilts</b> <b>coneskymatch</b> [ifmt=<u>&lt;in-format&gt;</u>] [istream=<u>true|false</u>] [in=<u>&lt;table&gt;</u>] [icmd=<u>&lt;cmds&gt;</u>] [ocmd=<u>&lt;cmds&gt;</u>]
                           [omode=<u>out|meta|stats|count|checksum|cgi|discard|topcat|samp|tosql|gui</u>] [out=<u>&lt;out-</u>
                           <u>table&gt;</u>] [ofmt=<u>&lt;out-format&gt;</u>] [ra=<u>&lt;expr&gt;</u>] [dec=<u>&lt;expr&gt;</u>] [sr=<u>&lt;expr/deg&gt;</u>]
                           [find=<u>best|all|each</u>] [usefoot=<u>true|false</u>] [footnside=<u>&lt;int-value&gt;</u>] [copycols=<u>&lt;colid-</u>
                           <u>list&gt;</u>] [scorecol=<u>&lt;col-name&gt;</u>] [parallel=<u>&lt;n&gt;</u>] [erract=<u>abort|ignore|retry|retry&lt;n&gt;</u>]
                           [ostream=<u>true|false</u>] [fixcols=<u>none|dups|all</u>] [suffix0=<u>&lt;label&gt;</u>] [suffix1=<u>&lt;label&gt;</u>]
                           [servicetype=<u>cone|ssa|sia1|sia2|sia</u>] [serviceurl=<u>&lt;url-value&gt;</u>] [verb=<u>1|2|3</u>]
                           [dataformat=<u>&lt;value&gt;</u>] [emptyok=<u>true|false</u>] [compress=<u>true|false</u>]

</pre><h4><b>DESCRIPTION</b></h4><pre>
       Note:  this  command  is  very inefficient for large tables, and in most cases <u>cdsskymatch</u> or <u>tapskymatch</u>
       provide better alternatives.

       <u>coneskymatch</u> is a utility which performs a cone search-like query to a remote server for each row  of  an
       input  table.  Each of these queries returns a table with one row for each item held by the server in the
       region of sky represented by the input row. The results of all the queries are then concatenated into one
       big output table which is the output of this command.

       The type of virtual observatory service queried is determined by the <u>servicetype</u> parameter. Typically  it
       will  be a Cone Search service, which queries a remote catalogue for astronomical objects or sources in a
       particular region. However, you can also query Simple Image Access and Simple Spectral Access services in
       just the same way, to return tables of available image and spectral resources in the relevant regions.

       The identity of the server to query is given by the <u>serviceurl</u> parameter. Some advice about how to locate
       URLs for suitable services is given in SUN/256.

       The effect of this command is like doing a positional crossmatch where one of the catalogues is local and
       the other is remote and exposes its data via a cone search/SIA/SSA service. Because of both  the  network
       communication  and  the necessarily naive crossmatching algorithm (which scales linearly with the size of
       the local catalogue) however, it is only suitable if the local catalogue has a reasonably small number of
       rows, unless you are prepared to wait a long time.

       The <u>parallel</u> parameter allows you to perform multiple cone searches concurrently, so that instead of com‐
       pleting the first cone search, then the second, then the third, the program can be executing a number  of
       them  at  once.  This can speed up operation considerably, especially in the face of network latency, but
       beware that submitting a very large number of queries simultaneously to the same server may overload  it,
       resulting in some combination of failed queries, ultimately slower runtimes, and unpopularity with server
       admins. Best to start with a low parallelism and cautiously increase it to see whether there are gains in
       performance.

       Note  that when running, <u>coneskymatch</u> can generate a lot of WARNING messages. Most of these are complain‐
       ing about badly formed VOTables being returned from the cone search services. STILTS  does  its  best  to
       work out what the service responses mean in this case, and usually makes a good enough job of it.

       Note: this task was known as <u>multicone</u> in its experimental form in STILTS v1.2 and v1.3.

</pre><h4><b>OPTIONS</b></h4><pre>
       <b>ifmt=</b><u>&lt;in-format&gt;</u>
              Specifies the format of the input table as specified by parameter <u>in</u>. The known formats are listed
              in  SUN/256. This flag can be used if you know what format your table is in. If it has the special
              value <u>(auto)</u> (the default), then an attempt will be made to detect the format of the  table  auto‐
              matically.  This cannot always be done correctly however, in which case the program will exit with
              an error explaining which formats were attempted. This parameter is ignored  for  scheme-specified
              tables.

       <b>istream=</b><u>true|false</u>
              If  set true, the input table specified by the <u>in</u> parameter will be read as a stream. It is neces‐
              sary to give the <u>ifmt</u> parameter in this case. Depending on the required operations and  processing
              mode,  this  may  cause  the  read  to fail (sometimes it is necessary to read the table more than
              once). It is not normally necessary to set this flag; in most cases the data will be streamed  au‐
              tomatically  if that is the best thing to do. However it can sometimes result in less resource us‐
              age when processing large files in certain formats (such as VOTable). This  parameter  is  ignored
              for scheme-specified tables.

       <b>in=</b><u>&lt;table&gt;</u>
              The location of the input table. This may take one of the following forms:

                * A filename.

                * A URL.

                * The special value "<u>-</u>", meaning standard input. In this case the input format must be given ex‐
                  plicitly using the <u>ifmt</u> parameter. Note that not all formats can be streamed in this way.

                * A scheme specification of the form <u>:&lt;scheme-name&gt;:&lt;scheme-args&gt;</u>.

                * A  system command line with either a "<u>&lt;</u>" character at the start, or a "<u>|</u>" character at the end
                  ("<u>&lt;syscmd</u>" or "<u>syscmd|</u>"). This executes the given pipeline and reads from its standard output.
                  This will probably only work on unix-like systems.
               In any case, compressed data in one of the supported compression formats (gzip, Unix compress  or
              bzip2) will be decompressed transparently.

       <b>icmd=</b><u>&lt;cmds&gt;</u>
              Specifies  processing  to be performed on the input table as specified by parameter <u>in</u>, before any
              other processing has taken place. The value of this parameter is one or more of  the  filter  com‐
              mands described in SUN/256. If more than one is given, they must be separated by semicolon charac‐
              ters  (";").  This parameter can be repeated multiple times on the same command line to build up a
              list of processing steps. The sequence of commands  given  in  this  way  defines  the  processing
              pipeline which is performed on the table.

              Commands  may  alternatively  be  supplied in an external file, by using the indirection character
              '<u>@</u>'. Thus a value of "<u>@filename</u>" causes the file <u>filename</u> to be read for a list of filter commands
              to execute. The commands in the file may be separated by newline characters and/or semicolons, and
              lines which are blank or which start with a '<u>#</u>' character are ignored. A backslash character '<u>\fR'</u>
              <u>at</u> <u>the</u> <u>end</u> <u>of</u> <u>a</u> <u>line</u> <u>joins</u> <u>it</u> <u>with</u> <u>the</u> <u>following</u> <u>line.</u>

       <b>ocmd=</b><u>&lt;cmds&gt;</u>
              Specifies processing to be performed on the output table, after all  other  processing  has  taken
              place.  The value of this parameter is one or more of the filter commands described in SUN/256. If
              more than one is given, they must be separated by semicolon characters (";"). This  parameter  can
              be  repeated  multiple  times on the same command line to build up a list of processing steps. The
              sequence of commands given in this way defines the processing pipeline which is performed  on  the
              table.

              Commands  may  alternatively  be  supplied in an external file, by using the indirection character
              '<u>@</u>'. Thus a value of "<u>@filename</u>" causes the file <u>filename</u> to be read for a list of filter commands
              to execute. The commands in the file may be separated by newline characters and/or semicolons, and
              lines which are blank or which start with a '<u>#</u>' character are ignored. A backslash character '<u>\fR'</u>
              <u>at</u> <u>the</u> <u>end</u> <u>of</u> <u>a</u> <u>line</u> <u>joins</u> <u>it</u> <u>with</u> <u>the</u> <u>following</u> <u>line.</u>

       <b>omode=</b><u>out|meta|stats|count|checksum|cgi|discard|topcat|samp|tosql|gui</u>
              The mode in which the result table will be output. The default mode is <u>out</u>, which means  that  the
              result  will be written as a new table to disk or elsewhere, as determined by the <u>out</u> and <u>ofmt</u> pa‐
              rameters. However, there are other possibilities, which correspond to uses to which a table can be
              put other than outputting it, such as displaying metadata, calculating statistics, or populating a
              table in an SQL database. For some values of this parameter, additional  parameters  (<u>&lt;mode-args&gt;</u>)
              are required to determine the exact behaviour.

              Possible values are

                * <u>out</u>

                * <u>meta</u>

                * <u>stats</u>

                * <u>count</u>

                * <u>checksum</u>

                * <u>cgi</u>

                * <u>discard</u>

                * <u>topcat</u>

                * <u>samp</u>

                * <u>tosql</u>

                * <u>gui</u>
               Use the <u>help=omode</u> flag or see SUN/256 for more information.

       <b>out=</b><u>&lt;out-table&gt;</u>
              The  location  of  the output table. This is usually a filename to write to. If it is equal to the
              special value "-" (the default) the output table will be written to standard output.

              This parameter must only be given if <u>omode</u> has its default value of "<u>out</u>".

       <b>ofmt=</b><u>&lt;out-format&gt;</u>
              Specifies the format in which the output table will be written (one  of  the  ones  in  SUN/256  -
              matching  is  case-insensitive  and you can use just the first few letters). If it has the special
              value "<u>(auto)</u>" (the default), then the output filename will be examined to try to guess what  sort
              of  file  is  required  usually by looking at the extension. If it's not obvious from the filename
              what output format is intended, an error will result.

              This parameter must only be given if <u>omode</u> has its default value of "<u>out</u>".

       <b>ra=</b><u>&lt;expr&gt;</u>
              Right ascension in degrees in the ICRS coordinate system for the position of each row of the input
              table. This may simply be a column name, or it may be  an  algebraic  expression  calculated  from
              columns  as  explained  in  SUN/256.  If left blank, an attempt is made to guess from UCDs, column
              names and unit annotations what expression to use.

       <b>dec=</b><u>&lt;expr&gt;</u>
              Declination in degrees in the ICRS coordinate system for the position of each row of the input ta‐
              ble. This may simply be a column name, or it  may  be  an  algebraic  expression  calculated  from
              columns  as  explained  in  SUN/256.  If left blank, an attempt is made to guess from UCDs, column
              names and unit annotations what expression to use.

       <b>sr=</b><u>&lt;expr/deg&gt;</u>
              Expression which evaluates to the search radius in degrees for the request at each row of the  in‐
              put table. This will often be a constant numerical value, but may be the name or ID of a column in
              the input table, or a function involving one.

       <b>find=</b><u>best|all|each</u>
              Determines which matches are retained.

                * <u>best</u>:  Only  the matching query table row closest to the input table row will be output. Input
                  table rows with no matches will be omitted. (Note this corresponds to the <u>best1</u> option in  the
                  pair matching commands, and <u>best1</u> is a permitted alias).

                * <u>all</u>:  All  query  table  rows which match the input table row will be output. Input table rows
                  with no matches will be omitted.

                * <u>each</u>: There will be one output table row for each input table row. If matches are  found,  the
                  closest  one from the query table will be output, and in the case of no matches, the query ta‐
                  ble columns will be blank.

       <b>usefoot=</b><u>true|false</u>
              Determines whether an attempt will be made to restrict searches in accordance with available foot‐
              print information. If this is set true, then before any of the per-row queries are  performed,  an
              attempt  may be made to acquire footprint information about the servce. If such information can be
              obtained, then queries which fall outside the footprint, and hence which are known to yield no re‐
              sults, are skipped. This can speed up the search considerably.

              Currently, the only footprints available are those provided by the CDS MOC  (Multi-Order  Coverage
              map) service, which covers VizieR and a few other cone search services.

       <b>footnside=</b><u>&lt;int-value&gt;</u>
              Determines the HEALPix Nside parameter for use with the MOC footprint service. This tuning parame‐
              ter determines the resolution of the footprint if available. Larger values give better resolution,
              hence  a  better  chance of avoiding unnecessary queries, but processing them takes longer and re‐
              trieving and storing them is more expensive.

              The value must be a power of 2, and at the time of writing, the MOC service will not supply  foot‐
              prints at resolutions greater than nside=512, so it should be &lt;=512.

              Only used if <u>usefoot=true</u>.

       <b>copycols=</b><u>&lt;colid-list&gt;</u>
              List of columns from the input table which are to be copied to the output table. Each column iden‐
              tified  here will be prepended to the columns of the combined output table, and its value for each
              row taken from the input table row which provided the parameters of the query which  produced  it.
              See SUN/256 for list syntax. The default setting is "<u>*</u>", which means that all columns from the in‐
              put table are included in the output.

       <b>scorecol=</b><u>&lt;col-name&gt;</u>
              Gives  the name of a column in the output table to contain the distance between the requested cen‐
              tral position and the actual position of the returned row. The distance  returned  is  an  angular
              distance  in  degrees. If a null value is chosen, no distance column will appear in the output ta‐
              ble.

       <b>parallel=</b><u>&lt;n&gt;</u>
              Allows multiple cone searches to be performed concurrently. If set to the default  value,  1,  the
              cone query corresponding to the first row of the input table will be dispatched, when that is com‐
              pleted  the  query  corresponding  to the second row will be dispatched, and so on. If set to <u>&lt;n&gt;</u>,
              then queries will be overlapped in such a way that up to approximately <u>&lt;n&gt;</u> may be running  at  any
              one time.

              Whether  increasing <u>&lt;n&gt;</u> is a good idea, and what might be a sensible maximum value, depends on the
              characteristics of the service being queried. In particular, setting it to too large a number  may
              overload  the service resulting in some combination of failed queries, ultimately slower runtimes,
              and unpopularity with server admins.

              The maximum value permitted for this parameter by default is 5. This limit may be raised by use of
              the service.maxparallel system property but use that option with great care since you may overload
              services and make yourself unpopular with data centre admins. As a rule, you should only  increase
              this  value if you have obtained permission from the data centres whose services on which you will
              be using the increased parallelism.

       <b>erract=</b><u>abort|ignore|retry|retry&lt;n&gt;</u>
              Determines what will happen if any of the individual cone search requests fails.  By  default  the
              task  aborts.  That may be the best thing to do, but for unreliable or poorly implemented services
              you may find that some searches fail and others succeed so it can be best to continue operation in
              the face of a few failures. The options are:

                * <u>abort</u>: Failure of any query terminates the task.

                * <u>ignore</u>: Failure of a query is treated the same as a query which returns no rows.

                * <u>retry</u>: Failed queries are retried until they succeed; an increasing delay  is  introduced  for
                  each failure. Use with care - if the failure is for some good, or at least reproducible reason
                  this could prevent the task from ever completing.

                * <u>retry&lt;n&gt;</u>:  Failed queries are retried at most a fixed number <u>&lt;n&gt;</u> of times; an increasing delay
                  is introduced for each failure. If failures persist the task terminates.

       <b>ostream=</b><u>true|false</u>
              If set true, this will cause the operation to stream on output, so that the output table is  built
              up as the results are obtained from the cone search service. The disadvantage of this is that some
              output modes and formats need multiple passes through the data to work, so depending on the output
              destination,  the  operation may fail if this is set. Use with care (or be prepared for the opera‐
              tion to fail).

       <b>fixcols=</b><u>none|dups|all</u>
              Determines how input columns are renamed before use in the output table. The choices are:

                * <u>none</u>: columns are not renamed

                * <u>dups</u>: columns which would otherwise have duplicate names in the output will be renamed to  in‐
                  dicate which table they came from

                * <u>all</u>: all columns will be renamed to indicate which table they came from
               If columns are renamed, the new ones are determined by <u>suffix*</u> parameters.

       <b>suffix0=</b><u>&lt;label&gt;</u>
              If  the  <u>fixcols</u>  parameter is set so that input columns are renamed for insertion into the output
              table, this parameter determines how the renaming is done. It gives a suffix which is appended  to
              all renamed columns from the input table.

       <b>suffix1=</b><u>&lt;label&gt;</u>
              If  the  <u>fixcols</u>  parameter is set so that input columns are renamed for insertion into the output
              table, this parameter determines how the renaming is done. It gives a suffix which is appended  to
              all renamed columns from the cone result table.

       <b>servicetype=</b><u>cone|ssa|sia1|sia2|sia</u>
              Selects  the  type  of  data access service to contact. Most commonly this will be the Cone Search
              service itself, but there are one or two other possibilities:

                * <u>cone</u>: Cone Search protocol - returns a table of objects found near  each  location.  See  Cone
                  Search standard.

                * <u>ssa</u>:  Simple Spectral Access protocol - returns a table of spectra near each location. See SSA
                  standard.

                * <u>sia1</u>: Simple Image Access protocol version 1 - returns a table of images near  each  location.
                  See SIA 1.0 standard.

                * <u>sia2</u>:  Simple  Image Access protocol version 2 - returns a table of images near each location.
                  See SIA 2.0 standard.

                * <u>sia</u>: alias for <u>sia</u>

       <b>serviceurl=</b><u>&lt;url-value&gt;</u>
              The base part of a URL which defines the queries to be made. Additional parameters will be append‐
              ed to this using CGI syntax ("<u>name=value</u>", separated by '&amp;' characters). If this  value  does  not
              end in either a '?' or a '&amp;', one will be added as appropriate.

              See SUN/256 for discussion of how to locate service URLs corresponding to given datasets.

       <b>verb=</b><u>1|2|3</u>
              Verbosity level of the tables returned by the query service. A value of 1 indicates the bare mini‐
              mum and 3 indicates all available information.

       <b>dataformat=</b><u>&lt;value&gt;</u>
              Indicates  the  format of data objects described in the returned table. The meaning of this is de‐
              pendent on the value of the <u>servicetype</u> parameter:

                * <u>servicetype=cone</u>: not used

                * <u>servicetype=ssa</u>: gives the MIME type of spectra referenced in the output table,  also  special
                  values  "<u>votable</u>",  "<u>fits</u>", "<u>compliant</u>", "<u>graphic</u>", "<u>all</u>", and others (value of the SSA FORMAT
                  parameter).

                * <u>servicetype=sia1</u>: gives the MIME type required for images/resources referenced in  the  output
                  table,  corresponding  to the SIA FORMAT parameter. The special values "<u>GRAPHIC</u>" (all graphics
                  formats) and "<u>ALL</u>" (no restriction) as defined by SIAv1 are also permissible. For SIA  version
                  1 only, this defaults to<u>"image/fits"</u>.

                * <u>servicetype=sia2</u>:  gives  the MIME type required for images/resources referenced in the output
                  table, corresponding to the SIA FORMAT parameter. The special values "<u>GRAPHIC</u>"  (all  graphics
                  formats) and "<u>ALL</u>" (no restriction) as defined by SIAv1 are also permissible.

                * <u>servicetype=sia</u>:  gives  the  MIME type required for images/resources referenced in the output
                  table, corresponding to the SIA FORMAT parameter. The special values "<u>GRAPHIC</u>"  (all  graphics
                  formats)  and "<u>ALL</u>" (no restriction) as defined by SIAv1 are also permissible. For SIA version
                  1 only, this defaults to<u>"image/fits"</u>.

       <b>emptyok=</b><u>true|false</u>
              Whether the table metadata which is returned from a search result with zero  rows  is  to  be  be‐
              lieved. According to the spirit, though not the letter, of the cone search standard, a cone search
              service  which  returns no data ought nevertheless to return the correct column headings. Unfortu‐
              nately this is not always the case. If this parameter is set <u>true</u>, it is assumed that the  service
              behaves properly in this respect; if it does not an error may result. In that case, set this para‐
              meter  <u>false</u>. A consequence of setting it false is that in the event of no results being returned,
              the task will return no table at all, rather than an empty one.

       <b>compress=</b><u>true|false</u>
              If true, the service is requested to provide HTTP-level compression for the response  stream  (Ac‐
              cept-Encoding  header  is  set  to "<u>gzip</u>", see RFC 2616). This does not guarantee that compression
              will happen but if the service honours this request it may result in a smaller amount  of  network
              traffic at the expense of more processing on the server and client.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man1/stilts.1.html">stilts</a></b>(1)

       If the package stilts-doc is installed, the full documentation <b>SUN/256</b> is available in HTML format:
       file:///usr/share/doc/stilts/sun256/index.html

</pre><h4><b>VERSION</b></h4><pre>
       STILTS version 3.5.1-debian

       This  is the Debian version of Stilts, which lack the support of some file formats and network protocols.
       For differences see
       file:///usr/share/doc/stilts/README.Debian

</pre><h4><b>AUTHOR</b></h4><pre>
       Mark Taylor (Bristol University)

                                                    Mar 2017                              <u><a href="../man1/STILTS-CONESKYMATCH.1.html">STILTS-CONESKYMATCH</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>