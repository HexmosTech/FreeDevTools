<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>grap — Kernighan and Bentley's language for typesetting graphs</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/grap">grap_1.48-1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       grap — Kernighan and Bentley's language for typesetting graphs

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>grap</b> [<b>-d</b> <u>defines_file</u>] [<b>-D</b>] [<b>-l</b>] [<b>-M</b> <u>include</u> <u>path</u>] [<b>-R</b>] [<b>-r</b>] [<b>-v</b>] [<b>-u</b>] [<b>-C</b>] [<b>-c</b>] [<b>-h</b>] [<u>filename</u> <u>...</u>]

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>grap</b>  is  an  implementation  of Kernighan and Bentley's language for typesetting graphs, as described in
       ``Grap-A Language for Typesetting Graphs, Tutorial and User Manual,'' by Jon  L.  Bentley  and  Brian  W.
       Kernighan,  revised May 1991, which is the primary source for information on how to use <b>grap</b>.  As of this
       writing, it is  available  electronically  at  <b><a href="http://www.kohala.com/start/troff/cstr114.ps">http://www.kohala.com/start/troff/cstr114.ps</a></b>.   Additional
       documentation  and  examples, packaged with <b>grap</b>, may have been installed locally as well.  If available,
       paths to them can be displayed using <b>grap</b> <b>-h</b> or <b>grap</b> <b>-v</b> (or <b>grap</b> <b>--help</b> / <b>grap</b> <b>--version</b>)

       This version is a black box implementation of <b>grap</b>, and some inconsistencies are  to  be  expected.   The
       remainder of this manual page will briefly outline the <b>grap</b> language as implemented here.

       <b>grap</b>  is  a  <u><a href="../man1/pic.1.html">pic</a></u>(1)  pre-processor.   It  takes  commands  embedded  in  a <u><a href="../man1/troff.1.html">troff</a></u>(1) source file which are
       surrounded by <b>.G1</b> and <b>.G2</b> macros, and rewrites them into <u>pic</u> commands to display the graph.  Other  lines
       are  copied.   Output  is  always to the standard output, which is usually redirected.  Input is from the
       given <u>filename</u>s, which are read in order.  A <u>filename</u> of <b>-</b> is the standard input.  If  no  <u>filename</u>s  are
       given, input is read from the standard input.

       Because <b>grap</b> is a <u>pic</u> preprocessor, and GNU <u>pic</u> will output TeX, it is possible to use <b>grap</b> with TeX.

       The  <b>-d</b>  option  specifies  a  file  of  macro  definitions  to  be  read  at  startup,  and  defaults to
       /usr/share/grap/grap.defines .  The <b>-D</b> option inhibits the reading of any initial  macros  file  (the  <b>-l</b>
       flag  is  a  synonym for <b>-D</b>, though I do not remember why).  The defines file can also be given using the
       GRAP_DEFINES environment variable. (See below).

       <b>-v</b> prints the version information on the standard output and exits.  <b>--version</b> is a synonym for <b>-v</b>.

       <b>-u</b> makes labels unaligned by default.  This version of <b>grap</b> uses new features of GNU  <u>pic</u>  to  align  the
       left  and  right  labels with the axes, that is that the left and right labels run at right angles to the
       text of the paper.  This may be useful in porting old <b>grap</b> programs.  <b>-c</b> makes plot strings unclipped  by
       default.   Some  versions  of <b>grap</b> allow users to place a string anywhere in the coordinate space, rather
       than only in the frame.  By default this version of <b>grap</b> does not plot any string  centered  outside  the
       frame.   <b>-c</b>  allows  strings  to be placed anywhere.  See also the <b>clipped</b> and <b>unclipped</b> string modifiers
       described in the <b>plot</b> statement.

       <b>-M</b> is followed by a colon-separated list of directories used to search for  relative  pathnames  included
       via  <b>copy</b>.   The path is also used to locate the defines file, so if the <b>-d</b> changes the defines file name
       to a relative name, it will be searched for in the path given by <b>-M</b>.  The search path always includes the
       current directory, and by default that directory is searched last.

       All numbers used internally by <b>grap</b> are double precision floating point values.  Sometimes using floating
       point numbers has unintended consequences.  To help avoid these problems, <b>grap</b> can use two thresholds for
       comparison of floating point numbers, set by <b>-R</b> or <b>-r</b>.  The <b>-R</b> flag sets coarse comparison mode, which is
       suitable for most applications.  If you are plotting small values – less than 1e-6 or so – consider using
       <b>-r</b> which uses very fine comparisons between numbers.  You may also want to rescale your plotted values to
       be larger in magnitude. The coarse comparisons are used by default.

       To be precise, the value by which two numbers must differ for <b>grap</b> to consider them not equal  is  called
       the  comparison  limit  and the smallest non-zero number is called the minimum value.  The values a given
       version of <b>grap</b> uses for these are included in the output of <b>-v</b> or <b>-h</b>.

       All <b>grap</b> commands are included between <b>.G1</b> and <b>.G2</b> macros,  which  are  consumed  by  <b>grap</b>.   The  output
       contains  <u>pic</u>  between  <b>.PS</b> and <b>.PE</b> macros.  Any arguments to the <b>.G1</b> macro in the input are arguments to
       the <b>.PS</b> macro in the output, so graphs can be scaled just like <u>pic</u> diagrams.  If <b>-C</b> is given,  any  macro
       beginning with .G1 or .G2 is treated as a .G1 or .G2 macro, for compatibility with old versions of troff.
       Using  <b>-C</b>  also  forces  pure  troff  syntax  on embedded font change commands when strings have the <b>size</b>
       attribute, and all strings to be <b>unclipped</b>.

       The <b>-h</b> flag prints a brief help message and exits.  <b>--help</b> is a synonym for <b>-h</b>.

       It is possible for someone to cause <b>grap</b> to fail by passing a bad format string and data to  the  <b>sprintf</b>
       command.  If <b>grap</b> is integrated as part of the printing system, this could conceivably provided a path to
       breaching  security  on  the  machine.  If you choose to use <b>grap</b> as part of a printing system run by the
       super-user, you should disable <b>sprintf</b> commands.  This can be done by calling  <b>grap</b>  with  the  <b>-S</b>  flag,
       setting  the  GRAP_SAFER  environment  variable,  or  compiling  with  the GRAP_SAFER preprocessor symbol
       defined.  (The GNU configure script included with <b>grap</b>  will  define  that  preprocessor  symbol  if  the
       <b>--with-grap-safe</b> option is given.)

       The <b>grap</b> commands are sketched below.  Refer to Kernighan and Bentley's paper for the details.

       New versions of <u><a href="../man1/groff.1.html">groff</a></u>(1) will invoke <b>grap</b> if <b>-G</b> is given.

   <b>Commands</b>
       Commands are separated from one another by newlines or semicolons (;).

       <b>frame</b> [<u>line_description</u>] [<b>ht</b> <u>height</u> | <b>wid</b> <u>width</u>] [[(<b>top</b>|<b>bottom</b>|<b>left</b>| <b>right</b>) <u>line_description</u>] ...]

       <b>frame</b> [<b>ht</b> <u>height</u> | <b>wid</b> <u>width</u>] [<u>line_description</u>] [[(<b>top</b>|<b>bottom</b>|<b>left</b>| <b>right</b>) <u>line_description</u>] ...]

             This  describes how the axes for the graph are drawn. A <u>line_description</u> is a <u>pic</u> line description,
             e.g., <b>dashed</b> <b>0.5</b>, or the literal <b>solid</b>.  It may also include a <b>color</b> keyword followed by the  color
             to  draw  the  string in double quotes.  Any color understood by the underlying groff system can be
             used.  Color can only be  used  under  GNU  pic,  and  is  not  available  in  compatibility  mode.
             Similarly,  for  pic  implementations  that understand <b>thickness</b>, that attribute may be used with a
             real valued parameter.  <b>Thickness</b> is not available in compatibility mode.

             If the first <u>line_description</u> is given, the frame is drawn with that style.  The default is  <b>solid</b>.
             The  height  and width of the frame can also be specified in inches.  The default line style can be
             over-ridden for sides of the frame by specifying additional parameters to <b>frame</b>.

             If no plotting commands have been given before the <b>frame</b> command  is  issued,  the  frame  will  be
             output  at that point in the plotting stream relative to embedded <u>troff</u> or <u>pic</u> commands.  Otherwise
             the frame is output before the first plotted object (even invisible ones).

             <b>ht</b> and <b>wid</b> are in inches by default, but can be any <u>groff</u> unit.  If omitted, the dimensions  are  2
             inches high by 3 inches wide.

       <b>coord</b> [<u>name</u>] [<b>x</b> <u>expr</u>, <u>expr</u>] [<b>y</b> <u>expr</u>, <u>expr</u>] [<b>log</b> <b>x</b> | <b>log</b> <b>y</b> | <b>log</b> <b>log</b>]

             The  <b>coord</b>  command  specifies  a  new  coordinate system or sets limits on the default system.  It
             defines the largest and smallest values that can be plotted, and therefore the scale of the data in
             the frame.  The limits for the x and y coordinate systems can be given separately.  If  a  <u>name</u>  is
             given, that coordinate system is defined, if not the default system is modified.

             A  coordinate  system created by one <b>coord</b> command may be modified by subsequent <b>coord</b> commands.  A
             <b>grap</b> program may declare a coordinate space using <b>coord</b>, <b>copy</b> a file of data through a  macro  that
             plots  the  data and finds its maxima and minima, and then define the size of the coordinate system
             with a second <b>coord</b> statement.

             This command also determines if a scale is plotted logarithmically.  <b>log</b> <b>log</b> means the  same  thing
             as <b>log</b> <b>x</b> <b>log</b> <b>y</b>.

       <b>draw</b> [<u>line_name</u>] [<u>line_description</u>] [<u>plot_string</u>]

             The <b>draw</b> command defines the style with which a given line will be plotted.  If <u>line_name</u> is given,
             the  style is associated with that name, otherwise the default style is set.  <u>line_description</u> is a
             <u>pic</u> line description, and the optional <u>plot_string</u> is a string to be centered at each  point.   The
             default  line  description  is  <b>invis</b>,  and the default plotting string is a centered bullet, so by
             default each point is a filled circle, and they are unconnected.  If points  are  being  connected,
             each <b>draw</b> command ends any current line and begins a new one.

             When  defining  a  line  style, that is the first <b>draw</b> command for a given line name, specifying no
             plot string means that there are to be no plot strings.  Omitting the  plot  string  on  subsequent
             <b>draw</b>  commands  addressing  the same named line means not to change the plot string.  If a line has
             been defined with a plot string, and the format is changed by a subsequent <b>draw</b> statement, the plot
             string can be removed by specifying "" in the <b>draw</b> statement.

             The plot string can have its format changed through several string_modifiers.  String_modifiers are
             described in the description of the <b>plot</b> command.

             The standard defines file includes several macros useful as plot strings, including <b>bullet</b>, <b>square</b>,
             and <b>delta</b>.

             <b>new</b> is a synonym for <b>draw</b>.

       <b>next</b> [<u>line_name</u>] <b>at</b> [<u>coordinates_name</u>] <u>expr</u>, <u>expr</u> [<u>line_description</u>]

             The <b>next</b> command plots the given point using the line style given by <u>line_name</u>, or the  default  if
             none  is  given.  If <u>line_name</u> is given, it should have been defined by an earlier <b>draw</b> command, if
             not a new line style with that name is created, initialized the same way as the default style.  The
             two expressions give the point's x and y values, relative to the optional coordinate system.   That
             system  should  have  been  defined  by  an  earlier <b>coord</b> command, if not, grap will exit.  If the
             optional <u>line_description</u> is given, it overrides the style's default line description.  You  cannot
             over-ride the plotting string.  To use a different plotting string use the <b>plot</b> command.

             The coordinates may optionally be enclosed in parentheses: (<u>expr</u>, <u>expr</u>)

       <u>quoted_string</u>  [<u>string_modifiers</u>]  [,  <u>quoted_string</u> [<u>string_modifiers</u>]] ...  <b>at</b> [<u>coordinates_name</u>] <u>expr</u>,
       <u>expr</u>

       <b>plot</b> <u>expr</u> [<u>format_string</u>] <b>at</b> [<u>coordinates_name</u>] <u>expr</u>, <u>expr</u>

             These commands both plot a string at the given point.  In the first case the  literal  strings  are
             stacked  above  each  other.   The string_modifiers include the <u>pic</u> justification modifiers (<b>ljust</b>,
             <b>rjust</b>, <b>above</b>, and <b>below</b>), and absolute and relative <b>size</b> modifiers.  See the <u>pic</u> documentation  for
             the  description  of  the  justification  modifiers.   <b>grap</b> also supports the <b>aligned</b> and <b>unaligned</b>
             modifiers which are briefly noted in the description of the <b>label</b> command.

             The standard defines file includes several macros useful as plot strings, including <b>bullet</b>, <b>square</b>,
             and <b>delta</b>.

             Strings placed by either format of the <b>plot</b> command are restricted to being within the frame.  This
             can be overridden by using the <b>unclipped</b> attribute, which allows a string to be plotted in  or  out
             of the frame.  The <b>-c</b> and <b>-C</b> flags set <b>unclipped</b> on all strings, and to prevent a string from being
             plotted outside the frame when those flags are active, the <b>clipped</b> attribute can be used to restore
             clipping  behavior.   Though <b>clipped</b> or <b>unclipped</b> can be applied to any string, it only has meaning
             for <b>plot</b> statements.

             <b>size</b> <u>expr</u> sets the string size to <u>expr</u> points.  If <u>expr</u> is preceded by  a  +  or  -,  the  size  is
             increased or decreased by that many points.

             If <b>color</b> and a color name in double quotes appears, the string will be rendered in that color under
             a version of GNU troff that supports color.  Color is not available in compatibility mode.

             In the second version, the <u>expr</u> is converted to a string and placed on the graph.  <u>format_string</u> is
             a <u><a href="../man3/printf.3.html">printf</a></u>(3) format string.  Only formatting escapes for printing floating point numbers make sense.
             The  format string is only respected if the <b>sprintf</b> command is also active.  See the description of
             <b>sprintf</b> for the various ways to disable it.  <b>Plot</b> and <b>sprintf</b>  respond  differently  when  <b>grap</b>  is
             running  safely.   <b>Sprintf</b>  ignores  any  arguments,  passing  the  format  string  through without
             substitution.  <b>plot</b> ignores the format string completely, plotting <u>expr</u> using the "%g" format.

             Points are specified the same way as for <b>next</b> commands, with the same  consequences  for  undefined
             coordinate systems.

             The  second  form  of  this  command  is  because  the  first  form can be used with a <b>grap</b> <b>sprintf</b>
             expression (See “Expressions”).

       <b>ticks</b> (<b>left</b>|<b>right</b>|<b>top</b>|<b>bottom</b>)[ (<b>in</b>|<b>out</b>) [<u>expr</u>]] [<b>on|auto</b> <u>coord_name</u>]

       <b>ticks</b> (<b>left</b>|<b>right</b>|<b>top</b>|<b>bottom</b>) (<b>in</b>|<b>out</b>) [<u>expr</u>] [<b>up</b> <u>expr</u>  |  <b>down</b>  <u>expr</u>  |  <b>left</b>  <u>expr</u>  |  <b>right</b>  <u>expr</u>]  <b>at</b>
       [<u>coord_name</u>] <u>expr</u> [<u>format_string</u>] [[, <u>expr</u> [<u>format_string</u>]] ...]

       <b>ticks</b>  (<b>left</b>|<b>right</b>|<b>top</b>|<b>bottom</b>)  (<b>in</b>|<b>out</b>)  [<u>expr</u>]  [<b>up</b>  <u>expr</u>  |  <b>down</b>  <u>expr</u> | <b>left</b> <u>expr</u> | <b>right</b> <u>expr</u>] <b>from</b>
       [coord_name] <u>start_expr</u> <b>to</b> <u>end_expr</u> [<b>by</b> [+|-|*|/] <u>by_expr</u>] [format_string]

       <b>ticks</b> [<b>left</b>|<b>right</b>|<b>top</b>|<b>bottom</b>] <b>off</b>

             This command controls the placement of ticks on the frame.  By  default,  ticks  are  automatically
             generated on the left and bottom sides of the frame.

             The  first version of this command turns on the automatic tick generation for a given side.  The <b>in</b>
             or <b>out</b> parameter controls the direction and length of the ticks.  If a <u>coord_name</u> is specified, the
             ticks are automatically generated using that coordinate system.  If no  system  is  specified,  the
             default  coordinate  system is used.  As with <b>next</b> and <b>plot</b>, the coordinate system must be declared
             before the <b>ticks</b> statement that references it.  This syntax for requesting automatically  generated
             ticks is an extension, and will not port to older <b>grap</b> implementations.

             The  second  version  of  the  <b>ticks</b>  command  overrides  the  automatic  placement of the ticks by
             specifying a list of coordinates at which to place the ticks.  If the ticks are  not  defined  with
             respect  to the default coordinate system, the <u>coord_name</u> parameter must be given.  For each tick a
             <u><a href="../man3/printf.3.html">printf</a></u>(3) style format string can be given.  The <u>format_string</u> defaults to "%g".  The format string
             can also take string modifiers as described in the <b>plot</b> command.  To place ticks  with  no  labels,
             specify <u>format_string</u> as "".

             If <b>sprintf</b> is disabled, <b>ticks</b> behaves as <b>plot</b> with respect to the format string.

             The  labels  on  the  ticks  may be shifted by specifying a direction and the distance in inches to
             offset the label.  That is the optional direction and expression immediately preceding the <b>at</b>.

             The third format of the <b>ticks</b> command over-rides the default tick generation with a set of ticks ar
             regular intervals.  The syntax is reminiscent of programming language for loops.  Ticks are  placed
             starting at <u>start_expr</u> ending at <u>end_expr</u> one unit apart.  If the <b>by</b> clause is specified, ticks are
             <u>by_expr</u>  units  apart.   If  an  operator  appears  before <u>by_expr</u> each tick is operated on by that
             operator instead of +.  For example

                         ticks left out from 2 to 32 by *2

             will put ticks at 2, 4, 8, 16, and 32.  If <u>format_string</u> is  specified,  all  ticks  are  formatted
             using it.

             The parameters preceding the <b>from</b> act as described above.

             The <b>at</b> and <b>for</b> forms of tick command may both be issued on the same side of a frame.  For example:

                         ticks left out from 2 to 32 by *2
                         ticks left in 3, 5, 7

             will  put  ticks  on the left side of the frame pointing out at 2, 4, 8, 16, and 32 and in at 3, 5,
             and 7.

             The final form of <b>ticks</b> turns off ticks on a given side.  If no side is given  the  ticks  for  all
             sides are cancelled.

             <b>tick</b> is a synonym for <b>ticks</b>.

       <b>grid</b>  (<b>left</b>|<b>right</b>|<b>top</b>|<b>bottom</b>)  [<b>ticks</b>  <b>off</b>]  [<u>line_description</u>]  [<b>up</b> <u>expr</u> | <b>down</b> <u>expr</u> | <b>left</b> <u>expr</u> | <b>right</b>
       <u>expr</u>] [<b>on|auto</b> [<u>coord_name</u>]]

       <b>grid</b> (<b>left</b>|<b>right</b>|<b>top</b>|<b>bottom</b>) [<b>ticks</b> <b>off</b>] [<u>line_description</u>] [<b>up</b> <u>expr</u> | <b>down</b> <u>expr</u>  |  <b>left</b>  <u>expr</u>  |  <b>right</b>
       <u>expr</u>] <b>at</b> [<u>coord_name</u>] <u>expr</u> [<u>format_string</u>] [[, <u>expr</u> [<u>format_string</u>]] ...]

       <b>grid</b>  (<b>left</b>|<b>right</b>|<b>top</b>|<b>bottom</b>)  [<b>ticks</b>  <b>off</b>]  [<u>line_description</u>]  [<b>up</b> <u>expr</u> | <b>down</b> <u>expr</u> | <b>left</b> <u>expr</u> | <b>right</b>
       <u>expr</u>] <b>from</b> [coord_name] <u>start_expr</u> <b>to</b> <u>end_expr</u> [<b>by</b> [+|-|*|/] <u>by_expr</u>] [format_string]

             The <b>grid</b> command is similar to the <b>ticks</b> command except that <b>grid</b> specifies the placement of  lines
             in the frame.  The syntax is similar to <b>ticks</b> as well.

             By  specifying  <b>ticks</b>  <b>off</b>  in the command, no ticks are drawn on that side of the frame.  If ticks
             appear on a side by default, or have been declared by an  earlier  <b>ticks</b>  command,  <b>grid</b>  does  not
             cancel them unless <b>ticks</b> <b>off</b> is specified.

             Instead  of  a  direction  for  ticks, <b>grid</b> allows the user to pick a line description for the grid
             lines.  The usual <u>pic</u> line descriptions are allowed.

             Grids are labelled by default.  To omit labels, specify the format string as "".

             If <b>sprintf</b> is disabled, <b>grid</b> behaves as <b>plot</b> with respect to the format string.

       <b>label</b> (<b>left</b>|<b>right</b>|<b>top</b>|<b>bottom</b>) <u>quoted_string</u> [<u>string_modifiers</u>] [, <u>quoted_string</u>  [<u>string_modifiers</u>]]  ...
       [<b>up</b> <u>expr</u> | <b>down</b> <u>expr</u> | <b>left</b> <u>expr</u> | <b>right</b> <u>expr</u>]

             The  <b>label</b>  command  places  a  label on the given axis.  It is possible to specify several labels,
             which will be stacked over each other as in <u>pic</u>.  The final argument,  if  present,  specifies  how
             many inches the label is shifted from the axis.

             By  default the labels on the left and right labels run parallel to the frame.  You can cancel this
             by specifying <b>unaligned</b> as a <u>string_modifier</u>.

       <b>circle</b> <b>at</b> [<u>coordinate_name</u>] <u>expr</u>, <u>expr</u> [<b>radius</b> <u>expr</u>] [<u>linedesc</u>]

             This draws an circle at the point indicated.  By default, the circle is small, 0.025 inches.   This
             can  be over-ridden by specifying a radius.  The coordinates of the point are relative to the named
             coordinate system, or the default system if none is specified.

             This command has been extended to take a line description,  e.g.,  <b>dotted</b>.   It  also  accepts  the
             filling  extensions  described  below in the <b>bar</b> command.  It will also accept a <b>color</b> keyword that
             gives the color of the outline of the circle in double quotes and a <b>fillcolor</b> command that sets the
             color to fill the circle with similarly.  Colors are only available when compatibility mode is off,
             and using a version of GNU pic that supports color.

       <b>line</b>  [<u>line_description</u>]  <b>from</b>   [<u>coordinate_name</u>]   <u>expr</u>,   <u>expr</u>   <b>to</b>   [<u>coordinate_name</u>]   <u>expr</u>,   <u>expr</u>
       [<u>line_description</u>]

       <b>arrow</b>   [<u>line_description</u>]   <b>from</b>   [<u>coordinate_name</u>]   <u>expr</u>,   <u>expr</u>   <b>to</b>  [<u>coordinate_name</u>]  <u>expr</u>,  <u>expr</u>
       [<u>line_description</u>]

             This draws a line or arrow from the first point to the second using the given style.   The  default
             line  style  is  <b>solid</b>.   The  <u>line_description</u> can be given either before the <b>from</b> or after the <b>to</b>
             clause.  If both are given the second is used.   It  is  possible  to  specify  one  point  in  one
             coordinate  system  and  one  in another, note that if both points are in a named coordinate system
             (even if they are in the same named coordinate  system),  both  points  must  have  <u>coordinate_name</u>
             given.

       <b>copy</b> ["<u>filename</u>"] [<b>until</b> "<u>string</u>"] [<b>thru</b> <u>macro</u>]

             The  <b>copy</b>  command  imports  data  from  another file into the current graph.  The form with only a
             filename given is a simple file inclusion; the included file is simply read into the  input  stream
             and  can  contain  arbitrary  <b>grap</b> commands.  The more common case is that it is a number list; see
             “Number Lists” below.

             The second form takes lines from the file, splits them into words delimited by one or more  spaces,
             and calls the given macro with those words as parameters.  The macro may either be defined here, or
             be a macro defined earlier.  See “Macros” for more information on macros.

             The  <u>filename</u>  may be omitted if the <b>until</b> clause is present.  If so the current file is treated as
             the input file until <u>string</u> is encountered at the beginning of the line.

             <b>copy</b> is one of the workhorses of <b>grap</b>.  Check out the paper  and  <u>/usr/share/doc/grap/examples</u>  for
             more details.  Confirm the location of the examples directory using the <b>-v</b> flag.
       <b>print</b> (<u>expr|string</u>)

             Prints its argument to the standard error.

       <b>sh</b> <u>block</u>

             This  passes  <u>block</u>  to  <u><a href="../man1/sh.1.html">sh</a></u>(1).  Unlike K&amp;B <b>grap</b> no macro or variable expansion is done.  I believe
             that this is also true for GNU <u>pic</u> version 1.10.  See  the  “Macros”  section  for  information  on
             defining blocks.

       <b>pic</b> <u>pic_statement</u>

             This  issues  the given <u>pic</u> statements  in the enclosing <b>.PS</b> and <b>.PE</b> at the point where the command
             is issued.

             Statements that begin with a period are considered to be <u>troff</u>(statements) and are  output  in  the
             enclosing <b>.PS</b> and <b>.PE</b> at the point where the command appears.

             For  the  purposes  of relative placement of <u>pic</u> or <u>troff</u> commands, the frame is output immediately
             before the first plotted object, or the <b>frame</b> statement, if any.  If  the  user  specifies  <u>pic</u>  or
             <u>troff</u>  commands  and  neither  any  plottable  object nor a <b>frame</b> command, the commands will not be
             output.

       <b>graph</b> <u>Name</u> <u>pic_commands</u>

             This command is used to position graphs with respect to each other.  The current graph is given the
             <u>pic</u> name <u>Name</u> (names used by <u>pic</u> begin with capital letters).  Any <u>pic</u> commands following the graph
             are used to position the next graph.  The frame of the graph is available for  use  with  <u>pic</u>  name
             <b>Frame.</b> The following places a second graph below the first:

                         graph Linear
                         [ graph description ]
                         graph Exponential with .Frame.n at \
                                 Linear.Frame.s - (0, .05)
                         [ graph description ]

       <u>name</u> <u>=</u> <u>expr</u>

             This assigns <u>expr</u> to the variable <u>name</u>.  <b>grap</b> has only numeric (double) variables.

             Assignment  creates a variable if it does not exist.  Variables persist across graphs.  Assignments
             can cascade; <b>a</b> <b>=</b> <b>b</b> <b>=</b> <b>35</b> assigns 35 to <b>a</b> and <b>b</b>.

       <b>bar</b> (<b>up</b>|<b>right</b>) [<u>coordinates_name</u>] <u>offset</u> <b>ht</b> <u>height</u> [<b>wid</b> <u>width</u>] [<b>base</b> <u>base_offset</u>] [<u>line_description</u>]

       <b>bar</b> [<u>coordinates_name</u>] <u>expr</u>, <u>expr</u>, [<u>coordinates_name</u>] <u>expr</u>, <u>expr</u>, [<u>line_description</u>]

             The <b>bar</b> command facilitates drawing bar graphs.  The first form of the command  describes  the  bar
             somewhat  generally  and  has <b>grap</b> place it.  The bar may extend up or to the right, is centered on
             <u>offset</u> and extends up or right <u>height</u> units (in the given coordinate system).  For example

                         bar up 3 ht 2

             draws a 2 unit high bar sitting on the x axis, centered on x=3.  By default bars are 1  unit  wide,
             but  this  can  be  changed with the <b>wid</b> keyword.  By default bars sit on the base axis, i.e., bars
             directed up will extend from y=0.  That may be overridden by the <b>base</b> keyword.  (The bar  described
             above has corners (2.5, 0) and (3.5, 2).)

             The  line  description  has been extended to include a <b>fill</b> <u>expr</u> keyword that specifies the shading
             inside the bar.  Bars may be drawn in any  line  style.   They  support  the  <b>color</b>  and  <b>fillcolor</b>
             keywords described under <b>circle</b>.

             The  second  form  of  the command draws a box with the two points as corners.  This can be used to
             draw boxes highlighting certain data as well as bar graphs.  Note that filled bars will cover  data
             drawn under them.

   <b>Control</b> <b>Flow</b>
       <b>if</b> <u>expr</u> <b>then</b> <u>block</u> [<b>else</b> <u>block</u>]

             The  <b>if</b>  statement provides simple conditional execution.  If <u>expr</u> is non-zero, the <u>block</u> after the
             <b>then</b> statement is executed.  If not the <u>block</u> after the <b>else</b> is executed, if present.  See “Macros”
             for the definition of blocks.  Early versions of this implementation of <b>grap</b> treated the blocks  as
             macros that were defined and expanded in place.  This led to unnecessary confusion because explicit
             separators  were  sometimes called for.  Now, <b>grap</b> inserts a separator (;) after the last character
             in <u>block</u>, so constructs like

             if (x == 3) { y = y + 1 }
             x = x + 1

             behave as expected.  A separator is also appended to the end of a <b>for</b> block.

       <b>for</b> <u>name</u> <b>from</b> <u>from_expr</u> <b>to</b> <u>to_expr</u> [<b>by</b> [+|-|*|/] <u>by_expr</u>] <b>do</b> <u>block</u>

             This command executes <u>block</u> iteratively.  The variable <u>name</u> is set to <u>from_expr</u> and incremented  by
             <u>by_expr</u>  until  it  exceeds <u>to_expr</u>.  The iteration has the semantics defined in the <b>ticks</b> command.
             The definition of <u>block</u> is discussed in “Macros”.  See also the note about implicit  separators  in
             the description of the <b>if</b> command.

             An <b>=</b> can be used in place of <b>from</b>.

   <b>Expressions</b>
       <b>grap</b>  supports most standard arithmetic operators: + - / * ^.  The carat (^) is exponentiation.  In an <b>if</b>
       statement <b>grap</b> also supports the C logical operators ==, !=, &amp;&amp;, || and unary !.  Also in an <b>if</b>,  ==  and
       != are overloaded for the comparison of quoted strings.  Parentheses are used for grouping.

       Assignment is not allowed in an expression in any context, except for simple cascading of assignments.  <b>a</b>
       <b>=</b> <b>b</b> <b>=</b> <b>35</b> works as expected; <b>a</b> <b>=</b> <b>3.5</b> <b>*</b> <b>(b</b> <b>=</b> <b>10)</b> does not execute.

       <b>grap</b> supports the following functions that take one argument: <b>log</b>, <b>exp</b>, <b>int</b>, <b>sin</b>, <b>cos</b>, <b>sqrt</b>, <b>rand</b>, <b>floor</b>,
       <b>ceil</b>.   The  logarithms are base 10 and the trigonometric functions are in radians.  <b>eexp</b> returns Euler's
       number to the given power and  <b>ln</b>  returns  the  natural  logarithm.   The  natural  log,  exponentiation
       functions and floor and ceil are extensions and are probably not available in other <b>grap</b> implementations.

       <b>rand</b>  returns  a  random number uniformly distributed on [0,1).  The following two-argument functions are
       supported: <b>atan2</b>, <b>min</b>, <b>max</b>.  <b>atan2</b> works just like <u><a href="../man3/atan2.3.html">atan2</a></u>(3).  The random number generator can  be  seeded
       by  calling <b>srand</b> with a single parameter (converted internally to an integer).  Because its return value
       is of no use, you must use <b>srand</b> as a separate statement, it is not part of a valid expression.  <b>srand</b> is
       not portable.

       The <b>getpid</b> function takes no arguments and returns the process id.  This may be used to seed  the  random
       number generator, but do not expect cryptographically random values to result.

       Other than string comparison, no expressions can use strings.  One string valued function exists: <b>sprintf</b>
       (<u>format</u>,  [<u>expr</u>  [<u>,</u>  <u>expr</u>]]  ).  It operates like <u><a href="../man3/sprintf.3.html">sprintf</a></u>(3), except returning the value.  It can be used
       anywhere a quoted string is used.  If <b>grap</b> is  run  with  <b>-S</b>,  the  environment  variable  GRAP_SAFER  is
       defined,  or  <b>grap</b>  has  been  compiled  for  safer operation, the <b>sprintf</b> command will return the format
       string.  This mode of operation is only intended to be used only if <b>grap</b> is  being  used  as  part  of  a
       super-user enabled print system.

       <b>grap</b> version 1.44 and beyond support two functions for date and time manipulation, <b>strptime</b> and <b>strptime</b>.
       <b>strptime</b> parses a time using the <u><a href="../man3/strptime.3.html">strptime</a></u>(3) function.  It takes two parameters, both strings, the format
       and  a string to parse using that format and returns a number that can be sorted directly - the number of
       seconds since the UNIX epoch.  <b>strftime</b> does the reverse.  It takes a string and a number and formats the
       number into a date.  In both functions, the format is the first parameter.  The formats  are  defined  in
       the documentation for <u><a href="../man3/strftime.3.html">strftime</a></u>(3).

   <b>Macros</b>
       <b>grap</b> has a simple but powerful macro facility.  Macros are defined using the <b>define</b> command :

       <b>define</b> <u>name</u> <u>block</u>
       <b>undefine</b> <u>name</u>

             Every  occurrence  of  <u>name</u>  in  the  program  text is replaced by the contents of <u>block</u>.  <u>block</u> is
             defined by a series of statements in nested { }'s, or a series of statements surrounded by the same
             letter.  An example of the latter is

                         define foo  X coord x 1,3 X
             Each time <b>foo</b> appears in the text, it will be replaced by <b>coord</b> <b>x</b> <b>1,3</b>.  Macros are literal, and can
             contain newlines.  If a macro does not span multiple lines, it should end in a semicolon  to  avoid
             parsing errors.

             Macros  can  take parameters, too.  If a macro call is followed by a parenthesized, comma-separated
             list the values starting with $1 will be replaced in the macro with the elements of the list.  A  $
             not  followed  by  a  digit  is  left  unchanged.   This parsing is very rudimentary; no nesting or
             parentheses or escaping of commas is allowed.  Also, there is no way to say argument 1 followed  by
             a digit (${1}0 in <a href="../man1/sh.1.html">sh</a>(1)).

             The following will draw a line with slope 1.

                         define foo { next at $1, $2 }
                         for i from 1 to 5 { foo(i,i) }
             Macros  persist  across  graphs.   The file <u>/usr/share/grap/grap.defines</u> contains simple macros for
             plotting common characters.  The <b>undefine</b> command deletes a macro.

             See the directory <u>/usr/share/doc/grap/examples</u> for more examples of macros.  Confirm  the  location
             of the examples directory using the <b>-v</b> flag.

   <b>Number</b> <b>Lists</b>
       A  whitespace-separated  list  of  numbers  is  treated  specially.  The list is taken to be points to be
       plotted using the default line style on the default coordinate system.  If  more  than  two  numbers  are
       given,  the extra numbers are taken to be additional y values to plot at the first x value.  Number lists
       in DWB <b>grap</b> can be comma-separated, and this <b>grap</b> supports that as  well.   More  precisely,  numbers  in
       number lists can be separated by either whitespace, commas, or both.

             1 2 3
             4 5 6

       Will  plot  points  using the default line style at (1,2), (1,3),(4,5) and (4,6).  A simple way to plot a
       set of numbers in a file named <u>./data</u> is:

             .G1
             copy "./data"
             .G2

   <b>Pic</b> <b>Macros</b>
       <b>grap</b> defines pic macros that can be used in embedded pic code to place elements in the graph.  The macros
       are <b>x_gg</b>, <b>y_gg</b>, and <b>xy_gg</b>.  These macros define pic distances that  correspond  to  the  given  argument.
       They can be used to size boxes or to plot pic constructs on the graph.  To place a given construct on the
       graph,  you  should add Frame.Origin to it.  Other coordinate spaces can be used by replacing <b>gg</b> with the
       name of the coordinate space.  A coordinate space named <b>gg</b> cannot be reliably accessed by these macros.

       The macros are emitted immediately before the frame is drawn.

       DWB <b>grap</b> may use these as part of its implementation.  This <b>grap</b> provides them  only  for  compatibility.
       Note that these are very simple macros, and may not do what you expect under complex conditions.

</pre><h4><b>ENVIRONMENT</b> <b>VARIABLES</b></h4><pre>
       If  the environment variable GRAP_DEFINES is defined, <b>grap</b> will look for its defines file there.  If that
       value is a relative path name the path specified in the <b>-M</b> option will be searched for it.   GRAP_DEFINES
       overrides the compiled in location of the defines file, but may be overridden by the <b>-d</b> or <b>-D</b> flags.

       If GRAP_SAFER is set, <b>sprintf</b> is disabled to prevent forcing <b>grap</b> to core dump or smash the stack.

</pre><h4><b>FILES</b></h4><pre>
       <u>/usr/share/grap/grap.defines</u>

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <u><a href="../man3/atan2.3.html">atan2</a></u>(3), <u><a href="../man1/groff.1.html">groff</a></u>(1), <u><a href="../man1/pic.1.html">pic</a></u>(1), <u><a href="../man3/printf.3.html">printf</a></u>(3), <u><a href="../man1/sh.1.html">sh</a></u>(1), <u><a href="../man3/sprintf.3.html">sprintf</a></u>(3), <u><a href="../man1/troff.1.html">troff</a></u>(1)

       If  documentation  and  examples  have  been  installed,  <b>grap</b>  <b>--version</b> or <b>grap</b> <b>--help</b> will display the
       locations.

</pre><h4><b>BUGS</b></h4><pre>
       There are several small incompatibilities with K&amp;R <b>grap</b>.  They  include  the  <b>sh</b>  command  not  expanding
       variables and macros, and a more strict adherence to parameter order in the internal commands.

       Although  much improved, the error reporting code can still be confused.  Notably, an error in a macro is
       not detected until the macro is used, and it produces unusual output in the error message.

       Iterating many times over a macro with no newlines can run <b>grap</b> out of memory.

</pre><h4><b>AUTHOR</b></h4><pre>
       This implementation was done by Ted  Faber  &lt;<a href="mailto:faber@lunabase.org">faber@lunabase.org</a>&gt;.   Bruce  Lilly  &lt;<a href="mailto:bruce.lilly@gmail.com">bruce.lilly@gmail.com</a>&gt;
       contributed  many  bug  fixes,  including  a considerable revamp of the error reporting code.  If you can
       actually find an error in your <b>grap</b> code, you can probably thank him.  <b>grap</b> was designed and specified by
       Brian Kernighan and Jon Bentley.

Debian                                           March 11, 2006                                          <u><a href="../man1/GRAP.1.html">GRAP</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>