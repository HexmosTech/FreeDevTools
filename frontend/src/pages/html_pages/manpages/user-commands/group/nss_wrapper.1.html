<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>nss_wrapper - A wrapper for the user, group and hosts NSS API</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/libnss-wrapper">libnss-wrapper_1.1.16-1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       nss_wrapper - A wrapper for the user, group and hosts NSS API

</pre><h4><b>SYNOPSIS</b></h4><pre>
       LD_PRELOAD=libnss_wrapper.so NSS_WRAPPER_PASSWD=/path/to/passwd NSS_WRAPPER_GROUP=/path/to/group
       NSS_WRAPPER_HOSTS=/path/to/host <b>./myapplication</b>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       There are projects which provide daemons needing to be able to create, modify and delete Unix users. Or
       just switch user ids to interact with the system e.g. a user space file server. To be able to test that
       you need the privilege to modify the passwd and groups file. With nss_wrapper it is possible to define
       your own passwd and groups file which will be used by software to act correctly while under test.

       If you have a client and server under test they normally use functions to resolve network names to
       addresses (dns) or vice versa. The nss_wrappers allow you to create a hosts file to setup name resolution
       for the addresses you use with socket_wrapper.

       •   Provides information for user and group accounts.

       •   Network name resolution using a hosts file.

       •   Loading and testing of NSS modules.

</pre><h4><b>LIMITATIONS</b></h4><pre>
       Some calls in nss_wrapper will only work if uid_wrapper is loaded and active. One of this functions is
       initgroups() which needs to run setgroups() to set the groups for the user. setgroups() is wrapped by
       uid_wrapper.

</pre><h4><b>ENVIRONMENT</b> <b>VARIABLES</b></h4><pre>
       <b>NSS_WRAPPER_PASSWD</b>, <b>NSS_WRAPPER_GROUP</b>
           For user and group accounts you need to create two files: <u>passwd</u> and <u>group</u>. The format of the passwd
           file we support is:

       name:password:UID:GID:GECOS:directory:shell

       The format of the group file we support is:

       group_name:password:GID:user_list

       They are also described in <u>man</u> <u>passwd.5</u> and <u>man</u> <u>group.5</u> on Linux. You can fill these files with made up
       accounts. You point nss_wrapper to them using the two variables NSS_WRAPPER_PASSWD=/path/to/your/passwd
       and NSS_WRAPPER_GROUP=/path/to/your/group.

       <b>NSS_WRAPPER_HOSTS</b>
           If you also need to emulate network name resolution in your environment, especially with
           socket_wrapper, you can write a hosts file. The format is described in <u>man</u> <u>5</u> <u>hosts</u>. Then you can
           point nss_wrapper to your hosts file using: NSS_WRAPPER_HOSTS=/path/to/your/hosts

       <b>NSS_WRAPPER_HOSTNAME</b>
           If you need to return a hostname which is different from the one of your machine is using you can
           use: NSS_WRAPPER_HOSTNAME=test.example.org

       <b>NSS_WRAPPER_MODULE_SO_PATH</b>, <b>NSS_WRAPPER_MODULE_FN_PREFIX</b>
           If you have a project which also provides user and group information out of a database, you normally
           write your own nss modules. nss_wrapper is able to load nss modules and ask them first before looking
           into the faked passwd and group file. To point nss_wrapper to the module you can do that using
           NSS_WRAPPER_MODULE_SO_PATH=/path/to/libnss_yourmodule.so. As each nss module has a special prefix
           like _nss_winbind_getpwnam() you need to set the prefix too so nss_wrapper can load the functions
           with NSS_WRAPPER_MODULE_FN_PREFIX=&lt;prefix&gt;.

       For _nss_winbind_getpwnam() this would be:

           NSS_WRAPPER_MODULE_FN_PREFIX=winbind

       <b>NSS_WRAPPER_DEBUGLEVEL</b>
           If you need to see what is going on in nss_wrapper itself or try to find a bug, you can enable
           logging support in nss_wrapper if you built it with debug symbols.

           •   0 = ERROR

           •   1 = WARNING

           •   2 = DEBUG

           •   3 = TRACE

       <b>NSS_WRAPPER_DISABLE_DEEPBIND</b>
           This allows you to disable deep binding in nss_wrapper. This is useful for running valgrind tools or
           sanitizers like (address, undefined, thread).

</pre><h4><b>EXAMPLE</b></h4><pre>
           $ echo "bob:x:1000:1000:bob gecos:/home/test/bob:<a href="file:/bin/false">/bin/false</a>" &gt; passwd
           $ echo "root:x:65534:65532:root gecos:/home/test/root:<a href="file:/bin/false">/bin/false</a>" &gt;&gt; passwd
           $ echo "users:x:1000:" &gt; group
           $ echo "root:x:65532:" &gt;&gt; group
           $ LD_PRELOAD=libnss_wrapper.so NSS_WRAPPER_PASSWD=passwd \
             NSS_WRAPPER_GROUP=group getent passwd bob
           bob:x:1000:1000:bob gecos:/home/test/bob:<a href="file:/bin/false">/bin/false</a>
           $ LD_PRELOAD=libnss_wrapper.so NSS_WRAPPER_HOSTNAME=test.example.org hostname
           test.example.org

</pre><h4><b>AUTHOR</b></h4><pre>
       Samba Team

                                                   2024-09-22                                     <u><a href="../man1/NSS_WRAPPER.1.html">NSS_WRAPPER</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>