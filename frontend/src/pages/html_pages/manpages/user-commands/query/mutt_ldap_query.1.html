<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>mutt_ldap_query - Query LDAP server for Mutt mail-reader</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/lbdb">lbdb_0.56-1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       mutt_ldap_query - Query LDAP server for Mutt mail-reader

</pre><h4><b>SYNOPSIS</b></h4><pre>
       mutt_ldap_query.pl [options] &lt;name_to_query&gt; [[&lt;other_name_to_query&gt;] ...]

</pre><h4><b>OPTIONS</b></h4><pre>
       <b>--config=config_file</b> or <b>-c</b> <b>config_file</b>
               specify   an   alternate   resource  file  other  than  the  system  ones  (<u>/etc/lbdb_ldap.rc</u>  or
               <u>/etc/mutt_ldap_query.rc</u>)    or    default    personal    ones     (<u>$XDG_CONFIG_HOME/lbdb/ldap.rc</u>,
               <u>$HOME/.lbdb/ldap.rc</u> or <u>$HOME/.mutt_ldap_query.rc</u>).

       <b>--server=ldap_server</b> or <b>-ls</b> <b>ldap_server</b>
               hostname  of  your  ldap server.  You can also use an ldap://foo[:port] or ldaps://foo[:port] URL
               here   to    talk    to    different    ports    or    SSL    encrypted    servers.     Or    use
               ldapi://%2fvar%2flib%2fldap_sock to access an ldap server via a socket (use %2f as as replacement
               for a slash in the file name).

       <b>--search_base=ldap_search_base</b> or <b>-sb</b> <b>ldap_search_base</b>
               use &lt;search_base&gt; as the starting point for the search instead of the default.

       <b>--search_fields=ldap_search_fields</b> or <b>-sf</b> <b>ldap_search_fields</b>
               list of the fields on which the query will be performed.

       <b>--expected_answers=ldap_expected_answers</b> or <b>-ea</b> <b>ldap_expected_answers</b>
               list  of the fields expected as the answer of the ldap server that will be used for composing the
               output of the script.

       <b>--format_email=result_format_email</b> or <b>-fe</b> <b>result_format_email</b>
               format to be used for composing the email output result. It has to be based on the expected  ldap
               server  answers and can use variable containers of the form ${variable} where variable belongs to
               the &lt;ldap_expected_answers&gt; set.

       <b>--format_realname=result_format_realname</b> or <b>-fr</b> <b>result_format_realname</b>
               format to be used for composing the realname output result. It has to be based  on  the  expected
               ldap  server  answers  and  can  use  variable  containers of the form ${variable} where variable
               belongs to the &lt;ldap_expected_answers&gt; set.

       <b>--format_comment=result_format_comment</b> or <b>-fc</b> <b>result_format_comment</b>
               format to be used for composing the comment output result. It has to be  based  on  the  expected
               ldap  server  answers  and  can  use  variable  containers of the form ${variable} where variable
               belongs to the &lt;ldap_expected_answers&gt; set.

       <b>--bind_dn=bind_distinguished_name</b> or <b>-bd</b> <b>bind_distinguished_name</b>
               the destinguished name of the user who binds to the LDAP server.  Leave it empty for an anonmyous
               bind.

       <b>--bind_password=secret</b> or <b>-bp</b> <b>secret</b>
               the bind password for binding to the LDAP server.  Leave it empty for an anonmyous bind.

       <b>--tls=1</b> or <b>--tls=0</b>
               enable or disable transport layer security (TLS).

       <b>--sasl_mech=mechanism</b> or <b>-sm</b> <b>mechanism</b>
               the SASL mechanism, for example GSSAPI (empty string to turn off).

       <b>--scope=ldap_scope</b>
               The default search applies to the whole tree. Specifying the optional scope parameter allows  the
               search to be limited in various ways. Some valid values include: 'base', 'one', 'sub', 'subtree',
               'children'. See the Net::LDAP CPAN documentation for more information.

       <b>--nickname=ldap_server_nickname</b> or <b>-n</b> <b>ldap_server_nickname</b>
               shortcut  for  avoiding  to use all the previous options by using the script builtin or alternate
               config file table of common servers and associated options.  All the required parameters are then
               derived by performing a &lt;lbdb_server_nickname&gt; lookup.

       <b>--debug</b> or <b>-d</b>
               turn on debugging messages.

       <b>--help</b> or <b>-?</b> or <b>-h</b> or <b>--man</b> or <b>-m</b>
               generates this help message.

       <b>--ignorant</b> or <b>-i</b>
               ignorant mode: search using wildcard for *name_to_query* (requires a longer processing from  LDAP
               server but is quite convenient :).

       <b>--lbdb_output</b> or <b>-l</b>
               suppress  number  of  matches  output  (suited  for  interfacing  with  little  brother  database
               https://www.spinnaker.de/lbdb/)

       <b>--version</b> or <b>-v</b>
               show the version.

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>mutt_ldap_query</b> performs ldap queries using either ldapsearch command or  the  perl-ldap  module  and  it
       outputs the required formatted data for feeding mutt when using its "External Address Query" feature.

       The  output  of  the  script consists in 3 fields separated with tabs: the email address, the name of the
       person and a comment.

</pre><h4><b>INTERFACING</b> <b>WITH</b> <b>MUTT</b></h4><pre>
       This perl script can be interfaced with mutt by defining in your .muttrc:

           set query_command = "mutt_ldap_query.pl %s"

       Multiple requests are supported: the "Q" command of mutt accepts as argument  a  list  of  queries  (e.g.
       "Gosse de\ Courville").

       Alternatively  mutt_ldap_query  can  be  interfaced  with  the more generic little brother database query
       program (https://www.spinnaker.de/lbdb/) using:

           set query_command = "lbdbq %s"

       and by specifying in your <a href="file:~/.lbdb/lbdbrc">~/.lbdb/lbdbrc</a> file another method of query just adding to the METHODS variable
       the m_ldap module e.g.:

           METHODS='m_inmail m_passwd m_ldap m_muttalias m_finger'

       and the right path to access m_ldap in MODULES_PATH, e.g. if you moved <u>m_ldap</u> in <u><a href="file:~/.lbdb/modules">~/.lbdb/modules</a></u>:

           MODULES_PATH="<a href="file:/usr/local/lib">/usr/local/lib</a> $HOME/.lbdb/modules"

       Just make sure to use the correct path for calling mutt_ldap_query in the m_ldap script.

</pre><h4><b>RESOURCE</b> <b>FILE</b> <b>FORMAT</b></h4><pre>
       mutt_ldap_query is now fully customizable using an external resource  file.  By  default  mutt_ldap_query
       parses    the    system    definition    file    located    generally   at   <u>/etc/mutt_ldap_query.rc</u>   or
       <u>/usr/local/etc/mutt_ldap_query.rc</u> and also the user one: <u>$HOME/.mutt_ldap_query.rc</u>.

       Instead of using command line options, the user can redefine all the variables using the resource file by
       two manners in order to match his site configuration.  A file example is provided below:

           # The format of each entry of the ldap server database is the following:
           # LDAP_NICKNAME =&gt; ['LDAP_SERVER',
           #                   'LDAP_SEARCH_BASE',
           #                   'LDAP_SEARCH_FIELDS',
           #                   'LDAP_EXPECTED_ANSWERS',
           #                   'LDAP_RESULT_EMAIL',
           #                   'LDAP_RESULT_REALNAME',
           #                   'LDAP_RESULT_COMMENT'],

           # a practical illustrating example being:
           #  debian   =&gt; ['db.debian.org',
           #               'ou=users,dc=debian,dc=org',
           #               'uid cn sn ircnick',
           #               'uid cn sn ircnick',
           #               '${uid}@debian.org',
           #               '${cn} ${sn}',
           #               '${ircnick}'],
           # the output of the query will be then:
           # ${uid}@debian.org\t${cn} ${sn}\t${ircnick} (i.e.: email name comment)

           # warning this database will erase default script builtin
           %ldap_server_db = (
             'four11'          =&gt; ['ldap.four11.com',
                                   'c=US',
                                   'givenname sn cn mail',
                                   'givenname cn sn mail o',
                                   '${mail}',
                                   '${givenname} ${sn}',
                                   '${o}' ],
             'infospace'       =&gt; ['ldap.infospace.com',
                                   'c=US',
                                   'givenname sn cn mail',
                                   'givenname cn sn mail o',
                                   '${mail}',
                                   '${givenname} ${sn}',
                                   '${o}' ],
             'whowhere'        =&gt; ['ldap.whowhere.com',
                                   'c=US',
                                   'givenname sn cn mail',
                                   'givenname cn sn mail o',
                                   '${mail}',
                                   '${givenname} ${sn}',
                                   '${o}' ],
             'bigfoot'         =&gt; ['ldap.bigfoot.com',
                                   'c=US',
                                   'givenname sn cn mail'
                                  , 'givenname cn sn mail o'
                                  , '${mail}'
                                  , '${givenname} ${sn}',
                                   '${o}' ],
             'switchboard'     =&gt; ['ldap.switchboard.com',
                                   'c=US',
                                   'givenname sn cn mail'
                                  , 'givenname cn sn mail o',
                                   '${mail}',
                                   '${givenname} ${sn}',
                                   '${o}' ],
             'infospacebiz'    =&gt; ['ldapbiz.infospace.com',
                                   'c=US',
                                   'givenname sn cn mail',
                                   'givenname cn sn mail o',
                                   '${mail}',
                                   '${givenname} ${sn}',
                                   '${o}' ],
           );

           # hostname of your ldap server
           $ldap_server = 'ldap.four11.com';
           # ldap base search
           $search_base = 'c=US';
           # list of the fields that will be used for the query
           $ldap_search_fields = 'givenname sn cn mail';
           # list of the fields that will be used for composing the answer
           $ldap_expected_answers = 'givenname sn cn mail o';
           # format of the email result based on the expected answers of the ldap query
           $ldap_result_email = '${mail}';
           # format of the realname result based on the expected answers of the ldap query
           $ldap_result_realname = '${givenname} ${sn}';
           # format of the comment result based on the expected answers of the ldap query
           $ldap_result_comment = '(${o})';

</pre><h4><b>EXAMPLES</b> <b>OF</b> <b>QUERIES</b></h4><pre>
           mutt_ldap_query.pl --ldap_server='ldap.mot.com' \
              --search_base='ou=employees, o=Motorola,c=US' \
              --ldap_search_fields='commonName gn sn cn uid' \
              --ldap_expected_answers='gn sn preferredRfc822Recipient ou c telephonenumber' \
              --ldap_result_email='${preferredRfc822Recipient}' \
              --ldap_result_realname='${gn} ${sn}' \
              --ldap_result_comment='(${telephonenumber}) ${ou} ${c}' \
              Gosse de\ Courville

       performs a query using the ldap server ldap.mot.com using the  following  searching  base  'ou=employees,
       o=Motorola,c=US' and performing a search on the fields 'commonName gn sn cn uid' for 'Gosse' and then "de
       Courville" looking for the following answers 'gn sn preferredRfc822Recipient ou c telephonenumber'. Based
       on this answers, mutt_ldap_query will return a list of entries identified of the form:

         &lt;${preferredRfc822Recipient}&gt;\t${gn} ${sn}\t(${telephonenumber}) ${ou} ${c}

       where ${} variables should be considered as containers that are replaced by the results of the query. The
       previous  query  can be greatly simplified by using the ldap server mini database feature of the resource
       file introducing for example a nickname.

           mutt_ldap_query.pl --ldap_server_nickname='motorola' Gosse de\ Courville

       When not sure of the full name (i.e. it should contain Courville) the ignorant mode is useful  since  the
       query will be performed using wildcards, i.e. *Courville* in the following case:

           mutt_ldap_query.pl --ignorant Courville

</pre><h4><b>WHERE</b> <b>TO</b> <b>GET</b> <b>IT</b></h4><pre>
       The latest version can be retrieved at
         <a href="ftp://ftp.mutt.org/pub/mutt/contrib">ftp://ftp.mutt.org/pub/mutt/contrib</a> or
         <a href="http://www.courville.org/">http://www.courville.org/</a>

       Note  that now the script is integrated in the latest version of the little brother database available at
       https://www.spinnaker.de/lbdb/.  It is thus easier to use through this  standard  package  than  to  hand
       customize it to fit your system/distribution needs.

</pre><h4><b>REFERENCES</b></h4><pre>
       - perl-ldap module
          <a href="http://perl-ldap.sourceforge.net/">http://perl-ldap.sourceforge.net/</a>

       - mutt is the ultimate email client
          <a href="http://www.mutt.org/">http://www.mutt.org/</a>

       - historical Brandon Blong's "External Address Query" feature patch for mutt
          <a href="http://www.fiction.net/blong/programs/mutt/">http://www.fiction.net/blong/programs/mutt/</a>#query

       - little  brother  database is an interface query program for mutt that allow multiple searches for email
         addresses based on external query scripts just like this one 8-)
          https://www.spinnaker.de/lbdb/

</pre><h4><b>AUTHORS</b></h4><pre>
       Marc de Courville &lt;<a href="mailto:marc@courville.org">marc@courville.org</a>&gt; and the various  other  contributors...  that  kindly  sent  their
       patches.

       Please report any bugs, or post any suggestions, to &lt;<a href="mailto:marc@courville.org">marc@courville.org</a>&gt;.

</pre><h4><b>COPYRIGHT</b></h4><pre>
       Copyright (c) 1998-2003 Marc de Courville &lt;<a href="mailto:marc@courville.org">marc@courville.org</a>&gt;. All rights reserved. This program is free
       software;  you  can  redistribute  it  and/or  modify  it under the GNU General Public License (GPL). See
       <a href="http://www.opensource.org/gpl-license.html">http://www.opensource.org/gpl-license.html</a> and <a href="http://www.opensource.org/">http://www.opensource.org/</a>.

perl v5.40.0                                       2025-01-24                                 <u><a href="../man1/MUTT_LDAP_QUERY.1.html">MUTT_LDAP_QUERY</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>