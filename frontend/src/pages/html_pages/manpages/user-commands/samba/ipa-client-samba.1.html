<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ipa-client-samba - Configure Samba file server on an IPA client</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/freeipa-client-samba">freeipa-client-samba_4.12.2-3_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       ipa-client-samba - Configure Samba file server on an IPA client

</pre><h4><b>SYNOPSIS</b></h4><pre>
       ipa-client-samba [<u>OPTION</u>]...

</pre><h4><b>DESCRIPTION</b></h4><pre>
       Configures  a Samba file server on the client machine to use IPA domain controller for authentication and
       identity services.

       The tool configures Samba file server to be a domain member of IPA domain. Samba  file  server  will  use
       SSSD to resolve information about users and groups, and will use IPA master it is enrolled against as its
       domain controller.

       It is not possible to reconciliate original Samba environment if that was pre-existing on the client with
       new  configuration.  Samba  databases  will  be  updated  to  follow  IPA  domain  details  and  <b>smb.conf</b>
       configuration will will be overwritten. It is recommended to enable Samba suite on a freshly deployed IPA
       client.

       During the configuration process, the tool will perform following steps:

              1. Discover details of IPA domain: realm, domain SID, domain ID range

              2. Discover details of trusted Active Directory domains: domain name, domain SID, domain ID range

              3. Create Samba configuration file using the details discovered above.

              4.  Create  Samba  Kerberos  service  using  host  credentials   and   fetch   its   keytab   into
              /etc/samba/samba.keytab. The Kerberos service key is pre-set to a randomly generated value that is
              shared with Samba.

              5.  Populate  Samba  databases  by  setting  the domain details and the randomly generated machine
              account password from the previous step.

              6. Create a default [homes] share to allow users to  log  in  to  their  home  directories  unless
              --no-homes option was specified.

       The tool does not start nor does it enable Samba file services after the configuration. In order to
       enable and start Samba file services, one needs to enable both <b>smb.service</b> and <b>winbind.service</b> system
       services. Please check that <b>/etc/samba/smb.conf</b> contains all settings for your use case as starting Samba
       service will make identity mapping details written into the Samba databases. To enable and start Samba
       file services at the same time one can use <b>systemctl</b> <b>enable</b> <b>--now</b> command:

              systemctl enable --now smb winbind

   <b>Assumptions</b>
       The ipa-client-samba script assumes that the machine has already been enrolled into IPA.

   <b>IPA</b> <b>Master</b> <b>Requirements</b>
       At  least  one  IPA  master  must  hold  a  <b>Trust</b>  <b>Controller</b>  role.  This  can  be  achieved  by running
       ipa-adtrust-install on the IPA master. The utility will configure IPA master to be  a  domain  controller
       for IPA domain.

       IPA  master  holding  a  <b>Trust</b>  <b>Controller</b> role has also to have support for a special service command to
       create SMB service, <b>ipa</b> <b>service-add-smb</b>. This command is available with IPA 4.8.0 or later release.

</pre><h4><b>OPTIONS</b></h4><pre>
   <b>BASIC</b> <b>OPTIONS</b>
       <b>--server</b>=<u>SERVER</u>
              Set the FQDN of the IPA server to connect to. Under  normal  circumstances,  this  option  is  not
              needed as the server to use is discovered automatically.

       <b>--no-homes</b>
              Do not configure a <b>[homes]</b> share by default to allow users to access their home directories.

       <b>--no-nfs</b>
              Do not enable SELinux booleans to allow Samba to re-share NFS shares.

       <b>--netbios-name</b>=<u>NETBIOS_NAME</u>
              NetBIOS  name  of  this  machine.  If  not  provided  then this is determined based on the leading
              component of the hostname.

       <b>-d</b>, <b>--debug</b>
              Print debugging information to stdout

       <b>-U</b>, <b>--unattended</b>
              Unattended installation. The user will not be prompted.

       <b>--uninstall</b>
              Revert Samba suite configuration changes and remove SMB service principal. It is not  possible  to
              preserve original Samba configuration: while <b>smb.conf</b> configuration file will be restored, various
              Samba  databases  would  not  be restored. In general, it is not possible to restore full original
              Samba environment.

       <b>--force</b>
              Force through the installation steps even if they were done before

</pre><h4><b>FILES</b></h4><pre>
       Files that will be replaced if Samba is configured:

              /etc/samba/smb.conf
              /etc/samba/samba.keytab

</pre><h4><b>EXIT</b> <b>STATUS</b></h4><pre>
       0 if the installation was successful

       1 if an error occurred

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man5/smb.conf.5.html">smb.conf</a>(5),</b> <b><a href="../man5/krb5.conf.5.html">krb5.conf</a>(5),</b> <b><a href="../man5/sssd.conf.5.html">sssd.conf</a>(5),</b> <b><a href="../man1/systemctl.1.html">systemctl</a>(1)</b>

IPA                                                Jun 10 2019                               <u><a href="../man1/ipa-client-samba.1.html">ipa-client-samba</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>