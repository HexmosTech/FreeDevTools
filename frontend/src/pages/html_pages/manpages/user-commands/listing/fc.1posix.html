<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>This  manual  page  is part of the POSIX Programmer's Manual.  The Linux implementation of this interface</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/manpages-posix">manpages-posix_2017a-2_all</a> <br><br><pre>
</pre><h4><b>PROLOG</b></h4><pre>
       This  manual  page  is part of the POSIX Programmer's Manual.  The Linux implementation of this interface
       may differ (consult the corresponding Linux manual page for details of Linux behavior), or the  interface
       may not be implemented on Linux.

</pre><h4><b>NAME</b></h4><pre>
       fc — process the command history list

</pre><h4><b>SYNOPSIS</b></h4><pre>
       fc <b>[</b>-r<b>]</b> <b>[</b>-e <u>editor</u><b>]</b> <b>[</b><u>first</u> <b>[</b><u>last</u><b>]]</b>

       fc -l <b>[</b>-nr<b>]</b> <b>[</b><u>first</u> <b>[</b><u>last</u><b>]]</b>

       fc -s <b>[</b><u>old</u>=<u>new</u><b>]</b> <b>[</b><u>first</u><b>]</b>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The  <u>fc</u>  utility  shall list, or shall edit and re-execute, commands previously entered to an interactive
       <u>sh</u>.

       The command history list shall reference commands by number. The first number in  the  list  is  selected
       arbitrarily.  The  relationship  of a number to its command shall not change except when the user logs in
       and no other process is accessing the list, at which time the system may reset the numbering to start the
       oldest retained command at another number (usually 1). When the number reaches an  implementation-defined
       upper  limit,  which  shall be no smaller than the value in <u>HISTSIZE</u> or 32767 (whichever is greater), the
       shell may wrap the numbers, starting the next command with a lower number (usually 1).  However,  despite
       this  optional  wrapping  of  numbers,  <u>fc</u> shall maintain the time-ordering sequence of the commands. For
       example, if four commands in sequence are given the numbers 32766, 32767, 1 (wrapped), and 2 as they  are
       executed, command 32767 is considered the command previous to 1, even though its number is higher.

       When  commands  are edited (when the <b>-l</b> option is not specified), the resulting lines shall be entered at
       the end of the history list and then re-executed by <u>sh</u>.  The <u>fc</u> command that caused the editing shall not
       be entered into the history list. If the editor returns a non-zero exit status, this shall  suppress  the
       entry  into  the  history  list  and  the command re-execution.  Any command line variable assignments or
       redirection operators used with <u>fc</u> shall affect both the <u>fc</u> command itself as well as  the  command  that
       results; for example:

           fc -s -- -1 2&gt;/dev/null

       reinvokes the previous command, suppressing standard error for both <u>fc</u> and the previous command.

</pre><h4><b>OPTIONS</b></h4><pre>
       The <u>fc</u> utility shall conform to the Base Definitions volume of POSIX.1‐2017, <u>Section</u> <u>12.2</u>, <u>Utility</u> <u>Syntax</u>
       <u>Guidelines</u>.

       The following options shall be supported:

       <b>-e</b> <u>editor</u> Use  the  editor  named  by  <u>editor</u>  to edit the commands. The <u>editor</u> string is a utility name,
                 subject to search via the <u>PATH</u> variable (see  the  Base  Definitions  volume  of  POSIX.1‐2017,
                 <u>Chapter</u> <u>8</u>, <u>Environment</u> <u>Variables</u>).  The value in the <u>FCEDIT</u> variable shall be used as a default
                 when <b>-e</b> is not specified. If <u>FCEDIT</u> is null or unset, <u>ed</u> shall be used as the editor.

       <b>-l</b>        (The  letter ell.) List the commands rather than invoking an editor on them. The commands shall
                 be written in the sequence indicated by the <u>first</u> and <u>last</u> operands, as affected  by  <b>-r</b>,  with
                 each command preceded by the command number.

       <b>-n</b>        Suppress command numbers when listing with <b>-l</b>.

       <b>-r</b>        Reverse the order of the commands listed (with <b>-l</b>) or edited (with neither <b>-l</b> nor <b>-s</b>).

       <b>-s</b>        Re-execute the command without invoking an editor.

</pre><h4><b>OPERANDS</b></h4><pre>
       The following operands shall be supported:

       <u>first</u>, <u>last</u>
                 Select the commands to list or edit. The number of previous commands that can be accessed shall
                 be  determined  by the value of the <u>HISTSIZE</u> variable. The value of <u>first</u> or <u>last</u> or both shall
                 be one of the following:

                 <b>[+]</b><u>number</u> A positive number representing a command number; command  numbers  can  be  displayed
                           with the <b>-l</b> option.

                 <b>-</b><u>number</u>   A  negative  decimal  number  representing  the  command  that was executed <u>number</u> of
                           commands previously. For example, -1 is the immediately previous command.

                 <u>string</u>    A string indicating the most recently entered command that begins with  that  string.
                           If  the  <u>old</u>=<u>new</u>  operand is not also specified with <b>-s</b>, the string form of the <u>first</u>
                           operand cannot contain an embedded &lt;equals-sign&gt;.

                 When the synopsis form with <b>-s</b> is used:

                  *  If <u>first</u> is omitted, the previous command shall be used.

                 For the synopsis forms without <b>-s</b>:

                  *  If <u>last</u> is omitted, <u>last</u> shall default to  the  previous  command  when  <b>-l</b>  is  specified;
                     otherwise, it shall default to <u>first</u>.

                  *  If  <u>first</u>  and  <u>last</u>  are  both  omitted,  the  previous 16 commands shall be listed or the
                     previous single command shall be edited (based on the <b>-l</b> option).

                  *  If <u>first</u> and <u>last</u> are both present, all of the commands from <u>first</u> to <u>last</u> shall be  edited
                     (without  <b>-l</b>)  or  listed  (with  <b>-l</b>).   Editing multiple commands shall be accomplished by
                     presenting to the editor all of the commands at one time, each command starting  on  a  new
                     line. If <u>first</u> represents a newer command than <u>last</u>, the commands shall be listed or edited
                     in  reverse  sequence,  equivalent to using <b>-r</b>.  For example, the following commands on the
                     first line are equivalent to the corresponding commands on the second:

                         fc -r 10 20    fc    30 40
                         fc    20 10    fc -r 40 30

                  *  When a range of commands is used, it shall not be an error to specify <u>first</u> or <u>last</u>  values
                     that  are not in the history list; <u>fc</u> shall substitute the value representing the oldest or
                     newest command in the list, as appropriate. For example, if there are only ten commands  in
                     the history list, numbered 1 to 10:

                         fc -l
                         fc 1 99

                     shall list and edit, respectively, all ten commands.

       <u>old</u>=<u>new</u>   Replace the first occurrence of string <u>old</u> in the commands to be re-executed by the string <u>new</u>.

</pre><h4><b>STDIN</b></h4><pre>
       Not used.

</pre><h4><b>INPUT</b> <b>FILES</b></h4><pre>
       None.

</pre><h4><b>ENVIRONMENT</b> <b>VARIABLES</b></h4><pre>
       The following environment variables shall affect the execution of <u>fc</u>:

       <u>FCEDIT</u>    This  variable, when expanded by the shell, shall determine the default value for the <b>-e</b> <u>editor</u>
                 option's <u>editor</u> option-argument. If <u>FCEDIT</u> is null or unset, <u>ed</u> shall be used as the editor.

       <u>HISTFILE</u>  Determine a pathname naming a command history file. If the <u>HISTFILE</u> variable is  not  set,  the
                 shell  may  attempt  to access or create a file <b>.sh_history</b> in the directory referred to by the
                 <u>HOME</u> environment variable. If the shell cannot obtain both read and write access to, or create,
                 the history file, it shall use an unspecified mechanism that  allows  the  history  to  operate
                 properly.  (References  to  history  ``file''  in this section shall be understood to mean this
                 unspecified mechanism in such cases.) An implementation may choose to access this variable only
                 when initializing the history file; this initialization shall occur when <u>fc</u> or <u>sh</u> first attempt
                 to retrieve entries from, or add entries to, the file, as the result of commands issued by  the
                 user,  the  file named by the <u>ENV</u> variable, or implementation-defined system start-up files. In
                 some historical shells, the history file is initialized  just  after  the  <u>ENV</u>  file  has  been
                 processed.  Therefore,  it is implementation-defined whether changes made to <u>HISTFILE</u> after the
                 history file has been initialized are effective.  Implementations may  choose  to  disable  the
                 history  list  mechanism  for  users  with  appropriate privileges who do not set <u>HISTFILE</u>; the
                 specific circumstances under which this occurs are implementation-defined.  If  more  than  one
                 instance  of  the  shell  is  using the same history file, it is unspecified how updates to the
                 history file from those shells interact. As entries are deleted from  the  history  file,  they
                 shall  be  deleted  oldest  first.  It  is unspecified when history file entries are physically
                 removed from the history file.

       <u>HISTSIZE</u>  Determine a decimal number representing the limit to the number of previous commands  that  are
                 accessible.  If  this  variable  is  unset, an unspecified default greater than or equal to 128
                 shall be used. The maximum number of commands in the history list is unspecified, but shall  be
                 at  least  128. An implementation may choose to access this variable only when initializing the
                 history file, as described under <u>HISTFILE</u>.  Therefore, it is unspecified whether  changes  made
                 to <u>HISTSIZE</u> after the history file has been initialized are effective.

       <u>LANG</u>      Provide a default value for the internationalization variables that are unset or null. (See the
                 Base  Definitions  volume  of POSIX.1‐2017, <u>Section</u> <u>8.2</u>, <u>Internationalization</u> <u>Variables</u> for the
                 precedence  of  internationalization  variables  used  to  determine  the  values   of   locale
                 categories.)

       <u>LC_ALL</u>    If  set  to a non-empty string value, override the values of all the other internationalization
                 variables.

       <u>LC_CTYPE</u>  Determine the locale for the interpretation of sequences of bytes of text  data  as  characters
                 (for example, single-byte as opposed to multi-byte characters in arguments and input files).

       <u>LC_MESSAGES</u>
                 Determine  the  locale  that  should  be  used  to affect the format and contents of diagnostic
                 messages written to standard error.

       <u>NLSPATH</u>   Determine the location of message catalogs for the processing of <u>LC_MESSAGES</u>.

</pre><h4><b>ASYNCHRONOUS</b> <b>EVENTS</b></h4><pre>
       Default.

</pre><h4><b>STDOUT</b></h4><pre>
       When the <b>-l</b> option is used to list commands, the format of each command in the list shall be as follows:

           "%d\t%s\n", &lt;<u>line</u> <u>number</u>&gt;, &lt;<u>command</u>&gt;

       If both the <b>-l</b> and <b>-n</b> options are specified, the format of each command shall be:

           "\t%s\n", &lt;<u>command</u>&gt;

       If the &lt;<u>command</u>&gt; consists of more than one line, the lines after the first shall be displayed as:

           "\t%s\n", &lt;<u>continued-command</u>&gt;

</pre><h4><b>STDERR</b></h4><pre>
       The standard error shall be used only for diagnostic messages.

</pre><h4><b>OUTPUT</b> <b>FILES</b></h4><pre>
       None.

</pre><h4><b>EXTENDED</b> <b>DESCRIPTION</b></h4><pre>
       None.

</pre><h4><b>EXIT</b> <b>STATUS</b></h4><pre>
       The following exit values shall be returned:

        0    Successful completion of the listing.

       &gt;0    An error occurred.

       Otherwise, the exit status shall be that of the commands executed by <u>fc</u>.

</pre><h4><b>CONSEQUENCES</b> <b>OF</b> <b>ERRORS</b></h4><pre>
       Default.

       <u>The</u> <u>following</u> <u>sections</u> <u>are</u> <u>informative.</u>

</pre><h4><b>APPLICATION</b> <b>USAGE</b></h4><pre>
       Since editors sometimes use file descriptors as integral parts of their editing, redirecting  their  file
       descriptors  as  part  of the <u>fc</u> command can produce unexpected results. For example, if <u>vi</u> is the <u>FCEDIT</u>
       editor, the command:

           fc -s | more

       does not work correctly on many systems.

       Users on windowing systems may want to have separate history files for each window by setting <u>HISTFILE</u> as
       follows:

           HISTFILE=$HOME/.sh_hist$$

</pre><h4><b>EXAMPLES</b></h4><pre>
       None.

</pre><h4><b>RATIONALE</b></h4><pre>
       This utility is based on the <u>fc</u> built-in of the KornShell.

       An early proposal specified the <b>-e</b> option as <b>[-e</b> <u>editor</u> <b>[</b><u>old</u>= <u>new</u> <b>]]</b>, which is not  historical  practice.
       Historical  practice  in  <u>fc</u>  of  either  <b>[-e</b>  <u>editor</u><b>]</b> or <b>[-e</b> <b>-</b> <b>[</b> <u>old</u>= <u>new</u> <b>]]</b> is acceptable, but not both
       together. To clarify this, a new option <b>-s</b> was introduced  replacing  the  <b>[-e</b>  <b>-]</b>.   This  resolves  the
       conflict and makes <u>fc</u> conform to the Utility Syntax Guidelines.

       <u>HISTFILE</u>  Some  implementations of the KornShell check for the superuser and do not create a history file
                 unless <u>HISTFILE</u> is set. This is done primarily to avoid creating unlinked  files  in  the  root
                 file system when logging in during single-user mode.  <u>HISTFILE</u> must be set for the superuser to
                 have history.

       <u>HISTSIZE</u>  Needed  to  limit  the  size of history files. It is the intent of the standard developers that
                 when two shells share the same history file, commands that are entered in one  shell  shall  be
                 accessible  by  the other shell. Because of the difficulties of synchronization over a network,
                 the exact nature of the interaction is unspecified.

       The initialization process for the history file can be dependent on the system start-up  files,  in  that
       they  may  contain commands that effectively preempt the settings the user has for <u>HISTFILE</u> and <u>HISTSIZE</u>.
       For example, function definition commands are recorded in the history file. If the  system  administrator
       includes  function  definitions in some system start-up file called before the <u>ENV</u> file, the history file
       is initialized before the user can influence its characteristics. In some historical shells, the  history
       file  is  initialized  just  after the <u>ENV</u> file has been processed. Because of these situations, the text
       requires the initialization process to be implementation-defined.

       Consideration was given to omitting the <u>fc</u> utility in favor of the command line editing  feature  in  <u>sh</u>.
       For example, in <u>vi</u> editing mode, typing <b>"&lt;ESC&gt;</b>v" is equivalent to:

           EDITOR=vi fc

       However, the <u>fc</u> utility allows the user the flexibility to edit multiple commands simultaneously (such as
       <u>fc</u> 10 20) and to use editors other than those supported by <u>sh</u> for command line editing.

       In  the KornShell, the alias <b>r</b> (``re-do'') is preset to <u>fc</u> <b>-e</b> <b>-</b> (equivalent to the POSIX <u>fc</u> <b>-s</b>).  This is
       probably an easier command name to remember than <u>fc</u> (``fix command''), but it does not meet  the  Utility
       Syntax  Guidelines.   Renaming  <u>fc</u>  to  <u>hist</u>  or  <u>redo</u> was considered, but since this description closely
       matches historical KornShell practice already, such a renaming was seen as gratuitous.  Users are free to
       create aliases whenever odd historical names such as <u>fc</u>, <u>awk</u>, <u>cat</u>, <u>grep</u>,  or  <u>yacc</u>  are  standardized  by
       POSIX.

       Command  numbers  have  no  ordering  effects;  they  are like serial numbers.  The <b>-r</b> option and -<u>number</u>
       operand address the sequence of command execution, regardless of serial numbers. So, for example, if  the
       command  number  wrapped  back  to 1 at some arbitrary point, there would be no ambiguity associated with
       traversing the wrap point. For example, if the command history were:

           32766: echo 1
           32767: echo 2
           1: echo 3

       the number -2 refers to command 32767 because it is the second previous  command,  regardless  of  serial
       number.

</pre><h4><b>FUTURE</b> <b>DIRECTIONS</b></h4><pre>
       None.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <u>sh</u>

       The  Base  Definitions  volume  of  POSIX.1‐2017, <u>Chapter</u> <u>8</u>, <u>Environment</u> <u>Variables</u>, <u>Section</u> <u>12.2</u>, <u>Utility</u>
       <u>Syntax</u> <u>Guidelines</u>

</pre><h4><b>COPYRIGHT</b></h4><pre>
       Portions of this text are reprinted and reproduced in electronic form from IEEE Std 1003.1-2017, Standard
       for Information  Technology  --  Portable  Operating  System  Interface  (POSIX),  The  Open  Group  Base
       Specifications  Issue  7, 2018 Edition, Copyright (C) 2018 by the Institute of Electrical and Electronics
       Engineers, Inc and The Open Group.  In the event of any discrepancy between this version and the original
       IEEE and The Open Group Standard, the original IEEE and The Open Group Standard is the referee  document.
       The original Standard can be obtained online at <a href="http://www.opengroup.org/unix/online.html">http://www.opengroup.org/unix/online.html</a> .

       Any  typographical  or formatting errors that appear in this page are most likely to have been introduced
       during  the  conversion  of  the  source  files  to  man  page  format.  To  report  such   errors,   see
       https://www.kernel.org/doc/man-pages/reporting_bugs.html .

IEEE/The Open Group                                   2017                                            <u><a href="../man1POSIX/FC.1POSIX.html">FC</a></u>(1POSIX)
</pre>
 </div>
</div></section>
</div>
</body>
</html>