<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>couriermlm - The Courier mailing list manager</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/courier-mlm">courier-mlm_1.3.13-11_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       couriermlm - The Courier mailing list manager

</pre><h4><b>SYNOPSIS</b></h4><pre>

       <b>couriermlm</b> {<u>command</u>} {<u>directory</u>} [<u>arg</u>...]

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>couriermlm</b> is the Courier mail server's mailing list manager. This command sets up, maintains, and
       manages mailing lists.  <b>couriermlm</b> automatically handles requests to subscribe and unsubscribe list
       members, detects undeliverable addresses and removes them from the subscription rolls. Mailing lists
       managed by <b>couriermlm</b> require zero human administrative oversight.  <b>couriermlm</b> supports digests,
       write-only posting aliases, and moderated mailing lists.

   <b>CREATING</b> <b>A</b> <b>MAILING</b> <b>LIST</b>
       Anyone can use <b>couriermlm</b>, not just the system administrator. The Courier mail server mail server
       translates an address list-name@domain as a local address with a corresponding <b><a href="../man5/dot-courier.5.html">dot-courier</a></b>(5)[1] file.
       Anyone who can install a <b><a href="../man5/dot-courier.5.html">dot-courier</a></b>(5)[1] file, and can schedule <b><a href="../man8/cron.8.html">cron</a></b>(8) jobs, can run a <b>couriermlm</b>
       mailing list.

       Note that the system administrator can optionally remove the <b><a href="../man5/dot-courier.5.html">dot-courier</a></b>(5)[1] support from the the
       Courier mail server.  <b>couriermlm</b> will not work in that case.

       Setting up a mailing list consists of the following steps:

       Run <b>couriermlm</b> <b>create</b>
           Use this command to create a directory where <b>couriermlm</b> keeps all mailing list related files.

       Configure the mailing list
           The <b>couriermlm</b> <b>create</b> command initializes the mailing list subdirectory with some default template
           responses. It is necessary to customize them for your mailing list, and it may be necessary to issue
           some additional commands in order to configure appropriate mailing list options -- such as enabling
           unrestricted posting privileges, and enabling moderation.

       Create <b><a href="../man5/dot-courier.5.html">dot-courier</a></b>(5)[1] files
           Set up to run <b>couriermlm</b> to distribute mailing list messages, and process requests.

       Set up <b><a href="../man8/cron.8.html">cron</a></b>(8)
           You need to set up <b><a href="../man8/cron.8.html">cron</a></b>(8) jobs to run the <b>couriermlm</b> <b>hourly</b> and <b>couriermlm</b> <b>daily</b> commands, which
           perform regular mailing list maintenance.

       Enable SMTP pre-filtering
           This step configures a hook that runs <b>couriermlm</b> as part of the SMTP transaction when receiving mail
           to a mailing list address, and rejects the mail if it would not be accepted to the mailing list
           instead of receiving the message and then generating a non-delivery report.

           This is an optional step that adds some complexity, but reduces mailing list management issues.

       Back up subscription lists
           As part of your daily job you should also run the <b>export</b> command, in order to back up the mailing
           list subscriber information. In the event that the mailing list database gets corrupted or lost, you
           can restore it from this backup file. See the <b>export</b> command for more information.

           <b>Note</b>

           Setting up a digest for the mailing list requires additional steps. See "<b>Setting</b> <b>up</b> <b>a</b> <b>mailing</b> <b>list</b>
           <b>digest</b>[2]" below for more information.

       The first step is to run the following command:

           couriermlm create <u>directory</u> ADDRESS=<u>list@domain</u>

       <u>directory</u> is the mailing list directory that will be managed by <b>couriermlm</b>. This directory should not be
       created in advance, this command creates this directory, and initializes it.

       <u>list@domain</u> is the mailing list's address, the address that sends messages to the mailing list.

       An additional setting, URL may also be specified:

           couriermlm create <u>directory</u> ADDRESS=<u>list@domain</u> URL=<u>url</u>

       “url” would be the URL of the WebMLM web page for this mailing list. See <b><a href="../man1/webmlmd.1.html">webmlmd</a></b>(1)[3] for more
       information.

       The directory created by <b>couriermlm</b> <b>create</b> is initialized to contain a number of text files that
       <b>couriermlm</b> sends back as replies to administrative commands. It is necessary to edit these template files
       and adjust the text in those files for this mailing list. All template filenames end with .tmpl, and
       their contents are self explanatory. Some important template files are:

       help.tmpl
           This text is returned in response to the help command. This text must be modified depending upon
           whether this mailing list is a moderated mailing list, has a digest version, or if any other
           non-default configuration options are set for the mailing list.

       sub.tmpl
           This is the reply that's sent back in response to a subscription request. Less important is
           unsub.tmpl, which is the response to a request to unsubscribe.

       sub2.tmpl
           This is the successful subscription confirmation. A brief overview of the mailing list might be
           appropriate here.

       <b>couriermlm</b> has rudimentary support for non-English templates. The <b>couriermlm</b> <b>create</b> command has a single,
       optional parameter, <b>--lang=</b><u>suffix</u> The option must be specified after the mailing list directory's name:

           couriermlm create <u>directory</u> --lang=es ADDRESS=<u>list@domain</u> URL=<u>url</u>

       The templates for the stock text files come from /usr/lib/courier/couriermlm. This directory contains all
       the *.tmpl and *.html template files that <b>couriermlm</b> <b>create</b> installs in the new mailing list <u>directory</u>.

       Translated versions of template files are installed in the same directory, /usr/lib/courier/couriermlm.
       The translated version of <u>file</u> must be installed as <u>file</u>.<u>suffix</u>, for example: help.tmpl.es is the
       translated version of help.tmpl, with the “es” suffix.

       The <b>--lang=</b><u>suffix</u> option installs the the .suffix version of each text template file, if available. If
       not, the stock English template file gets copied, as usual.

           <b>Note</b>

           Do not remove the English template files, even if you never use them. They must be left in place, in
           /usr/lib/courier/couriermlm, for <b>couriermlm</b> <b>create</b> to work correctly.

       Example:

           couriermlm create /home/lists/users-list --lang=es ...

       This example installs the *.es versions of mailing list template files. Only the stock, English template
       files come with the Courier mail server. This mechanism only provides an easy integration ability with
       template files from other sources.

       There are some additional configuration files that can be modified to suit your taste:

       headeradd
           This file can be initialized to contain any mail headers that will be automatically added to every
           mailing list message. The contents of this file are simply prepended to every message that goes out.
           Blank lines are not allowed.

       headerdel
           This file lists any headers that will be automatically removed from every mailing list message before
           it's sent. List each header one per line, including the : character. For example, to remove all
           <u>Received:</u> and <u>Date:</u> headers from every message, initialize this file to contain the following two
           lines:

               Received:
               Date:

       Both the headeradd and headerdel files can be used to implement a popular feature of setting the replies
       to every message to go to the mailing list. Having "Reply-To:" in headerdel, removes any existing
       <u>Reply-To:</u> header, and then having "Reply-To: <u>list@domain</u>" in headeradd appends a fixed <u>Reply-To:</u> header
       to every message.

       The <u>create</u> command also creates the following subdirectories in the mailing list directory:

       sublist
           This subdirectory has the database files that contain the mailing list's subscription list.

       unsublist
           This subdirectory stores files that contain information about addresses that have been unsubscribed
           from the mailing list. This information might be of some use when tracking down an old subscription.
           The contents of this directory are not automatically purged, you must set up your own purging
           mechanism for this directory.

       commands, commands.dat
           These directories store temporary files that contain pending (unconfirmed) commands for the mailing
           list manager. The <b>couriermlm</b> commands <u>hourly</u> and <u>daily</u> must be executed regularly in order to
           periodically purge stale entries.

       modqueue
           Messages awaiting moderator approval (for moderated lists).

       archive
           Messages received by this mailing list will be stored here, in addition to being forwarded to
           subscribers.  <b>couriermlm</b> does not automatically do any purging on this subdirectory, you must set up
           your own archiving mechanism that cleans out this subdirectory.

       The last step involves installing a couple of <b><a href="../man5/dot-courier.5.html">dot-courier</a></b>(5)[1] files that run <b>couriermlm</b> to receive
       mailing list messages and administrative commands. The mailing list address, <u>list@domain</u>, corresponds to
       some <b><a href="../man5/dot-courier.5.html">dot-courier</a></b>(5)[1] file. For example, if your system account is <u>john</u>, and your mail domain is
       <u>example.com</u>, then the <b><a href="../man5/dot-courier.5.html">dot-courier</a></b>(5)[1] file for the mailing list <u>&lt;<a href="mailto:john-list@example.com">john-list@example.com</a>&gt;</u> is
       $HOME/.courier-list.

       Let's say that the <b><a href="../man5/dot-courier.5.html">dot-courier</a></b>(5)[1] file is $HOME/.courier-list. To properly support the mailing list,
       the following <b><a href="../man5/dot-courier.5.html">dot-courier</a></b>(5)[1] files will have to be initialized as follows:

       $HOME/.courier-list
           This file should be initialized to contain the following delivery instruction:

               | /usr/bin/couriermlm msg <u>directory</u>

           <u>directory</u> is the created mailing list directory.

               <b>Note</b>
               Messages to “POST=subscribers” lists from non-subscribers get rejected by <b>couriermlm</b> resulting in
               delivery failure. This generates a undeliverable message report, a “bounce”. Unfortunately this
               can be abused to generate a bandwidth amplification attack. Append "; exit 0" to the .courier
               command, to suppress bounces from delivery failures:

                   | /usr/bin/couriermlm msg <u>directory</u>; exit 0

               This will suppress all bounces, though, not just the ones resulting from messages from
               non-subscribers. A better solution is to configure SMTP pre-filtering, as described below. SMTP
               pre-filtering checks each message before it's accepted from the sending SMTP server. A rejected
               message does not generate a bounce message, but returns an error to the sending SMTP server,
               leaving it on the hook for generating bounces.

       $HOME/.courier-list-owner
           This file should contain the appropriate delivery instructions for forwarding all mail addressed to
           &lt;list-owner@domain&gt; to the address of the owner of the mailing list. This can be another E-mail
           address, or a mailbox specification.

       $HOME/.courier-list-default
           This file should be initialized to contain the following delivery instruction:

               | /usr/bin/couriermlm ctlmsg <u>directory</u>

           <u>directory</u> is the created mailing list directory. This <b><a href="../man5/dot-courier.5.html">dot-courier</a></b>(5)[1] file provides support for all
           other addresses of the form &lt;list-<u>command</u>@domain&gt;, where <u>command</u> is a mailing list administrative
           command. Commands are sent to this mailing list manager by sending a message to one of several
           special addresses, described more fully in "<b>Mailing</b> <b>list</b> <b>commands</b>[4]", below.

   <b>Configuring</b> <b>SMTP</b> <b>pre-filtering</b> <b>of</b> <b>mailing</b> <b>list</b> <b>messages</b>
       This is an optional step that implements filtering of mailing list messages before each message is
       received from the sending SMTP server. Otherwise, Courier accepts all messages, and the rejected ones
       generate a non-delivery report. The report gets E-mailed to the purported sender. Another option is to
       quietly ignore the rejections, as described above. Either way, non-delivery notifications can sometimes
       be problematic. This step adds some complexity to the mailing list configuration, but mostly eliminates
       this problem.

       SMTP pre-filtering uses the <b><a href="../man7/localmailfilter.7.html">localmailfilter</a></b>(7)[5] interface. The following instructions repeat some of
       the information from the <b><a href="../man7/localmailfilter.7.html">localmailfilter</a></b>(7) documentation, for convenience. See that documentation for
       complete information.

       The following instructions reference a typical mailing list configuration setup:

       •   A reserved system account called “lists”.

       •   A mailing list's address of “<a href="mailto:lists-announcements@example.com">lists-announcements@example.com</a>”, set up by installing
           $HOME/.courier-announcements and $HOME/.courier-announcements-default (and
           $HOME/.courier-announcements-owner) in lists's home directory, as described above.

       •   The mailing list directory (created by <b>couriermlm</b> <b>create</b>) is $HOME/announcements.

       The first two steps enable SMTP mail filtering using <b>maildrop</b>, and this should be done as root:

           # echo /usr/bin/maildrop &gt;/etc/courier/maildropfilter

           <b>Note</b>

           This enables SMTP mail filtering to all local mailboxes. All local mailboxes will be able to specify
           their SMTP mail filters, as explained in <b><a href="../man7/localmailfilter.7.html">localmailfilter</a></b>(7).

       The second step installs <b>couriermlm</b> wrappers for SMTP filters:

           # mkdir /etc/courier/maildroprcs
           # d="/usr/lib/courier/couriermlm"
           # ln -s $d/couriermlm-rcptfilter-ctlmsg /etc/courier/maildroprcs
           # ln -s $d/couriermlm-rcptfilter-msg /etc/courier/maildroprcs
           # ln -s $d/couriermlm-smtpfilter-ctlmsg /etc/courier/maildroprcs
           # ln -s $d/couriermlm-smtpfilter-msg /etc/courier/maildroprcs

       The remaining steps are done while logged in as the mailing list owner's account:

           $ mkdir $HOME/.mailfilters
           $ chmod 700 $HOME/.mailfilters

       Each mailing list needs four <b>maildrop</b> scripts installed in .mailfilters. Using the
       “<a href="mailto:lists-announcements@example.com">lists-announcements@example.com</a>” list as an example, owned by lists's account:

           $ cd $HOME/.mailfilters
           $ cat rcptfilter-announcements

           LISTDIR="announcements"
           include '/etc/courier/maildroprcs/couriermlm-rcptfilter-msg'

           $ cat rcptfilter-announcements-default

           LISTDIR="announcements"
           FILENAMEPREFIX="rcptfilter-announcements"
           include '/etc/courier/maildroprcs/couriermlm-rcptfilter-ctlmsg'

           $ cat smtpfilter-announcements

           LISTDIR="announcements"
           include '/etc/courier/maildroprcs/couriermlm-smtpfilter-msg'

           $ cat smtpfilter-announcements-default

           LISTDIR="announcements"
           FILENAMEPREFIX="smtpfilter-announcements"
           include '/etc/courier/maildroprcs/couriermlm-smtpfilter-ctlmsg'

       And the permissions must be nailed down, as always:

           $ chmod 600 $HOME/.mailfilters/*

       Each <b>maildrop</b> script sets the <u>LISTDIR</u> variable before invoking the <b>couriermlm</b> wrapper.  <u>LISTDIR</u> is the
       name of the mailing list's directory, in the account's home directory. In this case the mailing list
       directory, created by <b>couriermlm</b> <b>create</b> is $HOME/announcements, so <u>LISTDIR</u> is announcements. It's
       possible to put mailing list directories in a subdirectory, and reference the subdirectory here. Mailing
       list directories' names cannot contain periods.

       Additionally, the two -default scripts must set <u>FILENAMEPREFIX</u> to their own names, with the “-default”
       suffix stripped off.

       The easiest way to test this configuration is to use the default mailing list configuration that allows
       messages only from the list's subscribers, then attempt to send a message to the mailing list, from
       another SMTP server, using a return address that's not subscribed to the list. The resulting non-delivery
       report should come from the other SMTP server, and not <b>couriermlm</b>'s mail server.

   <b>MANUAL</b> <b>COMMANDS</b>
       <b>couriermlm</b> may also be run manually from the command line as follows:

           /usr/bin/couriermlm <u>command</u> <u>directory</u> [ options... ]

       <u>command</u> is a command from the following list.  <u>directory</u> is the mailing list directory. The commands are:

       create
           Create a mailing list.

       update
           Update/restore mailing list templates. The original, default, mailing list message template files
           (*.tmpl and *.tmpl.html) are reinstalled into the mailing list directory. This command must be
           processed for every mailing list directory after upgrading to the Courier server version 0.55, or
           later, from earlier versions (but see below).  <b>couriermlm</b> in version 0.55 of the Courier mail server
           uses updated templates files, which must be installed in every mailing list directory. Although the
           names of many template files have not changed, the embedded markup codes in the template files work
           differently.

            1. Begin by making a backup copy of all *.tmpl files in the existing <b>couriermlm</b> mailing list
               directory.

            2. Run the “update” command on the list directory.

            3. Review the backed up template files, identify your customized changes, then retype them into new
               template files installed by the “update” command.

            4. Proceed to the next mailing list directory.

           Yes, this is going to be a pain. This is the first overhaul of <b>couriermlm</b>'s infrastructure in many
           years. Once a decade, some elbow grease must be sacrificed in the name of progress. It's not the end
           of the world.

           In an extreme emergency, preserve the <b>couriermlm</b> from the previous version of the Courier mail
           server. Mass-update all existing lists' .courier-<u>list</u> and .courier-<u>list</u>-default files to run the old
           <b>couriermlm</b>. Then, migrate each mailing list on a predetermined schedule. After migrating each list,
           put the default path back into the list's .courier files.

           Keep in mind the following issues, while migrating the lists:

           •   The help.tmpl template file is usually the one that gets customized the most. In most cases,
               large bits and pieces of this file, that document certain list options that do not apply to this
               list, must be removed.

           •   There are several new template files, including a number of *.html files that refer to new
               HTML-formatted responses from <b>couriermlm</b>, and the WebMLM interface.

           •   Be aware of updated mail headers declared in several template files. The MIME character set is
               now given as utf-8. Some templates no longer contain the Mime-Version and Subject headers. The
               Subject headers are moved to separate template files. Many existing template files now contain
               both a plain text and an HTML-formatted version of the <b>couriermlm</b> response. Always scroll to the
               end of each template file, to reveal any appended HTML portion of template's text.

       set
           Set mailing list options, see below.

       sub
           Manually subscribe an address to the mailing list.

       unsub
           Manually unsubscribe an address from the mailing list.

       lsub
           List all the subscribers to this mailing list.

       laliases
           List write-only aliases for this mailing list.

       export
           Export mailing list subscriber information.

       import
           Import mailing list subscriber information.

       ctlmsg
           Receive and interpret a control message.

       info
           Display a subscription record.

       msg
           Post a message to the mailing list.

       hourly
           Perform hourly maintenance. It is necessary to set up a <b><a href="../man8/cron.8.html">cron</a></b>(8) job to execute the <u>hourly</u> command
           once an hour.

       daily
           Perform daily maintenance. It is necessary to set up a <b><a href="../man8/cron.8.html">cron</a></b>(8) job to execute the <u>daily</u> command once
           a day.

       digest
           Create a digest. See "<b>Setting</b> <b>up</b> <b>a</b> <b>mailing</b> <b>list</b> <b>digest</b>[2]" below for more information.

   <b>MANUAL</b> <b>SUBSCRIPTION</b> <b>MANAGEMENT</b>
       The sub, unsub, lsub, laliases, export, and import commands allow manual subscription list management.
       Normally, subscription-related commands are done by sending an appropriate mailing list command, see
       "<b>Mailing</b> <b>List</b> <b>Commands</b>[4]", below.

           couriermlm sub <u>directory</u> <u>user@domain</u>

       This command adds the address &lt;user@domain&gt; to the subscription list.  <b>couriermlm</b> will now read a
       free-form comment or a note from standard input, terminated by an end-of-file (usually CTRL-D). The
       free-form comment is stored in the subscription database, together with the address, and is shown by the
       "info" command.

           couriermlm unsub <u>directory</u> <u>user@domain</u>

       This command remove the address &lt;user@domain&gt; from the subscription rolls.  <b>couriermlm</b> will also read a
       free-form comment, which is added to the subscription record. After removing this address from the
       subscription rolls, its subscription record is archived in the <u>directory/unsublist</u> directory.

           couriermlm lsub <u>directory</u>

       This command lists all the addresses subscribed to the list, on standard output, one per line.

           couriermlm laliases <u>directory</u>

       This command lists all write-only aliases that have been subscribed to the list, together with the
       subscriber address that added each alias. See "<b>Write-Only</b> <b>Aliases</b>[6]" for more information.

           couriermlm export <u>directory</u>

       The <u>export</u> command lists the contents of the subscription database on standard output. The export command
       produces the following output format:

           <u>address</u>
           <u>subscription</u> <u>information</u>
            ...
           <u>address</u>
           <u>subscription</u> <u>information</u>
            ...

       "<u>address</u>", is an address subscribed to the mailing list. This is followed by its corresponding
       subscription information, usually a copy of the subscription request that was used to add the address to
       the mailing list. The subscription information is terminated by a line containing a single period. Any
       lines in the subscription information that begin with a period have an extra period prepended to them.

           couriermlm import <u>directory</u>

       The <u>import</u> command reads on standard input a previously exported mailing list subscription database, and
       adds those addresses to the indicated mailing list.

       It is highly recommended to make a regular backup of subscriber information using the <u>export</u> command, in
       the event that the subscription database gets corrupted. In which case the <u>import</u> command can be used to
       rebuild the subscription database, in absence of any direct backups of the database files.

   <b>SETTING</b> <b>MAILING</b> <b>LIST</b> <b>OPTIONS</b>
       The <u>set</u> command sets various list options:

           couriermlm set <u>directory</u> <u>option=value</u> <u>option=value...</u>

           <b>Note</b>

           Setting the ADDRESS or the URL options, described below, automatically updates the contents of the
           headeradd configuration file. Its existing “List-” headers are removed and replaced by updated
           “List-” headers that reflect the revised list address or URL.

       One or more options can be set with the same command. The available options are:

       ADDRESS=<u>address</u>
           The base E-mail address for this mailing list.

       URL=<u>address</u>
           The URL of WebMLM web page for this mailing list.

               <b>Note</b>
               WebMLM determines its own URL automatically, by reading its HTTP headers. This setting is used by
               <b>couriermlm</b>, which has no knowledge of the web server's configuration, and needs to know the
               correct URL to insert into generated messages.

       CASESENSITIVE=<u>flag</u>
           If flag is "1", the userid portion of E-mail addresses are case-sensitive. The domain address portion
           is always case-insensitive. The default setting is "0" making both userid and domain address portions
           of E-mail addresses case-insensitive.

               <b>Note</b>
               Be careful when changing this setting on an active list. Changing this option to
               “CASESENSITIVE=1”, forces all existing subscribers to make sure their addresses are
               lowercase-only, otherwise they will no longer be recognized as subscribers. Changing this option
               to “CASESENSITIVE=0” blocks all subscribed addresses that have uppercase characters in the userid
               portion of their E-mail address. They will continue to receive mailing list traffic, but unable
               to post messages to the list, or unsubscribe from it. It will not be possible to unsubscribe
               those addresses even by running the <b>couriermlm</b> command manually.

       DIGEST=<u>directory</u>
           Enable digests.  <u>directory</u> is the pathname to the previously-createddigest list directory. See
           "<b>Setting</b> <b>up</b> <b>a</b> <b>mailing</b> <b>list</b> <b>digest</b>[2]" below for more information.

       KEYWORD=<u>keyword</u>
           Set the subject line keyword for mailing list messages. If set, <b>couriermlm</b> inserts "[keyword]" into
           the subject of every mailing list message, to aid sorting by the recipients.

       MAXBOUNCES=<u>n</u>
           Maximum number of bounce notifications sent by the <u>hourly</u> command, in order to prevent the mail
           system from being overloaded. The default is 20 bounce notifications. Any unsent notifications will
           be carried over to the next hourly job.

       MAXMODNOTICES=<u>n</u>
           Maximum number of moderation reminders sent by the <u>hourly</u> command, in order to prevent the mail
           system from being overloaded. The default is 20 moderation reminders. Any unsent reminders will be
           carried over to the next hourly job.

       MAXFETCHSIZE=<u>K</u>
           Maximum size, in kilobytes, of a response to the <u>fetch</u> command. The default is 100Kb. This option is
           used to minimize the impact of abusive requests for the entire archive, with a forged return address.

       NAME=<u>name</u>
           The name that's listed on the return address of administrative messages. Note that if <u>name</u> contains
           spaces, you should quote this argument in the shell. The default value is "Courier Mailing List
           Manager".

       NOBOZOS=<u>flag</u>
           If flag is "0" <b>couriermlm</b> will not attempt to block misdirected subscribes and unsubscribes that are
           sent to the mailing list's posting address. If flag is "1" (the default), those kinds of messages
           will be bounced appropriately.

       NODSN=<u>flag</u>
           If flag is "1" <b>couriermlm</b> will use a Delivery Status Notification setting of "never" when it sends
           confirmation requests and help messages: this should reduce the amount of useless failure
           notifications generated when <b>couriermlm</b> dutifully replies to spam received by the mailing list
           administrative addresses, i.e. -(un)subscribe and -help. If flag is "0" (the default), a DSN setting
           of "fail" will be used. Please see <b><a href="../man1/sendmail.1.html">sendmail</a></b>(1)'s -n option for more details on the DSN setting.

       POST=<u>option</u>
           Set posting options.  <u>option</u> is one of three values: "subscribers" - only subscribers may post
           messages to this mailing list (this is the default); "all" - anyone can post messages to this mailing
           list; "mod" - only subscribers may post, and messages are sent to the list owner for approval
           (moderation).

       UNICODE=<u>flag</u>
           Accept mailing list messages with Unicode-formatted headers. The default setting of 0 rejects
           messages with Unicode headers, and rejects subscription requests from E-mail addresses with Unicode
           mailbox names.

           Most mail servers on the Internet do not implement support for Unicode messages at this time.
           Accepting a Unicode message and redistributing it to a mailing list results in delivery failures to
           all mailing list subscribers that do not implement Unicode support, so by default this setting is
           turned off. Set UNICODE to 1 to accept mailing list messages with Unicode headers, and subscription
           requests from Unicode mailbox names.

               <b>Note</b>
               Subscription requests from E-mail addresses that have an international domain name are always
               accepted if the internal domain name uses ASCII-compatible encoding.

       POSTARCHIVE=<u>option</u>
           Set access to archived messages.  <u>option</u> is either: "all" - Anyone can access the mailing list
           archive; or "subscribers" - only subscribers can access the archive. The default is "all".

       PURGEARCHIVE=<u>d</u>
           Purge archived mailing list messages after <u>d</u> days. The default is 0 days - messages are never removed
           from the archive subdirectory.

       PURGEBOUNCE=<u>d</u>
           Wait <u>d</u> days for the probe message, that automatically unsubscribes undeliverable addresses, to bounce
           (default: 14 days). Probe messages are sent three days (default) after the first message to an
           address bounces.

       PURGECMD=<u>h</u>
           Purge unconfirmed subscribe/unsubscribe requests after <u>h</u> hours (default: 48 hours).

       REMODERATE=<u>h</u>
           Resend a moderation reminder after <u>h</u> hours (default: 12 hours).

       REPORTADDR=<u>address</u>
           Mail daily reports of new and removed subscribers to this address. Must be set in order to receive
           reports. Provide an empty address to stop reporting.

       SIMPLECONFIRM=<u>n</u>
           If <u>n</u> is 1, confirmation requests may be acknowledged without adding “yes” to the subject line.

               <b>Note</b>
               The text in sub.tmpl, unsub.tmpl, and help.tmpl may need adjusting.

       SUBSCRIBE=<u>option</u>
           Set subscription options.  <u>option</u> is either "all", meaning that anyone can subscribe, or "mod",
           meaning moderated subscription requests, where all subscription requests are sent to the mailing list
           owner for approval. The default is "all".

       STARTPROBE=<u>n</u>
           Send a probe to a bouncing address <u>n</u> days after receiving the first bounce. Basically this means that
           an address must bounce for at least <u>n</u> days before it gets a probe message. The default is 3 days.

       Option names and settings are case sensitive.

           <b>Note</b>

           If you set up a digest list, you MUST set identical POSTARCHIVE option for both the main list and the
           digest list.

   <b>DISPLAYING</b> <b>A</b> <b>SUBSCRIPTION</b> <b>RECORD</b>
       The info command displays the subscription record for the requested address:

           couriermlm info <u>directory</u> <u>user@domain</u>

       This displays the subscription record for "<u>user@domain</u>", which typically consists of a copy of the
       initial subscription request, and confirmation.

   <b>SENDING</b> <b>MESSAGES</b> <b>TO</b> <b>THE</b> <b>MAILING</b> <b>LIST</b>
       The <u>msg</u> commands reads an E-mail message on standard input, and mails the contents of the message to the
       mailing list's subscribers.

       If the POST option is set to "subscribers", the message is rejected unless the address in its From:
       header is a subscriber to this mailing list.

       Control files headeradd and headerdel are read, and are applied to the message, as described previously.

   <b>MAILING</b> <b>LIST</b> <b>COMMANDS</b>
       Mailing list commands can be sent via E-mail to <b>couriermlm</b> by sending a message to &lt;list-<u>command</u>@domain&gt;.
       The "default" <b><a href="../man5/dot-courier.5.html">dot-courier</a></b>(5)[1] file runs <b>couriermlm</b> to receive mail for all addresses of this form.

       <b>couriermlm</b> reads the <b>DEFAULT</b> environment variable, which is set by the Courier mail server, that
       indicates the specific command. The available commands are:

       help
           A simple autoresponder.  <b>couriermlm</b> mails the sender the contents of the help.tmpl file.

       subscribe
           A request to subscribe to this mailing list.  <b>couriermlm</b> reads the sender's address in order to
           determine what address to subscribe.

       subscribe-<u>name=domain</u>
           Explicitly specify the address to subscribe to the mailing list, instead of using a return address.
           In the previous example, sending a message addressed to
           &lt;my-widgets-subscribe-john=<a href="mailto:domain.com@example.com">domain.com@example.com</a>&gt; would result in a subscription request for
           &lt;john=domain.com&gt;. Any unusual punctuation characters in the address must be replaced by a plus sign,
           followed by two hexadecimal digits that represent the punctuation character's ASCII code.

       unsubscribe
           A request to unsubscribe to this mailing list.

       unsubscribe-<u>name=domain</u>
           Explicitly specify the address to unsubscribe from the mailing list.

       alias-subscribe
           Set up a write-only alias (see below).

       alias-subscribe-<u>name=domain</u>
           Explicitly specify the subscriber address for which a write-only alias needs to be set up.

       There are other commands that are used internally for maintaining the mailing list.

   <b>WRITE-ONLY</b> <b>ALIASES</b>
       Write-only E-mail aliases can send messages to the mailing list, but they do not receive any mailing list
       messages themselves. A write-only alias can be set up by any subscriber. Only one write-only alias is
       allowed per subscribed E-mail address. Write-only aliases are not needed for mailing list that has the
       POST=all option set.

       To set up a write-only alias, the subscriber sends a <b>couriermlm</b> alias-subscribe command. The subscriber's
       E-mail address can be explicitly specified in a similar manner as the subscribe command.

       The subject line of the E-mail message must contain the E-mail write-only alias to be set up, and nothing
       else.  <b>couriermlm</b> responds with a confirmation request, just like when subscribing to the list. This
       request must be acknowledged in the same way.

       A subscriber's write-only alias can be changed at any time by repeating this procedure. The new alias
       replaces the previous one. To prevent abuse, there's a limit of at most one alias-subscribe command every
       30 minutes.

       Leave the subject of the E-mail message blank in order to remove an existing write-only alias,

   <b>SETTING</b> <b>UP</b> <b>A</b> <b>MAILING</b> <b>LIST</b> <b>DIGEST</b>
       <b>couriermlm</b> supports mailing list digests. Mailing list digests are created as a second, separate, mailing
       list. The <u>create</u> command initializes a second mailing list directory, and then additional configuration
       takes place which links the main mailing list to the digest list.

       If the mailing list address is <a href="mailto:list-address@example.com">list-address@example.com</a>, the address of the digest version of the mailing
       list is usually <a href="mailto:list-address-digest@example.com">list-address-digest@example.com</a>, but it doesn't have to be this address. The only
       requirement is that the directory for the digest version of the mailing list must reside on the same file
       system as the directory for the mailing list itself, and both must be owned by the same userid.

       To set up a mailing list digest, first proceed with the steps to create the mailing list itself. After
       the mailing list is created and configured, proceed as follows:

       Create the digest list directory
           Execute the <u>create</u> command to create the digest version of the list:

               /usr/bin/couriermlm create \
                  <u>/path/to/digest/list/directory</u> \
                  ADDRESS=<u><a href="mailto:list-address-digest@example.com">list-address-digest@example.com</a></u>

           Use the full pathname to the mailing list directory, and the address of the digest version of the
           mailing list.

       Configure the digest list
           Execute the <u>set</u> command to set any appropriate options for the digest list. There one important
           differences to note: messages are not posted to the digest list directly, so there is no moderation
           option, however the digest version of the list can have moderated subscription requests.

       Link the two lists
           Set the DIGEST option for the main mailing list, specifying the directory of the digest list. This
           keyword lets <b>couriermlm</b> know that a digest version is available.

               <b>Note</b>
               You MUST set identical POSTARCHIVE option for both the main list, and the digest list.

       Create <b><a href="../man5/dot-courier.5.html">dot-courier</a></b>(5)[1] files
           It is necessary to create <b><a href="../man5/dot-courier.5.html">dot-courier</a></b>(5)[1] files for the digest list just like the main list, except
           for some important differences, which are noted below.

       Create <b><a href="../man8/cron.8.html">cron</a></b>(8) jobs
           It is also necessary to create cron jobs for the digest list exactly like the main list, to run the
           <u>hourly</u> and <u>daily</u> cleanup. It's possible to set up one set of cron jobs to run <u>hourly</u> and <u>daily</u>
           cleanups consecutively for both lists.

       Create a <u>digest</u> <b><a href="../man8/cron.8.html">cron</a></b>(8) job
           The <u>digest</u> creates and distributes the digest version of the list. It can be executed by a <b><a href="../man8/cron.8.html">cron</a></b>(8)
           job, or the command can be executed manually.

       The main mailing list is supported by three <b><a href="../man5/dot-courier.5.html">dot-courier</a></b>(5)[1] files, as previously described: the posting
       address, the owner forwarding address, and the default address that handles administrative control
       messages. In the following example, the names $HOME/.courier-list, $HOME/.courier-list-owner, and
       $HOME/.courier-list-default are used to represent each one of these files, and the following names are
       used to represent the <b><a href="../man5/dot-courier.5.html">dot-courier</a></b>(5)[1] files that correspond to the digest version of the mailing list:
       $HOME/.courier-list-digest, $HOME/.courier-list-digest-owner, and $HOME/.courier-list-digest-default.
       Note, however, that the digest version of the mailing list can have any name, not necessary the name of
       the list, followed by "digest".

       The contents of both $HOME/.courier-list $HOME/.courier-list-digest must be the same. Sending a message
       to the digest address should really end up sending a message to the main mailing list. Do not put the
       address of the digest mailing list directory in $HOME/.courier-list-digest, instead specify the address
       of the main mailing list directory. Just copy $HOME/.courier-list to $HOME/.courier-list-digest.

       However, the contents of $HOME/.courier-list-digest-default must specify the directory of the digest
       version of the mailing list. The digest list is managed separately from the main list, it has its own
       subscriber list that is separate from the list of subscribers to the main list.
       $HOME/.courier-list-default can simply be copied to $HOME/.courier-list-digest-default, then the
       directory can be changed in the latter.

       $HOME/.courier-list-owner may use the same mailing list owner address as
       $HOME/.courier-list-digest-owner, or it can specify a different address. The both the digest and the main
       mailing list can have the same mailing list owner/moderator, or have a different owner/moderator.

       The following command must be executed in order to link the two lists together:

           /usr/bin/couriermlm set \
               <u>/path/to/main/list/directory</u> \
               DIGEST=<u>/path/to/digest/list/directory</u>

       Setting the DIGEST option on the main list lets <b>couriermlm</b> know that a digest version is available. The
       DIGEST option must either use an absolute pathname, or a pathname that's relative to the main list
       directory (NOT the current directory).

       When the DIGEST option is set, messages are simultaneously distributed to the mailing list's subscribers,
       saved in the archive subdirectory of the main list, then placed in the modqueue subdirectory of the
       digest list. Digest list do not employ moderation -- any moderation must take place on the main list --
       so the modqueue subdirectory is recycled to compile individual messages for the digest.

       Finally, something needs to be done in order to actually distribute the digest to the digest list's
       subscribers. This is done by running the following command:

           /usr/bin/couriermlm digest <u>/path/to/digest/directory</u> <u>N</u> <u>H</u>

       This command creates a digest, and sends it out. The <u>N</u> and <u>H</u> arguments are optional. The digest is
       created only if there's at least <u>N</u> messages that are waiting to be sent in the digest list, or if the
       oldest message is at least <u>H</u> hours old. Both options default to 0, so the default behavior is to send a
       digest with all unsent messages.

       Note that when the digest is created, ALL unsent messages are packaged into the digest, even if some
       messages are more recent than the time interval specified by the <u>H</u> option. A <b><a href="../man8/cron.8.html">cron</a></b>(8) job can be set up to
       run the <u>digest</u> command, or run it manually.

       <b>couriermlm</b> automatically provides the From:, To: headers on a message digest. Additional headers may be
       specified by the headeradd file in the digest list directory. The headerdel file has no effect. Note that
       the individual messages in the digest are copies of the messages from the main mailing list, and thus
       have the headeradd and headerdel headers processed from the main mailing list directory.

</pre><h4><b>BUGS</b></h4><pre>
       <b>couriermlm</b> will not work if the Courier mail server's support for <b><a href="../man5/dot-courier.5.html">dot-courier</a></b>(5)[1] extensions is
       disabled.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man8/courier.8.html">courier</a></b>(8)[7], <b><a href="../man5/dot-courier.5.html">dot-courier</a></b>(5)[1], <b><a href="../man1/webmlmd.1.html">webmlmd</a></b>(1)[3].

</pre><h4><b>AUTHOR</b></h4><pre>
       <b>Sam</b> <b>Varshavchik</b>
           Author

</pre><h4><b>NOTES</b></h4><pre>
        1. <b><a href="../man5/dot-courier.5.html">dot-courier</a></b>(5)
           <a href="http://www.courier-mta.org/dot-courier.html">http://www.courier-mta.org/dot-courier.html</a>

        2. Setting up a mailing list digest
           <a href="http://www.courier-mta.org/">http://www.courier-mta.org/</a>#digest

        3. <b><a href="../man1/webmlmd.1.html">webmlmd</a></b>(1)
           <a href="http://www.courier-mta.org/webmlmd.html">http://www.courier-mta.org/webmlmd.html</a>

        4. Mailing list commands
           <a href="http://www.courier-mta.org/">http://www.courier-mta.org/</a>#command

        5. <b><a href="../man7/localmailfilter.7.html">localmailfilter</a></b>(7)
           <a href="http://www.courier-mta.org/localmailfilter.html">http://www.courier-mta.org/localmailfilter.html</a>

        6. Write-Only Aliases
           <a href="http://www.courier-mta.org/">http://www.courier-mta.org/</a>#wonly

        7. <b><a href="../man8/courier.8.html">courier</a></b>(8)
           <a href="http://www.courier-mta.org/courier.html">http://www.courier-mta.org/courier.html</a>

Courier Mail Server                                04/26/2022                                      <u><a href="../man1/COURIERMLM.1.html">COURIERMLM</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>