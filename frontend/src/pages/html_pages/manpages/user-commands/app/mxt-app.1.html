<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>mxt-app - command line utility for maXTouch devices</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/jammy/+package/mxt-app">mxt-app_1.28-2_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       mxt-app - command line utility for maXTouch devices

</pre><h4><b>SYNOPSIS</b></h4><pre>
       mxt-app [<u>command</u>] [<u>options</u>]...

</pre><h4><b>DESCRIPTION</b></h4><pre>
       mxt-app  is  a utility for managing Atmel maXTouch touch controllers and other devices that support Atmel
       Object Based Protocol.

       If no <u>command</u> is not given, mxt-app will provide an interactive menu based interface.

</pre><h4><b>OBJECT</b> <b>PROTOCOL</b></h4><pre>
       The Atmel Object Based Protocol defines how device registers (normally accessed via I2C)  are  mapped  to
       different  functions within the devices.  This interface organises the register map into separate objects
       each of which is given a T number.  <u>mxt-app</u> can inspect and alter the object configuration, and view  di‐
       agnostic data, while the device is running.

       For  a  description  of  object  protocol, see <u>Atmel</u> <u>AT42QT1085</u> <u>Object</u> <u>Protocol</u> <u>Guide</u>, available from at‐
       mel.com.

       The meaning of the configuration bytes within the objects may be found in the Protocol  Guide  documenta‐
       tion released with each device, and is only provided by Atmel under NDA.

</pre><h4><b>GENERAL</b> <b>COMMANDS</b></h4><pre>
       <b>-h</b> <b>[--help]</b>
              Display a brief summary of available options and exit.

       <b>-i</b> <b>[--info]</b>
              Print the ID information and object table.

       <b>-M</b> <b>[--messages]</b> <b>[*timeout*]</b>
              Prints  the messages until <u>timeout</u> seconds have passed.  If no <u>timeout</u> is provided, continue until
              user presses Ctrl-C.  Zero timeout reads once.  Provide -F [--msg-filter] option to  filter  by  a
              specific object.

       <b>-F</b> <b>[--msg-filter]</b> <b>*TYPE*</b>
              Filters messages by object <u>TYPE</u>.

       <b>--reset</b>
              Reset device.

       <b>--calibrate</b>
              Send calibrate command.

       <b>--backup[*=COMMAND*]</b>
              Backup configuration to NVRAM where the optional argument, <u>COMMAND</u>, is the BACKUPNV command.

       <b>-g</b>     Write Golden Reference calibration to NVRAM.

       <b>--self-cap-tune-config</b>
              Tune and calibrate the self capacitance settings and store them to the device configuration.

       <b>--self-cap-tune-nvram</b>
              Tune and calibrate the self capacitance settings and store them to NVRAM without updating the Con‐
              fig Checksum.

       <b>--version</b>
              print version of mxt-app.

       <b>--block-size</b> <b>*BLOCKSIZE*</b>
              Sets the i2c block size.

</pre><h4><b>CONFIGURATION</b> <b>FILE</b> <b>COMMANDS</b></h4><pre>
       <b>--load</b> <b>*FILE*</b>
              Upload  config  from <u>FILE</u>, write it to NVRAM, and reset device.  The configuration may be in .xcfg
              or OBP_RAW format.

       <b>--save</b> <b>*FILE*</b>
              Save config to <u>FILE</u> in either OBP_RAW or .xcfg format.

       <b>--checksum</b> <b>*FILE*</b>
              Read the contents of <u>FILE</u> and recalculate the configuration checksum.

</pre><h4><b>REGISTER</b> <b>READ/WRITE</b> <b>COMMANDS</b></h4><pre>
       <b>-R</b> <b>[--read]</b>
              Read data from the device.

       <b>-W</b> <b>[--write]</b>
              Write data to the device.

       <b>-n</b> <b>[--count]</b> <b>*COUNT*</b>
              read/write <u>COUNT</u> registers

       <b>-f</b> <b>[--format]</b>
              format register output

       <b>-I</b> <b>[--instance]</b> <b>*INSTANCE*</b>
              select object <u>INSTANCE</u>

       <b>-r</b> <b>[--register]</b> <b>*REGISTER*</b>
              start at <u>REGISTER</u> (offset in object when used with <u>TYPE</u>)

       <b>-T</b> <b>[--type]</b> <b>*TYPE*</b>
              select object <u>TYPE</u>

       <b>--zero</b> zero all configuration settings

   <b>EXAMPLES</b>
   <b>Read</b> <b>info</b> <b>block:</b>
              $ mxt-app -R -n7 -r0
              82 19 11 AA 18 0E 16

   <b>Read</b> <b>T7</b> <b>Power</b> <b>Config</b> <b>object:</b>
              $ mxt-app -R -T7
              32 FF 05 43

   <b>Zero</b> <b>first</b> <b>two</b> <b>bytes</b> <b>of</b> <b>T7:</b>
              $ mxt-app -W -T7 0000

   <b>Read</b> <b>T7</b> <b>Power</b> <b>Config</b> <b>object,</b> <b>formatted</b> <b>output:</b>
              $ mxt-app -R -T7 --format
              GEN_POWERCONFIG_T7

              00: 0x00    0 0000 0000
              01: 0x00    0 0000 0000
              02: 0x05    5 0000 0101
              03: 0x43   67 0100 0011

</pre><h4><b>TCP</b> <b>SOCKET</b> <b>COMMANDS</b></h4><pre>
       <u>mxt-app</u> supports connection over TCP using a ASCII protocol which allows mxt-app to act as  a  bridge  so
       that Atmel proprietary tools such as <u>Object</u> <u>Server</u> can access the device.

       <b>-C</b> <b>[--bridge-client]</b> <b>*HOST*</b>
              Connect over TCP to <u>HOST</u>

       <b>-S</b> <b>[--bridge-server]</b>
              Start TCP socket server

       <b>-p</b> <b>[--port]</b> <b>PORT</b>
              TCP port (default 4000)

</pre><h4><b>BOOTLOADER</b> <b>COMMANDS</b></h4><pre>
       <b>--bootloader-version</b>
              Query and print ID and version of bootloader.

       <b>--flash</b> <b>*FIRMWARE*</b>
              Flash <u>FIRMWARE</u> to device.  The firmware file should be in .enc format.

       <b>--reset-bootloader</b>
              Reset  device in bootloader mode.  In bootloader mode the device will cease normal operation until
              a firmware is sent.  The I2C address or USB PID will change.  The only valid command in this  mode
              is  --flash.  A hard power cycle will return the device to normal Object Protocol mode, unless the
              firmware image is corrupted.  This command is only provided for debugging purposes: in most  cases
              --flash will manage the change to/from bootloader mode before/after flash.

       <b>--firmware-version</b> <b>*VERSION*</b>
              The  .enc file format does not provide the firmware version in a form available to mxt-app.  If it
              is provided via this switch, mxt-app can check firmware <u>VERSION</u> before and after flash.   It  will
              skip  the flash process if the firmware version is already correct.  It will also check for a suc‐
              cessful flash on completion.  The version must be provided in the format 1.0.AA.  # T25 SELF  TEST
              OPTIONS

       The  Self  Test  T25  object  runs self-test routines in the device to find faults in the sense lines and
       electrodes.  The Self Test T25 object runs a series of test sequences.

       <b>-t</b> <b>[--test]</b>
              Run all self tests.

       <b>-t*XX*</b> <b>[--test=*XX*]</b>
              Run individual self test specified by the <u>CMD</u> hex value.

       <b>-t01</b>   run analog power test.

       <b>-t11</b>   run pin fault test.

       <b>-t12</b>   run pin fault 2 test.

       <b>-t13</b>   run AND gate test.

       <b>-t17</b>   run signal limit test.

       <b>-t20</b>   run gain test.

       <b>-t21</b>   run offset fault test.

</pre><h4><b>T37</b> <b>DIAGNOSTIC</b> <b>DATA</b> <b>OPTIONS</b></h4><pre>
       Capture frames of diagnostic data.  The default mode is to capture touch deltas.  Self  capacitance  mea‐
       surements are only available on some devices.

       <b>--debug-dump</b> <b>*FILE*</b>
              The  T37 Diagnostic Data object provides raw access to touch reference/delta measurements from the
              touch screen.  Diagnostic data is written to <u>FILE</u> in CSV format.  The format  is  compatible  with
              the Atmel Hawkeye utility.

       <b>--frames</b> <b>*N*</b>
              Capture <u>N</u> frames of data.

       <b>--references</b>
              Capture references data.

       <b>--self-cap-signals</b>
              Capture self cap signals.

       <b>--self-cap-deltas</b>
              Capture self cap deltas.

       <b>--self-cap-refs</b>
              Capture self cap references.

       <b>--active-stylus-deltas</b>
              Capture active stylus deltas.

       <b>--active-stylus-refs</b>
              Capture active stylus references.

</pre><h4><b>T68</b> <b>SERIAL</b> <b>DATA</b> <b>COMMANDS</b></h4><pre>
       <b>--t68-file</b> <b>*FILE*</b>
              Upload <u>FILE</u> to the device via the T68 Serial Data object.

       <b>--t68-datatype</b> <b>*DATATYPE*</b>
              Set <u>DATATYPE</u> of the file.  This will be automatically detected from the file itself in most cases.

</pre><h4><b>BROKEN</b> <b>LINE</b> <b>DETECTION</b></h4><pre>
       The broken line test scans the diagnostic data to identify touch sensor defects.

       <b>--broken-line</b>
              Run the broken line detection algorithm on the device

       <b>--dualx</b>
              Indicate if sensor X lines are double connected

       <b>--x-center-threshold</b> <b>N</b>
              Set threshold for X lines in center of sensor to N percent

       <b>--x-border-threshold</b> <b>N</b>
              Set threshold for X lines at edge of sensor to N percent

       <b>--y-center-threshold</b> <b>N</b>
              Set threshold for Y lines in center of sensor to N percent

       <b>--y-border-threshold</b> <b>N</b>
              Set threshold for Y lines at edge of sensor to N percent

       <b>--pattern</b> <b>*PATTERN*</b>
              set sensor <u>PATTERN</u> material to ITO or Xsense

</pre><h4><b>SENSOR</b> <b>VARIANT</b> <b>ALGORITHM</b></h4><pre>
       The  sensor  variant algorithm calculates all nodes of a channel to find the trend line of the reference.
       A comparison is done between the real and expected sensor reference.

       <b>--sensor-variant</b>
              Perform the Sensor Variant algorithm

       <b>--dualx</b>
              Indicate if sensor X lines are double connected

       <b>--fail-if-any</b>
              Fail the Sensor Variant test on any defects

       <b>--max-defects</b> <b>N</b>
              Maximum No. of continuous defects

       <b>--upper-limit</b> <b>N</b>
              Upper limit for regression, in percentage %

       <b>--lower-limit</b> <b>N</b>
              Lower limit for regression, in percentage %

       <b>--matrix-size</b> <b>N</b>
              The allowed matrix size

</pre><h4><b>FINDING</b> <b>AND</b> <b>SPECIFYING</b> <b>DEVICE</b></h4><pre>
       By default mxt-app will scan available devices and connect to the first device it finds.

       <b>-q</b> <b>[--query]</b>
              Scan for devices and output a list.

       <b>-d</b> <b>[--device]</b> <b>*DEVICESTRING*</b>
              Connect to a particular device specified by <u>DEVICESTRING</u> which is given in the same format as out‐
              put by --query.

       There are three connection methods supported for hardware access:

   <b>sysfs</b>
       This is used in conjunction with the Linux kernel driver.  It accesses sysfs attributes under the  direc‐
       tory

              /sys/bus/i2c/drivers/dddddddd/b-00xx/

       Where

       <b>d</b>      driver name - atmel_mxt_ts, Atmel MXTXXXX, etc

       <b>b</b>      i2c adapter

       <b>xx</b>     i2c address

       A specific USB device can be specified by giving a device option -d sysfs:PATH as given by -q/--query op‐
       tion

       The sysfs attributes used under this directory are

       <b>mem_access</b>
              Access to raw I2C address space.

       <b>debug_enable</b>
              Output messages from the device to dmesg log as hexadecimal.

       <b>debug_v2_enable,</b> <b>debug_msg,</b> <b>debug_notify</b>
              Optional improved binary interface to retrieve messages

       They are provided when using the Atmel kernel driver from github, and may be supported by other devices.

   <b>USB</b>
       Many  maXTouch  devices  support  a  USB mode which reports touches via USB HID.  In addition, evaluation
       boards may use a “bridge chip” which interfaces I2C to the same protocol.

       USB mode will be built by autotools when libusb is available.

       A specific USB device can be specified by giving a device option -d usb:001-003 which corresponds to  the
       bus and device numbers given by the -q/--query option and lsusb.

   <b>I2C</b> <b>debug</b> <b>interface</b>
       Devices  can  be  accessed  directly via the <u>i2c-dev</u> I2C debug interface by giving adapter and address on
       command line.

       The i2c-dev interface is documented in the Linux kernel source, in Documentation/i2c/dev-interface

       The I2C debug interface support must be enabled using the CONFIG_I2C_CHARDEV kernel configuration option.
       It is enabled on a system if files /dev/i2c-* are present.

       To use i2c-dev, provide a device string such as -d i2c-dev:1-004a.

       Messages from the maXTouch devices are read by polling.  If a kernel driver is also present on  the  sys‐
       tem,  reading  messages  on interrupt, then no messages will be received by the tool.  A workaround is to
       set T18.COMMAND (byte 1) to 2 “Force the CHG line high (inactive)” so the kernel driver does not  receive
       an interrupt.

       There  is no scanning support.  This is because reading from every possible maXTouch address on every I2C
       bus might adversely affect some unrelated hardware that does not understand Object  Protocol.   You  must
       manually  identify  the correct adapter and address by reference to the protocol guide or to the platform
       setup.

       It is possible to use the --flash command with a device already in bootloader  mode,  by  specifying  the
       bootloader address.

   <b>HIDRAW</b>
       The hidraw backend supports maXTouch devices which connect using USB or HID over I2C.

       The hidraw interface is documented in the Linux kernel source, in Documentation/hid/hidraw.txt

       The device must have /dev/hidraw raw HID device support enabled using the CONFIG_HIDRAW kernel configura‐
       tion option.

       To use hidraw, provide a device string such as -d hidraw:/dev/hidraw0.

       There is no scanning support.

       Bootloading is not supported in this mode.

</pre><h4><b>DEBUG</b> <b>OPTIONS</b></h4><pre>
       <b>-v</b> <b>[--verbose]</b> <b>*LEVEL*</b>
              set  debug level.  <u>LEVEL</u> is one of 0 (Silent), 1 (Warnings and Errors), 2 (Info - default), 3 (De‐
              bug), 4 (Verbose).  Debug and Verbose are only available if built in.

</pre><h4><b>EXIT</b> <b>VALUES</b></h4><pre>
       <b>0</b>      Success

       <b>1</b>      Internal error/assert

       <b>2</b>      Input/output error

       <b>3</b>      Memory allocation failure

       <b>4</b>      Timeout

       <b>5</b>      Could not find a device or device went away

       <b>6</b>      Permission denied

       <b>7</b>      Operation not allowed for this device type

       <b>8</b>      Interrupt function call

       <b>9</b>      Object not available on device

       <b>10</b>     Received unexpected invalid message from message processor

       <b>11</b>     Self test invalid test command

       <b>12</b>     Self test AVdd Analog power is not present

       <b>13</b>     Self test Pin fault

       <b>14</b>     Self test AND Gate Fault

       <b>15</b>     Self test Signal limit fault

       <b>16</b>     Self test Gain error

       <b>17</b>     Information block checksum error

       <b>18</b>     Bootloader already unlocked

       <b>19</b>     Bootloader CRC failure (transmission failure)

       <b>20</b>     File format error

       <b>21</b>     Device firmware already required version

       <b>22</b>     Could not identify bootloader address

       <b>23</b>     Version on device did not match version given after bootloading operation

       <b>24</b>     Device did not reset

       <b>25</b>     Device in unexpected state

       <b>26</b>     Incorrect command line parameters or menu input given

       <b>27</b>     Bridge TCP protocol parse error

       <b>28</b>     Bridge connection error

       <b>29</b>     Serial data download failed

       <b>30</b>     No such file or directory

       <b>31</b>     Error processing self cap command

</pre><h4><b>COMPILING</b> <b>FROM</b> <b>SOURCE</b></h4><pre>
       To download the source code using git:

              git clone https://github.com/atmel-maxtouch/mxt-app.git

       There are two build harnesses, for Android and autotools:

   <b>Android</b>
       To download libusbdroid submodule:

              git submodule init
              git submodule update

       To compile using Android NDK:

              ndk-build

       To enable debug:

              ndk-build NDK_DEBUG=1

       To enable PIE support (for Android L):

              ndk-build APP_PLATFORM=android-16

       Binaries will be placed in libs/

       The Android NDK is available from https://developer.android.com/tools/sdk/ndk/

   <b>Running</b> <b>on</b> <b>Android</b>
              adb push libs/armeabi/mxt-app /data/local/tmp/
              adb shell /data/local/tmp/mxt-app [command]

       If executable permissions have not been set, run:

              adb shell chmod 777 /data/local/tmp/mxt-app

   <b>autotools</b>
       To compile using autotools:

              ./autogen.sh &amp;&amp; make

       To cross-compile:

              ./autogen.sh --host=arm-linux-gnueabi &amp;&amp; make

              or,

              ./autogen.sh --host=arm-linux-gnueabihf &amp;&amp; make

       To enable debug:

              ./autogen.sh --enable-debug

       To enable generation of the man page using pandoc:

              ./autogen.sh --enable-man

       To build the doxygen documentation (this requires doxygen and graphviz to be installed):

              make doc

</pre><h4><b>VERSION</b> <b>NUMBERING</b></h4><pre>
       A version number is generated by git describe during the build process and is reported by  --version  and
       to debug logs.

       A  typical  version might be 1.15-29-g8321 which means, 29 commits after the release tag 1.15, with a git
       SHA id beginning with 8321.

       If the source is not checked out using git (for example by clicking on the github “Download  ZIP”  link),
       then the version from the file VERSION in the source archive is used.

       The suffix -mod is appended if there are uncommitted changes in the source code.

</pre><h4><b>TROUBLESHOOTING</b></h4><pre>
   <b>klogctl</b> <b>error</b>
       If you see the warning

              W: klogctl error 1 (Operation not permitted)

       this  indicates  that mxt-app has been unable to retrieve messages from dmesg.  Various features will not
       work properly.  It may be possible to unrestrict dmesg by doing

              # echo 0 &gt; <a href="file:/proc/sys/kernel/dmesg_restrict">/proc/sys/kernel/dmesg_restrict</a>

                                                                                                      <u><a href="../man1/MXT-APP.1.html">MXT-APP</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>