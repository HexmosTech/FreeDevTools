<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>This  manual  page  is part of the POSIX Programmer's Manual.  The Linux implementation of this interface</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/manpages-posix">manpages-posix_2017a-2_all</a> <br><br><pre>
</pre><h4><b>PROLOG</b></h4><pre>
       This  manual  page  is part of the POSIX Programmer's Manual.  The Linux implementation of this interface
       may differ (consult the corresponding Linux manual page for details of Linux behavior), or the  interface
       may not be implemented on Linux.

</pre><h4><b>NAME</b></h4><pre>
       du — estimate file space usage

</pre><h4><b>SYNOPSIS</b></h4><pre>
       du <b>[</b>-a|-s<b>]</b> <b>[</b>-kx<b>]</b> <b>[</b>-H|-L<b>]</b> <b>[</b><u>file</u>...<b>]</b>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       By  default,  the  <u>du</u> utility shall write to standard output the size of the file space allocated to, and
       the size of the file space allocated to each subdirectory of, the file hierarchy rooted in  each  of  the
       specified  files.  By  default,  when  a  symbolic link is encountered on the command line or in the file
       hierarchy, <u>du</u> shall count the size of the symbolic link (rather than the file referenced  by  the  link),
       and  shall  not  follow  the  link  to  another portion of the file hierarchy. The size of the file space
       allocated to a file of type directory shall be defined as the sum total of space allocated to  all  files
       in the file hierarchy rooted in the directory plus the space allocated to the directory itself.

       When  <u>du</u>  cannot  <u>stat</u>()  files or <u>stat</u>() or read directories, it shall report an error condition and the
       final exit status is affected. A file that occurs multiple times under one file operand and  that  has  a
       link  count  greater than 1 shall be counted and written for only one entry. It is implementation-defined
       whether a file that has a link count no greater than 1 is counted and written just once,  or  is  counted
       and  written  for each occurrence. It is implementation-defined whether a file that occurs under one file
       operand is counted for other file operands. The directory  entry  that  is  selected  in  the  report  is
       unspecified.  By  default, file sizes shall be written in 512-byte units, rounded up to the next 512-byte
       unit.

</pre><h4><b>OPTIONS</b></h4><pre>
       The <u>du</u> utility shall conform to the Base Definitions volume of POSIX.1‐2017, <u>Section</u> <u>12.2</u>, <u>Utility</u> <u>Syntax</u>
       <u>Guidelines</u>.

       The following options shall be supported:

       <b>-a</b>        In addition to the default output, report the size of each file not of type  directory  in  the
                 file  hierarchy  rooted  in  the  specified  file.  The <b>-a</b> option shall not affect whether non-
                 directories given as <u>file</u> operands are listed.

       <b>-H</b>        If a symbolic link is specified on the command line, <u>du</u> shall count the size  of  the  file  or
                 file hierarchy referenced by the link.

       <b>-k</b>        Write the files sizes in units of 1024 bytes, rather than the default 512-byte units.

       <b>-L</b>        If  a  symbolic  link is specified on the command line or encountered during the traversal of a
                 file hierarchy, <u>du</u> shall count the size of the file or file hierarchy referenced by the link.

       <b>-s</b>        Instead of the default output, report only the total sum for each of the specified files.

       <b>-x</b>        When evaluating file sizes, evaluate only those files that have the same  device  as  the  file
                 specified by the <u>file</u> operand.

       Specifying  more  than  one of the mutually-exclusive options <b>-H</b> and <b>-L</b> shall not be considered an error.
       The last option specified shall determine the behavior of the utility.

</pre><h4><b>OPERANDS</b></h4><pre>
       The following operand shall be supported:

       <u>file</u>      The pathname of a file whose size is to be written.  If  no  <u>file</u>  is  specified,  the  current
                 directory shall be used.

</pre><h4><b>STDIN</b></h4><pre>
       Not used.

</pre><h4><b>INPUT</b> <b>FILES</b></h4><pre>
       None.

</pre><h4><b>ENVIRONMENT</b> <b>VARIABLES</b></h4><pre>
       The following environment variables shall affect the execution of <u>du</u>:

       <u>LANG</u>      Provide a default value for the internationalization variables that are unset or null. (See the
                 Base  Definitions  volume  of POSIX.1‐2017, <u>Section</u> <u>8.2</u>, <u>Internationalization</u> <u>Variables</u> for the
                 precedence  of  internationalization  variables  used  to  determine  the  values   of   locale
                 categories.)

       <u>LC_ALL</u>    If  set  to a non-empty string value, override the values of all the other internationalization
                 variables.

       <u>LC_CTYPE</u>  Determine the locale for the interpretation of sequences of bytes of text  data  as  characters
                 (for example, single-byte as opposed to multi-byte characters in arguments).

       <u>LC_MESSAGES</u>
                 Determine  the  locale  that  should  be  used  to affect the format and contents of diagnostic
                 messages written to standard error.

       <u>NLSPATH</u>   Determine the location of message catalogs for the processing of <u>LC_MESSAGES</u>.

</pre><h4><b>ASYNCHRONOUS</b> <b>EVENTS</b></h4><pre>
       Default.

</pre><h4><b>STDOUT</b></h4><pre>
       The output from <u>du</u> shall consist of the amount of space allocated to a file and the name of the file,  in
       the following format:

           "%d %s\n", &lt;<u>size</u>&gt;, &lt;<u>pathname</u>&gt;

</pre><h4><b>STDERR</b></h4><pre>
       The standard error shall be used only for diagnostic messages.

</pre><h4><b>OUTPUT</b> <b>FILES</b></h4><pre>
       None.

</pre><h4><b>EXTENDED</b> <b>DESCRIPTION</b></h4><pre>
       None.

</pre><h4><b>EXIT</b> <b>STATUS</b></h4><pre>
       The following exit values shall be returned:

        0    Successful completion.

       &gt;0    An error occurred.

</pre><h4><b>CONSEQUENCES</b> <b>OF</b> <b>ERRORS</b></h4><pre>
       Default.

       <u>The</u> <u>following</u> <u>sections</u> <u>are</u> <u>informative.</u>

</pre><h4><b>APPLICATION</b> <b>USAGE</b></h4><pre>
       None.

</pre><h4><b>EXAMPLES</b></h4><pre>
       None.

</pre><h4><b>RATIONALE</b></h4><pre>
       The  use of 512-byte units is historical practice and maintains compatibility with <u>ls</u> and other utilities
       in this volume of POSIX.1‐2017. This does not mandate that the file system itself be  based  on  512-byte
       blocks.  The  <b>-k</b>  option was added as a compromise measure. It was agreed by the standard developers that
       512 bytes was the best default unit because of its complete historical consistency on  System  V  (<u>versus</u>
       the  mixed  512/1024-byte  usage on BSD systems), and that a <b>-k</b> option to switch to 1024-byte units was a
       good compromise. Users who prefer the 1024-byte quantity can easily alias <u>du</u> to <u>du</u>  <b>-k</b>  without  breaking
       the many historical scripts relying on the 512-byte units.

       The  <b>-b</b> option was added to an early proposal to provide a resolution to the situation where System V and
       BSD systems give figures for file sizes in <u>blocks</u>, which is an implementation-defined concept. (In common
       usage, the block size is 512 bytes for System V and 1024 bytes for BSD systems.)  However, <b>-b</b>  was  later
       deleted, since the default was eventually decided as 512-byte units.

       Historical  file systems provided no way to obtain exact figures for the space allocation given to files.
       There are two known areas of inaccuracies in historical file systems: cases of <u>indirect</u> <u>blocks</u> being used
       by the file system or <u>sparse</u> files yielding incorrectly high values. An indirect block is space  used  by
       the  file  system  in the storage of the file, but that need not be counted in the space allocated to the
       file. A <u>sparse</u> file is one in which an <u>lseek</u>() call has been made to a position beyond  the  end  of  the
       file  and  data  has  subsequently  been  written  at that point. A file system need not allocate all the
       intervening zero-filled blocks to such a file. It is up to  the  implementation  to  define  exactly  how
       accurate its methods are.

       The  <b>-a</b>  and  <b>-s</b>  options  were  mutually-exclusive  in  the original version of <u>du</u>.  The POSIX Shell and
       Utilities description is implied by the language in the SVID where <b>-s</b> is described as causing ``only  the
       grand  total''  to  be reported. Some systems may produce output for <b>-sa</b>, but a Strictly Conforming POSIX
       Shell and Utilities Application cannot use that combination.

       The <b>-a</b> and <b>-s</b> options were adopted from the SVID except that the System V behavior of  not  listing  non-
       directories  explicitly  given  as operands, unless the <b>-a</b> option is specified, was considered a bug; the
       BSD-based behavior (report for all operands) is mandated. The default behavior of <u>du</u>  in  the  SVID  with
       regard to reporting the failure to read files (it produces no messages) was considered counter-intuitive,
       and  thus  it  was specified that the POSIX Shell and Utilities default behavior shall be to produce such
       messages. These messages can be turned off with shell redirection to achieve the System V behavior.

       The <b>-x</b> option is historical practice on recent BSD systems.  It  has  been  adopted  by  this  volume  of
       POSIX.1‐2017  because  there  was  no  other historical method of limiting the <u>du</u> search to a single file
       hierarchy. This limitation of the search is necessary to make it possible  to  obtain  file  space  usage
       information  about  a  file system on which other file systems are mounted, without having to resort to a
       lengthy <u>find</u> and <u>awk</u> script.

</pre><h4><b>FUTURE</b> <b>DIRECTIONS</b></h4><pre>
       A future version of this standard may require that a file that occurs multiple times shall be counted and
       written for only one entry, even if the occurrences are under different file operands.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <u>ls</u>

       The Base Definitions volume of POSIX.1‐2017, <u>Chapter</u> <u>8</u>,  <u>Environment</u>  <u>Variables</u>,  <u>Section</u>  <u>12.2</u>,  <u>Utility</u>
       <u>Syntax</u> <u>Guidelines</u>

       The System Interfaces volume of POSIX.1‐2017, <u>fstatat</u>()

</pre><h4><b>COPYRIGHT</b></h4><pre>
       Portions of this text are reprinted and reproduced in electronic form from IEEE Std 1003.1-2017, Standard
       for  Information  Technology  --  Portable  Operating  System  Interface  (POSIX),  The  Open  Group Base
       Specifications Issue 7, 2018 Edition, Copyright (C) 2018 by the Institute of Electrical  and  Electronics
       Engineers, Inc and The Open Group.  In the event of any discrepancy between this version and the original
       IEEE  and The Open Group Standard, the original IEEE and The Open Group Standard is the referee document.
       The original Standard can be obtained online at <a href="http://www.opengroup.org/unix/online.html">http://www.opengroup.org/unix/online.html</a> .

       Any typographical or formatting errors that appear in this page are most likely to have  been  introduced
       during   the   conversion  of  the  source  files  to  man  page  format.  To  report  such  errors,  see
       https://www.kernel.org/doc/man-pages/reporting_bugs.html .

IEEE/The Open Group                                   2017                                            <u><a href="../man1POSIX/DU.1POSIX.html">DU</a></u>(1POSIX)
</pre>
 </div>
</div></section>
</div>
</body>
</html>