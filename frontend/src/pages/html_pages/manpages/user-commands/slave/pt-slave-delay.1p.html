<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>pt-slave-delay - Make a MySQL slave server lag behind its master.</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/percona-toolkit">percona-toolkit_3.2.1-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       pt-slave-delay - Make a MySQL slave server lag behind its master.

</pre><h4><b>SYNOPSIS</b></h4><pre>
       Usage: pt-slave-delay [OPTIONS] SLAVE_DSN [MASTER_DSN]

       pt-slave-delay starts and stops a slave server as needed to make it lag behind the master.  The SLAVE_DSN
       and MASTER_DSN use DSN syntax, and values are copied from the SLAVE_DSN to the MASTER_DSN if omitted.

       To hold slavehost one minute behind its master for ten minutes:

          pt-slave-delay --delay 1m --interval 15s --run-time 10m slavehost

</pre><h4><b>RISKS</b></h4><pre>
       Percona Toolkit is mature, proven in the real world, and well tested, but all database tools can pose a
       risk to the system and the database server.  Before using this tool, please:

       •   Read the tool's documentation

       •   Review the tool's known "BUGS"

       •   Test the tool on a non-production server

       •   Backup your production server and verify the backups

</pre><h4><b>DESCRIPTION</b></h4><pre>
       "pt-slave-delay"  watches a slave and starts and stops its replication SQL thread as necessary to hold it
       at least as far behind the master as you request.  In practice, it will typically cause the slave to  lag
       between "--delay" and "--delay" + "--interval" behind the master.

       It  bases  the  delay  on  binlog  positions in the slave's relay logs by default, so there is no need to
       connect to the master.  This works well if the IO thread doesn't lag the master much, which is typical in
       most replication setups; the IO thread lag is usually  milliseconds  on  a  fast  network.   If  your  IO
       thread's  lag  is  too  large  for  your  purposes,  "pt-slave-delay"  can also connect to the master for
       information about binlog positions.

       If the slave's I/O thread reports that it is waiting for the SQL thread to free  some  relay  log  space,
       "pt-slave-delay"  will automatically connect to the master to find binary log positions.  If "--ask-pass"
       and "--daemonize" are given, it is possible that this  could  cause  it  to  ask  for  a  password  while
       daemonized.   In this case, it exits.  Therefore, if you think your slave might encounter this condition,
       you should be sure to either  specify  "--use-master"  explicitly  when  daemonizing,  or  don't  specify
       "--ask-pass".

       The  SLAVE_DSN  and optional MASTER_DSN are both DSNs.  See "DSN OPTIONS".  Missing MASTER_DSN values are
       filled in with values from SLAVE_DSN, so you don't need to specify them in both places.  "pt-slave-delay"
       reads all normal MySQL option files, such as <a href="file:~/.my.cnf">~/.my.cnf</a>, so you may not need to specify username, password
       and other common options at all.

       "pt-slave-delay" tries to exit gracefully  by  trapping  signals  such  as  Ctrl-C.   You  cannot  bypass
       "--[no]continue" with a trappable signal.

</pre><h4><b>PRIVILEGES</b></h4><pre>
       pt-slave-delay requires the following privileges: PROCESS, REPLICATION CLIENT, and SUPER.

</pre><h4><b>OUTPUT</b></h4><pre>
       If  you  specify  "--quiet",  there  is  no  output.   Otherwise,  the  normal output is a status message
       consisting of a timestamp and information about what  "pt-slave-delay"  is  doing:  starting  the  slave,
       stopping the slave, or just observing.

</pre><h4><b>OPTIONS</b></h4><pre>
       This  tool  accepts additional command-line arguments.  Refer to the "SYNOPSIS" and usage information for
       details.

       --ask-pass
           Prompt for a password when connecting to MySQL.

       --charset
           short form: -A; type: string

           Default character set.  If the value is utf8, sets Perl's binmode  on  STDOUT  to  utf8,  passes  the
           mysql_enable_utf8 option to DBD::mysql, and runs SET NAMES UTF8 after connecting to MySQL.  Any other
           value sets binmode on STDOUT without the utf8 layer, and runs SET NAMES after connecting to MySQL.

       --config
           type: Array

           Read  this  comma-separated  list of config files; if specified, this must be the first option on the
           command line.

       --[no]continue
           default: yes

           Continue replication normally on exit.  After exiting, restart the slave's SQL thread with  no  UNTIL
           condition,  so it will run as usual and catch up to the master.  This is enabled by default and works
           even if you terminate "pt-slave-delay" with Control-C.

       --daemonize
           Fork to the background and detach from the shell.  POSIX operating systems only.

       --database
           short form: -D; type: string

           The database to use for the connection.

       --defaults-file
           short form: -F; type: string

           Only read mysql options from the given file.  You must give an absolute pathname.

       --delay
           type: time; default: 1h

           How far the slave should lag its master.

       --help
           Show help and exit.

       --host
           short form: -h; type: string

           Connect to host.

       --interval
           type: time; default: 1m

           How frequently "pt-slave-delay" should check whether the slave needs to be started or stopped.

       --log
           type: string

           Print all output to this file when daemonized.

       --password
           short form: -p; type: string

           Password to use when connecting.  If password contains commas they must be escaped with a  backslash:
           "exam\,ple"

       --pid
           type: string

           Create  the  given  PID  file.   The  tool  won't start if the PID file already exists and the PID it
           contains is different than the current PID.  However, if the PID file exists and the PID it  contains
           is  no  longer  running,  the tool will overwrite the PID file with the current PID.  The PID file is
           removed automatically when the tool exits.

       --port
           short form: -P; type: int

           Port number to use for connection.

       --quiet
           short form: -q

           Don't print informational messages about operation.  See OUTPUT for details.

       --run-time
           type: time

           How long "pt-slave-delay" should run before exiting.  The default is to run forever.

       --set-vars
           type: Array

           Set the MySQL variables in this comma-separated list of "variable=value" pairs.

           By default, the tool sets:

              wait_timeout=10000

           Variables specified on the command line override these defaults.  For example, specifying "--set-vars
           wait_timeout=500" overrides the defaultvalue of 10000.

           The tool prints a warning and continues if a variable cannot be set.

       --socket
           short form: -S; type: string

           Socket file to use for connection.

       --use-master
           Get binlog positions from master, not slave.  Don't trust the binlog positions in the  slave's  relay
           log.   Connect  to  the  master and get binlog positions instead.  If you specify this option without
           giving a MASTER_DSN on the command line, "pt-slave-delay" examines the slave's SHOW SLAVE  STATUS  to
           determine the hostname and port for connecting to the master.

           "pt-slave-delay"  uses  only  the  MASTER_HOST  and MASTER_PORT values from SHOW SLAVE STATUS for the
           master connection.  It does not use the MASTER_USER value.   If  you  want  to  specify  a  different
           username  for  the  master  than  the  one  you  use  to connect to the slave, you should specify the
           MASTER_DSN option explicitly on the command line.

       --user
           short form: -u; type: string

           User for login if not current user.

       --version
           Show version and exit.

       --[no]version-check
           default: yes

           Check for the latest version of Percona Toolkit, MySQL, and other programs.

           This is a standard "check for updates automatically" feature, with two additional  features.   First,
           the  tool  checks  its own version and also the versions of the following software: operating system,
           Percona Monitoring and Management (PMM), MySQL, Perl, MySQL driver for Perl (DBD::mysql), and Percona
           Toolkit. Second, it checks for and warns about versions  with  known  problems.  For  example,  MySQL
           5.5.25 had a critical bug and was re-released as 5.5.25a.

           A  secure connection to Percona’s Version Check database server is done to perform these checks. Each
           request is logged by the server, including software version numbers and  unique  ID  of  the  checked
           system.  The  ID  is  generated  by the Percona Toolkit installation script or when the Version Check
           database call is done for the first time.

           Any updates or known problems are printed to STDOUT before the tool's normal  output.   This  feature
           should never interfere with the normal operation of the tool.

           For more information, visit &lt;https://www.percona.com/doc/percona-toolkit/LATEST/version-check.html&gt;.

</pre><h4><b>DSN</b> <b>OPTIONS</b></h4><pre>
       These  DSN  options are used to create a DSN.  Each option is given like "option=value".  The options are
       case-sensitive, so P and p are not the same option.  There cannot be whitespace before or after  the  "="
       and  if  the  value  contains  whitespace  it  must be quoted.  DSN options are comma-separated.  See the
       percona-toolkit manpage for full details.

       •   A

           dsn: charset; copy: yes

           Default character set.

       •   D

           dsn: database; copy: yes

           Default database.

       •   F

           dsn: mysql_read_default_file; copy: yes

           Only read default options from the given file

       •   h

           dsn: host; copy: yes

           Connect to host.

       •   p

           dsn: password; copy: yes

           Password to use when connecting.  If password contains commas they must be escaped with a  backslash:
           "exam\,ple"

       •   P

           dsn: port; copy: yes

           Port number to use for connection.

       •   S

           dsn: mysql_socket; copy: yes

           Socket file to use for connection.

       •   u

           dsn: user; copy: yes

           User for login if not current user.

</pre><h4><b>ENVIRONMENT</b></h4><pre>
       The  environment  variable "PTDEBUG" enables verbose debugging output to STDERR.  To enable debugging and
       capture all output to a file, run the tool like:

          PTDEBUG=1 pt-slave-delay ... &gt; FILE 2&gt;&amp;1

       Be careful: debugging output is voluminous and can generate several megabytes of output.

</pre><h4><b>SYSTEM</b> <b>REQUIREMENTS</b></h4><pre>
       You need Perl, DBI, DBD::mysql, and some core packages that ought to be installed in any  reasonably  new
       version of Perl.

</pre><h4><b>BUGS</b></h4><pre>
       For a list of known bugs, see &lt;<a href="http://www.percona.com/bugs/pt-slave-delay">http://www.percona.com/bugs/pt-slave-delay</a>&gt;.

       Please  report bugs at &lt;https://jira.percona.com/projects/PT&gt;.  Include the following information in your
       bug report:

       •   Complete command-line used to run the tool

       •   Tool "--version"

       •   MySQL version of all servers involved

       •   Output from the tool including STDERR

       •   Input files (log/dump/config files, etc.)

       If possible, include debugging output by running the tool with "PTDEBUG"; see "ENVIRONMENT".

</pre><h4><b>DOWNLOADING</b></h4><pre>
       Visit &lt;<a href="http://www.percona.com/software/percona-toolkit/">http://www.percona.com/software/percona-toolkit/</a>&gt;  to  download  the  latest  release  of  Percona
       Toolkit.  Or, get the latest release from the command line:

          wget percona.com/get/percona-toolkit.tar.gz

          wget percona.com/get/percona-toolkit.rpm

          wget percona.com/get/percona-toolkit.deb

       You can also get individual tools from the latest release:

          wget percona.com/get/TOOL

       Replace "TOOL" with the name of any tool.

</pre><h4><b>AUTHORS</b></h4><pre>
       Sergey Zhuravlev and Baron Schwartz

</pre><h4><b>ABOUT</b> <b>PERCONA</b> <b>TOOLKIT</b></h4><pre>
       This  tool is part of Percona Toolkit, a collection of advanced command-line tools for MySQL developed by
       Percona.  Percona Toolkit was forked from two  projects  in  June,  2011:  Maatkit  and  Aspersa.   Those
       projects  were  created  by  Baron  Schwartz  and  primarily  developed by him and Daniel Nichter.  Visit
       &lt;<a href="http://www.percona.com/software/">http://www.percona.com/software/</a>&gt; to learn about other free, open-source software from Percona.

</pre><h4><b>COPYRIGHT,</b> <b>LICENSE,</b> <b>AND</b> <b>WARRANTY</b></h4><pre>
       This program is copyright 2011-2018 Percona LLC and/or its  affiliates,  2007-2011  Sergey  Zhuravle  and
       Baron Schwartz.

       THIS  PROGRAM  IS  PROVIDED  "AS  IS"  AND  WITHOUT ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, WITHOUT
       LIMITATION, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.

       This program is free software; you can redistribute it and/or modify  it  under  the  terms  of  the  GNU
       General  Public  License  as  published  by the Free Software Foundation, version 2; OR the Perl Artistic
       License.  On UNIX and similar systems, you can issue `man perlgpl' or `man perlartistic'  to  read  these
       licenses.

       You  should have received a copy of the GNU General Public License along with this program; if not, write
       to the Free Software Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA.

</pre><h4><b>VERSION</b></h4><pre>
       pt-slave-delay 3.2.1

</pre><h4><b>POD</b> <b>ERRORS</b></h4><pre>
       Hey! <b>The</b> <b>above</b> <b>document</b> <b>had</b> <b>some</b> <b>coding</b> <b>errors,</b> <b>which</b> <b>are</b> <b>explained</b> <b>below:</b>

       Around line 4825:
           Non-ASCII character seen before =encoding in 'Percona’s'. Assuming UTF-8

perl v5.30.3                                       2020-08-30                                 <u><a href="../man1p/PT-SLAVE-DELAY.1p.html">PT-SLAVE-DELAY</a></u>(1p)
</pre>
 </div>
</div></section>
</div>
</body>
</html>