<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>condor_adstash - HTCondor Manual</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/condor">condor_23.6.2+dfsg-2build1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       condor_adstash - HTCondor Manual

       Gather schedd and/or startd job history ClassAds and push them via a search engine or file interface.

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>condor_adstash</b> [<b>--help</b> ]

       <b>condor_adstash</b> [<b>--process_name</b> <u>NAME</u>] [<b>--standalone</b> ] [<b>--sample_interval</b> <u>SECONDS</u>] [<b>--checkpoint_file</b> <u>PATH</u>]
       [<b>--log_file</b>  <u>PATH</u>]  [<b>--log_level</b>  <u>LEVEL</u>]  [<b>--threads</b> <u>THREADS</u>] [<b>--interface</b> <u>{null,elasticsearch,jsonfile}</u>]
       [<b>--collectors</b> <u>COLLECTORS</u>] [<b>--schedds</b> <u>SCHEDDS</u>] [<b>--startds</b> <u>STARTDS</u>] [<b>--schedd_history</b> ] [<b>--startd_history</b> ]
       [<b>--ad_file</b>    <u>PATH</u>]     [<b>--schedd_history_max_ads</b>     <u>NUM_ADS</u>]     [<b>--startd_history_max_ads</b>     <u>NUM_ADS</u>]
       [<b>--schedd_history_timeout</b>    <u>SECONDS</u>]    [<b>--startd_history_timeout</b>   <u>SECONDS</u>]   [<b>--se_host</b>   <u>HOST[:PORT]</u>]
       [<b>--se_url_prefix</b>   <u>PREFIX</u>]   [<b>--se_username</b>   <u>USERNAME</u>]   [<b>--se_use_https</b>   ]   [<b>--se_timeout</b>    SECONDS]
       [<b>--se_bunch_size</b>  <u>NUM_DOCS</u>]  [<b>--es_index_name</b>  <u>INDEX_NAME</u>]  [<b>--se_no_log_mappings</b>]  [<b>--se_ca_certs</b>  <u>PATH</u>]
       [<b>--json_dir</b> <u>PATH</u>]

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>condor_adstash</b> is a tool that assists in monitoring usage  by  gathering  job  ClassAds  (typically  from
       <u>condor_schedd</u>  and/or <u>condor_startd</u> history queries) and pushing the ClassAds as documents to some target
       (typically Elasticsearch).

       Unless run in <b>--standalone</b> mode, <u>condor_adstash</u> expects to be invoked as a  daemon  by  a  <u>condor_master</u>,
       i.e.  <u>condor_adstash</u>  should be invoked in standalone mode when run on the command-line.  Whether invoked
       by <u>condor_master</u> or run standalone, <u>condor_adstash</u> gets its configuration, in increasing  priority,  from
       the  HTCondor  configuration  macros  beginning with <b>ADSTASH_</b> (when <b>--process_name</b> is not provided), then
       environment variables, and finally command-line options.

       <u>condor_adstash</u> must be able to write its <b>--checkpoint_file</b> to a persistent location so that duplicate job
       ClassAds are not fetched from the daemons' histories in consecutive polls.

       A named Elasticsearch index will be created if it doesn't exist,  and  may  be  modified  if  new  fields
       (corresponding  to  ClassAd  attribute  names)  need  to  be added.  It is up to the administrator of the
       Elasticsearch instance to install rollover policies (e.g. ILM) on the named index and/or to  set  up  the
       index as an alias.

</pre><h4><b>OPTIONS</b></h4><pre>
          <b>-h</b>, <b>--help</b>
                 Display the help message and exit.

          <b>--process_name</b> <u>PREFIX</u>
                 Give  <u>condor_adstash</u>  a  different  name  for looking up HTCondor configuration and environment
                 variable values (see examples).

          <b>--standalone</b>
                 Run condor_adstash in standalone mode (runs once, does not attempt to contact <u>condor_master</u>)

          <b>--sample_interval</b> <u>SECONDS</u>
                 Number of seconds between polling the list(s) of daemons (ignored in standalone mode)

          <b>--checkpoint_file</b> <u>PATH</u>
                 Location of checkpoint file (will be created if missing)

          <b>--log_file</b> <u>PATH</u>
                 Location of log file

          <b>--log_level</b> <u>LEVEL</u>
                 Log level (uses Python logging library levels: CRITICAL/ERROR/WARNING/INFO/DEBUG)

          <b>--threads</b> <u>THREADS</u>
                 Number of parallel threads to use when polling for job ClassAds and when pushing  documents  to
                 Elasticsearch

          <b>--interface</b> <u>{null,elasticsearch,opensearch,jsonfile}</u>
                 Push ads via the chosen interface

</pre><h4><b>CLASSAD</b> <b>SOURCE</b> <b>OPTIONS</b></h4><pre>
          <b>--schedd_history</b>
                 Poll and push <u>condor_schedd</u> job histories

          <b>--startd_history</b>
                 Poll and push <u>condor_startd</u> job histories

          <b>--ad_file</b> <u>PATH</u>
                 Load  Job  ClassAds  from  a  file  instead  of  querying daemons (Ignores <u>--schedd_history</u> and
                 <u>--startd_history</u>.)

</pre><h4><b>OPTIONS</b> <b>FOR</b> <b>HTCONDOR</b> <b>DAEMON</b> <b>(SCHEDD,</b> <b>STARTD,</b> <b>ETC.)</b> <b>HISTORY</b> <b>SOURCES</b></h4><pre>
          <b>--collectors</b> <u>COLLECTORS</u>
                 Comma-separated list of <u>condor_collector</u> addresses  to  contact  to  locate  <u>condor_schedd</u>  and
                 <u>condor_startd</u> daemons

          <b>--schedds</b> <u>SCHEDDS</u>
                 Comma-separated list of <u>condor_schedd</u> names to poll job histories from

          <b>--startds</b> <u>STARTDS</u>
                 Comma-separated list of <u>condor_startd</u> machines to poll job histories from

          <b>--schedd_history_max_ads</b> <u>NUM_ADS</u>
                 Abort after reading NUM_ADS from a <u>condor_schedd</u>

          <b>--startd_history_max_ads</b> <u>NUM_ADS</u>
                 Abort after reading NUM_ADS from a <u>condor_startd</u>

          <b>--schedd_history_timeout</b> <u>SECONDS</u>
                 Abort if reading from a <u>condor_schedd</u> takes more than this many seconds

          <b>--startd_history_timeout</b> <u>SECONDS</u>
                 Abort if reading from a <u>condor_startd</u> takes more than this many seconds

</pre><h4><b>SEARCH</b> <b>ENGINE</b> <b>(ELASTICSEARCH,</b> <b>OPENSEARCH,</b> <b>ETC.)</b> <b>INTERFACE</b> <b>OPTIONS</b></h4><pre>
          <b>--se_host</b> <u>HOST[:PORT]</u>
                 Search engine host:port

          <b>--se_url_prefix</b> <u>PREFIX</u>
                 Search engine URL prefix

          <b>--se_username</b> <u>USERNAME</u>
                 Search engine username

          <b>--se_use_https</b>
                 Use HTTPS when connecting to search engine

          <b>--se_timeout</b> <u>SECONDS</u>
                 Max time to wait for search engine queries

          <b>--se_bunch_size</b> <u>NUM_DOCS</u>
                 Group ads in bunches of this size to send to search engine

          <b>--se_index_name</b> <u>INDEX_NAME</u>
                 Push ads to this search engine index or alias

          <b>--se_no_log_mappings</b>
                 Don't write a JSON file with mappings to the log directory

          <b>--se_ca_certs</b> <u>PATH</u>
                 Path to root certificate authority file (will use certifi's CA if not set)

</pre><h4><b>JSON</b> <b>FILE</b> <b>INTERFACE</b> <b>OPTIONS</b></h4><pre>
          <b>--json_dir</b> <u>PATH</u>
                 Directory to store JSON files, which are named by timestamp

</pre><h4><b>EXAMPLES</b></h4><pre>
       Running  <u>condor_adstash</u>  in standalone mode on the command-line will result in <u>condor_adstash</u> reading its
       configuration from the current HTCondor configuration:

          $ condor_adstash --standalone

       By default, <u>condor_adstash</u> looks for HTCondor  configuration  variables  with  names  are  prefixed  with
       <b>ADSTASH_</b>, e.g. <b>ADSTASH_READ_SCHEDDS</b> <b>=</b> <b>*</b>.  These values can be overridden on the command-line:

          $ condor_adstash --standalone --schedds=myschedd.localdomain

       <u>condor_adstash</u> configuration variables can be also be named using custom prefixes, with the prefix passed
       in using <b>-\-process_name=PREFIX</b>.  For example, if the HTCondor configuration contained <b>FOO_SCHEDD_HISTORY</b>
       <b>=</b>  <b>False</b>  and  <b>FOO_STARTD_HISTORY</b>  <b>=</b>  <b>True</b>,  <u>condor_adstash</u>  can  be  invoked  to  read  these instead of
       <b>ADSTASH_SCHEDD_HISTORY</b> and <b>ADSTASH_STARTD_HISTORY</b>:

          $ condor_adstash --standalone --process_name=FOO

       Providing a <b>PREFIX</b> to <b>--process_name</b> that does not match any HTCondor configuration variables will  cause
       <u>condor_adstash</u> to fallback to a default set of configuration values, which may be useful in debugging.

       The  configuration  values  that  <u>condor_adstash</u>  reads  from  the  current HTCondor configuration can be
       previewed by printing the help message.  The values will  be  listed  as  the  default  values  for  each
       command-line option:

          $ condor_adstash --help
          $ condor_adstash --process_name=FOO --help

</pre><h4><b>AUTHOR</b></h4><pre>
       HTCondor Team

</pre><h4><b>COPYRIGHT</b></h4><pre>
       1990-2024,  Center  for High Throughput Computing, Computer Sciences Department, University of Wisconsin-
       Madison, Madison, WI, US. Licensed under the Apache License, Version 2.0.

                                                  Jan 04, 2025                                 <u><a href="../man1/CONDOR_ADSTASH.1.html">CONDOR_ADSTASH</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>