<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>tlswrapper-smtp - TLS encryption wrapper - smtp helper</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/tlswrapper">tlswrapper_0~20250201-1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       tlswrapper-smtp - TLS encryption wrapper - smtp helper

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>tlswrapper-smtp</b> <b>[</b> <b>options</b> <b>]</b> <u>prog</u>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The  <b>tlswrapper-smtp</b> adds STARTTLS support to old inetd-style SMTP servers which doesn't support STARTTLS
       naturally.  Is executed as follows:

       Internet &lt;--&gt; systemd.socket/inetd/tcpserver/... &lt;--&gt; <b>tlswrapper</b> &lt;--&gt; <b>tlswrapper-smtp</b>  &lt;--&gt; smtpprogram

</pre><h4><b>OPTIONS</b></h4><pre>
       <b>-q</b>     Quiet mode. No error messages.

       <b>-v</b>     Enable verbose mode. Multiple -v options increase the verbosity. The maximum is 3.

       <b>-t</b> <u>seconds</u>
              Set the SMTP session timeout to seconds <u>seconds</u>. (default 600).

       <b>-T</b> <u>seconds</u>
              Set the connect/read/write timeout to seconds <u>seconds</u>. (default 15).

       <b>-u</b> <u>user</u>
              Run program <u>prog</u> under a specified <u>user</u>'s uid and gid

       <b>-g</b> <u>host:port</u>
              Enable greylist support (postgrey protocol) and use server running on <u>host:port</u> .

       <b>-c</b>     Handle communication  to  greylist  server  in  fail-closed  mode.  If  a  greylist  lookup  fails
              temporarily, <b>tlswrapper-smtp</b> exits with status 111.

       <b>-C</b>     Handle communication to greylist server in fail-open mode. If a greylist lookup fails temporarily,
              assume that the address is not greylisted (default).

       <b>-J</b> <u>jaildir</u>
              Chroot into a specified <u>jaildir</u> (default: /var/lib/tlswraper/empty).

       <b>-j</b> <u>jailuser</u>
              Run under a specified <u>jailuser</u>'s uid and gid. If unset run under random uid and gid.

       <u>prog</u>   program

</pre><h4><b>SECURITY</b></h4><pre>
       <b>JAIL</b> <b>-</b> <b>Privilege</b> <b>separation,</b> <b>filesystem</b> <b>isolation,</b> <b>limits</b>

       The <b>tlswrapper-smtp</b> similarly to <b>tlswrapper</b> processes runs under dedicated non-zero uid to prohibit kill,
       ptrace,  etc.   Is  chrooted  into  an  empty,  unwritable directory to prohibit filesystem access.  Sets
       ulimits to prohibit new files, sockets, etc. Sets ulimits to prohibit forks.

</pre><h4><b>EXAMPLES</b></h4><pre>
       run QMAIL qmail-smtpd on port 25 with STARTTLS enabled (without patching QMAIL):
           exec softlimit -m 64000000 -f 100000000 \
           tcpserver -HRDl0 0 25 \
           tlswrapper -v -n -f /etc/ssl/cert.pem \
           tlswrapper-smtp -v -u qmaild \
           qmail-smtpd

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man1/tlswrapper.1.html">tlswrapper</a></b>(1)

                                                                                              <u><a href="../man1/tlswrapper-smtp.1.html">tlswrapper-smtp</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>