<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>fs_getserverprefs - Displays preference ranks for file servers or VL servers</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/openafs-client">openafs-client_1.8.13.2-1ubuntu1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       fs_getserverprefs - Displays preference ranks for file servers or VL servers

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>fs</b> <b>getserverprefs</b> [<b>-file</b> &lt;<u>output</u> <u>to</u> <u>named</u> <u>file</u>&gt;]
           [<b>-numeric</b>] [<b>-vlservers</b>] [<b>-help</b>]

       <b>fs</b> <b>gets</b> [<b>-f</b> &lt;<u>output</u> <u>to</u> <u>named</u> <u>file</u>&gt;] [<b>-n</b>] [<b>-v</b>] [<b>-h</b>]

       <b>fs</b> <b>gp</b> [<b>-f</b> &lt;<u>output</u> <u>to</u> <u>named</u> <u>file</u>&gt;] [<b>-n</b>] [<b>-v</b>] [<b>-h</b>]

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The <b>fs</b> <b>getserverprefs</b> command displays preference ranks for file server machine interfaces (file server
       machines run the <b>fs</b> process) or, if the <b>-vlserver</b> flag is provided, for Volume Location (VL) Server
       machines (which run the <b>vlserver</b> process). For file server machines, the Cache Manager tracks up to 15
       interfaces per machine and assigns a separate rank to each interface. The ranks indicate the order in
       which the local Cache Manager attempts to contact the interfaces of machines that are housing a volume
       when it needs to fetch data from the volume. For VL Server machines, the ranks indicate the order in
       which the Cache Manager attempts to contact a cell's VL Servers when requesting VLDB information. For
       both types of rank, lower integer values are more preferred.

       The Cache Manager stores ranks in kernel memory. Once set, a rank persists until the machine reboots, or
       until the <b>fs</b> <b>setserverprefs</b> command is used to change it. <b><a href="../man1/fs_setserverprefs.1.html">fs_setserverprefs</a></b>(1) explains how the Cache
       Manager sets default ranks, and how to use that command to change the default values.

       Default VL Server ranks range from 10,000 to 10,126. The Cache Manager assigns ranks to every machine
       listed in its copy of the <u>/etc/openafs/CellServDB</u> file or found via DNS AFSDB or SRV records for the cell
       when it initializes. When the Cache Manager needs to fetch VLDB information from a cell, it compares the
       ranks for the VL Server machines belonging to that cell, and attempts to contact the VL Server with the
       lowest integer rank. If the Cache Manager cannot reach the VL Server (because of server process, machine
       or network outage), it tries to contact the VL Server with the next lowest integer rank, and so on. If
       all of a cell's VL Server machines are unavailable, the Cache Manager cannot fetch data from the cell.

       Default file server ranks range from 5,000 to 40,000, excluding the range used for VL Servers (10,000 to
       10,126); the maximum possible rank is 65,534. When the Cache Manager needs to fetch data from a volume,
       it compares the ranks for the interfaces of machines that house the volume, and attempts to contact the
       interface that has the lowest integer rank. If it cannot reach the <b>fileserver</b> process via that interface
       (because of server process, machine or network outage), it tries to contact the interface with the next
       lowest integer rank, and so on. If it cannot reach any of the interfaces for machines that house the
       volume, it cannot fetch data from the volume.

       For both file server machines and VL Server machines, it is possible for a machine or interface in a
       foreign cell to have the same rank as a machine or interface in the local cell. This does not present a
       problem, because the Cache Manager only ever compares ranks for machines belonging to one cell at a time.

</pre><h4><b>OPTIONS</b></h4><pre>
       <b>-file</b> &lt;<u>output</u> <u>file</u>&gt;
           Specifies  the  full pathname of a file to which to write the preference ranks. If the specified file
           already exists, the command overwrites its contents. If the pathname is invalid, the  command  fails.
           If this argument is not provided, the preference ranks appear on the standard output stream.

       <b>-numeric</b>
           Displays  the IP addresses of file server machine interfaces or VL Server machines, rather than their
           hostnames. If this argument is not  provided,  the  <b>fs</b>  command  interpreter  has  the  IP  addresses
           translated to hostnames such as "fs1.example.com".

       <b>-vlservers</b>
           Displays preference ranks for VL Server machines rather than file server machine interfaces.

       <b>-help</b>
           Prints the online help for this command. All other valid options are ignored.

</pre><h4><b>OUTPUT</b></h4><pre>
       The  output  consists  of  a  separate  line for each file server machine interface or VL Server machine,
       pairing the machine's hostname or IP address with its rank. The Cache Manager stores IP addresses in  its
       kernel  list  of  ranks,  but  the  command  by  default  identifies interfaces by hostname, by calling a
       translation routine that refers to either the cell's name service (such as the Domain Name Server) or the
       local host table. If an IP address appears in the output, it is because the translation  attempt  failed.
       To bypass the translation step and display IP addresses rather than hostnames, include the <b>-numeric</b> flag.
       This can significantly speed the production of output.

       By  default, the command writes to the standard output stream. Use the <b>-file</b> argument to write the output
       to a file instead.

</pre><h4><b>EXAMPLES</b></h4><pre>
       The following example displays the local Cache Manager's preference ranks for file server  machines.  The
       local  machine  belongs  to  the AFS cell named <b>example.com</b>, and in this example the ranks of file server
       machines in its local cell are lower than the ranks of  file  server  machines  from  the  foreign  cell,
       "example.net". It is not possible to translate the IP addresses of two machines on the 138.255 network.

          % fs getserverprefs
          fs2.example.com       20007
          fs3.example.com       30002
          fs1.example.com       20011
          fs4.example.com       30010
          server1.example.net   40002
          138.255.33.34         40000
          server6.example.net   40012
          138.255.33.37         40005

       The following example shows hows the output displays IP addresses when the <b>-numeric</b> flag is included, and
       illustrates  how  network  proximity  determines  default  ranks  (as  described on the <b>fs</b> <b>setserverprefs</b>
       reference page). The local machine has IP address 192.12.107.210, and the two file server machines on its
       subnetwork have ranks of 20,007 and 20,011. The two file server machines on a different subnetwork of the
       local machine's network have higher ranks, 30,002 and 30,010, whereas the ranks of the remaining machines
       range from 40,000 to 40,012 because they are in a completely different network.

          % fs getserverprefs -numeric
          192.12.107.214          20007
          192.12.105.99           30002
          192.12.107.212          20011
          192.12.105.100          30010
          138.255.33.41           40002
          138.255.33.34           40000
          138.255.33.36           40012
          138.255.33.37           40005

       The example shows how the <b>-vlservers</b> flag displays preference ranks for VL Server machines:

          % fs getserverprefs -vlservers
          fs2.example.com        10052
          fs3.example.com        10113
          fs1.example.com        10005

</pre><h4><b>PRIVILEGE</b> <b>REQUIRED</b></h4><pre>
       None

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man1/fs_setserverprefs.1.html">fs_setserverprefs</a></b>(1)

</pre><h4><b>COPYRIGHT</b></h4><pre>
       IBM Corporation 2000. &lt;<a href="http://www.ibm.com/">http://www.ibm.com/</a>&gt; All Rights Reserved.

       This documentation is covered by the IBM Public License Version 1.0.  It was converted from HTML  to  POD
       by  software  written  by  Chas  Williams  and Russ Allbery, based on work by Alf Wachsmann and Elizabeth
       Cassell.

OpenAFS                                            2025-03-21                               <u><a href="../man1/FS_GETSERVERPREFS.1.html">FS_GETSERVERPREFS</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>