<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>pullnews - Pull news from multiple news servers and feed it to another</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/inn2">inn2_2.7.3~20250201-1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       pullnews - Pull news from multiple news servers and feed it to another

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>pullnews</b> [<b>-BhnOqRx</b>] [<b>-a</b> <u>hashfeed</u>] [<b>-b</b> <u>fraction</u>] [<b>-c</b> <u>config</u>] [<b>-C</b> <u>width</u>] [<b>-d</b> <u>level</u>] [<b>-f</b> <u>fraction</u>] [<b>-F</b>
       <u>fakehop</u>] [<b>-g</b> <u>groups</u>] [<b>-G</b> <u>newsgroups</u>] [<b>-H</b> <u>headers</u>] [<b>-k</b> <u>checkpt</u>] [<b>-l</b> <u>logfile</u>] [<b>-L</b> <u>size</u>] [<b>-m</b> <u>header_pats</u>]
       [<b>-M</b> <u>num</u>] [<b>-N</b> <u>timeout</u>] [<b>-p</b> <u>port</u>] [<b>-P</b> <u>hop_limit</u>] [<b>-Q</b> <u>level</u>] [<b>-r</b> <u>file</u>] [<b>-s</b> <u>to-server</u>[:<u>port</u>][_<u>tlsmode</u>]] [<b>-S</b>
       <u>max-run</u>] [<b>-t</b> <u>retries</u>] [<b>-T</b> <u>connect-pause</u>] [<b>-w</b> <u>num</u>] [<b>-z</b> <u>article-pause</u>] [<b>-Z</b> <u>group-pause</u>] [<u>from-server</u> ...]

</pre><h4><b>REQUIREMENTS</b></h4><pre>
       The "Net::NNTP" module must be installed.  This module is available as part of the libnet distribution
       and comes with recent versions of Perl.  For older versions of Perl, you can download it from
       &lt;<a href="http://www.cpan.org/">http://www.cpan.org/</a>&gt;.

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>pullnews</b> reads a config file named <u>pullnews.marks</u>, and connects to the upstream servers given there as a
       reader client.  This file is looked for in <u>pathdb</u> when <b>pullnews</b> is run as the user set in <u>runasuser</u> in
       <u>inn.conf</u> (which is by default the "news" user); otherwise, this file is looked for in the running user's
       home directory.

       By default, <b>pullnews</b> connects to all servers listed in the configuration file, but you can limit <b>pullnews</b>
       to specific servers by listing them on the command line: a whitespace-separated list of server names can
       be specified, like <u>from-server</u> for one of them.  For each server it connects to, it pulls over articles
       and feeds them to the destination server via the IHAVE or POST commands.  This means that the system
       <b>pullnews</b> is run on must have feeding access to the destination news server.

       <b>pullnews</b> is designed for very small sites that do not want to bother setting up traditional peering and
       is not meant for handling large feeds.

       In case you have running peers and don't want to propagate them the articles you are pulling from
       upstream servers, you should add a fake hop with the <b>-F</b> flag to all the pulled articles, and add that
       very fake hop in the exclusion sub-field of all the sites configured in your <u>newsfeeds</u> file which should
       not receive these articles.  For example, using "pullnews -F myserverimported", change
       "sitename:*:Tm:innfeed!"  to "sitename/myserverimported:*:Tm:innfeed!" for every <u>sitename</u> in <u>newsfeeds</u>
       you don't want to feed the pulled articles to (like your outgoing peers and a possible "inpaths!" entry).
       Entries like "ME", "controlchan!", "innfeed!" or "nocem!" do not need that exclusion.

</pre><h4><b>OPTIONS</b></h4><pre>
       <b>-a</b> <u>hashfeed</u>
           This option is a deterministic way to control the flow of articles and to split a feed.  The <u>hashfeed</u>
           parameter  must  be  in  the  form "value/mod" or "start-end/mod".  The Message-ID of each article is
           hashed using MD5, which results in a 128-bit hash.  The lowest 32 bits are then taken by  default  as
           the  hashfeed  value  (which  is  an  integer).   If the hashfeed value modulus "mod" plus one equals
           "value" or is between "start" and "end", <b>pullnews</b> will feed the article.  All these numbers  must  be
           integers.

           For instance:

               pullnews -a 1/2      Feeds about 50% of all articles.
               pullnews -a 2/2      Feeds the other 50% of all articles.

           Another example:

               pullnews -a 1-3/10   Feeds about 30% of all articles.
               pullnews -a 4-5/10   Feeds about 20% of all articles.
               pullnews -a 6-10/10  Feeds about 50% of all articles.

           You  can  use  an  extended syntax of the form "value/mod:offset" or "start-end/mod:offset" (using an
           underscore "_" instead of a colon ":" is also recognized).  As MD5 generates a 128-bit return  value,
           it  is  possible  to  specify from which byte-offset the 32-bit integer used by hashfeed starts.  The
           default value for "offset" is ":0" and thirteen overlapping values from ":0" to ":12"  can  be  used.
           Only up to four totally independent values exist: ":0", ":4", ":8" and ":12".

           Therefore,  it  allows  generating a second level of deterministic distribution.  Indeed, if <b>pullnews</b>
           feeds "1/2", it can go on splitting  thanks  to  "1-3/9:4"  for  instance.   Up  to  four  levels  of
           deterministic distribution can be used.

           The algorithm is compatible with the one used by Diablo 5.1 and up.

       <b>-b</b> <u>fraction</u>
           Backtrack  on  server numbering reset.  Specify the proportion ("0.0" to "1.0") of a group's articles
           to pull when the server's article number is less than our high for  that  group.   When  <u>fraction</u>  is
           "1.0", pull all the articles on a renumbered server.  The default is to do nothing.

       <b>-B</b>  Feed  is  header-only, that is to say <b>pullnews</b> only feeds the headers of the articles, plus one blank
           line.  It adds the Bytes header field if the article does not already have one, and  keeps  the  body
           only if the article is a control article.

       <b>-c</b> <u>config</u>
           Normally,  the  config  file  is  stored in <u>pullnews.marks</u> in <u>pathdb</u> when <b>pullnews</b> is run as the news
           user, or otherwise in the running user's home directory.  If <b>-c</b> is given, <u>config</u> will be used as  the
           config  file  instead.   This  is  useful if you're running <b>pullnews</b> as a system user on an automated
           basis out of cron or as an individual user, rather than the news user.

           See "CONFIG FILE" below for the format of this file.

       <b>-C</b> <u>width</u>
           Use <u>width</u> characters per line for the progress table.  The default value is "50".

       <b>-d</b> <u>level</u>
           Set the debugging level to the integer <u>level</u> (up to "4"); more debugging output  will  be  logged  as
           this increases.  The default value is "0".

       <b>-f</b> <u>fraction</u>
           This changes the proportion of articles to get from each group to <u>fraction</u> and should be in the range
           "0.0" to "1.0" ("1.0" being the default).

       <b>-F</b> <u>fakehop</u>
           Prepend <u>fakehop</u> as a host to the Path header field body of articles fed.

       <b>-g</b> <u>groups</u>
           Specify  a  collection  of  groups  to get.  <u>groups</u> is a list of newsgroups separated by commas (only
           commas, no spaces).  Each group must be defined in the config file, and only the  remote  hosts  that
           carry  those  groups  will  be  contacted.   Note that this is a simple list of groups, not a wildmat
           expression, and wildcards are not supported.

       <b>-G</b> <u>newsgroups</u>
           Add the comma-separated list of groups <u>newsgroups</u> to each server in the configuration file (see  also
           <b>-g</b> and <b>-w</b>).

       <b>-h</b>  Print a usage message and exit.

       <b>-H</b> <u>headers</u>
           Remove these named header fields (colon-separated list) from fed articles.

       <b>-k</b> <u>checkpt</u>
           Checkpoint  (save)  the config file every <u>checkpt</u> articles (default is "0", that is to say at the end
           of the session).

       <b>-l</b> <u>logfile</u>
           Log progress/stats to <u>logfile</u> (default is "stdout").

       <b>-L</b> <u>size</u>
           Specify the largest wanted article size in bytes.  The default is to download all articles,  whatever
           their  size.   When this option is used, <b>pullnews</b> will first retrieve overview data (if available) of
           each newsgroup to process so as to obtain articles sizes, before deciding which articles to  actually
           download.

       <b>-m</b> <u>header_pats</u>
           Feed  an  article  based  on  header  field  body  matching.  The argument is a number of whitespace-
           separated tuples (each tuple being a colon-separated header field name and regular expression).   For
           instance:

               -m "Hdr1:regexp1 !Hdr2:regexp2 #Hdr3:regexp3 !#Hdr4:regexp4"

           specifies  that the article will be passed only if the "Hdr1" header field body matches "regexp1" and
           the "Hdr2" header field body does not match "regexp2".  Besides, if  the  "Hdr3"  header  field  body
           matches  "regexp3",  that  header  is  removed;  and  if  the "Hdr4" header field body does not match
           "regexp4", that header is removed.

       <b>-M</b> <u>num</u>
           Specify the maximum number of articles (per group) to process.  The default is  to  process  all  new
           articles.  See also <b>-f</b>.

       <b>-n</b>  Do  nothing  but  read  articles -- does not feed articles downstream, writes no <b>rnews</b> file, does not
           update the config file.

       <b>-N</b> <u>timeout</u>
           Specify the timeout length, as <u>timeout</u> seconds, when establishing an NNTP connection.

       <b>-O</b>  Use an optimized mode: <b>pullnews</b> checks whether the article already exists on the  downstream  server,
           before downloading it.  It may help for huge articles or a slow link to upstream hosts.

       <b>-p</b> <u>port</u>
           Connect  to  the destination news server on a port other than the default of "119".  This option does
           not change the port used to connect to the source news servers.

       <b>-P</b> <u>hop_limit</u>
           Restrict feeding an article based on the number of hops it has already made.  Count the hops  in  the
           Path  header  field body (<u>hop_count</u>), feeding the article only when <u>hop_limit</u> is "+num" and <u>hop_count</u>
           is more than <u>num</u>; or <u>hop_limit</u> is "-num" and <u>hop_count</u> is less than <u>num</u>.

       <b>-q</b>  Print out less status information while running.

       <b>-Q</b> <u>level</u>
           Set the quietness level ("-Q 2" is equivalent to "-q").  The higher this value, the less gets logged.
           The default is "0".

       <b>-r</b> <u>file</u>
           Rather than feeding the downloaded articles to a destination server, instead create a batch file that
           can later be fed to a server using <b>rnews</b>.  See <a href="../man1/rnews.1.html">rnews</a>(1) for more information  about  the  batch  file
           format.

       <b>-R</b>  Be  a  reader  (use MODE READER and POST commands) to the downstream server.  Some posts will then be
           rejected because of unexpected injection header fields,  obsolete  or  incorrectly  formatted  header
           fields,  or  with a date too far in the past.  You may then want to set <u>artcutoff</u> to "0" in <u>inn.conf</u>,
           and use the <b>-H</b> flag to strip unwanted header fields.  Even with that, a few  articles  may  still  be
           rejected.

           The  default  is  to  behave  like  a  feeder  and  use  the IHAVE command.  (You'll have to allow in
           <u>incoming.conf</u> the connections from <b>pullnews</b> so that it is recognized as a feeder.)

       <b>-s</b> <u>to-server</u>[:<u>port</u>][_<u>tlsmode</u>]
           Normally, <b>pullnews</b> will feed the articles it retrieves to the news server running on  localhost.   To
           connect  to  a different host, specify a server with the <b>-s</b> flag.  You can also specify the port with
           this same flag or use <b>-p</b>.  Default port is "119".

           The connection is by default unencrypted.  To negotiate a TLS encryption layer, you can  set  <u>tlsmode</u>
           to  "TLS" for implicit TLS (negotiated immediately upon connection on a dedicated port) or "STARTTLS"
           for explicit TLS (the appropriate command will be sent before authenticating  or  feeding  messages).
           Examples of use are:

               pullnews -s news.server.com
               pullnews -s news.server.com_STARTTLS
               pullnews -s news.server.com:433_TLS

           Note that not all NNTP servers implement TLS for feeding articles.

       <b>-S</b> <u>max-run</u>
           Specify the maximum time <u>max-run</u> in seconds for <b>pullnews</b> to run.

       <b>-t</b> <u>retries</u>
           The  maximum  number  (<u>retries</u>)  of  attempts  to connect to a server or reconnect to a server if the
           socket is unexpectedly closed (see also <b>-T</b>).  The default is "0".

       <b>-T</b> <u>connect-pause</u>
           Pause <u>connect-pause</u> seconds between connection retries (see also <b>-t</b>).  The default is "1".

       <b>-w</b> <u>num</u>
           Set each group's high water mark (last  received  article  number)  to  <u>num</u>.   If  <u>num</u>  is  negative,
           calculate  <u>Current</u>+<u>num</u> instead (i.e. get the last <u>num</u> articles).  Therefore, a <u>num</u> of "0" will re-get
           all articles on the server; whereas a <u>num</u> of "-0" will get no old articles, setting the water mark to
           <u>Current</u> (the most recent article on the server).

       <b>-x</b>  If the <b>-x</b> flag is used, an Xref header field is added to any article  that  lacks  one.   It  can  be
           useful for instance if articles are fed to a news server which has <u>xrefslave</u> set in <u>inn.conf</u>.

       <b>-z</b> <u>article-pause</u>
           Sleep <u>article-pause</u> seconds between articles.  The default is "0".

       <b>-Z</b> <u>group-pause</u>
           Sleep <u>group-pause</u> seconds between groups.  The default is "0".

</pre><h4><b>CONFIG</b> <b>FILE</b></h4><pre>
       The  config  file for <b>pullnews</b> is divided into blocks, one block for each remote server to connect to.  A
       block begins with the host line (which must have no leading whitespace) and contains just the hostname of
       the remote server with optional port and TLS mode (with the same semantics as the  <b>-s</b>  flag),  optionally
       followed  by  authentication  details  (username and password for that server).  Note that authentication
       details can also be provided for the downstream server (a host  line  for  "localhost"  or  the  hostname
       specified with the <b>-s</b> flag could be added for it in the configuration file, with no newsgroup to fetch).

       Following the host line should be one or more newsgroup lines which start with whitespace followed by the
       name of a newsgroup to retrieve.  Only one newsgroup should be listed on each line.

       <b>pullnews</b>  will  update  the  config  file  to include the time the group was last checked and the highest
       numbered article successfully retrieved and transferred to the destination server.  It uses this data  to
       avoid doing duplicate work the next time it runs.

       The full syntax is:

           &lt;host&gt;[:&lt;port&gt;][_&lt;tlsmode&gt;] [&lt;username&gt; &lt;password&gt;]
               &lt;group&gt; [&lt;time&gt; &lt;high&gt;]
               &lt;group&gt; [&lt;time&gt; &lt;high&gt;]

       where the &lt;host&gt; line must not have leading whitespace and the &lt;group&gt; lines must.

       A typical configuration file would be:

           # Format: group date high
           data.pa.vix.com
               rec.bicycles.racing 908086612 783
               rec.humor.funny 908086613 18
               comp.programming.threads
           nnrp.vix.com pull sekret
               comp.std.lisp
           news.server.com:563_TLS joe password
               news.software.nntp

       Note  that an earlier run of <b>pullnews</b> has filled in details about the last article downloads from the two
       rec.* groups.  The two comp.* groups and the news.* group were just added by the user and  have  not  yet
       been checked.

       The  nnrp.vix.com  server  requires  authentication,  and  <b>pullnews</b>  will use the username "pull" and the
       password "sekret" (without any encryption layer).

       The connection to news.server.com will be encrypted with implicit TLS on port 563.  Joe's password  won't
       be sent in plaintext.

</pre><h4><b>FILES</b></h4><pre>
       <u>pathbin</u>/pullnews
           The Perl script itself used to pull news from upstream servers and feed it to another news server.

       <u>pathdb</u>/pullnews.marks or <a href="file:~/pullnews.marks">~/pullnews.marks</a>
           The  default  config file.  It is stored in <u>pullnews.marks</u> in <u>pathdb</u> when <b>pullnews</b> is run as the news
           user, or otherwise in the running user's home directory.

</pre><h4><b>HISTORY</b></h4><pre>
       <b>pullnews</b> was written by James Brister for INN.  The documentation was rewritten in POD  by  Russ  Allbery
       &lt;<a href="mailto:eagle@eyrie.org">eagle@eyrie.org</a>&gt;.

       Geraint  A. Edwards  greatly  improved <b>pullnews</b>, adding no more than 16 new recognized flags, fixing some
       bugs and integrating the <b>backupfeed</b> contrib script by Kai Henningsen, adding again 6 other flags.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <a href="../man5/incoming.conf.5.html">incoming.conf</a>(5), <a href="../man1/rnews.1.html">rnews</a>(1).

INN 2.7.3                                          2025-02-21                                        <u><a href="../man1/PULLNEWS.1.html">PULLNEWS</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>