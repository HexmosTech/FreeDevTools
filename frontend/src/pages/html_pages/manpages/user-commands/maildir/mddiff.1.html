<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>mddiff - computes diff for maildirs</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/noble/+package/syncmaildir">syncmaildir_1.3.0-2build2_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       <b>mddiff</b> - computes diff for maildirs

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>mddiff</b> [<b>--max-mailno</b> <u>mno</u>] [<b>--db-file</b> <u>dbf</u>] [<b>-l</b>|<b>--list</b>] [<b>-s</b>|<b>--symlink</b>]
              [<b>--exclude</b> <u>globexpr</u>] [<b>-v</b>|<b>--verbose</b>] [<b>-d</b>|<b>--dry-run</b>]
              [<b>-n</b>|<b>--no-delete</b>] [<b>--no-move</b>] [<b>--help</b>] [<b>--sha1sum</b>] <u>paths</u>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>mddiff</b>  computes the delta from an old status of a maildir (previously recorded in a support file, called
       db file) and the current status, generating a set of commands (a diff) that a third  party  software  can
       apply to synchronize a (eventually remote) copy of the maildir.

       If <u>paths</u> is a single file name, and that file is a fifo, <b>mddiff</b> reads from it file names separated by new
       line and outputs the sha1 of its header and body separated by space.

             $ mddiff /tmp/fifo_for_mddiff
             806a0ffe4f29766effd764... 463e543da9dac8e298...
             582cbb6a5cd3ce13965c8c... 8fa60a7458b1157193...
             ...

       If  <u>paths</u>  is a single file name, and that file is a fifo, and the <b>-s</b> option is passed, <b>mddiff</b> reads from
       that fifo two lines at a time, respectively a source name and a target name. It then  creates  a  symlink
       named as as the target name pointing to the source name. If some dictories need to be created in order to
       create  the  symlink, this is also done. <b>mddiff</b> will print 'OK' on stdout to signal a success, 'ERROR' to
       signal an error.

       If <u>paths</u> is a list of directories, <b>mddiff</b>  outputs  a  list  of  actions  a  client  has  to  perform  to
       synchronize  a  copy  of  the  same maildirs. This set of actions is relative to a previous status of the
       maildir stored in the db  file.   The  input  directories  are  traversed  recursively,  and  every  file
       encountered inside directories named cur/ and new/ is a potential mail message (if it contains no \n\n it
       is skipped).

             $ mddiff <a href="file:~/Mail/">~/Mail/</a>
             ADD <a href="file:~/Mail/cur/1239038050.14937_1.garfield">~/Mail/cur/1239038050.14937_1.garfield</a>:2,S 66532ebb05b252e...
             ...

       Every client (endpoint using <b>mddiff</b> for synchronization) must use a different db-file, and the db-file is
       strictly  related with the set of directories given as arguments, and should not be used with a different
       directory set. Adding items to the directory set is safe, while removing them may not do  what  you  want
       (delete actions are generated).

       <b>mddiff</b>  does not alter the <u>dbf</u> file, it generates a new one called dbf.new.  It is up to the higher level
       tool <b><a href="../man1/smd-server.1.html">smd-server</a></b>(1) to rename dbf.new to <u>dbf</u> in case the other endpoint successfully applied the diff.

       The <b>--exclude</b> option tells <b>mddiff</b> to ignore all <u>paths</u> matching the given <b><a href="../man7/glob.7.html">glob</a></b>(7) expression. This  option
       can  be passed multiple times. Matching is performed using <b><a href="../man3/fnmatch.3.html">fnmatch</a></b>(3) with no special flags, thus '*' and
       '?' match any character including '/'. Matching is performed when a directory is entered. If the match is
       successful, the directory and all its subedirectories are skipped.

       The <b>--no-delete</b> option tells <b>mddiff</b> to not output a DELETE action for files that disappear. Note  that  a
       DELETE action is anyway generated for files that are moved (i.e. move is COPY plus DELETE). The result is
       that deletions are not propagated to the other endpoint.

</pre><h4><b>OPTIONS</b></h4><pre>
       <b>--max-mailno</b> <u>mno</u>
              Estimation of max mail message number (defaults to the number of messages in the db-file + 1000 or
              500000 if there is no db-file). You may want to decrease it for the first run on small systems. It
              is anyway increased automatically when needed

       <b>--db-file</b> <u>dbf</u>
              Name of the cache for the endpoint (default db.txt)

       <b>--exclude</b> <u>globexpr</u>
              Exclude <u>paths</u> maching the given expression

       <b>--sha1sum</b>
              Behaves like the sha1sum utility

       <b>--mkdir-p</b>
              Behaves like mkdir <b>-p</b>

       <b>--mkfifo</b>
              Behaves like mkfifo

       <b>-l</b> <b>--list</b>
              Only list the mailboxes recursively contained in <u>paths</u>

       <b>-s</b> <b>--symlink</b>
              Create symlinks for <u>paths</u> read on the input fifo

       <b>-v</b> <b>--verbose</b>
              Increase program verbosity (printed on stderr)

       <b>-d</b> <b>--dry-run</b>
              Do not generate a new db-file

       <b>-n</b> <b>--no-delete</b>
              Do not track deleted files

       <b>--no-move</b>
              Do not generate MOVE (only COPY + DELETE)

       <b>--help</b> This help screen

</pre><h4><b>NOTES</b></h4><pre>
       <b>mddiff</b>  is a low level utility, used by smd-server and smd-client. You should use higher level tools like
       <b><a href="../man1/smd-pull.1.html">smd-pull</a></b>(1), <b><a href="../man1/smd-push.1.html">smd-push</a></b>(1) and <b><a href="../man1/smd-loop.1.html">smd-loop</a></b>(1)

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man1/smd-client.1.html">smd-client</a></b>(1), <b><a href="../man1/smd-server.1.html">smd-server</a></b>(1), <b><a href="../man1/smd-pull.1.html">smd-pull</a></b>(1), <b><a href="../man1/smd-push.1.html">smd-push</a></b>(1), <b><a href="../man1/smd-loop.1.html">smd-loop</a></b>(1)

</pre><h4><b>AUTHOR</b></h4><pre>
       Enrico Tassi &lt;<a href="mailto:gares@fettunta.org">gares@fettunta.org</a>&gt;

                                                  01 April 2024                                        <u><a href="../man1/mddiff.1.html">mddiff</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>