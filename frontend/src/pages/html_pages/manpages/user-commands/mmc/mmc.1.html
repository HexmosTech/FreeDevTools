<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>mmc -  a tool for configuring MMC storage devices</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/mmc-utils">mmc-utils_0+git20240329.f757f413-1ubuntu1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       mmc -  a tool for configuring MMC storage devices

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>mmc</b> [<u>options</u>] [ mmc-block-device]...

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>mmc-utils</b>  is a single-threaded tool that will perform a specified type of mmc action as specified by the
       user.
       The typical use of mmc-utils is  to  access  the  mmc  device  either  for  configuring  or  reading  its
       configuration registers.

</pre><h4><b>OPTIONS</b></h4><pre>
       <b>extcsd</b> <b>read</b> <u>device</u>
              Read and prints the extended csd register

       <b>extcsd</b> <b>write</b> <u>offset</u> <u>value</u> <u>device</u>
              Write <u>value</u> at <u>offset</u> to the device's extcsd

       <b>writeprotect</b> <b>boot</b> <b>get</b> <u>device</u>
              Print the boot partitions write protect status

       <b>writeprotect</b> <b>boot</b> <b>set</b> <u>device</u> <b>[</b><u>number</u>]
              Set the boot partition write protect status for the device.
              If  <u>number</u>  is passed (0 or 1), only protect that specified eMMC boot partition, otherwise protect
              both.
              It will be write-protected until the next boot.

       <b>writeprotect</b> <b>user</b> <b>set</b> <u>type</u> <u>start-block</u> <u>blocks</u> <u>device</u>
              Set the write protect configuration for the specified region of the user area for the device.
              <u>start-block</u> specifies the first block of the protected area.
              <u>blocks</u> specifies the size of the protected area in blocks.
              NOTE! The area must start and end on Write Protect Group boundaries, Use  the  "writeprotect  user
              get" command to get the Write Protect Group size.
               <u>type</u> is one of the following:

                     <b>none</b>   Clear temporary write protection.

                     <b>temp</b>   Set temporary write protection.

                     <b>pwron</b>  Set write protection until the next power on.

       <b>writeprotect</b> <b>user</b> <b>get</b> <u>device</u>
              Print the user area's write protect configuration for the device.

       <b>disable</b> <b>512B</b> <b>emulation</b> <u>device</u>
              Set the eMMC data sector size to 4KB by disabling emulation on the device.

       <b>gp</b> <b>create</b> <u>dry-run</u> <u>length-KiB</u> <u>partition</u> <u>enh-attr</u> <u>ext-attr</u> <u>device</u>
              Create general purpose partition for the device.
              NOTE!  This is a one-time programmable (irreversible) change.
              To set enhanced attribute to general partition being created set <u>enh-attr</u> to 1 else set it to 0.
              To set extended attribute to general partition set <u>enh-attr</u> to 1,2 else set it to 0.
              <u>dry-run</u> is one of the following:

                     <b>-y</b>     PARTITION_SETTING_COMPLETED  in  the  extcsd  will  get  set  and  the  partitioning
                            operation will take effect and be finalized.

                     <b>-c</b>     more partitioning settings are still to come - partitioning operation will not  take
                            effect.

                     <b>otherwise</b>
                            These changes will not take effect neither now nor after a power cycle.

       <b>enh_area</b> <b>set</b> <u>dry-run</u> <u>start-KiB</u> <u>length-KiB</u> <u>device</u>
              Enable the enhanced user area for the device.
              NOTE!  This is a one-time programmable (irreversible) change.  <u>dry-run</u> is as above.

       <b>write_reliability</b> <b>set</b>  <u>dry-run</u>  <u>partition</u>  <u>device</u>
              Enable write reliability per partition for the device.
              NOTE!  This is a one-time programmable (irreversible) change.  <u>dry-run</u> is as above.

       <b>status</b> <b>get</b> <u>device</u>
              Print the response to STATUS_SEND (CMD13).

       <b>bootpart</b> <b>enable</b> <u>boot-partition</u> <u>send-ackn</u> <u>device</u>
              Enable  the  boot  partition  for  the  device.   Disable  the boot partition for the device if is
              <u>boot-partition</u> set to 0.
              To receive acknowledgment of boot from the card set <u>send-ackn</u> to 1, else set it to 0.

       <b>bootbus</b> <b>set</b> <u>boot-mode</u> <u>reset-boot-bus-conditions</u> <u>boot-bus-width</u> <u>device</u>
              Set Boot Bus Conditions.
              <u>boot-mode</u> is one of the following: single_backward, single_hs, or dual.
              <u>reset-boot-bus-conditions</u> is one of the following: x1 or retain.
              <u>boot-bus-width</u> is one of the following: x1, x4, or x8.

       <b>bkops_en</b> <u>mode</u> <u>device</u>
              Enable the eMMC BKOPS feature on the device.  The auto (AUTO_EN) setting is only supported on eMMC
              5.0 or newer.
              NOTE!  Setting manual (MANUAL_EN) is one-time programmable (irreversible) change.
              <u>mode</u> is one of the following:

                     <b>auto</b>   Auto bkops is set

                     <b>manual</b> Manual bkops is set

       <b>hwreset</b> <b>enable</b> <u>device</u>
              Permanently enable the eMMC H/W Reset feature on the device.
              NOTE!  This is a one-time programmable (irreversible) change.

       <b>hwreset</b> <b>disable</b> <u>device</u>
              Permanently disable the eMMC H/W Reset feature on the device.
              NOTE!  This is a one-time programmable (irreversible) change.

       <b>sanitize</b> <u>device</u> <u>[timeout_ms]</u>
              Send Sanitize command to the device.  This will delete the unmapped memory region of the device.

       <b>rpmb</b> <b>write-key</b> <u>rpmb-device</u> <u>key-file</u>
              Program authentication key which is 32 bytes length and stored in the specified file.
              Also you can specify '-' instead of key file path to read the key from stdin.
              NOTE!  This is a one-time programmable (irreversible) change.

       <b>rpmb</b> <b>read-counter</b> <u>rpmb-device</u>
              Counter value for the <u>rpmb-device</u> will be read to stdout.

       <b>rpmb</b> <b>read-block</b> <u>rpmb-device</u> <u>address</u> <u>blocks-</u>Blocks of 256 bytes will be read from <u>rpmb-device</u> to output
              file or stdout if '-' is specified. If key is specified - read data will be verified.

       <b>rpmb</b> <b>write-block</b> <u>rpmb-device</u> <u>address</u> <u>256-byte-data-file</u> <u>key-file</u>
              Block of 256 bytes will be written from data file to <u>rpmb-device</u>.
              Also you can specify '-' instead of key file path or data file to read the data from stdin.

       <b>cache</b> <b>enable</b> <u>device</u>
              Enable the eMMC cache feature on the device.
              NOTE! The cache is an optional feature on devices &gt;= eMMC4.5.

       <b>cache</b> <b>disable</b> <u>device</u>
              Disable the eMMC cache feature on the device.
              NOTE! The cache is an optional feature on devices &gt;= eMMC4.5.

       <b>csd</b> <b>read</b> <b>device-path</b>
              Print CSD data from <u>device-path</u>.  The device path should specify the csd sysfs file directory.

       <b>cid</b> <b>read</b> <u>device-path</u>
              Print CID data from <u>device-path</u>.  The device path should specify the cid sysfs file directory.

       <b>scr</b> <b>read</b> <u>device-path</u>
              Print SCR data from <u>device-path</u>.  The device path should specify the scr sysfs file directory.

       <b>ffu</b> <u>image-file-name</u> <u>device</u> <b>[</b><u>chunk-bytes</u>]
              Run Field Firmware Update with <u>image-file-name</u> on the device.
              [<u>chunk-bytes</u>] is optional and defaults to its max - 512k. should be in decimal  bytes  and  sector
              aligned.
              if  [<u>chunk-bytes</u>]  is  omitted,  mmc-utils  will try to run ffu using the largest possible chunks:
              max(image-file, 512k).

       <b>erase</b> <u>type</u> <u>start-address</u> <u>end-address</u> <u>device</u>
              Send Erase CMD38 with specific argument to the device.
              NOTE!: This will delete all user data in the specified region of the device.
              <u>type</u> is one of the following: legacy, discard, secure-erase, secure-trim1, secure-trim2, or trim.

       <b>gen_cmd</b> <b>read</b> <u>device</u> [<u>arg</u>]
              Send GEN_CMD (CMD56) to read vendor-specific format/meaning data from the device.
              NOTE!: [<u>arg</u>] is optional and defaults to 0x1. If [<u>arg</u>] is specified, then [<u>arg</u>] must be  a  32-bit
              hexadecimal  number,  prefixed  with 0x/0X. And bit0 in [<u>arg</u>] must be 1.  Normally this command is
              aimed to extract a device-health info from the device.

       <b>softreset</b> <u>device</u>
              Issues a CMD0 softreset, e.g. for testing if hardware reset for UHS works

       <b>boot_operation</b> <u>boot-data-file</u> <u>device</u>
               Does the alternative boot operation and writes the specified starting blocks of  boot  data  into
              the requested file.  Note some limitations:

                     <b>1)</b>     The  boot  operation  must  be  configured  first,  e.g. via bootbus and/or bootpart
                            commands

                     <b>2)</b>     The MMC must currently be running at the bus mode that is configured  for  the  boot
                            operation (HS200 and HS400 not supported at all).

                     <b>3)</b>     Only up to 512K bytes of boot data will be transferred.

                     <b>4)</b>     The  MMC will perform a soft reset, if your system cannot handle that do not use the
                            boot operation from mmc-utils.

       <b>--help</b> <b>|</b> <b>help</b> <b>|</b> <b>-h</b>
              Show the help

       <u>cmd</u> <b>--help</b>
              Show detailed help for that specific <u>cmd</u> or subset of commands.

</pre><h4><b>RPMB</b> <b>COMMANDS</b></h4><pre>
       The RPMB partition on the eMMC devices  is  a  special  area  used  for  storing  cryptographically  safe
       information signed by a special secret key.
       To write and read records from this special area, authentication is needed.
       The RPMB area is *only* and *exclusively* accessed using ioctl()s from user-space.
       RPMB  commands are send using the mmc multi-ioctl, thus ensures that the atomic nature of the rpmb access
       operation.
       The rpmb device given as a parameter to the rpmb commands is not a block device but a char device.
       This was done to help the mmc driver to account for some of the rpmb peculiarities.

</pre><h4><b>EXAMPLES</b></h4><pre>
       <b>RPMB</b> <b>examples</b>
              Program rpmb key using the stdin option:

                     $ echo -n AAAABBBBCCCCDDDDEEEEFFFFGGGGHHHH | mmc rpmb write-key /dev/mmcblk0rpmb -

              Read 2 blocks starting address 2 and output the received content to stdout.  Verify  the  received
              frames using the key (not mandatory):

                     $ echo -n AAAABBBBCCCCDDDDEEEEFFFFGGGGHHHH | mmc rpmb read-block /dev/mmcblk0rpmb 0x02 2 -

              Read  2  blocks  without  verification  starting  address  2  and  output  the received content to
              /tmp/block:

                     $mmc rpmb read-block /dev/mmcblk0rpmb 0x02 2 /tmp/block

              Write a string of 'a's to address 2. both the input and key uses stdin interface:

                     $ (awk 'BEGIN {while (c++&lt;256) printf "a"}' | echo -n  AAAABBBBCCCCDDDDEEEEFFFFGGGGHHHH)  |
                     mmc rpmb write-block /dev/mmcblk0rpmb 0x02 - -

       <b>Field</b> <b>Firmware</b> <b>Update</b> <b>(ffu)</b> <b>examples</b>
              Do  ffu  using  max-possible  chunk size:  If the fluf size &lt; 512k, it will be flushed in a single
              write sequence.

                     $ mmc ffu IO4e0aC2056001801M1100042AE1.fluf /dev/mmcblk0

              Same as above, this time use a 4k chunks:

                     $ mmc ffu IO4e0aC2056001801M1100042AE1.fluf /dev/mmcblk0 4096

</pre><h4><b>AUTHORS</b></h4><pre>
       <b>mmc-utils</b> was written by Chris Ball &lt;<a href="mailto:cjb@laptop.org">cjb@laptop.org</a>&gt; and &lt;<a href="mailto:chris@printf.net">chris@printf.net</a>&gt;.
       It is currently maintained by Ulf Hansson &lt;<a href="mailto:ulf.hansson@linaro.org">ulf.hansson@linaro.org</a>&gt;.

</pre><h4><b>REPORTING</b> <b>BUGS</b></h4><pre>
       Report bugs to the <b>mmc</b> mailing list &lt;<a href="mailto:linux-mmc@vger.kernel.org">linux-mmc@vger.kernel.org</a>&gt;.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       For further documentation see <b>README</b>.
       A short intro - https://docs.kernel.org/driver-api/mmc/mmc-tools.html
       official git tree - https://git.kernel.org/pub/scm/utils/mmc/mmc-utils.git

User Manual                                        April 2024                                       <u><a href="../man1/mmc-utils.1.html">mmc-utils</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>