<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>kas - a setup tool for bitbake based projects</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/kas">kas_4.7-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       kas - a setup tool for bitbake based projects

</pre><h4><b>SYNOPSIS</b></h4><pre>
          kas [-h] [--version] [-l {debug,info,warning,error,critical}]
              {build,checkout,dump,for-all-repos,lock,shell,menu} ...

</pre><h4><b>DESCRIPTION</b></h4><pre>
       kas - setup tool for bitbake based project

       This tool provides an easy mechanism to setup bitbake based projects.

       The  OpenEmbedded  tooling  support  starts  at  step 2 with bitbake. The downloading of sources and then
       configuration has to be done by hand. Usually, this is explained in a README.  Instead  kas  is  using  a
       project configuration file and does the download and configuration phase.

       Key features provided by the build tool:

       • clone and checkout bitbake layers

       • create default bitbake settings (machine, arch, ...)

       • launch minimal build environment, reducing risk of host contamination

       • initiate bitbake build process

</pre><h4><b>OPTIONS</b></h4><pre>
       <b>Positional</b> <b>Arguments</b>

       <b>cmd</b>    sub command help

              Possible choices: build, checkout, dump, for-all-repos, lock, shell, menu

       <b>Named</b> <b>Arguments</b>

       <b>--version</b>
              show program's version number and exit

       <b>-l='info'</b>, <b>--log-level='info'</b>
              Set log level (default: info)

              Possible choices: debug, info, warning, error, critical

</pre><h4><b>SUB-COMMANDS</b></h4><pre>
       <b>kas</b> <b>build</b> <b>[-h]</b> <b>[--skip</b> <b>STEP]</b> <b>[--force-checkout]</b> <b>[--update]</b> <b>[-k]</b>
                        [--target TARGET] [-c TASK] [--provenance {true,mode=min,mode=max}]
                        [config]  [extra_bitbake_args  ...]   <b>Checks</b>  <b>out</b>  <b>all</b> <b>necessary</b> <b>repositories</b> <b>and</b> <b>builds</b>
              <b>using</b> <b>bitbake</b> <b>as</b> <b>specified</b> <b>in</b> <b>the</b> <b>configuration</b> <b>file.</b>

       <b>kas</b> <b>checkout</b> <b>[-h]</b> <b>[--skip</b> <b>STEP]</b> <b>[--force-checkout]</b> <b>[--update]</b> <b>[config]</b>
              Checks out all necessary repositories and  sets  up  the  build  directory  as  specified  in  the
              configuration file.

       <b>kas</b> <b>dump</b> <b>[-h]</b> <b>[--skip</b> <b>STEP]</b> <b>[--force-checkout]</b> <b>[--update]</b> <b>[--indent</b> <b>INDENT]</b>
                       [--sort] [--format {yaml,json}] [--resolve-refs] [--resolve-local]
                       [--resolve-env | --lock]
                       [config]  <b>Expand</b>  <b>and</b>  <b>dump</b>  <b>the</b> <b>final</b> <b>config</b> <b>to</b> <b>stdout.</b> <b>When</b> <b>resolving</b> <b>branches,</b> <b>this</b> <b>is</b>
              <b>done</b> <b>before</b> <b>patches</b> <b>are</b> <b>applied.</b>

       <b>kas</b> <b>for-all-repos</b> <b>[-h]</b> <b>[--skip</b> <b>STEP]</b> <b>[--force-checkout]</b> <b>[--update]</b> <b>[-E]</b> <b>[-k]</b>
                                [config] command <b>Runs</b> <b>a</b> <b>specified</b> <b>command</b> <b>in</b> <b>all</b> <b>checked</b> <b>out</b> <b>repositories.</b>

       <b>kas</b> <b>lock</b> <b>[-h]</b> <b>[--skip</b> <b>STEP]</b> <b>[--force-checkout]</b> <b>[--update]</b> <b>[--indent</b> <b>INDENT]</b>
                       [--sort]
                       [config] <b>Create</b> <b>and</b> <b>update</b> <b>kas</b> <b>project</b> <b>lockfiles.</b>

       <b>kas</b> <b>shell</b> <b>[-h]</b> <b>[--skip</b> <b>STEP]</b> <b>[--force-checkout]</b> <b>[--update]</b> <b>[-E]</b> <b>[-k]</b>
                        [-c COMMAND]
                        [config] <b>Run</b> <b>a</b> <b>shell</b> <b>in</b> <b>the</b> <b>build</b> <b>environment.</b>

       <b>kas</b> <b>menu</b> <b>[-h]</b> <b>[kconfig]</b>
              Provides a configuration menu and triggers the build of the choices.

</pre><h4><b>PROJECT</b> <b>CONFIGURATION</b></h4><pre>
       The project configuration file describes the build environment and the layers to be used. It is the  main
       input to kas.  For details, see <b><a href="../man1/kas-project-config.1.html">kas-project-config</a>(1)</b>

</pre><h4><b>BUILD</b> <b>ATTESTATION</b></h4><pre>
       Kas supports to generate build attestation. For details, see <b><a href="../man1/kas-build-attestation.1.html">kas-build-attestation</a>(1)</b>.

</pre><h4><b>CREDENTIAL</b> <b>HANDLING</b></h4><pre>
       kas   provides   various   mechanisms   to   inject   credentials  into  the  build.   For  details,  see
       <b><a href="../man1/kas-credentials.1.html">kas-credentials</a>(1)</b>.

</pre><h4><b>ENVIRONMENT</b> <b>VARIABLES</b></h4><pre>
       kas uses a number of environment variables to configure its behavior.  The <u>Variables</u> <u>Glossary</u> provides an
       overview, wherein the tuple (C,K,E) denotes the scope of the variable.

       All directories that are  passed  to  kas  by  setting  the  corresponding  environment  variables  (e.g.
       <b>KAS_WORK_DIR</b>,  <b>KAS_BUILD_DIR</b>,  ...)  must  not  overlap  with  each  other,  except  for overlapping with
       <b>KAS_WORK_DIR</b> (i.e. the build|sstate|downloads|repo-ref dirs can be below the work dir).

   <b>Variable</b> <b>Scope</b>
       <b>kas-container</b> <b>(C)</b>

       The variable is processed or forwarded by the <b>kas-container</b> script.  For some variables, the variable  is
       re-written to the container's directory layout.

       <b>NOTE:</b>
          The  <b>env</b>  section  of  the  <u>project</u>  <u>configuration</u> can be used to make arbitrary environment variables
          available to the build environment. When invoking the build  via  <b>kas-container</b>,  make  sure  to  also
          forward the corresponding environment variables into the container.

       <b>kas</b> <b>(K)</b>

       The  variable  is  processed  by  kas  itself.  Some  variables (e.g. the credentials for the awscli) are
       re-written to configuration files to also support older versions of the tooling.

       <b>build</b> <b>environment</b> <b>(E)</b>

       The variable is exported into the  build  environment.  In  this  environment,  the  <b>bitbake</b>  command  is
       executed.

   <b>Variables</b> <b>Glossary</b>
               ┌───────────────────────────────────────┬──────────────────────────────────────────────┐
               │ Environment variables                 │ Description                                  │
               ├───────────────────────────────────────┼──────────────────────────────────────────────┤
               │ <b>KAS_WORK_DIR</b> (C, K)                   │ The  path  of the kas work directory,        │
               │                                       │ current   work   directory   is   the        │
               │                                       │ default. This directory must exist if        │
               │                                       │ set.                                         │
               ├───────────────────────────────────────┼──────────────────────────────────────────────┤
               │ <b>KAS_BUILD_DIR</b> (C, K)                  │ The  path  of  the  build  directory,        │
               │                                       │ <b>${KAS_WORK_DIR}/build</b> is the default.        │
               │                                       │ The parent directory  must  exist  if        │
               │                                       │ set.                                         │
               ├───────────────────────────────────────┼──────────────────────────────────────────────┤
               │ <b>KAS_REPO_REF_DIR</b> (C, K)               │ The  path to the repository reference        │
               │                                       │ directory.   Repositories   in   this        │
               │                                       │ directory are used as references when        │
               │                                       │ cloning.  In  order  for  kas to find        │
               │                                       │ those repositories, they have  to  be        │
               │                                       │ named  in  a  specific  way. The repo        │
               │                                       │ URLs are  translated  like  this:  "‐        │
               │                                       │ <u>https://github.com/siemens/meta-iot2000.git</u>" │
               │                                       │ resolves       to       the      name        │
               │                                       │ "github.com.siemens.meta-iot2000.git".       │
               │                                       │ Repositories that are not found  will        │
               │                                       │ be   cloned   below  this  directory.        │
               │                                       │ Multiple   instances   of   kas   can        │
               │                                       │ simultaneously   work   on  the  same        │
               │                                       │ directory, as long as the  underlying        │
               │                                       │ filesystem  is POSIX compatible. This        │
               │                                       │ directory must exist if set.                 │
               ├───────────────────────────────────────┼──────────────────────────────────────────────┤
               │ <b>KAS_DISTRO</b>   <b>KAS_MACHINE</b>   <b>KAS_TARGET</b> │ This  overwrites  the  respective setting in │
               │ <b>KAS_TASK</b> (C, K)                       │ the configuration file.                      │
               ├───────────────────────────────────────┼──────────────────────────────────────────────┤
               │ <b>KAS_PREMIRRORS</b> (C, K)                 │ Specifies alternatives for repo  URLs.  Just │
               │                                       │ like   bitbake   <b>PREMIRRORS</b>,  this  variable │
               │                                       │ consists of new-line separated entries. Each │
               │                                       │ entry defines a regular expression to  match │
               │                                       │ a URL and, space-separated, its replacement. │
               │                                       │ E.g.:        "<u>http:/<a href="file:/.">/.</a>*.someurl.io/</u>        ‐ │
               │                                       │ <u><a href="http://localmirror.net/">http://localmirror.net/</a></u>"                     │
               ├───────────────────────────────────────┼──────────────────────────────────────────────┤
               │ <b>DISTRO_APT_PREMIRRORS</b> (C)             │ Specifies alternatives for  apt  URLs.  Just │
               │                                       │ like <b>KAS_PREMIRRORS</b>.                         │
               ├───────────────────────────────────────┼──────────────────────────────────────────────┤
               │ <b>KAS_CLONE_DEPTH</b> (C, K)                │ Perform   shallow   git   clone/fetch  using │
               │                                       │ --depth=N specified by this  variable.  This │
               │                                       │ is  useful  in  case  CI  always starts with │
               │                                       │ empty work directory and this  directory  is │
               │                                       │ always discarded after the CI run.           │
               ├───────────────────────────────────────┼──────────────────────────────────────────────┤
               │ <b>SSH_PRIVATE_KEY</b> (K)                   │ Variable  containing  the  private  key that │
               │                                       │ should be added to  an  internal  ssh-agent. │
               │                                       │ This  key cannot be password protected. This │
               │                                       │ setting is useful for CI build  servers.  On │
               │                                       │ desktop   machines,   an  ssh-agent  running │
               │                                       │ outside the kas environment is more useful.  │
               ├───────────────────────────────────────┼──────────────────────────────────────────────┤
               │ <b>SSH_PRIVATE_KEY_FILE</b> (K)              │ Path to the private key file that should  be │
               │                                       │ added  to  an  internal  ssh-agent. This key │
               │                                       │ cannot be password protected.  This  setting │
               │                                       │ is  useful  for CI build servers. On desktop │
               │                                       │ machines, an ssh-agent running  outside  the │
               │                                       │ kas environment is more useful.              │
               ├───────────────────────────────────────┼──────────────────────────────────────────────┤
               │ <b>SSH_AUTH_SOCK</b> (C,K,E)                 │ SSH  authentication socket. Used for cloning │
               │                                       │ over SSH (alternative to <b>SSH_PRIVATE_KEY</b>  or │
               │                                       │ <b>SSH_PRIVATE_KEY_FILE</b>).                       │
               ├───────────────────────────────────────┼──────────────────────────────────────────────┤
               │ <b>DL_DIR</b>    <b>SSTATE_DIR</b>   <b>SSTATE_MIRRORS</b> │ Environment variables that  are  transferred │
               │ (C,K,E)                               │ to  the  bitbake environment. The <b>DL_DIR</b> and │
               │                                       │ <b>SSTATE_DIR</b>  directories  are  created  along │
               │                                       │ with their parents, if set.                  │
               ├───────────────────────────────────────┼──────────────────────────────────────────────┤
               │ <b>TMPDIR</b> (K,E)                          │ Directory for temporary files.               │
               ├───────────────────────────────────────┼──────────────────────────────────────────────┤
               │ <b>http_proxy</b>    <b>https_proxy</b>   <b>ftp_proxy</b> │ These    variables    define    the    proxy │
               │ <b>no_proxy</b> (C,K,E)                      │ configuration bitbake should use.            │
               ├───────────────────────────────────────┼──────────────────────────────────────────────┤
               │ <b>GIT_PROXY_COMMAND</b>     (E)    <b>NO_PROXY</b> │ Set proxy for native git  fetches.  <b>NO_PROXY</b> │
               │ (C,K,E)                               │ is  evaluated by OpenEmbedded's oe-git-proxy │
               │                                       │ script.                                      │
               ├───────────────────────────────────────┼──────────────────────────────────────────────┤
               │ <b>SHELL</b> (C,K,E)                         │ The shell to  start  when  using  the  <u>shell</u> │
               │                                       │ plugin.                                      │
               ├───────────────────────────────────────┼──────────────────────────────────────────────┤
               │ <b>TERM</b> (C,K,E)                          │ The  terminal  options  used  in  the  <u>shell</u> │
               │                                       │ plugin.                                      │
               ├───────────────────────────────────────┼──────────────────────────────────────────────┤
               │ <b>AWS_CONFIG_FILE</b>          <b>AWS_ROLE_ARN</b> │ Path   to   the   awscli  configuration  and │
               │ <b>AWS_SHARED_CREDENTIALS_FILE</b>           │ credentials files that are copied to the kas │
               │ <b>AWS_WEB_IDENTITY_TOKEN_FILE</b> (K,C)     │ home dir.                                    │
               ├───────────────────────────────────────┼──────────────────────────────────────────────┤
               │ <b>GIT_CREDENTIAL_HELPER</b>                 │ Allows one to  set  and  configure  the  git │
               │ <b>GIT_CREDENTIAL_USEHTTPPATH</b> (K,C)      │ credential  helper  in the <u>.gitconfig</u> of the │
               │                                       │ kas user.                                    │
               ├───────────────────────────────────────┼──────────────────────────────────────────────┤
               │ <b>GITCONFIG_FILE</b> (K,C)                  │ Path to a  <u>.gitconfig</u>  file  which  will  be │
               │                                       │ copied to the kas home dir as <u>.gitconfig</u>.    │
               ├───────────────────────────────────────┼──────────────────────────────────────────────┤
               │ <b>NETRC_FILE</b> (K,C)                      │ Path  to  a .netrc file which will be copied │
               │                                       │ to the kas home dir as .netrc.               │
               ├───────────────────────────────────────┼──────────────────────────────────────────────┤
               │ <b>REGISTRY_AUTH_FILE</b> (K,C)              │ Path to a container registry  authentication │
               │                                       │ file.                                        │
               ├───────────────────────────────────────┼──────────────────────────────────────────────┤
               │ <b>CI_SERVER_HOST</b>         <b>CI_SERVER_PORT</b> │ Environment variables from GitLab CI, if set │
               │ <b>CI_SERVER_PROTOCOL</b>                    │ .netrc  is configured to allow fetching from │
               │ <b>CI_SERVER_SHELL_SSH_HOST</b>              │ the  GitLab  instance.  An  entry  will   be │
               │ <b>CI_SERVER_SHELL_SSH_PORT</b> <b>CI_JOB_TOKEN</b> │ appended  in  case  <b>NETRC_FILE</b>  was given as │
               │ <b>CI_JOB_URL</b>                <b>CI_REGISTRY</b> │ well. Note that if the file already contains │
               │ <b>CI_REGISTRY_USER</b> (K)                  │ an entry for  that  host  most  tools  would │
               │                                       │ probably take that first one. The job url is │
               │                                       │ added  to  the  provenance  attestation  (if │
               │                                       │ enabled).       If      <b>CI_REGISTRY</b>      and │
               │                                       │ <b>CI_REGISTRY_USER</b>  is  also  set, a container │
               │                                       │ registry login file  is  created,  which  is │
               │                                       │ used  by  docker, podman and skopeo. In case │
               │                                       │ <b>REGISTRY_AUTH_FILE</b> was given as well, the CI │
               │                                       │ login data will be appended  to  that  file. │
               │                                       │ The  required  base64  encoded login data is │
               │                                       │ generated by kas.                            │
               ├───────────────────────────────────────┼──────────────────────────────────────────────┤
               │ <b>GITHUB_ACTIONS</b> <b>GITLAB_CI</b> (K)          │ Environment variables from GitHub actions or │
               │                                       │ GitLab CI. If set  to  <u>true</u>,  <u>.gitconfig</u>  is │
               │                                       │ automatically  imported.   For  details, see │
               │                                       │ <b>GITCONFIG_FILE</b>.                              │
               ├───────────────────────────────────────┼──────────────────────────────────────────────┤
               │ <b>REMOTE_CONTAINERS</b>                 (K) │ Environment   variables  related  to  VSCode │
               │ <b>REMOTE_CONTAINERS_&lt;x&gt;</b> (K,E)           │ Remote  Containers.  If  running   in   this │
               │                                       │ environment,   <u>.gitconfig</u>  is  automatically │
               │                                       │ imported.                                    │
               ├───────────────────────────────────────┼──────────────────────────────────────────────┤
               │ <b>BB_NUMBER_THREADS</b>       <b>PARALLEL_MAKE</b> │ Environment   variables   to   control   the │
               │ (C,K,E)                               │ concurrency.                                 │
               ├───────────────────────────────────────┼──────────────────────────────────────────────┤
               │ <b>KAS_IMAGE_VERSION</b> (C)                 │ Select the version  of  the  (official)  kas │
               │                                       │ container (e.g. 4.5).                        │
               ├───────────────────────────────────────┼──────────────────────────────────────────────┤
               │ <b>KAS_CONTAINER_IMAGE</b> (C)               │ Select  the  container  image (full OCI path │
               │                                       │ including tag).                              │
               ├───────────────────────────────────────┼──────────────────────────────────────────────┤
               │ <b>KAS_CONTAINER_ENGINE</b> (C)              │ Explicitly set the container engine  (either │
               │                                       │ <b>docker</b>  or  <b>podman</b>).  If  not  set,  this is │
               │                                       │ auto-detected (preference: docker).          │
               └───────────────────────────────────────┴──────────────────────────────────────────────┘

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man1/kas-project-config.1.html">kas-project-config</a>(1)</b>, <b><a href="../man1/kas-build.1.html">kas-build</a>(1)</b>, <b><a href="../man1/kas-credentials.1.html">kas-credentials</a>(1)</b>

</pre><h4><b>KAS</b></h4><pre>
       Part of the <b><a href="../man1/kas.1.html">kas</a>(1)</b> suite.

</pre><h4><b>AUTHOR</b></h4><pre>
       Daniel Wagner, Jan Kiszka, Claudius Heine

</pre><h4><b>COPYRIGHT</b></h4><pre>
       Siemens AG, 2017-2024

4.7                                               Feb 03, 2025                                            <u><a href="../man1/KAS.1.html">KAS</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>