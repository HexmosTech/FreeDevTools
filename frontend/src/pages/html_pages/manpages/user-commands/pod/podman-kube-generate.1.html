<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>podman-kube-generate - Generate Kubernetes YAML based on containers, pods or volumes</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/podman">podman_5.4.1+ds1-1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       podman-kube-generate - Generate Kubernetes YAML based on containers, pods or volumes

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>podman</b> <b>kube</b> <b>generate</b> [<u>options</u>] <u>container...</u> | <u>pod...</u> | <u>volume...</u>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>podman</b>  <b>kube</b>  <b>generate</b>  generates  Kubernetes  YAML  (v1  specification)  from Podman containers, pods or
       volumes. Regardless of whether the input is for containers or pods, Podman generates the specification as
       a Pod by default. The input may be in the form of one or more containers, pods or volumes names or IDs.

       <b>Podman</b> <b>Containers</b> <b>or</b> <b>Pods</b>

       Volumes appear in the generated YAML according to two different volume types. Bind-mounted volumes become
       <u>hostPath</u> volume types and named volumes become <u>persistentVolumeClaim</u>  volume  types.  Generated  <u>hostPath</u>
       volume types are one of three subtypes depending on the state of the host path: <u>DirectoryOrCreate</u> when no
       file  or directory exists at the host, <u>Directory</u> when host path is a directory, or <u>File</u> when host path is
       a file. The value for <u>claimName</u> for a <u>persistentVolumeClaim</u> is the name of the named volume registered in
       Podman.

       Potential name conflicts between volumes are avoided by using a standard naming scheme  for  each  volume
       type.  The  <u>hostPath</u>  volume types are named according to the path on the host machine, replacing forward
       slashes with hyphens less any leading and trailing forward slashes. The special case  of  the  filesystem
       root,  <b>/</b>,  translates  to  the  name  <b>root</b>. Additionally, the name is suffixed with <b>-host</b> to avoid naming
       conflicts with <u>persistentVolumeClaim</u> volumes. Each <u>persistentVolumeClaim</u> volume type uses the name of its
       associated named volume suffixed with <b>-pvc</b>.

       Note that if an init container is created with type <b>once</b> and the pod has been started, it does  not  show
       up in the generated kube YAML as <b>once</b> type init containers are deleted after they are run. If the pod has
       only  been  created and not started, it is in the generated kube YAML.  Init containers created with type
       <b>always</b> are always generated in the kube YAML as they are never deleted, even after running to completion.

       <u>Note</u>: When using volumes and generating a  Kubernetes  YAML  for  an  unprivileged  and  rootless  podman
       container on an <b>SELinux</b> <b>enabled</b> <b>system</b>,  one of the following options must be completed:
         * Add the "privileged: true" option to the pod spec
         * Add <b>type:</b> <b>spc_t</b> under the <b>securityContext</b> <b>seLinuxOptions</b> in the pod spec
         * Relabel the volume via the CLI command <b>chcon</b> <b>-t</b> <b>container_file_t</b> <b>-R</b> <b>&lt;directory&gt;</b>

       Once  completed,  the  correct  permissions  are  in place to access the volume when the pod/container is
       created in a Kubernetes cluster.

       Note that the generated Kubernetes YAML file can be  used  to  re-run  the  deployment  via  <a href="../man1/podman-playkube.1.html">podman-play-</a>
       <a href="../man1/podman-playkube.1.html">kube</a>(1).

       Note  that if the pod being generated was created with the <b>--infra-name</b> flag set, then the generated kube
       yaml will have the <b>io.podman.annotations.infra.name</b> set  where  the  value  is  the  name  of  the  infra
       container set by the user.

       Note that both Deployment and DaemonSet can only have <b>restartPolicy</b> set to <b>Always</b>.

       Note  that Job can only have <b>restartPolicy</b> set to <b>OnFailure</b> or <b>Never</b>. By default, podman sets it to <b>Never</b>
       when generating a kube yaml using <b>kube</b> <b>generate</b>.

</pre><h4><b>OPTIONS</b></h4><pre>
   <b>--filename,</b> <b>-f=</b><u><b>filename</b></u>
       Output to the given file instead of STDOUT. If the file already exists, <b>kube</b> <b>generate</b> refuses to  replace
       it and returns an error.

   <b>--podman-only</b>
       Add podman-only reserved annotations in generated YAML file (Cannot be used by Kubernetes)

   <b>--replicas,</b> <b>-r=</b><u><b>replica</b></u> <u><b>count</b></u>
       The  value  to  set  <b>replicas</b>  to when generating a <b>Deployment</b> kind.  Note: this can only be set with the
       option <b>--type=deployment</b>.

   <b>--service,</b> <b>-s</b>
       Generate a Kubernetes service object in addition to the Pods. Used to generate  a  Service  specification
       for  the  corresponding  Pod  output.  In  particular,  if  the  object has portmap bindings, the service
       specification includes a NodePort declaration to expose the service. A random port is assigned by  Podman
       in the specification.

   <b>--type,</b> <b>-t=</b><u><b>pod</b></u> <b>|</b> <u><b>deployment</b></u> <b>|</b> <u><b>daemonset</b></u> <b>|</b> <u><b>job</b></u>
       The Kubernetes kind to generate in the YAML file. Currently, the only supported Kubernetes specifications
       are <b>Pod</b>, <b>Deployment</b>, <b>Job</b>, and <b>DaemonSet</b>. By default, the <b>Pod</b> specification is generated.

</pre><h4><b>EXAMPLES</b></h4><pre>
       Create Kubernetes Pod YAML for the specified container.

       $ podman kube generate some-mariadb
       # Save the output of this file and use kubectl create -f to import
       # it into Kubernetes.
       #
       # Created with podman-4.8.2

       # NOTE: If you generated this yaml from an unprivileged and rootless podman container on an SELinux
       # enabled system, check the podman generate kube man page for steps to follow to ensure that your pod/container
       # has the right permissions to access the volumes added.
       ---
       apiVersion: v1
       kind: Pod
       metadata:
         creationTimestamp: "2024-01-09T02:24:55Z"
         labels:
           app: some-mariadb-pod
         name: some-mariadb-pod
       spec:
         containers:
         - args:
           - mariadbd
           env:
           - name: MARIADB_ROOT_PASSWORD
             value: x
           image: docker.io/library/mariadb:10.11
           name: some-mariadb
           ports:
           - containerPort: 3306
             hostPort: 34891
           volumeMounts:
           - mountPath: /var/lib/mysql
             name: mariadb_data-pvc
         volumes:
         - name: mariadb_data-pvc
           persistentVolumeClaim:
             claimName: mariadb_data

       Create Kubernetes Deployment YAML with 3 replicas for the specified container.

       $ podman kube generate --type deployment --replicas 3 dep-ct
       r
       # Save the output of this file and use kubectl create -f to import
       # it into Kubernetes.
       #
       # Created with podman-4.5.0-dev
       apiVersion: apps/v1
       kind: Deployment
       metadata:
         creationTimestamp: "2023-03-27T20:45:08Z"
         labels:
           app: dep-ctr-pod
         name: dep-ctr-pod-deployment
       spec:
         replicas: 3
         selector:
           matchLabels:
             app: dep-ctr-pod
         template:
           metadata:
             annotations:
               io.podman.annotations.ulimit: nofile=524288:524288,nproc=127332:127332
             creationTimestamp: "2023-03-27T20:45:08Z"
             labels:
               app: dep-ctr-pod
             name: dep-ctr-pod
           spec:
             containers:
             - command:
               - top
               image: docker.io/library/alpine:latest
               name: dep-ctr

       Create  Kubernetes  Pod YAML for the specified container with the host directory <b>/home/user/my-data</b> bind-
       mounted onto the container path <b>/volume</b>.

       $ podman kube generate my-container-with-bind-mounted-data
       # Save the output of this file and use kubectl create -f to import
       # it into Kubernetes.
       #
       # Created with podman-3.1.0-dev
       apiVersion: v1
       kind: Pod
       metadata:
         creationTimestamp: "2021-03-18T16:26:08Z"
         labels:
           app: my-container-with-bind-mounted-data
         name: my-container-with-bind-mounted-data
       spec:
         containers:
         - command:
           - <a href="file:/bin/sh">/bin/sh</a>
           image: docker.io/library/alpine:latest
           name: test-bind-mount
           volumeMounts:
           - mountPath: /volume
             name: home-user-my-data-host
         restartPolicy: Never
         volumes:
         - hostPath:
             path: /home/user/my-data
             type: Directory
           name: home-user-my-data-host

       Create Kubernetes Pod YAML for the specified container with named volume <b>priceless-data</b> mounted onto  the
       container path <b>/volume</b>.

       $ podman kube generate my-container-using-priceless-data
       # Save the output of this file and use kubectl create -f to import
       # it into Kubernetes.
       #
       # Created with podman-3.1.0-dev
       apiVersion: v1
       kind: Pod
       metadata:
         creationTimestamp: "2021-03-18T16:26:08Z"
         labels:
           app: my-container-using-priceless-data
         name: my-container-using-priceless-data
       spec:
         containers:
         - command:
           - <a href="file:/bin/sh">/bin/sh</a>
           image: docker.io/library/alpine:latest
           name: test-bind-mount
           volumeMounts:
           - mountPath: /volume
             name: priceless-data-pvc
         restartPolicy: Never
         volumes:
         - name: priceless-data-pvc
           persistentVolumeClaim:
             claimName: priceless-data

       Create Kubernetes Pod YAML for the specified pod and include a service.

       $ sudo podman kube generate -s demoweb
       # Save the output of this file and use kubectl create -f to import
       # it into Kubernetes.
       #
       # Created with podman-0.12.2-dev
       apiVersion: v1
       kind: Pod
       metadata:
         creationTimestamp: 2018-12-18T15:16:06Z
         labels:
           app: demoweb
         name: demoweb-libpod
       spec:
         containers:
         - command:
           - python3
           - /root/code/graph.py
           image: quay.io/baude/demoweb:latest
           name: practicalarchimedes
           tty: true
           workingDir: /root/code
       ---
       apiVersion: v1
       kind: Service
       metadata:
         creationTimestamp: 2018-12-18T15:16:06Z
         labels:
           app: demoweb
         name: demoweb-libpod
       spec:
         ports:
         - name: "8050"
           nodePort: 31269
           port: 8050
           targetPort: 0
         selector:
           app: demoweb
         type: NodePort
       status:
         loadBalancer: {}

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man1/podman.1.html">podman</a>(1)</b>, <b><a href="../man1/podman-container.1.html">podman-container</a>(1)</b>, <b><a href="../man1/podman-pod.1.html">podman-pod</a>(1)</b>, <b><a href="../man1/podman-kube-play.1.html">podman-kube-play</a>(1)</b>, <b><a href="../man1/podman-kube-down.1.html">podman-kube-down</a>(1)</b>

</pre><h4><b>HISTORY</b></h4><pre>
       December 2018, Originally compiled by Brent Baude (bbaude at redhat dot com)

                                                                                         <u><a href="../man1/podman-kube-generate.1.html">podman-kube-generate</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>