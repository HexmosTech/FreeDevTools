<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>pkcsstats - utility to display mechanism usage statistics for openCryptoki.</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/opencryptoki">opencryptoki_3.24.0+git20250128.0462717+dfsg-0ubuntu1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       pkcsstats - utility to display mechanism usage statistics for openCryptoki.

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>pkcsstats</b> [<b>OPTIONS</b>]

       <b>pkcsstats</b> <b>--help</b>|<b>-h</b>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       Displays mechanism usage statistics for openCryptoki. Usage statistics are collected by openCryptoki on a
       per  user  basis.  For  each user, mechanism usage is counted per configured slot and mechanism. For each
       mechanism a set of counters exist, one for each cryptographic strength of the cryptographic key used with
       the mechanism.

       The available strengths are defined in the strength configuration  file  <b>/etc/opencryptoki/strength.conf</b>.
       Supported  strengths  are  112,  128,  192, and 256 representing the corresponding strength in bits.  The
       strength configuration file defines how the strength is determined for the various key types. A  strength
       of  zero  is used to count those mechanisms that do not use a key, or where the key strength is less than
       112 bits.

       <b>Note:</b> The strength does not specify the cryptographic strength of the mechanism,  but  the  cryptographic
       strength  of  the  key  used  with the mechanism (if any).  For example, usage of mechanism CKM_SHA256 is
       reported under strength 0, because no key is used  with  this  mechanism.  However,  usage  of  mechanism
       CKM_AES_CBC  is  reported under strength 128, 192, or 256, dependent on the cryptographic size of the AES
       key used with it (and the definitions in the strength configuration file).

       Statistics collection is enabled by default. It can  be  disabled  and  configured  in  the  openCryptoki
       configuration  file  <b>/etc/opencryptoki/opencryptoki.conf</b>.   By  default  only  explicit  mechanism  usage
       statistics from PKCS#11 applications are collected.

       Optionally, implicit mechanism usage  statistics  can  be  collected,  where  additional  mechanisms  are
       specified  in  mechanism  parameters. For example, RSA-PSS or RSA-OAEP allows to specify a hash mechanism
       and a mask generation function (MGF) in the mechanism parameter. ECDH allows to specify a key  derivation
       function  (KDF)  in  the  mechanism  parameter.  The  PBKDF2  mechanism allows to specify a pseudo random
       function (PRF) in the mechanism parameter.

       Also optionally, opencryptoki-internal mechanism usage statistics can be collected. This  collects  usage
       statistics for crypto operations used internally for pin handling and encryption of private token objects
       in the data store.

       <b>Note:</b>  Implicit  or  internal  mechanism  usage can not be distinguished from explicit mechanism usage of
       PKCS#11 applications in the displayed statistics.

       Statistics are collected in a POSIX shared memory segment per user. This shared memory  segment  contains
       all  counters  for  all configured slots, mechanisms, and strengths. The shared memory segments are named
       <b>var.lib.opencryptoki_stats_&lt;uid&gt;</b>, where <b>uid</b> is the numeric user-id of the user the statistics belong  to.
       The  shared  memory  segments  are  automatically  created  for  a  user  on the first attempt to collect
       statistics (when not already existent). The shared memory segments can be  deleted  using  the  <b>pkcsstats</b>
       command with the <b>--delete</b>, or <b>--delete-all</b> options.

       The  usage  of  a  mechanism is counted once when the cryptographic operation is sucessfully initialized,
       i.e. during <b>C_DigestInit</b>, <b>C_EncryptInit</b>, <b>C_DecryptInit</b>, <b>C_SignInit</b>, <b>C_SignRecoverInit</b>, and  <b>C_VerifyInit</b>.
       Multi-part   operations   involving   the   update   functions   like   <b>C_DigestUpdate</b>,  <b>C_EncryptUpdate</b>,
       <b>C_DecryptUpdate</b>, <b>C_SignUpdate</b>, and <b>C_VerifyUpdate</b>, are not counted additionally.

       Other operations such as key generation, key derivation, key wrapping and unwrapping are  counted  during
       the respective functions like <b>C_GenerateKey</b>, <b>C_GenerateKeyPair</b>, <b>C_DeriveKey</b>, <b>C_DeriveKey</b>, <b>C_UnwrapKey</b>.

</pre><h4><b>OPTIONS</b></h4><pre>
       <b>-U</b>, <b>--user</b> <u>user-id</u>
              Specifies  the user-id of the user to display, reset, or delete statistics for.  If this option is
              omitted, the statistics of the current user are displayed, resetted, or  deleted.  Only  the  <b>root</b>
              user can display, reset, or delete statistics of other users.

       <b>-S</b>, <b>--summary</b>
              Shows  the  accumulated  statistics from all users. Only the <b>root</b> user can display the accumulated
              statistics from other users.

       <b>-A</b>, <b>--all</b>
              Shows the statistics from all users. Only the <b>root</b> user can display statistics from all users.

       <b>-a</b>, <b>--all-mechs</b>
              Shows the statistics for all mechanisms, also those with all-zero counters.   If  this  option  is
              omitted, only those mechanisms are displayed where at least one counter is non-zero.

       <b>-s</b>, <b>--slot</b> <u>slot-id</u>
              Specifies the slot-id to display statistics for. If this option is omitted, the statistics for all
              configured slots are displayed.

       <b>-r</b>, <b>--reset</b>
              Resets  the  statistics  counters  for the current user, or for the user specified with the <b>--user</b>
              option. Only the <b>root</b> user can reset the statistics from other users.

       <b>-R</b>, <b>--reset-all</b>
              Resets the statistics counters for all users. Only the <b>root</b> user can  reset  the  statistics  from
              other users.

       <b>-d</b>, <b>--delete</b>
              Deletes  the shared memory segment containing the statistics counters for the current user, or for
              the user specified with the <b>--user</b> option.  Only the <b>root</b> user  can  delete  the  statistics  from
              other users.

       <b>-D</b>, <b>--delete-all</b>
              Deletes  the shared memory segment containing the statistics counters for all users. Only the <b>root</b>
              user can delete the statistics from other users.

       <b>-j</b>, <b>--json</b>
              Shows the statistics in JSON format. This is usefull to get the statistics in a  machine  readable
              format.

       <b>-h</b>, <b>--help</b>
              Displays help text and exits.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man5/opencryptoki.conf.5.html">opencryptoki.conf</a></b>(5).
       <b><a href="../man5/strength.conf.5.html">strength.conf</a></b>(5),
       <b><a href="../man7/opencryptoki.7.html">opencryptoki</a></b>(7),

3.24                                              October 2021                                      <u><a href="../man1/PKCSSTATS.1.html">PKCSSTATS</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>