<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>autopkgtest-buildvm-ubuntu-cloud - Create Ubuntu cloud image based VM for autopkgtest-virt-qemu</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/autopkgtest">autopkgtest_5.47_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       autopkgtest-buildvm-ubuntu-cloud - Create Ubuntu cloud image based VM for autopkgtest-virt-qemu

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>autopkgtest-buildvm-ubuntu-cloud</b> [<u>options</u>]

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>autopkgtest-buildvm-ubuntu-cloud</b> downloads an Ubuntu cloud image and configures it for autopkgtest's QEMU
       runner (<b>autopkgtest-virt-qemu</b>):

       *   Resize  the  image adding 20 GB to its default size (you can change this with an option), which ought
           to be sufficient for most tests.

       *   Create an user "ubuntu" with password "ubuntu".

       *   Add apt sources for "restricted" and "multiverse" components.

       *   Create an init.d script to start a root shell on ttyS1 at boot, so that <b>autopkgtest-virt-qemu</b> can  be
           used without additional arguments or logging in through ttyS0.

           You can select release, architecture, apt proxy, etc. with options. The defaults are aimed at testing
           the development series of the architecture of your host system.

</pre><h4><b>OPTIONS</b></h4><pre>
       <b>-a</b> <u>arch</u> <b>|</b> <b>--arch=</b><u>arch</u>
              Ubuntu architecture name, e. g. "i386" or "amd64". Default is the host system architecture.

       <b>-r</b> <u>codename</u> <b>|</b> <b>--release=</b><u>codename</u>
              Ubuntu  release  code  name, e. g. "trusty". Default is the current development series (this needs
              <b>python-distro-info</b> installed).

       <b>-m</b> <u>URL</u> <b>|</b> <b>--mirror=</b><u>URL</u>
              Mirror for apt (default: <b><a href="http://archive.ubuntu.com/ubuntu">http://archive.ubuntu.com/ubuntu</a></b>).

       <b>-p</b> <u>URL</u> <b>|</b> <b>--proxy=</b><u>URL</u>
              Proxy for apt. If you have an apt proxy configured on the local host, the  VM  will  automatically
              use this; otherwise there is no default.

       <b>--cloud-image-url=</b><u>URL</u>
              URL from where to download the cloud images (default: <a href="http://cloud-images.ubuntu.com">http://cloud-images.ubuntu.com</a>).

       <b>-s</b> <u>DISK_SIZE</u> <b>|</b> <b>--disk-size=</b><u>DISK_SIZE</u>
              Grow downloaded image by this size (default: 20G).

       <b>-o</b> <u>DIR</u> <b>|</b> <b>--output-dir=</b><u>DIR</u>
              Output directory for generated image (default: current directory).

       <b>--force-use-cached</b>
              Use cached image without verifying it against the currently published digests.

       <b>-q</b> <u>command</u> <b>|</b> <b>--qemu-command=</b><u>command</u>
              QEMU command to run. This defaults to the <b>qemu-system-*</b> that matches your system architecture.

       <b>-v</b> | <b>--verbose</b>
              Show VM guest and cloud-init output.

       <b>--no-apt-upgrade</b>
              Do not run apt-get dist-upgrade during initialization.

       <b>--post-command=</b><u>COMMAND</u>
              Run shell command in the VM after the setup.

       <b>--metadata=</b><u>METADATA_FILE</u>
              Use a custom cloud-init metadata file to initialize the cloud image VM.

       <b>--userdata=</b><u>USERDATA_FILE</u>
              Use a custom cloud-init userdata file to initialize the cloud image VM.

       <b>--timeout=</b><u>SECONDS</u>
              Timeout for cloud-init. Default is 3600 s.

       <b>--ram-size=</b><u>MiB</u>
              VM RAM size in MiB. Default is 512 MiB.

       <b>--cpus=</b><u>CPUS</u>
              VM number of CPUs. Default is 1.

</pre><h4><b>CONFIGURATION</b> <b>FILES</b></h4><pre>
       If  you  use  lots of options, you can put parts of, or the whole command line into a text file, with one
       line per option. E. g. you can create a file <u>trusty-i386.cfg</u> with contents like

              -rtrusty
              -ai386
              --proxy=<a href="http://mysquid.mynetwork">http://mysquid.mynetwork</a>
              -v

       and then run

              autopkgtest-buildvm-ubuntu-cloud @trusty-i386.cfg

       The contents of the configuration file will be expanded in-place as if you would have given its  contents
       on  the  command  line. Please ensure that you <b>don't</b> <b>place</b> <b>spaces</b> between short options and their values,
       they would become a part of the argument value.

</pre><h4><b>ENVIRONMENT</b></h4><pre>
       If  the   <b>$AUTOPKGTEST_KEEP_APT_SOURCES</b>   environment   variable   is   set   to   a   non-empty   value,
       <b>autopkgtest-buildvm-ubuntu-cloud</b>  will  keep  whatever  <b><a href="file:/etc/apt/sources.list">/etc/apt/sources.list</a></b>  was  set in the downloaded
       image.

       Otherwise, if the <b>$AUTOPKGTEST_APT_SOURCES_FILE</b> environment variable is set to  a  non-empty  value,  for
       example  <b>AUTOPKGTEST_APT_SOURCES_FILE=/home/me/ubuntu/sources.list</b>, then <b>autopkgtest-buildvm-ubuntu-cloud</b>
       will read that file (on the host system) and use it to  populate  <b><a href="file:/etc/apt/sources.list">/etc/apt/sources.list</a></b>  in  the  virtual
       machine; or if the <b>$AUTOPKGTEST_APT_SOURCES</b> environment variable is set to a non-empty value, for example
       <b>AUTOPKGTEST_APT_SOURCES=$(cat</b>  <b>/home/me/ubuntu/sources.list)</b>, <b>autopkgtest-buildvm-ubuntu-cloud</b> will write
       it directly into <b><a href="file:/etc/apt/sources.list">/etc/apt/sources.list</a></b> in the virtual machine.

       When <b>$AUTOPKGTEST_APT_SOURCES_FILE</b> or <b>$AUTOPKGTEST_APT_SOURCES</b> contain sources in the deb822 format, then
       sources are written  to  <b><a href="file:/etc/apt/sources.list.d/ubuntu.sources">/etc/apt/sources.list.d/ubuntu.sources</a></b>  in  the  virtual  machine,  rather  than
       <b>/etc/apt/sources.list.</b>

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man1/autopkgtest-virt-qemu.1.html">autopkgtest-virt-qemu</a></b>(1), <b><a href="../man1/autopkgtest.1.html">autopkgtest</a></b>(1), <b><a href="http://cloud-images.ubuntu.com">http://cloud-images.ubuntu.com</a></b>, <b>/usr/share/doc/autopkgtest/</b>.

</pre><h4><b>AUTHORS</b> <b>AND</b> <b>COPYRIGHT</b></h4><pre>
       <b>autopkgtest-buildvm-ubuntu-cloud</b> was written by Martin Pitt &lt;<a href="mailto:martin.pitt@ubuntu.com">martin.pitt@ubuntu.com</a>&gt;

       This manpage is part of autopkgtest, a tool for testing Debian binary packages.  autopkgtest is Copyright
       (C) 2006-2014 Canonical Ltd and others.

       See <b>/usr/share/doc/autopkgtest/CREDITS</b> for the list of contributors and full copying conditions.

Linux Programmer's Manual                             2014                   <u><a href="../man1/autopkgtest-buildvm-ubuntu-cloud.1.html">autopkgtest-buildvm-ubuntu-cloud</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>