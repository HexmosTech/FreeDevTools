<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>gfmdhost - Gfarm metadata server host maintenance command</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/gfarm-client">gfarm-client_2.7.20+dfsg-1.1ubuntu1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       gfmdhost - Gfarm metadata server host maintenance command

</pre><h4><b>SYNOPSIS</b></h4><pre>

       <b>gfmdhost</b> [-l] [-P <u>path</u>] [-1]

       <b>gfmdhost</b> [-N] [-P <u>path</u>] [-1]

       <b>gfmdhost</b> {-c | -m} [-P <u>path</u>] [-1] [-p <u>port-number</u>] [-C <u>cluster-name</u>] [-t {m | c | s}]
                {<u>metadata-server-name</u>}

       <b>gfmdhost</b> {-d} [-P <u>path</u>] [-1] {<u>metadata-server-name</u>}

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>gfmdhost</b> is used to display and maintain the information about synchronous and asynchronous replicated
       metadata servers.  <b>gfmdhost</b> has functions which can be selected by -l, -c, -m and -d options. These
       functions are mutually exclusive, and only one option among them can be specified. If none of them is
       specified, registered metadata server (gfmd host) names will be listed.

</pre><h4><b>FUNCTIONS</b></h4><pre>
       The functions of <b>gfmdhost</b> command are listed in following.

       &lt;none&gt;
           If no function is specified, all the registered gfmd hosts are displayed in alphabetical order.

       <b>-l</b>
           All registered gfmd hosts are listed with detailed information. They are grouped by the clusters and
           ordered alphabetically.

           The detailed information is displayed in the following order.

           <b>Connection</b> <b>State</b> <b>(+|||-|?|x|e|u)</b>

           "+" means that the gfmd is connected to the master gfmd, and its metadata are synchronized. "|" means
           that the gfmd is connected to the master gfmd, but its metadata have not been synchronized yet. Note
           that this may happen even on a synchronous slave gfmd, when the slave is just connecting to the
           master, or in the middle of metadata transfer even if it has been already synchronized. "-" means
           that the gfmd is not connected to the master gfmd. "?" means either the gfmd state is unknown because
           it's just after the connection was established, or the master gfmd is Gfarm-2.5.0, but this gfmdhost
           command is 2.5.1 or later. "x" means that the connection with master gfmd was established, but
           automatic synchronization was impossible because of too many metadata changes, thus, manual
           synchronization via dump and restore of the backend database is necessary. "e" means an error
           happened, and log file must be checked manually. In the case of "x" or "e", it may be displayed even
           when the slave gfmd is down. "u" means that the slave gfmd is connected to the master gfmd, but the
           state is not supported by this gfmdhost command. This column for the master gfmd is always "+".

           <b>Server</b> <b>Type</b> <b>(master|slave)</b>

           This represents whether the gfmd is master or slave.

           <b>Replication</b> <b>Type</b> <b>(sync|async|-)</b>

           "sync" means a synchronous replication. "async" means an asynchronous replication. This column for
           the master is always "-".

           <b>Configration</b> <b>of</b> <b>Master</b> <b>Candidate</b> <b>(c|m|s)</b>

           "m" means the default master gfmd, "c" means a master candidate that can be selected as a master
           gfmd, and "s" means a gfmd that is not a master candidate and only works for a slave gfmd.

           <b>Cluster</b> <b>Name</b>

           A cluster name where the gfmd belongs to. "(default)" is displayed for the default cluster.

       <b>-N</b>
           Displays a hostname and port number of the connected metadata server.

       <b>-c</b>
           Registers the gfmd host that is specified in the argument. -C, -p, -t can be optionally specified.

       <b>-m</b>
           Modifies the gfmd host that is specified in the argument. -C, -p, -t can be optionally specified.

       <b>-d</b>
           Deletes the gfmd host that is specified in the argument. The master gfmd cannot be deleted.

       <b>-?</b>
           Prints usage.

</pre><h4><b>OPTIONS</b></h4><pre>
       <b>-C</b> <u>cluster-name</u>
           This option specifies a cluster name where the gfmd host belongs to. If it is not specified, the
           default cluster is assumed. This option is only available with -c or -m option.

           The cluster name means a group of synchronous replicated metadata servers. That is, slave metadata
           servers in the same cluster with the master metadata server are synchronously replicated servers that
           can be changed to a master metadata server without any loss of metadata operations. Other metadata
           servers are asynchronously replicated servers.

       <b>-p</b> <u>port-number</u>
           This option specifies a port number of the gfmd. If it is not specified, 601 is assumed. This option
           is only available with -c or -m option.

       <b>-t</b> {m|c|s}
           This option specifies a configuration of master candidate. It is only available with -c or -m option.
           "m" means the default master, "c" means a master candidate and and "s" means a slave only gfmd. If it
           is not specified, "c" is assumed. The gfmd configured as the default master cannot be changed to a
           master candidate or slave-only directly. If the gfmd that is not the default master is changed to the
           default master by "-t m", the original default master is changed to a master candidate at the same
           time.

       <b>-P</b> <u>path</u>
           This option specifies a pathname or a Gfarm URL to identify a metadata server which will be accessed
           by this command. If not specified, "/" is used as the default value.

       <b>-1</b>
           With this option, gfmdhost only tries to connect with one metadata server specified by -P option, or
           if missing, metadb_server_host statement in gfarm2.conf file.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man5/gfarm2.conf.5.html">gfarm2.conf</a></b>(5)

Gfarm                                             11 March 2014                                      <u><a href="../man1/GFMDHOST.1.html">GFMDHOST</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>