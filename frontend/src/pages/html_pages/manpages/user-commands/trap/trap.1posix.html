<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>This  manual  page  is part of the POSIX Programmer's Manual.  The Linux implementation of this interface</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/manpages-posix">manpages-posix_2017a-2_all</a> <br><br><pre>
</pre><h4><b>PROLOG</b></h4><pre>
       This  manual  page  is part of the POSIX Programmer's Manual.  The Linux implementation of this interface
       may differ (consult the corresponding Linux manual page for details of Linux behavior), or the  interface
       may not be implemented on Linux.

</pre><h4><b>NAME</b></h4><pre>
       trap — trap signals

</pre><h4><b>SYNOPSIS</b></h4><pre>
       trap <u>n</u> <b>[</b><u>condition</u>...<b>]</b>
       trap <b>[</b><u>action</u> <u>condition</u>...<b>]</b>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       If  the  first  operand is an unsigned decimal integer, the shell shall treat all operands as conditions,
       and shall reset each condition to the default value. Otherwise, if  there  are  operands,  the  first  is
       treated as an action and the remaining as conditions.

       If  <u>action</u> is <b>'-'</b>, the shell shall reset each <u>condition</u> to the default value. If <u>action</u> is null (<b>""</b>), the
       shell shall ignore each specified <u>condition</u> if it arises. Otherwise, the argument <u>action</u>  shall  be  read
       and  executed  by  the  shell  when  one of the corresponding conditions arises. The action of <u>trap</u> shall
       override a previous action (either default action or one explicitly set). The value  of  <b>"$?"</b>  after  the
       <u>trap</u> action completes shall be the value it had before <u>trap</u> was invoked.

       The  condition  can be EXIT, 0 (equivalent to EXIT), or a signal specified using a symbolic name, without
       the SIG prefix, as listed in the tables of signal names in the <u>&lt;signal.h&gt;</u>  header  defined  in  the  Base
       Definitions   volume   of  POSIX.1‐2017,  <u>Chapter</u>  <u>13</u>,  <u>Headers</u>;  for  example,  HUP,  INT,  QUIT,  TERM.
       Implementations may permit names with the SIG prefix or ignore case in  signal  names  as  an  extension.
       Setting a trap for SIGKILL or SIGSTOP produces undefined results.

       The  environment  in  which  the  shell  executes  a  <u>trap</u>  on EXIT shall be identical to the environment
       immediately after the last command executed before the <u>trap</u> on EXIT was taken.

       Each time <u>trap</u> is invoked, the <u>action</u> argument shall be processed in a manner equivalent to:

           eval <u>action</u>

       Signals that were ignored on entry to a non-interactive shell cannot be trapped  or  reset,  although  no
       error  need be reported when attempting to do so. An interactive shell may reset or catch signals ignored
       on entry. Traps shall remain in place for a given  shell  until  explicitly  changed  with  another  <u>trap</u>
       command.

       When  a subshell is entered, traps that are not being ignored shall be set to the default actions, except
       in the case of a command substitution containing only a single <u>trap</u> command, when the traps need  not  be
       altered.  Implementations may check for this case using only lexical analysis; for example, if <u>`trap`</u> and
       <u>$(</u> <u>trap</u> <u>--</u> <u>)</u> do not alter the traps in the subshell, cases such as  assigning  <u>var=trap</u>  and  then  using
       <u>$($var)</u>  may  still  alter  them.  This  does  not  imply that the <u>trap</u> command cannot be used within the
       subshell to set new traps.

       The <u>trap</u> command with no operands shall write to standard output a list of commands associated with  each
       condition.  If  the  command  is executed in a subshell, the implementation does not perform the optional
       check described above for a command substitution containing only a  single  <u>trap</u>  command,  and  no  <u>trap</u>
       commands  with  operands  have  been  executed  since  entry  to the subshell, the list shall contain the
       commands that were associated with  each  condition  immediately  before  the  subshell  environment  was
       entered.   Otherwise,  the  list shall contain the commands currently associated with each condition. The
       format shall be:

           "trap -- %s %s ...\n", &lt;<u>action</u>&gt;, &lt;<u>condition</u>&gt; ...

       The shell shall format the output, including the proper use of  quoting,  so  that  it  is  suitable  for
       reinput to the shell as commands that achieve the same trapping results. For example:

           save_traps=$(trap)
           ...
           eval "$save_traps"

       XSI-conformant  systems  also  allow  numeric  signal  numbers  for  the  conditions corresponding to the
       following signal names:

       1     SIGHUP

       2     SIGINT

       3     SIGQUIT

       6     SIGABRT

       9     SIGKILL

       14    SIGALRM

       15    SIGTERM

       The <u>trap</u> special built-in shall conform to the Base Definitions volume  of  POSIX.1‐2017,  <u>Section</u>  <u>12.2</u>,
       <u>Utility</u> <u>Syntax</u> <u>Guidelines</u>.

</pre><h4><b>OPTIONS</b></h4><pre>
       None.

</pre><h4><b>OPERANDS</b></h4><pre>
       See the DESCRIPTION.

</pre><h4><b>STDIN</b></h4><pre>
       Not used.

</pre><h4><b>INPUT</b> <b>FILES</b></h4><pre>
       None.

</pre><h4><b>ENVIRONMENT</b> <b>VARIABLES</b></h4><pre>
       None.

</pre><h4><b>ASYNCHRONOUS</b> <b>EVENTS</b></h4><pre>
       Default.

</pre><h4><b>STDOUT</b></h4><pre>
       See the DESCRIPTION.

</pre><h4><b>STDERR</b></h4><pre>
       The standard error shall be used only for diagnostic messages.

</pre><h4><b>OUTPUT</b> <b>FILES</b></h4><pre>
       None.

</pre><h4><b>EXTENDED</b> <b>DESCRIPTION</b></h4><pre>
       None.

</pre><h4><b>EXIT</b> <b>STATUS</b></h4><pre>
       If the trap name or number is invalid, a non-zero exit status shall be returned; otherwise, zero shall be
       returned.  For  both interactive and non-interactive shells, invalid signal names or numbers shall not be
       considered a syntax error and do not cause the shell to abort.

</pre><h4><b>CONSEQUENCES</b> <b>OF</b> <b>ERRORS</b></h4><pre>
       Default.

       <u>The</u> <u>following</u> <u>sections</u> <u>are</u> <u>informative.</u>

</pre><h4><b>APPLICATION</b> <b>USAGE</b></h4><pre>
       None.

</pre><h4><b>EXAMPLES</b></h4><pre>
       Write out a list of all traps and actions:

           trap

       Set a trap so the <u>logout</u> utility in the directory referred to by the <u>HOME</u> environment  variable  executes
       when the shell terminates:

           trap '"$HOME"/logout' EXIT

       or:

           trap '"$HOME"/logout' 0

       Unset traps on INT, QUIT, TERM, and EXIT:

           trap - INT QUIT TERM EXIT

</pre><h4><b>RATIONALE</b></h4><pre>
       Implementations  may  permit lowercase signal names as an extension.  Implementations may also accept the
       names with the SIG prefix; no known historical shell does so. The <u>trap</u> and <u>kill</u> utilities in this  volume
       of  POSIX.1‐2017  are  now  consistent  in  their  omission of the SIG prefix for signal names. Some <u>kill</u>
       implementations do not allow the prefix, and <u>kill</u> <b>-l</b> lists the signals without prefixes.

       Trapping SIGKILL or SIGSTOP is syntactically accepted by some historical implementations, but it  has  no
       effect. Portable POSIX applications cannot attempt to trap these signals.

       The  output  format  is  not  historical  practice.  Since  the output of historical <u>trap</u> commands is not
       portable (because numeric signal values are not portable) and had to change to become so, an  opportunity
       was taken to format the output in a way that a shell script could use to save and then later reuse a trap
       if it wanted.

       The  KornShell  uses an <b>ERR</b> trap that is triggered whenever <u>set</u> <b>-e</b> would cause an exit. This is allowable
       as an extension, but was not mandated, as other shells have not used it.

       The text about the environment for the EXIT trap invalidates the behavior of some historical versions  of
       interactive  shells  which,  for  example,  close  the  standard  input before executing a trap on 0. For
       example, in some historical interactive shell sessions the following trap on 0 would always print <b>"--"</b>:

           trap 'read foo; echo "-$foo-"' 0

       The command:

           trap 'eval " $cmd"' 0

       causes the contents of the shell variable <u>cmd</u> to be executed as a command when the shell exits. Using:

           trap '$cmd' 0

       does not work correctly if <u>cmd</u> contains any special characters such as quoting or redirections. Using:

           trap " $cmd" 0

       also works (the leading &lt;space&gt; character protects against unlikely cases where <u>cmd</u> is a decimal  integer
       or begins with <b>'-'</b>), but it expands the <u>cmd</u> variable when the <u>trap</u> command is executed, not when the exit
       action is executed.

</pre><h4><b>FUTURE</b> <b>DIRECTIONS</b></h4><pre>
       None.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <u>Section</u> <u>2.14</u>, <u>Special</u> <u>Built-In</u> <u>Utilities</u>

       The Base Definitions volume of POSIX.1‐2017, <u>Section</u> <u>12.2</u>, <u>Utility</u> <u>Syntax</u> <u>Guidelines</u>, <b>&lt;signal.h&gt;</b>

</pre><h4><b>COPYRIGHT</b></h4><pre>
       Portions of this text are reprinted and reproduced in electronic form from IEEE Std 1003.1-2017, Standard
       for  Information  Technology  --  Portable  Operating  System  Interface  (POSIX),  The  Open  Group Base
       Specifications Issue 7, 2018 Edition, Copyright (C) 2018 by the Institute of Electrical  and  Electronics
       Engineers, Inc and The Open Group.  In the event of any discrepancy between this version and the original
       IEEE  and The Open Group Standard, the original IEEE and The Open Group Standard is the referee document.
       The original Standard can be obtained online at <a href="http://www.opengroup.org/unix/online.html">http://www.opengroup.org/unix/online.html</a> .

       Any typographical or formatting errors that appear in this page are most likely to have  been  introduced
       during   the   conversion  of  the  source  files  to  man  page  format.  To  report  such  errors,  see
       https://www.kernel.org/doc/man-pages/reporting_bugs.html .

IEEE/The Open Group                                   2017                                          <u><a href="../man1POSIX/TRAP.1POSIX.html">TRAP</a></u>(1POSIX)
</pre>
 </div>
</div></section>
</div>
</body>
</html>