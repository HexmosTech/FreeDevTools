<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>lbdb_dotlock - Lock mail spool files.</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/lbdb">lbdb_0.56-1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       lbdb_dotlock - Lock mail spool files.

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>lbdb_dotlock</b> [-t|-f|-u|-d] [-r <u>retries</u>] <u>file</u>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>dotlock</b>  implements  the traditional mail spool file locking method: To lock <u>file</u>, a file named <u>file</u>.lock
       is created.

</pre><h4><b>OPTIONS</b></h4><pre>
       -t     Just try.  <b>dotlock</b> won't actually lock a file, but inform the invoking  process  if  it's  at  all
              possible to lock <u>file</u>.

       -f     Force  the  lock.   If  another process holds a lock on <u>file</u> longer than a certain amount of time,
              <b>dotlock</b> will break that lock by removing the lockfile.

       -u     Unlock.  <b>dotlock</b> will remove <u>file</u>.lock.

       -d     Delete.  <b>dotlock</b> will lock <u>file</u>, remove it if it has length 0, and afterwards remove <u>file</u>.lock.

       -r <u>retries</u>
              This command line option tells <b>dotlock</b> to try locking  <u>retries</u>  times  before  giving  up  or  (if
              invoked with the <b>-f</b> command line option) break a lock.  The default value is 5.  <b>dotlock</b> waits one
              second between successive locking attempts.

</pre><h4><b>FILES</b></h4><pre>
       <u>file</u>.lock
              The lock file <b>dotlock</b> generates.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man2/fcntl.2.html">fcntl</a></b>(2), <b><a href="../man2/flock.2.html">flock</a></b>(2), <b><a href="../man1/lockfile.1.html">lockfile</a></b>(1), <b><a href="../man1/lbdb-fetchaddr.1.html">lbdb-fetchaddr</a></b>(1)

</pre><h4><b>DIAGNOSTICS</b></h4><pre>
       <b>dotlock</b> gives all diagnostics in its return values:

       <b>0</b> <b>-</b> <b>DL_EX_OK</b>
              The program was successful.

       <b>1</b> <b>-</b> <b>DL_EX_ERROR</b>
              An  unspecified  error such as bad command line parameters, lack of system memory and the like has
              occurred.

       <b>3</b> <b>-</b> <b>DL_EX_EXIST</b>
              The user wants to lock a file which has been locked by another process  already.   If  <b>dotlock</b>  is
              invoked  with  the  <b>-f</b>  command  line  option,  <b>dotlock</b> won't generate this error, but break other
              processes' locks.

       <b>4</b> <b>-</b> <b>DL_EX_NEED_RPIVS</b>
              This return value only occurs if <b>dotlock</b> has been invoked with the <b>-t</b>  command  line  option.   It
              means that <b>dotlock</b> will have to use its group mail privileges to lock <u>file</u>.

       <b>5</b> <b>-</b> <b>DL_EX_IMPOSSIBLE</b>
              This  return  value  only  occurs if <b>dotlock</b> has been invoked with the <b>-t</b> command line option.  It
              means that <b>dotlock</b> is unable to lock <u>file</u>.

</pre><h4><b>NOTES</b></h4><pre>
       <b>dotlock</b> tries to implement an NFS-safe dotlocking method which was borrowed from <b><a href="../man1/lockfile.1.html">lockfile</a></b>(1).

       If the user can't open <u>file</u> for reading with his normal privileges, dotlock will return  the  <b>DL_EX_ERROR</b>
       exit  value  to  avoid  certain  attacks against other users' spool files. The code carefully avoids race
       conditions when checking permissions; for details of all this see the comments in dotlock.c.

</pre><h4><b>HISTORY</b></h4><pre>
       <b>dotlock</b> is part of the Mutt mail user agent package.  It has been created  to  avoid  running  mutt  with
       group mail privileges.

</pre><h4><b>AUTHOR</b></h4><pre>
       Thomas Roessler &lt;<a href="mailto:roessler@guug.de">roessler@guug.de</a>&gt;

Unix                                              JANUARY 2016                                        <u><a href="../man1/dotlock.1.html">dotlock</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>