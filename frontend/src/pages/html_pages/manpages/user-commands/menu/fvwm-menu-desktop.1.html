<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>fvwm-menu-desktop - Reads XDG menu files and creates Fvwm menus</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/jammy/+package/fvwm">fvwm_2.6.8-1build1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       fvwm-menu-desktop - Reads XDG menu files and creates Fvwm menus

</pre><h4><b>SYNOPSIS</b></h4><pre>
       fvwm-menu-desktop  [  <b>--help</b>|<b>-h</b> ] [ <b>--version</b> ] [ <b>--install-prefix</b> <u>DIR</u> ] [ <b>--desktop</b> <u>NAME</u> ] [ <b>--menu-type</b>
       <u>NAME</u> ] [ <b>--theme</b> <u>NAME</u> ] [ <b>--with-titles</b>|<b>-w</b> ] [ <b>--without-titles</b> ] [ <b>--enable-mini-icons</b> ] [ <b>--size</b>|<b>-s</b> <u>NUM</u>
       ] [ <b>--mini-icon-dir</b> <u>DIR</u> ] [ <b>--app-icon</b> <u>NAME</u> ] [ <b>--dir-icon</b> <u>NAME</u> ] [ <b>--title</b>|<b>-t</b> <u>NAME</u> ] [  <b>--insert-in-menu</b>
       <u>NAME</u>  ] [ <b>--get-menus</b> <u>all</u>|<u>desktop</u> ] [ <b>--set-menus</b> <u>menu_paths</u> ] [ <b>--all-menus</b> ] [ <b>--include-items</b> <u>NAME</u> ] [
       <b>--regen-cmd</b> <u>CMD</u> ] [ <b>--term-cmd</b> <u>CMD</u> ] [ <b>--dynamic</b> ] [ <b>--menu-error</b>|<b>-e</b> ] [ <b>--verbose</b>|<b>-v</b> ]

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This is a python script which parses XDG menus definitions to build corresponding fvwm menus. This script
       depends on python-xdg to run.

</pre><h4><b>OPTIONS</b></h4><pre>
       Main Options

       <b>--help</b> Show the help and exit.

       <b>--version</b>
              Show the version and exit.

       <b>--get-menus</b> <u>all</u>|<u>desktop</u>
              Prints a space separated list of full menu paths found on the system.  <u>all</u> will  print  all  menus
              found  on the system except empty ones.  <u>desktop</u> will print the menu(s) that would be generated by
              the script.

              No menu generation is done.

       <b>--desktop</b> <u>NAME</u>
              Optional parameter to set the <u>NAME</u> of the desktop XDG .menu  file(s)  to  use.  This  option  will
              override  any  default menus set via <b>FvwmForm-XDGMenu-Config</b> and cause the script to find menus in
              which <u>NAME</u> is a part of the file name.  Possible names are: <u>gnome</u>, <u>kde</u>, <u>xfce</u>, <u>lxde</u>, <u>debian</u>, etc.

              This option can be used in conjunction with <b>--menu-type</b> to control which .menu file(s) are used.

       <b>--menu-type</b> <u>NAME</u>
              Optional parameter to set the <u>NAME</u> of the XDG menu type to use.  This  option  will  override  any
              default  menus set via <b>FvwmForm-XDGMenu-Config</b> and cause the script to find menus in which <u>NAME</u> is
              a part of the file name.  Possible <u>NAME</u> types could be: <u>applications</u>, <u>settings</u>, <u>preferences</u>, etc.

              When used in conjunction with <b>--desktop</b>, only menus whose file name  matches  '*destkop*menutype*'
              are found. If no menus are found, the script exits with an error.

       <b>--all-menus</b>
              This  option  will  build  all menus found on the system. If used in conjunction with <b>--desktop</b> or
              <b>--menu-type</b> this will build all menus matching those settings.

       <b>--install-prefix</b> <u>DIR</u>
              Optional parameter to override the standard locations for XDG menu definitions.  Tells  <b>fvwm-menu-</b>
              <b>desktop</b>  to  look  in  <u>DIR</u>  for  .menu files instead of the standard locations /etc/xdg/menus (and
              $HOME/.config/menus if it exists).

       <b>--with-titles</b>|<b>-w</b>
              If this option is set menus are generated with titles. This is the default.  This  option  can  be
              used to override the <b>FvwmForm-XDGMenu-Config</b> default setting.

       <b>--without-titles</b>
              If this option is set menus are generated without titles. The default is to generate with titles.

       <b>--title</b>|<b>-t</b> <u>NAME</u>
              Option  to  define  the  menu  title  <u>NAME</u>  of the top menu used by Fvwm's <b>Menu</b> or <b>Popup</b> commands.
              Default is "XDGMenu".

       <b>--include-items</b> <u>NAME</u>
              This option controls if the additional menu items 'Regenerate' and 'Configure' are included in the
              top level menu. <u>NAME</u> can be one of <u>regenerate</u>, <u>config</u>, <u>both</u>, or <u>none</u>. The default is <u>both</u>.

       <b>--regen-cmd</b> <u>CMD</u>
              This option sets the fvwm command <u>CMD</u> that is run when the menu item ´Regenerate' is selected. The
              default is "PipeRead `fvwm-menu-desktop`".

       <b>--term-cmd</b> <u>CMD</u>
              This option sets the terminal emulator command <u>CMD</u> that is used to to  run  terminal  applications
              in. <u>CMD</u> needs to end with an execute option, such as xterm's -e option, which will run the command
              that is appended to <u>CMD</u>. The default is "xterm -e".

              Debian specific: Per Debian policy, default changed to "x-terminal-emulator -e"

       <b>--dynamic</b>
              This   option   is   to   be  used  with  creating  dynamic  menus  using  <b>DynamicPopUpAction</b>  and
              <b>DynamicPopDownAction</b>. This adds a 'recreate' to the <b>DestroyMenu</b> command on the top level  menu  so
              those actions are not Destroyed when the menu is regenerated.

       <b>--insert-in-menu</b> <u>NAME</u>
              Option to insert generated menu(s) <b>IN</b> a menu <u>NAME</u> (its top title). This option makes it so the top
              level menu is not Destroyed and the items are added to the end.

              Note  menus  regenerated  with  this  option will append the menu items at the end of the existing
              menu. Each time the menu is regenerated new menu items appear giving a growing menu  of  duplicate
              items.   You  have to regenerate the whole menu via a function or restart fvwm. See <b>EXAMPLES</b> below
              for some solutions.

       <b>--set-menus</b> <u>menu_paths</u>
              Generates all menus listed in a space separated list of full menu paths.   This  option  overrides
              any defaults and <b>--desktop</b>|<b>--menu-type</b> settings.

       <b>--menu-error</b> |<b>-t</b>
              If  this  option  is  present  and python-xdg is not found, the script will print the error in the
              generated menu. Used in the default-config.

       <b>--verbose</b>
              Enables additional information printouts on STDERR.

       Icons Options

              By default, fvwm-menu-desktop builds menus  without  mini-icons.  To  enable  mini-icons  use  the
              following options.

              If  ImageMagick  is  installed  on  the  system,  the  script  will  resize  and copy the icons to
              $FVWM_USERDIR/.icons. This can take awhile. You should be prepared to  wait  the  first  time  you
              generate  the  icons.  Once  the  icons have been generated the script should run faster. If it is
              still to slow using icons, see <b>EXAMPLES</b> for ways to limit how often the menu is generated to speed
              things up.

       <b>--enable-mini-icons</b>
              This option enables mini-icons in the menus. If set, 24x24 mini-icons are used. If  the  specified
              icon   isn't   that  size  it  will  be  converted  if  <b>ImageMagick</b>  is  installed  and  saved  in
              $HOME/.fvwm/icons or to the directory specified with --mini-icon-dir  option.  Otherwise  no  icon
              appears in the menu for that entry.  With most distributions, all the menu entries will have mini-
              icons appropriate to the application.

       <b>--theme</b> <u>NAME</u>
              Defines  the  used  icon theme. Default is <u>gnome</u> but all others found in <a href="file:/usr/share/icons">/usr/share/icons</a> could be
              used except the <u>hicolor</u> theme because it's the default fallback theme if no icon is found.

       <b>--size</b>|<b>-s</b> <u>NUM</u>
              If --enable-mini-icons is used the <u>size</u> of the icons can changed with this parameter.  Default  is
              24.

       <b>--mini-icon-dir</b> <u>DIR</u>
              When the right size mini-icon isn't available, fvwm-menu-desktop creates icons with the right size
              in $HOME/.fvwm/icons.  If you don't want to use the default directory, $HOME/.fvwm/icons, use this
              option to specify a different folder.

       <b>--app-icon</b> <u>NAME</u>
              Sets the default application icon if no others are found. Default is ´gnome-applications'.

       <b>--dir-icon</b> <u>NAME</u>
              Sets the default directory icon if no others are found. Default is ´gnome-fs-directory'.

</pre><h4><b>USAGE</b></h4><pre>
       <b>fvwm-menu-desktop</b> outputs XDG .menu files in the syntax of fvwm menus. When <b>fvwm-menu-desktop</b> is run with
       no  options,  it  will  load  defaults from the <b>FvwmForm-XDGMenu-Config</b> file (see below) then search your
       system for suitable menu file(s). To see which menus are available on your system run:

              fvwm-menu-desktop --get-menus all

       If no menus are found you may not have any installed on your system.  By  default  menus  are  stored  as
       *.menu  files in /etc/xdg/menus, $HOME/.config/menus or the location set in $XDG_MENU_PREFIX. You can use
       <b>--install-prefix</b> to specify another location search for menus.

       Though a combination of command line options and the <b>FvwmForm-XDGMenu-Config</b> settings,  <b>fvwm-menu-desktop</b>
       can generate any combination of the menus found. To get a list of what menu(s) would be generated use the
       <b>--get-menus</b> <u>desktop</u> option. The following will list all menus generated if <b>fvwm-menu-desktop</b> was run with
       no options.

              fvwm-menu-desktop --get-menus desktop

       <b>fvwm-menu-desktop</b> determines which menu(s) to generate as follows

              If  no  config  file  is  found,  all menus will be weighted and the script will generate the best
              (highest weight) menu found.

              If a config file is found (and override options are not used) the script will generate  all  menus
              selected in <b>FvwmForm-XDGMenu-Config</b>.

              <b>--desktop</b>,  <b>--menu-type</b>, <b>--set-menus</b> and <b>--all-menus</b> will override any menus selected in <b>FvwmForm-</b>
              <b>XDGMenu-Config</b>.

              <b>--desktop</b> and <b>--menu-type</b> will only include menus whose name matches '*desktop*menutype*'. If used
              with <b>--all-menus</b>, all matching menus are generated. If used without <b>--all-menus</b>, only the  highest
              weighted menu is generated.

              <b>--set-menus</b> generates menus from the list of full path menu file names.

              <b>--all-menus</b> by itself will generate all menus found.

       By default <b>fvwm-menu-desktop</b> will generate a menu whose top level name is "XDGMenu". To tell fvwm to read
       the output of <b>fvwm-menu-desktop</b> to create the menu XDGMenu add the following to your fvwm config file:

              PipeRead 'fvwm-menu-desktop'

       <b>Warning:</b> Depending on the options used this command may be slow and fvwm will pause until this command is
       complete. See <b>EXAMPLES</b> below for more details and possible workarounds.

       Once  the  menu  is  generated  you  can  open the menu by using the command "Menu XDGMenu". You can also
       include this in the MenuFvwmRoot menu by:

              AddToMenu MenuFvwmRoot "XDG Menu" Popup XDGMenu

       <b>fvwm-menu-desktop</b> can be configured though both command line options and a <b>FvwmForm</b> GUI to customize  the
       menu(s) that get generated.

</pre><h4><b>GUI</b></h4><pre>
       <b>FvwmForm-XDGMenu-Config</b> is a <b>FvwmForm</b> interface that can be used to configure the defaults for <b>fvwm-menu-</b>
       <b>desktop</b>. You can access this from the "Configure" item in the top level menu that is generated or run the
       following from within <b>FvwmConsole</b>

              Module FvwmPerl -l fvwm-menu-desktop-config.fpl

       This  form  can be used to select which menu(s) get generated by default along with setting many (but not
       all) of the available options. When you click "Save Settings" the form will write a config  file  located
       at $FVWM_USERDIR/.FvwmForm-XDGMenu-Config that <b>fvwm-menu-desktop</b> will parse for defaults when run.

       See the help inside of <b>FvwmForm-XDGMenu-Config</b> for more information.

</pre><h4><b>EXAMPLES</b></h4><pre>
       There are many ways to setup when fvwm runs <b>fvwm-menu-desktop</b> to generate the menu. One method is to just
       generate the menu when fvwm loads and then use the GUI config tool to change any options.  To do this you
       only need to add the following to the fvwm config file:

              AddToMenu MenuFvwmRoot "XDG Menu" Popup XDGMenu
              PipeRead 'fvwm-menu-desktop'

       The  menu  is  created  once when fvwm loads. Since menu creation can sometimes be slow, this could cause
       fvwm to take longer to load than one wants.

       The menu is only generated when fvwm starts. If software is installed or removed you will have to  select
       the 'Regenerate' option to rebuild the menu.

       One  way to speed things up is to save the menu in a file and only generate the menu when 'Regenerate' is
       selected. To do this use <b>--regen-cmd</b> to call a custom function and write the  menu  to  a  file  using  a
       command like

              fvwm-menu-desktop --regen-cmd XDGRegen &gt; $FVWM_USERDIR/.XDGMenu

       Then  add  the following to the fvwm config file to define the function XDGRegen. The second to last line
       will generate the menu if the menu file doesn't exist when fvwm starts.

              DestroyFunc XDGRegen
              AddToFunc XDGRegen
              + I PipeRead 'fvwm-menu-desktop --regen-cmd XDGRegen &gt; \
                  $[FVWM_USERDIR]/.XDGMenu; echo "Nop"'
              + I Read $[FVWM_USERDIR]/.XDGMenu

              Test (!f $[FVWM_USERDIR]/.XDGMenu) XDGRegen
              Read $[FVWM_USERDIR]/.XDGMenu

       Besides creating a top level menu, <b>fvwm-menu-desktop</b> can insert the menu into an existing menu using  the
       <b>--insert-in-menu</b>  option. For example one could create the menu MenuFvwmRoot and include the XDG items at
       the end.

              DestroyMenu MenuFvwmRoot
              AddToMenu MenuFvwmRoot "Fvwm" Title
              + "Item1" Action1
                ...
              + "ItemN" ActionN
              + "" Nop
              PipeRead 'fvwm-menu-desktop --insert-in-menu MenuFvwmRoot'

       In this case the menu items are inserted at the end of the MenuFvwmRoot menu.  If no  items  are  in  the
       menu,  this  menu becomes MenuFvwmRoot. The problem here is, that you have to restart fvwm or rebuild the
       whole menu to Regenerate it because menu items cannot be removed.  To do this you could  use  a  function
       like

              DestroyFunc XDGRegen
              AddToFunc XDGRegen
              + I DestroyMenu MenuFvwmRoot
              + I AddToMenu MenuFvwmRoot "Fvwm" Title
              + I AddToMenu MenuFvwmRoot "Item1" Action1
                ...
              + I AddToMenu MenuFvwmRoot "ItemN" ActionN
              + I AddToMenu MenuFvwmRoot "" Nop
              + I PipeRead 'fvwm-menu-desktop --insert-in-menu MenuFvwmRoot \
                            --regen-cmd XDGRegen'

       Fvwm  can  also  create  menus dynamically by using <b>DynamicPopUpAction</b> and/or <b>DynamicPopDownAction</b>. These
       commands when used with a Menu will run a Function when the menu is opened. For example one could  create
       the menu XDGMenu when it is opened using

              AddToMenu XDGMenu "XDGMenu" Title
              + DynamicPopUpAction PipeRead 'fvwm-menu-desktop'

       This  will  create  the  menu when it is opened. One issue here is it will only create the menu the first
       time it is opened, and you still have to Regenerate the menu to see any changes. To create the menu  each
       time it is open used the <b>--dynamic</b> option

              AddToMenu XDGMenu "XDGMenu" Title
              + DynamicPopUpAction PipeRead 'fvwm-menu-desktop \
                                   --dynamic --include-items config'
              + DynamicPopDownAction DestroyMenu recreate XDGMenu

       This  will  now  Destroy  the  menu  when  it closed so it can be rebuilt the next time it is opened. The
       recreate flag doesn't completely destroy the menu keeping the DynamicPopUpAction and DynamicPopDownAction
       actions.  The <b>--dynamic</b> flag includes the recreate option in the generated menus.

       To insert a menu into MenuFvwmRoot and still be dynamic you need to use a  function  that  generates  the
       whole menu. For example

              DestroyFunc GenRootMenu
              AddToFunc GenRootMenu
              + I DestroyMenu recreate MenuFvwmRoot
              + I AddToMenu MenuFvwmRoot "Fvwm" Title
              + I AddToMenu MenuFvwmRoot "Item1" Action1
                ...
              + I AddToMenu MenuFvwmRoot "ItemN" ActionN
              + I AddToMenu MenuFvwmRoot "" Nop
              + PipeRead `fvwm-menu-desktop --insert-in-menu MenuFvwmRoot \
                         --include-items config`

              AddToMenu MenuFvwmRoot "Fvwm" Title
              + DynamicPopUpAction GenRootMenu
              + DynamicPopDownAction DestroyMenu recreate MenuFvwmRoot

</pre><h4><b>BUGS</b></h4><pre>
       The  whole  process  of  creating  menus  from  files is slow.  Otherwise report bugs to the fvwm-workers
       mailing list &lt;<a href="mailto:fvwm-workers@fvwm.org">fvwm-workers@fvwm.org</a>&gt;.

</pre><h4><b>AUTHORS</b></h4><pre>
       This script is based on fvwm-xdg-menu.py written by Piotr Zielinski (<a href="http://www.cl.cam.ac.uk/~pz215/">http://www.cl.cam.ac.uk/~pz215/</a>) who
       assigned Licence: GPL 2 Date: 03.12.2005.

       The script was reworked to replace the existing fvwm-menu-desktop perl script by the fvwm-workers.

</pre><h4><b>COPYING</b></h4><pre>
       The script is distributed by the same terms as fvwm itself. See GNU General Public License for details.

3rd Berkeley Distribution                   06 November 2016 (2.6.8)                        <u><a href="../man1/fvwm-menu-desktop.1.html">fvwm-menu-desktop</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>