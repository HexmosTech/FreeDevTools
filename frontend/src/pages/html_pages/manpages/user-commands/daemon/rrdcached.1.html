<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>rrdcached - Data caching daemon for rrdtool</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/rrdcached">rrdcached_1.7.2-4.2ubuntu2_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       rrdcached - Data caching daemon for rrdtool

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>rrdcached</b> [<b>-a</b> <u>alloc_size</u>] [<b>-b</b> <u>base_dir</u> [<b>-B</b>]] [<b>-F</b>] [<b>-f</b> <u>timeout</u>] [<b>-G</b> <u>group</u>]] [<b>-g</b>] [<b>-j</b> <u>journal_dir</u>] [<b>-L</b>]
       [<b>-l</b> <u>address</u>] [<b>-m</b> <u>mode</u>] [<b>-O</b>] [<b>-o</b> <u>log_file</u>] [<b>-P</b> <u>permissions</u>] [<b>-p</b> <u>pid_file</u>] [<b>-R</b>] [<b>-s</b> <u>group</u>]
       [<b>-t</b> <u>write_threads</u>] [<b>-U</b> <u>user</u>]] [<b>-V</b> <u>log_level</u>] [<b>-w</b> <u>timeout</u>] [<b>-z</b> <u>delay</u>]

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>rrdcached</b> is a daemon that receives updates to existing RRD files, accumulates them and, if enough have
       been received or a defined time has passed, writes the updates to the RRD file. A <u>flush</u> command may be
       used to force writing of values to disk, so that graphing facilities and similar can work with up-to-date
       data.

       The daemon was written with big setups in mind. Those setups usually run into IO related problems sooner
       or later for reasons that are beyond the scope of this document. Check the wiki at the RRDtool homepage
       for details. Also check "SECURITY CONSIDERATIONS" below before using this daemon! A detailed description
       of how the daemon operates can be found in the "HOW IT WORKS" section below.

</pre><h4><b>OPTIONS</b></h4><pre>
       <b>-l</b> <u>address</u>
           Tells  the  daemon  to bind to <u>address</u> and accept incoming TCP connections on that socket. If <u>address</u>
           begins with "unix:", everything following that prefix is interpreted as the path  to  a  UNIX  domain
           socket. Otherwise the address or node name are resolved using getaddrinfo().

           For network sockets, a port may be specified by using the form "<b>[</b><u>address</u><b>]:</b><u>port</u>". If the address is an
           IPv4  address  or  a fully qualified domain name (i. e. the address contains at least one dot (".")),
           the square brackets can be omitted, resulting in the (simpler) "<u>address</u><b>:</b><u>port</u>"  pattern.  The  default
           port is <b>42217</b>. If you specify a network socket, it is mandatory to read the "SECURITY CONSIDERATIONS"
           section.

           The following formats are accepted. Please note that the address of the UNIX domain socket <b>must</b> start
           with a slash in the second case!

              unix:&lt;/path/to/unix.sock&gt;
              /&lt;path/to/unix.sock&gt;
              &lt;hostname-or-ip&gt;
              [&lt;hostname-or-ip&gt;]:&lt;port&gt;
              &lt;hostname-or-ipv4&gt;:&lt;port&gt;

           Given  a  port  without  a host (e.g. "-l :42217") the daemon will listen on that port on all network
           interfaces.  Use "-L" to avoid the need to explicitly  provide  the  port  if  the  default  port  is
           desired.

           If  no  <b>-l</b>  option  is  not  specified the default address, "unix:/tmp/rrdcached.sock", will be used.
           Multiple <b>-l</b> options may be provided.

       <b>-L</b>  Tells the daemon to bind to the default TCP port on all available interfaces.  It  is  equivalent  to
           "-l ''" without the confusion of the empty string parameter.

       <b>-s</b> <u>group_name</u>|<u>gid</u>
           Set  the  group  permissions of a UNIX domain socket. The option accepts either a numeric group id or
           group name. That group will then have both read and write permissions  (the  socket  will  have  file
           permissions  0760) for the socket and, therefore, is able to send commands to the daemon. This may be
           useful in cases where you cannot easily run all RRD processes with the  same  user  privileges  (e.g.
           graph generating CGI scripts that typically run in the permission context of the web server).

           This  option  affects  the  <u>following</u> UNIX socket addresses (the following <b>-l</b> options) or the default
           socket (if no <b>-l</b> options have been specified), i.e., you may specify different settings for different
           sockets.

           The default is not to change ownership or permissions  of  the  socket  and,  thus,  use  the  system
           default.

       <b>-m</b> <u>mode</u>
           Set the file permissions of a UNIX domain socket. The option accepts an octal number representing the
           bit pattern for the mode (see <b><a href="../man1/chmod.1.html">chmod</a></b>(1) for details).

           Please note that not all systems honor this setting. On Linux, read/write permissions are required to
           connect  to a UNIX socket. However, many BSD-derived systems ignore permissions for UNIX sockets. See
           <b><a href="../man7/unix.7.html">unix</a></b>(7) for details.

           This option affects the <u>following</u> UNIX socket addresses (the following <b>-l</b>  options)  or  the  default
           socket (if no <b>-l</b> options have been specified), i.e., you may specify different settings for different
           sockets.

           The  default  is  not  to  change  ownership  or  permissions of the socket and, thus, use the system
           default.

       <b>-P</b> <u>command</u>[,<u>command</u>[,...]]
           Specifies the commands accepted via both a network and a UNIX socket. This allows  administrators  of
           <u>RRDCacheD</u> to control the actions accepted from various sources.

           The  arguments  given  to the <b>-P</b> option is a comma separated list of commands.  For example, to allow
           one the "FLUSH" and "PENDING" commands one could specify:

             rrdcached -P FLUSH,PENDING $MORE_ARGUMENTS

           The <b>-P</b> option affects the <u>following</u> socket addresses (the following <b>-l</b> options) or the default socket
           (if no <b>-l</b> options have been specified). In the  following  example,  only  the  IPv4  network  socket
           (address 10.0.0.1) will be restricted to the "FLUSH" and "PENDING" commands:

             rrdcached -l unix:/some/path -P FLUSH,PENDING -l 10.0.0.1

           A  complete  list of available commands can be found in the section "Valid Commands" below. There are
           two minor special exceptions:

           •   The "HELP" and "QUIT" commands are always allowed.

           •   If the "BATCH" command is accepted, the <b>.</b> command will automatically be accepted, too.

           Please also read "SECURITY CONSIDERATIONS" below.

       <b>-V</b> <u>log_level</u>
           rrdcached under load can severely flood the logs. This command  line  option  specifies  the  maximum
           log_level to be used, meaning that a message with verbosity <u>higher</u> than log_level is muted (LOG_EMERG
           being the lowest and LOG_DEBUG highest).

           Accepted  values  for  "log_level"  (lowest  to  highest  verbosity): LOG_EMERG, LOG_ALERT, LOG_CRIT,
           LOG_ERR, LOG_WARNING, LOG_NOTICE, LOG_INFO, LOG_DEBUG

           Default log level when this flag is <u>NOT</u> present: <b>LOG_ERR</b>

           See also: <u>syslog.h</u>

       <b>-o</b> <u>log_file</u>
           Log to the given file instead of syslog.

       <b>-w</b> <u>timeout</u>
           Data is written to disk every <u>timeout</u> seconds.  An optional suffix may be used (e.g. "5m" instead  of
           300 seconds).  If this option is not specified the default interval of 300 seconds will be used.

       <b>-z</b> <u>delay</u>
           If  specified,  rrdcached  will  delay  writing  of  each  RRD  for a random number of seconds in the
           range [0,<u>delay</u>).  This will avoid too many writes being queued simultaneously.  This value should  be
           no  greater than the value specified in <b>-w</b>.  An optional suffix may be used (e.g. "3m" instead of 180
           seconds).  By default, there is no delay.

       <b>-f</b> <u>timeout</u>
           Every <u>timeout</u> seconds the entire cache is searched for old values which are  written  to  disk.  This
           only  concerns  files  to  which  updates  have  stopped,  so  setting  this to a high value, such as
           3600 seconds, is acceptable in most cases.  An optional suffix may be used (e.g. "1h" instead of 3600
           seconds).  This timeout defaults to 3600 seconds.

       <b>-p</b> <u>file</u>
           Sets   the   name   and   location   of   the   PID-file.   If   not    specified,    the    default,
           "<u>$localstatedir</u>/run/rrdcached.pid" will be used.

       <b>-t</b> <u>write_threads</u>
           Specifies  the  number  of  threads  used  for writing RRD files.  The default is 4.  Increasing this
           number will allow rrdcached to have more simultaneous I/O requests into the kernel.  This  may  allow
           the kernel to re-order disk writes, resulting in better disk throughput.

       <b>-j</b> <u>dir</u>
           Write  updates  to  a journal in <u>dir</u>.  In the event of a program or system crash, this will allow the
           daemon to write any updates that were pending at the time of the crash.

           On startup, the daemon will check for journal files in this directory.  If found, all updates therein
           will be read into memory before the daemon starts accepting new connections.

           The journal will be rotated with the same frequency as the flush timer given by <b>-f</b>.

           When journaling is enabled, the daemon will use a fast shutdown procedure.  Rather than flushing  all
           files  to disk, it will make sure the journal is properly written and exit immediately.  Although the
           RRD data files are not fully up-to-date, no information is lost; all pending updates will be replayed
           from the journal next time the daemon starts up.

           To disable fast shutdown, use the <b>-F</b> option.

       <b>-F</b>  ALWAYS flush all updates to the RRD data files when the daemon is shut down,  regardless  of  journal
           setting.

       <b>-g</b>  Run in the foreground.  The daemon will not <b>fork()</b>.

       <b>-b</b> <u>dir</u>
           The daemon will change into a specific directory at startup. All files passed to the daemon, that are
           specified  by a <b>relative</b> path, will be interpreted to be relative to this directory. If not given the
           default, "<a href="file:/tmp">/tmp</a>", will be used.

             +------------------------+------------------------+
             ! Command line           ! File updated           !
             +------------------------+------------------------+
             ! foo.rrd                ! /tmp/foo.rrd           !
             ! foo/bar.rrd            ! /tmp/foo/bar.rrd       !
             ! /var/lib/rrd/foo.rrd   ! /var/lib/rrd/foo.rrd   !
             +------------------------+------------------------+
             Paths given on the command  line and paths actually
             updated by the daemon,  assuming the base directory
             "<a href="file:/tmp">/tmp</a>".

           <b>WARNING:</b> The paths up to and including the base directory <b>MUST</b>  <b>NOT</b>  <b>BE</b>  symbolic  links.   In  other
           words, if the base directory is specified as:

               -b /base/dir/somewhere

           ... then <b>NONE</b> of the following should be symbolic links:

               /base
               /base/dir
               /base/dir/somewhere

       <b>-B</b>  Only  permit writes into the base directory specified in <b>-b</b> (and any sub-directories).  This does <b>NOT</b>
           detect symbolic links.  Paths containing "../" will also be blocked.

       <b>-R</b>  Permit recursive subdirectory  creation  in  the  base  directory  specified  in  <b>-b</b>  (and  any  sub-
           directories). Can only be used when <b>-B</b> is also set.

       <b>-a</b> <u>alloc_size</u>
           Allocate  value  pointers in chunks of <u>alloc_size</u>.  This may improve CPU utilization on machines with
           slow realloc() implementations, in exchange for slightly  higher  memory  utilization.   The  default
           is 1.  Do not set this more than the <b>-w</b> value divided by your average RRD step size.

       <b>-O</b>  Prevent  the  CREATE  command  from  overwriting existing files, even when it is instructed to do so.
           This is for added security.

       <b>-G</b> -<u>group</u>
           When running as daemon and invoked from a privileged account, reset  group  privileges  to  those  of
           <u>group</u>.   The  group  may  be  specified  as  a  name  or  as a group ID.  The daemon will exit with a
           diagnostic if it cannot successfully transition to the specified group.

       <b>-U</b> -<u>user</u>
           When running as daemon and invoked from a privileged account, reset user privileges to those of <u>user</u>.
           The user may be specified as a name or as a user ID.  The daemon will exit with a  diagnostic  if  it
           cannot successfully transition to the specified user.

</pre><h4><b>AFFECTED</b> <b>RRDTOOL</b> <b>COMMANDS</b></h4><pre>
       The following commands may be made aware of the <b>rrdcached</b> using the command line argument <b>--daemon</b> or the
       environment variable <b>RRDCACHED_ADDRESS</b>:

       •   dump

       •   fetch

       •   flush

       •   graph

       •   graphv

       •   info

       •   first

       •   last

       •   lastupdate

       •   update

       •   xport

       •   create

       •   list

       The  <b>update</b>  command  can send values to the daemon instead of writing them to the disk itself. All other
       commands can send a <b>FLUSH</b> command (see below) to the daemon before accessing the files, so they work with
       up-to-date data even if the cache timeout is large.

</pre><h4><b>ERROR</b> <b>REPORTING</b></h4><pre>
       The daemon reports errors in one of two ways: During startup, error messages are printed to "STDERR". One
       of the steps when starting up is to fork to the background and closing  "STDERR"  -  after  this  writing
       directly  to the user is no longer possible. Once this has happened, the daemon will send log messages to
       the system logging daemon using <b><a href="../man3/syslog.3.html">syslog</a></b>(3). The facility used is "LOG_DAEMON".

</pre><h4><b>HOW</b> <b>IT</b> <b>WORKS</b></h4><pre>
       When receiving an update, <b>rrdcached</b> does not write to disk but looks for an entry for that  file  in  its
       internal  tree.  If  not  found,  an  entry  is created including the current time (called "First" in the
       diagram below). This time is <b>not</b> the time specified on the command line but the time the operating system
       considers to be "now". The value and time of the value (called "Time" in the diagram below) are  appended
       to the tree node.

       When  appending  a  value  to  a  tree node, it is checked whether it's time to write the values to disk.
       Values are written to disk if "now() - First &gt;= timeout", where "timeout" is the timeout specified  using
       the <b>-w</b> option, see "OPTIONS". If the values are "old enough" they will be enqueued in the "update queue",
       i. e.  they  will be appended to the linked list shown below.  Because the tree nodes and the elements of
       the linked list are the same data structures in memory, any update  to  a  file  that  has  already  been
       enqueued will be written with the next write to the RRD file, too.

       A  separate  "update thread" constantly dequeues the first element in the update queue and writes all its
       values to the appropriate file. So as long as the update queue is not empty  files  are  written  at  the
       highest possible rate.

       Since  the  timeout  of  files is checked only when new values are added to the file, "dead" files, i. e.
       files that are not updated anymore, would never be written  to  disk.  Therefore,  every  now  and  then,
       controlled by the <b>-f</b> option, the entire tree is walked and all "old" values are enqueued. Since this only
       affects "dead" files and walking the tree is relatively expensive, you should set the "flush interval" to
       a reasonably high value. The default is 3600 seconds (one hour).

       The  downside of caching values is that they won't show up in graphs generated from the RRD files. To get
       around this, the daemon provides the "flush command" to flush specific files. This means that the file is
       inserted at the <b>head</b> of the update queue or moved there if it is already enqueued. The flush command will
       return only after the file's pending updates have been written to disk.

        +------+   +------+                               +------+
        ! head !   ! root !                               ! tail !
        +---+--+   +---+--+                               +---+--+
            !         /\                                      !
            !        /  \                                     !
            !       /\  /\                                    !
            !      /\/\ \ `----------------- ... --------,    !
            V     /      `-------,                       !    V
        +---+----+---+    +------+-----+             +---+----+---+
        ! File:  foo !    ! File:  bar !             ! File:  qux !
        ! First: 101 !    ! First: 119 !             ! First: 180 !
        ! Next:&amp;bar -+---&gt;! Next:&amp;... -+---&gt; ... ---&gt;! Next:NULL  !
        | Prev:NULL  !&lt;---+-Prev:&amp;foo  !&lt;--- ... ----+-Prev: &amp;... !
        +============+    +============+             +============+
        ! Time:  100 !    ! Time:  120 !             ! Time:  180 !
        ! Value:  10 !    ! Value: 0.1 !             ! Value: 2,2 !
        +------------+    +------------+             +------------+
        ! Time:  110 !    ! Time:  130 !             ! Time:  190 !
        ! Value:  26 !    ! Value: 0.1 !             ! Value: 7,3 !
        +------------+    +------------+             +------------+
        :            :    :            :             :            :
        +------------+    +------------+             +------------+
        ! Time:  230 !    ! Time:  250 !             ! Time:  310 !
        ! Value:  42 !    ! Value: 0.2 !             ! Value: 1,2 !
        +------------+    +------------+             +------------+

       The above diagram demonstrates:

       •   Files/values are stored in a (balanced) tree.

       •   Tree nodes and entries in the update queue are the same data structure.

       •   The local time ("First") and the time specified in updates ("Time") may differ.

       •   Timed out values are inserted at the "tail".

       •   Explicitly flushed values are inserted at the "head".

       •   ASCII art rocks.

</pre><h4><b>SECURITY</b> <b>CONSIDERATIONS</b></h4><pre>
   <b>Authentication</b>
       If your rrdtool installation was built without libwrap there is no form  of  authentication  for  clients
       connecting to the rrdcache daemon!

       If  your  rrdtool  installation  was  built with libwrap then you can use hosts_access to restrict client
       access to the rrdcache daemon (rrdcached).  For more information on how to use hosts_access  to  restrict
       access to the rrdcache daemon you should read the <b><a href="../man5/hosts_access.5.html">hosts_access</a></b>(5) man pages.

       It  is  still  highly recommended to install a packet filter or similar mechanism to prevent unauthorized
       connections. Unless you have a dedicated VLAN or VPN for this, using network sockets is  probably  a  bad
       idea!

   <b>Authorization</b>
       There is minimal per-socket authorization.

       Authorization  is  currently done on a per-socket basis. That means each socket has a list of commands it
       will accept and it will accept. It will  accept  only  those  commands  explicitly  listed  but  it  will
       (currently) accept these commands from anyone reaching the socket.

       If  the  networking  sockets  are  to be used, it is necessary to restrict the accepted commands to those
       needed by external clients. If, for example, external clients want to draw graphs  of  the  cached  data,
       they should only be allowed to use the "FLUSH" command.

       Authorization does not work when rrdcached is socket-activated by systemd.

   <b>Encryption</b>
       There is no encryption.

       Again,  this  may be added in the future, but for the time being it is your job to keep your private data
       private. Install a VPN or an encrypted tunnel if you statistics are confidential!

   <b>Sanity</b> <b>checking</b>
       There is no sanity checking.

       The daemon will blindly write to any file it gets told, so you really should create a separate user  just
       for this daemon. Also it does not do any sanity checks, so if it gets told to write values for a time far
       in the future, your files will be messed up good!

   <b>Conclusion</b>
       •   Security is the job of the administrator.

       •   We recommend to allow write access via UNIX domain sockets only.

       •   You have been warned.

</pre><h4><b>PROTOCOL</b></h4><pre>
       The  daemon communicates with clients using a line based ASCII protocol which is easy to read and easy to
       type. This makes it easy for scripts to implement the protocol and possible for users to  use  telnet  to
       connect to the daemon and test stuff "by hand".

       The  protocol  is  line  based,  this  means  that  each  record consists of one or more lines. A line is
       terminated by the line feed character 0x0A, commonly  written  as  "\n".  In  the  examples  below,  this
       character will be written as "&lt;LF&gt;" ("line feed").

       After the connection has been established, the client is expected to send a "command". A command consists
       of  the  command  keyword,  possibly  some  arguments, and a terminating newline character. For a list of
       commands, see "Valid Commands" below.

       Example:

         FLUSH /tmp/foo.rrd&lt;LF&gt;

       The daemon answers with a line consisting of a status code and a short status message, separated  by  one
       or  more space characters. A negative status code signals an error, a positive status code or zero signal
       success. If the status code is greater than zero, it indicates the number of lines that follow the status
       line.

       Examples:

        0 Success&lt;LF&gt;

        2 Two lines follow&lt;LF&gt;
        This is the first line&lt;LF&gt;
        And this is the second line&lt;LF&gt;

   <b>Valid</b> <b>Commands</b>
       The following commands are understood by the daemon:

       <b>FLUSH</b> <u>filename</u>
           Causes the daemon to put <u>filename</u> to the <b>head</b> of the update queue (possibly moving it  there  if  the
           node is already enqueued). The answer will be sent <b>after</b> the node has been dequeued.

       <b>FLUSHALL</b>
           Causes  the  daemon  to  start  flushing  ALL pending values to disk.  This returns immediately, even
           though the writes may take a long time.

       <b>PENDING</b> <u>filename</u>
           Shows any "pending" updates for a file, in order.  The updates shown have not yet been written to the
           underlying RRD file.

       <b>FETCH</b> <u>filename</u> <u>CF</u> [<u>start</u> [<u>end</u>] [<u>ds</u> ...]]
           Calls "rrd_fetch" with the specified arguments and returns the result in text form. If necessary, the
           file is flushed to disk first. The client side function  "rrdc_fetch"  (declared  in  "rrd_client.h")
           parses  the  output  and  behaves just like "rrd_fetch_r" for easy integration of remote queries.  ds
           defines the columns to dump - if none are given then all are returned

       <b>FETCHBIN</b> <u>filename</u> <u>CF</u> [<u>start</u> [<u>end</u>] [<u>ds</u> ...]]
           Calls "rrd_fetch" with the specified arguments and returns the result in text/binary  form  to  avoid
           unnecessary  un/marshalling  overhead.   If  necessary, the file is flushed to disk first. The client
           side function "rrdc_fetch" (declared in "rrd_client.h") parses  the  output  and  behaves  just  like
           "rrd_fetch_r"  for  easy integration of remote queries.  ds defines the columns to dump - if none are
           given then all are returned

       <b>FORGET</b> <u>filename</u>
           Removes <u>filename</u> from the cache.  Any pending updates <b>WILL</b> <b>BE</b> <b>LOST</b>.

       <b>QUEUE</b>
           Shows the files that are on the output queue.  Returns zero or more lines in  the  following  format,
           where &lt;num_vals&gt; is the number of values to be written for the &lt;file&gt;:

               &lt;num_vals&gt; &lt;file&gt;

       <b>HELP</b> [<u>command</u>]
           Returns  a  short  usage  message.  If  no  command  is given, or <u>command</u> is <b>HELP</b>, a list of commands
           supported by the daemon is returned. Otherwise a short description, possibly containing a pointer  to
           a  manual  page, is returned.  Obviously, this is meant for interactive usage and the format in which
           the commands and usage summaries are returned is not well defined.

       <b>STATS</b>
           Returns a list of metrics which can be used to measure the daemons performance and check its  status.
           For a description of the values returned, see "Performance Values" below.

           The format in which the values are returned is similar to many other line based protocols: Each value
           is  printed on a separate line, each consisting of the name of the value, a colon, one or more spaces
           and the actual value.

           Example:

            9 Statistics follow
            QueueLength: 0
            UpdatesReceived: 30
            FlushesReceived: 2
            UpdatesWritten: 13
            DataSetsWritten: 390
            TreeNodesNumber: 13
            TreeDepth: 4
            JournalBytes: 190
            JournalRotate: 0

       <b>PING</b>
           PING-PONG, this is very useful when using connection pool between user client and RRDCACHED.

           Example:

            0 PONG

       <b>UPDATE</b> <u>filename</u> <u>values</u> [<u>values</u> ...]
           Adds more data to a filename. This is <b>the</b> operation the daemon was designed for,  so  describing  the
           mechanism again is unnecessary. Read "HOW IT WORKS" above for a detailed explanation.

           Note  that  rrdcached  only  accepts  absolute timestamps in the update values.  Updates strings like
           "N:1:2:3" are automatically converted to absolute time by the RRD client library  before  sending  to
           rrdcached.

       <b>WROTE</b> <u>filename</u>
           This  command is written to the journal after a file is successfully written out to disk.  It is used
           during journal replay to determine which updates have already been applied.  It is <u>only</u> valid in  the
           journal; it is not accepted from the other command channels.

       <b>FIRST</b> <u>filename</u> [<u>rranum</u>]
           Return  the  timestamp for the first CDP in the specified RRA.  Default is to use RRA zero if none is
           specified.

       <b>LAST</b> <u>filename</u>
           Return the timestamp for the last update to the specified RRD. Note that the  cache  is  <u>not</u>  flushed
           before checking, as the client is expected to request this separately if it is required.

       <b>INFO</b> <u>filename</u>
           Return the configuration information for the specified RRD. Note that the cache is <u>not</u> flushed before
           checking, as the client is expected to request this separately if it is required.

           The information is returned, one item per line, with the format:

            I&lt;keyname&gt; I&lt;type&gt; I&lt;value&gt;

       <b>CREATE</b> <u>filename</u> [-s <u>stepsize</u>] [-b <u>begintime</u>] [-r <u>sourcefile</u> ...] [-t <u>templatefile</u>] [-O] <u>DSdefinitions</u> ...
       <u>RRAdefinitions</u> ...
           This  will  create  the  RRD  file  according to the supplied parameters, provided the parameters are
           valid, and (if the -O option is given or if the rrdcached was started with the -O flag) the specified
           <u>filename</u> does not already exist.

       <b>BATCH</b>
           This command initiates the bulk load of multiple commands.  This is designed for  installations  with
           extremely  high  update  rates,  since  it  permits more than one command to be issued per <b>read()</b> and
           <b>write()</b>.

           All commands are executed just as they would be if given individually, except for output to the user.
           Messages indicating success are suppressed, and error  messages  are  delayed  until  the  client  is
           finished.

           Command  processing  is finished when the client sends a dot (".") on its own line.  After the client
           has finished, the server responds with an error count and the list of error messages (if any).   Each
           error  messages  indicates  the  number of the command to which it corresponds, and the error message
           itself.  The first user command after <b>BATCH</b> is command number one.

               client:  BATCH
               server:  0 Go ahead.  End with dot '.' on its own line.
               client:  UPDATE x.rrd 1223661439:1:2:3            &lt;--- command #1
               client:  UPDATE y.rrd 1223661440:3:4:5            &lt;--- command #2
               client:  and so on...
               client:  .
               server:  2 Errors
               server:  1 message for command 1
               server:  12 message for command 12

       <b>LIST</b> [RECURSIVE] I/&lt;path&gt;
           This command allows to list  directories  and  rrd  databases  as  seen  by  the  daemon.   The  root
           "directory" is the base_dir (see '-b dir'). When invoked with 'LIST RECURSIVE /&lt;path&gt;' it will behave
           similarly  to  'ls  -R' but limited to rrd files (listing all the rrd bases in the subtree of &lt;path&gt;,
           skipping empty directories).

       <b>SUSPEND</b> <u>filename</u>
           Suspend writing to an RRD file. While a file is suspended, all metrics for it are  cached  in  memory
           until <b>RESUME</b> is called for that file or <b>RESUMEALL</b> is called.

       <b>RESUME</b> <u>filename</u>
           Resume writing to an RRD file previously suspended by <b>SUSPEND</b> or <b>SUSPENDALL</b>.

       <b>SUSPENDALL</b>
           Suspend  writing to all RRD files. While a file is suspended, all metrics for it are cached in memory
           until <b>RESUME</b> is called for that file or <b>RESUMEALL</b> is called.

       <b>RESUMEALL</b>
           Resume writing to all RRD files previously suspended by <b>SUSPEND</b> or <b>SUSPENDALL</b>.

       <b>QUIT</b>
           Disconnect from rrdcached.

   <b>Performance</b> <b>Values</b>
       The following counters are returned by the <b>STATS</b> command:

       <b>QueueLength</b> <u>(unsigned</u> <u>64bit</u> <u>integer)</u>
           Number of nodes currently enqueued in the update queue.

       <b>UpdatesReceived</b> <u>(unsigned</u> <u>64bit</u> <u>integer)</u>
           Number of UPDATE commands received.

       <b>FlushesReceived</b> <u>(unsigned</u> <u>64bit</u> <u>integer)</u>
           Number of FLUSH commands received.

       <b>UpdatesWritten</b> <u>(unsigned</u> <u>64bit</u> <u>integer)</u>
           Total number of updates, i. e. calls to "rrd_update_r", since the daemon was started.

       <b>DataSetsWritten</b> <u>(unsigned</u> <u>64bit</u> <u>integer)</u>
           Total number of "data sets" written to disk since the daemon was started. A data set is one  or  more
           values  passed  to  the  <b>UPDATE</b>  command.  For example: "1223661439:123:456" is one data set with two
           values. The term "data set" is used to prevent confusion  whether  individual  values  or  groups  of
           values are counted.

       <b>TreeNodesNumber</b> <u>(unsigned</u> <u>64bit</u> <u>integer)</u>
           Number of nodes in the cache.

       <b>TreeDepth</b> <u>(unsigned</u> <u>64bit</u> <u>integer)</u>
           Depth of the tree used for fast key lookup.

       <b>JournalBytes</b> <u>(unsigned</u> <u>64bit</u> <u>integer)</u>
           Total number of bytes written to the journal since startup.

       <b>JournalRotate</b> <u>(unsigned</u> <u>64bit</u> <u>integer)</u>
           Number of times the journal has been rotated since startup.

</pre><h4><b>SIGNALS</b></h4><pre>
       SIGINT and SIGTERM
           The  daemon  exits  normally  on  receipt of either of these signals.  Pending updates are handled in
           accordance with the <b>-j</b> and <b>-F</b> options.

       SIGUSR1
           The daemon exits AFTER flushing all updates out to disk.  This may take a while.

       SIGUSR2
           The daemon exits immediately, without flushing updates out to disk.  Pending updates will be replayed
           from the journal when the daemon starts up again.  <b>WARNING:</b> <b>if</b> <b>journaling</b> <b>(-j)</b> <b>is</b>  <b>NOT</b>  <b>enabled,</b>  <b>any</b>
           <b>pending</b> <b>updates</b> <b>WILL</b> <b>BE</b> <b>LOST</b>.

</pre><h4><b>BUGS</b></h4><pre>
       No known bugs at the moment.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       rrdtool, rrdgraph

</pre><h4><b>AUTHOR</b></h4><pre>
       Florian Forster &lt;octo at verplant.org&gt;

       Both <b>rrdcached</b> and this manual page have been written by Florian.

</pre><h4><b>CONTRIBUTORS</b></h4><pre>
       kevin    brintnall    &lt;<a href="mailto:kbrint@rufus.net">kbrint@rufus.net</a>&gt;    Steve    Shipway    &lt;<a href="mailto:steve@steveshipway.org">steve@steveshipway.org</a>&gt;   Martin   Sperl
       &lt;<a href="mailto:rrdtool@martin.sperl.org">rrdtool@martin.sperl.org</a>&gt;

1.7.2                                              2025-03-04                                       <u><a href="../man1/RRDCACHED.1.html">RRDCACHED</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>