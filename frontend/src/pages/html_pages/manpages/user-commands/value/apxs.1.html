<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>apxs - APache eXtenSion tool</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/apache2-dev">apache2-dev_2.4.63-1ubuntu1.1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       apxs - APache eXtenSion tool

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>apxs</b> -<b>g</b> [ -<b>S</b> <u>name</u>=<u>value</u> ] -<b>n</b> <u>modname</u>

       <b>apxs</b> -<b>q</b> [ -<b>v</b> ] [ -<b>S</b> <u>name</u>=<u>value</u> ] <u>query</u> ...

       <b>apxs</b>  -<b>c</b>  [ -<b>S</b> <u>name</u>=<u>value</u> ] [ -<b>o</b> <u>dsofile</u> ] [ -<b>I</b> <u>incdir</u> ] [ -<b>D</b> <u>name</u>=<u>value</u> ] [ -<b>L</b> <u>libdir</u> ] [ -<b>l</b> <u>libname</u> ] [
       -<b>Wc,</b><u>compiler-flags</u> ] [ -<b>Wl,</b><u>linker-flags</u> ] <u>files</u> ...

       <b>apxs</b> -<b>i</b> [ -<b>S</b> <u>name</u>=<u>value</u> ] [ -<b>n</b> <u>modname</u> ] [ -<b>a</b> ] [ -<b>A</b> ] <u>dso-file</u> ...

       <b>apxs</b> -<b>e</b> [ -<b>S</b> <u>name</u>=<u>value</u> ] [ -<b>n</b> <u>modname</u> ] [ -<b>a</b> ] [ -<b>A</b> ] <u>dso-file</u> ...

</pre><h4><b>SUMMARY</b></h4><pre>
       <b>apxs</b> is a tool for building and installing extension modules for the Apache HyperText  Transfer  Protocol
       (HTTP)  server.  This  is  achieved  by building a dynamic shared object (DSO) from one or more source or
       object <u>files</u> which then can be loaded into the Apache server under runtime via the  LoadModule  directive
       from mod_so.

       So  to  use  this  extension mechanism your platform has to support the DSO feature and your Apache httpd
       binary has to be built with the mod_so module. The <b>apxs</b> tool automatically complains if this is  not  the
       case. You can check this yourself by manually running the command

             $ httpd -l

       The  module  mod_so  should  be  part  of the displayed list. If these requirements are fulfilled you can
       easily extend your Apache server's functionality by installing your own modules with the DSO mechanism by
       the help of this <b>apxs</b> tool:

             $ apxs -i -a -c mod_foo.c
             gcc -fpic -DSHARED_MODULE -I/path/to/apache/include -c mod_foo.c
             ld -Bshareable -o mod_foo.so mod_foo.o
             cp mod_foo.so /path/to/apache/modules/mod_foo.so
             chmod 755 /path/to/apache/modules/mod_foo.so
             [activating module `foo' in /path/to/apache/etc/httpd.conf]
             $ apachectl restart
             /path/to/apache/sbin/apachectl restart: httpd not running, trying to start
             [Tue Mar 31 11:27:55 1998] [debug] <a href="../man303/mod_so.c.303.html">mod_so.c</a>(303): loaded module foo_module
             /path/to/apache/sbin/apachectl restart: httpd started
             $ _

       The arguments <u>files</u> can be any C source file (.c), a object file (.o) or even a library archive (.a). The
       <b>apxs</b> tool automatically recognizes these extensions  and  automatically  used  the  C  source  files  for
       compilation while just using the object and archive files for the linking phase. But when using such pre-
       compiled  objects  make sure they are compiled for position independent code (PIC) to be able to use them
       for a dynamically loaded shared object. For instance with GCC you always just  have  to  use  <b>-fpic</b>.  For
       other  C  compilers  consult  its  manual  page or at watch for the flags <b>apxs</b> uses to compile the object
       files.

       For more details about DSO support in Apache read the documentation of mod_so or perhaps  even  read  the
       <b>src/modules/standard/mod_so.c</b> source file.

</pre><h4><b>OPTIONS</b></h4><pre>
   <b>Common</b> <b>Options</b>
       <b>-n</b> <u>modname</u>
              This explicitly sets the module name for the <b>-i</b> (install) and <b>-g</b> (template generation) option. Use
              this to explicitly specify the module name. For option <b>-g</b> this is required, for option <b>-i</b> the <b>apxs</b>
              tool  tries  to determine the name from the source or (as a fallback) at least by guessing it from
              the filename.

   <b>Query</b> <b>Options</b>
       <b>-q</b>     Performs a query for variables and environment settings used to build <b>httpd</b>. When invoked  without
              <u>query</u>  parameters,  it  prints  all  known  variables  and their values. The optional <b>-v</b> parameter
              formats the list output. .PP Use this to manually determine settings used to build the <b>httpd</b>  that
              will  load  your module. For instance use INC=-I`apxs -q INCLUDEDIR` .PP inside your own Makefiles
              if you need manual access to Apache's C header files.

   <b>Configuration</b> <b>Options</b>
       <b>-S</b> <u>name</u>=<u>value</u>
              This option changes the apxs settings described above.

   <b>Template</b> <b>Generation</b> <b>Options</b>
       <b>-g</b>     This generates a subdirectory <u>name</u> (see option <b>-n</b>) and there two files:  A  sample  module  source
              file  named <b>mod_</b><u>name</u>.c which can be used as a template for creating your own modules or as a quick
              start for playing with the apxs mechanism. And a corresponding <b>Makefile</b> for even easier build  and
              installing of this module.

   <b>DSO</b> <b>Compilation</b> <b>Options</b>
       <b>-c</b>     This  indicates the compilation operation. It first compiles the C source files (.c) of <u>files</u> into
              corresponding object files (.o) and then builds a dynamically shared object in <u>dsofile</u> by  linking
              these  object  files  plus  the  remaining  object  files (.o and .a) of <u>files</u>. If no <b>-o</b> option is
              specified the output file is guessed from the first filename in <u>files</u> and thus usually defaults to
              <b>mod_</b><u>name</u>.so.

       <b>-o</b> <u>dsofile</u>
              Explicitly specifies the filename of the created dynamically shared object. If not  specified  and
              the name cannot be guessed from the <u>files</u> list, the fallback name <b>mod_unknown.so</b> is used.

       <b>-D</b> <u>name</u>=<u>value</u>
              This  option  is  directly  passed through to the compilation command(s). Use this to add your own
              defines to the build process.

       <b>-I</b> <u>incdir</u>
              This option is directly passed through to the compilation command(s). Use this  to  add  your  own
              include directories to search to the build process.

       <b>-L</b> <u>libdir</u>
              This  option  is  directly  passed through to the linker command. Use this to add your own library
              directories to search to the build process.

       <b>-l</b> <u>libname</u>
              This option is directly passed through to the linker command. Use this to add your  own  libraries
              to search to the build process.

       <b>-Wc,</b><u>compiler-flags</u>
              This  option  passes <u>compiler-flags</u> as additional flags to the <b>libtool</b> <b>--mode=compile</b> command. Use
              this to add local compiler-specific options.

       <b>-Wl,</b><u>linker-flags</u>
              This option passes <u>linker-flags</u> as additional flags to the <b>libtool</b> <b>--mode=link</b> command.  Use  this
              to add local linker-specific options.

       <b>-p</b>     This  option causes apxs to link against the apr/apr-util libraries. This is useful when compiling
              helper programs that use the apr/apr-util libraries.

   <b>DSO</b> <b>Installation</b> <b>and</b> <b>Configuration</b> <b>Options</b>
       <b>-i</b>     This indicates the installation operation and installs one or more dynamically shared objects into
              the server's <u>modules</u> directory.

       <b>-a</b>     This activates the module by automatically adding a  corresponding  LoadModule  line  to  Apache's
              <b>httpd.conf</b> configuration file, or by enabling it if it already exists.

       <b>-A</b>     Same as option <b>-a</b> but the created LoadModule directive is prefixed with a hash sign (<b>#</b>), <u>i.e.</u>, the
              module is just prepared for later activation but initially disabled.

       <b>-e</b>     This  indicates  the  editing operation, which can be used with the <b>-a</b> and <b>-A</b> options similarly to
              the <b>-i</b> operation to edit Apache's <b>httpd.conf</b> configuration file without attempting to install  the
              module.

</pre><h4><b>EXAMPLES</b></h4><pre>
       Assume  you  have  an  Apache  module  named  <b>mod_foo.c</b>  available  which  should  extend Apache's server
       functionality. To accomplish this you first have to compile the C source into a  shared  object  suitable
       for loading into the Apache server under runtime via the following command:

             $ apxs -c mod_foo.c
             /path/to/libtool --mode=compile gcc ... -c mod_foo.c
             /path/to/libtool --mode=link gcc ... -o mod_foo.la mod_foo.slo
             $ _

       Then you have to update the Apache configuration by making sure a LoadModule directive is present to load
       this  shared object. To simplify this step <b>apxs</b> provides an automatic way to install the shared object in
       its "modules" directory and updating the <b>httpd.conf</b> file accordingly. This can be achieved by running:

             $ apxs -i -a mod_foo.la
             /path/to/instdso.sh mod_foo.la /path/to/apache/modules
             /path/to/libtool --mode=install cp mod_foo.la /path/to/apache/modules
             ...
             chmod 755 /path/to/apache/modules/mod_foo.so
             [activating module `foo' in /path/to/apache/conf/httpd.conf]
             $ _

       This way a line named

             LoadModule foo_module modules/mod_foo.so

       is added to the configuration file if still not present. If you want to have this  disabled  per  default
       use the <b>-A</b> option, <u>i.e.</u>

             $ apxs -i -A mod_foo.c

       For  a  quick  test  of  the  apxs  mechanism  you  can  create  a  sample  Apache module template plus a
       corresponding Makefile via:

             $ apxs -g -n foo
             Creating [DIR]  foo
             Creating [FILE] foo/Makefile
             Creating [FILE] foo/modules.mk
             Creating [FILE] foo/mod_foo.c
             Creating [FILE] foo/.deps
             $ _

       Then you can immediately compile this sample module into a shared object and  load  it  into  the  Apache
       server:

             $ cd foo
             $ make all reload
             apxs -c mod_foo.c
             /path/to/libtool --mode=compile gcc ... -c mod_foo.c
             /path/to/libtool --mode=link gcc ... -o mod_foo.la mod_foo.slo
             apxs -i -a -n "foo" mod_foo.la
             /path/to/instdso.sh mod_foo.la /path/to/apache/modules
             /path/to/libtool --mode=install cp mod_foo.la /path/to/apache/modules
             ...
             chmod 755 /path/to/apache/modules/mod_foo.so
             [activating module `foo' in /path/to/apache/conf/httpd.conf]
             apachectl restart
             /path/to/apache/sbin/apachectl restart: httpd not running, trying to start
             [Tue Mar 31 11:27:55 1998] [debug] <a href="../man303/mod_so.c.303.html">mod_so.c</a>(303): loaded module foo_module
             /path/to/apache/sbin/apachectl restart: httpd started
             $ _

Apache HTTP Server                                 2018-07-06                                            <u><a href="../man1/APXS.1.html">APXS</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>