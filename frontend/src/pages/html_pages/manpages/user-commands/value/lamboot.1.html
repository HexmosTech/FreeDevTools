<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>lamboot - Start a LAM multicomputer.</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/lam-runtime">lam-runtime_7.1.4-7.2_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       lamboot - Start a LAM multicomputer.

</pre><h4><b>SYNOPSIS</b></h4><pre>

       lamboot [-b] [-d] [-h] [-H] [-l] [-s] [-v] [-V] [-x] [-nn] [-np] [-c conf file] [-prefix
              /lam/install/path/] [-sessionprefix value] [-sessionsuffix value] [-withlamprefixpath value] [-ssi
              key value] [bhost]

</pre><h4><b>OPTIONS</b></h4><pre>
       <b>-b</b>      Assume  local and remote shell are the same.  This means that only one remote shell invocation is
               used to each node.  If <b>-b</b> is not used, two remote shell invocations are used to each node.

       <b>-d</b>      Turn on debugging output.  This implies -v.

       <b>-h</b>      Print the command help menu.

       <b>-l</b>      Delay hostname-to-IP-address resolution.

       <b>-prefix</b> Use the LAM installation specified in /lam/install/path/.  Not compatible with  LAM/MPI  versions
               prior to 7.1.

       <b>-s</b>      Close stdio on the local node.

       <b>-ssi</b> <b>key</b> <b>value</b>
               Send arguments to various SSI modules.  See the "SSI" section, below.

       <b>-v</b>      Be verbose.

       <b>-x</b>      Run in fault tolerant mode.

       <b>-H</b>      Do not display the command header.

       <b>-nn</b>     Don't add "-n" to the remote agent command line

       <b>-np</b>     Do not force the execution of $HOME/.profile on remote hosts

       <b>-session-prefix</b> <b>value</b>
               Set the session prefix, overriding LAM_MPI_SESSION_PREFIX.

       <b>-session-suffix</b> <b>value</b>
               Set the session suffix, overriding LAM_MPI_SESSION_SUFFIX.

       <b>-withlamprefixpath</b> <b>value</b>
               Override  the internal installation path.  For internal use only, do not use unless you know what
               you are doing.

</pre><h4><b>ENVIRONMENT</b> <b>VARIABLES</b></h4><pre>
       <b>LAM_MPI_SESSION_PREFIX</b>

       <b>LAM_MPI_SESSION_SUFFIX</b>
                 It is possible to change the session directory used by LAM/MPI, normally of the form:

       tmpdir/lam-username@hostname[-suffix]

       tmpdir    will be set to <u>LAM_MPI_SESSION_PREFIX</u> if set.  Otherwise, it will fall back to the value of <u>TM‐</u>
                 <u>PDIR</u>.  If neither of these are set, the default is /tmp.

       suffix    can be overridden by the <u>LAM_MPI_SESSION_SUFFIX</u> environment variable.  If  <u>LAM_MPI_SESSION_SUF‐</u>
                 <u>FIX</u>  is not set and LAM is running under a supported batch scheduling system, <u>$suffix</u> will be a
                 value unique to the currently running job.

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The <u>lamboot</u> tool starts the LAM software on each of the machines specified in  the  boot  schema,  <u>bhost</u>.
       The  boot schema specifies the hostnames of nodes to be used in the run-time MPI environment, and option‐
       ally lists how may CPUs LAM may used on each node.  The user may wish to first run the <a href="../man1/recon.1.html">recon</a>(1)  tool  to
       verify that LAM can be started.

       Starting  LAM is a three step procedure.  In the first step, <a href="../man1/hboot.1.html">hboot</a>(1) is invoked on each of the specified
       machines.  Then each machine allocates a dynamic port and communicates it back to <u>lamboot</u> which  collects
       them.   In the third step, <u>lamboot</u> gives each machine the list of machines/ports in order to form a fully
       connected topology.  If any machine was not able to start, or if a  timeout  period  expires  before  the
       first step completes, <u>lamboot</u> invokes <a href="../man1/lamwipe.1.html">lamwipe</a>(1) to terminate LAM and reports the error.

       The  <u>bhost</u> file is a LAM boot schema written in the host file syntax.  See <a href="../man5/bhost.5.html">bhost</a>(5).  Instead of the com‐
       mand line, a boot schema can be specified in the LAMBHOST  environment  variable.   Otherwise  a  default
       file,  lam-bhost.def,  is  used.  LAM searches for <u>bhost</u> first in the local directory and then in the in‐
       stallation directory under etc/.

       In addition, <u>lamboot</u> uses a process schema for the individual LAM nodes.  A process schema (see  <a href="../man5/conf.5.html">conf</a>(5))
       is  a description of the processes which constitute the operating system on a node.  In general, the sys‐
       tem administrator maintains this file -- LAM/MPI users will generally not need to change this  file.   It
       is also possible for the user to customize the LAM software with a private process schema.

   <b>The</b> <b>bhost</b> <b>file</b>
       The format of the <u>bhost</u> file is documented in the <a href="../man5/bhost.5.html">bhost</a>(5) man page.

       <u>lamboot</u>  will resolve all names in <u>bhost</u> on the node in which <u>lamboot</u> was invoked (the origin node).  Af‐
       ter that, LAM will only use IP addresses, not names.  Specifically, the name resolution configuration  on
       all  other  nodes is not used.  Hence, the the origin node must be able to resolve all the names in <u>bhost</u>
       to addresses that are reachable by all other nodes.

       A common mistake is to list <u>localhost</u> (or any name that resolves to the special address 127.0.0.1 --  the
       loopback  TCP/IP  device) in a <u>bhost</u> file that contains other nodes.  In this case, the address 127.0.0.1
       would be sent to each of the other nodes as the address of the origin node.  If the other  nodes  try  to
       use  127.0.0.1 to contact the origin node, they will actually be contacting themselves, and would eventu‐
       ally timeout and fail.

       The IP addresses obtained from <u>bhost</u> are used for LAM's meta messages: startup and shutdown of jobs, out-
       of-band messages used for coordination, etc.  The amount of traffic  is  fairly  low  (unless  using  the
       "lamd"  mode  of MPI message passing, in which case all MPI traffic will also utilize LAM's meta messages
       for transport -- see <a href="../man1/mpirun.1.html">mpirun</a>(1)).  When using the TCP RPI, these IP addresses are also used for  MPI  mes‐
       sage passing via direct sockets between each pair of nodes.

       A  common  case  is where a "master" node has multiple network interface cards (NICs) -- one that is con‐
       nected to a public network, and one that is connected to a private network where parallel jobs are to  be
       run.  To include the master node in a <u>bhost</u> file, the IP name (or address) of the NIC on the private net‐
       work  should  be listed in <u>bhost</u>.  This ensures that all the other nodes can reach the master node on the
       private network.

       As another example, some configurations have multiple TCP/IP NICs in each node of a  parallel  job.   One
       NIC is considered "slow" (e.g., 10Mbps), while the other is considered "fast" (e.g., 100Mbps).  It is de‐
       sirable  to  allow  LAM to take advantage of the higher bandwidth on the "fast" network for MPI messages.
       As such, <u>bhost</u> should list the IP names (or addresses) of all the "fast" NICs.  However, if the  LAM  RPI
       does  not  use  TCP/IP (e.g., the Myrinet/GM RPI), the <u>bhost</u> file should probably list the "slow" NICs so
       that LAM's meta message traffic does not cause overhead and potentially detract from performance  on  the
       "fast" network from other high-performance applications.

   <b>Delaying</b> <b>hostname</b> <b>lookups</b>
       Normally,  name  resolution  of hostnames is done on the machines where <u>lamboot</u> is invoked.  This is done
       for optimization reasons, so that the list of hostnames only needs to be resolved once (potentially mini‐
       mizing the amount of DNS or other hostname-lookup network traffic).

       However, in some non-uniform networking environments, this is not sufficient because each host may have a
       different IP address on each of its peers.  For example, host A may have address Z on host  B,  but  have
       address Y on host C.

       The <u>-l</u> option to <u>lamboot</u> will cause LAM to distribute hostnames to each node rather than a fully resolved
       set of IP addresses.  Hence, each node where LAM is booted will do its own name resolution on the list of
       hostnames.

   <b>SSI</b> <b>(System</b> <b>Services</b> <b>Interface)</b>
       The <u>-ssi</u> switch allows the passing of parameters to various SSI modules.  LAM's SSI modules are described
       in  detail in <a href="../man7/lamssi.7.html">lamssi</a>(7).  SSI modules have direct impact on MPI programs because they allow tunable para‐
       meters to be set at run time (such as which boot device driver to use, what parameters to  pass  to  that
       driver, etc.).

       The  <u>-ssi</u> switch takes two arguments: <u>key</u> and <u>value</u>.  The <u>key</u> argument generally specifies which SSI mod‐
       ule will receive the value.  For example, the <u>key</u> "boot" is used to select  which  RPI  to  be  used  for
       starting processes on remote nodes.  The <u>value</u> argument is the value that is passed.  For example:

       lamboot -ssi boot tm
           Tells  LAM  to use the "tm" boot module for native launching in PBSPro / OpenPBS environments (the tm
           boot module does not require a boot schema).

       lamboot -ssi boot rsh -ssi rsh_agent "ssh -x" boot_schema
           Tells LAM to use the "rsh" boot module, and tells the rsh module to use  "ssh  -x"  as  the  specific
           agent to launch executables on remote nodes.

       And  so  on.   LAM's boot SSI modules are described in <a href="../man7/lamssi_boot.7.html">lamssi_boot</a>(7).  This page should be consulted for
       specific actions that are taken by, and how to tweak the run-time behavior of each boot module.

       The <u>-ssi</u> switch can be used multiple times to specify different <u>key</u> and/or <u>value</u> arguments.  If the  same
       <u>key</u> is specified more than once, the <u>value</u>s are concatenated with a comma (",") separating them.

       Note that the <u>-ssi</u> switch is simply a shortcut for setting environment variables.  The same effect may be
       accomplished  by setting corresponding environment variables before running <u>lamboot</u>.  The form of the en‐
       vironment variables that LAM sets are: <u>LAM_MPI_SSI_key=value</u>.

       Note that the <u>-ssi</u> switch overrides any previously set environment variables.  Also note that unknown <u>key</u>
       arguments are still set as environment variable -- they are not checked  (by  <u>lamwipe</u>)  for  correctness.
       Illegal or incorrect <u>value</u> arguments may or may not be reported -- it depends on the specific SSI module.

   <b>Remote</b> <b>Executable</b> <b>Invocation</b>
       All  tweakable aspects of launching executables on remote nodes during <u>lamboot</u> are discussed in <a href="../man7/lamssi.7.html">lamssi</a>(7)
       and <a href="../man7/lamssi_boot.7.html">lamssi_boot</a>(7).  Topics include (but are not limited to): discovery of remote shell,  run-time  over‐
       rides of the agent use to launch remote executables (e.g., rsh and ssh), etc.

   <b>Closing</b> <b>stdio</b>
       The  stdio of each LAM daemon on a remote host that is launched by <u>lamboot</u> is closed by default.  Normal‐
       ly, the stdio of the LAM daemon launched on the local host is left open so that  the  internal  LAM  tst‐
       <a href="../man3/dio.3.html">dio</a>(3)  package  works  properly.  However, it is sometimes desirable to close the stdio of the local LAM
       daemon as well.  For example:

              rsh somenode lamboot -s hostfile

       This is because <u>rsh</u> waits for two conditions before exiting: <u>lamboot</u> to exit, and stdout / stderr  to  be
       closed.  Without <u>-s</u>, stdout / stderr would not be closed, and <u>rsh</u> (and <u>ssh</u>) will hang even though <u>lamboot</u>
       had completed.  <u>-s</u> causes the stdout / stderr of the local LAM daemon to be closed upon invocation, which
       will  allow  <u>rsh</u> to complete.  Using <u>-s</u> will not affect <u>lamboot</u> in any other way, but it will prevent the
       <a href="../man3/tstdio.3.html">tstdio</a>(3) package from working properly.

   <b>Fault</b> <b>Tolerance</b>
       If the <u>-x</u> option is given, LAM runs in fault tolerant mode.  In this mode, nodes exchange ``heart  beat''
       messages  periodically  to make sure all nodes are running and the links connecting them are operational.
       When a node's heart beats stop, it is declared ``dead'' and all LAM nodes (and processes)  are  notified.
       This  allows  users to write fault tolerant applications that can degrade gracefully, or fully recover by
       replacing the defunct node with another (see <a href="../man1/lamgrow.1.html">lamgrow</a>(1)).   Since  this  mode  introduces  a  performance
       penalty, it is not activated by default.

</pre><h4><b>EXAMPLES</b></h4><pre>
       lamboot -v
           Start LAM on the machines described in the default boot schema.  Report about important steps as they
           are done.

       lamboot -d hostfile
           Start LAM on the machines described in file <u>hostfile</u>.  Provide incredibly detailed reports on what is
           happening at each stage in the boot process.

       lamboot mynodes
           Start LAM on the machines described in the boot schema <u>mynodes</u>.  Operate silently.

</pre><h4><b>FILES</b></h4><pre>
       laminstalldir/etc/lam-bhost.def   default  boot schema file, where "laminstalldir" is the directory where
                                         LAM/MPI was installed

       laminstalldir/etc/lam-conf.lamd   default process schema file for LAM nodes

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <a href="../man1/recon.1.html">recon</a>(1), <a href="../man1/lamwipe.1.html">lamwipe</a>(1), <a href="../man1/hboot.1.html">hboot</a>(1), <a href="../man3/tstdio.3.html">tstdio</a>(3), <a href="../man5/bhost.5.html">bhost</a>(5), <a href="../man5/conf.5.html">conf</a>(5), <a href="../man5/lam-helpfile.5.html">lam-helpfile</a>(5), <a href="../man7/lamssi.7.html">lamssi</a>(7), <a href="../man7/lamssi_boot.7.html">lamssi_boot</a>(7)

LAM 7.1.4                                          July, 2007                                         <u><a href="../man1/LAMBOOT.1.html">LAMBOOT</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>