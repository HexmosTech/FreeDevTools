<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>xtruss - trace X protocol exchanges, in the manner of strace</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/xtruss">xtruss_0.0~git20241011.27fafffe-1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       <b>xtruss</b> - trace X protocol exchanges, in the manner of <b>strace</b>

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>xtruss</b> [ <u>options</u> ] <u>command</u> [ <u>command-arguments</u> ]
       <b>xtruss</b> [ <u>options</u> ] <b>-p</b> <u>X-resource-ID</u>
       <b>xtruss</b> [ <u>options</u> ] <b>-p</b> <b>-</b>
       <b>xtruss</b> [ <u>options</u> ] <b>-P</b>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>xtruss</b>  is  a  utility  which  logs  everything that passes between the X server and one or more X client
       programs. In this it is similar to <b><a href="../man1/xmon.1.html">xmon</a></b>(1), but intended to combine <b>xmon</b>'s basic  functionality  with  an
       interface much more similar to <b><a href="../man1/strace.1.html">strace</a></b>(1).

       Like  <b>xmon</b>,  <b>xtruss</b>  in its default mode works by setting up a proxy X server, waiting for connections to
       that, and forwarding them on to the real X server. However, unlike <b>xmon</b>, you don't have to deal with  any
       of that by hand: there's no need to start the trace utility in one terminal and manually attach processes
       to  it  from another, unless you really want to (in which case the <b>-P</b> option will do that). The principal
       mode of use is just to type <b>xtruss</b>  followed  by  the  command  line  of  your  X  program;  <b>xtruss</b>  will
       automatically  take  care  of  adjusting  the new program's environment to point at its proxy server, and
       (also unlike <b>xmon</b>) it will also take care of X authorisation automatically.

       As an alternative mode of use, you can also attach <b>xtruss</b> to an already-running  X  application,  if  you
       didn't  realise  you were going to want to trace it until it had already been started. This mode requires
       cooperation from the X server - specifically, it  can't  work  unless  the  server  supports  the  <b>RECORD</b>
       protocol extension - but since modern X.Org servers do provide that, it's often useful.

       The  logging  format  of <b>xtruss</b> is much more compact than that of <b>xmon</b>, and resembles <b>strace</b> in that it's
       written to look like a series of function calls some of which return values.  For  instance,  where  <b>xmon</b>
       would print

                ............REQUEST: GetSelectionOwner
                    sequence number: 000f
                     request length: 0002
                          selection: &lt;PRIMARY&gt;
                                        ..............REPLY: GetSelectionOwner
                                            sequence number: 000f
                                               reply length: 00000000
                                                      owner: WIN 02c0002b
                ............REQUEST: InternAtom
                    sequence number: 0010
                     only-if-exists: False
                     request length: 0005
                     length of name: 000c
                               name: "VT_SELECTION"
                                        ..............REPLY: InternAtom
                                            sequence number: 0010
                                               reply length: 00000000
                                                       atom: ATM 000002bf

       <b>xtruss</b> will instead print

       GetSelectionOwner(selection=a#1) = {owner=w#02C0002B}
       InternAtom(name="VT_SELECTION", only-if-exists=False) = {atom=a#703}

       Note  that not only has each request been condensed on to one line (though most lines will be long enough
       to wrap, at least on a standard 80-column terminal), but also each request and reply have been printed on
       the <u>same</u> line.

       That last is not always possible, of course: sometimes an application will queue multiple requests before
       receiving the reply to the first one (in fact, this  is  generally  good  behaviour  since  it  minimises
       network  round-trip delays), in which case <b>xtruss</b>'s output will look - again mimicking <b>strace</b> - something
       like this:

       InternAtom(name="TARGETS", only-if-exists=False) = &lt;unfinished&gt;
       InternAtom(name="TIMESTAMP", only-if-exists=False) = &lt;unfinished&gt;
        ... InternAtom(name="TARGETS", only-if-exists=False) = {atom=a#378}
        ... InternAtom(name="TIMESTAMP", only-if-exists=False) = {atom=a#379}

</pre><h4><b>OPTIONS</b></h4><pre>
       These options change the mode of operation of <b>xtruss</b> away from the default of acting as a  wrapper  on  a
       single command:

       <b>-p</b> <u>resource-ID</u>
              Attach  to  the X client owning the given resource, using the X <b>RECORD</b> extension (which the server
              must support for this to work). The resource ID can be a decimal integer or a hex integer preceded
              with `<b>0x</b>'. It typically names an X window, but can name another type of resource instead  (e.g.  a
              pixmap  or  cursor)  or just specify the resource base of the client connection. If you don't know
              any of those things, you can give the resource ID as just `<b>-</b>', in which case <b>xtruss</b> will allow you
              to interactively select a window by clicking with the mouse (similarly  to  <b><a href="../man1/xkill.1.html">xkill</a></b>(1),  <b><a href="../man1/xwininfo.1.html">xwininfo</a></b>(1)
              and <b><a href="../man1/xprop.1.html">xprop</a></b>(1)) and will trace the client that owns the window you select.

       <b>-P</b>     Set up a logging X proxy as in the normal mode, but instead of spawning a subprocess to connect to
              that  proxy,  just  wait  for connections. This turns <b>xtruss</b> into a tool more similar to <b>xmon</b>: you
              start it in one terminal window, and then from another terminal window you can configure  selected
              processes  to  connect to the proxy server and be logged. <b>xtruss</b> will print on standard output the
              environment variables you need to set up to connect other processes to the proxy (in both  <b>sh</b>  and
              <b>csh</b> syntax).

       The following options apply to all modes of operation:

       <b>-s</b> <u>length</u>
              Limit  the  length  of  output  lines  by eliding most of the contents of long arrays, strings and
              blocks of data. <b>xtruss</b> will begin to shorten lines at the specified length (any line shorter  than
              that  should  not  be interfered with), but lines cannot always be chopped to the exact length and
              continue to make sense, so the line length is approximate only.  Specifying  zero  or  `<b>unlimited</b>'
              will  remove  all  restriction,  so that <b>xtruss</b> will display the full contents of every request it
              understands, no matter how big. Default is 256.

       <b>-o</b> <u>filename</u>
              Send the trace output to the specified file, or to standard output if <u>filename</u> is  just  `<b>-</b>'.  The
              default is to log to standard error.

       <b>-e</b> [<u>class</u><b>=</b>][<b>!</b>]<u>item</u>[<b>,</b><u>item</u>...]
              Specify  a subset of X requests or X events to log. <u>class</u> can be either `<b>requests</b>' or `<b>events</b>'; if
              the class is omitted, `<b>requests</b>' is assumed. The list of <u>item</u> gives a list of X request names or X
              event names (respectively) to be logged; all other requests or events are omitted. If the list  of
              items  is prefixed with <b>!</b>, it is instead treated as a list of requests or events <u>not</u> to be logged,
              and anything not in the list is printed. Reply and error packets are not separately filtered: they
              are logged if and only if the request they respond to was logged.

              For example,  to  log  only  <b>ImageText8</b>  and  <b>ImageText16</b>  requests,  you  might  say  `<b>xtruss</b>  <b>-e</b>
              <b>requests=ImageText8,ImageText16</b>  <u>command</u>'  or  just `<b>xtruss</b> <b>-e</b> <b>ImageText8,ImageText16</b> <u>command</u>'. To
              inhibit  the  display   of   <b>FocusIn</b>   and   <b>FocusOut</b>   events,   you   might   say   `<b>xtruss</b>   <b>-e</b>
              <b>events=!FocusIn,FocusOut</b> <u>command</u>'.

              (Note  that  the  <b>!</b>  character might be treated specially by your shell, so you may need to escape
              it.)

       <b>-I</b>     Log the initialisation message sent by the X server at  the  start  of  the  connection.  This  is
              omitted by default because it's particularly long and ugly.

       <b>-R</b>     As  well  as translating the X protocol, also give a raw hex dump of all the data transferred over
              the connection. (Probably most useful to include in a bug report about <b>xtruss</b> itself!)

       <b>-C</b>     Prefix every output line with the X client id (resource base) of the  client  connection  it  came
              from.  By  default  <b>xtruss</b>  only  starts to do this if it's tracing more than one X client; before
              then, lines are unprefixed. This option makes prefixing unconditional from the start of the run.

</pre><h4><b>BUGS</b></h4><pre>
       Many commonly used X protocol extensions are not currently decoded.

       A lot of this program has been only minimally tested.

</pre><h4><b>LICENCE</b></h4><pre>
       <b>xtruss</b> is free software, distributed under the MIT/X11 licence. Type <b>xtruss</b> <b>--licence</b>  to  see  the  full
       licence text.

PuTTY spinoffs                                     2009‐05‐02                                          <u><a href="../man1/xtruss.1.html">xtruss</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>