<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>yadm - Yet Another Dotfiles Manager</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/yadm">yadm_3.5.0-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       yadm - Yet Another Dotfiles Manager

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>yadm</b> <u>command</u> [<u>options</u>]

       <b>yadm</b> <u>git-command-or-alias</u> [<u>options</u>]

       <b>yadm</b> <b>init</b> [<b>-f</b>] [<b>-w</b> <u>dir</u>]

       <b>yadm</b> <b>clone</b> <u>url</u> [<b>-f</b>] [<b>-w</b> <u>dir</u>] [<b>-b</b> <u>branch</u>] [<b>--bootstrap</b>] [<b>--no-bootstrap</b>]

       <b>yadm</b> <b>config</b> <u>name</u> [<u>value</u>]

       <b>yadm</b> <b>config</b> [<b>-e</b>]

       <b>yadm</b> <b>list</b> [<b>-a</b>]

       <b>yadm</b> <b>bootstrap</b>

       <b>yadm</b> <b>encrypt</b>

       <b>yadm</b> <b>decrypt</b> [<b>-l</b>]

       <b>yadm</b> <b>alt</b>

       <b>yadm</b> <b>perms</b>

       <b>yadm</b> <b>enter</b> [<u>command</u>]

       <b>yadm</b> <b>git-crypt</b> [<u>options</u>]

       <b>yadm</b> <b>transcrypt</b> [<u>options</u>]

       <b>yadm</b> <b>upgrade</b> [<b>-f</b>]

       <b>yadm</b> <b>introspect</b> <u>category</u>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       yadm  is  a  tool  for  managing  a  collection  of  files  across multiple computers, using a shared Git
       repository.  In addition, yadm provides a feature to select alternate versions of  files  for  particular
       systems.   Lastly,  yadm  supplies  the  ability  to manage a subset of secure files, which are encrypted
       before they are included in the repository.

</pre><h4><b>COMMANDS</b></h4><pre>
       <u>git-command</u> or <u>git-alias</u>
              Any command not internally handled by yadm is passed through to <b><a href="../man1/git.1.html">git</a></b>(1).  Git commands  or  aliases
              are  invoked with the yadm managed repository.  The working directory for Git commands will be the
              configured <u>work-tree</u> (usually <u>$HOME</u>).

              Dotfiles are managed by using standard <b>git</b> commands; <u>add</u>, <u>commit</u>, <u>push</u>, <u>pull</u>, etc.

              The <u>config</u> command is not passed directly through.  Instead use the <u>gitconfig</u> command (see below).

       <b>alt</b>    Create symbolic links and process templates for  any  managed  files  matching  the  naming  rules
              described in the ALTERNATES and TEMPLATES sections. It is usually unnecessary to run this command,
              as  yadm automatically processes alternates by default. This automatic behavior can be disabled by
              setting the configuration <u>yadm.auto-alt</u> to "false".

       <b>bootstrap</b>
              Execute <u>$HOME/.config/yadm/bootstrap</u> if it exists.

       <b>clone</b> <u>url</u>
              Clone a remote repository for tracking dotfiles.  After the contents of the remote repository have
              been fetched, a "check out" of the remote HEAD branch is  attempted.   If  there  are  conflicting
              files  already present in the <u>work-tree</u>, the local version will be left unmodified and you'll have
              to review and resolve the difference.

              The repository is stored in <u>$HOME/.local/share/yadm/repo.git</u>.  By default, <u>$HOME</u> will be  used  as
              the  <u>work-tree</u>, but this can be overridden with the <b>-w</b> option.  yadm can be forced to overwrite an
              existing repository by providing the <b>-f</b> option.  If you want to use a branch other than the remote
              HEAD branch you can specify it using the <b>-b</b> option.  By default yadm will  ask  the  user  if  the
              bootstrap  program  should  be  run (if it exists). The options <b>--bootstrap</b> or <b>--no-bootstrap</b> will
              either force the bootstrap to be run, or prevent it from being run, without prompting the user.

       <b>config</b> This command manages configurations for yadm.  This command works exactly  the  way  <b><a href="../man1/git-config.1.html">git-config</a></b>(1)
              does.  See the CONFIGURATION section for more details.

       <b>decrypt</b>
              Decrypt  all files stored in <u>$HOME/.local/share/yadm/archive</u>.  Files decrypted will be relative to
              the configured <u>work-tree</u> (usually <u>$HOME</u>).  Using the <b>-l</b> option will list the files stored  without
              extracting them.

       <b>encrypt</b>
              Encrypt  all  files matching the patterns found in <u>$HOME/.config/yadm/encrypt</u>.  See the ENCRYPTION
              section for more details.

       <b>enter</b>  Run a sub-shell with all Git variables set. Exit the sub-shell the same way you leave your  normal
              shell  (usually  with the "exit" command). This sub-shell can be used to easily interact with your
              yadm repository using "git" commands. This could be useful if you are using a tool which uses  Git
              directly, such as tig, vim-fugitive, git-cola, etc.

              Optionally,  you  can  provide  a  command after "enter", and instead of invoking your shell, that
              command will be run with all of the Git variables exposed to the command's environment.

              Emacs Tramp and Magit can manage files by using this configuration:

                  (add-to-list 'tramp-methods
                       '("yadm"
                         (tramp-login-program "yadm")
                         (tramp-login-args (("enter")))
                         (tramp-login-env (("SHELL") ("<a href="file:/bin/sh">/bin/sh</a>")))
                         (tramp-remote-shell "<a href="file:/bin/sh">/bin/sh</a>")
                         (tramp-remote-shell-args ("-c"))))

              With this config, use (magit-status "/yadm::").

       <b>git-crypt</b> <u>options</u>
              If git-crypt is installed, this command allows you to pass options directly to git-crypt, with the
              environment configured to use the yadm repository.

              git-crypt enables transparent encryption and decryption of files in a git repository. You can read
              https://github.com/AGWA/git-crypt for details.

       <b>gitconfig</b>
              Pass options to the <b>git</b> <b>config</b> command. Since yadm already uses the <u>config</u> command to  manage  its
              own  configurations,  this command is provided as a way to change configurations of the repository
              managed by yadm.  One useful case might be to configure the  repository  so  untracked  files  are
              shown in status commands. yadm initially configures its repository so that untracked files are not
              shown.   If  you  wish use the default Git behavior (to show untracked files and directories), you
              can remove this configuration.

                     yadm gitconfig --unset status.showUntrackedFiles

       <b>help</b>   Print a summary of yadm commands.

       <b>init</b>   Initialize  a  new,  empty  repository  for  tracking  dotfiles.   The  repository  is  stored  in
              <u>$HOME/.local/share/yadm/repo.git</u>.   By  default, <u>$HOME</u> will be used as the <u>work-tree</u>, but this can
              be overridden with the <b>-w</b> option.  yadm can be forced  to  overwrite  an  existing  repository  by
              providing the <b>-f</b> option.

       <b>list</b>   Print  a  list of files managed by yadm.  The <b>-a</b> option will cause all managed files to be listed.
              Otherwise, the list will only include files from the current directory or below.

       <b>introspect</b> <u>category</u>
              Report internal yadm data. Supported categories are <u>commands</u>, <u>configs</u>, <u>repo,</u>  and  <u>switches</u>.   The
              purpose of introspection is to support command line completion.

       <b>perms</b>  Update permissions as described in the PERMISSIONS section.  It is usually unnecessary to run this
              command,  as  yadm  automatically processes permissions by default. This automatic behavior can be
              disabled by setting the configuration <u>yadm.auto-perms</u> to "false".

       <b>transcrypt</b> <u>options</u>
              If transcrypt is installed, this command allows you to pass options directly to  transcrypt,  with
              the environment configured to use the yadm repository.

              transcrypt  enables  transparent  encryption  and decryption of files in a git repository. You can
              read https://github.com/elasticdog/transcrypt for details.

       <b>upgrade</b>
              Version 3 of yadm uses a different directory for storing data.  When you start to  use  version  3
              for  the  first  time,  you  may  see  warnings about moving your data to this new directory.  The
              easiest way to accomplish this is by running "yadm upgrade".  This command will  start  by  moving
              your  yadm  repo  to the new path.  Next it will move any archive data.  If the archive is tracked
              within your yadm repo, this command will "stage" the renaming of that file in the repo's index.

              Upgrading will attempt to de-initialize and re-initialize  your  submodules.  If  your  submodules
              cannot  be  de-initialized,  the upgrade will fail. The most common reason submodules will fail to
              de-initialize is because they have local modifications. If you  are  willing  to  lose  the  local
              modifications  to  those submodules, you can use the <b>-f</b> option with the "upgrade" command to force
              the de-initialization.

              After running "yadm upgrade", you should run "yadm status"  to  review  changes  which  have  been
              staged, and commit them to your repository.

              You can read https://yadm.io/docs/upgrade_from_2 for more information.

       <b>version</b>
              Print the version of yadm.

</pre><h4><b>OPTIONS</b></h4><pre>
       yadm  supports  a set of universal options that alter the paths it uses. The default paths are documented
       in the FILES section. Any path specified by these options must be fully qualified. If you always want  to
       override  one  or  more  of  these  paths, it may be useful to create an alias for the yadm command.  For
       example, the following alias could be used to override the repository directory.

              alias yadm='yadm --yadm-repo /alternate/path/to/repo'

       The following is the full list of universal options.  Each option should be followed by a path.

       <b>-Y,</b> <b>--yadm-dir</b>
              Override the yadm directory.  yadm stores its configurations relative to this directory.

       <b>--yadm-data</b>
              Override the yadm data directory.  yadm stores its data relative to this directory.

       <b>--yadm-repo</b>
              Override the location of the yadm repository.

       <b>--yadm-config</b>
              Override the location of the yadm configuration file.

       <b>--yadm-encrypt</b>
              Override the location of the yadm encryption configuration.

       <b>--yadm-archive</b>
              Override the location of the yadm encrypted files archive.

       <b>--yadm-bootstrap</b>
              Override the location of the yadm bootstrap program.

</pre><h4><b>CONFIGURATION</b></h4><pre>
       yadm uses a configuration file named <u>$HOME/.config/yadm/config</u>.  This file uses the same format  as  <b><a href="../man1/gitconfig.1.html">git-</a></b>
       <b><a href="../man1/gitconfig.1.html">config</a></b>(1).   Also,  you  can  control  the contents of the configuration file via the <b>yadm</b> <b>config</b> command
       (which works exactly like <b>git-config</b>).  For example, to disable alternates you can run the command:

              yadm config yadm.auto-alt false

       The following is the full list of supported configurations:

       <b>yadm.alt-copy</b>
              If set to "true", alternate files will be  copies  instead  of  symbolic  links.   This  might  be
              desirable, because some systems may not properly support symlinks.

       <b>yadm.auto-alt</b>
              Disable  the automatic linking described in the section ALTERNATES. If disabled, you may still run
              "yadm alt" manually to create the alternate links. This feature is enabled by default.

       <b>yadm.auto-exclude</b>
              Disable the automatic exclusion of created alternate links, template files and patterns defined in
              <u>$HOME/.config/yadm/encrypt</u>.  This feature is enabled by default.

       <b>yadm.auto-perms</b>
              Disable the automatic permission changes described in the section PERMISSIONS.  If  disabled,  you
              may still run <b>yadm</b> <b>perms</b> manually to update permissions.  This feature is enabled by default.

       <b>yadm.auto-private-dirs</b>
              Disable the automatic creating of private directories described in the section PERMISSIONS.

       <b>yadm.cipher</b>
              Configure  which  encryption  system  is  used by the encrypt/decrypt commands.  Valid options are
              "gpg" and "openssl". The default is "gpg".  Detailed information  can  be  found  in  the  section
              ENCRYPTION.

       <b>yadm.git-program</b>
              Specify  an alternate program to use instead of "git".  By default, the first "git" found in $PATH
              is used.

       <b>yadm.gpg-perms</b>
              Disable the permission changes to <u>$HOME/.gnupg/*</u>.  This feature is enabled by default.

       <b>yadm.gpg-program</b>
              Specify an alternate program to use instead of "gpg".  By default, the first "gpg" found in  $PATH
              is used.

       <b>yadm.gpg-recipient</b>
              Asymmetrically  encrypt  files  with a gpg public/private key pair.  Provide a "key ID" to specify
              which public key to encrypt  with.   The  key  must  exist  in  your  public  keyrings.   Multiple
              recipients  can  be  specified  (separated  by  space).   If left blank or not provided, symmetric
              encryption is used instead.  If set to "ASK", gpg will interactively ask for recipients.  See  the
              ENCRYPTION section for more details.  This feature is disabled by default.

       <b>yadm.openssl-ciphername</b>
              Specify which cipher should be used by openssl.  "aes-256-cbc" is used by default.

       <b>yadm.openssl-old</b>
              Newer  versions of openssl support the pbkdf2 key derivation function. This is used by default. If
              this configuration is set to "true", openssl operations will use  options  compatible  with  older
              versions of openssl. If you change this option, you will need to recreate your encrypted archive.

       <b>yadm.openssl-program</b>
              Specify  an  alternate program to use instead of "openssl".  By default, the first "openssl" found
              in $PATH is used.

       <b>yadm.ssh-perms</b>
              Disable the permission changes to <u>$HOME/.ssh/*</u>.  This feature is enabled by default.

       The following "local" configurations are not stored in the <u>$HOME/.config/yadm/config,</u> they are stored  in
       the local repository.

       <b>local.class</b>
              Specify  a  class  for  the  purpose  of symlinking alternate files.  By default, no class will be
              matched.  The local host can be assigned multiple classes using command:

              yadm config --add local.class &lt;additional-class&gt;

       <b>local.arch</b>
              Override the architecture for the purpose of symlinking alternate files.

       <b>local.hostname</b>
              Override the hostname for the purpose of symlinking alternate files.

       <b>local.os</b>
              Override the OS for the purpose of symlinking alternate files.

       <b>local.user</b>
              Override the user for the purpose of symlinking alternate files.

       <b>local.distro</b>
              Override the distro for the purpose of symlinking alternate files.

       <b>local.distro-family</b>
              Override the distro family for the purpose of symlinking alternate files.

</pre><h4><b>ALTERNATES</b></h4><pre>
       When managing a set of files across different systems, it can be useful  to  have  an  automated  way  of
       choosing an alternate version of a file for a different operating system, host, user, etc.

       yadm  will automatically create a symbolic link to the appropriate version of a file, when a valid suffix
       is appended to the filename. The suffix contains the conditions that must be met  for  that  file  to  be
       used.

       The suffix begins with "##", followed by any number of conditions separated by commas.

         ##&lt;condition&gt;[,&lt;condition&gt;,...]

       Each  condition  is  an  attribute/value  pair,  separated  by a period. Some conditions do not require a
       "value", and in that case, the period and value can be omitted. Most attributes can be abbreviated  as  a
       single letter. Prefixing an attribute with "~" negates the condition, meaning the condition is considered
       only if the attribute/value pair evaluates to false.

         [~]&lt;attribute&gt;[.&lt;value&gt;]

       <b>NOTE</b>: Value is compared case-insensitive.

       These are the supported attributes, in the order of the weighted precedence:

       <b>template</b>, <b>t</b>
              Valid  when  the value matches a supported template processor.  See the TEMPLATES section for more
              details.

       <b>user</b>, <b>u</b>
              Valid if the value matches the current user.  Current user is calculated by running <b>id</b> <b>-u</b> <b>-n</b>.

       <b>hostname</b>, <b>h</b>
              Valid if the value matches the short hostname.  Hostname is calculated by running  <b>uname</b>  <b>-n</b>,  and
              trimming off any domain.

       <b>class</b>, <b>c</b>
              Valid  if  the value matches the <b>local.class</b> configuration.  Class must be manually set using <b>yadm</b>
              <b>config</b> <b>local.class</b> <b>&lt;class&gt;</b>.   See  the  CONFIGURATION  section  for  more  details  about  setting
              <b>local.class</b>.

       <b>distro_family</b>, <b>f</b>
              Valid  if  the  value  matches  the  distro family.  Distro family is calculated by inspecting the
              ID_LIKE line from <b><a href="file:/etc/os-release">/etc/os-release</a></b> (or ID if no ID_LIKE line is found).

       <b>distro</b>, <b>d</b>
              Valid if the value matches the distro.  Distro is calculated by  running  <b>lsb_release</b>  <b>-si</b>  or  by
              inspecting the ID from <b><a href="file:/etc/os-release">/etc/os-release</a></b>.

       <b>os</b>, <b>o</b>  Valid if the value matches the OS.  OS is calculated by running <b>uname</b> <b>-s</b>.

       <b>arch</b>, <b>a</b>
              Valid if the value matches the architecture.  Architecture is calculated by running <b>uname</b> <b>-m</b>.

       <b>default</b>
              Valid when no other alternate is valid.

       <b>extension</b>, <b>e</b>
              A  special  "condition" that doesn't affect the selection process. Its purpose is instead to allow
              the alternate file to end with a certain extension to e.g.  make  editors  highlight  the  content
              properly.

       <b>NOTE</b>:  The  OS  for  "Windows  Subsystem for Linux" is reported as "WSL", even though uname identifies as
       "Linux".

       You may use any number of conditions, in any order.  An alternate will only be used if ALL conditions are
       valid.  For all files managed by yadm's repository or listed in <u>$HOME/.config/yadm/encrypt</u>, if they match
       this naming convention, symbolic links will be created for the most appropriate version.

       The "most appropriate" version is determined by calculating a  score  for  each  version  of  a  file.  A
       template is always scored higher than any symlink condition. The number of conditions is the next largest
       factor  in scoring; files with more conditions will always be favored. Negative conditions (prefixed with
       "~") are scored only relative to the number  of  non-negated  conditions.   Any  invalid  condition  will
       disqualify that file completely.

       If  you  don't  care  to  have  all  versions of alternates stored in the same directory as the generated
       symlink, you can place them in the <u>$HOME/.config/yadm/alt</u> directory. The generated symlink  or  processed
       template will be created using the same relative path.

       Alternate  linking  may best be demonstrated by example. Assume the following files are managed by yadm's
       repository:

         - $HOME/path/example.txt##default
         - $HOME/path/example.txt##class.Work
         - $HOME/path/example.txt##class.Work,~os.Darwin
         - $HOME/path/example.txt##os.Darwin
         - $HOME/path/example.txt##os.Darwin,hostname.host1
         - $HOME/path/example.txt##os.Darwin,hostname.host2
         - $HOME/path/example.txt##os.Linux
         - $HOME/path/example.txt##os.Linux,hostname.host1
         - $HOME/path/example.txt##os.Linux,hostname.host2

       If running on a Macbook named "host2", yadm will create a symbolic link which looks like this:

       <u>$HOME/path/example.txt</u> -&gt; <u>$HOME/path/example.txt##os.Darwin,hostname.host2</u>

       However, on another Mackbook named "host3", yadm will create a symbolic link which looks like this:

       <u>$HOME/path/example.txt</u> -&gt; <u>$HOME/path/example.txt##os.Darwin</u>

       Since the hostname doesn't match any of the managed files, the more generic version is chosen.

       If running on a Linux server named "host4", the link will be:

       <u>$HOME/path/example.txt</u> -&gt; <u>$HOME/path/example.txt##os.Linux</u>

       If running on a Solaris server, the link will use the default version:

       <u>$HOME/path/example.txt</u> -&gt; <u>$HOME/path/example.txt##default</u>

       If running on a Macbook with class set to "Work", the link will be:

       <u>$HOME/path/example.txt</u> -&gt; <u>$HOME/path/example.txt##class.Work</u>

       Since class has higher precedence than os, this version is chosen.

       If running on a system with class set to "Work", but instead within Windows Subsystem  for  Linux,  where
       the os is reported as WSL, the link will be:

       <u>$HOME/path/example.txt</u> -&gt; <u>$HOME/path/example.txt##class.Work,~os.Darwin</u>

       If no "##default" version exists and no files have valid conditions, then no link will be created.

       Links  are  also  created  for directories named this way, as long as they have at least one yadm managed
       file within them.

       yadm will automatically create these links by default. This  can  be  disabled  using  the  <u>yadm.auto-alt</u>
       configuration.  Even if disabled, links can be manually created by running <b>yadm</b> <b>alt</b>.

       Created  links  are automatically added to the repository's <u>info/exclude</u> file. This can be disabled using
       the <u>yadm.auto-exclude</u> configuration.

       Class is a special value which is stored locally on each host  (inside  the  local  repository).  To  use
       alternate  symlinks  using  class,  you  must set the value of class using the configuration <b>local.class</b>.
       This is set like any other yadm configuration with the <b>yadm</b> <b>config</b> command. The following sets the  class
       to be "Work".

         yadm config local.class Work

       Similarly,  the  values  of  architecture,  os, hostname, user, distro, and distro_family can be manually
       overridden  using  the  configuration   options   <b>local.arch</b>,   <b>local.os</b>,   <b>local.hostname</b>,   <b>local.user</b>,
       <b>local.distro</b>, and <b>local.distro-family</b>.

</pre><h4><b>TEMPLATES</b></h4><pre>
       If a template condition is defined in an alternate file's "##" suffix, and the necessary dependencies for
       the template are available, then the file will be processed to create or overwrite files.

       Supported template processors:

       <b>default</b>
              This  is  yadm's  built-in  template  processor.  This  processor is very basic, with a Jinja-like
              syntax. The advantage of this processor is that it only depends upon <b>awk</b>, which  is  available  on
              most  *nix  systems. To use this processor, specify the value of "default" or just leave the value
              off (e.g. "##template").

              <b>NOTE</b>: This template processor performs case-insensitive comparisons in if statements.

       <b>ESH</b>    ESH is a template processor written in POSIX compliant shell. It allows executing  shell  commands
              within  templates.  This  can  be  used to reference your own configurations within templates, for
              example:

                &lt;% yadm config mysection.myconfig %&gt;

              To use the ESH template processor, specify the value of "esh"

       <b>j2cli</b>  To use the j2cli Jinja template processor, specify the value of "j2"  or "j2cli".

       <b>envtpl</b> To use the envtpl Jinja template processor, specify the value of "j2" or "envtpl".

       <b>NOTE</b>: Specifying "j2" as the processor will attempt to use j2cli or envtpl, whichever is available.

       If the template processor specified is available, templates will be  processed  to  create  or  overwrite
       files.

       During processing, the following variables are available in the template:

        Default              Jinja or ESH         Description
        -------------        -------------        ----------------------------
        yadm.arch            YADM_ARCH            uname -m
        yadm.class           YADM_CLASS           Last locally defined class
        yadm.classes         YADM_CLASSES         All classes
        yadm.distro          YADM_DISTRO          lsb_release -si
        yadm.distro_family   YADM_DISTRO_FAMILY   ID_LIKE from <a href="file:/etc/os-release">/etc/os-release</a>
        yadm.filename                             Filename for the current file
        yadm.hostname        YADM_HOSTNAME        uname -n (without domain)
        yadm.os              YADM_OS              uname -s
        yadm.source          YADM_SOURCE          Template filename
        yadm.user            YADM_USER            id -u -n
        env.VAR                                   Environment variable VAR

       <b>NOTE</b>:  The  OS  for  "Windows  Subsystem for Linux" is reported as "WSL", even though uname identifies as
       "Linux".

       <b>NOTE</b>: If lsb_release is not available, DISTRO will be the ID specified in /etc/os-release.

       Examples:

       <u>whatever##template</u> with the following content

         {% if yadm.user == "harvey" %}
         config={{yadm.class}}-{{yadm.os}}
         {% else %}
         config=dev-whatever
         {% include "whatever.extra" %}
         {% endif %}

       would output a file named <u>whatever</u> with the following content if the user is "harvey":

         config=work-Linux

       and the following otherwise (if <u>whatever.extra</u> contains admin=false):

         config=dev-whatever
         admin=false

       An equivalent Jinja template named <u>whatever##template.j2</u> would look like:

         {% if YADM_USER == 'harvey' -%}
         config={{YADM_CLASS}}-{{YADM_OS}}
         {% else -%}
         config=dev-whatever
         {% include 'whatever.extra' %}
         {% endif -%}

       An equivalent ESH templated named <u>whatever##template.esh</u> would look like:

         &lt;% if [ "$YADM_USER" = "harvey" ]; then -%&gt;
         config=&lt;%= $YADM_CLASS %&gt;-&lt;%= $YADM_OS %&gt;
         &lt;% else -%&gt;
         config=dev-whatever
         &lt;%+ whatever.extra %&gt;
         &lt;% fi -%&gt;

       Created files are automatically added to the repository's <u>info/exclude</u> file. This can be  disabled  using
       the <u>yadm.auto-exclude</u> configuration.

</pre><h4><b>ENCRYPTION</b></h4><pre>
       It  can  be  useful to manage confidential files, like SSH or GPG keys, across multiple systems. However,
       doing so would put plain text data into a Git repository, which often resides on a  public  system.  yadm
       can  make it easy to encrypt and decrypt a set of files so the encrypted version can be maintained in the
       Git repository.  This feature will only  work  if  a  supported  tool  is  available.   Both  <b><a href="../man1/gpg.1.html">gpg</a></b>(1)  and
       <b><a href="../man1/openssl.1.html">openssl</a></b>(1)  are  supported.   gpg  is used by default, but openssl can be configured with the <u>yadm.cipher</u>
       configuration.

       To  use  this  feature,  a  list  of  patterns  (one  per  line)   must   be   created   and   saved   as
       <u>$HOME/.config/yadm/encrypt</u>.    This  list  of  patterns  should  be  relative  to  the  configured  <u>work-</u>
       <u>tree</u> (usually <u>$HOME</u>).  For example:

                  .ssh/*.key
                  .gnupg/*.gpg

       Standard filename expansions (*, ?, [) are supported. Two consecutive asterisks "**" can be used to match
       all subdirectories.  Other shell expansions like brace and tilde are not supported.  Spaces in paths  are
       supported,  and should not be quoted.  If a directory is specified, its contents will be included.  Paths
       beginning with a "!" will be excluded.

       The <b>yadm</b> <b>encrypt</b> command will find all files matching the patterns, and prompt for  a  password.  Once  a
       password    has    confirmed,    the    matching    files    will    be    encrypted    and    saved   as
       <u>$HOME/.local/share/yadm/archive</u>.  The  "encrypt"  and  "archive"  files  should  be  added  to  the  yadm
       repository so they are available across multiple systems.

       To  decrypt  these  files  later, or on another system run <b>yadm</b> <b>decrypt</b> and provide the correct password.
       After files are decrypted, permissions are automatically updated as described in the PERMISSIONS section.

       Symmetric encryption is used by default, but asymmetric encryption may be  enabled  using  the  <u>yadm.gpg-</u>
       <u>recipient</u> configuration.

       <b>NOTE</b>:  It  is  recommended that you use a private repository when keeping confidential files, even though
       they are encrypted.

       Patterns found in <u>$HOME/.config/yadm/encrypt</u> are automatically added  to  the  repository's  <u>info/exclude</u>
       file  every  time  <b>yadm</b> <b>encrypt</b> is run.  This is to prevent accidentally committing sensitive data to the
       repository.  This can be disabled using the <u>yadm.auto-exclude</u> configuration.

       <b>Using</b> <b>transcrypt</b> <b>or</b> <b>git-crypt</b>

       A completely separate option for encrypting data is to install and use  transcrypt  or  git-crypt.   Once
       installed,  you  can  use  these tools by running <b>yadm</b> <b>transcrypt</b> or <b>yadm</b> <b>git-crypt</b>.  These tools enables
       transparent encryption and decryption of files in a git repository. See the following web sites for  more
       information:

       - https://github.com/elasticdog/transcrypt

       - https://github.com/AGWA/git-crypt

</pre><h4><b>PERMISSIONS</b></h4><pre>
       When  files  are checked out of a Git repository, their initial permissions are dependent upon the user's
       umask. Because of this, yadm will automatically update the permissions of some file  paths.  The  "group"
       and "others" permissions will be removed from the following files:

       - <u>$HOME/.local/share/yadm/archive</u>

       - All files matching patterns in <u>$HOME/.config/yadm/encrypt</u>

       - The SSH directory and files, <u>.ssh/*</u>

       - The GPG directory and files, <u>.gnupg/*</u>

       yadm  will  automatically  update  permissions by default. This can be disabled using the <u>yadm.auto-perms</u>
       configuration. Even if disabled, permissions can be manually updated by running  <b>yadm</b>  <b>perms</b>.   The  <u>.ssh</u>
       directory  processing  can  be  disabled  using  the  <u>yadm.ssh-perms</u>  configuration. The <u>.gnupg</u> directory
       processing can be disabled using the <u>yadm.gpg-perms</u> configuration.

       When cloning a repo which includes data in a <u>.ssh</u> or <u>.gnupg</u> directory, if those directories do not  exist
       at the time of cloning, yadm will create the directories with mask 0700 prior to merging the fetched data
       into the work-tree.

       When  running  a  Git  command  and  <u>.ssh</u>  or  <u>.gnupg</u>  directories  do  not exist, yadm will create those
       directories with mask 0700 prior to running the Git command. This can be disabled  using  the  <u>yadm.auto-</u>
       <u>private-dirs</u> configuration.

</pre><h4><b>HOOKS</b></h4><pre>
       For every command yadm supports, a program can be provided to run before or after that command. These are
       referred  to  as  "hooks".  yadm looks for hooks in the directory <u>$HOME/.config/yadm/hooks</u>.  Each hook is
       named using a prefix of <u>pre</u><b>_</b> or <u>post</u><b>_</b>, followed by  the  command  which  should  trigger  the  hook.  For
       example,  to  create  a  hook  which is run after every <u>yadm</u> <u>pull</u> command, create a hook named <u>post_pull.</u>
       Hooks must have the executable file permission set.

       If a <u>pre</u><b>_</b> hook is defined, and the hook terminates with a non-zero exit status, yadm will refuse  to  run
       the  yadm  command.  For  example, if a <u>pre_commit</u> hook is defined, but that command ends with a non-zero
       exit status, the <u>yadm</u> <u>commit</u> will never be run. This allows one to "short-circuit" any operation using  a
       <u>pre</u><b>_</b> hook.

       Hooks have the following environment variables available to them at runtime:

       <b>YADM_HOOK_COMMAND</b>
              The command which triggered the hook

       <b>YADM_HOOK_DATA</b>
              The path to the yadm data directory

       <b>YADM_HOOK_DIR</b>
              The path to the yadm directory

       <b>YADM_HOOK_EXIT</b>
              The exit status of the yadm command

       <b>YADM_HOOK_FULL_COMMAND</b>
              The  yadm  command with all command line arguments (parameters are space delimited, and any space,
              tab or backslash will be escaped with a backslash)

       <b>YADM_HOOK_REPO</b>
              The path to the yadm repository

       <b>YADM_HOOK_WORK</b>
              The path to the work-tree

</pre><h4><b>FILES</b></h4><pre>
       All of yadm's configurations are relative to the "yadm directory".  yadm uses  the  "XDG  Base  Directory
       Specification" to determine this directory.  If the environment variable <b>$XDG_CONFIG_HOME</b> is defined as a
       fully   qualified   path,   this   directory   will  be  <u>$XDG_CONFIG_HOME/yadm</u>.   Otherwise  it  will  be
       <u>$HOME/.config/yadm</u>.

       Similarly, yadm's data files are relative to  the  "yadm  data  directory".   yadm  uses  the  "XDG  Base
       Directory  Specification"  to  determine  this  directory.  If the environment variable <b>$XDG_DATA_HOME</b> is
       defined as a fully qualified path, this directory will be  <u>$XDG_DATA_HOME/yadm</u>.   Otherwise  it  will  be
       <u>$HOME/.local/share/yadm</u>.

       The following are the default paths yadm uses for its own data.  Most of these paths can be altered using
       universal options.  See the OPTIONS section for details.

       <u>$HOME/.config/yadm</u>
              The yadm directory. By default, all configs yadm stores is relative to this directory.

       <u>$HOME/.local/share/yadm</u>
              The yadm data directory. By default, all data yadm stores is relative to this directory.

       <u>$YADM_DIR/config</u>
              Configuration file for yadm.

       <u>$YADM_DIR/alt</u>
              This  is a directory to keep "alternate files" without having them side-by-side with the resulting
              symlink or processed template. Alternate files placed in this directory will be  created  relative
              to $HOME instead.

       <u>$YADM_DATA/repo.git</u>
              Git repository used by yadm.

       <u>$YADM_DIR/encrypt</u>
              List of globs used for encrypt/decrypt

       <u>$YADM_DATA/archive</u>
              All files encrypted with <b>yadm</b> <b>encrypt</b> are stored in this file.

</pre><h4><b>EXAMPLES</b></h4><pre>
       <b>yadm</b> <b>init</b>
              Create an empty repo for managing files

       <b>yadm</b> <b>add</b> <b>.bash_profile</b> <b>;</b> <b>yadm</b> <b>commit</b>
              Add <u>.bash_profile</u> to the Git index and create a new commit

       <b>yadm</b> <b>remote</b> <b>add</b> <b>origin</b> <b>&lt;url&gt;</b>
              Add a remote origin to an existing repository

       <b>yadm</b> <b>push</b> <b>-u</b> <b>origin</b> <b>master</b>
              Initial push of master to origin

       <b>echo</b> <b>.ssh/*.key</b> <b>&gt;&gt;</b> <b>$HOME/.config/yadm/encrypt</b>
              Add a new pattern to the list of encrypted files

       <b>yadm</b> <b>encrypt</b> <b>;</b> <b>yadm</b> <b>add</b> <b><a href="file:~/.local/share/yadm/archive">~/.local/share/yadm/archive</a></b> <b>;</b> <b>yadm</b> <b>commit</b>
              Commit a new set of encrypted files

</pre><h4><b>REPORTING</b> <b>BUGS</b></h4><pre>
       Report issues or create pull requests at GitHub:

       https://github.com/yadm-dev/yadm/issues

</pre><h4><b>AUTHORS</b></h4><pre>
       Tim Byrne &lt;<a href="mailto:sultan@locehilios.com">sultan@locehilios.com</a>&gt;

       Erik Flodin &lt;<a href="mailto:erik@flodin.me">erik@flodin.me</a>&gt;

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man1/git.1.html">git</a></b>(1), <b><a href="../man1/gpg.1.html">gpg</a></b>(1) <b><a href="../man1/openssl.1.html">openssl</a></b>(1) <b><a href="../man1/transcrypt.1.html">transcrypt</a></b>(1) <b><a href="../man1/git-crypt.1.html">git-crypt</a></b>(1)

       https://yadm.io/

3.5.0                                             March 3, 2025                                          <u><a href="../man1/YADM.1.html">YADM</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>