<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>pg_ctlcluster - start/stop/restart/reload a PostgreSQL cluster</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/postgresql-common">postgresql-common_274_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       pg_ctlcluster - start/stop/restart/reload a PostgreSQL cluster

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>pg_ctlcluster</b> [<u>options</u>] <u>cluster-version</u> <u>cluster-name</u> <u>action</u> [<b>--</b> <u>pg_ctl</u> <u>options</u>]

       where <u>action</u> = <b>start</b>|<b>stop</b>|<b>restart</b>|<b>reload</b>|<b>status</b>|<b>promote</b>|<b>logrotate</b>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This program controls the <b>postgres</b> server for a particular cluster. It essentially wraps the <b><a href="../man1/pg_ctl.1.html">pg_ctl</a></b>(1)
       command. It determines the cluster version and data path and calls the right version of <b>pg_ctl</b> with
       appropriate configuration parameters and paths.

       You have to start this program as the user who owns the database cluster or as root.

       To ease integration with <b>systemd</b> operation, the alternative syntax "<b>pg_ctlcluster</b> <u>version</u><b>-</b><u>cluster</u> <u>action</u>"
       is also supported, as well as putting the action first (matching the ordering used by <b>systemctl</b>).

</pre><h4><b>ACTIONS</b></h4><pre>
       <b>start</b>
           A  log  file  for  this  specific  cluster  is  created  if  it  does  not  exist  yet  (by  default,
           /var/log/postgresql/postgresql-<u>cluster-version</u>-<u>cluster-name</u>.log), and  a  PostgreSQL  server  process
           (<b><a href="../man1/postgres.1.html">postgres</a></b>(1)) is started on it. Exits with 0 on success, with 2 if the server is already running, and
           with 1 on other failure conditions.

       <b>stop</b>
           Stops the <b><a href="../man1/postgres.1.html">postgres</a></b>(1) server of the given cluster. By default, "fast" shutdown mode is used.

       <b>restart</b>
           Stops the server if it is running and starts it (again).

       <b>reload</b>
           Causes the configuration files to be re-read without a full shutdown of the server.

       <b>status</b>
           Checks  whether a server is running. If it is, the PID and the command line options that were used to
           invoke it are displayed.

       <b>promote</b>
           Commands a running standby server to exit recovery and begin read-write operations.

       <b>logrotate</b>
           Requests that the server of a given cluster rotates the log file.

</pre><h4><b>OPTIONS</b></h4><pre>
       <b>-f</b>|<b>--force</b>
           For <b>stop</b> and <b>restart</b>, the "fast" mode is used which rolls back all active  transactions,  disconnects
           clients  immediately  and thus shuts down cleanly. If that does not work, shutdown is attempted again
           in "immediate" mode, which can leave the cluster in an inconsistent state and thus  will  lead  to  a
           recovery  run  at the next start. If this still does not help, the <b>postgres</b> process is killed.  Exits
           with 0 on success, with 2 if the server is not running, and with 1 on other failure conditions.  This
           mode should only be used when the machine is about to be shut down.

       <b>-m</b>|<b>--mode</b> [<b>smart</b>|<b>fast</b>|<b>immediate</b>]
           Shutdown mode to use for <b>stop</b> and <b>restart</b> actions, default is <b>fast</b>.  See <b><a href="../man1/pg_ctl.1.html">pg_ctl</a></b>(1) for documentation.

       <b>--foreground</b>
           Start <b>postgres</b> in foreground, without daemonizing via <b>pg_ctl</b>.

       <b>--stdlog</b>
           When  <b>--foreground</b>  is  in  use,  redirect  stderr  to  the standard logfile in /var/log/postgresql/.
           (Default when not run in foreground.)

       <b>--skip-systemctl-redirect</b>
           When running as root, <b>pg_ctlcluster</b> redirects actions to <b>systemctl</b> so running clusters  are  properly
           supervised  by  <b>systemd</b>.  This  option skips the redirect; it is used in the <b>postgresql@.service</b> unit
           file. The redirect is also skipped if additional <b>postgres</b> or <b>pg_ctl</b> options are provided.

       <b>--bindir</b> <u>directory</u>
           Path to <b>pg_ctl</b>.  (Default is /usr/lib/postgresql/<u>version</u>/bin.)

       <b>-o</b>|<b>--options</b> <u>option</u>
           Pass given <u>option</u> as command line option to the postgres  process.  It  is  possible  to  specify  <b>-o</b>
           multiple times. See <b><a href="../man1/postgres.1.html">postgres</a></b>(1) for a description of valid options.

       <u>pg_ctl</u> <u>options</u>
           Pass given <u>pg_ctl</u> <u>options</u> as command line options to <b>pg_ctl</b>. See <b><a href="../man1/pg_ctl.1.html">pg_ctl</a></b>(1) for a description of valid
           options.

</pre><h4><b>FILES</b></h4><pre>
       /etc/postgresql/<u>cluster-version</u>/<u>cluster-name</u>/pg_ctl.conf
           This configuration file contains cluster specific options to be passed to <b><a href="../man1/pg_ctl.1.html">pg_ctl</a></b>(1).

       /etc/postgresql/<u>cluster-version</u>/<u>cluster-name</u>/start.conf
           This  configuration  file  controls  the  start/stop  behavior  of  the cluster. See section "STARTUP
           CONTROL" in <b><a href="../man8/pg_createcluster.8.html">pg_createcluster</a></b>(8) for details.

</pre><h4><b>BUGS</b></h4><pre>
       Changing the port number on startup using <b>-o</b> <b>-p</b> will not  work  as  it  breaks  the  checks  for  running
       clusters.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man8/pg_createcluster.8.html">pg_createcluster</a></b>(8), <b><a href="../man1/pg_ctl.1.html">pg_ctl</a></b>(1), <b><a href="../man1/pg_wrapper.1.html">pg_wrapper</a></b>(1), <b><a href="../man1/pg_lsclusters.1.html">pg_lsclusters</a></b>(1), <b><a href="../man1/postgres.1.html">postgres</a></b>(1)

</pre><h4><b>AUTHOR</b></h4><pre>
       Martin Pitt &lt;<a href="mailto:mpitt@debian.org">mpitt@debian.org</a>&gt;

Debian                                             2025-02-20                                   <u><a href="../man1/PG_CTLCLUSTER.1.html">PG_CTLCLUSTER</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>