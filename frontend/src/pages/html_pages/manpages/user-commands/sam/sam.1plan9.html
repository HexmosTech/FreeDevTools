<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>sam, B, E, sam.save, samterm, samsave - screen editor with structural regular expressions</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/9base">9base_6-14_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       sam, B, E, sam.save, samterm, samsave - screen editor with structural regular expressions

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>sam</b> [ <u>option</u> <u>...</u>  ] [ <u>files</u> ]

       <b>sam</b> <b>-r</b> <u>machine</u>

       <b>sam.save</b>

       <b>B</b> <u>file</u>[<b>:</b><u>line</u>] ...

       <b>E</b> <u>file</u>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <u>Sam</u>  is  a  multi-file  editor.  It modifies a local copy of an external file.  The copy is here called a
       <u>file</u>.  The files are listed in a menu available through mouse button 3 or the <b>n</b> command.  Each  file  has
       an  associated  name,  usually the name of the external file from which it was read, and a `modified' bit
       that indicates whether the editor's file agrees with the external file.  The external file  is  not  read
       into  the  editor's  file  until  it first becomes the current file—that to which editing commands apply—
       whereupon its menu entry is printed.  The options are

       <b>-a</b>     Autoindent.  In this mode, when a newline character is typed in the  terminal  interface,  <u>samterm</u>
              copies leading white space on the current line to the new line.

       <b>-d</b>     Do  not `download' the terminal part of <u>sam</u>.  Editing will be done with the command language only,
              as in <u><a href="../man1/ed.1.html">ed</a></u>(1).

       <b>-r</b> <u>machine</u>
              Run the host part remotely on the specified machine, the terminal part locally.

       <b>-s</b> <u>path</u>
              Start the host part from the specified file on the remote  host.   Only  meaningful  with  the  <b>-r</b>
              option.

       <b>-t</b> <u>path</u>
              Start the terminal part from the specified file.  Useful for debugging.

   <b>Regular</b> <b>expressions</b>
       Regular  expressions  are  as  in  <u><a href="../man7/regexp.7.html">regexp</a></u>(7)  with  the  addition of <b>\n</b> to represent newlines.  A regular
       expression may never contain a literal newline character.  The empty regular expression  stands  for  the
       last complete expression encountered.  A regular expression in <u>sam</u> matches the longest leftmost substring
       formally  matched  by  the  expression.   Searching  in  the reverse direction is equivalent to searching
       backwards with the catenation operations reversed in the expression.

   <b>Addresses</b>
       An address identifies a substring in a file.  In the following, `character <u>n</u>' means the null string after
       the <u>n</u>-th character in the file, with 1 the first character in the file.  `Line <u>n</u>' means the  <u>n</u>-th  match,
       starting  at  the  beginning  of  the  file,  of  the  regular expression All files always have a current
       substring, called dot, that is the default address.

   <b>Simple</b> <b>Addresses</b>
       <b>#</b><u>n</u>     The empty string after character <u>n</u>; <b>#0</b> is the beginning of the file.
       <u>n</u>      Line <u>n</u>; <b>0</b> is the beginning of the file.
       <b>/</b><u>regexp</u><b>/</b>
       <b>?</b><u>regexp</u><b>?</b>
              The substring that matches the regular  expression,  found  by  looking  toward  the  end  (<b>/</b>)  or
              beginning  (<b>?</b>)   of  the  file,  and  if necessary continuing the search from the other end to the
              starting point of the search.  The matched  substring  may  straddle  the  starting  point.   When
              entering  a  pattern  containing  a literal question mark for a backward search, the question mark
              should be specified as a member of a class.

       <b>0</b>      The string before the first full line.  This is not necessarily the  null  string;  see  <b>+</b>  and  <b>-</b>
              below.

       <b>$</b>      The null string at the end of the file.

       <b>.</b>      Dot.

       <b>'</b>      The mark in the file (see the <b>k</b> command below).

       <b>"</b><u>regexp</u><b>"</b>
              Preceding  a  simple address (default <b>.</b>), refers to the address evaluated in the unique file whose
              menu line matches the regular expression.

   <b>Compound</b> <b>Addresses</b>
       In the following, <u>a1</u> and <u>a2</u> are addresses.

       <u>a1</u><b>+</b><u>a2</u>  The address <u>a2</u> evaluated starting at the end of <u>a1</u>.

       <u>a1</u><b>-</b><u>a2</u>  The address <u>a2</u> evaluated looking in the reverse direction starting at the beginning of <u>a1</u>.

       <u>a1</u><b>,</b><u>a2</u>  The substring from the beginning of <u>a1</u> to the end of <u>a2</u>.  If <u>a1</u> is missing, <b>0</b> is substituted.   If
              <u>a2</u> is missing, <b>$</b> is substituted.

       <u>a1</u><b>;</b><u>a2</u>  Like <u>a1</u><b>,</b><u>a2</u>, but with <u>a2</u> evaluated at the end of, and dot set to, <u>a1</u>.

       The operators <b>+</b> and <b>-</b> are high precedence, while <b>,</b> and <b>;</b> are low precedence.

       In both <b>+</b> and <b>-</b> forms, if <u>a2</u> is a line or character address with a missing number, the number defaults to
       1.   If  <u>a1</u>  is  missing,  is  substituted.   If both <u>a1</u> and <u>a2</u> are present and distinguishable, <b>+</b> may be
       elided.  <u>a2</u> may be a regular expression; if it is delimited by the effect of the <b>+</b> or <b>-</b> is reversed.

       It is an error for a compound address to represent a  malformed  substring.   Some  useful  idioms:  <u>a1</u><b>+-</b>
       (<u>a1</u><b>-+</b>)  selects  the line containing the end (beginning) of a1.  <b>0/</b><u>regexp</u><b>/</b> locates the first match of the
       expression in the file.  (The form <b>0;//</b> sets dot unnecessarily.)  <b>./</b><u>regexp</u><b>///</b> finds the second  following
       occurrence of the expression, and <b>.,/</b><u>regexp</u><b>/</b> extends dot.

   <b>Commands</b>
       In  the following, text demarcated by slashes represents text delimited by any printable character except
       alphanumerics.  Any number of trailing delimiters may be elided, with multiple elisions then representing
       null strings, but the first delimiter must always be present.  In any delimited  text,  newline  may  not
       appear  literally;  <b>\n</b> may be typed for newline; and <b>\/</b> quotes the delimiter, here Backslash is otherwise
       interpreted literally, except in <b>s</b> commands.

       Most commands may be prefixed by an address to indicate their range of operation.  Those that may not are
       marked with a below.  If a command takes an address  and  none  is  supplied,  dot  is  used.   The  sole
       exception  is  the  <b>w</b>  command,  which defaults to <b>0,$</b>.  In the description, `range' is used to represent
       whatever address is supplied.  Many commands set the value of dot as a side effect.  If so, it is  always
       set  to  the `result' of the change: the empty string for a deletion, the new text for an insertion, etc.
       (but see the <b>s</b> and <b>e</b> commands).

   <b>Text</b> <b>commands</b>
       <b>a/</b><u>text</u><b>/</b>
       or
       <b>a</b>
       <u>lines</u> <u>of</u> <u>text</u>
       <b>.</b>      Insert the text into the file after the range.  Set dot.

       <b>c</b>
       <b>i</b>      Same as <b>a</b>, but <b>c</b> replaces the text, while <b>i</b> inserts <u>before</u> the range.

       <b>d</b>      Delete the text in the range.  Set dot.

       <b>s/</b><u>regexp</u><b>/</b><u>text</u><b>/</b>
              Substitute <u>text</u> for the first match to the regular expression  in  the  range.   Set  dot  to  the
              modified  range.   In  <u>text</u>  the  character  <b>&amp;</b>  stands for the string that matched the expression.
              Backslash behaves as usual unless followed by a digit: <b>\</b><u>d</u> stands for the string that  matched  the
              subexpression  begun by the <u>d</u>-th left parenthesis.  If <u>s</u> is followed immediately by a number <u>n</u>, as
              in <b>s2/x/y/</b>, the <u>n</u>-th match in the range is substituted.  If the command is followed by a <b>g</b>, as  in
              <b>s/x/y/g</b>, all matches in the range are substituted.

       <b>m</b> <u>a1</u>
       <b>t</b> <u>a1</u>   Move (<b>m</b>) or copy (<b>t</b>) the range to after <u>a1</u>.  Set dot.

   <b>Display</b> <b>commands</b>
       <b>p</b>      Print the text in the range.  Set dot.
       <b>=</b>      Print the line address and character address of the range.
       <b>=#</b>     Print just the character address of the range.

   <b>File</b> <b>commands</b>
       * <b>b</b> <u>file-list</u>
              Set  the current file to the first file named in the list that <u>sam</u> also has in its menu.  The list
              may be expressed <b>&lt;</b><u>Plan</u> <u>9</u> <u>command</u> in which case the file names are taken as  words  (in  the  shell
              sense) generated by the Plan 9 command.
       * <b>B</b> <u>file-list</u>
              Same  as  <b>b</b>,  except  that file names not in the menu are entered there, and all file names in the
              list are examined.
       * <b>n</b>    Print a menu of files.  The format is:
              <b>'</b> or blank indicating the file is modified or clean,
              <b>-</b> or <b>+</b>     indicating the file is unread or has been read (in the terminal, <b>*</b> means more than  one
                         window is open),
              <b>.</b> or blank indicating the current file,
              a blank,
              and the file name.
       * <b>D</b> <u>file-list</u>
       Delete  the  named  files  from  the menu.  If no files are named, the current file is deleted.  It is an
       error to <b>D</b> a modified file, but a subsequent <b>D</b> will delete such a file.

   <b>I/O</b> <b>Commands</b>
       * <b>e</b> <u>filename</u>
              Replace the file by the contents of the named external file.  Set dot  to  the  beginning  of  the
              file.
       <b>r</b> <u>filename</u>
              Replace the text in the range by the contents of the named external file.  Set dot.
       <b>w</b> <u>filename</u>
              Write the range (default <b>0,$</b>) to the named external file.
       * <b>f</b> <u>filename</u>
              Set the file name and print the resulting menu entry.
       If  the  file  name  is  absent from any of these, the current file name is used.  <b>e</b> always sets the file
       name; <b>r</b> and <b>w</b> do so if the file has no name.
       <b>&lt;</b> <u>Plan</u> <u>9-command</u>
              Replace the range by the standard output of the Plan 9 command.
       <b>&gt;</b> <u>Plan</u> <u>9-command</u>
              Send the range to the standard input of the Plan 9 command.
       <b>|</b> <u>Plan</u> <u>9-command</u>
              Send the range to the standard input, and replace it  by  the  standard  output,  of  the  Plan  9
              command.
       * <b>!</b> <u>Plan</u> <u>9-command</u>
              Run the Plan 9 command.
       * <b>cd</b> <u>directory</u>
              Change working directory.  If no directory is specified, <b>$home</b> is used.

       In  any  of  <b>&lt;</b>,  <b>&gt;</b>,  <b>|</b>  or  <b>!</b>,  if the <u>Plan</u> <u>9</u> <u>command</u> is omitted the last <u>Plan</u> <u>9</u> <u>command</u> (of any type) is
       substituted.  If <u>sam</u> is <u>downloaded</u> (using the mouse and raster display, i.e.  not  using  option  <b>-d</b>),  <b>!</b>
       sets  standard  input to <b>/dev/null</b>, and otherwise unassigned output (<b>stdout</b> for <b>!</b>  and <b>&gt;</b>, <b>stderr</b> for all)
       is placed in <b>/tmp/sam.err</b> and the first few lines are printed.

   <b>Loops</b> <b>and</b> <b>Conditionals</b>
       <b>x/</b><u>regexp</u><b>/</b> <u>command</u>
              For each match of the regular expression in the range, run the command with dot set to the  match.
              Set  dot  to  the  last match.  If the regular expression and its slashes are omitted, is assumed.
              Null string matches potentially occur before every character of the range and at the  end  of  the
              range.
       <b>y/</b><u>regexp</u><b>/</b> <u>command</u>
              Like  <b>x</b>,  but  run  the command for each substring that lies before, between, or after the matches
              that would be  generated  by  <b>x</b>.   There  is  no  default  regular  expression.   Null  substrings
              potentially occur before every character in the range.
       * <b>X/</b><u>regexp</u><b>/</b> <u>command</u>
              For  each file whose menu entry matches the regular expression, make that the current file and run
              the command.  If the expression is omitted, the command is run in every file.
       * <b>Y/</b><u>regexp</u><b>/</b> <u>command</u>
              Same as <b>X</b>, but for files that do not match the regular expression, and the expression is required.
       <b>g/</b><u>regexp</u><b>/</b> <u>command</u>
       <b>v/</b><u>regexp</u><b>/</b> <u>command</u>
              If the range contains (<b>g</b>) or does not contain (<b>v</b>) a match for the expression, set dot to the range
              and run the command.
       These may be nested arbitrarily deeply, but only one instance of either <b>X</b> or <b>Y</b> may  appear  in  a  single
       command.  An empty command in an <b>x</b> or <b>y</b> defaults to <b>p</b>; an empty command in <b>X</b> or <b>Y</b> defaults to <b>f</b>.  <b>g</b> and <b>v</b>
       do not have defaults.

   <b>Miscellany</b>
       <b>k</b>      Set the current file's mark to the range.  Does not set dot.

       * <b>q</b>    Quit.  It is an error to quit with modified files, but a second <b>q</b> will succeed.

       * <b>u</b> <u>n</u>  Undo  the  last  <u>n</u> (default 1) top-level commands that changed the contents or name of the current
              file, and any other file whose most recent change was simultaneous with the current file's change.
              Successive <b>u</b>'s move further back in time.  The only commands for which u is ineffective are <b>cd</b>, <b>u</b>,
              <b>q</b>, <b>w</b> and <b>D</b>.  If <u>n</u> is negative, <b>u</b> `redoes,' undoing the undo, going forwards in time again.

       (empty)
              If the range is explicit, set dot to the range.  If  <u>sam</u>  is  downloaded,  the  resulting  dot  is
              selected  on  the  screen;  otherwise it is printed.  If no address is specified (the command is a
              newline) dot is extended in either direction to line boundaries and printed.  If  dot  is  thereby
              unchanged, it is set to <b>.+1</b> and printed.

   <b>Grouping</b> <b>and</b> <b>multiple</b> <b>changes</b>
       Commands  may  be  grouped  by  enclosing  them  in braces <b>{}</b>.  Commands within the braces must appear on
       separate lines (no backslashes are required between commands).  Semantically, an opening brace is like  a
       command:  it  takes  an (optional) address and sets dot for each sub-command.  Commands within the braces
       are executed sequentially, but changes made by one command are not visible to  other  commands  (see  the
       next paragraph).  Braces may be nested arbitrarily.

       When  a  command makes a number of changes to a file, as in <b>x/re/c/text/</b>, the addresses of all changes to
       the file are computed in the original file.  If the changes are in sequence,  they  are  applied  to  the
       file.   Successive  insertions  at the same address are catenated into a single insertion composed of the
       several insertions in the order applied.

   <b>The</b> <b>terminal</b>
       What follows refers to behavior of <u>sam</u> when downloaded, that is, when operating as a display editor on  a
       raster  display.   This  is  the default behavior; invoking <u>sam</u> with the <b>-d</b> (no download) option provides
       access to the command language only.

       Each file may have zero or more windows open.  Each window is equivalent and  is  updated  simultaneously
       with  changes  in other windows on the same file.  Each window has an independent value of dot, indicated
       by a highlighted substring on the display.  Dot may be in a region  not  within  the  window.   There  is
       usually  a  `current  window', marked with a dark border, to which typed text and editing commands apply.
       Text may be typed and edited as in <u><a href="../man1/rio.1.html">rio</a></u>(1); also the escape key (ESC) selects (sets  dot  to)  text  typed
       since the last mouse button hit.

       The button 3 menu controls window operations.  The top of the menu provides the following operators, each
       of  which  uses  one  or  more  <u>rio</u>-like  cursors  to  prompt  for selection of a window or sweeping of a
       rectangle.  `Sweeping' a null rectangle gets a large window, disjoint from  the  command  window  or  the
       whole screen, depending on where the null rectangle is.

       <b>new</b>    Create a new, empty file.

       <b>zerox</b>  Create a copy of an existing window.

       <b>resize</b> As in <u>rio</u>.

       <b>close</b>  Delete the window.  In the last window of a file, <b>close</b> is equivalent to a <b>D</b> for the file.

       <b>write</b>  Equivalent to a <b>w</b> for the file.

       Below these operators is a list of available files, starting with <b>~~sam~~</b>, the command window.  Selecting
       a  file  from  the  list  makes  the most recently used window on that file current, unless it is already
       current, in which case selections cycle through the open windows.  If no windows are open  on  the  file,
       the  user  is  prompted  to open one.  Files other than <b>~~sam~~</b> are marked with one of the characters <b>-+*</b>
       according as zero, one, or more windows are open on the file.  A further mark appears on the file in  the
       current window and a single quote, <b>'</b>, on a file modified since last write.

       The  command  window, created automatically when <b>sam</b> starts, is an ordinary window except that text typed
       to it is interpreted as commands for the editor rather than passive text,  and  text  printed  by  editor
       commands  appears  in it.  The behavior is like <u>rio</u>, with an `output point' that separates commands being
       typed from previous output.  Commands typed in the command window apply to the current open file—the file
       in the most recently current window.

   <b>Manipulating</b> <b>text</b>
       Button 1 changes selection, much like <u>rio</u>.  Pointing to a non-current  window  with  button  1  makes  it
       current;  within  the  current  window, button 1 selects text, thus setting dot.  Double-clicking selects
       text to the boundaries of words, lines, quoted strings or bracketed strings, depending on the text at the
       click.

       Button 2 provides a menu of editing commands:

       <b>cut</b>    Delete dot and save the deleted text in the snarf buffer.

       <b>paste</b>  Replace the text in dot by the contents of the snarf buffer.

       <b>snarf</b>  Save the text in dot in the snarf buffer.

       <b>plumb</b>  Send the text in the selection as a plumb message.  If the selection is  empty,  the  white-space-
              delimited  block  of  text  is  sent  as a plumb message with a <b>click</b> attribute defining where the
              selection lies (see <u><a href="../man7/plumb.7.html">plumb</a></u>(7)).

       <b>look</b>   Search forward for the next occurrence of the literal text in dot.  If dot is the null string, the
              text in the snarf buffer is used.  The snarf buffer is unaffected.

       <b>&lt;rio&gt;</b>  Exchange snarf buffers with <u>rio</u>.

       <b>/</b><u>regexp</u>
              Search forward for the next match of the last regular expression typed  in  a  command.   (Not  in
              command window.)

       <b>send</b>   Send  the  text  in dot, or the snarf buffer if dot is the null string, as if it were typed to the
              command window.  Saves the sent text in the snarf buffer.  (Command window only.)

   <b>External</b> <b>communication</b>
       <u>Sam</u> listens to the <b>edit</b> plumb port.  If plumbing is not active, on invocation <u>sam</u> creates  a  named  pipe
       <b>/srv/sam.</b><u>user</u>  which  acts as an additional source of commands.  Characters written to the named pipe are
       treated as if they had been typed in the command window.

       <u>B</u> is a shell-level command that causes an instance of <u>sam</u> running on the same terminal to load the  named
       <u>files</u>.   <u>B</u>  uses  either  plumbing or the named pipe, whichever service is available.  If plumbing is not
       enabled, the option allows a line number to be specified for the initial position to display in the  last
       named file (plumbing provides a more general mechanism for this ability).

       <u>E</u> is a shell-level command that can be used as <b>$EDITOR</b> in a Unix environment.  It runs <u>B</u> on <u>file</u> and then
       does not exit until <u>file</u> is changed, which is taken as a signal that <u>file</u> is done being edited.

   <b>Abnormal</b> <b>termination</b>
       If  <u>sam</u>  terminates  other than by a <b>q</b> command (by hangup, deleting its window, etc.), modified files are
       saved in an executable file, <b>$HOME/sam.save</b>.  This program, when executed, asks  whether  to  write  each
       file back to a external file.  The answer causes writing; anything else skips the file.

</pre><h4><b>FILES</b></h4><pre>
       <b>$HOME/sam.save</b>

       <b>$HOME/sam.err</b>

       <b>/bin/samsave</b>
              the program called to unpack <b>$HOME/sam.save</b>.

</pre><h4><b>SOURCE</b></h4><pre>
       <b>/src/cmd/sam</b>
              source for <u>sam</u> itself

       <b>/src/cmd/samterm</b>
              source for the separate terminal part

       <b>/bin/B</b>

       <b>/bin/E</b>

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <u><a href="../man1/ed.1.html">ed</a></u>(1), <u><a href="../man1/sed.1.html">sed</a></u>(1), <u><a href="../man1/grep.1.html">grep</a></u>(1), <u><a href="../man1/rio.1.html">rio</a></u>(1), <u><a href="../man7/regexp.7.html">regexp</a></u>(7).

       Rob Pike, ``The text editor sam''.

                                                                                                     <u><a href="../man1plan9/SAM.1plan9.html">SAM</a></u>(1plan9)
</pre>
 </div>
</div></section>
</div>
</body>
</html>