<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>datalad run - run an arbitrary shell command and record its impact on a dataset.</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/datalad">datalad_1.1.5-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       <b>datalad</b> <b>run</b> - run an arbitrary shell command and record its impact on a dataset.

</pre><h4><b>SYNOPSIS</b></h4><pre>

       <b>datalad</b>   <b>run</b>  [-h]  [-d  DATASET]  [-i  PATH]  [-o  PATH]  [--expand  {inputs|outputs|both}]  [--assume-
              ready   {inputs|outputs|both}]   [--explicit]   [-m   MESSAGE]   [--sidecar   {yes|no}]    [--dry-
              run {basic|command}] [-J NJOBS] [--version] ...

</pre><h4><b>DESCRIPTION</b></h4><pre>
       It is recommended to craft the command such that it can run in the root directory of the dataset that the
       command will be recorded in. However, as long as the command is executed somewhere underneath the dataset
       root, the exact location will be recorded relative to the dataset root.

       If the executed command did not alter the dataset in any way, no record of the command execution is made.

       If the given command errors, a COMMANDERROR exception with the same exit code will be raised, and no mod‐
       ifications  will  be saved. A command execution will not be attempted, by default, when an error occurred
       during input or output preparation. This default ``stop`` behavior can  be  overridden  via  --on-failure
       ....

       In the presence of subdatasets, the full dataset hierarchy will be checked for unsaved changes prior com‐
       mand execution, and changes in any dataset will be saved after execution. Any modification of subdatasets
       is  also  saved in their respective superdatasets to capture a comprehensive record of the entire dataset
       hierarchy state. The associated provenance record is duplicated in each modified  (sub)dataset,  although
       only  being  fully  interpretable and re-executable in the actual top-level superdataset. For this reason
       the provenance record contains the dataset ID of that superdataset.

   <b>Command</b> <b>format</b>
       A few placeholders are supported in the command via Python format specification. "{pwd}" will be replaced
       with the full path of the current working directory. "{dspath}" will be replaced with the  full  path  of
       the  dataset that run is invoked on. "{tmpdir}" will be replaced with the full path of a temporary direc‐
       tory. "{inputs}" and "{outputs}" represent the values specified by --input and --output. If multiple val‐
       ues are specified, the values will be joined by a space.  The order of the values will match  that  order
       from  the  command line, with any globs expanded in alphabetical order (like bash). Individual values can
       be accessed with an integer index (e.g., "{inputs[0]}").

       Note that the representation of the inputs or outputs in the formatted command string depends on  whether
       the command is given as a list of arguments or as a string (quotes surrounding the command). The concate‐
       nated  list of inputs or outputs will be surrounded by quotes when the command is given as a list but not
       when it is given as a string. This means that the string form is required if you need to pass each  input
       as  a separate argument to a preceding script (i.e., write the command as "./script {inputs}", quotes in‐
       cluded). The string form should also be used if the input or output paths contain spaces or other charac‐
       ters that need to be escaped.

       To escape a brace character, double it (i.e., "{{" or "}}").

       Custom placeholders can be added as configuration variables under "datalad.run.substitutions".  As an ex‐
       ample:

       Add a placeholder "name" with the value "joe"::

         % datalad configuration --scope branch set datalad.run.substitutions.name=joe
         % datalad save -m "Configure name placeholder" .datalad/config

       Access the new placeholder in a command::

         % datalad run "echo my name is {name} &gt;me"

   <b>Examples</b>
       Run an executable script and record the impact on a dataset::

        % datalad run -m 'run my script' 'code/script.sh'

       Run a command and specify a directory as a dependency for the run. The contents of the dependency will be
       retrieved prior to running the script::

        % datalad run -m 'run my script' -i 'data/*' 'code/script.sh'

       Run an executable script and specify output files of the script to  be  unlocked  prior  to  running  the
       script::

        % datalad run -m 'run my script' -i 'data/*'    -o 'output_dir/*' 'code/script.sh'

       Specify multiple inputs and outputs::

        %  datalad run -m 'run my script' -i 'data/*'    -i 'datafile.txt' -o 'output_dir/*' -o    'outfile.txt'
       'code/script.sh'

       Use ** to match any file at any directory depth recursively. Single * does not check files within matched
       directories.::

        % datalad run -m 'run my script' -i 'data/**/*.dat'    -o 'output_dir/**' 'code/script.sh'

</pre><h4><b>OPTIONS</b></h4><pre>
       COMMAND
              command for execution. A leading '--' can be used to disambiguate this command from the  preceding
              options to DataLad.

       <b>-h</b>, <b>--help</b>, <b>--help-np</b>
              show  this  help message. --help-np forcefully disables the use of a pager for displaying the help
              message

       <b>-d</b> <u>DATASET</u>, <b>--dataset</b> <u>DATASET</u>
              specify the dataset to record the command results in. An attempt is made to identify  the  dataset
              based on the current working directory. If a dataset is given, the command will be executed in the
              root  directory  of  this dataset. Constraints: Value must be a Dataset or a valid identifier of a
              Dataset (e.g. a path) or value must be NONE

       <b>-i</b> PATH, <b>--input</b> PATH
              A dependency for the run. Before running the command, the content for this relative path  will  be
              retrieved. A value of "." means "run datalad get .". The value can also be a glob. This option can
              be given more than once.

       <b>-o</b> PATH, <b>--output</b> PATH
              Prepare  this relative path to be an output file of the command. A value of "." means "run datalad
              unlock ." (and will fail if some content isn't present). For any other value, if  the  content  of
              this  file  is  present, unlock the file. Otherwise, remove it. The value can also be a glob. This
              option can be given more than once.

       <b>--expand</b> {inputs|outputs|both}
              Expand globs when storing inputs and/or outputs in the commit message. Constraints: value must  be
              one of ('inputs', 'outputs', 'both')

       <b>--assume-ready</b> {inputs|outputs|both}
              Assume  that  inputs do not need to be retrieved and/or outputs do not need to unlocked or removed
              before running the command. This option allows you to avoid the expense of these preparation steps
              if you know that they are unnecessary. Constraints: value must be  one  of  ('inputs',  'outputs',
              'both')

       <b>--explicit</b>
              Consider  the  specification of inputs and outputs to be explicit. Don't warn if the repository is
              dirty, and only save modifications to the listed outputs.

       <b>-m</b> MESSAGE, <b>--message</b> MESSAGE
              a description of the state or the changes made to a dataset. Constraints: value must be  a  string
              or value must be NONE

       <b>--sidecar</b> {yes|no}
              By  default,  the  configuration variable 'datalad.run.record-sidecar' determines whether a record
              with information on a command's execution is placed into a separate record  file  instead  of  the
              commit  message  (default:  off). This option can be used to override the configured behavior on a
              case-by-case basis. Sidecar files are placed into the dataset's '.datalad/runinfo' directory (cus‐
              tomizable via the 'datalad.run.record-directory' configuration variable). Constraints: value  must
              be NONE or value must be convertible to type bool

       <b>--dry-run</b> {basic|command}
              Do  not  run the command; just display details about the command execution. A value of "basic" re‐
              ports a few important details about the execution, including the expanded command and expanded in‐
              puts and outputs. "command" displays the expanded command only. Note that input and  output  globs
              underneath an uninstalled dataset will be left unexpanded because no subdatasets will be installed
              for a dry run. Constraints: value must be one of ('basic', 'command')

       <b>-J</b> NJOBS, <b>--jobs</b> NJOBS
              how many parallel jobs (where possible) to use. "auto" corresponds to the number defined by 'data‐
              lad.runtime.max-annex-jobs'  configuration  item  NOTE: This option can only parallelize input re‐
              trieval (get) and output recording (save). DataLad does NOT parallelize your scripts for you. Con‐
              straints: value must be convertible to type 'int' or value must be NONE or value must  be  one  of
              ('auto',)

       <b>--version</b>
              show the module and its version which provides the command

</pre><h4><b>AUTHORS</b></h4><pre>
        datalad is developed by The DataLad Team and Contributors &lt;<a href="mailto:team@datalad.org">team@datalad.org</a>&gt;.

datalad run 1.1.5                                  2025-03-03                                     <u>datalad</u> <u><a href="../man1/run.1.html">run</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>