<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>dnsviz-probe - issue diagnostic DNS queries</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/dnsviz">dnsviz_0.11.0-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       dnsviz-probe - issue diagnostic DNS queries

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>dnsviz</b> <b>probe</b> [ <u>options</u> ] [ <u>domain_name...</u> ]

</pre><h4><b>DESCRIPTION</b></h4><pre>
       Perform  a series of diagnostic queries of specified names to either recursive (default) or authoritative
       DNS servers, the results of which are serialized into JSON format.  Its output  is  used  to  assess  the
       health of DNS deployments, using, e.g., <b><a href="../man1/dnsviz-grok.1.html">dnsviz-grok</a>(1)</b> and <b><a href="../man1/dnsviz-graph.1.html">dnsviz-graph</a>(1)</b>.

       Domain  names  to  be processed may be passed either as command-line arguments or in a file (using the <b>-f</b>
       option).  When the <b>-r</b> option is used, then the domain names can simply be implied  using  the  diagnostic
       query input.

       Domain  names  are  extracted  from the diagnostic query input in conjunction with <b>-r</b> only when <b>-f</b> is not
       used and no domain names are supplied on the command line.  If the <b>-f</b> option is used, then names may  not
       be specified on the command line.

       The  domain names passed as input are fully-qualified domain names, such as example.com, www.example.com,
       _443._tcp.example.com, 1.2.0.192.in-addr.arpa, or 8.b.d.0.1.0.0.2.ip6.arpa.  Because it is  implied  that
       specified domain names are fully qualified, no trailing dot is necessary.

</pre><h4><b>OPTIONS</b></h4><pre>
       <b>-f,</b> <b>--names-file</b> <u>filename</u>
              Read names from a file (one name per line), instead of from command line.

              If this option is used, then names may not be specified on the command line.

       <b>-d,</b> <b>--debug</b> <u>level</u>
              Set  debug  level  to  a  value  from  0  to  3,  with  increasing  verbosity.  The default is "2"
              (informational-level output).

       <b>-r,</b> <b>--input-file</b> <u>filename</u>
              Read diagnostic query input from the specified file, instead of querying servers.  Specify "-"  to
              read from standard input.

       <b>-t,</b> <b>--threads</b> <u>threads</u>
              Issue  diagnostic  queries  for different names in parallel using the specified number of threads.
              The default is to execute diagnostic queries of names serially.

       <b>-4,</b> <b>--ipv4</b>
              Use IPv4 only.

       <b>-6,</b> <b>--ipv6</b>
              Use IPv6 only.

       <b>-b,</b> <b>--source-ip</b> <u>address</u>
              Use the specified source IPv4 or IPv6 address for queries, rather than detecting it.

              This option can be used more than once to supply both an IPv4 and an IPv6 address.

              The use of this option is sometimes necessary when using a dual-homed machine, and it is desirable
              to use the non-default interface for queries.

       <b>-u,</b> <b>--looking-glass-url</b> <u>url</u>
              Issue queries through the DNS looking glass at the specified URL (HTTP(S) or  SSH).   The  queries
              will appear to come from the looking glass rather than from the local machine.

                     Examples:

                            Issue DNS queries from www.example.com using the cgi script dnsviz-lg.cgi:
                            <a href="http://www.example.com/cgi-bin/dnsviz-lg.cgi">http://www.example.com/cgi-bin/dnsviz-lg.cgi</a>

                            Same, but use HTTP Basic authentication:
                            <a href="http://username">http://username</a>:<a href="mailto:password@www.example.com">password@www.example.com</a>/cgi-bin/dnsviz-lg.cgi

                            Issue DNS queries from host.example.com on which DNSViz is also installed.
                            ssh://<a href="mailto:username@host.example.com">username@host.example.com</a>

              Note  that  a  looking  glass that uses https is only supported when using python version 2.7.9 or
              greater.

       <b>-k,</b> <b>--insecure</b>
              Do not verify the server-side TLS certificate  for  a  HTTPS-based  DNS  looking  glass  that  was
              specified using <b>-u</b>.

       <b>-a,</b> <b>--ancestor</b> <u>ancestor</u>
              Issue  diagnostic  queries  of  each  domain name through the specified ancestor.  The default for
              recursive mode is "."  (i.e.,  issue  queries  all  the  way  to  the  root).    The  default  for
              authoritative mode (i.e., with <b>-A</b>) is the domain name itself.

       <b>-R,</b> <b>--rr-types</b> <u>type</u>[,<u>type...</u>]
              Issue  diagnostic  queries for only the specified type(s) (e.g., A, AAAA).  The default is to pick
              query types based on the nature of the name (e.g., the number of labels, whether it is a subdomain
              of .arpa, labels indicating association to TLSA or SRV records, etc.) and  whether  there  are  NS
              records detected (i.e., it is a zone).

       <b>-s,</b> <b>--recursive-servers</b> <u>server</u>[,<u>server...</u>]
              Query the specified recursive resolver(s), rather than using those specified in <u><a href="file:/etc/resolv.conf">/etc/resolv.conf</a></u>.

              Each  server  specified  may  either  be  an  address (IPv4 or IPv6), a domain name (which will be
              resolved to an address  using  the  standard  resolution  process),  or  both,  using  the  syntax
              <u>name</u><b>=</b><u>address</u>.  Note that when both a name and an address are specified (<u>name</u><b>=</b><u>address</u>), the name is
              only  used  for  identification  purposes,  and it doesn't matter whether the name resolves to the
              corresponding address (or at all, for that matter).  IPv6 addresses  must  be  wrapped  in  square
              brackets, e.g., "[2001:db8::1]".

              Each  server  value  may  optionally be suffixed with a numeric port on which the server should be
              contacted.  If not specified, the standard DNS port, 53, is used.

              The following are example server values:

                     ns1.example.com
                     ns1.example.com:5333
                     ns1.example.com=192.0.2.1
                     ns1.example.com=[2001:db8::1]
                     ns1.example.com=[2001:db8::1]:5333
                     192.0.2.1

              This option cannot be used in conjunction with <b>-A</b>.

       <b>-A,</b> <b>--authoritative-analysis</b>
              Query authoritative servers, rather than (the default) recursive servers.

       <b>-x,</b> <b>--authoritative-servers</b> <u>domain</u>[<b>+</b>]<b>:</b><u>server</u>[,<u>server...</u>]
              Treat the specified servers as authoritative for a  domain,  rather  than  learning  authoritative
              servers  by  following  delegations.   This  option  dictates  which servers will be queried for a
              domain, but the servers specified will not be used to check NS or glue record consistency with the
              child; for that behavior, see <b>-N</b>.

              The default behavior is to identify and query servers authoritative for ancestors of the specified
              domain, if other options so dictate.  However, if the domain ends  in  "+",  then  queries  aren't
              issued  for  servers  authoritative  for  ancestor  domains  of the domain.  For example, with the
              following command:

                     dnsviz probe -A -x example.com:ns1.example.com example.com

              the com servers will be queried for DS records for example.com.   However,  if  the  following  is
              used:

                     dnsviz probe -A -x example.com+:ns1.example.com example.com

              no queries are performed at com servers or above, including DS records for example.com.

              See  <b>-s</b>  for  the syntax used for designating servers.  However, unlike the <b>-s</b> option, a zone file
              may be specified in lieu of a server name and/or address, in which case an instance of <b><a href="../man8/named.8.html">named</a>(8)</b> is
              started, the zone is served from that instance, and queries for the domain  are  directed  to  the
              local  instance  of  <b><a href="../man8/named.8.html">named</a>(8)</b>  serving  that  zone.   For  example,  if example.com.zone is a file
              containing the contents of the example.com zone, the following command could be  used  to  specify
              that the zone file should be used:

                     dnsviz probe -A -x example.com:example.com.zone example.com

              This option may be used multiple times on the command line.

              This option can only be used in conjunction with <b>-A</b>.

       <b>-N,</b> <b>--delegation-information</b> <u>domain</u><b>:</b><u>server</u>[,<u>server...</u>]
              Use  the  specified  delegation  information  for  a domain, i.e., the NS and glue records for the
              domain, which would be served by the domain's parent.  This is used for testing new delegations or
              testing a potential change to a delegation.

              This option has similar usage to that of the <b>-x</b> option.  The major difference is that  the  server
              names  supplied  comprise  the  NS  record set, and the addresses supplied represent glue records.
              Thus if there are discrepancies between the authoritative responses for the NS RRset and glue  and
              what  is  supplied  on the command line, an error will be reported when the output is subsequently
              assessed, e.g., using <b><a href="../man1/dnsviz-grok.1.html">dnsviz-grok</a>(1)</b>.

              In lieu of specifying the record data itself on the command line, a file may be  specified,  which
              contains the delegation NS and glue records for the domain.

       <b>-D,</b> <b>--ds</b> <u>domain</u><b>:</b><u>ds</u>[,<u>ds...</u>]
              Use  the  specified delegation signer (DS) records for a domain.  This is used in conjunction with
              the <b>-N</b> option for testing the introduction or change of DS records.

              The DS records themselves are specified using the textual representation  of  their  record  data.
              For example the following DS records for example.com:

                     31589 8 1 3490A6806D47F17A34C29E2CE80E8A999FFBE4BE
                     31589 8 2 CDE0D742D6998AA554A92D890F8184C698CFAC8A26FA59875A990C03 E576343C

              would be specified by passing this value to <b>-D</b>:

                     "31589 8 1 3490A6806D47F17A34C29E2CE80E8A999FFBE4BE,
                        31589 8 2 CDE0D742D6998AA554A92D890F8184C698CFAC8A26FA59875A990C03 E576343C"

              In  lieu  of specifying the record data itself on the command line, a file may be specified, which
              contains the DS records.  For example:

                     dnsviz probe -D example.com:dsset-example.com.

              This option must be used in conjunction with the <b>-N</b> option.

       <b>-n,</b> <b>--nsid</b>
              Use the NSID EDNS option with every DNS query issued.

       <b>-e,</b> <b>--client-subnet</b> <u>subnet</u>[<b>:</b><u>prefix_len</u>]
              Use the EDNS Client Subnet option with every DNS query issued,  using  the  specified  <u>subnet</u>  and
              <u>prefix_len</u> as values.  If <u>prefix</u> is not specified, the prefix is the length of the entire address.

       <b>-c,</b> <b>--cookie</b> <u>cookie</u>
              Send  the  specified  DNS client cookie with every DNS query issued.  The value specified is for a
              client cookie only and thus should be exactly 64 bits long.  The value for the cookie is specified
              using hexadecimal representation, e.g., deadbeef1580f00d.

              If the <b>-c</b> option is not used, the default behavior is for a DNS  client  cookie  to  be  generated
              randomly to be sent with queries.  If an empty string is specified, then DNS cookies are disabled.

       <b>-E,</b> <b>--edns</b>
              Issue queries to check EDNS compatibility of servers.

              If  this  option  is  used,  each  server  probed will be queried with "future" EDNS settings, the
              respective responses can later be assessed for proper behavior.   These  settings  include  future
              EDNS versions (i.e., &gt; 0), unknown options, and unknown flags.

       <b>-o,</b> <b>--output-file</b> <u>filename</u>
              Write the output to the specified file instead of to standard output, which is the default.

       <b>-p,</b> <b>--pretty-output</b>
              Output  "pretty"  instead of minimal JSON output, i.e., using indentation and newlines.  Note that
              this is the default when the output is a TTY.

       <b>-h</b>     Display the usage and exit.

</pre><h4><b>EXIT</b> <b>CODES</b></h4><pre>
       The exit codes are:

       0      Program terminated normally.

       1      Incorrect usage.

       2      The network was unavailable for diagnostic queries.

       3      There was an error processing the input or saving the output.

       4      Program execution was interrupted, or an unknown error occurred.

       5      No recursive resolvers found in resolv.conf nor given on command line.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man1/dnsviz.1.html">dnsviz</a>(1),</b> <b><a href="../man1/dnsviz-grok.1.html">dnsviz-grok</a>(1),</b> <b><a href="../man1/dnsviz-graph.1.html">dnsviz-graph</a>(1),</b> <b><a href="../man1/dnsviz-print.1.html">dnsviz-print</a>(1),</b> <b><a href="../man1/dnsviz-query.1.html">dnsviz-query</a>(1)</b>

0.11.0                                          26 September 2024                                <u><a href="../man1/dnsviz-probe.1.html">dnsviz-probe</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>