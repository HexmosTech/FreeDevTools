<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>rex - execute tasks defined in a Rexfile</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/rex">rex_1.16.0-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       rex - execute tasks defined in a Rexfile

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The "rex" script can be used to execute tasks defined in a Rexfile from the command line.

</pre><h4><b>SYNOPSIS</b></h4><pre>
        rex -h                      # Show usage
        rex -T                      # List tasks
        rex uname                   # Run the 'uname' task
        rex -H server[01..10] uname # Run the 'uname' task on all the specified hosts
        rex -G production uname     # Run 'uname' on hosts on the 'production' hostgroup
        rex deploy --gracefully     # Pass '--gracefully' to the 'deploy' task

</pre><h4><b>USAGE</b></h4><pre>
        rex [&lt;options&gt;] [-H &lt;host&gt;] [-G &lt;group&gt;] &lt;task&gt; [&lt;task-options&gt;]
        rex -T[m|y|v] [&lt;string&gt;]

        -b     Run batch
        -e     Run the given code fragment
        -E     Execute a task on the given environment
        -G|-g  Execute a task on the given server groups
        -H     Execute a task on the given hosts (space delimited)
        -z     Execute a task on hosts from this command's output

        -K     Public key file for the ssh connection
        -P     Private key file for the ssh connection
        -p     Password for the ssh connection
        -u     Username for the ssh connection

        -d     Show debug output
        -ddd   Show more debug output (includes profiling output)
        -m     Monochrome output: no colors
        -o     Output format
        -q     Quiet mode: no log output
        -qw    Quiet mode: only output warnings and errors
        -Q     Really quiet: output nothing

        -T     List tasks
        -Ta    List all tasks, including hidden
        -Tm    List tasks in machine-readable format
        -Tv    List tasks verbosely
        -Ty    List tasks in YAML format

        -c     Turn cache ON
        -C     Turn cache OFF
        -f     Use this file instead of Rexfile
        -F     Force: disregard lock file
        -h     Display this help message
        -M     Load this module instead of Rexfile
        -O     Pass additional options, like CMDB path
        -s     Use sudo for every command
        -S     Password for sudo
        -t     Number of threads to use (aka 'parallelism' param)
        -v     Display (R)?ex version

</pre><h4><b>Rexfile</b></h4><pre>
       When you run "rex" it reads the file "Rexfile" in the current working directory. A Rexfile consists of 2
       major parts: configuration and task definitions.

   <b>Configuration</b>
       See all the available commands in Rex::Commands.

       <u>Simple</u> <u>authentication</u>

        user 'bruce';
        password 'batman';
        pass_auth;

       <u>Key</u> <u>authentication</u>

        private_key '/path/to/your/private/key.file';
        public_key '/path/to/your/public/key.file';
        key_auth;

       <u>Define</u> <u>logging</u>

        logging to_file   =&gt; 'rex.log';
        logging to_syslog =&gt; 'local0';

       <u>Group</u> <u>your</u> <u>servers</u>

       Rex gives you the ability to define groups of servers. Groups can be defined the Rexfile:

        group 'frontends' =&gt; 'frontend01', 'frontend02', 'frontend[03..09]';

       Groups can also be defined in separate files, like "server.ini":

        # server.ini
        [frontends]
        frontend[01..04]

        # Rexfile
        use Rex::Group::Lookup::INI;
        groups_file 'file.ini'

       See Rex::Group::Lookup::INI for more details, and check the "Rex::Group::Lookup" namespace for other
       formats.

   <b>Other</b> <b>configuration</b>
        timeout 10;    # ssh timeout
        parallelism 2; # execute tasks in parallel

   <b>Defining</b> <b>tasks</b>
       A basic task looks like this:

        # task description
        desc 'This task tells you how long since the server was rebooted';

        # task definition
        task 'shortname', sub {
          say run 'uptime';
        };

       By default it will be targeted at the same host where `rex` is being executed.

       You can also set a default server as the task's target:

        desc 'This is a long description of a task';
        task 'shortname',
          'frontend01',
          sub {
            say run 'uptime';
          };

       or even a default server group:

        desc 'This is a long description of a task';
        task 'shortname',
          group =&gt; 'frontends',
          sub {
            say run 'uptime';
          };

       The task options from the command line will be passed to the task as well:

        # Rexfile
        desc 'Get task options';
        task 'get_task_options', sub {
          my $task_options = shift;
          my $option1 = $task_options-&gt;{option1};
        };

        # command line
        rex get_task_options --option1=yes

</pre><h4><b>TAB</b> <b>COMPLETION</b></h4><pre>
       Tab completion scripts are provided for Bash and Zsh in the share
       &lt;https://metacpan.org/release/Rex/source/share&gt; directory. They provide completions for the available CLI
       options, hosts, groups, environments and tasks.

perl v5.40.0                                       2025-02-06                                            <u><a href="../man1p/REX.1p.html">REX</a></u>(1p)
</pre>
 </div>
</div></section>
</div>
</body>
</html>