<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>pfstmo_mantiuk08 - Display adaptive tone mapping</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/pfstmo">pfstmo_2.2.0-9_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       pfstmo_mantiuk08 - Display adaptive tone mapping

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>pfstmo_mantiuk08</b> [<b>--display-function</b> &lt;<u>df-spec</u>&gt;] [<b>--display-size</b>=&lt;<u>size-spec</u>&gt;] [<b>--color-saturation</b> &lt;<u>float</u>&gt;]
       [<b>--contrast-enhancement</b>    &lt;<u>float</u>&gt;]   [<b>--white-y</b>=&lt;<u>float</u>&gt;]   [<b>--fps</b>=&lt;<u>frames-per-second</u>&gt;]   [<b>--output-tone-</b>
       <b>curve</b>=&lt;<u>file</u> <u>name</u>&gt;] [<b>--verbose</b>] [<b>--help</b>]

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This command applies the display adaptive tone mapping, which attempts to preserve contrast of  an  input
       (HDR)  image  as  close  as possible given the characteristic of an output display. Use this tone mapping
       operator if you want to preserve original image appearance, or  slightly  enhance  contrast  (-<b>e</b>  option)
       while  maintaining  the  natural  look  of  images.  The  operator  can also compensate for ambient light
       reflections on a screen, and for varying dynamic range and brightness  of  a  display.  The  operator  is
       suitable  for  video  sequences  as  it prevents high-frequency changes in tone-curve between consecutive
       frames, which would result in flickering. Note that the temporal filtering is always active and there  is
       no need to specify an argument to switch it on.

       More details can be found in:
              Rafal Mantiuk, Scott Daly and Louis Kerofsky.
              Display Adaptive Tone Mapping.
              In: ACM Transactions on Graphics 27 (3), 2008.
              <a href="http://www.mpi-inf.mpg.de/resources/hdr/datmo/">http://www.mpi-inf.mpg.de/resources/hdr/datmo/</a>

       If you find this TMO useful in your research project, please cite the paper above.

       This operator also employs color correction mechanism from:
              Radoslaw Mantiuk, Rafal Mantiuk, Anna Tomaszewska, Wolfgang Heidrich.
              Color Correction for Tone Mapping.
              In: Computer Graphics Forum (Proc. of EUROGRAPHICS'09), <a href="../man2/28.2.html">28</a>(2), 2009.
              <a href="http://zgk.wi.ps.pl/color_correction/">http://zgk.wi.ps.pl/color_correction/</a>

       The result of this TMO does not require gamma correction.

</pre><h4><b>OPTIONS</b></h4><pre>
       <b>--display-function</b> &lt;<u>df-spec</u>&gt;, <b>-d</b> &lt;<u>df-spec</u>&gt;
              To  adapt  tone-mapping  to different displays, this operator must be provided a display function.
              The display function describes how output luminance of a display changes with pixel values. If  no
              parameter  is  given,  the  command  assumes <b>-df</b> <b>pd=lcd</b> (see <u>Pre-defined</u> <u>display</u> below). There are
              several ways to specify the display function:

       <u>Gamma-gain-black-ambient</u> <u>display</u> <u>model</u>

              g=&lt;float&gt;:l=&lt;float&gt;:b=&lt;float&gt;:k=&lt;float&gt;:a=&lt;float&gt;[:n=&lt;float&gt;]

              Gamma-gain-black-ambient model can approximate a range of displays and is a compact way to specify
              a display function. It assumes that a display function has the following form:

              L_d(I) = (l-b)*I^gamma + b + k/pi*a

              The parameters are as follows:
              <b>g</b> -  gamma or exponent of a display function (default 2.2, usually from 1.8 to 2.8)
              <b>l</b> -  peak luminance of a display in cd/m^2  (default 100, from 80 for CRTs  to  500  or  more  for
                   newer displays)
              <b>b</b> -  black  level,  which is luminance of a black pixel when the display is on (default 1, usually
                   from 0.3 to 1 cd/m^2)
              <b>k</b> -  reflectivity of a screen (assuming that it is diffuse) (default 0.01, usually about 0.01 (1%)
                   for LCD displays, more for CRTs)
              <b>a</b> -  ambient illumination in lux. Typical values are:
                   50 lux Family living room (dim, <b>default</b>)
                   400 lux
                          A brightly lit office
                   32000 lux
                          Sunlight on an average day (min.)
                   100000 lux
                          Sunlight on an average day (max.)

       <u>Pre-defined</u> <u>display</u>

              <b>pd</b>=<u>&lt;display_type&gt;</u>

              Use pre-defined display type. This options are for convenience  only  and  they  do  not  mean  to
              accurately  model  the  response  of  a  particular  display.   The  following  <u>display</u>  <u>type</u>s are
              recognized:

              <b>lcd_office</b> (g=2.2, l=100, b=0.8, k=0.01, a=400 )
                     lcd set to "office" mode seen in bright environment
              <b>lcd</b>        (g=2.2, l=200, b=0.8, k=0.01, a=60  )
                     typical lcd seen in dim environment (<b>default</b>)
              <b>lcd_bright</b> (g=2.6, l=500, b=0.5, k=0.01, a=10  )
                     newer LCD TV seen in dark environment
              <b>crt</b>        (g=2.2, l=80,  b=1,   k=0.02, a=60  )
                     CRT monitor seen in dim environment

              The parameters in the parenthesis are the same as for the gamma-gain-black-ambient model explained
              above.

       <u>Lookup-table</u>

              <b>lut</b>=<u>&lt;file&gt;</u>

              This is the most accurate specification of the display response function, but  requires  measuring
              it  with  a luminance meter. The lookup table should account also for ambient light, so that it is
              recommended to use the luminance meter that can measure screen luminance from a distance, such  as
              Minolta  LS-100  (as  opposed to those that use rubber tube touching a display that eliminates the
              influence of ambient light). The &lt;file&gt; must be a comma-separated text file in a format (CSV) with
              two columns: first column represents pixel values (from  0.0  to  1.0)  and  the  second  physical
              luminance in cd/m^2. Both the pixel value and the luminance should increase in each raw.

       <b>--display-size</b>=&lt;<u>size-spec</u>&gt;, <b>-s</b>=&lt;<u>size_spec</u>&gt;
              Specifies  how  large  the  image  appears  to  a  viewer and what is the viewing distance.  If no
              parameter is given, <b>-s</b> <b>ppd=30</b> is assumed. Since this  tone-mapper  is  global,  display  size  has
              moderate  effect on the resulting images and thus skipping this parameter should not do much harm.
              There are two ways to specify image size:
              <b>vres</b>=&lt;lines&gt;:<b>vd</b>=&lt;screen_heights&gt;[:<b>d</b>=&lt;<u>meters</u>&gt;]
                     <b>vres</b>   - screen's vertical resolution in lines, for example 1024.
                     <b>vd</b>     - viewing distance specified as multiplies of screen  height.  For  example  if  the
                            display is seen from 0.5m and the height of its screen is 25cm, <b>vd</b>=2.
                     <b>d</b>      -  (optional)  viewing  distance  in  meters.  This  is  to  account for lower eye's
                            sensitivity for larger viewing distances (although the  effect  is  negligible).  By
                            default <b>-d</b>=0.5 is assumed.
              <b>ppd</b>=&lt;<u>pixels_per_visual_degree</u>&gt;[:<b>d</b>=&lt;<u>meters</u>&gt;]
                     <b>ppd</b>    - how many pixels spans one visual degree.
                     <b>d</b>      -  (optional)  viewing  distance  in  meters.  This  is  to  account for lower eye's
                            sensitivity for larger viewing distances (although the  effect  is  negligible).  By
                            default <b>-d</b>=0.5 is assumed.

       <b>--color-saturation</b> &lt;<u>float</u>&gt;, <b>-c</b> &lt;<u>float</u>&gt;
              Decrease  or increase color saturation after tone mapping. Default value <b>-c=1</b> attempts to preserve
              color appearance of the original image. Use values  &gt;1  to  increase  and  &lt;1  to  decrease  color
              saturation.

       <b>--contrast-enhancement</b> &lt;<u>float</u>&gt;, <b>-e</b> &lt;<u>float</u>&gt;
              By default this tone-mapper attempts to preserve contrast of an input image (<b>-e=1</b>). This parameter
              controls  whether  the  contrast  of  an  input  image should be enhanced before tone-mapping. For
              example <b>-e=1.15</b> boosts contrast by 15%. Note that if a target display does  not  offer  sufficient
              dynamic  range,  contrast may be enhanced only for selected tone-values (those that dominate in an
              image) or not enhanced at all.

       <b>--white-y</b>=&lt;<u>float</u>&gt;, <b>-y</b>=&lt;<u>float</u>&gt;
              Tells the tone-mapper what luminance level in the input image should  be  mapped  to  the  maximum
              luminance  of a display. Since HDR images contain only relative luminance information, tone-mapper
              does not know how bright should be the scene.  This  option  is  meant  to  fix  this  problem  by
              providing  tone-mapper  with  the  information  what  luminance  level in an input image should be
              perceived as a diffuse white surface. Default is <u>none</u>, which means that no such  mapping  will  be
              enforced  and  tone-mapper  is  free  to  find  an optimal brightness for a given image. This is a
              recommended setting for HDR images. Setting <b>--white-y</b> could be necessary for  dark  scenes,  which
              could  be  made  too  bright by the tone-mapper. The value of this parameter can be also passed in
              pfsstream as a tag <u>WHITE_Y</u>. pfstools 1.7 and newer sets set this tag automatically for LDR images.
              The command line option overrides the value of the pfstream tag.

       <b>--fps</b>=&lt;<u>frames-per-second</u>&gt;, <b>-f</b>=&lt;<u>frames-per-second</u>&gt;
              Set the frame rate of the input sequence. Default is 25. Currently only 3  values  are  supported:
              25,  30  and 60. This parameter controls temporal filter that makes sure the resulting sequence is
              coherent in time. This reduces the likelihood of a visible flicker.

       <b>--output-tone-curve</b>=&lt;<u>file</u> <u>name</u>&gt;, <b>-o</b>=&lt;<u>file</u> <u>name</u>&gt;
              Write tone-curves to a text file. This option is mainly for debugging purposes, but can be used to
              visualize computed tone-curves. The tone-curve data is stored  in  a  comma  separated  text  file
              (CSV),  consisting  of  three columns: frame number, log10 of input luminance factor, log10 of the
              resulting display luminance, and the pixel value (0-1).

       <b>--verbose</b>, <b>-v</b>
              Print additional information during program execution.

       <b>--quiet</b>, <b>-q</b>
              Do not display progress report.

       <b>--help</b>, <b>-h</b>
              Print list of commandline options.

</pre><h4><b>EXAMPLES</b></h4><pre>
       pfsin memorial.hdr | pfstmo_mantiuk08 -d pd=crt | pfsout memorial.png

              Tone map memorial image for a CRT display and store the result in the PNG format.

       pfsin memorial.hdr | pfstmo_mantiuk08 -d g=2.6:l=500:b=0.5:k=0.01:a=10 | pfsview

              Tone map memorial image for a display that has a 2.2 gamma, the peak luminance of 500 cd/m^2,  the
              black  level of 0.5 cd/m^2, the panel reflectivity of 1% (0.01) and is seen under the illumination
              of 10 lux.

       pfsin bridge.jpg --linear | pfsclamp --min 0.007 | pfstmo_mantiuk08 -v | pfsview

              Enhance the low-dynamic range image 'bridge' and view the result. pfsclamp command  reduces  noise
              for low code values.

       pfsin frame%05d.exr | pfstmo_mantiuk08 -d pd=lcd_bright --fps 30 | pfsout out_frame%04d.png

              Tone-map video sequence at 30 frame-per-second frame rate.

       pfsin *.exr | pfstmo_mantiuk08 | pfsview

              Tone-map and display *.exr HDR images in the current directory.

       pfsin *.exr | pfstmo_mantiuk06 | pfsgamma -g 0.8 | pfstmo_mantiuk08 | pfsview

              It is possible to stack a TMO that sharpens images (pfstmo_mantiuk06) with the contrast preserving
              TMO (pfstmo_mantiuk08) to get new interesting results.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man1/pfsin.1.html">pfsin</a></b>(1) <b><a href="../man1/pfsout.1.html">pfsout</a></b>(1) <b><a href="../man1/pfsview.1.html">pfsview</a></b>(1)

</pre><h4><b>BUGS</b></h4><pre>
       Please      report      bugs      and      comments      to     the     pfstools     discussion     group
       (<a href="http://groups.google.com/group/pfstools">http://groups.google.com/group/pfstools</a>).

                                                                                             <u><a href="../man1/pfstmo_mantiuk08.1.html">pfstmo_mantiuk08</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>