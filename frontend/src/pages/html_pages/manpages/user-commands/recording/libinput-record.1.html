<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>libinput-record - record kernel events</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/libinput-tools">libinput-tools_1.27.1-1ubuntu0.1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       libinput-record - record kernel events

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>libinput</b> <b>record</b> <b>[options]</b> <b>[</b><u>/dev/input/event0</u> <b>[</b><u>/dev/input/event1</u> <b>...]]</b>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The  <b>libinput</b>  <b>record</b> tool records kernel events from a device and prints them in a format that can later
       be replayed with the <b>libinput</b> <b><a href="../man1/replay.1.html">replay</a>(1)</b> tool.  This tool needs to run as root to read from the device.

       The output of this tool is YAML, see <b>FILE</b> <b>FORMAT</b> for more details.  By default it prints to stdout unless
       an output file is provided. For example, these are valid invocations:

       <b>libinput</b> <b>record</b> <b>/dev/input/event3</b> <b>touchpad.yml</b>

       <b>libinput</b> <b>record</b> <b>recording.yml</b>

       <b>libinput</b> <b>record</b> <b>--all</b> <b>all-devices.yml</b>

       <b>libinput</b> <b>record</b> <b>/dev/input/event3</b> <b>/dev/input/event4</b> <b>tp-and-keyboard.yml</b>

       The events recorded are independent of libinput itself, updating or removing libinput will not change the
       event stream.

</pre><h4><b>OPTIONS</b></h4><pre>
       If one or more device nodes are given, this tool opens those device nodes.  Otherwise, a list of  devices
       is presented and the user can select the device to record. If unsure, run without any arguments.

       <b>--help</b>  Print help

       <b>--all</b>   Record  all  <u>/dev/input/event*</u>  devices  available  on  the system. This option should be used in
               exceptional cases only, the output file is almost always too noisy and  replaying  the  recording
               may  not  be possible.  This option requires <b>--output-file</b> and no device nodes may be provided on
               the commandline.

       <b>--autorestart=s</b>
               Terminate the current recording after <u>s</u> seconds of device inactivity. This option requires that a
               <b>--output-file</b> is specified. The output filename is used as prefix, suffixed  with  the  date  and
               time of the recording. The timeout must be greater than 0.

       <b>-o</b> <b>filename.yml</b>
       <b>--output-file=filename.yml</b>
               Specifies the output file to use. If <b>--autorestart</b> is given, the filename is used as prefix only.
               Where --output-file is not given and the first <b>or</b> last argument is not an input device, the first
               <b>or</b> last argument will be the output file.

       <b>--grab</b>  Exclusively  grab  all  opened devices. This will prevent events from being delivered to the host
               system.

       <b>--show-keycodes</b>
               Show keycodes as-is in the recording. By default, common keys are obfuscated and printed as <b>KEY_A</b>
               to avoid information leaks.

       <b>--with-libinput</b>
               Record libinput events alongside device events.   <b>THIS</b>  <b>FEATURE</b>  <b>IS</b>  <b>EXPERIMENTAL.</b>   See  section
               <b>RECORDING</b> <b>LIBINPUT</b> <b>EVENTS</b> for more details.

       <b>--with-hidraw</b>
               Record  hidraw  events  alongside  device events.  <b>DO</b> <b>NOT</b> <b>TYPE</b> <b>SENSITIVE</b> <b>DATA.</b>  See <b>RECORDING</b> <b>HID</b>
               <b>REPORTS</b> for more details.

</pre><h4><b>RECORDING</b> <b>MULTIPLE</b> <b>DEVICES</b></h4><pre>
       Sometimes it is necessary to record the events  from  multiple  devices  simultaneously,  e.g.   when  an
       interaction between a touchpad and a keyboard causes a bug. <b>libinput</b> <b>record</b> records multiple devices with
       an identical time offset, allowing for correct replay of the interaction.

       If multiple devices are recorded, an output filename must be provided.

       All devices to be recorded must be provided on the commandline, an example invocation is:

       <b>libinput</b> <b>record</b> <b>-o</b> <b>tap-bug</b> <b>/dev/input/event3</b> <b>/dev/input/event7</b>

       Note  that  when  recording  multiple  devices,  only  the first device is printed immediately, all other
       devices and their events are printed on exit.

</pre><h4><b>RECORDING</b> <b>LIBINPUT</b> <b>EVENTS</b></h4><pre>
       When the <b>--with-libinput</b> commandline option is given, <b>libinput-record</b> initializes a libinput context  for
       the  devices  being  recorded.  Events  from these contexts are printed alongside the evdev events.  <b>THIS</b>
       <b>FEATURE</b> <b>IS</b> <b>EXPERIMENTAL.</b>

       The primary purpose of this feature is debugging and event analysis, no caller may rely on  any  specific
       format of the events.

       Note  that while libinput and <b>libinput-record</b> see the same events from the device nodes, no guarantee can
       be given about the correct order of events. libinput events may come in earlier or later than the  events
       from  the  device  nodes  and  for  some  devices,  libinput may internally alter the event stream before
       processing.

       Note that the libinput context created by <b>libinput-record</b> does not affect the running desktop session and
       does not (can not!) copy any configuration options from that session.

</pre><h4><b>RECORDING</b> <b>HID</b> <b>REPORTS</b></h4><pre>
       When the <b>--with-hidraw</b> commandline option is given, <b>libinput-record</b> searches for the  hidraw  node(s)  of
       the given devices and prints any incoming HID reports from those devices.

       HID reports are <b>not</b> <b>obfuscated</b> and a sufficiently motivated person could recover the key strokes from the
       logs. Do not type passwords while recording HID reports.

</pre><h4><b>FILE</b> <b>FORMAT</b></h4><pre>
       The  output file format is in YAML and intended to be both human-readable and machine-parseable. Below is
       a short example YAML file, all keys are detailed further below.

       Any parsers must ignore keys not specified in the file format description.  The version number  field  is
       only used for backwards-incompatible changes.

       version: 1
       ndevices: 2
       libinput:
         version: 1.10.0
       system:
         os: "fedora:26"
         kernel: "4.13.9-200.fc26.x86_64"
         dmi: "dmi:bvnLENOVO:bvrGJET72WW(2.22):bd02/21/2014:svnLENOVO:..."
       devices:
         - node: /dev/input/event9
           evdev:
             # Name: Synaptics TM2668-002
             # ID: bus 0x1d vendor 0x6cb product 00 version 00
             # Size in mm: 97x68
             # Supported Events:
             # Event type 0 (EV_SYN)

             #.. abbreviated for man page ...

             #
             name: Synaptics TM2668-002
             id: [29, 1739, 0, 0]
             codes:
               0: [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15] # EV_SYN
               1: [272, 325, 328, 330, 333, 334, 335] # EV_KEY
               3: [0, 1, 24, 47, 48, 49, 52, 53, 54, 55, 57, 58] # EV_ABS
             absinfo:
               0: [0, 4089, 0, 0, 42]
               1: [0, 2811, 0, 0, 41]
               24: [0, 255, 0, 0, 0]
               47: [0, 4, 0, 0, 0]
               48: [0, 15, 0, 0, 0]
               49: [0, 15, 0, 0, 0]
               52: [0, 1, 0, 0, 0]
               53: [0, 4089, 0, 0, 42]
               54: [0, 2811, 0, 0, 41]
               55: [0, 2, 0, 0, 0]
               57: [0, 65535, 0, 0, 0]
               58: [0, 255, 0, 0, 0]
             properties: [0, 2, 4]
           hid: [12, 23, 34, 45, ...]
           udev:
             properties:
             - ID_INPUT_MOUSE=1
             - ID_INPUT=1
           quirks:
             - ModelAppleTouchpad=1
             - AttrSizeHint=32x32
           events:
             - hid:
                time: [ 0, 0]
             hidraw0: [1, 2, 3, 4]
             - evdev:
               - [  0,      0,   3,  57,  1420] # EV_ABS / ABS_MT_TRACKING_ID   1420
               - [  0,      0,   3,  53,  1218] # EV_ABS / ABS_MT_POSITION_X    1218
               - [  0,      0,   3,  54,  1922] # EV_ABS / ABS_MT_POSITION_Y    1922
               - [  0,      0,   3,  52,     0] # EV_ABS / ABS_MT_ORIENTATION      0
               - [  0,      0,   3,  58,    47] # EV_ABS / ABS_MT_PRESSURE        47
               - [  0,      0,   1, 330,     1] # EV_KEY / BTN_TOUCH               1
               - [  0,      0,   1, 325,     1] # EV_KEY / BTN_TOOL_FINGER         1
               - [  0,      0,   3,   0,  1218] # EV_ABS / ABS_X                1218
               - [  0,      0,   3,   1,  1922] # EV_ABS / ABS_Y                1922
               - [  0,      0,   3,  24,    47] # EV_ABS / ABS_PRESSURE           47
               - [  0,      0,   0,   0,     0] # ------------ SYN_REPORT (0) ------- +0ms
             - evdev:
               - [  0,  11879,   3,  53,  1330] # EV_ABS / ABS_MT_POSITION_X    1330
               - [  0,  11879,   3,  54,  1928] # EV_ABS / ABS_MT_POSITION_Y    1928
               - [  0,  11879,   3,  58,    46] # EV_ABS / ABS_MT_PRESSURE        46
               - [  0,  11879,   3,   0,  1330] # EV_ABS / ABS_X                1330
               - [  0,  11879,   3,   1,  1928] # EV_ABS / ABS_Y                1928
               - [  0,  11879,   3,  24,    46] # EV_ABS / ABS_PRESSURE           46
               - [  0,  11879,   0,   0,     0] # ------------ SYN_REPORT (0) ------- +0ms
         # second device (if any)
         - node: /dev/input/event9
           evdev: ...

       Top-level keys are listed below, see the respective subsection for details on each key.

       <b>version:</b> <b>int</b>
               The  file  format  version.  This version is only increased for backwards-incompatible changes. A
               parser must ignore unknown keys to be forwards-compatible.

       <b>ndevices:</b> <b>int</b>
               The number of device recordings in this file. Always 1 unless recorded with <b>--multiple</b>

       <b>libinput:</b> <b>{...}</b>
               A dictionary with libinput-specific information.

       <b>system:</b> <b>{...}</b>
               A dictionary with system information.

       <b>devices:</b> <b>{...}</b>
               A list of devices containing the description and and events of each device.

   <b>libinput</b>
       <b>version:</b> <b>string</b>
               libinput version

   <b>system</b>
       Information about the system

       <b>os:</b> <b>string</b>
               Distribution ID and version, see <u><a href="../man5/os-release.5.html">os-release</a>(5)</u>

       <b>kernel:</b> <b>string</b>
               Kernel version, see <u><a href="../man1/uname.1.html">uname</a>(1)</u>

       <b>dmi:</b> <b>string</b>
               DMI modalias, see <u><a href="file:/sys/class/dmi/id/modalias">/sys/class/dmi/id/modalias</a></u>

   <b>devices</b>
       Information about and events from the recorded device nodes

       <b>node:</b> <b>string</b>
               the device node recorded

       <b>evdev</b>   A dictionary with the evdev device information.

       <b>hid</b>     A list of integers representing the HID report descriptor bytes.

       <b>udev</b>    A dictionary with the udev device information.

       <b>events</b>  A list of dictionaries with the recorded events

   <b>evdev</b>
       <b>name:</b> <b>string</b>
               The device name

       <b>id:</b> <b>[bustype,</b> <b>vendor,</b> <b>product,</b> <b>version]</b>
               The data from the <b>struct</b> <b>input_id</b>, bustype, vendor, product, version.

       <b>codes:</b> <b>{type:</b> <b>[a,</b> <b>b,</b> <b>c</b> <b>],</b> <b>...}</b>
               All evdev types and codes as nested dictionary. The evdev type is the key, the codes are a list.

       <b>absinfo:</b> <b>{code:</b> <b>[min,</b> <b>max,</b> <b>fuzz,</b> <b>flat,</b> <b>resolution],</b> <b>...}</b>
               An array of arrays with 6 decimal elements each, denoting the contents of a <b>struct</b> <b>input_absinfo</b>.
               The first element is the code (e.g. <b>ABS_X</b>) in decimal format.

       <b>properties:</b> <b>[0,</b> <b>1,</b> <b>...]</b>
               Array with all <b>INPUT_PROP_FOO</b> constants. May be an empty array.

   <b>udev</b>
       <b>properties:</b> <b>list</b> <b>of</b> <b>strings</b>
               A list of udev properties in the <b>key=value</b> format. This is not the complete  list  of  properties
               assigned  to  the  device but a subset that is relevant to libinput. These properties may include
               properties set on a parent device.

       <b>quirks:</b> <b>list</b> <b>of</b> <b>strings</b>
               A list of device quirks the <b>key=value</b> format.

   <b>events</b>
       A list of the recorded events. The list contains dictionaries Information about the events.  The  content
       is a list of dictionaries, with the string identifying the type of event sequence.

       <b>{</b> <b>evdev:</b> <b>[</b> <b>[sec,</b> <b>usec,</b> <b>type,</b> <b>code,</b> <b>value],</b> <b>...]</b> <b>}</b>
               Each  <b>evdev</b>  dictionary contains the contents of a <b>struct</b> <b>input_event</b> in decimal format. The last
               item in the list is always the <b>SYN_REPORT</b> of this event frame. The next event frame starts a  new
               <b>evdev</b> dictionary entry in the parent <b>events</b> list.

       <b>{</b> <b>hid:</b> <b>hidrawX</b> <b>:</b> <b>[</b> <b>12,</b> <b>34,</b> <b>56</b> <b>],</b> <b>...]</b> <b>}</b>
               The  <b>hid</b>  dictionary contains the hid reports in decimal format, with the hidraw node as key. The
               special key <b>time</b> denotes the current time when the report was read from the kernel.

       Note that the kernel does not provide timestamps for hidraw events and the timestamps provided  are  from
       <b><a href="../man3/clock_gettime.3.html">clock_gettime</a>(3)</b>. They may be greater than a subsequent evdev event's timestamp.

</pre><h4><b>NOTES</b></h4><pre>
       This  tool  records  events  from  the kernel and is independent of libinput. In other words, updating or
       otherwise changing libinput will not alter the output from this tool. libinput itself does not need to be
       in use to record events.

</pre><h4><b>LIBINPUT</b></h4><pre>
       Part of the <b><a href="../man1/libinput.1.html">libinput</a>(1)</b> suite

                                                                                              <u><a href="../man1/libinput-record.1.html">libinput-record</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>