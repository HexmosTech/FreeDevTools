<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>dnssec-cds - change DS records for a child zone based on CDS/CDNSKEY</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/bind9-utils">bind9-utils_9.20.4-3ubuntu1.2_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       dnssec-cds - change DS records for a child zone based on CDS/CDNSKEY

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>dnssec-cds</b>  [<b>-a</b>  alg...]  [<b>-c</b>  class]  [<b>-D</b>]  {<b>-d</b>  dsset-file}  {<b>-f</b>  child-file}  [<b>-i**[extension]]</b>  <b>[</b>-s**
       start-time] [<b>-T</b> ttl] [<b>-u</b>] [<b>-v</b> level] [<b>-V</b>] {domain}

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The <b>dnssec-cds</b> command changes DS records at a delegation point based on CDS or CDNSKEY records published
       in the child zone. If both CDS and CDNSKEY records are present in the child zone, the CDS  is  preferred.
       This  enables  a  child  zone to inform its parent of upcoming changes to its key-signing keys (KSKs); by
       polling periodically with <b>dnssec-cds</b>, the parent can keep the DS records up-to-date and enable  automatic
       rolling of KSKs.

       Two input files are required. The <u>-f</u> <u>child-file</u> option specifies a file containing the child's CDS and/or
       CDNSKEY  records,  plus  RRSIG  and  DNSKEY records so that they can be authenticated. The <u>-d</u> <u>path</u> option
       specifies the location of a file containing the current DS records. For example, this could be  a  <b>dsset-</b>
       file  generated by <u>dnssec-signzone</u>, or the output of <u>dnssec-dsfromkey</u>, or the output of a previous run of
       <b>dnssec-cds</b>.

       The <b>dnssec-cds</b> command uses special DNSSEC validation logic specified by <u>RFC</u> <u>7344</u>. It requires  that  the
       CDS  and/or  CDNSKEY  records  be validly signed by a key represented in the existing DS records. This is
       typically the pre-existing KSK.

       For protection against replay attacks, the signatures on the child records must not be  older  than  they
       were  on  a  previous  run  of <b>dnssec-cds</b>. Their age is obtained from the modification time of the <b>dsset-</b>
       file, or from the <u>-s</u> option.

       To protect against breaking the delegation, <b>dnssec-cds</b> ensures that the DNSKEY RRset can be  verified  by
       every  key  algorithm  in  the new DS RRset, and that the same set of keys are covered by every DS digest
       type.

       By default, replacement DS records are written to the standard output; with the <u>-i</u> option the input  file
       is  overwritten in place. The replacement DS records are the same as the existing records, when no change
       is required. The output can be empty if the CDS/CDNSKEY records specify that the child zone wants  to  be
       insecure.

       <b>WARNING:</b>
          Be careful not to delete the DS records when <b>dnssec-cds</b> fails!

       Alternatively,  :option`dnssec-cds  -u`  writes  an <u>nsupdate</u> script to the standard output. The <u>-u</u> and <u>-i</u>
       options can be used together to maintain a <b>dsset-</b> file as well as emit an <u>nsupdate</u> script.

</pre><h4><b>OPTIONS</b></h4><pre>
       <b>-a</b> <b>algorithm</b>
              When converting CDS records to DS records, this option specifies the acceptable digest algorithms.
              This option can be repeated, so that multiple digest types are allowed. If none of the CDS records
              use an acceptable digest type, <b>dnssec-cds</b> will try to use CDNSKEY records instead; if there are no
              CDNSKEY records, it reports an error.

              When converting CDNSKEY records to DS records, this option specifies the digest algorithm to  use.
              It can be repeated, so that multiple DS records are created for each CDNSKEY records.

              The  algorithm  must  be one of SHA-1, SHA-256, or SHA-384. These values are case-insensitive, and
              the hyphen may be omitted. If no algorithm is specified, the default is SHA-256 only.

       <b>-c</b> <b>class</b>
              This option specifies the DNS class of the zones.

       <b>-D</b>     This option generates DS records from CDNSKEY records if both CDS and CDNSKEY records are  present
              in the child zone. By default CDS records are preferred.

       <b>-d</b> <b>path</b>
              This  specifies  the  location  of  the  parent  DS  records.  The  path can be the name of a file
              containing the DS records; if it is a directory, <b>dnssec-cds</b> looks for a <b>dsset-</b> file for the domain
              inside the directory.

              To protect against replay attacks, child records are rejected if they were signed earlier than the
              modification time of the <b>dsset-</b> file. This can be adjusted with the <u>-s</u> option.

       <b>-f</b> <b>child-file</b>
              This option specifies the file containing the child's CDS and/or CDNSKEY records, plus its  DNSKEY
              records and the covering RRSIG records, so that they can be authenticated.

              The examples below describe how to generate this file.

       <b>-i</b> <b>extension</b>
              This  option  updates  the  <b>dsset-</b>  file  in  place, instead of writing DS records to the standard
              output.

              There must be no space between the <u>-i</u> and the extension. If no  extension  is  provided,  the  old
              <b>dsset-</b>  is discarded. If an extension is present, a backup of the old <b>dsset-</b> file is kept with the
              extension appended to its filename.

              To protect against replay attacks, the modification time of the <b>dsset-</b> file is set  to  match  the
              signature  inception  time of the child records, provided that it is later than the file's current
              modification time.

       <b>-s</b> <b>start-time</b>
              This option specifies the date and time after which RRSIG records become acceptable. This  can  be
              either  an  absolute  or  a  relative  time.  An  absolute  start time is indicated by a number in
              YYYYMMDDHHMMSS notation; 20170827133700 denotes 13:37:00 UTC on August 27th, 2017. A time relative
              to the <b>dsset-</b> file is indicated with <b>-N</b>, which is N seconds before the file modification  time.  A
              time relative to the current time is indicated with <b>now+N</b>.

              If no start-time is specified, the modification time of the <b>dsset-</b> file is used.

       <b>-T</b> <b>ttl</b> This  option  specifies  a TTL to be used for new DS records. If not specified, the default is the
              TTL of the old DS records. If they had no explicit TTL, the new DS records also have  no  explicit
              TTL.

       <b>-u</b>     This  option  writes  an  <u>nsupdate</u>  script  to the standard output, instead of printing the new DS
              reords. The output is empty if no change is needed.

              Note: The TTL of new records needs to be specified: it can be done in the  original  <b>dsset-</b>  file,
              with the <u>-T</u> option, or using the <u>nsupdate</u> <b>ttl</b> command.

       <b>-V</b>     This option prints version information.

       <b>-v</b> <b>level</b>
              This  option  sets  the  debugging  level.  Level 1 is intended to be usefully verbose for general
              users; higher levels are intended for developers.

       <b>domain</b> This indicates the name of the delegation point/child zone apex.

</pre><h4><b>EXIT</b> <b>STATUS</b></h4><pre>
       The <b>dnssec-cds</b> command exits 0 on success, or non-zero if an error occurred.

       If successful, the DS records may or may not need to be changed.

</pre><h4><b>EXAMPLES</b></h4><pre>
       Before running <u>dnssec-signzone</u>, ensure that the delegations are up-to-date by running <b>dnssec-cds</b> on every
       <b>dsset-</b> file.

       To fetch the child records required by <b>dnssec-cds</b>, invoke <u>dig</u> as in the script below. It is acceptable if
       the <u>dig</u> fails, since <b>dnssec-cds</b> performs all the necessary checking.

          for f in dsset-*
          do
              d=${f#dsset-}
              dig +dnssec +noall +answer $d DNSKEY $d CDNSKEY $d CDS |
              dnssec-cds -i -f <a href="file:/dev/stdin">/dev/stdin</a> -d $f $d
          done

       When the parent zone is automatically signed by <u>named</u>, <b>dnssec-cds</b> can be used with <u>nsupdate</u> to maintain a
       delegation as follows.  The <b>dsset-</b> file allows the script to avoid  having  to  fetch  and  validate  the
       parent DS records, and it maintains the replay attack protection time.

          dig +dnssec +noall +answer $d DNSKEY $d CDNSKEY $d CDS |
          dnssec-cds -u -i -f <a href="file:/dev/stdin">/dev/stdin</a> -d $f $d |
          nsupdate -l

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <u><a href="../man1/dig.1.html">dig</a>(1)</u>,  <u><a href="../man8/dnssec-settime.8.html">dnssec-settime</a>(8)</u>,  <u><a href="../man8/dnssec-signzone.8.html">dnssec-signzone</a>(8)</u>,  <u><a href="../man1/nsupdate.1.html">nsupdate</a>(1)</u>, BIND 9 Administrator Reference Manual, <u>RFC</u>
       <u>7344</u>.

</pre><h4><b>AUTHOR</b></h4><pre>
       Internet Systems Consortium

</pre><h4><b>COPYRIGHT</b></h4><pre>
       2025, Internet Systems Consortium

9.20.4-3ubuntu1.2-Ubuntu                           2024-12-03                                      <u><a href="../man1/DNSSEC-CDS.1.html">DNSSEC-CDS</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>