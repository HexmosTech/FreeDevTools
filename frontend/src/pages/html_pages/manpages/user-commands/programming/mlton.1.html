<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>mlton - whole-program compiler for the Standard ML (SML) programming language</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/mlton-compiler">mlton-compiler_20210117+dfsg-3_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       <b>mlton</b> - whole-program compiler for the Standard ML (SML) programming language

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>mlton</b> <u>[option</u> <u>...]</u> <u>file</u><b>.</b><u>{</u><b>c</b><u>|</u><b>mlb</b><u>|</u><b>o</b><u>|</u><b>sml</b><u>}</u> <u>[file</u><b>.</b><u>{</u><b>c</b><u>|</u><b>o</b><u>|</u><b>s</b><u>|</u><b>S</b><u>}</u> <u>...]</u>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>MLton</b>  is  run  from  the command line with a collection of options followed by a file name and a list of
       files with which to compile, assemble, and link with.  The simplest case is to run <b>mlton</b>  <b>foo.sml</b>,  where
       <b>foo.sml</b>  contains  a valid SML program, in which case MLton compiles the program to produce an executable
       <b>foo</b>.  Since <b>MLton</b> does not support separate compilation, the program must be the entire program you  wish
       to compile.  However, the program may refer to signatures and structures defined in the Basis Library.

       Larger  programs,  spanning  many  files,  may be compiled with the ML Basis system.  In this case, <b>mlton</b>
       <b>foo.mlb</b> will compile the complete SML program described by the basis <b>foo.mlb</b>, which may specify both  SML
       files and additional bases.  See the <b>MLton</b> <b>Guide</b> for details.

       <b>MLton</b>'s compile-time options control the name of the output file, the verbosity of compile-time messages,
       and  whether  or not certain optimizations are performed.  They also can specify which intermediate files
       are saved and can stop  the  compilation  process  early,  at  some  intermediate  pass,  in  which  case
       compilation  can be resumed by passing the generated files to <b>MLton</b>.  <b>MLton</b> uses the input file suffix to
       determine the type of input program.  The possibilities are <b>.c</b>, <b>.mlb</b>, <b>.o</b>, <b>.s</b>, and <b>.sml</b>.

       With no arguments, <b>MLton</b> prints the version number and exits.  For a usage message,  run  <b>MLton</b>  with  an
       invalid switch, e.g.  <b>mlton</b> <b>-z</b>.  In the explanation below and in the usage message, for flags that take a
       number of choices (e.g. <u>{</u><b>true</b><u>|</u><b>false</b><u>}</u>), the first value listed is the default.

</pre><h4><b>Compile-time</b> <b>options</b></h4><pre>
       <b>-align</b> <u>n</u>
              Aligns  objects  in  memory  by the specified alignment (<b>4</b> or <b>8</b>).  The default varies depending on
              architecture.

       <b>-as-opt</b> <u>option</u>
              Pass <u>option</u> to <b>gcc</b> when compiling assembler code.  If you wish to pass an option to the assembler,
              you must use <b>gcc</b>'s <b>-Wa,</b> syntax.

       <b>-cc-opt</b> <u>option</u>
              Pass <u>option</u> to <b>gcc</b> when compiling C code.

       <b>-codegen</b> <u>{</u><b>native</b><u>|</u><b>x86</b><u>|</u><b>amd64</b><u>|</u><b>c</b><u>|</u><b>llvm</b><u>}</u>
              Generate native object code via amd64 assembly, C code, LLVM code, or x86 assembly.  With <b>-codegen</b>
              <b>native</b> (<b>-codegen</b> <b>amd64</b> or <b>-codegen</b> <b>x86</b>), <b>MLton</b>  typically  compiles  more  quickly  and  generates
              better code.

       <b>-const</b> <b>'</b><u>name</u> <u>value</u><b>'</b>
              Set  the  value  of a compile-time constant.  Here is a list of available constants, their default
              values, and what they control.

              <b>Exn.keepHistory</b> <u>{</u><b>false</b><u>|</u><b>true</b><u>}</u>
                   Enable <b>MLton.Exn.history</b>.  There is a performance cost to  setting  this  to  <b>true</b>,  both  in
                   memory usage of exceptions and in run time, because of additional work that must be performed
                   at each exception construction, raise, and handle.

       <b>-default-ann</b> <u>ann</u>
              Specify  default  ML Basis annotations.  For example, <b>-default-ann</b> <b>'warnUnused</b> <b>true'</b> causes unused
              variable warnings to be enabled by default.  Defaults may be overridden by an annotation in an  ML
              Basis file.

       <b>-default-type</b> <u>type</u>
              Specify  the  default  binding for a primitive type.  For example, <b>-default-type</b> <b>word64</b> causes the
              top-level type <b>word</b> and the top-level  structure  <b>Word</b>  in  the  Basis  Library  to  be  equal  to
              <b>Word64.word</b>  and  <b>Word64:WORD</b>, respectively.  Similarly, <b>-default-type</b> <b>intinf</b> causes the top-level
              type <b>int</b> and the top-level structure <b>Int</b> in the Basis  Library  to  be  equal  to  <b>IntInf.int</b>  and
              <b>IntInf:INTEGER</b>, respectively.

       <b>-disable-ann</b> <u>ann</u>
              Ignore the specified ML Basis annotation in every ML Basis File. For example, to see <u>all</u> match and
              unused warnings, compile with <b>-default-ann</b> <b>'warnUnused</b> <b>true'</b>, <b>-disable-ann</b> <b>forceUsed</b>, <b>-disable-ann</b>
              <b>nonexhaustiveMatch</b>, <b>-disable-ann</b> <b>redundantMatch</b>, and <b>-disable-ann</b> <b>warnUnused</b>.

       <b>-export-header</b> <u>file</u>
              Write C prototypes to <u>file</u> for all of the functions in the program exported from SML to C.

       <b>-ieee-fp</b> <u>{</u><b>false</b><u>|</u><b>true</b><u>}</u>
              Cause  the  x86  native  code  generator  to  be  pedantic about following the IEEE floating point
              standard.  By default, it is not, because of the performance cost.  This only has an  effect  with
              <b>-codegen</b> <b>x86</b>.

       <b>-inline</b> <u>n</u>
              Set the inlining threshold used in the optimizer.  The threshold is an approximate measure of code
              size of a procedure.  The default is 320.

       <b>-keep</b> <u>{</u><b>g</b><u>|</u><b>o</b><u>}</u>
              Save intermediate files.  If no <b>-keep</b> argument is given, then only the output file is saved.
                   <b>g</b>    generated <b>.c</b> and <b>.s</b> files passed to <b>gcc</b> and generated <b>.ll</b> files passed to <b>llvm-as</b>
                   <b>o</b>    object (<b>.o</b>) files

       <b>-link-opt</b> <u>option</u>
              Pass <u>option</u> to <b>gcc</b> when linking.  You can use this to specify library search paths, e.g. <b>-link-opt</b>
              <b>-Lpath</b>,  and  libraries  to  link  with, e.g. <b>-link-opt</b> <b>-lfoo</b>, or even both at the same time, e.g.
              <b>-link-opt</b> <b>'-Lpath</b> <b>-lfoo'</b>.  If you wish to pass an option to the linker, you must  use  <b>gcc</b>'s  <b>-Wl,</b>
              syntax, e.g., <b>-link-opt</b> <b>'-Wl,--export-dynamic'</b>.

       <b>-llvm-as-opt</b> <u>option</u>
              Pass <u>option</u> to <b>llvm-as</b> when assembling (<b>.ll</b> to <b>.bc</b>) LLVM code.

       <b>-llvm-llc-opt</b> <u>option</u>
              Pass <u>option</u> to <b>llc</b> when compiling (<b>.bc</b> to <b>.o</b>) LLVM code.

       <b>-llvm-opt-opt</b> <u>option</u>
              Pass <u>option</u> to <b>opt</b> when optimizing (<b>.bc</b> to <b>.bc</b>) LLVM code.

       <b>-mlb-path-map</b> <u>file</u>
              Use  <u>file</u>  as  an  ML  Basis  path  map to define additional MLB path variables.  Multiple uses of
              <b>-mlb-path-map</b> and <b>-mlb-path-var</b> are allowed, with variable definitions in later path  maps  taking
              precedence over earlier ones.

       <b>-mlb-path-var</b> <b>'</b><u>name</u> <u>value</u><b>'</b>
              Define  an  additional  MLB  path  variable.  Multiple uses of <b>-mlb-path-map</b> and <b>-mlb-path-var</b> are
              allowed, with variable definitions in later path maps taking precedence over earlier ones.

       <b>-output</b> <u>file</u>
              Specify the name of the final output file.  The default name is  the  input  file  name  with  its
              suffix removed and an appropriate, possibly empty, suffix added.

       <b>-profile</b> <u>{</u><b>no</b><u>|</u><b>alloc</b><u>|</u><b>count</b><u>|</u><b>time</b><u>}</u>
              Produce  an  executable  that  gathers  profiling  data.   When such an executable is run, it will
              produce an <b>mlmon.out</b> file.  The man page on <b>mlprof</b> describes how to extract information from  this
              file.

       <b>-profile-branch</b> <u>{</u><b>false</b><u>|</u><b>true</b><u>}</u>
              If  true,  the  profiler  will  separately  gather  profiling  data  for each branch of a function
              definition, <b>case</b> expression, and <b>if</b> expression.

       <b>-profile-stack</b> <u>{</u><b>false</b><u>|</u><b>true</b><u>}</u>
              If true, the profiler will gather profiling data for all functions on  the  stack,  not  just  the
              currently executing function.

       <b>-profile-val</b> <u>{</u><b>false</b><u>|</u><b>true</b><u>}</u>
              If true, the profiler will separately gather profiling data for each (expansive) <b>val</b> declaration.

       <b>-runtime</b> <u>arg</u>
              Pass  argument  to  the  runtime  system  via <b>@MLton</b>.  The argument will be processed before other
              <b>@MLton</b> command line switches.  Multiple uses of <b>-runtime</b>  are  allowed,  and  will  pass  all  the
              arguments  in order.  If the same runtime switch occurs more than once, then the last setting will
              take effect.  There is no need to supply the leading <b>@MLton</b> or the  trailing  <b>--</b>;  these  will  be
              supplied automatically.

              An  argument  to  <b>-runtime</b>  may  contain  spaces, which will cause the argument to be treated as a
              sequence of words by the runtime.  For example, the command line:
                   <b>mlton</b> <b>-runtime</b> <b>'ram-slop</b> <b>0.4'</b> <b>foo.sml</b>
              will cause foo to run as if it had been called like
                   <b>foo</b> <b>@MLton</b> <b>ram-slop</b> <b>0.4</b> <b>--</b>

              An executable created with <b>-runtime</b> <b>stop</b> doesn't process any <b>@MLton</b> arguments.  This is useful  to
              create an executable, e.g. <b>echo</b>, that must treat <b>@MLton</b> like any other command-line argument.
                   <b>%</b> <b>mlton</b> <b>-runtime</b> <b>stop</b> <b>echo.sml</b>
                   <b>%</b> <b>echo</b> <b>@MLton</b> <b>--</b>
                   <b>@MLton</b> <b>--</b>

       <b>-show-basis</b> <u>file</u>
              Pretty print to <u>file</u> the basis defined by the input program.

       <b>-show-def-use</b> <u>file</u>
              Output  def-use  information to <u>file</u>.  Each identifier that is defined appears on a line, followed
              on subsequent lines by the position of each use.

       <b>-stop</b> <u>{</u><b>f</b><u>|</u><b>g</b><u>|</u><b>o</b><u>|</u><b>tc</b><u>}</u>
              Specify when to stop.
                   <b>f</b>    list of files on stdout (only makes sense when input is <b>foo.mlb</b>)
                   <b>g</b>    generated <b>.c</b> and <b>.s</b> files
                   <b>o</b>    object (<b>.o</b>) files
                   <b>tc</b>   after type checking
              If you compile <b>-stop</b> <b>g</b> or <b>-stop</b> <b>o</b>, you can resume compilation by running <b>MLton</b> on the generated <b>.c</b>
              and <b>.s</b> or <b>.o</b> files.

       <b>-target</b> <u>{</u><b>self</b><u>|...}</u>
              Generate an executable that runs on the specified platform.  The default is <b>self</b>, which  means  to
              compile for the machine that <b>MLton</b> is running on.  To use any other target, you must first install
              a cross compiler.  See the <b>MLton</b> <b>Guide</b> for details.

       <b>-target-as-opt</b> <u>target</u> <u>option</u>
              Like  <b>-as-opt</b>,  this  passes  <u>option</u> to <b>gcc</b> when assembling, except it only passes <u>option</u> when the
              target architecture or operating system is <u>target</u>.

       <b>-target-cc-opt</b> <u>target</u> <u>option</u>
              Like <b>-cc-opt</b>, this passes <u>option</u> to <b>gcc</b> when compiling C code, except it only passes  <u>option</u>  when
              the target architecture or operating system is <u>target</u>.

       <b>-target-link-opt</b> <u>target</u> <u>option</u>
              Like  <b>-link-opt</b>,  this  passes  <u>option</u>  to <b>gcc</b> when linking, except it only passes <u>option</u> when the
              target architecture or operating system is <u>target</u>.

       <b>-verbose</b> <u>{</u><b>0</b><u>|</u><b>1</b><u>|</u><b>2</b><u>|</u><b>3</b><u>}</u>
              How verbose to be about what passes are running.  The default is 0.
                   <b>0</b>  silent
                   <b>1</b>  calls to compiler, assembler, and linker
                   <b>2</b>  1, plus intermediate compiler passes
                   <b>3</b>  2, plus some data structure sizes

</pre><h4><b>Runtime</b> <b>system</b> <b>options</b></h4><pre>
       Executables produced by <b>MLton</b> take command  line  arguments  that  control  the  runtime  system.   These
       arguments  are  optional,  and  occur before the executable's usual arguments.  To use these options, the
       first argument to the executable must be <b>@MLton</b>.  The optional arguments then follow, must be  terminated
       by  <b>--</b>,  and are followed by any arguments to the program.  The optional arguments are <u>not</u> made available
       to the SML program via <b>CommandLine.arguments</b>.  For example, a valid call to <b>hello-world</b> is:
            <b>hello-world</b> <b>@MLton</b> <b>gc-summary</b> <b>fixed-heap</b> <b>10k</b> <b>--</b> <b>a</b> <b>b</b> <b>c</b>
       In the above example, <b>CommandLine.arguments</b> <b>()</b> <b>=</b> <b>["a",</b> <b>"b",</b> <b>"c"]</b>.

       It is allowed to have a sequence of <b>@MLton</b> arguments, as in:
            <b>hello-world</b> <b>@MLton</b> <b>gc-summary</b> <b>--</b> <b>@MLton</b> <b>fixed-heap</b> <b>10k</b> <b>--</b> <b>a</b> <b>b</b> <b>c</b>

       Run-time options can also control <b>MLton</b>, as in
            <b>mlton</b> <b>@MLton</b> <b>fixed-heap</b> <b>0.5g</b> <b>--</b> <b>foo.sml</b>

       <b>fixed-heap</b> <u>x{</u><b>k</b><u>|</u><b>K</b><u>|</u><b>m</b><u>|</u><b>M</b><u>|</u><b>g</b><u>|</u><b>G</b><u>}</u>
              Use a fixed size heap of size <u>x</u>, where <u>x</u> is a real number and the trailing  letter  indicates  its
              units.
                   <b>k</b> or <b>K</b>    1024
                   <b>m</b> or <b>M</b>   1,048,576
                   <b>g</b> or <b>G</b>    1,073,741,824
              A value of <b>0</b> means to use almost all the RAM present on the machine.

              The  heap  size used by <b>fixed-heap</b> includes all memory allocated by SML code, including memory for
              the stack (or stacks, if there are multiple threads).  It does not, however,  include  any  memory
              used for code itself or memory used by C globals, the C stack, or malloc.

       <b>gc-messages</b>
              Print a message at the start and end of every garbage collection.

       <b>gc-summary</b>
              Print a summary of garbage collection statistics upon program termination.

       <b>gc-summary-file</b> <u>file</u>
              Print a summary of garbage collection statistics upon program termination to the file specified by
              <u>file</u>.

       <b>load-world</b> <u>world</u>
              Restart  the  computation with the file specified by <u>world</u>, which must have been created by a call
              to <b>MLton.World.save</b> by the same executable.  See the <b>MLton</b> <b>Guide</b> for details.

       <b>max-heap</b> <u>x{</u><b>k</b><u>|</u><b>K</b><u>|</u><b>m</b><u>|</u><b>M</b><u>|</u><b>g</b><u>|</u><b>G</b><u>}</u>
              Run the computation with an automatically resized heap that is never larger than <u>x</u>, where <u>x</u>  is  a
              real  number  and  the  trailing letter indicates the units as with <b>fixed-heap</b>.  The heap size for
              <b>max-heap</b> is accounted for as with <b>fixed-heap</b>.

       <b>may-page-heap</b> <u>{</u><b>false</b><u>|</u><b>true</b><u>}</u>
              Enable paging the heap to disk when unable to grow the heap to a desired size.

       <b>no-load-world</b>
              Disable <b>load-world</b>.  This can be used as an argument to the compiler via <b>-runtime</b> <b>no-load-world</b> to
              create executables that will not load a  world.   This  may  be  useful  to  ensure  that  set-uid
              executables do not load some strange world.

       <b>ram-slop</b> <u>x</u>
              Multiply  <b>x</b>  by the amount of RAM on the machine to obtain what the runtime views as the amount of
              RAM it can use.  Typically <b>x</b> is less than 1, and is used  to  account  for  space  used  by  other
              programs running on the same machine.

       <b>stop</b>   Causes  the  runtime to stop processing <b>@MLton</b> arguments once the next <b>--</b> is reached.  This can be
              used as an argument to the compiler via <b>-runtime</b> <b>stop</b> to create executables that don't process any
              <b>@MLton</b> arguments.

</pre><h4><b>DIAGNOSTICS</b></h4><pre>
       MLton's type error messages are not in a form suitable for processing by Emacs.  For details  on  how  to
       fix this, see <a href="http://mlton.org/Emacs">http://mlton.org/Emacs</a>.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man1/mlprof.1.html">mlprof</a></b>(1) and the <b>MLton</b> <b>Guide</b>.

                                                January 17, 2021                                        <u><a href="../man1/mlton.1.html">mlton</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>