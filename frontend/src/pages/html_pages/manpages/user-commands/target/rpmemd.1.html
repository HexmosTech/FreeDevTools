<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>rpmemd - librpmem target node process (EXPERIMENTAL)</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/jammy/+package/pmdk-tools">pmdk-tools_1.11.1-3build1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       <b>rpmemd</b> - librpmem target node process (EXPERIMENTAL)

</pre><h4><b>SYNOPSIS</b></h4><pre>
              $ rpmemd [--help] [--version] [&lt;args&gt;]

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The  <b>rpmemd</b>  process is executed on target node by <b><a href="../man7/librpmem.7.html">librpmem</a></b>(7) library over <b><a href="../man1/ssh.1.html">ssh</a></b>(1) and facilitates access
       to persistent memory over RDMA.  The <b>rpmemd</b> should not be run manually under normal conditions.

</pre><h4><b>OPTIONS</b></h4><pre>
       Command line options overwrite the default <b>rpmemd</b> configuration, the global configuration  file  and  the
       user configuration file.

       -V, --version

       Displays <b>rpmemd</b> version and exits.

       -h, --help

       Prints synopsis and list of parameters and exits.

       -c, --config &lt;path&gt;

       Custom  configuration  file  location.   If the custom configuration file is provided others are omitted.
       See <b>CONFIGURATION</b> <b>FILES</b> section for details.

       All options described in <b>CONFIGURATION</b> <b>FILES</b> section are common for both the configuration file  and  the
       command line - the equivalent of the following line in the config file:

       option = value

       is

       --option value

       in the command line.

       The following command line options: <b>–persist-apm</b>, <b>–persist-general</b> and <b>–use-syslog</b> should not be followed
       by any value.  Presence of each of them in the command line turns on an appropriate option.  See <b>CONFIGU‐</b>
       <b>RATION</b> <b>FILES</b> section for details.

       -r, --remove &lt;poolset&gt;

       Remove  a  pool described by given pool set file descriptor.  It is interpreted as a path to the pool set
       file relative to the pool set directory.

       -f, --force

       Ignore errors when removing a pool file using <b>–remove</b> option.

</pre><h4><b>CONFIGURATION</b> <b>FILES</b></h4><pre>
       The <b>rpmemd</b> searches for the configuration files with following priorities:

       • The global configuration file located in <b>/etc/rpmemd/rpmemd.conf</b>.

       • The user configuration file located in the user home directory (<b>$HOME/.rpmemd.conf</b>).

       The <b>rpmemd</b> can also read configuration from the custom configuration file provided using <b>–config</b>  command
       line option.  See <b>OPTIONS</b> section for details.

       The default configuration is described in the <b>DEFAULT</b> <b>CONFIGURATION</b> section.

       The configuration file is a plain text file.  Each line of the configuration file can store only one con‐
       figuration option defined as a <u>key=value</u> pair.  Empty lines and lines starting with <u>#</u> are omitted.

       The allowed options are:

       • log-file = &lt;path&gt; - log file location

       • poolset-dir = &lt;path&gt; - pool set files directory

       • persist-apm = {yes|no}  - enable <b>The</b> <b>Appliance</b> <b>Persistency</b> <b>Method</b>.  This option must be set only if the
         target platform has non-allocating writes IO enabled.  See <b>PERSISTENCY</b> <b>METHODS</b> section for details.

       • persist-general = {yes|no} - enable <b>The</b> <b>General</b> <b>Purpose</b> <b>Server</b>  <b>Persistency</b>  <b>Method</b>.   See  <b>PERSISTENCY</b>
         <b>METHODS</b> section for details.

       • use-syslog = {yes|no} - use <b><a href="../man3/syslog.3.html">syslog</a></b>(3) for logging messages instead of log file

       • log-level = &lt;level&gt; - set log level value.  Accepted <u>&lt;level&gt;</u> values are:

         • <b>err</b> - error conditions

         • <b>warn</b> - warning conditions

         • <b>notice</b> - normal, but significant conditions

         • <b>info</b> - informational message

         • <b>debug</b> - debug-level message

       The <b>$HOME</b> sub-string in the <u>poolset-dir</u> path is replaced with the current user home directory.

</pre><h4><b>EXAMPLE</b></h4><pre>
       Example of the configuration file:

              # This is an example of configuration file
              log-file = $HOME/.logs/rpmemd.log
              poolset-dir = $HOME/poolsets/
              persist-apm = yes
              persist-general = no
              use-syslog = no # Use log file instead of syslog
              log-level = info

</pre><h4><b>DEFAULT</b> <b>CONFIGURATION</b></h4><pre>
       The <b>rpmemd</b> default configuration is equivalent of the following configuration file:

              log-file = /var/log/rpmemd.log
              poolset-dir = $HOME
              persist-apm = no
              persist-general = yes
              use-syslog = yes
              log-level = err

</pre><h4><b>PERSISTENCY</b> <b>METHODS</b></h4><pre>
       The  <b><a href="../man7/librpmem.7.html">librpmem</a></b>(7)  supports  two methods for making data written to remote persistent memory durable.  The
       difference between the use of the two mechanisms is based on whether <b><a href="../man7/librpmem.7.html">librpmem</a></b>(7) will make use of non-al‐
       locating writes on the remote node.

       • <b>The</b> <b>General</b> <b>Purpose</b> <b>Server</b> <b>Persistency</b> <b>Method</b> does not have any requirements for the platform on  which
         the  target  daemon  runs  and  can be enabled by administrator using the <u>persist-general</u> option.  This
         method utilize <b><a href="../man7/libpmem.7.html">libpmem</a></b>(7) persistency mechanisms on remote node and requires  additional  communication
         between initiator and remote node using the in-band connection.

       • <b>The</b>  <b>Appliance</b> <b>Persistency</b> <b>Method</b> requires non-allocating writes enabled on the platform and can be en‐
         abled by administrator using <u>persist-apm</u> option.  This method requires to issue an RDMA READ  operation
         after the RDMA WRITE operations performed on requested chunk of memory.

       “Non-allocating write requests” is the Intel Integrated IO Controller mode where all incoming PCIe writes
       will  utilize non-allocating buffers for the write requests.  Non-allocating writes are guaranteed to by‐
       pass all of the CPU caches and force the write requests to flow directly to the  Integrated  Memory  Con‐
       troller without delay.

       The  <b>rpmemd</b>  dynamically choose the appropriate persistency method and the flushing to persistence primi‐
       tive for GPSPM for each opened pool set name depending on available persistency methods and  whether  all
       pool set parts are stored in the persistent memory.

       If the <b>Appliance</b> <b>Persistency</b> <b>Method</b> is enabled and the pool set is stored in the persistent memory <b>rpmemd</b>
       will  use  the  <b>Appliance</b>  <b>Persistency</b> <b>Method</b>.  If the pool set is NOT stored in the persistent memory it
       will fallback to the <b>General</b> <b>Puropose</b> <b>Server</b> <b>Persistency</b> <b>Method</b> with <b><a href="../man3/pmem_msync.3.html">pmem_msync</a></b>(3).

       If the <b>General</b> <b>Puropose</b> <b>Server</b> <b>Persistency</b> <b>Method</b> is enabled and the pool set is stored in the persistent
       memory <b>rpmemd</b> will use <b><a href="../man3/pmem_persist.3.html">pmem_persist</a></b>(3).  If the pool set is NOT stored in the persistent momory  it  will
       use <b><a href="../man3/pmem_msync.3.html">pmem_msync</a></b>(3).

       See <b><a href="../man3/pmem_persist.3.html">pmem_persist</a></b>(3) and <b><a href="../man3/pmem_msync.3.html">pmem_msync</a></b>(3) for more details.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man1/ssh.1.html">ssh</a></b>(1),   <b><a href="../man3/pmem_msync.3.html">pmem_msync</a></b>(3),   <b><a href="../man3/pmem_persist.3.html">pmem_persist</a></b>(3),   <b><a href="../man3/syslog.3.html">syslog</a></b>(3),   <b><a href="../man7/libpmem.7.html">libpmem</a></b>(7),   <b><a href="../man7/libpmemobj.7.html">libpmemobj</a></b>(7),  <b><a href="../man7/librpmem.7.html">librpmem</a></b>(7)  and
       <b>&lt;https://pmem.io&gt;</b>

PMDK - rpmemd version 1.4                          2021-09-24                                          <u><a href="../man1/RPMEMD.1.html">RPMEMD</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>