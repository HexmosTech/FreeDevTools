<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>r.slope.aspect   -  Generates  raster  maps  of slope, aspect, curvatures and partial derivatives from an</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/grass-doc">grass-doc_8.4.1-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       <b>r.slope.aspect</b>   -  Generates  raster  maps  of slope, aspect, curvatures and partial derivatives from an
       elevation raster map.
       Aspect is calculated counterclockwise from east.

</pre><h4><b>KEYWORDS</b></h4><pre>
       raster, terrain, aspect, slope, curvature, parallel

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>r.slope.aspect</b>
       <b>r.slope.aspect</b> <b>--help</b>
       <b>r.slope.aspect</b> [-<b>aen</b>] <b>elevation</b>=<u>name</u>  [<b>slope</b>=<u>name</u>]   [<b>aspect</b>=<u>name</u>]   [<b>format</b>=<u>string</u>]   [<b>precision</b>=<u>string</u>]
       [<b>pcurvature</b>=<u>name</u>]   [<b>tcurvature</b>=<u>name</u>]    [<b>dx</b>=<u>name</u>]    [<b>dy</b>=<u>name</u>]    [<b>dxx</b>=<u>name</u>]    [<b>dyy</b>=<u>name</u>]    [<b>dxy</b>=<u>name</u>]
       [<b>zscale</b>=<u>float</u>]    [<b>min_slope</b>=<u>float</u>]    [<b>nprocs</b>=<u>integer</u>]   [<b>memory</b>=<u>memory</u> <u>in</u> <u>MB</u>]   [--<b>overwrite</b>]  [--<b>help</b>]
       [--<b>verbose</b>]  [--<b>quiet</b>]  [--<b>ui</b>]

   <b>Flags:</b>
       <b>-a</b>
           Do not align the current region to the raster elevation map

       <b>-e</b>
           Compute output at edges and near NULL values

       <b>-n</b>
           Create aspect as degrees clockwise from North (azimuth), with flat = -9999
           Default: degrees counter-clockwise from East, with flat = 0

       <b>--overwrite</b>
           Allow output files to overwrite existing files

       <b>--help</b>
           Print usage summary

       <b>--verbose</b>
           Verbose module output

       <b>--quiet</b>
           Quiet module output

       <b>--ui</b>
           Force launching GUI dialog

   <b>Parameters:</b>
       <b>elevation</b>=<u>name</u> <b>[required]</b>
           Name of input elevation raster map

       <b>slope</b>=<u>name</u>
           Name for output slope raster map

       <b>aspect</b>=<u>name</u>
           Name for output aspect raster map

       <b>format</b>=<u>string</u>
           Format for reporting the slope
           Options: <u>degrees,</u> <u>percent</u>
           Default: <u>degrees</u>

       <b>precision</b>=<u>string</u>
           Type of output aspect and slope maps
           Storage type for resultant raster map
           Options: <u>CELL,</u> <u>FCELL,</u> <u>DCELL</u>
           Default: <u>FCELL</u>
           <b>CELL</b>: Integer
           <b>FCELL</b>: Single precision floating point
           <b>DCELL</b>: Double precision floating point

       <b>pcurvature</b>=<u>name</u>
           Name for output profile curvature raster map

       <b>tcurvature</b>=<u>name</u>
           Name for output tangential curvature raster map

       <b>dx</b>=<u>name</u>
           Name for output first order partial derivative dx (E-W slope) raster map

       <b>dy</b>=<u>name</u>
           Name for output first order partial derivative dy (N-S slope) raster map

       <b>dxx</b>=<u>name</u>
           Name for output second order partial derivative dxx raster map

       <b>dyy</b>=<u>name</u>
           Name for output second order partial derivative dyy raster map

       <b>dxy</b>=<u>name</u>
           Name for output second order partial derivative dxy raster map

       <b>zscale</b>=<u>float</u>
           Multiplicative factor to convert elevation units to horizontal units
           Default: <u>1.0</u>

       <b>min_slope</b>=<u>float</u>
           Minimum slope value (in percent) for which aspect is computed
           Default: <u>0.0</u>

       <b>nprocs</b>=<u>integer</u>
           Number of threads for parallel computing
           Default: <u>1</u>

       <b>memory</b>=<u>memory</u> <u>in</u> <u>MB</u>
           Maximum memory to be used (in MB)
           Cache size for raster rows
           Default: <u>300</u>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <u>r.slope.aspect</u> generates raster maps of slope, aspect, curvatures and  first  and  second  order  partial
       derivatives  from a raster map of true elevation values. The user must specify the input <b>elevation</b> raster
       map and at least one output raster maps. The user  can  also  specify  the  <b>format</b>  for  slope  (degrees,
       percent; default=degrees), and the <b>zscale</b>: multiplicative factor to convert elevation units to horizontal
       units; (default 1.0).

       The  <b>elevation</b> input raster map specified by the user must contain true elevation values, <u>not</u> rescaled or
       categorized data. If the elevation values are in other units than in the horizontal units, they  must  be
       converted to horizontal units using the parameter <b>zscale</b>.  <u>In</u> <u>GRASS</u> <u>GIS</u> <u>7,</u> <u>vertical</u> <u>units</u> <u>are</u> <u>not</u> <u>assumed</u>
       <u>to</u>  <u>be</u>  <u>meters</u>  <u>any</u>  <u>more.</u>   <u>For</u>  <u>example,</u> <u>if</u> <u>both</u> <u>your</u> <u>vertical</u> <u>and</u> <u>horizontal</u> <u>units</u> <u>are</u> <u>feet,</u> <u>parameter</u>
       <b>zscale</b> must not be used.

       The <b>aspect</b> output raster map indicates the direction that slopes are facing counterclockwise  from  East:
       90  degrees  is North, 180 is West, 270 is South, 360 is East. Zero aspect indicates flat areas with zero
       slope. Category and color table files are also generated for the aspect raster map.
       Note: These values can be transformed to azimuth values (90 is East, 180 is South, 270 is  West,  360  is
       North) using r.mapcalc:
       # convert angles from CCW from East to CW from North
       # modulus (%) can not be used with floating point aspect values
       r.mapcalc "azimuth_aspect = if(ccw_aspect == 0, 0, \
                                   if(ccw_aspect &lt; 90, 90 - ccw_aspect, \
                                   450 - ccw_aspect)))"
       Alternatively,  the <b>-n</b> flag can be used to produce aspect as degrees CW from North. Aspect for flat areas
       is then set to -9999 (default: 0). Note: The reason for using -9999 is to be compliant with <b>gdaldem</b> which
       uses -9999 by default as the nodata value.

       The aspect for slope equal to zero (flat areas) is set to zero (-9999 with <b>-n</b>  flag).  Thus,  most  cells
       with a very small slope end up having category 0, 45, ..., 360 in <b>aspect</b> output. It is possible to reduce
       the  bias  in  these  directions by filtering out the aspect in areas where the terrain is almost flat. A
       option <b>min_slope</b> can be used to specify the minimum slope for which aspect is  computed.  For  all  cells
       with slope &lt; <b>min_slope</b>, both slope and aspect are set to zero.

       The  <b>slope</b>  output raster map contains slope values, stated in degrees of inclination from the horizontal
       if <b>format</b>=degrees option (the default) is chosen, and in percent rise if <b>format</b>=percent option is chosen.
       Category and color table files are generated.

       Profile and tangential curvatures are the curvatures in the  direction  of  steepest  slope  and  in  the
       direction of the contour tangent respectively. The curvatures are expressed as 1/metres, e.g. a curvature
       of  0.05  corresponds  to  a radius of curvature of 20m. Convex form values are positive and concave form
       values are negative.

       Example DEM

       Slope (degree) from example DEM                              Aspect (degree) from example DEM

       Tangential curvature (m-1) from example DEM                  Profile curvature (m-1) from example DEM

       For some applications, the user will wish to use a reclassified raster map of  slope  that  groups  slope
       values into ranges of slope. This can be done using <u>r.reclass</u>. An example of a useful reclassification is
       given below:
                 category      range   category labels
                            (in degrees)    (in percent)
                    1         0-  1             0-  2%
                    2         2-  3             3-  5%
                    3         4-  5             6- 10%
                    4         6-  8            11- 15%
                    5         9- 11            16- 20%
                    6        12- 14            21- 25%
                    7        15- 90            26% and higher
            The following color table works well with the above
            reclassification.
                 category   red   green   blue
                    0       179    179     179
                    1         0    102       0
                    2         0    153       0
                    3       128    153       0
                    4       204    179       0
                    5       128     51      51
                    6       255      0       0
                    7         0      0       0

</pre><h4><b>NOTES</b></h4><pre>
       To  ensure  that  the raster elevation map is not inappropriately resampled, the settings for the current
       region are modified slightly (for the execution of the program only): the resolution is set to match  the
       resolution of the elevation raster map and the edges of the region (i.e. the north, south, east and west)
       are  shifted, if necessary, to line up along edges of the nearest cells in the elevation map. If the user
       really wants the raster elevation map resampled to the current region resolution, the <b>-a</b> flag  should  be
       specified.

       The current mask is ignored.

       The  algorithm  used to determine slope and aspect uses a 3x3 neighborhood around each cell in the raster
       elevation map. Thus, slope and aspect are not determineed for cells adjacent to the edges and NULL  cells
       in  the  elevation map layer. These cells are by default set to nodata in output raster maps. With the <b>-e</b>
       flag, output values are estimated for these cells, avoiding cropping along the edges.

       Horn’s formula is used to find the first order derivatives in x and y directions.

       Only when using integer elevation models, the aspect is biased in 0, 45, 90, 180, 225, 270, 315, and  360
       directions;  i.e.,  the  distribution  of  aspect categories is very uneven, with peaks at 0, 45,..., 360
       categories.  When working with floating point elevation models, no such aspect bias occurs.

   <b>PERFORMANCE</b>
       To enable parallel processing, the user can specify the number of threads to  be  used  with  the  <b>nprocs</b>
       parameter  (default  1). The <b>memory</b> parameter (default 300) can also be provided to determine the size of
       the buffer for computation.
       <u>Figure:</u> <u>Benchmark</u> <u>on</u> <u>the</u> <u>left</u> <u>shows</u> <u>execution</u> <u>time</u> <u>for</u> <u>different</u> <u>number</u> <u>of</u> <u>cells,</u> <u>benchmark</u> <u>on</u> <u>the</u>  <u>right</u>
       <u>shows</u>  <u>execution</u>  <u>time</u>  <u>for</u>  <u>different</u>  <u>memory</u> <u>size</u> <u>for</u> <u>5000x5000</u> <u>raster.</u> <u>See</u> <u>benchmark</u> <u>scripts</u> <u>in</u> <u>source</u>
       <u>code.</u>  <u>(Intel</u> <u>Core</u> <u>i9-10940X</u> <u>CPU</u> <u>@</u> <u>3.30GHz</u> <u>x</u> <u>28)</u>

       To reduce the memory requirements to minimum, set option <b>memory</b>  to  zero.   To  take  advantage  of  the
       parallelization, GRASS GIS needs to compiled with OpenMP enabled.

</pre><h4><b>EXAMPLES</b></h4><pre>
   <b>Calculation</b> <b>of</b> <b>slope,</b> <b>aspect,</b> <b>profile</b> <b>and</b> <b>tangential</b> <b>curvature</b>
       In  this  example  a  slope,  aspect, profile and tangential curvature map are computed from an elevation
       raster map (North Carolina sample dataset):
       g.region raster=elevation
       r.slope.aspect elevation=elevation slope=slope aspect=aspect pcurvature=pcurv tcurvature=tcurv
       # set nice color tables for output raster maps
       r.colors -n map=slope color=sepia
       r.colors map=aspect color=aspectcolr
       r.colors map=pcurv color=curvature
       r.colors map=tcurv color=curvature

       Figure: Slope, aspect, profile and tangential curvature raster map (North Carolina dataset)

   <b>Classification</b> <b>of</b> <b>major</b> <b>aspect</b> <b>directions</b> <b>in</b> <b>compass</b> <b>orientation</b>
       In the following example (based on the North Carolina sample dataset)  we  first  generate  the  standard
       aspect  map  (oriented  CCW from East), then convert it to compass orientation, and finally classify four
       major aspect directions (N, E, S, W):
       g.region raster=elevation -p
       # generate integer aspect map with degrees CCW from East
       r.slope.aspect elevation=elevation aspect=myaspect precision=CELL
       # generate compass orientation and classify four major directions (N, E, S, W)
       r.mapcalc "aspect_4_directions = eval( \\
          compass=(450 - myaspect ) % 360, \\
            if(compass &gt;=0. &amp;&amp; compass &lt; 45., 1)  \\
          + if(compass &gt;=45. &amp;&amp; compass &lt; 135., 2) \\
          + if(compass &gt;=135. &amp;&amp; compass &lt; 225., 3) \\
          + if(compass &gt;=225. &amp;&amp; compass &lt; 315., 4) \\
          + if(compass &gt;=315., 1) \\
       )"
       # assign text labels
       r.category aspect_4_directions separator=comma rules=- &lt;&lt; EOF
       1,north
       2,east
       3,south
       4,west
       EOF
       # assign color table
       r.colors aspect_4_directions rules=- &lt;&lt; EOF
       1 253,184,99
       2 178,171,210
       3 230,97,1
       4 94,60,153
       EOF
       Aspect map classified to four major compass directions (zoomed subset shown)

</pre><h4><b>REFERENCES</b></h4><pre>
           •   Horn, B. K.  P.  (1981).  <u>Hill</u>  <u>Shading</u>  <u>and</u>  <u>the</u>  <u>Reflectance</u>  <u>Map</u>,  Proceedings  of  the  IEEE,
               <a href="../man1/69.1.html">69</a>(1):14-47.

           •   Mitasova,  H.  (1985).  <u>Cartographic</u>  <u>aspects</u>  <u>of</u>  <u>computer</u> <u>surface</u> <u>modeling.</u> <u>PhD</u> <u>thesis.</u>  Slovak
               Technical University , Bratislava

           •   Hofierka, J., Mitasova, H., Neteler, M., 2009. <u>Geomorphometry</u> <u>in</u> <u>GRASS</u> <u>GIS.</u>  In:  Hengl,  T.  and
               Reuter,  H.I.  (Eds),  <u>Geomorphometry:</u>  <u>Concepts,</u>  <u>Software,</u>  <u>Applications.</u>  Developments in Soil
               Science,    vol.     33,     Elsevier,     387-410     pp,     doi:10.1016/<a href="../man08/S0166-2481.08.html">S0166-2481</a>(08)00017-2,
               https://www.geomorphometry.org

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
        <u>r.mapcalc,</u> <u>r.neighbors,</u> <u>r.reclass,</u> <u>r.rescale</u>

</pre><h4><b>AUTHORS</b></h4><pre>
       Michael Shapiro, U.S.Army Construction Engineering Research Laboratory
       Olga Waupotitsch, U.S.Army Construction Engineering Research Laboratory

</pre><h4><b>SOURCE</b> <b>CODE</b></h4><pre>
       Available at: r.slope.aspect source code (history)

       Accessed: Friday Apr 04 01:19:33 2025

       Main index | Raster index | Topics index | Keywords index | Graphical index | Full index

       © 2003-2025 GRASS Development Team, GRASS GIS 8.4.1 Reference Manual

GRASS 8.4.1                                                                               <u><a href="../man1grass/r.slope.aspect.1grass.html">r.slope.aspect</a></u>(1grass)
</pre>
 </div>
</div></section>
</div>
</body>
</html>