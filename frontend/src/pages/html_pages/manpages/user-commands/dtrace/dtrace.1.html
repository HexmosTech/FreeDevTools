<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>dtrace - Dtrace compatible user application static probe generation tool.</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/systemtap-sdt-dev">systemtap-sdt-dev_5.1-4.1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       dtrace - Dtrace compatible user application static probe generation tool.

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>dtrace</b> <b>-s</b> <u>file</u> [<b>OPTIONS</b>]

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The  dtrace  command  converts  probe  descriptions defined in <u>file.d</u> into a probe header file via the <b>-h</b>
       option or a probe description file via the <b>-G</b> option.

</pre><h4><b>OPTIONS</b></h4><pre>
       <b>-h</b>     generate a systemtap header file.

       <b>-G</b>     generate a systemtap probe definition object file.

       <b>-o</b> <u>file</u>
              is the name of the output file.  If the <b>-G</b> option is given then the output  file  will  be  called
              <u>file.o</u>; if the <b>-h</b> option is given then the output file will be called <u>file.h</u>.

       <b>-C</b>     run the cpp preprocessor on the input file when the <b>-h</b> option is given.

       <b>-I</b> <u>file</u>
              give this include path to cpp when the <b>-C</b> option is given.

       <b>-k</b>     keep temporary files, for example the C language source for the <b>-G</b> option.

</pre><h4><b>EXAMPLES</b></h4><pre>
       Systemtap  is  source  compatible with dtrace user application static probe support.  Given a file <u>test.d</u>
       containing:

              provider sdt_probes
              {
                probe test_0 (int type);
                probe test_1 (struct astruct node);
              };
              struct astruct {int a; int b;};

       Then the command <u>"dtrace</u> <u>-s</u> <u>test.d</u> <u>-G"</u> will create the probe  definition  file  <u>test.o</u>  and  the  command
       <u>"dtrace</u> <u>-stest.d</u> <u>-h"</u>  will  create  the probe header file <u>test.h</u> Subsequently the application can use the
       generated macros this way:

              #include "test.h"
               ...
              struct astruct s;
               ...
              SDT_PROBES_TEST_0(value);
               ...
              if (SDT_PROBES_TEST_1_ENABLED())
                  SDT_PROBES_TEST_1(expensive_function(s));

</pre><h4><b>SEMAPHORES</b></h4><pre>
       Semaphores are flag variables used by probes as a way of bypassing potentially costly processing to  pre‐
       pare  arguments  for probes that may not even be active.  They are automatically set/cleared by systemtap
       when a relevant script is running, so the argument setup cost is only paid when necessary.   These  sema‐
       phore  variables  are defined within the the <u>"test.o"</u> object file, which must therefore be linked into an
       application.

       Sometimes, semaphore variables are not necessary nor helpful.   Skipping  them  can  simplify  the  build
       process,  by  omitting  the  extra  <u>"test.o"</u>  file.  To skip dependence upon semaphore variables, include
       <u>"&lt;sys/sdt.h&gt;"</u> within the application before <u>"test.h"</u>:

              #include &lt;sys/sdt.h&gt;
              #include "test.h"
               ...
              struct astruct s;
               ...
              SDT_PROBES_TEST_0(value);
               ...
              if (SDT_PROBES_TEST_1_ENABLED())
                 SDT_PROBES_TEST_1(cheap_function(s));

       In this mode, the ENABLED() test is fixed at 1.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <u><a href="../man1/stap.1.html">stap</a></u>(1),
       <u><a href="../man7/stappaths.7.html">stappaths</a></u>(7)

</pre><h4><b>BUGS</b></h4><pre>
       Use the Bugzilla link of the project web page or  our  mailing  list.   <b><a href="http://sourceware.org/systemtap/">http://sourceware.org/systemtap/</a></b>,
       <b>&lt;<a href="mailto:systemtap@sourceware.org">systemtap@sourceware.org</a>&gt;</b>.

       <u>error::<a href="../man7stap/reporting.7stap.html">reporting</a></u>(7stap), <b>https://sourceware.org/systemtap/wiki/HowToReportBugs</b>

                                                                                                       <u><a href="../man1/DTRACE.1.html">DTRACE</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>