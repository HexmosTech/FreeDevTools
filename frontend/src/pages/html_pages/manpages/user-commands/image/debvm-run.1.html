<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>debvm-run - Run a VM image created by debvm-create</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/debvm">debvm_0.3.1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       debvm-run - Run a VM image created by debvm-create

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>debvm-run</b> [<b>-g</b>] [<b>-i</b> <u>image</u>] [<b>-s</b> <u>sshport</u>] [<b>--</b> <u>qemu</u> <u>options</u>]

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>debvm-run</b> is essentially a thin wrapper around <b>qemu</b> for running a virtual machine image created by <b>debvm-</b>
       <b>create</b> or something compatible.  The virtual machine image is expected to be a raw ext4 image with a non-
       empty file system label.  The architecture of the machine is detected from the contained <u><a href="file:/bin/true">/bin/true</a></u>.  It
       must contain a symbolic link pointing to a kernel image at one of <u>(|<a href="file:/boot">/boot</a>)/vmlinu[xz]</u> a symbolic link
       pointing to an initrd image at <u>initrd.img</u> in the same directory as the kernel image.  Both are extracted
       and passed to <b>qemu</b>.  A net interface configured for user mode is added automatically.

</pre><h4><b>OPTIONS</b></h4><pre>
       <b>--append</b>=<u>cmdline</u>
               While  the  kernel  command  line can be modified by passing <b>-append</b> to <b>qemu</b> directly, doing that
               always replaces the entire command line and thus removes important values  passed  by  <b>debvm-run</b>.
               This  variant  instead  appends given command line arguments to the automatic ones.  Repeated use
               also causes appending rather than replacement.

       <b>-g</b>, <b>--graphical</b>
               By default, the option <b>-nographic</b> is passed to <b>qemu</b> and one interacts with the serial console  of
               the  machine.   This  configuration  is skipped in the presence of this option.  Note that <b>debvm-</b>
               <b>create</b>  defaults  to  installing  a  cloud  kernel  if  available,  so  you  may  have  to   pass
               "--include=linux-image-generic" during image construction to get graphics drivers.

       <b>-i</b> <u>image</u>, <b>--image</b>=<u>image</u>
               This  option specifies the location of the virtual machine image file.  By default <u>rootfs.ext4</u> in
               the working directory is used.

       <b>--netopt</b>=<u>option</u>
               <b>debvm-run</b> sets up a user mode network by default.  It therefore passes a <b>-netdev</b> option to  <b>qemu</b>.
               Using this option, you can customize the value of that <b>-netdev</b> option.  For instance, you can set
               up  additional  port  forwards by passing e.g. "--netopt hostfwd=:127.0.0.1:8080-:80".  It can be
               used multiple times.

       <b>--skip</b>=<u>task</u>
               Skip a particular task or feature.  The option may be specified multiple times or  list  multiple
               tasks  to  be  skipped  by  separating them with a comma.  By default, no tasks are skipped.  The
               following tasks may be skipped.

       <b>--transport</b>=<u>transport</u>
               When <b>debvm</b> adds devices to <b>qemu</b>, it has to select a transport and  it  most  often  guesses  <b>pci</b>.
               When  specifying  a  different  machine  such  as <b>-machine</b> <b>microvm</b>, a different transport such as
               <b>device</b> may be needed.

               <b>network</b>
                   Do not configure a network card.  Use this if you want to  configure  network  on  your  own.
                   This  should  also  be  passed  in  addition  to passing "-nic none" when you want to disable
                   networking.

               <b>rngdev</b>
                   Do not pass a random number generator device.

               <b>root</b>
                   Skip all of the following tasks matching "root/*".  If either of these  is  present,  the  VM
                   will not boot unless a suitable replacement is added in another way.

               <b>root/cmd</b>
                   Since <b>debvm-run</b> uses <b>qemu</b> as bootloader it normally passes the label of the root block device
                   via the kernel command line.  This passing can be inhibited to supply a different location.

               <b>root/dev</b>
                   A  block  device  for the root filesystem is no longer passed.  This can be used to customize
                   the block device.

       <b>-s</b> <u>sshport</u>, <b>--sshport</b>=<u>sshport</u>
               If given, <b>qemu</b> is configured to pass connections to <u>127.0.0.1:sshport</u> to port 22 of  the  virtual
               machine.  You can connect to your virtual machine without updating your known hosts like this:

                   ssh -o NoHostAuthenticationForLocalhost=yes -p $sshport <a href="mailto:root@127.0.0.1">root@127.0.0.1</a>

               The option is a shorthand for "--netopt hostfwd=tcp:127.0.0.1:sshport-:22".

       <b>--</b> <u>qemu</u> <u>options</u>
               All  options  beyond  a double dash are passed to <b>qemu</b>.  This can be used to configure additional
               hardware components.  One possible use of this method is passing <b>-snapshot</b> to avoid modifying the
               virtual machine image.

</pre><h4><b>EXAMPLES</b></h4><pre>
       Run a virtual machine stored in the image <u>rootfs.ext4</u> (the default) with local port 8022 routed  to  port
       22 of the virtual machine. The <b>-snapshot</b> argument is passed to QEMU and prevents any permanent changes to
       <u>rootfs.ext4</u>, resulting in an ephemeral run.

           debvm-run -s 8022 -i rootfs.ext4 -- -snapshot

</pre><h4><b>FAQ</b></h4><pre>
       The debvm-run console renders wrong.
               Make  sure $TERM is set to a value known inside the VM.  You may need to install <b>ncurses-term</b> for
               more definitions.  The serial console will miss events of resizing the  terminal  emulator.   You
               may run "setterm --resize" in that case.

       How can I kill debvm-run?
               The  wrapped <b>qemu</b> can be terminated by pressing Ctrl-a x.  Refer to the <b>qemu</b> manual page for more
               escape sequences.

</pre><h4><b>LIMITATIONS</b></h4><pre>
       Due to the way kernel and bootloader are being extracted before running <b>qemu</b>, one cannot upgrade a kernel
       and then just reboot.  Attempting to do so, will still  use  the  old  kernel.   Instead,  <b>qemu</b>  must  be
       terminated  and  <b>debvm-run</b>  should  be  launched  again  to  pick  up  the new kernel.  In order to avoid
       accidental reboots, one may pass <b>-no-reboot</b> to <b>qemu</b>.

       For 32bit arm, highmem is actively disabled, because the default kernel flavour fails to  boot.   If  you
       want  to  pass more ram, please also pass <b>-machine</b> <b>virt</b> and install a <b>lpae</b> kernel.  Alternatively, use an
       <b>arm64</b> kernel.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
           <a href="../man1/debvm-create.1.html">debvm-create</a>(1) <a href="../man1/qemu.1.html">qemu</a>(1)

perl v5.38.2                                       2024-06-23                                       <u><a href="../man1/DEBVM-RUN.1.html">DEBVM-RUN</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>