<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>debvm-create - Create a VM image for various Debian releases and architectures</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/debvm">debvm_0.3.1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       debvm-create - Create a VM image for various Debian releases and architectures

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>debvm-create</b> [<b>-h</b> <u>hostname</u>] [<b>-k</b> <u>sshkey</u>] [<b>-o</b> <u>output</u>] [<b>-r</b> <u>release</u>] [<b>-s</b> &lt;task&gt;] [<b>-z</b> <u>size</u>] [<b>--</b> <u>mmdebstrap</u>
       <u>options</u>]

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>debvm-create</b> is essentially a thin wrapper around <b>mmdebstrap</b> for creating a raw ext4 filesystem image for
       booting with <b>debvm-run</b>.  The purpose of these images primarily is testing the different releases and
       architectures without access to a physical machine of that architecture.  Beyond essential packages, the
       image will contain <b>apt</b>, an init system and a suitable kernel package.  Notably absent is a bootloader and
       a partition table.  In order to boot such an image, one is supposed to extract the kernel and initrd from
       the image and pass it to a suitable bootloader.  No user account is created and root can login without
       specifying a password.

</pre><h4><b>OPTIONS</b></h4><pre>
       <b>-h</b> <u>hostname</u>, <b>--hostname</b>=<u>hostname</u>
               Set the hostname of the virtual machine.  By default, the hostname is <b>testvm</b>.

       <b>--initsystem</b>=<b>systemd</b> | <b>busybox</b> | <b>finit</b> | <b>runit</b> | <b>sysv</b> | <b>none</b>
               Select  an  init  system to be used.  The default is <b>systemd</b> independently of the Debian release.
               Note that when selecting <b>none</b>, the resulting image will not be  bootable  unless  something  else
               takes  care  of  creating <u><a href="file:/sbin/init">/sbin/init</a></u>.  Automatic customizations that are specific to a particular
               init system will be skipped when a different init system is selected.  When using the <b>finit</b>  init
               system consider passing <b>--include=finit-plugins</b> to <b>mmdebstrap</b>.

       <b>-k</b> <u>sshkey</u>, <b>--sshkey</b>=<u>sshkey</u>
               Install  the  given  ssh  public key file into the virtual machine image for the root user.  This
               option also causes the ssh server to be installed.  By default, no key or  server  is  installed.
               To connect to the vm, pass a port number to <b>debvm-run</b> with the <b>-s</b> option.

       <b>-o</b> <u>output</u>, <b>--output</b>=<u>output</u>
               Specify  the  file  name  of  the  resulting virtual machine image.  By default, it is written to
               <u>rootfs.ext4</u>.

       <b>-r</b> <u>release</u>, <b>--release</b>=<u>release</u>
               Use the given Debian release.  By default, <b>unstable</b> is  being  used.   If  you  pass  a  complete
               <u>sources.list</u> that includes release names to <b>mmdebstrap</b>, you may pass an empty string here.

       <b>-s</b> <u>task</u>, <b>--skip</b>=<u>task</u>
               Skip  a  particular task or feature.  The option may be specified multiple times or list multiple
               tasks to be skipped by separating them with a comma.  By default,  no  tasks  are  skipped.   The
               following tasks may be skipped.

               <b>autologin</b>
                   Skips  adding a the customize-autologin.sh to <b>mmdebstrap</b> that configures automatic root login
                   on a serial console and also parses the "TERM" kernel cmdline and  passes  it  as  "TERM"  to
                   <b>agetty</b>.  This is specific to using <b>finit</b>, <b>runit</b>, <b>systemd</b> or <b>sysv</b> as init system.

               <b>ext4</b>
                   Normally,  <b>mmdebstrap</b> bootstraps to a temporary directory and we create the output ext4 image
                   from that directory.  This option causes the creation of the ext4 image to be skipped and the
                   output file becomes a tar archive of the temporary directory instead.  Such a tar archive  is
                   not suitable for being booted by <b>debvm-run</b>.

               <b>ifupdown</b>
                   skips installing <b>ifupdown</b> configuration to automatically configure wired interfaces.  This is
                   specific to using <b>finit</b>, <b>runit</b> or <b>sysv</b> as init system.

               <b>initsystem</b>
                   skips installing an init system.  This is equivalent to specifying <b>--initsystem=none</b>.

               <b>kernel</b>
                   skips  installing  a  linux  kernel  image.  This can be useful to install a kernel without a
                   package.  If a kernel is installed  via  <b>mmdebstrap</b>  option  "--include",  automtatic  kernel
                   installation is automatically skipped.

               <b>packagelists</b>
                   reduces  the package lists inside the image.  The <b>available</b> database for <b>dpkg</b> is not created.
                   The package lists used by <b>apt</b> are deleted.  This generally produces a smaller image, but  you
                   need to run <b>apt</b> <b>update</b> before installing packages and <b>dpkg</b> <b>--set-selections</b> does not work.

               <b>systemdnetwork</b>
                   skips  installing  <b>libnss-resolve</b>  as  well  as  automatic network configuration via <b>systemd-</b>
                   <b>networkd</b>.  This is specific to using <b>systemd</b> as init system.

               <b>usrmerge</b>
                   By default <b>debvm</b> adds a hook to enable merged-<a href="file:/usr">/usr</a>  without  the  <b>usrmerge</b>  package  given  a
                   sufficiently  recent  Debian  release.  Without the hook, dependencies will pull the <b>usrmerge</b>
                   package as needed, which may result in a larger installation.

       <b>-z</b> <u>size</u>, <b>--size</b>=<u>size</u>
               Specify the minimum image size as an integer and optional unit (example: 10K is 10*1024).   Units
               are K,M,G,T (powers of 1024).  The resulting image will be grown as a sparse file to this size if
               necessary.  The default is 2 GB.

       <b>--</b> <u>mmdebstrap</u> <u>options</u>
               All  options  beyond  a  double  dash  are  passed  to  <b>mmdebstrap</b>  after  the  suite  and target
               specification.  This can be used to provide additional hooks for image  customization.   You  can
               also  request  additional  packages  to  be installed into the image using <b>mmdebstrap</b>'s <b>--include</b>
               option.  Any positional arguments passed  here  will  be  treated  as  mirror  specifications  by
               <b>mmdebstrap</b>.  In particular, you can also change the architecture of the resulting image using the
               <b>--architecture</b> option.

</pre><h4><b>EXAMPLES</b></h4><pre>
       When  creating  an  image with multiple architectures, the kernel selection will prefer the sibling 64bit
       architecture.

           debvm-create ... -- --architecture=armhf,arm64

       In order to create images for Debian ports architectures, you can pass two options to mmdebstrap.

           debvm-create ... -- <a href="http://deb.debian.org/debian-ports">http://deb.debian.org/debian-ports</a> --keyring=/usr/share/keyrings/debian-ports-archive-keyring.gpg

       You can also install a graphical desktop environment.

           debvm-create ... -- --hook-dir=/usr/share/mmdebstrap/hooks/useradd --aptopt='Apt::Install-Recommends "true"' --include=linux-image-generic,task-gnome-desktop

       Here the hook creates a password-less user "user".  In order for "task-gnome-desktop" to work  reasonably
       well,  "Recommends"  should  be  enabled.   By  default  a "-cloud" kernel that lacks graphics drivers is
       installed.

       Installing Ubuntu is also supported somewhat.

           debvm-create --release kinetic -- --keyring=<a href="file:/usr/share/keyrings/ubuntu-archive-keyring.gpg">/usr/share/keyrings/ubuntu-archive-keyring.gpg</a> --components=main,universe --include=e2fsprogs

       Note that "universe" must be enabled as the "merged-usr" and "systemdnetwork" hooks  rely  packages  from
       that component.  "e2fsprogs" should be pulled by "initramfs-tools".

       There also is an aid for sharing a directory with the VM.

           debvm-create ... -- --include=linux-image-generic --hook-dir=/usr/share/mmdebstrap/hooks/9pmount
           debvm-run ... -- -virtfs local,security_model=none,path=/host_path,mount_tag=guest_tag

       This  will  mount  the  directory  "/host_path" from the host as "/media/guest_tag" in the VM during boot
       using 9P.  Note that the "-cloud" kernel lacks the 9P filesystem driver.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
           <a href="../man1/debvm-run.1.html">debvm-run</a>(1) <a href="../man1/mmdebstrap.1.html">mmdebstrap</a>(1)

perl v5.38.2                                       2024-06-23                                    <u><a href="../man1/DEBVM-CREATE.1.html">DEBVM-CREATE</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>