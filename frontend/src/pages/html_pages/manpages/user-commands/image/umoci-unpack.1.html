<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>umoci unpack - Unpacks an OCI image tag into an runtime bundle</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/umoci">umoci_0.4.7+ds-4_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       umoci unpack - Unpacks an OCI image tag into an runtime bundle

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>umoci</b>  <b>unpack</b>  <b>--image</b>=<u>image</u>[:<u>tag</u>]  [<b>--rootless</b>]  [<b>--uid-map</b>=<u>value</u>]  [<b>--uid-map</b>=<u>value</u>]  [<b>--keep-dirlinks</b>]
       <u>bundle</u>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       Extracts all of the layers (deterministically) to an OCI runtime bundle at the path <u>bundle</u>,  as  well  as
       generating  an  OCI  runtime configuration that corresponds to the image's configuration. In addition, an
       <b><a href="../man8/mtree.8.html">mtree</a></b>(8) specification is generated at the time of unpacking to allow filesystem deltas to  be  generated
       by <b><a href="../man1/umoci-repack.1.html">umoci-repack</a></b>(1) and thus allowing for the creation of layered OCI images.

</pre><h4><b>OPTIONS</b></h4><pre>
       The global options are defined in <b><a href="../man1/umoci.1.html">umoci</a></b>(1).

       <b>--image</b>=<u>image</u>[:<u>tag</u>]
         The OCI image tag which will be extracted to the <u>bundle</u>. <u>image</u> must be a
         path to a valid OCI image and <u>tag</u> must be a valid tag in the image. If
         <u>tag</u> is not provided it defaults to "latest".

       <b>--rootless</b>
         Enable rootless unpacking support. This allows for <b><a href="../man1/umoci-unpack.1.html">umoci-unpack</a></b>(1) and
         <b><a href="../man1/umoci-repack.1.html">umoci-repack</a></b>(1) to be used as an unprivileged user. Use of this flag
         implies <b>--uid-map=0:$(id</b> <b>-u):1</b> and <b>--gid-map=0:$(id</b> <b>-g):1</b>, as well as
         enabling several features to fake parts of the unpacking in an attempt to
         generate an as-close-as-possible extraction of the filesystem. Note that it
         is almost always not possible to perfectly extract an OCI image with
         <b>--rootless</b>, but it will be as close as possible.

       <b>--uid-map</b>=<u>value</u>
         Specifies a UID mapping to use while unpacking (and repacking) layers. This
         is used in a similar fashion to <b><a href="../man7/user_namespaces.7.html">user_namespaces</a></b>(7), and is of the form
         <b>container:host[:size]</b>.

       <b>--gid-map</b>=<u>value</u>
         Specifies a GID mapping to use while unpacking (and repacking) layers. This
         is used in a similar fashion to <b><a href="../man7/user_namespaces.7.html">user_namespaces</a></b>(7), and is of the form
         <b>container:host[:size]</b>.

       <b>--keep-dirlinks</b>
         Instead of overwriting directories which are links to other directories when
         higher layers have an explicit directory, just write through the symlink.
         This option is inspired by rsync's option of the same name.

</pre><h4><b>EXAMPLE</b></h4><pre>
       The  following  downloads an image from a <b><a href="../man1/docker.1.html">docker</a></b>(1) registry using <b><a href="../man1/skopeo.1.html">skopeo</a></b>(1), unpacks said image and then
       creates a new container using the extracted OCI runtime bundle with <b><a href="../man8/runc.8.html">runc</a></b>(8). Then, the image is  repacked
       with <b><a href="../man1/umoci-repack.1.html">umoci-repack</a></b>(1).

       % skopeo copy docker://opensuse/amd64:42.2 oci:image:latest
       # umoci unpack --image image bundle
       # runc run -b bundle ctr
       [ container session ]
       # umoci repack --image image bundle

       With  <b>--rootless</b> it is also possible to do the above example without root privileges. <b>umoci</b> will generate
       a configuration that works with rootless containers in <b><a href="../man8/runc.8.html">runc</a></b>(8).

       % skopeo copy docker://opensuse/amd64:42.2 oci:image:latest
       % umoci unpack --image image --rootless bundle
       % runc --root $HOME/runc run -b bundle ctr
       [ rootless container session ]
       % umoci repack --image image --rootless bundle

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man1/umoci.1.html">umoci</a></b>(1), <b><a href="../man1/umoci-repack.1.html">umoci-repack</a></b>(1), <b><a href="../man8/runc.8.html">runc</a></b>(8)

unpack                                                umoci                                   <u><a href="../man1/umoci-unpack.1.html">umoci-unpack</a>(1)</u>(#)
</pre>
 </div>
</div></section>
</div>
</body>
</html>