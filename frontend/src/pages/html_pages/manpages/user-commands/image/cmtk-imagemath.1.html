<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>imagemath - Image operations</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/cmtk">cmtk_3.3.1p2+dfsg-2ubuntu1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       imagemath - Image operations

</pre><h4><b>DESCRIPTION</b></h4><pre>
       Perform operations on images using stack-based postfix notation.

       Images  can  be  read  from  files  and  pushed  onto the stack. Images on the stack can be processed and
       combined via different operators. Results of all operations are put back onto the stack, where  they  can
       be further processed or written back to image files.

</pre><h4><b>OPTIONS</b></h4><pre>
   <b>Global</b> <b>Toolkit</b> <b>Options</b> <b>(these</b> <b>are</b> <b>shared</b> <b>by</b> <b>all</b> <b>CMTK</b> <b>tools)</b>
       <b>--help</b>
            Write list of basic command line options to standard output.

       <b>--help-all</b>
            Write complete list of basic and advanced command line options to standard output.

       <b>--wiki</b>
            Write list of command line options to standard output in MediaWiki markup.

       <b>--man</b>
            Write man page source in 'nroff' markup to standard output.

       <b>--version</b>
            Write toolkit version to standard output.

       <b>--echo</b>
            Write the current command line to standard output.

       <b>--verbose-level</b> <u>&lt;integer&gt;</u>
            Set verbosity level.

       <b>--verbose</b>, <b>-v</b>
            Increment verbosity level by 1 (deprecated; supported for backward compatibility).

       <b>--threads</b> <u>&lt;integer&gt;</u>
            Set maximum number of parallel threads (for POSIX threads and OpenMP).

   <b>Input/output</b> <b>operations</b>
       <b>--in</b> <u>&lt;string-vector&gt;</u>
            Read input image(s) to top of stack

       <b>--out</b> <u>&lt;string&gt;</u>
            Write output image from top of stack (but leave it on the stack)

       <b>--set-padding-value</b> <u>&lt;double&gt;</u>
            Set the value that is interpreted as padding value in subsequently read images.

       <b>--unset-padding</b>
            Disable padding. All values in subsequently read images will be interpreted as actual data.

   <b>Internal</b> <b>settings</b>
       <b>--float</b>
            Use single precision for computations and results <b>[This</b> <b>is</b> <b>the</b> <b>default]</b>

       <b>--double</b>
            Use double precision for computations and results

   <b>Stack</b> <b>operations</b>
       <b>--pop</b>
            Pop (discard) top image from stack.

       <b>--dup</b>
            Duplicate image on top of the stack.

       <b>--all</b>
            Apply next single-image operation to all images on the stack.

   <b>Single-image</b> <b>operators</b>
       <b>--fill</b> <u>&lt;double&gt;</u>
            Fill top image with constant value (i.e., assign value to all pixels)

       <b>--abs</b>
            Apply abs() function to top image

       <b>--log</b>
            Apply log() function to top image

       <b>--logit</b>
            Apply log(x/(1-x)) function to top image

       <b>--logistic</b>
            Apply 1/(1+exp(-x)) function to top image

       <b>--exp</b>
            Apply exp() function to top image

       <b>--sqr</b>
            Apply square operator to top image

       <b>--sqrt</b>
            Apply square root operator to top image

       <b>--trunc</b>
            Truncate all values in top image to integer

       <b>--one-over</b>
            For each pixel, replace its value x with 1.0/x

       <b>--scalar-mul</b> <u>&lt;double&gt;</u>
            Multiply top image with a scalar value

       <b>--scalar-add</b> <u>&lt;double&gt;</u>
            Add a scalar to each pixel of the top image

       <b>--scalar-xor</b> <u>&lt;integer&gt;</u>
            Bitwise exclusive-or between top level and given scalar value

       <b>--scalar-and</b> <u>&lt;integer&gt;</u>
            Bitwise and operation between top level and given scalar value

       <b>--thresh-below</b> <u>&lt;double&gt;</u>
            Set values below given threshold to threshold.

       <b>--thresh-above</b> <u>&lt;double&gt;</u>
            Set values above given threshold to threshold.

   <b>Image</b> <b>pair</b> <b>operators</b>
       <b>--add</b>
            Add top and second image, place result on stack

       <b>--mul</b>
            Multiply top and second image, place result on stack

       <b>--div</b>
            Divide top image by second image, place result on stack

       <b>--atan2</b>
            Compute atan2() function from tup two image pixel pairs, place result on stack

       <b>--match-histograms</b>
            Scale intensities in one image to match intensities of another. The last image pushed onto the stack
            provides  the  reference  intensity  distribution,  the preceding image will be modified. Both input
            images are removed from the stack and the modified image is pushed onto the stack.

       <b>--match-mean-sdev</b>
            Scale intensities of one image to match mean and standard  deviation  of  another.  The  last  image
            pushed  onto  the  stack  provides the reference intensity distribution, the preceding image will be
            modified. Both input images are removed from the stack and the modified image  is  pushed  onto  the
            stack.

       <b>--match-mean-sdev3</b>
            Scale  intensities  of an image by a factor and offset computed from two other images to match their
            mean and standard deviations. The last image pushed onto the stack provides the reference  intensity
            distribution,  the  preceding  image  provides  the intensity distribution to match to the reference
            image's, and the third image on the stack will be modified. All three input images are removed  from
            the stack and the modified image is pushed onto the stack.

       <b>--mask-average</b>
            Mask  averaging:  the  top  image is taken as a multi-label mask. The pixels in the second image are
            averaged by mask labels, and then replaced with the average value for each mask label.

   <b>Complex</b> <b>Arithmetic</b>
       <b>--complex-div</b>
            Complex division, (a+ib)/(c+id), assuming four values were put on the stack in order  a,  b,  c,  d.
            Place result on stack, real first, imaginary second (i.e., imaginary is top).

   <b>Operators</b> <b>that</b> <b>contract</b> <b>the</b> <b>entire</b> <b>stack</b> <b>into</b> <b>a</b> <b>single</b> <b>image</b>
       <b>--sum</b>
            Sum all images on stack, place result on stack

       <b>--product</b>
            Compute product of all images on stack, place result on stack

       <b>--average</b>
            Average all images on stack, place result on stack

       <b>--variance</b>
            For each pixel, compute variance over all images on stack, place result on stack

       <b>--combine-pca</b>
            Combine images using PCA by projecting onto direction of largest correlation

       <b>--max-value</b>
            For each pixel, compute maximum VALUE over all images, place result on stack

       <b>--min-value</b>
            For each pixel, compute minimum VALUE over all images, place result on stack

       <b>--max-index</b>
            For each pixel, compute INDEX of image with maximum value, place result on stack

   <b>Operators</b> <b>that</b> <b>contract</b> <b>a</b> <b>stack</b> <b>of</b> <b>label</b> <b>images</b> <b>into</b> <b>a</b> <b>single</b> <b>label</b> <b>image</b>
       <b>--vote</b>
            Merge all images on stack with voting, place result on stack

       <b>--staple</b> <u>&lt;integer&gt;</u>
            Combine  binary maps on the stack using [arg] iterations of the STAPLE algorithm. The result of this
            operation is the spatial map of 'weights' W, which are the probabilities of image foreground at each
            pixel. In 'verbose' mode, estimated expert parameters p (sensitivity) and q (specificity)  are  also
            written to standard output.

       <b>--contract-labels</b>
            Contract multiple label maps into one by selecting the first (over all images on the stack) non-zero
            label at each pixel

       <b>--mstaple</b> <u>&lt;integer&gt;</u>
            Combine multi-label maps on the stack using [arg] iterations of the multi-class STAPLE algorithm.The
            result of this operation is the combined maximum-likeliood multi-label map.

       <b>--mstaple-disputed</b> <u>&lt;integer&gt;</u>
            Like   previous   operation,  apply  multi-class  STAPLE  algorithm,  but  restrict  computation  to
            'disputed'voxels, i.e., those where the input label maps disagree. This often  improves  results  by
            reducing, e.g., background effects.

       <b>--stack-entropy-labels</b>
            Compute stack entropy at each pixel from integer (label) input images

</pre><h4><b>AUTHORS</b></h4><pre>
       Torsten  Rohlfing,  with  contributions from Michael P. Hasak, Greg Jefferis, Calvin R. Maurer, Daniel B.
       Russakoff, and Yaroslav Halchenko

</pre><h4><b>LICENSE</b></h4><pre>
       <a href="http://www.fsf.org/licensing/licenses/gpl.html">http://www.fsf.org/licensing/licenses/gpl.html</a>

</pre><h4><b>BUGS</b></h4><pre>
       Report bugs at <a href="http://nitrc.org/projects/cmtk/">http://nitrc.org/projects/cmtk/</a>

</pre><h4><b>ACKNOWLEDGMENTS</b></h4><pre>
       CMTK is developed with support from the NIAAA under Grant AA021697, National Consortium  on  Alcohol  and
       Neurodevelopment  in Adolescence (N-CANDA): Data Integration Component. From April 2009 through September
       2011, CMTK development and maintenance was supported by the NIBIB under Grant EB008381.

CMTK 3.3.1p2                                       Feb 26 2025                                      <u><a href="../man1/imagemath.1.html">imagemath</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>