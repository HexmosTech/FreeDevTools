<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>skopeo-copy - Copy an image (manifest, filesystem layers, signatures) from one location to another.</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/skopeo">skopeo_1.13.3+ds1-2build2_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       skopeo-copy - Copy an image (manifest, filesystem layers, signatures) from one location to another.

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>skopeo</b> <b>copy</b> [<u>options</u>] <u>source-image</u> <u>destination-image</u>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       Copy an image (manifest, filesystem layers, signatures) from one location to another.

       Uses the system's trust policy to validate images, rejects images not trusted by the policy.

       <u>source-image</u> use the "image name" format described above

       <u>destination-image</u> use the "image name" format described above

       <u>source-image</u>  and  <u>destination-image</u>  are interpreted completely independently; e.g. the destination name
       does not automatically inherit any parts of the source name.

</pre><h4><b>OPTIONS</b></h4><pre>
       See also <a href="../man1/skopeo.1.html">skopeo</a>(1) for options placed before the subcommand name.

       <b>--additional-tag</b>=<u>strings</u>

       Additional tags (supports docker-archive).

       <b>--all</b>, <b>-a</b>

       If <u>source-image</u> refers to a list of images, instead of copying just the image which matches  the  current
       OS  and  architecture  (subject  to  the use of the global --override-os, --override-arch and --override-
       variant options), attempt to copy all of the images in the list, and the list itself.

       <b>--authfile</b> <u>path</u>

       Path of the authentication file. Default is ${XDG_RUNTIME_DIR}/containers/auth.json, which is  set  using
       <b>skopeo</b> <b>login</b>.  If the authorization state is not found there, $HOME/.docker/config.json is checked, which
       is set using <b>docker</b> <b>login</b>.

       Note: You can also override the default path of the authentication file by setting the REGISTRY_AUTH_FILE
       environment variable. <b>export</b> <b>REGISTRY_AUTH_FILE=path</b>

       <b>--src-authfile</b> <u>path</u>

       Path of the authentication file for the source registry. Uses path given by <b>--authfile</b>, if not provided.

       <b>--dest-authfile</b> <u>path</u>

       Path  of  the  authentication  file  for  the destination registry. Uses path given by <b>--authfile</b>, if not
       provided.

       <b>--dest-shared-blob-dir</b> <u>directory</u>

       Directory to use to share blobs across OCI repositories.

       <b>--digestfile</b> <u>path</u>

       After copying the image, write the digest of the resulting image to the file.

       <b>--preserve-digests</b>

       Preserve the digests during copying. Fail if the digest cannot be preserved.

       This option does not change what will be copied; consider using <b>--all</b> at the same time.

       <b>--encrypt-layer</b> <u>ints</u>

       <u>Experimental</u> the 0-indexed layer indices, with support for negative indexing (e.g. 0 is the first  layer,
       -1 is the last layer)

       <b>--format</b>, <b>-f</b> <u>manifest-type</u>

       MANIFEST  TYPE  (oci,  v2s1, or v2s2) to use in the destination (default is manifest type of source, with
       fallbacks)

       <b>--help</b>, <b>-h</b>

       Print usage statement

       <b>--multi-arch</b> <u>option</u>

       Control what is copied if <u>source-image</u> refers to a multi-architecture image. Default is system.

       Options: - system: Copy only the image that matches the system architecture - all: Copy the  full  multi-
       architecture image - index-only: Copy only the index

       The  index-only option usually fails unless the referenced per-architecture images are already present in
       the destination, or the target registry supports sparse indexes.

       <b>--quiet</b>, <b>-q</b>

       Suppress output information when copying images.

       <b>--remove-signatures</b>

       Do not copy signatures, if any, from <u>source-image</u>. Necessary when copying a signed image to a destination
       which does not support signatures.

       <b>--sign-by</b> <u>key-id</u>

       Add a “simple signing” signature using that key ID for an image name corresponding to <u>destination-image</u>

       <b>--sign-by-sigstore</b> <u>param-file</u>

       Add a sigstore signature based on the options in the  specified  containers  sigstore  signing  parameter
       file, <u>param-file</u>.  See <a href="../man5/containers-sigstore-signing-params.yaml.5.html">containers-sigstore-signing-params.yaml</a>(5) for details about the file format.

       <b>--sign-by-sigstore-private-key</b> <u>path</u>

       Add a sigstore signature using a private key at <u>path</u> for an image name corresponding to <u>destination-image</u>

       <b>--sign-passphrase-file</b> <u>path</u>

       The  passphare  to use when signing with <b>--sign-by</b> or <b>--sign-by-sigstore-private-key</b>. Only the first line
       will be read. A passphrase stored in a file is of questionable security if  other  users  can  read  this
       file. Do not use this option if at all avoidable.

       <b>--sign-identity</b> <u>reference</u>

       The  identity  to use when signing the image. The identity must be a fully specified docker reference. If
       the identity is not specified, the target docker reference will be used.

       <b>--src-shared-blob-dir</b> <u>directory</u>

       Directory to use to share blobs across OCI repositories.

       <b>--encryption-key</b> <u>protocol:keyfile</u>

       Specifies the encryption protocol, which can be JWE (RFC7516), PGP (RFC4880), and PKCS7 (RFC2315) and the
       key material required for image encryption. For instance, jwe:/path/to/key.pem  or  pgp:<a href="mailto:admin@example.com">admin@example.com</a>
       or pkcs7:/path/to/x509-file.

       <b>--decryption-key</b> <u>key[:passphrase]</u>

       Key  to  be  used for decryption of images. Key can point to keys and/or certificates. Decryption will be
       tried with all keys. If the key is protected by a passphrase, it is required to be passed in the argument
       and omitted otherwise.

       <b>--src-creds</b> <u>username[:password]</u>

       Credentials for accessing the source registry.

       <b>--dest-compress</b>

       Compress tarball image layers when saving to directory  using  the  'dir'  transport.  (default  is  same
       compression type as source).

       <b>--dest-decompress</b>

       Decompress  tarball  image  layers  when  saving to directory using the 'dir' transport. (default is same
       compression type as source).

       <b>--dest-oci-accept-uncompressed-layers</b>

       Allow uncompressed image layers when saving to an OCI image using the 'oci'  transport.  (default  is  to
       compress things that aren't compressed).

       <b>--dest-creds</b> <u>username[:password]</u>

       Credentials for accessing the destination registry.

       <b>--src-cert-dir</b> <u>path</u>

       Use certificates at <u>path</u> (*.crt, *.cert, *.key) to connect to the source registry or daemon.

       <b>--src-no-creds</b>

       Access the registry anonymously.

       <b>--src-tls-verify</b>=<u>bool</u>

       Require  HTTPS  and  verify  certificates when talking to container source registry or daemon. Default to
       source registry setting.

       <b>--dest-cert-dir</b> <u>path</u>

       Use certificates at <u>path</u> (*.crt, *.cert, *.key) to connect to the destination registry or daemon.

       <b>--dest-no-creds</b>

       Access the registry anonymously.

       <b>--dest-tls-verify</b>=<u>bool</u>

       Require HTTPS and verify certificates when talking to container destination registry or  daemon.  Default
       to destination registry setting.

       <b>--src-daemon-host</b> <u>host</u>

       Copy  from  docker  daemon at <u>host</u>. If <u>host</u> starts with <b>tcp://</b>, HTTPS is enabled by default. To use plain
       HTTP, use the form <b>http://</b> (default is <b>unix:///var/run/docker.sock</b>).

       <b>--dest-daemon-host</b> <u>host</u>

       Copy to docker daemon at <u>host</u>. If <u>host</u> starts with <b>tcp://</b>, HTTPS is enabled  by  default.  To  use  plain
       HTTP, use the form <b>http://</b> (default is <b>unix:///var/run/docker.sock</b>).

       Existing signatures, if any, are preserved as well.

       <b>--dest-compress-format</b> <u>format</u>

       Specifies the compression format to use.  Supported values are: <b>gzip</b> and <b>zstd</b>.

       <b>--dest-compress-level</b> <u>format</u>

       Specifies  the  compression  level to use.  The value is specific to the compression algorithm used, e.g.
       for zstd the accepted values are in the range 1-20 (inclusive), while for gzip it is 1-9 (inclusive).

       <b>--src-registry-token</b> <u>token</u>

       Bearer token for accessing the source registry.

       <b>--dest-registry-token</b> <u>token</u>

       Bearer token for accessing the destination registry.

       <b>--dest-precompute-digests</b>

       Precompute digests to ensure layers are not uploaded that already  exist  on  the  destination  registry.
       Layers  with  initially  unknown  digests  (ex. compressing "on the fly") will be temporarily streamed to
       disk.

       <b>--retry-times</b>

       The number of times to retry. Retry wait time will be exponentially increased  based  on  the  number  of
       failed attempts.

       <b>--src-username</b>

       The username to access the source registry.

       <b>--src-password</b>

       The password to access the source registry.

       <b>--dest-username</b>

       The username to access the destination registry.

       <b>--dest-password</b>

       The password to access the destination registry.

</pre><h4><b>EXAMPLES</b></h4><pre>
       To just copy an image from one registry to another:

       $ skopeo copy docker://quay.io/skopeo/stable:latest docker://registry.example.com/skopeo:latest

       To copy the layers of the docker.io busybox image to a local directory:

       $ mkdir -p /var/lib/images/busybox
       $ skopeo copy docker://busybox:latest dir:/var/lib/images/busybox
       $ ls /var/lib/images/busybox/*
         /tmp/busybox/2b8fd9751c4c0f5dd266fcae00707e67a2545ef34f9a29354585f93dac906749.tar
         /tmp/busybox/manifest.json
         /tmp/busybox/8ddc19f16526912237dd8af81971d5e4dd0587907234be2b83e249518d5b673f.tar

       To  create  an  archive  consumable  by <b>docker</b> <b>load</b> (but note that using a registry is almost always more
       efficient):

       $ skopeo copy docker://busybox:latest docker-archive:archive-file.tar:busybox:latest

       To copy and sign an image:

       $ skopeo copy --sign-by <a href="mailto:dev@example.com">dev@example.com</a> containers-storage:example/busybox:streaming docker://example/busybox:gold

       To encrypt an image:

       $ skopeo copy docker://docker.io/library/nginx:1.17.8 oci:local_nginx:1.17.8

       $ openssl genrsa -out private.key 1024
       $ openssl rsa -in private.key -pubout &gt; public.key

       $ skopeo copy --encryption-key jwe:./public.key oci:local_nginx:1.17.8 oci:try-encrypt:encrypted

       To decrypt an image:

       $ skopeo copy --decryption-key ./private.key oci:try-encrypt:encrypted oci:try-decrypt:decrypted

       To copy encrypted image without decryption:

       $ skopeo copy oci:try-encrypt:encrypted oci:try-encrypt-copy:encrypted

       To decrypt an image that requires more than one key:

       $ skopeo copy --decryption-key ./private1.key --decryption-key ./private2.key --decryption-key ./private3.key oci:try-encrypt:encrypted oci:try-decrypt:decrypted

       Container images can also be partially encrypted by  specifying  the  index  of  the  layer.  Layers  are
       0-indexed indices, with support for negative indexing. i.e. 0 is the first layer, -1 is the last layer.

       Let's  say  out  of 3 layers that the image <b>docker.io/library/nginx:1.17.8</b> is made up of, we only want to
       encrypt the 2nd layer,

       $ skopeo copy --encryption-key jwe:./public.key --encrypt-layer 1 oci:local_nginx:1.17.8 oci:try-encrypt:encrypted

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <a href="../man1/skopeo.1.html">skopeo</a>(1),   <a href="../man1/skopeo-login.1.html">skopeo-login</a>(1),   <a href="../man1/docker-login.1.html">docker-login</a>(1),   <a href="../man5/containers-auth.json.5.html">containers-auth.json</a>(5),    <a href="../man5/containers-policy.json.5.html">containers-policy.json</a>(5),
       <a href="../man5/containers-transports.5.html">containers-transports</a>(5), <a href="../man5/containers-signature.5.html">containers-signature</a>(5)

</pre><h4><b>AUTHORS</b></h4><pre>
       Antonio    Murdaca   <a href="mailto:runcom@redhat.com">runcom@redhat.com</a>   ⟨<a href="mailto:runcom@redhat.com">mailto:runcom@redhat.com</a>⟩,   Miloslav   Trmac   <a href="mailto:mitr@redhat.com">mitr@redhat.com</a>
       ⟨<a href="mailto:mitr@redhat.com">mailto:mitr@redhat.com</a>⟩, Jhon Honce <a href="mailto:jhonce@redhat.com">jhonce@redhat.com</a> ⟨<a href="mailto:jhonce@redhat.com">mailto:jhonce@redhat.com</a>⟩

                                                                                                <u><a href="../man1/skopeo-copy.1.html">skopeo-copy</a>(1)</u>()
</pre>
 </div>
</div></section>
</div>
</body>
</html>