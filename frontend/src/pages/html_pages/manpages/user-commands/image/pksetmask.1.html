<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>pksetmask - program to apply mask image (set invalid values) to raster image</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/pktools">pktools_2.6.7.6+ds-6build4_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       pksetmask - program to apply mask image (set invalid values) to raster image

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>pksetmask</b> <b>-i</b> <u>input</u> <b>-m</b> <u>mask</u> [<b>-msknodata</b> <u>value</u>] <b>-o</b> <u>output</u> [<u>options</u>] [<u>advanced</u> <u>options</u>]

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>pksetmask</b>  sets  a mask provided with option <b>-m</b> to an input raster dataset.  The default operator is '='.
       Values in the input raster data where the mask has a nodata value (set with the option  <b>-msknodata</b>)  will
       then be set to nodata (set with <b>-nodata</b>).  Other operators are less than (<b>--operator</b> '&lt;') and larger than
       (<b>--operator</b> '&lt;').

</pre><h4><b>OPTIONS</b></h4><pre>
       <b>-i</b> <u>filename</u>, <b>--input</b> <u>filename</u>
              Input image

       <b>-m</b> <u>mask</u>, <b>--mask</b> <u>mask</u>
              Mask image(s)

       <b>-msknodata</b> <u>value</u>, <b>--msknodata</b> <u>value</u>
              Mask  value(s) where image has nodata.  Use one value for each mask, or multiple values for a sin‐
              gle mask.

       <b>-o</b> <u>filename</u>, <b>--output</b> <u>filename</u>
              Output mask file

       <b>-nodata</b> <u>value</u>, <b>--nodata</b> <u>value</u>
              nodata value to put in image if not valid

       <b>-v</b> <u>level</u>, <b>--verbose</b> <u>level</u>
              verbose

       Advanced options

       <b>-p</b> <u>'&lt;'|'='|'&gt;'</u>, <b>--operator</b> <u>'&lt;'|'='|'&gt;'</u>
              Operator: &lt; = &gt; !.  Use operator for each <b>-msknodata</b> option

       <b>-ot</b> <u>type</u>, <b>--otype</b> <u>type</u>
              Data type for output image ({Byte / Int16 / UInt16 / UInt32 / Int32 / Float32 / Float64 / CInt16 /
              CInt32 / CFloat32 / CFloat64}).  Empty string: inherit type from input image

       <b>-of</b> <u>GDALformat</u>, <b>--oformat</b> <u>GDALformat</u>
              Output image format (see also <b><a href="../man1/gdal_translate.1.html">gdal_translate</a></b>(1)).

       <b>-co</b> <u>option</u>, <b>--co</b> <u>option</u>
              Creation option for output file.  Multiple options can be specified.

       <b>-ct</b> <u>filename</u>, <b>--ct</b> <u>filename</u>
              colour table in ASCII format having 5 columns: id R G B ALFA (0: transparent, 255: solid)

</pre><h4><b>EXAMPLE</b></h4><pre>
       <b>Using</b> <b>a</b> <b>single</b> <b>mask</b>

       With a single mask you can provide as many triples (<b>--operator</b>, <b>--msknodata</b>, <b>--nodata</b>) as you wish.   All
       operators  work simultaneously on that mask.  Caution: the first operator that tests true will be select‐
       ed.  This is explained in the next example:

       <b>pksetmask</b> <b>-i</b> <u>input.tif</u> <b>-m</b> <u>mask.tif</u> <b>--operator</b>='&gt;' <b>--msknodata</b> <u>0</u> <b>--nodata</b> <u>0</u> <b>--operator</b>='&gt;' <b>--msknodata</b> <u>10</u> <b>--nodata</b> <u>10</u> <b>-o</b> <u>output.tif</u>

       Warning: second operator will never test true as first will supersede!

       <b>pksetmask</b> <b>-i</b> <u>input.tif</u> <b>-m</b> <u>mask.tif</u> <b>--operator</b>='&gt;' <b>--msknodata</b> <u>10</u> <b>--nodata</b> <u>10</u> <b>--operator</b>='&gt;' <b>--msknodata</b> <u>0</u> <b>--nodata</b> <u>1</u> <b>-o</b> <u>output.tif</u>

       OK: values above 10 will be 10, values between 0 and 10 will be 1

       <b>Using</b> <b>multiple</b> <b>masks</b>

       With multiple masks, you can use one triple (<b>--operator</b>, <b>--msknodata</b>, <b>--nodata</b>)  for  each  corresponding
       mask  (following the same order of input).  If the number of triples is not equal to the number of masks,
       then only the first triple is used for all masks simultaneously

       <b>pksetmask</b> <b>-i</b> <u>input.tif</u> <b>-m</b> <u>mask1.tif</u> <b>--operator</b> '&gt;' <b>--msknodata</b> <u>250</u> <b>--nodata</b> <u>1</u> <b>-m</b> <u>mask2.tif</u> <b>--operator</b> '&gt;' <b>--msknodata</b> <u>100</u> <b>--nodata</b> <u>2</u> <b>-o</b> <u>output.tif</u>

       If mask1.tif is above 250, the output will be 1.  If mask2 is above 100, the output will be 2.   If  both
       operators test true, the first will supersede (output will be 1)

       <b>pksetmask</b> <b>-i</b> <u>input.tif</u> <b>-m</b> <u>mask1.tif</u> <b>-m</b> <u>mask2.tif</u> <b>--operator</b> '&gt;' <b>--msknodata</b> <u>250</u> <b>--nodata</b> <u>1</u> <b>-o</b> <u>output.tif</u>

       If either mask1.tif or mask2.tif is above 250, the output will be 1

       <b>More</b> <b>examples</b>

       <b>pksetmask</b> <b>-i</b> <u>input.tif</u> <b>-m</b> <u>mask.tif</u> <b>-o</b> <u>output.tif</u> <b>-ot</b> <u>Byte</u> <b>--msknodata</b> <u>0</u> <b>-nodata</b> <u>255</u>

       copy  pixel  values from input.tif to output.tif, applying mask.tif, setting all values to 255 where mask
       is 0.

       <b>pksetmask</b> <b>-i</b> <u>input.tif</u> <b>-m</b> <u>mask.tif</u> <b>-o</b> <u>output.tif</u> <b>-ot</b> <u>Byte</u> <b>--msknodata</b> <u>1</u> <b>-nodata</b> <u>255</u> <b>--operator</b> '!'

       copy values from input.tif to output.tif, but set all values to 255 if mask is not 1

       <b>pksetmask</b> <b>-i</b> <u>input.tif</u> <b>-m</b> <u>mask1.tif</u> <b>-m</b> <u>mask2.tif</u> <b>-o</b> <u>output.tif</u> <b>-ot</b> <u>Byte</u> <b>--msknodata</b> <u>0</u> <b>-nodata</b> <u>255</u>

       Application of two masks.  Copy pixel values from input.tif to output.tif,  setting  all  values  to  255
       where either mask is 0.

       <b>pksetmask</b> <b>-i</b> <u>input.tif</u> <b>-m</b> <u>mask.tif</u> <b>-o</b> <u>output.tif</u> <b>-ot</b> <u>Byte</u> <b>--msknodata</b> <u>0</u> <b>--msknodata</b> <u>1</u> <b>-nodata</b> <u>255</u> <b>-nodata</b> <u>255</u>

       copy  pixel  values  from input.tif to output.tif, applying single masks, setting all values to 255 where
       mask is either 0 or 1.

</pre><h4><b>FAQ</b></h4><pre>
       Q1. I want to mask my input image (a byte image with values between 0 and 254) with a mask that only cov‐
       ers a spatial subset of the input image.  Within the spatial subset of the primary mask, all pixels  must
       be  set  to 0 where the primary mask equals 1.  Outside the spatial subset I want to set all pixel values
       to 255.

       A1. This can be done using two masks, selecting the input image as the secondary mask.  Choose  the  sec‐
       ondary operator acting on the secondary mask such that the condition is always true (e.g, &lt; 255).

                                                 01 January 2025                                    <u><a href="../man1/pksetmask.1.html">pksetmask</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>