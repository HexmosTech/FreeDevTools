<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>mBackground - Remove a background plane from a FITS image</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/montage">montage_6.1+dfsg-1build1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       mBackground - Remove a background plane from a FITS image

</pre><h4><b>SYNOPSIS</b></h4><pre>
       mBackground [-d <u>level</u>] [-n(o-areas)] [-s <u>statusfile</u>] in.fits out.fits A B C

       mBackground [-t] [-d level] [-n(o-areas)] [-s <u>statusfile</u>] in.fits out.fits images.tbl corrfile.tbl

</pre><h4><b>DESCRIPTION</b></h4><pre>
       Remove a background plane from a FITS image.  The background correction applied to the image is specified
       as Ax+By+C, where (x,y) is the pixel coordinate using the image center as the origin, and (A,B,C) are the
       background plane parameters specified as linear coefficients.

</pre><h4><b>OPTIONS</b></h4><pre>
       -d <u>level</u>
              Turns on debugging to the specified level.

       -n     Indicates that no area images are present (assumes equal weighting for each data pixel)

       -s <u>statusfile</u>
              mBackground output and errors will be written to <u>statusfile</u> instead of stdout.

       -t     Run  in  table  mode. Starts a group of mBackground runs in parallel, reading off the same pair of
              tables to determine which files and background corrections to work with. Recommended  for  running
              only on grids or parallel processors.

</pre><h4><b>ARGUMENTS</b></h4><pre>
       in.fits
              Input FITS file

       out.fits
              Output FITS file

       A B C  Corrections (as given by mFitplane or mFitExec)

       images.tbl
              When  run  as  part  of  a  GRID  processing job, mBackground requires the image metadata table to
              retrieve the filenames of images.

       corrections.tbl
              When run as part of a GRID processing job, mBackground  requires  a  table  of  corrections  (from
              mFitplane and mFitExec) to apply to the corresponding image (from images.tbl).

</pre><h4><b>RESULT</b></h4><pre>
       Output FITS image with background subtraction applied.

</pre><h4><b>MESSAGES</b></h4><pre>
       OK     [struct stat = "OK"]

       ERROR  No status file name given

       ERROR  Cannot open status file: <u>statusfile</u>

       ERROR  No debug level given

       ERROR  Debug level string is invalid: <u>string</u>

       ERROR  Debug level value cannot be negative

       ERROR  Invalid input file <u>filename</u>

       ERROR  Invalid output file <u>filename</u>

       ERROR  A coefficient string is not a number

       ERROR  B coefficient string is not a number

       ERROR  C coefficient string is not a number

       ERROR  Invalid image metadata file: <u>images.tbl</u>

       ERROR  Image table needs columns cntr and fname

       ERROR  Hit end of image table without finding file name

       ERROR  Need columns: id,a,b,c in corrections file

       ERROR  Hit end of corrections table without finding data

       ERROR  <u>FITS</u> <u>library</u> <u>error</u> <u>message</u>

       ERROR  <u>general</u> <u>error</u> <u>message</u>

</pre><h4><b>EXAMPLES</b></h4><pre>
       The   following  is  sample  output  from  <b>mFitplane</b>  for  a  FITS  image,  <b>in.fits</b>:  [struct  stat="OK",
       a=-0.000144415,  b=-0.000133642,  c=-31.8984,  crpix1=758.5,  crpix2=-1032,   xmin=-758.5,   xmax=-349.5,
       ymin=1032, ymax=1498, xcenter=-555.007, ycenter=1265.26, rms=0.576727]

       We use the plane coefficients calculated by <b>mFitplane</b> to subtract the background from the image:

       $ mBackground projdir/in.fits bg_removed/in.fits -0.000144415 -0.000133642 -31.8984
              [struct stat="OK"]

</pre><h4><b>BUGS</b></h4><pre>
       The drizzle algorithm has been implemented but has not been tested in this release.

       If a header template contains carriage returns (i.e., created/modified on a Windows machine), the cfitsio
       library  will  be  unable  to read it properly, resulting in the error: [struct stat="ERROR", status=207,
       msg="illegal character in keyword"]

       It is best for the background correction  algorithms  if  the  area  described  in  the  header  template
       completely encloses all of the input images in their entirety. If parts of input images are "chopped off"
       by  the  header  template,  the  background correction will be affected. We recommend you use an expanded
       header for the reprojection and background modeling steps, returning to  the  originally  desired  header
       size  for  the  final  coaddition.  The  default background matching assumes that there are no non-linear
       background variations in the individual images (and therefore in the overlap differences).  If  there  is
       any  uncertainty  in  this  regard, it is safer to turn on the "level only" background matching (the "-l"
       flag in mBgModel.

</pre><h4><b>COPYRIGHT</b></h4><pre>
       2001-2015 California Institute of Technology, Pasadena, California

       If your research uses Montage, please include the following acknowledgement: "This research made  use  of
       Montage.  It  is  funded  by  the  National  Science  Foundation  under Grant Number ACI-1440620, and was
       previously funded by the National Aeronautics and Space Administration's Earth Science Technology Office,
       Computation Technologies Project, under Cooperative  Agreement  Number  NCC5-626  between  NASA  and  the
       California Institute of Technology."

       The  Montage  distribution includes an adaptation of the MOPEX algorithm developed at the Spitzer Science
       Center.

Montage 5                                           Dec 2016                                      <u><a href="../man1/MBACKGROUND.1.html">MBACKGROUND</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>