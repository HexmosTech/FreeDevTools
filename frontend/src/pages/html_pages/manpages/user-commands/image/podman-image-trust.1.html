<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>podman-image-trust - Manage container registry image trust policy</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/podman">podman_5.4.1+ds1-1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       podman-image-trust - Manage container registry image trust policy

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>podman</b> <b>image</b> <b>trust</b> set|show [<u>options</u>] <u>registry[/repository]</u>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       Manages which registries to trust as a source of container images  based on its location. (This option is
       not available with the remote Podman client, including Mac and Windows (excluding WSL2) machines)

       The  location  is  determined  by the transport and the registry host of the image.  Using this container
       image <b>docker://docker.io/library/busybox</b> as an example, <b>docker</b> is the  transport  and  <b>docker.io</b>  is  the
       registry host.

       Trust  is  defined  in  <b>/etc/containers/policy.json</b> and is enforced when a user attempts to pull a remote
       image from a registry.  The trust policy in policy.json  describes  a  registry  scope  (registry  and/or
       repository) for the trust.  This trust can use public keys for signed images.

       The  scope  of  the trust is evaluated from most specific to the least specific. In other words, a policy
       may be:

              • Defined to an entire registry.

              • Defined to a particular repository in that registry.

              • Defined to a specific signed image inside of the registry.

       The following list are examples of valid scope values used in policy.json from most specific to the least
       specific:

       docker.io/library/busybox:notlatest

       docker.io/library/busybox

       docker.io/library

       docker.io

       If no configuration is found for any of these scopes, the default value  (specified  by  using  "default"
       instead of REGISTRY[/REPOSITORY]) is used.

       Trust <b>type</b> provides a way to:

       Allowlist   ("accept")   or  Denylist  ("reject")  registries  or  Require  a  simple  signing  signature
       (“signedBy”), Require a sigstore signature ("sigstoreSigned").

       Trust may be updated using the command <b>podman</b> <b>image</b> <b>trust</b> <b>set</b> for an existing trust scope.

</pre><h4><b>OPTIONS</b></h4><pre>
   <b>--help,</b> <b>-h</b>
       Print usage statement.

   <b>set</b> <b>OPTIONS</b>
   <b>--pubkeysfile,</b> <b>-f=</b><u><b>KEY1</b></u>
       A path to an exported public key on the local system. Key paths
         are  referenced  in  policy.json.  Any  path  to  a  file  may  be  used  but  locating  the  file   in
       <b>/etc/pki/containers</b> is recommended. Options may be used multiple times to
         require an image be signed by multiple keys.  The <b>--pubkeysfile</b> option is required for the <b>signedBy</b> and
       <b>sigstoreSigned</b> types.

   <b>--type,</b> <b>-t=</b><u><b>value</b></u>
       The trust type for this policy entry.
         Accepted values:
           <b>signedBy</b> (default): Require simple signing signatures with corresponding list of
                               public keys
           <b>sigstoreSigned</b>: Require sigstore signatures with corresponding list of
                               public keys
           <b>accept</b>: do not require any signatures for this
                   registry scope
           <b>reject</b>: do not accept images for this registry scope

   <b>show</b> <b>OPTIONS</b>
   <b>--json,</b> <b>-j</b>
       Output trust as JSON for machine parsing

   <b>--noheading,</b> <b>-n</b>
       Omit the table headings from the listing.

   <b>--raw</b>
       Output trust policy file as raw JSON

</pre><h4><b>EXAMPLES</b></h4><pre>
       Accept all unsigned images from a registry:

       sudo podman image trust set --type accept docker.io

       Modify default trust policy:

       sudo podman image trust set -t reject default

       Display system trust policy:

       podman image trust show
       TRANSPORT      NAME                        TYPE        ID                   STORE
       all            default                     reject
       repository     docker.io/library           accept
       repository     registry.access.redhat.com  signed      <a href="mailto:security@redhat.com">security@redhat.com</a>  https://access.redhat.com/webassets/docker/content/sigstore
       repository     registry.redhat.io          signed      <a href="mailto:security@redhat.com">security@redhat.com</a>  https://registry.redhat.io/containers/sigstore
       repository     docker.io                   reject
       docker-daemon                              accept

       Display trust policy file:

       podman image trust show --raw
       {
           "default": [
               {
                   "type": "reject"
               }
           ],
           "transports": {
               "docker": {
                   "docker.io": [
                       {
                           "type": "reject"
                       }
                   ],
                   "docker.io/library": [
                       {
                           "type": "insecureAcceptAnything"
                       }
                   ],
                   "registry.access.redhat.com": [
                       {
                           "type": "signedBy",
                           "keyType": "GPGKeys",
                           "keyPath": "/etc/pki/rpm-gpg/RPM-GPG-KEY-redhat-release"
                       }
                   ],
                   "registry.redhat.io": [
                       {
                           "type": "signedBy",
                           "keyType": "GPGKeys",
                           "keyPath": "/etc/pki/rpm-gpg/RPM-GPG-KEY-redhat-release"
                       }
                   ]
               },
               "docker-daemon": {
                   "": [
                       {
                           "type": "insecureAcceptAnything"
                       }
                   ]
               }
           }
       }

       Display trust as JSON:

       podman image trust show --json
       [
         {
           "transport": "all",
           "name": "* (default)",
           "repo_name": "default",
           "type": "reject"
         },
         {
           "transport": "repository",
           "name": "docker.io",
           "repo_name": "docker.io",
           "type": "reject"
         },
         {
           "transport": "repository",
           "name": "docker.io/library",
           "repo_name": "docker.io/library",
           "type": "accept"
         },
         {
           "transport": "repository",
           "name": "registry.access.redhat.com",
           "repo_name": "registry.access.redhat.com",
           "sigstore": "https://access.redhat.com/webassets/docker/content/sigstore",
           "type": "signed",
           "gpg_id": "<a href="mailto:security@redhat.com">security@redhat.com</a>"
         },
         {
           "transport": "repository",
           "name": "registry.redhat.io",
           "repo_name": "registry.redhat.io",
           "sigstore": "https://registry.redhat.io/containers/sigstore",
           "type": "signed",
           "gpg_id": "<a href="mailto:security@redhat.com">security@redhat.com</a>"
         },
         {
           "transport": "docker-daemon",
           "type": "accept"
         }
       ]

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man5/containers-policy.json.5.html">containers-policy.json</a>(5)</b>

</pre><h4><b>HISTORY</b></h4><pre>
       January  2019,  updated by Tom Sweeney (tsweeney at redhat dot com) December 2018, originally compiled by
       Qi Wang (qiwan at redhat dot com)

                                                                                           <u><a href="../man1/podman-image-trust.1.html">podman-image-trust</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>