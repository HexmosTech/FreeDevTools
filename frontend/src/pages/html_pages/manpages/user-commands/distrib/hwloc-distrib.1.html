<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>hwloc-distrib - Build a number of cpu masks distributed on the system</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/hwloc-nox">hwloc-nox_2.12.0-1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       hwloc-distrib - Build a number of cpu masks distributed on the system

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>hwloc-distrib</b> [<u>options</u>] <u>&lt;integer&gt;</u>

</pre><h4><b>OPTIONS</b></h4><pre>
       <b>--single</b>
              Singlify each output to a single CPU.

       <b>--cpuset-output-format</b> &lt;hwloc|list|taskset&gt; <b>--cof</b> &lt;hwloc|list|taskset&gt;
              Change  the  format  of displayed CPU set strings.  By default, the hwloc-specific format is used.
              If <u>list</u> is given, the output is a comma-separated of numbers or ranges, e.g. 2,4-5,8 .  If <u>taskset</u>
              is given, the output is compatible  with  the  taskset  program  (replaces  the  former  <b>--taskset</b>
              option).

       <b>-v</b> <b>--verbose</b>
              Verbose messages.

       <b>-i</b> &lt;path&gt;, <b>--input</b> &lt;path&gt;
              Read the topology from &lt;path&gt; instead of discovering the topology of the local machine.

              If &lt;path&gt; is a file, it may be a XML file exported by a previous hwloc program.  If &lt;path&gt; is "-",
              the standard input may be used as a XML file.

              On  Linux,  &lt;path&gt;  may be a directory containing the topology files gathered from another machine
              topology with hwloc-gather-topology.

              On x86, &lt;path&gt; may be a directory containing a cpuid dump gathered with hwloc-gather-cpuid.

              When the archivemount program is available, &lt;path&gt; may also be a tarball containing such Linux  or
              x86 topology files.

       <b>-i</b> &lt;specification&gt;, <b>--input</b> &lt;specification&gt;
              Simulate  a  fake  hierarchy  (instead  of  discovering  the  topology  on  the local machine). If
              &lt;specification&gt; is "node:2 pu:3", the topology will contain two NUMA nodes with 3 processing units
              in each of them.  The &lt;specification&gt; string must end with a number of PUs.

       <b>--if</b> &lt;format&gt;, <b>--input-format</b> &lt;format&gt;
              Enforce the input in the given format, among <b>xml</b>, <b>fsroot</b>, <b>cpuid</b> and <b>synthetic</b>.

       <b>--ignore</b> &lt;type&gt;
              Ignore all objects of type &lt;type&gt; in the topology.

       <b>--from</b> &lt;type&gt;
              Distribute starting from objects of the given type  instead  of  from  the  top  of  the  topology
              hierarchy, i.e. ignoring the structure given by objects above.

              &lt;type&gt; cannot be among NUMANode, I/O or Misc types.

       <b>--to</b> &lt;type&gt;
              Distribute  down  to  objects  of  the  given  type  instead of down to the bottom of the topology
              hierarchy, i.e. ignoring the structure given by  objects  below.   This  may  be  useful  if  some
              latitude  is  desired  for  the  binding, e.g. just bind several processes to each package without
              specifying a single core for each of them.

              &lt;type&gt; cannot be among NUMANode, I/O or Misc types.

       <b>--at</b> &lt;type&gt;
              Distribute among objects of the given type.  This is equivalent to specifying both <b>--from</b> and <b>--to</b>
              at the same time.

       <b>--reverse</b>
              Distribute by starting with the last objects first, and singlify CPU sets by keeping the last  bit
              (instead of the first bit).

       <b>--restrict</b> &lt;cpuset&gt;
              Restrict  the  topology  to  the  given  cpuset.   This  removes some PUs and their now-child-less
              parents.

              Beware that restricting the PUs in a topology may change the  logical  indexes  of  many  objects,
              including NUMA nodes.

       <b>--restrict</b> nodeset=&lt;nodeset&gt;
              Restrict   the  topology  to  the  given  nodeset  (unless  <b>--restrict-flags</b>  specifies  something
              different).  This removes some NUMA nodes and their now-child-less parents.

              Beware that restricting the NUMA nodes in a topology  may  change  the  logical  indexes  of  many
              objects, including PUs.

       <b>--restrict-flags</b> &lt;flags&gt;
              Enforce  flags when restricting the topology.  Flags may be given as numeric values or as a comma-
              separated list of flag names that are passed to <u>hwloc_topology_restrict()</u>.   Those  names  may  be
              substrings  of  actual flag names as long as a single one matches, for instance <b>bynodeset,memless</b>.
              The default is <b>0</b> (or <b>none</b>).

       <b>--disallowed</b>
              Include objects disallowed by administrative limitations.

       <b>--version</b>
              Report version and exit.

       <b>-h</b> <b>--help</b>
              Display help message and exit.

</pre><h4><b>DESCRIPTION</b></h4><pre>
       hwloc-distrib generates a series of CPU masks corresponding to  a  distribution  of  a  given  number  of
       elements  over  the  topology  of  the  machine. The distribution is done recursively from the top of the
       hierarchy (or from the level specified by option <b>--from</b>) down to the bottom of the hierarchy (or down  to
       the  level specified by option <b>--to</b>, or until only one element remains), splitting the number of elements
       at each encountered hierarchy level not ignored by options <b>--ignore</b>.

       This can e.g. be used to distribute a set of processes hierarchically according  to  the  topology  of  a
       machine. These masks can be used with <a href="../man1/hwloc-bind.1.html">hwloc-bind</a>(1).

       On hybrid CPUs (or asymmetric platforms), distribution may be suboptimal since the number of cores or PUs
       inside packages or below caches may vary (the top-down recursive partitioning ignores these numbers until
       reaching  their  levels).  Hence it is recommended to distribute only inside a single homogeneous domain.
       For instance on a CPU with energy-efficient E-cores and high-performance P-cores, one  should  distribute
       separately  N  tasks on E-cores and M tasks on P-cores instead of trying to distribute directly M+N tasks
       on the entire CPUs.

       <b>NOTE:</b> It is highly recommended that you read the <a href="../man7/hwloc.7.html">hwloc</a>(7) overview page before  reading  this  man  page.
       Most of the concepts described in <a href="../man7/hwloc.7.html">hwloc</a>(7) directly apply to the hwloc-bind utility.

</pre><h4><b>EXAMPLES</b></h4><pre>
       hwloc-distrib's operation is best described through several examples.

       If 4 processes have to be distributed across a machine, their CPU masks may be obtained with:

           $ hwloc-distrib 4
           0x0000000f
           0x00000f00
           0x000000f0
           0x0000f000

       To distribute only among the second package, the topology should be restricted:

           $ hwloc-distrib --restrict $(hwloc-calc package:1) 4
           0x00000010
           0x00000020
           0x00000040
           0x00000080

       To get a single processor of each CPU masks (prevent migration in case of binding)

           $ hwloc-distrib 4 --single
           0x00000001
           0x00000100
           0x00000010
           0x00001000

       Each output line may be converted independently with hwloc-calc:

           $ hwloc-distrib 4 --single | hwloc-calc --oo -q -I pu
           PU:0
           PU:8
           PU:4
           PU:12

       To  convert  the output into a list of processors that may be passed to dplace -c inside a mpirun command
       line:

           $ hwloc-distrib 4 --single | xargs hwloc-calc -I pu
           0,8,4,16

</pre><h4><b>RETURN</b> <b>VALUE</b></h4><pre>
       Upon successful execution, hwloc-distrib displays one or more CPU mask strings.  The return value is 0.

       hwloc-distrib will return nonzero if any kind of error occurs, such as (but not limited  to)  failure  to
       parse the command line.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <a href="../man7/hwloc.7.html">hwloc</a>(7)

2.12.0                                            Feb 17, 2025                                  <u><a href="../man1/HWLOC-DISTRIB.1.html">HWLOC-DISTRIB</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>