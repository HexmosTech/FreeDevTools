<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>i.smap   -  Performs  contextual  image  classification  using  sequential  maximum  a  posteriori (SMAP)</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/grass-doc">grass-doc_8.4.1-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       <b>i.smap</b>   -  Performs  contextual  image  classification  using  sequential  maximum  a  posteriori (SMAP)
       estimation.

</pre><h4><b>KEYWORDS</b></h4><pre>
       imagery, classification, supervised classification, segmentation, SMAP

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>i.smap</b>
       <b>i.smap</b> <b>--help</b>
       <b>i.smap</b>    [-<b>m</b>]    <b>group</b>=<u>name</u>    <b>subgroup</b>=<u>name</u>     <b>signaturefile</b>=<u>name</u>     <b>output</b>=<u>name</u>      [<b>goodness</b>=<u>name</u>]
       [<b>blocksize</b>=<u>integer</u>]   [--<b>overwrite</b>]  [--<b>help</b>]  [--<b>verbose</b>]  [--<b>quiet</b>]  [--<b>ui</b>]

   <b>Flags:</b>
       <b>-m</b>
           Use maximum likelihood estimation (instead of smap)

       <b>--overwrite</b>
           Allow output files to overwrite existing files

       <b>--help</b>
           Print usage summary

       <b>--verbose</b>
           Verbose module output

       <b>--quiet</b>
           Quiet module output

       <b>--ui</b>
           Force launching GUI dialog

   <b>Parameters:</b>
       <b>group</b>=<u>name</u> <b>[required]</b>
           Name of input imagery group

       <b>subgroup</b>=<u>name</u> <b>[required]</b>
           Name of input imagery subgroup

       <b>signaturefile</b>=<u>name</u> <b>[required]</b>
           Name of input file containing signatures
           Generated by i.gensigset

       <b>output</b>=<u>name</u> <b>[required]</b>
           Name for output raster map holding classification results

       <b>goodness</b>=<u>name</u>
           Name for output raster map holding goodness of fit (lower is better)

       <b>blocksize</b>=<u>integer</u>
           Size of submatrix to process at one time
           Default: <u>1024</u>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The  <u>i.smap</u>  program  is  used  to  segment  multispectral images using a spectral class model known as a
       Gaussian mixture distribution.  Since Gaussian mixture distributions  include  conventional  multivariate
       Gaussian  distributions,  this  program  may also be used to segment multispectral images based on simple
       spectral mean and covariance parameters.

       <u>i.smap</u> has two modes of operation. The first mode is the sequential  maximum  a  posteriori  (SMAP)  mode
       [1,2].  The SMAP segmentation algorithm attempts to improve segmentation accuracy by segmenting the image
       into regions rather than segmenting each pixel separately (see NOTES).

       The  second  mode  is  the more conventional maximum likelihood (ML) classification which classifies each
       pixel separately, but requires somewhat less computation. This mode is selected with  the  <b>-m</b>  flag  (see
       below).

</pre><h4><b>OPTIONS</b></h4><pre>
   <b>Flags:</b>
       <b>-m</b>
           Use maximum likelihood estimation (instead of smap).  Normal operation is to use SMAP estimation (see
           NOTES).

   <b>Parameters:</b>
       <b>group=</b><u>name</u>
           imagery group
           The imagery group that defines the image to be classified.

       <b>subgroup=</b><u>name</u>
           imagery subgroup
           The  subgroup  within  the group specified that specifies the subset of the band files that are to be
           used as image data to be classified.

       <b>signaturefile=</b><u>name</u>
           imagery signaturefile
           The signature file that contains the spectral signatures (i.e., the statistics) for the classes to be
           identified in the image.  This signature file is produced by the program <u>i.gensigset</u> (see NOTES).

       <b>blocksize=</b><u>value</u>
           size of submatrix to process at one time
           default: 1024
           This option specifies the size of the "window" to be used when reading the image data.

       This program was written to be nice about memory usage without influencing the resultant  classification.
       This  option allows the user to control how much memory is used.  More memory may mean faster (or slower)
       operation depending on how much real memory your machine has and how  much  virtual  memory  the  program
       uses.

       The  size  of  the  submatrix used in segmenting the image has a principle function of controlling memory
       usage; however, it also can have a subtle effect on the quality of the segmentation  in  the  smap  mode.
       The  smoothing  parameters  for  the  smap  segmentation  are  estimated  separately  for each submatrix.
       Therefore, if the image has regions with qualitatively different behavior, (e.g., natural  woodlands  and
       man-made  agricultural  fields)  it  may  be  useful  to  use  a submatrix small enough so that different
       smoothing parameters may be used for each distinctive region of the image.

       The submatrix size has no effect on the performance of the ML segmentation method.

       <b>output=</b><u>name</u>
           output raster map.
           The name of a raster map that will contain the classification results.  This  new  raster  map  layer
           will contain categories that can be related to landcover categories on the ground.

</pre><h4><b>NOTES</b></h4><pre>
       The  SMAP  algorithm  exploits the fact that nearby pixels in an image are likely to have the same class.
       It works by  segmenting  the  image  at  various  scales  or  resolutions  and  using  the  coarse  scale
       segmentations  to  guide  the  finer  scale  segmentations.   In  addition  to  reducing  the  number  of
       misclassifications, the SMAP algorithm generally produces segmentations with larger connected regions  of
       a fixed class which may be useful in some applications.

       The  amount  of smoothing that is performed in the segmentation is dependent of the behaviour of the data
       in the image.  If the data suggests that the nearby pixels often change class, then  the  algorithm  will
       adaptively reduce the amount of smoothing.  This ensures that excessively large regions are not formed.

       The  degree  of  misclassifications can be investigated with the goodness of fit output map. Lower values
       indicate a better fit. The largest 5 to 15% of the goodness values may need some closer inspection.

       The module <u>i.smap</u> does not support MASKed or NULL cells. Therefore it might be necessary to create a copy
       of the classification results using e.g. r.mapcalc:

       r.mapcalc "MASKed_map = classification_results"

</pre><h4><b>EXAMPLE</b></h4><pre>
       Supervised classification of LANDSAT scene (complete NC dataset)
       # Align computation region to the scene
       g.region raster=lsat7_2002_10 -p
       # store VIZ, NIR, MIR into group/subgroup
       i.group group=lsat7_2002 subgroup=res_30m \
         input=lsat7_2002_10,lsat7_2002_20,lsat7_2002_30,lsat7_2002_40,lsat7_2002_50,lsat7_2002_70
       # Now digitize training areas "training" with the digitizer
       # and convert to raster model with v.to.rast
       v.to.rast input=training output=training use=cat label_column=label
       # If you are just playing around and do not care about the accuracy of outcome,
       # just use one of existing maps instead e.g.
       # g.copy rast=landuse96_28m,training
       # Create a signature file with statistics for each class
       i.gensigset trainingmap=training group=lsat7_2002 subgroup=res_30m \
                   signaturefile=lsat7_2002_30m maxsig=5
       # Predict classes based on whole LANDSAT scene
       i.smap group=lsat7_2002 subgroup=res_30m signaturefile=lsat7_2002_30m \
              output=lsat7_2002_smap_classes
       # Visually check result
       d.mon wx0
       d.rast.leg lsat7_2002_smap_classes
       # Statistically check result
       r.kappa -w classification=lsat7_2002_smap_classes reference=training

       The signature file obtained in the example above will allow to classify the current  imagery  group  only
       (lsat7_2002).   If  the  user would like to re-use the signature file for the classification of different
       imagery group(s), they can set semantic labels for each group member beforehand, i.e., before  generating
       the signature files.  Semantic labels are set by means of <u>r.support</u> as shown below:
       # Define semantic labels for all LANDSAT bands
       r.support map=lsat7_2002_10 semantic_label=TM7_1
       r.support map=lsat7_2002_20 semantic_label=TM7_2
       r.support map=lsat7_2002_30 semantic_label=TM7_3
       r.support map=lsat7_2002_40 semantic_label=TM7_4
       r.support map=lsat7_2002_50 semantic_label=TM7_5
       r.support map=lsat7_2002_61 semantic_label=TM7_61
       r.support map=lsat7_2002_62 semantic_label=TM7_62
       r.support map=lsat7_2002_70 semantic_label=TM7_7
       r.support map=lsat7_2002_80 semantic_label=TM7_8

</pre><h4><b>REFERENCES</b></h4><pre>
           •   C.  Bouman  and  M.  Shapiro,  "Multispectral Image Segmentation using a Multiscale Image Model",
               <u>Proc.</u> <u>of</u> <u>IEEE</u> <u>Int’l</u> <u>Conf.</u> <u>on</u>  <u>Acoust.,</u>  <u>Speech</u>  <u>and</u>  <u>Sig.</u>  <u>Proc.,</u>  pp.  III-565  -  III-568,  San
               Francisco, California, March 23-26, 1992.

           •   C. Bouman and M. Shapiro 1994, "A Multiscale Random Field Model for Bayesian Image Segmentation",
               <u>IEEE</u> <u>Trans.</u> <u>on</u> <u>Image</u> <u>Processing.,</u> <u><a href="../man2/3.2.html">3</a>(2),</u> <u>162-177"</u> <u>(PDF)</u>

           •   McCauley,  J.D.  and  B.A. Engel 1995, "Comparison of Scene Segmentations: SMAP, ECHO and Maximum
               Likelihood", <u>IEEE</u> <u>Trans.</u> <u>on</u> <u>Geoscience</u> <u>and</u> <u>Remote</u> <u>Sensing,</u> <u><a href="../man6/33.6.html">33</a>(6):</u> <u>1313-1316.</u>

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
        <u>r.support</u> for setting semantic labels,
        <u>i.group</u> for creating groups and subgroups
       <u>r.mapcalc</u> to copy classification result in order to cut out MASKed subareas
       <u>i.gensigset</u> to generate the signature file required by this program

        <u>g.gui.iclass,</u> <u>i.maxlik,</u> <u>r.kappa</u>

</pre><h4><b>AUTHORS</b></h4><pre>
       Charles Bouman, School of Electrical Engineering, Purdue University
       Michael Shapiro, U.S.Army Construction Engineering Research Laboratory
       Semantic label support: Maris Nartiss, University of Latvia

</pre><h4><b>SOURCE</b> <b>CODE</b></h4><pre>
       Available at: i.smap source code (history)

       Accessed: Friday Apr 04 01:21:04 2025

       Main index | Imagery index | Topics index | Keywords index | Graphical index | Full index

       © 2003-2025 GRASS Development Team, GRASS GIS 8.4.1 Reference Manual

GRASS 8.4.1                                                                                       <u><a href="../man1grass/i.smap.1grass.html">i.smap</a></u>(1grass)
</pre>
 </div>
</div></section>
</div>
</body>
</html>