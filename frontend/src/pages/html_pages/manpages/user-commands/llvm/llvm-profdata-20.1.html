<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>llvm-profdata - Profile data tool</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/llvm-20">llvm-20_20.1.2-0ubuntu1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       llvm-profdata - Profile data tool

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>llvm-profdata</b> <u>command</u> [<u>args…</u>]

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The <b>llvm-profdata</b> tool is a small utility for working with profile data files.

</pre><h4><b>COMMANDS</b></h4><pre>
       • <u>merge</u>

       • <u>show</u>

       • <u>overlap</u>

       • <u>order</u>

</pre><h4><b>MERGE</b></h4><pre>
   <b>SYNOPSIS</b>
       <b>llvm-profdata</b> <b>merge</b> [<u>options</u>] [<u>filename…</u>]

   <b>DESCRIPTION</b>
       <b>llvm-profdata</b>  <b>merge</b>  takes  several  profile data files generated by PGO instrumentation and merges them
       together into a single indexed profile data file.

       By default profile data is merged without modification. This means that the relative importance  of  each
       input  file  is proportional to the number of samples or counts it contains. In general, the input from a
       longer training run will be interpreted as relatively more important than a shorter run. Depending on the
       nature of the training runs it may be useful to adjust the weight given to each input file by  using  the
       <b>-weighted-input</b> option.

       Profiles  passed in via <b>-weighted-input</b>, <b>-input-files</b>, or via positional arguments are processed once for
       each time they are seen.

   <b>OPTIONS</b>
       <b>--help</b> Print a summary of command line options.

       <b>--output=&lt;output&gt;,</b> <b>-o</b>
              Specify the output file name.  <u>Output</u> cannot be <b>-</b> as the resulting indexed profile data  can’t  be
              written to standard output.

       <b>--weighted-input=&lt;weight,filename&gt;</b>
              Specify  an  input file name along with a weight. The profile counts of the supplied <b>filename</b> will
              be scaled (multiplied) by the supplied <b>weight</b>, where <b>weight</b> is a  decimal  integer  &gt;=  1.   Input
              files  specified  without using this option are assigned a default weight of 1. Examples are shown
              below.

       <b>--input-files=&lt;path&gt;,</b> <b>-f</b>
              Specify a file  which  contains  a  list  of  files  to  merge.  The  entries  in  this  file  are
              newline-separated.  Lines  starting with ‘#’ are skipped. Entries may be of the form &lt;filename&gt; or
              &lt;weight&gt;,&lt;filename&gt;.

       <b>--remapping-file=&lt;path&gt;,</b> <b>-r</b>
              Specify a file which contains a remapping from symbol names in the input  profile  to  the  symbol
              names  that  should  be  used  in the output profile. The file should consist of lines of the form
              <b>&lt;input-symbol&gt;</b> <b>&lt;output-symbol&gt;</b>.  Blank lines and lines starting with <b>#</b> are skipped.

              The <u>llvm-cxxmap</u> tool can be used to generate the symbol remapping file.

       <b>--instr</b> <b>(default)</b>
              Specify that the input profile is an instrumentation-based profile.

       <b>--sample</b>
              Specify that the input profile is a sample-based profile.

              The format of the generated file can be generated in one of three ways:

              <b>--binary</b> <b>(default)</b>

              Emit the profile using a binary encoding. For instrumentation-based profile the output  format  is
              the indexed binary format.

              <b>--extbinary</b>

              Emit  the  profile  using  an  extensible  binary  encoding.  This  option  can  only be used with
              sample-based profile. The extensible binary encoding can be more compact with compression  enabled
              and can be loaded faster than the default binary encoding.

              <b>--text</b>

              Emit  the  profile  in  text  mode.  This  option  can  also  be  used  with both sample-based and
              instrumentation-based profile. When this option is used the profile will be  dumped  in  the  text
              format that is parsable by the profile reader.

              <b>--gcc</b>

              Emit the profile using GCC’s gcov format (Not yet supported).

       <b>--sparse[=true|false]</b>
              Do  not emit function records with 0 execution count. Can only be used in conjunction with -instr.
              Defaults to false, since it can inhibit compiler optimization during PGO.

       <b>--num-threads=&lt;N&gt;,</b> <b>-j</b>
              Use N threads to perform profile merging. When  N=0,  llvm-profdata  auto-detects  an  appropriate
              number of threads to use. This is the default.

       <b>--failure-mode=[any|all]</b>
              Set  the  failure  mode.  There  are  two  options:  ‘any’ causes the merge command to fail if any
              profiles are invalid, and ‘all’ causes the merge command to fail only if all profiles are invalid.
              If ‘all’ is set, information from any invalid profiles is excluded from the final merged  product.
              The default failure mode is ‘any’.

       <b>--prof-sym-list=&lt;path&gt;</b>
              Specify  a  file  which contains a list of symbols to generate profile symbol list in the profile.
              This option can only be used with sample-based profile in extbinary format. The  entries  in  this
              file are newline-separated.

       <b>--compress-all-sections=[true|false]</b>
              Compress  all  sections  when  writing the profile. This option can only be used with sample-based
              profile in extbinary format.

       <b>--use-md5=[true|false]</b>
              Use MD5 to represent string in name table when writing the profile.  This option can only be  used
              with sample-based profile in extbinary format.

       <b>--gen-partial-profile=[true|false]</b>
              Mark  the  profile  to  be  a partial profile which only provides partial profile coverage for the
              optimized target. This option can only be used with sample-based profile in extbinary format.

       <b>--split-layout=[true|false]</b>
              Split the profile data section to two with one containing sample profiles with  inlined  functions
              and the other not. This option can only be used with sample-based profile in extbinary format.

       <b>--convert-sample-profile-layout=[nest|flat]</b>
              Convert  the  merged  profile  into a profile with a new layout. Supported layout are <b>nest</b> (Nested
              profile, the input should be CS flat profile) and <b>flat</b> (Profile  with  nested  inlinees  flattened
              out).

       <b>--supplement-instr-with-sample=&lt;file&gt;</b>
              Supplement  an instrumentation profile with sample profile. The sample profile is the input of the
              flag. Output will be in instrumentation format (only works with -instr).

       <b>--zero-counter-threshold=&lt;float&gt;</b>
              For the function which is cold in instr profile but hot in sample profile, if  the  ratio  of  the
              number  of  zero  counters  divided  by  the  total number of counters is above the threshold, the
              profile of the function will be regarded as being harmful for performance and will be dropped.

       <b>--instr-prof-cold-threshold=&lt;int&gt;</b>
              User specified cold threshold for instr profile which will override the cold  threshold  got  from
              profile summary.

       <b>--suppl-min-size-threshold=&lt;int&gt;</b>
              If  the  size  of  a function is smaller than the threshold, assume it can be inlined by PGO early
              inliner and it will not be adjusted based on sample profile.

       <b>--debug-info=&lt;path&gt;</b>
              Specify  the  executable  or  <b>.dSYM</b>  that  contains  debug  info  for  the  raw   profile.    When
              <b>--debug-info-correlate</b>  or  <b>--profile-correlate=debug-info</b>  was used for instrumentation, use this
              option to correlate the raw profile.

       <b>--binary-file=&lt;path&gt;</b>
              Specify the executable that contains profile data and profile name sections for the  raw  profile.
              When  <b>-profile-correlate=binary</b> was used for instrumentation, use this option to correlate the raw
              profile.

       <b>--debuginfod</b>
              Use debuginfod to find the associated executables that contain profile data and name sections  for
              the  raw profiles to correlate them.  When -profile-correlate=binary was used for instrumentation,
              this option can be used for correlation.

       <b>--debug-file-directory=&lt;dir&gt;</b>
              Use provided local directories to search for  executables  that  contain  profile  data  and  name
              sections  for  the  raw  profiles  to correlate them.  When -profile-correlate=binary was used for
              instrumentation, this option can be used for correlation.

       <b>--correlate=&lt;kind&gt;</b>
              Specify  the  correlation   kind   (debug_info   or   binary)   to   use   when   -debuginfod   or
              -debug-file-directory=&lt;dir&gt; option is provided.

       <b>--temporal-profile-trace-reservoir-size</b>
              The  maximum  number of temporal profile traces to be stored in the output profile. If more traces
              are added, we will use reservoir sampling to select which traces to keep. Note that changing  this
              value between different merge invocations on the same indexed profile could result in sample bias.
              The default value is 100.

       <b>--temporal-profile-max-trace-length</b>
              The  maximum  number  of  functions  in  a  single  temporal  profile trace. Longer traces will be
              truncated. The default value is 1000.

       <b>--function=&lt;string&gt;</b>
              Only keep functions matching the regex in the output, all others are erased from the profile.

       <b>--no-function=&lt;string&gt;</b>
              Remove functions matching the regex from the profile.  If  both  –function  and  –no-function  are
              specified and a function matches both, it is removed.

   <b>EXAMPLES</b>
   <b>Basic</b> <b>Usage</b>
       Merge three profiles:

          llvm-profdata merge foo.profdata bar.profdata baz.profdata -output merged.profdata

   <b>Weighted</b> <b>Input</b>
       The input file <b>foo.profdata</b> is especially important, multiply its counts by 10:

          llvm-profdata merge --weighted-input=10,foo.profdata bar.profdata baz.profdata --output merged.profdata

       Exactly equivalent to the previous invocation (explicit form; useful for programmatic invocation):

          llvm-profdata merge --weighted-input=10,foo.profdata --weighted-input=1,bar.profdata --weighted-input=1,baz.profdata --output merged.profdata

</pre><h4><b>SHOW</b></h4><pre>
   <b>SYNOPSIS</b>
       <b>llvm-profdata</b> <b>show</b> [<u>options</u>] [<u>filename</u>]

   <b>DESCRIPTION</b>
       <b>llvm-profdata</b>  <b>show</b> takes a profile data file and displays the information about the profile counters for
       this file and for any of the specified function(s).

       If <u>filename</u> is omitted or is <b>-</b>, then <b>llvm-profdata</b> <b>show</b> reads its input from standard input.

   <b>OPTIONS</b>
       <b>--all-functions</b>
              Print details for every function.

       <b>--binary-ids</b>
              Print embedded binary ids in a profile.

       <b>--counts</b>
              Print the counter values for the displayed functions.

       <b>--show-format=&lt;text|json|yaml&gt;</b>
              Emit output in the selected format if supported by the provided profile type.

       <b>--function=&lt;string&gt;</b>
              Print details for a function if the function’s name contains the given string.

       <b>--help</b> Print a summary of command line options.

       <b>--output=&lt;output&gt;,</b> <b>-o</b>
              Specify the output file name.  If <u>output</u> is <b>-</b> or it isn’t specified, then the output  is  sent  to
              standard output.

       <b>--instr</b> <b>(default)</b>
              Specify that the input profile is an instrumentation-based profile.

       <b>--text</b> Instruct the profile dumper to show profile counts in the text format of the instrumentation-based
              profile  data  representation.  By  default,  the  profile  information  is dumped in a more human
              readable form (also in text) with annotations.

       <b>--topn=&lt;n&gt;</b>
              Instruct the profile dumper to show the top <b>n</b> functions with  the  hottest  basic  blocks  in  the
              summary section. By default, the topn functions are not dumped.

       <b>--sample</b>
              Specify that the input profile is a sample-based profile.

       <b>--memop-sizes</b>
              Show the profiled sizes of the memory intrinsic calls for shown functions.

       <b>--value-cutoff=&lt;n&gt;</b>
              Show  only  those  functions  whose  max  count values are greater or equal to <b>n</b>.  By default, the
              value-cutoff is set to 0.

       <b>--list-below-cutoff</b>
              Only output names of functions whose max count value are below the cutoff value.

       <b>--profile-version</b>
              Print profile version.

       <b>--showcs</b>
              Only show context sensitive profile counts. The default is to filter all context sensitive profile
              counts.

       <b>--show-prof-sym-list=[true|false]</b>
              Show profile symbol list if it  exists  in  the  profile.  This  option  is  only  meaningful  for
              sample-based profile in extbinary format.

       <b>--show-sec-info-only=[true|false]</b>
              Show  basic  information  about  each  section  in the profile. This option is only meaningful for
              sample-based profile in extbinary format.

       <b>--debug-info=&lt;path&gt;</b>
              Specify  the  executable  or  <b>.dSYM</b>  that  contains  debug  info  for  the  raw   profile.    When
              <b>--debug-info-correlate</b>  or  <b>--profile-correlate=debug-info</b>  was used for instrumentation, use this
              option to show the correlated functions from the raw profile.

       <b>--covered</b>
              Show only the functions that have been executed, i.e., functions with non-zero counts.

</pre><h4><b>OVERLAP</b></h4><pre>
   <b>SYNOPSIS</b>
       <b>llvm-profdata</b> <b>overlap</b> [<u>options</u>] [<u>base</u> <u>profile</u> <u>file</u>] [<u>test</u> <u>profile</u> <u>file</u>]

   <b>DESCRIPTION</b>
       <b>llvm-profdata</b> <b>overlap</b> takes two profile data files and  displays  the  <u>overlap</u>  of  counter  distribution
       between the whole files and between any of the specified functions.

       In  this  command,  <u>overlap</u>  is  defined  as follows: Suppose <u>base</u> <u>profile</u> <u>file</u> has the following counts:
       {c1_1, c1_2, …, c1_n, c1_u_1, c2_u_2, …, c2_u_s}, and <u>test</u> <u>profile</u> <u>file</u> has {c2_1, c2_2, …, c2_n, c2_v_1,
       c2_v_2, …, c2_v_t}.  Here c{1|2}_i (i = 1 .. n) are matched counters and c1_u_i (i = 1 .. s)  and  c2_v_i
       (i  =  1  ..  v) are unmatched counters (or counters only existing in) <u>base</u> <u>profile</u> <u>file</u> and <u>test</u> <u>profile</u>
       <u>file</u>, respectively.  Let sum_1 = c1_1 + c1_2 +  … + c1_n +  c1_u_1 + c2_u_2 + … +  c2_u_s,  and  sum_2  =
       c2_1  +  c2_2  +  …  +  c2_n  +  c2_v_1  +  c2_v_2 + … + c2_v_t.  <u>overlap</u> = min(c1_1/sum_1, c2_1/sum_2) +
       min(c1_2/sum_1, c2_2/sum_2) + … + min(c1_n/sum_1, c2_n/sum_2).

       The result overlap distribution is a percentage number, ranging from 0.0% to  100.0%,  where  0.0%  means
       there is no overlap and 100.0% means a perfect overlap.

       Here  is  an  example,  if  <u>base</u> <u>profile</u> <u>file</u> has counts of {400, 600}, and <u>test</u> <u>profile</u> <u>file</u> has matched
       counts of {60000, 40000}. The <u>overlap</u> is 80%.

   <b>OPTIONS</b>
       <b>--function=&lt;string&gt;</b>
              Print details for a function if the function’s name contains the given string.

       <b>--help</b> Print a summary of command line options.

       <b>--output=&lt;output&gt;,</b> <b>-o</b>
              Specify the output file name.  If <u>output</u> is <b>-</b> or it isn’t specified, then the output  is  sent  to
              standard output.

       <b>--value-cutoff=&lt;n&gt;</b>
              Show  only  those  functions  whose  max  count values are greater or equal to <b>n</b>.  By default, the
              value-cutoff is set to max of unsigned long long.

       <b>--cs</b>   Only show overlap for the context sensitive profile counts. The default  is  to  show  non-context
              sensitive profile counts.

</pre><h4><b>ORDER</b></h4><pre>
   <b>SYNOPSIS</b>
       <b>llvm-profdata</b> <b>order</b> [<u>options</u>] [<u>filename</u>]

   <b>DESCRIPTION</b>
       <b>llvm-profdata</b> <b>order</b> uses temporal profiling traces from a profile and finds a function order that reduces
       the  number  of  page  faults  for  those  traces.   This  output  can  be  directly  passed  to  <b>lld</b> via
       <b>--symbol-ordering-file=</b> for ELF or <b>-order-file</b> for Mach-O.  If  the  traces  found  in  the  profile  are
       representative of the real world, then this order should improve startup performance.

   <b>OPTIONS</b>
       <b>--help</b> Print a summary of command line options.

       <b>--output=&lt;output&gt;,</b> <b>-o</b>
              Specify  the  output  file name.  If <u>output</u> is <b>-</b> or it isn’t specified, then the output is sent to
              standard output.

</pre><h4><b>EXIT</b> <b>STATUS</b></h4><pre>
       <b>llvm-profdata</b> returns 1 if the command is omitted or is invalid, if it cannot read  input  files,  or  if
       there is a mismatch between their data.

</pre><h4><b>AUTHOR</b></h4><pre>
       Maintained by the LLVM Team (https://llvm.org/).

</pre><h4><b>COPYRIGHT</b></h4><pre>
       2003-2025, LLVM Project

15                                                 2025-04-03                                   <u><a href="../man1/LLVM-PROFDATA.1.html">LLVM-PROFDATA</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>