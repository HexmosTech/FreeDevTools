<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>bup-damage - randomly destroy blocks of a file</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/bup-doc">bup-doc_0.33.7-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       bup-damage - randomly destroy blocks of a file

</pre><h4><b>SYNOPSIS</b></h4><pre>
       bup damage [-n count] [-s maxsize] [--percent pct] [-S seed] [--equal] &lt;filenames...&gt;

</pre><h4><b>DESCRIPTION</b></h4><pre>
       Use  bup  damage  to deliberately destroy blocks in a .pack or .idx file (from .bup/objects/pack) to test
       the recovery features of <a href="../man1/bup-fsck.1.html">bup-fsck</a>(1) or other programs.

       <u>THIS</u> <u>PROGRAM</u> <u>IS</u> <u>EXTREMELY</u> <u>DANGEROUS</u> <u>AND</u> <u>WILL</u> <u>DESTROY</u> <u>YOUR</u> <u>DATA</u>

       bup damage is primarily useful for automated or manual tests of data recovery tools, to reassure yourself
       that the tools actually work.

       Note that the details of the current behavior may change (particularly the details not documented  here).
       For  example  the  moment, the damage is strictly probabilistic, and so may or may not actually alter any
       given block.  With a block size of 1, there should be a  1/256  chance  that  the  block  won’t  actually
       change.  This behavior may change.

</pre><h4><b>OPTIONS</b></h4><pre>
       -n, --num=<u>numblocks</u>
              the  number  of  separate blocks to damage in each file (default 10).  Note that it’s possible for
              more than one damaged segment to fall in the same <a href="../man1/bup-fsck.1.html">bup-fsck</a>(1) recovery block,  so  you  might  not
              damage as many recovery blocks as you expect.  If this is a problem, use --equal.

       -s, --size=<u>maxblocksize</u>
              the maximum size, in bytes, of each damaged block (default 1 unless --percent is specified).  Note
              that  because  of the way <a href="../man1/bup-fsck.1.html">bup-fsck</a>(1) works, a multi-byte block could fall on the boundary between
              two recovery blocks, and thus damaging two separate recovery blocks.  In small  files,  it’s  also
              possible  for  a  damaged  block  to  be larger than a recovery block.  If these issues might be a
              problem, you should use the default damage size of one byte.

       --percent=<u>maxblockpercent</u>
              the maximum size, in percent of the original file, of each damaged  block.   If  both  --size  and
              --percent  are  given, the maximum block size is the minimum of the two restrictions.  You can use
              this to ensure that a given block will never damage more than  one  or  two  <a href="../man1/git-fsck.1.html">git-fsck</a>(1)  recovery
              blocks.

       -S, --seed=<u>randomseed</u>
              seed the random number generator with the given value.  If you use this option, your tests will be
              repeatable,  since the damaged block offsets, sizes, and contents will be the same every time.  By
              default, the random numbers are different every  time  (so  you  can  run  tests  in  a  loop  and
              repeatedly test with different damage each time).

       --equal
              instead of choosing random offsets for each damaged block, space the blocks equally throughout the
              file,  starting  at offset 0.  If you also choose a correct maximum block size, this can guarantee
              that any given damage block never damages more than one <a href="../man1/git-fsck.1.html">git-fsck</a>(1) recovery block.  (This is also
              guaranteed if you use -s 1.)

</pre><h4><b>EXAMPLES</b></h4><pre>
              # make a backup in case things go horribly wrong
              cp -pPR <a href="file:~/.bup/objects/pack">~/.bup/objects/pack</a> <a href="file:~/bup-packs.bak">~/bup-packs.bak</a>

              # generate recovery blocks for all packs
              bup fsck -g

              # deliberately damage the packs
              bup damage -n 10 -s 1 -S 0 <a href="file:~/.bup/objects/pack/">~/.bup/objects/pack/</a>*.{pack,idx}

              # recover from the damage
              bup fsck -r

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <a href="../man1/bup-fsck.1.html">bup-fsck</a>(1), <a href="../man1/par2.1.html">par2</a>(1)

</pre><h4><b>BUP</b></h4><pre>
       Part of the <a href="../man1/bup.1.html">bup</a>(1) suite.

</pre><h4><b>AUTHORS</b></h4><pre>
       Avery Pennarun <a href="mailto:apenwarr@gmail.com">apenwarr@gmail.com</a>

Bup 0.33.7                                         2025-01-11                                      <u><a href="../man1/bup-damage.1.html">bup-damage</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>