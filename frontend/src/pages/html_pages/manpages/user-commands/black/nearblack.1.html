<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>nearblack - Convert nearly black/white borders to black.</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/gdal-bin">gdal-bin_3.10.2+dfsg-1build3_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       nearblack - Convert nearly black/white borders to black.

</pre><h4><b>SYNOPSIS</b></h4><pre>
          nearblack [--help] [--help-general]
                    [-of &lt;format&gt;] [-white | [-color &lt;c1&gt;,&lt;c2&gt;,&lt;c3&gt;...&lt;cn&gt;]...]
                    [-near &lt;dist&gt;] [-nb &lt;non_black_pixels&gt;]
                    [-setalpha] [-setmask] [-alg twopasses|floodfill]
                    [-o &lt;outfile&gt;] [-q] [-co &lt;NAME&gt;=&lt;VALUE&gt;]... &lt;infile&gt;

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This  utility will scan an image and try to set all pixels that are nearly or exactly black, white or one
       or more custom colors around the collar to black  or  white.  This  is  often  used  to  "fix  up"  lossy
       compressed  air  photos  so  that  color  pixels can be treated as transparent when mosaicing. The output
       format must use lossless compression if either alpha band or mask band is not set.

       <b>--help</b> Show this help message and exit

       <b>--help-general</b>
              Gives a brief usage message for the generic GDAL commandline options and exit.

       <b>-o</b> <b>&lt;outfile&gt;</b>
              The name of the output file to be created.

       <b>-of</b> <b>&lt;format&gt;</b>
              Select the output format.  Starting with GDAL 2.3, if not specified, the format  is  guessed  from
              the  extension  (previously was ERDAS Imagine .img).  Use the short format name (GTiff for GeoTIFF
              for example).

       <b>-co</b> <b>&lt;NAME&gt;=&lt;VALUE&gt;</b>
              Passes a creation option to the output format driver.  Multiple <u>-co</u> options  may  be  listed.  See
              <u>Raster</u> <u>drivers</u> format specific documentation for legal creation options for each format.

              Only valid when creating a new file

       <b>-white</b> Search for nearly white (255) pixels instead of nearly black pixels.

       <b>-color</b> <b>&lt;c1&gt;,&lt;c2&gt;,&lt;c3&gt;...&lt;cn&gt;</b>
              Search  for  pixels  near  the  specified  color. May be specified multiple times.  When -color is
              specified, the pixels that are considered as the collar are set to 0.

       <b>-near</b> <b>&lt;dist&gt;</b>
              Select how far from black, white or custom colors the pixel values can  be  and  still  considered
              near black, white or custom color.  Defaults to 15.

       <b>-nb</b> <b>&lt;non_black_pixels&gt;</b>
              number  of  consecutive  non-black  pixels  that  can  be  encountered before the giving up search
              inwards. Defaults to 2.

       <b>-setalpha</b>
              Adds an alpha band if the output file is specified and the input file has 3  bands,  or  sets  the
              alpha band of the output file if it is specified and the input file has 4 bands, or sets the alpha
              band  of  the input file if it has 4 bands and no output file is specified.  The alpha band is set
              to 0 in the image collar and to 255 elsewhere.

       <b>-setmask</b>
              Adds a mask band to the output file, or adds a mask band to the input file if it does not  already
              have  one  and  no output file is specified.  The mask band is set to 0 in the image collar and to
              255 elsewhere.

       <b>-alg</b> <b>twopasses|floodfill</b>
              New in version 3.8.

              Selects the algorithm to apply.

              <b>twopasses</b> uses a top-to-bottom pass followed by a bottom-to-top pass.  This is the only  algorithm
              implemented  before  GDAL  3.8. It may miss with concave areas.  The algorithm processes the image
              one scanline at a time.  A scan "in" is done from either end setting  pixels  to  black  or  white
              until  at  least  "non_black_pixels" pixels that are more than "dist" gray levels away from black,
              white or custom colors have been encountered at which point the scan  stops.   The  nearly  black,
              white  or  custom  color  pixels  are  set to black or white. The algorithm also scans from top to
              bottom and from bottom to top to identify indentations in the top or bottom.

              <b>floodfill</b> (added in GDAL 3.8) uses the <u>Flood</u> <u>Fill</u> algorithm and will work with concave  areas.  It
              requires  creating a temporary dataset and is slower than <b>twopasses</b>. When a non-zero value for <u>-nb</u>
              is used, <b>twopasses</b> is actually called as an initial step of <b>floodfill</b>.

       <b>-q</b>     Suppress progress monitor and other non-error output.

       <b>&lt;infile&gt;</b>
              The input file.  Any GDAL supported format, any number of bands, normally 8bit Byte bands.

       The processing is all done in 8bit (Bytes).

       If the output file is omitted, the processed results will be written back to the input file - which  must
       support update.

</pre><h4><b>C</b> <b>API</b></h4><pre>
       This utility is also callable from C with <u>GDALNearblack()</u>.

       New in version 2.1.

</pre><h4><b>AUTHOR</b></h4><pre>
       Frank Warmerdam &lt;<a href="mailto:warmerdam@pobox.com">warmerdam@pobox.com</a>&gt;

</pre><h4><b>COPYRIGHT</b></h4><pre>
       1998-2025

                                                  Feb 11, 2025                                      <u><a href="../man1/NEARBLACK.1.html">NEARBLACK</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>