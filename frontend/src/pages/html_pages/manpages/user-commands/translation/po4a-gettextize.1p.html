<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>po4a-gettextize - convert an original file (and its translation) to a PO file</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/po4a">po4a_0.73-2ubuntu1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       po4a-gettextize - convert an original file (and its translation) to a PO file

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>po4a-gettextize</b> <b>-f</b> <u>fmt</u> <b>-m</b> <u>master.doc</u> <b>-l</b> <u>XX.doc</u> <b>-p</b> <u>XX.po</u>

       (<u>XX.po</u> is the output, all others are inputs)

</pre><h4><b>DESCRIPTION</b></h4><pre>
       po4a (PO for anything) eases the maintenance of documentation translation using the classical gettext
       tools. The main feature of po4a is that it decouples the translation of content from its document
       structure.  Please refer to the page <b><a href="../man7/po4a.7.html">po4a</a></b>(7) for a gentle introduction to this project.

       The <b>po4a-gettextize</b> script helps you converting your previously existing translations into a po4a-based
       workflow. This is only to be done once to salvage an existing translation while converting to po4a, not
       on a regular basis after the conversion of your project. This tedious process is explained in details in
       Section 'Converting a manual translation to po4a' below.

       You must provide both a master file (e.g., the source in English) and an existing translated file (e.g.,
       a previous translation attempt without po4a). If you provide more than one master or translation files,
       they will be used in sequence, but it may be easier to gettextize each page or chapter separately and
       then use <b>msgmerge</b> to merge all produced PO files. As you wish.

       If the master document has non-ASCII characters, the new generated PO file will be in UTF-8. If the
       master document is completely in ASCII, the generated PO will use the encoding of the translated input
       document.

</pre><h4><b>OPTIONS</b></h4><pre>
       <b>-f</b>, <b>--format</b>
           Format  of  the  documentation  you  want  to handle. Use the <b>--help-format</b> option to see the list of
           available formats.

       <b>-m</b>, <b>--master</b>
           File containing the master document to translate. You can use this option multiple times if you  want
           to gettextize multiple documents.

       <b>-M</b>, <b>--master-charset</b>
           Charset of the file containing the document to translate.

       <b>-l</b>, <b>--localized</b>
           File  containing  the localized (translated) document. If you provided multiple master files, you may
           wish to provide multiple localized file by using this option more than once.

       <b>-L</b>, <b>--localized-charset</b>
           Charset of the file containing the localized document.

       <b>-p</b>, <b>--po</b>
           File where the message catalog should be written. If not given, the message catalog will  be  written
           to the standard output.

       <b>-o</b>, <b>--option</b>
           Extra  option(s)  to  pass  to  the  format  plugin.  See  the  documentation of each plugin for more
           information about the valid options and their meanings. For example, you could pass  '-o  tablecells'
           to the AsciiDoc parser, while the text parser would accept '-o tabs=split'.

       <b>-h</b>, <b>--help</b>
           Show a short help message.

       <b>--help-format</b>
           List the documentation formats understood by po4a.

       <b>-k</b> <b>--keep-temps</b>
           Keep  the  temporary  master  and  localized  POT  files built before merging.  This can be useful to
           understand why these files get desynchronized, leading to gettextization problems.

       <b>-V</b>, <b>--version</b>
           Display the version of the script and exit.

       <b>-v</b>, <b>--verbose</b>
           Increase the verbosity of the program.

       <b>-d</b>, <b>--debug</b>
           Output some debugging information.

       <b>--msgid-bugs-address</b> <u>email@address</u>
           Set the report address for msgid bugs. By default, the created POT files have no Report-Msgid-Bugs-To
           fields.

       <b>--copyright-holder</b> <u>string</u>
           Set the copyright holder in the POT header. The default value is "Free Software Foundation, Inc."

       <b>--package-name</b> <u>string</u>
           Set the package name for the POT header. The default is "PACKAGE".

       <b>--package-version</b> <u>string</u>
           Set the package version for the POT header. The default is "VERSION".

   <b>Converting</b> <b>a</b> <b>manual</b> <b>translation</b> <b>to</b> <b>po4a</b>
       <b>po4a-gettextize</b> synchronizes the master and localized files to extract their content into a PO file.  The
       content of the master file gives the <b>msgid</b> while the content of the localized file gives the <b>msgstr</b>. This
       process  is  somewhat fragile: the Nth string of the translated file is supposed to be the translation of
       the Nth string in the original.

       Gettextization works best if you manage to retrieve the exact version of the original document  that  was
       used for translation. Even so, you may need to fiddle with both master and localized files to align their
       structure if it was changed by the original translator, so working on files' copies is advised.

       Internally,  each  po4a  parser  reports  the  syntactical  type  of  each extracted strings. This is how
       desynchronization are detected during the gettextization.  In the example  depicted  below,  it  is  very
       unlikely  that  the 4th string in translation (of type 'chapter') is the translation of the 4th string in
       original (of type 'paragraph'). It is more likely that a new paragraph was added to the original, or that
       two original paragraphs were merged together in the translation.

           Original         Translation

         chapter            chapter
           paragraph          paragraph
           paragraph          paragraph
           paragraph        chapter
         chapter              paragraph
           paragraph          paragraph

       <b>po4a-gettextize</b> will verbosely diagnose any structure desynchronization. When this  happens,  you  should
       manually  edit the files to add fake paragraphs or remove some content here and there until the structure
       of both files actually match. Some tricks are given below to salvage the most of the existing translation
       while doing so.

       If you are lucky enough to have a perfect match in the file structures out of the box, building a correct
       PO file is a matter of seconds. Otherwise, you will soon understand why this process  has  such  an  ugly
       name :) Even so, gettextization often remains faster than translating everything again. I gettextized the
       French  translation  of  the whole Perl documentation in one day despite the <u>many</u> synchronization issues.
       Given the amount of text (2MB of original text), restarting the translation without first  salvaging  the
       old translations would have required several months of work. In addition, this grunt work is the price to
       pay  to  get  the  comfort  of  po4a.  Once  converted,  the synchronization between master documents and
       translations will always be fully automatic.

       After a successful gettextization, the produced documents  should  be  manually  checked  for  undetected
       disparities and silent errors, as explained below.

       <u>Hints</u> <u>and</u> <u>tricks</u> <u>for</u> <u>the</u> <u>gettextization</u> <u>process</u>

       The  gettextization stops as soon as a desynchronization is detected. When this happens, you need to edit
       the files as much as needed to re-align the files' structures. <b>po4a-gettextize</b>  is  rather  verbose  when
       things  go  wrong.  It reports the strings that don't match, their positions in the text, and the type of
       each of them. Moreover, the PO file generated so far is dumped as  <u>gettextization.failed.po</u>  for  further
       inspection.

       Here  are  some  tricks  to  help you in this tedious process and ensure that you salvage the most of the
       previous translation:

       •   Remove all extra content of the translations, such as the section giving credits to the  translators.
           They should be added separately to <b>po4a</b> as addenda (see <b><a href="../man7/po4a.7.html">po4a</a></b>(7)).

       •   When editing the files to align their structures, prefer editing the translation if possible. Indeed,
           if the changes to the original are too intrusive, the old and new versions will not be matched during
           the first po4a run after gettextization (see below). Any unmatched translation will be dumped anyway.
           That  being  said,  you  still  want  to  edit  the  original  document  if  it's too hard to get the
           gettextization to proceed otherwise, even if it means  that  one  paragraph  of  the  translation  is
           dumped. The important thing is to get a first PO file to start with.

       •   Do  not  hesitate  to  kill any original content that would not exist in the translated version. This
           content will be automatically reintroduced  afterward,  when  synchronizing  the  PO  file  with  the
           document.

       •   You should probably inform the original author of any structural change in the translation that seems
           justified.  Issues  in  the  original  document  should  reported  to the author. Fixing them in your
           translation only fixes them for a part of the community. Plus, it is impossible to do so  when  using
           po4a  ;)  But  you  probably want to wait until the end of the conversion to <b>po4a</b> before changing the
           original files.

       •   Sometimes, the paragraph content does match, but  not  their  types.  Fixing  it  is  rather  format-
           dependent.  In  POD  and man, it often comes from the fact that one of them contains a line beginning
           with a white space while the other does not.  In those formats, such paragraph cannot be wrapped  and
           thus  become  a  different type. Just remove the space and you are fine. It may also be a typo in the
           tag name in XML.

           Likewise, two paragraphs may get merged together in  POD  when  the  separating  line  contains  some
           spaces, or when there is no empty line between the <b>=item</b> line and the content of the item.

       •   Sometimes,  the  desynchronization message seems odd because the translation is attached to the wrong
           original paragraph. It is the sign of an undetected issue earlier in  the  process.  Search  for  the
           actual desynchronization point by inspecting the file <u>gettextization.failed.po</u> that was produced, and
           fix the problem where it really is.

       •   Other  issues  may  come  from  duplicated  strings in either the original or translation. Duplicated
           strings are merged in PO  files,  with  two  references.   This  constitutes  a  difficulty  for  the
           gettextization  algorithm,  that is a simple one to one pairing between the <b>msgid</b>s of both the master
           and the localized files. It is however believed that recent  versions  of  po4a  deal  properly  with
           duplicated strings, so you should report any remaining issue that you may encounter.

   <b>Reviewing</b> <b>files</b> <b>produced</b> <b>by</b> <b>po4a-gettextize</b>
       Any  file  produced  by  <b>po4a-gettextize</b>  should  be  manually  reviewed, even when the script terminates
       successfully. You should skim over the PO file, ensuring that the <b>msgid</b> and <b>msgstr</b> actually match. It  is
       not necessary to ensure that the translation is perfectly correct yet, as all entries are marked as fuzzy
       translations  anyway.  You  only  need  to  check  for  obvious  matching  issues  because  badly matched
       translations will be dumped in subsequent steps while you want to salvage them.

       Fortunately, this step does not require to master the target languages as  you  only  want  to  recognize
       similar  elements  in  each <b>msgid</b> and its corresponding <b>msgstr</b>. As a speaker of French, English, and some
       German myself, I can do this for all European languages at least, even if I cannot say one word  of  most
       of  these  languages.  I  sometimes manage to detect matching issues in non-Latin languages by looking at
       string length, phrase structures (does the amount of interrogation marks match?) and other clues,  but  I
       prefer when someone else can review those languages.

       If  you  detect  a  mismatch,  edit  the original and translation files as if <b>po4a-gettextize</b> reported an
       error, and try again. Once you have a decent PO file for your previous translation, backup it  until  you
       get po4a working correctly.

   <b>Running</b> <b>po4a</b> <b>for</b> <b>the</b> <b>first</b> <b>time</b>
       The  easiest  way  to  setup po4a is to write a <b>po4a.conf</b> configuration file, and use the integrated <b>po4a</b>
       program (<b>po4a-updatepo</b> and <b>po4a-translate</b> are deprecated). Please check the "CONFIGURATION FILE"  Section
       in <b><a href="../man1/po4a.1.html">po4a</a></b>(1) documentation for more details.

       When <b>po4a</b> runs for the first time, the current version of the master documents will be used to update the
       PO  files containing the old translations that you salvaged through gettextization. This can take quite a
       long time, because many of the <b>msgid</b>s of from the gettextization do not exactly match the elements of the
       POT file built from the recent master files. This forces gettext to search for the closest  one  using  a
       costly  string  proximity  algorithm.   For  example,  the first run over the Perl documentation's French
       translation (5.5 MB PO file) took about 48 hours (yes, two days) while  the  subsequent  ones  only  take
       seconds.

   <b>Moving</b> <b>your</b> <b>translations</b> <b>to</b> <b>production</b>
       After  this  first  run, the PO files are ready to be reviewed by translators. All entries were marked as
       fuzzy in the PO file by <b>po4a-gettextization</b>, forcing their careful review before use. Translators  should
       take  each entry to verify that the salvaged translation actually match the current original text, update
       the translation on need, and remove the fuzzy markers.

       Once enough fuzzy markers are removed, <b>po4a</b> will start generating the  translation  files  on  disk,  and
       you're  ready  to  move  your translation workflow to production. Some projects find it useful to rely on
       weblate to coordinate between translators and maintainers, but that's beyond <b>po4a</b>' scope.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man1/po4a.1.html">po4a</a></b>(1), <b><a href="../man1/po4a-normalize.1.html">po4a-normalize</a></b>(1), <b><a href="../man1/po4a-translate.1.html">po4a-translate</a></b>(1), <b><a href="../man1/po4a-updatepo.1.html">po4a-updatepo</a></b>(1), <b><a href="../man7/po4a.7.html">po4a</a></b>(7).

</pre><h4><b>AUTHORS</b></h4><pre>
        Denis Barbier &lt;<a href="mailto:barbier@linuxfr.org">barbier@linuxfr.org</a>&gt;
        Nicolas François &lt;<a href="mailto:nicolas.francois@centraliens.net">nicolas.francois@centraliens.net</a>&gt;
        Martin Quinson (mquinson#debian.org)

</pre><h4><b>COPYRIGHT</b> <b>AND</b> <b>LICENSE</b></h4><pre>
       Copyright 2002-2023 by SPI, inc.

       This program is free software; you may redistribute it and/or modify it under the terms of  GPL  v2.0  or
       later (see the COPYING file).

perl v5.38.2                                       2024-08-28                              <u><a href="../man1/PO4A-GETTEXTIZE.1P.1.html">PO4A-GETTEXTIZE.1P</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>