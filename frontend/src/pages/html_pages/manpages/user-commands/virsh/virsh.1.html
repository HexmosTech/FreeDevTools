<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>virsh - management user interface</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/libvirt-clients">libvirt-clients_11.0.0-2ubuntu6.2_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       virsh - management user interface

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>virsh</b> [<u>OPTION</u>]... [<u>COMMAND_STRING</u>]

       <b>virsh</b> [<u>OPTION</u>]... <u>COMMAND</u> [<u>ARG</u>]...

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The  <b>virsh</b>  program  is  the  main interface for managing virsh guest domains. The program can be used to
       create, pause, and shutdown domains. It can also be used to list current domains. Libvirt is a C  toolkit
       to interact with the virtualization capabilities of recent versions of Linux (and other OSes). It is free
       software  available  under  the  GNU Lesser General Public License. Virtualization of the Linux Operating
       System means the ability to run multiple instances of Operating Systems concurrently on a single hardware
       system where the basic resources are driven by a Linux instance. The library aims  at  providing  a  long
       term stable C API.  It currently supports Xen, QEMU, KVM, LXC, OpenVZ, VirtualBox and VMware ESX.

       The basic structure of most virsh usage is:

          virsh [OPTION]... &lt;command&gt; &lt;domain&gt; [ARG]...

       Where  <u>command</u>  is one of the commands listed below; <u>domain</u> is the numeric domain id, or the domain name,
       or the domain UUID; and <u>ARGS</u> are command specific options.  There are a few exceptions to  this  rule  in
       the  cases  where the command in question acts on all domains, the entire machine, or directly on the xen
       hypervisor.  Those exceptions will be clear for each of those commands.  Note: it is permissible to  give
       numeric names to domains, however, doing so will result in a domain that can only be identified by domain
       id.  In other words, if a numeric value is supplied it will be interpreted as a domain id, not as a name.
       Any <u>command</u> starting with <b>#</b> is treated as a comment and silently ignored, all other unrecognized <u>commands</u>
       are diagnosed.

       The <b>virsh</b> program can be used either to run one <u>COMMAND</u> by giving the command and its  arguments  on  the
       shell  command  line, or a <u>COMMAND_STRING</u> which is a single shell argument consisting of multiple <u>COMMAND</u>
       actions and their arguments joined with whitespace  and  separated  by  semicolons  or  newlines  between
       commands,  where  unquoted  backslash-newline pairs are elided.  Within <u>COMMAND_STRING</u>, virsh understands
       the same single, double, and backslash escapes as the shell, although you must add another layer of shell
       escaping in creating the single shell argument, and any word starting with unquoted <u>#</u>  begins  a  comment
       that  ends  at  newline.   If  no  command  is given in the command line, <b>virsh</b> will then start a minimal
       interpreter waiting for your commands, and the <b>quit</b> command will then exit the program.

       The <b>virsh</b> program understands the following <u>OPTIONS</u>.

       <b>-c</b>, <b>--connect</b> <u>URI</u>

       Connect to the specified <u>URI</u>, as if by the <b>connect</b> command, instead of the default connection.

       <b>-d</b>, <b>--debug</b> <u>LEVEL</u>

       Enable debug messages at integer <u>LEVEL</u> and above.  <u>LEVEL</u> can range  from  0  to  4  (default).   See  the
       documentation of <b>VIRSH_DEBUG</b> environment variable below for the description of each <u>LEVEL</u>.

       • <b>-e</b>, <b>--escape</b> <u>string</u>

       Set  alternative escape sequence for <u>console</u> command. By default, telnet's <b>^]</b> is used. Allowed characters
       when using hat notation are: alphabetic character, @, [, ], , ^, _.

       • <b>-h</b>, <b>--help</b>

       Ignore all other arguments, and behave as if the <b>help</b> command were given instead.

       • <b>-k</b>, <b>--keepalive-interval</b> <u>INTERVAL</u>

       Set an <u>INTERVAL</u> (in seconds) for sending keepalive messages to check whether connection to the server  is
       still alive.  Setting the interval to 0 disables client keepalive mechanism.

       • <b>-K</b>, <b>--keepalive-count</b> <u>COUNT</u>

       Set  a  number  of  times keepalive message can be sent without getting an answer from the server without
       marking the connection dead.  There is no effect to this setting in case the <u>INTERVAL</u> is set to 0.

       • <b>-l</b>, <b>--log</b> <u>FILE</u>

       Output logging details to <u>FILE</u>.

       • <b>-q</b>, <b>--quiet</b>

       Avoid extra informational messages.

       • <b>-r</b>, <b>--readonly</b>

       Make the initial connection read-only, as if by the <u>--readonly</u> option of the <b>connect</b> command.

       • <b>-t</b>, <b>--timing</b>

       Output elapsed time information for each command.

       • <b>-v</b>, <b>--version[=short]</b>

       Ignore all other arguments, and prints the version of the libvirt library virsh is coming from

       • <b>-V</b>, <b>--version=long</b>

       Ignore all other arguments, and prints the version of the libvirt library virsh is coming from and  which
       options and driver are compiled in.

</pre><h4><b>NOTES</b></h4><pre>
       Most  <b>virsh</b> operations rely upon the libvirt library being able to connect to an already running libvirtd
       service.  This can usually be done using the command <b>service</b> <b>libvirtd</b> <b>start</b>.

       Most <b>virsh</b> commands require root privileges to run due to the communications channels used to talk to the
       hypervisor.  Running as non root will return an error.

       Most <b>virsh</b> commands act synchronously, except maybe shutdown, setvcpus and setmem.  In  those  cases  the
       fact  that the <b>virsh</b> program returned, may not mean the action is complete and you must poll periodically
       to detect that the guest completed the operation.

       <b>virsh</b> strives for backward compatibility.  Although the <b>help</b> command only lists the preferred usage of  a
       command,  if  an  older  version of <b>virsh</b> supported an alternate spelling of a command or option (such as
       <u>--tunnelled</u> instead of <u>--tunneled</u>), then scripts using that older spelling will continue to work.

       Several <b>virsh</b> commands take an optionally scaled integer; if no scale is provided, then  the  default  is
       listed  in  the  command  (for  historical  reasons, some commands default to bytes, while other commands
       default to kibibytes).  The following case-insensitive suffixes can be used to select a specific scale:

          b, byte  byte      1
          KB       kilobyte  1,000
          k, KiB   kibibyte  1,024
          MB       megabyte  1,000,000
          M, MiB   mebibyte  1,048,576
          GB       gigabyte  1,000,000,000
          G, GiB   gibibyte  1,073,741,824
          TB       terabyte  1,000,000,000,000
          T, TiB   tebibyte  1,099,511,627,776
          PB       petabyte  1,000,000,000,000,000
          P, PiB   pebibyte  1,125,899,906,842,624
          EB       exabyte   1,000,000,000,000,000,000
          E, EiB   exbibyte  1,152,921,504,606,846,976

</pre><h4><b>GENERIC</b> <b>COMMANDS</b></h4><pre>
       The following commands are generic i.e. not specific to a domain.

   <b>help</b>
       <b>Syntax:</b>

          help [command-or-group]

       This lists each of the virsh commands.  When used without options, all commands are listed, one per line,
       grouped into related categories, displaying the keyword for each group.

       To display only commands for a specific group, give the  keyword  for  that  group  as  an  option.   For
       example:

       <b>Example</b> <b>1:</b>

          virsh # help host

          Host and Hypervisor (help keyword 'host'):
              capabilities                   capabilities
              cpu-models                     show the CPU models for an architecture
              connect                        (re)connect to hypervisor
              freecell                       NUMA free memory
              hostname                       print the hypervisor hostname
              qemu-attach                    Attach to existing QEMU process
              qemu-monitor-command           QEMU Monitor Command
              qemu-agent-command             QEMU Guest Agent Command
              sysinfo                        print the hypervisor sysinfo
              uri                            print the hypervisor canonical URI

       To  display  detailed  information  for  a  specific  command,  give its name as the option instead.  For
       example:

       <b>Example</b> <b>2:</b>

          virsh # help list
            NAME
              list - list domains

            SYNOPSIS
              list [--inactive] [--all]

            DESCRIPTION
              Returns list of domains.

            OPTIONS
              --inactive       list inactive domains
              --all            list inactive &amp; active domains

   <b>quit,</b> <b>exit</b>
       <b>Syntax:</b>

          quit
          exit

       quit this interactive terminal

   <b>version</b>
       <b>Syntax:</b>

          version [--daemon]

       Will print out the major version info about what this built from.  If  <u>--daemon</u>  is  specified  then  the
       version of the libvirt daemon is included in the output.

       <b>Example:</b>

          $ virsh version
          Compiled against library: libvirt 1.2.3
          Using library: libvirt 1.2.3
          Using API: QEMU 1.2.3
          Running hypervisor: QEMU 2.0.50

          $ virsh version --daemon
          Compiled against library: libvirt 1.2.3
          Using library: libvirt 1.2.3
          Using API: QEMU 1.2.3
          Running hypervisor: QEMU 2.0.50
          Running against daemon: 1.2.6

   <b>cd</b>
       <b>Syntax:</b>

          cd [directory]

       Will  change  current  directory  to  <u>directory</u>.   The  default  directory for the <b>cd</b> command is the home
       directory or, if there is no <u>HOME</u> variable in the environment, the root directory.

   <b>pwd</b>
       <b>Syntax:</b>

          pwd

       Will print the current directory.

   <b>connect</b>
       <b>Syntax:</b>

          connect [URI] [--readonly]

       (Re)-Connect to the hypervisor. When the shell is first started, this is automatically run with  the  <u>URI</u>
       parameter  requested  by the <b>-c</b> option on the command line. The <u>URI</u> parameter specifies how to connect to
       the hypervisor. The URI docs
        &lt;https://libvirt.org/uri.html&gt;  list the values supported, but the most common are:

       • xen:///system

         this is used to connect to the local Xen hypervisor

       • qemu:///system

         connect locally as root to the daemon supervising QEMU and KVM domains

       • qemu:///session

         connect locally as a normal user to his own set of QEMU and KVM domains

       • lxc:///system

         connect to a local linux container

       To find the currently used URI, check the <u>uri</u> command documented below.

       For remote access see the URI docs
        &lt;https://libvirt.org/uri.html&gt;  on how  to  make  URIs.  The  <u>--readonly</u>  option  allows  for  read-only
       connection

   <b>uri</b>
       <b>Syntax:</b>

          uri

       Prints the hypervisor canonical URI, can be useful in shell mode.

   <b>hostname</b>
       <b>Syntax:</b>

          hostname

       Print the hypervisor hostname.

   <b>sysinfo</b>
       <b>Syntax:</b>

          sysinfo

       Print the XML representation of the hypervisor sysinfo, if available.

   <b>nodeinfo</b>
       <b>Syntax:</b>

          nodeinfo

       Returns  basic  information about the node, like number and type of CPU, and size of the physical memory.
       The output corresponds to virNodeInfo structure. Specifically, the "CPU socket(s)" field means number  of
       CPU  sockets per NUMA cell. The information libvirt displays is dependent upon what each architecture may
       provide.

   <b>nodecpumap</b>
       <b>Syntax:</b>

          nodecpumap [--pretty]

       Displays the node's total number of CPUs, the number of online CPUs and the list of online CPUs.

       With <u>--pretty</u> the online CPUs are printed as a range instead of a list.

   <b>nodecpustats</b>
       <b>Syntax:</b>

          nodecpustats [cpu] [--percent]

       Returns cpu stats of the node.  If <u>cpu</u> is specified, this will print the specified cpu  statistics  only.
       If <u>--percent</u> is specified, this will print the percentage of each kind of cpu statistics during 1 second.

   <b>nodememstats</b>
       <b>Syntax:</b>

          nodememstats [cell]

       Returns  memory  stats  of the node.  If <u>cell</u> is specified, this will print the specified cell statistics
       only.

   <b>nodesevinfo</b>
       <b>Syntax:</b>

          nodesevinfo

       Reports information about the AMD SEV launch security features  for  the  node,  if  any.  Some  of  this
       information is also reported in the domain capabilities XML document.

   <b>nodesuspend</b>
       <b>Syntax:</b>

          nodesuspend [target] [duration]

       Puts  the  node  (host  machine)  into  a system-wide sleep state and schedule the node's Real-Time-Clock
       interrupt to resume the node after the time duration specified by <u>duration</u> is out.  <u>target</u> specifies  the
       state to which the host will be suspended to, it can be "mem" (suspend to RAM), "disk" (suspend to disk),
       or  "hybrid"  (suspend  to both RAM and disk).  <u>duration</u> specifies the time duration in seconds for which
       the host has to be suspended, it should be at least 60 seconds.

   <b>node-memory-tune</b>
       <b>Syntax:</b>

          node-memory-tune [shm-pages-to-scan] [shm-sleep-millisecs] [shm-merge-across-nodes]

       Allows you to display or set the node memory parameters.  <u>shm-pages-to-scan</u> can be used to set the number
       of pages to scan before the shared memory service goes to sleep; <u>shm-sleep-millisecs</u> can be used  to  set
       the  number  of millisecs the shared memory service should sleep before next scan; <u>shm-merge-across-nodes</u>
       specifies if pages from different numa nodes can be merged. When set to 0, only  pages  which  physically
       reside  in  the  memory  area of same NUMA node can be merged. When set to 1, pages from all nodes can be
       merged. Default to 1.

       <b>Note</b>: Currently the "shared memory service" only means KSM (Kernel Samepage Merging).

   <b>capabilities</b>
       <b>Syntax:</b>

          capabilities [--xpath EXPRESSION] [--wrap]

       Print an XML document describing the capabilities of the hypervisor we are currently connected  to.  This
       includes  a  section  on the host capabilities in terms of CPU and features, and a set of description for
       each kind of guest which can be virtualized. For a more complete description see:

        &lt;https://libvirt.org/formatcaps.html&gt;

       The XML also show the NUMA topology information if available.

       If the <b>--xpath</b> argument provides an XPath expression, it will be evaluated against  the  output  XML  and
       only  those  matching  nodes  will  be printed. The default behaviour is to print each matching node as a
       standalone document, however, for ease of additional processing,  the  <b>--wrap</b>  argument  will  cause  the
       matching node to be wrapped in a common root node.

   <b>domcapabilities</b>
       <b>Syntax:</b>

          domcapabilities [virttype] [emulatorbin] [arch] [machine]
                          [--xpath EXPRESSION] [--wrap]
                          [--disable-deprecated-features]

       Print  an  XML  document  describing the domain capabilities for the hypervisor we are connected to using
       information either sourced from an existing domain or taken from the <b>virsh</b> <b>capabilities</b> output. This  may
       be  useful if you intend to create a new domain and are curious if for instance it could make use of VFIO
       by creating a domain for the hypervisor with a specific emulator and architecture.

       Each hypervisor will have different requirements regarding which  options  are  required  and  which  are
       optional. A hypervisor can support providing a default value for any of the options.

       The  <u>virttype</u>  option  specifies  the  virtualization  type used. The value to be used is either from the
       'type' attribute of the &lt;domain/&gt; top level element from the domain XML or  the  'type'  attribute  found
       within  each  &lt;guest/&gt;  element from the <b>virsh</b> <b>capabilities</b> output.  The <u>emulatorbin</u> option specifies the
       path to the emulator. The value to be used is either the &lt;emulator&gt; element in  the  domain  XML  or  the
       <b>virsh</b>  <b>capabilities</b>  output.  The  <u>arch</u>  option specifies the architecture to be used for the domain. The
       value to be used is either the  "arch"  attribute  from  the  domain's  XML  &lt;os/&gt;  element  and  &lt;type/&gt;
       subelement or the "name" attribute of an &lt;arch/&gt; element from the <b>virsh</b> <b>capabililites</b> output. The <u>machine</u>
       specifies  the machine type for the emulator. The value to be used is either the "machine" attribute from
       the domain's XML &lt;os/&gt; element and &lt;type/&gt; subelement or one from a  list  of  machines  from  the  <b>virsh</b>
       <b>capabilities</b> output for a specific architecture and domain type.

       For  the  QEMU  hypervisor,  a  <u>virttype</u> of either 'qemu' or 'kvm' must be supplied along with either the
       <u>emulatorbin</u> or <u>arch</u> in order to generate output for the default <u>machine</u>.  Supplying a <u>machine</u> value  will
       generate output for the specific machine.

       If  the  <b>--xpath</b>  argument  provides an XPath expression, it will be evaluated against the output XML and
       only those matching nodes will be printed. The default behaviour is to print  each  matching  node  as  a
       standalone  document,  however,  for  ease  of  additional processing, the <b>--wrap</b> argument will cause the
       matching node to be wrapped in a common root node.

       The <b>--disable-deprecated-features</b> argument will modify the contents of host-model CPU XML,  updating  the
       features list with any features flagged as deprecated for the CPU model by the hypervisor. These features
       will be paired with the "disable" policy.

   <b>pool-capabilities</b>
       <b>Syntax:</b>

          pool-capabilities

       Print an XML document describing the storage pool capabilities for the connected storage driver. This may
       be  useful  if  you  intend  to  create  a new storage pool and need to know the available pool types and
       supported storage pool source and target volume formats as well as the required source elements to create
       the pool.

   <b>inject-nmi</b>
       <b>Syntax:</b>

          inject-nmi domain

       Inject NMI to the guest.

   <b>list</b>
       <b>Syntax:</b>

          list [--inactive | --all]
               [--managed-save] [--title]
               { [--table] | --name | --id } [--uuid]
               [--persistent] [--transient]
               [--with-managed-save] [--without-managed-save]
               [--autostart] [--no-autostart]
               [--with-snapshot] [--without-snapshot]
               [--with-checkpoint] [--without-checkpoint]
               [--state-running] [--state-paused]
               [--state-shutoff] [--state-other]

       Prints information about existing domains.  If no options are specified it prints out  information  about
       running domains.

       <b>Example</b> <b>1:</b>

       An example format for the list is as follows:

          ``virsh`` list
            Id    Name                           State
          ----------------------------------------------------
            0     Domain-0                       running
            2     fedora                         paused

       Name is the name of the domain.  ID the domain numeric id.  State is the run state (see below).

       <b>STATES</b>

       The  State  field  lists  what state each domain is currently in. A domain can be in one of the following
       possible states:

       • <b>running</b>

         The domain is currently running on a CPU

       • <b>idle</b>

         The domain is idle, and not running or runnable.  This can be caused because the domain is  waiting  on
         IO (a traditional wait state) or has gone to sleep because there was nothing else for it to do.

       • <b>paused</b>

         The domain has been paused, usually occurring through the administrator running <b>virsh</b> <b>suspend</b>.  When in
         a  paused state the domain will still consume allocated resources like memory, but will not be eligible
         for scheduling by the hypervisor.

       • <b>in</b> <b>shutdown</b>

         The domain is in the process of shutting down, i.e. the guest operating system has  been  notified  and
         should be in the process of stopping its operations gracefully.

       • <b>shut</b> <b>off</b>

         The domain is not running.  Usually this indicates the domain has been shut down completely, or has not
         been started.

       • <b>crashed</b>

         The  domain  has  crashed,  which is always a violent ending.  Usually this state can only occur if the
         domain has been configured not to restart on crash.

       • <b>pmsuspended</b>

         The domain has been suspended by guest power management, e.g. entered into s3 state.

       Normally only active domains are listed. To list inactive domains specify <u>--inactive</u>  or  <u>--all</u>  to  list
       both active and inactive domains.

       <b>Filtering</b>

       To  further  filter  the  list of domains you may specify one or more of filtering flags supported by the
       <b>list</b> command. These flags are grouped by function.  Specifying one or more flags from a group enables the
       filter group. Note that some combinations of flags may yield no results. Supported  filtering  flags  and
       groups:

   <b>Persistence</b>
       Flag  <u>--persistent</u> is used to include persistent guests in the returned list. To include transient guests
       specify <u>--transient</u>.

   <b>Existence</b> <b>of</b> <b>managed</b> <b>save</b> <b>image</b>
       To list domains having a managed save image specify flag <u>--with-managed-save</u>. For domains that don't have
       a managed save image specify <u>--without-managed-save</u>.

   <b>Domain</b> <b>state</b>
       The following  filter  flags  select  a  domain  by  its  state:  <u>--state-running</u>  for  running  domains,
       <u>--state-paused</u>   for  paused  domains,  <u>--state-shutoff</u>  for turned off domains and <u>--state-other</u> for all
       other states as a fallback.

   <b>Autostarting</b> <b>domains</b>
       To list autostarting domains use the flag <u>--autostart</u>. To list domains with  this  feature  disabled  use
       <u>--no-autostart</u>.

   <b>Snapshot</b> <b>existence</b>
       Domains  that  have  snapshot images can be listed using flag <u>--with-snapshot</u>, domains without a snapshot
       <u>--without-snapshot</u>.

   <b>Checkpoint</b> <b>existence</b>
       Domains that have checkpoints can be listed using flag <u>--with-checkpoint</u>, domains  without  a  checkpoint
       <u>--without-checkpoint</u>.

       When talking to older servers, this command is forced to use a series of API calls with an inherent race,
       where a domain might not be listed or might appear more than once if it changed state between calls while
       the list was being collected.  Newer servers do not have this problem.

       If  <u>--managed-save</u>  is specified, then domains that have managed save state (only possible if they are in
       the <b>shut</b> <b>off</b> state, so you need to specify <u>--inactive</u> or <u>--all</u> to actually list them) will  instead  show
       as  <b>saved</b>  in the listing. This flag is usable only with the default <u>--table</u> output.  Note that this flag
       does not filter the list of domains.

       If <u>--name</u> is specified, domain names are printed instead of the table formatted one per line.  If  <u>--uuid</u>
       is  specified  domain's  UUID's are printed instead of names. If <u>--id</u> is specified then domain's ID's are
       printed indead of names. However, it is possible to combine  <u>--name</u>,  <u>--uuid</u>  and  <u>--id</u>  to  select  only
       desired  fields  for  printing.  Flag  <u>--table</u> specifies that the legacy table-formatted output should be
       used, but it is mutually exclusive with <u>--name</u>, and <u>--id</u>.  This is  the  default  and  will  be  used  if
       neither  of  <u>--name</u>, <u>--uuid</u> or <u>--id</u> is specified. If neither <u>--name</u> nor <u>--uuid</u> is specified, but <u>--id</u> is,
       then only active domains are listed, even with the <u>--all</u> parameter as otherwise  the  output  would  just
       contain  bunch  of lines with just <u>-1</u>. If <u>--table</u> is combined with <u>--uuid</u>, then domain uuid is printed as
       an extra column.

       If <u>--title</u> is specified, then the short domain description (title) is printed in an  extra  column.  This
       flag is usable only with the default <u>--table</u> output.

       <b>Example</b> <b>2:</b>

          $ virsh list --title
            Id    Name        State      Title
           -------------------------------------------
            0     Domain-0    running    Mailserver 1
            2     fedora      paused

   <b>freecell</b>
       <b>Syntax:</b>

          freecell [{ [--cellno] cellno | --all }]

       Prints  the  available  amount  of memory on the machine or within a NUMA cell.  The freecell command can
       provide one of three different displays of available memory on  the  machine  depending  on  the  options
       specified.  With no options, it displays the total free memory on the machine.  With the --all option, it
       displays  the free memory in each cell and the total free memory on the machine.  Finally, with a numeric
       argument or with --cellno plus a cell number it will display the free memory for the specified cell only.

   <b>freepages</b>
       <b>Syntax:</b>

          freepages [{ [--cellno] cellno [--pagesize] pagesize |     --all }]

       Prints the available amount of pages within a NUMA cell. <u>cellno</u> refers to the NUMA cell you're interested
       in. <u>pagesize</u> is a scaled integer (see <b>NOTES</b> above).  Alternatively,  if  <u>--all</u>  is  used,  info  on  each
       possible combination of NUMA cell and page size is printed out.

   <b>allocpages</b>
       <b>Syntax:</b>

          allocpages [--pagesize] pagesize [--pagecount] pagecount [[--cellno] cellno] [--add] [--all]

       Change  the  size  of pages pool of <u>pagesize</u> on the host. If <u>--add</u> is specified, then <u>pagecount</u> pages are
       added into the pool. However, if <u>--add</u> wasn't specified, then the <u>pagecount</u> is taken as the new  absolute
       size of the pool (this may be used to free some pages and size the pool down). The <u>cellno</u> modifier can be
       used  to narrow the modification down to a single host NUMA cell. On the other end of spectrum lies <u>--all</u>
       which executes the modification on all NUMA cells.

   <b>cpu-baseline</b>
       <b>Syntax:</b>

          cpu-baseline FILE [--features] [--migratable]

       Compute  baseline  CPU  which  will  be  supported  by   all   host   CPUs   given   in   &lt;file&gt;.    (See
       <b>hypervisor-cpu-baseline</b> command to get a CPU which can be provided by a specific hypervisor.) The list of
       host  CPUs is built by extracting all &lt;cpu&gt; elements from the &lt;file&gt;. Thus, the &lt;file&gt; can contain either
       a set of &lt;cpu&gt; elements separated by new lines or even a set of complete &lt;capabilities&gt; elements  printed
       by  <b>capabilities</b> command.  If <u>--features</u> is specified, then the resulting XML description will explicitly
       include all features that make up the CPU, without this option features that are part of  the  CPU  model
       will  not be listed in the XML description.   If <u>--migratable</u> is specified, features that block migration
       will not be included in the resulting CPU.

   <b>cpu-compare</b>
       <b>Syntax:</b>

          cpu-compare FILE [--error] [--validate]

       Compare CPU definition from XML &lt;file&gt; with host CPU. (See <b>hypervisor-cpu-compare</b> command  for  comparing
       the  CPU  definition  with  the  CPU which a specific hypervisor is able to provide on the host.) The XML
       &lt;file&gt; may contain either host or guest CPU definition. The host CPU definition is the &lt;cpu&gt; element  and
       its  contents  as  printed by <b>capabilities</b> command. The guest CPU definition is the &lt;cpu&gt; element and its
       contents from domain XML definition or the CPU definition created from the host CPU model found in domain
       capabilities XML (printed by <b>domcapabilities</b> command). In addition to  the  &lt;cpu&gt;  element  itself,  this
       command  accepts  full  domain  XML,  capabilities  XML,  or  domain  capabilities XML containing the CPU
       definition.      For      more      information      on       guest       CPU       definition       see:
       https://libvirt.org/formatdomain.html#elementsCPU   &lt;https://libvirt.org/formatdomain.html#cpu-model-and-
       topology&gt; . If <u>--error</u> is specified, the command will return an error when the given CPU is  incompatible
       with  host  CPU  and  a  message providing more details about the incompatibility will be printed out. If
       <u>--validate</u> is specified, validates the format of the XML document against an internal RNG schema.

   <b>cpu-models</b>
       <b>Syntax:</b>

          cpu-models arch

       Print the list of CPU models known by  libvirt  for  the  specified  architecture.   Whether  a  specific
       hypervisor  is  able  to  create a domain which uses any of the printed CPU models is a separate question
       which can be answered by looking at the domain capabilities  XML  returned  by  <b>domcapabilities</b>  command.
       Moreover,  for some architectures libvirt does not know any CPU models and the usable CPU models are only
       limited by the hypervisor.  This  command  will  print  that  all  CPU  models  are  accepted  for  these
       architectures and the actual list of supported CPU models can be checked in the domain capabilities XML.

   <b>hypervisor-cpu-compare</b>
       <b>Syntax:</b>

          hypervisor-cpu-compare FILE [virttype] [emulator] [arch] [machine] [--error] [--validate]

       Compare  CPU definition from XML &lt;file&gt; with the CPU the hypervisor is able to provide on the host. (This
       is different from <b>cpu-compare</b> which compares the CPU definition with the host CPU without considering any
       specific hypervisor and its abilities.)

       The XML <u>FILE</u> may contain either a host or guest CPU definition. The host  CPU  definition  is  the  &lt;cpu&gt;
       element  and  its  contents as printed by the <b>capabilities</b> command. The guest CPU definition is the &lt;cpu&gt;
       element and its contents from the domain XML definition or the CPU definition created from the  host  CPU
       model  found  in the domain capabilities XML (printed by the <b>domcapabilities</b> command). In addition to the
       &lt;cpu&gt; element itself, this command accepts full domain XML, capabilities XML, or domain capabilities  XML
       containing    the    CPU    definition.   For   more   information   on   guest   CPU   definition   see:
       https://libvirt.org/formatdomain.html#elementsCPU   &lt;https://libvirt.org/formatdomain.html#cpu-model-and-
       topology&gt; .

       The <u>virttype</u> option specifies the virtualization type (usable in the 'type' attribute of the &lt;domain&gt; top
       level  element  from the domain XML). <u>emulator</u> specifies the path to the emulator, <u>arch</u> specifies the CPU
       architecture, and <u>machine</u> specifies the machine type. If <u>--error</u> is specified, the command will return an
       error when the given CPU is incompatible with the host CPU and a message providing more details about the
       incompatibility will be printed out.  If <u>--validate</u>  is  specified,  validates  the  format  of  the  XML
       document against an internal RNG schema.

   <b>hypervisor-cpu-baseline</b>
       <b>Syntax:</b>

          hypervisor-cpu-baseline [FILE] [virttype] [emulator] [arch] [machine]
             [--features] [--migratable] [model]

       Compute a baseline CPU which will be compatible with all CPUs defined in an XML <u>file</u> and with the CPU the
       hypervisor  is  able to provide on the host. (This is different from <b>cpu-baseline</b> which does not consider
       any hypervisor abilities when computing the baseline CPU.)

       As an alternative for <u>FILE</u> in case the XML would only contain a CPU model with no additional features the
       CPU model name itself can be passed as <u>model</u>.  Exactly one of <u>FILE</u> and <u>model</u> must be used.

       The XML <u>FILE</u> may contain either host or guest CPU definitions describing the host CPU model. The host CPU
       definition is the &lt;cpu&gt; element and its contents as  printed  by  <b>capabilities</b>  command.  The  guest  CPU
       definition  may  be  created  from  the  host  CPU  model  found  in  domain capabilities XML (printed by
       <b>domcapabilities</b> command). In addition to the &lt;cpu&gt; elements, this command accepts full capabilities XMLs,
       or domain capabilities XMLs containing the CPU definitions.  It  is  recommended  to  use  only  the  CPU
       definitions  from  domain capabilities, as on some architectures using the host CPU definition may either
       fail or provide unexpected results.

       When <u>FILE</u> contains only a single CPU definition, the command will print the same  CPU  with  restrictions
       imposed  by  the capabilities of the hypervisor.  Specifically, running the <b>virsh</b> <b>hypervisor-cpu-baseline</b>
       command with no additional options on the result of <b>virsh</b> <b>domcapabilities</b> will  transform  the  host  CPU
       model  from  domain  capabilities  XML  to a form directly usable in domain XML. Running the command with
       <u>model</u> (or <u>FILE</u> containing just a single CPU definition with model  and  no  feature  elements)  which  is
       marked  as  unusable  in  <b>virsh</b> <b>domcapabilities</b> will provide a list of features that block this CPU model
       from being usable.

       The <u>virttype</u> option specifies the virtualization type (usable in the 'type' attribute of the &lt;domain&gt; top
       level element from the domain XML). <u>emulator</u> specifies the path to the emulator, <u>arch</u> specifies  the  CPU
       architecture,  and <u>machine</u> specifies the machine type. If <u>--features</u> is specified, then the resulting XML
       description will explicitly include all features that make up the CPU, without this option features  that
       are  part  of  the  CPU  model  will  not be listed in the XML description. If <u>--migratable</u> is specified,
       features that block migration will not be included in the resulting CPU.

</pre><h4><b>DOMAIN</b> <b>COMMANDS</b></h4><pre>
       The following commands manipulate domains directly, as stated previously most commands take domain as the
       first parameter. The <u>domain</u> can be specified as a short integer, a name or a full UUID.

   <b>autostart</b>
       <b>Syntax:</b>

          autostart [--disable] domain

       Configure a domain to be automatically started at boot.

       The option <u>--disable</u> disables autostarting.

   <b>blkdeviotune</b>
       <b>Syntax:</b>

          blkdeviotune domain device [[--config] [--live] | [--current]]
             [[total-bytes-sec] | [read-bytes-sec] [write-bytes-sec]]
             [[total-iops-sec] | [read-iops-sec] [write-iops-sec]]
             [[total-bytes-sec-max] | [read-bytes-sec-max] [write-bytes-sec-max]]
             [[total-iops-sec-max] | [read-iops-sec-max] [write-iops-sec-max]]
             [[total-bytes-sec-max-length] |
              [read-bytes-sec-max-length] [write-bytes-sec-max-length]]
             [[total-iops-sec-max-length] |
              [read-iops-sec-max-length] [write-iops-sec-max-length]]
             [size-iops-sec] [group-name]

       Set or query the block disk io parameters for a block device of <u>domain</u>.  <u>device</u> specifies a unique target
       name (&lt;target dev='name'/&gt;) or source file (&lt;source file='name'/&gt;) for one of the disk  devices  attached
       to <u>domain</u> (see also <b>domblklist</b> for listing these names).

       If  no  limit  is  specified, it will query current I/O limits setting.  Otherwise, alter the limits with
       these flags: <u>--total-bytes-sec</u> specifies total throughput limit as a scaled integer,  the  default  being
       bytes per second if no suffix is specified.  <u>--read-bytes-sec</u> specifies read throughput limit as a scaled
       integer, the default being bytes per second if no suffix is specified.  <u>--write-bytes-sec</u> specifies write
       throughput  limit  as  a  scaled  integer,  the default being bytes per second if no suffix is specified.
       <u>--total-iops-sec</u> specifies total I/O operations limit per second.   <u>--read-iops-sec</u>  specifies  read  I/O
       operations  limit  per  second.   <u>--write-iops-sec</u>  specifies  write  I/O  operations  limit  per second.
       <u>--total-bytes-sec-max</u> specifies maximum total throughput limit as a scaled  integer,  the  default  being
       bytes  per  second if no suffix is specified <u>--read-bytes-sec-max</u> specifies maximum read throughput limit
       as a scaled integer, the default being bytes per second if no suffix is specified.  <u>--write-bytes-sec-max</u>
       specifies maximum write throughput limit as a scaled integer, the default being bytes per  second  if  no
       suffix  is  specified.   <u>--total-iops-sec-max</u>  specifies  maximum  total I/O operations limit per second.
       <u>--read-iops-sec-max</u> specifies  maximum  read  I/O  operations  limit  per  second.   <u>--write-iops-sec-max</u>
       specifies maximum write I/O operations limit per second.  <u>--total-bytes-sec-max-length</u> specifies duration
       in  seconds  to  allow maximum total throughput limit.  <u>--read-bytes-sec-max-length</u> specifies duration in
       seconds to allow maximum read  throughput  limit.   <u>--write-bytes-sec-max-length</u>  specifies  duration  in
       seconds  to  allow  maximum  write  throughput  limit.  <u>--total-iops-sec-max-length</u> specifies duration in
       seconds to allow maximum total I/O operations limit.  <u>--read-iops-sec-max-length</u>  specifies  duration  in
       seconds  to  allow  maximum read I/O operations limit.  <u>--write-iops-sec-max-length</u> specifies duration in
       seconds to allow maximum write I/O operations limit.  <u>--size-iops-sec</u> specifies size I/O operations limit
       per second.  <u>--group-name</u> specifies group name to share I/O quota between multiple drives.   For  a  QEMU
       domain, if no name is provided, then the default is to have a single group for each <u>device</u>.

       Older   versions  of  virsh  only  accepted  these  options  with  underscore  instead  of  dash,  as  in
       <u>--total_bytes_sec</u>.

       Bytes and iops values are independent, but setting only one value (such as --read-bytes-sec)  resets  the
       other  two  in  that category to unlimited.  An explicit 0 also clears any limit.  A non-zero value for a
       given total cannot be mixed with non-zero values for read or write.

       It is up to the hypervisor to determine how to handle the length values.  For the QEMU hypervisor, if  an
       I/O  limit value or maximum value is set, then the default value of 1 second will be displayed. Supplying
       a 0 will reset the value back to the default.

       If <u>--live</u> is specified, affect a running guest.  If <u>--config</u> is specified, affect the  next  start  of  a
       persistent guest.  If <u>--current</u> is specified, it is equivalent to either <u>--live</u> or <u>--config</u>, depending on
       the  current  state of the guest.  When setting the disk io parameters both <u>--live</u> and <u>--config</u> flags may
       be given, but <u>--current</u> is exclusive. For querying only one of  <u>--live</u>,  <u>--config</u>  or  <u>--current</u>  can  be
       specified. If no flag is specified, behavior is different depending on hypervisor.

   <b>blkiotune</b>
       <b>Syntax:</b>

          blkiotune domain [--weight weight] [--device-weights device-weights]
             [--device-read-iops-sec device-read-iops-sec]
             [--device-write-iops-sec device-write-iops-sec]
             [--device-read-bytes-sec device-read-bytes-sec]
             [--device-write-bytes-sec device-write-bytes-sec]
             [[--config] [--live] | [--current]]

       Display or set the blkio parameters. QEMU/KVM supports <u>--weight</u>.  <u>--weight</u> is in range [100, 1000]. After
       kernel 2.6.39, the value could be in the range [10, 1000].

       <b>device-weights</b>  is  a  single  string  listing  one  or  more  device/weight  pairs,  in  the  format  of
       /path/to/device,weight,/path/to/device,weight.  Each weight is in the range [100, 1000], [10, 1000] after
       kernel 2.6.39, or the value 0 to remove that device from per-device listings.  Only the devices listed in
       the string are modified; any existing per-device weights for other devices remain unchanged.

       <b>device-read-iops-sec</b> is a single string listing one or more device/read_iops_sec pairs, int the format of
       /path/to/device,read_iops_sec,/path/to/device,read_iops_sec.  Each read_iops_sec is a number  which  type
       is  unsigned  int, value 0 to remove that device from per-device listing.  Only the devices listed in the
       string are modified; any existing per-device read_iops_sec for other devices remain unchanged.

       <b>device-write-iops-sec</b> is a single string listing one or more device/write_iops_sec pairs, int the  format
       of  /path/to/device,write_iops_sec,/path/to/device,write_iops_sec.  Each write_iops_sec is a number which
       type is unsigned int, value 0 to remove that device from per-device listing.  Only the devices listed  in
       the string are modified; any existing per-device write_iops_sec for other devices remain unchanged.

       <b>device-read-bytes-sec</b>  is a single string listing one or more device/read_bytes_sec pairs, int the format
       of /path/to/device,read_bytes_sec,/path/to/device,read_bytes_sec.  Each read_bytes_sec is a number  which
       type  is  unsigned  long  long,  value 0 to remove that device from per-device listing.  Only the devices
       listed in the string are modified; any  existing  per-device  read_bytes_sec  for  other  devices  remain
       unchanged.

       <b>device-write-bytes-sec</b>  is  a  single  string  listing  one or more device/write_bytes_sec pairs, int the
       format of /path/to/device,write_bytes_sec,/path/to/device,write_bytes_sec.   Each  write_bytes_sec  is  a
       number which type is unsigned long long, value 0 to remove that device from per-device listing.  Only the
       devices  listed  in  the  string  are modified; any existing per-device write_bytes_sec for other devices
       remain unchanged.

       If <u>--live</u> is specified, affect a running guest.  If <u>--config</u> is specified, affect the  next  start  of  a
       persistent guest.  If <u>--current</u> is specified, it is equivalent to either <u>--live</u> or <u>--config</u>, depending on
       the current state of the guest.  Both <u>--live</u> and <u>--config</u> flags may be given, but <u>--current</u> is exclusive.
       If no flag is specified, behavior is different depending on hypervisor.

   <b>blockcommit</b>
       <b>Syntax:</b>

          blockcommit domain path [bandwidth] [--bytes] [base]
             [--shallow] [top] [--delete] [--keep-relative]
             [--wait [--async] [--verbose]] [--timeout seconds]
             [--active] [{--pivot | --keep-overlay}]

       Reduce  the  length  of a backing image chain, by committing changes at the top of the chain (snapshot or
       delta files) into backing images.  By default, this command attempts to flatten  the  entire  chain.   If
       <u>base</u>  and/or  <u>top</u>  are  specified as files within the backing chain, then the operation is constrained to
       committing just that portion of the chain; <u>--shallow</u> can be used instead of <u>base</u> to specify the immediate
       backing file of the resulting top image to be committed.  The files being committed are rendered invalid,
       possibly as soon as the  operation  starts;  using  the  <u>--delete</u>  flag  will  attempt  to  remove  these
       invalidated  files at the successful completion of the commit operation. When the <u>--keep-relative</u> flag is
       used, the backing file paths will be kept relative.

       When <u>top</u> is omitted or specified as the active image, it is also possible to specify <u>--active</u> to  trigger
       a  two-phase active commit. In the first phase, <u>top</u> is copied into <u>base</u> and the job can only be canceled,
       with top still containing data not yet in base. In the second phase, <u>top</u> and <u>base</u> remain identical  until
       a  call  to <b>blockjob</b> with the <u>--abort</u> flag (keeping top as the active image that tracks changes from that
       point in time) or the <u>--pivot</u> flag (making base the new active image and invalidating top).

       By default, this command returns as soon as possible, and data for the entire disk is  committed  in  the
       background; the progress of the operation can be checked with <b>blockjob</b>.  However, if <u>--wait</u> is specified,
       then this command will block until the operation completes (or for <u>--active</u>, enters the second phase), or
       until  the  operation  is  canceled  because  the  optional  <u>timeout</u> in seconds elapses or SIGINT is sent
       (usually with <b>Ctrl-C</b>).  Using <u>--verbose</u> along with <u>--wait</u> will produce periodic status updates.   If  job
       cancellation  is  triggered,  <u>--async</u>  will return control to the user as fast as possible, otherwise the
       command may continue to block a little while longer until the job is done cleaning up.  Using <u>--pivot</u>  is
       shorthand  for  combining <u>--active</u> <u>--wait</u> with an automatic <b>blockjob</b> <u>--pivot</u>; and using <u>--keep-overlay</u> is
       shorthand for combining <u>--active</u> <u>--wait</u> with an automatic <b>blockjob</b> <u>--abort</u>.

       <u>path</u> specifies fully-qualified path of the  disk;  it  corresponds  to  a  unique  target  name  (&lt;target
       dev='name'/&gt;)  or source file (&lt;source file='name'/&gt;) for one of the disk devices attached to <u>domain</u> (see
       also <b>domblklist</b> for listing these names).  <u>bandwidth</u> specifies copying bandwidth limit in MiB/s, although
       for QEMU, it may be non-zero only for an online domain. For further information on the <u>bandwidth</u> argument
       see the corresponding section for the <b>blockjob</b> command.

   <b>blockcopy</b>
       <b>Syntax:</b>

          blockcopy domain path { dest [format] [--blockdev] | --xml file }
             [--shallow] [--reuse-external] [bandwidth]
             [--wait [--async] [--verbose]] [{--pivot | --finish}]
             [--timeout seconds] [granularity] [buf-size] [--bytes]
             [--transient-job] [--synchronous-writes] [--print-xml]

       Copy a disk backing image chain to a destination.  Either <u>dest</u> as the destination  file  name,  or  <u>--xml</u>
       with  the  name  of an XML file containing a top-level &lt;disk&gt; element describing the destination, must be
       present.  Additionally, if <u>dest</u> is given, <u>format</u> should  be  specified  to  declare  the  format  of  the
       destination  (if  <u>format</u>  is  omitted,  then  libvirt  will  reuse  the  format  of  the  source, or with
       <u>--reuse-external</u> will be forced to probe the destination format, which  could  be  a  potential  security
       hole).   The  command  supports  <u>--raw</u>  as a boolean flag synonym for <u>--format=raw</u>.  When using <u>dest</u>, the
       destination is treated as a regular file unless <u>--blockdev</u> is used to signal that it is a  block  device.
       By  default,  this  command flattens the entire chain; but if <u>--shallow</u> is specified, the copy shares the
       backing chain.

       If <u>--reuse-external</u> is specified, then the destination must exist and have sufficient space to  hold  the
       copy.  If  <u>--shallow</u>  is  used  in conjunction with <u>--reuse-external</u> then the pre-created image must have
       guest visible contents identical to guest visible contents of the backing file  of  the  original  image.
       This may be used to modify the backing file names on the destination.

       By  default,  the  copy  job runs in the background, and consists of two phases.  Initially, the job must
       copy all data from the source, and during this phase, the job can only be canceled to revert back to  the
       source  disk,  with no guarantees about the destination.  After this phase completes, both the source and
       the destination remain mirrored until a call to <b>blockjob</b> with the <u>--abort</u> and <u>--pivot</u> flags  pivots  over
       to  the  copy, or a call without <u>--pivot</u> leaves the destination as a faithful copy of that point in time.
       However, if <u>--wait</u> is specified, then this command will block until the mirroring phase begins, or cancel
       the operation if the optional <u>timeout</u> in seconds elapses or SIGINT is sent (usually with <b>Ctrl-C</b>).   Using
       <u>--verbose</u>  along  with  <u>--wait</u>  will produce periodic status updates.  Using <u>--pivot</u> (similar to <b>blockjob</b>
       <u>--pivot</u>) or <u>--finish</u> (similar to <b>blockjob</b> <u>--abort</u>) implies <u>--wait</u>, and  will  additionally  end  the  job
       cleanly  rather  than leaving things in the mirroring phase.  If job cancellation is triggered by timeout
       or by <u>--finish</u>, <u>--async</u> will return control to the user as fast as possible, otherwise  the  command  may
       continue to block a little while longer until the job has actually cancelled.

       <u>path</u>  specifies  fully-qualified path of the disk.  <u>bandwidth</u> specifies copying bandwidth limit in MiB/s.
       Specifying a negative value is interpreted as an unsigned long  long  value  that  might  be  essentially
       unlimited, but more likely would overflow; it is safer to use 0 for that purpose. For further information
       on the <u>bandwidth</u> argument see the corresponding section for the <b>blockjob</b> command.  Specifying <u>granularity</u>
       allows  fine-tuning of the granularity that will be copied when a dirty region is detected; larger values
       trigger less I/O overhead but may end up  copying  more  data  overall  (the  default  value  is  usually
       correct);  hypervisors  may restrict this to be a power of two or fall within a certain range. Specifying
       <u>buf-size</u> will control how much data can be simultaneously in-flight during the copy;  larger  values  use
       more memory but may allow faster completion (the default value is usually correct).

       <u>--transient-job</u>  allows  specifying  that  the  user  does  not require the job to be recovered if the VM
       crashes or is turned off before the job completes. This flag removes the  restriction  of  copy  jobs  to
       transient domains if that restriction is applied by the hypervisor.

       If  <u>--synchronous-writes</u>  is  specified the block job will wait for guest writes to be propagated both to
       the original image and to the destination of the copy so that it's guaranteed that the job  converges  if
       the destination storage is slower. This may impact performance of writes while the blockjob is running.

       If <u>--print-xml</u> is specified, then the XML used to start the block copy job is printed instead of starting
       the job.

   <b>blockjob</b>
       <b>Syntax:</b>

          blockjob domain path { [--abort] [--async] [--pivot] |
             [--info] [--raw] [--bytes] | [bandwidth] }

       Manage  active  block  operations.   There  are  three  mutually-exclusive  modes: <u>--info</u>, <u>bandwidth</u>, and
       <u>--abort</u>.  <u>--async</u> and <u>--pivot</u> imply abort mode; <u>--raw</u> implies info mode; and if no mode was given, <u>--info</u>
       mode is assumed.

       <u>path</u> specifies fully-qualified path of the  disk;  it  corresponds  to  a  unique  target  name  (&lt;target
       dev='name'/&gt;)  or source file (&lt;source file='name'/&gt;) for one of the disk devices attached to <u>domain</u> (see
       also <b>domblklist</b> for listing these names).

       In <u>--abort</u> mode, the active job on the specified disk will be aborted.  If  <u>--async</u>  is  also  specified,
       this  command  will return immediately, rather than waiting for the cancellation to complete.  If <u>--pivot</u>
       is specified, this requests that an active copy or active commit job be pivoted over to the new image.

       In <u>--info</u> mode, the active job information on the specified disk will be printed.  By default, the output
       is a single human-readable summary line; this format may change in future versions.  Adding  <u>--raw</u>  lists
       each field of the struct, in a stable format.  If the <u>--bytes</u> flag is set, then the command errors out if
       the server could not supply bytes/s resolution; when omitting the flag, raw output is listed in MiB/s and
       human-readable output automatically selects the best resolution supported by the server.

       <u>bandwidth</u>  can  be used to set bandwidth limit for the active job in MiB/s.  If <u>--bytes</u> is specified then
       the bandwidth value is interpreted in bytes/s. Specifying a negative value is interpreted as an  unsigned
       long  value or essentially unlimited. The hypervisor can choose whether to reject the value or convert it
       to the maximum value allowed. Optionally a scaled positive number may be used  as  bandwidth  (see  <b>NOTES</b>
       above).  Using  <u>--bytes</u>  with  a scaled value permits a finer granularity to be selected.  A scaled value
       used without <u>--bytes</u> will be rounded down to MiB/s. Note that the  <u>--bytes</u>  may  be  unsupported  by  the
       hypervisor.

       Note  that  the progress reported for blockjobs corresponding to a pull-mode backup don't report progress
       of the backup but rather usage of temporary space required for the backup.

   <b>blockpull</b>
       <b>Syntax:</b>

          blockpull domain path [bandwidth] [--bytes] [base]
             [--wait [--verbose] [--timeout seconds] [--async]]
             [--keep-relative]

       Populate a disk from its backing image chain. By default, this command flattens the entire chain; but  if
       <u>base</u>  is  specified, containing the name of one of the backing files in the chain, then that file becomes
       the new backing file and only the intermediate portion of the chain is pulled.  Once all  requested  data
       from  the  backing image chain has been pulled, the disk no longer depends on that portion of the backing
       chain.

       By default, this command returns as soon as possible, and data for the  entire  disk  is  pulled  in  the
       background; the progress of the operation can be checked with <b>blockjob</b>.  However, if <u>--wait</u> is specified,
       then  this  command  will  block  until  the operation completes, or cancel the operation if the optional
       <u>timeout</u> in seconds elapses or SIGINT is sent (usually with <b>Ctrl-C</b>).  Using <u>--verbose</u>  along  with  <u>--wait</u>
       will  produce  periodic status updates.  If job cancellation is triggered, <u>--async</u> will return control to
       the user as fast as possible, otherwise the command may continue to block a little while longer until the
       job is done cleaning up.

       Using the <u>--keep-relative</u> flag will keep the backing chain names relative.

       <u>path</u> specifies fully-qualified path of the  disk;  it  corresponds  to  a  unique  target  name  (&lt;target
       dev='name'/&gt;)  or source file (&lt;source file='name'/&gt;) for one of the disk devices attached to <u>domain</u> (see
       also <b>domblklist</b> for listing these names).  <u>bandwidth</u> specifies copying  bandwidth  limit  in  MiB/s.  For
       further information on the <u>bandwidth</u> argument see the corresponding section for the <b>blockjob</b> command.

   <b>blockresize</b>
       <b>Syntax:</b>

          blockresize domain path ([size] | [--capacity])

       Resize  a  block  device  of  domain while the domain is running, <u>path</u> specifies the absolute path of the
       block device; it corresponds to a unique target name  (&lt;target  dev='name'/&gt;)  or  source  file  (&lt;source
       file='name'/&gt;)  for  one  of  the  disk devices attached to <u>domain</u> (see also <b>domblklist</b> for listing these
       names).

       For image formats without metadata (raw) stored inside  fixed-size  storage  (e.g.   block  devices)  the
       --capacity flag can be used to resize the device to the full size of the backing device.

       <u>size</u>  is  a  scaled integer (see <b>NOTES</b> above) which defaults to KiB (blocks of 1024 bytes) if there is no
       suffix.  You must use a suffix of "B" to get bytes (note that for historical reasons, this  differs  from
       <b>vol-resize</b> which defaults to bytes without a suffix).

   <b>console</b>
       <b>Syntax:</b>

          console domain [devname] [--safe] [--force] [--resume]

       Connect  the  virtual  serial  console for the guest. The optional <u>devname</u> parameter refers to the device
       alias of an alternate console, serial or parallel device configured  for  the  guest.   If  omitted,  the
       primary console will be opened.

       If  the  flag  <u>--safe</u>  is specified, the connection is only attempted if the driver supports safe console
       handling. This flag specifies that the  server  has  to  ensure  exclusive  access  to  console  devices.
       Optionally  the <u>--force</u> flag may be specified, requesting to disconnect any existing sessions, such as in
       a case of a broken connection.

       If the flag <u>--resume</u> is specified then the guest is resumed after connecting to the console.

   <b>cpu-stats</b>
       <b>Syntax:</b>

          cpu-stats domain [--total] [start] [count]

       Provide cpu statistics information of a domain. The domain should be running. Default it shows stats  for
       all CPUs, and a total. Use <u>--total</u> for only the total stats, <u>start</u> for only the per-cpu stats of the CPUs
       from <u>start</u>, <u>count</u> for only <u>count</u> CPUs' stats.

   <b>create</b>
       <b>Syntax:</b>

          create FILE [--console] [--paused] [--autodestroy]
             [--pass-fds N,M,...] [--validate] [--reset-nvram]

       Create a domain from an XML &lt;file&gt;. Optionally, <u>--validate</u> option can be passed to validate the format of
       the input XML file against an internal RNG schema (identical to using <a href="../man1/virt-xml-validate.1.html">virt-xml-validate</a>(1) tool). Domains
       created  using  this  command  are  going  to  be  either transient (temporary ones that will vanish once
       destroyed) or existing persistent guests that will run  with  one-time  use  configuration,  leaving  the
       persistent  XML  untouched (this can come handy during an automated testing of various configurations all
       based on the original XML).  See the example below for usage demonstration.

       The domain will be paused if the <u>--paused</u> option is used and supported by the driver; otherwise  it  will
       be  running.  If  <u>--console</u>  is  requested,  attach  to  the console after creation.  If <u>--autodestroy</u> is
       requested, then the guest will be automatically destroyed when virsh closes its connection to libvirt, or
       otherwise exits.

       If <u>--pass-fds</u> is specified, the argument is a comma separated list of open file descriptors which  should
       be  pass  on into the guest. The file descriptors will be re-numbered in the guest, starting from 3. This
       is only supported with container based virtualization.

       If <u>--reset-nvram</u> is specified, any existing NVRAM file  will  be  deleted  and  re-initialized  from  its
       pristine template.

       <b>Example:</b>

       1. prepare a template from an existing domain (skip directly to 3a if writing one from scratch)

             # virsh dumpxml &lt;domain&gt; &gt; domain.xml

       2. edit the template using an editor of your choice and:

          a. DO CHANGE! &lt;name&gt; and &lt;uuid&gt; (&lt;uuid&gt; can also be removed), or

          b. DON'T CHANGE! either &lt;name&gt; or &lt;uuid&gt;

             # $EDITOR domain.xml

       3. create a domain from domain.xml, depending on whether following 2a or 2b respectively:

          a. the domain is going to be transient

          b. an existing persistent guest will run with a modified one-time configuration

             # virsh create domain.xml

   <b>define</b>
       <b>Syntax:</b>

          define FILE [--validate]

       Define a domain from an XML &lt;file&gt;. Optionally, the format of the input XML file can be validated against
       an  internal  RNG  schema  with  <u>--validate</u>  (identical  to  using <a href="../man1/virt-xml-validate.1.html">virt-xml-validate</a>(1) tool). The domain
       definition is registered but not started.  If domain is already running, the changes will take effect  on
       the next boot.

   <b>desc</b>
       <b>Syntax:</b>

          desc domain [[--live] [--config] |
             [--current]] [--title] [--edit] [--new-desc
             New description or title message]

       Show  or  modify  description  and  title  of  a  domain. These values are user fields that allow storing
       arbitrary textual data to allow easy identification of domains. Title should be short, although it's  not
       enforced.  (See also <b>metadata</b> that works with XML based domain metadata.)

       Flags  <u>--live</u>  or  <u>--config</u>  select  whether  this command works on live or persistent definitions of the
       domain. If both <u>--live</u> and <u>--config</u> are specified, the <u>--config</u> option takes precedence  on  getting  the
       current  description  and  both  live configuration and config are updated while setting the description.
       <u>--current</u> is exclusive and implied if none of these was specified.

       Flag <u>--edit</u> specifies that an editor with the contents of current description or title should  be  opened
       and the contents saved back afterwards.

       Flag <u>--title</u> selects operation on the title field instead of description.

       If  neither  of <u>--edit</u> and <u>--new-desc</u> are specified the note or description is displayed instead of being
       modified.

   <b>destroy</b>
       <b>Syntax:</b>

          destroy domain [--graceful] [--remove-logs]

       Immediately terminate the domain <u>domain</u>.  This doesn't give the domain OS any chance to react,  and  it's
       the  equivalent  of ripping the power cord out on a physical machine.  In most cases you will want to use
       the <b>shutdown</b> command instead.  However, this does not delete any storage volumes used by the  guest,  and
       if the domain is persistent, it can be restarted later.

       If <u>domain</u> is transient, then the metadata of any snapshots will be lost once the guest stops running, but
       the  snapshot contents still exist, and a new domain with the same name and UUID can restore the snapshot
       metadata with <b>snapshot-create</b>.  Similarly, the metadata of any checkpoints  will  be  lost,  but  can  be
       restored with <b>checkpoint-create</b>.

       If  <u>--graceful</u>  is specified, don't resort to extreme measures (e.g. SIGKILL) when the guest doesn't stop
       after a reasonable timeout; return an error instead.

       If <u>--remove-logs</u> is specified, remove per <u>domain</u> log files.  Not  all  deployment  configuration  can  be
       supported.

       In  case  of  QEMU the flag is only supported if virlogd is used to handle QEMU process output. Otherwise
       the flag is ignored.

   <b>domblkerror</b>
       <b>Syntax:</b>

          domblkerror domain

       Show errors on block devices.  This command usually comes handy when <b>domstate</b> command says that a  domain
       was  paused  due  to  I/O  error.  The <b>domblkerror</b> command lists all block devices in error state and the
       error seen on each of them.

   <b>domblkinfo</b>
       <b>Syntax:</b>

          domblkinfo domain [block-device --all] [--human]

       Get block device size info for a domain.  A <u>block-device</u> corresponds to a  unique  target  name  (&lt;target
       dev='name'/&gt;)  or source file (&lt;source file='name'/&gt;) for one of the disk devices attached to <u>domain</u> (see
       also <b>domblklist</b> for listing these names). If <u>--human</u> is set,  the  output  will  have  a  human  readable
       output.   If <u>--all</u> is set, the output will be a table showing all block devices size info associated with
       <u>domain</u>.  The <u>--all</u> option takes precedence of the others.

   <b>domblklist</b>
       <b>Syntax:</b>

          domblklist domain [--inactive] [--details]

       Print a table showing the brief information of all block devices associated with <u>domain</u>. If <u>--inactive</u> is
       specified, query the block devices that will be used on the next boot, rather than those currently in use
       by a running domain. If <u>--details</u> is specified, disk type and device value will also  be  printed.  Other
       contexts that require a block device name (such as <u>domblkinfo</u> or <u>snapshot-create</u> for disk snapshots) will
       accept either target or unique source names printed by this command.

   <b>domblkstat</b>
       <b>Syntax:</b>

          domblkstat domain [block-device] [--human]

       Get device block stats for a running domain.  A <u>block-device</u> corresponds to a unique target name (&lt;target
       dev='name'/&gt;)  or source file (&lt;source file='name'/&gt;) for one of the disk devices attached to <u>domain</u> (see
       also <b>domblklist</b> for listing these names). On a LXC or  QEMU  domain,  omitting  the  <u>block-device</u>  yields
       device block stats summarily for the entire domain.

       Use <u>--human</u> for a more human readable output.

       Availability of these fields depends on hypervisor. Unsupported fields are missing from the output. Other
       fields may appear if communicating with a newer version of libvirtd.

       Explanation of fields (fields appear in the following order):

       • rd_req            - count of read operations

       • rd_bytes          - count of read bytes

       • wr_req            - count of write operations

       • wr_bytes          - count of written bytes

       • errs              - error count

       • flush_operations  - count of flush operations

       • rd_total_times    - total time read operations took (ns)

       • wr_total_times    - total time write operations took (ns)

       • flush_total_times - total time flush operations took (ns)

       • &lt;-- other fields provided by hypervisor --&gt;

   <b>domblkthreshold</b>
       <b>Syntax:</b>

          domblkthreshold domain dev threshold

       Set the threshold value for delivering the block-threshold event. <u>dev</u> specifies the disk device target or
       backing  chain  element  of given device using the 'target[1]' syntax. <u>threshold</u> is a scaled value of the
       offset. If the block device should write beyond that offset the event will be delivered.

   <b>domcontrol</b>
       <b>Syntax:</b>

          domcontrol domain

       Returns state of an interface to VMM used to control a domain.  For states other than "ok" or "error" the
       command also prints number of seconds elapsed since the control interface entered its current state.

   <b>domdirtyrate-calc</b>
       <b>Syntax:</b>

          domdirtyrate-calc &lt;domain&gt; [--seconds &lt;sec&gt;]
             --mode=[page-sampling | dirty-bitmap | dirty-ring]

       Calculate an active domain's memory dirty rate which may be expected by user in order to  decide  whether
       it's  proper  to  be migrated out or not.  The <b>seconds</b> parameter can be used to calculate dirty rate in a
       specific time which allows 60s at  most  now  and  would  be  default  to  1s  if  missing.  These  three
       <u>page-sampling,</u>  <u>dirty-bitmap,</u>  <u>dirty-ring</u>  modes  are  mutually  exclusive  and  alternative when specify
       calculation mode, <u>page-sampling</u> is the default mode if missing. The calculated dirty rate information  is
       available by calling 'domstats --dirtyrate'.

   <b>domdisplay</b>
       <b>Syntax:</b>

          domdisplay domain [--include-password] [[--type] type] [--all]

       Output  a  URI which can be used to connect to the graphical display of the domain via VNC, SPICE or RDP.
       The particular graphical display type can be selected using the  <b>type</b>  parameter  (e.g.  "vnc",  "spice",
       "rdp").   If  <u>--include-password</u> is specified, the SPICE channel password will be included in the URI. If
       <u>--all</u> is specified, then all show all possible graphical displays, for a VM  could  have  more  than  one
       graphical displays.

   <b>domdisplay-reload</b>
       <b>Syntax:</b>

          domdisplay-reload &lt;domain&gt; [--type &lt;type&gt;]

       Reload  the  domain's graphical display. This reloads its TLS certificates without restarting the domain.
       <b>type</b> can be any constant from the <u>virDomainGraphicsReloadType</u> enum. By  default  any  supported  type  is
       reloaded (so far only VNC).

   <b>domfsfreeze</b>
       <b>Syntax:</b>

          domfsfreeze domain [[--mountpoint] mountpoint...]

       Freeze mounted filesystems within a running domain to prepare for consistent snapshots.

       The <u>--mountpoint</u> option takes a parameter <b>mountpoint</b>, which is a mount point path of the filesystem to be
       frozen.  This  option  can  occur  multiple  times. If this is not specified, every mounted filesystem is
       frozen.

       Note: <b>snapshot-create</b> command has a <u>--quiesce</u> option to freeze and thaw the filesystems automatically  to
       keep  snapshots  consistent.   <b>domfsfreeze</b> command is only needed when a user wants to utilize the native
       snapshot features of storage devices not supported by libvirt.

   <b>domfsinfo</b>
       <b>Syntax:</b>

          domfsinfo domain

       Show a list of mounted filesystems within the running domain. The list contains mountpoints, names  of  a
       mounted  device  in  the guest, filesystem types, and unique target names used in the domain XML (&lt;target
       dev='name'/&gt;).

       Note that this command requires a guest agent configured and running in the domain's guest OS.

   <b>domfsthaw</b>
       <b>Syntax:</b>

          domfsthaw domain [[--mountpoint] mountpoint...]

       Thaw mounted filesystems within a running domain, which have been frozen by domfsfreeze command.

       The <u>--mountpoint</u> option takes a parameter <b>mountpoint</b>, which is a mount point path of the filesystem to be
       thawed. This option can occur multiple times. If this is  not  specified,  every  mounted  filesystem  is
       thawed.

   <b>domfstrim</b>
       <b>Syntax:</b>

          domfstrim domain [--minimum bytes] [--mountpoint mountPoint]

       Issue  a  fstrim command on all mounted filesystems within a running domain. It discards blocks which are
       not in use by the filesystem.  If  <u>--minimum</u>  <b>bytes</b>  is  specified,  it  tells  guest  kernel  length  of
       contiguous  free  range.  Smaller  than this may be ignored (this is a hint and the guest may not respect
       it). By increasing this value, the fstrim operation will complete more quickly for filesystems with badly
       fragmented free space, although not all blocks will be discarded.  The default  value  is  zero,  meaning
       "discard  every  free block". Moreover, if a user wants to trim only one mount point, it can be specified
       via optional <u>--mountpoint</u> parameter.

   <b>domhostname</b>
       <b>Syntax:</b>

          domhostname domain [--source lease|agent]

       Returns the hostname of a domain, if the hypervisor makes it available.

       The <u>--source</u> argument specifies what data source to use for the hostnames, currently 'lease' to read DHCP
       leases or 'agent' to query the guest OS via an agent. If unspecified, driver returns the  default  method
       available (some drivers support only one type of source).

   <b>domid</b>
       <b>Syntax:</b>

          domid domain-name-or-uuid

       Convert a domain name (or UUID) to a domain id

   <b>domif-getlink</b>
       <b>Syntax:</b>

          domif-getlink domain interface-device [--config]

       Query  link  state  of  the  domain's  virtual  interface. If <u>--config</u> is specified, query the persistent
       configuration, for compatibility purposes, <u>--persistent</u> is alias of <u>--config</u>.

       <u>interface-device</u> can be the interface's target name or the MAC address.

   <b>domif-setlink</b>
       <b>Syntax:</b>

          domif-setlink domain interface-device state [--config] [--print-xml]

       Modify link state of the domain's virtual interface. Possible values for state are "up"  and  "down".  If
       <u>--config</u>  is  specified,  only  the persistent configuration of the domain is modified, for compatibility
       purposes, <u>--persistent</u> is alias of <u>--config</u>.  <u>interface-device</u> can be the interface's target name or  the
       MAC address.

       If <u>--print-xml</u> is specified, then the XML used to update the interface is printed instead.

   <b>domifaddr</b>
       <b>Syntax:</b>

          domifaddr domain [interface] [--full]
             [--source lease|agent|arp]

       Get  a  list  of  interfaces of a running domain along with their IP and MAC addresses, or limited output
       just for one interface if <u>interface</u> is specified. Note that <u>interface</u> can be driver dependent, it can  be
       the name within guest OS or the name you would see in domain XML. Moreover, the whole command may require
       a guest agent to be configured for the queried domain under some hypervisors, notably QEMU.

       If  <u>--full</u>  is  specified,  the interface name and MAC address is always displayed when the interface has
       multiple IP addresses or aliases; otherwise, only the interface name and MAC address is displayed for the
       first name and MAC address with "-" for the others using the same name and MAC address.

       The <u>--source</u> argument specifies what data source to use for the addresses, currently 'lease' to read DHCP
       leases, 'agent' to query the guest OS via an agent, or 'arp' to  get  IP  from  host's  arp  tables.   If
       unspecified, 'lease' is the default.

   <b>backup-begin</b>
       <b>Syntax:</b>

          backup-begin domain [backupxml] [checkpointxml] [--reuse-external]

       Begin  a  new  backup  job. If <u>backupxml</u> is omitted, this defaults to a full backup using a push model to
       filenames generated by libvirt; supplying XML allows fine-tuning such as requesting an incremental backup
       relative to an earlier checkpoint, controlling which disks participate or which filenames  are  involved,
       or  requesting  the  use  of  a pull model backup.  The <u>backup-dumpxml</u> command shows any resulting values
       assigned by libvirt. For more information on backup XML, see:
        &lt;https://libvirt.org/formatbackup.html&gt;

       If <u>--reuse-external</u> is used it instructs libvirt to reuse temporary and output files provided by the user
       in <u>backupxml</u>.

       If <u>checkpointxml</u> is specified, a second file with a top-level element  of  <u>domaincheckpoint</u>  is  used  to
       create  a  simultaneous  checkpoint, for doing a later incremental backup relative to the time the backup
       was created. See <u>checkpoint-create</u> for more details on checkpoints.

       This command returns as soon as possible, and the backup job runs in the background; the  progress  of  a
       push model backup can be checked with <u>domjobinfo</u> or by waiting for an event with <u>event</u> (the progress of a
       pull  model  backup  is under the control of whatever third party connects to the NBD export). The job is
       ended with <u>domjobabort</u>.

   <b>backup-dumpxml</b>
       <b>Syntax:</b>

          backup-dumpxml [--xpath EXPRESSION] [--wrap] domain

       Output XML describing the current backup job.

       If the <b>--xpath</b> argument provides an XPath expression, it will be evaluated against  the  output  XML  and
       only  those  matching  nodes  will  be printed. The default behaviour is to print each matching node as a
       standalone document, however, for ease of additional processing,  the  <b>--wrap</b>  argument  will  cause  the
       matching node to be wrapped in a common root node.

   <b>domiflist</b>
       <b>Syntax:</b>

          domiflist domain [--inactive]

       Print  a  table  showing  the  brief  information  of  all  virtual interfaces associated with <u>domain</u>. If
       <u>--inactive</u> is specified, query the virtual interfaces that will be used on the  next  boot,  rather  than
       those  currently  in  use  by  a  running  domain.  Other  contexts that require a MAC address of virtual
       interface (such as <u>detach-interface</u> or <u>domif-setlink</u>)  will  accept  the  MAC  address  printed  by  this
       command.

   <b>domifstat</b>
       <b>Syntax:</b>

          domifstat domain interface-device

       Get  network  interface  stats  for  a running domain. The network interface stats are only available for
       interfaces that have a physical source interface. This does not include, for example, a 'user'  interface
       type  since  it  is  a  virtual  LAN with NAT to the outside world. <u>interface-device</u> can be the interface
       target by name or MAC address. Please note, for an unmanaged <u>ethernet</u>  type  returned  stats  might  have
       RX/TX swapped.

   <b>domiftune</b>
       <b>Syntax:</b>

          domiftune domain interface-device [[--config] [--live] | [--current]]
             [*--inbound average,peak,burst,floor*]
             [*--outbound average,peak,burst*]

       Set  or  query  the  domain's  network  interface's  bandwidth  parameters.   <u>interface-device</u> can be the
       interface's target name (&lt;target dev='name'/&gt;), or the MAC address.

       If no <u>--inbound</u> or <u>--outbound</u> is specified, this command will query  and  show  the  bandwidth  settings.
       Otherwise,  it  will  set  the  inbound or outbound bandwidth. <u>average,peak,burst,floor</u> is the same as in
       command <u>attach-interface</u>.  Values for <u>average</u>, <u>peak</u> and <u>floor</u> are  expressed  in  kilobytes  per  second,
       while  <u>burst</u>  is  expressed  in kilobytes in a single burst at <u>peak</u> speed as described in the Network XML
       documentation at
        &lt;https://libvirt.org/formatnetwork.html#quality-of-service&gt; .

       To clear inbound or outbound settings, use <u>--inbound</u> or <u>--outbound</u> respectfully  with  average  value  of
       zero.

       If  <u>--live</u>  is  specified,  affect a running guest.  If <u>--config</u> is specified, affect the next start of a
       persistent guest.  If <u>--current</u> is specified, it is equivalent to either <u>--live</u> or <u>--config</u>, depending on
       the current state of the guest.  Both <u>--live</u> and <u>--config</u> flags may be given, but <u>--current</u> is exclusive.
       If no flag is specified, behavior is different depending on hypervisor.

   <b>dominfo</b>
       <b>Syntax:</b>

          dominfo domain

       Returns basic information about the domain.

   <b>domjobabort</b>
       <b>Syntax:</b>

          domjobabort domain [--postcopy]

       Abort the currently running domain job.

       When the job to be aborted is a migration which entered post-copy mode, it cannot be aborted as  none  of
       the  hosts  involved  in migration has a complete state of the domain. Optional <u>--postcopy</u> can be used to
       interrupt such migration although doing so may effectively suspend the  domain  until  the  migration  is
       resumed (see also <u>--postcopy-resume</u> option of <b>migrate</b>).

   <b>domjobinfo</b>
       <b>Syntax:</b>

          domjobinfo domain [--completed [--keep-completed]] [--anystats] [--rawstats]

       Returns information about jobs running on a domain. <u>--completed</u> tells virsh to return information about a
       recently  finished  job.  Statistics  of  a  completed  job are automatically destroyed once read (unless
       <u>--keep-completed</u> is used) or when libvirtd is restarted.

       Normally only statistics for running and successful completed jobs are printed.  <u>--anystats</u> can  be  used
       to also display statistics for failed jobs.

       In  case  <u>--rawstats</u>  is used, all fields are printed as received from the server without any attempts to
       interpret the data. The "Job type:" field is special, since it's reported by the  API  and  not  part  of
       stats.

       Note  that  time  information  returned for completed migrations may be completely irrelevant unless both
       source and destination hosts have synchronized time (i.e., NTP daemon is running on both of them).

   <b>domlaunchsecinfo</b>
       <b>Syntax:</b>

          domlaunchsecinfo domain

       Returns information about the launch security parameters associated with a running domain.

       The set of parameters reported will vary depending on which type of launch security protection is active.
       If none is active, no parameters will be reported.

   <b>domsetlaunchsecstate</b>
       <b>Syntax:</b>

          domsetlaunchsecstate domain --secrethdr hdr-filename
              --secret secret-filename [--set-address address]

       Set a launch security secret in the guest's memory. The guest must have a launchSecurity type enabled  in
       its  configuration  and  be  in  a  paused state.  On success, the guest can be transitioned to a running
       state. On failure, the guest should be destroyed.

       <u>--secrethdr</u> specifies a filename containing  the  base64-encoded  secret  header.   The  header  includes
       artifacts  needed  by  the  hypervisor  firmware to recover the plain text of the launch secret. <u>--secret</u>
       specifies the filename containing the base64-encoded encrypted launch secret.

       The <u>--set-address</u> option can be used to specify a physical address within the guest's memory to  set  the
       secret. If not specified, the address will be determined by the hypervisor.

   <b>dommemstat</b>
       <b>Syntax:</b>

          dommemstat domain [--period seconds] [[--config] [--live] | [--current]]

       Get memory stats for a running domain.

       Availability of these fields depends on hypervisor. Unsupported fields are missing from the output. Other
       fields may appear if communicating with a newer version of libvirtd.

       Explanation of fields:

       • <b>swap_in</b>           - The amount of data read from swap space (in KiB)

       • <b>swap_out</b>          - The amount of memory written out to swap space (in KiB)

       • <b>major_fault</b>       - The number of page faults where disk IO was required

       • <b>minor_fault</b>       - The number of other page faults

       • <b>unused</b>            - The amount of memory left unused by the system (in KiB)

       • <b>available</b>         - The amount of usable memory as seen by the domain (in KiB)

       • <b>actual</b>            - Current balloon value (in KiB)

       • <b>rss</b>               - Resident Set Size of the running domain's process (in KiB)

       • <b>usable</b>             -  The  amount  of  memory  which  can  be reclaimed by balloon without causing host
         swapping (in KiB)

       • <b>last-update</b>       - Timestamp of the last update of statistics (in seconds)

       • <b>disk_caches</b>       - The amount of memory that can be reclaimed without additional I/O,  typically  disk
         caches (in KiB)

       • <b>hugetlb_pgalloc</b>   - The number of successful huge page allocations initiated from within the domain

       • <b>hugetlb_pgfail</b>    - The number of failed huge page allocations initiated from within the domain

       For  QEMU/KVM  with  a  memory balloon, setting the optional <u>--period</u> to a value larger than 0 in seconds
       will allow the balloon driver to return additional statistics  which  will  be  displayed  by  subsequent
       <b>dommemstat</b>  commands.  Setting  the  <u>--period</u>  to 0 will stop the balloon driver collection, but does not
       clear the statistics in the balloon driver. Requires at least QEMU/KVM 1.5 to be running on the host.

       The <u>--live</u>, <u>--config</u>, and <u>--current</u> flags are only valid when using the <u>--period</u> option in order  to  set
       the  collection  period for the balloon driver. If <u>--live</u> is specified, only the running guest collection
       period is affected. If <u>--config</u> is specified, affect the next start of a persistent guest.  If  <u>--current</u>
       is specified, it is equivalent to either <u>--live</u> or <u>--config</u>, depending on the current state of the guest.

       Both  <u>--live</u>  and  <u>--config</u>  flags  may  be  given,  but <u>--current</u> is exclusive. If no flag is specified,
       behavior is different depending on the guest state.

   <b>domname</b>
       <b>Syntax:</b>

          domname domain-id-or-uuid

       Convert a domain Id (or UUID) to domain name

   <b>dompmsuspend</b>
       <b>Syntax:</b>

          dompmsuspend domain target [--duration]

       Suspend a running domain into one of these states (possible <u>target</u> values):

       • <b>mem</b> - equivalent of S3 ACPI state

       • <b>disk</b> - equivalent of S4 ACPI state

       • <b>hybrid</b> - RAM is saved to disk but not powered off

       The <u>--duration</u> argument specifies number of seconds before the domain is woken up after it was  suspended
       (see  also <b>dompmwakeup</b>). Default is 0 for unlimited suspend time. (This feature isn't currently supported
       by any hypervisor driver and 0 should be used.).

       Note that this command requires a guest agent configured and running in the domain's guest OS.

       Beware that at least for QEMU, the domain's process will be terminated when target disk is used and a new
       process will be launched when libvirt is asked to wake up the domain. As a result of  this,  any  runtime
       changes,  such as device hotplug or memory settings, are lost unless such changes were made with <u>--config</u>
       flag.

   <b>dompmwakeup</b>
       <b>Syntax:</b>

          dompmwakeup domain

       Wakeup a domain from pmsuspended state (either suspended by  dompmsuspend  or  from  the  guest  itself).
       Injects  a  wakeup  into  the  guest that is in pmsuspended state, rather than waiting for the previously
       requested duration (if any) to elapse. This operation does not necessarily fail if the domain is running.

   <b>domrename</b>
       <b>Syntax:</b>

          domrename domain new-name

       Rename a domain. This command changes current domain name  to  the  new  name  specified  in  the  second
       argument.

       <b>Note</b>: Domain must be inactive.

   <b>domstate</b>
       <b>Syntax:</b>

          domstate domain [--reason]

       Returns state about a domain.  <u>--reason</u> tells virsh to also print reason for the state.

   <b>domstats</b>
       <b>Syntax:</b>

          domstats [--raw] [--enforce] [--backing] [--nowait] [--state]
             [--cpu-total] [--balloon] [--vcpu] [--interface]
             [--block] [--perf] [--iothread] [--memory] [--dirtyrate] [--vm]
             [[--list-active] [--list-inactive]
              [--list-persistent] [--list-transient] [--list-running]y
              [--list-paused] [--list-shutoff] [--list-other]] | [domain ...]

       Get  statistics  for  multiple  or  all  domains.  Without any argument this command prints all available
       statistics for all domains.

       The list of domains to gather stats for can be either limited by listing the domains as a space separated
       list, or by specifying one of the filtering flags <u>--list-NNN</u>. (The approaches can't be combined.)

       By default some of the returned fields may be converted to  more  human  friendly  values  by  a  set  of
       pretty-printers. To suppress this behavior use the <u>--raw</u> flag.

       The  individual  statistics groups are selectable via specific flags. By default all supported statistics
       groups are returned. Supported statistics groups flags  are:  <u>--state</u>,  <u>--cpu-total</u>,  <u>--balloon</u>,  <u>--vcpu</u>,
       <u>--interface</u>, <u>--block</u>, <u>--perf</u>, <u>--iothread</u>, <u>--memory</u>, <u>--dirtyrate</u>, <u>--vm</u>.

       Note  that  - depending on the hypervisor type and version or the domain state - not all of the following
       statistics may be returned.

       When selecting the <u>--state</u> group the following fields are returned:

       • <b>state.state</b> - state of the VM, returned as number from virDomainState enum

       • <b>state.reason</b>  -  reason  for  entering  given  state,  returned  as  int  from  virDomain*Reason   enum
         corresponding to given state

       <u>--cpu-total</u> returns:

       • <b>cpu.time</b> - total cpu time spent for this domain in nanoseconds

       • <b>cpu.user</b> - user cpu time spent in nanoseconds

       • <b>cpu.system</b> - system cpu time spent in nanoseconds

       • <b>cpu.haltpoll.success.time</b> - cpu halt polling success time spent in nanoseconds

       • <b>cpu.haltpoll.fail.time</b> - cpu halt polling fail time spent in nanoseconds

       • <b>cpu.cache.monitor.count</b> - the number of cache monitors for this domain

       • <b>cpu.cache.monitor.&lt;num&gt;.name</b> - the name of cache monitor &lt;num&gt;

       • <b>cpu.cache.monitor.&lt;num&gt;.vcpus</b> - vcpu list of cache monitor &lt;num&gt;

       • <b>cpu.cache.monitor.&lt;num&gt;.bank.count</b> - the number of cache banks in cache monitor &lt;num&gt;

       • <b>cpu.cache.monitor.&lt;num&gt;.bank.&lt;index&gt;.id</b>  -  host  allocated  cache id for bank &lt;index&gt; in cache monitor
         &lt;num&gt;

       • <b>cpu.cache.monitor.&lt;num&gt;.bank.&lt;index&gt;.bytes</b> - the number of bytes of last level cache that the domain is
         using on cache bank &lt;index&gt;

       <u>--balloon</u> returns:

       • <b>balloon.current</b> - the memory in KiB currently used

       • <b>balloon.maximum</b> - the maximum memory in KiB allowed

       • <b>balloon.swap_in</b> - the amount of data read from swap space (in KiB)

       • <b>balloon.swap_out</b> - the amount of memory written out to swap space (in KiB)

       • <b>balloon.major_fault</b> - the number of page faults when disk IO was required

       • <b>balloon.minor_fault</b> - the number of other page faults

       • <b>balloon.unused</b> - the amount of memory left unused by the system (in KiB)

       • <b>balloon.available</b> - the amount of usable memory as seen by the domain (in KiB)

       • <b>balloon.rss</b> - Resident Set Size of running domain's process (in KiB)

       • <b>balloon.usable</b> - the amount of memory which can be reclaimed by balloon without causing  host  swapping
         (in KiB)

       • <b>balloon.last-update</b> - timestamp of the last update of statistics (in seconds)

       • <b>balloon.disk_caches</b> - the amount of memory that can be reclaimed without additional I/O, typically disk
         (in KiB)

       • <b>balloon.hugetlb_pgalloc</b>  -  the  number  of successful huge page allocations from inside the domain via
         virtio balloon

       • <b>balloon.hugetlb_pgfail</b> - the number of failed huge page allocations from inside the domain  via  virtio
         balloon

       <u>--vcpu</u> returns:

       • <b>vcpu.current</b> - current number of online virtual CPUs

       • <b>vcpu.maximum</b> - maximum number of online virtual CPUs

       • <b>vcpu.&lt;num&gt;.state</b> - state of the virtual CPU &lt;num&gt;, as number from virVcpuState enum

       • <b>vcpu.&lt;num&gt;.time</b> - virtual cpu time spent by virtual CPU &lt;num&gt; (in microseconds)

       • <b>vcpu.&lt;num&gt;.wait</b> - virtual cpu time spent by virtual CPU &lt;num&gt; waiting on I/O (in microseconds)

       • <b>vcpu.&lt;num&gt;.halted</b>  - virtual CPU &lt;num&gt; is halted: yes or no (may indicate the processor is idle or even
         disabled, depending on the architecture)

       • <b>vcpu.&lt;num&gt;.delay</b> - time the vCPU &lt;num&gt; thread was enqueued by the host scheduler, but  was  waiting  in
         the queue instead of running.  Exposed to the VM as a steal time.

       This   group   of   statistics   also  reports  additional  hypervisor-originating  per-vCPU  stats.  The
       hypervisor-specific statistics in this group have the following naming scheme:
          <b>vcpu.&lt;num&gt;.$NAME.$TYPE</b>

          <b>$NAME</b>  name of the statistics field provided by the hypervisor

          <b>$TYPE</b>  Type of the value. The following types are returned:

                 <b>cur</b>    current instant value

                 <b>sum</b>    aggregate value

                 <b>max</b>    peak value

          The returned value may be either an unsigned long long or a boolean. Meaning is  hypervisor  specific.
          Please see the disclaimer for the <u>--vm</u> group which also consists of hypervisor-specific stats.

       <u>--interface</u> returns:

       • <b>net.count</b> - number of network interfaces on this domain

       • <b>net.&lt;num&gt;.name</b> - name of the interface &lt;num&gt;

       • <b>net.&lt;num&gt;.rx.bytes</b> - number of bytes received

       • <b>net.&lt;num&gt;.rx.pkts</b> - number of packets received

       • <b>net.&lt;num&gt;.rx.errs</b> - number of receive errors

       • <b>net.&lt;num&gt;.rx.drop</b> - number of receive packets dropped

       • <b>net.&lt;num&gt;.tx.bytes</b> - number of bytes transmitted

       • <b>net.&lt;num&gt;.tx.pkts</b> - number of packets transmitted

       • <b>net.&lt;num&gt;.tx.errs</b> - number of transmission errors

       • <b>net.&lt;num&gt;.tx.drop</b> - number of transmit packets dropped

       <u>--perf</u> returns the statistics of all enabled perf events:

       • <b>perf.cmt</b> - the cache usage in Byte currently used

       • <b>perf.mbmt</b> - total system bandwidth from one level of cache

       • <b>perf.mbml</b> - bandwidth of memory traffic for a memory controller

       • <b>perf.cpu_cycles</b> - the count of cpu cycles (total/elapsed)

       • <b>perf.instructions</b> - the count of instructions

       • <b>perf.cache_references</b> - the count of cache hits

       • <b>perf.cache_misses</b> - the count of caches misses

       • <b>perf.branch_instructions</b> - the count of branch instructions

       • <b>perf.branch_misses</b> - the count of branch misses

       • <b>perf.bus_cycles</b> - the count of bus cycles

       • <b>perf.stalled_cycles_frontend</b> - the count of stalled frontend cpu cycles

       • <b>perf.stalled_cycles_backend</b> - the count of stalled backend cpu cycles

       • <b>perf.ref_cpu_cycles</b> - the count of ref cpu cycles

       • <b>perf.cpu_clock</b> - the count of cpu clock time

       • <b>perf.task_clock</b> - the count of task clock time

       • <b>perf.page_faults</b> - the count of page faults

       • <b>perf.context_switches</b> - the count of context switches

       • <b>perf.cpu_migrations</b> - the count of cpu migrations

       • <b>perf.page_faults_min</b> - the count of minor page faults

       • <b>perf.page_faults_maj</b> - the count of major page faults

       • <b>perf.alignment_faults</b> - the count of alignment faults

       • <b>perf.emulation_faults</b> - the count of emulation faults

       See the <b>perf</b> command for more details about each event.

       <u>--block</u>  returns  information  about disks associated with each domain.  Using the <u>--backing</u> flag extends
       this information to cover all resources in the  backing  chain,  rather  than  the  default  of  limiting
       information to the active layer for each guest disk.  Information listed includes:

       • <b>block.count</b> - number of block devices being listed

       • <b>block.&lt;num&gt;.name</b>  - name of the target of the block device &lt;num&gt; (the same name for multiple entries if
         <u>--backing</u> is present)

       • <b>block.&lt;num&gt;.backingIndex</b> - when <u>--backing</u> is present, matches up with the &lt;backingStore&gt;  index  listed
         in domain XML for backing files

       • <b>block.&lt;num&gt;.path</b> - file source of block device &lt;num&gt;, if it is a local file or block device

       • <b>block.&lt;num&gt;.rd.reqs</b> - number of read requests

       • <b>block.&lt;num&gt;.rd.bytes</b> - number of read bytes

       • <b>block.&lt;num&gt;.rd.times</b> - total time (ns) spent on reads

       • <b>block.&lt;num&gt;.wr.reqs</b> - number of write requests

       • <b>block.&lt;num&gt;.wr.bytes</b> - number of written bytes

       • <b>block.&lt;num&gt;.wr.times</b> - total time (ns) spent on writes

       • <b>block.&lt;num&gt;.fl.reqs</b> - total flush requests

       • <b>block.&lt;num&gt;.fl.times</b> - total time (ns) spent on cache flushing

       • <b>block.&lt;num&gt;.errors</b> - Xen only: the 'oo_req' value

       • <b>block.&lt;num&gt;.allocation</b> - offset of highest written sector in bytes

       • <b>block.&lt;num&gt;.capacity</b> - logical size of source file in bytes

       • <b>block.&lt;num&gt;.physical</b> - physical size of source file in bytes

       • <b>block.&lt;num&gt;.threshold</b>  -  threshold  (in  bytes) for delivering the VIR_DOMAIN_EVENT_ID_BLOCK_THRESHOLD
         event. See domblkthreshold.

       <u>--iothread</u> returns information about IOThreads on the running guest if supported by the hypervisor.

       The "poll-max-ns" for each thread is the maximum nanoseconds to allow each polling interval to  occur.  A
       polling interval is a period of time allowed for a thread to process data before being the guest gives up
       its CPU quantum back to the host. A value set too small will not allow the IOThread to run long enough on
       a  CPU to process data. A value set too high will consume too much CPU time per IOThread failing to allow
       other threads running on the CPU to get time. The polling  interval  is  not  available  for  statistical
       purposes.

       •

         <b>iothread.count</b> <b>-</b> <b>maximum</b> <b>number</b> <b>of</b> <b>IOThreads</b> <b>in</b> <b>the</b> <b>subsequent</b> <b>list</b>
                as  unsigned  int.  Each  IOThread in the list will will use it's iothread_id value as the &lt;id&gt;.
                There may be fewer &lt;id&gt; entries than the iothread.count value if  the  polling  values  are  not
                supported.

       • <b>iothread.&lt;id&gt;.poll-max-ns</b> - maximum polling time in nanoseconds used by the &lt;id&gt; IOThread. A value of 0
         (zero) indicates polling is disabled.

       • <b>iothread.&lt;id&gt;.poll-grow</b>  -  polling  time  grow  value.  A  value  of 0 (zero) growth is managed by the
         hypervisor.

       • <b>iothread.&lt;id&gt;.poll-shrink</b> - polling time shrink value. A value of (zero) indicates shrink is managed by
         hypervisor.

       <u>--memory</u> returns:

       • <b>memory.bandwidth.monitor.count</b> - the number of memory bandwidth monitors for this domain

       • <b>memory.bandwidth.monitor.&lt;num&gt;.name</b>  - the name of monitor &lt;num&gt;

       • <b>memory.bandwidth.monitor.&lt;num&gt;.vcpus</b> - the vcpu list of monitor &lt;num&gt;

       •

         <b>memory.bandwidth.monitor.&lt;num&gt;.node.count</b> <b>-</b> <b>the</b> <b>number</b> <b>of</b> <b>memory</b>
                controller in monitor &lt;num&gt;

       • <b>memory.bandwidth.monitor.&lt;num&gt;.node.&lt;index&gt;.id</b> - host allocated memory  controller  id  for  controller
         &lt;index&gt; of monitor &lt;num&gt;

       • <b>memory.bandwidth.monitor.&lt;num&gt;.node.&lt;index&gt;.bytes.local</b>  -  the  accumulative  bytes consumed by @vcpus
         that passing through the memory controller in the same processor that the scheduled  host  CPU  belongs
         to.

       • <b>memory.bandwidth.monitor.&lt;num&gt;.node.&lt;index&gt;.bytes.total</b>  -  the  total  bytes  consumed  by @vcpus that
         passing through all memory controllers, either local or remote controller.

       <u>--dirtyrate</u> returns:

       • <b>dirtyrate.calc_status</b> - the status of last memory dirty  rate  calculation,  returned  as  number  from
         virDomainDirtyRateStatus enum.

       • <b>dirtyrate.calc_start_time</b> - the start time of last memory dirty rate calculation.

       • <b>dirtyrate.calc_period</b> - the period of last memory dirty rate calculation.

       • <b>dirtyrate.megabytes_per_second</b> - the calculated memory dirty rate in MiB/s.

       • <b>dirtyrate.calc_mode</b>       -       the       calculation       mode      used      last      measurement
         (<b>page-sampling</b>/<b>dirty-bitmap</b>/<b>dirty-ring</b>)

       • <b>dirtyrate.vcpu.&lt;num&gt;.megabytes_per_second</b> - the calculated memory dirty rate for a virtual cpu in MiB/s

       <u>--vm</u> returns:

       The <u>--vm</u> option enables reporting of hypervisor-specific statistics. Naming and meaning of the fields  is
       entirely hypervisor dependent.

       The statistics in this group have the following naming scheme:
          <b>vm.$NAME.$TYPE</b>

          <b>$NAME</b>  name of the statistics field provided by the hypervisor

          <b>$TYPE</b>  Type of the value. The following types are returned:

                 <b>cur</b>    current instant value

                 <b>sum</b>    aggregate value

                 <b>max</b>    peak value

          The returned value may be either an unsigned long long or a boolean.

          <b>WARNING</b>:  The  stats reported in this group are runtime-collected and hypervisor originated, thus fall
          outside of the usual stable API policies of libvirt.

          Libvirt can't guarantee that the statistics reported from  the  outside  source  will  be  present  in
          further  versions  of  the  hypervisor,  or  that  naming  or meaning will stay consistent. Changes to
          existing fields, however, are expected to be rare.

       Selecting a specific statistics groups doesn't guarantee that the daemon supports the selected  group  of
       stats. Flag <u>--enforce</u> forces the command to fail if the daemon doesn't support the selected group.

       When  collecting  stats  libvirtd  may wait for some time if there's already another job running on given
       domain for it to finish.  This may cause unnecessary delay in delivering stats. Using <u>--nowait</u> suppresses
       this behaviour. On the other hand some statistics might be missing for such domain.

   <b>domtime</b>
       <b>Syntax:</b>

          domtime domain { [--now] [--pretty] [--sync] [--time time] }

       Gets or sets the domain's system time. When run without any arguments (but <u>domain</u>), the current  domain's
       system  time  is  printed out. The <u>--pretty</u> modifier can be used to print the time in more human readable
       form.

       When <u>--time</u> <b>time</b> is specified, the domain's time is not gotten but set instead. The <u>--now</u>  modifier  acts
       like if it was an alias for <u>--time</u> <b>$now</b>, which means it sets the time that is currently on the host virsh
       is running at. In both cases (setting and getting), time is in seconds relative to Epoch of 1970-01-01 in
       UTC.  The <u>--sync</u> modifies the set behavior a bit: The time passed is ignored, but the time to set is read
       from  domain's RTC instead. Please note, that some hypervisors may require a guest agent to be configured
       in order to get or set the guest time.

   <b>domuuid</b>
       <b>Syntax:</b>

          domuuid domain-name-or-id

       Convert a domain name or id to domain UUID

   <b>domxml-from-native</b>
       <b>Syntax:</b>

          domxml-from-native format config

       Convert the file <u>config</u> in the native guest configuration format named by <u>format</u> to a domain XML  format.
       For  QEMU/KVM  hypervisor, the <u>format</u> argument must be <b>qemu-argv</b>. For Xen hypervisor, the <u>format</u> argument
       may be <b>xen-xm</b>, <b>xen-xl</b>, or <b>xen-sxpr</b>. For LXC hypervisor,  the  <u>format</u>  argument  must  be  <b>lxc-tools</b>.  For
       VMware/ESX  hypervisor,  the  <u>format</u>  argument  must be <b>vmware-vmx</b>.  For the Bhyve hypervisor, the <u>format</u>
       argument must be <b>bhyve-argv</b>.

   <b>domxml-to-native</b>
       <b>Syntax:</b>

          domxml-to-native format { [--xml] xml | --domain domain-name-or-id-or-uuid }

       Convert the file <u>xml</u> into domain XML  format  or  convert  an  existing  <u>--domain</u>  to  the  native  guest
       configuration  format  named  by  <u>format</u>.  The <u>xml</u> and <u>--domain</u> arguments are mutually exclusive. For the
       types of <u>format</u> argument, refer to <b>domxml-from-native</b>.

   <b>dump</b>
       <b>Syntax:</b>

          dump domain corefilepath [--bypass-cache]
             { [--live] | [--crash] | [--reset] }
             [--verbose] [--memory-only] [--format string]

       Dumps the core of a domain to a file for analysis.  If <u>--live</u> is specified, the domain continues  to  run
       until  the  core  dump is complete, rather than pausing up front.  If <u>--crash</u> is specified, the domain is
       halted with a crashed status, rather than merely left in a paused state.  If <u>--reset</u>  is  specified,  the
       domain  is  reset  after  successful  dump.   Note,  these  three  switches  are  mutually exclusive.  If
       <u>--bypass-cache</u> is specified, the save will avoid the file system cache, although this may slow  down  the
       operation.   If  <u>--memory-only</u>  is specified, the file is elf file, and will only include domain's memory
       and cpu common register value. It is very useful if the domain  uses  host  devices  directly.   <u>--format</u>
       <u>string</u>  is  used  to  specify  the  format  of  'memory-only'  dump,  and  <u>string</u>  can  be  one  of: elf,
       kdump-zlib(kdump-compressed  format  with  zlib-compressed),   kdump-lzo(kdump-compressed   format   with
       lzo-compressed),  kdump-snappy(kdump-compressed  format  with  snappy-compressed),  win-dmp(Windows  full
       crashdump format).

       The progress may be monitored using <b>domjobinfo</b> virsh command and canceled with <b>domjobabort</b> command  (sent
       by  another  virsh instance). Another option is to send SIGINT (usually with <b>Ctrl-C</b>) to the virsh process
       running <b>dump</b> command. <u>--verbose</u> displays the progress of dump.

       NOTE: Some hypervisors may require the user to manually  ensure  proper  permissions  on  file  and  path
       specified by argument <u>corefilepath</u>.

       NOTE:  Crash  dump  in a old kvmdump format is being obsolete and cannot be loaded and processed by crash
       utility since its version 6.1.0. A --memory-only option is required in order to produce  valid  ELF  file
       which can be later processed by the crash utility.

   <b>dumpxml</b>
       <b>Syntax:</b>

          dumpxml [--inactive] [--security-info] [--update-cpu] [--migratable]
                  [--xpath EXPRESSION] [--wrap] domain

       Output  the  domain  information as an XML dump to stdout, this format can be used by the <b>create</b> command.
       Additional options  affecting  the  XML  dump  may  be  used.  <u>--inactive</u>  tells  virsh  to  dump  domain
       configuration  that  will  be  used  on  next  start  of  the  domain  as  opposed  to the current domain
       configuration.  Using <u>--security-info</u> will also include security sensitive information in the  XML  dump.
       <u>--update-cpu</u>  updates domain CPU requirements according to host CPU. With <u>--migratable</u> one can request an
       XML that is suitable for migrations, i.e., compatible with older libvirt releases  and  possibly  amended
       with  internal  run-time  options.  This  option  may  automatically  enable other options (<u>--update-cpu</u>,
       <u>--security-info</u>, ...) as necessary.

       If the <b>--xpath</b> argument provides an XPath expression, it will be evaluated against  the  output  XML  and
       only  those  matching  nodes  will  be printed. The default behaviour is to print each matching node as a
       standalone document, however, for ease of additional processing,  the  <b>--wrap</b>  argument  will  cause  the
       matching node to be wrapped in a common root node.

   <b>edit</b>
       <b>Syntax:</b>

          edit domain

       Edit the XML configuration file for a domain, which will affect the next boot of the guest.

       This is equivalent to:

          virsh dumpxml --inactive --security-info domain &gt; domain.xml
          vi domain.xml (or make changes with your other text editor)
          virsh define domain.xml

       except that it does some error checking.

       The editor used can be supplied by the <b>$VISUAL</b> or <b>$EDITOR</b> environment variables, and defaults to <b>vi</b>.

   <b>emulatorpin</b>
       <b>Syntax:</b>

          emulatorpin domain [cpulist] [[--live] [--config]  | [--current]]

       Query or change the pinning of domain's emulator threads to host physical CPUs.

       See <b>vcpupin</b> for <u>cpulist</u>.

       If  <u>--live</u>  is  specified,  affect a running guest.  If <u>--config</u> is specified, affect the next start of a
       persistent guest.  If <u>--current</u> is specified, it is equivalent to either <u>--live</u> or <u>--config</u>, depending on
       the current state of the guest.  Both <u>--live</u> and <u>--config</u> flags may be given if <u>cpulist</u> is  present,  but
       <u>--current</u> is exclusive.  If no flag is specified, behavior is different depending on hypervisor.

   <b>event</b>
       <b>Syntax:</b>

          event {[domain] { event | --all } [--loop] [--timeout seconds] [--timestamp] | --list}

       Wait  for a class of domain events to occur, and print appropriate details of events as they happen.  The
       events can optionally be filtered by <u>domain</u>.  Using <u>--list</u> as the only argument will provide  a  list  of
       possible  <u>event</u>  values known by this client, although the connection might not allow registering for all
       these events.  It is also possible to use <u>--all</u> instead of <u>event</u> to register for all possible event types
       at once.

       By default, this command is one-shot, and returns success once an  event  occurs;  you  can  send  SIGINT
       (usually  via  <b>Ctrl-C</b>)  to quit immediately.  If <u>--timeout</u> is specified, the command gives up waiting for
       events after <u>seconds</u> have elapsed.   With <u>--loop</u>, the command  prints  all  events  until  a  timeout  or
       interrupt key.

       When <u>--timestamp</u> is used, a human-readable timestamp will be printed before the event.

   <b>get-user-sshkeys</b>
       <b>Syntax:</b>

          get-user-sshkeys domain user

       Print  SSH authorized keys for given <u>user</u> in the guest <u>domain</u>. Please note, that an entry in the file has
       internal structure as defined by <u><a href="../man8/sshd.8.html">sshd</a>(8)</u> and virsh/libvirt does handle keys as opaque strings, i.e.  does
       not interpret them.

   <b>guest-agent-timeout</b>
       <b>Syntax:</b>

          guest-agent-timeout domain [--timeout value]

       Set  how  long to wait for a response from guest agent commands. By default, agent commands block forever
       waiting for a response. <b>value</b> must be a positive value (wait for given amount of seconds) or one  of  the
       following values:

       • -2 - block forever waiting for a result (used when --timeout is omitted),

       • -1 - reset timeout to the default value (currently defined as 5 seconds in libvirt daemon),

       • 0 - do not wait at all,

   <b>guestinfo</b>
       <b>Syntax:</b>

          guestinfo domain [--user] [--os] [--timezone] [--hostname] [--filesystem]
             [--disk] [--interface]

       Print  information  about  the  guest  from the point of view of the guest agent.  Note that this command
       requires a guest agent to be configured and running in the domain's guest OS.

       When run without any arguments, this command prints all information types that are supported by the guest
       agent at that point, omitting unavailable ones.  Success is always reported in this case.

       You can limit the types of information that are returned by specifying  one  or  more  flags.   Available
       information  types  flags are <u>--user</u>, <u>--os</u>, <u>--timezone</u>, <u>--hostname</u>, <u>--filesystem</u>, <u>--disk</u> and <u>--interface</u>.
       If an explicitly requested information type is not supported by  the  guest  agent  at  that  point,  the
       processes will provide an exit code of 1.

       Note  that depending on the hypervisor type and the version of the guest agent running within the domain,
       not all of the following information may be returned.

       When selecting the <u>--user</u> information type, the following fields may be returned:

       • <b>user.count</b> - the number of active users on this domain

       • <b>user.&lt;num&gt;.name</b> - username of user &lt;num&gt;

       • <b>user.&lt;num&gt;.domain</b> - domain of the user &lt;num&gt; (may only be present on certain guets types)

       • <b>user.&lt;num&gt;.login-time</b> - the login time of user &lt;num&gt; in milliseconds since the epoch

       <u>--os</u> returns:

       • <b>os.id</b> - a string identifying the operating system

       • <b>os.name</b> - the name of the operating system

       • <b>os.pretty-name</b> - a pretty name for the operating system

       • <b>os.version</b> - the version of the operating system

       • <b>os.version-id</b> - the version id of the operating system

       • <b>os.kernel-release</b> - the release of the operating system kernel

       • <b>os.kernel-version</b> - the version of the operating system kernel

       • <b>os.machine</b> - the machine hardware name

       • <b>os.variant</b> - a specific variant or edition of the operating system

       • <b>os.variant-id</b> - the id for a specific variant or edition of the operating system

       <u>--timezone</u> returns:

       • <b>timezone.name</b> - the name of the timezone

       • <b>timezone.offset</b> - the offset to UTC in seconds

       <u>--hostname</u> returns:

       • <b>hostname</b> - the hostname of the domain

       <u>--filesystem</u> returns:

       • <b>fs.count</b> - the number of filesystems defined on this domain

       • <b>fs.&lt;num&gt;.mountpoint</b> - the path to the mount point for filesystem &lt;num&gt;

       • <b>fs.&lt;num&gt;.name</b> - device name in the guest (e.g. <b>sda1</b>) for filesystem &lt;num&gt;

       • <b>fs.&lt;num&gt;.fstype</b> - the type of filesystem &lt;num&gt;

       • <b>fs.&lt;num&gt;.total-bytes</b> - the total size of filesystem &lt;num&gt;

       • <b>fs.&lt;num&gt;.used-bytes</b> - the number of bytes used in filesystem &lt;num&gt;

       • <b>fs.&lt;num&gt;.disk.count</b> - the number of disks targeted by filesystem &lt;num&gt;

       • <b>fs.&lt;num&gt;.disk.&lt;num&gt;.alias</b> - the device alias of disk &lt;num&gt; (e.g. sda)

       • <b>fs.&lt;num&gt;.disk.&lt;num&gt;.serial</b> - the serial number of disk &lt;num&gt;

       • <b>fs.&lt;num&gt;.disk.&lt;num&gt;.device</b> - the device node of disk &lt;num&gt;

       <u>--disk</u> returns:

       • <b>disk.count</b> - the number of disks defined on this domain

       • <b>disk.&lt;num&gt;.name</b> - device node (Linux) or device UNC (Windows)

       • <b>disk.&lt;num&gt;.partition</b> - whether this is a partition or disk

       • <b>disk.&lt;num&gt;.dependency.count</b> - the number of device dependencies

       • <b>disk.&lt;num&gt;.dependency.&lt;num&gt;.name</b> - a dependency name

       • <b>disk.&lt;num&gt;.serial</b> -  optional disk serial number

       • <b>disk.&lt;num&gt;.alias</b> - the device alias of the disk (e.g. sda)

       • <b>disk.&lt;num&gt;.guest_alias</b> - optional alias assigned to the disk

       <u>--interface</u> returns: * <b>if.count</b> - the number of interfaces defined on this domain * <b>if.&lt;num&gt;.name</b> -  name
       in  the  guest  (e.g.  <b>eth0</b>)  for  interface  &lt;num&gt; * <b>if.&lt;num&gt;.hwaddr</b> - hardware address in the guest for
       interface  &lt;num&gt;  *  <b>if.&lt;num&gt;.addr.count</b>  -  the  number  of  IP   addresses   of   interface   &lt;num&gt;   *
       <b>if.&lt;num&gt;.addr.&lt;num1&gt;.type</b>  - the IP address type of addr &lt;num1&gt; (e.g. ipv4) * <b>if.&lt;num&gt;.addr.&lt;num1&gt;.addr</b> -
       the IP address of addr &lt;num1&gt; * <b>if.&lt;num&gt;.addr.&lt;num1&gt;.prefix</b> - the prefix of IP address of addr &lt;num1&gt;

   <b>guestvcpus</b>
       <b>Syntax:</b>

          guestvcpus domain [[--enable] | [--disable]] [cpulist]

       Query or change state of vCPUs from guest's point of view using the guest agent.   When  invoked  without
       <u>cpulist</u> the guest is queried for available guest vCPUs, their state and possibility to be offlined.

       If  <u>cpulist</u>  is provided then one of <u>--enable</u> or <u>--disable</u> must be provided too. The desired operation is
       then executed on the domain.

       See <b>vcpupin</b> for information on <u>cpulist</u>.

   <b>iothreadadd</b>
       <b>Syntax:</b>

          iothreadadd domain iothread_id [[--config] [--live] | [--current]]

       Add a new IOThread to the domain using the specified <u>iothread_id</u>.  If the <u>iothread_id</u> already exists, the
       command will fail. The <u>iothread_id</u> must be greater than zero.

       If <u>--live</u> is specified, affect a running guest. If the guest is not running an  error  is  returned.   If
       <u>--config</u>  is  specified,  affect  the next start of a persistent guest.  If <u>--current</u> is specified, it is
       equivalent to either <u>--live</u> or <u>--config</u>, depending on the current state of the guest.

   <b>iothreaddel</b>
       <b>Syntax:</b>

          iothreaddel domain iothread_id [[--config] [--live] | [--current]]

       Delete an IOThread from the domain using the specified <u>iothread_id</u>.  If an IOThread is currently assigned
       to a disk resource such as via the <b>attach-disk</b> command, then the attempt  to  remove  the  IOThread  will
       fail.  If the <u>iothread_id</u> does not exist an error will occur.

       If  <u>--live</u>  is  specified,  affect a running guest. If the guest is not running an error is returned.  If
       <u>--config</u> is specified, affect the next start of a persistent guest.  If <u>--current</u>  is  specified,  it  is
       equivalent to either <u>--live</u> or <u>--config</u>, depending on the current state of the guest.

   <b>iothreadinfo</b>
       <b>Syntax:</b>

          iothreadinfo domain [[--live] [--config] | [--current]]

       Display  basic  domain  IOThreads  information  including  the  IOThread ID and the CPU Affinity for each
       IOThread.

       If <u>--live</u> is specified, get the IOThreads data from the running guest. If the guest is  not  running,  an
       error  is returned.  If <u>--config</u> is specified, get the IOThreads data from the next start of a persistent
       guest.  If <u>--current</u> is specified or <u>--live</u> and <u>--config</u> are not specified, then get  the  IOThread  data
       based on the current guest state, which can either be live or offline.

   <b>iothreadpin</b>
       <b>Syntax:</b>

          iothreadpin domain iothread cpulist [[--live] [--config] | [--current]]

       Change  the  pinning  of  a  domain  IOThread  to  host physical CPUs. In order to retrieve a list of all
       IOThreads, use <b>iothreadinfo</b>. To pin an <u>iothread</u> specify the <u>cpulist</u> desired for the IOThread ID as listed
       in the <b>iothreadinfo</b> output.

       <u>cpulist</u> is a list of physical CPU numbers. Its syntax is a comma separated  list  and  a  special  markup
       using  '-'  and  '^'  (ex.  '0-4',  '0-3,^2')  can also be allowed. The '-' denotes the range and the '^'
       denotes exclusive.  If you want to reset iothreadpin setting, that is, to pin an <u>iothread</u> to all physical
       cpus, simply specify 'r' as a <u>cpulist</u>.

       If <u>--live</u> is specified, affect a running guest. If the guest is not running, an error  is  returned.   If
       <u>--config</u>  is  specified,  affect  the next start of a persistent guest.  If <u>--current</u> is specified, it is
       equivalent to either <u>--live</u> or <u>--config</u>, depending on the current state of the guest.   Both  <u>--live</u>  and
       <u>--config</u>  flags may be given if <u>cpulist</u> is present, but <u>--current</u> is exclusive.  If no flag is specified,
       behavior is different depending on hypervisor.

       <b>Note</b>: The expression is sequentially evaluated, so  "0-15,^8"  is  identical  to  "9-14,0-7,15"  but  not
       identical to "^8,0-15".

   <b>iothreadset</b>
       <b>Syntax:</b>

          iothreadset domain iothread_id [[--poll-max-ns ns] [--poll-grow factor]
             [--poll-shrink divisor] [--thread-pool-min value]
             [--thread-pool-max value]]
             [[--config] [--live] | [--current]]

       Modifies  an  existing iothread of the domain using the specified <u>iothread_id</u>. The <u>--poll-max-ns</u> provides
       the maximum polling interval to be allowed for an IOThread in ns. If a 0 (zero) is provided, then polling
       for the IOThread is disabled.  The <u>--poll-grow</u> is the factor by which the current polling  time  will  be
       adjusted  in  order to reach the maximum polling time. If a 0 (zero) is provided, then the default factor
       will be used. The <u>--poll-shrink</u> is the quotient by which the current polling  time  will  be  reduced  in
       order  to  get  below  the maximum polling interval. If a 0 (zero) is provided, then the default quotient
       will be used. The polling values are purely dynamic for a running guest.  Saving,  destroying,  stopping,
       etc.  the  guest  will  result  in the polling values returning to hypervisor defaults at the next start,
       restore, etc.

       The <u>--thread-pool-min</u> and <u>--thread-pool-max</u> options then set  lower  and  upper  bound,  respectively  of
       number  of  threads  in worker pool of given iothread. For changes to an inactive configuration -1 can be
       specified to remove corresponding boundary from the domain configuration. For changes to a running  guest
       it's  recommended  to  set the upper boundary first (<u>--thread-pool-max</u>) and only after that set the lower
       boundary (<u>--thread-pool-min</u>). It is allowed for the lower boundary to be the same as the upper  boundary,
       however it's not allowed for the upper boundary to be value of zero.

       If  <u>--live</u>  is  specified,  affect a running guest. If the guest is not running an error is returned.  If
       <u>--current</u> is specified or <u>--live</u> is not specified, then  handle  as  if  <u>--live</u>  was  specified.   (Where
       "current" here means whatever the present guest state is: live or offline.)

   <b>managedsave</b>
       <b>Syntax:</b>

          managedsave domain [--bypass-cache] [{--running | --paused}] [--verbose]

       Save  and  destroy  (stop)  a running domain, so it can be restarted from the same state at a later time.
       When the virsh <b>start</b> command is next run for the domain, it will automatically be started from this saved
       state.  If <u>--bypass-cache</u> is specified, the save will avoid the file system cache, although this may slow
       down the operation.

       The progress may be monitored using <b>domjobinfo</b> virsh command and canceled with <b>domjobabort</b> command  (sent
       by  another  virsh instance). Another option is to send SIGINT (usually with <b>Ctrl-C</b>) to the virsh process
       running <b>managedsave</b> command. <u>--verbose</u> displays the progress of save.

       Normally, starting a managed save will decide between running or paused based on the state the domain was
       in when the save was done; passing either the <u>--running</u> or <u>--paused</u>  flag  will  allow  overriding  which
       state the <b>start</b> should use.

       The <b>dominfo</b> command can be used to query whether a domain currently has any managed save image.

   <b>managedsave-define</b>
       <b>Syntax:</b>

          managedsave-define domain xml [{--running | --paused}]

       Update  the  domain  XML  that will be used when <u>domain</u> is later started. The <u>xml</u> argument must be a file
       name containing the alternative XML, with changes only in the host-specific portions of the  domain  XML.
       For example, it can be used to change disk file paths.

       The  managed  save  image  records  whether  the  domain  should be started to a running or paused state.
       Normally, this command does not alter the recorded state; passing either the <u>--running</u> or  <u>--paused</u>  flag
       will allow overriding which state the <b>start</b> should use.

   <b>managedsave-dumpxml</b>
       <b>Syntax:</b>

          managedsave-dumpxml [--security-info] [--xpath EXPRESSION] [--wrap] domain

       Extract  the  domain  XML  that  was in effect at the time the saved state file <u>file</u> was created with the
       <b>managedsave</b> command.  Using <u>--security-info</u> will also include security sensitive information.

       If the <b>--xpath</b> argument provides an XPath expression, it will be evaluated against  the  output  XML  and
       only  those  matching  nodes  will  be printed. The default behaviour is to print each matching node as a
       standalone document, however, for ease of additional processing,  the  <b>--wrap</b>  argument  will  cause  the
       matching node to be wrapped in a common root node.

   <b>managedsave-edit</b>
       <b>Syntax:</b>

          managedsave-edit domain [{--running | --paused}]

       Edit  the XML configuration associated with a saved state file of a <u>domain</u> was created by the <b>managedsave</b>
       command.

       The managed save image records whether the domain should  be  started  to  a  running  or  paused  state.
       Normally,  this  command does not alter the recorded state; passing either the <u>--running</u> or <u>--paused</u> flag
       will allow overriding which state the <b>restore</b> should use.

       This is equivalent to:

          virsh managedsave-dumpxml domain-name &gt; state-file.xml
          vi state-file.xml (or make changes with your other text editor)
          virsh managedsave-define domain-name state-file-xml

       except that it does some error checking.

       The editor used can be supplied by the <b>$VISUAL</b> or <b>$EDITOR</b> environment variables, and defaults to <b>vi</b>.

   <b>managedsave-remove</b>
       <b>Syntax:</b>

          managedsave-remove domain

       Remove the <b>managedsave</b> state file for a domain, if it exists.  This ensures the domain  will  do  a  full
       boot the next time it is started.

   <b>maxvcpus</b>
       <b>Syntax:</b>

          maxvcpus [type]

       Provide the maximum number of virtual CPUs supported for a guest VM on this connection.  If provided, the
       <u>type</u> parameter must be a valid type attribute for the &lt;domain&gt; element of XML.

   <b>memtune</b>
       <b>Syntax:</b>

          memtune domain [--hard-limit size] [--soft-limit size] [--swap-hard-limit size]
             [--min-guarantee size] [[--config] [--live] | [--current]]

       Allows  you  to  display  or  set  the  domain memory parameters. Without flags, the current settings are
       displayed; with a flag, the appropriate limit is adjusted  if  supported  by  the  hypervisor.   LXC  and
       QEMU/KVM support <u>--hard-limit</u>, <u>--soft-limit</u>, and <u>--swap-hard-limit</u>.  <u>--min-guarantee</u> is supported only by
       ESX  hypervisor.  Each of these limits are scaled integers (see <b>NOTES</b> above), with a default of kibibytes
       (blocks of 1024 bytes) if no suffix is  present.  Libvirt  rounds  up  to  the  nearest  kibibyte.   Some
       hypervisors  require  a  larger  granularity than KiB, and requests that are not an even multiple will be
       rounded up.  For example, vSphere/ESX rounds the parameter up to mebibytes (1024 kibibytes).

       If <u>--live</u> is specified, affect a running guest.  If <u>--config</u> is specified, affect the  next  start  of  a
       persistent guest.  If <u>--current</u> is specified, it is equivalent to either <u>--live</u> or <u>--config</u>, depending on
       the current state of the guest.  Both <u>--live</u> and <u>--config</u> flags may be given, but <u>--current</u> is exclusive.
       If no flag is specified, behavior is different depending on hypervisor.

       For  QEMU/KVM,  the parameters are applied to the QEMU process as a whole.  Thus, when counting them, one
       needs to add up guest RAM, guest video RAM, and some memory overhead of QEMU itself.  The last  piece  is
       hard to determine so one needs guess and try.

       For  LXC, the displayed hard_limit value is the current memory setting from the XML or the results from a
       <b>virsh</b> <b>setmem</b> command.

       • <u>--hard-limit</u>

         The maximum memory the guest can use.

       • <u>--soft-limit</u>

         The memory limit to enforce during memory contention.

       • <u>--swap-hard-limit</u>

         The maximum memory plus swap the guest can use.  This has to be more than hard-limit value provided.

       • <u>--min-guarantee</u>

         The guaranteed minimum memory allocation for the guest.

       Specifying -1 as a value for these limits is interpreted as unlimited.

   <b>metadata</b>
       <b>Syntax:</b>

          metadata domain [[--live] [--config] | [--current]]
             [--edit] [uri] [key] [set] [--remove]

       Show or modify custom XML metadata of a domain. The metadata is a user defined XML  that  allows  storing
       arbitrary  XML  data in the domain definition.  Multiple separate custom metadata pieces can be stored in
       the domain XML.  The pieces are identified by a private XML namespace provided via the <u>uri</u> argument. (See
       also <b>desc</b> that works with textual metadata of a domain.)

       Flags <u>--live</u> or <u>--config</u> select whether this command works on  live  or  persistent  definitions  of  the
       domain.  If  both  <u>--live</u> and <u>--config</u> are specified, the <u>--config</u> option takes precedence on getting the
       current description and both live configuration and config are updated  while  setting  the  description.
       <u>--current</u> is exclusive and implied if none of these was specified.

       Flag  <u>--remove</u> specifies that the metadata element specified by the <u>uri</u> argument should be removed rather
       than updated.

       Flag <u>--edit</u> specifies that an editor with the metadata identified by the <u>uri</u> argument  should  be  opened
       and the contents saved back afterwards.  Otherwise the new contents can be provided via the <u>set</u> argument.

       When  setting  metadata  via  <u>--edit</u>  or <u>set</u> the <u>key</u> argument must be specified and is used to prefix the
       custom elements to bind them to the private namespace.

       If neither of <u>--edit</u> and <u>set</u> are specified the  XML  metadata  corresponding  to  the  <u>uri</u>  namespace  is
       displayed instead of being modified.

   <b>migrate</b>
       <b>Syntax:</b>

          migrate [--live] [--offline] [--direct] [--p2p [--tunnelled]]
             [--persistent] [--undefinesource] [--suspend] [--copy-storage-all]
             [--copy-storage-inc] [--change-protection] [--unsafe] [--verbose]
             [--rdma-pin-all] [--abort-on-error] [--postcopy]
             [--postcopy-after-precopy] [--postcopy-resume] [--zerocopy]
             domain desturi [migrateuri] [graphicsuri] [listen-address] [dname]
             [--timeout seconds [--timeout-suspend | --timeout-postcopy]]
             [--xml file]
             [--migrate-disks disk-list] [--migrate-disks-detect-zeroes disk-list]
             [--disks-port port]
             [--compressed] [--comp-methods method-list]
             [--comp-mt-level] [--comp-mt-threads] [--comp-mt-dthreads]
             [--comp-xbzrle-cache] [--comp-zlib-level] [--comp-zstd-level]
             [--auto-converge] [auto-converge-initial]
             [auto-converge-increment] [--persistent-xml file] [--tls]
             [--postcopy-bandwidth bandwidth]
             [--parallel [--parallel-connections connections]]
             [--bandwidth bandwidth] [--tls-destination hostname]
             [--disks-uri URI] [--copy-storage-synchronous-writes]

       Migrate  domain  to  another  host.   Add  <u>--live</u>  for live migration; &lt;--p2p&gt; for peer-2-peer migration;
       <u>--direct</u> for direct migration;  or  <u>--tunnelled</u>  for  tunnelled  migration.   <u>--offline</u>  migrates  domain
       definition  without  starting  the domain on destination and without stopping it on source host.  Offline
       migration may be used with inactive domains and it must be used with <u>--persistent</u> option.

       <u>--persistent</u> leaves the domain persistent on destination host (See below for quirks  when  used  together
       with  <u>--xml</u>),  <u>--undefinesource</u>  undefines the domain on the source host, and <u>--suspend</u> leaves the domain
       paused on the destination host.

       <u>--copy-storage-all</u> indicates migration with non-shared storage with full  disk  copy,  <u>--copy-storage-inc</u>
       indicates  migration with non-shared storage with incremental copy (same base image shared between source
       and  destination).   In  both  cases  the  disk  images  have  to  exist   on   destination   host,   the
       <u>--copy-storage-...</u>  options  only  tell  libvirt  to  transfer data from the images on source host to the
       images found at the same place on the destination host. By default only  non-shared  non-readonly  images
       are  transferred.  Use  <u>--migrate-disks</u>  to explicitly specify a list of disk targets to transfer via the
       comma separated <b>disk-list</b>  argument.   The  <u>--migrate-disks-detect-zeroes</u>  option  which  takes  a  comma
       separated  list of disk target names enables zeroed block detection for the listed migrated disks.  These
       blocks are not transferred or allocated on destination, effectively sparsifying the disk at the  cost  of
       CPU  overhead. Users must ensure that any pre-created storage source is cleared and thus reads all-zeroes
       before  using  this  option  as  otherwise  the   destination   image   may   become   corrupted.    With
       <u>--copy-storage-synchronous-writes</u>  flag used the disk data migration will synchronously handle guest disk
       writes to both the original source and the destination to ensure that the disk migration converges at the
       price of possibly decreased burst performance.

       <u>--change-protection</u> enforces that no incompatible configuration changes will be made to the domain  while
       the  migration  is underway; this flag is implicitly enabled when supported by the hypervisor, but can be
       explicitly used to reject the migration if the hypervisor lacks change protection support.

       <u>--verbose</u> displays the progress of migration.

       <u>--abort-on-error</u> cancels the migration if a soft  error  (for  example  I/O  error)  happens  during  the
       migration.

       <u>--postcopy</u>  enables  post-copy logic in migration, but does not actually start post-copy, i.e., migration
       is started in pre-copy mode.  Once migration is running, the user  may  switch  to  post-copy  using  the
       <b>migrate-postcopy</b>  command  sent  from  another  virsh instance or use <u>--postcopy-after-precopy</u> along with
       <u>--postcopy</u> to let libvirt automatically switch to post-copy after the first pass of pre-copy is finished.
       The maximum bandwidth consumed during the post-copy phase may be limited using <u>--postcopy-bandwidth</u>.  The
       maximum bandwidth consumed during the pre-copy phase may be limited using <u>--bandwidth</u>. In case connection
       between  the  hosts  breaks  while migration is in post-copy mode, the domain cannot be resumed on either
       source or destination host and the <b>migrate</b> command will report an error leaving the domain active on both
       hosts.  To  recover  from  such  situation  repeat  the  original  <b>migrate</b>  command  with  an  additional
       <u>--postcopy-resume</u> flag.

       <u>--auto-converge</u>  forces  convergence  during live migration. The initial guest CPU throttling rate can be
       set with <u>auto-converge-initial</u>. If the initial throttling rate is not enough to ensure  convergence,  the
       rate is periodically increased by <u>auto-converge-increment</u>.

       <u>--rdma-pin-all</u>  can  be  used with RDMA migration (i.e., when <u>migrateuri</u> starts with rdma://) to tell the
       hypervisor to pin all domain's memory at once before migration starts rather than letting it  pin  memory
       pages  as  needed.  For QEMU/KVM this requires hard_limit memory tuning element (in the domain XML) to be
       used and set to the maximum memory configured for the domain plus any memory consumed by the QEMU process
       itself. Beware of setting the memory limit too high (and thus allowing the domain to  lock  most  of  the
       host's  memory). Doing so may be dangerous to both the domain and the host itself since the host's kernel
       may run out of memory.

       <u>--zerocopy</u> requests zero-copy mechanism to be used for migrating memory pages.  For QEMU/KVM  this  means
       QEMU  will  be temporarily allowed to lock all guest pages in host's memory, although only those that are
       queued for transfer will be locked at the same time.

       <b>Note</b>: Individual hypervisors usually do not support all possible types of migration.  For  example,  QEMU
       does not support direct migration.

       In  some  cases  libvirt may refuse to migrate the domain because doing so may lead to potential problems
       such as data corruption, and thus the migration is considered unsafe. For QEMU domain, this may happen if
       the domain uses disks without explicitly setting cache mode to "none". Migrating such domains  is  unsafe
       unless the disk images are stored on coherent clustered filesystem, such as GFS2 or GPFS. If you are sure
       the migration is safe or you just do not care, use <u>--unsafe</u> to force the migration.

       <u>dname</u> is used for renaming the domain to new name during migration, which also usually can be omitted.

       <u>--xml</u>  <b>file</b>,  while  usually  not  required, can be used to supply an alternative XML file for use on the
       destination to supply a larger set of changes to any host-specific portions of the domain  XML,  such  as
       accounting  for  naming  differences  between  source and destination in accessing underlying storage. If
       <u>--xml</u> is used together with <u>--persistent</u> it's usually required to provide a persistent XML definition via
       <u>--persistent-xml</u> (see below) which is fixed the same way as the XML passed to <u>--file</u> was.

       If <u>--persistent</u> is enabled, <u>--persistent-xml</u> <b>file</b> can be used to supply an  alternative  XML  file  which
       will be used as the persistent guest definition on the destination host.

       <u>--timeout</u>  <b>seconds</b>  tells  virsh to run a specified action when live migration exceeds that many seconds.
       It can only be used with <u>--live</u>.  If <u>--timeout-suspend</u> is specified, the domain will be  suspended  after
       the  timeout  and  the migration will complete offline; this is the default if no <u>--timeout-\``</u> <u>option</u> <u>is</u>
       <u>specified</u> <u>on</u> <u>the</u> <u>command</u> <u>line.</u>  <u>When</u> <u>*--timeout-postcopy</u>  is  used,  virsh  will  switch  migration  from
       pre-copy to post-copy upon timeout; migration has to be started with <u>--postcopy</u> option for this to work.

       <u>--compressed</u>  activates  compression,  the  compression  method  is chosen with <u>--comp-methods</u>. Supported
       methods are "mt", "xbzrle", "zlib", and "zstd". The supported  set  of  methods  and  their  combinations
       depend  on  a  hypervisor  and  migration  options.  QEMU  only  supports  "zlib" and "zstd" methods when
       <u>--parallel</u> is used and they cannot be used at once. When no methods are specified, a  hypervisor  default
       methods  will  be  used.  QEMU  defaults  to  "xbzrle" as long as <u>--parallel</u> is not used.  For <u>--parallel</u>
       migrations QEMU does not provide any  default  compression  method  and  thus  it  has  to  be  specified
       explicitly  using  <u>--comp-method</u>.   Compression  methods  can  be  tuned  further.  <u>--comp-mt-level</u>  sets
       compression level for "mt" method. Values are in range from 0 to 9, where 1 is maximum  speed  and  9  is
       maximum  compression.  <u>--comp-mt-threads</u>  and  <u>--comp-mt-dthreads</u>  set  the number of compress threads on
       source and the number of decompress threads on target respectively. <u>--comp-xbzrle-cache</u> sets size of page
       cache in bytes. <u>--comp-zlib-level</u> sets the compression level when using  "zlib"  method.  Values  are  in
       range  from  0  to  9  and  defaults to 1, where 0 is no compression, 1 is maximum speed and 9 is maximum
       compression. <u>--comp-zstd-level</u> sets the compression level when using "zstd" method. Values are  in  range
       from  0  to  20  and  defaults  to  1,  where  0  is no compression, 1 is maximum speed and 20 is maximum
       compression.

       Providing <u>--tls</u> causes the migration to use the host configured TLS setup (see  migrate_tls_x509_cert_dir
       in  /etc/libvirt/qemu.conf)  in  order  to perform the migration of the domain. Usage requires proper TLS
       setup for both source and target. Normally the TLS certificate from the destination host must  match  the
       host's name for TLS verification to succeed. When the certificate does not match the destination hostname
       and  the  expected  certificate's  hostname  is known, <u>--tls-destination</u> can be used to pass the expected
       <u>hostname</u> when starting the migration.

       <u>--parallel</u> option will cause migration data to be sent over multiple parallel connections. The number  of
       such  connections  can be set using <u>--parallel-connections</u>. Parallel connections may help with saturating
       the network link between the source and the target and thus speeding up the migration.

       Running migration can be canceled by interrupting virsh (usually using <b>Ctrl-C</b>) or by <b>domjobabort</b>  command
       sent from another virsh instance.

       The  <u>desturi</u>  and  <u>migrateuri</u>  parameters  can  be  used to control which destination the migration uses.
       <u>desturi</u> is important for managed migration, but unused for direct migration; <u>migrateuri</u> is  required  for
       direct migration, but can usually be automatically determined for managed migration.

       <b>Note</b>: The <u>desturi</u> parameter for normal migration and peer2peer migration has different semantics:

       • normal migration: the <u>desturi</u> is an address of the target host as seen from the client machine.

       • peer2peer migration: the <u>desturi</u> is an address of the target host as seen from the source machine.

       In  a special circumstance where you require a complete control of the connection and/or libvirt does not
       have network access to the remote side you can use a UNIX transport in the URI and specify a socket  path
       in the query, for example with the qemu driver you could use this:

          qemu+unix:///system?socket=/path/to/socket

       When <u>migrateuri</u> is not specified, libvirt will automatically determine the hypervisor specific URI.  Some
       hypervisors,  including  QEMU, have an optional "migration_host" configuration parameter (useful when the
       host has multiple network interfaces).  If this is unspecified, libvirt determines a name by  looking  up
       the target host's configured hostname.

       There are a few scenarios where specifying <u>migrateuri</u> may help:

       • The  configured  hostname  is  incorrect,  or  DNS  is broken.  If a host has a hostname which will not
         resolve to match one of its public IP addresses, then libvirt will generate an incorrect URI.  In  this
         case <u>migrateuri</u> should be explicitly specified, using an IP address, or a correct hostname.

       • The  host  has  multiple  network  interfaces.   If a host has multiple network interfaces, it might be
         desirable for the migration data stream to be sent over a specific interface  for  either  security  or
         performance  reasons.   In  this  case  <u>migrateuri</u>  should be explicitly specified, using an IP address
         associated with the network to be used.

       • The firewall restricts what ports are available.  When libvirt generates a migration URI, it will  pick
         a  port number using hypervisor specific rules.  Some hypervisors only require a single port to be open
         in the firewalls, while others require a whole range of port numbers.  In the  latter  case  <u>migrateuri</u>
         might  be  specified to choose a specific port number outside the default range in order to comply with
         local firewall policies.

       • The <u>desturi</u> uses UNIX transport method.  In this advanced case libvirt should not  guess  a  <u>migrateuri</u>
         and it should be specified using UNIX socket path URI:

          unix:///path/to/socket

       See  &lt;https://libvirt.org/migration.html#uris&gt;  for more details on migration URIs.

       Optional  <u>graphicsuri</u>  overrides  connection  parameters  used for automatically reconnecting a graphical
       clients at the end of migration. If omitted, libvirt will compute the parameters based on target host  IP
       address.  In  case  the  client  does  not  have  a direct access to the network virtualization hosts are
       connected to and needs to connect through a proxy, <u>graphicsuri</u> may be used to  specify  the  address  the
       client should connect to. The URI is formed as follows:

          protocol://hostname[:port]/[?parameters]

       where  protocol  is  either  "spice"  or  "vnc"  and parameters is a list of protocol specific parameters
       separated by '&amp;'. Currently recognized parameters are "tlsPort" and "tlsSubject". For example,

          spice://target.host.com:1234/?tlsPort=4567

       Optional <u>listen-address</u> sets the listen address that hypervisor on the destination side  should  bind  to
       for  incoming migration. Both IPv4 and IPv6 addresses are accepted as well as hostnames (the resolving is
       done on destination).  Some hypervisors do not support specifying the listen address and will  return  an
       error if this parameter is used. This parameter cannot be used if <u>desturi</u> uses UNIX transport method.

       Optional  <u>disks-port</u>  sets the port that hypervisor on destination side should bind to for incoming disks
       traffic. Currently it is supported only by QEMU.

       Optional <u>disks-uri</u> can also be specified (mutually exclusive with <u>disks-port</u>) to specify what the  remote
       hypervisor  should  bind/connect  to  when  migrating disks.  This can be <u>tcp://address:port</u> to specify a
       listen address (which overrides <u>--migrate-uri</u> and <u>--listen-address</u> for the disk migration) and a port  or
       <u>unix:///path/to/socket</u>  in  case  you  need  the  disk  migration  to happen over a UNIX socket with that
       specified path.  In this case you need to make sure the same socket path is accessible to both source and
       destination hypervisors and connecting to the socket on the source (after hypervisor creates  it  on  the
       destination)  will  actually connect to the destination. If you are using SELinux (at least on the source
       host) you need to make sure the socket on the source  is  accessible  to  libvirtd/QEMU  for  connection.
       Libvirt  cannot  change  the  context  of  the  existing  socket  because  it  is different from the file
       representation  of  the  socket  and  the  context  is  chosen  by  its   creator   (usually   by   using
       <u>setsockcreatecon{,_raw}()</u> functions).

   <b>migrate-compcache</b>
       <b>Syntax:</b>

          migrate-compcache domain [--size bytes]

       Sets  and/or  gets  size of the cache (in bytes) used for compressing repeatedly transferred memory pages
       during live migration. When called without <u>size</u>, the command just prints current size of the  compression
       cache. When <u>size</u> is specified, the hypervisor is asked to change compression cache to <u>size</u> bytes and then
       the  current  size  is printed (the result may differ from the requested size due to rounding done by the
       hypervisor). The <u>size</u> option is supposed to be used while the domain is being live-migrated as a reaction
       to migration progress and increasing number of compression cache misses obtained from domjobinfo.

   <b>migrate-getmaxdowntime</b>
       <b>Syntax:</b>

          migrate-getmaxdowntime domain

       Get the maximum tolerable downtime for a domain which is being live-migrated to another  host.   This  is
       the number of milliseconds the guest is allowed to be down at the end of live migration.

   <b>migrate-getspeed</b>
       <b>Syntax:</b>

          migrate-getspeed domain [--postcopy]

       Get  the  maximum migration bandwidth (in MiB/s) for a domain. If the <u>--postcopy</u> option is specified, the
       command will get the maximum bandwidth allowed during a post-copy migration phase.

   <b>migrate-postcopy</b>
       <b>Syntax:</b>

          migrate-postcopy domain

       Switch the current migration from pre-copy to post-copy. This is only supported for a  migration  started
       with <u>--postcopy</u> option.

   <b>migrate-setmaxdowntime</b>
       <b>Syntax:</b>

          migrate-setmaxdowntime domain downtime

       Set  maximum  tolerable downtime for a domain which is being live-migrated to another host.  The <u>downtime</u>
       is a number of milliseconds the guest is allowed to be down at the end of live migration.

   <b>migrate-setspeed</b>
       <b>Syntax:</b>

          migrate-setspeed domain bandwidth [--postcopy]

       Set the maximum migration bandwidth (in MiB/s) for a domain which is  being  migrated  to  another  host.
       <u>bandwidth</u>  is  interpreted  as  an  unsigned  long  long value. Specifying a negative value results in an
       essentially unlimited value being provided to the hypervisor. The hypervisor can choose whether to reject
       the value or convert it to the maximum value allowed. If the <u>--postcopy</u> option is specified, the  command
       will set the maximum bandwidth allowed during a post-copy migration phase.

   <b>numatune</b>
       <b>Syntax:</b>

          numatune domain [--mode mode] [--nodeset nodeset]
             [[--config] [--live] | [--current]]

       Set  or  get  a domain's numa parameters, corresponding to the &lt;numatune&gt; element of domain XML.  Without
       flags, the current settings are displayed.

       <u>mode</u> can be one of `strict', `interleave', `preferred' and 'restrictive' or any  valid  number  from  the
       virDomainNumatuneMemMode  enum  in  case the daemon supports it.  For a running domain, the mode can't be
       changed, and the nodeset can be changed only if the domain was started with `restrictive' mode.

       <u>nodeset</u> is a list of numa nodes used by the host for running the domain.  Its syntax is a comma separated
       list, with '-' for ranges and '^' for excluding a node.

       If <u>--live</u> is specified, set scheduler information of a running guest.  If <u>--config</u> is  specified,  affect
       the  next  start  of a persistent guest.  If <u>--current</u> is specified, it is equivalent to either <u>--live</u> or
       <u>--config</u>, depending on the current state of the guest.

       For running guests in Linux hosts, the changes made in the domain's numa parameters does not  imply  that
       the  guest  memory  will be moved to a different nodeset immediately. The memory migration depends on the
       guest activity, and the memory of an idle guest will remain in  its  previous  nodeset  for  longer.  The
       presence  of  VFIO devices will also lock parts of the guest memory in the same nodeset used to start the
       guest, regardless of nodeset changes.

   <b>perf</b>
       <b>Syntax:</b>

          perf domain [--enable eventSpec] [--disable eventSpec]
             [[--config] [--live] | [--current]]

       Get the current perf events setting or enable/disable specific perf events for a guest domain.

       Perf is a performance  analyzing  tool  in  Linux,  and  it  can  instrument  CPU  performance  counters,
       tracepoints,  kprobes,  and uprobes (dynamic tracing). Perf supports a list of measurable events, and can
       measure events coming from different sources. For instance, some event are pure kernel counters, in  this
       case  they  are  called  software  events,  including context-switches, minor-faults, etc.. Now dozens of
       events from different sources can be supported by perf.

       Currently only QEMU/KVM supports this command. The <u>--enable</u> and <u>--disable</u> option combined with  <b>eventSpec</b>
       can  be  used  to enable or disable specific performance event. <b>eventSpec</b> is a string list of one or more
       events separated by commas. Valid event names are as follows:

       <b>Valid</b> <b>perf</b> <b>event</b> <b>names</b>

       • <b>cmt</b> - A PQos (Platform Qos) feature to monitor the usage  of  cache  by  applications  running  on  the
         platform.

       • <b>mbmt</b>  -  Provides  a  way  to  monitor the total system memory bandwidth between one level of cache and
         another.

       • <b>mbml</b> - Provides a way to limit the amount of data (bytes/s) send through the memory controller  on  the
         socket.

       • <b>cache_misses</b> - Provides the count of cache misses by applications running on the platform.

       • <b>cache_references</b> - Provides the count of cache hits by applications running on th e platform.

       • <b>instructions</b> - Provides the count of instructions executed by applications running on the platform.

       • <b>cpu_cycles</b>  -  Provides the count of cpu cycles (total/elapsed). May be used with instructions in order
         to get a cycles per instruction.

       • <b>branch_instructions</b> - Provides the count of branch instructions executed by applications running on the
         platform.

       • <b>branch_misses</b> - Provides the count of branch misses executed by applications running on the platform.

       • <b>bus_cycles</b> - Provides the count of bus cycles executed by applications running on the platform.

       • <b>stalled_cycles_frontend</b> - Provides the count of stalled cpu cycles in the frontend of  the  instruction
         processor pipeline by applications running on the platform.

       • <b>stalled_cycles_backend</b>  -  Provides  the  count of stalled cpu cycles in the backend of the instruction
         processor pipeline by applications running on the platform.

       • <b>ref_cpu_cycles</b> -  Provides the count of total cpu cycles not  affected  by  CPU  frequency  scaling  by
         applications running on the platform.

       • <b>cpu_clock</b> - Provides the cpu clock time consumed by applications running on the platform.

       • <b>task_clock</b> - Provides the task clock time consumed by applications running on the platform.

       • <b>page_faults</b> - Provides the count of page faults by applications running on the platform.

       • <b>context_switches</b> - Provides the count of context switches by applications running on the platform.

       • <b>cpu_migrations</b> - Provides the count cpu migrations by applications running on the platform.

       • <b>page_faults_min</b> - Provides the count minor page faults by applications running on the platform.

       • <b>page_faults_maj</b> - Provides the count major page faults by applications running on the platform.

       • <b>alignment_faults</b> - Provides the count alignment faults by applications running on the platform.

       • <b>emulation_faults</b> - Provides the count emulation faults by applications running on the platform.

       <b>Note</b>: The statistics can be retrieved using the <b>domstats</b> command using the <u>--perf</u> flag.

       If  <u>--live</u>  is  specified,  affect a running guest.  If <u>--config</u> is specified, affect the next start of a
       persistent guest.  If <u>--current</u> is specified, it is equivalent to either <u>--live</u> or <u>--config</u>, depending on
       the current state of the guest.  Both <u>--live</u> and <u>--config</u> flags may be given, but <u>--current</u> is exclusive.
       If no flag is specified, behavior is different depending on hypervisor.

   <b>reboot</b>
       <b>Syntax:</b>

          reboot domain [--mode MODE-LIST]

       Reboot a domain.  This acts just as if the domain had the <b>reboot</b>  command  run  from  the  console.   The
       command  returns  as  soon  as  it  has executed the reboot action, which may be significantly before the
       domain actually reboots.

       The exact behavior of a domain when it reboots is set by the <u>on_reboot</u>  parameter  in  the  domain's  XML
       definition.

       By  default the hypervisor will try to pick a suitable shutdown method. To specify an alternative method,
       the <u>--mode</u> parameter can specify a comma separated list which includes <b>acpi</b>, <b>agent</b>, <b>initctl</b>,  <b>signal</b>  and
       <b>paravirt</b>.  The  order  in  which  drivers  will  try each mode is undefined, and not related to the order
       specified to virsh.  For strict control over ordering, use a  single  mode  at  a  time  and  repeat  the
       command.

   <b>reset</b>
       <b>Syntax:</b>

          reset domain

       Reset  a  domain  immediately  without  any  guest  shutdown.  <b>reset</b> emulates the power reset button on a
       machine, where all guest hardware sees the RST line set and reinitializes internal state.

       <b>Note</b>: Reset without any guest OS shutdown risks data loss.

   <b>restore</b>
       <b>Syntax:</b>

          restore state-file [--bypass-cache] [--xml file]
             [{--running | --paused}] [--reset-nvram]

       Restores a domain from a <b>virsh</b> <b>save</b> state file. See <u>save</u> for more info.

       If <u>--bypass-cache</u> is specified, the restore will avoid the file system cache, although this may slow down
       the operation.

       <u>--xml</u> <b>file</b> is usually omitted, but can be used to supply an alternative XML file for use on the  restored
       guest  with changes only in the host-specific portions of the domain XML.  For example, it can be used to
       account for file naming differences in underlying storage due to disk snapshots taken after the guest was
       saved.

       Normally, restoring a saved image will use the state recorded in the save image to decide between running
       or paused; passing either the <u>--running</u> or <u>--paused</u> flag will allow overriding  which  state  the  domain
       should be started in.

       If  <u>--reset-nvram</u>  is  specified,  any  existing  NVRAM  file will be deleted and re-initialized from its
       pristine template.

       <b>Note</b>: To avoid corrupting file system contents within the domain, you should not reuse  the  saved  state
       file  for a second <b>restore</b> unless you have also reverted all storage volumes back to the same contents as
       when the state file was created.

   <b>resume</b>
       <b>Syntax:</b>

          resume domain

       Moves a domain out of the suspended state.  This will allow a  previously  suspended  domain  to  now  be
       eligible for scheduling by the underlying hypervisor.

   <b>save</b>
       <b>Syntax:</b>

          save domain state-file [--bypass-cache] [--xml file]
             [{--running | --paused}] [--verbose]

       Saves  a running domain (RAM, but not disk state) to a state file so that it can be restored later.  Once
       saved, the domain will no longer be running on the system, thus the memory allocated for the domain  will
       be  free  for  other  domains to use.  <b>virsh</b> <b>restore</b> restores from this state file.  If <u>--bypass-cache</u> is
       specified, the save will avoid the file system cache, although this may slow down the operation.

       The progress may be monitored using <b>domjobinfo</b> virsh command and canceled with <b>domjobabort</b> command  (sent
       by  another  virsh instance). Another option is to send SIGINT (usually with <b>Ctrl-C</b>) to the virsh process
       running <b>save</b> command. <u>--verbose</u> displays the progress of save.

       This is roughly equivalent to doing a hibernate on a running computer, with  all  the  same  limitations.
       Open network connections may be severed upon restore, as TCP timeouts may have expired.

       <u>--xml</u>  <b>file</b> is usually omitted, but can be used to supply an alternative XML file for use on the restored
       guest with changes only in the host-specific portions of the domain XML.  For example, it can be used  to
       account  for file naming differences that are planned to be made via disk snapshots of underlying storage
       after the guest is saved.

       Normally, restoring a saved image will decide between running or paused based on the state the domain was
       in when the save was done; passing either the <u>--running</u> or <u>--paused</u>  flag  will  allow  overriding  which
       state the <b>restore</b> should use.

       Domain  saved  state  files  assume  that  disk images will be unchanged between the creation and restore
       point.  For a more complete system restore point, where the disk state  is  saved  alongside  the  memory
       state, see the <b>snapshot</b> family of commands.

   <b>save-image-define</b>
       <b>Syntax:</b>

          save-image-define file xml [{--running | --paused}]

       Update the domain XML that will be used when <u>file</u> is later used in the <b>restore</b> command.  The <u>xml</u> argument
       must  be  a  file name containing the alternative XML, with changes only in the host-specific portions of
       the domain XML.  For example, it can be used to  account  for  file  naming  differences  resulting  from
       creating disk snapshots of underlying storage after the guest was saved.

       The  save  image  records  whether the domain should be restored to a running or paused state.  Normally,
       this command does not alter the recorded state; passing either the <u>--running</u> or <u>--paused</u> flag will  allow
       overriding which state the <b>restore</b> should use.

   <b>save-image-dumpxml</b>
       <b>Syntax:</b>

          save-image-dumpxml [--security-info] [--xpath EXPRESSION] [--wrap] file

       Extract the domain XML that was in effect at the time the saved state file <u>file</u> was created with the <b>save</b>
       command.  Using <u>--security-info</u> will also include security sensitive information.

       If  the  <b>--xpath</b>  argument  provides an XPath expression, it will be evaluated against the output XML and
       only those matching nodes will be printed. The default behaviour is to print  each  matching  node  as  a
       standalone  document,  however,  for  ease  of  additional processing, the <b>--wrap</b> argument will cause the
       matching node to be wrapped in a common root node.

   <b>save-image-edit</b>
       <b>Syntax:</b>

          save-image-edit file [{--running | --paused}]

       Edit the XML configuration associated with a saved state file <u>file</u> created by the <b>save</b> command.

       The save image records whether the domain should be restored to a running  or  paused  state.   Normally,
       this  command does not alter the recorded state; passing either the <u>--running</u> or <u>--paused</u> flag will allow
       overriding which state the <b>restore</b> should use.

       This is equivalent to:

          virsh save-image-dumpxml state-file &gt; state-file.xml
          vi state-file.xml (or make changes with your other text editor)
          virsh save-image-define state-file state-file-xml

       except that it does some error checking.

       The editor used can be supplied by the <b>$VISUAL</b> or <b>$EDITOR</b> environment variables, and defaults to <b>vi</b>.

   <b>schedinfo</b>
       <b>Syntax:</b>

          schedinfo domain [[--config] [--live] | [--current]] [[--set] parameter=value]...
          schedinfo [--weight number] [--cap number] domain

       Allows you to show (and  set)  the  domain  scheduler  parameters.  The  parameters  available  for  each
       hypervisor are:

       LXC (posix scheduler) : cpu_shares, vcpu_period, vcpu_quota

       QEMU/KVM   (posix  scheduler):  cpu_shares,  vcpu_period,  vcpu_quota,  emulator_period,  emulator_quota,
       global_period, global_quota, iothread_period, iothread_quota

       Xen (credit scheduler): weight, cap

       ESX (allocation scheduler): reservation, limit, shares

       If <u>--live</u> is specified, set scheduler information of a running guest.  If <u>--config</u> is  specified,  affect
       the  next  start  of a persistent guest.  If <u>--current</u> is specified, it is equivalent to either <u>--live</u> or
       <u>--config</u>, depending on the current state of the guest.

       <b>Note</b>: The cpu_shares parameter has a valid value range of 2-262144 with cgroups v1, 1-10000 with  cgroups
       v2.

       <b>Note</b>: The weight and cap parameters are defined only for the XEN_CREDIT scheduler.

       <b>Note</b>:  The  vcpu_period,  emulator_period,  and  iothread_period  parameters  have a valid value range of
       1000-1000000 or 0, and the vcpu_quota, emulator_quota, and iothread_quota parameters have a  valid  value
       range  of  1000-17592186044415  or  less  than  0.  The  value  0 for either parameter is the same as not
       specifying that parameter.

   <b>screenshot</b>
       <b>Syntax:</b>

          screenshot domain [imagefilepath] [--screen screenID]

       Takes a screenshot of a current domain console and stores it into a file.  Optionally, if the  hypervisor
       supports  more displays for a domain, <u>screenID</u> allows specifying which screen will be captured. It is the
       sequential number of screen. In case of multiple graphics cards, heads  are  enumerated  before  devices,
       e.g. having two graphics cards, both with four heads, screen ID 5 addresses the second head on the second
       card.

   <b>send-key</b>
       <b>Syntax:</b>

          send-key domain [--codeset codeset] [--holdtime holdtime] keycode...

       Parse  the  <u>keycode</u> sequence as keystrokes to send to <u>domain</u>.  Each <u>keycode</u> can either be a numeric value
       or a symbolic name from the corresponding codeset.  If <u>--holdtime</u> is given, each keystroke will  be  held
       for  that  many milliseconds.  The default codeset is <b>linux</b>, but use of the <u>--codeset</u> option allows other
       codesets to be chosen.

       If multiple keycodes are specified, they are all sent simultaneously  to  the  guest,  and  they  may  be
       received in random order. If you need distinct keypresses, you must use multiple send-key invocations.

       • <b>linux</b>

         The  numeric  values  are  those defined by the Linux generic input event subsystem. The symbolic names
         match the corresponding Linux key constant macro names.

         See <a href="../man7/virkeycode-linux.7.html">virkeycode-linux</a>(7) and <a href="../man7/virkeyname-linux.7.html">virkeyname-linux</a>(7)

       • <b>xt</b>

         The numeric values are those defined by the original XT keyboard  controller.  No  symbolic  names  are
         provided

         See <a href="../man7/virkeycode-xt.7.html">virkeycode-xt</a>(7)

       • <b>atset1</b>

         The  numeric  values  are  those  defined by the AT keyboard controller, set 1 (aka XT compatible set).
         Extended keycoes from <b>atset1</b> may differ from extended keycodes in the <b>xt</b> codeset. No symbolic names are
         provided

         See <a href="../man7/virkeycode-atset1.7.html">virkeycode-atset1</a>(7)

       • <b>atset2</b>

         The numeric values are those defined by the AT keyboard  controller,  set  2.  No  symbolic  names  are
         provided

         See <a href="../man7/virkeycode-atset2.7.html">virkeycode-atset2</a>(7)

       • <b>atset3</b>

         The numeric values are those defined by the AT keyboard controller, set 3 (aka PS/2 compatible set). No
         symbolic names are provided

         See <a href="../man7/virkeycode-atset3.7.html">virkeycode-atset3</a>(7)

       • <b>os_x</b>

         The  numeric  values  are those defined by the macOS keyboard input subsystem. The symbolic names match
         the corresponding macOS key constant macro names

         See <a href="../man7/virkeycode-osx.7.html">virkeycode-osx</a>(7) and <a href="../man7/virkeyname-osx.7.html">virkeyname-osx</a>(7)

       • <b>xt_kbd</b>

         The numeric values are those defined by the Linux KBD device.  These are a variant on the  original  XT
         codeset, but often with different encoding for extended keycodes. No symbolic names are provided.

         See <a href="../man7/virkeycode-xtkbd.7.html">virkeycode-xtkbd</a>(7)

       • <b>win32</b>

         The  numeric  values  are those defined by the Win32 keyboard input subsystem. The symbolic names match
         the corresponding Win32 key constant macro names

         See <a href="../man7/virkeycode-win32.7.html">virkeycode-win32</a>(7) and <a href="../man7/virkeyname-win32.7.html">virkeyname-win32</a>(7)

       • <b>usb</b>

         The numeric values are those defined by the USB HID specification for keyboard input. No symbolic names
         are provided

         See <a href="../man7/virkeycode-usb.7.html">virkeycode-usb</a>(7)

       • <b>qnum</b>

         The numeric values are those defined by the QNUM extension  for  sending  raw  keycodes.  These  are  a
         variant  on  the  XT codeset, but extended keycodes have the low bit of the second byte set, instead of
         the high bit of the first byte. No symbolic names are provided.

         See <a href="../man7/virkeycode-qnum.7.html">virkeycode-qnum</a>(7)

       <b>Examples:</b>

          # send three strokes 'k', 'e', 'y', using xt codeset. these
          # are all pressed simultaneously and may be received by the guest
          # in random order
          virsh send-key dom --codeset xt 37 18 21

          # send one stroke 'right-ctrl+C'
          virsh send-key dom KEY_RIGHTCTRL KEY_C

          # send a tab, held for 1 second
          virsh send-key --holdtime 1000 0xf

   <b>send-process-signal</b>
       <b>Syntax:</b>

          send-process-signal domain-id pid signame

       Send a signal <u>signame</u> to the process identified by <u>pid</u> running in the virtual domain <u>domain-id</u>.  The  <u>pid</u>
       is a process ID in the virtual domain namespace.

       The <u>signame</u> argument may be either an integer signal constant number, or one of the symbolic names:

          "nop", "hup", "int", "quit", "ill",
          "trap", "abrt", "bus", "fpe", "kill",
          "usr1", "segv", "usr2", "pipe", "alrm",
          "term", "stkflt", "chld", "cont", "stop",
          "tstp", "ttin", "ttou", "urg", "xcpu",
          "xfsz", "vtalrm", "prof", "winch", "poll",
          "pwr", "sys", "rt0", "rt1", "rt2", "rt3",
          "rt4", "rt5", "rt6", "rt7", "rt8", "rt9",
          "rt10", "rt11", "rt12", "rt13", "rt14", "rt15",
          "rt16", "rt17", "rt18", "rt19", "rt20", "rt21",
          "rt22", "rt23", "rt24", "rt25", "rt26", "rt27",
          "rt28", "rt29", "rt30", "rt31", "rt32"

       The symbol name may optionally be prefixed with <b>sig</b> or <b>sig_</b> and may be in uppercase or lowercase.

       <b>Examples:</b>

          virsh send-process-signal myguest 1 15
          virsh send-process-signal myguest 1 term
          virsh send-process-signal myguest 1 sigterm
          virsh send-process-signal myguest 1 SIG_HUP

   <b>set-lifecycle-action</b>
       <b>Syntax:</b>

          set-lifecycle-action domain type action
             [[--config] [--live] | [--current]]

       Set  the  lifecycle  <u>action</u>  for  specified lifecycle <u>type</u>.  The valid types are "poweroff", "reboot" and
       "crash", and for each of them valid <u>action</u> is one of "destroy", "restart", "rename-restart",  "preserve".
       For <u>type</u> "crash", additional actions "coredump-destroy" and "coredump-restart" are supported.

   <b>set-user-password</b>
       <b>Syntax:</b>

          set-user-password domain user password [--encrypted]

       Set the password for the <u>user</u> account in the guest domain.

       If  <u>--encrypted</u>  is  specified, the password is assumed to be already encrypted by the method required by
       the guest OS.

       For QEMU/KVM, this requires the guest agent to be configured and running.

   <b>set-user-sshkeys</b>
       <b>Syntax:</b>

          set-user-sshkeys domain user [--file FILE] [{--reset | --remove}]

       Append keys read from <u>FILE</u> into <u>user</u>'s SSH authorized keys file in the guest <u>domain</u>.  In  the  <u>FILE</u>  keys
       must be on separate lines and each line must follow authorized keys format as defined by <u><a href="../man8/sshd.8.html">sshd</a>(8)</u>.

       If  <u>--reset</u>  is  specified,  then  the guest authorized keys file content is removed before appending new
       keys. As a special case, if <u>--reset</u> is provided and no <u>FILE</u> was provided then no new keys are  added  and
       the authorized keys file is cleared out.

       If  <u>--remove</u>  is specified, then instead of adding any new keys then keys read from <u>FILE</u> are removed from
       the authorized keys file. It is not considered an error if the key does not exist in the file.

   <b>setmaxmem</b>
       <b>Syntax:</b>

          setmaxmem domain size [[--config] [--live] | [--current]]

       Change the maximum memory allocation limit for a guest domain.  If <u>--live</u> is specified, affect a  running
       guest.   If  <u>--config</u>  is  specified,  affect  the  next  start  of  a persistent guest.  If <u>--current</u> is
       specified, it is equivalent to either <u>--live</u> or <u>--config</u>, depending on the current state  of  the  guest.
       Both  <u>--live</u>  and  <u>--config</u>  flags  may  be  given,  but <u>--current</u> is exclusive. If no flag is specified,
       behavior is different depending on hypervisor.

       Some hypervisors such as QEMU/KVM don't support live  changes  (especially  increasing)  of  the  maximum
       memory   limit.    Even   persistent   configuration   changes   might   not   be   performed  with  some
       hypervisors/configuration (e.g. on NUMA enabled domains on QEMU).  For complex configuration changes  use
       command <b>edit</b> instead).

       <u>size</u>  is  a  scaled integer (see <b>NOTES</b> above); it defaults to kibibytes (blocks of 1024 bytes) unless you
       provide a suffix (and the older option name <u>--kilobytes</u> is available as a deprecated synonym) .   Libvirt
       rounds  up to the nearest kibibyte.  Some hypervisors require a larger granularity than KiB, and requests
       that are not an even multiple will be rounded up.  For example, vSphere/ESX rounds the  parameter  up  to
       mebibytes (1024 kibibytes).

   <b>setmem</b>
       <b>Syntax:</b>

          setmem domain size [[--config] [--live] | [--current]]

       Change  the  memory allocation for a guest domain.  If <u>--live</u> is specified, perform a memory balloon of a
       running guest.  If <u>--config</u> is specified, affect the next start of a persistent guest.  If  <u>--current</u>  is
       specified,  it  is  equivalent to either <u>--live</u> or <u>--config</u>, depending on the current state of the guest.
       Both <u>--live</u> and <u>--config</u> flags may be given, but  <u>--current</u>  is  exclusive.  If  no  flag  is  specified,
       behavior is different depending on hypervisor.

       <u>size</u>  is  a  scaled integer (see <b>NOTES</b> above); it defaults to kibibytes (blocks of 1024 bytes) unless you
       provide a suffix (and the older option name <u>--kilobytes</u> is available as a deprecated synonym) .   Libvirt
       rounds  up to the nearest kibibyte.  Some hypervisors require a larger granularity than KiB, and requests
       that are not an even multiple will be rounded up.  For example, vSphere/ESX rounds the  parameter  up  to
       mebibytes (1024 kibibytes).

       For  Xen,  you can only adjust the memory of a running domain if the domain is paravirtualized or running
       the PV balloon driver.

       For LXC, the value being set is the cgroups value for limit_in_bytes or the maximum amount of user memory
       (including file cache). When viewing memory inside the container, this is  the  <a href="file:/proc/meminfo">/proc/meminfo</a>  "MemTotal"
       value.  When viewing the value from the host, use the <b>virsh</b> <b>memtune</b> command. In order to view the current
       memory in use and the maximum value allowed to set memory, use the <b>virsh</b> <b>dominfo</b> command.

   <b>setvcpus</b>
       <b>Syntax:</b>

          setvcpus domain count [--maximum] [[--config] [--live] | [--current]] [--guest] [--hotpluggable]

       Change the number of virtual CPUs active in a guest domain.  By default, this  command  works  on  active
       guest domains.  To change the settings for an inactive guest domain, use the <u>--config</u> flag.

       The  <u>count</u>  value  may be limited by host, hypervisor, or a limit coming from the original description of
       the guest domain. For Xen, you can only adjust the virtual CPUs of a running  domain  if  the  domain  is
       paravirtualized.

       If  the  <u>--config</u>  flag  is  specified,  the change is made to the stored XML configuration for the guest
       domain, and will only take effect when the guest domain is next started.

       If <u>--live</u> is specified, the guest domain must be active, and the change takes  place  immediately.   Both
       the  <u>--config</u> and <u>--live</u> flags may be specified together if supported by the hypervisor.  If this command
       is run before the guest has finished booting, the guest may fail to process the change.

       If <u>--current</u> is specified, it is equivalent to either <u>--live</u> or <u>--config</u>, depending on the current  state
       of the guest.

       When  no  flags  are  given,  the  <u>--live</u>  flag  is assumed and the guest domain must be active.  In this
       situation it is up to the hypervisor whether the <u>--config</u> flag is also assumed, and therefore whether the
       XML configuration is adjusted to make the change persistent.

       If <u>--guest</u> is specified, then the count of cpus is modified in the guest instead of the hypervisor.  This
       flag is usable only for live domains and may require guest agent to be configured in the guest.

       To allow adding vcpus to persistent definitions that can be later hotunplugged after the domain is booted
       it  is  necessary  to specify the <u>--hotpluggable</u> flag. Vcpus added to live domains supporting vcpu unplug
       are automatically marked as hotpluggable.

       The <u>--maximum</u> flag controls the maximum number of virtual cpus that can be hot-plugged the next time  the
       domain  is  booted.  As such, it must only be used with the <u>--config</u> flag, and not with the <u>--live</u> or the
       <u>--current</u> flag. Note that it may not be possible to change  the  maximum  vcpu  count  if  the  processor
       topology is specified for the guest.

   <b>setvcpu</b>
       <b>Syntax:</b>

          setvcpu domain vcpulist [--enable] | [--disable]
             [[--live] [--config] | [--current]]

       Change state of individual vCPUs using hot(un)plug mechanism.

       See  <b>vcpupin</b> for information on format of <u>vcpulist</u>. Hypervisor drivers may require that <u>vcpulist</u> contains
       exactly vCPUs belonging to one hotpluggable entity. This is  usually  just  a  single  vCPU  but  certain
       architectures such as ppc64 require a full core to be specified at once.

       Note that hypervisors may refuse to disable certain vcpus such as vcpu 0 or others.

       If  <u>--live</u> is specified, affect a running domain.  If <u>--config</u> is specified, affect the next startup of a
       persistent guest.  If <u>--current</u> is specified, it is equivalent to either <u>--live</u> or <u>--config</u>, depending on
       the current state of the guest.  This is the default. Both <u>--live</u> and <u>--config</u> flags may  be  given,  but
       <u>--current</u> is exclusive.

   <b>shutdown</b>
       <b>Syntax:</b>

          shutdown domain [--mode MODE-LIST]

       Gracefully  shuts  down  a  domain.  This coordinates with the domain OS to perform graceful shutdown, so
       there is no guarantee that it will succeed, and may take a variable length  of  time  depending  on  what
       services must be shutdown in the domain.

       The exact behavior of a domain when it shuts down is set by the <u>on_poweroff</u> parameter in the domain's XML
       definition.

       If  <u>domain</u>  is  transient, then the metadata of any snapshots and checkpoints will be lost once the guest
       stops running, but the underlying contents still exist, and a new domain with the same name and UUID  can
       restore the snapshot metadata with <b>snapshot-create</b>, and the checkpoint metadata with <b>checkpoint-create</b>.

       By  default the hypervisor will try to pick a suitable shutdown method. To specify an alternative method,
       the <u>--mode</u> parameter can specify a comma separated list which includes <b>acpi</b>, <b>agent</b>, <b>initctl</b>,  <b>signal</b>  and
       <b>paravirt</b>.  The  order  in  which  drivers  will  try each mode is undefined, and not related to the order
       specified to virsh.  For strict control over ordering, use a  single  mode  at  a  time  and  repeat  the
       command.

   <b>start</b>
       <b>Syntax:</b>

          start domain-name-or-uuid [--console] [--paused]
             [--autodestroy] [--bypass-cache] [--force-boot]
             [--pass-fds N,M,...] [--reset-nvram]

       Start a (previously defined) inactive domain, either from the last <b>managedsave</b> state, or via a fresh boot
       if  no  managedsave  state  is  present.   The  domain  will be paused if the <u>--paused</u> option is used and
       supported by the driver; otherwise it will be running.  If <u>--console</u> is requested, attach to the  console
       after creation.  If <u>--autodestroy</u> is requested, then the guest will be automatically destroyed when virsh
       closes  its  connection  to libvirt, or otherwise exits.  If <u>--bypass-cache</u> is specified, and managedsave
       state exists, the restore will avoid the file system cache, although this may slow  down  the  operation.
       If <u>--force-boot</u> is specified, then any managedsave state is discarded and a fresh boot occurs.

       If  <u>--pass-fds</u> is specified, the argument is a comma separated list of open file descriptors which should
       be pass on into the guest. The file descriptors will be re-numbered in the guest, starting from  3.  This
       is only supported with container based virtualization.

       If  <u>--reset-nvram</u>  is  specified,  any  existing  NVRAM  file will be deleted and re-initialized from its
       pristine template.

   <b>suspend</b>
       <b>Syntax:</b>

          suspend domain

       Suspend a running domain. It is kept in memory but won't be scheduled anymore.

   <b>ttyconsole</b>
       <b>Syntax:</b>

          ttyconsole domain

       Output the device used for the TTY console of the  domain.  If  the  information  is  not  available  the
       processes will provide an exit code of 1.

   <b>undefine</b>
       <b>Syntax:</b>

          undefine domain [--managed-save] [--snapshots-metadata]
             [--checkpoints-metadata] [--nvram] [--keep-nvram]
             [ {--storage volumes | --remove-all-storage
                [--delete-storage-volume-snapshots]} --wipe-storage]
             [--tpm] [--keep-tpm]

       Undefine a domain. If the domain is running, this converts it to a transient domain, without stopping it.
       If the domain is inactive, the domain configuration is removed.

       The  <u>--managed-save</u>  flag  guarantees  that  any managed save image (see the <b>managedsave</b> command) is also
       cleaned up.  Without the flag, attempts to undefine a domain with a managed save image will fail.

       The <u>--snapshots-metadata</u> flag guarantees that any snapshots (see  the  <b>snapshot-list</b>  command)  are  also
       cleaned up when undefining an inactive domain.  Without the flag, attempts to undefine an inactive domain
       with snapshot metadata will fail.  If the domain is active, this flag is ignored.

       The  <u>--checkpoints-metadata</u>  flag  guarantees  that any checkpoints (see the <b>checkpoint-list</b> command) are
       also cleaned up when undefining an inactive domain.  Without the flag, attempts to undefine  an  inactive
       domain with checkpoint metadata will fail.  If the domain is active, this flag is ignored.

       <u>--nvram</u>  and  <u>--keep-nvram</u>  specify  accordingly to delete or keep nvram (/domain/os/nvram/) file. If the
       domain has an nvram file and the flags are omitted, the undefine will fail.

       The <u>--storage</u> flag takes a parameter <b>volumes</b>, which is a comma separated list of volume target  names  or
       source  paths  of storage volumes to be removed along with the undefined domain. Volumes can be undefined
       and thus removed only on inactive domains.  Volume  deletion  is  only  attempted  after  the  domain  is
       undefined;  if  not all of the requested volumes could be deleted, the error message indicates what still
       remains behind. If a volume path is not found in the domain definition, it's treated as if the volume was
       successfully deleted. Only volumes managed by libvirt in storage pools can be removed this way. Note that
       this also removes only the top level image of a backing chain, any backing stores of the image  are  kept
       as  they  may  be  shared.   (See  <b>domblklist</b> for list of target names associated to a domain).  Example:
       --storage vda,/path/to/storage.img

       The <u>--remove-all-storage</u> flag specifies that all of the domain's storage volumes should be deleted as  if
       they were specified via <u>--storage</u>.

       The  <u>--delete-storage-volume-snapshots</u>  (previously <u>--delete-snapshots</u>) flag specifies that any snapshots
       associated with the storage volume should be deleted as well. Requires the <u>--remove-all-storage</u>  flag  to
       be  provided.  Not  all  storage  drivers  support  this option, presently only rbd. Using this when also
       removing volumes handled by a storage driver which does not support the flag will result in failure.

       The flag <u>--wipe-storage</u> specifies that the storage volumes should be wiped before removal.

       <u>--tpm</u> and <u>--keep-tpm</u> specify accordingly to delete or keep a TPM's persistent state  directory  structure
       and files. If the flags are omitted then the persistent_state attribute in the TPM emulator definition in
       the domain XML determines whether the TPM state is kept.

       NOTE: For an inactive domain, the domain name or UUID must be used as the <u>domain</u>.

   <b>vcpucount</b>
       <b>Syntax:</b>

          vcpucount domain  [{--maximum | --active}
             {--config | --live | --current}] [--guest]

       Print  information  about  the  virtual  cpu  counts of the given <u>domain</u>.  If no flags are specified, all
       possible counts are listed in a table; otherwise, the  output  is  limited  to  just  the  numeric  value
       requested.   For  historical reasons, the table lists the label "current" on the rows that can be queried
       in isolation via the <u>--active</u> flag, rather than relating to the <u>--current</u> flag.

       <u>--maximum</u> requests information on the maximum cap of vcpus that a domain  can  add  via  <b>setvcpus</b>,  while
       <u>--active</u>  shows  the  current  usage;  these  two  flags  cannot  both be specified.  <u>--config</u> requires a
       persistent guest and requests information regarding the next time  the  domain  will  be  booted,  <u>--live</u>
       requires  a running domain and lists current values, and <u>--current</u> queries according to the current state
       of the domain (corresponding to <u>--live</u> if running, or  <u>--config</u>  if  inactive);  these  three  flags  are
       mutually exclusive.

       If  <u>--guest</u> is specified, then the count of cpus is reported from the perspective of the guest. This flag
       is usable only for live domains and may require guest agent to be configured in the guest.

   <b>vcpuinfo</b>
       <b>Syntax:</b>

          vcpuinfo domain [--pretty]

       Returns basic information about the domain virtual CPUs, like the number of vCPUs, the running time,  the
       affinity to physical processors.

       With <u>--pretty</u>, cpu affinities are shown as ranges.

       <b>Example:</b>

          $ virsh vcpuinfo fedora
          VCPU:           0
          CPU:            0
          State:          running
          CPU time:       7,0s
          CPU Affinity:   yyyy

          VCPU:           1
          CPU:            1
          State:          running
          CPU time:       0,7s
          CPU Affinity:   yyyy

       <b>STATES</b>

       The State field displays the current operating state of a virtual CPU

       • <b>offline</b>

         The  virtual  CPU  is  offline  and  not  usable  by  the  domain.   This state is not supported by all
         hypervisors.

       • <b>running</b>

         The virtual CPU is available to the domain and is operating.

       • <b>blocked</b>

         The virtual CPU is available to the domain but is waiting for a resource.  This state is not  supported
         by all hypervisors, in which case <u>running</u> may be reported instead.

       • <b>no</b> <b>state</b>

         The virtual CPU state could not be determined. This could happen if the hypervisor is newer than virsh.

       • <b>N/A</b>

         There's no information about the virtual CPU state available. This can be the case if the domain is not
         running or the hypervisor does not report the virtual CPU state.

   <b>vcpupin</b>
       <b>Syntax:</b>

          vcpupin domain [vcpu] [cpulist] [[--live] [--config] | [--current]]

       Query  or  change  the  pinning  of  domain  VCPUs  to host physical CPUs.  To pin a single <u>vcpu</u>, specify
       <u>cpulist</u>; otherwise, you can query one <u>vcpu</u> or omit <u>vcpu</u> to list all at once.

       <u>cpulist</u> is a list of physical CPU numbers. Its syntax is a comma separated  list  and  a  special  markup
       using  '-'  and  '^'  (ex.  '0-4',  '0-3,^2')  can also be allowed. The '-' denotes the range and the '^'
       denotes exclusive.  For pinning the <u>vcpu</u> to all physical cpus specify 'r' as a  <u>cpulist</u>.   If  <u>--live</u>  is
       specified,  affect  a  running  guest.   If  <u>--config</u> is specified, affect the next start of a persistent
       guest.  If <u>--current</u> is specified, it is equivalent to  either  <u>--live</u>  or  <u>--config</u>,  depending  on  the
       current  state  of  the  guest.   Both  <u>--live</u> and <u>--config</u> flags may be given if <u>cpulist</u> is present, but
       <u>--current</u> is exclusive.  If no flag is specified, behavior is different depending on hypervisor.

       <b>Note</b>: The expression is sequentially evaluated, so  "0-15,^8"  is  identical  to  "9-14,0-7,15"  but  not
       identical to "^8,0-15".

   <b>vncdisplay</b>
       <b>Syntax:</b>

          vncdisplay domain

       Output  the  IP  address  and  port  number  for the VNC display. If the information is not available the
       processes will provide an exit code of 1.

</pre><h4><b>DEVICE</b> <b>COMMANDS</b></h4><pre>
       The following commands manipulate devices associated to domains.  The <u>domain</u> can be specified as a  short
       integer,  a  name  or  a  full  UUID.  To better understand the values allowed as options for the command
       reading the documentation at   &lt;https://libvirt.org/formatdomain.html&gt;   on  the  format  of  the  device
       sections to get the most accurate set of accepted values.

   <b>attach-device</b>
       <b>Syntax:</b>

          attach-device domain FILE [[[--live] [--config] | [--current]] | [--persistent]]

       Attach a device to the domain, using a device definition in an XML file using a device definition element
       such   as   &lt;disk&gt;   or   &lt;interface&gt;   as   the   top-level   element.    See   the   documentation   at
       https://libvirt.org/formatdomain.html#elementsDevices &lt;https://libvirt.org/formatdomain.html#devices&gt;
        to learn about libvirt XML format for a device.   If  <u>--config</u>  is  specified  the  command  alters  the
       persistent  guest  configuration  with  the  device attach taking effect the next time libvirt starts the
       domain.  For cdrom and floppy devices, this command only replaces the media within  an  existing  device;
       consider  using  <b>update-device</b>  for  this  usage.  For passthrough host devices, see also <b>nodedev-detach</b>,
       needed if the PCI device does not use managed mode.

       If <u>--live</u> is specified, affect a running domain.  If <u>--config</u> is specified, affect the next startup of  a
       persistent guest.  If <u>--current</u> is specified, it is equivalent to either <u>--live</u> or <u>--config</u>, depending on
       the current state of the guest.  Both <u>--live</u> and <u>--config</u> flags may be given, but <u>--current</u> is exclusive.
       When no flag is specified legacy API is used whose behavior depends on the hypervisor driver.

       For  compatibility  purposes,  <u>--persistent</u>  behaves like <u>--config</u> for an offline domain, and like <u>--live</u>
       <u>--config</u> for a running domain.

       <b>Note</b>: using of partial device definition XML files may lead to unexpected results as some fields  may  be
       autogenerated and thus match devices other than expected.

   <b>attach-disk</b>
       <b>Syntax:</b>

          attach-disk domain source target [[[--live] [--config] |
             [--current]] | [--persistent]] [--targetbus bus]
             [--driver driver] [--subdriver subdriver] [--iothread iothread]
             [--cache cache] [--io io] [--type type] [--alias alias]
             [--mode mode] [--sourcetype sourcetype]
             [--source-protocol protocol] [--source-host-name hostname:port]
             [--source-host-transport transport] [--source-host-socket socket]
             [--serial serial] [--wwn wwn] [--rawio] [--address address]
             [--multifunction] [--print-xml]

       Attach   a  new  disk  device  to  the  domain.   <u>source</u>  is  path  for  the  files  and  devices  unless
       <u>--source-protocol</u> is specified, in which case <u>source</u> is the name of a network disk.  <u>target</u> controls  the
       bus  or  device  under which the disk is exposed to the guest OS. It indicates the "logical" device name;
       the optional <u>targetbus</u> attribute specifies the type of disk device to emulate; possible values are driver
       specific, with typical values being <u>ide</u>, <u>scsi</u>, <u>virtio</u>, <u>xen</u>, <u>usb</u>, <u>sata</u>, or <u>sd</u>, if omitted, the bus type is
       inferred from the style of the device name (e.g.  a device named 'sda' will typically be exported using a
       SCSI bus).  <u>driver</u> can be <u>file</u>, <u>tap</u> or <u>phy</u> for the Xen hypervisor depending on the  kind  of  access;  or
       <u>qemu</u>  for  the  QEMU  emulator.   Further  details  to  the driver can be passed using <u>subdriver</u>. For Xen
       <u>subdriver</u> can be <u>aio</u>, while for QEMU subdriver should match the format of the disk source, such as <u>raw</u> or
       <u>qcow2</u>.  Hypervisor default will be used if <u>subdriver</u> is not specified.  However, the default may  not  be
       correct,  esp.  for  QEMU  as for security reasons it is configured not to detect disk formats.  <u>type</u> can
       indicate <u>lun</u>, <u>cdrom</u> or <u>floppy</u> as alternative to the disk default, although this  use  only  replaces  the
       media  within  the  existing  virtual cdrom or floppy device; consider using <b>update-device</b> for this usage
       instead.  <u>alias</u> can set user supplied alias.   <u>mode</u>  can  specify  the  two  specific  mode  <u>readonly</u>  or
       <u>shareable</u>.   <u>sourcetype</u>  can  indicate  the  type  of  source  (block|file|network)  <u>cache</u>  can be one of
       "default", "none", "writethrough", "writeback", "directsync" or "unsafe".  <u>io</u> controls specific  policies
       on  I/O; QEMU guests support "threads", "native" and "io_uring".  <u>iothread</u> is the number within the range
       of domain IOThreads to which this disk may be attached (QEMU only).  <u>serial</u> is the serial of disk device.
       <u>wwn</u> is the wwn of disk device.  <u>rawio</u> indicates the disk needs rawio capability.  <u>address</u> is the  address
       of    disk    device    in    the   form   of   pci:domain.bus.slot.function,   scsi:controller.bus.unit,
       ide:controller.bus.unit,  usb:bus.port,  sata:controller.bus.unit  or  ccw:cssid.ssid.devno.   Virtio-ccw
       devices  must  have  their  cssid  set  to  0xfe.   <u>multifunction</u>  indicates  specified  pci address is a
       multifunction pci device address.

       There is also support for using a network disk. As specified, the user can provide a <u>--source-protocol</u> in
       which case the <u>source</u> parameter will be  interpreted  as  the  source  name.  <u>--source-protocol</u>  must  be
       provided  if  the  user  intends  to provide a network disk or host information.  Host information can be
       provided using the tags  <u>--source-host-name</u>,  <u>--source-host-transport</u>,  and  <u>--source-host-socket</u>,  which
       respectively denote the name of the host, the host's transport method, and the socket that the host uses.
       <u>--source-host-socket</u>  and  <u>--source-host-name</u>  cannot  both  be  provided,  and  the  user must provide a
       <u>--source-host-transport</u> if they want to provide a <u>--source-host-socket</u>.  The <u>--source-host-name</u> parameter
       supports host:port syntax if the user wants to provide a port as well.

       If <u>--print-xml</u> is specified, then the XML of the disk that would be attached is printed instead.

       If <u>--live</u> is specified, affect a running domain.  If <u>--config</u> is specified, affect the next startup of  a
       persistent guest.  If <u>--current</u> is specified, it is equivalent to either <u>--live</u> or <u>--config</u>, depending on
       the current state of the guest.  Both <u>--live</u> and <u>--config</u> flags may be given, but <u>--current</u> is exclusive.
       When no flag is specified legacy API is used whose behavior depends on the hypervisor driver.

       For  compatibility  purposes,  <u>--persistent</u>  behaves like <u>--config</u> for an offline domain, and like <u>--live</u>
       <u>--config</u> for a running domain.  Likewise, <u>--shareable</u> is an alias for <u>--mode</u> <u>shareable</u>.

   <b>attach-interface</b>
       <b>Syntax:</b>

          attach-interface domain type source [[[--live]
             [--config] | [--current]] | [--persistent]]
             [--target target] [--mac mac] [--script script] [--model model]
             [--inbound average,peak,burst,floor] [--outbound average,peak,burst]
             [--alias alias] [--managed] [--print-xml]
             [--source-mode mode]

       Attach a new network interface to the domain.

       <b>type</b> can be one of the:

       <u>network</u> to indicate connection via a libvirt virtual network,

       <u>bridge</u> to indicate connection via a bridge device on the host,

       <u>direct</u> to indicate connection directly to one of the host's network interfaces or bridges,

       <u>hostdev</u> to indicate connection using a passthrough of PCI device on the host,

       <u>vhostuser</u> to indicate connection using a virtio transport protocol.

       <b>source</b> indicates the source of the connection.  The source depends on the type of the interface:

       <u>network</u> name of the virtual network,

       <u>bridge</u> the name of the bridge device,

       <u>direct</u> the name of the host's interface or bridge,

       <u>hostdev</u> the PCI address of the host's interface formatted as domain:bus:slot.function.

       <u>vhostuser</u> the path to UNIX socket (control plane)

       <b>--target</b> is used to specify the tap/macvtap device to be used to connect the domain to the source.  Names
       starting with 'vnet' are considered as auto-generated and  are  blanked  out/regenerated  each  time  the
       interface is attached.

       <b>--mac</b>  specifies  the  MAC address of the network interface; if a MAC address is not given, a new address
       will be automatically generated (and stored in the persistent configuration if "--config" is given on the
       command line).

       <b>--script</b> is used to specify a path to a custom script to be called while attaching to  a  bridge  -  this
       will be called instead of the default script not in addition to it.  This is valid only for interfaces of
       <u>bridge</u> type and only for Xen domains.

       <b>--model</b> specifies the network device model to be presented to the domain.

       <b>alias</b> can set user supplied alias.

       <b>--inbound</b>  and  <b>--outbound</b>  control the bandwidth of the interface.  At least one from the <u>average</u>, <u>floor</u>
       pair must be specified.  The other two <u>peak</u> and <u>burst</u> are optional, so "average,peak",  "average,,burst",
       "average,,,floor",  "average"  and  ",,,floor"  are  also  legal.  Values for <u>average</u>, <u>floor</u> and <u>peak</u> are
       expressed in kilobytes per second, while <u>burst</u> is expressed in kilobytes in a single burst at <u>peak</u>  speed
       as described in the Network XML documentation at
        &lt;https://libvirt.org/formatnetwork.html#quality-of-service&gt; .

       <b>--managed</b>  is  usable only for <u>hostdev</u> type and tells libvirt that the interface should be managed, which
       means detached and reattached from/to the host by libvirt.

       <b>--source-mode</b> is mandatory for <u>vhostuser</u> interface and accepts values  <u>server</u>  and  <u>client</u>  that  control
       whether hypervisor waits for the other process to connect, or initiates connection, respectively.

       If <b>--print-xml</b> is specified, then the XML of the interface that would be attached is printed instead.

       If  <b>--live</b> is specified, affect a running domain.  If <b>--config</b> is specified, affect the next startup of a
       persistent guest.  If <b>--current</b> is specified, affect the current domain state, which can either  be  live
       or  offline.   Both  <b>--live</b> and <b>--config</b> flags may be given, but <b>--current</b> is exclusive.  When no flag is
       specified legacy API is used whose behavior depends on the hypervisor driver.

       For compatibility purposes, <b>--persistent</b> behaves like <b>--config</b> for an offline  domain,  and  like  <b>--live</b>
       <b>--config</b> for a running domain.

       <b>Note</b>:  the  optional  target value is the name of a device to be created as the back-end on the node.  If
       not provided a device named "vnetN" or "vifN" will be created automatically.

   <b>detach-device</b>
       <b>Syntax:</b>

          detach-device domain FILE [[[--live] [--config] |
             [--current]] | [--persistent]]

       Detach a device from the domain, takes the same kind of XML descriptions as command  <b>attach-device</b>.   For
       passthrough host devices, see also <b>nodedev-reattach</b>, needed if the device does not use managed mode.

       <b>Note</b>:  The  supplied  XML description of the device should be as specific as its definition in the domain
       XML. The set of attributes used to match the  device  are  internal  to  the  drivers.  Using  a  partial
       definition,  or  attempting  to  detach  a  device that is not present in the domain XML, but shares some
       specific attributes with one that is present, may lead to unexpected results.

       <b>Quirk</b>: Device unplug is asynchronous in most cases and requires guest cooperation. This means  that  it's
       up to the discretion of the guest to disallow or delay the unplug arbitrarily. As the libvirt API used in
       this command was designed as synchronous it returns success after some timeout even if the device was not
       unplugged  yet  to  allow further interactions with the domain e.g. if the guest is unresponsive. Callers
       which need to make sure that the device was unplugged can use libvirt events  (see  virsh  event)  to  be
       notified when the device is removed. Note that the event may arrive before the command returns.

       If  <u>--live</u> is specified, affect a running domain.  If <u>--config</u> is specified, affect the next startup of a
       persistent guest.  If <u>--current</u> is specified, it is equivalent to either <u>--live</u> or <u>--config</u>, depending on
       the current state of the guest.  Both <u>--live</u> and <u>--config</u> flags may be given, but <u>--current</u> is exclusive.
       When no flag is specified legacy API is used whose behavior depends on the hypervisor driver.

       For compatibility purposes, <u>--persistent</u> behaves like <u>--config</u> for an offline  domain,  and  like  <u>--live</u>
       <u>--config</u> for a running domain.

       Note that older versions of virsh used <u>--config</u> as an alias for <u>--persistent</u>.

   <b>detach-device-alias</b>
       <b>Syntax:</b>

          detach-device-alias domain alias [[[--live] [--config] | [--current]]]]

       Detach  a  device  with  given  <u>alias</u> from the <u>domain</u>. This command returns successfully after the unplug
       request was sent to the hypervisor. The actual removal of  the  device  is  notified  asynchronously  via
       libvirt events (see virsh event).

       If  <u>--live</u> is specified, affect a running domain.  If <u>--config</u> is specified, affect the next startup of a
       persistent guest.  If <u>--current</u> is specified, it is equivalent to either <u>--live</u> or <u>--config</u>, depending on
       the current state of the guest.  Both <u>--live</u> and <u>--config</u> flags may be given, but <u>--current</u> is exclusive.

   <b>detach-disk</b>
       <b>Syntax:</b>

          detach-disk domain target [[[--live] [--config] |
             [--current]] | [--persistent]] [--print-xml]

       Detach a disk device from a domain. The <u>target</u> is the device as seen from the domain.

       If <u>--live</u> is specified, affect a running domain.  If <u>--config</u> is specified, affect the next startup of  a
       persistent guest.  If <u>--current</u> is specified, it is equivalent to either <u>--live</u> or <u>--config</u>, depending on
       the current state of the guest.  Both <u>--live</u> and <u>--config</u> flags may be given, but <u>--current</u> is exclusive.
       When no flag is specified legacy API is used whose behavior depends on the hypervisor driver.

       For  compatibility  purposes,  <u>--persistent</u>  behaves like <u>--config</u> for an offline domain, and like <u>--live</u>
       <u>--config</u> for a running domain.

       Note that older versions of virsh used <u>--config</u> as an alias for <u>--persistent</u>.

       If <b>--print-xml</b> is specified, then the XML which would be used to detach the disk is printed instead.

       Please see documentation for <b>detach-device</b> for known quirks.

   <b>detach-interface</b>
       <b>Syntax:</b>

          detach-interface domain type [--mac mac]
             [[[--live] [--config] | [--current]] | [--persistent]] [--print-xml]

       Detach a network interface from a domain.  <u>type</u> can be either <u>network</u>  to  indicate  a  physical  network
       device or <u>bridge</u> to indicate a bridge to a device. It is recommended to use the <u>mac</u> option to distinguish
       between the interfaces if more than one are present on the domain.

       If  <u>--live</u> is specified, affect a running domain.  If <u>--config</u> is specified, affect the next startup of a
       persistent guest.  If <u>--current</u> is specified, it is equivalent to either <u>--live</u> or <u>--config</u>, depending on
       the current state of the guest.  Both <u>--live</u> and <u>--config</u> flags may be given, but <u>--current</u> is exclusive.
       When no flag is specified legacy API is used whose behavior depends on the hypervisor driver.

       For compatibility purposes, <u>--persistent</u> behaves like <u>--config</u> for an offline  domain,  and  like  <u>--live</u>
       <u>--config</u> for a running domain.

       Note that older versions of virsh used <u>--config</u> as an alias for <u>--persistent</u>.

       If <u>--print-xml</u> is specified, then the XML used to detach the interface is printed instead.

       Please see documentation for <b>detach-device</b> for known quirks.

   <b>update-device</b>
       <b>Syntax:</b>

          update-device domain file [--force] [[[--live]
             [--config] | [--current]] | [--persistent]]

       Update  the  characteristics of a device associated with <u>domain</u>, based on the device definition in an XML
       <u>file</u>.  The <u>--force</u> option can be used to force device update, e.g., to eject  a  CD-ROM  even  if  it  is
       locked/mounted         in         the        domain.        See        the        documentation        at
       https://libvirt.org/formatdomain.html#elementsDevices &lt;https://libvirt.org/formatdomain.html#devices&gt;
        to learn about libvirt XML format for a device.

       If <u>--live</u> is specified, affect a running domain.  If <u>--config</u> is specified, affect the next startup of  a
       persistent guest.  If <u>--current</u> is specified, it is equivalent to either <u>--live</u> or <u>--config</u>, depending on
       the current state of the guest.  Both <u>--live</u> and <u>--config</u> flags may be given, but <u>--current</u> is exclusive.
       Not specifying any flag is the same as specifying <u>--current</u>.

       For  compatibility  purposes,  <u>--persistent</u>  behaves like <u>--config</u> for an offline domain, and like <u>--live</u>
       <u>--config</u> for a running domain.

       Note that older versions of virsh used <u>--config</u> as an alias for <u>--persistent</u>.

       <b>Note</b>: using of partial device definition XML files may lead to unexpected results as some fields  may  be
       autogenerated and thus match devices other than expected.

   <b>update-memory-device</b>
       <b>Syntax:</b>

          update-memory-device domain [--print-xml] [[--alias alias] | [--node node]]
            [[--live] [--config] | [--current]]
            [--requested-size size]

       This  command  finds  <b>&lt;memory/&gt;</b>  device  inside given <u>domain</u>, changes requested values and passes updated
       device XML to daemon. If <u>--print-xml</u> is specified then the device is not changed, but the updated  device
       XML  is  printed to stdout.  If there are more than one <b>&lt;memory/&gt;</b> devices in <u>domain</u> use <u>--alias</u> or <u>--node</u>
       to select the desired one.

       If <u>--live</u> is specified, affect a running domain.  If <u>--config</u> is specified, affect the next startup of  a
       persistent guest.  If <u>--current</u> is specified, it is equivalent to either <u>--live</u> or <u>--config</u>, depending on
       the current state of the guest.  Both <u>--live</u> and <u>--config</u> flags may be given, but <u>--current</u> is exclusive.
       Not specifying any flag is the same as specifying <u>--current</u>.

       If  <u>--requested-size</u>  is specified then <b>&lt;requested/&gt;</b> under memory target is changed to requested <u>size</u> (as
       scaled integer, see <b>NOTES</b> above). It defaults to kibibytes if no suffix is provided. The option is  valid
       only for <b>virtio-mem</b> memory device model.

   <b>change-media</b>
       <b>Syntax:</b>

          change-media domain path [--eject] [--insert]
             [--update] [source] [--force] [[--live] [--config] |
             [--current]] [--print-xml] [--block]

       Change  media  of  CDROM  or floppy drive. <u>path</u> can be the fully-qualified path or the unique target name
       (&lt;target dev='hdc'&gt;) of the disk device. <u>source</u> specifies the  path  of  the  media  to  be  inserted  or
       updated. The <u>--block</u> flag allows setting the backing type in case a block device is used as media for the
       CDROM or floppy drive instead of a file.

       <u>--eject</u>  indicates the media will be ejected.  <u>--insert</u> indicates the media will be inserted. <u>source</u> must
       be specified.  If the device has source (e.g.  &lt;source  file='media'&gt;),  and  <u>source</u>  is  not  specified,
       <u>--update</u>  is equal to <u>--eject</u>. If the device has no source, and <u>source</u> is specified, <u>--update</u> is equal to
       <u>--insert</u>. If the device has source, and <u>source</u> is specified, <u>--update</u> behaves like combination of <u>--eject</u>
       and <u>--insert</u>.  If none of <u>--eject</u>, <u>--insert</u>, and <u>--update</u> is specified, <u>--update</u> is used by default.  The
       <u>--force</u> option can be used to force media changing.  If <u>--live</u> is specified, alter live configuration  of
       running guest.  If <u>--config</u> is specified, alter persistent configuration, effect observed on next startup
       of  the  guest.   <u>--current</u>  can  be  either  or  both  of  <u>live</u>  and <u>config</u>, depends on the hypervisor's
       implementation.  Both <u>--live</u> and <u>--config</u> flags may be given, but <u>--current</u> is exclusive. If no  flag  is
       specified,  behavior  is  different  depending  on hypervisor.  If <u>--print-xml</u> is specified, the XML that
       would be used to change media is printed instead of changing the media.

   <b>dom-fd-associate</b>
       <b>Syntax:</b>

          dom-fd-associate domain --name FDGROUPNAME --pass-fds M,N,....
              [--seclabel-writable] [--seclabel-restore]

       Associate one or more fds described via <u>--pass-fds</u> argument to <u>domain</u> as  <u>--name</u>.  The  lifetime  of  the
       passed fd group is the same as the connection, thus exiting virsh un-registers them afterwards.

       By  default  security  labels  are applied if needed but they are not restored after use to avoid keeping
       them  open  unnecessarily.  Best-effort  security  label  restore  may  be   requested   by   using   the
       <u>--seclabel-restore</u> flag.

</pre><h4><b>NODEDEV</b> <b>COMMANDS</b></h4><pre>
       The  following  commands  manipulate host devices that are intended to be passed through to guest domains
       via &lt;hostdev&gt; elements in a domain's &lt;devices&gt; section.  A node device key is generally specified by  the
       bus  name  followed  by  its address, using underscores between all components, such as pci_0000_00_02_1,
       usb_1_5_3, or net_eth1_00_27_13_6a_fe_00.  The <b>nodedev-list</b> gives the full list of host devices that  are
       known  to  libvirt,  although  this  includes  devices  that  cannot be assigned to a guest (for example,
       attempting to detach the PCI device that controls the host's hard disk controller where the guest's  disk
       images live could cause the host system to lock up or reboot).

       For more information on node device definition see:
        &lt;https://libvirt.org/formatnode.html&gt; .

       Passthrough  devices  cannot  be  simultaneously  used by the host and its guest domains, nor by multiple
       active  guests  at  once.   If  the  &lt;hostdev&gt;  description  of  a  PCI  device  includes  the  attribute
       <b>managed='yes'</b>, and the hypervisor driver supports it, then the device is in managed mode, and attempts to
       use  that  passthrough  device  in  an active guest will automatically behave as if <b>nodedev-detach</b> (guest
       start, device hot-plug) and <b>nodedev-reattach</b> (guest stop, device hot-unplug) were  called  at  the  right
       points.   If  a  PCI device is not marked as managed, then it must manually be detached before guests can
       use it, and manually reattached to be returned to the host.  Also, if a device is manually detached, then
       the host does not regain control of the device without a matching reattach, even if the  guests  use  the
       device in managed mode.

   <b>nodedev-create</b>
       <b>Syntax:</b>

          nodedev-create FILE [--validate]

       Create a device on the host node that can then be assigned to virtual machines. Normally, libvirt is able
       to  automatically  determine which host nodes are available for use, but this allows registration of host
       hardware that libvirt did  not  automatically  detect.   <u>file</u>  contains  xml  for  a  top-level  &lt;device&gt;
       description of a node device.

       If <u>--validate</u> is specified, validates the format of the XML document against an internal RNG schema.

   <b>nodedev-update</b>
       <b>Syntax:</b>

          nodedev-update device FILE [[--live] [--config] | [--current]]

       Update  a  device  on  the host. <u>device</u> can be either device name or wwn pair in "wwnn,wwpn" format (only
       works for vHBA currently).  <u>file</u> contains xml for a top-level &lt;device&gt; description of  the  node  device.
       <u>--current</u>  can  be  either  or both of <u>live</u> and <u>config</u>, depends on the hypervisor's implementation.  Both
       <u>--live</u> and <u>--config</u> flags may be given, but <u>--current</u> is exclusive. If no flag is specified, behavior  is
       different depending on hypervisor.

   <b>nodedev-destroy</b>
       <b>Syntax:</b>

          nodedev-destroy device

       Destroy  (stop)  a device on the host. <u>device</u> can be either device name or wwn pair in "wwnn,wwpn" format
       (only works for vHBA currently).  Note that this makes libvirt quit managing a host device, and may  even
       make that device unusable by the rest of the physical host until a reboot.

   <b>nodedev-define</b>
       <b>Syntax:</b>

          nodedev-define FILE [--validate]

       Define an inactive persistent device or modify an existing persistent one from the XML <u>FILE</u>.

       If <u>--validate</u> is specified, validates the format of the XML document against an internal RNG schema.

   <b>nodedev-undefine</b>
       <b>Syntax:</b>

          nodedev-undefine device

       Undefine the configuration for a persistent device. If the device is active, make it transient.

   <b>nodedev-start</b>
       <b>Syntax:</b>

          nodedev-start device

       Start a (previously defined) inactive device.

   <b>nodedev-detach</b>
       <b>Syntax:</b>

          nodedev-detach nodedev [--driver backend_driver]

       Detach  <u>nodedev</u>  from the host driver and bind it to a special driver that provides the API needed by the
       hypervisor for assigning the device to a virtual machine (using &lt;hostdev&gt; in the domain XML  definition).
       This  is  reversed  with <b>nodedev-reattach</b>, and is done automatically by the hypervisor driver for managed
       devices (those devices with "managed='yes'" in their XML definition).

       Different hypervisors expect the device being assigned to be bound to  different  drivers.  For  example,
       QEMU's  "vfio"  backend  requires  the device to be bound to the driver "vfio-pci" or to a "VFIO variant"
       driver (this is a driver that supports the full API provided by vfio-pci, plus some other APIs to support
       things like live migration). The <u>--driver</u> parameter can be used to specify a particular  driver  (e.g.  a
       device-specific VFIO variant driver) the device should be bound to. When <u>--driver</u> is omitted, the default
       driver for the hypervisor is used ("vfio-pci" for QEMU, "pciback" for Xen).

   <b>nodedev-dumpxml</b>
       <b>Syntax:</b>

          nodedev-dumpxml [--inactive] [--xpath EXPRESSION] [--wrap] device

       Dump  a  &lt;device&gt;  XML representation for the given node device, including such information as the device
       name, which bus owns the device, the vendor and product id, and any capabilities of the device usable  by
       libvirt  (such  as  whether  device  reset is supported). <u>device</u> can be either device name or wwn pair in
       "wwnn,wwpn" format (only works for HBA). An additional  option  affecting  the  XML  dump  may  be  used.
       <u>--inactive</u>  tells virsh to dump the node device configuration that will be used on next start of the node
       device as opposed to the current node device configuration.

       If the <b>--xpath</b> argument provides an XPath expression, it will be evaluated against  the  output  XML  and
       only  those  matching  nodes  will  be printed. The default behaviour is to print each matching node as a
       standalone document, however, for ease of additional processing,  the  <b>--wrap</b>  argument  will  cause  the
       matching node to be wrapped in a common root node.

   <b>nodedev-info</b>
       <b>Syntax:</b>

          nodedev-info device

       Returns basic information about the <u>device</u> object.

   <b>nodedev-list</b>
       <b>Syntax:</b>

          nodedev-list [--cap capability] [--tree] [--inactive | --all] [--persistent | --transient]

       List  all of the devices available on the node that are known by libvirt.  <u>cap</u> is used to filter the list
       by capability types, the types must be separated by comma, e.g. --cap pci,scsi.  Valid  capability  types
       include  'system',  'pci',  'usb_device',  'usb',  'net',  'scsi_host', 'scsi_target', 'scsi', 'storage',
       'fc_host', 'vports', 'scsi_generic', 'drm', 'mdev', 'mdev_types', 'ccw',  'css',  'ap_card',  'ap_queue',
       'ap_matrix'.  By  default,  only  active  devices  are  listed.  <u>--inactive</u> is used to list only inactive
       devices, and <u>--all</u> is used to list both active and inactive devices.  <u>--persistent</u> is used to  list  only
       persistent devices, and <u>--transient</u> is used to list only transient devices. Not providing <u>--persistent</u> or
       <u>--transient</u>  will  list  all  devices  unless  filtered otherwise. <u>--transient</u> is mutually exclusive with
       <u>--persistent</u> and <u>--inactive</u>.  If <u>--tree</u> is used, the output is formatted in a tree  representing  parents
       of each node. <u>--tree</u> is mutually exclusive with all other options but <u>--all</u>.

   <b>nodedev-reattach</b>
       <b>Syntax:</b>

          nodedev-reattach nodedev

       Declare  that  <u>nodedev</u>  is no longer in use by any guests, and that the host can resume normal use of the
       device.  This is done automatically for PCI devices in managed mode and USB devices,  but  must  be  done
       explicitly to match any explicit <b>nodedev-detach</b>.

   <b>nodedev-reset</b>
       <b>Syntax:</b>

          nodedev-reset nodedev

       Trigger  a device reset for <u>nodedev</u>, useful prior to transferring a node device between guest passthrough
       or the host.  Libvirt will often do this action implicitly when required,  but  this  command  allows  an
       explicit reset when needed.

   <b>nodedev-event</b>
       <b>Syntax:</b>

          nodedev-event {[nodedev] event [--loop] [--timeout seconds] [--timestamp] | --list}

       Wait  for a class of node device events to occur, and print appropriate details of events as they happen.
       The events can optionally be filtered by <u>nodedev</u>.  Using <u>--list</u> as the only argument will provide a  list
       of  possible  <u>event</u>  values known by this client, although the connection might not allow registering for
       all these events.

       By default, this command is one-shot, and returns success once an  event  occurs;  you  can  send  SIGINT
       (usually  via  <b>Ctrl-C</b>)  to quit immediately.  If <u>--timeout</u> is specified, the command gives up waiting for
       events after <u>seconds</u> have elapsed.   With <u>--loop</u>, the command  prints  all  events  until  a  timeout  or
       interrupt key.

       When <u>--timestamp</u> is used, a human-readable timestamp will be printed before the event.

   <b>nodedev-autostart</b>
       <b>Syntax:</b>

          nodedev-autostart [--disable] device

       Configure  a  device to be automatically started when the host machine boots or the parent device becomes
       available. With <u>--disable</u>, the device will be set to manual mode and  will  no  longer  be  automatically
       started by the host. This command is only supported for persistently-defined mediated devices.

</pre><h4><b>VIRTUAL</b> <b>NETWORK</b> <b>COMMANDS</b></h4><pre>
       The  following  commands manipulate networks. Libvirt has the capability to define virtual networks which
       can then be used by domains and linked to actual network devices. For  more  detailed  information  about
       this  feature  see the documentation at  &lt;https://libvirt.org/formatnetwork.html&gt;  . Many of the commands
       for virtual networks are similar to the ones used for domains, but the way to name a virtual  network  is
       either by its name or UUID.

   <b>net-autostart</b>
       <b>Syntax:</b>

          net-autostart network [--disable]

       Configure  a  virtual  network  to  be  automatically  started  at  boot.   The  <u>--disable</u> option disable
       autostarting.

   <b>net-create</b>
       <b>Syntax:</b>

          net-create file [--validate]

       Create a transient (temporary) virtual network from an XML <u>file</u> and instantiate (start) the network.  See
       the documentation at  &lt;https://libvirt.org/formatnetwork.html&gt; to get a description of  the  XML  network
       format used by libvirt.

       Optionally,  the  format  of  the  input  XML  file  can be validated against an internal RNG schema with
       <u>--validate</u>.

   <b>net-define</b>
       <b>Syntax:</b>

          net-define file [--validate]

       Define an inactive persistent virtual network or modify an existing persistent one  from  the  XML  <u>file</u>.
       Optionally,  the  format  of  the  input  XML  file  can be validated against an internal RNG schema with
       <u>--validate</u>.

   <b>net-desc</b>
       <b>Syntax:</b>

          net-desc network [[--live] [--config] |
             [--current]] [--title] [--edit] [--new-desc
             New description or title message]

       Show or modify description and title of a network. These  values  are  user  fields  that  allow  storing
       arbitrary textual data to allow easy identification of networks. Title should be short, although it's not
       enforced.  (See also <b>net-metadata</b> that works with XML based network metadata.)

       Flags  <u>--live</u>  or  <u>--config</u>  select  whether  this command works on live or persistent definitions of the
       network. If both <u>--live</u> and <u>--config</u> are specified, the <u>--config</u> option takes precedence on  getting  the
       current  description  and  both  live configuration and config are updated while setting the description.
       <u>--current</u> is exclusive and implied if none of these was specified.

       Flag <u>--edit</u> specifies that an editor with the contents of current description or title should  be  opened
       and the contents saved back afterwards.

       Flag <u>--title</u> selects operation on the title field instead of description.

       If  neither  of <u>--edit</u> and <u>--new-desc</u> are specified the note or description is displayed instead of being
       modified.

   <b>net-destroy</b>
       <b>Syntax:</b>

          net-destroy network

       Destroy (stop) a given transient or persistent virtual network specified by its name or UUID. This  takes
       effect immediately.

   <b>net-dumpxml</b>
       <b>Syntax:</b>

          net-dumpxml [--inactive] [--xpath EXPRESSION] [--wrap] network

       Output  the  virtual  network  information  as  an  XML dump to stdout.  If <u>--inactive</u> is specified, then
       physical functions are not expanded into their associated virtual functions.

       If the <b>--xpath</b> argument provides an XPath expression, it will be evaluated against  the  output  XML  and
       only  those  matching  nodes  will  be printed. The default behaviour is to print each matching node as a
       standalone document, however, for ease of additional processing,  the  <b>--wrap</b>  argument  will  cause  the
       matching node to be wrapped in a common root node.

   <b>net-edit</b>
       <b>Syntax:</b>

          net-edit network

       Edit the XML configuration file for a network.

       This is equivalent to:

          virsh net-dumpxml --inactive network &gt; network.xml
          vi network.xml (or make changes with your other text editor)
          virsh net-define network.xml

       except that it does some error checking.

       The editor used can be supplied by the <b>$VISUAL</b> or <b>$EDITOR</b> environment variables, and defaults to <b>vi</b>.

   <b>net-event</b>
       <b>Syntax:</b>

          net-event {[network] event [--loop] [--timeout seconds] [--timestamp] | --list}

       Wait for a class of network events to occur, and print appropriate details of events as they happen.  The
       events  can  optionally be filtered by <u>network</u>.  Using <u>--list</u> as the only argument will provide a list of
       possible <u>event</u> values known by this client, although the connection might not allow registering  for  all
       these events.

       By  default,  this  command  is  one-shot,  and returns success once an event occurs; you can send SIGINT
       (usually via <b>Ctrl-C</b>) to quit immediately.  If <u>--timeout</u> is specified, the command gives  up  waiting  for
       events  after  <u>seconds</u>  have  elapsed.    With  <u>--loop</u>,  the command prints all events until a timeout or
       interrupt key.

       When <u>--timestamp</u> is used, a human-readable timestamp will be printed before the event.

   <b>net-info</b>
       <b>Syntax:</b>

          net-info network

       Returns basic information about the <u>network</u> object.

   <b>net-list</b>
       <b>Syntax:</b>

          net-list [--inactive | --all]
             { [--table] | --name | --uuid }
             [--persistent] [&lt;--transient&gt;]
             [--autostart] [&lt;--no-autostart&gt;]
             [--title]

       Returns the list of active networks, if <u>--all</u> is specified this will also include  defined  but  inactive
       networks,  if  <u>--inactive</u> is specified only the inactive ones will be listed. You may also want to filter
       the returned networks by <u>--persistent</u> to list the persistent ones,  <u>--transient</u>  to  list  the  transient
       ones,  <u>--autostart</u>  to  list  the  ones  with autostart enabled, and <u>--no-autostart</u> to list the ones with
       autostart disabled.

       If <u>--name</u> is specified, network names are printed instead of the table formatted one per line. If  <u>--uuid</u>
       is  specified  network's  UUID's  are  printed  instead  of names. Flag <u>--table</u> specifies that the legacy
       table-formatted output should be used. This is the default. All of these are mutually exclusive.

       If <u>--title</u> is specified, then the short network description (title) is printed in an extra  column.  This
       flag is usable only with the default <u>--table</u> output.

       NOTE: When talking to older servers, this command is forced to use a series of API calls with an inherent
       race,  where  a pool might not be listed or might appear more than once if it changed state between calls
       while the list was being collected.  Newer servers do not have this problem.

   <b>net-metadata</b>
       <b>Syntax:</b>

          net-metadata network [[--live] [--config] | [--current]]
             [--edit] [uri] [key] [set] [--remove]

       Show or modify custom XML metadata of a network. The metadata is a user defined XML that  allows  storing
       arbitrary  XML data in the network definition.  Multiple separate custom metadata pieces can be stored in
       the network XML.  The pieces are identified by a private XML namespace provided  via  the  <u>uri</u>  argument.
       (See also <b>net-desc</b> that works with textual metadata of a network, such as title and description.)

       Flags  <u>--live</u>  or  <u>--config</u>  select  whether  this command works on live or persistent definitions of the
       network. If both <u>--live</u> and <u>--config</u> are specified, the <u>--config</u> option takes precedence on  getting  the
       current  description  and  both  live configuration and config are updated while setting the description.
       <u>--current</u> is exclusive and implied if none of these was specified.

       Flag <u>--remove</u> specifies that the metadata element specified by the <u>uri</u> argument should be removed  rather
       than updated.

       Flag  <u>--edit</u>  specifies  that an editor with the metadata identified by the <u>uri</u> argument should be opened
       and the contents saved back afterwards.  Otherwise the new contents can be provided via the <u>set</u> argument.

       When setting metadata via <u>--edit</u> or <u>set</u> the <u>key</u> argument must be specified and  is  used  to  prefix  the
       custom elements to bind them to the private namespace.

       If  neither  of  <u>--edit</u>  and  <u>set</u>  are  specified  the XML metadata corresponding to the <u>uri</u> namespace is
       displayed instead of being modified.

   <b>net-name</b>
       <b>Syntax:</b>

          net-name network-UUID

       Convert a network UUID to network name.

   <b>net-start</b>
       <b>Syntax:</b>

          net-start network

       Start a (previously defined) inactive network.

   <b>net-undefine</b>
       <b>Syntax:</b>

          net-undefine network

       Undefine the configuration for a persistent network. If the network is active, make it transient.

   <b>net-uuid</b>
       <b>Syntax:</b>

          net-uuid network-name

       Convert a network name to network UUID.

   <b>net-update</b>
       <b>Syntax:</b>

          net-update network command section xml
             [--parent-index index] [[--live] [--config] | [--current]]

       Update the given section of an existing network definition, with the  changes  optionally  taking  effect
       immediately, without needing to destroy and re-start the network.

       <u>command</u> is one of "add-first", "add-last", "add" (a synonym for add-last), "delete", or "modify".

       <u>section</u>   is   one   of   "bridge",   "domain",   "ip",   "ip-dhcp-host",   "ip-dhcp-range",   "forward",
       "forward-interface", "forward-pf", "portgroup", "dns-host", "dns-txt", or "dns-srv", each  section  being
       named  by a concatenation of the xml element hierarchy leading to the element being changed. For example,
       "ip-dhcp-host" will change a &lt;host&gt; element that is contained inside a  &lt;dhcp&gt;  element  inside  an  &lt;ip&gt;
       element of the network.

       <u>xml</u>   is   either  the  text  of  a  complete  xml  element  of  the  type  being  changed  (e.g.  "&lt;host
       mac="00:11:22:33:44:55' ip='1.2.3.4'/&gt;", or the name of a file that  contains  a  complete  xml  element.
       Disambiguation is done by looking at the first character of the provided text - if the first character is
       "&lt;",  it  is  xml text, if the first character is not "&lt;", it is the name of a file that contains the xml
       text to be used.

       The <u>--parent-index</u> option is used to specify which of several parent elements the requested element is in
       (0-based). For example, a dhcp &lt;host&gt; element could be in any  one  of  multiple  &lt;ip&gt;  elements  in  the
       network;  if a parent-index isn't provided, the "most appropriate" &lt;ip&gt; element will be selected (usually
       the only one that already has a &lt;dhcp&gt; element), but if <u>--parent-index</u> is given, that particular instance
       of &lt;ip&gt; will get the modification.

       If <u>--live</u> is specified, affect a running network.  If <u>--config</u> is specified, affect the next startup of a
       persistent network.  If <u>--current</u> is specified, it is equivalent to either <u>--live</u> or <u>--config</u>,  depending
       on  the  current  state  of  the  guest.   Both  <u>--live</u> and <u>--config</u> flags may be given, but <u>--current</u> is
       exclusive. Not specifying any flag is the same as specifying <u>--current</u>.

   <b>net-dhcp-leases</b>
       <b>Syntax:</b>

          net-dhcp-leases network [mac]

       Get a list of dhcp leases for all network interfaces connected to the given virtual  <u>network</u>  or  limited
       output just for one interface if <u>mac</u> is specified.

</pre><h4><b>NETWORK</b> <b>PORT</b> <b>COMMANDS</b></h4><pre>
       The  following  commands  manipulate  network  ports.  Libvirt virtual networks have ports created when a
       virtual machine has a virtual network interface added. In general there should be no need to use  any  of
       the  commands  here,  since  the  hypervisor  drivers run these commands are the right point in a virtual
       machine's lifecycle. They can be useful for debugging problems and / or  recovering  from  bugs  /  stale
       state.

   <b>net-port-list</b>
       <b>Syntax:</b>

          net-port-list { [--table] | --uuid } network

       List all network ports recorded against the network.

       If  <u>--uuid</u> is specified network ports' UUID's are printed instead of a table. Flag <u>--table</u> specifies that
       the legacy table-formatted output should be used. This  is  the  default.   All  of  these  are  mutually
       exclusive.

   <b>net-port-create</b>
       <b>Syntax:</b>

          net-port-create network file [--validate]

       Allocate a new network port reserving resources based on the port description.  Optionally, the format of
       the input XML file can be validated against an internal RNG schema with <u>--validate</u>.

   <b>net-port-dumpxml</b>
       <b>Syntax:</b>

          net-port-dumpxml [--xpath EXPRESSION] [--wrap] network port

       Output the network port information as an XML dump to stdout.

       If  the  <b>--xpath</b>  argument  provides an XPath expression, it will be evaluated against the output XML and
       only those matching nodes will be printed. The default behaviour is to print  each  matching  node  as  a
       standalone  document,  however,  for  ease  of  additional processing, the <b>--wrap</b> argument will cause the
       matching node to be wrapped in a common root node.

   <b>net-port-delete</b>
       <b>Syntax:</b>

          net-port-delete network port

       Delete record of the network port and release its resources

</pre><h4><b>INTERFACE</b> <b>COMMANDS</b></h4><pre>
       The following commands manipulate host interfaces.  Often, these host interfaces can then be used by name
       within domain &lt;interface&gt; elements  (such  as  a  system-created  bridge  interface),  but  there  is  no
       requirement that host interfaces be tied to any particular guest configuration XML at all.

       Many of the commands for host interfaces are similar to the ones used for domains, and the way to name an
       interface  is  either by its name or its MAC address.  However, using a MAC address for an <u>iface</u> argument
       only works when that address is unique (if an interface and a bridge share the same MAC address, which is
       often the case, then using that MAC address results in an error due to ambiguity, and you must resort  to
       a name instead).

   <b>iface-bridge</b>
       <b>Syntax:</b>

          iface-bridge interface bridge [--no-stp] [delay] [--no-start]

       Create  a bridge device named <u>bridge</u>, and attach the existing network device <u>interface</u> to the new bridge.
       The new bridge defaults to starting immediately, with STP enabled and a delay of 0; these settings can be
       altered with <u>--no-stp</u>,  <u>--no-start</u>,  and  an  integer  number  of  seconds  for  <u>delay</u>.  All  IP  address
       configuration of <u>interface</u> will be moved to the new bridge device.

       See also <b>iface-unbridge</b> for undoing this operation.

   <b>iface-define</b>
       <b>Syntax:</b>

          iface-define file [--validate]

       Define  an  inactive persistent physical host interface or modify an existing persistent one from the XML
       <u>file</u>. Optionally, the format of the input XML file can be validated against an internal RNG  schema  with
       <u>--validate</u>.

   <b>iface-destroy</b>
       <b>Syntax:</b>

          iface-destroy interface

       Destroy (stop) a given host interface, such as by running "if-down" to disable that interface from active
       use. This takes effect immediately.

   <b>iface-dumpxml</b>
       <b>Syntax:</b>

          iface-dumpxml [--inactive] [--xpath EXPRESSION] [--wrap] interface

       Output  the  host  interface  information as an XML dump to stdout.  If <u>--inactive</u> is specified, then the
       output reflects the persistent state of the interface that will be used the next time it is started.

       If the <b>--xpath</b> argument provides an XPath expression, it will be evaluated against  the  output  XML  and
       only  those  matching  nodes  will  be printed. The default behaviour is to print each matching node as a
       standalone document, however, for ease of additional processing,  the  <b>--wrap</b>  argument  will  cause  the
       matching node to be wrapped in a common root node.

   <b>iface-edit</b>
       <b>Syntax:</b>

          iface-edit interface

       Edit the XML configuration file for a host interface.

       This is equivalent to:

          virsh iface-dumpxml iface &gt; iface.xml
          vi iface.xml (or make changes with your other text editor)
          virsh iface-define iface.xml

       except that it does some error checking.

       The editor used can be supplied by the <b>$VISUAL</b> or <b>$EDITOR</b> environment variables, and defaults to <b>vi</b>.

   <b>iface-list</b>
       <b>Syntax:</b>

          iface-list [--inactive | --all]

       Returns  the  list  of  active host interfaces.  If <u>--all</u> is specified this will also include defined but
       inactive interfaces.  If <u>--inactive</u> is specified only the inactive ones will be listed.

   <b>iface-name</b>
       <b>Syntax:</b>

          iface-name interface

       Convert a host interface MAC to interface name, if the MAC address is unique among the host's interfaces.

       <u>interface</u> specifies the interface MAC address.

   <b>iface-mac</b>
       <b>Syntax:</b>

          iface-mac interface

       Convert a host interface name to MAC address.

       <u>interface</u> specifies the interface name.

   <b>iface-start</b>
       <b>Syntax:</b>

          iface-start interface

       Start a (previously defined) host interface, such as by running "if-up".

   <b>iface-unbridge</b>
       <b>Syntax:</b>

          iface-unbridge bridge [--no-start]

       Tear down a bridge device named <u>bridge</u>, releasing its underlying interface  back  to  normal  usage,  and
       moving  all  IP  address  configuration  from the bridge device to the underlying device.  The underlying
       interface is restarted unless <u>--no-start</u> is present; this flag is present for symmetry, but generally not
       recommended.

       See also <b>iface-bridge</b> for creating a bridge.

   <b>iface-undefine</b>
       <b>Syntax:</b>

          iface-undefine interface

       Undefine the configuration for an inactive host interface.

   <b>iface-begin</b>
       <b>Syntax:</b>

          iface-begin

       Create a snapshot of current host interface settings, which can  later  be  committed  (<u>iface-commit</u>)  or
       restored  (<u>iface-rollback</u>).  If a snapshot already exists, then this command will fail until the previous
       snapshot has been committed or restored.  Undefined behavior results if any external changes are made  to
       host interfaces outside of the libvirt API between the beginning of a snapshot and its eventual commit or
       rollback.

   <b>iface-commit</b>
       <b>Syntax:</b>

          iface-commit

       Declare  all  changes  since  the  last  <u>iface-begin</u>  as  working,  and delete the rollback point.  If no
       interface snapshot has already been started, then this command will fail.

   <b>iface-rollback</b>
       <b>Syntax:</b>

          iface-rollback

       Revert all host interface settings back to the state recorded in the last <u>iface-begin</u>.  If  no  interface
       snapshot  has  already  been  started, then this command will fail.  Rebooting the host also serves as an
       implicit rollback point.

</pre><h4><b>STORAGE</b> <b>POOL</b> <b>COMMANDS</b></h4><pre>
       The following commands manipulate storage pools. Libvirt has the capability  to  manage  various  storage
       solutions,  including  files,  raw  partitions,  and domain-specific formats, used to provide the storage
       volumes visible as devices within virtual machines. For more detailed information about this feature, see
       the documentation at
        &lt;https://libvirt.org/formatstorage.html&gt;  . Many of the commands for pools are similar to the ones  used
       for domains.

   <b>find-storage-pool-sources</b>
       <b>Syntax:</b>

          find-storage-pool-sources type [srcSpec]

       Returns XML describing all possible available storage pool sources that could be used to create or define
       a  storage  pool  of  a  given  <u>type</u>.  If  <u>srcSpec</u> is provided, it is a file that contains XML to further
       restrict the query for pools.

       Not all storage pools support discovery in this manner. Furthermore, for those that do support discovery,
       only specific XML elements are required in order to return valid data,  while  other  elements  and  even
       attributes of some elements are ignored since they are not necessary to find the pool based on the search
       criteria.  The  following  lists the supported <u>type</u> options and the expected minimal XML elements used to
       perform the search.

       For a "netfs" or "gluster" pool, the minimal expected XML required is the &lt;host&gt; element  with  a  "name"
       attribute describing the IP address or hostname to be used to find the pool. The "port" attribute will be
       ignored as will any other provided XML elements in <u>srcSpec</u>.

       For a "logical" pool, the contents of the <u>srcSpec</u> file are ignored, although if provided the file must at
       least exist.

       For  an  "iscsi"  or  "iscsi-direct"  pool,  the minimal expect XML required is the &lt;host&gt; element with a
       "name" attribute describing the IP address or hostname to be used to find  the  pool  (the  iSCSI  server
       address). Optionally, the "port" attribute may be provided, although it will default to 3260. Optionally,
       an  &lt;initiator&gt;  XML element with a "name" attribute may be provided to further restrict the iSCSI target
       search to a specific initiator for multi-iqn iSCSI storage pools.

   <b>find-pool-sources-as</b>
       <b>Syntax:</b>

          find-storage-pool-sources-as type [host] [port] [initiator]

       Rather than providing <u>srcSpec</u> XML file for <b>find-storage-pool-sources</b> use this command option in order  to
       have  virsh  generate  the  query XML file using the optional arguments. The command will return the same
       output XML as <b>find-storage-pool-sources</b>.

       Use <u>host</u> to describe a specific host to use for networked storage, such as netfs, gluster, and iscsi <u>type</u>
       pools.

       Use <u>port</u> to further restrict which networked port to utilize  for  the  connection  if  required  by  the
       specific storage backend, such as iscsi.

       Use <u>initiator</u> to further restrict the iscsi <u>type</u> pool searches to specific target initiators.

   <b>pool-autostart</b>
       <b>Syntax:</b>

          pool-autostart pool-or-uuid [--disable]

       Configure whether <u>pool</u> should automatically start at boot.

   <b>pool-build</b>
       <b>Syntax:</b>

          pool-build pool-or-uuid [--overwrite] [--no-overwrite]

       Build a given pool.

       Options  <u>--overwrite</u>  and  <u>--no-overwrite</u>  can only be used for <b>pool-build</b> a filesystem, disk, or logical
       pool.

       For a file system pool if neither flag is specified, then <b>pool-build</b> just makes the target path directory
       and no attempt to run mkfs on the target volume device. If <u>--no-overwrite</u>  is  specified,  it  probes  to
       determine  if a filesystem already exists on the target device, returning an error if one exists or using
       mkfs to format the target device if not.  If <u>--overwrite</u> is specified, mkfs is always  executed  and  any
       existing data on the target device is overwritten unconditionally.

       For  a  disk  pool, if neither of them is specified or <u>--no-overwrite</u> is specified, <b>pool-build</b> will check
       the target volume device for existing filesystems or partitions before attempting to write a new label on
       the target volume device. If the target volume device already has a label,  the  command  will  fail.  If
       <u>--overwrite</u>  is  specified, then no check will be made on the target volume device prior to writing a new
       label. Writing of the label uses the pool source format type or "dos" if not specified.

       For a logical pool, if neither of them is specified or <u>--no-overwrite</u> is specified, <b>pool-build</b> will check
       the target volume devices for existing filesystems or partitions  before  attempting  to  initialize  and
       format  each  device  for usage by the logical pool. If any target volume device already has a label, the
       command will fail. If <u>--overwrite</u> is specified, then no check will be made on the target  volume  devices
       prior  to  initializing  and  formatting  each  device.  Once  all the target volume devices are properly
       formatted via pvcreate, the volume group will be created using all the devices.

   <b>pool-create</b>
       <b>Syntax:</b>

          pool-create file [--build] [[--overwrite] | [--no-overwrite]]

       Create and start a pool object from the XML <u>file</u>.

       [<u>--build</u>] [[<u>--overwrite</u>] | [<u>--no-overwrite</u>]] perform a <b>pool-build</b> after creation in order to  remove  the
       need  for a follow-up command to build the pool. The <u>--overwrite</u> and <u>--no-overwrite</u> flags follow the same
       rules as <b>pool-build</b>. If just <u>--build</u> is provided, then <b>pool-build</b> is called with no flags.

   <b>pool-create-as</b>
       <b>Syntax:</b>

          pool-create-as name type
             [--source-host hostname] [--source-path path] [--source-dev path]
             [--source-name name] [--target path] [--source-format format]
             [--source-initiator initiator-iqn]
             [--auth-type authtype --auth-username username
             [--secret-usage usage | --secret-uuid uuid]]
             [--source-protocol-ver ver]
             [[--adapter-name name] | [--adapter-wwnn wwnn --adapter-wwpn wwpn]
             [--adapter-parent parent |
             --adapter-parent-wwnn parent_wwnn adapter-parent-wwpn parent_wwpn |
             --adapter-parent-fabric-wwn parent_fabric_wwn]]
             [--build] [[--overwrite] | [--no-overwrite]] [--print-xml]

       Create and start a pool object <u>name</u> from the raw parameters.  If <u>--print-xml</u> is specified, then print the
       XML of the pool object without creating the pool.  Otherwise, the pool has the specified <u>type</u>. When using
       <b>pool-create-as</b> for a pool of <u>type</u> "disk", the existing partitions found on the <u>--source-dev</u> <u>path</u> will  be
       used  to populate the disk pool. Therefore, it is suggested to use <b>pool-define-as</b> and <b>pool-build</b> with the
       <u>--overwrite</u> in order to properly initialize the disk pool.

       [<u>--source-host</u> <u>hostname</u>] provides the source hostname for pools backed by storage from  a  remote  server
       (pool types netfs, iscsi, rbd, sheepdog, gluster).

       [<u>--source-path</u> <u>path</u>] provides the source directory path for pools backed by directories (pool type dir).

       [<u>--source-dev</u>  <u>path</u>]  provides  the  source  path  for  pools  backed by physical devices (pool types fs,
       logical, disk, iscsi, zfs).

       [<u>--source-name</u> <u>name</u>] provides the source name for pools backed by storage  from  a  named  element  (pool
       types logical, rbd, sheepdog, gluster).

       [<u>--target</u> <u>path</u>] is the path for the mapping of the storage pool into the host file system.

       [<u>--source-format</u>  <u>format</u>]  provides information about the format of the pool (pool types fs, netfs, disk,
       logical).

       [<u>--source-initiator</u> <u>initiator-iqn</u>] provides the initiator iqn for iscsi connection of the pool (pool type
       iscsi-direct).

       [<u>--auth-type</u> <u>authtype</u> <u>--auth-username</u> <u>username</u> [<u>--secret-usage</u> <u>usage</u> | <u>--secret-uuid</u> <u>uuid</u>]] provides  the
       elements  required  to  generate  authentication credentials for the storage pool. The <u>authtype</u> is either
       chap for iscsi <u>type</u> pools or ceph for rbd <u>type</u> pools. Either the  secret  <u>usage</u>  or  <u>uuid</u>  value  may  be
       provided, but not both.

       [<u>--source-protocol-ver</u>  <u>ver</u>]  provides  the  NFS protocol version number used to contact the server's NFS
       service via nfs mount option 'nfsvers=n'. It is expect the <u>ver</u> value is an unsigned integer.

       [<u>--adapter-name</u> <u>name</u>] defines the scsi_hostN adapter name to be used for the scsi_host adapter type pool.

       [<u>--adapter-wwnn</u> <u>wwnn</u> <u>--adapter-wwpn</u> <u>wwpn</u> [<u>--adapter-parent</u>  <u>parent</u>  |  <u>--adapter-parent-wwnn</u>  <u>parent_wwnn</u>
       <u>adapter-parent-wwpn</u>  <u>parent_wwpn</u>  |  <u>--adapter-parent-fabric-wwn</u> <u>parent_fabric_wwn</u>]] defines the wwnn and
       wwpn to be used for the fc_host adapter type pool.  Optionally provide the parent scsi_hostN node  device
       to  be  used  for the vHBA either by parent name, parent_wwnn and parent_wwpn, or parent_fabric_wwn.  The
       parent name could  change  between  reboots  if  the  hardware  environment  changes,  so  providing  the
       parent_wwnn  and  parent_wwpn  ensure  usage  of the same physical HBA even if the scsi_hostN node device
       changes. Usage of the parent_fabric_wwn allows a bit more flexibility  to  choose  an  HBA  on  the  same
       storage fabric in order to define the pool.

       [<u>--build</u>]  [[<u>--overwrite</u>]  | [<u>--no-overwrite</u>]] perform a <b>pool-build</b> after creation in order to remove the
       need for a follow-up command to build the pool. The <u>--overwrite</u> and <u>--no-overwrite</u> flags follow the  same
       rules as <b>pool-build</b>. If just <u>--build</u> is provided, then <b>pool-build</b> is called with no flags.

       For  a  "logical" pool only [<u>--name</u>] needs to be provided. The [<u>--source-name</u>] if provided must match the
       Volume Group name.  If not provided, one will be generated using the [<u>--name</u>]. If provided the [<u>--target</u>]
       is ignored and a target source  is  generated  using  the  [<u>--source-name</u>]  (or  as  generated  from  the
       [<u>--name</u>]).

   <b>pool-define</b>
       <b>Syntax:</b>

          pool-define file [--validate]

       Define  an  inactive  persistent  storage  pool  or  modify an existing persistent one from the XML <u>file</u>.
       Optionally, the format of the input XML file can  be  validated  against  an  internal  RNG  schema  with
       <u>--validate</u>.

   <b>pool-define-as</b>
       <b>Syntax:</b>

          pool-define-as name type
             [--source-host hostname] [--source-path path] [--source-dev path]
             [*--source-name name*] [*--target path*] [*--source-format format*]
             [--source-initiator initiator-iqn]
             [*--auth-type authtype* *--auth-username username*
             [*--secret-usage usage* | *--secret-uuid uuid*]]
             [*--source-protocol-ver ver*]
             [[*--adapter-name name*] | [*--adapter-wwnn* *--adapter-wwpn*]
             [*--adapter-parent parent*]] [*--print-xml*]

       Create,  but do not start, a pool object <u>name</u> from the raw parameters.  If <u>--print-xml</u> is specified, then
       print the XML of the pool object without defining the pool.  Otherwise, the pool has the specified <u>type</u>.

       Use the same arguments as  <b>pool-create-as</b>,  except  for  the  <u>--build</u>,  <u>--overwrite</u>,  and  <u>--no-overwrite</u>
       options.

   <b>pool-destroy</b>
       <b>Syntax:</b>

          pool-destroy pool-or-uuid

       Destroy  (stop)  a  given  <u>pool</u>  object.  Libvirt will no longer manage the storage described by the pool
       object, but the raw data contained in  the  pool  is  not  changed,  and  can  be  later  recovered  with
       <b>pool-create</b>.

   <b>pool-delete</b>
       <b>Syntax:</b>

          pool-delete pool-or-uuid

       Destroy  the  resources  used by a given <u>pool</u> object. This operation is non-recoverable.  The <u>pool</u> object
       will still exist after this command, ready for the creation of new storage volumes.

   <b>pool-dumpxml</b>
       <b>Syntax:</b>

          pool-dumpxml [--inactive] [--xpath EXPRESSION] [--wrap] pool-or-uuid

       Returns the XML information about the <u>pool</u> object.  <u>--inactive</u> tells virsh  to  dump  pool  configuration
       that will be used on next start of the pool as opposed to the current pool configuration.

       If  the  <b>--xpath</b>  argument  provides an XPath expression, it will be evaluated against the output XML and
       only those matching nodes will be printed. The default behaviour is to print  each  matching  node  as  a
       standalone  document,  however,  for  ease  of  additional processing, the <b>--wrap</b> argument will cause the
       matching node to be wrapped in a common root node.

   <b>pool-edit</b>
       <b>Syntax:</b>

          pool-edit pool-or-uuid

       Edit the XML configuration file for a storage pool.

       This is equivalent to:

          virsh pool-dumpxml pool &gt; pool.xml
          vi pool.xml (or make changes with your other text editor)
          virsh pool-define pool.xml

       except that it does some error checking.

       The editor used can be supplied by the <b>$VISUAL</b> or <b>$EDITOR</b> environment variables, and defaults to <b>vi</b>.

   <b>pool-info</b>
       <b>Syntax:</b>

          pool-info [--bytes] pool-or-uuid

       Returns basic information about the <u>pool</u> object. If <u>--bytes</u> is specified the sizes of basic info are  not
       converted to human friendly units.

   <b>pool-list</b>
       <b>Syntax:</b>

          pool-list [--inactive] [--all]
             [--persistent] [--transient]
             [--autostart] [--no-autostart]
             [[--details] [--uuid]
             [--name] [&lt;type&gt;]

       List  pool objects known to libvirt.  By default, only active pools are listed; <u>--inactive</u> lists just the
       inactive pools, and <u>--all</u> lists all pools.

       In addition, there are several sets of filtering flags. <u>--persistent</u> is to  list  the  persistent  pools,
       <u>--transient</u>  is  to  list  the transient pools.  <u>--autostart</u> lists the autostarting pools, <u>--no-autostart</u>
       lists the pools with autostarting disabled. If <u>--uuid</u> is specified only pool's  UUIDs  are  printed.   If
       <u>--name</u>  is  specified only pool's names are printed. If both <u>--name</u> and <u>--uuid</u> are specified, pool's UUID
       and names are printed side by side without any  header.  Option  <u>--details</u>  is  mutually  exclusive  with
       options <u>--uuid</u> and <u>--name</u>.

       You  may  also  want  to  list pools with specified types using <u>type</u>, the pool types must be separated by
       comma, e.g. --type dir,disk. The valid pool  types  include  'dir',  'fs',  'netfs',  'logical',  'disk',
       'iscsi', 'scsi', 'mpath', 'rbd', 'sheepdog', 'gluster', 'zfs', 'vstorage' and 'iscsi-direct'.

       The  <u>--details</u>  option  instructs  virsh  to  additionally  display pool persistence and capacity related
       information where available.

       NOTE: When talking to older servers, this command is forced to use a series of API calls with an inherent
       race, where a pool might not be listed or might appear more than once if it changed state  between  calls
       while the list was being collected.  Newer servers do not have this problem.

   <b>pool-name</b>
       <b>Syntax:</b>

          pool-name uuid

       Convert the <u>uuid</u> to a pool name.

   <b>pool-refresh</b>
       <b>Syntax:</b>

          pool-refresh pool-or-uuid

       Refresh the list of volumes contained in <u>pool</u>.

   <b>pool-start</b>
       <b>Syntax:</b>

          pool-start pool-or-uuid [--build] [[--overwrite] | [--no-overwrite]]

       Start the storage <u>pool</u>, which is previously defined but inactive.

       [<u>--build</u>]  [[<u>--overwrite</u>] | [<u>--no-overwrite</u>]] perform a <b>pool-build</b> prior to <b>pool-start</b> to ensure the pool
       environment is in an expected state rather than needing to run the build command prior  to  startup.  The
       <u>--overwrite</u>  and  <u>--no-overwrite</u>  flags follow the same rules as <b>pool-build</b>. If just <u>--build</u> is provided,
       then <b>pool-build</b> is called with no flags.

       <b>Note</b>: A storage pool that relies on remote resources such as an "iscsi" or a (v)HBA  backed  "scsi"  pool
       may  need  to  be  refreshed multiple times in order to have all the volumes detected (see <b>pool-refresh</b>).
       This is because the corresponding volume devices may not be present in the host's filesystem  during  the
       initial  pool startup or the current refresh attempt. The number of refresh retries is dependent upon the
       network connection and the time the host takes to export the corresponding devices.

   <b>pool-undefine</b>
       <b>Syntax:</b>

          pool-undefine pool-or-uuid

       Undefine the configuration for an inactive <u>pool</u>.

   <b>pool-uuid</b>
       <b>Syntax:</b>

          pool-uuid pool

       Returns the UUID of the named <u>pool</u>.

   <b>pool-event</b>
       <b>Syntax:</b>

          pool-event {[pool] event [--loop] [--timeout seconds] [--timestamp] | --list}

       Wait for a class of storage pool events to occur, and print appropriate details of events as they happen.
       The events can optionally be filtered by <u>pool</u>.  Using <u>--list</u> as the only argument will provide a list  of
       possible  <u>event</u>  values known by this client, although the connection might not allow registering for all
       these events.

       By default, this command is one-shot, and returns success once an  event  occurs;  you  can  send  SIGINT
       (usually  via  <b>Ctrl-C</b>)  to quit immediately.  If <u>--timeout</u> is specified, the command gives up waiting for
       events after <u>seconds</u> have elapsed.   With <u>--loop</u>, the command  prints  all  events  until  a  timeout  or
       interrupt key.

       When <u>--timestamp</u> is used, a human-readable timestamp will be printed before the event.

</pre><h4><b>VOLUME</b> <b>COMMANDS</b></h4><pre>
   <b>vol-create</b>
       <b>Syntax:</b>

          vol-create pool-or-uuid FILE [--prealloc-metadata] [--validate]

       Create a volume from an XML &lt;file&gt;.

       <u>pool-or-uuid</u> is the name or UUID of the storage pool to create the volume in.

       <u>FILE</u>  is  the  XML  &lt;file&gt; with the volume definition. An easy way to create the XML &lt;file&gt; is to use the
       <b>vol-dumpxml</b> command to obtain the definition of a pre-existing volume.

       [<u>--prealloc-metadata</u>] preallocate metadata (for qcow2 images which don't support full  allocation).  This
       option creates a sparse image file with metadata, resulting in higher performance compared to images with
       no preallocation and only slightly higher initial disk space usage.

       If <u>--validate</u> is specified, validates the format of the XML document against an internal RNG schema.

       <b>Example:</b>

          virsh vol-dumpxml --pool storagepool1 appvolume1 &gt; newvolume.xml
          vi newvolume.xml (or make changes with your other text editor)
          virsh vol-create differentstoragepool newvolume.xml

   <b>vol-create-from</b>
       <b>Syntax:</b>

          vol-create-from pool-or-uuid FILE vol-name-or-key-or-path
             [--inputpool pool-or-uuid]  [--prealloc-metadata] [--reflink] [--validate]

       Create a volume, using another volume as input.

       <u>pool-or-uuid</u> is the name or UUID of the storage pool to create the volume in.

       <u>FILE</u> is the XML &lt;file&gt; with the volume definition.

       <u>vol-name-or-key-or-path</u> is the name or key or path of the source volume.

       <u>--inputpool</u> <u>pool-or-uuid</u> is the name or uuid of the storage pool the source volume is in.

       [<u>--prealloc-metadata</u>]  preallocate  metadata (for qcow2 images which don't support full allocation). This
       option creates a sparse image file with metadata, resulting in higher performance compared to images with
       no preallocation and only slightly higher initial disk space usage.

       When <u>--reflink</u> is specified, perform a COW lightweight copy, where the data blocks are copied  only  when
       modified.  If this is not possible, the copy fails.

       If <u>--validate</u> is specified, validates the format of the XML document against an internal RNG schema.

   <b>vol-create-as</b>
       <b>Syntax:</b>

          vol-create-as pool-or-uuid name capacity [--allocation size] [--format string]
             [--backing-vol vol-name-or-key-or-path]
             [--backing-vol-format string] [--prealloc-metadata] [--print-xml]

       Create  a  volume  from a set of arguments unless <u>--print-xml</u> is specified, in which case just the XML of
       the volume object is printed out without any actual object creation.

       <u>pool-or-uuid</u> is the name or UUID of the storage pool to create the volume in.

       <u>name</u> is the name of the new volume. For a disk pool, this must match the  partition  name  as  determined
       from the pool's source device path and the next available partition. For example, a source device path of
       /dev/sdb  and  there  are  no partitions on the disk, then the name must be sdb1 with the next name being
       sdb2 and so on.

       <u>capacity</u> is the size of the volume to be created, as a scaled integer (see <b>NOTES</b>  above),  defaulting  to
       bytes if there is no suffix.

       <u>--allocation</u>  <u>size</u> is the initial size to be allocated in the volume, also as a scaled integer defaulting
       to bytes.

       <u>--format</u> <u>string</u> is used in file based storage pools to specify the volume file format to use; raw, bochs,
       qcow, qcow2, vmdk, qed. Use extended for disk storage pools in order  to  create  an  extended  partition
       (other  values  are  validity  checked  but  not  preserved  when  libvirtd  is  restarted or the pool is
       refreshed).

       <u>--backing-vol</u> <u>vol-name-or-key-or-path</u> is the source backing volume to be used if taking a snapshot of  an
       existing volume.

       <u>--backing-vol-format</u>  <u>string</u>  is the format of the snapshot backing volume; raw, bochs, qcow, qcow2, qed,
       vmdk, host_device. These are, however, meant for file based storage pools.

       [<u>--prealloc-metadata</u>] preallocate metadata (for qcow2 images which don't support full  allocation).  This
       option creates a sparse image file with metadata, resulting in higher performance compared to images with
       no preallocation and only slightly higher initial disk space usage.

   <b>vol-clone</b>
       <b>Syntax:</b>

          vol-clone vol-name-or-key-or-path name
             [--pool pool-or-uuid] [--prealloc-metadata] [--reflink] [--print-xml]

       Clone  an  existing  volume  within  the  parent  pool.   Less  powerful,  but easier to type, version of
       <b>vol-create-from</b>.

       <u>vol-name-or-key-or-path</u> is the name or key or path of the source volume.

       <u>name</u> is the name of the new volume.

       <u>--pool</u> <u>pool-or-uuid</u> is the name or UUID of the storage pool that contains  the  source  volume  and  will
       contain the new volume.  If the source volume name is provided instead of the key or path, then providing
       the  pool  is  necessary to find the volume to be cloned; otherwise, the first volume found by the key or
       path will be used.

       [<u>--prealloc-metadata</u>] preallocate metadata (for qcow2 images which don't support full  allocation).  This
       option creates a sparse image file with metadata, resulting in higher performance compared to images with
       no preallocation and only slightly higher initial disk space usage.

       When  <u>--reflink</u>  is specified, perform a COW lightweight copy, where the data blocks are copied only when
       modified.  If this is not possible, the copy fails.

       If <u>--print-xml</u> is specified, then the XML used to clone the volume is printed instead.

   <b>vol-delete</b>
       <b>Syntax:</b>

          vol-delete vol-name-or-key-or-path [--pool pool-or-uuid] [--delete-snapshots]

       Delete a given volume.

       <u>vol-name-or-key-or-path</u> is the volume name or key or path of the volume to delete.

       [<u>--pool</u> <u>pool-or-uuid</u>] is the name or UUID of the storage pool the volume is in. If  the  volume  name  is
       provided  instead  of  the  key  or  path,  then providing the pool is necessary to find the volume to be
       deleted; otherwise, the first volume found by the key or path will be used.

       The <u>--delete-snapshots</u> flag specifies that any snapshots associated with the  storage  volume  should  be
       deleted as well. Not all storage drivers support this option, presently only rbd.

   <b>vol-upload</b>
       <b>Syntax:</b>

          vol-upload vol-name-or-key-or-path local-file
             [--pool pool-or-uuid] [--offset bytes]
             [--length bytes] [--sparse]

       Upload the contents of <u>local-file</u> to a storage volume.

       <u>vol-name-or-key-or-path</u> is the name or key or path of the volume where the <u>local-file</u> will be uploaded.

       <u>--pool</u>  <u>pool-or-uuid</u>  is  the  name  or  UUID of the storage pool the volume is in. If the volume name is
       provided instead of the key or path, then providing the pool is  necessary  to  find  the  volume  to  be
       uploaded into; otherwise, the first volume found by the key or path will be used.

       <u>--offset</u> is the position in the storage volume at which to start writing the data. The value must be 0 or
       larger.

       <u>--length</u>  is  an upper bound of the amount of data to be uploaded.  A negative value is interpreted as an
       unsigned long long value to essentially include everything from the offset to the end of the volume.

       If <u>--sparse</u> is specified, this command will preserve volume sparseness.

       An error will occur if the <u>local-file</u> is greater than the specified <u>length</u>.

       See the description for the libvirt virStorageVolUpload API for details regarding possible target  volume
       and pool changes as a result of the pool refresh when the upload is attempted.

   <b>vol-download</b>
       <b>Syntax:</b>

          vol-download vol-name-or-key-or-path local-file
             [--pool pool-or-uuid] [--offset bytes] [--length bytes]
             [--sparse]

       Download the contents of a storage volume to <u>local-file</u>.

       <u>vol-name-or-key-or-path</u> is the name or key or path of the volume to download into <u>local-file</u>.

       <u>--pool</u>  <u>pool-or-uuid</u>  is  the  name  or  UUID of the storage pool the volume is in. If the volume name is
       provided instead of the key or path, then providing the pool is  necessary  to  find  the  volume  to  be
       uploaded into; otherwise, the first volume found by the key or path will be used.

       <u>--offset</u> is the position in the storage volume at which to start reading the data. The value must be 0 or
       larger.

       <u>--length</u> is an upper bound of the amount of data to be downloaded.  A negative value is interpreted as an
       unsigned long long value to essentially include everything from the offset to the end of the volume.

       If <u>--sparse</u> is specified, this command will preserve volume sparseness.

   <b>vol-wipe</b>
       <b>Syntax:</b>

          vol-wipe vol-name-or-key-or-path [--pool pool-or-uuid] [--algorithm algorithm]

       Wipe a volume, ensure data previously on the volume is not accessible to future reads.

       <u>vol-name-or-key-or-path</u>  is  the  name  or  key  or path of the volume to wipe.  It is possible to choose
       different wiping algorithms instead of re-writing volume with zeroes.

       <u>--pool</u> <u>pool-or-uuid</u> is the name or UUID of the storage pool the volume is  in.  If  the  volume  name  is
       provided instead of the key or path, then providing the pool is necessary to find the volume to be wiped;
       otherwise, the first volume found by the key or path will be used.

       Use  the  <u>--algorithm</u>  switch choosing from the list of the following algorithms in order to define which
       algorithm to use for the wipe.

       <b>Supported</b> <b>algorithms</b>

       • zero       - 1-pass all zeroes

       • nnsa       - 4-pass NNSA Policy Letter NAP-14.1-C (XVI-8) for sanitizing  removable  and  non-removable
         hard disks: random x2, 0x00, verify.

       • dod         -  4-pass  DoD 5220.22-M section 8-306 procedure for sanitizing removable and non-removable
         rigid disks: random, 0x00, 0xff, verify.

       • bsi        - 9-pass method recommended by the German Center of Security in Information  Technologies  (
         &lt;https://www.bsi.bund.de&gt; ): 0xff, 0xfe, 0xfd, 0xfb, 0xf7, 0xef, 0xdf, 0xbf, 0x7f.

       • gutmann    - The canonical 35-pass sequence described in Gutmann's paper.

       • schneier    -  7-pass  method described by Bruce Schneier in "Applied Cryptography" (1996): 0x00, 0xff,
         random x5.

       • pfitzner7  - Roy Pfitzner's 7-random-pass method: random x7.

       • pfitzner33 - Roy Pfitzner's 33-random-pass method: random x33.

       • random     - 1-pass pattern: random.

       • trim       - 1-pass trimming the volume using TRIM or DISCARD

       <b>Note</b>: The <b>scrub</b> binary  will  be  used  to  handle  the  'nnsa',  'dod',  'bsi',  'gutmann',  'schneier',
       'pfitzner7'  and  'pfitzner33'  algorithms.   The  availability  of  the algorithms may be limited by the
       version of the <b>scrub</b> binary installed on the host. The 'zero' algorithm will write zeroes to  the  entire
       volume. For some volumes, such as sparse or rbd volumes, this may result in completely filling the volume
       with  zeroes  making  it  appear  to be completely full. As an alternative, the 'trim' algorithm does not
       overwrite all the data in a volume, rather it expects the storage driver to be able to discard all  bytes
       in  a volume. It is up to the storage driver to handle how the discarding occurs. Not all storage drivers
       or volume types can support 'trim'.

   <b>vol-dumpxml</b>
       <b>Syntax:</b>

          vol-dumpxml [--pool pool-or-uuid] [--xpath EXPRESSION] [--wrap]
                      vol-name-or-key-or-path

       Output the volume information as an XML dump to stdout.

       <u>vol-name-or-key-or-path</u> is the name or key or path of the volume to output the XML.

       <u>--pool</u> <u>pool-or-uuid</u> is the name or UUID of the storage pool the volume is  in.  If  the  volume  name  is
       provided  instead  of  the  key  or  path,  then providing the pool is necessary to find the volume to be
       uploaded into; otherwise, the first volume found by the key or path will be used.

       If the <b>--xpath</b> argument provides an XPath expression, it will be evaluated against  the  output  XML  and
       only  those  matching  nodes  will  be printed. The default behaviour is to print each matching node as a
       standalone document, however, for ease of additional processing,  the  <b>--wrap</b>  argument  will  cause  the
       matching node to be wrapped in a common root node.

   <b>vol-info</b>
       <b>Syntax:</b>

          vol-info vol-name-or-key-or-path [--pool pool-or-uuid] [--bytes] [--physical]

       Returns basic information about the given storage volume.

       <u>vol-name-or-key-or-path</u> is the name or key or path of the volume to return information for.

       <u>--pool</u>  <u>pool-or-uuid</u>  is  the  name  or  UUID of the storage pool the volume is in. If the volume name is
       provided instead of the key or path, then providing the pool is  necessary  to  find  the  volume  to  be
       uploaded into; otherwise, the first volume found by the key or path will be used.

       If <u>--bytes</u> is specified the sizes are not converted to human friendly units.

       If  <u>--physical</u>  is  specified,  then  the  host  physical  size  is returned and displayed instead of the
       allocation value. The physical value for some file types, such as qcow2 may  have  a  different  (larger)
       physical  value  than is shown for allocation. Additionally sparse files will have different physical and
       allocation values.

   <b>vol-list</b>
       <b>Syntax:</b>

          vol-list [--pool pool-or-uuid] [--details]

       Return the list of volumes in the given storage pool.

       <u>--pool</u> <u>pool-or-uuid</u> is the name or UUID of the storage pool.

       The <u>--details</u> option instructs virsh to additionally display volume type and capacity related information
       where available.

   <b>vol-pool</b>
       <b>Syntax:</b>

          vol-pool vol-key-or-path [--uuid]

       Return the pool name or UUID for a given volume. By default, the pool name is returned.

       <u>vol-key-or-path</u> is the key or path of the volume to return the pool information.

       If the <u>--uuid</u> option is given, the pool UUID is returned instead.

   <b>vol-path</b>
       <b>Syntax:</b>

          vol-path vol-name-or-key [--pool pool-or-uuid]

       Return the path for a given volume.

       <u>vol-name-or-key</u> is the name or key of the volume to return the path.

       <u>--pool</u> <u>pool-or-uuid</u> is the name or UUID of the storage pool the volume is  in.  If  the  volume  name  is
       provided instead of the key, then providing the pool is necessary to find the volume to be uploaded into;
       otherwise, the first volume found by the key will be used.

   <b>vol-name</b>
       <b>Syntax:</b>

          vol-name vol-key-or-path

       Return the name for a given volume.

       <u>vol-key-or-path</u> is the key or path of the volume to return the name.

   <b>vol-key</b>
       <b>Syntax:</b>

          vol-key vol-name-or-path [--pool pool-or-uuid]

       Return the volume key for a given volume.

       <u>vol-name-or-path</u> is the name or path of the volume to return the volume key.

       <u>--pool</u>  <u>pool-or-uuid</u>  is  the  name  or  UUID of the storage pool the volume is in. If the volume name is
       provided instead of the path, then providing the pool is necessary to find  the  volume  to  be  uploaded
       into; otherwise, the first volume found by the path will be used.

   <b>vol-resize</b>
       <b>Syntax:</b>

          vol-resize vol-name-or-path capacity [--pool pool-or-uuid] [--allocate] [--delta] [--shrink]

       Resize the capacity of the given volume, in bytes.

       <u>vol-name-or-key-or-path</u> is the name or key or path of the volume to resize.

       <u>capacity</u>  is  a  scaled  integer (see <b>NOTES</b> above) for the volume, which defaults to bytes if there is no
       suffix.

       <u>--pool</u> <u>pool-or-uuid</u> is the name or UUID of the storage pool the volume is  in.  If  the  volume  name  is
       provided  instead  of  the  key  or  path,  then providing the pool is necessary to find the volume to be
       uploaded into; otherwise, the first volume found by the key or path will be used.

       The new <u>capacity</u> might be sparse unless <u>--allocate</u> is specified.

       Normally, <u>capacity</u> is the new size, but if <u>--delta</u> is present, then it is added to the existing size.

       Attempts to shrink the volume will fail unless <u>--shrink</u> is present.   The  <u>capacity</u>  cannot  be  negative
       unless <u>--shrink</u> is provided, but a negative sign is not necessary.

       This  command  is  only  safe for storage volumes not in use by an active guest; see also <b>blockresize</b> for
       live resizing.

</pre><h4><b>SECRET</b> <b>COMMANDS</b></h4><pre>
       The following commands manipulate "secrets" (e.g. passwords, passphrases and encryption  keys).   Libvirt
       can  store secrets independently from their use, and other objects (e.g. volumes or domains) can refer to
       the secrets for encryption or possibly other uses.  Secrets are identified using a UUID.  See
        &lt;https://libvirt.org/formatsecret.html&gt;   for  documentation  of  the  XML  format  used  to   represent
       properties of secrets.

   <b>secret-define</b>
       <b>Syntax:</b>

          secret-define file [--validate]

       Create a secret with the properties specified in <u>file</u>, with no associated secret value.  If <u>file</u> does not
       specify  a  UUID,  choose one automatically.  If <u>file</u> specifies a UUID of an existing secret, replace its
       properties by properties defined in <u>file</u>, without affecting the secret value.

       Optionally, the format of the input XML file can  be  validated  against  an  internal  RNG  schema  with
       <u>--validate</u>.

   <b>secret-dumpxml</b>
       <b>Syntax:</b>

          secret-dumpxml [--xpath EXPRESSION] [--wrap] secret

       Output properties of <u>secret</u> (specified by its UUID) as an XML dump to stdout.

       If  the  <b>--xpath</b>  argument  provides an XPath expression, it will be evaluated against the output XML and
       only those matching nodes will be printed. The default behaviour is to print  each  matching  node  as  a
       standalone  document,  however,  for  ease  of  additional processing, the <b>--wrap</b> argument will cause the
       matching node to be wrapped in a common root node.

   <b>secret-event</b>
       <b>Syntax:</b>

          secret-event {[secret] event [--loop] [--timeout seconds] [--timestamp] | --list}

       Wait for a class of secret events to occur, and print appropriate details of events as they happen.   The
       events  can  optionally  be filtered by <u>secret</u>.  Using <u>--list</u> as the only argument will provide a list of
       possible <u>event</u> values known by this client, although the connection might not allow registering  for  all
       these events.

       By  default,  this  command  is  one-shot,  and returns success once an event occurs; you can send SIGINT
       (usually via <b>Ctrl-C</b>) to quit immediately.  If <u>--timeout</u> is specified, the command gives  up  waiting  for
       events  after  <u>seconds</u>  have  elapsed.    With  <u>--loop</u>,  the command prints all events until a timeout or
       interrupt key.

       When <u>--timestamp</u> is used, a human-readable timestamp will be printed before the event.

   <b>secret-set-value</b>
       <b>Syntax:</b>

          secret-set-value secret (--file filename [--plain] | --interactive | base64)

       Set the value associated with <u>secret</u> (specified by its UUID) to the value Base64-encoded value <u>base64</u>  or
       Base-64-encoded  contents  of  file named <u>filename</u>. Using the <u>--plain</u> flag is together with <u>--file</u> allows
       one to use the file contents directly as the secret value.

       If <u>--interactive</u> flag is used the secret value is read as a password from the terminal.

       Note that <u>--file</u>, <u>--interactive</u> and <u>base64</u> options are mutually exclusive.

       Passing secrets via the <u>base64</u> option on command line is INSECURE and deprecated. Use the  <u>--file</u>  option
       instead.

   <b>secret-get-value</b>
       <b>Syntax:</b>

          secret-get-value [--plain] secret

       Output the value associated with <u>secret</u> (specified by its UUID) to stdout, encoded using Base64.

       If  the  <u>--plain</u>  flag  is used the value is not base64 encoded, but rather printed raw. Note that unless
       virsh is started in quiet mode (<u>virsh</u> <u>-q</u>) it prints a newline at the end of the command. This newline  is
       not part of the secret.

   <b>secret-undefine</b>
       <b>Syntax:</b>

          secret-undefine secret

       Delete a <u>secret</u> (specified by its UUID), including the associated value, if any.

   <b>secret-list</b>
       <b>Syntax:</b>

          secret-list [--ephemeral] [--no-ephemeral]
             [--private] [--no-private]

       Returns  the list of secrets. You may also want to filter the returned secrets by <u>--ephemeral</u> to list the
       ephemeral ones, <u>--no-ephemeral</u> to list the non-ephemeral ones, <u>--private</u> to list the  private  ones,  and
       <u>--no-private</u> to list the non-private ones.

</pre><h4><b>SNAPSHOT</b> <b>COMMANDS</b></h4><pre>
       The following commands manipulate domain snapshots.  Snapshots take the disk, memory, and device state of
       a domain at a point-of-time, and save it for future use.  They have many uses, from saving a "clean" copy
       of  an  OS  image  to  saving a domain's state before a potentially destructive operation.  Snapshots are
       identified with a unique name.  See
        &lt;https://libvirt.org/formatsnapshot.html&gt;  for  documentation  of  the  XML  format  used  to  represent
       properties of snapshots.

   <b>snapshot-create</b>
       <b>Syntax:</b>

          snapshot-create domain [xmlfile] {[--redefine [--current]] |
             [--no-metadata] [--halt] [--disk-only] [--reuse-external]
             [--quiesce] [--atomic] [--live]} [--validate]

       Create  a  snapshot  for  domain  <u>domain</u>  with  the  properties  specified  in <u>xmlfile</u>.   Optionally, the
       <u>--validate</u> option can be passed to validate the format of the input XML  file  against  an  internal  RNG
       schema  (identical  to using the <a href="../man1/virt-xml-validate.1.html">virt-xml-validate</a>(1) tool). Normally, the only properties settable for a
       domain snapshot are the &lt;name&gt; and &lt;description&gt; elements, as well as &lt;disks&gt; if  <u>--disk-only</u>  is  given;
       the  rest  of  the  fields are ignored, and automatically filled in by libvirt.  If <u>xmlfile</u> is completely
       omitted, then libvirt will choose a value for all fields.  The  new  snapshot  will  become  current,  as
       listed by <b>snapshot-current</b>.

       If <u>--halt</u> is specified, the domain will be left in an inactive state after the snapshot is created.

       If  <u>--disk-only</u>  is  specified,  the  snapshot  will only include disk content rather than the usual full
       system snapshot with vm state.  Disk snapshots are  captured  faster  than  full  system  snapshots,  but
       reverting  to a disk snapshot may require fsck or journal replays, since it is like the disk state at the
       point when the power cord is abruptly pulled; and mixing <u>--halt</u> and <u>--disk-only</u> loses any data  that  was
       not flushed to disk at the time.

       If  <u>--redefine</u>  is  specified,  then all XML elements produced by <b>snapshot-dumpxml</b> are valid; this can be
       used to migrate snapshot hierarchy from one machine to another, to recreate hierarchy for the case  of  a
       transient  domain  that  goes  away and is later recreated with the same name and UUID, or to make slight
       alterations in the snapshot metadata (such as host-specific aspects of the domain  XML  embedded  in  the
       snapshot).   When  this  flag  is  supplied,  the <u>xmlfile</u> argument is mandatory, and the domain's current
       snapshot will not be altered unless the <u>--current</u> flag is also given.

       If <u>--no-metadata</u> is specified, then the snapshot  data  is  created,  but  any  metadata  is  immediately
       discarded  (that  is,  libvirt  does not treat the snapshot as current, and cannot revert to the snapshot
       unless <u>--redefine</u> is later used to teach libvirt about the metadata again).

       If <u>--reuse-external</u> is specified, and the snapshot XML requests an external snapshot with  a  destination
       of an existing file, then the destination must exist and be pre-created with correct format and metadata.
       The file is then reused; otherwise, a snapshot is refused to avoid losing contents of the existing files.

       If  <u>--quiesce</u>  is  specified, libvirt will try to use guest agent to freeze and unfreeze domain's mounted
       file systems. However, if domain has no guest  agent,  snapshot  creation  will  fail.   Currently,  this
       requires <u>--disk-only</u> to be passed as well.

       If  <u>--atomic</u>  is  specified,  libvirt  will guarantee that the snapshot either succeeds, or fails with no
       changes; not all hypervisors support this.  If this flag is not specified, then some hypervisors may fail
       after partially performing the action, and <b>dumpxml</b> must be  used  to  see  whether  any  partial  changes
       occurred.

       If  <u>--live</u>  is  specified,  libvirt takes the snapshot while the guest is running. Both disk snapshot and
       domain memory snapshot are taken. This increases the size of the memory image of the  external  snapshot.
       This is currently supported only for full system external snapshots.

       Existence  of  snapshot  metadata  will  prevent  attempts  to <b>undefine</b> a persistent guest.  However, for
       transient domains, snapshot metadata is silently lost when the domain quits running (whether  by  command
       such as <b>destroy</b> or by internal guest action).

       For  now,  it  is  not  possible  to  create  snapshots  in  a domain that has checkpoints, although this
       restriction will be lifted in a future release.

   <b>snapshot-create-as</b>
       <b>Syntax:</b>

          snapshot-create-as domain {[--print-xml] [--no-metadata]
             [--halt] [--reuse-external]} [name]
             [description] [--disk-only [--quiesce]] [--atomic] [--validate]
             [[--live] [--memspec memspec]] [--diskspec] diskspec]...

       Create a snapshot for domain <u>domain</u> with the given &lt;name&gt; and &lt;description&gt;; if either value is  omitted,
       libvirt  will  choose  a value.  If <u>--print-xml</u> is specified, then XML appropriate for <u>snapshot-create</u> is
       output, rather than actually creating a snapshot.  Otherwise, if <u>--halt</u> is specified, the domain will  be
       left  in  an  inactive state after the snapshot is created, and if <u>--disk-only</u> is specified, the snapshot
       will not include vm state.

       The <u>--memspec</u> option can be used to control whether a full system snapshot is internal or external.   The
       <u>--memspec</u>  flag  is  mandatory, followed by a <b>memspec</b> of the form <b>[file=]name[,snapshot=type]</b>, where type
       can be <b>no</b>, <b>internal</b>, or <b>external</b>.  To include a literal comma in  <b>file=name</b>,  escape  it  with  a  second
       comma. <u>--memspec</u> cannot be used together with <u>--disk-only</u>.

       The  <u>--diskspec</u>  option  can be used to control how <u>--disk-only</u> and external full system snapshots create
       external files.  This option can occur multiple times, according to the number of &lt;disk&gt; elements in  the
       domain  xml.  Each &lt;diskspec&gt; is in the form <b>disk[,snapshot=type][,driver=type][,stype=type][,file=name]</b>.
       A <u>diskspec</u> must be provided for disks backed by block devices as libvirt doesn't auto-generate file names
       for those.  The optional <b>stype</b> parameter allows one to control the type of  the  source  file.  Supported
       values  are  'file'  (default)  and  'block'.  To exclude a disk from an external snapshot use <b>--diskspec</b>
       <b>disk,snapshot=no</b>.

       To include a literal comma in <b>disk</b> or in <b>file=name</b>, escape it with a second comma.  A literal  <u>--diskspec</u>
       must  precede  each  <b>diskspec</b>  unless  all  three of <u>domain</u>, <u>name</u>, and <u>description</u> are also present.  For
       example, a diskspec of "vda,snapshot=external,file=/path/to,,new" results in the following XML:

          &lt;disk name='vda' snapshot='external'&gt;
            &lt;source file='/path/to,new'/&gt;
          &lt;/disk&gt;

       If <u>--reuse-external</u> is specified, and the domain XML or <u>diskspec</u> option  requests  an  external  snapshot
       with  a  destination of an existing file, then the destination must exist and be pre-created with correct
       format and metadata. The file is then reused; otherwise, a snapshot is refused to avoid  losing  contents
       of the existing files.

       If  <u>--quiesce</u>  is  specified, libvirt will try to use guest agent to freeze and unfreeze domain's mounted
       file systems. However, if domain has no guest  agent,  snapshot  creation  will  fail.   Currently,  this
       requires <u>--disk-only</u> to be passed as well.

       If  <u>--no-metadata</u>  is  specified,  then  the  snapshot  data  is created, but any metadata is immediately
       discarded (that is, libvirt does not treat the snapshot as current, and cannot  revert  to  the  snapshot
       unless <b>snapshot-create</b> is later used to teach libvirt about the metadata again).

       If  <u>--atomic</u>  is  specified,  libvirt  will guarantee that the snapshot either succeeds, or fails with no
       changes; not all hypervisors support this.  If this flag is not specified, then some hypervisors may fail
       after partially performing the action, and <b>dumpxml</b> must be  used  to  see  whether  any  partial  changes
       occurred.

       If <u>--live</u> is specified, libvirt takes the snapshot while the guest is running. This increases the size of
       the  memory  image  of  the  external snapshot. This is currently supported only for external full system
       snapshots.

       For now, it is not possible to  create  snapshots  in  a  domain  that  has  checkpoints,  although  this
       restriction will be lifted in a future release.

       Optionally, the <u>--validate</u> option can be passed to validate XML document which is internally generated by
       this command against the internal RNG schema.

   <b>snapshot-current</b>
       <b>Syntax:</b>

          snapshot-current domain {[--name] | [--security-info] | [snapshotname]}

       Without  <u>snapshotname</u>,  this will output the snapshot XML for the domain's current snapshot (if any).  If
       <u>--name</u> is specified, just  the  current  snapshot  name  instead  of  the  full  xml.   Otherwise,  using
       <u>--security-info</u> will also include security sensitive information in the XML.

       With  <u>snapshotname</u>,  this  is  a request to make the existing named snapshot become the current snapshot,
       without reverting the domain.

   <b>snapshot-edit</b>
       <b>Syntax:</b>

          snapshot-edit domain [snapshotname] [--current] {[--rename] | [--clone]}

       Edit the XML configuration file for <u>snapshotname</u> of a domain.  If both  <u>snapshotname</u>  and  <u>--current</u>  are
       specified,  also  force  the edited snapshot to become the current snapshot.  If <u>snapshotname</u> is omitted,
       then <u>--current</u> must be supplied, to edit the current snapshot.

       This is equivalent to:

          virsh snapshot-dumpxml dom name &gt; snapshot.xml
          vi snapshot.xml (or make changes with your other text editor)
          virsh snapshot-create dom snapshot.xml --redefine [--current]

       except that it does some error checking.

       The editor used can be supplied by the <b>$VISUAL</b> or <b>$EDITOR</b> environment variables, and defaults to <b>vi</b>.

       If <u>--rename</u> is specified, then the edits can change the snapshot name.  If  <u>--clone</u>  is  specified,  then
       changing  the  snapshot name will create a clone of the snapshot metadata.  If neither is specified, then
       the edits must not change the snapshot name.  Note that changing a snapshot name must be done with  care,
       since  the  contents  of  some  snapshots,  such  as  internal  snapshots within a single qcow2 file, are
       accessible only from the original name.

   <b>snapshot-info</b>
       <b>Syntax:</b>

          snapshot-info domain {snapshot | --current}

       Output basic information about a named &lt;snapshot&gt;, or the current snapshot with <u>--current</u>.

   <b>snapshot-list</b>
       <b>Syntax:</b>

          snapshot-list domain [--metadata] [--no-metadata]
             [{--parent | --roots | [{--tree | --name}]}] [--topological]
             [{[--from] snapshot | --current} [--descendants]]
             [--leaves] [--no-leaves] [--inactive] [--active]
             [--disk-only] [--internal] [--external]

       List all of the available snapshots for the given domain, defaulting to show  columns  for  the  snapshot
       name, creation time, and domain state.

       Normally,  table  form  output  is  sorted by snapshot name; using <u>--topological</u> instead sorts so that no
       child is listed before its ancestors (although there may be more than one  possible  ordering  with  this
       property).

       If  <u>--parent</u>  is  specified,  add  a  column  to  the  output table giving the name of the parent of each
       snapshot.  If <u>--roots</u> is specified, the list will be filtered to just snapshots that have no parents.  If
       <u>--tree</u> is specified, the output will be in a tree format,  listing  just  snapshot  names.   These  three
       options are mutually exclusive.

       If  <u>--name</u>  is specified only the snapshot name is printed optionally followed by a tab-separated name of
       the parent snapshot if <u>--parent</u> is used as well. This option is mutually exclusive with <u>--tree</u>.

       If <u>--from</u> is provided, filter the list to snapshots which are children  of  the  given  <b>snapshot</b>;  or  if
       <u>--current</u>  is provided, start at the current snapshot.  When used in isolation or with <u>--parent</u>, the list
       is limited to direct children unless <u>--descendants</u> is also present.  When used with <u>--tree</u>,  the  use  of
       <u>--descendants</u>  is  implied.  This option is not compatible with <u>--roots</u>.  Note that the starting point of
       <u>--from</u> or <u>--current</u> is not included in the list unless the <u>--tree</u> option is also present.

       If <u>--leaves</u> is specified, the list will be filtered to just snapshots that have no  children.   Likewise,
       if  <u>--no-leaves</u>  is  specified,  the  list  will be filtered to just snapshots with children.  (Note that
       omitting both options does no filtering, while providing both options will either produce the  same  list
       or error out depending on whether the server recognizes the flags).  Filtering options are not compatible
       with <u>--tree</u>.

       If  <u>--metadata</u>  is  specified, the list will be filtered to just snapshots that involve libvirt metadata,
       and thus would prevent <b>undefine</b> of a persistent guest, or be lost  on  <b>destroy</b>  of  a  transient  domain.
       Likewise,  if  <u>--no-metadata</u> is specified, the list will be filtered to just snapshots that exist without
       the need for libvirt metadata.

       If <u>--inactive</u> is specified, the list will be filtered to snapshots that were taken when  the  domain  was
       shut  off.   If  <u>--active</u>  is  specified, the list will be filtered to snapshots that were taken when the
       domain was running, and where the snapshot includes the memory state to revert to that running state.  If
       <u>--disk-only</u> is specified, the list will be filtered to snapshots that were  taken  when  the  domain  was
       running, but where the snapshot includes only disk state.

       If  <u>--internal</u> is specified, the list will be filtered to snapshots that use internal storage of existing
       disk images.  If <u>--external</u> is specified, the list will be filtered to snapshots that use external  files
       for disk images or memory state.

   <b>snapshot-dumpxml</b>
       <b>Syntax:</b>

          snapshot-dumpxml [--security-info] [--xpath EXPRESSION] [--wrap]
                           domain snapshot

       Output  the  snapshot  XML  for  the  domain's  snapshot named <u>snapshot</u>.  Using <u>--security-info</u> will also
       include security sensitive information.  Use <b>snapshot-current</b> to easily access the  XML  of  the  current
       snapshot.

       If  the  <b>--xpath</b>  argument  provides an XPath expression, it will be evaluated against the output XML and
       only those matching nodes will be printed. The default behaviour is to print  each  matching  node  as  a
       standalone  document,  however,  for  ease  of  additional processing, the <b>--wrap</b> argument will cause the
       matching node to be wrapped in a common root node.

   <b>snapshot-parent</b>
       <b>Syntax:</b>

          snapshot-parent domain {snapshot | --current}

       Output the name of the parent snapshot, if any, for the given <u>snapshot</u>, or for the current snapshot  with
       <u>--current</u>.

   <b>snapshot-revert</b>
       <b>Syntax:</b>

          snapshot-revert domain {snapshot | --current} [{--running | --paused}]
             [--force] [--reset-nvram]

       Revert the given domain to the snapshot specified by <u>snapshot</u>, or to the current snapshot with <u>--current</u>.
       Be  aware  that this is a destructive action; any changes in the domain since the last snapshot was taken
       will be lost.  Also note that the state of the domain after snapshot-revert is complete will be the state
       of the domain at the time the original snapshot was taken.

       Normally, reverting to a snapshot leaves the domain in the state it was at  the  time  the  snapshot  was
       created,  except  that  a disk snapshot with no vm state leaves the domain in an inactive state.  Passing
       either the <u>--running</u> or <u>--paused</u> flag will perform additional state changes (such as booting an  inactive
       domain,  or pausing a running domain).  Since transient domains cannot be inactive, it is required to use
       one of these flags when reverting to a disk snapshot of a transient domain.

       Since libvirt 7.10.0 the VM process is always restarted so the following paragraph is no longer valid. If
       the snapshot metadata lacks the full VM XML it's no longer possible to revert to such snapshot.

       There are a number of cases where a snapshot revert involves  extra  risk,  which  requires  the  use  of
       <u>--force</u> to proceed:

          • One  is  the case of a snapshot that lacks full domain information for reverting configuration (such
            as snapshots created  prior  to  libvirt  0.9.5);  since  libvirt  cannot  prove  that  the  current
            configuration matches what was in use at the time of the snapshot, supplying <u>--force</u> assures libvirt
            that  the  snapshot  is compatible with the current configuration (and if it is not, the domain will
            likely fail to run).

          • Another is the case of reverting from a running domain to an active state where a new hypervisor has
            to be created rather than reusing the existing hypervisor, because  it  implies  drawbacks  such  as
            breaking  any existing VNC or Spice connections; this condition happens with an active snapshot that
            uses a provably incompatible configuration, as well as with an inactive snapshot  that  is  combined
            with the <u>--start</u> or <u>--pause</u> flag.

          • Also, libvirt will refuse to restore snapshots of inactive QEMU domains while there is managed saved
            state.  This  is  because those snapshots do not contain memory state and will therefore not replace
            the existing memory state. This ends up switching a disk underneath a running system and will likely
            cause extensive filesystem corruption or crashes due to swap content mismatches when run.

       If <u>--reset-nvram</u> is specified, any existing NVRAM file  will  be  deleted  and  re-initialized  from  its
       pristine template.

   <b>snapshot-delete</b>
       <b>Syntax:</b>

          snapshot-delete domain {snapshot | --current}
             [--metadata] [{--children | --children-only}]

       Delete  the  snapshot  for  the  domain  named <u>snapshot</u>, or the current snapshot with <u>--current</u>.  If this
       snapshot has child snapshots, changes from this snapshot will be merged into the children.  If <u>--children</u>
       is passed, then delete this snapshot and any children of this snapshot.  If  <u>--children-only</u>  is  passed,
       then  delete any children of this snapshot, but leave this snapshot intact.  These two flags are mutually
       exclusive.

       If <u>--metadata</u> is specified, then only delete the snapshot metadata maintained by libvirt,  while  leaving
       the snapshot contents intact for access by external tools; otherwise deleting a snapshot also removes the
       data contents from that point in time.

</pre><h4><b>CHECKPOINT</b> <b>COMMANDS</b></h4><pre>
       The  following  commands manipulate domain checkpoints.  Checkpoints serve as a point in time to identify
       which portions of a guest's disks have changed after that time, making it possible to perform incremental
       and differential backups.  Checkpoints are identified with a unique name.  See
        &lt;https://libvirt.org/formatcheckpoint.html&gt;  for documentation of  the  XML  format  used  to  represent
       properties of checkpoints.

   <b>checkpoint-create</b>
       <b>Syntax:</b>

          checkpoint-create domain [xmlfile] { --redefine [--redefine-validate] | [--quiesce]}

       Create   a  checkpoint  for  domain  <u>domain</u>  with  the  properties  specified  in  <u>xmlfile</u>  describing  a
       &lt;domaincheckpoint&gt; top-level element. The format of the input XML  file  will  be  validated  against  an
       internal RNG schema (identical to using the <a href="../man1/virt-xml-validate.1.html">virt-xml-validate</a>(1) tool). If <u>xmlfile</u> is completely omitted,
       then libvirt will create a checkpoint with a name based on the current time.

       If  <u>--redefine</u>  is specified, then all XML elements produced by <b>checkpoint-dumpxml</b> are valid; this can be
       used to migrate checkpoint hierarchy from one machine to another, to recreate hierarchy for the case of a
       transient domain that goes away and is later recreated with the same name and UUID,  or  to  make  slight
       alterations  in  the checkpoint metadata (such as host-specific aspects of the domain XML embedded in the
       checkpoint).  When this flag is supplied, the <u>xmlfile</u> argument is mandatory.

       If <u>--redefine-validate</u> is specified along with <u>--redefine</u> the hypervisor performs validation of  metadata
       associated  with  the  checkpoint stored in places besides the checkpoint XML. Note that some hypervisors
       may require that the domain is running to perform validation.

       If <u>--quiesce</u> is specified, libvirt will try to use guest agent to freeze and  unfreeze  domain's  mounted
       file systems. However, if domain has no guest agent, checkpoint creation will fail.

       Existence  of  checkpoint  metadata  will  prevent attempts to <b>undefine</b> a persistent guest.  However, for
       transient domains, checkpoint metadata is silently lost when the domain quits running (whether by command
       such as <b>destroy</b> or by internal guest action).

       For now, it is not possible to  create  checkpoints  in  a  domain  that  has  snapshots,  although  this
       restriction will be lifted in a future release.

   <b>checkpoint-create-as</b>
       <b>Syntax:</b>

          checkpoint-create-as domain [--print-xml] [name]
             [description] [--quiesce] [--diskspec] diskspec]...

       Create  a  checkpoint  for  domain  <u>domain</u>  with  the  given &lt;name&gt; and &lt;description&gt;; if either value is
       omitted,  libvirt  will  choose  a  value.   If  <u>--print-xml</u>  is  specified,  then  XML  appropriate  for
       <u>checkpoint-create</u> is output, rather than actually creating a checkpoint.

       The <u>--diskspec</u> option can be used to control which guest disks participate in the checkpoint. This option
       can  occur multiple times, according to the number of &lt;disk&gt; elements in the domain xml.  Each &lt;diskspec&gt;
       is in the form <b>disk[,checkpoint=type][,bitmap=name]</b>. A literal  <u>--diskspec</u>  must  precede  each  <b>diskspec</b>
       unless  all  three  of  <u>domain</u>,  <u>name</u>,  and  <u>description</u>  are  also  present.  For example, a diskspec of
       "vda,checkpoint=bitmap,bitmap=map1" results in the following XML:

          &lt;disk name='vda' checkpoint='bitmap' bitmap='map1'/&gt;

       If <u>--quiesce</u> is specified, libvirt will try to use guest agent to freeze and  unfreeze  domain's  mounted
       file systems. However, if domain has no guest agent, checkpoint creation will fail.

       For  now,  it  is  not  possible  to  create  checkpoints  in  a domain that has snapshots, although this
       restriction will be lifted in a future release.

   <b>checkpoint-edit</b>
       <b>Syntax:</b>

          checkpoint-edit domain checkpointname

       Edit the XML configuration file for <u>checkpointname</u> of a domain.

       This is equivalent to:

          virsh checkpoint-dumpxml dom name &gt; checkpoint.xml
          vi checkpoint.xml (or make changes with your other text editor)
          virsh checkpoint-create dom checkpoint.xml --redefine

       except that it does some error checking, including that the  edits  should  not  attempt  to  change  the
       checkpoint name.

       The editor used can be supplied by the <b>$VISUAL</b> or <b>$EDITOR</b> environment variables, and defaults to <b>vi</b>.

   <b>checkpoint-info</b>
       <b>Syntax:</b>

          checkpoint-info domain checkpoint

       Output basic information about a named &lt;checkpoint&gt;.

   <b>checkpoint-list</b>
       <b>Syntax:</b>

          checkpoint-list domain [{--parent | --roots |
             [{--tree | --name}]}] [--topological]
             [[--from] checkpoint | [--descendants]]
             [--leaves] [--no-leaves]

       List all of the available checkpoints for the given domain, defaulting to show columns for the checkpoint
       name and creation time.

       Normally,  table  form  output is sorted by checkpoint name; using <u>--topological</u> instead sorts so that no
       child is listed before its ancestors (although there may be more than one  possible  ordering  with  this
       property).

       If  <u>--parent</u>  is  specified,  add  a  column  to  the  output table giving the name of the parent of each
       checkpoint.  If <u>--roots</u> is specified, the list will be filtered to just checkpoints that have no parents.
       If <u>--tree</u> is specified, the output will be in a tree format, listing just checkpoint names.  These  three
       options are mutually exclusive.

       If <u>--name</u> is specified only the checkpoint name is printed optionally followed by a tab-separated name of
       the parent checkpoint if <u>--parent</u> is used as well. This option is mutually exclusive with <u>--tree</u>.

       If  <u>--from</u>  is provided, filter the list to checkpoints which are children of the given <b>checkpoint</b>.  When
       used in isolation or with <u>--parent</u>, the list is limited to direct children unless <u>--descendants</u>  is  also
       present.  When used with <u>--tree</u>, the use of <u>--descendants</u> is implied.  This option is not compatible with
       <u>--roots</u>.   Note that the starting point of <u>--from</u> is not included in the list unless the <u>--tree</u> option is
       also present.

       If <u>--leaves</u> is specified, the list will be filtered to just checkpoints that have no children.  Likewise,
       if <u>--no-leaves</u> is specified, the list will be filtered to just checkpoints  with  children.   (Note  that
       omitting  both  options does no filtering, while providing both options will either produce the same list
       or error out depending on whether the server recognizes the flags).  Filtering options are not compatible
       with <u>--tree</u>.

   <b>checkpoint-dumpxml</b>
       <b>Syntax:</b>

          checkpoint-dumpxml [--security-info] [--no-domain] [--size]
                             [--xpath EXPRESSION] [--wrap] domain checkpoint

       Output the checkpoint XML for the domain's checkpoint named <u>checkpoint</u>.  Using <u>--security-info</u> will  also
       include security sensitive information.

       Using  <u>--size</u>  will add XML indicating the current size in bytes of guest data that has changed since the
       checkpoint was created (although remember that guest activity between a size check and actually  creating
       a  backup  can  result in the backup needing slightly more space). Note that some hypervisors may require
       that <u>domain</u> is running when <u>--size</u> is used.

       Using <u>--no-domain</u> will omit the &lt;domain&gt; element from the output for a more compact view.

       If the <b>--xpath</b> argument provides an XPath expression, it will be evaluated against  the  output  XML  and
       only  those  matching  nodes  will  be printed. The default behaviour is to print each matching node as a
       standalone document, however, for ease of additional processing,  the  <b>--wrap</b>  argument  will  cause  the
       matching node to be wrapped in a common root node.

   <b>checkpoint-parent</b>
       <b>Syntax:</b>

          checkpoint-parent domain checkpoint

       Output the name of the parent checkpoint, if any, for the given <u>checkpoint</u>.

   <b>checkpoint-delete</b>
       <b>Syntax:</b>

          checkpoint-delete domain checkpoint
             [--metadata] [{--children | --children-only}]

       Delete  the checkpoint for the domain named <u>checkpoint</u>.  The record of which portions of the disk changed
       since the checkpoint are merged into the parent checkpoint (if any). If <u>--children</u> is passed, then delete
       this checkpoint and any children of this checkpoint.  If  <u>--children-only</u>  is  passed,  then  delete  any
       children of this checkpoint, but leave this checkpoint intact. These two flags are mutually exclusive.

       If <u>--metadata</u> is specified, then only delete the checkpoint metadata maintained by libvirt, while leaving
       the checkpoint contents intact for access by external tools; otherwise deleting a checkpoint also removes
       the ability to perform an incremental backup from that point in time.

</pre><h4><b>NWFILTER</b> <b>COMMANDS</b></h4><pre>
       The following commands manipulate network filters. Network filters allow filtering of the network traffic
       coming from and going to virtual machines.  Individual network traffic filters are written in XML and may
       contain  references  to other network filters, describe traffic filtering rules, or contain both. Network
       filters are referenced by virtual machines from within their interface description. A network filter  may
       be referenced by multiple virtual machines' interfaces.

   <b>nwfilter-define</b>
       <b>Syntax:</b>

          nwfilter-define xmlfile [--validate]

       Make  a  new  network  filter known to libvirt. If a network filter with the same name already exists, it
       will be replaced with the new XML.  Any running virtual machine referencing this network filter will have
       its network traffic rules adapted. If for any reason  the  network  traffic  filtering  rules  cannot  be
       instantiated by any of the running virtual machines, then the new XML will be rejected.

       Optionally,  the  format  of  the  input  XML  file  can be validated against an internal RNG schema with
       <u>--validate</u>.

   <b>nwfilter-undefine</b>
       <b>Syntax:</b>

          nwfilter-undefine nwfilter-name

       Delete a network filter. The deletion will fail if any running virtual machine is  currently  using  this
       network filter.

   <b>nwfilter-list</b>
       <b>Syntax:</b>

          nwfilter-list

       List all of the available network filters.

   <b>nwfilter-dumpxml</b>
       <b>Syntax:</b>

          nwfilter-dumpxml [--xpath EXPRESSION] [--wrap] nwfilter-name

       Output the network filter XML.

       If  the  <b>--xpath</b>  argument  provides an XPath expression, it will be evaluated against the output XML and
       only those matching nodes will be printed. The default behaviour is to print  each  matching  node  as  a
       standalone  document,  however,  for  ease  of  additional processing, the <b>--wrap</b> argument will cause the
       matching node to be wrapped in a common root node.

   <b>nwfilter-edit</b>
       <b>Syntax:</b>

          nwfilter-edit nwfilter-name

       Edit the XML of a network filter.

       This is equivalent to:

          virsh nwfilter-dumpxml myfilter &gt; myfilter.xml
          vi myfilter.xml (or make changes with your other text editor)
          virsh nwfilter-define myfilter.xml

       except that it does some error checking.  The new network filter may be rejected due to the  same  reason
       as mentioned in <u>nwfilter-define</u>.

       The editor used can be supplied by the <b>$VISUAL</b> or <b>$EDITOR</b> environment variables, and defaults to <b>vi</b>.

</pre><h4><b>NWFILTER</b> <b>BINDING</b> <b>COMMANDS</b></h4><pre>
       The  following commands manipulate network filter bindings. Network filter bindings track the association
       between a network port and a network filter. Generally the bindings  are  managed  automatically  by  the
       hypervisor drivers when adding/removing NICs on a guest.

       If  an  admin  is  creating/deleting TAP devices for non-guest usage, however, the network filter binding
       commands provide a way to make use of the network filters directly.

   <b>nwfilter-binding-create</b>
       <b>Syntax:</b>

          nwfilter-binding-create xmlfile [--validate]

       Associate a network port with a network filter. The network filter backend will  immediately  attempt  to
       instantiate the filter rules on the port. This command may be used to associate a filter with a currently
       running  guest  that  does  not have a filter defined for a specific network port. Since the bindings are
       generally automatically managed by the hypervisor, using this command to define a filter  for  a  network
       port and then starting the guest afterwards may prevent the guest from starting if it attempts to use the
       network port and finds a filter already defined.

       Optionally,  the  format  of  the  input  XML  file  can be validated against an internal RNG schema with
       <u>--validate</u>.

   <b>nwfilter-binding-delete</b>
       <b>Syntax:</b>

          nwfilter-binding-delete port-name

       Disassociate a network port from a network filter. The network filter backend will immediately tear  down
       the  filter rules that exist on the port. This command may be used to remove the network port binding for
       a filter currently in use for the guest while the guest is running without needing to restart the  guest.
       Restoring  the  network  port  binding  filter  for  the  running  guest  would  be accomplished by using
       <u>nwfilter-binding-create</u>.

   <b>nwfilter-binding-list</b>
       <b>Syntax:</b>

          nwfilter-binding-list

       List all of the network ports which have filters associated with them.

   <b>nwfilter-binding-dumpxml</b>
       <b>Syntax:</b>

          nwfilter-binding-dumpxml [--xpath EXPRESSION] [--wrap] port-name

       Output the network filter binding XML for the network device called <b>port-name</b>.

       If the <b>--xpath</b> argument provides an XPath expression, it will be evaluated against  the  output  XML  and
       only  those  matching  nodes  will  be printed. The default behaviour is to print each matching node as a
       standalone document, however, for ease of additional processing,  the  <b>--wrap</b>  argument  will  cause  the
       matching node to be wrapped in a common root node.

</pre><h4><b>HYPERVISOR-SPECIFIC</b> <b>COMMANDS</b></h4><pre>
       NOTE:  Use  of the following commands is <b>strongly</b> discouraged.  They can cause libvirt to become confused
       and do the wrong thing on subsequent operations.  Once you have used these commands, please do not report
       problems to the libvirt developers; the reports will be ignored.  If you find that these commands are the
       only way to accomplish something, then it is better to request that the feature be added as a first-class
       citizen in the regular libvirt library.

   <b>qemu-attach</b>
       <b>Syntax:</b>

          qemu-attach pid

       Attach an externally launched QEMU process to the libvirt QEMU driver.  The QEMU process must  have  been
       created  with  a  monitor  connection  using  the UNIX driver. Ideally the process will also have had the
       '-name' argument specified.

          $ qemu-kvm -cdrom <a href="file:~/demo.iso">~/demo.iso</a> \
              -monitor unix:/tmp/demo,server,nowait \
              -name foo \
              -uuid cece4f9f-dff0-575d-0e8e-01fe380f12ea  &amp;
          $ QEMUPID=$!
          $ virsh qemu-attach $QEMUPID

       Not all functions of libvirt are expected to work reliably after attaching to an externally launched QEMU
       process. There may be issues with the guest ABI changing upon migration and device hotplug  or  hotunplug
       may not work. The attached environment should be considered primarily read-only.

   <b>qemu-monitor-command</b>
       <b>Syntax:</b>

          qemu-monitor-command domain { [--hmp] | [--pretty] [--return-value] }
              [--pass-fds N,M,...] command...

       Send  an arbitrary monitor command <u>command</u> to domain <u>domain</u> through the QEMU monitor.  The results of the
       command will be printed on stdout.

       If more than one argument is provided for <u>command</u>, they are concatenated with a space in  between  before
       passing the single command to the monitor.

       Note  that  libvirt  uses  the  QMP  to  talk to qemu so <u>command</u> must be valid JSON in QMP format to work
       properly. If <u>command</u> is not a JSON object libvirt tries to wrap it as a JSON object to provide convenient
       interface such as the groups of commands with identical handling:

          # simple command
          $ virsh qemu-monitor-command VM commandname
          $ virsh qemu-monitor-command VM '{"execute":"commandname"}'

          # with arguments
          $ virsh qemu-monitor-command VM commandname '"arg1":123' '"arg2":"test"'
          $ virsh qemu-monitor-command VM commandname '{"arg1":123,"arg2":"test"}'
          $ virsh qemu-monitor-command VM '{"execute":"commandname", "arguments":{"arg1":123,"arg2":"test"}}'

       If <u>--pretty</u> is given the QMP reply is pretty-printed.

       If <u>--return-value</u> is given the 'return' key of the QMP response object is extracted rather  than  passing
       through the full reply from QEMU.

       If  <u>--hmp</u>  is  passed,  the  command  is  considered  to  be  a  human  monitor  command and libvirt will
       automatically convert it into QMP and convert the result back.

       If <u>--pass-fds</u> is specified, the argument is a comma separated list of open file descriptors which  should
       be passed on to qemu along with the command.

   <b>qemu-agent-command</b>
       <b>Syntax:</b>

          qemu-agent-command domain [--timeout seconds | --async | --block] command...

       Send  an  arbitrary  guest agent command <u>command</u> to domain <u>domain</u> through QEMU agent.  <u>--timeout</u>, <u>--async</u>
       and <u>--block</u> options are exclusive.  <u>--timeout</u> requires timeout seconds <u>seconds</u> and it must  be  positive.
       When  <u>--aysnc</u>  is  given,  the  command  waits for timeout whether success or failed. And when <u>--block</u> is
       given, the command waits forever with blocking timeout.

   <b>qemu-monitor-event</b>
       <b>Syntax:</b>

          qemu-monitor-event [domain] [--event event-name]
            [--loop] [--timeout seconds] [--pretty] [--regex] [--no-case]
            [--timestamp]

       Wait for arbitrary QEMU monitor events to occur, and print out the details of events as they happen.  The
       events can optionally be filtered by <u>domain</u> or <u>event-name</u>.  The 'query-events' QMP command  can  be  used
       via  <u>qemu-monitor-command</u>  to learn what events are supported.  If <u>--regex</u> is used, <u>event-name</u> is a basic
       regular  expression  instead  of  a  literal  string.   If  <u>--no-case</u>  is  used,  <u>event-name</u>  will  match
       case-insensitively.

       By  default,  this  command  is  one-shot,  and returns success once an event occurs; you can send SIGINT
       (usually via <b>Ctrl-C</b>) to quit immediately.  If <u>--timeout</u> is specified, the command gives  up  waiting  for
       events  after  <u>seconds</u>  have  elapsed.   With  <u>--loop</u>,  the  command prints all events until a timeout or
       interrupt key.  If  <u>--pretty</u>  is  specified,  any  JSON  event  details  are  pretty-printed  for  better
       legibility.

       When  <u>--timestamp</u>  is  used,  a human-readable timestamp will be printed before the event, and the timing
       information provided by QEMU will be omitted.

   <b>lxc-enter-namespace</b>
       <b>Syntax:</b>

          lxc-enter-namespace domain [--noseclabel] --
             /path/to/binary [arg1, [arg2, ...]]

       Enter the namespace of <u>domain</u> and execute the command <b>/path/to/binary</b> passing  the  requested  args.  The
       binary  path  is relative to the container root filesystem, not the host root filesystem. The binary will
       inherit the environment variables / console visible to virsh. The command will be run with the same sVirt
       context and cgroups placement as processes within the container. This command only works  when  connected
       to the LXC hypervisor driver.  This command succeeds only if <b>/path/to/binary</b> has 0 exit status.

       By  default  the  new  process  will  run  with  the  security label of the new parent container. Use the
       <u>--noseclabel</u> option to instead have the process keep the same security label as <b>virsh</b>.

</pre><h4><b>ENVIRONMENT</b></h4><pre>
       The following environment variables can be set to alter the behaviour of <b>virsh</b>

       • VIRSH_DEBUG=&lt;0 to 4&gt;

         Turn on verbose debugging of virsh commands. Valid levels are

         • VIRSH_DEBUG=0

           DEBUG - Messages at ALL levels get logged

         • VIRSH_DEBUG=1

           INFO - Logs messages at levels INFO, NOTICE, WARNING and ERROR

         • VIRSH_DEBUG=2

           NOTICE - Logs messages at levels NOTICE, WARNING and ERROR

         • VIRSH_DEBUG=3

           WARNING - Logs messages at levels WARNING and ERROR

         • VIRSH_DEBUG=4

           ERROR - Messages at only ERROR level gets logged.

       • VIRSH_LOG_FILE=``LOGFILE``

         The file to log virsh debug messages.

       • VIRSH_DEFAULT_CONNECT_URI

         The hypervisor to connect to by default. Set this to a URI, in the  same  format  as  accepted  by  the
         <b>connect</b>  option.  This  environment  variable is deprecated in favour of the global <b>LIBVIRT_DEFAULT_URI</b>
         variable which serves the same purpose.

       • LIBVIRT_DEFAULT_URI

         The hypervisor to connect to by default. Set this to a URI, in the  same  format  as  accepted  by  the
         <b>connect</b>  option. This overrides the default URI set in any client config file and prevents libvirt from
         probing for drivers.

       • VISUAL

         The editor to use by the <b>edit</b> and related options.

       • EDITOR

         The editor to use by the <b>edit</b> and related options, if <b>VISUAL</b> is not set.

       • VIRSH_HISTSIZE

         The number of commands to remember in the command  history.  The default value is 500.

       • LIBVIRT_DEBUG=LEVEL

         Turn on verbose debugging of all libvirt API calls. Valid levels are

         • LIBVIRT_DEBUG=1

           Messages at level DEBUG or above

         • LIBVIRT_DEBUG=2

           Messages at level INFO or above

         • LIBVIRT_DEBUG=3

           Messages at level WARNING or above

         • LIBVIRT_DEBUG=4

           Messages at level ERROR

       For further information about debugging options consult
        &lt;https://libvirt.org/logging.html&gt;

</pre><h4><b>BUGS</b></h4><pre>
       Please report all bugs you discover.  This should be done via either:

       1. the mailing list

           &lt;https://libvirt.org/contact.html&gt;

       2. the bug tracker

           &lt;https://libvirt.org/bugs.html&gt;

       Alternatively, you may report bugs to your software distributor / vendor.

</pre><h4><b>AUTHORS</b></h4><pre>
       Please refer to the AUTHORS file distributed with libvirt.

</pre><h4><b>COPYRIGHT</b></h4><pre>
       Copyright (C) 2005, 2007-2015 Red Hat, Inc., and the authors listed in the libvirt AUTHORS file.

</pre><h4><b>LICENSE</b></h4><pre>
       <b>virsh</b> is distributed under the terms of the GNU LGPL v2+.  This is free  software;  see  the  source  for
       copying  conditions.  There  is  NO  warranty;  not  even for MERCHANTABILITY or FITNESS FOR A PARTICULAR
       PURPOSE

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <a href="../man1/virt-install.1.html">virt-install</a>(1), <a href="../man1/virt-xml-validate.1.html">virt-xml-validate</a>(1), <a href="../man1/virt-top.1.html">virt-top</a>(1), <a href="../man1/virt-df.1.html">virt-df</a>(1),
        &lt;https://libvirt.org/&gt;

                                                                                                        <u><a href="../man1/VIRSH.1.html">VIRSH</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>