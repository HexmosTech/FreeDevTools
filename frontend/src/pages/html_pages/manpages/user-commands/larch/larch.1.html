<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>larch - copy messages from one IMAP server to another</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/larch">larch_1.1.2-2.1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       larch - copy messages from one IMAP server to another

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>larch</b> [<u>options</u>]

       <b>larch</b> [<b>--from</b> <u>URI</u>] [<b>--to</b> <u>URI</u>]

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>Larch</b>  is  a tool to copy messages from one IMAP server to another quickly and safely.  It's smart enough
       not to copy messages that already exist on the destination and robust enough to deal  with  interruptions
       caused by flaky connections or misbehaving servers.

       <b>Larch</b> is particularly well-suited for copying email to, from, or between Gmail accounts.

</pre><h4><b>OPTIONS</b></h4><pre>
   <b>Server</b> <b>options</b>
       <b>--from</b>, <b>-f</b> <u>URI</u>
              URI of the source IMAP server.

       <b>--from-folder</b>, <b>-F</b> <u>FOLDER</u>
              Source folder to copy from. Default is INBOX.

       <b>--from-pass</b>, <b>-p</b> <u>PASSWD</u>
              Source server password. Default is to prompt the user.

       <b>--from-user</b>, <b>-u</b> <u>USER</u>
              Source server username. Default is to prompt the user.

       <b>--to</b>, <b>-t</b> <u>URI</u>
              URI of the destination IMAP server.

       <b>--to-folder</b>, <b>-T</b> <u>FOLDER</u>
              Destination folder to copy to. Default is INBOX.

       <b>--to-pass</b>, <b>-P</b> <u>PASSWD</u>
              Destination server password. Default is to prompt the user.

       <b>--to-user</b>, <b>-U</b> <u>USER</u>
              Destination server username. Default is to prompt the user.

   <b>Copy</b> <b>options</b>
       <b>--all</b>, <b>-a</b>
              Copy all folders recursively.

       <b>--all-subscribed</b>, <b>-s</b>
              Copy all subscribed folders recursively.

       <b>--delete</b>, <b>-d</b>
              Delete messages from the source after copying them, or if they already exist at the destination.

       <b>--exclude</b> <u>PATTERN</u> [ <u>PATTERN</u>... ]
              List of mailbox names/patterns that shouldn't be copied.

       <b>--exclude-file</b> <u>FILE</u>
              Filename containing mailbox names/patterns that shouldn't be copied.

       <b>--expunge</b>, <b>-x</b>
              Expunge deleted messages from the source.

       <b>--sync-flags</b>, <b>-S</b>
              Sync  message  flags  from  the  source  to the destination for messages that already exist at the
              destination.

   <b>General</b> <b>options</b>
       <b>--config</b>, <b>-c</b> <u>FILE</u>
              Specify a non-default config file to use. Default is <a href="file:~/.larch/config.yaml.">~/.larch/config.yaml.</a>

       <b>--database</b> <u>FILE</u>
              Specify a non-default message database to use. Default is <a href="file:~/.larch/larch.db.">~/.larch/larch.db.</a>

       <b>--dry-run</b>, <b>-n</b>
              Don't actually make any changes.

       <b>--max-retries</b> <u>NUM</u>
              Maximum number of times to retry after a recoverable error. Default is 3.

       <b>--no-create-folder</b>
              Don't create destination folders that don't already exist.

       <b>--ssl-certs</b> <u>FILE</u>
              Path to a trusted certificate bundle to use to verify server SSL certificates.

       <b>--ssl-verify</b>
              Verify server SSL certificates.

       <b>--verbosity</b>, <b>-V</b> <u>STR</u>
              Output verbosity: debug, info, warn, error, or fatal. Default is info.

       <b>--version</b>, <b>-v</b>
              Print version and exit.

       <b>--help</b>, <b>-h</b>
              Show a help message.

</pre><h4><b>CONFIGURATION</b></h4><pre>
       While it's possible to control <b>Larch</b> entirely from the command line, this can be inconvenient if you need
       to specify a lot of options or if you run <b>Larch</b> frequently and can't always  remember  which  options  to
       use.  Using a configuration file can simplify things.

       By default, <b>Larch</b> looks for a config file at <b><a href="file:~/.larch/config.yaml">~/.larch/config.yaml</a></b> and uses it if found. You may specify a
       custom config file using the <b>--config</b> command line option.

       The <b>Larch</b> configuration file is a simple YAML ⟨<a href="http://yaml.org/">http://yaml.org/</a>⟩ file that may contain multiple sections,
       each  with  a different set of options, as well as a special <u>default</u> section.  The options in the <u>default</u>
       section will be used unless they're overridden either in another config section or on the command line.

       Here's a sample Larch config file:

              # Copy all subscribed folders by default
              default:
                all-subscribed: true

              # Copy mail from Gmail to my server, excluding stuff I don't want.
              gmail to my server:
                from: imaps://imap.gmail.com
                from-user: example
                from-pass: secret

                to: imaps://mail.example.com
                to-user: example
                to-pass: secret

                exclude:
                  - "[Gmail]/Sent Mail"
                  - "[Gmail]/Spam"
                  - "[Gmail]/Trash"

              # Copy mail from my INBOX to Gmail's INBOX
              my inbox to gmail inbox:
                all-subscribed: false

                from: imaps://mail.example.com
                from-folder: INBOX
                from-user: example
                from-pass: secret

                to: imaps://imap.gmail.com
                to-folder: INBOX
                to-user: example
                to-pass: secret

       This file contains three sections.  The options from <u>default</u> will be used in all other sections  as  well
       unless they're overridden.

       To specify which config section you want Larch to use, just pass its name on the command line (use quotes
       if the name contains spaces):

              larch 'gmail to my server'

       If you specify additional command line options, they'll override options in the config file:

              larch 'gmail to my server' --from-user anotheruser

       Running Larch with no command line arguments will cause the <u>default</u> section to be used.  With the example
       above,  this  will  result in an error since the <u>default</u> section doesn't contain the required <u>from</u> and <u>to</u>
       options, but if you only need to use Larch with a single configuration, you could use the <u>default</u> section
       for everything and save yourself some typing on the command line.

</pre><h4><b>FILES</b></h4><pre>
       <u><a href="file:~/.larch/config.yaml">~/.larch/config.yaml</a></u>

</pre><h4><b>NOTES</b></h4><pre>
   <b>Server</b> <b>compatibility</b>
       Larch should work well with any server that properly supports IMAP4rev1 ⟨<a href="http://tools.ietf.org/html/">http://tools.ietf.org/html/</a>
       rfc3501⟩ , and does its best to get along with servers that have buggy, unreliable,  or  incomplete  IMAP
       implementations.

       Larch has been tested on and is known to work well with the following IMAP servers:

       •      <b>Dovecot</b>

       •      <b>Gmail</b>

       •      <b>Microsoft</b> <b>Exchange</b> <b>2003</b>

       The following servers are known to work, but with caveats:

       •      <b>Yahoo!</b> <b>Mail</b>

       The following servers do not work well with Larch:

       •      <b>BlitzMail</b>  Buggy  server  implementation;  fails  to properly quote or escape some IMAP responses,
              which can cause Net::IMAP to hang waiting for a terminating character that will never arrive.

   <b>Gmail</b> <b>quirks</b>
       Gmail's IMAP implementation is quirky.  Larch  does  its  best  to  work  around  these  quirks  whenever
       possible, but here are a few things to watch out for:

       <b>Some</b> <b>messages</b> <b>could</b> <b>not</b> <b>be</b> <b>FETCHed</b> error

       This  error  indicates  that  a  message on Gmail is corrupt, and Gmail itself is unable to read it.  The
       message will continue to show up in the mailbox, but all attempts to access it  via  IMAP,  POP,  or  the
       Gmail web interface will result in errors.  Larch will try to skip these messages and continue processing
       others if possible.

       It's  not  clear  how  this  corruption  occurs  or  exactly what kind of corruption causes these errors,
       although in every case I'm aware of, the corrupt message has originated outside of  Gmail  (Gmail  itself
       does not corrupt the message).  There is currently no known solution for this problem apart from deleting
       the corrupted messages.

       <b>Folder</b> <b>names</b> <b>cannot</b> <b>contain</b> <b>leading</b> <b>or</b> <b>trailing</b> <b>whitespace</b>

       Most  IMAP  servers  allow folder names to contain leading and trailing whitespace, such as "  folder  ".
       Gmail does not. When copying folders to Gmail, Larch  will  automatically  remove  leading  and  trailing
       whitespace in folder names to prevent errors.

   <b>Yahoo!</b> <b>mail</b> <b>quirks</b>
       Yahoo!  doesn't  officially  support  IMAP  access  for  general  usage,  but Larch is able to connect to
       imap.mail.yahoo.com and imap-ssl.mail.yahoo.com by using a fairly well-known trick.  That said,  as  with
       anything tricky, there are caveats.

       <b>No</b> <b>hierarchical</b> <b>folders</b>

       Similar  to  Gmail, Yahoo! Mail doesn't allow hierarchical (nested) folders.  If you try to copy a folder
       hierarchy to Yahoo!, it will work,  but  you'll  end  up  with  a  set  of  folders  named  "folder"  and
       "folder.subfolder" rather than seeing "subfolder" as an actual subfolder of "folder".

       <b>No</b> <b>custom</b> <b>flags</b>

       Yahoo!  Mail  IMAP doesn't support custom message flags, such as the tags and junk/not junk flags used by
       Thunderbird.  When transferring messages with custom flags to a Yahoo!  Mail  IMAP  account,  the  custom
       flags will be lost.

       <b>Here</b> <b>there</b> <b>be</b> <b>dragons</b>

       Larch's support for Yahoo! Mail is very new and very lightly tested.  Given its newness and the fact that
       Yahoo!'s  IMAP  gateway  isn't  official,  there  are  likely  to be other quirks we're not yet aware of.
       There's also no guarantee that Yahoo!  won't shut down its IMAP gateway, deprecate the trick  Larch  uses
       to connect, or just outright block Larch.  Use at your own risk.

</pre><h4><b>BUGS</b></h4><pre>
       Larch  uses  Ruby's  Net::IMAP  standard library for all IMAP operations.  While Net::IMAP is generally a
       very solid library, it contains a bug  that  can  cause  a  deadlock  to  occur  if  a  connection  drops
       unexpectedly  (either  due to network issues or because the server closed the connection without warning)
       when the server has already begun sending a response and Net::IMAP is waiting to receive more  data.   If
       this happens, Net::IMAP will continue waiting forever without passing control back to Larch, and you will
       need to manually kill and restart Larch.

       Net::IMAP  in  Ruby 1.8 has also been known to hang when it can't parse a server response, either because
       the response itself is malformed or because of a bug  in  Net::IMAP's  parser.   This  is  rare,  but  it
       happens.  Unfortunately there's nothing Larch can do about this.

</pre><h4><b>EXAMPLE</b></h4><pre>
       <b>Larch</b>  is  run  from  the  command  line.  The following examples demonstrate how to run <b>Larch</b> using only
       command line arguments, but you may also place these options in a config file and run <b>Larch</b>  without  any
       arguments if you prefer.

       At a minimum, you must <u>specify</u> <u>a</u> <u>source</u> <u>server</u> <u>and</u> <u>a</u> <u>destination</u> <u>server</u> in the form of IMAP URIs:

              larch --from imap://mail.example.com \
                    --to imap://imap.gmail.com

       <b>Larch</b>  will  prompt you for the necessary usernames and passwords, then sync the contents of the source's
       INBOX folder to the destination's INBOX folder.

       To <u>connect</u> <u>using</u> <u>SSL</u>, specify a URI beginning with <b>imaps://</b>:

              larch --from imaps://mail.example.com \
                    --to imaps://imap.gmail.com

       If you'd like to <u>sync</u> <u>a</u> <u>specific</u> <u>folder</u> other than INBOX, specify  the  source  and  destination  folders
       using <b>--from-folder</b> and <b>--to-folder</b>.  Folder names containing spaces must be enclosed in quotes:

              larch --from imaps://mail.example.com \
                    --to imaps://imap.gmail.com \
                    --from-folder 'Sent Mail' --to-folder 'Sent Mail'

       To  <u>sync</u>  <u>all</u>  <u>folders</u>,  use  the  <b>--all</b>  option (or <b>--all-subscribed</b> if you only want to <u>sync</u> <u>subscribed</u>
       <u>folders</u>):

              larch --from imaps://mail.example.com \
                    --to imaps://imap.gmail.com --all

       By default <b>Larch</b> will create folders on the destination server if they don't already  exist.  To  prevent
       this, add the <b>--no-create-folder</b> option:

              larch --from imaps://mail.example.com \
                    --to imaps://imap.gmail.com --all \
                    --no-create-folder

       You  can  <u>prevent</u>  <u>Larch</u>  <u>from</u>  <u>syncing</u>  <u>one</u> <u>or</u> <u>more</u> <u>folders</u> by using the <b>--exclude</b> option, which accepts
       multiple arguments:

              larch --from imaps://mail.example.com \
                    --to imaps://imap.gmail.com --all \
                    --exclude Spam Trash Drafts "[Gmail]/*"

       If your exclusion list is long or complex, create a text file with one exclusion  pattern  per  line  and
       tell <b>Larch</b> to load it with the <b>--exclude-file</b> option:

              larch --from imaps://mail.example.com \
                    --to imaps://imap.gmail.com --all \
                    --exclude-file exclude.txt

       The  wildcard  characters <b>*</b> and <b>?</b> are supported in exclusion lists. You may also use a regular expression
       by enclosing a pattern in forward slashes, so the previous example could be  achieved  with  the  pattern
       <b>/(Spam|Trash|Drafts|\[Gmail]\<a href="file:/.">/.</a>*)/</b>

</pre><h4><b>AUTHORS</b></h4><pre>
       Adapted from the program's documentation for Debian by Martín Ferrari &lt;<a href="mailto:tincho@tincho.org">tincho@tincho.org</a>&gt;.

                                                                                                        <u><a href="../man1/LARCH.1.html">LARCH</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>