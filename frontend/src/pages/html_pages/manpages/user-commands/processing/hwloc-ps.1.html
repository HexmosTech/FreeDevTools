<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>hwloc-ps - List currently-running processes or threads that are bound</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/hwloc-nox">hwloc-nox_2.12.0-1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       hwloc-ps - List currently-running processes or threads that are bound

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>hwloc-ps</b> [<u>options</u>]

</pre><h4><b>OPTIONS</b></h4><pre>
       <b>-a</b>        List all processes, even those that are not bound to any specific part of the machine.

       <b>--pid</b> <b>&lt;pid&gt;</b>
                 Only show process of PID <u>&lt;pid&gt;</u>, even if it is not bound to any specific part of the machine.

       <b>--children-of-pid</b> <b>&lt;pid&gt;</b>
                 Only show process of PID <u>&lt;pid&gt;</u> and its hierarchy of children, even if they are not bound to any
                 specific part of the machine.

       <b>--name</b> <b>&lt;name&gt;</b>
                 Only show processes whose name contains <u>&lt;name&gt;</u>, even if they are not bound to any specific part
                 of the machine.  This is not supported on all operating systems.

       <b>--uid</b> <b>&lt;uid&gt;</b>
                 Only  show processes of the user whose UID is <u>&lt;uid&gt;</u>, or processes of all users if <u>all</u> is given.
                 By default, only processes of the current user are displayed.  This is currently only supported
                 on Linux.

       <b>-p</b> <b>--physical</b>
                 Report OS/physical indexes instead of logical indexes

       <b>-l</b> <b>--logical</b>
                 Report logical indexes instead of physical/OS indexes (default)

       <b>-c</b> <b>--cpuset</b>
                 Show process bindings as cpusets instead of objects.

       <b>-t</b> <b>--threads</b>
                 Show threads inside processes.  If <b>-a</b> is given as well, list all threads within  each  process.
                 Otherwise,  show  all  threads inside each process where at least one thread is bound.  This is
                 currently only supported on Linux.

       <b>--single-ancestor</b>
                 When the object is bound to different objects, report their common ancestor (even if it may  be
                 larger than the actual binding).

       <b>-e</b> <b>--get-last-cpu-location</b>
                 Report   the last processors where the process/thread ran.  Note that the result may already be
                 outdated when reported since the operating system may move the tasks to other processors at any
                 time according to the binding.

       <b>--disallowed</b>
                 Include objects disallowed by administrative limitations.

       <b>--pid-cmd</b> <b>&lt;cmd&gt;</b>
                 Append the output of the given command to each  PID  line.   For  each  displayed  process  ID,
                 execute the command <u>&lt;cmd&gt;</u> <u>&lt;pid&gt;</u> and append <b>the</b> <b>first</b> <b>line</b> of its output to the regular hwloc-ps
                 line.

       <b>--pid-cmd</b> <b>env=&lt;name&gt;</b>
                 On  Linux, try to read the value of environment variable <u>name</u> in each process and display it at
                 the end of the line.

       <b>--pid-cmd</b> <b>mpirank</b>
                 On Linux, try to find the process MPI rank (by querying some widespread environment  variables)
                 and display it at the end of the line.

       <b>--lstopo-misc</b> &lt;file&gt;
                 Output  a file that may be given to <b>lstopo</b> <b>--misc-from</b> for displaying processes/threads as Misc
                 objects. See EXAMPLES below.

       <b>--json-server</b>
                 Run the tool as a JSON server that waits for other process' requests on a port and  sends  back
                 binding information.  See contrib/hwloc-ps.www/ for details.

       <b>--json-port</b> <b>&lt;port&gt;</b>
                 Use the given port number instead of the default 8888.

       <b>-v</b> <b>--verbose</b>
                 Increase verbosity of the JSON server.

       <b>--short-name</b>
                 Show only the process short name instead of the path.

       <b>--version</b> Report version and exit.

       <b>-h</b> <b>--help</b> Display help message and exit.

</pre><h4><b>DESCRIPTION</b></h4><pre>
       By  default,  hwloc-ps  lists  only  those  currently-running  processes  that are bound. If <b>-t</b> is given,
       processes that are not bound but contain at least one bound thread are also displayed,  as  well  as  all
       their threads.

       hwloc-ps  displays  process identifier, command-line and binding.  The binding may be reported as objects
       or cpusets.

       By default, process bindings are restricted to the currently available topology. If  some  processes  are
       bound  to  processors that are not available to the current process, they are ignored unless <b>--disallowed</b>
       is given.

       The output is a plain list. If you wish to annotate the hierarchical topology with processes so as to see
       how they are actual distributed on the machine, you might want to use lstopo  --ps  instead  (which  also
       only shows processes that are bound).

       The <u>-a</u> switch can be used to show <u>all</u> processes, if desired.

</pre><h4><b>EXAMPLES</b></h4><pre>
       If a process is bound, it appears in the default output:

           $ hwloc-ps
           4759 Core:0         myprogram

       If  a  process  is  bound  on  two  cores  of a larger package, the output will show these cores.  Option
       --single-ancestor will rather return the package even if it is actually larger than the binding here (the
       process is not bound to Core:0 of Package:0):

           $ hwloc-ps
           4863        Core:1 Core:2   myprogram
           $ hwloc-ps --single-ancestor
           4863        Package:0       myprogram

       If a process is not bound but 3 of his 4 threads are bound, it only appears in  the  thread-aware  output
       (or if explicitly selected):

           $ hwloc-ps

           $ hwloc-ps -t
           4759 Machine:0      myprogram
            4759 Machine:0
            4761 PU:0
            4762 PU:2
            4765 PU:1

           $ hwloc-ps --pid 4759
           4759 Machine:0      myprogram

</pre><h4><b>Example</b> <b>with</b> <b>lstopo</b> <b>integration</b></h4><pre>
       The  output  may  be  a  file  that  lstopo uses for adding Misc objects (more flexible version of lstopo
       --top):

           $ hwloc-ps --misc-from foo
           $ cat foo
           name=12444 myprogram
           cpuset=0x000000f0
           subtype=Process

           name=12444 mythread1
           cpuset=0x00000050
           subtype=Thread

           name=12444 mythread2
           cpuset=0x000000a0
           subtype=Thread

       This may be directly given to lstopo:

           $ hwloc-ps --misc-from - | lstopo --misc-from -

</pre><h4><b>Examples</b> <b>with</b> <b>MPI</b> <b>processes</b></h4><pre>
       On Linux, hwloc-ps may also display some process specific environment variable at the end  of  the  line.
       This is for instance useful for identify MPI ranks among processes:

           $ hwloc-ps --pid-cmd env=OMPI_COMM_WORLD_RANK
           29093     PU:0 myprogram OMPI_COMM_WORLD_RANK=0
           29094     PU:2 myprogram OMPI_COMM_WORLD_RANK=1
           29095     PU:1 myprogram OMPI_COMM_WORLD_RANK=2
           29096     PU:3 myprogram OMPI_COMM_WORLD_RANK=3

       Some  widespread  MPI  specific  environment  variables  (OMPI_COMM_WORLD_RANK,  PMIX_RANK,  PMI_RANK and
       SLURM_PROCID) are actually directly recognized by hwloc-ps when requesting the <u>mpirank</u> command:

           $ hwloc-ps --pid-cmd mpirank
           29093     PU:0 myprogram PMIX_RANK=0
           29094     PU:2 myprogram PMIX_RANK=1
           29095     PU:1 myprogram PMIX_RANK=2
           29096     PU:3 myprogram PMIX_RANK=3

       Beside reading environment variables, hwloc-ps may also append the output of a custom program. Again, for
       reading the Open MPI process rank:

           $ hwloc-ps --pid-cmd myscript
           29093     PU:0 myprogram OMPI_COMM_WORLD_RANK=0
           29094     PU:2 myprogram OMPI_COMM_WORLD_RANK=1
           29095     PU:1 myprogram OMPI_COMM_WORLD_RANK=2
           29096     PU:3 myprogram OMPI_COMM_WORLD_RANK=3

       where <b>myscript</b> is a shell script doing:

           #!<a href="file:/bin/sh">/bin/sh</a>
           cat <a href="file:/proc/">/proc/</a>$1/environ 2&gt;/dev/null | xargs --null --max-args=1 echo | grep OMPI_COMM_WORLD_RANK

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <a href="../man7/hwloc.7.html">hwloc</a>(7), <a href="../man1/lstopo.1.html">lstopo</a>(1), <a href="../man1/hwloc-calc.1.html">hwloc-calc</a>(1), <a href="../man1/hwloc-distrib.1.html">hwloc-distrib</a>(1), and hwloc-ps.www/README

2.12.0                                            Feb 17, 2025                                       <u><a href="../man1/HWLOC-PS.1.html">HWLOC-PS</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>