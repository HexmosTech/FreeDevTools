<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>nbdkit-release-notes-1.40 - release notes for nbdkit 1.40</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/nbdkit">nbdkit_1.42.2-1ubuntu1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       nbdkit-release-notes-1.40 - release notes for nbdkit 1.40

</pre><h4><b>DESCRIPTION</b></h4><pre>
       These are the release notes for nbdkit stable release 1.40.  This describes the major changes since 1.38.

       nbdkit 1.40.0 was released on <b>22</b> <b>July</b> <b>2024</b>.

   <b>Security</b>
       The server is now more careful about quoting user-provided filenames before printing them in error
       messages (thanks Mykola Ivanets).

       Short plugin and filter names ("file" is the short name of <b><a href="../man1/nbdkit-file-plugin.1.html">nbdkit-file-plugin</a></b>(1)) are now more
       restrictive.  This change should not be visible to users, but tightens up corner cases with possible
       security implications.  See:
       https://gitlab.com/nbdkit/nbdkit/-/commit/f4d5e7d39e3d37a498821a87234127d561caa0f5

       Previous documentation in <b><a href="../man1/nbdkit-tls.1.html">nbdkit-tls</a></b>(1) incorrectly asserted that when using X.509 certificates, nbdkit
       checks the client's CN.  This is not true.  nbdkit only checks that the client presents a certificate
       issued by the Certificate Authority specified by the <u>--tls-certificates</u> directory.  The documentation has
       been corrected.  (Thanks Jon Szymaniak, Daniel P. Berrangé).

       <b><a href="../man1/nbdkit-ip-filter.1.html">nbdkit-ip-filter</a></b>(1) incorrectly parsed "security:" rules, which might subtly change the semantics of
       access lists.  This has been fixed in this release.

       <b><a href="../man1/nbdkit-ip-filter.1.html">nbdkit-ip-filter</a></b>(1) previously allowed unknown [not IPv4/v6, Unix or vsock] socket families implicitly,
       so having a "deny=all" rule would not necessarily deny every connection.  This has been changed in this
       release so all unknown socket families are denied.

       All past security issues and information about how to report new ones can be found in <b><a href="../man1/nbdkit-security.1.html">nbdkit-security</a></b>(1).

   <b>Plugins</b>
       <b><a href="../man1/nbdkit-file-plugin.1.html">nbdkit-file-plugin</a></b>(1) now exposes minimum and preferred I/O size and the rotational property of block
       devices.

       <b><a href="../man1/nbdkit-curl-plugin.1.html">nbdkit-curl-plugin</a></b>(1) prints the version of libcurl and other useful information in <u>--dump-plugin</u> output.

       <b><a href="../man1/nbdkit-vddk-plugin.1.html">nbdkit-vddk-plugin</a></b>(1) has been tested with VMware VDDK 8.0.3.

   <b>Filters</b>
       New <b><a href="../man1/nbdkit-bzip2-filter.1.html">nbdkit-bzip2-filter</a></b>(1) supporting bzip2-compressed images (Georg Pfuetzenreuter).

       New <b><a href="../man1/nbdkit-rotational-filter.1.html">nbdkit-rotational-filter</a></b>(1) which can be used to change the rotational property of a plugin (whether
       it advertises that it behaves like a spinning hard disk, or RAM / flash storage).

       New <b><a href="../man1/nbdkit-spinning-filter.1.html">nbdkit-spinning-filter</a></b>(1) can be used to add seek delays to simulate a spinning hard disk.

       <b><a href="../man1/nbdkit-ip-filter.1.html">nbdkit-ip-filter</a></b>(1) has new rule types for checking the client's X.509 Distinguished Name (DN) and
       Issuer's DN.

   <b>Language</b> <b>bindings</b>
       Ruby language support has been removed.  This did not work because of a fundamental problem in Ruby's
       garbage collection.  See:
       https://gitlab.com/nbdkit/nbdkit/-/commit/7364cbaae809b5ffb6b4dd847cbdd0b368a20024

   <b>Server</b>
       New <u>--print-uri</u> option which prints the URI of the server to help users find the NBD endpoint.

       Add a common function to find the size of a file or block device which should work properly across Linux
       and all the BSDs, and use this in several places where we need to know the size of a file or block device
       (thanks Eric Blake).

       When generating an NBD URI with TLS enabled, append "?tls-certificates=DIR" or "?tls-psk-key=FILE"
       parameter.  For libnbd-based NBD clients this allows the client to find the corresponding TLS
       credentials.

   <b>API</b>
       New <b><a href="../man3/nbdkit_parse_delay.3.html">nbdkit_parse_delay</a></b>(3) function which can be used to parse short delays and sleeps, like "100ms" or
       "1.2μs".  It is used by <b><a href="../man1/nbdkit-delay-filter.1.html">nbdkit-delay-filter</a></b>(1), <b><a href="../man1/nbdkit-retry-filter.1.html">nbdkit-retry-filter</a></b>(1), <b><a href="../man1/nbdkit-retry-request-filter.1.html">nbdkit-retry-request-filter</a></b>(1)
       and <b><a href="../man1/nbdkit-spinning-filter.1.html">nbdkit-spinning-filter</a></b>(1).  There are also bindings in OCaml and Python.

       New <b><a href="../man3/nbdkit_peer_tls_dn.3.html">nbdkit_peer_tls_dn</a></b>(3) and <b><a href="../man3/nbdkit_peer_tls_issuer_dn.3.html">nbdkit_peer_tls_issuer_dn</a></b>(3) to read the client's X.509 certificate
       Distinguished Name (DN) and Issuer's DN.

   <b>Documentation</b>
       Each nbdkit API function now has a separate manual page, eg.  <b><a href="../man3/nbdkit_parse_size.3.html">nbdkit_parse_size</a></b>(3) and <b><a href="../man3/nbdkit_debug.3.html">nbdkit_debug</a></b>(3).

       Fix references to external <b><a href="../man1/nbd-server.1.html">nbd-server</a></b>(1) and <b><a href="../man8/nbd-client.8.html">nbd-client</a></b>(8) man pages (Vera Wu).

       Revise the main <u>README.md</u> file in the sources.

   <b>Tests</b>
       CI updates and fixes (Daniel Berrangé, Eric Blake).

   <b>Build</b>
       The minimum version of gnutls is now ≥ 3.5.18.

   <b>Internals</b>
       Make error checking of <b><a href="../man2/ioctl.2.html">ioctl</a></b>(2) calls consistent by always checking if the return value "== -1".

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man1/nbdkit.1.html">nbdkit</a></b>(1).

</pre><h4><b>AUTHORS</b></h4><pre>
       Authors of nbdkit 1.40:

       Daniel P. Berrangé
       Eric Blake
       Georg Pfuetzenreuter
       Richard W.M. Jones

</pre><h4><b>COPYRIGHT</b></h4><pre>
       Copyright Red Hat

</pre><h4><b>LICENSE</b></h4><pre>
       Redistribution  and  use in source and binary forms, with or without modification, are permitted provided
       that the following conditions are met:

       •   Redistributions of source code must retain the above copyright notice, this list  of  conditions  and
           the following disclaimer.

       •   Redistributions in binary form must reproduce the above copyright notice, this list of conditions and
           the following disclaimer in the documentation and/or other materials provided with the distribution.

       •   Neither  the  name  of  Red  Hat  nor the names of its contributors may be used to endorse or promote
           products derived from this software without specific prior written permission.

       THIS SOFTWARE IS PROVIDED BY RED HAT AND CONTRIBUTORS ''AS IS'' AND ANY EXPRESS  OR  IMPLIED  WARRANTIES,
       INCLUDING,  BUT  NOT  LIMITED  TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
       PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL RED HAT OR CONTRIBUTORS BE LIABLE  FOR  ANY  DIRECT,  INDIRECT,
       INCIDENTAL,  SPECIAL,  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF
       SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
       ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT  LIABILITY,  OR  TORT  (INCLUDING  NEGLIGENCE  OR
       OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH
       DAMAGE.

nbdkit-1.42.2                                      2025-04-02                       <u><a href="../man1/nbdkit-release-notes-1.40.1.html">nbdkit-release-notes-1.40</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>