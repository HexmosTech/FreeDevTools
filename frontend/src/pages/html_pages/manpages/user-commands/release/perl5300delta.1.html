<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>perl5300delta - what is new for perl v5.30.0</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/perl-doc">perl-doc_5.40.1-2ubuntu0.2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       perl5300delta - what is new for perl v5.30.0

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This document describes differences between the 5.28.0 release and the 5.30.0 release.

       If you are upgrading from an earlier release such as 5.26.0, first read perl5280delta, which describes
       differences between 5.26.0 and 5.28.0.

</pre><h4><b>Notice</b></h4><pre>
       sv_utf8_(downgrade|decode) are no longer marked as experimental.  [GH #16822]
       &lt;https://github.com/Perl/perl5/issues/16822&gt;.

</pre><h4><b>Core</b> <b>Enhancements</b></h4><pre>
   <b>Limited</b> <b>variable</b> <b>length</b> <b>lookbehind</b> <b>in</b> <b>regular</b> <b>expression</b> <b>pattern</b> <b>matching</b> <b>is</b> <b>now</b> <b>experimentally</b> <b>supported</b>
       Using a lookbehind assertion (like "(?&lt;=foo?)" or "(?&lt;!ba{1,9}r)" previously would generate an error and
       refuse to compile.  Now it compiles (if the maximum lookbehind is at most 255 characters), but raises a
       warning in the new "experimental::vlb" warnings category.  This is to caution you that the precise
       behavior is subject to change based on feedback from use in the field.

       See "(?&lt;=pattern)" in perlre and "(?&lt;!pattern)" in perlre.

   <b>The</b> <b>upper</b> <b>limit</b> <b>"n"</b> <b>specifiable</b> <b>in</b> <b>a</b> <b>regular</b> <b>expression</b> <b>quantifier</b> <b>of</b> <b>the</b> <b>form</b> <b>"{m,n}"</b> <b>has</b> <b>been</b> <b>doubled</b> <b>to</b>
       <b>65534</b>
       The meaning of an unbounded upper quantifier "{m,}" remains unchanged.  It matches 2**31 - 1 times on
       most platforms, and more on ones where a C language short variable is more than 4 bytes long.

   <b>Unicode</b> <b>12.1</b> <b>is</b> <b>supported</b>
       Because of a change in Unicode release cycles, Perl jumps from Unicode 10.0 in Perl 5.28 to Unicode 12.1
       in Perl 5.30.

       For details on the Unicode changes, see &lt;https://www.unicode.org/versions/Unicode11.0.0/&gt; for 11.0;
       &lt;https://www.unicode.org/versions/Unicode12.0.0/&gt; for 12.0; and
       &lt;https://www.unicode.org/versions/Unicode12.1.0/&gt; for 12.1.  (Unicode 12.1 differs from 12.0 only in the
       addition of a single character, that for the new Japanese era name.)

       The Word_Break property, as in past Perl releases, remains tailored to behave more in line with
       expectations of Perl users.  This means that sequential runs of horizontal white space characters are not
       broken apart, but kept as a single run.  Unicode 11 changed from past versions to be more in line with
       Perl, but it left several white space characters as causing breaks: TAB, NO BREAK SPACE, and FIGURE SPACE
       (U+2007).  We have decided to continue to use the previous Perl tailoring with regards to these.

   <b>Wildcards</b> <b>in</b> <b>Unicode</b> <b>property</b> <b>value</b> <b>specifications</b> <b>are</b> <b>now</b> <b>partially</b> <b>supported</b>
       You can now do something like this in a regular expression pattern

        qr! \p{nv= /(?x) \A [0-5] \z / }!

       which matches all Unicode code points whose numeric value is between 0 and 5 inclusive.  So, it could
       match the Thai or Bengali digits whose numeric values are 0, 1, 2, 3, 4, or 5.

       This marks another step in implementing the regular expression features the Unicode Consortium suggests.

       Most properties are supported, with the remainder planned for 5.32.  Details are in "Wildcards in
       Property Values" in perlunicode.

   <b>qr'\N{name}'</b> <b>is</b> <b>now</b> <b>supported</b>
       Previously it was an error to evaluate a named character "\N{...}" within a single quoted regular
       expression pattern (whose evaluation is deferred from the normal place).  This restriction is now
       removed.

   <b>Turkic</b> <b>UTF-8</b> <b>locales</b> <b>are</b> <b>now</b> <b>seamlessly</b> <b>supported</b>
       Turkic languages have different casing rules than other languages for the characters "i" and "I".  The
       uppercase of "i" is LATIN CAPITAL LETTER I WITH DOT ABOVE (U+0130); and the lowercase of "I" is LATIN
       SMALL LETTER DOTLESS I (U+0131).  Unicode furnishes alternate casing rules for use with Turkic languages.
       Previously, Perl ignored these, but now, it uses them when it detects that it is operating under a Turkic
       UTF-8 locale.

   <b>It</b> <b>is</b> <b>now</b> <b>possible</b> <b>to</b> <b>compile</b> <b>perl</b> <b>to</b> <b>always</b> <b>use</b> <b>thread-safe</b> <b>locale</b> <b>operations</b>
       Previously, these calls were only used when the perl was compiled to be multi-threaded.  To always enable
       them, add

        -Accflags='-DUSE_THREAD_SAFE_LOCALE'

       to your <u>Configure</u> flags.

   <b>Eliminate</b> <b>opASSIGN</b> <b>macro</b> <b>usage</b> <b>from</b> <b>core</b>
       This macro is still defined but no longer used in core

   <b>"-Drv"</b> <b>now</b> <b>means</b> <b>something</b> <b>on</b> <b>"-DDEBUGGING"</b> <b>builds</b>
       Now, adding the verbose flag ("-Dv") to the "-Dr" flag turns on all possible regular expression
       debugging.

</pre><h4><b>Incompatible</b> <b>Changes</b></h4><pre>
   <b>Assigning</b> <b>non-zero</b> <b>to</b> <b>$[</b> <b>is</b> <b>fatal</b>
       Setting $[ to a non-zero value has been deprecated since Perl 5.12 and now throws a fatal error.  See
       "Assigning non-zero to $[ is fatal" in perldeprecation.

   <b>Delimiters</b> <b>must</b> <b>now</b> <b>be</b> <b>graphemes</b>
       See "Use of unassigned code point or non-standalone grapheme for a delimiter." in perldeprecation

   <b>Some</b> <b>formerly</b> <b>deprecated</b> <b>uses</b> <b>of</b> <b>an</b> <b>unescaped</b> <b>left</b> <b>brace</b> <b>"{"</b> <b>in</b> <b>regular</b> <b>expression</b> <b>patterns</b> <b>are</b> <b>now</b> <b>illegal</b>
       But to avoid breaking code unnecessarily, most instances that issued a deprecation warning, remain legal
       and now have a non-deprecation warning raised.  See "Unescaped left braces in regular expressions" in
       perldeprecation.

   <b>Previously</b> <b>deprecated</b> <b>sysread()/syswrite()</b> <b>on</b> <b>:utf8</b> <b>handles</b> <b>is</b> <b>now</b> <b>fatal</b>
       Calling <b>sysread()</b>, <b>syswrite()</b>, <b>send()</b> or <b>recv()</b> on a ":utf8" handle, whether applied explicitly or
       implicitly, is now fatal.  This was deprecated in perl 5.24.

       There were two problems with calling these functions on ":utf8" handles:

       •   All four functions only paid attention to the ":utf8" flag.  Other layers were completely ignored, so
           a handle with :encoding(UTF-16LE) layer would be treated as UTF-8.  Other layers, such as compression
           are completely ignored with or without the ":utf8" flag.

       •   <b>sysread()</b>  and  <b>recv()</b>  would  read from the handle, skipping any validation by the layers, and do no
           validation of their own.  This could lead to invalidly encoded perl scalars.

       [GH #14839] &lt;https://github.com/Perl/perl5/issues/14839&gt;.

   <b>my()</b> <b>in</b> <b>false</b> <b>conditional</b> <b>prohibited</b>
       Declarations such as "my $x if 0" are no longer permitted.

       [GH #16702] &lt;https://github.com/Perl/perl5/issues/16702&gt;.

   <b>Fatalize</b> <b>$*</b> <b>and</b> <b>$#</b>
       These special variables, long deprecated, now throw exceptions when used.

       [GH #16718] &lt;https://github.com/Perl/perl5/issues/16718&gt;.

   <b>Fatalize</b> <b>unqualified</b> <b>use</b> <b>of</b> <b>dump()</b>
       The dump() function, long discouraged, may no  longer  be  used  unless  it  is  fully  qualified,  <u>i.e.</u>,
       CORE::dump().

       [GH #16719] &lt;https://github.com/Perl/perl5/issues/16719&gt;.

   <b>Remove</b> <b>File::Glob::glob()</b>
       The  File::Glob::glob()  function,  long  deprecated,  has been removed and now throws an exception which
       advises use of File::Glob::bsd_glob() instead.

       [GH #16721] &lt;https://github.com/Perl/perl5/issues/16721&gt;.

   <b>pack()</b> <b>no</b> <b>longer</b> <b>can</b> <b>return</b> <b>malformed</b> <b>UTF-8</b>
       It croaks if it would otherwise return a UTF-8 string  that  contains  malformed  UTF-8.   This  protects
       against   potential   security   threats.    This   is  considered  a  bug  fix  as  well.   [GH  #16035]
       &lt;https://github.com/Perl/perl5/issues/16035&gt;.

   <b>Any</b> <b>set</b> <b>of</b> <b>digits</b> <b>in</b> <b>the</b> <b>Common</b> <b>script</b> <b>are</b> <b>legal</b> <b>in</b> <b>a</b> <b>script</b> <b>run</b> <b>of</b> <b>another</b> <b>script</b>
       There are several sets of digits in the Common script.  "[0-9]" is the most familiar.  But there are also
       "[\x{FF10}-\x{FF19}]" (FULLWIDTH DIGIT ZERO -  FULLWIDTH  DIGIT  NINE),  and  several  sets  for  use  in
       mathematical  notation,  such as the MATHEMATICAL DOUBLE-STRUCK DIGITs.  Any of these sets should be able
       to appear in script runs of, say, Greek.  But the design of 5.30 overlooked  all  but  the  ASCII  digits
       "[0-9]",  so  the  design  was flawed.  This has been fixed, so is both a bug fix and an incompatibility.
       [GH #16704] &lt;https://github.com/Perl/perl5/issues/16704&gt;.

       All digits in a run still have to come from the same set of ten digits.

   <b>JSON::PP</b> <b>enables</b> <b>allow_nonref</b> <b>by</b> <b>default</b>
       As JSON::XS  4.0  changed  its  policy  and  enabled  allow_nonref  by  default,  JSON::PP  also  enabled
       allow_nonref by default.

</pre><h4><b>Deprecations</b></h4><pre>
   <b>In</b> <b>XS</b> <b>code,</b> <b>use</b> <b>of</b> <b>various</b> <b>macros</b> <b>dealing</b> <b>with</b> <b>UTF-8</b>
       This deprecation was scheduled to become fatal in 5.30, but has been delayed to 5.32 due to problems that
       showed up with some CPAN modules.  For details of what's affected, see perldeprecation.

</pre><h4><b>Performance</b> <b>Enhancements</b></h4><pre>
       •   Translating  from  UTF-8  into  the  code  point it represents now is done via a deterministic finite
           automaton, speeding it up.  As a typical example, ord("\x7fff") now requires 12%  fewer  instructions
           than  before.   The  performance  of  checking  that  a sequence of bytes is valid UTF-8 is similarly
           improved, again by using a DFA.

       •   Eliminate recursion from <b>finalize_op()</b>.  [GH #11866] &lt;https://github.com/Perl/perl5/issues/11866&gt;.

       •   A handful of small optimizations related to  character  folding  and  character  classes  in  regular
           expressions.

       •   Optimization of "IV" to "UV" conversions.  [GH #16761] &lt;https://github.com/Perl/perl5/issues/16761&gt;.

       •   Speed  up of the integer stringification algorithm by processing two digits at a time instead of one.
           [GH #16769] &lt;https://github.com/Perl/perl5/issues/16769&gt;.

       •   Improvements        based        on         LGTM         analysis         and         recommendation.
           (&lt;https://lgtm.com/projects/g/Perl/perl5/alerts/?mode=tree&gt;).                [GH              #16765]
           &lt;https://github.com/Perl/perl5/issues/16765&gt;.                       [GH                       #16773]
           &lt;https://github.com/Perl/perl5/issues/16773&gt;.

       •   Code optimizations in <u>regcomp.c</u>, <u>regcomp.h</u>, <u>regexec.c</u>.

       •   Regular  expression  pattern  matching of things like "qr/[^<u>a</u>]/" is significantly sped up, where <u>a</u> is
           any ASCII character.  Other classes can get this speed up, but which ones is complicated and  depends
           on  the  underlying  bit patterns of those characters, so differs between ASCII and EBCDIC platforms,
           but all case pairs, like "qr/[Gg]/" are included, as is "[^01]".

</pre><h4><b>Modules</b> <b>and</b> <b>Pragmata</b></h4><pre>
   <b>Updated</b> <b>Modules</b> <b>and</b> <b>Pragmata</b>
       •   Archive::Tar has been upgraded from version 2.30 to 2.32.

       •   B has been upgraded from version 1.74 to 1.76.

       •   B::Concise has been upgraded from version 1.003 to 1.004.

       •   B::Deparse has been upgraded from version 1.48 to 1.49.

       •   bignum has been upgraded from version 0.49 to 0.51.

       •   bytes has been upgraded from version 1.06 to 1.07.

       •   Carp has been upgraded from version 1.38 to 1.50

       •   Compress::Raw::Bzip2 has been upgraded from version 2.074 to 2.084.

       •   Compress::Raw::Zlib has been upgraded from version 2.076 to 2.084.

       •   Config::Extensions has been upgraded from version 0.02 to 0.03.

       •   Config::Perl::V. has been upgraded from version 0.29 to 0.32. This was due  to  a  new  configuration
           variable that has influence on binary compatibility: "USE_THREAD_SAFE_LOCALE".

       •   CPAN has been upgraded from version 2.20 to 2.22.

       •   Data::Dumper has been upgraded from version 2.170 to 2.174

           Data::Dumper now avoids leaking when "croak"ing.

       •   DB_File has been upgraded from version 1.840 to 1.843.

       •   deprecate has been upgraded from version 0.03 to 0.04.

       •   Devel::Peek has been upgraded from version 1.27 to 1.28.

       •   Devel::PPPort has been upgraded from version 3.40 to 3.52.

       •   Digest::SHA has been upgraded from version 6.01 to 6.02.

       •   Encode has been upgraded from version 2.97 to 3.01.

       •   Errno has been upgraded from version 1.29 to 1.30.

       •   experimental has been upgraded from version 0.019 to 0.020.

       •   ExtUtils::CBuilder has been upgraded from version 0.280230 to 0.280231.

       •   ExtUtils::Manifest has been upgraded from version 1.70 to 1.72.

       •   ExtUtils::Miniperl has been upgraded from version 1.08 to 1.09.

       •   ExtUtils::ParseXS  has  been  upgraded from version 3.39 to 3.40.  "OUTLIST" parameters are no longer
           incorrectly  included   in   the   automatically   generated   function   prototype.    [GH   #16746]
           &lt;https://github.com/Perl/perl5/issues/16746&gt;.

       •   feature has been upgraded from version 1.52 to 1.54.

       •   File::Copy has been upgraded from version 2.33 to 2.34.

       •   File::Find has been upgraded from version 1.34 to 1.36.

           $File::Find::dont_use_nlink    now    defaults    to    1    on    all    platforms.    [GH   #16759]
           &lt;https://github.com/Perl/perl5/issues/16759&gt;.

           Variables $Is_Win32 and $Is_VMS are being initialized.

       •   File::Glob has been upgraded from version 1.31 to 1.32.

       •   File::Path has been upgraded from version 2.15 to 2.16.

       •   File::Spec has been upgraded from version 3.74 to 3.78.

           Silence Cwd warning on Android builds if "targetsh" is not defined.

       •   File::Temp has been upgraded from version 0.2304 to 0.2309.

       •   Filter::Util::Call has been upgraded from version 1.58 to 1.59.

       •   GDBM_File has been upgraded from version 1.17 to 1.18.

       •   HTTP::Tiny has been upgraded from version 0.070 to 0.076.

       •   I18N::Langinfo has been upgraded from version 0.17 to 0.18.

       •   IO has been upgraded from version 1.39 to 1.40.

       •   IO-Compress has been upgraded from version 2.074 to 2.084.

           Adds support for "IO::Uncompress::Zstd" and "IO::Uncompress::UnLzip".

           The "BinModeIn" and "BinModeOut" options are now no-ops.  ALL files will be read/written in binmode.

       •   IPC::Cmd has been upgraded from version 1.00 to 1.02.

       •   JSON::PP has been upgraded from version 2.97001 to 4.02.

           JSON::PP as JSON::XS 4.0 enables "allow_nonref" by default.

       •   lib has been upgraded from version 0.64 to 0.65.

       •   Locale::Codes has been upgraded from version 3.56 to 3.57.

       •   Math::BigInt has been upgraded from version 1.999811 to 1.999816.

           bnok()     now     supports     the     full      Kronenburg      extension.       [cpan      #95628]
           &lt;https://rt.cpan.org/Ticket/Display.html?id=95628&gt;.

       •   Math::BigInt::FastCalc has been upgraded from version 0.5006 to 0.5008.

       •   Math::BigRat has been upgraded from version 0.2613 to 0.2614.

       •   Module::CoreList has been upgraded from version 5.20180622 to 5.20190520.

           Changes to B::Op_private and Config

       •   Module::Load has been upgraded from version 0.32 to 0.34.

       •   Module::Metadata has been upgraded from version 1.000033 to 1.000036.

           Properly clean up temporary directories after testing.

       •   NDBM_File has been upgraded from version 1.14 to 1.15.

       •   Net::Ping has been upgraded from version 2.62 to 2.71.

       •   ODBM_File has been upgraded from version 1.15 to 1.16.

       •   PathTools has been upgraded from version 3.74 to 3.78.

       •   parent has been upgraded from version 0.236 to 0.237.

       •   perl5db.pl has been upgraded from version 1.54 to 1.55.

           Debugging threaded code no longer deadlocks in "DB::sub" nor "DB::lsub".

       •   perlfaq has been upgraded from version 5.021011 to 5.20190126.

       •   PerlIO::encoding has been upgraded from version 0.26 to 0.27.

           Warnings  enabled  by  setting  the  "WARN_ON_ERR"  flag  in $PerlIO::encoding::fallback are now only
           produced if warnings are enabled with "use warnings "utf8";" or setting $^W.

       •   PerlIO::scalar has been upgraded from version 0.29 to 0.30.

       •   podlators has been upgraded from version 4.10 to 4.11.

       •   POSIX has been upgraded from version 1.84 to 1.88.

       •   re has been upgraded from version 0.36 to 0.37.

       •   SDBM_File has been upgraded from version 1.14 to 1.15.

       •   sigtrap has been upgraded from version 1.08 to 1.09.

       •   Storable has been upgraded from version 3.08 to 3.15.

           Storable   no   longer   probes   for   recursion   limits    at    build    time.     [GH    #16780]
           &lt;https://github.com/Perl/perl5/issues/16780&gt; and others.

           Metasploit  exploit  code  was  included  to test for CVE-2015-1592 detection, this caused anti-virus
           detections on at least one AV suite.  The exploit code has been removed and replaced  with  a  simple
           functional test.  [GH #16778] &lt;https://github.com/Perl/perl5/issues/16778&gt;

       •   Test::Simple has been upgraded from version 1.302133 to 1.302162.

       •   Thread::Queue has been upgraded from version 3.12 to 3.13.

       •   threads::shared has been upgraded from version 1.58 to 1.60.

           Added  support  for  extra  tracing  of  locking, this requires a "-DDEBUGGING" and extra compilation
           flags.

       •   Time::HiRes has been upgraded from version 1.9759 to 1.9760.

       •   Time::Local has been upgraded from version 1.25 to 1.28.

       •   Time::Piece has been upgraded from version 1.3204 to 1.33.

       •   Unicode::Collate has been upgraded from version 1.25 to 1.27.

       •   Unicode::UCD has been upgraded from version 0.70 to 0.72.

       •   User::grent has been upgraded from version 1.02 to 1.03.

       •   utf8 has been upgraded from version 1.21 to 1.22.

       •   vars has been upgraded from version 1.04 to 1.05.

           "vars.pm" no longer disables non-vars strict when checking if strict vars is  enabled.   [GH  #15851]
           &lt;https://github.com/Perl/perl5/issues/15851&gt;.

       •   version has been upgraded from version 0.9923 to 0.9924.

       •   warnings has been upgraded from version 1.42 to 1.44.

       •   XS::APItest has been upgraded from version 0.98 to 1.00.

       •   XS::Typemap has been upgraded from version 0.16 to 0.17.

   <b>Removed</b> <b>Modules</b> <b>and</b> <b>Pragmata</b>
       The  following  modules  will be removed from the core distribution in a future release, and will at that
       time need to be installed from CPAN.  Distributions on CPAN which require these modules will need to list
       them as prerequisites.

       The core versions of these modules will now issue "deprecated"-category warnings to  alert  you  to  this
       fact.  To silence these deprecation warnings, install the modules in question from CPAN.

       Note  that  these  are  (with  rare  exceptions) fine modules that you are encouraged to continue to use.
       Their disinclusion from core primarily hinges on their necessity to  bootstrapping  a  fully  functional,
       CPAN-capable Perl installation, not usually on concerns over their design.

       •   arybase has been removed. It used to provide the implementation of the $[ variable (also known as the
           "array_base" feature), letting array and string indices start at a non-zero value. As the feature has
           been removed (see "Assigning non-zero to $[ is fatal"), this internal module is gone as well.

       •   B::Debug  is  no longer distributed with the core distribution.  It continues to be available on CPAN
           as "B::Debug &lt;https://metacpan.org/pod/B::Debug&gt;".

       •   Locale::Codes has been removed at the request of its author.  It continues to be available on CPAN as
           "Locale::Codes            &lt;https://metacpan.org/pod/Locale::Codes&gt;"            [GH            #16660]
           &lt;https://github.com/Perl/perl5/issues/16660&gt;.

</pre><h4><b>Documentation</b></h4><pre>
   <b>Changes</b> <b>to</b> <b>Existing</b> <b>Documentation</b>
       We  have  attempted  to  update the documentation to reflect the changes listed in this document.  If you
       find any we have missed, send email to <a href="mailto:perlbug@perl.org">perlbug@perl.org</a> &lt;<a href="mailto:perlbug@perl.org">mailto:perlbug@perl.org</a>&gt;.

       <u>perlapi</u>

       •   AvFILL()  was  wrongly   listed   as   deprecated.    This   has   been   corrected.    [GH   #16586]
           &lt;https://github.com/Perl/perl5/issues/16586&gt;

       <u>perlop</u>

       •   We no longer have null (empty line) here doc terminators, so perlop should not refer to them.

       •   The behaviour of "tr" when the delimiter is an apostrophe has been clarified.  In particular, hyphens
           aren't       special,       and       "\x{}"       isn't       interpolated.        [GH       #15853]
           &lt;https://github.com/Perl/perl5/issues/15853&gt;

       <u>perlreapi,</u> <u>perlvar</u>

       •   Improve docs for lastparen, lastcloseparen.

       <u>perlfunc</u>

       •   The entry for "-X" in perlfunc has been clarified to indicate that symbolic links  are  followed  for
           most tests.

       •   Clarification of behaviour of "reset EXPR".

       •   Try  to  clarify  that  ref(qr/xx/)  returns  "Regexp"  rather  than  "REGEXP"  and why.  [GH #16801]
           &lt;https://github.com/Perl/perl5/issues/16801&gt;.

       <u>perlreref</u>

       •   Clarification of the syntax of /(?(cond)yes)<a href="file:/.">/.</a>

       <u>perllocale</u>

       •   There are actually two slightly different types of UTF-8 locales: one for Turkic  languages  and  one
           for everything else. Starting in Perl v5.30, Perl seamlessly handles both types.

       <u>perlrecharclass</u>

       •   Added a note for the ::xdigit:: character class.

       <u>perlvar</u>

       •   More       specific       documentation       of       paragraph       mode.        [GH       #16787]
           &lt;https://github.com/Perl/perl5/issues/16787&gt;.

</pre><h4><b>Diagnostics</b></h4><pre>
       The following additions or changes have been made to diagnostic  output,  including  warnings  and  fatal
       error messages.  For the complete list of diagnostic messages, see perldiag.

   <b>Changes</b> <b>to</b> <b>Existing</b> <b>Diagnostics</b>
       •   As  noted  under "Incompatible Changes" above, the deprecation warning "Unescaped left brace in regex
           is deprecated here (and will be fatal in Perl 5.30), passed through in regex; marked by  &lt;-- HERE  in
           m/%s/"  has  been  changed  to  the  non-deprecation warning "Unescaped left brace in regex is passed
           through in regex; marked by &lt;-- HERE in m/%s/".

       •   Specifying "\o{}" without anything between the braces now  yields  the  fatal  error  message  "Empty
           \o{}".   Previously  it  was   "Number with no digits".  This means the same wording is used for this
           kind of error as with similar constructs such as "\p{}".

       •   Within the scope of the experimental feature "use re 'strict'", specifying  "\x{}"  without  anything
           between  the braces now yields the fatal error message "Empty \x{}".  Previously it was  "Number with
           no digits".  This means the same wording is used for this kind of error as  with  similar  constructs
           such  as  "\p{}".   It  is  legal, though not wise to have an empty "\x" outside of "re 'strict'"; it
           silently generates a NUL character.

       •   Type of arg %d to %s must be %s (not %s)

           Attempts to push, pop, etc on a hash or glob now produce this message rather  than  complaining  that
           they no longer work on scalars.  [GH #15774] &lt;https://github.com/Perl/perl5/issues/15774&gt;.

       •   Prototype not terminated

           The    file    and    line    number    is    now    reported    for   this   error.    [GH   #16697]
           &lt;https://github.com/Perl/perl5/issues/16697&gt;

       •   Under "-Dr" (or "use re 'Debug'") the compiled regex engine program is displayed. It used to use  two
           different  spellings  for  <u>infinity</u>,  "INFINITY", and "INFTY". It now uses the latter exclusively, as
           that spelling has been around the longest.

</pre><h4><b>Utility</b> <b>Changes</b></h4><pre>
   <b>xsubpp</b>
       •   The generated prototype (with "PROTOTYPES: ENABLE") would include  "OUTLIST"  parameters,  but  these
           aren't    arguments    to   the   perl   function.    This   has   been   rectified.    [GH   #16746]
           &lt;https://github.com/Perl/perl5/issues/16746&gt;.

</pre><h4><b>Configuration</b> <b>and</b> <b>Compilation</b></h4><pre>
       •   Normally the thread-safe locale functions are used only on threaded builds.  It is  now  possible  to
           force  their  use  on  unthreaded  builds  on  systems  that  have  them  available, by including the
           "-Accflags='-DUSE_THREAD_SAFE_LOCALE'" option to <u>Configure</u>.

       •   Improve detection of memrchr, strlcat, and strlcpy

       •   Improve Configure detection of <b>memmem()</b>.  [GH #16807] &lt;https://github.com/Perl/perl5/issues/16807&gt;.

       •   Multiple improvements and fixes for -DPERL_GLOBAL_STRUCT build option.

       •   Fix -DPERL_GLOBAL_STRUCT_PRIVATE build option.

</pre><h4><b>Testing</b></h4><pre>
       •   <u>t/lib/croak/op</u> [GH #15774] &lt;https://github.com/Perl/perl5/issues/15774&gt;.

           separate error for "push", etc. on hash/glob.

       •   <u>t/op/svleak.t</u> [GH #16749] &lt;https://github.com/Perl/perl5/issues/16749&gt;.

           Add test for "goto &amp;sub" in overload leaking.

       •   Split <u>t/re/fold_grind.t</u> into multiple test files.

       •   Fix intermittent tests which failed due to race conditions which  surface  during  parallel  testing.
           [GH #16795] &lt;https://github.com/Perl/perl5/issues/16795&gt;.

       •   Thoroughly  test  paragraph  mode,  using  a  new  test  file,  <u>t/io/paragraph_mode.t</u>.   [GH  #16787]
           &lt;https://github.com/Perl/perl5/issues/16787&gt;.

       •   Some tests in <u>t/io/eintr.t</u> caused the process to hang on pre-16 Darwin. These tests are  skipped  for
           those version of Darwin.

</pre><h4><b>Platform</b> <b>Support</b></h4><pre>
   <b>Platform-Specific</b> <b>Notes</b>
       HP-UX 11.11
           An  obscure  problem  in  pack()  when  compiling  with  HP  C-ANSI-C  has  been  fixed  by disabling
           optimizations in <u>pp_pack.c</u>.

       Mac OS X
           Perl's build and testing process on Mac OS X for "-Duseshrplib" builds is now compatible with Mac  OS
           X System Integrity Protection (SIP).

           SIP  prevents  binaries  in  <u><a href="file:/bin">/bin</a></u>  (and  a  few  other  places)  being passed the "DYLD_LIBRARY_PATH"
           environment variable.  For our purposes this prevents "DYLD_LIBRARY_PATH" from being  passed  to  the
           shell,  which  prevents that variable being passed to the testing or build process, so running "perl"
           couldn't find <u>libperl.dylib</u>.

           To work around that, the initial build of the <u>perl</u> executable expects to find  <u>libperl.dylib</u>  in  the
           build  directory, and the library path is then adjusted during installation to point to the installed
           library.

           [GH #15057] &lt;https://github.com/Perl/perl5/issues/15057&gt;.

       Minix3
           Some support for Minix3 has been re-added.

       Cygwin
           Cygwin doesn't make "cuserid" visible.

       Win32 Mingw
           C99 math functions are now available.

       Windows
           •   The "USE_CPLUSPLUS" build option which has long been available in <u>win32/Makefile</u> (for <b>nmake</b>)  and
               <u>win32/makefile.mk</u> (for <b>dmake</b>) is now also available in <u>win32/GNUmakefile</u> (for <b>gmake</b>).

           •   The  <b>nmake</b> makefile no longer defaults to Visual C++ 6.0 (a very old version which is unlikely to
               be widely used today).  As a result, it is now a requirement to specify the "CCTYPE" since  there
               is  no obvious choice of which modern version to default to instead.  Failure to specify "CCTYPE"
               will result in an error being output and the build will stop.

               (The <b>dmake</b> and <b>gmake</b> makefiles will automatically detect which compiler is being used, so do  not
               require "CCTYPE" to be set.  This feature has not yet been added to the <b>nmake</b> makefile.)

           •   sleep()  with  warnings enabled for a "USE_IMP_SYS" build no longer warns about the sleep timeout
               being too large.  [GH #16631] &lt;https://github.com/Perl/perl5/issues/16631&gt;.

           •   Support for compiling perl on Windows using Microsoft Visual Studio 2019 (containing  Visual  C++
               14.2) has been added.

           •   <b>socket()</b>  now  sets  $! if the protocol, address family and socket type combination is not found.
               [GH #16849] &lt;https://github.com/Perl/perl5/issues/16849&gt;.

           •   The Windows Server 2003 SP1 Platform SDK build, with  its  early  x64  compiler  and  tools,  was
               accidentally broken in Perl 5.27.9.  This has now been fixed.

</pre><h4><b>Internal</b> <b>Changes</b></h4><pre>
       •   The  sizing pass has been eliminated from the regular expression compiler.  An extra pass may instead
           be needed in some cases to count the number of parenthetical capture groups.

       •   A new function ""my_strtod"" in perlapi or its synonym, <b>Strtod()</b>, is  now  available  with  the  same
           signature  as  the  libc <b>strtod()</b>.  It provides <b>strotod()</b> equivalent behavior on all platforms, using
           the best available precision,  depending  on  platform  capabilities  and  <u>Configure</u>  options,  while
           handling locale-related issues, such as if the radix character should be a dot or comma.

       •   Added  newSVsv_nomg()  to  copy  a  SV  without  processing  get  magic  on  the source.  [GH #16461]
           &lt;https://github.com/Perl/perl5/issues/16461&gt;.

       •   It is now forbidden to malloc more than "PTRDIFF_T_MAX" bytes.  Much code  (including  C  optimizers)
           assumes  that  all data structures will not be larger than this, so this catches such attempts before
           overflow happens.

       •   Two new regnodes have been introduced  "EXACT_ONLY8",  and  "EXACTFU_ONLY8".  They're  equivalent  to
           "EXACT" and "EXACTFU", except that they contain a code point which requires UTF-8 to represent/match.
           Hence, if the target string isn't UTF-8, we know it can't possibly match, without needing to try.

       •   print_bytes_for_locale()  is  now  defined  if  "DEBUGGING",  Prior,  it  didn't  get  defined unless
           "LC_COLLATE" was defined on the platform.

</pre><h4><b>Selected</b> <b>Bug</b> <b>Fixes</b></h4><pre>
       •   Compilation under "-DPERL_MEM_LOG" and "-DNO_LOCALE" have been fixed.

       •   Perl 5.28 introduced an index() optimization when comparing to -1 (or indirectly, e.g. &gt;=  0).   When
           this  optimization  was  triggered  inside  a  "when"  clause it caused a warning ("Argument %s isn't
           numeric    in    smart    match").      This     has     now     been     fixed.      [GH     #16626]
           &lt;https://github.com/Perl/perl5/issues/16626&gt;

       •   The    new    in-place   editing   code   no   longer   leaks   directory   handles.    [GH   #16602]
           &lt;https://github.com/Perl/perl5/issues/16602&gt;.

       •   Warnings produced from constant folding operations on overloaded values no  longer  produce  spurious
           "Use of uninitialized value" warnings.  [GH #16349] &lt;https://github.com/Perl/perl5/issues/16349&gt;.

       •   Fix     for     "mutator     not     seen    in    (lex    =    ...)    .=    ..."     [GH    #16655]
           &lt;https://github.com/Perl/perl5/issues/16655&gt;.

       •   "pack "u", "invalid uuencoding"" now properly  NUL  terminates  the  zero-length  SV  produced.   [GH
           #16343] &lt;https://github.com/Perl/perl5/issues/16343&gt;.

       •   Improve    the    debugging    output    for    <b>calloc()</b>    calls    with    "-Dm".     [GH   #16653]
           &lt;https://github.com/Perl/perl5/issues/16653&gt;.

       •   Regexp  script  runs  were  failing  to  permit  ASCII   digits   in   some   cases.    [GH   #16704]
           &lt;https://github.com/Perl/perl5/issues/16704&gt;.

       •   On  Unix-like  systems  supporting  a platform-specific technique for determining $^X, Perl failed to
           fall back to the generic technique when the platform-specific one fails (for example, a Linux  system
           with    <a href="file:/proc">/proc</a>   not   mounted).    This   was   a   regression   in   Perl   5.28.0.    [GH   #16715]
           &lt;https://github.com/Perl/perl5/issues/16715&gt;.

       •   SDBM_File is now more robust with corrupt database files.  The improvements do not  make  SDBM  files
           suitable as an interchange format.  [GH #16164] &lt;https://github.com/Perl/perl5/issues/16164&gt;.

       •   "binmode($fh);"  or  "binmode($fh,  ':raw');"  now properly removes the ":utf8" flag from the default
           ":crlf" I/O layer on Win32.  [GH #16730] &lt;https://github.com/Perl/perl5/issues/16730&gt;.

       •   The experimental reference aliasing feature was misinterpreting array and hash  slice  assignment  as
           being localised, e.g.

               \(@a[3,5,7]) = \(....);

           was being interpreted as:

               local \(@a[3,5,7]) = \(....);

           [GH #16701] &lt;https://github.com/Perl/perl5/issues/16701&gt;.

       •   "sort  SUBNAME" within an "eval EXPR" when "EXPR" was UTF-8 upgraded could panic if the "SUBNAME" was
           non-ASCII.  [GH #16979] &lt;https://github.com/Perl/perl5/issues/16979&gt;.

       •   Correctly handle <b>realloc()</b> modifying "errno" on success so that the modification isn't visible to the
           perl user, since <b>realloc()</b> is called implicitly by the interpreter.  This modification  is  permitted
           by   the   C   standard,   but   has  only  been  observed  on  FreeBSD  13.0-CURRENT.   [GH  #16907]
           &lt;https://github.com/Perl/perl5/issues/16907&gt;.

       •   Perl now exposes POSIX "getcwd" as Internals::getcwd() if available.  This is  intended  for  use  by
           "Cwd.pm"  during  bootstrapping  and  may  be  removed  or  changed  without notice.  This fixes some
           bootstrapping issues while building perl in a directory where some ancestor directory isn't readable.
           [GH #16903] &lt;https://github.com/Perl/perl5/issues/16903&gt;.

       •   pack() no longer can return malformed UTF-8.  It croaks if it would otherwise return a  UTF-8  string
           that  contains  malformed  UTF-8.   This  protects  against  potential security threats.  [GH #16035]
           &lt;https://github.com/Perl/perl5/issues/16035&gt;.

       •   See "Any set of digits in the Common script are legal in a script run of another script".

       •   Regular expression matching no longer leaves stale UTF-8 length magic when updating $^R.  This  could
           result in length($^R) returning an incorrect value.

       •   Reduce recursion on ops [GH #11866] &lt;https://github.com/Perl/perl5/issues/11866&gt;.

           This can prevent stack overflow when processing extremely deep op trees.

       •   Avoid        leak        in        multiconcat       with       overloading.        [GH       #16823]
           &lt;https://github.com/Perl/perl5/issues/16823&gt;.

       •   The  handling  of  user-defined  "\p{}"  properties  (see  "User-Defined  Character  Properties"   in
           perlunicode)  has  been  rewritten  to  be in C (instead of Perl).  This speeds things up, but in the
           process several inconsistencies and bug fixes are made.

           1.  A few error messages have minor wording changes.  This is essentially  because  the  new  way  is
               integrated  into the regex error handling mechanism that marks the position in the input at which
               the error occurred.  That was not possible previously.  The messages now also contain  additional
               back-trace-like information in case the error occurs deep in nested calls.

           2.  A  user-defined  property  is  implemented  as  a perl subroutine with certain highly constrained
               naming conventions.  It was documented previously that the sub would be in the current package if
               the package was unspecified.  This turned out not to be true in all cases, but now it is.

           3.  All recursive calls  are  treated  as  infinite  recursion.   Previously  they  would  cause  the
               interpreter to panic.  Now, they cause the regex pattern to fail to compile.

           4.  Similarly,  any  other  error  likely  would  lead to a panic; now to just the pattern failing to
               compile.

           5.  The old mechanism did not detect illegal ranges in the definition  of  the  property.   Now,  the
               range max must not be smaller than the range min.  Otherwise, the pattern fails to compile.

           6.  The intention was to have each sub called only once during the lifetime of the program, so that a
               property's  definition is immutable.  This was relaxed so that it could be called once for all /i
               compilations, and potentially a second time for non-/i (the sub is passed a parameter  indicating
               which).   However, in practice there were instances when this was broken, and multiple calls were
               possible.  Those have been fixed.  Now (besides the /i,non-/i cases) the only way a  sub  can  be
               called  multiple times is if some component of it has not been defined yet.  For example, suppose
               we have sub <b>IsA()</b> whose definition is known at compile time, and it in  turn  calls  <b>isB()</b>  whose
               definition is not yet known.  <b>isA()</b> will be called each time a pattern it appears in is compiled.
               If <b>isA()</b> also calls <b>isC()</b> and that definition is known, <b>isC()</b> will be called just once.

           7.  There  were  some  races  and very long hangs should one thread be compiling the same property as
               another simultaneously.  These have now been fixed.

       •   Fixed a failure to match properly.

           An EXACTFish regnode has a finite length it can hold for the string being matched.  If that length is
           exceeded, a second node is used for the next segment of the string,  for  as  many  regnodes  as  are
           needed.   Care  has  to be taken where to break the string, in order to deal multi-character folds in
           Unicode correctly. If we want to break a string at a place which could potentially be in  the  middle
           of a multi-character fold, we back off one (or more) characters, leaving a shorter EXACTFish regnode.
           This     backing     off     mechanism     contained    an    off-by-one    error.     [GH    #16806]
           &lt;https://github.com/Perl/perl5/issues/16806&gt;.

       •   A  bare  "eof"   call   with   no   previous   file   handle   now   returns   true.    [GH   #16786]
           &lt;https://github.com/Perl/perl5/issues/16786&gt;

       •   Failing to compile a format now aborts compilation.  Like other errors in sub-parses this could leave
           the  parser  in  a  strange  state,  possibly  crashing  perl  if compilation continued.  [GH #16169]
           &lt;https://github.com/Perl/perl5/issues/16169&gt;

       •   If an in-place edit is still in progress during global destruction and  the  process  exit  code  (as
           stored  in $?) is zero, perl will now treat the in-place edit as successful, replacing the input file
           with any output produced.

           This allows code like:

             perl -i -ne 'print "Foo"; last'

           to replace the input file, while code like:

             perl -i -ne 'print "Foo"; die'

           will not.  Partly resolves [GH #16748] &lt;https://github.com/Perl/perl5/issues/16748&gt;.

       •   A regression in 5.28 caused the following code to fail

            close(STDIN); open(CHILD, "|wc -l")'

           because the child's stdin would be closed on exec. This has now been fixed.

       •   Fixed an issue where compiling a regexp containing both compile-time and run-time code  blocks  could
           lead to trying to compile something which is invalid syntax.

       •   Fixed   build   failures   with   "-DNO_LOCALE_NUMERIC"   and   "-DNO_LOCALE_COLLATE".   [GH  #16771]
           &lt;https://github.com/Perl/perl5/issues/16771&gt;.

       •   Prevent    the    tests    in    <u>ext/B/t/strict.t</u>    from     being     skipped.      [GH     #16783]
           &lt;https://github.com/Perl/perl5/issues/16783&gt;.

       •   "/di"  nodes  ending  or  beginning  in <u>s</u> are now "EXACTF". We do not want two "EXACTFU" to be joined
           together during optimization, and to form a "ss", "sS", "Ss" or "SS"  sequence;  they  are  the  only
           multi-character sequences which may match differently under "/ui" and "/di".

</pre><h4><b>Acknowledgements</b></h4><pre>
       Perl   5.30.0  represents  approximately  11  months  of  development  since  Perl  5.28.0  and  contains
       approximately 620,000 lines of changes across 1,300 files from 58 authors.

       Excluding auto-generated files, documentation and release tools, there were approximately  510,000  lines
       of changes to 750 .pm, .t, .c and .h files.

       Perl  continues to flourish into its fourth decade thanks to a vibrant community of users and developers.
       The following people are known to have contributed the improvements that became Perl 5.30.0:

       Aaron Crane, Abigail, Alberto Simões, Alexandr Savca, Andreas König, Andy Dougherty, Aristotle Pagaltzis,
       Brian Greenfield, Chad Granum, Chris 'BinGOs' Williams, Craig A. Berry,  Dagfinn  Ilmari  Mannsåker,  Dan
       Book,  Dan  Dedrick,  Daniel  Dragan,  Dan  Kogai, David Cantrell, David Mitchell, Dominic Hargreaves, E.
       Choroba, Ed J, Eugen Konkov, François Perrad, Graham Knop, Hauke D, H.Merijn Brand, Hugo van der  Sanden,
       Jakub Wilk, James Clarke, James E Keenan, Jerry D. Hedden, Jim Cromie, John SJ Anderson, Karen Etheridge,
       Karl  Williamson,  Leon  Timmermans,  Matthias  Bethke, Nicholas Clark, Nicolas R., Niko Tyni, Pali, Petr
       Písař, Phil Pearl (Lobbes), Richard Leach, Ryan Voots, Sawyer X, Shlomi  Fish,  Sisyphus,  Slaven  Rezic,
       Steve  Hay,  Sullivan Beck, Tina Müller, Tomasz Konojacki, Tom Wyant, Tony Cook, Unicode Consortium, Yves
       Orton, Zak B. Elep.

       The list above is almost certainly incomplete as it  is  automatically  generated  from  version  control
       history. In particular, it does not include the names of most of the (very much appreciated) contributors
       who  reported  issues  to  the  Perl bug tracker. Noteworthy in this release were the large number of bug
       fixes made possible by Sergey Aleynikov's high quality  perlbug  reports  for  issues  he  discovered  by
       fuzzing with AFL.

       Many  of  the  changes  included  in this version originated in the CPAN modules included in Perl's core.
       We're grateful to the entire CPAN community for helping Perl to flourish.

       For a more complete list of all of Perl's historical contributors, please see the  <u>AUTHORS</u>  file  in  the
       Perl source distribution.

</pre><h4><b>Reporting</b> <b>Bugs</b></h4><pre>
       If  you  find  what  you think is a bug, you might check the perl bug database at &lt;https://rt.perl.org/&gt;.
       There may also be information at &lt;<a href="http://www.perl.org/">http://www.perl.org/</a>&gt;, the Perl Home Page.

       If you believe you have an unreported bug, please run the perlbug program included with your release.  Be
       sure to trim your bug down to a tiny but sufficient test case.  Your bug report, along with the output of
       "perl -V", will be sent off to <a href="mailto:perlbug@perl.org">perlbug@perl.org</a> to be analysed by the Perl porting team.

       If the bug you are reporting has security implications which make it inappropriate to send to a  publicly
       archived  mailing  list,  then see "SECURITY VULNERABILITY CONTACT INFORMATION" in perlsec for details of
       how to report the issue.

</pre><h4><b>Give</b> <b>Thanks</b></h4><pre>
       If you wish to thank the Perl 5 Porters for the work we had done in Perl 5, you can do so by running  the
       "perlthanks" program:

           perlthanks

       This will send an email to the Perl 5 Porters list with your show of thanks.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       The <u>Changes</u> file for an explanation of how to view exhaustive details on what changed.

       The <u>INSTALL</u> file for how to build Perl.

       The <u>README</u> file for general stuff.

       The <u>Artistic</u> and <u>Copying</u> files for copyright information.

perl v5.40.1                                       2025-07-25                                   <u><a href="../man1/PERL5300DELTA.1.html">PERL5300DELTA</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>