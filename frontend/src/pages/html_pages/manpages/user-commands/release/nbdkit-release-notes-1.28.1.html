<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>nbdkit-release-notes-1.28 - release notes for nbdkit 1.28</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/nbdkit">nbdkit_1.42.2-1ubuntu1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       nbdkit-release-notes-1.28 - release notes for nbdkit 1.28

</pre><h4><b>DESCRIPTION</b></h4><pre>
       These are the release notes for nbdkit stable release 1.28.  This describes the major changes since 1.26.

       nbdkit 1.28.0 was released on <b>23</b> <b>September</b> <b>2021</b>.

   <b>Security</b>
       <u>CVE-2021-3716</u> <u>reset</u> <u>structured</u> <u>replies</u> <u>on</u> <u>starttls</u>

       nbdkit was vulnerable to injected plaintext when upgrading to a secure connection.  For the full
       announcement see https://www.redhat.com/archives/libguestfs/2021-August/msg00083.html (Eric Blake).

       All past security issues and information about how to report new ones can be found in <b><a href="../man1/nbdkit-security.1.html">nbdkit-security</a></b>(1).

   <b>Plugins</b>
       <b><a href="../man1/nbdkit-data-plugin.1.html">nbdkit-data-plugin</a></b>(1) has new "le&lt;NN&gt;:" and "be&lt;NN&gt;:" prefixes for little and big endian words.  Also the
       plugin tries much harder to optimize expressions.  The test suite has been greatly expanded to catch
       potential regressions.

       <b><a href="../man1/nbdkit-floppy-plugin.1.html">nbdkit-floppy-plugin</a></b>(1) now allows you to reserve free space (Nolan Leake).

       <b><a href="../man1/nbdkit-ssh-plugin.1.html">nbdkit-ssh-plugin</a></b>(1) no longer references SHA1 host keys as part of the effort to remove insecure
       algorithms (Daniel Berrangé).

       <b><a href="../man1/nbdkit-vddk-plugin.1.html">nbdkit-vddk-plugin</a></b>(1) reports "can_flush" and "can_fua" based on what the version of VDDK supports.  New
       debug flag <u>-D</u> <u>vddk.stats=1</u> prints the amount of time spent in VDDK calls on exit which can be useful for
       profiling performance.

   <b>Filters</b>
       <b><a href="../man1/nbdkit-cow-filter.1.html">nbdkit-cow-filter</a></b>(1) and <b><a href="../man1/nbdkit-cache-filter.1.html">nbdkit-cache-filter</a></b>(1) no longer break up large read requests into page-sized
       requests.  In addition the default block size for both filters is now 64K.  Both changes greatly improve
       performance.

       <b><a href="../man1/nbdkit-cache-filter.1.html">nbdkit-cache-filter</a></b>(1) has a new "cache-on-read=/PATH" parameter allowing callers to enable and disable
       the cache-on-read feature at runtime.  Also there is a new "cache-min-block-size" parameter letting you
       select the block size at runtime (thanks Martin Kletzander).

       <b><a href="../man1/nbdkit-cow-filter.1.html">nbdkit-cow-filter</a></b>(1) has a new "cow-on-read" parameter which works similarly to the corresponding cache
       filter feature.  The new "cow-block-size" parameter lets you select the block size at runtime.

       <b><a href="../man1/nbdkit-cow-filter.1.html">nbdkit-cow-filter</a></b>(1) has less verbose debugging.  To restore the old debug output use <u>-D</u> <u>cow.verbose=1</u>

       <b><a href="../man1/nbdkit-delay-filter.1.html">nbdkit-delay-filter</a></b>(1) has new "delay-open" and "delay-close" parameters to inject delays when clients
       connect and disconnect.  Delay filter parameters are now parsed more accurately (thanks Ming Xie).

   <b>Language</b> <b>bindings</b>
       The OCaml bindings now call "caml_shutdown" when unloading the plugin.  This causes "Stdlib.at_exit"
       handlers to run correctly, closes file descriptors, releases dependent shared libraries and frees memory.
       Valgrind on OCaml plugins should not show any false positives about leaked memory.

       OCaml and Python bindings may now use the ".cleanup" method.

       References to Python 2 in <b><a href="../man3/nbdkit-python-plugin.3.html">nbdkit-python-plugin</a></b>(3) have been removed.

   <b>Server</b>
       Fix captive nbdkit $uri variable so when TLS is used the URI is constructed with the "nbds:" prefix.
       Additionally add a new variable $tls which can be used by the subprocess to tell if TLS is enabled.

       Debug messages are now printed atomically.  This means that debug messages are no longer broken up across
       multiple lines if there are other processes writing to stderr at the same time (which often happened when
       using captive nbdkit).

       Enhanced valgrind support (<u>./configure</u> <u>--enable-valgrind</u>) can now be enabled safely and with no
       performance impact even in production builds (Eric Blake).

   <b>API</b>
       Plugins or filters using "nbdkit_nanosleep" now don't hang if the client closes the socket abruptly
       (thanks Ming Xie).

   <b>Bug</b> <b>fixes</b>
       <b><a href="../man1/nbdkit-data-plugin.1.html">nbdkit-data-plugin</a></b>(1) and <b><a href="../man1/nbdkit-memory-plugin.1.html">nbdkit-memory-plugin</a></b>(1) using allocator=malloc no longer crash because of
       memory corruption in some corner cases (only seen on s390x, but could happen on other architectures).
       Meanwhile "allocator=zstd" no longer crashes when zeroing unallocated space.

   <b>Tests</b>
       Tests now use the new "GLIBC_TUNABLES" feature, replacing "MALLOC_CHECK_" on glibc ≥ 2.34 (thanks Eric
       Blake, Siddhesh Poyarekar).

   <b>Build</b>
       <u>configure.ac</u> now uses spaces consistently, and has been modernized to support the latest autotools (Eric
       Blake).

       <u>podwrapper.pl</u> has been unified (almost) with the copy in libnbd.

       Continue fuzzing using AFL++.  Updated the fuzzing documentation.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man1/nbdkit.1.html">nbdkit</a></b>(1).

</pre><h4><b>AUTHORS</b></h4><pre>
       Authors of nbdkit 1.28:

       Daniel P. Berrangé
       Eric Blake
       Martin Kletzander
       Nolan Leake
       Richard W.M. Jones

</pre><h4><b>COPYRIGHT</b></h4><pre>
       Copyright Red Hat

</pre><h4><b>LICENSE</b></h4><pre>
       Redistribution  and  use in source and binary forms, with or without modification, are permitted provided
       that the following conditions are met:

       •   Redistributions of source code must retain the above copyright notice, this list  of  conditions  and
           the following disclaimer.

       •   Redistributions in binary form must reproduce the above copyright notice, this list of conditions and
           the following disclaimer in the documentation and/or other materials provided with the distribution.

       •   Neither  the  name  of  Red  Hat  nor the names of its contributors may be used to endorse or promote
           products derived from this software without specific prior written permission.

       THIS SOFTWARE IS PROVIDED BY RED HAT AND CONTRIBUTORS ''AS IS'' AND ANY EXPRESS  OR  IMPLIED  WARRANTIES,
       INCLUDING,  BUT  NOT  LIMITED  TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
       PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL RED HAT OR CONTRIBUTORS BE LIABLE  FOR  ANY  DIRECT,  INDIRECT,
       INCIDENTAL,  SPECIAL,  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF
       SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
       ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT  LIABILITY,  OR  TORT  (INCLUDING  NEGLIGENCE  OR
       OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH
       DAMAGE.

nbdkit-1.42.2                                      2025-04-02                       <u><a href="../man1/nbdkit-release-notes-1.28.1.html">nbdkit-release-notes-1.28</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>