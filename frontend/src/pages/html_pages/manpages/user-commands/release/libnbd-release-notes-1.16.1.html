<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>libnbd-release-notes-1.16 - release notes for libnbd 1.16</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/libnbd-dev">libnbd-dev_1.22.0-1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       libnbd-release-notes-1.16 - release notes for libnbd 1.16

</pre><h4><b>DESCRIPTION</b></h4><pre>
       These are the release notes for libnbd stable release 1.16.  This describes the major changes since 1.14.

       libnbd 1.16.0 was released on <b>18</b> <b>April</b> <b>2023</b>.

   <b>Security</b>
       No security issues were found in this release.

       If you find a security issue, please read <u>SECURITY</u> in the source (online here:
       https://gitlab.com/nbdkit/libnbd/blob/master/SECURITY).  To find out about previous security issues in
       libnbd, see <b><a href="../man3/libnbd-security.3.html">libnbd-security</a></b>(3).

   <b>New</b> <b>APIs</b>
       New API <b><a href="../man3/nbd_supports_vsock.3.html">nbd_supports_vsock</a></b>(3) can be used to test if the client has vsock support (Eric Blake).

       New API <b><a href="../man3/nbd_poll2.3.html">nbd_poll2</a></b>(3) which allows an extra file descriptor to be passed in (Ming Lei).

       New <b><a href="../man3/nbd_stats_bytes_sent.3.html">nbd_stats_bytes_sent</a></b>(3), <b><a href="../man3/nbd_stats_bytes_received.3.html">nbd_stats_bytes_received</a></b>(3), <b><a href="../man3/nbd_stats_chunks_sent.3.html">nbd_stats_chunks_sent</a></b>(3) and
       <b><a href="../man3/nbd_stats_chunks_received.3.html">nbd_stats_chunks_received</a></b>(3) APIs which expose the number of bytes and messages sent and received on the
       current connection (Eric Blake).

       New <b><a href="../man3/nbd_opt_list_meta_context_queries.3.html">nbd_opt_list_meta_context_queries</a></b>(3) and <b><a href="../man3/nbd_aio_opt_list_meta_context_queries.3.html">nbd_aio_opt_list_meta_context_queries</a></b>(3) APIs allow you to
       query the available meta contexts interactively with the server during the negotiation phase of the
       protocol (Eric Blake).

       New <b><a href="../man3/nbd_set_request_meta_context.3.html">nbd_set_request_meta_context</a></b>(3) lets you control whether the meta context is set during negotiation.
       This can make certain operations faster, especially "nbdinfo --list".  (Eric Blake)

       New <b><a href="../man3/nbd_opt_set_meta_context.3.html">nbd_opt_set_meta_context</a></b>(3), <b><a href="../man3/nbd_opt_set_meta_context_queries.3.html">nbd_opt_set_meta_context_queries</a></b>(3), <b><a href="../man3/nbd_aio_opt_set_meta_context.3.html">nbd_aio_opt_set_meta_context</a></b>(3) and
       <b><a href="../man3/nbd_aio_opt_set_meta_context_queries.3.html">nbd_aio_opt_set_meta_context_queries</a></b>(3) APIs let you request meta contexts when using <b><a href="../man3/nbd_set_opt_mode.3.html">nbd_set_opt_mode</a></b>(3)
       (Eric Blake).

       New <b><a href="../man3/nbd_opt_structured_reply.3.html">nbd_opt_structured_reply</a></b>(3) and <b><a href="../man3/nbd_aio_opt_structured_reply.3.html">nbd_aio_opt_structured_reply</a></b>(3) APIs let you fine-tune when
       structured replies are requested during the negotiation phase (Eric Blake).

       New <b><a href="../man3/nbd_opt_starttls.3.html">nbd_opt_starttls</a></b>(3) and <b><a href="../man3/nbd_aio_opt_starttls.3.html">nbd_aio_opt_starttls</a></b>(3) APIs let you fine-tune when STARTTLS is negotiated
       (Eric Blake).

       New <b><a href="../man3/nbd_set_socket_activation_name.3.html">nbd_set_socket_activation_name</a></b>(3) and <b><a href="../man3/nbd_get_socket_activation_name.3.html">nbd_get_socket_activation_name</a></b>(3) APIs which allow you to name
       the socket used for socket activation.  Certain servers such as qemu-storage-daemon will use this name on
       the command line and in scripts.  (Thanks Laszlo Ersek).

   <b>Enhancements</b> <b>to</b> <b>existing</b> <b>APIs</b>
       <b><a href="../man3/nbd_connect_command.3.html">nbd_connect_command</a></b>(3) called with NULL argv parameter previously crashed, but now returns an error (Eric
       Blake).

       <b><a href="../man3/nbd_opt_list_meta_context.3.html">nbd_opt_list_meta_context</a></b>(3) can now be called without having negotiated structured replies (Eric Blake).

       <b><a href="../man3/nbd_set_strict_mode.3.html">nbd_set_strict_mode</a></b>(3) has a new "LIBNBD_STRICT_PAYLOAD" flag which can be used to control whether send
       oversize messages, in order to test servers (Eric Blake).

       C API pointer parameters that cannot be NULL are now annotated with "attribute((nonnull))" (if the
       compiler supports it) so that you will get a compile time warning if they are used improperly (thanks
       Eric Blake).

       C APIs which allocate are now marked with "attribute((malloc))" and similar attributions to improve
       static analysis of programs using libnbd (Eric Blake).

       C APIs expressing flag values now use unsigned types, removing some undefined corner-cases with bitwise
       math on signed ints.  This change is API and ABI backwards compatible.  (Eric Blake)

   <b>Tools</b>
       New <b><a href="../man1/nbdublk.1.html">nbdublk</a></b>(1) program which is used to create a Linux <u>/dev/ublkb&lt;N&gt;</u> block device from an NBD server
       (thanks Ming Lei).

       <b><a href="../man1/nbdinfo.1.html">nbdinfo</a></b>(1) now has colorized output (use <u>--no-color</u> to disable).

       nbdinfo has new <u>--is</u> <u>tls</u> and <u>--can</u> <u>structured-reply</u> options to let you test for these features on the
       server (Eric Blake).

       <b><a href="../man1/nbdcopy.1.html">nbdcopy</a></b>(1) now writes progress messages to stderr (previously they were written to <u>/dev/tty</u>).  This makes
       it consistent with other tools like dd.  (Eric Blake).

       <b><a href="../man1/nbdsh.1.html">nbdsh</a></b>(1) options <u>-c</u> and <u>-u</u> can now be interleaved, making it easier to toggle optional URI features (Eric
       Blake).

   <b>Language</b> <b>bindings</b>
       Documentation for the OCaml bindings now includes parameter names.

       The OCaml bindings now return OCaml error values in exceptions instead of raw C errno numbers.

       OCaml bindings now support <b><a href="../man3/nbd_aio_connect.3.html">nbd_aio_connect</a></b>(3) which uses the sockaddr type directly.

       The Python bindings now have an explicit "h.close()" method.  Letting the handle go out of scope still
       works for closing the handle, but now you have the choice to explicitly close the handle before it goes
       out of scope.  If you try to use the handle after closing it, a new "nbd.ClosedHandle" exception will be
       thrown.

       The Python bindings now provide a contextlib decorated function, so you can write the more natural
       "with nbd.nbd() as h: ..."

   <b>Tests</b>
       Wider CI coverage (Eric Blake).

   <b>Other</b> <b>improvements</b> <b>and</b> <b>bug</b> <b>fixes</b>
       The state machine can now cope with and recover from some bad structured reply messages and unknown
       cookies sent by the server (Eric Blake).

       The library is now annotated with "-z nodelete", preventing it from being "really" unloaded when you call
       <b><a href="../man3/dlclose.3.html">dlclose</a></b>(3).  This is the only way to prevent a crash in multi-threaded code.  See commit 368e3d0d5a887
       for details.

       Improve debugging when the handle enters the %DEAD state.

       The library is now much more POSIX-compliant and resilient when running subcommands, no longer relying on
       quirks of the glibc implementation of execvp and other non-async-signal-safe functions (Laszlo Ersek).

       Source files reformatted to use ≤ 80 columns (Laszlo Ersek).

   <b>Build</b>
       Fix build on Alpine Linux + musl which declares "AF_VSOCK" but does not define the associated structures
       (Eric Blake).

       Python distutils, deprecated in Python ≥ 3.10, has been replaced by sysconfig (thanks Miro Hrončok).

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man3/libnbd.3.html">libnbd</a></b>(3).

</pre><h4><b>AUTHORS</b></h4><pre>
       Daniel P. Berrangé
       Eric Blake
       Laszlo Ersek
       Ming Lei
       Richard W.M. Jones

</pre><h4><b>COPYRIGHT</b></h4><pre>
       Copyright Red Hat

</pre><h4><b>LICENSE</b></h4><pre>
       This library is free software; you can redistribute it and/or modify it under the terms of the GNU Lesser
       General  Public License as published by the Free Software Foundation; either version 2 of the License, or
       (at your option) any later version.

       This library is distributed in the hope that it will be useful, but WITHOUT ANY  WARRANTY;  without  even
       the  implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU Lesser General
       Public License for more details.

       You should have received a copy of the GNU Lesser General Public License along with this library; if not,
       write to the Free Software Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA

libnbd-1.22.0                                      2025-02-12                       <u><a href="../man1/libnbd-release-notes-1.16.1.html">libnbd-release-notes-1.16</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>