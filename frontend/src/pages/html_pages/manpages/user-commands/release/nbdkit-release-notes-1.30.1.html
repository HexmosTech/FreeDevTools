<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>nbdkit-release-notes-1.30 - release notes for nbdkit 1.30</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/nbdkit">nbdkit_1.42.2-1ubuntu1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       nbdkit-release-notes-1.30 - release notes for nbdkit 1.30

</pre><h4><b>DESCRIPTION</b></h4><pre>
       These are the release notes for nbdkit stable release 1.30.  This describes the major changes since 1.28.

       nbdkit 1.30.0 was released on <b>24</b> <b>February</b> <b>2022</b>.

   <b>Security</b>
       There were no security issues found.  All past security issues and information about how to report new
       ones can be found in <b><a href="../man1/nbdkit-security.1.html">nbdkit-security</a></b>(1).

   <b>Plugins</b>
       <b>nbdkit-streaming-plugin</b> has been removed.  It was deprecated in 1.26 and scheduled for removal in this
       release.  If you were using this plugin, use <b><a href="../man1/nbdcopy.1.html">nbdcopy</a></b>(1) instead.

       <b><a href="../man1/nbdkit-vddk-plugin.1.html">nbdkit-vddk-plugin</a></b>(1) has several changes:

       •   This  plugin  can  now  create  (as  well  as  reading  and  writing)  local VMDK files.  See the new
           "create=true" option and the various "create-*" options.

       •   Read and write is now implemented using the VDDK Async functions, which  improves  performance.   The
           full nbdkit parallel thread model is supported.

       •   VDDK ≥ 6.5 (released Nov 2016) is now the minimum required version.

       •   Stats  collected  when  using <u>-D</u> <u>vddk.stats=1</u> have been extended to include number of calls and bytes
           transferred.

       •   <u>--dump-plugin</u> output now includes the VDDK major version and information about each VDDK API that  is
           implemented by the library.

       •   A  new  example  <u>scripts/vddk-open.sh</u>  is provided to help with automating connections to remote ESXi
           virtual machines.

       <b><a href="../man1/nbdkit-curl-plugin.1.html">nbdkit-curl-plugin</a></b>(1) adds support for choosing TLS/SSL versions and ciphers and TLS 1.3 cipher  versions
       (Przemyslaw Czarnowski).

       <b><a href="../man1/nbdkit-file-plugin.1.html">nbdkit-file-plugin</a></b>(1)  now  implements  "cache=none"  for  writes  so  that  the  Linux page cache is not
       destroyed when writing huge files.

       <b><a href="../man1/nbdkit-cc-plugin.1.html">nbdkit-cc-plugin</a></b>(1) now implements the ".cleanup" callback.  Also we document how to use this  plugin  to
       implement OCaml plugin scripts.

       <b><a href="../man1/nbdkit-info-plugin.1.html">nbdkit-info-plugin</a></b>(1)  <u>--dump-plugin</u>  option  now  prints  "info_address=yes"  when the platform supports
       "mode=address".

   <b>Filters</b>
       New <b><a href="../man1/nbdkit-retry-request-filter.1.html">nbdkit-retry-request-filter</a></b>(1), which is similar to <b><a href="../man1/nbdkit-retry-filter.1.html">nbdkit-retry-filter</a></b>(1) but only retries a  single
       failing request.

       New <b><a href="../man1/nbdkit-protect-filter.1.html">nbdkit-protect-filter</a></b>(1) lets you add write-protection over regions of a plugin.

       New  <b><a href="../man1/nbdkit-blocksize-policy-filter.1.html">nbdkit-blocksize-policy-filter</a></b>(1)  lets  you  adjust or set the block size constraints and policy of
       underlying plugins.  See "API" below.

       <b><a href="../man1/nbdkit-cow-filter.1.html">nbdkit-cow-filter</a></b>(1) now permits the COW block size to be set as small as 4096 bytes.

       Debug messages in <b><a href="../man1/nbdkit-error-filter.1.html">nbdkit-error-filter</a></b>(1) are now easier to read  because  they  no  longer  all  have  an
       "error:" prefix (Eric Blake).

   <b>Language</b> <b>bindings</b>
       For  plugins  written  in  OCaml the minimum version of OCaml is now 4.03 (instead of 4.02.2 previously).
       Various source-level incompatible changes were made to OCaml plugins in this release.  Please consult the
       new documentation and example if writing plugins in OCaml.

       OCaml plugins now support "magic_config_key".

       Several fixes to the handling of integers in Python plugins (Nir Soffer).

       New Python example which simulates request errors (Nir Soffer).

   <b>Server</b>
       The server no longer requests the "AI_ADDRCONFIG" hint when  opening  a  server  socket.   This  improves
       handling of IPv6.  In a related change, the <u>-i</u> (<u>--ipaddr</u>) option now works as intended, and new <u>-4</u> and <u>-6</u>
       options have been added to restrict the listening socket to IPv4 or IPv6 addresses (Laszlo Ersek).

   <b>API</b>
       There  is  a  new  ".block_size" callback for plugins and filters.  nbdkit uses this to export block size
       constraints to clients, specifically the minimum, preferred and maximum block size  that  clients  should
       use.

       As  well  as  regular  C  plugins,  <b><a href="../man3/nbdkit-cc-plugin.3.html">nbdkit-cc-plugin</a></b>(3),  <b><a href="../man1/nbdkit-eval-plugin.1.html">nbdkit-eval-plugin</a></b>(1),  <b><a href="../man3/nbdkit-ocaml-plugin.3.html">nbdkit-ocaml-plugin</a></b>(3),
       <b><a href="../man3/nbdkit-python-plugin.3.html">nbdkit-python-plugin</a></b>(3) and <b><a href="../man3/nbdkit-sh-plugin.3.html">nbdkit-sh-plugin</a></b>(3) support  block  size  constraints.   <b><a href="../man1/nbdkit-nbd-plugin.1.html">nbdkit-nbd-plugin</a></b>(1)
       reexports  block  size  constraints  from the proxied NBD server.  <b><a href="../man1/nbdkit-vddk-plugin.1.html">nbdkit-vddk-plugin</a></b>(1) now advertises a
       minimum 512 byte block size.

       <b><a href="../man1/nbdkit-blocksize-filter.1.html">nbdkit-blocksize-filter</a></b>(1), <b><a href="../man1/nbdkit-cache-filter.1.html">nbdkit-cache-filter</a></b>(1), <b><a href="../man1/nbdkit-cow-filter.1.html">nbdkit-cow-filter</a></b>(1) and <b><a href="../man1/nbdkit-swab-filter.1.html">nbdkit-swab-filter</a></b>(1) adjust
       block size constraints from plugins (Eric Blake).

       <b><a href="../man1/nbdkit-blocksize-filter.1.html">nbdkit-blocksize-filter</a></b>(1) can also use the block size hints from the plugin instead  of  needing  manual
       adjustment on the command line.  <b><a href="../man1/nbdkit-log-filter.1.html">nbdkit-log-filter</a></b>(1) logs block size constraints (Eric Blake).

       <b><a href="../man1/nbdkit-blocksize-policy-filter.1.html">nbdkit-blocksize-policy-filter</a></b>(1)  can  be  used  to  add  block  size constraints to plugins which don't
       support it, or adjust constraints, or set the error policy.

   <b>Bug</b> <b>fixes</b>
       <b><a href="../man1/nbdkit-memory-plugin.1.html">nbdkit-memory-plugin</a></b>(1)  (and  others),  using  "allocator=malloc,mlock=true"  was  broken.    This   was
       especially evident on non-Linux or on Linux with 64K pages (eg. POWER).  It should now work correctly.

   <b>Tests</b>
       "./configure  --disable-libguestfs-tests" can now be used to disable tests which need libguestfs, without
       disabling <b><a href="../man1/nbdkit-guestfs-plugin.1.html">nbdkit-guestfs-plugin</a></b>(1).

       We now use <b><a href="../man8/mke2fs.8.html">mke2fs</a></b>(8) instead of <b><a href="../man1/guestfish.1.html">guestfish</a></b>(1) to create the ext4 test image.  On  armv7  this  allows  the
       test suite to run much more quickly.

       The time taken to run the test suite has been reduced significantly.

   <b>Build</b>
       Multiple  fixes  to  the  Windows  (MinGW)  build.   The test suite should now pass fully if you have the
       version of Wine with the unofficial "AF_UNIX" patch.

       The top level <u>bash</u> source directory has been renamed to <u>bash-completion</u>.   This  prevents  problems  when
       setting $PATH to the source directory and trying to run bash.

   <b>Internals</b>
       The  performance  of  the  internal  vector library has been improved greatly and overflow is now handled
       correctly (Nir Soffer, Laszlo Ersek and Eric Blake).

       New "nbdkit-string.h" header file which defines a common string type (based on vector).  Existing  places
       which defined a string based on vector have been updated to use it.

       "MIN" and "MAX" macros can be nested (thanks Eric Blake).

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man1/nbdkit.1.html">nbdkit</a></b>(1).

</pre><h4><b>AUTHORS</b></h4><pre>
       Authors of nbdkit 1.30:

       Alan Somers
       Eric Blake
       Hilko Bengen
       Laszlo Ersek
       Nir Soffer
       Przemyslaw Czarnowski
       Richard W.M. Jones

</pre><h4><b>COPYRIGHT</b></h4><pre>
       Copyright Red Hat

</pre><h4><b>LICENSE</b></h4><pre>
       Redistribution  and  use in source and binary forms, with or without modification, are permitted provided
       that the following conditions are met:

       •   Redistributions of source code must retain the above copyright notice, this list  of  conditions  and
           the following disclaimer.

       •   Redistributions in binary form must reproduce the above copyright notice, this list of conditions and
           the following disclaimer in the documentation and/or other materials provided with the distribution.

       •   Neither  the  name  of  Red  Hat  nor the names of its contributors may be used to endorse or promote
           products derived from this software without specific prior written permission.

       THIS SOFTWARE IS PROVIDED BY RED HAT AND CONTRIBUTORS ''AS IS'' AND ANY EXPRESS  OR  IMPLIED  WARRANTIES,
       INCLUDING,  BUT  NOT  LIMITED  TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
       PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL RED HAT OR CONTRIBUTORS BE LIABLE  FOR  ANY  DIRECT,  INDIRECT,
       INCIDENTAL,  SPECIAL,  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF
       SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
       ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT  LIABILITY,  OR  TORT  (INCLUDING  NEGLIGENCE  OR
       OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH
       DAMAGE.

nbdkit-1.42.2                                      2025-04-02                       <u><a href="../man1/nbdkit-release-notes-1.30.1.html">nbdkit-release-notes-1.30</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>