<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>virt-format - Erase and make a blank disk</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/guestfs-tools">guestfs-tools_1.52.2-4ubuntu1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       virt-format - Erase and make a blank disk

</pre><h4><b>SYNOPSIS</b></h4><pre>
        virt-format [--options] -a disk.img [-a disk.img ...]

</pre><h4><b>WARNING</b></h4><pre>
       Using "virt-format" on live virtual machines, or concurrently with other disk editing tools, can be
       dangerous, potentially causing disk corruption.  The virtual machine must be shut down before you use
       this command, and disk images must not be edited concurrently.

</pre><h4><b>DESCRIPTION</b></h4><pre>
       Virt-format takes an existing disk file (or it can be a host partition, LV etc), <b>erases</b> <b>all</b> <b>data</b> <b>on</b> <b>it</b>,
       and formats it as a blank disk.  It can optionally create partition tables, empty filesystems, logical
       volumes and more.

       To create a disk containing data, you may be better to use <b><a href="../man1/virt-make-fs.1.html">virt-make-fs</a></b>(1).  If you are creating a blank
       disk to use in <b><a href="../man1/guestfish.1.html">guestfish</a></b>(1), you should instead use the guestfish <u>-N</u> option.

       Normal usage would be something like this:

        virt-format -a disk.qcow

       or this:

        virt-format -a /dev/VG/LV

       <u>disk.qcow</u> or <u>/dev/VG/LV</u> must exist already.  <b>Any</b> <b>data</b> <b>on</b> <b>these</b> <b>disks</b> <b>will</b> <b>be</b> <b>erased</b> <b>by</b> <b>these</b> <b>commands</b>.
       These commands will create a single empty partition covering the whole disk, with no filesystem inside
       it.

       Additional parameters can be used to control the creation of partitions, filesystems, etc.  The most
       commonly used options are:

       <b>--filesystem=[ext3|ntfs|vfat|...]</b>
           Create an empty filesystem ("ext3", "ntfs" etc) inside the partition.

       <b>--lvm[=/dev/VG/LV]</b>
           Create  a  Linux  LVM2  logical  volume  on the disk.  When used with <u>--filesystem</u>, the filesystem is
           created inside the LV.

       For more information about these and other options, see "OPTIONS" below.

       The format of the disk is normally auto-detected, but you can also force it by using the <u>--format</u>  option
       (q.v.).   In  situations where you do not trust the existing content of the disk, then it is advisable to
       use this option to avoid possible exploits.

</pre><h4><b>OPTIONS</b></h4><pre>
       <b>--help</b>
           Display brief help.

       <b>-a</b> file
       <b>--add</b> file
           Add <u>file</u>, a disk image, host partition, LV, external USB disk, etc.

           The format of the disk image is auto-detected.  To override this and force a  particular  format  use
           the <u>--format=..</u> option.

           <b>Any</b> <b>existing</b> <b>data</b> <b>on</b> <b>the</b> <b>disk</b> <b>is</b> <b>erased.</b>

       <b>-a</b> URI
       <b>--add</b> URI
           Add a remote disk.  See "ADDING REMOTE STORAGE" in <b><a href="../man1/guestfish.1.html">guestfish</a></b>(1).

       <b>--blocksize=512</b>
       <b>--blocksize=4096</b>
       <b>--blocksize</b>
           This  parameter  sets  the sector size of the disk image.  It affects all explicitly added subsequent
           disks after this parameter.  Using <u>--blocksize</u> with no argument switches the disk sector size to  the
           default value which is usually 512 bytes.  See also "guestfs_add_drive_opts" in <b><a href="../man3/guestfs.3.html">guestfs</a></b>(3).

       <b>--filesystem=ext3|ntfs|vfat|...</b>
           Create an empty filesystem of the specified type.  Many filesystem types are supported by libguestfs.

       <b>--filesystem=none</b>
           Create no filesystem.  This is the default.

       <b>--format=raw|qcow2|..</b>
       <b>--format</b>
           The  default for the <u>-a</u> option is to auto-detect the format of the disk image.  Using this forces the
           disk format for <u>-a</u> options which follow on  the  command  line.   Using  <u>--format</u>  with  no  argument
           switches back to auto-detection for subsequent <u>-a</u> options.

           For example:

            virt-format --format=raw -a disk.img

           forces raw format (no auto-detection) for <u>disk.img</u>.

            virt-format --format=raw -a disk.img --format -a another.img

           forces raw format (no auto-detection) for <u>disk.img</u> and reverts to auto-detection for <u>another.img</u>.

           If  you  have  untrusted raw-format guest disk images, you should use this option to specify the disk
           format.  This avoids a possible security problem with malicious guests (CVE-2010-3851).

       <b>--label=</b>LABEL
           Set the filesystem label.

       <b>--lvm=<a href="file:/dev/">/dev/</a></b><u><b>VG</b></u><b>/</b><u><b>LV</b></u>
           Create a Linux LVM2 logical volume called <u>/dev/VG/LV</u>.  You can change the name of  the  volume  group
           and logical volume.

       <b>--lvm</b>
           Create a Linux LVM2 logical volume with the default name (<u>/dev/VG/LV</u>).

       <b>--lvm=none</b>
           Create no logical volume.  This is the default.

       <b>--partition</b>
           Create either an MBR or GPT partition covering the whole disk.  MBR is chosen if the disk size is &lt; 2
           TB, GPT if ≥ 2 TB.

           This is the default.

       <b>--partition=gpt</b>
           Create a GPT partition.

       <b>--partition=mbr</b>
           Create an MBR partition.

       <b>--partition=none</b>
           Create no partition table.  Note that Windows may not be able to see these disks.

       <b>-v</b>
       <b>--verbose</b>
           Enable verbose messages for debugging.

       <b>-V</b>
       <b>--version</b>
           Display version number and exit.

       <b>--wipe</b>
           Normally  virt-format  does  not  wipe  data from the disk (because that takes a long time).  Thus if
           there is data on the disk, it is only hidden and partially overwritten by virt-format, and  it  might
           be recovered by disk editing tools.

           If  you  use  this option, virt-format writes zeroes over the whole disk so that previous data is not
           recoverable.

       <b>-x</b>  Enable tracing of libguestfs API calls.

</pre><h4><b>EXIT</b> <b>STATUS</b></h4><pre>
       This program returns 0 on success, or 1 on failure.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man3/guestfs.3.html">guestfs</a></b>(3),   <b><a href="../man1/guestfish.1.html">guestfish</a></b>(1),   <b><a href="../man1/virt-filesystems.1.html">virt-filesystems</a></b>(1),   <b><a href="../man1/virt-make-fs.1.html">virt-make-fs</a></b>(1),   <b><a href="../man1/virt-rescue.1.html">virt-rescue</a></b>(1),   <b><a href="../man1/virt-resize.1.html">virt-resize</a></b>(1),
       <a href="http://libguestfs.org/">http://libguestfs.org/</a>.

</pre><h4><b>AUTHOR</b></h4><pre>
       Richard W.M. Jones <a href="http://people.redhat.com/~rjones/">http://people.redhat.com/~rjones/</a>

</pre><h4><b>COPYRIGHT</b></h4><pre>
       Copyright (C) 2012 Red Hat Inc.

</pre><h4><b>LICENSE</b></h4><pre>
       This  program  is  free  software;  you  can  redistribute it and/or modify it under the terms of the GNU
       General Public License as published by the Free Software Foundation; either version 2 of the License,  or
       (at your option) any later version.

       This  program  is  distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even
       the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General  Public
       License for more details.

       You  should have received a copy of the GNU General Public License along with this program; if not, write
       to the Free Software Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA.

</pre><h4><b>BUGS</b></h4><pre>
       To     get      a      list      of      bugs      against      libguestfs,      use      this      link:
       https://bugzilla.redhat.com/buglist.cgi?component=libguestfs&amp;product=Virtualization+Tools

       To       report       a       new       bug       against       libguestfs,      use      this      link:
       https://bugzilla.redhat.com/enter_bug.cgi?component=libguestfs&amp;product=Virtualization+Tools

       When reporting a bug, please supply:

       •   The version of libguestfs.

       •   Where you got libguestfs (eg. which Linux distro, compiled from source, etc)

       •   Describe the bug accurately and give a way to reproduce it.

       •   Run <b><a href="../man1/libguestfs-test-tool.1.html">libguestfs-test-tool</a></b>(1) and paste the <b>complete,</b> <b>unedited</b> output into the bug report.

guestfs-tools-1.52.2                               2025-02-04                                     <u><a href="../man1/virt-format.1.html">virt-format</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>