<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>dh_cme_upgrade - add cme based configuration merge</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/cme">cme_1.041-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       dh_cme_upgrade - add cme based configuration merge

</pre><h4><b>VERSION</b></h4><pre>
       version 1.041

</pre><h4><b>SYNOPSIS</b></h4><pre>
        dh_cme_upgrade [ debhelper options ] [ -p pkg ]

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>dh_cme_upgrade</b> <b>is</b> <b>experimental</b>

       dh_cme_upgrade is a debhelper that will modify the package script to merge configuration on package
       upgrade. This merge is based on cme from Config::Model and will merge user's customisations with
       maintainer's configuration updates. This provides another way to preserve users modifications during
       upgrades.

       Configuration information used by cme for upgrade are specified in a configuration file (see below)

       Configuration information is specified in a configuration model. It must be provided by another package
       like "libconfig-model-lcdproc-perl"

</pre><h4><b>REQUIREMENTS</b></h4><pre>
       For this program to work, package maintainer must make sure that:

       •   "*.postinst", "*.postrm" and "*.config" have a "#DEBHELPER#"  line (if these files exist)

       •   "control" file has a dependency on "${misc:Depends}"

       •   Configuration  files upgraded by "cme" must not be conffiles. Any default configuration file provided
           by upstream must not be installed directly in "<a href="file:/etc">/etc</a>". They should be installed  in  "<a href="file:/usr/share/doc/">/usr/share/doc/</a>"
           for reference. "cme" will create a default configuration file during package installation.

</pre><h4><b>OPTIONS</b></h4><pre>
       This  program accepts all debhelper options, including the "-p" option to specify which package(s) to act
       on.

</pre><h4><b>Usage</b></h4><pre>
       "dh_cme_upgrade" is designed be called in the rules file via the dh command:

        %:
          dh --with cme_upgrade

       No  options  can  be   passed   to   "dh_cme_upgrade".   Its   configuration   must   be   specified   in
       "debian/*.config_model" file. This file contains several lines, each in the form of "key: value".

       Here are the possible keys:

       cme-app-name
           Specifies  the  application  or  model  name  (à la "Config::Model") that will be used to perform the
           upgrade. (mandatory)

       cme-model-package
           Specifies the debian package that provide the model specified by "cme-app-name". (mandatory)

       cme-model-version
           Specifies the minimal version of the package that provides the model.  (optional)

       cme-command
           Specify the command passed to cme. Defaults to "migrate". Another useful value is  "fix"  which  will
           migrate and fix the configuration file.

       cme-options
           Specify a list of options or command that will be passed verbatim to cme during upgrade. (optional)

       cme-purge
           Specify  the  configuration  files  or  directory  to  be  removed  when  purging  the  package.  E.g
           "/etc/LCDd.conf*" or "/etc/java/". Several files or directory can be purged by using  a  shell  glob.
           If this option is empty, configuration files handled by cme will be left as-is after a purge.

       cme-conf-target
           Specifies  where  the  target  configuration files is expected. Defaults to "<a href="file:/etc">/etc</a>". This parameter is
           used to create a message to inform user who don't want automatic upgrade where to find  the  original
           configuration file (in "/usr/share/doc/package_name") and where to copy it (in "/cme-conf-target").

       Alternatively,  since  cme/1.030-1  you  can  just  build  depend on <b>dh-sequence-cme-upgrade</b> and omit the
       "--with cme_upgrade" part.

</pre><h4><b>Examples</b></h4><pre>
       Here's a possible configuration for openssh server:

        $ cat debian/openssh-server.config-model
        cme-app-name: sshd
        cme-model-package: lib-config-model-openssh-perl
        cme-model-version: 1.206

       For lcdproc:

        $ cat debian/lcdproc.config-model
        cme-app-name: lcdproc
        cme-package: libconfig-model-lcdproc-perl
        cme-model-version: 2.040
        # required to upgrade LCDd.conf from upstream configuration
        cme-options: -force
        cme-purge: /etc/LCDd.conf*

       For Popcon:

        $ cat debian/popcon.config-model
        cme-app-name: popcon
        cme-model-package: libconfig-model-perl

</pre><h4><b>debian</b> <b>files</b> <b>setup</b></h4><pre>
       "dh_cme_upgrade" will work only if:

       •   "control" file contains a "${misc:Depends}" variable in "Depends" line

       •   If present, "postinst" script contains a "#DEBHELPER#" line to insert generated postinst snippet

</pre><h4><b>ENVIRONMENT</b></h4><pre>
       This program will <b><a href="../man0/exit.0.html">exit</a></b>(0) if "DH_NO_ACT" is set or if "DEB_BUILD_OPTIONS" contains "noconfigmodel".

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       debhelper

       This program is an addendum to debhelper (part of libconfig-model-perl).

</pre><h4><b>AUTHOR</b></h4><pre>
       Dominique Dumont &lt;<a href="mailto:dod@debian.org">dod@debian.org</a>&gt;

</pre><h4><b>AUTHOR</b></h4><pre>
       Dominique Dumont

</pre><h4><b>COPYRIGHT</b> <b>AND</b> <b>LICENSE</b></h4><pre>
       This software is Copyright (c) 2014-2022 by Dominique Dumont &lt;<a href="mailto:ddumont@cpan.org">ddumont@cpan.org</a>&gt;.

       This is free software, licensed under:

         The GNU Lesser General Public License, Version 2.1, February 1999

perl v5.40.0                                       2024-12-01                                 <u><a href="../man1p/DH_CME_UPGRADE.1p.html">DH_CME_UPGRADE</a></u>(1p)
</pre>
 </div>
</div></section>
</div>
</body>
</html>