<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>gensquashfs - generate squashfs images</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/squashfs-tools-ng">squashfs-tools-ng_1.3.2-1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       gensquashfs - generate squashfs images

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>gensquashfs</b> [<u>OPTIONS</u>] &lt;squashfs-file&gt;

</pre><h4><b>DESCRIPTION</b></h4><pre>
       Generate a SquashFS image.

</pre><h4><b>OPTIONS</b></h4><pre>
       <b>--pack-file</b>, <b>-F</b> &lt;file&gt;
              Use  a  <b>gen_init_cpio</b> style description file. The file format is specified below. If <b>--pack-dir</b> is
              used, input file paths are relative to the pack directory, otherwise  they  are  relative  to  the
              directory the pack file is in.

       <b>--pack-dir</b>, <b>-D</b> &lt;directory&gt;
              If  <b>--pack-file</b> is used, this is the root path relative to which to read files. If no pack file is
              specified, pack the contents of the given directory into a SquashFS image. The  directory  becomes
              the root of the file system.

       <b>--sort-file</b>, <b>-S</b> &lt;file&gt;
              Specify  a  file  that  can  override the order in which input files are packed, or affect packing
              behaviour (e.g. disable compression or fragmentation for certain files).

       <b>--compressor</b>, <b>-c</b> &lt;name&gt;
              Select the compressor to use.  Run <b>gensquashfs</b> <b>--help</b> to get a list of all  available  compressors
              and the default selection.

       <b>--comp-extra</b>, <b>-X</b> &lt;options&gt;
              A comma separated list of extra options for the selected compressor. Specify <b>help</b> to get a list of
              available options.

       <b>--num-jobs</b>, <b>-j</b> &lt;count&gt;
              If  libsquashfs  was  compiled  with  a built in thread pool based, parallel data compressor, this
              option can be used to set the number of compressor threads. If not set, the default is the  number
              of available CPU cores.

       <b>--queue-backlog</b>, <b>-Q</b> &lt;count&gt;
              Maximum  number of data blocks in the thread worker queue before the packer starts waiting for the
              block processors to catch up. Higher values result in higher memory consumption.  Defaults  to  10
              times the number of workers.

       <b>--block-size</b>, <b>-b</b> &lt;size&gt;
              Block size to use for Squashfs image.  Defaults to 131072.

       <b>--dev-block-size</b>, <b>-B</b> &lt;size&gt;
              Device block size to padd the image to.  Defaults to 4096.

       <b>--keep-time</b>, <b>-k</b>
              When using <b>--pack-dir</b> only, use the timestamps from the input files instead of setting defaults on
              all  input paths. The root inode and the modification time on the SquashFS image itself will still
              be set to defaults.

       <b>--one-file-system</b>, <b>-o</b>
              When using <b>--pack-dir</b> only, stay in the local filesystem and do not cross mount points.

       <b>--defaults</b>, <b>-d</b> &lt;options&gt;
              A comma separated list of default values for implicitly created directories.  The following values
              can be set:
              ┌───────────────┬────────────────────────────────────────┐
              │ <b>Option</b>        │ <b>Default</b>                                │
              ├───────────────┼────────────────────────────────────────┤
              │ uid=&lt;value&gt;   │ 0                                      │
              ├───────────────┼────────────────────────────────────────┤
              │ gid=&lt;value&gt;   │ 0                                      │
              ├───────────────┼────────────────────────────────────────┤
              │ mode=&lt;value&gt;  │ 0755                                   │
              ├───────────────┼────────────────────────────────────────┤
              │ mtime=&lt;value&gt; │ <b>$SOURCE_DATE_EPOCH</b> if set, 0 otherwise │
              └───────────────┴────────────────────────────────────────┘

       <b>--set-uid</b>, <b>-u</b> &lt;number&gt;
              Force the owners user ID for ALL inodes to this value, no matter what the pack file  or  directory
              entries actually specify.

       <b>--set-gid</b>, <b>-g</b> &lt;number&gt;
              Force  the owners group ID for ALL inodes to this value, no matter what the pack file or directory
              entries actually specify.

       <b>--all-root</b>
              A short hand for `--set-uid 0 --set-gid 0`.

       <b>--selinux</b>, <b>-s</b> &lt;file&gt;
              If built with SELinux support, use the given SELinux label file  to  add  context  labels  to  the
              elements packed into the SquashFS image.

       <b>--xattr-file</b>, <b>-A</b> &lt;file&gt;
              Read extended attributes from a file. The format for the file is identical to the output generated
              by `<b>getfattr</b> <b>--dump</b>`.

       <b>--exportable</b>, <b>-e</b>
              Generate an export table for NFS support.

       <b>--no-tail-packing</b>, <b>-T</b>
              Do not perform tail end packing on files that are larger than the specified block size.

       <b>--no-pad</b>
              Do  not  pad  the resulting image to device block size. May result in an image that cannot be loop
              mounted.

       <b>--force</b>, <b>-f</b>
              Overwrite the output file if it exists.

       <b>--quiet</b>, <b>-q</b>
              Do not print out progress reports.

       <b>--help</b>, <b>-h</b>
              Print help text and exit.

       <b>--version</b>, <b>-V</b>
              Print version information and exit.

</pre><h4><b>PACK</b> <b>FILE</b> <b>FORMAT</b></h4><pre>
       The input file contains a simple, newline separated list that describe the files to be  included  in  the
       squashfs image:

           # a comment
           file &lt;path&gt; &lt;mode&gt; &lt;uid&gt; &lt;gid&gt; [&lt;location&gt;]
           dir &lt;path&gt; &lt;mode&gt; &lt;uid&gt; &lt;gid&gt;
           nod &lt;path&gt; &lt;mode&gt; &lt;uid&gt; &lt;gid&gt; &lt;dev_type&gt; &lt;maj&gt; &lt;min&gt;
           slink &lt;path&gt; &lt;mode&gt; &lt;uid&gt; &lt;gid&gt; &lt;target&gt;
           link &lt;path&gt; &lt;dummy&gt; &lt;dummy&gt; &lt;dummy&gt; &lt;target&gt;
           pipe &lt;path&gt; &lt;mode&gt; &lt;uid&gt; &lt;gid&gt;
           sock &lt;path&gt; &lt;mode&gt; &lt;uid&gt; &lt;gid&gt;
           glob &lt;path&gt; &lt;mode|*&gt; &lt;uid|*&gt; &lt;gid|*&gt; [OPTIONS...] &lt;location&gt;

       ┌────────────┬────────────────────────────────────────┐
       │ &lt;path&gt;     │ Absolute  path  of  the  entry  in the │
       │            │ image. Can be put in  quotes  if  some │
       │            │ components contain spaces.             │
       ├────────────┼────────────────────────────────────────┤
       │ &lt;location&gt; │ Optional  location  of the input file. │
       │            │ Can be specified  relative  to  either │
       │            │ the   description  file  or  the  pack │
       │            │ directory. If omitted, the image  path │
       │            │ is used as a relative path.            │
       ├────────────┼────────────────────────────────────────┤
       │ &lt;target&gt;   │ Symlink or hardlink target.            │
       ├────────────┼────────────────────────────────────────┤
       │ &lt;mode&gt;     │ Mode/permissions of the entry.         │
       ├────────────┼────────────────────────────────────────┤
       │ &lt;uid&gt;      │ Numeric user id.                       │
       ├────────────┼────────────────────────────────────────┤
       │ &lt;gid&gt;      │ Numeric group id.                      │
       ├────────────┼────────────────────────────────────────┤
       │ &lt;dev_type&gt; │ Device type (b=block, c=character).    │
       ├────────────┼────────────────────────────────────────┤
       │ &lt;maj&gt;      │ Major number of a device special file. │
       ├────────────┼────────────────────────────────────────┤
       │ &lt;min&gt;      │ Minor number of a device special file. │
       └────────────┴────────────────────────────────────────┘

   <b>File</b> <b>Globbing</b>
       The  <b>glob</b>  command requires an <u>input</u> <u>location</u> which is interpreted relative to the pack directory (or the
       input file if no directory was specified). This location is scanned  recursively  and  the  contents  are
       added to the specified virtual path.

       The  specified <u>mode</u>, <u>uid</u> and <u>gid</u> are applied to all new entries added by the glob. They can alternatively
       be set to the special value <b>*</b> to use the value from the input directory.

       In front of the source location, several additional options can be specified to control the  behavior  of
       the glob command:

       ┌─────────────────┬────────────────────────────────────────────────────┐
       │ <b>Option</b>          │ <b>Description</b>                                        │
       ├─────────────────┼────────────────────────────────────────────────────┤
       │ -type           │ Followed by a single space and a single, lowercase │
       │                 │ character  describing  the  inode  type to accept. │
       │                 │ Works similar to the  <b>-type</b>  option  of  the  <b>find</b> │
       │                 │ command.                                           │
       │                 │                                                    │
       │                 │ Possible   values   are   <b>b</b>   (block  devices),  <b>c</b> │
       │                 │ (character devices),  <b>d</b>  (directories),  <b>p</b>  (named │
       │                 │ pipes),  <b>f</b>  (regular  files),  <b>l</b>  (symlinks) and <b>s</b> │
       │                 │ (sockets).                                         │
       │                 │                                                    │
       │                 │ If <b>-type</b> is not used, all are accepted. The  first │
       │                 │ use clamps the selection down to a single type and │
       │                 │ subsequent uses allow additional types.            │
       ├─────────────────┼────────────────────────────────────────────────────┤
       │ -xdev           │ Do not cross mount points during a recursive glob. │
       ├─────────────────┼────────────────────────────────────────────────────┤
       │ -mount          │ An alias for <b>-xdev</b>                                 │
       ├─────────────────┼────────────────────────────────────────────────────┤
       │ -keeptime       │ Use the time stamps from the scanned files.        │
       ├─────────────────┼────────────────────────────────────────────────────┤
       │ -nonrecursive   │ Do not descend into directories.                   │
       │                 │                                                    │
       │                 │ Even   if  the  type  argument  does  not  include │
       │                 │ directories, it is still possible  to  recursively │
       │                 │ scan  a hierarchy. In that case, the scanning will │
       │                 │ not add <u>new</u> directory  nodes,  but  still  recurse │
       │                 │ into  a  directory  if a coresponding node already │
       │                 │ exist in the virtual filesystem tree.              │
       │                 │                                                    │
       │                 │ So a typicall use case might be to first scan only │
       │                 │ the directories,  and  then  do  several  narrower │
       │                 │ globs to fill them.                                │
       ├─────────────────┼────────────────────────────────────────────────────┤
       │ -name &lt;pattern&gt; │ Only  add  entries  if  their name matches a shell │
       │                 │ glob pattern.                                      │
       │                 │                                                    │
       │                 │ If the pattern is supposed to contain  spaces,  it │
       │                 │ can  be  wrapped  in  quotation  marks  ("..."  or │
       │                 │ '...').                                            │
       ├─────────────────┼────────────────────────────────────────────────────┤
       │ -path &lt;pattern&gt; │ Only add entries if their full resulting  path  in │
       │                 │ the  SquashFS  image matches a shell glob pattern. │
       │                 │ Slashes in  the  path  are  only  matched  against │
       │                 │ slashes in the pattern and will never match a wild │
       │                 │ card  character or a bracket expression containing │
       │                 │ a slash.                                           │
       │                 │                                                    │
       │                 │ The path is normalized, so it won't have a leading │
       │                 │ or trailing slash.                                 │
       └─────────────────┴────────────────────────────────────────────────────┘

       Any other, unknown string starting with - will be rejected as unknown option.  If the input  path  starts
       with -, the sequence -- can be used to stop argument parsing, similar to many command line tools.

   <b>Example</b>
       # A simple squashfs image
       dir <a href="file:/dev">/dev</a> 0755 0 0
       nod /dev/console 0600 0 0 c 5 1
       dir <a href="file:/root">/root</a> 0700 0 0
       dir <a href="file:/sbin">/sbin</a> 0755 0 0

       # Add a file. Input is relative to pack dir or listing path
       file <a href="file:/sbin/init">/sbin/init</a> 0755 0 0 ../init/sbin/init

       # Read from .<a href="file:/bin/bash">/bin/bash</a> relative to pack dir or listing path
       # <a href="file:/bin">/bin</a> is created implicitly with default attributes.
       file <a href="file:/bin/bash">/bin/bash</a> 0755 0 0

       # file name with a space in it and a "special" name
       file "/opt/my app/\"special\"/data" 0600 0 0

       # collect the contents of .<a href="file:/lib">/lib</a> and put it under <a href="file:/usr/lib">/usr/lib</a>
       # mode and uid/gid are explictly set. First we collect the directory tree,
       # then all so files, then all symlinks that don't end in ".so"
       glob <a href="file:/usr/lib">/usr/lib</a> 0755 0 0 -type d .<a href="file:/lib">/lib</a>
       glob <a href="file:/usr/lib">/usr/lib</a> 0755 0 0 -type f -name "*.so.*" .<a href="file:/lib">/lib</a>
       glob <a href="file:/usr/lib">/usr/lib</a> 0777 0 0 -type l -name "*.so.*" .<a href="file:/lib">/lib</a>

</pre><h4><b>SORT</b> <b>FILE</b> <b>FORMAT</b></h4><pre>
       The  sort  file  is has one entry per line, consisting of a numeric priority and a filename. The name and
       the priority are separated by one or more space character (including tabs) and the line can be  intended.
       Any leeding or preceeding spaces are dropped.

       The  priority is a 64 bit number and can be negative. Files not listed in the sort file receive a default
       priority of 0. After processing the sort file, before packing the input files, the file list is sorted by
       priority, with lower values preceeding larger ones.

       The given filename is matched against the actual path of the file in the SquashFS file in  the  resulting
       image.  It  is  <u>not</u>  matched  against the input path, which may differ. Any file is allowed to match only
       once. The first match encountered in the sort file will be used.

       Lines can be empty or contain a single line comment, started with <b>#</b>. Filenames  can  be  wrapped  can  be
       wrapped  in  quotation  marks  ("...")  if necessary, with <b>\</b> serving as an escape character for quotation
       marks or itself.

       To control the packing behavior, an optional list of flags can be inserted between the priority  and  the
       filename.  The  flags  are  wrappe in brackets and comma separated, e.g. [flag1,flag2,...]. The following
       flags are supported:

       ┌──────────────────┬───────────────────────────────────────┐
       │ <b>Flag</b>             │ <b>Description</b>                           │
       ├──────────────────┼───────────────────────────────────────┤
       │ glob             │ Interpret the  filename  as  a  shell │
       │                  │ glob pattern and match all files that │
       │                  │ the pattern applies to. This performs │
       │                  │ path   globbing,  i.e.  a  wild  card │
       │                  │ character (<b>*</b> or <b>?</b>) or a bracket range │
       │                  │ (<b>[]</b>) cannot match a path separator. A │
       │                  │ slash must always be  matched  by  an │
       │                  │ explicit slash.                       │
       ├──────────────────┼───────────────────────────────────────┤
       │ glob_no_path     │ Same   as  <b>glob</b>,  but  disables  path │
       │                  │ globbing. Wild cards are  allowed  to │
       │                  │ match slashes.                        │
       ├──────────────────┼───────────────────────────────────────┤
       │ align            │ Force  device  block alignment of the │
       │                  │ matched files,  i.e.  the  compressed │
       │                  │ output always starts at a multiple of │
       │                  │ the  device  block  size.  Padding is │
       │                  │ inserted before and after.            │
       ├──────────────────┼───────────────────────────────────────┤
       │ dont_fragment    │ Do not perform tail-end  packing  for │
       │                  │ the  matched files, always generate a │
       │                  │ sequence of independent blocks.       │
       ├──────────────────┼───────────────────────────────────────┤
       │ dont_compress    │ Do not compress  the  matched  files. │
       │                  │ Note  that  if  tail-end  packing  is │
       │                  │ performed, the entire fragment  block │
       │                  │ is left uncompressed.                 │
       ├──────────────────┼───────────────────────────────────────┤
       │ dont_deduplicate │ Do  not  perform deduplication on the │
       │                  │ matched files. If they are packed and │
       │                  │ the  data  blocks  or  the  tail  end │
       │                  │ happens  to match a previously packed │
       │                  │ file, keep them anyway.               │
       ├──────────────────┼───────────────────────────────────────┤
       │ nosparse         │ Do not perform sparse file detection. │
       │                  │ If a matched file contians  block  of │
       │                  │ zero bytes, pack them as-is.          │
       └──────────────────┴───────────────────────────────────────┘

   <b>Example</b>
       # Specify a packing order with file globbing
       -8000  [glob]          bin/*
       -5000  [glob]          lib/*

       # glob_no_path means * is allowed to match /
       -1000  [glob_no_path]  share/*

       # Our boot loader needs this
       -100000  [dont_compress,dont_fragment,nosparse]  boot/vmlinuz

       # For demonstration, a quoted filename and no flags
       1337  "usr/share/my \"special\" file  "

</pre><h4><b>XATTR</b> <b>FILE</b> <b>FORMAT</b></h4><pre>
       The format for xattr files tries to be identical to the output of <b>getfattr</b>.

       Attributes are listed as key-value pairs with an <b>=</b> sign in between.

       If  a  line  starts  with  `<b>#</b>  <b>file:</b>  `, the rest of the line is interpreted as an absolute path that the
       following xattrs are applied to.

       Plain text values are wrapped in quotation marks ("...") and support some  escape  sequences.   Currently
       supported are <b>\"</b>, <b>\\</b> and <b>\0&lt;octal-sequence&gt;</b>.

       Raw  binary  values  can  encoded  as hexadecimal or base64, by starting the value with a <b>0x</b> or <b>0s</b> prefix
       respectively.

   <b>Example</b>
       # file: dev/
       security.selinux="system_u:object_r:device_t:s0"
       user.beverage_preference=0xCAFECAFEDECAFBAD

       # file: dev/rfkill
       security.selinux="system_u:object_r:wireless_device_t:s0"
       system.posix_acl_access=0sSGVsbG8gdGhlcmUgOi0pCg==

</pre><h4><b>ENVIRONMENT</b></h4><pre>
       If the command line switch <b>--defaults</b> is not used or no default mtime is  specified,  the  value  of  the
       environment variable <b>SOURCE_DATE_EPOCH</b> is used for all file and filesystem timestamps.

       If  <b>SOURCE_DATE_EPOCH</b>  is not set, not a parsable number or it is out of range, the timestamps default to
       0.

       Environment variables are only used if no explicit command line switches are set. Explicit  command  line
       switches are always preferred over the environment variables.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <a href="../man1/rdsquashfs.1.html">rdsquashfs</a>(1), <a href="../man1/tar2sqfs.1.html">tar2sqfs</a>(1)

</pre><h4><b>AUTHOR</b></h4><pre>
       Written by David Oberhollenzer.

</pre><h4><b>COPYRIGHT</b></h4><pre>
       Copyright    ©    2019   David   Oberhollenzer   License   GPLv3+:   GNU   GPL   version   3   or   later
       &lt;https://gnu.org/licenses/gpl.html&gt;.
       This is free software: you are free to change and redistribute it.  There is NO WARRANTY, to  the  extent
       permitted by law.

generate squashfs images                          November 2021                                   <u><a href="../man1/GENSQUASHFS.1.html">GENSQUASHFS</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>