<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>git-update-ref - Update the object name stored in a ref safely</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/git-man">git-man_2.48.1-0ubuntu1.1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       git-update-ref - Update the object name stored in a ref safely

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <u>git</u> <u>update-ref</u> [-m &lt;reason&gt;] [--no-deref] (-d &lt;ref&gt; [&lt;old-oid&gt;] | [--create-reflog] &lt;ref&gt; &lt;new-oid&gt; [&lt;old-oid&gt;] | --stdin [-z])

</pre><h4><b>DESCRIPTION</b></h4><pre>
       Given two arguments, stores the &lt;new-oid&gt; in the &lt;ref&gt;, possibly dereferencing the symbolic refs. E.g.
       <b>git</b> <b>update-ref</b> <b>HEAD</b> <u>&lt;new-oid&gt;</u> updates the current branch head to the new object.

       Given three arguments, stores the &lt;new-oid&gt; in the &lt;ref&gt;, possibly dereferencing the symbolic refs, after
       verifying that the current value of the &lt;ref&gt; matches &lt;old-oid&gt;. E.g. <b>git</b> <b>update-ref</b> <b>refs/heads/master</b>
       <u>&lt;new-oid&gt;</u> <u>&lt;old-oid&gt;</u> updates the master branch head to &lt;new-oid&gt; only if its current value is &lt;old-oid&gt;.
       You can specify 40 "0" or an empty string as &lt;old-oid&gt; to make sure that the ref you are creating does
       not exist.

       The final arguments are object names; this command without any options does not support updating a
       symbolic ref to point to another ref (see <b><a href="../man1/git-symbolic-ref.1.html">git-symbolic-ref</a></b>(1)). But <b>git</b> <b>update-ref</b> <b>--stdin</b> does have the
       <b>symref-</b>* commands so that regular refs and symbolic refs can be committed in the same transaction.

       If --no-deref is given, &lt;ref&gt; itself is overwritten, rather than the result of following the symbolic
       pointers.

       With <b>-d</b>, it deletes the named &lt;ref&gt; after verifying that it still contains &lt;old-oid&gt;.

       With <b>--stdin</b>, update-ref reads instructions from standard input and performs all modifications together.
       Specify commands of the form:

           update SP &lt;ref&gt; SP &lt;new-oid&gt; [SP &lt;old-oid&gt;] LF
           create SP &lt;ref&gt; SP &lt;new-oid&gt; LF
           delete SP &lt;ref&gt; [SP &lt;old-oid&gt;] LF
           verify SP &lt;ref&gt; [SP &lt;old-oid&gt;] LF
           symref-update SP &lt;ref&gt; SP &lt;new-target&gt; [SP (ref SP &lt;old-target&gt; | oid SP &lt;old-oid&gt;)] LF
           symref-create SP &lt;ref&gt; SP &lt;new-target&gt; LF
           symref-delete SP &lt;ref&gt; [SP &lt;old-target&gt;] LF
           symref-verify SP &lt;ref&gt; [SP &lt;old-target&gt;] LF
           option SP &lt;opt&gt; LF
           start LF
           prepare LF
           commit LF
           abort LF

       With <b>--create-reflog</b>, update-ref will create a reflog for each ref even if one would not ordinarily be
       created.

       Quote fields containing whitespace as if they were strings in C source code; i.e., surrounded by
       double-quotes and with backslash escapes. Use 40 "0" characters or the empty string to specify a zero
       value. To specify a missing value, omit the value and its preceding SP entirely.

       Alternatively, use <b>-z</b> to specify in NUL-terminated format, without quoting:

           update SP &lt;ref&gt; NUL &lt;new-oid&gt; NUL [&lt;old-oid&gt;] NUL
           create SP &lt;ref&gt; NUL &lt;new-oid&gt; NUL
           delete SP &lt;ref&gt; NUL [&lt;old-oid&gt;] NUL
           verify SP &lt;ref&gt; NUL [&lt;old-oid&gt;] NUL
           symref-update SP &lt;ref&gt; NUL &lt;new-target&gt; [NUL (ref NUL &lt;old-target&gt; | oid NUL &lt;old-oid&gt;)] NUL
           symref-create SP &lt;ref&gt; NUL &lt;new-target&gt; NUL
           symref-delete SP &lt;ref&gt; [NUL &lt;old-target&gt;] NUL
           symref-verify SP &lt;ref&gt; [NUL &lt;old-target&gt;] NUL
           option SP &lt;opt&gt; NUL
           start NUL
           prepare NUL
           commit NUL
           abort NUL

       In this format, use 40 "0" to specify a zero value, and use the empty string to specify a missing value.

       In either format, values can be specified in any form that Git recognizes as an object name. Commands in
       any other format or a repeated &lt;ref&gt; produce an error. Command meanings are:

       update
           Set &lt;ref&gt; to &lt;new-oid&gt; after verifying &lt;old-oid&gt;, if given. Specify a zero &lt;new-oid&gt; to ensure the
           ref does not exist after the update and/or a zero &lt;old-oid&gt; to make sure the ref does not exist
           before the update.

       create
           Create &lt;ref&gt; with &lt;new-oid&gt; after verifying that it does not exist. The given &lt;new-oid&gt; may not be
           zero.

       delete
           Delete &lt;ref&gt; after verifying that it exists with &lt;old-oid&gt;, if given. If given, &lt;old-oid&gt; may not be
           zero.

       symref-update
           Set &lt;ref&gt; to &lt;new-target&gt; after verifying &lt;old-target&gt; or &lt;old-oid&gt;, if given. Specify a zero
           &lt;old-oid&gt; to ensure that the ref does not exist before the update.

       verify
           Verify &lt;ref&gt; against &lt;old-oid&gt; but do not change it. If &lt;old-oid&gt; is zero or missing, the ref must
           not exist.

       symref-create: Create symbolic ref &lt;ref&gt; with &lt;new-target&gt; after verifying that it does not exist.

       symref-delete
           Delete &lt;ref&gt; after verifying that it exists with &lt;old-target&gt;, if given.

       symref-verify
           Verify symbolic &lt;ref&gt; against &lt;old-target&gt; but do not change it. If &lt;old-target&gt; is missing, the ref
           must not exist. Can only be used in <b>no-deref</b> mode.

       option
           Modify the behavior of the next command naming a &lt;ref&gt;. The only valid option is <b>no-deref</b> to avoid
           dereferencing a symbolic ref.

       start
           Start a transaction. In contrast to a non-transactional session, a transaction will automatically
           abort if the session ends without an explicit commit. This command may create a new empty transaction
           when the current one has been committed or aborted already.

       prepare
           Prepare to commit the transaction. This will create lock files for all queued reference updates. If
           one reference could not be locked, the transaction will be aborted.

       commit
           Commit all reference updates queued for the transaction, ending the transaction.

       abort
           Abort the transaction, releasing all locks if the transaction is in prepared state.

       If all &lt;ref&gt;s can be locked with matching &lt;old-oid&gt;s simultaneously, all modifications are performed.
       Otherwise, no modifications are performed. Note that while each individual &lt;ref&gt; is updated or deleted
       atomically, a concurrent reader may still see a subset of the modifications.

</pre><h4><b>LOGGING</b> <b>UPDATES</b></h4><pre>
       If config parameter "core.logAllRefUpdates" is true and the ref is one under "refs/heads/",
       "refs/remotes/", "refs/notes/", or a pseudoref like HEAD or ORIG_HEAD; or the file "$GIT_DIR/logs/&lt;ref&gt;"
       exists then <b>git</b> <b>update-ref</b> will append a line to the log file "$GIT_DIR/logs/&lt;ref&gt;" (dereferencing all
       symbolic refs before creating the log name) describing the change in ref value. Log lines are formatted
       as:

           oldsha1 SP newsha1 SP committer LF

       Where "oldsha1" is the 40 character hexadecimal value previously stored in &lt;ref&gt;, "newsha1" is the 40
       character hexadecimal value of &lt;new-oid&gt; and "committer" is the committerâ€™s name, email address and date
       in the standard Git committer ident format.

       Optionally with -m:

           oldsha1 SP newsha1 SP committer TAB message LF

       Where all fields are as described above and "message" is the value supplied to the -m option.

       An update will fail (without changing &lt;ref&gt;) if the current user is unable to create a new log file,
       append to the existing log file or does not have committer information available.

</pre><h4><b>NOTES</b></h4><pre>
       Symbolic refs were initially implemented using symbolic links. This is now deprecated since not all
       filesystems support symbolic links.

       This command follows <b>real</b> symlinks only if they start with "refs/": otherwise it will just try to read
       them and update them as a regular file (i.e. it will allow the filesystem to follow them, but will
       overwrite such a symlink to somewhere else with a regular filename).

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man1/git-symbolic-ref.1.html">git-symbolic-ref</a></b>(1)

</pre><h4><b>GIT</b></h4><pre>
       Part of the <b><a href="../man1/git.1.html">git</a></b>(1) suite

Git 2.48.1                                         07/02/2025                                  <u><a href="../man1/GIT-UPDATE-REF.1.html">GIT-UPDATE-REF</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>