<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>dpkg-architecture - set and determine the architecture for package building</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/dpkg-dev">dpkg-dev_1.22.18ubuntu2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       dpkg-architecture - set and determine the architecture for package building

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>dpkg-architecture</b> [<u>option</u>...] [<u>command</u>]

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>dpkg-architecture</b> provides a facility to determine and set the build and host architecture for package
       building.

       The build architecture is always determined by either the <b>DEB_BUILD_ARCH</b> variable if set (and <b>--force</b> not
       being specified) or by an external call to <b><a href="../man1/dpkg.1.html">dpkg</a></b>(1), and cannot be set at the command line.

       You can specify the host architecture by providing one or both of the options <b>--host-arch</b> and
       <b>--host-type</b>, otherwise the <b>DEB_HOST_ARCH</b> variable is used if set (and <b>--force</b> not being specified).  The
       default is determined by an external call to <b><a href="../man1/gcc.1.html">gcc</a></b>(1), or the same as the build architecture if <b>CC</b> or gcc
       are both not available.  One out of <b>--host-arch</b> and <b>--host-type</b> is sufficient, the value of the other
       will be set to a usable default.  Indeed, it is often better to only specify one, because <b>dpkg-</b>
       <b>architecture</b> will warn you if your choice does not match the default.

</pre><h4><b>COMMANDS</b></h4><pre>
       <b>-l</b>, <b>--list</b>
           Print  the  environment  variables, one each line, in the format <u>VARIABLE=value</u>.  This is the default
           action.

       <b>-e</b>, <b>--equal</b> <u>architecture</u>
           Check for equality of architecture (since dpkg 1.13.13).  It compares the current or specified Debian
           host architecture against <u>architecture</u>, to check if they are equal.  This action will not expand  the
           architecture wildcards.  Command finishes with an exit status of 0 if matched, 1 if not matched.

       <b>-i</b>, <b>--is</b> <u>architecture-wildcard</u>
           Check for identity of architecture (since dpkg 1.13.13).  It compares the current or specified Debian
           host architecture against <u>architecture-wildcard</u> after having expanded it as an architecture wildcard,
           to check if they match.  Command finishes with an exit status of 0 if matched, 1 if not matched.

       <b>-q</b>, <b>--query</b> <u>variable-name</u>
           Print the value of a single variable.

       <b>-s</b>, <b>--print-set</b>
           Print  an export command.  This can be used to set the environment variables using the POSIX shell or
           make <b>eval</b>, depending on the output format.

       <b>-u</b>, <b>--print-unset</b>
           Print a similar command to <b>--print-set</b> but to unset all variables.

       <b>-c</b>, <b>--command</b> <u>command-string</u>
           Execute a <u>command-string</u> in an environment which has all variables set to the determined value.

           If the <u>command-string</u> contains shell metacharacters, then it  will  be  invoked  through  the  system
           bourne shell.

       <b>-L</b>, <b>--list-known</b>
           Print a list of valid architecture names.  Possibly restricted by one or more of the matching options
           <b>--match-wildcard</b>, <b>--match-bits</b> or <b>--match-endian</b> (since dpkg 1.17.14).

       <b>-?</b>, <b>--help</b>
           Show the usage message and exit.

       <b>--version</b>
           Show the version and exit.

</pre><h4><b>OPTIONS</b></h4><pre>
       <b>-a</b>, <b>--host-arch</b> <u>architecture</u>
           Set the host Debian architecture.

       <b>-t</b>, <b>--host-type</b> <u>gnu-system-type</u>
           Set the host GNU system type.

       <b>-A</b>, <b>--target-arch</b> <u>architecture</u>
           Set the target Debian architecture (since dpkg 1.17.14).

       <b>-T</b>, <b>--target-type</b> <u>gnu-system-type</u>
           Set the target GNU system type (since dpkg 1.17.14).

       <b>-W</b>, <b>--match-wildcard</b> <u>architecture-wildcard</u>
           Restrict  the  architectures  listed  by  <b>--list-known</b>  to  ones  matching the specified architecture
           wildcard (since dpkg 1.17.14).

       <b>-B</b>, <b>--match-bits</b> <u>architecture-bits</u>
           Restrict the architectures listed by <b>--list-known</b> to ones with the specified  CPU  bits  (since  dpkg
           1.17.14).  Either <b>32</b> or <b>64</b>.

       <b>-E</b>, <b>--match-endian</b> <u>architecture-endianness</u>
           Restrict  the  architectures listed by <b>--list-known</b> to ones with the specified endianness (since dpkg
           1.17.14).  Either <b>little</b> or <b>big</b>.

       <b>--print-format</b> <u>format</u>
           Sets the output format for <b>--print-set</b>  and  <b>--print-unset</b>  (since  dpkg  1.20.6),  to  either  <b>shell</b>
           (default) or <b>make</b>.

       <b>-f</b>, <b>--force</b>
           Values  set  by  existing environment variables with the same name as used by the scripts are honored
           (i.e. used by <b>dpkg-architecture</b>), except if this force flag is present.   This  allows  the  user  to
           override  a value even when the call to <b>dpkg-architecture</b> is buried in some other script (for example
           <b><a href="../man1/dpkg-buildpackage.1.html">dpkg-buildpackage</a></b>(1)).

</pre><h4><b>TERMS</b></h4><pre>
       build machine
           The machine the package is built on.

       host machine
           The machine the package is built for.

       target machine
           The machine the compiler is building for, or the emulator will run code for.   This  is  only  needed
           when  building  a cross-toolchain (or emulator), one that will be built on the build architecture, to
           be run on the host architecture, and that itself will build (or run emulated)  code  for  the  target
           architecture.

       Debian architecture
           The Debian architecture string, used in binary packages, which specifies the binary tree in a package
           repository.

           Examples: i386, sparc, hurd-i386.

       Debian architecture tuple
           A  Debian architecture tuple is the fully qualified architecture with all its components spelled out.
           This differs with Debian architectures in that at least the <u>cpu</u> component does  not  embed  the  <u>abi</u>.
           The current tuple has the form <u>abi</u>-<u>libc</u>-<u>os</u>-<u>cpu</u>.

           Examples: base-gnu-linux-amd64, eabihf-musl-linux-arm.

       Debian architecture wildcard
           A Debian architecture wildcard is a special architecture string that will match any real architecture
           being  part  of  it.  The general form is a Debian architecture tuple with four or less elements, and
           with at least one of them being <b>any</b>.  Missing elements of the tuple are prefixed implicitly  as  <b>any</b>,
           and thus the following pairs are equivalent:

           <b>any</b>-<b>any</b>-<b>any</b>-<b>any</b> = <b>any</b>
           <b>any</b>-<b>any</b>-<u>os</u>-<b>any</b> = <u>os</u>-<b>any</b>
           <b>any</b>-<u>libc</u>-<b>any</b>-<b>any</b> = <u>libc</u>-<b>any</b>-<b>any</b>

           Examples: linux-any, any-i386, hurd-any, eabi-any-any-arm, musl-any-any.

       GNU system type
           An architecture specification string consisting of two parts separated by a hyphen: CPU and system.

           The CPU part never contains a hyphen, while the system part might itself contain a hyphen to separate
           a  kernel  from  its general ABI, where the general ABI might contain both runtime (such as libc) and
           executable ABI specifiers joined without a hyphen.

           Examples: i586-linux-gnu, sparc-linux-gnu, i686-gnu, x86_64-netbsd.

       multiarch triplet
           The clarified GNU system type, used for filesystem paths.  This triplet does not change even when the
           baseline ISA gets bumped, so that the resulting  paths  are  stable  over  time.   The  only  current
           difference with the GNU system type is that the CPU part for i386 based systems is always i386.

           Examples:    i386-linux-gnu,    x86_64-linux-gnu.     Example   paths:   /lib/powerpc64le-linux-gnu/,
           /usr/lib/i386-kfreebsd-gnu/.

</pre><h4><b>VARIABLES</b></h4><pre>
       The following variables are read from the environment (unless <b>--force</b> has  been  specified)  and  set  by
       <b>dpkg-architecture</b> (see the <b>TERMS</b> section for a description of the naming scheme):

       <b>DEB_BUILD_ARCH</b>
           The Debian architecture of the build machine.

           <b>Note</b>:  If  you  are  not building tools that need to run during the build, these are probably not the
           variables you are looking for.  Please see "TERMS" section for the meanings of these terms.

       <b>DEB_BUILD_ARCH_ABI</b>
           The Debian ABI name of the build machine (since dpkg 1.18.11).

       <b>DEB_BUILD_ARCH_LIBC</b>
           The Debian libc name of the build machine (since dpkg 1.18.11).

       <b>DEB_BUILD_ARCH_OS</b>
           The Debian system name of the build machine (since dpkg 1.13.2).

       <b>DEB_BUILD_ARCH_CPU</b>
           The Debian CPU name of the build machine (since dpkg 1.13.2).

       <b>DEB_BUILD_ARCH_BITS</b>
           The pointer size of the build machine (in bits; since dpkg 1.15.4).

       <b>DEB_BUILD_ARCH_ENDIAN</b>
           The endianness of the build machine (little / big; since dpkg 1.15.4).

       <b>DEB_BUILD_GNU_CPU</b>
           The GNU CPU part of <b>DEB_BUILD_GNU_TYPE</b>.

       <b>DEB_BUILD_GNU_SYSTEM</b>
           The GNU system part of <b>DEB_BUILD_GNU_TYPE</b>.

       <b>DEB_BUILD_GNU_TYPE</b>
           The GNU system type of the build machine.

       <b>DEB_BUILD_MULTIARCH</b>
           The clarified GNU system type of the build machine, used for filesystem paths (since dpkg 1.16.0).

       <b>DEB_HOST_ARCH</b>
           The Debian architecture of the host machine.

       <b>DEB_HOST_ARCH_ABI</b>
           The Debian ABI name of the host machine (since dpkg 1.18.11).

       <b>DEB_HOST_ARCH_LIBC</b>
           The Debian libc name of the host machine (since dpkg 1.18.11).

       <b>DEB_HOST_ARCH_OS</b>
           The Debian system name of the host machine (since dpkg 1.13.2).

       <b>DEB_HOST_ARCH_CPU</b>
           The Debian CPU name of the host machine (since dpkg 1.13.2).

       <b>DEB_HOST_ARCH_BITS</b>
           The pointer size of the host machine (in bits; since dpkg 1.15.4).

       <b>DEB_HOST_ARCH_ENDIAN</b>
           The endianness of the host machine (little / big; since dpkg 1.15.4).

       <b>DEB_HOST_GNU_CPU</b>
           The GNU CPU part of <b>DEB_HOST_GNU_TYPE</b>.

       <b>DEB_HOST_GNU_SYSTEM</b>
           The GNU system part of <b>DEB_HOST_GNU_TYPE</b>.

       <b>DEB_HOST_GNU_TYPE</b>
           The GNU system type of the host machine.

       <b>DEB_HOST_MULTIARCH</b>
           The clarified GNU system type of the host machine, used for filesystem paths (since dpkg 1.16.0).

       <b>DEB_TARGET_ARCH</b>
           The Debian architecture of the target machine (since dpkg 1.17.14).

           <b>Note</b>: If you are not building cross-toolchains (or emulators), these are probably not  the  variables
           you are looking for.  Please see "TERMS" section for the meanings of these terms.

       <b>DEB_TARGET_ARCH_ABI</b>
           The Debian ABI name of the target machine (since dpkg 1.18.11).

       <b>DEB_TARGET_ARCH_LIBC</b>
           The Debian libc name of the target machine (since dpkg 1.18.11).

       <b>DEB_TARGET_ARCH_OS</b>
           The Debian system name of the target machine (since dpkg 1.17.14).

       <b>DEB_TARGET_ARCH_CPU</b>
           The Debian CPU name of the target machine (since dpkg 1.17.14).

       <b>DEB_TARGET_ARCH_BITS</b>
           The pointer size of the target machine (in bits; since dpkg 1.17.14).

       <b>DEB_TARGET_ARCH_ENDIAN</b>
           The endianness of the target machine (little / big; since dpkg 1.17.14).

       <b>DEB_TARGET_GNU_CPU</b>
           The GNU CPU part of <b>DEB_TARGET_GNU_TYPE</b> (since dpkg 1.17.14).

       <b>DEB_TARGET_GNU_SYSTEM</b>
           The GNU system part of <b>DEB_TARGET_GNU_TYPE</b> (since dpkg 1.17.14).

       <b>DEB_TARGET_GNU_TYPE</b>
           The GNU system type of the target machine (since dpkg 1.17.14).

       <b>DEB_TARGET_MULTIARCH</b>
           The clarified GNU system type of the target machine, used for filesystem paths (since dpkg 1.17.14).

</pre><h4><b>FILES</b></h4><pre>
   <b>Architecture</b> <b>tables</b>
       All  these  files  have to be present for <b>dpkg-architecture</b> to work.  Their location can be overridden at
       runtime with the environment variable <b>DPKG_DATADIR</b>.  These tables contain a format  <b>Version</b>  pseudo-field
       on  their  first  line  to mark their format, so that parsers can check if they understand it, such as "#
       Version=1.0".

       <u><a href="file:/usr/share/dpkg/cputable">/usr/share/dpkg/cputable</a></u>
           Table of known CPU names and mapping to their GNU name.  Format version 1.0 (since dpkg 1.13.2).

       <u><a href="file:/usr/share/dpkg/ostable">/usr/share/dpkg/ostable</a></u>
           Table of known operating system names and mapping to their GNU name.  Format version 2.0 (since  dpkg
           1.18.11).

       <u><a href="file:/usr/share/dpkg/tupletable">/usr/share/dpkg/tupletable</a></u>
           Mapping  between Debian architecture tuples and Debian architecture names.  Format version 1.0 (since
           dpkg 1.18.11).

       <u><a href="file:/usr/share/dpkg/abitable">/usr/share/dpkg/abitable</a></u>
           Table of Debian architecture ABI attribute overrides.  Format version 2.0 (since dpkg 1.18.11).

   <b>Packaging</b> <b>support</b>
       <u>/usr/share/dpkg/architecture.mk</u>
           Makefile snippet that properly sets and exports all  the  variables  that  <b>dpkg-architecture</b>  outputs
           (since dpkg 1.16.1).

</pre><h4><b>EXAMPLES</b></h4><pre>
       <b>dpkg-buildpackage</b> accepts the <b>-a</b> option and passes it to <b>dpkg-architecture</b>.  Other examples:

        CC=i386-gnu-gcc dpkg-architecture -c debian/rules build

        eval $(dpkg-architecture -u)

       Check if the current or specified host architecture is equal to an architecture:

        dpkg-architecture -elinux-arm64

        dpkg-architecture -ariscv64 -elinux-riscv64

       Check if the current or specified host architecture is a Linux system:

        dpkg-architecture -ilinux-any

        dpkg-architecture -aamd64 -ilinux-any

   <b>Usage</b> <b>in</b> <b>debian/rules</b>
       The environment variables set by <b>dpkg-architecture</b> are passed to <u>debian/rules</u> as make variables (see make
       documentation).   However,  you  should not rely on them, as this breaks manual invocation of the script.
       Instead, you should always initialize them using <b>dpkg-architecture</b> with the <b>-q</b>  option.   Here  are  some
       examples, which also show how you can improve the cross compilation support in your package:

       Retrieving the GNU system type and forwarding it to ./configure:

        DEB_BUILD_GNU_TYPE ?= $(shell dpkg-architecture -qDEB_BUILD_GNU_TYPE)
        DEB_HOST_GNU_TYPE ?= $(shell dpkg-architecture -qDEB_HOST_GNU_TYPE)
        [...]
        ifeq ($(DEB_BUILD_GNU_TYPE), $(DEB_HOST_GNU_TYPE))
          confflags += --build=$(DEB_HOST_GNU_TYPE)
        else
          confflags += --build=$(DEB_BUILD_GNU_TYPE) \
                       --host=$(DEB_HOST_GNU_TYPE)
        endif
        [...]
        ./configure $(confflags)

       Doing something only for a specific architecture:

        DEB_HOST_ARCH ?= $(shell dpkg-architecture -qDEB_HOST_ARCH)

        ifeq ($(DEB_HOST_ARCH),arm64)
          [...]
        endif

       or if you only need to check the CPU or OS type, use the <b>DEB_HOST_ARCH_CPU</b> or <b>DEB_HOST_ARCH_OS</b> variables.

       Note  that you can also rely on an external Makefile snippet to properly set all the variables that <b>dpkg-</b>
       <b>architecture</b> can provide:

        include /usr/share/dpkg/architecture.mk

        ifeq ($(DEB_HOST_ARCH),arm64)
          [...]
        endif

       In any case, you should never use <b>dpkg</b> <b>--print-architecture</b> to  get  architecture  information  during  a
       package build.

</pre><h4><b>ENVIRONMENT</b></h4><pre>
       <b>DPKG_DATADIR</b>
           If  set, it will be used as the <b>dpkg</b> data directory, where the architecture tables are located (since
           dpkg 1.14.17).  Defaults to «<a href="file:/usr/share/dpkg">/usr/share/dpkg</a>».

       <b>DPKG_COLORS</b>
           Sets the color mode (since dpkg 1.18.5).  The currently accepted values are: <b>auto</b>  (default),  <b>always</b>
           and <b>never</b>.

       <b>DPKG_NLS</b>
           If  set,  it  will  be  used  to  decide  whether  to activate Native Language Support, also known as
           internationalization (or i18n) support (since dpkg  1.19.0).   The  accepted  values  are:  <b>0</b>  and  <b>1</b>
           (default).

</pre><h4><b>NOTES</b></h4><pre>
       All long command and option names available only since dpkg 1.17.17.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man1/dpkg-buildpackage.1.html">dpkg-buildpackage</a></b>(1).

1.22.18                                            2025-03-20                               <u><a href="../man1/dpkg-architecture.1.html">dpkg-architecture</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>