<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>rrdcgi - Create web pages containing RRD graphs based on templates</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/rrdtool">rrdtool_1.7.2-4.2ubuntu2_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       rrdcgi - Create web pages containing RRD graphs based on templates

</pre><h4><b>SYNOPSIS</b></h4><pre>
       "#!/path/to/"<b>rrdcgi</b> [<b>--filter</b>|<b>-f</b>]

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>rrdcgi</b> is a sort of very limited script interpreter. Its purpose is to run as a cgi-program and parse a
       web page template containing special &lt;RRD:: tags. <b>rrdcgi</b> will interpret and act according to these tags.
       In the end it will printout a web page including the necessary CGI headers.

       <b>rrdcgi</b> parses the contents of the template in 3 steps. In each step it looks only for a subset of tags.
       This allows nesting of tags.

       The argument parser uses the same semantics as you are used from your C-shell.

       <b>--filter</b>|<b>-f</b>
               Assume that rrdcgi is run as a filter and not as a cgi.

   <b>Keywords</b>
       RRD::CV <u>name</u>
               Inserts the CGI variable of the given name.

       RRD::CV::QUOTE <u>name</u>
               Inserts the CGI variable of the given name but quotes it, ready for use as an argument in another
               RRD::  tag.  So  even  when  there  are  spaces in the value of the CGI variable it will still be
               considered to be one argument.

       RRD::CV::PATH <u>name</u>
               Inserts the CGI variable of the given name, quotes it and makes sure it starts neither with a '/'
               nor contains '..'. This is to make sure that no problematic pathnames can be  introduced  through
               the CGI interface.

       RRD::GETENV <u>variable</u>
               Get the value of an environment variable.

                &lt;RRD::GETENV REMOTE_USER&gt;

               might give you the name of the remote user given you are using some sort of access control on the
               directory.

       RRD::GOODFOR <u>seconds</u>
               Specify  the  number  of  seconds  this  page should remain valid. This will prompt the rrdcgi to
               output a Last-Modified, an Expire and if the number of seconds is <u>negative</u> a Refresh header.

       RRD::INCLUDE <u>filename</u>
               Include the contents of the specified file into the page returned from the cgi.

       RRD::SETENV <u>variable</u> <u>value</u>
               If you want to present your graphs in another time zone than your own, you could use

                &lt;RRD::SETENV TZ UTC&gt;

               to make sure everything is presented in Universal Time. Note that  the  values  permitted  to  TZ
               depend on your OS.

       RRD::SETVAR <u>variable</u> <u>value</u>
               Analog to SETENV but for local variables.

       RRD::GETVAR <u>variable</u>
               Analog to GETENV but for local variables.

       RRD::TIME::LAST <u>rrd-file</u> <u>strftime-format</u>
               This   gets   replaced  by  the  last  modification  time  of  the  selected  RRD.  The  time  is
               <u>strftime</u>-formatted with the string specified in the second argument.

       RRD::TIME::NOW <u>strftime-format</u>
               This gets replaced by the current time of day. The time is  <u>strftime</u>-formatted  with  the  string
               specified in the argument.

               Note  that if you return : (colons) from your strftime format you may have to escape them using \
               if the time is to be used as an argument to a GRAPH command.

       RRD::TIME::STRFTIME <u>START|END</u> <u>start-spec</u> <u>end-spec</u> <u>strftime-format</u>
               This gets replaced by a strftime-formatted time using the format <u>strftime-format</u> on either <u>start-</u>
               <u>spec</u> or <u>end-spec</u> depending on whether <u>START</u> or <u>END</u> is specified.  Both  <u>start-spec</u>  and  <u>end-spec</u>
               must  be  supplied  as  either  could be relative to the other.  This is intended to allow pretty
               titles on graphs with times that are easier for non RRDtool folks to figure out than "-2weeks".

               Note that again, if you return : (colon) from your strftime format, you may have to  escape  them
               using \ if the time is to be used as an argument to a GRAPH command.

       RRD::GRAPH <u>rrdgraph</u> <u>arguments</u>
               This  tag  creates  the  RRD graph defined by its argument and then is replaced by an appropriate
               &lt;IMG ... &gt; tag referring to the graph.  The <b>--lazy</b> option in RRD graph can be used to  make  sure
               that  graphs  are only regenerated when they are out of date. The arguments to the <b>RRD::GRAPH</b> tag
               work as described in the <b>rrdgraph</b> manual page.

               Use the <b>--lazy</b> option in your RRD::GRAPH tags, to reduce the load on  your  server.  This  option
               makes sure that graphs are only regenerated when the old ones are out of date.

               If you do not specify your own <b>--imginfo</b> format, the following will be used:

                &lt;IMG SRC="%s" WIDTH="%lu" HEIGHT="%lu"&gt;

               Note  that  %s  stands for the filename part of the graph generated, all directories given in the
               PNG file argument will get dropped.

       RRD::PRINT <u>number</u>
               If the preceding  <b>RRD::GRAPH</b> tag contained any <b>PRINT</b> arguments, then you can access their  output
               with  this  tag.  The <u>number</u> argument refers to the number of the <b>PRINT</b> argument. The first <b>PRINT</b>
               has <u>number</u> 0.

       RRD::INTERNAL &lt;var&gt;
               This tag gets replaced by an internal var. Currently these vars are known: VERSION,  COMPILETIME.
               These vars represent the compiled-in values.

</pre><h4><b>EXAMPLE</b> <b>1</b></h4><pre>
       The example below creates a web page with a single RRD graph.

        #!/usr/local/bin/rrdcgi
        &lt;HTML&gt;
        &lt;HEAD&gt;&lt;TITLE&gt;RRDCGI Demo&lt;/TITLE&gt;&lt;/HEAD&gt;
        &lt;BODY&gt;
        &lt;H1&gt;RRDCGI Example Page&lt;/H1&gt;
        &lt;P&gt;
        &lt;RRD::GRAPH demo.png --lazy --title="Temperatures"
                 DEF:cel=demo.rrd:exhaust:AVERAGE
                 LINE2:cel#00a000:"D. Celsius"&gt;

        &lt;/P&gt;
        &lt;/BODY&gt;
        &lt;/HTML&gt;

</pre><h4><b>EXAMPLE</b> <b>2</b></h4><pre>
       This script is slightly more elaborate, it allows you to run it from a form which sets RRD_NAME. RRD_NAME
       is then used to select which RRD you want to use as source for your graph.

        #!/usr/local/bin/rrdcgi
        &lt;HTML&gt;
        &lt;HEAD&gt;&lt;TITLE&gt;RRDCGI Demo&lt;/TITLE&gt;&lt;/HEAD&gt;
        &lt;BODY&gt;
        &lt;H1&gt;RRDCGI Example Page for &lt;RRD::CV RRD_NAME&gt;&lt;/H1&gt;
        &lt;H2&gt;Selection&lt;/H2&gt;
        &lt;FORM&gt;&lt;INPUT NAME=RRD_NAME TYPE=RADIO VALUE=roomA&gt; Room A,
              &lt;INPUT NAME=RRD_NAME TYPE=RADIO VALUE=roomB&gt; Room B.
              &lt;INPUT TYPE=SUBMIT&gt;&lt;/FORM&gt;
        &lt;H2&gt;Graph&lt;/H2&gt;
        &lt;P&gt;
        &lt;RRD::GRAPH &lt;RRD::CV::PATH RRD_NAME&gt;.png --lazy
                 --title "Temperatures for "&lt;RRD::CV::QUOTE RRD_NAME&gt;
                 DEF:cel=&lt;RRD::CV::PATH RRD_NAME&gt;.rrd:exhaust:AVERAGE
                 LINE2:cel#00a000:"D. Celsius"&gt;

        &lt;/P&gt;
        &lt;/BODY&gt;
        &lt;/HTML&gt;

</pre><h4><b>EXAMPLE</b> <b>3</b></h4><pre>
       This example shows how to handle the case where the RRD, graphs and cgi-bins are separate directories

        #!/.../bin/rrdcgi
        &lt;HTML&gt;
        &lt;HEAD&gt;&lt;TITLE&gt;RRDCGI Demo&lt;/TITLE&gt;&lt;/HEAD&gt;
        &lt;BODY&gt;
        &lt;H1&gt;RRDCGI test Page&lt;/H1&gt;
        &lt;RRD::GRAPH
         /.../web/pngs/testhvt.png
         --imginfo '&lt;IMG SRC=/.../pngs/%s WIDTH=%lu HEIGHT=%lu &gt;'
         --lazy --start -1d --end now
         DEF:http_src=/.../rrds/test.rrd:http_src:AVERAGE
         AREA:http_src#00ff00:http_src
        &gt;
        &lt;/BODY&gt;
        &lt;/HTML&gt;

       Note 1: Replace /.../ with the relevant directories

       Note 2: The SRC=/.../pngs should be paths from the view of the webserver/browser

</pre><h4><b>AUTHOR</b></h4><pre>
       Tobias Oetiker &lt;<a href="mailto:tobi@oetiker.ch">tobi@oetiker.ch</a>&gt;

1.7.2                                              2025-03-04                                          <u><a href="../man1/RRDCGI.1.html">RRDCGI</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>