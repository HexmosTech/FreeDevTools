<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>icmake - A program maintenance (make) utility using a C-like grammar</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/icmake">icmake_13.02.00-1ubuntu1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       icmake - A program maintenance (<u>make</u>) utility using a <b>C</b>-like grammar

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>icmake</b> option(s) <u>[source</u> <u>[dest]]</u> [args]

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b><a href="../man1/Icmake.1.html">Icmake</a></b>(1)  is  a  generic  tool  for  program  maintenance which can be used as an alternative for, e.g.,
       <b><a href="../man1/make.1.html">make</a></b>(1). It’s a generic tool in that <u>icmake</u>-scripts, written in  a  language  closely  resembling  the  <b>C</b>
       programming language, can perform tasks that are traditionally the domain of scripting languages.

       This man-page consists of the following sections:

       o      <b>ICMAKE</b> <b>V.</b> <b>13.00.00</b> covers the changes since <b>icmake</b> version 12.03.00;

       o      <b>OPTIONS</b> covers <b>icmake</b>’s options;

       o      <b>EXECUTING</b> <b>ICMAKE</b> <b>SCRIPTS</b> covers how to call <b>icmake</b> scripts;

       o      <b>ICM-DEP</b> describes the <u>icm-dep</u> support program;

       o      <b>ICM-MULTICOMP</b> describes the <u>icm-multicomp</u> support program;

       o      <b>ICM-SPCH</b> describes the <u>icm-spch</u> support program;

       o      <b>ICM-UN</b> describes the <u>icm-un</u> support program;

       o      <b>FILES</b>  provides  an  overvieuw of the locations of <b>icmake</b> and its support programs (as used by the
              Debian Linux distribution);

       o      <b>EXAMPLES</b> contains references to locations containing some examples;

       o      <b>SEE</b> <b>ALSO</b> contains references to man-pages of <b>icmake</b> support programs  and  man-pages  of  programs
              related to <b>icmake</b>. In particular

              o      <b><a href="../man1/icmstart.1.html">icmstart</a></b>(1), describes how to initialize a directory for (<b>C++</b> or <b>C</b>) program development;

              o      <b><a href="../man1/icmbuild.1.html">icmbuild</a></b>(1), covers how to use <b>icmake</b> for the maintenance of such programs.

              o      <b><a href="../man7/icmscript.7.html">icmscript</a></b>(7)  covers the syntax and facilities of <b>icmake</b>’s scripting language, allowing you
                     to write your own <b>icmake</b> scripts.

       <b>Icmake</b> allows programmers to use a scripting language (closely resembling  the  well-known  <b>C</b>-programming
       language)  to  define  the  actions that are required for (complex) program maintenance. For this, <b>icmake</b>
       offers various special operators as well as a set of support functions that have shown  their  usefulness
       in program maintenance.

       <b>Icmake</b>  should  not  be confused with an Integrated Development Environment (IDE). <b>Icmake</b> merely performs
       tasks for which scripts can be written, and a minimal set of pre-defined scripts (<b>icmstart</b> and  <b>icmbuild</b>)
       that  have  proven  their  usefulness  when  developing and maintaining programs are included in <b>icmake’s</b>
       distribution.

       When using <b><a href="../man1/icmbuild.1.html">icmbuild</a></b>(1) for program maintenance the following <b>icmake</b> support programs are used:

       o      <u>icm-comp</u>       byte-code compiling an <b>icmake</b> script;

       o      <u>icm-dep</u>        handling class-dependencies;

       o      <u>icm-exec</u>       executing a byte-code compiled <b>icmake</b> script;

       o      <u>icm-multicomp</u>  (optionally) using multi-threaded source file compilation;

       o      <u>icm-pp</u>         pre-processing an <b>icmake</b> script;

       o      <u>icm-spch</u>       (optionally) constructing a project-wide Single Pre-Compiled Hbeader file (SPCH).

       In addition to the above programs the <b>icmake</b> project provides

       o      the <b>icmodmap</b> program can be used when developing <u>C++</u> programs using modules (cf.  the  <b><a href="../man1/icmodmap.1.html">icmodmap</a></b>(1)
              man-page);

       o      <u>icm-un</u>  disassembling  compiled <b>icmake</b> byte-code files (`<u>bim-files</u>’). <b>icm-un</b> is primarily used for
              illustration, education, and debugging  and  is  called  by  <b>icmake</b>  when  specifying  its  option
              <u>--unassemble</u> or <u>-u</u> (see also section <b>ICMUN</b>).

       Some  make-utilities  by  default  recompile  sources once header files are modified. When developing <b>C++</b>
       programs this is often not required, as adding new member functions  to  classes  does  not  require  the
       recompilatopm  of  all  source  files  of  those  classes. Class dependencies are optionally inspected by
       <b><a href="../man1/icmbuld.1.html">icmbuld</a></b>(1) (they are inspected when the <u>USE_ALL,</u> <u>SPCH</u>, and/or (now deprecated) <u>PRECOMP</u> <u>#define</u> directives
       in the <u>icmconf</u> file are activated (cf. the <b><a href="../man7/icmconf.7.html">icmconf</a></b>(7) man-page for details).

</pre><h4><b>ICMAKE</b> <b>V.</b> <b>13.00.00</b></h4><pre>
       In <b>icmake</b> version 13.00.00 the following modifications were implemented w.r.t. its version 12.03.00:

       o      option <u>--all</u> (<u>-a</u>) was added to the <b>icm-spch</b> program performing in  sequence  the  actions  of  its
              <u>--list,</u>  <u>--precompile,</u>  and  <u>--soft-link</u>  options.  Several existing options were altered. See the
              <b>ICM-SPH</b> section for details.

       o      the (internal) headers inspected by <u>icmake</u> <u>--spch</u> (or <u>-S</u>) are not modified anymore.

       o      to remove the (now obsoleted) <u>#ifndef</u> <u>SPCH</u><b>_</b> specifications from  files  listed  in  existing  <u>spch</u>
              files  written  by  previous versions of <b>icm-spch</b> the program <u>noifndef.cc</u>, available in the <b>icmake</b>
              source distribution in its <u>support/</u> sub-directory can be used  to  remove  existing  <u>#ifnef</u>  <u>SPCH</u><b>_</b>
              sections from a project’s <u>.ih</u> files;

       o      <b>icmake</b> <u>--source</u> compiles the <b>icmake</b> script to a temporary <u>.bim</u> file;

       o      the support program <u>icmun</u> was renamed to <b>icm-un</b> (called by <b>icmake</b> when specifying the <u>--unassemble</u>
              (<u>-u</u>) option, so in practice the name change is automatically handled).

       o      The  <b><a href="../man7/icmconf.7.html">icmconf</a></b>(7)  script  can  use  <u>-o</u>  in  its  <u>#define</u>  <u>SPCH</u>  specification. All (space character
              delimited) words following <u>-o</u> are passed to <b>icm-spch</b> as separate `<u>-o</u> <u>word</u>’ options;

       o      When developing <b>C++</b> programs the environment variable <u>ICMAKE_CXXFLAGS</u> is no longer  used.  Instead
              the environment variable <u>ICMAKE_CPPSTD</u> is used. Use this latter environment variable to define one
              point of maintenance specifying the version of the <b>C++</b> standard used when compiling sources;

       o      When  using  Debian  (or  a  comparable distributions) the script ’rebuild’ can be used to rebuild
              icmake’s binaries after installing ’libbobcat-dev’, resulting in a reduction  of  their  sizes  of
              about 40%.

       o      The <b>icmake</b> program itself was redesigned.

</pre><h4><b>OPTIONS</b></h4><pre>
       Where available, single letter options are listed between parentheses beyond their associated long-option
       variants.  <b>Icmake</b>  defines  <u>action</u>  options  and  <u>non-action</u>  options.  The  first  action option that is
       encountered is used.

       When using <b><a href="../man1/icmbuild.1.html">icmbuild</a></b>(1) for program maintenance <b>icmake</b> is called automatically, and the user doesn’t  have
       to specify any <b>icmake</b> options.

       o      <b>--about</b> (<b>-a</b>)
              Ends <b>icmake</b> after showing some information about <b>icmake</b>;

       o      <b>--compile</b> (<b>-c</b>) <u>[options]</u> <u>source</u> <u>[bim-file]</u>
              The  <b>icmake</b>  script  is  first  pre-processed  (see  option  <u>--preprocess</u>  below)  whereafter  the
              pre-processed file is compiled by <u>icm-comp</u> producing a <u>bim-file</u>.  If  the  <u>bim-file</u>  name  is  not
              specified then <u>source’s</u> base-name, receiving extension <u>.bim</u>, is used.
              If  <u>source</u>  is  a  previously  pre-processed  file then option <u>-P</u> can be specified to suppress its
              pre-processing. E.g.,

                  icmake -c -P source dest.bim

              If the bim-file exists and is younger than <u>source</u> then <u>source</u> is not compiled;

       o      <b>--dependencies</b> (<b>-d</b>) <u>[options]</u> <u>action</u>
              The <b>icm-dep</b> program is  called  determining  the  dependencies  among  classes.  All  options  and
              arguments  following  this  option  are forwarded to <b>icm-dep</b>. Refer to the <b>ICM-DEP</b> section of this
              man-page for information about <u>icm-dep</u>;

       o      <b>--execute</b> (<b>-e</b>) <u>[option]</u> <u>bim-file</u> <u>[arguments]</u>
              Executes the bim-file, Before specifying <u>bim-file</u> option <u>--no-version-check</u>  (see  below,  or  the
              equivalent short option <u>-n</u>) can be specified to allow mismatches between <b>icmake</b>’s main version and
              the <b>icmake</b> version that was used to compile the bim-file.
              Command-line arguments specified beyond <u>bim-file</u> are forwarded as arguments to the <u>bim-file’s</u> <u>main</u>
              function (cf. the <b><a href="../man7/icmscript.7.html">icmscript</a></b>(7) man-page for details about writing <b>icmake</b>-scripts);

       o      <b>--force</b> (<b>-f</b>) <u>[options]</u> <u>source</u> <u>[bim-file]</u>
              Acts  like  option  <u>--compile</u>,  but  compilation  is  always  performed,  even  if the bim-file is
              up-to-date;

       o      <b>--help</b> (<b>-h</b>)
              Ends <b>icmake</b> after providing usage info. Usage info is also provided when <b>icmake</b> is started without
              arguments;

       o      <b>--multicomp</b> (<b>-m</b>) <u>[options]</u> <u>jobs</u> <u>’compiler-spec’</u>
              The  optional  <u>options</u>  are  the  options  passed  to  the  <u>icm-multicomp</u>  program  (cf.   section
              <b>ICM-MULTICOMP</b> below).
              See   also  the  <b><a href="../man7/icomonf.7.html">icomonf</a></b>(7)  man-page’s  <u>#define</u>  <u>MULTICOMP</u>  directive:  when  specified  threaded
              compilation is automatically used;

       o      <b>--no-process</b> (<b>-N</b>)
              Implies option <u>--verbose</u> (see  below).  This  option  is  recognized  by  options  <u>--dependencies,</u>
              <u>--execute,</u>  <u>--source</u>  and <u>-t</u> (either as two separate options or by `gluing’ both options together,
              like <u>-Ne</u>). When specified, the support program is not run, but the command(s) that would have been
              used are shown to the standard output;

       o      <b>--no-version-check</b> (<b>-n</b>)
              This option is available with the action options <u>--execute,</u> <u>--source,</u> <u>--unassemble</u>, and  <u>-t</u>.  When
              specified  the  main  versions  stored in the specified icm-bim file and <b>icmake</b> itself may differ.
              This option should normally not be required, but was primarily added for development purposes;

       o      <b>--preprocess</b> (<b>-p</b>)  <u>[options]</u> <u>source</u> <u>[pim-file]</u>
              The file specified as first argument is pre-processed,  producing  a  `<u>.pim</u>’  file.  If  a  second
              filename  argument  is  provided  then that file becomes the <u>.pim</u> file. If not specified, then the
              first filename, using the extension <u>.pim</u>, is used.
              With this option pre-processor symbol-defining options can be used: symbols whose  values  can  be
              used in <u>source</u>. E.g., when issuing the command

                  icmake -p -d one --define two source dest.pim

              <b>icmake</b>  pre-processes <u>source</u>, defines the pre-processor symbols <u>one</u> and <u>two</u> (each having value 1),
              and produces the pim-file <u>dest.pim</u>. Note that instead of using long options <u>--define</u> short options
              <u>-d</u> can also be used;

       o      <b>--spch</b> (<b>-S</b>) <u>...</u>
              A SPCH is built. All options and arguments following <u>--spch</u> are forwarded to the <u>icm-spch</u>  support
              program.  (cf. section <b>ICM-SPCH</b> below).
              See  also the <b><a href="../man7/icomonf.7.html">icomonf</a></b>(7) man-page’s <u>#define</u> <u>SPCH</u> directive: when specified a SPCH is automatically
              constructed;

       o      <b>--source</b> (<b>-s</b>)  <u>[options]</u> <u>source</u> <u>[arguments]</u>
              <b>Icmake</b> uses <u>--compile</u> to compile the <b>icmake</b> source file specified as first argument  (constructing
              a  temporary  bim-file) and then uses <u>--execute</u> to execute the bim-file, forwarding any subsequent
              <u>arguments</u> as arguments to the <u>bim-file’s</u> <u>main</u> function.
              Following the <u>--source</u> option options available for <b>icmake</b>’s <u>--compile</u> command can  be  specified.
              Following  those  options  options  of  <b>icmake</b>’s  <u>--execute</u> options can be specified. Those latter
              options must be preceded by <u>--execute</u> or <u>-e</u>. E.g., when issuing the command

                  icmake -s -d one -en source

              then <b>icmake</b> first compiles <u>source</u> after defining the pre-processor symbol <u>one</u>, and  then  executes
              the bim-file, passing <u>--no-version-check</u> to <u>icm-exec</u>;

       o      <b>-t</b> <u>tmpspec</u> <u>[options]</u> <u>source</u> <u>[arguments]</u>
              This  option  is intended for <b>icmake</b>-scripts although it can also be used in a command-line <b>icmake</b>
              call. The <u>-t</u> option can be used in quite a few different ways which is covered in the next section
              (<b>EXECUTING</b> <b>ICMAKE</b> <b>SCRIPTS</b>).

       o      <b>--tmpdir</b>=<u>directory</u> (<b>-T</b>)
              By default temporary files are created in the <u><a href="file:/tmp">/tmp</a></u> sub-directory, or in the user’s home  (<u>${HOME}</u>)
              directory  if  <u><a href="file:/tmp/">/tmp/</a></u>  cannot  be  used.  To  specify another directory to write temporary files in
              <b>icmake</b>’s option <u>--tmpdir</u> (or <u>-T</u>) can be specified, followed by the name of an (existing) directory
              to use for temporary files.
              E.g., when compiling an <b>icmake</b> file <u>main.im</u>, the output of <b>icmake</b>’s pre-processor is written to  a
              temporary file which is removed after compilation. To write the temporary file to <u><a href="file:~/.icmake">~/.icmake</a></u> <b>icmake</b>
              can be called as

                  icmake -T <a href="file:~/.icmake">~/.icmake</a> -c main.im

       o      <b>--unassemble</b> (<b>-u</b>)
              The  file  specified  as  first  argument is an <b>icmake</b> bim-file, which is unassembled (cf. section
              <b>ICM-UN</b> below for more information about unassembling <b>icmake</b> bim-files);

       o      <b>--verbose</b> (<b>-V</b>)
              <b>Icmake</b> child processes and their arguments are written to the standard output stream  before  they
              are  called.  This  option  may  precede  `action’  options (<u>-c,</u> <u>-d,</u> <u>-e,</u> <u>-s</u> and <u>-u</u>), either as two
              separate options or by `gluing’ both options together, like <u>-Ve</u>.

       o      <b>--version</b> (<b>-v</b>)
              Ends <b>icmake</b> after displaying its version.

</pre><h4><b>EXECUTING</b> <b>ICMAKE</b> <b>SCRIPTS</b></h4><pre>
       The <u>-t</u> option is available primarily for being used in executable  <b>icmake</b>  scripts.  The  first  line  of
       executable <b>icmake</b> scripts consists of the following components:

       o      a <u>shebang</u> (<u>#!</u>) specification followed by <b>icmake</b>’s location;

       o      the <u>-t</u> option followed by its argument (see below);

       and optionally:

       o      compilation and execution options (specified as described at the <u>--source</u> option);

       o      a  non-option  component (e.g., <u>:</u>) which will be replaced by the location of the executable <b>icmake</b>
              script;

       o      remaining components on the first line are forwarded as-is to the <b>icmake</b> script’s <u>main</u> function;

       E.g., the following simple <u>icm</u> executable script `<u>args</u>’ could be defined in <u><a href="file:~/bin">~/bin</a></u>:
           #!/usr/bin/icmake -t. -d one : two --dir three
           void main(int argc, list argv)
           {
               #ifdef one
                   printf &lt;&lt; "one is defined\n";
               #endif
               printf &lt;&lt; argc &lt;&lt; " arguments: " &lt;&lt; argv &lt;&lt; ’\n’;
           }

       When it’s called as <u><a href="file:~/bin/args">~/bin/args</a></u> <u>four</u> <u>five</u> then the arguments <u>four</u> and <u>five</u> are  added  to  the  <u>two</u>  <u>--dir</u>
       <u>three</u>  arguments  already  specified  by  the  script itself. Called this way the script outputs. Its 1st
       argument is the name of a temporary <u>.bim</u> file which is different at each new call:
           one is defined
           /tmp/F04dgh two --dir three four five

       The argument of the <u>-t</u> option is used to specify the location of the files used  by  <b>icmake</b>’s  <u>-t</u>  option
       (<u>/dir</u> can also be specified as multiple directories, like <u>/dir/sub1/sub2</u>):

       o      if it’s a single dot (<u>-t.</u>) the compiled (temporary) bim-file is written in <b>icmake</b>’s directory used
              for temporary files (e.g., <u><a href="file:/tmp">/tmp</a></u> or <u>$HOME</u>);

       o      if  it’s  <u><a href="file:~/dir">~/dir</a></u> or <u>/dir</u> then <b>icmake</b> writes temporary files in the specified directory, replacing <u>~</u>
              by the user’s <u>$HOME</u> directory;

       o      if it’s <u><a href="file:~/dir/name">~/dir/name</a></u> or <u>/dir/name</u> then <u>[~]/dir/name</u> specifies the path of the  compiled  <u>.bim</u>  file,
              writing  all  other  temporary files in the same directory as the <u>.bim</u> file. The <u>.bim</u> file is kept
              after execution (allowing it to be executed repeatedly using ’<b>icmake</b> <u>-e</u>’).  The  <b>icmake</b>-script  is
              not compiled if the <u>.bim</u> file is younger than the script.

</pre><h4><b>ICM-DEP</b></h4><pre>
       <b>Icm-dep</b>  is  a support program called by <b>icmake</b> <u>--dependencies</u> (or its short alternative <u>-d</u>) to determine
       source- and precompiled-header file dependencies.

       When using <b><a href="../man1/icmbuild.1.html">icmbuild</a></b>(1) and an <u>icmconf</u> file contains the <u>#define</u> <u>SPCH</u> directive <b>icmake</b>  <u>-d</u>  is  not  used;
       instead, directories inspected when using a SPCH are automatically inspected (and updated when necessary)
       by <b>icmake</b> <u>-S</u>.

       <b>Icmake</b> <u>-d</u>’s synopsis is
           icmake -d [options] argument
       Specifications following <u>-d</u> are forwared to <b>icm-dep</b>. The following options can be specified after <u>-d</u>:

       o      <b>--classes</b>=<u>filename</u> (<b>-c</b>)
              By default, <b>icm-dep</b> inspects dependencies of the directories mentioned in the file <u>CLASSES</u>. If the
              <b><a href="../man7/icmconf.7.html">icmconf</a></b>(7)   file  specifies  <u>PARSER_DIR</u>  and/or  <u>SCANNER_DIR</u>  then  those  directories  are  also
              considered.  Use this option to specify the  file  containing  the  names  of  directories  to  be
              inspected by <b>icm-dep</b>.

       o      <b>--gch</b>
              If  an  <u>icmconf</u>  file  specifies  the (deprecated) <u>#define</u> <u>PRECOMP</u> directive then <b>icmake</b> <u>-d</u> checks
              whether precompiled headers must be refreshed.  If an <u>icmconf</u> file  does  not  contain  a  <u>#define</u>
              <u>PRECOMP</u>  diretive,  but precompiled headers should nonetheless be inspected, then option <u>--gch</u> can
              be specified;

       o      <b>--help</b> (<b>-h</b>)
              A summary of <b>icm-dep</b>’s usage is written to the standard output and <b>icmake</b> terminates, returning  0
              to the operating system;

       o      <b>--icmconf</b>=<u>filename</u> (<b>-i</b>)
              By  default  <b>icmake</b>  <u>-d</u>  inspects  the content of <u>icmconf</u> files, This option is used if instead of
              <u>icmconf</u> another file should be inspected;

       o      <b>--mainih</b>=<u>mainheader</u> (<b>-m</b>)
              In the <u>icmconf</u> file the <u>#define</u> <u>IH</u> directive is used to specify the suffix of class  header  files
              that  should  be  precompiled,  assuming  that  their  filenames  are  equal  to  the names of the
              directories which are listed in the <u>CLASSES</u> file. But <u>CLASSES</u> does not specify  the  name  of  the
              program’s  top-level  directory.  This  option is used to specify the name of the top-level header
              file to precompile. By default <u>main.ih</u> is used;

       o      <b>--no-gch</b>
              If an <u>icmconf</u> file contains a (deprecated) <u>#define</u> <u>PRECOMP</u> directive  but  <b>icmake</b>  <u>-d</u>  should  not
              check whether precompiled headers must be refreshed then specify option <u>--no-gch</u>;

       o      <b>--no-use-all</b>
              If this option is specified then the <u>#define</u> <u>USE_ALL</u> <u>"filename"</u> directive in the <u>icmconf</u> file (cf.
              <b><a href="../man7/icmconf.7.html">icmconf</a></b>(7)) is ignored;

       o      <b>--use-all</b>=<u>filename</u>
              If  this option is specified then all files in directories containing the file <u>filename</u> and source
              files in directories (recursively) depending on the files in those directories are recompiled;

       o      <b>--verbose</b> (<b>-V</b>)
              This option can be specified multiple times. The number of times it is  specified  determines  the
              verbosity  of <b>icmake</b> <u>-d</u>’s output. If not specified then <b>icmake</b> <u>-d</u> silently performs its duties. If
              specified once (which is the default specification), then <b>icmake</b> <u>-d</u> writes to the standard  output
              the  actions it performs; if specified twice it also reports non-default options and automatically
              included directories; if specified three times it also reports class  dependencies;  if  specified
              more  often  it reports what files it encountered and what decision it would make when <u>go</u> would be
              specified;

       o      <b>--version</b> (<b>-v</b>)
              <b>Icmake</b> <u>-d</u> writes <b>icm-dep</b>’s version number to the standard output and terminates,  returning  0  to
              the operating system.

       Following  the  non-terminating  options  argument <u>go</u> must be specified to allow <b>icmake</b> <u>-d</u> to perform its
       actions. Specifying another argument results in a `dry run’: it analyzes dependencies, but  won’t  remove
       or touch files.

       <b>Icmake</b>  <u>-d</u>  can  be  used  for software projects which are developed as described in the C++ Annotations,
       section <u>Header</u> <u>file</u> <u>organization</u> in chapter <u>Classes</u>. For those projects classes are  developed  in  their
       own  directories,  which  are direct sub-directories of the project’s main program directory. Their class
       interfaces are provided in class-header files bearing the names of the class-directories, and all headers
       that are required by the class’s sources are declared in  a  separate  <u>internal</u>  <u>header</u>  files,  commonly
       having extensions <u>.ih</u>.

</pre><h4><b>ICM-MULTICOMP</b></h4><pre>
       <b>Icmake</b> supports multi-threaded source-file compilation, often significantly reducing the compilation time
       of  the source files of projects. When using <b><a href="../man1/icmbuild.1.html">icmbuild</a></b>(1) multi-threaded compilation is automatically used
       when <u>icmconf</u> files contain the <u>#define</u> <u>MULTICOMP</u> directive  (cf.  <b><a href="../man7/icmconf.7.html">icmconf</a></b>(7)).  It  can  also  be  called
       independently from <u>icmconf</u> using <b>icmake</b>’s <u>--multicomp</u> (or <u>-m</u>) option.

       <b>Icmake</b> <u>-m</u>’s synopsis is
           icmake -m [options] arguments

       <b>Icmake</b> <u>-m</u> accepts the following options:

       o      <b>--help</b> (<b>-h</b>)
              <b>Icmake</b>  <u>-m</u> writes a summary of its usage to the standard output and terminates, returning 0 to the
              operating system;

       o      <b>--nr</b> (<b>-n</b>)
              When compiling source files and option <u>--nr</u> is specified then the thread number compiling a source
              file is written to the standard output stream.

       o      <b>--quiet</b> (<b>-q</b>)
              When this options is not specified then the path names of the compiled object and source files are
              written to the standard  output  stream.  When  it  is  specified  once  only  the  source  files’
              directories and filenames are written to the standard output stream, and when it is specified more
              than once no information about the compiled files is written to the standard output stream.

       o      <b>--threads</b>=<u>nThreads</u> (<b>-t</b>)
              By  default  the  computer’s  number  of  cores  determines  the number of threads being used when
              compiling the source files. A different number of threads can  be  requested  using  this  option,
              e.g., <u>--threads</u> <u>5</u>.

       o      <b>--version</b> (<b>-v</b>)
              <b>Icmake</b>  <u>-m</u>  reports  its  version number to the standard output and terminates, returning 0 to the
              operating system.

       <b>Icmake</b> <u>-m</u> needs one command-line argument and an optional second argument:

       o      the first argument is the  name  of  the  file  specifying  which  files  must  be  compiled.  Use
              <b><a href="../man1/icmbuild.1.html">icmbuild</a></b>(1) to write this file. It can also be constructed otherwise:
              The  specified file must contain groups of file specifications where each group starts with a line
              like <u>:</u> <u>support</u> <u>tmp/o</u> <u>5</u> where the 2nd element (here: <u>support</u>) specifies the (sub-)directory of  the
              source  files (use <u>.</u> to refer to the project’s top-level directory); the 3rd element (here: <u>tmp/o</u>)
              specifies the destination directory of the compiled files (which is created if not existing);  and
              the 4th element (here: <u>t</u>) specifies the prefix to add in front of the compiled object files.
              Following  this line the remaining lines of a group specify the names of the source files (located
              in specified (sub-)directory) to compile.
              Once the compilation ends (either because all files were  successfully  ccompiled,  or  because  a
              compilation failed) the specification file is removed;

       o      the second argument is optional. By default the following specification is used  (all on one line)

                  g++ -c -o $2 ${ICMAKE_CPPSTD} --Wall -Werror $1

              Here  <u>$1</u>  is  replaced  by  the  location  of the source file to compile and <u>$2</u> is replaced by the
              location of the compiled object  file.  If  the  environment  variable  <u>ICMAKE_CPPSTD</u>  is  defined
              (specifying  the  <b>C++</b>  standard  to  use, e.g., <u>ICMAKE_CPPSTD=--std=c++26</u>) then its value replaces
              <u>${ICMAKE_CPPSTD}</u> in the specification.
              If the default compiler specification cannot be used the command to compile source  files  can  be
              provided as <b>icmake</b> <u>-m</u>’s second command-line argument, which should be quoted, like

                  ’g++ -c -o $2 ’${ICMAKE_CPPSTD}’ --Wall -Werror $1’

              or  the  second  command-line argument can be <u>f:file</u>, where <u>file</u> is the name of a file whose first
              line contains the specification of the command compiling source files (which must specify  <u>$1</u>  and
              <u>$2</u> and optionally <u>$ICMAKE_CPPSTD</u>).
              The  <u>PATH</u>  environment  variable  is used to locate the compiler; the compiler’s absolute path can
              also be specified.

</pre><h4><b>ICM-SPCH</b></h4><pre>
       Single Pre-Compiled Headers (SPCH) are available using <b>icmake</b> <u>--spch</u> (or <u>-S</u>).

       <b>Icmake</b> <u>-S</u>’s synopsis is
           icmake -S [options] arguments

       <b>Icmake</b> <u>-S</u> accepts the following options:

       o      <b>--all</b>=<u>file</u> (<b>-a</b>)
              Call in sequence <b>icm</b> <u>-S</u>’s options <u>--list,</u> <u>--precompile</u>, and <u>--soft-links</u> (see below),  where  <u>file</u>
              is written by option <u>--list</u> and used as option argument for <u>--precompile</u> and <u>--soft-links</u>;

       o      <b>--classes</b>=<u>filename</u> (<b>-c</b>)
              The  file  <u>filename</u> is the name of a file containing a list of directories inspected by the <u>--list</u>
              option (by default CLASSES). The project’s top directory is  automatically  inspected  unless  the
              option <u>--no-topdir</u> is specified;

       o      <b>--help</b> (<b>-h</b>)
              <b>Icmake</b>  <u>-S</u> writes a summary of its usage to the standard output and terminates, returning 0 to the
              operating system;

       o      <b>--internal</b>=<u>.ext</u> (<b>-i</b>)
              <u>.ext</u> is the extension used for the internal headers (including the dot). By default <u>.ih</u> is used;

       o      <b>--list</b> (<b>-l</b>)
              Ignored when option <u>--all</u> is specified.
              Write the names of the files to process when constructing an SPCH to the file specified as  <b>icmake</b>
              <u>-S</u>’s  first  command  line argument. The specified filename may not have an extension or directory
              specifications (e.g., <u>spch</u>);

       o      <b>--no-topdir</b> (<b>-n</b>)
              Ignore the internal header found in the project’s top directory. This option is used  when,  e.g.,
              merely constructing a library instead of a program;

       o      <b>--precompile</b>=<u>file</u> (<b>-p</b>)
              Precompile  <u>file</u>  (the name of the file specified at the option <u>--list</u>) to the SPCH file specified
              as  <b>icmake</b>  <u>-S</u>’s  first  command-line  argument.  If  that  argument  ends  in  <u>/</u>  then  the  SPCH
              <u>’argument’file.gch</u> is written.
              By default the SPCH is constructed by the following command (all on one line):

                  g++ -c -o $2 ${ICMAKE_CPPSTD} -Wall -Werror -O2 -x c++-header $1

              Here,  $1  is replaced by ’file’, and $2 is replaced by the name of the SPCH, while <u>$ICMAKE_CPPSTD</u>
              refers to the value of the <u>ICMAKE_CPPSTD</u> environment variable (specifying the <b>C++</b> standard to use,
              e.g., ICMAKE_CPPSTD=--std=c++26).
              Alternatively, the command constructing the SPCH can be provided as second command-line  argument,
              which should be quoted like

                  ’g++ -c -o $2 ’${ICMAKE_CPPSTD}’ -Wall -Werror -O2 -x c++-header $1’

              or  the  second  command-line argument can be <u>f:file</u>, where <u>file</u> is the name of a file whose first
              line specifies the command constructing the SPCH (which must specify  <u>$1</u>  and  <u>$2</u>  and  optionally
              <u>$ICMAKE_CPPSTD</u>).
              The  <u>PATH</u>  environment  variable  is used to locate the compiler; the compiler’s absolute path can
              also be used.

       o      <b>--quiet</b> (<b>-q</b>)
              By default the (<u>g++</u>) command constructing the single precompiled header  file  is  echoed  to  the
              standard output stream. Specify this option to suppress writing the command to the standard output
              stream.

       o      <b>--soft-links</b>=<u>file</u> (<b>-s</b>)
              Ignored when option <u>--all</u> is specified.
              This option uses the same arguments as used with the <u>--precompile</u> option. This option creates <u>.gch</u>
              soft-links from the header files listed in <u>file</u> to the generated SPCH-file;

       o      <b>--unused</b>=<u>regex</u> (<b>-u</b>)
              In  practice  this  option is probably not required, but files matching (POSIX extended) <u>regex</u> are
              not inspected by <b>icmake</b> <u>-S</u>. When used specifications like  <u>(...)|(...)</u>  can  be  used  to  specify
              multiple  regexes.  Alternatively  <u>f:file</u>  can  be used as option argument to specify a file whose
              non-empty lines contain regexes;

       o      <b>--version</b> (<b>-v</b>)
              <b>Icmake</b> <u>-S</u> writes its version number to the standard output and  terminates,  returning  0  to  the
              operating system;

       o      <b>--warn</b> (<b>-w</b>)
              interactively  warn when existing header files are about to be modified, accepting or refusing the
              modifications. Once refused <b>icm-spch</b> ends.

       <b>Icmake</b> <u>-S</u> needs one, and optionally two arguments, which were described at the <u>--list,</u> <u>--precompile</u>,  and
       <u>soft-links</u> option descriptions.

       Pre-compiled  headers  have  been  available  for  quite  some  time, and usually result in a significant
       reduction of the compilation time. Using single precompiled headers  results  in  a  large  reduction  of
       required disk-space compared to using precompiled headers for separate directories.

       When  using  SPCHs  almost  identical  precompiled headers for separate directories are avoided: only one
       precompiled header is constructed which is then used  by  all  components  of  a  project.  As  identical
       sections are avoided the sizes (and construction times) of SPCHs are much smaller, usually requiring only
       5  to  10  %  of the space (and construction time) ccompared to using separately constructed pre-compiled
       headers.

       SPCHs can easily be used in combination with <b><a href="../man1/icmbuild.1.html">icmbuild</a></b>(1). Often a specification in  a  project’s  <u>icmconf</u>
       file like <u>#define</u> <u>SPCH</u> <u>""</u> is all it takes (cf. <b><a href="../man7/icmconf.7.html">icmconf</a></b>(7)).

</pre><h4><b>ICM-UN</b></h4><pre>
       The  support  program  <b>icm-un</b> is called by <b>icmake</b> <u>-u</u>, expecting one argument, a bim-file. It disassembles
       the binary file an shows the assembler instructions and the structure of the bim-file.

       As an illustration, assume the following script is compiled by <u>icmake</u> <u>-c</u> <u>demo.im</u>):

           void main()
           {
               printf &lt;&lt; "hello world\n";
           }

       the resulting <u>demo.bim</u> file is disasembled by <b>icmake</b> <u>-u</u> <u>demo.bim</u> writing the following  to  the  standard
       output fle:

           icm-un by Frank B. Brokken (<a href="mailto:f.b.brokken@rug.nl">f.b.brokken@rug.nl</a>)
           icm-un V12.04.00
           Copyright (c) GPL 1992-2024. NO WARRANTY.

           Binary file statistics:
               strings      at offset  0x0025
               variables    at offset  0x0033
               filename     at offset  0x0033
               code         at offset  0x0014
               first opcode at offset  0x0021

           String constants dump:
               [0025 (0000)] ""
               [0026 (0001)] "hello world."

           Disassembled code:
               [0014] 06 01 00   push string "hello world."
               [0017] 05 01 00   push int 0001
               [001a] 1b 1d      callrss 1d (printf)
               [001c] 1c 02      add sp, 02
               [001e] 04         push int 0
               [001f] 24         pop reg
               [0020] 23         ret
               [0021] 21 14 00   call [0014]
               [0024] 1d         exit

       Offsets  are shown using the hexadecimal number system and are absolute byte offsets in the bim-file. The
       string constants dump also shows, between parentheses, the offsets of the individual strings relative  to
       the  beginning  of  the  strings  section.  The  output also shows the opcodes of the instructions of the
       compiled <u>.im</u> source files. If opcodes use arguments then these argument values are shown following  their
       opcodes.  Each  opcode  line ends by showing the opcode’s mnemonic plus (if applicable) the nature of its
       argument.

</pre><h4><b>FILES</b></h4><pre>
       The mentioned paths are the ones that are used in the source distribution and  are  used  by  the  Debian
       Linux distribution. However, they are sugestive only and may have been configured differently:

       Binary programs:

       o      <b>/usr/bin/icmake</b>: the main <b>icmake</b> program;

       o      <b>/usr/bin/icmbuild</b>:  the  wrapper  program  around  the  <u>icmbuild</u>  script handling standard program
              maintenance;

       o      <b>/usr/bin/icmodmap</b>: the module mapper which initializes  the  maintenance  of  <b>C++</b>  programs  using
              modules;

       o      <b>/usr/bin/icmstart</b>:  an  <b>icmake</b>-script  that  is  can  be  used  to create the startup-files of new
              projects;

       Support programs:

       o      <b>/usr/libexec/icmake/icm-comp</b>: the compiler called by <b>icmake</b>;

       o      <b>/usr/libexec/icmake/icm-dep</b>: the support program handling class-dependencies;

       o      <b>/usr/libexec/icmake/icm-exec</b>: the byte-code interpreter;

       o      <b>/usr/libexec/icmake/icm-multicomp</b>: the multi-thread source file compiler;

       o      <b>/usr/libexec/icmake/icm-pp</b>: the preprocessor called by <b>icmake</b>;

       o      <b>/usr/libexec/icmake/icm-spch</b>: the program preparing SPCHs;

       o      <b>/usr/libexec/icmake/icm-un</b>: the <b>icmake</b> unassembler.

</pre><h4><b>EXAMPLES</b></h4><pre>
       The distribution (usually in <u>/usr/share/doc/icmake</u>) contains a directory <u>examples</u>  containing  additional
       examples  of  <b>icmake</b>  script. The <u>icmstart</u> script is an <b>icmake</b> script as is <u>/usr/libexec/icmake/icmbuild</u>,
       which is called by the <u>/usr/bin/icmbuild</u> program. See  also  the  <b>EXAMPLE</b>  section  in  the  <b><a href="../man7/icmscript.7.html">icmscript</a></b>(7)
       man-page.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man1/chmod.1.html">chmod</a></b>(1), <b><a href="../man1/icmbuild.1.html">icmbuild</a></b>(1), <b><a href="../man7/icmconf.7.html">icmconf</a></b>(7), <b><a href="../man1/icmodmap.1.html">icmodmap</a></b>(1), <b><a href="../man7/icmscript.7.html">icmscript</a></b>(7), <b><a href="../man1/icmstart.1.html">icmstart</a></b>(1), <b><a href="../man7/icmstart.rc.7.html">icmstart.rc</a></b>(7), <b><a href="../man1/make.1.html">make</a></b>(1)

</pre><h4><b>BUGS</b></h4><pre>
       None reported.

</pre><h4><b>COPYRIGHT</b></h4><pre>
       This is free software, distributed under the terms of the GNU General Public License (GPL).

</pre><h4><b>AUTHOR</b></h4><pre>
       Frank B. Brokken (<b><a href="mailto:f.b.brokken@rug.nl">f.b.brokken@rug.nl</a></b>).

icmake.13.02.00                                     1992-2025                                          <u><a href="../man1/icmake.1.html">icmake</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>