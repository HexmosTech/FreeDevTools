<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>sieve-test - Pigeonhole's Sieve script tester</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/dovecot-sieve">dovecot-sieve_2.3.21.1+dfsg1-1ubuntu2_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       sieve-test - Pigeonhole's Sieve script tester

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>sieve-test</b> [<u>options</u>] <u>script-file</u> <u>mail-file</u>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The  <b>sieve-test</b>  command  is  part of the Pigeonhole Project (<b><a href="../man7/pigeonhole.7.html">pigeonhole</a></b>(7)), which adds Sieve (RFC 5228)
       support to the Dovecot secure IMAP and POP3 server (<b><a href="../man1/dovecot.1.html">dovecot</a></b>(1)).

       Using the <b>sieve-test</b> command, the execution of Sieve scripts can be tested. This evaluates the script for
       the provided message, yielding a set of Sieve actions. Unless the <b>-e</b> option is  specified,  it  does  not
       actually  execute  these actions, meaning that it does not store or forward the message anywere. Instead,
       it prints a detailed list of what actions  would  normally  take  place.  Note  that,  even  when  <b>-e</b>  is
       specified,  no  messages are ever transmitted to remote SMTP recipients. The outgoing messages are always
       printed to <b>stdout</b> instead.

       This is a very useful tool to debug the execution of Sieve scripts.  It  can  be  used  to  verify  newly
       installed  scripts  for  the intended behaviour and it can provide more detailed information about script
       execution problems that are reported by the Sieve plugin,  for  example  by  tracing  the  execution  and
       evaluation of commands and tests respectively.

</pre><h4><b>OPTIONS</b></h4><pre>
       <b>-a</b> <u>orig-recipient-address</u>
              The  original  envelope recipient address. This is what Sieve's envelope test will compare to when
              the "to" envelope part is requested. Some tests and actions will  also  use  this  as  the  script
              owner's  e-mail  address.  If  this option is omitted, the recipient address is retrieved from the
              "Envelope-To:", or "To:" message headers.  If  none  of  these  headers  is  present  either,  the
              recipient address defaults to <u><a href="mailto:recipient@example.com">recipient@example.com</a></u>.

       <b>-c</b> <u>config-file</u>
              Alternative Dovecot configuration file path.

       <b>-C</b>     Force  compilation.  By  default, the compiled binary is stored on disk. When this binary is found
              during the next execution of <b>sieve-test</b> and its modification time is more recent than  the  script
              file,  it  is  used  and  the  script  is  not compiled again. This option forces the script to be
              compiled, thus ignoring any present binary. Refer to <b><a href="../man1/sievec.1.html">sievec</a></b>(1) for more  information  about  Sieve
              compilation.

       <b>-D</b>     Enable Sieve debugging.

       <b>-d</b> <u>dump-file</u>
              Causes  a dump of the generated code to be written to the specified file. This is identical to the
              dump produced by <b><a href="../man1/sieve-dump.1.html">sieve-dump</a></b>(1). Using '-' as filename causes the dump to be written to <b>stdout</b>.

       <b>-e</b>     Enables true execution of the set of actions that results from running the script. In  combination
              with  the  <b>-l</b>  parameter,  the  actual delivery of messages can be tested. Note that this will not
              transmit any messages to remote SMTP recipients. Such actions only print the outgoing  message  to
              <b>stdout</b>.

       <b>-f</b> <u>envelope-sender</u>
              The envelope sender address (return path). This is what Sieve's envelope test will compare to when
              the  "from"  envelope  part  is requested. Also, this is where response messages are 'sent' to. If
              this option is omitted, the sender address is retrieved  from  the  "Return-Path:",  "Sender:"  or
              "From:"  message  headers. If none of these headers is present either, the sender envelope address
              defaults to <u><a href="mailto:sender@example.com">sender@example.com</a></u>.

       <b>-l</b> <u>mail-location</u>
              The location of the user's mail store. The syntax of  this  option's  <u>mail-location</u>  parameter  is
              identical to what is used for the mail_location setting in the Dovecot config file. This parameter
              is typically used in combination with <b>-e</b> to test the actual delivery of messages. If <b>-l</b> is omitted
              when <b>-e</b> is specified, mail store actions like fileinto and keep are skipped.

       <b>-m</b> <u>default-mailbox</u>
              The mailbox where the keep action stores the message. This is "INBOX" by default.

       <b>-o</b> <u>setting</u><b>=</b><u>value</u>
              Overrides  the  configuration  <u>setting</u> from <u>/etc/dovecot/dovecot.conf</u> and from the userdb with the
              given <u>value</u>.  In order to override multiple settings, the <b>-o</b>  option  may  be  specified  multiple
              times.

       <b>-r</b> <u>recipient-address</u>
              The  final  envelope recipient address. Some tests and actions will use this as the script owner's
              e-mail address. For example, this is what is used by the vacation action to check whether a  reply
              is  appropriate. If the <b>-r</b> option is omitted, the original envelope recipient address will be used
              instead (see <b>-a</b> option for more info).

       <b>-s</b> <u>script-file</u>
              Specify additional scripts to be executed before  the  main  script.  Multiple  <b>-s</b>  arguments  are
              allowed  and the specified scripts are executed sequentially in the order specified at the command
              line.

       <b>-t</b> <u>trace-file</u>
              Enables runtime trace debugging. Trace debugging  provides  detailed  insight  in  the  operations
              performed  by  the  Sieve  script.  Refer  to the runtime trace debugging section below. The trace
              information is written to the specified file.  Using '-' as filename causes the trace data  to  be
              written to <b>stdout</b>.

       <b>-T</b> <u>trace-option</u>
              Configures  runtime  trace  debugging,  which is enabled with the -t option.  Refer to the runtime
              trace debugging section below.

       <b>-u</b> <u>user</u>
              Run the Sieve script for the given <u>user</u>. When omitted, the  <u>command</u>  will  be  executed  with  the
              environment of the currently logged in user.

       <b>-x</b> <u>extensions</u>
              Set the available extensions. The parameter is a space-separated list of the active extensions. By
              prepending  the extension identifiers with <b>+</b> or <b>-</b>, extensions can be included or excluded relative
              to the configured set of active extensions. If no extensions have a <b>+</b>  or  <b>-</b>  prefix,  only  those
              extensions  that  are  explicitly  listed  will  be  enabled. Unknown extensions are ignored and a
              warning is produced.

              For example <b>-x</b> "+imapflags -enotify" will enable the deprecated imapflags  extension  and  disable
              the  enotify  extension.  The  rest  of  the active extensions depends on the <u>sieve_extensions</u> and
              <u>sieve_global_extensions</u>    settings.    By    default,    i.e.     when    <u>sieve_extensions</u>    and
              <u>sieve_global_extensions</u>  remain  unconfigured,  all supported extensions are available, except for
              deprecated extensions or those that are still under development.

</pre><h4><b>ARGUMENTS</b></h4><pre>
       <u>script-file</u>
              Specifies the script to (compile and) execute.

              Note that this tool looks for a pre-compiled binary file with a <u>.svbin</u> extension and with basename
              and path identical to the specified script. Use the <b>-C</b> option to disable this behavior by  forcing
              the script to be compiled into a new binary.

       <u>mail-file</u>
              Specifies the file containing the e-mail message to test with.

</pre><h4><b>USAGE</b></h4><pre>
   <b>RUNTIME</b> <b>TRACE</b> <b>DEBUGGING</b>
       Using  the  <b>-t</b>  option,  the <b>sieve-test</b> tool can be configured to print detailed trace information on the
       Sieve script execution to a file or standard output. For example, the encountered commands, the performed
       tests and the matched values can be printed.

       The runtime trace can be configured using the <b>-T</b> option, which can be specified multiple times. It can be
       used as follows:

       <b>-Tlevel=...</b>
         Set the detail level of the trace debugging. One of the following values can be supplied:

         <u>actions</u> (default)
            Only print executed action commands, like keep, fileinto, reject and redirect.

         <u>commands</u>
            Print any executed command, excluding test commands.

         <u>tests</u>
            Print all executed commands and performed tests.

         <u>matching</u>
            Print all executed commands, performed tests and the values matched in those tests.

       <b>-Tdebug</b>
         Print debug messages as well. This is usually only useful for developers and is likely to produce messy
         output.

       <b>-Taddresses</b>
         Print byte code addresses for the current trace output. Normally, only the current  Sieve  source  code
         position  (line  number) is printed. The byte code addresses are equal to those listed in a binary dump
         produced using the <b>-d</b> option or by the <b><a href="../man1/sieve-dump.1.html">sieve-dump</a>(1)</b> command.

   <b>DEBUG</b> <b>SIEVE</b> <b>EXTENSION</b>
       To improve script debugging, this Sieve implementation supports a custom Sieve language extension  called
       'vnd.dovecot.debug'. It adds the <b>debug_log</b> command that allows logging debug messages.

       Example:

       require "vnd.dovecot.debug";

       if header :contains "subject" "hello" {

         debug_log "Subject header contains hello!";

       }

       Tools  such as <b>sieve-test</b>, <b>sievec</b> and <b>sieve-dump</b> have support for the vnd.dovecot.debug extension enabled
       by default and it is not necessary to enable nor possible  to  disable  the  availability  of  the  debug
       extension with the <b>-x</b> option. The logged messages are written to <b>stdout</b> in this case.

       In  contrast,  for  the  actual  Sieve  plugin for the Dovecot LDA (<b><a href="../man1/dovecot-lda.1.html">dovecot-lda</a></b>(1)) the vnd.dovecot.debug
       extension needs to be enabled explicitly using the <u>sieve_extensions</u> setting. The messages are then logged
       to the user's private script log file. If used in a global script, the messages are  logged  through  the
       default Dovecot logging facility.

</pre><h4><b>EXIT</b> <b>STATUS</b></h4><pre>
       <b>sieve-test</b> will exit with one of the following values:

       <b>0</b>   Execution was successful. (EX_OK, EXIT_SUCCESS)

       <b>1</b>   Operation failed. This is returned for almost all failures.  (EXIT_FAILURE)

       <b>64</b>  Invalid parameter given. (EX_USAGE)

</pre><h4><b>FILES</b></h4><pre>
       <u>/etc/dovecot/dovecot.conf</u>
              Dovecot's main configuration file.

       <u>/etc/dovecot/conf.d/90-sieve.conf</u>
              Sieve interpreter settings (included from Dovecot's main configuration file)

</pre><h4><b>REPORTING</b> <b>BUGS</b></h4><pre>
       Report   bugs,  including  <u>doveconf</u>  <u>-n</u>  output,  to  the  Dovecot  Mailing  List  &lt;<a href="mailto:dovecot@dovecot.org">dovecot@dovecot.org</a>&gt;.
       Information about reporting bugs is available at: <a href="http://dovecot.org/bugreport.html">http://dovecot.org/bugreport.html</a>

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man1/dovecot.1.html">dovecot</a></b>(1), <b><a href="../man1/dovecot-lda.1.html">dovecot-lda</a></b>(1), <b><a href="../man1/sieve-dump.1.html">sieve-dump</a></b>(1), <b><a href="../man1/sieve-filter.1.html">sieve-filter</a></b>(1), <b><a href="../man1/sievec.1.html">sievec</a></b>(1), <b><a href="../man7/pigeonhole.7.html">pigeonhole</a></b>(7)

Pigeonhole for Dovecot v2.4                        2016-04-05                                      <u><a href="../man1/SIEVE-TEST.1.html">SIEVE-TEST</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>