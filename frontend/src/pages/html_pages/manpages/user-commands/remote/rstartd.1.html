<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>rstartd - a sample implementation of a Remote Start rsh helper</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/x11-session-utils">x11-session-utils_7.7+6build2_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       rstartd - a sample implementation of a Remote Start rsh helper

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>rstartd</b>

       <b>rstartd.real</b> [-c <u>configfilename</u>]

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <u>Rstartd</u>  is  an  implementation  of  a  Remote  Start "helper" as defined in "A Flexible Remote Execution
       Protocol Based on <b>rsh</b>".

       This document describes the peculiarities of <u>rstartd</u> and how it is configured.

</pre><h4><b>OPTIONS</b></h4><pre>
       <b>-c</b> <u>configfilename</u>
               This option specifies the "global" configuration file that <u>rstartd</u> is to read.  Normally, <u>rstartd</u>
               is a shell script that invokes <u>rstartd.real</u> with the <b>-c</b> switch, allowing local  configuration  of
               the  location  of  the  configuration file.  If <u>rstartd.real</u> is started without the -c option, it
               reads <u>/etc/X11/rstart/config</u>.

</pre><h4><b>INSTALLATION</b></h4><pre>
       It is critical to successful interoperation of the Remote Start protocol that <u>rstartd</u> be installed  in  a
       directory which is in the "default" search path, so that default rsh requests and the ilk will be able to
       find it.

</pre><h4><b>CONFIGURATION</b> <b>AND</b> <b>OPERATION</b></h4><pre>
       <u>Rstartd</u>  is by design highly configurable.  One would like things like configuration file locations to be
       fixed, so that users and administrators can find them without searching,  but  reality  is  that  no  two
       vendors  will agree on where things should go, and nobody thinks the original location is "right".  Thus,
       <u>rstartd</u> allows one to relocate <b>all</b> of its files and directories.

       <u>Rstartd</u> has a hierarchy of configuration files which are executed in order when a request is made.   They
       are:
       global config
       per-user ("local") config
       global per-context config
       per-user ("local") per-context config
       config from request
       As  you might guess from the presence of "config from request", all of the config files are in the format
       of an <u>rstart</u> request.  <u>Rstartd</u> defines a few additional keywords with the INTERNAL- prefix for specifying
       its configuration.

       <u>Rstartd</u> starts by reading and executing the global config file.  This  file  will  normally  specify  the
       locations of the other configuration files and any systemwide defaults.

       <u>Rstartd</u> will then read the user's local config file, default name $HOME/.rstart.

       <u>Rstartd</u> will then start interpreting the request.

       Presumably  one  of the first lines in the request will be a CONTEXT line.  The context name is converted
       to lower case.

       <u>Rstartd</u>    will    read    the    global    config    file    for    that    context,    default     name
       /usr/lib/X11/rstart/contexts/&lt;name&gt;, if any.

       It will then read the user's config file for that context, default name $HOME/.rstart.contexts/&lt;name&gt;, if
       any.

       (If neither of these exists, <u>rstartd</u> aborts with a Failure message.)

       <u>Rstartd</u> will finish interpreting the request, and execute the program specified.

       This  allows  the  system  administrator  and  the  user  a large degree of control over the operation of
       <u>rstartd</u>.  The administrator has final say, because the global config file doesn't need to specify a  per-
       user config file.  If it does, however, the user can override anything from the global file, and can even
       completely replace the global context config files.

       The config files have a somewhat more flexible format than requests do; they are allowed to contain blank
       lines  and  lines  beginning with "#" are comments and ignored.  (#s in the middle of lines are data, not
       comment markers.)

       Any commands run are provided a few useful pieces of information in  environment  variables.   The  exact
       names are configurable, but the supplied defaults are:

       $RSTART_CONTEXT
       $RSTART_GLOBAL_CONTEXTS   the global contexts directory
       $RSTART_LOCAL_CONTEXTS    the local contexts directory
       $RSTART_GLOBAL_COMMANDS   the global generic commands directory
       $RSTART_LOCAL_COMMANDS    the local generic commands directory

       $RSTART_{GLOBAL,LOCAL}_CONTEXTS  should  contain  one  special  file, @List, which contains a list of the
       contexts in  that  directory  in  the  format  specified  for  ListContexts.   The  supplied  version  of
       ListContexts will cat both the global and local copies of @List.

       Generic commands are searched for in several places: (defaults)
       per-user per-context directory ($HOME/.rstart.commands/&lt;context&gt;)
       global per-context directory (/usr/lib/X11/rstart/commands/&lt;context&gt;)
       per-user all-contexts directory ($HOME/.rstart.commands)
       global all-contexts directory (/usr/lib/X11/rstart/commands)
       (Yes,  this  means  you  can't  have an all-contexts generic command with the same name as a context.  It
       didn't seem like a big deal.)

       Each of these directories should have a file called @List that gives the names and  descriptions  of  the
       commands in that directory in the format specified for ListGenericCommands.

</pre><h4><b>CONFIGURATION</b> <b>KEYWORDS</b></h4><pre>
       There  are  several  "special"  <u>rstart</u>  keywords  defined  for  <u>rstartd</u>  configuration.  Unless otherwise
       specified, there are no defaults; related features are disabled in this case.

       <b>INTERNAL-REGISTRIES</b> <b>name</b> <b>...</b>
               Gives a space-separated list of "MISC" registries  that  this  system  understands.   (Registries
               other than this are accepted but generate a Warning.)

       <b>INTERNAL-LOCAL-DEFAULT</b> <b>relative_filename</b>
               Gives the name ($HOME relative) of the per-user config file.

       <b>INTERNAL-GLOBAL-CONTEXTS</b> <b>absolute_directory_name</b>
               Gives the name of the system-wide contexts directory.

       <b>INTERNAL-LOCAL-CONTEXTS</b> <b>relative_directory_name</b>
               Gives the name ($HOME relative) of the per-user contexts directory.

       <b>INTERNAL-GLOBAL-COMMANDS</b> <b>absolute_directory_name</b>
               Gives the name of the system-wide generic commands directory.

       <b>INTERNAL-LOCAL-COMMANDS</b> <b>relative_directory_name</b>
               Gives the name ($HOME relative) of the per-user generic commands directory.

       <b>INTERNAL-VARIABLE-PREFIX</b> <b>prefix</b>
               Gives the prefix for the configuration environment variables <u>rstartd</u> passes to its kids.

       <b>INTERNAL-AUTH-PROGRAM</b> <b>authscheme</b> <b>program</b> <b>argv[0]</b> <b>argv[1]</b> <b>...</b>
               Specifies  the  program  to run to set up authentication for the specified authentication scheme.
               "program argv[0] ..." gives the program to run and its arguments, in the same form  as  the  EXEC
               keyword.

       <b>INTERNAL-AUTH-INPUT</b> <b>authscheme</b>
               Specifies the data to be given to the authorization program as its standard input.  Each argument
               is  passed  as  a  single line.  $n, where n is a number, is replaced by the n'th argument to the
               "AUTH authscheme arg1 arg2 ..." line.

       <b>INTERNAL-PRINT</b> <b>arbitrary</b> <b>text</b>
               Prints its arguments as a Debug message.  Mostly for <u>rstartd</u> debugging,  but  could  be  used  to
               debug config files.

</pre><h4><b>NOTES</b></h4><pre>
       When  using  the  C  shell,  or  any other shell which runs a script every time the shell is started, the
       script may get run several times.  In the worst case, the script may get run <b>three</b> times:
       By rsh, to run <u>rstartd</u>
       By <u>rstartd</u>, to run the specified command
       By the command, eg <u>xterm</u>
       <u>rstartd</u> currently limits lines, both from config files and requests, to BUFSIZ bytes.

       DETACH is implemented by redirecting file  descriptors  0,1,  and  2  to  /dev/null  and  forking  before
       executing the program.

       CMD is implemented by invoking $SHELL (default <a href="file:/bin/sh">/bin/sh</a>) with "-c" and the specified command as arguments.

       POSIX-UMASK is implemented in the obvious way.

       The  authorization  programs  are  run  in  the  same  context  as  the target program - same environment
       variables, path, etc.  Long term this might be a problem.

       In the X context, GENERIC-CMD Terminal runs xterm.  In the OpenWindows context, GENERIC-CMD Terminal runs
       cmdtool.

       In the  X  context,  GENERIC-CMD  LoadMonitor  runs  xload.   In  the  OpenWindows  context,  GENERIC-CMD
       LoadMonitor runs perfmeter.

       <b>GENERIC-CMD</b>  <b>ListContexts</b>  lists  the  contents  of  @List  in both the system-wide and per-user contexts
       directories.  It is available in all contexts.

       <b>GENERIC-CMD</b> <b>ListGenericCommands</b> lists the contents of @List in  the  system-wide  and  per-user  commands
       directories,  including  the  per-context subdirectories for the current context.  It is available in all
       contexts.

       <b>CONTEXT</b> <b>None</b> is not implemented.

       <b>CONTEXT</b> <b>Default</b> is really dull.

       For installation ease, the "contexts" directory in the distribution  contains  a  file  "@Aliases"  which
       lists  a  context  name and aliases for that context.  This file is used to make symlinks in the contexts
       and commands directories.

       All <b>MISC</b> values are passed unmodified as environment variables.

       One can mistreat <u>rstartd</u> in any number of ways, resulting in anything from stupid behavior to core dumps.
       Other than by explicitly running programs I don't think it can write or delete any files, but there's  no
       guarantee  of  that.  The important thing is that (a) it probably won't do anything REALLY stupid and (b)
       it runs with the user's permissions, so it can't do anything catastrophic.

       @List files need not be complete; contexts or commands which are dull or which need not or should not  be
       advertised  need  not be listed.  In particular, per-user @List files should not list things which are in
       the  system-wide  @List  files.   In  the  future,  perhaps  ListContexts  and  ListGenericCommands  will
       automatically  suppress  lines  from the system-wide files when there are per-user replacements for those
       lines.

       Error handling is OK to weak.  In particular, no attempt is made to properly report errors  on  the  exec
       itself.   (Perversely,  exec  errors  could be reliably reported when detaching, but not when passing the
       stdin/out socket to the app.)

       If compiled with -DODT1_DISPLAY_HACK, <u>rstartd</u> will work around a bug in SCO ODT version 1.  (1.1?)   (The
       bug is that the X clients are all compiled with a bad library that doesn't know how to look host names up
       using  DNS.   The  fix  is  to  look up a host name in $DISPLAY and substitute an IP address.)  This is a
       trivial example of an incompatibility that <u>rstart</u> can hide.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <a href="../man1/rstart.1.html">rstart</a>(1), <a href="../man1/rsh.1.html">rsh</a>(1), A Flexible Remote Execution Protocol Based on <b>rsh</b>

</pre><h4><b>AUTHOR</b></h4><pre>
       Jordan Brown, Quarterdeck Office Systems

X Version 11                                      rstart 1.0.6                                        <u><a href="../man1/RSTARTD.1.html">RSTARTD</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>