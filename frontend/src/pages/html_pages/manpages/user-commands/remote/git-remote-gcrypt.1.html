<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>git-remote-gcrypt - GNU Privacy Guard-encrypted git remote</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/git-remote-gcrypt">git-remote-gcrypt_1.5-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       git-remote-gcrypt - GNU Privacy Guard-encrypted git remote

</pre><h4><b>DESCRIPTION</b></h4><pre>
       git-remote-gcrypt is a git remote helper to push and pull from repositories encrypted with GnuPG, using a
       custom format.  This remote helper handles URIs prefixed with <u>gcrypt::</u>.

       Supported  backends are <u>local</u>, <u>rsync://</u> and <u>sftp://</u>, where the repository is stored as a set of files, or
       instead any <u>&lt;giturl&gt;</u> where gcrypt will store the same representation in a git  repository,  bridged  over
       arbitrary  git  transport.  Prefer <u>local</u> or <u>rsync://</u> if you can use one of those; see "Performance" below
       for discussion.

       There is also an experimental <u>rclone://</u> backend for early adoptors only (you have been warned).

       The aim is to provide confidential, authenticated git storage and collaboration using  typical  untrusted
       file hosts or services.

   <b>Quickstart</b>
       Create an encrypted remote by pushing to it:

          git remote add cryptremote gcrypt::rsync://example.com/repo
          git push cryptremote master
          &gt; gcrypt: Setting up new repository
          &gt; gcrypt: Remote ID is :id:7VigUnLVYVtZx8oir34R
          &gt; [ more lines .. ]
          &gt; To gcrypt::[...]
          &gt; * [new branch]      master -&gt; master

</pre><h4><b>CONFIGURATION</b></h4><pre>
       The following <b><a href="../man1/git-config.1.html">git-config</a>(1)</b> variables are supported:

       <b>remote.&lt;name&gt;.gcrypt-participants</b>

       <b>gcrypt.participants</b>
              Space-separated  list  of  GPG  key identifiers. The remote is encrypted to these participants and
              only signatures from these are accepted.  <b>gpg</b> <b>-k</b> lists all public keys you know.

              If this option is not set, we encrypt to your default key and accept  any  valid  signature.  This
              behavior can also be requested explicitly by setting participants to <b>simple</b>.

              The  <b>gcrypt-participants</b>  setting  on  the  remote  takes  precedence over the repository variable
              <b>gcrypt.participants</b>.

       <b>remote.&lt;name&gt;.gcrypt-publish-participants</b>

       <b>gcrypt.publish-participants</b>
              By default, the gpg key ids of the participants are obscured by encrypting using <b>gpg</b>  <b>-R</b>.  Setting
              this option to <b>true</b> disables that security measure.

              The  problem  with  using  <b>gpg</b>  <b>-R</b> is that to decrypt, gpg tries each available secret key in turn
              until it finds a usable key.  This can result in unnecessary passphrase prompts.

       <b>gcrypt.gpg-args</b>
              The contents of this setting are passed as arguments to gpg.  E.g. <b>--use-agent</b>.

       <b>remote.&lt;name&gt;.gcrypt-signingkey</b>

       <b>user.signingkey</b>
              (The latter from regular  git  configuration)  The  key  to  use  for  signing.   You  should  set
              <b>user.signingkey</b>  if  your default signing key is not part of the participant list. You may use the
              per-remote version to sign different remotes using different keys.

       <b>remote.&lt;name&gt;.gcrypt-rsync-put-flags</b>

       <b>gcrypt.rsync-put-flags</b>
              Flags to be passed to <b>rsync</b> when uploading to a remote using the <b>rsync://</b> backend.  If  the  flags
              are set to a specific remote, the global flags, if also set, will not be applied for that remote.

       <b>remote.&lt;name&gt;.gcrypt-require-explicit-force-push</b>

       <b>gcrypt.require-explicit-force-push</b>
              A longstanding bug is that every git push effectively has a <b>--force</b>.

              If  this  flag is set to <b>true</b>, git-remote-gcrypt will refuse to push, unless <b>--force</b> is passed, or
              refspecs are prefixed with <b>+</b>.

</pre><h4><b>ENVIRONMENT</b> <b>VARIABLES</b></h4><pre>
       <u>GCRYPT_FULL_REPACK</u>
              When set (to anything), this environment variable forces a full repack when pushing.

</pre><h4><b>EXAMPLES</b></h4><pre>
       How to set up a remote for two participants:

          git remote add cryptremote gcrypt::rsync://example.com/repo
          git config remote.cryptremote.gcrypt-participants "KEY1 KEY2"
          git push cryptremote master

       How to use a git backend:

          # notice that the target git repo must already exist and its
          # `next` branch will be overwritten!
          git remote add gitcrypt gcrypt::<a href="mailto:git@example.com">git@example.com</a>:repo#next
          git push gitcrypt master

       The URL fragment (<b>#next</b> here) indicates which backend branch is used.

</pre><h4><b>NOTES</b></h4><pre>
       <b>Collaboration</b>
              The encryption of the manifest is updated for each push to match  the  participant  configuration.
              Each pushing user must have the public keys of all collaborators and correct participant config.

       <b>Dependencies</b>
              <b>rsync</b>,  <b>curl</b>  and  <b>rclone</b>  for remotes <b>rsync:</b>, <b>sftp:</b> and <b>rclone:</b> respectively. The main executable
              requires a POSIX-compliant shell that supports <b>local</b>.

       <b>GNU</b> <b>Privacy</b> <b>Guard</b>
              Both GPG 1.4 and 2 are supported. You need a  personal  GPG  key.  GPG  configuration  applies  to
              algorithm  choices  for  public-key encryption, symmetric encryption, and signing. See <b>man</b> <b>gpg</b> for
              more information.

       <b>Remote</b> <b>ID</b>
              The Remote ID is not secret; it only ensures that two repositories signed by the same user can  be
              distinguished.   You  will see a warning if the Remote ID changes, which should only happen if the
              remote was re-created.

       <b>Performance</b>
              Using an arbitrary <u>&lt;giturl&gt;</u> or an <u>sftp://</u> URI requires uploading  the  entire  repository  history
              with  each  push.   This means that pushes of your repository become slower over time, as your git
              history  becomes  longer,  and  it  can  easily  get  to  the  point  that  continued   usage   of
              git-remote-gcrypt is impractical.

              Thus,  you  should  use  these backends only when you know that your repository will not ever grow
              very large, not just that it's not large now.  This means that these  backends  are  inappropriate
              for  most  repositories,  and  likely  suitable  only  for unusual cases, such as small credential
              stores.  Even then, use <u>rsync://</u> if you can.  Note, however,  that  <u>rsync://</u>  won't  work  with  a
              repository hosting service like Gitolite, GitHub or GitLab.

       <b>rsync</b> <b>URIs</b>
              The  URI  format  for  the  rsync backend is <b>rsync://user@host/path</b>, which translates to the rsync
              location <b>user@host:/path</b>, accessed over ssh. Note that the path is absolute, not relative  to  the
              home  directory.  An  earlier  non-standard  URI format is also supported: <b>rsync://user@host:path</b>,
              which translates to the rsync location <b>user@host:path</b>

       <b>rclone</b> <b>backend</b>
              In addition to adding the rclone backend as a remote with URI like <b>gcrypt::rclone://remote:subdir</b>,
              you must add the remote to the rclone configuration too.  This  is  typically  done  by  executing
              <b>rclone</b> <b>config</b>.  See <a href="../man1/rclone.1.html">rclone</a>(1).

              The  rclone  backend  is  considered  experimental  and is for early adoptors only.  You have been
              warned.

   <b>Repository</b> <b>format</b>
       <u>EncSign(X):</u>   Sign and Encrypt to GPG key holder
       <u>Encrypt(K,X):</u> Encrypt using symmetric-key algorithm
       <u>Hash(X):</u>      SHA-2/256

       <u>B:</u> branch list
       <u>L:</u> list of the hash (<u>Hi</u>) and key (<u>Ki</u>) for each packfile
       <u>R:</u> Remote ID

       To write the repository:

       Store each packfile <u>P</u> as <u>Encrypt(Ki,</u> <u>P)</u> → <u>P'</u> in filename <u>Hi</u>
         where <u>Ki</u> is a new random string and <u>Hash(P')</u> → <u>Hi</u>
       Store <u>EncSign(B</u> <u>||</u> <u>L</u> <u>||</u> <u>R)</u> in the manifest

       To read the repository:

       Get manifest, decrypt and verify using GPG keyring → <u>(B,</u> <u>L,</u> <u>R)</u>
       Warn if <u>R</u> does not match previously seen Remote ID
       for each <u>Hi,</u> <u>Ki</u> in <u>L</u>:
         Get file <u>Hi</u> from the server → <u>P'</u>
         Verify <u>Hash(P')</u> matches <u>Hi</u>
         Decrypt <u>P'</u> using <u>Ki</u> → <u>P</u> then open <u>P</u> with git

   <b>Manifest</b> <b>file</b>
       Example manifest file (with ellipsis for brevity):

          $ gpg -d 91bd0c092128cf2e60e1a608c31e92caf1f9c1595f83f2890ef17c0e4881aa0a
          542051c7cd152644e4995bda63cc3ddffd635958 refs/heads/next
          3c9e76484c7596eff70b21cbe58408b2774bedad refs/heads/master
          pack :SHA256:f2ad50316...cd4ba67092dc4 z8YoAnFpMlW...3PkI2mND49P1qm
          pack :SHA256:a6e17bb4c...426492f379584 82+k2cbiUn7...dgXfyX6wXGpvVa
          keep :SHA256:f2ad50316...cd4ba67092dc4 1
          repo :id:OYiSleGirtLubEVqJpFF

       Each item extends until newline, and matches one of the following:

       <b>&lt;sha-1&gt;</b> <b>&lt;gitref&gt;</b>
              Git object id and its ref

       <b>pack</b> <b>:&lt;hashtype&gt;:&lt;hash&gt;</b> <b>&lt;key&gt;</b>
              Packfile hash (<u>Hi</u>) and corresponding symmetric key (<u>Ki</u>).

       <b>keep</b> <b>:&lt;hashtype&gt;:&lt;hash&gt;</b> <b>&lt;generation&gt;</b>
              Packfile hash and its repack generation

       <b>repo</b> <b>&lt;id&gt;</b>
              The remote id

       <b>extn</b> <b>&lt;name&gt;</b> <b>...</b>
              Extension field, preserved but unused.

</pre><h4><b>DETECTING</b> <b>GCRYPT</b> <b>REPOS</b></h4><pre>
       To detect if a git url is a gcrypt repo, use: <b>git-remote-gcrypt</b> <b>--check</b> <b>url</b> Exit status is 0 if the  repo
       exists and can be decrypted, 1 if the repo uses gcrypt but could not be decrypted, and 100 if the repo is
       not encrypted with gcrypt (or could not be accessed).

       Note  that  this  has  to fetch the repo contents into the local git repository, the same as is done when
       using a gcrypt repo.

</pre><h4><b>KNOWN</b> <b>ISSUES</b></h4><pre>
       Every git push effectively has <b>--force</b>.  Be sure to pull before pushing.

       git-remote-gcrypt can decide to repack the remote  without  warning,  which  means  that  your  push  can
       suddenly  take  significantly longer than you were expecting, as your whole history has to be reuploaded.
       This push might fail over a poor link.

       git-remote-gcrypt might report a repository as "not found" when the repository does in  fact  exist,  but
       git-remote-gcrypt is having authentication, port, or network connectivity issues.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <a href="../man1/git-remote-helpers.1.html">git-remote-helpers</a>(1), <a href="../man1/gpg.1.html">gpg</a>(1)

</pre><h4><b>CREDITS</b></h4><pre>
       The original author of git-remote-gcrypt was GitHub user bluss.

       The de facto maintainer in 2013 and 2014 was Joey Hess.

       The current maintainer, since 2016, is Sean Whitton &lt;<u><a href="mailto:spwhitton@spwhitton.name">spwhitton@spwhitton.name</a></u>&gt;.

</pre><h4><b>LICENSE</b></h4><pre>
       This  document  and  git-remote-gcrypt  are  licensed  under  identical  terms,  GPL-3  (or  2+); see the
       git-remote-gcrypt file.

                                                                                            <u><a href="../man1/GIT-REMOTE-GCRYPT.1.html">GIT-REMOTE-GCRYPT</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>