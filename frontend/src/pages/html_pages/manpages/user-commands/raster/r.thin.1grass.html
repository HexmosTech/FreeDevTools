<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>r.thin  - Thins non-null cells that denote linear features in a raster map layer.</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/grass-doc">grass-doc_8.4.1-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       <b>r.thin</b>  - Thins non-null cells that denote linear features in a raster map layer.

</pre><h4><b>KEYWORDS</b></h4><pre>
       raster, geometry

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>r.thin</b>
       <b>r.thin</b> <b>--help</b>
       <b>r.thin</b>  <b>input</b>=<u>name</u>  <b>output</b>=<u>name</u>   [<b>iterations</b>=<u>integer</u>]    [--<b>overwrite</b>]  [--<b>help</b>]  [--<b>verbose</b>]  [--<b>quiet</b>]
       [--<b>ui</b>]

   <b>Flags:</b>
       <b>--overwrite</b>
           Allow output files to overwrite existing files

       <b>--help</b>
           Print usage summary

       <b>--verbose</b>
           Verbose module output

       <b>--quiet</b>
           Quiet module output

       <b>--ui</b>
           Force launching GUI dialog

   <b>Parameters:</b>
       <b>input</b>=<u>name</u> <b>[required]</b>
           Name of input raster map

       <b>output</b>=<u>name</u> <b>[required]</b>
           Name for output raster map

       <b>iterations</b>=<u>integer</u>
           Maximal number of iterations
           Default: <u>200</u>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <u>r.thin</u> scans the named <u>input</u> raster map layer and thins non-NULL cells that denote linear  features  into
       linear  features  having a single cell width. Raster lines often need to be thinned (skeletonizing raster
       features) to a single pixel width before they can be transformed to vector data.

       <u>r.thin</u> will thin only the non-NULL (no data) raster cells of the named <u>input</u> raster map layer within  the
       current  geographic region settings.  The cell width of the thinned <u>output</u> raster map layer will be equal
       to the cell resolution of the currently set geographic region.  All of the thinned linear  features  will
       have the width of a single cell.

       <u>r.thin</u>  will create a new <u>output</u> raster data file containing the thinned linear features.  <u>r.thin</u> assumes
       that linear features are encoded with positive values on a background of NULL’s in the <u>input</u> raster  data
       file, hence it creates a NULL/1 output map.

</pre><h4><b>NOTES</b></h4><pre>
       <u>r.thin</u>  only  creates  raster  map  layers.  In  order  to create a vector map, the user will need to run
       <u>r.to.vect</u> on the resultant raster map.

       <u>r.thin</u> may create small spurs or "dangling lines" during  the  thinning  process.   These  spurs  may  be
       removed (after creating a vector map layer) by <u>v.clean</u> (<u>rmdangle</u> tool).

       This  code  implements  the  thinning  algorithm  described  in  "Analysis  of  Thinning Algorithms Using
       Mathematical Morphology" by Ben-Kwei Jang and Ronlad T. Chin in  <u>Transactions</u>  <u>on</u>  <u>Pattern</u>  <u>Analysis</u>  <u>and</u>
       <u>Machine</u>  <u>Intelligence</u>,  vol.  12,  No.  6,  June 1990.  The definition Jang and Chin give of the thinning
       process is "successive removal of outer layers of pixels from an object while retaining any pixels  whose
       removal would alter the connectivity or shorten the legs of the sceleton."

       The  sceleton  is  finally  thinned  when the thinning process converges; i.e., "no further pixels can be
       removed without altering the connectivity or shortening the sceleton legs" (p. 541).  The  authors  prove
       that  the thinning process described always converges and produces one-pixel thick sceletons.  The number
       of iterations depends on the original thickness of the object.  Each  iteration  peels  off  the  outside
       pixels  from the object.  Therefore, if the object is &lt;= n pixels thick, the algorithm should converge in
       &lt;= iterations.

</pre><h4><b>EXAMPLE</b></h4><pre>
       To vectorize the raster map <u>streams_derived</u> in the North Carolina  sample  dataset  that  represents  the
       stream network derived from the 10m resolution DEM by <u>r.watershed</u>, run:
       g.region raster=elevation -p
       # create flow accumulation map
       r.watershed elevation=elevation accumulation=accum_50K thresh=50000
       # extract streams from flow accumulation map
       r.mapcalc "streams_from_flow = if(abs(accum_50K) &gt; 1000, 1, null())"
       # skeletonize map
       r.thin streams_from_flow out=streams_thin
       d.mon wx0
       d.rast streams_from_flow
       d.erase
       d.rast streams_thin

       Raster feature thinning (skeletonizing)

       The resulting map cabe optionally vectorized:
       r.to.vect streams_thin output=streams_thin type=line
       # visualize
       d.rast accum_50K
       d.vect streams_thin color=red width=2

       Vectorized stream network after thinning extracted from flow accumulation map

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
        <u>g.region,</u> <u>r.to.vect,</u> <u>v.clean,</u> <u>wxGUI</u> <u>vector</u> <u>digitizer,</u> <u>v.build</u>

</pre><h4><b>AUTHORS</b></h4><pre>
       Olga Waupotitsch, U.S.Army Construction Engineering Research Laboratory

       The code for finding the bounding box as well as input/output code was written by Mike Baba (DBA Systems,
       1990) and Jean Ezell (USACERL, 1988).

</pre><h4><b>SOURCE</b> <b>CODE</b></h4><pre>
       Available at: r.thin source code (history)

       Accessed: Friday Apr 04 01:19:41 2025

       Main index | Raster index | Topics index | Keywords index | Graphical index | Full index

       © 2003-2025 GRASS Development Team, GRASS GIS 8.4.1 Reference Manual

GRASS 8.4.1                                                                                       <u><a href="../man1grass/r.thin.1grass.html">r.thin</a></u>(1grass)
</pre>
 </div>
</div></section>
</div>
</body>
</html>