<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>gdal_viewshed - Calculates a viewshed raster from an input raster DEM for a user defined point</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/gdal-bin">gdal-bin_3.10.2+dfsg-1build3_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       gdal_viewshed - Calculates a viewshed raster from an input raster DEM for a user defined point

</pre><h4><b>SYNOPSIS</b></h4><pre>
          gdal_viewshed [--help] [--help-general] [-b &lt;band&gt;]
                        [-a_nodata &lt;value&gt;] [-f &lt;formatname&gt;]
                        [-oz &lt;observer_height&gt;] [-tz &lt;target_height&gt;] [-md &lt;max_distance&gt;]
                        -ox &lt;observer_x&gt; -oy &lt;observer_y&gt;
                        [-vv &lt;visibility&gt;] [-iv &lt;invisibility&gt;]
                        [-ov &lt;out_of_range&gt;] [-cc &lt;curvature_coef&gt;]
                        [-os &lt;observer_spacing&gt;] [-j &lt;relative job count&gt;]
                        [-co &lt;NAME&gt;=&lt;VALUE&gt;]...
                        [-q] [-om &lt;output mode&gt;]
                        &lt;src_filename&gt; &lt;dst_filename&gt;

</pre><h4><b>DESCRIPTION</b></h4><pre>
       By  default  the  <b>gdal_viewshed</b>  generates  a  binary visibility raster from one band of the input raster
       elevation model (DEM). The output raster will be of type Byte. With the -mode  flag  can  also  return  a
       minimum visible height raster of type Float64.

       <b>NOTE:</b>
          The algorithm as implemented currently will only output meaningful results if the georeferencing is in
          a projected coordinate reference system.

       <b>--help</b> Show this help message and exit

       <b>--help-general</b>
              Gives a brief usage message for the generic GDAL commandline options and exit.

       <b>-co</b> <b>&lt;NAME&gt;=&lt;VALUE&gt;</b>
              Many  formats  have  one or more optional creation options that can be used to control particulars
              about the file created. For instance, the GeoTIFF driver  supports  creation  options  to  control
              compression, and whether the file should be tiled.

              The  creation  options  available  vary by format driver, and some simple formats have no creation
              options at all. A list of options supported for a format can be listed with the <u>--formats</u>  command
              line option but the documentation for the format is the definitive source of information on driver
              creation options.  See <u>Raster</u> <u>drivers</u> format specific documentation for legal creation options for
              each format.

       <b>-b</b> <b>&lt;band&gt;</b>
              Select  an input band <b>band</b> containing the DEM data. Bands are numbered from 1.  Only a single band
              can be used. Only the part of the raster within the specified maximum distance around the observer
              point is processed.

       <b>-a_nodata</b> <b>&lt;value&gt;</b>
              The value to be set for the cells in the output raster that have no data.

              <b>NOTE:</b>
                 Currently, no special processing of input cells at a nodata value is done (which may result  in
                 erroneous results).

       <b>-ox</b> <b>&lt;value&gt;</b>
              The  X  position  of the observer (in SRS units).  If the coordinate is outside of the raster, all
              space between the observer and the raster is assumed not to occlude visibility of the raster. (Not
              supported in cumulative mode.)

       <b>-oy</b> <b>&lt;value&gt;</b>
              The Y position of the observer (in SRS units).  If the coordinate is outside of  the  raster,  all
              space between the observer and the raster is assumed not to occlude visibility of the raster. (Not
              supported in cumulative mode.)

       <b>-oz</b> <b>&lt;value&gt;</b>
              The height of the observer above the DEM surface in the height unit of the DEM. Default: 2

       <b>-tz</b> <b>&lt;value&gt;</b>
              The height of the target above the DEM surface in the height unit of the DEM. Default: 0

       <b>-md</b> <b>&lt;value&gt;</b>
              Maximum  distance from observer to compute visibility.  It is also used to clamp the extent of the
              output raster.  (Not supported in cumulative mode)

       <b>-cc</b> <b>&lt;value&gt;</b>
              Coefficient to consider the effect of the curvature and refraction.  When  calculating  visibility
              between  two  points  (i.e.  Line  Of Sight or Viewshed), The magnitude of this effect varies with
              atmospheric conditions and depends on the wavelength.

              Different applications for  calculating  visibility  use  different  interchangeable  notation  to
              describe  this  phenomena:  Refraction  Coefficient,  Curvature  Coefficient,  and Sphere Diameter
              Factor.  gdal_viewshed uses the Curvature Coefficient notation.

                                               {CurvCoeff}=1-{RefractionCoeff}

              Changes in air density curve the light downward causing an observer to see further and  the  earth
              to appear less curved, as if the sphere (earth) diameter is larger then it actually is.  The ratio
              between that imaginary sphere diameter and the actual sphere diameter is given by the formula:

                                 {SphereDiameterFactor}=1/{CurvCoeff}=1/(1-{RefractionCoeff})

              For  visible light, the standard atmospheric refraction coefficient that is generally used is 1/7.
              Thus the default value (since GDAL 3.4) for CurvCoeff  that  gdal_viewshed  uses  is  0.85714  (=~
              1-1/7)  for  Earth  CRS.  Starting  with  GDAL 3.6, for non-Earth CRS (those whole semi-major axis
              differs by more than 5% with the one of WGS 84), CurvCoeff default value is 1.0,  to  account  for
              the no refraction use case.

              The height of the DEM is corrected according to the following formula:

                     Height_{Corrected}=Height_{DEM}-{CurvCoeff}\frac{{TargetDistance}^2}{SphereDiameter}

              Typical  coefficient  values  are  given  in the table below (use Curvature Coeff value for the cc
              option)
                       ┌───────────────┬──────────────────┬─────────────────┬────────────────────────┐
                       │ Use Case      │ Refraction Coeff │ <b>Curvature</b> <b>Coeff</b> │ Sphere Diameter Factor │
                       ├───────────────┼──────────────────┼─────────────────┼────────────────────────┤
                       │ No Refraction │ 0                │ 1               │ 1                      │
                       ├───────────────┼──────────────────┼─────────────────┼────────────────────────┤
                       │ Visible Light │ 1/7              │ 6/7 (=~0.85714) │ 7/6 (=~1.1666)         │
                       ├───────────────┼──────────────────┼─────────────────┼────────────────────────┤
                       │ Radio Waves   │ 0.25 ~ 0.325     │ 0.75 ~ 0.675    │ 1.33 ~ 1.48            │
                       ├───────────────┼──────────────────┼─────────────────┼────────────────────────┤
                       │ Flat Earth    │ 1                │ 0               │ inf                    │
                       └───────────────┴──────────────────┴─────────────────┴────────────────────────┘

       <b>-iv</b> <b>&lt;value&gt;</b>
              Pixel value to set for invisible areas. (Not supported in cumulative mode) Default: 0

       <b>-ov</b> <b>&lt;value&gt;</b>
              Pixel value to set for the cells that fall outside of the range specified by the observer location
              and the maximum distance. (Not supported in cumulative mode) Default: 0

       <b>-vv</b> <b>&lt;value&gt;</b>
              Pixel value to set for visible areas. (Not supported in cumulative mode) Default: 255

       <b>-om</b> <b>&lt;output</b> <b>mode&gt;</b>
              Sets what information the output contains.

              Possible values: NORMAL, DEM, GROUND, ACCUM

              NORMAL returns a raster of type Byte containing visible locations.

              DEM and GROUND will return a raster of type Float64  containing  the  minimum  target  height  for
              target  to  be  visible from the DEM surface or ground level respectively.  Flags -tz, -iv and -vv
              will be ignored.

              Cumulative (ACCUM) mode will create an eight bit raster the same size as the  input  raster  where
              each  cell  represents  the  relative  observability  from a grid of observer points.  See the -os
              option.

              Default NORMAL

       <b>-os</b> <b>&lt;value&gt;</b>
              Cell Spacing between observers (only supported in cumulative mode) Default: 10

       <b>-j</b> <b>&lt;value&gt;</b>
              Relative number of jobs to run at once. (only supported in cumulative mode) Default: 3

</pre><h4><b>C</b> <b>API</b></h4><pre>
       Functionality of this utility can be done from C with <u>GDALViewshedGenerate()</u>.

</pre><h4><b>EXAMPLE</b></h4><pre>
       Screenshot of 2 combined viewshed analysis, with the yellow pixels showing the area that is visible  from
       the  both  observation  locations  (the  green dots), while the small green area is only visible from one
       location.
         [image]

       Create a viewshed raster with a radius of 500 for a person standing at location (-10147017, 5108065).

          gdal_viewshed -md 500 -ox -10147017 -oy 5108065 source.tif destination.tif

</pre><h4><b>REFERENCE</b></h4><pre>
       [Wang2000]
            Generating Viewsheds without Using Sightlines. Wang, Jianjun, Robinson, Gary J., and  White,  Kevin.
            Photogrammetric           Engineering           and           Remote          Sensing.          p81.
            <u>https://www.asprs.org/wp-content/uploads/pers/2000journal/january/2000_jan_87-90.pdf</u>

</pre><h4><b>AUTHOR</b></h4><pre>
       Tamas Szekeres &lt;<a href="mailto:szekerest@gmail.com">szekerest@gmail.com</a>&gt;

</pre><h4><b>COPYRIGHT</b></h4><pre>
       1998-2025

                                                  Feb 11, 2025                                  <u><a href="../man1/GDAL_VIEWSHED.1.html">GDAL_VIEWSHED</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>