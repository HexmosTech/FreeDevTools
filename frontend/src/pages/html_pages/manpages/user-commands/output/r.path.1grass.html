<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>r.path  - Traces paths from starting points following input directions.</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/grass-doc">grass-doc_8.4.1-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       <b>r.path</b>  - Traces paths from starting points following input directions.

</pre><h4><b>KEYWORDS</b></h4><pre>
       raster, hydrology, cost surface

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>r.path</b>
       <b>r.path</b> <b>--help</b>
       <b>r.path</b>   [-<b>can</b>]   <b>input</b>=<u>name</u>   <b>format</b>=<u>string</u>    [<b>values</b>=<u>name</u>]    [<b>raster_path</b>=<u>name</u>]    [<b>vector_path</b>=<u>name</u>]
       [<b>start_coordinates</b>=<u>east,north</u>[,<u>east,north</u>,...]]       [<b>start_points</b>=<u>name</u>[,<u>name</u>,...]]        [--<b>overwrite</b>]
       [--<b>help</b>]  [--<b>verbose</b>]  [--<b>quiet</b>]  [--<b>ui</b>]

   <b>Flags:</b>
       <b>-c</b>
           Copy input cell values on output

       <b>-a</b>
           Accumulate input values along the path

       <b>-n</b>
           Count cell numbers along the path

       <b>--overwrite</b>
           Allow output files to overwrite existing files

       <b>--help</b>
           Print usage summary

       <b>--verbose</b>
           Verbose module output

       <b>--quiet</b>
           Quiet module output

       <b>--ui</b>
           Force launching GUI dialog

   <b>Parameters:</b>
       <b>input</b>=<u>name</u> <b>[required]</b>
           Name of input direction
           Direction in degrees CCW from east, or bitmask encoded

       <b>format</b>=<u>string</u> <b>[required]</b>
           Format of the input direction map
           Options: <u>auto,</u> <u>degree,</u> <u>45degree,</u> <u>bitmask</u>
           Default: <u>auto</u>
           <b>auto</b>: auto-detect direction format
           <b>degree</b>: degrees CCW from East
           <b>45degree</b>: degrees CCW from East divided by 45 (e.g. r.watershed directions)
           <b>bitmask</b>: bitmask encoded directions (e.g. r.cost -b)

       <b>values</b>=<u>name</u>
           Name of input raster values to be used for output
           Name of input raster map

       <b>raster_path</b>=<u>name</u>
           Name for output raster path map
           Name for output raster map

       <b>vector_path</b>=<u>name</u>
           Name for output vector path map
           Name for output vector map

       <b>start_coordinates</b>=<u>east,north[,east,north</u>,...]
           Coordinates of starting point(s) (E,N)

       <b>start_points</b>=<u>name[,name</u>,...]
           Name of starting vector points map(s)
           Or data source(s) for direct OGR access

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <u>r.path</u>  traces  a path from starting points following input directions. Such a movement direction map can
       be generated with <u>r.walk</u>, <u>r.cost</u>, <u>r.slope.aspect</u>, <u>r.watershed</u>, or <u>r.fill.dir</u>, provided that the direction
       is in degrees, measured counterclockwise from east.

       Alternatively, bitmask-encoded directions can be provided  where  each  bit  position  corresponds  to  a
       specific  neighbour.  A  path  will  continue to all neighbours with their bit set. This means a path can
       split and merge. Such bitmasked directions can be created with the <b>-b</b> flag of <u>r.cost</u> and <u>r.walk</u>.
       Direction encoding for neighbors of x
         135  90  45          7 8 1
         180  x  360          6 x 2
         225 270 315          5 4 3
         degrees           bit positions
         CCW from East
       A path stops when the direction is zero or negative, indicating a stop point or outlet.

       The <b>output</b> raster map will show one or more least-cost paths between each user-provided  location(s)  and
       the  target points (direction ≤ 0). By default, the <b>output</b> will be an integer CELL map with the id of the
       start points along the least cost path, and null cells elsewhere.

       With the <b>-c</b> (<u>copy</u>) flag, the values raster map cell values are copied verbatim along the path.  With  the
       <b>-a</b>  (<u>accumulate</u>)  flag,  the  accumulated  cell  value  from the starting point up to the current cell is
       written on output. With either the <b>-c</b> or the <b>-a</b> flags, the <b>raster_path</b> map is created with the same  cell
       type  as  the  <b>values</b>  raster  map  (integer, float or double).  With the <b>-n</b> (<u>number</u>) flag, the cells are
       numbered consecutively from the starting point to the final point.  The <b>-c</b>, <b>-a</b>, and <b>-n</b> flags are mutually
       incompatible.

       The <b>start_coordinates</b> parameter consists of map E and N grid coordinates of a starting  point.  Each  x,y
       pair  is  the  easting  and  northing (respectively) of a starting point from which a path will be traced
       following <b>input</b>  directions.  The  <b>start_points</b>  parameter  can  take  multiple  vector  maps  containing
       additional starting points.

</pre><h4><b>NOTES</b></h4><pre>
       The  directions  are  recorded  as  degrees  CCW  from  East,  the  Knight’s move of r.cost and r.walk is
       considered:
              112.5     67.5
       157.5  135   90  45   22.5
              180   x   0
       202.5  225  270  315  337.5
              247.5     292.5
       i.e. a cell with the value 135 means the next cell is to the North-West, and a cell with the value  157.5
       means that the next cell is to the West-North-West.

</pre><h4><b>EXAMPLES</b></h4><pre>
   <b>Hydrological</b> <b>path</b>
       We  are  using  the  full North Carolina sample dataset.  First we create the two points from a text file
       using <u>v.in.ascii</u> module (here the text file is CSV and we are using unix here-file syntax  with  EOF,  in
       GUI just enter the values directly for the parameter input):
       v.in.ascii input=- output=start format=point separator=comma &lt;&lt;EOF
       638667.15686275,220610.29411765
       638610.78431373,220223.03921569
       EOF
       We  need  to  supply  a  direction  raster map to the <u>r.path</u> module.  To get these directions, we use the
       <u>r.watershed</u> module:
       r.watershed elevation=elev_lid792_1m accumulation=accum drainage=drain_dir
       The directions are categorical and we convert them to degrees using raster algebra:
       r.mapcalc "drain_deg = if(drain_dir != 0, 45. * abs(drain_dir), null())"
       Now we are ready to extract the drainage paths starting at the two points.
       r.path input=drain_deg raster_path=drain_path vector_path=drain_path start_points=start
       Before we visualize the result, we set a color table for the elevation we are using and create  a  shaded
       relief map:
       r.colors map=elev_lid792_1m color=elevation
       r.relief input=elev_lid792_1m output=relief
       We visualize the input and output data:
       d.shade shade=relief color=elev_lid792_1m
       d.vect map=drain_path color=0:0:61 width=4 legend_label="drainage paths"
       d.vect map=start color=none fill_color=224:0:0 icon=basic/circle size=15 legend_label=origins
       d.legend.vect -b
       <u>Figure:</u> <u>Drainage</u> <u>paths</u> <u>from</u> <u>two</u> <u>points</u> <u>where</u> <u>directions</u> <u>from</u> <u>r.watershed</u> <u>were</u> <u>used</u>

   <b>Least-cost</b> <b>path</b>
       We compute bitmask encoded movement directions using <u>r.walk:</u>
       g.region swwake_30m -p
       # create friction map based on land cover
       r.recode input=landclass96 output=friction rules=- &lt;&lt; EOF
       1:3:0.1:0.1
       4:5:10.:10.
       6:6:1000.0:1000.0
       7:7:0.3:0.3
       EOF
       # without Knight’s move
       r.walk -b elevation=elev_ned_30m friction=friction output=walkcost \
           outdir=walkdir start_coordinates=635576,216485
       r.path input=walkdir start_coordinates=640206,222795 \
           raster_path=walkpath vector_path=walkpath
       # with Knight’s move
       r.walk -b -k elevation=elev_ned_30m friction=friction output=walkcost_k \
           outdir=walkdir_k start_coordinates=635576,216485
       r.path input=walkdir_k start_coordinates=640206,222795 \
           raster_path=walkpath_k vector_path=walkpath_k
       # without Knight’s move and without bitmask encoding (single direction)
       r.walk elevation=elev_ned_30m friction=friction output=walkcost_s \
           outdir=walkdir_s start_coordinates=635576,216485
       r.path input=walkdir_s start_coordinates=640206,222795 \
           raster_path=walkpath_s vector_path=walkpath_s
       The  extracted least-cost path splits and merges on the way from the start point to the stop point (start
       point for r.walk). Note the gaps in the raster path when using the Knight’s move.
       <u>Figure:</u> <u>Comparison</u> <u>of</u> <u>shortest</u> <u>paths</u> <u>using</u> <u>single</u> <u>directions</u>  <u>and</u>  <u>multiple</u>  <u>bitmask</u>  <u>encoded</u>  <u>directions</u>
       <u>without</u> <u>and</u> <u>with</u> <u>Knight’s</u> <u>move</u>

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
        <u>g.region,</u> <u>r.basins.fill,</u> <u>r.cost,</u> <u>r.fill.dir,</u> <u>r.mapcalc,</u> <u>r.recode,</u> <u>r.terraflow,</u> <u>r.walk,</u> <u>r.watershed</u>

</pre><h4><b>AUTHOR</b></h4><pre>
       Markus Metz
       Multiple path directions sponsored by mundialis

</pre><h4><b>SOURCE</b> <b>CODE</b></h4><pre>
       Available at: r.path source code (history)

       Accessed: Friday Apr 04 01:19:25 2025

       Main index | Raster index | Topics index | Keywords index | Graphical index | Full index

       © 2003-2025 GRASS Development Team, GRASS GIS 8.4.1 Reference Manual

GRASS 8.4.1                                                                                       <u><a href="../man1grass/r.path.1grass.html">r.path</a></u>(1grass)
</pre>
 </div>
</div></section>
</div>
</body>
</html>