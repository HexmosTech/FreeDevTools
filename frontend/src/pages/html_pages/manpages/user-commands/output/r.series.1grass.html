<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>r.series   - Makes each output cell value a function of the values assigned to the corresponding cells in</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/grass-doc">grass-doc_8.4.1-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       <b>r.series</b>   - Makes each output cell value a function of the values assigned to the corresponding cells in
       the input raster map layers.

</pre><h4><b>KEYWORDS</b></h4><pre>
       raster, aggregation, series, parallel

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>r.series</b>
       <b>r.series</b> <b>--help</b>
       <b>r.series</b> [-<b>nz</b>]  [<b>input</b>=<u>name</u>[,<u>name</u>,...]]   [<b>file</b>=<u>name</u>]  <b>output</b>=<u>name</u>[,<u>name</u>,...]  <b>method</b>=<u>string</u>[,<u>string</u>,...]
       [<b>quantile</b>=<u>float</u>[,<u>float</u>,...]]       [<b>weights</b>=<u>float</u>[,<u>float</u>,...]]       [<b>range</b>=<u>lo,hi</u>]       [<b>nprocs</b>=<u>integer</u>]
       [<b>memory</b>=<u>memory</u> <u>in</u> <u>MB</u>]   [--<b>overwrite</b>]  [--<b>help</b>]  [--<b>verbose</b>]  [--<b>quiet</b>]  [--<b>ui</b>]

   <b>Flags:</b>
       <b>-n</b>
           Propagate NULLs

       <b>-z</b>
           Do not keep files open

       <b>--overwrite</b>
           Allow output files to overwrite existing files

       <b>--help</b>
           Print usage summary

       <b>--verbose</b>
           Verbose module output

       <b>--quiet</b>
           Quiet module output

       <b>--ui</b>
           Force launching GUI dialog

   <b>Parameters:</b>
       <b>input</b>=<u>name[,name</u>,...]
           Name of input raster map(s)

       <b>file</b>=<u>name</u>
           Input file with one raster map name and optional one weight per line, field  separator  between  name
           and weight is |

       <b>output</b>=<u>name[,name</u>,...] <b>[required]</b>
           Name for output raster map

       <b>method</b>=<u>string[,string</u>,...] <b>[required]</b>
           Aggregate operation
           Options:  <u>average,</u> <u>count,</u> <u>median,</u> <u>mode,</u> <u>minimum,</u> <u>min_raster,</u> <u>maximum,</u> <u>max_raster,</u> <u>stddev,</u> <u>range,</u> <u>sum,</u>
           <u>variance,</u> <u>diversity,</u> <u>slope,</u> <u>offset,</u> <u>detcoeff,</u> <u>tvalue,</u> <u>quart1,</u>  <u>quart3,</u>  <u>perc90,</u>  <u>quantile,</u>  <u>skewness,</u>
           <u>kurtosis</u>

       <b>quantile</b>=<u>float[,float</u>,...]
           Quantile to calculate for method=quantile
           Options: <u>0.0-1.0</u>

       <b>weights</b>=<u>float[,float</u>,...]
           Weighting factor for each input map, default value is 1.0 for each input map

       <b>range</b>=<u>lo,hi</u>
           Ignore values outside this range

       <b>nprocs</b>=<u>integer</u>
           Number of threads for parallel computing
           Default: <u>1</u>

       <b>memory</b>=<u>memory</u> <u>in</u> <u>MB</u>
           Maximum memory to be used (in MB)
           Cache size for raster rows
           Default: <u>300</u>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <u>r.series</u> makes each output cell value a function of the values assigned to the corresponding cells in the
       input raster map layers.

       <u>Figure:</u> <u>Illustration</u> <u>for</u> <u>an</u> <u>average</u> <u>of</u> <u>three</u> <u>input</u> <u>rasters</u>

       Following methods are available:

           •   average: average value

           •   count: count of non-NULL cells

           •   median: median value

           •   mode: most frequently occurring value

           •   minimum: lowest value

           •   min_raster: raster map number with the minimum time-series value

           •   maximum: highest value

           •   max_raster: raster map number with the maximum time-series value

           •   stddev: standard deviation

           •   range: range of values (max - min)

           •   sum: sum of values

           •   variance: statistical variance

           •   diversity: number of different values

           •   slope: linear regression slope

           •   offset: linear regression offset

           •   detcoeff: linear regression coefficient of determination

           •   tvalue: linear regression t-value

           •   quart1: first quartile

           •   quart3: third quartile

           •   perc90: ninetieth percentile

           •   quantile: arbitrary quantile

           •   skewness: skewness

           •   kurtosis: kurtosis
       Note  that  most  parameters  accept  multiple  answers, allowing multiple aggregates to be computed in a
       single run, e.g.:

       r.series input=map1,...,mapN \
                output=map.mean,map.stddev \
             method=average,stddev
       or:

       r.series input=map1,...,mapN \
                output=map.p10,map.p50,map.p90 \
                method=quantile,quantile,quantile \
                quantile=0.1,0.5,0.9
       The same number of values must be provided for all options.

</pre><h4><b>NOTES</b></h4><pre>
   <b>No-data</b> <b>(NULL)</b> <b>handling</b>
       With <u>-n</u> flag, any cell for which any of the corresponding input cells are NULL is  automatically  set  to
       NULL  (NULL  propagation).   The  aggregate  function  is not called, so all methods behave this way with
       respect to the <u>-n</u> flag.

       Without <u>-n</u> flag, the complete list of inputs for each cell (including NULLs) is passed to  the  aggregate
       function.  Individual  aggregates can handle data as they choose. Mostly, they just compute the aggregate
       over the non-NULL values, producing a NULL result only if all inputs are NULL.

   <b>Minimum</b> <b>and</b> <b>maximum</b> <b>analysis</b>
       The <u>min_raster</u> and <u>max_raster</u> methods generate a map with the number of the raster  map  that  holds  the
       minimum/maximum  value  of  the time-series. The numbering starts at <u>0</u> up to <u>n</u> for the first and the last
       raster listed in <u>input=</u>, respectively.

   <b>Range</b> <b>analysis</b>
       If the <u>range=</u> option is given, any values which fall outside that range will be treated as if  they  were
       NULL.  The <u>range</u> parameter can be set to <u>low,high</u> thresholds: values outside of this range are treated as
       NULL (i.e., they will be ignored by most aggregates, or will cause the result to be NULL if -n is given).
       The <u>low,high</u> thresholds are floating point, so use <u>-inf</u> or <u>inf</u> for a single threshold (e.g.,  <u>range=0,inf</u>
       to ignore negative values, or <u>range=-inf,-200.4</u> to ignore values above -200.4).

   <b>Linear</b> <b>regression</b>
       Linear regression (slope, offset, coefficient of determination, t-value) assumes equal time intervals. If
       the  data  have  irregular time intervals, NULL raster maps can be inserted into time series to make time
       intervals equal (see example).

   <b>Quantiles</b>
       <u>r.series</u> can calculate arbitrary quantiles.

   <b>Memory</b> <b>consumption</b>
       Memory usage is not an issue, as <u>r.series</u> only needs to hold one row from each map at a time.

   <b>Management</b> <b>of</b> <b>open</b> <b>file</b> <b>limits</b>
       The maximum number of raster maps that can be processed is  given  by  the  user-specific  limit  of  the
       operating  system. For example, the soft limits for users are typically 1024 files. The soft limit can be
       changed with e.g.  ulimit -n 4096 (UNIX-based operating systems) but it cannot be higher  than  the  hard
       limit. If the latter is too low, you can as superuser add an entry in:
       <a href="file:/etc/security/limits.conf">/etc/security/limits.conf</a>
       # &lt;domain&gt;      &lt;type&gt;  &lt;item&gt;         &lt;value&gt;
       your_username  hard    nofile          4096
       This  will  raise  the  hard  limit to 4096 files. Also have a look at the overall limit of the operating
       system
       cat <a href="file:/proc/sys/fs/file-max">/proc/sys/fs/file-max</a>
       which on modern Linux systems is several 100,000 files.

       For each map a weighting factor can  be  specified  using  the  <u>weights</u>  option.  Using  weights  can  be
       meaningful  when  computing the sum or average of maps with different temporal extent. The default weight
       is 1.0. The number of weights must be identical to the number of input maps and must have the same order.
       Weights can also be specified in the input file.

       Use the <b>-z</b> flag to analyze large amounts of raster maps without hitting open files  limit  and  the  <u>file</u>
       option  to  avoid  hitting the size limit of command line arguments.  Note that the computation using the
       <u>file</u> option is slower than with the <u>input</u> option.  For every single row in the output  map(s)  all  input
       maps are opened and closed. The amount of RAM will rise linearly with the number of specified input maps.
       The  <u>input</u>  and  <u>file</u>  options are mutually exclusive: the former is a comma separated list of raster map
       names and the latter is a text file with a new line separated list  of  raster  map  names  and  optional
       weights. As separator between the map name and the weight the character "|" must be used.

   <b>Performance</b>
       To  enable  parallel  processing,  the  user can specify the number of threads to be used with the <b>nprocs</b>
       parameter (default 1). The <b>memory</b> parameter (default 300 MB) can also be provided to determine  the  size
       of the buffer in MB for computation.
       <u>Figure:</u>  <u>Benchmark</u> <u>on</u> <u>the</u> <u>left</u> <u>shows</u> <u>execution</u> <u>time</u> <u>for</u> <u>different</u> <u>number</u> <u>of</u> <u>cells,</u> <u>benchmark</u> <u>on</u> <u>the</u> <u>right</u>
       <u>shows</u> <u>execution</u> <u>time</u> <u>for</u> <u>different</u> <u>memory</u> <u>size</u> <u>for</u> <u>10000x10000</u> <u>raster.</u> <u>See</u> <u>benchmark</u>  <u>scripts</u>  <u>in</u>  <u>source</u>
       <u>code.</u>  <u>(Intel</u> <u>Core</u> <u>i9-10940X</u> <u>CPU</u> <u>@</u> <u>3.30GHz</u> <u>x</u> <u>28)</u>

       To  reduce  the  memory  requirements  to  minimum,  set option <b>memory</b> to zero.  To take advantage of the
       parallelization, GRASS GIS needs to compiled with OpenMP enabled.

</pre><h4><b>EXAMPLES</b></h4><pre>
       Using <u>r.series</u> with wildcards:
       r.series input="`g.list pattern=’insitu_data.*’ sep=,`" \
                output=insitu_data.stddev method=stddev

       Note the <u>g.list</u> script also supports regular expressions for selecting map names.

       Using <u>r.series</u> with NULL raster maps (in order to consider a "complete" time series):
       r.mapcalc "dummy = null()"
       r.series in=map2001,map2002,dummy,dummy,map2005,map2006,dummy,map2008 \
                out=res_slope,res_offset,res_coeff meth=slope,offset,detcoeff

       Example for multiple aggregates to be computed in one run (3 resulting aggregates from two input maps):
       r.series in=one,two out=result_avg,res_slope,result_count meth=sum,slope,count

       Example to use the file option of r.series:
       cat &gt; input.txt &lt;&lt; EOF
       map1
       map2
       map3
       EOF
       r.series file=input.txt out=result_sum meth=sum

       Example to use the file option of r.series including weights. The weight 0.75 should be assigned to map2.
       As the other maps do not have weights we can leave it out:
       cat &gt; input.txt &lt;&lt; EOF
       map1
       map2|0.75
       map3
       EOF
       r.series file=input.txt out=result_sum meth=sum

       Example for counting the number of days above a certain temperature using daily average  maps  (’???’  as
       DOY wildcard):
       # Approach for shell based systems
       r.series input=`g.list rast pattern="temp_2003_???_avg" separator=comma` \
                output=temp_2003_days_over_25deg range=25.0,100.0 method=count
       # Approach in two steps (e.g., for Windows systems)
       g.list rast pattern="temp_2003_???_avg" output=mapnames.txt
       r.series file=mapnames.txt \
                output=temp_2003_days_over_25deg range=25.0,100.0 method=count

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
        <u>g.list,</u> <u>g.region,</u> <u>r.quantile,</u> <u>r.series.accumulate,</u> <u>r.series.interp,</u> <u>r.univar</u>

       Hints for large raster data processing

</pre><h4><b>AUTHOR</b></h4><pre>
       Glynn Clements

</pre><h4><b>SOURCE</b> <b>CODE</b></h4><pre>
       Available at: r.series source code (history)

       Accessed: Friday Apr 04 01:19:31 2025

       Main index | Raster index | Topics index | Keywords index | Graphical index | Full index

       © 2003-2025 GRASS Development Team, GRASS GIS 8.4.1 Reference Manual

GRASS 8.4.1                                                                                     <u><a href="../man1grass/r.series.1grass.html">r.series</a></u>(1grass)
</pre>
 </div>
</div></section>
</div>
</body>
</html>