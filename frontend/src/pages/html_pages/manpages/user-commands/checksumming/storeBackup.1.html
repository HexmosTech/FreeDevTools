<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>storeBackup.pl - fancy compressing managing checksumming hard-linking cp -ua</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/storebackup">storebackup_3.2.1-2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       storeBackup.pl - fancy compressing managing checksumming hard-linking cp -ua

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This program copies trees to another location. Every file copied is potentially compressed (see
       --exceptSuffix). The backups after the first backup will compare the files with an md5 checksum with the
       last stored version. If they are equal, it will only make an hard link to it. It will also check mtime,
       ctime and size to recognize idential files in older backups very fast.  It can also backup big image
       files fast and efficiently on a per block basis (data deduplication).

       You can overwrite options in the configuration file on the command line.

</pre><h4><b>SYNOPSIS</b></h4><pre>
               $prog --help
       or
               $prog -g configFile
       or
               $prog [-f configFile] [-s sourceDir]
                     [-b backupDirectory] [-S series] [--print]
                     [-T tmpdir] [-L lockFile] [--unlockBeforeDel]
                     [--exceptDirs dir1,dir2,dir3] [--contExceptDirsErr]
                     [--includeDirs dir1,dir2,dir3]
                     [--exceptRule rule] [--includeRule rule]
                     [--exceptTypes types] [--cpIsGnu] [--linkSymlinks]
                     [--precommand job] [--postcommand job]
                     [--followLinks depth] [--highLatency]
                     [--ignorePerms] [--lateLinks [--lateCompress]]
                     [--checkBlocksSuffix suffix] [--checkBlocksMinSize size]
                     [--checkBlocksBS]
                     [--checkBlocksRule0 rule [--checkBlocksBS0 size]
                      [--checkBlocksCompr0] [--checkBlocksRead0 filter]
                      [--checkBlocksParallel0]]
                     [--checkBlocksRule1 rule [--checkBlocksBS1 size]
                      [--checkBlocksCompr1] [--checkBlocksRead1 filter]
                      [--checkBlocksParallel1]]
                     [--checkBlocksRule2 rule [--checkBlocksBS2 size]
                      [--checkBlocksCompr2] [--checkBlocksRead2 filter]
                      [--checkBlocksParallel2]]
                     [--checkBlocksRule3 rule [--checkBlocksBS3 size]
                      [--checkBlocksCompr3] [--checkBlocksRead3 filter]
                      [--checkBlocksParallel3]]
                     [--checkBlocksRule4 rule [--checkBlocksBS4 size]
                      [--checkBlocksCompr4] [--checkBlocksRead4 filter]
                      [--checkBlocksParallel4]]
                     [--checkDevices0 list [--checkDevicesDir0]
                      [--checkDevicesBS0] [checkDevicesCompr0]
                      [--checkDevicesParallel0]]
                     [--checkDevices1 list [--checkDevicesDir1]
                      [--checkDevicesBS1] [checkDevicesCompr1]
                      [--checkDevicesParallel1]]
                     [--checkDevices2 list [--checkDevicesDir2]
                      [--checkDevicesBS2] [checkDevicesCompr2]
                      [--checkDevicesParallel2]]
                     [--checkDevices3 list [--checkDevicesDir3]
                      [--checkDevicesBS3] [checkDevicesCompr3]
                      [--checkDevicesParallel3]]
                     [--checkDevices4 list [--checkDevicesDir4]
                      [--checkDevicesBS4] [checkDevicesCompr4]
                      [--checkDevicesParallel1]]
                     [--saveRAM] [-c compress] [-u uncompress] [-p postfix]
                     [--noCompress number] [--queueCompress number]
                     [--noCopy number] [--queueCopy number]
                     [--withUserGroupStat] [--userGroupStatFile filename]
                     [--exceptSuffix suffixes] [--addExceptSuffix suffixes]
                     [--minCompressSize size] [--comprRule]
                     [--doNotCompressMD5File] [--chmodMD5File] [-v]
                     [-d level][--progressReport number] [--printDepth]
                     [--ignoreReadError]
                     [--suppressWarning key] [--linkToRecent name]
                     [--doNotDelete] [--deleteNotFinishedDirs]
                     [--resetAtime] [--keepAll timePeriod] [--keepWeekday entry]
                     [[--keepFirstOfYear] [--keepLastOfYear]
                      [--keepFirstOfMonth] [--keepLastOfMonth]
                      [--firstDayOfWeek day] [--keepFirstOfWeek]
                      [--keepLastOfWeek] [--keepDuplicate] [--keepMinNumber]
                      [--keepMaxNumber]
                       | [--keepRelative] ]
                     [-l logFile
                      [--plusLogStdout] [--suppressTime] [-m maxFilelen]
                      [[-n noOfOldFiles] | [--saveLogs]]
                      [--compressWith compressprog]]
                     [--logInBackupDir [--compressLogInBackupDir]
                      [--logInBackupDirFileName logFile]]
                     [otherBackupSeries ...]

</pre><h4><b>OPTIONS</b></h4><pre>
       <b>--help</b>
                   show this help

       <b>--generate</b>, <b>-g</b>
                   generate a template of the configuration file

       <b>--print</b>
                   print configuration read from configuration file
                   or command line and stop

       <b>--file</b>, <b>-f</b>
                   configuration file (instead of or additionally to options
                   on command line)

       <b>--sourceDir</b>, <b>-s</b>
                   source directory (must exist)

       <b>--backupDir</b>, <b>-b</b>
                   top level directory of all backups (must exist)

       <b>--series</b>, <b>-S</b>
                   series directory, default is 'default'
                   relative path from backupDir

       <b>--tmpdir</b>, <b>-T</b>
                   directory for temporary files, default is &lt;<a href="file:/tmp">/tmp</a>&gt;

       <b>--lockFile</b>, <b>-L</b>
                   lock file, if exists, new instances will finish if an old
                   is already running, default is $lockFile

       <b>--unlockBeforeDel</b>
                   remove the lock file before deleting old backups
                   default is to delete the lock file after removing old
                   backups

       <b>--exceptDirs</b>, <b>-e</b>
                   directories to except from backing up (relative path),
                   wildcards are possible and should be quoted to avoid
                   replacements by the shell
                   use this parameter multiple times for multiple
                   directories

       <b>--contExceptDirsErr</b>
                   continue if one or more of the exceptional directories
                   do not exist (default is to stop processing)

       <b>--includeDirs</b>, <b>-i</b>
                   directories to include in the backup (relative path),
                   wildcards are possible and have to be quoted
                   use this parameter multiple times for multiple directories

       <b>--exceptRule</b>
                   Files to exclude from backing up.
                   see README: 'including / excluding files and directories'

       <b>--includeRule</b>
                   Files to include in the backug up - like exceptRule
                   see README: 'including / excluding files and directories'

       <b>--writeExcludeLog</b>
                   write a file name .storeBackup.notSaved.bz2 with the names
                   of all skipped files

       <b>--exceptTypes</b>
                   do not save the specified type of files, allowed: Sbcfpl
                       S - file is a socket
                       b - file is a block special file
                       c - file is a character special file
                       f - file is a plain file
                       p - file is a named pipe
                       l - file is a symbolic link
                       Sbc can only be saved when using option [cpIsGnu]

       <b>--cpIsGnu</b>
                   Activate this option if your systems cp is a full-featured
                   GNU version. In this case you will be able to also backup
                   several special file types like sockets.

       <b>--linkSymlinks</b>
                   hard link identical symlinks

       <b>--precommand</b>
                   exec job before starting the backup, checks lockFile (-L)
                   before starting (e.g. can be used for rsync)
                   stops execution if job returns exit status != 0
                   This parameter is parsed like a line in the configuration
                   file and normally has to be quoted.

       <b>--postcommand</b>
                   exec job after finishing the backup, but before erasing of
                   old backups  reports if job returns exit status != 0
                   This parameter is parsed like a line in the configuration
                   file and normally has to be quoted.

       <b>--followLinks</b>
                   follow symbolic links like directories up to depth
                   default = 0 -&gt; do not follow links

       <b>--highLatency</b>
                   use this for a very high latency line (eg. vpn over
                   the internet) for better parallelization

       <b>--ignorePerms</b>
                   If this option chosen, files will not necessarily have
                   the same permissions and owner as the originals. This
                   speeds up backups on network drives a lot. Recovery with
                   storeBackupRecover.pl will restore them correctly.

       <b>--lateLinks</b>
                   do *not* write hard links to existing files in the backup
                   during the backup
                   you have to call the program storeBackupWriteLateLink.pl
                   later on your server if you set this flag to 'yes'
                   you have to run storeBackupUpdateBackup.pl later - see
                   description for that program

       <b>--lateCompress</b>
                   only in combination with --lateLinks
                   compression from files &gt;= minCompressSize will be done
                   later, the file is (temporarily) copied into the backup

       <b>--checkBlocksSuffix</b>
                   Files with suffix for which storeBackup will make an md5
                   check on blocks of that file. Executed after
                   --checkBlocksRule(n)
                   This option can be repeated multiple times

       <b>--checkBlocksMinSize</b>
                   Only check files specified in --checkBlocksSuffix if there
                   file size is at least this value, default is 100M

       <b>--checkBlocksBS</b>
                   Block size for files specified with --checkBlocksSuffix
                   Default is $checkBlocksBSdefault (1 megabyte)

       <b>--checkBlocksCompr</b>
                   if set, the blocks generated due to checkBlocksSuffix
                   are compressed

       <b>--checkBlocksRule0</b>
                   Files for which storeBackup will make an md5 check
                   depending on blocks of that file.

       <b>--checkBlocksBS0</b>
                   Block size for option checkBlocksRule
                   Default is $checkBlocksBSdefault (1 megabyte)

       <b>--checkBlocksCompr0</b>
                   if set, the blocks generated due to this rule are
                   compressed

       <b>--checkBlocksRead0</b>
                   Filter for reading the file to treat as a blocked file
                   eg. 'gzip -d' if the file is compressed. Default is no
                   read filter.
                   This parameter is parsed like the line in the
                   configuration file and normally has to be quoted,
                   eg. 'gzip -9'

       <b>--checkBlocksParallel0</b>
                   Read files specified here in parallel to "normal" ones.
                   This only makes sense if they are on a different disk.
                   Default value is 'no'

       <b>--checkBlocksRule1</b>
       <b>--checkBlocksBS1</b>
       <b>--checkBlocksCompr1</b>
       <b>--checkBlocksRead1</b>
       <b>--checkBlocksParallel1</b>
       <b>--checkBlocksRule2</b>
       <b>--checkBlocksBS2</b>
       <b>--checkBlocksCompr2</b>
       <b>--checkBlocksRead2</b>
       <b>--checkBlocksParallel2</b>
       <b>--checkBlocksRule3</b>
       <b>--checkBlocksBS3</b>
       <b>--checkBlocksCompr3</b>
       <b>--checkBlocksRead3</b>
       <b>--checkBlocksParallel3</b>
       <b>--checkBlocksRule4</b>
       <b>--checkBlocksBS4</b>
       <b>--checkBlocksCompr4</b>
       <b>--checkBlocksRead4</b>
       <b>--checkBlocksParallel4</b>
       <b>--checkDevices0</b>
                   List of devices for md5 ckeck depending on blocks of these
                   devices

       <b>--checkDevicesDir0</b>
                   Directory where to store the backup of the device

       <b>--checkDevicesBS0</b>
                   Block size of option checkDevices0,
                   default is 1M (1 megabyte)

       <b>--checkDevicesCompr0</b>
                   Compress blocks resulting from option checkDevices0

       <b>--checkDevicesParallel0</b>
                   Read devices specified in parallel to the rest of the
                   backup. This only makes sense if they are on a different
                   disk. Default value is 'no'

       <b>--checkDevices1</b>
       <b>--checkDevicesDir1</b>
       <b>--checkDevicesBS1</b>
       <b>--checkDevicesCompr1</b>
       <b>--checkDevicesParallel1</b>
       <b>--checkDevices2</b>
       <b>--checkDevicesDir2</b>
       <b>--checkDevicesBS2</b>
       <b>--checkDevicesCompr2</b>
       <b>--checkDevicesParallel2</b>
       <b>--checkDevices3</b>
       <b>--checkDevicesDir3</b>
       <b>--checkDevicesBS3</b>
       <b>--checkDevicesCompr3</b>
       <b>--checkDevicesParallel3</b>
       <b>--checkDevices4</b>
       <b>--checkDevicesDir4</b>
       <b>--checkDevicesBS4</b>
       <b>--checkDevicesCompr4</b>
       <b>--checkDevicesParallel4</b>
       <b>--saveRAM</b>
                   write temporary dbm files in --tmpdir
                   use this if you do not have enough RAM

       <b>--compress</b>, <b>-c</b>
                   compress command (with options), default is &lt;bzip2&gt;
                   This parameter is parsed like the line in the
                   configuration file and normally has to be quoted,
                   eg. 'gzip -9'

       <b>--uncompress</b>, <b>-u</b>
                   uncompress command (with options), default is  &lt;bzip2 -d&gt;
                   This parameter is parsed like the line in the
                   configuration file and normally has to be quoted, eg.
                   'gzip -d'

       <b>--postfix</b>, <b>-p</b>
                   postfix to add after compression, default is &lt;.bz2&gt;

       <b>--exceptSuffix</b>
                   do not compress files with the following
                   suffix (uppercase included):
                   ('\.zip', '\.bz2', '\.gz', '\.tgz', '\.jpg', '\.gif',
                    '\.tiff', '\.tif', '\.mpeg', '\.mpg', '\.mp3', '\.ogg',
                    '\.gpg', '\.png')
                   This option can be repeated multiple times
                   If you do not want any compression, set this option
                   to '.*'

       <b>--addExceptSuffix</b>
                   like --exceptSuffix, but do not replace defaults, add

       <b>--minCompressSize</b>
                   Files smaller than this size will never be compressed
                   but copied

       <b>--comprRule</b>
                   alternative to --exceptSuffix and minCompressSize:
                   definition of a rule which files will be compressed

       <b>--noCompress</b>
                   maximal number of parallel compress operations,
                   default = chosen automatically

       <b>--queueCompress</b>
                   length of queue to store files before compression,
                   default = 1000

       <b>--noCopy</b>
                   maximal number of parallel copy operations,
                   default = 1

       <b>--queueCopy</b>
                   length of queue to store files before copying,
                   default = 1000

       <b>--withUserGroupStat</b>
                   write statistics about used space in log file

       <b>--userGroupStatFile</b>
                   write statistics about used space in name file
                   will be overridden each time

       <b>--doNotCompressMD5File</b>
                   do not compress .md5CheckSumFile

       <b>--chmodMD5File</b>
                   permissions of .md5CheckSumFile and corresponding
                   .storeBackupLinks directory, default is 0600

       <b>--verbose</b>, <b>-v</b>
                   verbose messages

       <b>--debug</b>, <b>-d</b>
                   generate debug messages, levels are 0 (none, default),
                   1 (some), 2 (many) messages, especially in
                   --exceptRule and --includeRule

       <b>--resetAtime</b>
                   reset access time in the source directory - but this will
                   change ctime (time of last modification of file status
                   information)

       <b>--doNotDelete</b>
                   check only, do not delete any backup

       <b>--deleteNotFinishedDirs</b>
                   delete old backups which have not been finished
                   this will not happen if doNotDelete is set

       <b>--keepAll</b>
                   keep backups which are not older than the specified amount
                   of time. This is like a default value for all days in
                   --keepWeekday. Begins deleting at the end of the script
                   the time range has to be specified in format 'dhms', e.g.
                     10d4h means 10 days and 4 hours
                     default = 20d

       <b>--keepWeekday</b>
                   keep backups for the specified days for the specified
                   amount of time. Overwrites the default values chosen in
                   --keepAll. 'Mon,Wed:40d Sat:60d10m' means:
                     keep backups from Mon and Wed 40days + 5mins
                     keep backups from Sat 60days + 10mins
                     keep backups from the rest of the days like spcified in
                     --keepAll (default $keepAll)
                   if you also use the 'archive flag' it means to not
                   delete the affected directories via --keepMaxNumber:
                     a10d4h means 10 days and 4 hours and 'archive flag'
                   e.g. 'Mon,Wed:a40d5m Sat:60d10m' means:
                     keep backups from Mon and Wed 40days + 5mins + 'archive'
                     keep backups from Sat 60days + 10mins
                     keep backups from the rest of the days like specified in
                     --keepAll (default 30d)

       <b>--keepFirstOfYear</b>
                   do not delete the first backup of a year
                   format is timePeriod with possible 'archive flag'

       <b>--keepLastOfYear</b>
                   do not delete the last backup of a year
                   format is timePeriod with possible 'archive flag'

       <b>--keepFirstOfMonth</b>
                   do not delete the first backup of a month
                   format is timePeriod with possible 'archive flag'

       <b>--keepLastOfMonth</b>
                   do not delete the last backup of a month
                   format is timePeriod with possible 'archive flag'

       <b>--firstDayOfWeek</b>
                   default: 'Sun'. This value is used for calculating
                   --keepFirstOfWeek and --keepLastOfWeek

       <b>--keepFirstOfWeek</b>
                   do not delete the first backup of a week
                   format is timePeriod with possible 'archive flag'

       <b>--keepLastOfWeek</b>
                   do not delete the last backup of a week
                   format is timePeriod with possible 'archive flag'

       <b>--keepDuplicate</b>
                   keep multiple backups of one day up to timePeriod
                   format is timePeriod, 'archive flag' is not possible
                   default = 7d

       <b>--keepMinNumber</b>
                   Keep that miminum of backups. Multiple backups of one
                   day are counted as one backup. Default is 10.

       <b>--keepMaxNumber</b>
                   Try to keep only that maximum of backups. If you have more
                   backups, the following sequence of deleting will happen:
                   - delete all duplicates of a day, beginning with the old
                     once, except the last of every day
                   - if this is not enough, delete the rest of the backups
                     beginning with the oldest, but *never* a backup with
                     the 'archive flag' or the last backup

       <b>--keepRelative</b>, <b>-R</b>
                   Alternative deletion scheme. If you use this option, all
                   other keep options are ignored. Preserves backups depending
                   on their *relative* age. Example:
                   -R '1d 7d 61d 92b'
                   will (try to) ensure that there is always
                   - One backup between 1 day and 7 days old
                   - One backup between 5 days and 2 months old
                   - One backup between ~2 months and ~3 months old
                   If there is no backup for a specified timespan
                   (e.g. because the last backup was done more than 2 weeks
                   ago) the next older backup will be used for this timespan.

       <b>--progressReport</b>, <b>-P</b>
                   print progress report after each 'number' files

       <b>--printDepth</b>, <b>-D</b>
                   print depth of actual read directory during backup

       <b>--ignoreReadError</b>
                   ignore read errors in source directory; not readable
                   directories do not cause storeBackup.pl to stop processing

       <b>--suppressWarning</b>
                   suppress (unwanted) warnings in the log files;
                   to suppress warnings, the following keys can be used:
                     excDir (suppresses the warning that excluded directories
                            do not exist)
                     fileChange (suppresses the warning that a file has changed
                                during the backup)
                     crSeries (suppresses the warning that storeBackup had to
                              create the 'default' series)
                     hashCollision (suppresses the warning if a possible
                                   hash collision is detected)
                    fileNameWithLineFeed (suppresses the warning if a filename
                                         contains a line feed)
                   This option can be repeated multiple times on the command line.

       <b>--linkToRecent</b>
                   after a successful backup, set a symbolic link to
                   that backup and delete existing older links with the
                   same name

       <b>--logFile</b>, <b>-l</b>
                   log file (default is STDOUT)

       <b>--plusLogStdout</b>
                   if you specify a log file with --logFile you can
                   additionally print the output to STDOUT with this flag

       <b>--suppressTime</b>
                   suppress output of time in logfile

       <b>--maxFilelen</b>, <b>-m</b>
                   maximal length of log file, default = 1e6

       <b>--noOfOldFiles</b>, <b>-n</b>
                   number of old log files, default = 5

       <b>--saveLogs</b>
                   save log files with date and time instead of deleting the
                   old (with [-noOldFiles])

       <b>--compressWith</b>
                   compress saved log files (e.g. with 'gzip -9')
                   default is 'bzip2'
                   This parameter is parsed like a line in the configuration
                   file and normally has to be quoted.

       <b>--logInBackupDir</b>
                   write log file (also) in the backup directory
                   Be aware that this log does not contain all error
                   messages of the one specified with --logFile!

       <b>--compressLogInBackupDir</b>
                   compress the log file in the backup directory

       <b>--logInBackupDirFileName</b>
                   filename to use for writing the above log file,
                   default is .storeBackup.log

       <b>otherBackupSeries</b>
                   List of other backup series to consider for
                   hard linking. Relative path from backupDir!
                   Format (examples):
                   backupSeries/2002.08.29_08.25.28 -&gt; consider this backup
                   or
                   0:backupSeries -&gt;last (youngest) in &lt;backupDir&gt;/backupSeries
                   1:backupSeries -&gt;one before last in &lt;backupDir&gt;/backupSeries
                   n:backupSeries -&gt;
                     n'th before last in &lt;backupDir&gt;/backupSeries
                   3-5:backupSeries -&gt;
                     3rd, 4th and 5th in &lt;backupDir&gt;/backupSeries
                   all:backupSeries -&gt; all in &lt;backupDir&gt;/backupSeries
                   default is to link to the last backup in every series

</pre><h4><b>COPYRIGHT</b></h4><pre>
       Copyright  (c)  2000,2004,2008-2009,2012  by  Heinz-Josef  Claes  (see  README).  Published under the GNU
       General Public License or any later version.

perl v5.30.3                                       2020-07-08                                     <u><a href="../man1/STOREBACKUP.1.html">STOREBACKUP</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>