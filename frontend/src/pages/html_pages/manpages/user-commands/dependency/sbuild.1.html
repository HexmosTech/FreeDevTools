<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>sbuild - build debian packages from source</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/sbuild">sbuild_0.88.3ubuntu2.1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       sbuild - build debian packages from source

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>sbuild</b>   [<b>-h</b>|<b>--help</b>   |   <b>-V</b>|<b>--version</b>]   [<b>-v</b>|<b>--verbose</b>   |   <b>-q</b>|<b>--quiet</b>]   [<b>-D</b>|<b>--debug</b>]  [<b>-A</b>|<b>--arch-all</b>]
       [<b>--archive=</b><u>archive</u>]                     [<b>-d</b>|<b>--dist=</b><u>distribution</u>]                     [<b>-c</b>|<b>--chroot=</b><u>chroot</u>]
       [<b>--chroot-mode=</b><u>schroot|sudo|autopkgtest|unshare</u>]   [<b>--arch=</b><u>architecture</u>]   [<b>--arch-any</b>  |  <b>--no-arch-any</b>]
       [<b>--build=</b><u>architecture</u>]       [<b>--host=</b><u>architecture</u>]       [<b>--profiles=</b><u>profile[,...]</u>]         [<b>-s</b>|<b>--source</b>]
       [<b>--force-orig-source</b>] [<b>--make-binNMU=</b><u>changelog-entry</u>] [<b>--binNMU=</b><u>NMU-version</u>] [<b>--append-to-version=</b><u>string</u>]
       [<b>--binNMU-timestamp=</b><u>timestamp</u>]           [<b>--binNMU-changelog=</b><u>changelog</u>]           [<b>--build-dir=</b><u>directory</u>]
       [<b>--add-depends=</b><u>dependency</u>]          [<b>--add-conflicts=</b><u>dependency</u>]          [<b>--add-depends-arch=</b><u>dependency</u>]
       [<b>--add-conflicts-arch=</b><u>dependency</u>]   [<b>--add-depends-indep=</b><u>dependency</u>]   [<b>--add-conflicts-indep=</b><u>dependency</u>]
       [<b>-m</b>|<b>--maintainer=</b><u>maintainer</u>]   [<b>-e</b>|<b>--uploader=</b><u>uploader</u>]    [<b>-k</b>|<b>--keyid=</b><u>key-id</u>]    [<b>--source-only-changes</b>]
       [<b>--no-source-only-changes</b>]  [<b>-j</b>|<b>--jobs=</b><u>n</u>] [<b>--enable-network</b>] [<b>--no-enable-network</b>] [<b>--debbuildopt=</b><u>option</u>]
       [<b>--debbuildopts=</b><u>options</u>]             [<b>--dpkg-source-opt=</b><u>options</u>]             [<b>--dpkg-source-opts=</b><u>options</u>]
       [<b>--dpkg-file-suffix=</b><u>suffix</u>]  [<b>-p</b>|<b>--purge=</b>purge-mode] [<b>--purge-build=</b>purge-mode] [<b>--purge-deps=</b>purge-mode]
       [<b>--purge-session=</b>purge-mode]    [<b>-b</b>|<b>--batch]</b>    [<b>-n</b>|<b>--nolog</b>]     [<b>--clean-source</b>]     [<b>--no-clean-source</b>]
       [<b>--run-lintian</b>]   [<b>--no-run-lintian</b>]  [<b>--lintian-opt=</b><u>options</u>]  [<b>--lintian-opts=</b><u>options</u>]  [<b>--run-piuparts</b>]
       [<b>--no-run-piuparts</b>]  [<b>--piuparts-opt=</b><u>options</u>]   [<b>--piuparts-opts=</b><u>options</u>]   [<b>--piuparts-root-arg=</b><u>options</u>]
       [<b>--piuparts-root-args=</b><u>options</u>]   [<b>--run-autopkgtest</b>]  [<b>--no-run-autopkgtest</b>]  [<b>--autopkgtest-opt=</b><u>options</u>]
       [<b>--autopkgtest-opts=</b><u>options</u>]      [<b>--autopkgtest-root-arg=</b><u>options</u>]      [<b>--autopkgtest-root-args=</b><u>options</u>]
       [<b>--pre-build-commands=</b><u>string</u>]  [<b>--chroot-setup-commands=</b><u>string</u>]  [<b>--chroot-update-failed-commands=</b><u>string</u>]
       [<b>--build-deps-failed-commands=</b><u>string</u>]                                  [<b>--starting-build-commands=</b><u>string</u>]
       [<b>--finished-build-commands=</b><u>string</u>]   [<b>--build-failed-commands=</b><u>string</u>]  [<b>--chroot-cleanup-commands=</b><u>string</u>]
       [<b>--post-build-commands=</b><u>string</u>] [<b>--post-build-failed-commands=</b><u>string</u>]  [<b>--anything-failed-commands=</b><u>string</u>]
       [<b>--log-external-command-output</b>]         [<b>--log-external-command-error</b>]         [<b>--setup-hook=</b><u>hook-script</u>]
       [<b>--build-dep-resolver=</b><u>resolver</u>]                        [<b>--resolve-alternatives</b>|<b>--no-resolve-alternatives</b>]
       [<b>--extra-package=</b><u>package.deb|directory</u>]    [<b>--extra-repository=</b><u>spec</u>]    [<b>--extra-repository-key=</b><u>file.asc</u>]
       [<b>--build-path=</b><u>string</u>]     [<b>--dsc-dir=</b><u>string</u>]      [<b>--autopkgtest-virt-server=</b><u>schroot|lxc|chroot|qemu|ssh</u>]
       [<b>--autopkgtest-virt-server-opt=</b><u>string</u>]  [<b>--autopkgtest-virt-server-opts=</b><u>options</u>] [<b>--purge-extra-packages</b>]
       [<b>--bd-uninstallable-explainer=</b><u>dose3|apt|none</u>] [<b>PACKAGE</b>[<b>.dsc</b>]]

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>sbuild</b> rebuilds Debian binary packages from the  corresponding  Debian  source,  installing  any  missing
       source  dependencies.   The  build takes place in a dedicated clean build environment, rather than on the
       host system. For an overview of the supported chroot backends see the section <b>CHROOT</b> <b>MODES</b>.

       <b>sbuild</b> can fetch the Debian source over a network, or it can use locally available sources.

       sbuild is given a packages to process as the argument <b>PACKAGE[.dsc]</b>.  This argument is  in  the  form  of
       either  a  debianized  package  source  directory, a source package name along with a version in the form
       <u>package_version</u>, a source package name, or a .dsc file. If no arguments are given,  the  current  working
       directory is passed as an argument.

       For  arguments given as source directories, dpkg-source is first run to produce a source .dsc file. Then,
       the package is built using the .dsc produced. For arguments in the form <u>package_version</u> or  <u>package</u>,  apt
       is  used  to  download  the  source package. For arguments given as a .dsc file, sbuild builds the source
       packages directly. For .dsc files in remote locations, the source packages  are  downloaded  first,  then
       built.

       It  is  also possible to run external commands with sbuild. See the section <b>EXTERNAL</b> <b>COMMANDS</b> for more on
       this.

       <b>sbuild</b>  mails  the  build  logs  to  a   user.    It   is   configured   by   the   configuration   files
       <u>/etc/sbuild/sbuild.conf</u>   and   <u>$XDG_CONFIG_HOME/sbuild/config.pl</u>   (preferred   over   <u><a href="file:~/.sbuildrc">~/.sbuildrc</a></u>).  If
       <u>$XDG_CONFIG_HOME</u> is either not set or empty, <u><a href="file:~/.config/sbuild/config.pl">~/.config/sbuild/config.pl</a></u> will be used. An example sbuildrc
       is available in <u>/usr/share/doc/sbuild/examples/example.sbuildrc</u>.  A custom path to a  configuration  file
       can also be specified through setting the <b>SBUILD_CONFIG</b> environment variable to the path of an additional
       configuration file.

       You  can  build either using a local package with its .dsc file or a remote one by specifying an explicit
       dpkg version.

</pre><h4><b>OPTIONS</b></h4><pre>
       Options set on the command line overwrite settings made in the configuration file.

       <b>-h</b>, <b>--help</b>
              Display this manual.

       <b>-V</b>, <b>--version</b>
              Print version information.

       <b>--add-depends=</b><u>dependency</u>

       <b>--add-conflicts=</b><u>dependency</u>

       <b>--add-depends-arch=</b><u>dependency</u>

       <b>--add-conflicts-arch=</b><u>dependency</u>

       <b>--add-depends-indep=</b><u>dependency</u>

       <b>--add-conflicts-indep=</b><u>dependency</u>
              These options add a build dependencies to the source package being built, in addition to the build
              dependency information specified in  debian/control.   These  dependencies  will  be  concatenated
              directly   to   the   Build-Depends,  Build-Conflicts,  Build-Depends-Arch,  Build-Conflicts-Arch,
              Build-Depends-Indep and Build-Conflicts-Indep dependencies, respectively.  The options may be used
              any number of times to add multiple dependencies.  The format is identical to the format  used  in
              debian/control.   These  command  line  options  append  to  the <b>MANUAL_DEPENDS</b>, <b>MANUAL_CONFLICTS</b>,
              <b>MANUAL_DEPENDS_ARCH</b>,  <b>MANUAL_CONFLICTS_ARCH</b>,   <b>MANUAL_DEPENDS_INDEP</b>   and   <b>MANUAL_CONFLICTS_INDEP</b>
              configuration variables, respectively. See <b><a href="../man5/sbuild.conf.5.html">sbuild.conf</a></b>(5) for more information.

       <b>--arch=</b><u>architecture</u>
              Build   using   the   architecture   specified.   A  chroot  named  <u>$distribution-$arch-sbuild</u>  or
              <u>$distribution-arch</u> is searched for, in that order of preference.  The chroot must be installed and
              configured appropriately to build as that architecture, e.g. using  <u>personality=linux32</u>  to  build
              i386  packages  on  an  amd64 system.  Note that this option is equivalent to "--host=architecture
              --build=architecture".  This command line option sets the <b>HOST_ARCH</b> and  <b>BUILD_ARCH</b>  configuration
              variables. See <b><a href="../man5/sbuild.conf.5.html">sbuild.conf</a></b>(5) for more information.

       <b>--host=</b><u>architecture</u>
              Build  using  the  host  architecture  specified.  If $host and $build don't match, a chroot named
              <u>$distribution-$build-$host-sbuild</u> or <u>$distribution-$build-$host</u> is searched for, falling  back  to
              <u>$distribution-$build-sbuild</u>  or <u>$distribution-$build</u>, in that order of preference.  This option is
              only useful for cross-building when used together with --build.  This command line option sets the
              <b>HOST_ARCH</b> configuration variable. See <b><a href="../man5/sbuild.conf.5.html">sbuild.conf</a></b>(5) for more information.

       <b>--build=</b><u>architecture</u>
              Build using the build architecture specified.  This option is only useful for cross-building  when
              used  together  with  --host.   If  --build  is  not specified, the default system architecture is
              assumed.  This command line option sets the <b>BUILD_ARCH</b> configuration variable. See  <b><a href="../man5/sbuild.conf.5.html">sbuild.conf</a></b>(5)
              for more information.

       <b>-A</b>, <b>--arch-all</b>
              Also  build  Architecture:  all  packages.  This  is the default behaviour for native builds. This
              option is the opposite of --no-arch-all.  See the section <b>BUILD</b> <b>ARTIFACTS</b>  for  more  information.
              This  command  line  option sets the <b>BUILD_ARCH_ALL</b> configuration variable. See <b><a href="../man5/sbuild.conf.5.html">sbuild.conf</a></b>(5) for
              more information.

       <b>--no-arch-all</b>
              Do not build Architecture: all packages. This is the default  behaviour  for  cross  builds.  This
              option is the opposite of --arch-all.  See the section <b>BUILD</b> <b>ARTIFACTS</b> for more information.  This
              command  line  option  sets the <b>BUILD_ARCH_ALL</b> configuration variable. See <b><a href="../man5/sbuild.conf.5.html">sbuild.conf</a></b>(5) for more
              information.

       <b>--arch-any</b>
              Build Architecture: any packages. This is the default behavior. This option  is  the  opposite  of
              --no-arch-any.   See  the  section <b>BUILD</b> <b>ARTIFACTS</b> for more information.  This command line option
              sets the <b>BUILD_ARCH_ANY</b> configuration variable. See <b><a href="../man5/sbuild.conf.5.html">sbuild.conf</a></b>(5) for more information.

       <b>--no-arch-any</b>
              Do not build Architecture: any packages. This option is the opposite of --arch-any and only useful
              when used together with --arch-all  or  --source.   See  the  section  <b>BUILD</b>  <b>ARTIFACTS</b>  for  more
              information.   This  command  line  option  sets  the  <b>BUILD_ARCH_ANY</b>  configuration variable. See
              <b><a href="../man5/sbuild.conf.5.html">sbuild.conf</a></b>(5) for more information.

       <b>-b</b>, <b>--batch</b>
              Operate in batchmode, i.e. write a build-progress file during execution and files on  shutdown  to
              facilitate  a clean restart.  This command line option sets the <b>BATCH_MODE</b> configuration variable.
              See <b><a href="../man5/sbuild.conf.5.html">sbuild.conf</a></b>(5) for more information.

       <b>-c</b>, <b>--chroot=</b><u>chroot</u>
              Specifies the chroot to use. The effect of this option depends on the selected chroot mode.   With
              the <b>schroot</b> chroot mode, this option specifies the schroot name or alias to use. If not specified,
              the  default  is  the  first  of  schroot  name  or alias that matches <u>$distribution-$arch-sbuild</u>,
              <u>$distribution-sbuild</u>, <u>$distribution-$arch</u> or <u>$distribution</u> that  exists.   With  the  <b>sudo</b>  chroot
              mode,  this  option  specifies  the  chroot directory to use.  The directory is either expected in
              /etc/sbuild/chroot (in buildd sbuild mode) or in the build directory (see  --build-dir),  prefixed
              with  "chroot-" (in user sbuild mode, the default). If not specified, the default is to search for
              a directory in the respective locations named in the same way as for the schroot mode.   With  the
              <b>unshare</b>  chroot  mode,  if  this  option  is  a path, then it specifies the location of the chroot
              tarball directly. Otherwise, a tarball with equal basename from <a href="file:~/.cache/sbuild">~/.cache/sbuild</a> will be  used.  If
              not  specified,  the  default  is to search for a tarball named in the same way as for the schroot
              mode under <a href="file:~/.cache/sbuild.">~/.cache/sbuild.</a>  With the <b>autopkgtest</b> chroot mode this  option  has  no  effect.   The
              --autopkgtest-virt-server-opts  are  used  to  pick  the  chroot in autopkgtest chroot mode.  This
              command  line  option  sets  the  <b>CHROOT</b>  configuration  variable.  See  <b><a href="../man5/sbuild.conf.5.html">sbuild.conf</a></b>(5)  for  more
              information.

       <b>--chroot-mode=</b><u>schroot|sudo|autopkgtest|unshare</u>
              Select  the desired chroot mode. Four values are possible: schroot (the default), sudo (which uses
              sudo to execute chroot in a directory from /etc/sbuild/chroot or ./chroot), autopkgtest which uses
              the autopkgtest-virt-* binaries (selectable via the --autopkgtest-virt-server option) and  unshare
              (which  uses  linux  namespaces  for  chroot  and  doesn't require superuser privileges).  See the
              section <b>CHROOT</b> <b>MODES</b> for  more  information.   This  command  line  option  sets  the  <b>CHROOT_MODE</b>
              configuration variable. See <b><a href="../man5/sbuild.conf.5.html">sbuild.conf</a></b>(5) for more information.

       <b>-d</b>, <b>--dist=</b><u>distribution</u>
              Explicitly  set  the distribution for the package build. This will be selecting the correct chroot
              to use and also sets the value of the Distribution field in the  created  .changes  file.  Setting
              this  option  is necessary when giving sbuild a .dsc file or a plain source package name to build.
              In the latter case it specifies the distribution the source package is fetched from.  This command
              line option sets the <b>DISTRIBUTION</b> configuration variable. See <b><a href="../man5/sbuild.conf.5.html">sbuild.conf</a></b>(5) for more information.

       <b>--archive=</b><u>archive</u>
              Communicate with specified archive.  This command  line  option  sets  the  <b>ARCHIVE</b>  configuration
              variable. See <b><a href="../man5/sbuild.conf.5.html">sbuild.conf</a></b>(5) for more information.

       <b>-D</b>, <b>--debug</b>
              Enable debug output.

       <b>--apt-clean</b>
       <b>--no-apt-clean</b>
              Run (or do not run) apt-get clean in the chroot before executing the build, overriding the default
              setting.   This  command line option sets the <b>APT_CLEAN</b> configuration variable. See <b><a href="../man5/sbuild.conf.5.html">sbuild.conf</a></b>(5)
              for more information.

       <b>--apt-update</b>
       <b>--no-apt-update</b>
              Run (or do not run) apt-get update in the chroot before executing the  build.   This  option  only
              applies  to  the  default  repositories  of  the  chroot:  the internal sbuild apt repository, the
              repository  for  extra   packages   (see   <b>--extra-package</b>)   and   any   repositories   set   via
              <b>--extra-repository</b>  are  always  updated. It is not recommended to use <b>--no-apt-update</b> because you
              should build using the latest available packages in each distribution. If you do  disable  updates
              you  need  to  ensure  that  the chroot contains downloaded package lists or apt will be unable to
              install any packages and the build is likely to fail. If you are using the unshare chroot mode you
              can add <b>--skip=cleanup/apt/lists</b> to <b>$unshare_mmdebstrap_extra_args</b> to  retain  the  package  lists
              inside  the  chroot  taball.  This command line option sets the <b>APT_UPDATE</b> configuration variable.
              See <b><a href="../man5/sbuild.conf.5.html">sbuild.conf</a></b>(5) for more information.

       <b>--apt-upgrade</b>
       <b>--no-apt-upgrade</b>
              Run (or do not run) apt-get upgrade in the chroot  before  executing  the  build,  overriding  the
              default  setting.   This  command  line  option  sets  the <b>APT_UPGRADE</b> configuration variable. See
              <b><a href="../man5/sbuild.conf.5.html">sbuild.conf</a></b>(5) for more information.

       <b>--apt-distupgrade</b>
       <b>--no-apt-distupgrade</b>
              Run (or do not run) apt-get distupgrade in the chroot before executing the build,  overriding  the
              default  setting.   This  command line option sets the <b>APT_DISTUPGRADE</b> configuration variable. See
              <b><a href="../man5/sbuild.conf.5.html">sbuild.conf</a></b>(5) for more information.

       <b>-m</b>, <b>--maintainer=</b><u>maintainer</u>
              Specify the identity to use for GPG signing packages, and also used as the maintainer  for  binary
              NMUs.   This  does  not normally require setting (it defaults to the uploader).  This command line
              option sets the <b>MAINTAINER_NAME</b> configuration variable. See <b><a href="../man5/sbuild.conf.5.html">sbuild.conf</a></b>(5) for more information.

       <b>-e</b>, <b>--uploader=</b><u>uploader</u>
              Passed to dpkg-genchanges and is used to set the Changed-by: field in the .changes file(s).   This
              command  line  option  sets  the <b>UPLOADER_NAME</b> configuration variable. See <b><a href="../man5/sbuild.conf.5.html">sbuild.conf</a></b>(5) for more
              information.

       <b>-k</b>, <b>--keyid=</b><u>key-id</u>
              Passed to debsign and is used to set the key to sign the .changes file(s).  Default is  not  using
              any  key  and  not  signing  the  .changes  file(s).   This  command  line  option sets the <b>KEY_ID</b>
              configuration variable. See <b><a href="../man5/sbuild.conf.5.html">sbuild.conf</a></b>(5) for more information.

       <b>--source-only-changes</b>
       <b>--no-source-only-changes</b>
              In addition to the .changes file generated by dpkg-buildpackage, also produce (or don't produce) a
              .changes file suitable for a source-only upload. If requested by --keyid, this .changes file  will
              also  be  signed  by debsign.  This command line option sets the <b>SOURCE_ONLY_CHANGES</b> configuration
              variable. See <b><a href="../man5/sbuild.conf.5.html">sbuild.conf</a></b>(5) for more information.

       <b>-j</b>, <b>--jobs=</b><u>n</u>
              Number of jobs to run simultaneously.  Passed through to  dpkg-buildpackage.   This  command  line
              option  appends  the  appropriate  <b>-j</b>  option  to the <b>DPKG_BUILDPACKAGE_USER_OPTIONS</b> configuration
              variable. See <b><a href="../man5/sbuild.conf.5.html">sbuild.conf</a></b>(5) for more information.

       <b>--enable-network</b>
              Enable  network  access  during  build.   This  command  line  option  sets   the   <b>ENABLE_NETWORK</b>
              configuration variable. See <b><a href="../man5/sbuild.conf.5.html">sbuild.conf</a></b>(5) for more information.

       <b>--no-enable-network</b>
              Don't  enable network access during build (only implemented for the unshare mode) (default).  This
              command line option sets the <b>ENABLE_NETWORK</b> configuration variable. See  <b><a href="../man5/sbuild.conf.5.html">sbuild.conf</a></b>(5)  for  more
              information.

       <b>--debbuildopt=</b><u>option</u>
              Pass  the specified option directly to dpkg-buildpackage in addition to the options already passed
              by sbuild. This option can be passed multiple times (once per dpkg-buildpackage option) and can be
              freely mixed with the --debbuildopts option. Options will be passed to  dpkg-buildpackage  in  the
              order  that  the  --debbuildopt  and  --debbuildopts  options are given on the command line.  This
              command line option appends to  the  <b>DPKG_BUILDPACKAGE_USER_OPTIONS</b>  configuration  variable.  See
              <b><a href="../man5/sbuild.conf.5.html">sbuild.conf</a></b>(5) for more information.

       <b>--debbuildopts=</b><u>options</u>
              Pass the specified options directly to dpkg-buildpackage in addition to the options already passed
              by  sbuild.  The  argument  will  be  split  by  whitespaces and the resulting array passed to the
              dpkg-buildpackage invocation. If any options contain spaces, use  --debbuildopt  for  them.   This
              option can be passed multiple times and can be freely mixed with the --debbuildopt option. Options
              will be passed to dpkg-buildpackage in the order that the --debbuildopt and --debbuildopts options
              are    given    on    the   command   line.    This   command   line   option   appends   to   the
              <b>DPKG_BUILDPACKAGE_USER_OPTIONS</b> configuration variable. See <b><a href="../man5/sbuild.conf.5.html">sbuild.conf</a></b>(5) for more information.

       <b>--dpkg-source-opt=</b><u>options</u>
              Pass the specified option directly to dpkg-source in addition to the  options  already  passed  by
              sbuild.  This is only used when creating a source package from a Debianized source directory. This
              option can be passed multiple times (once per dpkg-source option) and can be freely mixed with the
              --dpkg-source-opts  option.  Options  will  be  passed  to  dpkg-source  in  the  order  that  the
              --dpkg-source-opt and --dpkg-source-opts options are given on the command line.  This command line
              option  appends  to  the  <b>DPKG_SOURCE_OPTIONS</b>  configuration variable. See <b><a href="../man5/sbuild.conf.5.html">sbuild.conf</a></b>(5) for more
              information.
              <b>NOTE:</b> The '<u>-b</u>', '<u>--before-build</u>' and '<u>--after-build</u>' options will always be passed to dpkg-source,
              respectively.

       <b>--dpkg-source-opts=</b><u>options</u>
              Pass the specified options directly to dpkg-source in addition to the options  already  passed  by
              sbuild.  The  argument  will  be  split  by  whitespaces  and  the  resulting  array passed to the
              dpkg-source invocation. This is only used when creating a source package from a Debianized  source
              directory.  If  any  options  contain  spaces, use --dpkg-source-opt for them.  This option can be
              passed multiple times and can be freely mixed with the --dpkg-source-opt option.  Options will  be
              passed  to  dpkg-source in the order that the --dpkg-source-opt and --dpkg-source-opts options are
              given on  the  command  line.   This  command  line  option  appends  to  the  <b>DPKG_SOURCE_OPTIONS</b>
              configuration variable. See <b><a href="../man5/sbuild.conf.5.html">sbuild.conf</a></b>(5) for more information.
              <b>NOTE:</b> The '<u>-b</u>', '<u>--before-build</u>' and '<u>--after-build</u>' options will always be passed to dpkg-source,
              respectively.

       <b>--dpkg-file-suffix=</b><u>suffix</u>
              Add the suffix to the filename of the changes and buildinfo files generated by dpkg.
              <b>NOTE:</b>  This  option  is  ignored if dpkg-dev in the build environment is too old to support it. At
              least dpkg-dev 1.18.11 is required.

       <b>--mail-log-to=</b><u>email-address</u>
              Send the build log to the specified email address.  This  command  line  option  sets  the  <b>MAILTO</b>
              configuration variable. See <b><a href="../man5/sbuild.conf.5.html">sbuild.conf</a></b>(5) for more information.

       <b>--mailfrom=</b><u>email-address</u>
              Email  address  used  as  the  sender  address  for build logs.  This command line option sets the
              <b>MAILFROM</b> configuration variable. See <b><a href="../man5/sbuild.conf.5.html">sbuild.conf</a></b>(5) for more information.

       <b>-n</b>, <b>--nolog</b>
              Do not create a package log file in the <u>$log_dir</u> directory  and  no  build  log  file,  but  print
              everything  to  stdout.  Also  do not send any log mails.  This command line option sets the <b>NOLOG</b>
              configuration variable. See <b><a href="../man5/sbuild.conf.5.html">sbuild.conf</a></b>(5) for more information.

       <b>--profiles=</b><u>profile[,...]</u>
              Specify the profile(s) we build, as a comma-separated list. Defaults to the space  separated  list
              of profiles in the <b>DEB_BUILD_PROFILES</b> environment variable when building natively or the <b>cross</b> and
              <b>nocheck</b>   profiles  when  cross-building.   This  command  line  option  sets  the  <b>BUILD_PROFILES</b>
              configuration variable. See <b><a href="../man5/sbuild.conf.5.html">sbuild.conf</a></b>(5) for more information.

       <b>-p</b>, <b>--purge=</b><u>purge-mode</u>
              Convenience option to set <u>purge-mode</u> for build directory, build dependencies  and  session.   This
              command   line   option   sets   the  <b>PURGE_BUILD_DEPS</b>,  <b>PURGE_BUILD_DIRECTORY</b>  and  <b>PURGE_SESSION</b>
              configuration variables. See <b><a href="../man5/sbuild.conf.5.html">sbuild.conf</a></b>(5) for more information.

       <b>--purge-build=</b><u>purge-mode</u>
              <u>purge-mode</u> determines if the build directory will be deleted after a build.  Possible  values  are
              <b>always</b>  (default), <b>never</b>, and <b>successful</b>.  This command line option sets the <b>PURGE_BUILD_DIRECTORY</b>
              configuration variable. See <b><a href="../man5/sbuild.conf.5.html">sbuild.conf</a></b>(5) for more information.

       <b>--purge-deps=</b><u>purge-mode</u>
              <u>purge-mode</u> determines if the build dependencies will be removed after a build. Possible values are
              <b>always</b> (default), <b>never</b>, and <b>successful</b>.  This  command  line  option  sets  the  <b>PURGE_BUILD_DEPS</b>
              configuration variable. See <b><a href="../man5/sbuild.conf.5.html">sbuild.conf</a></b>(5) for more information.

       <b>--purge-session=</b><u>purge-mode</u>
              Purge the schroot session following a build.  This is useful in conjunction with the <u>--purge-build</u>
              and  <u>--purge-deps</u>  options  when  using  snapshot  chroots,  since by default the snapshot will be
              deleted.  Possible values are <b>always</b> (default), <b>never</b>, and <b>successful</b>.  This command  line  option
              sets the <b>PURGE_SESSION</b> configuration variable. See <b><a href="../man5/sbuild.conf.5.html">sbuild.conf</a></b>(5) for more information.

       <b>-s</b>, <b>--source</b>
              Build  the  source package in addition to the other requested build artifacts. By default, the dsc
              will not be rewritten because the source package is the input to sbuild, not its output. Even when
              running from an unpacked source tree sbuild will first build the source package using  dpkg-source
              and  then  pass  that  on to the sbuild machinery. Use this option only when you know what you are
              doing. This will rewrite the original dsc passed to sbuild.  See the section <b>BUILD</b>  <b>ARTIFACTS</b>  for
              more  information.   This  command  line  option sets the <b>BUILD_SOURCE</b> configuration variable. See
              <b><a href="../man5/sbuild.conf.5.html">sbuild.conf</a></b>(5) for more information.

       <b>--no-source</b>
              Don't rebuild the source package. This is the default. It is the opposite of  --source.   See  the
              section  <b>BUILD</b>  <b>ARTIFACTS</b>  for  more  information.  This command line option sets the <b>BUILD_SOURCE</b>
              configuration variable. See <b><a href="../man5/sbuild.conf.5.html">sbuild.conf</a></b>(5) for more information.

       <b>--force-orig-source</b>
              When used with in conjunction with -s, this option forces the inclusion of the orig.tar.gz file in
              the generated .changes file, even in cases where it would  not  normally  be  included,  i.e.  use
              dpkg-buildpackage  -sa.   This  command  line  option  sets  the  <b>FORCE_ORIG_SOURCE</b>  configuration
              variable. See <b><a href="../man5/sbuild.conf.5.html">sbuild.conf</a></b>(5) for more information.

       <b>--use-snapshot</b>
              Installs the latest snapshot gcc compiler from the <u>gcc-snapshot</u>  package,  and  alters  the  build
              environment  to  use  the  snapshot  compiler  for  the  build.  Specifically, this option appends
              <u>/usr/lib/gcc-snapshot/lib</u>  to  the  value  of  the  <b>LD_LIBRARY_PATH</b>  configuration  variable   and
              <u>/usr/lib/gcc-snapshot/bin</u>  to  the  value  of  the  <b>PATH</b> configuration variable.  It also sets the
              <b>GCC_SNAPSHOT</b> configuration variable. See <b><a href="../man5/sbuild.conf.5.html">sbuild.conf</a></b>(5) for more information.

       <b>-v</b>, <b>--verbose</b>
              Be verbose, i.e. all information goes to stdout as well as to the log files.

       <b>-q</b>, <b>--quiet</b>
              Be quiet.  This is the opposite of --verbose.

       <b>--make-binNMU=</b><u>changelog-entry</u>
              With this option, <b>sbuild</b> will create a new changelog entry in debian/changelog  of  every  package
              built.  The  version  number  will  be  in  the  format  for  binary-only NMUs (see --binNMU); the
              maintainer is set to the maintainer name configured for <b>sbuild</b>. <u>changelog-entry</u> will  be  used  as
              the  changelog  entry following “Binary-only non-maintainer upload for ARCH -- no source changes”.
              Please note that the versions  in  the  <u>PACKAGE_VERSION[.dsc]</u>  arguments  still  have  to  be  the
              unmodified  (non-NMU  ones)  so that the sources can be found. The version number in log files and
              mails will be modified by <b>sbuild</b> automatically.  The  --append-to-version  option  has  a  similar
              effect  but allows one to specify an arbitrary version suffix instead of a custom changelog entry.
              To  have  a  custom  version  suffix  and  a  custom  changelog  entry,  use   --make-binNMU   and
              --append-to-version  at  the  same  time  with  --binNMU=0.   This  option  is  incompatible  with
              --binNMU-changelog.  This option implies --no-arch-all.  This command line option sets the <b>BIN_NMU</b>
              configuration variable and sets the <b>BIN_NMU_VERSION</b> configuration variable to 1 if it was not  set
              yet, for example by the --binNMU option. See <b><a href="../man5/sbuild.conf.5.html">sbuild.conf</a></b>(5) for more information.

       <b>--binNMU=</b><u>NMU-version</u>
              The  version  number  of  the  binary  NMU.   This  option  only  has  an  effect if combined with
              --make-binNMU and/or with --append-to-version.  <u>version</u> is a single number for  the  (+b<u>n</u>)  format
              used  for  binary NMUs.  If the argument is the empty string or zero, then the +b<u>n</u> suffix will not
              be appended.  The +b<u>n</u> suffix will be appended after  the  string  given  via  --append-to-version.
              This  option  is  incompatible  with  --binNMU-changelog.   This  command  line  option  sets  the
              <b>BIN_NMU_VERSION</b> configuration variable. See <b><a href="../man5/sbuild.conf.5.html">sbuild.conf</a></b>(5) for more information.

       <b>--append-to-version=</b><u>string</u>
              This option is similar to --make-binNMU except that it allows the user  to  specify  an  arbitrary
              string  to be appended to the version number (immediately before the '+' in the Debian revision if
              --make-binNMU is also provided).  To pass an arbitrary changelog text as well, combine this option
              with --make-binNMU but be aware that this will also add  the  +b<u>n</u>  suffix  unless  you  also  pass
              --binNMU=0  to  disable  it.   This  option  is incompatible with --binNMU-changelog.  This option
              implies  --no-arch-all.   This  command  line  option  sets  the  <b>APPEND_TO_VERSION</b>  configuration
              variable. See <b><a href="../man5/sbuild.conf.5.html">sbuild.conf</a></b>(5) for more information.

       <b>--binNMU-timestamp=</b><u>timestamp</u>
              Set  the  timestamp  of  the new binNMU changelog entry. By default, the time of the build will be
              used to generate the binNMU changelog timestamp. This option allows one to use a custom  timestamp
              instead.  The  timestamp  is  either given as an integer in Unix time or as a string in the format
              compatible with Debian changelog entries (i.e. as it is generated by date  -R).   This  option  is
              incompatible  with  --binNMU-changelog.   This  command  line  option  sets  the <b>BIN_NMU_TIMESTAMP</b>
              configuration variable. See <b><a href="../man5/sbuild.conf.5.html">sbuild.conf</a></b>(5) for more information.

       <b>--binNMU-changelog=</b><u>changelog</u>
              Set the complete content of a binary-only changelog entry. This option allows  full  customization
              of  the  new  changelog entry. It is up to the user to make sure that the changelog entry is well-
              formed. The argument has to include all necessary newlines. Leading and trailing newlines will  be
              stripped.   Sbuild  will  not  interpret  any backslash escapes.  This option is incompatible with
              --make-binNMU, --binNMU, --append-to-version and --binNMU-timestamp.   This  command  line  option
              sets the <b>BIN_NMU_CHANGELOG</b> configuration variable. See <b><a href="../man5/sbuild.conf.5.html">sbuild.conf</a></b>(5) for more information.

       <b>--build-dir=</b><u>directory</u>
              Set the output directory for the build artifacts created by dpkg-buildpackage and the log file. By
              default,  the current directory is used or, when sbuild is executed from within an unpacked source
              directory, the parent directory.  This  command  line  option  sets  the  <b>BUILD_DIR</b>  configuration
              variable. See <b><a href="../man5/sbuild.conf.5.html">sbuild.conf</a></b>(5) for more information.

       <b>--clean-source</b>
              When  executing sbuild from within an unpacked source tree, execute the debian/rules clean target.
              This is the default and might require some of the build dependencies installed on the host.   This
              command  line  option  sets  the  <b>CLEAN_SOURCE</b> configuration variable. See <b><a href="../man5/sbuild.conf.5.html">sbuild.conf</a></b>(5) for more
              information.

       <b>--no-clean-source</b>
              When executing sbuild from within an unpacked source tree,  do  not  run  the  debian/rules  clean
              target  before  building  the source package. Only set this if you start from a clean checkout and
              you know what you are doing.   This  command  line  option  sets  the  <b>CLEAN_SOURCE</b>  configuration
              variable. See <b><a href="../man5/sbuild.conf.5.html">sbuild.conf</a></b>(5) for more information.

       <b>--run-lintian</b>
              Run lintian after a successful build.  This command line option sets the <b>RUN_LINTIAN</b> configuration
              variable. See <b><a href="../man5/sbuild.conf.5.html">sbuild.conf</a></b>(5) for more information.

       <b>--no-run-lintian</b>
              Don't  run  lintian  after a successful build.  If sbuild is configured to run lintian by default,
              this option will prevent lintian being  run.   This  command  line  option  sets  the  <b>RUN_LINTIAN</b>
              configuration variable. See <b><a href="../man5/sbuild.conf.5.html">sbuild.conf</a></b>(5) for more information.

       <b>--lintian-opt=</b><u>options</u>
              Pass the specified option directly to lintian in addition to the options already passed by sbuild.
              This  option  can  be passed multiple times (once per lintian option) and can be freely mixed with
              the --lintian-opts option.  Options will be passed to lintian in the order that the  --lintian-opt
              and --lintian-opts options are given on the command line.  This command line option appends to the
              <b>LINTIAN_OPTIONS</b> configuration variable. See <b><a href="../man5/sbuild.conf.5.html">sbuild.conf</a></b>(5) for more information.

       <b>--lintian-opts=</b><u>options</u>
              Pass  the  specified  options  directly  to  lintian  in addition to the options already passed by
              sbuild. The argument will be split by whitespaces and the resulting array passed  to  the  lintian
              invocation.  If any options contain spaces, use --lintian-opt for them.  This option can be passed
              multiple times and can be freely mixed with the --lintian-opts option. Options will be  passed  to
              lintian  in  the  order that the --lintian-opt and --lintian-opts options are given on the command
              line.  This command line  option  appends  to  the  <b>LINTIAN_OPTIONS</b>  configuration  variable.  See
              <b><a href="../man5/sbuild.conf.5.html">sbuild.conf</a></b>(5) for more information.

       <b>--run-piuparts</b>
              Run  piuparts  after  a  successful  build.   This  command  line  option  sets  the  <b>RUN_PIUPARTS</b>
              configuration variable. See <b><a href="../man5/sbuild.conf.5.html">sbuild.conf</a></b>(5) for more information.

       <b>--no-run-piuparts</b>
              Don't run piuparts after a successful build.  If sbuild is configured to run piuparts by  default,
              this  option  will  prevent  piuparts  being  run.  This command line option sets the <b>RUN_PIUPARTS</b>
              configuration variable. See <b><a href="../man5/sbuild.conf.5.html">sbuild.conf</a></b>(5) for more information.

       <b>--piuparts-opt=</b><u>options</u>
              Pass the specified option directly to piuparts in  addition  to  the  options  already  passed  by
              sbuild.  This  option  can  be  passed multiple times (once per piuparts option) and can be freely
              mixed with the --piuparts-opts option.  Options will be passed to piuparts in the order  that  the
              --piuparts-opt and --piuparts-opts options are given on the command line.  Certain percent escapes
              are  supported.  To  write  a  literal  percent sign, escape it with another percent sign. See the
              section <b>OPTION</b> <b>STRING</b> <b>PERCENT</b> <b>ESCAPES</b> for more information.  This command line option  appends  to
              the <b>PIUPARTS_OPTIONS</b> configuration variable. See <b><a href="../man5/sbuild.conf.5.html">sbuild.conf</a></b>(5) for more information.

       <b>--piuparts-opts=</b><u>options</u>
              Pass  the  specified  options  directly  to  piuparts in addition to the options already passed by
              sbuild. The argument will be split by whitespaces and the resulting array passed to  the  piuparts
              invocation. If any options contain spaces, use --piuparts-opt for them.  This option can be passed
              multiple  times and can be freely mixed with the --piuparts-opts option. Options will be passed to
              piuparts in the order that the --piuparts-opt and --piuparts-opts options are given on the command
              line.  Certain percent escapes are supported. To write a literal  percent  sign,  escape  it  with
              another  percent  sign.  See the section <b>OPTION</b> <b>STRING</b> <b>PERCENT</b> <b>ESCAPES</b> for more information.  This
              command line option appends to the <b>PIUPARTS_OPTIONS</b> configuration variable. See <b><a href="../man5/sbuild.conf.5.html">sbuild.conf</a></b>(5) for
              more information.

       <b>--piuparts-root-arg=</b><u>options</u>
              Add an argument that is used to launch piuparts as root. Without this option, the  default  is  to
              use  "sudo  --"  to  launch  piuparts.  If  an empty string is supplied, then piuparts is launched
              without any prefixed command.  This option can be specified multiple  times.   This  command  line
              option  appends  to  the  <b>PIUPARTS_ROOT_ARGS</b>  configuration  variable. See <b><a href="../man5/sbuild.conf.5.html">sbuild.conf</a></b>(5) for more
              information.

       <b>--piuparts-root-args=</b><u>options</u>
              Add arguments that are used to launch piuparts as root.  Without this option, the  default  is  to
              use  "sudo  --"  to  launch  piuparts.  If  an empty string is supplied, then piuparts is launched
              without any prefixed command.  The  argument  will  be  split  by  whitespaces.  To  pass  options
              containing  whitespaces  use  the option --piuparts-root-arg.  This command line option appends to
              the <b>PIUPARTS_ROOT_ARGS</b> configuration variable. See <b><a href="../man5/sbuild.conf.5.html">sbuild.conf</a></b>(5) for more information.

       <b>--run-autopkgtest</b>
              Run autopkgtest after a successful build.  This  command  line  option  sets  the  <b>RUN_AUTOPKGTEST</b>
              configuration variable. See <b><a href="../man5/sbuild.conf.5.html">sbuild.conf</a></b>(5) for more information.

       <b>--no-run-autopkgtest</b>
              Don't  run  autopkgtest  after  a successful build.  If sbuild is configured to run autopkgtest by
              default, this option will prevent autopkgtest being  run.   This  command  line  option  sets  the
              <b>RUN_AUTOPKGTEST</b> configuration variable. See <b><a href="../man5/sbuild.conf.5.html">sbuild.conf</a></b>(5) for more information.

       <b>--autopkgtest-opt=</b><u>options</u>
              Pass  the  specified  option  directly to autopkgtest in addition to the options already passed by
              sbuild. This option can be passed multiple times (once per autopkgtest option) and can  be  freely
              mixed with the --autopkgtest-opts option.  Options will be passed to autopkgtest in the order that
              the  --autopkgtest-opt  and  --autopkgtest-opts  options  are  given on the command line.  Certain
              percent escapes are supported. To write a literal percent sign, escape  it  with  another  percent
              sign.  See  the  section  <b>OPTION</b>  <b>STRING</b>  <b>PERCENT</b> <b>ESCAPES</b> for more information.  This command line
              option appends to the <b>AUTOPKGTEST_OPTIONS</b> configuration  variable.  See  <b><a href="../man5/sbuild.conf.5.html">sbuild.conf</a></b>(5)  for  more
              information.

       <b>--autopkgtest-opts=</b><u>options</u>
              Pass  the  specified  options directly to autopkgtest in addition to the options already passed by
              sbuild. The argument will  be  split  by  whitespaces  and  the  resulting  array  passed  to  the
              autopkgtest  invocation.  If  any  options  contain  spaces, use --autopkgtest-opt for them.  This
              option can be passed multiple times and can be freely mixed with  the  --autopkgtest-opts  option.
              Options   will   be   passed   to   autopkgtest  in  the  order  that  the  --autopkgtest-opt  and
              --autopkgtest-opts options are given on the command line.  Certain percent escapes are  supported.
              To  write  a  literal  percent  sign,  escape it with another percent sign. See the section <b>OPTION</b>
              <b>STRING</b>  <b>PERCENT</b>  <b>ESCAPES</b>  for  more  information.   This  command  line  option  appends  to   the
              <b>AUTOPKGTEST_OPTIONS</b> configuration variable. See <b><a href="../man5/sbuild.conf.5.html">sbuild.conf</a></b>(5) for more information.

       <b>--autopkgtest-root-arg=</b><u>options</u>
              Add an argument that is used to launch autopkgtest as root. Without this option, the default is to
              use  "sudo --" to launch autopkgtest. If an empty string is supplied, then autopkgtest is launched
              without any prefixed command.  This option can be specified multiple  times.   This  command  line
              option  appends  to  the <b>AUTOPKGTEST_ROOT_ARGS</b> configuration variable. See <b><a href="../man5/sbuild.conf.5.html">sbuild.conf</a></b>(5) for more
              information.

       <b>--autopkgtest-root-args=</b><u>options</u>
              Add arguments that are used to launch autopkgtest as root.  Without this option, the default is to
              use "sudo --" to launch autopkgtest. If an empty string is supplied, then autopkgtest is  launched
              without  any  prefixed  command.   The  argument  will  be  split  by whitespaces. To pass options
              containing whitespaces use the option --autopkgtest-root-arg.  This command line option appends to
              the <b>AUTOPKGTEST_ROOT_ARGS</b> configuration variable. See <b><a href="../man5/sbuild.conf.5.html">sbuild.conf</a></b>(5) for more information.

       <b>--pre-build-commands=</b><u>string</u>
              This is the earliest external command which is  run  right  after  the  chroot  session  has  been
              initialized and before anything else is done (like installing the build dependencies). The command
              is  run  outside  of  the chroot. This option can be used multiple times to add multiple commands.
              Certain percent escapes are supported. To write a literal percent sign,  escape  it  with  another
              percent  sign.  See  the section <b>EXTERNAL</b> <b>COMMANDS</b> for more information.  This command line option
              appends to the <b>EXTERNAL_COMMANDS</b> configuration variable. See <b><a href="../man5/sbuild.conf.5.html">sbuild.conf</a></b>(5) for more information.

       <b>--chroot-setup-commands=</b><u>string</u>
              Run these commands after the chroot and variables have been  setup  but  before  dependencies  are
              installed.  The  command  is  run  as root inside of the chroot.  This option can be used multiple
              times to add multiple commands. Certain percent escapes are supported. To write a literal  percent
              sign, escape it with another percent sign. See the section <b>EXTERNAL</b> <b>COMMANDS</b> for more information.
              This   command   line   option  appends  to  the  <b>EXTERNAL_COMMANDS</b>  configuration  variable.  See
              <b><a href="../man5/sbuild.conf.5.html">sbuild.conf</a></b>(5) for more information.

       <b>--chroot-update-failed-commands=</b><u>string</u>
              Run these commands after any of 'apt-get update',  'apt-get  upgrade'  or  'apt-get  dist-upgrade'
              failed.   This  hook  is not run for updates of the internal sbuild apt repository, the repository
              for extra packages (see --extra-package) and the repositories given via  --extra-repository.   The
              environment  is  intact,  and  the failure can be investigated. Especially %SBUILD_SHELL is useful
              here. This option can be used multiple times to add multiple commands. Certain percent escapes are
              supported.  To write a literal percent sign, escape it with another percent sign.See  the  section
              <b>EXTERNAL</b> <b>COMMANDS</b> for more information.  This command line option appends to the <b>EXTERNAL_COMMANDS</b>
              configuration variable. See <b><a href="../man5/sbuild.conf.5.html">sbuild.conf</a></b>(5) for more information.

       <b>--build-deps-failed-commands=</b><u>string</u>
              These  commands  are run if installing the build dependencies has failed directly after the failed
              attempt. The environment is intact, and the failure can be investigated.  Especially %SBUILD_SHELL
              is useful here. The command is run as root inside the chroot. This option  can  be  used  multiple
              times  to add multiple commands. Certain percent escapes are supported. To write a literal percent
              sign, escape it with another percent sign. See the section <b>EXTERNAL</b> <b>COMMANDS</b> for more information.
              This  command  line  option  appends  to  the  <b>EXTERNAL_COMMANDS</b>   configuration   variable.   See
              <b><a href="../man5/sbuild.conf.5.html">sbuild.conf</a></b>(5) for more information.

       <b>--starting-build-commands=</b><u>string</u>
              Run  these  commands  after  dependencies  are  installed,  just  before  the  package  build with
              dpkg-buildpackage starts. The command is run as the root user inside the chroot. This  option  can
              be used multiple times to add multiple commands. Certain percent escapes are supported. To write a
              literal  percent  sign, escape it with another percent sign. See the section <b>EXTERNAL</b> <b>COMMANDS</b> for
              more information.  This  command  line  option  appends  to  the  <b>EXTERNAL_COMMANDS</b>  configuration
              variable. See <b><a href="../man5/sbuild.conf.5.html">sbuild.conf</a></b>(5) for more information.

       <b>--finished-build-commands=</b><u>string</u>
              Run  these commands immediately after the timed package build finishes.  The command is run as the
              root user inside the chroot.  This option can be used multiple times  to  add  multiple  commands.
              Certain  percent  escapes  are  supported. To write a literal percent sign, escape it with another
              percent sign. See the section <b>EXTERNAL</b> <b>COMMANDS</b> for more information.  This  command  line  option
              appends to the <b>EXTERNAL_COMMANDS</b> configuration variable. See <b><a href="../man5/sbuild.conf.5.html">sbuild.conf</a></b>(5) for more information.

       <b>--build-failed-commands=</b><u>string</u>
              These  commands  are  run  if  dpkg-buildpackage has failed directly after the failed attempt. The
              environment is intact, and the failure can be investigated.  Especially  %SBUILD_SHELL  is  useful
              here.  The  command  is  run  as the root user inside the chroot. This option can be used multiple
              times to add multiple commands. Certain percent escapes are supported. To write a literal  percent
              sign, escape it with another percent sign. See the section <b>EXTERNAL</b> <b>COMMANDS</b> for more information.
              This   command   line   option  appends  to  the  <b>EXTERNAL_COMMANDS</b>  configuration  variable.  See
              <b><a href="../man5/sbuild.conf.5.html">sbuild.conf</a></b>(5) for more information.

       <b>--chroot-cleanup-commands=</b><u>string</u>
              Run these commands when a chroot is cleaned up, before build directory is purged.  The command  is
              run  as  root  inside the chroot. This option can be used multiple times to add multiple commands.
              Certain percent escapes are supported.  To write a literal percent sign, escape  it  with  another
              percent  sign.  See  the section <b>EXTERNAL</b> <b>COMMANDS</b> for more information.  This command line option
              appends to the <b>EXTERNAL_COMMANDS</b> configuration variable. See <b><a href="../man5/sbuild.conf.5.html">sbuild.conf</a></b>(5) for more information.

       <b>--post-build-commands=</b><u>string</u>
              Run this command after a successful build. The command is run outside of the chroot.  This  option
              can  be  used  multiple times to add multiple commands.  Certain percent escapes are supported. To
              write a literal percent sign, escape it with another percent sign. See the section

       <b>--post-build-failed-commands=</b><u>string</u>
              Exactly like the above, but when a build fails.  <b>EXTERNAL</b> <b>COMMANDS</b>  for  more  information.   This
              command  line  option  appends to the <b>EXTERNAL_COMMANDS</b> configuration variable. See <b><a href="../man5/sbuild.conf.5.html">sbuild.conf</a></b>(5)
              for more information.

       <b>--anything-failed-commands=</b><u>string</u>
              Run these commands for all the <u>--xxx-failed-commands</u> options.  Especially %SBUILD_SHELL is  useful
              here. This option can be used multiple times to add multiple commands. Certain percent escapes are
              supported.  To  write a literal percent sign, escape it with another percent sign. See the section
              <b>EXTERNAL</b> <b>COMMANDS</b> for more information.  This command line option appends to the <b>EXTERNAL_COMMANDS</b>
              configuration variable. See <b><a href="../man5/sbuild.conf.5.html">sbuild.conf</a></b>(5) for more information.

       <b>--log-external-command-output</b>
              Write output from external commands  to  the  build  log.   This  command  line  option  sets  the
              <b>LOG_EXTERNAL_COMMAND_OUTPUT</b> configuration variable. See <b><a href="../man5/sbuild.conf.5.html">sbuild.conf</a></b>(5) for more information.

       <b>--log-external-command-error</b>
              Write  error  output  from  external commands to the build log.  This command line option sets the
              <b>LOG_EXTERNAL_COMMAND_ERROR</b> configuration variable. See <b><a href="../man5/sbuild.conf.5.html">sbuild.conf</a></b>(5) for more information.

       <b>--setup-hook=</b><u>hook-script</u> <b>DEPRECATED</b>
              This option is deprecated. Use of this option will add <u>hook-script</u> to the external commands to run
              via <u>chroot-setup-commands</u>.  This command line option sets  the  <b>CHROOT_SETUP_SCRIPT</b>  configuration
              variable  and appends to the <b>EXTERNAL_COMMANDS</b> configuration variable. See <b><a href="../man5/sbuild.conf.5.html">sbuild.conf</a></b>(5) for more
              information.

       <b>--build-dep-resolver=</b><u>resolver</u>
              Use the specified resolver to handle selecting the build dependencies.   Supported  resolvers  are
              <u>apt</u>  (the  default),  <u>aptitude</u>,  <u>aspcud</u>, <u>xapt</u>, and <u>null</u>.  The apt resolver is the most appropriate
              resolver for  most  users,  for  building  for  unstable,  stable  and  other  distributions.   If
              alternative  build  dependencies  are  used  (excluding architecture restrictions), only the first
              alternative will be used; the others will be ignored.  The aptitude resolver is very similar,  but
              smarter and slower, and it will consider all alternatives by default; it is suited to more complex
              situations,  such  as  building  packages  for  the experimental distribution, where packages need
              installing from multiple suites (<u>unstable</u> and <u>experimental</u>).  Due to performance issues,  aptitude
              is not recommended for use by default.  If the dependency situation is so complex that neither apt
              nor  aptitude  are  able  to find a solution, then you can use the aspcud resolver.  This resolver
              uses apt-cudf to ask aspcud, a real solver (in  the  math  sense),  to  find  a  solution  to  the
              installation  problem.  Since  aspcud  uses  a  real  solver (an ASP solver) it will always find a
              solution if one exists. The solution found by the aspcud resolver can be refined by  changing  the
              default optimization criteria through the --aspcud-criteria option.  The xapt resolver is intended
              only  for  cross-building, and is a temporary transitional feature which will be removed following
              the complete introduction of multi-arch support. Finally, the null  resolver  is  a  dummy  solver
              which  does  not  install,  upgrade  or remove any packages. This allows one to completely control
              package  installation  via  hooks.   This  command  line  option   sets   the   <b>BUILD_DEP_RESOLVER</b>
              configuration variable. See <b><a href="../man5/sbuild.conf.5.html">sbuild.conf</a></b>(5) for more information.

       <b>--aspcud-criteria=</b><u>criteria</u>
              Optimization   criteria   in  extended  MISC  2012  syntax  passed  to  aspcud  through  apt-cudf.
              Optimization criteria are separated by commas, sorted by decreasing  order  of  priority  and  are
              prefixed  with  a  polarity  (+  to  maximize  and  -  to  minimize).   The  default  criteria  is
              <b>-removed,-changed,-new</b> which first minimizes the number of removed packages, then  the  number  of
              changed  packages  (up  or  downgrades)  and  then the number of new packages. A common task is to
              minimize the number of packages from experimental.  To  do  this  you  can  add  a  criteria  like
              <b>-count(solution,APT-Release:=/a=experimental/)</b>  to  the default criteria.  This will then minimize
              the number of packages in the solution which contain the string <u>a=experimental</u> in the  <u>APT-Release</u>
              field  of the EDSP output created by apt. For more help on how to write optimization criteria, see
              the <b><a href="../man1/apt-cudf.1.html">apt-cudf</a></b>(1) man page. Specifically the help on  the  --criteria  option.   This  command  line
              option sets the <b>ASPCUD_CRITERIA</b> configuration variable. See <b><a href="../man5/sbuild.conf.5.html">sbuild.conf</a></b>(5) for more information.

       <b>--resolve-alternatives</b>
              Allow  the use of alternatives in Build-Depends, Build-Depends-Arch and Build-Depends-Indep.  This
              is the default  for  the  aptitude  dependency  resolver.   This  command  line  option  sets  the
              <b>RESOLVE_ALTERNATIVES</b> configuration variable. See <b><a href="../man5/sbuild.conf.5.html">sbuild.conf</a></b>(5) for more information.

       <b>--no-resolve-alternatives</b>
              Do not allow the use of alternatives in Build-Depends, Build-Depends-Arch and Build-Depends-Indep.
              Note  that alternatives for the same package (e.g. different versions) are still allowed.  This is
              the default for the apt and  xapt  dependency  resolvers.   This  command  line  option  sets  the
              <b>RESOLVE_ALTERNATIVES</b> configuration variable. See <b><a href="../man5/sbuild.conf.5.html">sbuild.conf</a></b>(5) for more information.

       <b>--extra-package=</b><u>package.deb|directory</u>
              Make  <u>package.deb</u>  available  for build-dependency resolution, by adding it to a temporary archive
              created  by  sbuild.   This  makes  it  easier  to  build  packages  against  locally-built  build
              dependencies,  without  waiting for those packages to enter the main archive, or going through the
              hassle of maintaining a local archive and making it accessible inside the chroot.  <u>package.deb</u>  is
              copied  into the chroot, so it can refer to any path on the host system.  If a directory is passed
              instead of a regular file, then all regular files inside that directory with a filename that  ends
              in  <u>.deb</u> will be added in the same fashion as it is done for individual packages.  This option can
              be specified multiple times.  This command line option appends to the <b>EXTRA_PACKAGES</b> configuration
              variable. See <b><a href="../man5/sbuild.conf.5.html">sbuild.conf</a></b>(5) for more information.

       <b>--extra-repository=</b><u>spec</u>
              Add a  repository  to  the  list  of  apt  sources  during  the  package  build.   The  repository
              specification  is  a  line  suitable  for an apt <b><a href="../man5/sources.list.5.html">sources.list</a></b>(5) file. For instance, you might use
              <b>--extra-repository="deb</b> <b><a href="http://deb.debian.org/debian">http://deb.debian.org/debian</a></b> <b>experimental</b> <b>main"</b> to allow packages  in  the
              experimental  distribution  to fulfill build-dependencies. Note that the build chroot must already
              trust the key of this repository or a key must be given with the <b>--extra-repository-key</b> flag  (see
              <b><a href="../man8/apt-secure.8.html">apt-secure</a></b>(8)).   This  command  line option appends to the <b>EXTRA_REPOSITORIES</b> configuration vari‐
              able. See <b><a href="../man5/sbuild.conf.5.html">sbuild.conf</a></b>(5) for more information.

       <b>--extra-repository-key=</b><u>file.asc</u>
              Add <u>file.asc</u> to the list of trusted keys inside the chroot. The key is read from the filename giv‐
              en, and added to the trusted keys. For more information, see <b><a href="../man8/apt-secure.8.html">apt-secure</a></b>(8).  This flag is particu‐
              larly useful if the target in <b>--extra-repository</b> is not signed with a key that's  trusted  by  the
              base  chroot.   This  command line option appends to the <b>EXTRA_REPOSITORY_KEYS</b> configuration vari‐
              able. See <b><a href="../man5/sbuild.conf.5.html">sbuild.conf</a></b>(5) for more information.

       <b>--build-path=</b><u>string</u>
              By default the package is  built  under  the  path  /build/reproducible-path/packagename-version/.
              This  option allows one to specify a custom path where the package is built inside the chroot. The
              sbuild user in the chroot must have permissions to create the path. Common writable locations  are
              subdirectories  of <a href="file:/tmp">/tmp</a> or /build. Using <a href="file:/tmp">/tmp</a> might be dangerous, because (depending on the chroot
              mode) the <a href="file:/tmp">/tmp</a> inside the chroot might be a world  writable  location  that  can  be  accessed  by
              processes  outside  the  chroot.  The directory /build can only be accessed by the sbuild user and
              group and should be a safe location.  The buildpath must be an empty directory  because  the  last
              component  of  the path will be removed after the build is finished.  Notice that depending on the
              chroot mode (see --chroot-mode), some locations inside the chroot might be bind  mounts  that  are
              shared  with other sbuild instances. You must avoid using these shared locations as the build path
              or otherwise concurrent runs of sbuild will likely fail. With the default schroot chroot mode, the
              directory /build is shared between multiple schroot sessions. You can  change  this  behaviour  in
              /etc/schroot/sbuild/fstab.  The behaviour of other chroot modes will vary.  To let sbuild choose a
              random build location of the format /build/packagename-XXXXXX/packagename-version/ where XXXXXX is
              a random ascii string, pass the empty string to this option.  This command line  option  sets  the
              <b>BUILD_PATH</b> configuration variable. See <b><a href="../man5/sbuild.conf.5.html">sbuild.conf</a></b>(5) for more information.

       <b>--dsc-dir=</b><u>string</u>
              By default the package is built in a path of the following format /build/packagename-XXXXXX/packa‐
              gename-version/ where packagename-version are replaced by the values in debian/changelog. This op‐
              tion allows one to specify a custom packagename-version path where the package is built inside the
              chroot.   This  is  useful to specify a static path for different versions for example for ccache.
              This command line option sets the <b>DSC_DIR</b> configuration variable. See  <b><a href="../man5/sbuild.conf.5.html">sbuild.conf</a></b>(5)<b>for</b>more<b>infor‐</b>
              <b>mation.</b>

       <b>--autopkgtest-virt-server=</b><u>schroot|lxc|chroot|qemu|ssh</u>
              The autopkgtest virtualization server. Can be specified with or without the autopkgtest-virt- pre‐
              fix.   For  instance, the following set of command line options will use the autopkgtest-virt-sch‐
              root chroot mode for a package build: <b>--chroot-mode=autopkgtest</b>  <b>--autopkgtest-virt-server=schroot</b>
              <b>--autopkgtest-virt-server-opt=unstable-amd64-sbuild</b>  This  command  line  option  sets  the <b>AUTOP‐</b>
              <b>KGTEST_VIRT_SERVER</b> configuration variable. See <b><a href="../man5/sbuild.conf.5.html">sbuild.conf</a></b>(5) for more information.

       <b>--autopkgtest-virt-server-opt=</b><u>string</u>
              Pass the specified option directly to the respective autopkgtest-virt-* virtualization  server  in
              addition  to  the options already passed by sbuild. This option can be passed multiple times (once
              per autopkgtest-virt-* option) and can be freely mixed with the --autopkgtest-virt-server-opts op‐
              tion.  Options will be passed to the respective autopkgtest-virt-* virtualization  server  in  the
              order  that the --autopkgtest-virt-server-opt and --autopkgtest-virt-server-opts options are given
              on the command line.  See the manual pages of the respective autopkgtest-virt-* commands for  more
              information.   Certain  percent  escapes are supported. To write a literal percent sign, escape it
              with another percent sign. See the section <b>OPTION</b> <b>STRING</b> <b>PERCENT</b>  <b>ESCAPES</b>  for  more  information.
              This  command  line  option appends to the <b>AUTOPKGTEST_VIRT_SERVER_OPTIONS</b> configuration variable.
              See <b><a href="../man5/sbuild.conf.5.html">sbuild.conf</a></b>(5) for more information.

       <b>--autopkgtest-virt-server-opts=</b><u>options</u>
              Pass the specified options directly to the respective autopkgtest-virt-* virtualization server  in
              addition  to  the  options already passed by sbuild. The argument will be split by whitespaces and
              the resulting array passed to the autopkgtest-virt-* invocation. If any  options  contain  spaces,
              use  --autopkgtest-virt-server-opt  for them.  This option can be passed multiple times and can be
              freely mixed with the --autopkgtest-virt-server-opts option. Options will be passed to the respec‐
              tive autopkgtest-virt-* virtualization server in the order that the  --autopkgtest-virt-server-opt
              and  --autopkgtest-virt-server-opts options are given on the command line. See the manual pages of
              the respective autopkgtest-virt-* commands for more information.  Certain percent escapes are sup‐
              ported. To write a literal percent sign, escape it with another percent sign. See the section  <b>OP‐</b>
              <b>TION</b>  <b>STRING</b> <b>PERCENT</b> <b>ESCAPES</b> for more information.  This command line option appends to the <b>AUTOP‐</b>
              <b>KGTEST_VIRT_SERVER_OPTIONS</b> configuration variable. See <b><a href="../man5/sbuild.conf.5.html">sbuild.conf</a></b>(5) for more information.

       <b>--sbuild-mode=</b><u>mode</u>
              Behaviour changes for use in a buildd environment.  This command line option sets the  <b>SBUILD_MODE</b>
              configuration variable. See <b><a href="../man5/sbuild.conf.5.html">sbuild.conf</a></b>(5) for more information.

       <b>--stats-dir=</b><u>directory</u>
              Directory for writing build statistics to.  This command line option sets the <b>STATS_DIR</b> configura‐
              tion variable. See <b><a href="../man5/sbuild.conf.5.html">sbuild.conf</a></b>(5) for more information.

       <b>--purge-extra-packages</b>
              This  is  an experimental option. Only use when you know what you are doing.  Source packages must
              be buildable with only their  build  dependencies,  all  packages  marked  as  Essential:yes,  the
              build-essential  package and their transitive dependencies installed. But by default, most chroots
              will also include Priority:required packages and apt as well  as  their  transitive  dependencies.
              This  option  will  try  to  remove all additional packages that are not strictly required for the
              build right after build dependencies were installed. This currently works best with the aspcud re‐
              solver. The apt resolver will not make as much effort to remove all  unneeded  packages  and  will
              keep all providers of a virtual package and all packages from any dependency alternative that hap‐
              pen to be installed. The aptitude and xapt resolver do not implement this feature yet. The removed
              packages  are  not  (yet) added again after the build finished. This can have undesirable side ef‐
              fects like lintian not working (because there is no apt to install its dependencies) or  bare  ch‐
              roots  becoming totally unusable after apt was removed from them. Thus, this option should only be
              used with throw-away chroots like schroot provides them where the original state is  automatically
              restored  after  each  build. This command line option sets the <b>PURGE_EXTRA_PACKAGES</b> configuration
              variable. See <b><a href="../man5/sbuild.conf.5.html">sbuild.conf</a></b>(5) for more information.

       <b>--bd-uninstallable-explainer=</b><u>dose3|apt|none</u>
              If the build dependencies cannot be satisfied by the chosen resolver, sbuild will run the selected
              method to give a better explanation why the build dependencies cannot be installed. Possible argu‐
              ments for this option are dose3 (the default), apt and none. To disable this feature, pass none or
              the empty string.  Depending on the resolver, the dose3 explainer might report a dependency situa‐
              tion as satisfiable even if the chosen resolver found it to be unsatisfiable. This  is  especially
              likely to happen if the apt resolver (the default) is used. Such disparities can have two reasons:
              either  the understanding of the involved dependency situation of the apt and dose3 solver differs
              (this is a bug) or the apt solver was unable to find a solution if the dependency situation is not
              trivial (for example if it involves packages from multiple  repositories).  In  the  former  case,
              please  report  the  disparity  as a bug against the resolvers. In the latter case, use a resolver
              that is more likely to find a solution like the aptitude or aspcud resolvers. Especially  the  as‐
              pcud  resolver should find a solution if and only if the dose3 solver also finds one. This command
              line option sets the <b>BD_UNINSTALLABLE_EXPLAINER</b> configuration  variable.  See  <b><a href="../man5/sbuild.conf.5.html">sbuild.conf</a></b>(5)  for
              more information.

</pre><h4><b>CHROOT</b> <b>MODES</b></h4><pre>
       The  main  purpose  of sbuild is to build Debian packages in a clean chroot environment. Provisioning and
       managing these chroot environments is not done by sbuild itself but by  multiple  backends.  The  default
       backend  (or  chroot mode) is schroot which is an suid binary that allows regular users to enter a chroot
       environment. But sbuild also allows one to build packages in a qemu virtual machine, lxc, lxd or on a re‐
       mote host reached by ssh using the autopkgtest backend. The backend can be chosen using the <b>--chroot-mode</b>
       command line argument or the <u>$chroot_mode</u> configuration parameter.

       <b>schroot</b>
              The default and recommended chroot mode. It is also used on Debian buildd machines.   The  easiest
              way  to  set up sbuild for use with the schroot backend is by using sbuild-createchroot which will
              also write out the necessary schroot configuration files in /etc. To use the chroots, the  current
              user  has  to be added to the sbuild group, for example by running sbuild-adduser.  Updating these
              schroot backends can be done using sbuild-update. See the respective man pages for  more  informa‐
              tion  about  how  to  use  these  programs.   Schroot supports chroots from directories, tarballs,
              filesystem images and block devices.  Schroot provides ephemeral chroots  either  by  unpacking  a
              tarball into a temporary directory, by using an overlay filesystem for directory chroots or by us‐
              ing  btrfs  or  lvm  snapshots.  Chroots  usable  by schroot are defined by configuration files in
              /etc/schroot/chroot.d/. When building for a specific distribution and  architecture,  sbuild  will
              choose  the  chroot  that  is  named  (or  has  the  alias) <u>$distribution-$arch-sbuild</u>, <u>$distribu‐</u>
              <u>tion-sbuild</u>, <u>$distribution-$arch</u> or <u>$distribution</u>, in that order of preference.  The  used  chroot
              name can be overridden using the -c or --chroot options.

       <b>sudo</b>   It  operates by plainly entering the chosen chroot directory using "sudo chroot". Thus, this back‐
              end also does not provide ephemeral chroots. The sudo chroot mode searches for a symlink or direc‐
              tory located at <u>/etc/sbuild/chroot/</u> or in the current directory, prefixed with  <u>chroot-</u>.  The  ex‐
              pected  names  are resolved in the same order as for the schroot chroot mode and can be overridden
              using the -c or --chroot options.

       <b>autopkgtest</b>
              This is an experimental chroot mode that allows one to build packages in any chroot  supported  by
              autopkgtest. This allows one to build packages in lxc or lxd containers, a qemu virtual machine or
              on  a  remote  host  via  ssh.  Which  autopkgtest  server  to  use is determined via the <b>--autop‐</b>
              <b>kgtest-virt-server</b> option. Since autopkgtest (in contrast to schroot) does not maintain a registry
              of available containers or (virtual) machines, it is necessary to manually specify them using  the
              <b>--autopkgtest-virt-server-opts=</b>  command line argument. To avoid having to manually type the right
              container or machine name every time when sbuild is executed, percent escapes are permitted.

       <b>unshare</b>
              This backend allows one to build packages inside chroots provided by  arbitrary  tarballs  without
              superuser  privileges.  This allows one to set up an arbitrary build environment without having to
              become root. Building packages with schroot also doesn't require sudo (schroot is suid  root)  but
              setting up and updating chroots requires superuser permissions. The unshare backend only makes use
              of  two small suid binaries (newuidmap and newgidmap). This backend allows arbitrary tarballs con‐
              taining chroot environments to be used for package building. The default tarball  location  is  in
              <a href="file:~/.cache/sbuild/.">~/.cache/sbuild/.</a> The expected names are resolved in the same order as for the schroot chroot mode
              and can be overridden using the -c or --chroot options.

              Note  that the unshare backend does not support the session concept so you can't use  <b>--purge-ses‐</b>
              <b>sion</b> with it. Use the options listed below <b>EXTERNAL</b> <b>COMMANDS</b> instead.

              On buster and earlier  Debian  releases,  unprivileged  userns  clones  (/proc/sys/kernel/unprivi‐
              leged_userns_clone)  were disabled by default by means of a Debian-specific kernel patch. On these
              systems, root is required for enabling them. This can also done permanently by setting  kernel.un‐
              privileged_userns_clone=1 in <a href="file:/etc/sysctl.d/.">/etc/sysctl.d/.</a>

</pre><h4><b>BUILD</b> <b>ARTIFACTS</b></h4><pre>
       Artifacts  produced  by  the build are saved into the directory specified by the <b>--build-dir</b> command-line
       parameter or the <b>BUILD_DIR</b> configuration variable.

       Sbuild is meant to be used to build architecture specific binary packages from a given source package. In
       addition, sbuild is also able to generate architecture independent binary packages as well as to  rebuild
       the original source package that was used as input. In summary, sbuild is able to build architecture spe‐
       cific  binary  packages, architecture independent binary packages and source packages. What ends up being
       built is determined by the configuration variables <b>BUILD_ARCH_ANY</b>, <b>BUILD_ARCH_ALL</b> and  <b>BUILD_SOURCE</b>,  re‐
       spectively. See <b><a href="../man5/sbuild.conf.5.html">sbuild.conf</a></b>(5) for a detailed explanation of these configuration variables.

       By  default,  during  native  compilation,  <b>BUILD_ARCH_ANY</b>  and  <b>BUILD_ARCH_ALL</b>  are  set  to  true while
       <b>BUILD_SOURCE</b> is set to false.  During cross-compilation, <b>BUILD_ARCH_ALL</b> defaults to false.   This  behav‐
       iour  can  be changed either by using command line options or by modifying the configuration variables in
       your  <u><a href="file:~/.sbuildrc">~/.sbuildrc</a></u>.  The  relevant  command  line  options  to  change  the  values   of   <b>BUILD_ARCH_ANY</b>,
       <b>BUILD_ARCH_ALL</b>    and    <b>BUILD_SOURCE</b>    are   <b>--arch-any/--no-arch-any</b>,   <b>--arch-all/--no-arch-all</b>   and
       <b>--source/--no-source</b>, respectively.

       The values of <b>BUILD_ARCH_ANY</b>, <b>BUILD_ARCH_ALL</b> and <b>BUILD_SOURCE</b> change the parameter that dpkg-buildpackage
       is called with. The following table displays the argument passed to dpkg-buildpackage in the last  column
       depending on the configuration options in the first three columns.

       <b>BUILD_ARCH_ANY</b>   <b>BUILD_ARCH_ALL</b>   <b>BUILD_SOURCE</b>   dpkg-buildpackage flag
       ────────────────────────────────────────────────────────────────────────
       false            false            false          invalid
       false            false            true           -S
       false            true             false          -A
       false            true             true           -g
       true             false            false          -B
       true             false            true           -G
       true             true             false          -b
       true             true             true           no option

       The  log  file  describing the build is named in the form <b>package_version_arch-YYYY-MM-DDTHH:MM:SSZ.build</b>
       and saved in the <b>--build-dir</b>, usually defaulting to the current working directory.  As a special case, if
       sbuild is in buildd mode, the default log directory is <b>$HOME/logs</b> and the <b>.build</b>  extension  is  omitted.
       The  version  is  omitted  if  it is not known at the start of the build, for example when the package is
       specified as a package name without version and downloaded from the apt archive during build.

</pre><h4><b>EXTERNAL</b> <b>COMMANDS</b></h4><pre>
       Support to run external commands during an sbuild run is provided. A set of external commands can be  run
       at  various stages of a build. Providing commands to run is done through the appropriate options given on
       the command line and through the use of the configuration files. In the configuration file, the  list  of
       commands to run are placed in a hash of arrays of arrays of strings corresponding to the commands to run.

       There  are  several  sets  of  commands.  All  command  are  run inside the chroot as root except for the
       <u>pre/post-build-</u> commands which are run as the user running sbuild outside of the chroot. To run an exter‐
       nal command as another user than the root user, prefix your command with <u>runuser</u> <u>-u</u> <u>sbuild</u> <u>--</u>.

       Here is a summary of the ordering, user, internal/external to chroot for each command hook

       The following table shows each command hook in the context of the tasks sbuild performs. The column  <u>root</u>
       shows  whether the command is run as root (yes) or not (no).  The column <u>chroot</u> shows whether the command
       is run inside our outside the chroot. The working directory inside the chroot  is  the  one  marked  with
       <b>&lt;&lt;BUILDDIR&gt;&gt;</b>  inside  the  log.  By default, this is a directory of the format <b>/build/packagename-XXXXXX/</b>
       where <b>XXXXXX</b> is a random ascii string.  Otherwise, it is the directory set  by  <b>--build-path</b>  or  by  the
       <b>BUILD_PATH</b>  configuration  option.   The  working directory outside of the chroot is $HOME. The remaining
       columns show the percent escapes that are defined in each command.  Percent escapes that are available in
       all commands (<b>%%</b>, <b>%a</b>, <b>%b</b>, <b>%s</b>) are omitted.  The value <u>maybe</u> in the column for the <b>%d</b> and <b>%p</b> escapes means
       that the value can not relied upon to be defined in these stages.  More specifically, these escapes  will
       not  be defined at these points if the user specified a source package name without a version on the com‐
       mand line. In that case, the version will only become known after the source package has  been  retrieved
       in the "Fetch and unpack source package" stage.

       command/action                         root   chroot    %c    %e    %d,%p
       ──────────────────────────────────────────────────────────────────────────
       Initialise chroot session
       <b>--pre-build-commands</b>                   no     outside   no    yes   maybe
       Setup the chroot and variables
       <b>--chroot-setup-commands</b>                yes    inside    no    no    maybe
       Update and upgrade packages
       <b>--chroot-update-failed-commands</b>        yes    inside    no    no    maybe
       Fetch and unpack source package
       Install Dependencies
       <b>--build-deps-failed-commands</b>           yes    inside    no    no    yes
       <b>--starting-build-commands</b>              yes    inside    no    no    yes
       Run dpkg-buildpackage
       <b>--build-failed-commands</b>                yes    inside    no    no    yes
       <b>--finished-build-commands</b>              yes    inside    no    no    yes
       Run lintian (if configured)
       <b>--chroot-cleanup-commands</b>              yes    inside    yes   no    yes
       Cleanup build files and dependencies
       Run piuparts (if configured)
       Run autopkgtest (if configured)
       Close schroot session
       <b>--post-build-commands</b>                  no     outside   yes   yes   yes
       <b>--post-build-failed-commands</b>           no     outside   yes   yes   yes

       The  commands can be given in the configuration files. They can be given as strings or as a list of argu‐
       ments. For example, to run "foo" and "bar" with arguments before a build  starts,  specifying  the  "foo"
       command as a list and "bar" as a string, one could do this:

       <b>$external_commands</b> <b>=</b> <b>{</b>
           <b>"pre-build-commands"</b> <b>=&gt;</b> <b>[</b>
               <b>['foo',</b> <b>'arg1',</b> <b>'arg2'],</b>
               <b>'bar</b> <b>arg1</b> <b>arg2</b> <b>arg3',</b>
           <b>],</b>
       <b>};</b>

       Hash  keys for commands to run at other stages have the same name as their corresponding command-line op‐
       tion name without the preceding '--'.

       Here's an example of how to do the same with the previous example, except using the  <u>--pre-build-commands</u>
       option.

       <b>$</b> <b>sbuild</b> <b>\</b>
             <b>--pre-build-commands='foo</b> <b>arg1</b> <b>arg2'</b> <b>\</b>
             <b>--pre-build-commands='bar</b> <b>arg1</b> <b>arg2</b> <b>arg3'</b>

       Note  that all these commands are executed through the shell in "<a href="file:/bin/sh">/bin/sh</a>". If specifying the command as a
       list in the config file, very few shell facilities are supported: no redirection, no  command  concatena‐
       tion  with  ;  and so on. When passing a string (in the config file or on the commandline), the string is
       passed as-is to the shell. So all shell facilities are available, given that you escape everything  prop‐
       erly, as you would in an interactive shell.

       Besides running external commands, sbuild can also detect the use of certain percent escapes given as ar‐
       guments.  These  are  used to allow for a command to be supplied with a certain argument depending on the
       escape given.  For example, it could be possible to have an external command  be  given  the  path  to  a
       .changes file.

       Here is a listing of keywords and a description of what it's converted to.

       <b>%%</b>     Used to escape a '<u>%</u>'.

       <b>%d</b>, <b>%SBUILD_DSC</b>
              These escapes are converted to the absolute path to a package's .dsc file.

       <b>%c</b>, <b>%SBUILD_CHANGES</b>
              These  escapes are converted to the absolute path to a package's source .changes file. This is the
              .changes file generated by the dpkg-buildpackage invocation and not the source-only .changes  file
              that  might've been produced additionally via --source-only-changes. This variable is only set af‐
              ter  the  build  is  finished,  i.e  in  <b>--chroot-cleanup-commands</b>,   <b>--post-build-commands</b>,   and
              <b>--post-build-failed-commands</b>.

       <b>%a</b>, <b>%SBUILD_HOST_ARCH</b>
              These  escapes  are  converted to the debian name of the architecture the build is being built for
              (e.g amd64, armhf).

       <b>%e</b>, <b>%SBUILD_CHROOT_EXEC</b>
              These escapes are converted to a command which can be executed on a host and can  be  given  argu‐
              ments  which  will  then  be  executed inside the chroot. Standard input and output of the process
              started inside the chroot are connected to the program executed on the host.  Thus,  this  command
              can  also be used to copy data into the chroot and out of the chroot. The working directory of the
              process started inside the chroot is the root directory of the chroot. The process is  started  as
              the  root  user.  This variable is not set if the external command is run inside the chroot.  Thus
              this   escape   is   only   available   for   <b>--pre-build-commands</b>,   <b>--post-build-commands</b>,   and
              <b>--post-build-failed-commands</b>.

       <b>%b</b>, <b>%SBUILD_BUILD_DIR</b>
              These escapes are converted to the absolute path to the build directory inside the chroot.

       <b>%p</b>, <b>%SBUILD_PKGBUILD_DIR</b>
              These escapes are converted to the absolute path to the package build directory inside the chroot.

       <b>%s</b>, <b>%SBUILD_SHELL</b>
              This is converted to a command to spawn an interactive "bash" shell

       <b>%SBUILD_BUILD_ARCH</b>
              This  escape  is  converted  to the Debian name of the architecture that the build is being run on
              (e.g amd64, armhf).

       Percent escapes are only substituted when an appropriate value is defined for them. At other times, it is
       left unchanged. In practice this means that there are only two escapes that are not available in all  ex‐
       ternal  commands: <b>%c</b> and <b>%e</b>. For example, a .changes file is only defined at the end of a build, so using
       <u>%c</u> will only be substituted for post-build-commands and post-build-failed-commands.

       Here's an example of using an escape to run a program foo on a .changes file after a build is done.

       <b>$</b> <b>sbuild</b> <b>--post-build-commands</b> <b>\</b>
             <b>'foo</b> <b>%SBUILD_CHANGES'</b>

       And here's an example that will spawn an interactive shell to investigate the problem whenever the  build
       failed:

       <b>$</b> <b>sbuild</b> <b>--build-failed-commands</b> <b>'%SBUILD_SHELL'</b>

       The following example would copy a file from the host into the chroot:

       <b>$</b> <b>sbuild</b> <b>--pre-build-commands</b> <b>\</b>
             <b>'cat</b> <b>blub.txt</b> <b>|</b> <b>%SBUILD_CHROOT_EXEC</b> <b>sh</b> <b>-c</b> <b>"cat</b> <b>&gt;</b> <b>blub.txt"'</b>

       One final note, external commands are processed in the order they are given.  Also, the commands given in
       a configuration file are processed first, then the commands given through the command line options.

</pre><h4><b>OPTION</b> <b>STRING</b> <b>PERCENT</b> <b>ESCAPES</b></h4><pre>
       Besides  for  external command strings, percent escapes can also be used in custom options passed to piu‐
       parts, autopkgtest and the chosen autopkgtest-virt server.  This is for example useful for  communicating
       the  right  chroot  backend  to piuparts or autopkgtest depending on the distribution or architecture the
       source package was built for.

       Here is a listing of keywords and a description of what it's converted to.

       <b>%%</b>     Used to escape a '<u>%</u>'.

       <b>%a</b>, <b>%SBUILD_HOST_ARCH</b>
              These escapes are converted to the debian name of the architecture the build is  being  built  for
              (e.g amd64, armhf).

       <b>%r</b>, <b>%SBUILD_DISTRIBUTION</b>
              The  distribution  that  the  source  package  was  built  for.  This is the value recorded in de‐
              bian/changelog or the value passed via the --dist option.  Mnemonic: the <b>r</b> is the first letter  in
              "release".

       Here is an example that will run piuparts with the right schroot chroot:

       <b>$</b> <b>sbuild</b> <b>--run-piuparts</b> <b>\</b>
             <b>--piuparts-opts="--schroot=%r-%a-sbuild"</b>

       Or an example of running autopkgtest with the right schroot chroot:

       <b>$</b> <b>sbuild</b> <b>--run-autopkgtest</b> <b>--autopkgtest-root-args=</b> <b>\</b>
             <b>--autopkgtest-opts="--</b> <b>schroot</b> <b>%r-%a-sbuild"</b>

       To achieve the same effect via the configuration file, add the following:

       <b>$autopkgtest_root_args</b> <b>=</b> <b>'';</b>
       <b>$piuparts_opts</b> <b>=</b> <b>[</b> <b>'--schroot=%r-%a-sbuild'</b> <b>];</b>
       <b>$autopkgtest_opts</b> <b>=</b> <b>[</b> <b>'--',</b> <b>'schroot',</b> <b>'%r-%a-sbuild'</b> <b>];</b>

       The  --autopkgtest-root-args  option and the $autopkgtest_root_args configuration variable are set to the
       empty string because the default is to run autopkgtest with "sudo --" in front of it which is not  needed
       with the schroot autopkgtest backend.

</pre><h4><b>LOCAL</b> <b>ARCHIVE</b></h4><pre>
       The  apt and aptitude resolvers create a local archive for installing build dependencies.  This is an in‐
       ternal implementation detail of the build dependency resolver, which is not user configurable, and is in‐
       tended to be entirely transparent to the user.  The local archive  exists  only  transiently  during  the
       package  build.   It  does  not  persist across builds, and it is only used to store the dummy dependency
       packages created for a single build.

       The dependency resolvers do the following:

       •      Create a dummy dependency package.  This contains  the  Build-Depends  (and  optionally  Build-De‐
              pends-Arch  and  Build-Depends-Indep)  as  Depends, and Build-Conflicts (and optionally Build-Con‐
              flicts-Arch and Build-Conflicts-Indep) as Conflicts.

       •      Install the dummy dependency package into the local archive,

       •      Generate the <u>Packages</u>, <u>Sources</u> and <u>Release</u> files.

       •      Write a <u>sources.list</u> file for the local archive into <u><a href="file:/etc/apt/sources.list.d">/etc/apt/sources.list.d</a></u>.

       •      Inject the lists directly into <u><a href="file:/var/lib/apt/lists">/var/lib/apt/lists</a></u>.  This step is to save running updating all  apt
              sources  which  is  undesirable  during a build; apt and aptitude do not support updating a single
              source at present.

       •      Regenerate the apt caches to ensure everything is in sync.

       •      Install the dummy dependency package with apt or aptitude; the dummy package is  pulled  from  the
              local apt archive, while all its dependencies are pulled from the regular configured apt sources.

       At the end of the build, the local archive is removed, along with the rest of the build tree.

</pre><h4><b>EXAMPLES</b></h4><pre>
       Before  you use sbuild for the first time, you have to do some setup depending on the chroot mode you are
       using. The default chroot mode is schroot. To use sbuild with the schroot backend, you need to  add  your
       user to the sbuild group and create a schroot chroot. The latter can be accomplished by using sbuild-cre‐
       <a href="../man8/atechroot.8.html">atechroot</a>(8). After this one time setup, you can now use sbuild to build packages like this:

       % <b>sbuild</b> <b>-d</b> <b>unstable</b> <b>bash</b>

       Or on a .dsc:

       % <b>sbuild</b> <b>-d</b> <b>unstable</b> <b>bash.dsc</b>

       Or  from  within an unpacked source package (the -d parameter is not necessary here because the distribu‐
       tion is inferred from debian/changelog):

       % <b>sbuild</b>

</pre><h4><b>ENVIRONMENT</b> <b>VARIABLES</b></h4><pre>
       The following environment variables are used by <b>sbuild</b>:

       HOME   The home directory of the user.

       LOGNAME
              Used in lockfiles.

       SBUILD_CONFIG
              Path to an additional configuration file on top of the system wide and user specific ones.

</pre><h4><b>FILES</b></h4><pre>
       <u>/etc/sbuild/sbuild.conf</u>
              Configuration, maintained by the system administrator.  This may be used to override the defaults.

       <u>/etc/sbuild/chroot</u>
              Directory containing symbolic links to chroots.  This is only used for sudo chroot access; schroot
              access uses the schroot chroot configuration.

       <u>$XDG_CONFIG_HOME/sbuild/config.pl</u> <u>or</u> <u><a href="file:~/.config/sbuild/config.pl">~/.config/sbuild/config.pl</a></u> <u>(alternatively:</u> <u><a href="file:~/.sbuildrc">~/.sbuildrc</a>)</u>
              User-specific configuration. If <u>$XDG_CONFIG_HOME</u> is either not set or empty, <u><a href="file:~/.config/sbuild/con">~/.config/sbuild/con</a>‐</u>
              <u>fig.pl</u> will be used. If no <u>config.pl</u> was found, <u><a href="file:~/.sbuildrc">~/.sbuildrc</a></u> is used but that  path  is  deprecated
              and  users  should  switch  to a location under <u>$XDG_CONFIG_HOME</u> or <u><a href="file:~/.config">~/.config</a></u>.  A custom path to a
              configuration file can also be specified through setting the <b>SBUILD_CONFIG</b> environment variable to
              the path of an additional configuration file.

       <u>/var/lib/sbuild</u>
              Build trees, archive signing keys, build statistics and lock files.

</pre><h4><b>AUTHORS</b></h4><pre>
       Roman Hodek &lt;<a href="mailto:Roman.Hodek@informatik.uni-erlangen.de">Roman.Hodek@informatik.uni-erlangen.de</a>&gt;.

       <b>sbuild</b> is based on debbuild, written by James Troup &lt;<a href="mailto:james@nocrew.org">james@nocrew.org</a>&gt; and has been modified by
       Ben Collins &lt;<a href="mailto:bcollins@debian.org">bcollins@debian.org</a>&gt;,
       Ryan Murray &lt;<a href="mailto:rmurray@debian.org">rmurray@debian.org</a>&gt;,
       Francesco Paolo Lovergine &lt;<a href="mailto:frankie@debian.org">frankie@debian.org</a>&gt;,
       Michael Banck &lt;<a href="mailto:mbanck@debian.org">mbanck@debian.org</a>&gt;, and
       Roger Leigh &lt;<a href="mailto:rleigh@debian.org">rleigh@debian.org</a>&gt;

</pre><h4><b>COPYRIGHT</b></h4><pre>
       Copyright © 1998-2000 Roman Hodek &lt;<a href="mailto:roman@hodek.net">roman@hodek.net</a>&gt;
       Copyright © 1998-1999 James Troup &lt;<a href="mailto:troup@debian.org">troup@debian.org</a>&gt;
       Copyright © 2003-2006 Ryan Murray &lt;<a href="mailto:rmurray@debian.org">rmurray@debian.org</a>&gt;
       Copyright © 2001-2003 Rick Younie &lt;<a href="mailto:younie@debian.org">younie@debian.org</a>&gt;
       Copyright © 2003-2004 Francesco Paolo Lovergine &lt;<a href="mailto:frankie@debian.org">frankie@debian.org</a>&gt;
       Copyright © 2005      Michael Banck &lt;<a href="mailto:mbanck@debian.org">mbanck@debian.org</a>&gt;
       Copyright © 2005-2009 Roger Leigh &lt;<a href="mailto:rleigh@debian.org">rleigh@debian.org</a>&gt;

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man5/sbuild.conf.5.html">sbuild.conf</a></b>(5), <b><a href="../man1/sbuild-abort.1.html">sbuild-abort</a></b>(1), <b><a href="../man8/sbuild-adduser.8.html">sbuild-adduser</a></b>(8), <b><a href="../man1/sbuild-apt.1.html">sbuild-apt</a></b>(1), <b><a href="../man1/sbuild-checkpackages.1.html">sbuild-checkpackages</a></b>(1), <b>sbuild-creat‐</b>
       <b><a href="../man8/echroot.8.html">echroot</a></b>(8), <b><a href="../man1/sbuild-distupgrade.1.html">sbuild-distupgrade</a></b>(1), <b><a href="../man1/sbuild-hold.1.html">sbuild-hold</a></b>(1), <b><a href="../man7/sbuild-setup.7.html">sbuild-setup</a></b>(7).   <b><a href="../man1/sbuild-shell.1.html">sbuild-shell</a></b>(1),  <b><a href="../man1/sbuild-unhold.1.html">sbuild-unhold</a></b>(1),
       <b><a href="../man1/sbuild-update.1.html">sbuild-update</a></b>(1), <b><a href="../man1/sbuild-upgrade.1.html">sbuild-upgrade</a></b>(1), <b><a href="../man1/schroot.1.html">schroot</a></b>(1),

Version 0.88.3ubuntu2.1                            02 May 2025                                         <u><a href="../man1/SBUILD.1.html">SBUILD</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>