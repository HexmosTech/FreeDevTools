<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>dpkg-shlibdeps - generate shared library substvar dependencies</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/dpkg-dev">dpkg-dev_1.22.18ubuntu2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       dpkg-shlibdeps - generate shared library substvar dependencies

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>dpkg-shlibdeps</b> [<u>option</u>...] [<b>-e</b>] <u>executable</u> [<u>option</u>...]

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>dpkg-shlibdeps</b> calculates shared library dependencies for executables named in its arguments.  The
       dependencies are added to the substitution variables file <b>debian/substvars</b> as variable names
       <b>shlibs:</b><u>dependency-field</u> where <u>dependency-field</u> is a dependency field name.  Any other variables starting
       with <b>shlibs:</b> are removed from the file.

       <b>dpkg-shlibdeps</b> has two possible sources of information to generate dependency information.  Either
       <u>symbols</u> files or <u>shlibs</u> files.  For each binary that <b>dpkg-shlibdeps</b> analyzes, it finds out the list of
       libraries that it's linked with.  Then, for each library, it looks up either the <u>symbols</u> file, or the
       <u>shlibs</u> file (if the former doesn't exist or if debian/shlibs.local contains the relevant dependency).
       Both files are supposed to be provided by the library package and should thus be available as
       <a href="file:/var/lib/dpkg/info/">/var/lib/dpkg/info/</a><u>package</u>.<u>symbols</u> or <a href="file:/var/lib/dpkg/info/">/var/lib/dpkg/info/</a><u>package</u>.<u>shlibs</u>.  The package name is identified
       in two steps: find the library file on the system (looking in the same directories that <b>ld.so</b> would use),
       then use <b>dpkg</b> <b>-S</b> <u>library-file</u> to lookup the package providing the library.

   <b>Symbols</b> <b>files</b>
       Symbols files contain finer-grained dependency information by providing the minimum dependency for each
       symbol that the library exports.  The script tries to find a symbols file associated to a library package
       in the following places (first match is used):

       debian/*/DEBIAN/symbols
           Shared  library  information generated by the current build process that also invoked <b>dpkg-shlibdeps</b>.
           They are generated by <b><a href="../man1/dpkg-gensymbols.1.html">dpkg-gensymbols</a></b>(1).  They are only used if the library is found in a  package's
           build  tree.   The  symbols  file  in  that build tree takes precedence over symbols files from other
           binary packages.

       /etc/dpkg/symbols/<u>package</u>.symbols.<u>arch</u>
       /etc/dpkg/symbols/<u>package</u>.symbols
           Per-system overriding shared library dependency information.  <u>arch</u> is the architecture of the current
           system (obtained by <b>dpkg-architecture</b> <b>-qDEB_HOST_ARCH</b>).

       Output from “<b>dpkg-query</b> <b>--control-path</b> <u>package</u> symbols”
           Package-provided shared library dependency information.  Unless overridden by <b>--admindir</b>, those files
           are located in /var/lib/dpkg.

       While scanning the symbols used by all binaries, <b>dpkg-shlibdeps</b> remembers the (biggest)  minimal  version
       needed  for  each library.  At the end of the process, it is able to write out the minimal dependency for
       every library used (provided that the information of the <u>symbols</u> files are accurate).

       As a safe-guard measure, a symbols file can provide  a  <b>Build-Depends-Package</b>  or  <b>Build-Depends-Packages</b>
       meta-information  field and <b>dpkg-shlibdeps</b> will extract the minimal version required by the corresponding
       package in the <b>Build-Depends</b> field and use this version if it's higher than the minimal version  computed
       by scanning symbols.

   <b>Shlibs</b> <b>files</b>
       Shlibs  files  associate  directly a library to a dependency (without looking at the symbols).  It's thus
       often stronger than really needed but very safe and easy to handle.

       The dependencies for a library are looked up in several places.  The first file providing information for
       the library of interest is used:

       debian/shlibs.local
           Package-local overriding shared library dependency information.

       /etc/dpkg/shlibs.override
           Per-system overriding shared library dependency information.

       debian/*/DEBIAN/shlibs
           Shared library information generated by the current build process that also  invoked  <b>dpkg-shlibdeps</b>.
           They  are only used if the library is found in a package's build tree.  The shlibs file in that build
           tree takes precedence over shlibs files from other binary packages.

       Output from “<b>dpkg-query</b> <b>--control-path</b> <u>package</u> shlibs”
           Package-provided shared library dependency information.  Unless overridden by <b>--admindir</b>, those files
           are located in /var/lib/dpkg.

       /etc/dpkg/shlibs.default
           Per-system default shared library dependency information.

       The extracted dependencies are then directly used (except if they are filtered out because they have been
       identified as duplicate, or as weaker than another dependency).

</pre><h4><b>OPTIONS</b></h4><pre>
       <b>dpkg-shlibdeps</b> interprets non-option arguments as executable names, just as if they'd  been  supplied  as
       <b>-e</b><u>executable</u>.

       <b>-e</b><u>executable</u>
           Include dependencies appropriate for the shared libraries required by <u>executable</u>.  This option can be
           used multiple times.

       <b>-l</b><u>directory</u>
           Prepend  <u>directory</u>  to  the  list  of  directories to search for private shared libraries (since dpkg
           1.17.0).  This option can be used multiple times.

           <b>Note</b>: Use this option instead of setting <b>LD_LIBRARY_PATH</b>, as that environment  variable  is  used  to
           control  the  run-time  linker  and  abusing  it to set the shared library paths at build-time can be
           problematic when cross-compiling for example.

       <b>-d</b><u>dependency-field</u>
           Add  dependencies  to  be  added  to  the  control  file  dependency  field  <u>dependency-field</u>.   (The
           dependencies for this field are placed in the variable <b>shlibs:</b><u>dependency-field</u>.)

           The  <b>-d</b><u>dependency-field</u>  option  takes  effect  for  all executables after the option, until the next
           <b>-d</b><u>dependency-field</u>.  The default <u>dependency-field</u> is <b>Depends</b>.

           If the same dependency entry (or set of alternatives) appears in more  than  one  of  the  recognized
           dependency  field  names  <b>Pre-Depends</b>,  <b>Depends</b>, <b>Recommends</b>, <b>Enhances</b> or <b>Suggests</b> then <b>dpkg-shlibdeps</b>
           will automatically remove the dependency from  all  fields  except  the  one  representing  the  most
           important dependencies.

       <b>--package=</b><u>package</u>
           Define the package name.

           When specified, the package name will be used to change defaults based on the binary package metadata
           in <u>debian/control</u>.

           If  the  package  is  <b>Essential:</b>  <b>yes</b>,  then  the  default dependency field is <b>Pre-Depends</b>, otherwise
           <b>Depends</b>.  The default package type is set from the <b>Package-Type</b> field.  The package is added  to  the
           set of packages excluded by <b>-x</b>.

           Option supported since dpkg 1.22.7.

       <b>-p</b><u>varname-prefix</u>
           Start  substitution  variables  with  <u>varname-prefix</u><b>:</b>  instead  of  <b>shlibs:</b>.   Likewise, any existing
           substitution variables starting with <u>varname-prefix</u><b>:</b> (rather  than  <b>shlibs:</b>)  are  removed  from  the
           substitution variables file.

       <b>-O</b>[<u>filename</u>]
           Print  substitution  variable  settings  to  standard  output  (or  <u>filename</u> if specified, since dpkg
           1.17.2), rather than being added to the substitution variables file (<b>debian/substvars</b> by default).

       <b>-t</b><u>type</u>
           Prefer shared library dependency information tagged  for  the  given  package  type.   If  no  tagged
           information  is  available,  falls  back  to  untagged information.  The default package type is <b>deb</b>.
           Shared library dependency information is tagged for a given type by prefixing it with the name of the
           type, a colon, and whitespace.

       <b>-L</b><u>local-shlibs-file</u>
           Read  overriding  shared  library  dependency   information   from   <u>local-shlibs-file</u>   instead   of
           <b>debian/shlibs.local</b>.

       <b>-T</b><u>substvars-file</u>
           Write substitution variables in <u>substvars-file</u>; the default is <b>debian/substvars</b>.

       <b>-v</b>  Enable  verbose  mode  (since  dpkg  1.14.8).   Numerous messages are displayed to explain what <b>dpkg-</b>
           <b>shlibdeps</b> does.

       <b>-x</b><u>package</u>
           Exclude the package from the generated dependencies (since dpkg 1.14.8).  This  is  useful  to  avoid
           self-dependencies  for  packages  which provide ELF binaries (executables or library plugins) using a
           library contained in the same package.  This option can be used multiple  times  to  exclude  several
           packages.

       <b>-S</b><u>package-build-dir</u>
           Look into <u>package-build-dir</u> first when trying to find a library (since dpkg 1.14.15).  This is useful
           when  the  source package builds multiple flavors of the same library and you want to ensure that you
           get the dependency from a given binary package.  You can use this option multiple times:  directories
           will be tried in the same order before directories of other binary packages.

       <b>-I</b><u>package-build-dir</u>
           Ignore  <u>package-build-dir</u>  when  looking  for  shlibs,  symbols, and shared library files (since dpkg
           1.18.5).  You can use this option multiple times.

       <b>--ignore-missing-info</b>
           Do not fail if dependency information can't be found for a shared library (since dpkg 1.14.8).  Usage
           of this option is discouraged, all libraries  should  provide  dependency  information  (either  with
           shlibs files, or with symbols files) even if they are not yet used by other packages.

       <b>--warnings=</b>[<u>value</u>|<u>string</u>[,...]]
           Select the set of warnings that can be emitted by <b>dpkg-shlibdeps</b> (since dpkg 1.14.17).

           The  warnings  can be selected from a comma-separated list of symbolic names (since dpkg 1.22.12), or
           from a <u>value</u> denoting a bit field for these warnings.

           symbol-not-found (bit 0, value 1)
               Selects the warning “symbol <u>sym</u> used by <u>binary</u> found in none of the libraries”.

               Enabled by default.

           avoidable-dependency (bit 1, value 2)
               Selects the warning “package could avoid a useless dependency”.

               Enabled by default.

           useless-linkage (bit 2, value 4)
               Select the warning “<u>binary</u> should not be linked against <u>library</u>”.

       <b>--admindir=</b><u>dir</u>
           Change the location of the <b>dpkg</b> database (since dpkg 1.14.0).  The default location is <u><a href="file:/var/lib/dpkg">/var/lib/dpkg</a></u>.

       <b>-?</b>, <b>--help</b>
           Show the usage message and exit.

       <b>--version</b>
           Show the version and exit.

</pre><h4><b>ENVIRONMENT</b></h4><pre>
       <b>DEB_HOST_ARCH</b>
           Sets the host architecture.  This affects the objects  and  symbols  files  searched  for  and  their
           default search pathnames.

       <b>DPKG_COLORS</b>
           Sets  the  color mode (since dpkg 1.18.5).  The currently accepted values are: <b>auto</b> (default), <b>always</b>
           and <b>never</b>.

       <b>DPKG_NLS</b>
           If set, it will be used to decide  whether  to  activate  Native  Language  Support,  also  known  as
           internationalization  (or  i18n)  support  (since  dpkg  1.19.0).   The  accepted values are: <b>0</b> and <b>1</b>
           (default).

</pre><h4><b>DIAGNOSTICS</b></h4><pre>
   <b>Warnings</b>
       Since <b>dpkg-shlibdeps</b> analyzes the set of symbols used by each binary of the generated package, it is able
       to emit warnings in several cases.  They inform you of things that can be improved in  the  package.   In
       most cases, those improvements concern the upstream sources directly.  By order of decreasing importance,
       here are the various warnings that you can encounter:

       <b>symbol</b> <u>sym</u> <b>used</b> <b>by</b> <u>binary</u> <b>found</b> <b>in</b> <b>none</b> <b>of</b> <b>the</b> <b>libraries.</b>
           The  indicated symbol has not been found in the libraries linked with the binary.  The <u>binary</u> is most
           likely a library and it needs to be linked with  an  additional  library  during  the  build  process
           (option <b>-l</b><u>library</u> of the linker).

       <u>binary</u> <b>contains</b> <b>an</b> <b>unresolvable</b> <b>reference</b> <b>to</b> <b>symbol</b> <u>sym</u><b>:</b> <b>it's</b> <b>probably</b> <b>a</b> <b>plugin</b>
           The  indicated symbol has not been found in the libraries linked with the binary.  The <u>binary</u> is most
           likely a plugin and the symbol is probably provided by the program that loads this plugin.  In theory
           a plugin doesn't have any SONAME but this binary does have one and as such it could  not  be  clearly
           identified as such.  However the fact that the binary is stored in a non-public directory is a strong
           indication that's it's not a normal shared library.  If the binary is really a plugin, then disregard
           this  warning.  But there's always the possibility that it's a real library and that programs linking
           to it are using an RPATH so that the dynamic loader finds it.  In that case, the  library  is  broken
           and needs to be fixed.

       <b>package</b> <b>could</b> <b>avoid</b> <b>a</b> <b>useless</b> <b>dependency</b> <b>if</b> <u>binary</u> <b>was</b> <b>not</b> <b>linked</b> <b>against</b> <u>library</u> <b>(it</b> <b>uses</b> <b>none</b> <b>of</b> <b>the</b>
       <b>library's</b> <b>symbols)</b>
           None of the <u>binaries</u> that are linked with <u>library</u> use any of the symbols provided by the library.  By
           fixing  all  the binaries, you would avoid the dependency associated to this library (unless the same
           dependency is also generated by another library that is really used).

       <b>package</b> <b>could</b> <b>avoid</b> <b>a</b> <b>useless</b> <b>dependency</b> <b>if</b> <u>binaries</u> <b>were</b> <b>not</b> <b>linked</b> <b>against</b> <u>library</u> <b>(they</b> <b>use</b> <b>none</b> <b>of</b>
       <b>the</b> <b>library's</b> <b>symbols)</b>
           Exactly the same as the above warning, but for multiple binaries.

       <u>binary</u> <b>should</b> <b>not</b> <b>be</b> <b>linked</b> <b>against</b> <u>library</u> <b>(it</b> <b>uses</b> <b>none</b> <b>of</b> <b>the</b> <b>library's</b> <b>symbols)</b>
           The <u>binary</u> is linked to a library  that  it  doesn't  need.   It's  not  a  problem  but  some  small
           performance  improvements  in  binary  load  time can be obtained by not linking this library to this
           binary.  This warning checks the same information as the previous one but does  it  for  each  binary
           instead of doing the check globally on all binaries analyzed.

   <b>Errors</b>
       <b>dpkg-shlibdeps</b>  will  fail  if  it can't find a public library used by a binary or if this library has no
       associated dependency information (either shlibs file or symbols file).  A public library  has  a  SONAME
       and  is  versioned  (libsomething.so.<u>X</u>).   A private library (like a plugin) should not have a SONAME and
       doesn't need to be versioned.

       <b>couldn't</b> <b>find</b> <b>library</b> <u>library-soname</u> <b>needed</b> <b>by</b> <u>binary</u> <b>(its</b> <b>RPATH</b> <b>is</b> <b>'</b><u>rpath</u><b>')</b>
           The <u>binary</u> uses a library called <u>library-soname</u> but  <b>dpkg-shlibdeps</b>  has  been  unable  to  find  the
           library.   <b>dpkg-shlibdeps</b>  creates a list of directories to check as following: directories listed in
           the  RPATH  of  the  binary,  directories  added  by  the  <b>-l</b>  option,  directories  listed  in   the
           <b>LD_LIBRARY_PATH</b>   environment   variable,  cross  multiarch  directories  (ex.  /lib/arm64-linux-gnu,
           /usr/lib/arm64-linux-gnu), standard  public  directories  (<a href="file:/lib">/lib</a>,  <a href="file:/usr/lib">/usr/lib</a>),  directories  listed  in
           <a href="file:/etc/ld.so.conf">/etc/ld.so.conf</a>, and obsolete multilib directories (/lib32, /usr/lib32, <a href="file:/lib64">/lib64</a>, <a href="file:/usr/lib64">/usr/lib64</a>).  Then it
           checks  those  directories in the package's build tree of the binary being analyzed, in the packages'
           build trees indicated with the <b>-S</b> command-line option, in other packages' build trees that contains a
           DEBIAN/shlibs or DEBIAN/symbols file and finally in the root directory.  If the library is not  found
           in any of those directories, then you get this error.

           If  the  library  not  found  is in a private directory of the same package, then you want to add the
           directory with <b>-l</b>.  If it's in another binary package being built, you want to  make  sure  that  the
           shlibs/symbols file of this package is already created and that <b>-l</b> contains the appropriate directory
           if it also is in a private directory.

       <b>no</b> <b>dependency</b> <b>information</b> <b>found</b> <b>for</b> <u>library-file</u> <b>(used</b> <b>by</b> <u>binary</u><b>).</b>
           The  library needed by <u>binary</u> has been found by <b>dpkg-shlibdeps</b> in <u>library-file</u> but <b>dpkg-shlibdeps</b> has
           been unable to find any dependency information for that library.  To find out the dependency, it  has
           tried  to map the library to a Debian package with the help of <b>dpkg</b> <b>-S</b> <u>library-file</u>.  Then it checked
           the corresponding shlibs and symbols files in <a href="file:/var/lib/dpkg/info/">/var/lib/dpkg/info/</a>, and in the various package's build
           trees (debian/*/DEBIAN/).

           This failure can be caused by a bad or missing shlibs or symbols file in the package of the  library.
           It  might  also happen if the library is built within the same source package and if the shlibs files
           has not yet been created (in which case you must fix debian/rules to create the shlibs before calling
           <b>dpkg-shlibdeps</b>).  Bad RPATH can also lead to the library  being  found  under  a  non-canonical  name
           (example:  /usr/lib/openoffice.org/../lib/libssl.so.0.9.8 instead of /usr/lib/libssl.so.0.9.8) that's
           not associated to any package, <b>dpkg-shlibdeps</b> tries to work around this by trying to  fallback  on  a
           canonical  name  (using  <b><a href="../man3/realpath.3.html">realpath</a></b>(3)) but it might not always work.  It's always best to clean up the
           RPATH of the binary to avoid problems.

           Calling <b>dpkg-shlibdeps</b> in verbose mode (<b>-v</b>) will provide much more information about where  it  tried
           to find the dependency information.  This might be useful if you don't understand why it's giving you
           this error.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man5/deb-substvars.5.html">deb-substvars</a></b>(5), <b><a href="../man5/deb-shlibs.5.html">deb-shlibs</a></b>(5), <b><a href="../man5/deb-symbols.5.html">deb-symbols</a></b>(5), <b><a href="../man1/dpkg-gensymbols.1.html">dpkg-gensymbols</a></b>(1).

1.22.18                                            2025-03-20                                  <u><a href="../man1/dpkg-shlibdeps.1.html">dpkg-shlibdeps</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>