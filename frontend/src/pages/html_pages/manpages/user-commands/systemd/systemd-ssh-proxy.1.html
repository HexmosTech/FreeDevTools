<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>systemd-ssh-proxy - SSH client plugin for connecting to AF_VSOCK and AF_UNIX sockets</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/systemd">systemd_257.4-1ubuntu3.1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       systemd-ssh-proxy - SSH client plugin for connecting to <b>AF_VSOCK</b> and <b>AF_UNIX</b> sockets

</pre><h4><b>SYNOPSIS</b></h4><pre>
       Host unix/* vsock/* vsock-mux/*
           ProxyCommand /usr/lib/systemd/systemd-ssh-proxy %h %p
           ProxyUseFdpass yes

       <b>/usr/lib/systemd/systemd-ssh-proxy</b> [ADDRESS] [PORT]

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>systemd-ssh-proxy</b> is a small "proxy" plugin for the <b><a href="../man1/ssh.1.html">ssh</a></b>(1) tool that allows connecting to <b>AF_UNIX</b> and
       <b>AF_VSOCK</b> sockets. It implements the interface defined by ssh's <u>ProxyCommand</u> configuration option. It's
       supposed to be used with an <b><a href="../man5/ssh_config.5.html">ssh_config</a></b>(5) configuration fragment like the following:

           Host unix/* vsock/* vsock-mux/*
               ProxyCommand /usr/lib/systemd/systemd-ssh-proxy %h %p
               ProxyUseFdpass yes
               CheckHostIP no

           Host .host
               ProxyCommand /usr/lib/systemd/systemd-ssh-proxy unix/run/ssh-unix-local/socket %p
               ProxyUseFdpass yes
               CheckHostIP no

       A configuration fragment along these lines is by default installed into
       /etc/ssh/ssh_config.d/20-systemd-ssh-proxy.conf.

       With this in place, SSH connections to host string "unix/" followed by an absolute <b>AF_UNIX</b> file system
       path to a socket will be directed to the specified socket, which must be of type <b>SOCK_STREAM</b>. Similar,
       SSH connections to "vsock/" followed by an <b>AF_VSOCK</b> CID will result in an SSH connection made to that
       CID.  "vsock-mux/" followed by an absolute <b>AF_UNIX</b> file system path to a socket is similar but for
       cloud-hypervisor/firecracker which don't allow direct <b>AF_VSOCK</b> communication between the host and guests,
       and provide their own multiplexer over <b>AF_UNIX</b> sockets. See <b>cloud-hypervisor</b> <b>VSOCK</b> <b>support</b>[1] and <b>Using</b>
       <b>the</b> <b>Firecracker</b> <b>Virtio-vsock</b> <b>Device</b>[2].

       Moreover connecting to ".host" will connect to the local host via SSH, without involving networking.

       This tool is supposed to be used together with <b><a href="../man8/systemd-ssh-generator.8.html">systemd-ssh-generator</a></b>(8) which when run inside a VM or
       container will bind SSH to suitable addresses.  <b>systemd-ssh-generator</b> is supposed to run in the container
       or VM guest, and <b>systemd-ssh-proxy</b> is run on the host, in order to connect to the container or VM guest.

</pre><h4><b>EXIT</b> <b>STATUS</b></h4><pre>
       On success, 0 is returned, a non-zero failure code otherwise.

</pre><h4><b>EXAMPLES</b></h4><pre>
       <b>Example</b> <b>1.</b> <b>Talk</b> <b>to</b> <b>a</b> <b>local</b> <b>VM</b> <b>with</b> <b>CID</b> <b>4711</b>

           ssh vsock/4711

       <b>Example</b> <b>2.</b> <b>Talk</b> <b>to</b> <b>a</b> <b>VM</b> <b>guest</b> <b>hosted</b> <b>with</b> <b>cloud-hypervisor/firecracker</b>

           ssh vsock-mux/run/vm-1234.sock

       <b>Example</b> <b>3.</b> <b>Talk</b> <b>to</b> <b>the</b> <b>local</b> <b>host</b> <b>via</b> <b>ssh</b>

           ssh .host

       or equivalent:

           ssh unix/run/ssh-unix-local/socket

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man1/systemd.1.html">systemd</a></b>(1), <b><a href="../man8/systemd-ssh-generator.8.html">systemd-ssh-generator</a></b>(8), <b><a href="../man7/vsock.7.html">vsock</a></b>(7), <b><a href="../man7/unix.7.html">unix</a></b>(7), <b><a href="../man1/ssh.1.html">ssh</a></b>(1), <b><a href="../man8/sshd.8.html">sshd</a></b>(8)

</pre><h4><b>NOTES</b></h4><pre>
        1. cloud-hypervisor VSOCK support
           https://github.com/cloud-hypervisor/cloud-hypervisor/blob/main/docs/vsock.md

        2. Using the Firecracker Virtio-vsock Device
           https://github.com/firecracker-microvm/firecracker/blob/main/docs/vsock.md

systemd 257.4                                                                               <u><a href="../man1/SYSTEMD-SSH-PROXY.1.html">SYSTEMD-SSH-PROXY</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>