<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>dh_installsystemd - install systemd unit files</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/debhelper">debhelper_13.24.1ubuntu2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       dh_installsystemd - install systemd unit files

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>dh_installsystemd</b> [<u>debhelper</u> <u>options</u>] [<b>--restart-after-upgrade</b>] [<b>--no-stop-on-upgrade</b>] [<b>--no-enable</b>]
       [<b>--no-start</b>] [<b>--name=</b><u>name</u>] [<u>unit</u> <u>file</u> ...]

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>dh_installsystemd</b> is a debhelper program that is responsible for installing package maintainer supplied
       systemd unit files.

       It also finds the service files installed by a package and generates <u>preinst</u>, <u>postinst</u>, and <u>prerm</u> code
       blocks for enabling, disabling, starting, stopping, and restarting the corresponding systemd services,
       when the package is installed, updated, or removed. These snippets are added to the maintainer scripts by
       <b><a href="../man1/dh_installdeb.1.html">dh_installdeb</a></b>(1).

       <b><a href="../man1/deb-systemd-helper.1.html">deb-systemd-helper</a></b>(1) is used to enable and disable systemd units, thus it is not necessary that the
       machine actually runs systemd during package installation time, enabling happens on all machines in order
       to be able to switch from sysvinit to systemd and back.

       <b>dh_installsystemd</b> operates on all unit files installed by a package. For only generating blocks for
       specific unit files, pass them as arguments, "dh_installsystemd quota.service". Specific unit files can
       be excluded from processing using the <b>-X</b> common <b><a href="../man1/debhelper.1.html">debhelper</a></b>(1) option.

</pre><h4><b>FILES</b></h4><pre>
       debian/<u>package</u>.mount, debian/<u>package</u>.path, debian/<u>package</u>@.path, debian/<u>package</u>.service,
       debian/<u>package</u>@.service, debian/<u>package</u>.socket, debian/<u>package</u>@.socket, debian/<u>package</u>.target,
       debian/<u>package</u>@.target, debian/<u>package</u>.timer, debian/<u>package</u>@.timer
           If  any  of  those files exists, they are installed into <u>usr/lib/systemd/system/</u> in the package build
           directory.

       debian/<u>package</u>.tmpfile
           Only used in compat 12 or earlier.  In compat 13+, this  file  is  handled  by  <b><a href="../man1/dh_installtmpfiles.1.html">dh_installtmpfiles</a></b>(1)
           instead.

           If  this  exists,  it is installed into <u>usr/lib/tmpfiles.d/</u> in the package build directory. Note that
           the "tmpfiles.d" mechanism is currently only used by systemd.

</pre><h4><b>OPTIONS</b></h4><pre>
       <b>-n</b>, <b>--no-scripts</b>
           Do not modify <u>postinst</u>/<u>postrm</u>/<u>prerm</u> scripts.

           Note: This option was silently ignored before debhelper/13.24.

       <b>--no-enable</b>
           Disable the service(s) on purge, but do not enable them on install.

           <b>Note</b> that this option does not affect whether the services are started.  Please remember to also  use
           <b>--no-start</b> if the service should not be started.

       <b>--name=</b><u>name</u>
           This option controls several things.

           It  changes  the  name that <b>dh_installsystemd</b> uses when it looks for maintainer provided systemd unit
           files as listed in the "FILES" section.  As an example, <b>dh_installsystemd</b> <b>--name</b> <b>foo</b>  will  look  for
           <u>debian/package.<b>foo</b>.service</u>  instead  of  <u>debian/package.service</u>).   These unit files are installed as
           <u>name.unit-extension</u> (in the example, it would be installed as <u><b>foo</b>.service</u>).

           Furthermore, if no unit files are passed explicitly as command line arguments, <b>dh_installsystemd</b> will
           only act on unit files called <u>name</u> (rather than all unit files found in the package).

       <b>--restart-after-upgrade</b>
           Do not stop the unit file until after the package upgrade has been completed.  This  is  the  default
           behaviour in compat 10.

           In  earlier  compat  levels the default was to stop the unit file in the <u>prerm</u>, and start it again in
           the <u>postinst</u>.

           This can be useful for daemons that should not have a possibly long downtime during upgrade. But  you
           should  make  sure  that  the  daemon  will not get confused by the package being upgraded while it's
           running before using this option.

       <b>--no-restart-after-upgrade</b>
           Undo a previous <b>--restart-after-upgrade</b> (or the default of compat  10).   If  no  other  options  are
           given,  this  will  cause  the  service  to  be  stopped in the <u>prerm</u> script and started again in the
           <u>postinst</u> script.

       <b>-r</b>, <b>--no-stop-on-upgrade</b>, <b>--no-restart-on-upgrade</b>
           Do not stop service on upgrade. This has the side-effect of not restarting the service as a  part  of
           the upgrade.

           If you want to restart the service with minimal downtime, please use <b>--restart-after-upgrade</b> (default
           in  compat  10 or later).  If you want the service to be restarted but be stopped during the upgrade,
           then please use <b>--no-restart-after-upgrade</b> (note the "after-upgrade").

           Note that the <b>--no-restart-on-upgrade</b> alias is deprecated and will be removed in compat 14.  This  is
           to avoid confusion with the <b>--no-restart-after-upgrade</b> option.

       <b>--no-start</b>
           Do not start the unit file after upgrades and after initial installation (the latter is only relevant
           for services without a corresponding init script).

           <b>Note</b>  that this option does not affect whether the services are enabled.  Please remember to also use
           <b>--no-enable</b> if the services should not be enabled.

       <b>unit</b> <b>file</b> ...
           Only process and generate maintscripts for the installed unit files with the (base)name <u>unit</u> <u>file</u>.

           Note: <b>dh_installsystemd</b> will still install unit files from <u>debian/</u>  but  it  will  not  generate  any
           maintscripts for them unless they are explicitly listed in <b>unit</b> <b>file</b> ...

</pre><h4><b>NOTES</b></h4><pre>
       This command is not idempotent. <b><a href="../man1/dh_prep.1.html">dh_prep</a></b>(1) should be called between invocations of this command (with the
       same  arguments).  Otherwise,  it may cause multiple instances of the same text to be added to maintainer
       scripts.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man7/debhelper.7.html">debhelper</a></b>(7), <b><a href="../man1/dh_installinit.1.html">dh_installinit</a></b>(1), <b><a href="../man1/deb-systemd-helper.1.html">deb-systemd-helper</a></b>(1)

</pre><h4><b>AUTHORS</b></h4><pre>
       <a href="mailto:pkg-systemd-maintainers@lists.alioth.debian.org">pkg-systemd-maintainers@lists.alioth.debian.org</a>

13.24.1ubuntu2                                     2025-02-11                               <u><a href="../man1/DH_INSTALLSYSTEMD.1.html">DH_INSTALLSYSTEMD</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>