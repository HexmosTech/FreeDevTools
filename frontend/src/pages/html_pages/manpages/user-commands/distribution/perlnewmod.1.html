<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>perlnewmod - preparing a new module for distribution</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/perl-doc">perl-doc_5.40.1-2ubuntu0.2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       perlnewmod - preparing a new module for distribution

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This document gives you some suggestions about how to go about writing Perl modules, preparing them for
       distribution, and making them available via CPAN.

       One of the things that makes Perl really powerful is the fact that Perl hackers tend to want to share the
       solutions to problems they've faced, so you and I don't have to battle with the same problem again.

       The main way they do this is by abstracting the solution into a Perl module. If you don't know what one
       of these is, the rest of this document isn't going to be much use to you. You're also missing out on an
       awful lot of useful code; consider having a look at perlmod, perlmodlib and perlmodinstall before coming
       back here.

       When you've found that there isn't a module available for what you're trying to do, and you've had to
       write the code yourself, consider packaging up the solution into a module and uploading it to CPAN so
       that others can benefit.

       You should also take a look at perlmodstyle for best practices in making a module.

   <b>Warning</b>
       We're going to primarily concentrate on Perl-only modules here, rather than XS modules. XS modules serve
       a rather different purpose, and you should consider different things before distributing them - the
       popularity of the library you are gluing, the portability to other operating systems, and so on. However,
       the notes on preparing the Perl side of the module and packaging and distributing it will apply equally
       well to an XS module as a pure-Perl one.

   <b>What</b> <b>should</b> <b>I</b> <b>make</b> <b>into</b> <b>a</b> <b>module?</b>
       You should make a module out of any code that you think is going to be useful to others. Anything that's
       likely to fill a hole in the communal library and which someone else can slot directly into their
       program. Any part of your code which you can isolate and extract and plug into something else is a likely
       candidate.

       Let's take an example. Suppose you're reading in data from a local format into a hash-of-hashes in Perl,
       turning that into a tree, walking the tree and then piping each node to an Acme Transmogrifier Server.

       Now, quite a few people have the Acme Transmogrifier, and you've had to write something to talk the
       protocol from scratch - you'd almost certainly want to make that into a module. The level at which you
       pitch it is up to you: you might want protocol-level modules analogous to Net::SMTP which then talk to
       higher level modules analogous to Mail::Send. The choice is yours, but you do want to get a module out
       for that server protocol.

       Nobody else on the planet is going to talk your local data format, so we can ignore that. But what about
       the thing in the middle? Building tree structures from Perl variables and then traversing them is a nice,
       general problem, and if nobody's already written a module that does that, you might want to modularise
       that code too.

       So hopefully you've now got a few ideas about what's good to modularise.  Let's now see how it's done.

   <b>Step-by-step:</b> <b>Preparing</b> <b>the</b> <b>ground</b>
       Before we even start scraping out the code, there are a few things we'll want to do in advance.

       Look around
          Dig  into  a  bunch of modules to see how they're written. I'd suggest starting with Text::Tabs, since
          it's in the standard library and is nice and simple, and then  looking  at  something  a  little  more
          complex  like  File::Copy.  For object oriented code, WWW::Mechanize or the "Email::*" modules provide
          some good examples.

          These should give you an overall feel for how modules are laid out and written.

       Check it's new
          There are a lot of modules on CPAN, and it's easy to miss one that's similar to what  you're  planning
          on  contributing.  Have  a good plough through &lt;https://metacpan.org&gt; and make sure you're not the one
          reinventing the wheel!

       Discuss the need
          You might love it. You might feel that everyone else needs it. But there might  not  actually  be  any
          real demand for it out there. If you're unsure about the demand your module will have, consider asking
          the  "<a href="mailto:module-authors@perl.org">module-authors@perl.org</a>"  mailing  list (send an email to "<a href="mailto:module-authors-subscribe@perl.org">module-authors-subscribe@perl.org</a>" to
          subscribe; see &lt;https://lists.perl.org/list/module-authors.html&gt; for more information and  a  link  to
          the archives).

       Choose a name
          Perl  modules  included  on CPAN have a naming hierarchy you should try to fit in with. See perlmodlib
          for more details on how this works, and browse around CPAN and the modules list to get a feel  of  it.
          At  the  very  least,  remember this: modules should be title capitalised, (This::Thing) fit in with a
          category, and explain their purpose succinctly.

       Check again
          While you're doing that, make really sure you haven't missed a module similar to the one you're  about
          to write.

          When  you've  got  your  name  sorted out and you're sure that your module is wanted and not currently
          available, it's time to start coding.

   <b>Step-by-step:</b> <b>Making</b> <b>the</b> <b>module</b>
       Start with <u>module-starter</u> or <u>h2xs</u>
          The <u>module-starter</u> utility is distributed as part of the Module::Starter CPAN package.  It  creates  a
          directory  with  stubs  of  all  the  necessary files to start a new module, according to recent "best
          practice" for module development, and is invoked from the command line, thus:

              module-starter --module=Foo::Bar \
                 --author="Your Name" --email=<a href="mailto:yourname@cpan.org">yourname@cpan.org</a>

          If you do not wish to install the Module::Starter package from CPAN, <u>h2xs</u> is an older tool, originally
          intended for the development of XS modules, which comes packaged with the Perl distribution.

          A typical invocation of h2xs for a pure Perl module is:

              h2xs -AX --skip-exporter --use-new-tests -n Foo::Bar

          The "-A" omits the Autoloader code, "-X" omits XS elements, "--skip-exporter" omits the Exporter code,
          "--use-new-tests" sets up a modern testing environment, and "-n" specifies the name of the module.

       Use strict and warnings
          A module's code has to be warning and strict-clean, since you  can't  guarantee  the  conditions  that
          it'll be used under. Besides, you wouldn't want to distribute code that wasn't warning or strict-clean
          anyway, right?

       Use Carp
          The  Carp  module  allows you to present your error messages from the caller's perspective; this gives
          you a way to signal a problem with the caller and not your module. For instance, if you say this:

              warn "No hostname given";

          the user will see something like this:

           No hostname given at
           /usr/local/lib/perl5/site_perl/5.6.0/Net/Acme.pm line 123.

          which looks like your module is doing something wrong. Instead, you want to put the blame on the user,
          and say this:

              No hostname given at bad_code, line 10.

          You do this by using Carp and replacing your "warn"s with "carp"s. If you need to "die",  say  "croak"
          instead.  However,  keep  "warn"  and  "die" in place for your sanity checks - where it really is your
          module at fault.

       Use Exporter - wisely!
          Exporter gives you a standard way of exporting symbols and  subroutines  from  your  module  into  the
          caller's namespace. For instance, saying "use Net::Acme qw(&amp;frob)" would import the "frob" subroutine.

          The  package  variable  @EXPORT  will determine which symbols will get exported when the caller simply
          says "use Net::Acme" - you will hardly ever want to put anything in there. @EXPORT_OK,  on  the  other
          hand,  specifies  which symbols you're willing to export. If you do want to export a bunch of symbols,
          use the %EXPORT_TAGS and define a standard export set - look at Exporter for more details.

       Use plain old documentation
          The work isn't over until the paperwork is done, and you're going to need to put in some time  writing
          some  documentation  for  your module.  "module-starter" or "h2xs" will provide a stub for you to fill
          in; if you're not sure about the format, look at perlpod for an introduction. Provide a good  synopsis
          of  how  your  module is used in code, a description, and then notes on the syntax and function of the
          individual subroutines or methods. Use Perl comments for developer notes and POD for end-user notes.

       Write tests
          You're encouraged to create self-tests for your module to ensure  it's  working  as  intended  on  the
          myriad  platforms  Perl supports; if you upload your module to CPAN, a host of testers will build your
          module and send you the results of the tests.  Again,  "module-starter"  and  "h2xs"  provide  a  test
          framework  which  you  can  extend  - you should do something more than just checking your module will
          compile.  Test::Simple and Test::More are good places to start when writing a test suite.

       Write the <u>README</u>
          If you're uploading to CPAN, the automated gremlins will extract the README file  and  place  that  in
          your  CPAN  directory. It'll also appear in the main <u>by-module</u> and <u>by-category</u> directories if you make
          it onto the modules list. It's a good idea to put here what the module actually does in detail.

       Write <u>Changes</u>
          Add any user-visible changes since the last release to your <u>Changes</u> file.

   <b>Step-by-step:</b> <b>Distributing</b> <b>your</b> <b>module</b>
       Get a CPAN user ID
          Every developer publishing modules on CPAN needs a CPAN ID.  Visit "&lt;https://pause.perl.org/&gt;", select
          "Request PAUSE Account", and wait for your request to be approved by the PAUSE administrators.

       Make the tarball
          Once again, "module-starter" or "h2xs" has done all the work  for  you.   They  produce  the  standard
          "Makefile.PL"  you  see  when  you  download  and install modules, and this produces a Makefile with a
          "dist" target.

              perl Makefile.PL &amp;&amp; make test &amp;&amp; make distcheck &amp;&amp; make dist

          Once you've ensured that your module passes its own tests - always a good thing to make sure - you can
          "make distcheck" to make sure everything looks OK, followed by "make  dist",  and  the  Makefile  will
          hopefully produce you a nice tarball of your module, ready for upload.

       Upload the tarball
          The  email  you  got  when  you  received  your CPAN ID will tell you how to log in to PAUSE, the Perl
          Authors Upload SErver. From the menus there, you can upload your module to CPAN.

          Alternatively you can use the <u>cpan-upload</u> script, part of the CPAN::Uploader distribution on CPAN.

       Fix bugs!
          Once you start accumulating users, they'll send you bug reports. If you're lucky,  they'll  even  send
          you patches. Welcome to the joys of maintaining a software project...

</pre><h4><b>AUTHOR</b></h4><pre>
       Simon Cozens, "<a href="mailto:simon@cpan.org">simon@cpan.org</a>"

       Updated by Kirrily "Skud" Robert, "<a href="mailto:skud@cpan.org">skud@cpan.org</a>"

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       perlmod,  perlmodlib,  perlmodinstall,  h2xs,  strict,  Carp, Exporter, perlpod, Test::Simple, Test::More
       ExtUtils::MakeMaker, Module::Build, Module::Starter &lt;https://www.cpan.org/&gt;

perl v5.40.1                                       2025-07-25                                      <u><a href="../man1/PERLNEWMOD.1.html">PERLNEWMOD</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>