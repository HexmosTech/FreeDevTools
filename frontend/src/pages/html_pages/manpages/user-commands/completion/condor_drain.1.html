<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>condor_drain - HTCondor Manual</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/condor">condor_23.6.2+dfsg-2build1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       condor_drain - HTCondor Manual

       Control draining of an execute machine

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>condor_drain</b> [<b>-help</b> ]

       <b>condor_drain</b>   [<b>-debug</b>   ]   [<b>-pool</b>  <u>pool-name</u>]  [<b>-graceful</b>  <b>|</b>  <b>-quick</b>  <b>|</b>  <b>-fast</b>]  [<b>-reason</b>  <u>reason-text</u>]
       [<b>-resume-on-completion</b> <b>|</b> <b>-restart-on-completion</b> <b>|</b> <b>-reconfig-on-completion</b> <b>|</b> <b>-exit-on-completion</b>]  [<b>-check</b>
       <u>expr</u>] [<b>-start</b> <u>expr</u>] <u>machine-name</u>

       <b>condor_drain</b> [<b>-debug</b> ] [<b>-pool</b> <u>pool-name</u>] <b>-cancel</b> [<b>-request-id</b> <u>id</u>] <u>machine-name</u>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <u>condor_drain</u>  is  an  administrative  command  used  to  control  the draining of all slots on an execute
       machine. When a machine is draining, it will not  accept  any  new  jobs  unless  the  <b>-start</b>  expression
       specifies  otherwise.  Which  machine to drain is specified by the argument <u>machine-name</u>, and will be the
       same as the machine ClassAd attribute <b>Machine</b>.

       How currently running jobs  are  treated  depends  on  the  draining  schedule  that  is  chosen  with  a
       command-line option:

          <b>-graceful</b>
                 Initiate a graceful eviction of the job. This means all promises that have been made to the job
                 are honored, including <b>MaxJobRetirementTime</b>. The eviction of jobs is coordinated to reduce idle
                 time.  This  means  that  if one slot has a job with a long retirement time and the other slots
                 have jobs with shorter retirement times, the effective retirement time for all of the  jobs  is
                 the longer one. If no draining schedule is specified, <b>-graceful</b> is chosen by default.

          <b>-quick</b> <b>MaxJobRetirementTime</b>  is not honored. Eviction of jobs is immediately initiated. Jobs are given
                 time to shut down according to the usual policy, that is, given by <u>MachineMaxVacateTime</u>.

          <b>-fast</b>  Jobs are immediately hard-killed, with no chance to gracefully shut down.

       If you specify <b>-graceful</b>, you may also specify <b>-start</b>. On a gracefully-draining machine,  some  jobs  may
       finish  retiring  before  others.  By default, the resources used by the newly-retired jobs do not become
       available for use by other jobs until the machine exits  the  draining  state  (see  below).  The  <b>-start</b>
       expression  you  supply  replaces  the draining machine's normal <u>START</u> expression for the duration of the
       draining     state,     potentially     making     those      resources      available.      See      the
       admin-manual/ep-policy-configuration:*condor_startd* Policy Configuration section for more information.

       Once  draining  is  complete,  the  machine will enter the Drained/Idle state. To resume normal operation
       (negotiation) at that time or any previous time during draining, the <b>-cancel</b>  option  may  be  used.  The
       <b>-resume-on-completion</b>  option  results  in  automatic  resumption  of  normal operation once draining has
       completed, and may be used when initiating draining.  This  is  useful  for  forcing  a  machine  with  a
       partitionable  slots  to  join  all  of  the  resources  back  together  into  one  machine, facilitating
       de-fragmentation and whole machine negotiation.

</pre><h4><b>OPTIONS</b></h4><pre>
          <b>-help</b>  Display brief usage information and exit.

          <b>-debug</b> Causes debugging information to be sent to <b>stderr</b>, based on  the  value  of  the  configuration
                 variable <u>TOOL_DEBUG</u>.

          <b>-pool</b> <u>pool-name</u>
                 Specify an alternate HTCondor pool, if the default one is not desired.

          <b>-graceful</b>
                 (the default) Honor the maximum vacate and retirement time policy.

          <b>-quick</b> Honor the maximum vacate time, but not the retirement time policy.

          <b>-fast</b>  Honor neither the maximum vacate time policy nor the retirement time policy.

          <b>-reason</b> <u>reason-text</u>
                 Set  the drain reason to <u>reason-text</u>. While the <u>condor_startd</u> is draining it will advertise the
                 given reason. If this option is not used the reason defaults to  the  name  of  the  user  that
                 started the drain.

          <b>-resume-on-completion</b>
                 When  done  draining, resume normal operation, such that potentially the whole machine could be
                 claimed.

          <b>-restart-on-completion</b>
                 When done draining, restart the <u>condor_startd</u> daemon so that configuration  changes  will  take
                 effect.

          <b>-reconfig-on-completion</b>
                 When  done  draining, reconfig and then resume normal operation. A reconfig will not change the
                 resources assigned to slots, but most other configuration changes will  be  applied,  including
                 changes to the <u>START</u> expression and to offline GPUs and universes.

          <b>-exit-on-completion</b>
                 When  done  draining,  shut  down  the  <u>condor_startd</u>  daemon and tell the <u>condor_master</u> not to
                 restart it automatically.

          <b>-check</b> <u>expr</u>
                 Abort draining, if <b>expr</b> is not true for all slots to be drained.

          <b>-start</b> <u>expr</u>
                 The <u>START</u> expression to use while the machine is draining. You can't  reference  the  machine's
                 existing <u>START</u> expression.

          <b>-cancel</b>
                 Cancel a prior draining request, to permit the <u>condor_negotiator</u> to use the machine again.

          <b>-request-id</b> <u>id</u>
                 Specify  a  specific  draining  request  to  cancel, where <u>id</u> is given by the <u>DrainingRequestId</u>
                 machine ClassAd attribute.

</pre><h4><b>EXIT</b> <b>STATUS</b></h4><pre>
       <u>condor_drain</u> will exit with a non-zero status value if it fails and zero status if it succeeds.

</pre><h4><b>AUTHOR</b></h4><pre>
       HTCondor Team

</pre><h4><b>COPYRIGHT</b></h4><pre>
       1990-2024, Center for High Throughput Computing, Computer Sciences Department, University  of  Wisconsin-
       Madison, Madison, WI, US. Licensed under the Apache License, Version 2.0.

                                                  Jan 04, 2025                                   <u><a href="../man1/CONDOR_DRAIN.1.html">CONDOR_DRAIN</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>