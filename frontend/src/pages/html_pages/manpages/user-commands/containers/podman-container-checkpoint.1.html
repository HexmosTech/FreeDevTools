<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>podman-container-checkpoint - Checkpoint one or more running containers</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/podman">podman_5.4.1+ds1-1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       podman-container-checkpoint - Checkpoint one or more running containers

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>podman</b> <b>container</b> <b>checkpoint</b> [<u>options</u>] <u>container</u> [<u>container</u> ...]

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>podman</b>  <b>container</b>  <b>checkpoint</b> checkpoints all the processes in one or more <u>containers</u>. A <u>container</u> can be
       restored from a checkpoint with <b>podman-container-restore</b>. The <u>container</u> <u>IDs</u> or <u>names</u> are used as input.

       <u>IMPORTANT:</u> <u>If</u> <u>the</u> <u>container</u> <u>is</u> <u>using</u> <b>systemd</b> <u>as</u> <b>entrypoint</b>  <u>checkpointing</u>  <u>the</u>  <u>container</u>  <u>might</u>  <u>not</u>  <u>be</u>
       <u>possible.</u>

</pre><h4><b>OPTIONS</b></h4><pre>
   <b>--all,</b> <b>-a</b>
       Checkpoint all running <u>containers</u>.
       The default is <b>false</b>.
       <u>IMPORTANT:</u> <u>This</u> <u>OPTION</u> <u>does</u> <u>not</u> <u>need</u> <u>a</u> <u>container</u> <u>name</u> <u>or</u> <u>ID</u> <u>as</u> <u>input</u> <u>argument.</u>

   <b>--compress,</b> <b>-c=zstd</b> <b>|</b> <u><b>none</b></u> <b>|</b> <u><b>gzip</b></u>
       Specify  the  compression algorithm used for the checkpoint archive created with the <b>--export,</b> <b>-e</b> OPTION.
       Possible algorithms are <b>zstd</b>, <u>none</u> and <u>gzip</u>.
       One possible reason to use <u>none</u> is to enable faster creation of checkpoint archives. Not compressing  the
       checkpoint archive can result in faster checkpoint archive creation.
       The default is <b>zstd</b>.

   <b>--create-image=</b><u><b>image</b></u>
       Create  a  checkpoint  image  from a running container. This is a standard OCI image created in the local
       image store. It consists of a single layer that contains all of the checkpoint files. The content of this
       image layer is in the same format as a checkpoint created with <b>--export</b>. A checkpoint image can be pushed
       to a standard container registry and pulled on a different  system  to  enable  container  migration.  In
       addition,  the image can be exported with <b>podman</b> <b>image</b> <b>save</b> and inspected with <b>podman</b> <b>inspect</b>. Inspecting
       a checkpoint image displays additional information, stored as annotations,  about  the  host  environment
       used to do the checkpoint:

              • <b>io.podman.annotations.checkpoint.name</b>: Human-readable name of the original container.

              • <b>io.podman.annotations.checkpoint.rawImageName</b>:  Unprocessed name of the image used to create the
                original container (as specified by the user).

              • <b>io.podman.annotations.checkpoint.rootfsImageID</b>: ID of the image  used  to  create  the  original
                container.

              • <b>io.podman.annotations.checkpoint.rootfsImageName</b>:   Image  name  used  to  create  the  original
                container.

              • <b>io.podman.annotations.checkpoint.podman.version</b>:  Version  of  Podman   used   to   create   the
                checkpoint.

              • <b>io.podman.annotations.checkpoint.criu.version</b>: Version of CRIU used to create the checkpoint.

              • <b>io.podman.annotations.checkpoint.runtime.name</b>:  Container  runtime  (e.g.,  runc,  crun) used to
                create the checkpoint.

              • <b>io.podman.annotations.checkpoint.runtime.version</b>: Version  of  the  container  runtime  used  to
                create the checkpoint.

              • <b>io.podman.annotations.checkpoint.conmon.version</b>:  Version  of  conmon  used  with  the  original
                container.

              • <b>io.podman.annotations.checkpoint.host.arch</b>: CPU architecture of the host on which the checkpoint
                was created.

              • <b>io.podman.annotations.checkpoint.host.kernel</b>: Version of Linux kernel  of  the  host  where  the
                checkpoint was created.

              • <b>io.podman.annotations.checkpoint.cgroups.version</b>:  cgroup  version  used  by  the host where the
                checkpoint was created.

              • <b>io.podman.annotations.checkpoint.distribution.version</b>: Version of host distribution on which the
                checkpoint was created.

              • <b>io.podman.annotations.checkpoint.distribution.name</b>: Name  of  host  distribution  on  which  the
                checkpoint was created.

   <b>--export,</b> <b>-e=</b><u><b>archive</b></u>
       Export  the  checkpoint  to a tar.gz file. The exported checkpoint can be used to import the <u>container</u> on
       another system and thus enabling container live migration. This  checkpoint  archive  also  includes  all
       changes to the <u>container's</u> root file-system, if not explicitly disabled using <b>--ignore-rootfs</b>.

   <b>--file-locks</b>
       Checkpoint  a  <u>container</u> with file locks. If an application running in the container is using file locks,
       this OPTION is required during checkpoint and restore. Otherwise checkpointing <u>containers</u> with file locks
       is expected to fail. If file locks are not used, this option is ignored.
       The default is <b>false</b>.

   <b>--ignore-rootfs</b>
       If a checkpoint is exported to a tar.gz  file  it  is  possible  with  the  help  of  <b>--ignore-rootfs</b>  to
       explicitly disable including changes to the root file-system into the checkpoint archive file.
       The default is <b>false</b>.
       <u>IMPORTANT:</u> <u>This</u> <u>OPTION</u> <u>only</u> <u>works</u> <u>in</u> <u>combination</u> <u>with</u> <b>--export,</b> <b>-e</b><u>.</u>

   <b>--ignore-volumes</b>
       This OPTION must be used in combination with the <b>--export,</b> <b>-e</b> OPTION.  When this OPTION is specified, the
       content of volumes associated with the <u>container</u> is not included into the checkpoint tar.gz file.
       The default is <b>false</b>.

   <b>--keep,</b> <b>-k</b>
       Keep  all  temporary  log  and statistics files created by CRIU during checkpointing. These files are not
       deleted if checkpointing  fails  for  further  debugging.  If  checkpointing  succeeds  these  files  are
       theoretically not needed, but if these files are needed Podman can keep the files for further analysis.
       The default is <b>false</b>.

   <b>--latest,</b> <b>-l</b>
       Instead  of  providing  the  <u>container</u>  <u>ID</u> or <u>name</u>, use the last created <u>container</u>. The default is <b>false</b>.
       <u>IMPORTANT:</u> <u>This</u> <u>OPTION</u> <u>is</u> <u>not</u> <u>available</u>  <u>with</u>  <u>the</u>  <u>remote</u>  <u>Podman</u>  <u>client,</u>  <u>including</u>  <u>Mac</u>  <u>and</u>  <u>Windows</u>
       <u>(excluding</u> <u>WSL2)</u> <u>machines.</u> <u>This</u> <u>OPTION</u> <u>does</u> <u>not</u> <u>need</u> <u>a</u> <u>container</u> <u>name</u> <u>or</u> <u>ID</u> <u>as</u> <u>input</u> <u>argument.</u>

   <b>--leave-running,</b> <b>-R</b>
       Leave the <u>container</u> running after checkpointing instead of stopping it.
       The default is <b>false</b>.

   <b>--pre-checkpoint,</b> <b>-P</b>
       Dump  the <u>container's</u> memory information only, leaving the <u>container</u> running. Later operations supersedes
       prior dumps. It only works on <b>runc</b> <b>1.0-rc3</b> or <b>higher</b>.
       The default is <b>false</b>.

       The functionality to only checkpoint the memory of the container and in a second  checkpoint  only  write
       out  the  memory  pages  which have changed since the first checkpoint relies on the Linux kernel's soft-
       dirty bit, which is not available on all systems as  it  depends  on  the  system  architecture  and  the
       configuration  of the Linux kernel. Podman verifies if the current system supports this functionality and
       return an error if the current system does not support it.

   <b>--print-stats</b>
       Print out statistics about checkpointing the container(s). The output is rendered in  a  JSON  array  and
       contains information about how much time different checkpoint operations required. Many of the checkpoint
       statistics  are  created by CRIU and just passed through to Podman. The following information is provided
       in the JSON array:

              • <b>podman_checkpoint_duration</b>: Overall time (in microseconds) needed to create all checkpoints.

              • <b>runtime_checkpoint_duration</b>: Time (in microseconds) the container runtime needed to  create  the
                checkpoint.

              • <b>freezing_time</b>:  Time  (in  microseconds)  CRIU  needed  to  pause  (freeze) all processes in the
                container (measured by CRIU).

              • <b>frozen_time</b>: Time (in microseconds) all processes in the  container  were  paused  (measured  by
                CRIU).

              • <b>memdump_time</b>:  Time  (in  microseconds)  needed  to  extract  all required memory pages from all
                container processes (measured by CRIU).

              • <b>memwrite_time</b>: Time (in  microseconds)  needed  to  write  all  required  memory  pages  to  the
                corresponding checkpoint image files (measured by CRIU).

              • <b>pages_scanned</b>:  Number  of  memory  pages  scanned  to determine if they need to be checkpointed
                (measured by CRIU).

              • <b>pages_written</b>: Number of memory pages actually written to the checkpoint image  files  (measured
                by CRIU).

       The default is <b>false</b>.

   <b>--tcp-established</b>
       Checkpoint a <u>container</u> with established TCP connections. If the checkpoint image contains established TCP
       connections,  this  OPTION  is  required  during  restore.  Defaults to not checkpointing <u>containers</u> with
       established TCP connections.
       The default is <b>false</b>.

   <b>--with-previous</b>
       Check out the <u>container</u> with previous criu image files in pre-dump. It only  works  on  <b>runc</b>  <b>1.0-rc3</b>  or
       <b>higher</b>.
       The default is <b>false</b>.
       <u>IMPORTANT:</u> <u>This</u> <u>OPTION</u> <u>is</u> <u>not</u> <u>available</u> <u>with</u> <b>--pre-checkpoint.</b>

       This option requires that the option <b>--pre-checkpoint</b> has been used before on the same container. Without
       an existing pre-checkpoint, this option fails.

       Also  see  <b>--pre-checkpoint</b>  for  additional information about <b>--pre-checkpoint</b> availability on different
       systems.

</pre><h4><b>EXAMPLES</b></h4><pre>
       Make a checkpoint for the container "mywebserver".

       # podman container checkpoint mywebserver

       Create a checkpoint image for the container "mywebserver".

       # podman container checkpoint --create-image mywebserver-checkpoint-1 mywebserver

       Dumps the container's memory information of the latest container into an archive.

       # podman container checkpoint -P -e pre-checkpoint.tar.gz -l

       Keep the container's  memory  information  from  an  older  dump  and  add  the  new  container's  memory
       information.

       # podman container checkpoint --with-previous -e checkpoint.tar.gz -l

       Dump  the  container's  memory  information  of  the  latest container into an archive with the specified
       compress method.

       # podman container checkpoint -l --compress=none --export=dump.tar
       # podman container checkpoint -l --compress=gzip --export=dump.tar.gz

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man1/podman.1.html">podman</a>(1)</b>, <b><a href="../man1/podman-container-restore.1.html">podman-container-restore</a>(1)</b>, <b><a href="../man8/criu.8.html">criu</a>(8)</b>

</pre><h4><b>HISTORY</b></h4><pre>
       September 2018, Originally compiled by Adrian Reber <a href="mailto:areber@redhat.com">areber@redhat.com</a> ⟨<a href="mailto:areber@redhat.com">mailto:areber@redhat.com</a>⟩

                                                                                  <u><a href="../man1/podman-container-checkpoint.1.html">podman-container-checkpoint</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>