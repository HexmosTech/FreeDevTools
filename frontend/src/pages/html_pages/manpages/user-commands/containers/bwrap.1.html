<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>bwrap - container setup utility</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/bubblewrap">bubblewrap_0.11.0-2_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       bwrap - container setup utility

</pre><h4><b>SYNOPSIS</b></h4><pre>

       <b>bwrap</b> [<u>OPTION</u>...] [<u>COMMAND</u>]

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>bwrap</b> is a unprivileged low-level sandboxing tool (optionally setuid on older distributions). You are
       unlikely to use it directly from the commandline, although that is possible.

       It works by creating a new, completely empty, filesystem namespace where the root is on a tmpfs that is
       invisible from the host, and which will be automatically cleaned up when the last process exits. You can
       then use commandline options to construct the root filesystem and process environment for the command to
       run in the namespace.

       By default, <b>bwrap</b> creates a new mount namespace for the sandbox. Optionally it also sets up new user,
       ipc, pid, network and uts namespaces (but note the user namespace is required if bwrap is not installed
       setuid root). The application in the sandbox can be made to run with a different UID and GID.

       If needed (e.g. when using a PID namespace) <b>bwrap</b> is running a minimal pid 1 process in the sandbox that
       is responsible for reaping zombies. It also detects when the initial application process (pid 2) dies and
       reports its exit status back to the original spawner. The pid 1 process exits to clean up the sandbox
       when there are no other processes in the sandbox left.

</pre><h4><b>OPTIONS</b></h4><pre>
       When options are used multiple times, the last option wins, unless otherwise specified.

       General options:

       <b>--help</b>
           Print help and exit

       <b>--version</b>
           Print version

       <b>--args</b> <b>FD</b>
           Parse nul-separated arguments from the given file descriptor. This option can be used multiple times
           to parse options from multiple sources.

       <b>--argv0</b> <b>VALUE</b>
           Set argv[0] to the value VALUE before running the program

       <b>--level-prefix</b>
           Prefix each line of diagnostic output with a numeric severity level enclosed in angle brackets. The
           severity levels used are based on the constants used by <b><a href="../man3/syslog.3.html">syslog</a></b>(3): for example, &lt;4&gt; indicates a
           warning, because LOG_WARNING has numeric value 4. Numbers smaller than 4 indicate fatal errors, and
           numbers larger than 4 indicate informational messages. These prefixes can be parsed by tools
           compatible with logger --prio-prefix (see <b><a href="../man1/logger.1.html">logger</a></b>(1)) or systemd-cat --level-prefix=1 (see <b><a href="../man1/systemdcat.1.html">systemd-</a></b>
           <b><a href="../man1/systemdcat.1.html">cat</a></b>(1)).

       Options related to kernel namespaces:

       <b>--unshare-user</b>
           Create a new user namespace

       <b>--unshare-user-try</b>
           Create a new user namespace if possible else skip it

       <b>--unshare-ipc</b>
           Create a new ipc namespace

       <b>--unshare-pid</b>
           Create a new pid namespace

       <b>--unshare-net</b>
           Create a new network namespace

       <b>--unshare-uts</b>
           Create a new uts namespace

       <b>--unshare-cgroup</b>
           Create a new cgroup namespace

       <b>--unshare-cgroup-try</b>
           Create a new cgroup namespace if possible else skip it

       <b>--unshare-all</b>
           Unshare all possible namespaces. Currently equivalent with: <b>--unshare-user-try</b> <b>--unshare-ipc</b>
           <b>--unshare-pid</b> <b>--unshare-net</b> <b>--unshare-uts</b> <b>--unshare-cgroup-try</b>

       <b>--share-net</b>
           Retain the network namespace, overriding an earlier <b>--unshare-all</b> or <b>--unshare-net</b>

       <b>--userns</b> <b>FD</b>
           Use an existing user namespace instead of creating a new one. The namespace must fulfil the
           permission requirements for setns(), which generally means that it must be a descendant of the
           currently active user namespace, owned by the same user.

           This is incompatible with --unshare-user, and doesn't work in the setuid version of bubblewrap.

       <b>--userns2</b> <b>FD</b>
           After setting up the new namespace, switch into the specified namespace. For this to work the
           specified namespace must be a descendant of the user namespace used for the setup, so this is only
           useful in combination with --userns.

           This is useful because sometimes bubblewrap itself creates nested user namespaces (to work around
           some kernel issues) and --userns2 can be used to enter these.

       <b>--disable-userns</b>
           Prevent the process in the sandbox from creating further user namespaces, so that it cannot rearrange
           the filesystem namespace or do other more complex namespace modification. This is currently
           implemented by setting the user.max_user_namespaces sysctl to 1, and then entering a nested user
           namespace which is unable to raise that limit in the outer namespace. This option requires
           <b>--unshare-user</b>, and doesn't work in the setuid version of bubblewrap.

       <b>--assert-userns-disabled</b>
           Confirm that the process in the sandbox has been prevented from creating further user namespaces, but
           without taking any particular action to prevent that. For example, this can be combined with <b>--userns</b>
           to check that the given user namespace has already been set up to prevent the creation of further
           user namespaces.

       <b>--pidns</b> <b>FD</b>
           Use an existing pid namespace instead of creating one. This is often used with --userns, because the
           pid namespace must be owned by the same user namespace that bwrap uses.

           Note that this can be combined with --unshare-pid, and in that case it means that the sandbox will be
           in its own pid namespace, which is a child of the passed in one.

       <b>--uid</b> <b>UID</b>
           Use a custom user id in the sandbox (requires <b>--unshare-user</b>)

       <b>--gid</b> <b>GID</b>
           Use a custom group id in the sandbox (requires <b>--unshare-user</b>)

       <b>--hostname</b> <b>HOSTNAME</b>
           Use a custom hostname in the sandbox (requires <b>--unshare-uts</b>)

       Options about environment setup:

       <b>--chdir</b> <b>DIR</b>
           Change directory to DIR

       <b>--setenv</b> <b>VAR</b> <b>VALUE</b>
           Set an environment variable

       <b>--unsetenv</b> <b>VAR</b>
           Unset an environment variable

       <b>--clearenv</b>
           Unset all environment variables, except for <b>PWD</b> and any that are subsequently set by <b>--setenv</b>

       Options for monitoring the sandbox from the outside:

       <b>--lock-file</b> <b>DEST</b>
           Take a lock on DEST while the sandbox is running. This option can be used multiple times to take
           locks on multiple files.

       <b>--sync-fd</b> <b>FD</b>
           Keep this file descriptor open while the sandbox is running

       Filesystem related options. These are all operations that modify the filesystem directly, or mounts stuff
       in the filesystem. These are applied in the order they are given as arguments.

       Any missing parent directories that are required to create a specified destination are automatically
       created as needed. Their permissions are normally set to 0755 (rwxr-xr-x). However, if a <b>--perms</b> option
       is in effect, and it sets the permissions for group or other to zero, then newly-created parent
       directories will also have their corresponding permission set to zero.  <b>--size</b> modifies the size of the
       created mount when preceding a <b>--tmpfs</b> action; <b>--perms</b> and <b>--size</b> can be combined.

       <b>--perms</b> <b>OCTAL</b>
           This option does nothing on its own, and must be followed by one of the options that it affects. It
           sets the permissions for the next operation to OCTAL. Subsequent operations are not affected: for
           example, --perms 0700 --tmpfs /a --tmpfs /b will mount /a with permissions 0700, then return to the
           default permissions for /b. Note that <b>--perms</b> and <b>--size</b> can be combined: --perms 0700 --size
           10485760 --tmpfs /s will apply permissions as well as a maximum size to the created tmpfs.

       <b>--size</b> <b>BYTES</b>
           This option does nothing on its own, and must be followed by --tmpfs. It sets the size in bytes for
           the next tmpfs. For example, --size 10485760 --tmpfs <a href="file:/tmp">/tmp</a> will create a tmpfs at <a href="file:/tmp">/tmp</a> of size 10MiB.
           Subsequent operations are not affected: for example, --size 10485760 --tmpfs /a --tmpfs /b will mount
           /a with size 10MiB, then return to the default size for /b. Note that <b>--perms</b> and <b>--size</b> can be
           combined: --size 10485760 --perms 0700 --tmpfs /s will apply permissions as well as a maximum size to
           the created tmpfs.

       <b>--bind</b> <b>SRC</b> <b>DEST</b>
           Bind mount the host path SRC on DEST

       <b>--bind-try</b> <b>SRC</b> <b>DEST</b>
           Equal to <b>--bind</b> but ignores non-existent SRC

       <b>--dev-bind</b> <b>SRC</b> <b>DEST</b>
           Bind mount the host path SRC on DEST, allowing device access

       <b>--dev-bind-try</b> <b>SRC</b> <b>DEST</b>
           Equal to <b>--dev-bind</b> but ignores non-existent SRC

       <b>--ro-bind</b> <b>SRC</b> <b>DEST</b>
           Bind mount the host path SRC readonly on DEST

       <b>--ro-bind-try</b> <b>SRC</b> <b>DEST</b>
           Equal to <b>--ro-bind</b> but ignores non-existent SRC

       <b>--remount-ro</b> <b>DEST</b>
           Remount the path DEST as readonly. It works only on the specified mount point, without changing any
           other mount point under the specified path

       <b>--overlay-src</b> <b>SRC</b>
           This option does nothing on its own, and must be followed by one of the other overlay options. It
           specifies a host path from which files should be read if they aren't present in a higher layer.

           This option can be used multiple times to provide multiple sources. The sources are overlaid in the
           order given, with the first source on the command line at the bottom of the stack: if a given path to
           be read exists in more than one source, the file is read from the last such source specified.

           (For readers familiar with overlayfs, note that this is the reverse of the order used by the kernel's
           lowerdir mount option.)

       <b>--overlay</b> <b>RWSRC</b> <b>WORKDIR</b> <b>DEST</b>

       <b>--tmp-overlay</b> <b>DEST</b>

       <b>--ro-overlay</b> <b>DEST</b>
           Use overlayfs to mount the host paths specified by RWSRC and all immediately preceding <b>--overlay-src</b>
           on DEST.  DEST will contain the union of all the files in all the layers.

           With --overlay all writes will go to RWSRC. Reads will come preferentially from RWSRC, and then from
           any <b>--overlay-src</b> paths.  WORKDIR must be an empty directory on the same filesystem as RWSRC, and is
           used internally by the kernel.

           With --tmp-overlay all writes will go to the tmpfs that hosts the sandbox root, in a location not
           accessible from either the host or the child process. Writes will therefore not be persisted across
           multiple runs.

           With --ro-overlay the filesystem will be mounted read-only. This option requires at least two
           <b>--overlay-src</b> to precede it.

           None of these options are available in the setuid version of bubblewrap. Using --ro-overlay or
           providing more than one <b>--overlay-src</b> requires a Linux kernel version of 4.0 or later.

           Due to limitations of overlayfs, no host directory given via --overlay-src or --overlay may be an
           ancestor of another, after resolving symlinks. Depending on version, the Linux kernel may or may not
           enforce this, but if not then overlayfs's behavior is undefined.

           For more information see the Overlay Filesystem documentation in the Linux kernel at
           https://www.kernel.org/doc/Documentation/filesystems/overlayfs.txt

       <b>--proc</b> <b>DEST</b>
           Mount procfs on DEST

       <b>--dev</b> <b>DEST</b>
           Mount new devtmpfs on DEST

       <b>--tmpfs</b> <b>DEST</b>
           Mount new tmpfs on DEST. If the previous option was <b>--perms</b>, it sets the mode of the tmpfs.
           Otherwise, the tmpfs has mode 0755. If the previous option was <b>--size</b>, it sets the size in bytes of
           the tmpfs. Otherwise, the tmpfs has the default size.

       <b>--mqueue</b> <b>DEST</b>
           Mount new mqueue on DEST

       <b>--dir</b> <b>DEST</b>
           Create a directory at DEST. If the directory already exists, its permissions are unmodified, ignoring
           <b>--perms</b> (use <b>--chmod</b> if the permissions of an existing directory need to be changed). If the
           directory is newly created and the previous option was <b>--perms</b>, it sets the mode of the directory.
           Otherwise, newly-created directories have mode 0755.

       <b>--file</b> <b>FD</b> <b>DEST</b>
           Copy from the file descriptor FD to DEST. If the previous option was <b>--perms</b>, it sets the mode of the
           new file. Otherwise, the file has mode 0666 (note that this is not the same as <b>--bind-data</b>).

       <b>--bind-data</b> <b>FD</b> <b>DEST</b>
           Copy from the file descriptor FD to a file which is bind-mounted on DEST. If the previous option was
           <b>--perms</b>, it sets the mode of the new file. Otherwise, the file has mode 0600 (note that this is not
           the same as <b>--file</b>).

       <b>--ro-bind-data</b> <b>FD</b> <b>DEST</b>
           Copy from the file descriptor FD to a file which is bind-mounted read-only on DEST. If the previous
           option was <b>--perms</b>, it sets the mode of the new file. Otherwise, the file has mode 0600 (note that
           this is not the same as <b>--file</b>).

       <b>--symlink</b> <b>SRC</b> <b>DEST</b>
           Create a symlink at DEST with target SRC.

           Since version 0.9.0, it is not considered to be an error if DEST already exists as a symbolic link
           and its target is exactly SRC.

           Before version 0.9.0, if DEST already existed, this would be treated as an error (even if its target
           was identical to SRC).

       <b>--chmod</b> <b>OCTAL</b> <b>PATH</b>
           Set the permissions of PATH, which must already exist, to OCTAL.

       Lockdown options:

       <b>--seccomp</b> <b>FD</b>
           Load and use seccomp rules from FD. The rules need to be in the form of a compiled cBPF program, as
           generated by seccomp_export_bpf. If this option is given more than once, only the last one is used.
           Use <b>--add-seccomp-fd</b> if multiple seccomp programs are needed.

       <b>--add-seccomp-fd</b> <b>FD</b>
           Load and use seccomp rules from FD. The rules need to be in the form of a compiled cBPF program, as
           generated by seccomp_export_bpf. This option can be repeated, in which case all the seccomp programs
           will be loaded in the order given (note that the kernel will evaluate them in reverse order, so the
           last program on the bwrap command-line is evaluated first). All of them, except possibly the last,
           must allow use of the PR_SET_SECCOMP prctl. This option cannot be combined with <b>--seccomp</b>.

       <b>--exec-label</b> <b>LABEL</b>
           Exec Label from the sandbox. On an SELinux system you can specify the SELinux context for the sandbox
           process(s).

       <b>--file-label</b> <b>LABEL</b>
           File label for temporary sandbox content. On an SELinux system you can specify the SELinux context
           for the sandbox content.

       <b>--block-fd</b> <b>FD</b>
           Block the sandbox on reading from FD until some data is available.

       <b>--userns-block-fd</b> <b>FD</b>
           Do not initialize the user namespace but wait on FD until it is ready. This allow external processes
           (like newuidmap/newgidmap) to setup the user namespace before it is used by the sandbox process.

       <b>--info-fd</b> <b>FD</b>
           Write information in JSON format about the sandbox to FD.

       <b>--json-status-fd</b> <b>FD</b>
           Multiple JSON documents are written to FD, one per line (<b>"JSON</b> <b>lines"</b> <b>format</b>[1]). Each line is a
           single JSON object. After <b>bwrap</b> has started the child process inside the sandbox, it writes an object
           with a child-pid member to the <b>--json-status-fd</b> (this duplicates the older <b>--info-fd</b>). The
           corresponding value is the process ID of the child process in the pid namespace from which <b>bwrap</b> was
           run. If available, the namespace IDs are also included in the object with the child-pid; again, this
           duplicates the older <b>--info-fd</b>. When the child process inside the sandbox exits, <b>bwrap</b> writes an
           object with an exit-code member, and then closes the <b>--json-status-fd</b>. The value corresponding to
           exit-code is the exit status of the child, in the usual shell encoding (n if it exited normally with
           status n, or 128+n if it was killed by signal n). Other members may be added to those objects in
           future versions of <b>bwrap</b>, and other JSON objects may be added before or after the current objects, so
           readers must ignore members and objects that they do not understand.

       <b>--new-session</b>
           Create a new terminal session for the sandbox (calls setsid()). This disconnects the sandbox from the
           controlling terminal which means the sandbox can't for instance inject input into the terminal.

           Note: In a general sandbox, if you don't use --new-session, it is recommended to use seccomp to
           disallow the TIOCSTI ioctl, otherwise the application can feed keyboard input to the terminal which
           can e.g. lead to out-of-sandbox command execution (see CVE-2017-5226).

       <b>--die-with-parent</b>
           Ensures child process (COMMAND) dies when bwrap's parent dies. Kills (SIGKILL) all bwrap sandbox
           processes in sequence from parent to child including COMMAND process when bwrap or bwrap's parent
           dies. See prctl, PR_SET_PDEATHSIG.

       <b>--as-pid-1</b>
           Do not create a process with PID=1 in the sandbox to reap child processes.

       <b>--cap-add</b> <b>CAP</b>
           Add the specified capability CAP, e.g. CAP_DAC_READ_SEARCH, when running as privileged user. It
           accepts the special value ALL to add all the permitted caps.

       <b>--cap-drop</b> <b>CAP</b>
           Drop the specified capability when running as privileged user. It accepts the special value ALL to
           drop all the caps. By default no caps are left in the sandboxed process. The <b>--cap-add</b> and <b>--cap-drop</b>
           options are processed in the order they are specified on the command line. Please be careful to the
           order they are specified.

</pre><h4><b>ENVIRONMENT</b></h4><pre>
       <b>HOME</b>
           Used as the cwd in the sandbox if <b>--chdir</b> has not been explicitly specified and the current cwd is
           not present inside the sandbox. The <b>--setenv</b> option can be used to override the value that is used
           here.

</pre><h4><b>EXIT</b> <b>STATUS</b></h4><pre>
       The <b>bwrap</b> command returns the exit status of the initial application process (pid 2 in the sandbox).

</pre><h4><b>NOTES</b></h4><pre>
        1. "JSON lines" format
           https://jsonlines.org/

Containers                                                                                              <u><a href="../man1/BWRAP.1.html">BWRAP</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>