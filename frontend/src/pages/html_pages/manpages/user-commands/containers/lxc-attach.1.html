<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>lxc-attach - start a process inside a running container.</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/lxc">lxc_6.0.3-1ubuntu1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       lxc-attach - start a process inside a running container.

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>lxc-attach</b> {-n, --name <u>name</u>} [-f, --rcfile <u>config_file</u>] [-a, --arch <u>arch</u>] [-e, --elevated-privileges
                  <u>privileges</u>] [-s, --namespaces <u>namespaces</u>] [-R, --remount-sys-proc] [--keep-env] [--clear-env]
                  [-v, --set-var <u>variable</u>] [--keep-var <u>variable</u>] [-u, --uid <u>uid</u>] [-g, --gid <u>gid</u>] [-- <u>command</u>]

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>lxc-attach</b>  runs  the  specified  <u>command</u> inside the container specified by <u>name</u>. The container has to be
       running already.

       If no <u>command</u> is specified, the current default shell of the user running <b>lxc-attach</b> will  be  looked  up
       inside the container and executed. This will fail if no such user exists inside the container or the con‐
       tainer does not have a working nsswitch mechanism.

       Previous  versions  of  <b>lxc-attach</b>  simply  attached to the specified namespaces of a container and ran a
       shell or the specified command without first allocating a pseudo terminal. This made them  vulnerable  to
       input faking via a TIOCSTI <b>ioctl</b> call after switching between userspace execution contexts with different
       privilege  levels.  Newer  versions  of <b>lxc-attach</b> will try to allocate a pseudo terminal file descriptor
       pair on the host and attach any standard file descriptors which refer to a terminal to the container side
       of the pseudo terminal before executing a shell or command. Note, that if none of the standard  file  de‐
       scriptors refer to a terminal <b>lxc-attach</b> will not try to allocate a pseudo terminal. Instead it will sim‐
       ply attach to the containers namespaces and run a shell or the specified command.

</pre><h4><b>OPTIONS</b></h4><pre>
       <b>-f,</b> <b>--rcfile</b> <u>config_file</u>
              Specify  the  configuration file to configure the virtualization and isolation functionalities for
              the container.

              This configuration file if present will be used even if there  is  already  a  configuration  file
              present in the previously created container (via lxc-create).

       <b>-a,</b> <b>--arch</b> <u>arch</u>
              Specify  the architecture which the kernel should appear to be running as to the command executed.
              This option will accept the same settings as the <b>lxc.arch</b> option in container configuration files,
              see <u><a href="../man5/lxc.conf.5.html">lxc.conf</a></u>(5). By default, the current architecture of the running container will be used.

       <b>-e,</b> <b>--elevated-privileges</b> <u>privileges</u>
              Do not drop privileges when running <u>command</u> inside the container. If this option is specified, the
              new process will <u>not</u> be added to the container's cgroup(s) and it will not drop  its  capabilities
              before executing.

              You  may  specify  privileges, in case you do not want to elevate all of them, as a pipe-separated
              list, e.g.  <u>CGROUP|LSM</u>. Allowed values are <u>CGROUP</u>, <u>CAP</u> and <u>LSM</u> representing  cgroup,  capabilities
              and restriction privileges respectively. (The pipe symbol needs to be escaped, e.g. <u>CGROUP\|LSM</u> or
              quoted, e.g.  <u>"CGROUP|LSM"</u>.)

              <u>Warning:</u>  This  may leak privileges into the container if the command starts subprocesses that re‐
              main active after the main process that was attached is terminated. The (re-)starting  of  daemons
              inside the container is problematic, especially if the daemon starts a lot of subprocesses such as
              <b>cron</b> or <b>sshd</b>.  <u>Use</u> <u>with</u> <u>great</u> <u>care.</u>

       <b>-s,</b> <b>--namespaces</b> <u>namespaces</u>
              Specify  the  namespaces  to attach to, as a pipe-separated list, e.g. <u>NETWORK|IPC</u>. Allowed values
              are <u>MOUNT</u>, <u>PID</u>, <u>UTSNAME</u>, <u>IPC</u>, <u>USER</u> and <u>NETWORK</u>. This allows one  to  change  the  context  of  the
              process  to  e.g.  the  network namespace of the container while retaining the other namespaces as
              those of the host. (The pipe symbol  needs  to  be  escaped,  e.g.   <u>MOUNT\|PID</u>  or  quoted,  e.g.
              <u>"MOUNT|PID"</u>.)

              <u>Important:</u> This option implies <b>-e</b>.

       <b>-R,</b> <b>--remount-sys-proc</b>
              When  using <b>-s</b> and the mount namespace is not included, this flag will cause <b>lxc-attach</b> to remount
              <u><a href="file:/proc">/proc</a></u> and <u><a href="file:/sys">/sys</a></u> to reflect the current other namespace contexts.

              Please see the <u>Notes</u> section for more details.

              This option will be ignored if one tries to attach to the mount namespace anyway.

       <b>--keep-env</b>
              Keep the current environment for attached programs. This is the current default behaviour  (as  of
              version  0.9),  but is is likely to change in the future, since this may leak undesirable informa‐
              tion into the container. If you rely on the environment being available for the attached  program,
              please  use this option to be future-proof. In addition to current environment variables, contain‐
              er=lxc will be set.

       <b>--clear-env</b>
              Clear the environment before attaching, so no undesired environment variables leak into  the  con‐
              tainer.  The  variable  container=lxc will be the only environment with which the attached program
              starts.

       <b>-v,</b> <b>--set-var</b> <u>variable</u>
              Set an additional environment variable that is seen by the attached program in the  container.  It
              is specified in the form of "VAR=VALUE", and can be specified multiple times.

       <b>--keep-var</b> <u>variable</u>
              Keep  a  specified environment variable. It can only be specified in conjunction with <u>--clear-env</u>,
              and can be specified multiple times.

       <b>-u,</b> <b>--uid</b> <u>uid</u>
              Executes the <u>command</u> with user ID (use numerical value) <u>uid</u> inside the container.

       <b>--g,</b> <b>--gid</b> <u>gid</u>
              Executes the <u>command</u> with group ID (use numerical value) <u>gid</u> inside the container.

</pre><h4><b>COMMON</b> <b>OPTIONS</b></h4><pre>
       These options are common to most of lxc commands.

       <b>-?,</b> <b>-h,</b> <b>--help</b>
              Print a longer usage message than normal.

       <b>--usage</b>
              Give the usage message

       <b>-q,</b> <b>--quiet</b>
              mute on

       <b>-P,</b> <b>--lxcpath=</b><u>PATH</u>
              Use an alternate container path. The default is /var/lib/lxc.

       <b>-o,</b> <b>--logfile=</b><u>FILE</u>
              Output to an alternate log <u>FILE</u>. The default is no log.

       <b>-l,</b> <b>--logpriority=</b><u>LEVEL</u>
              Set log priority to <u>LEVEL</u>. The default log priority is ERROR. Possible values are : FATAL,  ALERT,
              CRIT, WARN, ERROR, NOTICE, INFO, DEBUG, TRACE.

              Note  that  this option is setting the priority of the events log in the alternate log file. It do
              not have effect on the ERROR events log on stderr.

       <b>-n,</b> <b>--name=</b><u>NAME</u>
              Use container identifier <u>NAME</u>.  The container identifier format is an alphanumeric string.

       <b>--rcfile=</b><u>FILE</u>
              Specify the configuration file to configure the virtualization and isolation  functionalities  for
              the container.

              This  configuration  file  if  present  will be used even if there is already a configuration file
              present in the previously created container (via lxc-create).

       <b>--version</b>
              Show the version number.

</pre><h4><b>EXAMPLES</b></h4><pre>
       To spawn a new shell running inside an existing container, use

                 lxc-attach -n container

       To restart the cron service of a running Debian container, use

                 lxc-attach -n container -- <a href="file:/etc/init.d/cron">/etc/init.d/cron</a> restart

       To deactivate the network link eth1 of a running container that does not have the  NET_ADMIN  capability,
       use either the <b>-e</b> option to use increased capabilities, assuming the <b>ip</b> tool is installed:

                 lxc-attach -n container -e -- <a href="file:/sbin/ip">/sbin/ip</a> link delete eth1

       Or, alternatively, use the <b>-s</b> to use the tools installed on the host outside the container:

                 lxc-attach -n container -s NETWORK -- <a href="file:/sbin/ip">/sbin/ip</a> link delete eth1

</pre><h4><b>COMPATIBILITY</b></h4><pre>
       Attaching completely (including the pid and mount namespaces) to a container requires a kernel of version
       3.8  or higher, or a patched kernel, please see the lxc website for details. <b>lxc-attach</b> will fail in that
       case if used with an unpatched kernel of version 3.7 and prior.

       Nevertheless, it will succeed on an unpatched kernel of version 3.0 or higher if the <b>-s</b> option is used to
       restrict the namespaces that the process is to be attached to to one or more of <u>NETWORK</u>, <u>IPC</u> and <u>UTSNAME</u>.

       Attaching to user namespaces is supported by kernel 3.8 or higher with enabling user namespace.

</pre><h4><b>NOTES</b></h4><pre>
       The Linux <u><a href="file:/proc">/proc</a></u> and <u><a href="file:/sys">/sys</a></u> filesystems contain information about some quantities that are affected by name‐
       spaces, such as the directories named after process ids in <u><a href="file:/proc">/proc</a></u> or the network interface information  in
       <u><a href="file:/sys/class/net">/sys/class/net</a></u>.  The namespace of the process mounting the pseudo-filesystems determines what information
       is shown, <u>not</u> the namespace of the process accessing <u><a href="file:/proc">/proc</a></u> or <u><a href="file:/sys">/sys</a></u>.

       If one uses the <b>-s</b> option to only attach to the pid namespace of a container, but not its mount namespace
       (which will contain the <u><a href="file:/proc">/proc</a></u> of the container and not the host), the contents of <b><a href="file:/proc">/proc</a></b> will reflect that
       of the host and not the container. Analogously, the same  issue  occurs  when  reading  the  contents  of
       <u><a href="file:/sys/class/net">/sys/class/net</a></u> and attaching to just the network namespace.

       To  work around this problem, the <b>-R</b> flag provides the option to remount <u><a href="file:/proc">/proc</a></u> and <u><a href="file:/sys">/sys</a></u> in order for them
       to reflect the network/pid namespace context of the attached process. In order not to interfere with  the
       host's  actual  filesystem,  the  mount namespace will be unshared (like <b>lxc-unshare</b> does) before this is
       done, essentially giving the process a new mount namespace, which is identical to the hosts's mount name‐
       space except for the <u><a href="file:/proc">/proc</a></u> and <u><a href="file:/sys">/sys</a></u> filesystems.

       Previous versions of <b>lxc-attach</b> suffered a bug whereby a user could  attach  to  a  containers  namespace
       without  being  placed  in  a writeable cgroup for some critical subsystems. Newer versions of <b>lxc-attach</b>
       will check whether a user is in a writeable cgroup for those critical subsystems. <b>lxc-attach</b>  might  thus
       fail unexpectedly for some users (E.g. on systems where an unprivileged user is not placed in a writeable
       cgroup in critical subsystems on login.). However, this behavior is correct and more secure.

</pre><h4><b>SECURITY</b></h4><pre>
       The  <b>-e</b>  and <b>-s</b> options should be used with care, as it may break the isolation of the containers if used
       improperly.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man7/lxc.7.html">lxc</a></b>(7), <b><a href="../man1/lxc-create.1.html">lxc-create</a></b>(1), <b><a href="../man1/lxc-copy.1.html">lxc-copy</a></b>(1), <b><a href="../man1/lxc-destroy.1.html">lxc-destroy</a></b>(1), <b><a href="../man1/lxc-start.1.html">lxc-start</a></b>(1), <b><a href="../man1/lxc-stop.1.html">lxc-stop</a></b>(1),  <b><a href="../man1/lxc-execute.1.html">lxc-execute</a></b>(1),  <b>lxc-con‐</b>
       <b><a href="../man1/sole.1.html">sole</a></b>(1),  <b><a href="../man1/lxc-monitor.1.html">lxc-monitor</a></b>(1),  <b><a href="../man1/lxc-wait.1.html">lxc-wait</a></b>(1),  <b><a href="../man1/lxc-cgroup.1.html">lxc-cgroup</a></b>(1),  <b><a href="../man1/lxc-ls.1.html">lxc-ls</a></b>(1),  <b><a href="../man1/lxc-info.1.html">lxc-info</a></b>(1),  <b><a href="../man1/lxc-freeze.1.html">lxc-freeze</a></b>(1), <b>lxc-un‐</b>
       <b><a href="../man1/freeze.1.html">freeze</a></b>(1), <b><a href="../man1/lxc-attach.1.html">lxc-attach</a></b>(1), <b><a href="../man5/lxc.conf.5.html">lxc.conf</a></b>(5)

                                                   2025-05-10                                      <u><a href="../man1/lxc-attach.1.html">lxc-attach</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>