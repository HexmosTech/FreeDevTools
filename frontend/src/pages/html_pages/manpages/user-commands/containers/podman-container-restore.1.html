<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>podman-container-restore - Restore one or more containers from a checkpoint</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/podman">podman_5.4.1+ds1-1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       podman-container-restore - Restore one or more containers from a checkpoint

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>podman</b> <b>container</b> <b>restore</b> [<u>options</u>] <u>name</u> [...]

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>podman</b>  <b>container</b>  <b>restore</b>  restores  a  container  from  a container checkpoint or checkpoint image. The
       <u>container</u> <u>IDs</u>, <u>image</u> <u>IDs</u> or <u>names</u> are used as input.

</pre><h4><b>OPTIONS</b></h4><pre>
   <b>--all,</b> <b>-a</b>
       Restore all checkpointed <u>containers</u>.
       The default is <b>false</b>.
       <u>IMPORTANT:</u> <u>This</u> <u>OPTION</u> <u>does</u> <u>not</u> <u>need</u> <u>a</u> <u>container</u> <u>name</u> <u>or</u> <u>ID</u> <u>as</u> <u>input</u> <u>argument.</u>

   <b>--file-locks</b>
       Restore a <u>container</u> with file locks. This option is required to restore  file  locks  from  a  checkpoint
       image.  If  the  checkpoint  image  does  not contain file locks, this option is ignored. Defaults to not
       restoring file locks.
       The default is <b>false</b>.

   <b>--ignore-rootfs</b>
       If a <u>container</u> is restored from a checkpoint tar.gz file it is possible that it also  contains  all  root
       file-system  changes. With <b>--ignore-rootfs</b> it is possible to explicitly disable applying these root file-
       system changes to the restored <u>container</u>.
       The default is <b>false</b>.
       <u>IMPORTANT:</u> <u>This</u> <u>OPTION</u> <u>is</u> <u>only</u> <u>available</u> <u>in</u> <u>combination</u> <u>with</u> <b>--import,</b> <b>-i</b><u>.</u>

   <b>--ignore-static-ip</b>
       If the <u>container</u> was started with <b>--ip</b> the restored <u>container</u> also tries  to  use  that  IP  address  and
       restore  fails if that IP address is already in use. This can happen, if a <u>container</u> is restored multiple
       times from an exported checkpoint with <b>--name,</b> <b>-n</b>.

       Using <b>--ignore-static-ip</b> tells Podman to ignore the IP address if it  was  configured  with  <b>--ip</b>  during
       <u>container</u> creation.

       The default is <b>false</b>.

   <b>--ignore-static-mac</b>
       If the <u>container</u> was started with <b>--mac-address</b> the restored <u>container</u> also tries to use that MAC address
       and  restore  fails  if  that  MAC address is already in use. This can happen, if a <u>container</u> is restored
       multiple times from an exported checkpoint with <b>--name,</b> <b>-n</b>.

       Using <b>--ignore-static-mac</b> tells Podman to ignore the MAC address if it was configured with  <b>--mac-address</b>
       during <u>container</u> creation.

       The default is <b>false</b>.

   <b>--ignore-volumes</b>
       This  option  must be used in combination with the <b>--import,</b> <b>-i</b> option.  When restoring <u>containers</u> from a
       checkpoint tar.gz file with this option, the content of associated volumes are not restored.
       The default is <b>false</b>.

   <b>--import,</b> <b>-i=</b><u><b>file</b></u>
       Import a checkpoint tar.gz file, which was exported by Podman. This can be used to import a  checkpointed
       <u>container</u> from another host.
       <u>IMPORTANT:</u> <u>This</u> <u>OPTION</u> <u>does</u> <u>not</u> <u>need</u> <u>a</u> <u>container</u> <u>name</u> <u>or</u> <u>ID</u> <u>as</u> <u>input</u> <u>argument.</u>

       During  the  import  of a checkpoint file Podman selects the same container runtime which was used during
       checkpointing. This is especially important if a specific (non-default) container runtime  was  specified
       during  container  creation.  Podman  also  aborts  the restore if the container runtime specified during
       restore does not much the container runtime used for container creation.

   <b>--import-previous=</b><u><b>file</b></u>
       Import a pre-checkpoint tar.gz file which was exported by Podman. This option must be  used  with  <b>-i</b>  or
       <b>--import</b>. It only works on <b>runc</b> <b>1.0-rc3</b> or <b>higher</b>.  <u>IMPORTANT:</u> <u>This</u> <u>OPTION</u> <u>is</u> <u>not</u> <u>supported</u> <u>on</u> <u>the</u> <u>remote</u>
       <u>client,</u> <u>including</u> <u>Mac</u> <u>and</u> <u>Windows</u> <u>(excluding</u> <u>WSL2)</u> <u>machines.</u>

   <b>--keep,</b> <b>-k</b>
       Keep  all  temporary  log and statistics files created by <b>CRIU</b> during checkpointing as well as restoring.
       These files are not deleted if restoring fails for further debugging. If restoring succeeds  these  files
       are  theoretically  not  needed,  but  if  these  files  are needed Podman can keep the files for further
       analysis. This includes the checkpoint directory with all files created during  checkpointing.  The  size
       required  by  the  checkpoint  directory  is  roughly  the  same  as the amount of memory required by the
       processes in the checkpointed <u>container</u>.
       Without the <b>--keep</b>, <b>-k</b> option, the checkpoint is consumed and cannot be used again.
       The default is <b>false</b>.

   <b>--latest,</b> <b>-l</b>
       Instead of providing the <u>container</u> <u>ID</u> or <u>name</u>, use the last created  <u>container</u>.  The  default  is  <b>false</b>.
       <u>IMPORTANT:</u>  <u>This</u>  <u>OPTION</u>  <u>is</u>  <u>not</u>  <u>available</u>  <u>with</u>  <u>the</u>  <u>remote</u>  <u>Podman</u> <u>client,</u> <u>including</u> <u>Mac</u> <u>and</u> <u>Windows</u>
       <u>(excluding</u> <u>WSL2)</u> <u>machines.</u> <u>This</u> <u>OPTION</u> <u>does</u> <u>not</u> <u>need</u> <u>a</u> <u>container</u> <u>name</u> <u>or</u> <u>ID</u> <u>as</u> <u>input</u> <u>argument.</u>

   <b>--name,</b> <b>-n=</b><u><b>name</b></u>
       If a <u>container</u> is restored from a checkpoint tar.gz file it is possible to rename  it  with  <b>--name,</b>  <b>-n</b>.
       This way it is possible to restore a <u>container</u> from a checkpoint multiple times with different names.

       If  the <b>--name,</b> <b>-n</b> option is used, Podman does not attempt to assign the same IP address to the <u>container</u>
       it was using before checkpointing as each IP address can only be used once, and  the  restored  <u>container</u>
       has  another  IP  address.  This  also  means  that  <b>--name,</b> <b>-n</b> cannot be used in combination with <b>--tcp-</b>
       <b>established</b>.
       <u>IMPORTANT:</u> <u>This</u> <u>OPTION</u> <u>is</u> <u>only</u> <u>available</u> <u>for</u> <u>a</u> <u>checkpoint</u> <u>image</u> <u>or</u> <u>in</u> <u>combination</u> <u>with</u> <b>--import,</b> <b>-i</b><u>.</u>

   <b>--pod=</b><u><b>name</b></u>
       Restore a container into the pod <u>name</u>. The destination  pod  for  this  restore  has  to  have  the  same
       namespaces shared as the pod this container was checkpointed from (see **podman pod create --share.
       <u>IMPORTANT:</u> <u>This</u> <u>OPTION</u> <u>is</u> <u>only</u> <u>available</u> <u>for</u> <u>a</u> <u>checkpoint</u> <u>image</u> <u>or</u> <u>in</u> <u>combination</u> <u>with</u> <b>--import,</b> <b>-i</b><u>.</u>

       This option requires at least CRIU 3.16.

   <b>--print-stats</b>
       Print  out  statistics  about  restoring  the  container(s).  The  output is rendered in a JSON array and
       contains information about how much time different restore  operations  required.  Many  of  the  restore
       statistics  are  created by CRIU and just passed through to Podman. The following information is provided
       in the JSON array:

              • <b>podman_restore_duration</b>: Overall time (in microseconds) needed to restore all checkpoints.

              • <b>runtime_restore_duration</b>: Time (in microseconds) the container runtime  needed  to  restore  the
                checkpoint.

              • <b>forking_time</b>:  Time (in microseconds) CRIU needed to create (fork) all processes in the restored
                container (measured by CRIU).

              • <b>restore_time</b>: Time (in microseconds) CRIU needed to  restore  all  processes  in  the  container
                (measured by CRIU).

              • <b>pages_restored</b>: Number of memory pages restored (measured by CRIU).

       The default is <b>false</b>.

   <b>--publish,</b> <b>-p=</b><u><b>port</b></u>
       Replaces the ports that the <u>container</u> publishes, as configured during the initial <u>container</u> start, with a
       new set of port forwarding rules.

       For more details, see <b>podman</b> <b>run</b> <b>--publish</b>.

   <b>--tcp-established</b>
       Restore  a  <u>container</u>  with established TCP connections. If the checkpoint image contains established TCP
       connections, this option  is  required  during  restore.   If  the  checkpoint  image  does  not  contain
       established TCP connections this option is ignored. Defaults to not restoring <u>containers</u> with established
       TCP connections.
       The default is <b>false</b>.

</pre><h4><b>EXAMPLE</b></h4><pre>
       Restore the container "mywebserver".

       # podman container restore mywebserver

       Import a checkpoint file and a pre-checkpoint file.

       # podman container restore --import-previous pre-checkpoint.tar.gz --import checkpoint.tar.gz

       Start  the  container  "mywebserver".  Make  a  checkpoint  of  the  container and export it. Restore the
       container with other port ranges from the exported file.

       $ podman run --rm -p 2345:80 -d webserver
       # podman container checkpoint -l --export=dump.tar
       # podman container restore -p 5432:8080 --import=dump.tar

       Start a container with the name "foobar-1". Create a checkpoint image  "foobar-checkpoint".  Restore  the
       container from the checkpoint image with a different name.

       # podman run --name foobar-1 -d webserver
       # podman container checkpoint --create-image foobar-checkpoint foobar-1
       # podman inspect foobar-checkpoint
       # podman container restore --name foobar-2 foobar-checkpoint
       # podman container restore --name foobar-3 foobar-checkpoint

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man1/podman.1.html">podman</a>(1)</b>, <b><a href="../man1/podman-container-checkpoint.1.html">podman-container-checkpoint</a>(1)</b>, <b><a href="../man1/podman-run.1.html">podman-run</a>(1)</b>, <b><a href="../man1/podman-pod-create.1.html">podman-pod-create</a>(1)</b>, <b><a href="../man8/criu.8.html">criu</a>(8)</b>

</pre><h4><b>HISTORY</b></h4><pre>
       September 2018, Originally compiled by Adrian Reber <a href="mailto:areber@redhat.com">areber@redhat.com</a> ⟨<a href="mailto:areber@redhat.com">mailto:areber@redhat.com</a>⟩

                                                                                     <u><a href="../man1/podman-container-restore.1.html">podman-container-restore</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>