<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>podman-update - Update the configuration of a given container</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/podman">podman_5.4.1+ds1-1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       podman-update - Update the configuration of a given container

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>podman</b> <b>update</b> [<u>options</u>] <u>container</u>

       <b>podman</b> <b>container</b> <b>update</b> [<u>options</u>] <u>container</u>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       Updates the configuration of an existing container, allowing changes to resource limits and healthchecks.

</pre><h4><b>OPTIONS</b></h4><pre>
   <b>--blkio-weight=</b><u><b>weight</b></u>
       Block IO relative weight. The <u>weight</u> is a value between <b>10</b> and <b>1000</b>.

       This option is not supported on cgroups V1 rootless systems.

   <b>--blkio-weight-device=</b><u><b>device:weight</b></u>
       Block IO relative device weight.

   <b>--cpu-period=</b><u><b>limit</b></u>
       Set the CPU period for the Completely Fair Scheduler (CFS), which is a duration in microseconds. Once the
       container's CPU quota is used up, it will not be scheduled to run until the current period ends. Defaults
       to 100000 microseconds.

       On  some  systems,  changing the resource limits may not be allowed for non-root users. For more details,
       see         https://github.com/containers/podman/blob/main/troubleshooting.md#26-running-containers-with-
       resource-limits-fails-with-a-permissions-error

       This option is not supported on cgroups V1 rootless systems.

   <b>--cpu-quota=</b><u><b>limit</b></u>
       Limit the CPU Completely Fair Scheduler (CFS) quota.

       Limit  the  container's  CPU usage. By default, containers run with the full CPU resource. The limit is a
       number in microseconds. If a number is provided, the container is allowed to use that much CPU time until
       the CPU period ends (controllable via <b>--cpu-period</b>).

       On some systems, changing the resource limits may not be allowed for non-root users.  For  more  details,
       see         https://github.com/containers/podman/blob/main/troubleshooting.md#26-running-containers-with-
       resource-limits-fails-with-a-permissions-error

       This option is not supported on cgroups V1 rootless systems.

   <b>--cpu-rt-period=</b><u><b>microseconds</b></u>
       Limit the CPU real-time period in microseconds.

       Limit the container's Real Time CPU usage. This option tells the kernel to restrict the container's  Real
       Time CPU usage to the period specified.

       This option is only supported on cgroups V1 rootful systems.

   <b>--cpu-rt-runtime=</b><u><b>microseconds</b></u>
       Limit the CPU real-time runtime in microseconds.

       Limit  the  containers Real Time CPU usage. This option tells the kernel to limit the amount of time in a
       given CPU period Real Time tasks may consume. Ex: Period of 1,000,000us and Runtime  of  950,000us  means
       that this container can consume 95% of available CPU and leave the remaining 5% to normal priority tasks.

       The sum of all runtimes across containers cannot exceed the amount allotted to the parent cgroup.

       This option is only supported on cgroups V1 rootful systems.

   <b>--cpu-shares,</b> <b>-c=</b><u><b>shares</b></u>
       CPU shares (relative weight).

       By  default,  all  containers  get  the same proportion of CPU cycles. This proportion can be modified by
       changing the container's CPU share  weighting  relative  to  the  combined  weight  of  all  the  running
       containers.  Default weight is <b>1024</b>.

       The  proportion  only  applies when CPU-intensive processes are running.  When tasks in one container are
       idle, other containers can use the left-over CPU time. The actual amount of CPU time varies depending  on
       the number of containers running on the system.

       For  example,  consider  three  containers,  one  has a cpu-share of 1024 and two others have a cpu-share
       setting of 512. When processes in all three containers attempt to use 100% of CPU,  the  first  container
       receives  50%  of  the total CPU time. If a fourth container is added with a cpu-share of 1024, the first
       container only gets 33% of the CPU. The remaining containers receive 16.5%, 16.5% and 33% of the CPU.

       On a multi-core system, the shares of CPU time are distributed over all CPU cores. Even if a container is
       limited to less than 100% of CPU time, it can use 100% of each individual CPU core.

       For example, consider a system with more than three cores.  If the container <u>C0</u> is  started  with  <b>--cpu-</b>
       <b>shares=512</b>  running  one  process, and another container <u>C1</u> with <b>--cpu-shares=1024</b> running two processes,
       this can result in the following division of CPU shares:

       ┌─────┬───────────┬─────┬──────────────┐
       │ <b>PID</b> │ <b>container</b> │ <b>CPU</b> │ <b>CPU</b> <b>share</b>    │
       ├─────┼───────────┼─────┼──────────────┤
       │ 100 │ C0        │ 0   │ 100% of CPU0 │
       ├─────┼───────────┼─────┼──────────────┤
       │ 101 │ C1        │ 1   │ 100% of CPU1 │
       ├─────┼───────────┼─────┼──────────────┤
       │ 102 │ C1        │ 2   │ 100% of CPU2 │
       └─────┴───────────┴─────┴──────────────┘

       On some systems, changing the resource limits may not be allowed for non-root users.  For  more  details,
       see         https://github.com/containers/podman/blob/main/troubleshooting.md#26-running-containers-with-
       resource-limits-fails-with-a-permissions-error

       This option is not supported on cgroups V1 rootless systems.

   <b>--cpus=</b><u><b>number</b></u>
       Number of CPUs. The default is <u>0.0</u> which means no limit. This is shorthand for  <b>--cpu-period</b>  and  <b>--cpu-</b>
       <b>quota</b>, therefore the option cannot be specified with <b>--cpu-period</b> or <b>--cpu-quota</b>.

       On  some  systems,  changing  the CPU limits may not be allowed for non-root users. For more details, see
       https://github.com/containers/podman/blob/main/troubleshooting.md#26-running-containers-with-resource-
       limits-fails-with-a-permissions-error

       This option is not supported on cgroups V1 rootless systems.

   <b>--cpuset-cpus=</b><u><b>number</b></u>
       CPUs in which to allow execution. Can be specified as a comma-separated list (e.g. <b>0,1</b>), as a range (e.g.
       <b>0-3</b>), or any combination thereof (e.g. <b>0-3,7,11-15</b>).

       On some systems, changing the resource limits may not be allowed for non-root users.  For  more  details,
       see         https://github.com/containers/podman/blob/main/troubleshooting.md#26-running-containers-with-
       resource-limits-fails-with-a-permissions-error

       This option is not supported on cgroups V1 rootless systems.

   <b>--cpuset-mems=</b><u><b>nodes</b></u>
       Memory nodes (MEMs) in which to allow execution (0-3, 0,1). Only effective on NUMA systems.

       If there are four memory nodes on the system (0-3), use <b>--cpuset-mems=0,1</b> then processes in the container
       only uses memory from the first two memory nodes.

       On some systems, changing the resource limits may not be allowed for non-root users.  For  more  details,
       see         https://github.com/containers/podman/blob/main/troubleshooting.md#26-running-containers-with-
       resource-limits-fails-with-a-permissions-error

       This option is not supported on cgroups V1 rootless systems.

   <b>--device-read-bps=</b><u><b>path:rate</b></u>
       Limit read rate (in bytes per second) from a device (e.g. <b>--device-read-bps=/dev/sda:1mb</b>).

       On some systems, changing the resource limits may not be allowed for non-root users.  For  more  details,
       see         https://github.com/containers/podman/blob/main/troubleshooting.md#26-running-containers-with-
       resource-limits-fails-with-a-permissions-error

       This option is not supported on cgroups V1 rootless systems.

   <b>--device-read-iops=</b><u><b>path:rate</b></u>
       Limit read rate (in IO operations per second) from a device (e.g. <b>--device-read-iops=/dev/sda:1000</b>).

       On some systems, changing the resource limits may not be allowed for non-root users.  For  more  details,
       see         https://github.com/containers/podman/blob/main/troubleshooting.md#26-running-containers-with-
       resource-limits-fails-with-a-permissions-error

       This option is not supported on cgroups V1 rootless systems.

   <b>--device-write-bps=</b><u><b>path:rate</b></u>
       Limit write rate (in bytes per second) to a device (e.g. <b>--device-write-bps=/dev/sda:1mb</b>).

       On some systems, changing the resource limits may not be allowed for non-root users.  For  more  details,
       see         https://github.com/containers/podman/blob/main/troubleshooting.md#26-running-containers-with-
       resource-limits-fails-with-a-permissions-error

       This option is not supported on cgroups V1 rootless systems.

   <b>--device-write-iops=</b><u><b>path:rate</b></u>
       Limit write rate (in IO operations per second) to a device (e.g. <b>--device-write-iops=/dev/sda:1000</b>).

       On some systems, changing the resource limits may not be allowed for non-root users.  For  more  details,
       see         https://github.com/containers/podman/blob/main/troubleshooting.md#26-running-containers-with-
       resource-limits-fails-with-a-permissions-error

       This option is not supported on cgroups V1 rootless systems.

   <b>--health-cmd=</b><u><b>"command"</b></u> <b>|</b> <u><b>'["command",</b></u> <u><b>arg1</b></u> <u><b>,</b></u> <u><b>...]'</b></u>
       Set or alter a healthcheck command for a container. The command is a command to be  executed  inside  the
       container  that determines the container health. The command is required for other healthcheck options to
       be applied. A value of <b>none</b> disables existing healthchecks.

       Multiple options can be passed in the form of a JSON array; otherwise, the command is interpreted  as  an
       argument to <b><a href="file:/bin/sh">/bin/sh</a></b> <b>-c</b>.

   <b>--health-interval=</b><u><b>interval</b></u>
       Set  an  interval  for  the healthchecks. An <u>interval</u> of <b>disable</b> results in no automatic timer setup. The
       default is <b>30s</b>.

       Changing this setting resets the timer.

   <b>--health-log-destination=</b><u><b>directory_path</b></u>
       Set the destination of the HealthCheck log. Directory path, local or events_logger (local  use  container
       state file) (Default: local)

              • <b>local</b>:   (default)   HealthCheck   logs   are   stored  in  overlay  containers.  (For  example:
                <b>$runroot/healthcheck.log</b>)

              • <b>directory</b>: creates a log file named <b>&lt;container-ID&gt;-healthcheck.log</b> with HealthCheck logs in  the
                specified directory.

              • <b>events_logger</b>:  The  log  will  be  written with logging mechanism set by events_logger. It also
                saves the log to a default directory, for performance on a system with a large number of logs.

       Warning: Changing this setting may cause the loss of previous logs.

   <b>--health-max-log-count=</b><u><b>number</b></u> <u><b>of</b></u> <u><b>stored</b></u> <u><b>logs</b></u>
       Set maximum number of attempts in the HealthCheck log file.  ('0'  value  means  an  infinite  number  of
       attempts in the log file) (Default: 5 attempts)

   <b>--health-max-log-size=</b><u><b>size</b></u> <u><b>of</b></u> <u><b>stored</b></u> <u><b>logs</b></u>
       Set  maximum  length  in  characters  of stored HealthCheck log. ("0" value means an infinite log length)
       (Default: 500 characters)

   <b>--health-on-failure=</b><u><b>action</b></u>
       Action to take once the container transitions to an unhealthy state.  The default is <b>none</b>.

              • <b>none</b>: Take no action.

              • <b>kill</b>: Kill the container.

              • <b>restart</b>: Restart the container.  Do not combine the <b>restart</b>  action  with  the  <b>--restart</b>  flag.
                When  running  inside  of a systemd unit, consider using the <b>kill</b> or <b>stop</b> action instead to make
                use of systemd's restart policy.

              • <b>stop</b>: Stop the container.

   <b>--health-retries=</b><u><b>retries</b></u>
       The number of retries allowed before a healthcheck is considered to be unhealthy. The default value is <b>3</b>.

   <b>--health-start-period=</b><u><b>period</b></u>
       The initialization time needed for a container to bootstrap. The value can be expressed  in  time  format
       like <b>2m3s</b>. The default value is <b>0s</b>.

       Note:  The  health  check  command  is executed as soon as a container is started, if the health check is
       successful the container's health state will be updated to <b>healthy</b>. However, if the health  check  fails,
       the health state will stay as <b>starting</b> until either the health check is successful or until the <b>--health-</b>
       <b>start-period</b>  time  is  over.  If  the health check command fails after the <b>--health-start-period</b> time is
       over, the health state will be updated to <b>unhealthy</b>.  The health check command is  executed  periodically
       based on the value of <b>--health-interval</b>.

   <b>--health-startup-cmd=</b><u><b>"command"</b></u> <b>|</b> <u><b>'["command",</b></u> <u><b>arg1</b></u> <u><b>,</b></u> <u><b>...]'</b></u>
       Set  a  startup healthcheck command for a container. This command is executed inside the container and is
       used to gate the regular healthcheck. When the startup command succeeds, the regular  healthcheck  begins
       and  the  startup  healthcheck ceases. Optionally, if the command fails for a set number of attempts, the
       container is restarted. A startup healthcheck can be used to ensure  that  containers  with  an  extended
       startup period are not marked as unhealthy until they are fully started. Startup healthchecks can only be
       used when a regular healthcheck (from the container's image or the <b>--health-cmd</b> option) is also set.

   <b>--health-startup-interval=</b><u><b>interval</b></u>
       Set  an interval for the startup healthcheck. An <u>interval</u> of <b>disable</b> results in no automatic timer setup.
       The default is <b>30s</b>.

       Changing this setting resets the timer, depending on the state of the container.

   <b>--health-startup-retries=</b><u><b>retries</b></u>
       The number of attempts allowed before the startup healthcheck restarts the container. If set  to  <b>0</b>,  the
       container is never restarted. The default is <b>0</b>.

   <b>--health-startup-success=</b><u><b>retries</b></u>
       The  number  of  successful  runs  required  before  the  startup  healthcheck  succeeds  and the regular
       healthcheck begins. A value of <b>0</b> means that any success begins the regular healthcheck. The default is <b>0</b>.

   <b>--health-startup-timeout=</b><u><b>timeout</b></u>
       The maximum time a startup healthcheck command has to complete before it is marked as failed.  The  value
       can be expressed in a time format like <b>2m3s</b>. The default value is <b>30s</b>.

   <b>--health-timeout=</b><u><b>timeout</b></u>
       The maximum time allowed to complete the healthcheck before an interval is considered failed. Like start-
       period, the value can be expressed in a time format such as <b>1m22s</b>. The default value is <b>30s</b>.

   <b>--memory,</b> <b>-m=</b><u><b>number[unit]</b></u>
       Memory limit. A <u>unit</u> can be <b>b</b> (bytes), <b>k</b> (kibibytes), <b>m</b> (mebibytes), or <b>g</b> (gibibytes).

       Allows  the memory available to a container to be constrained. If the host supports swap memory, then the
       <b>-m</b> memory setting can be larger than physical RAM. If a limit of 0  is  specified  (not  using  <b>-m</b>),  the
       container's  memory  is  not  limited.  The actual limit may be rounded up to a multiple of the operating
       system's page size (the value is very large, that's millions of trillions).

       This option is not supported on cgroups V1 rootless systems.

   <b>--memory-reservation=</b><u><b>number[unit]</b></u>
       Memory soft limit. A <u>unit</u> can be <b>b</b> (bytes), <b>k</b> (kibibytes), <b>m</b> (mebibytes), or <b>g</b> (gibibytes).

       After setting memory reservation, when the system detects memory contention or low memory, containers are
       forced to restrict their consumption to their reservation.  So  always  set  the  value  below  <b>--memory</b>,
       otherwise the hard limit takes precedence. By default, memory reservation is the same as memory limit.

       This option is not supported on cgroups V1 rootless systems.

   <b>--memory-swap=</b><u><b>number[unit]</b></u>
       A  limit  value  equal  to memory plus swap.  A <u>unit</u> can be <b>b</b> (bytes), <b>k</b> (kibibytes), <b>m</b> (mebibytes), or <b>g</b>
       (gibibytes).

       Must be used with the <b>-m</b> (<b>--memory</b>) flag.  The argument value must be larger than that of
        <b>-m</b> (<b>--memory</b>) By default, it is set to double the value of <b>--memory</b>.

       Set <u>number</u> to <b>-1</b> to enable unlimited swap.

       This option is not supported on cgroups V1 rootless systems.

   <b>--memory-swappiness=</b><u><b>number</b></u>
       Tune a container's memory swappiness behavior. Accepts an integer between <u>0</u> and <u>100</u>.

       This flag is only supported on cgroups V1 rootful systems.

   <b>--no-healthcheck</b>
       Disable any defined healthchecks for container.

   <b>--pids-limit=</b><u><b>limit</b></u>
       Tune the container's pids limit. Set to <b>-1</b> to have unlimited pids for the container. The default is  <b>2048</b>
       on systems that support "pids" cgroup controller.

   <b>--restart=</b><u><b>policy</b></u>
       Restart  policy  to  follow  when containers exit.  Restart policy does not take effect if a container is
       stopped via the <b>podman</b> <b>kill</b> or <b>podman</b> <b>stop</b> commands.

       Valid <u>policy</u> values are:

              • <b>no</b>                       : Do not restart containers on exit

              • <b>never</b>                    : Synonym for <b>no</b>; do not restart containers on exit

              • <b>on-failure[:max_retries]</b> : Restart containers when they exit with a non-zero exit code, retrying
                indefinitely or until the optional <u>max_retries</u> count is hit

              • <b>always</b>                   : Restart containers when they exit,  regardless  of  status,  retrying
                indefinitely

              • <b>unless-stopped</b>           : Identical to <b>always</b>

       Podman  provides  a  systemd  unit file, podman-restart.service, which restarts containers after a system
       reboot.

       When running containers in systemd services, use the restart functionality provided by systemd.  In other
       words, do not use this option in a container unit, instead set the  <b>Restart=</b>  systemd  directive  in  the
       <b>[Service]</b> section.  See <b><a href="../man5/podman-systemd.unit.5.html">podman-systemd.unit</a></b>(5) and <b><a href="../man5/systemd.service.5.html">systemd.service</a></b>(5).

</pre><h4><b>EXAMPLEs</b></h4><pre>
       Update a container with a new cpu quota and period.

       podman update --cpus=5 myCtr

       Update a container with all available options for cgroups v2.

       podman update --cpus 5 --cpuset-cpus 0 --cpu-shares 123 --cpuset-mems 0 --memory 1G --memory-swap 2G --memory-reservation 2G --blkio-weight-device /dev/zero:123 --blkio-weight 123 --device-read-bps /dev/zero:10mb --device-write-bps /dev/zero:10mb --device-read-iops /dev/zero:1000 --device-write-iops /dev/zero:1000 --pids-limit 123 ctrID

       Update a container with all available options for cgroups v1.

       podman update --cpus 5 --cpuset-cpus 0 --cpu-shares 123 --cpuset-mems 0 --memory 1G --memory-swap 2G --memory-reservation 2G --memory-swappiness 50 --pids-limit 123 ctrID

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man1/podman.1.html">podman</a>(1)</b>, <b><a href="../man1/podman-create.1.html">podman-create</a>(1)</b>, <b><a href="../man1/podman-run.1.html">podman-run</a>(1)</b>

</pre><h4><b>HISTORY</b></h4><pre>
       August 2022, Originally written by Charlie Doern <a href="mailto:cdoern@redhat.com">cdoern@redhat.com</a> ⟨<a href="mailto:cdoern@redhat.com">mailto:cdoern@redhat.com</a>⟩

                                                                                                <u><a href="../man1/podman-update.1.html">podman-update</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>