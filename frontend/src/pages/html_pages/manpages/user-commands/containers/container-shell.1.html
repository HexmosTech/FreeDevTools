<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>container-shell - Manage systemd-nspawn containers (shell)</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/open-infrastructure-compute-tools">open-infrastructure-compute-tools_20250126-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       container-shell - Manage systemd-nspawn containers (shell)

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>container-shell</b> ['OPTIONS']
       <b>cntsh</b> ['OPTIONS']

</pre><h4><b>DESCRIPTION</b></h4><pre>
       compute-tools provides the system integration for managing containers using systemd-nspawn.

   <b>Usage</b>
       Although the <b>container-shell</b> can be started from a running system like any other program, the main intend
       is  to  use the <b>container-shell</b> via SSH. That way otherwise unprivileged users have possibility to manage
       containers without needing a regular shell login on the container server.

       For usage over SSH a unprivileged user should be created:

         sudo adduser --gecos "compute-tools,,," \
           --home /var/lib/open-infrastructure/container-shell \
           --shell /usr/bin/container-shell

       The     container-shell     can     then     be     allowed     for     specific     SSH     keys     via
       /var/lib/compute-tools/container-shell/.ssh/authorized_keys like so:

         command="/usr/bin/container-shell",no-port-forwarding,no-X11-forwarding,\
           no-agent-forwarding,no-pty ssh-ed25519 [...]

   <b>Restricted</b> <b>shell</b>
       The  container-shell  by  default  grants  any  user that has access to it to use all available container
       commands.

       Through two corresponding environment variables users can  be  allowed  or  disallowed  to  use  specific
       container  commands.   In  connection  with  SSH this makes it possible to grant certain SSH keys (and by
       that, users) privileges to operate container servers without having to give them  root  access,  a  login
       shell at all and prevents them from doing things they are not trusted to do.

   <b>Example</b> <b>(blacklisting)</b>
       In order to allow all commands except for removing and stopping containers, the following variable can be
       used:

         command="CONTAINER_COMMANDS_DISABLE='remove stop' \
           /usr/bin/container-shell",no-port-forwarding,no-X11-forwarding,\
           no-agent-forwarding,no-pty ssh-ed25519 [...]

   <b>Example</b> <b>(whitelisting)</b>
       The  other  way  around works too. To disallow all commands except for listing containers and showing the
       compute-tools version, the following variable can be used:

         command="CONTAINER_COMMANDS_ENABLE='list version' \
           /usr/bin/container-shell",no-port-forwarding,no-X11-forwarding,\
           no-agent-forwarding,no-pty ssh-ed25519 [...]

</pre><h4><b>COMMANDS</b></h4><pre>
       All container commands are available, see <a href="../man1/container.1.html">container</a>(1). Additionally, the following commands are specific
       to container-shell:

       <b>about:</b> Shows introduction (manpage).

       <b>help:</b>  Shows available commands within the container-shell.

       <b>help</b> <b>COMMAND:</b>
              Shows help (manpage) for a specific container command.

       <b>logout,</b> <b>exit:</b>
              Exits container-shell.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <a href="../man7/compute-tools.7.html">compute-tools</a>(7),
       <a href="../man1/container.1.html">container</a>(1).

</pre><h4><b>HOMEPAGE</b></h4><pre>
       More information about compute-tools and the Open Infrastructure project can be found on the  homepage  (
       &lt;https://open-infrastructure.net&gt; ).

</pre><h4><b>CONTACT</b></h4><pre>
       Bug  reports,  feature  requests,  help,  patches,  support  and  everything else are welcome on the Open
       Infrastructure Software Mailing List &lt; &lt;<a href="mailto:software@lists.open-infrastructure.net">software@lists.open-infrastructure.net</a>&gt; &gt;.

       Debian specific bugs can also be reported in the Debian Bug Tracking System  (  &lt;https://bugs.debian.org&gt;
       ).

</pre><h4><b>AUTHORS</b></h4><pre>
       compute-tools were written by Daniel Baumann &lt; &lt;<a href="mailto:daniel.baumann@open-infrastructure.net">daniel.baumann@open-infrastructure.net</a>&gt; &gt; and others.

Open Infrastructure                               compute-tools                               <u><a href="../man1/CONTAINER-SHELL.1.html">CONTAINER-SHELL</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>