<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>r.kappa  - Calculates error matrix and kappa parameter for accuracy assessment of classification result.</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/grass-doc">grass-doc_8.4.1-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       <b>r.kappa</b>  - Calculates error matrix and kappa parameter for accuracy assessment of classification result.

</pre><h4><b>KEYWORDS</b></h4><pre>
       raster, statistics, classification

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>r.kappa</b>
       <b>r.kappa</b> <b>--help</b>
       <b>r.kappa</b>   [-<b>whm</b>]   <b>classification</b>=<u>name</u>   <b>reference</b>=<u>name</u>    [<b>output</b>=<u>name</u>]     [<b>title</b>=<u>string</u>]   <b>format</b>=<u>name</u>
       [--<b>overwrite</b>]  [--<b>help</b>]  [--<b>verbose</b>]  [--<b>quiet</b>]  [--<b>ui</b>]

   <b>Flags:</b>
       <b>-w</b>
           Wide report
           132 columns (default: 80)

       <b>-h</b>
           No header in the report

       <b>-m</b>
           Print Matrix only

       <b>--overwrite</b>
           Allow output files to overwrite existing files

       <b>--help</b>
           Print usage summary

       <b>--verbose</b>
           Verbose module output

       <b>--quiet</b>
           Quiet module output

       <b>--ui</b>
           Force launching GUI dialog

   <b>Parameters:</b>
       <b>classification</b>=<u>name</u> <b>[required]</b>
           Name of raster map containing classification result

       <b>reference</b>=<u>name</u> <b>[required]</b>
           Name of raster map containing reference classes

       <b>output</b>=<u>name</u>
           Name for output file containing error matrix and kappa
           If not given write to standard output

       <b>title</b>=<u>string</u>
           Title for error matrix and kappa
           Default: <u>ACCURACY</u> <u>ASSESSMENT</u>

       <b>format</b>=<u>name</u> <b>[required]</b>
           Output format
           Options: <u>plain,</u> <u>json</u>
           Default: <u>plain</u>
           <b>plain</b>: Plain text output
           <b>json</b>: JSON (JavaScript Object Notation)

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <u>r.kappa</u> tabulates the error matrix of classification result by crossing classified map layer with respect
       to reference map layer.  Both overall <u>kappa</u> (accompanied by its <u>variance</u>) and  conditional  <u>kappa</u>  values
       are calculated.  This analysis program respects the current geographic region and mask settings.

       <u>r.kappa</u> calculates the error matrix of the two map layers and prepares the table from which the report is
       to  be  created.  <u>kappa</u> values for overall and each classes are computed along with their variances. Also
       percent of commission and omission error, total correct classified result by pixel counts, total area  in
       pixel counts and percentage of overall correctly classified pixels are tabulated.

       The report will be written to an output file which is in plain text format and named by user at prompt of
       running the program. To obtain machine readable version, specify a <u>json</u> output format.

       The  body  of  the  report is arranged in panels.  The classified result map layer categories is arranged
       along the vertical axis of the table, while the reference map layer categories along the horizontal axis.
       Each panel has a maximum of 5 categories (9 if wide format) across the top.  In addition, the last column
       of the last panel reflects a cross total of each column for each row.  All of the categories of  the  map
       layer  arranged  along  the  vertical  axis,  i.e., the reference map layer,  are included in each panel.
       There is a total at the bottom of each column representing the sum of all the rows in that column.

</pre><h4><b>OUTPUT</b> <b>VARIABLES</b></h4><pre>
       All output variables (except kappa variance) have been validated to produce correct values in  accordance
       to  formulas  given by Rossiter, D.G., 2004. "Technical Note: Statistical methods for accuracy assessment
       of classified thematic maps".

       Observations
           Overall count of observed cells (sum of both correct and incorrect ones).

       Correct
           Overall count of correct cells (cells with equal value in reference and classification maps).

       Overall accuracy
           Number of correct cells divided by overall cell count (expressed in percent).

       User’s accuracy
           Share of correctly classified cells out of all cells  classified  as  belonging  to  specified  class
           (expressed in percent).  Inverse of commission error.

       Commission
           Commission error = 100 - user’s accuracy.

       Producer’s accuracy
           Share of correctly classified cells out of all cells known to belong to specified class (expressed in
           percent).  Inverse of omission error.

       Omission
           Omission error = 100 - producer’s accuracy.

       Kappa
           Choen’s kappa index value.

       Kappa variance
           Variance of kappa index. Correctness needs to be validated.

       Conditional kappa
           Conditional user’s kappa for specified class.

       MCC
           Matthews  (Mattheus)  Correlation  Coefficient  is  implemented according to Grandini, M., Bagli, E.,
           Visani, G. 2020.  "Metrics for multi-class classification: An overview."

</pre><h4><b>NOTES</b></h4><pre>
       It is recommended to reclassify categories of classified result map layer into a more  manageable  number
       before  running  <u>r.kappa</u>  on the classified raster map layer. Because <u>r.kappa</u> calculates and then reports
       information for each and every category.

       <u>NA</u>’s in output mean it was not possible to calculate the value (e.g. calculation would  involve  division
       by  zero).   In  JSON  output  <u>NA</u>’s are represented with value <u>null</u>.  If there is no overlap between both
       maps, a warning is printed and output values are set to 0 or <u>null</u> respectively.

       The <b>Estimated</b> <b>kappa</b> <b>value</b> in <u>r.kappa</u> is the value only for one class, i.e. the observed agreement between
       the classifications for those observations that have been classified by classifier 1 into the class i. In
       other words, here the choice of reference is important.

       It is calculated as:

       kpp[i] = (pii[i] - pi[i] * pj[i]) / (pi[i] - pi[i] * pj[i]);

       where=

           •   pii[i] is the probability of agreement (i.e. number  of  pixels  for  which  there  is  agreement
               divided by total number of assessed pixels)

           •   Pi[i] is the probability of classification i having classified the point as i

           •   Pj[i] is the probability of classification j having classified the point as i.

       Some  of  reported  values  (overall  accuracy, Choen’s kappa, MCC) can be misleading if cell count among
       classes is not balanced. See e.g.  Powers, D.M.W., 2012. "The Problem with Kappa"; Zhu,  Q.,  2020.   "On
       the performance of Matthews correlation coefficient (MCC) for imbalanced dataset".

</pre><h4><b>EXAMPLE</b></h4><pre>
       Example for North Carolina sample dataset:
       g.region raster=landclass96 -p
       r.kappa -w classification=landuse96_28m reference=landclass96
       # export Kappa matrix as CSV file "kappa.csv"
       r.kappa classification=landuse96_28m reference=landclass96 output=kappa.csv -m -h

       Verification of classified LANDSAT scene against training areas:
       r.kappa -w classification=lsat7_2002_classes reference=training

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
        <u>g.region,</u> <u>r.category,</u> <u>r.mask,</u> <u>r.reclass,</u> <u>r.report,</u> <u>r.stats</u>

</pre><h4><b>AUTHORS</b></h4><pre>
       Tao Wen, University of Illinois at Urbana-Champaign, Illinois
       Maris Nartiss, University of Latvia (JSON output, MCC)

</pre><h4><b>SOURCE</b> <b>CODE</b></h4><pre>
       Available at: r.kappa source code (history)

       Accessed: Friday Apr 04 01:19:14 2025

       Main index | Raster index | Topics index | Keywords index | Graphical index | Full index

       © 2003-2025 GRASS Development Team, GRASS GIS 8.4.1 Reference Manual

GRASS 8.4.1                                                                                      <u><a href="../man1grass/r.kappa.1grass.html">r.kappa</a></u>(1grass)
</pre>
 </div>
</div></section>
</div>
</body>
</html>