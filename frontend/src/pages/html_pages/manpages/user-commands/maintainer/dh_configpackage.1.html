<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>dh_configpackage - add maintainer script rules to displace, hide, or transform files</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/config-package-dev">config-package-dev_5.5_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       dh_configpackage - add maintainer script rules to displace, hide, or transform files

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>dh_configpackage</b> [<b>--displace</b> <u>path</u>] [<b>--hide</b> <u>path</u>] [<b>--undisplace</b> <u>path</u>] [<b>--unhide</b> <u>file</u>] [<b>--transform</b>
       <u>transformation</u>] [<u>debhelper</u> <u>options</u>] [<b>-n</b>]

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>dh_configpackage</b> is a debhelper program to create "configuration packages".  These packages provide an
       ideal way to distribute configurations to target systems while still affording local system
       administrators a degree of control over their workstations.  The motivation and philosophy behind this
       style of packaging is described in detail on the config-package-dev website.  Configuration packages make
       use of dpkg diversions and maintainer script snippets to provide three primary operations: displacing,
       hiding, and transforming files.

       The <u>displace</u> operation consists of replacing a file on the target system.  The original file is renamed
       out of the way and diverted in the dpkg database.  The replacement file is then installed by the package,
       and the config-package-dev maintainer script snippets create a symlink from the original name.  A common
       use of this is to install a wrapper script for an executable.

       The <u>transform</u> operation is a special case of the displace operation.  At build time, a "transform script"
       is applied to the original source, and the result is used as the replacement in the displace operation.
       A common use of this is to change one value in a config file without needing to re-type the entire config
       file (and risk bit-rot).

       The <u>hide</u> operation is yet another special case of the displace operation, namely that there is no
       replacement or symlink.  Instead, the file is diverted to a unique path on the target system, thus
       preserving its contents.  A common use of this is to suppress a snippet file in a configuration directory
       (e.g. /etc/foo.d), thus disabling a specific operation or configuration.

       The <u>displace</u> <u>extension</u> is a suffix appended to the diverted versions of files, and this suffix plus the
       string "-orig" is appended to the original versions of the files.  The default value is the first word of
       the package name.  For example, the extension for debathena-bin-example would be ".debathena".  So if
       debathena-bin-example displaced <a href="file:/bin/true">/bin/true</a>, dh_configpackage would create a diversion from <a href="file:/bin/true">/bin/true</a> to
       /bin/true.debathena.orig, and create a symbolic link from <a href="file:/bin/true">/bin/true</a> to /bin/true.debathena.  The package
       should then install its modified version at /bin/true.debathena, using e.g. <b>dh_install</b>.  (For the
       remainder of this documentation, ".debathena" will be used as the displace extension.)

</pre><h4><b>FILES</b></h4><pre>
       debian/<u>package</u>.displace
           List  the  files  to  displace,  one  per  line, including the full path and displace extension.  For
           example,    to    displace    <a href="file:///usr/lib/w3m/cgi-bin/w3mman2html.cgi?true">/usr/bin/true</a>    to    /usr/bin/true.debathena,    you    would    list
           "/usr/bin/true.debathena"  in  the file.  (As with other Debhelper commands, you can omit the initial
           leading slash in pathnames in the package, but these examples retain it.)

       debian/<u>package</u>.hide
           List the files to hide, one per line, including the full  path  and  displace  extension.   As  noted
           above,  these files won't actually be removed, but merely diverted and renamed to a unique path below
           <a href="file:/usr/share/">/usr/share/</a><u>package</u>.

       debian/<u>package</u>.undisplace
           List the files to undisplace, one per line, including the full path and  displace  extension.   <b>NOTE:</b>
           This  is  only  needed  when  a  new  version  of the package no longer needs to displace a file (for
           example, if an upstream bug was fixed).  Packages automatically undo all operations upon  removal  or
           deconfiguration.

       debian/<u>package</u>.unhide
           List  the  files  to  unhide, one per line, including the full path and displace extension.  <b>NOTE:</b> As
           with undisplace, this is only needed when a new version of the package no  longer  needs  to  hide  a
           file.

       debian/<u>package</u>.transform
           Each  line  in the file specifies a transformation.  A transformation consists of two space-separated
           fields: the full path of the target file including the  displace  extension  and  the  transformation
           command  itself.   The  transformation can either be a single shell command, or an executable file in
           the debian directory.  The transformation takes the original source of the file on stdin  and  prints
           its  transformation  on  stdout.   Transformations  are typically performed by perl, sed, or awk, but
           there is no limitation on what can be used as a transformation.

           For example, to transform /etc/school.conf by replacing all occurrences of the  word  'Harvard'  with
           the word 'MIT', you might specify the following line:

            /etc/school.conf.debathena sed -e 's/Harvard/MIT/g'

           Or, storing the command in a separate script:

            /etc/school.conf.debathena debian/transform_school.conf.pl

           If  the  transformation  script fails, the package build fails. You can use this with e.g. Perl's "or
           die" syntax to make sure that the source file of the transformation has not  changed  from  what  you
           expected.

           <u>Transformation</u>  <u>sources</u>:  Under normal operation, the source (passed on stdin) for the transformation
           is the name of the target file without the displace extension. <b>dh_configpackage</b> will  check  to  make
           sure that the source file is owned by a Debian package and has not been modified locally, in order to
           ensure  that  unwanted  changes  do  not show up in the result of the transformation. (If the file is
           already displaced or transformed by a config-package-dev package, it will check the original  version
           of  the  file  and use that as the transformation source, allowing a config-package-dev package to be
           built correctly on a running system where  a  previous  version  of  the  same  package  was  already
           installed.)

           In  some  cases,  you  may  wish  to  use  a  different  source  (e.g. a sample configuration file in
           <a href="file:/usr/share/doc">/usr/share/doc</a>).  You can specify this source as an optional field between the diversion filename and
           the transformation.  This field must begin with a '&lt;' immediately followed by the full  path  to  the
           source.  Taking the example above, we might alter it as follows:

            /etc/school.conf.debathena &lt;/usr/share/doc/school/conf.example sed -e 's/Harvard/MIT/g'

           The  full  path  should  generally be an absolute path; however, in rare cases, it is useful to use a
           file in the current package's build directory as  the  transformation  source.   In  this  case,  the
           package's build directory is assumed to be clean, and no dpkg ownership check is performed.

           <b>NOTE:</b>  There  is  no  "untransform"  operation.  Because a transform operation is a special case of a
           displace operation, the "undisplace" operation is the correct  way  of  removing  a  no-longer-needed
           transformation in future versions of the package.

       debian/<u>package</u>.displace-extension
           This file is used to specify the displace extension for any files diverted by this package, if you do
           not  want  to  accept  the  default  of  the first word in the package name.  It will not normally be
           present.  (See "CAVEATS".)

</pre><h4><b>OPTIONS</b></h4><pre>
       <b>-n</b>, <b>--noscripts</b>
           Do not modify maintainer scripts.  This is a standard  debhelper  option,  though  you  are  strongly
           discouraged  from  using  it except for debugging, as these operations rely heavily on the maintainer
           scripts.

       <b>--displace</b> <u>path</u>
       <b>--hide</b> <u>path</u>
       <b>--undisplace</b> <u>path</u>
       <b>--unhide</b> <u>path</u>
       <b>--transform</b> <u>transformation</u>
           These options allow for specifying an operation on the command line.  The argument to the  option  is
           the  same  as  a single line of the corresponding file, as described above.  You may specify multiple
           occurrences of <b>--displace</b>, or you may invoke <b>dh_configpackage</b> repeatedly with different  invocations.
           The  most  common use of this format is in a rules file when performing conditional operations, in an
           "override_dh_configpackage" target in  the  "rules"  file.   See  the  debathena-conffile-example-1.1
           package in /usr/share/doc/config-package-dev/EXAMPLES for one such use.

</pre><h4><b>CAVEATS</b></h4><pre>
       Because the displace extension is automatically generated from the package name, renaming the package can
       have  unintended  consequences.   If  you must rename a package such that the first component of the name
       changes, specify the old extension using the "displace-extension" file (see above).

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <u><a href="../man7/debhelper.7.html">debhelper</a></u>(7), The config-package-dev homepage &lt;<a href="http://debathena.mit.edu/config-package-dev">http://debathena.mit.edu/config-package-dev</a>&gt;

       This program is a part of config-package-dev.

</pre><h4><b>AUTHOR</b></h4><pre>
       config-package-dev was written by Anders Kaseorg &lt;<a href="mailto:andersk@mit.edu">andersk@mit.edu</a>&gt; and Tim Abbott &lt;<a href="mailto:tabbott@mit.edu">tabbott@mit.edu</a>&gt;.  The
       debhelper port is by Geoffrey Thomas &lt;<a href="mailto:geofft@mit.edu">geofft@mit.edu</a>&gt;.  Documentation by Jonathan Reed &lt;<a href="mailto:jdreed@mit.edu">jdreed@mit.edu</a>&gt;.

config-package-dev 5.5                             2018-01-27                                <u><a href="../man1/DH_CONFIGPACKAGE.1.html">DH_CONFIGPACKAGE</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>