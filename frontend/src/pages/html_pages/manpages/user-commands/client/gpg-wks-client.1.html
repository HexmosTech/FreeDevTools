<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>gpg-wks-client - Client for the Web Key Service</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/gpg-wks-client">gpg-wks-client_2.4.4-2ubuntu23.1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       <b>gpg-wks-client</b> - Client for the Web Key Service

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>gpg-wks-client</b> [<u>options</u>] <b>--supported</b> <u>user-id</u>
       <b>gpg-wks-client</b> [<u>options</u>] <b>--check</b> <u>user-id</u>
       <b>gpg-wks-client</b> [<u>options</u>] <b>--create</b> <u>fingerprint</u> <u>user-id</u>
       <b>gpg-wks-client</b> [<u>options</u>] <b>--receive</b>
       <b>gpg-wks-client</b> [<u>options</u>] <b>--read</b>
       <b>gpg-wks-client</b> [<u>options</u>] <b>--mirror</b>
       <b>gpg-wks-client</b> [<u>options</u>] <b>--install-key</b>
       <b>gpg-wks-client</b> [<u>options</u>] <b>--remove-key</b>
       <b>gpg-wks-client</b> [<u>options</u>] <b>--print-wkd-hash</b>
       <b>gpg-wks-client</b> [<u>options</u>] <b>--print-wkd-url</b>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The  <b>gpg-wks-client</b>  is  used  to  send  requests to a Web Key Service provider.  This is usually done to
       upload a key into a Web Key Directory.

       With the <b>--supported</b> command the caller can test whether a  site  supports  the  Web  Key  Service.   The
       argument  is an arbitrary address in the to be tested domain. For example ‘<u><a href="mailto:foo@example.net">foo@example.net</a></u>’.  The command
       returns success if the Web Key Service is supported.  The operation is silent; to get  diagnostic  output
       use the option <b>--verbose</b>.  See option <b>--with-colons</b> for a variant of this command.

       With  the  <b>--check</b>  command  the  caller  can test whether a key exists for a supplied mail address.  The
       command returns success if a key is available.

       The <b>--create</b> command is used to send a request for publication in the Web Key Directory.   The  arguments
       are  the  fingerprint  of  the key and the user id to publish.  The output from the command is a properly
       formatted mail with all standard headers.  This mail can be fed to  <b><a href="../man8/sendmail.8.html">sendmail</a>(8)</b>  or  any  other  tool  to
       actually  send that mail.  If <b><a href="../man8/sendmail.8.html">sendmail</a>(8)</b> is installed the option <b>--send</b> can be used to directly send the
       created request.  If the provider request a 'mailbox-only'  user  id  and  no  such  user  id  is  found,
       <b>gpg-wks-client</b> will try an additional user id.

       The  <b>--receive</b>  and  <b>--read</b>  commands  are  used  to  process confirmation mails as send from the service
       provider.  The former expects an encrypted MIME messages, the latter an already decrypted  MIME  message.
       The  result of these commands are another mail which can be send in the same way as the mail created with
       <b>--create</b>.

       The command <b>--install-key</b> manually installs a key into a local directory (see option <b>-C</b>)  reflecting  the
       structure of a WKD.  The arguments are a file with the keyblock and the user-id to install.  If the first
       argument  resembles  a fingerprint the key is taken from the current keyring; to force the use of a file,
       prefix the first argument with "./".  If no arguments are given the parameters are read from  stdin;  the
       expected  format  are  lines  with  the  fingerprint  and  the mailbox separated by a space.  The command
       <b>--remove-key</b> removes a key from that directory, its only argument is a user-id.

       The command <b>--mirror</b> is similar to <b>--install-key</b> but takes the keys from the the LDAP  server  configured
       for Dirmngr.  If no arguments are given all keys and user ids are installed.  If arguments are given they
       are  taken  as  domain  names  to  limit the to be installed keys.  The option <b>--blacklist</b> may be used to
       further limit the to be installed keys.

       The command <b>--print-wkd-hash</b> prints the WKD user-id identifiers and the corresponding mailboxes from  the
       user-ids given on the command line or via stdin (one user-id per line).

       The  command  <b>--print-wkd-url</b> prints the URLs used to fetch the key for the given user-ids from WKD.  The
       meanwhile preferred format with sub-domains is used here.

</pre><h4><b>OPTIONS</b></h4><pre>
       <b>gpg-wks-client</b> understands these options:

       <b>--send</b> Directly send created mails using the <b>sendmail</b> command.  Requires installation of that command.

       <b>--with-colons</b>
              This option has currently only an effect on the <b>--supported</b> command.  If it is used all  arguments
              on  the  command  line are taken as domain names and tested for WKD support.  The output format is
              one line per domain with colon delimited fields.   The  currently  specified  fields  are  (future
              versions may specify additional fields):

              <b>1</b> <b>-</b> <b>domain</b>
                     This  is  the  domain  name.   Although quoting is not required for valid domain names this
                     field is specified to be quoted in standard C manner.

              <b>2</b> <b>-</b> <b>WKD</b>
                     If the value is true the domain supports the Web Key Directory.

              <b>3</b> <b>-</b> <b>WKS</b>
                     If the value is true the domain supports the Web Key Service protocol to upload keys to the
                     directory.

              <b>4</b> <b>-</b> <b>error-code</b>
                     This may contain an gpg-error code to describe certain failures.  Use ‘gpg-error  CODE’  to
                     explain the code.

              <b>5</b> <b>-</b> <b>protocol-version</b>
                     The minimum protocol version supported by the server.

              <b>6</b> <b>-</b> <b>auth-submit</b>
                     The auth-submit flag from the policy file of the server.

              <b>7</b> <b>-</b> <b>mailbox-only</b>
                     The mailbox-only flag from the policy file of the server.

       <b>--output</b> <u>file</u>
       <b>-o</b>     Write  the  created mail to <u>file</u> instead of stdout.  Note that the value <b>-</b> for <u>file</u> is the same as
              writing to stdout.  If this option is used with the <b>--check</b> command and a  key  was  found  it  is
              written to the given file.

       <b>--status-fd</b> <u>n</u>
              Write  special  status  strings  to  the  file descriptor <u>n</u>.  This program returns only the status
              messages SUCCESS or FAILURE which are helpful when the caller uses  a  double  fork  approach  and
              can't easily get the return code of the process.

       <b>-C</b> <u>dir</u>
       <b>--directory</b> <u>dir</u>
              Use  <u>dir</u>  as  top  level directory for the commands <b>--mirror</b>, <b>--install-key</b> and <b>--remove-key</b>.  The
              default is ‘<u>openpgpkey</u>’.

       <b>--blacklist</b> <u>file</u>
              This option is used to exclude certain mail addresses from a mirror operation.  The format of <u>file</u>
              is one mail address (just the addrspec, e.g. "<a href="mailto:postel@isi.edu">postel@isi.edu</a>") per line.  Empty  lines  and  lines
              starting with a '#' are ignored.

       <b>--add-revocs</b>
       <b>--no-add-revocs</b>
              If  enabled  append  revocation  certificates for the same addrspec as used in the WKD to the key.
              Modern gpg version are able to import and apply them for existing keys.  Note that when used  with
              the  <b>--mirror</b>  command  the  revocation  are  searched  in  the  local  keyring and not in an LDAP
              directory.  The default is <b>--add-revocs</b>.

       <b>--verbose</b>
              Enable extra informational output.

       <b>--quiet</b>
              Disable almost all informational output.

       <b>--version</b>
              Print version of the program and exit.

       <b>--help</b> Display a brief help page and exit.

</pre><h4><b>EXAMPLES</b></h4><pre>
       To use the services with clients lacking integrated support, the mailcap mechanism can be  used.   Simply
       put:
         application/vnd.gnupg.wks; \
           <a href="file:///usr/lib/w3m/cgi-bin/w3mman2html.cgi?gpg-wks-client">/usr/bin/gpg-wks-client</a> -v --read --send; \
           needsterminal; \
           description=WKS message
       into  the  ‘<u>/etc/mailcap</u>’.   This assumes that a /usr/lib/sendmail is installed.  With this configuration
       any real mail programs will run gpg-wks-client for messages received from a Web Key Service.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man1/gpg-wks-server.1.html">gpg-wks-server</a></b>(1)

GnuPG 2.4.4                                        2024-01-25                                  <u><a href="../man1/GPG-WKS-CLIENT.1.html">GPG-WKS-CLIENT</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>