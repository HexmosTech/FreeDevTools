<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>yaz-client - Z39.50/SRU client for implementors</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/yaz">yaz_5.34.4-1build1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       yaz-client - Z39.50/SRU client for implementors

</pre><h4><b>SYNOPSIS</b></h4><pre>

       <b>yaz-client</b> [<b>-a</b> <u>apdulog</u>] [<b>-b</b> <u>berdump</u>] [<b>-c</b> <u>cclfile</u>] [<b>-d</b> <u>dump</u>] [<b>-f</b> <u>cmdfile</u>] [<b>-k</b> <u>size</u>] [<b>-m</b> <u>marclog</u>]
                  [<b>-p</b> <u>proxy-addr</u>] [<b>-q</b> <u>cqlfile</u>] [<b>-t</b> <u>dispcharset</u>] [<b>-u</b> <u>auth</u>] [<b>-v</b> <u>loglevel</u>] [<b>-V</b>] [<b>-x</b>] [server-addr]

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>yaz-client</b> is a <b>Z39.50</b>[1]/<b>SRU</b>[2] client (origin) with a simple command line interface that allows you to
       test behavior and performance of Z39.50 targets and SRU servers.

       From YAZ version 4.1.0 <b>yaz-client</b> may also operate as a <b>Solr</b>[3] Web Service client.

       If the <u>server-addr</u> is specified, the client creates a connection to the Z39.50/SRU target at the address
       given.

       When <b>yaz-client</b> is started it tries to read commands from one of the following files:

       •   Command file if it is given by option -f.

       •   .yazclientrc in current working directory.

       •   .yazclientrc in the user's home directory. The value of the $HOME environment variable is used to
           determine the home directory. Normally, $HOME is only set on POSIX systems such as Linux, FreeBSD,
           Solaris.

</pre><h4><b>OPTIONS</b></h4><pre>
       -a <u>filename</u>
           If specified, logging of protocol packages will be appended to the file given. If <u>filename</u> is
           specified as -, the output is written to stdout.

       -b <u>filename</u>
           If specified, YAZ will dump BER data in readable notation to the file specified. If <u>filename</u> is
           specified as - the output is written to stdout.

       -c <u>filename</u>
           If specified, CCL configuration will be read from the file given.

       -d <u>dump</u>
           If specified, YAZ will dump BER data for all PDUs sent and received to individual files, named
           <u>dump</u>.DDD.raw, where DDD is 001, 002, 003, ...

       -f <u>cmdfile</u>
           Reads commands from <u>cmdfile</u>. When this option is used, YAZ client does not read .yazclientrc from
           current directory or home directory.

       -k <u>size</u>
           Sets preferred messages and maximum record size for Initialize Request in kilobytes. Default value is
           65536 (64 MB).

       -m <u>filename</u>
           If specified, retrieved records will be appended to the file given.

       -p <u>proxy-addr</u>
           If specified, the client will use the proxy at the address given. YAZ client will connect to a proxy
           on the address and port given. The actual target will be specified as part of the InitRequest to
           inform the proxy about the actual target.

       -q <u>filename</u>
           If specified, CQL configuration will be read from the file given.

       -t <u>displaycharset</u>
           If displaycharset is given, it specifies name of the character set of the output (on the terminal on
           which YAZ client is running).

       -u <u>auth</u>
           If specified, the <u>auth</u> string will be used for authentication.

       -v <u>level</u>
           Sets the LOG level to <u>level</u>. Level is a sequence of tokens separated by comma. Each token is a
           integer or a named LOG item - one of fatal, debug, warn, log, malloc, all, none.

       -V
           Prints YAZ version.

       -x
           Makes the YAZ client print hex dumps of packages sent and received on standard output.

</pre><h4><b>COMMANDS</b></h4><pre>
       The YAZ client accepts the following commands.

       open <u>zurl</u>
           Opens a connection to a server. The syntax for <u>zurl</u> is the same as described above for connecting
           from the command line.

           Syntax:

           [(tcp|ssl|unix|http)':']<u>host</u> [:<u>port</u>][/<u>base</u>]

       quit
           Quits YAZ client

       find <u>query</u>
           Sends a Search Request using the <u>query</u> given. By default the query is assumed to be PQF. See command
           querytype for more information.

       delete <u>setname</u>
           Deletes result set with name <u>setname</u> on the server.

       base <u>base1</u> <u>base2</u> ...
           Sets the name(s) of the database(s) to search. One or more databases may be specified, separated by
           blanks. This command overrides the database given in <u>zurl</u>.

       show [<u>start</u>[+<u>number</u> [+<u>resultset</u>]]]
           Fetches records by sending a Present Request from the start position given by <u>start</u> and a number of
           records given by <u>number</u>, from the result set <u>resultset</u>. If <u>start</u> is not given, then the client will
           fetch from the position of the last retrieved record plus 1. If <u>number</u> is not given, then one record
           will be fetched at a time. If <u>resultset</u> is not given, the most recently retrieved result set is used.

       scan <u>term</u>
           Scans database index for a term. The syntax resembles the syntax for find. If you want to scan for
           the word water you could write

                     scan water

           but if you want to scan only in, say the title field, you would write

                     scan @attr 1=4 water

       setscan <u>set</u> <u>term</u>
           Scans database index for a term within a result set. This is similar to the scan command but has a
           result set as its first argument.

       scanpos <u>pos</u>
           Sets preferred position for scan. This value is used in the next scan. By default, position is 1.

       scansize <u>size</u>
           Sets number of entries to be returned by scan. Default number of entries is 20.

       scanstep <u>step</u>
           Set step-size for scan. This value is used in the next scan sent to the target. By default step-size
           is 0.

       sort <u>sortspecs</u>
           Sorts a result set. The sort command takes a sequence of space-separated sort specifications, with
           each sort specification consisting of two space-separated words (so that the whole specification list
           is made up of an even number of words). The first word of each specification holds a field (sort
           criterion) and the second holds flags. If the sort criterion includes = it is assumed that the
           SortKey is of type sortAttributes using Bib-1: in this case the integer before = is the attribute
           type and the integer following = is the attribute value. If no = character is in the criterion, it is
           treated as a sortfield of type InternationalString. The flags word of each sort specification must
           consist of s for case sensitive or i for case insensitive, and &lt; for ascending order or &gt; for
           descending order.

           Example using sort criterion with attributes use=local-number and structure=numeric and ascending
           flag: 1=12,4=109 &lt;

           Another example with "Title" sort field and descending flag: Title &gt;

       sort+
           Same as sort but stores the sorted result set in a new result set.

       authentication [<u>auth1</u> [<u>auth2</u> [<u>auth3</u>]]]
           Configures authentication strings to be sent to server. Zero, 1, 2 or 3 arguments may follow the auth
           command.

           If no (0) arguments are given, no authentication string is sent.

           If one argument is given, the Z39.50 v2 OpenStyle authentication is used. A common convention for the
           <u>auth1</u> string is that the username and password is separated by a slash, e.g.  myusername/mysecret.

           If two or more arguments is given Z39.50 v3 authentication is used, in which cased the first argument
           is used, second argument is group and third argument is password. If only two arguments are given the
           group is assumed to be empty.

           As for other commands in yaz-client, the arguments are separated by whitespace. A backslash character
           can be used to include a character verbatim. For example, auth myuser a\ b is a two argument auth
           command where user is myuser and password is a b.

           The authentication string is first sent to the server when the open command is issued and the Z39.50
           Initialize Request is sent, so this command must be used before open in order to be effective.

       sru <u>method</u> <u>version</u>
           Selects Web Service method and version. Must be one of post, get, soap (default) or solr. Version
           should be either 1.1, 1.2 or 2.0 for SRU. Other versions are allowed - for testing purposes (version
           negotiation with SRU server). The version is currently not used for Solr Web Services

       list_all
           This command displays status and values for many settings.

       lslb <u>n</u>
           Sets the limit for when no records should be returned together with the search result. See the <b>Z39.50</b>
           <b>standard</b> <b>on</b> <b>set</b> <b>bounds</b>[4] for more details.

       ssub <u>n</u>
           Sets the limit for when all records should be returned with the search result. See the <b>Z39.50</b>
           <b>standard</b> <b>on</b> <b>set</b> <b>bounds</b>[4] for more details.

       mspn <u>n</u>
           Sets the number of records that should be returned if the number of records in the result set is
           between the values of lslb and ssub. See the <b>Z39.50</b> <b>standard</b> <b>on</b> <b>set</b> <b>bounds</b>[4] for more details.

       status
           Displays the values of lslb, ssub and mspn.

       setname
           Switches named result sets on and off. Default is on.

       cancel
           Sends a Trigger Resource Control Request to the target.

       facets <u>spec</u>
           Specifies requested facets to be used in search. The notation is specified in ???.

       format <u>oid</u>
           Sets the preferred transfer syntax for retrieved records. yaz-client supports all the record syntaxes
           that currently are registered. See <b>Z39.50</b> <b>Record</b> <b>Syntax</b> <b>Identifiers</b>[5] for more details. Commonly
           used records syntaxes include usmarc, sutrs and xml.

       elements <u>e</u>
           Sets the element set name for the records. Many targets support element sets B (for brief) and F (for
           full).

       close
           Sends a Z39.50 Close APDU and closes connection with the peer

       querytype <u>type</u>
           Sets the query type as used by command find. The following is supported: prefix for Prefix Query
           Notation (Type-1 Query); ccl for CCL search (Type-2 Query), cql for CQL (Type-104 search with CQL
           OID), ccl2rpn for CCL to RPN conversion (Type-1 Query), cql2rpn for CQL to RPN conversion (Type-1
           Query).

       attributeset <u>set</u>
           Sets attribute set OID for prefix queries (RPN, Type-1).

       refid <u>id</u>
           Sets reference ID for Z39.50 Request(s).

       itemorder <u>type</u> <u>no</u>
           Sends an Item Order Request using the ILL External.  <u>type</u> is either 1 or 2 which corresponds to
           ILL-Profile 1 and 2 respectively. The <u>no</u> is the Result Set position of the record to be ordered.

       update <u>action</u> <u>recid</u> <u>doc</u>
           Sends Item Update Request. The <u>action</u> argument must be the action type: one of insert, replace,
           delete and update. The second argument, <u>recid</u>, is the record identifier (any string). Third argument
           which is optional is the record document for the request. If doc is preceded with "&lt;", then the
           following characters are treated as a filename with the records to be updated. Otherwise doc is
           treated as a document itself. The doc may also be quoted in double quotes. If doc is omitted, the
           last received record (as part of present response or piggybacked search response) is used for the
           update.

       source <u>filename</u>
           Executes list of commands from file <u>filename</u>, just like 'source' on most UNIX shells. A single dot
           (.) can be used as an alternative.

       ! <u>args</u>
           Executes command <u>args</u> in subshell using the system call.

       push_command <u>command</u>
           The push_command takes another command as its argument. That command is then added to the history
           information (so you can retrieve it later). The command itself is not executed. This command only
           works if you have GNU readline/history enabled.

       set_apdufile <u>filename</u>
           Sets that APDU should be logged to file <u>filename</u>. Another way to achieve APDU log is by using
           command-line option -a.

       set_auto_reconnect <u>flag</u>
           Specifies whether YAZ client automatically reconnects if the target closes connection (Z39.50 only).

           <u>flag</u> must be either on or off.

       set_auto_wait <u>flag</u>
           Specifies whether YAZ client should wait for response protocol packages after a request. By default
           YAZ client waits (on) for response packages immediately after a command (find, show) has been issued.
           If off is used, YAZ client does not attempt to receive packages automatically. These will have to be
           manually received when command wait_response is used.

           <u>flag</u> must be either on or off.

       set_marcdump <u>filename</u>
           Specifies that all retrieved records should be appended to file <u>filename</u>. This command does the same
           thing as option -m.

       schema <u>schemaid</u>
           Specifies schema for retrieval. Schema may be specified as an OID for Z39.50. For SRU, schema is a
           simple string URI.

       charset <u>negotiationcharset</u> [<u>displaycharset</u>] [[<u>marccharset</u>]]
           Specifies character set (encoding) for Z39.50 negotiation / SRU encoding and/or character set for
           output (terminal).

           <u>negotiationcharset</u> is the name of the character set to be negotiated by the server. The special name
           - for <u>negotiationcharset</u> specifies <u>no</u> character set to be negotiated.

           If <u>displaycharset</u> is given, it specifies name of the character set of the output (on the terminal on
           which YAZ client is running). To disable conversion of characters to the output encoding, the special
           name - (dash) can be used. If the special name auto is given, YAZ client will convert strings to the
           encoding of the terminal as returned by <b>nl_langinfo</b> call.

           If <u>marccharset</u> is given, it specifies name of the character set of retrieved MARC records from
           server. See also marccharset command.

               <b>Note</b>
               Since character set negotiation takes effect in the Z39.50 Initialize Request you should issue
               this command before command open is used.

               <b>Note</b>
               MARC records are not covered by Z39.50 character set negotiation, so that's why there is a
               separate character that must be known in order to do meaningful conversion(s).

       negcharset <u>charset</u>
           Specifies character set for negotiation (Z39.50). The argument is the same as second argument for
           command charset.

       displaycharset <u>charset</u>
           Specifies character set for output (display). The argument is the same as second argument for command
           charset.

       marccharset <u>charset</u>
           Specifies character set for retrieved MARC records so that YAZ client can display them in a character
           suitable for your display. See charset command. If auto is given, YAZ will assume that MARC21/USMARC
           is using MARC8/UTF8 and ISO-8859-1 for all other MARC variants. The charset argument is the same as
           third argument for command charset.

       querycharset <u>charset</u>
           Specifies character set for query terms for Z39.50 RPN queries and Z39.50 Scan Requests
           (termListAndStartPoint). This is a pure client-side conversion which converts from displayCharset to
           queryCharset.

       set_cclfile <u>filename</u>
           Specifies that CCL fields should be read from file file <u>filename</u>. This command does the same thing as
           option -c.

       set_cqlfile <u>filename</u>
           Specifies that CQL fields should be read from file file <u>filename</u>. This command does the same thing as
           option -q.

       register_oid <u>name</u> <u>class</u> <u>OID</u>
           This command allows you to register your own object identifier - so that instead of entering a long
           dot-notation you can use a short name instead. The <u>name</u> is your name for the OID, <u>class</u> is the class,
           and <u>OID</u> is the raw OID in dot notation. Class is one of: appctx, absyn, attet, transyn, diagset,
           recsyn, resform, accform, extserv, userinfo, elemspec, varset, schema, tagset, general. If you're in
           doubt use the general class.

       register_tab <u>command</u> <u>string</u>
           This command registers a TAB completion string for the command given.

       sleep <u>seconds</u>
           This command makes YAZ client sleep (be idle) for the number of seconds given.

       wait_response [ <u>number</u>]
           This command makes YAZ client wait for a number of response packages from target. If <u>number</u> is
           omitted, 1 is assumed.

           This command is rarely used and is only useful if command set_auto_wait is set to off.

       xmles <u>OID</u> <u>doc</u>
           Sends XML Extended Services request using the OID and doc given.

       zversion <u>ver</u>
           This command sets Z39.50 version for negotiation. Should be used before open. By default 3 (version
           3) is used.

       options <u>op1</u> <u>op2..</u>
           This command sets Z39.50 options for negotiation. Should be used before open.

           The following options are supported: search, present, delSet, resourceReport, triggerResourceCtrl,
           resourceCtrl, accessCtrl, scan, sort, extendedServices, level_1Segmentation, level_2Segmentation,
           concurrentOperations, namedResultSets, encapsulation, resultCount, negotiationModel,
           duplicationDetection, queryType104, pQESCorrection, stringSchema.

</pre><h4><b>EXAMPLE</b></h4><pre>
       The simplest example of a Prefix Query would be something like

               f knuth

       or

               f "donald knuth"

       In those queries, no attributes were specified. This leaves it up to the server what fields to search but
       most servers will search in all fields. Some servers do not support this feature though, and require that
       some attributes are defined. To add one attribute you could do:

               f @attr 1=4 computer

       where we search in the title field, since the <a href="../man1/use.1.html">use</a>(1) is <a href="../man4/title.4.html">title</a>(4). If we want to search in the author
       field <u>and</u> in the title field, and in the title field using right truncation it could look something like
       this:

               f @and @attr 1=1003 knuth @attr 1=4 @attr 5=1 computer

       Finally using a mix of Bib-1 and GILS attributes could look something like this:

               f @attrset Bib-1 @and @attr GILS 1=2008 Washington @attr 1=21 weather

</pre><h4><b>FILES</b></h4><pre>
       yaz-&lt;version&gt;/client/client.c

       $HOME/.yazclientrc

       $HOME/.yazclient.history

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man7/yaz.7.html">yaz</a></b>(7) <b><a href="../man7/bib1-attr.7.html">bib1-attr</a></b>(7)

</pre><h4><b>AUTHORS</b></h4><pre>
       <b>Index</b> <b>Data</b>

</pre><h4><b>NOTES</b></h4><pre>
        1. Z39.50
           https://www.loc.gov/z3950/agency/

        2. SRU
           https://www.loc.gov/standards/sru/

        3. Solr
           https://lucene.apache.org/solr/

        4. Z39.50 standard on set bounds
           <a href="http://www.loc.gov/z3950/agency/markup/04.html">http://www.loc.gov/z3950/agency/markup/04.html</a>#3.2.2.1.6

        5. Z39.50 Record Syntax Identifiers
           <a href="http://www.loc.gov/z3950/agency/defns/oids.html">http://www.loc.gov/z3950/agency/defns/oids.html</a>#5

YAZ 5.34.4                                         05/21/2025                                      <u><a href="../man1/YAZ-CLIENT.1.html">YAZ-CLIENT</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>