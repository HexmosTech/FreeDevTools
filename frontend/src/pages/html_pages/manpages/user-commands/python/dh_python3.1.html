<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>dh_python3 - calculates Python dependencies, adds maintainer scripts to byte compile files, etc.</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/dh-python">dh-python_6.20250308_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       dh_python3 - calculates Python dependencies, adds maintainer scripts to byte compile files, etc.

</pre><h4><b>SYNOPSIS</b></h4><pre>
          dh_python3 -p PACKAGE [-V [X.Y][-][A.B]] DIR [-X REGEXPR]

</pre><h4><b>DESCRIPTION</b></h4><pre>
   <b>QUICK</b> <b>GUIDE</b> <b>FOR</b> <b>MAINTAINERS</b>
          • build depend on dh-python

          • build-depend  on  python3  (Python  application)  or  python3-all (Python module) or python3-all-dev
            (Python extension),

          • if necessary, describe supported Python 3 versions via X-Python3-Version field in debian/control,

          • build module/application using its standard build system (pybuild wrapper recommended, see pybuild.1
            for more details), remember to build extensions for all  supported  Python  3  versions  (loop  over
            <b>py3versions</b> <b>-vr</b>),

          • install  files  to the <u>standard</u> locations, add <u>--install-layout=deb</u> to setup.py's install command if
            your package is using distutils,

          • add <u>python3</u> to dh's --with option, or:

          • <u>include</u> <u>/usr/share/cdbs/1/class/python-distutils.mk</u> in debian/rules and depend on <u>cdbs</u> <u>(&gt;=</u>  <u>0.4.90)</u>,
            or:

          • call <b>dh_python3</b> in the <u>binary-*</u> target,

          • add <u>${python3:Depends}</u> to Depends

   <b>NOTES</b>
   <b>dependencies</b>
       dh_python3 tries to translate Python dependencies from <u>Requires-Dist</u> entries in <u>dist-info</u> or <u>requires.txt</u>
       contents  in  <u>egg-info</u>  to  Debian  dependencies.   In  many  cases,  this  works  without any additional
       configuration because dh_python3 comes with a build-in mapping of Python module names to Debian  packages
       that  is  periodically  regenerated  from  the Debian archive. By default, the version information in the
       Python dependencies is discarded. If you want dh_python3 to generate more strict  dependencies  (e.g.  to
       avoid  ABI  problems),  or if the automatic mapping does not work correctly for your package, you have to
       provide dh_python3 with additional  rules  for  the  translation  of  Python  module  to  Debian  package
       dependencies.

       For  a  package  <u>python3-foo</u>  that depends on a package <u>python3-bar</u>, there are two files that may provide
       such rules:

       1. If the <u>python3-foo</u> source package ships with a <u>debian/py3dist-overrides</u> file, this  file  is  used  by
          dh_python3 during the build of <u>python3-foo</u>.

       2. If  the  <u>python3-bar</u> source package ships with a <u>debian/python3-bar.pydist</u> file (and uses dh_python3),
          this file will be included in the binary package as  <u>/usr/share/python3/dist/python3-bar</u>.  During  the
          build of <u>python3-foo</u>, dh_python3 will then find and use the file.

       Both  files  have the same format described in <u>/usr/share/doc/dh-python/README.PyDist</u>. If all you want is
       to generate versioned dependencies (and assuming that the <u>python3-bar</u> package provides the  <u>pybar</u>  Python
       module), in most cases it will be sufficient to put the line <b>pybar</b> <b>python3-bar;</b> <b>PEP440</b> into either of the
       above files.

   <b>private</b> <b>dirs</b>
       <u>/usr/share/foo</u>, <u>/usr/share/games/foo</u>, <u>/usr/lib/foo</u> and <u>/usr/lib/games/foo</u> private directories are scanned
       for  Python  files  by  default (where <u>foo</u> is binary package name). If your package ships Python files in
       some other directory, add another dh_python3 call in debian/rules with directory name as  an  argument  -
       you  can  use  different  set  of  options  in  this  call. If you need to change options (f.e. a list of
       supported Python 3 versions) for a private directory that is checked by default, invoke  dh_python3  with
       --skip-private option and add another call with a path to this directory and new options.

   <b>debug</b> <b>packages</b>
       In binary packages which name ends with <u>-dbg</u>, all files in <u><a href="file:/usr/lib/python3/dist-packages/">/usr/lib/python3/dist-packages/</a></u> directory that
       have  extensions  different than <u>so</u> or <u>h</u> are removed by default.  Use --no-dbg-cleaning option to disable
       this feature.

   <b>pyinstall</b> <b>files</b>
       Files  listed  in  debian/pkg.pyinstall  file  will  be  installed   as   public   modules   (i.e.   into
       .../dist-packages/ directory) for all requested Python versions.

       Syntax: <b>path/to/file</b> <b>[NAMESPACE]</b> <b>[VERSION_RANGE]</b>

       debian directory is automatically removed from the path, so you can place your files in debian/ directory
       and  install them from this location (if you want to install them in "debian" namespace, set NAMESPACE to
       debian). If NAMESPACE is  set,  all  listed  files  will  be  installed  in  .../dist-packages/NAMESPACE/
       directory.

       <b>Examples:</b>

              • <b>foo.py</b> installs .../dist-packages/foo.py for all supported Python versions

              • <b>foo/bar.py</b> <b>3.3-</b> installs .../dist-packages/foo/bar.py for versions &gt;= 3.3

              • <b>foo/bar.py</b> <b>spam</b> installs .../dist-packages/spam/bar.py

              • <b>debian/*.py</b> <b>spam.egg</b> <b>3.2</b> installs .../python3.2/dist-packages/spam/egg/*.py files

   <b>pyremove</b> <b>files</b>
       If you want to remove some public modules (i.e. files in .../dist-packages/ directory) installed by build
       system  (from  all  supported  Python  versions  or  only  from  a subset of these versions), add them to
       debian/pkg.pyremove file.

       <b>Examples:</b>

              • <b>*.pth</b> removes .pth files from .../dist-packages/

              • <b>bar/baz.py</b> <b>3.2</b> removes .../python3.2/dist-packages/bar/baz.py

   <b>bcep</b> <b>files</b>
       Byte-compilation exception patterns can be described in these files. Use it if  you  want  py3compile  to
       skip  specific  files. This is the only way to skip .py files in …/dist-packages/ directory (as <u>--exclude</u>
       passed to py3compile in postinst is not used in rtupdate scripts and thus this option cannot be used  for
       non-private modules).

       <b>re|-3.6|<a href="file:/usr/lib/python3/dist-packages/jinja2">/usr/lib/python3/dist-packages/jinja2</a>|.*/async(foo|bar).py</b>    will   skip   byte-compilation   of
       <u>asyncfoo.py</u> and <u>asyncbar.py</u> in <u><a href="file:/usr/lib/python3/dist-packages/jinja2/">/usr/lib/python3/dist-packages/jinja2/</a></u> directory for each interpreter that
       doesn't support <u>async</u> keyword (introduced in Python 3.6).

       If   you   want   to   skip   byte-compilation   in   a   subdirectory   for   all   interpreters,   use:
       <b>dir|-4.0|/usr/lib/python3/dist-packages/foo/tests/</b>.   VERSION_RANGE (<u>-4.0</u> in the example) is described in
       <u>README.PyDist</u> file.

       <u>debian/python3-foo.bcep</u>  file  from  source  package  will  be  included  in  the   binary   package   as
       <u>/usr/share/python3/bcep/python3-foo.bcep</u>

   <b>overriding</b> <b>supported</b> <b>/</b> <b>default</b> <b>Python</b> <b>versions</b>
       If  you  want  to override system's list of supported Python versions or the default one (f.e. to build a
       package that includes symlinks for  older  version  of  Python  or  compile  .py  files  only  for  given
       interpreter version), you can do that via <u>DEBPYTHON3_SUPPORTED</u> and/or <u>DEBPYTHON3_DEFAULT</u> env. variables.

       Example: <b>3.2,3.3</b> limits the list of supported Python versions to Python 3.2 and Python 3.3.

</pre><h4><b>OPTIONS</b></h4><pre>
       <b>--version</b>
              show program's version number and exit

       <b>-h</b>, <b>--help</b>
              show help message and exit

       <b>--no-guessing-deps</b>
              disable guessing dependencies

       <b>--no-dbg-cleaning</b>
              do not remove any files from debug packages

       <b>--no-ext-rename</b>
              do not add magic tags nor multiarch tuples to extension file names

       <b>--no-shebang-rewrite</b>
              do not rewrite shebangs

       <b>--skip-private</b>
              don't check private directories

       <b>-v</b>, <b>--verbose</b>
              turn verbose mode on

       <b>-i</b>, <b>--indep</b>
              act on architecture independent packages

       <b>-a</b>, <b>--arch</b>
              act on architecture dependent packages

       <b>-q</b>, <b>--quiet</b>
              be quiet

       <b>-p</b> <u>PACKAGE</u>, <b>--package=</b><u>PACKAGE</u>
              act on the package named PACKAGE

       <b>-N</b> <u>NO_PACKAGE</u>, <b>--no-package=</b><u>NO_PACKAGE</u>
              do not act on the specified package

       <b>--remaining-packages</b>
              Do  not  act  on the packages which have already been acted on by this command earlier in the same
              override.

       <b>-V</b> <u>VERSION_RANGE</u>
              specify list of supported Python 3 versions. See <a href="../man1/py3compile.1.html">py3compile</a>(1) for examples

       <b>-X</b> <u>REGEXPR</u>, <b>--exclude=</b><u>REGEXPR</u>
              exclude <u>.py</u> files that match given REGEXPR from byte-compilation, in a private dir.  You  may  use
              this option multiple times to build up a list of things to exclude from byte-compilation. See also
              <u>bcep</u> <u>files</u>.

       <b>--compile-all</b>
              compile  all files from given private directory in postinst/rtupdate not just the ones provided by
              the package (i.e. do not pass the --package parameter to py3compile/py3clean)

       <b>--accept-upstream-versions</b>
              accept upstream versions while translating Python dependencies into Debian ones

       <b>--depends=</b><u>DEPENDS</u>
              translate given requirements into Debian dependencies and add them to ${python3:Depends}.  Use  it
              for missing items in <u>requires.txt</u> / <u>Requires-Dist</u>.

       <b>--depends-section=</b><u>SECTION</u>
              translate  requirements  from  given  extra  sections  of  <u>requres.txt</u> / <u>Requires-Dist</u> into Debian
              dependencies and add them to ${python3:Depends}. May be repeated for multiple sections.

       <b>--recommends=</b><u>RECOMMENDS</u>
              translate given requirements into Debian dependencies and add them to ${python3:Recommends}

       <b>--recommends-section=</b><u>SECTION</u>
              translate requirements from given extra sections  of  <u>requires.txt</u>  /  <u>Requires-Dist</u>  into  Debian
              dependencies and add them to ${python3:Recommends}. May be repeated for multiple sections.

       <b>--suggests=</b><u>SUGGESTS</u>
              translate given requirements into Debian dependencies and add them to ${python3:Suggests}

       <b>--suggests-section=</b><u>SECTION</u>
              translate  requirements  from  given  extra  sections  of <u>requires.txt</u> / <u>Requires-Dist</u> into Debian
              dependencies and add them to ${python3:Suggests}. May be repeated for multiple sections.

       <b>--requires=</b><u>FILENAME</u>
              translate  requirements  from  given  file(s)  into  Debian   dependencies   and   add   them   to
              ${python3:Depends}

       <b>--shebang=</b><u>COMMAND</u>
              use given command as shebang in scripts

       <b>--ignore-shebangs</b>
              do not translate shebangs into Debian dependencies

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       • <a href="file:/usr/share/doc/python3/python-policy.txt.gz">/usr/share/doc/python3/python-policy.txt.gz</a>

       • /usr/share/doc/dh-python/README.PyDist

       • <a href="../man1/pybuild.1.html">pybuild</a>(1)

       • <a href="../man1/py3compile.1.html">py3compile</a>(1), <a href="../man1/py3clean.1.html">py3clean</a>(1)

       • <a href="../man1/pycompile.1.html">pycompile</a>(1), <a href="../man1/pyclean.1.html">pyclean</a>(1)

       •
          &lt;<a href="http://deb.li/dhp3">http://deb.li/dhp3</a>&gt;  - most recent version of this document

</pre><h4><b>AUTHOR</b></h4><pre>
       Piotr Ożarowski, 2012-2013

                                                                                                   <u><a href="../man1/DH_PYTHON3.1.html">DH_PYTHON3</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>