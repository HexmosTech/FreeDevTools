<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>perldebguts - Guts of Perl debugging</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/perl-doc">perl-doc_5.40.1-2ubuntu0.1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       perldebguts - Guts of Perl debugging

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This is not perldebug, which tells you how to use the debugger.  This manpage describes low-level details
       concerning the debugger's internals, which range from difficult to impossible to understand for anyone
       who isn't incredibly intimate with Perl's guts.  Caveat lector.

</pre><h4><b>Debugger</b> <b>Internals</b></h4><pre>
       Perl has special debugging hooks at compile-time and run-time used to create debugging environments.
       These hooks are not to be confused with the <u>perl</u> <u>-Dxxx</u> command described in perlrun, which is usable only
       if a special Perl is built per the instructions in the <u>INSTALL</u> file in the Perl source tree.

       For example, whenever you call Perl's built-in "caller" function from the package "DB", the arguments
       that the corresponding stack frame was called with are copied to the @DB::args array.  These mechanisms
       are enabled by calling Perl with the <b>-d</b> switch.  Specifically, the following additional features are
       enabled (cf. "$^P" in perlvar):

       •   Perl  inserts the contents of $ENV{PERL5DB} (or "BEGIN {require 'perl5db.pl'}" if not present) before
           the first line of your program.

       •   Each array "@{"_&lt;$filename"}" holds the lines of $filename for a file compiled by Perl.  The same  is
           also  true for "eval"ed strings that contain subroutines, or which are currently being executed.  The
           $filename for "eval"ed strings looks like "(eval 34)".

           Values in this array are magical in numeric context: they compare equal to zero only if the  line  is
           not breakable.

       •   Each  hash  "%{"_&lt;$filename"}"  contains  breakpoints  and  actions keyed by line number.  Individual
           entries (as opposed to the whole hash) are settable.   Perl  only  cares  about  Boolean  true  here,
           although the values used by <u>perl5db.pl</u> have the form "$break_condition\0$action".

           The same holds for evaluated strings that contain subroutines, or which are currently being executed.
           The $filename for "eval"ed strings looks like "(eval 34)".

       •   Each  scalar "${"_&lt;$filename"}" contains $filename.  This is also the case for evaluated strings that
           contain subroutines, or which are currently being executed.  The $filename for "eval"ed strings looks
           like "(eval 34)".

       •   After each "require"d file is compiled, but before it is executed, DB::postponed(*{"_&lt;$filename"}) is
           called if the subroutine "DB::postponed" exists.  Here, the $filename is the  expanded  name  of  the
           "require"d file, as found in the values of %INC.

       •   After each subroutine "subname" is compiled, the existence of $DB::postponed{subname} is checked.  If
           this key exists, DB::postponed(subname) is called if the "DB::postponed" subroutine also exists.

       •   A  hash  %DB::sub  is  maintained,  whose  keys  are  subroutine names and whose values have the form
           "filename:startline-endline".  "filename" has the form "(eval 34)"  for  subroutines  defined  inside
           "eval"s.

       •   When  the  execution  of  your  program  reaches  a  point  that  can hold a breakpoint, the DB::DB()
           subroutine is called if any of the variables $DB::trace, $DB::single, or $DB::signal is true.   These
           variables  are not "local"izable.  This feature is disabled when executing inside DB::DB(), including
           functions called from it unless "$^D &amp; (1&lt;&lt;30)" is true.

       •   When execution of the program reaches a subroutine call, a call to &amp;DB::sub(<u>args</u>)  is  made  instead,
           with  $DB::sub set to identify the called subroutine.  (This doesn't happen if the calling subroutine
           was compiled in the "DB" package.)  $DB::sub normally holds the name of the called subroutine, if  it
           has  a name by which it can be looked up.  Failing that, $DB::sub will hold a reference to the called
           subroutine.  Either way, the &amp;DB::sub subroutine can use $DB::sub as a reference by which to call the
           called subroutine, which it will normally want to do.

           If the call is to an lvalue subroutine, and &amp;DB::lsub is defined &amp;DB::lsub(<u>args</u>) is  called  instead,
           otherwise falling back to &amp;DB::sub(<u>args</u>).

       •   When  execution  of  the  program uses "goto" to enter a non-XS subroutine and the 0x80 bit is set in
           $^P, a call to &amp;DB::goto is made, with $DB::sub set to identify the subroutine  being  entered.   The
           call  to  &amp;DB::goto  does not replace the "goto"; the requested subroutine will still be entered once
           &amp;DB::goto has returned.  $DB::sub normally holds the name of the subroutine being entered, if it  has
           one.   Failing  that,  $DB::sub  will  hold a reference to the subroutine being entered.  Unlike when
           &amp;DB::sub is called, it is not guaranteed that $DB::sub can be used as a reference to operate  on  the
           subroutine being entered.

       Note  that  if &amp;DB::sub needs external data for it to work, no subroutine call is possible without it. As
       an example, the standard debugger's &amp;DB::sub depends on the  $DB::deep  variable  (it  defines  how  many
       levels  of  recursion  deep  into the debugger you can go before a mandatory break).  If $DB::deep is not
       defined, subroutine calls are not possible, even though &amp;DB::sub exists.

   <b>Writing</b> <b>Your</b> <b>Own</b> <b>Debugger</b>
       <u>Environment</u> <u>Variables</u>

       The "PERL5DB" environment variable can be used to define a debugger.  For example, the minimal  "working"
       debugger (it actually doesn't do anything) consists of one line:

         sub DB::DB {}

       It can easily be defined like this:

         $ PERL5DB="sub DB::DB {}" perl -d your-script

       Another brief debugger, slightly more useful, can be created with only the line:

         sub DB::DB {print ++$i; scalar &lt;STDIN&gt;}

       This  debugger prints a number which increments for each statement encountered and waits for you to hit a
       newline before continuing to the next statement.

       The following debugger is actually useful:

         {
           package DB;
           sub DB  {}
           sub sub {print ++$i, " $sub\n"; &amp;$sub}
         }

       It prints the sequence number of each subroutine call and the name of the called subroutine.   Note  that
       &amp;DB::sub is being compiled into the package "DB" through the use of the "package" directive.

       When  it  starts,  the  debugger  reads  your  rc file (<u>./.perldb</u> or <u><a href="file:~/.perldb">~/.perldb</a></u> under Unix), which can set
       important options.  (A subroutine (&amp;afterinit) can be defined here as well;  it  is  executed  after  the
       debugger completes its own initialization.)

       After  the  rc  file  is read, the debugger reads the PERLDB_OPTS environment variable and uses it to set
       debugger options. The contents of this variable are treated as if they were the argument of  an  "o  ..."
       debugger command (q.v. in "Configurable Options" in perldebug).

       <u>Debugger</u> <u>Internal</u> <u>Variables</u>

       In  addition  to  the  file and subroutine-related variables mentioned above, the debugger also maintains
       various magical internal variables.

       •   @DB::dbline is an alias for "@{"::_&lt;current_file"}", which holds the lines of the  currently-selected
           file  (compiled  by Perl), either explicitly chosen with the debugger's "f" command, or implicitly by
           flow of execution.

           Values in this array are magical in numeric context: they compare equal to zero only if the  line  is
           not breakable.

       •   %DB::dbline  is an alias for "%{"::_&lt;current_file"}", which contains breakpoints and actions keyed by
           line number in the currently-selected file, either explicitly chosen with the debugger's "f" command,
           or implicitly by flow of execution.

           As previously noted, individual entries (as opposed to the whole hash) are settable.  Perl only cares
           about   Boolean   true   here,   although   the   values   used   by   <u>perl5db.pl</u>   have   the   form
           "$break_condition\0$action".

       <u>Debugger</u> <u>Customization</u> <u>Functions</u>

       Some functions are provided to simplify customization.

       •   See    "Configurable   Options"   in   perldebug   for   a   description   of   options   parsed   by
           DB::parse_options(string).

       •   "DB::dump_trace(skip[,count])" skips the specified number of frames and  returns  a  list  containing
           information  about  the calling frames (all of them, if "count" is missing).  Each entry is reference
           to a hash with keys "context" (either ".", "$", or  "@"),  "sub"  (subroutine  name,  or  info  about
           "eval"), "args" ("undef" or a reference to an array), "file", and "line".

       •   "DB::print_trace(FH,  skip[,  count[,  short]])" prints formatted info about caller frames.  The last
           two functions may be convenient as arguments to "&lt;", "&lt;&lt;" commands.

       Note that any variables and functions that are not documented in this  manpages  (or  in  perldebug)  are
       considered for internal use only, and as such are subject to change without notice.

</pre><h4><b>Frame</b> <b>Listing</b> <b>Output</b> <b>Examples</b></h4><pre>
       The  "frame"  option  can be used to control the output of frame information.  For example, contrast this
       expression trace:

        $ perl -de 42
        Stack dump during die enabled outside of evals.

        Loading DB routines from perl5db.pl patch level 0.94
        Emacs support available.

        Enter h or 'h h' for help.

        main::(-e:1):   0
          DB&lt;1&gt; sub foo { 14 }

          DB&lt;2&gt; sub bar { 3 }

          DB&lt;3&gt; t print foo() * bar()
        main::((eval 172):3):   print foo() + bar();
        main::foo((eval 168):2):
        main::bar((eval 170):2):
        42

       with this one, once the "o"ption "frame=2" has been set:

          DB&lt;4&gt; o f=2
                       frame = '2'
          DB&lt;5&gt; t print foo() * bar()
        3:      foo() * bar()
        entering main::foo
         2:     sub foo { 14 };
        exited main::foo
        entering main::bar
         2:     sub bar { 3 };
        exited main::bar
        42

       By way of demonstration, we present below a laborious listing resulting from setting  your  "PERLDB_OPTS"
       environment  variable to the value "f=n N", and running <u>perl</u> <u>-d</u> <u>-V</u> from the command line.  Examples using
       various values of "n" are shown to give you a feel for the difference between settings.  Long  though  it
       may be, this is not a complete listing, but only excerpts.

       1.
            entering main::BEGIN
             entering Config::BEGIN
              Package lib/Exporter.pm.
              Package lib/Carp.pm.
             Package lib/Config.pm.
             entering Config::TIEHASH
             entering Exporter::import
              entering Exporter::export
            entering Config::myconfig
             entering Config::FETCH
             entering Config::FETCH
             entering Config::FETCH
             entering Config::FETCH

       2.
            entering main::BEGIN
             entering Config::BEGIN
              Package lib/Exporter.pm.
              Package lib/Carp.pm.
             exited Config::BEGIN
             Package lib/Config.pm.
             entering Config::TIEHASH
             exited Config::TIEHASH
             entering Exporter::import
              entering Exporter::export
              exited Exporter::export
             exited Exporter::import
            exited main::BEGIN
            entering Config::myconfig
             entering Config::FETCH
             exited Config::FETCH
             entering Config::FETCH
             exited Config::FETCH
             entering Config::FETCH

       3.
            in  $=main::BEGIN() from /dev/null:0
             in  $=Config::BEGIN() from lib/Config.pm:2
              Package lib/Exporter.pm.
              Package lib/Carp.pm.
             Package lib/Config.pm.
             in  $=Config::TIEHASH('Config') from lib/Config.pm:644
             in  $=Exporter::import('Config', 'myconfig', 'config_vars') from /dev/null:0
              in  $=Exporter::export('Config', 'main', 'myconfig', 'config_vars') from li
            in  @=Config::myconfig() from /dev/null:0
             in  $=Config::FETCH(ref(Config), 'package') from lib/Config.pm:574
             in  $=Config::FETCH(ref(Config), 'baserev') from lib/Config.pm:574
             in  $=Config::FETCH(ref(Config), 'PERL_VERSION') from lib/Config.pm:574
             in  $=Config::FETCH(ref(Config), 'PERL_SUBVERSION') from lib/Config.pm:574
             in  $=Config::FETCH(ref(Config), 'osname') from lib/Config.pm:574
             in  $=Config::FETCH(ref(Config), 'osvers') from lib/Config.pm:574

       4.
            in  $=main::BEGIN() from /dev/null:0
             in  $=Config::BEGIN() from lib/Config.pm:2
              Package lib/Exporter.pm.
              Package lib/Carp.pm.
             out $=Config::BEGIN() from lib/Config.pm:0
             Package lib/Config.pm.
             in  $=Config::TIEHASH('Config') from lib/Config.pm:644
             out $=Config::TIEHASH('Config') from lib/Config.pm:644
             in  $=Exporter::import('Config', 'myconfig', 'config_vars') from /dev/null:0
              in  $=Exporter::export('Config', 'main', 'myconfig', 'config_vars') from lib/
              out $=Exporter::export('Config', 'main', 'myconfig', 'config_vars') from lib/
             out $=Exporter::import('Config', 'myconfig', 'config_vars') from /dev/null:0
            out $=main::BEGIN() from /dev/null:0
            in  @=Config::myconfig() from /dev/null:0
             in  $=Config::FETCH(ref(Config), 'package') from lib/Config.pm:574
             out $=Config::FETCH(ref(Config), 'package') from lib/Config.pm:574
             in  $=Config::FETCH(ref(Config), 'baserev') from lib/Config.pm:574
             out $=Config::FETCH(ref(Config), 'baserev') from lib/Config.pm:574
             in  $=Config::FETCH(ref(Config), 'PERL_VERSION') from lib/Config.pm:574
             out $=Config::FETCH(ref(Config), 'PERL_VERSION') from lib/Config.pm:574
             in  $=Config::FETCH(ref(Config), 'PERL_SUBVERSION') from lib/Config.pm:574

       5.
            in  $=main::BEGIN() from /dev/null:0
             in  $=Config::BEGIN() from lib/Config.pm:2
              Package lib/Exporter.pm.
              Package lib/Carp.pm.
             out $=Config::BEGIN() from lib/Config.pm:0
             Package lib/Config.pm.
             in  $=Config::TIEHASH('Config') from lib/Config.pm:644
             out $=Config::TIEHASH('Config') from lib/Config.pm:644
             in  $=Exporter::import('Config', 'myconfig', 'config_vars') from /dev/null:0
              in  $=Exporter::export('Config', 'main', 'myconfig', 'config_vars') from lib/E
              out $=Exporter::export('Config', 'main', 'myconfig', 'config_vars') from lib/E
             out $=Exporter::import('Config', 'myconfig', 'config_vars') from /dev/null:0
            out $=main::BEGIN() from /dev/null:0
            in  @=Config::myconfig() from /dev/null:0
             in  $=Config::FETCH('Config=<a href="../man0x1aa444/HASH.0x1aa444.html">HASH</a>(0x1aa444)', 'package') from lib/Config.pm:574
             out $=Config::FETCH('Config=<a href="../man0x1aa444/HASH.0x1aa444.html">HASH</a>(0x1aa444)', 'package') from lib/Config.pm:574
             in  $=Config::FETCH('Config=<a href="../man0x1aa444/HASH.0x1aa444.html">HASH</a>(0x1aa444)', 'baserev') from lib/Config.pm:574
             out $=Config::FETCH('Config=<a href="../man0x1aa444/HASH.0x1aa444.html">HASH</a>(0x1aa444)', 'baserev') from lib/Config.pm:574

       6.
            in  $=<a href="../man0x15eca4/CODE.0x15eca4.html">CODE</a>(0x15eca4)() from /dev/null:0
             in  $=<a href="../man0x182528/CODE.0x182528.html">CODE</a>(0x182528)() from lib/Config.pm:2
              Package lib/Exporter.pm.
             out $=<a href="../man0x182528/CODE.0x182528.html">CODE</a>(0x182528)() from lib/Config.pm:0
             scalar context return from <a href="../man0x182528/CODE.0x182528.html">CODE</a>(0x182528): undef
             Package lib/Config.pm.
             in  $=Config::TIEHASH('Config') from lib/Config.pm:628
             out $=Config::TIEHASH('Config') from lib/Config.pm:628
             scalar context return from Config::TIEHASH:   empty hash
             in  $=Exporter::import('Config', 'myconfig', 'config_vars') from /dev/null:0
              in  $=Exporter::export('Config', 'main', 'myconfig', 'config_vars') from lib/Exporter.pm:171
              out $=Exporter::export('Config', 'main', 'myconfig', 'config_vars') from lib/Exporter.pm:171
              scalar context return from Exporter::export: ''
             out $=Exporter::import('Config', 'myconfig', 'config_vars') from /dev/null:0
             scalar context return from Exporter::import: ''

       In  all  cases shown above, the line indentation shows the call tree.  If bit 2 of "frame" is set, a line
       is printed on exit from a subroutine as well.  If bit 4 is set, the arguments are printed along with  the
       caller  info.  If bit 8 is set, the arguments are printed even if they are tied or references.  If bit 16
       is set, the return value is printed, too.

       When a package is compiled, a line like this

           Package lib/Carp.pm.

       is printed with proper indentation.

</pre><h4><b>Debugging</b> <b>Regular</b> <b>Expressions</b></h4><pre>
       There are two ways to enable debugging output for regular expressions.

       If your perl is compiled with "-DDEBUGGING", you may use the <b>-Dr</b> flag on the command line, and "-Drv" for
       more verbose information.

       Otherwise, one can "use re 'debug'", which has effects at both compile time and  run  time.   Since  Perl
       5.9.5, this pragma is lexically scoped.

   <b>Compile-time</b> <b>Output</b>
       The debugging output at compile time looks like this:

         Compiling REx '[bc]d(ef*g)+h[ij]k$'
         size 45 Got 364 bytes for offset annotations.
         first at 1
         rarest char g at 0
         rarest char d at 0
            1: ANYOF[bc](12)
           12: EXACT &lt;d&gt;(14)
           14: CURLYX[0] {1,32767}(28)
           16:   <a href="../man18/OPEN1.18.html">OPEN1</a>(18)
           18:     EXACT &lt;e&gt;(20)
           20:     <a href="../man23/STAR.23.html">STAR</a>(23)
           21:       EXACT &lt;f&gt;(0)
           23:     EXACT &lt;g&gt;(25)
           25:   <a href="../man27/CLOSE1.27.html">CLOSE1</a>(27)
           27:   WHILEM[1/1](0)
           28: <a href="../man29/NOTHING.29.html">NOTHING</a>(29)
           29: EXACT &lt;h&gt;(31)
           31: ANYOF[ij](42)
           42: EXACT &lt;k&gt;(44)
           44: <a href="../man45/EOL.45.html">EOL</a>(45)
           45: <a href="../man0/END.0.html">END</a>(0)
         anchored 'de' at 1 floating 'gh' at 3..2147483647 (checking floating)
               stclass 'ANYOF[bc]' minlen 7
         Offsets: [45]
               1[4] 0[0] 0[0] 0[0] 0[0] 0[0] 0[0] 0[0] 0[0] 0[0] 0[0] 5[1]
               0[0] 12[1] 0[0] 6[1] 0[0] 7[1] 0[0] 9[1] 8[1] 0[0] 10[1] 0[0]
               11[1] 0[0] 12[0] 12[0] 13[1] 0[0] 14[4] 0[0] 0[0] 0[0] 0[0]
               0[0] 0[0] 0[0] 0[0] 0[0] 0[0] 18[1] 0[0] 19[1] 20[0]
         Omitting $` $&amp; $' support.

       The  first line shows the pre-compiled form of the regex.  The second shows the size of the compiled form
       (in arbitrary units, usually 4-byte words) and the total number of bytes allocated for the  offset/length
       table, usually 4+"size"*8.  The next line shows the label <u>id</u> of the first node that does a match.

       The

         anchored 'de' at 1 floating 'gh' at 3..2147483647 (checking floating)
               stclass 'ANYOF[bc]' minlen 7

       line  (split  into  two lines above) contains optimizer information.  In the example shown, the optimizer
       found that the match should contain a substring "de" at offset 1, plus  substring  "gh"  at  some  offset
       between  3  and  infinity.   Moreover,  when checking for these substrings (to abandon impossible matches
       quickly), Perl will check for the substring "gh" before checking for the substring "de".   The  optimizer
       may  also  use  the  knowledge  that  the match starts (at the "first" <u>id</u>) with a character class, and no
       string shorter than 7 characters can possibly match.

       The fields of interest which may appear in this line are

       "anchored" <u>STRING</u> "at" <u>POS</u>
       "floating" <u>STRING</u> "at" <u>POS1..POS2</u>
           See above.

       "matching floating/anchored"
           Which substring to check first.

       "minlen"
           The minimal length of the match.

       "stclass" <u>TYPE</u>
           Type of first matching node.

       "noscan"
           Don't scan for the found substrings.

       "isall"
           Means that the optimizer information is all that the regular expression contains, and thus  one  does
           not need to enter the regex engine at all.

       "GPOS"
           Set if the pattern contains "\G".

       "plus"
           Set if the pattern starts with a repeated char (as in "x+y").

       "implicit"
           Set if the pattern starts with ".*".

       "with eval"
           Set if the pattern contain eval-groups, such as "(?{ code })" and "(??{ code })".

       anchored(TYPE)
           If  the  pattern  may match only at a handful of places, with "TYPE" being "SBOL", "MBOL", or "GPOS".
           See the table below.

       If a substring is known to match at end-of-line only, it may be followed by "$", as in "floating 'k'$".

       The optimizer-specific information is used to avoid entering (a slow) regex engine on strings  that  will
       not  definitely  match.   If the "isall" flag is set, a call to the regex engine may be avoided even when
       the optimizer found an appropriate place for the match.

       Above the optimizer section is the list of <u>nodes</u> of the compiled form of the regex.  Each line has format

       "   "<u>id</u>: <u>TYPE</u> <u>OPTIONAL-INFO</u> (<u>next-id</u>)

   <b>Types</b> <b>of</b> <b>Nodes</b>
       Here are the current possible types, with short descriptions:

        # TYPE arg-description [regnode-struct-suffix] [longjump-len] DESCRIPTION

        # Exit points

        END              no         End of program.
        SUCCEED          no         Return from a subroutine, basically.

        # Line Start Anchors:
        SBOL             no         Match "" at beginning of line: /^/, /\A/
        MBOL             no         Same, assuming multiline: /^/m

        # Line End Anchors:
        SEOL             no         Match "" at end of line: /$/
        MEOL             no         Same, assuming multiline: /$/m
        EOS              no         Match "" at end of string: /\z/

        # Match Start Anchors:
        GPOS             no         Matches where last m//g left off.

        # Word Boundary Opcodes:
        BOUND            no         Like BOUNDA for non-utf8, otherwise like
                                    BOUNDU
        BOUNDL           no         Like BOUND/BOUNDU, but \w and \W are
                                    defined by current locale
        BOUNDU           no         Match "" at any boundary of a given type
                                    using /u rules.
        BOUNDA           no         Match "" at any boundary between \w\W or
                                    \W\w, where \w is [_a-zA-Z0-9]
        NBOUND           no         Like NBOUNDA for non-utf8, otherwise like
                                    BOUNDU
        NBOUNDL          no         Like NBOUND/NBOUNDU, but \w and \W are
                                    defined by current locale
        NBOUNDU          no         Match "" at any non-boundary of a given
                                    type using using /u rules.
        NBOUNDA          no         Match "" betweeen any \w\w or \W\W, where
                                    \w is [_a-zA-Z0-9]

        # [Special] alternatives:
        REG_ANY          no         Match any one character (except newline).
        SANY             no         Match any one character.
        ANYOF            sv         Match character in (or not in) this class,
                         charclass  single char match only
        ANYOFD           sv         Like ANYOF, but /d is in effect
                         charclass
        ANYOFL           sv         Like ANYOF, but /l is in effect
                         charclass
        ANYOFPOSIXL      sv         Like ANYOFL, but matches [[:posix:]]
                         charclass_ classes
                         posixl

        ANYOFH           sv 1       Like ANYOF, but only has "High" matches,
                                    none in the bitmap; the flags field
                                    contains the lowest matchable UTF-8 start
                                    byte
        ANYOFHb          sv 1       Like ANYOFH, but all matches share the same
                                    UTF-8 start byte, given in the flags field
        ANYOFHr          sv 1       Like ANYOFH, but the flags field contains
                                    packed bounds for all matchable UTF-8 start
                                    bytes.
        ANYOFHs          sv:str 1   Like ANYOFHb, but has a string field that
                                    gives the leading matchable UTF-8 bytes;
                                    flags field is len
        ANYOFR           packed 1   Matches any character in the range given by
                                    its packed args: upper 12 bits is the max
                                    delta from the base lower 20; the flags
                                    field contains the lowest matchable UTF-8
                                    start byte
        ANYOFRb          packed 1   Like ANYOFR, but all matches share the same
                                    UTF-8 start byte, given in the flags field

        ANYOFHbbm        none bbm   Like ANYOFHb, but only for 2-byte UTF-8
                                    characters; uses a bitmap to match the
                                    continuation byte

        ANYOFM           byte 1     Like ANYOF, but matches an invariant byte
                                    as determined by the mask and arg
        NANYOFM          byte 1     complement of ANYOFM

        # POSIX Character Classes:
        POSIXD           none       Some [[:class:]] under /d; the FLAGS field
                                    gives which one
        POSIXL           none       Some [[:class:]] under /l; the FLAGS field
                                    gives which one
        POSIXU           none       Some [[:class:]] under /u; the FLAGS field
                                    gives which one
        POSIXA           none       Some [[:class:]] under /a; the FLAGS field
                                    gives which one
        NPOSIXD          none       complement of POSIXD, [[:^class:]]
        NPOSIXL          none       complement of POSIXL, [[:^class:]]
        NPOSIXU          none       complement of POSIXU, [[:^class:]]
        NPOSIXA          none       complement of POSIXA, [[:^class:]]

        CLUMP            no         Match any extended grapheme cluster
                                    sequence

        # Alternation

        # BRANCH        The set of branches constituting a single choice are
        #               hooked together with their "next" pointers, since
        #               precedence prevents anything being concatenated to
        #               any individual branch.  The "next" pointer of the last
        #               BRANCH in a choice points to the thing following the
        #               whole choice.  This is also where the final "next"
        #               pointer of each individual branch points; each branch
        #               starts with the operand node of a BRANCH node.
        #
        BRANCH           node 1     Match this alternative, or the next...

        # Literals

        EXACT            str        Match this string (flags field is the
                                    length).

        # In a long string node, the U32 argument is the length, and is
        # immediately followed by the string.
        LEXACT           len:str 1  Match this long string (preceded by length;
                                    flags unused).
        EXACTL           str        Like EXACT, but /l is in effect (used so
                                    locale-related warnings can be checked for)
        EXACTF           str        Like EXACT, but match using /id rules;
                                    (string not UTF-8, ASCII folded; non-ASCII
                                    not)
        EXACTFL          str        Like EXACT, but match using /il rules;
                                    (string not likely to be folded)
        EXACTFU          str        Like EXACT, but match using /iu rules;
                                    (string folded)

        EXACTFAA         str        Like EXACT, but match using /iaa rules;
                                    (string folded except MICRO in non-UTF8
                                    patterns; doesn't contain SHARP S unless
                                    UTF-8; folded length &lt;= unfolded)
        EXACTFAA_NO_TRIE str        Like EXACTFAA, (string not UTF-8, folded
                                    except: MICRO, SHARP S; folded length &lt;=
                                    unfolded, not currently trie-able)

        EXACTFUP         str        Like EXACT, but match using /iu rules;
                                    (string not UTF-8, folded except MICRO:
                                    hence Problematic)

        EXACTFLU8        str        Like EXACTFU, but use /il, UTF-8, (string
                                    is folded, and everything in it is above
                                    255
        EXACT_REQ8       str        Like EXACT, but only UTF-8 encoded targets
                                    can match
        LEXACT_REQ8      len:str 1  Like LEXACT, but only UTF-8 encoded targets
                                    can match
        EXACTFU_REQ8     str        Like EXACTFU, but only UTF-8 encoded
                                    targets can match

        EXACTFU_S_EDGE   str        /di rules, but nothing in it precludes /ui,
                                    except begins and/or ends with [Ss];
                                    (string not UTF-8; compile-time only)

        # New charclass like patterns
        LNBREAK          none       generic newline pattern

        # Trie Related

        # Behave the same as A|LIST|OF|WORDS would. The '..C' variants
        # have inline charclass data (ascii only), the 'C' store it in the
        # structure.

        TRIE             trie 1     Match many EXACT(F[ALU]?)? at once.
                                    flags==type
        TRIEC            trie       Same as TRIE, but with embedded charclass
                         charclass  data

        AHOCORASICK      trie 1     Aho Corasick stclass. flags==type
        AHOCORASICKC     trie       Same as AHOCORASICK, but with embedded
                         charclass  charclass data

        # Do nothing types

        NOTHING          no         Match empty string.
        # A variant of above which delimits a group, thus stops optimizations
        TAIL             no         Match empty string. Can jump here from
                                    outside.

        # Loops

        # STAR,PLUS    '?', and complex '*' and '+', are implemented as
        #               circular BRANCH structures.  Simple cases
        #               (one character per match) are implemented with STAR
        #               and PLUS for speed and to minimize recursive plunges.
        #
        STAR             node       Match this (simple) thing 0 or more times:
                                    /A{0,}B/ where A is width 1 char
        PLUS             node       Match this (simple) thing 1 or more times:
                                    /A{1,}B/ where A is width 1 char

        CURLY            sv 3       Match this (simple) thing {n,m} times:
                                    /A{m,n}B/ where A is width 1 char
        CURLYN           no 3       Capture next-after-this simple thing:
                                    /(A){m,n}B/ where A is width 1 char
        CURLYM           no 3       Capture this medium-complex thing {n,m}
                                    times: /(A){m,n}B/ where A is fixed-length
        CURLYX           sv 3       Match/Capture this complex thing {n,m}
                                    times.

        # This terminator creates a loop structure for CURLYX
        WHILEM           no         Do curly processing and see if rest
                                    matches.

        # Buffer related

        # OPEN,CLOSE,GROUPP     ...are numbered at compile time.
        OPEN             num 1      Mark this point in input as start of #n.
        CLOSE            num 1      Close corresponding OPEN of #n.
        SROPEN           none       Same as OPEN, but for script run
        SRCLOSE          none       Close preceding SROPEN

        REF              num 2      Match some already matched string
        REFF             num 2      Match already matched string, using /di
                                    rules.
        REFFL            num 2      Match already matched string, using /li
                                    rules.
        REFFU            num 2      Match already matched string, usng /ui.
        REFFA            num 2      Match already matched string, using /aai
                                    rules.

        # Named references.  Code in regcomp.c assumes that these all are after
        # the numbered references
        REFN             no-sv 2    Match some already matched string
        REFFN            no-sv 2    Match already matched string, using /di
                                    rules.
        REFFLN           no-sv 2    Match already matched string, using /li
                                    rules.
        REFFUN           num 2      Match already matched string, using /ui
                                    rules.
        REFFAN           num 2      Match already matched string, using /aai
                                    rules.

        # Support for long RE
        LONGJMP          off 1 1    Jump far away.
        BRANCHJ          off 2 1    BRANCH with long offset.

        # Special Case Regops
        IFMATCH          off 1 1    Succeeds if the following matches; non-zero
                                    flags "f", next_off "o" means lookbehind
                                    assertion starting "f..(f-o)" characters
                                    before current
        UNLESSM          off 1 1    Fails if the following matches; non-zero
                                    flags "f", next_off "o" means lookbehind
                                    assertion starting "f..(f-o)" characters
                                    before current
        SUSPEND          off 1 1    "Independent" sub-RE.
        IFTHEN           off 1 1    Switch, should be preceded by switcher.
        GROUPP           num 1      Whether the group matched.

        # The heavy worker

        EVAL             evl/flags  Execute some Perl code.
                         2

        # Modifiers

        MINMOD           no         Next operator is not greedy.
        LOGICAL          no         Next opcode should set the flag only.

        # This is not used yet
        RENUM            off 1 1    Group with independently numbered parens.

        # Regex Subroutines
        GOSUB            num/ofs 2  recurse to paren arg1 at (signed) ofs arg2

        # Special conditionals
        GROUPPN          no-sv 1    Whether the group matched.
        INSUBP           num 1      Whether we are in a specific recurse.
        DEFINEP          none 1     Never execute directly.

        # Backtracking Verbs
        ENDLIKE          none       Used only for the type field of verbs
        OPFAIL           no-sv 1    Same as (?!), but with verb arg
        ACCEPT           no-sv/num  Accepts the current matched string, with
                         2          verbar

        # Verbs With Arguments
        VERB             no-sv 1    Used only for the type field of verbs
        PRUNE            no-sv 1    Pattern fails at this startpoint if no-
                                    backtracking through this
        MARKPOINT        no-sv 1    Push the current location for rollback by
                                    cut.
        SKIP             no-sv 1    On failure skip forward (to the mark)
                                    before retrying
        COMMIT           no-sv 1    Pattern fails outright if backtracking
                                    through this
        CUTGROUP         no-sv 1    On failure go to the next alternation in
                                    the group

        # Control what to keep in $&amp;.
        KEEPS            no         $&amp; begins here.

        # Validate that lookbehind IFMATCH and UNLESSM end at the right place
        LOOKBEHIND_END   no         Return from lookbehind (IFMATCH/UNLESSM)
                                    and validate position

        # SPECIAL  REGOPS

        # This is not really a node, but an optimized away piece of a "long"
        # node.  To simplify debugging output, we mark it as if it were a node
        OPTIMIZED        off        Placeholder for dump.

        # Special opcode with the property that no opcode in a compiled program
        # will ever be of this type. Thus it can be used as a flag value that
        # no other opcode has been seen. END is used similarly, in that an END
        # node cant be optimized. So END implies "unoptimizable" and PSEUDO
        # mean "not seen anything to optimize yet".
        PSEUDO           off        Pseudo opcode for internal use.

        REGEX_SET        depth p    Regex set, temporary node used in pre-
                                    optimization compilation

       Following the optimizer information is a dump of the  offset/length  table,  here  split  across  several
       lines:

         Offsets: [45]
               1[4] 0[0] 0[0] 0[0] 0[0] 0[0] 0[0] 0[0] 0[0] 0[0] 0[0] 5[1]
               0[0] 12[1] 0[0] 6[1] 0[0] 7[1] 0[0] 9[1] 8[1] 0[0] 10[1] 0[0]
               11[1] 0[0] 12[0] 12[0] 13[1] 0[0] 14[4] 0[0] 0[0] 0[0] 0[0]
               0[0] 0[0] 0[0] 0[0] 0[0] 0[0] 18[1] 0[0] 19[1] 20[0]

       The  first line here indicates that the offset/length table contains 45 entries.  Each entry is a pair of
       integers, denoted by "offset[length]".  Entries are numbered starting with 1, so entry #1 here is  "1[4]"
       and  entry  #12  is  "5[1]".   "1[4]" indicates that the node labeled "1:" (the "1: ANYOF[bc]") begins at
       character position 1 in the pre-compiled form of the regex, and has a length of 4 characters.  "5[1]"  in
       position 12 indicates that the node labeled "12:" (the "12: EXACT &lt;d&gt;") begins at character position 5 in
       the  pre-compiled  form  of the regex, and has a length of 1 character.  "12[1]" in position 14 indicates
       that the node labeled "14:" (the "14: CURLYX[0] {1,32767}") begins at character position 12 in  the  pre-
       compiled  form  of the regex, and has a length of 1 character---that is, it corresponds to the "+" symbol
       in the precompiled regex.

       "0[0]" items indicate that there is no corresponding node.

   <b>Run-time</b> <b>Output</b>
       First of all, when doing a match, one may get no run-time output even  if  debugging  is  enabled.   This
       means  that  the  regex  engine  was  never  entered  and  that  all of the job was therefore done by the
       optimizer.

       If the regex engine was entered, the output may look like this:

         Matching '[bc]d(ef*g)+h[ij]k$' against 'abcdefg__gh__'
           Setting an EVAL scope, savestack=3
            2 &lt;ab&gt; &lt;cdefg__gh_&gt;    |  1: ANYOF
            3 &lt;abc&gt; &lt;defg__gh_&gt;    | 11: EXACT &lt;d&gt;
            4 &lt;abcd&gt; &lt;efg__gh_&gt;    | 13: CURLYX {1,32767}
            4 &lt;abcd&gt; &lt;efg__gh_&gt;    | 26:   WHILEM
                                       0 out of 1..32767  cc=effff31c
            4 &lt;abcd&gt; &lt;efg__gh_&gt;    | 15:     OPEN1
            4 &lt;abcd&gt; &lt;efg__gh_&gt;    | 17:     EXACT &lt;e&gt;
            5 &lt;abcde&gt; &lt;fg__gh_&gt;    | 19:     STAR
                                    EXACT &lt;f&gt; can match 1 times out of 32767...
           Setting an EVAL scope, savestack=3
            6 &lt;bcdef&gt; &lt;g__gh__&gt;    | 22:       EXACT &lt;g&gt;
            7 &lt;bcdefg&gt; &lt;__gh__&gt;    | 24:       CLOSE1
            7 &lt;bcdefg&gt; &lt;__gh__&gt;    | 26:       WHILEM
                                           1 out of 1..32767  cc=effff31c
           Setting an EVAL scope, savestack=12
            7 &lt;bcdefg&gt; &lt;__gh__&gt;    | 15:         OPEN1
            7 &lt;bcdefg&gt; &lt;__gh__&gt;    | 17:         EXACT &lt;e&gt;
              restoring \1 to <a href="../man4/4.4.html">4</a>(4)..7
                                           failed, try continuation...
            7 &lt;bcdefg&gt; &lt;__gh__&gt;    | 27:         NOTHING
            7 &lt;bcdefg&gt; &lt;__gh__&gt;    | 28:         EXACT &lt;h&gt;
                                           failed...
                                       failed...

       The most significant information in the output is about the particular <u>node</u> of the compiled regex that is
       currently being tested against the target string.  The format of these lines is

       "    "<u>STRING-OFFSET</u> &lt;<u>PRE-STRING</u>&gt; &lt;<u>POST-STRING</u>&gt;   |<u>ID</u>:  <u>TYPE</u>

       The <u>TYPE</u> info is indented with respect to the backtracking level.  Other incidental  information  appears
       interspersed within.

</pre><h4><b>Debugging</b> <b>Perl</b> <b>Memory</b> <b>Usage</b></h4><pre>
       Perl  is  a  profligate  wastrel  when it comes to memory use.  There is a saying that to estimate memory
       usage of Perl, assume a reasonable algorithm for memory allocation, multiply that  estimate  by  10,  and
       while  you  still  may  miss the mark, at least you won't be quite so astonished.  This is not absolutely
       true, but may provide a good grasp of what happens.

       Assume that an integer cannot take less than 20 bytes of memory, a float cannot take less than 24  bytes,
       a  string  cannot take less than 32 bytes (all these examples assume 32-bit architectures, the result are
       quite a bit worse on 64-bit architectures).  If a variable is accessed in two  of  three  different  ways
       (which require an integer, a float, or a string), the memory footprint may increase yet another 20 bytes.
       A sloppy <b><a href="../man3/malloc.3.html">malloc</a></b>(3) implementation can inflate these numbers dramatically.

       On the opposite end of the scale, a declaration like

         sub foo;

       may take up to 500 bytes of memory, depending on which release of Perl you're running.

       Anecdotal  estimates of source-to-compiled code bloat suggest an eightfold increase.  This means that the
       compiled form of reasonable (normally commented, properly indented etc.) code will take about eight times
       more space in memory than the code took on disk.

       The <b>-DL</b> command-line switch is obsolete since circa Perl 5.6.0 (it was available only if Perl  was  built
       with  "-DDEBUGGING").   The switch was used to track Perl's memory allocations and possible memory leaks.
       These days the use of malloc debugging tools like <u>Purify</u> or <u>valgrind</u>  is  suggested  instead.   See  also
       "PERL_MEM_LOG" in perlhacktips.

       One  way  to find out how much memory is being used by Perl data structures is to install the Devel::Size
       module from CPAN: it gives you the minimum number of bytes required to store a particular data structure.
       Please be mindful of the difference between the <b>size()</b> and <b>total_size()</b>.

       If  Perl  has  been  compiled  using  Perl's  malloc  you  can  analyze  Perl  memory  usage  by  setting
       $ENV{PERL_DEBUG_MSTATS}.

   <b>Using</b> <b>$ENV{PERL_DEBUG_MSTATS}</b>
       If your perl is using Perl's <b>malloc()</b> and was compiled with the necessary switches (this is the default),
       then  it will print memory usage statistics after compiling your code when "$ENV{PERL_DEBUG_MSTATS} &gt; 1",
       and before termination of the program when "$ENV{PERL_DEBUG_MSTATS} &gt;= 1".  The report format is  similar
       to the following example:

        $ PERL_DEBUG_MSTATS=2 perl -e "require Carp"
        Memory allocation statistics after compilation: (buckets <a href="../man4/4.4.html">4</a>(4)..<a href="../man8192/8188.8192.html">8188</a>(8192)
           14216 free:   130   117    28     7     9   0   2     2   1 0 0
                       437    61    36     0     5
           60924 used:   125   137   161    55     7   8   6    16   2 0 1
                        74   109   304    84    20
        Total sbrk(): 77824/21:119. Odd ends: pad+heads+chain+tail: 0+636+0+2048.
        Memory allocation statistics after execution:   (buckets <a href="../man4/4.4.html">4</a>(4)..<a href="../man8192/8188.8192.html">8188</a>(8192)
           30888 free:   245    78    85    13     6   2   1     3   2 0 1
                       315   162    39    42    11
          175816 used:   265   176  1112   111    26  22  11    27   2 1 1
                       196   178  1066   798    39
        Total sbrk(): 215040/47:145. Odd ends: pad+heads+chain+tail: 0+2192+0+6144.

       It  is  possible  to  ask  for  such  a statistic at arbitrary points in your execution using the <b>mstat()</b>
       function out of the standard Devel::Peek module.

       Here is some explanation of that format:

       "buckets SMALLEST(APPROX)..GREATEST(APPROX)"
           Perl's <b>malloc()</b> uses bucketed allocations.  Every request is rounded up to the  closest  bucket  size
           available, and a bucket is taken from the pool of buckets of that size.

           The  line  above describes the limits of buckets currently in use.  Each bucket has two sizes: memory
           footprint and the maximal size of user data that can fit into this  bucket.   Suppose  in  the  above
           example  that  the  smallest bucket were size 4.  The biggest bucket would have usable size 8188, and
           the memory footprint would be 8192.

           In a Perl built for debugging, some buckets may have negative usable size.   This  means  that  these
           buckets  cannot  (and  will  not)  be used.  For larger buckets, the memory footprint may be one page
           greater than a power of 2.  If so, the corresponding power of two is printed in  the  "APPROX"  field
           above.

       Free/Used
           The  1  or  2 rows of numbers following that correspond to the number of buckets of each size between
           "SMALLEST" and "GREATEST".  In the first row, the sizes (memory footprints) of buckets are powers  of
           two--or  possibly  one  page  greater.   In  the second row, if present, the memory footprints of the
           buckets are between the memory footprints of two buckets "above".

           For example, suppose under the previous example, the memory footprints were

              free:    8     16    32    64    128  256 512 1024 2048 4096 8192
                      4     12    24    48    80

           With a non-"DEBUGGING" perl, the buckets starting from 128  have  a  4-byte  overhead,  and  thus  an
           8192-long bucket may take up to 8188-byte allocations.

       "Total sbrk(): SBRKed/SBRKs:CONTINUOUS"
           The  first  two  fields give the total amount of memory perl <b><a href="../man2/sbrk.2.html">sbrk</a></b>(2)ed (ess-broken? :-) and number of
           <b><a href="../man2/sbrk.2.html">sbrk</a></b>(2)s used.  The third number is what perl thinks about continuity of returned chunks.  So long as
           this number is positive, <b>malloc()</b>  will  assume  that  it  is  probable  that  <b><a href="../man2/sbrk.2.html">sbrk</a></b>(2)  will  provide
           continuous memory.

           Memory allocated by external libraries is not counted.

       "pad: 0"
           The amount of <b><a href="../man2/sbrk.2.html">sbrk</a></b>(2)ed memory needed to keep buckets aligned.

       "heads: 2192"
           Although memory overhead of bigger buckets is kept inside the bucket, for smaller buckets, it is kept
           in separate areas.  This field gives the total size of these areas.

       "chain: 0"
           <b>malloc()</b>  may want to subdivide a bigger bucket into smaller buckets.  If only a part of the deceased
           bucket is left unsubdivided, the rest is kept as an element of a linked list.  This field  gives  the
           total size of these chunks.

       "tail: 6144"
           To  minimize the number of <b><a href="../man2/sbrk.2.html">sbrk</a></b>(2)s, <b>malloc()</b> asks for more memory.  This field gives the size of the
           yet unused part, which is <b><a href="../man2/sbrk.2.html">sbrk</a></b>(2)ed, but never touched.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       perldebug, perl5db.pl, perlguts, perlrun, re, and Devel::DProf.

perl v5.40.1                                       2025-04-14                                     <u><a href="../man1/PERLDEBGUTS.1.html">PERLDEBGUTS</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>