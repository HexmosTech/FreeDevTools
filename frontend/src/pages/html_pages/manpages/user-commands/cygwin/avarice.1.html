<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>avarice - Provides an interface from avr-gdb to Atmel's AVR in-circuit debugging tools</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/avarice">avarice_2.14+svn427-2_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       avarice - Provides an interface from avr-gdb to Atmel's AVR in-circuit debugging tools

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>avarice</b> [<u>OPTIONS</u>]... [[<u>HOST_NAME</u>]:<u>PORT</u>]

</pre><h4><b>DESCRIPTION</b></h4><pre>
       AVaRICE  runs  on a POSIX machine and connects to gdb via a TCP socket and communicates via gdb's "serial
       debug protocol". This protocol allows gdb to send commands like "set/remove breakpoint"  and  "read/write
       memory".

       AVaRICE translates these commands into the Atmel protocol used to control the AVR JTAG ICE. Connection to
       the AVR JTAG ICE is via a serial port on the POSIX machine.

       Because  the GDB &lt;---&gt; AVaRICE connection is via a TCP socket, the two programs do not need to run on the
       same machine. In an office environment, this allows a developer to debug a target in  the  lab  from  the
       comfort of their cube (or even better, their home!)

       <b>NOTE:</b>  Even though you can run <b>avarice</b> and <b>avr-gdb</b> on different systems, it is not recommended because of
             the security risk involved.  <b>avarice</b>  was  not  designed  to  be  a  secure  server.  There  is  no
             authentication performed when a client connects to <b>avarice</b> when it is running in gdb server mode.

   <b>Supported</b> <b>Devices</b>
       <b>avarice</b> currently has support for the following devices:
           at90can128
           at90can32 (<b>o</b>)
           at90can64 (<b>o</b>)
           at90pwm2 (<b>o</b>) (<b>+</b>)
           at90pwm216 (<b>o</b>) (<b>+</b>)
           at90pwm2b (<b>o</b>) (<b>+</b>)
           at90pwm3 (<b>o</b>) (<b>+</b>)
           at90pwm316 (<b>o</b>) (<b>+</b>)
           at90pwm3b (<b>o</b>) (<b>+</b>)
           at90usb1287 (<b>o</b>)
           at90usb162 (<b>o</b>) (<b>+</b>)
           at90usb646 (<b>o</b>)
           at90usb647 (<b>o</b>)
           atmega128
           atmega1280 (<b>o</b>)
           atmega1281 (<b>o</b>)
           atmega1284p (<b>o</b>)
           atmega128rfa1 (<b>o</b>)
           atmega16
           atmega162
           atmega164p (<b>o</b>)
           atmega165 (<b>o</b>)
           atmega165p (<b>o</b>)
           atmega168 (<b>o</b>) (<b>+</b>)
           atmega168p (<b>o</b>) (<b>+</b>)
           atmega169
           atmega16hva (<b>o</b>)
           atmega16m1 (<b>o</b>) (<b>+</b>)
           atmega2560 (<b>o</b>)
           atmega2561 (<b>o</b>)
           atmega32
           atmega323
           atmega324p (<b>o</b>)
           atmega325 (<b>o</b>)
           atmega3250 (<b>o</b>)
           atmega3250p (<b>o</b>)
           atmega325p (<b>o</b>)
           atmega328p (<b>o</b>) (<b>+</b>)
           atmega329 (<b>o</b>)
           atmega3290 (<b>o</b>)
           atmega3290p (<b>o</b>)
           atmega329p (<b>o</b>)
           atmega32c1 (<b>o</b>) (<b>+</b>)
           atmega32hvb (<b>o</b>) (<b>+</b>)
           atmega32m1 (<b>o</b>) (<b>+</b>)
           atmega32u4 (<b>o</b>)
           atmega406 (<b>o</b>)
           atmega48 (<b>o</b>) (<b>+</b>)
           atmega48p (<b>o</b>) (<b>+</b>)
           atmega64
           atmega640 (<b>o</b>)
           atmega644 (<b>o</b>)
           atmega644p (<b>o</b>)
           atmega645 (<b>o</b>)
           atmega6450 (<b>o</b>)
           atmega649 (<b>o</b>)
           atmega6490 (<b>o</b>)
           atmega64c1 (<b>o</b>) (<b>+</b>)
           atmega64m1 (<b>o</b>) (<b>+</b>)
           atmega88 (<b>o</b>) (<b>+</b>)
           atmega88p (<b>o</b>) (<b>+</b>)
           attiny13 (<b>o</b>) (<b>+</b>)
           attiny167 (<b>o</b>) (<b>+</b>)
           attiny2313 (<b>o</b>) (<b>+</b>)
           attiny24 (<b>o</b>) (<b>+</b>)
           attiny25 (<b>o</b>) (<b>+</b>)
           attiny261 (<b>o</b>) (<b>+</b>)
           attiny4313 (<b>o</b>) (<b>+</b>)
           attiny43u (<b>o</b>) (<b>+</b>)
           attiny44 (<b>o</b>) (<b>+</b>)
           attiny45 (<b>o</b>) (<b>+</b>)
           attiny461 (<b>o</b>) (<b>+</b>)
           attiny48 (<b>o</b>) (<b>+</b>)
           attiny84 (<b>o</b>) (<b>+</b>)
           attiny85 (<b>o</b>) (<b>+</b>)
           attiny861 (<b>o</b>) (<b>+</b>)
           attiny88 (<b>o</b>) (<b>+</b>)
           atxmega128a1 (<b>o</b>) (<b>*</b>)
           atxmega128a1revd (<b>o</b>) (<b>*</b>)
           atxmega128a3 (<b>o</b>) (<b>*</b>)
           atxmega192a3 (<b>o</b>) (<b>*</b>)
           atxmega256a3 (<b>o</b>) (<b>*</b>)
           atxmega32a4 (<b>o</b>) (<b>*</b>)
           atxmega16d4 (<b>o</b>) (<b>*</b>)
           atxmega128b1 (<b>o</b>) (<b>*</b>)
           atxmega128b3 (<b>o</b>) (<b>*</b>)
           atxmega64b1 (<b>o</b>) (<b>*</b>)
           atxmega64b3 (<b>o</b>) (<b>*</b>)

       <b>o</b> - Not supported by JTAG ICE mkI
       <b>*</b> - Xmega device, requires firmware version of at least 7.x (as shipped with AVR Studio 5)
       <b>+</b> - debugWire, see below

   <b>Supported</b> <b>File</b> <b>Formats</b>
       <b>avarice</b>  uses  libbfd  for reading input files. As such, it can handle any file format that libbfd knowns
       about. This includes the Intel Hex, Motorola SRecord and ELF formats, among others. If you  tell  <b>avarice</b>
       to  read  an ELF file, it will automatically handle programming all of the sections contained in the file
       (e.g. flash, eeprom, etc.).

</pre><h4><b>OPTIONS</b></h4><pre>
       <b>-h</b>, <b>--help</b>
              Print this message.

       <b>-1</b>, <b>--mkI</b>
              Connect to original JTAG ICE (default).  This is sometimes also called  "mkI"  to  distinguish  it
              from the more recent versions.  Some simple clones are also around talking this protocol version.

       <b>-2</b>, <b>--mkII</b>
              Connect to JTAG ICE mkII.

       <b>-3</b>, <b>--jtag3</b>
              Connect to JTAGICE3 running firmware 2.x.

       <b>-4</b>, <b>--edbg</b>
              Connect  to  an  AtmelICE, or JTAGICE3 running firmware 3+, or embedded debugger (EDBG).  Requires
              that <b>avarice</b> has been compiled with libhidapi support.

       <b>-B</b>, <b>--jtag-bitrate</b> &lt;rate&gt;
              Set the bitrate that the JTAG box communicates with the AVR target device.  This must be less than
              1/4 of the frequency of the target. Valid values are 1 MHz, 500 kHz, 250 kHz or 125  kHz  for  the
              JTAG  ICE  mkI,  anything  between  22  kHz  through approximately 6400 kHz for the JTAG ICE mkII.
              (default: 250 kHz)

       <b>-C</b>, <b>--capture</b>
              Capture running program.
              Note: debugging must have been enabled prior to starting the program. (e.g.,  by  running  avarice
              earlier)

       <b>-c</b>, <b>--daisy-chain</b> &lt;ub,ua,bb,ba&gt;
              Setup JTAG daisy-chain information.
              Four  comma-separated  parameters need to be provided, corresponding to <u>units</u> <u>before</u>, <u>units</u> <u>after</u>,
              <u>bits</u> <u>before</u>, and <u>bits</u> <u>after</u>.

       <b>-D</b>, <b>--detach</b>
              Detach once synced with JTAG ICE

       <b>-d</b>, <b>--debug</b>
              Enable printing of debug information.

       <b>-e</b>, <b>--erase</b>
              Erase target.  Not possible in debugWire mode.

       <b>-E</b>, <b>--event</b> <b>&lt;eventlist&gt;</b>
              List of events  that  do  not  interrupt.   JTAG  ICE  mkII  and  AVR  Dragon  only.   Default  is
              "none,run,target_power_on,target_sleep,target_wakeup"

       <b>-f</b>, <b>--file</b> &lt;filename&gt;
              Specify  a  file  for use with the --program and --verify options. If --file is passed and neither
              --program or --verify are given then --program is implied.   <b>NOTE:</b>  deprecated  feature,  must  be
              enabled using the --enable-target-programming configuration option.

       <b>-g</b>, <b>--dragon</b>
              Connect to an AVR Dragon.  This option implies the <b>-2</b> option.

       <b>-I</b>, <b>--ignore-intr</b>
              Automatically step over interrupts.

       <b>-j</b>, <b>--jtag</b> &lt;devname&gt;
              Serial  port  attached to JTAG box (default: /dev/avrjtag). If the JTAG_DEV environmental variable
              is set, avarice will use that as the default instead.
              If <b>avarice</b> has been configured with libusb support, the JTAG ICE mkII  can  be  connected  through
              USB.   In that case, the string <u>usb</u> is used as the name of the device.  If there are multiple JTAG
              ICE mkII devices connected to the system through USB, this string may be followed by the (trailing
              part of the) ICE's serial number, delimited from the <u>usb</u> by a colon.
              The AVR Dragon, JTAGICE3, AtmelICE, and EDBG can only be connected through  USB,  so  this  option
              defaults to "usb" in that case.

       <b>-k</b>, <b>--known-devices</b>
              Print a list of known devices.

       <b>-L</b>, <b>--write-lockbits</b> &lt;ll&gt;
              Write  lock  bits.  The  lock  byte  data  must be given in two digit hexidecimal format with zero
              padding if needed.

       <b>-l</b>, <b>--read-lockbits</b>
              Read the lock bits from the target. The individual bits are also displayed with names.

       <b>-P</b>, <b>--part</b> &lt;name&gt;
              Target device name (e.g.  atmega16).   Normally,  <b>avarice</b>  autodetects  the  device  via  JTAG  or
              debugWIRE.  If this option is provided, it overrides the result from the autodetection.

       <b>-p</b>, <b>--program</b>
              Program  the  target.  Binary  filename  must  be  specified with --file option.  <b>NOTE:</b> deprecated
              feature, must be enabled using the --enable-target-programming configuration option.

       <b>-R</b>, <b>--reset-srst</b>
              Apply nSRST signal (external reset) when connecting.  This can override applications that set  the
              JTD bit.

       <b>-r</b>, <b>--read-fuses</b>
              Read fuses bytes.

       <b>-V</b>, <b>--version</b>
              Print version information.

       <b>-v</b>, <b>--verify</b>
              Verify  program  in  device  against file specified with --file option.  <b>NOTE:</b> deprecated feature,
              must be enabled using the --enable-target-programming configuration option.

       <b>-w</b>, <b>--debugwire</b>
              Connect to JTAG ICE mkII, JTAGICE3, or AVR Dragon, talking debugWire protocol to the target.  This
              option implies the <b>-2</b> option.  See the DEBUGWIRE section below.

       <b>-W</b>, <b>--write-fuses</b> &lt;eehhll&gt;
              Write fuses bytes. <b>ee</b> is the extended fuse byte, <b>hh</b> is the high fuse byte and <b>ll</b> is the  low  fuse
              byte.  The  fuse  byte  data  must  be  given in two digit hexidecimal format with zero padding if
              needed. All three bytes must currently be given.
              <b>NOTE:</b> Current, if the target device doesn't have an extended fuse byte (e.g.  the  atmega16),  the
              you should set ee==ll when writing the fuse bytes.

       <b>-x</b>, <b>--xmega</b>
              The  target  device  is an ATxmega part, using JTAG transport.  Since the ATxmega uses a different
              JTAG communication than other AVRs, the normal device autodetection based on the JTAG ID does  not
              work.   If  the  device has been explicitly selected through the -P option, it is not necessary to
              also specify the -x option.

       <b>-X</b>, <b>--pdi</b>
              The target device is an ATxmega part, using PDI transport.

       <u>HOST_NAME</u> defaults to 0.0.0.0 (listen on any interface) if not given.

       :<u>PORT</u> is required to put avarice into gdb server mode.

</pre><h4><b>EXAMPLE</b> <b>USAGE</b></h4><pre>
       avarice --erase --program --file test.bin --jtag /dev/ttyS0 :4242

       Program the file <u>test.bin</u> into the JTAG ICE (mkI) connected to /dev/ttyS0 after erasing the device,  then
       listen in GDB mode on the local port 4242.  This functionality is deprecated, and no longer configured by
       default.  Use GDB's "load" command instead.

       avarice --jtag usb:1234 --mkII :4242

       Connect  to the JTAG ICE mkII attached to USB which serial number ends in <u>1234</u>, and listen in GDB mode on
       local port 4242.

</pre><h4><b>DEBUGGING</b> <b>WITH</b> <b>AVARICE</b></h4><pre>
       The JTAG ICE debugging environment has a few restrictions and changes:

       •   No "soft" breakpoints,  and  only  three  hardware  breakpoints.  The  break  command  sets  hardware
           breakpoints.  The  easiest  way to deal with this restriction is to enable and disable breakpoints as
           needed.

       •   Two 1-byte hardware watchpoints (but each hardware watchpoint takes away one hardware breakpoint). If
           you set a watchpoint on a variable which takes more than one byte, execution will be abysmally  slow.
           Instead it is better to do the following:

             watch *(char *)&amp;myvariable

           which watches the least significant byte of <b>myvariable</b>.

       •   The  Atmel  AVR processors have a Harvard architecture (separate code and data buses). To distinguish
           data address 0 from code address 0, <b>avr-gdb</b> adds 0x800000 to all data addresses. Bear  this  in  mind
           when examining printed pointers, or when passing absolute addresses to gdb commands.

</pre><h4><b>DEBUGWIRE</b></h4><pre>
       The  <u>debugWire</u>  protocol  is  a  proprietary  protocol  introduced  by Atmel to allow debugging small AVR
       controllers that don't offer enough pins (and  enough  chip  resources)  to  implement  full  JTAG.   The
       communication takes place over the <u>/RESET</u> pin which needs to be turned into a debugWire connection pin by
       programming   the  <u>DWEN</u>  fuse  (debugWire  enable),  using  a  normal  programmer  connection  (in-system
       programming,  high-voltage  programming).   Note  that  by  enabling  this  fuse,  the   standard   reset
       functionality  of that pin will be lost, so any in-system programming will cease to work as it requires a
       functional <u>/RESET</u> pin.  Thus it should be made <b>absolutely</b> <b>sure</b> <b>there</b> <b>is</b> <b>a</b> <b>way</b> <b>back</b>, like a device (as the
       STK500, for example) that can handle high-voltage programming of the AVR.  Currently, <b>avarice</b>  offers  no
       option to turn off the DWEN fuse.  However, <b>avrdude</b> offers the option to turn it off either through high-
       voltage  programming, or by using the JTAG ICE mkII to first turn the target into an ISP-compatible mode,
       and then using normal ISP commands to change the fuse settings.
       Note that the debugWire environment is further limited, compared to JTAG.  It  does  not  offer  hardware
       breakpoints,  so  all breakpoints have to be implemented as software breakpoints by rewriting flash pages
       using <u>BREAK</u> instructions.  Some memory spaces (fuse  and  lock  bits)  are  not  accessible  through  the
       debugWire protocol.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man1/gdb.1.html">gdb</a></b>(1), <b><a href="../man1/avrdude.1.html">avrdude</a></b>(1), <b><a href="../man1/avr-gdb.1.html">avr-gdb</a></b>(1), <b><a href="../man1/insight.1.html">insight</a></b>(1), <b><a href="../man1/avr-insight.1.html">avr-insight</a></b>(1), <b><a href="../man1/ice-gdb.1.html">ice-gdb</a></b>(1), <b><a href="../man1/ice-insight.1.html">ice-insight</a></b>(1)

</pre><h4><b>AUTHORS</b></h4><pre>
       Avarice  (up  to  version 1.5) was originally written by Scott Finneran with help from Peter Jansen. They
       did the work of figuring out the jtagice communication protocol before Atmel released the  spec  (appnote
       AVR060).

       David Gay made major improvements bringing avarice up to 2.0.

       Joerg  Wunsch  reworked  the  code  to  abstract  the JTAG ICE communication from the remainder, and then
       extended the code to support the JTAG ICE mkII protocol (see  Atmel  appnote  AVR067),  as  well  as  the
       JTAGICE3 protocol.

                                                October 15, 2018                                      <u><a href="../man1/avarice.1.html">avarice</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>