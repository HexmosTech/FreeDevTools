<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>gpgsm - CMS encryption and signing tool</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/gpgsm">gpgsm_2.4.4-2ubuntu23.1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       <b>gpgsm</b> - CMS encryption and signing tool

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>gpgsm</b> [<b>--homedir</b> <u>dir</u>] [<b>--options</b> <u>file</u>] [<u>options</u>] <u>command</u> [<u>args</u>]

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>gpgsm</b>  is  a tool similar to <b>gpg</b> to provide digital encryption and signing services on X.509 certificates
       and the CMS protocol.  It is mainly used as a backend for S/MIME mail processing.  <b>gpgsm</b> includes a  full
       featured certificate management and complies with all rules defined for the German Sphinx project.

</pre><h4><b>COMMANDS</b></h4><pre>
       Commands are not distinguished from options except for the fact that only one command is allowed.

   <b>Commands</b> <b>not</b> <b>specific</b> <b>to</b> <b>the</b> <b>function</b>

       <b>--version</b>
              Print  the  program  version  and  licensing  information.   Note  that you cannot abbreviate this
              command.

       <b>--help,</b> <b>-h</b>
              Print a usage message summarizing the most useful command-line  options.   Note  that  you  cannot
              abbreviate this command.

       <b>--warranty</b>
              Print warranty information.  Note that you cannot abbreviate this command.

       <b>--dump-options</b>
              Print a list of all available options and commands.  Note that you cannot abbreviate this command.

   <b>Commands</b> <b>to</b> <b>select</b> <b>the</b> <b>type</b> <b>of</b> <b>operation</b>

       <b>--encrypt</b>
              Perform  an  encryption.   The  keys  the  data  is  encrypted  to  must  be  set using the option
              <b>--recipient</b>.

       <b>--decrypt</b>
              Perform a decryption; the type of input is automatically determined.  It may either be  in  binary
              form or PEM encoded; automatic determination of base-64 encoding is not done.

       <b>--sign</b> Create  a digital signature.  The key used is either the fist one found in the keybox or those set
              with the <b>--local-user</b> option.

       <b>--verify</b>
              Check a signature file for validity.  Depending on the arguments a detached signature may also  be
              checked.

       <b>--server</b>
              Run in server mode and wait for commands on the <b>stdin</b>.

       <b>--call-dirmngr</b> <u>command</u> <b>[</b><u>args</u><b>]</b>
              Behave as a Dirmngr client issuing the request <u>command</u> with the optional list of <u>args</u>.  The output
              of  the  Dirmngr is printed stdout.  Please note that file names given as arguments should have an
              absolute file name (i.e. commencing with <b>/</b>) because they are passed verbatim to  the  Dirmngr  and
              the  working  directory of the Dirmngr might not be the same as the one of this client.  Currently
              it is not possible to pass data via stdin to the Dirmngr.  <u>command</u> should not contain spaces.

              This is command is required for certain maintaining tasks of the dirmngr where a dirmngr  must  be
              able to call back to <b>gpgsm</b>.  See the Dirmngr manual for details.

       <b>--call-protect-tool</b> <u>arguments</u>
              Certain  maintenance  operations  are  done  by an external program call <b>gpg-protect-tool</b>; this is
              usually not installed in a directory listed in the PATH variable.  This command provides a  simple
              wrapper to access this tool.  <u>arguments</u> are passed verbatim to this command; use ‘--help’ to get a
              list of supported operations.

   <b>How</b> <b>to</b> <b>manage</b> <b>the</b> <b>certificates</b> <b>and</b> <b>keys</b>

       <b>--generate-key</b>
       <b>--gen-key</b>
              This  command  allows  the creation of a certificate signing request or a self-signed certificate.
              It is commonly used along with the <b>--output</b> option to save the created CSR or certificate  into  a
              file.   If  used with the <b>--batch</b> a parameter file is used to create the CSR or certificate and it
              is further possible to create non-self-signed certificates.

       <b>--list-keys</b>
       <b>-k</b>     List all available certificates stored in the local key database.  Note that  the  displayed  data
              might  be  reformatted  for  better  human readability and illegal characters are replaced by safe
              substitutes.

       <b>--list-secret-keys</b>
       <b>-K</b>     List all available certificates for which a corresponding a secret key is available.

       <b>--list-external-keys</b> <u>pattern</u>
              List certificates matching <u>pattern</u> using an external server.  This utilizes the <b>dirmngr</b> service.

       <b>--list-chain</b>
              Same as <b>--list-keys</b> but also prints all keys making up the chain.

       <b>--dump-cert</b>
       <b>--dump-keys</b>
              List all available certificates stored in the local key database using a format useful mainly  for
              debugging.

       <b>--dump-chain</b>
              Same as <b>--dump-keys</b> but also prints all keys making up the chain.

       <b>--dump-secret-keys</b>
              List all available certificates for which a corresponding a secret key is available using a format
              useful mainly for debugging.

       <b>--dump-external-keys</b> <u>pattern</u>
              List  certificates  matching <u>pattern</u> using an external server.  This utilizes the <b>dirmngr</b> service.
              It uses a format useful mainly for debugging.

       <b>--show-certs</b> <b>[</b><u>files</u><b>]</b>
              This command takes certificate files as input and prints information about them in the same format
              as <b>--dump-cert</b> does.  Each file may either contain a single  binary  certificate  or  several  PEM
              encoded certificates.  If no files are given, the input is taken from stdin.

              Please  note  that  the  listing  format  may  be  changed  in future releases and that the option
              <b>--with-colons</b> has currently no effect.

       <b>--keydb-clear-some-cert-flags</b>
              This is a debugging aid to reset certain flags in the key database which are used to cache certain
              certificate statuses.  It is especially useful if a bad CRL or a weird running OCSP responder  did
              accidentally  revoke  certificate.   There  is  no  security issue with this command because <b>gpgsm</b>
              always make sure that the validity of a certificate is checked right before it is used.

       <b>--delete-keys</b> <u>pattern</u>
              Delete the keys matching <u>pattern</u>.  Note that there is no command to delete the secret part of  the
              key  directly.   In  case you need to do this, you should run the command <b>gpgsm</b> <b>--dump-secret-keys</b>
              <b>KEYID</b> before you delete the key, copy the string of hex-digits in the ``keygrip'' line and  delete
              the file consisting of these hex-digits and the suffix <b>.key</b> from the ‘<u>private-keys-v1.d</u>’ directory
              below our GnuPG home directory (usually ‘<u><a href="file:~/.gnupg">~/.gnupg</a></u>’).

       <b>--export</b> <b>[</b><u>pattern</u><b>]</b>
              Export  all  certificates  stored  in the Keybox or those specified by the optional <u>pattern</u>. Those
              pattern consist of a list of user ids (see: [how-to-specify-a-user-id]).  When used along with the
              <b>--armor</b> option a  few  informational  lines  are  prepended  before  each  block.   There  is  one
              limitation:  As  there  is  no  commonly agreed upon way to pack more than one certificate into an
              ASN.1 structure, the binary export (i.e. without using <b>armor</b>) works only for  the  export  of  one
              certificate.   Thus  it  is  required  to  specify a <u>pattern</u> which yields exactly one certificate.
              Ephemeral certificate are only exported if all <u>pattern</u> are given as fingerprints or keygrips.

       <b>--export-secret-key-p12</b> <u>key-id</u>
              Export the private key and the certificate identified by <u>key-id</u> using the  PKCS#12  format.   When
              used  with  the  <b>--armor</b> option a few informational lines are prepended to the output.  Note, that
              the PKCS#12 format is not very secure and proper transport security should be used to  convey  the
              exported key.  (See: [option --p12-charset].)

       <b>--export-secret-key-p8</b> <u>key-id</u>
       <b>--export-secret-key-raw</b> <u>key-id</u>
              Export  the private key of the certificate identified by <u>key-id</u> with any encryption stripped.  The
              <b>...-raw</b> command exports in PKCS#1 format; the <b>...-p8</b> command exports in PKCS#8 format.  When  used
              with the <b>--armor</b> option a few informational lines are prepended to the output.  These commands are
              useful to prepare a key for use on a TLS server.

       <b>--import</b> <b>[</b><u>files</u><b>]</b>
              Import the certificates from the PEM or binary encoded files as well as from signed-only messages.
              This command may also be used to import a secret key from a PKCS#12 file.

       <b>--learn-card</b>
              Read information about the private keys from the smartcard and import the certificates from there.
              This command utilizes the <b>gpg-agent</b> and in turn the <b>scdaemon</b>.

       <b>--change-passphrase</b> <u>user_id</u>
       <b>--passwd</b> <u>user_id</u>
              Change the passphrase of the private key belonging to the certificate specified as <u>user_id</u>.  Note,
              that changing the passphrase/PIN of a smartcard is not yet supported.

</pre><h4><b>OPTIONS</b></h4><pre>
       <b>GPGSM</b> features a bunch of options to control the exact behaviour and to change the default configuration.

   <b>How</b> <b>to</b> <b>change</b> <b>the</b> <b>configuration</b>

       These options are used to change the configuration and are usually found in the option file.

       <b>--options</b> <u>file</u>
              Reads  configuration  from  <u>file</u>  instead  of  from  the default per-user configuration file.  The
              default configuration file is named ‘<u>gpgsm.conf</u>’ and expected in the ‘<u>.gnupg</u>’  directory  directly
              below the home directory of the user.

       <b>--homedir</b> <u>dir</u>
              Set the name of the home directory to <u>dir</u>. If this option is not used, the home directory defaults
              to  ‘<u><a href="file:~/.gnupg">~/.gnupg</a></u>’.  It is only recognized when given on the command line.  It also overrides any home
              directory stated through the environment variable ‘<u>GNUPGHOME</u>’ or (on Windows systems) by means  of
              the Registry entry <u>HKCU\Software\GNU\GnuPG:HomeDir</u>.

              On  Windows  systems it is possible to install GnuPG as a portable application.  In this case only
              this command line option is considered, all other ways to set a home directory are ignored.

       <b>-v</b>

       <b>--verbose</b>
              Outputs additional information while running.  You can increase the verbosity  by  giving  several
              verbose commands to <b>gpgsm</b>, such as ‘-vv’.

       <b>--keyserver</b> <u>string</u>
              This  is  a deprecated option.  It was used to add an LDAP server to use for X.509 certificate and
              CRL lookup.  The alias <b>--ldapserver</b> existed from version 2.2.28 to 2.2.33 and 2.3.2 to  2.3.4  but
              is now entirely ignored.

              LDAP servers must be given in the configuration for <b>dirmngr</b>.

       <b>--policy-file</b> <u>filename</u>
              Change the default name of the policy file to <u>filename</u>.  The default name is ‘<u>policies.txt</u>’.

       <b>--agent-program</b> <u>file</u>
              Specify an agent program to be used for secret key operations.  The default value is determined by
              running  the  command  <b>gpgconf</b>.  Note that the pipe symbol (<b>|</b>) is used for a regression test suite
              hack and may thus not be used in the file name.

       <b>--dirmngr-program</b> <u>file</u>
              Specify a dirmngr program to be used for CRL checks.  The default value is ‘<u><a href="file:///usr/lib/w3m/cgi-bin/w3mman2html.cgi?dirmngr">/usr/bin/dirmngr</a></u>’.

       <b>--prefer-system-dirmngr</b>
              This option is obsolete and ignored.

       <b>--disable-dirmngr</b>
              Entirely disable the use of the Dirmngr.

       <b>--no-autostart</b>
              Do not start the gpg-agent or the dirmngr if it has not  yet  been  started  and  its  service  is
              required.   This  option  is  mostly useful on machines where the connection to gpg-agent has been
              redirected to another machines.  If dirmngr is required on the remote machine, it may  be  started
              manually using <b>gpgconf</b> <b>--launch</b> <b>dirmngr</b>.

       <b>--no-secmem-warning</b>
              Do not print a warning when the so called "secure memory" cannot be used.

       <b>--log-file</b> <u>file</u>
              When running in server mode, append all logging output to <u>file</u>.  Use ‘<u>socket://</u>’ to log to socket.

       <b>--log-time</b>
              Prefix all log output with a timestamp even if no log file is used.

   <b>Certificate</b> <b>related</b> <b>options</b>

       <b>--enable-policy-checks</b>
       <b>--disable-policy-checks</b>
              By default policy checks are enabled.  These options may be used to change it.

       <b>--enable-crl-checks</b>
       <b>--disable-crl-checks</b>
              By  default  the CRL checks are enabled and the DirMngr is used to check for revoked certificates.
              The disable option is most useful with an off-line network connection to suppress this  check  and
              also  to  avoid  that new certificates introduce a web bug by including a certificate specific CRL
              DP.  The disable option also disables an issuer certificate  lookup  via  the  authorityInfoAccess
              property  of  the  certificate;  the  <b>--enable-issuer-key-retrieve</b> can be used to make use of that
              property anyway.

       <b>--enable-trusted-cert-crl-check</b>
       <b>--disable-trusted-cert-crl-check</b>
              By default the CRL for trusted root certificates are checked  like  for  any  other  certificates.
              This  allows  a  CA  to revoke its own certificates voluntary without the need of putting all ever
              issued certificates into a CRL.  The disable option may be used to switch this  extra  check  off.
              Due  to the caching done by the Dirmngr, there will not be any noticeable performance gain.  Note,
              that this also disables possible OCSP checks for trusted root certificates.  A more  specific  way
              of  disabling  this  check  is  by  adding  the  ``relax''  keyword  to  the  root  CA line of the
              ‘<u>trustlist.txt</u>’

       <b>--force-crl-refresh</b>
              Tell the dirmngr to reload the CRL for each request.  For better  performance,  the  dirmngr  will
              actually optimize this by suppressing the loading for short time intervals (e.g. 30 minutes). This
              option  is  useful to make sure that a fresh CRL is available for certificates hold in the keybox.
              The suggested way of doing this is by using it along with the option <b>--with-validation</b> for  a  key
              listing command.  This option should not be used in a configuration file.

       <b>--enable-issuer-based-crl-check</b>
              Run a CRL check even for certificates which do not have any CRL distribution point.  This requires
              that a suitable LDAP server has been configured in Dirmngr and that the CRL can be found using the
              issuer.   This  option  reverts to what GnuPG did up to version 2.2.20.  This option is in general
              not useful.

       <b>--enable-ocsp</b>
       <b>--disable-ocsp</b>
              By default OCSP checks are disabled.  The enable option may be used  to  enable  OCSP  checks  via
              Dirmngr.   If  CRL  checks are also enabled, CRLs will be used as a fallback if for some reason an
              OCSP request will not  succeed.   Note,  that  you  have  to  allow  OCSP  requests  in  Dirmngr's
              configuration  too  (option <b>--allow-ocsp</b>) and configure Dirmngr properly.  If you do not do so you
              will get the error code ‘Not supported’.

       <b>--auto-issuer-key-retrieve</b>
              If a required certificate is missing while validating the chain of certificates, try to load  that
              certificate  from an external location.  This usually means that Dirmngr is employed to search for
              the certificate.  Note that this option makes a "web bug" like  behavior  possible.   LDAP  server
              operators  can  see  which keys you request, so by sending you a message signed by a brand new key
              (which you naturally will not have on your local keybox), the  operator  can  tell  both  your  IP
              address  and  the time when you verified the signature.  Note that if CRL checking is not disabled
              issuer certificates are retrieved in any case using the caIssuers authorityInfoAccess method.

       <b>--validation-model</b> <u>name</u>
              This option changes the default validation model.  The only possible values are "shell" (which  is
              the  default),  "chain"  which  forces the use of the chain model and "steed" for a new simplified
              model.  The chain model is also used if an option in the ‘<u>trustlist.txt</u>’ or an  attribute  of  the
              certificate requests it.  However the standard model (shell) is in that case always tried first.

       <b>--ignore-cert-extension</b> <u>oid</u>
              Add  <u>oid</u>  to  the  list  of  ignored  certificate extensions.  The <u>oid</u> is expected to be in dotted
              decimal form, like  <b>2.5.29.3</b>.   This  option  may  be  used  more  than  once.   Critical  flagged
              certificate  extensions  matching  one of the OIDs in the list are treated as if they are actually
              handled and thus the certificate will not be rejected due to an unknown critical  extension.   Use
              this option with care because extensions are usually flagged as critical for a reason.

   <b>Input</b> <b>and</b> <b>Output</b>

       <b>--armor</b>
       <b>-a</b>     Create PEM encoded output.  Default is binary output.

       <b>--base64</b>
              Create Base-64 encoded output; i.e. PEM without the header lines.

       <b>--assume-armor</b>
              Assume the input data is PEM encoded.  Default is to autodetect the encoding but this is may fail.

       <b>--assume-base64</b>
              Assume the input data is plain base-64 encoded.

       <b>--assume-binary</b>
              Assume the input data is binary encoded.

       <b>--input-size-hint</b> <u>n</u>
              This  option  can be used to tell GPGSM the size of the input data in bytes.  <u>n</u> must be a positive
              base-10 number.  It is used by the <b>--status-fd</b> line ``PROGRESS'' to provide a value for  ``total''
              if that is not available by other means.

       <b>--p12-charset</b> <u>name</u>
              <b>gpgsm</b>  uses  the  UTF-8  encoding when encoding passphrases for PKCS#12 files.  This option may be
              used to force the passphrase to be encoded in the specified encoding <u>name</u>.  This is useful if  the
              application used to import the key uses a different encoding and thus will not be able to import a
              file  generated  by  <b>gpgsm</b>.   Commonly used values for <u>name</u> are <b>Latin1</b> and <b>CP850</b>.  Note that <b>gpgsm</b>
              itself automagically imports any file  with  a  passphrase  encoded  to  the  most  commonly  used
              encodings.

       <b>--default-key</b> <u>user_id</u>
              Use <u>user_id</u> as the standard key for signing.  This key is used if no other key has been defined as
              a  signing  key.   Note,  that the first <b>--local-users</b> option also sets this key if it has not yet
              been set; however <b>--default-key</b> always overrides this.

       <b>--local-user</b> <u>user_id</u>

       <b>-u</b> <u>user_id</u>
              Set the user(s) to be used for signing.  The  default  is  the  first  secret  key  found  in  the
              database.

       <b>--recipient</b> <u>name</u>
       <b>-r</b>     Encrypt to the user id <u>name</u>.  There are several ways a user id may be given (see: [how-to-specify-
              a-user-id]).

       <b>--output</b> <u>file</u>
       <b>-o</b> <u>file</u>
              Write output to <u>file</u>.  The default is to write it to stdout.

       <b>--with-key-data</b>
              Displays extra information with the <b>--list-keys</b> commands.  Especially a line tagged <b>grp</b> is printed
              which  tells  you  the  keygrip of a key.  This string is for example used as the file name of the
              secret key.  Implies <b>--with-colons</b>.

       <b>--with-validation</b>
              When doing a key listing, do a full validation check for each key and print the result.   This  is
              usually a slow operation because it requires a CRL lookup and other operations.

              When used along with <b>--import</b>, a validation of the certificate to import is done and only imported
              if  it  succeeds the test.  Note that this does not affect an already available certificate in the
              DB.  This option is therefore useful to simply verify a certificate.

       <b>--with-md5-fingerprint</b>
              For standard key listings, also print the MD5 fingerprint of the certificate.

       <b>--with-keygrip</b>
              Include the keygrip in standard  key  listings.   Note  that  the  keygrip  is  always  listed  in
              <b>--with-colons</b> mode.

       <b>--with-secret</b>
              Include info about the presence of a secret key in public key listings done with <b>--with-colons</b>.

       <b>--no-pretty-dn</b>
              By  default  gpgsm  prints distinguished names (DNs) like the Issuer or Subject in a more readable
              format (e.g. using a well defined order of the parts).  However, this  format  can't  be  used  as
              input  strings.  This option reverts printing to standard RFC-2253 format and thus avoids the need
              to use --dump-cert or --with-colons to get the ``real'' name.

   <b>How</b> <b>to</b> <b>change</b> <b>how</b> <b>the</b> <b>CMS</b> <b>is</b> <b>created</b>

       <b>--include-certs</b> <u>n</u>
              Using <u>n</u> of -2 includes all certificate except for the root cert, -1 includes all certs, 0 does not
              include any certs, 1 includes only the signers cert and all other positive values include up to  <u>n</u>
              certificates starting with the signer cert.  The default is -2.

       <b>--cipher-algo</b> <u>oid</u>
              Use the cipher algorithm with the ASN.1 object identifier <u>oid</u> for encryption.  For convenience the
              strings  <b>3DES</b>,  <b>AES</b>  and  <b>AES256</b>  may  be  used  instead  of  their  OIDs.   The  default  is  <b>AES</b>
              (2.16.840.1.101.3.4.1.2).

       <b>--digest-algo</b> <b>name</b>
              Use <b>name</b> as the message digest algorithm.  Usually this algorithm is deduced from  the  respective
              signing  certificate.   This  option  forces the use of the given algorithm and may lead to severe
              interoperability problems.

   <b>Doing</b> <b>things</b> <b>one</b> <b>usually</b> <b>do</b> <b>not</b> <b>want</b> <b>to</b> <b>do</b>

       <b>--chuid</b> <u>uid</u>
              Change the current user to <u>uid</u> which may either be a number or a name.  This can be used from  the
              root  account to run gpgsm for another user.  If <u>uid</u> is not the current UID a standard PATH is set
              and the envvar GNUPGHOME is unset.  To override the latter the option <b>--homedir</b> can be used.  This
              option has only an effect when used on the command line.  This option has currently no  effect  at
              all on Windows.

       <b>--extra-digest-algo</b> <u>name</u>
              Sometimes  signatures  are broken in that they announce a different digest algorithm than actually
              used.  <b>gpgsm</b> uses a one-pass data processing model and thus needs to rely on the announced  digest
              algorithms  to  properly  hash the data.  As a workaround this option may be used to tell <b>gpgsm</b> to
              also hash the data using the algorithm <u>name</u>; this slows processing down a little  bit  but  allows
              verification  of  such  broken  signatures.  If <b>gpgsm</b> prints an error like ``digest algo 8 has not
              been enabled'' you may want to try this option, with ‘SHA256’ for <u>name</u>.

       <b>--compliance</b> <u>string</u>
              Set the compliance mode.  Valid values are shown when using "help" for <u>string</u>.

       <b>--min-rsa-length</b> <u>n</u>
              This option adjusts the compliance mode "de-vs" for stricter key size requirements.  For  example,
              a value of 3000 turns rsa2048 and dsa2048 keys into non-VS-NfD compliant keys.

       <b>--require-compliance</b>
              To  check  that  data  has been encrypted according to the rules of the current compliance mode, a
              gpgsm user needs to evaluate the status lines.  This is  allows  frontends  to  handle  compliance
              check  in  a  more flexible way.  However, for scripted use the required evaluation of the status-
              line requires quite some effort; this option can be used instead  to  make  sure  that  the  gpgsm
              process exits with a failure if the compliance rules are not fulfilled.  Note that this option has
              currently an effect only in "de-vs" mode.

       <b>--always-trust</b>
              Force  encryption  to  the specified certificates without any validation of the certificate chain.
              The only requirement is that the certificate is capable of encryption.  Note that this  option  is
              ineffective if <b>--require-compliance</b> is used.

       <b>--ignore-cert-with-oid</b> <u>oid</u>
              Add  <u>oid</u>  to the list of OIDs to be checked while reading certificates from smartcards. The <u>oid</u> is
              expected to be in dotted decimal form, like <b>2.5.29.3</b>.  This option may be used more than once.  As
              of now certificates with an extended key usage matching one of those OIDs  are  ignored  during  a
              <b>--learn-card</b>  operation  and  not  imported.   This option can help to keep the local key database
              clear of unneeded certificates stored on smartcards.

       <b>--faked-system-time</b> <u>epoch</u>
              This option is only useful for testing; it sets the system time back or forth to  <u>epoch</u>  which  is
              the number of seconds elapsed since the year 1970.  Alternatively <u>epoch</u> may be given as a full ISO
              time string (e.g. "20070924T154812").

       <b>--with-ephemeral-keys</b>
              Include  ephemeral flagged keys in the output of key listings.  Note that they are included anyway
              if the key specification for a listing is given as fingerprint or keygrip.

       <b>--compatibility-flags</b> <u>flags</u>
              Set compatibility flags to work around problems due to non-compliant certificates  or  data.   The
              <u>flags</u>  are given as a comma separated list of flag names and are OR-ed together.  The special flag
              "none" clears the list and allows one to start over  with  an  empty  list.   To  get  a  list  of
              available flags the sole word "help" can be used.

       <b>--debug-level</b> <u>level</u>
              Select the debug level for investigating problems. <u>level</u> may be a numeric value or by a keyword:

              <b>none</b>   No debugging at all.  A value of less than 1 may be used instead of the keyword.

              <b>basic</b>  Some basic debug messages.  A value between 1 and 2 may be used instead of the keyword.

              <b>advanced</b>
                     More verbose debug messages.  A value between 3 and 5 may be used instead of the keyword.

              <b>expert</b> Even more detailed messages.  A value between 6 and 8 may be used instead of the keyword.

              <b>guru</b>   All  of  the  debug messages you can get. A value greater than 8 may be used instead of the
                     keyword.  The creation of hash tracing files is only enabled if the keyword is used.

       How these messages are mapped to the actual debugging flags is not specified and may  change  with  newer
       releases of this program. They are however carefully selected to best aid in debugging.

       <b>--debug</b> <u>flags</u>
              Set  debug  flags.   All  flags are or-ed and <u>flags</u> may be given in C syntax (e.g. 0x0042) or as a
              comma separated list of flag names.  To get a list of all supported flags the single  word  "help"
              can  be  used.  This  option  is only useful for debugging and the behavior may change at any time
              without notice.

              Note, that all flags set using this option may get overridden by <b>--debug-level</b>.

       <b>--debug-all</b>
              Same as <b>--debug=0xffffffff</b>

       <b>--debug-allow-core-dump</b>
              Usually <b>gpgsm</b> tries to avoid dumping core by well written code and by  disabling  core  dumps  for
              security  reasons.   However,  bugs  are  pretty durable beasts and to squash them it is sometimes
              useful to have a core dump.  This option enables core dumps unless the Bad Thing  happened  before
              the option parsing.

       <b>--debug-no-chain-validation</b>
              This  is  actually  not  a  debugging  option  but  only useful as such.  It lets <b>gpgsm</b> bypass all
              certificate chain validation checks.

       <b>--debug-ignore-expiration</b>
              This is actually not a debugging option but only  useful  as  such.   It  lets  <b>gpgsm</b>  ignore  all
              notAfter dates, this is used by the regression tests.

       <b>--passphrase-fd</b> <b>n</b>
              Read  the passphrase from file descriptor <b>n</b>. Only the first line will be read from file descriptor
              <b>n</b>. If you use 0 for <b>n</b>, the passphrase will be read from STDIN. This can only be used if  only  one
              passphrase is supplied.

              Note that this passphrase is only used if the option <b>--batch</b> has also been given.

       <b>--pinentry-mode</b> <b>mode</b>
              Set the pinentry mode to <b>mode</b>.  Allowed values for <b>mode</b> are:

              <b>default</b>
                     Use the default of the agent, which is <b>ask</b>.

              <b>ask</b>    Force the use of the Pinentry.

              <b>cancel</b> Emulate use of Pinentry's cancel button.

              <b>error</b>  Return a Pinentry error (``No Pinentry'').

              <b>loopback</b>
                     Redirect Pinentry queries to the caller.  Note that in contrast to Pinentry the user is not
                     prompted again if he enters a bad password.

       <b>--request-origin</b> <u>origin</u>
              Tell  gpgsm to assume that the operation ultimately originated at <u>origin</u>.  Depending on the origin
              certain restrictions are applied and the Pinentry  may  include  an  extra  note  on  the  origin.
              Supported values for <u>origin</u> are: <b>local</b> which is the default, <b>remote</b> to indicate a remote origin or
              <b>browser</b> for an operation requested by a web browser.

       <b>--no-common-certs-import</b>
              Suppress the import of common certificates on keybox creation.

       All  the  long  options  may  also be given in the configuration file after stripping off the two leading
       dashes.

</pre><h4><b>HOW</b> <b>TO</b> <b>SPECIFY</b> <b>A</b> <b>USER</b> <b>ID</b></h4><pre>
       There are different ways to specify a user ID to GnuPG.  Some of them are only valid for <b>gpg</b>  others  are
       only good for <b>gpgsm</b>.  Here is the entire list of ways to specify a key:

       <b>By</b> <b>key</b> <b>Id.</b>
              This  format  is deduced from the length of the string and its content or <b>0x</b> prefix. The key Id of
              an X.509 certificate are the low 64 bits of its SHA-1 fingerprint.  The use of key Ids is  just  a
              shortcut, for all automated processing the fingerprint should be used.

              When  using  <b>gpg</b>  an  exclamation mark (!) may be appended to force using the specified primary or
              secondary key and not to try and calculate which primary or secondary key to use.

              The last four lines of the example give the key ID in their long form as internally  used  by  the
              OpenPGP protocol. You can see the long key ID using the option <b>--with-colons</b>.

         234567C4
         0F34E556E
         01347A56A
         0xAB123456

         234AABBCC34567C4
         0F323456784E56EAB
         01AB3FED1347A5612
         0x234AABBCC34567C4

       <b>By</b> <b>fingerprint.</b>
              This format is deduced from the length of the string and its content or the <b>0x</b> prefix.  Note, that
              only  the  20  byte  version  fingerprint  is  available  with  <b>gpgsm</b>  (i.e. the SHA-1 hash of the
              certificate).

              When using <b>gpg</b> an exclamation mark (!) may be appended to force using  the  specified  primary  or
              secondary key and not to try and calculate which primary or secondary key to use.

              The best way to specify a key Id is by using the fingerprint.  This avoids any ambiguities in case
              that there are duplicated key IDs.

         1234343434343434C434343434343434
         123434343434343C3434343434343734349A3434
         0E12343434343434343434EAB3484343434343434
         0xE12343434343434343434EAB3484343434343434

       <b>gpgsm</b>  also  accepts colons between each pair of hexadecimal digits because this is the de-facto standard
       on how to present X.509 fingerprints.  <b>gpg</b> also allows the use of the space separated  SHA-1  fingerprint
       as printed by the key listing commands.

       <b>By</b> <b>exact</b> <b>match</b> <b>on</b> <b>OpenPGP</b> <b>user</b> <b>ID.</b>
              This is denoted by a leading equal sign. It does not make sense for X.509 certificates.

         =Heinrich Heine &lt;<a href="mailto:heinrichh@uni-duesseldorf.de">heinrichh@uni-duesseldorf.de</a>&gt;

       <b>By</b> <b>exact</b> <b>match</b> <b>on</b> <b>an</b> <b>email</b> <b>address.</b>
              This is indicated by enclosing the email address in the usual way with left and right angles.

         &lt;<a href="mailto:heinrichh@uni-duesseldorf.de">heinrichh@uni-duesseldorf.de</a>&gt;

       <b>By</b> <b>partial</b> <b>match</b> <b>on</b> <b>an</b> <b>email</b> <b>address.</b>
              This  is  indicated  by  prefixing  the search string with an <b>@</b>.  This uses a substring search but
              considers only the mail address (i.e. inside the angle brackets).

         @heinrichh

       <b>By</b> <b>exact</b> <b>match</b> <b>on</b> <b>the</b> <b>subject's</b> <b>DN.</b>
              This is indicated by a leading slash, directly followed by the RFC-2253 encoded DN of the subject.
              Note that you can't use the string  printed  by  <b>gpgsm</b>  <b>--list-keys</b>  because  that  one  has  been
              reordered  and  modified  for better readability; use <b>--with-colons</b> to print the raw (but standard
              escaped) RFC-2253 string.

         /CN=Heinrich Heine,O=Poets,L=Paris,C=FR

       <b>By</b> <b>exact</b> <b>match</b> <b>on</b> <b>the</b> <b>issuer's</b> <b>DN.</b>
              This is indicated by a leading hash mark, directly followed by a slash and then directly  followed
              by  the  RFC-2253  encoded DN of the issuer.  This should return the Root cert of the issuer.  See
              note above.

         #/CN=Root Cert,O=Poets,L=Paris,C=FR

       <b>By</b> <b>exact</b> <b>match</b> <b>on</b> <b>serial</b> <b>number</b> <b>and</b> <b>issuer's</b> <b>DN.</b>
              This is indicated by a hash mark, followed by the hexadecimal representation of the serial number,
              then followed by a slash and the RFC-2253 encoded DN of the issuer. See note above.

         #4F03/CN=Root Cert,O=Poets,L=Paris,C=FR

       <b>By</b> <b>keygrip.</b>
              This is indicated by an ampersand followed by the 40 hex digits of a keygrip.   <b>gpgsm</b>  prints  the
              keygrip when using the command <b>--dump-cert</b>.

         &amp;D75F22C3F86E355877348498CDC92BD21010A480

       <b>By</b> <b>substring</b> <b>match.</b>
              This  is  the  default  mode  but applications may want to explicitly indicate this by putting the
              asterisk in front.  Match is not case sensitive.

         Heine
         *Heine

       <b>.</b> <b>and</b> <b>+</b> <b>prefixes</b>
              These prefixes are reserved for looking up mails anchored at the end and for a word  search  mode.
              They are not yet implemented and using them is undefined.

              Please  note  that we have reused the hash mark identifier which was used in old GnuPG versions to
              indicate the so called local-id.  It is not anymore used and there should be no conflict when used
              with X.509 stuff.

              Using the RFC-2253 format of DNs has the drawback that it is not possible to map them back to  the
              original  encoding, however we don't have to do this because our key database stores this encoding
              as meta data.

</pre><h4><b>EXAMPLES</b></h4><pre>
         $ gpgsm -er <a href="mailto:goo@bar.net">goo@bar.net</a> &lt;plaintext &gt;ciphertext

</pre><h4><b>FILES</b></h4><pre>
       There are a few configuration files to control certain aspects of <b>gpgsm</b>'s operation. Unless  noted,  they
       are expected in the current home directory (see: [option --homedir]).

       <b>gpgsm.conf</b>
              This  is  the standard configuration file read by <b>gpgsm</b> on startup.  It may contain any valid long
              option; the leading two dashes may not be entered and the option may  not  be  abbreviated.   This
              default  name  may  be  changed  on  the command line (see: [gpgsm-option --options]).  You should
              backup this file.

       <b>common.conf</b>
              This is an optional configuration  file  read  by  <b>gpgsm</b>  on  startup.   It  may  contain  options
              pertaining to all components of GnuPG.  Its current main use is for the "use-keyboxd" option.

       <b>policies.txt</b>
              This  is  a  list  of  allowed  CA  policies.  This file should list the object identifiers of the
              policies line by line.  Empty lines and lines starting with a hash  mark  are  ignored.   Policies
              missing  in  this  file  and  not marked as critical in the certificate will print only a warning;
              certificates with policies marked as critical and not listed in this file will fail the  signature
              verification.  You should backup this file.

              For example, to allow only the policy 2.289.9.9, the file should look like this:

                # Allowed policies
                2.289.9.9

       <b>qualified.txt</b>
              This  is  the  list  of  root  certificates  used for qualified certificates.  They are defined as
              certificates capable of creating legally  binding  signatures  in  the  same  way  as  handwritten
              signatures  are.   Comments  start  with a hash mark and empty lines are ignored.  Lines do have a
              length limit but this is not a serious limitation as the  format  of  the  entries  is  fixed  and
              checked  by  <b>gpgsm</b>: A non-comment line starts with optional whitespace, followed by exactly 40 hex
              characters, white space and a lowercased 2 letter country code.  Additional data delimited with by
              a white space is current ignored but might late be used for other purposes.

              Note that even if a certificate is listed in this file, this does not mean that the certificate is
              trusted;  in  general  the  certificates  listed  in  this  file  need  to  be  listed   also   in
              ‘<u>trustlist.txt</u>’.   This   is   a   global  file  an  installed  in  the  sysconf  directory  (e.g.
              ‘<u>/etc/gnupg/qualified.txt</u>’).

              Every time <b>gpgsm</b> uses a certificate for signing or verification this file  will  be  consulted  to
              check  whether  the certificate under question has ultimately been issued by one of these CAs.  If
              this is the case the user will be informed  that  the  verified  signature  represents  a  legally
              binding  (``qualified'')  signature.   When creating a signature using such a certificate an extra
              prompt will be issued to let the user confirm that such a legally binding signature  shall  really
              be created.

              Because  this  software  has  not  yet  been  approved for use with such certificates, appropriate
              notices will be shown to indicate this fact.

       <b>help.txt</b>
              This is plain text file with a few help entries used with <b>pinentry</b> as well as a large list of help
              items for <b>gpg</b> and <b>gpgsm</b>.  The standard file has English help texts; to install localized  versions
              use  filenames  like  ‘<u>help.LL.txt</u>’  with  LL  denoting  the  locale.   GnuPG  comes with a set of
              predefined help files in the data directory (e.g. ‘<u>/usr/share/gnupg/gnupg/help.de.txt</u>’) and allows
              overriding of any help item by help files stored  in  the  system  configuration  directory  (e.g.
              ‘<u>/etc/gnupg/help.de.txt</u>’).   For  a  reference of the help file's syntax, please see the installed
              ‘<u>help.txt</u>’ file.

       <b>com-certs.pem</b>
              This file is a collection of common certificates used to populated a newly created  ‘<u>pubring.kbx</u>’.
              An  administrator  may  replace this file with a custom one.  The format is a concatenation of PEM
              encoded  X.509  certificates.   This  global  file  is  installed  in  the  data  directory  (e.g.
              ‘<u>/usr/share/gnupg/com-certs.pem</u>’).

       Note   that  on  larger  installations,  it  is  useful  to  put  predefined  files  into  the  directory
       ‘<u>/etc/skel/.gnupg/</u>’ so that newly created users start up with  a  working  configuration.   For  existing
       users a small helper script is provided to create these files (see: [addgnupghome]).

       For  internal  purposes  <b>gpgsm</b> creates and maintains a few other files; they all live in the current home
       directory (see: [option --homedir]).  Only <b>gpgsm</b> may modify these files.

       <b>pubring.kbx</b>
              This a database file storing the certificates as well as meta information.  For debugging purposes
              the tool <b>kbxutil</b> may be used to show the internal structure of this file.  You should backup  this
              file.

       <b>random_seed</b>
              This  content  of  this file is used to maintain the internal state of the random number generator
              across invocations.  The same file is used by other programs of this software too.

       <b>S.gpg-agent</b>
              If this file exists <b>gpgsm</b> will first try to connect to this socket for accessing <b>gpg-agent</b>  before
              starting  a  new  <b>gpg-agent</b> instance.  Under Windows this socket (which in reality be a plain file
              describing a regular TCP listening port) is the standard way of connecting the <b>gpg-agent</b>.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man1/gpg.1.html">gpg</a></b>(1), <b><a href="../man1/gpg-agent.1.html">gpg-agent</a></b>(1)

       The full documentation for this tool is maintained as a Texinfo manual.  If GnuPG and  the  info  program
       are properly installed at your site, the command

         info gnupg

       should give you access to the complete manual including a menu structure and an index.

GnuPG 2.4.4                                        2024-01-25                                           <u><a href="../man1/GPGSM.1.html">GPGSM</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>