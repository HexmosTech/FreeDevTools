<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>clevis-encrypt-tang - Encrypts using a Tang binding server policy</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/clevis">clevis_20-1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       clevis-encrypt-tang - Encrypts using a Tang binding server policy

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>clevis</b> <b>encrypt</b> <b>tang</b> CONFIG [-y] &lt; PT &gt; JWE

</pre><h4><b>OVERVIEW</b></h4><pre>
       The <b>clevis</b> <b>encrypt</b> <b>tang</b> command encrypts using a Tang binding server policy. Its only argument is the
       JSON configuration object.

       Clevis provides support for the Tang network binding server. Tang provides a stateless, lightweight
       alternative to escrows. Encrypting data using the Tang pin works like this:

           $ clevis encrypt tang '{"url":"<a href="http://tang.srv">http://tang.srv</a>"}' &lt; PT &gt; JWE
           The advertisement contains the following signing keys:

           _OsIk0T-E2l6qjfdDiwVmidoZjA

           Do you wish to trust these keys? [ynYN] y

       To decrypt the data, just pass it to the <b>clevis</b> <b>decrypt</b> command:

           $ clevis decrypt &lt; JWE &gt; PT

       As you can see above, Tang utilizes a trust-on-first-use workflow. If you already know the thumbprint of
       a trusted key, you can specify it in the configuration at encryption time:

           $ cfg='{"url":"<a href="http://tang.srv">http://tang.srv</a>","thp":"_OsIk0T-E2l6qjfdDiwVmidoZjA"}'
           $ clevis encrypt tang "$cfg" &lt; PT &gt; JWE

       Obtaining the thumbprint of a trusted signing key is easy. If you have access to the Tang server, simply
       execute:

           $ tang-show-keys &lt;PORT&gt;

       where &lt;PORT&gt; is the port that the Tang server is listening on.

       If <b>tang-show-keys</b> is not available, but you have access to the Tang server’s database directory, you can
       execute this instead:

           $ jose jwk thp -i $DBDIR/$SIG.jwk

       Tang can also perform entirely offline encryption if you pre-share the server advertisement. You can
       fetch the advertisement with a simple command (just be careful your network isn’t compromised!):

           $ curl -f $URL/adv &gt; adv.jws

       Once you have the advertisement file, just provide it:

           $ clevis encrypt tang '{"url":...,"adv":"adv.jws"}' &lt; PT &gt; JWE

</pre><h4><b>CONFIG</b></h4><pre>
       This command uses the following configuration properties:

       •   <b>url</b> (string) : The base URL of the Tang server (REQUIRED)

       •   <b>thp</b> (string) : The thumbprint of a trusted signing key

       •   <b>adv</b> (string) : A filename containing a trusted advertisement

       •   <b>adv</b> (object) : A trusted advertisement (raw JSON)

</pre><h4><b>OPTIONS</b></h4><pre>
       •   <b>-y</b> : Automatically answer yes for all questions. Use this option for skipping the advertisement trust
           check. This can be useful in automated deployments:

               $ clevis encrypt tang '{"url":...}' -y &lt; PT &gt; JWE

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man1/clevis-decrypt.1.html">clevis-decrypt</a></b>(1) &lt;clevis-decrypt.1.adoc&gt;

                                                                                          <u><a href="../man1/CLEVIS-ENCRYPT-TANG.1.html">CLEVIS-ENCRYPT-TANG</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>