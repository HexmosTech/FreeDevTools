<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>virt-what-cvm - detect if we are running in a confidential virtual machine</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/virt-what">virt-what_1.27-1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       virt-what-cvm - detect if we are running in a confidential virtual machine

</pre><h4><b>SUMMARY</b></h4><pre>
       virt-what-cvm [options]

</pre><h4><b>DESCRIPTION</b></h4><pre>
       "virt-what-cvm" is a tool which can be used to detect if the program is running in a confidential virtual
       machine.

       The program prints out a list of "facts" about the confidential virtual machine, derived from heuristics.
       One fact is printed per line.

       If nothing is printed and the script exits with code 0 (no error), then it can mean <u>either</u> that the
       program is running on bare-metal <u>or</u> the program is running inside a non-confidential virtual machine, <u>or</u>
       inside a type of confidential virtual machine which we don't know about or cannot detect.

</pre><h4><b>FACTS</b></h4><pre>
       <b>amd-sev</b>
           This is a confidential guest running with AMD SEV technology

           Status: tested on Fedora 37 QEMU+KVM

       <b>amd-sev-es</b>
           This is a confidential guest running with AMD SEV-ES technology

           Status: tested on Fedora 37 QEMU+KVM

       <b>amd-sev-snp</b>
           This is a confidential guest running with AMD SEV-SNP technology

           Status: tested on Microsoft Azure SEV-SNP CVM

           Status: tested on Fedora 38 QEMU+KVM SEV-SNP (devel snapshot)

       <b>intel-tdx</b>
           This is a confidential guest running with Intel TDX technology

           Status: tested on Microsoft Azure TDX CVM

       <b>hyperv-hcl</b>
           This  is  a confidential guest running unenlightened under the HyperV (Azure) HCL (Host Compatibility
           Layer). This will be paired with <b>amd-sev-snp</b>.

           Status: tested on Microsoft Azure SEV-SNP &amp; TDX CVM

       <b>s390-protvirt</b>
           This is a confidential guest running on s390x with the Protected  Virtualization  (Secure  Execution)
           technology

</pre><h4><b>EXIT</b> <b>STATUS</b></h4><pre>
       Programs  that  use or wrap "virt-what-cvm" should check that the exit status is 0 before they attempt to
       parse the output of the command.

       A non-zero exit status indicates some error, for example, an unrecognized command line argument.  If  the
       exit  status is non-zero then the output "facts" (if any were printed) cannot be guaranteed and should be
       ignored.

       The exit status does <u>not</u> have anything to do with whether the program is running on  baremetal  or  under
       confidential  virtualization,  nor  with  whether "virt-what-cvm" managed detection "correctly" (which is
       basically unknowable given the large variety of virtualization systems out there)

</pre><h4><b>RUNNING</b> <b>VIRT-WHAT-CVM</b> <b>FROM</b> <b>OTHER</b> <b>PROGRAMS</b></h4><pre>
       "virt-what-cvm" is designed so that you can easily run it from other programs or wrap it up in a library.

       Your program should check the exit status (see the section above).

</pre><h4><b>IMPORTANT</b> <b>NOTE</b></h4><pre>
       This program detects whether it is likely to be running within a known  confidential  VM,  but  does  <u>NOT</u>
       prove  that  the  environment is trustworthy.  To attain trust in the environment requires an attestation
       report for the virtual machine, which is then verified by an already trusted 3rd party.

       The  hardware  features  that  this  program  relies  on  to  establish  facts  about  the   confidential
       virtualization  environment,  are  those  features  whose  behaviour will be proved by verification of an
       attestation report.

       This program <u>MAY</u> have false positives. ie it may report that it is a confidential VM when it is in fact a
       non-confidential VM faking it.

       This program <u>SHOULD</u> <u>NOT</u> have false negatives. ie it should not fail to report existance of a confidential
       VM. Caveat that this only applies to environments which have been explicitly tested.

       If this program does print a fact, this can be used for enabling or disabling use  of  certain  features,
       according  to whether they are appropriate for a confidential environment. None the less, the VM <u>MUST</u> <u>NOT</u>
       be trusted until an attestation report is verified.

       As a protection against false negatives from this tool, environments requiring high assurance should take
       one or more of these measures:

        * The facts reported by this program I&lt;SHOULD&gt; should be measured
          into one of the TPM PCRs
        * The attestation report I&lt;SHOULD&gt; cover the facts reported by
          this program
        * The attestation report I&lt;SHOULD&gt; should cover the enablement
          status of any features affected by decisions involving facts
          reported by this tool

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       &lt;<a href="http://people.redhat.com/~rjones/virt-what/">http://people.redhat.com/~rjones/virt-what/</a>&gt;,
       &lt;https://github.com/Azure/confidential-computing-cvm-guest-attestation&gt;, &lt;https://virtee.io/&gt;

</pre><h4><b>AUTHORS</b></h4><pre>
       Daniel P. Berrang√© &lt;berrange @ redhat . com&gt;

</pre><h4><b>COPYRIGHT</b></h4><pre>
       (C) Copyright 2023 Red Hat Inc., &lt;<a href="http://people.redhat.com/~rjones/virt-what/">http://people.redhat.com/~rjones/virt-what/</a>&gt;

       This program is free software; you can redistribute it and/or modify  it  under  the  terms  of  the  GNU
       General  Public License as published by the Free Software Foundation; either version 2 of the License, or
       (at your option) any later version.

       This program is distributed in the hope that it will be useful, but WITHOUT ANY  WARRANTY;  without  even
       the  implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public
       License for more details.

       You should have received a copy of the GNU General Public License along with this program; if not,  write
       to the Free Software Foundation, Inc., 675 Mass Ave, Cambridge, MA 02139, USA.

</pre><h4><b>REPORTING</b> <b>BUGS</b></h4><pre>
       Bugs can be viewed on the Red Hat Bugzilla page: &lt;https://bugzilla.redhat.com/&gt;.

       If you find a bug in virt-what-cvm, please follow these steps to report it:

       1. Check for existing bug reports
           Go  to &lt;https://bugzilla.redhat.com/&gt; and search for similar bugs.  Someone may already have reported
           the same bug, and they may even have fixed it.

       2. Capture debug and error messages
           Run

            virt-what-cvm -d &gt; virt-what-cvm.log 2&gt;&amp;1

           and keep <u>virt-what-cvm.log</u>.  It may contain error messages which you  should  submit  with  your  bug
           report.

       3. Get version of virt-what-cvm.
           Run

            virt-what-cvm --version

       4. Submit a bug report.
           Go  to  &lt;https://bugzilla.redhat.com/&gt;  and  enter a new bug.  Please describe the problem in as much
           detail as possible.

           Remember to include the version numbers (step 3) and the debug messages file (step  2)  and  as  much
           other detail as possible.

       5. Assign the bug to rjones @ redhat.com
           Assign  or  reassign  the  bug  to <b>rjones</b> <b>@</b> <b>redhat.com</b> (without the spaces).  You can also send me an
           email with the bug number if you want a faster response.

virt-what-1.27                                     2024-09-16                                   <u><a href="../man1/VIRT-WHAT-CVM.1.html">VIRT-WHAT-CVM</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>