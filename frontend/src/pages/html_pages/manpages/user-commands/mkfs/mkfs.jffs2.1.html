<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>mkfs.jffs2 - Create a JFFS2 file system image from directory</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/mtd-utils">mtd-utils_2.2.0-2ubuntu2_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       mkfs.jffs2 - Create a JFFS2 file system image from directory

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>mkfs.jffs2</b> [ <b>-p,--pad[=SIZE]</b> ] [ <b>-r,-d,--root</b> <u>directory</u> ] [ <b>-s,--pagesize=SIZE</b> ] [ <b>-e,--eraseblock=SIZE</b> ]
       [  <b>-c,--cleanmarker=SIZE</b>  ] [ <b>-n,--no-cleanmarkers</b> ] [ <b>-o,--output</b> <u>image.jffs2</u> ] [ <b>-l,--little-endian</b> ] [
       <b>-b,--big-endian</b> ] [ <b>-D,--devtable=FILE</b> ] [ <b>-f,--faketime</b>  ]  [  <b>-q,--squash</b>  ]  [  <b>-U,--squash-uids</b>  ]  [
       <b>-P,--squash-perms</b> ] [ <b>--with-xattr</b> ] [ <b>--with-selinux</b> ] [ <b>--with-posix-acl</b> ] [ <b>-m,--compression-mode=MODE</b>
       ]    [    <b>-x,--disable-compressor=NAME</b>    ]    [   <b>-X,--enable-compressor=NAME</b>   ]   [   <b>-y,--compressor-</b>
       <b>priority=PRIORITY:NAME</b> ] [ <b>-L,--list-compressors</b> ] [ <b>-t,--test-compression</b> ] [ <b>-h,--help</b> ] [ <b>-v,--verbose</b>
       ] [ <b>-V,--version</b> ] [ <b>-i,--incremental</b> <u>image.jffs2</u> ]

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The program <b>mkfs.jffs2</b> creates a JFFS2 (Second Journalling Flash  File  System)  file  system  image  and
       writes  the  resulting image to the file specified by the <b>-o</b> option or by default to the standard output,
       unless the standard output is a terminal device in which case mkfs.jffs2 will abort.

       The file system image is created using the files and directories contained in the directory specified  by
       the option <b>-r</b> or the present directory, if the <b>-r</b> option is not specified.

       Each block of the files to be placed into the file system image are compressed using one of the available
       compressors depending on the selected compression mode.

       File systems are created with the same endianness as the host, unless the <b>-b</b> or <b>-l</b> options are specified.
       JFFS2  driver  in the 2.4 Linux kernel only supported images having the same endianness as the CPU. As of
       2.5.48, the kernel can be changed with a #define to accept images of the non-native endianness. Full  bi-
       endian support in the kernel is not planned.

       It is unlikely that JFFS2 images are useful except in conjunction with the MTD (Memory Technology Device)
       drivers in the Linux kernel, since the JFFS2 file system driver in the kernel requires MTD devices.

</pre><h4><b>OPTIONS</b></h4><pre>
       Options  that  take  SIZE arguments can be specified as either decimal (e.g., 65536), octal (0200000), or
       hexadecimal (0x1000).

       <b>-p,</b> <b>--pad[=SIZE]</b>
              Pad output to SIZE bytes with 0xFF.  If SIZE is not specified, the output is padded to the end  of
              the final erase block.

       <b>-r,</b> <b>-d,</b> <b>--root=DIR</b>
              Build file system from directory DIR.  The default is the current directory.

       <b>-s,</b> <b>--pagesize=SIZE</b>
              Use  page  size  SIZE.   The default is 4 KiB.  This size is the maximum size of a data node.  Set
              according to target system's memory management page size (NOTE: this is NOT related to  NAND  page
              size).

       <b>-e,</b> <b>--eraseblock=SIZE</b>
              Use  erase  block size SIZE.  The default is 64 KiB.  If you use a erase block size different than
              the erase block size of the target MTD device, JFFS2  may  not  perform  optimally.  If  the  SIZE
              specified is below 4096, the units are assumed to be KiB.

       <b>-c,</b> <b>--cleanmarker=SIZE</b>
              Write  ´CLEANMARKER´  nodes  with  the size specified. It is not normally appropriate to specify a
              size other than the default 12 bytes.

       <b>-n,</b> <b>--no-cleanmarkers</b>
              Do not write ´CLEANMARKER´ nodes to the beginning of each erase block. This option can  be  useful
              for creating JFFS2 images for use on NAND flash, and for creating images which are to be used on a
              variety of hardware with differing eraseblock sizes.

       <b>-o,</b> <b>--output=FILE</b>
              Write JFFS2 image to file FILE.  Default is the standard output.

       <b>-l,</b> <b>--little-endian</b>
              Create  a  little-endian JFFS2 image.  Default is to make an image with the same endianness as the
              host.

       <b>-b,</b> <b>--big-endian</b>
              Create a big-endian JFFS2 image.  Default is to make an image with  the  same  endianness  as  the
              host.

       <b>-D,</b> <b>--devtable=FILE</b>
              Use  the  named FILE as a device table file, for including devices and changing permissions in the
              created image when the user does not have appropriate permissions  to  create  them  on  the  file
              system used as source.

       <b>-f,</b> <b>--faketime</b>
              Change all file timestamps to ´0´ for regression testing.

       <b>-q,</b> <b>--squash</b>
              Squash permissions and owners, making all files be owned by root and removing write permission for
              ´group´ and ´other´.

       <b>-U,</b> <b>--squash-uids</b>
              Squash owners making all files be owned by root.

       <b>-P,</b> <b>--squash-perms</b>
              Squash permissions, removing write permission for ´group´ and ´other´.

       <b>--with-xattr</b>
              Enables xattr, stuff all xattr entries into jffs2 image file.

       <b>--with-selinux</b>
              Enables xattr, stuff only SELinux Labels into jffs2 image file.

       <b>--with-posix-acl</b>
              Enable xattr, stuff only POSIX ACL entries into jffs2 image file.

       <b>-m,</b> <b>--compression-mode=MODE</b>
              Set  the  default  compression mode. The default mode is <b>priority</b> which tries the compressors in a
              predefinied order and chooses the first successful one. The alternatives are: <b>none</b> (mkfs will  not
              compress)  and  <b>size</b>  (mkfs  will  try  all compressor and chooses the one which have the smallest
              result).

       <b>-x,</b> <b>--disable-compressor=NAME</b>
              Disable a compressor. Use <b>-L</b> to see the list  of  the  available  compressors  and  their  default
              states.

       <b>-X,</b> <b>--enable-compressor=NAME</b>
              Enable a compressor. Use <b>-L</b> to see the list of the available compressors and their default states.

       <b>-y,</b> <b>--compressor-priority=PRIORITY:NAME</b>
              Set  the  priority  of a compressor. Use <b>-L</b> to see the list of the available compressors and their
              default priority.  Priorities are used by priority compression mode.

       <b>-L,</b> <b>--list-compressors</b>
              Show the list of the available compressors and their states.

       <b>-t,</b> <b>--test-compression</b>
              Call decompress after every compress - and compare the result with the original data -,  and  some
              other check.

       <b>-h,</b> <b>--help</b>
              Display help text.

       <b>-v,</b> <b>--verbose</b>
              Verbose operation.

       <b>-V,</b> <b>--version</b>
              Display version information.

       <b>-i,</b> <b>--incremental=FILE</b>
              Generate  an  appendage image for FILE. If FILE is written to flash and flash is appended with the
              output, then it seems as if it was one thing.

</pre><h4><b>LIMITATIONS</b></h4><pre>
       The format and grammar of the device table file does not allow it  to  create  symbolic  links  when  the
       symbolic links are not already present in the root working directory.

       However,  symbolic  links  may be specified in the device table file using the <u>l</u> type for the purposes of
       setting their permissions and ownership.

</pre><h4><b>BUGS</b></h4><pre>
       JFFS2 limits device major and minor numbers to 8 bits each.  Some consider this a bug.

       <b>mkfs.jffs2</b> does not properly handle hard links in the input directory structure.  Currently, hard  linked
       files will be expanded to multiple identical files in the output image.

</pre><h4><b>AUTHORS</b></h4><pre>
       David Woodhouse
       Manual page written by David Schleef &lt;<a href="mailto:ds@schleef.org">ds@schleef.org</a>&gt;

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man8/mkfs.8.html">mkfs</a></b>(8), <b><a href="../man1/mkfs.jffs.1.html">mkfs.jffs</a></b>(1), <b><a href="../man1/fakeroot.1.html">fakeroot</a></b>(1)

                                                                                                   <u><a href="../man1/MKFS.JFFS2.1.html">MKFS.JFFS2</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>