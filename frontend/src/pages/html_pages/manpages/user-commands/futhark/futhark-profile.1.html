<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>futhark-profile - profile Futhark programs</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/futhark">futhark_0.25.27-1build1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       futhark-profile - profile Futhark programs

</pre><h4><b>SYNOPSIS</b></h4><pre>
       futhark profile JSONFILES

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This  tool  produces  human-readable  profiling  information  based on information collected with <u>futhark</u>
       <u>bench</u>.  Futhark has only rudimentary support for profiling.  While the  system  can  collect  information
       about  the  run-time  behaviour  of  the  program,  there  is  currently  no automatic way to connect the
       information to the program source code.  However, the collected  information  can  still  be  useful  for
       estimating the source of inefficiencies.

</pre><h4><b>USAGE</b></h4><pre>
       The  first  step  is  to run <u>futhark</u> <u>bench</u> on your program, while passing <b>--profile</b> and <b>--json</b>. This will
       produce a JSON file containing runtime measurements, as well as collected profiling information.  If  you
       neglect to pass <b>--profile</b>, the profiling information will be missing. The information in the JSON file is
       complete, but it is difficult for humans to read.

       The  next step is to run <b>futhark</b> <b>profile</b> on the JSON file.  For a JSON file <b>prog.json</b>, this will create a
       <u>top</u> <u>level</u> <u>directory</u> <b>prog.prof</b> that contains files with human-readable profiling information.   A  set  of
       files  will  be created for each benchmark dataset.  If the original invocation of <b>futhark</b> <b>bench</b> included
       multiple programs, then <b>futhark</b> <b>profile</b> will create subdirectories for each program (although all  inside
       the same top level directory).

       You can pass multiple JSON files to <b>futhark</b> <b>profile</b>. Each will produce a distinct top level directory.

   <b>Files</b> <b>produced</b>
       Supposing a dataset <b>foo</b>, <b>futhark</b> <b>profile</b> will produce the following files in the top level directory.

       • <b>foo.log</b>:  the  running  log  produced  during  execution.   Contains many details on dynamic behaviour,
         depending on the exact backend.

       • <b>foo.summary</b>: a summary of memory usage and cost centres.  For the GPU backends, the  cost  centres  are
         kernel executions and memory copies.

       • <b>foo.timeline</b>:  a list of all recorded profiling events, in the order in which they occurred, along with
         their runtime and other available information

   <b>Technicalities</b>
       The profiling information, including the log, is collected from a  <u>final</u>  run  performed  after  all  the
       measured  runs.   Profiling  information  is not collected during the runs that contribute to the runtime
       measurement reported by <b>futhark</b> <b>bench</b>.  However, enabling profiling may still affect performance,  as  it
       changes the behaviour of the run time system.

   <b>Raw</b> <b>reports</b>
       Alternatively,  the  JSON  can  also  contain  a  raw  profiling report as produced by the C API function
       <b>futhark_context_report()</b>. A directory is still created, but it will only contain a single set  of  files,
       and it will not contain a log.

</pre><h4><b>EXAMPLES</b></h4><pre>
       This shows the sequence of commands one might use to profile the program <b>LocVolCalib.fut</b>, which has three
       datasets associated with it, using the <b>hip</b> backend:

          $ futhark bench --backend=hip --profile --json result.json LocVolCalib.fut
          $ futhark profile result.json
          $ tree result.prof/
          result.prof/
          ├── LocVolCalib-data_large.in.log
          ├── LocVolCalib-data_large.in.summary
          ├── LocVolCalib-data_medium.in.log
          ├── LocVolCalib-data_medium.in.summary
          ├── LocVolCalib-data_small.in.log
          └── LocVolCalib-data_small.in.summary

</pre><h4><b>BUGS</b></h4><pre>
       Only the C-based backends currently support profiling.

       The <b>c</b> backend does not actually record useful profiling information.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <u>futhark-bench</u>

</pre><h4><b>COPYRIGHT</b></h4><pre>
       2013-2020, DIKU, University of Copenhagen

0.25.27                                           Mar 02, 2025                                <u><a href="../man1/FUTHARK-PROFILE.1.html">FUTHARK-PROFILE</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>