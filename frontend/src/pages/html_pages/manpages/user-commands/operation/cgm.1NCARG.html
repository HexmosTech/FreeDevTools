<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CGM_open,     CGM_close,    CGM_lseek,    CGM_read,    CGM_write,    CGM_directory,    CGM_freeDirectory,</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/libncarg-dev">libncarg-dev_6.6.2.dfsg.1-10build2_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       CGM_open,     CGM_close,    CGM_lseek,    CGM_read,    CGM_write,    CGM_directory,    CGM_freeDirectory,
       CGM_printDirectory,     CGM_getInstr,     CGM_flushGetInstr,     CGM_putInstr,      CGM_flushOutputInstr,
       CGM_initMetaEdit,  CGM_termMetaEdit,  CGM_copyFrames,  CGM_deleteFrames,  CGM_mergeFrames CGM_moveFrames,
       CGM_readFrames, CGM_valid, CGM_writeFile, CGM_writeFrames, CGM_appendFrames - Computer Graphics  Metafile
       operations

</pre><h4><b>SYNTAX</b></h4><pre>
       <b>#include</b> <b>&lt;cgm_tools.h&gt;</b>

       <b>Cgm_fd</b> <b>CGM_open(metafile,</b> <b>size,</b> <b>flags,</b> <b>mode)</b>
       <b>char</b> <b>*metafile;</b>
       <b>unsigned</b> <b>size;</b>
       <b>int</b> <b>flags;</b>
       <b>int</b> <b>mode;</b>

       <b>int</b> <b>CGM_close(cgm_fd)</b>
       <b>Cgm_fd</b> <b>cgm_fd;</b>

       <b>int</b> <b>CGM_lseek(cgm_fd,</b> <b>offset)</b>
       <b>Cgm_fd</b> <b>cgm_fd;</b>
       <b>int</b> <b>offset;</b>

       <b>int</b> <b>CGM_read(cgm_fd,</b> <b>buf)</b>
       <b>Cgm_fd</b> <b>cgm_fd;</b>
       <b>unsigned</b> <b>char</b> <b>*buf;</b>

       <b>int</b> <b>CGM_write(cgm_fd,</b> <b>buf)</b>
       <b>Cgm_fd</b> <b>cgm_fd;</b>
       <b>unsigned</b> <b>char</b> <b>*buf;</b>

       <b>Directory</b> <b>*CGM_directory(cgm_fd)</b>
       <b>Cgm_fd</b> <b>cgm_fd;</b>

       <b>void</b> <b>CGM_freeDirectory(dir)</b>
       <b>Directory</b> <b>*dir;</b>

       <b>void</b> <b>CGM_printDirectory(dir)</b>
       <b>Directory</b> <b>*dir;</b>

       <b>int</b> <b>CGM_getInstr(cgm_fd,</b> <b>instr)</b>
       <b>Cgm_fd</b> <b>cgm_fd;</b>
       <b>Instr</b> <b>*instr;</b>

       <b>void</b> <b>CGM_flushGetInstr(cgm_fd)</b>
       <b>Cgm_fd</b> <b>cgm_fd;</b>

       <b>int</b> <b>CGM_putInstr(cgm_fd,</b> <b>instr)</b>
       <b>Cgm_fd</b> <b>cgm_fd;</b>
       <b>Instr</b> <b>*instr;</b>

       <b>int</b> <b>CGM_flushOutputInstr(cgm_fd)</b>
       <b>Cgm_fd</b> <b>cgm_fd;</b>

       <b>Directory</b> <b>*CGM_initMetaEdit</b> <b>(metafile,</b> <b>size)</b>
       <b>char</b> <b>*metafile;</b>
       <b>unsigned</b> <b>int</b> <b>size;</b>

       <b>int</b> <b>CGM_termMetaEdit()</b>

       <b>Directory</b> <b>*CGM_copyFrames(start,</b> <b>num,</b> <b>target</b> <b>)</b>
       <b>unsigned</b> <b>int</b> <b>start;</b>
       <b>int</b> <b>num;</b>
       <b>unsigned</b> <b>int</b> <b>target;</b>

       <b>Directory</b> <b>*CGM_deleteFrames(start,</b> <b>num)</b>
       <b>unsigned</b> <b>int</b> <b>start,</b>
       <b>num;</b>

       <b>Directory</b> <b>*CGM_mergeFrames(bottom,</b> <b>top)</b>
       <b>unsigned</b> <b>bottom,</b> <b>top;</b>

       <b>Directory</b> <b>*CGM_moveFrames</b> <b>(start,</b> <b>num,</b> <b>target)</b>
       <b>unsigned</b> <b>int</b> <b>start,</b> <b>num,</b> <b>target;</b>

       <b>Directory</b> <b>*CGM_readFrames(metafile,</b> <b>start,</b> <b>num,</b> <b>target,</b> <b>size)</b>
       <b>char</b> <b>*metafile;</b>
       <b>unsigned</b> <b>int</b> <b>start;</b>
       <b>int</b> <b>num;</b>
       <b>unsigned</b> <b>int</b> <b>target,</b> <b>size;</b>

       <b>int</b> <b>*<a href="../manmetafile/CGM_validCGM.metafile.html">CGM_validCGM</a>(metafile)</b>
       <b>char</b> <b>*metafile;</b>

       <b>int</b> <b><a href="../manmetafile/CGM_writeFile.metafile.html">CGM_writeFile</a>(metafile)</b>
       <b>char</b> <b>*metafile;</b>

       <b>int</b> <b>CGM_writeFrames(metafile,</b> <b>start,</b> <b>num)</b>
       <b>char</b> <b>*metafile;</b>
       <b>unsigned</b> <b>start,</b> <b>num;</b>

       <b>int</b> <b>CGM_appendFrames(metafile,</b> <b>start,</b> <b>num)</b>
       <b>char</b> <b>*metafile;</b>
       <b>unsigned</b> <b>start,</b> <b>num;</b>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The  argument  <u>cgm_fd</u> refers to a valid file descriptor created for reading or writing, as appropriate by
       <b>CGM_open</b>. <b>CGM_read</b>, <b>CGM_directory</b>,  <b>CGM_getInstr</b> and <b>CGM_flushGetInstr</b> require a file descriptor open for
       reading. <b>CGM_write</b>, <b>CGM_getInstr</b>,<b>CGM_flushGetInstr</b> and <b>CGM_flushOutputInstr</b> require  a  <u>Cgm_fd</u>  open  for
       writing. <b>CGM_close</b> and <b>CGM_lseek</b> will accept any valid <u>Cgm_fd</u>.

       The <u>size</u> argument refers to the CGM record size in bytes.  For an NCAR CGM this value is 1440.

       <u>buf</u> is a pointer to user allocated memory of size <u>size</u>. This storage will be used for buffering input and
       output of <b>CGM_read</b> and <b>CGM_write</b> respectively.

       The  <u>dir</u>  argument  is a pointer to a <u>Directory</u> structure created with <b>CGM_directory</b> or <b>CGM_initMetaEdit</b>.
       <u>dir</u> is a private resource that should <u>NOT</u> be directly modified by the user. A set of  convenience  macros
       is provided for this purpose in <u>cgm_tools.h</u>.

       The <u>start</u>, <u>num</u> and <u>target</u> arguments are used to address frame numbers in a metafile being edited with one
       of  the  commands:  <b>CGM_copyFrames</b>, <b>CGM_deleteFrames</b>, <b>CGM_readFrames</b>, <b>CGM_moveFrames</b>, <b>CGM_writeFrames</b> and
       <b>CGM_mergeFrames</b>.  The <u>start</u> argument is the first frame in a sequence of  <u>num</u>  frame(s)  to  perform  the
       editing operation on. <u>target</u> is similar to <u>start</u> and is used by commands that require two frame addresses
       such as <u>copy</u>. Addressing begins at zero.

       CGM_open
              This  command is modeled after the unix <u>open</u> command. It will open a CGM for reading or writing as
              specified by the <u>flags</u> argument and return a <u>Cgm_fd</u> file descriptor. The <u>flags</u> and <u>open</u> parameters
              are passed directly on to the system <u>open</u> command.   For  a  detailed  explanation  of  these  two
              arguments see <a href="../man2/open.2.html">open</a>(2).

       CGM_close
              Delete a file descriptor. The inverse of <b>CGM_open</b>. See <a href="../man2/close.2.html">close</a>(2).

       CGM_read
              <b>CGM_read</b>  attempts  to  read  <u>size</u> bytes from the object referenced through the descriptor <u>cgm_fd</u>.
              <u>size</u> is set at the  creation  of  <u>cgm_fd</u>  by  <b>CGM_open</b>.  <b>CGM_read</b>  returns  the  number  of  bytes
              successfully read. A zero is returned on EOF and a negative number implies an error occurred.  The
              unix system call <u>read</u> is called by <b>CGM_read</b>. See <a href="../man2/read.2.html">read</a>(2).

       CGM_write
              Attempts  to  write  a single record of <u>size</u> bytes from <u>buf</u> from the object referenced by <u>cgm_edit</u>
              where <u>size</u> is the record size parameter provided at the creation  of  <u>cgm_fd</u>.  <u>write</u>  returns  the
              number  of  bytes  successfully  written. A negative return number implies an error occurred.  The
              unix system call <u>write</u> is called by <b>CGM_write</b>. See <a href="../man2/write.2.html">write</a>(2).

       CGM_lseek
              Advance the file pointer of <u>cgm_fd</u> to <u>offset</u> bytes. Upon successful completion  the  current  file
              pointer  offset  is  returned. A negative return value is an error.  The unix system call <u>lseek</u> is
              called by <b>CGM_lseek</b>. See <a href="../man2/lseek.2.html">lseek</a>(2).

       CGM_directory
              Create a table of contents for the metafile referenced by <u>cgm_fd</u>.  Return a pointer to this  table
              of  type  <u>Directory</u>.  The contents of the directory include number of metafiles, number of frames,
              record offset for each frame, frame length in records, optional  frame  description  and  metafile
              status.  These  fields  are meant to be read only and should only be referenced by the convenience
              macros provided in cgm_tools.h. A NULL pointer is returned on failure.

       CGM_freeDirectory
              Free memory allocated to a directory created by <b>CGM_directory</b> or <b>CGM_initMetaEdit</b>.

       CGM_printDirectory
              Print the contents of a directory pointed to by <u>dir</u> to the standard output.

       CGM_getInstr,
              Fetch the next instruction in file referenced by <u>cgm_edit</u>  and convert it  into  a  usable  format
              pointed  to  by  <u>instr</u>.   <b>CGM_getInstr</b>  provides  an  interface to the metafile for extracting CGM
              elements. The user need not be concerned with the binary format of the metafile. The fields of the
              <u>Instr</u> are as described in <u>cgm_tools.h</u>.  The user should  note  that  the  maximum  allowable  data
              length returned in a single invocation is 32760 bytes. The CGM standard allows upto 32767 bytes to
              be  stored  in  a single instruction. But 32767 is not a nice number to work with. Should the data
              length of a CGM instruction exceed 32760 bytes, indicated by  the  boolean  <u>more</u>  flag,  the  next
              invocation  of <b>CGM_getInstr</b> will return the remaining data up to the same limit, etc.  <b>CGMgetInstr</b>
              requires a valid <u>Cgm_fd</u> open for reading.  For a description on CGM see the ANSI standard.

       CGM_flushGetInstr
              Flush the input buffer used by <b>CGM_getInstr</b>. <b>CGM_getInstr</b> buffers the contents of the CGM and only
              performs actual reads as necessary. If the user desires other then sequential read access to a CGM
              it becomes necessary to flush the input buffer before reading from a new location.

       CGM_putInstr
              The analog to <b>CGM_getInstr</b>. This function  buffers  CGM  instructions  to  be  written  to  a  CGM
              referenced  by  <u>cgm_fd</u>.  Again  the user need not be concerned with the binary format of the file.
              Writes are performed sequentially in record size <u>size</u> as specified during the creation of  <u>cgm_fd</u>.
              The  same  data  length  constraints that are placed on <b>CGM_getInstr</b> hold for <b>CGM_putInstr</b>. If the
              user wants to output instructions with a data length greater than 32760 bytes then the  data  must
              be  broken  up into blocks no greater than this size. The user must also set the boolean <u>more</u> flag
              in the <u>Instr</u>. <u>cgm_fd</u> must be a valid file descriptor open for writing. For a  description  of  the
              fields of the <u>Instr</u> see the file <u>cgm_tools.h</u>.

       CGM_flushOutputInstr
              Flush the output buffer used by <b>CGM_putInstr</b> for the file referenced by <u>cgm_fd</u>. It is necessary to
              explicitly  flush  the  output buffer used by <b>CGM_putInstr</b> before the file is closed or any random
              access is performed. Otherwise not all CGM elements will actually get written.

       CGM_initMetaEdit
              Initialize a metafile for editing. This is the initialization routine for the higher level editing
              routines  contained   in   this   package:   <b>CGM_copyFrames,</b>   <b>CGM_deleteFrames</b>,   <b>CGM_readFrames</b>,
              <b>CGM_moveFrames</b>,  <b>CGM_writeFile</b>, <b>CGM_writeFrames</b>, and <b>CGM_mergeFrames</b>.  These routines only work on
              one metafile at a time (the one named in <b>CGM_initMetaEdit</b>. Invoking this routine for a second time
              without explicitly saving any changes will have the effect of loading a new  file  and  discarding
              all changes made in the previous file.  <b>CGM_initMetaEdit</b> and all proceeding editing functions that
              <b>make</b>  changes to the file return a pointer to a <u>Directory</u> as a convenience that allows the user to
              examine the state of the file.  The contents of the  directory  are  private  and  should  NOT  be
              changed  by  the  user.  A  set of macros is provided in <u>cgm_tools.h</u> to be used for retrieving the
              directory's contents. <b>Note</b>: no changes are actually made to the edit file unless it is  explicitly
              overwritten with either <b>CGM_writeFile</b> or <b>CGM_writeFrames</b>.

       CGM_termMetaEdit
              Terminate  the editing session started with <b>CGM_initMetaEdit</b>.  This routine should be called after
              any editing changes have been saved, if desired to save  them,  and  before  exiting  the  editing
              session.  <b>CGM_termMetaEdit</b> frees valuable resources.

       CGM_copyFrames
              Copy  <u>num</u>  frames  beginning  with  <u>start</u>  to  the frame addressed by <u>target</u>. If <u>target</u> is already
              occupied then the source frames are inserted  in  its  place  while  the  target  frame,  and  all
              proceeding  frames,  are  advanced.  <b>CGM_copy</b> operates on the file initialized by <b>CGM_initMetaEdit</b>
              (the edit file). On successful completion a pointer to the current directory is returned. On error
              a NULL pointer is returned.

       CGM_deleteFrames
              Delete <u>num</u> frames from the edit file starting with frame <u>start</u>. On successful completion a pointer
              to the current directory is returned. On error a NULL pointer is returned.

       CGM_mergeFrames
              Overwrite the contents of frame addressed <u>bottom</u> with the union of the frame  at  location  <u>bottom</u>
              and  the frame at location <u>top</u>.  The effect of this command is equivalent to drawing the <u>top</u> frame
              on top of the <u>bottom</u> frame. It is not a union in the  true  sense  of  the  word.   On  successful
              completion a pointer to the current directory is returned. On error a NULL pointer is returned.

       CGM_moveFrames
              Move  a  block  of  <u>num</u>  frames  from the edit file starting with with frame <u>start</u> to the position
              occupied by frame <u>target</u> On successful completion a pointer to the current directory is  returned.
              On error a NULL pointer is returned.

       CGM_readFrames
              Read <u>num</u> frames from metafile <u>file</u> starting with frame <u>start</u>.  Insert the frames at address <u>target</u>
              in  the  edit  file.   On successful completion a pointer to the current directory is returned. On
              error a NULL pointer is returned.

       CGM_validCGM
              Determine whether a file is a valid  NCAR  CGM  or  not.  This  function  performs  a  few  simple
              diagnostics  in  an  effort to determine whether a given file is in the NCAR CGM format. The tests
              performed are not rigorous and it is conceivable that the information retrieved is  incorrect.   A
              return  of  1  indicates  a valid NCAR CGM.  A return of 0 indicates the file is not a NCAR CGM. A
              return of -1 indicates an error occurred and the global variable `errno' is set accordingly.

       CGM_writeFile
              Write the entire contents of the current edit file to <u>file</u>.  <b>CGM_writeFile</b> returns the integer one
              on success and a negative number on failure.

       CGM_writeFrames
              Write a block of <u>num</u> frames starting with frame <u>start</u> to <u>file</u>. The source  frames  come  from  the
              edit  file.   Note:  CGM  frames are contained in a wrapper made up of CGM <u>delimiter</u> elements. The
              file created by <b>CGM_writeFrames</b> will use the <u>wrapper</u> provided by the current edit file. Thus if  a
              file  <u>foo</u>  contains  <u>n</u> frames that are <u>read</u> into an editing session with a file <u>goo</u> and then these
              same frames are written out to a file <u>zoid</u>, <u>zoid</u> may or may not be the same as the  original  <u>foo</u>.
              <b>CGM_writeFrames</b> returns the integer one on success and a negative number on failure.

       CGM_appendFrames
              Append  a  block of <u>num</u> frames starting with frame <u>start</u> to <u>file</u>. <u>file</u> must already exist and be a
              valid NCAR CGM.  <b>CGM_appendFrames</b> returns the integer one on success  and  a  negative  number  on
              failure.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       ANSI X3.122 <u>Computer</u> <u>Graphics</u> <u>Metafile</u> <u>for</u> <u>the</u> <u>Storage</u> <u>and</u> <u>Transfer</u> <u>of</u> <u>Picture</u> <u>Description</u> <u>Information.</u>

</pre><h4><b>BUGS</b></h4><pre>
       CGMs with more the one metafile stored in the are not guaranteed to work.

       Should  not  have  to  explicitly  flush  the  output  buffer  for  <b>CGM_getInstr</b>.  This should be handled
       automatically when the file is closed.

</pre><h4><b>COPYRIGHT</b></h4><pre>
       Copyright (C) 1987-2009
       University Corporation for Atmospheric Research

       The use of this Software is governed by a License Agreement.

NCARG                                             January 1993                                 <u><a href="../man1NCARG/CGM_TOOLS.1NCARG.html">CGM_TOOLS</a></u>(1NCARG)
</pre>
 </div>
</div></section>
</div>
</body>
</html>