<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>dhcpd-pools - ISC dhcpd pools usage analysis</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/dhcpd-pools">dhcpd-pools_3.2-1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       dhcpd-pools - ISC dhcpd pools usage analysis

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>dhcpd-pools</b> [<b>--config</b> <u>file</u>] [<b>--leases</b> <u>file</u>] [<b>--sort</b> <u>nimcptTe</u>] [<b>--reverse</b>] [<b>--format</b> <u>tHcxXjJ</u>]
                   [<b>--mustach</b> <u>template</u>] [<b>--output</b> <u>file</u>] [<b>--limit</b> <u>nr</u>] [<b>--color</b> <u>when</u>] [<b>--warning</b> <u>percent</u>]
                   [<b>--critical</b> <u>percent</u>] [<b>--warn-count</b> <u>number</u>] [<b>--crit-count</b> <u>number</u>] [<b>--snet-alarms</b>]
                   [<b>--minsize</b> <u>size</u>] [<b>--perfdata</b>] [<b>--version</b>] [<b>--help</b>]

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The program analyses ISC dhcpd shared network and pool usage and outputs the results in a format selected
       by user.

</pre><h4><b>OUTPUT</b> <b>FIELDS</b></h4><pre>
       <u>shared</u> <u>net</u> <u>name</u>
              Name of the shared-network for the range.

       <u>first</u> <u>ip</u>
              First IP in lease pool range.

       <u>last</u> <u>ip</u>
              Last IP in lease pool range.

       <u>max</u>    Number of IPs which exist in a pool, shared network or all together.

       <u>cur</u>    Number of leases currently in use.

       <u>percent</u>
              Percent of IPs currently in use compared to max.

       <u>touch</u>  Number  of  IP's  which  appear in the lease file, but who's leases have expired.  A touched IP is
              either expired or abandoned.  The touched  IP  count  is  somewhat  misleading  when  you  try  to
              determine if an IP pool is big enough; it is a better indicator of whether a pool is too large.

       <u>t+c</u>    The sum of Touched and Currently in-use leases.

       <u>t+c</u> <u>perc</u>
              Percent of IPs either touched or currently in use, compared to max.

       <u>bu</u>     Failover  pair  can  allocate  these  addresses.   The  count  appears  only  if there is failover
              configuration.

       <u>bu</u> <u>perc</u>
              Percent of addresses that failover pair can allocate.   The  percent  appears  only  if  there  is
              failover configuration.

</pre><h4><b>OPTIONS</b></h4><pre>
       <b>-c</b>, <b>--config</b>=<u>FILE</u>
              Path to the dhcpd.conf file.  If the dhcpd.conf has include files they can be analysed separately,
              that can be useful when trying to understand or monitor subset of data.

       <b>-l</b>, <b>--leases</b>=<u>FILE</u>
              Path to the dhcpd.leases file.

       <b>-s</b>, <b>--sort</b>=<u>[nimcptTe]</u>
              Sort  ranges  by  chosen  fields as a sorting keys.  Keys weight from left to right, i.e., if more
              weighting keys are equal next one is used.  The IP field is default sort key.

       <b>-r</b>, <b>--reverse</b>
              Sort results in reverse order.

       <b>-f</b>, <b>--format</b>=<u>[tHcxXjJ]</u>
              Output format.  Text (<u>t</u>).   Full-html  (<u>H</u>)  page  output.   In  html  page  critical  and  warning
              thresholds  can  be  visualized  with  --color=always  option.  The (<u>c</u>) stands for comma-separated
              values.  Output format xml (<u>x</u>) is similar to the dhcpstatus Perl module output.  The extended  xml
              (<u>X</u>)  format will print ethernet address details.  The (<u>j</u>) will output in json format, which can be
              extended with (<u>J</u>) to include ethernet address.

              The default format is <u>text</u>.

       <b>--mustach</b>=<u>TEMPLATE</u>
              Output using mustach <u>template</u> file.  This is useful when the native output formats controlled with
              <b>--format</b> option do not provide what you need.  See below example mustach template  that  is  using
              all available {{tags}} to demonstrate what can be displayed and how.

              /usr/bin/dhcpd-pools --config /usr/share/doc/dhcpd-pools/dhcpd.conf --leases /usr/share/doc/dhcpd-
              pools/dhcpd.leases --mustach /usr/share/doc/dhcpd-pools/mustach.template

       <b>-o</b>, <b>--output</b>=<u>FILE</u>
              <u>File</u> where output is written.  Default is stdout.

       <b>-L</b>, <b>--limit</b>=<u>NR</u>
              The  <u>NR</u> will limit what will be printed.  Syntax is similar to <u><a href="../man1/chmod.1.html">chmod</a></u>(1) permission string.  The <u>NR</u>
              limit string uses two digits which vary between <u>0</u> to <u>7</u>.  The first digit determines which  headers
              to  display,  and  the  second  digit  determines  which numeric analysis tables to include in the
              output.  The following values are "OR'd" together to create the desired output.   The  default  is
              <u>77</u>.

              0<u>1</u>   Print ranges
              0<u>2</u>   Print shared networks
              0<u>4</u>   Print total summary
              <u>1</u>0   Print range header
              <u>2</u>0   Print shared network header
              <u>4</u>0   Print total summary header

              The  output  limit  for  total  summary  has  special meaning in <b>--warning</b> and <b>--critical</b> alarming
              context.  When the alarming is in use, and total is not wanted to be seen  then  in  the  case  of
              alarming returning success nothing is printed.

       <b>--color</b>=<u>when</u>
              Use  yellow  for  warning,  red  for  critical,  green  for  suppressed by --minsize and blue when
              --snet-alarms is the cause of suppression or shared network does not have any  ranges.   The  <u>when</u>
              string  can  be <b>always</b>, <b>never</b>, or <b>auto</b>.  Default is auto, that uses colors when command is running
              in interactive terminal.  With use of <b>--warning</b> or <b>--critical</b> coloring thresholds can be  changed,
              but one must also use <b>--format=text</b> to avoid turning on alarting mode.

       <b>--skip</b>=<u>when</u>
              The <u>when</u> can be one of the following: <u>ok</u>, <u>warning</u>, <u>critical</u>, <u>minsize</u>, or <u>suppressed</u>.  The skipping
              criteria is exact match with colors in --color option.

       <b>--warning</b>=<u>percent</u>
              Turn on alarm output format, and specify percentage number which will cause an alarm.  If either a
              range or shared network will exceed warning level return value of the command is <b>1</b>.  If only range
              monitoring  is  needed  one can use limit option for scoping, for example <u>-L10</u>.  To monitor shared
              network only the limit would be <u>-L20</u>.  If warning percentage is not specified it defaults  to  <b>80</b>.
              The <u>percent</u> argument allows fractions, e.g., 88.8, to be used.

       <b>--critical</b>=<u>percent</u>
              The  option  is  similar  to  warning,  with  exception  of  return value which is <b>2</b>.  If critical
              percentage is not specified it defaults to <b>90</b>.

       <b>--warn-count</b>=<u>number</u>
              A <u>number</u> of free leases before alarm is raised.  When specified both --warning <u>percent</u>  and  count
              <u>number</u> are required to be exceeded in order to alarm criteria being fulfilled.

              This  option is intended to be used in setup where very large and small shared-networks and ranges
              co-exists.  In such environments percent based alarming can lead to either flood of  alarms  about
              small  ranges,  or  way  too great overhead of free addresses in large shared-networks.  Suggested
              usage is to set percentage to a level that makes small ranges to ring, and set the count to  match
              level when an enormous shared-network is too few free leases.

              Defaults to 2^32, that is size of entire IPv4 address space.

       <b>--crit-count</b>=<u>number</u>
              Same as --warn-count, but for critical alarms.

       <b>--snet-alarms</b>
              Suppress  range  alarms  that  are  part  of  shared networks.  Use of this option will keep alarm
              criteria applied to ranges that are not part of shared-net along  with  shared-net  alarms.   This
              option  may  help  reducing  alarm  noise  for configurations that has lots of small ranges in big
              shared-networks.

       <b>--minsize</b>=<u>size</u>
              Ignore ranges and shared networks that are smaller or equal to the defined size.  This  option  is
              meaningful  only  in  context  of  alarming, and will intended to suppress for example single host
              ranges.  By default this option is not in use.

       <b>-p</b>, <b>--perfdata</b>
              Print additional performance data, like lease count,  touched  leases  and  backup  leases.   This
              option  is  meaningful  only in context of alarming and will print lots of data, if there are many
              networks.  By default this option is not in use.

       <b>-A</b>, <b>--all-as-shared</b>
              Treat all stand-alone subnets as shared-network with named formed from it's CIDR.  By default this
              option is not in use for backwards compatibility.

       <b>--ip-version</b>=<u>4|6</u>
              Force command to read configuration and leases files in IPv4  or  IPv6  mode.   Notice  that  when
              inputs  do  not  match  with what is forced analysis output is garbage.  This option should not be
              necessary to use, and exists only to allow debugging.

       <b>-v</b>, <b>--version</b>
              Print version information to standard output and exit successfully.

       <b>-h</b>, <b>--help</b>
              Print help to standard output and exit successfully.

</pre><h4><b>EXAMPLES</b></h4><pre>
       Print ranges header, and analysis.
              $ dhcpd-pools -L 11 -c dhcpd.conf -l dhcpd.leases
              Ranges:
              shared net name [...]

       Print shared networks and totals, both headers and results
              $ dhcpd-pools -L 66 -c dhcpd.conf -l dhcpd.leases shared net name
              [...]

       Alarming
              $ dhcpd-pools -c dhcpd.conf -l dhcpd.leases --critical 80.1 --warning 75
              CRITICAL: dhcpd-pools: Ranges; crit: 14 warn: 22 ok: 220 Shared nets; crit: 1 warn: 0 ok: 4

              $ dhcpd-pools -c dhcpd.conf -l dhcpd.leases -L 22 --critical 70 --warning 50
              [no-output]
              Suppress printing OK, and make alarm only to go off if shared networks exceed critial  or  warning
              levels.

</pre><h4><b>FILES</b></h4><pre>
       /etc/dhcp/dhcpd.conf
              ISC dhcpd configuration file.

       /var/lib/dhcp/dhcpd.leases
              ISC dhcpd lease file.

       /usr/share/doc/dhcpd-pools/prometheus.template
              Prometheus text file collector mustach template.

</pre><h4><b>AUTHORS</b></h4><pre>
       Original design by Sami Kerola.
       uthash by Troy D. Hanson.
       XML support by Dominic Germain, Sogetel inc.
       IPv6 support by Cheer Xiao.
       Mustache templating support by Jos√© Bollo.

</pre><h4><b>LICENSE</b></h4><pre>
       The  dhcpd-pools uses FreeBSD License, uthash uses BSD license, the mustache uses Apache License, and the
       gnulib modules are mostly, but not entirely, GPL.

</pre><h4><b>REPORTING</b> <b>BUGS</b></h4><pre>
       Report bugs to Sami Kerola
       Home page

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man5/dhcpd.leases.5.html">dhcpd.leases</a></b>(5), <b><a href="../man5/dhcpd.conf.5.html">dhcpd.conf</a></b>(5), <b><a href="../man1/chmod.1.html">chmod</a></b>(1), https://mustache.github.io/

3.2                                                2017-11-15                                     <u><a href="../man1/DHCPD-POOLS.1.html">DHCPD-POOLS</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>