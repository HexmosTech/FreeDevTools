<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CMCRequest - Used to generate a CMC certificate issuance or revocation request.</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/jammy/+package/pki-tools">pki-tools_11.0.0-1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       CMCRequest - Used to generate a CMC certificate issuance or revocation request.

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>CMCRequest</b> <u>config-file</u>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The   Certificate  Management  over  Cryptographic  Message  Syntax  (CMC)  Request  Generation  utility,
       <b>CMCRequest</b>, provides a command-line utility used to generate a CMC  certificate  issuance  or  revocation
       request.  For issuance request, it requires either a PKCS#10 or CRMF request as input.  The resulting CMC
       request can be sent to the CA via tool such as <b>HttpClient</b>.

       <b>CMCRequest</b> takes a configuration file where various configuration parameters are supported.

</pre><h4><b>CONFIGURATION</b> <b>PARAMETERS</b></h4><pre>
       The  following  are  supported configuration parameters for the configuration file.  Each parameter is in
       the format of lt;namegt;=lt;valuegt; (e.g. format=pkcs10).

   <b>numRequests</b>
       Total number of PKCS10 or CRMF requests.  (note: lately the CA has only been tested to work with one)

   <b>input</b>
       Full path for PKCS #10 or CRMF certificate request in PEM.

       For example if <b>PKCS10Client</b>  or  <b>CRMFPopClient</b>  are  used  to  generate  the  PKCS#10  or  CRMF  requests
       respectively, this value should be the value of the <b>-o</b> option of those command line tools.

   <b>format</b>
       Request format. Either <b>pkcs10</b> or <b>crmf</b>.

   <b>output</b>
       Full path for the resulting CMC request in ASN.1 DER encoded format.

       Note  that  this  would be the <b>input</b> in the <b>HttpClient</b> configuration file if it is used to submit the CMC
       request.

   <b>dbdir</b>
       Directory for NSS database.

   <b>tokenname</b>
       Name of crypto token where user signing certificate key can be found (default is internal).

   <b>nickname</b>
       The nickname of the user certificate that corresponds to the  private  key  that  is  used  to  sign  the
       request.

       This parameter is ignored if <b>useSharedSecret</b> or <b>identityProofV2.enable</b> is true.

   <b>password</b>
       Password to the crypto token where the signing user's certificate and keys are stored.

   <b>identification[.enable]</b>
       RFC   5272  allows  the  CA  to  require  inclusion  of  the  <b>identification</b>  control  to  accompany  the
       <b>identityProofV2</b> control in a CMC request.

       In PKI, CA employs the <b>identification</b> control to assist  in  locating  the  shared  secret  required  for
       verification of the shared secret computed in the <b>identityProofV2</b>.

       In  addition,  the  <b>identification</b>  control is also required for <b>popLinkWitnessV2</b> for locating the shared
       secret.

       When <b>identification.enable</b> is true, <b>identification</b> should contain a user id known by the CA.

   <b>witness.sharedSecret</b>
       The <b>witness.sharedSecret</b> should contain a passphrase that is known by the CA.   One  usually  obtains  it
       from the CA administrator.

       This parameter is required by the following options: <b>identityProofV2</b>, and <b>popLinkWitnessV2</b>.

       See <b><a href="../man1/CMCSharedToken.1.html">CMCSharedToken</a>(1)</b> for information on usage.

   <b>identityProofV2.[enable,</b> <b>hashAlg,</b> <b>macAlg]</b>
       Identity  Proof  V2 allows one to provide proof of identity without a signing certificate.  It does so by
       embedding a "witness" value that's calculated from a shared secret (see  <b>witness.sharedSecret</b>)  known  by
       the CA.

       The  <b>identityProofV2</b> parameter set allows a user to specify the hashing algorithm as well as MAC (Message
       Authentication Code) algorithm used to compute the value of the witness value.

       Supported <b>identityProofV2.hashAlg</b> are: <b>SHA-256</b>, <b>SHA-384</b>, and <b>SHA-512</b>.

       Supported <b>identityProofV2.macAlg</b> are: <b>SHA-256-HMAC</b>, <b>SHA-384-HMAC</b>, and <b>SHA-512-HMAC</b>.

       When <b>identityProofV2.enable</b> is true, these parameters must be accompanied by the <b>identification</b>  as  well
       as the <b>witness.sharedSecret</b> parameters.

       These parameters could be accompanied by the <b>popLinkWitnessV2</b> parameter set if required by the CA.

   <b>popLinkWitnessV2.[enable,</b> <b>keyGenAlg,</b> <b>macAlg]</b>
       The  POPLinkWitnessV2  control  is  a  mechanim that links the POP (Proof of Possession) to the identity,
       which adds more credibility to the otherwise distinct POP and Proof of Identity mechanisms.  It  does  so
       by  employing  calculation of a random value with a shared secret (see <b>witness.sharedSecret</b>) known by the
       CA.

       The POP Link Witness V2 value must be baked into the PKCS#10 or CRMF requests.  It is  therefore  crutial
       that the caller that employs this option has access to the private key of the certificate request.

       If  <b>popLinkWitnessV2</b>  is  used,  then  <b>identification</b>  and <b>witness.sharedSecret</b> must be supplied, and the
       <b>identityProofV2</b> parameter set is in general used.

       Supported keyGenAlg are: <b>SHA-256</b>, <b>SHA-384</b>, and <b>SHA-512</b>.

       Supported macAlg are: <b>SHA-256-HMAC</b>, <b>SHA-384-HMAC</b>, and <b>SHA-512-HMAC</b>.

   <b>request.useSharedSecret</b>
       <b>true</b> or <b>false</b>.  If <b>useSharedSecret</b> is true, the CMC request will be "signed" with the pairing private key
       of the enrollment request; and in which case the <b>nickname</b> parameter will be ignored.

       <b>request.useSharedSecret</b> is only used if a signing certificate (of the  agent  or  user  herself)  is  not
       available  to sign.  Because the request itself is not signed with a certificate (a proven identity), the
       proof of origin (proof of identification) must be provided by some other means.

       In PKI, if <b>request.useSharedSecret</b> is true, it must be used in conjunction with the  <b>identityProofV2</b>  and
       <b>identification</b>  parameters.   And  in  that case the Proof Of Origin is accomplished by the Shared Secret
       (<b>witness.sharedSecret</b>) mechanism.

       The <b>request.useSharedSecret</b> option is normally used to enroll for  a  user's  first  signing  certificate
       while  auto-approval  (without  agent's pre-approval) is preferred.  In general, once a user has obtained
       the first signing certificate, such signing certificate can be used to sign  (thus  proving  origin)  and
       obtain other certificate such as encryption-only ceritifcate, or when doing a renewal or revocation.

       By default, if unspecified, <b>request.useSharedSecret</b> is false.

       <b>Note</b>:  to  employ  the  <b>request.useSharedSecret</b>  option,  the  PKCS#10  or  CRMF  requests  must have the
       <b>SubjectKeyIdentifier</b> <b>extension</b>.  (hint: <b>CRMFPopClient</b> and <b>PKCS10Client</b> should be  called  with  the  "-y"
       option)

       If  <b>request.useSharedSecret</b>  is true, <b>request.privKeyId</b> must be specified.  It is crucial that the caller
       that employs this option has access to the private key of the certificate request.

   <b>request.privKeyId</b>
       The  <b>request.privKeyId</b>  parameter  is  required  in   the   following   cases:   <b>request.useSharedSecret</b>,
       <b>popLinkWitnessV2</b>, and <b>decryptedPop</b>

   <b>decryptedPop.enable,</b> <b>encryptedPopResponseFile,</b> <b>decryptedPopRequestFile</b>
       In  case when the enrolling key is an encryption-only key, the traditional POP (Proof of Possession) that
       employs signing of the request is not possible, CMC provides the EncryptedPOP/DecryptedPOP  mechanism  to
       allow  the  CA  to  challenge  the client.  This mechanism requires two trips.  First trip (a CMC request
       without POP) would trigger the CA to generate a challenge and encrypt  the  challenge  with  the  request
       public  key  in the certificate response (one should find the EncryptedPOP control as well as status with
       "failedInfo=POP required" in the CMCResponse); while second trip from the client would contain proof that
       the client has decrypted the challenge and thereby proving ownership of the private key to the enrollment
       request.  When preparing for the second trip, the following parameters must be present:

       <b>decryptedPop.enable</b> - set to true; default is false;

       <b>encryptedPopResponseFile</b> - The input file that contains  the  CMCResponse  from  first  trip;  It  should
       contains the CMC EncryptedPop control.

       <b>decryptedPopRequestFile</b>  -  The output file for the CMC request which should contain the CMC DecryptedPOP
       control.

       <b>request.privKeyId</b> - see descripton for <b>request.privKeyId</b>; It is used to decrypt the EncryptedPop, thereby
       proving the possession of the private key.

       Please note that the <b>PopLinkWitnessV2</b> control as well as the  <b>request.useSharedSecret</b>  directive  do  not
       apply  to EncryptedPOP/DecryptedPOP for the simple fact that the enrollment private key is not capable of
       signing.

   <b>revRequest.[enable,</b> <b>serial,</b> <b>reason,</b> <b>comment,</b> <b>issuer,</b> <b>sharedSecret]</b>
       Revocation can be done either by signing with user's own valid signing certificate, or by  authenticating
       with user's shared secret (see <b>witness.sharedSecret</b>) known by the CA.

       For revocation request signed with user's own valid signing certificate, the <b>nickname</b> parameter should be
       a  valid  user signing certificate that belongs to the same user subject as that of the certificate to be
       revoked (but not necessarily the same certificate); Also, <b>revRequest.issuer</b>  and  <b>revRequest.sharedSecret</b>
       are ignored, while <b>revRequest.serial</b> and <b>revRequest.reason</b> must contain valid values.

       For  revocation  by  authenticating  with  user's  shared  secret, the following parameters are required:
       <b>revRequest.serial</b>, <b>revRequest.reason</b>, <b>revRequest.issuer</b>, <b>revRequest.sharedSecret</b>, while <b>nickname</b> will  be
       ignored.

       <b>revRequest.reason</b>   can  have  one  of  the  following  values: <b>unspecified</b>, <b>keyCompromise</b>, <b>caCompromise</b>,
       <b>affiliationChanged</b>, <b>superseded</b>, <b>cessationOfOperation</b>, <b>certificateHold</b>, <b>removeFromCRL</b>.

       <b>revRequest.serial</b> is in Decimal.

       <b>revRequest.issuer</b> is issuer subject DN.

       <b>revRequest.invalidityDatePresent</b> is optional. <b>true</b> or  <b>false</b>.   When  true,  the  invalidityDate  of  the
       RevokeRequest will be set to the current time when this tool is being run.

       <b>revRequest.comment</b> is optional.

</pre><h4><b>EXAMPLES</b></h4><pre>
       CMC  requests  must  be  submitted to the CA to be processed.  Tool supported by PKI for submitting these
       requests is <b>HttpClient</b>.

       <b>Note:</b>  For   examples   on   how   to   use   this   tool,   please   see   Practical   Usage   Scenarios
       ⟨https://www.dogtagpki.org/wiki/PKI_10.4_CMC_Feature_Update_(RFC5272⟩#Practical_Usage_Scenarios),     and
       their examples.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man1/CMCResponse.1.html">CMCResponse</a>(1)</b>, <b><a href="../man1/CMCSharedToken.1.html">CMCSharedToken</a>(1)</b>, <b><a href="../man1/CMCRevoke.1.html">CMCRevoke</a>(1)</b>, <b><a href="../man1/pki.1.html">pki</a>(1)</b>

</pre><h4><b>AUTHORS</b></h4><pre>
       Christina Fu lt;<a href="mailto:cfu@redhat.comgt">cfu@redhat.comgt</a>;.

</pre><h4><b>COPYRIGHT</b></h4><pre>
       Copyright (c) 2018 Red Hat, Inc.  This is licensed under  the  GNU  General  Public  License,  version  2
       (GPLv2).  A copy of this license is available at <a href="http://www.gnu.org/licenses/old-licenses/gpl-2.0.txt">http://www.gnu.org/licenses/old-licenses/gpl-2.0.txt</a>.

PKI                                              March 14, 2018                                    <u><a href="../man1/CMCRequest.1.html">CMCRequest</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>