<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>pvsecret-create - Create a new add-secret request</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/s390-tools">s390-tools_2.37.0-0ubuntu2_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       pvsecret-create - Create a new add-secret request

</pre><h4><b>SYNOPSIS</b></h4><pre>
       pvsecret create [OPTIONS] --host-key-document &lt;FILE&gt; --hdr &lt;FILE&gt; --output &lt;FILE&gt; &lt;--no-verify|--cert &lt;FILE&gt;&gt; &lt;COMMAND&gt;

</pre><h4><b>DESCRIPTION</b></h4><pre>
       Create add-secret requests for IBM Secure Execution guests. Only create these requests in a trusted
       environment, such as your workstation. The <b>pvattest</b> <b>create</b> command creates a randomly generated key to
       protect the request. The generated requests can then be added on an IBM Secure Execution guest using
       <b>pvsecret</b> <b>add</b>. The guest can then use the secrets with the use case depending on the secret type.  Such a
       request is bound to a specific IBM Secure Execution image specified with <b>--hdr</b>. Optionally, the request
       can be bound to a specific instance when bound to the Configuration Unique ID from <b>pvattest</b> using <b>--cuid</b>

</pre><h4><b>PVSECRET</b> <b>CREATE</b> <b>COMMANDS</b></h4><pre>
       <b>pvsecret</b> <b><a href="../man1/create-meta.1.html">create-meta</a>(1)</b>
           Create a meta secret

       <b>pvsecret</b> <b><a href="../man1/create-association.1.html">create-association</a>(1)</b>
           Create an association secret

       <b>pvsecret</b> <b><a href="../man1/create-retrievable.1.html">create-retrievable</a>(1)</b>
           Create a retrievable secret

</pre><h4><b>OPTIONS</b></h4><pre>
       -k, --host-key-document &lt;FILE&gt;
           Use FILE as a host-key document. Can be specified multiple times and must be specified at least once.

       --no-verify
           Disable the host-key document verification. Does not require the host-key documents to be valid. Do
           not use for a production request unless you verified the host-key document beforehand.

       -C, --cert &lt;FILE&gt;
           Use FILE as a certificate to verify the host-key or keys. The certificates are used to establish a
           chain of trust for the verification of the host-key documents. Specify this option twice to specify
           the IBM Z signing key and the intermediate CA certificate (signed by the root CA).

       --crl &lt;FILE&gt;
           Use FILE as a certificate revocation list (CRL). The list is used to check whether a certificate of
           the chain of trust is revoked. Specify this option multiple times to use multiple CRLs.

       --offline
           Make no attempt to download CRLs.

       --root-ca &lt;ROOT_CA&gt;
           Use FILE as the root-CA certificate for the verification. If omitted, the system wide-root CAs
           installed on the system are used. Use this only if you trust the specified certificate.

       --hdr &lt;FILE&gt;
           Specifies the header of the guest image. Can be an IBM Secure Execution image created by
           <b>pvimg/genprotimg</b> or an extracted IBM Secure Execution header.

       -f, --force
           Force the generation of add-secret requests on IBM Secure Execution guests. If the program detects
           that it is running on an IBM Secure Execution guest, it denies the generation of add-secret requests.
           The force flag overwrites this behavior.

       -o, --output &lt;FILE&gt;
           Write the generated request to FILE.

       --extension-secret &lt;FILE&gt;
           Use the content of FILE as an extension secret. The file must be exactly 32 bytes long. If this
           request is the first, all subsequent requests must have the same extension secret. Only makes sense
           if bit 1 of the secret control flags of the IBM Secure Execution header is 0. Otherwise the
           ultravisor rejects the request.

       --cck &lt;FILE&gt;
           Use the content of FILE as the customer-communication key (CCK) to derive the extension secret. The
           file must contain exactly 32 bytes of data. If the target guest was started with bit 1 of the secret
           control flag set, the ultravisor also derives the secret from the CCK. Otherwise, the ultravisor
           interprets the extension secret as a normal one. This still works if you use the same CCK for all
           requests.

       --cuid-hex &lt;HEXSTRING&gt;
           Use HEXSTRING as the Configuration Unique ID. Must be a hex 128-bit unsigned big endian number
           string. Leading zeros must be provided. If specified, the value must match with the Config-UID from
           the attestation result of that guest.  If not specified, the CUID will be ignored by the ultravisor
           during the verification of the request.

       --cuid &lt;FILE&gt;
           Use the content of FILE as the Configuration Unique ID. The file must contain exactly 128 bit of data
           or a yaml with a `cuid` entry. If specified, the value must match the Config-UID from the attestation
           result of that guest. If not specified, the CUID will be ignored by the Ultravisor during the
           verification of the request.

       --flags &lt;FLAGS&gt;
           Flags for the add-secret request.

           Possible values:
               - <b>disable-dump</b>: Disables host-initiated dumping for the target guest instance.

       --user-data &lt;FILE&gt;
           Use the content of FILE as user-data. Passes user data defined in FILE through the add-secret request
           to the ultravisor. The user data can be up to 512 bytes of arbitrary data, and the maximum size
           depends on the size of the user-signing key:

            - No key: user data can be 512 bytes.

            - EC(secp521r1) or RSA 2048 keys: user data can be 256 bytes.

            - RSA 3072 key: user data can be 128 bytes.

           The firmware ignores this data, but the request tag protects the user-data.  Optional. No user-data
           by default.

       --user-sign-key &lt;FILE&gt;
           Use the content of FILE as user signing key. Adds a signature calculated from the key in FILE to the
           add-secret request. The file must be in DER or PEM format containing a private key. Supported are RSA
           2048 &amp; 3072-bit and EC(secp521r1) keys. The firmware ignores the content, but the request tag
           protects the signature. The user-signing key signs the request. The location of the signature is
           filled with zeros during the signature calculation. The request tag also secures the signature. See
           man pvsecret verify for more details.  Optional. No signature by default.

       --use-name
           Do not hash the name, use it directly as secret ID. Ignored for meta-secrets.

       -h, --help
           Print help (see a summary with <b>-h</b>).

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man1/pvsecret.1.html">pvsecret</a></b>(1) <b><a href="../man1/pvsecret-create-meta.1.html">pvsecret-create-meta</a></b>(1) <b><a href="../man1/pvsecret-create-association.1.html">pvsecret-create-association</a></b>(1) <b><a href="../man1/pvsecret-create-retrievable.1.html">pvsecret-create-retrievable</a></b>(1)

s390-tools                                         2024-12-19                                 <u><a href="../man1/PVSECRET-CREATE.1.html">PVSECRET-CREATE</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>