<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>check_pgbackrest - pgBackRest backup check plugin for Nagios</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/check-pgbackrest">check-pgbackrest_2.4-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       check_pgbackrest - pgBackRest backup check plugin for Nagios

</pre><h4><b>SYNOPSIS</b></h4><pre>
         check_pgbackrest [-s|--service SERVICE] [-S|--stanza NAME]
         check_pgbackrest [-l|--list]
         check_pgbackrest [--help]

</pre><h4><b>DESCRIPTION</b></h4><pre>
       check_pgbackrest is designed to monitor pgBackRest (2.52 and above) backups from Nagios.

       <b>-s</b>, <b>--service</b> SERVICE
           The  Nagios  service  to  run.  See  section  SERVICES for a description of available services or use
           "--list" for a short service and description list.

       <b>-S</b>, <b>--stanza</b> NAME
           Name of the stanza to check.

       <b>--repo</b> REPOSITORY
           Repository index to operate on. If no "--repo" argument is provided, the service will operate on  all
           repositories  defined, checking for inconsistencies across multiple repositories. When using multiple
           repositories, it is recommended to also define checks using  the  "--repo"  argument  to  verify  the
           sanity of each repository separately.

       <b>-O</b>, <b>--output</b> OUTPUT_FORMAT
           The  output  format.  Supported outputs are: "human", "json", "nagios" (default), "nagios_strict" and
           "prtg".

           The "nagios_strict" output format will filter out unsupported types of values  from  the  performance
           data.

       <b>-C</b>, <b>--command</b> FILE
           pgBackRest executable file (default: "pgbackrest").

       <b>-c</b>, <b>--config</b> CONFIGURATION_FILE
           pgBackRest configuration file.

       <b>-P</b>, <b>--prefix</b> COMMAND
           Some prefix command to execute the pgBackRest info command (eg: "sudo -iu postgres").

       <b>-l</b>, <b>--list</b>
           List available services.

       <b>--debug</b>
           Print some debug messages.

       <b>-V</b>, <b>--version</b>
           Print version and exit.

       <b>-?</b>, <b>--help</b>
           Show this help page.

   <b>SERVICES</b>
       Descriptions and parameters of available services.

       <b>retention</b>
           Fail when the number of full backups is less than the "--retention-full" argument.

           Fail when the number of differential backups is less than the "--retention-diff" argument.

           Fail when the number of incremental backups is less than the "--retention-incr" argument.

           Fail when the newest backup is older than the "--retention-age" argument.

           Fail when the newest full backup is older than the "--retention-age-to-full" argument.

           Fail when the oldest backup is newer than the "--retention-age-to-oldest" argument.

           The following units are accepted (not case sensitive): s (second), m (minute), h (hour), d (day). You
           can use more than one unit per given value.

           Arguments are not mandatory to only show some information.

       <b>archives</b>
           Check if all archived WALs exist between the oldest and the latest WAL needed for the recovery.

           Use the "--wal-segsize" argument to set the WAL segment size.

           The  following  units  are accepted (not case sensitive): b (Byte), k (KB), m (MB), g (GB), t (TB), p
           (PB), e (EB) or Z (ZB). Only integers are accepted. Eg. "1.5MB" will be refused, use "1500kB".

           The factor between units is 1024 bytes. Eg. "1g = 1G = 1024*1024*1024."

           Use the "--ignore-archived-before" argument to ignore the archived WALs generated before the provided
           interval. Used to only check the latest archives.

           Use the "--ignore-archived-after" argument to ignore the archived WALs generated after  the  provided
           interval.

           The  "--latest-archive-age-alert"  argument  defines  the  max  age  of the latest archived WAL as an
           interval before raising a critical alert.

           The following units are accepted as interval (not case sensitive): s (second), m (minute), h  (hour),
           d  (day).  You  can  use more than one unit per given value. If not set, the last unit is in seconds.
           Eg. "1h 55m 6" = "1h55m6s".

           All the missing archives are only shown in the "--debug" mode.

           Use "--list-archives" in addition with "--debug" to print the list of all the archived WAL segments.

           Use "--list-boundaries" in addition with "--debug" to print the list of all the boundary WAL segments
           fetched from the history files.

           By default, all the archives older than the oldest backup start archive or  newer  than  the  max_wal
           returned by the pgBackRest info command are ignored.

           Use the "--extended-check" argument to force a full check of the found archives and raise warnings in
           case of inconsistencies.

           When  WAL  archives  on  different  timelines are found, .history files are parsed to find the switch
           point and define the boundary WAL.

           Use the "--max-archives-check-number" to prevent infinite WAL archives check when boundary WAL  can't
           be defined properly.

           In  case  of  pgBackRest  db  history  change (after a successful stanza-upgrade), only the latest db
           system/version will be checked.

       <b>check_pgb_version</b>
           Check if this script is running a given version.

           You must provide the expected version using "--target-version".

       <b>pgbackrest_version</b>
           Check if pgBackRest is running a given version.

           You must provide the expected version using "--target-version".

</pre><h4><b>CONTRIBUTING</b></h4><pre>
       check_pgbackrest is an open project. Any contribution to improve it is welcome.

</pre><h4><b>VERSION</b></h4><pre>
       check_pgbackrest version 2.4, released on Fri Jul 05 2024.

</pre><h4><b>LICENSING</b></h4><pre>
       This program is open source, licensed under the PostgreSQL license.  For license terms, see  the  LICENSE
       file.

</pre><h4><b>AUTHORS</b></h4><pre>
       Author: Stefan Fercot.

       Logo: Damien Cazeils (www.damiencazeils.com).

       Copyright: (c) 2018-2020, Dalibo / 2020-2024, Stefan Fercot.

2.4                                                2024-07-05                                <u><a href="../man1/CHECK_PGBACKREST.1.html">CHECK_PGBACKREST</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>