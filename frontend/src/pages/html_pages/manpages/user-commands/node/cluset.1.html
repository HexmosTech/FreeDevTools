<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>cluset - compute advanced cluster node set operations</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/clustershell">clustershell_1.9.3-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       cluset - compute advanced cluster node set operations

</pre><h4><b>SYNOPSIS</b></h4><pre>
          <b>cluset</b> [OPTIONS] [COMMAND] [nodeset1 [OPERATION] nodeset2|...]

</pre><h4><b>DESCRIPTION</b></h4><pre>
       Note: <b>cluset</b> and <b>nodeset</b> are the same command.

       <b>cluset</b>  is  an  utility  command provided with the ClusterShell library which implements some features of
       ClusterShell's NodeSet and RangeSet Python classes.  It provides easy manipulation of  1D  or  nD-indexed
       cluster nodes and node groups.

       Also,  <b>cluset</b>  is  automatically  bound  to  the  library  node  group  resolution mechanism. Thus, it is
       especially useful to enhance cluster aware administration shell scripts.

</pre><h4><b>OPTIONS</b></h4><pre>
          <b>--version</b>
                 show program's version number and exit

          <b>-h</b>, <b>--help</b>
                 show this help message and exit

          <b>-s</b> <u>GROUPSOURCE</u>, <b>--groupsource=</b><u>GROUPSOURCE</u>
                 optional <b><a href="../man5/groups.conf.5.html">groups.conf</a></b>(5) group source to use

          <b>--groupsconf=</b><u>FILE</u>
                 use alternate config file for <a href="../man5/groups.conf.5.html">groups.conf</a>(5)

          <b>Commands:</b>

                 <b>-c</b>, <b>--count</b>
                        show number of nodes in nodeset(s)

                 <b>-e</b>, <b>--expand</b>
                        expand nodeset(s) to separate nodes (see also -S <u>SEPARATOR</u>)

                 <b>-f</b>, <b>--fold</b>
                        fold nodeset(s) (or separate nodes) into one nodeset

                 <b>-l</b>, <b>--list</b>
                        list node groups, list node groups and nodes (<b>-ll</b>) or list node groups, nodes  and  node
                        count  (<b>-lll</b>).  When  no  argument  is specified at all, this command will list all node
                        group names found in selected group source (see also -s <u>GROUPSOURCE</u>).  If  any  nodesets
                        are  specified  as  argument,  this command will find node groups these nodes belongs to
                        (individually). Optionally for each group, the fraction of these nodes being  member  of
                        the  group  may  be  displayed  (with <b>-ll</b>), and also member count/total group node count
                        (with <b>-lll</b>). If a single hyphen-minus (-) is given as a nodeset, it will  be  read  from
                        standard input.

                 <b>-L</b>, <b>--list-all</b>
                        list node groups from all group sources (<b>-LL</b> shows nodes and <b>-LLL</b> adds node count). Like
                        <b>-l</b>,  if any nodesets are specified as argument, this command will find node groups these
                        nodes belongs to (individually).

                 <b>-r</b>, <b>--regroup</b>
                        fold nodes using node groups (see -s <u>GROUPSOURCE</u>)

                 <b>--groupsources</b>
                        list all active group sources (see <b><a href="../man5/groups.conf.5.html">groups.conf</a></b>(5))

          <b>Operations:</b>

                 <b>-x</b> <u>SUB_NODES</u>, <b>--exclude=</b><u>SUB_NODES</u>
                        exclude specified set

                 <b>-i</b> <u>AND_NODES</u>, <b>--intersection=</b><u>AND_NODES</u>
                        calculate sets intersection

                 <b>-X</b> <u>XOR_NODES</u>, <b>--xor=</b><u>XOR_NODES</u>
                        calculate symmetric difference between sets

          <b>Options:</b>

                 <b>-a</b>, <b>--all</b>
                        call external node groups support to display all nodes

                 <b>--autostep=</b><u>AUTOSTEP</u>
                        enable a-b/step style syntax when folding nodesets, value is min  node  count  threshold
                        (integer '4', percentage '50%' or 'auto'). If not specified, auto step is disabled (best
                        for  compatibility  with  other  cluster tools. Example: autostep=4, "node2 node4 node6"
                        folds in node[2,4,6] but autostep=3, "node2 node4 node6" folds in node[2-6/2].

                 <b>-d</b>, <b>--debug</b>
                        output more messages for debugging purpose

                 <b>-q</b>, <b>--quiet</b>
                        be quiet, print essential output only

                 <b>-R</b>, <b>--rangeset</b>
                        switch to RangeSet instead of NodeSet. Useful when working on numerical cluster  ranges,
                        eg. 1,5,18-31

                 <b>-G</b>, <b>--groupbase</b>
                        hide group source prefix (always <u>@groupname</u>)

                 <b>-S</b> <u>SEPARATOR</u>, <b>--separator=</b><u>SEPARATOR</u>
                        separator string to use when expanding nodesets (default: ' ')

                 <b>-O</b> <u>FORMAT</u>, <b>--output-format=</b><u>FORMAT</u>
                        output format (default: '%s')

                 <b>-I</b> <u>SLICE_RANGESET</u>, <b>--slice=</b><u>SLICE_RANGESET</u>
                        return sliced off result; examples of SLICE_RANGESET are "0" for simple index selection,
                        or "1-9/2,16" for complex rangeset selection

                 <b>--split=</b><u>MAXSPLIT</u>
                        split result into a number of subsets

                 <b>--contiguous</b>
                        split  result  into contiguous subsets (ie. for nodeset, subsets will contain nodes with
                        same pattern name and a contiguous range of indexes, like foobar[1-100];  for  rangeset,
                        subsets with consists in contiguous index ranges)"""

                 <b>--axis=</b><u>RANGESET</u>
                        for  nD nodesets, fold along provided axis only. Axis are indexed from 1 to n and can be
                        specified here either using the rangeset syntax, eg. '1', '1-2', '1,3', or by  a  single
                        negative  number meaning that the indices is counted from the end. Because some nodesets
                        may have several different dimensions, axis indices are silently truncated  to  fall  in
                        the allowed range.

                 <b>--pick=</b><u>N</u>
                        pick N node(s) at random in nodeset

       For a short explanation of these options, see <b>-h,</b> <b>--help</b>.

       If a single hyphen-minus (-) is given as a nodeset, it will be read from standard input.

</pre><h4><b>EXTENDED</b> <b>PATTERNS</b></h4><pre>
       The  <b>cluset</b>  command  benefits  from ClusterShell NodeSet basic arithmetic addition. This feature extends
       recognized string patterns by supporting  operators  matching  all  Operations  seen  previously.  String
       patterns are read from left to right, by proceeding any character operators accordingly.

       <b>Supported</b> <b>character</b> <b>operators</b>

              <b>,</b>      indicates  that  the  <u>union</u>  of  both  left  and  right  nodeset  should be computed before
                     continuing

              <b>!</b>      indicates the <u>difference</u> operation

              <b>&amp;</b>      indicates the <u>intersection</u> operation

              <b>^</b>      indicates the <u>symmetric</u> <u>difference</u> (XOR) operation

              Care should be taken to escape these characters as needed when the shell does not  interpret  them
              literally.

       <b>Examples</b> <b>of</b> <b>use</b> <b>of</b> <b>extended</b> <b>patterns</b>

              <b>$</b> <b>cluset</b> <b>-f</b> <b>node[0-7],node[8-10]</b>
              node[0-10]

              <b>$</b> <b>cluset</b> <b>-f</b> <b>node[0-10]!node[8-10]</b>
              node[0-7]

              <b>$</b> <b>cluset</b> <b>-f</b> <b>node[0-10]&amp;node[5-13]</b>
              node[5-10]

              <b>$</b> <b>cluset</b> <b>-f</b> <b>node[0-10]^node[5-13]</b>
              node[0-4,11-13]

       <b>Example</b> <b>of</b> <b>advanced</b> <b>usage</b>

              <b>$</b> <b>cluset</b> <b>-f</b> <b>@gpu^@slurm:bigmem!@chassis[1-9/2]</b>

              This  computes a folded nodeset containing nodes found in group @gpu and @slurm:bigmem, but not in
              both, minus the nodes found in odd chassis groups from 1 to 9.

       <b>"All</b> <b>nodes"</b> <b>extension</b>
              The <b>@*</b> and <b>@SOURCE:*</b> special notations may be used in extended patterns to represent all nodes (in
              SOURCE) according to the <u>all</u> external shell command (see <b><a href="../man5/groups.conf.5.html">groups.conf</a></b>(5)) and are equivalent to:

                 <b>$</b> <b>cluset</b> <b>[-s</b> <b>SOURCE]</b> <b>-a</b> <b>-f</b>

       <b>Group</b> <b>names</b> <b>in</b> <b>expressions</b>
              The <b>@@SOURCE</b> notation may be used to access all group names from the specified SOURCE (or from the
              default group source when just <b>@@</b> is used)  in  node  set  expressions;  this  works  with  either
              file-based  group  sources  or  with external group sources that have the <u>list</u> upcall defined (see
              <b><a href="../man5/groups.conf.5.html">groups.conf</a></b>(5)):

                 <b>$</b> <b>cluset</b> <b>-f</b> <b>@@rack</b>
                 J[1-3]

</pre><h4><b>NODE</b> <b>WILDCARDS</b></h4><pre>
       Any wildcard mask found is matched against all nodes from the group source (see  <b><a href="../man5/groups.conf.5.html">groups.conf</a></b>(5)  and  the
       <b>-a/--all</b>  option  above).   <b>*</b>  means match zero or more characters of any type; <b>?</b> means match exactly one
       character of any type.  This can be especially useful for  server  farms,  or  when  cluster  node  names
       differ.

       <b>Say</b> <b>that</b> <b>your</b> <b>group</b> <b>configuration</b> <b>is</b> <b>set</b> <b>to</b> <b>return</b> <b>the</b> <b>following</b> <b>“all</b> <b>nodes”:</b>

              <b>$</b> <b>cluset</b> <b>-f</b> <b>-a</b>
              bckserv[1-2],dbserv[1-4],wwwserv[1-9]

       <b>Then,</b> <b>you</b> <b>can</b> <b>use</b> <b>wildcards</b> <b>to</b> <b>select</b> <b>particular</b> <b>nodes,</b> <b>as</b> <b>shown</b> <b>below:</b>

              <b>$</b> <b>cluset</b> <b>-f</b> <b>'www*'</b>
              wwwserv[1-9]

              <b>$</b> <b>cluset</b> <b>-f</b> <b>'www*[1-4]'</b>
              wwwserv[1-4]

              <b>$</b> <b>cluset</b> <b>-f</b> <b>'*serv1'</b>
              bckserv1,dbserv1,wwwserv1

       Wildcard  masks  are  resolved prior to extended patterns, but each mask is evaluated as a whole node set
       operand.  In the example below, we select all nodes matching <b>*serv*</b> before removing  all  nodes  matching
       <b>www*</b>:

          <b>$</b> <b>cluset</b> <b>-f</b> <b>'*serv*!www*'</b>
          bckserv[1-2],dbserv[1-4]

</pre><h4><b>EXIT</b> <b>STATUS</b></h4><pre>
       An exit status of zero indicates success of the <b>cluset</b> command. A non-zero exit status indicates failure.

</pre><h4><b>EXAMPLES</b></h4><pre>
       <b>Getting</b> <b>the</b> <b>node</b> <b>count</b>

              <b>$</b> <b>cluset</b> <b>-c</b> <b>node[0-7,32-159]</b>
              136

              <b>$</b> <b>cluset</b> <b>-c</b> <b>node[0-7,32-159]</b> <b>node[160-163]</b>
              140

              <b>$</b> <b>cluset</b> <b>-c</b> <b>dc[1-2]n[100-199]</b>
              200

              <b>$</b> <b>cluset</b> <b>-c</b> <b>@login</b>
              4

       <b>Folding</b> <b>nodesets</b>

              <b>$</b> <b>cluset</b> <b>-f</b> <b>node[0-7,32-159]</b> <b>node[160-163]</b>
              node[0-7,32-163]

              <b>$</b> <b>echo</b> <b>node3</b> <b>node6</b> <b>node1</b> <b>node2</b> <b>node7</b> <b>node5</b> <b>|</b> <b>cluset</b> <b>-f</b>
              node[1-3,5-7]

              <b>$</b> <b>cluset</b> <b>-f</b> <b>dc1n2</b> <b>dc2n2</b> <b>dc1n1</b> <b>dc2n1</b>
              dc[1-2]n[1-2]

              <b>$</b> <b>cluset</b> <b>--axis=1</b> <b>-f</b> <b>dc1n2</b> <b>dc2n2</b> <b>dc1n1</b> <b>dc2n1</b>
              dc[1-2]n1,dc[1-2]n2

       <b>Expanding</b> <b>nodesets</b>

              <b>$</b> <b>cluset</b> <b>-e</b> <b>node[160-163]</b>
              node160 node161 node162 node163

              <b>$</b> <b>echo</b> <b>'dc[1-2]n[2-6/2]'</b> <b>|</b> <b>cluset</b> <b>-e</b>
              dc1n2 dc1n4 dc1n6 dc2n2 dc2n4 dc2n6

       <b>Excluding</b> <b>nodes</b> <b>from</b> <b>nodeset</b>

              <b>$</b> <b>cluset</b> <b>-f</b> <b>node[32-159]</b> <b>-x</b> <b>node33</b>
              node[32,34-159]

       <b>Computing</b> <b>nodesets</b> <b>intersection</b>

              <b>$</b> <b>cluset</b> <b>-f</b> <b>node[32-159]</b> <b>-i</b> <b>node[0-7,20-21,32,156-159]</b>
              node[32,156-159]

       <b>Computing</b> <b>nodesets</b> <b>symmetric</b> <b>difference</b> <b>(xor)</b>

              <b>$</b> <b>cluset</b> <b>-f</b> <b>node[33-159]</b> <b>--xor</b> <b>node[32-33,156-159]</b>
              node[32,34-155]

       <b>Splitting</b> <b>nodes</b> <b>into</b> <b>several</b> <b>nodesets</b> <b>(expanding</b> <b>results)</b>

              <b>$</b> <b>cluset</b> <b>--split=3</b> <b>-e</b> <b>node[1-9]</b>
              node1 node2 node3
              node4 node5 node6
              node7 node8 node9

       <b>Splitting</b> <b>non-contiguous</b> <b>nodesets</b> <b>(folding</b> <b>results)</b>

              <b>$</b> <b>cluset</b> <b>--contiguous</b> <b>-f</b> <b>node2</b> <b>node3</b> <b>node4</b> <b>node8</b> <b>node9</b>
              node[2-4]
              node[8-9]

              <b>$</b> <b>cluset</b> <b>--contiguous</b> <b>-f</b> <b>dc[1,3]n[1-2,4-5]</b>
              dc1n[1-2]
              dc1n[4-5]
              dc3n[1-2]
              dc3n[4-5]

</pre><h4><b>HISTORY</b></h4><pre>
       <b>cluset</b>  was  added  in  1.7.3  to  avoid  a conflict with xCAT's <b>nodeset</b> command and also to conform with
       ClusterShell's "clu*" command nomenclature.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man1/clubak.1.html">clubak</a></b>(1), <b><a href="../man1/clush.1.html">clush</a></b>(1), <b><a href="../man1/nodeset.1.html">nodeset</a></b>(1), <b><a href="../man5/groups.conf.5.html">groups.conf</a></b>(5).

        &lt;<a href="http://clustershell.readthedocs.org/">http://clustershell.readthedocs.org/</a>&gt;

</pre><h4><b>BUG</b> <b>REPORTS</b></h4><pre>
       <b>Use</b> <b>the</b> <b>following</b> <b>URL</b> <b>to</b> <b>submit</b> <b>a</b> <b>bug</b> <b>report</b> <b>or</b> <b>feedback:</b>
               &lt;https://github.com/cea-hpc/clustershell/issues&gt;

</pre><h4><b>AUTHOR</b></h4><pre>
       Stephane Thiell &lt;<a href="mailto:sthiell@stanford.edu">sthiell@stanford.edu</a>&gt;

</pre><h4><b>COPYRIGHT</b></h4><pre>
       GNU Lesser General Public License version 2.1 or later (LGPLv2.1+)

1.9.3                                              2025-01-23                                          <u><a href="../man1/CLUSET.1.html">CLUSET</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>