<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>lamexec - Run non-MPI programs on LAM nodes.</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/lam-runtime">lam-runtime_7.1.4-7.2_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       lamexec - Run non-MPI programs on LAM nodes.

</pre><h4><b>SYNOPSIS</b></h4><pre>

       lamexec [-fhvD] [-c # | -np #] [-nw | -w] [-pty] [-s node] [-x VAR1[=VALUE1][,VAR2[=VALUE2],...]]
              [where] program [-- args]

</pre><h4><b>OPTIONS</b></h4><pre>
       <b>-c</b> <b>#</b>      Synonym for <u>-np</u> (see below).

       <b>-D</b>        Use  the  executable  program  location as the current working directory for created processes.
                 The current working directory of the created processes will be set before the user's program is
                 invoked.

       <b>-f</b>        Do not configure standard I/O file descriptors - use defaults.

       <b>-h</b>        Print useful information on this command.

       <b>-np</b> <b>#</b>     (see below).  Run this many copies of the program on the given nodes.   This  option  indicates
                 that  the  specified  file is an executable program and not an application schema.  If no nodes
                 are specified, all LAM nodes are considered for scheduling; LAM will schedule the programs in a
                 round-robin fashion, "wrapping around" (and scheduling multiple copies on  a  single  node)  if
                 necessary.

       <b>-nw</b>       Do  not wait for all processes to complete before exiting <u>lamexec</u>.  This option is mutually ex‐
                 clusive with <u>-w</u>.

       <b>-pty</b>      Enable pseudo-tty support.  Among other things, this enabled  line-buffered  output  (which  is
                 probably  what  you  want).  The only reason that this feature is not enabled by default is be‐
                 cause it is so new and has not been extensively tested yet.

       <b>-s</b> <b>node</b>   Load the program from this node.  This option is not valid on the command line if  an  applica‐
                 tion schema is specified.

       <b>-v</b>        Be verbose; report on important steps as they are done.

       <b>-w</b>        Wait for all applications to exit before <u>lamexec</u> exits.

       <b>-x</b>        Export  the  specified  environment variables to the remote nodes before executing the program.
                 Existing environment variables can be specified (see the Examples section, below), or new vari‐
                 able names specified with corresponding values.  The parser for the <u>-x</u> option is not  very  so‐
                 phisticated;  it does not even understand quoted values.  Users are advised to set variables in
                 the environment, and then use <u>-x</u> to export (not define) them.

       <b>where</b>     A set of node and/or CPU identifiers indicating where to start

       <b>--</b> <b>args</b>   Pass these runtime arguments to every new process.  This must always be the  last  argument  to
                 <u>lamexec</u>.  This option is not valid on the command line if an application schema is specified.

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <u>lamexec</u> is essentially a clone of the <u><a href="../man1/mpirun.1.html">mpirun</a></u>(1), but is intended for non-MPI programs.

       One  invocation  of <u>lamexec</u> starts a non-MPI application running under LAM.  To start the same program on
       all LAM nodes, the application can be specified on the <u>lamexec</u> command line.  To start multiple  applica‐
       tions on the LAM nodes, an application schema is required in a separate file.  See <a href="../man5/appschema.5.html">appschema</a>(5) for a de‐
       scription  of  the application schema syntax, but it essentially contains multiple <u>lamexec</u> command lines,
       less the command name itself.  The ability to specify different options for different instantiations of a
       program is another reason to use an application schema.

   <b>Location</b> <b>Nomenclature</b>
       The location nomenclature that is used for the where clause mention in the SYNOPSIS  section,  above,  is
       identical  to <a href="../man1/mpirun.1.html">mpirun</a>(1)'s nomenclature.  See the <a href="../man1/mpirun.1.html">mpirun</a>(1) man page for a lengthy discussion of the loca‐
       tion nomenclature.

       Note that the by-CPU syntax, while valid for <u>lamexec</u>, is not quite as meaningful because process rank or‐
       dering in MPI_COMM_WORLD is irrelevant.  As such, the by-node nomenclature  is  typically  the  preferred
       syntax for <u>lamexec</u>.

   <b>Application</b> <b>Schema</b> <b>or</b> <b>Executable</b> <b>Program?</b>
       To distinguish the two different forms, <u>lamexec</u> looks on the command line for nodes or the <u>-c</u> option.  If
       neither is specified, then the file named on the command line is assumed to be an application schema.  If
       either  one or both are specified, then the file is assumed to be an executable program.  If nodes and <u>-c</u>
       both are specified, then copies of the program are started on the specified nodes according to an  inter‐
       nal LAM scheduling policy.  Specifying just one node effectively forces LAM to run all copies of the pro‐
       gram  in  one place.  If <u>-c</u> is given, but not nodes, then all LAM nodes are used.  If nodes is given, but
       not <u>-c</u>, then one copy of the program is run on each node.

   <b>Program</b> <b>Transfer</b>
       By default, LAM searches for executable programs on the target node where a particular instantiation will
       run.  If the file system is not shared, the target nodes are homogeneous, and the program  is  frequently
       recompiled,  it  can be convenient to have LAM transfer the program from a source node (usually the local
       node) to each target node.  The <u>-s</u> option specifies this behavior and identifies the single source node.

   <b>Locating</b> <b>Files</b>
       LAM looks for an executable program by searching the directories in the user's PATH environment  variable
       as defined on the source node(s).  This behavior is consistent with logging into the source node and exe‐
       cuting the program from the shell.  On remote nodes, the "." path is the home directory.

       LAM  looks  for  an application schema in three directories: the local directory, the value of the LAMAP‐
       PLDIR environment variable, and laminstalldir/boot, where "laminstalldir" is the directory where  LAM/MPI
       was installed.

   <b>Standard</b> <b>I/O</b>
       LAM  directs UNIX standard input to /dev/null on all remote nodes.  On the local node that invoked <u>lamex‐</u>
       <u>ec</u>, standard input is inherited from <u>lamexec</u>.  The default is what used to be the -w  option  to  prevent
       conflicting access to the terminal.

       LAM directs UNIX standard output and error to the LAM daemon on all remote nodes.  LAM ships all captured
       output/error to the node that invoked <u>lamexec</u> and prints it on the standard output/error of <u>lamexec</u>.  Lo‐
       cal processes inherit the standard output/error of <u>lamexec</u> and transfer to it directly.

       Thus  it is possible to redirect standard I/O for LAM applications by using the typical shell redirection
       procedure on <u>lamexec</u>.

              % lamexec N my_app  my_input  my_output

       The <u>-f</u> option avoids all the setup required to support standard I/O described  above.   Remote  processes
       are completely directed to /dev/null and local processes inherit file descriptors from <a href="../man1/lamboot.1.html">lamboot</a>(1).

   <b>Pseudo-tty</b> <b>support</b>
       The <u>-pty</u> option enabled pseudo-tty support for process output.  This allows, among other things, for line
       buffered output from remote nodes (which is probably what you want).

       This option is not currently the default for <u>lamexec</u> because it has not been thoroughly tested on a vari‐
       ety of different Unixes. Users are encouraged to use <u>-pty</u> and report any problems back to the LAM Team.

   <b>Current</b> <b>Working</b> <b>Directory</b>
       The current working directory for new processes created on the local node is inherited from <u>lamexec</u>.  The
       current  working directory for new processes created on remote nodes is the remote user's home directory.
       This default behavior is overridden by the <u>-D</u> option.

       The <u>-D</u> option will change the current working directory of new processes to the directory where the  exe‐
       cutable resides before the new user's program is invoked.

       An  alternative  to the <u>-D</u> option is the <u>-wd</u> option.  <u>-wd</u> allows the user to specify an arbitrary current
       working directory (vs. the location of the executable).  Note that the <u>-wd</u> option can be used in applica‐
       tion schema files (see <a href="../man5/appschema.5.html">appschema</a>(5)) as well.

   <b>Process</b> <b>Environment</b>
       Processes in the application inherit their environment from the LAM daemon upon the node  on  which  they
       are running.  The environment of a LAM daemon is fixed upon booting of the LAM with <a href="../man1/lamboot.1.html">lamboot</a>(1) and is in‐
       herited  from  the user's shell.  On the origin node this will be the shell from which <a href="../man1/lamboot.1.html">lamboot</a>(1) was in‐
       voked and on remote nodes this will be the shell started by <a href="../man1/rsh.1.html">rsh</a>(1).  When running dynamically linked  ap‐
       plications which require the LD_LIBRARY_PATH environment variable to be set, care must be taken to ensure
       that it is correctly set when booting the LAM.

   <b>Exported</b> <b>Environment</b> <b>Variables</b>
       The  <u>-x</u>  option  to  <u>lamexec</u>  can  be used to export specific environment variables to the new processes.
       While the syntax of the <u>-x</u> option allows the definition of new variables, note that the parser  for  this
       option  is  currently  not very sophisticated - it does not even understand quoted values.  Users are ad‐
       vised to set variables in the environment and use <u>-x</u> to export them; not to define them.

</pre><h4><b>EXAMPLES</b></h4><pre>
       lamexec N prog1
           Load and execute prog1 on all nodes.  Search for the executable file on each node.

       lamexec -c 8 prog1
           Run 8 copies of prog1 wherever LAM wants to run them.

       lamexec n8-10 -v -nw -s n3 prog1 -- -q
           Load and execute prog1 on nodes 8, 9, and 10.  Search for prog1 on node 3  and  transfer  it  to  the
           three  target  nodes.   Report  as  each process is created.  Give "-q" as a command line to each new
           process.  Do not wait for the processes to complete before exiting <u>lamexec</u>.

       lamexec -v myapp
           Parse the application schema, myapp, and start all processes specified in it.  Report as each process
           is created.

       lamexec N N -pty -wd /workstuff/output -x DISPLAY run_app.csh
           Run the application "run_app.csh" (assumedly a C shell script) twice on each node in the system (ide‐
           al for 2-way SMPs).  Also enable pseudo-tty support, change directory to /workstuff/output,  and  ex‐
           port the DISPLAY variable to the new processes (perhaps the shell script will invoke an X application
           such as xv to display output).

       lamexec -np 5 -D `pwd`/my_application
           A  common usage of <u>lamexec</u> in environments where a filesystem is shared between all nodes in the mul‐
           ticomputer, using the shell-escaped "pwd" command specifies the full name of the executable  to  run.
           This  prevents the need for putting the directory in the path; the remote notes will have an absolute
           filename to execute (and change directory to it upon invocation).

</pre><h4><b>DIAGNOSTICS</b></h4><pre>
       lamexec: Exec format error
           A non-ASCII character was detected in the application schema.  This is usually a command  line  usage
           error where <u>lamexec</u> is expecting an application schema and an executable file was given.

       lamexec: syntax error in application schema, line XXX
           The  application  schema cannot be parsed because of a usage or syntax error on the given line in the
           file.

       filename: No such file or directory
           This error can occur in two cases.  Either the named file cannot be located or it has been found  but
           the user does not have sufficient permissions to execute the program or read the application schema.

</pre><h4><b>RETURN</b> <b>VALUE</b></h4><pre>
       <u>lamexec</u>  returns 0 if all processes started by <u>lamexec</u> exit normally.  A non-zero value is returned if an
       internal error occurred in lamexec, or one or more processes exited abnormally.  If an internal error oc‐
       curred in lamexec, the corresponding error code is returned.  In the event that one or more processes ex‐
       it with non-zero exit code, the return value of the process that <u>lamexec</u> first  notices  died  abnormally
       will  be returned.  Note that, in general, this will be the first process that died but is not guaranteed
       to be so.

       However, note that if the <u>-nw</u> switch is used, the return value from lamexec does not  indicate  the  exit
       status of the processes started by it.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <a href="../man1/mpimsg.1.html">mpimsg</a>(1), <a href="../man1/mpirun.1.html">mpirun</a>(1), <a href="../man1/mpitask.1.html">mpitask</a>(1), <a href="../man1/loadgo.1.html">loadgo</a>(1)

LAM 7.1.4                                          July, 2007                                         <u><a href="../man1/LAMEXEC.1.html">LAMEXEC</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>