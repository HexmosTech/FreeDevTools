<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>pcp_promote_node - promotes the given node as new main to Pgpool-II</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/pgpool2">pgpool2_4.6.0-1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       pcp_promote_node - promotes the given node as new main to Pgpool-II

</pre><h4><b>SYNOPSIS</b></h4><pre>

       <b>pcp_promote_node</b> [<u>options</u>...] [<u>node_id</u>] [<u>gracefully</u>] [<u>switchover</u>]

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>pcp_promote_node</b> promotes the given node as new primary to Pgpool-II. In streaming replication mode only.
       Please note that this command does not actually promote standby PostgreSQL backend unless switchover
       option is specified: it just changes the internal status of Pgpool-II and trigger failover and users have
       to promote standby PostgreSQL outside Pgpool-II.

       If switchover is specified, Pgpool-II detaches current primary (changes the internal status to down) and
       execute the failover_command, with the new main node argument to be set to the specified node id. Because
       most failover scripts promote the new main node, the specified node will be the new primary node. The
       follow_primary_command is necessary to be set properly to turn the former primary into standby.

       <b>pcp_promote_node</b> executes followings if switchover is not specified. Please be warned that if
       follow_primary_command is set, the command will be executed. It is a standard advice that you disable
       follow_primary_command before executing this command.

        1. Change the status of standby PostgreSQL from standby to primary. It just changes the internal status
           of Pgpool-II and it does not actually promote PostgreSQL standby server.

        2. Change the status of PostgreSQL node which is not specified by this command's argument to down. It
           just changes the internal status of Pgpool-II and it does not actually make PostgreSQL standby server
           down.

        3. If follow_primary_command is set, execute follow_primary_command against PostgreSQL.

       <b>pcp_promote_node</b> executes followings if switchover is specified. If follow_primary_command is set, the
       command will be executed. You need to set follow_primary_command before executing this command because
       failover script will create the new primary and other nodes need to be turned into standbys

        1. Change the status of primary PostgreSQL from up to down. This triggers failover_command execution,
           with the new main node argument to be set to the specified node id. Because most failover scripts
           promote the new main node, the specified node will become the new primary node.

        2. Change the status of standby PostgreSQL node which is not specified by this command's argument to
           down. It just changes the internal status of Pgpool-II and it does not actually make PostgreSQL
           standby server down.

        3. If follow_primary_command is set, execute follow_primary_command against PostgreSQL.

</pre><h4><b>OPTIONS</b></h4><pre>
       <b>-n</b> <u>node_id</u>
       <b>--node-id=</b><u>node_id</u>
           The index of backend node to promote as new main. The specified node must be in "up" or "waiting"
           status.

       <b>-g</b>
       <b>--gracefully</b>
           Wait until all clients are disconnected (unless client_idle_limit_in_recovery is -1 or
           recovery_timeout is expired).

       <b>-s</b>
       <b>--switchover</b>
           Let the specified node to be actually promoted by triggering the failover_command. Also change the
           current primary node status to down.

       <b>Other</b> <b>options</b>
           See <b><a href="../man1/pcp_common_options.1.html">pcp_common_options</a></b>(1).

pgpool-II 4.6.0                                       2023                                   <u><a href="../man1/PCP_PROMOTE_NODE.1.html">PCP_PROMOTE_NODE</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>