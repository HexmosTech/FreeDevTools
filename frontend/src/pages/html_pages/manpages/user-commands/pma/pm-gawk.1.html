<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>persistent memory gawk - persistent data and functions</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/gawk">gawk_5.2.1-2build3_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       persistent memory gawk - persistent data and functions

</pre><h4><b>SYNOPSIS</b></h4><pre>
       truncate -s <u>size</u> heap.pma
       export GAWK_PERSIST_FILE=heap.pma
       gawk ...

       truncate -s <u>size</u> heap.pma
       GAWK_PERSIST_FILE=heap.pma gawk ...

       truncate -s <u>size</u> heap.pma
       alias pm='GAWK_PERSIST_FILE=heap.pma'
       pm gawk ...                       # succinct

       unset GAWK_PERSIST_FILE   # disable persistence

       export GAWK_PERSIST_FILE=other_heap.pma  # change heap

       rm heap.pma               # delete heap

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <u>Gawk</u>  5.2  and  later  supports  a  persistent memory feature that can store script-defined variables and
       functions in a file for later use.  The feature, called <u>pm-gawk</u>, is  described  in  <u>GAWK:</u>  <u>Effective</u>  <u>AWK</u>
       <u>Programming</u> and in <u>Persistent</u> <u>Memory</u> <u>gawk</u> <u>User</u> <u>Manual</u>.

       <u>pm-gawk</u>  is  activated  by passing to <u>gawk</u> the name of an initially empty (all-zero-bytes) <u>heap</u> <u>file</u>, via
       the environment variable GAWK_PERSIST_FILE.  <u>pm-gawk</u> retains script-defined variables  and  functions  in
       the heap file for use in subsequent <u>gawk</u> invocations.

       <u>pm-gawk</u>  offers at least two advantages compared with the existing rwarray extension: it offers constant-
       time (``<a href="../man1/O.1.html">O</a>(1) time'') access to individual elements of persistent associative arrays,  and  it  can  store
       script-defined functions in addition to variables.

</pre><h4><b>EXAMPLES</b></h4><pre>
       Demonstrate persistent variables:
              $ <b>truncate</b> <b>-s</b> <b>1G</b> <b>heap.pma</b>            # create heap file
              $ <b>export</b> <b>GAWK_PERSIST_FILE=heap.pma</b>  # "ambient" env var
              $ <b>gawk</b> <b>'BEGIN</b> <b>{</b> <b>print</b> <b>++i</b> <b>}'</b>
              1
              $ <b>gawk</b> <b>'BEGIN</b> <b>{</b> <b>print</b> <b>++i</b> <b>}'</b>
              2
              $ <b>gawk</b> <b>'BEGIN</b> <b>{</b> <b>print</b> <b>++i</b> <b>}'</b>
              3

       To pass the environment variable on per-command basis:
              $ <b>unset</b> <b>GAWK_PERSIST_FILE</b>
              $ <b>GAWK_PERSIST_FILE=heap.pma</b> <b>gawk</b> <b>'BEGIN</b> <b>{</b> <b>print</b> <b>++i</b> <b>}'</b>
              4
              $ <b>GAWK_PERSIST_FILE=heap.pma</b> <b>gawk</b> <b>'BEGIN</b> <b>{</b> <b>print</b> <b>++i</b> <b>}'</b>
              5
              $ <b>GAWK_PERSIST_FILE=heap.pma</b> <b>gawk</b> <b>'BEGIN</b> <b>{</b> <b>print</b> <b>++i</b> <b>}'</b>
              6

       To reduce visual clutter of per-command environment variable passing:
              $ <b>alias</b> <b>pm='GAWK_PERSIST_FILE=heap.pma'</b>
              $ <b>pm</b> <b>gawk</b> <b>'BEGIN</b> <b>{</b> <b>print</b> <b>++i</b> <b>}'</b>
              7
              $ <b>pm</b> <b>gawk</b> <b>'BEGIN</b> <b>{</b> <b>print</b> <b>++i</b> <b>}'</b>
              8

       To refrain from activating persistence:
              $ <b>unset</b> <b>GAWK_PERSIST_FILE</b>
              $ <b>gawk</b> <b>'BEGIN</b> <b>{</b> <b>print</b> <b>++i</b> <b>}'</b>
              1
              $ <b>gawk</b> <b>'BEGIN</b> <b>{</b> <b>print</b> <b>++i</b> <b>}'</b>
              1

       To permanently ``forget'' the contents of the heap file:
              $ <b>rm</b> <b>heap.pma</b>

</pre><h4><b>ENVIRONMENT</b> <b>VARIABLES</b></h4><pre>
       GAWK_PERSIST_FILE  contains  the  name  of  a  heap file where script-defined variables and functions are
       stored.  If this environment variable is not visible to <u>gawk</u>, the persistence feature  is  not  activated
       and <u>gawk</u> behaves in its traditional manner.

</pre><h4><b>VERSION</b> <b>INFORMATION</b></h4><pre>
       Persistent memory <u>gawk</u> was first released in <u>gawk</u> 5.2.

</pre><h4><b>AUTHORS</b></h4><pre>
       Arnold  Robbins,  the  maintainer  of <u>gawk</u>, implemented <u>pm-gawk</u> using a persistent memory allocator (pma)
       provided by Terence Kelly.  An earlier proof-of-concept prototype of persistent  <u>gawk</u>  was  developed  by
       Haris Volos, Zi Fan Tan, and Jianan Li using a fork of the official <u>gawk</u> sources.

</pre><h4><b>CAVEATS</b></h4><pre>
       The  GNU/Linux CIFS filesystem is known to cause problems for the persistent memory allocator. Do not use
       a backing file on such a filesystem with <u>pm-gawk</u>.

</pre><h4><b>BUG</b> <b>REPORTS</b></h4><pre>
       Follow the procedures in <u>GAWK:</u> <u>Effective</u> <u>AWK</u> <u>Programming</u> and in <u>Persistent</u> <u>Memory</u> <u>gawk</u> <u>User</u> <u>Manual</u>.   For
       suspected bugs related to persistence (as opposed to other non-persistence-related <u>gawk</u> bugs) please also
       send  e-mail to Terence Kelly at one or more of these addresses: <a href="mailto:tpkelly@acm.org">tpkelly@acm.org</a>, <a href="mailto:tpkelly@eecs.umich.edu">tpkelly@eecs.umich.edu</a>,
       or <a href="mailto:tpkelly@cs.princeton.edu">tpkelly@cs.princeton.edu</a>.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <u><a href="../man1/gawk.1.html">gawk</a></u>(1), <u>GAWK:</u> <u>Effective</u> <u>AWK</u> <u>Programming</u>, and <u>Persistent</u> <u>Memory</u> <u>gawk</u> <u>User</u> <u>Manual</u>.  The two manuals should
       be available in the Info subsystem if Info installed on your system.

       See https://web.eecs.umich.edu/~tpkelly/pma/ for the latest source code and manual.

</pre><h4><b>COPYING</b> <b>PERMISSIONS</b></h4><pre>
       Copyright Â© 2022 Terence Kelly.

       Permission is granted to make and distribute verbatim copies of this manual page provided  the  copyright
       notice and this permission notice are preserved on all copies.

       Permission  is  granted to copy and distribute modified versions of this manual page under the conditions
       for verbatim copying, provided that the entire resulting derived work is distributed under the terms of a
       permission notice identical to this one.

       Permission is granted to copy and distribute translations of this  manual  page  into  another  language,
       under  the  above conditions for modified versions, except that this permission notice may be stated in a
       translation approved by the Foundation.

Free Software Foundation                           Nov 17 2022                                        <u><a href="../man1/PM-GAWK.1.html">PM-GAWK</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>