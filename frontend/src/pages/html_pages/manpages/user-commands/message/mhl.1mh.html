<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>mhl - produce formatted listings of nmh messages</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/nmh">nmh_1.8-3_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       mhl - produce formatted listings of nmh messages

</pre><h4><b>SYNOPSIS</b></h4><pre>

       <b>/usr/lib/mh/mhl</b> [<b>-help</b>] [<b>-version</b>] [<b>-bell</b> | <b>-nobell</b>] [<b>-clear</b> | <b>-noclear</b>] [<b>-folder</b> <u>+folder</u>] [<b>-form</b>
            <u>formfile</u>] [<b>-length</b> <u>lines</u>] [<b>-width</b> <u>columns</u>] [<b>-moreproc</b> <u>program</u>] [<b>-nomoreproc</b>] [<b>-fmtproc</b> <u>program</u>]
            [<b>-nofmtproc</b>] [<u>files</u> <u>...</u>]

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>mhl</b>  is  an  <b>nmh</b>  command  for  filtering  and/or  displaying text messages.  It is the default method of
       displaying text messages for <b>nmh</b> (it is the default <u>showproc</u>).

       As with <b>more</b>, each of the messages specified as arguments (or the standard input)  will  be  output.   If
       more  than  one message file is specified, the user will be prompted prior to each one, and a &lt;RETURN&gt; or
       &lt;EOT&gt; will begin the output, with &lt;RETURN&gt; clearing the screen (if appropriate), and &lt;EOT&gt; (usually CTRL-
       D) suppressing the screen clear.  An &lt;INTERRUPT&gt; (usually CTRL-C) will abort the current message  output,
       prompting  for the next message (if there is one), and a &lt;QUIT&gt; (usually CTRL- will terminate the program
       (without core dump).

       The <b>-bell</b> option tells <b>mhl</b> to ring the terminal's bell at the end of each page, while the  <b>-clear</b>  option
       tells <b>mhl</b> to clear the screen at the end of each page (or output a formfeed after each message).  Both of
       these switches (and their inverse counterparts) take effect only if the profile entry <u>moreproc</u> is defined
       but  empty, and <b>mhl</b> is outputting to a terminal.  If the <u>moreproc</u> entry is defined and non-empty, and <b>mhl</b>
       is outputting to a terminal, then <b>mhl</b> will cause the <u>moreproc</u> to be placed between the terminal  and  <b>mhl</b>
       and  the switches are ignored.  Furthermore, if the <b>-clear</b> switch is used and <u>mhl</u>'s output is directed to
       a terminal, then <b>mhl</b> will consult the TERM and TERMCAP environment  variables  to  determine  the  user's
       terminal  type  in  order  to  find out how to clear the screen.  If the <b>-clear</b> switch is given and <b>mhl</b>'s
       output is not directed to a terminal (e.g., a pipe or a file), then <b>mhl</b> will send a formfeed  after  each
       message.

       To  override the default <u>moreproc</u> and the profile entry, use the <b>-moreproc</b> <u>program</u> switch.  Note that <b>mhl</b>
       will never start a <u>moreproc</u> if invoked on a hardcopy terminal.

       The <b>-length</b> <u>length</u> and <b>-width</b> <u>width</u> switches set  the  screen  length  and  width,  respectively.   These
       default  to  the  values  indicated  by  TERMCAP,  if  appropriate,  otherwise they default to 40 and 80,
       respectively.

       The default format file used by <b>mhl</b> is called “<u>mhl.format</u>”.  <b>mhl</b> will first search for this file  in  the
       user's  <b>nmh</b>  directory,  and  will then search in the directory <u>/etc/nmh</u>.  This default can be changed by
       using the <b>-form</b> <u>formatfile</u> switch.

       Finally, the <b>-folder</b> <u>+folder</u> switch sets the <b>nmh</b> folder name, which is used for the “messagename:”  field
       described  below.   The  environment  variable  <b>$mhfolder</b> is consulted for the default value, which <b>next</b>,
       <b>show</b>, and <b>prev</b> initialize appropriately.

       <b>mhl</b> operates in two phases: 1) read and parse the format  file,  and  2)  process  each  message  (file).
       During phase 1, an internal description of the format is produced as a structured list.  In phase 2, this
       list  is  walked  for  each message, outputting message information under the format constraints from the
       format file.

       The format file can contain information controlling screen clearing, screen  size,  wrap-around  control,
       transparent text, component ordering, and component formatting.  Also, a list of components to ignore may
       be  specified,  and a couple of “special” components are defined to provide added functionality.  Message
       output will be in the order specified by the order in the format file.

       Each line of a format file has one of the following forms:

            ;comment
            :cleartext
            variable[,variable...]
            component:[variable,...]

       •   A line beginning with a `;' is a comment, and is ignored.

       •   A line beginning with a `:' is clear text, and is output exactly as is.

       •   A line containing only a `:' produces a blank line in the output.

       •   A line beginning with “component:” defines the format for the specified component,

       •   Remaining lines define the global environment.

       For example, the line:

            width=80,length=40,clearscreen,overflowtext="***",overflowoffset=5

       defines the screen size to be 80 columns by 40 rows, specifies that the screen should be cleared prior to
       each page, that the overflow indentation is 5, and that overflow text should be flagged with “***”.

       Following are all of the current variables and their arguments.  If they follow a component,  they  apply
       only  to  that component, otherwise, their affect is global.  Since the whole format is parsed before any
       output processing, the last global switch setting for a variable applies to the  whole  message  if  that
       variable is used in a global context (i.e., bell, clearscreen, width, length).

            <u>variable</u>       <u>type</u>       <u>semantics</u>
            width          integer    screen width or component width
            length         integer    screen length or component length
            offset         integer    positions to indent “component: ”
            overflowtext   string     text to use at the beginning of an
                                      overflow line
            overflowoffset integer    positions to indent overflow lines
            compwidth      integer    positions to indent component text
                                      after the first line is output
            uppercase      flag       output text of this component in all
                                      upper case
            nouppercase    flag       don't uppercase
            clearscreen    flag/G     clear the screen prior to each page
            noclearscreen  flag/G     don't clearscreen
            bell           flag/G     ring the bell at the end of each page
            nobell         flag/G     don't bell
            component      string/L   name to use instead of “component” for
                                      this component
            nocomponent    flag       don't output “component: ” for this
                                      component
            center         flag       center component on line (works for
                                      one-line components only)
            nocenter       flag       don't center
            leftadjust     flag       strip off leading whitespace on each
                                      line of text
            noleftadjust   flag       don't leftadjust
            rtrim          flag       trim whitespace at end of text lines
            nortrim        flag       retain whitespace at end of text
                                      lines (default)
            compress       flag       change newlines in text to spaces
            nocompress     flag       don't compress
            wrap           flag       Wrap lines that exceed width (default)
            nowrap         flag       Do not perform line wrapping
            split          flag       don't combine multiple fields into
                                      a single field
            nosplit        flag       combine multiple fields into
                                      a single field
            newline        flag       print newline at end of components
                                      (this is the default)
            nonewline      flag       don't print newline at end of components
            formatfield    string     format string for this component
                                      (see below)
            decode         flag       decode text as RFC 2047 encoded
                                      header field
            addrfield      flag       field contains addresses
            datefield      flag       field contains dates
            format         flag       Run component through formatproc filter
                                      (body only)
            noformat       flag       Do not run component through
                                      formatproc filter (default)
            formatarg      string     Argument to format filter

       To specify the value of integer-valued and string-valued variables, follow their name with an equals-sign
       and  the  value.   Integer-valued  variables  are given decimal values, while string-valued variables are
       given arbitrary text bracketed by double-quotes.  If a value is suffixed by “/G” or “/L”, then its  value
       is useful in a global-only or local-only context (respectively).

       A line of the form:

            ignores=component,...

       specifies a list of components which are never output.

       The  component  “MessageName” (case-insensitive) will output the actual message name (file name) preceded
       by the folder name if one is specified or found in the environment.  The  format  is  identical  to  that
       produced by the <b>-header</b> option to <b>show</b>.

       The  component  “Extras”  will  output  all  of  the  components of the message which were not matched by
       explicit components, or included in the ignore list.  If this component is not specified, an ignore  list
       is not needed since all non-specified components will be ignored.

       If  “nocomponent”  is  <u>not</u>  specified, then the component name will be output as it appears in the format
       file.

       The default format file is:

            ; mhl.format
            ;
            ; default message filter for `show'
            ;
            :
            overflowtext="***",overflowoffset=5
            leftadjust,compwidth=9
            ignores=msgid,message-id,received,content-type,content-transfer-encoding,content-id
            Resent-To:formatfield="%(unquote(decode{text}))"
            Resent-cc:formatfield="%(unquote(decode{text}))"
            Resent-From:formatfield="%(unquote(decode{text}))"
            Date:formatfield="%&lt;(nodate{text})%{text}%|%(pretty{text})%&gt;"
            To:formatfield="%(unquote(decode{text}))"
            cc:formatfield="%(unquote(decode{text}))"
            From:formatfield="%(unquote(decode{text}))"
            Subject:decode
            :
            extras:nocomponent
            :
            body:nocomponent,overflowtext=,overflowoffset=0,noleftadjust

       The variable “formatfield” specifies a format string (see <u><a href="../man5/mh-format.5.html">mh-format</a></u>(5)).  The flag variables  “addrfield”
       and “datefield” (which are mutually exclusive), tell <b>mhl</b> to interpret the escapes in the format string as
       either addresses or dates, respectively.

       By  default,  <b>mhl</b>  does  not  apply  any  formatting  string  to  fields containing address or dates (see
       <u><a href="../man5/mh-mail.5.html">mh-mail</a></u>(5) for a list of these fields).  Note that this results in faster operation since <b>mhl</b> must  parse
       both  addresses  and  dates  in  order  to apply a format string to them.  If desired, <b>mhl</b> can be given a
       default format string for either address or date fields (but not both).  To do this,  on  a  global  line
       specify: either the flag addrfield or datefield, along with the appropriate formatfield variable string.

       The  “format”  flag specifies that this component will be run through the filter program specified by the
       <u>formatproc</u> profile entry.  This filter program is expected to read data on standard input and output data
       on standard output.  Currently the “format” flag  is  only  supported  for  the  “body”  component.   The
       component name will be prefixed to the output <u>after</u> the filter has been run.  The expected use of this is
       to  filter  a message body to create more pleasing text to use in a reply message.  A suggested filter to
       use for <u><a href="../man1/repl.1.html">repl</a></u>(1) is as follows:

            body:component="&gt;",overflowtext="&gt;",overflowoffset=0,format,nowrap

       The <b>-fmtproc</b> and <b>-nofmtproc</b> switches can be used to override the <u>formatproc</u> profile entry.

       The <u>formatarg</u> option specifies a string that is used as an argument to the format filter.  This string is
       processed by <u><a href="../man5/mh-format.5.html">mh-format</a></u>(5) and all of the message components are available for  use.   Multiple  <u>formatarg</u>
       options can be used to build up multiple arguments to the format filter.

</pre><h4><b>FILES</b></h4><pre>
       /etc/nmh/mhl.format        The message template
       or &lt;mh-dir&gt;/mhl.format     Rather than the standard template
       $HOME/.mh_profile          The user profile

</pre><h4><b>PROFILE</b> <b>COMPONENTS</b></h4><pre>
       moreproc:            Program to use as interactive front-end
       formatproc:          Program to use as a filter for components that
                            have the “format” flag set.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <u><a href="../man1/show.1.html">show</a></u>(1), <u><a href="../man8/ap.8.html">ap</a></u>(8), <u><a href="../man8/dp.8.html">dp</a></u>(8)

</pre><h4><b>DEFAULTS</b></h4><pre>
       `<b>-bell</b>'
       `<b>-noclear</b>'
       `<b>-length</b> <b>40</b>'
       `<b>-width</b> <b>80</b>'

</pre><h4><b>CONTEXT</b></h4><pre>
       None

</pre><h4><b>BUGS</b></h4><pre>
       There should be some way to pass `bell' and `clear' information to the front-end.

       The “nonewline” option interacts badly with “compress” and “split”.

       The “format” option really should work on something other than the body component.

nmh-1.8                                            2014-09-15                                           <u><a href="../man1mh/MHL.1mh.html">MHL</a></u>(1mh)
</pre>
 </div>
</div></section>
</div>
</body>
</html>