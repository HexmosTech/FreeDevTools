<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>notmuch-reindex - re-index matching messages</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/notmuch">notmuch_0.38.3-5ubuntu1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       notmuch-reindex - re-index matching messages

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>notmuch</b> <b>reindex</b> [<u>option</u> ...] &lt;<u>search-term</u>&gt; ...

</pre><h4><b>DESCRIPTION</b></h4><pre>
       Re-index all messages matching the search terms.

       See <u>notmuch-search-terms</u> for details of the supported syntax for &lt;<u>search-term</u>&gt;.

       The  <b>reindex</b>  command  searches  for  all messages matching the supplied search terms, and re-creates the
       full-text index on these messages using the supplied options.

       Supported options for <b>reindex</b> include

       <b>--decrypt=(true|nostash|auto|false)</b>
              If <b>true</b>, when encountering an encrypted message, try to decrypt it while reindexing, stashing  any
              session  keys discovered.  If <b>auto</b>, and notmuch already knows about a session key for the message,
              it will try decrypting using that session key but will not try to access the user's  secret  keys.
              If decryption is successful, index the cleartext itself.

              <b>nostash</b>  is  the  same  as <b>true</b> except that it will not stash newly-discovered session keys in the
              database.

              If <b>false</b>, notmuch reindex will also delete any stashed session keys for all messages matching  the
              search terms.

              Be  aware  that the index is likely sufficient (and a stashed session key is certainly sufficient)
              to reconstruct the cleartext of the message itself, so please  ensure  that  the  notmuch  message
              index  is adequately protected. DO NOT USE <b>--decrypt=true</b> or <b>--decrypt=nostash</b> without considering
              the security of your index.

              See also <b>index.decrypt</b> in <u>notmuch-config</u>.

</pre><h4><b>EXAMPLES</b></h4><pre>
       A user just received an encrypted message without indexing its cleartext.  After reading it (via  <b>notmuch</b>
       <b>show</b>  <b>--decrypt=true</b>),  they decide that they want to index its cleartext so that they can easily find it
       later and read it without having to have access to their secret keys:

          notmuch reindex --decrypt=true id:<a href="mailto:1234567@example.com">1234567@example.com</a>

       A user wants to change their policy going forward to  start  indexing  cleartext.   But  they  also  want
       indexed  access to the cleartext of all previously-received encrypted messages.  Some messages might have
       already been indexed in the clear (as in the example above). They can ask notmuch  to  just  reindex  the
       not-yet-indexed messages:

          notmuch config set index.decrypt true
          notmuch reindex tag:encrypted and not property:index.decryption=success

       Later,  the user changes their mind, and wants to stop indexing cleartext (perhaps their threat model has
       changed, or their trust in their index store has been shaken).  They also want to clear all of their  old
       cleartext  from  the  index.   Note  that  they  compact  the  database  afterward  as a workaround for ‚Äê
       <u>https://trac.xapian.org/ticket/742</u>:

          notmuch config set index.decrypt false
          notmuch reindex property:index.decryption=success
          notmuch compact

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <u>notmuch</u>, <u>notmuch-compact</u>, <u>notmuch-config</u>,  <u>notmuch-count</u>,  <u>notmuch-dump</u>,  <u>notmuch-hooks</u>,  <u>notmuch-insert</u>,
       <u>notmuch-new</u>,   <u>notmuch-reply</u>,   <u>notmuch-restore</u>,   <u>notmuch-search</u>,   <u>notmuch-search-terms</u>,  <u>notmuch-show</u>,
       <u>notmuch-tag</u>

</pre><h4><b>AUTHOR</b></h4><pre>
       Carl Worth and many others

</pre><h4><b>COPYRIGHT</b></h4><pre>
       2009-2024, Carl Worth and many others

0.38.3                                            Mar 11, 2025                                <u><a href="../man1/NOTMUCH-REINDEX.1.html">NOTMUCH-REINDEX</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>