<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>send - send an nmh message</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/nmh">nmh_1.8-3_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       send - send an nmh message

</pre><h4><b>SYNOPSIS</b></h4><pre>

       <b>send</b> [<b>-help</b>] [<b>-version</b>] [<b>-alias</b> <u>aliasfile</u>] [<b>-draft</b>] [<b>-draftfolder</b> <u>+folder</u>] [<b>-draftmessage</b> <u>msg</u>]
            [<b>-nodraftfolder</b>] [<b>-filter</b> <u>filterfile</u>] [<b>-nofilter</b>] [<b>-format</b> | <b>-noformat</b>] [<b>-forward</b> | <b>-noforward</b>]
            [<b>-mime</b> | <b>-nomime</b>] [<b>-msgid</b> | <b>-nomsgid</b>] [<b>-messageid</b> <u>localname</u> | <u>random</u>] [<b>-push</b> | <b>-nopush</b>] [<b>-verbose</b> |
            <b>-noverbose</b>] [<b>-watch</b> | <b>-nowatch</b>] [<b>-mts</b> <u>smtp</u> | <u>sendmail/smtp</u> | <u>sendmail/pipe</u>] [<b>-sendmail</b> <u>program</u>]
            [<b>-server</b> <u>servername</u>] [<b>-port</b> <u>port-name/number</u>] [<b>-sasl</b>] [<b>-nosasl</b>] [<b>-saslmech</b> <u>mechanism</u>] [<b>-authservice</b>
            <u>service</u>] [<b>-snoop</b>] [<b>-user</b> <u>username</u>] [<b>-tls</b>] [<b>-initialtls</b>] [<b>-notls</b>] [<b>-certverify</b>] [<b>-nocertverify</b>]
            [<b>-width</b> <u>columns</u>] [<b>file</b> ...]

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>send</b>  will  cause  each  of the specified files to be delivered to each of the destinations in the “To:”,
       “cc:”, “Bcc:”, “Dcc:”, and “Fcc:” fields of the message.   If  <b>send</b>  is  re-distributing  a  message,  as
       invoked from <b>dist</b>, then the corresponding “Resent-xxx” fields are examined instead.

       By  default,  <b>send</b>  uses the program <b>post</b> to do the actual delivery of the messages, although this can be
       changed by defining the <u>postproc</u> profile component.  Most of the features attributed to <b>send</b> are actually
       performed by <b>post</b>.

       Before <b>send</b> gives the message to <b>post</b> for delivery, the message is processed by <b>mhbuild</b>  to  perform  any
       necessary  MIME  encoding  of  the  outgoing  message.   This can be changed by the <u>buildmimeproc</u> profile
       component.  <b>mhbuild</b> is invoked with the <b>-auto</b> switch, so <b>mhbuild</b> directives are not processed by default.
       See <u><a href="../man1/mhbuild.1.html">mhbuild</a></u>(1) for more information.

       <b>mhbuild</b> will scan the message draft for a header named <u>Attach</u>.  The draft is converted to a MIME  message
       if  one  or  more  matches  are  found.   This conversion occurs before all other processing.  <u><a href="../man1/whatnow.1.html">whatnow</a></u>(1)
       describes the user interface for managing MIME attachments via this mechanism.

       The first part of the MIME message is the draft body if that body contains any non-blank characters.  The
       body of each <u>Attach</u> header field is interpreted as a file name, and each file  named  is  included  as  a
       separate part in the MIME message.

       Determination of the content MIME type inserted into the Content-Type header for each part depends on how
       the  <b>nmh</b>  installation  was configured.  If a program, such as <b>file</b> with a <b>--mime</b> or <b>-i</b> option, was found
       that can specify the type of a file as a MIME type string, then that will be used.  To determine if  your
       <b>nmh</b> was so configured, run <b>mhparam</b> <b>mimetypeproc</b> and see if a non-empty string is displayed.

       If  your  <b>nmh</b> was not configured with a program to specify a file type as a MIME string, then a different
       method is used to determine the content-type  string.   This  method  is  also  used  if  the  configured
       mimetypeproc  fails  to find the MIME type of the content.  For file names with dot suffixes, the profile
       is scanned for a <u>mhshow-suffix-</u> entry for that suffix.  The content-type for the part is taken from  that
       profile entry if a match is found.  If a match is not found in the user profile, the mhn.defaults profile
       is  scanned  next.   If  no  match  is  found or the file does not have a dot suffix, the content-type is
       text/plain if the file  contains  only  ASCII  characters  or  application/octet-stream  if  it  contains
       characters outside of the ASCII range.  See <u><a href="../man1/mhshow.1.html">mhshow</a></u>(1) for more details and example syntax.

       Each  attached  MIME  part contains a “Content-Description” header that includes the filename, and adds a
       “Content-Disposition” header.  Here is an example of MIME part headers for an attachment:

       Content-Type: text/plain; name="VERSION"; charset="us-ascii"
       Content-Description: VERSION
       Content-Disposition: attachment; filename="VERSION"

       See <u><a href="../man1/mhbuild.1.html">mhbuild</a></u>(1) for explanation of how the Content-Disposition value is selected.

       If <b>-push</b> is specified, <b>send</b> will detach itself from the user's terminal and perform its  actions  in  the
       background.   If  <b>push</b>'d  and  the  draft  can't  be  sent, then an error message will be sent (using the
       mailproc) back to the user.  If <b>-forward</b> is given, then a copy of the draft  will  be  attached  to  this
       failure  notice.   Using  <b>-push</b> differs from putting <b>send</b> in the background because the output is trapped
       and analyzed by <b>nmh</b>.

       If <b>-verbose</b> is specified, <b>send</b> will indicate the interactions occurring with the transport system,  prior
       to  actual  delivery.   If  <b>-watch</b> is specified <b>send</b> will monitor the delivery of local and network mail.
       Hence, by specifying both switches, a large detail of information can be gathered about each step of  the
       message's entry into the transport system.

       The <b>-draftfolder</b> <u>+folder</u> and <b>-draftmessage</b> <u>msg</u> switches invoke the <b>nmh</b> draft folder facility.  This is an
       advanced (and highly useful) feature.  Consult <u><a href="../man5/mh-draft.5.html">mh-draft</a></u>(5) for more information.

       <b>send</b>  with  no  <u>file</u>  argument  will  query  whether  the draft is the intended file, whereas <b>-draft</b> will
       suppress this question.  Once the transport system has successfully accepted custody of the message,  the
       file  will  be  renamed  with  a site-dependent prefix (usually a comma), which allows it to be retrieved
       until the next draft message is sent.  If there are errors in the formatting of the  message,  <b>send</b>  will
       abort with a (hopefully) helpful error message.

       If  a  “Bcc:” field is encountered, its addresses will be used for delivery, and the “Bcc:” field will be
       removed from the message sent to sighted recipients.  The blind recipients will receive an  entirely  new
       message  with  a  minimal set of headers. The body of this new message will contain a copy of the message
       sent to the sighted  recipients,  either  marked  up  with  the  indicator  text  "Blind-Carbon-Copy"  or
       encapsulated as a MIME digest.

       If a “Dcc:” field is encountered and the <b>sendmail/pipe</b> mail transport method is not in use, its addresses
       will  be  used for delivery, and the “Dcc:” field will be removed from the message.  The blind recipients
       will receive exactly the same message as the sighted recipients.   *WARNING*  Recipients  listed  in  the
       “Dcc:” field receive no explicit indication that they have received a “blind copy”.  This can cause blind
       recipients  to  inadvertently  reply  to all of the sighted recipients of the original message, revealing
       that they received a blind copy.  On the other hand, since a normal reply to a message sent via a  “Bcc:”
       field  will  generate  a  reply only to the sender of the original message, it takes extra effort in most
       mailers to reply to the included message, and so would usually only be done deliberately, rather than  by
       accident.

       If the <b>sendmail/pipe</b> mail transport method is used, then messages containing a “Dcc:” field are rejected.

       If  <b>-filter</b> <u>filterfile</u> is specified, then this copy is filtered (re-formatted) by <b>mhl</b> prior to being sent
       to the blind recipients.  Alternately, if you specify the <b>-mime</b> switch, then <b>send</b> will use the MIME rules
       for encapsulation.

       Prior to sending the message, the “Date: now” field will be appended to the headers in the  message.   If
       <b>-msgid</b> is specified, then a “Message-ID:” field will also be added to the message.

       The  <b>-messageid</b>  switch  selects  the  style  used  for  the part appearing after the @ in “Message-ID:”,
       “Resent-Message-ID:”, and “Content-ID:” header fields.  The two acceptable options are  <b>localname</b>  (which
       is the default), and <b>random</b>.  With <b>localname</b>, the local hostname is used.  With <b>random</b>, a random sequence
       of  characters  is used instead.  Note that the <b>-msgid</b> switch must be enabled for this switch to have any
       effect.

       If <b>send</b> is re-distributing a message (when invoked by <b>dist</b>), then “Resent-” will be prepended to each  of
       these fields: “From:”, “Date:”, and “Message-ID:”.

       A  “From:”  field is required for all outgoing messages.  Multiple addresses are permitted in the “From:”
       field, but a “Sender:” field is required in this case.  Otherwise a “Sender:” field is optional.

       If a message with multiple “From:” addresses does <u>not</u> include a  “Sender:”  field  but  does  include  an
       “Envelope-From:” field, the “Envelope-From:” field will be used to construct a “Sender:” field.

       When  using SMTP for mail submission, the envelope-from used for the SMTP transaction is derived from the
       “Envelope-From:” field.  If no “Envelope-From:” field is  present,  the  “Sender:”  field  is  used.   If
       neither  the  “Envelope-From:”  nor  the  “Sender:”  field  is  present, the “From:” field is used.  When
       “Envelope-From:” appears in a message it will be removed from the final outgoing message.

       By using the <b>-format</b> switch, each of the entries in the “To:” and “cc:”  fields  will  be  replaced  with
       “standard”  format entries.  This standard format is designed to be usable by all of the message handlers
       on the various systems around the Internet.  If <b>-noformat</b> is given, then headers are  output  exactly  as
       they appear in the message draft.

       If  an “Fcc: folder” is encountered, the message will be copied to the specified folder for the sender in
       the format in which it will appear to any non-Bcc receivers of the message.  That is, it  will  have  the
       appended  fields  and  field reformatting.  The “Fcc:” fields will be removed from all outgoing copies of
       the message.

       Beware that if an “Fcc:” with one or more folders is present but none  of  the  folders  exist,  and  the
       default  <u>fileproc</u>  and  <u>postproc</u>  are in use, then <b>refile</b> will prompt the user to create the folder(s) if
       <b>-push</b> is not specified.  If all responses are negative, or creation of each folder  fails,  or  <b>-push</b>  is
       specified,  the  message  will not be copied to any folder and will be removed by <b>post</b>.  With the default
       <b>refile</b> switches, the message draft will be renamed according to the specification of its <b>-nolink</b> switch.

       By using the <b>-width</b> <u>columns</u> switch, the user can direct <b>send</b> as to how long it should make  header  lines
       containing addresses.

       The  mail  transport  system default is provided in <u>/etc/nmh/mts.conf</u> but can be overridden here with the
       <b>-mts</b> switch.

       If nmh is using <b>sendmail/pipe</b> or <b>sendmail/smtp</b> as its mail transport system, the <b>-sendmail</b> switch can  be
       used to override the default <b>sendmail</b> program.

       If nmh is using the SMTP MTA, the <b>-server</b> and the <b>-port</b> switches can be used to override the default mail
       server  (defined by the <u>/etc/nmh/mts.conf</u> <u>servers</u> entry).  The <b>-snoop</b> switch can be used to view the SMTP
       transaction.  (Beware that  the  SMTP  transaction  may  contain  authentication  information  either  in
       plaintext  or  easily  decoded base64.)  If <b>-sasl</b> <b>-saslmech</b> <b>xoauth2</b> is used, the HTTP transaction is also
       shown.

       If <b>nmh</b> has been compiled with SASL support, the <b>-sasl</b> and <b>-nosasl</b> switches will enable  and  disable  the
       use  of SASL authentication with the SMTP MTA.  Depending on the SASL mechanism used, this may require an
       additional password prompt from the user (but the <u>netrc</u> file can be  used  to  store  this  password,  as
       described  in <u><a href="../man5/mh-profile.5.html">mh-profile</a></u>(5).  The <b>-saslmech</b> switch can be used to select a particular SASL mechanism, and
       the <b>-user</b> switch can be used to select a authorization userid to provide to SASL other than the  default.
       The credentials profile entry in <u><a href="../man5/mh-profile.5.html">mh-profile</a></u>(5) describes the ways to supply a username and password.

       If  SASL  authentication  is  successful,  nmh  will  attempt  to  negotiate a security layer for session
       encryption.  Encrypted data is labelled with  `(encrypted)'  and  `(decrypted)'  when  viewing  the  SMTP
       transaction with the <b>-snoop</b> switch; see <u><a href="../man8/post.8.html">post</a></u>(8)'s description of <b>-snoop</b> for its other features.

       If  <b>nmh</b>  has been compiled with OAuth support, the <b>-sasl</b> and <b>-saslmech</b> <b>xoauth2</b> switches will enable OAuth
       authentication.  The <b>-user</b> switch must be used, and the <u>username</u> must be an email address  the  user  has
       for  the  service,  which  must  be  specified  with the <b>-authservice</b> <u>service</u> switch.  Before using OAuth
       authentication, the user must authorize nmh by running <b>mhlogin</b> and grant authorization to  that  account.
       See <u><a href="../man1/mhlogin.1.html">mhlogin</a></u>(1) for more details.

       If <b>nmh</b> has been compiled with TLS support, the <b>-tls</b> and <b>-initialtls</b> switches will require the negotiation
       of  TLS  when  connecting to the SMTP MTA.  The <b>-tls</b> switch will negotiate TLS as part of the normal SMTP
       protocol using the STARTTLS command.  The <b>-initialtls</b> will negotiate TLS immediately after the connection
       has taken place, before any SMTP commands are sent or received.  Encrypted data is labelled  with  `(tls-
       encrypted)' and `(tls-decrypted)' when viewing the SMTP transaction with the <b>-snoop</b> switch; see <u><a href="../man8/post.8.html">post</a></u>(8)'s
       description  of  <b>-snoop</b> for its other features.  The <b>-notls</b> switch will disable all attempts to negotiate
       TLS.

       If port 465 is specified and none of the TLS switches were enabled, <b>-initialtls</b> will be  implied  if  TLS
       support  was compiled in.  Though port 465 for SMTPS (SMTP over SSL) was deregistered by IANA in 1998, it
       is still used for that service.

       When using TLS the default is to verify the remote certificate and SubjectName against the local  trusted
       certificate  store.   This  can  be  controlled  by the <b>-certverify</b> and <b>-nocertverify</b> switches.  See your
       OpenSSL documentation for more information on certificate verification.

       The files specified by the profile entry “Aliasfile:” and any additional alias files given by the  <b>-alias</b>
       <u>aliasfile</u>  switch  will  be  read  (more  than  one  file,  each  preceded by <b>-alias</b>, can be named).  See
       <u><a href="../man5/mh-alias.5.html">mh-alias</a></u>(5) for more information.

   <b>Selection</b> <b>based</b> <b>on</b> <b>sender</b> <b>address:</b> <b>sendfrom</b>
       One or more <u>sendfrom</u> profile components can be used to select a mail server address, mail server port, or
       any other switch that can be supplied to <b>post</b>.  It works by first  looking  at  the  sender  address  and
       domain  name  in the message draft, as described below.  It then looks for a corresponding profile entry,
       which contains the <b>post</b> switches.  To enable, add profile entries of the form:

            sendfrom-<u>address/domain</u> <u>name</u>: <u>post</u> <u>switches</u>

       The email address is extracted from the Envelope-From:  header, if not blank, the Sender: header, or  the
       From:  header  line  in  the  message draft.  Multiple profile entries, with different email addresses or
       domain names, are supported.  This allows different switches to <b>post</b>, such as  -user,  to  be  associated
       with different email addresses.  If a domain name is used, it matches all users in that domain.

       Here  is  an  example  profile  entry to use the SMTP on the localhost when the sender address is clearly
       local:

            sendfrom-localuser@localhost: -server localhost -port smtp

       (Indentation indicates a continued line, as supported in MH profiles.)  The username need not be the same
       as the sender address, which was extracted from the appropriate header line as noted above.

       Here are example profile entries that use an nmh credentials file:

            credentials: file:nmhcreds
            <a href="mailto:sendfrom-sendgrid_address@example.com">sendfrom-sendgrid_address@example.com</a>: -sasl -tls
                 -server smtp.sendgrid.net
            sendfrom-outbound.att.net: -sasl -initialtls
                 -server outbound.att.net -port 465
            sendfrom-fastmail.com: -initialtls -sasl -saslmech LOGIN
                 -server smtps-proxy.messagingengine.com -port 80

       where nmhcreds is in the user's nmh directory (from the Path profile component) and contains:

            machine smtp.sendgrid.net
                 login <a href="mailto:sendgrid_login@example.com">sendgrid_login@example.com</a>
                 password ********
            machine outbound.att.net
                 login <a href="mailto:att_login@example.com">att_login@example.com</a>
                 password ********
            machine smtps-proxy.messagingengine.com
                 login <a href="mailto:fastmail_login@example.com">fastmail_login@example.com</a>
                 password ********

       For more information on authentication to mail servers,  see  <u><a href="../man1/mhlogin.1.html">mhlogin</a></u>(1)  for  OAuth  services,  and  <u><a href="../man5/mhprofile.5.html">mh-</a></u>
       <u><a href="../man5/mhprofile.5.html">profile</a></u>(5) for login credentials.

</pre><h4><b>FILES</b></h4><pre>
       $HOME/.mh_profile          The user profile

</pre><h4><b>PROFILE</b> <b>COMPONENTS</b></h4><pre>
       Path:                To determine the user's nmh directory
       Aliasfile:           For a default alias file
       Signature:           To determine the user's mail signature
       mailproc:            Program to post failure notices
       postproc:            Program to post the message
       sendfrom-address:    Switches to post for sender address
       sendfrom-domain:     Switches to post for sender domain name

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <u><a href="../man1/comp.1.html">comp</a></u>(1),  <u><a href="../man1/dist.1.html">dist</a></u>(1),  <u><a href="../man1/file.1.html">file</a></u>(1), <u><a href="../man1/forw.1.html">forw</a></u>(1), <u><a href="../man1/mhbuild.1.html">mhbuild</a></u>(1), <u><a href="../man1/mhparam.1.html">mhparam</a></u>(1), <u><a href="../man1/mhlogin.1.html">mhlogin</a></u>(1), <u><a href="../man1/refile.1.html">refile</a></u>(1), <u><a href="../man1/repl.1.html">repl</a></u>(1), <u><a href="../man1/whatnow.1.html">whatnow</a></u>(1),
       <u><a href="../man5/mh-alias.5.html">mh-alias</a></u>(5), <u><a href="../man5/mh-profile.5.html">mh-profile</a></u>(5), <u><a href="../man5/mh-tailor.5.html">mh-tailor</a></u>(5), <u><a href="../man8/post.8.html">post</a></u>(8)

</pre><h4><b>DEFAULTS</b></h4><pre>
       `<b>file</b>' defaults to &lt;mh-dir&gt;/draft
       `<b>-alias</b>' defaults to /etc/nmh/MailAliases
       `<b>-nodraftfolder</b>'
       `<b>-nofilter</b>'
       `<b>-format</b>'
       `<b>-forward</b>'
       `<b>-nomime</b>'
       `<b>-nomsgid</b>'
       `<b>-messageid</b> <b>localname</b>'
       `<b>-nopush</b>'
       `<b>-noverbose</b>'
       `<b>-nowatch</b>'
       `<b>-width</b> <b>72</b>'
       `<b>-certverify</b>'

</pre><h4><b>CONTEXT</b></h4><pre>
       None

</pre><h4><b>BUGS</b></h4><pre>
       Under some configurations, it is not possible to monitor the mail delivery transaction; <b>-watch</b> is a no-op
       on those systems.

nmh-1.8                                            2022-12-22                                          <u><a href="../man1mh/SEND.1mh.html">SEND</a></u>(1mh)
</pre>
 </div>
</div></section>
</div>
</body>
</html>