<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>openssl-pkcs8 - PKCS#8 format private key conversion command</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/openssl">openssl_3.4.1-1ubuntu3_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       openssl-pkcs8 - PKCS#8 format private key conversion command

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>openssl</b> <b>pkcs8</b> [<b>-help</b>] [<b>-topk8</b>] [<b>-inform</b> <b>DER</b>|<b>PEM</b>] [<b>-outform</b> <b>DER</b>|<b>PEM</b>] [<b>-in</b> <u>filename</u>] [<b>-passin</b> <u>arg</u>] [<b>-out</b>
       <u>filename</u>] [<b>-passout</b> <u>arg</u>] [<b>-iter</b> <u>count</u>] [<b>-noiter</b>] [<b>-nocrypt</b>] [<b>-traditional</b>] [<b>-v2</b> <u>alg</u>] [<b>-v2prf</b> <u>alg</u>] [<b>-v1</b>
       <u>alg</u>] [<b>-scrypt</b>] [<b>-scrypt_N</b> <u>N</u>] [<b>-scrypt_r</b> <u>r</u>] [<b>-scrypt_p</b> <u>p</u>] [<b>-saltlen</b> <u>size</u>] [<b>-rand</b> <u>files</u>] [<b>-writerand</b> <u>file</u>]
       [<b>-engine</b> <u>id</u>] [<b>-provider</b> <u>name</u>] [<b>-provider-path</b> <u>path</u>] [<b>-propquery</b> <u>propq</u>]

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This command processes private keys in PKCS#8 format. It can handle both unencrypted PKCS#8
       PrivateKeyInfo format and EncryptedPrivateKeyInfo format with a variety of PKCS#5 (v1.5 and v2.0) and
       PKCS#12 algorithms.

</pre><h4><b>OPTIONS</b></h4><pre>
       <b>-help</b>
           Print out a usage message.

       <b>-topk8</b>
           Normally  a  PKCS#8  private key is expected on input and a private key will be written to the output
           file. With the <b>-topk8</b> option the situation is reversed: it reads a private key and  writes  a  PKCS#8
           format key.

       <b>-inform</b> <b>DER</b>|<b>PEM</b>, <b>-outform</b> <b>DER</b>|<b>PEM</b>
           The input and formats; the default is <b>PEM</b>.  See <b><a href="../man1/openssl-format-options.1.html">openssl-format-options</a></b>(1) for details.

           If a key is being converted from PKCS#8 form (i.e. the <b>-topk8</b> option is not used) then the input file
           must be in PKCS#8 format. An encrypted key is expected unless <b>-nocrypt</b> is included.

           If  <b>-topk8</b>  is  not  used  and  <b>PEM</b> mode is set the output file will be an unencrypted private key in
           PKCS#8 format. If the <b>-traditional</b> option is used then a traditional format private  key  is  written
           instead.

           If  <b>-topk8</b>  is  not  used  and  <b>DER</b> mode is set the output file will be an unencrypted private key in
           traditional DER format.

           If <b>-topk8</b> is used then any supported private key can be used for the input file in a format specified
           by <b>-inform</b>. The output file will be encrypted PKCS#8 format using the specified encryption parameters
           unless <b>-nocrypt</b> is included.

       <b>-traditional</b>
           When this option is present and <b>-topk8</b> is not a traditional format private key is written.

       <b>-in</b> <u>filename</u>
           This specifies the input filename to read a key  from  or  standard  input  if  this  option  is  not
           specified. If the key is encrypted a pass phrase will be prompted for.

       <b>-passin</b> <u>arg</u>, <b>-passout</b> <u>arg</u>
           The  password source for the input and output file.  For more information about the format of <b>arg</b> see
           <b><a href="../man1/openssl-passphrase-options.1.html">openssl-passphrase-options</a></b>(1).

       <b>-out</b> <u>filename</u>
           This specifies the output filename to write a key to or standard output by default. If any encryption
           options are set then a pass phrase will be prompted for. The output filename should <b>not</b> be  the  same
           as the input filename.

       <b>-iter</b> <u>count</u>
           When creating new PKCS#8 containers, use a given number of iterations on the password in deriving the
           encryption key for the PKCS#8 output.  High values increase the time required to brute-force a PKCS#8
           container.

       <b>-noiter</b>
           When creating new PKCS#8 containers, use 1 as iteration count.

       <b>-nocrypt</b>
           PKCS#8  keys  generated  or  input  are  normally  PKCS#8 EncryptedPrivateKeyInfo structures using an
           appropriate password based encryption algorithm.  With  this  option  an  unencrypted  PrivateKeyInfo
           structure is expected or output.  This option does not encrypt private keys at all and should only be
           used  when absolutely necessary. Certain software such as some versions of Java code signing software
           used unencrypted private keys.

       <b>-v2</b> <u>alg</u>
           This option sets the PKCS#5 v2.0 algorithm.

           The <u>alg</u> argument is the encryption algorithm to use, valid values include <b>aes128</b>, <b>aes256</b> and <b>des3</b>. If
           this option isn't specified then <b>aes256</b> is used.

       <b>-v2prf</b> <u>alg</u>
           This option sets the PRF algorithm  to  use  with  PKCS#5  v2.0.  A  typical  value  value  would  be
           <b>hmacWithSHA256</b>. If this option isn't set then the default for the cipher is used or <b>hmacWithSHA256</b> if
           there is no default.

           Some implementations may not support custom PRF algorithms and may require the <b>hmacWithSHA1</b> option to
           work.

       <b>-v1</b> <u>alg</u>
           This  option indicates a PKCS#5 v1.5 or PKCS#12 algorithm should be used.  Some older implementations
           may not support PKCS#5 v2.0 and may require this option.  If not specified PKCS#5 v2.0 form is used.

       <b>-scrypt</b>
           Uses the <b>scrypt</b> algorithm for private key encryption using default parameters: currently N=16384, r=8
           and p=1 and AES in CBC mode with a 256 bit key. These parameters can be modified using the <b>-scrypt_N</b>,
           <b>-scrypt_r</b>, <b>-scrypt_p</b> and <b>-v2</b> options.

       <b>-scrypt_N</b> <u>N</u>, <b>-scrypt_r</b> <u>r</u>, <b>-scrypt_p</b> <u>p</u>
           Sets the scrypt <u>N</u>, <u>r</u> or <u>p</u> parameters.

       <b>-saltlen</b>
           Sets the length (in bytes) of the salt to use for the PBE algorithm.  If this value is not specified,
           the default for PBES2 is 16 (128 bits) and 8 (64 bits) for PBES1.

       <b>-rand</b> <u>files</u>, <b>-writerand</b> <u>file</u>
           See "Random State Options" in <b><a href="../man1/openssl.1.html">openssl</a></b>(1) for details.

       <b>-engine</b> <u>id</u>
           See "Engine Options" in <b><a href="../man1/openssl.1.html">openssl</a></b>(1).  This option is deprecated.

       <b>-provider</b> <u>name</u>
       <b>-provider-path</b> <u>path</u>
       <b>-propquery</b> <u>propq</u>
           See "Provider Options" in <b><a href="../man1/openssl.1.html">openssl</a></b>(1), <b><a href="../man7/provider.7.html">provider</a></b>(7), and <b><a href="../man7/property.7.html">property</a></b>(7).

</pre><h4><b>NOTES</b></h4><pre>
       By default, when converting a key to PKCS#8 format, PKCS#5 v2.0 using 256 bit AES with HMAC and SHA256 is
       used.

       Some older implementations do not support PKCS#5 v2.0 format and  require  the  older  PKCS#5  v1.5  form
       instead, possibly also requiring insecure weak encryption algorithms such as 56 bit DES.

       Private  keys encrypted using PKCS#5 v2.0 algorithms and high iteration counts are more secure that those
       encrypted using the traditional SSLeay compatible  formats.  So  if  additional  security  is  considered
       important the keys should be converted.

       It  is  possible  to write out DER encoded encrypted private keys in PKCS#8 format because the encryption
       details are included at an ASN1 level whereas the traditional format includes them at a PEM level.

</pre><h4><b>PKCS#5</b> <b>V1.5</b> <b>AND</b> <b>PKCS#12</b> <b>ALGORITHMS</b></h4><pre>
       Various algorithms can be used with the <b>-v1</b> command line option, including PKCS#5 v1.5 and PKCS#12. These
       are described in more detail below.

       <b>PBE-MD2-DES</b> <b>PBE-MD5-DES</b>
           These algorithms were included in the original PKCS#5 v1.5 specification.  They only offer 56 bits of
           protection since they both use DES.

       <b>PBE-SHA1-RC2-64</b>, <b>PBE-MD2-RC2-64</b>, <b>PBE-MD5-RC2-64</b>, <b>PBE-SHA1-DES</b>
           These algorithms are not mentioned in the original PKCS#5 v1.5 specification but they  use  the  same
           key  derivation algorithm and are supported by some software. They are mentioned in PKCS#5 v2.0. They
           use either 64 bit RC2 or 56 bit DES.

       <b>PBE-SHA1-RC4-128</b>, <b>PBE-SHA1-RC4-40</b>, <b>PBE-SHA1-3DES</b>, <b>PBE-SHA1-2DES</b>, <b>PBE-SHA1-RC2-128</b>, <b>PBE-SHA1-RC2-40</b>
           These algorithms use the PKCS#12 password based encryption  algorithm  and  allow  strong  encryption
           algorithms like triple DES or 128 bit RC2 to be used.

</pre><h4><b>EXAMPLES</b></h4><pre>
       Convert   a  private  key  to  PKCS#8  format  using  default  parameters  (AES  with  256  bit  key  and
       <b>hmacWithSHA256</b>):

        openssl pkcs8 -in key.pem -topk8 -out enckey.pem

       Convert a private key to PKCS#8 unencrypted format:

        openssl pkcs8 -in key.pem -topk8 -nocrypt -out enckey.pem

       Convert a private key to PKCS#5 v2.0 format using triple DES:

        openssl pkcs8 -in key.pem -topk8 -v2 des3 -out enckey.pem

       Convert a private key to PKCS#5 v2.0 format using AES with 256 bits in CBC mode and <b>hmacWithSHA512</b> PRF:

        openssl pkcs8 -in key.pem -topk8 -v2 aes-256-cbc -v2prf hmacWithSHA512 -out enckey.pem

       Convert a private key to PKCS#8 using a PKCS#5 1.5 compatible algorithm (DES):

        openssl pkcs8 -in key.pem -topk8 -v1 PBE-MD5-DES -out enckey.pem

       Convert a private key to PKCS#8 using a PKCS#12 compatible algorithm (3DES):

        openssl pkcs8 -in key.pem -topk8 -out enckey.pem -v1 PBE-SHA1-3DES

       Read a DER unencrypted PKCS#8 format private key:

        openssl pkcs8 -inform DER -nocrypt -in key.der -out key.pem

       Convert a private key from any PKCS#8 encrypted format to traditional format:

        openssl pkcs8 -in pk8.pem -traditional -out key.pem

       Convert a private key to PKCS#8 format, encrypting with AES-256 and with one million  iterations  of  the
       password:

        openssl pkcs8 -in key.pem -topk8 -v2 aes-256-cbc -iter 1000000 -out pk8.pem

</pre><h4><b>STANDARDS</b></h4><pre>
       Test  vectors  from this PKCS#5 v2.0 implementation were posted to the pkcs-tng mailing list using triple
       DES, DES and RC2 with high iteration counts, several people confirmed that they could decrypt the private
       keys produced and therefore, it can be assumed that the PKCS#5 v2.0 implementation is reasonably accurate
       at least as far as these algorithms are concerned.

       The format of PKCS#8 DSA (and other) private keys is not well documented: it is hidden  away  in  PKCS#11
       v2.01, section 11.9. OpenSSL's default DSA PKCS#8 private key format complies with this standard.

</pre><h4><b>BUGS</b></h4><pre>
       There  should  be an option that prints out the encryption algorithm in use and other details such as the
       iteration count.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man1/openssl.1.html">openssl</a></b>(1), <b><a href="../man1/openssl-dsa.1.html">openssl-dsa</a></b>(1), <b><a href="../man1/openssl-rsa.1.html">openssl-rsa</a></b>(1), <b><a href="../man1/openssl-genrsa.1.html">openssl-genrsa</a></b>(1), <b><a href="../man1/openssl-gendsa.1.html">openssl-gendsa</a></b>(1)

</pre><h4><b>HISTORY</b></h4><pre>
       The <b>-iter</b> option was added in OpenSSL 1.1.0.

       The <b>-engine</b> option was deprecated in OpenSSL 3.0.

</pre><h4><b>COPYRIGHT</b></h4><pre>
       Copyright 2000-2023 The OpenSSL Project Authors. All Rights Reserved.

       Licensed under the Apache License 2.0 (the "License").  You may not use this file  except  in  compliance
       with  the  License.   You  can  obtain  a  copy  in  the  file  LICENSE  in the source distribution or at
       &lt;https://www.openssl.org/source/license.html&gt;.

3.4.1                                              2025-04-03                                <u><a href="../man1SSL/OPENSSL-PKCS8.1SSL.html">OPENSSL-PKCS8</a></u>(1SSL)
</pre>
 </div>
</div></section>
</div>
</body>
</html>