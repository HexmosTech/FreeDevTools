<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>tmail - Mail Delivery Module</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/uw-mailutils">uw-mailutils_2007f~dfsg-7.1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       tmail - Mail Delivery Module

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>tmail</b> <u>[-b</u> <u>format]</u> <u>[-D]</u> <u>[-f</u> <u>from_name]</u> <u>[-I</u> <u>inbox_specifier]</u> <u>user[+folder]</u> <u>...</u>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <u>tmail</u>  delivers  mail  to  a  user's  INBOX or a designated folder.  <u>tmail</u> may be configured as a drop-in
       replacement for <u><a href="../man1/binmail.1.html">binmail</a></u>(1), <u><a href="../man1/mail.local.1.html">mail.local</a></u>(1) or any program intended for use for mail  delivery  by  a  mail
       delivery program such as <u><a href="../man8/sendmail.8.html">sendmail</a></u>(8).

       <u>tmail</u> is intended to be used for direct delivery by the mailer daemon; <u><a href="../man1/dmail.1.html">dmail</a></u>(1) is the preferred tool for
       user  applications,  e.g.  a  mail  delivery  filter  such  as  <u><a href="../man1/procmail.1.html">procmail</a></u>(1)<u>.</u>  If <u>tmail</u> is used for a user
       application, then the calling program must be aware of the restrictions noted below.

       When <u>tmail</u> exits, it returns exit status values to enable the mail delivery program to determine  whether
       a message was delivered successfully or had a temporary (requeue for later delivery) or permanent (return
       to sender) failure.

       If  the  <u>+folder</u>  extension  is  included  in  the  user  argument,  <u>tmail</u> will attempt to deliver to the
       designated folder.  If the folder does not exist or  the  extension  is  not  included,  the  message  is
       delivered  to the user's INBOX.  If delivery is to INBOX and no INBOX currently exists, <u>tmail</u> will create
       a new INBOX, using the <b>-I</b> or <b>-b</b> flag if specified.  <u>tmail</u> recognizes the format of an existing  INBOX  or
       folder, and appends the new message in that format.

       The  <b>-b</b>  flag  specifies  a  format  to create INBOX if INBOX does not already exist.  This flag requires
       privileges, and can not be used with <b>-I</b>.  The argument is a format name such as mix, mbx, etc.

       The <b>-D</b> flag specifies debugging; this enables additional message telemetry.

       The <b>-f</b> or <b>-r</b> flag is used by the mail delivery program to specify a Return-Path.  The header
          Return-Path: &lt;<u>from_name</u>&gt;
       is prepended to the message before delivery.

       The <b>-I</b> flag is used by the mail delivery program  to  specify  an  alternative  INBOX  name.   This  flag
       requires  privileges,  and  can  not be used with <b>-b</b>.  This affects the location and format of INBOX.  If
       specified, it should be in one of three forms:

       The first form of argument to <b>-I</b> is the string "INBOX", which means to write to the system default  inbox
       using  the system default mailbox format.  These system defaults are defined when the c-client library is
       built.

       The second form of argument to <b>-I</b> is a delivery  specification,  consisting  of  "#driver.",  a  c-client
       mailbox format driver name, "/", and a file name.  This will write to the specified file in the specified
       format.   For  example, #driver.mbx/INBOX will write to file "INBOX" in the home directory in mbx format;
       and #driver.unix/mail/incoming will write to file "incoming" in the user's "mail"  subdirectory  in  unix
       (default UNIX) format.

       The  third  form of argument to <b>-I</b> is any other name.  Normally, this will write to the specified file on
       the user's home directory in the specified format.  However, certain names are special.  These are:

         value       equivalant to
         -----       -------------
         INBOX.MTX   #driver.mtx/INBOX.MTX
         mbox        #driver.unix/mbox
         mail.txt    #driver.tenex/mail.txt

       If <b>-I</b> is not specified, the default action is <b>-I</b> <b>INBOX</b>.

       If multiple recipients are specified on the command line, <u>tmail</u> spawns one child process per recipient to
       perform actual delivery.  This way of calling <u>tmail</u> is not recommended; see below under <u>RESTRICTIONS</u>.

</pre><h4><b>INSTALLATION</b></h4><pre>
       If <u>tmail</u> is to be used for mail delivery from the mail delivery program,  it  <u>must</u>  be  installed  setuid
       root.

       If sendmail is the mail delivery program, <u>tmail</u> is invoked from sendmail.cf.  Look for the "Mlocal" line,
       and  substitute  the path name for the <u>tmail</u> binary in place of /bin/mail, /usr/lib/mail.local, etc.  You
       should also add the flag to invoke <u>tmail</u> with CRLF style newlines; this is usually done  with  E=\r\n  in
       the Mlocal line.

       Here is an example of an Mlocal line in sendmail version 8:

       Mlocal, P=/usr/local/etc/tmail, F=lsDFMAw5:/|@qPrn+,
         S=10/30, R=20/40, E=\r\n, T=DNS/RFC822/X-Unix,
         A=tmail $u

       If  <u>tmail</u>  is  to  be  called with the <b>-I</b> flag, it must be invoked with both real and effective UID root.
       Many sendmail configurations invoke the local mailer as the sending user when that user is  local,  which
       will prevent <b>-b</b> or <b>-I</b> from working.

</pre><h4><b>SECURITY</b> <b>CONSIDERATIONS</b></h4><pre>
       If  <u>tmail</u>  is invoked by an ordinary user, the Received: header line will indicate the name or UID of the
       user that invoked it.

       Ordinary users are not permitted to use the <b>-b</b> or <b>-I</b> flag since otherwise a user could create any file on
       another user's directory.

       <u>tmail</u> can deliver mail to home directories.  In addition, <u>tmail</u> can be used to deliver mail to other mail
       folders in a home directory or an inferior directory of a home directory.

</pre><h4><b>RESTRICTIONS</b></h4><pre>
       The calling program should invoke <u>tmail</u> with CRLF newlines, otherwise <u>tmail</u> will complain in syslog.

       Absolute pathnames and <u>~user</u> specifications are not permitted in <u>+folder</u> extensions.

       Ordinary users are not permitted to use the <b>-I</b> flag.

       IMAP4 namespace names are not yet supported in <u>+folder</u> extensions.

       It is not possible to use <u>tmail</u> to deliver to <u><a href="../man1/mh.1.html">mh</a></u>(1) format mailboxes.

       If delivery to multiple users is specified and delivery to any single user  fails,  the  entire  delivery
       will  be  reported as having failed, even though delivery to other users may have succeeded.  If <u>tmail</u> is
       used for mail delivery from <u><a href="../man8/sendmail.8.html">sendmail</a></u>(8), a separate tmail  invocation  should  be  done  for  each  user.
       Otherwise  a  delivery failure for a single user in a message going to multiple users will cause multiple
       deliveries to all the other users every time <u><a href="../man8/sendmail.8.html">sendmail</a></u>(8), retries.

</pre><h4><b>AUTHOR</b></h4><pre>
       Mark Crispin, <a href="mailto:MRC@CAC.Washington.EDU">MRC@CAC.Washington.EDU</a>

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <a href="../man1/binmail.1.html">binmail</a>(1)
       <a href="../man8/sendmail.8.html">sendmail</a>(8)

                                               September 27, 2007                                       <u><a href="../man1/TMAIL.1.html">TMAIL</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>