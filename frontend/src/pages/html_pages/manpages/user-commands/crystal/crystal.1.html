<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>crystal — Compiler for the Crystal language.</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/crystal">crystal_1.14.0+dfsg-1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       crystal — Compiler for the Crystal language.

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>crystal</b> command [switches] programfile -- [arguments]

</pre><h4><b>DESCRIPTION</b></h4><pre>
       Crystal is a statically type-checked programming language. It was created with the beauty of Ruby and the
       performance of C in mind.

</pre><h4><b>USAGE</b></h4><pre>
       You can compile and run a program by invoking the compiler with a single filename:

       <b>crystal</b> some_program.cr

       Crystal files usually end with the .cr extension, though this is not mandatory.

       Alternatively you can use the run command:

       <b>crystal</b> run some_program.cr

       To create an executable use the build command:

       <b>crystal</b> build some_program.cr

       This will create an executable named "some_program".

       Note  that  by  default the generated executables are not fully optimized.  To turn optimizations on, use
       the --release flag:

       <b>crystal</b> build --release some_program.cr

       Make sure to always use --release for production-ready executables and when performing benchmarks.

       The optimizations are not turned on by default because the compile times are much faster without them and
       the performance of the program is still pretty good without them, so it allows to use the crystal command
       almost to be used as if it was an interpreter.

</pre><h4><b>OPTIONS</b></h4><pre>
       The crystal command accepts the following options

       <b>init</b> TYPE [DIR | NAME DIR]

                 Generates a new Crystal project.

                 TYPE is one of:

                 <b>lib</b>       Creates a library skeleton
                 <b>app</b>       Creates an application skeleton

                 This initializes the lib/app project folder as a git repository, with a license file, a  README
                 file,  a shard.yml for use with shards (the Crystal dependency manager), a .gitignore file, and
                 src and spec folders.

                 DIR  - directory where project will be generated

                 NAME - name of project to be generated (default: basename of DIR)

                 Options:

                 <b>-f,</b> <b>--force</b>
                           Force overwrite existing files.
                 <b>-s,</b> <b>--skip-existing</b>
                           Skip existing files.

       <b>build</b> [options] [programfile] [--] [arguments]

                 Compile program.

                 Options:

                 <b>--cross-compile</b>
                           Generate an object file for cross compilation and prints the  command  to  build  the
                           executable.   The  object  file should be copied to the target system and the printed
                           command should be executed there. This flag mainly exists for porting the compiler to
                           new platforms, where possible run the compiler on the target platform directly.
                 <b>-d,</b> <b>--debug</b>
                           Generate the output with symbolic debug symbols.  These are read when  debugging  the
                           built  program  with  tools like lldb, gdb, valgrind etc. and provide mappings to the
                           original source code for those tools.
                 <b>--no-debug</b>
                           Generate the output without any symbolic debug symbols.
                 <b>-D</b> <u>FLAG,</u> <b>--define</b> <u>FLAG</u>
                           Define a compile-time flag. This is useful to conditionally define types, methods, or
                           commands based on flags available at compile time. The default  flags  are  from  the
                           target triple given with --target-triple or the hosts default, if none is given.
                 <b>--emit</b> [asm|llvm-bc|llvm-ir|obj]
                           Comma separated list of types of output for the compiler to emit. You can use this to
                           see the generated LLVM IR, LLVM bitcode, assembly, and object files.
                 <b>--frame-pointers</b> [auto|always|non-leaf]
                           Control the preservation of frame pointers. The default value, --frame-pointers=auto,
                           will  preserve  frame pointers on debug builds and try to omit them on release builds
                           (certain platforms require them to stay enabled). --frame-pointers=always will always
                           preserve them, and non-leaf will only force their preservation on non-leaf functions.
                 <b>-f</b> <u>text|json,</u> <b>--format</b> <u>text|json</u>
                           Format of output. Defaults to text. The json format can be used to get a more parser-
                           friendly output.
                 <b>--error-trace</b>
                           Show full error trace.
                 <b>--ll</b>      Dump LLVM assembly file to output directory.
                 <b>--link-flags</b> <u>FLAGS</u>
                           Pass additional flags to the linker. Though you can specify those flags on the source
                           code, this is useful for passing environment specific  information  directly  to  the
                           linker,  like non-standard library paths or names. For more information on specifying
                           linker flags on source, you can read the "C bindings" section  of  the  documentation
                           available on the official web site.
                 <b>--mcpu</b> <u>CPU</u>
                           Specify a specific CPU to generate code for. This will pass a -mcpu flag to LLVM, and
                           is  only  intended  to  be  used for cross-compilation. For a list of available CPUs,
                           invoke "llvm-as &lt; /dev/null | llc -march=xyz -mcpu=help".  Passing --mcpu native will
                           pass the host CPU name to tune performance for the host.
                 <b>--mattr</b> <u>CPU</u>
                           Override or  control  specific  attributes  of  the  target,  such  as  whether  SIMD
                           operations  are  enabled  or not. The default set of attributes is set by the current
                           CPU. This will pass a -mattr flag to LLVM, and is only intended to be used for cross-
                           compilation. For a list of available attributes, invoke "llvm-as &lt;  /dev/null  |  llc
                           -march=xyz -mattr=help".
                 <b>--mcmodel</b> <u>default|kernel|small|medium|large</u>
                           Specifies  a  specific code model to generate code for. This will pass a --code-model
                           flag to LLVM.
                 <b>--no-color</b>
                           Disable colored output.
                 <b>--no-codegen</b>
                           Don't do code generation, just parse the file.
                 <b>-o</b>        Specify filename of output.
                 <b>--prelude</b>
                           Specify prelude to use. The default one initializes the garbage  collector.  You  can
                           also  use  --prelude=empty  to  use no preludes. This can be useful for checking code
                           generation for a specific source code file.
                 <b>-O</b> <u>LEVEL</u>  Optimization mode: 0 (default), 1, 2, 3. See <b>OPTIMIZATIONS</b> for details.
                 <b>--release</b>
                           Compile in release mode. Equivalent to <b>-O3</b> <b>--single-module</b>
                 <b>--error-trace</b>
                           Show full stack trace. Disabled by default, as the full  trace  usually  makes  error
                           messages less readable and not always deliver relevant information.
                 <b>-s,</b> <b>--stats</b>
                           Print  statistics  about  the different compiler stages for the current build. Output
                           time and used memory for each compiler process.
                 <b>-p,</b> <b>--progress</b>
                           Print statistics about the progress for the current build.
                 <b>-t,</b> <b>--time</b>
                           Print statistics about the execution time.
                 <b>--single-module</b>
                           Generate a single LLVM module.  By default, one LLVM module is created for each  type
                           in a program.  <b>--release</b> implies this option.
                 <b>--threads</b> <u>NUM</u>
                           Maximum number of threads to use for code generation. The default is 8 threads.
                 <b>--target</b> <u>TRIPLE</u>
                           Enable  target  triple; intended to use for cross-compilation. See llvm documentation
                           for more information about target triple.
                 <b>--verbose</b>
                           Display the commands executed by the system.
                 <b>--static</b>  Create a statically linked executable.
                 <b>--stdin-filename</b> <u>FILENAME</u>
                           Source file name to be read from STDIN.

       <b>docs</b>

                 Generate documentation from comments using a subset of markdown. The output is  saved  in  html
                 format  on  the  created  docs/ folder. More information about documentation conventions can be
                 found at https://crystal-lang.org/docs/conventions/documenting_code.html.

                 Options:

                 <b>--project-name</b> <u>NAME</u>
                           Set the project name. The default value is extracted from shard.yml if available.

                           In case no default can be found, this option is mandatory.
                 <b>--project-version</b> <u>VERSION</u>
                           Set the project version. The default value is extracted from current  git  commit  or
                           shard.yml if available.

                           In case no default can be found, this option is mandatory.
                 <b>--json-config-url</b> <u>URL</u>
                           Set the URL pointing to a config file (used for discovering versions).
                 <b>--source-refname</b> <u>REFNAME</u>
                           Set  source  refname (e.g. git tag, commit hash). The default value is extracted from
                           current git commit if available.

                           If this option is missing and can't be automatically determined, the generator  can't
                           produce source code links.
                 <b>--source-url-pattern</b> <u>URL</u>
                           Set  URL  pattern  for  source  code  links.  The default value is extracted from git
                           remotes ("origin" or first one) if  available  and  the  provider's  URL  pattern  is
                           recognized.

                           Supported replacement tags:

                           <b>%{refname}</b>  commit reference
                           <b>%{path}</b>     path to source file inside the repository
                           <b>%{filename}</b>
                                       basename of the source file
                           <b>%{line}</b>     line number

                           If  this option is missing and can't be automatically determined, the generator can't
                           produce source code links.
                 <b>-o</b> <u>DIR,</u> <b>--output</b> <u>DIR</u>
                           Set the output directory (default: ./docs).
                 <b>-b</b> <u>URL,</u> <b>--canonical-base-url</b> <u>URL</u>
                           Indicate the preferred URL with rel="canonical" link element.
                 <b>-b</b> <u>URL,</u> <b>--sitemap-base-url</b> <u>URL</u>
                           Set the sitemap base URL. Sitemap will only be generated when this option is set.
                 <b>--sitemap-priority</b> <u>PRIO</u>
                           Set the priority assigned to sitemap entries (default: 1.0).
                 <b>--sitemap-changefreq</b> <u>FREQ</u>
                           Set the changefreq assigned to sitemap entries (default: never).

       <b>env</b> [variables]

                 Print Crystal-specific environment variables in a format compatible with shell scripts. If  one
                 or  more variable names are given as arguments, it prints only the value of each named variable
                 on its own line.

                 Variables:

                 <b>CRYSTAL_CACHE_DIR</b>
                           Please see ENVIRONMENT VARIABLES.

                 <b>CRYSTAL_LIBRARY_PATH</b>
                           Please see ENVIRONMENT VARIABLES.

                 <b>CRYSTAL_PATH</b>
                           Please see ENVIRONMENT VARIABLES.

                 <b>CRYSTAL_VERSION</b>
                           Contains Crystal version.

       <b>eval</b>[options][source]

                 Evaluate code from arguments or, if no arguments are passed, from the  standard  input.  Useful
                 for experiments.

                 Options:

                 <b>-d,--debug</b>
                           Generate  the  output with symbolic debug symbols.  These are read when debugging the
                           built program with tools like lldb, gdb, valgrind etc. and provide  mappings  to  the
                           original source code for those tools.
                 <b>--no-debug</b>
                           Generate the output without any symbolic debug symbols.
                 <b>-D</b><u>FLAG,</u><b>--define</b><u>FLAG</u>
                           Define a compile-time flag. This is useful to conditionally define types, methods, or
                           commands  based  on  flags  available at compile time. The default flags are from the
                           target triple given with --target-triple or the hosts default, if none is given.
                 <b>--error-trace</b>
                           Show full error trace.
                 <b>-O</b><u>LEVEL</u>   Optimization mode: 0 (default), 1, 2, 3. See <b>OPTIMIZATIONS</b>for details.
                 <b>--release</b>
                           Compile in release mode. Equivalent to <b>-O3--single-module</b>
                 <b>-s,--stats</b>
                           Print statistics about the different compiler stages for the  current  build.  Output
                           time and used memory for each compiler process.
                 <b>-p,--progress</b>
                           Print statistics about the progress for the current build.
                 <b>-t,--time</b>
                           Print statistics about the execution time.
                 <b>--no-color</b>
                           Disable colored output.

       <b>play</b>[options][file]

                 Starts the crystal playground server on port 8080, by default.

                 Options:

                 <b>-p</b><u>PORT,</u><b>--port</b><u>PORT</u>
                           Run the playground on the specified port. Default is 8080.
                 <b>-b</b><u>HOST,</u><b>--binding</b><u>HOST</u>
                           Bind the playground to the specified IP.
                 <b>-v,--verbose</b>
                           Display detailed information of the executed code.

       <b>run</b>[options][programfile][--][arguments]

                 The default command. Compile and run program.

                 Options: Same as the build options.

       <b>spec</b>[options][files]

                 Compile and run specs (in spec directory).

                 Options:

                 <b>-d,--debug</b>
                           Generate  the  output with symbolic debug symbols.  These are read when debugging the
                           built program with tools like lldb, gdb, valgrind etc. and provide  mappings  to  the
                           original source code for those tools.
                 <b>--no-debug</b>
                           Generate the output without any symbolic debug symbols.
                 <b>-D</b><u>FLAG,</u><b>--define</b><u>FLAG</u>
                           Define a compile-time flag. This is useful to conditionally define types, methods, or
                           commands  based  on  flags  available at compile time. The default flags are from the
                           target triple given with --target-triple or the hosts default, if none is given.
                 <b>--error-trace</b>
                           Show full error trace.
                 <b>-O</b><u>LEVEL</u>   Optimization mode: 0 (default), 1, 2, 3. See <b>OPTIMIZATIONS</b>for details.
                 <b>--release</b>
                           Compile in release mode. Equivalent to <b>-O3--single-module</b>
                 <b>-s,--stats</b>
                           Print statistics about the different compiler stages for the  current  build.  Output
                           time and used memory for each compiler process.
                 <b>-p,--progress</b>
                           Print statistics about the progress for the current build.
                 <b>-t,--time</b>
                           Print statistics about the execution time.
                 <b>--no-color</b>
                           Disable colored output.

       <b>tool</b>[tool][switches][programfile][--][arguments]

                 Run  a  tool.  The  available  tools  are:  context,  dependencies,  flags,  format, hierarchy,
                 implementations, and types.

                 Tools:

                       <b>context</b>
                               Show context for given location.

                       <b>dependencies</b>
                               Show tree of required source files.

                               Options:

                               <b>-D</b><u>FLAG,</u><b>--define=</b><u>FLAG</u>
                                         Define a compile-time flag. This  is  useful  to  conditionally  define
                                         types,  methods,  or commands based on flags available at compile time.
                                         The default flags are from the target triple given with --target-triple
                                         or the hosts default, if none is given.
                               <b>-f</b><u>FORMAT,</u><b>--format=</b><u>FORMAT</u>
                                         Output format 'tree' (default), 'flat', 'dot', or 'mermaid'.
                               <b>-i</b><u>PATH,</u><b>--include=</b><u>PATH</u>
                                         Include path in output.
                               <b>-e</b><u>PATH,</u><b>--exclude=</b><u>PATH</u>
                                         Exclude path in output.
                               <b>--error-trace</b>
                                         Show full error trace.
                               <b>--prelude</b>
                                         Specify prelude  to  use.  The  default  one  initializes  the  garbage
                                         collector.  You  can  also use --prelude=empty to use no preludes. This
                                         can be useful for checking code generation for a specific  source  code
                                         file.
                               <b>--verbose</b>
                                         Show skipped and heads of filtered paths

                       <b>expand</b>  Show macro expansion for given location.

                       <b>flags</b>   Print all macro 'flag?' values

                       <b>format</b>  Format  project,  directories  and/or  files  with  the  coding style used in the
                               standard library. You can use the <b>--check</b>flag  to  check  whether  the  formatter
                               would make any changes.

                       <b>hierarchy</b>
                               Show  hierarchy of types from file. Also show class and struct members, with type
                               and size. Types can be filtered with a regex by using the <b>-e</b>flag.

                       <b>implementations</b>
                               Show implementations for a  given  call.  Use  <b>--cursor</b>  to  specify  the  cursor
                               position. The format for the cursor position is file:line:column.

                       <b>types</b>   Show type of main variables of file.

                       <b>unreachable</b>
                               Show  methods  that  are  never  called.  The text output is a list of lines with
                               columns separated by tab.

                               Output fields:

                               <b>count</b>       sum of  all  calls  to  this  method  (only  with  <b>--tallies</b>  option;
                                           otherwise skipped)
                               <b>location</b>    pathname, line and column, all separated by colon
                               <b>name</b>
                               <b>lines</b>       length of the def in lines
                               <b>annotations</b>

                               Options:

                               <b>-D</b><u>FLAG,</u><b>--define=</b><u>FLAG</u>
                                         Define  a  compile-time  flag.  This  is useful to conditionally define
                                         types, methods, or commands based on flags available at  compile  time.
                                         The default flags are from the target triple given with --target-triple
                                         or the hosts default, if none is given.
                               <b>-f</b><u>FORMAT,</u><b>--format=</b><u>FORMAT</u>
                                         Output format 'text' (default), 'json', or 'csv'.
                               <b>--tallies</b>
                                         Print reachable methods and their call counts as well.
                               <b>--check</b>   Exit with error if there is any unreachable code.
                               <b>-i</b><u>PATH,</u><b>--include=</b><u>PATH</u>
                                         Include path in output.
                               <b>-e</b><u>PATH,</u><b>--exclude=</b><u>PATH</u>
                                         Exclude path in output (default: <b>lib</b>).
                               <b>--error-trace</b>
                                         Show full error trace.
                               <b>--prelude</b>
                                         Specify  prelude  to  use.  The  default  one  initializes  the garbage
                                         collector. You can also use --prelude=empty to use  no  preludes.  This
                                         can  be  useful for checking code generation for a specific source code
                                         file.

       <b>clear_cache</b>

                 Clear the compiler cache (located at 'CRYSTAL_CACHE_DIR').

       Show help. Option --help or -h can also be added to each command for command-specific help.

       Show version.

</pre><h4><b>OPTIMIZATIONS</b></h4><pre>
       The optimization level specifies the codegen effort for producing optimal code.  It's a trade-off between
       compilation performance (decreasing per optimization  level)  and  runtime  performance  (increasing  per
       optimization level).

       Production  builds  should  usually  have the highest optimization level.  Best results are achieved with
       <b>--release</b> which also implies <b>--single-module</b>

       <b>-O0</b>       No optimization (default)
       <b>-O1</b>       Low optimization
       <b>-O2</b>       Middle optimization
       <b>-O3</b>       High optimization
       <b>-Os</b>       Middle optimization with focus on file size
       <b>-Oz</b>       Middle optimization aggressively focused on file size

</pre><h4><b>ENVIRONMENT</b> <b>VARIABLES</b></h4><pre>

       <b>CRYSTAL_CACHE_DIR</b>
                 Defines path where Crystal caches partial compilation results  for  faster  subsequent  builds.
                 This  path  is  also  used  to temporarily store executables when Crystal programs are run with
                 'crystal run' rather than 'crystal build'.

       <b>CRYSTAL_LIBRARY_PATH</b>
                 Defines paths where Crystal searches for (binary) libraries. Multiple paths can be separated by
                 ":".  These paths are passed to the linker as `-L` flags.

                 The pattern '$ORIGIN' at the start of the path expands to  the  directory  where  the  compiler
                 binary  is  located.  For  example, '$ORIGIN/../lib/crystal' resolves the standard library path
                 relative to the compiler location in a generic way, independent of the absolute paths (assuming
                 the relative location is correct).

       <b>CRYSTAL_PATH</b>
                 Defines paths where Crystal searches for required source files. Multiple paths can be separated
                 by ":".

                 The pattern '$ORIGIN' at the start of the path expands to  the  directory  where  the  compiler
                 binary  is  located.  For example, '$ORIGIN/../share/crystal/src' resolves the standard library
                 path relative to the compiler location in a generic way,  independent  of  the  absolute  paths
                 (assuming the relative location is correct).

       <b>CRYSTAL_OPTS</b>
                 Defines  options  for  the  Crystal compiler to be used besides the command line arguments. The
                 syntax is identical to the command line arguments. This is handy when using  Crystal  in  build
                 setups, for example 'CRYSTAL_OPTS=--debug make build'.

</pre><h4><b>SEEALSO</b></h4><pre>
       <b>shards</b>(<u>1</u>)
       https://crystal-lang.org/                     The official web site.
       https://github.com/crystal-lang/crystal       Official Repository.

UNIX                                                 UNDATED                                        <u><a href="../man1/CRYSTAL.1.html">CRYSTAL</a>(1)</u>()
</pre>
 </div>
</div></section>
</div>
</body>
</html>