<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>barman-restore - Barman Sub-Commands</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/barman-cli">barman-cli_3.12.1-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       barman-restore - Barman Sub-Commands

</pre><h4><b>SYNOPSIS</b></h4><pre>
          restore
              [ --aws-region AWS_REGION } ]
              [ --azure-resource-group AZURE_RESOURCE_GRP ]
              [ --bwlimit KBPS ]
              [ --exclusive ]
              [ --gcp-zone GCP_ZONE ]
              [ --get-wal | --no-get-wal ]
              [ { -j | --jobs } PARALLEL_WORKERS ]
              [ --jobs-start-batch-period SECONDS ]
              [ --jobs-start-batch-size NUMBER ]
              [ --local-staging-path PATH ]
              [ --network-compression | --no-network-compression ]
              [ --no-retry ]
              [ --recovery-conf-filename FILENAME ]
              [ --recovery-staging-path PATH ]
              [ --remote-ssh-command STRING ]
              [ --retry-sleep SECONDS ]
              [ --retry-times NUMBER ]
              [ --snapshot-recovery-instance INSTANCE_NAME ]
              [ --standby-mode ]
              [ --tablespace NAME:LOCATION ]
              [ --target-action { pause | shutdown | promote } ]
              [ --target-immediate ]
              [ --target-lsn LSN ]
              [ --target-name RESTORE_POINT_NAME ]
              [ --target-time TIMESTAMP ]
              [ --target-tli TLI ]
              [ --target-xid XID ]
              SERVER_NAME BACKUP_ID DESTINATION_DIR

</pre><h4><b>DESCRIPTION</b></h4><pre>
       Execute  a  PostreSQL  server  restore  operation.  Barman  will  restore the backup from a server in the
       destination directory. The restoration can be performed locally (on the barman node itself)  or  remotely
       (on   another   machine  accessible  via  SSH).  The  location  is  determined  by  whether  or  not  the
       <b>--remote-ssh-command</b> option is used. More information on this  command  can  be  found  in  the  <u>Recovery</u>
       section. You can use a shortcut instead of <b>BACKUP_ID</b>.

</pre><h4><b>PARAMETERS</b></h4><pre>
       <b>SERVER_NAME</b>
              Name of the server in barman node

       <b>BACKUP_ID</b>
              Id of the backup in barman catalog.

       <b>DESTINATION_DIR</b>
              Destination directory to restore the backup.

       <b>--aws-region</b>
              Specify the AWS region where the instance and disks for snapshot recovery are located. This option
              allows you to override the <b>aws_region</b> value in the Barman configuration.

       <b>--azure-resource-group</b>
              Specify  the  Azure  resource  group containing the instance and disks for snapshot recovery. This
              option allows you to override the <b>azure_resource_group</b> value in the Barman configuration.

       <b>--bwlimit</b>
              Specify the maximum transfer rate in kilobytes per second. A value of <b>0</b> indicates no  limit.  This
              setting overrides the <b>bandwidth_limit</b> configuration option.

       <b>--exclusive</b>
              Set target (time, XID or LSN) to be non inclusive.

       <b>--gcp-zone</b>
              Specify  the GCP zone where the instance and disks for snapshot recovery are located.  This option
              allows you to override the <b>gcp_zone</b> value in the Barman configuration.

       <b>--get-wal</b> <b>/</b> <b>--no-get-wal</b>
              Enable/disable  usage  of  <b>get-wal</b>  for  WAL  fetching  during  recovery.  Default  is  based   on
              <b>recovery_options</b> setting.

       <b>-j</b> <b>/</b> <b>--jobs</b>
              Specify  the  number of parallel workers to use for copying files during the backup.  This setting
              overrides the <b>parallel_jobs</b> parameter if it is specified in the configuration file.

       <b>--jobs-start-batch-period</b>
              Specify the time period, in seconds, for starting a single batch of jobs. This value overrides the
              <b>parallel_jobs_start_batch_period</b> parameter if it is set in the configuration file. The default  is
              <b>1</b> second.

       <b>--jobs-start-batch-size</b>
              Specify the maximum number of parallel workers to initiate in a single batch. This value overrides
              the  <b>parallel_jobs_start_batch_size</b>  parameter  if  it  is  defined in the configuration file. The
              default is <b>10</b> workers.

       <b>--local-staging-path</b>
              Specify path on the Barman host where the chain of backups will be combined before being copied to
              the destination directory. The contents created within the  staging  path  will  be  removed  upon
              completion  of  the  restore  process.  This  option  is  necessary for restoring from block-level
              incremental backups and has no effect otherwise.

       <b>--network-compression</b> <b>/</b> <b>--no-network-compression</b>
              Enable/disable network compression during remote restore. Default is based on  <b>network_compression</b>
              configuration setting.

       <b>--no-retry</b>
              There will be no retry in case of an error. It is the same as setting <b>--retry-times</b> <b>0</b>.

       <b>--recovery-conf-filename</b>
              Specify  the  name  of the file where Barman should write recovery options when recovering backups
              for Postgres versions 12 and later. By default, this is set to <b>postgresql.auto.conf</b>.  However,  if
              <b>--recovery-conf-filename</b>  is  specified,  recovery  options will be written to the specified value
              instead. While the default value is suitable for most Postgres installations, this  option  allows
              you  to  specify  an  alternative  location  if  Postgres  is  managed  by  tools  that  alter the
              configuration mechanism (for example, if <b>postgresql.auto.conf</b> is symlinked to <b>/dev/null</b>).

       <b>--recovery-staging-path</b>
              Specify a path on the recovery host where files for a compressed  backup  will  be  staged  before
              being  uncompressed  to  the  destination directory. Backups will be staged in their own directory
              within the staging path, following the  naming  convention:  <b>barman-staging-SERVER_NAME-BACKUP_ID</b>.
              This  staging  directory  will  be  removed  after the restore process is complete. This option is
              mandatory for restoring from compressed backups and has no effect otherwise.

       <b>--remote-ssh-command</b>
              This option enables remote restore by specifying the secure shell command to execute on  a  remote
              host. It functions similarly to the <b>ssh_command</b> server option in the configuration file for remote
              restore, that is, <b>'ssh</b> <b>USER@SERVER'</b>.

       <b>--retry-sleep</b>
              Specify the number of seconds to wait after a failed copy before retrying. This setting applies to
              both  backup  and  restore  operations and overrides the <b>basebackup_retry_sleep</b> parameter if it is
              defined in the configuration file.

       <b>--retry-times</b>
              Specify the number of times to retry the base backup copy in case of an  error.  This  applies  to
              both backup and restore operations and overrides the <b>basebackup_retry_times</b> parameter if it is set
              in the configuration file.

       <b>--snapshot-recovery-instance</b>
              Specify  the  name of the instance where the disks recovered from the snapshots are attached. This
              option is necessary when recovering backups created with <b>backup_method=snapshot</b>.

       <b>--standby-mode</b>
              Whether to start the Postgres server as a standby.

       <b>--tablespace</b>
              Specify tablespace relocation rule. <b>NAME</b> is the tablespace name and <b>LOCATION</b> is the recovery  host
              destination path to restore the tablespace.

       <b>--target-action</b>
              Trigger  the specified action when the recovery target is reached. This option requires defining a
              target along with one of these actions. The possible values are:

              • <b>pause</b>: Once recovery target is reached, the server is started in pause state, allowing users  to
                inspect the instance

              • <b>promote</b>:  Once  recovery  target  is reached, the server will exit the recovery operation and is
                promoted as a master.

              • <b>shutdown</b>: Once recovery target is reached, the server is shut down.

       <b>--target-immediate</b>
              Recovery is completed when a consistent state is reached (end of the base backup).

       <b>--target-lsn</b>
              Recover to the specified LSN (Log Sequence Number). Requires Postgres 10 or above.

       <b>--target-name</b>
              Recover  to  the   specified   name   of   a   restore   point   previously   created   with   the
              <b>pg_create_restore_point(name)</b>.

       <b>--target-time</b>
              Recover to the specified time. Use the format <b>YYYY-MM-DD</b> <b>HH:MM:SS.mmm</b>.

       <b>--target-tli</b>
              Recover the specified timeline. You can use the special values <b>current</b> and <b>latest</b> in addition to a
              numeric  timeline  ID. For Postgres versions 12 and above, the default is to recover to the latest
              timeline in the WAL archive. For Postgres versions below 12, the default  is  to  recover  to  the
              timeline that was current at the time the backup was taken.

       <b>--target-xid</b>
              Recover to the specified transaction ID.

</pre><h4><b>SHORTCUTS</b></h4><pre>
       Use shortcuts instead of <b>BACKUP_ID</b>.
                          ┌───────────────────────┬───────────────────────────────────────┐
                          │ <b>Shortcut</b>              │ <b>Description</b>                           │
                          ├───────────────────────┼───────────────────────────────────────┤
                          │ <b>first/oldest</b>          │ Oldest   available   backup  for  the │
                          │                       │ server, in chronological order.       │
                          ├───────────────────────┼───────────────────────────────────────┤
                          │ <b>last/latest</b>           │ Most recent available backup for  the │
                          │                       │ server, in chronological order.       │
                          ├───────────────────────┼───────────────────────────────────────┤
                          │ <b>last-full/latest-full</b> │ Most  recent full backup eligible for │
                          │                       │ a  block-level   incremental   backup │
                          │                       │ using the <b>--incremental</b> option.       │
                          ├───────────────────────┼───────────────────────────────────────┤
                          │ <b>last-failed</b>           │ Most  recent  backup  that failed, in │
                          │                       │ chronological order.                  │
                          └───────────────────────┴───────────────────────────────────────┘

</pre><h4><b>AUTHOR</b></h4><pre>
       EnterpriseDB

</pre><h4><b>COPYRIGHT</b></h4><pre>
       © Copyright EnterpriseDB UK Limited 2011-2024

3.12                                              Dec 09, 2024                                 <u><a href="../man1/BARMAN-RESTORE.1.html">BARMAN-RESTORE</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>