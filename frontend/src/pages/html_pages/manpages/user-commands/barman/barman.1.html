<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>barman - Barman Commands</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/barman">barman_3.12.1-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       barman - Barman Commands

       Barman  has  a  command-line  interface  named  <b>barman</b>, which is used basically to interact with Barman's
       backend.

       Before jumping into each of the sub-commands of <b>barman</b>, be aware that <b>barman</b> has global options available
       for all of the sub-commands. These options can modify the behavior of the sub-commands and can be used as
       follows:

</pre><h4><b>BARMAN</b></h4><pre>
   <b>Synopsis</b>
          barman
              [ { -c | --config } CONFIG ]
              [ { -color | --colour } { never | always | auto } ]
              [ { -d | --debug } ]
              [ { -f | --format } { json | console } ]
              [ { -h | --help } ]
              [ --log-level { NOTSET | DEBUG | INFO | WARNING | ERROR | CRITICAL } ]
              [ { -q | --quiet } ]
              [ { -v | --version } ]
              [ SUBCOMMAND ]

       <b>NOTE:</b>
          This is the syntax for the synopsis:

          • Options between square brackets are optional.

          • Options between curly brackets represent a choose one of set operation.

          • Options with <b>[</b> <b>...</b> <b>]</b> can be specified multiple times.

          • Things written in uppercase represent a literal that should be given a value to.

          We will use this same syntax when describing <b>barman</b> sub-commands in the following sections.

          Also, when describing sub-commands in the following sections, the commands' synopsis should be seen as
          a replacement for the <b>SUBCOMMAND</b>.

   <b>Parameters</b>
       <b>-c</b> <b>/</b> <b>--config</b> <b>CONFIG</b>
              Specify the configuration file to be used. Defaults to <b>/etc/barman.conf</b> if not provided.

       <b>--color</b> <b>/</b> <b>--colour</b> <b>{</b> <b>never</b> <b>|</b> <b>always</b> <b>|</b> <b>auto</b> <b>}</b>
              Control whether to use colors in the output. The default is <b>auto</b>. Options are:

              • <b>never</b>: Do not use color.

              • <b>always</b>: Always use color.

              • <b>auto</b>: Use color if the output is to a terminal.

       <b>-d</b> <b>/</b> <b>--debug</b>
              Enable debug output. Default is <b>false</b>. Provides detailed logging information for troubleshooting.

       <b>-f</b> <b>/</b> <b>--format</b> <b>{</b> <b>json</b> <b>|</b> <b>console</b> <b>}</b>
              Specify the output format. Options are:

              • <b>json</b>: Output in JSON format.

              • <b>console</b>: Output in human-readable format (default).

       <b>-h</b> <b>/</b> <b>--help</b>
              Show a help message and exit. Provides information about command usage.

       <b>--log-level</b> <b>{</b> <b>NOTSET</b> <b>|</b> <b>DEBUG</b> <b>|</b> <b>INFO</b> <b>|</b> <b>WARNING</b> <b>|</b> <b>ERROR</b> <b>|</b> <b>CRITICAL</b> <b>}</b>
              Override the default logging level. Options are:

              • <b>NOTSET</b>: This is the default level when no specific logging level is set.  It  essentially  means
                "no  filtering"  of  log messages, allowing all messages to be processed according to the levels
                that are set in the configuration.

              • <b>DEBUG</b>: This level is used for detailed, diagnostic information, often useful for developers when
                diagnosing problems. It includes messages that are more granular and detailed, intended to  help
                trace the execution of the program.

              • <b>INFO</b>:  This  level  provides  general information about the application's normal operation. It's
                used for messages that indicate the progress of the application or highlight key points  in  the
                execution flow that are useful but not indicative of any issues.

              • <b>WARNING</b>:  This  level  indicates  that  something  unexpected  happened or that there might be a
                potential problem. It's used for messages that  are  not  critical  but  could  be  of  concern,
                signaling that attention might be needed.

              • <b>ERROR</b>:  This  level  is  used  when  an  error  occurs that prevents a particular operation from
                completing successfully. It's used to indicate significant issues that need to be addressed  but
                do not necessarily stop the application from running.

              • <b>CRITICAL</b>:  This  is  the  highest  level of severity, indicating a serious error that has likely
                caused the  application  to  terminate  or  will  have  severe  consequences  if  not  addressed
                immediately. It's used for critical issues that demand urgent attention.

       <b>-q</b> <b>/</b> <b>--quiet</b>
              Suppress all output. Useful for cron jobs or automated scripts.

       <b>-v</b> <b>/</b> <b>--version</b>
              Show the program version number and exit.

</pre><h4><b>SHORTCUTS</b></h4><pre>
       For  some  commands,  you  can  use  the  following shortcuts or aliases to identify a backup for a given
       server. Specifically, the <b>all</b> shortcut can be used to identify all servers:
                          ┌───────────────────────┬───────────────────────────────────────┐
                          │ <b>Shortcut</b>              │ <b>Description</b>                           │
                          ├───────────────────────┼───────────────────────────────────────┤
                          │ <b>all</b>                   │ All available servers                 │
                          ├───────────────────────┼───────────────────────────────────────┤
                          │ <b>first/oldest</b>          │ Oldest  available  backup   for   the │
                          │                       │ server, in chronological order.       │
                          ├───────────────────────┼───────────────────────────────────────┤
                          │ <b>last/latest</b>           │ Most  recent available backup for the │
                          │                       │ server, in chronological order.       │
                          ├───────────────────────┼───────────────────────────────────────┤
                          │ <b>last-full/latest-full</b> │ Most recent full backup eligible  for │
                          │                       │ a   block-level   incremental  backup │
                          │                       │ using the <b>--incremental</b> option.       │
                          ├───────────────────────┼───────────────────────────────────────┤
                          │ <b>last-failed</b>           │ Most recent backup  that  failed,  in │
                          │                       │ chronological order.                  │
                          └───────────────────────┴───────────────────────────────────────┘

</pre><h4><b>EXIT</b> <b>STATUSES</b></h4><pre>
       Status code <b>0</b> means <b>success</b>, while status code <b>Non-Zero</b> means <b>failure</b>.

</pre><h4><b>SUB-COMMANDS</b></h4><pre>
       <b>barman</b> exposes several handy operations. This section is intended to describe each of them.

       In the following sections you can find a description of each command implemented by <b>barman</b>. Some of these
       commands may have more detailed information in another main section in this documentation. If that is the
       case, a reference is provided to help you quickly navigate to it.

   <b>barman</b> <b>archive-wal</b>
   <b>Synopsis</b>
          archive-wal SERVER_NAME

   <b>Description</b>
       Fetch  WAL  files  received  from  either  the  standard  <b>archive_command</b>  or  streaming replication with
       <b>pg_receivewal</b> and store them in the server's  WAL  archive.  If  you  have  enabled  <b>compression</b>  in  the
       configuration file, the WAL files will be compressed before they are archived.

   <b>Parameters</b>
       <b>SERVER_NAME</b>
              Name of the server in barman node.

   <b>barman</b> <b>backup</b>
   <b>Synopsis</b>
          backup
              [ --bwlimit KBPS ]
              [ --incremental BACKUP_ID ]
              [ --immediate-checkpoint ]
              [ { -j, --jobs } PARALLEL_WORKERS ]
              [ --jobs-start-batch-period PERIOD ]
              [ --jobs-start-batch-size SIZE ]
              [ --keepalive-interval SECONDS ]
              [ --manifest ]
              [ --name NAME ]
              [ --no-immediate-checkpoint ]
              [ --no-manifest ]
              [ --no-retry ]
              [ --retry-sleep SECONDS ]
              [ --retry-times NUMBER ]
              [ --reuse-backup { off | copy | link } ]
              [ { --wait | -w } ]
              [ --wait-timeout SECONDS ]
              SERVER_NAME [ ... ]

   <b>Description</b>
       Execute  a  PostreSQL  server  backup.  Barman will use the parameters specified in the Global and Server
       configuration files. Specify <b>all</b> shortcut instead of the server name to execute backups from all  servers
       configured  in the Barman node. You can also specify multiple server names in sequence to execute backups
       for specific servers.

   <b>Parameters</b>
       <b>SERVER_NAME</b>
              Name of the server in barman node.

       <b>--bwlimit</b>
              Specify the maximum transfer rate in kilobytes per second. A value of 0 indicates no  limit.  This
              setting overrides the <b>bandwidth_limit</b> configuration option.

       <b>--incremental</b>
              Execute a block-level incremental backup. You must provide a <b>BACKUP_ID</b> or a shortcut to a previous
              backup, which will serve as the parent backup for the incremental backup.

              <b>NOTE:</b>
                 The backup to be and the parent backup must have <b>backup_method=postgres</b>.

       <b>--immediate-checkpoint</b>
              Forces the initial checkpoint to be executed as soon as possible, overriding any value set for the
              <b>immediate_checkpoint</b> parameter in the configuration file.

       <b>-j</b> <b>/</b> <b>--jobs</b>
              Specify  the  number of parallel workers to use for copying files during the backup.  This setting
              overrides the <b>parallel_jobs</b> parameter if it's specified in the configuration file.

       <b>--jobs-start-batch-period</b>
              Specify the time period, in seconds, for starting a single batch of jobs. This value overrides the
              <b>parallel_jobs_start_batch_period</b> parameter if it is set in the configuration file. The default  is
              <b>1</b> second.

       <b>--jobs-start-batch-size</b>
              Specify the maximum number of parallel workers to initiate in a single batch. This value overrides
              the  <b>parallel_jobs_start_batch_size</b>  parameter  if  it  is  defined in the configuration file. The
              default is <b>10</b> workers.

       <b>--keepalive-interval</b>
              Specify an interval, in seconds, for sending a heartbeat query to the server  to  keep  the  libpq
              connection  active  during  a  Rsync  backup. The default is <b>60</b> seconds. A value of <b>0</b> disables the
              heartbeat.

       <b>--manifest</b>
              Forces  the  creation  of  a  backup  manifest  file  upon  completing  a  backup.  Overrides  the
              <b>autogenerate_manifest</b>  parameter  from  the  configuration  file.  Applicable only to rsync backup
              strategy.

       <b>--name</b> Specify a friendly name for this backup which can be used in place of  the  backup  ID  in  barman
              commands.

       <b>--no-immediate-checkpoint</b>
              Forces  the  backup  to  wait  for  the checkpoint to be executed overriding any value set for the
              <b>immediate_checkpoint</b> parameter in the configuration file.

       <b>--no-manifest</b>
              Disables the automatic creation of a backup manifest file upon completing a backup.  This  setting
              overrides  the  <b>autogenerate_manifest</b>  parameter  from  the configuration file and applies only to
              rsync backup strategy.

       <b>--no-retry</b>
              There will be no retry in case of an error. It is the same as setting <b>--retry-times</b> <b>0</b>.

       <b>--retry-sleep</b>
              Specify the number of seconds to wait after a failed copy before retrying. This setting applies to
              both backup and recovery operations and overrides the <b>basebackup_retry_sleep</b> parameter  if  it  is
              defined in the configuration file.

       <b>--retry-times</b>
              Specify  the  number  of  times to retry the base backup copy in case of an error. This applies to
              both backup and recovery operations and overrides the <b>basebackup_retry_times</b> parameter  if  it  is
              set in the configuration file.

       <b>--reuse-backup</b>
              Overrides  the  behavior  of  the  <b>reuse_backup</b>  option  configured in the configuration file. The
              possible values are:

              • <b>off</b>: Do not reuse the last available backup.

              • <b>copy</b>: Reuse the last available backup for a server and create copies of unchanged files (reduces
                backup time).

              • <b>link</b> (default): Reuse the last available backup for a server and create hard links to  unchanged
                files (saves both backup time and space).

              <b>NOTE:</b>
                 This   will   only   have   any   effect  if  the  last  available  backup  was  executed  with
                 <b>backup_method=rsync</b>.

       <b>--wait</b> <b>/</b> <b>-w</b>
              Wait for all necessary WAL files required by the base backup to be archived.

       <b>--wait-timeout</b>
              Specify the duration, in seconds, to wait for the required WAL files to be archived before  timing
              out.

   <b>Shortcuts</b>
       Use shortcuts instead of <b>SERVER_NAME</b>.
                                         ┌──────────┬───────────────────────┐
                                         │ <b>Shortcut</b> │ <b>Description</b>           │
                                         ├──────────┼───────────────────────┤
                                         │ <b>all</b>      │ All available servers │
                                         └──────────┴───────────────────────┘

   <b>barman</b> <b>check-backup</b>
   <b>Synopsis</b>
          check-backup SERVER_NAME BACKUP_ID

   <b>Description</b>
       Check  that  all  necessary  WAL  files  for  verifying the consistency of a physical backup are properly
       archived. This command is automatically executed by the cron job and at the end of each backup operation.
       You can use a shortcut instead of <b>BACKUP_ID</b>.

   <b>Parameters</b>
       <b>SERVER_NAME</b>
              Name of the server in barman node.

       <b>BACKUP_ID</b>
              Id of the backup in barman catalog.

   <b>Shortcuts</b>
       Use shortcuts instead of <b>BACKUP_ID</b>.
                          ┌───────────────────────┬───────────────────────────────────────┐
                          │ <b>Shortcut</b>              │ <b>Description</b>                           │
                          ├───────────────────────┼───────────────────────────────────────┤
                          │ <b>first/oldest</b>          │ Oldest  available  backup   for   the │
                          │                       │ server, in chronological order.       │
                          ├───────────────────────┼───────────────────────────────────────┤
                          │ <b>last/latest</b>           │ Most  recent available backup for the │
                          │                       │ server, in chronological order.       │
                          ├───────────────────────┼───────────────────────────────────────┤
                          │ <b>last-full/latest-full</b> │ Most recent full backup eligible  for │
                          │                       │ a   block-level   incremental  backup │
                          │                       │ using the <b>--incremental</b> option.       │
                          ├───────────────────────┼───────────────────────────────────────┤
                          │ <b>last-failed</b>           │ Most recent backup  that  failed,  in │
                          │                       │ chronological order.                  │
                          └───────────────────────┴───────────────────────────────────────┘

   <b>barman</b> <b>check</b>
   <b>Synopsis</b>
          check [ --nagios ] SERVER_NAME

   <b>Description</b>
       Display  status  information  about a server, such as SSH connection, Postgres version, configuration and
       backup directories, archiving and streaming processes, replication slots, and more. Use <b>all</b>  as  shortcut
       to show diagnostic information for all configured servers.

   <b>Parameters</b>
       <b>SERVER_NAME</b>
              Name of the server in barman node.

       <b>--nagios</b>
              Nagios plugin compatible output.

   <b>Shortcuts</b>
       Use shortcuts instead of <b>SERVER_NAME</b>.
                                         ┌──────────┬───────────────────────┐
                                         │ <b>Shortcut</b> │ <b>Description</b>           │
                                         ├──────────┼───────────────────────┤
                                         │ <b>all</b>      │ All available servers │
                                         └──────────┴───────────────────────┘

   <b>barman</b> <b>config-switch</b>
   <b>Synopsis</b>
          config-switch SERVER_NAME { --reset | MODEL_NAME }

   <b>Description</b>
       Apply a set of configuration overrides from the model to a server in Barman. The final configuration will
       combine  or  override  the server's existing settings with the ones specified in the model. You can reset
       the server configurations with the <b>--reset</b> argument.

       <b>NOTE:</b>
          Only one model can be active at a time for a given server.

   <b>Parameters</b>
       <b>SERVER_NAME</b>
              Name of the server in barman node.

       <b>MODEL_NAME</b>
              Name of the model.

       <b>--reset</b>
              Reset the server's configurations.

   <b>barman</b> <b>config-update</b>
   <b>Synopsis</b>
          config-update STRING

   <b>Description</b>
       Create or update the configurations for servers and/or models in Barman. The parameter should be  a  JSON
       string  containing  an  array  of  documents. Each document must include a <b>scope</b> key, which can be either
       server or model, and either a <b>server_name</b> or <b>model_name</b> key, depending on the scope value.  Additionally,
       the  document  should  include  other  keys  representing  Barman configuration options and their desired
       values.

       <b>NOTE:</b>
          The barman <b>config-update</b> command writes configuration  options  to  a  file  named  <b>.barman.auto.conf</b>,
          located  in the <b>barman_home</b> directory. This configuration file has higher precedence and will override
          values from the global Barman configuration file (usually  <b>/etc/barman.conf</b>)  and  from  any  included
          files  specified in <b>configuration_files_directory</b> (typically files in <b>/etc/barman.d</b>). Be aware of this
          if you decide to manually modify configuration options in those files later.

   <b>Parameters</b>
       <b>STRING</b> List of JSON formatted string.

   <b>Example</b>
       <b>JSON_STRING='[{“scope”:</b> <b>“server”,</b> <b>“server_name”:</b>  <b>“my_server”,</b>  <b>“archiver”:</b>  <b>“on”,</b>  <b>“streaming_archiver”:</b>
       <b>“off”}]'</b>

   <b>barman</b> <b>cron</b>
   <b>Synopsis</b>
          cron [ --keep-descriptors ]

   <b>Description</b>
       Carry out maintenance tasks, such as enforcing retention policies or managing WAL files.

   <b>Parameters</b>
       <b>--keep-descriptors</b>
              Keep  the  ^stdout^ and ^stderr^ streams of the Barman subprocesses connected to the main process.
              This is especially useful for Docker-based installations.

   <b>barman</b> <b>delete</b>
   <b>Synopsis</b>
          delete SERVER_NAME BACKUP_ID

   <b>Description</b>
       Delete the specified backup. You can use a shortcut instead of <b>BACKUP_ID</b>.

   <b>Parameters</b>
       <b>SERVER_NAME</b>
              Name of the server in barman node

       <b>BACKUP_ID</b>
              Id of the backup in barman catalog.

   <b>Shortcuts</b>
       Use shortcuts instead of <b>BACKUP_ID</b>.
                          ┌───────────────────────┬───────────────────────────────────────┐
                          │ <b>Shortcut</b>              │ <b>Description</b>                           │
                          ├───────────────────────┼───────────────────────────────────────┤
                          │ <b>first/oldest</b>          │ Oldest  available  backup   for   the │
                          │                       │ server, in chronological order.       │
                          ├───────────────────────┼───────────────────────────────────────┤
                          │ <b>last/latest</b>           │ Most  recent available backup for the │
                          │                       │ server, in chronological order.       │
                          ├───────────────────────┼───────────────────────────────────────┤
                          │ <b>last-full/latest-full</b> │ Most recent full backup eligible  for │
                          │                       │ a   block-level   incremental  backup │
                          │                       │ using the <b>--incremental</b> option.       │
                          ├───────────────────────┼───────────────────────────────────────┤
                          │ <b>last-failed</b>           │ Most recent backup  that  failed,  in │
                          │                       │ chronological order.                  │
                          └───────────────────────┴───────────────────────────────────────┘

   <b>barman</b> <b>diagnose</b>
   <b>Synopsis</b>
          diagnose

   <b>Description</b>
       Display  diagnostic  information about the Barman node, which is the server where Barman is installed, as
       well as all configured Postgres servers. This includes details such as global configuration, SSH version,
       Python version, rsync version, the current configuration and status of all servers, and many more.

   <b>barman</b> <b>generate-manifest</b>
   <b>Synopsis</b>
          generate-manifest SERVER_NAME BACKUP_ID

   <b>Description</b>
       Generates a <b>backup_manifest</b> file for a backup. You can use a shortcut instead of <b>BACKUP_ID</b>.

   <b>Parameters</b>
       <b>SERVER_NAME</b>
              Name of the server in barman node

       <b>BACKUP_ID</b>
              Id of the backup in barman catalog.

   <b>Shortcuts</b>
       Use shortcuts instead of <b>BACKUP_ID</b>.
                          ┌───────────────────────┬───────────────────────────────────────┐
                          │ <b>Shortcut</b>              │ <b>Description</b>                           │
                          ├───────────────────────┼───────────────────────────────────────┤
                          │ <b>first/oldest</b>          │ Oldest  available  backup   for   the │
                          │                       │ server, in chronological order.       │
                          ├───────────────────────┼───────────────────────────────────────┤
                          │ <b>last/latest</b>           │ Most  recent available backup for the │
                          │                       │ server, in chronological order.       │
                          ├───────────────────────┼───────────────────────────────────────┤
                          │ <b>last-full/latest-full</b> │ Most recent full backup eligible  for │
                          │                       │ a   block-level   incremental  backup │
                          │                       │ using the <b>--incremental</b> option.       │
                          ├───────────────────────┼───────────────────────────────────────┤
                          │ <b>last-failed</b>           │ Most recent backup  that  failed,  in │
                          │                       │ chronological order.                  │
                          └───────────────────────┴───────────────────────────────────────┘

   <b>barman</b> <b>get-wal</b>
   <b>Synopsis</b>
          get-wal
              [ -j ]
              [ -o  OUTPUT_DIRECTORY ]
              [ -p  VALUE ]
              [ { -P | --partial } ]
              [ { -t | --test } ]
              [ -z ]
              SERVER_NAME WAL_NAME

   <b>Description</b>
       Retrieve a WAL file from the xlog archive of a specified server. By default, if the requested WAL file is
       found, it is returned as uncompressed content to <b>STDOUT</b>.

   <b>Parameters</b>
       <b>SERVER_NAME</b>
              Name of the server in barman node

       <b>WAL_NAME</b>
              Id of the backup in barman catalog.

       <b>-j</b> <b>/</b> <b>--bzip2</b>
              Output will be compressed using bzip2.

       <b>-z</b> <b>/</b> <b>--gzip</b>
              Output will be compressed using gzip.

       <b>--keep-compression</b>
              Do not uncompress the file content. The output will be the original compressed file.

       <b>-o</b>     Destination directory where barman will store the WAL file.

       <b>-p</b>     Specify  an  integer value greater than or equal to 1 to retrieve WAL files from the specified WAL
              file up to the value specified by this parameter. When using this option, <b>get-wal</b> returns  a  list
              of zero to the specified WAL segment names, with one name per row.

       <b>-P</b> <b>/</b> <b>--partial</b>
              Additionally, collect partial WAL files (.partial).

       <b>-t</b> <b>/</b> <b>--test</b>
              Test  both  the  connection  and  configuration of the specified Postgres server in Barman for WAL
              retrieval. When this option is used, the required <b>WAL_NAME</b> argument is disregarded.

       <b>WARNING:</b>
          <b>-z</b> / <b>--gzip</b> and <b>-j</b> /  <b>--bzip2</b> options are deprecated and will  be  removed  in  the  future.  For  WAL
          compression,  please  make  sure  to  enable  it  directly  on  the  Barman server via the <b>compression</b>
          configuration option.

   <b>barman</b> <b>keep</b>
   <b>Synopsis</b>
          keep
              { --release | --status | --target { full | standalone } }
              SERVER_NAME BACKUP_ID

   <b>Description</b>
       Mark the specified backup with a <b>target</b> as an archival backup to be retained indefinitely, overriding any
       active retention policies. You can also check the keep <b>status</b> of a backup and <b>release</b> the keep mark  from
       a backup. You can use a shortcut instead of <b>BACKUP_ID</b>.

   <b>Parameters</b>
       <b>SERVER_NAME</b>
              Name of the server in barman node

       <b>BACKUP_ID</b>
              Id of the backup in barman catalog.

       <b>--release</b>
              Release the keep mark from this backup. This will remove its archival status and make it available
              for deletion, either directly or by retention policy.

       <b>--status</b>
              Report  the  archival  status  of  the  backup.  The  status will be either <b>full</b> or <b>standalone</b> for
              archival backups, or <b>nokeep</b> for backups that have not been designated as archival.

       <b>--target</b>
              Define the recovery target for the archival backup. The possible values are:

              • <b>full</b>: The backup can be used to recover to the most recent  point  in  time.  To  support  this,
                Barman  will  keep  all  necessary  WALs  to  maintain  the  backup's consistency as well as any
                subsequent WALs.

              • <b>standalone</b>: The backup can only be used to restore the server to its state at the  time  of  the
                backup. Barman will retain only the WALs required to ensure the backup's consistency.

   <b>Shortcuts</b>
       Use shortcuts instead of <b>BACKUP_ID</b>.
                          ┌───────────────────────┬───────────────────────────────────────┐
                          │ <b>Shortcut</b>              │ <b>Description</b>                           │
                          ├───────────────────────┼───────────────────────────────────────┤
                          │ <b>first/oldest</b>          │ Oldest   available   backup  for  the │
                          │                       │ server, in chronological order.       │
                          ├───────────────────────┼───────────────────────────────────────┤
                          │ <b>last/latest</b>           │ Most recent available backup for  the │
                          │                       │ server, in chronological order.       │
                          ├───────────────────────┼───────────────────────────────────────┤
                          │ <b>last-full/latest-full</b> │ Most  recent full backup eligible for │
                          │                       │ a  block-level   incremental   backup │
                          │                       │ using the <b>--incremental</b> option.       │
                          ├───────────────────────┼───────────────────────────────────────┤
                          │ <b>last-failed</b>           │ Most  recent  backup  that failed, in │
                          │                       │ chronological order.                  │
                          └───────────────────────┴───────────────────────────────────────┘

   <b>barman</b> <b>list-backups</b>
   <b>Synopsis</b>
          list-backups SERVER_NAME

   <b>Description</b>
       Display the available backups for a server. This command is useful for retrieving both the backup ID  and
       the backup type. You can find details about this command in <u>Catalog</u> <u>usage</u>.

   <b>Parameters</b>
       <b>SERVER_NAME</b>
              Name of the server in barman node

   <b>Shortcuts</b>
       Use shortcuts instead of <b>SERVER_NAME</b>.
                                         ┌──────────┬───────────────────────┐
                                         │ <b>Shortcut</b> │ <b>Description</b>           │
                                         ├──────────┼───────────────────────┤
                                         │ <b>all</b>      │ All available servers │
                                         └──────────┴───────────────────────┘

   <b>barman</b> <b>list-files</b>
   <b>Synopsis</b>
          list-files
              [ --target { data | full | standalone | wal } ]
              SERVER_NAME BACKUP_ID

   <b>Description</b>
       List all files in a specific backup. You can use a shortcut instead of <b>BACKUP_ID</b>.

   <b>Parameters</b>
       <b>SERVER_NAME</b>
              Name of the server in barman node

       <b>BACKUP_ID</b>
              Id of the backup in barman catalog.

       <b>--target</b>
              Define specific files to be listed. The possible values are:

              • <b>standalone</b> (default): List the base backup files, including required WAL files.

              • <b>data</b>: List just the data files.

              • <b>wal</b>:  List  all the WAL files between the start of the base backup and the end of the log or the
                start of the following base backup (depending on whether the specified base backup is  the  most
                recent one available).

              • <b>full</b>: same as <b>data</b> + <b>wal</b>.

   <b>Shortcuts</b>
       Use shortcuts instead of <b>BACKUP_ID</b>.
                          ┌───────────────────────┬───────────────────────────────────────┐
                          │ <b>Shortcut</b>              │ <b>Description</b>                           │
                          ├───────────────────────┼───────────────────────────────────────┤
                          │ <b>first/oldest</b>          │ Oldest   available   backup  for  the │
                          │                       │ server, in chronological order.       │
                          ├───────────────────────┼───────────────────────────────────────┤
                          │ <b>last/latest</b>           │ Most recent available backup for  the │
                          │                       │ server, in chronological order.       │
                          ├───────────────────────┼───────────────────────────────────────┤
                          │ <b>last-full/latest-full</b> │ Most  recent full backup eligible for │
                          │                       │ a  block-level   incremental   backup │
                          │                       │ using the <b>--incremental</b> option.       │
                          ├───────────────────────┼───────────────────────────────────────┤
                          │ <b>last-failed</b>           │ Most  recent  backup  that failed, in │
                          │                       │ chronological order.                  │
                          └───────────────────────┴───────────────────────────────────────┘

   <b>barman</b> <b>list-servers</b>
   <b>Synopsis</b>
          list-servers [ --minimal ]

   <b>Description</b>
       Display all configured servers along with their descriptions.

   <b>Parameters</b>
       <b>--minimal</b>
              Machine readable output.

   <b>barman</b> <b>lock-directory-cleanup</b>
   <b>Synopsis</b>
          lock-directory-cleanup

   <b>Description</b>
       Automatically removes unused lock files from the <b>barman_lock_directory</b>.

   <b>barman</b> <b>put-wal</b>
   <b>Synopsis</b>
          put-wal [ { -t | --test } ] SERVER_NAME

   <b>Description</b>
       Receive a WAL file from a remote server and securely save it into the server incoming directory. The  WAL
       file  should  be provided via <b>STDIN</b>, encapsulated in a tar stream along with a <b>SHA256SUMS</b> or <b>MD5SUMS</b> file
       for validation (<b>sha256</b> is the default hash algorithm, but the  user  can  choose  <b>md5</b>  when  setting  the
       <b>archive-command</b>  via  <b>barman-wal-archive</b>).  This command is intended to be executed via SSH from a remote
       <b>barman-wal-archive</b> utility (included in the barman-cli package). Avoid using this command directly unless
       you fully manage the content of the files.

   <b>Parameters</b>
       <b>SERVER_NAME</b>
              Name of the server in barman node

       <b>-t</b> <b>/</b> <b>--test</b>
              Test both the connection and configuration of the specified Postgres  server  in  Barman  for  WAL
              retrieval.

   <b>barman</b> <b>rebuild-xlogdb</b>
   <b>Synopsis</b>
          rebuild-xlogdb SERVER_NAME

   <b>Description</b>
       Rebuild  the WAL file metadata for a server (or for all servers using the <b>all</b> shortcut) based on the disk
       content. The WAL archive metadata is stored in the <b>xlog.db</b> file, with each Barman server maintaining  its
       own copy.

   <b>Parameters</b>
       <b>SERVER_NAME</b>
              Name of the server in barman node.

   <b>Shortcuts</b>
       Use shortcuts instead of <b>SERVER_NAME</b>.
                                         ┌──────────┬───────────────────────┐
                                         │ <b>Shortcut</b> │ <b>Description</b>           │
                                         ├──────────┼───────────────────────┤
                                         │ <b>all</b>      │ All available servers │
                                         └──────────┴───────────────────────┘

   <b>barman</b> <b>receive-wal</b>
   <b>Synopsis</b>
          receive-wal
              [ --create-slot ]
              [ --drop-slot ]
              [ --reset ]
              [ --stop ]
              SERVER_NAME

   <b>Description</b>
       Initiate   the  streaming  of  transaction  logs  for  a  server.  This  process  uses  <b>pg_receivewal</b>  or
       <b>pg_receivexlog</b> to receive WAL files from Postgres servers via the streaming protocol.

   <b>Parameters</b>
       <b>SERVER_NAME</b>
              Name of the server in barman node.

       <b>--create-slot</b>
              Create the physical replication slot configured with the <b>slot_name</b> configuration parameter.

       <b>--drop-slot</b>
              Drop the physical replication slot configured with the <b>slot_name</b> configuration parameter.

       <b>--reset</b>
              Reset the status of <b>receive-wal</b>, restarting the streaming from the current WAL file of the server.

       <b>--stop</b> Stop the process for the server.

   <b>barman</b> <b>restore</b>
   <b>Synopsis</b>
          restore
              [ --aws-region AWS_REGION } ]
              [ --azure-resource-group AZURE_RESOURCE_GRP ]
              [ --bwlimit KBPS ]
              [ --exclusive ]
              [ --gcp-zone GCP_ZONE ]
              [ --get-wal | --no-get-wal ]
              [ { -j | --jobs } PARALLEL_WORKERS ]
              [ --jobs-start-batch-period SECONDS ]
              [ --jobs-start-batch-size NUMBER ]
              [ --local-staging-path PATH ]
              [ --network-compression | --no-network-compression ]
              [ --no-retry ]
              [ --recovery-conf-filename FILENAME ]
              [ --recovery-staging-path PATH ]
              [ --remote-ssh-command STRING ]
              [ --retry-sleep SECONDS ]
              [ --retry-times NUMBER ]
              [ --snapshot-recovery-instance INSTANCE_NAME ]
              [ --standby-mode ]
              [ --tablespace NAME:LOCATION ]
              [ --target-action { pause | shutdown | promote } ]
              [ --target-immediate ]
              [ --target-lsn LSN ]
              [ --target-name RESTORE_POINT_NAME ]
              [ --target-time TIMESTAMP ]
              [ --target-tli TLI ]
              [ --target-xid XID ]
              SERVER_NAME BACKUP_ID DESTINATION_DIR

   <b>Description</b>
       Execute a PostreSQL server restore operation. Barman will  restore  the  backup  from  a  server  in  the
       destination  directory.  The restoration can be performed locally (on the barman node itself) or remotely
       (on  another  machine  accessible  via  SSH).  The  location  is  determined  by  whether  or   not   the
       <b>--remote-ssh-command</b>  option  is  used.  More  information  on  this command can be found in the <u>Recovery</u>
       section. You can use a shortcut instead of <b>BACKUP_ID</b>.

   <b>Parameters</b>
       <b>SERVER_NAME</b>
              Name of the server in barman node

       <b>BACKUP_ID</b>
              Id of the backup in barman catalog.

       <b>DESTINATION_DIR</b>
              Destination directory to restore the backup.

       <b>--aws-region</b>
              Specify the AWS region where the instance and disks for snapshot recovery are located. This option
              allows you to override the <b>aws_region</b> value in the Barman configuration.

       <b>--azure-resource-group</b>
              Specify the Azure resource group containing the instance and disks  for  snapshot  recovery.  This
              option allows you to override the <b>azure_resource_group</b> value in the Barman configuration.

       <b>--bwlimit</b>
              Specify  the  maximum transfer rate in kilobytes per second. A value of <b>0</b> indicates no limit. This
              setting overrides the <b>bandwidth_limit</b> configuration option.

       <b>--exclusive</b>
              Set target (time, XID or LSN) to be non inclusive.

       <b>--gcp-zone</b>
              Specify the GCP zone where the instance and disks for snapshot recovery are located.  This  option
              allows you to override the <b>gcp_zone</b> value in the Barman configuration.

       <b>--get-wal</b> <b>/</b> <b>--no-get-wal</b>
              Enable/disable   usage  of  <b>get-wal</b>  for  WAL  fetching  during  recovery.  Default  is  based  on
              <b>recovery_options</b> setting.

       <b>-j</b> <b>/</b> <b>--jobs</b>
              Specify the number of parallel workers to use for copying files during the backup.   This  setting
              overrides the <b>parallel_jobs</b> parameter if it is specified in the configuration file.

       <b>--jobs-start-batch-period</b>
              Specify the time period, in seconds, for starting a single batch of jobs. This value overrides the
              <b>parallel_jobs_start_batch_period</b>  parameter if it is set in the configuration file. The default is
              <b>1</b> second.

       <b>--jobs-start-batch-size</b>
              Specify the maximum number of parallel workers to initiate in a single batch. This value overrides
              the <b>parallel_jobs_start_batch_size</b> parameter if it is  defined  in  the  configuration  file.  The
              default is <b>10</b> workers.

       <b>--local-staging-path</b>
              Specify path on the Barman host where the chain of backups will be combined before being copied to
              the  destination  directory.  The  contents  created  within the staging path will be removed upon
              completion of the restore process.  This  option  is  necessary  for  restoring  from  block-level
              incremental backups and has no effect otherwise.

       <b>--network-compression</b> <b>/</b> <b>--no-network-compression</b>
              Enable/disable  network compression during remote restore. Default is based on <b>network_compression</b>
              configuration setting.

       <b>--no-retry</b>
              There will be no retry in case of an error. It is the same as setting <b>--retry-times</b> <b>0</b>.

       <b>--recovery-conf-filename</b>
              Specify the name of the file where Barman should write recovery options  when  recovering  backups
              for  Postgres  versions 12 and later. By default, this is set to <b>postgresql.auto.conf</b>. However, if
              <b>--recovery-conf-filename</b> is specified, recovery options will be written  to  the  specified  value
              instead.  While  the default value is suitable for most Postgres installations, this option allows
              you to  specify  an  alternative  location  if  Postgres  is  managed  by  tools  that  alter  the
              configuration mechanism (for example, if <b>postgresql.auto.conf</b> is symlinked to <b>/dev/null</b>).

       <b>--recovery-staging-path</b>
              Specify  a  path  on  the  recovery host where files for a compressed backup will be staged before
              being uncompressed to the destination directory. Backups will be staged  in  their  own  directory
              within  the  staging  path, following the naming convention: <b>barman-staging-SERVER_NAME-BACKUP_ID</b>.
              This staging directory will be removed after the restore  process  is  complete.  This  option  is
              mandatory for restoring from compressed backups and has no effect otherwise.

       <b>--remote-ssh-command</b>
              This  option  enables remote restore by specifying the secure shell command to execute on a remote
              host. It functions similarly to the <b>ssh_command</b> server option in the configuration file for remote
              restore, that is, <b>'ssh</b> <b>USER@SERVER'</b>.

       <b>--retry-sleep</b>
              Specify the number of seconds to wait after a failed copy before retrying. This setting applies to
              both backup and restore operations and overrides the <b>basebackup_retry_sleep</b>  parameter  if  it  is
              defined in the configuration file.

       <b>--retry-times</b>
              Specify  the  number  of  times to retry the base backup copy in case of an error. This applies to
              both backup and restore operations and overrides the <b>basebackup_retry_times</b> parameter if it is set
              in the configuration file.

       <b>--snapshot-recovery-instance</b>
              Specify the name of the instance where the disks recovered from the snapshots are  attached.  This
              option is necessary when recovering backups created with <b>backup_method=snapshot</b>.

       <b>--standby-mode</b>
              Whether to start the Postgres server as a standby.

       <b>--tablespace</b>
              Specify  tablespace relocation rule. <b>NAME</b> is the tablespace name and <b>LOCATION</b> is the recovery host
              destination path to restore the tablespace.

       <b>--target-action</b>
              Trigger the specified action when the recovery target is reached. This option requires defining  a
              target along with one of these actions. The possible values are:

              • <b>pause</b>:  Once recovery target is reached, the server is started in pause state, allowing users to
                inspect the instance

              • <b>promote</b>: Once recovery target is reached, the server will exit the  recovery  operation  and  is
                promoted as a master.

              • <b>shutdown</b>: Once recovery target is reached, the server is shut down.

       <b>--target-immediate</b>
              Recovery is completed when a consistent state is reached (end of the base backup).

       <b>--target-lsn</b>
              Recover to the specified LSN (Log Sequence Number). Requires Postgres 10 or above.

       <b>--target-name</b>
              Recover   to   the   specified   name   of   a   restore   point   previously   created  with  the
              <b>pg_create_restore_point(name)</b>.

       <b>--target-time</b>
              Recover to the specified time. Use the format <b>YYYY-MM-DD</b> <b>HH:MM:SS.mmm</b>.

       <b>--target-tli</b>
              Recover the specified timeline. You can use the special values <b>current</b> and <b>latest</b> in addition to a
              numeric timeline ID. For Postgres versions 12 and above, the default is to recover to  the  latest
              timeline  in  the  WAL  archive.  For Postgres versions below 12, the default is to recover to the
              timeline that was current at the time the backup was taken.

       <b>--target-xid</b>
              Recover to the specified transaction ID.

   <b>Shortcuts</b>
       Use shortcuts instead of <b>BACKUP_ID</b>.
                          ┌───────────────────────┬───────────────────────────────────────┐
                          │ <b>Shortcut</b>              │ <b>Description</b>                           │
                          ├───────────────────────┼───────────────────────────────────────┤
                          │ <b>first/oldest</b>          │ Oldest  available  backup   for   the │
                          │                       │ server, in chronological order.       │
                          ├───────────────────────┼───────────────────────────────────────┤
                          │ <b>last/latest</b>           │ Most  recent available backup for the │
                          │                       │ server, in chronological order.       │
                          ├───────────────────────┼───────────────────────────────────────┤
                          │ <b>last-full/latest-full</b> │ Most recent full backup eligible  for │
                          │                       │ a   block-level   incremental  backup │
                          │                       │ using the <b>--incremental</b> option.       │
                          ├───────────────────────┼───────────────────────────────────────┤
                          │ <b>last-failed</b>           │ Most recent backup  that  failed,  in │
                          │                       │ chronological order.                  │
                          └───────────────────────┴───────────────────────────────────────┘

   <b>barman</b> <b>replication-status</b>
   <b>Synopsis</b>
          replication-status
              [ --minimal ]
              [ --source { backup-host | wal-host } ]
              [ --target { hot-standby | wal-streamer | all } ]
          SERVER_NAME

   <b>Description</b>
       Display  real-time  information  and  status  of any streaming clients connected to the specified server.
       Specify <b>all</b> shortcut to diplay information for all configured servers.

   <b>Parameters</b>
       <b>SERVER_NAME</b>
              Name of the server in barman node

       <b>--minimal</b>
              Machine readable output.

       <b>--source</b>
              The possible values are:

              • <b>backup-host</b> (default): List clients using the backup connection information for a server.

              • <b>wal-host</b>: List clients using the WAL streaming connection information for a server.

       <b>--target</b>
              The possible values are:

              • <b>hot-standby</b>: List only hot standby servers.

              • <b>wal-streamer</b>: List only WAL streaming clients, such as <b>pg_receivewal</b>.

              • <b>all</b> (default): List all streaming clients.

   <b>Shortcuts</b>
       Use shortcuts instead of <b>SERVER_NAME</b>.
                                         ┌──────────┬───────────────────────┐
                                         │ <b>Shortcut</b> │ <b>Description</b>           │
                                         ├──────────┼───────────────────────┤
                                         │ <b>all</b>      │ All available servers │
                                         └──────────┴───────────────────────┘

   <b>barman</b> <b>show-backup</b>
   <b>Synopsis</b>
          show-backup SERVER_NAME BACKUP_ID

   <b>Description</b>
       Display detailed information about a specific backup. You can find details about this command in  <u>Catalog</u>
       <u>usage</u>. You can use a shortcut instead of <b>BACKUP_ID</b>.

   <b>Parameters</b>
       <b>SERVER_NAME</b>
              Name of the server in barman node

       <b>BACKUP_ID</b>
              Id of the backup in barman catalog.

   <b>Shortcuts</b>
       Use shortcuts instead of <b>BACKUP_ID</b>.
                          ┌───────────────────────┬───────────────────────────────────────┐
                          │ <b>Shortcut</b>              │ <b>Description</b>                           │
                          ├───────────────────────┼───────────────────────────────────────┤
                          │ <b>first/oldest</b>          │ Oldest   available   backup  for  the │
                          │                       │ server, in chronological order.       │
                          ├───────────────────────┼───────────────────────────────────────┤
                          │ <b>last/latest</b>           │ Most recent available backup for  the │
                          │                       │ server, in chronological order.       │
                          ├───────────────────────┼───────────────────────────────────────┤
                          │ <b>last-full/latest-full</b> │ Most  recent full backup eligible for │
                          │                       │ a  block-level   incremental   backup │
                          │                       │ using the <b>--incremental</b> option.       │
                          ├───────────────────────┼───────────────────────────────────────┤
                          │ <b>last-failed</b>           │ Most  recent  backup  that failed, in │
                          │                       │ chronological order.                  │
                          └───────────────────────┴───────────────────────────────────────┘

   <b>barman</b> <b>show-servers</b>
   <b>Synopsis</b>
          show-servers SERVER_NAME

   <b>Description</b>
       Display detailed information  about  a  server,  including  <b>conninfo</b>,  <b>backup_directory</b>,  <b>wals_directory</b>,
       <b>archive_command</b>,  and  many  more.  To  view  information  about  all configured servers, specify the <b>all</b>
       shortcut instead of the server name.

   <b>Parameters</b>
       <b>SERVER_NAME</b>
              Name of the server in barman node

   <b>Shortcuts</b>
                                         ┌──────────┬───────────────────────┐
                                         │ <b>Shortcut</b> │ <b>Description</b>           │
                                         ├──────────┼───────────────────────┤
                                         │ <b>all</b>      │ All available servers │
                                         └──────────┴───────────────────────┘

   <b>barman</b> <b>status</b>
   <b>Synopsis</b>
          status SERVER_NAME

   <b>Description</b>
       Display information about a server's status, including details such as the state, Postgres  version,  WAL
       information, available backups and more.

   <b>Parameters</b>
       <b>SERVER_NAME</b>
              Name of the server in barman node

   <b>Shortcuts</b>
                                         ┌──────────┬───────────────────────┐
                                         │ <b>Shortcut</b> │ <b>Description</b>           │
                                         ├──────────┼───────────────────────┤
                                         │ <b>all</b>      │ All available servers │
                                         └──────────┴───────────────────────┘

   <b>barman</b> <b>switch-wal</b>
   <b>Synopsis</b>
          switch-wal
              [ --archive ]
              [ --archive-timeout ]
              [ --force ]
              SERVER_NAME

   <b>Description</b>
       Execute  <b>pg_switch_wal()</b>  on  the target server (Postgres versions 10 and later) or <b>pg_switch_xlog()</b> (for
       Postgres versions 8.3 to 9.6).

   <b>Parameters</b>
       <b>SERVER_NAME</b>
              Name of the server in barman node

       <b>--archive</b>
              Waits for one WAL file to be archived. If  no  WAL  file  is  archived  within  a  specified  time
              (default:  <b>30</b>  seconds),  Barman  will  terminate  with  a  failure exit code. This option is also
              available on standby servers.

       <b>--archive-timeout</b>
              Specify the amount of time in seconds (default: <b>30</b> seconds) that the archiver will wait for a  new
              WAL file to be archived before timing out. This option is also available on standby servers.

       <b>--force</b>
              Forces the switch by executing a CHECKPOINT before <b>pg_switch_wal()</b>.

              <b>NOTE:</b>
                 Running  a  CHECKPOINT  may  increase  I/O  load  on  the  Postgres  server, so use this option
                 cautiously.

   <b>barman</b> <b>switch-xlog</b>
   <b>Description</b>
       Alias for the <b>switch-wal</b> command.

   <b>barman</b> <b>sync-backup</b>
   <b>Synopsis</b>
          sync-backup SERVER_NAME BACKUP_ID

   <b>Description</b>
       This command synchronizes a passive node with its primary by copying all files from a backup  present  on
       the  server  node.  It  is  available  only  for passive nodes and uses the <b>primary_ssh_command</b> option to
       establish a secure connection with the primary node. You can use a shortcut instead of <b>BACKUP_ID</b>.

   <b>Parameters</b>
       <b>SERVER_NAME</b>
              Name of the server in barman node

       <b>BACKUP_ID</b>
              Id of the backup in barman catalog.

   <b>Shortcuts</b>
       For some commands, instead of using the timestamp backup ID, you  can  use  the  following  shortcuts  or
       aliases to identify a backup for a given server:
                          ┌───────────────────────┬───────────────────────────────────────┐
                          │ <b>Shortcut</b>              │ <b>Description</b>                           │
                          ├───────────────────────┼───────────────────────────────────────┤
                          │ <b>first/oldest</b>          │ Oldest   available   backup  for  the │
                          │                       │ server, in chronological order.       │
                          ├───────────────────────┼───────────────────────────────────────┤
                          │ <b>last/latest</b>           │ Most recent available backup for  the │
                          │                       │ server, in chronological order.       │
                          ├───────────────────────┼───────────────────────────────────────┤
                          │ <b>last-full/latest-full</b> │ Most  recent full backup eligible for │
                          │                       │ a  block-level   incremental   backup │
                          │                       │ using the <b>--incremental</b> option.       │
                          ├───────────────────────┼───────────────────────────────────────┤
                          │ <b>last-failed</b>           │ Most  recent  backup  that failed, in │
                          │                       │ chronological order.                  │
                          └───────────────────────┴───────────────────────────────────────┘

   <b>barman</b> <b>sync-info</b>
   <b>Synopsis</b>
          sync-info [ --primary ] SERVER_NAME [ LAST_WAL [ LAST_POS ] ]

   <b>Description</b>
       Gather information about the current status of a Barman server for synchronization purposes.

       This command returns a JSON output for a server that includes: all successfully  completed  backups,  all
       archived  WAL  files, the configuration, the last WAL file read from <b>xlog.db</b>, and its position within the
       file.

   <b>Parameters</b>
       <b>SERVER_NAME</b>
              Name of the server in barman node

       <b>LAST_WAL</b>
              Instructs sync-info to skip any WAL  files  that  precede  the  specified  file  (for  incremental
              synchronization).

       <b>LAST_POS</b>
              Hint for quickly positioning in the <b>xlog.db</b> file (for incremental synchronization).

   <b>barman</b> <b>sync-wals</b>
   <b>Synopsis</b>
          sync-wals SERVER_NAME

   <b>Description</b>
       This  command  synchronizes  a  passive  node with its primary by copying all archived WAL files from the
       server node. It is available only for passive  nodes  and  utilizes  the  <b>primary_ssh_command</b>  option  to
       establish a secure connection with the primary node.

   <b>Parameters</b>
       <b>SERVER_NAME</b>
              Name of the server in barman node

   <b>barman</b> <b>verify-backup</b>
   <b>Synopsis</b>
          verify-backup SERVER_NAME BACKUP_ID

   <b>Description</b>
       Runs <b>pg_verifybackup</b> on a backup manifest file (available since Postgres version 13).  For rsync backups,
       it   can  be  used  after  creating  a  manifest  file  using  the  <b>generate-manifest</b>  command.  Requires
       <b>pg_verifybackup</b> to be installed on the backup server. You can use a shortcut instead of <b>BACKUP_ID</b>.

   <b>Parameters</b>
       <b>SERVER_NAME</b>
              Name of the server in barman node

       <b>BACKUP_ID</b>
              Id of the backup in barman catalog.

   <b>Shortcuts</b>
       For some commands, instead of using the timestamp backup ID, you  can  use  the  following  shortcuts  or
       aliases to identify a backup for a given server:
                          ┌───────────────────────┬───────────────────────────────────────┐
                          │ <b>Shortcut</b>              │ <b>Description</b>                           │
                          ├───────────────────────┼───────────────────────────────────────┤
                          │ <b>first/oldest</b>          │ Oldest   available   backup  for  the │
                          │                       │ server, in chronological order.       │
                          ├───────────────────────┼───────────────────────────────────────┤
                          │ <b>last/latest</b>           │ Most recent available backup for  the │
                          │                       │ server, in chronological order.       │
                          ├───────────────────────┼───────────────────────────────────────┤
                          │ <b>last-full/latest-full</b> │ Most  recent full backup eligible for │
                          │                       │ a  block-level   incremental   backup │
                          │                       │ using the <b>--incremental</b> option.       │
                          ├───────────────────────┼───────────────────────────────────────┤
                          │ <b>last-failed</b>           │ Most  recent  backup  that failed, in │
                          │                       │ chronological order.                  │
                          └───────────────────────┴───────────────────────────────────────┘

   <b>barman</b> <b>verify</b>
   <b>Description</b>
       Alias for <b>verify-backup</b> command.

</pre><h4><b>BARMAN-CLI</b> <b>COMMANDS</b></h4><pre>
       The <b>barman-cli</b> package includes a collection of recommended client utilities  that  should  be  installed
       alongside the Postgres server. Here are the command references for both utilities.

   <b>barman-wal-archive</b>
   <b>Synopsis</b>
          barman-wal-archive
              [ { -h, --help } ]
              [ { -V, --version } ]
              [ { -U, --user } USER ]
              [ --port PORT ]
              [ { -c, --config } CONFIG ]
              [ { -t --test } ]
              [ --md5 ]
              BARMAN_HOST SERVER_NAME WAL_PATH

   <b>Description</b>
       This script can be utilized in the <b>archive_command</b> of a Postgres server to transfer WAL files to a Barman
       host using the <b>put-wal</b> command (introduced in Barman 2.6). It establishes an SSH connection to the Barman
       host, enabling seamless integration of Barman within Postgres clusters for improved business continuity.

       <b>Exit</b> <b>Statuses</b> are:

       • <b>0</b> for <b>SUCCESS</b>.

       • <b>non-zero</b> for <b>FAILURE</b>.

   <b>Parameters</b>
       <b>SERVER_NAME</b>
              The server name configured in Barman for the Postgres server from which the WAL file is retrieved.

       <b>BARMAN_HOST</b>
              The host of the Barman server.

       <b>WAL_PATH</b>
              The value of the '%p' keyword (according to <b>archive_command</b>).

       <b>-h</b> <b>/</b> <b>--help</b>
              Display a help message and exit.

       <b>-V</b> <b>/</b> <b>--version</b>
              Display the program's version number and exit.

       <b>-U</b> <b>/</b> <b>--user</b>
              Specify the user for the SSH connection to the Barman server (defaults to <b>barman</b>).

       <b>--port</b> Define the port used for the SSH connection to the Barman server.

       <b>-c</b> <b>/</b> <b>--config</b>
              Specify the configuration file on the Barman server.

       <b>-t</b> <b>/</b> <b>--test</b>
              Test  the  connection and configuration of the specified Postgres server in Barman to ensure it is
              ready to receive WAL files. This option ignores the mandatory arguments <b>WAL_NAME</b> and <b>WAL_DEST</b>.

       <b>--md5</b>  Use MD5 instead of SHA256 as the hash algorithm to calculate the checksum of  the  WAL  file  when
              transmitting  it  to  the  Barman server. This is used to maintain compatibility with older server
              versions, as older versions of Barman server used to support only MD5.

   <b>barman-wal-restore</b>
   <b>Synopsis</b>
          barman-wal-restore
              [ { -h, --help } ]
              [ { -V, --version } ]
              [ { -U, --user } USER ]
              [ --port PORT ]
              [ { -s, --sleep } SECONDS ]
              [ { -p, --parallel } JOBS ]
              [ --spool-dir SPOOL_DIR ]
              [ { -P, --partial } ]
              [ { -z, --gzip } ]
              [ { -j, --bzip2 } ]
              [ --keep-compression ]
              [ { -c, --config } CONFIG ]
              [ { -t --test } ]
              BARMAN_HOST SERVER_NAME WAL_NAME WAL_DEST

   <b>Description</b>
       This script serves as a <b>restore_command</b> for Postgres servers, enabling the retrieval of WAL files through
       Barman's <b>get-wal</b> feature. It establishes an SSH  connection  to  the  Barman  host  and  facilitates  the
       integration of Barman within Postgres clusters, enhancing business continuity.

       <b>Exit</b> <b>Statuses</b> are:

       • <b>0</b> for <b>SUCCESS</b>.

       • <b>1</b> for remote get-wal command <b>FAILURE</b>, likely because the requested WAL could not be found.

       • <b>2</b> for ssh connection <b>FAILURE</b>.

       • Any other <b>non-zero</b> for <b>FAILURE</b>.

   <b>Parameters</b>
       <b>SERVER_NAME</b>
              The server name configured in Barman for the Postgres server from which the WAL file is retrieved.

       <b>BARMAN_HOST</b>
              The host of the Barman server.

       <b>WAL_NAME</b>
              The value of the '%f' keyword (according to <b>restore_command</b>).

       <b>WAL_DEST</b>
              The value of the '%p' keyword (according to <b>restore_command</b>).

       <b>-h</b> <b>/</b> <b>--help</b>
              Display a help message and exit.

       <b>-V</b> <b>/</b> <b>--version</b>
              Display the program's version number and exit.

       <b>-U</b> <b>/</b> <b>--user</b>
              Specify the user for the SSH connection to the Barman server (defaults to <b>barman</b>).

       <b>--port</b> Define the port used for the SSH connection to the Barman server.

       <b>-s</b> <b>/</b> <b>--sleep</b>
              Pause for <b>SECONDS</b> after a failed <b>get-wal</b> request (defaults to <b>0</b> - no wait).

       <b>-p</b> <b>/</b> <b>--parallel</b>
              Indicate the number of files to <b>peek</b> and transfer simultaneously (defaults to <b>0</b> - disabled).

       <b>--spool-dir</b>
              Specify the spool directory for WAL files (defaults to <b>/var/tmp/walrestore</b>).

       <b>-P</b> <b>/</b> <b>--partial</b>
              Include partial WAL files (.partial) in the retrieval.

       <b>-z</b> <b>/</b> <b>--gzip</b>
              Transfer WAL files compressed with <b>gzip</b>.

       <b>-j</b> <b>/</b> <b>--bzip2</b>
              Transfer WAL files compressed with <b>bzip2</b>.

       <b>--keep-compression</b>
              If  specified,  compressed  files  will  be  trasnfered  as-is  and decompressed on arrival on the
              client-side.

       <b>-c</b> <b>/</b> <b>--config</b>
              Specify the configuration file on the Barman server.

       <b>-t</b> <b>/</b> <b>--test</b>
              Test the connection and configuration of the specified Postgres server in Barman to ensure  it  is
              ready to receive WAL files. This option ignores the mandatory arguments <b>WAL_NAME</b> and <b>WAL_DEST</b>.

       <b>WARNING:</b>
          <b>-z</b>  /  <b>--gzip</b>  and  <b>-j</b>  /   <b>--bzip2</b>  options are deprecated and will be removed in the future. For WAL
          compression, please make sure to  enable  it  directly  on  the  Barman  server  via  the  <b>compression</b>
          configuration option.

</pre><h4><b>AUTHOR</b></h4><pre>
       EnterpriseDB

</pre><h4><b>COPYRIGHT</b></h4><pre>
       © Copyright EnterpriseDB UK Limited 2011-2024

3.12                                              Dec 09, 2024                                         <u><a href="../man1/BARMAN.1.html">BARMAN</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>