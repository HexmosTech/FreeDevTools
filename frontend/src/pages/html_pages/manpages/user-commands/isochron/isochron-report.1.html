<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>isochron-report - Gather statistics from logged isochron data</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/isochron">isochron_0.9-0.2_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       isochron-report - Gather statistics from logged isochron data

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>isochron</b> report [<u>OPTIONS</u>]

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This  command  opens  an isochron.dat file generated by isochron send and filters the requested data from
       it.

</pre><h4><b>OPTIONS</b></h4><pre>
       -h, --help
              prints the short help message and exits

       -F, --input-file &lt;PATH&gt;
              specify the path to the input file.  Optional, defaults to “isochron.dat”.

       -m, --summary
              optionally calculate and print a summary of the built-in metrics.

       -s, --start &lt;NUMBER&gt;
              specify the sequence number of the first packet to be taken into consideration  for  printing  and
              for statistics calculation.  Optional; defaults to sequence number 1 (the first packet).

       -S, --stop &lt;NUMBER&gt;
              specify the sequence number of the last packet to be taken into consideration for printing and for
              statistics calculation.  Optional; defaults to a sequence number equal to the number of packets of
              the test (the last packet).

       -f, --printf-format &lt;STRING&gt;
              specify  the  format  in  which  a packet will be printed.  Optional; if not specified, per-packet
              information is not printed.

       -a, --printf-args &lt;STRING&gt;
              specify the built-in variables which will be printed per packet.

</pre><h4><b>PRINTF</b> <b>FORMAT</b></h4><pre>
       The --printf-format argument specifies a free-form string that can also contain  up  to  256  printf-like
       codes  prefixed  by  the  %  (percent) character.  The printf codes will be replaced by isochron for each
       packet with internal variables taken from the log.  The newline  character  is  not  added  automatically
       between packets.

       The printf codes understood by isochron are:

       %d     print a built-in variable as a signed integer in decimal format.

       %u     print a built-in variable as an unsigned integer in decimal format.

       %x     print a built-in variable as an unsigned integer in hexadecimal format.

       %T     print a built-in variable in human-readable time format (sec.nsec).

</pre><h4><b>PRINTF</b> <b>VARIABLES</b></h4><pre>
       The  --printf-args  argument  is  an  array  of  single-character  isochron  variable codes.  The program
       associates, in left-to-right order, each variable code with the printf code from the format specifier  in
       order to figure out how to print it.

       The variable codes understood by isochron are:

       A      advance time as defined by isochron send --advance-time.  Can be printed using %d, %u, %x or %T.

       B      base  time  as defined by isochron send --base-time, then adjusted by the sender application using
              the shift time and advanced into the immediate future at the time of  the  test.   The  base  time
              minus  the  advance  time  denotes  the programmed time of the wakeup timer for the sender’s first
              packet.  Can be printed using %d, %u, %x or %T.

       C      cycle time as defined by isochron send --cycle-time.  Can be printed using %d, %u, %x or %T.

       H      shift time as defined by isochron send --shift-time.  Can be printed using %d, %u, %x or %T.

       W      window size as defined by isochron send --window-size.  Can be printed using %d, %u, %x or %T.

       S      scheduled TX time of the packet (the time at which the packet must hit the wire).  Can be  printed
              using %d, %u, %x or %T.

       w      the  actual  value  of  the  CLOCK_TAI  system  clock  when the sender starts executing code again
              immediately after its wakeup timer for the packet has expired.  Can be printed using %d, %u, %x or
              %T.

       T      TX hardware timestamp of the packet, taken by the NIC of the sender.  Can be printed using %d, %u,
              %x or %T.

       t      TX software timestamp of the packet, taken by the NIC driver of the sender right  before  hardware
              transmission.  Can be printed using %d, %u, %x or %T.

       s      TX  software  timestamp  of  the  packet,  taken by the network stack prior to entering the packet
              scheduler (qdisc).  Can be printed using %d, %u, %x or %T.

       q      sequence number of the packet, starting from 1.  Can be printed using %u or %x.

       a      the arrival time of the packet, i.e. the actual value of  the  CLOCK_TAI  system  clock  when  the
              receiver starts executing code again immediately after fully receiving the packet.  Can be printed
              using %d, %u, %x or %T.

       R      RX  hardware  timestamp of the packet, taken by the NIC of the receiver.  Can be printed using %d,
              %u, %x or %T.

       r      RX software timestamp of the packet, taken by the NIC driver right after reception from  hardware.
              Can be printed using %d, %u, %x or %T.

</pre><h4><b>BUILT-IN</b> <b>METRICS</b></h4><pre>
       When  running with the --summary option, isochron defines some latency related metrics and calculates the
       following statistics on them: maximum value, minimum value, packet sequence number  associated  with  the
       min and max, mean value, standard deviation.

       The built-in metrics are:

       Path delay
              R - T (HW TX timestamp to HW RX timestamp)

       Sender latency
              t - w (actual sender wakeup time to SW TX timestamp)

       MAC latency
              T - S (scheduled TX time to HW TX timestamp)

       Application latency budget (“time to spare per cycle”)
              S - T (time until HW TX timestamp would exceed scheduled TX time)

       Wakeup latency
              w  -  (S - A) (programmed wakeup time, i.e. scheduled TX time minus advance time, to actual wakeup
              time)

       Driver latency (actually driver + qdisc latency)
              t - s (pre-qdisc timestamp to driver-level software TX timestamp)

       Arrival latency
              a - R (HW RX timestamp to application)

       Notice how the “MAC latency” and the “Application latency budget” is the same metric, but  calculated  in
       reverse.   The  data  is interpreted by the application depending on whether the hardware was expected to
       send the packet right away, or queue it until the scheduled TX time like in the case of the tc-taprio and
       tc-etf qdiscs.

</pre><h4><b>EXAMPLES</b></h4><pre>
       To obtain the summary of the built-in metrics:

              isochron report \
                  --input-file isochron.dat \
                  --summary

       To see the detailed network timestamps for a single packet:

              isochron report \
                  --input-file isochron.dat \
                  --printf-format "seqid %u scheduled for %T, TX qdisc %T sw %T hw %T, RX hw %T sw %T\n" \
                  --printf-args "qSstTRr" \
                  --start 173972 --stop 173972

       To export data in comma-separated value format, for calculating user-defined metrics externally:

              isochron report \
                  --input-file isochron.dat \
                  --printf-format "%d,%d\n" \
                  --printf-args "TR" \
                  &gt; isochron.csv

       User-defined arithmetic on the built-in isochron variables can also be delegated to a scripting  language
       interpreter  such  as  Python,  by configuring the isochron printf format specifier to generate output in
       Python syntax:

              isochron report \
                  --printf-format "pdelay=%d - %d\nprint(\"path_delay[%u] =\", pdelay)\n" \
                  --printf-args "RTq" \
                  | python3 -

       For more complex arithmetic, the per-packet internal variables can be stored inside arrays:

              printf "wakeup_latency = {}\n" &gt; isochron_data.py
              isochron report \
                  --printf-format "wakeup_latency[%u] = %d - (%d - %d)\n" \
                  --printf-args "qwSA" \
                  &gt;&gt; isochron_data.py
              cat &lt;&lt; 'EOF' &gt; isochron_postprocess.py
              #!<a href="file:///usr/lib/w3m/cgi-bin/w3mman2html.cgi?env">/usr/bin/env</a> python3

              from isochron_data import wakeup_latency
              import numpy as np

              w = np.array(list(wakeup_latency.values()))
              print("Wakeup latency: min {}, max {}, mean {}, median {}, stdev {}".format(np.min(w), np.max(w), np.mean(w), np.median(w), np.std(w)))
              EOF
              python3 ./isochron_postprocess.py

</pre><h4><b>AUTHOR</b></h4><pre>
       isochron was written by Vladimir Oltean <a href="mailto:vladimir.oltean@nxp.com">vladimir.oltean@nxp.com</a>

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <a href="../man8/isochron.8.html">isochron</a>(8) <a href="../man8/isochron-send.8.html">isochron-send</a>(8) <a href="../man8/isochron-rcv.8.html">isochron-rcv</a>(8)

</pre><h4><b>COMMENTS</b></h4><pre>
       This man page was written using pandoc by the same author.

                                                                                              <u><a href="../man1/isochron-report.1.html">isochron-report</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>