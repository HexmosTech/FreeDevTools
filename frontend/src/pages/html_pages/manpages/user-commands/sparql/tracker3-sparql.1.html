<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>tracker3-sparql - Use SparQL to query the Tracker databases.</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/jammy/+package/tracker">tracker_3.3.0-1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       tracker3-sparql - Use SparQL to query the Tracker databases.

</pre><h4><b>SYNOPSIS</b></h4><pre>
       tracker3 sparql -q &lt;sparql&gt; [-u] | -f &lt;file&gt;
       tracker3 sparql -t [class] [-s &lt;needle&gt;] [-p]
       tracker3 sparql [-c] [-p] [-x] [-n [class]] [-i [property]] [-s &lt;needle&gt;]
       tracker3 sparql [--get-longhand &lt;class&gt;] [--get-shorthand &lt;class&gt;]

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This command allows probing of the current database schema (also known as ontology) and running low level
       queries or updates on the data set. In terms of the database ontology, it’s easy to find out what
       properties are indexed for speed, or notified on changes, what classes are available and the properties
       belonging to those classes. There are also visual tools to display an ascii tree layout of the classes
       and their relationships to each other.

       When the caller runs a query, the query is in RDF and SPARQL. This can be done two ways. Either by
       providing a <u>file</u> with the query or by providing a string with the <u>sparql</u> query.

       The <u>file</u> argument can be either a local path or a URI. It also does not have to be an absolute path.

</pre><h4><b>OPTIONS</b></h4><pre>
       <b>-f,</b> <b>--file=&lt;</b><u>file</u><b>&gt;</b>
           Use a <u>file</u> with SPARQL content to query or update.

       <b>-q,</b> <b>--query=&lt;</b><u>sparql</u><b>&gt;</b>
           Use a <u>sparql</u> string to query the database with.

       <b>-u,</b> <b>--update</b>
           This has to be used with <b>--query</b>. This tells "tracker3 sparql" to use the SPARQL update extensions so
           it knows it isn’t a regular data lookup request. So if your query is intended to change data in the
           database, this option is needed.

       <b>-c,</b> <b>--list-classes</b>
           Returns a list of classes which describe the ontology used for storing data. These classes are also
           used in queries. For example, <u><a href="http://www.w3.org/2000/01/rdf-schema">http://www.w3.org/2000/01/rdf-schema</a>#Resource</u> is one of many classes
           which should be returned here.

       <b>-x,</b> <b>--list-class-prefixes</b>
           Returns a list of classes and their related prefixes. Prefixes are used to make querying a lot
           simpler and are much like an alias. For example, <u><a href="http://www.w3.org/2000/01/rdf-schema">http://www.w3.org/2000/01/rdf-schema</a>#Resource</u> has
           the prefix <u>rdfs</u> so queries can be cut down to:

       "SELECT ?u WHERE \{ ?u a rdfs:Resource }"

       <b>-p,</b> <b>--list-properties=[</b><u>class</u><b>]</b>
           Returns a list of properties which pertain to a <u>class</u>. You can use both formats here for the <u>class</u>,
           either the full name <u><a href="http://tracker.api.gnome.org/ontology/v3/nfo">http://tracker.api.gnome.org/ontology/v3/nfo</a>#Video</u> or the shortened prefix name
           <u>nfo:Video</u>.

       This gives the following result:

           $ tracker3 sparql -p nfo:Video

           Properties: 2
             <a href="http://tracker.api.gnome.org/ontology/v3/nfo">http://tracker.api.gnome.org/ontology/v3/nfo</a>#frameRate
             <a href="http://tracker.api.gnome.org/ontology/v3/nfo">http://tracker.api.gnome.org/ontology/v3/nfo</a>#frameCount

       These properties <u>nfo:frameRate</u> and <u>nfo:frameCount</u> can then be used in queries.

       See also <b>--tree</b> and <b>--query</b>.

       <b>-n,</b> <b>--list-notifies=[</b><u>class</u><b>]</b>
           Returns a list of classes which are notified over D-Bus about any changes that occur in the database.
           The <u>class</u> does not have to be supplied here. This is optional and filters the results according to
           any argument supplied. With no <u>class</u>, all classes are listed.

       <b>-i,</b> <b>--list-indexes=[</b><u>property</u><b>]</b>
           Returns a list of properties which are indexed in the database. Indexes improves query speed but also
           add an indexing penalty. The <u>property</u> does not have to be supplied here. This is optional and filters
           the results according to any argument supplied. With no <u>property</u>, all properties are listed.

           •   -g, --list-graphs:: List all the named graphs in the database. These are used by the filesystem
               miner to separate metadata so that apps can only see the information relevant to them.

       <b>-t,</b> <b>--tree=[</b><u>class</u><b>]</b>
           Prints a tree showing all parent classes of <u>class</u> in the ontology. The <u>class</u> can be provided in
           shorthand or longhand (see <b>--get-shorthand</b> and <b>--get-longhand</b> for details). For example:

           $ tracker3 sparql -t nmo:MMSMessage
           ROOT
             +-- rdfs:Resource (C)
             |  +-- nie:InformationElement (C)
             |  |  +-- nfo:Document (C)
             |  |  |  +-- nfo:TextDocument (C)
             |  |  |  |  `-- nmo:Message (C)
             |  |  |  |  |  +-- nmo:PhoneMessage (C)
             |  |  |  |  |  |  `-- nmo:MMSMessage (C)

       If no <u>class</u> is given, the entire tree is shown.

       The <b>--search</b> command line option can be used to highlight parts of the tree you’re looking for. The
       search is case insensitive.

       The <b>--properties</b> command line option can be used to show properties for each class displayed, for
       example:

           $ tracker3 sparql -t nfo:FileDataObject -p
           ROOT
             +-- rdfs:Resource (C)
             |  --&gt; <a href="http://purl.org/dc/elements/1.1/contributor">http://purl.org/dc/elements/1.1/contributor</a> (P)
             |  --&gt; <a href="http://purl.org/dc/elements/1.1/coverage">http://purl.org/dc/elements/1.1/coverage</a> (P)
             |  --&gt; <a href="http://purl.org/dc/elements/1.1/creator">http://purl.org/dc/elements/1.1/creator</a> (P)
             |  --&gt; <a href="http://purl.org/dc/elements/1.1/date">http://purl.org/dc/elements/1.1/date</a> (P)
             |  --&gt; <a href="http://purl.org/dc/elements/1.1/description">http://purl.org/dc/elements/1.1/description</a> (P)
             |  --&gt; <a href="http://purl.org/dc/elements/1.1/format">http://purl.org/dc/elements/1.1/format</a> (P)
             |  --&gt; <a href="http://purl.org/dc/elements/1.1/identifier">http://purl.org/dc/elements/1.1/identifier</a> (P)
             |  --&gt; <a href="http://purl.org/dc/elements/1.1/language">http://purl.org/dc/elements/1.1/language</a> (P)
             |  --&gt; <a href="http://purl.org/dc/elements/1.1/publisher">http://purl.org/dc/elements/1.1/publisher</a> (P)
             |  --&gt; <a href="http://purl.org/dc/elements/1.1/relation">http://purl.org/dc/elements/1.1/relation</a> (P)
             |  --&gt; <a href="http://purl.org/dc/elements/1.1/rights">http://purl.org/dc/elements/1.1/rights</a> (P)
             |  --&gt; <a href="http://purl.org/dc/elements/1.1/source">http://purl.org/dc/elements/1.1/source</a> (P)
             |  --&gt; <a href="http://purl.org/dc/elements/1.1/subject">http://purl.org/dc/elements/1.1/subject</a> (P)
             |  --&gt; <a href="http://purl.org/dc/elements/1.1/title">http://purl.org/dc/elements/1.1/title</a> (P)
             |  --&gt; <a href="http://purl.org/dc/elements/1.1/type">http://purl.org/dc/elements/1.1/type</a> (P)
             |  --&gt; nao:deprecated (P)
             |  --&gt; nao:hasTag (P)
             |  --&gt; nao:identifier (P)
             |  --&gt; nao:isRelated (P)
             |  --&gt; nao:lastModified (P)
             |  --&gt; nao:numericRating (P)
             |  --&gt; rdf:type (P)
             |  --&gt; rdfs:comment (P)
             |  --&gt; rdfs:label (P)
             |  --&gt; nrl:added (P)
             |  --&gt; nrl:damaged (P)
             |  --&gt; nrl:modified (P)
             |  +-- nie:DataObject (C)
             |  |  --&gt; nfo:belongsToContainer (P)
             |  |  --&gt; nie:byteSize (P)
             |  |  --&gt; nie:created (P)
             |  |  --&gt; nie:dataSource (P)
             |  |  --&gt; nie:interpretedAs (P)
             |  |  --&gt; nie:isPartOf (P)
             |  |  --&gt; nie:lastRefreshed (P)
             |  |  --&gt; nie:url (P)
             |  |  --&gt; tracker:available (P)
             |  |  +-- nfo:FileDataObject (C)
             |  |  |  --&gt; nfo:fileCreated (P)
             |  |  |  --&gt; nfo:fileLastAccessed (P)
             |  |  |  --&gt; nfo:fileLastModified (P)
             |  |  |  --&gt; nfo:fileName (P)
             |  |  |  --&gt; nfo:fileOwner (P)
             |  |  |  --&gt; nfo:fileSize (P)
             |  |  |  --&gt; nfo:hasHash (P)
             |  |  |  --&gt; nfo:permissions (P)

       <b>-s,</b> <b>--search=&lt;</b><u>needle</u><b>&gt;</b>
           Returns a list of classes and properties which partially match <u>needle</u> in the ontology. This is a case
           insensitive match, for example:

           $ tracker3 sparql -s text

           Classes: 4
             <a href="http://tracker.api.gnome.org/ontology/v3/nfo">http://tracker.api.gnome.org/ontology/v3/nfo</a>#TextDocument
             <a href="http://tracker.api.gnome.org/ontology/v3/nfo">http://tracker.api.gnome.org/ontology/v3/nfo</a>#PlainTextDocument
             <a href="http://tracker.api.gnome.org/ontology/v3/nfo">http://tracker.api.gnome.org/ontology/v3/nfo</a>#PaginatedTextDocument
             <a href="http://tracker.api.gnome.org/ontology/v3/nmm">http://tracker.api.gnome.org/ontology/v3/nmm</a>#SynchronizedText

           Properties: 4
             <a href="http://tracker.api.gnome.org/ontology/v3/tracker">http://tracker.api.gnome.org/ontology/v3/tracker</a>#fulltextIndexed
             <a href="http://tracker.api.gnome.org/ontology/v3/nie">http://tracker.api.gnome.org/ontology/v3/nie</a>#plainTextContent
             <a href="http://tracker.api.gnome.org/ontology/v3/nmo">http://tracker.api.gnome.org/ontology/v3/nmo</a>#plainTextMessageContent
             <a href="http://tracker.api.gnome.org/ontology/v3/scal">http://tracker.api.gnome.org/ontology/v3/scal</a>#textLocation

       See also <b>--tree</b>.

       <b>--get-shorthand=&lt;</b><u>class</u><b>&gt;</b>
           Returns the shorthand for a class given by a URL. For example:

           $ tracker3 sparql --get-shorthand <a href="http://tracker.api.gnome.org/ontology/v3/nmo">http://tracker.api.gnome.org/ontology/v3/nmo</a>#plainTextMessageContent
           nmo:plainTextMessageContent

       <b>--get-longhand=&lt;</b><u>class</u><b>&gt;</b>
           Returns the longhand for a class given in the form of CLASS:PROPERTY. For example:

           $ tracker3 sparql --get-longhand nmm:MusicPiece
           <a href="http://tracker.api.gnome.org/ontology/v3/nmm">http://tracker.api.gnome.org/ontology/v3/nmm</a>#MusicPiece

</pre><h4><b>EXAMPLES</b></h4><pre>
       List all classes

               $ tracker3 sparql -q "SELECT ?cl WHERE { ?cl a rdfs:Class }"

       List all properties for the Resources class (see --list-properties)

               $ tracker3 sparql -q "SELECT ?prop WHERE {
                   ?prop a rdf:Property ;
                   rdfs:domain &lt;<a href="http://www.w3.org/2000/01/rdf-schema">http://www.w3.org/2000/01/rdf-schema</a>#Resource&gt;
               }"

       List all class namespace prefixes

               $ tracker3 sparql -q "SELECT ?prefix ?ns WHERE {
                   ?ns a nrl:Namespace ;
                   nrl:prefix ?prefix
               }"

       List all music files

               $ tracker3 sparql -q "SELECT ?song WHERE { ?song a nmm:MusicPiece }"

       List all music albums, showing title, track count, and length in seconds.

               $ tracker3 sparql -q "SELECT ?title COUNT(?song)
                                     AS songs
                                     SUM(?length) AS totallength
                                     WHERE {
                   ?album a nmm:MusicAlbum ;
                   nie:title ?title .
                   ?song nmm:musicAlbum ?album ;
                   nfo:duration ?length
               } GROUP BY ?album"

       List all music from a particular artist

               $ tracker3 sparql -q "SELECT ?song ?title WHERE {
                   ?song nmm:performer [ nmm:artistName 'Artist Name' ] ;
                   nie:title ?title
               }"

       Set the played count for a song

               $ tracker3 sparql -u -q "DELETE {
                   &lt;file:///home/user/Music/song.mp3&gt; nie:usageCounter ?count
               } WHERE {
                   &lt;file:///home/user/Music/song.mp3&gt; nie:usageCounter ?count
               } INSERT {
                   &lt;file:///home/user/Music/song.mp3&gt; nie:usageCounter 42
               }"

       List all image files

               $ tracker3 sparql -q "SELECT ?image WHERE { ?image a nfo:Image }"

       List all image files with a specific tag

               $ tracker3 sparql -q "SELECT ?image WHERE {
                   ?image a nfo:Image ;
                   nao:hasTag [ nao:prefLabel 'tag' ]
               }"

       List all image files created on a specific month and order by date

               $ tracker3 sparql -q "SELECT ?image ?date WHERE {
                   ?image a nfo:Image ;
                   nie:contentCreated ?date .
                   FILTER (?date &gt;= '2008-07-01T00:00:00' &amp;&amp;
                           ?date &lt;  '2008-08-01T00:00:00')
               } ORDER BY ?date"

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man1/tracker3-sql.1.html">tracker3-sql</a></b>(1), <b><a href="../man1/tracker3-info.1.html">tracker3-info</a></b>(1).

       <b><a href="http://nepomuk.semanticdesktop.org/">http://nepomuk.semanticdesktop.org/</a></b> <b><a href="http://www.w3.org/TR/rdf-sparql-query/">http://www.w3.org/TR/rdf-sparql-query/</a></b>

  3.3.0                                            03/21/2022                                 <u><a href="../man1/TRACKER3-SPARQL.1.html">TRACKER3-SPARQL</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>