<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>tpm2tss-genkey(1) – generate TPM keys for tpm2-tss-engine</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/tpm2-tss-engine-tools">tpm2-tss-engine-tools_1.2.0-4_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       <b><a href="../man1/tpm2tss-genkey.1.html">tpm2tss-genkey</a></b>(1) – generate TPM keys for tpm2-tss-engine

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>tpm2tss-genkey</b> [<u>options</u>] &lt;<u>filename</u>&gt;

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>tpm2tss-genkey</b>  creates  a key inside a TPM 2.0 connected via the tpm2tss software stack.  Those keys may
       be an RSA key for decryption or signing or an ECC key for ECDSA signatures.

       The tool respects the OPENSSL_CONF option for specifying engine specific control parameters.  See  <a href="../man5/man.5.html">man</a>(5)
       config for details on openssl config files.

</pre><h4><b>ARGUMENTS</b></h4><pre>
       The  tpm2tss-genkey  command expects a filename for storing the resulting TPM key information.  This file
       can then be loaded with OpenSSL using openssl pkeyutl -engine tpm2tss -keyform engine -inkey &lt;filename&gt;.

</pre><h4><b>OPTIONS</b></h4><pre>
       • -a &lt;algorithm&gt;, --alg &lt;algorithm&gt;: The public key algorithm (rsa, ecdsa) (default: rsa)

       • -c &lt;curve&gt;, --curve &lt;curve&gt;: If alg ecdsa is chosen, the curve for ecc (default: nist_p256)

       • -u &lt;file&gt;, --public &lt;file&gt;: Public key (TPM2B_PUBLIC) to be imported.  Requires -r.

       • -r &lt;file&gt;, --private &lt;file&gt;: The (encrypted) private key (TPM2B_PRIVATE) to be imported.  Requires -u.

       • -e &lt;exponent&gt;, --exponent &lt;exponent&gt;: If alg rsa is chosen, the exponent for rsa (default: 65537)

       • -h, --help: Print help

       • -o &lt;password&gt;, --ownerpw &lt;password&gt;: Password for the owner hierarchy (default:  none)  Openssl  Config
         control command: SET_OWNERAUTH

       • -p &lt;password&gt;, --password &lt;password&gt;: Password for the created key (default: none)

       • -P &lt;handle&gt;, --parent &lt;handle&gt;: Specific handle for the parent key (default: none)

       • -s &lt;keysize&gt;, --keysize &lt;keysize&gt;: If alg rsa is chosen, the key size in bits (default: 2048)

       • -v, --verbose: Print verbose messages

       • -W  &lt;password&gt;,  --parentpw  &lt;password&gt;:  Password  for  the  parent key (default: none) Openssl Config
         control command: SET_PARENTAUTH

       • -t &lt;tcti-conf&gt;, --tcti &lt;tcti-conf&gt;: TCTI Configuration string (default: none)  Openssl  Config  control
         command: SET_TCTI

</pre><h4><b>EXAMPLES</b></h4><pre>
       Engine information can be retrieved using:

              $ openssl engine -t -c tpm2tss

       The  following  sequence of commands creates an RSA key using the TPM, exports the public key, encrypts a
       data file and decrypts it using the TPM:

              $ tpm2tss-genkey -a rsa -s 2048 mykey
              $ openssl rsa -engine tpm2tss -inform engine -in mykey -pubout -outform pem -out mykey.pub
              $ openssl pkeyutl -pubin -inkey mykey.pub -in mydata -encrypt -out mycipher
              $ openssl pkeyutl -engine tpm2tss -keyform engine -inkey mykey -decrypt -in mycipher -out mydata

       The following sequence of commands creates an RSA key using the TPM, exports the public key, signs a data
       file using the TPM and validates the signature:

              $ tpm2tss-genkey -a rsa -s 2048 mykey
              $ openssl rsa -engine tpm2tss -inform engine -in mykey -pubout -outform pem -out mykey.pub
              $ openssl pkeyutl -engine tpm2tss -keyform engine -inkey mykey -sign -in mydata -out mysig
              $ openssl pkeyutl -engine tpm2tss -keyform engine -inkey mykey -verify -in mydata -sigfile mysig

       The following sequence of commands creates an ECDSA key using the TPM, exports the public  key,  signs  a
       data file using the TPM and validates the signature:

              $ tpm2tss-genkey -a ecdsa -c nist_p256 mykey
              $ openssl pkeyutl -engine tpm2tss -keyform engine -inkey mykey -sign -in mydata -out mysig
              $ openssl pkeyutl -engine tpm2tss -keyform engine -inkey mykey -verify -in mydata -sigfile mysig

</pre><h4><b>RETURNS</b></h4><pre>
       0 on success or 1 on failure.

   <b>AUTHOR</b>
       Written by Andreas Fuchs.

   <b>COPYRIGHT</b>
       tpm2tss  is  Copyright  (C)  2017-2018 Fraunhofer SIT sponsored by Infineon Technologies AG.  License BSD
       3-clause.

   <b>SEE</b> <b>ALSO</b>
       <a href="../man1/openssl.1.html">openssl</a>(1)

tpm2-tss-engine                                   OCTOBER 2020                                 <u><a href="../man1/tpm2tss-genkey.1.html">tpm2tss-genkey</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>