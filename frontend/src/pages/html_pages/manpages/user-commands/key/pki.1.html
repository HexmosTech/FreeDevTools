<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>pki - Simple public key infrastructure (PKI) management tool</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/strongswan-pki">strongswan-pki_5.9.13-2ubuntu4_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       pki - Simple public key infrastructure (PKI) management tool

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>pki</b> <u>command</u> [<u>option</u> ...]

       <b>pki</b> <b>-h</b> | <b>--help</b>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>pki</b> is a suite of commands that allow you to manage a simple public key infrastructure (PKI).

       Generate  RSA and ECDSA key pairs, create PKCS#10 certificate requests containing subjectAltNames, create
       X.509 self-signed end-entity and root CA certificates, issue end-entity and intermediate CA  certificates
       signed  by  the  private  key of a CA and containing subjectAltNames, CRL distribution points and URIs of
       OCSP servers. You can  also  extract  raw  public  keys  from  private  keys,  certificate  requests  and
       certificates and compute two kinds of SHA-1-based key IDs.

       The  <b>pki</b>  command  also  supports  certificate  enrollment via the <b>Simple</b> <b>Certificate</b> <b>Enrollment</b> <b>Protocol</b>
       (SCEP) as defined by RFC 8894, replacing the obsoleted <b>ipsec</b> <b>scepclient</b> tool. Additionally the <b>Enrollment</b>
       <b>over</b> <b>Secure</b> <b>Transport</b> (EST) protocol (RFC 7030) is supported, too.

       The latest feature is an <b>Online</b> <b>Certificate</b> <b>Status</b> <b>Protocol</b> (OCSP) responder  as  defined  by  RFC  6960,
       interoperating with an <b>OpenXPKI</b> server by directly accessing its internal certificate datebase.

</pre><h4><b>COMMANDS</b></h4><pre>
       <b>-h,</b> <b>--help</b>
              Prints usage information and a short summary of the available commands.

       <b>-g,</b> <b>--gen</b>
              Generate a new private key.

       <b>-s,</b> <b>--self</b>
              Create a self-signed certificate.

       <b>-i,</b> <b>--issue</b>
              Issue a certificate using a CA certificate and key.

       <b>-c,</b> <b>--signcrl</b>
              Issue a CRL using a CA certificate and key.

       <b>-z,</b> <b>--acert</b>
              Issue an attribute certificate.

       <b>-r,</b> <b>--req</b>
              Create a PKCS#10 certificate request.

       <b>-7,</b> <b>--pkcs7</b>
              Provides PKCS#7 wrap/unwrap functions.

       <b>-k,</b> <b>--keyid</b>
              Calculate key identifiers of a key or certificate.

       <b>-a,</b> <b>--print</b>
              Print a credential (key, certificate etc.) in human readable form.

       <b>-d,</b> <b>--dn</b>
              Extract the subject DN of an X.509 certificate.

       <b>-p,</b> <b>--pub</b>
              Extract a public key from a private key or certificate.

       <b>-v,</b> <b>--verify</b>
              Verify a certificate using a CA certificate.

       <b>-S,</b> <b>--scep</b>
              Enroll an X.509 certificate with a SCEP server.

       <b>-C,</b> <b>--scepca</b>
              Get CA [and RA] certificate[s] from a SCEP server.

       <b>-E,</b> <b>--est</b>
              Enroll an X.509 certificate with an EST server.

       <b>-e,</b> <b>--estca</b>
              Get CA certificate[s] from an EST server.

       <b>-o,</b> <b>--ocsp</b>
              OCSP request parser and OCSP responder.

</pre><h4><b>EXAMPLES</b></h4><pre>
   <b>Generating</b> <b>a</b> <b>CA</b> <b>Certificate</b>
       The first step is to generate a private key using the <b>--gen</b> command. By default this generates a 2048-bit
       RSA key.

         pki --gen &gt; ca_key.der

       This  key  is  used to create the self-signed CA certificate, using the <b>--self</b> command. The distinguished
       name should be adjusted to your needs.

         pki --self --ca --in ca_key.der \
             --dn "C=CH, O=strongSwan, CN=strongSwan CA" &gt; ca_cert.der

   <b>Generating</b> <b>End-Entity</b> <b>Certificates</b>
       With the root CA certificate and key at hand end-entity certificates  for  clients  and  servers  can  be
       issued. Similarly intermediate CA certificates can be issued, which in turn can issue other certificates.
       To generate a certificate for a server, we start by generating a private key.

         pki --gen &gt; server_key.der

       The public key will be included in the certificate so lets extract that from the private key.

         pki --pub --in server_key.der &gt; server_pub.der

       The  following  command  will  use  the  CA certificate and private key to issue the certificate for this
       server. Adjust the distinguished name, subjectAltName(s) and flags as needed  (check  <b>pki</b> <b>--<a href="../man8/issue.8.html">issue</a></b>(8)  for
       more options).

         pki --issue --in server_pub.der --cacert ca_cert.der \
             --cakey ca_key.der --dn "C=CH, O=strongSwan, CN=VPN Server" \
             --san vpn.strongswan.org --flag serverAuth &gt; server_cert.der

       Instead of storing the public key in a separate file, the output of <b>--pub</b> may also be piped directly into
       the above command.

   <b>Generating</b> <b>Certificate</b> <b>Revocation</b> <b>Lists</b> <b>(CRL)</b>
       If end-entity certificates have to be revoked, CRLs may be generated using the <b>--signcrl</b> command.

         pki --signcrl --cacert ca_cert.der --cakey ca_key.der \
             --reason superseded --cert server_cert.der &gt; crl.der

       The  certificate  given  with  --cacert must be either a CA certificate or a certificate with the <u>crlSign</u>
       extended key usage (--flag crlSign). URIs to CRLs may be included in issued certificates with  the  --crl
       option.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b>pki</b> <b>--<a href="../man1/gen.1.html">gen</a></b>(1),    <b>pki</b> <b>--<a href="../man1/self.1.html">self</a></b>(1),    <b>pki</b> <b>--<a href="../man1/issue.1.html">issue</a></b>(1),    <b>pki</b> <b>--<a href="../man1/signcrl.1.html">signcrl</a></b>(1),   <b>pki</b> <b>--<a href="../man1/acert.1.html">acert</a></b>(1),   <b>pki</b> <b>--<a href="../man1/req.1.html">req</a></b>(1),
       <b>pki</b> <b>--<a href="../man1/pkcs7.1.html">pkcs7</a></b>(1), <b>pki</b> <b>--<a href="../man1/keyid.1.html">keyid</a></b>(1), <b>pki</b> <b>--<a href="../man1/print.1.html">print</a></b>(1), <b>pki</b> <b>--<a href="../man1/dn.1.html">dn</a></b>(1), <b>pki</b> <b>--<a href="../man1/pub.1.html">pub</a></b>(1), <b>pki</b> <b>--<a href="../man1/verify.1.html">verify</a></b>(1), <b>pki</b> <b>--<a href="../man1/scep.1.html">scep</a></b>(1)
       <b>pki</b> <b>--<a href="../man1/scepca.1.html">scepca</a></b>(1) <b>pki</b> <b>--<a href="../man1/est.1.html">est</a></b>(1) <b>pki</b> <b>--<a href="../man1/estca.1.html">estca</a></b>(1) <b>pki</b> <b>--<a href="../man1/ocsp.1.html">ocsp</a></b>(1)

5.9.13                                             2023-10-20                                             <u><a href="../man1/PKI.1.html">PKI</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>