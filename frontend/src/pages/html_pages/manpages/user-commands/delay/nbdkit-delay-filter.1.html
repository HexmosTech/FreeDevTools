<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>nbdkit-delay-filter - nbdkit delay filter</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/nbdkit">nbdkit_1.42.2-1ubuntu1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       nbdkit-delay-filter - nbdkit delay filter

</pre><h4><b>SYNOPSIS</b></h4><pre>
        nbdkit --filter=delay plugin [plugin-args ...]
                 delay-read=DELAY
                 delay-write=DELAY
                 delay-zero=DELAY
                 delay-trim=DELAY
                 delay-extents=DELAY
                 delay-cache=DELAY
                 delay-open=DELAY
                 delay-close=DELAY
                 delay-fast-zero=BOOL

        nbdkit --filter=delay plugin rdelay=DELAY wdelay=DELAY [plugin-args...]

</pre><h4><b>DESCRIPTION</b></h4><pre>
       "nbdkit-delay-filter" is a filter for <b><a href="../man1/nbdkit.1.html">nbdkit</a></b>(1) that delays read and write requests.  This is used to
       simulate a slow or remote server, or to test certain kinds of race conditions in Linux.  To limit server
       bandwidth use <b><a href="../man1/nbdkit-rate-filter.1.html">nbdkit-rate-filter</a></b>(1) instead.  To simulate a spinning disk see <b><a href="../man1/nbdkit-spinning-filter.1.html">nbdkit-spinning-filter</a></b>(1).

</pre><h4><b>EXAMPLES</b></h4><pre>
       Delays reads and writes by 100ms:

        nbdkit --filter=delay file disk.img rdelay=100ms wdelay=100ms

       Delay only zero operations by 1 second, nothing else is affected:

        nbdkit --filter=delay file disk.img delay-zero=1

</pre><h4><b>DELAY</b> <b>FORMAT</b></h4><pre>
       In nbdkit ≥ 1.40, <b><a href="../man3/nbdkit_parse_delay.3.html">nbdkit_parse_delay</a></b>(3) is used to parse the delay parameters, so a wide variety of
       formats are accepted, such as:

       delay-read=1.5
       delay-write=100ms
       delay-zero=1.2μs
       delay-trim=1000ns

       In nbdkit ≤ 1.38, only a whole number of seconds, or a whole number of milliseconds (if suffixed by "ms")
       were allowed.

</pre><h4><b>PARAMETERS</b></h4><pre>
       <b>rdelay=</b>DELAY
       <b>delay-read=</b>DELAY
           Delay read operations by "DELAY".

           The two forms "rdelay" and "delay-read" work identically.

       <b>delay-write=</b>DELAY
           Delay write operations by "DELAY".

       <b>delay-zero=</b>DELAY
           (nbdkit ≥ 1.10)

           Delay zero operations by "DELAY".  See also <b>delay-fast-zero</b>.

       <b>delay-trim=</b>DELAY
           (nbdkit ≥ 1.10)

           Delay trim/discard operations by "DELAY".

       <b>delay-extents=</b>DELAY
           (nbdkit ≥ 1.12)

           Delay block status (extents) operations by "DELAY".

       <b>delay-cache=</b>DELAY
           (nbdkit ≥ 1.14)

           Delay advisory cache operations by "DELAY".

       <b>wdelay=</b>DELAY
           Delay write, zero and trim operations by "DELAY".

       <b>delay-fast-zero=</b>BOOL
           (nbdkit ≥ 1.16)

           The NBD specification documents an extension called fast zero, in which the client may request that a
           server  should  reply with "ENOTSUP" as soon as possible if the zero operation offers no real speedup
           over a corresponding write.  By default, this parameter is true, and fast zero requests are  serviced
           by  the  plugin  after  the same delay as any other zero request; but setting this parameter to false
           instantly fails a fast zero response without waiting for or consulting the plugin.

       <b>delay-open=</b>DELAY
           (nbdkit ≥ 1.28)

           Delay open (client connection) by "DELAY".

       <b>delay-close=</b>DELAY
           (nbdkit ≥ 1.28)

           Delay close (client disconnection) by "DELAY".  This can also cause server shutdown to be delayed  if
           clients  are  connected  at  the  time.   This only affects clients that gracefully disconnect (using
           "NBD_CMD_DISC" / libnbd function <b><a href="../man3/nbd_shutdown.3.html">nbd_shutdown</a></b>(3)).  Clients that abruptly disconnect from the  server
           cannot be delayed.

</pre><h4><b>FILES</b></h4><pre>
       <u>$filterdir/nbdkit-delay-filter.so</u>
           The filter.

           Use "nbdkit --dump-config" to find the location of $filterdir.

</pre><h4><b>VERSION</b></h4><pre>
       "nbdkit-delay-filter"  first  appeared  in  nbdkit 1.2, based on earlier "rdelay" and "wdelay" options in
       <b><a href="../man1/nbdkit-file-plugin.1.html">nbdkit-file-plugin</a></b>(1).

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man1/nbdkit.1.html">nbdkit</a></b>(1), <b><a href="../man3/nbdkit-filter.3.html">nbdkit-filter</a></b>(3),  <b><a href="../man1/nbdkit-pause-filter.1.html">nbdkit-pause-filter</a></b>(1),  <b><a href="../man1/nbdkit-rate-filter.1.html">nbdkit-rate-filter</a></b>(1),  <b><a href="../man1/nbdkit-spinning-filter.1.html">nbdkit-spinning-filter</a></b>(1),
       <b><a href="../man3/nbdkit_parse_delay.3.html">nbdkit_parse_delay</a></b>(3).

</pre><h4><b>AUTHORS</b></h4><pre>
       Richard W.M. Jones

</pre><h4><b>COPYRIGHT</b></h4><pre>
       Copyright Red Hat

</pre><h4><b>LICENSE</b></h4><pre>
       Redistribution  and  use in source and binary forms, with or without modification, are permitted provided
       that the following conditions are met:

       •   Redistributions of source code must retain the above copyright notice, this list  of  conditions  and
           the following disclaimer.

       •   Redistributions in binary form must reproduce the above copyright notice, this list of conditions and
           the following disclaimer in the documentation and/or other materials provided with the distribution.

       •   Neither  the  name  of  Red  Hat  nor the names of its contributors may be used to endorse or promote
           products derived from this software without specific prior written permission.

       THIS SOFTWARE IS PROVIDED BY RED HAT AND CONTRIBUTORS ''AS IS'' AND ANY EXPRESS  OR  IMPLIED  WARRANTIES,
       INCLUDING,  BUT  NOT  LIMITED  TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
       PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL RED HAT OR CONTRIBUTORS BE LIABLE  FOR  ANY  DIRECT,  INDIRECT,
       INCIDENTAL,  SPECIAL,  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF
       SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
       ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT  LIABILITY,  OR  TORT  (INCLUDING  NEGLIGENCE  OR
       OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH
       DAMAGE.

nbdkit-1.42.2                                      2025-04-02                             <u><a href="../man1/nbdkit-delay-filter.1.html">nbdkit-delay-filter</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>