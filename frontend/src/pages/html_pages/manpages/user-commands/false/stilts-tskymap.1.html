<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>stilts-tskymap - Calculates sky density maps</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/stilts">stilts_3.5.1-2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       stilts-tskymap - Calculates sky density maps

</pre><h4><b>SYNOPSIS</b></h4><pre>

       <b>stilts</b> <b>tskymap</b> [ifmt=<u>&lt;in-format&gt;</u>] [istream=<u>true|false</u>] [in=<u>&lt;table&gt;</u>] [icmd=<u>&lt;cmds&gt;</u>] [ocmd=<u>&lt;cmds&gt;</u>]
                      [omode=<u>out|meta|stats|count|checksum|cgi|discard|topcat|samp|tosql|gui</u>] [out=<u>&lt;out-table&gt;</u>]
                      [ofmt=<u>&lt;out-format&gt;</u>] [lon=<u>&lt;expr/deg&gt;</u>] [lat=<u>&lt;expr/deg&gt;</u>]
                      [tiling=<u>hpx&lt;K&gt;|healpixnest&lt;K&gt;|healpixring&lt;K&gt;|htm&lt;K&gt;</u>] [count=<u>true|false</u>]
                      [cols=<u>&lt;expr&gt;[;&lt;combiner&gt;[;&lt;name&gt;]]</u> <u>...</u>] [combine=<u>sum|sum-per-unit|count|count-per-</u>
                      <u>unit|mean|median|Q1|Q3|min|max|stdev|stdev_pop|hit</u>]
                      [perunit=<u>steradian|degree2|arcmin2|arcsec2|mas2|uas2</u>] [complete=<u>true|false</u>]
                      [runner=<u>sequential|parallel|parallel&lt;n&gt;|partest</u>]

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <u>tskymap</u>  calculates  a  weighted  density  map  (or,  to put it another way, a histogram) on the sky from
       columns of an input table. The sky is divided up into some discrete set of tiles according to a specified
       tessellation scheme (currently HEALPix or HTM are supported), and the required quantities are  aggregated
       into  bins corresponding to these tiles. The output table has a column giving the pixel index identifying
       each tile, plus one or more columns each representing an aggregation of a quantity from the input table.

       By default the number of rows from the input table falling within each tile is included as the first col‐
       umn in the output table. But by specifying the <u>cols</u> and <u>combine</u> parameters you can add more columns  giv‐
       ing the sum, mean, median or other statistics of input table columns or expressions as well.

       The output table can then, for instance, be plotted using <u>plot2sky</u>'s <u>healpix</u> layer type (though an alter‐
       native is to do that plot directly using a <u>skydensity</u> layer).

       In  the case of HEALPix tiling, the result can also be output in a FITS file suitable for use by external
       applications that understand the semi-standard FITS-Healpix convention. Note in this  case,  for  maximum
       compatibility, the <u>fits-healpix</u> output format should in general be used.

       See also <u>tgridmap</u>, which does the same thing for N-dimensional grid geometry.

</pre><h4><b>OPTIONS</b></h4><pre>
       <b>ifmt=</b><u>&lt;in-format&gt;</u>
              Specifies the format of the input table as specified by parameter <u>in</u>. The known formats are listed
              in  SUN/256. This flag can be used if you know what format your table is in. If it has the special
              value <u>(auto)</u> (the default), then an attempt will be made to detect the format of the  table  auto‐
              matically.  This cannot always be done correctly however, in which case the program will exit with
              an error explaining which formats were attempted. This parameter is ignored  for  scheme-specified
              tables.

       <b>istream=</b><u>true|false</u>
              If  set true, the input table specified by the <u>in</u> parameter will be read as a stream. It is neces‐
              sary to give the <u>ifmt</u> parameter in this case. Depending on the required operations and  processing
              mode,  this  may  cause  the  read  to fail (sometimes it is necessary to read the table more than
              once). It is not normally necessary to set this flag; in most cases the data will be streamed  au‐
              tomatically  if that is the best thing to do. However it can sometimes result in less resource us‐
              age when processing large files in certain formats (such as VOTable). This  parameter  is  ignored
              for scheme-specified tables.

       <b>in=</b><u>&lt;table&gt;</u>
              The location of the input table. This may take one of the following forms:

                * A filename.

                * A URL.

                * The special value "<u>-</u>", meaning standard input. In this case the input format must be given ex‐
                  plicitly using the <u>ifmt</u> parameter. Note that not all formats can be streamed in this way.

                * A scheme specification of the form <u>:&lt;scheme-name&gt;:&lt;scheme-args&gt;</u>.

                * A  system command line with either a "<u>&lt;</u>" character at the start, or a "<u>|</u>" character at the end
                  ("<u>&lt;syscmd</u>" or "<u>syscmd|</u>"). This executes the given pipeline and reads from its standard output.
                  This will probably only work on unix-like systems.
               In any case, compressed data in one of the supported compression formats (gzip, Unix compress  or
              bzip2) will be decompressed transparently.

       <b>icmd=</b><u>&lt;cmds&gt;</u>
              Specifies  processing  to be performed on the input table as specified by parameter <u>in</u>, before any
              other processing has taken place. The value of this parameter is one or more of  the  filter  com‐
              mands described in SUN/256. If more than one is given, they must be separated by semicolon charac‐
              ters  (";").  This parameter can be repeated multiple times on the same command line to build up a
              list of processing steps. The sequence of commands  given  in  this  way  defines  the  processing
              pipeline which is performed on the table.

              Commands  may  alternatively  be  supplied in an external file, by using the indirection character
              '<u>@</u>'. Thus a value of "<u>@filename</u>" causes the file <u>filename</u> to be read for a list of filter commands
              to execute. The commands in the file may be separated by newline characters and/or semicolons, and
              lines which are blank or which start with a '<u>#</u>' character are ignored. A backslash character '<u>\fR'</u>
              <u>at</u> <u>the</u> <u>end</u> <u>of</u> <u>a</u> <u>line</u> <u>joins</u> <u>it</u> <u>with</u> <u>the</u> <u>following</u> <u>line.</u>

       <b>ocmd=</b><u>&lt;cmds&gt;</u>
              Specifies processing to be performed on the output table, after all  other  processing  has  taken
              place.  The value of this parameter is one or more of the filter commands described in SUN/256. If
              more than one is given, they must be separated by semicolon characters (";"). This  parameter  can
              be  repeated  multiple  times on the same command line to build up a list of processing steps. The
              sequence of commands given in this way defines the processing pipeline which is performed  on  the
              table.

              Commands  may  alternatively  be  supplied in an external file, by using the indirection character
              '<u>@</u>'. Thus a value of "<u>@filename</u>" causes the file <u>filename</u> to be read for a list of filter commands
              to execute. The commands in the file may be separated by newline characters and/or semicolons, and
              lines which are blank or which start with a '<u>#</u>' character are ignored. A backslash character '<u>\fR'</u>
              <u>at</u> <u>the</u> <u>end</u> <u>of</u> <u>a</u> <u>line</u> <u>joins</u> <u>it</u> <u>with</u> <u>the</u> <u>following</u> <u>line.</u>

       <b>omode=</b><u>out|meta|stats|count|checksum|cgi|discard|topcat|samp|tosql|gui</u>
              The mode in which the result table will be output. The default mode is <u>out</u>, which means  that  the
              result  will be written as a new table to disk or elsewhere, as determined by the <u>out</u> and <u>ofmt</u> pa‐
              rameters. However, there are other possibilities, which correspond to uses to which a table can be
              put other than outputting it, such as displaying metadata, calculating statistics, or populating a
              table in an SQL database. For some values of this parameter, additional  parameters  (<u>&lt;mode-args&gt;</u>)
              are required to determine the exact behaviour.

              Possible values are

                * <u>out</u>

                * <u>meta</u>

                * <u>stats</u>

                * <u>count</u>

                * <u>checksum</u>

                * <u>cgi</u>

                * <u>discard</u>

                * <u>topcat</u>

                * <u>samp</u>

                * <u>tosql</u>

                * <u>gui</u>
               Use the <u>help=omode</u> flag or see SUN/256 for more information.

       <b>out=</b><u>&lt;out-table&gt;</u>
              The  location  of  the output table. This is usually a filename to write to. If it is equal to the
              special value "-" (the default) the output table will be written to standard output.

              This parameter must only be given if <u>omode</u> has its default value of "<u>out</u>".

       <b>ofmt=</b><u>&lt;out-format&gt;</u>
              Specifies the format in which the output table will be written (one  of  the  ones  in  SUN/256  -
              matching  is  case-insensitive  and you can use just the first few letters). If it has the special
              value "<u>(auto)</u>" (the default), then the output filename will be examined to try to guess what  sort
              of  file  is  required  usually by looking at the extension. If it's not obvious from the filename
              what output format is intended, an error will result.

              This parameter must only be given if <u>omode</u> has its default value of "<u>out</u>".

       <b>lon=</b><u>&lt;expr/deg&gt;</u>
              Longitude in degrees for the position of each row in the input table. This may simply be a  column
              name,  or it may be an algebraic expression as explained in SUN/256. The sky system used here will
              determine the grid on which the output map is built.

       <b>lat=</b><u>&lt;expr/deg&gt;</u>
              Latitude in degrees for the position of each row in the input table. This may simply be  a  column
              name,  or it may be an algebraic expression as explained in SUN/256. The sky system used here will
              determine the grid on which the output map is built.

       <b>tiling=</b><u>hpx&lt;K&gt;|healpixnest&lt;K&gt;|healpixring&lt;K&gt;|htm&lt;K&gt;</u>
              Describes the sky tiling scheme that is in use. One of the following values may be used:

                * <u>hpxK</u>: alias for <u>healpixnestK</u>

                * <u>healpixnestK</u>: HEALPix using the Nest scheme at order <u>K</u>

                * <u>healpixringK</u>: HEALPix using the Ring scheme at order <u>K</u>

                * <u>htmK</u>: Hierarchical Triangular Mesh at level <u>K</u>
               So for instance <u>hpx5</u> or <u>healpixnest5</u> would both indicate the HEALPix NEST tiling scheme at  order
              5.

              At  level  K,  there  are  12*4^K HEALPix pixels, or 8*4^K HTM pixels on the sky. More information
              about these tiling schemes can be found at the HEALPix and HTM web sites.

       <b>count=</b><u>true|false</u>
              Controls whether a COUNT column is added to the output table along with any other columns that may
              have been requested. If included, this reports the number of rows from the input table  that  fell
              within the corresponding bin.

       <b>cols=</b><u>&lt;expr&gt;[;&lt;combiner&gt;[;&lt;name&gt;]]</u> <u>...</u>
              Defines  the  quantities  to  be calculated. The value is a space-separated list of items, one for
              each aggregated column in the output table.

              Each item is composed of one, two or three tokens, separated by semicolon ("<u>;</u>") characters:

                * <u>&lt;expr&gt;</u>: (required) column name or expression using the expression language for the quantity to
                  be aggregated.

                * <u>&lt;combiner&gt;</u>: (optional) combination method, using the same options as for the  <u>combine</u>  parame‐
                  ter. If omitted, the value specified for that parameter will be used.

                * <u>&lt;name&gt;</u>: (optional) name of output column; if omitted, the <u>&lt;expr&gt;</u> value (perhaps somewhat sani‐
                  tised) will be used.
               It is often sufficient just to supply a space-separated list of input table column names for this
              parameter,  but  the  additional syntax may be required for instance if it's required to calculate
              both a sum and mean of the same input column.

       <b>combine=</b><u>sum|sum-per-unit|count|count-per-unit|mean|median|Q1|Q3|min|max|stdev|stdev_pop|hit</u>
              Defines the default way that values contributing to the same density map bin are combined together
              to produce the value assigned to that bin. Possible values are:

                * <u>sum</u>: the sum of all the combined values per bin

                * <u>sum-per-unit</u>: the sum of all the combined values per unit of bin size

                * <u>count</u>: the number of non-blank values per bin (weight is ignored)

                * <u>count-per-unit</u>: the number of non-blank values per unit of bin size (weight is ignored)

                * <u>mean</u>: the mean of the combined values

                * <u>median</u>: the median

                * <u>Q1</u>: first quartile

                * <u>Q3</u>: third quartile

                * <u>min</u>: the minimum of all the combined values

                * <u>max</u>: the maximum of all the combined values

                * <u>stdev</u>: the sample standard deviation of the combined values

                * <u>stdev_pop</u>: the population standard deviation of the combined values

                * <u>hit</u>: 1 if any values present, NaN otherwise (weight is ignored)

                * <u>Q.nnn</u>: quantile nnn (e.g. Q.05 is the fifth percentile)

              For density-like values (<u>count-per-unit</u>, <u>sum-per-unit</u>) the scaling is additionally  influenced  by
              the <u>perunit</u> parameter.

              Note this value may be overridden on a per-column basis by the <u>cols</u> parameter.

       <b>perunit=</b><u>steradian|degree2|arcmin2|arcsec2|mas2|uas2</u>
              Defines  the  unit of sky area used for scaling density-like combinations (e.g. <u>combine</u>=<u>count-per-</u>
              <u>unit</u> or <u>sum-per-unit</u>). If the combination mode is calculating values per unit area this configures
              the area scale in question. For non-density-like combination modes (e.g. <u>combine</u>=<u>sum</u> or  <u>mean</u>)  it
              has no effect.

              Possible values are:

                * <u>steradian</u>: steradian

                * <u>degree2</u>: square degree

                * <u>arcmin2</u>: square arcminute

                * <u>arcsec2</u>: square arcsecond

                * <u>mas2</u>: square milliarcsec

                * <u>uas2</u>: square microarcsec

       <b>complete=</b><u>true|false</u>
              Determines whether the output table contains a row for every pixel in the tiling, or only the rows
              for pixels in which some of the input data fell.

              The value of this parameter may affect performance as well as output. If you know that most pixels
              on  the sky will be covered, it's probably a good idea to set this true, and if you know that only
              a small patch of sky will be covered, it's better to set it false.

       <b>runner=</b><u>sequential|parallel|parallel&lt;n&gt;|partest</u>
              Selects the threading implementation, i.e. to what extent processing is done in parallel. The  op‐
              tions are currently:

                * <u>sequential</u>: runs using only a single thread

                * <u>parallel</u>:  runs  using multiple threads for large tables, with parallelism given by the number
                  of available processors

                * <u>parallel&lt;n&gt;</u>: runs using multiple threads for large tables, with parallelism given by the  sup‐
                  plied value <u>&lt;n&gt;</u>

                * <u>partest</u>:  runs  using  multiple  threads even when tables are small (only intended for testing
                  purposes)

              Using parallel processing can speed up execution considerably; however, depending on the I/O oper‐
              ations required, it can also slow it down by disrupting patterns of disk access. If the content of
              a file is on a solid state disk, or is already in cache for instance because a similar command has
              been run recently, then <u>parallel</u> will probably be faster. However, if the data is being  read  di‐
              rectly  from  a  spinning disk, for instance because the file is too large to fit in RAM, then <u>se‐</u>
              <u>quential</u> or <u>parallel&lt;n&gt;</u> with a small <u>&lt;n&gt;</u> may be faster.

              The value of this parameter should make only very tiny differences to the output table. If you no‐
              tice significant discrepancies <b>please</b> <b>report</b> <b>them</b>.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man1/stilts.1.html">stilts</a></b>(1)

       If the package stilts-doc is installed, the full documentation <b>SUN/256</b> is available in HTML format:
       file:///usr/share/doc/stilts/sun256/index.html

</pre><h4><b>VERSION</b></h4><pre>
       STILTS version 3.5.1-debian

       This is the Debian version of Stilts, which lack the support of some file formats and network  protocols.
       For differences see
       file:///usr/share/doc/stilts/README.Debian

</pre><h4><b>AUTHOR</b></h4><pre>
       Mark Taylor (Bristol University)

                                                    Mar 2017                                   <u><a href="../man1/STILTS-TSKYMAP.1.html">STILTS-TSKYMAP</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>