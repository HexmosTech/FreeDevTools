<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>stilts-tgridmap - Calculates N-dimensional density maps</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/stilts">stilts_3.5.1-2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       stilts-tgridmap - Calculates N-dimensional density maps

</pre><h4><b>SYNOPSIS</b></h4><pre>

       <b>stilts</b> <b>tgridmap</b> [ifmt=<u>&lt;in-format&gt;</u>] [istream=<u>true|false</u>] [in=<u>&lt;table&gt;</u>] [icmd=<u>&lt;cmds&gt;</u>] [ocmd=<u>&lt;cmds&gt;</u>]
                       [omode=<u>out|meta|stats|count|checksum|cgi|discard|topcat|samp|tosql|gui</u>] [out=<u>&lt;out-table&gt;</u>]
                       [ofmt=<u>&lt;out-format&gt;</u>] [coords=<u>&lt;expr&gt;</u> <u>...</u>] [logs=<u>true|false</u> <u>...</u>] [bounds=<u>[&lt;lo&gt;]:[&lt;hi&gt;]</u> <u>...</u>]
                       [binsizes=<u>&lt;size&gt;</u> <u>...</u>] [nbins=<u>&lt;num&gt;</u> <u>...</u>] [cols=<u>&lt;expr&gt;[;&lt;combiner&gt;[;&lt;name&gt;]]</u> <u>...</u>]
                       [combine=<u>sum|sum-per-unit|count|count-per-</u>
                       <u>unit|mean|median|Q1|Q3|min|max|stdev|stdev_pop|hit</u>] [sparse=<u>true|false</u>]
                       [runner=<u>sequential|parallel|parallel&lt;n&gt;|partest</u>]

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <u>tgridmap</u>  scans an input table to create one or more N-dimensional density maps, or equivalently N-dimen‐
       sional histograms, of the values in an input table, and outputs the result as an, optionally sparse,  ta‐
       ble  containing a row for each grid cell. The maps/histograms can optionally be weighted by some quantity
       from the input table, and various options such as summing, averaging and counting are available  for  ag‐
       gregation of inputs into the output bins.

       The  supplied <u>coords</u> parameter defines which N numeric columns of the input table form the coordinates of
       the bin grid, and the <u>cols</u> parameter defines which quantities are aggregated into each  bin.  Either  the
       <u>binsizes</u>  or  <u>nbins</u> parameter must be supplied to define the extents of the bins on each axis. The output
       table contains a row for each bin, with columns giving the central (and upper/lower bound) values of each
       grid coordinate, and a column for each aggregated value. The rows are output in  first-coordinate-slowest
       sequence,  and  the  <u>sparse</u> parameter determines whether a row is written for every cell in the hypercube
       defined by the grid dimensions, or only for those cells with non-blank data.

       The tabular form of the output may not be the most appropriate or compact way to write a density map, es‐
       pecially for multi-dimensional grids, but it means the output can be manipulated later  by  other  STILTS
       commands  or  by TOPCAT. To do a similar job with more compact output, see <u>tcube</u>. See also <u>tskymap</u>, which
       does the same thing for sky geometry (and is probably a better choice if you find  yourself  accumulating
       onto a longitude-latitude grid).

</pre><h4><b>OPTIONS</b></h4><pre>
       <b>ifmt=</b><u>&lt;in-format&gt;</u>
              Specifies the format of the input table as specified by parameter <u>in</u>. The known formats are listed
              in  SUN/256. This flag can be used if you know what format your table is in. If it has the special
              value <u>(auto)</u> (the default), then an attempt will be made to detect the format of the  table  auto‐
              matically.  This cannot always be done correctly however, in which case the program will exit with
              an error explaining which formats were attempted. This parameter is ignored  for  scheme-specified
              tables.

       <b>istream=</b><u>true|false</u>
              If  set true, the input table specified by the <u>in</u> parameter will be read as a stream. It is neces‐
              sary to give the <u>ifmt</u> parameter in this case. Depending on the required operations and  processing
              mode,  this  may  cause  the  read  to fail (sometimes it is necessary to read the table more than
              once). It is not normally necessary to set this flag; in most cases the data will be streamed  au‐
              tomatically  if that is the best thing to do. However it can sometimes result in less resource us‐
              age when processing large files in certain formats (such as VOTable). This  parameter  is  ignored
              for scheme-specified tables.

       <b>in=</b><u>&lt;table&gt;</u>
              The location of the input table. This may take one of the following forms:

                * A filename.

                * A URL.

                * The special value "<u>-</u>", meaning standard input. In this case the input format must be given ex‐
                  plicitly using the <u>ifmt</u> parameter. Note that not all formats can be streamed in this way.

                * A scheme specification of the form <u>:&lt;scheme-name&gt;:&lt;scheme-args&gt;</u>.

                * A  system command line with either a "<u>&lt;</u>" character at the start, or a "<u>|</u>" character at the end
                  ("<u>&lt;syscmd</u>" or "<u>syscmd|</u>"). This executes the given pipeline and reads from its standard output.
                  This will probably only work on unix-like systems.
               In any case, compressed data in one of the supported compression formats (gzip, Unix compress  or
              bzip2) will be decompressed transparently.

       <b>icmd=</b><u>&lt;cmds&gt;</u>
              Specifies  processing  to be performed on the input table as specified by parameter <u>in</u>, before any
              other processing has taken place. The value of this parameter is one or more of  the  filter  com‐
              mands described in SUN/256. If more than one is given, they must be separated by semicolon charac‐
              ters  (";").  This parameter can be repeated multiple times on the same command line to build up a
              list of processing steps. The sequence of commands  given  in  this  way  defines  the  processing
              pipeline which is performed on the table.

              Commands  may  alternatively  be  supplied in an external file, by using the indirection character
              '<u>@</u>'. Thus a value of "<u>@filename</u>" causes the file <u>filename</u> to be read for a list of filter commands
              to execute. The commands in the file may be separated by newline characters and/or semicolons, and
              lines which are blank or which start with a '<u>#</u>' character are ignored. A backslash character '<u>\fR'</u>
              <u>at</u> <u>the</u> <u>end</u> <u>of</u> <u>a</u> <u>line</u> <u>joins</u> <u>it</u> <u>with</u> <u>the</u> <u>following</u> <u>line.</u>

       <b>ocmd=</b><u>&lt;cmds&gt;</u>
              Specifies processing to be performed on the output table, after all  other  processing  has  taken
              place.  The value of this parameter is one or more of the filter commands described in SUN/256. If
              more than one is given, they must be separated by semicolon characters (";"). This  parameter  can
              be  repeated  multiple  times on the same command line to build up a list of processing steps. The
              sequence of commands given in this way defines the processing pipeline which is performed  on  the
              table.

              Commands  may  alternatively  be  supplied in an external file, by using the indirection character
              '<u>@</u>'. Thus a value of "<u>@filename</u>" causes the file <u>filename</u> to be read for a list of filter commands
              to execute. The commands in the file may be separated by newline characters and/or semicolons, and
              lines which are blank or which start with a '<u>#</u>' character are ignored. A backslash character '<u>\fR'</u>
              <u>at</u> <u>the</u> <u>end</u> <u>of</u> <u>a</u> <u>line</u> <u>joins</u> <u>it</u> <u>with</u> <u>the</u> <u>following</u> <u>line.</u>

       <b>omode=</b><u>out|meta|stats|count|checksum|cgi|discard|topcat|samp|tosql|gui</u>
              The mode in which the result table will be output. The default mode is <u>out</u>, which means  that  the
              result  will be written as a new table to disk or elsewhere, as determined by the <u>out</u> and <u>ofmt</u> pa‐
              rameters. However, there are other possibilities, which correspond to uses to which a table can be
              put other than outputting it, such as displaying metadata, calculating statistics, or populating a
              table in an SQL database. For some values of this parameter, additional  parameters  (<u>&lt;mode-args&gt;</u>)
              are required to determine the exact behaviour.

              Possible values are

                * <u>out</u>

                * <u>meta</u>

                * <u>stats</u>

                * <u>count</u>

                * <u>checksum</u>

                * <u>cgi</u>

                * <u>discard</u>

                * <u>topcat</u>

                * <u>samp</u>

                * <u>tosql</u>

                * <u>gui</u>
               Use the <u>help=omode</u> flag or see SUN/256 for more information.

       <b>out=</b><u>&lt;out-table&gt;</u>
              The  location  of  the output table. This is usually a filename to write to. If it is equal to the
              special value "-" (the default) the output table will be written to standard output.

              This parameter must only be given if <u>omode</u> has its default value of "<u>out</u>".

       <b>ofmt=</b><u>&lt;out-format&gt;</u>
              Specifies the format in which the output table will be written (one  of  the  ones  in  SUN/256  -
              matching  is  case-insensitive  and you can use just the first few letters). If it has the special
              value "<u>(auto)</u>" (the default), then the output filename will be examined to try to guess what  sort
              of  file  is  required  usually by looking at the extension. If it's not obvious from the filename
              what output format is intended, an error will result.

              This parameter must only be given if <u>omode</u> has its default value of "<u>out</u>".

       <b>coords=</b><u>&lt;expr&gt;</u> <u>...</u>
              Defines the dimensions of the grid over which accumulation will take place. The form of this value
              is a space-separated list of words each giving a column name or algebraic expression defining  one
              of the dimensions of the output grid. For a 1-dimensional histogram, only one value is required.

       <b>logs=</b><u>true|false</u> <u>...</u>
              Determines  whether  each  coordinate  axis is linear or logarithmic. By default the grid axes are
              linear, but if this parameter is supplied with one or more true values, the  bins  on  the  corre‐
              sponding axes are assigned logarithmically instead.

              If supplied, this parameter must have the same number of words as the <u>coords</u> parameter.

       <b>bounds=</b><u>[&lt;lo&gt;]:[&lt;hi&gt;]</u> <u>...</u>
              Gives  the  bounds  for each dimension of the cube in data coordinates. The form of the value is a
              space-separated list of words, each giving an optional lower bound, then a colon, then an optional
              upper bound, for instance "1:100 0:20" to represent a range for two-dimensional output  between  1
              and 100 of the first coordinate (table column) and between 0 and 20 for the second. Either or both
              numbers may be omitted to indicate that the bounds should be determined automatically by assessing
              the  range  of  the  data  in  the table. A null value for the parameter indicates that all bounds
              should be determined automatically for all the dimensions.

              If any of the bounds need to be determined automatically in this way, two passes through the  data
              will be required, the first to determine bounds and the second to calculate the map.

              If supplied, this parameter must have the same number of words as the <u>coords</u> parameter.

       <b>binsizes=</b><u>&lt;size&gt;</u> <u>...</u>
              Gives  the extent of of the data bins in each dimension in data coordinates. The form of the value
              is a space-separated list of values, giving a list of extents for the first,  second,  ...  dimen‐
              sion. Either this parameter or the <u>nbins</u> parameter must be supplied.

              If supplied, this parameter must have the same number of words as the <u>coords</u> parameter.

       <b>nbins=</b><u>&lt;num&gt;</u> <u>...</u>
              Gives the approximate number of bins in each dimension. The form of the value is a space-separated
              list of integers, giving the number of bins for the output histogram in the first, second, ... di‐
              mension. An attempt is made to use round numbers for bin sizes so the bin counts may not be exact‐
              ly as specified. Either this parameter or the <u>binsizes</u> parameter must be supplied.

              If supplied, this parameter must have the same number of words as the <u>coords</u> parameter.

       <b>cols=</b><u>&lt;expr&gt;[;&lt;combiner&gt;[;&lt;name&gt;]]</u> <u>...</u>
              Defines  the  quantities  to  be calculated. The value is a space-separated list of items, one for
              each aggregated column in the output table.

              Each item is composed of one, two or three tokens, separated by semicolon ("<u>;</u>") characters:

                * <u>&lt;expr&gt;</u>: (required) column name or expression using the expression language for the quantity to
                  be aggregated.

                * <u>&lt;combiner&gt;</u>: (optional) combination method, using the same options as for the  <u>combine</u>  parame‐
                  ter. If omitted, the value specified for that parameter will be used.

                * <u>&lt;name&gt;</u>: (optional) name of output column; if omitted, the <u>&lt;expr&gt;</u> value (perhaps somewhat sani‐
                  tised) will be used.
               It is often sufficient just to supply a space-separated list of input table column names for this
              parameter,  but  the  additional syntax may be required for instance if it's required to calculate
              both a sum and mean of the same input column.

              The default value is "<u>1;count;COUNT</u>" which simply provides an unweighted histogram, i.e.  a  count
              of the rows in each bin (aggregation of the value "<u>1</u>" using the combination method "<u>count</u>", yield‐
              ing an output column named "<u>COUNT</u>").

       <b>combine=</b><u>sum|sum-per-unit|count|count-per-unit|mean|median|Q1|Q3|min|max|stdev|stdev_pop|hit</u>
              Defines the default way that values contributing to the same density map bin are combined together
              to produce the value assigned to that bin. Possible values are:

                * <u>sum</u>: the sum of all the combined values per bin

                * <u>sum-per-unit</u>: the sum of all the combined values per unit of bin size

                * <u>count</u>: the number of non-blank values per bin (weight is ignored)

                * <u>count-per-unit</u>: the number of non-blank values per unit of bin size (weight is ignored)

                * <u>mean</u>: the mean of the combined values

                * <u>median</u>: the median

                * <u>Q1</u>: first quartile

                * <u>Q3</u>: third quartile

                * <u>min</u>: the minimum of all the combined values

                * <u>max</u>: the maximum of all the combined values

                * <u>stdev</u>: the sample standard deviation of the combined values

                * <u>stdev_pop</u>: the population standard deviation of the combined values

                * <u>hit</u>: 1 if any values present, NaN otherwise (weight is ignored)

                * <u>Q.nnn</u>: quantile nnn (e.g. Q.05 is the fifth percentile)

              Note this value may be overridden on a per-column basis by the <u>cols</u> parameter.

       <b>sparse=</b><u>true|false</u>
              Determines whether a row is written for every cell in the defined grid, or only for those cells in
              which data appears in the input. The result will usually be more compact if this is set false, but
              if you want to compare results from different runs it may be convenient to set it true.

       <b>runner=</b><u>sequential|parallel|parallel&lt;n&gt;|partest</u>
              Selects  the threading implementation, i.e. to what extent processing is done in parallel. The op‐
              tions are currently:

                * <u>sequential</u>: runs using only a single thread

                * <u>parallel</u>: runs using multiple threads for large tables, with parallelism given by  the  number
                  of available processors

                * <u>parallel&lt;n&gt;</u>:  runs using multiple threads for large tables, with parallelism given by the sup‐
                  plied value <u>&lt;n&gt;</u>

                * <u>partest</u>: runs using multiple threads even when tables are small  (only  intended  for  testing
                  purposes)

              Using parallel processing can speed up execution considerably; however, depending on the I/O oper‐
              ations required, it can also slow it down by disrupting patterns of disk access. If the content of
              a file is on a solid state disk, or is already in cache for instance because a similar command has
              been  run  recently, then <u>parallel</u> will probably be faster. However, if the data is being read di‐
              rectly from a spinning disk, for instance because the file is too large to fit in  RAM,  then  <u>se‐</u>
              <u>quential</u> or <u>parallel&lt;n&gt;</u> with a small <u>&lt;n&gt;</u> may be faster.

              The value of this parameter should make only very tiny differences to the output table. If you no‐
              tice significant discrepancies <b>please</b> <b>report</b> <b>them</b>.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man1/stilts.1.html">stilts</a></b>(1)

       If the package stilts-doc is installed, the full documentation <b>SUN/256</b> is available in HTML format:
       file:///usr/share/doc/stilts/sun256/index.html

</pre><h4><b>VERSION</b></h4><pre>
       STILTS version 3.5.1-debian

       This  is the Debian version of Stilts, which lack the support of some file formats and network protocols.
       For differences see
       file:///usr/share/doc/stilts/README.Debian

</pre><h4><b>AUTHOR</b></h4><pre>
       Mark Taylor (Bristol University)

                                                    Mar 2017                                  <u><a href="../man1/STILTS-TGRIDMAP.1.html">STILTS-TGRIDMAP</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>