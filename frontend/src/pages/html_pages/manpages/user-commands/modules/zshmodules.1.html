<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>zshmodules - zsh loadable modules</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/zsh-common">zsh-common_5.9-6ubuntu3_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       zshmodules - zsh loadable modules

</pre><h4><b>DESCRIPTION</b></h4><pre>
       Some  optional  parts  of zsh are in modules, separate from the core of the shell.  Each of these modules
       may be linked in to the shell at build time, or can be dynamically linked while the shell is  running  if
       the  installation  supports  this  feature.  Modules are linked at runtime with the <b>zmodload</b> command, see
       <u><a href="../man1/zshbuiltins.1.html">zshbuiltins</a></u>(1).

       The modules that are bundled with the zsh distribution are:

       <b>zsh/attr</b>
              Builtins for manipulating extended attributes (xattr).

       <b>zsh/cap</b>
              Builtins for manipulating POSIX.1e (POSIX.6) capability (privilege) sets.

       <b>zsh/clone</b>
              A builtin that can clone a running shell onto another terminal.

       <b>zsh/compctl</b>
              The <b>compctl</b> builtin for controlling completion.

       <b>zsh/complete</b>
              The basic completion code.

       <b>zsh/complist</b>
              Completion listing extensions.

       <b>zsh/computil</b>
              A module with utility builtins needed for the shell function based completion system.

       <b>zsh/curses</b>
              curses windowing commands

       <b>zsh/datetime</b>
              Some date/time commands and parameters.

       <b>zsh/db/gdbm</b>
              Builtins for managing associative array parameters tied to GDBM databases.

       <b>zsh/deltochar</b>
              A ZLE function duplicating EMACS' <b>zap-to-char</b>.

       <b>zsh/example</b>
              An example of how to write a module.

       <b>zsh/files</b>
              Some basic file manipulation commands as builtins.

       <b>zsh/langinfo</b>
              Interface to locale information.

       <b>zsh/mapfile</b>
              Access to external files via a special associative array.

       <b>zsh/mathfunc</b>
              Standard scientific functions for use in mathematical evaluations.

       <b>zsh/nearcolor</b>
              Map colours to the nearest colour in the available palette.

       <b>zsh/newuser</b>
              Arrange for files for new users to be installed.

       <b>zsh/parameter</b>
              Access to internal hash tables via special associative arrays.

       <b>zsh/pcre</b>
              Interface to the PCRE library.

       <b>zsh/param/private</b>
              Builtins for managing private-scoped parameters in function context.

       <b>zsh/regex</b>
              Interface to the POSIX regex library.

       <b>zsh/sched</b>
              A builtin that provides a timed execution facility within the shell.

       <b>zsh/net/socket</b>
              Manipulation of Unix domain sockets

       <b>zsh/stat</b>
              A builtin command interface to the <b>stat</b> system call.

       <b>zsh/system</b>
              A builtin interface to various low-level system features.

       <b>zsh/net/tcp</b>
              Manipulation of TCP sockets

       <b>zsh/termcap</b>
              Interface to the termcap database.

       <b>zsh/terminfo</b>
              Interface to the terminfo database.

       <b>zsh/watch</b>
              Reporting of login and logout events.

       <b>zsh/zftp</b>
              A builtin FTP client.

       <b>zsh/zle</b>
              The Zsh Line Editor, including the <b>bindkey</b> and <b>vared</b> builtins.

       <b>zsh/zleparameter</b>
              Access to internals of the Zsh Line Editor via parameters.

       <b>zsh/zprof</b>
              A module allowing profiling for shell functions.

       <b>zsh/zpty</b>
              A builtin for starting a command in a pseudo-terminal.

       <b>zsh/zselect</b>
              Block and return when file descriptors are ready.

       <b>zsh/zutil</b>
              Some utility builtins, e.g. the one for supporting configuration via styles.

</pre><h4><b>THE</b> <b>ZSH/ATTR</b> <b>MODULE</b></h4><pre>
       The <b>zsh/attr</b> module is used for manipulating extended attributes.  The <b>-h</b> option causes all  commands  to
       operate on symbolic links instead of their targets.  The builtins in this module are:

       <b>zgetattr</b> [ <b>-h</b> ] <u>filename</u> <u>attribute</u> [ <u>parameter</u> ]
              Get  the  extended  attribute  <u>attribute</u>  from  the  specified  <u>filename</u>. If the optional argument
              <u>parameter</u> is given, the attribute is set on that parameter instead of being printed to stdout.

       <b>zsetattr</b> [ <b>-h</b> ] <u>filename</u> <u>attribute</u> <u>value</u>
              Set the extended attribute <u>attribute</u> on the specified <u>filename</u> to <u>value</u>.

       <b>zdelattr</b> [ <b>-h</b> ] <u>filename</u> <u>attribute</u>
              Remove the extended attribute <u>attribute</u> from the specified <u>filename</u>.

       <b>zlistattr</b> [ <b>-h</b> ] <u>filename</u> [ <u>parameter</u> ]
              List the extended attributes currently set on the specified <u>filename</u>.  If  the  optional  argument
              <u>parameter</u>  is  given,  the list of attributes is set on that parameter instead of being printed to
              stdout.

       <b>zgetattr</b> and <b>zlistattr</b> allocate memory dynamically.  If the attribute or list of attributes grows between
       the allocation and the call to get them, they return 2.  On all other errors, 1 is returned.  This allows
       the calling function to check for this case and retry.

</pre><h4><b>THE</b> <b>ZSH/CAP</b> <b>MODULE</b></h4><pre>
       The <b>zsh/cap</b> module is used for manipulating POSIX.1e (POSIX.6) capability sets.  If the operating  system
       does  not  support  this interface, the builtins defined by this module will do nothing.  The builtins in
       this module are:

       <b>cap</b> [ <u>capabilities</u> ]
              Change the shell's process capability sets to the specified <u>capabilities</u>,  otherwise  display  the
              shell's current capabilities.

       <b>getcap</b> <u>filename</u> ...
              This  is a built-in implementation of the POSIX standard utility.  It displays the capability sets
              on each specified <u>filename</u>.

       <b>setcap</b> <u>capabilities</u> <u>filename</u> ...
              This is a built-in implementation of the POSIX standard utility.  It sets the capability  sets  on
              each specified <u>filename</u> to the specified <u>capabilities</u>.

</pre><h4><b>THE</b> <b>ZSH/CLONE</b> <b>MODULE</b></h4><pre>
       The <b>zsh/clone</b> module makes available one builtin command:

       <b>clone</b> <u>tty</u>
              Creates  a forked instance of the current shell, attached to the specified <u>tty</u>.  In the new shell,
              the <b>PID</b>, <b>PPID</b> and <b>TTY</b> special parameters are changed appropriately.  <b>$!</b> is set to zero in the  new
              shell, and to the new shell's PID in the original shell.

              The return status of the builtin is zero in both shells if successful, and non-zero on error.

              The  target  of <b>clone</b> should be an unused terminal, such as an unused virtual console or a virtual
              terminal created by

                     <b>xterm</b> <b>-e</b> <b>sh</b> <b>-c</b> <b>'trap</b> <b>:</b> <b>INT</b> <b>QUIT</b> <b>TSTP;</b> <b>tty;</b>
                             <b>while</b> <b>:;</b> <b>do</b> <b>sleep</b> <b>100000000;</b> <b>done'</b>

              Some words of explanation are warranted about this long xterm command line: when doing clone on  a
              pseudo-terminal,  some  other session ("session" meant as a unix session group, or SID) is already
              owning the terminal. Hence the cloned zsh cannot acquire the pseudo-terminal as a controlling tty.
              That means two things:

              •      the job control signals will go to the sh-started-by-xterm process  group  (that's  why  we
                     disable  INT  QUIT  and  TSTP  with  trap;  otherwise the while loop could get suspended or
                     killed)

              •      the cloned shell will have job control disabled,  and  the  job  control  keys  (control-C,
                     control-\ and control-Z) will not work.

              This does not apply when cloning to an <u>unused</u> vc.

              Cloning  to  a  used (and unprepared) terminal will result in two processes reading simultaneously
              from the same terminal, with input bytes going randomly to either process.

              <b>clone</b> is mostly useful as a shell built-in replacement for openvt.

</pre><h4><b>THE</b> <b>ZSH/COMPCTL</b> <b>MODULE</b></h4><pre>
       The <b>zsh/compctl</b> module makes available two builtin commands. <b>compctl</b>,  is  the  old,  deprecated  way  to
       control  completions  for  ZLE.   See  <u><a href="../man1/zshcompctl.1.html">zshcompctl</a></u>(1).  The other builtin command, <b>compcall</b> can be used in
       user-defined completion widgets, see <u><a href="../man1/zshcompwid.1.html">zshcompwid</a></u>(1).

</pre><h4><b>THE</b> <b>ZSH/COMPLETE</b> <b>MODULE</b></h4><pre>
       The <b>zsh/complete</b> module makes available several builtin  commands  which  can  be  used  in  user-defined
       completion widgets, see <u><a href="../man1/zshcompwid.1.html">zshcompwid</a></u>(1).

</pre><h4><b>THE</b> <b>ZSH/COMPLIST</b> <b>MODULE</b></h4><pre>
       The  <b>zsh/complist</b> module offers three extensions to completion listings: the ability to highlight matches
       in such a list, the ability to scroll through long lists and a different style of menu completion.

   <b>Colored</b> <b>completion</b> <b>listings</b>
       Whenever one of the parameters <b>ZLS_COLORS</b> or <b>ZLS_COLOURS</b> is set and the <b>zsh/complist</b> module is loaded  or
       linked  into  the  shell,  completion  lists  will  be  colored.   Note,  however, that <b>complist</b> will not
       automatically be loaded if it is not linked in:  on systems with dynamic loading, `<b>zmodload</b> <b>zsh/complist</b>'
       is required.

       The parameters <b>ZLS_COLORS</b> and <b>ZLS_COLOURS</b> describe how matches are highlighted.  To turn on  highlighting
       an  empty  value  suffices, in which case all the default values given below will be used.  The format of
       the value of these parameters is the same as used by the GNU version of the <b>ls</b> command: a colon-separated
       list of specifications of the form `<u>name</u><b>=</b><u>value</u>'.  The <u>name</u> may be one of the following strings,  most  of
       which specify file types for which the <u>value</u> will be used.  The strings and their default values are:

       <b>no</b> <b>0</b>   for normal text (i.e. when displaying something other than a matched file)

       <b>fi</b> <b>0</b>   for regular files

       <b>di</b> <b>32</b>  for directories

       <b>ln</b> <b>36</b>  for symbolic links.  If this has the special value <b>target</b>, symbolic links are dereferenced and the
              target file used to determine the display format.

       <b>pi</b> <b>31</b>  for named pipes (FIFOs)

       <b>so</b> <b>33</b>  for sockets

       <b>bd</b> <b>44;37</b>
              for block devices

       <b>cd</b> <b>44;37</b>
              for character devices

       <b>or</b> <u>none</u>
              for a symlink to nonexistent file (default is the value defined for <b>ln</b>)

       <b>mi</b> <u>none</u>
              for a non-existent file (default is the value defined for <b>fi</b>); this code is currently not used

       <b>su</b> <b>37;41</b>
              for files with setuid bit set

       <b>sg</b> <b>30;43</b>
              for files with setgid bit set

       <b>tw</b> <b>30;42</b>
              for world writable directories with sticky bit set

       <b>ow</b> <b>34;43</b>
              for world writable directories without sticky bit set

       <b>sa</b> <u>none</u>
              for  files  with  an  associated  suffix  alias;  this  is only tested after specific suffixes, as
              described below

       <b>st</b> <b>37;44</b>
              for directories with sticky bit set but not world writable

       <b>ex</b> <b>35</b>  for executable files

       <b>lc</b> <b>\e[</b> for the left code (see below)

       <b>rc</b> <b>m</b>   for the right code

       <b>tc</b> <b>0</b>   for the character indicating the file type  printed after filenames if the  <b>LIST_TYPES</b>  option  is
              set

       <b>sp</b> <b>0</b>   for the spaces printed after matches to align the next column

       <b>ec</b> <u>none</u>
              for the end code

       Apart  from these strings, the <u>name</u> may also be an asterisk (`<b>*</b>') followed by any string. The <u>value</u> given
       for such a string will be used for all files whose name ends with the string.  The <u>name</u> may  also  be  an
       equals sign (`<b>=</b>') followed by a pattern; the <b>EXTENDED_GLOB</b> option will be turned on for evaluation of the
       pattern.   The  <u>value</u>  given  for  this  pattern  will be used for all matches (not just filenames) whose
       display string are matched by the pattern.  Definitions for the form with the  leading  equal  sign  take
       precedence  over  the values defined for file types, which in turn take precedence over the form with the
       leading asterisk (file extensions).

       The leading-equals form also allows different parts of the displayed strings to be  colored  differently.
       For  this, the pattern has to use the `<b>(#b)</b>' globbing flag and pairs of parentheses surrounding the parts
       of the strings that are to be colored differently.  In this case the <u>value</u> may consist of more  than  one
       color  code  separated  by  equal signs.  The first code will be used for all parts for which no explicit
       code is specified and the following codes will be used for the  parts  matched  by  the  sub-patterns  in
       parentheses.   For example, the specification `<b>=(#b)(?)*(?)=0=3=7</b>' will be used for all matches which are
       at least two characters long and will use the code  `<b>3</b>'  for  the  first  character,  `<b>7</b>'  for  the  last
       character and `<b>0</b>' for the rest.

       All three forms of <u>name</u> may be preceded by a pattern in parentheses.  If this is given, the <u>value</u> will be
       used  only  for  matches  in groups whose names are matched by the pattern given in the parentheses.  For
       example, `<b>(g*)m*=43</b>' highlights all matches beginning with `<b>m</b>' in groups  whose  names   begin  with  `<b>g</b>'
       using the color code `<b>43</b>'.  In case of the `<b>lc</b>', `<b>rc</b>', and `<b>ec</b>' codes, the group pattern is ignored.

       Note  also that all patterns are tried in the order in which they appear in the parameter value until the
       first one matches which is  then  used.   Patterns  may  be  matched  against  completions,  descriptions
       (possibly  with  spaces  appended  for  padding),  or  lines  consisting  of  a  completion followed by a
       description.  For consistent coloring it may be necessary to use more than one pattern or a pattern  with
       backreferences.

       When  printing a match, the code prints the value of <b>lc</b>, the value for the file-type or the last matching
       specification with a `<b>*</b>', the value of <b>rc</b>, the string to display for the match itself, and then the value
       of <b>ec</b> if that is defined or the values of <b>lc</b>, <b>no</b>, and <b>rc</b> if <b>ec</b> is not defined.

       The default values are ISO 6429 (ANSI) compliant and can be used on vt100 compatible  terminals  such  as
       <b>xterm</b>s.   On  monochrome  terminals  the default values will have no visible effect.  The <b>colors</b> function
       from the contribution can be used to get associative arrays containing the codes for ANSI terminals  (see
       the  section  `Other  Functions'  in  <u><a href="../man1/zshcontrib.1.html">zshcontrib</a></u>(1)).   For  example, after loading <b>colors</b>, one could use
       `<b>$color[red]</b>' to get the code for foreground color red and `<b>$color[bg-green]</b>' for the code for background
       color green.

       If the completion system invoked by compinit is used, these parameters should not be set directly because
       the system controls them itself.  Instead,  the  <b>list-colors</b>  style  should  be  used  (see  the  section
       `Completion System Configuration' in <u><a href="../man1/zshcompsys.1.html">zshcompsys</a></u>(1)).

   <b>Scrolling</b> <b>in</b> <b>completion</b> <b>listings</b>
       To  enable  scrolling through a completion list, the <b>LISTPROMPT</b> parameter must be set.  Its value will be
       used as the prompt; if it is the empty string, a default prompt will be  used.   The  value  may  contain
       escapes  of the form `<b>%x</b>'.  It supports the escapes `<b>%B</b>', `<b>%b</b>', `<b>%S</b>', `<b>%s</b>', `<b>%U</b>', `<b>%u</b>', `<b>%F</b>', `<b>%f</b>', `<b>%K</b>',
       `<b>%k</b>' and `<b>%{</b><u>...</u><b>%}</b>' used also in shell prompts as well as three pairs of additional sequences: a  `<b>%l</b>'  or
       `<b>%L</b>'  is  replaced  by  the  number  of  the  last  line  shown and the total number of lines in the form
       `<u>number</u><b>/</b><u>total</u>'; a `<b>%m</b>' or `<b>%M</b>' is replaced with the number of the last match shown and the  total  number
       of  matches; and `<b>%p</b>' or `<b>%P</b>' is replaced with `<b>Top</b>', `<b>Bottom</b>' or the position of the first line shown in
       percent of the total number of lines, respectively.  In each of these cases the form with  the  uppercase
       letter  will  be  replaced  with  a  string  of  fixed  width, padded to the right with spaces, while the
       lowercase form will not be padded.

       If the parameter <b>LISTPROMPT</b> is set, the completion code will  not  ask  if  the  list  should  be  shown.
       Instead it immediately starts displaying the list, stopping after the first screenful, showing the prompt
       at  the bottom, waiting for a keypress after temporarily switching to the <b>listscroll</b> keymap.  Some of the
       zle functions have a special meaning while scrolling lists:

       <b>send-break</b>
              stops listing discarding the key pressed

       <b>accept-line</b>, <b>down-history</b>, <b>down-line-or-history</b>
       <b>down-line-or-search</b>, <b>vi-down-line-or-history</b>
              scrolls forward one line

       <b>complete-word</b>, <b>menu-complete</b>, <b>expand-or-complete</b>
       <b>expand-or-complete-prefix</b>, <b>menu-complete-or-expand</b>
              scrolls forward one screenful

       <b>accept-search</b>
              stop listing but take no other action

       Every other character stops listing and immediately processes the key as usual.   Any  key  that  is  not
       bound  in  the  <b>listscroll</b>  keymap or that is bound to <b>undefined-key</b> is looked up in the keymap currently
       selected.

       As for the <b>ZLS_COLORS</b> and <b>ZLS_COLOURS</b> parameters, <b>LISTPROMPT</b> should not be set directly  when  using  the
       shell function based completion system.  Instead, the <b>list-prompt</b> style should be used.

   <b>Menu</b> <b>selection</b>
       The  <b>zsh/complist</b>  module  also offers an alternative style of selecting matches from a list, called menu
       selection, which can be used if the shell is set up  to  return  to  the  last  prompt  after  showing  a
       completion list (see the <b>ALWAYS_LAST_PROMPT</b> option in <u><a href="../man1/zshoptions.1.html">zshoptions</a></u>(1)).

       Menu  selection  can  be  invoked  directly  by the widget <b>menu-select</b> defined by this module.  This is a
       standard ZLE widget that can be bound to a key in the usual way as described in <u><a href="../man1/zshzle.1.html">zshzle</a></u>(1).

       Alternatively, the parameter <b>MENUSELECT</b> can be set to an integer,  which  gives  the  minimum  number  of
       matches  that  must  be  present  before  menu  selection is automatically turned on.  This second method
       requires that menu completion be started, either directly from a widget such as <b>menu-complete</b>, or due  to
       one  of  the  options  <b>MENU_COMPLETE</b> or <b>AUTO_MENU</b> being set.  If <b>MENUSELECT</b> is set, but is 0, 1 or empty,
       menu selection will always be started during an ambiguous menu completion.

       When using the completion system based on shell functions, the <b>MENUSELECT</b> parameter should  not  be  used
       (like the <b>ZLS_COLORS</b> and <b>ZLS_COLOURS</b> parameters described above).  Instead, the <b>menu</b> style should be used
       with the <b>select=</b><u>...</u> keyword.

       After  menu  selection  is started, the matches will be listed. If there are more matches than fit on the
       screen, only the first screenful is shown.  The matches to insert into the command line can  be  selected
       from  this  list.   In  the  list  one match is highlighted using the value for <b>ma</b> from the <b>ZLS_COLORS</b> or
       <b>ZLS_COLOURS</b> parameter.  The default value for  this  is  `<b>7</b>'  which  forces  the  selected  match  to  be
       highlighted using standout mode on a vt100-compatible terminal.  If neither <b>ZLS_COLORS</b> nor <b>ZLS_COLOURS</b> is
       set, the same terminal control sequence as for the `<b>%S</b>' escape in prompts is used.

       If  there  are more matches than fit on the screen and the parameter <b>MENUPROMPT</b> is set, its value will be
       shown below the matches.  It supports the same escape sequences as <b>LISTPROMPT</b>,  but  the  number  of  the
       match  or line shown will be that of the one where the mark is placed.  If its value is the empty string,
       a default prompt will be used.

       The <b>MENUSCROLL</b> parameter can be used to specify how the list is scrolled.  If  the  parameter  is  unset,
       this  is  done line by line, if it is set to `<b>0</b>' (zero), the list will scroll half the number of lines of
       the screen.  If the value is positive, it gives the number of lines to scroll and if it is negative,  the
       list will be scrolled the number of lines of the screen minus the (absolute) value.

       As for the <b>ZLS_COLORS</b>, <b>ZLS_COLOURS</b> and <b>LISTPROMPT</b> parameters, neither <b>MENUPROMPT</b> nor <b>MENUSCROLL</b> should be
       set  directly  when  using  the  shell  function based completion system.  Instead, the <b>select-prompt</b> and
       <b>select-scroll</b> styles should be used.

       The completion code sometimes decides not to show all of the matches in the list.  These  hidden  matches
       are  either matches for which the completion function which added them explicitly requested that they not
       appear in the list (using the <b>-n</b> option of the  <b>compadd</b>  builtin  command)  or  they  are  matches  which
       duplicate a string already in the list (because they differ only in things like prefixes or suffixes that
       are  not  displayed).  In the list used for menu selection, however, even these matches are shown so that
       it is possible to select them.  To highlight such matches the <b>hi</b> and <b>du</b> capabilities  in  the  <b>ZLS_COLORS</b>
       and <b>ZLS_COLOURS</b> parameters are supported for hidden matches of the first and second kind, respectively.

       Selecting  matches  is  done  by  moving  the mark around using the zle movement functions.  When not all
       matches can be shown on the screen at the same time, the list will scroll up and down when  crossing  the
       top  or  bottom line.  The following zle functions have special meaning during menu selection.  Note that
       the following always perform the same task within the menu selection map and cannot be replaced  by  user
       defined widgets, nor can the set of functions be extended:

       <b>accept-line</b>, <b>accept-search</b>
              accept  the  current  match  and  leave  menu  selection  (but do not cause the command line to be
              accepted)

       <b>send-break</b>
              leaves menu selection and restores the previous contents of the command line

       <b>redisplay</b>, <b>clear-screen</b>
              execute their normal function without leaving menu selection

       <b>accept-and-hold</b>, <b>accept-and-menu-complete</b>
              accept the currently inserted match and continue selection allowing to select the  next  match  to
              insert into the line

       <b>accept-and-infer-next-history</b>
              accepts  the  current  match  and then tries completion with menu selection again;  in the case of
              files this allows one to select a directory and immediately attempt to complete files in  it;   if
              there  are  no  matches,  a  message is shown and one can use <b>undo</b> to go back to completion on the
              previous level, every other key leaves menu selection (including the other zle functions which are
              otherwise special during menu selection)

       <b>undo</b>   removes matches inserted during the menu selection by one of the three functions before

       <b>down-history</b>, <b>down-line-or-history</b>
       <b>vi-down-line-or-history</b>,  <b>down-line-or-search</b>
              moves the mark one line down

       <b>up-history</b>, <b>up-line-or-history</b>
       <b>vi-up-line-or-history</b>, <b>up-line-or-search</b>
              moves the mark one line up

       <b>forward-char</b>, <b>vi-forward-char</b>
              moves the mark one column right

       <b>backward-char</b>, <b>vi-backward-char</b>
              moves the mark one column left

       <b>forward-word</b>, <b>vi-forward-word</b>
       <b>vi-forward-word-end</b>, <b>emacs-forward-word</b>
              moves the mark one screenful down

       <b>backward-word</b>, <b>vi-backward-word</b>, <b>emacs-backward-word</b>
              moves the mark one screenful up

       <b>vi-forward-blank-word</b>, <b>vi-forward-blank-word-end</b>
              moves the mark to the first line of the next group of matches

       <b>vi-backward-blank-word</b>
              moves the mark to the last line of the previous group of matches

       <b>beginning-of-history</b>
              moves the mark to the first line

       <b>end-of-history</b>
              moves the mark to the last line

       <b>beginning-of-buffer-or-history</b>, <b>beginning-of-line</b>
       <b>beginning-of-line-hist</b>, <b>vi-beginning-of-line</b>
              moves the mark to the leftmost column

       <b>end-of-buffer-or-history</b>, <b>end-of-line</b>
       <b>end-of-line-hist</b>, <b>vi-end-of-line</b>
              moves the mark to the rightmost column

       <b>complete-word</b>, <b>menu-complete</b>, <b>expand-or-complete</b>
       <b>expand-or-complete-prefix</b>, <b>menu-expand-or-complete</b>
              moves the mark to the next match

       <b>reverse-menu-complete</b>
              moves the mark to the previous match

       <b>vi-insert</b>
              this toggles between  normal  and  interactive  mode;  in  interactive  mode  the  keys  bound  to
              <b>self-insert</b>  and  <b>self-insert-unmeta</b>  insert  into  the command line as in normal editing mode but
              without leaving menu selection; after each character  completion  is  tried  again  and  the  list
              changes  to  contain  only  the  new  matches; the completion widgets make the longest unambiguous
              string be inserted in the command line and <b>undo</b> and <b>backward-delete-char</b> go back to  the  previous
              set of matches

       <b>history-incremental-search-forward</b>
       <b>history-incremental-search-backward</b>
              this  starts  incremental searches in the list of completions displayed; in this mode, <b>accept-line</b>
              only leaves incremental search, going back to the normal menu selection mode

       All movement functions wrap around at the edges; any other zle function not listed leaves menu  selection
       and  executes  that  function.  It is possible to make widgets in the above list do the same by using the
       form of the widget with a `<b>.</b>' in front.  For example, the widget `<b>.accept-line</b>' has the effect of leaving
       menu selection and accepting the entire command line.

       During this selection the widget uses the keymap <b>menuselect</b>.  Any key that is not defined in this  keymap
       or  that is bound to <b>undefined-key</b> is looked up in the keymap currently selected.  This is used to ensure
       that the most important keys used during selection  (namely  the  cursor  keys,  return,  and  TAB)  have
       sensible  defaults.   However,  keys  in the <b>menuselect</b> keymap can be modified directly using the <b>bindkey</b>
       builtin command (see <u><a href="../man1/zshmodules.1.html">zshmodules</a></u>(1)). For example, to make the return key  leave  menu  selection  without
       accepting the match currently selected one could call

              <b>bindkey</b> <b>-M</b> <b>menuselect</b> <b>'^M'</b> <b>send-break</b>

       after loading the <b>zsh/complist</b> module.

</pre><h4><b>THE</b> <b>ZSH/COMPUTIL</b> <b>MODULE</b></h4><pre>
       The  <b>zsh/computil</b>  module adds several builtin commands that are used by some of the completion functions
       in the completion system based on shell functions (see  <u><a href="../man1/zshcompsys.1.html">zshcompsys</a></u>(1)  ).   Except  for  <b>compquote</b>  these
       builtin  commands  are  very  specialised  and thus not very interesting when writing your own completion
       functions.  In summary, these builtin commands are:

       <b>comparguments</b>
              This is used by the <b>_arguments</b> function to  do  the  argument  and  command  line  parsing.   Like
              <b>compdescribe</b>  it has an option <b>-i</b> to do the parsing and initialize some internal state and various
              options to access the state information to decide what should be completed.

       <b>compdescribe</b>
              This is used by the <b>_describe</b> function to build the displays  for  the  matches  and  to  get  the
              strings  to  add  as  matches  with  their options.  On the first call one of the options <b>-i</b> or <b>-I</b>
              should be supplied as the first  argument.   In  the  first  case,  display  strings  without  the
              descriptions  will  be generated, in the second case, the string used to separate the matches from
              their descriptions must be given as the second argument and the  descriptions  (if  any)  will  be
              shown.  All other arguments are like the definition arguments to <b>_describe</b> itself.

              Once <b>compdescribe</b> has been called with either the <b>-i</b> or the <b>-I</b> option, it can be repeatedly called
              with  the <b>-g</b> option and the names of four parameters as its arguments.  This will step through the
              different sets of matches and store the value of <b>compstate[list]</b> in the first scalar, the  options
              for  <b>compadd</b>  in the second array, the matches in the third array, and the strings to be displayed
              in the completion listing in the fourth array.  The arrays may then be directly given  to  <b>compadd</b>
              to register the matches with the completion code.

       <b>compfiles</b>
              Used by the <b>_path_files</b> function to optimize complex recursive filename generation (globbing).  It
              does  three  things.  With the <b>-p</b> and <b>-P</b> options it builds the glob patterns to use, including the
              paths already handled and trying to optimize the patterns with respect to the  prefix  and  suffix
              from  the line and the match specification currently used.  The <b>-i</b> option does the directory tests
              for the <b>ignore-parents</b> style and the <b>-r</b> option tests if a component for some of  the  matches  are
              equal to the string on the line and removes all other matches if that is true.

       <b>compgroups</b>
              Used  by  the <b>_tags</b> function to implement the internals of the <b>group-order</b> style.  This only takes
              its arguments as names of completion groups and creates the groups for it (all six  types:  sorted
              and  unsorted,  both  without  removing duplicates, with removing all duplicates and with removing
              consecutive duplicates).

       <b>compquote</b> [ <b>-p</b> ] <u>names</u> ...
              There may be reasons to write completion functions that have to  add  the  matches  using  the  <b>-Q</b>
              option  to <b>compadd</b> and perform quoting themselves.  Instead of interpreting the first character of
              the <b>all_quotes</b> key of the <b>compstate</b> special  association  and  using  the  <b>q</b>  flag  for  parameter
              expansions,  one  can  use  this  builtin command.  The arguments are the names of scalar or array
              parameters and the values of these parameters are quoted  as  needed  for  the  innermost  quoting
              level.  If the <b>-p</b> option is given, quoting is done as if there is some prefix before the values of
              the parameters, so that a leading equal sign will not be quoted.

              The return status is non-zero in case of an error and zero otherwise.

       <b>comptags</b>
       <b>comptry</b>
              These implement the internals of the tags mechanism.

       <b>compvalues</b>
              Like <b>comparguments</b>, but for the <b>_values</b> function.

</pre><h4><b>THE</b> <b>ZSH/CURSES</b> <b>MODULE</b></h4><pre>
       The <b>zsh/curses</b> module makes available one builtin command and various parameters.

   <b>Builtin</b>
       <b>zcurses</b> <b>init</b>
       <b>zcurses</b> <b>end</b>
       <b>zcurses</b> <b>addwin</b> <u>targetwin</u> <u>nlines</u> <u>ncols</u> <u>begin_y</u> <u>begin_x</u> [ <u>parentwin</u> ]
       <b>zcurses</b> <b>delwin</b> <u>targetwin</u>
       <b>zcurses</b> <b>refresh</b> [ <u>targetwin</u> ... ]
       <b>zcurses</b> <b>touch</b> <u>targetwin</u> ...
       <b>zcurses</b> <b>move</b> <u>targetwin</u> <u>new_y</u> <u>new_x</u>
       <b>zcurses</b> <b>clear</b> <u>targetwin</u> [ <b>redraw</b> | <b>eol</b> | <b>bot</b> ]
       <b>zcurses</b> <b>position</b> <u>targetwin</u> <u>array</u>
       <b>zcurses</b> <b>char</b> <u>targetwin</u> <u>character</u>
       <b>zcurses</b> <b>string</b> <u>targetwin</u> <u>string</u>
       <b>zcurses</b> <b>border</b> <u>targetwin</u> <u>border</u>
       <b>zcurses</b> <b>attr</b> <u>targetwin</u> [ [<b>+</b>|<b>-</b>]<u>attribute</u> | <u>fg_col</u><b>/</b><u>bg_col</u> ] [...]
       <b>zcurses</b> <b>bg</b> <u>targetwin</u> [ [<b>+</b>|<b>-</b>]<u>attribute</u> | <u>fg_col</u><b>/</b><u>bg_col</u> | <b>@</b><u>char</u> ] [...]
       <b>zcurses</b> <b>scroll</b> <u>targetwin</u> [ <b>on</b> | <b>off</b> | [<b>+</b>|<b>-</b>]<u>lines</u> ]
       <b>zcurses</b> <b>input</b> <u>targetwin</u> [ <u>param</u> [ <u>kparam</u> [ <u>mparam</u> ] ] ]
       <b>zcurses</b> <b>mouse</b> [ <b>delay</b> <u>num</u> | [<b>+</b>|<b>-</b>]<b>motion</b> ]
       <b>zcurses</b> <b>timeout</b> <u>targetwin</u> <u>intval</u>
       <b>zcurses</b> <b>querychar</b> <u>targetwin</u> [ <u>param</u> ]
       <b>zcurses</b> <b>resize</b> <u>height</u> <u>width</u> [ <b>endwin</b> | <b>nosave</b> | <b>endwin_nosave</b> ]
              Manipulate  curses  windows.   All  uses  of this command should be bracketed by `<b>zcurses</b> <b>init</b>' to
              initialise use of curses, and `<b>zcurses</b> <b>end</b>' to end  it;  omitting  `<b>zcurses</b>  <b>end</b>'  can  cause  the
              terminal to be in an unwanted state.

              The subcommand <b>addwin</b> creates a window with <u>nlines</u> lines and <u>ncols</u> columns.  Its upper left corner
              will  be placed at row <u>begin_y</u> and column <u>begin_x</u> of the screen.  <u>targetwin</u> is a string and refers
              to the name of a window that is not currently assigned.  Note in particular the curses  convention
              that vertical values appear before horizontal values.

              If  <b>addwin</b>  is  given  an  existing  window  as the final argument, the new window is created as a
              subwindow of <u>parentwin</u>.  This differs from an ordinary new window in that the memory of the window
              contents is shared with the parent's memory.  Subwindows must  be  deleted  before  their  parent.
              Note  that the coordinates of subwindows are relative to the screen, not the parent, as with other
              windows.

              Use the subcommand <b>delwin</b> to delete a  window  created  with  <b>addwin</b>.   Note  that  <b>end</b>  does  <u>not</u>
              implicitly delete windows, and that <b>delwin</b> does not erase the screen image of the window.

              The  window  corresponding  to  the  full  visible screen is called <b>stdscr</b>; it always exists after
              `<b>zcurses</b> <b>init</b>' and cannot be delete with <b>delwin</b>.

              The subcommand <b>refresh</b> will refresh window <u>targetwin</u>;  this  is  necessary  to  make  any  pending
              changes  (such  as  characters  you  have  prepared  for  output with <b>char</b>) visible on the screen.
              <b>refresh</b> without an argument causes the screen to be cleared and redrawn.  If multiple windows  are
              given, the screen is updated once at the end.

              The  subcommand <b>touch</b> marks the <u>targetwin</u>s listed as changed.  This is necessary before <b>refresh</b>ing
              windows if a window that was in front of another window (which may be <b>stdscr</b>) is deleted.

              The subcommand <b>move</b> moves the cursor position in <u>targetwin</u> to new  coordinates  <u>new_y</u>  and  <u>new_x</u>.
              Note  that  the  subcommand <b>string</b> (but not the subcommand <b>char</b>) advances the cursor position over
              the characters added.

              The subcommand <b>clear</b> erases the contents of <u>targetwin</u>.  One  (and  no  more  than  one)  of  three
              options  may be specified.  With the option <b>redraw</b>, in addition the next <b>refresh</b> of <u>targetwin</u> will
              cause the screen to be cleared and repainted.  With the option <b>eol</b>, <u>targetwin</u> is only  cleared  to
              the  end  of the current cursor line.  With the option <b>bot</b>, <u>targetwin</u> is cleared to the end of the
              window, i.e everything to the right and below the cursor is cleared.

              The subcommand <b>position</b> writes various positions associated with <u>targetwin</u> into  the  array  named
              <u>array</u>.  These are, in order:
              -      The y and x coordinates of the cursor relative to the top left of <u>targetwin</u>
              -      The y and x coordinates of the top left of <u>targetwin</u> on the screen
              -      The size of <u>targetwin</u> in y and x dimensions.

              Outputting characters and strings are achieved by <b>char</b> and <b>string</b> respectively.

              To  draw  a  border around window <u>targetwin</u>, use <b>border</b>.  Note that the border is not subsequently
              handled specially:  in other words, the border is simply a set of characters output at the edge of
              the window.  Hence it can be overwritten, can scroll off the window, etc.

              The subcommand <b>attr</b> will set <u>targetwin</u>'s attributes or foreground/background color  pair  for  any
              successive character output.  Each <u>attribute</u> given on the line may be prepended by a <b>+</b> to set or a
              <b>-</b> to unset that attribute; <b>+</b> is assumed if absent.  The attributes supported are <b>blink</b>, <b>bold</b>, <b>dim</b>,
              <b>reverse</b>, <b>standout</b>, and <b>underline</b>.

              Each <u>fg_col</u><b>/</b><u>bg_col</u> attribute (to be read as `<u>fg_col</u> on <u>bg_col</u>') sets the foreground and background
              color  for  character  output.   The  color  <b>default</b>  is sometimes available (in particular if the
              library is ncurses), specifying the  foreground  or  background  color  with  which  the  terminal
              started.   The color pair <b>default/default</b> is always available. To use more than the 8 named colors
              (red, green, etc.) construct the <u>fg_col</u><b>/</b><u>bg_col</u> pairs where <u>fg_col</u> and <u>bg_col</u> are decimal integers,
              e.g <b>128/200</b>.  The maximum color value is 254 if the terminal supports 256 colors.

              <b>bg</b> overrides the color and other attributes of all characters in the window.  Its usual use is  to
              set  the  background initially, but it will overwrite the attributes of any characters at the time
              when it is called.  In addition to the arguments allowed with <b>attr</b>, an argument <b>@</b><u>char</u> specifies  a
              character to be shown in otherwise blank areas of the window.  Owing to limitations of curses this
              cannot  be  a multibyte character (use of ASCII characters only is recommended).  As the specified
              set of attributes override the existing background, turning attributes off in the arguments is not
              useful, though this does not cause an error.

              The subcommand <b>scroll</b> can be used with <b>on</b> or <b>off</b> to enabled or disable scrolling of a window  when
              the  cursor  would  otherwise  move below the window due to typing or output.  It can also be used
              with a positive or negative integer to scroll the window up or down  the  given  number  of  lines
              without  changing  the  current  cursor  position (which therefore appears to move in the opposite
              direction relative to the window).  In the second case, if scrolling  is  <b>off</b>  it  is  temporarily
              turned <b>on</b> to allow the window to be scrolled.

              The  subcommand  <b>input</b> reads a single character from the window without echoing it back.  If <u>param</u>
              is supplied the character is assigned to the parameter <u>param</u>, else it is assigned to the parameter
              <b>REPLY</b>.

              If both <u>param</u> and <u>kparam</u> are supplied, the key is read in `keypad' mode.   In  this  mode  special
              keys such as function keys and arrow keys return the name of the key in the parameter <u>kparam</u>.  The
              key  names are the macros defined in the <b>curses.h</b> or <b>ncurses.h</b> with the prefix `<b>KEY_</b>' removed; see
              also the description of the parameter <b>zcurses_keycodes</b> below.  Other keys cause a value to be  set
              in  <u>param</u>  as  before.   On  a  successful return only one of <u>param</u> or <u>kparam</u> contains a non-empty
              string; the other is set to an empty string.

              If <u>mparam</u> is also supplied, <b>input</b> attempts to handle mouse input.  This is only available with the
              ncurses library; mouse handling can be detected by checking for the exit status of `<b>zcurses</b> <b>mouse</b>'
              with no arguments.  If a mouse button is clicked (or double-  or  triple-clicked,  or  pressed  or
              released with a configurable delay from being clicked) then <u>kparam</u> is set to the string <b>MOUSE</b>, and
              <u>mparam</u> is set to an array consisting of the following elements:
              -      An identifier to discriminate different input devices; this is only rarely useful.
              -      The  x,  y  and  z  coordinates  of  the  mouse click relative to the full screen, as three
                     elements in that order (i.e. the y coordinate is, unusually, after the x coordinate).   The
                     z  coordinate  is  only  available  for a few unusual input devices and is otherwise set to
                     zero.
              -      Any events that occurred as separate items; usually there  will  be  just  one.   An  event
                     consists   of   <b>PRESSED</b>,  <b>RELEASED</b>,  <b>CLICKED</b>,  <b>DOUBLE_CLICKED</b>  or  <b>TRIPLE_CLICKED</b>  followed
                     immediately (in the same element) by the number of the button.
              -      If the shift key was pressed, the string <b>SHIFT</b>.
              -      If the control key was pressed, the string <b>CTRL</b>.
              -      If the alt key was pressed, the string <b>ALT</b>.

              Not all mouse events may be passed through to the terminal window; most terminal emulators  handle
              some mouse events themselves.  Note that the ncurses manual implies that using input both with and
              without mouse handling may cause the mouse cursor to appear and disappear.

              The  subcommand <b>mouse</b> can be used to configure the use of the mouse.  There is no window argument;
              mouse options are global.  `<b>zcurses</b> <b>mouse</b>' with no arguments returns status 0 if mouse handling is
              possible, else status 1.  Otherwise, the possible arguments (which may be  combined  on  the  same
              command  line) are as follows.  <b>delay</b> <u>num</u> sets the maximum delay in milliseconds between press and
              release events to be considered as a click; the value 0 disables click resolution, and the default
              is one sixth of a second.  <b>motion</b> proceeded by an optional `<b>+</b>' (the default) or <b>-</b> turns on or  off
              reporting  of mouse motion in addition to clicks, presses and releases, which are always reported.
              However, it appears reports for mouse motion are not currently implemented.

              The subcommand <b>timeout</b> specifies a timeout value for input from <u>targetwin</u>.  If <u>intval</u> is negative,
              `<b>zcurses</b> <b>input</b>' waits indefinitely for a character to be typed; this is the default.  If <u>intval</u> is
              zero, `<b>zcurses</b> <b>input</b>' returns immediately; if there is typeahead it is returned, else no input  is
              done  and  status 1 is returned.  If <u>intval</u> is positive, `<b>zcurses</b> <b>input</b>' waits <u>intval</u> milliseconds
              for input and if there is none at the end of that period returns status 1.

              The subcommand <b>querychar</b> queries the character at the current cursor position.  The return  values
              are  stored in the array named <u>param</u> if supplied, else in the array <b>reply</b>.  The first value is the
              character (which may be a multibyte character if the system supports  them);  the  second  is  the
              color  pair  in  the usual <u>fg_col</u><b>/</b><u>bg_col</u> notation, or <b>0</b> if color is not supported.  Any attributes
              other than color that apply to  the  character,  as  set  with  the  subcommand  <b>attr</b>,  appear  as
              additional elements.

              The  subcommand  <b>resize</b> resizes <b>stdscr</b> and all windows to given dimensions (windows that stick out
              from the new dimensions are resized down). The underlying curses extension (<b>resize_term</b> <b>call</b>)  can
              be  unavailable.  To  verify,  zeroes  can  be  used  for  <u>height</u>  and <u>width</u>. If the result of the
              subcommand is <b>0</b>, resize_term is available (<b>2</b> otherwise). Tests show that resizing can be  normally
              accomplished  by  calling  <b>zcurses</b>  <b>end</b> and <b>zcurses</b> <b>refresh</b>. The <b>resize</b> subcommand is provided for
              versatility. Multiple system configurations have been checked and <b>zcurses</b> <b>end</b> and <b>zcurses</b>  <b>refresh</b>
              are  still  needed for correct terminal state after resize. To invoke them with <b>resize</b>, use <u>endwin</u>
              argument.  Using <u>nosave</u> argument will cause new terminal state  to  not  be  saved  internally  by
              <b>zcurses</b>. This is also provided for versatility and should normally be not needed.

   <b>Parameters</b>
       <b>ZCURSES_COLORS</b>
              Readonly  integer.  The maximum number of colors the terminal supports.  This value is initialised
              by the curses library and is not available until the first time <b>zcurses</b> <b>init</b> is run.

       <b>ZCURSES_COLOR_PAIRS</b>
              Readonly integer.  The maximum number of color pairs <u>fg_col</u><b>/</b><u>bg_col</u> that may be defined in `<b>zcurses</b>
              <b>attr</b>' commands; note this limit applies to all color pairs that have been used whether or not they
              are currently active.  This value is initialised by the curses library and is not available  until
              the first time <b>zcurses</b> <b>init</b> is run.

       <b>zcurses_attrs</b>
              Readonly  array.   The  attributes  supported  by  <b>zsh/curses</b>;  available as soon as the module is
              loaded.

       <b>zcurses_colors</b>
              Readonly array.  The colors supported by <b>zsh/curses</b>; available as soon as the module is loaded.

       <b>zcurses_keycodes</b>
              Readonly array.  The values that may be returned in the  second  parameter  supplied  to  `<b>zcurses</b>
              <b>input</b>'  in  the  order  in which they are defined internally by curses.  Not all function keys are
              listed, only <b>F0</b>; curses reserves space for <b>F0</b> up to <b>F63</b>.

       <b>zcurses_windows</b>
              Readonly array.  The current list of windows,  i.e.  all  windows  that  have  been  created  with
              `<b>zcurses</b> <b>addwin</b>' and not removed with `<b>zcurses</b> <b>delwin</b>'.

</pre><h4><b>THE</b> <b>ZSH/DATETIME</b> <b>MODULE</b></h4><pre>
       The <b>zsh/datetime</b> module makes available one builtin command:

       <b>strftime</b> [ <b>-s</b> <u>scalar</u> | <b>-n</b> ] <u>format</u> [ <u>epochtime</u> [ <u>nanoseconds</u> ] ]
       <b>strftime</b> <b>-r</b> [ <b>-q</b> ] [ <b>-s</b> <u>scalar</u> | <b>-n</b> ] <u>format</u> <u>timestring</u>
              Output the date in the <u>format</u> specified.  With no <u>epochtime</u>, the current system date/time is used;
              optionally,  <u>epochtime</u>  may  be  used  to  specify  the  number  of  seconds  since the epoch, and
              <u>nanoseconds</u> may additionally be used  to  specify  the  number  of  nanoseconds  past  the  second
              (otherwise  that  number  is  assumed  to be 0).  See <u><a href="../man3/strftime.3.html">strftime</a></u>(3) for details.  The zsh extensions
              described in the section EXPANSION OF PROMPT SEQUENCES in <u><a href="../man1/zshmisc.1.html">zshmisc</a></u>(1) are also available.

              <b>-n</b>     Suppress printing a newline after the formatted string.

              <b>-q</b>     Run quietly; suppress printing of all error messages described below.  Errors  for  invalid
                     <u>epochtime</u> values are always printed.

              <b>-r</b>     With  the  option  <b>-r</b> (reverse), use <u>format</u> to parse the input string <u>timestring</u> and output
                     the number of seconds since  the  epoch  at  which  the  time  occurred.   The  parsing  is
                     implemented  by  the system function <b>strptime</b>; see <u><a href="../man3/strptime.3.html">strptime</a></u>(3).  This means that zsh format
                     extensions are not available, but for reverse lookup they are not required.

                     In most implementations of <b>strftime</b> any timezone in the <u>timestring</u> is ignored and the local
                     timezone declared by the <b>TZ</b> environment variable is used; other parameters are set to  zero
                     if not present.

                     If  <u>timestring</u>  does  not  match  <u>format</u>  the  command returns status 1 and prints an error
                     message.  If <u>timestring</u> matches <u>format</u> but not all characters in <u>timestring</u> were used,  the
                     conversion succeeds but also prints an error message.

                     If either of the system functions <b>strptime</b> or <b>mktime</b> is not available, status 2 is returned
                     and an error message is printed.

              <b>-s</b> <u>scalar</u>
                     Assign  the  date  string  (or  epoch  time in seconds if <b>-r</b> is given) to <u>scalar</u> instead of
                     printing it.

              Note that depending on the system's declared integral time type, <b>strftime</b>  may  produce  incorrect
              results for epoch times greater than 2147483647 which corresponds to 2038-01-19 03:14:07 +0000.

       The <b>zsh/datetime</b> module makes available several parameters; all are readonly:

       <b>EPOCHREALTIME</b>
              A  floating point value representing the number of seconds since the epoch.  The notional accuracy
              is to nanoseconds if the <b>clock_gettime</b> call is available and to  microseconds  otherwise,  but  in
              practice  the  range  of  double  precision  floating  point and shell scheduling latencies may be
              significant effects.

       <b>EPOCHSECONDS</b>
              An integer value representing the number of seconds since the epoch.

       <b>epochtime</b>
              An array value containing the number of seconds since the epoch  in  the  first  element  and  the
              remainder  of  the  time  since the epoch in nanoseconds in the second element.  To ensure the two
              elements are  consistent  the  array  should  be  copied  or  otherwise  referenced  as  a  single
              substitution before the values are used.  The following idiom may be used:

                     <b>for</b> <b>secs</b> <b>nsecs</b> <b>in</b> <b>$epochtime;</b> <b>do</b>
                       <b>...</b>
                     <b>done</b>

</pre><h4><b>THE</b> <b>ZSH/DB/GDBM</b> <b>MODULE</b></h4><pre>
       The  <b>zsh/db/gdbm</b> module is used to create "tied" associative arrays that interface to database files.  If
       the GDBM interface is not available, the builtins defined by this module  will  report  an  error.   This
       module  is  also intended as a prototype for creating additional database interfaces, so the <b>ztie</b> builtin
       may move to a more generic module in the future.

       The builtins in this module are:

       <b>ztie</b> <b>-d</b> <b>db/gdbm</b> <b>-f</b> <u>filename</u> [ <b>-r</b> ] <u>arrayname</u>
              Open the GDBM database identified by <u>filename</u> and, if successful,  create  the  associative  array
              <u>arrayname</u> linked to the file.  To create a local tied array, the parameter must first be declared,
              so commands similar to the following would be executed inside a function scope:

                     <b>local</b> <b>-A</b> <b>sampledb</b>
                     <b>ztie</b> <b>-d</b> <b>db/gdbm</b> <b>-f</b> <b>sample.gdbm</b> <b>sampledb</b>

              The  <b>-r</b>  option  opens  the database file for reading only, creating a parameter with the readonly
              attribute.  Without this option, using `<b>ztie</b>' on a file for which the user  does  not  have  write
              permission  is  an  error.  If writable, the database is opened synchronously so fields changed in
              <u>arrayname</u> are immediately written to <u>filename</u>.

              Changes to the file modes <u>filename</u> after it has been opened do not alter the state  of  <u>arrayname</u>,
              but `<b>typeset</b> <b>-r</b> <u>arrayname</u>' works as expected.

       <b>zuntie</b> [ <b>-u</b> ] <u>arrayname</u> ...
              Close  the  GDBM  database  associated  with  each <u>arrayname</u> and then unset the parameter.  The <b>-u</b>
              option forces an unset of parameters made readonly with `<b>ztie</b> <b>-r</b>'.

              This happens automatically if the parameter is explicitly unset  or  its  local  scope  (function)
              ends.   Note  that  a  readonly  parameter may not be explicitly unset, so the only way to unset a
              global parameter created with `<b>ztie</b> <b>-r</b>' is to use `<b>zuntie</b> <b>-u</b>'.

       <b>zgdbmpath</b> <u>parametername</u>
              Put path to database file assigned to <u>parametername</u> into <b>REPLY</b> scalar.

       <b>zgdbm_tied</b>
              Array holding names of all tied parameters.

       The fields of an associative array tied to GDBM are neither cached nor otherwise stored in  memory,  they
       are  read from or written to the database on each reference.  Thus, for example, the values in a readonly
       array may be changed by a second writer of the same database file.

</pre><h4><b>THE</b> <b>ZSH/DELTOCHAR</b> <b>MODULE</b></h4><pre>
       The <b>zsh/deltochar</b> module makes available two ZLE functions:

       <b>delete-to-char</b>
              Read a character from the keyboard, and delete from the cursor position up to  and  including  the
              next  (or,  with repeat count <u>n</u>, the <u>n</u>th) instance of that character.  Negative repeat counts mean
              delete backwards.

       <b>zap-to-char</b>
              This behaves like <b>delete-to-char</b>, except that the final occurrence of the character itself is  not
              deleted.

</pre><h4><b>THE</b> <b>ZSH/EXAMPLE</b> <b>MODULE</b></h4><pre>
       The <b>zsh/example</b> module makes available one builtin command:

       <b>example</b> [ <b>-flags</b> ] [ <u>args</u> ... ]
              Displays the flags and arguments it is invoked with.

       The purpose of the module is to serve as an example of how to write a module.

</pre><h4><b>THE</b> <b>ZSH/FILES</b> <b>MODULE</b></h4><pre>
       The  <b>zsh/files</b>  module  makes  available  some  common  commands for file manipulation as builtins; these
       commands are probably not needed for many normal situations but  can  be  useful  in  emergency  recovery
       situations  with  constrained  resources.   The  commands  do  not implement all features now required by
       relevant standards committees.

       For all commands, a variant beginning <b>zf_</b> is also available and loaded automatically.  Using the features
       capability of zmodload will let you load only those names you want.  Note that it's possible to load only
       the builtins with zsh-specific names using the following command:

              <b>zmodload</b> <b>-m</b> <b>-F</b> <b>zsh/files</b> <b>b:zf_\*</b>

       The commands loaded by default are:

       <b>chgrp</b> [ <b>-hRs</b> ] <u>group</u> <u>filename</u> ...
              Changes group of files specified.  This is equivalent  to  <b>chown</b>  with  a  <u>user-spec</u>  argument  of
              `<b>:</b><u>group</u>'.

       <b>chmod</b> [ <b>-Rs</b> ] <u>mode</u> <u>filename</u> ...
              Changes mode of files specified.

              The specified <u>mode</u> must be in octal.

              The <b>-R</b> option causes <b>chmod</b> to recursively descend into directories, changing the mode of all files
              in the directory after changing the mode of the directory itself.

              The  <b>-s</b> option is a zsh extension to <b>chmod</b> functionality.  It enables paranoid behaviour, intended
              to avoid security problems involving a <b>chmod</b> being tricked into affecting  files  other  than  the
              ones  intended.   It  will  refuse  to  follow  symbolic  links, so that (for example) ``<b>chmod</b> <b>600</b>
              <b>/tmp/foo/passwd</b>'' can't accidentally chmod <b><a href="file:/etc/passwd">/etc/passwd</a></b> if <b>/tmp/foo</b> happens to be a link  to  <b><a href="file:/etc">/etc</a></b>.
              It  will  also  check  where  it is after leaving directories, so that a recursive chmod of a deep
              directory tree can't end up recursively chmoding <b><a href="file:/usr">/usr</a></b> as a result of directories  being  moved  up
              the tree.

       <b>chown</b> [ <b>-hRs</b> ] <u>user-spec</u> <u>filename</u> ...
              Changes ownership and group of files specified.

              The <u>user-spec</u> can be in four forms:

              <u>user</u>   change owner to <u>user</u>; do not change group
              <u>user</u><b>::</b> change owner to <u>user</u>; do not change group
              <u>user</u><b>:</b>  change owner to <u>user</u>; change group to <u>user</u>'s primary group
              <u>user</u><b>:</b><u>group</u>
                     change owner to <u>user</u>; change group to <u>group</u>
              <b>:</b><u>group</u> do not change owner; change group to <u>group</u>

              In each case, the `<b>:</b>' may instead be a `<b>.</b>'.  The rule is that if there is a `<b>:</b>' then the separator
              is `<b>:</b>', otherwise if there is a `<b>.</b>' then the separator is `<b>.</b>', otherwise there is no separator.

              Each  of <u>user</u> and <u>group</u> may be either a username (or group name, as appropriate) or a decimal user
              ID (group ID).  Interpretation as a name takes precedence, if there is an all-numeric username (or
              group name).

              If the target is a symbolic link, the <b>-h</b> option causes <b>chown</b> to set  the  ownership  of  the  link
              instead of its target.

              The  <b>-R</b> option causes <b>chown</b> to recursively descend into directories, changing the ownership of all
              files in the directory after changing the ownership of the directory itself.

              The <b>-s</b> option is a zsh extension to <b>chown</b> functionality.  It enables paranoid behaviour,  intended
              to  avoid  security  problems  involving a <b>chown</b> being tricked into affecting files other than the
              ones intended.  It will refuse to follow symbolic links,  so  that  (for  example)  ``<b>chown</b>  <b>luser</b>
              <b>/tmp/foo/passwd</b>''  can't  accidentally chown <b><a href="file:/etc/passwd">/etc/passwd</a></b> if <b>/tmp/foo</b> happens to be a link to <b><a href="file:/etc">/etc</a></b>.
              It will also check where it is after leaving directories, so that a  recursive  chown  of  a  deep
              directory  tree  can't  end up recursively chowning <b><a href="file:/usr">/usr</a></b> as a result of directories being moved up
              the tree.

       <b>ln</b> [ <b>-dfhins</b> ] <u>filename</u> <u>dest</u>
       <b>ln</b> [ <b>-dfhins</b> ] <u>filename</u> ... <u>dir</u>
              Creates hard (or, with <b>-s</b>, symbolic) links.  In the  first  form,  the  specified  <u>dest</u>ination  is
              created,  as a link to the specified <u>filename</u>.  In the second form, each of the <u>filename</u>s is taken
              in turn, and linked to a pathname in the specified <u>dir</u>ectory  that  has  the  same  last  pathname
              component.

              Normally,  <b>ln</b>  will not attempt to create hard links to directories.  This check can be overridden
              using the <b>-d</b> option.  Typically only the super-user can actually succeed in creating hard links to
              directories.  This does not apply to symbolic links in any case.

              By default, existing files cannot be replaced by links.  The <b>-i</b>  option  causes  the  user  to  be
              queried  about  replacing  existing  files.   The  <b>-f</b>  option causes existing files to be silently
              deleted, without querying.  <b>-f</b> takes precedence.

              The <b>-h</b> and <b>-n</b> options are identical and both exist for compatibility; either one indicates that if
              the target is a symlink then it should not be dereferenced.  Typically this is used in combination
              with <b>-sf</b> so that if an existing link points to a directory then it will  be  removed,  instead  of
              followed.   If  this  option  is  used  with  multiple filenames and the target is a symbolic link
              pointing to a directory then the result is an error.

       <b>mkdir</b> [ <b>-p</b> ] [ <b>-m</b> <u>mode</u> ] <u>dir</u> ...
              Creates directories.  With the <b>-p</b> option, non-existing parent directories  are  first  created  if
              necessary,  and  there will be no complaint if the directory already exists.  The <b>-m</b> option can be
              used to specify (in octal) a set of file permissions for the created directories,  otherwise  mode
              777 modified by the current <b>umask</b> (see <u><a href="../man2/umask.2.html">umask</a></u>(2)) is used.

       <b>mv</b> [ <b>-fi</b> ] <u>filename</u> <u>dest</u>
       <b>mv</b> [ <b>-fi</b> ] <u>filename</u> ... <u>dir</u>
              Moves files.  In the first form, the specified <u>filename</u> is moved to the specified <u>dest</u>ination.  In
              the  second form, each of the <u>filename</u>s is taken in turn, and moved to a pathname in the specified
              <u>dir</u>ectory that has the same last pathname component.

              By default, the user will be queried before replacing any file that the user cannot write to,  but
              writable  files  will  be  silently  removed.   The  <b>-i</b> option causes the user to be queried about
              replacing any existing files.  The <b>-f</b> option causes any existing files  to  be  silently  deleted,
              without querying.  <b>-f</b> takes precedence.

              Note  that  this  <b>mv</b>  will  not move files across devices.  Historical versions of <b>mv</b>, when actual
              renaming is impossible, fall back on copying and removing files; if this behaviour is desired, use
              <b>cp</b> and <b>rm</b> manually.  This may change in a future version.

       <b>rm</b> [ <b>-dfiRrs</b> ] <u>filename</u> ...
              Removes files and directories specified.

              Normally, <b>rm</b> will not remove directories (except with the <b>-R</b> or <b>-r</b> options).  The <b>-d</b> option causes
              <b>rm</b> to try removing directories with <b>unlink</b> (see  <u><a href="../man2/unlink.2.html">unlink</a></u>(2)),  the  same  method  used  for  files.
              Typically only the super-user can actually succeed in unlinking directories in this way.  <b>-d</b> takes
              precedence over <b>-R</b> and <b>-r</b>.

              By  default,  the user will be queried before removing any file that the user cannot write to, but
              writable files will be silently removed.  The <b>-i</b> option  causes  the  user  to  be  queried  about
              removing  any  files.   The  <b>-f</b>  option causes files to be silently deleted, without querying, and
              suppresses all error indications.  <b>-f</b> takes precedence.

              The <b>-R</b> and <b>-r</b> options cause <b>rm</b> to recursively descend into directories, deleting all files in  the
              directory before removing the directory with the <b>rmdir</b> system call (see <u><a href="../man2/rmdir.2.html">rmdir</a></u>(2)).

              The  <b>-s</b> option is a zsh extension to <b>rm</b> functionality.  It enables paranoid behaviour, intended to
              avoid common security problems involving a root-run <b>rm</b> being tricked  into  removing  files  other
              than  the  ones  intended.   It  will  refuse to follow symbolic links, so that (for example) ``<b>rm</b>
              <b>/tmp/foo/passwd</b>'' can't accidentally remove <b><a href="file:/etc/passwd">/etc/passwd</a></b> if <b>/tmp/foo</b> happens to be a link to  <b><a href="file:/etc">/etc</a></b>.
              It  will  also  check where it is after leaving directories, so that a recursive removal of a deep
              directory tree can't end up recursively removing <b><a href="file:/usr">/usr</a></b> as a result of directories  being  moved  up
              the tree.

       <b>rmdir</b> <u>dir</u> ...
              Removes empty directories specified.

       <b>sync</b>   Calls  the  system  call  of the same name (see <u><a href="../man2/sync.2.html">sync</a></u>(2)), which flushes dirty buffers to disk.  It
              might return before the I/O has actually been completed.

</pre><h4><b>THE</b> <b>ZSH/LANGINFO</b> <b>MODULE</b></h4><pre>
       The <b>zsh/langinfo</b> module makes available one parameter:

       <b>langinfo</b>
              An associative array that maps langinfo elements to their values.

              Your implementation may support a number of the following keys:

              <b>CODESET</b>, <b>D_T_FMT</b>, <b>D_FMT</b>, <b>T_FMT</b>,  <b>RADIXCHAR</b>,  <b>THOUSEP</b>,  <b>YESEXPR</b>,  <b>NOEXPR</b>,  <b>CRNCYSTR</b>,  <b>ABDAY_{1..7}</b>,
              <b>DAY_{1..7}</b>,  <b>ABMON_{1..12}</b>,  <b>MON_{1..12}</b>, <b>T_FMT_AMPM</b>, <b>AM_STR</b>, <b>PM_STR</b>, <b>ERA</b>, <b>ERA_D_FMT</b>, <b>ERA_D_T_FMT</b>,
              <b>ERA_T_FMT</b>, <b>ALT_DIGITS</b>

</pre><h4><b>THE</b> <b>ZSH/MAPFILE</b> <b>MODULE</b></h4><pre>
       The <b>zsh/mapfile</b> module provides one special associative array parameter of the same name.

       <b>mapfile</b>
              This associative array takes as keys the names of files; the resulting value is the content of the
              file.  The value is treated identically to any other text coming from a parameter.  The value  may
              also  be  assigned to, in which case the file in question is written (whether or not it originally
              existed); or an element may be unset, which will delete the file in question.  For example, `<b>vared</b>
              <b>'mapfile[myfile]'</b>' works as expected, editing the file `<b>myfile</b>'.

              When the array is accessed as a whole, the keys are the names of files in the  current  directory,
              and  the  values  are  empty (to save a huge overhead in memory).  Thus <b>${(k)mapfile}</b> has the same
              effect as the glob operator <b>*(D)</b>, since files beginning with a dot are not special.  Care must  be
              taken  with  expressions  such  as  <b>rm</b>  <b>${(k)mapfile}</b>, which will delete every file in the current
              directory without the usual `<b>rm</b> <b>*</b>' test.

              The parameter <b>mapfile</b> may be made read-only; in that case, files referenced may not be written  or
              deleted.

              A  file  may  conveniently  be  read  into  an  array  as  one  line  per  element  with  the form
              `<u>array</u><b>=("${(f@)mapfile[</b><u>filename</u><b>]}")</b>'.  The double quotes and the  `<b>@</b>'  are  necessary  to  prevent
              empty  lines  from being removed.  Note that if the file ends with a newline, the shell will split
              on the final newline, generating an additional empty  field;  this  can  be  suppressed  by  using
              `<u>array</u><b>=("${(f@)${mapfile[</b><u>filename</u><b>]%$'\n'}}")</b>'.

   <b>Limitations</b>
       Although  reading  and  writing  of  the  file  in question is efficiently handled, zsh's internal memory
       management may be arbitrarily baroque; however, <b>mapfile</b> is usually very much more efficient than anything
       involving a loop.  Note in particular that the whole contents of the file will always  reside  physically
       in memory when accessed (possibly multiple times, due to standard parameter substitution operations).  In
       particular,  this  means  handling  of sufficiently long files (greater than the machine's swap space, or
       than the range of the pointer type) will be incorrect.

       No errors are printed or flagged for non-existent, unreadable, or  unwritable  files,  as  the  parameter
       mechanism is too low in the shell execution hierarchy to make this convenient.

       It  is unfortunate that the mechanism for loading modules does not yet allow the user to specify the name
       of the shell parameter to be given the special behaviour.

</pre><h4><b>THE</b> <b>ZSH/MATHFUNC</b> <b>MODULE</b></h4><pre>
       The <b>zsh/mathfunc</b> module provides standard mathematical functions for  use  when  evaluating  mathematical
       formulae.  The syntax agrees with normal C and FORTRAN conventions, for example,

              <b>((</b> <b>f</b> <b>=</b> <b>sin(0.3)</b> <b>))</b>

       assigns the sine of 0.3 to the parameter f.

       Most  functions  take floating point arguments and return a floating point value.  However, any necessary
       conversions from or to integer type will be performed automatically by the shell.  Apart from <b>atan</b> with a
       second argument and the <b>abs</b>, <b>int</b> and <b>float</b> functions, all functions behave as noted in  the  manual  page
       for  the  corresponding  C  function, except that any arguments out of range for the function in question
       will be detected by the shell and an error reported.

       The following functions take a single floating point argument: <b>acos</b>, <b>acosh</b>,  <b>asin</b>,  <b>asinh</b>,  <b>atan</b>,  <b>atanh</b>,
       <b>cbrt</b>,  <b>ceil</b>,  <b>cos</b>,  <b>cosh</b>,  <b>erf</b>,  <b>erfc</b>, <b>exp</b>, <b>expm1</b>, <b>fabs</b>, <b>floor</b>, <b>gamma</b>, <b>j0</b>, <b>j1</b>, <b>lgamma</b>, <b>log</b>, <b>log10</b>, <b>log1p</b>,
       <b>log2</b>, <b>logb</b>, <b>sin</b>, <b>sinh</b>, <b>sqrt</b>, <b>tan</b>, <b>tanh</b>, <b>y0</b>, <b>y1</b>.  The <b>atan</b> function can optionally take a second argument,
       in which case it behaves like the C function <b>atan2</b>.  The <b>ilogb</b> function takes  a  single  floating  point
       argument, but returns an integer.

       The  function  <b>signgam</b>  takes  no  arguments, and returns an integer, which is the C variable of the same
       name, as described in <u><a href="../man3/gamma.3.html">gamma</a></u>(3).  Note that it is therefore only useful immediately after a call to  <b>gamma</b>
       or <b>lgamma</b>.  Note also that `<b>signgam()</b>' and `<b>signgam</b>' are distinct expressions.

       The  functions  <b>min</b>,  <b>max</b>,  and  <b>sum</b>  are  defined  not  in this module but in the <b>zmathfunc</b> autoloadable
       function, described in the section `Mathematical Functions' in <u><a href="../man1/zshcontrib.1.html">zshcontrib</a></u>(1).

       The following functions take two floating point arguments: <b>copysign</b>, <b>fmod</b>, <b>hypot</b>, <b>nextafter</b>.

       The following take an integer first argument and a floating point second argument: <b>jn</b>, <b>yn</b>.

       The following take a floating point first argument and an integer second argument: <b>ldexp</b>, <b>scalb</b>.

       The function <b>abs</b> does not convert the type of its single argument;  it  returns  the  absolute  value  of
       either a floating point number or an integer.  The functions <b>float</b> and <b>int</b> convert their arguments into a
       floating point or integer value (by truncation) respectively.

       Note  that  the  C  <b>pow</b> function is available in ordinary math evaluation as the `<b>**</b>' operator and is not
       provided here.

       The function <b>rand48</b> is available if your system's mathematical library has the function  <b><a href="../man3/erand48.3.html">erand48</a>(3)</b>.   It
       returns  a  pseudo-random  floating  point  number  between  0  and 1.  It takes a single string optional
       argument.

       If the argument is not present, the random number seed is initialised  by  three  calls  to  the  <b><a href="../man3/rand.3.html">rand</a>(3)</b>
       function --- this produces the same random numbers as the next three values of <b>$RANDOM</b>.

       If  the argument is present, it gives the name of a scalar parameter where the current random number seed
       will be stored.  On the first call, the value must  contain  at  least  twelve  hexadecimal  digits  (the
       remainder  of the string is ignored), or the seed will be initialised in the same manner as for a call to
       <b>rand48</b> with no argument.  Subsequent calls to <b>rand48</b>(<u>param</u>) will then maintain the seed in the  parameter
       <u>param</u>  as a string of twelve hexadecimal digits, with no base signifier.  The random number sequences for
       different parameters are completely independent, and are also independent from  that  used  by  calls  to
       <b>rand48</b> with no argument.

       For example, consider

              <b>print</b> <b>$((</b> <b>rand48(seed)</b> <b>))</b>
              <b>print</b> <b>$((</b> <b>rand48()</b> <b>))</b>
              <b>print</b> <b>$((</b> <b>rand48(seed)</b> <b>))</b>

       Assuming <b>$seed</b> does not exist, it will be initialised by the first call.  In the second call, the default
       seed  is  initialised;  note,  however,  that  because of the properties of <b>rand()</b> there is a correlation
       between the seeds used for the two initialisations, so for more secure uses, you should generate your own
       12-byte seed.  The third call returns to the same sequence of random numbers  used  in  the  first  call,
       unaffected by the intervening <b>rand48()</b>.

</pre><h4><b>THE</b> <b>ZSH/NEARCOLOR</b> <b>MODULE</b></h4><pre>
       The  <b>zsh/nearcolor</b> module replaces colours specified as hex triplets with the nearest colour in the 88 or
       256 colour palettes that are widely used by terminal emulators.  By default, 24-bit  true  colour  escape
       codes  are  generated  when  colours  are  specified  using hex triplets.  These are not supported by all
       terminals.  The purpose of this module is to make it easier to define colour preferences in a  form  that
       can work across a range of terminal emulators.

       Aside  from  the  default colour, the ANSI standard for terminal escape codes provides for eight colours.
       The bright attribute brings  this  to  sixteen.  These  basic  colours  are  commonly  used  in  terminal
       applications  due  to  being  widely  supported. Expanded 88 and 256 colour palettes are also common and,
       while the first sixteen colours vary somewhat between terminals and configurations, these add a generally
       consistent and predictable set of colours.

       In order to use the <b>zsh/nearcolor</b> module, it only needs to be loaded. Thereafter, whenever  a  colour  is
       specified  using a hex triplet, it will be compared against each of the available colours and the closest
       will be selected. The first sixteen colours are never matched in this process due to being unpredictable.

       It isn't possible to reliably detect support for true colour in the terminal emulator.  It  is  therefore
       recommended  to  be  selective in loading the <b>zsh/nearcolor</b> module. For example, the following checks the
       <b>COLORTERM</b> environment variable:

              <b>[[</b> <b>$COLORTERM</b> <b>=</b> <b>*(24bit|truecolor)*</b> <b>]]</b> <b>||</b> <b>zmodload</b> <b>zsh/nearcolor</b>

       Note that some terminals accept the true color escape codes but map them internally  to  a  more  limited
       palette in a similar manner to the <b>zsh/nearcolor</b> module.

</pre><h4><b>THE</b> <b>ZSH/NEWUSER</b> <b>MODULE</b></h4><pre>
       The  <b>zsh/newuser</b>  module  is loaded at boot if it is available, the <b>RCS</b> option is set, and the <b>PRIVILEGED</b>
       option is not set (all three are true by default).  This takes place immediately after  commands  in  the
       global  <b>zshenv</b>  file  (typically  <b>/etc/zsh/zshenv</b>),  if  any,  have  been executed.  If the module is not
       available it is silently ignored by the shell; the module may safely be removed from <b>$MODULE_PATH</b> by  the
       administrator if it is not required.

       On  loading, the module tests if any of the start-up files <b>.zshenv</b>, <b>.zprofile</b>, <b>.zshrc</b> or <b>.zlogin</b> exist in
       the directory given by the environment variable <b>ZDOTDIR</b>, or the user's home directory if that is not set.
       The test is not performed and the module halts processing if the shell was in an emulation mode (i.e. had
       been invoked as some other shell than zsh).

       If none of the start-up files were found, the module then looks for the file <b>newuser</b> first in a  sitewide
       directory,  usually  the  parent  directory of the <b>site-functions</b> directory, and if that is not found the
       module searches in a version-specific directory, usually the parent of the <b>functions</b> directory containing
       version-specific  functions.   (These  directories  can  be  configured  when  zsh  is  built  using  the
       <b>--enable-site-scriptdir=</b><u>dir</u> and <b>--enable-scriptdir=</b><u>dir</u> flags to <b>configure</b>, respectively; the defaults are
       <u>prefix</u><b>/share/zsh</b> and <u>prefix</u><b>/share/zsh/$ZSH_VERSION</b> where the default <u>prefix</u> is <b><a href="file:/usr/local">/usr/local</a></b>.)

       If  the  file  <b>newuser</b>  is  found, it is then sourced in the same manner as a start-up file.  The file is
       expected to contain code to install start-up files for the user, however any valid  shell  code  will  be
       executed.

       The <b>zsh/newuser</b> module is then unconditionally unloaded.

       Note  that  it is possible to achieve exactly the same effect as the <b>zsh/newuser</b> module by adding code to
       <b>/etc/zsh/zshenv</b>.  The module exists simply to allow the shell to make arrangements for new users  without
       the need for intervention by package maintainers and system administrators.

       The  script supplied with the module invokes the shell function <b>zsh-newuser-install</b>.  This may be invoked
       directly by the user even if the <b>zsh/newuser</b> module is disabled.  Note, however, that if  the  module  is
       not installed the function will not be installed either.  The function is documented in the section `User
       Configuration Functions' in <u><a href="../man1/zshcontrib.1.html">zshcontrib</a></u>(1).

</pre><h4><b>THE</b> <b>ZSH/PARAMETER</b> <b>MODULE</b></h4><pre>
       The  <b>zsh/parameter</b>  module gives access to some of the internal hash tables used by the shell by defining
       some special parameters.

       <b>options</b>
              The keys for this associative array are the names of the options that can be set and  unset  using
              the  <b>setopt</b>  and <b>unsetopt</b> builtins. The value of each key is either the string <b>on</b> if the option is
              currently set, or the string <b>off</b> if the option is unset.  Setting a key to one of these strings is
              like setting or unsetting the option, respectively. Unsetting a key in this array is like  setting
              it to the value <b>off</b>.

       <b>commands</b>
              This  array  gives  access to the command hash table. The keys are the names of external commands,
              the values are the pathnames of the files that  would  be  executed  when  the  command  would  be
              invoked. Setting a key in this array defines a new entry in this table in the same way as with the
              <b>hash</b>  builtin.  Unsetting  a key as in `<b>unset</b> <b>"commands[foo]"</b>' removes the entry for the given key
              from the command hash table.

       <b>functions</b>
              This associative array maps names of enabled functions to their definitions. Setting a key  in  it
              is  like  defining  a  function  with  the  name given by the key and the body given by the value.
              Unsetting a key removes the definition for the function named by the key.

       <b>dis_functions</b>
              Like <b>functions</b> but for disabled functions.

       <b>functions_source</b>
              This readonly associative array maps names of enabled functions to the name of the file containing
              the source of the function.

              For an autoloaded function that has already been loaded, or marked for autoload with  an  absolute
              path,  or  that  has  had  its  path  resolved  with  `<b>functions</b>  <b>-r</b>',  this is the file found for
              autoloading, resolved to an absolute path.

              For a function defined within the body of a script or sourced file, this is the name of that file.
              In this case, this is the exact path originally used to that file, which may be a relative path.

              For any other function, including any defined at an interactive prompt  or  an  autoload  function
              whose  path  has  not  yet  been resolved, this is the empty string.  However, the hash element is
              reported as defined just so long as the function is present:  the keys to this hash are  the  same
              as those to <b>$functions</b>.

       <b>dis_functions_source</b>
              Like <b>functions_source</b> but for disabled functions.

       <b>builtins</b>
              This  associative  array  gives information about the builtin commands currently enabled. The keys
              are the names of the builtin commands and the values are either `<b>undefined</b>' for  builtin  commands
              that  will automatically be loaded from a module if invoked or `<b>defined</b>' for builtin commands that
              are already loaded.

       <b>dis_builtins</b>
              Like <b>builtins</b> but for disabled builtin commands.

       <b>reswords</b>
              This array contains the enabled reserved words.

       <b>dis_reswords</b>
              Like <b>reswords</b> but for disabled reserved words.

       <b>patchars</b>
              This array contains the enabled pattern characters.

       <b>dis_patchars</b>
              Like <b>patchars</b> but for disabled pattern characters.

       <b>aliases</b>
              This maps the names of the regular aliases currently enabled to their expansions.

       <b>dis_aliases</b>
              Like <b>aliases</b> but for disabled regular aliases.

       <b>galiases</b>
              Like <b>aliases</b>, but for global aliases.

       <b>dis_galiases</b>
              Like <b>galiases</b> but for disabled global aliases.

       <b>saliases</b>
              Like <b>raliases</b>, but for suffix aliases.

       <b>dis_saliases</b>
              Like <b>saliases</b> but for disabled suffix aliases.

       <b>parameters</b>
              The keys in this associative array are the names of the parameters currently defined.  The  values
              are strings describing the type of the parameter, in the same format used by the <b>t</b> parameter flag,
              see <u><a href="../man1/zshexpn.1.html">zshexpn</a></u>(1) .  Setting or unsetting keys in this array is not possible.

       <b>modules</b>
              An  associative  array  giving  information  about  modules. The keys are the names of the modules
              loaded, registered to be autoloaded, or aliased. The value says which state the named module is in
              and is one of the strings `<b>loaded</b>', `<b>autoloaded</b>', or `<b>alias:</b><u>name</u>', where  <u>name</u>  is  the  name  the
              module is aliased to.

              Setting or unsetting keys in this array is not possible.

       <b>dirstack</b>
              A  normal  array  holding  the  elements  of the directory stack. Note that the output of the <b>dirs</b>
              builtin command includes one more directory, the current working directory.

       <b>history</b>
              This associative array maps history event numbers to the  full  history  lines.   Although  it  is
              presented  as  an  associative  array, the array of all values (<b>${history[@]}</b>) is guaranteed to be
              returned in order from most recent to oldest history event, that is, by decreasing  history  event
              number.

       <b>historywords</b>
              A  special  array  containing the words stored in the history.  These also appear in most to least
              recent order.

       <b>jobdirs</b>
              This associative array maps job numbers to the directories from which the job was  started  (which
              may not be the current directory of the job).

              The  keys of the associative arrays are usually valid job numbers, and these are the values output
              with, for example, <b>${(k)jobdirs}</b>.  Non-numeric job references may be used when looking up a value;
              for example, <b>${jobdirs[%+]}</b> refers to the current job.

              See the <b>jobs</b> builtin for how job information is provided in a subshell.

       <b>jobtexts</b>
              This associative array maps job numbers to the texts of the command lines that were used to  start
              the jobs.

              Handling of the keys of the associative array is as described for <b>jobdirs</b> above.

              See the <b>jobs</b> builtin for how job information is provided in a subshell.

       <b>jobstates</b>
              This  associative  array  gives information about the states of the jobs currently known. The keys
              are the job numbers and the values are strings  of  the  form  `<u>job-state</u><b>:</b><u>mark</u><b>:</b><u>pid</u><b>=</b><u>state</u>...'.  The
              <u>job-state</u> gives the state the whole job is currently in, one of `<b>running</b>', `<b>suspended</b>', or `<b>done</b>'.
              The  <u>mark</u>  is  `<b>+</b>'  for  the  current  job,  `<b>-</b>' for the previous job and empty otherwise. This is
              followed by one `<b>:</b><u>pid</u><b>=</b><u>state</u>' for every process in the job. The <u>pid</u>s are, of  course,  the  process
              IDs and the <u>state</u> describes the state of that process.

              Handling of the keys of the associative array is as described for <b>jobdirs</b> above.

              See the <b>jobs</b> builtin for how job information is provided in a subshell.

       <b>nameddirs</b>
              This associative array maps the names of named directories to the pathnames they stand for.

       <b>userdirs</b>
              This associative array maps user names to the pathnames of their home directories.

       <b>usergroups</b>
              This  associative  array  maps names of system groups of which the current user is a member to the
              corresponding group identifiers.  The contents are the  same  as  the  groups  output  by  the  <b>id</b>
              command.

       <b>funcfiletrace</b>
              This array contains the absolute line numbers and corresponding file names for the point where the
              current  function, sourced file, or (if <b>EVAL_LINENO</b> is set) <b>eval</b> command was called.  The array is
              of the same length as <b>funcsourcetrace</b> and <b>functrace</b>, but differs from <b>funcsourcetrace</b> in that  the
              line  and  file  are the point of call, not the point of definition, and differs from <b>functrace</b> in
              that all values are absolute line numbers in files,  rather  than  relative  to  the  start  of  a
              function, if any.

       <b>funcsourcetrace</b>
              This  array  contains  the  file names and line numbers of the points where the functions, sourced
              files, and (if <b>EVAL_LINENO</b> is set) <b>eval</b> commands currently being executed were defined.  The  line
              number  is  the line where the `<b>function</b> <u>name</u>' or `<u>name</u> <b>()</b>' started.  In the case of an autoloaded
              function  the line number is reported as zero.  The format of each element is <u>filename</u><b>:</b><u>lineno</u>.

              For functions autoloaded from a file in native zsh format, where only the  body  of  the  function
              occurs  in the file, or for files that have been executed by the <b>source</b> or `<b>.</b>' builtins, the trace
              information is shown as <u>filename</u><b>:</b><u>0</u>, since the entire file is the definition.  The source file name
              is resolved to an absolute path when the function is loaded or the path to it otherwise resolved.

              Most users will be interested in the information in the <b>funcfiletrace</b> array instead.

       <b>funcstack</b>
              This array contains the names of the functions, sourced files, and (if <b>EVAL_LINENO</b>  is  set)  <b>eval</b>
              commands.  currently  being  executed.  The  first  element  is the name of the function using the
              parameter.

              The standard shell array <b>zsh_eval_context</b> can be used to determine the  type  of  shell  construct
              being  executed  at each depth: note, however, that is in the opposite order, with the most recent
              item last, and it is more detailed, for example including an entry for <b>toplevel</b>,  the  main  shell
              code being executed either interactively or from a script, which is not present in <b>$funcstack</b>.

       <b>functrace</b>
              This  array  contains  the  names  and  line numbers of the callers corresponding to the functions
              currently being executed.  The format of each element is <u>name</u><b>:</b><u>lineno</u>.  Callers are also shown  for
              sourced files; the caller is the point where the <b>source</b> or `<b>.</b>' command was executed.

</pre><h4><b>THE</b> <b>ZSH/PCRE</b> <b>MODULE</b></h4><pre>
       The <b>zsh/pcre</b> module makes some commands available as builtins:

       <b>pcre_compile</b> [ <b>-aimxs</b> ] <u>PCRE</u>
              Compiles a perl-compatible regular expression.

              Option  <b>-a</b>  will  force  the  pattern  to  be anchored.  Option <b>-i</b> will compile a case-insensitive
              pattern.  Option <b>-m</b> will compile a multi-line pattern; that is, <b>^</b> and <b>$</b> will match newlines within
              the pattern.  Option <b>-x</b> will compile an extended pattern, wherein whitespace and  <b>#</b>  comments  are
              ignored.   Option  <b>-s</b>  makes  the  dot  metacharacter  match  all characters, including those that
              indicate newline.

       <b>pcre_study</b>
              Studies the previously-compiled PCRE which may result in faster matching.

       <b>pcre_match</b> [ <b>-v</b> <u>var</u> ] [ <b>-a</b> <u>arr</u> ] [ <b>-n</b> <u>offset</u> ] [ <b>-b</b> ] <u>string</u>
              Returns successfully if <b>string</b> matches the previously-compiled PCRE.

              Upon successful match, if the expression captures substrings within parentheses,  <b>pcre_match</b>  will
              set  the array <b>match</b> to those substrings, unless the <b>-a</b> option is given, in which case it will set
              the array <u>arr</u>.  Similarly, the variable <b>MATCH</b> will be set to the entire  matched  portion  of  the
              string,  unless  the <b>-v</b> option is given, in which case the variable <u>var</u> will be set.  No variables
              are altered if there is no successful match.  A <b>-n</b> option starts searching for a  match  from  the
              byte  <u>offset</u>  position in <u>string</u>.  If the <b>-b</b> option is given, the variable <b>ZPCRE_OP</b> will be set to
              an offset pair string, representing the byte offset positions of the entire matched portion within
              the <u>string</u>.  For example, a <b>ZPCRE_OP</b> set to "32 45" indicates that the matched  portion  began  on
              byte  offset  32  and  ended  on  byte  offset  44.  Here, byte offset position 45 is the position
              directly after the matched portion.  Keep in mind that the byte  position  isn't  necessarily  the
              same  as the character position when UTF-8 characters are involved.  Consequently, the byte offset
              positions are only to be relied on in the context of using them for subsequent searches on <u>string</u>,
              using an offset position as an argument to the <b>-n</b> option.  This is mostly used  to  implement  the
              "find all non-overlapping matches" functionality.

              A simple example of "find all non-overlapping matches":

                     <b>string="The</b> <b>following</b> <b>zip</b> <b>codes:</b> <b>78884</b> <b>90210</b> <b>99513"</b>
                     <b>pcre_compile</b> <b>-m</b> <b>"\d{5}"</b>
                     <b>accum=()</b>
                     <b>pcre_match</b> <b>-b</b> <b>--</b> <b>$string</b>
                     <b>while</b> <b>[[</b> <b>$?</b> <b>-eq</b> <b>0</b> <b>]]</b> <b>do</b>
                         <b>b=($=ZPCRE_OP)</b>
                         <b>accum+=$MATCH</b>
                         <b>pcre_match</b> <b>-b</b> <b>-n</b> <b>$b[2]</b> <b>--</b> <b>$string</b>
                     <b>done</b>
                     <b>print</b> <b>-l</b> <b>$accum</b>

       The <b>zsh/pcre</b> module makes available the following test condition:

       <u>expr</u> <b>-pcre-match</b> <u>pcre</u>
              Matches a string against a perl-compatible regular expression.

              For example,

                     <b>[[</b> <b>"$text"</b> <b>-pcre-match</b> <b>^d+$</b> <b>]]</b> <b>&amp;&amp;</b>
                     <b>print</b> <b>text</b> <b>variable</b> <b>contains</b> <b>only</b> <b>"d's".</b>

              If  the  <b>REMATCH_PCRE</b>  option  is  set,  the  <b>=~</b>  operator  is  equivalent to <b>-pcre-match</b>, and the
              <b>NO_CASE_MATCH</b> option may be used.   Note  that  <b>NO_CASE_MATCH</b>  never  applies  to  the  <b>pcre_match</b>
              builtin, instead use the <b>-i</b> switch of <b>pcre_compile</b>.

</pre><h4><b>THE</b> <b>ZSH/PARAM/PRIVATE</b> <b>MODULE</b></h4><pre>
       The  <b>zsh/param/private</b> module is used to create parameters whose scope is limited to the current function
       body, and <u>not</u> to other functions called by the current function.

       This module provides a single autoloaded builtin:

       <b>private</b> [ {<b>+</b>|<b>-</b>}<b>AHUahlmrtux</b> ] [ {<b>+</b>|<b>-</b>}<b>EFLRZi</b> [ <u>n</u> ] ] [ <u>name</u>[<b>=</b><u>value</u>] ... ]
              The <b>private</b> builtin accepts all the same options and arguments as  <b>local</b>  (<u><a href="../man1/zshbuiltins.1.html">zshbuiltins</a></u>(1))  except
              for the `<b>-T</b>' option.  Tied parameters may not be made private.

              The  `<b>-p</b>'  option  is presently a no-op because the state of private parameters cannot reliably be
              reloaded.  This also applies to printing private parameters with `<b>typeset</b> <b>-p</b>'.

              If used at the top level (outside a function scope), <b>private</b> creates a  normal  parameter  in  the
              same  manner  as <b>declare</b> or <b>typeset</b>.  A warning about this is printed if <b>WARN_CREATE_GLOBAL</b> is set
              (<u><a href="../man1/zshoptions.1.html">zshoptions</a></u>(1)).  Used inside a function scope, <b>private</b> creates a local parameter similar  to  one
              declared with <b>local</b>, except having special properties noted below.

              Special  parameters  which expose or manipulate internal shell state, such as <b>ARGC</b>, <b>argv</b>, <b>COLUMNS</b>,
              <b>LINES</b>, <b>UID</b>, <b>EUID</b>, <b>IFS</b>, <b>PROMPT</b>, <b>RANDOM</b>, <b>SECONDS</b>, etc., cannot  be  made  private  unless  the  `<b>-h</b>'
              option is used to hide the special meaning of the parameter.  This may change in the future.

       As  with  other  <b>typeset</b>  equivalents,  <b>private</b>  is  both a builtin and a reserved word, so arrays may be
       assigned with parenthesized word list <u>name</u><b>=(</b><u>value</u>...<b>)</b> syntax.  However, the reserved  word  `<b>private</b>'  is
       not  available  until  <b>zsh/param/private</b>  is  loaded,  so  care must be taken with order of execution and
       parsing for function definitions which use <b>private</b>.  To compensate for this, the  module  also  adds  the
       option `<b>-P</b>' to the `<b>local</b>' builtin to declare private parameters.

       For  example, this construction fails if <b>zsh/param/private</b> has not yet been loaded when `<b>bad_declaration</b>'
       is defined:
              <b>bad_declaration()</b> <b>{</b>
                <b>zmodload</b> <b>zsh/param/private</b>
                <b>private</b> <b>array=(</b> <b>one</b> <b>two</b> <b>three</b> <b>)</b>
              <b>}</b>

       This construction works because <b>local</b> is already a keyword, and the module is loaded before the statement
       is executed:
              <b>good_declaration()</b> <b>{</b>
                <b>zmodload</b> <b>zsh/param/private</b>
                <b>local</b> <b>-P</b> <b>array=(</b> <b>one</b> <b>two</b> <b>three</b> <b>)</b>
              <b>}</b>

       The following is usable in scripts but may have trouble with <b>autoload</b>:
              <b>zmodload</b> <b>zsh/param/private</b>
              <b>iffy_declaration()</b> <b>{</b>
                <b>private</b> <b>array=(</b> <b>one</b> <b>two</b> <b>three</b> <b>)</b>
              <b>}</b>

       The <b>private</b> builtin may always be used with scalar assignments and for declarations without assignments.

       Parameters declared with <b>private</b> have the following properties:

       •      Within the function body where it is declared, the parameter behaves as a local, except  as  noted
              above for tied or special parameters.

       •      The  type  of  a  parameter declared private cannot be changed in the scope where it was declared,
              even if the parameter is unset.  Thus an array cannot be assigned to a private scalar, etc.

       •      Within any other function called by the declaring function, the private parameter  does  <u>NOT</u>  hide
              other  parameters  of the same name, so for example a global parameter of the same name is visible
              and may be assigned or unset.  This includes calls to anonymous functions, although that may  also
              change  in  the future.  However, the private name may not be created outside the local scope when
              it was not previously declared.

       •      An exported private remains in the environment of inner scopes but appears unset for  the  current
              shell in those scopes.  Generally, exporting private parameters should be avoided.

       Note  that this differs from the static scope defined by compiled languages derived from C, in that the a
       new call to the same function creates a new scope, i.e., the parameter is still associated with the  call
       stack rather than with the function definition.  It differs from ksh `<b>typeset</b> <b>-S</b>' because the syntax used
       to define the function has no bearing on whether the parameter scope is respected.

</pre><h4><b>THE</b> <b>ZSH/REGEX</b> <b>MODULE</b></h4><pre>
       The <b>zsh/regex</b> module makes available the following test condition:

       <u>expr</u> <b>-regex-match</b> <u>regex</u>
              Matches  a  string  against  a  POSIX  extended  regular expression.  On successful match, matched
              portion of the string will normally be placed in the <b>MATCH</b> variable.  If there are  any  capturing
              parentheses  within  the regex, then the <b>match</b> array variable will contain those.  If the match is
              not successful, then the variables will not be altered.

              For example,

                     <b>[[</b> <b>alphabetical</b> <b>-regex-match</b> <b>^a([^a]+)a([^a]+)a</b> <b>]]</b> <b>&amp;&amp;</b>
                     <b>print</b> <b>-l</b> <b>$MATCH</b> <b>X</b> <b>$match</b>

              If the option <b>REMATCH_PCRE</b> is not set, then the <b>=~</b> operator will automatically load this module as
              needed and will invoke the <b>-regex-match</b> operator.

              If <b>BASH_REMATCH</b> is set, then the array <b>BASH_REMATCH</b> will be set instead of <b>MATCH</b> and <b>match</b>.

              Note that the <b>zsh/regex</b> module logic relies on the host system. The same <u>expr</u> and <u>regex</u> pair could
              produce different results on different platforms if a <u>regex</u> with non-standard syntax is given.

              For example, no syntax for matching a word boundary is  defined  in  the  POSIX  extended  regular
              expression  standard.  GNU  <b>libc</b>  and  BSD  <b>libc</b>  both provide such syntaxes as extensions (<b>\b</b> and
              <b>[[:&lt;:]]</b>/<b>[[:&gt;:]]</b> respectively), but neither of  these  syntaxes  is  supported  by  both  of  these
              implementations.

              Refer to the <u><a href="../man3/regcomp.3.html">regcomp</a></u>(3) and <u><a href="../man7/re_format.7.html">re_format</a></u>(7) manual pages on your system for locally-supported syntax.

</pre><h4><b>THE</b> <b>ZSH/SCHED</b> <b>MODULE</b></h4><pre>
       The <b>zsh/sched</b> module makes available one builtin command and one parameter.

       <b>sched</b> [<b>-o</b>] [<b>+</b>]<u>hh</u><b>:</b><u>mm</u>[<b>:</b><u>ss</u>] <u>command</u> ...
       <b>sched</b> [<b>-o</b>] [<b>+</b>]<u>seconds</u> <u>command</u> ...
       <b>sched</b> [ <b>-</b><u>item</u> ]
              Make  an  entry in the scheduled list of commands to execute.  The time may be specified in either
              absolute or relative time, and either as hours, minutes and (optionally) seconds  separated  by  a
              colon,  or  seconds  alone.   An  absolute  number  of  seconds indicates the time since the epoch
              (1970/01/01 00:00); this is useful in combination with the features in  the  <b>zsh/datetime</b>  module,
              see the zsh/datetime module entry in <u><a href="../man1/zshmodules.1.html">zshmodules</a></u>(1).

              With  no  arguments,  prints  the list of scheduled commands.  If the scheduled command has the <b>-o</b>
              flag set, this is shown at the start of the command.

              With the argument `<b>-</b><u>item</u>', removes the given item from the list.  The numbering  of  the  list  is
              continuous  and  entries  are in time order, so the numbering can change when entries are added or
              deleted.

              Commands are executed either immediately before a prompt, or while  the  shell's  line  editor  is
              waiting  for  input.   In  the latter case it is useful to be able to produce output that does not
              interfere with the line being edited.  Providing the option <b>-o</b>  causes  the  shell  to  clear  the
              command  line  before  the event and redraw it afterwards.  This should be used with any scheduled
              event that produces visible output to the terminal; it is not needed,  for  example,  with  output
              that updates a terminal emulator's title bar.

              To  effect  changes  to  the  editor  buffer when an event executes, use the `<b>zle</b>' command with no
              arguments to test whether the editor is active, and if it is, then use `<b>zle</b> <u>widget</u>' to access  the
              editor via the named <u>widget</u>.

              The  <b>sched</b>  builtin  is  not  made  available by default when the shell starts in a mode emulating
              another shell.  It can be made available with the command `<b>zmodload</b> <b>-F</b> <b>zsh/sched</b> <b>b:sched</b>'.

       <b>zsh_scheduled_events</b>
              A readonly array corresponding to the events scheduled by the <b>sched</b> builtin.  The indices  of  the
              array  correspond  to  the  numbers  shown  when <b>sched</b> is run with no arguments (provided that the
              <b>KSH_ARRAYS</b> option is not set).  The value of the array consists of the scheduled time  in  seconds
              since  the epoch (see the section `The zsh/datetime Module' for facilities for using this number),
              followed by a colon, followed by any options (which may be empty but will be  preceded  by  a  `<b>-</b>'
              otherwise), followed by a colon, followed by the command to be executed.

              The  <b>sched</b>  builtin  should  be  used  for  manipulating  the events.  Note that this will have an
              immediate effect on the contents of the array, so that indices may become invalid.

</pre><h4><b>THE</b> <b>ZSH/NET/SOCKET</b> <b>MODULE</b></h4><pre>
       The <b>zsh/net/socket</b> module makes available one builtin command:

       <b>zsocket</b> [ <b>-altv</b> ] [ <b>-d</b> <u>fd</u> ] [ <u>args</u> ]
              <b>zsocket</b> is implemented as a builtin to allow full use of shell command line editing, file I/O, and
              job control mechanisms.

   <b>Outbound</b> <b>Connections</b>
       <b>zsocket</b> [ <b>-v</b> ] [ <b>-d</b> <u>fd</u> ] <u>filename</u>
              Open a new Unix domain connection to <u>filename</u>.  The shell parameter <b>REPLY</b> will be set to the  file
              descriptor associated with that connection.  Currently, only stream connections are supported.

              If <b>-d</b> is specified, its argument will be taken as the target file descriptor for the connection.

              In order to elicit more verbose output, use <b>-v</b>.

              File descriptors can be closed with normal shell syntax when no longer needed, for example:

                     <b>exec</b> <b>{REPLY}&gt;&amp;-</b>

   <b>Inbound</b> <b>Connections</b>
       <b>zsocket</b> <b>-l</b> [ <b>-v</b> ] [ <b>-d</b> <u>fd</u> ] <u>filename</u>
              <b>zsocket</b> <b>-l</b> will open a socket listening on <u>filename</u>.  The shell parameter <b>REPLY</b> will be set to the
              file  descriptor associated with that listener.  The file descriptor remains open in subshells and
              forked external executables.

              If <b>-d</b> is specified, its argument will be taken as the target file descriptor for the connection.

              In order to elicit more verbose output, use <b>-v</b>.

       <b>zsocket</b> <b>-a</b> [ <b>-tv</b> ] [ <b>-d</b> <u>targetfd</u> ] <u>listenfd</u>
              <b>zsocket</b> <b>-a</b> will accept an incoming connection to the socket associated with <u>listenfd</u>.   The  shell
              parameter  <b>REPLY</b>  will  be set to the file descriptor associated with the inbound connection.  The
              file descriptor remains open in subshells and forked external executables.

              If <b>-d</b> is specified, its argument will be taken as the target file descriptor for the connection.

              If <b>-t</b> is specified, <b>zsocket</b> will return if no incoming connection is pending.  Otherwise  it  will
              wait for one.

              In order to elicit more verbose output, use <b>-v</b>.

</pre><h4><b>THE</b> <b>ZSH/STAT</b> <b>MODULE</b></h4><pre>
       The <b>zsh/stat</b> module makes available one builtin command under two possible names:

       <b>zstat</b> [ <b>-gnNolLtTrs</b> ] [ <b>-f</b> <u>fd</u> ] [ <b>-H</b> <u>hash</u> ] [ <b>-A</b> <u>array</u> ] [ <b>-F</b> <u>fmt</u> ]
             [ <b>+</b><u>element</u> ] [ <u>file</u> ... ]
       <b>stat</b> <u>...</u>
              The  command  acts  as  a  front  end  to the <b>stat</b> system call (see <u><a href="../man2/stat.2.html">stat</a></u>(2)).  The same command is
              provided with two names; as the name <b>stat</b> is often used by an external command it  is  recommended
              that  only the <b>zstat</b> form of the command is used.  This can be arranged by loading the module with
              the command `<b>zmodload</b> <b>-F</b> <b>zsh/stat</b> <b>b:zstat</b>'.

              If the <b>stat</b> call fails, the appropriate system error message printed and  status  1  is  returned.
              The  fields  of <b>struct</b> <b>stat</b> give information about the files provided as arguments to the command.
              In addition to those available from the <b>stat</b> call, an extra element  `<b>link</b>'  is  provided.   These
              elements are:

              <b>device</b> The number of the device on which the file resides.

              <b>inode</b>  The unique number of the file on this device (`<u>inode</u>' number).

              <b>mode</b>   The mode of the file; that is, the file's type and access permissions.  With the <b>-s</b> option,
                     this  will  be returned as a string corresponding to the first column in the display of the
                     <b>ls</b> <b>-l</b> command.

              <b>nlink</b>  The number of hard links to the file.

              <b>uid</b>    The user ID of the owner of the file.  With the <b>-s</b> option, this  is  displayed  as  a  user
                     name.

              <b>gid</b>    The group ID of the file.  With the <b>-s</b> option, this is displayed as a group name.

              <b>rdev</b>   The raw device number.  This is only useful for special devices.

              <b>size</b>   The size of the file in bytes.

              <b>atime</b>
              <b>mtime</b>
              <b>ctime</b>  The  last  access,  modification  and  inode change times of the file, respectively, as the
                     number of seconds since midnight GMT on 1st January, 1970.  With the <b>-s</b> option,  these  are
                     printed  as  strings for the local time zone; the format can be altered with the <b>-F</b> option,
                     and with the <b>-g</b> option the times are in GMT.

              <b>blksize</b>
                     The number of bytes in one allocation block on the device on which the file resides.

              <b>block</b>  The number of disk blocks used by the file.

              <b>link</b>   If the file is a link and the <b>-L</b> option is in effect, this contains the name  of  the  file
                     linked  to, otherwise it is empty.  Note that if this element is selected (``<b>zstat</b> <b>+link</b>'')
                     then the <b>-L</b> option is automatically used.

              A particular element may be selected by including its name preceded by a `<b>+</b>' in the  option  list;
              only  one  element  is  allowed.   The  element  may  be  shortened  to  any unique set of leading
              characters.  Otherwise, all elements will be shown for all files.

              Options:

              <b>-A</b> <u>array</u>
                     Instead of displaying the results on standard output, assign them to an <u>array</u>,  one  <b>struct</b>
                     <b>stat</b>  element  per  array element for each file in order.  In this case neither the name of
                     the element nor the name of the files appears in <u>array</u> unless the <b>-t</b>  or  <b>-n</b>  options  were
                     given,  respectively.   If  <b>-t</b>  is  given,  the  element  name  appears  as a prefix to the
                     appropriate array element; if <b>-n</b> is given, the  file  name  appears  as  a  separate  array
                     element preceding all the others.  Other formatting options are respected.

              <b>-H</b> <u>hash</u>
                     Similar  to  <b>-A</b>,  but  instead assign the values to <u>hash</u>.  The keys are the elements listed
                     above.  If the <b>-n</b> option is provided then the name of the file is included in the hash with
                     key <b>name</b>.

              <b>-f</b> <u>fd</u>  Use the file on file descriptor <u>fd</u> instead of named files; no list of file names is allowed
                     in this case.

              <b>-F</b> <u>fmt</u> Supplies a <b>strftime</b> (see <u><a href="../man3/strftime.3.html">strftime</a></u>(3)) string for the formatting of the time elements.   The
                     format  string  supports  all  of  the zsh extensions described in the section EXPANSION OF
                     PROMPT SEQUENCES in <u><a href="../man1/zshmisc.1.html">zshmisc</a></u>(1).  In particular, <b>-F</b> <b>%s.%N</b> can be  used  to  show  timestamps
                     with nanosecond precision if supported by the system.  The <b>-s</b> option is implied.

              <b>-g</b>     Show the time elements in the GMT time zone.  The <b>-s</b> option is implied.

              <b>-l</b>     List  the  names  of  the type elements (to standard output or an array as appropriate) and
                     return immediately; arguments, and options other than <b>-A</b>, are ignored.

              <b>-L</b>     Perform an <b>lstat</b> (see <u><a href="../man2/lstat.2.html">lstat</a></u>(2)) rather than a <b>stat</b> system call.  In this case, if the  file
                     is a link, information about the link itself rather than the target file is returned.  This
                     option  is  required  to make the <b>link</b> element useful.  It's important to note that this is
                     the exact opposite from <u><a href="../man1/ls.1.html">ls</a></u>(1), etc.

              <b>-n</b>     Always show the names of files.  Usually these are only shown when output  is  to  standard
                     output and there is more than one file in the list.

              <b>-N</b>     Never show the names of files.

              <b>-o</b>     If a raw file mode is printed, show it in octal, which is more useful for human consumption
                     than  the default of decimal.  A leading zero will be printed in this case.  Note that this
                     does not affect whether a raw or formatted file mode is shown, which is controlled  by  the
                     <b>-r</b> and <b>-s</b> options, nor whether a mode is shown at all.

              <b>-r</b>     Print  raw data (the default format) alongside string data (the <b>-s</b> format); the string data
                     appears in parentheses after the raw data.

              <b>-s</b>     Print <b>mode</b>, <b>uid</b>, <b>gid</b> and the three time elements as strings instead of  numbers.   In  each
                     case the format is like that of <b>ls</b> <b>-l</b>.

              <b>-t</b>     Always  show  the type names for the elements of <b>struct</b> <b>stat</b>.  Usually these are only shown
                     when output is to standard output and no individual element has been selected.

              <b>-T</b>     Never show the type names of the <b>struct</b> <b>stat</b> elements.

</pre><h4><b>THE</b> <b>ZSH/SYSTEM</b> <b>MODULE</b></h4><pre>
       The <b>zsh/system</b> module makes available various builtin commands and parameters.

   <b>Builtins</b>
       <b>syserror</b> [ <b>-e</b> <u>errvar</u> ] [ <b>-p</b> <u>prefix</u> ] [ <u>errno</u> | <u>errname</u> ]
              This command prints out the error message associated with <u>errno</u>, a system error  number,  followed
              by a newline to standard error.

              Instead of the error number, a name <u>errname</u>, for example <b>ENOENT</b>, may be used.  The set of names is
              the same as the contents of the array <b>errnos</b>, see below.

              If  the  string  <u>prefix</u> is given, it is printed in front of the error message, with no intervening
              space.

              If <u>errvar</u> is supplied, the entire message, without a newline, is assigned to the  parameter  names
              <u>errvar</u> and nothing is output.

              A return status of 0 indicates the message was successfully printed (although it may not be useful
              if the error number was out of the system's range), a return status of 1 indicates an error in the
              parameters,  and  a  return status of 2 indicates the error name was not recognised (no message is
              printed for this).

       <b>sysopen</b> [ <b>-arw</b> ] [ <b>-m</b> <u>permissions</u> ] [ <b>-o</b> <u>options</u> ]
               <b>-u</b> <u>fd</u> <u>file</u>
              This command opens a file. The <b>-r</b>, <b>-w</b> and <b>-a</b> flags indicate whether the file should be opened  for
              reading,  writing and appending, respectively. The <b>-m</b> option allows the initial permissions to use
              when creating a file to be specified in octal form.  The file descriptor  is  specified  with  <b>-u</b>.
              Either  an explicit file descriptor in the range 0 to 9 can be specified or a variable name can be
              given to which the file descriptor number will be assigned.

              The <b>-o</b> option allows various system specific options to be specified as  a  comma-separated  list.
              The  following  is a list of possible options. Note that, depending on the system, some may not be
              available.
              <b>cloexec</b>
                     mark file to be closed when other programs are executed (else the file  descriptor  remains
                     open in subshells and forked external executables)

              <b>create</b>
              <b>creat</b>  create file if it does not exist

              <b>excl</b>   create file, error if it already exists

              <b>noatime</b>
                     suppress updating of the file atime

              <b>nofollow</b>
                     fail if <u>file</u> is a symbolic link

              <b>nonblock</b>
                     the file is opened in nonblocking mode

              <b>sync</b>   request that writes wait until data has been physically written

              <b>truncate</b>
              <b>trunc</b>  truncate file to size 0

              To close the file, use one of the following:

                     <b>exec</b> <b>{</b><u>fd</u><b>}&lt;&amp;-</b>
                     <b>exec</b> <b>{</b><u>fd</u><b>}&gt;&amp;-</b>

       <b>sysread</b> [ <b>-c</b> <u>countvar</u> ] [ <b>-i</b> <u>infd</u> ] [ <b>-o</b> <u>outfd</u> ]
               [ <b>-s</b> <u>bufsize</u> ] [ <b>-t</b> <u>timeout</u> ] [ <u>param</u> ]
              Perform  a single system read from file descriptor <u>infd</u>, or zero if that is not given.  The result
              of the read is stored in <u>param</u> or <b>REPLY</b> if that is not given.  If <u>countvar</u> is given, the number of
              bytes read is assigned to the parameter named by <u>countvar</u>.

              The maximum number of bytes read is <u>bufsize</u> or 8192 if that is  not  given,  however  the  command
              returns as soon as any number of bytes was successfully read.

              If  <u>timeout</u>  is  given,  it  specifies  a  timeout  in seconds, which may be zero to poll the file
              descriptor.  This is handled by the <b>poll</b> system call if available,  otherwise  the  <b>select</b>  system
              call if available.

              If  <u>outfd</u>  is  given,  an  attempt is made to write all the bytes just read to the file descriptor
              <u>outfd</u>.  If this fails, because of a system error other than <b>EINTR</b> or because of  an  internal  zsh
              error  during  an  interrupt,  the bytes read but not written are stored in the parameter named by
              <u>param</u> if supplied (no default is used in this case), and the number of bytes read but not  written
              is  stored in the parameter named by <u>countvar</u> if that is supplied.  If it was successful, <u>countvar</u>
              contains the full number of bytes transferred, as usual, and <u>param</u> is not set.

              The error <b>EINTR</b> (interrupted system call) is handled  internally  so  that  shell  interrupts  are
              transparent to the caller.  Any other error causes a return.

              The possible return statuses are
              0      At least one byte of data was successfully read and, if appropriate, written.

              1      There  was  an  error in the parameters to the command.  This is the only error for which a
                     message is printed to standard error.

              2      There was an error on the read, or on polling the input file descriptor for a timeout.  The
                     parameter <b>ERRNO</b> gives the error.

              3      Data were successfully read, but there was an error writing them to <u>outfd</u>.   The  parameter
                     <b>ERRNO</b> gives the error.

              4      The attempt to read timed out.  Note this does not set <b>ERRNO</b> as this is not a system error.

              5      No  system  error  occurred, but zero bytes were read.  This usually indicates end of file.
                     The parameters are set according to the usual rules; no write to <u>outfd</u> is attempted.

       <b>sysseek</b> [ <b>-u</b> <u>fd</u> ] [ <b>-w</b> <b>start</b>|<b>end</b>|<b>current</b> ] <u>offset</u>
              The current file position at which future reads and writes will take  place  is  adjusted  to  the
              specified byte offset. The <u>offset</u> is evaluated as a math expression. The <b>-u</b> option allows the file
              descriptor  to  be specified. By default the offset is specified relative to the start or the file
              but, with the <b>-w</b> option, it is possible to specify that the  offset  should  be  relative  to  the
              current position or the end of the file.

       <b>syswrite</b> [ <b>-c</b> <u>countvar</u> ] [ <b>-o</b> <u>outfd</u> ] <u>data</u>
              The  data (a single string of bytes) are written to the file descriptor <u>outfd</u>, or 1 if that is not
              given, using the <b>write</b> system call.  Multiple write operations may be used if the first  does  not
              write all the data.

              If  <u>countvar</u>  is  given,  the number of byte written is stored in the parameter named by <u>countvar</u>;
              this may not be the full length of <u>data</u> if an error occurred.

              The error <b>EINTR</b> (interrupted system call) is handled internally by retrying;  otherwise  an  error
              causes  the command to return.  For example, if the file descriptor is set to non-blocking output,
              an error <b>EAGAIN</b> (on some systems, <b>EWOULDBLOCK</b>) may result in the command returning early.

              The return status may be 0 for success, 1 for an error in the parameters to the command, or 2  for
              an  error on the write; no error message is printed in the last case, but the parameter <b>ERRNO</b> will
              reflect the error that occurred.

       <b>zsystem</b> <b>flock</b> [ <b>-t</b> <u>timeout</u> ] [ <b>-i</b> <u>interval</u> ] [ <b>-f</b> <u>var</u> ] [<b>-er</b>] <u>file</u>
       <b>zsystem</b> <b>flock</b> <b>-u</b> <u>fd_expr</u>
              The builtin <b>zsystem</b>'s subcommand <b>flock</b> performs advisory file locking  (via  the  <u><a href="../man2/fcntl.2.html">fcntl</a></u>(2)  system
              call)  over  the  entire  contents of the given file.  This form of locking requires the processes
              accessing the file to cooperate; its most obvious use  is  between  two  instances  of  the  shell
              itself.

              In the first form the named <u>file</u>, which must already exist, is locked by opening a file descriptor
              to  the  file  and  applying  a  lock  to the file descriptor.  The lock terminates when the shell
              process that created the lock exits; it is therefore often convenient to create file locks  within
              subshells, since the lock is automatically released when the subshell exits.  Note that use of the
              <b>print</b>  builtin with the <b>-u</b> option will, as a side effect, release the lock, as will redirection to
              the file in the shell holding the lock.  To work around this use a subshell, e.g. `<b>(print</b> <b>message)</b>
              <b>&gt;&gt;</b> <u>file</u>'.  Status 0 is returned if the lock succeeds, else status 1.

              In the second form the file descriptor given by  the  arithmetic  expression  <u>fd_expr</u>  is  closed,
              releasing  a lock.  The file descriptor can be queried by using the `<b>-f</b> <u>var</u>' form during the lock;
              on a successful lock, the shell variable <u>var</u> is set to the file descriptor used for locking.   The
              lock will be released if the file descriptor is closed by any other means, for example using `<b>exec</b>
              <b>{</b><u>var</u><b>}&gt;&amp;-</b>'; however, the form described here performs a safety check that the file descriptor is in
              use for file locking.

              By  default the shell waits indefinitely for the lock to succeed.  The option <b>-t</b> <u>timeout</u> specifies
              a timeout for the lock in seconds; fractional seconds are allowed.  During this period, the  shell
              will attempt to lock the file every <u>interval</u> seconds if the <b>-i</b> <u>interval</u> option is given, otherwise
              once  a  second.  (This <u>interval</u> is shortened before the last attempt if needed, so that the shell
              waits only until the <u>timeout</u> and not longer.)  If the attempt times out, status 2 is returned.

              (Note: <u>timeout</u> is limited to 2^30-1 seconds (about 34 years), and <u>interval</u>  to  0.999  *  LONG_MAX
              microseconds (only about 35 minutes on 32-bit systems).)

              If  the option <b>-e</b> is given, the file descriptor for the lock is preserved when the shell uses <b>exec</b>
              to start a new process; otherwise it is closed at that point and the lock released.

              If the option <b>-r</b> is given, the lock is only for reading, otherwise it is for reading and  writing.
              The file descriptor is opened accordingly.

       <b>zsystem</b> <b>supports</b> <u>subcommand</u>
              The  builtin  <b>zsystem</b>'s  subcommand  <b>supports</b>  tests  whether a given subcommand is supported.  It
              returns status 0 if so, else status 1.  It operates silently unless there was a syntax error (i.e.
              the wrong number of arguments), in which case status 255 is returned.  Status 1 can  indicate  one
              of  two  things:   <u>subcommand</u>  is  known  but  not  supported  by the current operating system, or
              <u>subcommand</u> is not known (possibly because this is an older version of  the  shell  before  it  was
              implemented).

   <b>Math</b> <b>Functions</b>
       <b>systell(</b><u>fd</u><b>)</b>
              The  systell  math function returns the current file position for the file descriptor passed as an
              argument.

   <b>Parameters</b>
       <b>errnos</b> A readonly array of the names of errors defined on the system.  These are typically macros defined
              in C by including the system header file <b>errno.h</b>.  The index of each  name  (assuming  the  option
              <b>KSH_ARRAYS</b>  is  unset)  corresponds  to the error number.  Error numbers <u>num</u> before the last known
              error which have no name are given the name <b>E</b><u>num</u> in the array.

              Note that aliases for errors are not handled; only the canonical name is used.

       <b>sysparams</b>
              A readonly associative array.  The keys are:

              <b>pid</b>    Returns the process ID of the current  process,  even  in  subshells.   Compare  <b>$$</b>,  which
                     returns the process ID of the main shell process.

              <b>ppid</b>   Returns  the  current  process  ID of the parent of the current process, even in subshells.
                     Compare <b>$PPID</b>, which returns the process ID  of  the  initial  parent  of  the  main  shell
                     process.

              <b>procsubstpid</b>
                     Returns  the  process  ID  of  the  last process started for process substitution, i.e. the
                     <b>&lt;(</b><u>...</u><b>)</b> and <b>&gt;(</b><u>...</u><b>)</b> expansions.

</pre><h4><b>THE</b> <b>ZSH/NET/TCP</b> <b>MODULE</b></h4><pre>
       The <b>zsh/net/tcp</b> module makes available one builtin command:

       <b>ztcp</b> [ <b>-acflLtv</b> ] [ <b>-d</b> <u>fd</u> ] [ <u>args</u> ]
              <b>ztcp</b> is implemented as a builtin to allow full use of shell command line editing,  file  I/O,  and
              job control mechanisms.

              If <b>ztcp</b> is run with no options, it will output the contents of its session table.

              If it is run with only the option <b>-L</b>, it will output the contents of the session table in a format
              suitable  for automatic parsing.  The option is ignored if given with a command to open or close a
              session.  The output consists of a set of lines, one per session, each  containing  the  following
              elements separated by spaces:

              File descriptor
                     The  file  descriptor  in  use for the connection.  For normal inbound (<b>I</b>) and outbound (<b>O</b>)
                     connections this may be read and written by the usual shell mechanisms.  However, it should
                     only be close with `<b>ztcp</b> <b>-c</b>'.

              Connection type
                     A letter indicating how the session was created:

                     <b>Z</b>      A session created with the <b>zftp</b> command.

                     <b>L</b>      A connection opened for listening with `<b>ztcp</b> <b>-l</b>'.

                     <b>I</b>      An inbound connection accepted with `<b>ztcp</b> <b>-a</b>'.

                     <b>O</b>      An outbound connection created with `<b>ztcp</b> <u>host</u> <u>...</u>'.

              The local host
                     This is usually set to  an  all-zero  IP  address  as  the  address  of  the  localhost  is
                     irrelevant.

              The local port
                     This is likely to be zero unless the connection is for listening.

              The remote host
                     This  is the fully qualified domain name of the peer, if available, else an IP address.  It
                     is an all-zero IP address for a session opened for listening.

              The remote port
                     This is zero for a connection opened for listening.

   <b>Outbound</b> <b>Connections</b>
       <b>ztcp</b> [ <b>-v</b> ] [ <b>-d</b> <u>fd</u> ] <u>host</u> [ <u>port</u> ]
              Open a new TCP connection to <u>host</u>.  If the <u>port</u> is omitted, it  will  default  to  port  23.   The
              connection  will  be  added  to the session table and the shell parameter <b>REPLY</b> will be set to the
              file descriptor associated with that connection.

              If <b>-d</b> is specified, its argument will be taken as the target file descriptor for the connection.

              In order to elicit more verbose output, use <b>-v</b>.

   <b>Inbound</b> <b>Connections</b>
       <b>ztcp</b> <b>-l</b> [ <b>-v</b> ] [ <b>-d</b> <u>fd</u> ] <u>port</u>
              <b>ztcp</b> <b>-l</b> will open a socket listening on TCP <u>port</u>.  The socket will be added to the  session  table
              and the shell parameter <b>REPLY</b> will be set to the file descriptor associated with that listener.

              If <b>-d</b> is specified, its argument will be taken as the target file descriptor for the connection.

              In order to elicit more verbose output, use <b>-v</b>.

       <b>ztcp</b> <b>-a</b> [ <b>-tv</b> ] [ <b>-d</b> <u>targetfd</u> ] <u>listenfd</u>
              <b>ztcp</b>  <b>-a</b>  will accept an incoming connection to the port associated with <u>listenfd</u>.  The connection
              will be added to the session table and  the  shell  parameter  <b>REPLY</b>  will  be  set  to  the  file
              descriptor associated with the inbound connection.

              If <b>-d</b> is specified, its argument will be taken as the target file descriptor for the connection.

              If <b>-t</b> is specified, <b>ztcp</b> will return if no incoming connection is pending.  Otherwise it will wait
              for one.

              In order to elicit more verbose output, use <b>-v</b>.

   <b>Closing</b> <b>Connections</b>
       <b>ztcp</b> <b>-cf</b> [ <b>-v</b> ] [ <u>fd</u> ]
       <b>ztcp</b> <b>-c</b> [ <b>-v</b> ] [ <u>fd</u> ]
              <b>ztcp</b>  <b>-c</b>  will  close  the socket associated with <u>fd</u>.  The socket will be removed from the session
              table.  If <u>fd</u> is not specified, <b>ztcp</b> will close everything in the session table.

              Normally, sockets registered by zftp (see <u><a href="../man1/zshmodules.1.html">zshmodules</a></u>(1) ) cannot be closed this way.  In order  to
              force such a socket closed, use <b>-f</b>.

              In order to elicit more verbose output, use <b>-v</b>.

   <b>Example</b>
       Here is how to create a TCP connection between two instances of zsh.  We need to pick an unassigned port;
       here we use the randomly chosen 5123.

       On <b>host1</b>,
              <b>zmodload</b> <b>zsh/net/tcp</b>
              <b>ztcp</b> <b>-l</b> <b>5123</b>
              <b>listenfd=$REPLY</b>
              <b>ztcp</b> <b>-a</b> <b>$listenfd</b>
              <b>fd=$REPLY</b>
       The second from last command blocks until there is an incoming connection.

       Now create a connection from <b>host2</b> (which may, of course, be the same machine):
              <b>zmodload</b> <b>zsh/net/tcp</b>
              <b>ztcp</b> <b>host1</b> <b>5123</b>
              <b>fd=$REPLY</b>

       Now on each host, <b>$fd</b> contains a file descriptor for talking to the other.  For example, on <b>host1</b>:
              <b>print</b> <b>This</b> <b>is</b> <b>a</b> <b>message</b> <b>&gt;&amp;$fd</b>
       and on <b>host2</b>:
              <b>read</b> <b>-r</b> <b>line</b> <b>&lt;&amp;$fd;</b> <b>print</b> <b>-r</b> <b>-</b> <b>$line</b>
       prints `<b>This</b> <b>is</b> <b>a</b> <b>message</b>'.

       To tidy up, on <b>host1</b>:
              <b>ztcp</b> <b>-c</b> <b>$listenfd</b>
              <b>ztcp</b> <b>-c</b> <b>$fd</b>
       and on <b>host2</b>
              <b>ztcp</b> <b>-c</b> <b>$fd</b>

</pre><h4><b>THE</b> <b>ZSH/TERMCAP</b> <b>MODULE</b></h4><pre>
       The <b>zsh/termcap</b> module makes available one builtin command:

       <b>echotc</b> <u>cap</u> [ <u>arg</u> ... ]
              Output the termcap value corresponding to the capability <u>cap</u>, with optional arguments.

       The <b>zsh/termcap</b> module makes available one parameter:

       <b>termcap</b>
              An associative array that maps termcap capability codes to their values.

</pre><h4><b>THE</b> <b>ZSH/TERMINFO</b> <b>MODULE</b></h4><pre>
       The <b>zsh/terminfo</b> module makes available one builtin command:

       <b>echoti</b> <u>cap</u> [ <u>arg</u> ]
              Output  the  terminfo  value  corresponding  to  the  capability  <u>cap</u>,  instantiated  with  <u>arg</u> if
              applicable.

       The <b>zsh/terminfo</b> module makes available one parameter:

       <b>terminfo</b>
              An associative array that maps terminfo capability names to their values.

</pre><h4><b>THE</b> <b>ZSH/WATCH</b> <b>MODULE</b></h4><pre>
       The <b>zsh/watch</b> module can be used to report when specific users log in or out. This is controlled via  the
       following parameters.

       <b>LOGCHECK</b>
              The interval in seconds between checks for login/logout activity using the <b>watch</b> parameter.

       <b>watch</b> &lt;S&gt; &lt;Z&gt; (<b>WATCH</b> &lt;S&gt;)
              An array (colon-separated list) of login/logout events to report.

              If  it  contains the single word `<b>all</b>', then all login/logout events are reported.  If it contains
              the single word `<b>notme</b>', then all events are reported as with `<b>all</b>' except <b>$USERNAME</b>.

              An entry in this list may consist of a username, an `<b>@</b>' followed by a remote hostname, and  a  `<b>%</b>'
              followed  by  a  line  (tty).   Any  of  these  may be a pattern (be sure to quote this during the
              assignment to <b>watch</b> so that it does not immediately perform file generation); the setting  of  the
              <b>EXTENDED_GLOB</b>  option is respected.  Any or all of these components may be present in an entry; if
              a login/logout event matches all of them, it is reported.

              For example, with the <b>EXTENDED_GLOB</b> option set, the following:

                     <b>watch=('^(pws|barts)')</b>

              causes reports for activity associated with any user other than <b>pws</b> or <b>barts</b>.

       <b>WATCHFMT</b>
              The format of login/logout reports if the <b>watch</b> parameter is set.  Default is `<b>%n</b> <b>has</b> <b>%a</b>  <b>%l</b>  <b>from</b>
              <b>%m</b>'.  Recognizes the following escape sequences:

              <b>%n</b>     The name of the user that logged in/out.

              <b>%a</b>     The observed action, i.e. "logged on" or "logged off".

              <b>%l</b>     The line (tty) the user is logged in on.

              <b>%M</b>     The full hostname of the remote host.

              <b>%m</b>     The  hostname  up  to the first `<b>.</b>'.  If only the IP address is available or the utmp field
                     contains the name of an X-windows display, the whole name is printed.

                     <u>NOTE:</u> The `<b>%m</b>' and `<b>%M</b>' escapes will work only if there is a host name field in the utmp on
                     your machine.  Otherwise they are treated as ordinary strings.

              <b>%F{</b><u>color</u><b>}</b> (<b>%f</b>)
                     Start (stop) using a different foreground color.

              <b>%K{</b><u>color</u><b>}</b> (<b>%k</b>)
                     Start (stop) using a different background color.

              <b>%S</b> (<b>%s</b>)
                     Start (stop) standout mode.

              <b>%U</b> (<b>%u</b>)
                     Start (stop) underline mode.

              <b>%B</b> (<b>%b</b>)
                     Start (stop) boldface mode.

              <b>%t</b>
              <b>%@</b>     The time, in 12-hour, am/pm format.

              <b>%T</b>     The time, in 24-hour format.

              <b>%w</b>     The date in `<u>day</u><b>-</b><u>dd</u>' format.

              <b>%W</b>     The date in `<u>mm</u><b>/</b><u>dd</u><b>/</b><u>yy</u>' format.

              <b>%D</b>     The date in `<u>yy</u><b>-</b><u>mm</u><b>-</b><u>dd</u>' format.

              <b>%D{</b><u>string</u><b>}</b>
                     The date formatted as <u>string</u> using the <b>strftime</b> function, with zsh extensions as  described
                     by EXPANSION OF PROMPT SEQUENCES in <u><a href="../man1/zshmisc.1.html">zshmisc</a></u>(1).

              <b>%(</b><u>x</u><b>:</b><u>true-text</u><b>:</b><u>false-text</u><b>)</b>
                     Specifies  a  ternary  expression.   The  character  following the <u>x</u> is arbitrary; the same
                     character is used to separate the text for the "true" result  from  that  for  the  "false"
                     result.   Both  the  separator  and  the right parenthesis may be escaped with a backslash.
                     Ternary expressions may be nested.

                     The test character <u>x</u> may be any one of `<b>l</b>', `<b>n</b>', `<b>m</b>' or `<b>M</b>', which indicate a `true' result
                     if the corresponding escape sequence would return a non-empty value;  or  it  may  be  `<b>a</b>',
                     which  indicates  a  `true'  result if the watched user has logged in, or `false' if he has
                     logged out.  Other characters evaluate to neither true nor false; the entire expression  is
                     omitted in this case.

                     If  the  result is `true', then the <u>true-text</u> is formatted according to the rules above and
                     printed, and the <u>false-text</u> is skipped.  If `false',  the  <u>true-text</u>  is  skipped  and  the
                     <u>false-text</u> is formatted and printed.  Either or both of the branches may be empty, but both
                     separators must be present in any case.

       Furthermore, the <b>zsh/watch</b> module makes available one builtin command:

       <b>log</b>    List all users currently logged in who are affected by the current setting of the <b>watch</b> parameter.

</pre><h4><b>THE</b> <b>ZSH/ZFTP</b> <b>MODULE</b></h4><pre>
       The <b>zsh/zftp</b> module makes available one builtin command:

       <b>zftp</b> <u>subcommand</u> [ <u>args</u> ]
              The  <b>zsh/zftp</b> module is a client for FTP (file transfer protocol).  It is implemented as a builtin
              to allow full use of shell command line editing, file I/O, and  job  control  mechanisms.   Often,
              users  will  access  it via shell functions providing a more powerful interface; a set is provided
              with the <b>zsh</b> distribution and is  described  in  <u><a href="../man1/zshzftpsys.1.html">zshzftpsys</a></u>(1).   However,  the  <b>zftp</b>  command  is
              entirely usable in its own right.

              All  commands  consist  of  the command name <b>zftp</b> followed by the name of a subcommand.  These are
              listed below.  The return status of each subcommand is supposed to reflect the success or  failure
              of  the  remote operation.  See a description of the variable <b>ZFTP_VERBOSE</b> for more information on
              how responses from the server may be printed.

   <b>Subcommands</b>
       <b>open</b> <u>host</u>[<b>:</b><u>port</u>] [ <u>user</u> [ <u>password</u> [ <u>account</u> ] ] ]
              Open a new FTP session to <u>host</u>, which may be the name of a TCP/IP connected host or an  IP  number
              in  the standard dot notation.  If the argument is in the form <u>host</u><b>:</b><u>port</u>, open a connection to TCP
              port <u>port</u> instead of the standard FTP port 21.  This may be the name of a TCP service or a number:
              see the description of <b>ZFTP_PORT</b> below for more information.

              If IPv6 addresses in colon format are used,  the  <u>host</u>  should  be  surrounded  by  quoted  square
              brackets  to  distinguish  it  from  the  <u>port</u>,  for  example  <b>'[fe80::203:baff:fe02:8b56]'</b>.   For
              consistency this is allowed with all forms of <u>host</u>.

              Remaining arguments are passed to the <b>login</b> subcommand.  Note that if no arguments beyond <u>host</u> are
              supplied, <b>open</b> will <u>not</u> automatically call <b>login</b>.  If no arguments at all are supplied, <b>open</b>  will
              use the parameters set by the <b>params</b> subcommand.

              After  a  successful  open,  the shell variables <b>ZFTP_HOST</b>, <b>ZFTP_PORT</b>, <b>ZFTP_IP</b> and <b>ZFTP_SYSTEM</b> are
              available; see `Variables' below.

       <b>login</b> [ <u>name</u> [ <u>password</u> [ <u>account</u> ] ] ]
       <b>user</b> [ <u>name</u> [ <u>password</u> [ <u>account</u> ] ] ]
              Login the user <u>name</u> with parameters <u>password</u> and <u>account</u>.  Any of the parameters can  be  omitted,
              and  will  be  read from standard input if needed (<u>name</u> is always needed).  If standard input is a
              terminal, a prompt for each one will be printed on standard error and <u>password</u> will not be echoed.
              If any of the parameters are not used, a warning message is printed.

              After a successful login, the shell variables <b>ZFTP_USER</b>, <b>ZFTP_ACCOUNT</b> and <b>ZFTP_PWD</b> are  available;
              see `Variables' below.

              This  command  may  be  re-issued  when  a user is already logged in, and the server will first be
              reinitialized for a new user.

       <b>params</b> [ <u>host</u> [ <u>user</u> [ <u>password</u> [ <u>account</u> ] ] ] ]
       <b>params</b> <b>-</b>
              Store the given parameters for a later <b>open</b> command with no arguments.  Only those  given  on  the
              command  line  will  be  remembered.   If no arguments are given, the parameters currently set are
              printed, although the password will appear as a line of stars; the return  status  is  one  if  no
              parameters were set, zero otherwise.

              Any  of  the  parameters may be specified as a `<b>?</b>', which may need to be quoted to protect it from
              shell expansion.  In this case, the appropriate parameter will be read  from  stdin  as  with  the
              <b>login</b>  subcommand,  including  special  handling of <u>password</u>.  If the `<b>?</b>' is followed by a string,
              that is used as the prompt for reading the parameter instead of the default message (any necessary
              punctuation and whitespace should be included at the end of the prompt).  The first letter of  the
              parameter  (only) may be quoted with a `<b>\</b>'; hence an argument <b>"\\$word"</b> guarantees that the string
              from the shell parameter <b>$word</b> will be treated literally, whether or not it begins with a `<b>?</b>'.

              If instead a single `<b>-</b>' is given, the existing parameters, if any, are  deleted.   In  that  case,
              calling <b>open</b> with no arguments will cause an error.

              The  list  of  parameters is not deleted after a <b>close</b>, however it will be deleted if the <b>zsh/zftp</b>
              module is unloaded.

              For example,

                     <b>zftp</b> <b>params</b> <b>ftp.elsewhere.xx</b> <b>juser</b> <b>'?Password</b> <b>for</b> <b>juser:</b> <b>'</b>

              will store the host <b>ftp.elsewhere.xx</b> and  the  user  <b>juser</b>  and  then  prompt  the  user  for  the
              corresponding password with the given prompt.

       <b>test</b>   Test  the connection; if the server has reported that it has closed the connection (maybe due to a
              timeout), return status 2; if no connection was open anyway, return status 1; else  return  status
              0.   The <b>test</b> subcommand is silent, apart from messages printed by the <b>$ZFTP_VERBOSE</b> mechanism, or
              error messages if the connection closes.  There is no network overhead for this test.

              The test is only supported on systems with either the <b><a href="../man2/select.2.html">select</a>(2)</b> or <b><a href="../man2/poll.2.html">poll</a>(2)</b> system calls; otherwise
              the message `<b>not</b> <b>supported</b> <b>on</b> <b>this</b> <b>system</b>' is printed instead.

              The <b>test</b> subcommand will automatically be called at the start of  any  other  subcommand  for  the
              current session when a connection is open.

       <b>cd</b> <u>directory</u>
              Change the remote directory to <u>directory</u>.  Also alters the shell variable <b>ZFTP_PWD</b>.

       <b>cdup</b>   Change  the  remote  directory to the one higher in the directory tree.  Note that <b>cd</b> <b>..</b> will also
              work correctly on non-UNIX systems.

       <b>dir</b> [ <u>arg</u> ... ]
              Give a (verbose) listing of the remote directory.  The <u>arg</u>s are passed directly to the server. The
              command's behaviour is implementation dependent, but a UNIX server will typically  interpret  <u>arg</u>s
              as  arguments  to the <b>ls</b> command and with no arguments return the result of `<b>ls</b> <b>-l</b>'. The directory
              is listed to standard output.

       <b>ls</b> [ <u>arg</u> ... ]
              Give a (short) listing of the remote directory.  With no <u>arg</u>, produces a raw list of the files  in
              the  directory,  one  per  line.   Otherwise, up to vagaries of the server implementation, behaves
              similar to <b>dir</b>.

       <b>type</b> [ <u>type</u> ]
              Change the type for the transfer to <u>type</u>, or print the  current  type  if  <u>type</u>  is  absent.   The
              allowed values are `<b>A</b>' (ASCII), `<b>I</b>' (Image, i.e. binary), or `<b>B</b>' (a synonym for `<b>I</b>').

              The  FTP  default  for a transfer is ASCII.  However, if <b>zftp</b> finds that the remote host is a UNIX
              machine with 8-bit byes, it will automatically switch to using  binary  for  file  transfers  upon
              <b>open</b>.  This can subsequently be overridden.

              The  transfer  type  is only passed to the remote host when a data connection is established; this
              command involves no network overhead.

       <b>ascii</b>  The same as <b>type</b> <b>A</b>.

       <b>binary</b> The same as <b>type</b> <b>I</b>.

       <b>mode</b> [ <b>S</b> | <b>B</b> ]
              Set the mode type to stream (<b>S</b>) or block (<b>B</b>).  Stream mode is  the  default;  block  mode  is  not
              widely supported.

       <b>remote</b> <u>file</u> ...
       <b>local</b> [ <u>file</u> ... ]
              Print the size and last modification time of the remote or local files.  If there is more than one
              item  on  the list, the name of the file is printed first.  The first number is the file size, the
              second is the last modification time of the file in the format <b>CCYYMMDDhhmmSS</b> consisting of  year,
              month,  date,  hour,  minutes and seconds in GMT.  Note that this format, including the length, is
              guaranteed, so that time strings can be directly compared via the <b>[[</b> builtin's <b>&lt;</b> and <b>&gt;</b>  operators,
              even if they are too long to be represented as integers.

              Not  all  servers  support the commands for retrieving this information.  In that case, the <b>remote</b>
              command will print nothing and return status 2, compared with status 1 for a file not found.

              The <b>local</b> command (but not <b>remote</b>) may be used with no arguments, in which  case  the  information
              comes from examining file descriptor zero.  This is the same file as seen by a <b>put</b> command with no
              further redirection.

       <b>get</b> <u>file</u> ...
              Retrieve all <u>file</u>s from the server, concatenating them and sending them to standard output.

       <b>put</b> <u>file</u> ...
              For  each  <u>file</u>,  read  a file from standard input and send that to the remote host with the given
              name.

       <b>append</b> <u>file</u> ...
              As <b>put</b>, but if the remote <u>file</u> already exists, data is appended to it instead of overwriting it.

       <b>getat</b> <u>file</u> <u>point</u>
       <b>putat</b> <u>file</u> <u>point</u>
       <b>appendat</b> <u>file</u> <u>point</u>
              Versions of <b>get</b>, <b>put</b> and <b>append</b> which will start the transfer at the given  <u>point</u>  in  the  remote
              <u>file</u>.   This is useful for appending to an incomplete local file.  However, note that this ability
              is not universally supported by  servers  (and  is  not  quite  the  behaviour  specified  by  the
              standard).

       <b>delete</b> <u>file</u> ...
              Delete the list of files on the server.

       <b>mkdir</b> <u>directory</u>
              Create a new directory <u>directory</u> on the server.

       <b>rmdir</b> <u>directory</u>
              Delete the directory <u>directory</u>  on the server.

       <b>rename</b> <u>old-name</u> <u>new-name</u>
              Rename file <u>old-name</u> to <u>new-name</u> on the server.

       <b>site</b> <u>arg</u> ...
              Send a host-specific command to the server.  You will probably only need this if instructed by the
              server to use it.

       <b>quote</b> <u>arg</u> ...
              Send  the raw FTP command sequence to the server.  You should be familiar with the FTP command set
              as defined in RFC959 before doing this.  Useful commands may include <b>STAT</b> and <b>HELP</b>.  Note also the
              mechanism for returning messages as described for the variable <b>ZFTP_VERBOSE</b> below,  in  particular
              that all messages from the control connection are sent to standard error.

       <b>close</b>
       <b>quit</b>   Close  the  current  data  connection.   This  unsets  the  shell parameters <b>ZFTP_HOST</b>, <b>ZFTP_PORT</b>,
              <b>ZFTP_IP</b>, <b>ZFTP_SYSTEM</b>, <b>ZFTP_USER</b>, <b>ZFTP_ACCOUNT</b>, <b>ZFTP_PWD</b>, <b>ZFTP_TYPE</b> and <b>ZFTP_MODE</b>.

       <b>session</b> [ <u>sessname</u> ]
              Allows multiple FTP sessions to be used at once.  The name of the session is an  arbitrary  string
              of  characters;  the  default  session  is called `<b>default</b>'.  If this command is called without an
              argument, it will list all the current sessions; with an argument, it will either  switch  to  the
              existing session called <u>sessname</u>, or create a new session of that name.

              Each  session  remembers  the  status  of  the  connection,  the  set of connection-specific shell
              parameters (the same set as are unset when a connection closes, as given  in  the  description  of
              <b>close</b>),  and  any  user  parameters  specified with the <b>params</b> subcommand.  Changing to a previous
              session restores those values; changing to a new session initialises them in the same  way  as  if
              <b>zftp</b>  had  just  been  loaded.   The  name  of  the  current  session  is  given  by the parameter
              <b>ZFTP_SESSION</b>.

       <b>rmsession</b> [ <u>sessname</u> ]
              Delete a session; if a name is not given, the current session is deleted.  If the current  session
              is  deleted,  the earliest existing session becomes the new current session, otherwise the current
              session is not changed.  If the session being deleted is  the  only  one,  a  new  session  called
              `<b>default</b>'  is created and becomes the current session; note that this is a new session even if the
              session being deleted is also called `<b>default</b>'. It is recommended that  sessions  not  be  deleted
              while background commands which use <b>zftp</b> are still active.

   <b>Parameters</b>
       The following shell parameters are used by <b>zftp</b>.  Currently none of them are special.

       <b>ZFTP_TMOUT</b>
              Integer.   The  time  in  seconds  to wait for a network operation to complete before returning an
              error.  If this is not set when the module is loaded, it will be given the default  value  60.   A
              value  of  zero  turns  off  timeouts.   If  a timeout occurs on the control connection it will be
              closed.  Use a larger value if this occurs too frequently.

       <b>ZFTP_IP</b>
              Readonly.  The IP address of the current connection in dot notation.

       <b>ZFTP_HOST</b>
              Readonly.  The hostname of the current remote server.  If the host was opened  as  an  IP  number,
              <b>ZFTP_HOST</b> contains that instead; this saves the overhead for a name lookup, as IP numbers are most
              commonly used when a nameserver is unavailable.

       <b>ZFTP_PORT</b>
              Readonly.  The number of the remote TCP port to which the connection is open (even if the port was
              originally specified as a named service).  Usually this is the standard FTP port, 21.

              In  the  unlikely  event that your system does not have the appropriate conversion functions, this
              appears in network byte order.  If your system is little-endian, the port  then  consists  of  two
              swapped  bytes and the standard port will be reported as 5376.  In that case, numeric ports passed
              to <b>zftp</b> <b>open</b> will also need to be in this format.

       <b>ZFTP_SYSTEM</b>
              Readonly.  The system type string returned by the server in response to an FTP <b>SYST</b> request.   The
              most  interesting  case is a string beginning <b>"UNIX</b> <b>Type:</b> <b>L8"</b>, which ensures maximum compatibility
              with a local UNIX host.

       <b>ZFTP_TYPE</b>
              Readonly.  The type to be used for data transfers , either `<b>A</b>' or `<b>I</b>'.   Use the  <b>type</b>  subcommand
              to change this.

       <b>ZFTP_USER</b>
              Readonly.  The username currently logged in, if any.

       <b>ZFTP_ACCOUNT</b>
              Readonly.   The  account name of the current user, if any.  Most servers do not require an account
              name.

       <b>ZFTP_PWD</b>
              Readonly.  The current directory on the server.

       <b>ZFTP_CODE</b>
              Readonly.  The three digit code of the last FTP reply from the server as a string.  This can still
              be read after the connection is closed, and is not changed when the current session changes.

       <b>ZFTP_REPLY</b>
              Readonly.  The last line of the last reply sent by the server.  This can still be read  after  the
              connection is closed, and is not changed when the current session changes.

       <b>ZFTP_SESSION</b>
              Readonly.  The name of the current FTP session; see the description of the <b>session</b> subcommand.

       <b>ZFTP_PREFS</b>
              A  string  of  preferences  for altering aspects of <b>zftp</b>'s behaviour.  Each preference is a single
              character.  The following are defined:

              <b>P</b>      Passive:  attempt to make the remote server initiate data transfers.  This is slightly more
                     efficient than sendport mode.  If the letter <b>S</b> occurs later in the string,  <b>zftp</b>  will  use
                     sendport mode if passive mode is not available.

              <b>S</b>      Sendport:   initiate transfers by the FTP <b>PORT</b> command.  If this occurs before any <b>P</b> in the
                     string, passive mode will never be attempted.

              <b>D</b>      Dumb:  use only the bare minimum of FTP commands.  This prevents the variables  <b>ZFTP_SYSTEM</b>
                     and  <b>ZFTP_PWD</b>  from being set, and will mean all connections default to ASCII type.  It may
                     prevent <b>ZFTP_SIZE</b> from being set during a transfer if the server does not  send  it  anyway
                     (many servers do).

              If  <b>ZFTP_PREFS</b>  is  not  set  when  <b>zftp</b>  is loaded, it will be set to a default of `<b>PS</b>', i.e. use
              passive mode if available, otherwise fall back to sendport mode.

       <b>ZFTP_VERBOSE</b>
              A string of digits between 0 and 5 inclusive, specifying which responses from the server should be
              printed.  All responses go to standard error.  If any of the numbers 1 to 5 appear in the  string,
              raw  responses  from  the  server  with  reply  codes beginning with that digit will be printed to
              standard error.  The first digit of the three digit reply code is defined by RFC959 to  correspond
              to:

              1.     A positive preliminary reply.

              2.     A positive completion reply.

              3.     A positive intermediate reply.

              4.     A transient negative completion reply.

              5.     A permanent negative completion reply.

              It  should  be  noted  that,  for unknown reasons, the reply `Service not available', which forces
              termination of a connection, is classified as  421,  i.e.  `transient  negative',  an  interesting
              interpretation of the word `transient'.

              The code 0 is special:  it indicates that all but the last line of multiline replies read from the
              server  will  be printed to standard error in a processed format.  By convention, servers use this
              mechanism for sending information for the user to read.  The appropriate reply code, if it matches
              the same response, takes priority.

              If <b>ZFTP_VERBOSE</b> is not set when <b>zftp</b> is loaded, it will be set to the  default  value  <b>450</b>,  i.e.,
              messages  destined  for  the  user  and  all  errors  will be printed.  A null string is valid and
              specifies that no messages should be printed.

   <b>Functions</b>
       <b>zftp_chpwd</b>
              If this function is set by the user, it is called every time the directory changes on the  server,
              including  when  a user is logged in, or when a connection is closed.  In the last case, <b>$ZFTP_PWD</b>
              will be unset; otherwise it will reflect the new directory.

       <b>zftp_progress</b>
              If this function is set by the user, it will be called during a <b>get</b>, <b>put</b> or <b>append</b> operation  each
              time  sufficient data has been received from the host.  During a <b>get</b>, the data is sent to standard
              output, so it is vital that this function should write  to  standard  error  or  directly  to  the
              terminal, <u>not</u> to standard output.

              When it is called with a transfer in progress, the following additional shell parameters are set:

              <b>ZFTP_FILE</b>
                     The name of the remote file being transferred from or to.

              <b>ZFTP_TRANSFER</b>
                     A <b>G</b> for a <b>get</b> operation and a <b>P</b> for a <b>put</b> operation.

              <b>ZFTP_SIZE</b>
                     The total size of the complete file being transferred: the same as the first value provided
                     by  the  <b>remote</b>  and  <b>local</b> subcommands for a particular file.  If the server cannot supply
                     this value for a remote file being retrieved, it will not be set.  If input is from a  pipe
                     the value may be incorrect and correspond simply to a full pipe buffer.

              <b>ZFTP_COUNT</b>
                     The  amount  of  data  so far transferred; a number between zero and <b>$ZFTP_SIZE</b>, if that is
                     set.  This number is always available.

              The function is initially called with <b>ZFTP_TRANSFER</b> set appropriately and <b>ZFTP_COUNT</b> set to  zero.
              After  the  transfer is finished, the function will be called one more time with <b>ZFTP_TRANSFER</b> set
              to <b>GF</b> or <b>PF</b>, in case it wishes to tidy up.  It is otherwise never called twice with the same value
              of <b>ZFTP_COUNT</b>.

              Sometimes the progress meter may cause disruption.  It is up to the user  to  decide  whether  the
              function should be defined and to use <b>unfunction</b> when necessary.

   <b>Problems</b>
       A  connection may not be opened in the left hand side of a pipe as this occurs in a subshell and the file
       information is not updated in the main shell.  In the case  of  type  or  mode  changes  or  closing  the
       connection  in  a subshell, the information is returned but variables are not updated until the next call
       to <b>zftp</b>.  Other status changes in subshells will not be reflected by changes to the variables (but should
       be otherwise harmless).

       Deleting sessions while a <b>zftp</b> command is active in the background can have unexpected effects,  even  if
       it  does  not use the session being deleted.  This is because all shell subprocesses share information on
       the state of all connections, and deleting a session changes the ordering of that information.

       On some operating systems, the control connection is not valid after a  fork(),  so  that  operations  in
       subshells, on the left hand side of a pipeline, or in the background are not possible, as they should be.
       This is presumably a bug in the operating system.

</pre><h4><b>THE</b> <b>ZSH/ZLE</b> <b>MODULE</b></h4><pre>
       The <b>zsh/zle</b> module contains the Zsh Line Editor.  See <u><a href="../man1/zshzle.1.html">zshzle</a></u>(1).

</pre><h4><b>THE</b> <b>ZSH/ZLEPARAMETER</b> <b>MODULE</b></h4><pre>
       The  <b>zsh/zleparameter</b>  module  defines  two  special  parameters  that  can  be  used  to access internal
       information of the Zsh Line Editor (see <u><a href="../man1/zshzle.1.html">zshzle</a></u>(1)).

       <b>keymaps</b>
              This array contains the names of the keymaps currently defined.

       <b>widgets</b>
              This associative array contains one entry per widget. The name of the widget is the  key  and  the
              value gives information about the widget. It is either
                the string `<b>builtin</b>' for builtin widgets,
                a string of the form `<b>user:</b><u>name</u>' for user-defined widgets,
                  where <u>name</u> is the name of the shell function implementing the widget,
                a string of the form `<b>completion:</b><u>type</u><b>:</b><u>name</u>'
                  for completion widgets,
                or  a  null  value if the widget is not yet fully defined.  In the penultimate case, <u>type</u> is the
              name of the builtin widget the completion widget imitates in its behavior and <u>name</u> is the name  of
              the shell function implementing the completion widget.

</pre><h4><b>THE</b> <b>ZSH/ZPROF</b> <b>MODULE</b></h4><pre>
       When  loaded, the <b>zsh/zprof</b> causes shell functions to be profiled.  The profiling results can be obtained
       with the <b>zprof</b> builtin command made available by this module.  There is no  way  to  turn  profiling  off
       other than unloading the module.

       <b>zprof</b> [ <b>-c</b> ]
              Without the <b>-c</b> option, <b>zprof</b> lists profiling results to standard output.  The format is comparable
              to that of commands like <b>gprof</b>.

              At  the top there is a summary listing all functions that were called at least once.  This summary
              is sorted in decreasing order of the amount of time spent in each.  The lines contain  the  number
              of  the  function  in  order,  which  is  used  in other parts of the list in suffixes of the form
              `<b>[</b><u>num</u><b>]</b>', then the number of calls made to the function.  The next three columns list the  time  in
              milliseconds  spent in the function and its descendants, the average time in milliseconds spent in
              the function and its descendants per call and the percentage of time spent in all shell  functions
              used in this function and its descendants.  The following three columns give the same information,
              but  counting  only the time spent in the function itself.  The final column shows the name of the
              function.

              After the summary, detailed information about every function that was invoked is listed, sorted in
              decreasing order of the amount of time spent in each function and its descendants.  Each of  these
              entries  consists  of  descriptions  for  the  functions  that  called the function described, the
              function itself, and the functions that were called from it.  The  description  for  the  function
              itself  has  the  same format as in the summary (and shows the same information).  The other lines
              don't show the number of the function at the beginning and have their function named  indented  to
              make  it  easier  to  distinguish  the line showing the function described in the section from the
              surrounding lines.

              The information shown in this case is almost the same as in the summary, but only  refers  to  the
              call  hierarchy being displayed.  For example, for a calling function the column showing the total
              running time lists the time spent in the described function and its descendants only for the times
              when it was called from that particular calling function.  Likewise, for a called  function,  this
              columns  lists  the total time spent in the called function and its descendants only for the times
              when it was called from the function described.

              Also in this case, the column showing the number of calls to a function also  shows  a  slash  and
              then the total number of invocations made to the called function.

              As  long as the <b>zsh/zprof</b> module is loaded, profiling will be done and multiple invocations of the
              <b>zprof</b> builtin command will show the times and numbers of calls since the module was loaded.   With
              the  <b>-c</b>  option,  the <b>zprof</b> builtin command will reset its internal counters and will not show the
              listing.

</pre><h4><b>THE</b> <b>ZSH/ZPTY</b> <b>MODULE</b></h4><pre>
       The <b>zsh/zpty</b> module offers one builtin:

       <b>zpty</b> [ <b>-e</b> ] [ <b>-b</b> ] <u>name</u> [ <u>arg</u> ... ]
              The arguments following <u>name</u> are concatenated with spaces between, then executed as a command,  as
              if  passed  to the <b>eval</b> builtin.  The command runs under a newly assigned pseudo-terminal; this is
              useful for running commands non-interactively which expect an interactive environment.   The  <u>name</u>
              is not part of the command, but is used to refer to this command in later calls to <b>zpty</b>.

              With the <b>-e</b> option, the pseudo-terminal is set up so that input characters are echoed.

              With the <b>-b</b> option, input to and output from the pseudo-terminal are made non-blocking.

              The  shell  parameter  <b>REPLY</b>  is  set  to  the  file descriptor assigned to the master side of the
              pseudo-terminal.  This allows the terminal to be  monitored  with  ZLE  descriptor  handlers  (see
              <u><a href="../man1/zshzle.1.html">zshzle</a></u>(1))  or manipulated with <b>sysread</b> and <b>syswrite</b> (see THE ZSH/SYSTEM MODULE in <u><a href="../man1/zshmodules.1.html">zshmodules</a></u>(1)).
              <u>Warning</u>: Use of <b>sysread</b> and <b>syswrite</b> is <u>not</u> recommended; use <b>zpty</b> <b>-r</b> and <b>zpty</b> <b>-w</b> unless  you  know
              exactly what you are doing.

       <b>zpty</b> <b>-d</b> [ <u>name</u> ... ]
              The second form, with the <b>-d</b> option, is used to delete commands previously started, by supplying a
              list  of  their  <u>name</u>s.  If no <u>name</u> is given, all commands are deleted.  Deleting a command causes
              the HUP signal to be sent to the corresponding process.

       <b>zpty</b> <b>-w</b> [ <b>-n</b> ] <u>name</u> [ <u>string</u> ... ]
              The <b>-w</b> option can be used to send the to command <u>name</u> the given <u>string</u>s  as  input  (separated  by
              spaces).  If the <b>-n</b> option is <u>not</u> given, a newline is added at the end.

              If  no  <u>string</u>  is  provided,  the  standard input is copied to the pseudo-terminal; this may stop
              before copying the full input if the pseudo-terminal is non-blocking.  The exact input  is  always
              copied: the <b>-n</b> option is not applied.

              Note  that  the  command  under the pseudo-terminal sees this input as if it were typed, so beware
              when sending special tty driver characters such as word-erase, line-kill, and end-of-file.

       <b>zpty</b> <b>-r</b> [ <b>-mt</b> ] <u>name</u> [ <u>param</u> [ <u>pattern</u> ] ]
              The <b>-r</b> option can be used to read the output of the command <u>name</u>.  With only a <u>name</u> argument,  the
              output read is copied to the standard output.  Unless the pseudo-terminal is non-blocking, copying
              continues  until  the  command  under  the  pseudo-terminal exits; when non-blocking, only as much
              output as is immediately available is copied.  The return status is zero if any output is copied.

              When also given a <u>param</u> argument, at most one line is read  and  stored  in  the  parameter  named
              <u>param</u>.   Less  than  a  full  line may be read if the pseudo-terminal is non-blocking.  The return
              status is zero if at least one character is stored in <u>param</u>.

              If a <u>pattern</u> is given as well, output is read until the whole string  read  matches  the  <u>pattern</u>,
              even  in the non-blocking case.  The return status is zero if the string read matches the pattern,
              or if the command has exited but at least one character could still be read.  If the option <b>-m</b>  is
              present,  the return status is zero only if the pattern matches.  As of this writing, a maximum of
              one megabyte of output can be consumed this way; if a full megabyte is read without  matching  the
              pattern, the return status is non-zero.

              In  all cases, the return status is non-zero if nothing could be read, and is <b>2</b> if this is because
              the command has finished.

              If the <b>-r</b> option is combined with the <b>-t</b> option, <b>zpty</b> tests whether  output  is  available  before
              trying to read.  If no output is available, <b>zpty</b> immediately returns the status <b>1</b>.  When used with
              a  <u>pattern</u>,  the behaviour on a failed poll is similar to when the command has exited:  the return
              value is zero if at least one character could still be read even if the pattern failed to match.

       <b>zpty</b> <b>-t</b> <u>name</u>
              The <b>-t</b> option without the <b>-r</b> option can be used to test whether the command <u>name</u> is still running.
              It returns a zero status if the command is running and a non-zero value otherwise.

       <b>zpty</b> [ <b>-L</b> ]
              The last form, without any arguments, is used to list the commands currently defined.  If  the  <b>-L</b>
              option is given, this is done in the form of calls to the <b>zpty</b> builtin.

</pre><h4><b>THE</b> <b>ZSH/ZSELECT</b> <b>MODULE</b></h4><pre>
       The <b>zsh/zselect</b> module makes available one builtin command:

       <b>zselect</b> [ <b>-rwe</b> ] [ <b>-t</b> <u>timeout</u> ] [ <b>-a</b> <u>array</u> ] [ <b>-A</b> <u>assoc</u> ] [ <u>fd</u> ... ]
              The  <b>zselect</b>  builtin  is  a  front-end  to  the  `select'  system call, which blocks until a file
              descriptor is ready for reading or writing, or has an error condition, with an  optional  timeout.
              If  this is not available on your system, the command prints an error message and returns status 2
              (normal errors return status 1).  For  more  information,  see  your  system's  documentation  for
              <u><a href="../man3/select.3.html">select</a></u>(3).  Note there is no connection with the shell builtin of the same name.

              Arguments  and  options  may  be  intermingled  in  any  order.   Non-option  arguments  are  file
              descriptors, which must be decimal integers.  By default, file descriptors are to  be  tested  for
              reading,  i.e.  <b>zselect</b> will return when data is available to be read from the file descriptor, or
              more precisely, when a read operation from the file descriptor will not block.  After a <b>-r</b>, <b>-w</b> and
              <b>-e</b>, the given file descriptors are to be tested for reading, writing, or error conditions.   These
              options and an arbitrary list of file descriptors may be given in any order.

              (The  presence  of  an  `error  condition'  is  not  well  defined  in  the documentation for many
              implementations  of  the  select  system  call.   According  to  recent  versions  of  the   POSIX
              specification,  it  is  really  an  <u>exception</u>  condition,  of  which  the only standard example is
              out-of-band data received on a socket.  So zsh users are unlikely to find the <b>-e</b> option useful.)

              The option `<b>-t</b> <u>timeout</u>' specifies a timeout in hundredths of a second.  This may be zero, in which
              case the file descriptors will simply be polled  and  <b>zselect</b>  will  return  immediately.   It  is
              possible  to  call  zselect  with  no  file  descriptors  and  a  non-zero  timeout  for  use as a
              finer-grained replacement for `sleep'; note, however, the return status is always 1 for a timeout.

              The option `<b>-a</b> <u>array</u>' indicates that <u>array</u> should be set to indicate the file descriptor(s)  which
              are  ready.  If the option is not given, the array <b>reply</b> will be used for this purpose.  The array
              will contain a string similar to the arguments for <b>zselect</b>.  For example,

                     <b>zselect</b> <b>-t</b> <b>0</b> <b>-r</b> <b>0</b> <b>-w</b> <b>1</b>

              might return immediately with status 0 and <b>$reply</b> containing `<b>-r</b> <b>0</b> <b>-w</b> <b>1</b>' to show  that  both  file
              descriptors are ready for the requested operations.

              The  option  `<b>-A</b>  <u>assoc</u>'  indicates that the associative array <u>assoc</u> should be set to indicate the
              file descriptor(s) which are ready.  This option overrides  the  option  <b>-a</b>,  nor  will  <b>reply</b>  be
              modified.  The keys of <b>assoc</b> are the file descriptors, and the corresponding values are any of the
              characters `<b>rwe</b>' to indicate the condition.

              The  command  returns  status  0 if some file descriptors are ready for reading.  If the operation
              timed out, or a timeout of 0 was given and no file descriptors were ready, or there was an  error,
              it  returns  status  1  and  the array will not be set (nor modified in any way).  If there was an
              error in the select operation the appropriate error message is printed.

</pre><h4><b>THE</b> <b>ZSH/ZUTIL</b> <b>MODULE</b></h4><pre>
       The <b>zsh/zutil</b> module only adds some builtins:

       <b>zstyle</b> [ <b>-L</b> [ <u>metapattern</u> [ <u>style</u> ] ] ]
       <b>zstyle</b> [ <b>-e</b> | <b>-</b> | <b>--</b> ] <u>pattern</u> <u>style</u> <u>string</u> ...
       <b>zstyle</b> <b>-d</b> [ <u>pattern</u> [ <u>style</u> ... ] ]
       <b>zstyle</b> <b>-g</b> <u>name</u> [ <u>pattern</u> [ <u>style</u> ] ]
       <b>zstyle</b> <b>-</b>{<b>a</b>|<b>b</b>|<b>s</b>} <u>context</u> <u>style</u> <u>name</u> [ <u>sep</u> ]
       <b>zstyle</b> <b>-</b>{<b>T</b>|<b>t</b>} <u>context</u> <u>style</u> [ <u>string</u> ... ]
       <b>zstyle</b> <b>-m</b> <u>context</u> <u>style</u> <u>pattern</u>
              This builtin command is used to define and lookup styles.  Styles are pairs of names  and  values,
              where  the  values  consist  of any number of strings.  They are stored together with patterns and
              lookup is done by giving a string, called the `<u>context</u>', which is matched  against  the  patterns.
              The definition stored for the most specific pattern that matches will be returned.

              A  pattern  is  considered  to  be  more  specific  than  another  if  it contains more components
              (substrings separated by colons) or if the patterns for the components are  more  specific,  where
              simple  strings  are  considered  to  be  more  specific  than  patterns  and complex patterns are
              considered to be more specific than the pattern `<b>*</b>'.  A `<b>*</b>' in the pattern will match zero or more
              characters in the context; colons are not treated specially in this regard.  If two  patterns  are
              equally specific, the tie is broken in favour of the pattern that was defined first.

              <u>Example</u>

              For  example,  a  fictional `<b>weather</b>' plugin might state in its documentation that it looks up the
              <b>preferred-precipitation</b>  style  under  the  `<b>:weather:</b><u>continent</u><b>:</b><u>day-of-the-week</u><b>:</b><u>phase-of-the-moon</u>'
              context.  According to this, you might set the following in your <b>zshrc</b>:

                     <b>zstyle</b> <b>':weather:europe:*'</b> <b>preferred-precipitation</b> <b>rain</b>
                     <b>zstyle</b> <b>':weather:*:Sunday:*'</b> <b>preferred-precipitation</b> <b>snow</b>

              Then the plugin would run under the hood a command such as

                     <b>zstyle</b> <b>-s</b> <b>":weather:${continent}:${day_of_week}:${moon_phase}"</b> <b>preferred-precipitation</b> <b>REPLY</b>

              in  order to retrieve your preference into the scalar variable <b>$REPLY</b>.  On Sundays <b>$REPLY</b> would be
              set to `<b>snow</b>'; in Europe it would be set to `<b>rain</b>'; and on Sundays in Europe it would  be  set  to
              `<b>snow</b>'  again,  because  the patterns `<b>:weather:europe:*</b>' and `<b>:weather:*:Sunday:*</b>' both match the
              <u>context</u> argument to <b>zstyle</b> <b>-s</b>, are equally specific, and the latter is more specific  (because  it
              has more colon-separated components).

              <u>Usage</u>

              The forms that operate on patterns are the following.

              <b>zstyle</b> [ <b>-L</b> [ <u>metapattern</u> [ <u>style</u> ] ] ]
                     Without  arguments,  lists  style  definitions.   Styles  are shown in alphabetic order and
                     patterns are shown in the order <b>zstyle</b> will test them.

                     If the <b>-L</b> option is given, listing is done in the form of calls to  <b>zstyle</b>.   The  optional
                     first argument, <u>metapattern</u>, is a pattern which will be matched against the string supplied
                     as  <u>pattern</u>  when  the  style  was  defined.   Note:  this  means,  for example, `<b>zstyle</b> <b>-L</b>
                     <b>":completion:*"</b>' will  match  any  supplied  pattern  beginning  `<b>:completion:</b>',  not  just
                     <b>":completion:*"</b>:   use <b>':completion:\*'</b> to match that.  The optional second argument limits
                     the output to a specific <u>style</u> (not a pattern).   <b>-L</b>  is  not  compatible  with  any  other
                     options.

              <b>zstyle</b> [ <b>-</b> | <b>--</b> | <b>-e</b> ] <u>pattern</u> <u>style</u> <u>string</u> ...
                     Defines the given <u>style</u> for the <u>pattern</u> with the <u>string</u>s as the value.  If the <b>-e</b> option is
                     given, the <u>string</u>s will be concatenated (separated by spaces) and the resulting string will
                     be  evaluated (in the same way as it is done by the <b>eval</b> builtin command) when the style is
                     looked up.  In this case the parameter `<b>reply</b>' must be assigned to set the strings returned
                     after the evaluation.  Before evaluating the value, <b>reply</b> is unset,  and  if  it  is  still
                     unset after the evaluation, the style is treated as if it were not set.

              <b>zstyle</b> <b>-d</b> [ <u>pattern</u> [ <u>style</u> ... ] ]
                     Delete style definitions. Without arguments all definitions are deleted, with a <u>pattern</u> all
                     definitions  for  that  pattern  are  deleted  and if any <u>style</u>s are given, then only those
                     styles are deleted for the <u>pattern</u>.

              <b>zstyle</b> <b>-g</b> <u>name</u> [ <u>pattern</u> [ <u>style</u> ] ]
                     Retrieve a style definition. The <u>name</u> is used as the name of an array in which the  results
                     are  stored.  Without  any  further  arguments,  all  patterns defined are returned. With a
                     <u>pattern</u> the styles defined for that pattern are returned and with  both  a  <u>pattern</u>  and  a
                     <u>style</u>, the value strings of that combination is returned.

              The other forms can be used to look up or test styles for a given context.

              <b>zstyle</b> <b>-s</b> <u>context</u> <u>style</u> <u>name</u> [ <u>sep</u> ]
                     The  parameter <u>name</u> is set to the value of the style interpreted as a string.  If the value
                     contains several strings they are concatenated with spaces (or with the <u>sep</u> string if  that
                     is given) between them.

                     Return <b>0</b> if the style is set, <b>1</b> otherwise.

              <b>zstyle</b> <b>-b</b> <u>context</u> <u>style</u> <u>name</u>
                     The  value  is  stored in <u>name</u> as a boolean, i.e. as the string `<b>yes</b>' if the value has only
                     one string and that string is equal to one of `<b>yes</b>', `<b>true</b>', `<b>on</b>', or `<b>1</b>'. If the value  is
                     any other string or has more than one string, the parameter is set to `<b>no</b>'.

                     Return <b>0</b> if <u>name</u> is set to `<b>yes</b>', <b>1</b> otherwise.

              <b>zstyle</b> <b>-a</b> <u>context</u> <u>style</u> <u>name</u>
                     The  value is stored in <u>name</u> as an array. If <u>name</u> is declared as an associative array,  the
                     first, third, etc. strings are used as the keys and the  other  strings  are  used  as  the
                     values.

                     Return <b>0</b> if the style is set, <b>1</b> otherwise.

              <b>zstyle</b> <b>-t</b> <u>context</u> <u>style</u> [ <u>string</u> ... ]
              <b>zstyle</b> <b>-T</b> <u>context</u> <u>style</u> [ <u>string</u> ... ]
                     Test the value of a style, i.e. the <b>-t</b> option only returns a status (sets <b>$?</b>).  Without any
                     <u>string</u> the return status is zero if the style is defined for at least one matching pattern,
                     has  only  one string in its value, and that is equal to one of `<b>true</b>', `<b>yes</b>', `<b>on</b>' or `<b>1</b>'.
                     If any <u>string</u>s are given the status is zero if and only if at least one of the  <u>string</u>s  is
                     equal  to  at  least  one  of the strings in the value. If the style is defined but doesn't
                     match, the return status is <b>1</b>. If the style is not defined, the status is <b>2</b>.

                     The <b>-T</b> option tests the values of the style like <b>-t</b>, but it  returns  status  zero  (rather
                     than <b>2</b>) if the style is not defined for any matching pattern.

              <b>zstyle</b> <b>-m</b> <u>context</u> <u>style</u> <u>pattern</u>
                     Match  a  value.  Returns status zero if the <u>pattern</u> matches at least one of the strings in
                     the value.

       <b>zformat</b> <b>-f</b> <u>param</u> <u>format</u> <u>spec</u> ...
       <b>zformat</b> <b>-F</b> <u>param</u> <u>format</u> <u>spec</u> ...
       <b>zformat</b> <b>-a</b> <u>array</u> <u>sep</u> <u>spec</u> ...
              This builtin provides different forms of formatting. The  first  form  is  selected  with  the  <b>-f</b>
              option.  In  this  case  the <u>format</u> string will be modified by replacing sequences starting with a
              percent sign in it with strings from the <u>spec</u>s.  Each <u>spec</u> should be  of  the  form  `<u>char</u><b>:</b><u>string</u>'
              which  will cause every appearance of the sequence `<b>%</b><u>char</u>' in <u>format</u> to be replaced by the <u>string</u>.
              The `<b>%</b>' sequence may also contain optional minimum and maximum field width specifications  between
              the `<b>%</b>' and the `<u>char</u>' in the form `<b>%</b><u>min</u><b>.</b><u>max</u><b>c</b>', i.e. the minimum field width is given first and if
              the maximum field width is used, it has to be preceded by a dot.  Specifying a minimum field width
              makes  the  result  be padded with spaces to the right if the <u>string</u> is shorter than the requested
              width.  Padding to the left can be achieved by giving  a  negative  minimum  field  width.   If  a
              maximum  field width is specified, the <u>string</u> will be truncated after that many characters.  After
              all `<b>%</b>' sequences for the given <u>spec</u>s have been processed, the resulting string is stored  in  the
              parameter <u>param</u>.

              The  <b>%</b>-escapes also understand ternary expressions in the form used by prompts.  The <b>%</b> is followed
              by a `<b>(</b>' and then an ordinary format specifier character as described above.  There may be  a  set
              of  digits  either  before  or after the `<b>(</b>'; these specify a test number, which defaults to zero.
              Negative numbers are also allowed.  An arbitrary delimiter character follows the format specifier,
              which is followed by a piece of `true' text, the delimiter character again,  a  piece  of  `false'
              text,  and  a  closing  parenthesis.  The complete expression (without the digits) thus looks like
              `<b>%(</b><u>X</u><b>.</b><u>text1</u><b>.</b><u>text2</u><b>)</b>', except that the `<b>.</b>' character is arbitrary.  The value given  for  the  format
              specifier  in  the <u>char</u><b>:</b><u>string</u> expressions is evaluated as a mathematical expression, and compared
              with the test number.  If they are the same, <u>text1</u> is output, else <u>text2</u> is output.  A parenthesis
              may be escaped in <u>text2</u> as <b>%)</b>.  Either of <u>text1</u> or <u>text2</u> may contain nested <b>%</b>-escapes.

              For example:

                     <b>zformat</b> <b>-f</b> <b>REPLY</b> <b>"The</b> <b>answer</b> <b>is</b> <b>'%3(c.yes.no)'."</b> <b>c:3</b>

              outputs "The answer is 'yes'." to <b>REPLY</b> since the value for the format specifier <b>c</b> is 3,  agreeing
              with the digit argument to the ternary expression.

              With  <b>-F</b> instead of <b>-f</b>, ternary expressions choose between the `true' or `false' text on the basis
              of whether the format specifier is present and non-empty.  A test number indicates a minimum width
              for the value given in the format specifier. Negative numbers reverse this, so  the  test  is  for
              whether the value exceeds a maximum width.

              The  form, using the <b>-a</b> option, can be used for aligning strings.  Here, the <u>spec</u>s are of the form
              `<u>left</u><b>:</b><u>right</u>' where `<u>left</u>' and `<u>right</u>' are  arbitrary  strings.   These  strings  are  modified  by
              replacing  the  colons  by the <u>sep</u> string and padding the <u>left</u> strings with spaces to the right so
              that the <u>sep</u> strings in the result (and hence the <u>right</u> strings after them) are all aligned if the
              strings are printed below each other.  All strings without a colon  are  left  unchanged  and  all
              strings  with an empty <u>right</u> string have the trailing colon removed.  In both cases the lengths of
              the strings are not used to determine how the other strings are to be aligned.   A  colon  in  the
              <u>left</u> string can be escaped with a backslash.  The resulting strings are stored in the <u>array</u>.

       <b>zregexparse</b>
              This implements some internals of the <b>_regex_arguments</b> function.

       <b>zparseopts</b> [ <b>-D</b> <b>-E</b> <b>-F</b> <b>-K</b> <b>-M</b> ] [ <b>-a</b> <u>array</u> ] [ <b>-A</b> <u>assoc</u> ] [ <b>-</b> ] <u>spec</u> ...
              This builtin simplifies the parsing of options in positional parameters, i.e. the set of arguments
              given  by <b>$*</b>.  Each <u>spec</u> describes one option and must be of the form `<u>opt</u>[<b>=</b><u>array</u>]'.  If an option
              described by <u>opt</u> is found in the positional parameters it is copied into the <u>array</u> specified  with
              the  <b>-a</b>  option;  if  the  optional `<b>=</b><u>array</u>' is given, it is instead copied into that array, which
              should be declared as a normal array and never as an associative array.

              Note that it is an error to give any <u>spec</u> without an `<b>=</b><u>array</u>' unless one of the <b>-a</b> or  <b>-A</b>  options
              is used.

              Unless  the  <b>-E</b>  option is given, parsing stops at the first string that isn't described by one of
              the <u>spec</u>s.  Even with <b>-E</b>, parsing always stops at a positional parameter equal to `<b>-</b>' or `<b>--</b>'. See
              also <b>-F</b>.

              The <u>opt</u> description must be one of the following.  Any of the special characters can appear in the
              option name provided it is preceded by a backslash.

              <u>name</u>
              <u>name</u><b>+</b>  The <u>name</u> is the name of the option without the leading `<b>-</b>'.  To specify  a  GNU-style  long
                     option,  one of the usual two leading `<b>-</b>' must be included in <u>name</u>; for example, a `<b>--file</b>'
                     option is represented by a <u>name</u> of `<b>-file</b>'.

                     If a `<b>+</b>' appears after <u>name</u>, the option is appended to <u>array</u> each time it is found  in  the
                     positional parameters; without the `<b>+</b>' only the <u>last</u> occurrence of the option is preserved.

                     If  one  of these forms is used, the option takes no argument, so parsing stops if the next
                     positional parameter does not also begin with `<b>-</b>' (unless the <b>-E</b> option is used).

              <u>name</u><b>:</b>
              <u>name</u><b>:-</b>
              <u>name</u><b>::</b> If one or two colons are given, the option takes an argument; with one colon, the  argument
                     is  mandatory  and  with  two colons it is optional.  The argument is appended to the <u>array</u>
                     after the option itself.

                     An optional argument is put into the same array element as the option name (note that  this
                     makes  empty  strings  as arguments indistinguishable).  A mandatory argument is added as a
                     separate element unless the `<b>:-</b>' form is used, in which case the argument is put  into  the
                     same element.

                     A `<b>+</b>' as described above may appear between the <u>name</u> and the first colon.

              In  all  cases,  option-arguments  must appear either immediately following the option in the same
              positional parameter or in the next one.  Even  an  optional  argument  may  appear  in  the  next
              parameter,  unless  it  begins  with a `<b>-</b>'.  There is no special handling of `<b>=</b>' as with GNU-style
              argument parsers; given the <u>spec</u> `<b>-foo:</b>',  the  positional  parameter  `<b>--foo=bar</b>'  is  parsed  as
              `<b>--foo</b>' with an argument of `<b>=bar</b>'.

              When  the  names  of  two  options  that  take no arguments overlap, the longest one wins, so that
              parsing for  the  <u>spec</u>s  `<b>-foo</b>  <b>-foobar</b>'  (for  example)  is  unambiguous.  However,  due  to  the
              aforementioned  handling  of option-arguments, ambiguities may arise when at least one overlapping
              <u>spec</u> takes an argument, as in `<b>-foo:</b> <b>-foobar</b>'. In that case, the last matching <u>spec</u> wins.

              The options of <b>zparseopts</b> itself cannot be stacked because,  for  example,  the  stack  `<b>-DEK</b>'  is
              indistinguishable  from  a  <u>spec</u> for the GNU-style long option `<b>--DEK</b>'.  The options of <b>zparseopts</b>
              itself are:

              <b>-a</b> <u>array</u>
                     As described above, this names the default array in which to store the recognised options.

              <b>-A</b> <u>assoc</u>
                     If this is given, the options and their values are also put into an associative array  with
                     the option names as keys and the arguments (if any) as the values.

              <b>-D</b>     If  this  option  is given, all options found are removed from the positional parameters of
                     the calling shell or shell function, up to but not  including  any  not  described  by  the
                     <u>spec</u>s.  If the first such parameter is `<b>-</b>' or `<b>--</b>', it is removed as well.  This is similar
                     to using the <b>shift</b> builtin.

              <b>-E</b>     This  changes the parsing rules to <u>not</u> stop at the first string that isn't described by one
                     of the <u>spec</u>s.  It can be used to test for or (if used together with <b>-D</b>) extract options and
                     their arguments, ignoring all other options and arguments that may  be  in  the  positional
                     parameters.  As indicated above, parsing still stops at the first `<b>-</b>' or `<b>--</b>' not described
                     by a <u>spec</u>, but it is not removed when used with <b>-D</b>.

              <b>-F</b>     If  this  option  is given, <b>zparseopts</b> immediately stops at the first option-like parameter
                     not described by one of the <u>spec</u>s, prints an error message, and returns status 1.   Removal
                     (<b>-D</b>)  and  extraction  (<b>-E</b>)  are  not  performed,  and option arrays are not updated.  This
                     provides basic validation for the given options.

                     Note that the appearance in the positional parameters of an  option  without  its  required
                     argument  always  aborts  parsing  and  returns  an  error as described above regardless of
                     whether this option is used.

              <b>-K</b>     With this option, the arrays specified with the <b>-a</b> option and with the `<b>=</b><u>array</u>'  forms  are
                     kept  unchanged  when  none  of  the <u>spec</u>s for them is used.  Otherwise the entire array is
                     replaced when any of  the  <u>spec</u>s  is  used.   Individual  elements  of  associative  arrays
                     specified with the <b>-A</b> option are preserved by <b>-K</b>.  This allows assignment of default values
                     to arrays before calling <b>zparseopts</b>.

              <b>-M</b>     This changes the assignment rules to implement a map among equivalent option names.  If any
                     <u>spec</u>  uses  the `<b>=</b><u>array</u>' form, the string <u>array</u> is interpreted as the name of another <u>spec</u>,
                     which is used to choose where to store the values.  If no other <u>spec</u> is found,  the  values
                     are  stored  as  usual.  This changes only the way the values are stored, not the way <b>$*</b> is
                     parsed, so results may be unpredictable if the `<u>name</u><b>+</b>' specifier is used inconsistently.

              For example,

                     <b>set</b> <b>--</b> <b>-a</b> <b>-bx</b> <b>-c</b> <b>y</b> <b>-cz</b> <b>baz</b> <b>-cend</b>
                     <b>zparseopts</b> <b>a=foo</b> <b>b:=bar</b> <b>c+:=bar</b>

              will have the effect of

                     <b>foo=(-a)</b>
                     <b>bar=(-b</b> <b>x</b> <b>-c</b> <b>y</b> <b>-c</b> <b>z)</b>

              The arguments from `<b>baz</b>' on will not be used.

              As an example for the <b>-E</b> option, consider:

                     <b>set</b> <b>--</b> <b>-a</b> <b>x</b> <b>-b</b> <b>y</b> <b>-c</b> <b>z</b> <b>arg1</b> <b>arg2</b>
                     <b>zparseopts</b> <b>-E</b> <b>-D</b> <b>b:=bar</b>

              will have the effect of

                     <b>bar=(-b</b> <b>y)</b>
                     <b>set</b> <b>--</b> <b>-a</b> <b>x</b> <b>-c</b> <b>z</b> <b>arg1</b> <b>arg2</b>

              I.e., the option <b>-b</b> and its arguments are taken from the positional parameters and  put  into  the
              array <b>bar</b>.

              The <b>-M</b> option can be used like this:

                     <b>set</b> <b>--</b> <b>-a</b> <b>-bx</b> <b>-c</b> <b>y</b> <b>-cz</b> <b>baz</b> <b>-cend</b>
                     <b>zparseopts</b> <b>-A</b> <b>bar</b> <b>-M</b> <b>a=foo</b> <b>b+:</b> <b>c:=b</b>

              to have the effect of

                     <b>foo=(-a)</b>
                     <b>bar=(-a</b> <b>''</b> <b>-b</b> <b>xyz)</b>

zsh 5.9                                           May 14, 2022                                     <u><a href="../man1/ZSHMODULES.1.html">ZSHMODULES</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>