<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>llvm-ifs - shared object stubbing tool</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/noble/+package/llvm-16">llvm-16_16.0.6-23ubuntu4_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       llvm-ifs - shared object stubbing tool

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>llvm-ifs</b> [<u>options</u>] <u>inputs</u>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>llvm-ifs</b>  is a tool that jointly produces human readable text-based stubs (.ifs files) for shared objects
       and linkable shared object stubs (.so files) from either ELF shared  objects  or  text-based  stubs.  The
       text-based  stubs  is  useful for monitoring ABI changes of the shared object. The linkable shared object
       stubs can be used to avoid unnecessary relinks when the ABI of shared libraries does not change.

</pre><h4><b>IFS</b> <b>FORMATS</b></h4><pre>
       Here is an example of the text representation (IFS) of a shared object produced by the <b>llvm-ifs</b>:

          --- !ifs-v1
          IFSVersion: 3.0
          SoName: libtest.so /* Optional */
          Target: x86_64-unknown-linux-gnu   /* Optional, format 1, same format as llvm target triple */
          Target: { Arch: x86_64, Endianness: little, Bitwidth: 64 } /* Optional, format 2 */
          NeededLibs:
            - libc.so.6
          Symbols:
            - { Name: sym0, Type: Notype }
            - { Name: sym1, Type: Object, Size: 0 }
            - { Name: sym2, Type: Func, Weak: false }
            - { Name: sym3, Type: TLS }
            - { Name: sym4, Type: Unknown, Warning: foo }
          ...

       • <b>IFSVersion</b>: Version of the IFS file for reader compatibility.

       • <b>SoName</b> (optional): Name of the shared object file that is being stubbed.

       • <b>Target</b> (optional): The architecture, endianness and bitwise information of this shared object.  It  can
         be  either  in  explicit  format  or  in  implicit  LLVM  triple  format. It can be optional and can be
         overridden from command line options.

       • <b>NeededLibs</b>: The list of the external shared objects that this library depends on.

       • <b>Symbols</b>: A collection of all data needed to link objects for each symbol, sorted by name  in  ascending
         order.

         • <b>Name</b>: Symbol name.

         • <b>Type</b>:  Whether  the  symbol is an object, function, no-type, thread local storage, or unknown. Symbol
           types not explicitly supported are mapped as unknown to improve signal-to-noise ratio.

         • <b>Size</b>: The size of the symbol in question, doesn’t apply to functions,  and  is  optional  for  NoType
           symbols.

         • <b>Undefined</b>: Whether or not the symbol is defined in this shared object file.

         • <b>Weak</b>: Whether or not the symbol should be treated as weak.

         • <b>Warning</b> (optional): Warning text to output when this symbol is linked against.

       This  YAML  based text format contains everything that is needed to generate a linkable ELF shared object
       as well as an Apple TAPI format file. The ordering of symbols is sorted, so these  files  can  be  easily
       compared  using  diff tools.  If the content of the file changes, it indicates a potentially ABI breaking
       change.

</pre><h4><b>ELF</b> <b>STUB</b> <b>FORMAT</b></h4><pre>
       A minimum ELF file that can be used by linker should have following sections properly populated:

       • ELF header.

       • Section headers.

       • Dynamic symbol table (<b>.dynsym</b> section).

       • Dynamic string table (<b>.dynstr</b> section).

       • Dynamic table (<b>.dynamic</b> section).

         • <b>DT_SYMTAB</b> entry.

         • <b>DT_STRTAB</b> entry.

         • <b>DT_STRSZ</b> entry.

         • <b>DT_NEEDED</b> entries. (optional)

         • <b>DT_SONAME</b> entry. (optional)

       • Section header string table (<b>.shstrtab</b> section)

       This ELF file may have compatibility issues with ELF analysis tools that rely  on  the  program  headers.
       Linkers like LLD work fine with such a minimum ELF file without errors.

</pre><h4><b>OPTIONS</b></h4><pre>
       <b>--input-format=[IFS|ELF|OtherObjectFileFormats]</b>
              Specify  input  file  format.  Currently,  only  text  IFS  files  and ELF shared object files are
              supported. This flag is optional as the input format can be inferred.

       <b>--output-elf=&lt;output-filename&gt;</b>
              Specify the output file for ELF shared object stub.

       <b>--output-ifs=&lt;output-filename&gt;</b>
              Specify the output file for text IFS.

       <b>--output-tbd=&lt;output-filename&gt;</b>
              Specify the output file for Apple TAPI tbd.

       <b>--arch=[x86_64|AArch64|...]</b>
              This flag is optional and it should only be used when reading an IFS file which  does  not  define
              the  <b>Arch</b>  (architecture).  This  flag defines the architecture of the output file, and can be any
              string supported by ELF ‘e_machine’ field. If the value is conflicting with the IFS file, an error
              will be reported and the program will stop.

       <b>--endianness=[little|big]</b>
              This flag is optional and it should only be used when reading an IFS file which  does  not  define
              the  <b>Endianness</b>.  This flag defines the endianness of the output file. If the value is conflicting
              with the IFS file, an error will be reported and the program will stop.

       <b>--bitwidth=[32|64]</b>
              This flag is optional and it should only be used when reading an IFS file which  does  not  define
              the <b>BitWidth</b>. This flag defines the bit width of the output file. If the value is conflicting with
              the input IFS file, an error will be reported and the program will stop.

       <b>--target=&lt;target</b> <b>triple&gt;</b>
              This  flag  is optional and should only be used when reading an IFS file which does not define any
              target information. This flag defines architecture, endianness and bit width of  the  output  file
              using  llvm  target  triple.   This  flag  cannot be used simultaneously with other target related
              flags.

       <b>--hint-ifs-target=&lt;target</b> <b>triple&gt;</b>
              This flag is optional and should only be used when reading an ELF shared object and generating  an
              IFS  file.  by  default,  llvm-ifs  will use ‘<b>Arch</b>, <b>Endianness</b> and <b>BitWidth</b>’ fields to reflect the
              target information from the input object file. Using this flag will  tell  llvm-ifs  the  expected
              target  triple in the output IFS file. If the value matches the target information from the object
              file, this value will be used in the ‘Target:’ filed in the generated IFS. If  it  conflicts  with
              the input object file, an error will be reported and the program will stop.

       <b>--hint-ifs-target</b>
              This  flag  is optional and should only be used when outputting an IFS file.  This flag strips the
              <b>Arch</b> field from the IFS file so it can be overridden later.

       <b>--strip-ifs-endianness</b>
              This flag is optional and should only be used when outputting an IFS file.  This flag  strips  the
              <b>Endianness</b> field from the IFS file so it can be overridden later.

       <b>--strip-ifs-bitwidth</b>
              This  flag  is optional and should only be used when outputting an IFS file.  This flag strips the
              <b>BitWidth</b> field from the IFS file so it can be overridden later.

       <b>--strip-ifs-target</b>
              This flag is optional and should only be used when outputting an IFS file.  This flag  strips  the
              <b>Target</b> field from the IFS file so it can be overridden later.

       <b>--write-if-changed</b>
              When  this  flag  is set, llvm-ifs will only write the output file if it does not already exist or
              the content will be different from the existing file.

       <b>--strip-size</b>
              When this flag is set, llvm-ifs will remove the size field from  the  output  ifs  file.  This  is
              useful  for  shared  objects that only intend to be linked against position independent code which
              doesn’t need copy relocations, or where the size of an object is not a useful part of the  abi  to
              track.

</pre><h4><b>EXIT</b> <b>STATUS</b></h4><pre>
       If  <b>llvm-ifs</b>  succeeds,  it will exit with 0. Otherwise, if an error occurs, it will exit with a non-zero
       value.

</pre><h4><b>AUTHOR</b></h4><pre>
       Maintained by the LLVM Team (https://llvm.org/).

</pre><h4><b>COPYRIGHT</b></h4><pre>
       2003-2024, LLVM Project

15                                                 2024-04-14                                        <u><a href="../man1/LLVM-IFS.1.html">LLVM-IFS</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>