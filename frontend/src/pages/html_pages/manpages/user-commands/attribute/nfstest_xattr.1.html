<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>nfstest_xattr - Extended Attributes tests</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/nfstest">nfstest_3.2-3_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       nfstest_xattr - Extended Attributes tests

</pre><h4><b>SYNOPSIS</b></h4><pre>
       nfstest_xattr --server &lt;server&gt; [options]

</pre><h4><b>DESCRIPTION</b></h4><pre>
       Verify correct functionality of extended attributes

       Extended  attributes  are  name:value pairs associated permanently with files and directories, similar to
       the environment strings associated with a process. An attribute may be defined or  undefined.  If  it  is
       defined, its value may be empty or non-empty. Extended attributes are extensions to the normal attributes
       which  are  associated  with  all  inodes  in  the  system.  They  are  often  used to provide additional
       functionality to a filesystem.

       Tests are divided into five groups: getxattr, setxattr, removexattr, listxattr and  cinfo.  The  getxattr
       tests  verify  the  retrieval  of  extended  attribute  values. The setxattr tests verify the creation or
       modification of extended attributes. The removexattr tests verify the removal of extended attributes. The
       listxattr tests verify the listing of extended attributes. And finally, the cinfo tests verify the change
       info returned by the server is correct when the file is either modified or not from a different client.

       Furthermore, when a different client is holding a read delegation, verify the delegation is recalled only
       when creating, modifying or removing an extended attribute. On the other hand, verify the read delegation
       is not recalled when listing attributes or retrieving their values.

       Negative testing is included like retrieval or removal of an  extended  attribute  name  which  does  not
       exist.  Creating  an  attribute which already exists should fail while using XATTR_CREATE flag. Trying to
       modify an attribute which does not exist should fail if using XATTR_REPLACE flag.

</pre><h4><b>OPTIONS</b></h4><pre>
       --version
              show program's version number and exit

       -h, --help
              show this help message and exit

       -f FILE, --file=FILE
              File where options are specified besides  the  system  wide  file  /etc/nfstest,  user  wide  file
              $HOME/.nfstest or in the current directory .nfstest file

   <b>NFS</b> <b>specific</b> <b>options:</b>
       -s SERVER, --server=SERVER
              Server name or IP address

       -e EXPORT, --export=EXPORT
              Exported file system to mount [default: '/']

       --nfsversion=NFSVERSION
              NFS version, e.g., 3, 4, 4.1, etc. [default: 4.2]

       -m MTPOINT, --mtpoint=MTPOINT
              Mount point [default: '/mnt/t']

       -p PORT, --port=PORT
              NFS server port [default: 2049]

       --proto=PROTO
              NFS protocol name [default: 'tcp']

       --sec=SEC
              Security flavor [default: 'sys']

       --nconnect=NCONNECT
              Multiple TCP connections option [default: '1']

       -o MTOPTS, --mtopts=MTOPTS
              Mount options [default: 'hard,rsize=4096,wsize=4096']

       --datadir=DATADIR
              Data directory where files are created, directory is created on the mount point [default: '']

   <b>Logging</b> <b>options:</b>
       -v VERBOSE, --verbose=VERBOSE
              Verbose level for debug messages [default: 'opts|info|dbg1|dbg2|dbg3']

       --tverbose=TVERBOSE
              Verbose level for test messages [default: '1']

       --createlog
              Create log file

       --rexeclog
              Create rexec log files

       --warnings
              Display warnings

       --tag=TAG
              Informational tag, it is displayed as an INFO message [default: '']

       --notty
              Do not use terminal colors on output

       --isatty
              Use terminal colors on output -- useful when running with nohup

   <b>Packet</b> <b>trace</b> <b>options:</b>
       --createtraces
              Create a packet trace for each test

       --tbsize=TBSIZE
              Capture buffer size for tcpdump [default: 192k]

       --trcdelay=TRCDELAY
              Seconds to delay before stopping packet trace [default: 2.0]

       --keeptraces
              Do not remove any trace files [default: remove trace files if no errors]

       --rmtraces
              Remove trace files [default: remove trace files if no errors]

       -i INTERFACE, --interface=INTERFACE
              Device interface [default: automatically selected]

   <b>File</b> <b>options:</b>
       --nfiles=NFILES
              Number of files to create [default: 2]

       --filesize=FILESIZE
              File size to use for test files [default: 64k]

       --rsize=RSIZE
              Read size to use when reading files [default: 4k]

       --wsize=WSIZE
              Write size to use when writing files [default: 4k]

       --iodelay=IODELAY
              Seconds to delay I/O operations [default: 0.1]

       --offset-delta=OFFSET_DELTA
              Read/Write offset delta [default: 4k]

   <b>Path</b> <b>options:</b>
       --sudo=SUDO
              Full path of binary for sudo [default: '<a href="file:///usr/lib/w3m/cgi-bin/w3mman2html.cgi?sudo">/usr/bin/sudo</a>']

       --kill=KILL
              Full path of binary for kill [default: '<a href="file:///usr/lib/w3m/cgi-bin/w3mman2html.cgi?kill">/usr/bin/kill</a>']

       --nfsstat=NFSSTAT
              Full path of binary for nfsstat [default: '/usr/sbin/nfsstat']

       --tcpdump=TCPDUMP
              Full path of binary for tcpdump [default: '/usr/sbin/tcpdump']

       --iptables=IPTABLES
              Full path of binary for iptables [default: '<a href="file:///usr/lib/w3m/cgi-bin/w3mman2html.cgi?iptables">/usr/sbin/iptables</a>']

       --messages=MESSAGES
              Full path of log messages file [default: '/var/log/messages']

       --trcevents=TRCEVENTS
              Full path of tracing events directory [default: '/sys/kernel/debug/tracing/events']

       --trcpipe=TRCPIPE
              Full path of trace pipe file [default: '/sys/kernel/debug/tracing/trace_pipe']

       --tmpdir=TMPDIR
              Temporary directory [default: '<a href="file:/tmp">/tmp</a>']

   <b>Debug</b> <b>options:</b>
       --nocleanup
              Do not cleanup created files

       --notimestamps
              Do not display timestamps in debug messages

       --bugmsgs=BUGMSGS
              File containing test messages to mark as bugs if they failed

       --nomount
              Do not mount server and run the tests on local disk space

       --basename=BASENAME
              Base name for all files and logs [default: automatically generated]

       --nfsdebug=NFSDEBUG
              Set NFS kernel debug flags and save log messages [default: '']

       --rpcdebug=RPCDEBUG
              Set RPC kernel debug flags and save log messages [default: '']

       --tracepoints=TRACEPOINTS
              List of trace points modules to enable [default: '']

       --nfsstats
              Get NFS stats [default: 'False']

       --pktdisp
              Display main packets related to the given test

       --nfserrors
              Fail every NFS error found in the packet trace

       --client-ipaddr=CLIENT_IPADDR
              IP address of localhost

   <b>Reporting</b> <b>options:</b>
       --xunit-report
              Generate xUnit compatible test report

       --xunit-report-file=XUNIT_REPORT_FILE
              Path to xout report file

   <b>Test</b> <b>options:</b>
       --runtest=RUNTEST
              Comma  separated list of tests to run, if list starts with a '^' then all tests are run except the
              ones listed [default: 'all']

       --num-xattrs=NUM_XATTRS
              Number of extended attributes to create for listxattr tests with many attributes [default: 20]

       --client=CLIENT
              Remote NFS client and options used for delegation tests. Clients are separated by a ','  and  each
              client  definition  is  a  list  of  arguments  separated by a ':' given in the following order if
              positional           arguments            is            used            (see            examples):
              clientname:server:export:nfsversion:port:proto:sec:mtpoint                               [default:
              'nfsversion=3:proto=tcp:port=2049']

       --client-nfsvers=CLIENT_NFSVERS
              Comma separated list of valid NFS versions to use in the --client option. An NFS version from this
              list, which is different than that given by --nfsversion, is selected and included in the --client
              option [default: 4.0,4.1]

</pre><h4><b>TESTS</b></h4><pre>
   <b>ngetxattr01</b>
       Verify getting extended attribute

   <b>ngetxattr02</b>
       Verify getting extended attribute fails when attribute does not exist

   <b>dgetxattr01</b>
       Verify getting extended attribute
       when delegation is granted on second client

   <b>dgetxattr02</b>
       Verify getting extended attribute fails when attribute does not exist
       when delegation is granted on second client

   <b>nsetxattr01</b>
       Verify setting extended attribute with SETXATTR4_EITHER when attribute does not exist

   <b>nsetxattr02</b>
       Verify setting extended attribute with SETXATTR4_CREATE when attribute does not exist

   <b>nsetxattr03</b>
       Verify setting extended attribute with SETXATTR4_REPLACE fails when attribute does not exist

   <b>nsetxattr04</b>
       Verify setting extended attribute with SETXATTR4_EITHER when attribute already exists

   <b>nsetxattr05</b>
       Verify setting extended attribute with SETXATTR4_CREATE fails when attribute already exists

   <b>nsetxattr06</b>
       Verify setting extended attribute with SETXATTR4_REPLACE when attribute already exists

   <b>dsetxattr01</b>
       Verify setting extended attribute with SETXATTR4_EITHER when attribute does not exist
       when delegation is granted on second client

   <b>dsetxattr02</b>
       Verify setting extended attribute with SETXATTR4_CREATE when attribute does not exist
       when delegation is granted on second client

   <b>dsetxattr03</b>
       Verify setting extended attribute with SETXATTR4_REPLACE fails when attribute does not exist
       when delegation is granted on second client

   <b>dsetxattr04</b>
       Verify setting extended attribute with SETXATTR4_EITHER when attribute already exists
       when delegation is granted on second client

   <b>dsetxattr05</b>
       Verify setting extended attribute with SETXATTR4_CREATE fails when attribute already exists
       when delegation is granted on second client

   <b>dsetxattr06</b>
       Verify setting extended attribute with SETXATTR4_REPLACE when attribute already exists
       when delegation is granted on second client

   <b>nremovexattr01</b>
       Verify removing extended attribute

   <b>nremovexattr02</b>
       Verify removing extended attribute fails when attribute does not exist

   <b>dremovexattr01</b>
       Verify removing extended attribute
       when delegation is granted on second client

   <b>dremovexattr02</b>
       Verify removing extended attribute fails when attribute does not exist
       when delegation is granted on second client

   <b>nlistxattr01</b>
       Verify listing extended attributes with no user namespace attributes

   <b>nlistxattr02</b>
       Verify listing extended attribute

   <b>nlistxattr03</b>
       Verify listing extended attribute (many attributes)

   <b>dlistxattr01</b>
       Verify listing extended attributes with no user namespace attributes
       when delegation is granted on second client

   <b>dlistxattr02</b>
       Verify listing extended attribute
       when delegation is granted on second client

   <b>dlistxattr03</b>
       Verify listing extended attribute (many attributes)
       when delegation is granted on second client

   <b>ncinfo01</b>
       Verify SETXATTR change info with SETXATTR4_EITHER when attribute does not exist

   <b>ncinfo02</b>
       Verify SETXATTR change info with SETXATTR4_EITHER when attribute already exists

   <b>ncinfo03</b>
       Verify SETXATTR change info with SETXATTR4_CREATE when attribute does not exist

   <b>ncinfo04</b>
       Verify SETXATTR change info with SETXATTR4_REPLACE when attribute already exists

   <b>mcinfo01</b>
       Verify SETXATTR change info with SETXATTR4_EITHER when attribute does not exist
       when file is modified on second client

   <b>mcinfo02</b>
       Verify SETXATTR change info with SETXATTR4_EITHER when attribute already exists
       when file is modified on second client

   <b>mcinfo03</b>
       Verify SETXATTR change info with SETXATTR4_CREATE when attribute does not exist
       when file is modified on second client

   <b>mcinfo04</b>
       Verify SETXATTR change info with SETXATTR4_REPLACE when attribute already exists
       when file is modified on second client

   <b>getxattr</b>
       Run all GETXATTR tests: ngetxattr01, ngetxattr02, dgetxattr01,
       dgetxattr02

   <b>ngetxattr</b>
       Run all GETXATTR tests when no open on second client: ngetxattr01,
       ngetxattr02

   <b>dgetxattr</b>
       Run all GETXATTR tests when delegation is granted on second client:
       dgetxattr01, dgetxattr02

   <b>setxattr</b>
       Run all SETXATTR tests: nsetxattr01, nsetxattr02, nsetxattr03,
       nsetxattr04, nsetxattr05, nsetxattr06, dsetxattr01, dsetxattr02,
       dsetxattr03, dsetxattr04, dsetxattr05, dsetxattr06

   <b>nsetxattr</b>
       Run all SETXATTR tests when no open on second client: nsetxattr01,
       nsetxattr02, nsetxattr03, nsetxattr04, nsetxattr05, nsetxattr06

   <b>dsetxattr</b>
       Run all SETXATTR tests when delegation is granted on second client:
       dsetxattr01, dsetxattr02, dsetxattr03, dsetxattr04, dsetxattr05,
       dsetxattr06

   <b>removexattr</b>
       Run all REMOVEXATTR tests: nremovexattr01, nremovexattr02,
       dremovexattr01, dremovexattr02

   <b>nremovexattr</b>
       Run all REMOVEXATTR tests when no open on second client: nremovexattr01,
       nremovexattr02

   <b>dremovexattr</b>
       Run all REMOVEXATTR tests when delegation is granted on second client:
       dremovexattr01, dremovexattr02

   <b>listxattr</b>
       Run all LISTXATTRS tests: nlistxattr01, nlistxattr02, nlistxattr03,
       dlistxattr01, dlistxattr02, dlistxattr03

   <b>nlistxattr</b>
       Run all LISTXATTRS tests when no open on second client: nlistxattr01,
       nlistxattr02, nlistxattr03

   <b>dlistxattr</b>
       Run all LISTXATTRS tests when delegation is granted on second client:
       dlistxattr01, dlistxattr02, dlistxattr03

   <b>cinfo</b>
       Run all CINFO tests: ncinfo01, ncinfo02, ncinfo03, ncinfo04, mcinfo01,
       mcinfo02, mcinfo03, mcinfo04

   <b>ncinfo</b>
       Run all CINFO tests when no open on second client: ncinfo01, ncinfo02,
       ncinfo03, ncinfo04

   <b>mcinfo</b>
       Run all CINFO tests when file is modified on second client: mcinfo01,
       mcinfo02, mcinfo03, mcinfo04

   <b>all</b>
       Run all tests: ngetxattr01, ngetxattr02, dgetxattr01, dgetxattr02,
       nsetxattr01, nsetxattr02, nsetxattr03, nsetxattr04, nsetxattr05,
       nsetxattr06, dsetxattr01, dsetxattr02, dsetxattr03, dsetxattr04,
       dsetxattr05, dsetxattr06, nremovexattr01, nremovexattr02,
       dremovexattr01, dremovexattr02, nlistxattr01, nlistxattr02,
       nlistxattr03, dlistxattr01, dlistxattr02, dlistxattr03, ncinfo01,
       ncinfo02, ncinfo03, ncinfo04, mcinfo01, mcinfo02, mcinfo03, mcinfo04

</pre><h4><b>EXAMPLES</b></h4><pre>
       The only required option is --server
       $ nfstest_xattr --server 192.168.0.11

</pre><h4><b>NOTES</b></h4><pre>
       The user id in the local host and the host specified by --client must have access to run commands as root
       using the 'sudo' command without the need for a password.

       The user id must be able to 'ssh' to remote host without the need for a password.

       Valid only for NFS version 4.2 and above.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man3/baseobj.3.html">baseobj</a>(3),</b>      <b><a href="../man3/formatstr.3.html">formatstr</a>(3),</b>      <b><a href="../man3/nfstest.test_util.3.html">nfstest.test_util</a>(3),</b>       <b><a href="../man1/nfstest_alloc.1.html">nfstest_alloc</a>(1),</b>       <b><a href="../man1/nfstest_cache.1.html">nfstest_cache</a>(1),</b>
       <b><a href="../man1/nfstest_delegation.1.html">nfstest_delegation</a>(1),</b>     <b><a href="../man1/nfstest_dio.1.html">nfstest_dio</a>(1),</b>    <b><a href="../man1/nfstest_fcmp.1.html">nfstest_fcmp</a>(1),</b>    <b><a href="../man1/nfstest_file.1.html">nfstest_file</a>(1),</b>    <b><a href="../man1/nfstest_interop.1.html">nfstest_interop</a>(1),</b>
       <b><a href="../man1/nfstest_io.1.html">nfstest_io</a>(1),</b>  <b><a href="../man1/nfstest_lock.1.html">nfstest_lock</a>(1),</b>  <b><a href="../man1/nfstest_pkt.1.html">nfstest_pkt</a>(1),</b>  <b><a href="../man1/nfstest_pnfs.1.html">nfstest_pnfs</a>(1),</b>  <b><a href="../man1/nfstest_posix.1.html">nfstest_posix</a>(1),</b>   <b><a href="../man1/nfstest_rdma.1.html">nfstest_rdma</a>(1),</b>
       <b><a href="../man1/nfstest_sparse.1.html">nfstest_sparse</a>(1),</b> <b><a href="../man1/nfstest_ssc.1.html">nfstest_ssc</a>(1),</b> <b><a href="../man1/nfstest_xid.1.html">nfstest_xid</a>(1),</b> <b><a href="../man3/packet.nfs.nfs4_const.3.html">packet.nfs.nfs4_const</a>(3)</b>

</pre><h4><b>BUGS</b></h4><pre>
       No known bugs.

</pre><h4><b>AUTHOR</b></h4><pre>
       Jorge Mora (<a href="mailto:mora@netapp.com">mora@netapp.com</a>)

NFStest 3.2                                       21 March 2023                                 <u><a href="../man1/NFSTEST_XATTR.1.html">NFSTEST_XATTR</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>