<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>virt-drivers - Detect bootloader, kernel and drivers inside guest</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/guestfs-tools">guestfs-tools_1.52.2-4ubuntu1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       virt-drivers - Detect bootloader, kernel and drivers inside guest

</pre><h4><b>SYNOPSIS</b></h4><pre>
        virt-drivers [--options] -d domname

        virt-drivers [--options] -a disk.img

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This tool can detect the bootloader, kernel and drivers inside some guests from only the disk image.  It
       can detect, for example, whether a disk image needs BIOS or UEFI to boot, and whether it supports virtio
       or requires slower emulated devices.

   <b>Notes</b>
       Normally you should distribute hypervisor metadata (eg. libvirt XML or OVF) alongside disk images to tell
       the hypervisor how to boot them.  This tool is used when this metadata has not been provided.  Work with
       the supplier of the disk image to get them to provide proper metadata.

</pre><h4><b>XML</b> <b>FORMAT</b></h4><pre>
       The output is an XML document.  At the top level it lists the operating systems found (the same as
       <b><a href="../man1/virt-inspector.1.html">virt-inspector</a></b>(1)):

        &lt;operatingsystems&gt;
          &lt;operatingsystem&gt;
            &lt;root&gt;/dev/sda2&lt;<a href="file:/root">/root</a>&gt;
            &lt;name&gt;linux&lt;/name&gt;
            &lt;arch&gt;x86_64&lt;/arch&gt;
            &lt;distro&gt;fedora&lt;/distro&gt;
            ...
          &lt;/operatingsystem&gt;
          &lt;operatingsystem&gt;
            &lt;root&gt;/dev/sdb1&lt;<a href="file:/root">/root</a>&gt;
            ...
          &lt;/operatingsystem&gt;
        &lt;/operatingsystems&gt;

   <b>&lt;firmware&gt;</b>
       The &lt;firmware&gt; element lists the firmware which is required to boot the guest.  For UEFI it will
       additionally show the EFI system partition ("ESP").  Guests may support multiple boot firmwares.  For
       example this guest is detected as using UEFI boot, and the UEFI ESP is the first partition of the first
       disk:

        &lt;operatingsystems&gt;
          &lt;firmware type='uefi'&gt;/dev/sda1&lt;/firmware&gt;
          &lt;operatingsystem&gt;
            ...

   <b>&lt;bootloader&gt;</b> <b>and</b> <b>&lt;kernel&gt;</b>
       The &lt;bootloader&gt; element shows the bootloader found in the Linux guest.  If known, this may contain
       information about what Linux kernels are provided.  For example:

        &lt;operatingsystems&gt;
          &lt;firmware type='bios'/&gt;
          &lt;operatingsystem&gt;
            &lt;root&gt;/dev/sda2&lt;<a href="file:/root">/root</a>&gt;
            &lt;name&gt;linux&lt;/name&gt;
            ...
            &lt;bootloader type='grub2' config='/boot/grub2/grub.cfg'&gt;
              &lt;kernel&gt;
                &lt;name&gt;kernel&lt;/name&gt;
                &lt;version&gt;6.1.0-0.rc6.46.fc38.x86_64&lt;/version&gt;
                &lt;vmlinuz&gt;/boot/vmlinuz-6.1.0-0.rc6.46.fc38.x86_64&lt;/vmlinuz&gt;
                &lt;modules&gt;
                  ...
                &lt;/modules&gt;
                &lt;supports_virtio_blk/&gt;
                &lt;supports_virtio_net/&gt;
                ...
              &lt;/kernel&gt;
            &lt;/bootloader&gt;

       Many more fields are usually available for Linux guests, including a complete list of kernel modules and
       information about support for virtio.  For a complete example see:
       https://github.com/libguestfs/guestfs-tools/tree/master/drivers

   <b>&lt;drivers&gt;</b>
       The &lt;drivers&gt; element lists information about drivers found in Windows guests:

        &lt;operatingsystems&gt;
          &lt;firmware type='bios'/&gt;
          &lt;operatingsystem&gt;
            &lt;root&gt;/dev/sda2&lt;<a href="file:/root">/root</a>&gt;
            &lt;name&gt;windows&lt;/name&gt;
            ...
            &lt;drivers&gt;
              &lt;driver&gt;
                &lt;name&gt;scsidev&lt;/name&gt;
                &lt;pci vendor='1077' device='1216' subsystem='8471101E'/&gt;
                &lt;pci vendor='1077' device='1216' subsystem='8493101E'/&gt;
              &lt;/driver&gt;
              ...
            &lt;/drivers&gt;

       The driver name (eg. "scsidev") corresponds to the Windows driver <u>.INF</u> file (eg. <u>scsidev.inf</u>).  The list
       of PCI, USB etc devices are the matching devices which would cause this driver to load at boot.

</pre><h4><b>OPTIONS</b></h4><pre>
       <b>--help</b>
           Display help.

       <b>-a</b> file
       <b>--add</b> file
           Add <u>file</u> which should be a disk image from a virtual machine.

           The  format  of  the disk image is auto-detected.  To override this and force a particular format use
           the <u>--format</u> option.

       <b>-a</b> URI
       <b>--add</b> URI
           Add a remote disk.  The URI format is compatible with guestfish.   See  "ADDING  REMOTE  STORAGE"  in
           <b><a href="../man1/guestfish.1.html">guestfish</a></b>(1).

       <b>--blocksize</b> <b>512</b>
       <b>--blocksize</b> <b>4096</b>
           This parameter sets the sector size of the disk image added with <u>-a</u> option and is ignored for libvirt
           guest added with <u>-d</u> option.  See also "guestfs_add_drive_opts" in <b><a href="../man3/guestfs.3.html">guestfs</a></b>(3).

       <b>--colors</b>
       <b>--colours</b>
           Use  ANSI  colour sequences to colourize messages.  This is the default when the output is a tty.  If
           the output of the program is redirected to a file, ANSI colour sequences are disabled unless you  use
           this option.

       <b>-c</b> URI
       <b>--connect</b> URI
           If  using  libvirt,  connect  to  the  given <u>URI</u>.  If omitted, then we connect to the default libvirt
           hypervisor.

           If you specify guest block devices directly (<u>-a</u>), then libvirt is not used at all.

       <b>-d</b> guest
       <b>--domain</b> guest
           Add all the disks from the named libvirt guest.  Domain UUIDs can be used instead of names.

       <b>--echo-keys</b>
           When prompting for keys and passphrases, virt-get-kernel normally turns echoing off so you cannot see
           what you are typing.  If you are not worried about Tempest attacks and there is no one  else  in  the
           room you can specify this flag to see what you are typing.

       <b>--format</b> raw|qcow2|..
       <b>--format</b> auto
           The  default for the <u>-a</u> option is to auto-detect the format of the disk image.  Using this forces the
           disk format for the <u>-a</u> option on the command line.

           If you have untrusted raw-format guest disk images, you should use this option to  specify  the  disk
           format.  This avoids a possible security problem with malicious guests (CVE-2010-3851).

       <b>--key</b> SELECTOR
           Specify a key for LUKS, to automatically open a LUKS device when using the inspection.

           <b>--key</b> NAME<b>:key:</b>KEY_STRING
           <b>--key</b> UUID<b>:key:</b>KEY_STRING
           <b>--key</b> <b>all:key:</b>KEY_STRING
               "NAME"  is the libguestfs device name (eg. "/dev/sda1").  "UUID" is the device UUID.  "all" means
               try the key against any encrypted device.

               Use the specified "KEY_STRING" as passphrase.

           <b>--key</b> NAME<b>:file:</b>FILENAME
           <b>--key</b> UUID<b>:file:</b>FILENAME
           <b>--key</b> <b>all:file:</b>FILENAME
               Read the passphrase from <u>FILENAME</u>.

           <b>--key</b> NAME<b>:clevis</b>
           <b>--key</b> UUID<b>:clevis</b>
           <b>--key</b> <b>all:clevis</b>
               Attempt passphrase-less unlocking for the device with Clevis, over the network.  Please refer  to
               "ENCRYPTED DISKS" in <b><a href="../man3/guestfs.3.html">guestfs</a></b>(3) for more information on network-bound disk encryption (NBDE).

               Note  that  if  any  such  option  is  present  on the command line, QEMU user networking will be
               automatically enabled for the libguestfs appliance.

       <b>--keys-from-stdin</b>
           Read key or passphrase parameters from stdin.  The default is to try to  read  passphrases  from  the
           user by opening <u>/dev/tty</u>.

           If  there  are multiple encrypted devices then you may need to supply multiple keys on stdin, one per
           line.

       <b>-q</b>
       <b>--quiet</b>
           Don’t print ordinary progress messages.

       <b>-v</b>
       <b>--verbose</b>
           Enable verbose messages for debugging.

       <b>-V</b>
       <b>--version</b>
           Display version number and exit.

       <b>--wrap</b>
           Wrap error, warning, and informative messages.  This is the default when the output is a tty.  If the
           output of the program is redirected to a file, wrapping is disabled unless you use this option.

       <b>-x</b>  Enable tracing of libguestfs API calls.

</pre><h4><b>ENVIRONMENT</b> <b>VARIABLES</b></h4><pre>
       For other environment variables which affect all libguestfs  programs,  see  "ENVIRONMENT  VARIABLES"  in
       <b><a href="../man3/guestfs.3.html">guestfs</a></b>(3).

</pre><h4><b>EXIT</b> <b>STATUS</b></h4><pre>
       This program returns 0 if successful, or non-zero if there was an error.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man3/guestfs.3.html">guestfs</a></b>(3),    <b><a href="../man1/guestfish.1.html">guestfish</a></b>(1),    <b><a href="../man1/guestmount.1.html">guestmount</a></b>(1),    <b><a href="../man1/virt-get-kernel.1.html">virt-get-kernel</a></b>(1),   <b><a href="../man1/virt-inspector.1.html">virt-inspector</a></b>(1),   <b><a href="../man1/virt-v2v.1.html">virt-v2v</a></b>(1),
       <a href="http://libguestfs.org/">http://libguestfs.org/</a>.

</pre><h4><b>AUTHOR</b></h4><pre>
       Richard W.M. Jones <a href="http://people.redhat.com/~rjones/">http://people.redhat.com/~rjones/</a>

</pre><h4><b>COPYRIGHT</b></h4><pre>
       Copyright (C) 2009-2023 Red Hat Inc.

</pre><h4><b>LICENSE</b></h4><pre>
       This program is free software; you can redistribute it and/or modify  it  under  the  terms  of  the  GNU
       General  Public License as published by the Free Software Foundation; either version 2 of the License, or
       (at your option) any later version.

       This program is distributed in the hope that it will be useful, but WITHOUT ANY  WARRANTY;  without  even
       the  implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public
       License for more details.

       You should have received a copy of the GNU General Public License along with this program; if not,  write
       to the Free Software Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA.

</pre><h4><b>BUGS</b></h4><pre>
       To      get      a      list      of      bugs      against      libguestfs,      use      this     link:
       https://bugzilla.redhat.com/buglist.cgi?component=libguestfs&amp;product=Virtualization+Tools

       To      report      a      new       bug       against       libguestfs,       use       this       link:
       https://bugzilla.redhat.com/enter_bug.cgi?component=libguestfs&amp;product=Virtualization+Tools

       When reporting a bug, please supply:

       •   The version of libguestfs.

       •   Where you got libguestfs (eg. which Linux distro, compiled from source, etc)

       •   Describe the bug accurately and give a way to reproduce it.

       •   Run <b><a href="../man1/libguestfs-test-tool.1.html">libguestfs-test-tool</a></b>(1) and paste the <b>complete,</b> <b>unedited</b> output into the bug report.

guestfs-tools-1.52.2                               2025-02-04                                    <u><a href="../man1/virt-drivers.1.html">virt-drivers</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>