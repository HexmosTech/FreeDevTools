<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>autopkgtest-build-qemu - Create autopkgtest virtual machine images for autopkgtest-virt-qemu</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/autopkgtest">autopkgtest_5.47_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       autopkgtest-build-qemu - Create autopkgtest virtual machine images for autopkgtest-virt-qemu

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>autopkgtest-build-qemu</b> [<u>OPTIONS</u>] <u>RELEASE</u> <u>IMAGE</u>

       Deprecated form:

       <b>autopkgtest-build-qemu</b> [<u>OPTIONS</u>] <u>RELEASE</u> <u>IMAGE</u> <u>MIRROR</u> [<u>ARCHITECTURE</u>] [<u>SCRIPT</u>] [<u>SIZE</u>]

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>autopkgtest-build-qemu</b>  creates  virtual  machine  images suitable for use with autopkgtest's QEMU runner
       <b><a href="../man1/autopkgtest-virt-qemu.1.html">autopkgtest-virt-qemu</a></b>(1).

       Under the hood, it uses <b><a href="../man1/vmdb2.1.html">vmdb2</a></b>(1) to create the images.

       Note that you need to call this as root, unless <b><a href="../man1/fakemachine.1.html">fakemachine</a></b>(1) is  available.  fakemachine  is  currently
       only available on x86_64.

</pre><h4><b>POSITIONAL</b> <b>PARAMETERS</b></h4><pre>
       <u>RELEASE</u>

              The release to download from the <u>MIRROR</u>.  This parameter is required.

       <u>IMAGE</u>

              The file to write, in qcow2 format. This parameter is required.

</pre><h4><b>OPTIONS</b></h4><pre>
       <b>--mirror=</b><u>MIRROR</u>

              Specify  which  distribution  to  install.   It  defaults  to   <u><a href="http://deb.debian.org/debian">http://deb.debian.org/debian</a></u> (i.e.
              Debian), but you can pass a mirror of any Debian derivative.

              The third positional parameter is a deprecated way to specify this.

       <b>--keyring=</b><u>KEYRING</u>

              Specify the path to a keyring used to verify the  apt  repository.   By  default,  the  choice  of
              keyring  will  be  left  to  debootstrap.   This  option  is  mainly  useful for use with a Debian
              derivative in conjunction with the --mirror option.

       <b>--architecture=</b><u>ARCHITECTURE</u>

              Set the architecture for the virtual machine  image,  specified  as  a  <b><a href="../man1/dpkg.1.html">dpkg</a></b>(1)  architecture.  If
              omitted, the host architecture is assumed.

              <b>--arch=</b><u>ARCH</u> is an alias for this option.

              The fourth positional parameter is a deprecated way to specify this.

       <b>--script=</b><u>SCRIPT</u>

              Specifies  a  user  script  that will be called with the root filesystem of the image as its first
              parameter. This script can them make any necessary modifications to the root filesystem.

              The script must be a POSIX shell script, and should not depend  on  bash-specific  features.  This
              script will be executed inside a <b><a href="../man1/chroot.1.html">chroot</a></b>(1) call in the virtual machine root filesystem.

              The fifth positional parameter is a deprecated way to specify this.

       <b>--size=</b><u>SIZE</u>

              Specifies the image size for the virtual machine, defaulting to 25G.

              The sixth positional parameter is a deprecated way to specify this.

       <b>--apt-proxy=</b><u>PROXY</u>

              Specify  an  apt  proxy  to  use  in  the  virtual  machine.  By default, if you have an apt proxy
              configured on the host, the virtual machine will automatically use this,  otherwise  there  is  no
              default.

              <b>--apt-proxy=DIRECT</b> can be used to force an apt proxy on the host to be ignored.

       <b>--boot=auto</b>|<b>bios</b>|<b>efi</b>|<b>ieee1275</b>|<b>none</b>

              Select the way the generated image will expect to be booted.

              <b>auto</b> chooses a suitable boot mode for the architecture, and is the default.

              <b>bios</b> installs an x86 BIOS bootloader on i386 or amd64.  <b>auto</b> selects this mode on i386 or amd64.

              <b>efi</b> installs an EFI bootloader on any architecture for which <b><a href="../man1/vmdb2.1.html">vmdb2</a>(1)</b> supports it, which currently
              means  amd64, arm64, armhf or i386. The <b>--efi</b> option is an alias for this mode.  <b>auto</b> selects this
              mode on arm64 or armhf.

              <b>ieee1275</b> installs an IEEE 1275 (OpenFirmware) bootloader on ppc64el.  <b>auto</b> selects  this  mode  on
              ppc64el.

              <b>none</b>  does  not  do anything special. The image will not be bootable unless the specified <b>--script</b>
              arranges for a suitable bootloader to be installed, or the <b><a href="../man1/autopkgtest-virt-qemu.1.html">autopkgtest-virt-qemu</a></b>(1) <b>--qemu-options</b>
              boot the image specially (for example by specifying a kernel directly).

</pre><h4><b>ENVIRONMENT</b></h4><pre>
       If  the   <b>$AUTOPKGTEST_KEEP_APT_SOURCES</b>   environment   variable   is   set   to   a   non-empty   value,
       <b>autopkgtest-build-qemu</b> will keep whatever <b><a href="file:/etc/apt/sources.list">/etc/apt/sources.list</a></b> was created by <b>debootstrap</b>.

       Otherwise,  if  the  <b>$AUTOPKGTEST_APT_SOURCES_FILE</b>  environment variable is set to a non-empty value, for
       example  <b>AUTOPKGTEST_APT_SOURCES_FILE=/home/me/mydistro/sources.list</b>,  then  <b>autopkgtest-build-qemu</b>  will
       read  that file (on the host system) and use it to populate <b><a href="file:/etc/apt/sources.list">/etc/apt/sources.list</a></b> in the virtual machine;
       or if the <b>$AUTOPKGTEST_APT_SOURCES</b> environment  variable  is  set  to  a  non-empty  value,  for  example
       <b>AUTOPKGTEST_APT_SOURCES=$(cat</b>   <b>/home/me/mydistro/sources.list)</b>,  <b>autopkgtest-build-qemu</b>  will  write  it
       directly into <b><a href="file:/etc/apt/sources.list">/etc/apt/sources.list</a></b> in the virtual machine.

       When <b>$AUTOPKGTEST_APT_SOURCES_FILE</b> or <b>$AUTOPKGTEST_APT_SOURCES</b> contain sources in the deb822 format, then
       sources are written to <b><a href="file:/etc/apt/sources.list.d/">/etc/apt/sources.list.d/</a>&lt;distro&gt;.sources</b>  in  the  virtual  machine,  rather  than
       <b>/etc/apt/sources.list.</b>

       You  can  specify  an  apt  proxy to use in the virtual machine in the <b>$AUTOPKGTEST_APT_PROXY</b> environment
       variable. If you have an apt proxy configured on the host, the virtual  machine  will  automatically  use
       this, otherwise there is no default.

</pre><h4><b>EXAMPLES</b></h4><pre>
       # autopkgtest-build-qemu unstable /path/to/debian-unstable.img

       $ sudo autopkgtest-build-qemu stable /path/to/debian-stable-i386.img i386

       $ sudo autopkgtest-build-qemu bionic /path/to/ubuntu-bionic.img <a href="http://archive.ubuntu.com/ubuntu">http://archive.ubuntu.com/ubuntu</a>

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man1/autopkgtest-virt-qemu.1.html">autopkgtest-virt-qemu</a></b>(1), <b><a href="../man1/vmdb2.1.html">vmdb2</a></b>(1), <b><a href="../man1/autopkgtest.1.html">autopkgtest</a></b>(1), <b>/usr/share/doc/autopkgtest/</b>.

</pre><h4><b>AUTHORS</b> <b>AND</b> <b>COPYRIGHT</b></h4><pre>
       <b>autopkgtest-build-qemu</b> was written by Antonio Terceiro &lt;<a href="mailto:terceirio@debian.org">terceirio@debian.org</a>&gt;

       This manpage is part of autopkgtest, a tool for testing Debian binary packages.  autopkgtest is Copyright
       (C) 2006-2018 Canonical Ltd and others.

       See <b>/usr/share/doc/autopkgtest/CREDITS</b> for the list of contributors and full copying conditions.

Linux Programmer's Manual                             2014                             <u><a href="../man1/autopkgtest-build-qemu.1.html">autopkgtest-build-qemu</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>