<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>0store-secure-add — add an implementation to the system cache</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/0install-core">0install-core_2.18-2.1build2_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       0store-secure-add — add an implementation to the system cache

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>0store-secure-add</b> <b>DIGEST</b>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This  command  imports  the  current  directory  into  the  system-wide  shared  Zero  Install  cache, as
       /var/cache/0install.net/implementations/DIGEST.  This allows a program  downloaded  by  one  user  to  be
       shared with other users.

       The  current  directory  must contain a file called '.manifest' listing all the files to be added (in the
       format required by DIGEST), and this file must have the given digest. If  not,  the  import  is  refused.
       Therefore, it is only possible to add a directory to the cache if its name matches its contents.

       It  is  intended  that  it be safe to grant untrusted users permission to call this command with elevated
       privileges. To set this up, see below.

</pre><h4><b>SETTING</b> <b>UP</b> <b>SHARING</b></h4><pre>
       To enable sharing, the system administrator should follow these steps:

       Create a new system user to own the cache:

       <b>adduser</b> <b>--system</b> <b>zeroinst</b>

       Create the shared directory, owned by this new user:

       <b>mkdir</b> <b>/var/cache/0install.net</b>

       <b>chown</b> <b>zeroinst</b> <b>/var/cache/0install.net</b>

       Use <a href="../man8/visudo.8.html">visudo</a>(8) to add these lines to <a href="file:/etc/sudoers">/etc/sudoers</a>:

       <b>Defaults&gt;zeroinst</b> <b>env_reset,always_set_home</b>

       <b>ALL</b> <b>ALL=(zeroinst)</b> <b>NOPASSWD:</b> <b>/usr/bin/0store-secure-add</b>

       Create a script called <b>0store-secure-add-helper</b> in PATH to call it. This script must  be  executable  and
       contain these two lines:

       <b>#!<a href="file:/bin/sh">/bin/sh</a></b>

       <b>exec</b> <b>sudo</b> <b>-S</b> <b>-u</b> <b>zeroinst</b> <b>/usr/bin/0store-secure-add</b> <b>"$@"</b> <b>&lt;</b> <b>/dev/null</b>

       The other Zero Install programs will call this helper script automatically.

</pre><h4><b>FILES</b></h4><pre>
       /var/cache/0install.net/implementations
              System-wide Zero Install cache.

</pre><h4><b>LICENSE</b></h4><pre>
       Copyright (C) 2009 Thomas Leonard.

       You may redistribute copies of this program under the terms of the GNU Lesser General Public License.

</pre><h4><b>BUGS</b></h4><pre>
       This  program  is  EXPERIMENTAL.  It  has  not  been  audited.  Do  not  use  it  yet in security-critial
       environments.

       The env_reset line in sudoers may not be required. <a href="../man1/sudo.1.html">sudo</a>(1) seems to do it automatically.

       If sudo let us check whether we could call a command then we could  switch  to  using  it  automatically,
       instead of needing to add the helper script. Currently, sudo delays for one second and writes to auth.log
       if we try to use this system when it hasn't been set up.

       Please report bugs to the developer mailing list:

       <a href="http://0install.net/support.html">http://0install.net/support.html</a>

</pre><h4><b>AUTHOR</b></h4><pre>
       Zero Install was created by Thomas Leonard.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <a href="../man1/0store.1.html">0store</a>(1)

       The Zero Install web-site:

       <b><a href="http://0install.net">http://0install.net</a></b>

Thomas Leonard                                        2010                                  <u><a href="../man1/0STORE-SECURE-ADD.1.html">0STORE-SECURE-ADD</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>