<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>git-commit-graph - Write and verify Git commit-graph files</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/git-man">git-man_2.48.1-0ubuntu1.1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       git-commit-graph - Write and verify Git commit-graph files

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <u>git</u> <u>commit-graph</u> <u>verify</u> [--object-dir &lt;dir&gt;] [--shallow] [--[no-]progress]
       <u>git</u> <u>commit-graph</u> <u>write</u> [--object-dir &lt;dir&gt;] [--append]
                               [--split[=&lt;strategy&gt;]] [--reachable | --stdin-packs | --stdin-commits]
                               [--changed-paths] [--[no-]max-new-filters &lt;n&gt;] [--[no-]progress]
                               &lt;split-options&gt;

</pre><h4><b>DESCRIPTION</b></h4><pre>
       Manage the serialized commit-graph file.

</pre><h4><b>OPTIONS</b></h4><pre>
       --object-dir
           Use given directory for the location of packfiles and commit-graph file. This parameter exists to
           specify the location of an alternate that only has the objects directory, not a full <b>.git</b> directory.
           The commit-graph file is expected to be in the <u>&lt;dir&gt;</u><b>/info</b> directory and the packfiles are expected to
           be in <u>&lt;dir&gt;</u><b>/pack</b>. If the directory could not be made into an absolute path, or does not match any
           known object directory, <b>git</b> <b>commit-graph</b> ... will exit with non-zero status.

       --[no-]progress
           Turn progress on/off explicitly. If neither is specified, progress is shown if standard error is
           connected to a terminal.

</pre><h4><b>COMMANDS</b></h4><pre>
       <u>write</u>
           Write a commit-graph file based on the commits found in packfiles. If the config option
           <b>core.commitGraph</b> is disabled, then this command will output a warning, then return success without
           writing a commit-graph file.

           With the <b>--stdin-packs</b> option, generate the new commit graph by walking objects only in the specified
           pack-indexes. (Cannot be combined with <b>--stdin-commits</b> or <b>--reachable</b>.)

           With the <b>--stdin-commits</b> option, generate the new commit graph by walking commits starting at the
           commits specified in stdin as a list of OIDs in hex, one OID per line. OIDs that resolve to
           non-commits (either directly, or by peeling tags) are silently ignored. OIDs that are malformed, or
           do not exist generate an error. (Cannot be combined with <b>--stdin-packs</b> or <b>--reachable</b>.)

           With the <b>--reachable</b> option, generate the new commit graph by walking commits starting at all refs.
           (Cannot be combined with <b>--stdin-commits</b> or <b>--stdin-packs</b>.)

           With the <b>--append</b> option, include all commits that are present in the existing commit-graph file.

           With the <b>--changed-paths</b> option, compute and write information about the paths changed between a
           commit and its first parent. This operation can take a while on large repositories. It provides
           significant performance gains for getting history of a directory or a file with <b>git</b> <b>log</b> <b>--</b> <u>&lt;path&gt;</u>. If
           this option is given, future commit-graph writes will automatically assume that this option was
           intended. Use <b>--no-changed-paths</b> to stop storing this data.

           With the <b>--max-new-filters=</b><u>&lt;n&gt;</u> option, generate at most <b>n</b> new Bloom filters (if <b>--changed-paths</b> is
           specified). If <b>n</b> is <b>-1</b>, no limit is enforced. Only commits present in the new layer count against
           this limit. To retroactively compute Bloom filters over earlier layers, it is advised to use
           <b>--split=replace</b>. Overrides the <b>commitGraph.maxNewFilters</b> configuration.

           With the <b>--split</b>[<b>=</b><u>&lt;strategy&gt;</u>] option, write the commit-graph as a chain of multiple commit-graph
           files stored in <u>&lt;dir&gt;</u><b>/info/commit-graphs</b>. Commit-graph layers are merged based on the strategy and
           other splitting options. The new commits not already in the commit-graph are added in a new "tip"
           file. This file is merged with the existing file if the following merge conditions are met:

           •   If <b>--split=no-merge</b> is specified, a merge is never performed, and the remaining options are
               ignored.  <b>--split=replace</b> overwrites the existing chain with a new one. A bare <b>--split</b> defers to
               the remaining options. (Note that merging a chain of commit graphs replaces the existing chain
               with a length-1 chain where the first and only incremental holds the entire graph).

           •   If <b>--size-multiple=</b><u>&lt;X&gt;</u> is not specified, let <b>X</b> equal 2. If the new tip file would have <b>N</b> commits
               and the previous tip has <b>M</b> commits and <b>X</b> times <b>N</b> is greater than <b>M</b>, instead merge the two files
               into a single file.

           •   If <b>--max-commits=</b><u>&lt;M&gt;</u> is specified with <b>M</b> a positive integer, and the new tip file would have more
               than <b>M</b> commits, then instead merge the new tip with the previous tip.

               Finally, if <b>--expire-time=</b><u>&lt;datetime&gt;</u> is not specified, let <b>datetime</b> be the current time. After
               writing the split commit-graph, delete all unused commit-graph whose modified times are older
               than <b>datetime</b>.

       <u>verify</u>
           Read the commit-graph file and verify its contents against the object database. Used to check for
           corrupted data.

           With the <b>--shallow</b> option, only check the tip commit-graph file in a chain of split commit-graphs.

</pre><h4><b>EXAMPLES</b></h4><pre>
       •   Write a commit-graph file for the packed commits in your local <b>.git</b> directory.

               $ git commit-graph write

       •   Write a commit-graph file, extending the current commit-graph file using commits in <u>&lt;pack-index&gt;</u>.

               $ echo &lt;pack-index&gt; | git commit-graph write --stdin-packs

       •   Write a commit-graph file containing all reachable commits.

               $ git show-ref -s | git commit-graph write --stdin-commits

       •   Write a commit-graph file containing all commits in the current commit-graph file along with those
           reachable from <b>HEAD</b>.

               $ git rev-parse HEAD | git commit-graph write --stdin-commits --append

</pre><h4><b>CONFIGURATION</b></h4><pre>
       Everything below this line in this section is selectively included from the <b><a href="../man1/git-config.1.html">git-config</a></b>(1) documentation.
       The content is the same as what’s found there:

       commitGraph.generationVersion
           Specifies the type of generation number version to use when writing or reading the commit-graph file.
           If version 1 is specified, then the corrected commit dates will not be written or read. Defaults to
           2.

       commitGraph.maxNewFilters
           Specifies the default value for the <b>--max-new-filters</b> option of <b>git</b> <b>commit-graph</b> <b>write</b> (c.f., <b><a href="../man1/gitcommit-graph.1.html">git-</a></b>
           <b><a href="../man1/gitcommit-graph.1.html">commit-graph</a></b>(1)).

       commitGraph.readChangedPaths
           Deprecated. Equivalent to commitGraph.changedPathsVersion=-1 if true, and
           commitGraph.changedPathsVersion=0 if false. (If commitGraph.changedPathVersion is also set,
           commitGraph.changedPathsVersion takes precedence.)

       commitGraph.changedPathsVersion
           Specifies the version of the changed-path Bloom filters that Git will read and write. May be -1, 0,
           1, or 2. Note that values greater than 1 may be incompatible with older versions of Git which do not
           yet understand those versions. Use caution when operating in a mixed-version environment.

           Defaults to -1.

           If -1, Git will use the version of the changed-path Bloom filters in the repository, defaulting to 1
           if there are none.

           If 0, Git will not read any Bloom filters, and will write version 1 Bloom filters when instructed to
           write.

           If 1, Git will only read version 1 Bloom filters, and will write version 1 Bloom filters.

           If 2, Git will only read version 2 Bloom filters, and will write version 2 Bloom filters.

           See <b><a href="../man1/git-commit-graph.1.html">git-commit-graph</a></b>(1) for more information.

</pre><h4><b>FILE</b> <b>FORMAT</b></h4><pre>
       see <b><a href="../man5/gitformat-commit-graph.5.html">gitformat-commit-graph</a></b>(5).

</pre><h4><b>GIT</b></h4><pre>
       Part of the <b><a href="../man1/git.1.html">git</a></b>(1) suite

Git 2.48.1                                         07/02/2025                                <u><a href="../man1/GIT-COMMIT-GRAPH.1.html">GIT-COMMIT-GRAPH</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>