<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>r.sunmask  - Calculates cast shadow areas from sun position and elevation raster map.</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/grass-doc">grass-doc_8.4.1-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       <b>r.sunmask</b>  - Calculates cast shadow areas from sun position and elevation raster map.
       Either  exact  sun position (A) is specified, or date/time to calculate the sun position (B) by r.sunmask
       itself.

</pre><h4><b>KEYWORDS</b></h4><pre>
       raster, solar, sun position, shadow

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>r.sunmask</b>
       <b>r.sunmask</b> <b>--help</b>
       <b>r.sunmask</b> [-<b>zsg</b>]  <b>elevation</b>=<u>name</u>   [<b>output</b>=<u>name</u>]    [<b>altitude</b>=<u>float</u>]    [<b>azimuth</b>=<u>float</u>]    [<b>year</b>=<u>integer</u>]
       [<b>month</b>=<u>integer</u>]        [<b>day</b>=<u>integer</u>]        [<b>hour</b>=<u>integer</u>]        [<b>minute</b>=<u>integer</u>]       [<b>second</b>=<u>integer</u>]
       [<b>timezone</b>=<u>integer</u>]    [<b>east</b>=<u>value</u>]    [<b>north</b>=<u>value</u>]    [--<b>overwrite</b>]   [--<b>help</b>]   [--<b>verbose</b>]   [--<b>quiet</b>]
       [--<b>ui</b>]

   <b>Flags:</b>
       <b>-z</b>
           Do not ignore zero elevation

       <b>-s</b>
           Calculate sun position only and exit

       <b>-g</b>
           Print the sun position output in shell script style

       <b>--overwrite</b>
           Allow output files to overwrite existing files

       <b>--help</b>
           Print usage summary

       <b>--verbose</b>
           Verbose module output

       <b>--quiet</b>
           Quiet module output

       <b>--ui</b>
           Force launching GUI dialog

   <b>Parameters:</b>
       <b>elevation</b>=<u>name</u> <b>[required]</b>
           Name of input elevation raster map

       <b>output</b>=<u>name</u>
           Name for output raster map

       <b>altitude</b>=<u>float</u>
           Altitude of the sun in degrees above the horizon (A)
           Options: <u>0-89.999</u>

       <b>azimuth</b>=<u>float</u>
           Azimuth of the sun in degrees from north (A)
           Options: <u>0-360</u>

       <b>year</b>=<u>integer</u>
           Year (B)
           Options: <u>1950-2050</u>

       <b>month</b>=<u>integer</u>
           Month (B)
           Options: <u>0-12</u>

       <b>day</b>=<u>integer</u>
           Day (B)
           Options: <u>0-31</u>

       <b>hour</b>=<u>integer</u>
           Hour (B)
           Options: <u>0-24</u>

       <b>minute</b>=<u>integer</u>
           Minutes (B)
           Options: <u>0-60</u>

       <b>second</b>=<u>integer</u>
           Seconds (B)
           Options: <u>0-60</u>
           Default: <u>0</u>

       <b>timezone</b>=<u>integer</u>
           Timezone
           East positive, offset from GMT, also use to adjust daylight savings

       <b>east</b>=<u>value</u>
           Easting coordinate (point of interest)
           Default: map center

       <b>north</b>=<u>value</u>
           Northing coordinate (point of interest)
           Default: map center

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <u>r.sunmask</u>  creates  an  output map layer based on an input elevation raster map layer and the position of
       the sun. The output map layer contains the cast shadow areas resulting from sunlight and  elevation.  The
       user  can  either  specify  the sun position directly or the module calculates it from given location and
       date/time parameters using the SOLPOS (Solar and Moon  Position  Algorithm)  developed  by  the  National
       Renewable Energy Laboratory (NREL). SOLPOS operates in two modes, either

           •   (A) parameters to specify the exact known position of the sun, or

           •   (B) parameters to specify the date/time for the sun position calculation by <u>r.sunmask</u> itself
       must be used.

       The  module  performs sunset/sunrise checks and refraction correction for sun position calculation. Local
       coordinate systems are internally transformed to latitude/longitude for the SOLPOS  algorithm.  Elevation
       is not taken into account for sunset/sunrise calculations.

       The  solar  zenith  angle ("sun angle above horizon") is defined as the angle between the horizon and the
       vertical (directly overhead or zenith). Its values can range from 90°, when the sun is directly overhead,
       to 0°, when the sun is on the horizon. Values lower than 0° indicate that the sun is below the horizon.

       The solar azimuth angle ("sun azimuth") defines the direction of the sun.  It is the angle between  north
       and  the  projection  of  the sun’s rays onto the horizontal plane. This angle is measured in a clockwise
       direction and can vary between 0° and 360°. Specifically, an azimuth of 0° means the sun is in the north,
       90° in the east, 180° in the south and 270° in the west.

</pre><h4><b>NOTES</b></h4><pre>
       <u>r.sunmask</u> and daylight saving time: Instead of converting the local time to  GMT,  the  SOLPOS  algorithm
       uses  what is known as Local Standard Time, which is generally defined as an offset from GMT.  So the key
       is the offset from GMT, which is the solpos Time  Zone  parameter.  If  the  user  specifies  clock  time
       (different  for  winter  and  summer),  s/he  would  have  to change the Time Zone parameter in <u>r.sunmask</u>
       (<b>timezone</b> parameter) seasonally. See also Daylight saving time by region and country.

       Note: In latitude/longitude projects the position coordinates pair (east/west) has  to  be  specified  in
       decimal  degree  (not  DD:MM:SS).  If  not  specified,  the  map center’s coordinates will be used.  Also
       <u>g.region</u> <u>-l</u> displays the map center’s coordinates in latitude/longitude (or <u>g.region</u>  <u>-c</u>  in  the  actual
       coordinate system).

       Note for module usage with the <u>-g</u> flag, when performing calculations close to sunset/sunrise:
        [...]
        sunangleabovehorizont=0.434240
        sunrise=07:59:19
        sunset=16:25:17
        Time (07:59:02) is before sunrise (07:59:19)!
        WARNING: Nothing to calculate. Please verify settings.
        No map calculation requested. Finished.
       In above calculation it appears to be a mistake as the program indicates that we are before sunrise while
       the  <u>sun</u>  <u>angle</u>  <u>above</u>  <u>horizon</u>  is  already  positive.   The  reason  is that <u>sun</u> <u>angle</u> <u>above</u> <u>horizon</u> is
       calculated with correction for atmosphere refraction while <u>sunrise</u>  and  <u>sunset</u>  are  calculated  <b>without</b>
       correction for atmosphere refraction. The output without <u>-g</u> flag contains related indications.

</pre><h4><b>EXAMPLE</b></h4><pre>
       Example for North Carolina sample data set for the calculation of sun position angles and more:
       # set the region to a place near Raleigh (NC)
       g.region raster=elev_lid792_1m -p
       # compute only sun position and no output map
       r.sunmask -s elev_lid792_1m year=2012 month=2 \
                 day=22 hour=10 minute=30 timezone=-5
       Using map center coordinates: 638650.000000 220375.000000
       Calculating sun position... (using solpos (V. 11 April 2001) from NREL)
       2012/02/22, daynum: 53, time: 10:30:00 (decimal time: 10.500000)
       long: -78.678856, lat: 35.736160, timezone: -5.000000
       Solar position: sun azimuth: 143.006409, sun angle above horz. (refraction corrected): 36.233879
       Sunrise time (without refraction): 06:58:11
       Sunset time  (without refraction): 17:58:47
       # with -g flag, useful for eval() shell function
       r.sunmask -s -g elev_lid792_1m  year=2012 month=2 \
                 day=22 hour=10 minute=30 timezone=-5
       Using map center coordinates: 638650.000000 220375.000000
       Calculating sun position... (using solpos (V. 11 April 2001) from NREL)
       date=2012/02/22
       daynum=53
       time=10:30:00
       decimaltime=10.500000
       longitudine=-78.678856
       latitude=35.736160
       timezone=-5.000000
       sunazimuth=143.006409
       sunangleabovehorizon=36.233879
       sunrise=06:58:11
       sunset=17:58:47

</pre><h4><b>Acknowledgements</b></h4><pre>
       Acknowledgements: National Renewable Energy Laboratory for their SOLPOS 2.0 sun position algorithm.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
        <u>g.region,</u> <u>r.sun,</u> <u>r.sunhours,</u> <u>r.slope.aspect</u>

</pre><h4><b>AUTHORS</b></h4><pre>
       Janne Soimasuo, Finland, 1994
       update to FP by Huidae Cho, 2001
       SOLPOS algorithm feature added by Markus Neteler, 2001

</pre><h4><b>SOURCE</b> <b>CODE</b></h4><pre>
       Available at: r.sunmask source code (history)

       Accessed: Friday Apr 04 01:19:37 2025

       Main index | Raster index | Topics index | Keywords index | Graphical index | Full index

       © 2003-2025 GRASS Development Team, GRASS GIS 8.4.1 Reference Manual

GRASS 8.4.1                                                                                    <u><a href="../man1grass/r.sunmask.1grass.html">r.sunmask</a></u>(1grass)
</pre>
 </div>
</div></section>
</div>
</body>
</html>