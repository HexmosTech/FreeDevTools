<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>lemonldap-ng-sessions - Scripting CLI for LemonLDAP::NG sessions</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/liblemonldap-ng-common-perl">liblemonldap-ng-common-perl_2.20.2+ds-1build1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       lemonldap-ng-sessions - Scripting CLI for LemonLDAP::NG sessions

</pre><h4><b>SYNOPSIS</b></h4><pre>
         lemonldap-ng-sessions [&lt;options&gt;] &lt;command&gt; [&lt;arguments&gt; ...]

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>Commands</b>:

       <b>"get"</b>: get one or several session from known IDs
       <b>"search"</b>: search for sessions
       <b>count</b>: alias for <b>search</b> <b>--count</b>
       <b>"delete"</b>: delete existing sessions
       <b>"setKey"</b>: add/change key in existing session
       <b>"delKey"</b>: delete key from existing session
       <b>"secondfactors"</b>: manage second factors
       <b>"consents"</b>: manage OIDC user consents
       <b>"backup"</b>: dump all sessions
       <b>"restore"</b>: restore sessions from a dump file

       <b>Options</b>:

       <b>--help</b>: Show full help
       <b>--select</b>: Select which fields to print
       <b>--backend</b>: Specify session backend
       <b>--persistent</b>: Search in persistent sessions
       <b>--refresh-tokens</b>: Search into refresh_tokens only
       <b>--where</b>: Set search filter (search/delete only)
       <b>--id-only</b>: Only return IDs (search only)
       <b>--user</b>: Change user running the script
       <b>--group</b>: Change group running the script
       <b>--hash</b>: When "hashed session storage" is in use, indicates that the given session ID is the original
       value (cookie value)
       <b>--count</b> <u>(only</u> <u>with</u> <u><b>"search"</b>)</u>: display the number of matching sessions instead of their content
       <b>--out</b>: write result into given file

   <b>COMMANDS</b>
       <u>get</u>

           lemonldap-ng-sessions get &lt;id&gt; [&lt;id&gt; ...]

       This command lets you read the content of a session.

       You must pass one or several session IDs as parameters.

       Examples

               lemonldap-ng-sessions get 9684dd2a6489bf2be2fbdd799a8028e3

               lemonldap-ng-sessions get --persistent dwho

       <u>search</u>

           lemonldap-ng-sessions search [&lt;options&gt;]

       This command lets you search for sessions.

       It can be used to find the session IDs that other commands need.

       You can restrict the search with options. See "OPTIONS"

       Examples

               lemonldap-ng-sessions search

               lemonldap-ng-sessions search --backend persistent

               lemonldap-ng-sessions search --where uid=dwho

               lemonldap-ng-sessions search --where uid=dwho \
                       --id-only

               lemonldap-ng-sessions search --backend persistent \
                       --where _session_uid=dwho

               lemonldap-ng-sessions search --where uid=dwho \
                       --select authenticationLevel

           lemonldap-ng-sessions search --where '_startTime&gt;20240410063538'
           lemonldap-ng-sessions search --where '_startTime&lt;20240410063538'

       And you can just display the number of result using <b>lemonldap-ng-sessions</b> <b>search</b> <b>--count</b>

       <u>delete</u>

           lemonldap-ng-sessions delete &lt;id&gt; [&lt;id&gt; ...]
           lemonldap-ng-sessions delete --where &lt;filter&gt;

       This command lets you delete sessions.

       You may give it one or several session IDs to remove.

       Examples:

               lemonldap-ng-sessions delete 9684dd2a6489bf2be2fbdd799a8028e3

               lemonldap-ng-sessions delete --persistent dwho

       Or you can give it a search expression.

       Examples:

               lemonldap-ng-sessions delete --where uid=dwho

               lemonldap-ng-sessions delete --persistent --where _session_uid=dwho

       <u>setKey</u>

           lemonldap-ng-sessions setKey &lt;id&gt; &lt;key&gt; &lt;value&gt; [&lt;key&gt; &lt;value&gt; ...]

       This command allows you to modify one or several keys from an existing session.

       Examples:

               lemonldap-ng-sessions setKey 9684dd2a6489bf2be2fbdd799a8028e3 \
                       authenticationLevel 1

       <u>delKey</u>

           lemonldap-ng-sessions delKey &lt;id&gt; &lt;key&gt; [&lt;key&gt; ...]

       This command lets you remove a key from an existing session.

       You must specify a session ID, and one of several session keys to remove.

       Examples:

               lemonldap-ng-sessions delKey --persistent dwho _oidcConsents

       <u>secondfactors</u>

           lemonldap-ng-sessions secondfactors &lt;command&gt; &lt;user&gt; [&lt;id&gt; ... ]

       <b>Commands</b>:

       <b>get</b> &lt;user&gt;
           show all second factors for a user

       <b>delete</b> &lt;user&gt; &lt;id&gt; [&lt;id&gt; ...]
           delete second factors for a user. The ID must match one of the IDs returned by the "show" command.

       <b>delType</b> [&lt;user&gt;|--all] &lt;type&gt; [&lt;type&gt; ...]
           delete all second factors of a given type for a user

       <b>migrateu2f</b> [&lt;user&gt;|--all]
           migrate U2F device registrations to WebAuthn device registrations

       <u>consents</u>

           lemonldap-ng-sessions consents &lt;command&gt; &lt;user&gt; [&lt;id&gt; ... ]

       Commands:

           get &lt;user&gt;
               show all OIDC consents for a user
           delete &lt;user&gt; &lt;id&gt; [&lt;id&gt; ...]
               delete OIDC consents for a user

       <u>backup</u>

           lemonldap-ng-sessions backup &gt; file
           # or
           lemonldap-ng-sessions backup --out file
           # or limited to persistent sessions
           lemonldap-ng-sessions backup --persistent --out file
           # or limited to OIDC refresh_tokens
           lemonldap-ng-sessions backup --refresh-tokens --out file

       Simple command to dump all sessions or only persistent or refresh_tokens.

       <u>restore</u>

           lemonldap-ng-sessions restore &lt; file
           # or
           lemonldap-ng-sessions restore file

       Command to restore sessions using a file generated by "backup" command

   <b>OPTIONS</b>
       <b>--select</b>,<b>-s</b>
           Lets you select which fields to output in the JSON result.

           This option can be set multiple times

       <b>--where</b>,<b>-w</b>
           This option lets you filter your session search according to a filter.

           For now, only one filter can be set.

           Examples:

                   --search uid=dwho
                   --search _sessionType=OIDC
                   --search '_startTime&gt;20240410063538'
                   --search '_startTime&lt;20240410063538'

       <b>--backend</b>,<b>-b</b>
           This option lets you specify which session backend to use.

           You  only  need  it  when you configured multiple session backends in your LemonLDAP::NG installation
           (for Persistent, SAML, CAS or OIDC sessions)

           Examples:

                   --backend persistent
                   --backend saml
                   --backend oidc
                   --backend cas

       <b>--persistent</b>,<b>-p</b>
           This option is a shortcut for specifying --backend persistent and using the UID hash as a session ID

           Example:

                   lemonldap-ng-sessions --backend persistent \
                           get 5efe8af397fc3577e05b483aca964f1b

           is the same as

                   lemonldap-ng-sessions get --persistent dwho

       <b>--id-only</b>,<b>-i</b>
           This option replaces the standard JSON output format with a simpler format  of  one  session  ID  per
           line.

           This  allows  some  interesting  combos  using xargs. For example, if you want to remove all sessions
           started by "dwho"

                   lemonldap-ng-sessions search --where uid=dwho --id-only | \
                           xargs lemonldap-ng-sessions delete

       <b>--user</b>,<b>-u</b>
           This option forces the system user that runs the script.

       <b>--group</b>,<b>-g</b>
           This option forces the system group that runs the script.

       <b>--hash</b>, <b>-c</b>
           When  the  session   storage   is   protected   by   hashed   session   storage   &lt;https://lemonldap-
           ng.org/documentation/latest/security.html#configure-security-settings&gt;,  this  option  indicates that
           the given session is the original value <u>(cookie</u> <u>value)</u>

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       &lt;<a href="http://lemonldap-ng.org/">http://lemonldap-ng.org/</a>&gt;

</pre><h4><b>AUTHORS</b></h4><pre>
       Maxime Besson, &lt;<a href="mailto:maxime.besson@worteks.com">maxime.besson@worteks.com</a>&gt;

</pre><h4><b>BUG</b> <b>REPORT</b></h4><pre>
       Use       OW2       system       to       report       bug       or       ask        for        features:
       &lt;https://gitlab.ow2.org/lemonldap-ng/lemonldap-ng/issues&gt;

</pre><h4><b>COPYRIGHT</b> <b>AND</b> <b>LICENSE</b></h4><pre>
       Copyright (C) 2016 by Xavier Guimard, &lt;<a href="mailto:x.guimard@free.fr">x.guimard@free.fr</a>&gt;
       Copyright (C) 2016 by Cl√©ment Oudot, &lt;<a href="mailto:clem.oudot@gmail.com">clem.oudot@gmail.com</a>&gt;

       This  library  is  free  software;  you  can  redistribute it and/or modify it under the terms of the GNU
       General Public License as published by the Free Software  Foundation;  either  version  2,  or  (at  your
       option) any later version.

       This  program  is  distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even
       the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General  Public
       License for more details.

       You  should  have received a copy of the GNU General Public License along with this program.  If not, see
       &lt;<a href="http://www.gnu.org/licenses/">http://www.gnu.org/licenses/</a>&gt;.

perl v5.40.0                                       2025-02-10                          <u><a href="../man1p/LEMONLDAP-NG-SESSIONS.1p.html">LEMONLDAP-NG-SESSIONS</a></u>(1p)
</pre>
 </div>
</div></section>
</div>
</body>
</html>