<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>pmempool-sync - Synchronize replicas or their parts within a pool set.</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/pmdk-tools">pmdk-tools_1.13.1-1.1ubuntu2_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       <b>pmempool-sync</b> - Synchronize replicas or their parts within a pool set.

</pre><h4><b>SYNOPSIS</b></h4><pre>
              pmempool sync [options] &lt;poolset_file&gt;

       NOTE: Only the pool set file used to create the pool should be used for syncing the pool.

</pre><h4><b>NOTE</b></h4><pre>
              NOTICE: The <b>libpmemblk</b> and <b>libpmemlog</b> libraries are deprecated since PMDK 1.13.0 release.

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The <b>pmempool</b> <b>sync</b> command synchronizes data between replicas within a pool set.  It checks if metadata of
       all  replicas  in  a  pool set are consistent, i.e. all parts are healthy, and if any of them is not, the
       corrupted or missing parts are recreated and filled with data from one of the healthy replicas.  Current‐
       ly synchronizing data is allowed only for <b>pmemobj</b> pools (see <b><a href="../man7/libpmemobj.7.html">libpmemobj</a></b>(7)).

       If a pool set has the option <u>SINGLEHDR</u> or <u>NOHDRS</u> (see <b><a href="../man5/poolset.5.html">poolset</a></b>(5)), <b>pmempool</b> <b>sync</b> command has limited  ca‐
       pability  of checking its metadata.  This is due to limited or no, respectively, internal metadata at the
       beginning of pool set parts in every replica when either of the options is used.   In  that  cases,  only
       missing parts or the ones which cannot be opened are recreated.

   <b>Available</b> <b>options:</b>
       <b>-b,</b> <b>--bad-blocks</b>
              Fix  bad  blocks  - it causes creating or reading special recovery files.  When bad blocks are de‐
              tected, special recovery files have to be created in order to fix them safely.  A separate  recov‐
              ery  file is created for each part of the pool.  The recovery files are created in the same direc‐
              tory where the poolset file is located using the following name  pattern:  &lt;poolset-file-name&gt;  _r
              &lt;replica-number&gt; _p &lt;part-number&gt; _badblocks.txt These recovery files are automatically removed if
              the sync operation finishes successfully.

              If  the  last  sync  operation  was  interrupted  and not finished correctly (eg.  the application
              crashed) and the bad blocks fixing procedure was in progress, the bad block recovery files may  be
              left  over.  In such case bad blocks might have been cleared and zeroed, but the correct data from
              these blocks was not recovered (not copied from a healthy replica), so the recovery files MUST NOT
              be deleted manually, because it would cause a data loss.  Pmempool-sync should be run  again  with
              the  `-b'  option  set.  It will finish the previously interrupted sync operation and copy correct
              data to zeroed bad blocks using the left-over bad block recovery files (the  bad  blocks  will  be
              read from the saved recovery files).  Pmempool will delete the recovery files automatically at the
              end of the sync operation.

              Using  this  option  may  have limitations depending on the operating system.  For details see de‐
              scription of the CHECK_BAD_BLOCKS feature in <b><a href="../man1/pmempool-feature.1.html">pmempool-feature</a></b>(1).

       <b>-d,</b> <b>--dry-run</b>
              Enable dry run mode.  In this mode no changes are applied, only check for  viability  of  synchro‐
              nization.

       <b>-v,</b> <b>--verbose</b>
              Increase verbosity level.

       <b>-h,</b> <b>--help</b>
              Display help message and exit.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man1/pmempool.1.html">pmempool</a>(1)</b>, <b><a href="../man7/libpmemblk.7.html">libpmemblk</a>(7)</b>, <b><a href="../man7/libpmemlog.7.html">libpmemlog</a>(7)</b>, <b><a href="../man7/libpmempool.7.html">libpmempool</a>(7)</b> and <b>&lt;https://pmem.io&gt;</b>
</pre>
 </div>
</div></section>
</div>
</body>
</html>