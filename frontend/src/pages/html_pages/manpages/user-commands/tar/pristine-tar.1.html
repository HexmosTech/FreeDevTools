<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>pristine-tar - regenerate pristine tarballs</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/pristine-tar">pristine-tar_1.50+nmu2build1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       pristine-tar - regenerate pristine tarballs

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>pristine-tar</b> [OPTIONS] gendelta <u>tarball</u> <u>delta</u>

       <b>pristine-tar</b> [OPTIONS] gentar <u>delta</u> <u>tarball</u>

       <b>pristine-tar</b> [OPTIONS] commit <u>tarball</u> [<u>upstream</u>]

       <b>pristine-tar</b> [OPTIONS] checkout <u>tarball</u>

       <b>pristine-tar</b> [OPTIONS] list

       <b>pristine-tar</b> [OPTIONS] verify <u>tarball</u>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       pristine-tar can regenerate an exact copy of a pristine upstream tarball using only a small binary <u>delta</u>
       file and the contents of the tarball, which are typically kept in an <u>upstream</u> branch in version control.

       The <u>delta</u> file is designed to be checked into version control along-side the <u>upstream</u> branch, thus
       allowing Debian packages to be built entirely using sources in version control, without the need to keep
       copies of upstream tarballs.

       pristine-tar supports compressed tarballs, calling out to <b><a href="../man1/pristine-gz.1.html">pristine-gz</a></b>(1), <b><a href="../man1/pristine-bz2.1.html">pristine-bz2</a></b>(1), and
       <b><a href="../man1/pristine-xz.1.html">pristine-xz</a></b>(1) to produce the pristine gzip, bzip2, and xz files.

</pre><h4><b>COMMANDS</b></h4><pre>
   <b>pristine-tar</b> <b>gendelta</b> <u><b>tarball</b></u> <u><b>delta</b></u>
       This takes the specified upstream <u>tarball</u>, and generates a small binary delta file that can later be used
       by pristine-tar gentar to recreate the tarball.

       If the delta filename is "-", it is written to standard output.

   <b>pristine-tar</b> <b>gentar</b> <u><b>delta</b></u> <u><b>tarball</b></u>
       This takes the specified <u>delta</u> file, and the files in the current directory, which must have identical
       content to those in the upstream tarball, and uses these to regenerate the pristine upstream <u>tarball</u>.

       If the delta filename is "-", it is read from standard input.

   <b>pristine-tar</b> <b>commit</b> <u><b>tarball</b></u> <b>[</b><u><b>upstream</b></u><b>]</b>
       <b>pristine-tar</b> <b>commit</b> generates a pristine-tar delta file for the specified <u>tarball</u>, and commits it to
       version control. The <b>pristine-tar</b> <b>checkout</b> command can later be used to recreate the original tarball
       based only on the information stored in version control.

       The <u>upstream</u> parameter specifies the tag or branch that contains the same content that is present in the
       tarball. This defaults to "refs/heads/upstream", or if there's no such branch, any branch matching
       "upstream". The name of the tree it points to will be recorded for later use by <b>pristine-tar</b> <b>checkout</b>.
       Note that the content does not need to be 100% identical to the content of the tarball, but if it is not,
       additional space will be used in the delta file.

       The delta files are stored in a branch named "pristine-tar", with filenames corresponding to the input
       tarball, with ".delta" appended. This branch is created or updated as needed to add each new delta.

       If <u>tarball</u> already exists previously, it will only be overwritten if it does not match a hash of the
       tarball that has been committed to version control.

   <b>pristine-tar</b> <b>checkout</b> <u><b>tarball</b></u>
       This regenerates a copy of the specified <u>tarball</u> using information previously saved in version control by
       <b>pristine-tar</b> <b>commit</b>.

   <b>pristine-tar</b> <b>list</b>
       This lists tarballs that pristine-tar is able to checkout from version control.

   <b>pristine-tar</b> <b>verify</b> <u><b>tarball</b></u>
       Verifies whether an existing <u>tarball</u> matches the one that has been committed to version control.

</pre><h4><b>OPTIONS</b></h4><pre>
       -v
       --verbose
           Verbose mode, show each command that is run.

       -d
       --debug
           Debug mode.

       -k
       --keep
           Don't clean up the temporary directory on exit.

       -m message
       --message=message
           Use this option to specify a custom commit message to pristine-tar commit.

           Applies to the <b>commit</b> command.

       -s signaturefile
       --signature-file=signaturefile
           Use  this  option  to  optionally commit or checkout an upstream signature file for the tarball. Note
           that extraction of signatures is not performed by default.

           Applies to the <b>commit</b> and <b>checkout</b> commands.

       -r
       --recompress
           Use this option to tell pristine-tar that it is OK to recompress the tarball if 1) the tarball  can't
           be  regenerated  or  2)  the  delta  file  produced  from the original tarball is larger than a given
           threshold (see also <u>-B</u>/<u>--recompress-threshold-bytes</u> and <u>-T</u>/<u>--recompress-threshold-percent</u>).

           <b>Note</b> <b>that</b> <b>this</b> <b>modifies</b> <b>the</b> <b>original</b> <b>tarball</b> <b>on</b> <b>disk</b>, and you probably shouldn't use it  if  you  are
           also storing a upstream GPG signature of the original tarball (see <u>--signature-file</u>).

           On the other hand, the actual contents of the tarball stored by pristine-tar <b>will</b> be identical to the
           content  of  the  upstream  original tarbal even if the compressed tarball itself won't be bit-by-bit
           identical to the one released by upstream.

           A copy of the original tarball will be saved with ".backup" added to its filename.

           Applies to the <b>commit</b> and <b>gendelta</b> commands.

       -B N
       --recompress-threshold-bytes=N
           Recompress original tarball if the generated delta is larger then <u>N</u> bytes.  Default:  524288000  (500
           kB).

           If this option is passed explicitly in the command line, it implies <u>--recompress</u>.

           Applies to the <b>commit</b> and <b>gendelta</b> commands.

       -P N
       --recompress-threshold-percent=N
           Recompress  original  tarball  if  the  generated delta is larger than <u>N</u>% of the size of the original
           tarball. Default: 30.

           If this option is passed explicitly in the command line, it implies <u>--recompress</u>.

           Applies to the <b>commit</b> and <b>gendelta</b> commands.

</pre><h4><b>EXAMPLES</b></h4><pre>
       Suppose you maintain the hello package, in a git repository. You have  just  created  a  tarball  of  the
       release, <u>hello-1.0.tar.gz</u>, which you will upload to a "forge" site.

       You  want  to  ensure  that,  if the "forge" loses the tarball, you can always recreate exactly that same
       tarball. And you'd prefer not to keep copies of tarballs for every release, as that could use  a  lot  of
       disk  space  when hello gets the background mp3s and user-contributed levels you are planning for version
       2.0.

       The solution is to use pristine-tar to commit a delta file that efficiently stores enough information  to
       reproduce the tarball later.

           cd hello
           git tag -s 1.0
           pristine-tar commit ../hello-1.0.tar.gz 1.0

       Remember to tell git to push both the pristine-tar branch, and your tag:

           git push --all --tags

       Now  it  is  a  year  later.  The  worst has come to pass; the "forge" lost all its data, you deleted the
       tarballs to make room for bug report emails, and you want to regenerate them. Happily, the git repository
       is still available.

           git clone git://github.com/joeyh/hello.git
           cd hello
           pristine-tar checkout ../hello-1.0.tar.gz

</pre><h4><b>LIMITATIONS</b></h4><pre>
       Only tarballs, gzipped tarballs, bzip2ed tarballs, and xzed tarballs are currently supported.

       Currently only the git revision control system is supported by the "checkout" and "commit" commands. It's
       ok if the working copy is not clean or has uncommitted changes, or has changes staged in the index;  none
       of that will be touched by "checkout" or "commit".

</pre><h4><b>ENVIRONMENT</b></h4><pre>
       <b>TMPDIR</b>
           Specifies a location to place temporary files, other than the default.

       <b>PRISTINE_TAR</b>
           Defines  command  line  options  to  be assumed by pristine-tar. Any options passed explicitly on the
           command line will override those.

           Options will be split on whitespaces, so if you want to pass an option that needs  an  argument,  use
           the <u>--opt=arg</u> syntax instead of <u>--opt</u> <u>arg</u>.

       <b>PRISTINE_ALL_XDELTA</b>
           Defines  the  underlying  binary delta tool to be used for new deltas. Supported values are "xdelta3"
           (default) and "xdelta".

           Existing deltas will be handled with the original tool that was used to create  them,  regardless  of
           the value of <b>$PRISTINE_ALL_XDELTA</b>.

</pre><h4><b>AUTHOR</b></h4><pre>
       Joey Hess &lt;<a href="mailto:joeyh@debian.org">joeyh@debian.org</a>&gt;

       Licensed under the GPL, version 2 or above.

perl v5.38.2                                       2024-04-01                                    <u><a href="../man1/PRISTINE-TAR.1.html">PRISTINE-TAR</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>