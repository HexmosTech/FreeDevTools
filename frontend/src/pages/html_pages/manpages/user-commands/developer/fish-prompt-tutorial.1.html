<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>This  document  uses  formatting to show what a prompt would look like. If you are viewing this in the</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/fish-common">fish-common_4.0.1-1_all</a> <br><br><pre>
</pre><h4><b>WARNING:</b></h4><pre>
          This  document  uses  formatting to show what a prompt would look like. If you are viewing this in the
          man page, you probably want to switch to looking at the html version instead. Run  <b>help</b>  <b>custom-prompt</b>
          to view it in a web browser.

       Fish ships a number of prompts that you can view with the <u>fish_config</u> command, and many users have shared
       their prompts online.

       However,  you  can  also  write your own, or adjust an existing prompt. This is a good way to get used to
       fish's <u>scripting</u> <u>language</u>.

       Unlike other shells, fish's prompt is built by running a function - <u>fish_prompt</u>. Or,  more  specifically,
       three functions:

       • <u>fish_prompt</u>, which is the main prompt function

       • <u>fish_right_prompt</u>, which is shown on the right side of the terminal.

       • <u>fish_mode_prompt</u>, which is shown if <u>vi</u> <u>mode</u> is used.

       These functions are run, and whatever they print is displayed as the prompt (minus one trailing newline).

       Here, we will just be writing a simple fish_prompt.

</pre><h4><b>OUR</b> <b>FIRST</b> <b>PROMPT</b></h4><pre>
       Let's look at a very simple example:

          function fish_prompt
              echo $PWD '&gt;'
          end

       This  prints  the  current working directory (<u>PWD</u>) and a <b>&gt;</b> symbol to show where the prompt ends. The <b>&gt;</b> is
       <u>quoted</u> because otherwise it would signify a <u>redirection</u>.

       Because we've used <u>echo</u>, it adds spaces between the two so it ends up looking like (assuming  <b>_</b>  is  your
       cursor):

          /home/tutorial &gt;_

</pre><h4><b>FORMATTING</b></h4><pre>
       <b>echo</b> adds spaces between its arguments. If you don't want those, you can use <u>string</u> <u>join</u> like this:

          function fish_prompt
              string join '' -- $PWD '&gt;'
          end

       The  <b>--</b> indicates to <b>string</b> that no options can come after it, in case we extend this with something that
       can start with a <b>-</b>.

       There are other ways to remove the space, including <b>echo</b> <b>-s</b> and <u>printf</u>.

</pre><h4><b>ADDING</b> <b>COLOR</b></h4><pre>
       This prompt is functional, but a bit boring. We could add some color.

       Fortunately, fish offers the <u>set_color</u> command, so you can do:

          echo (set_color red)foo

       <b>set_color</b> can also handle RGB colors like <b>set_color</b> <b>23b455</b>, and other formatting options  including  bold
       and italics.

       So, taking our previous prompt and adding some color:

          function fish_prompt
              string join '' -- (set_color green) $PWD (set_color normal) '&gt;'
          end

       A "normal" color tells the terminal to go back to its normal formatting options.

       <b>set_color</b>  works  by  producing  an  escape  sequence,  which  is  a special piece of text that terminals
       interpret as instructions - for example, to change color. So <b>set_color</b> <b>red</b> produces the same effect as:

          echo \e\[31m

       Although you can write your own escape sequences by hand, it's much easier to use <b>set_color</b>.

</pre><h4><b>SHORTENING</b> <b>THE</b> <b>WORKING</b> <b>DIRECTORY</b></h4><pre>
       This is fine, but our <u>PWD</u> can be a bit long, and we  are  typically  only  interested  in  the  last  few
       directories.  We  can  shorten  this  with  the  <u>prompt_pwd</u>  helper that will give us a shortened working
       directory:

          function fish_prompt
              string join '' -- (set_color green) (prompt_pwd) (set_color normal) '&gt;'
          end

       <b>prompt_pwd</b> takes options to control how much to shorten. For instance, if we want to display the last two
       directories, we'd use <b>prompt_pwd</b> <b>--full-length-dirs</b> <b>2</b>:

          function fish_prompt
              string join '' -- (set_color green) (prompt_pwd --full-length-dirs 2) (set_color normal) '&gt;'
          end

       With a current directory of "/home/tutorial/Music/Lena Raine/Oneknowing", this would print

          <a href="file:~/M/Lena">~/M/Lena</a> Raine/Oneknowing&gt;_

</pre><h4><b>STATUS</b></h4><pre>
       One important bit of information that every command returns is the <u>status</u>. This is a whole number from  0
       to  255,  and  usually  it is used as an error code - 0 if the command returned successfully, or a number
       from 1 to 255 if not.

       It's useful to display this in your prompt, but showing it when it's 0 seems kind of wasteful.

       First of all, since every command (except for <u>set</u>) changes the status, you need to store it for later use
       as the first thing in your prompt. Use a <u>local</u> <u>variable</u> so it will be confined to your prompt function:

          set -l last_status $status

       And after that, you can set a string if it is not zero:

          # Prompt status only if it's not 0
          set -l stat
          if test $last_status -ne 0
              set stat (set_color red)"[$last_status]"(set_color normal)
          end

       And to print it, we add it to our <b>string</b> <b>join</b>:

          string join '' -- (set_color green) (prompt_pwd) (set_color normal) $stat '&gt;'

       If <b>$last_status</b> was 0, <b>$stat</b> is empty, and so it will simply disappear.

       So our entire prompt is now:

          function fish_prompt
              set -l last_status $status
              # Prompt status only if it's not 0
              set -l stat
              if test $last_status -ne 0
                  set stat (set_color red)"[$last_status]"(set_color normal)
              end

              string join '' -- (set_color green) (prompt_pwd) (set_color normal) $stat '&gt;'
          end

       And it looks like:

          <a href="file:~/M/L/Oneknowing">~/M/L/Oneknowing</a>[1]&gt;_

       after we run <b>false</b> (which returns 1).

</pre><h4><b>SAVE</b> <b>THE</b> <b>PROMPT</b></h4><pre>
       Once you are happy with your prompt, you can save it with <b>funcsave</b> <b>fish_prompt</b> (see <u>funcsave</u> <u>-</u>  <u>save</u>  <u>the</u>
       <u>definition</u>    <u>of</u>    <u>a</u>    <u>function</u>    <u>to</u>    <u>the</u>    <u>user's</u>    <u>autoload</u>    <u>directory</u>)   or   write   it   to
       <a href="file:~/.config/fish/functions/fish_prompt.fish">~/.config/fish/functions/fish_prompt.fish</a> yourself.

       If you want to edit it again, open that file or use <b>funced</b> <b>fish_prompt</b> (see  <u>funced</u>  <u>-</u>  <u>edit</u>  <u>a</u>  <u>function</u>
       <u>interactively</u>).

</pre><h4><b>WHERE</b> <b>TO</b> <b>GO</b> <b>FROM</b> <b>HERE?</b></h4><pre>
       We have now built a simple but working and usable prompt, but of course more can be done.

       •

         <b>Fish</b> <b>offers</b> <b>more</b> <b>helper</b> <b>functions:</b>

                • <b>prompt_login</b>  to  describe the user/hostname/container or <b>prompt_hostname</b> to describe just the
                  host

                • <b>fish_is_root_user</b> to help with changing the symbol for root.

                • <b>fish_vcs_prompt</b> to show version control information (or  <b>fish_git_prompt</b>  /  <b>fish_hg_prompt</b>  /
                  <b>fish_svn_prompt</b> to limit it to specific systems)

       • You  can  add  a  right  prompt  by  changing  <u>fish_right_prompt</u>  or  a  vi  mode  prompt  by  changing
         <u>fish_mode_prompt</u>.

       •

         <b>Some</b> <b>prompts</b> <b>have</b> <b>interesting</b> <b>or</b> <b>advanced</b> <b>features</b>

                • Add the time when the prompt was printed

                • Show various integrations like python's venv

                • Color the parts differently.

       You can look at fish's sample prompts for inspiration. Open up <u>fish_config</u>, find one you  like  and  pick
       it. For example:

          fish_config prompt show # &lt;- shows all the sample prompts
          fish_config prompt choose disco # &lt;- this picks the "disco" prompt for this session
          funced fish_prompt # &lt;- opens fish_prompt in your editor, and reloads it once the editor exits

</pre><h4><b>AUTHOR</b></h4><pre>
       fish-shell developers

</pre><h4><b>COPYRIGHT</b></h4><pre>
       2024, fish-shell developers

4.0                                               Mar 13, 2025                           <u><a href="../man1/FISH-PROMPT-TUTORIAL.1.html">FISH-PROMPT-TUTORIAL</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>