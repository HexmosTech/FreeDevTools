<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>If this is your first time using fish, see the tutorial.</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/fish-common">fish-common_4.0.1-1_all</a> <br><br><pre>
</pre><h4><b>WHERE</b> <b>TO</b> <b>GO?</b></h4><pre>
       If this is your first time using fish, see the <u>tutorial</u>.

       If  you  are  already familiar with other shells like bash and want to see the scripting differences, see
       <u>Fish</u> <u>For</u> <u>Bash</u> <u>Users</u>.

       For an overview of fish's scripting language, see <u>The</u> <u>Fish</u> <u>Language</u>. If it would be useful  in  a  script
       file, it's here.

       For  information  on  using  fish  interactively,  see <u>Interactive</u> <u>use</u>. If it's about key presses, syntax
       highlighting or anything else that needs an interactive terminal session, look here.

       If you need to install fish first, read on, the rest of this document will tell you how to  get,  install
       and configure fish.

</pre><h4><b>INSTALLATION</b></h4><pre>
       This section describes how to install, uninstall, start, and exit <b>fish</b>. It also explains how to make fish
       the default shell.

   <b>Installation</b>
       Up-to-date   instructions   for  installing  the  latest  version  of  fish  are  on  the  <u>fish</u>  <u>homepage</u>
       &lt;<b>https://fishshell.com/</b>&gt;.

       To install the  development  version  of  fish,  see  the  instructions  on  the  <u>project's</u>  <u>GitHub</u>  <u>page</u>
       &lt;<b>https://github.com/fish-shell/fish-shell</b>&gt;.

   <b>Starting</b> <b>and</b> <b>Exiting</b>
       Once fish has been installed, open a terminal. If fish is not the default shell:

       • Type <b>fish</b> to start a shell:

            &gt; fish

       • Type <b>exit</b> to end the session:

            &gt; exit

   <b>Default</b> <b>Shell</b>
       There are multiple ways to switch to fish (or any other shell) as your default.

       The  simplest  method  is  to  set  your  terminal  emulator (eg GNOME Terminal, Apple's Terminal.app, or
       Konsole)  to  start  fish  directly.  See  its  configuration  and  set   the   program   to   start   to
       <b>/usr/local/bin/fish</b> (if that's where fish is installed - substitute another location as appropriate).

       Alternatively,  you  can  set fish as your login shell so that it will be started by all terminal logins,
       including SSH.

       <b>WARNING:</b>
          Setting fish as your login shell may cause issues, such as an incorrect <u>PATH</u>. Some operating  systems,
          including a number of Linux distributions, require the login shell to be Bourne-compatible and to read
          configuration from <b><a href="file:/etc/profile">/etc/profile</a></b>. fish may not be suitable as a login shell on these systems.

       To change your login shell to fish:

       1. Add the shell to <b><a href="file:/etc/shells">/etc/shells</a></b> with:

             &gt; echo /usr/local/bin/fish | sudo tee -a <a href="file:/etc/shells">/etc/shells</a>

       2. Change your default shell with:

             &gt; chsh -s /usr/local/bin/fish

       Again,  substitute  the path to fish for <b>/usr/local/bin/fish</b> - see <b>command</b> <b>-s</b> <b>fish</b> inside fish. To change
       it back to another shell, just substitute <b>/usr/local/bin/fish</b> with <b><a href="file:/bin/bash">/bin/bash</a></b>, <b>/bin/tcsh</b>  or  <b>/bin/zsh</b>  as
       appropriate in the steps above.

   <b>Uninstalling</b>
       For uninstalling fish: see <u>FAQ:</u> <u>Uninstalling</u> <u>fish</u>.

   <b>Shebang</b> <b>Line</b>
       Because shell scripts are written in many different languages, they need to carry information about which
       interpreter should be used to execute them. For this, they are expected to have a first line, the shebang
       line, which names the interpreter executable.

       A script written in <b>bash</b> would need a first line like this:

          #!<a href="file:/bin/bash">/bin/bash</a>

       When the shell tells the kernel to execute the file, it will use the interpreter <b><a href="file:/bin/bash">/bin/bash</a></b>.

       For  a script written in another language, just replace <b><a href="file:/bin/bash">/bin/bash</a></b> with the interpreter for that language.
       For example: <b>/usr/bin/python</b> for a python script, or <b>/usr/local/bin/fish</b> for a fish script,  if  that  is
       where you have them installed.

       If  you  want to share your script with others, you might want to use <b>env</b> to allow for the interpreter to
       be installed in other locations. For example:

          #!<a href="file:///usr/lib/w3m/cgi-bin/w3mman2html.cgi?env">/usr/bin/env</a> fish
          echo Hello from fish $version

       This will call <b>env</b>, which then goes through <u>PATH</u> to find a program called "fish".  This  makes  it  work,
       whether  fish  is installed in (for example) <b>/usr/local/bin/fish</b>, <b>/usr/bin/fish</b>, or <b><a href="file:~/.local/bin/fish">~/.local/bin/fish</a></b>, as
       long as that directory is in <u>PATH</u>.

       The shebang line is only used when scripts are executed without specifying the interpreter. For functions
       inside fish or when executing a script with <b>fish</b> <b>/path/to/script</b>, a  shebang  is  not  required  (but  it
       doesn't hurt!).

       When  executing files without an interpreter, fish, like other shells, tries your system shell, typically
       <b><a href="file:/bin/sh">/bin/sh</a></b>. This is needed because some scripts are shipped without a shebang line.

</pre><h4><b>CONFIGURATION</b></h4><pre>
       To store configuration write it to a file called <b><a href="file:~/.config/fish/config.fish">~/.config/fish/config.fish</a></b>.

       <b>.fish</b> scripts in <b><a href="file:~/.config/fish/conf.d/">~/.config/fish/conf.d/</a></b> are also automatically executed before <b>config.fish</b>.

       These files are read on the startup of every shell, whether interactive and/or if they're  login  shells.
       Use  <b>status</b>  <b>--is-interactive</b>  and  <b>status</b>  <b>--is-login</b>  to  do  things  only in interactive/login shells,
       respectively.

       This is the short version; for a full explanation, like for sysadmins or integration  for  developers  of
       other software, see <u>Configuration</u> <u>files</u>.

       If you want to see what you changed over fish's defaults, see <u>fish_delta</u>.

   <b>Examples:</b>
       To  add  <b><a href="file:~/linux/bin">~/linux/bin</a></b>  to  PATH  variable when using a login shell, add this to <b><a href="file:~/.config/fish/config.fish">~/.config/fish/config.fish</a></b>
       file:

          if status --is-login
              set -gx PATH $PATH <a href="file:~/linux/bin">~/linux/bin</a>
          end

       This is just an example; using <u>fish_add_path</u> e.g. <b>fish_add_path</b> <b><a href="file:~/linux/bin">~/linux/bin</a></b> which only adds the  path  if
       it isn't included yet is easier.

       To run commands on exit, use an <u>event</u> <u>handler</u> that is triggered by the exit of the shell:

          function on_exit --on-event fish_exit
              echo fish is now exiting
          end

</pre><h4><b>RESOURCES</b></h4><pre>
       • The <u>GitHub</u> <u>page</u> &lt;<b>https://github.com/fish-shell/fish-shell/</b>&gt;

       • The official <u>Gitter</u> <u>channel</u> &lt;<b>https://gitter.im/fish-shell/fish-shell</b>&gt;

       • The          official          mailing         list         at         <u><a href="mailto:fish-users@lists.sourceforge.net">fish-users@lists.sourceforge.net</a></u>
         &lt;<b>https://lists.sourceforge.net/lists/listinfo/fish-users</b>&gt;

       If you have an improvement for fish, you can submit it via the GitHub page.

</pre><h4><b>OTHER</b> <b>HELP</b> <b>PAGES</b></h4><pre>
   <b>Frequently</b> <b>asked</b> <b>questions</b>
   <b>What</b> <b>is</b> <b>the</b> <b>equivalent</b> <b>to</b> <b>this</b> <b>thing</b> <b>from</b> <b>bash</b> <b>(or</b> <b>other</b> <b>shells)?</b>
       See <u>Fish</u> <u>for</u> <u>bash</u> <u>users</u>

   <b>How</b> <b>do</b> <b>I</b> <b>set</b> <b>or</b> <b>clear</b> <b>an</b> <b>environment</b> <b>variable?</b>
       Use the <u>set</u> command:

          set -x key value # typically set -gx key value
          set -e key

       Since fish 3.1 you can set an environment variable for just one command using the <b>key=value</b> <b>some</b>  <b>command</b>
       syntax,  like  in  other shells.  The two lines below behave identically - unlike other shells, fish will
       output <b>value</b> both times:

          key=value echo $key
          begin; set -lx key value; echo $key; end

       Note that "exported" is not a <u>scope</u>, but an additional bit  of  state.  A  variable  can  be  global  and
       exported  or  local  and  exported  or  even  universal and exported. Typically it makes sense to make an
       exported variable global.

   <b>How</b> <b>do</b> <b>I</b> <b>check</b> <b>whether</b> <b>a</b> <b>variable</b> <b>is</b> <b>defined?</b>
       Use <b>set</b> <b>-q</b> <b>var</b>.  For example, <b>if</b> <b>set</b> <b>-q</b> <b>var;</b> <b>echo</b> <b>variable</b> <b>defined;</b> <b>end</b>.  To check multiple variables you
       can combine with <b>and</b> and <b>or</b> like so:

          if set -q var1; or set -q var2
              echo either variable defined
          end

       Keep in mind that a defined variable could also be empty, either by having no elements (if set  like  <b>set</b>
       <b>var</b>) or only empty elements (if set like <b>set</b> <b>var</b> <b>""</b>). Read on for how to deal with those.

   <b>How</b> <b>do</b> <b>I</b> <b>check</b> <b>whether</b> <b>a</b> <b>variable</b> <b>is</b> <b>not</b> <b>empty?</b>
       Use  <b>string</b> <b>length</b> <b>-q</b> <b>--</b> <b>$var</b>.  For example, <b>if</b> <b>string</b> <b>length</b> <b>-q</b> <b>--</b> <b>$var;</b> <b>echo</b> <b>not</b> <b>empty;</b> <b>end</b>.  Note that
       <b>string</b> <b>length</b> will interpret a list of multiple variables as a disjunction (meaning any/or):

          if string length -q -- $var1 $var2 $var3
              echo at least one of these variables is not empty
          end

       Alternatively, use <b>test</b> <b>-n</b> <b>"$var"</b>, but remember that <b>the</b> <b>variable</b> <b>must</b> <b>be</b> <b>double-quoted</b>.  For example, <b>if</b>
       <b>test</b> <b>-n</b> <b>"$var";</b> <b>echo</b> <b>not</b> <b>empty;</b> <b>end</b>. The <b>test</b> command provides its own and (-a) and or (-o):

          if test -n "$var1" -o -n "$var2" -o -n "$var3"
              echo at least one of these variables is not empty
          end

       If you want to know if a variable has <u>no</u> <u>elements</u>, use <b>set</b> <b>-q</b> <b>var[1]</b>.

   <b>Why</b> <b>doesn't</b> <b>set</b> <b>-Ux</b> <b>(exported</b> <b>universal</b> <b>variables)</b> <b>seem</b> <b>to</b> <b>work?</b>
       A global variable of the same name already exists.

       Environment variables such as <b>EDITOR</b> or <b>TZ</b> can be set universally using <b>set</b> <b>-Ux</b>.  However, if there is an
       environment variable already set before fish starts (such as by login scripts or system  administrators),
       it  is  imported  into fish as a global variable. The <u>variable</u> <u>scopes</u> are searched from the "inside out",
       which means that local variables are checked first, followed by global variables, and  finally  universal
       variables.

       This means that the global value takes precedence over the universal value.

       To  avoid this problem, consider changing the setting which fish inherits. If this is not possible, add a
       statement to your <u>configuration</u> <u>file</u> (usually <b><a href="file:~/.config/fish/config.fish">~/.config/fish/config.fish</a></b>):

          set -gx EDITOR vim

   <b>How</b> <b>do</b> <b>I</b> <b>run</b> <b>a</b> <b>command</b> <b>every</b> <b>login?</b> <b>What's</b> <b>fish's</b> <b>equivalent</b> <b>to</b> <b>.bashrc</b> <b>or</b> <b>.profile?</b>
       Edit the file <b><a href="file:~/.config/fish/config.fish">~/.config/fish/config.fish</a></b> [1], creating it if it does not exist (Note the leading period).

       Unlike .bashrc and .profile, this file is always read, even in non-interactive or login shells.

       To do something only in interactive shells, check <b>status</b> <b>is-interactive</b> like:

          if status is-interactive
              # use the coolbeans theme
              fish_config theme choose coolbeans
          end

       [1]  The "<a href="file:~/.config">~/.config</a>" part of this can be set via $XDG_CONFIG_HOME, that's just the default.

   <b>How</b> <b>do</b> <b>I</b> <b>set</b> <b>my</b> <b>prompt?</b>
       The    prompt    is     the     output     of     the     <b>fish_prompt</b>     function.     Put     it     in
       <b><a href="file:~/.config/fish/functions/fish_prompt.fish">~/.config/fish/functions/fish_prompt.fish</a></b>. For example, a simple prompt is:

          function fish_prompt
              set_color $fish_color_cwd
              echo -n (prompt_pwd)
              set_color normal
              echo -n ' &gt; '
          end

       You  can also use the Web configuration tool, <u>fish_config</u>, to preview and choose from a gallery of sample
       prompts.

       Or you can use fish_config from the commandline:

          &gt; fish_config prompt show
          # displays all the prompts fish ships with
          &gt; fish_config prompt choose disco
          # loads the disco prompt in the current shell
          &gt; fish_config prompt save
          # makes the change permanent

       If you want to modify your existing prompt, you can use <u>funced</u> and <u>funcsave</u> like:

          &gt;_ funced fish_prompt
          # This opens up your editor (set in $EDITOR).
          # Modify the function,
          # save the file and repeat to your liking.
          # Once you are happy with it:
          &gt;_ funcsave fish_prompt

       This also applies to <u>fish_right_prompt</u> and <u>fish_mode_prompt</u>.

   <b>Why</b> <b>does</b> <b>my</b> <b>prompt</b> <b>show</b> <b>a</b> <b>[I]?</b>
       That's  the  <u>fish_mode_prompt</u>.  It  is  displayed  by  default  when  you've  activated  vi  mode   using
       <b>fish_vi_key_bindings</b>.

       If  you haven't activated vi mode on purpose, you might have installed a third-party theme or plugin that
       does it.

       If you want to change or disable this display, modify the <b>fish_mode_prompt</b>  function,  for  instance  via
       <u>funced</u>.

   <b>How</b> <b>do</b> <b>I</b> <b>customize</b> <b>my</b> <b>syntax</b> <b>highlighting</b> <b>colors?</b>
       Use the web configuration tool, <u>fish_config</u>, or alter the <u>fish_color</u> <u>family</u> <u>of</u> <u>environment</u> <u>variables</u>.

       You can also use <b>fish_config</b> on the commandline, like:

          &gt; fish_config theme show
          # to demonstrate all the colorschemes
          &gt; fish_config theme choose coolbeans
          # to load the "coolbeans" theme
          &gt; fish_config theme save
          # to make the change permanent

   <b>How</b> <b>do</b> <b>I</b> <b>change</b> <b>the</b> <b>greeting</b> <b>message?</b>
       Change the value of the variable <b>fish_greeting</b> or create a <u>fish_greeting</u> function. For example, to remove
       the greeting use:

          set -U fish_greeting

       Or if you prefer not to use a universal variable, use:

          set -g fish_greeting

       in <u>config.fish</u>.

   <b>How</b> <b>do</b> <b>I</b> <b>run</b> <b>a</b> <b>command</b> <b>from</b> <b>history?</b>
       Type some part of the command, and then hit the <b>up</b> (<b>↑</b>) or <b>down</b> (<b>↓</b>) arrow keys to navigate through history
       matches, or press <b>ctrl-r</b> to open the history in a searchable pager. In this pager you can press <b>ctrl-r</b> or
       <b>ctrl-s</b> to move to older or younger history respectively.

       Additional default key bindings include <b>ctrl-p</b> (up) and <b>ctrl-n</b> (down). See <u>Searchable</u> <u>command</u> <u>history</u> for
       more information.

   <b>Why</b> <b>doesn't</b> <b>history</b> <b>substitution</b> <b>("!$"</b> <b>etc.)</b> <b>work?</b>
       Because  history  substitution  is an awkward interface that was invented before interactive line editing
       was even possible. Instead of adding this pseudo-syntax, fish opts for nice history searching and  recall
       features.   Switching  requires  a  small change of habits: if you want to modify an old line/word, first
       recall it, then edit.

       As a special case, most of the time history substitution is used as <b>sudo</b> <b>!!</b>.  In  that  case  just  press
       <b>alt-s</b>,  and  it  will  recall  your  last  commandline with <b>sudo</b> prefixed (or toggle a <b>sudo</b> prefix on the
       current commandline if there is anything).

       In general, fish's history recall works like this:

       • Like other shells, the Up arrow, <b>up</b> recalls whole lines, starting  from  the  last  executed  line.  So
         instead of typing <b>!!</b>, you would just hit the up-arrow.

       • If  the  line  you  want is far back in the history, type any part of the line and then press Up one or
         more times.  This will filter the recalled lines to ones that include this text, and you  will  get  to
         the  line  you  want much faster.  This replaces "!vi", "!?bar.c" and the like. If you want to see more
         context, you can press <b>ctrl-r</b> to open the history in the pager.

       • <b>alt-up</b> recalls individual arguments, starting from the last argument in the last  executed  line.  This
         can be used instead of "!$".

       See <u>documentation</u> for more details about line editing in fish.

       That being said, you can use <u>Abbreviations</u> to implement history substitution. Here's just <b>!!</b>:

          function last_history_item; echo $history[1]; end
          abbr -a !! --position anywhere --function last_history_item

       Run  this  and  <b>!!</b> will be replaced with the last history entry, anywhere on the commandline. Put it into
       <u>config.fish</u> to keep it.

   <b>How</b> <b>do</b> <b>I</b> <b>run</b> <b>a</b> <b>subcommand?</b> <b>The</b> <b>backtick</b> <b>doesn't</b> <b>work!</b>
       <b>fish</b> uses parentheses for subcommands. For example:

          for i in (ls)
              echo $i
          end

       It also supports the familiar <b>$()</b> syntax, even in quotes. Backticks are not supported  because  they  are
       discouraged even in POSIX shells. They nest poorly and are hard to tell from single quotes (<b>''</b>).

   <b>My</b> <b>command</b> <b>(pkg-config)</b> <b>gives</b> <b>its</b> <b>output</b> <b>as</b> <b>a</b> <b>single</b> <b>long</b> <b>string?</b>
       Unlike  other  shells,  fish  splits  command  substitutions  only on newlines, not spaces or tabs or the
       characters in $IFS.

       That means if you run

          count (printf '%s ' a b c)

       It will print <b>1</b>, because the "a b c " is used in one piece. But if you do

          count (printf '%s\n' a b c)

       it will print <b>3</b>, because it gave <b>count</b> the arguments "a", "b" and "c" separately.

       In the overwhelming majority of cases, splitting on spaces is unwanted, so this is an  improvement.  This
       is why you hear about problems with filenames with spaces, after all.

       However sometimes, especially with <b>pkg-config</b> and related tools, splitting on spaces is needed.

       In these cases use <b>string</b> <b>split</b> <b>-n</b> <b>"</b> <b>"</b> like:

          g++ example_01.cpp (pkg-config --cflags --libs gtk+-2.0 | string split -n " ")

       The <b>-n</b> is so empty elements are removed like POSIX shells would do.

   <b>How</b> <b>do</b> <b>I</b> <b>get</b> <b>the</b> <b>exit</b> <b>status</b> <b>of</b> <b>a</b> <b>command?</b>
       Use the <b>$status</b> variable. This replaces the <b>$?</b> variable used in other shells.

          somecommand
          if test $status -eq 7
              echo "That's my lucky number!"
          end

       If you are just interested in success or failure, you can run the command directly as the if-condition:

          if somecommand
              echo "Command succeeded"
          else
              echo "Command failed"
          end

       Or if you just want to do one command in case the first succeeded or failed, use <b>and</b> or <b>or</b>:

          somecommand
          or someothercommand

       See the <u>Conditions</u> and the documentation for <u>test</u> and <u>if</u> for more information.

   <b>My</b> <b>command</b> <b>prints</b> <b>"No</b> <b>matches</b> <b>for</b> <b>wildcard"</b> <b>but</b> <b>works</b> <b>in</b> <b>bash</b>
       In short: <u>quote</u> or <u>escape</u> the wildcard:

          scp user@ip:/dir/"string-*"

       When  fish  sees an unquoted <b>*</b>, it performs <u>wildcard</u> <u>expansion</u>. That means it tries to match filenames to
       the given string.

       If the wildcard doesn't match any files, fish prints an error instead of running the command:

          &gt; echo *this*does*not*exist
          fish: No matches for wildcard '*this*does*not*exist'. See `help expand`.
          echo *this*does*not*exist
               ^

       Now, bash also tries to match files in this case, but when it doesn't find a match, it passes  along  the
       literal wildcard string instead.

       That means that commands like the above

          scp user@ip:/dir/string-*

       or

          apt install postgres-*

       appear  to  work,  because most of the time the string doesn't match and so it passes along the <b>string-*</b>,
       which is then interpreted by the receiving program.

       But it also means that these commands can stop working at any moment once a matching file is  encountered
       (because  it  has  been created or the command is executed in a different working directory), and to deal
       with that bash needs workarounds like

          for f in ./*.mpg; do
                # We need to test if the file really exists because
                # the wildcard might have failed to match.
                test -f "$f" || continue
                mympgviewer "$f"
          done

       (from <u><a href="http://mywiki.wooledge.org/BashFAQ/004">http://mywiki.wooledge.org/BashFAQ/004</a></u>)

       For these reasons, fish does not do this, and instead expects asterisks to be quoted or escaped  if  they
       aren't supposed to be expanded.

       This is similar to bash's "failglob" option.

   <b>Why</b> <b>won't</b> <b>SSH/SCP/rsync</b> <b>connect</b> <b>properly</b> <b>when</b> <b>fish</b> <b>is</b> <b>my</b> <b>login</b> <b>shell?</b>
       This  problem  may  show  up  as  messages like "<b>Received</b> <b>message</b> <b>too</b> <b>long</b>", "<b>open</b> <b>terminal</b> <b>failed:</b> <b>not</b> <b>a</b>
       <b>terminal</b>",   "<b>Bad</b>   <b>packet</b>   <b>length</b>",    or    "<b>Connection</b>    <b>refused</b>"    with    strange    output    in
       <b>ssh_exchange_identification</b> messages in the debug log.

       This  usually happens because fish reads the <u>user</u> <u>configuration</u> <u>file</u> (<b><a href="file:~/.config/fish/config.fish">~/.config/fish/config.fish</a></b>) <u>always</u>,
       whether it's in an interactive or login or non-interactive or non-login shell.

       This simplifies matters, but it also means when config.fish generates output, it will  do  that  even  in
       non-interactive shells like the one ssh/scp/rsync start when they connect.

       Anything  in  config.fish  that  produces  output should be guarded with <b>status</b> <b>is-interactive</b> (or <b>status</b>
       <b>is-login</b> if you prefer):

          if status is-interactive
            ...
          end

       The same applies for example when you start <b>tmux</b> in  config.fish  without  guards,  which  will  cause  a
       message like <b>sessions</b> <b>should</b> <b>be</b> <b>nested</b> <b>with</b> <b>care,</b> <b>unset</b> <b>$TMUX</b> <b>to</b> <b>force</b>.

   <b>I'm</b>   <b>getting</b>  <b>weird</b>  <b>graphical</b>  <b>glitches</b>  <b>(a</b>  <b>staircase</b>  <b>effect,</b>  <b>ghost</b>  <b>characters,</b>  <b>cursor</b>  <b>in</b>  <b>the</b>  <b>wrong</b>
       <b>position,...)?</b>
       In a terminal, the application running inside it and the terminal itself need to agree on  the  width  of
       characters in order to handle cursor movement.

       This  is  more  important  to  fish  than  other  shells  because  features  like syntax highlighting and
       autosuggestions are implemented by moving the cursor.

       Sometimes, there is disagreement on the width. There are numerous causes and fixes for this:

       • It is possible the character is simply too new for your system to know -  in  this  case  you  need  to
         refrain from using it.

       • Fish or your terminal might not know about the character or handle it wrong - in this case fish or your
         terminal needs to be fixed, or you need to update to a fixed version.

       • The  character  has  an  "ambiguous"  width and fish thinks that means a width of X while your terminal
         thinks it's Y.  In  this  case  you  either  need  to  change  your  terminal's  configuration  or  set
         $fish_ambiguous_width to the correct value.

       • The  character  is  an  emoji  and  the  host system only supports Unicode 8, while you are running the
         terminal on a system that uses Unicode &gt;= 9. In this case set $fish_emoji_width to 2.

       This also means that a few things are unsupportable:

       • Non-monospace fonts - there is <u>no</u> <u>way</u> for fish to figure out what width a specific character has as  it
         has no influence on the terminal's font rendering.

       • Different widths for multiple ambiguous width characters - there is no way for fish to know which width
         you assign to each character.

   <b>Uninstalling</b> <b>fish</b>
       If  you  want  to uninstall fish, first make sure fish is not set as your shell. Run <b>chsh</b> <b>-s</b> <b><a href="file:/bin/bash">/bin/bash</a></b> if
       you are not sure.

       If you installed it with a package manager, just use that package manager's uninstall  function.  If  you
       built fish yourself, assuming you installed it to <a href="file:/usr/local">/usr/local</a>, do this:

          rm -Rf /usr/local/etc/fish /usr/local/share/fish <a href="file:~/.config/fish">~/.config/fish</a>
          rm /usr/local/share/man/man1/fish*.1
          cd <a href="file:/usr/local/bin">/usr/local/bin</a>
          rm -f fish fish_indent

   <b>Interactive</b> <b>use</b>
       Fish prides itself on being really nice to use interactively. That's down to a few features we'll explain
       in the next few sections.

       Fish is used by giving commands in the fish language, see <u>The</u> <u>Fish</u> <u>Language</u> for information on that.

   <b>Help</b>
       Fish  has an extensive help system. Use the <u>help</u> command to obtain help on a specific subject or command.
       For instance, writing <b>help</b> <b>syntax</b> displays the <u>syntax</u> <u>section</u> of this documentation.

       Fish also has man pages for its commands, and translates the help pages to man pages.  For  example,  <b>man</b>
       <b>set</b> will show the documentation for <b>set</b> as a man page.

       Help  on  a  specific builtin can also be obtained with the <b>-h</b> parameter. For instance, to obtain help on
       the <u>fg</u> builtin, either type <b>fg</b> <b>-h</b> or <b>help</b> <b>fg</b>.

       The main page can be viewed via <b>help</b> <b>index</b> (or just <b>help</b>) or <b>man</b> <b>fish-doc</b>. The  tutorial  can  be  viewed
       with <b>help</b> <b>tutorial</b> or <b>man</b> <b>fish-tutorial</b>.

   <b>Autosuggestions</b>
       fish  suggests  commands as you type, based on <u>command</u> <u>history</u>, completions, and valid file paths. As you
       type commands, you will see a suggestion offered after the cursor, in a muted gray color  (which  can  be
       changed with the <b>fish_color_autosuggestion</b> variable).

       To  accept the autosuggestion (replacing the command line contents), press <b>right</b> (<b>→</b>) or <b>ctrl-f</b>. To accept
       the first suggested word, press <b>alt-right</b> (<b>→</b>) or <b>alt-f</b>. If the autosuggestion is not what you want,  just
       ignore it: it won't execute unless you accept it.

       Autosuggestions are a powerful way to quickly summon frequently entered commands, by typing the first few
       characters. They are also an efficient technique for navigating through directory hierarchies.

       If you don't like autosuggestions, you can disable them by setting <b>$fish_autosuggestion_enabled</b> to 0:

          set -g fish_autosuggestion_enabled 0

   <b>Tab</b> <b>Completion</b>
       Tab  completion  is a time saving feature of any modern shell. When you type <b>tab</b>, fish tries to guess the
       rest of the word under the cursor. If it finds just one possibility, it inserts it. If it finds more,  it
       inserts  the  longest  unambiguous part and then opens a menu (the "pager") that you can navigate to find
       what you're looking for.

       The pager can be navigated with the arrow keys, <b>pageup</b> / <b>pagedown</b>, <b>tab</b> or <b>shift-tab</b>. Pressing <b>ctrl-s</b> (the
       <b>pager-toggle-search</b> binding - <b>/</b> in vi mode) opens up a search menu that you can use to filter the list.

       Fish provides some general purpose completions, like for commands, variable names, usernames or files.

       It also provides a large number of program specific scripted completions. Most of these  completions  are
       simple options like the <b>-l</b> option for <b>ls</b>, but a lot are more advanced. For example:

       • <b>man</b> and <b>whatis</b> show the installed manual pages as completions.

       • <b>make</b> uses targets in the Makefile in the current directory as completions.

       • <b>mount</b> uses mount points specified in fstab as completions.

       • <b>apt</b>, <b>rpm</b> and <b>yum</b> show installed or installable packages

       You  can also write your own completions or install some you got from someone else. For that, see <u>Writing</u>
       <u>your</u> <u>own</u> <u>completions</u>.

       Completion  scripts  are  loaded  on  demand,  just  like  <u>functions</u>   <u>are</u>.   The   difference   is   the
       <b>$fish_complete_path</b>  <u>list</u>  is used instead of <b>$fish_function_path</b>. Typically you can drop new completions
       in <a href="file:~/.config/fish/completions/name-of-command.fish">~/.config/fish/completions/name-of-command.fish</a> and fish will find them automatically.

   <b>Syntax</b> <b>highlighting</b>
       Fish interprets the command line as it is typed and uses syntax highlighting  to  provide  feedback.  The
       most important feedback is the detection of potential errors. By default, errors are marked red.

       Detected errors include:

       • Non-existing commands.

       • Reading from or appending to a non-existing file.

       • Incorrect use of output redirects

       • Mismatched parenthesis

       To  customize  the syntax highlighting, you can set the environment variables listed in the <u>Variables</u> <u>for</u>
       <u>changing</u> <u>highlighting</u> <u>colors</u> section.

       Fish also provides pre-made color themes you can pick with <u>fish_config</u>. Running just <b>fish_config</b> opens  a
       browser interface, or you can use <b>fish_config</b> <b>theme</b> in the terminal.

       For example, to disable nearly all coloring:

          fish_config theme choose None

       Or, to see all themes, right in your terminal:

          fish_config theme show

   <b>Syntax</b> <b>highlighting</b> <b>variables</b>
       The  colors  used  by  fish  for  syntax highlighting can be configured by changing the values of various
       variables. The value of these variables can be one of the colors accepted by the <u>set_color</u>  command.  The
       modifier switches accepted by <b>set_color</b> like <b>--bold</b>, <b>--dim</b>, <b>--italics</b>, <b>--reverse</b> and <b>--underline</b> are also
       accepted.

       Example: to make errors highlighted and red, use:

          set fish_color_error red --bold

       The following variables are available to change the highlighting colors in fish:
                    ┌───────────────────────────────────┬───────────────────────────────────────┐
                    │ Variable                          │ Meaning                               │
                    ├───────────────────────────────────┼───────────────────────────────────────┤
                    │                                   │ default color                         │
                    │        <b>fish_color_normal</b>          │                                       │
                    ├───────────────────────────────────┼───────────────────────────────────────┤
                    │                                   │ commands like echo                    │
                    │        <b>fish_color_command</b>         │                                       │
                    ├───────────────────────────────────┼───────────────────────────────────────┤
                    │                                   │ keywords like if - this falls back on │
                    │        <b>fish_color_keyword</b>         │ the command color if unset            │
                    ├───────────────────────────────────┼───────────────────────────────────────┤
                    │                                   │ quoted text like <b>"abc"</b>                │
                    │        <b>fish_color_quote</b>           │                                       │
                    ├───────────────────────────────────┼───────────────────────────────────────┤
                    │                                   │ IO redirections like &gt;/dev/null       │
                    │        <b>fish_color_redirection</b>     │                                       │
                    ├───────────────────────────────────┼───────────────────────────────────────┤
                    │                                   │ process separators like <b>;</b> and <b>&amp;</b>       │
                    │        <b>fish_color_end</b>             │                                       │
                    ├───────────────────────────────────┼───────────────────────────────────────┤
                    │                                   │ syntax errors                         │
                    │        <b>fish_color_error</b>           │                                       │
                    ├───────────────────────────────────┼───────────────────────────────────────┤
                    │                                   │ ordinary command parameters           │
                    │        <b>fish_color_param</b>           │                                       │
                    ├───────────────────────────────────┼───────────────────────────────────────┤
                    │                                   │ parameters that are filenames (if the │
                    │        <b>fish_color_valid_path</b>      │ file exists)                          │
                    ├───────────────────────────────────┼───────────────────────────────────────┤
                    │                                   │ options  starting with "-", up to the │
                    │        <b>fish_color_option</b>          │ first "--" parameter                  │
                    ├───────────────────────────────────┼───────────────────────────────────────┤
                    │                                   │ comments like '# important'           │
                    │        <b>fish_color_comment</b>         │                                       │
                    ├───────────────────────────────────┼───────────────────────────────────────┤
                    │                                   │ selected text in vi visual mode       │
                    │        <b>fish_color_selection</b>       │                                       │
                    ├───────────────────────────────────┼───────────────────────────────────────┤
                    │                                   │ parameter expansion operators like  <b>*</b> │
                    │        <b>fish_color_operator</b>        │ and <b>~</b>                                 │
                    ├───────────────────────────────────┼───────────────────────────────────────┤
                    │                                   │ character escapes like <b>\n</b> and <b>\x70</b>    │
                    │        <b>fish_color_escape</b>          │                                       │
                    ├───────────────────────────────────┼───────────────────────────────────────┤
                    │                                   │ autosuggestions (the proposed rest of │
                    │        <b>fish_color_autosuggestion</b>  │ a command)                            │
                    ├───────────────────────────────────┼───────────────────────────────────────┤
                    │                                   │ the  current working directory in the │
                    │        <b>fish_color_cwd</b>             │ default prompt                        │
                    ├───────────────────────────────────┼───────────────────────────────────────┤
                    │                                   │ the current working directory in  the │
                    │        <b>fish_color_cwd_root</b>        │ default prompt for the root user      │
                    ├───────────────────────────────────┼───────────────────────────────────────┤
                    │                                   │ the username in the default prompt    │
                    │        <b>fish_color_user</b>            │                                       │
                    ├───────────────────────────────────┼───────────────────────────────────────┤
                    │                                   │ the hostname in the default prompt    │
                    │        <b>fish_color_host</b>            │                                       │
                    ├───────────────────────────────────┼───────────────────────────────────────┤
                    │                                   │ the  hostname  in  the default prompt │
                    │        <b>fish_color_host_remote</b>     │ for remote sessions (like ssh)        │
                    ├───────────────────────────────────┼───────────────────────────────────────┤
                    │                                   │ the last command's nonzero exit  code │
                    │        <b>fish_color_status</b>          │ in the default prompt                 │
                    ├───────────────────────────────────┼───────────────────────────────────────┤
                    │                                   │ the  '^C'  indicator  on  a  canceled │
                    │        <b>fish_color_cancel</b>          │ command                               │
                    ├───────────────────────────────────┼───────────────────────────────────────┤
                    │                                   │ history search matches  and  selected │
                    │        <b>fish_color_search_match</b>    │ pager items (background only)         │
                    ├───────────────────────────────────┼───────────────────────────────────────┤
                    │                                   │ the  current  position in the history │
                    │        <b>fish_color_history_current</b> │ for commands like <b>dirh</b> and <b>cdh</b>        │
                    └───────────────────────────────────┴───────────────────────────────────────┘

       If a variable isn't set or is empty, fish usually tries <b>$fish_color_normal</b>, except for:

       • <b>$fish_color_keyword</b>, where it tries <b>$fish_color_command</b> first.

       • <b>$fish_color_option</b>, where it tries <b>$fish_color_param</b> first.

       • For <b>$fish_color_valid_path</b>, if that doesn't have a color, but only modifiers,  it  adds  those  to  the
         color  that  would  otherwise be used, like <b>$fish_color_param</b>. But if valid paths have a color, it uses
         that and adds in modifiers from the other color.

   <b>Pager</b> <b>color</b> <b>variables</b>
       fish will sometimes present a list of choices in a table, called the pager.

       Example: to set the background of each pager row, use:

          set fish_pager_color_background --background=white

       To have black text on alternating white and gray backgrounds:

          set fish_pager_color_prefix black
          set fish_pager_color_completion black
          set fish_pager_color_description black
          set fish_pager_color_background --background=white
          set fish_pager_color_secondary_background --background=brwhite

       Variables affecting the pager colors:
              ┌───────────────────────────────────────────────┬───────────────────────────────────────┐
              │ Variable                                      │ Meaning                               │
              ├───────────────────────────────────────────────┼───────────────────────────────────────┤
              │                                               │ the progress bar at the  bottom  left │
              │        <b>fish_pager_color_progress</b>              │ corner                                │
              ├───────────────────────────────────────────────┼───────────────────────────────────────┤
              │                                               │ the background color of a line        │
              │        <b>fish_pager_color_background</b>            │                                       │
              ├───────────────────────────────────────────────┼───────────────────────────────────────┤
              │                                               │ the  prefix  string,  i.e. the string │
              │        <b>fish_pager_color_prefix</b>                │ that is to be completed               │
              ├───────────────────────────────────────────────┼───────────────────────────────────────┤
              │                                               │ the  completion  itself,   i.e.   the │
              │        <b>fish_pager_color_completion</b>            │ proposed rest of the string           │
              ├───────────────────────────────────────────────┼───────────────────────────────────────┤
              │                                               │ the completion description            │
              │        <b>fish_pager_color_description</b>           │                                       │
              ├───────────────────────────────────────────────┼───────────────────────────────────────┤
              │                                               │ background of the selected completion │
              │        <b>fish_pager_color_selected_background</b>   │                                       │
              ├───────────────────────────────────────────────┼───────────────────────────────────────┤
              │                                               │ prefix of the selected completion     │
              │        <b>fish_pager_color_selected_prefix</b>       │                                       │
              ├───────────────────────────────────────────────┼───────────────────────────────────────┤
              │                                               │ suffix of the selected completion     │
              │        <b>fish_pager_color_selected_completion</b>   │                                       │
              ├───────────────────────────────────────────────┼───────────────────────────────────────┤
              │                                               │ description     of    the    selected │
              │        <b>fish_pager_color_selected_description</b>  │ completion                            │
              ├───────────────────────────────────────────────┼───────────────────────────────────────┤
              │                                               │ background of every second unselected │
              │        <b>fish_pager_color_secondary_background</b>  │ completion                            │
              ├───────────────────────────────────────────────┼───────────────────────────────────────┤
              │                                               │ prefix  of  every  second  unselected │
              │        <b>fish_pager_color_secondary_prefix</b>      │ completion                            │
              ├───────────────────────────────────────────────┼───────────────────────────────────────┤
              │                                               │ suffix  of  every  second  unselected │
              │        <b>fish_pager_color_secondary_completion</b>  │ completion                            │
              ├───────────────────────────────────────────────┼───────────────────────────────────────┤
              │                                               │ description    of    every     second │
              │        <b>fish_pager_color_secondary_description</b> │ unselected completion                 │
              └───────────────────────────────────────────────┴───────────────────────────────────────┘

       When  the  secondary or selected variables aren't set or are empty, the normal variables are used, except
       for <b>$fish_pager_color_selected_background</b>, where the  background  of  <b>$fish_color_search_match</b>  is  tried
       first.

   <b>Abbreviations</b>
       To  avoid needless typing, a frequently-run command like <b>git</b> <b>checkout</b> can be abbreviated to <b>gco</b> using the
       <u>abbr</u> command.

          abbr -a gco git checkout

       After entering <b>gco</b> and pressing <b>space</b> or <b>enter</b>, a <b>gco</b> in command position will turn into <b>git</b> <b>checkout</b>  in
       the command line. If you want to use a literal <b>gco</b> sometimes, use <b>ctrl-space</b> [1].

       Abbreviations are a lot more powerful than just replacing literal strings. For example you can make going
       up a number of directories easier with this:

          function multicd
              echo cd (string repeat -n (math (string length -- $argv[1]) - 1) ../)
          end
          abbr --add dotdot --regex '^\.\.+$' --function multicd

       Now, <b>..</b> transforms to <b>cd</b> <b>../</b>, while <b>...</b> turns into <b>cd</b> <b>..<a href="file:/../">/../</a></b> and <b>....</b> expands to <b>cd</b> <b>..<a href="file:/../../">/../../</a></b>.

       The  advantage  over  aliases is that you can see the actual command before using it, add to it or change
       it, and the actual command will be stored in history.

       [1]  Any binding that executes the <b>expand-abbr</b> or <b>execute</b> <u>bind</u> <u>function</u>  will  expand  abbreviations.  By
            default <b>ctrl-space</b> is bound to just inserting a space.

   <b>Programmable</b> <b>prompt</b>
       When  it  is  fish's  turn  to ask for input (like after it started or the command ended), it will show a
       prompt. Often this looks something like:

          you@hostname ~&gt;

       This prompt is determined by running the <u>fish_prompt</u> and <u>fish_right_prompt</u> functions.

       The output of the former is displayed on the left and the latter's  output  on  the  right  side  of  the
       terminal.  For <u>vi</u> <u>mode</u>, the output of <u>fish_mode_prompt</u> will be prepended on the left.

       Fish  ships  with  a  few prompts which you can see with <u>fish_config</u>. If you run just <b>fish_config</b> it will
       open a web interface [2] where you'll be shown the prompts and can pick which one you  want.  <b>fish_config</b>
       <b>prompt</b> <b>show</b> will show you the prompts right in your terminal.

       For  example  <b>fish_config</b>  <b>prompt</b> <b>choose</b> <b>disco</b> will temporarily select the "disco" prompt. If you like it
       and decide to keep it, run <b>fish_config</b> <b>prompt</b> <b>save</b>.

       You can also change these functions yourself by running <b>funced</b> <b>fish_prompt</b> and <b>funcsave</b> <b>fish_prompt</b>  once
       you are happy with the result (or <b>fish_right_prompt</b> if you want to change that).

       [2]  The web interface runs purely locally on your computer and requires python to be installed.

   <b>Configurable</b> <b>greeting</b>
       When it is started interactively, fish tries to run the <u>fish_greeting</u> function. The default fish_greeting
       prints  a  simple  message. You can change its text by changing the <b>$fish_greeting</b> variable, for instance
       using a <u>universal</u> <u>variable</u>:

          set -U fish_greeting

       or you can set it <u>globally</u> in <u>config.fish</u>:

          set -g fish_greeting 'Hey, stranger!'

       or you can script it by changing the function:

          function fish_greeting
              random choice "Hello!" "Hi" "G'day" "Howdy"
          end

       save this in config.fish or <u>a</u> <u>function</u> <u>file</u>. You can also use <u>funced</u> and <u>funcsave</u> to edit it easily.

   <b>Programmable</b> <b>title</b>
       When using most terminals, it is possible to set the text displayed  in  the  titlebar  of  the  terminal
       window.  Fish does this by running the <u>fish_title</u> function. It is executed before and after a command and
       the output is used as a titlebar message.

       The <u>status</u> <u>current-command</u> builtin will always return the name of the job to be put into  the  foreground
       (or <b>fish</b> if control is returning to the shell) when the <u>fish_title</u> function is called. The first argument
       will contain the most recently executed foreground command as a string.

       The  default  title  shows the hostname if connected via ssh, the currently running command (unless it is
       fish) and the current working directory. All of this is shortened to not make the tab too wide.

       Examples:

       To show the last command and working directory in the title:

          function fish_title
              # `prompt_pwd` shortens the title. This helps prevent tabs from becoming very wide.
              echo $argv[1] (prompt_pwd)
              pwd
          end

   <b>Command</b> <b>line</b> <b>editor</b>
       The fish editor features copy and paste, a <u>searchable</u> <u>history</u> and many editor functions that can be bound
       to special keyboard shortcuts.

       Like bash and other shells, fish includes two sets of keyboard shortcuts (or key bindings): one  inspired
       by  the  Emacs  text  editor,  and  one by the vi text editor. The default editing mode is Emacs. You can
       switch to vi mode by running <u>fish_vi_key_bindings</u> and switch back with <u>fish_default_key_bindings</u>. You can
       also make your own key bindings by creating a function and setting the <b>fish_key_bindings</b> variable to  its
       name. For example:

          function fish_hybrid_key_bindings --description \
          "Vi-style bindings that inherit emacs-style bindings in all modes"
              for mode in default insert visual
                  fish_default_key_bindings -M $mode
              end
              fish_vi_key_bindings --no-erase
          end
          set -g fish_key_bindings fish_hybrid_key_bindings

       While  the key bindings included with fish include many of the shortcuts popular from the respective text
       editors, they are not a complete implementation. They include a shortcut to open the current command line
       in your preferred editor (<b>alt-e</b> by default) if you need the full power of your editor.

   <b>Shared</b> <b>bindings</b>
       Some bindings are common across Emacs and vi mode, because they aren't text editing bindings, or  because
       what vi/Vim does for a particular key doesn't make sense for a shell.

       • <b>tab</b>  <u>completes</u>  the  current token. <b>shift-tab</b> completes the current token and starts the pager's search
         mode. <b>tab</b> is the same as <b>ctrl-i</b>.

       • <b>left</b> (<b>←</b>) and <b>right</b> (<b>→</b>) move the cursor left or right by one character. If the cursor is already at  the
         end of the line, and an autosuggestion is available, <b>right</b> (<b>→</b>) accepts the autosuggestion.

       • <b>enter</b>  executes  the current commandline or inserts a newline if it's not complete yet (e.g. a <b>)</b> or <b>end</b>
         is missing).

       • <b>alt-enter</b> inserts a newline at the cursor position. This is useful to  add  a  line  to  a  commandline
         that's already complete.

       • <b>alt-left</b> (<b>←</b>) and <b>alt-right</b> (<b>→</b>) move the cursor one word left or right (to the next space or punctuation
         mark),  or  moves forward/backward in the directory history if the command line is empty. If the cursor
         is already at the end of the line, and an autosuggestion is available, <b>alt-right</b> (<b>→</b>) (or <b>alt-f</b>) accepts
         the first word in the suggestion.

       • <b>ctrl-left</b> (<b>←</b>) and <b>ctrl-right</b> (<b>→</b>) move the cursor one word left or right. These accept one word  of  the
         autosuggestion - the part they'd move over.

       • <b>shift-left</b>  (<b>←</b>)  and  <b>shift-right</b>  (<b>→</b>)  move  the  cursor  one  word left or right, without stopping on
         punctuation. These accept one big word of the autosuggestion.

       • <b>up</b> (<b>↑</b>) and <b>down</b> (<b>↓</b>) (or <b>ctrl-p</b> and <b>ctrl-n</b> for emacs aficionados) search the  command  history  for  the
         previous/next command containing the string that was specified on the commandline before the search was
         started.  If  the  commandline  was  empty when the search started, all commands match. See the <u>history</u>
         section for more information on history searching.

       • <b>alt-up</b> (<b>↑</b>) and <b>alt-down</b> (<b>↓</b>) search the command history for the previous/next token containing the token
         under the cursor before the search was started. If the commandline was not on a token when  the  search
         started, all tokens match. See the <u>history</u> section for more information on history searching.

       • <b>ctrl-c</b> interrupts/kills whatever is running (SIGINT).

       • <b>ctrl-d</b> deletes one character to the right of the cursor. If the command line is empty, <b>ctrl-d</b> will exit
         fish.

       • <b>ctrl-u</b> removes contents from the beginning of line to the cursor (moving it to the <u>killring</u>).

       • <b>ctrl-l</b> clears and repaints the screen.

       • <b>ctrl-w</b>  removes  the previous path component (everything up to the previous "/", ":" or "@") (moving it
         to the <u>Copy</u> <u>and</u> <u>paste</u> <u>(Kill</u> <u>Ring)</u>).

       • <b>ctrl-x</b> copies the current buffer to the system's clipboard, <b>ctrl-v</b> inserts the clipboard contents. (see
         <u>fish_clipboard_copy</u> and <u>fish_clipboard_paste</u>)

       • <b>alt-d</b> or <b>ctrl-delete</b> moves the next word to the <u>Copy</u> <u>and</u> <u>paste</u> <u>(Kill</u> <u>Ring)</u>.

       • <b>alt-d</b> lists the directory history if the command line is empty.

       • <b>alt-delete</b> moves the next argument to the <u>Copy</u> <u>and</u> <u>paste</u> <u>(Kill</u> <u>Ring)</u>.

       • <b>shift-delete</b> removes the current history item or autosuggestion from the command history.

       • <b>alt-h</b> (or <b>f1</b>) shows the manual page for the current command, if one exists.

       • <b>alt-l</b> lists the contents of the current directory, unless the cursor is over a directory  argument,  in
         which case the contents of that directory will be listed.

       • <b>alt-o</b>  opens the file at the cursor in a pager. If the cursor is in command position and the command is
         a script, it will instead open that script in  your  editor.  The  editor  is  chosen  from  the  first
         available of the <b>$VISUAL</b> or <b>$EDITOR</b> variables.

       • <b>alt-p</b> adds the string <b>&amp;|</b> <b>less;</b> to the end of the job under the cursor. The result is that the output of
         the command will be paged.

       • <b>alt-w</b> prints a short description of the command under the cursor.

       • <b>alt-e</b>  edits  the  current  command  line  in  an  external editor. The editor is chosen from the first
         available of the <b>$VISUAL</b> or <b>$EDITOR</b> variables.

       • <b>alt-v</b> Same as <b>alt-e</b>.

       • <b>alt-s</b> Prepends <b>sudo</b> to the current commandline. If the commandline is empty, prepend <b>sudo</b> to  the  last
         commandline.

       • <b>ctrl-space</b>  Inserts  a  space  without  expanding  an  <u>abbreviation</u>.  For vi mode, this only applies to
         insert-mode.

   <b>Emacs</b> <b>mode</b> <b>commands</b>
       To enable emacs mode, use <u>fish_default_key_bindings</u>. This is also the default.

       • <b>home</b> or <b>ctrl-a</b> moves the cursor to the beginning of the line.

       • <b>end</b> or <b>ctrl-e</b> moves to the end of line. If the cursor is already  at  the  end  of  the  line,  and  an
         autosuggestion is available, <b>end</b> or <b>ctrl-e</b> accepts the autosuggestion.

       • <b>ctrl-b</b>,  <b>ctrl-f</b>  move the cursor one character left or right or accept the autosuggestion just like the
         <b>left</b> (<b>←</b>) and <b>right</b> (<b>→</b>) shared bindings (which are available as well).

       • <b>alt-b</b>, <b>alt-f</b> move the cursor one word left or right, or accept one word of the autosuggestion.  If  the
         command line is empty, moves forward/backward in the directory history instead.

       • <b>ctrl-n</b>, <b>ctrl-p</b> move the cursor up/down or through history, like the up and down arrow shared bindings.

       • <b>delete</b> or <b>backspace</b> or <b>ctrl-h</b> removes one character forwards or backwards respectively.

       • <b>alt-backspace</b> removes one word backwards. If supported by the terminal, <b>ctrl-backspace</b> does the same.

       • <b>alt-&lt;</b> moves to the beginning of the commandline, <b>alt-&gt;</b> moves to the end.

       • <b>ctrl-k</b> deletes from the cursor to the end of line (moving it to the <u>Copy</u> <u>and</u> <u>paste</u> <u>(Kill</u> <u>Ring)</u>).

       • <b>escape</b> and <b>ctrl-g</b> cancel the current operation. Immediately after an unambiguous completion this undoes
         it.

       • <b>alt-c</b> capitalizes the current word.

       • <b>alt-u</b> makes the current word uppercase.

       • <b>ctrl-t</b> transposes the last two characters.

       • <b>alt-t</b> transposes the last two words.

       • <b>ctrl-z</b>, <b>ctrl-_</b> (<b>ctrl-/</b> on some terminals) undo the most recent edit of the line.

       • <b>alt-/</b> or <b>ctrl-shift-z</b> reverts the most recent undo.

       • <b>ctrl-r</b>  opens  the  history  in a pager. This will show history entries matching the search, a few at a
         time. Pressing <b>ctrl-r</b> again will search older entries, pressing <b>ctrl-s</b> (that  otherwise  toggles  pager
         search) will go to newer entries. The search bar will always be selected.

       You can change these key bindings using the <u>bind</u> builtin.

   <b>Vi</b> <b>mode</b> <b>commands</b>
       Vi  mode  allows  for the use of vi-like commands at the prompt. Initially, <u>insert</u> <u>mode</u> is active. <b>escape</b>
       enters <u>command</u> <u>mode</u>. The commands available in command, insert and visual mode are  described  below.  Vi
       mode shares <u>some</u> <u>bindings</u> with <u>Emacs</u> <u>mode</u>.

       To  enable  vi  mode, use <u>fish_vi_key_bindings</u>.  It is also possible to add all Emacs mode bindings to vi
       mode by using something like:

          function fish_user_key_bindings
              # Execute this once per mode that emacs bindings should be used in
              fish_default_key_bindings -M insert

              # Then execute the vi-bindings so they take precedence when there's a conflict.
              # Without --no-erase fish_vi_key_bindings will default to
              # resetting all bindings.
              # The argument specifies the initial mode (insert, "default" or visual).
              fish_vi_key_bindings --no-erase insert
          end

       When in vi mode, the <u>fish_mode_prompt</u> function will display a mode indicator to the left of  the  prompt.
       To  disable this feature, override it with an empty function. To display the mode elsewhere (like in your
       right prompt), use the output of the <b>fish_default_mode_prompt</b> function.

       When a binding switches the mode, it will repaint the mode-prompt if it  exists,  and  the  rest  of  the
       prompt  only  if  it  doesn't.  So  if  you  want a mode-indicator in your <b>fish_prompt</b>, you need to erase
       <b>fish_mode_prompt</b>  e.g.  by  adding  an  empty  file  at   <b><a href="file:~/.config/fish/functions/fish_mode_prompt.fish">~/.config/fish/functions/fish_mode_prompt.fish</a></b>.
       (Bindings that change the mode are supposed to call the <u>repaint-mode</u> bind function, see <u>bind</u>)

       The  <b>fish_vi_cursor</b> function will be used to change the cursor's shape depending on the mode in supported
       terminals. The following snippet can be used to manually configure cursors after enabling vi mode:

          # Emulates vim's cursor shape behavior
          # Set the normal and visual mode cursors to a block
          set fish_cursor_default block
          # Set the insert mode cursor to a line
          set fish_cursor_insert line
          # Set the replace mode cursors to an underscore
          set fish_cursor_replace_one underscore
          set fish_cursor_replace underscore
          # Set the external cursor to a line. The external cursor appears when a command is started.
          # The cursor shape takes the value of fish_cursor_default when fish_cursor_external is not specified.
          set fish_cursor_external line
          # The following variable can be used to configure cursor shape in
          # visual mode, but due to fish_cursor_default, is redundant here
          set fish_cursor_visual block

       Additionally, <b>blink</b> can be added after each of the cursor shape parameters to set a  blinking  cursor  in
       the specified shape.

       Fish knows the shapes "block", "line" and "underscore", other values will be ignored.

       If  the  cursor  shape does not appear to be changing after setting the above variables, it's likely your
       terminal emulator does not support the capabilities necessary to do this.

   <b>Command</b> <b>mode</b>
       Command mode is also known as normal mode.

       • <b>h</b> moves the cursor left.

       • <b>l</b> moves the cursor right.

       • <b>k</b> and <b>j</b> search the command history for  the  previous/next  command  containing  the  string  that  was
         specified  on  the  commandline  before  the  search was started. If the commandline was empty when the
         search started, all commands match. See the <u>history</u> section for more information on history  searching.
         In multi-line commands, they move the cursor up and down respectively.

       • <b>i</b> enters <u>insert</u> <u>mode</u> at the current cursor position.

       • <b>I</b> enters <u>insert</u> <u>mode</u> at the beginning of the line.

       • <b>v</b> enters <u>visual</u> <u>mode</u> at the current cursor position.

       • <b>a</b> enters <u>insert</u> <u>mode</u> after the current cursor position.

       • <b>A</b> enters <u>insert</u> <u>mode</u> at the end of the line.

       • <b>o</b> inserts a new line under the current one and enters <u>insert</u> <u>mode</u>

       • <b>O</b> (capital-"o") inserts a new line above the current one and enters <u>insert</u> <u>mode</u>

       • <b>0</b> (zero) moves the cursor to beginning of line (remaining in command mode).

       • <b>d,d</b> deletes the current line and moves it to the <u>Copy</u> <u>and</u> <u>paste</u> <u>(Kill</u> <u>Ring)</u>.

       • <b>D</b> deletes text after the current cursor position and moves it to the <u>Copy</u> <u>and</u> <u>paste</u> <u>(Kill</u> <u>Ring)</u>.

       • <b>p</b> pastes text from the <u>Copy</u> <u>and</u> <u>paste</u> <u>(Kill</u> <u>Ring)</u>.

       • <b>u</b> undoes the most recent edit of the command line.

       • <b>ctrl-r</b> redoes the most recent edit.

       • <b>[</b>  and  <b>]</b>  search the command history for the previous/next token containing the token under the cursor
         before the search was started. See the <u>history</u> section for more information on history searching.

       • <b>/</b> opens the history in a pager. This will show history entries matching the search, a few  at  a  time.
         Pressing it again will search older entries, pressing <b>ctrl-s</b> (that otherwise toggles pager search) will
         go to newer entries. The search bar will always be selected.

       • <b>backspace</b> moves the cursor left.

       • <b>g</b> / <b>G</b> moves the cursor to the beginning/end of the commandline, respectively.

       • <b>:,q</b> exits fish.

   <b>Insert</b> <b>mode</b>
       • <b>escape</b> enters <u>command</u> <u>mode</u>.

       • <b>backspace</b> removes one character to the left.

       • <b>ctrl-n</b> accepts the autosuggestion.

   <b>Visual</b> <b>mode</b>
       • <b>left</b> <b>(``←`</b>) and <b>right`(``→`</b>) extend the selection backward/forward by one character.

       • <b>h</b> moves the cursor left.

       • <b>l</b> moves the cursor right.

       • <b>k</b> moves the cursor up.

       • <b>j</b> moves the cursor down.

       • <b>b</b> and <b>w</b> extend the selection backward/forward by one word.

       • <b>d</b> and <b>x</b> move the selection to the <u>Copy</u> <u>and</u> <u>paste</u> <u>(Kill</u> <u>Ring)</u> and enter <u>command</u> <u>mode</u>.

       • <b>escape</b> and <b>ctrl-c</b> enter <u>command</u> <u>mode</u>.

       • <b>c</b> and <b>s</b> remove the selection and switch to insert mode.

       • <b>X</b> moves the entire line to the <u>Copy</u> <u>and</u> <u>paste</u> <u>(Kill</u> <u>Ring)</u>, and enters <u>command</u> <u>mode</u>.

       • <b>y</b> copies the selection to the <u>Copy</u> <u>and</u> <u>paste</u> <u>(Kill</u> <u>Ring)</u>, and enters <u>command</u> <u>mode</u>.

       • <b>~</b> toggles the case (upper/lower) on the selection, and enters <u>command</u> <u>mode</u>.

       • <b>",*,y</b> copies the selection to the clipboard, and enters <u>command</u> <u>mode</u>.

   <b>Custom</b> <b>bindings</b>
       In addition to the standard bindings listed here, you can also define your own with <u>bind</u>:

          # Just clear the commandline on control-c
          bind ctrl-c 'commandline -r ""'

       Put <b>bind</b> statements into <u>config.fish</u> or a function called <b>fish_user_key_bindings</b>.

       If  you  change  your  mind  on  a binding and want to go back to fish's default, you can simply erase it
       again:

          bind --erase ctrl-c

       Fish remembers its preset bindings and so it will take effect  again.  This  saves  you  from  having  to
       remember what it was before and add it again yourself.

       If  you  use  <u>vi</u> <u>bindings</u>, note that <b>bind</b> will by default bind keys in <u>command</u> <u>mode</u>. To bind something in
       <u>insert</u> <u>mode</u>:

          bind --mode insert ctrl-c 'commandline -r ""'

   <b>Key</b> <b>sequences</b>
       To find out the name of a key, you can use <u>fish_key_reader</u>.

          &gt; fish_key_reader # Press Alt + right-arrow
          Press a key:
          bind alt-right 'do something'

       Note that the historical way the terminal encodes keys and sends them to the application (fish,  in  this
       case)  makes  a lot of combinations indistinguishable or unbindable. In the usual encoding, <b>ctrl-i</b> <u>is</u> <u>the</u>
       <u>same</u> as the tab key, and shift cannot be detected when ctrl is also pressed.

       There are more powerful encoding schemes, and fish tries to tell the terminal to turn them on, but  there
       are  still many terminals that do not support them. When <b>fish_key_reader</b> prints the same sequence for two
       different keys, then that is because your terminal sends the same sequence  for  them,  and  there  isn't
       anything  fish  can  do  about  it. It is our hope that these schemes will become more widespread, making
       input more flexible.

       In the historical scheme, <b>escape</b> is the same thing as <b>alt</b> in a terminal. To distinguish between  pressing
       <b>escape</b>  and  then  another key, and pressing <b>alt</b> and that key (or an escape sequence the key sends), fish
       waits  for  a  certain  time  after  seeing  an  escape  character.  This   is   configurable   via   the
       <u>fish_escape_delay_ms</u> variable.

       If  you want to be able to press <b>escape</b> and then a character and have it count as <b>alt</b>+that character, set
       it to a higher value, e.g.:

          set -g fish_escape_delay_ms 100

       Similarly, to disambiguate <u>other</u> keypresses where you've bound a subsequence and a longer sequence,  fish
       has <u>fish_sequence_key_delay_ms</u>:

          # This binds the sequence j,k to switch to normal mode in vi mode.
          # If you kept it like that, every time you press "j",
          # fish would wait for a "k" or other key to disambiguate
          bind -M insert -m default j,k cancel repaint-mode

          # After setting this, fish only waits 200ms for the "k",
          # or decides to treat the "j" as a separate sequence, inserting it.
          set -g fish_sequence_key_delay_ms 200

   <b>Copy</b> <b>and</b> <b>paste</b> <b>(Kill</b> <b>Ring)</b>
       Fish  uses an Emacs-style kill ring for copy and paste functionality. For example, use <b>ctrl-k</b> (<u>kill-line</u>)
       to cut from the current cursor position to the end of the line. The string that is cut (a.k.a. killed  in
       emacs-ese)  is  inserted  into  a list of kills, called the kill ring. To paste the latest value from the
       kill ring (emacs calls this "yanking") use <b>ctrl-y</b> (the <b>yank</b> input function).  After  pasting,  use  <b>alt-y</b>
       (<b>yank-pop</b>) to rotate to the previous kill.

       Copy  and  paste  from  outside  are  also  supported,  both  via  the  <b>ctrl-x</b>  /  <b>ctrl-v</b>  bindings  (the
       <b>fish_clipboard_copy</b> and <b>fish_clipboard_paste</b> functions [3]) and via the terminal's  paste  function,  for
       which  fish  enables  "Bracketed  Paste  Mode",  so  it  can tell a paste from manually entered text.  In
       addition, when pasting inside single quotes, pasted  single  quotes  and  backslashes  are  automatically
       escaped  so  that  the result can be used as a single token simply by closing the quote after.  Kill ring
       entries are stored in <b>fish_killring</b> variable.

       The commands <b>begin-selection</b> and <b>end-selection</b> (unbound by default; used for selection in vi visual mode)
       control text selection together with cursor movement commands that extend  the  current  selection.   The
       variable  <u>fish_cursor_selection_mode</u>  can  be  used  to  configure  if  that selection should include the
       character under the cursor (<b>inclusive</b>) or not (<b>exclusive</b>). The default is  <b>exclusive</b>,  which  works  well
       with  any  cursor  shape. For vi mode, and particularly for the <b>block</b> or <b>underscore</b> cursor shapes you may
       prefer <b>inclusive</b>.

       [3]  These rely on external  tools.  Currently  xsel,  xclip,  wl-copy/wl-paste  and  pbcopy/pbpaste  are
            supported.

   <b>Multiline</b> <b>editing</b>
       The  fish commandline editor can be used to work on commands that are several lines long. There are three
       ways to make a command span more than a single line:

       • Pressing the <b>enter</b> key while a block of commands is unclosed, such as when one or more  block  commands
         such as <b>for</b>, <b>begin</b> or <b>if</b> do not have a corresponding <u>end</u> command.

       • Pressing <b>alt-enter</b> instead of pressing the <b>enter</b> key.

       • By inserting a backslash (<b>\</b>) character before pressing the <b>enter</b> key, escaping the newline.

       The  fish  commandline  editor  works exactly the same in single line mode and in multiline mode. To move
       between lines use the left and right arrow keys and other such keyboard shortcuts.

   <b>Searchable</b> <b>command</b> <b>history</b>
       After a command has been executed, it is remembered in the history list. Any duplicate history items  are
       automatically  removed.  By  pressing  the up and down keys, you can search forwards and backwards in the
       history. If the current command line is not empty when starting  a  history  search,  only  the  commands
       containing the string entered into the command line are shown.

       By pressing <b>alt-up</b> (<b>↑</b>) and <b>alt-down</b> (<b>↓</b>), a history search is also performed, but instead of searching for
       a  complete  commandline,  each commandline is broken into separate elements just like it would be before
       execution, and the history is searched for an element matching that under the cursor.

       For more complicated searches, you can press <b>ctrl-r</b> to open  a  pager  that  allows  you  to  search  the
       history.  It  shows  a  limited number of entries in one page, press <b>ctrl-r</b> [4] again to move to the next
       page and <b>ctrl-s</b> [5] to move to the previous page. You can change the text to refine your search.

       History searches are case-insensitive unless the search string contains an uppercase character.  You  can
       stop a search to edit your search string by pressing <b>escape</b> or <b>pagedown</b>.

       Prefixing  the commandline with a space will prevent the entire line from being stored in the history. It
       will still be available for recall until the next command is executed, but will not be  stored  on  disk.
       This is to allow you to fix misspellings and such.

       The    command    history    is    stored    in    the    file    <b><a href="file:~/.local/share/fish/fish_history">~/.local/share/fish/fish_history</a></b>    (or
       <b>$XDG_DATA_HOME/fish/fish_history</b> if  that  variable  is  set)  by  default.  However,  you  can  set  the
       <b>fish_history</b>   environment  variable  to  change  the  name  of  the  history  session  (resulting  in  a
       <b>&lt;session&gt;_history</b> file); both before starting the shell and while the shell is running.

       See the <u>history</u> command for other manipulations.

       Examples:

       To search for previous entries containing the word 'make', type <b>make</b> in the console and press the up key.

       If the commandline reads <b>cd</b> <b>m</b>, place the cursor over the <b>m</b> character and press <b>alt-up</b> (<b>↑</b>) to  search  for
       previously typed words containing 'm'.

       [4]  Or another binding that triggers the <b>history-pager</b> input function. See <u>bind</u> for a list.

       [5]  Or another binding that triggers the <b>pager-toggle-search</b> input function.

   <b>Private</b> <b>mode</b>
       Fish  has  a  private  mode, in which command history will not be written to the history file on disk. To
       enable it, either set <b>$fish_private_mode</b> to a non-empty value, or launch with <b>fish</b> <b>--private</b> (or <b>fish</b>  <b>-P</b>
       for short).

       If  you  launch  fish  with  <b>-P</b>,  it both hides old history and prevents writing history to disk. This is
       useful to avoid leaking personal information (e.g.  for  screencasts)  or  when  dealing  with  sensitive
       information.

       You  can  query the variable <b>fish_private_mode</b> (<b>if</b> <b>test</b> <b>-n</b> <b>"$fish_private_mode"</b> <b>...</b>) if you would like to
       respect the user's wish for privacy and alter the behavior of your own fish scripts.

   <b>Navigating</b> <b>directories</b>
       Navigating directories is usually done with the <u>cd</u> command, but fish offers  some  advanced  features  as
       well.

       The  current  working  directory  can  be  displayed  with the <u>pwd</u> command, or the <b>$PWD</b> <u>special</u> <u>variable</u>.
       Usually your prompt already does this.

   <b>Directory</b> <b>history</b>
       Fish automatically keeps a trail of the recent visited directories with <u>cd</u> by storing this history in the
       <b>dirprev</b> and <b>dirnext</b> variables.

       Several commands are provided to interact with this directory history:

       • <u>dirh</u> prints the history

       • <u>cdh</u> displays a prompt to quickly navigate the history

       • <u>prevd</u> moves backward through the history. It is bound to <b>alt-left</b> (<b>←</b>)

       • <u>nextd</u> moves forward through the history. It is bound to <b>alt-right</b> (<b>→</b>)

   <b>Directory</b> <b>stack</b>
       Another set of commands, usually also available in other shells like bash, deal with the directory stack.
       Stack handling is not automatic and needs explicit calls of the following commands:

       • <u>dirs</u> prints the stack

       • <u>pushd</u> adds a directory on top of the stack and makes it the current working directory

       • <u>popd</u> removes the directory on top of the stack and changes the current working directory

   <b>The</b> <b>fish</b> <b>language</b>
       This document is a comprehensive overview of fish's scripting language.

       For interactive features see <u>Interactive</u> <u>use</u>.

   <b>Syntax</b> <b>overview</b>
       Shells like fish are used by giving them commands. A command is executed  by  writing  the  name  of  the
       command followed by any arguments. For example:

          echo hello world

       <u>echo</u> command writes its arguments to the screen. In this example the output is <b>hello</b> <b>world</b>.

       Everything  in  fish is done with commands. There are commands for repeating other commands, commands for
       assigning variables, commands for treating a group of commands as a single command,  etc.  All  of  these
       commands follow the same basic syntax.

       Every program on your computer can be used as a command in fish. If the program file is located in one of
       the  <u>PATH</u> directories, you can just type the name of the program to use it. Otherwise the whole filename,
       including the directory (like <b>/home/me/code/checkers/checkers</b> or <b>../checkers</b>) is required.

       Here is a list of some useful commands:

       • <u>cd</u>: Change the current directory

       • <b>ls</b>: List files and directories

       • <b>man</b>: Display a manual page - try <b>man</b> <b>ls</b> to get help on your "ls" command, or <b>man</b> <b>mv</b> to get  information
         about "mv".

       • <b>mv</b>: Move (rename) files

       • <b>cp</b>: Copy files

       • <u>open</u>: Open files with the default application associated with each filetype

       • <b>less</b>: Display the contents of files

       Commands and arguments are separated by the space character <b>'</b> <b>'</b>. Every command ends with either a newline
       (by  pressing  the  return  key)  or  a semicolon <b>;</b>. Multiple commands can be written on the same line by
       separating them with semicolons.

       A switch is a very common special type of argument. Switches almost always start with one or more hyphens
       <b>-</b> and alter the way a command operates. For example, the <b>ls</b> command usually lists the names of all  files
       and  directories  in the current working directory. By using the <b>-l</b> switch, the behavior of <b>ls</b> is changed
       to not only display the filename, but also the size, permissions, owner, and modification  time  of  each
       file.

       Switches  differ  between  commands and are usually documented on a command's manual page. There are some
       switches, however, that are common to most commands. For example, <b>--help</b>  will  usually  display  a  help
       text, <b>--version</b> will usually display the command version, and <b>-i</b> will often turn on interactive prompting
       before taking action. Try <b>man</b> <b>your-command-here</b> to get information on your command's switches.

       So  the basic idea of fish is the same as with other unix shells: It gets a commandline, runs <u>expansions</u>,
       and the result is then run as a command.

   <b>Terminology</b>
       Here we define some of the terms used on this page and throughout the rest of the fish documentation:

       • <b>Argument</b>: A parameter given to a command. In <b>echo</b> <b>foo</b>, the "foo" is an argument.

       • <b>Builtin</b>: A command that is implemented by the shell. Builtins are so closely tied to the  operation  of
         the  shell  that  it is impossible to implement them as external commands. In <b>echo</b> <b>foo</b>, the "echo" is a
         builtin.

       • <b>Command</b>: A program that the shell can run, or more specifically an external program that the shell runs
         in another process. External commands are provided on your system, as executable files. In <b>echo</b> <b>foo</b> the
         "echo" is a builtin command, in <b>command</b> <b>echo</b> <b>foo</b> the "echo" is an external command, provided by a  file
         like /bin/echo.

       • <b>Function</b>:  A block of commands that can be called as if they were a single command. By using functions,
         it is possible to string together multiple simple commands into one more advanced command.

       • <b>Job</b>: A running pipeline or command.

       • <b>Pipeline</b>: A set of commands strung together so that the output of one command is the input of the  next
         command. <b>echo</b> <b>foo</b> <b>|</b> <b>grep</b> <b>foo</b> is a pipeline.

       • <b>Redirection</b>: An operation that changes one of the input or output streams associated with a job.

       • <b>Switch</b>  or  <b>Option</b>:  A  special kind of argument that alters the behavior of a command. A switch almost
         always begins with one or two hyphens. In <b>echo</b> <b>-n</b> <b>foo</b> the "-n" is an option.

   <b>Quotes</b>
       Sometimes you want to give a command an argument that contains characters special to fish, like spaces or
       <b>$</b> or <b>*</b>. To do that, you can use quotes:

          rm "my file.txt"

       to remove a file called <b>my</b> <b>file.txt</b> instead of trying to remove two files, <b>my</b> and <b>file.txt</b>.

       Fish understands two kinds of quotes: Single (<b>'</b>) and double (<b>"</b>), and both work slightly differently.

       Between single quotes, fish performs no expansions. Between double quotes, fish  only  performs  <u>variable</u>
       <u>expansion</u>  and  <u>command</u>  <u>substitution</u>  in  the  <b>$(command)</b>.  No  other kind of expansion (including <u>brace</u>
       <u>expansion</u> or parameter expansion) is performed, and escape  sequences  (for  example,  <b>\n</b>)  are  ignored.
       Within quotes, whitespace is not used to separate arguments, allowing quoted arguments to contain spaces.

       The  only meaningful escape sequences in single quotes are <b>\'</b>, which escapes a single quote and <b>\\</b>, which
       escapes the backslash symbol. The only meaningful escapes in double quotes are <b>\"</b>, which escapes a double
       quote, <b>\$</b>, which escapes a dollar character, <b>\</b> followed by a newline, which deletes the backslash and the
       newline, and <b>\\</b>, which escapes the backslash symbol.

       Single quotes have no special meaning within double quotes and vice versa.

       More examples:

          grep 'enabled)$' foo.txt

       searches for lines ending in <b>enabled)</b> in <b>foo.txt</b> (the <b>$</b> is special to <b>grep</b>: it matches  the  end  of  the
       line).

          apt install "postgres-*"

       installs  all  packages  with  a  name  starting with "postgres-", instead of looking through the current
       directory for files named "postgres-something".

   <b>Escaping</b> <b>Characters</b>
       Some characters cannot be written directly on the command line. For these  characters,  so-called  escape
       sequences are provided. These are:

       • <b>\a</b> represents the alert character.

       • <b>\e</b> represents the escape character.

       • <b>\f</b> represents the form feed character.

       • <b>\n</b> represents a newline character.

       • <b>\r</b> represents the carriage return character.

       • <b>\t</b> represents the tab character.

       • <b>\v</b> represents the vertical tab character.

       • <b>\xHH</b> or <b>\XHH</b>, where <b>HH</b> is a hexadecimal number, represents a byte of data with the specified value. For
         example,  <b>\x9</b>  is  the  tab character. If you are using a multibyte encoding, this can be used to enter
         invalid strings. Typically fish is run with the ASCII or UTF-8 encoding, so anything up to <b>\X7f</b>  is  an
         ASCII character.

       • <b>\ooo</b>,  where  <b>ooo</b>  is  an  octal  number,  represents the ASCII character with the specified value. For
         example, <b>\011</b> is the tab character. The highest allowed value is <b>\177</b>.

       • <b>\uXXXX</b>, where <b>XXXX</b> is a hexadecimal number, represents the 16-bit Unicode character with the  specified
         value. For example, <b>\u9</b> is the tab character.

       • <b>\UXXXXXXXX</b>,  where  <b>XXXXXXXX</b>  is a hexadecimal number, represents the 32-bit Unicode character with the
         specified value. For example, <b>\U9</b> is the tab character. The highest allowed value is U10FFFF.

       • <b>\cX</b>, where <b>X</b> is a letter of the alphabet, represents the control sequence  generated  by  pressing  the
         control key and the specified letter. For example, <b>\ci</b> is the tab character

       Some  characters  have special meaning to the shell. For example, an apostrophe <b>'</b> disables expansion (see
       <u>Quotes</u>). To tell the shell to treat these  characters  literally,  escape  them  with  a  backslash.  For
       example, the command:

          echo \'hello world\'

       outputs <b>'hello</b> <b>world'</b> (including the apostrophes), while the command:

          echo 'hello world'

       outputs  <b>hello</b>  <b>world</b>  (without  the apostrophes). In the former case the shell treats the apostrophes as
       literal <b>'</b> characters, while in the latter case it treats them as special expansion modifiers.

       The special characters and their escape sequences are:

       • <b>\</b>  (backslash space) escapes the space character. This keeps the shell from splitting arguments on  the
         escaped space.

       • <b>\$</b> escapes the dollar character.

       • <b>\\</b> escapes the backslash character.

       • <b>\*</b> escapes the star character.

       • <b>\?</b>  escapes  the  question  mark  character  (this is not necessary if the <b>qmark-noglob</b> <u>feature</u> <u>flag</u> is
         enabled).

       • <b>\~</b> escapes the tilde character.

       • <b>\#</b> escapes the hash character.

       • <b>\(</b> escapes the left parenthesis character.

       • <b>\)</b> escapes the right parenthesis character.

       • <b>\{</b> escapes the left curly bracket character.

       • <b>\}</b> escapes the right curly bracket character.

       • <b>\[</b> escapes the left bracket character.

       • <b>\]</b> escapes the right bracket character.

       • <b>\&lt;</b> escapes the less than character.

       • <b>\&gt;</b> escapes the more than character.

       • <b>\&amp;</b> escapes the ampersand character.

       • <b>\|</b> escapes the vertical bar character.

       • <b>\;</b> escapes the semicolon character.

       • <b>\"</b> escapes the quote character.

       • <b>\'</b> escapes the apostrophe character.

       As a special case, <b>\</b> immediately followed by a literal new line is a "continuation"  and  tells  fish  to
       ignore  the line break and resume input at the start of the next line (without introducing any whitespace
       or terminating a token).

   <b>Input/Output</b> <b>Redirection</b>
       Most programs use three input/output (I/O) streams:

       • Standard input (stdin) for reading. Defaults to reading from the keyboard.

       • Standard output (stdout) for writing output. Defaults to writing to the screen.

       • Standard error (stderr) for writing errors and warnings. Defaults to writing to the screen.

       Each stream has a number called the file descriptor (FD): 0 for stdin, 1 for stdout, and 2 for stderr.

       The destination of a stream can be changed using something called <u>redirection</u>. For example, <b>echo</b> <b>hello</b>  <b>&gt;</b>
       <b>output.txt</b>, redirects the standard output of the <b>echo</b> command to a text file.

       • To read standard input from a file, use <b>&lt;SOURCE_FILE</b>.

       • To read standard input from a file or /dev/null if it can't be read, use <b>&lt;?SOURCE_FILE</b>.

       • To write standard output to a file, use <b>&gt;DESTINATION</b>.

       • To write standard error to a file, use <b>2&gt;DESTINATION</b>. [1]

       • To append standard output to a file, use <b>&gt;&gt;DESTINATION_FILE</b>.

       • To append standard error to a file, use <b>2&gt;&gt;DESTINATION_FILE</b>.

       • To  not  overwrite  ("clobber") an existing file, use <b>&gt;?DESTINATION</b> or <b>2&gt;?DESTINATION</b>. This is known as
         the "noclobber" redirection.

       <b>DESTINATION</b> can be one of the following:

       • A filename to write the output to. Often <b>&gt;/dev/null</b> to silence output by  writing  it  to  the  special
         "sinkhole" file.

       • An  ampersand  (<b>&amp;</b>)  followed  by  the number of another file descriptor like <b>&amp;2</b> for standard error. The
         output will be written to the destination descriptor.

       • An ampersand followed by a minus sign (<b>&amp;-</b>). The file descriptor will be closed. Note:  This  may  cause
         the program to fail because its writes will be unsuccessful.

       As  a  convenience,  the  redirection  <b>&amp;&gt;</b>  can  be  used  to  direct  both  stdout and stderr to the same
       destination. For example, <b>echo</b> <b>hello</b> <b>&amp;&gt;</b> <b>all_output.txt</b> redirects both  stdout  and  stderr  to  the  file
       <b>all_output.txt</b>. This is equivalent to <b>echo</b> <b>hello</b> <b>&gt;</b> <b>all_output.txt</b> <b>2&gt;&amp;1</b>.

       Any  arbitrary  file  descriptor  can  be  used in a redirection by prefixing the redirection with the FD
       number.

       • To redirect the input of descriptor N, use <b>N&lt;DESTINATION</b>.

       • To redirect the output of descriptor N, use <b>N&gt;DESTINATION</b>.

       • To append the output of descriptor N to a file, use <b>N&gt;&gt;DESTINATION_FILE</b>.

       File descriptors cannot be used with a <b>&lt;?</b> input redirection, only a regular <b>&lt;</b> one.

       For example:

          # Write `foo`'s standard error (file descriptor 2)
          # to a file called "output.stderr":
          foo 2&gt; output.stderr

          # if $num doesn't contain a number,
          # this test will be false and print an error,
          # so by ignoring the error we can be sure that we're dealing
          # with a number in the "if" block:
          if test "$num" -gt 2 2&gt;/dev/null
              # do things with $num as a number greater than 2
          else
              # do things if $num is &lt;= 2 or not a number
          end

          # Save `make`s output in a file:
          make &amp;&gt;/log

          # Redirections stack and can be used with blocks:
          begin
              echo stdout
              echo stderr &gt;&amp;2 # &lt;- this goes to stderr!
          end &gt;/dev/null # ignore stdout, so this prints "stderr"

          # print all lines that include "foo" from myfile, or nothing if it doesn't exist.
          string match '*foo*' &lt;?myfile

       It is an error to redirect a builtin, function, or block to a file descriptor above 2.  However  this  is
       supported for external commands.

       [1]  Previous  versions  of  fish  also  allowed  specifying  this as <b>^DESTINATION</b>, but that made another
            character special so it was deprecated and removed. See <u>feature</u> <u>flags</u>.

   <b>Piping</b>
       Another way to redirect streams is a <u>pipe</u>. A pipe connects streams with each other. Usually the  standard
       output  of  one  command  is  connected  with  the  standard input of another. This is done by separating
       commands with the pipe character <b>|</b>. For example:

          cat foo.txt | head

       The command <b>cat</b> <b>foo.txt</b> sends the contents of <b>foo.txt</b> to stdout. This output is provided as input for the
       <b>head</b> program, which prints the first 10 lines of its input.

       It is possible to pipe a different output file descriptor by prepending its  FD  number  and  the  output
       redirect symbol to the pipe. For example:

          make fish 2&gt;| less

       will attempt to build <b>fish</b>, and any errors will be shown using the <b>less</b> pager. [2]

       As  a  convenience,  the  pipe <b>&amp;|</b> redirects both stdout and stderr to the same process. This is different
       from bash, which uses <b>|&amp;</b>.

       [2]  A "pager" here is a program that takes output and "paginates" it. <b>less</b> doesn't  just  do  pages,  it
            allows arbitrary scrolling (even back!).

   <b>Combining</b> <b>pipes</b> <b>and</b> <b>redirections</b>
       It  is  possible to use multiple redirections and a pipe at the same time. In that case, they are read in
       this order:

       1. First the pipe is set up.

       2. Then the redirections are evaluated from left-to-right.

       This is important when any redirections reference other file descriptors with the <b>&amp;N</b> syntax. When you say
       <b>&gt;&amp;2</b>, that will redirect stdout to where stderr is pointing to <u>at</u> <u>that</u> <u>time</u>.

       Consider this helper function:

          # Just make a function that prints something to stdout and stderr
          function print
              echo out
              echo err &gt;&amp;2
          end

       Now let's see a few cases:

          # Redirect both stderr and stdout to less
          print 2&gt;&amp;1 | less
          # or
          print &amp;| less

          # Show the "out" on stderr, silence the "err"
          print &gt;&amp;2 2&gt;/dev/null

          # Silence both
          print &gt;/dev/null 2&gt;&amp;1

   <b>Job</b> <b>control</b>
       When you start a job in fish, fish itself will pause, and give control of the  terminal  to  the  program
       just  started.  Sometimes,  you  want  to  continue  using  the  commandline, and have the job run in the
       background. To create a background job, append an <b>&amp;</b> (ampersand) to your command. This will tell  fish  to
       run  the  job  in  the  background.  Background  jobs  are  very useful when running programs that have a
       graphical user interface.

       Example:

          emacs &amp;

       will start the emacs text editor in the background. <u>fg</u> can be used to bring it into the foreground  again
       when needed.

       Most  programs allow you to suspend the program's execution and return control to fish by pressing <b>ctrl-z</b>
       (also referred to as <b>^Z</b>). Once back at the fish commandline, you can start other programs and do anything
       you want. If you then want you can go back to the suspended command by using the <u>fg</u> (foreground) command.

       If you instead want to put a suspended job into the background, use the <u>bg</u> command.

       To get a listing of all currently started jobs, use the <u>jobs</u> command.  These listed jobs can  be  removed
       with the <u>disown</u> command.

       At  the  moment,  functions  cannot  be  started  in  the background. Functions that are stopped and then
       restarted in the background using the <u>bg</u> command will not execute correctly.

       If the <b>&amp;</b> character is followed by a  non-separating  character,  it  is  not  interpreted  as  background
       operator. Separating characters are whitespace and the characters <b>;&lt;&gt;&amp;|</b>.

   <b>Functions</b>
       Functions  are  programs  written  in  the  fish  syntax.  They group together various commands and their
       arguments using a single name.

       For example, here's a simple function to list directories:

          function ll
              ls -l $argv
          end

       The first line tells fish to define a function by the name of <b>ll</b>, so it can be used by simply writing  <b>ll</b>
       on  the  commandline. The second line tells fish that the command <b>ls</b> <b>-l</b> <b>$argv</b> should be called when <b>ll</b> is
       invoked. <u>$argv</u> is a <u>list</u> <u>variable</u>, which always contains all arguments  sent  to  the  function.  In  the
       example  above,  these  are  simply  passed  on  to  the  <b>ls</b>  command. The <b>end</b> on the third line ends the
       definition.

       Calling this as <b>ll</b> <b><a href="file:/tmp/">/tmp/</a></b> will end up running <b>ls</b> <b>-l</b> <b><a href="file:/tmp/">/tmp/</a></b>, which will list the contents of /tmp.

       This is a kind of function known as an <u>alias</u>.

       Fish's prompt is also defined in a function, called <u>fish_prompt</u>. It is run when the prompt is about to be
       displayed and its output forms the prompt:

          function fish_prompt
              # A simple prompt. Displays the current directory
              # (which fish stores in the $PWD variable)
              # and then a user symbol - a '►' for a normal user and a '#' for root.
              set -l user_char '►'
              if fish_is_root_user
                  set user_char '#'
              end

              echo (set_color yellow)$PWD (set_color purple)$user_char
          end

       To edit a function, you can use <u>funced</u>, and to save a function <u>funcsave</u>. This will store it in a function
       file that fish will <u>autoload</u> when needed.

       The <u>functions</u> builtin can show a function's current  definition  (and  <u>type</u>  will  also  do  if  given  a
       function).

       For more information on functions, see the documentation for the <u>function</u> builtin.

   <b>Defining</b> <b>aliases</b>
       One  of  the  most  common  uses  for  functions is to slightly alter the behavior of an already existing
       command. For example, one might want to redefine the <b>ls</b> command to display colors. The switch for turning
       on colors on GNU systems is <b>--color=auto</b>. An alias around <b>ls</b> might look like this:

          function ls
              command ls --color=auto $argv
          end

       There are a few important things that need to be noted about aliases:

       • Always take care to add the <u>$argv</u> variable to the list of parameters to the wrapped command. This makes
         sure that if the user specifies any additional parameters to the function, they are passed  on  to  the
         underlying command.

       • If  the alias has the same name as the aliased command, you need to prefix the call to the program with
         <b>command</b> to tell fish that the function should not call itself, but rather a command with the same name.
         If you forget to do so, the function would call itself until the end of time.  Usually  fish  is  smart
         enough to figure this out and will refrain from doing so (which is hopefully in your interest).

       To  easily  create a function of this form, you can use the <u>alias</u> command. Unlike other shells, this just
       makes functions - fish has no separate concept of an "alias", we just use the word for a simple  wrapping
       function like this. <u>alias</u> immediately creates a function. Consider using <b>alias</b> <b>--save</b> or <u>funcsave</u> to save
       the created function into an autoload file instead of recreating the alias each time.

       For an alternative, try <u>abbreviations</u>. These are words that are expanded while you type, instead of being
       actual functions inside the shell.

   <b>Autoloading</b> <b>functions</b>
       Functions  can  be  defined  on  the  commandline  or  in  a  configuration  file,  but  they can also be
       automatically loaded. This has some advantages:

       • An autoloaded function becomes available automatically to all running shells.

       • If the function definition is changed,  all  running  shells  will  automatically  reload  the  altered
         version, after a while.

       • Startup time and memory usage is improved, etc.

       When  fish  needs  to  load  a  function,  it  searches  through  any  directories  in  the <u>list</u> <u>variable</u>
       <b>$fish_function_path</b> for a file with a name consisting of the name of the function plus the  suffix  <b>.fish</b>
       and loads the first it finds.

       For  example  if  you  try  to  execute  something called <b>banana</b>, fish will go through all directories in
       $fish_function_path looking for a file called <b>banana.fish</b> and load the first one it finds.

       By default <b>$fish_function_path</b> contains the following:

       • A directory for users to keep their own functions, usually <b><a href="file:~/.config/fish/functions">~/.config/fish/functions</a></b> (controlled by  the
         <b>XDG_CONFIG_HOME</b> environment variable).

       • A   directory  for  functions  for  all  users  on  the  system,  usually  <b>/etc/fish/functions</b>  (really
         <b>$__fish_sysconfdir/functions</b>).

       • Directories for other software to  put  their  own  functions.  These  are  in  the  directories  under
         <b>$__fish_user_data_dir</b>   (usually  <b><a href="file:~/.local/share/fish">~/.local/share/fish</a></b>,  controlled  by  the  <b>XDG_DATA_HOME</b>  environment
         variable)   and   in   the   <b>XDG_DATA_DIRS</b>   environment   variable,   in   a    subdirectory    called
         <b>fish/vendor_functions.d</b>.      The      default      value      for     <b>XDG_DATA_DIRS</b>     is     usually
         <b>/usr/share/fish/vendor_functions.d</b> and <b>/usr/local/share/fish/vendor_functions.d</b>.

       • The  functions  shipped   with   fish,   usually   installed   in   <b>/usr/share/fish/functions</b>   (really
         <b>$__fish_data_dir/functions</b>).

       If you are unsure, your functions probably belong in <b><a href="file:~/.config/fish/functions">~/.config/fish/functions</a></b>.

       As  we've explained, autoload files are loaded <u>by</u> <u>name</u>, so, while you can put multiple functions into one
       file, the file will only be loaded automatically once you try to execute the one that shares the name.

       Autoloading also won't work for <u>event</u> <u>handlers</u>, since fish cannot know that a function is supposed to  be
       executed  when an event occurs when it hasn't yet loaded the function. See the <u>event</u> <u>handlers</u> section for
       more information.

       If a file of the right name doesn't define the function, fish will not read other autoload files, instead
       it will go on to try builtins and finally commands. This allows  masking  a  function  defined  later  in
       $fish_function_path,  e.g. if your administrator has put something into /etc/fish/functions that you want
       to skip.

       If you are developing another program and want to install fish functions for  it,  install  them  to  the
       "vendor"  functions  directory.  As  this  path  varies  from  system to system, you can use <b>pkgconfig</b> to
       discover it with the output of <b>pkg-config</b> <b>--variable</b> <b>functionsdir</b> <b>fish</b>. Your installation  system  should
       support a custom path to override the pkgconfig path, as other distributors may need to alter it easily.

   <b>Comments</b>
       Anything  after  a  <b>#</b>  until  the  end  of the line is a comment. That means it's purely for the reader's
       benefit, fish ignores it.

       This is useful to explain what and why you are doing something:

          function ls
              # The function is called ls,
              # so we have to explicitly call `command ls` to avoid calling ourselves.
              command ls --color=auto $argv
          end

       There are no multiline comments. If you want to make a comment span multiple  lines,  simply  start  each
       line with a <b>#</b>.

       Comments can also appear after a line like so:

          set -gx EDITOR emacs # I don't like vim.

   <b>Conditions</b>
       Fish has some builtins that let you execute commands only if a specific criterion is met: <u>if</u>, <u>switch</u>, <u>and</u>
       and <u>or</u>, and also the familiar <u>&amp;&amp;/||</u> syntax.

   <b>The</b> <b>if</b> <b>statement</b>
       The <u>if</u> statement runs a block of commands if the condition was true.

       Like  other  shells,  but  unlike  typical  programming languages you might know, the condition here is a
       <u>command</u>. Fish runs it, and if it returns a true <u>exit</u> <u>status</u> (that's 0), the if-block is run. For example:

          if test -e <a href="file:/etc/os-release">/etc/os-release</a>
              cat <a href="file:/etc/os-release">/etc/os-release</a>
          end

       This uses the <u>test</u> command to see if the file <a href="file:/etc/os-release">/etc/os-release</a> exists. If it  does,  it  runs  <b>cat</b>,  which
       prints it on the screen.

       Unlike  other  shells,  the  condition  command  just  ends  after  the first job, there is no <b>then</b> here.
       Combiners like <b>and</b> and <b>or</b> extend the condition.

       A more complicated example with a <u>command</u> <u>substitution</u>:

          if test "$(uname)" = Linux
              echo I like penguins
          end

       Because <b>test</b> can be used for many different tests,  it  is  important  to  quote  variables  and  command
       substitutions. If the <b>$(uname)</b> was not quoted, and <b>uname</b> printed nothing it would run <b>test</b> <b>=</b> <b>Linux</b>, which
       is an error.

       <b>if</b>  can  also  take  <b>else</b> <b>if</b> clauses with additional conditions and an  <u>else</u> clause that is executed when
       everything else was false:

          if test "$number" -gt 10
             echo Your number was greater than 10
          else if test "$number" -gt 5
             echo Your number was greater than 5
          else if test "$number" -gt 1
             echo Your number was greater than 1
          else
             echo Your number was smaller or equal to 1
          end

       The <u>not</u> keyword can be used to invert the status:

          # Just see if the file contains the string "fish" anywhere.
          # This executes the `grep` command, which searches for a string,
          # and if it finds it returns a status of 0.
          # The `not` then turns 0 into 1 or anything else into 0.
          # The `-q` switch stops it from printing any matches.
          if not grep -q fish myanimals
              echo "You don't have fish!"
          else
              echo "You have fish!"
          end

       Other things commonly used in if-conditions:

       • <u>contains</u> - to see if a list contains a specific element (<b>if</b> <b>contains</b> <b>--</b> <b><a href="file:/usr/bin">/usr/bin</a></b> <b>$PATH</b>)

       • <u>string</u> - to e.g. match strings (<b>if</b> <b>string</b> <b>match</b> <b>-q</b> <b>--</b> <b>'*-'</b> <b>$arg</b>)

       • <u>path</u> - to check if paths of some criteria exist (<b>if</b> <b>path</b> <b>is</b> <b>-rf</b> <b>--</b> <b><a href="file:~/.config/fish/config.fish">~/.config/fish/config.fish</a></b>)

       • <u>type</u> - to see if a command, function or builtin exists (<b>if</b> <b>type</b> <b>-q</b> <b>git</b>)

   <b>The</b> <b>switch</b> <b>statement</b>
       The <u>switch</u> command is used to execute one of possibly many blocks of commands depending on the value of a
       string. It can take multiple <u>case</u> blocks that are  executed  when  the  string  matches.  They  can  take
       <u>wildcards</u>. For example:

          switch (uname)
          case Linux
              echo Hi Tux!
          case Darwin
              echo Hi Hexley!
          case DragonFly '*BSD'
              echo Hi Beastie! # this also works for FreeBSD and NetBSD
          case '*'
              echo Hi, stranger!
          end

       Unlike  other shells or programming languages, there is no fallthrough - the first matching <b>case</b> block is
       executed and then control jumps out of the <b>switch</b>.

   <b>Combiners</b> <b>(and</b> <b>/</b> <b>or</b> <b>/</b> <b>&amp;&amp;</b> <b>/</b> <b>||)</b>
       For simple checks, you can use combiners. <u>and</u> or <b>&amp;&amp;</b> run the second command if the first succeeded,  while
       <u>or</u> or <b>||</b> run it if the first failed. For example:

          # $XDG_CONFIG_HOME is a standard place to store configuration.
          # If it's not set applications should use <a href="file:~/.config.">~/.config.</a>
          set -q XDG_CONFIG_HOME; and set -l configdir $XDG_CONFIG_HOME
          or set -l configdir <a href="file:~/.config">~/.config</a>

       Note that combiners are <u>lazy</u> - only the part that is necessary to determine the final status is run.

       Compare:

          if sleep 2; and false
              echo 'How did I get here? This should be impossible'
          end

       and:

          if false; and sleep 2
              echo 'How did I get here? This should be impossible'
          end

       These do essentially the same thing, but the former takes 2 seconds longer because the <b>sleep</b> always needs
       to run.

       Or you can have a case where it is necessary to stop early:

          if command -sq foo; and foo

       If  this  went  on  after  seeing that the command "foo" doesn't exist, it would try to run <b>foo</b> and error
       because it wasn't found!

       Combiners really just execute step-by-step, so it isn't  recommended  to  build  longer  chains  of  them
       because they might do something you don't want. Consider:

          test -e /etc/my.config
          or echo "OH NO WE NEED A CONFIG FILE"
          and return 1

       This  will execute <b>return</b> <b>1</b> also if the <b>test</b> succeeded. This is because fish runs <b>test</b> <b>-e</b> <b>/etc/my.config</b>,
       sets $status to 0, then skips the <b>echo</b>, keeps $status at 0,  and  then  executes  the  <b>return</b>  <b>1</b>  because
       $status is still 0.

       So  if  you  have more complex conditions or want to run multiple things after something failed, consider
       using an <u>if</u>. Here that would be:

          if not test -e /etc/my.config
              echo "OH NO WE NEED A CONFIG FILE"
              return 1
          end

   <b>Loops</b> <b>and</b> <b>blocks</b>
       Like most programming language, fish also has the familiar <u>while</u> and <u>for</u> loops.

       <b>while</b> works like a repeated <u>if</u>:

          while true
              echo Still running
              sleep 1
          end

       will print "Still running" once a second. You can abort it with ctrl-c.

       <b>for</b> loops work like in other shells, which is more like python's for-loops than e.g. C's:

          for file in *
              echo file: $file
          end

       will print each file in the current directory. The part after the <b>in</b> is just a list of arguments, so  you
       can use any <u>expansions</u> there:

          set moreanimals bird fox
          for animal in {cat,}fish dog $moreanimals
             echo I like the $animal
          end

       If you need a list of numbers, you can use the <b>seq</b> command to create one:

          for i in (seq 1 5)
              echo $i
          end

       <u>break</u> is available to break out of a loop, and <u>continue</u> to jump to the next iteration.

       <u>Input</u> <u>and</u> <u>output</u> <u>redirections</u> (including <u>pipes</u>) can also be applied to loops:

          while read -l line
              echo line: $line
          end &lt; file

       In  addition  there's  a <u>begin</u> block that just groups commands together so you can redirect to a block or
       use a new <u>variable</u> <u>scope</u> without any repetition:

          begin
             set -l foo bar # this variable will only be available in this block!
          end

   <b>Parameter</b> <b>expansion</b>
       When fish is given a commandline, it expands the parameters before sending them to the command. There are
       multiple different kinds of expansions:

       • <u>Wildcards</u>, to create filenames from patterns - <b>*.jpg</b>

       • <u>Variable</u> <u>expansion</u>, to use the value of a variable - <b>$HOME</b>

       • <u>Command</u> <u>substitution</u>, to use the output of another command - <b>$(cat</b> <b>/path/to/file)</b>

       • <u>Brace</u> <u>expansion</u>, to write lists with common pre- or suffixes in a shorter way <b>{<a href="file:/usr">/usr</a>,}<a href="file:/bin">/bin</a></b>

       • <u>Tilde</u> <u>expansion</u>, to turn the <b>~</b> at the beginning of paths into the path to the home directory <b><a href="file:~/bin">~/bin</a></b>

       Parameter expansion is limited to 524288 items. There is a limit to  how  many  arguments  the  operating
       system  allows  for  any  command,  and  524288 is far above it. This is a measure to stop the shell from
       hanging doing useless computation.

   <b>Wildcards</b> <b>("Globbing")</b>
       When a parameter includes an <u>unquoted</u> <b>*</b> star (or "asterisk") or a <b>?</b> question mark,  fish  uses  it  as  a
       wildcard to match files.

       • <b>*</b> matches any number of characters (including zero) in a file name, not including <b>/</b>.

       • <b>**</b> matches any number of characters (including zero), and also descends into subdirectories. If <b>**</b> is a
         segment by itself, that segment may match zero times, for compatibility with other shells.

       • <b>?</b>  can match any single character except <b>/</b>. This is deprecated and can be disabled via the <b>qmark-noglob</b>
         <u>feature</u> <u>flag</u>, so <b>?</b> will just be an ordinary character.

       Wildcard matches are sorted case  insensitively.  When  sorting  matches  containing  numbers,  they  are
       naturally sorted, so that the strings '1' '5' and '12' would be sorted like 1, 5, 12.

       Hidden  files  (where the name begins with a dot) are not considered when wildcarding unless the wildcard
       string has a dot in that place.

       Examples:

       • <b>a*</b> matches any files beginning with an 'a' in the current directory.

       • <b>**</b> matches any files and directories in the current directory and all of its subdirectories.

       • <b><a href="file:~/.">~/.</a>*</b> matches all hidden files (also known as "dotfiles") and directories in your home directory.

       For most commands, if any wildcard fails to expand, the command  is  not  executed,  <u>$status</u>  is  set  to
       nonzero, and a warning is printed. This behavior is like what bash does with <b>shopt</b> <b>-s</b> <b>failglob</b>. There are
       exceptions,  namely  <u>set</u>  and  <u>path</u>,  overriding  variables in <u>overrides</u>, <u>count</u> and <u>for</u>. Their globs will
       instead expand to zero arguments (so the command won't see them at all), like with <b>shopt</b> <b>-s</b>  <b>nullglob</b>  in
       bash.

       Examples:

          # List the .foo files, or warns if there aren't any.
          ls *.foo

          # List the .foo files, if any.
          set foos *.foo
          if count $foos &gt;/dev/null
              ls $foos
          end

       Unlike  bash (by default), fish will not pass on the literal glob character if no match was found, so for
       a command like <b>apt</b> <b>install</b> that does the matching itself, you need to add quotes:

          apt install "ncurses-*"

   <b>Variable</b> <b>expansion</b>
       One of the most important expansions in fish is the "variable expansion". This  is  the  replacing  of  a
       dollar sign (<b>$</b>) followed by a variable name with the _value_ of that variable.

       In the simplest case, this is just something like:

          echo $HOME

       which  will  replace  <b>$HOME</b>  with the home directory of the current user, and pass it to <u>echo</u>, which will
       then print it.

       Some variables like <b>$HOME</b> are already set because fish sets them by  default  or  because  fish's  parent
       process  passed  them  to fish when it started it. You can define your own variables by setting them with
       <u>set</u>:

          set my_directory /home/cooluser/mystuff
          ls $my_directory
          # shows the contents of /home/cooluser/mystuff

       For more on how setting variables works, see <u>Shell</u> <u>variables</u> and the following sections.

       Sometimes a variable has no value because it is undefined or empty, and it expands to nothing:

          echo $nonexistentvariable
          # Prints no output.

       To separate a variable name from text you can encase the variable within double-quotes or braces:

          set WORD cat
          echo The plural of $WORD is "$WORD"s
          # Prints "The plural of cat is cats" because $WORD is set to "cat".
          echo The plural of $WORD is {$WORD}s
          # ditto

       Without the quotes or braces, fish will try to expand a variable called <b>$WORDs</b>, which may not exist.

       The latter syntax <b>{$WORD}</b> is a special case of <u>brace</u> <u>expansion</u>.

       If $WORD here is undefined or an empty list, the "s" is not printed. However, it is printed if  $WORD  is
       the empty string (like after <b>set</b> <b>WORD</b> <b>""</b>).

       For more on shell variables, read the <u>Shell</u> <u>variables</u> section.

   <b>Quoting</b> <b>variables</b>
       Variable  expansion also happens in double quoted strings. Inside double quotes (<b>"these"</b>), variables will
       always expand to exactly one argument. If they are empty or undefined, it will result in an empty string.
       If they have one element, they'll expand to that element. If they have more than that, the elements  will
       be  joined  with  spaces,  unless  the variable is a <u>path</u> <u>variable</u> - in that case it will use a colon (<b>:</b>)
       instead [3].

       Fish variables are all <u>lists</u>, and they are split into elements when they are  <u>set</u>  -  that  means  it  is
       important to decide whether to use quotes or not with <u>set</u>:

          set foo 1 2 3 # a variable with three elements
          rm $foo # runs the equivalent of `rm 1 2 3` - trying to delete three files: 1, 2 and 3.
          rm "$foo" # runs `rm '1 2 3'` - trying to delete one file called '1 2 3'

          set foo # an empty variable
          rm $foo # runs `rm` without arguments
          rm "$foo" # runs the equivalent of `rm ''`

          set foo "1 2 3"
          rm $foo # runs the equivalent of `rm '1 2 3'` - trying to delete one file
          rm "$foo" # same thing

       This  is  unlike  other shells, which do what is known as "Word Splitting", where they split the variable
       when it is <u>used</u> in an expansion. E.g. in bash:

          foo="1 2 3"
          rm $foo # runs the equivalent of `rm 1 2 3`
          rm "$foo" # runs the equivalent of `rm '1 2 3'`

       This is the cause of very common problems with filenames with spaces in bash scripts.

       In fish, unquoted variables will expand to as many arguments as they have elements. That means  an  empty
       list will expand to nothing, a variable with one element will expand to that element, and a variable with
       multiple elements will expand to each of those elements separately.

       If  a variable expands to nothing, it will cancel out any other strings attached to it. See the <u>Combining</u>
       <u>Lists</u> section for more information.

       Most of the time, not quoting a variable is correct. The exception is when you need to  ensure  that  the
       variable  is  passed  as  one  element, even if it might be unset or have multiple elements. This happens
       often with <u>test</u>:

          set -l foo one two three
          test -n $foo
          # prints an error that it got too many arguments, because it was executed like
          test -n one two three

          test -n "$foo"
          # works, because it was executed like
          test -n "one two three"

       [3]  Unlike bash or zsh, which will join with the first character of $IFS (which usually is space).

   <b>Dereferencing</b> <b>variables</b>
       The <b>$</b> symbol can also be used multiple times, as a kind of "dereference" operator (the <b>*</b> in  C  or  C++),
       like in the following code:

          set foo a b c
          set a 10; set b 20; set c 30
          for i in (seq (count $$foo))
              echo $$foo[$i]
          end

          # Output is:
          # 10
          # 20
          # 30

       <b>$$foo[$i]</b> is "the value of the variable named by <b>$foo[$i]</b>".

       This can also be used to give a variable name to a function:

          function print_var
              for arg in $argv
                  echo Variable $arg is $$arg
              end
          end

          set -g foo 1 2 3
          set -g bar a b c

          print_var foo bar
          # prints "Variable foo is 1 2 3" and "Variable bar is a b c"

       Of  course  the variable will have to be accessible from the function, so it needs to be <u>global/universal</u>
       or <u>exported</u>. It also can't clash with a variable name used inside the function. So if we  had  made  $foo
       there a local variable, or if we had named it "arg" instead, it would not have worked.

       When  using this feature together with <u>slices</u>, the slices will be used from the inside out. <b>$$foo[5]</b> will
       use the fifth element of <b>$foo</b> as a variable name,  instead  of  giving  the  fifth  element  of  all  the
       variables  $foo refers to. That would instead be expressed as <b>$$foo[1..-1][5]</b> (take all elements of <b>$foo</b>,
       use them as variable names, then give the fifth element of those).

       Some more examples:

          set listone 1 2 3
          set listtwo 4 5 6
          set var listone listtwo

          echo $$var
          # Output is 1 2 3 4 5 6

          echo $$var[1]
          # Output is 1 2 3

          echo $$var[2][3]
          # $var[1] is listtwo, third element of that is 6, output is 6

          echo $$var[..][2]
          # The second element of every variable, so output is
          # 2 5

   <b>Variables</b> <b>as</b> <b>command</b>
       Like other shells, you can run the value of a variable as a command.

          &gt; set -g EDITOR emacs
          &gt; $EDITOR foo # opens emacs, possibly the GUI version

       If you want to give the command an argument inside the variable it needs to be a separate element:

          &gt; set EDITOR emacs -nw
          &gt; $EDITOR foo # opens emacs in the terminal even if the GUI is installed
          &gt; set EDITOR "emacs -nw"
          &gt; $EDITOR foo # tries to find a command called "emacs -nw"

       Also like other shells, this only works with commands, builtins and functions - it  will  not  work  with
       keywords because they have syntactical importance.

       For  instance  <b>set</b> <b>if</b> <b>$if</b> won't allow you to make an if-block, and <b>set</b> <b>cmd</b> <b>command</b> won't allow you to use
       the <u>command</u> decorator, but only uses like <b>$cmd</b> <b>-q</b> <b>foo</b>.

   <b>Command</b> <b>substitution</b>
       A <b>command</b> <b>substitution</b> is an expansion that uses the <u>output</u> of a command as the arguments to another. For
       example:

          echo $(pwd)

       This executes the <u>pwd</u> command, takes its output (more specifically what it wrote to the  standard  output
       "stdout" stream) and uses it as arguments to <u>echo</u>. So the inner command (the <b>pwd</b>) is run first and has to
       complete before the outer command can even be started.

       If  the  inner  command prints multiple lines, fish will use each separate line as a separate argument to
       the outer command. Unlike other shells, the value of <b>$IFS</b> is not used [4], fish splits on newlines.

       Command substitutions can also be double-quoted:

          echo "$(pwd)"

       When using double quotes, the command output is not split up by lines, but trailing empty lines are still
       removed.

       If the output is piped to <u>string</u> <u>split</u> <u>or</u> <u>string</u> <u>split0</u> as the last step, those splits are used  as  they
       appear instead of splitting lines.

       Fish  also  allows  spelling command substitutions without the dollar, like <b>echo</b> <b>(pwd)</b>. This variant will
       not be expanded in double-quotes (<b>echo</b> <b>"(pwd)"</b> will print <b>(pwd)</b>).

       The exit status of the last run  command  substitution  is  available  in  the  <u>status</u>  variable  if  the
       substitution  happens  in  the  context  of  a  <u>set</u> command (so <b>if</b> <b>set</b> <b>-l</b> <b>(something)</b> checks if <b>something</b>
       returned true).

       To use only some lines of the output, refer to <u>slices</u>.

       Examples:

          # Outputs 'image.png'.
          echo (basename image.jpg .jpg).png

          # Convert all JPEG files in the current directory to the
          # PNG format using the 'convert' program.
          for i in *.jpg; convert $i (basename $i .jpg).png; end

          # Set the ``data`` variable to the contents of 'data.txt'
          # without splitting it into a list.
          set data "$(cat data.txt)"

          # Set ``$data`` to the contents of data, splitting on NUL-bytes.
          set data (cat data | string split0)

       Sometimes you want to pass the output of a command to another command that only accepts  files.  If  it's
       just one file, you can usually just pass it via a pipe, like:

          grep fish myanimallist1 | wc -l

       but  if  you  need  multiple  or  the command doesn't read from standard input, "process substitution" is
       useful. Other shells allow this via <b>foo</b> <b>&lt;(bar)</b> <b>&lt;(baz)</b>, and fish uses the <u>psub</u> command:

          # Compare just the lines containing "fish" in two files:
          diff -u (grep fish myanimallist1 | psub) (grep fish myanimallist2 | psub)

       This creates a temporary file, stores the output of the command in that file and prints the filename,  so
       it is given to the outer command.

       Fish  has a default limit of 100 MiB on the data it will read in a command substitution. If that limit is
       reached the command (all of it, not just the command substitution - the outer command won't  be  executed
       at  all)  fails  and <b>$status</b> is set to 122. This is so command substitutions can't cause the system to go
       out of memory, because typically your operating system has a much lower limit, so reading more than  that
       would  be useless and harmful. This limit can be adjusted with the <b>fish_read_limit</b> variable (<u>0</u> meaning no
       limit). This limit also affects the <u>read</u> command.

       [4]  One exception: Setting <b>$IFS</b> to empty will disable line splitting. This  is  deprecated,  use  <u>string</u>
            <u>split</u> instead.

   <b>Brace</b> <b>expansion</b>
       Curly braces can be used to write comma-separated lists. They will be expanded with each element becoming
       a  new parameter, with the surrounding string attached. This is useful to save on typing, and to separate
       a variable name from surrounding text.

       Examples:

          &gt; echo input.{c,h,txt}
          input.c input.h input.txt

          # Move all files with the suffix '.c' or '.h' to the subdirectory src.
          &gt; mv *.{c,h} src/

          # Make a copy of `file` at `file.bak`.
          &gt; cp file{,.bak}

          &gt; set -l dogs hot cool cute "good "
          &gt; echo {$dogs}dog
          hotdog cooldog cutedog good dog

       If there is no "," or variable expansion between the curly braces, they will not be expanded:

          # This {} isn't special
          &gt; echo foo-{}
          foo-{}
          # This passes "HEAD@{2}" to git
          &gt; git reset --hard HEAD@{2}
          &gt; echo {{a,b}}
          {a} {b} # because the inner brace pair is expanded, but the outer isn't.

       If after expansion there is nothing between the braces, the argument will be removed (see  <u>the</u>  <u>Combining</u>
       <u>Lists</u> section):

          &gt; echo foo-{$undefinedvar}
          # Output is an empty line, just like a bare `echo`.

       If there is nothing between a brace and a comma or two commas, it's interpreted as an empty element:

          &gt; echo {,,<a href="file:/usr">/usr</a>}<a href="file:/bin">/bin</a>
          <a href="file:/bin">/bin</a> <a href="file:/bin">/bin</a> <a href="file:/usr/bin">/usr/bin</a>

       To use a "," as an element, <u>quote</u> or <u>escape</u> it.

   <b>Combining</b> <b>lists</b>
       Fish expands lists like <u>brace</u> <u>expansions</u>:

          &gt;_ set -l foo x y z
          &gt;_ echo 1$foo
          # Any element of $foo is combined with the "1":
          1x 1y 1z

          &gt;_ echo {good,bad}" apples"
          # Any element of the {} is combined with the " apples":
          good apples bad apples

          # Or we can mix the two:
          &gt;_ echo {good,bad}" "$foo
          good x bad x good y bad y good z bad z

       Any string attached to a list will be concatenated to each element.

       Two  lists  will  be expanded in all combinations  - every element of the first with every element of the
       second:

          &gt;_ set -l a x y z; set -l b 1 2 3
          &gt;_ echo $a$b # same as {x,y,z}{1,2,3}
          x1 y1 z1 x2 y2 z2 x3 y3 z3

       A result of this is that, if a list has no elements, this combines the string  with  no  elements,  which
       means the entire token is removed!

          &gt;_ set -l c # &lt;- this list is empty!
          &gt;_ echo {$c}word
          # Output is an empty line - the "word" part is gone

       This  can be quite useful. For example, if you want to go through all the files in all the directories in
       <u>PATH</u>, use

          for file in $PATH/*

       Because <u>PATH</u> is a list, this expands to all the files in all the directories in it. And if there  are  no
       directories in <u>PATH</u>, the right answer here is to expand to no files.

       Sometimes this may be unwanted, especially that tokens can disappear after expansion. In those cases, you
       should double-quote variables - <b>echo</b> <b>"$c"word</b>.

       This  also happens after <u>command</u> <u>substitution</u>. To avoid tokens disappearing there, make the inner command
       return a trailing newline, or double-quote it:

          &gt;_ set b 1 2 3
          &gt;_ echo (echo x)$b
          x1 x2 x3
          &gt;_ echo (printf '%s' '')banana
          # the printf prints nothing, so this is nothing times "banana",
          # which is nothing.
          &gt;_ echo (printf '%s\n' '')banana
          # the printf prints a newline,
          # so the command substitution expands to an empty string,
          # so this is `''banana`
          banana
          &gt;_ echo "$(printf '%s' '')"banana
          # quotes mean this is one argument, the banana stays

   <b>Slices</b>
       Sometimes it's necessary to access only some of the elements of a <u>list</u> (all fish variables are lists), or
       some of the lines a <u>command</u> <u>substitution</u> outputs. Both are possible in fish by writing a set  of  indices
       in brackets, like:

          # Make $var a list of four elements
          set var one two three four
          # Print the second:
          echo $var[2]
          # prints "two"
          # or print the first three:
          echo $var[1..3]
          # prints "one two three"

       In  index  brackets,  fish  understands  ranges  written  like <b>a..b</b> ('a' and 'b' being indices). They are
       expanded into a sequence of indices from a to b (so <b>a</b> <b>a+1</b> <b>a+2</b> <b>...</b> <b>b</b>), going up if b is larger  and  going
       down  if  a is larger. Negative indices can also be used - they are taken from the end of the list, so <b>-1</b>
       is the last element, and <b>-2</b> the one before it. If an index doesn't exist the range is clamped to the next
       possible index.

       If a list has 5 elements the indices go from 1 to 5, so a range of <b>2..16</b> will only go from element  2  to
       element 5.

       If  the  end is negative the range always goes up, so <b>2..-2</b> will go from element 2 to 4, and <b>2..-16</b> won't
       go anywhere because there is no way to go from the second element to one that doesn't exist, while  going
       up.   If  the  start  is  negative  the range always goes down, so <b>-2..1</b> will go from element 4 to 1, and
       <b>-16..2</b> won't go anywhere because there is no way to go from an element that doesn't exist to  the  second
       element, while going down.

       A  missing  starting  index  in  a  range  defaults to 1. This is allowed if the range is the first index
       expression of the sequence. Similarly, a missing ending index, defaulting to -1 is allowed for  the  last
       index in the sequence.

       Multiple ranges are also possible, separated with a space.

       Some examples:

          echo (seq 10)[1 2 3]
          # Prints: 1 2 3

          # Limit the command substitution output
          echo (seq 10)[2..5]
          # Uses elements from 2 to 5
          # Output is: 2 3 4 5

          echo (seq 10)[7..]
          # Prints: 7 8 9 10

          # Use overlapping ranges:
          echo (seq 10)[2..5 1..3]
          # Takes elements from 2 to 5 and then elements from 1 to 3
          # Output is: 2 3 4 5 1 2 3

          # Reverse output
          echo (seq 10)[-1..1]
          # Uses elements from the last output line to
          # the first one in reverse direction
          # Output is: 10 9 8 7 6 5 4 3 2 1

          # The command substitution has only one line,
          # so these will result in empty output:
          echo (echo one)[2..-1]
          echo (echo one)[-3..1]

       The same works when setting or expanding variables:

          # Reverse path variable
          set PATH $PATH[-1..1]
          # or
          set PATH[-1..1] $PATH

          # Use only n last items of the PATH
          set n -3
          echo $PATH[$n..-1]

       Variables can be used as indices for expansion of variables, like so:

          set index 2
          set letters a b c d
          echo $letters[$index] # returns 'b'

       However using variables as indices for command substitution is currently not supported, so:

          echo (seq 5)[$index] # This won't work

          set sequence (seq 5) # It needs to be written on two lines like this.
          echo $sequence[$index] # returns '2'

       When  using  indirect variable expansion with multiple <b>$</b> (<b>$$name</b>), you have to give all indices up to the
       variable you want to slice:

          &gt; set -l list 1 2 3 4 5
          &gt; set -l name list
          &gt; echo $$name[1]
          1 2 3 4 5
          &gt; echo $$name[1..-1][1..3] # or $$name[1][1..3], since $name only has one element.
          1 2 3

   <b>Home</b> <b>directory</b> <b>expansion</b>
       The <b>~</b> (tilde) character at the beginning of a parameter, followed by a username,  is  expanded  into  the
       home  directory  of  the  specified user. A lone <b>~</b>, or a <b>~</b> followed by a slash, is expanded into the home
       directory of the process owner:

          ls <a href="file:~/Music">~/Music</a> # lists my music directory

          echo ~root # prints root's home directory, probably "<a href="file:/root">/root</a>"

   <b>Combining</b> <b>different</b> <b>expansions</b>
       All of the above expansions can be combined. If several expansions result in more than one parameter, all
       possible combinations are created.

       When combining multiple parameter expansions, expansions are performed in the following order:

       • Command substitutions

       • Variable expansions

       • Bracket expansion

       • Wildcard expansion

       Expansions are performed from right to left, nested bracket  expansions  and  command  substitutions  are
       performed from the inside and out.

       Example:

       If  the  current  directory contains the files 'foo' and 'bar', the command <b>echo</b> <b>a(ls){1,2,3}</b> will output
       <b>abar1</b> <b>abar2</b> <b>abar3</b> <b>afoo1</b> <b>afoo2</b> <b>afoo3</b>.

   <b>Table</b> <b>Of</b> <b>Operators</b>
       Putting it together, here is a quick reference to fish's operators, all of the special symbols it uses:
                     ┌────────────┬──────────────────────────────┬──────────────────────────────┐
                     │ Symbol     │ Meaning                      │ Example                      │
                     ├────────────┼──────────────────────────────┼──────────────────────────────┤
                     │ <b>$</b>          │ <u>Variable</u> <u>expansion</u>           │ <b>echo</b> <b>$foo</b>                    │
                     ├────────────┼──────────────────────────────┼──────────────────────────────┤
                     │ <b>$()</b> and <b>()</b> │ <u>Command</u> <u>substitution</u>         │ <b>cat</b> <b>(grep</b> <b>foo</b>  <b>bar)</b>  or  <b>cat</b> │
                     │            │                              │ <b>$(grep</b> <b>foo</b> <b>bar)</b>              │
                     ├────────────┼──────────────────────────────┼──────────────────────────────┤
                     │ <b>&lt;</b> and <b>&gt;</b>    │ <u>Redirection</u>,  like <b>command</b> <b>&gt;</b> │ <b>git</b>  <b>shortlog</b>   <b>-nse</b>   <b>.</b>   <b>&gt;</b> │
                     │            │ <b>file</b>                         │ <b>authors</b>                      │
                     ├────────────┼──────────────────────────────┼──────────────────────────────┤
                     │ <b>|</b>          │ <u>Pipe</u>,  connect  two  or more │ <b>foo</b> <b>|</b> <b>grep</b> <b>bar</b> <b>|</b> <b>grep</b> <b>baz</b>    │
                     │            │ commands                     │                              │
                     ├────────────┼──────────────────────────────┼──────────────────────────────┤
                     │ <b>;</b>          │ End of the command,  instead │ <b>command1;</b> <b>command2</b>           │
                     │            │ of a newline                 │                              │
                     ├────────────┼──────────────────────────────┼──────────────────────────────┤
                     │ <b>&amp;</b>          │ <u>Backgrounding</u>                │ <b>sleep</b> <b>5m</b> <b>&amp;</b>                   │
                     ├────────────┼──────────────────────────────┼──────────────────────────────┤
                     │ <b>{}</b>         │ <u>Brace</u> <u>expansion</u>              │ <b>ls</b> <b>{<a href="file:/usr">/usr</a>,}<a href="file:/bin">/bin</a></b>               │
                     ├────────────┼──────────────────────────────┼──────────────────────────────┤
                     │ <b>&amp;&amp;</b> and <b>||</b>  │ <u>Combiners</u>                    │ <b>mkdir</b>  <b>foo</b>  <b>&amp;&amp;</b>  <b>cd</b> <b>foo</b> or <b>rm</b> │
                     │            │                              │ <b>foo</b> <b>||</b> <b>exit</b>                  │
                     ├────────────┼──────────────────────────────┼──────────────────────────────┤
                     │ <b>*</b> and <b>**</b>   │ <u>Wildcards</u>                    │ <b>cat</b> <b>*.fish</b> or <b>count</b> <b>**.jpg</b>   │
                     ├────────────┼──────────────────────────────┼──────────────────────────────┤
                     │ <b>\\</b>         │ <u>Escaping</u>                     │ <b>echo</b> <b>foo\nbar</b> or <b>echo</b> <b>\$foo</b>  │
                     ├────────────┼──────────────────────────────┼──────────────────────────────┤
                     │ <b>''</b> and <b>""</b>  │ <u>Quoting</u>                      │ <b>rm</b>  <b>"file</b>  <b>with</b>  <b>spaces"</b>  or │
                     │            │                              │ <b>echo</b> <b>'$foo'</b>                  │
                     ├────────────┼──────────────────────────────┼──────────────────────────────┤
                     │ <b>~</b>          │ <u>Home</u> <u>directory</u> <u>expansion</u>     │ <b>ls</b> <b>~/</b> or <b>ls</b> <b>~root/</b>           │
                     ├────────────┼──────────────────────────────┼──────────────────────────────┤
                     │ <b>#</b>          │ <u>Comments</u>                     │ <b>echo</b>   <b>Hello</b>  <b>#</b>  <b>this</b>  <b>isn't</b> │
                     │            │                              │ <b>printed</b>                      │
                     └────────────┴──────────────────────────────┴──────────────────────────────┘

   <b>Shell</b> <b>variables</b>
       Variables are a way to save data and pass it around. They can be used just by the shell, or they  can  be
       "<u>exported</u>",  so  that  a  copy  of the variable is available to any external command the shell starts. An
       exported variable is referred to as an "environment variable".

       To set a variable value, use the <u>set</u> command. A variable name can not  be  empty  and  can  contain  only
       letters, digits, and underscores. It may begin and end with any of those characters.

       Example:

       To set the variable <b>smurf_color</b> to the value <b>blue</b>, use the command <b>set</b> <b>smurf_color</b> <b>blue</b>.

       After  a  variable  has  been  set,  you  can  use  the value of a variable in the shell through <u>variable</u>
       <u>expansion</u>.

       Example:

          set smurf_color blue
          echo Smurfs are usually $smurf_color
          set pants_color red
          echo Papa smurf, who is $smurf_color, wears $pants_color pants

       So you set a variable with <b>set</b>, and use it with a <b>$</b> and the name.

   <b>Variable</b> <b>Scope</b>
       All variables in fish have a scope. For example they can be global or local to a function or block:

          # This variable is global, we can use it everywhere.
          set --global name Patrick
          # This variable is local, it will not be visible in a function we call from here.
          set --local place "at the Krusty Krab"

          function local
              # This can find $name, but not $place
              echo Hello this is $name $place

              # This variable is local, it will not be available
              # outside of this function
              set --local instrument mayonnaise
              echo My favorite instrument is $instrument
              # This creates a local $name, and won't touch the global one
              set --local name Spongebob
              echo My best friend is $name
          end

          local
          # Will print:
          # Hello this is Patrick
          # My favorite instrument is mayonnaise
          # My best friend is Spongebob

          echo $name, I am $place and my instrument is $instrument
          # Will print:
          # Patrick, I am at the Krusty Krab and my instrument is

       There are four kinds of variable scopes in fish: universal, global, function and local variables.

       • Universal variables are shared between all fish sessions a user is running on one  computer.  They  are
         stored on disk and persist even after reboot.

       • Global  variables are specific to the current fish session. They can be erased by explicitly requesting
         <b>set</b> <b>-e</b>.

       • Function variables are specific to the currently executing  function.  They  are  erased  ("go  out  of
         scope") when the current function ends. Outside of a function, they don't go out of scope.

       • Local variables are specific to the current block of commands, and automatically erased when a specific
         block  goes  out  of  scope.  A  block  of commands is a series of commands that begins with one of the
         commands <b>for</b>, <b>while</b> , <b>if</b>, <b>function</b>, <b>begin</b> or <b>switch</b>, and ends with the command <b>end</b>. Outside of a block,
         this is the same as the function scope.

       Variables can be explicitly set to be universal with the <b>-U</b> or <b>--universal</b>  switch,  global  with  <b>-g</b>  or
       <b>--global</b>,  function-scoped  with <b>-f</b> or <b>--function</b> and local to the current block with <b>-l</b> or <b>--local</b>.  The
       scoping rules when creating or updating a variable are:

       • When a scope is explicitly given, it will be used. If a variable of the same name exists in a different
         scope, that variable will not be changed.

       • When no scope is given, but a variable of that name exists, the variable of the smallest scope will  be
         modified. The scope will not be changed.

       • When  no  scope is given and no variable of that name exists, the variable is created in function scope
         if inside a function, or global scope if no function is executing.

       There can be many variables with the same name, but different  scopes.  When  you  <u>use</u>  <u>a</u>  <u>variable</u>,  the
       smallest  scoped  variable of that name will be used. If a local variable exists, it will be used instead
       of the global or universal variable of the same name.

       Example:

       There are a few possible uses for different scopes.

       Typically inside functions you should use local scope:

          function something
              set -l file /path/to/my/file
              if not test -e "$file"
                  set file /path/to/my/otherfile
              end
          end

          # or

          function something
              if test -e /path/to/my/file
                  set -f file /path/to/my/file
              else
                  set -f file /path/to/my/otherfile
              end
          end

       If you want to set something in config.fish, or set something in a function and have it available for the
       rest of the session, global scope is a good choice:

          # Don't shorten the working directory in the prompt
          set -g fish_prompt_pwd_dir_length 0

          # Set my preferred cursor style:
          function setcursors
             set -g fish_cursor_default block
             set -g fish_cursor_insert line
             set -g fish_cursor_visual underscore
          end

          # Set my language
          set -gx LANG de_DE.UTF-8

       If you want to set some personal customization, universal variables are nice:

          # Typically you'd run this interactively, fish takes care of keeping it.
          set -U fish_color_autosuggestion 555

       Here is an example of local vs function-scoped variables:

          function test-scopes
              begin
                  # This is a nice local scope where all variables will die
                  set -l pirate 'There be treasure in them thar hills'
                  set -f captain Space, the final frontier
                  # If no variable of that name was defined, it is function-local.
                  set gnu "In the beginning there was nothing, which exploded"
              end

              # This will not output anything, since the pirate was local
              echo $pirate
              # This will output the good Captain's speech
              # since $captain had function-scope.
              echo $captain
              # This will output Sir Terry's wisdom.
              echo $gnu
          end

       When a function calls another, local variables aren't visible:

          function shiver
              set phrase 'Shiver me timbers'
          end

          function avast
              set --local phrase 'Avast, mateys'
              # Calling the shiver function here can not
              # change any variables in the local scope
              # so phrase remains as we set it here.
              shiver
              echo $phrase
          end
          avast

          # Outputs "Avast, mateys"

       When in doubt, use function-scoped variables. When you need to make  a  variable  accessible  everywhere,
       make  it  global.  When you need to persistently store configuration, make it universal. When you want to
       use a variable only in a short block, make it local.

   <b>Overriding</b> <b>variables</b> <b>for</b> <b>a</b> <b>single</b> <b>command</b>
       If you want to override a variable for a single command, you can  use  "var=val"  statements  before  the
       command:

          # Call git status on another directory
          # (can also be done via `git -C somerepo status`)
          GIT_DIR=somerepo git status

       Unlike other shells, fish will first set the variable and then perform other expansions on the line, so:

          set foo banana
          foo=gagaga echo $foo
          # prints gagaga, while in other shells it might print "banana"

       Multiple elements can be given in a <u>brace</u> <u>expansion</u>:

          # Call bash with a reasonable default path.
          PATH={<a href="file:/usr">/usr</a>,}/{s,}bin bash

       Or with a <u>glob</u>:

          # Run vlc on all mp3 files in the current directory
          # If no file exists it will still be run with no arguments
          mp3s=*.mp3 vlc $mp3s

       Unlike  other  shells,  this  does  <u>not</u>  inhibit any lookup (aliases or similar). Calling a command after
       setting a variable override will result in the exact same command being run.

       This syntax is supported since fish 3.1.

   <b>Universal</b> <b>Variables</b>
       Universal variables are variables that are shared between all the user's fish sessions on  the  computer.
       Fish  stores many of its configuration options as universal variables. This means that in order to change
       fish settings, all you have to do is change the variable value once, and it will be automatically updated
       for all sessions, and preserved across computer reboots and login/logout.

       To see universal variables in action, start two fish sessions side  by  side,  and  issue  the  following
       command  in  one of them <b>set</b> <b>fish_color_cwd</b> <b>blue</b>. Since <b>fish_color_cwd</b> is a universal variable, the color
       of the current working directory listing in the prompt will instantly change to blue on both terminals.

       <u>Universal</u> <u>variables</u> are stored in the file <b>.config/fish/fish_variables</b>. Do not edit this  file  directly,
       as  your edits may be overwritten. Edit the variables through fish scripts or by using fish interactively
       instead.

       Do not append to universal variables in <u>config.fish</u>, because these variables will then  get  longer  with
       each new shell instance. Instead, simply set them once at the command line.

   <b>Exporting</b> <b>variables</b>
       Variables  in  fish  can  be  exported,  so  they  will  be inherited by any commands started by fish. In
       particular, this is necessary for variables used to configure external commands like <b>PAGER</b> or <b>GOPATH</b>, but
       also for variables that contain general system settings like <b>PATH</b> or <b>LANGUAGE</b>.  If  an  external  command
       needs  to know a variable, it needs to be exported. Exported variables are also often called "environment
       variables".

       This also applies to fish - when it starts up, it receives environment variables from its parent (usually
       the terminal). These typically include system configuration like <u>PATH</u> and <u>locale</u> <u>variables</u>.

       Variables can be explicitly set to be exported with the <b>-x</b> or <b>--export</b> switch, or not exported  with  the
       <b>-u</b>  or  <b>--unexport</b>  switch.  The exporting rules when setting a variable are similar to the scoping rules
       for variables - when an option is passed it is respected, otherwise  the  variable's  existing  state  is
       used. If no option is passed and the variable didn't exist yet it is not exported.

       As a naming convention, exported variables are in uppercase and unexported variables are in lowercase.

       For example:

          set -gx ANDROID_HOME <a href="file:~/.android">~/.android</a> # /opt/android-sdk
          set -gx CDPATH . ~ (test -e <a href="file:~/Videos">~/Videos</a>; and echo <a href="file:~/Videos">~/Videos</a>)
          set -gx EDITOR emacs -nw
          set -gx GOPATH <a href="file:~/dev/go">~/dev/go</a>
          set -gx GTK2_RC_FILES "$XDG_CONFIG_HOME/gtk-2.0/gtkrc"
          set -gx LESSHISTFILE "-"

       Note:  Exporting  is  not  a  <u>scope</u>,  but  an additional state. It typically makes sense to make exported
       variables global as well, but local-exported variables can be useful if you need something more  specific
       than  <u>Overrides</u>.  They  are  <u>copied</u>  to  functions  so  the  function can't alter them outside, and still
       available to commands. Global variables are accessible to functions whether they are exported or not.

   <b>Lists</b>
       Fish can store a list (or an "array" if you wish) of multiple strings inside of a variable:

          &gt; set mylist first second third
          &gt; printf '%s\n' $mylist # prints each element on its own line
          first
          second
          third

       To access one element of a list, use the index of the element inside of square brackets, like this:

          echo $PATH[3]

       List indices start at 1 in fish, not 0 like  in  other  languages.  This  is  because  it  requires  less
       subtracting  of  1 and many common Unix tools like <b>seq</b> work better with it (<b>seq</b> <b>5</b> prints 1 to 5, not 0 to
       5). An invalid index is silently ignored resulting in no  value  (not  even  an  empty  string,  just  no
       argument at all).

       If  you  don't  use  any brackets, all the elements of the list will be passed to the command as separate
       items. This means you can iterate over a list with <b>for</b>:

          for i in $PATH
              echo $i is in the path
          end

       This goes over every directory in <u>PATH</u> separately and prints a line saying it is in the path.

       To create a variable <b>smurf</b>, containing the items <b>blue</b> and <b>small</b>, simply write:

          set smurf blue small

       It is also possible to set or erase individual elements of a list:

          # Set smurf to be a list with the elements 'blue' and 'small'
          set smurf blue small

          # Change the second element of smurf to 'evil'
          set smurf[2] evil

          # Erase the first element
          set -e smurf[1]

          # Output 'evil'
          echo $smurf

       If you specify a negative index when expanding or assigning to a list variable, the index will  be  taken
       from the <u>end</u> of the list. For example, the index -1 is the last element of the list:

          &gt; set fruit apple orange banana
          &gt; echo $fruit[-1]
          banana

          &gt; echo $fruit[-2..-1]
          orange
          banana

          &gt; echo $fruit[-1..1] # reverses the list
          banana
          orange
          apple

       As you see, you can use a range of indices, see <u>slices</u> for details.

       All lists are one-dimensional and can't contain other lists, although it is possible to fake nested lists
       using dereferencing - see <u>variable</u> <u>expansion</u>.

       When  a  list is exported as an environment variable, it is either space or colon delimited, depending on
       whether it is a <u>path</u> <u>variable</u>:

          &gt; set -x smurf blue small
          &gt; set -x smurf_PATH forest mushroom
          &gt; env | grep smurf
          smurf=blue small
          smurf_PATH=forest:mushroom

       Fish automatically creates lists from all environment variables whose  name  ends  in  <b>PATH</b>  (like  <u>PATH</u>,
       <u>CDPATH</u> or <b>MANPATH</b>), by splitting them on colons. Other variables are not automatically split.

       Lists can be inspected with the <u>count</u> or the <u>contains</u> commands:

          &gt; count $smurf
          2

          &gt; contains blue $smurf
          # blue was found, so it exits with status 0
          # (without printing anything)

          &gt; echo $status
          0

          &gt; contains -i blue $smurf
          1

       A  nice thing about lists is that they are passed to commands one element as one argument, so once you've
       set your list, you can just pass it:

          set -l grep_args -r "my string"
          grep $grep_args . # will run the same as `grep -r "my string"` .

       Unlike other shells, fish does not do "word splitting" - elements in a list stay as  they  are,  even  if
       they contain spaces or tabs.

   <b>Argument</b> <b>Handling</b>
       An important list is <b>$argv</b>, which contains the arguments to a function or script. For example:

          function myfunction
              echo $argv[1]
              echo $argv[3]
          end

       This function takes whatever arguments it gets and prints the first and third:

          &gt; myfunction first second third
          first
          third

          &gt; myfunction apple cucumber banana
          apple
          banana

       That  covers  the  positional  arguments,  but commandline tools often get various options and flags, and
       $argv would contain them intermingled with the  positional  arguments.  Typical  unix  argument  handling
       allows  short  options (<b>-h</b>, also grouped like in <b>ls</b> <b>-lah</b>), long options (<b>--help</b>) and allows those options
       to take arguments (<b>--color=auto</b> or <b>--position</b> <b>anywhere</b> or <b>complete</b> <b>-C"git</b> <b>"</b>) as well as a <b>--</b> separator to
       signal the end of options. Handling all of these manually is tricky and error-prone.

       A more robust approach to option handling is <u>argparse</u>, which checks the defined  options  and  puts  them
       into various variables, leaving only the positional arguments in $argv. Here's a simple example:

          function mybetterfunction
              # We tell argparse about -h/--help and -s/--second
              # - these are short and long forms of the same option.
              # The "--" here is mandatory,
              # it tells it from where to read the arguments.
              argparse h/help s/second -- $argv
              # exit if argparse failed because
              # it found an option it didn't recognize
              # - it will print an error
              or return

              # If -h or --help is given, we print a little help text and return
              if set -ql _flag_help
                  echo "mybetterfunction [-h|--help] [-s|--second] [ARGUMENT ...]"
                  return 0
              end

              # If -s or --second is given, we print the second argument,
              # not the first and third.
              # (this is also available as _flag_s because of the short version)
              if set -ql _flag_second
                  echo $argv[2]
              else
                  echo $argv[1]
                  echo $argv[3]
              end
          end

       The options will be <u>removed</u> from $argv, so $argv[2] is the second <u>positional</u> argument now:

          &gt; mybetterfunction first -s second third
          second

       For more information on argparse, like how to handle option arguments, see <u>the</u> <u>argparse</u> <u>documentation</u>.

   <b>PATH</b> <b>variables</b>
       Path  variables are a special kind of variable used to support colon-delimited path lists including <u>PATH</u>,
       <u>CDPATH</u>, <b>MANPATH</b>, <b>PYTHONPATH</b>, etc. All variables that end in "PATH" (case-sensitive) become PATH variables
       by default.

       PATH variables act as normal lists, except they are implicitly joined and split on colons.

          set MYPATH 1 2 3
          echo "$MYPATH"
          # 1:2:3
          set MYPATH "$MYPATH:4:5"
          echo $MYPATH
          # 1 2 3 4 5
          echo "$MYPATH"
          # 1:2:3:4:5

       Path variables will also be exported in the colon form, so <b>set</b>  <b>-x</b>  <b>MYPATH</b>  <b>1</b>  <b>2</b>  <b>3</b>  will  have  external
       commands see it as <b>1:2:3</b>.

          &gt; set -gx MYPATH <a href="file:/bin">/bin</a> <a href="file:/usr/bin">/usr/bin</a> <a href="file:/sbin">/sbin</a>
          &gt; env | grep MYPATH
          MYPATH=<a href="file:/bin">/bin</a>:<a href="file:/usr/bin">/usr/bin</a>:<a href="file:/sbin">/sbin</a>

       This  is  for  compatibility  with  other  tools. Unix doesn't have variables with multiple elements, the
       closest thing it has are colon-lists like <u>PATH</u>. For obvious reasons this means no element can  contain  a
       <b>:</b>.

       Variables can be marked or unmarked as PATH variables via the <b>--path</b> and <b>--unpath</b> options to <b>set</b>.

   <b>Special</b> <b>variables</b>
       You can change the settings of fish by changing the values of certain variables.

       <b>PATH</b>   A list of directories in which to search for commands. This is a common unix variable also used by
              other tools.

       <b>CDPATH</b> A list of directories in which the <u>cd</u> builtin looks for a new directory.

       <b>Locale</b> <b>Variables</b>
              The locale variables <u>LANG</u>, <u>LC_ALL</u>, <u>LC_COLLATE</u>, <u>LC_CTYPE</u>, <u>LC_MESSAGES</u>, <u>LC_MONETARY</u>, <u>LC_NUMERIC</u>, and
              <u>LANG</u>  set  the language option for the shell and subprograms. See the section <u>Locale</u> <u>variables</u> for
              more information.

       <b>Color</b> <b>variables</b>
              A number of variable starting with the prefixes <b>fish_color</b> and <b>fish_pager_color</b>. See <u>Variables</u> <u>for</u>
              <u>changing</u> <u>highlighting</u> <u>colors</u> for more information.

       <b>fish_term24bit</b>
              If this is set to 1, fish will assume the terminal understands 24-bit  RGB  color  sequences,  and
              won't translate them to the 256 or 16 color palette.  This is often detected automatically.

       <b>fish_term256</b>
              If  this  is  set  to 1, fish will assume the terminal understands 256 colors, and won't translate
              matching colors down to the 16 color palette.  This is usually autodetected.

       <b>fish_ambiguous_width</b>
              controls the computed width of ambiguous-width characters.  This  should  be  set  to  1  if  your
              terminal renders these characters as single-width (typical), or 2 if double-width.

       <b>fish_emoji_width</b>
              controls  whether  fish  assumes emoji render as 2 cells or 1 cell wide. This is necessary because
              the correct value changed from 1 to 2 in Unicode 9, and some terminals may not be aware. Set  this
              if you see graphical glitching related to emoji (or other "special" characters). It should usually
              be auto-detected.

       <b>fish_autosuggestion_enabled</b>
              controls  if  <u>Autosuggestions</u>  are  enabled.  Set  it to 0 to disable, anything else to enable. By
              default they are on.

       <b>fish_handle_reflow</b>
              determines whether fish should try to repaint  the  commandline  when  the  terminal  resizes.  In
              terminals  that  reflow  text  this  should  be  disabled. Set it to 1 to enable, anything else to
              disable.

       <b>fish_key_bindings</b>
              the name of the function that sets up the keyboard shortcuts for the <u>command-line</u> <u>editor</u>.

       <b>fish_escape_delay_ms</b>
              sets how long fish waits for another key after seeing  an  escape,  to  distinguish  pressing  the
              escape  key from the start of an escape sequence. The default is 30ms. Increasing it increases the
              latency  but  allows  pressing  escape  instead  of  alt  for  alt+character  bindings.  For  more
              information, see <u>the</u> <u>chapter</u> <u>in</u> <u>the</u> <u>bind</u> <u>documentation</u>.

       <b>fish_sequence_key_delay_ms</b>
              sets  how long fish waits for another key after seeing a key that is part of a longer sequence, to
              disambiguate. For instance if you had bound <b>\cx\ce</b> to open an editor, fish  would  wait  for  this
              long  in  milliseconds to see a ctrl-e after a ctrl-x. If the time elapses, it will handle it as a
              ctrl-x (by default this would copy the  current  commandline  to  the  clipboard).  See  also  <u>Key</u>
              <u>sequences</u>.

       <b>fish_complete_path</b>
              determines  where fish looks for completion. When trying to complete for a command, fish looks for
              files in the directories in this variable.

       <b>fish_cursor_selection_mode</b>
              controls whether the selection is inclusive or exclusive of the character under  the  cursor  (see
              <u>Copy</u> <u>and</u> <u>Paste</u>).

       <b>fish_function_path</b>
              determines  where fish looks for functions. When fish <u>autoloads</u> a function, it will look for files
              in these directories.

       <b>fish_greeting</b>
              the greeting message printed on startup. This is printed by a function of the same name  that  can
              be overridden for more complicated changes (see <u>funced</u>)

       <b>fish_history</b>
              the  current  history  session  name.  If  set, all subsequent commands within an interactive fish
              session will be logged to a separate file identified by the value of the variable. If  unset,  the
              default  session name "fish" is used. If set to an empty string, history is not saved to disk (but
              is still available within the interactive session).

       <b>fish_trace</b>
              if set and not empty, will cause fish to print commands before they execute, similar to <b>set</b> <b>-x</b>  in
              bash.  The  trace  is  printed  to  the  path  given  by  the <u>--debug-output</u> option to fish or the
              <u>FISH_DEBUG_OUTPUT</u> variable. It goes to stderr by default.

       <b>FISH_DEBUG</b>
              Controls which debug categories <b>fish</b> enables for output, analogous to the <b>--debug</b> option.

       <b>FISH_DEBUG_OUTPUT</b>
              Specifies a file to direct debug output to.

       <b>fish_user_paths</b>
              a list of directories that are prepended to <u>PATH</u>. This can be a universal variable.

       <b>umask</b>  the current file creation mask. The preferred way to change the  umask  variable  is  through  the
              <u>umask</u> function. An attempt to set umask to an invalid value will always fail.

       <b>BROWSER</b>
              your  preferred  web browser. If this variable is set, fish will use the specified browser instead
              of the system default browser to display the fish documentation.

       Fish also provides additional information through the values of certain environment  variables.  Most  of
       these variables are read-only and their value can't be changed with <b>set</b>.

       <b>_</b>      the  name  of  the  currently  running  command  (though this is deprecated, and the use of <b>status</b>
              <b>current-command</b> is preferred).

       <b>argv</b>   a list of arguments to the shell or function. <b>argv</b> is only defined when inside a function call, or
              if fish was invoked with a list of arguments, like <b>fish</b> <b>myscript.fish</b> <b>foo</b> <b>bar</b>. This  variable  can
              be changed.

       <b>CMD_DURATION</b>
              the runtime of the last command in milliseconds.

       <b>COLUMNS</b> <b>and</b> <b>LINES</b>
              the  current  size  of the terminal in height and width. These values are only used by fish if the
              operating system does not report the size of the terminal. Both variables must be set in that case
              otherwise a default of 80x24 will be used. They are updated when the window size changes.

       <b>fish_kill_signal</b>
              the signal that terminated the last foreground job, or 0 if the job exited normally.

       <b>fish_killring</b>
              a list of entries in fish's <u>kill</u> <u>ring</u> of cut text.

       <b>fish_read_limit</b>
              how many bytes fish will process with <u>read</u> or in a <u>command</u> <u>substitution</u>.

       <b>fish_pid</b>
              the process ID (PID) of the shell.

       <b>history</b>
              a list containing the last commands that were entered.

       <b>HOME</b>   the user's home directory. This variable can be changed.

       <b>hostname</b>
              the machine's hostname.

       <b>IFS</b>    the internal field separator that is used for word splitting with the <u>read</u> builtin.  Setting  this
              to the empty string will also disable line splitting in <u>command</u> <u>substitution</u>. This variable can be
              changed.

       <b>last_pid</b>
              the process ID (PID) of the last background process.

       <b>PWD</b>    the current working directory.

       <b>pipestatus</b>
              a list of exit statuses of all processes that made up the last executed pipe. See <u>exit</u> <u>status</u>.

       <b>SHLVL</b>  the  level  of  nesting of shells. Fish increments this in interactive shells, otherwise it simply
              passes it along.

       <b>status</b> the <u>exit</u> <u>status</u> of the last foreground job to exit. If the job was terminated  through  a  signal,
              the exit status will be 128 plus the signal number.

       <b>status_generation</b>
              the  "generation"  count  of  <b>$status</b>.  This  will  be  incremented only when the previous command
              produced an explicit status. (For example, background jobs will not increment this).

       <b>TERM</b>   the type of the current terminal. When fish tries to determine how the terminal works -  how  many
              colors  it supports, what sequences it sends for keys and other things - it looks at this variable
              and the corresponding information in the terminfo database (see <b>man</b> <b>terminfo</b>).

              Note: Typically this should not be changed as the terminal sets it to the correct value.

       <b>USER</b>   the current username. This variable can be changed.

       <b>EUID</b>   the current effective user id, set by fish at startup. This variable can be changed.

       <b>version</b>
              the  version  of  the  currently  running  fish  (also  available  as  <b>FISH_VERSION</b>  for  backward
              compatibility).

       As  a convention, an uppercase name is usually used for exported variables, while lowercase variables are
       not exported. (<b>CMD_DURATION</b> is an exception for historical reasons). This rule is not enforced  by  fish,
       but it is good coding practice to use casing to distinguish between exported and unexported variables.

       Fish also uses some variables internally, their name usually starting with <b>__fish</b>. These are internal and
       should not typically be modified directly.

   <b>The</b> <b>status</b> <b>variable</b>
       Whenever  a process exits, an exit status is returned to the program that started it (usually the shell).
       This exit status is an integer number, which tells the calling  application  how  the  execution  of  the
       command  went.  In  general,  a  zero  exit status means that the command executed without problem, but a
       non-zero exit status means there was some form of problem.

       Fish stores the exit status of the last process in the last job to exit in the <b>status</b> variable.

       If fish encounters a problem while executing a command, the status variable may also be set to a specific
       value:

       • 0 is generally the exit status of commands if they successfully performed the requested operation.

       • 1 is generally the exit status of commands if they failed to perform the requested operation.

       • 121 is generally the exit status of commands if they were supplied with invalid arguments.

       • 123 means that the command was not executed because the command name contained invalid characters.

       • 124 means that the command was not executed because none of the wildcards in the command  produced  any
         matches.

       • 125  means that while an executable with the specified name was located, the operating system could not
         actually execute the command.

       • 126 means that while a file with the specified name was located, it was not executable.

       • 127 means that no function, builtin or command with the given name could be located.

       If a process exits through a signal, the exit status will be 128 plus the number of the signal.

       The status can be negated with <u>not</u> (or <b>!</b>), which is useful in a <u>condition</u>. This turns a status of 0  into
       1 and any non-zero status into 0.

       There is also <b>$pipestatus</b>, which is a list of all <b>status</b> values of processes in a pipe. One difference is
       that <u>not</u> applies to <b>$status</b>, but not <b>$pipestatus</b>, because it loses information.

       For example:

          not cat file | grep -q fish
          echo status is: $status pipestatus is $pipestatus

       Here  <b>$status</b>  reflects the status of <b>grep</b>, which returns 0 if it found something, negated with <b>not</b> (so 1
       if it found something, 0 otherwise). <b>$pipestatus</b> reflects the status of <b>cat</b> (which returns  non-zero  for
       example when it couldn't find the file) and <b>grep</b>, without the negation.

       So  if both <b>cat</b> and <b>grep</b> succeeded, <b>$status</b> would be 1 because of the <b>not</b>, and <b>$pipestatus</b> would be 0 and
       0.

       It's possible for the first command to fail while the second succeeds. One common  example  is  when  the
       second program quits early.

       For example, if you have a pipeline like:

          cat file1 file2 | head -n 50

       This  will  tell <b>cat</b> to print two files, "file1" and "file2", one after the other, and the <b>head</b> will then
       only print the first 50 lines. In this case you might often see this constellation:

          &gt; cat file1 file2 | head -n 50
          # 50 lines of output
          &gt; echo $pipestatus
          141 0

       Here, the "141" signifies that <b>cat</b> was killed by signal number 13 (128 + 13 == 141) - a <b>SIGPIPE</b>. You  can
       also  use  <u>fish_kill_signal</u> to see the signal number. This happens because it was still working, and then
       <b>head</b> closed the pipe, so <b>cat</b> received a signal that it didn't ignore and so it died.

       Whether <b>cat</b> here will see a SIGPIPE depends on how long the file is and how much it writes  at  once,  so
       you  might  see  a pipestatus of "0 0", depending on the implementation. This is a general unix issue and
       not specific to fish. Some shells feature a "pipefail" feature that will call a pipeline failed if one of
       the processes in it failed, and this is a big problem with it.

   <b>Locale</b> <b>Variables</b>
       The "locale" of a program is its set of language and  regional  settings  that  depend  on  language  and
       cultural convention. In UNIX, these are made up of several categories. The categories are:

       <b>LANG</b>   This  is the typical environment variable for specifying a locale. A user may set this variable to
              express the language they speak, their region, and a character encoding.  The  actual  values  are
              specific to their platform, except for special values like <b>C</b> or <b>POSIX</b>.

              The  value  of  LANG  is  used  for each category unless the variable for that category was set or
              LC_ALL is set. So typically you only need to set LANG.

              An example value might be <b>en_US.UTF-8</b> for the american version of english and the UTF-8  encoding,
              or  <b>de_AT.UTF-8</b>  for the austrian version of german and the UTF-8 encoding.  Your operating system
              might have a <b>locale</b> command that you can call as <b>locale</b> <b>-a</b> to see a list of defined locales.

              A UTF-8 encoding is recommended.

       <b>LC_ALL</b> Overrides the <u>LANG</u> environment variable and the values of the other <b>LC_*</b>  variables.  If  this  is
              set, none of the other variables are used for anything.

              Usually  the  other  variables  should  be used instead. Use LC_ALL only when you need to override
              something.

       <b>LC_COLLATE</b>
              This determines the rules about equivalence of cases and alphabetical ordering: collation.

       <b>LC_CTYPE</b>
              This determines classification rules, like if the type of character is an alpha, digit, and so on.
              Most importantly, it defines the text <u>encoding</u> - which numbers map to which characters. On  modern
              systems, this should typically be something ending in "UTF-8".

       <b>LC_MESSAGES</b>
              <b>LC_MESSAGES</b> determines the language in which messages are diisplayed.

       <b>LC_MONETARY</b>
              Determines currency, how it is formatted, and the symbols used.

       <b>LC_NUMERIC</b>
              Sets the locale for formatting numbers.

       <b>LC_TIME</b>
              Sets the locale for formatting dates and times.

   <b>Builtin</b> <b>commands</b>
       Fish includes a number of commands in the shell directly. We call these "builtins". These include:

       • Builtins that manipulate the shell state - <u>cd</u> changes directory, <u>set</u> sets variables

       • Builtins  for dealing with data, like <u>string</u> for strings and <u>math</u> for numbers, <u>count</u> for counting lines
         or arguments, <u>path</u> for dealing with path

       • <u>status</u> for asking about the shell's status

       • <u>printf</u> and <u>echo</u> for creating output

       • <u>test</u> for checking conditions

       • <u>argparse</u> for parsing function arguments

       • <u>source</u> to read a script in the current shell (so changes to variables  stay)  and  <u>eval</u>  to  execute  a
         string as script

       • <u>random</u> to get random numbers or pick a random element from a list

       • <u>read</u> for reading from a pipe or the terminal

       For a list of all builtins, use <b>builtin</b> <b>-n</b>.

       For  a  list  of  all  builtins,  functions and commands shipped with fish, see the <u>list</u> <u>of</u> <u>commands</u>. The
       documentation is also available by using the <b>--help</b> switch.

   <b>Command</b> <b>lookup</b>
       When fish is told to run something, it goes through multiple steps to find it.

       If it contains a <b>/</b>, fish tries to execute the given file, from the current directory on.

       If it doesn't contain a <b>/</b>, it could be a function, builtin, or external command, and so fish goes through
       the full lookup.

       In order:

       1. It tries to resolve it as a <u>function</u>.

          • If the function is already known, it uses that

          • If there is a file of the name with a ".fish" suffix in <u>fish_function_path</u>, it <u>loads</u> <u>that</u>. (If there
            is more than one file only the first is used)

          • If the function is now defined it uses that

       2. It tries to resolve it as a <u>builtin</u>.

       3. It tries to find an executable file in <u>PATH</u>.

          • If it finds a file, it tells the kernel to run it.

          • If the kernel knows how to run the file (e.g. via a <b>#!</b> line - <b>#!<a href="file:/bin/sh">/bin/sh</a></b>  or  <b>#!/usr/bin/python</b>),  it
            does it.

          • If  the kernel reports that it couldn't run it because of a missing interpreter, and the file passes
            a rudimentary check, fish tells <b><a href="file:/bin/sh">/bin/sh</a></b> to run it.

       If none of these work, fish runs the function <u>fish_command_not_found</u> and sets <u>status</u> to 127.

       You can use <u>type</u> to see how fish resolved something:

          &gt; type --short --all echo
          echo is a builtin
          echo is <a href="file:///usr/lib/w3m/cgi-bin/w3mman2html.cgi?echo">/usr/bin/echo</a>

   <b>Querying</b> <b>for</b> <b>user</b> <b>input</b>
       Sometimes, you want to ask the user for input, for instance to confirm something. This can be  done  with
       the <u>read</u> builtin.

       Let's  make up an example. This function will <u>glob</u> the files in all the directories it gets as <u>arguments</u>,
       and <u>if</u> there are <u>more</u> <u>than</u> <u>five</u> it will ask the user if it is supposed to show them, but only  if  it  is
       connected to a terminal:

          function show_files
              # This will glob on all arguments. Any non-directories will be ignored.
              set -l files $argv/*

              # If there are more than 5 files
              if test (count $files) -gt 5
                  # and both stdin (for reading input)
                  # and stdout (for writing the prompt)
                  # are terminals
                  and isatty stdin
                  and isatty stdout
                  # Keep asking until we get a valid response
                  while read --nchars 1 -l response --prompt-str="Are you sure? (y/n)"
                        or return 1 # if the read was aborted with ctrl-c/ctrl-d
                      switch $response
                          case y Y
                              echo Okay
                              # We break out of the while and go on with the function
                              break
                          case n N
                              # We return from the function without printing
                              echo Not showing
                              return 1
                          case '*'
                              # We go through the while loop and ask again
                              echo Not valid input
                              continue
                      end
                  end
              end

              # And now we print the files
              printf '%s\n' $files
          end

       If  you run this as <b>show_files</b> <b>/</b>, it will most likely ask you until you press Y/y or N/n. If you run this
       as <b>show_files</b> <b>/</b> <b>|</b> <b>cat</b>, it will print the files without asking. If you run this as <b>show_files</b> <b>.</b>, it  might
       just print something without asking because there are fewer than five files.

   <b>Shell</b> <b>variable</b> <b>and</b> <b>function</b> <b>names</b>
       The names given to variables and functions (so-called "identifiers") have to follow certain rules:

       • A variable name cannot be empty. It can contain only letters, digits, and underscores. It may begin and
         end with any of those characters.

       • A  function  name  cannot  be  empty.  It may not begin with a hyphen ("-") and may not contain a slash
         ("/"). All other characters, including a space, are valid. A function name also can't be the same as  a
         reserved keyword or essential builtin like <b>if</b> or <b>set</b>.

       • A bind mode name (e.g., <b>bind</b> <b>-m</b> <b>abc</b> <b>...</b>) must be a valid variable name.

       Other things have other restrictions. For instance what is allowed for file names depends on your system,
       but  at  the  very  least  they  cannot  contain  a "/" (because that is the path separator) or NULL byte
       (because that is how UNIX ends strings).

   <b>Configuration</b> <b>files</b>
       When fish is started, it reads and runs its  configuration  files.  Where  these  are  depends  on  build
       configuration and environment variables.

       The main file is <b><a href="file:~/.config/fish/config.fish">~/.config/fish/config.fish</a></b> (or more precisely <b>$XDG_CONFIG_HOME/fish/config.fish</b>).

       Configuration files are run in the following order:

       • Configuration snippets (named <b>*.fish</b>) in the directories:

         • <b>$__fish_config_dir/conf.d</b> (by default, <b><a href="file:~/.config/fish/conf.d/">~/.config/fish/conf.d/</a></b>)

         • <b>$__fish_sysconf_dir/conf.d</b> (by default, <b>/etc/fish/conf.d/</b>)

         • Directories for others to ship configuration snippets for their software:

           • the  directories  under  <b>$__fish_user_data_dir</b>  (usually  <b><a href="file:~/.local/share/fish">~/.local/share/fish</a></b>,  controlled  by  the
             <b>XDG_DATA_HOME</b> environment variable)

           • a  <b>fish/vendor_conf.d</b>  directory   in   the   directories   listed   in   <b>$XDG_DATA_DIRS</b>   (default
             <b><a href="file:/usr/share/fish/vendor_conf.d">/usr/share/fish/vendor_conf.d</a></b> and <b>/usr/local/share/fish/vendor_conf.d</b>)

           These  directories  are  also  accessible  in  <b>$__fish_vendor_confdirs</b>.  Note that changing that in a
           running fish won't do anything as by that point the directories have already been read.

         If there are multiple files with the same name in these directories, only the first will  be  executed.
         They  are  executed in order of their filename, sorted (like globs) in a natural order (i.e. "01" sorts
         before "2").

       • System-wide configuration files, where administrators can include initialization for all users  on  the
         system   -   similar   to  <b><a href="file:/etc/profile">/etc/profile</a></b>  for  POSIX-style  shells  -  in  <b>$__fish_sysconf_dir</b>  (usually
         <b>/etc/fish/config.fish</b>).

       • User  configuration,  usually  in  <b><a href="file:~/.config/fish/config.fish">~/.config/fish/config.fish</a></b>  (controlled   by   the   <b>XDG_CONFIG_HOME</b>
         environment variable, and accessible as <b>$__fish_config_dir</b>).

       <b><a href="file:~/.config/fish/config.fish">~/.config/fish/config.fish</a></b>  is  sourced <u>after</u> the snippets. This is so you can copy snippets and override
       some of their behavior.

       These files are all executed on the startup of every shell. If you want to run a command only on starting
       an interactive shell, use the exit status of the command <b>status</b>  <b>--is-interactive</b>  to  determine  if  the
       shell  is  interactive. If you want to run a command only when using a login shell, use <b>status</b> <b>--is-login</b>
       instead. This will speed up the starting of non-interactive or non-login shells.

       If you are developing another program, you may want to add configuration for  all  users  of  fish  on  a
       system.  This is discouraged; if not carefully written, they may have side-effects or slow the startup of
       the shell. Additionally, users of other  shells  won't  benefit  from  the  fish-specific  configuration.
       However, if they are required, you can install them to the "vendor" configuration directory. As this path
       may  vary  from system to system, <b>pkg-config</b> should be used to discover it: <b>pkg-config</b> <b>--variable</b> <b>confdir</b>
       <b>fish</b>.

       For system integration, fish also ships a file called <b>__fish_build_paths.fish</b>.  This  can  be  customized
       during build, for instance because your system requires special paths to be used.

   <b>Future</b> <b>feature</b> <b>flags</b>
       Feature  flags  are  how fish stages changes that might break scripts. Breaking changes are introduced as
       opt-in, in a few releases they become opt-out, and eventually the old behavior is removed.

       You can see the current list of features via <b>status</b> <b>features</b>:

          &gt; status features
          stderr-nocaret          on  3.0 ^ no longer redirects stderr
          qmark-noglob            on  3.0 ? no longer globs
          regex-easyesc           on  3.1 string replace -r needs fewer \\'s
          ampersand-nobg-in-token on  3.4 &amp; only backgrounds if followed by a separating character
          remove-percent-self     off 4.0 %self is no longer expanded (use $fish_pid)
          test-require-arg        off 4.0 builtin test requires an argument
          keyboard-protocols      on  4.0 Use keyboard protocols (kitty, xterm's modifyotherkeys

       Here is what they mean:

       • <b>stderr-nocaret</b> was introduced in fish 3.0 and cannot be turned off since fish  3.5.  It  can  still  be
         tested  for  compatibility,  but  a  <b>no-stderr-nocaret</b> value will simply be ignored. The flag made <b>^</b> an
         ordinary character instead of denoting an stderr redirection. Use <b>2&gt;</b> instead.

       • <b>qmark-noglob</b> was also introduced in fish 3.0 (and made the default in 4.0).  It  makes  <b>?</b>  an  ordinary
         character instead of a single-character glob. Use a <b>*</b> instead (which will match multiple characters) or
         find other ways to match files like <b>find</b>.

       • <b>regex-easyesc</b>  was  introduced  in  3.1  (and  made the default in 3.5). It makes it so the replacement
         expression in <b>string</b> <b>replace</b> <b>-r</b> does one fewer round of escaping. Before, to  escape  a  backslash  you
         would  have to use <b>string</b> <b>replace</b> <b>-ra</b> <b>'([ab])'</b> <b>'\\\\\\\\$1'</b>. After, just <b>'\\\\$1'</b> is enough. Check your
         <b>string</b> <b>replace</b> calls if you use this anywhere.

       • <b>ampersand-nobg-in-token</b> was introduced in fish 3.4 (and made the default in 3.5). It makes it so a <b>&amp;</b>  i
         no  longer  interpreted  as  the  backgrounding operator in the middle of a token, so dealing with URLs
         becomes easier. Either put spaces or a semicolon after the <b>&amp;</b>. This is  recommended  formatting  anyway,
         and <b>fish_indent</b> will have done it for you already.

       • <b>remove-percent-self</b> turns off the special <b>%self</b> expansion. It was introduced in 4.0. To get fish's pid,
         you can use the <u>fish_pid</u> variable.

       • <b>test-require-arg</b>  removes <u>builtin</u> <u>test</u>'s one-argument form (<b>test</b> <b>"string"</b>. It was introduced in 4.0. To
         test if a string is non-empty, use <b>test</b> <b>-n</b> <b>"string"</b>. If disabled, any call to <b>test</b>  that  would  change
         sends a <u>debug</u> <u>message</u> of category "deprecated-test", so starting fish with <b>fish</b> <b>--debug=deprecated-test</b>
         can be used to find offending calls.

       • <b>keyboard-protocols</b>  lets fish turn on various keyboard protocols including the kitty keyboard protocol.
         It was introduced in 4.0 and is on by default.  Disable it with <b>no-keyboard-protocols</b>  to  work  around
         bugs in your terminal.

       These changes are introduced off by default. They can be enabled on a per session basis:

          &gt; fish --features qmark-noglob,regex-easyesc

       or opted into globally for a user:

          &gt; set -U fish_features regex-easyesc qmark-noglob

       Features  will  only  be  set  on  startup,  so this variable will only take effect if it is universal or
       exported.

       You can also use the version as a group, so <b>3.0</b> is equivalent  to  "stderr-nocaret"  and  "qmark-noglob".
       Instead of a version, the special group <b>all</b> enables all features.

       Prefixing a feature with <b>no-</b> turns it off instead. E.g. to reenable the <b>?</b> single-character glob:

          set -Ua fish_features no-qmark-noglob

   <b>Event</b> <b>handlers</b>
       When  defining  a  new function in fish, it is possible to make it into an event handler, i.e. a function
       that is automatically run when a specific event takes place. Events that can trigger a handler  currently
       are:

       • When a signal is delivered

       • When a job exits

       • When the value of a variable is updated

       • When the prompt is about to be shown

       Example:

       To specify a signal handler for the WINCH signal, write:

          function my_signal_handler --on-signal WINCH
              echo Got WINCH signal!
          end

       Fish already has the following named events for the <b>--on-event</b> switch:

       • <b>fish_prompt</b> is emitted whenever a new fish prompt is about to be displayed.

       • <b>fish_preexec</b> is emitted right before executing an interactive command. The commandline is passed as the
         first parameter. Not emitted if command is empty.

       • <b>fish_posterror</b> is emitted right after executing a command with syntax errors. The commandline is passed
         as the first parameter.

       • <b>fish_postexec</b> is emitted right after executing an interactive command. The commandline is passed as the
         first parameter. Not emitted if command is empty.

       • <b>fish_exit</b> is emitted right before fish exits.

       • <b>fish_cancel</b> is emitted when a commandline is cleared.

       • <b>fish_focus_in</b> is emitted when fish's terminal gains focus.

       • <b>fish_focus_out</b> is emitted when fish's terminal loses focus.

       Events  can  be fired with the <u>emit</u> command, and do not have to be defined before. The names just need to
       match. For example:

          function handler --on-event imdone
              echo generator is done $argv
          end

          function generator
              sleep 1
              # The "imdone" is the name of the event
              # the rest is the arguments to pass to the handler
              emit imdone with $argv
          end

       If there are multiple handlers for an event, they will all be run, but the  order  might  change  between
       fish releases, so you should not rely on it.

       Please  note  that  event  handlers only become active when a function is loaded, which means you need to
       otherwise <u>source</u> or execute a function instead of relying on <u>autoloading</u>. One approach is to put it  into
       your <u>configuration</u> <u>file</u>.

       For more information on how to define new event handlers, see the documentation for the <u>function</u> command.

   <b>Debugging</b> <b>fish</b> <b>scripts</b>
       Fish  includes  basic  built-in  debugging  facilities that allow you to stop execution of a script at an
       arbitrary point. When this happens you are presented with an interactive prompt where you can execute any
       fish command to inspect or change state (there are no debug commands as such). For example, you can check
       or change the value of any variables using <u>printf</u> and  <u>set</u>.  As  another  example,  you  can  run  <u>status</u>
       <u>print-stack-trace</u>  to  see  how  the  current  breakpoint  was reached. To resume normal execution of the
       script, simply type <u>exit</u> or <b>ctrl-d</b>.

       To start a debug session simply insert the <u>builtin</u> <u>command</u> <b>breakpoint</b> at  the  point  in  a  function  or
       script  where  you wish to gain control, then run the function or script. Also, the default action of the
       <b>TRAP</b> signal is to call this builtin, meaning a running script can be actively debugged by sending it  the
       <b>TRAP</b>  signal  (<b>kill</b>  <b>-s</b>  <b>TRAP</b>  <b>&lt;PID&gt;</b>).  There  is  limited support for interactively setting or modifying
       breakpoints from this debug prompt: it is possible to insert new breakpoints in (or remove old ones from)
       other functions by using the <b>funced</b> function to edit the definition of a function, but it is not possible
       to add or remove a breakpoint from the function/script currently loaded and being executed.

       Another way to debug script issues is to set the <u>fish_trace</u> variable, e.g.  <b>fish_trace=1</b>  <b>fish_prompt</b>  to
       see which commands fish executes when running the <u>fish_prompt</u> function.

   <b>Profiling</b> <b>fish</b> <b>scripts</b>
       If   you   specifically   want  to  debug  performance  issues,  <b>fish</b>  can  be  run  with  the  <b>--profile</b>
       <b>/path/to/profile.log</b> option to save a profile  to  the  specified  path.  This  profile  log  includes  a
       breakdown of how long each step in the execution took.

       For example:

          &gt; fish --profile /tmp/sleep.prof -ic 'sleep 3s'
          &gt; cat /tmp/sleep.prof
          Time    Sum     Command
          3003419 3003419 &gt; sleep 3s

       This  will  show the time for each command itself in the first column, the time for the command and every
       subcommand (like any commands inside of a <u>function</u> or  <u>command</u>  <u>substitutions</u>)  in  the  second  and  the
       command itself in the third, separated with tabs.

       The time is given in microseconds.

       To see the slowest commands last, <b>sort</b> <b>-nk2</b> <b>/path/to/logfile</b> is useful.

       For profiling fish's startup there is also <b>--profile-startup</b> <b>/path/to/logfile</b>.

       See <u>fish</u> for more information.

   <b>Commands</b>
       This is a list of all the commands fish ships with.

       Broadly speaking, these fall into a few categories:

   <b>Keywords</b>
       Core language keywords that make up the syntax, like

       • <u>if</u> and <u>else</u> for conditions.

       • <u>for</u> and <u>while</u> for loops.

       • <u>break</u> and <u>continue</u> to control loops.

       • <u>function</u> to define functions.

       • <u>return</u> to return a status from a function.

       • <u>begin</u> to begin a block and <u>end</u> to end any block (including ifs and loops).

       • <u>and</u>, <u>or</u> and <u>not</u> to combine commands logically.

       • <u>switch</u> and <u>case</u> to make multiple blocks depending on the value of a variable.

       • <u>command</u> or <u>builtin</u> to tell fish what sort of thing to execute

       • <u>time</u> to time execution

       • <u>exec</u> tells fish to replace itself with a command.

       • <u>end</u> to end a block

   <b>Tools</b>
       Builtins to do a task, like

       • <u>cd</u> to change the current directory.

       • <u>echo</u> or <u>printf</u> to produce output.

       • <u>set_color</u> to colorize output.

       • <u>set</u> to set, query or erase variables.

       • <u>read</u> to read input.

       • <u>string</u> for string manipulation.

       • <u>path</u> for filtering paths and handling their components.

       • <u>math</u> does arithmetic.

       • <u>argparse</u> to make arguments easier to handle.

       • <u>count</u> to count arguments.

       • <u>type</u>  to find out what sort of thing (command, builtin or function) fish would call, or if it exists at
         all.

       • <u>test</u> checks conditions like if a file exists or a string is empty.

       • <u>contains</u> to see if a list contains an entry.

       • <u>eval</u> and <u>source</u> to run fish code from a string or file.

       • <u>status</u> to get shell information, like whether it's interactive or a login shell, or which  file  it  is
         currently running.

       • <u>abbr</u> manages <u>Abbreviations</u>.

       • <u>bind</u> to change bindings.

       • <u>complete</u> manages <u>completions</u>.

       • <u>commandline</u> to get or change the commandline contents.

       • <u>fish_config</u> to easily change fish's configuration, like the prompt or colorscheme.

       • <u>random</u> to generate random numbers or pick from a list.

   <b>Known</b> <b>functions</b>
       Known  functions  are  a  customization  point. You can change them to change how your fish behaves. This
       includes:

       • <u>fish_prompt</u> and <u>fish_right_prompt</u> and <u>fish_mode_prompt</u> to print your prompt.

       • <u>fish_command_not_found</u> to tell fish what to do when a command is not found.

       • <u>fish_title</u> to change the terminal's title.

       • <u>fish_greeting</u> to show a greeting when fish starts.

       • <u>fish_should_add_to_history</u> to determine if a command should be added to history

   <b>Helper</b> <b>functions</b>
       Some helper functions, often to give you information for use in your prompt:

       • <u>fish_git_prompt</u> and <u>fish_hg_prompt</u> to print information about the current git or mercurial repository.

       • <u>fish_vcs_prompt</u> to print information for either.

       • <u>fish_svn_prompt</u> to print information about the current svn repository.

       • <u>fish_status_to_signal</u> to give a signal name from a return status.

       • <u>prompt_pwd</u> to give the current directory in a nicely formatted and shortened way.

       • <u>prompt_login</u> to describe the current login, with user and hostname, and to explain  if  you  are  in  a
         chroot or connected via ssh.

       • <u>prompt_hostname</u> to give the hostname, shortened for use in the prompt.

       • <u>fish_is_root_user</u> to check if the current user is an administrator user like root.

       • <u>fish_add_path</u> to easily add a path to $PATH.

       • <u>alias</u> to quickly define wrapper functions ("aliases").

       • <u>fish_delta</u> to show what you have changed from the default configuration.

       • <u>export</u> as a compatibility function for other shells.

   <b>Helper</b> <b>commands</b>
       fish also ships some things as external commands so they can be easily called from elsewhere.

       This  includes  <u>fish_indent</u>  to  format  fish code and <u>fish_key_reader</u> to show you what escape sequence a
       keypress produces.

   <b>The</b> <b>full</b> <b>list</b>
       And here is the full list:

   <b>_</b> <b>-</b> <b>call</b> <b>fish's</b> <b>translations</b>
   <b>Synopsis</b>
       <b>_</b> <u>STRING</u>

   <b>Description</b>
       <b>_</b> translates its arguments into the current language, if possible.

       It is equivalent to <b>gettext</b> <b>fish</b> <b>STRING</b>, meaning it can only be used to look up fish's own translations.

       It requires fish to be built with  gettext  support.  If  that  support  is  disabled,  or  there  is  no
       translation it will simply echo the argument back.

       The language depends on the current locale, set with <u>LANG</u> and <u>LC_MESSAGES</u>.

   <b>Options</b>
       <b>_</b> takes no options.

   <b>Examples</b>
          &gt; _ File
          Datei

   <b>abbr</b> <b>-</b> <b>manage</b> <b>fish</b> <b>abbreviations</b>
   <b>Synopsis</b>
       <b>abbr</b> <b>--add</b> <u>NAME</u> [<b>--position</b> <b>command</b> | <b>anywhere</b>] [<b>-r</b> | <b>--regex</b> <u>PATTERN</u>] [<b>-c</b> | <b>--command</b> <u>COMMAND</u>]
                       [<b>--set-cursor</b>[<b>=</b><u>MARKER</u>]] ([<b>-f</b> | <b>--function</b> <u>FUNCTION</u>] | <u>EXPANSION</u>)
       <b>abbr</b> <b>--erase</b> <u>NAME</u> ...
       <b>abbr</b> <b>--rename</b> <u>OLD_WORD</u> <u>NEW_WORD</u>
       <b>abbr</b> <b>--show</b>
       <b>abbr</b> <b>--list</b>
       <b>abbr</b> <b>--query</b> <u>NAME</u> ...

   <b>Description</b>
       <b>abbr</b> manages abbreviations - user-defined words that are replaced with longer phrases when entered.

       <b>NOTE:</b>
          Only typed-in commands use abbreviations. Abbreviations are not expanded in scripts.

       For  example,  a  frequently-run command like <b>git</b> <b>checkout</b> can be abbreviated to <b>gco</b>.  After entering <b>gco</b>
       and pressing <b>space</b> or <b>enter</b>, the full text <b>git</b> <b>checkout</b> will  appear  in  the  command  line.   To  avoid
       expanding  something  that  looks  like  an  abbreviation, the default <b>ctrl-space</b> binding inserts a space
       without expanding.

       An abbreviation may match a literal word, or it may match a pattern given by a regular  expression.  When
       an  abbreviation  matches a word, that word is replaced by new text, called its <u>expansion</u>. This expansion
       may be a fixed new phrase, or it can be dynamically created via a fish function.  This  expansion  occurs
       after pressing space or enter.

       Combining these features, it is possible to create custom syntaxes, where a regular expression recognizes
       matching tokens, and the expansion function interprets them. See the <u>Examples</u> section.

       Changed  in version 3.6.0: Previous versions of this allowed saving abbreviations in universal variables.
       That's no longer possible. Existing variables will still be imported and <b>abbr</b> <b>--erase</b> will also erase the
       variables.  We recommend adding abbreviations to <u>config.fish</u> by just adding the <b>abbr</b> <b>--add</b> command.  When
       you run <b>abbr</b>, you will see output like this

          &gt; abbr
          abbr -a -- foo bar # imported from a universal variable, see `help abbr`

       In that case you should take the part before the <b>#</b> comment and save it in <u>config.fish</u>, then you  can  run
       <b>abbr</b> <b>--erase</b> to remove the universal variable:

          &gt; abbr &gt;&gt; <a href="file:~/.config/fish/config.fish">~/.config/fish/config.fish</a>
          &gt; abbr --erase (abbr --list)

       Alternatively you can keep them in a separate <u>configuration</u> <u>file</u> by doing something like the following:

          &gt; abbr &gt; <a href="file:~/.config/fish/conf.d/myabbrs.fish">~/.config/fish/conf.d/myabbrs.fish</a>

       This  will  save all your abbreviations in "myabbrs.fish", overwriting the whole file so it doesn't leave
       any duplicates, or restore abbreviations you had erased.  Of course any functions will have to  be  saved
       separately, see <u>funcsave</u>.

   <b>"add"</b> <b>subcommand</b>
       <b>abbr</b> [<b>-a</b> | <b>--add</b>] <u>NAME</u> [<b>--position</b> <b>command</b> | <b>anywhere</b>] [<b>-r</b> | <b>--regex</b> <u>PATTERN</u>]
            [<b>-c</b> | <b>--command</b> <u>COMMAND</u>] [<b>--set-cursor</b>[<b>=</b><u>MARKER</u>]] ([<b>-f</b> | <b>--function</b> <u>FUNCTION</u>] | <u>EXPANSION</u>)

       <b>abbr</b> <b>--add</b> creates a new abbreviation. With no other options, the string <b>NAME</b> is replaced by <b>EXPANSION</b>.

       With  <b>--position</b> <b>command</b>, the abbreviation will only expand when it is positioned as a command, not as an
       argument to another command. With <b>--position</b> <b>anywhere</b> the abbreviation may expand anywhere in the command
       line. The default is <b>command</b>.

       With <b>--command</b> <b>COMMAND</b>, the abbreviation will only expand when it is used as an  argument  to  the  given
       COMMAND.  Multiple  <b>--command</b>  can  be used together, and the abbreviation will expand for each. An empty
       <b>COMMAND</b> means it will expand only when there is no command. <b>--command</b>  implies  <b>--position</b>  <b>anywhere</b>  and
       disallows  <b>--position</b>  <b>command</b>.  Even  with  different <b>COMMANDS</b>, the <b>NAME</b> of the abbreviation needs to be
       unique. Consider using <b>--regex</b> if you want to expand the same word differently for multiple commands.

       With <b>--regex</b>, the abbreviation matches using the regular expression given  by  <b>PATTERN</b>,  instead  of  the
       literal  <b>NAME</b>. The pattern is interpreted using PCRE2 syntax and must match the entire token. If multiple
       abbreviations match the same token, the last abbreviation added is used.

       With <b>--set-cursor=MARKER</b>, the cursor is moved to the first occurrence of <b>MARKER</b>  in  the  expansion.  The
       <b>MARKER</b>  value  is erased. The <b>MARKER</b> may be omitted (i.e. simply <b>--set-cursor</b>), in which case it defaults
       to <b>%</b>.

       With <b>-f</b> <b>FUNCTION</b> or <b>--function</b> <b>FUNCTION</b>, <b>FUNCTION</b> is treated as the name of a fish function instead of  a
       literal  replacement.  When the abbreviation matches, the function will be called with the matching token
       as an argument. If the function's exit status  is  0  (success),  the  token  will  be  replaced  by  the
       function's output; otherwise the token will be left unchanged. No <b>EXPANSION</b> may be given separately.

   <b>Examples</b>
          abbr --add gco git checkout

       Add a new abbreviation where <b>gco</b> will be replaced with <b>git</b> <b>checkout</b>.

          abbr -a --position anywhere -- -C --color

       Add a new abbreviation where <b>-C</b> will be replaced with <b>--color</b>. The <b>--</b> allows <b>-C</b> to be treated as the name
       of the abbreviation, instead of an option.

          abbr -a L --position anywhere --set-cursor "% | less"

       Add a new abbreviation where <b>L</b> will be replaced with <b>|</b> <b>less</b>, placing the cursor before the pipe.

          function last_history_item
              echo $history[1]
          end
          abbr -a !! --position anywhere --function last_history_item

       This  first  creates a function <b>last_history_item</b> which outputs the last entered command. It then adds an
       abbreviation which replaces <b>!!</b> with the result of calling this function. Taken together, this is  similar
       to the <b>!!</b> history expansion feature of bash.

          function vim_edit
              echo vim $argv
          end
          abbr -a vim_edit_texts --position command --regex ".+\.txt" --function vim_edit

       This  first  creates  a  function  <b>vim_edit</b>  which  prepends  <b>vim</b>  before  its  argument. It then adds an
       abbreviation which matches commands ending in <b>.txt</b>, and replaces the command with the result  of  calling
       this  function.  This allows text files to be "executed" as a command to open them in vim, similar to the
       "suffix alias" feature in zsh.

          abbr 4DIRS --set-cursor=! "$(string join \n -- 'for dir in */' 'cd $dir' '!' 'cd ..' 'end')"

       This creates an abbreviation "4DIRS" which expands to a multi-line loop "template." The  template  enters
       each  directory  and  then  leaves it. The cursor is positioned ready to enter the command to run in each
       directory, at the location of the <b>!</b>, which is itself erased.

          abbr --command git co checkout

       Turns "co" as an argument to "git" into "checkout". Multiple commands  are  possible,  <b>--command={git,hg}</b>
       would expand "co" to "checkout" for both git and hg.

   <b>Other</b> <b>subcommands</b>
          abbr --rename OLD_NAME NEW_NAME

       Renames an abbreviation, from <u>OLD_NAME</u> to <u>NEW_NAME</u>

          abbr [-s | --show]

       Show all abbreviations in a manner suitable for import and export

          abbr [-l | --list]

       Prints the names of all abbreviation

          abbr [-e | --erase] NAME

       Erases the abbreviation with the given name

          abbr -q or --query [NAME...]

       Return 0 (true) if one of the <u>NAME</u> is an abbreviation.

          abbr -h or --help

       Displays help for the <u>abbr</u> command.

   <b>alias</b> <b>-</b> <b>create</b> <b>a</b> <b>function</b>
   <b>Synopsis</b>
       <b>alias</b>
       <b>alias</b> [<b>--save</b>] <u>NAME</u> <u>DEFINITION</u>
       <b>alias</b> [<b>--save</b>] <u>NAME</u><b>=</b><u>DEFINITION</u>

   <b>Description</b>
       NOTE: This page documents the fish builtin <b>alias</b>.  To see the documentation on any non-fish versions, use
       <b>command</b> <b>man</b> <b>alias</b>.

       <b>alias</b>  is  a simple wrapper for the <b>function</b> builtin, which creates a function wrapping a command. It has
       similar syntax to POSIX shell <b>alias</b>. For other uses, it is recommended to define a <u>function</u>.

       If you want to ease your interactive use, to save typing, consider using an <u>abbreviation</u> instead.

       <b>fish</b> marks functions that have been created by <b>alias</b> by including the command used to create them in  the
       function  description. You can list <b>alias</b>-created functions by running <b>alias</b> without arguments. They must
       be erased using <b>functions</b> <b>-e</b>.

       • <b>NAME</b> is the name of the alias

       • <b>DEFINITION</b> is the actual command to execute. <b>alias</b> automatically appends <b>$argv</b>, so that all  parameters
         used with the alias are passed to the actual command.

       You  cannot  create an alias to a function with the same name. Note that spaces need to be escaped in the
       call to <b>alias</b> just like at the command line, <u>even</u> <u>inside</u> <u>quoted</u> <u>parts</u>.

       The following options are available:

       <b>-h</b> or <b>--help</b>
              Displays help about using this command.

       <b>-s</b> or <b>--save</b>
              Saves the function created by the alias into your fish configuration directory using <u>funcsave</u>.

   <b>Example</b>
       The following code will create <b>rmi</b>, which runs <b>rm</b> with additional arguments on every invocation.

          alias rmi="rm -i"

          # This is equivalent to entering the following function:
          function rmi --wraps rm --description 'alias rmi=rm -i'
              rm -i $argv
          end

       <b>alias</b> sometimes requires escaping, as you can see here:

          # This needs to have the spaces escaped or "Chrome.app..."
          # will be seen as an argument to "/Applications/Google":
          alias chrome='/Applications/Google\ Chrome.app/Contents/MacOS/Google\ Chrome'

   <b>See</b> <b>more</b>
       1. The <u>function</u> command this builds on.

       2. <u>Functions</u>.

       3. <u>Defining</u> <u>aliases</u>.

   <b>and</b> <b>-</b> <b>conditionally</b> <b>execute</b> <b>a</b> <b>command</b>
   <b>Synopsis</b>
       <u>PREVIOUS</u><b>;</b> <b>and</b> <u>COMMAND</u>

   <b>Description</b>
       <b>and</b> is used to execute a command if the previous command was successful (returned a status of 0).

       <b>and</b> statements may be used as part of the condition in an <u>while</u> or <u>if</u> block.

       <b>and</b> does not change the current exit status itself, but the command it runs most likely  will.  The  exit
       status of the last foreground command to exit can always be accessed using the <u>$status</u> variable.

       The <b>-h</b> or <b>--help</b> option displays help about using this command.

   <b>Example</b>
       The following code runs the <b>make</b> command to build a program. If the build succeeds, <b>make</b>'s exit status is
       0, and the program is installed. If either step fails, the exit status is 1, and <b>make</b> <b>clean</b> is run, which
       removes the files created by the build process.

          make; and make install; or make clean

   <b>See</b> <b>Also</b>
       • <u>or</u> command

       • <u>not</u> command

   <b>argparse</b> <b>-</b> <b>parse</b> <b>options</b> <b>passed</b> <b>to</b> <b>a</b> <b>fish</b> <b>script</b> <b>or</b> <b>function</b>
   <b>Synopsis</b>
       <b>argparse</b> [<u>OPTIONS</u>] <u>OPTION_SPEC</u> ... <b>--</b> [<u>ARG</u> ...]

   <b>Description</b>
       This  command  makes  it easy for fish scripts and functions to handle arguments. You pass arguments that
       define the known options, followed by a literal <b>--</b>, then the arguments to be  parsed  (which  might  also
       include a literal <b>--</b>). <b>argparse</b> then sets variables to indicate the passed options with their values, and
       sets <b>$argv</b> to the remaining arguments. See the <u>usage</u> section below.

       Each  option  specification (<b>OPTION_SPEC</b>) is written in the <u>domain</u> <u>specific</u> <u>language</u> described below. All
       OPTION_SPECs must appear after any argparse flags  and  before  the  <b>--</b>  that  separates  them  from  the
       arguments to be parsed.

       Each  option  that  is  seen in the ARG list will result in variables named <b>_flag_X</b>, where <b>X</b> is the short
       flag letter and the long flag name (if they are  defined).  For  example  a  <b>--help</b>  option  could  cause
       argparse to define one variable called <b>_flag_h</b> and another called <b>_flag_help</b>.

       The  variables will be set with local scope (i.e., as if the script had done <b>set</b> <b>-l</b> <b>_flag_X</b>). If the flag
       is a boolean (that is, it just is passed or not, it doesn't have a value) the values are  the  short  and
       long  flags  seen. If the option is not a boolean the values will be zero or more values corresponding to
       the values collected when the ARG list is processed. If the flag was not seen the flag variable will  not
       be set.

   <b>Options</b>
       The following <b>argparse</b> options are available. They must appear before all <u>OPTION_SPEC</u>s:

       <b>-n</b> or <b>--name</b>
              The  command name for use in error messages. By default the current function name will be used, or
              <b>argparse</b> if run outside of a function.

       <b>-x</b> or <b>--exclusive</b> <u>OPTIONS</u>
              A comma separated list of options that are mutually exclusive. You can use this more than once  to
              define  multiple sets of mutually exclusive options.  You give either the short or long version of
              each option, and you still need to otherwise define the options.

       <b>-N</b> or <b>--min-args</b> <u>NUMBER</u>
              The minimum number of acceptable non-option arguments. The default is zero.

       <b>-X</b> or <b>--max-args</b> <u>NUMBER</u>
              The maximum number of acceptable non-option arguments. The default is infinity.

       <b>-i</b> or <b>--ignore-unknown</b>
              Ignores unknown options, keeping them and their arguments in $argv instead.

       <b>-s</b> or <b>--stop-nonopt</b>
              Causes scanning the arguments to stop as soon as the first  non-option  argument  is  seen.  Among
              other things, this is useful to implement subcommands that have their own options.

       <b>-h</b> or <b>--help</b>
              Displays help about using this command.

   <b>Usage</b>
       To use this command, pass the option specifications (<b>OPTION_SPEC</b>), a mandatory <b>--</b>, and then the arguments
       to be parsed.

       A simple example:

          argparse 'h/help' 'n/name=' -- $argv
          or return

       If  <b>$argv</b> is empty then there is nothing to parse and <b>argparse</b> returns zero to indicate success. If <b>$argv</b>
       is not empty then it is checked for flags <b>-h</b>, <b>--help</b>, <b>-n</b> and <b>--name</b>. If they are found they  are  removed
       from  the  arguments  and  local  variables called <b>_flag_OPTION</b> are set so the script can determine which
       options were seen. If <b>$argv</b> doesn't have any errors, like an unknown option or a missing mandatory  value
       for  an option, then <b>argparse</b> exits with a status of zero. Otherwise it writes appropriate error messages
       to stderr and exits with a status of one.

       The <b>or</b> <b>return</b> means that the function returns <b>argparse</b>'s status if it failed, so if it goes  on  <b>argparse</b>
       succeeded.

       To use the flags argparse has extracted:

          # Checking for _flag_h and _flag_help is equivalent
          # We check if it has been given at least once
          if set -ql _flag_h
              echo "Usage: my_function [-h | --help] [-n | --name=NAME]" &gt;&amp;2
              return 1
          end

          set -l myname somedefault
          set -ql _flag_name[1]
          and set myname $_flag_name[-1] # here we use the *last* --name=

       Any  characters  in  the flag name that are not valid in a variable name (like <b>-</b> dashes) will be replaced
       with underscores.

       The <b>--</b> argument is required. You do not have to include any option specifications or arguments after  the
       <b>--</b> but you must include the <b>--</b>. For example, this is acceptable:

          set -l argv foo
          argparse 'h/help' 'n/name' -- $argv
          argparse --min-args=1 -- $argv

       But this is not:

          set -l argv
          argparse 'h/help' 'n/name' $argv

       The  first <b>--</b> seen is what allows the <b>argparse</b> command to reliably separate the option specifications and
       options to <b>argparse</b> itself (like <b>--ignore-unknown</b>) from the command arguments, so it is required.

   <b>Option</b> <b>Specifications</b>
       Each option specification consists of:

       • An optional alphanumeric short flag character, followed by a <b>/</b> if the short flag can be used by someone
         invoking your command or, for backwards compatibility, a <b>-</b> if it should not be exposed as a valid short
         flag (in which case it will also not be exposed as a flag variable).

       • An optional long flag name, which if not present the short flag can be used, and if that  is  also  not
         present, an error is reported

       • Nothing if the flag is a boolean that takes no argument or is an integer flag, or

            • <b>=</b> if it requires a value and only the last instance of the flag is saved, or

            • <b>=?</b> if it takes an optional value and only the last instance of the flag is saved, or

            • <b>=+</b> if it requires a value and each instance of the flag is saved.

       • Optionally a <b>!</b> followed by fish script to validate the value. Typically this will be a function to run.
         If the exit status is zero the value for the flag is valid. If non-zero the value is invalid. Any error
         messages  should  be  written to stdout (not stderr). See the section on <u>Flag</u> <u>Value</u> <u>Validation</u> for more
         information.

       See the <u>fish_opt</u> command for a friendlier but more verbose way to create option specifications.

       If a flag is not seen when parsing the arguments then the corresponding _flag_X var(s) will not be set.

   <b>Integer</b> <b>flag</b>
       Sometimes commands take numbers directly as options, like <b>foo</b> <b>-55</b>. To allow this one option spec can have
       the <b>#</b> modifier so that any integer will be understood as this flag, and the last number will be given  as
       its value (as if <b>=</b> was used).

       The  <b>#</b> must follow the short flag letter (if any), and other modifiers like <b>=</b> are not allowed, except for
       <b>-</b> (for backwards compatibility):

          m#maximum

       This does not read numbers given as <b>+NNN</b>, only those that look like flags - <b>-NNN</b>.

   <b>Note:</b> <b>Optional</b> <b>arguments</b>
       An option defined with <b>=?</b> can take optional arguments. Optional arguments have to be <u>directly</u> <u>attached</u> to
       the option they belong to.

       That means the argument will only be used for the option if you use it like:

          cmd --flag=value
          # or
          cmd  -fvalue

       but not if used like:

          cmd --flag value
          # "value" here will be used as a positional argument
          # and "--flag" won't have an argument.

       If this weren't the case, using an option without an optional argument would be  difficult  if  you  also
       wanted to use positional arguments.

       For example:

          grep --color auto
          # Here "auto" will be used as the search string,
          # "color" will not have an argument and will fall back to the default,
          # which also *happens to be* auto.
          grep --color always
          # Here grep will still only use color "auto"matically
          # and search for the string "always".

       This isn't specific to argparse but common to all things using <b><a href="../man3/getopt.3.html">getopt</a>(3)</b> (if they have optional arguments
       at all). That <b>grep</b> example is how GNU grep actually behaves.

   <b>Flag</b> <b>Value</b> <b>Validation</b>
       Sometimes  you  need  to  validate  the  option  values. For example, that it is a valid integer within a
       specific range, or an ip address, or something entirely different. You can always do this after  <b>argparse</b>
       returns but you can also request that <b>argparse</b> perform the validation by executing arbitrary fish script.
       To do so simply append an <b>!</b> (exclamation-mark) then the fish script to be run. When that code is executed
       three vars will be defined:

       • <b>_argparse_cmd</b> will be set to the value of the value of the <b>argparse</b> <b>--name</b> value.

       • <b>_flag_name</b> will be set to the short or long flag that being processed.

       • <b>_flag_value</b> will be set to the value associated with the flag being processed.

       These variables are passed to the function as local exported variables.

       The  script  should  write any error messages to stdout, not stderr. It should return a status of zero if
       the flag value is valid otherwise a non-zero status to indicate it is invalid.

       Fish ships with a <b>_validate_int</b> function that accepts a <b>--min</b> and <b>--max</b>  flag.  Let's  say  your  command
       accepts a <b>-m</b> or <b>--max</b> flag and the minimum allowable value is zero and the maximum is 5. You would define
       the  option  like  this: <b>m/max=!_validate_int</b> <b>--min</b> <b>0</b> <b>--max</b> <b>5</b>. The default if you just call <b>_validate_int</b>
       without those flags is to simply check that the value is a valid integer with no limits on the min or max
       value allowed.

       Here are some examples of flag validations:

          # validate that a path is a directory
          argparse 'p/path=!test -d "$_flag_value"' -- --path $__fish_config_dir
          # validate that a function does not exist
          argparse 'f/func=!not functions -q "$_flag_value"' -- -f alias
          # validate that a string matches a regex
          argparse 'c/color=!string match -rq \'^#?[0-9a-fA-F]{6}$\' "$_flag_value"' -- -c 'c0ffee'
          # validate with a validator function
          argparse 'n/num=!_validate_int --min 0 --max 99' -- --num 42

   <b>Example</b> <b>OPTION_SPECs</b>
       Some <u>OPTION_SPEC</u> examples:

       • <b>h/help</b> means that both <b>-h</b> and <b>--help</b> are valid. The flag is a boolean and can be used more  than  once.
         If either flag is used then <b>_flag_h</b> and <b>_flag_help</b> will be set to however either flag was seen, as many
         times as it was seen. So it could be set to <b>-h</b>, <b>-h</b> and <b>--help</b>, and <b>count</b> <b>$_flag_h</b> would yield "3".

       • <b>help</b>  means  that  only <b>--help</b> is valid. The flag is a boolean and can be used more than once. If it is
         used then <b>_flag_help</b> will be set as above. Also <b>h-help</b> (with an arbitrary short letter)  for  backwards
         compatibility.

       • <b>longonly=</b>  is  a  flag  <b>--longonly</b>  that  requires an option, there is no short flag or even short flag
         variable.

       • <b>n/name=</b> means that both <b>-n</b> and <b>--name</b> are valid. It requires a value and can be used at most  once.  If
         the  flag  is  seen  then <b>_flag_n</b> and <b>_flag_name</b> will be set with the single mandatory value associated
         with the flag.

       • <b>n/name=?</b> means that both <b>-n</b> and <b>--name</b> are valid. It accepts an optional value and can be used at  most
         once.  If  the  flag is seen then <b>_flag_n</b> and <b>_flag_name</b> will be set with the value associated with the
         flag if one was provided else it will be set with no values.

       • <b>name=+</b> means that only <b>--name</b> is valid. It requires a value and can be used more than once. If the flag
         is seen then <b>_flag_name</b> will be set with the values associated with each occurrence.

       • <b>x</b> means that only <b>-x</b> is valid. It is a boolean that can be used more than once.  If  it  is  seen  then
         <b>_flag_x</b> will be set as above.

       • <b>x=</b>,  <b>x=?</b>, and <b>x=+</b> are similar to the n/name examples above but there is no long flag alternative to the
         short flag <b>-x</b>.

       • <b>#max</b> (or <b>#-max</b>) means that flags matching the regex "^--?\d+$" are valid. When seen they  are  assigned
         to  the  variable  <b>_flag_max</b>.  This  allows  any  valid positive or negative integer to be specified by
         prefixing it with a single "-". Many commands support this idiom. For example <b>head</b> <b>-3</b> <b>/a/file</b>  to  emit
         only the first three lines of /a/file.

       • <b>n#max</b>  means  that  flags  matching  the regex "^--?\d+$" are valid. When seen they are assigned to the
         variables <b>_flag_n</b> and <b>_flag_max</b>. This allows any valid positive or negative integer to be specified  by
         prefixing  it  with a single "-". Many commands support this idiom. For example <b>head</b> <b>-3</b> <b>/a/file</b> to emit
         only the first three lines of /a/file. You can also specify the value using  either  flag:  <b>-n</b>  <b>NNN</b>  or
         <b>--max</b> <b>NNN</b> in this example.

       • <b>#longonly</b> causes the last integer option to be stored in <b>_flag_longonly</b>.

       After  parsing the arguments the <b>argv</b> variable is set with local scope to any values not already consumed
       during flag processing. If there are no unbound values the variable is set but <b>count</b> <b>$argv</b> will be zero.

       If an error occurs during argparse processing it will  exit  with  a  non-zero  status  and  print  error
       messages to stderr.

   <b>Examples</b>
       A simple use:

          argparse h/help -- $argv
          or return

          if set -q _flag_help
              # TODO: Print help here
              return 0
          end

       This just wants one option - <b>-h</b> / <b>--help</b>. Any other option is an error. If it is given it prints help and
       exits.

       How <u>fish_add_path</u> <u>-</u> <u>add</u> <u>to</u> <u>the</u> <u>path</u> parses its args:

          argparse -x g,U -x P,U -x a,p g/global U/universal P/path p/prepend a/append h/help m/move v/verbose n/dry-run -- $argv

       There  are  a  variety  of boolean flags, all with long and short versions. A few of these cannot be used
       together, and that is what the <b>-x</b> flag is used for.  <b>-x</b> <b>g,U</b> means that <b>--global</b> and <b>--universal</b> or  their
       short  equivalents  conflict, and if they are used together you get an error.  In this case you only need
       to give the short or long flag, not the full option specification.

       After this it figures out which variable it should operate on according to the <b>--path</b> flag:

          set -l var fish_user_paths
          set -q _flag_path
          and set var PATH

          # ...

          # Check for --dry-run.
          # The "-" has been replaced with a "_" because
          # it is not valid in a variable name
          not set -ql _flag_dry_run
          and set $var $result

   <b>Limitations</b>
       One limitation with <b>--ignore-unknown</b> is that, if an unknown  option  is  given  in  a  group  with  known
       options, the entire group will be kept in $argv. <b>argparse</b> will not do any permutations here.

       For instance:

          argparse --ignore-unknown h -- -ho
          echo $_flag_h # is -h, because -h was given
          echo $argv # is still -ho

       This limitation may be lifted in future.

       Additionally,  it  can only parse known options up to the first unknown option in the group - the unknown
       option could take options, so it isn't clear what any character after an unknown option means.

   <b>begin</b> <b>-</b> <b>start</b> <b>a</b> <b>new</b> <b>block</b> <b>of</b> <b>code</b>
   <b>Synopsis</b>
       <b>begin;</b> [<u>COMMANDS</u> ...]<b>;</b> <b>end</b>

   <b>Description</b>
       <b>begin</b> is used to create a new block of code.

       A block allows the introduction of a new <u>variable</u> <u>scope</u>, redirection of the input or output of a  set  of
       commands as a group, or to specify precedence when using the conditional commands like <b>and</b>.

       The block is unconditionally executed. <b>begin;</b> <b>...;</b> <b>end</b> is equivalent to <b>if</b> <b>true;</b> <b>...;</b> <b>end</b>.

       <b>begin</b>  does not change the current exit status itself. After the block has completed, <b>$status</b> will be set
       to the status returned by the most recent command.

       The <b>-h</b> or <b>--help</b> option displays help about using this command.

   <b>Example</b>
       The following code sets a number of variables inside of a block scope. Since the variables are set inside
       the block and have local scope, they will be automatically deleted when the block ends.

          begin
              set -l PIRATE Yarrr

              ...
          end

          echo $PIRATE
          # This will not output anything, since the PIRATE variable
          # went out of scope at the end of the block

       In the following code, all output is redirected to the file out.html.

          begin
              echo $xml_header
              echo $html_header
              if test -e $file
                  ...
              end
              ...
          end &gt; out.html

   <b>bg</b> <b>-</b> <b>send</b> <b>jobs</b> <b>to</b> <b>background</b>
   <b>Synopsis</b>
       <b>bg</b> [<u>PID</u> ...]

   <b>Description</b>
       <b>bg</b> sends <u>jobs</u> to the background, resuming them if they are stopped.

       A background job is executed simultaneously with fish, and does not have access to the  keyboard.  If  no
       job  is  specified,  the  last  job  to  be  used is put in the background. If <b>PID</b> is specified, the jobs
       containing the specified process IDs are put in the background.

       A PID of the format <b>%n</b>, where n is an integer, will be interpreted as  the  PID  of  job  number  n.  Job
       numbers can be seen in the output of <u>jobs</u>.

       When  at  least  one  of  the  arguments  isn't  a  valid  job  specifier, <b>bg</b> will print an error without
       backgrounding anything.

       When all arguments are valid job specifiers, <b>bg</b> will background all matching jobs that exist.

       The <b>-h</b> or <b>--help</b> option displays help about using this command.

   <b>Example</b>
       The typical use is to run something, stop it with ctrl-z, and then continue it in the background with bg:

          &gt; find / -name "*.js" &gt;/tmp/jsfiles 2&gt;/dev/null # oh no, this takes too long, let's press Ctrl-z!
          fish: Job 1, 'find / -name "*.js" &gt;/tmp/jsfil…' has stopped
          &gt; bg
          Send job 1 'find / -name "*.js" &gt;/tmp/jsfiles 2&gt;/dev/null' to background
          &gt; # I can continue using this shell!
          &gt; # Eventually:
          fish: Job 1, 'find / -name "*.js" &gt;/tmp/jsfil…' has ended

       <b>bg</b> <b>123</b> <b>456</b> <b>789</b> will background the jobs that contain processes 123, 456 and 789.

       If only 123 and 789 exist, it will still background them and print an error about 456.

       <b>bg</b> <b>123</b> <b>banana</b> or <b>bg</b> <b>banana</b> <b>123</b> will complain that "banana" is not a valid job specifier.

       <b>bg</b> <b>%2</b> will background job 2.

   <b>bind</b> <b>-</b> <b>handle</b> <b>fish</b> <b>key</b> <b>bindings</b>
   <b>Synopsis</b>
       <b>bind</b> [(<b>-M</b> | <b>--mode</b>) <u>MODE</u>] [(<b>-m</b> | <b>--sets-mode</b>) <u>NEW_MODE</u>] [<b>--preset</b> | <b>--user</b>] [<b>-s</b> | <b>--silent</b>] <u>KEYS</u> <u>COMMAND</u> ...
       <b>bind</b> [(<b>-M</b> | <b>--mode</b>) <u>MODE</u>] [<b>--preset</b>] [<b>--user</b>] [<u>KEYS</u>]
       <b>bind</b> [<b>-a</b> | <b>--all</b>] [<b>--preset</b>] [<b>--user</b>]
       <b>bind</b> (<b>-f</b> | <b>--function-names</b>)
       <b>bind</b> (<b>-L</b> | <b>--list-modes</b>)
       <b>bind</b> (<b>-e</b> | <b>--erase</b>) [(<b>-M</b> | <b>--mode</b>) <u>MODE</u>] [<b>--preset</b>] [<b>--user</b>] [<b>-a</b> | <b>--all</b>] | <u>KEYS</u> ...

   <b>Description</b>
       <b>bind</b> manages key bindings.

       If both <b>KEYS</b> and <b>COMMAND</b> are given, <b>bind</b> adds (or replaces) a binding in <b>MODE</b>.  If only  <b>KEYS</b>  is  given,
       any existing binding in the given <b>MODE</b> will be printed.

       <b>KEYS</b> is a comma-separated list of key names.  Modifier keys can be specified by prefixing a key name with
       a  combination  of  <b>ctrl-</b>,  <b>alt-</b>  and  <b>shift-</b>.  For example, pressing <b>w</b> while holding the Alt modifier is
       written as <b>alt-w</b>.  Key  names  are  case-sensitive;  for  example  <b>alt-W</b>  is  the  same  as  <b>alt-shift-w</b>.
       <b>ctrl-x,ctrl-e</b> would mean pressing <b>ctrl-x</b> followed by <b>ctrl-e</b>.

       Some  keys  have  names,  usually  because they don't have an obvious printable character representation.
       They are:

       • the arrow keys <b>up</b>, <b>down</b>, <b>left</b> and <b>right</b>,

       • <b>backspace</b>,

       • <b>comma</b> (<b>,</b>),

       • <b>delete</b>,

       • <b>end</b>,

       • <b>enter</b>,

       • <b>escape</b>,

       • <b>f1</b> through <b>f12</b>.

       • <b>home</b>,

       • <b>insert</b>,

       • <b>minus</b> (<b>-</b>),

       • <b>pageup</b>,

       • <b>pagedown</b>,

       • <b>space</b> and

       • <b>tab</b>,

       These names are case-sensitive.

       An empty value (<b>''</b>) for <b>KEYS</b> designates the generic binding that will be used if  nothing  else  matches.
       For  most bind modes, it makes sense to bind this to the <b>self-insert</b> function (i.e. <b>bind</b> <b>''</b> <b>self-insert</b>).
       This will insert any keystrokes that have no bindings otherwise. Non-printable characters are ignored  by
       the editor, so this will not result in control sequences being inserted.

       To find the name of a key combination you can use <u>fish_key_reader</u>.

       <b>COMMAND</b>  can  be  any  fish  command,  but  it can also be one of a set of special input functions. These
       include functions for moving the cursor, operating on the kill-ring, performing tab completion, etc.  Use
       <b>bind</b> <b>--function-names</b> or <u>see</u> <u>below</u> for a list of these input functions.

       <b>NOTE:</b>
          If a script changes the commandline, it should finish by calling the <b>repaint</b> special input function.

       If no <b>KEYS</b> argument is provided, all bindings (in the given <b>MODE</b>) are printed. If <b>KEYS</b> is provided but no
       <b>COMMAND</b>, just the binding matching that sequence is printed.

       Key  bindings  may  use  "modes",  which mimics vi's modal input behavior. The default mode is "default".
       Every key binding applies to a single mode; you can specify which one with <b>-M</b> <b>MODE</b>. If  the  key  binding
       should change the mode, you can specify the new mode with <b>-m</b> <b>NEW_MODE</b>. The mode can be viewed and changed
       via  the  <b>$fish_bind_mode</b>  variable.  If you want to change the mode from inside a fish function, use <b>set</b>
       <b>fish_bind_mode</b> <b>MODE</b>.

       To save custom key  bindings,  put  the  <b>bind</b>  statements  into  <u>config.fish</u>.  Alternatively,  fish  also
       automatically executes a function called <b>fish_user_key_bindings</b> if it exists.

   <b>Options</b>
       The following options are available:

       <b>-f</b> or <b>--function-names</b>
              Display a list of available input functions

       <b>-L</b> or <b>--list-modes</b>
              Display a list of defined bind modes

       <b>-M</b> <b>MODE</b> or <b>--mode</b> <u>MODE</u>
              Specify a bind mode that the bind is used in. Defaults to "default"

       <b>-m</b> <b>NEW_MODE</b> or <b>--sets-mode</b> <u>NEW_MODE</u>
              Change the current mode to <u>NEW_MODE</u> after this binding is executed

       <b>-e</b> or <b>--erase</b>
              Erase  the  binding  with  the  given  sequence  and mode instead of defining a new one.  Multiple
              sequences can be specified with this flag.  Specifying <b>-a</b> or <b>--all</b> with <b>-M</b> or  <b>--mode</b>  erases  all
              binds  in  the  given  mode  regardless  of sequence.  Specifying <b>-a</b> or <b>--all</b> without <b>-M</b> or <b>--mode</b>
              erases all binds in all modes regardless of sequence.

       <b>-a</b> or <b>--all</b>
              See <b>--erase</b>

       <b>--preset</b> and <b>--user</b>
              Specify if bind should operate on user or preset bindings.  User  bindings  take  precedence  over
              preset  bindings when fish looks up mappings.  By default, all <b>bind</b> invocations work on the "user"
              level except for listing, which will show both levels.  All invocations except for  inserting  new
              bindings  can  operate  on  both  levels at the same time (if both <b>--preset</b> and <b>--user</b> are given).
              <b>--preset</b> should only be used in full binding sets (like when working on <b>fish_vi_key_bindings</b>).

       <b>-s</b> or <b>--silent</b>
              Silences some of the error messages, including for unknown key names and unbound sequences.

       <b>-h</b> or <b>--help</b>
              Displays help about using this command.

   <b>Special</b> <b>input</b> <b>functions</b>
       The following special input functions are available:

       <b>and</b>    only execute the next function if  the  previous  succeeded  (note:  only  some  functions  report
              success)

       <b>accept-autosuggestion</b>
              accept the current autosuggestion. Returns false when there was nothing to accept.

       <b>backward-char</b>
              move one character to the left.  If the completion pager is active, select the previous completion
              instead.

       <b>backward-char-passive</b>
              move  one  character  to  the left, but do not trigger any non-movement-related operations. If the
              cursor is at the start of the commandline, does nothing. Does not change the selected item in  the
              completion pager UI when shown.

       <b>backward-bigword</b>
              move one whitespace-delimited word to the left

       <b>backward-token</b>
              move one argument to the left

       <b>backward-delete-char</b>
              deletes one character of input to the left of the cursor

       <b>backward-kill-bigword</b>
              move the whitespace-delimited word to the left of the cursor to the killring

       <b>backward-kill-token</b>
              move the argument to the left of the cursor to the killring

       <b>backward-kill-line</b>
              move everything from the beginning of the line to the cursor to the killring

       <b>backward-kill-path-component</b>
              move  one path component to the left of the cursor to the killring. A path component is everything
              likely to belong to a path component, i.e.  not  any  of  the  following:  <u>/={,}'":@</u>  <u>|;&lt;&gt;&amp;</u>,  plus
              newlines and tabs.

       <b>backward-kill-word</b>
              move  the  word  to  the  left  of the cursor to the killring. The "word" here is everything up to
              punctuation or whitespace.

       <b>backward-word</b>
              move one word to the left

       <b>beginning-of-buffer</b>
              moves to the beginning of the buffer, i.e. the start of the first line

       <b>beginning-of-history</b>
              move to the beginning of the history

       <b>beginning-of-line</b>
              move to the beginning of the line

       <b>begin-selection</b>
              start selecting text

       <b>cancel</b> close the pager if it is open, or undo the most recent completion if one  was  just  inserted,  or
              otherwise cancel the current commandline and replace it with a new empty one

       <b>cancel-commandline</b>
              cancel  the  current commandline and replace it with a new empty one, leaving the old one in place
              with a marker to show that it was cancelled

       <b>capitalize-word</b>
              make the current word begin with a capital letter

       <b>clear-commandline</b>
              empty the entire commandline

       <b>clear-screen</b>
              clears the screen and redraws the prompt. if the terminal doesn't support clearing the  screen  it
              is the same as <b>repaint</b>.

       <b>complete</b>
              guess the remainder of the current token

       <b>complete-and-search</b>
              invoke  the  searchable pager on completion options (for convenience, this also moves backwards in
              the completion pager)

       <b>delete-char</b>
              delete one character to the right of the cursor

       <b>delete-or-exit</b>
              delete one character to the right of the cursor, or exit the shell if the commandline is empty

       <b>down-line</b>
              move down one line

       <b>downcase-word</b>
              make the current word lowercase

       <b>end-of-buffer</b>
              moves to the end of the buffer, i.e. the end of the first line

       <b>end-of-history</b>
              move to the end of the history

       <b>end-of-line</b>
              move to the end of the line

       <b>end-selection</b>
              end selecting text

       <b>expand-abbr</b>
              expands any abbreviation currently under the cursor

       <b>execute</b>
              run the current commandline

       <b>exit</b>   exit the shell

       <b>forward-bigword</b>
              move one whitespace-delimited word to the right

       <b>forward-token</b>
              move one argument to the right

       <b>forward-char</b>
              move one character to the right; or  if  at  the  end  of  the  commandline,  accept  the  current
              autosuggestion.  If the completion pager is active, select the next completion instead.

       <b>forward-char-passive</b>
              move  one  character  to the right, but do not trigger any non-movement-related operations. If the
              cursor is at the end of the commandline, does not accept the current autosuggestion (if any). Does
              not change the selected item in the completion pager, if shown.

       <b>forward-single-char</b>
              move one character to the right; or if at the end of the commandline, accept a  single  char  from
              the current autosuggestion.

       <b>forward-word</b>
              move  one word to the right; or if at the end of the commandline, accept one word from the current
              autosuggestion.

       <b>history-pager</b>
              invoke the searchable pager on history (incremental search); or if the history  pager  is  already
              active, search further backwards in time.

       <b>history-pager-delete</b>
              permanently  delete  the  current  history  item,  either from the history pager or from an active
              up-arrow history search

       <b>history-search-backward</b>
              search the history for the previous match

       <b>history-search-forward</b>
              search the history for the next match

       <b>history-prefix-search-backward</b>
              search the history for the previous prefix match

       <b>history-prefix-search-forward</b>
              search the history for the next prefix match

       <b>history-token-search-backward</b>
              search the history for the previous matching argument

       <b>history-token-search-forward</b>
              search the history for the next matching argument

       <b>forward-jump</b> <b>and</b> <b>backward-jump</b>
              read another character and jump to its next occurrence after/before the cursor

       <b>forward-jump-till</b> <b>and</b> <b>backward-jump-till</b>
              jump to right <u>before</u> the next occurrence

       <b>repeat-jump</b> <b>and</b> <b>repeat-jump-reverse</b>
              redo the last jump in the same/opposite direction

       <b>jump-to-matching-bracket</b>
              jump to matching bracket if the character under the cursor is bracket; otherwise, jump to the next
              occurrence of <u>any</u> <u>right</u> bracket after the cursor.  The following brackets are considered: <b>([{}])</b>

       <b>jump-till-matching-bracket</b>
              the same as <b>jump-to-matching-bracket</b> but offset cursor to the right for left bracket,  and  offset
              cursor  to  the  left for right bracket.  The offset is applied for both the position we jump from
              and position we jump to.  In other words, the cursor will continuously jump  inside  the  brackets
              but  won't  reach them by 1 character.  The input function is useful to emulate <b>ib</b> vi text object.
              The following brackets are considered: <b>([{}])</b>

       <b>kill-bigword</b>
              move the next whitespace-delimited word to the killring

       <b>kill-token</b>
              move the next argument to the killring

       <b>kill-line</b>
              move everything from the cursor to the end of the line to the killring

       <b>kill-selection</b>
              move the selected text to the killring

       <b>kill-whole-line</b>
              move the line (including the following newline) to the killring. If the line is the last line, its
              preceding newline is also removed

       <b>kill-inner-line</b>
              move the line (without the following newline) to the killring

       <b>kill-word</b>
              move the next word to the killring

       <b>nextd-or-forward-word</b>
              if the commandline is empty, then move forward in the directory history, otherwise move  one  word
              to  the  right;  or  if  at  the  end  of  the  commandline,  accept  one  word  from  the current
              autosuggestion.

       <b>or</b>     only execute the next function if the previous did not succeed (note: only some  functions  report
              failure)

       <b>pager-toggle-search</b>
              toggles  the  search  field  if  the completions pager is visible; or if used after <b>history-pager</b>,
              search forwards in time.

       <b>prevd-or-backward-word</b>
              if the commandline is empty, then move backward in the directory history, otherwise move one  word
              to the left

       <b>repaint</b>
              reexecutes   the   prompt   functions   and   redraws   the   prompt   (also   <b>force-repaint</b>   for
              backwards-compatibility)

       <b>repaint-mode</b>
              reexecutes the <u>fish_mode_prompt</u> and redraws the  prompt.  This  is  useful  for  vi  mode.  If  no
              <b>fish_mode_prompt</b> exists or it prints nothing, it acts like a normal repaint.

       <b>self-insert</b>
              inserts the matching sequence into the command line

       <b>self-insert-notfirst</b>
              inserts the matching sequence into the command line, unless the cursor is at the beginning

       <b>suppress-autosuggestion</b>
              remove the current autosuggestion. Returns true if there was a suggestion to remove.

       <b>swap-selection-start-stop</b>
              go to the other end of the highlighted text without changing the selection

       <b>transpose-chars</b>
              transpose two characters to the left of the cursor

       <b>transpose-words</b>
              transpose two words to the left of the cursor

       <b>togglecase-char</b>
              toggle the capitalisation (case) of the character under the cursor

       <b>togglecase-selection</b>
              toggle the capitalisation (case) of the selection

       <b>insert-line-under</b>
              add a new line under the current line

       <b>insert-line-over</b>
              add a new line over the current line

       <b>up-line</b>
              move up one line

       <b>undo</b> <b>and</b> <b>redo</b>
              revert or redo the most recent edits on the command line

       <b>upcase-word</b>
              make the current word uppercase

       <b>yank</b>   insert the latest entry of the killring into the buffer

       <b>yank-pop</b>
              rotate to the previous entry of the killring

   <b>Additional</b> <b>functions</b>
       The following functions are included as normal functions, but are particularly useful for input editing:

       <b>up-or-search</b> <b>and</b> <b>down-or-search</b>
              move the cursor or search the history depending on the cursor position and current mode

       <b>edit_command_buffer</b>
              open the visual editor (controlled by the <b>VISUAL</b> or <b>EDITOR</b> environment variables) with the current
              command-line contents

       <b>fish_clipboard_copy</b>
              copy the current selection to the system clipboard

       <b>fish_clipboard_paste</b>
              paste the current selection from the system clipboard before the cursor

       <b>fish_commandline_append</b>
              append  the argument to the command-line. If the command-line already ends with the argument, this
              removes the suffix instead. Starts with the last command  from  history  if  the  command-line  is
              empty.

       <b>fish_commandline_prepend</b>
              prepend  the  argument  to the command-line. If the command-line already starts with the argument,
              this removes the prefix instead. Starts with the last command from history if the command-line  is
              empty.

   <b>Examples</b>
       Exit the shell when <b>ctrl-d</b> is pressed:

          bind ctrl-d 'exit'

       Perform a history search when <b>pageup</b> is pressed:

          bind pageup history-search-backward

       Turn on <u>vi</u> <u>key</u> <u>bindings</u> and rebind <b>ctrl-c</b> to clear the input line:

          set -g fish_key_bindings fish_vi_key_bindings
          bind -M insert ctrl-c kill-whole-line repaint

       Launch <b>git</b> <b>diff</b> and repaint the commandline afterwards when <b>ctrl-g</b> is pressed:

          bind ctrl-g 'git diff' repaint

   <b>Terminal</b> <b>Limitations</b>
       Unix  terminals,  like the ones fish operates in, are at heart 70s technology. They have some limitations
       that applications running inside them can't workaround.

       For instance, historically the control key modifies a character by setting the top three bits to 0.  This
       means:

       • Many characters + control are indistinguishable from other keys: <b>ctrl-i</b> <u>is</u> <b>tab</b>, <b>ctrl-j</b> <u>is</u> newline (<b>\n</b>).

       • Control and shift don't work simultaneously - <b>ctrl-X</b> is the same as <b>ctrl-x</b>.

       Other  keys don't have a direct encoding, and are sent as escape sequences. For example <b>right</b> (<b>→</b>) usually
       sends <b>\e\[C</b>.

       Some modern terminals support newer encodings for keys, that allow  distinguishing  more  characters  and
       modifiers, and fish enables as many of these as it can, automatically.

       When  in  doubt, run <u>fish_key_reader</u> <u>-</u> <u>explore</u> <u>what</u> <u>characters</u> <u>keyboard</u> <u>keys</u> <u>send</u>. If that tells you that
       pressing <b>ctrl-i</b> sends tab, your terminal does not support these better encodings, and so fish is  limited
       to what it sends.

   <b>Key</b> <b>timeout</b>
       When  you've  bound a sequence of multiple characters, there is always the possibility that fish has only
       seen a part of it, and then it needs to disambiguate between the full sequence and part of it.

       For example:

          bind j,k 'commandline -i foo'
          # or `bind jk`

       will bind the sequence <b>jk</b> to insert "foo" into the  commandline.  When  you've  only  pressed  "j",  fish
       doesn't know if it should insert the "j" (because of the default self-insert), or wait for the "k".

       You  can  enable a timeout for this, by setting the <u>fish_sequence_key_delay_ms</u> variable to the timeout in
       milliseconds. If the timeout elapses, fish will no longer wait for the sequence to be completed,  and  do
       what it can with the characters it already has.

       The  escape key is a special case, because it can be used standalone as a real key or as part of a longer
       escape sequence, like function or arrow keys. Holding alt and something else also typically sends escape,
       for example holding alt+a will send an escape character and then an "a". So the escape character has  its
       own timeout configured with <u>fish_escape_delay_ms</u>.

       See also <u>Key</u> <u>sequences</u>.

   <b>block</b> <b>-</b> <b>temporarily</b> <b>block</b> <b>delivery</b> <b>of</b> <b>events</b>
   <b>Synopsis</b>
       <b>block</b> [(<b>--local</b> | <b>--global</b>)]
       <b>block</b> <b>--erase</b>

   <b>Description</b>
       <b>block</b>  delays  delivery  of  all events triggered by <b>fish</b> or the <u>emit</u>, thus delaying the execution of any
       function registered <b>--on-event</b>, <b>--on-process-exit</b>, <b>--on-job-exit</b>,  <b>--on-variable</b>  and  <b>--on-signal</b>  until
       after the block is removed.

       Event blocks should not be confused with code blocks, which are created with <b>begin</b>, <b>if</b>, <b>while</b> or <b>for</b>

       Without  options, <b>block</b> sets up a block that is released automatically at the end of the current function
       scope.

       The following options are available:

       <b>-l</b> or <b>--local</b>
              Release the block automatically at the end of the current innermost code block scope.

       <b>-g</b> or <b>--global</b>
              Never automatically release the lock.

       <b>-e</b> or <b>--erase</b>
              Release global block.

       <b>-h</b> or <b>--help</b>
              Display help about using this command.

   <b>Example</b>
          # Create a function that listens for events
          function --on-event foo foo; echo 'foo fired'; end

          # Block the delivery of events
          block -g

          emit foo
          # No output will be produced

          block -e
          # 'foo fired' will now be printed

   <b>Notes</b>
       Events are only received from the current fish process as there is no way to send events  from  one  fish
       process to another.

   <b>break</b> <b>-</b> <b>stop</b> <b>the</b> <b>current</b> <b>inner</b> <b>loop</b>
   <b>Synopsis</b>
       <u>LOOP_CONSTRUCT</u>
          [<u>COMMANDS</u> ...]
          <b>break</b>
          [<u>COMMANDS</u> ...]
       <b>end</b>

   <b>Description</b>
       <b>break</b>  halts  a currently running loop (<u>LOOP_CONSTRUCT</u>), such as a <u>for</u> or <u>while</u> loop. It is usually added
       inside of a conditional block such as an <u>if</u> block.

       There are no parameters for <b>break</b>.

   <b>Example</b>
       The following code searches all .c files for "smurf", and halts at the first occurrence.

          for i in *.c
              if grep smurf $i
                  echo Smurfs are present in $i
                  break
              end
          end

   <b>See</b> <b>Also</b>
       • the <u>continue</u> command, to skip the remainder of the current iteration of the current inner loop

   <b>breakpoint</b> <b>-</b> <b>launch</b> <b>debug</b> <b>mode</b>
   <b>Synopsis</b>
       <b>breakpoint</b>

   <b>Description</b>
       <b>breakpoint</b> is used to halt a running script and launch an interactive debugging prompt.

       For more details, see <u>Debugging</u> <u>fish</u> <u>scripts</u> in the <b>fish</b> manual.

       There are no parameters for <b>breakpoint</b>.

   <b>builtin</b> <b>-</b> <b>run</b> <b>a</b> <b>builtin</b> <b>command</b>
   <b>Synopsis</b>
       <b>builtin</b> [<u>OPTIONS</u>] <u>BUILTINNAME</u>
       <b>builtin</b> <b>--query</b> <u>BUILTINNAME</u> ...
       <b>builtin</b> <b>--names</b>

   <b>Description</b>
       <b>builtin</b> forces the shell to use a builtin command named <u>BUILTIN</u>,  rather  than  a  function  or  external
       program.

       The following options are available:

       <b>-n</b> or <b>--names</b>
              Lists the names of all defined builtins.

       <b>-q</b> or <b>--query</b> <u>BUILTIN</u>
              Tests if any of the specified builtins exist. If any exist, it returns 0, 1 otherwise.

       <b>-h</b> or <b>--help</b>
              Displays help about using this command.

   <b>Example</b>
          builtin jobs
          # executes the jobs builtin, even if a function named jobs exists

   <b>case</b> <b>-</b> <b>conditionally</b> <b>execute</b> <b>a</b> <b>block</b> <b>of</b> <b>commands</b>
   <b>Synopsis</b>
       <b>switch</b> <u>VALUE</u>
          [<b>case</b> [<u>GLOB</u> ...]
              [<u>COMMAND</u> ...]]
       <b>end</b>

   <b>Description</b>
       <b>switch</b>  executes one of several blocks of commands, depending on whether a specified value matches one of
       several values. <b>case</b> is used together with the <b>switch</b> statement in order to determine which block  should
       be executed.

       Each  <b>case</b>  command is given one or more parameters. The first <b>case</b> command with a parameter that matches
       the string specified in the switch command will be evaluated.  <b>case</b>  parameters  may  contain  wildcards.
       These need to be escaped or quoted in order to avoid regular wildcard expansion using filenames.

       Note that fish does not fall through on case statements. Only the first matching case is executed.

       Note  that command substitutions in a case statement will be evaluated even if its body is not taken. All
       substitutions, including command substitutions, must be  performed  before  the  value  can  be  compared
       against the parameter.

   <b>Example</b>
       Say $animal contains the name of an animal. Then this code would classify it:

          switch $animal
              case cat
                  echo evil
              case wolf dog human moose dolphin whale
                  echo mammal
              case duck goose albatross
                  echo bird
              case shark trout stingray
                  echo fish
              # Note that the next case has a wildcard which is quoted
              case '*'
                  echo I have no idea what a $animal is
          end

       If the above code was run with <b>$animal</b> set to <b>whale</b>, the output would be <b>mammal</b>.

       If <b>$animal</b> was set to "banana", it would print "I have no idea what a banana is".

   <b>cd</b> <b>-</b> <b>change</b> <b>directory</b>
   <b>Synopsis</b>
       <b>cd</b> [<u>DIRECTORY</u>]

   <b>Description</b>
       NOTE:  This  page  documents the fish builtin <b>cd</b>.  To see the documentation on any non-fish versions, use
       <b>command</b> <b>man</b> <b>cd</b>.

       <b>cd</b> changes the current working directory.

       If <u>DIRECTORY</u> is given, it will become the new directory. If no parameter is given, the  <u>HOME</u>  environment
       variable will be used.

       If  <u>DIRECTORY</u>  is  a  relative  path,  all  the  paths in the <u>CDPATH</u> will be tried as prefixes for it, in
       addition to <u>PWD</u>.  It is recommended to keep <b>.</b> as the first element of <u>CDPATH</u>, or <u>PWD</u> will be tried last.

       Fish will also try to change directory if given a command that looks like a directory (starting with <b>.</b>, <b>/</b>
       or <b>~</b>, or ending with <b>/</b>), without explicitly requiring <b>cd</b>.

       Fish also ships a wrapper function around the builtin <b>cd</b>  that  understands  <b>cd</b>  <b>-</b>  as  changing  to  the
       previous  directory.   See also <u>prevd</u>.  This wrapper function maintains a history of the 25 most recently
       visited directories in the <b>$dirprev</b> and <b>$dirnext</b> global variables.  If you make those universal variables
       your <b>cd</b> history is shared among all fish instances.

       As a special case, <b>cd</b> <b>.</b> is equivalent to <b>cd</b> <b>$PWD</b>, which is useful in cases where a  mountpoint  has  been
       recycled or a directory has been removed and recreated.

       The <b>--help</b> or <b>-h</b> option displays help about using this command, and does not change the directory.

   <b>Examples</b>
          cd
          # changes the working directory to your home directory.

          cd /usr/src/fish-shell
          # changes the working directory to /usr/src/fish-shell

   <b>See</b> <b>Also</b>
       Navigate directories using the <u>directory</u> <u>history</u> or the <u>directory</u> <u>stack</u>

   <b>cdh</b> <b>-</b> <b>change</b> <b>to</b> <b>a</b> <b>recently</b> <b>visited</b> <b>directory</b>
   <b>Synopsis</b>
       <b>cdh</b> [<u>DIRECTORY</u>]

   <b>Description</b>
       <b>cdh</b>  with  no  arguments presents a list of <u>recently</u> <u>visited</u> <u>directories</u>.  You can then select one of the
       entries by letter or number.  You can also press <b>tab</b> to use the completion pager to select an  item  from
       the list.  If you give it a single argument it is equivalent to <b>cd</b> <b>DIRECTORY</b>.

       Note  that  the  <b>cd</b>  command  limits  directory history to the 25 most recently visited directories.  The
       history is stored in the <b>dirprev</b> and <b>dirnext</b> variables, which this  command  manipulates.   If  you  make
       those universal variables, your <b>cd</b> history is shared among all fish instances.

   <b>See</b> <b>Also</b>
       • the <u>dirh</u> command to print the directory history

       • the <u>prevd</u> command to move backward

       • the <u>nextd</u> command to move forward

   <b>command</b> <b>-</b> <b>run</b> <b>a</b> <b>program</b>
   <b>Synopsis</b>
       <b>command</b> [<u>OPTIONS</u>] [<u>COMMANDNAME</u> [<u>ARG</u> ...]]

   <b>Description</b>
       NOTE:  This  page documents the fish builtin <b>command</b>.  To see the documentation on any non-fish versions,
       use <b>command</b> <b>man</b> <b>command</b>.

       <b>command</b> forces the shell to execute the program <u>COMMANDNAME</u> and ignore any functions or builtins with the
       same name.

       In <b>command</b> <b>foo</b>, <b>command</b> is a keyword.

       The following options are available:

       <b>-a</b> or <b>--all</b>
              Prints all <u>COMMAND</u> found in <u>PATH</u>, in the order found.

       <b>-q</b> or <b>--query</b>
              Return 0 if any of the given commands could be found, 127 otherwise.  Don't print  anything.   For
              compatibility, this is also <b>--quiet</b> (deprecated).

       <b>-s</b> or <b>--search</b> (or <b>-v</b>)
              Prints  the  external  command  that  would  be  executed,  or  prints nothing if no file with the
              specified name could be found in <u>PATH</u>.

       <b>-h</b> or <b>--help</b>
              Displays help about using this command.

   <b>Examples</b>
       <b>command</b> <b>ls</b> executes the <b>ls</b> program, even if an <b>ls</b> function also exists.
       <b>command</b> <b>-s</b> <b>ls</b> prints the path to the <b>ls</b> program.
       <b>command</b> <b>-q</b> <b>git;</b> <b>and</b> <b>command</b> <b>git</b> <b>log</b> runs <b>git</b> <b>log</b> only if <b>git</b> exists.
       <b>command</b> <b>-sq</b> <b>git</b> and <b>command</b> <b>-q</b> <b>git</b> and <b>command</b> <b>-vq</b> <b>git</b> return true (0) if a git command could be found and don't print anything.

   <b>commandline</b> <b>-</b> <b>set</b> <b>or</b> <b>get</b> <b>the</b> <b>current</b> <b>command</b> <b>line</b> <b>buffer</b>
   <b>Synopsis</b>
       <b>commandline</b> [<u>OPTIONS</u>] [<u>CMD</u>]

   <b>Description</b>
       <b>commandline</b> can be used to set or get the current contents of the command line buffer.

       With no parameters, <b>commandline</b> returns the current value of the command line.

       With <b>CMD</b> specified, the command line buffer is erased and replaced with the contents of <b>CMD</b>.

       The following options are available:

       <b>-C</b> or <b>--cursor</b>
              Set or get the current cursor position, not the contents of the buffer.  If no argument is  given,
              the  current  cursor  position is printed, otherwise the argument is interpreted as the new cursor
              position.  If one of the options <b>-j</b>, <b>-p</b> or <b>-t</b> is given, the position is relative to the respective
              substring instead of the entire command line buffer.

       <b>-B</b> or <b>--selection-start</b>
              Get current position of the selection start in the buffer.

       <b>-E</b> or <b>--selection-end</b>
              Get current position of the selection end in the buffer.

       <b>-f</b> or <b>--function</b>
              Causes any additional arguments to be interpreted as input  functions,  and  puts  them  into  the
              queue, so that they will be read before any additional actual key presses are.  This option cannot
              be combined with any other option.  See <u>bind</u> for a list of input functions.

       <b>-h</b> or <b>--help</b>
              Displays help about using this command.

       The following options change the way <b>commandline</b> updates the command line buffer:

       <b>-a</b> or <b>--append</b>
              Do not remove the current commandline, append the specified string at the end of it.

       <b>-i</b> or <b>--insert</b>
              Do not remove the current commandline, insert the specified string at the current cursor position

       <b>-r</b> or <b>--replace</b>
              Remove the current commandline and replace it with the specified string (default)

       The following options change what part of the commandline is printed or updated:

       <b>-b</b> or <b>--current-buffer</b>
              Select the entire commandline, not including any displayed autosuggestion (default).

       <b>-j</b> or <b>--current-job</b>
              Select  the  current  job - a <b>job</b> here is one pipeline.  Stops at logical operators or terminators
              (<b>;</b>, <b>&amp;</b>, and newlines).

       <b>-p</b> or <b>--current-process</b>
              Select the current process -  a  <b>process</b>  here  is  one  command.   Stops  at  logical  operators,
              terminators, and pipes.

       <b>-s</b> or <b>--current-selection</b>
              Selects the current selection

       <b>-t</b> or <b>--current-token</b>
              Selects the current token

       <b>--search-field</b>
              Use  the  pager search field instead of the command line. Returns false if the search field is not
              shown.

       The following options change the way <b>commandline</b> prints the current commandline buffer:

       <b>-c</b> or <b>--cut-at-cursor</b>
              Only print selection up until the current cursor position.  If  combined  with  <b>--tokens-expanded</b>,
              this will print up until the last completed token - excluding the token the cursor is in.  This is
              typically  what  you  would  want  for instance in completions.  To get both, use both <b>commandline</b>
              <b>--cut-at-cursor</b> <b>--tokens-expanded;</b> <b>commandline</b>  <b>--cut-at-cursor</b>  <b>--current-token</b>,  or  <b>commandline</b>
              <b>-cx;</b> <b>commandline</b> <b>-ct</b> for short.

       <b>-x</b> or <b>--tokens-expanded</b>
              Perform   argument  expansion  on  the  selection  and  print  one  argument  per  line.   Command
              substitutions are not expanded but forwarded as-is.

       <b>--tokens-raw</b>
              Print arguments in the selection as they appear on the command line, one per line.

       <b>-o</b> or <b>tokenize</b>
              Deprecated; do not use.

       If <b>commandline</b> is called during a call to complete a given string using <b>complete</b> <b>-C</b>  <b>STRING</b>,  <b>commandline</b>
       will consider the specified string to be the current contents of the command line.

       The following options output metadata about the commandline state:

       <b>-L</b> or <b>--line</b>
              If  no  argument is given, print the line that the cursor is on, with the topmost line starting at
              1.  Otherwise, set the cursor to the given line.

       <b>--column</b>
              If no argument is given, print the 1-based offset from  the  start  of  the  line  to  the  cursor
              position in Unicode code points.  Otherwise, set the cursor to the given code point offset.

       <b>-S</b> or <b>--search-mode</b>
              Evaluates to true if the commandline is performing a history search.

       <b>-P</b> or <b>--paging-mode</b>
              Evaluates to true if the commandline is showing pager contents, such as tab completions.

       <b>--paging-full-mode</b>
              Evaluates  to  true  if the commandline is showing pager contents, such as tab completions and all
              lines are shown (no "&lt;n&gt; more rows" message).

       <b>--is-valid</b>
              Returns true when the commandline is syntactically valid and complete.  If  it  is,  it  would  be
              executed when the <b>execute</b> bind function is called.  If the commandline is incomplete, return 2, if
              erroneous, return 1.

       <b>--showing-suggestion</b>
              Evaluates  to  true  (i.e.  returns  0)  when  the shell is currently showing an automatic history
              completion/suggestion, available to be consumed via one of the <u>forward-</u>  bindings.   For  example,
              can  be  used  to  determine if moving the cursor to the right when already at the end of the line
              would  have  no  effect  or  if  it  would  cause  a  completion  to  be   accepted   (note   that
              <u>forward-char-passive</u> does this automatically).

   <b>Example</b>
       <b>commandline</b>  <b>-j</b>  <b>$history[3]</b>  replaces the job under the cursor with the third item from the command line
       history.

       If the commandline contains

          &gt;_ echo $flounder &gt;&amp;2 | less; and echo $catfish

       (with the cursor on the "o" of "flounder")

       The <b>echo</b> <b>$flounder</b> <b>&gt;&amp;</b> is the first process, <b>less</b> the second and <b>and</b> <b>echo</b> <b>$catfish</b> the third.

       <b>echo</b> <b>$flounder</b> <b>&gt;&amp;2</b> <b>|</b> <b>less</b> is the first job, <b>and</b> <b>echo</b> <b>$catfish</b> the second.

       <b>$flounder</b> is the current token.

       The most common use for something like completions is

          set -l tokens (commandline -xpc)

       which gives the current <u>process</u> (what is being completed), tokenized into separate  entries,  up  to  but
       excluding the currently being completed token

       If you are then also interested in the in-progress token, add

          set -l current (commandline -ct)

       Note  that  this  makes  it  easy  to  render  fish's  infix matching moot - if possible it's best if the
       completions just print all possibilities and leave the matching to the current token up to fish's logic.

       More examples:

          &gt;_ commandline -t
          $flounder
          &gt;_ commandline -ct
          $fl
          &gt;_ commandline -b # or just commandline
          echo $flounder &gt;&amp;2 | less; and echo $catfish
          &gt;_ commandline -p
          echo $flounder &gt;&amp;2
          &gt;_ commandline -j
          echo $flounder &gt;&amp;2 | less

   <b>complete</b> <b>-</b> <b>edit</b> <b>command-specific</b> <b>tab-completions</b>
   <b>Synopsis</b>
       <b>complete</b> ((<b>-c</b> | <b>--command</b>) | (<b>-p</b> | <b>--path</b>)) <u>COMMAND</u> [<u>OPTIONS</u>]
       <b>complete</b> (<b>-C</b> | <b>--do-complete</b>) [<b>--escape</b>] <u>STRING</u>

   <b>Description</b>
       <b>complete</b> defines, removes or lists completions for a command.

       For an introduction to writing your own completions, see <u>Writing</u> <u>your</u> <u>own</u> <u>completions</u> in the fish manual.

       The following options are available:

       <b>-c</b> or <b>--command</b> <u>COMMAND</u>
              Specifies that <u>COMMAND</u> is the name of the command. If  there  is  no  <b>-c</b>  or  <b>-p</b>,  one  non-option
              argument will be used as the command.

       <b>-p</b> or <b>--path</b> <u>COMMAND</u>
              Specifies that <u>COMMAND</u> is the absolute path of the command (optionally containing wildcards).

       <b>-e</b> or <b>--erase</b>
              Deletes the specified completion.

       <b>-s</b> or <b>--short-option</b> <u>SHORT_OPTION</u>
              Adds a short option to the completions list.

       <b>-l</b> or <b>--long-option</b> <u>LONG_OPTION</u>
              Adds a GNU-style long option to the completions list.

       <b>-o</b> or <b>--old-option</b> <u>OPTION</u>
              Adds an old-style short or long option (see below for details).

       <b>-a</b> or <b>--arguments</b> <u>ARGUMENTS</u>
              Adds the specified option arguments to the completions list.

       <b>-k</b> or <b>--keep-order</b>
              Keeps  the  order  of <u>ARGUMENTS</u> instead of sorting alphabetically. Multiple <b>complete</b> calls with <b>-k</b>
              result in arguments of the later ones displayed first.

       <b>-f</b> or <b>--no-files</b>
              This completion may not be followed by a filename.

       <b>-F</b> or <b>--force-files</b>
              This completion may be followed by a filename,  even  if  another  applicable  <b>complete</b>  specified
              <b>--no-files</b>.

       <b>-r</b> or <b>--require-parameter</b>
              This  completion  must  have an option argument, i.e. may not be followed by another option.  This
              means that the next argument is the argument to the option.  If this  is  <u>not</u>  given,  the  option
              argument must be attached like <b>-xFoo</b> or <b>--color=auto</b>.

       <b>-x</b> or <b>--exclusive</b>
              Short for <b>-r</b> and <b>-f</b>.

       <b>-d</b> or <b>--description</b> <u>DESCRIPTION</u>
              Add a description for this completion, to be shown in the completion pager.

       <b>-w</b> or <b>--wraps</b> <u>WRAPPED_COMMAND</u>
              Causes the specified command to inherit completions from <u>WRAPPED_COMMAND</u> (see below for details).

       <b>-n</b> or <b>--condition</b> <u>CONDITION</u>
              This  completion  should  only be used if the <u>CONDITION</u> (a shell command) returns 0. This makes it
              possible to specify completions that should only be used in some cases. If multiple conditions are
              specified, fish will try them in the order they are specified until one fails or all succeeded.

       <b>-C</b> or <b>--do-complete</b> <u>STRING</u>
              Makes <b>complete</b> try to find all possible completions for the  specified  string.  If  there  is  no
              <u>STRING</u>, the current commandline is used instead.

       <b>--escape</b>
              When used with <b>-C</b>, escape special characters in completions.

       <b>-h</b> or <b>--help</b>
              Displays help about using this command.

       Command-specific tab-completions in <b>fish</b> are based on the notion of options and arguments. An option is a
       parameter  which  begins with a hyphen, such as <b>-h</b>, <b>-help</b> or <b>--help</b>. Arguments are parameters that do not
       begin with a hyphen. Fish recognizes three styles of options, the same styles as the GNU getopt  library.
       These styles are:

       • Short  options, like <b>-a</b>. Short options are a single character long, are preceded by a single hyphen and
         can be grouped together (like <b>-la</b>, which is equivalent to <b>-l</b> <b>-a</b>). Option arguments may be specified  by
         appending  the  option  with  the  value  (<b>-w32</b>), or, if <b>--require-parameter</b> is given, in the following
         parameter (<b>-w</b> <b>32</b>).

       • Old-style options, long like <b>-Wall</b> or <b>-name</b> or even short like <b>-a</b>. Old-style options can be  more  than
         one  character  long, are preceded by a single hyphen and may not be grouped together. Option arguments
         are specified by default following a space (<b>-foo</b> <b>null</b>) or after <b>=</b> (<b>-foo=null</b>).

       • GNU-style long options, like <b>--colors</b>. GNU-style long options can be more than one character long,  are
         preceded  by  two  hyphens,  and can't be grouped together. Option arguments may be specified after a <b>=</b>
         (<b>--quoting-style=shell</b>),  or,  if  <b>--require-parameter</b>   is   given,   in   the   following   parameter
         (<b>--quoting-style</b> <b>shell</b>).

       Multiple  commands  and  paths  can  be  given  in  one  call to define the same completions for multiple
       commands.

       Multiple command switches and wrapped commands can also be given to define multiple  completions  in  one
       call.

       Invoking  <b>complete</b>  multiple  times  for the same command adds the new definitions on top of any existing
       completions defined for the command.

       When <b>-a</b> or <b>--arguments</b> is specified in conjunction with long, short, or old-style options, the  specified
       arguments  are  only  completed  as  arguments  for any of the specified options. If <b>-a</b> or <b>--arguments</b> is
       specified without any long, short, or old-style options, the specified arguments are used when completing
       non-option arguments to the command (except when completing an option argument that was specified with <b>-r</b>
       or <b>--require-parameter</b>).

       Command substitutions found in <b>ARGUMENTS</b> should return a newline-separated list of  arguments,  and  each
       argument may optionally have a tab character followed by the argument description. Description given this
       way override a description given with <b>-d</b> or <b>--description</b>.

       Descriptions  given  with  <b>--description</b>  are also used to group options given with <b>-s</b>, <b>-o</b> or <b>-l</b>. Options
       with the same (non-empty) description will be listed as one candidate, and one of them will be picked. If
       the description is empty or no description was given this is skipped.

       The <b>-w</b> or <b>--wraps</b> options causes the specified command  to  inherit  completions  from  another  command,
       "wrapping"  the  other  command. The wrapping command can also have additional completions. A command can
       wrap multiple commands, and wrapping is transitive: if A wraps B, and B wraps  C,  then  A  automatically
       inherits  all  of C's completions. Wrapping can be removed using the <b>-e</b> or <b>--erase</b> options. Wrapping only
       works for completions specified with <b>-c</b> or <b>--command</b> and are ignored when specifying completions with  <b>-p</b>
       or <b>--path</b>.

       When  erasing  completions,  it  is  possible  to  either erase all completions for a specific command by
       specifying <b>complete</b> <b>-c</b> <b>COMMAND</b> <b>-e</b>, or by specifying a specific completion option to delete.

       When <b>complete</b> is called without anything that would define  or  erase  completions  (options,  arguments,
       wrapping, ...), it shows matching completions instead. So <b>complete</b> without any arguments shows all loaded
       completions,  <b>complete</b> <b>-c</b> <b>foo</b> shows all loaded completions for <b>foo</b>. Since completions are <u>autoloaded</u>, you
       will have to trigger them first.

   <b>Examples</b>
       The short-style option <b>-o</b> for the <b>gcc</b> command needs a file argument:

          complete -c gcc -s o -r

       The short-style option <b>-d</b> for the <b>grep</b> command requires one of <b>read</b>, <b>skip</b> or <b>recurse</b>:

          complete -c grep -s d -x -a "read skip recurse"

       The <b>su</b> command takes any username as an argument. Usernames are given as the first colon-separated  field
       in the file /etc/passwd. This can be specified as:

          complete -x -c su -d "Username" -a "(cat <a href="file:/etc/passwd">/etc/passwd</a> | cut -d : -f 1)"

       The  <b>rpm</b>  command  has  several different modes. If the <b>-e</b> or <b>--erase</b> flag has been specified, <b>rpm</b> should
       delete one or more packages, in which case several switches related to deleting packages are valid,  like
       the <b>nodeps</b> switch.

       This can be written as:

          complete -c rpm -n "__fish_contains_opt -s e erase" -l nodeps -d "Don't check dependencies"

       where  <b>__fish_contains_opt</b>  is  a  function  that  checks  the  command line buffer for the presence of a
       specified set of options.

       To implement an alias, use the <b>-w</b> or <b>--wraps</b> option:

          complete -c hub -w git

       Now hub inherits all of the completions from  git.  Note  this  can  also  be  specified  in  a  function
       declaration (<b>function</b> <b>thing</b> <b>-w</b> <b>otherthing</b>).

          complete -c git

       Shows all completions for <b>git</b>.

       Any command <b>foo</b> that doesn't support grouping multiple short options in one string (not supporting <b>-xf</b> as
       short  for  <b>-x</b>  <b>-f</b>)  or  a  short option and its value in one string (not supporting <b>-d9</b> instead of <b>-d</b> <b>9</b>)
       should be specified as a single-character old-style option  instead  of  as  a  short-style  option;  for
       example, <b>complete</b> <b>-c</b> <b>foo</b> <b>-o</b> <b>s;</b> <b>complete</b> <b>-c</b> <b>foo</b> <b>-o</b> <b>v</b> would never suggest <b>foo</b> <b>-ov</b> but rather <b>foo</b> <b>-o</b> <b>-v</b>.

   <b>contains</b> <b>-</b> <b>test</b> <b>if</b> <b>a</b> <b>word</b> <b>is</b> <b>present</b> <b>in</b> <b>a</b> <b>list</b>
   <b>Synopsis</b>
       <b>contains</b> [<u>OPTIONS</u>] <u>KEY</u> [<u>VALUES</u> ...]

   <b>Description</b>
       <b>contains</b>  tests  whether  the  set <u>VALUES</u> contains the string <u>KEY</u>.  If so, <b>contains</b> exits with code 0; if
       not, it exits with code 1.

       The following options are available:

       <b>-i</b> or <b>--index</b>
              Print the index (number of the element in the set) of the first matching element.

       <b>-h</b> or <b>--help</b>
              Displays help about using this command.

       Note that <b>contains</b> interprets all arguments starting with a <b>-</b> as an  option  to  <b>contains</b>,  until  an  <b>--</b>
       argument is reached.

       See the examples below.

   <b>Example</b>
       If <u>animals</u> is a list of animals, the following will test if <u>animals</u> contains "cat":

          if contains cat $animals
             echo Your animal list is evil!
          end

       This code will add some directories to <u>PATH</u> if they aren't yet included:

          for i in <a href="file:~/bin">~/bin</a> <a href="file:/usr/local/bin">/usr/local/bin</a>
              if not contains $i $PATH
                  set PATH $PATH $i
              end
          end

       While this will check if function <b>hasargs</b> is being ran with the <b>-q</b> option:

          function hasargs
              if contains -- -q $argv
                  echo '$argv contains a -q option'
              end
          end

       The  <b>--</b>  here  stops  <b>contains</b> from treating <b>-q</b> to an option to itself.  Instead it treats it as a normal
       string to check.

   <b>continue</b> <b>-</b> <b>skip</b> <b>the</b> <b>remainder</b> <b>of</b> <b>the</b> <b>current</b> <b>iteration</b> <b>of</b> <b>the</b> <b>current</b> <b>inner</b> <b>loop</b>
   <b>Synopsis</b>
       <u>LOOP_CONSTRUCT</u><b>;</b> [<u>COMMANDS</u> ...<b>;</b>] <b>continue;</b> [<u>COMMANDS</u> ...<b>;</b>] <b>end</b>

   <b>Description</b>
       <b>continue</b> skips the remainder of the current iteration of the current inner loop, such as a <u>for</u> loop or  a
       <u>while</u>  loop.  It  is  usually  added  inside  of  a conditional block such as an <u>if</u> statement or a <u>switch</u>
       statement.

   <b>Example</b>
       The following code removes all tmp files that do not contain the word smurf.

          for i in *.tmp
              if grep smurf $i
                  continue
              end
              # This "rm" is skipped over if "continue" is executed.
              rm $i
              # As is this "echo"
              echo $i
          end

   <b>See</b> <b>Also</b>
       • the <u>break</u> command, to stop the current inner loop

   <b>count</b> <b>-</b> <b>count</b> <b>the</b> <b>number</b> <b>of</b> <b>elements</b> <b>of</b> <b>a</b> <b>list</b>
   <b>Synopsis</b>
       <b>count</b> <u>STRING1</u> <u>STRING2</u> ...
       <u>COMMAND</u> | <b>count</b>
       <b>count</b> [...] <b>&lt;</b> <u>FILE</u>

   <b>Description</b>
       <b>count</b> prints the number of arguments that were passed to it, plus the number of newlines passed to it via
       stdin. This is usually used to find out how many elements an environment variable list contains,  or  how
       many lines there are in a text file.

       <b>count</b> does not accept any options, not even <b>-h</b> or <b>--help</b>.

       <b>count</b>  exits with a non-zero exit status if no arguments were passed to it, and with zero if at least one
       argument was passed.

       Note that, like <b>wc</b> <b>-l</b>, reading from stdin counts newlines, so <b>echo</b> <b>-n</b> <b>foo</b> <b>|</b> <b>count</b> will print 0.

   <b>Example</b>
          count $PATH
          # Returns the number of directories in the users PATH variable.

          count *.txt
          # Returns the number of files in the current working directory
          # ending with the suffix '.txt'.

          git ls-files --others --exclude-standard | count
          # Returns the number of untracked files in a git repository

          printf '%s\n' foo bar | count baz
          # Returns 3 (2 lines from stdin plus 1 argument)

          count &lt; <a href="file:/etc/hosts">/etc/hosts</a>
          # Counts the number of entries in the hosts file

   <b>dirh</b> <b>-</b> <b>print</b> <b>directory</b> <b>history</b>
   <b>Synopsis</b>
       <b>dirh</b>

   <b>Description</b>
       <b>dirh</b> prints the current <u>directory</u> <u>history</u>. The current position in the history is highlighted  using  the
       color defined in the <b>fish_color_history_current</b> environment variable.

       <b>dirh</b> does not accept any parameters.

       Note  that  the  <u>cd</u>  command  limits  directory  history to the 25 most recently visited directories. The
       history is stored in the <b>$dirprev</b> and <b>$dirnext</b> variables.

   <b>See</b> <b>Also</b>
       • the <u>cdh</u> command to display a prompt to quickly navigate the history

       • the <u>prevd</u> command to move backward

       • the <u>nextd</u> command to move forward

   <b>dirs</b> <b>-</b> <b>print</b> <b>directory</b> <b>stack</b>
   <b>Synopsis</b>
       <b>dirs</b> [<b>-c</b>]

   <b>Description</b>
       <b>dirs</b> prints the current <u>directory</u> <u>stack</u>, as created by <u>pushd</u> and modified by <u>popd</u>.

       The following options are available:

       <b>-c</b>:    Clear the directory stack instead of printing it.

       <b>-h</b> or <b>--help</b>
              Displays help about using this command.

       <b>dirs</b> does not accept any arguments.

   <b>See</b> <b>Also</b>
       • the <u>cdh</u> command, which provides a more intuitive way to navigate to recently visited directories.

   <b>disown</b> <b>-</b> <b>remove</b> <b>a</b> <b>process</b> <b>from</b> <b>the</b> <b>list</b> <b>of</b> <b>jobs</b>
   <b>Synopsis</b>
       <b>disown</b> [<u>PID</u> ...]

   <b>Description</b>
       <b>disown</b> removes the specified <u>job</u> from the list of jobs. The job itself continues to exist, but fish  does
       not keep track of it any longer.  This will make fish lose all knowledge of the job, so functions defined
       with <b>--on-process-exit</b> or <b>--on-job-exit</b> will no longer fire.

       Jobs  in the list of jobs are sent a hang-up signal when fish terminates, which usually causes the job to
       terminate; <b>disown</b> allows these processes to continue regardless.

       If no process is specified, the most recently-used job is removed (like <u>bg</u> and <u>fg</u>).  If one or more  PIDs
       are  specified,  jobs  with  the  specified  process  IDs are removed from the job list. Invalid jobs are
       ignored and a warning is printed.

       If a job is stopped, it is sent a signal to continue running,  and  a  warning  is  printed.  It  is  not
       possible to use the <u>bg</u> builtin to continue a job once it has been disowned.

       <b>disown</b>  returns  0  if  all  specified  jobs  were  disowned  successfully,  and  1  if any problems were
       encountered.

       The <b>--help</b> or <b>-h</b> option displays help about using this command.

   <b>Example</b>
       <b>firefox</b> <b>&amp;;</b> <b>disown</b> will start the Firefox web browser in the background and remove it from the  job  list,
       meaning it will not be closed when the fish process is closed.

       <b>disown</b> <b>(jobs</b> <b>-p)</b> removes all <u>jobs</u> from the job list without terminating them.

   <b>echo</b> <b>-</b> <b>display</b> <b>a</b> <b>line</b> <b>of</b> <b>text</b>
   <b>Synopsis</b>
       <b>echo</b> [<u>OPTIONS</u>] [<u>STRING</u>]

   <b>Description</b>
       NOTE:  This page documents the fish builtin <b>echo</b>.  To see the documentation on any non-fish versions, use
       <b>command</b> <b>man</b> <b>echo</b>.

       <b>echo</b> displays <u>STRING</u> of text.

       The following options are available:

       <b>-n</b>     Do not output a newline.

       <b>-s</b>     Do not separate arguments with spaces.

       <b>-E</b>     Disable interpretation of backslash escapes (default).

       <b>-e</b>     Enable interpretation of backslash escapes.

       Unlike other shells, this echo accepts <b>--</b> to signal the end of the options.

   <b>Escape</b> <b>Sequences</b>
       If <b>-e</b> is used, the following sequences are recognized:

       • <b>\</b> backslash

       • <b>\a</b> alert (BEL)

       • <b>\b</b> backspace

       • <b>\c</b> produce no further output

       • <b>\e</b> escape

       • <b>\f</b> form feed

       • <b>\n</b> new line

       • <b>\r</b> carriage return

       • <b>\t</b> horizontal tab

       • <b>\v</b> vertical tab

       • <b>\0NNN</b> byte with octal value NNN (1 to 3 digits)

       • <b>\xHH</b> byte with hexadecimal value HH (1 to 2 digits)

   <b>Example</b>
          &gt; echo 'Hello World'
          Hello World

          &gt; echo -e 'Top\nBottom'
          Top
          Bottom

          &gt; echo -- -n
          -n

   <b>See</b> <b>Also</b>
       • the <u>printf</u> command, for more control over output formatting

   <b>else</b> <b>-</b> <b>execute</b> <b>command</b> <b>if</b> <b>a</b> <b>condition</b> <b>is</b> <b>not</b> <b>met</b>
   <b>Synopsis</b>
       <b>if</b> <u>CONDITION</u><b>;</b> <u>COMMANDS_TRUE</u> ...<b>;</b> [<b>else;</b> <u>COMMANDS_FALSE</u> ...<b>;</b>] <b>end</b>

   <b>Description</b>
       <u>if</u> will execute the command <u>CONDITION*</u>.  If the condition's exit status is 0, the commands  <u>COMMANDS_TRUE</u>
       will execute.  If it is not 0 and <b>else</b> is given, <u>COMMANDS_FALSE</u> will be executed.

   <b>Example</b>
       The following code tests whether a file <u>foo.txt</u> exists as a regular file.

          if test -f foo.txt
              echo foo.txt exists
          else
              echo foo.txt does not exist
          end

   <b>emit</b> <b>-</b> <b>emit</b> <b>a</b> <b>generic</b> <b>event</b>
   <b>Synopsis</b>
       <b>emit</b> <u>EVENT_NAME</u> [<u>ARGUMENTS</u> ...]

   <b>Description</b>
       <b>emit</b>  emits,  or  fires,  an event. Events are delivered to, or caught by, special functions called <u>event</u>
       <u>handlers</u>. The arguments are passed to the event handlers as function arguments.

       The <b>--help</b> or <b>-h</b> option displays help about using this command.

   <b>Example</b>
       The following code first defines an event handler for the generic  event  named  'test_event',  and  then
       emits an event of that type.

          function event_test --on-event test_event
              echo event test: $argv
          end

          emit test_event something

   <b>Notes</b>
       Note  that  events  are  only sent to the current fish process as there is no way to send events from one
       fish process to another.

   <b>end</b> <b>-</b> <b>end</b> <b>a</b> <b>block</b> <b>of</b> <b>commands</b>
   <b>Synopsis</b>
       <b>begin</b>
           [<u>COMMANDS</u> ...]
       <b>end</b>

       <b>function</b> <u>NAME</u> [<u>OPTIONS</u>]<b>;</b> <u>COMMANDS</u> ...<b>;</b> <b>end</b>
       <b>if</b> <u>CONDITION</u><b>;</b> <u>COMMANDS_TRUE</u> ...<b>;</b> [<b>else;</b> <u>COMMANDS_FALSE</u> ...<b>;</b>] <b>end</b>
       <b>switch</b> <u>VALUE</u><b>;</b> [<b>case</b> [<u>WILDCARD</u> ...]<b>;</b> [<u>COMMANDS</u> ...]<b>;</b> ...] <b>end</b>
       <b>while</b> <u>CONDITION</u><b>;</b> <u>COMMANDS</u> ...<b>;</b> <b>end</b>
       <b>for</b> <u>VARNAME</u> <b>in</b> [<u>VALUES</u> ...]<b>;</b> <u>COMMANDS</u> ...<b>;</b> <b>end</b>

   <b>Description</b>
       The <b>end</b> keyword ends a block of commands started by one of the following commands:

       • <u>begin</u> to start a block of commands

       • <u>function</u> to define a function

       • <u>if</u>, <u>switch</u> to conditionally execute commands

       • <u>while</u>, <u>for</u> to perform commands multiple times

       The <b>end</b> keyword does not change the current exit status.  Instead, the status after it will be the status
       returned by the most recent command.

   <b>eval</b> <b>-</b> <b>evaluate</b> <b>the</b> <b>specified</b> <b>commands</b>
   <b>Synopsis</b>
       <b>eval</b> [<u>COMMANDS</u> ...]

   <b>Description</b>
       <b>eval</b> evaluates the specified parameters as a command.  If more  than  one  parameter  is  specified,  all
       parameters will be joined using a space character as a separator.

       If the command does not need access to stdin, consider using <u>source</u> instead.

       If  no  piping or other compound shell constructs are required, variable-expansion-as-command, as in  <b>set</b>
       <b>cmd</b> <b>ls</b> <b>-la;</b> <b>$cmd</b>, is also an option.

   <b>Example</b>
       The following code will call the ls command and truncate each filename to the first 12 characters.

          set cmd ls \| cut -c 1-12
          eval $cmd

   <b>exec</b> <b>-</b> <b>execute</b> <b>command</b> <b>in</b> <b>current</b> <b>process</b>
   <b>Synopsis</b>
       <b>exec</b> <u>COMMAND</u>

   <b>Description</b>
       NOTE: This page documents the fish builtin <b>exec</b>.  To see the documentation on any non-fish versions,  use
       <b>command</b> <b>man</b> <b>exec</b>.

       <b>exec</b>  replaces  the  currently  running  shell  with  a new command. On successful completion, <b>exec</b> never
       returns. <b>exec</b> cannot be used inside a pipeline.

       The <b>--help</b> or <b>-h</b> option displays help about using this command.

   <b>Example</b>
       <b>exec</b> <b>emacs</b> starts up the emacs text editor, and exits <b>fish</b>. When emacs exits, the session will terminate.

   <b>exit</b> <b>-</b> <b>exit</b> <b>the</b> <b>shell</b>
   <b>Synopsis</b>
       <b>exit</b> [<u>CODE</u>]

   <b>Description</b>
       <b>exit</b> is a special builtin that causes the shell to exit.  Either  255  or  the  <u>CODE</u>  supplied  is  used,
       whichever is lesser.  Otherwise, the exit status will be that of the last command executed.

       If  exit is called while sourcing a file (using the <u>source</u> builtin) the rest of the file will be skipped,
       but the shell itself will not exit.

       The <b>--help</b> or <b>-h</b> option displays help about using this command.

   <b>export</b> <b>-</b> <b>compatibility</b> <b>function</b> <b>for</b> <b>exporting</b> <b>variables</b>
   <b>Synopsis</b>
       <b>export</b>
       <b>export</b> <u>NAME</u><b>=</b><u>VALUE</u>

   <b>Description</b>
       <b>export</b> is a function included for compatibility with POSIX shells. In general, the <u>set</u> builtin should  be
       used instead.

       When called without arguments, <b>export</b> prints a list of currently-exported variables, like <b>set</b> <b>-x</b>.

       When  called  with a <b>NAME=VALUE</b> pair, the variable <b>NAME</b> is set to <b>VALUE</b> in the global scope, and exported
       as an environment variable to other commands.

       There are no options available.

   <b>Example</b>
       The following commands have an identical effect.

          set -gx PAGER bat
          export PAGER=bat

       Note: If you want to add to e.g. <b>$PATH</b>, you need to be careful to <u>combine</u> <u>the</u> <u>list</u>. Quote it, like so:

          export PATH="$PATH:/opt/bin"

       Or just use <b>set</b>, which avoids this:

          set -gx PATH $PATH /opt/bin

   <b>See</b> <b>more</b>
       1. The <u>set</u> command.

   <b>false</b> <b>-</b> <b>return</b> <b>an</b> <b>unsuccessful</b> <b>result</b>
   <b>Synopsis</b>
       <b>false</b>

   <b>Description</b>
       <b>false</b> sets the exit status to 1.

   <b>See</b> <b>Also</b>
       • <u>true</u> command

       • <u>$status</u> variable

   <b>fg</b> <b>-</b> <b>bring</b> <b>job</b> <b>to</b> <b>foreground</b>
   <b>Synopsis</b>
       <b>fg</b> [<u>PID</u>]

   <b>Description</b>
       The <b>fg</b> builtin brings the specified <u>job</u> to the foreground,  resuming  it  if  it  is  stopped.   While  a
       foreground job is executed, fish is suspended.  If no job is specified, the last job to be used is put in
       the  foreground.   If <b>PID</b> is specified, the job containing a process with the specified process ID is put
       in the foreground.

       For compatibility with other shells, job expansion syntax is supported for <b>fg</b>. A <u>PID</u>  of  the  format  <b>%1</b>
       will foreground job 1.  Job numbers can be seen in the output of <u>jobs</u>.

       The <b>--help</b> or <b>-h</b> option displays help about using this command.

   <b>Example</b>
       <b>fg</b> will put the last job in the foreground.

       <b>fg</b> <b>%3</b> will put job 3 into the foreground.

   <b>fish</b> <b>-</b> <b>the</b> <b>friendly</b> <b>interactive</b> <b>shell</b>
   <b>Synopsis</b>
       <b>fish</b> [<u>OPTIONS</u>] [<u>FILE</u> [<u>ARG</u> ...]]
       <b>fish</b> [<u>OPTIONS</u>] [<b>-c</b> <u>COMMAND</u> [<u>ARG</u> ...]]

   <b>Description</b>
       <b>fish</b>  is  a  command-line shell written mainly with interactive use in mind.  This page briefly describes
       the options for invoking <b>fish</b>.  The <u>full</u> <u>manual</u> is available in HTML  by  using  the  <b>help</b>  command  from
       inside  fish, and in the <u><a href="../man1/fish-doc.1.html">fish-doc</a>(1)</u> man page.  The <u>tutorial</u> is available as HTML via <b>help</b> <b>tutorial</b> or in
       <u>man</u> <u>fish-tutorial</u>.

       The following options are available:

       <b>-c</b> or <b>--command=COMMAND</b>
              Evaluate the specified commands instead  of  reading  from  the  commandline,  passing  additional
              positional arguments through <b>$argv</b>.

       <b>-C</b> or <b>--init-command=COMMANDS</b>
              Evaluate specified commands after reading the configuration but before executing command specified
              by <b>-c</b> or reading interactive input.

       <b>-d</b> or <b>--debug=DEBUG_CATEGORIES</b>
              Enables debug output and specify a pattern for matching debug categories.  See <u>Debugging</u> below for
              details.

       <b>-o</b> or <b>--debug-output=DEBUG_FILE</b>
              Specifies  a  file  path  to  receive  the debug output, including categories and <u>fish_trace</u>.  The
              default is standard error.

       <b>-i</b> or <b>--interactive</b>
              The shell is interactive.

       <b>--install[=PATH]</b>
              When built as self-installable (via cargo), this will unpack fish's data files and place  them  in
              <b><a href="file:~/.local/share/fish/install/">~/.local/share/fish/install/</a></b>.  fish will also ask to do this automatically when run interactively.
              If  PATH is given, fish will install itself into a relocatable directory tree rooted at that path.
              That means it will install the data files to PATH/share/fish and copy itself to PATH/bin/fish.

       <b>-l</b> or <b>--login</b>
              Act as if invoked as a login shell.

       <b>-N</b> or <b>--no-config</b>
              Do not read configuration files.

       <b>-n</b> or <b>--no-execute</b>
              Do not execute any commands, only perform syntax checking.

       <b>-p</b> or <b>--profile=PROFILE_FILE</b>
              when <b>fish</b> exits, output timing information on all executed commands to the specified  file.   This
              excludes time spent starting up and reading the configuration.

       <b>--profile-startup=PROFILE_FILE</b>
              Will write timing for <b>fish</b> startup to specified file.

       <b>-P</b> or <b>--private</b>
              Enables <u>private</u> <u>mode</u>: <b>fish</b> will not access old or store new history.

       <b>--print-rusage-self</b>
              When <b>fish</b> exits, output stats from getrusage.

       <b>--print-debug-categories</b>
              Print all debug categories, and then exit.

       <b>-v</b> or <b>--version</b>
              Print version and exit.

       <b>-f</b> or <b>--features=FEATURES</b>
              Enables one or more comma-separated <u>feature</u> <u>flags</u>.

       The <b>fish</b> exit status is generally the <u>exit</u> <u>status</u> <u>of</u> <u>the</u> <u>last</u> <u>foreground</u> <u>command</u>.

   <b>Debugging</b>
       While  fish  provides  extensive  support  for  <u>debugging</u>  <u>fish</u> <u>scripts</u>, it is also possible to debug and
       instrument its internals.  Debugging can be enabled by passing the  <b>--debug</b>  option.   For  example,  the
       following  command  turns  on  debugging  for  background  IO  thread  events, in addition to the default
       categories, i.e. <u>debug</u>, <u>error</u>, <u>warning</u>, and <u>warning-path</u>:

          &gt; fish --debug=iothread

       Available  categories  are  listed  by  <b>fish</b>  <b>--print-debug-categories</b>.  The  <b>--debug</b>  option  accepts  a
       comma-separated  list  of categories, and supports glob syntax.  The following command turns on debugging
       for <u>complete</u>, <u>history</u>, <u>history-file</u>, and <u>profile-history</u>, as well as the default categories:

          &gt; fish --debug='complete,*history*'

       Debug messages output to stderr by default. Note that  if  <u>fish_trace</u>  is  set,  execution  tracing  also
       outputs to stderr by default. You can output to a file using the <b>--debug-output</b> option:

          &gt; fish --debug='complete,*history*' --debug-output=/tmp/fish.log --init-command='set fish_trace on'

       These  options  can  also  be changed via the <u>FISH_DEBUG</u> and <u>FISH_DEBUG_OUTPUT</u> variables.  The categories
       enabled via <b>--debug</b> are <u>added</u> to the ones enabled by $FISH_DEBUG, so they can be  disabled  by  prefixing
       them with <b>-</b> (<b>reader-*,-ast*</b> enables reader debugging and disables ast debugging).

       The file given in <b>--debug-output</b> takes precedence over the file in <u>FISH_DEBUG_OUTPUT</u>.

   <b>fish_add_path</b> <b>-</b> <b>add</b> <b>to</b> <b>the</b> <b>path</b>
   <b>Synopsis</b>
       <b>fish_add_path</b> <b>path</b> ...
       <b>fish_add_path</b> [(<b>-g</b> | <b>--global</b>) | (<b>-U</b> | <b>--universal</b>) | (<b>-P</b> | <b>--path</b>)] [(<b>-m</b> | <b>--move</b>)] [(<b>-a</b> | <b>--append</b>) | (<b>-p</b> | <b>--prepend</b>)] [(<b>-v</b> | <b>--verbose</b>) | (<b>-n</b> | <b>--dry-run</b>)] <u>PATHS</u> ...

   <b>Description</b>
       <b>fish_add_path</b>  is  a  simple  way  to  add  more  directories  to fish's <u>PATH</u>. It does this by adding the
       directories either to <u>fish_user_paths</u> or directly to <u>PATH</u> (if the <b>--path</b> switch is given).

       It is (by default) safe to use <b>fish_add_path</b> in config.fish, or it can be used once,  interactively,  and
       the  paths will stay in future because of <u>universal</u> <u>variables</u>. This is a "do what I mean" style command -
       it tries to do the right thing by default, and follow your lead on what you have already set up (e.g.  by
       using  a  global  <u>fish_user_paths</u> if you have that already). If you need more control, consider modifying
       the variable yourself.

       Directories are normalized with <u>realpath</u>. Trailing slashes  are  ignored  and  relative  paths  are  made
       absolute  (but  symlinks are not resolved). If a directory is already included, it is not added again and
       stays in the same place unless the <b>--move</b> switch is given.

       Directories are added in the order they are given, and they are prepended to the path unless <b>--append</b>  is
       given.  If  $fish_user_paths  is  used,  that  means  they  are last in $fish_user_paths, which is itself
       prepended to <u>PATH</u>, so they still stay ahead of the system paths. If the <b>--path</b> option is used, the  paths
       are appended/prepended to <u>PATH</u> directly, so this doesn't happen.

       With  <b>--path</b>,  because  <u>PATH</u>  must  be  a  global  variable instead of a universal one, the changes won't
       persist, so those calls need to be stored in <u>config.fish</u>. This also applies  to  <u>fish_user_paths</u>  if  you
       make it global (for instance by passing <b>--global</b>).

       If no directory is new, the variable (<u>fish_user_paths</u> or <u>PATH</u>) is not set again or otherwise modified, so
       variable handlers are not triggered.

       If an argument is not an existing directory, <b>fish_add_path</b> ignores it.

   <b>Options</b>
       <b>-a</b> or <b>--append</b>
              Add directories to the <u>end</u> of the variable.

       <b>-p</b> or <b>--prepend</b>
              Add directories to the <u>front</u> of the variable (this is the default).

       <b>-g</b> or <b>--global</b>
              Use a global <u>fish_user_paths</u>.

       <b>-U</b> or <b>--universal</b>
              Use a universal <u>fish_user_paths</u> - this is the default if it doesn't already exist.

       <b>-P</b> or <b>--path</b>
              Manipulate <u>PATH</u> directly.

       <b>-m</b> or <b>--move</b>
              Move already-included directories to the place they would be added - by default they would be left
              in place and not added again.

       <b>-v</b> or <b>--verbose</b>
              Print the <u>set</u> command used, and some more warnings, like when a path is skipped because it doesn't
              exist  or  is  not  a directory.  Verbose mode is automatically enabled when fish_add_path is used
              interactively and the output goes to the terminal.

       <b>-n</b> or <b>--dry-run</b>
              Print the <b>set</b> command that would be used without executing it.

       <b>-h</b> or <b>--help</b>
              Displays help about using this command.

       If <b>--move</b> is used, it may of course lead to the path swapping order, so you should be careful doing  that
       in config.fish.

   <b>Example</b>
          # I just installed mycoolthing and need to add it to the path to use it.
          # It is at /opt/mycoolthing/bin/mycoolthing,
          # so let's add the directory: /opt/mycoolthing/bin.
          &gt; fish_add_path /opt/mycoolthing/bin

          # I want my <a href="file:~/.local/bin">~/.local/bin</a> to be checked first,
          # even if it was already added.
          &gt; fish_add_path -m <a href="file:~/.local/bin">~/.local/bin</a>

          # I prefer using a global fish_user_paths
          # This isn't saved automatically, I need to add this to config.fish
          # if I want it to stay.
          &gt; fish_add_path -g <a href="file:~/.local/bin">~/.local/bin</a> <a href="file:~/.otherbin">~/.otherbin</a> <a href="file:/usr/local/sbin">/usr/local/sbin</a>

          # I want to append to the entire $PATH because this directory contains fallbacks
          # This needs --path/-P because otherwise it appends to $fish_user_paths,
          # which is added to the front of $PATH.
          &gt; fish_add_path --append --path /opt/fallback/bin

          # I want to add the bin/ directory of my current $PWD (say /home/nemo/)
          # -v/--verbose shows what fish_add_path did.
          &gt; fish_add_path -v bin/
          set fish_user_paths /home/nemo/bin <a href="file:/usr/bin">/usr/bin</a> /home/nemo/.local/bin

          # I have installed ruby via homebrew
          &gt; fish_add_path /usr/local/opt/ruby/bin

   <b>fish_breakpoint_prompt</b> <b>-</b> <b>define</b> <b>the</b> <b>prompt</b> <b>when</b> <b>stopped</b> <b>at</b> <b>a</b> <b>breakpoint</b>
   <b>Synopsis</b>
       <b>fish_breakpoint_prompt</b>

          function fish_breakpoint_prompt
              ...
          end

   <b>Description</b>
       <b>fish_breakpoint_prompt</b> is the prompt function when asking for input in response to a <u>breakpoint</u> command.

       The exit status of commands within <b>fish_breakpoint_prompt</b> will not modify the value of <u>$status</u> outside of
       the <b>fish_breakpoint_prompt</b> function.

       <b>fish</b> ships with a default version of this function that displays the function name and line number of the
       current execution context.

   <b>Example</b>
       A simple prompt that is a simplified version of the default debugging prompt:

          function fish_breakpoint_prompt -d "Write out the debug prompt"
              set -l function (status current-function)
              set -l line (status current-line-number)
              set -l prompt "$function:$line &gt;"
              echo -ns (set_color $fish_color_status) "BP $prompt" (set_color normal) ' '
          end

   <b>fish_clipboard_copy</b> <b>-</b> <b>copy</b> <b>text</b> <b>to</b> <b>the</b> <b>system's</b> <b>clipboard</b>
   <b>Synopsis</b>
       <b>fish_clipboard_copy</b>

       <b>foo</b> | <b>fish_clipboard_copy</b>

   <b>Description</b>
       The <b>fish_clipboard_copy</b> function copies text to the system clipboard.

       If stdin is not a terminal (see <u>isatty</u>), it will read all input from there and copy it. If it is, it will
       use the current commandline, or the current selection if there is one.

       It is bound to <b>ctrl-x</b> by default.

       <b>fish_clipboard_copy</b> works by calling a system-specific backend. If it doesn't appear to work you may need
       to install yours.

       Currently supported are:

       • <b>pbcopy</b>

       • <b>wl-copy</b> using wayland

       • <b>xsel</b> and <b>xclip</b> for X11

       • <b>clip.exe</b> on Windows.

   <b>See</b> <b>also</b>
       • <u>fish_clipboard_paste</u> <u>-</u> <u>get</u> <u>text</u> <u>from</u> <u>the</u> <u>system's</u> <u>clipboard</u> which does the inverse.

   <b>fish_clipboard_paste</b> <b>-</b> <b>get</b> <b>text</b> <b>from</b> <b>the</b> <b>system's</b> <b>clipboard</b>
   <b>Synopsis</b>
       <b>fish_clipboard_paste</b>

       <b>fish_clipboard_paste</b> | <b>foo</b>

   <b>Description</b>
       The <b>fish_clipboard_paste</b> function copies text from the system clipboard.

       If  its  stdout  is  not  a  terminal  (see  <u>isatty</u>), it will output everything there, as-is, without any
       additional newlines. If it is, it will put the text in the commandline instead.

       If it outputs to the commandline, it will automatically escape the output  if  the  cursor  is  currently
       inside single-quotes so it is suitable for single-quotes (meaning it escapes <b>'</b> and <b>\\</b>).

       It is bound to <b>ctrl-v</b> by default.

       <b>fish_clipboard_paste</b>  works  by  calling  a system-specific backend. If it doesn't appear to work you may
       need to install yours.

       Currently supported are:

       • <b>pbpaste</b>

       • <b>wl-paste</b> using wayland

       • <b>xsel</b> and <b>xclip</b> for X11

       • <b>powershell.exe</b> on Windows (this backend has encoding limitations and uses  windows  line  endings  that
         <b>fish_clipboard_paste</b> undoes)

   <b>See</b> <b>also</b>
       • <u>fish_clipboard_copy</u> <u>-</u> <u>copy</u> <u>text</u> <u>to</u> <u>the</u> <u>system's</u> <u>clipboard</u> which does the inverse.

   <b>fish_command_not_found</b> <b>-</b> <b>what</b> <b>to</b> <b>do</b> <b>when</b> <b>a</b> <b>command</b> <b>wasn't</b> <b>found</b>
   <b>Synopsis</b>
       <b>function</b> <b>fish_command_not_found</b>
          ...
       <b>end</b>

   <b>Description</b>
       When fish tries to execute a command and can't find it, it invokes this function.

       It  can  print  a message to tell you about it, and it often also checks for a missing package that would
       include the command.

       Fish ships multiple handlers for various operating systems and chooses from them when  this  function  is
       loaded, or you can define your own.

       It receives the full commandline as one argument per token, so $argv[1] contains the missing command.

       When  you  leave  <b>fish_command_not_found</b>  undefined (e.g. by adding an empty function file) or explicitly
       call <b>__fish_default_command_not_found_handler</b>, fish will just print a simple error.

   <b>Example</b>
       A simple handler:

          function fish_command_not_found
              echo Did not find command $argv[1]
          end

          &gt; flounder
          Did not find command flounder

       Or the handler for OpenSUSE's command-not-found:

          function fish_command_not_found
              /usr/bin/command-not-found $argv[1]
          end

       Or the simple default handler:

          function fish_command_not_found
              __fish_default_command_not_found_handler $argv
          end

   <b>Backwards</b> <b>compatibility</b>
       This command was introduced in fish 3.2.0. Previous versions of fish  used  the  "fish_command_not_found"
       <u>event</u> instead.

       To define a handler that works in older versions of fish as well, define it the old way:

          function __fish_command_not_found_handler --on-event fish_command_not_found
               echo COMMAND WAS NOT FOUND MY FRIEND $argv[1]
          end

       in which case fish will define a <b>fish_command_not_found</b> that calls it, or define a wrapper:

          function fish_command_not_found
               echo "G'day mate, could not find your command: $argv"
          end

          function __fish_command_not_found_handler --on-event fish_command_not_found
               fish_command_not_found $argv
          end

   <b>fish_config</b> <b>-</b> <b>start</b> <b>the</b> <b>web-based</b> <b>configuration</b> <b>interface</b>
   <b>Synopsis</b>
       <b>fish_config</b> [<b>browse</b>]
       <b>fish_config</b> <b>prompt</b> (<b>choose</b> | <b>list</b> | <b>save</b> | <b>show</b>)
       <b>fish_config</b> <b>theme</b> (<b>choose</b> | <b>demo</b> | <b>dump</b> | <b>list</b> | <b>save</b> | <b>show</b>)

   <b>Description</b>
       <b>fish_config</b> is used to configure fish.

       Without  arguments  or  with  the <b>browse</b> command it starts the web-based configuration interface. The web
       interface allows you to view your functions, variables and history, and to make changes  to  your  prompt
       and  color configuration. It starts a local web server and opens a browser window. When you are finished,
       close the browser window and press the Enter key to terminate the configuration session.

       If the <b>BROWSER</b> environment variable is set, it will be used as the  name  of  the  web  browser  to  open
       instead of the system default.

       With  the  <b>prompt</b>  command <b>fish_config</b> can be used to view and choose a prompt from fish's sample prompts
       inside the terminal directly.

       Available subcommands for the <b>prompt</b> command:

       • <b>choose</b> loads a sample prompt in the current session.

       • <b>list</b> lists the names of the available sample prompts.

       • <b>save</b> saves the current prompt to a file (via <u>funcsave</u>).

       • <b>show</b> shows what the given sample prompts (or all) would look like.

       With the <b>theme</b> command <b>fish_config</b> can be used to view and choose a theme (meaning a color scheme) inside
       the terminal.

       Available subcommands for the <b>theme</b> command:

       • <b>choose</b> loads a sample theme in the current session.

       • <b>demo</b> displays some sample text in the current theme.

       • <b>dump</b> prints the current theme in a loadable format.

       • <b>list</b> lists the names of the available sample themes.

       • <b>save</b> saves the given theme to <u>universal</u> <u>variables</u>.

       • <b>show</b> shows what the given sample theme (or all) would look like.

       The <b>-h</b> or <b>--help</b> option displays help about using this command.

   <b>Theme</b> <b>Files</b>
       <b>fish_config</b> <b>theme</b> and the theme selector in the web config tool load their themes from theme files. These
       are stored in the fish configuration directory, typically <b><a href="file:~/.config/fish/themes">~/.config/fish/themes</a></b>, with a .theme ending.

       You can add your own theme by adding a file in that directory.

       To get started quickly:

          fish_config theme dump &gt; <a href="file:~/.config/fish/themes/my.theme">~/.config/fish/themes/my.theme</a>

       which will save your current theme in .theme format.

       The format looks like this:

          # name: 'Cool Beans'
          # preferred_background: black

          fish_color_autosuggestion 666
          fish_color_cancel -r
          fish_color_command normal
          fish_color_comment '888'  '--italics'
          fish_color_cwd 0A0
          fish_color_cwd_root A00
          fish_color_end 009900

       The two comments at the beginning are the name and background that the web config tool shows.

       The other lines are just like <b>set</b> <b>variable</b> <b>value</b>, except that no expansions are allowed. Quotes are,  but
       aren't necessary.

       Any color variable fish knows about that the theme doesn't set will be set to empty when it is loaded, so
       the old theme is completely overwritten.

       Other  than  that,  .theme files can contain any variable with a name that matches the regular expression
       <b>'^fish_(?:pager_)?color.*$'</b> - starts with <b>fish_</b>, an optional <b>pager_</b>, then <b>color</b> and then anything.

   <b>Example</b>
       <b>fish_config</b> or <b>fish_config</b> <b>browse</b> opens a new web browser window and allows you to configure certain fish
       settings.

       <b>fish_config</b> <b>prompt</b> <b>show</b> demos the available sample prompts.

       <b>fish_config</b> <b>prompt</b> <b>choose</b> <b>disco</b> makes the disco prompt the prompt for the current session. This can  also
       be used in <u>config.fish</u> to set the prompt.

       <b>fish_config</b> <b>prompt</b> <b>save</b> saves the current prompt to an <u>autoloaded</u> file.

       <b>fish_config</b> <b>prompt</b> <b>save</b> <b>default</b> chooses the default prompt and saves it.

   <b>fish_default_key_bindings</b> <b>-</b> <b>set</b> <b>emacs</b> <b>key</b> <b>bindings</b> <b>for</b> <b>fish</b>
   <b>Synopsis</b>
       <b>fish_default_key_bindings</b>

   <b>Description</b>
       <b>fish_default_key_bindings</b> sets the emacs key bindings for <b>fish</b> shell.

       Some of the Emacs key bindings are defined <u>here</u>.

       There are no parameters for <b>fish_default_key_bindings</b>.

   <b>Examples</b>
       To start using emacs key bindings:

          fish_default_key_bindings

   <b>fish_delta</b> <b>-</b> <b>compare</b> <b>functions</b> <b>and</b> <b>completions</b> <b>to</b> <b>the</b> <b>default</b>
   <b>Synopsis</b>
       <b>fish_delta</b> <b>name</b> ...
       <b>fish_delta</b> [<b>-f</b> | <b>--no-functions</b>] [<b>-c</b> | <b>--no-completions</b>] [<b>-C</b> | <b>--no-config</b>] [<b>-d</b> | <b>--no-diff</b>] [<b>-n</b> | <b>--new</b>] [<b>-V</b> | <b>--vendor=</b>]
       <b>fish_delta</b> [<b>-h</b> | <b>--help</b>]

   <b>Description</b>
       The  <b>fish_delta</b>  function tells you, at a glance, which of your functions and completions differ from the
       set that fish ships.

       It  does  this  by  going  through  the  relevant  variables  (<u>fish_function_path</u>   for   functions   and
       <u>fish_complete_path</u> for completions) and comparing the files against fish's default directories.

       If any names are given, it will only compare files by those names (plus a ".fish" extension).

       By default, it will also use <b>diff</b> to display the difference between the files. If <b>diff</b> is unavailable, it
       will skip it, but in that case it also cannot figure out if the files really differ.

       The exit status is 1 if there was a difference and 2 for other errors, otherwise 0.

   <b>Options</b>
       The following options are available:

       <b>-f</b> or <b>--no-functions</b>
              Stops checking functions

       <b>-c</b> or <b>--no-completions</b>
              Stops checking completions

       <b>-C</b> or <b>--no-config</b>
              Stops checking configuration files like config.fish or snippets in the conf.d directories.

       <b>-d</b> or <b>--no-diff</b>
              Removes the diff display (this happens automatically if <b>diff</b> can't be found)

       <b>-n</b> or <b>--new</b>
              Also prints new files (i.e. those that can't be found in fish's default directories).

       <b>-Vvalue</b> or <b>--vendor=value</b>
              Determines how the vendor directories are counted. Valid values are:

              • "default"  -  counts vendor files as belonging to the defaults. Any changes in other directories
                will be counted as changes over them. This is the default.

              • "user" - counts vendor files as belonging to the user files. Any changes in them will be counted
                as new or changed files.

              • "ignore" - ignores vendor directories. Files of the same name will be counted  as  "new"  if  no
                file of the same name in fish's default directories exists.

       <b>-h</b> or <b>--help</b>
              Prints <b>fish_delta</b>'s help (this).

   <b>Example</b>
       Running just:

          fish_delta

       will give you a list of all your changed functions and completions, including diffs (if you have the <b>diff</b>
       command).

       It might look like this:

          &gt; fish_delta
          New: /home/alfa/.config/fish/functions/battery.fish
          Changed: /home/alfa/.config/fish/test/completions/cargo.fish
          --- /home/alfa/.config/fish/test/completions/cargo.fish 2022-09-02 12:57:55.579229959 +0200
          +++ /usr/share/fish/completions/cargo.fish      2022-09-25 17:51:53.000000000 +0200
          # the output of `diff` follows

       The options are there to select which parts of the output you want. With <b>--no-completions</b> you can compare
       just functions, and with <b>--no-diff</b> you can turn off the <b>diff</b> display.

       To only compare your <b>fish_git_prompt</b>, you might use:

          fish_delta --no-completions fish_git_prompt

       which will only compare files called "fish_git_prompt.fish".

   <b>fish_git_prompt</b> <b>-</b> <b>output</b> <b>git</b> <b>information</b> <b>for</b> <b>use</b> <b>in</b> <b>a</b> <b>prompt</b>
   <b>Synopsis</b>
       <b>fish_git_prompt</b>

          function fish_prompt
               printf '%s' $PWD (fish_git_prompt) ' $ '
          end

   <b>Description</b>
       The <b>fish_git_prompt</b> function displays information about the current git repository, if any.

       <u>Git</u> &lt;<b>https://git-scm.com</b>&gt; must be installed.

       There are numerous customization options, which can be controlled with git options or fish variables. git
       options,  where available, take precedence over the fish variable with the same function. git options can
       be set on a per-repository or global basis. git options can be set with the  <b>git</b>  <b>config</b>  command,  while
       fish variables can be set as usual with the <u>set</u> command.

       Boolean  options  (those  which enable or disable something) understand "1", "yes" or "true" to mean true
       and every other value to mean false.

       • <b>$__fish_git_prompt_show_informative_status</b> or the git option <b>bash.showInformativeStatus</b> can be  set  to
         1, true or yes to enable the "informative" display, which will show a large amount of information - the
         number of dirty files, unpushed/unpulled commits, and more.  In large repositories, this can take a lot
         of   time,   so   you  may  wish  to  disable  it  in  these  repositories  with   <b>git</b>  <b>config</b>  <b>--local</b>
         <b>bash.showInformativeStatus</b> <b>false</b>. It also changes the characters the prompt uses to less plain ones  (<b>✚</b>
         instead  of  <b>*</b>  for  the  dirty  state  for  example)  ,  and  if  you are only interested in that, set
         <b>$__fish_git_prompt_use_informative_chars</b> instead.

         Because counting untracked files requires a lot of time, the number of untracked files is only shown if
         enabled via <b>$__fish_git_prompt_showuntrackedfiles</b> or the git option <b>bash.showUntrackedFiles</b>.

       • <b>$__fish_git_prompt_showdirtystate</b> or the git option <b>bash.showDirtyState</b> can be set to 1, true or yes to
         show if the repository is "dirty", i.e. has uncommitted changes.

       • <b>$__fish_git_prompt_showuntrackedfiles</b> or the git option <b>bash.showUntrackedFiles</b> can be set to  1,  true
         or yes to show if the repository has untracked files (that aren't ignored).

       • <b>$__fish_git_prompt_showupstream</b>  can  be  set to a list of values to determine how changes between HEAD
         and upstream are shown:

            <b>auto</b>   summarize the difference between HEAD and its upstream

            <b>verbose</b>
                   show number of commits ahead/behind (+/-) upstream

            <b>name</b>   if verbose, then also show the upstream abbrev name

            <b>informative</b>
                   similar to verbose, but shows nothing when equal - this is the default if informative  status
                   is enabled.

            <b>git</b>    always compare HEAD to @{upstream}

            <b>svn</b>    always compare HEAD to your SVN upstream

            <b>none</b>   disables (useful with informative status)

       • <b>$__fish_git_prompt_showstashstate</b> can be set to 1, true or yes to display the state of the stash.

       • <b>$__fish_git_prompt_shorten_branch_len</b>  can be set to the number of characters that the branch name will
         be shortened to.

       • <b>$__fish_git_prompt_describe_style</b> can be set to one of the following styles  to  describe  the  current
         HEAD:

            <b>contains</b>
                   relative to newer annotated tag, such as <b>(v1.6.3.2~35)</b>

            <b>branch</b> relative to newer tag or branch, such as <b>(master~4)</b>

            <b>describe</b>
                   relative to older annotated tag, such as <b>(v1.6.3.1-13-gdd42c2f)</b>

            <b>default</b>
                   an exactly matching tag (<b>(develop)</b>)

            If none of these apply, the commit SHA shortened to 8 characters is used.

       • <b>$__fish_git_prompt_showcolorhints</b>  can  be set to 1, true or yes to enable coloring for the branch name
         and status symbols.

       A number of variables set characters and color used as indicators. Many of these have a different default
       if used with informative status  enabled,  or  <b>$__fish_git_prompt_use_informative_chars</b>  set.  The  usual
       default  is  given first, then the informative default (if it is different). If no default for the colors
       is given, they default to <b>$__fish_git_prompt_color</b>.

       • <b>$__fish_git_prompt_char_stateseparator</b> (' ', <b>|</b>) - the character to be used between the state characters

       • <b>$__fish_git_prompt_color</b> (no default)

       • <b>$__fish_git_prompt_color_prefix</b> - the color of the <b>(</b> prefix

       • <b>$__fish_git_prompt_color_suffix</b> - the color of the <b>)</b> suffix

       • <b>$__fish_git_prompt_color_bare</b> - the color to use for a bare repository - one without a working tree

       • <b>$__fish_git_prompt_color_merging</b> - the color when a merge/rebase/revert/bisect  or  cherry-pick  is  in
         progress

       • <b>$__fish_git_prompt_char_cleanstate</b> (✔ in informative mode) - the character to be used when nothing else
         applies

       • <b>$__fish_git_prompt_color_cleanstate</b> (no default)

       Variables used with <b>showdirtystate</b>:

       • <b>$__fish_git_prompt_char_dirtystate</b>  (<u>*</u>,  ✚)  -  the number of "dirty" changes, i.e. unstaged files with
         changes

       • <b>$__fish_git_prompt_char_invalidstate</b> (#, ✖) - the number of "unmerged" changes, e.g. additional changes
         to already added files

       • <b>$__fish_git_prompt_char_stagedstate</b> (+, ●) - the number of staged files without additional changes

       • <b>$__fish_git_prompt_color_dirtystate</b> (red with showcolorhints, same as color_flags otherwise)

       • <b>$__fish_git_prompt_color_invalidstate</b>

       • <b>$__fish_git_prompt_color_stagedstate</b> (green with showcolorhints, color_flags otherwise)

       Variables used with <b>showstashstate</b>:

       • <b>$__fish_git_prompt_char_stashstate</b> (<b>$</b>, ⚑)

       • <b>$__fish_git_prompt_color_stashstate</b> (same as color_flags)

       Variables used with <b>showuntrackedfiles</b>:

       • <b>$__fish_git_prompt_char_untrackedfiles</b> (%, …) - the symbol for untracked files

       • <b>$__fish_git_prompt_color_untrackedfiles</b> (same as color_flags)

       Variables used with <b>showupstream</b> (also implied by informative status):

       • <b>$__fish_git_prompt_char_upstream_ahead</b> (&gt;, ↑) - the character for the commits this repository is  ahead
         of upstream

       • <b>$__fish_git_prompt_char_upstream_behind</b>  (&lt;,  ↓)  -  the  character  for the commits this repository is
         behind upstream

       • <b>$__fish_git_prompt_char_upstream_diverged</b> (&lt;&gt;) - the symbol if this repository is both ahead and behind
         upstream

       • <b>$__fish_git_prompt_char_upstream_equal</b> (=) - the symbol if this repo is equal to upstream

       • <b>$__fish_git_prompt_char_upstream_prefix</b> ('')

       • <b>$__fish_git_prompt_color_upstream</b>

       Colors used with <b>showcolorhints</b>:

       • <b>$__fish_git_prompt_color_branch</b> (green) - the color of the branch if nothing else applies

       • <b>$__fish_git_prompt_color_branch_detached</b> (red) the color of the branch if it's detached (e.g. a  commit
         is checked out)

       • <b>$__fish_git_prompt_color_branch_dirty</b>  (no  default)  the  color  of  the  branch if it's dirty and not
         detached

       • <b>$__fish_git_prompt_color_branch_staged</b> (no default) the color of the branch if it  just  has  something
         staged and is otherwise clean

       • <b>$__fish_git_prompt_color_flags</b>  (--bold  blue)  -  the default color for dirty/staged/stashed/untracked
         state

       Note that all  colors  can  also  have  a  corresponding  <b>_done</b>  color.  For  example,  the  contents  of
       <b>$__fish_git_prompt_color_upstream_done</b> is printed right _after_ the upstream.

       See  also <u>fish_vcs_prompt</u>, which will call all supported version control prompt functions, including git,
       Mercurial and Subversion.

   <b>Example</b>
       A simple prompt that displays git info:

          function fish_prompt
              # ...
              set -g __fish_git_prompt_showupstream auto
              printf '%s %s$' $PWD (fish_git_prompt)
          end

   <b>fish_greeting</b> <b>-</b> <b>display</b> <b>a</b> <b>welcome</b> <b>message</b> <b>in</b> <b>interactive</b> <b>shells</b>
   <b>Synopsis</b>
       <b>fish_greeting</b>

          function fish_greeting
              ...
          end

   <b>Description</b>
       When an interactive fish starts, it executes fish_greeting and displays its output.

       The default fish_greeting is a function that prints a variable of the same name (<b>$fish_greeting</b>), so  you
       can also just change that if you just want to change the text.

       While you could also just put <b>echo</b> calls into config.fish, fish_greeting takes care of only being used in
       interactive  shells,  so  it  won't  be  used e.g. with <b>scp</b> (which executes a shell), which prevents some
       errors.

   <b>Example</b>
       To just empty the text, with the default greeting function:

          set -U fish_greeting

       or <b>set</b> <b>-g</b> <b>fish_greeting</b> in <u>config.fish</u>.

       A simple greeting:

          function fish_greeting
              echo Hello friend!
              echo The time is (set_color yellow)(date +%T)(set_color normal) and this machine is called $hostname
          end

   <b>fish_hg_prompt</b> <b>-</b> <b>output</b> <b>Mercurial</b> <b>information</b> <b>for</b> <b>use</b> <b>in</b> <b>a</b> <b>prompt</b>
   <b>Synopsis</b>
       <b>fish_hg_prompt</b>

          function fish_prompt
               printf '%s' $PWD (fish_hg_prompt) ' $ '
          end

   <b>Description</b>
       The fish_hg_prompt function displays information about the current Mercurial repository, if any.

       <u>Mercurial</u> &lt;<b>https://www.mercurial-scm.org/</b>&gt; (<b>hg</b>) must be installed.

       By default, only the current branch is shown because <b>hg</b> <b>status</b> can be slow on a large repository. You can
       enable a more informative prompt by setting  the  variable  <b>$fish_prompt_hg_show_informative_status</b>,  for
       example:

          set --universal fish_prompt_hg_show_informative_status

       If  you enabled the informative status, there are numerous customization options, which can be controlled
       with fish variables.

       • <b>$fish_color_hg_clean</b>,  <b>$fish_color_hg_modified</b>  and  <b>$fish_color_hg_dirty</b>  are  colors  used  when  the
         repository has the respective status.

       Some colors for status symbols:

       • <b>$fish_color_hg_added</b>

       • <b>$fish_color_hg_renamed</b>

       • <b>$fish_color_hg_copied</b>

       • <b>$fish_color_hg_deleted</b>

       • <b>$fish_color_hg_untracked</b>

       • <b>$fish_color_hg_unmerged</b>

       The status symbols themselves:

       • <b>$fish_prompt_hg_status_added</b>, default '✚'

       • <b>$fish_prompt_hg_status_modified</b>, default '*'

       • <b>$fish_prompt_hg_status_copied</b>, default '⇒'

       • <b>$fish_prompt_hg_status_deleted</b>, default '✖'

       • <b>$fish_prompt_hg_status_untracked</b>, default '?'

       • <b>$fish_prompt_hg_status_unmerged</b>, default '!'

       Finally,  <b>$fish_prompt_hg_status_order</b>,  which  can be used to change the order the status symbols appear
       in. It defaults to <b>added</b> <b>modified</b> <b>copied</b> <b>deleted</b> <b>untracked</b> <b>unmerged</b>.

       See also <u>fish_vcs_prompt</u>, which will call all supported version control prompt functions, including  git,
       Mercurial and Subversion.

   <b>Example</b>
       A simple prompt that displays hg info:

          function fish_prompt
              ...
              set -g fish_prompt_hg_show_informative_status
              printf '%s %s$' $PWD (fish_hg_prompt)
          end

   <b>fish_indent</b> <b>-</b> <b>indenter</b> <b>and</b> <b>prettifier</b>
   <b>Synopsis</b>
       <b>fish_indent</b> [<u>OPTIONS</u>] [<u>FILE</u> ...]

   <b>Description</b>
       <b>fish_indent</b> is used to indent a piece of fish code. <b>fish_indent</b> reads commands from standard input or the
       given filenames and outputs them to standard output or a specified file (if <b>-w</b> is given).

       The following options are available:

       <b>-w</b> or <b>--write</b>
              Indents a specified file and immediately writes to that file.

       <b>-i</b> or <b>--no-indent</b>
              Do not indent commands; only reformat to one job per line.

       <b>--only-indent</b>
              Do not reformat, only indent each line.

       <b>--only-unindent</b>
              Do not reformat, only unindent each line.

       <b>-c</b> or <b>--check</b>
              Do  not  indent, only return 0 if the code is already indented as fish_indent would, the number of
              failed files otherwise. Also print the failed filenames if not reading from standard input.

       <b>-v</b> or <b>--version</b>
              Displays the current <b>fish</b> version and then exits.

       <b>--ansi</b> Colorizes the output using ANSI escape sequences, appropriate for  the  current  <u>TERM</u>,  using  the
              colors defined in the environment (such as <u>fish_color_command</u>).

       <b>--html</b> Outputs  HTML, which supports syntax highlighting if the appropriate CSS is defined. The CSS class
              names are the same as the variable names, such as <b>fish_color_command</b>.

       <b>-d</b> or <b>--debug=DEBUG_CATEGORIES</b>
              Enable debug output and specify a pattern for matching debug categories. See <u>Debugging</u> in <u>fish</u> (1)
              for details.

       <b>-o</b> or <b>--debug-output=DEBUG_FILE</b>
              Specify a file path to receive the debug output, including categories and <b>fish_trace</b>. The  default
              is standard error.

       <b>--dump-parse-tree</b>
              Dumps  information about the parsed statements to standard error. This is likely to be of interest
              only to people working on the fish source code.

       <b>-h</b> or <b>--help</b>
              Displays help about using this command.

   <b>fish_is_root_user</b> <b>-</b> <b>check</b> <b>if</b> <b>the</b> <b>current</b> <b>user</b> <b>is</b> <b>root</b>
   <b>Synopsis</b>
       <b>fish_is_root_user</b>

   <b>Description</b>
       <b>fish_is_root_user</b> will check if the current user is root. It can be useful  for  the  prompt  to  display
       something different if the user is root, for example.

   <b>Example</b>
       A simple example:

          function example --description 'Just an example'
              if fish_is_root_user
                  do_something_different
              end
          end

   <b>fish_key_reader</b> <b>-</b> <b>explore</b> <b>what</b> <b>characters</b> <b>keyboard</b> <b>keys</b> <b>send</b>
   <b>Synopsis</b>
       <b>fish_key_reader</b> [<u>OPTIONS</u>]

   <b>Description</b>
       <b>fish_key_reader</b>  is  used to explain how you would bind a certain key sequence. By default, it prints the
       <u>bind</u> command for one key sequence read interactively over standard input.

       The following options are available:

       <b>-c</b> or <b>--continuous</b>
              Begins a session where multiple key sequences can be inspected. By default the program exits after
              capturing a single key sequence.

       <b>-h</b> or <b>--help</b>
              Displays help about using this command.

       <b>-V</b> or <b>--verbose</b>
              Explain what sequence was received in addition to the decoded key.

       <b>-v</b> or <b>--version</b>
              Displays the current <b>fish</b> version and then exits.

   <b>Usage</b> <b>Notes</b>
       <b>fish_key_reader</b> intentionally  disables  handling  of  many  signals.  To  terminate  <b>fish_key_reader</b>  in
       <b>--continuous</b> mode do:

       • press <b>ctrl-c</b> twice, or

       • press <b>ctrl-d</b> twice, or

       • type <b>exit</b>, or

       • type <b>quit</b>

   <b>Example</b>
          &gt; fish_key_reader
          Press a key:
          # press up-arrow
          bind up 'do something'

   <b>fish_mode_prompt</b> <b>-</b> <b>define</b> <b>the</b> <b>appearance</b> <b>of</b> <b>the</b> <b>mode</b> <b>indicator</b>
   <b>Synopsis</b>
       <b>fish_mode_prompt</b>

          function fish_mode_prompt
               echo -n "$fish_bind_mode "
          end

   <b>Description</b>
       The <b>fish_mode_prompt</b> function outputs the mode indicator for use in vi mode.

       The  default  <b>fish_mode_prompt</b> function will output indicators about the current vi editor mode displayed
       to the left of the regular prompt. Define your own function to  customize  the  appearance  of  the  mode
       indicator.  The  <b>$fish_bind_mode</b>  <b>variable</b>  can  be used to determine the current mode. It will be one of
       <b>default</b>, <b>insert</b>, <b>replace_one</b>, or <b>visual</b>.

       You can also define an empty <b>fish_mode_prompt</b> function to remove the vi mode indicators:

          function fish_mode_prompt; end
          funcsave fish_mode_prompt

       <b>fish_mode_prompt</b> will be executed when the vi mode changes. If it produces any output,  it  is  displayed
       and used. If it does not, the other prompt functions (<u>fish_prompt</u> and <u>fish_right_prompt</u>) will be executed
       as well in case they contain a mode display.

   <b>Example</b>
          function fish_mode_prompt
            switch $fish_bind_mode
              case default
                set_color --bold red
                echo 'N'
              case insert
                set_color --bold green
                echo 'I'
              case replace_one
                set_color --bold green
                echo 'R'
              case visual
                set_color --bold brmagenta
                echo 'V'
              case '*'
                set_color --bold red
                echo '?'
            end
            set_color normal
          end

       Outputting multiple lines is not supported in <b>fish_mode_prompt</b>.

   <b>fish_opt</b> <b>-</b> <b>create</b> <b>an</b> <b>option</b> <b>specification</b> <b>for</b> <b>the</b> <b>argparse</b> <b>command</b>
   <b>Synopsis</b>
       <b>fish_opt</b> [(<b>-slor</b> | <b>--multiple-vals=</b>) <u>OPTNAME</u>]
       <b>fish_opt</b> <b>--help</b>

   <b>Description</b>
       This  command provides a way to produce option specifications suitable for use with the <u>argparse</u> command.
       You can, of course, write the option specifications by hand without using this  command.  But  you  might
       prefer to use this for the clarity it provides.

       The following <b>argparse</b> options are available:

       <b>-s</b> or <b>--short</b>
              Takes  a  single letter that is used as the short flag in the option being defined. This option is
              mandatory.

       <b>-l</b> or <b>--long</b>
              Takes a string that is used as the long flag in the option being defined. This option is  optional
              and  has  no  default.  If  no  long flag is defined then only the short flag will be allowed when
              parsing arguments using the option specification.

       <b>--long-only</b>
              The option being defined will only allow the long flag name to be used. The short flag  name  must
              still  be  defined  (i.e., <b>--short</b> must be specified) but it cannot be used when parsing arguments
              using this option specification.

       <b>-o</b> or <b>--optional-val</b>
              The option being defined can take a value, but it is optional rather than required. If the  option
              is  seen  more than once when parsing arguments, only the last value seen is saved. This means the
              resulting flag variable created by <b>argparse</b> will zero elements if no  value  was  given  with  the
              option else it will have exactly one element.

       <b>-r</b> or <b>--required-val</b>
              The  option  being  defined  requires  a  value. If the option is seen more than once when parsing
              arguments, only the last value seen is saved. This means the resulting flag  variable  created  by
              <b>argparse</b> will have exactly one element.

       <b>--multiple-vals</b>
              The  option  being  defined  requires  a value each time it is seen. Each instance is stored. This
              means the resulting flag variable created by <b>argparse</b> will have one element for each  instance  of
              this option in the arguments.

       <b>-h</b> or <b>--help</b>
              Displays help about using this command.

   <b>Examples</b>
       Define a single option specification for the boolean help flag:

          set -l options (fish_opt -s h -l help)
          argparse $options -- $argv

       Same as above but with a second flag that requires a value:

          set -l options (fish_opt -s h -l help)
          set options $options (fish_opt -s m -l max --required-val)
          argparse $options -- $argv

       Same  as  above  but with a third flag that can be given multiple times saving the value of each instance
       seen and only the long flag name (<b>--token</b>) can be used:

          set -l options (fish_opt --short=h --long=help)
          set options $options (fish_opt --short=m --long=max --required-val)
          set options $options (fish_opt --short=t --long=token --multiple-vals --long-only)
          argparse $options -- $argv

   <b>fish_prompt</b> <b>-</b> <b>define</b> <b>the</b> <b>appearance</b> <b>of</b> <b>the</b> <b>command</b> <b>line</b> <b>prompt</b>
   <b>Synopsis</b>
       <b>fish_prompt</b>

          function fish_prompt
              ...
          end

   <b>Description</b>
       The <b>fish_prompt</b> function is executed when the prompt is to be shown, and the output is used as a prompt.

       The exit status of commands within <b>fish_prompt</b> will not modify  the  value  of  <u>$status</u>  outside  of  the
       <b>fish_prompt</b> function.

       <b>fish</b> ships with a number of example prompts that can be chosen with the <b>fish_config</b> command.

   <b>Example</b>
       A simple prompt:

          function fish_prompt -d "Write out the prompt"
              # This shows up as USER@HOST /home/user/ &gt;, with the directory colored
              # $USER and $hostname are set by fish, so you can just use them
              # instead of using `whoami` and `hostname`
              printf '%s@%s %s%s%s &gt; ' $USER $hostname \
                  (set_color $fish_color_cwd) (prompt_pwd) (set_color normal)
          end

   <b>fish_right_prompt</b> <b>-</b> <b>define</b> <b>the</b> <b>appearance</b> <b>of</b> <b>the</b> <b>right-side</b> <b>command</b> <b>line</b> <b>prompt</b>
   <b>Synopsis</b>
          function fish_right_prompt
              ...
          end

   <b>Description</b>
       <b>fish_right_prompt</b>  is  similar  to  <b>fish_prompt</b>, except that it appears on the right side of the terminal
       window.

       Multiple lines are not supported in <b>fish_right_prompt</b>.

   <b>Example</b>
       A simple right prompt:

          function fish_right_prompt -d "Write out the right prompt"
              date '+%m/%d/%y'
          end

   <b>fish_should_add_to_history</b> <b>-</b> <b>decide</b> <b>whether</b> <b>a</b> <b>command</b> <b>should</b> <b>be</b> <b>added</b> <b>to</b> <b>the</b> <b>history</b>
   <b>Synopsis</b>
       <b>fish_should_add_to_history</b>

          function fish_should_add_to_history
              ...
          end

   <b>Description</b>
       The <b>fish_should_add_to_history</b> function is executed before fish adds a command to history, and its return
       status decides whether that is done.

       If it returns 0, the command is stored in history, when it returns anything  else,  it  is  not.  In  the
       latter case the command can still be recalled for one command.

       The first argument to <b>fish_should_add_to_history</b> is the commandline. History is added <u>before</u> a command is
       run,  so  e.g. <u>status</u> can't be checked. This is so commands that don't finish like <u>exec</u> <u>-</u> <u>execute</u> <u>command</u>
       <u>in</u> <u>current</u> <u>process</u> and long-running commands are available in new sessions immediately.

       If <b>fish_should_add_to_history</b> doesn't exist, fish will save a command to history unless it starts with  a
       space.  If it does exist, this function takes over all of the duties, so commands starting with space are
       saved unless <b>fish_should_add_to_history</b> says otherwise.

   <b>Example</b>
       A simple example:

          function fish_should_add_to_history
              for cmd in vault mysql ls
                   string match -qr "^$cmd" -- $argv; and return 1
              end
              return 0
          end

       This refuses to store any immediate "vault", "mysql" or "ls" calls. Commands starting with space would be
       stored.

          function fish_should_add_to_history
              # I don't want `git pull`s in my history when I'm in a specific repository
              if string match -qr '^git pull'
              and string match -qr "^/home/me/my-secret-project/" -- (pwd -P)
                  return 1
              end

              return 0
          end

   <b>fish_status_to_signal</b> <b>-</b> <b>convert</b> <b>exit</b> <b>codes</b> <b>to</b> <b>human-friendly</b> <b>signals</b>
   <b>Synopsis</b>
       <b>fish_status_to_signal</b> <u>NUM</u>

          function fish_prompt
              echo -n (fish_status_to_signal $pipestatus | string join '|') (prompt_pwd) '$ '
          end

   <b>Description</b>
       <b>fish_status_to_signal</b> converts exit codes to their corresponding human-friendly signals  if  one  exists.
       This is likely to be useful for prompts in conjunction with the <b>$status</b> and <b>$pipestatus</b> variables.

   <b>Example</b>
          &gt;_ sleep 5
          ^C⏎
          &gt;_ fish_status_to_signal $status
          SIGINT

   <b>fish_svn_prompt</b> <b>-</b> <b>output</b> <b>Subversion</b> <b>information</b> <b>for</b> <b>use</b> <b>in</b> <b>a</b> <b>prompt</b>
   <b>Synopsis</b>
       <b>fish_svn_prompt</b>

          function fish_prompt
               printf '%s' $PWD (fish_svn_prompt) ' $ '
          end

   <b>Description</b>
       The fish_svn_prompt function displays information about the current Subversion repository, if any.

       <u>Subversion</u> &lt;<b>https://subversion.apache.org/</b>&gt; (<b>svn</b>) must be installed.

       There are numerous customization options, which can be controlled with fish variables.

       •

         <b>__fish_svn_prompt_color_revision</b>
                the colour of the revision number to display in the prompt

       •

         <b>__fish_svn_prompt_char_separator</b>
                the separator between status characters

       A  number  of  variables  control  the  symbol  ("display")  and color ("color") for the different status
       indicators:

       • <b>__fish_svn_prompt_char_added_display</b>

       • <b>__fish_svn_prompt_char_added_color</b>

       • <b>__fish_svn_prompt_char_conflicted_display</b>

       • <b>__fish_svn_prompt_char_conflicted_color</b>

       • <b>__fish_svn_prompt_char_deleted_display</b>

       • <b>__fish_svn_prompt_char_deleted_color</b>

       • <b>__fish_svn_prompt_char_ignored_display</b>

       • <b>__fish_svn_prompt_char_ignored_color</b>

       • <b>__fish_svn_prompt_char_modified_display</b>

       • <b>__fish_svn_prompt_char_modified_color</b>

       • <b>__fish_svn_prompt_char_replaced_display</b>

       • <b>__fish_svn_prompt_char_replaced_color</b>

       • <b>__fish_svn_prompt_char_unversioned_external_display</b>

       • <b>__fish_svn_prompt_char_unversioned_external_color</b>

       • <b>__fish_svn_prompt_char_unversioned_display</b>

       • <b>__fish_svn_prompt_char_unversioned_color</b>

       • <b>__fish_svn_prompt_char_missing_display</b>

       • <b>__fish_svn_prompt_char_missing_color</b>

       • <b>__fish_svn_prompt_char_versioned_obstructed_display</b>

       • <b>__fish_svn_prompt_char_versioned_obstructed_color</b>

       • <b>__fish_svn_prompt_char_locked_display</b>

       • <b>__fish_svn_prompt_char_locked_color</b>

       • <b>__fish_svn_prompt_char_scheduled_display</b>

       • <b>__fish_svn_prompt_char_scheduled_color</b>

       • <b>__fish_svn_prompt_char_switched_display</b>

       • <b>__fish_svn_prompt_char_switched_color</b>

       • <b>__fish_svn_prompt_char_token_present_display</b>

       • <b>__fish_svn_prompt_char_token_present_color</b>

       • <b>__fish_svn_prompt_char_token_other_display</b>

       • <b>__fish_svn_prompt_char_token_other_color</b>

       • <b>__fish_svn_prompt_char_token_stolen_display</b>

       • <b>__fish_svn_prompt_char_token_stolen_color</b>

       • <b>__fish_svn_prompt_char_token_broken_display</b>

       • <b>__fish_svn_prompt_char_token_broken_color</b>

       See also <u>fish_vcs_prompt</u>, which will call all supported version control prompt functions, including  git,
       Mercurial and Subversion.

   <b>Example</b>
       A simple prompt that displays svn info:

          function fish_prompt
              ...
              printf '%s %s$' $PWD (fish_svn_prompt)
          end

   <b>fish_title</b> <b>-</b> <b>define</b> <b>the</b> <b>terminal's</b> <b>title</b>
   <b>Synopsis</b>
       <b>fish_title</b>

          function fish_title
              ...
          end

   <b>Description</b>
       The <b>fish_title</b> function is executed before and after a new command is executed or put into the foreground
       and the output is used as a titlebar message.

       The  first  argument to fish_title contains the most recently executed foreground command as a string, if
       any.

       This requires that your terminal supports programmable titles and the feature is turned on.

       To disable setting the title, use an empty function (see below).

   <b>Example</b>
       A simple title:

          function fish_title
              set -q argv[1]; or set argv fish
              # Looks like <a href="file:~/d/fish">~/d/fish</a>: git log
              # or /e/apt: fish
              echo (fish_prompt_pwd_dir_length=1 prompt_pwd): $argv;
          end

       Do not change the title:

          function fish_title
          end

   <b>fish_update_completions</b> <b>-</b> <b>update</b> <b>completions</b> <b>using</b> <b>manual</b> <b>pages</b>
   <b>Synopsis</b>
       <b>fish_update_completions</b>

   <b>Description</b>
       <b>fish_update_completions</b> parses manual pages installed on the system, and attempts  to  create  completion
       files in the <b>fish</b> configuration directory.

       This does not overwrite custom completions.

       There are no parameters for <b>fish_update_completions</b>.

   <b>fish_vcs_prompt</b> <b>-</b> <b>output</b> <b>version</b> <b>control</b> <b>system</b> <b>information</b> <b>for</b> <b>use</b> <b>in</b> <b>a</b> <b>prompt</b>
   <b>Synopsis</b>
       <b>fish_vcs_prompt</b>

          function fish_prompt
               printf '%s' $PWD (fish_vcs_prompt) ' $ '
          end

   <b>Description</b>
       The  <b>fish_vcs_prompt</b>  function  displays  information  about  the  current  version  control system (VCS)
       repository, if any.

       It calls out to VCS-specific functions. The currently supported systems are:

       • <u>fish_git_prompt</u>

       • <u>fish_hg_prompt</u>

       • <u>fish_svn_prompt</u>

       If a VCS isn't installed, the respective function does nothing.

       The Subversion prompt is disabled by default, because it's slow on  large  repositories.  To  enable  it,
       modify <b>fish_vcs_prompt</b> to uncomment it. See <u>funced</u>.

       For more information, see the documentation for each of the functions above.

   <b>Example</b>
       A simple prompt that displays all known VCS info:

          function fish_prompt
              ...
              set -g __fish_git_prompt_showupstream auto
              printf '%s %s$' $PWD (fish_vcs_prompt)
          end

   <b>fish_vi_key_bindings</b> <b>-</b> <b>set</b> <b>vi</b> <b>key</b> <b>bindings</b> <b>for</b> <b>fish</b>
   <b>Synopsis</b>
       <b>fish_vi_key_bindings</b>
       <b>fish_vi_key_bindings</b> [<b>--no-erase</b>] [<u>INIT_MODE</u>]

   <b>Description</b>
       <b>fish_vi_key_bindings</b> sets the vi key bindings for <b>fish</b> shell.

       If  a  valid <u>INIT_MODE</u> is provided (insert, default, visual), then that mode will become the default . If
       no <u>INIT_MODE</u> is given, the mode defaults to insert mode.

       The following parameters are available:

       <b>--no-erase</b>
              Does not clear previous set bindings

       Further information on how to use <u>vi</u> <u>mode</u>.

   <b>Examples</b>
       To start using vi key bindings:

          fish_vi_key_bindings

       or <b>set</b> <b>-g</b> <b>fish_key_bindings</b> <b>fish_vi_key_bindings</b> in <u>config.fish</u>.

   <b>for</b> <b>-</b> <b>perform</b> <b>a</b> <b>set</b> <b>of</b> <b>commands</b> <b>multiple</b> <b>times</b>
   <b>Synopsis</b>
       <b>for</b> <u>VARNAME</u> <b>in</b> [<u>VALUES</u> ...]<b>;</b> <u>COMMANDS</u> ...<b>;</b> <b>end</b>

   <b>Description</b>
       <b>for</b> is a loop construct. It will perform the commands specified  by  <u>COMMANDS</u>  multiple  times.  On  each
       iteration,  the  local  variable  specified  by <u>VARNAME</u> is assigned a new value from <u>VALUES</u>. If <u>VALUES</u> is
       empty, <u>COMMANDS</u> will not be executed at all. The <u>VARNAME</u> is visible when the  loop  terminates  and  will
       contain  the  last  value  assigned  to it. If <u>VARNAME</u> does not already exist it will be set in the local
       scope. For our purposes if the <b>for</b> block is inside a function there must be a  local  variable  with  the
       same  name.  If  the <b>for</b> block is not nested inside a function then global and universal variables of the
       same name will be used if they exist.

       Much like <u>set</u>, <b>for</b> does not modify $status, but the evaluation of its subordinate commands can.

       The <b>-h</b> or <b>--help</b> option displays help about using this command.

   <b>Example</b>
          for i in foo bar baz; echo $i; end

          # would output:
          foo
          bar
          baz

   <b>Notes</b>
       The <b>VARNAME</b> was local to the for block in releases prior to 3.0.0. This means that if you  did  something
       like this:

          for var in a b c
              if break_from_loop
                  break
              end
          end
          echo $var

       The  last  value  assigned  to <b>var</b> when the loop terminated would not be available outside the loop. What
       <b>echo</b> <b>$var</b> would write depended on what it was set to before the loop was run. Likely nothing.

   <b>funced</b> <b>-</b> <b>edit</b> <b>a</b> <b>function</b> <b>interactively</b>
   <b>Synopsis</b>
       <b>funced</b> [<u>OPTIONS</u>] <u>NAME</u>

   <b>Description</b>
       <b>funced</b> provides an interface to edit the definition of the function <u>NAME</u>.

       If the <b>$VISUAL</b> environment variable is set, it will be used as the  program  to  edit  the  function.  If
       <b>$VISUAL</b>  is  unset but <b>$EDITOR</b> is set, that will be used. Otherwise, a built-in editor will be used. Note
       that to enter a literal newline using the built-in editor you  should  press  <b>alt-enter</b>.  Pressing  <b>enter</b>
       signals  that  you are done editing the function. This does not apply to an external editor like emacs or
       vim.

       <b>funced</b> will try to edit the original file that a function is defined in,  which  might  include  variable
       definitions  or helper functions as well. If changes cannot be saved to the original file, a copy will be
       created in the user's function directory.

       If there is no function called <u>NAME</u>, a new function will be created with the specified name.

       <b>-e</b> <b>command</b> or <b>--editor</b> <b>command</b>
              Open the function body inside the text editor given by the  command  (for  example,  <b>-e</b>  <b>vi</b>).  The
              special command <b>fish</b> will use the built-in editor (same as specifying <b>-i</b>).

       <b>-i</b> or <b>--interactive</b>
              Force opening the function body in the built-in editor even if <b>$VISUAL</b> or <b>$EDITOR</b> is defined.

       <b>-s</b> or <b>--save</b>
              Automatically save the function after successfully editing it.

       <b>-h</b> or <b>--help</b>
              Displays help about using this command.

   <b>Example</b>
       Say you want to modify your prompt.

       Run:

          &gt;_ funced fish_prompt

       This will open up your editor, allowing you to modify the function. When you're done, save and quit. Fish
       will reload the function, so you should see the changes right away.

       When you're done, use:

          &gt;_ funcsave fish_prompt

       For more, see <u>funcsave</u>. To view a function's current definition, use <u>functions</u> or <u>type</u>.

   <b>funcsave</b> <b>-</b> <b>save</b> <b>the</b> <b>definition</b> <b>of</b> <b>a</b> <b>function</b> <b>to</b> <b>the</b> <b>user's</b> <b>autoload</b> <b>directory</b>
   <b>Synopsis</b>
       <b>funcsave</b> <u>FUNCTION_NAME</u>
       <b>funcsave</b> [<b>-q</b> | <b>--quiet</b>] [(<b>-d</b> | <b>--directory</b>) <u>DIR</u>] <u>FUNCTION_NAME</u>

   <b>Description</b>
       <b>funcsave</b>  saves  a  function  to  a  file  in  the  fish  configuration  directory. This function will be
       <u>automatically</u> <u>loaded</u> by current and future fish sessions. This can be useful to commit functions  created
       interactively for permanent use.

       If  you  have erased a function using <u>functions</u>'s <b>--erase</b> option, <b>funcsave</b> will remove the saved function
       definition.

       Because fish loads functions on-demand, saved functions cannot serve as <u>event</u> <u>handlers</u> until they are run
       or otherwise sourced. To activate an event  handler  for  every  new  shell,  add  the  function  to  the
       <u>configuration</u> <u>file</u> instead of using <b>funcsave</b>.

       This  is  often  used  after <u>funced</u>, which opens the function in <b>$EDITOR</b> or <b>$VISUAL</b> and loads it into the
       current session afterwards.

       To view a function's current definition, use <u>functions</u> or <u>type</u>.

   <b>function</b> <b>-</b> <b>create</b> <b>a</b> <b>function</b>
   <b>Synopsis</b>
       <b>function</b> <u>NAME</u> [<u>OPTIONS</u>]<b>;</b> <u>BODY</u><b>;</b> <b>end</b>

   <b>Description</b>
       <b>function</b> creates a new function <u>NAME</u> with the body <u>BODY</u>.

       A function is a list of commands that will be executed when the name  of  the  function  is  given  as  a
       command.

       The following options are available:

       <b>-a</b> <u>NAMES</u> or <b>--argument-names</b> <u>NAMES</u>
              Has  to  be  the  last option. Assigns the value of successive command-line arguments to the names
              given in <u>NAMES</u> (separated by space). These are the same arguments given in  <u>argv</u>,  and  are  still
              available there. See also <u>Argument</u> <u>Handling</u>.

       <b>-d</b> <u>DESCRIPTION</u> or <b>--description</b> <u>DESCRIPTION</u>
              A description of what the function does, suitable as a completion description.

       <b>-w</b> <u>WRAPPED_COMMAND</u> or <b>--wraps</b> <u>WRAPPED_COMMAND</u>
              Inherit  completions  from  the given <u>WRAPPED_COMMAND</u>. See the documentation for <u>complete</u> for more
              information.

       <b>-e</b> <u>EVENT_NAME</u> or <b>--on-event</b> <u>EVENT_NAME</u>
              Run this function when the specified named event  is  emitted.  Fish  internally  generates  named
              events, for example, when showing the prompt. Custom events can be emitted using the <u>emit</u> command.

       <b>-v</b> <u>VARIABLE_NAME</u> or <b>--on-variable</b> <u>VARIABLE_NAME</u>
              Run  this  function  when  the  variable  <u>VARIABLE_NAME</u>  changes  value.  Note  that <b>fish</b> makes no
              guarantees on any particular timing or even that the function will be run for  every  single  <b>set</b>.
              Rather  it will be run when the variable has been set at least once, possibly skipping some values
              or being run when the variable has been set to the same value (except for universal variables  set
              in other shells - only changes in the value will be picked up for those).

       <b>-j</b> <u>PID</u> or <b>--on-job-exit</b> <u>PID</u>
              Run  this  function  when the job containing a child process with the given process identifier <u>PID</u>
              exits. Instead of a PID, the string 'caller' can be specified. This is  only  allowed  when  in  a
              command  substitution, and will result in the handler being triggered by the exit of the job which
              created this command substitution.  This will not trigger for <u>disowned</u> jobs.

       <b>-p</b> <u>PID</u> or <b>--on-process-exit</b> <u>PID</u>
              Run this function when the fish child process with process ID PID exits. Instead  of  a  PID,  for
              backward  compatibility, "<b>%self</b>" can be specified as an alias for <b>$fish_pid</b>, and the function will
              be run when the current fish instance exits.  This will not trigger for <u>disowned</u> jobs.

       <b>-s</b> <u>SIGSPEC</u> or <b>--on-signal</b> <u>SIGSPEC</u>
              Run this function when the signal <b>SIGSPEC</b> is delivered. <b>SIGSPEC</b> can be a  signal  number,  or  the
              signal  name, such as <b>SIGHUP</b> (or just <b>HUP</b>). Note that the signal must have been delivered to <b>fish</b>;
              for example, <b>ctrl-c</b> sends <b>SIGINT</b> to the foreground process group, which will not be  <b>fish</b>  if  you
              are  running  another  command  at  the time. Observing a signal will prevent fish from exiting in
              response to that signal.

       <b>-S</b> or <b>--no-scope-shadowing</b>
              Allows the function to access the variables of calling functions. Normally, any  variables  inside
              the  function  that  have the same name as variables from the calling function are "shadowed", and
              their contents are independent of the calling function.

              It's important to note that this does not capture referenced variables or the scope at the time of
              function declaration! At this time, fish does not have  any  concept  of  closures,  and  variable
              lifetimes  are  never  extended.  In  other  words, by using <b>--no-scope-shadowing</b> the scope of the
              function each time it is run is shared with the scope it was <u>called</u> from rather than the scope  it
              was <u>defined</u> in.

       <b>-V</b> or <b>--inherit-variable</b> <b>NAME</b>
              Snapshots  the  value  of  the  variable <b>NAME</b> and defines a local variable with that same name and
              value when the function is defined. This is similar to a closure in other  languages  like  Python
              but  a  bit  different. Note the word "snapshot" in the first sentence. If you change the value of
              the variable after defining the function, even if you do so in the same scope  (typically  another
              function)  the  new value will not be used by the function you just created using this option. See
              the <b>function</b> <b>notify</b> example below for how this might be used.

       The event handler switches (<b>on-event</b>, <b>on-variable</b>, <b>on-job-exit</b>, <b>on-process-exit</b> and  <b>on-signal</b>)  cause  a
       function  to run automatically at specific events. New named events for <b>--on-event</b> can be fired using the
       <u>emit</u> builtin. Fish already generates a few events, see <u>Event</u> <u>handlers</u> for more.

       Functions names cannot be reserved words. These are elements of fish syntax or builtin commands which are
       essential for the operations of the shell. Current reserved words are <b>[</b>, <b>_</b>, <b>and</b>, <b>argparse</b>, <b>begin</b>,  <b>break</b>,
       <b>builtin</b>,  <b>case</b>,  <b>command</b>, <b>continue</b>, <b>else</b>, <b>end</b>, <b>eval</b>, <b>exec</b>, <b>for</b>, <b>function</b>, <b>if</b>, <b>not</b>, <b>or</b>, <b>read</b>, <b>return</b>, <b>set</b>,
       <b>status</b>, <b>string</b>, <b>switch</b>, <b>test</b>, <b>time</b>, and <b>while</b>.

   <b>Example</b>
          function ll
              ls -l $argv
          end

       will run the <b>ls</b> command, using the <b>-l</b> option, while passing on any additional files and switches to <b>ls</b>.

          function debug -a name val
              echo [DEBUG] $name: $val &gt;&amp;2
          end

          set foo bar
          debug foo bar
          # prints: [DEBUG] foo: bar

          # OR

          function debug2 -a var
              echo [DEBUG] $var: $$var &gt;&amp;2
          end

          set foo bar
          debug2 foo
          # prints: [DEBUG] foo: bar

       will create a <b>debug</b> command to print chosen variables to <u>stderr</u>.

          function mkdir -d "Create a directory and set CWD"
              command mkdir $argv
              if test $status = 0
                  switch $argv[(count $argv)]
                      case '-*'

                      case '*'
                          cd $argv[(count $argv)]
                          return
                  end
              end
          end

       This will run the <b>mkdir</b> command, and if it is successful, change the current working directory to the one
       just created.

          function notify
              set -l job (jobs -l -g)
              or begin; echo "There are no jobs" &gt;&amp;2; return 1; end

              function _notify_job_$job --on-job-exit $job --inherit-variable job
                  echo -n \a # beep
                  functions -e _notify_job_$job
              end
          end

       This will beep when the most recent job completes.

   <b>Notes</b>
       Events are only received from the current fish process as there is no way to send events  from  one  fish
       process to another.

   <b>See</b> <b>more</b>
       For more explanation of how functions fit into fish, see <u>Functions</u>.

   <b>functions</b> <b>-</b> <b>print</b> <b>or</b> <b>erase</b> <b>functions</b>
   <b>Synopsis</b>
       <b>functions</b> [<b>-a</b> | <b>--all</b>] [<b>-n</b> | <b>--names</b>]
       <b>functions</b> [<b>-D</b> | <b>--details</b>] [<b>-v</b>] <u>FUNCTION</u>
       <b>functions</b> <b>-c</b> <u>OLDNAME</u> <u>NEWNAME</u>
       <b>functions</b> <b>-d</b> <u>DESCRIPTION</u> <u>FUNCTION</u>
       <b>functions</b> [<b>-e</b> | <b>-q</b>] <u>FUNCTION</u> ...

   <b>Description</b>
       <b>functions</b> prints or erases functions.

       The following options are available:

       <b>-a</b> or <b>--all</b>
              Lists all functions, even those whose name starts with an underscore.

       <b>-c</b> or <b>--copy</b> <u>OLDNAME</u> <u>NEWNAME</u>
              Creates a new function named <u>NEWNAME</u>, using the definition of the <u>OLDNAME</u> function.

       <b>-d</b> or <b>--description</b> <u>DESCRIPTION</u>
              Changes the description of this function.

       <b>-e</b> or <b>--erase</b>
              Causes the specified functions to be erased. This also means that it is prevented from autoloading
              in the current session. Use <u>funcsave</u> to remove the saved copy.

       <b>-D</b> or <b>--details</b>
              Reports the path name where the specified function is defined or could be autoloaded, <b>stdin</b> if the
              function  was  defined interactively or on the command line or by reading standard input, <b>-</b> if the
              function was created via <u>source</u>, and <b>n/a</b> if the function isn't available. (Functions  created  via
              <u>alias</u>  will return <b>-</b>, because <b>alias</b> uses <b>source</b> internally. Copied functions will return where the
              function was copied.) If the <b>--verbose</b> option is also specified then five lines are written:

              • the path name as already described,

              • if the function was copied, the  path  name  to  where  the  function  was  originally  defined,
                otherwise <b>autoloaded</b>, <b>not-autoloaded</b> or <b>n/a</b>,

              • the line number within the file or zero if not applicable,

              • <b>scope-shadowing</b>  if the function shadows the vars in the calling function (the normal case if it
                wasn't defined with <b>--no-scope-shadowing</b>), else <b>no-scope-shadowing</b>, or <b>n/a</b> if the function isn't
                defined,

              • the function description minimally escaped so it is a single line, or <b>n/a</b> if the function  isn't
                defined or has no description.

              You should not assume that only five lines will be written since we may add additional information
              to the output in the future.

       <b>--no-details</b>
              Turns off function path reporting, so just the definition will be printed.

       <b>-n</b> or <b>--names</b>
              Lists the names of all defined functions.

       <b>-q</b> or <b>--query</b>
              Tests if the specified functions exist.

       <b>-v</b> or <b>--verbose</b>
              Make some output more verbose.

       <b>-H</b> or <b>--handlers</b>
              Show all event handlers.

       <b>-t</b> or <b>--handlers-type</b> <u>TYPE</u>
              Show all event handlers matching the given <u>TYPE</u>.

       <b>-h</b> or <b>--help</b>
              Displays help about using this command.

       The  default  behavior  of <b>functions</b>, when called with no arguments, is to print the names of all defined
       functions. Unless the <b>-a</b> option is given, no functions starting with  underscores  are  included  in  the
       output.

       If any non-option parameters are given, the definition of the specified functions are printed.

       Copying  a  function  using  <b>-c</b>  copies  only  the  body  of  the function, and does not attach any event
       notifications from the original function.

       Only one function's description can be changed in a single invocation of <b>functions</b> <b>-d</b>.

       The exit status of <b>functions</b> is the number of functions specified in the argument list that do not exist,
       which can be used in concert with the <b>-q</b> option.

   <b>Examples</b>
          functions -n
          # Displays a list of currently-defined functions

          functions -c foo bar
          # Copies the 'foo' function to a new function called 'bar'

          functions -e bar
          # Erases the function ``bar``

   <b>See</b> <b>more</b>
       For more explanation of how functions fit into fish, see <u>Functions</u>.

   <b>help</b> <b>-</b> <b>display</b> <b>fish</b> <b>documentation</b>
   <b>Synopsis</b>
       <b>help</b> [<u>SECTION</u>]

   <b>Description</b>
       <b>help</b> displays the fish help documentation.

       If a <u>SECTION</u> is specified, the help for that command is shown.

       The <b>-h</b> or <b>--help</b> option displays help about using this command.

       If the <u>BROWSER</u> environment variable is set, it will be used to  display  the  documentation.   Otherwise,
       fish will search for a suitable browser.  To use a different browser than as described above, you can set
       <b>$fish_help_browser</b> This variable may be set as a list, where the first element is the browser command and
       the rest are browser options.

   <b>Example</b>
       <b>help</b> <b>fg</b> shows the documentation for the <u>fg</u> builtin.

   <b>Notes</b>
       Most  builtin  commands,  including  this  one,  display their help in the terminal when given the <b>--help</b>
       option.

   <b>history</b> <b>-</b> <b>show</b> <b>and</b> <b>manipulate</b> <b>command</b> <b>history</b>
   <b>Synopsis</b>
       <b>history</b> [<b>search</b>] [<b>--show-time</b>] [<b>--case-sensitive</b>]
                        [<b>--exact</b> | <b>--prefix</b> | <b>--contains</b>] [<b>--max</b> <u>N</u>] [<b>--null</b>] [<b>--reverse</b>]
                        [<u>SEARCH_STRING</u> ...]
       <b>history</b> <b>delete</b> [<b>--case-sensitive</b>]
                      [<b>--exact</b> | <b>--prefix</b> | <b>--contains</b>] <u>SEARCH_STRING</u> ...
       <b>history</b> <b>merge</b>
       <b>history</b> <b>save</b>
       <b>history</b> <b>clear</b>
       <b>history</b> <b>clear-session</b>
       <b>history</b> <b>append</b> <u>COMMAND</u> ...

   <b>Description</b>
       <b>history</b> is used to search, delete, and otherwise manipulate the <u>history</u> <u>of</u> <u>interactive</u> <u>commands</u>.

       The following operations (sub-commands) are available:

       <b>search</b> Returns history items matching the search string. If no search string is provided it  returns  all
              history  items. This is the default operation if no other operation is specified. You only have to
              explicitly say <b>history</b> <b>search</b> if you wish to search for one of  the  subcommands.  The  <b>--contains</b>
              search  option  will  be  used if you don't specify a different search option. Entries are ordered
              newest to oldest unless you use the <b>--reverse</b> flag. If stdout is attached to a tty the output will
              be piped through your pager by the history function. The history builtin simply writes the results
              to stdout.

       <b>delete</b> Deletes history items. The <b>--contains</b> search option will be used if you don't specify a  different
              search  option.  If  you  don't  specify  <b>--exact</b>  a prompt will be displayed before any items are
              deleted asking you which entries are to be deleted. You can enter the word  "all"  to  delete  all
              matching  entries.  You  can enter a single ID (the number in square brackets) to delete just that
              single entry. You can enter more than one ID, or an ID  range  separated  by  a  space  to  delete
              multiple  entries.  Just  press  [enter]  to not delete anything. Note that the interactive delete
              behavior is a feature  of  the  history  function.  The  history  builtin  only  supports  <b>--exact</b>
              <b>--case-sensitive</b> deletion.

       <b>merge</b>  Immediately  incorporates  history  changes  from  other sessions. Ordinarily <b>fish</b> ignores history
              changes from  sessions  started  after  the  current  one.  This  command  applies  those  changes
              immediately.

       <b>save</b>   Immediately  writes  all  changes  to  the history file. The shell automatically saves the history
              file; this option is provided for internal use and should not normally need  to  be  used  by  the
              user.

       <b>clear</b>  Clears  the history file. A prompt is displayed before the history is erased asking you to confirm
              you really want to clear all history unless <b>builtin</b> <b>history</b> is used.

       <b>clear-session</b>
              Clears the history file from all activity of the  current  session.  Note:  If  <b>history</b>  <b>merge</b>  or
              <b>builtin</b> <b>history</b> <b>merge</b> is run in a session, only the history after this will be erased.

       <b>append</b> Appends commands to the history without needing to execute them.

       The following options are available:

       These flags can appear before or immediately after one of the sub-commands listed above.

       <b>-C</b> or <b>--case-sensitive</b>
              Does  a  case-sensitive search. The default is case-insensitive. Note that prior to fish 2.4.0 the
              default was case-sensitive.

       <b>-c</b> or <b>--contains</b>
              Searches items in the history that contain the specified text string. This is the default for  the
              <b>--search</b> flag. This is not currently supported by the <b>delete</b> subcommand.

       <b>-e</b> or <b>--exact</b>
              Searches or deletes items in the history that exactly match the specified text string. This is the
              default  for  the  <b>delete</b>  subcommand.  Note that the match is case-insensitive by default. If you
              really want an exact match, including letter case, you must use the <b>-C</b> or <b>--case-sensitive</b> flag.

       <b>-p</b> or <b>--prefix</b>
              Searches items in the history that begin with the specified text string.  This  is  not  currently
              supported by the <b>delete</b> subcommand.

       <b>-t</b> or <b>--show-time</b>
              Prepends  each history entry with the date and time the entry was recorded. By default it uses the
              strftime format <b>#</b> <b>%c%n</b>. You can specify another format; e.g., <b>--show-time="%Y-%m-%d</b> <b>%H:%M:%S</b> <b>"</b>  or
              <b>--show-time="%a%I%p"</b>.  The short option, <b>-t</b>, doesn't accept a strftime format string; it only uses
              the default format. Any strftime format is allowed, including <b>%s</b> to get the raw UNIX seconds since
              the epoch.

       <b>-z</b> or <b>--null</b>
              Causes history entries written by the search operations to be terminated by a NUL character rather
              than a newline. This allows the output to be processed by <b>read</b> <b>-z</b> to  correctly  handle  multiline
              history entries.

       <b>-</b>*NUMBER* <b>-n</b> <u>NUMBER</u> or <b>--max</b> <u>NUMBER</u>
              Limits  the  matched  history  items  to the first <u>NUMBER</u> matching entries. This is only valid for
              <b>history</b> <b>search</b>.

       <b>-R</b> or <b>--reverse</b>
              Causes the history search results to be ordered oldest to newest. Which is the order used by  most
              shells. The default is newest to oldest.

       <b>-h</b> or <b>--help</b>
              Displays help for this command.

   <b>Example</b>
          history clear
          # Deletes all history items

          history search --contains "foo"
          # Outputs a list of all previous commands containing the string "foo".

          history delete --prefix "foo"
          # Interactively deletes commands which start with "foo" from the history.
          # You can select more than one entry by entering their IDs separated by a space.

   <b>Customizing</b> <b>the</b> <b>name</b> <b>of</b> <b>the</b> <b>history</b> <b>file</b>
       By   default   interactive   commands   are   logged   to   <b>$XDG_DATA_HOME/fish/fish_history</b>   (typically
       <b><a href="file:~/.local/share/fish/fish_history">~/.local/share/fish/fish_history</a></b>).

       You can set the <b>fish_history</b> variable to another name for the current shell session.  The  default  value
       (when the variable is unset) is <b>fish</b> which corresponds to <b>$XDG_DATA_HOME/fish/fish_history</b>. If you set it
       to  e.g.  <b>fun</b>,  the  history  would  be written to <b>$XDG_DATA_HOME/fish/fun_history</b>. An empty string means
       history will not be stored at all. This is similar to the private session features in web browsers.

       You can change <b>fish_history</b> at any time (by using <b>set</b> <b>-x</b> <b>fish_history</b> <b>"session_name"</b>) and  it  will  take
       effect right away. If you set it to <b>"default"</b>, it will use the default session name (which is <b>"fish"</b>).

       Other  shells  such  as  bash  and  zsh  use a variable named <b>HISTFILE</b> for a similar purpose. Fish uses a
       different name to avoid conflicts and signal that the behavior is different (session name  instead  of  a
       file path). Also, if you set the var to anything other than <b>fish</b> or <b>default</b> it will inhibit importing the
       bash  history.  That's  because  the most common use case for this feature is to avoid leaking private or
       sensitive history when giving a presentation.

   <b>Notes</b>
       If you specify both <b>--prefix</b> and <b>--contains</b> the last flag seen is used.

       Note that for backwards compatibility each subcommand can  also  be  specified  as  a  long  option.  For
       example,  rather than <b>history</b> <b>search</b> you can type <b>history</b> <b>--search</b>. Those long options are deprecated and
       will be removed in a future release.

   <b>if</b> <b>-</b> <b>conditionally</b> <b>execute</b> <b>a</b> <b>command</b>
   <b>Synopsis</b>
       <b>if</b> <u>CONDITION</u><b>;</b> <u>COMMANDS_TRUE</u> ...<b>;</b>
       [<b>else</b> <b>if</b> <u>CONDITION2</u><b>;</b> <u>COMMANDS_TRUE2</u> ...<b>;</b>]
       [<b>else;</b> <u>COMMANDS_FALSE</u> ...<b>;</b>]
       <b>end</b>

   <b>Description</b>
       <b>if</b> will execute the command <b>CONDITION</b>. If the condition's exit status is 0,  the  commands  <b>COMMANDS_TRUE</b>
       will execute.  If the exit status is not 0 and <u>else</u> is given, <b>COMMANDS_FALSE</b> will be executed.

       You can use <u>and</u> or <u>or</u> in the condition. See the second example below.

       The exit status of the last foreground command to exit can always be accessed using the <u>$status</u> variable.

       The <b>-h</b> or <b>--help</b> option displays help about using this command.

   <b>Example</b>
       The  following code will print <b>foo.txt</b> <b>exists</b> if the file foo.txt exists and is a regular file, otherwise
       it will print <b>bar.txt</b> <b>exists</b> if the file bar.txt exists and is a regular file, otherwise  it  will  print
       <b>foo.txt</b> <b>and</b> <b>bar.txt</b> <b>do</b> <b>not</b> <b>exist</b>.

          if test -f foo.txt
              echo foo.txt exists
          else if test -f bar.txt
              echo bar.txt exists
          else
              echo foo.txt and bar.txt do not exist
          end

       The following code will print "foo.txt exists and is readable" if foo.txt is a regular file and readable

          if test -f foo.txt
             and test -r foo.txt
             echo "foo.txt exists and is readable"
          end

   <b>See</b> <b>also</b>
       <b>if</b> is only as useful as the command used as the condition.

       Fish ships a few:

       • <u>test</u> <u>-</u> <u>perform</u> <u>tests</u> <u>on</u> <u>files</u> <u>and</u> <u>text</u> can compare numbers, strings and check paths

       • <u>string</u>  <u>-</u>  <u>manipulate</u>  <u>strings</u>  can perform string operations including wildcard and regular expression
         matches

       • <u>path</u> <u>-</u> <u>manipulate</u> <u>and</u> <u>check</u> <u>paths</u> can check paths for permissions, existence or type

       • <u>contains</u> <u>-</u> <u>test</u> <u>if</u> <u>a</u> <u>word</u> <u>is</u> <u>present</u> <u>in</u> <u>a</u> <u>list</u> can check if an element is in a list

   <b>isatty</b> <b>-</b> <b>test</b> <b>if</b> <b>a</b> <b>file</b> <b>descriptor</b> <b>is</b> <b>a</b> <b>terminal</b>
   <b>Synopsis</b>
       <b>isatty</b> [<u>FILE_DESCRIPTOR</u>]

   <b>Description</b>
       <b>isatty</b> tests if a file descriptor is a terminal (as opposed to a file). The  name  is  derived  from  the
       system call of the same name, which for historical reasons refers to a teletypewriter (TTY).

       <b>FILE</b>  <b>DESCRIPTOR</b>  may  be either the number of a file descriptor, or one of the strings <b>stdin</b>, <b>stdout</b>, or
       <b>stderr</b>. If not specified, zero is assumed.

       If the specified file descriptor is a terminal device, the exit status of the command is zero. Otherwise,
       the exit status is non-zero. No messages are printed to standard error.

       The <b>-h</b> or <b>--help</b> option displays help about using this command.

   <b>Examples</b>
       From an interactive shell, the commands below exit with a return value of zero:

          isatty
          isatty stdout
          isatty 2
          echo | isatty 1

       And these will exit non-zero:

          echo | isatty
          isatty 9
          isatty stdout &gt; file
          isatty 2 2&gt; file

   <b>jobs</b> <b>-</b> <b>print</b> <b>currently</b> <b>running</b> <b>jobs</b>
   <b>Synopsis</b>
       <b>jobs</b> [<u>OPTIONS</u>] [<u>PID</u> | <b>%</b><u>JOBID</u>]

   <b>Description</b>
       NOTE: This page documents the fish builtin <b>jobs</b>.  To see the documentation on any non-fish versions,  use
       <b>command</b> <b>man</b> <b>jobs</b>.

       <b>jobs</b> prints a list of the currently running <u>jobs</u> and their status.

       <b>jobs</b> accepts the following options:

       <b>-c</b> or <b>--command</b>
              Prints the command name for each process in jobs.

       <b>-g</b> or <b>--group</b>
              Only prints the group ID of each job.

       <b>-l</b> or <b>--last</b>
              Prints only the last job to be started.

       <b>-p</b> or <b>--pid</b>
              Prints the process ID for each process in all jobs.

       <b>-q</b> or <b>--query</b>
              Prints  no  output  for  evaluation  of  jobs by exit status only. For compatibility with old fish
              versions this is also <b>--quiet</b> (but this is deprecated).

       <b>-h</b> or <b>--help</b>
              Displays help about using this command.

       On systems that support this feature, jobs will print the CPU usage of each job since  the  last  command
       was  executed.  The  CPU  usage  is  expressed  as  a  percentage  of  full  CPU  activity.  Note that on
       multiprocessor systems, the total activity may be more than 100%.

       Arguments of the form <u>PID</u> or <u>%JOBID</u> restrict the output to jobs with the selected process identifiers  or
       job numbers respectively.

       If the output of <b>jobs</b> is redirected or if it is part of a command substitution, the column header that is
       usually printed is omitted, making it easier to parse.

       The exit status of <b>jobs</b> is <b>0</b> if there are running background jobs and <b>1</b> otherwise.

   <b>Example</b>
       <b>jobs</b> outputs a summary of the current jobs, such as two long-running tasks in this example:

          Job Group   State   Command
          2   26012   running nc -l 55232 &lt; /dev/random &amp;
          1   26011   running python tests/test_11.py &amp;

   <b>math</b> <b>-</b> <b>perform</b> <b>mathematics</b> <b>calculations</b>
   <b>Synopsis</b>
       <b>math</b> [(<b>-s</b> | <b>--scale</b>) <u>N</u>] [(<b>-b</b> | <b>--base</b>) <u>BASE</u>] [(<b>-m</b> | <b>--scale-mode</b>) <u>MODE</u>] <u>EXPRESSION</u> ...

   <b>Description</b>
       <b>math</b>  performs  mathematical  calculations.  It supports simple operations such as addition, subtraction,
       and so on, as well as functions like <b>abs()</b>, <b>sqrt()</b> and <b>ln()</b>.

       By default, the output shows up to 6 decimal places.  To change the number of  decimal  places,  use  the
       <b>--scale</b> option, including <b>--scale=0</b> for integer output.

       Keep  in mind that parameter expansion happens before expressions are evaluated.  This can be very useful
       in order to perform calculations involving shell variables or the output of command substitutions, but it
       also means that parenthesis (<b>()</b>) and the asterisk (<b>*</b>) glob character have to be escaped or quoted.  <b>x</b> can
       also be used to denote multiplication, but it needs to be followed by whitespace to distinguish  it  from
       hexadecimal numbers.

       Parentheses  for  functions are optional - <b>math</b> <b>sin</b> <b>pi</b> prints <b>0</b>.  However, a comma will bind to the inner
       function, so <b>math</b> <b>pow</b> <b>sin</b> <b>3,</b> <b>5</b> is an error because it tries to give <b>sin</b> the arguments <b>3</b> and <b>5</b>.   When  in
       doubt, use parentheses.

       <b>math</b>  ignores  whitespace  between arguments and takes its input as multiple arguments (internally joined
       with a space), so <b>math</b> <b>2</b> <b>+2</b> and <b>math</b> <b>"2</b> <b>+</b>    <b>2"</b> work the same.  <b>math</b> <b>2</b> <b>2</b> is an error.

       The following options are available:

       <b>-s</b> <u>N</u> or <b>--scale</b> <u>N</u>
              Sets the scale of the result.  <b>N</b> must be an integer or the word "max" for the  maximum  scale.   A
              scale of zero causes results to be truncated by default. Any non-integer component is thrown away.
              So  <b>3/2</b>  returns  <b>1</b>  by  default,  rather  than  <b>2</b> which <b>1.5</b> would normally round to.  This is for
              compatibility with <b>bc</b> which was the basis for this command prior  to  fish  3.0.0.   Scale  values
              greater than zero causes the result to be rounded using the usual rules to the specified number of
              decimal places.

       <b>-b</b> <u>BASE</u> or <b>--base</b> <u>BASE</u>
              Sets  the numeric base used for output (<b>math</b> always understands hexadecimal numbers as input).  It
              currently understands "hex" or "16" for hexadecimal and "octal" or "8" for  octal  and  implies  a
              scale of 0 (other scales cause an error), so it will truncate the result down to an integer.  This
              might  change  in  the  future.  Hex numbers will be printed with a <b>0x</b> prefix.  Octal numbers will
              have a prefix of <b>0</b> but aren't understood by <b>math</b> as input.

       <b>-m</b> <u>MODE</u> or <b>--scale-mode</b> <u>MODE</u>
              Sets scale behavior.  The <b>MODE</b> can be <b>truncate</b>, <b>round</b>, <b>floor</b>, <b>ceiling</b>.  The default value of scale
              mode is <b>round</b> with non zero scale and <b>truncate</b> with zero scale.

       <b>-h</b> or <b>--help</b>
              Displays help about using this command.

   <b>Return</b> <b>Values</b>
       If the expression is successfully evaluated and doesn't over/underflow or return NaN the return <b>status</b> is
       zero (success) else one.

   <b>Syntax</b>
       <b>math</b> knows some operators, constants, functions and can (obviously) read numbers.

       For numbers, <b>.</b> is always the radix character regardless of locale - <b>2.5</b>, not  <b>2,5</b>.   Scientific  notation
       (<b>10e5</b>) and hexadecimal (<b>0xFF</b>) are also available.

       <b>math</b>  allows  you  to use underscores as visual separators for digit grouping. For example, you can write
       <b>1_000_000</b>, <b>0x_89_AB_CD_EF</b>, and <b>1.234_567_e89</b>.

   <b>Operators</b>
       <b>math</b> knows the following operators:

       <b>+</b>      for addition

       <b>-</b>      for subtraction

       <b>*</b> <b>or</b> <b>x</b> for multiplication. <b>*</b> is the glob character and needs to be quoted  or  escaped,  <b>x</b>  needs  to  be
              followed by whitespace or it looks like <b>0x</b> hexadecimal notation.

       <b>/</b>      for division

       <b>^</b>      for exponentiation

       <b>%</b>      for modulo

       <b>(</b> <b>or</b> <b>)</b> for grouping. These need to be quoted or escaped because <b>()</b> denotes a command substitution.

       They are all used in an infix manner - <b>5</b> <b>+</b> <b>2</b>, not <b>+</b> <b>5</b> <b>2</b>.

   <b>Constants</b>
       <b>math</b> knows the following constants:

       <b>e</b>      Euler's number

       <b>pi</b>     π, you know this one.  Half of Tau

       <b>tau</b>    Equivalent to 2π, or the number of radians in a circle

       Use them without a leading <b>$</b> - <b>pi</b> <b>-</b> <b>3</b> should be about 0.

   <b>Functions</b>
       <b>math</b> supports the following functions:

       <b>abs</b>    the absolute value, with positive sign

       <b>acos</b>   arc cosine

       <b>asin</b>   arc sine

       <b>atan</b>   arc tangent

       <b>atan2</b>  arc tangent of two variables

       <b>bitand,</b> <b>bitor</b> <b>and</b> <b>bitxor</b>
              perform bitwise operations.  These will throw away any non-integer parts and interpret the rest as
              an int.

              Note: <b>bitnot</b> and <b>bitnand</b> don't exist. This is because numbers in math don't really have a <u>width</u> in
              terms of bits, and these operations necessarily care about leading zeroes.

              If you need to negate a specific number you can do it with an xor with a mask, e.g.:

                 &gt; math --base=hex bitxor 0x0F, 0xFF
                 0xF0

                 &gt; math --base=hex bitxor 0x2, 0x3
                 # Here we mask with 0x3 == 0b111, so our number is 3 bits wide
                 # Only the 1 bit isn't set.
                 0x1

       <b>ceil</b>   round number up to the nearest integer

       <b>cos</b>    the cosine

       <b>cosh</b>   hyperbolic cosine

       <b>exp</b>    the base-e exponential function

       <b>fac</b>    factorial - also known as <b>x!</b> (<b>x</b> <b>*</b> <b>(x</b> <b>-</b> <b>1)</b> <b>*</b> <b>(x</b> <b>-</b> <b>2)</b> <b>*</b> <b>...</b> <b>*</b> <b>1</b>)

       <b>floor</b>  round number down to the nearest integer

       <b>ln</b>     the base-e logarithm

       <b>log</b> <b>or</b> <b>log10</b>
              the base-10 logarithm

       <b>log2</b>   the base-2 logarithm

       <b>max</b>    returns  the  largest  of  the given numbers - this takes an arbitrary number of arguments (but at
              least one)

       <b>min</b>    returns the smallest of the given numbers - this takes an arbitrary number of  arguments  (but  at
              least one)

       <b>ncr</b>    "from  n  choose  r"  combination function - how many subsets of size r can be taken from n (order
              doesn't matter)

       <b>npr</b>    the number of subsets of size r that can be taken from a set of n  elements  (including  different
              order)

       <b>pow(x,y)</b>
              returns x to the y (and can be written as <b>x</b> <b>^</b> <b>y</b>)

       <b>round</b>  rounds to the nearest integer, away from 0

       <b>sin</b>    the sine function

       <b>sinh</b>   the hyperbolic sine

       <b>sqrt</b>   the square root - (can also be written as <b>x</b> <b>^</b> <b>0.5</b>)

       <b>tan</b>    the tangent

       <b>tanh</b>   the hyperbolic tangent

       All of the trigonometric functions use radians (the pi-based scale, not 360°).

   <b>Examples</b>
       <b>math</b> <b>1+1</b> outputs 2.

       <b>math</b> <b>$status</b> <b>-</b> <b>128</b> outputs the numerical exit status of the last command minus 128.

       <b>math</b> <b>10</b> <b>/</b> <b>6</b> outputs <b>1.666667</b>.

       <b>math</b> <b>-s0</b> <b>10.0</b> <b>/</b> <b>6.0</b> outputs <b>1</b>.

       <b>math</b> <b>-s3</b> <b>10</b> <b>/</b> <b>6</b> outputs <b>1.667</b>.

       <b>math</b> <b>"sin(pi)"</b> outputs <b>0</b>.

       <b>math</b> <b>5</b> <b>\*</b> <b>2</b> or <b>math</b> <b>"5</b> <b>*</b> <b>2"</b> or <b>math</b> <b>5</b> <b>"*"</b> <b>2</b> all output <b>10</b>.

       <b>math</b> <b>0xFF</b> outputs 255, <b>math</b> <b>0</b> <b>x</b> <b>3</b> outputs 0 (because it computes 0 multiplied by 3).

       <b>math</b> <b>bitand</b> <b>0xFE,</b> <b>0x2e</b> outputs 46.

       <b>math</b> <b>"bitor(9,2)"</b> outputs 11.

       <b>math</b> <b>--base=hex</b> <b>192</b> prints <b>0xc0</b>.

       <b>math</b> <b>'ncr(49,6)'</b> prints 13983816 - that's the number of possible picks in 6-from-49 lotto.

       <b>math</b> <b>max</b> <b>5,2,3,1</b> prints 5.

   <b>Compatibility</b> <b>notes</b>
       Fish  1.x  and  2.x  releases  relied on the <b>bc</b> command for handling <b>math</b> expressions. Starting with fish
       3.0.0 fish uses the tinyexpr library and evaluates the expression without the involvement of any external
       commands.

       You don't need to use <b>--</b> before the expression, even if it begins with a minus sign which might otherwise
       be interpreted as an invalid option. If you do insert <b>--</b> before the  expression,  it  will  cause  option
       scanning to stop just like for every other command and it won't be part of the expression.

   <b>nextd</b> <b>-</b> <b>move</b> <b>forward</b> <b>through</b> <b>directory</b> <b>history</b>
   <b>Synopsis</b>
       <b>nextd</b> [<b>-l</b> | <b>--list</b>] [<u>POS</u>]

   <b>Description</b>
       <b>nextd</b>  moves  forwards <u>POS</u> positions in the <u>history</u> <u>of</u> <u>visited</u> <u>directories</u>; if the end of the history has
       been hit, a warning is printed.

       If the <b>-l</b> or <b>--list</b> option is specified, the current directory history is also displayed.

       The <b>-h</b> or <b>--help</b> option displays help about using this command.

       Note that the <b>cd</b> command limits directory history to  the  25  most  recently  visited  directories.  The
       history is stored in the <b>dirprev</b> and <b>dirnext</b> variables which this command manipulates.

   <b>Example</b>
          cd <a href="file:/usr/src">/usr/src</a>
          # Working directory is now <a href="file:/usr/src">/usr/src</a>

          cd /usr/src/fish-shell
          # Working directory is now /usr/src/fish-shell

          prevd
          # Working directory is now <a href="file:/usr/src">/usr/src</a>

          nextd
          # Working directory is now /usr/src/fish-shell

   <b>See</b> <b>Also</b>
       • the <u>cdh</u> command to display a prompt to quickly navigate the history

       • the <u>dirh</u> command to print the directory history

       • the <u>prevd</u> command to move backward

   <b>not</b> <b>-</b> <b>negate</b> <b>the</b> <b>exit</b> <b>status</b> <b>of</b> <b>a</b> <b>job</b>
   <b>Synopsis</b>
       <b>not</b> <u>COMMAND</u> [<u>OPTIONS</u> ...]
       <b>!</b> <u>COMMAND</u> [<u>OPTIONS</u> ...]

   <b>Description</b>
       <b>not</b> negates the exit status of another command. If the exit status is zero, <b>not</b> returns 1. Otherwise, <b>not</b>
       returns 0.

       Some other shells only support the <b>!</b> alias.

       The <b>-h</b> or <b>--help</b> option displays help about using this command.

   <b>Example</b>
       The following code reports an error and exits if no file named spoon can be found.

          if not test -f spoon
              echo There is no spoon
              exit 1
          end

   <b>open</b> <b>-</b> <b>open</b> <b>file</b> <b>in</b> <b>its</b> <b>default</b> <b>application</b>
   <b>Synopsis</b>
       <b>open</b> <u>FILES</u> ...

   <b>Description</b>
       <b>open</b>  opens  a  file  in its default application, using the appropriate tool for the operating system. On
       GNU/Linux, this requires the common but optional <b>xdg-open</b> utility, from the <b>xdg-utils</b> package.

       Note that this function will not be used if a command by this name exists (which is the case on macOS  or
       Haiku).

   <b>Example</b>
       <b>open</b> <b>*.txt</b> opens all the text files in the current directory using your system's default text editor.

   <b>or</b> <b>-</b> <b>conditionally</b> <b>execute</b> <b>a</b> <b>command</b>
   <b>Synopsis</b>
       <u>COMMAND1</u><b>;</b> <b>or</b> <u>COMMAND2</u>

   <b>Description</b>
       <b>or</b>  is  used  to  execute  a  command  if  the  previous command was not successful (returned a status of
       something other than 0).

       <b>or</b> statements may be used as part of the condition in an <u>if</u> or <u>while</u> block.

       <b>or</b> does not change the current exit status itself, but the command it runs most  likely  will.  The  exit
       status of the last foreground command to exit can always be accessed using the <u>$status</u> variable.

       The <b>-h</b> or <b>--help</b> option displays help about using this command.

   <b>Example</b>
       The  following  code  runs  the  <b>make</b>  command  to build a program. If the build succeeds, the program is
       installed. If either step fails, <b>make</b> <b>clean</b> is run, which removes the files created by the build process.

          make; and make install; or make clean

   <b>See</b> <b>Also</b>
       • <u>and</u> command

   <b>path</b> <b>-</b> <b>manipulate</b> <b>and</b> <b>check</b> <b>paths</b>
   <b>Synopsis</b>
       <b>path</b> <b>basename</b> <u>GENERAL_OPTIONS</u> [(<b>-E</b> | <b>--no-extension</b>)] [<u>PATH</u> ...]
       <b>path</b> <b>dirname</b> <u>GENERAL_OPTIONS</u>  [<u>PATH</u> ...]
       <b>path</b> <b>extension</b> <u>GENERAL_OPTIONS</u> [<u>PATH</u> ...]
       <b>path</b> <b>filter</b> <u>GENERAL_OPTIONS</u> [<b>-v</b> | <b>--invert</b>]
           [<b>-d</b>] [<b>-f</b>] [<b>-l</b>] [<b>-r</b>] [<b>-w</b>] [<b>-x</b>]
           [(<b>-t</b> | <b>--type</b>) <u>TYPE</u>] [(<b>-p</b> | <b>--perm</b>) <u>PERMISSION</u>] [<u>PATH</u> ...]
       <b>path</b> <b>is</b> <u>GENERAL_OPTIONS</u> [(<b>-v</b> | <b>--invert</b>)] [(<b>-t</b> | <b>--type</b>) <u>TYPE</u>]
           [<b>-d</b>] [<b>-f</b>] [<b>-l</b>] [<b>-r</b>] [<b>-w</b>] [<b>-x</b>]
           [(<b>-p</b> | <b>--perm</b>) <u>PERMISSION</u>] [<u>PATH</u> ...]
       <b>path</b> <b>mtime</b> <u>GENERAL_OPTIONS</u> [(<b>-R</b> | <b>--relative</b>)] [<u>PATH</u> ...]
       <b>path</b> <b>normalize</b> <u>GENERAL_OPTIONS</u> [<u>PATH</u> ...]
       <b>path</b> <b>resolve</b> <u>GENERAL_OPTIONS</u> [<u>PATH</u> ...]
       <b>path</b> <b>change-extension</b> <u>GENERAL_OPTIONS</u> <u>EXTENSION</u> [<u>PATH</u> ...]
       <b>path</b> <b>sort</b> <u>GENERAL_OPTIONS</u> [<b>-r</b> | <b>--reverse</b>]
           [<b>-u</b> | <b>--unique</b>] [<b>--key=basename</b>|<b>dirname</b>|<b>path</b>] [<u>PATH</u> ...]

       <u>GENERAL_OPTIONS</u>
           [<b>-z</b> | <b>--null-in</b>] [<b>-Z</b> | <b>--null-out</b>] [<b>-q</b> | <b>--quiet</b>]

   <b>Description</b>
       <b>path</b> performs operations on paths.

       PATH arguments are taken from the command line unless standard input is connected to a pipe or a file, in
       which case they are read from standard input, one PATH per line. It is an error to supply PATH  arguments
       on both the command line and on standard input.

       Arguments  starting with <b>-</b> are normally interpreted as switches; <b>--</b> causes the following arguments not to
       be treated as switches even if they begin with <b>-</b>. Switches and required arguments are recognized only  on
       the command line.

       When  a  path  starts  with <b>-</b>, <b>path</b> <b>filter</b> and <b>path</b> <b>normalize</b> will prepend <b>./</b> on output to avoid it being
       interpreted as an option otherwise, so it's safe to pass path's output to other commands that can  handle
       relative paths.

       All  subcommands  accept  a  <b>-q</b>  or  <b>--quiet</b> switch, which suppresses the usual output but exits with the
       documented status. In this case these commands will quit early, without  reading  all  of  the  available
       input.

       All  subcommands  also accept a <b>-Z</b> or <b>--null-out</b> switch, which makes them print output separated with NUL
       instead of newlines. This is for further processing, e.g. passing to another <b>path</b>, or <b>xargs</b> <b>-0</b>.  This  is
       not recommended when the output goes to the terminal or a command substitution.

       All  subcommands  also  accept  a  <b>-z</b>  or  <b>--null-in</b> switch, which makes them accept arguments from stdin
       separated with NULL-bytes. Since Unix paths can't contain NULL, that makes  it  possible  to  handle  all
       possible  paths and read input from e.g. <b>find</b> <b>-print0</b>. If arguments are given on the commandline this has
       no effect. This should mostly be unnecessary since <b>path</b> automatically starts splitting  on  NULL  if  one
       appears in the first PATH_MAX bytes, PATH_MAX being the operating system's maximum length for a path plus
       a NULL byte.

       Some  subcommands  operate on the paths as strings and so work on nonexistent paths, while others need to
       access the paths themselves and so filter out nonexistent paths.

       The following subcommands are available.

   <b>"basename"</b> <b>subcommand</b>
          path basename [-E | --no-extension] [-z | --null-in] [-Z | --null-out] [-q | --quiet] [PATH ...]

       <b>path</b> <b>basename</b> returns the last path component of the given path, by removing  the  directory  prefix  and
       removing  trailing  slashes.  In other words, it is the part that is not the dirname. For files you might
       call it the "filename".

       If the <b>-E</b> or <b>---no-extension</b> option is used and the base name contained a period, the  path  is  returned
       with  the  extension  (or  the last extension) removed, i.e. the "filename" without an extension (akin to
       calling <b>path</b> <b>change-extension</b> <b>""</b> <b>(path</b> <b>basename</b> <b>$path)</b>).

       It returns 0 if there was a basename, i.e. if the path wasn't empty or just slashes.

   <b>Examples</b>
          &gt;_ path basename ./foo.mp4
          foo.mp4

          &gt;_ path basename ../banana
          banana

          &gt;_ path basename <a href="file:/usr/bin/">/usr/bin/</a>
          bin

          &gt;_ path basename <a href="file:/usr/bin/">/usr/bin/</a>*
          # This prints all files in <a href="file:/usr/bin/">/usr/bin/</a>
          # A selection:
          cp
          fish
          grep
          rm

   <b>"dirname"</b> <b>subcommand</b>
          path dirname [-z | --null-in] [-Z | --null-out] [-q | --quiet] [PATH ...]

       <b>path</b> <b>dirname</b> returns the dirname for the given path. This is the part before the  last  "/",  discounting
       trailing  slashes.  In  other  words,  it  is  the part that is not the basename (discounting superfluous
       slashes).

       It returns 0 if there was a dirname, i.e. if the path wasn't empty or just slashes.

   <b>Examples</b>
          &gt;_ path dirname ./foo.mp4
          .

          &gt;_ path dirname ../banana
          ..

          &gt;_ path dirname <a href="file:/usr/bin/">/usr/bin/</a>
          <a href="file:/usr">/usr</a>

   <b>"extension"</b> <b>subcommand</b>
          path extension [-z | --null-in] [-Z | --null-out] [-q | --quiet] [PATH ...]

       <b>path</b> <b>extension</b> returns the extension of the given path. This is the part after (and including)  the  last
       ".",  unless  that "." followed a "/" or the basename is "." or "..", in which case there is no extension
       and an empty line is printed.

       If the filename ends in a ".", only a "." is printed.

       It returns 0 if there was an extension.

   <b>Examples</b>
          &gt;_ path extension ./foo.mp4
          .mp4

          &gt;_ path extension ../banana
          # an empty line, status 1

          &gt;_ path extension <a href="file:~/.config">~/.config</a>
          # an empty line, status 1

          &gt;_ path extension <a href="file:~/.config.d">~/.config.d</a>
          .d

          &gt;_ path extension <a href="file:~/.config.">~/.config.</a>
          .

          &gt;_ set -l path (path change-extension '' ./foo.mp4)
          &gt;_ set -l extension (path extension ./foo.mp4)
          &gt; echo $path$extension
          # reconstructs the original path again.
          ./foo.mp4

   <b>"filter"</b> <b>subcommand</b>
          path filter [-z | --null-in] [-Z | --null-out] [-q | --quiet] \
              [-d] [-f] [-l] [-r] [-w] [-x] \
              [-v | --invert] [(-t | --type) TYPE] [(-p | --perm) PERMISSION] [PATH ...]

       <b>path</b> <b>filter</b> returns all of the given paths that match the given checks. In all cases, the paths  need  to
       exist, nonexistent paths are always filtered.

       The available filters are:

       • <b>-t</b>  or  <b>--type</b>  with the options: "dir", "file", "link", "block", "char", "fifo" and "socket", in which
         case the path needs to be a directory, file, link,  block  device,  character  device,  named  pipe  or
         socket, respectively.

       • <b>-d</b>,  <b>-f</b>  and  <b>-l</b>  are  short  for  <b>--type=dir</b>,  <b>--type=file</b> and <b>--type=link</b>, respectively. There are no
         shortcuts for the other types.

       • <b>-p</b> or <b>--perm</b> with the options:  "read",  "write",  and  "exec",  as  well  as  "suid",  "sgid",  "user"
         (referring to the path owner) and "group" (referring to the path's group), in which case the path needs
         to have all of the given permissions for the current user.

       • <b>-r</b>,  <b>-w</b>  and  <b>-x</b>  are  short  for <b>--perm=read</b>, <b>--perm=write</b> and <b>--perm=exec</b>, respectively. There are no
         shortcuts for the other permissions.

       Note that the path needs to be <u>any</u> of the given types, but have <u>all</u> of the  given  permissions.  This  is
       because  having a path that is both writable and executable makes sense, but having a path that is both a
       directory and a file doesn't. Links will count as the type of the linked-to file, so links to files count
       as files, links to directories count as directories.

       The filter options can either be given as multiple options, or comma-separated - <b>path</b> <b>filter</b> <b>-t</b>  <b>dir,file</b>
       or <b>path</b> <b>filter</b> <b>--type</b> <b>dir</b> <b>--type</b> <b>file</b> are equivalent.

       With  <b>--invert</b>,  the meaning of the filtering is inverted - any path that wouldn't pass (including by not
       existing) passes, and any path that would pass fails.

       When a path starts with <b>-</b>, <b>path</b> <b>filter</b> will prepend <b>./</b>  to  avoid  it  being  interpreted  as  an  option
       otherwise.

       It returns 0 if at least one path passed the filter.

       <b>path</b>  <b>is</b>  is  shorthand  for  <b>path</b>  <b>filter</b>  <b>-q</b>,  i.e.  just checking without producing output, see <u>The</u> <u>is</u>
       <u>subcommand</u>.

   <b>Examples</b>
          &gt;_ path filter <a href="file:/usr/bin">/usr/bin</a> /usr/argagagji
          # The (hopefully) nonexistent argagagji is filtered implicitly:
          <a href="file:/usr/bin">/usr/bin</a>

          &gt;_ path filter --type file <a href="file:/usr/bin">/usr/bin</a> /usr/bin/fish
          # Only fish is a file
          /usr/bin/fish

          &gt;_ path filter --type file,dir --perm exec,write /usr/bin/fish /home/me
          # fish is a file, which passes, and executable, which passes,
          # but probably not writable, which fails.
          #
          # $HOME is a directory and both writable and executable, typically.
          # So it passes.
          /home/me

          &gt;_ path filter -fdxw /usr/bin/fish /home/me
          # This is the same as above: "-f" is "--type=file", "-d" is "--type=dir",
          # "-x" is short for "--perm=exec" and "-w" short for "--perm=write"!
          /home/me

          &gt;_ path filter -fx $PATH/*
          # Prints all possible commands - the first entry of each name is what fish would execute!

   <b>"is"</b> <b>subcommand</b>
          path is [-z | --null-in] [-Z | --null-out] [-q | --quiet] \
              [-d] [-f] [-l] [-r] [-w] [-x] \
              [-v | --invert] [(-t | --type) TYPE] [(-p | --perm) PERMISSION] [PATH ...]

       <b>path</b> <b>is</b> is short for <b>path</b> <b>filter</b> <b>-q</b>. It returns true if any of the given files  passes  the  filter,  but
       does not produce any output.

       <b>--quiet</b>  can  still  be  passed  for compatibility but is redundant. The options are the same as for <b>path</b>
       <b>filter</b>.

   <b>Examples</b>
          &gt;_ path is <a href="file:/usr/bin">/usr/bin</a> /usr/argagagji
          # <a href="file:/usr/bin">/usr/bin</a> exists, so this returns a status of 0 (true). It prints nothing.
          &gt;_ path is /usr/argagagji
          # /usr/argagagji does not, so this returns a status of 1 (false). It also prints nothing.
          &gt;_ path is -fx <a href="file:/bin/sh">/bin/sh</a>
          # <a href="file:/bin/sh">/bin/sh</a> is usually an executable file, so this returns true.

   <b>"mtime"</b> <b>subcommand</b>
          path mtime [-z | --null-in] [-Z | --null-out] [-q | --quiet] [-R | --relative] [PATH ...]

       <b>path</b> <b>mtime</b> returns the last modification time ("mtime" in unix jargon) of the  given  paths,  in  seconds
       since the unix epoch (the beginning of the 1st of January 1970).

       With  <b>--relative</b>  (or <b>-R</b>), it prints the number of seconds since the modification time. It only reads the
       current time once at start, so in case multiple paths are given the times are all relative to  the  <u>start</u>
       of <b>path</b> <b>mtime</b> <b>-R</b> running.

       If  you  want to know if a file is newer or older than another file, consider using <b>test</b> <b>-nt</b> instead. See
       <u>the</u> <u>test</u> <u>documentation</u>.

       It returns 0 if reading mtime for any path succeeded.

   <b>Examples</b>
          &gt;_ date +%s
          # This prints the current time as seconds since the epoch
          1657217847

          &gt;_ path mtime <a href="file:/etc/">/etc/</a>
          1657213796

          &gt;_ path mtime -R <a href="file:/etc/">/etc/</a>
          4078
          # So <a href="file:/etc/">/etc/</a> on this system was last modified a little over an hour ago

          # This is the same as
          &gt;_ math (date +%s) - (path mtime <a href="file:/etc/">/etc/</a>)

   <b>"normalize"</b> <b>subcommand</b>
          path normalize [-z | --null-in] [-Z | --null-out] [-q | --quiet] [PATH ...]

       <b>path</b> <b>normalize</b> returns the normalized versions of all  paths.  That  means  it  squashes  duplicate  "/",
       collapses "../" with earlier components and removes "." components.

       Unlike  <b>realpath</b>  or  <b>path</b>  <b>resolve</b>,  it  does  not make the paths absolute. It also does not resolve any
       symlinks. As such it can operate on non-existent paths.

       Because it operates on paths as strings and doesn't resolve symlinks, it works sort of like  <b>pwd</b>  <b>-L</b>  and
       <b>cd</b>.  E.g.  <b>path</b>  <b>normalize</b>  <b>link/..</b>  will  return <b>.</b>, just like <b>cd</b> <b>link;</b> <b>cd</b> <b>..</b> would return to the current
       directory. For a physical view of the filesystem, see <b>path</b> <b>resolve</b>.

       Leading "./" components are usually removed. But when a path starts with <b>-</b>, <b>path</b> <b>normalize</b>  will  add  it
       instead to avoid confusion with options.

       It returns 0 if any normalization was done, i.e. any given path wasn't in canonical form.

   <b>Examples</b>
          &gt;_ path normalize /usr/bin//../../etc/fish
          # The "//" is squashed and the ".." components neutralize the components before
          /etc/fish

          &gt;_ path normalize <a href="file:/bin//bash">/bin//bash</a>
          # The "//" is squashed, but <a href="file:/bin">/bin</a> isn't resolved even if your system links it to /usr/bin.
          <a href="file:/bin/bash">/bin/bash</a>

          &gt;_ path normalize ./my/subdirs/../sub2
          my/sub2

          &gt;_ path normalize -- -/foo
          ./-/foo

   <b>"resolve"</b> <b>subcommand</b>
          path resolve [-z | --null-in] [-Z | --null-out] [-q | --quiet] [PATH ...]

       <b>path</b>  <b>resolve</b> returns the normalized, physical and absolute versions of all paths. That means it resolves
       symlinks and does what <b>path</b> <b>normalize</b> does: it squashes  duplicate  "/",  collapses  "../"  with  earlier
       components  and  removes "." components. Then it turns that path into the absolute path starting from the
       filesystem root "/".

       It is similar to <b>realpath</b>, as it creates the "real", canonical version of the path.  However,  for  paths
       that can't be resolved, e.g. if they don't exist or form a symlink loop, it will resolve as far as it can
       and normalize the rest.

       Because  it  resolves  symlinks,  it works sort of like <b>pwd</b> <b>-P</b>. E.g. <b>path</b> <b>resolve</b> <b>link/..</b> will return the
       parent directory of what the link points to, just like <b>cd</b> <b>link;</b> <b>cd</b> <b>(pwd</b> <b>-P)<a href="file:/..">/..</a></b> would  go  to  it.  For  a
       logical view of the filesystem, see <b>path</b> <b>normalize</b>.

       It returns 0 if any normalization or resolution was done, i.e. any given path wasn't in canonical form.

   <b>Examples</b>
          &gt;_ path resolve <a href="file:/bin//sh">/bin//sh</a>
          # The "//" is squashed, and <a href="file:/bin">/bin</a> is resolved if your system links it to /usr/bin.
          # sh here is bash (this is common on linux systems)
          <a href="file:///usr/lib/w3m/cgi-bin/w3mman2html.cgi?bash">/usr/bin/bash</a>

          &gt;_ path resolve /bin/foo///bar/../baz
          # Assuming <a href="file:/bin">/bin</a> exists and is a symlink to <a href="file:/usr/bin">/usr/bin</a>, but /bin/foo doesn't.
          # This resolves the <a href="file:/bin/">/bin/</a> and normalizes the nonexistent rest:
          /usr/bin/foo/baz

   <b>"change-extension"</b> <b>subcommand</b>
          path change-extension [-z | --null-in] [-Z | --null-out] \
              [-q | --quiet] EXTENSION [PATH ...]

       <b>path</b>  <b>change-extension</b>  returns the given paths, with their extension changed to the given new extension.
       The extension is the part after (and including) the last ".", unless that  "."  followed  a  "/"  or  the
       basename is "." or "..", in which case there is no previous extension and the new one is simply added.

       If  the  extension  is empty, any previous extension is stripped, along with the ".". This is, of course,
       the inverse of <b>path</b> <b>extension</b>.

       One leading dot on the extension is ignored, so ".mp3" and "mp3" are treated the same.

       It returns 0 if it was given any paths.

   <b>Examples</b>
          &gt;_ path change-extension mp4 ./foo.wmv
          ./foo.mp4

          &gt;_ path change-extension .mp4 ./foo.wmv
          ./foo.mp4

          &gt;_ path change-extension '' ../banana
          ../banana

          &gt;_ path change-extension '' <a href="file:~/.config">~/.config</a>
          /home/alfa/.config

          &gt;_ path change-extension '' <a href="file:~/.config.d">~/.config.d</a>
          /home/alfa/.config

          &gt;_ path change-extension '' <a href="file:~/.config.">~/.config.</a>
          /home/alfa/.config

   <b>"sort"</b> <b>subcommand</b>
          path sort [-z | --null-in] [-Z | --null-out] \
              [-q | --quiet] [-r | --reverse] \
              [--key=basename|dirname|path] [PATH ...]

       <b>path</b> <b>sort</b> returns the given paths in sorted order.  They  are  sorted  in  the  same  order  as  globs  -
       alphabetically, but with runs of numerical digits compared numerically.

       With <b>--reverse</b> or <b>-r</b> the sort is reversed.

       With <b>--key=</b> only the given part of the path is compared, e.g. <b>--key=dirname</b> causes only the dirname to be
       compared,  <b>--key=basename</b> only the basename and <b>--key=path</b> causes the entire path to be compared (this is
       the default).

       With <b>--unique</b> or <b>-u</b> the sort is deduplicated, meaning only the first of a run that have the same  key  is
       kept. So if you are sorting by basename, then only the first of each basename is used.

       The  sort  used is stable, so sorting first by basename and then by dirname works and causes the files to
       be grouped according to directory.

       It currently returns 0 if it was given any paths.

   <b>Examples</b>
          &gt;_ path sort 10-foo 2-bar
          2-bar
          10-foo

          &gt;_ path sort --reverse 10-foo 2-bar
          10-foo
          2-bar

          &gt;_ path sort --unique --key=basename $fish_function_path/*.fish
          # prints a list of all function files fish would use, sorted by name.

   <b>Combining</b> <b>path</b>
       <b>path</b> is meant to be easy to combine with itself, other tools and fish.

       This is why

       • <b>path</b>'s output is automatically split by fish if it goes into a  command  substitution,  so  just  doing
         <b>(path</b> <b>...)</b> handles all paths, even those containing newlines, correctly

       • <b>path</b>  has  <b>--null-in</b> to handle null-delimited input (typically automatically detected!), and <b>--null-out</b>
         to pass on null-delimited output

       Some examples of combining <b>path</b>:

          # Expand all paths in the current directory, leave only executable files, and print their resolved path
          path filter -zZ -xf -- * | path resolve -z

          # The same thing, but using find (note -maxdepth needs to come first or find will scream)
          # (this also depends on your particular version of find)
          # Note the `-z` is unnecessary for any sensible version of find - if `path` sees a NULL,
          # it will split on NULL automatically.
          find . -maxdepth 1 -type f -executable -print0 | path resolve -z

          set -l paths (path filter -p exec $PATH/fish -Z | path resolve)

   <b>popd</b> <b>-</b> <b>move</b> <b>through</b> <b>directory</b> <b>stack</b>
   <b>Synopsis</b>
       <b>popd</b>

   <b>Description</b>
       <b>popd</b> removes the top directory from the <u>directory</u> <u>stack</u> and changes the working directory to the new  top
       directory. Use <u>pushd</u> to add directories to the stack.

       The <b>-h</b> or <b>--help</b> option displays help about using this command.

   <b>Example</b>
          pushd <a href="file:/usr/src">/usr/src</a>
          # Working directory is now <a href="file:/usr/src">/usr/src</a>
          # Directory stack contains <a href="file:/usr/src">/usr/src</a>

          pushd /usr/src/fish-shell
          # Working directory is now /usr/src/fish-shell
          # Directory stack contains <a href="file:/usr/src">/usr/src</a> /usr/src/fish-shell

          popd
          # Working directory is now <a href="file:/usr/src">/usr/src</a>
          # Directory stack contains <a href="file:/usr/src">/usr/src</a>

   <b>See</b> <b>Also</b>
       • the <u>dirs</u> command to print the directory stack

       • the <u>cdh</u> command which provides a more intuitive way to navigate to recently visited directories.

   <b>prevd</b> <b>-</b> <b>move</b> <b>backward</b> <b>through</b> <b>directory</b> <b>history</b>
   <b>Synopsis</b>
       <b>prevd</b> [<b>-l</b> | <b>--list</b>] [<u>POS</u>]

   <b>Description</b>
       <b>prevd</b>  moves  backwards  <u>POS</u>  positions  in  the  <u>history</u> <u>of</u> <u>visited</u> <u>directories</u>; if the beginning of the
       history has been hit, a warning is printed.

       If the <b>-l</b> or <b>--list</b> flag is specified, the current history is also displayed.

       Note that the <b>cd</b> command limits directory history to  the  25  most  recently  visited  directories.  The
       history is stored in the <b>dirprev</b> and <b>dirnext</b> variables which this command manipulates.

       The <b>-h</b> or <b>--help</b> option displays help about using this command.

   <b>Example</b>
          cd <a href="file:/usr/src">/usr/src</a>
          # Working directory is now <a href="file:/usr/src">/usr/src</a>

          cd /usr/src/fish-shell
          # Working directory is now /usr/src/fish-shell

          prevd
          # Working directory is now <a href="file:/usr/src">/usr/src</a>

          nextd
          # Working directory is now /usr/src/fish-shell

   <b>See</b> <b>Also</b>
       • the <u>cdh</u> command to display a prompt to quickly navigate the history

       • the <u>dirh</u> command to print the directory history

       • the <u>nextd</u> command to move forward

   <b>printf</b> <b>-</b> <b>display</b> <b>text</b> <b>according</b> <b>to</b> <b>a</b> <b>format</b> <b>string</b>
   <b>Synopsis</b>
       <b>printf</b> <u>FORMAT</u> [<u>ARGUMENT</u> ...]

   <b>Description</b>
       NOTE:  This  page  documents the fish builtin <b>printf</b>.  To see the documentation on any non-fish versions,
       use <b>command</b> <b>man</b> <b>printf</b>.

       <b>printf</b> uses the format string <u>FORMAT</u> to print the <u>ARGUMENT</u> arguments. This means  that  it  takes  format
       specifiers in the format string and replaces each with an argument.

       The  <u>FORMAT</u>  argument  is  re-used  as  many times as necessary to convert all of the given arguments. So
       <b>printf</b> <b>%s\n</b> <b>flounder</b> <b>catfish</b> <b>clownfish</b> <b>shark</b> will print four lines.

       Unlike <u>echo</u>, <b>printf</b> does not append a new line unless it is specified as part of the string.

       It doesn't support any options, so there is no need for a <b>--</b> separator, which makes it easier to use  for
       arbitrary input than <b>echo</b>. [1]

   <b>Format</b> <b>Specifiers</b>
       Valid format specifiers are taken from the C library function <b><a href="../man3/printf.3.html">printf</a>(3)</b>:

       • <b>%d</b> or <b>%i</b>: Argument will be used as decimal integer (signed or unsigned)

       • <b>%o</b>: An octal unsigned integer

       • <b>%u</b>: An unsigned decimal integer - this means negative numbers will wrap around

       • <b>%x</b> or <b>%X</b>: An unsigned hexadecimal integer

       • <b>%f</b>,  <b>%g</b>  or  <b>%G</b>:  A  floating-point  number.  <b>%f</b> defaults to 6 places after the decimal point (which is
         locale-dependent - e.g. in de_DE it will be a <b>,</b>). <b>%g</b> and <b>%G</b> will trim trailing  zeroes  and  switch  to
         scientific notation (like <b>%e</b>) if the numbers get small or large enough.

       • <b>%e</b> or <b>%E</b>: A floating-point number in scientific (XXXeYY) notation

       • <b>%s</b>: A string

       • <b>%b</b>: As a string, interpreting backslash escapes, except that octal escapes are of the form 0 or 0ooo.

       <b>%%</b> signifies a literal "%".

       Conversion  can  fail,  e.g. "102.234" can't losslessly convert to an integer, causing printf to print an
       error. If you are okay with losing information, silence errors with <b>2&gt;/dev/null</b>.

       A number between the <b>%</b> and the format letter specifies the width. The result  will  be  left-padded  with
       spaces.

   <b>Backslash</b> <b>Escapes</b>
       printf also knows a number of backslash escapes:

       • <b>\"</b> double quote

       • <b>\\</b> backslash

       • <b>\a</b> alert (bell)

       • <b>\b</b> backspace

       • <b>\c</b> produce no further output

       • <b>\e</b> escape

       • <b>\f</b> form feed

       • <b>\n</b> new line

       • <b>\r</b> carriage return

       • <b>\t</b> horizontal tab

       • <b>\v</b> vertical tab

       • <b>\ooo</b> octal number (ooo is 1 to 3 digits)

       • <b>\xhh</b> hexadecimal number (hhh is 1 to 2 digits)

       • <b>\uhhhh</b> 16-bit Unicode character (hhhh is 4 digits)

       • <b>\Uhhhhhhhh</b> 32-bit Unicode character (hhhhhhhh is 8 digits)

   <b>Errors</b> <b>and</b> <b>Return</b> <b>Status</b>
       If  the  given  argument  doesn't  work  for the given format (like when you try to convert a number like
       3.141592 to an integer), printf prints an error, to stderr. printf will then also  return  non-zero,  but
       will still try to print as much as it can.

       It will also return non-zero if no argument at all was given, in which case it will print nothing.

       This  printf  has  been imported from the printf in GNU Coreutils version 6.9. If you would like to use a
       newer version of printf, for example the one shipped with your OS, try <b>command</b> <b>printf</b>.

   <b>Example</b>
          printf '%s\t%s\n' flounder fish

       Will print "flounder    fish" (separated with a tab character), followed by a newline character. This  is
       useful  for  writing completions, as fish expects completion scripts to output the option followed by the
       description, separated with a tab character.

          printf '%s: %d' "Number of bananas in my pocket" 42

       Will print "Number of bananas in my pocket: 42", <u>without</u> a newline.

   <b>See</b> <b>Also</b>
       • the <u>echo</u> command, for simpler output

   <b>Footnotes</b>
       [1]  In fact, while fish's <b>echo</b> supports <b>--</b>, POSIX forbids it, so other implementations can't be used  if
            the input contains anything starting with <b>-</b>.

   <b>prompt_hostname</b> <b>-</b> <b>print</b> <b>the</b> <b>hostname,</b> <b>shortened</b> <b>for</b> <b>use</b> <b>in</b> <b>the</b> <b>prompt</b>
   <b>Synopsis</b>
       <b>prompt_hostname</b>

   <b>Description</b>
       <b>prompt_hostname</b> prints a shortened version the current hostname for use in the prompt. It will print just
       the first component of the hostname, everything up to the first dot.

   <b>Examples</b>
          function fish_prompt
              echo -n (whoami)@(prompt_hostname) (prompt_pwd) '$ '
          end

          # The machine's full hostname is foo.bar.com
          &gt;_ prompt_hostname
          foo

   <b>prompt_login</b> <b>-</b> <b>describe</b> <b>the</b> <b>login</b> <b>suitable</b> <b>for</b> <b>prompt</b>
   <b>Synopsis</b>
       <b>prompt_login</b>

   <b>Description</b>
       <b>prompt_login</b>  is  a  function  to  describe  the  current login. It will show the user, the host and also
       whether the shell is running in a chroot (currently Debian's <b>debian_chroot</b> file is supported).

   <b>Examples</b>
          function fish_prompt
              echo -n (prompt_login) (prompt_pwd) '$ '
          end

          &gt;_ prompt_login
          root@bananablaster

   <b>prompt_pwd</b> <b>-</b> <b>print</b> <b>pwd</b> <b>suitable</b> <b>for</b> <b>prompt</b>
   <b>Synopsis</b>
       <b>prompt_pwd</b>

   <b>Description</b>
       <b>prompt_pwd</b> is a function to print the current working directory in a way suitable for  prompts.  It  will
       replace  the  home  directory  with "~" and shorten every path component but the last to a default of one
       character.

       To   change   the   number   of   characters   per   path   component,   pass   <b>--dir-length=</b>   or    set
       <b>fish_prompt_pwd_dir_length</b>  to the number of characters. Setting it to 0 or an invalid value will disable
       shortening entirely. This defaults to 1.

       To keep some components unshortened, pass <b>--full-length-dirs=</b> or  set  <b>fish_prompt_pwd_full_dirs</b>  to  the
       number of components. This defaults to 1, keeping the last component.

       If any positional arguments are given, <b>prompt_pwd</b> shortens them instead of <u>PWD</u>.

   <b>Options</b>
       <b>-d</b> or <b>--dir-length</b> <u>MAX</u>
              Causes   the   components   to   be   shortened   to   <u>MAX</u>   characters   each.   This   overrides
              <b>fish_prompt_pwd_dir_length</b>.

       <b>-D</b> or <b>--full-length-dirs</b> <u>NUM</u>
              Keeps <u>NUM</u> components (counted from the right) as full length without  shortening.  This  overrides
              <b>fish_prompt_pwd_full_dirs</b>.

       <b>-h</b> or <b>--help</b>
              Displays help about using this command.

   <b>Examples</b>
          &gt;_ cd ~/
          &gt;_ echo $PWD
          /home/alfa

          &gt;_ prompt_pwd
          ~

          &gt;_ cd /tmp/banana/sausage/with/mustard
          &gt;_ prompt_pwd
          /t/b/s/w/mustard

          &gt;_ set -g fish_prompt_pwd_dir_length 3
          &gt;_ prompt_pwd
          /tmp/ban/sau/wit/mustard

          &gt;_ prompt_pwd --full-length-dirs=2 --dir-length=1
          /t/b/s/with/mustard

   <b>psub</b> <b>-</b> <b>perform</b> <b>process</b> <b>substitution</b>
   <b>Synopsis</b>
       <u>COMMAND1</u> ( <u>COMMAND2</u> | <b>psub</b> [<b>-F</b> | <b>--fifo</b>] [<b>-f</b> | <b>--file</b>] [(<b>-s</b> | <b>--suffix</b>) <u>SUFFIX</u>] )

   <b>Description</b>
       Some  shells  (e.g.,  ksh,  bash) feature a syntax that is a mix between command substitution and piping,
       called process substitution. It is used to send the output of a command into the  calling  command,  much
       like  command  substitution,  but  with  the  difference  that the output is not sent through commandline
       arguments but through a named pipe, with the filename of the named  pipe  sent  as  an  argument  to  the
       calling program. <b>psub</b> combined with a regular command substitution provides the same functionality.

       The following options are available:

       <b>-f</b> or <b>--file</b>
              Use  a  regular  file  instead  of a named pipe to communicate with the calling process. This will
              cause <b>psub</b> to be significantly slower when large  amounts  of  data  are  involved,  but  has  the
              advantage that the reading process can seek in the stream. This is the default.

       <b>-F</b> or <b>--fifo</b>
              Use a named pipe rather than a file. You should only use this if the command produces no more than
              8  KiB  of  output.  The  limit  on the amount of data a FIFO can buffer varies with the OS but is
              typically 8 KiB, 16 KiB or 64 KiB. If you use this option and the command on the left of the  psub
              pipeline produces more output a deadlock is likely to occur.

       <b>-s</b> or <b>--suffix</b> <u>SUFFIX</u>
              Append SUFFIX to the filename.

       <b>-h</b> or <b>--help</b>
              Displays help about using this command.

   <b>Example</b>
          diff (sort a.txt | psub) (sort b.txt | psub)
          # shows the difference between the sorted versions of files ``a.txt`` and ``b.txt``.

          source-highlight -f esc (cpp main.c | psub -f -s .c)
          # highlights ``main.c`` after preprocessing as a C source.

   <b>pushd</b> <b>-</b> <b>push</b> <b>directory</b> <b>to</b> <b>directory</b> <b>stack</b>
   <b>Synopsis</b>
       <b>pushd</b> <u>DIRECTORY</u>

   <b>Description</b>
       The  <b>pushd</b>  function  adds  <u>DIRECTORY</u>  to the top of the <u>directory</u> <u>stack</u> and makes it the current working
       directory. <u>popd</u> will pop it off and return to the original directory.

       Without arguments, it exchanges the top two directories in the stack.

       <b>pushd</b> <b>+NUMBER</b> rotates the stack counter-clockwise i.e. from bottom to top

       <b>pushd</b> <b>-NUMBER</b> rotates clockwise i.e. top to bottom.

       The <b>-h</b> or <b>--help</b> option displays help about using this command.

   <b>Example</b>
          cd <a href="file:~/dir1">~/dir1</a>
          pushd <a href="file:~/dir2">~/dir2</a>
          pushd <a href="file:~/dir3">~/dir3</a>
          # Working directory is now <a href="file:~/dir3">~/dir3</a>
          # Directory stack contains <a href="file:~/dir2">~/dir2</a> <a href="file:~/dir1">~/dir1</a>

          pushd <a href="file:/tmp">/tmp</a>
          # Working directory is now <a href="file:/tmp">/tmp</a>
          # Directory stack contains <a href="file:~/dir3">~/dir3</a> <a href="file:~/dir2">~/dir2</a> <a href="file:~/dir1">~/dir1</a>

          pushd +1
          # Working directory is now <a href="file:~/dir3">~/dir3</a>
          # Directory stack contains <a href="file:~/dir2">~/dir2</a> <a href="file:~/dir1">~/dir1</a> <a href="file:/tmp">/tmp</a>

          popd
          # Working directory is now <a href="file:~/dir2">~/dir2</a>
          # Directory stack contains <a href="file:~/dir1">~/dir1</a> <a href="file:/tmp">/tmp</a>

   <b>See</b> <b>Also</b>
       • the <u>dirs</u> command to print the directory stack

       • the <u>cdh</u> command which provides a more intuitive way to navigate to recently visited directories.

   <b>pwd</b> <b>-</b> <b>output</b> <b>the</b> <b>current</b> <b>working</b> <b>directory</b>
   <b>Synopsis</b>
       <b>pwd</b> [<b>-P</b> | <b>--physical</b>]
       <b>pwd</b> [<b>-L</b> | <b>--logical</b>]

   <b>Description</b>
       NOTE: This page documents the fish builtin <b>pwd</b>.  To see the documentation on any non-fish  versions,  use
       <b>command</b> <b>man</b> <b>pwd</b>.

       <b>pwd</b> outputs (prints) the current working directory.

       The following options are available:

       <b>-L</b> or <b>--logical</b>
              Output the logical working directory, without resolving symlinks (default behavior).

       <b>-P</b> or <b>--physical</b>
              Output the physical working directory, with symlinks resolved.

       <b>-h</b> or <b>--help</b>
              Displays help about using this command.

   <b>See</b> <b>Also</b>
       Navigate directories using the <u>directory</u> <u>history</u> or the <u>directory</u> <u>stack</u>

   <b>random</b> <b>-</b> <b>generate</b> <b>random</b> <b>number</b>
   <b>Synopsis</b>
       <b>random</b>
       <b>random</b> <u>SEED</u>
       <b>random</b> <u>START</u> <u>END</u>
       <b>random</b> <u>START</u> <u>STEP</u> <u>END</u>
       <b>random</b> <b>choice</b> [<u>ITEMS</u> ...]

   <b>Description</b>
       <b>random</b>  generates  a  pseudo-random integer from a uniform distribution. The range (inclusive) depends on
       the arguments.

       No arguments indicate a range of 0 to 32767 (inclusive).

       If one argument is specified, the internal engine will be seeded with the argument for future invocations
       of <b>random</b> and no output will be produced.

       Two arguments indicate a range from <u>START</u> to <u>END</u> (both <u>START</u> and <u>END</u> included).

       Three arguments indicate a range from <u>START</u> to <u>END</u> with a spacing of <u>STEP</u> between possible outputs.

       <b>random</b> <b>choice</b> will select one random item from the succeeding arguments.

       The <b>-h</b> or <b>--help</b> option displays help about using this command.

       Note that seeding the engine will NOT give the same result across different systems.

       You should not consider <b>random</b> cryptographically secure, or even statistically accurate.

   <b>Example</b>
       The following code will count down from a random even number between 10 and 20 to 1:

          for i in (seq (random 10 2 20) -1 1)
              echo $i
          end

       And this will open a random picture from any of the subdirectories:

          open (random choice **.jpg)

       Or, to only get even numbers from 2 to 20:

          random 2 2 20

       Or odd numbers from 1 to 3:

          random 1 2 3 # or 1 2 4

   <b>read</b> <b>-</b> <b>read</b> <b>line</b> <b>of</b> <b>input</b> <b>into</b> <b>variables</b>
   <b>Synopsis</b>
       <b>read</b> [<u>OPTIONS</u>] [<u>VARIABLE</u> ...]

   <b>Description</b>
       NOTE: This page documents the fish builtin <b>read</b>.  To see the documentation on any non-fish versions,  use
       <b>command</b> <b>man</b> <b>read</b>.

       <b>read</b>  reads  from standard input and stores the result in shell variables. In an alternative mode, it can
       also print to its own standard output, for example for use in command substitutions.

       By default, <b>read</b> reads a single line and splits it into variables on spaces  or  tabs.  Alternatively,  a
       null character or a maximum number of characters can be used to terminate the input, and other delimiters
       can be given.

       Unlike other shells, there is no default variable (such as <b>REPLY</b>) for storing the result - instead, it is
       printed on standard output.

       When  <b>read</b>  reaches  the  end-of-file  (EOF)  instead  of  the  terminator,  the exit status is set to 1.
       Otherwise, it is set to 0.

       If <b>read</b> sets a variable and you don't specify a scope, it will use the same rules that <u>set</u> <u>-</u> <u>display</u>  <u>and</u>
       <u>change</u>  <u>shell</u>  <u>variables</u>  does  -  if  the  variable  exists, it will use it (in the lowest scope). If it
       doesn't, it will use an unexported function-scoped variable.

       The following options, like the corresponding ones in <u>set</u> <u>-</u> <u>display</u> <u>and</u> <u>change</u> <u>shell</u>  <u>variables</u>,  control
       variable scope or attributes:

       <b>-U</b> or <b>--universal</b>
              Sets  a  universal  variable.   The  variable will be immediately available to all the user's <b>fish</b>
              instances on the machine, and will be persisted across restarts of the shell.

       <b>-f</b> or <b>--function</b>
              Sets a variable scoped to the executing function.  It is erased when the function ends.

       <b>-l</b> or <b>--local</b>
              Sets a locally-scoped variable in this block.  It is erased when the block  ends.   Outside  of  a
              block, this is the same as <b>--function</b>.

       <b>-g</b> or <b>--global</b>
              Sets  a  globally-scoped variable.  Global variables are available to all functions running in the
              same shell.  They can be modified or erased.

       <b>-u</b> or <b>--unexport</b>
              Prevents the variables from being exported to child processes (default behaviour).

       <b>-x</b> or <b>--export</b>
              Exports the variables to child processes.

       The following options control the interactive mode:

       <b>-c</b> <u>CMD</u> or <b>--command</b> <u>CMD</u>
              Sets the initial string in the interactive mode command buffer to <u>CMD</u>.

       <b>-s</b> or <b>--silent</b>
              Masks characters written to the terminal, replacing  them  with  asterisks.  This  is  useful  for
              reading things like passwords or other sensitive information.

       <b>-p</b> or <b>--prompt</b> <u>PROMPT_CMD</u>
              Uses  the  output  of  the  shell  command  <u>PROMPT_CMD</u> as the prompt for the interactive mode. The
              default prompt command is <b>set_color</b> <b>green;</b> <b>echo</b> <b>-n</b> <b>read;</b> <b>set_color</b> <b>normal;</b> <b>echo</b> <b>-n</b> <b>"&gt;</b> <b>"</b>

       <b>-P</b> or <b>--prompt-str</b> <u>PROMPT_STR</u>
              Uses the literal <u>PROMPT_STR</u> as the prompt for the interactive mode.

       <b>-R</b> or <b>--right-prompt</b> <u>RIGHT_PROMPT_CMD</u>
              Uses the output of the shell command <u>RIGHT_PROMPT_CMD</u> as the  right  prompt  for  the  interactive
              mode. There is no default right prompt command.

       <b>-S</b> or <b>--shell</b>
              Enables  syntax  highlighting,  tab  completions  and  command  termination  suitable for entering
              shellscript code in the interactive mode. NOTE: Prior to fish 3.0, the short opt for  <b>--shell</b>  was
              <b>-s</b>, but it has been changed for compatibility with bash's <b>-s</b> short opt for <b>--silent</b>.

       The following options control how much is read and how it is stored:

       <b>-d</b> or <b>--delimiter</b> <u>DELIMITER</u>
              Splits  on  <u>DELIMITER</u>.  <u>DELIMITER</u>  will  be  used  as  an  entire string to split on, not a set of
              characters.

       <b>-n</b> or <b>--nchars</b> <u>NCHARS</u>
              Makes <b>read</b> return after reading <u>NCHARS</u> characters or the end of the line, whichever comes first.

       <b>-t</b> -or <b>--tokenize</b>
              Causes read to split the input into variables by the shell's tokenization  rules.  This  means  it
              will  honor  quotes  and  escaping.  This  option  is of course incompatible with other options to
              control splitting like <b>--delimiter</b> and does not honor <u>IFS</u> (like fish's tokenizer).  It  saves  the
              tokens  in the manner they'd be passed to commands on the commandline, so e.g. <b>a\</b> <b>b</b> is stored as <b>a</b>
              <b>b</b>. Note that currently it leaves command substitutions intact along with the parentheses.

       <b>-a</b> or <b>--list</b>
              Stores the result as a list in a single variable. This option is also  available  as  <b>--array</b>  for
              backwards compatibility.

       <b>-z</b> or <b>--null</b>
              Marks  the  end  of  the  line  with  the  NUL  character,  instead of newline. This also disables
              interactive mode.

       <b>-L</b> or <b>--line</b>
              Reads each line into successive variables, and stops after each variable  has  been  filled.  This
              cannot be combined with the <b>--delimiter</b> option.

       Without  the <b>--line</b> option, <b>read</b> reads a single line of input from standard input, breaks it into tokens,
       and then assigns one token to each variable specified  in  <u>VARIABLES</u>.  If  there  are  more  tokens  than
       variables, the complete remainder is assigned to the last variable.

       If  no option to determine how to split like <b>--delimiter</b>, <b>--line</b> or <b>--tokenize</b> is given, the variable <b>IFS</b>
       is used as a list of characters to split on. Relying on the use of <b>IFS</b> is deprecated and  this  behaviour
       will  be removed in future versions. The default value of <b>IFS</b> contains space, tab and newline characters.
       As a special case, if <b>IFS</b> is set to the empty string,  each  character  of  the  input  is  considered  a
       separate token.

       With  the  <b>--line</b>  option,  <b>read</b>  reads  a line of input from standard input into each provided variable,
       stopping when each variable has been filled. The line is not tokenized.

       If no variable names are provided, <b>read</b> enters a special  case  that  simply  provides  redirection  from
       standard  input to standard output, useful for command substitution. For instance, the fish shell command
       below can be used to read a password from the console instead of hardcoding it  in  the  command  itself,
       which prevents it from showing up in fish's history:

          mysql -uuser -p(read)

       When  running  in  this mode, <b>read</b> does not split the input in any way and text is redirected to standard
       output without any further processing or manipulation.

       If <b>-l</b> or <b>--list</b> is provided, only one variable name is allowed and the tokens are stored  as  a  list  in
       this variable.

       In  order to protect the shell from consuming too many system resources, <b>read</b> will only consume a maximum
       of 100 MiB (104857600 bytes); if the terminator is not reached before this limit then <u>VARIABLE</u> is set  to
       empty  and the exit status is set to 122. This limit can be altered with the <u>fish_read_limit</u> variable. If
       set to 0 (zero), the limit is removed.

   <b>Example</b>
       <b>read</b> has a few separate uses.

       The following code stores the value 'hello' in the shell variable <b>foo</b>.

          echo hello | read foo

       The <u>while</u> command is a neat way to handle command output line-by-line:

          printf '%s\n' line1 line2 line3 line4 | while read -l foo
                            echo "This is another line: $foo"
                        end

       Delimiters given via "-d" are taken as one string:

          echo a==b==c | read -d == -l a b c
          echo $a # a
          echo $b # b
          echo $c # c

       <b>--tokenize</b> honors quotes and escaping like the shell's argument passing:

          echo 'a\ b' | read -t first second
          echo $first # outputs "a b", $second is empty

          echo 'a"foo bar"b (command echo wurst)*" "{a,b}' | read -lt -l a b c
          echo $a # outputs 'afoo barb' (without the quotes)
          echo $b # outputs '(command echo wurst)* {a,b}' (without the quotes)
          echo $c # nothing

       For an example on interactive use, see <u>Querying</u> <u>for</u> <u>user</u> <u>input</u>.

   <b>realpath</b> <b>-</b> <b>convert</b> <b>a</b> <b>path</b> <b>to</b> <b>an</b> <b>absolute</b> <b>path</b> <b>without</b> <b>symlinks</b>
   <b>Synopsis</b>
       <b>realpath</b> [<u>OPTIONS</u>] <u>PATH</u>

   <b>Description</b>
       NOTE: This page documents the fish builtin <b>realpath</b>.  To see the documentation on any non-fish  versions,
       use <b>command</b> <b>man</b> <b>realpath</b>.

       <b>realpath</b>  follows  all  symbolic  links  encountered  for  the  provided <u>PATH</u>, printing the absolute path
       resolved. <u>fish</u> provides a <b>realpath</b>-alike builtin intended to enrich systems  where  no  such  command  is
       installed by default.

       If  a  <b>realpath</b>  command  exists,  that will be preferred.  <b>builtin</b> <b>realpath</b> will explicitly use the fish
       implementation of <b>realpath</b>.

       The following options are available:

       <b>-s</b> or <b>--no-symlinks</b>
              Don't resolve symlinks, only make paths absolute, squash  multiple  slashes  and  remove  trailing
              slashes.

       <b>-h</b> or <b>--help</b>
              Displays help about using this command.

   <b>return</b> <b>-</b> <b>stop</b> <b>the</b> <b>current</b> <b>inner</b> <b>function</b>
   <b>Synopsis</b>
       <b>return</b> [<u>N</u>]

   <b>Description</b>
       <b>return</b>  halts  a  currently  running function.  The exit status is set to <u>N</u> if it is given.  If <b>return</b> is
       invoked outside of a function or dot script it is equivalent to exit.

       It is often added inside of a conditional block such  as  an  <u>if</u>  statement  or  a  <u>switch</u>  statement  to
       conditionally  stop  the  executing function and return to the caller; it can also be used to specify the
       exit status of a function.

       If at the top level of a script, it exits with the given status, like <u>exit</u>.  If at the top  level  in  an
       interactive session, it will set <u>status</u>, but not exit the shell.

       The <b>-h</b> or <b>--help</b> option displays help about using this command.

   <b>Example</b>
       An implementation of the false command as a fish function:

          function false
              return 1
          end

   <b>set</b> <b>-</b> <b>display</b> <b>and</b> <b>change</b> <b>shell</b> <b>variables</b>
   <b>Synopsis</b>
       <b>set</b>
       <b>set</b> (<b>-f</b> | <b>--function</b>) (<b>-l</b> | <b>--local</b>) (<b>-g</b> | <b>--global</b>) (<b>-U</b> | <b>--universal</b>) [<b>--no-event</b>]
       <b>set</b> [<b>-Uflg</b>] <u>NAME</u> [<u>VALUE</u> ...]
       <b>set</b> [<b>-Uflg</b>] <u>NAME</u>[[<u>INDEX</u> ...]] [<u>VALUE</u> ...]
       <b>set</b> (<b>-x</b> | <b>--export</b>) (<b>-u</b> | <b>--unexport</b>) [<b>-Uflg</b>] <u>NAME</u> [<u>VALUE</u> ...]
       <b>set</b> (<b>-a</b> | <b>--append</b>) (<b>-p</b> | <b>--prepend</b>) [<b>-Uflg</b>] <u>NAME</u> <u>VALUE</u> ...
       <b>set</b> (<b>-q</b> | <b>--query</b>) (<b>-e</b> | <b>--erase</b>) [<b>-Uflg</b>] [<u>NAME</u>][[<u>INDEX</u>]] ...]
       <b>set</b> (<b>-S</b> | <b>--show</b>) (<b>-L</b> | <b>--long</b>) [<u>NAME</u> ...]

   <b>Description</b>
       <b>set</b> manipulates <u>shell</u> <u>variables</u>.

       If  both  <u>NAME</u>  and  <u>VALUE</u>  are provided, <b>set</b> assigns any values to variable <u>NAME</u>.  Variables in fish are
       <u>lists</u>, multiple values are allowed.  One or more variable <u>INDEX</u> can be specified  including  ranges  (not
       for all options.)

       If no <u>VALUE</u> is given, the variable will be set to the empty list.

       If  <b>set</b>  is ran without arguments, it prints the names and values of all shell variables in sorted order.
       Passing <u>scope</u> or <u>export</u> flags allows filtering this to only matching variables, so <b>set</b> <b>--local</b> would only
       show local variables.

       With <b>--erase</b> and optionally a scope flag <b>set</b> will erase the matching variable (or the  variable  of  that
       name in the smallest possible scope).

       With <b>--show</b>, <b>set</b> will describe the given variable names, explaining how they have been defined - in which
       scope with which values and options.

       The following options control variable scope:

       <b>-U</b> or <b>--universal</b>
              Sets  a  universal  variable.   The  variable will be immediately available to all the user's <b>fish</b>
              instances on the machine, and will be persisted across restarts of the shell.

       <b>-f</b> or <b>--function</b>
              Sets a variable scoped to the executing function.  It is erased when the function ends.

       <b>-l</b> or <b>--local</b>
              Sets a locally-scoped variable in this block.  It is erased when the block  ends.   Outside  of  a
              block, this is the same as <b>--function</b>.

       <b>-g</b> or <b>--global</b>
              Sets  a  globally-scoped variable.  Global variables are available to all functions running in the
              same shell.  They can be modified or erased.

       These options modify how variables operate:

       <b>--export</b> or <b>-x</b>
              Causes the specified shell variable to be exported to child processes (making it  an  "environment
              variable").

       <b>--unexport</b> or <b>-u</b>
              Causes the specified shell variable to NOT be exported to child processes.

       <b>--path</b> Treat  specified  variable  as  a  <u>path</u> <u>variable</u>; variable will be split on colons (<b>:</b>) and will be
              displayed joined by colons when quoted (<b>echo</b> <b>"$PATH"</b>) or exported.

       <b>--unpath</b>
              Causes variable to no longer be treated as a <u>path</u> <u>variable</u>.  Note: variables ending in "PATH"  are
              automatically path variables.

       Further options:

       <b>-a</b> or <b>--append</b> <u>NAME</u> <u>VALUE</u> ...
              Appends <u>VALUES</u> to the current set of values for variable <b>NAME</b>.  Can be used with <b>--prepend</b> to both
              append and prepend at the same time.  This cannot be used when assigning to a variable slice.

       <b>-p</b> or <b>--prepend</b> <u>NAME</u> <u>VALUE</u> ...
              Prepends <u>VALUES</u> to the current set of values for variable <b>NAME</b>.  This can be used with <b>--append</b> to
              both append and prepend at the same time.  This cannot be used when assigning to a variable slice.

       <b>-e</b> or <b>--erase</b> <u>NAME</u>[<u>INDEX</u>]
              Causes the specified shell variables to be erased.  Supports erasing from multiple scopes at once.
              Individual items in a variable at <u>INDEX</u> in brackets can be specified.

       <b>-q</b> or <b>--query</b> <u>NAME</u>[<u>INDEX</u>]
              Test  if  the  specified  variable names are defined.  If an <u>INDEX</u> is provided, check for items at
              that slot.  Does not output anything, but the shell status is  set  to  the  number  of  variables
              specified  that  were  not  defined,  up  to  a maximum of 255.  If no variable was given, it also
              returns 255.

       <b>-n</b> or <b>--names</b>
              List only the names of all defined variables, not their value.  The names  are  guaranteed  to  be
              sorted.

       <b>-S</b> or <b>--show</b>
              Shows  information  about  the given variables.  If no variable names are given then all variables
              are shown in sorted order.  It shows the scopes the given variables are set  in,  along  with  the
              values in each and whether or not it is exported.  No other flags can be used with this option.

       <b>--no-event</b>
              Don't  generate  a  variable  change event when setting or erasing a variable.  We recommend using
              this carefully because the event handlers are usually set up for a reason.  Possible uses  include
              modifying the variable inside a variable handler.

       <b>-L</b> or <b>--long</b>
              Do not abbreviate long values when printing set variables.

       <b>-h</b> or <b>--help</b>
              Displays help about using this command.

       If a variable is set to more than one value, the variable will be a list with the specified elements.  If
       a variable is set to zero elements, it will become a list with zero elements.

       If  the  variable  name  is  one  or  more  list  elements, such as <b>PATH[1</b> <b>3</b> <b>7]</b>, only those list elements
       specified will be changed.  If you specify a negative  index  when  expanding  or  assigning  to  a  list
       variable,  the  index  will  be calculated from the end of the list.  For example, the index -1 means the
       last index of a list.

       The scoping rules when creating or updating a variable are:

       • Variables may be explicitly set as universal, global, function, or local.  Variables with the same name
         but in a different scope will not be changed.

       • If the scope of a variable is not explicitly set <u>but</u> <u>a</u>  <u>variable</u>  <u>by</u>  <u>that</u>  <u>name</u>  <u>has</u>  <u>been</u>  <u>previously</u>
         <u>defined</u>,  the  scope  of the existing variable is used.  If the variable is already defined in multiple
         scopes, the variable with the narrowest scope will be updated.

       • If a variable's scope is not explicitly set and there  is  no  existing  variable  by  that  name,  the
         variable will be local to the currently executing function.  Note that this is different from using the
         <b>-l</b>  or  <b>--local</b>  flag,  in  which case the variable will be local to the most-inner currently executing
         block, while without them the variable will be local to the function as a whole.   If  no  function  is
         executing, the variable will be set in the global scope.

       The  exporting  rules  when  creating  or  updating  a  variable  are  identical to the scoping rules for
       variables:

       • Variables may be explicitly set to either exported or not exported.  When an exported variable goes out
         of scope, it is unexported.

       • If a variable is not explicitly set to be exported or not exported, but has  been  previously  defined,
         the previous exporting rule for the variable is kept.

       • If  a  variable  is  not  explicitly  set to be either exported or unexported and has never before been
         defined, the variable will not be exported.

       In query mode, the scope to be examined can be specified.  Whether the variable has to be a path variable
       or exported can also be specified.

       In erase mode, if variable indices are specified, only the specified slices of the list variable will  be
       erased.

       <b>set</b>  requires  all  options  to come before any other arguments.  For example, <b>set</b> <b>flags</b> <b>-l</b> will have the
       effect of setting the value of the variable <b>flags</b> to '-l', not making the variable local.

   <b>Exit</b> <b>status</b>
       In assignment mode, <b>set</b> does not modify the exit status,  but  passes  along  whatever  <u>status</u>  was  set,
       including  by  command  substitutions.  This allows capturing the output and exit status of a subcommand,
       like in <b>if</b> <b>set</b> <b>output</b> <b>(command)</b>.

       In query mode, the exit status is the number of variables that were not found.

       In erase mode, <b>set</b> exits with a zero exit status in case of success, with a non-zero exit status  if  the
       commandline was invalid, if any of the variables did not exist or was a <u>special</u> <u>read-only</u> <u>variable</u>.

   <b>Examples</b>
       Print all global, exported variables:

          &gt; set -gx

       Set the value of the variable _$foo_ to be 'hi'.:

          &gt; set foo hi

       Append the value "there" to the variable $foo:

          &gt; set -a foo there

       Remove _$smurf_ from the scope:

          &gt; set -e smurf

       Remove _$smurf_ from the global and universal scopes:

          &gt; set -e -Ug smurf

       Change the fourth element of the $PATH list to <a href="file:~/bin">~/bin</a>:

          &gt; set PATH[4] <a href="file:~/bin">~/bin</a>

       Outputs the path to Python if <b>type</b> <b>-p</b> returns true:

          if set python_path (type -p python)
              echo "Python is at $python_path"
          end

       Setting a variable doesn't modify $status; a command substitution still will, though:

          &gt; echo $status
          0
          &gt; false
          &gt; set foo bar
          &gt; echo $status
          1
          &gt; true
          &gt; set foo banana (false)
          &gt; echo $status
          1

       <b>VAR=VALUE</b>  <b>command</b>  sets  a  variable  for  just  one  command, like other shells.  This runs fish with a
       temporary home directory:

          &gt; HOME=(mktemp -d) fish

       (which is essentially the same as):

          &gt; begin; set -lx HOME (mktemp -d); fish; end

   <b>Notes</b>
       • Fish versions prior to 3.0 supported the syntax <b>set</b> <b>PATH[1]</b> <b>PATH[4]</b> <b><a href="file:/bin">/bin</a></b> <b><a href="file:/sbin">/sbin</a></b>, which worked  like  <b>set</b>
         <b>PATH[1</b> <b>4]</b> <b><a href="file:/bin">/bin</a></b> <b><a href="file:/sbin">/sbin</a></b>.

   <b>set_color</b> <b>-</b> <b>set</b> <b>the</b> <b>terminal</b> <b>color</b>
   <b>Synopsis</b>
       <b>set_color</b> [<u>OPTIONS</u>] <u>VALUE</u>

   <b>Description</b>
       <b>set_color</b> is used to control the color and styling of text in the terminal. <u>VALUE</u> describes that styling.
       <u>VALUE</u>  can  be  a  reserved  color name like <b>red</b> or an RGB color value given as 3 or 6 hexadecimal digits
       ("F27" or "FF2277"). A special keyword <b>normal</b> resets text formatting to terminal defaults.

       Valid colors include:

          • <b>black</b>, <b>red</b>, <b>green</b>, <b>yellow</b>, <b>blue</b>, <b>magenta</b>, <b>cyan</b>, <b>white</b>

          • <b>brblack</b>, <b>brred</b>, <b>brgreen</b>, <b>bryellow</b>, <b>brblue</b>, <b>brmagenta</b>, <b>brcyan</b>, <b>brwhite</b>

       The <u>br</u>- (as in 'bright') forms are full-brightness variants of the 8 standard-brightness colors  on  many
       terminals. <b>brblack</b> has higher brightness than <b>black</b> - towards gray.

       An  RGB  value  with  three  or  six  hex digits, such as A0FF33 or f2f can be used. Fish will choose the
       closest supported color. A three digit  value  is  equivalent  to  specifying  each  digit  twice;  e.g.,
       <b>set_color</b>  <b>2BC</b>  is  the  same  as  <b>set_color</b> <b>22BBCC</b>. Hexadecimal RGB values can be in lower or uppercase.
       Depending on the capabilities of your terminal (and the level of support <b>set_color</b> has for it) the actual
       color may be approximated by a nearby matching reserved color name or <b>set_color</b> may not have an effect on
       color.

       A second color may be given as a desired fallback color.  e.g.  <b>set_color</b>  <b>124212</b>  <b>brblue</b>  will  instruct
       set_color  to  use  <u>brblue</u>  if a terminal is not capable of the exact shade of grey desired. This is very
       useful when an 8 or 16 color terminal might otherwise not use a color.

       The following options are available:

       <b>-b</b> or <b>--background</b> <u>COLOR</u>
              Sets the background color.

       <b>-c</b> or <b>--print-colors</b>
              Prints the given colors or a colored list of the 16 named colors.

       <b>-o</b> or <b>--bold</b>
              Sets bold mode.

       <b>-d</b> or <b>--dim</b>
              Sets dim mode.

       <b>-i</b> or <b>--italics</b>
              Sets italics mode.

       <b>-r</b> or <b>--reverse</b>
              Sets reverse mode.

       <b>-u</b> or <b>--underline</b>
              Sets underlined mode.

       <b>-h</b> or <b>--help</b>
              Displays help about using this command.

       Using the <b>normal</b> keyword will reset foreground, background, and all formatting back to default.

   <b>Notes</b>
       1. Using the <b>normal</b> keyword will reset both background and foreground colors to whatever is  the  default
          for the terminal.

       2. Setting the background color only affects subsequently written characters. Fish provides no way to set
          the  background  color  for  the  entire terminal window. Configuring the window background color (and
          other attributes such as its opacity) has to be done using whatever mechanisms the terminal  provides.
          Look for a config option.

       3. Some terminals use the <b>--bold</b> escape sequence to switch to a brighter color set rather than increasing
          the weight of text.

       4. <b>set_color</b>  works  by  printing  sequences  of  characters  to  standard  output.  If  used  in command
          substitution or a pipe, these characters will also be captured. This may  or  may  not  be  desirable.
          Checking  the  exit  status  of  <b>isatty</b>  <b>stdout</b>  before using <b>set_color</b> can be useful to decide not to
          colorize output in a script.

   <b>Examples</b>
          set_color red; echo "Roses are red"
          set_color blue; echo "Violets are blue"
          set_color 62A; echo "Eggplants are dark purple"
          set_color normal; echo "Normal is nice" # Resets the background too

   <b>Terminal</b> <b>Capability</b> <b>Detection</b>
       Fish uses some heuristics to determine what colors a terminal supports to avoid sending sequences that it
       won't understand.

       In particular it will:

       • Enable 256 colors if <u>TERM</u> contains "xterm", except for known exceptions (like MacOS 10.6 Terminal.app)

       • Enable 24-bit ("true-color") even if the $TERM entry only reports  256  colors.  This  includes  modern
         xterm, VTE-based terminals like Gnome Terminal, Konsole and iTerm2.

       • Detect support for italics, dim, reverse and other modes.

       If terminfo reports 256 color support for a terminal, 256 color support will always be enabled.

       To  force  true-color  support  on  or  off,  set  <u>fish_term24bit</u>  to  "1"  for on and 0 for off - <b>set</b> <b>-g</b>
       <b>fish_term24bit</b> <b>1</b>.

       To debug color palette problems, <b>tput</b> <b>colors</b> may be useful to see the number of colors in terminfo for  a
       terminal.  Fish launched as <b>fish</b> <b>-d</b> <b>term_support</b> will include diagnostic messages that indicate the color
       support mode in use.

       The <b>set_color</b> command uses the terminfo database to look up how to change  terminal  colors  on  whatever
       terminal  is  in use. Some systems have old and incomplete terminfo databases, and lack color information
       for  terminals  that  support  it.  Fish  assumes  that  all   terminals   can   use   the   <u>ANSI</u>   <u>X3.64</u>
       &lt;<b>https://en.wikipedia.org/wiki/ANSI_escape_code</b>&gt;  escape sequences if the terminfo definition indicates a
       color below 16 is not supported.

   <b>source</b> <b>-</b> <b>evaluate</b> <b>contents</b> <b>of</b> <b>file</b>
   <b>Synopsis</b>
       <b>source</b> <u>FILE</u> [<u>ARGUMENTS</u> ...]
       <u>SOMECOMMAND</u> | <b>source</b>
       <b>.</b> <u>FILE</u> [<u>ARGUMENTS</u> ...]

   <b>Description</b>
       <b>source</b> evaluates the commands of the specified <u>FILE</u> in the current shell as a new block of code. This  is
       different  from starting a new process to perform the commands (i.e. <b>fish</b> <b>&lt;</b> <b>FILE</b>) since the commands will
       be evaluated by the current shell, which means that changes in shell variables will  affect  the  current
       shell.  If  additional  arguments  are specified after the file name, they will be inserted into the <u>argv</u>
       variable. The <u>argv</u> variable will not include the name of the sourced file.

       fish will search the working directory to resolve relative paths but will not search <u>PATH</u> .

       If no file is specified and a file or pipeline is connected to standard input, or if the file name  <b>-</b>  is
       used,  <b>source</b>  will  read from standard input. If no file is specified and there is no redirected file or
       pipeline on standard input, an error will be printed.

       The exit status of <b>source</b> is the exit status of the last job to execute. If something  goes  wrong  while
       opening or reading the file, <b>source</b> exits with a non-zero status.

       Some  other  shells  only support the <b>.</b> alias (a single period).  The use of <b>.</b> is deprecated in favour of
       <b>source</b>, and <b>.</b> will be removed in a future version of fish.

       <b>source</b> creates a new <u>local</u> <u>scope</u>; <b>set</b> <b>--local</b> within a sourced block will not  affect  variables  in  the
       enclosing scope.

       The <b>-h</b> or <b>--help</b> option displays help about using this command.

   <b>Example</b>
          source <a href="file:~/.config/fish/config.fish">~/.config/fish/config.fish</a>
          # Causes fish to re-read its initialization file.

   <b>Caveats</b>
       In  fish  versions prior to 2.3.0, the <u>argv</u> variable would have a single element (the name of the sourced
       file) if no arguments are present. Otherwise, it would contain arguments without the name of the  sourced
       file. That behavior was very confusing and unlike other shells such as bash and zsh.

   <b>status</b> <b>-</b> <b>query</b> <b>fish</b> <b>runtime</b> <b>information</b>
   <b>Synopsis</b>
       <b>status</b>
       <b>status</b> <b>is-login</b>
       <b>status</b> <b>is-interactive</b>
       <b>status</b> <b>is-interactive-read</b>
       <b>status</b> <b>is-block</b>
       <b>status</b> <b>is-breakpoint</b>
       <b>status</b> <b>is-command-substitution</b>
       <b>status</b> <b>is-no-job-control</b>
       <b>status</b> <b>is-full-job-control</b>
       <b>status</b> <b>is-interactive-job-control</b>
       <b>status</b> <b>current-command</b>
       <b>status</b> <b>current-commandline</b>
       <b>status</b> <b>filename</b>
       <b>status</b> <b>basename</b>
       <b>status</b> <b>dirname</b>
       <b>status</b> <b>fish-path</b>
       <b>status</b> <b>function</b>
       <b>status</b> <b>line-number</b>
       <b>status</b> <b>stack-trace</b>
       <b>status</b> <b>job-control</b> <u>CONTROL_TYPE</u>
       <b>status</b> <b>features</b>
       <b>status</b> <b>test-feature</b> <u>FEATURE</u>
       <b>status</b> <b>buildinfo</b>

   <b>Description</b>
       With no arguments, <b>status</b> displays a summary of the current login and job control status of the shell.

       The following operations (subcommands) are available:

       <b>is-command-substitution</b>, <b>-c</b> or <b>--is-command-substitution</b>
              Returns 0 if fish is currently executing a command substitution.

       <b>is-block</b>, <b>-b</b> or <b>--is-block</b>
              Returns 0 if fish is currently executing a block of code.

       <b>is-breakpoint</b>
              Returns  0  if fish is currently showing a prompt in the context of a <u>breakpoint</u> command. See also
              the <u>fish_breakpoint_prompt</u> function.

       <b>is-interactive</b>, <b>-i</b> or <b>--is-interactive</b>
              Returns 0 if fish is interactive - that is, connected to a keyboard.

       <b>is-interactive-read</b> or <b>--is-interactive-read</b>
              Returns 0 if fish is running an interactive <u>read</u> builtin which is connected to a keyboard.

       <b>is-login</b>, <b>-l</b> or <b>--is-login</b>
              Returns 0 if fish is a login shell - that is, if fish should perform login tasks such  as  setting
              up <u>PATH</u>.

       <b>is-full-job-control</b> or <b>--is-full-job-control</b>
              Returns 0 if full job control is enabled.

       <b>is-interactive-job-control</b> or <b>--is-interactive-job-control</b>
              Returns 0 if interactive job control is enabled.

       <b>is-no-job-control</b> or <b>--is-no-job-control</b>
              Returns 0 if no job control is enabled.

       <b>current-command</b>
              Prints the name of the currently-running function or command, like the deprecated <b>_</b> variable.

       <b>current-commandline</b>
              Prints the entirety of the currently-running commandline, inclusive of all jobs and operators.

       <b>filename</b>, <b>current-filename</b>, <b>-f</b> or <b>--current-filename</b>
              Prints  the  filename  of  the  currently-running  script.  If the current script was called via a
              symlink, this will return the symlink. If the current script was received by piping  into  <u>source</u>,
              then this will return <b>-</b>.

       <b>basename</b>
              Prints just the filename of the running script, without any path components before.

       <b>dirname</b>
              Prints  just  the  path  to  the  running  script, without the actual filename itself. This can be
              relative to <u>PWD</u> (including just "."), depending on how the script was called. This is the same  as
              passing  the  filename  to  <b><a href="../man3/dirname.3.html">dirname</a>(3)</b>.  It's useful if you want to use other files in the current
              script's directory or similar.

       <b>fish-path</b>
              Prints the absolute path to the currently executing  instance  of  fish.  This  is  a  best-effort
              attempt and the exact output is down to what the platform gives fish. In some cases you might only
              get "fish".

       <b>function</b> or <b>current-function</b>
              Prints  the  name of the currently called function if able, when missing displays "Not a function"
              (or equivalent translated string).

       <b>line-number</b>, <b>current-line-number</b>, <b>-n</b> or <b>--current-line-number</b>
              Prints the line number of the currently running script.

       <b>stack-trace</b>, <b>print-stack-trace</b>, <b>-t</b> or <b>--print-stack-trace</b>
              Prints a stack trace of all function calls on the call stack.

       <b>job-control</b>, <b>-j</b> or <b>--job-control</b> <u>CONTROL_TYPE</u>
              Sets the job control type to <u>CONTROL_TYPE</u>, which can be <b>none</b>, <b>full</b>, or <b>interactive</b>.

       <b>features</b>
              Lists all available feature flags.

       <b>test-feature</b> <u>FEATURE</u>
              Returns 0 when FEATURE is enabled, 1 if it is disabled, and 2 if it is not recognized.

       <b>buildinfo</b>
              This prints information on how fish was build - which architecture, which build system or  profile
              was used, etc.  This is mainly useful for debugging.

   <b>Notes</b>
       For  backwards  compatibility  most  subcommands  can  also  be  specified as a long or short option. For
       example, rather than <b>status</b> <b>is-login</b> you can type <b>status</b> <b>--is-login</b>. The flag forms  are  deprecated  and
       may be removed in a future release (but not before fish 4.0).

       You can only specify one subcommand per invocation even if you use the flag form of the subcommand.

   <b>string</b> <b>-</b> <b>manipulate</b> <b>strings</b>
   <b>Synopsis</b>
       <b>string</b> <b>collect</b> [<b>-a</b> | <b>--allow-empty</b>] [<b>-N</b> | <b>--no-trim-newlines</b>] [<u>STRING</u> ...]
       <b>string</b> <b>escape</b> [<b>-n</b> | <b>--no-quoted</b>] [<b>--style=</b>] [<u>STRING</u> ...]
       <b>string</b> <b>join</b> [<b>-q</b> | <b>--quiet</b>] [<b>-n</b> | <b>--no-empty</b>] <u>SEP</u> [<u>STRING</u> ...]
       <b>string</b> <b>join0</b> [<b>-q</b> | <b>--quiet</b>] [<u>STRING</u> ...]
       <b>string</b> <b>length</b> [<b>-q</b> | <b>--quiet</b>] [<u>STRING</u> ...]
       <b>string</b> <b>lower</b> [<b>-q</b> | <b>--quiet</b>] [<u>STRING</u> ...]
       <b>string</b> <b>match</b> [<b>-a</b> | <b>--all</b>] [<b>-e</b> | <b>--entire</b>] [<b>-i</b> | <b>--ignore-case</b>]
                    [<b>-g</b> | <b>--groups-only</b>] [<b>-r</b> | <b>--regex</b>] [<b>-n</b> | <b>--index</b>]
                    [<b>-q</b> | <b>--quiet</b>] [<b>-v</b> | <b>--invert</b>]
                    <u>PATTERN</u> [<u>STRING</u> ...]
       <b>string</b> <b>pad</b> [<b>-r</b> | <b>--right</b>] [(<b>-c</b> | <b>--char</b>) <u>CHAR</u>] [(<b>-w</b> | <b>--width</b>) <u>INTEGER</u>]
                  [<u>STRING</u> ...]
       <b>string</b> <b>repeat</b> [(<b>-n</b> | <b>--count</b>) <u>COUNT</u>] [(<b>-m</b> | <b>--max</b>) <u>MAX</u>] [<b>-N</b> | <b>--no-newline</b>]
                     [<b>-q</b> | <b>--quiet</b>] [<u>STRING</u> ...]
       <b>string</b> <b>repeat</b> [<b>-N</b> | <b>--no-newline</b>] [<b>-q</b> | <b>--quiet</b>] <u>COUNT</u> [<u>STRING</u> ...]
       <b>string</b> <b>replace</b> [<b>-a</b> | <b>--all</b>] [<b>-f</b> | <b>--filter</b>] [<b>-i</b> | <b>--ignore-case</b>]
                      [<b>-r</b> | <b>--regex</b>] [<b>-q</b> | <b>--quiet</b>] <u>PATTERN</u> <u>REPLACE</u> [<u>STRING</u> ...]
       <b>string</b> <b>shorten</b> [(<b>-c</b> | <b>--char</b>) <u>CHARS</u>] [(<b>-m</b> | <b>--max</b>) <u>INTEGER</u>]
                      [<b>-N</b> | <b>--no-newline</b>] [<b>-l</b> | <b>--left</b>] [<b>-q</b> | <b>--quiet</b>] [<u>STRING</u> ...]
       <b>string</b> <b>split</b> [(<b>-f</b> | <b>--fields</b>) <u>FIELDS</u>] [(<b>-m</b> | <b>--max</b>) <u>MAX</u>] [<b>-n</b> | <b>--no-empty</b>]
                    [<b>-q</b> | <b>--quiet</b>] [<b>-r</b> | <b>--right</b>] <u>SEP</u> [<u>STRING</u> ...]
       <b>string</b> <b>split0</b> [(<b>-f</b> | <b>--fields</b>) <u>FIELDS</u>] [(<b>-m</b> | <b>--max</b>) <u>MAX</u>] [<b>-n</b> | <b>--no-empty</b>]
                     [<b>-q</b> | <b>--quiet</b>] [<b>-r</b> | <b>--right</b>] [<u>STRING</u> ...]
       <b>string</b> <b>sub</b> [(<b>-s</b> | <b>--start</b>) <u>START</u>] [(<b>-e</b> | <b>--end</b>) <u>END</u>] [(<b>-l</b> | <b>--length</b>) <u>LENGTH</u>]
                  [<b>-q</b> | <b>--quiet</b>] [<u>STRING</u> ...]
       <b>string</b> <b>trim</b> [<b>-l</b> | <b>--left</b>] [<b>-r</b> | <b>--right</b>] [(<b>-c</b> | <b>--chars</b>) <u>CHARS</u>]
                   [<b>-q</b> | <b>--quiet</b>] [<u>STRING</u> ...]
       <b>string</b> <b>unescape</b> [<b>--style=</b>] [<u>STRING</u> ...]
       <b>string</b> <b>upper</b> [<b>-q</b> | <b>--quiet</b>] [<u>STRING</u> ...]

   <b>Description</b>
       <b>string</b> performs operations on strings.

       <u>STRING</u>  arguments are taken from the command line unless standard input is connected to a pipe or a file,
       in which case they are read from standard input, one <u>STRING</u> per line. It is an  error  to  supply  <u>STRING</u>
       arguments on the command line and on standard input.

       Arguments beginning with <b>-</b> are normally interpreted as switches; <b>--</b> causes the following arguments not to
       be  treated as switches even if they begin with <b>-</b>. Switches and required arguments are recognized only on
       the command line.

       Most subcommands accept a <b>-q</b> or <b>--quiet</b> switch, which suppresses the usual  output  but  exits  with  the
       documented  status.  In  this  case  these commands will quit early, without reading all of the available
       input.

       The following subcommands are available.

   <b>"collect"</b> <b>subcommand</b>
       <b>string</b> <b>collect</b> [<b>-a</b> | <b>--allow-empty</b>] [<b>-N</b> | <b>--no-trim-newlines</b>] [<u>STRING</u> ...]

       <b>string</b> <b>collect</b> collects its input into a single output argument, without splitting the output  when  used
       in  a  command  substitution. This is useful when trying to collect multiline output from another command
       into a variable. Exit status: 0 if any output argument is non-empty, or 1 otherwise.

       A command like <b>echo</b> <b>(cmd</b> <b>|</b> <b>string</b> <b>collect)</b> is mostly equivalent to a quoted  command  substitution  (<b>echo</b>
       <b>"$(cmd)"</b>).  The  main  difference is that the former evaluates to zero or one elements whereas the quoted
       command substitution always evaluates to one element due to string interpolation.

       If invoked with multiple arguments instead of input, <b>string</b> <b>collect</b> preserves each  argument  separately,
       where the number of output arguments is equal to the number of arguments given to <b>string</b> <b>collect</b>.

       Any   trailing   newlines   on   the   input  are  trimmed,  just  as  with  <b>"$(cmd)"</b>  substitution.  Use
       <b>--no-trim-newlines</b> to disable this behavior, which may be useful when  running  a  command  such  as  <b>set</b>
       <b>contents</b> <b>(cat</b> <b>filename</b> <b>|</b> <b>string</b> <b>collect</b> <b>-N)</b>.

       With  <b>--allow-empty</b>,  <b>string</b>  <b>collect</b>  always prints one (empty) argument. This can be used to prevent an
       argument from disappearing.

   <b>Examples</b>
          &gt;_ echo "zero $(echo one\ntwo\nthree) four"
          zero one
          two
          three four

          &gt;_ echo \"(echo one\ntwo\nthree | string collect)\"
          "one
          two
          three"

          &gt;_ echo \"(echo one\ntwo\nthree | string collect -N)\"
          "one
          two
          three
          "

          &gt;_ echo foo(true | string collect --allow-empty)bar
          foobar

   <b>"escape"</b> <b>and</b> <b>"unescape"</b> <b>subcommands</b>
       <b>string</b> <b>escape</b> [<b>-n</b> | <b>--no-quoted</b>] [<b>--style=</b>] [<u>STRING</u> ...]
       <b>string</b> <b>unescape</b> [<b>--style=</b>] [<u>STRING</u> ...]

       <b>string</b> <b>escape</b> escapes each <u>STRING</u> in one of several ways.

       <b>--style=script</b> (default) alters the string such that it can  be  passed  back  to  <b>eval</b>  to  produce  the
       original  argument again. By default, all special characters are escaped, and quotes are used to simplify
       the output when possible. If <b>-n</b> or <b>--no-quoted</b> is given, the simplifying quoted format is not used.  Exit
       status: 0 if at least one string was escaped, or 1 otherwise.

       <b>--style=var</b>  ensures  the  string  can  be  used  as a variable name by hex encoding any non-alphanumeric
       characters. The string is first converted to UTF-8 before being encoded.

       <b>--style=url</b> ensures the string can be used as a URL by hex encoding any character which is not legal in a
       URL. The string is first converted to UTF-8 before being encoded.

       <b>--style=regex</b> escapes an input string for literal matching within a regex expression. The string is first
       converted to UTF-8 before being encoded.

       <b>string</b> <b>unescape</b> performs the inverse of the <b>string</b> <b>escape</b> command. If the string to be unescaped  is  not
       properly  formatted  it  is  ignored.  For  example,  doing  <b>string</b>  <b>unescape</b>  <b>--style=var</b> <b>(string</b> <b>escape</b>
       <b>--style=var</b> <b>$str)</b> will return the original string. There is no support for unescaping <b>--style=regex</b>.

   <b>Examples</b>
          &gt;_ echo \x07 | string escape
          \cg

          &gt;_ string escape --style=var 'a1 b2'\u6161
          a1_20_b2_E6_85_A1_

   <b>"join"</b> <b>and</b> <b>"join0"</b> <b>subcommands</b>
       <b>string</b> <b>join</b> [<b>-q</b> | <b>--quiet</b>] <u>SEP</u> [<u>STRING</u> ...]
       <b>string</b> <b>join0</b> [<b>-q</b> | <b>--quiet</b>] [<u>STRING</u> ...]

       <b>string</b> <b>join</b> joins its <u>STRING</u> arguments into a single string separated by  <u>SEP</u>,  which  can  be  an  empty
       string.  Exit  status:  0  if  at  least  one  join was performed, or 1 otherwise. If <b>-n</b> or <b>--no-empty</b> is
       specified, empty strings are excluded from consideration (e.g. <b>string</b> <b>join</b> <b>-n</b> <b>+</b> <b>a</b> <b>b</b> <b>""</b> <b>c</b> would expand  to
       <b>a+b+c</b> not <b>a+b++c</b>).

       <b>string</b> <b>join0</b> joins its <u>STRING</u> arguments into a single string separated by the zero byte (NUL), and adds a
       trailing NUL. This is most useful in conjunction with tools that accept NUL-delimited input, such as <b>sort</b>
       <b>-z</b>. Exit status: 0 if at least one join was performed, or 1 otherwise.

       Because  Unix  uses  NUL as the string terminator, passing the output of <b>string</b> <b>join0</b> as an <u>argument</u> to a
       command (via a <u>command</u> <u>substitution</u>) won't actually work. Fish will pass the correct bytes along, but the
       command won't be able to tell where the argument ends. This is a limitation of Unix' argument passing.

   <b>Examples</b>
          &gt;_ seq 3 | string join ...
          1...2...3

          # Give a list of NUL-separated filenames to du (this is a GNU extension)
          &gt;_ string join0 file1 file2 file\nwith\nmultiple\nlines | du --files0-from=-

          # Just put the strings together without a separator
          &gt;_ string join '' a b c
          abc

   <b>"length"</b> <b>subcommand</b>
       <b>string</b> <b>length</b> [<b>-q</b> | <b>--quiet</b>] [<b>-V</b> | <b>--visible</b>] [<u>STRING</u> ...]

       <b>string</b> <b>length</b> reports the length of each string argument in characters. Exit status: 0 if  at  least  one
       non-empty <u>STRING</u> was given, or 1 otherwise.

       With  <b>-V</b>  or  <b>--visible</b>,  it  uses the visible width of the arguments. That means it will discount escape
       sequences fish knows about, account for $fish_emoji_width and $fish_ambiguous_width. It will  also  count
       each  line (separated by <b>\n</b>) on its own, and with a carriage return (<b>\r</b>) count only the widest stretch on
       a line. The intent is to measure the number of columns the <u>STRING</u> would occupy in the current terminal.

   <b>Examples</b>
          &gt;_ string length 'hello, world'
          12

          &gt;_ set str foo
          &gt;_ string length -q $str; echo $status
          0
          # Equivalent to test -n "$str"

          &gt;_ string length --visible (set_color red)foobar
          # the set_color is discounted, so this is the width of "foobar"
          6

          &gt;_ string length --visible 🐟🐟🐟🐟
          # depending on $fish_emoji_width, this is either 4 or 8
          # in new terminals it should be
          8

          &gt;_ string length --visible abcdef\r123
          # this displays as "123def", so the width is 6
          6

          &gt;_ string length --visible a\nbc
          # counts "a" and "bc" as separate lines, so it prints width for each
          1
          2

   <b>"lower"</b> <b>subcommand</b>
       <b>string</b> <b>lower</b> [<b>-q</b> | <b>--quiet</b>] [<u>STRING</u> ...]

       <b>string</b> <b>lower</b> converts each string argument to lowercase. Exit status:  0  if  at  least  one  string  was
       converted  to  lowercase,  else  1.  This means that in conjunction with the <b>-q</b> flag you can readily test
       whether a string is already lowercase.

   <b>"match"</b> <b>subcommand</b>
       <b>string</b> <b>match</b> [<b>-a</b> | <b>--all</b>] [<b>-e</b> | <b>--entire</b>] [<b>-i</b> | <b>--ignore-case</b>]
                    [<b>-g</b> | <b>--groups-only</b>] [<b>-r</b> | <b>--regex</b>] [<b>-n</b> | <b>--index</b>]
                    [<b>-q</b> | <b>--quiet</b>] [<b>-v</b> | <b>--invert</b>] [(<b>-m</b> | <b>--max-matches</b>) <u>MAX</u>]
                    <u>PATTERN</u> [<u>STRING</u> ...]

       <b>string</b> <b>match</b> tests each <u>STRING</u> against <u>PATTERN</u> and prints matching substrings. Only the first  match  for
       each <u>STRING</u> is reported unless <b>-a</b> or <b>--all</b> is given, in which case all matches are reported.

       If you specify the <b>-e</b> or <b>--entire</b> then each matching string is printed including any prefix or suffix not
       matched  by  the  pattern  (equivalent to <b>grep</b> without the <b>-o</b> flag). You can, obviously, achieve the same
       result by prepending and appending <b>*</b> or <b>.*</b> depending on whether or not you  have  specified  the  <b>--regex</b>
       flag.  The  <b>--entire</b>  flag  is simply a way to avoid having to complicate the pattern in that fashion and
       make the intent of the <b>string</b> <b>match</b> clearer. Without <b>--entire</b> and <b>--regex</b>, a <u>PATTERN</u> will need  to  match
       the entire <u>STRING</u> before it will be reported.

       Matching can be made case-insensitive with <b>--ignore-case</b> or <b>-i</b>.

       If <b>--groups-only</b> or <b>-g</b> is given, only the capturing groups will be reported - meaning the full match will
       be  skipped.  This  is  incompatible  with <b>--entire</b> and <b>--invert</b>, and requires <b>--regex</b>. It is useful as a
       simple cutting tool instead of <b>string</b> <b>replace</b>, so you can simply choose "this part" of a string.

       If <b>--index</b> or <b>-n</b> is given, each match is reported as a 1-based start position and a length.  By  default,
       PATTERN  is  interpreted as a glob pattern matched against each entire <u>STRING</u> argument. A glob pattern is
       only considered a valid match if it matches the entire <u>STRING</u>.

       If <b>--regex</b> or <b>-r</b> is given, <u>PATTERN</u> is interpreted as a Perl-compatible regular expression, which does not
       have to match the entire <u>STRING</u>. For a regular expression containing  capturing  groups,  multiple  items
       will  be  reported  for each match, one for the entire match and one for each capturing group. With this,
       only the matching part of the <u>STRING</u> will be reported, unless <b>--entire</b> is given.

       When matching via regular expressions, <b>string</b> <b>match</b> automatically sets variables for all named  capturing
       groups (<b>(?&lt;name&gt;expression)</b>). It will create a variable with the name of the group, in the default scope,
       for  each  named  capturing  group,  and  set it to the value of the capturing group in the first matched
       argument. If a named capture group matched an empty string, the variable will be set to the empty  string
       (like <b>set</b> <b>var</b> <b>""</b>). If it did not match, the variable will be set to nothing (like <b>set</b> <b>var</b>).  When <b>--regex</b>
       is  used  with <b>--all</b>, this behavior changes. Each named variable will contain a list of matches, with the
       first match contained in the first element, the second match in the second, and so on. If the  group  was
       empty or did not match, the corresponding element will be an empty string.

       If <b>--invert</b> or <b>-v</b> is used the selected lines will be only those which do not match the given glob pattern
       or regular expression.

       If  <b>--max-matches</b>  <b>MAX</b>  or <b>-m</b> <b>MAX</b> is used, <b>string</b> will stop checking for matches after MAX lines of input
       have matched. This can be used as an "early exit" optimization when processing long inputs but  expecting
       a  limited  and fixed number of outputs that might be found considerably before the input stream has been
       exhausted. If combined with <b>--invert</b> or <b>-v</b>, considers only inverted matches.

       Exit status: 0 if at least one match was found, or 1 otherwise.

   <b>Match</b> <b>Glob</b> <b>Examples</b>
          &gt;_ string match '?' a
          a

          &gt;_ string match 'a*b' axxb
          axxb

          &gt;_ string match -i 'a??B' Axxb
          Axxb

          &gt;_ string match -- '-*' -h foo --version bar
          # To match things that look like options, we need a `--`
          # to tell string its options end there.
          -h
          --version

          &gt;_ echo 'ok?' | string match '*\?'
          ok?

          # Note that only the second STRING will match here.
          &gt;_ string match 'foo' 'foo1' 'foo' 'foo2'
          foo

          &gt;_ string match -e 'foo' 'foo1' 'foo' 'foo2'
          foo1
          foo
          foo2

          &gt;_ string match 'foo?' 'foo1' 'foo' 'foo2'
          foo1
          foo2

   <b>Match</b> <b>Regex</b> <b>Examples</b>
          &gt;_ string match -r 'cat|dog|fish' 'nice dog'
          dog

          &gt;_ string match -r -v "c.*[12]" {cat,dog}(seq 1 4)
          dog1
          dog2
          cat3
          dog3
          cat4
          dog4

          &gt;_ string match -r -- '-.*' -h foo --version bar
          # To match things that look like options, we need a `--`
          # to tell string its options end there.
          -h
          --version

          &gt;_ string match -r '(\d\d?):(\d\d):(\d\d)' 2:34:56
          2:34:56
          2
          34
          56

          &gt;_ string match -r '^(\w{2,4})\1$' papa mud murmur
          papa
          pa
          murmur
          mur

          &gt;_ string match -r -a -n at ratatat
          2 2
          4 2
          6 2

          &gt;_ string match -r -i '0x[0-9a-f]{1,8}' 'int magic = 0xBadC0de;'
          0xBadC0de

          &gt;_ echo $version
          3.1.2-1575-ga2ff32d90
          &gt;_ string match -rq '(?&lt;major&gt;\d+).(?&lt;minor&gt;\d+).(?&lt;revision&gt;\d+)' -- $version
          &gt;_ echo "You are using fish $major!"
          You are using fish 3!

          &gt;_ string match -raq ' *(?&lt;sentence&gt;[^.!?]+)(?&lt;punctuation&gt;[.!?])?' "hello, friend. goodbye"
          &gt;_ printf "%s\n" -- $sentence
          hello, friend
          goodbye
          &gt;_ printf "%s\n" -- $punctuation
          .

          &gt;_ string match -rq '(?&lt;word&gt;hello)' 'hi'
          &gt;_ count $word
          0

   <b>"pad"</b> <b>subcommand</b>
       <b>string</b> <b>pad</b> [<b>-r</b> | <b>--right</b>] [(<b>-c</b> | <b>--char</b>) <u>CHAR</u>] [(<b>-w</b> | <b>--width</b>) <u>INTEGER</u>]
                  [<u>STRING</u> ...]

       <b>string</b> <b>pad</b> extends each <u>STRING</u> to the given visible width by adding <u>CHAR</u> to  the  left.  That  means  the
       width  of  all  visible  characters  added  together,  excluding  escape  sequences  and  accounting  for
       <u>fish_emoji_width</u> and <u>fish_ambiguous_width</u>. It is the amount of columns in a terminal the <u>STRING</u> occupies.

       The escape sequences reflect what fish knows about, and how it computes its output. Your  terminal  might
       support more escapes, or not support escape sequences that fish knows about.

       If <b>-r</b> or <b>--right</b> is given, add the padding after a string.

       If <b>-c</b> or <b>--char</b> is given, pad with <u>CHAR</u> instead of whitespace.

       The  output  is padded to the maximum width of all input strings. If <b>-w</b> or <b>--width</b> is given, use at least
       that.

   <b>Examples</b>
          &gt;_ string pad -w 10 abc abcdef
                 abc
              abcdef

          &gt;_ string pad --right --char=🐟 "fish are pretty" "rich. "
          fish are pretty
          rich.  🐟🐟🐟🐟

          &gt;_ string pad -w$COLUMNS (date)
          # Prints the current time on the right edge of the screen.

   <b>See</b> <b>also</b>
       • The <u>printf</u> command can do simple padding, for example <b>printf</b> <b>%10s\n</b> works like <b>string</b> <b>pad</b> <b>-w10</b>.

       • <u>string</u> <u>length</u> with the <b>--visible</b> option can be used to show what fish thinks the width is.

   <b>"shorten"</b> <b>subcommand</b>
       <b>string</b> <b>shorten</b> [(<b>-c</b> | <b>--char</b>) <u>CHARS</u>] [(<b>-m</b> | <b>--max</b>) <u>INTEGER</u>]
                      [<b>-N</b> | <b>--no-newline</b>] [<b>-l</b> | <b>--left</b>] [<b>-q</b> | <b>--quiet</b>] [<u>STRING</u> ...]

       <b>string</b> <b>shorten</b> truncates each <u>STRING</u> to the given visible width and adds  an  ellipsis  to  indicate  it.
       "Visible  width" means the width of all visible characters added together, excluding escape sequences and
       accounting for <u>fish_emoji_width</u> and <u>fish_ambiguous_width</u>. It is the amount of columns in a  terminal  the
       <u>STRING</u> occupies.

       The  escape  sequences reflect what fish knows about, and how it computes its output. Your terminal might
       support more escapes, or not support escape sequences that fish knows about.

       If <b>-m</b> or <b>--max</b> is given, truncate at the given width. Otherwise, the lowest non-zero width of  all  input
       strings is used. A max of 0 means no shortening takes place, all STRINGs are printed as-is.

       If  <b>-N</b>  or  <b>--no-newline</b> is given, only the first line (or last line with <b>--left</b>) of each STRING is used,
       and an ellipsis is added if it was multiline. This only works  for  STRINGs  being  given  as  arguments,
       multiple lines given on stdin will be interpreted as separate STRINGs instead.

       If  <b>-c</b>  or  <b>--char</b>  is  given,  add  <u>CHAR</u> instead of an ellipsis. This can also be empty or more than one
       character.

       If <b>-l</b> or <b>--left</b> is given, remove text from the left on instead, so this prints the longest <u>suffix</u> of  the
       string that fits. With <b>--no-newline</b>, this will take from the last line instead of the first.

       If  <b>-q</b>  or  <b>--quiet</b>  is  given,  <b>string</b>  <b>shorten</b>  only  runs  for the return value - if anything would be
       shortened, it returns 0, else 1.

       The default ellipsis is <b>…</b>. If fish thinks your system is incapable because of your locale,  it  will  use
       <b>...</b> instead.

       The return value is 0 if any shortening occurred, 1 otherwise.

   <b>Examples</b>
          &gt;_ string shorten foo foobar
          # No width was given, we infer, and "foo" is the shortest.
          foo
          fo…

          &gt;_ string shorten --char="..." foo foobar
          # The target width is 3 because of "foo",
          # and our ellipsis is 3 too, so we can't really show anything.
          # This is the default ellipsis if your locale doesn't allow "…".
          foo
          ...

          &gt;_ string shorten --char="" --max 4 abcdef 123456
          # Leaving the char empty makes us not add an ellipsis
          # So this truncates at 4 columns:
          abcd
          1234

          &gt;_ touch "a multiline"\n"file"
          &gt;_ for file in *; string shorten -N -- $file; end
          # Shorten the multiline file so we only show one line per file:
          a multiline…

          &gt;_ ss -p | string shorten -m$COLUMNS -c ""
          # `ss` from Linux' iproute2 shows socket information, but prints extremely long lines.
          # This shortens input so it fits on the screen without overflowing lines.

          &gt;_ git branch | string match -rg '^\* (.*)' | string shorten -m20
          # Take the current git branch and shorten it at 20 columns.
          # Here the branch is "builtin-path-with-expand"
          builtin-path-with-e…

          &gt;_ git branch | string match -rg '^\* (.*)' | string shorten -m20 --left
          # Taking 20 columns from the right instead:
          …in-path-with-expand

   <b>See</b> <b>also</b>
       • <u>string</u>'s <b>pad</b> subcommand does the inverse of this command, adding padding to a specific width instead.

       • The <u>printf</u> command can do simple padding, for example <b>printf</b> <b>%10s\n</b> works like <b>string</b> <b>pad</b> <b>-w10</b>.

       • <u>string</u> <u>length</u> with the <b>--visible</b> option can be used to show what fish thinks the width is.

   <b>"repeat"</b> <b>subcommand</b>
       <b>string</b> <b>repeat</b> [(<b>-n</b> | <b>--count</b>) <u>COUNT</u>] [(<b>-m</b> | <b>--max</b>) <u>MAX</u>] [<b>-N</b> | <b>--no-newline</b>]
                     [<b>-q</b> | <b>--quiet</b>] [<u>STRING</u> ...]
       <b>string</b> <b>repeat</b> [<b>-N</b> | <b>--no-newline</b>] [<b>-q</b> | <b>--quiet</b>] <u>COUNT</u> [<u>STRING</u> ...]

       <b>string</b>  <b>repeat</b>  repeats  the  <u>STRING</u> <b>-n</b> or <b>--count</b> times. The <b>-m</b> or <b>--max</b> option will limit the number of
       outputted characters (excluding the newline). This option can be used by itself or  in  conjunction  with
       <b>--count</b>.  If  both  <b>--count</b>  and  <b>--max</b> are present, max char will be outputted unless the final repeated
       string size is less than max, in that case, the string will repeat until count  has  been  reached.  Both
       <b>--count</b>  and  <b>--max</b> will accept a number greater than or equal to zero, in the case of zero, nothing will
       be outputted. The first argument is  interpreted  as  <u>COUNT</u>  if  <b>--count</b>  or  <b>--max</b>  are  not  explicitly
       specified.  If <b>-N</b> or <b>--no-newline</b> is given, the output won't contain a newline character at the end. Exit
       status: 0 if yielded string is not empty, 1 otherwise.

   <b>Examples</b>
   <b>Repeat</b> <b>Examples</b>
          &gt;_ string repeat -n 2 'foo '
          foo foo

          &gt;_ echo foo | string repeat -n 2
          foofoo

          &gt;_ string repeat -n 2 -m 5 'foo'
          foofo

          &gt;_ string repeat -m 5 'foo'
          foofo

          &gt;_ string repeat 2 'foo'
          foofoo

          &gt;_ string repeat 2 -n 3
          222

   <b>"replace"</b> <b>subcommand</b>
       <b>string</b> <b>replace</b> [<b>-a</b> | <b>--all</b>] [<b>-f</b> | <b>--filter</b>] [<b>-i</b> | <b>--ignore-case</b>]
                      [<b>-r</b> | <b>--regex</b>] [(<b>-m</b> | <b>--max-matches</b>) <u>MAX</u>] [<b>-q</b> | <b>--quiet</b>]
                      <u>PATTERN</u> <u>REPLACEMENT</u> [<u>STRING</u> ...]

       <b>string</b> <b>replace</b> is similar to <b>string</b>  <b>match</b>  but  replaces  non-overlapping  matching  substrings  with  a
       replacement  string  and  prints  the result. By default, <u>PATTERN</u> is treated as a literal substring to be
       matched.

       If <b>-r</b> or <b>--regex</b>  is  given,  <u>PATTERN</u>  is  interpreted  as  a  Perl-compatible  regular  expression,  and
       <u>REPLACEMENT</u>  can  contain  C-style  escape  sequences like <b>t</b> as well as references to capturing groups by
       number or name as <u>$n</u> or <u>${n}</u>.

       If you specify the <b>-f</b> or <b>--filter</b> flag then each input string is printed only if a replacement was  done.
       This  is  useful  where you would otherwise use this idiom: <b>a_cmd</b> <b>|</b> <b>string</b> <b>match</b> <b>pattern</b> <b>|</b> <b>string</b> <b>replace</b>
       <b>pattern</b> <b>new_pattern</b>. You can instead just write <b>a_cmd</b> <b>|</b> <b>string</b> <b>replace</b> <b>--filter</b> <b>pattern</b> <b>new_pattern</b>.

       If <b>--max-matches</b> <b>MAX</b> or <b>-m</b> <b>MAX</b> is used, <b>string</b> <b>replace</b> will stop all processing after MAX lines of  input
       have  matched  the  specified  pattern. In the event of <b>--filter</b> or <b>-f</b>, this means the output will be MAX
       lines in length. This can be used as an  "early  exit"  optimization  when  processing  long  inputs  but
       expecting  a limited and fixed number of outputs that might be found considerably before the input stream
       has been exhausted.

       Exit status: 0 if at least one replacement was performed, or 1 otherwise.

   <b>Replace</b> <b>Literal</b> <b>Examples</b>
          &gt;_ string replace is was 'blue is my favorite'
          blue was my favorite

          &gt;_ string replace 3rd last 1st 2nd 3rd
          1st
          2nd
          last

          &gt;_ string replace -a ' ' _ 'spaces to underscores'
          spaces_to_underscores

   <b>Replace</b> <b>Regex</b> <b>Examples</b>
          &gt;_ string replace -r -a '[^\d.]+' ' ' '0 one two 3.14 four 5x'
          0 3.14 5

          &gt;_ string replace -r '(\w+)\s+(\w+)' '$2 $1 $$' 'left right'
          right left $

          &gt;_ string replace -r '\s*newline\s*' '\n' 'put a newline here'
          put a
          here

   <b>"split"</b> <b>and</b> <b>"split0"</b> <b>subcommands</b>
       <b>string</b> <b>split</b> [(<b>-f</b> | <b>--fields</b>) <u>FIELDS</u>] [(<b>-m</b> | <b>--max</b>) <u>MAX</u>] [<b>-n</b> | <b>--no-empty</b>]
                    [<b>-q</b> | <b>--quiet</b>] [<b>-r</b> | <b>--right</b>] <u>SEP</u> [<u>STRING</u> ...]
       <b>string</b> <b>split0</b> [(<b>-f</b> | <b>--fields</b>) <u>FIELDS</u>] [(<b>-m</b> | <b>--max</b>) <u>MAX</u>] [<b>-n</b> | <b>--no-empty</b>]
                     [<b>-q</b> | <b>--quiet</b>] [<b>-r</b> | <b>--right</b>] [<u>STRING</u> ...]

       <b>string</b> <b>split</b> splits each <u>STRING</u> on the separator <u>SEP</u>, which can be an empty string. If  <b>-m</b>  or  <b>--max</b>  is
       specified,  at most MAX splits are done on each <u>STRING</u>. If <b>-r</b> or <b>--right</b> is given, splitting is performed
       right-to-left. This is useful in combination with <b>-m</b> or <b>--max</b>. With <b>-n</b> or <b>--no-empty</b>, empty  results  are
       excluded from consideration (e.g. <b>hello\n\nworld</b> would expand to two strings and not three). Exit status:
       0 if at least one split was performed, or 1 otherwise.

       Use  <b>-f</b>  or  <b>--fields</b>  to  print out specific fields. FIELDS is a comma-separated string of field numbers
       and/or spans. Each field is one-indexed, and will be printed on separate lines. If a given field does not
       exist, then the command exits with status 1 and does not print anything, unless <b>--allow-empty</b> is used.

       See also the <b>--delimiter</b> option of the <u>read</u> command.

       <b>string</b> <b>split0</b> splits each <u>STRING</u> on the zero byte (NUL). Options are the same as <b>string</b> <b>split</b> except that
       no separator is given.

       <b>split0</b> has the important property  that  its  output  is  not  further  split  when  used  in  a  command
       substitution, allowing for the command substitution to produce elements containing newlines. This is most
       useful  when  used  with  Unix tools that produce zero bytes, such as <b>find</b> <b>-print0</b> or <b>sort</b> <b>-z</b>. See split0
       examples below.

   <b>Examples</b>
          &gt;_ string split . example.com
          example
          com

          &gt;_ string split -r -m1 / /usr/local/bin/fish
          <a href="file:/usr/local/bin">/usr/local/bin</a>
          fish

          &gt;_ string split '' abc
          a
          b
          c

          &gt;_ string split --allow-empty -f1,3-4,5 '' abcd
          a
          c
          d

   <b>NUL</b> <b>Delimited</b> <b>Examples</b>
          &gt;_ # Count files in a directory, without being confused by newlines.
          &gt;_ count (find . -print0 | string split0)
          42

          &gt;_ # Sort a list of elements which may contain newlines
          &gt;_ set foo beta alpha\ngamma
          &gt;_ set foo (string join0 $foo | sort -z | string split0)
          &gt;_ string escape $foo[1]
          alpha\ngamma

   <b>"sub"</b> <b>subcommand</b>
       <b>string</b> <b>sub</b> [(<b>-s</b> | <b>--start</b>) <u>START</u>] [(<b>-e</b> | <b>--end</b>) <u>END</u>] [(<b>-l</b> | <b>--length</b>) <u>LENGTH</u>]
                  [<b>-q</b> | <b>--quiet</b>] [<u>STRING</u> ...]

       <b>string</b> <b>sub</b> prints a substring of each string argument. The start/end of the substring  can  be  specified
       with  <b>-s</b>/<b>-e</b> or <b>--start</b>/<b>--end</b> followed by a 1-based index value. Positive index values are relative to the
       start of the string and negative index values are relative to the end of the string.  The  default  start
       value is 1. The length of the substring can be specified with <b>-l</b> or <b>--length</b>. If the length or end is not
       specified,  the  substring  continues to the end of each STRING. Exit status: 0 if at least one substring
       operation was performed, 1 otherwise. <b>--length</b> is mutually exclusive with <b>--end</b>.

   <b>Examples</b>
          &gt;_ string sub --length 2 abcde
          ab

          &gt;_ string sub -s 2 -l 2 abcde
          bc

          &gt;_ string sub --start=-2 abcde
          de

          &gt;_ string sub --end=3 abcde
          abc

          &gt;_ string sub -e -1 abcde
          abcd

          &gt;_ string sub -s 2 -e -1 abcde
          bcd

          &gt;_ string sub -s -3 -e -2 abcde
          c

   <b>"trim"</b> <b>subcommand</b>
       <b>string</b> <b>trim</b> [<b>-l</b> | <b>--left</b>] [<b>-r</b> | <b>--right</b>] [(<b>-c</b> | <b>--chars</b>) <u>CHARS</u>]
                   [<b>-q</b> | <b>--quiet</b>] [<u>STRING</u> ...]

       <b>string</b> <b>trim</b> removes leading and trailing whitespace from each <u>STRING</u>. If <b>-l</b>  or  <b>--left</b>  is  given,  only
       leading whitespace is removed. If <b>-r</b> or <b>--right</b> is given, only trailing whitespace is trimmed.

       The  <b>-c</b> or <b>--chars</b> switch causes the set of characters in <u>CHARS</u> to be removed instead of whitespace. This
       is a set of characters, not a string - if you pass <b>-c</b> <b>foo</b>, it will remove any "f" or "o", not just  "foo"
       as a whole.

       Exit status: 0 if at least one character was trimmed, or 1 otherwise.

   <b>Examples</b>
          &gt;_ string trim ' abc  '
          abc

          &gt;_ string trim --right --chars=yz xyzzy zany
          x
          zan

   <b>"upper"</b> <b>subcommand</b>
       <b>string</b> <b>upper</b> [<b>-q</b> | <b>--quiet</b>] [<u>STRING</u> ...]

       <b>string</b>  <b>upper</b>  converts  each  string  argument  to  uppercase. Exit status: 0 if at least one string was
       converted to uppercase, else 1. This means that in conjunction with the <b>-q</b>  flag  you  can  readily  test
       whether a string is already uppercase.

   <b>Regular</b> <b>Expressions</b>
       Both  the  <b>match</b>  and  <b>replace</b>  subcommand  support  regular expressions when used with the <b>-r</b> or <b>--regex</b>
       option. The dialect is that of PCRE2.

       In general, special characters are special by default, so <b>a+</b> matches one or more "a"s, while <b>a\+</b>  matches
       an  "a"  and  then  a  "+".  <b>(a+)</b>  matches  one  or  more  "a"s  in a capturing group (<b>(?:XXXX)</b> denotes a
       non-capturing group). For the replacement parameter of <b>replace</b>, <b>$n</b> refers to the n-th group of the match.
       In the match parameter, <b>\n</b> (e.g. <b>\1</b>) refers back to groups.

       Some features include repetitions:

       • <b>*</b> refers to 0 or more repetitions of the previous expression

       • <b>+</b> 1 or more

       • <b>?</b> 0 or 1.

       • <b>{n}</b> to exactly n (where n is a number)

       • <b>{n,m}</b> at least n, no more than m.

       • <b>{n,}</b> n or more

       Character classes, some of the more important:

       • <b>.</b> any character except newline

       • <b>\d</b> a decimal digit and <b>\D</b>, not a decimal digit

       • <b>\s</b> whitespace and <b>\S</b>, not whitespace

       • <b>\w</b> a "word" character and <b>\W</b>, a "non-word" character

       • <b>[...]</b> (where "..." is some characters) is a character set

       • <b>[^...]</b> is the inverse of the given character set

       • <b>[x-y]</b> is the range of characters from x-y

       • <b>[[:xxx:]]</b> is a named character set

       • <b>[[:^xxx:]]</b> is the inverse of a named character set

       • <b>[[:alnum:]]</b>  : "alphanumeric"

       • <b>[[:alpha:]]</b>  : "alphabetic"

       • <b>[[:ascii:]]</b>  : "0-127"

       • <b>[[:blank:]]</b>  : "space or tab"

       • <b>[[:cntrl:]]</b>  : "control character"

       • <b>[[:digit:]]</b>  : "decimal digit"

       • <b>[[:graph:]]</b>  : "printing, excluding space"

       • <b>[[:lower:]]</b>  : "lower case letter"

       • <b>[[:print:]]</b>  : "printing, including space"

       • <b>[[:punct:]]</b>  : "printing, excluding alphanumeric"

       • <b>[[:space:]]</b>  : "white space"

       • <b>[[:upper:]]</b>  : "upper case letter"

       • <b>[[:word:]]</b>   : "same as w"

       • <b>[[:xdigit:]]</b> : "hexadecimal digit"

       Groups:

       • <b>(...)</b> is a capturing group

       • <b>(?:...)</b> is a non-capturing group

       • <b>\n</b> is a backreference (where n is the number of the group, starting with 1)

       • <b>$n</b> is a reference from the replacement expression to a group in the match expression.

       And some other things:

       • <b>\b</b> denotes a word boundary, <b>\B</b> is not a word boundary.

       • <b>^</b> is the start of the string or line, <b>$</b> the end.

       • <b>|</b> is "alternation", i.e. the "or".

   <b>Comparison</b> <b>to</b> <b>other</b> <b>tools</b>
       Most operations <b>string</b> supports can also be done by external tools. Some of these include <b>grep</b>,  <b>sed</b>  and
       <b>cut</b>.

       If you are familiar with these, it is useful to know how <b>string</b> differs from them.

       In contrast to these classics, <b>string</b> reads input either from stdin or as arguments. <b>string</b> also does not
       deal with files, so it requires redirections to be used with them.

       In contrast to <b>grep</b>, <b>string</b>'s <b>match</b> defaults to glob-mode, while <b>replace</b> defaults to literal matching. If
       set  to  regex-mode,  they  use  PCRE regular expressions, which is comparable to <b>grep</b>'s <b>-P</b> option. <b>match</b>
       defaults to printing just the match, which is like  <b>grep</b>  with  <b>-o</b>  (use  <b>--entire</b>  to  enable  grep-like
       behavior).

       Like  <b>sed</b>'s  <b>s/old/new/</b>  command,  <b>string</b>  <b>replace</b>  still  prints  strings  that don't match. <b>sed</b>'s <b>-n</b> in
       combination with a <b>/p</b> modifier or command is like <b>string</b> <b>replace</b> <b>-f</b>.

       <b>string</b> <b>split</b> <b>somedelimiter</b> is a replacement for <b>tr</b> <b>somedelimiter</b> <b>\n</b>.

   <b>string-collect</b> <b>-</b> <b>join</b> <b>strings</b> <b>into</b> <b>one</b>
   <b>Synopsis</b>
       <b>string</b> <b>collect</b> [<b>-a</b> | <b>--allow-empty</b>] [<b>-N</b> | <b>--no-trim-newlines</b>] [<u>STRING</u> ...]

   <b>Description</b>
       <b>string</b> <b>collect</b> collects its input into a single output argument, without splitting the output  when  used
       in  a  command  substitution. This is useful when trying to collect multiline output from another command
       into a variable. Exit status: 0 if any output argument is non-empty, or 1 otherwise.

       A command like <b>echo</b> <b>(cmd</b> <b>|</b> <b>string</b> <b>collect)</b> is mostly equivalent to a quoted  command  substitution  (<b>echo</b>
       <b>"$(cmd)"</b>).  The  main  difference is that the former evaluates to zero or one elements whereas the quoted
       command substitution always evaluates to one element due to string interpolation.

       If invoked with multiple arguments instead of input, <b>string</b> <b>collect</b> preserves each  argument  separately,
       where the number of output arguments is equal to the number of arguments given to <b>string</b> <b>collect</b>.

       Any   trailing   newlines   on   the   input  are  trimmed,  just  as  with  <b>"$(cmd)"</b>  substitution.  Use
       <b>--no-trim-newlines</b> to disable this behavior, which may be useful when  running  a  command  such  as  <b>set</b>
       <b>contents</b> <b>(cat</b> <b>filename</b> <b>|</b> <b>string</b> <b>collect</b> <b>-N)</b>.

       With  <b>--allow-empty</b>,  <b>string</b>  <b>collect</b>  always prints one (empty) argument. This can be used to prevent an
       argument from disappearing.

   <b>Examples</b>
          &gt;_ echo "zero $(echo one\ntwo\nthree) four"
          zero one
          two
          three four

          &gt;_ echo \"(echo one\ntwo\nthree | string collect)\"
          "one
          two
          three"

          &gt;_ echo \"(echo one\ntwo\nthree | string collect -N)\"
          "one
          two
          three
          "

          &gt;_ echo foo(true | string collect --allow-empty)bar
          foobar

   <b>string-escape</b> <b>-</b> <b>escape</b> <b>special</b> <b>characters</b>
   <b>Synopsis</b>
       <b>string</b> <b>escape</b> [<b>-n</b> | <b>--no-quoted</b>] [<b>--style=</b>] [<u>STRING</u> ...]
       <b>string</b> <b>unescape</b> [<b>--style=</b>] [<u>STRING</u> ...]

   <b>Description</b>
       <b>string</b> <b>escape</b> escapes each <u>STRING</u> in one of several ways.

       <b>--style=script</b> (default) alters the string such that it can  be  passed  back  to  <b>eval</b>  to  produce  the
       original  argument again. By default, all special characters are escaped, and quotes are used to simplify
       the output when possible. If <b>-n</b> or <b>--no-quoted</b> is given, the simplifying quoted format is not used.  Exit
       status: 0 if at least one string was escaped, or 1 otherwise.

       <b>--style=var</b>  ensures  the  string  can  be  used  as a variable name by hex encoding any non-alphanumeric
       characters. The string is first converted to UTF-8 before being encoded.

       <b>--style=url</b> ensures the string can be used as a URL by hex encoding any character which is not legal in a
       URL. The string is first converted to UTF-8 before being encoded.

       <b>--style=regex</b> escapes an input string for literal matching within a regex expression. The string is first
       converted to UTF-8 before being encoded.

       <b>string</b> <b>unescape</b> performs the inverse of the <b>string</b> <b>escape</b> command. If the string to be unescaped  is  not
       properly  formatted  it  is  ignored.  For  example,  doing  <b>string</b>  <b>unescape</b>  <b>--style=var</b> <b>(string</b> <b>escape</b>
       <b>--style=var</b> <b>$str)</b> will return the original string. There is no support for unescaping <b>--style=regex</b>.

   <b>Examples</b>
          &gt;_ echo \x07 | string escape
          \cg

          &gt;_ string escape --style=var 'a1 b2'\u6161
          a1_20_b2_E6_85_A1_

   <b>string-join</b> <b>-</b> <b>join</b> <b>strings</b> <b>with</b> <b>delimiter</b>
   <b>Synopsis</b>
       <b>string</b> <b>join</b> [<b>-q</b> | <b>--quiet</b>] <u>SEP</u> [<u>STRING</u> ...]
       <b>string</b> <b>join0</b> [<b>-q</b> | <b>--quiet</b>] [<u>STRING</u> ...]

   <b>Description</b>
       <b>string</b> <b>join</b> joins its <u>STRING</u> arguments into a single string separated by  <u>SEP</u>,  which  can  be  an  empty
       string.  Exit  status:  0  if  at  least  one  join was performed, or 1 otherwise. If <b>-n</b> or <b>--no-empty</b> is
       specified, empty strings are excluded from consideration (e.g. <b>string</b> <b>join</b> <b>-n</b> <b>+</b> <b>a</b> <b>b</b> <b>""</b> <b>c</b> would expand  to
       <b>a+b+c</b> not <b>a+b++c</b>).

       <b>string</b> <b>join0</b> joins its <u>STRING</u> arguments into a single string separated by the zero byte (NUL), and adds a
       trailing NUL. This is most useful in conjunction with tools that accept NUL-delimited input, such as <b>sort</b>
       <b>-z</b>. Exit status: 0 if at least one join was performed, or 1 otherwise.

       Because  Unix  uses  NUL as the string terminator, passing the output of <b>string</b> <b>join0</b> as an <u>argument</u> to a
       command (via a <u>command</u> <u>substitution</u>) won't actually work. Fish will pass the correct bytes along, but the
       command won't be able to tell where the argument ends. This is a limitation of Unix' argument passing.

   <b>Examples</b>
          &gt;_ seq 3 | string join ...
          1...2...3

          # Give a list of NUL-separated filenames to du (this is a GNU extension)
          &gt;_ string join0 file1 file2 file\nwith\nmultiple\nlines | du --files0-from=-

          # Just put the strings together without a separator
          &gt;_ string join '' a b c
          abc

   <b>string-join0</b> <b>-</b> <b>join</b> <b>strings</b> <b>with</b> <b>zero</b> <b>bytes</b>
   <b>Synopsis</b>
       <b>string</b> <b>join</b> [<b>-q</b> | <b>--quiet</b>] <u>SEP</u> [<u>STRING</u> ...]
       <b>string</b> <b>join0</b> [<b>-q</b> | <b>--quiet</b>] [<u>STRING</u> ...]

   <b>Description</b>
       <b>string</b> <b>join</b> joins its <u>STRING</u> arguments into a single string separated by  <u>SEP</u>,  which  can  be  an  empty
       string.  Exit  status:  0  if  at  least  one  join was performed, or 1 otherwise. If <b>-n</b> or <b>--no-empty</b> is
       specified, empty strings are excluded from consideration (e.g. <b>string</b> <b>join</b> <b>-n</b> <b>+</b> <b>a</b> <b>b</b> <b>""</b> <b>c</b> would expand  to
       <b>a+b+c</b> not <b>a+b++c</b>).

       <b>string</b> <b>join0</b> joins its <u>STRING</u> arguments into a single string separated by the zero byte (NUL), and adds a
       trailing NUL. This is most useful in conjunction with tools that accept NUL-delimited input, such as <b>sort</b>
       <b>-z</b>. Exit status: 0 if at least one join was performed, or 1 otherwise.

       Because  Unix  uses  NUL as the string terminator, passing the output of <b>string</b> <b>join0</b> as an <u>argument</u> to a
       command (via a <u>command</u> <u>substitution</u>) won't actually work. Fish will pass the correct bytes along, but the
       command won't be able to tell where the argument ends. This is a limitation of Unix' argument passing.

   <b>Examples</b>
          &gt;_ seq 3 | string join ...
          1...2...3

          # Give a list of NUL-separated filenames to du (this is a GNU extension)
          &gt;_ string join0 file1 file2 file\nwith\nmultiple\nlines | du --files0-from=-

          # Just put the strings together without a separator
          &gt;_ string join '' a b c
          abc

   <b>string-length</b> <b>-</b> <b>print</b> <b>string</b> <b>lengths</b>
   <b>Synopsis</b>
       <b>string</b> <b>length</b> [<b>-q</b> | <b>--quiet</b>] [<b>-V</b> | <b>--visible</b>] [<u>STRING</u> ...]

   <b>Description</b>
       <b>string</b> <b>length</b> reports the length of each string argument in characters. Exit status: 0 if  at  least  one
       non-empty <u>STRING</u> was given, or 1 otherwise.

       With  <b>-V</b>  or  <b>--visible</b>,  it  uses the visible width of the arguments. That means it will discount escape
       sequences fish knows about, account for $fish_emoji_width and $fish_ambiguous_width. It will  also  count
       each  line (separated by <b>\n</b>) on its own, and with a carriage return (<b>\r</b>) count only the widest stretch on
       a line. The intent is to measure the number of columns the <u>STRING</u> would occupy in the current terminal.

   <b>Examples</b>
          &gt;_ string length 'hello, world'
          12

          &gt;_ set str foo
          &gt;_ string length -q $str; echo $status
          0
          # Equivalent to test -n "$str"

          &gt;_ string length --visible (set_color red)foobar
          # the set_color is discounted, so this is the width of "foobar"
          6

          &gt;_ string length --visible 🐟🐟🐟🐟
          # depending on $fish_emoji_width, this is either 4 or 8
          # in new terminals it should be
          8

          &gt;_ string length --visible abcdef\r123
          # this displays as "123def", so the width is 6
          6

          &gt;_ string length --visible a\nbc
          # counts "a" and "bc" as separate lines, so it prints width for each
          1
          2

   <b>string-lower</b> <b>-</b> <b>convert</b> <b>strings</b> <b>to</b> <b>lowercase</b>
   <b>Synopsis</b>
       <b>string</b> <b>lower</b> [<b>-q</b> | <b>--quiet</b>] [<u>STRING</u> ...]

   <b>Description</b>
       <b>string</b> <b>lower</b> converts each string argument to lowercase. Exit status:  0  if  at  least  one  string  was
       converted  to  lowercase,  else  1.  This means that in conjunction with the <b>-q</b> flag you can readily test
       whether a string is already lowercase.

   <b>string-match</b> <b>-</b> <b>match</b> <b>substrings</b>
   <b>Synopsis</b>
       <b>string</b> <b>match</b> [<b>-a</b> | <b>--all</b>] [<b>-e</b> | <b>--entire</b>] [<b>-i</b> | <b>--ignore-case</b>]
                    [<b>-g</b> | <b>--groups-only</b>] [<b>-r</b> | <b>--regex</b>] [<b>-n</b> | <b>--index</b>]
                    [<b>-q</b> | <b>--quiet</b>] [<b>-v</b> | <b>--invert</b>] [(<b>-m</b> | <b>--max-matches</b>) <u>MAX</u>]
                    <u>PATTERN</u> [<u>STRING</u> ...]

   <b>Description</b>
       <b>string</b> <b>match</b> tests each <u>STRING</u> against <u>PATTERN</u> and prints matching substrings. Only the first  match  for
       each <u>STRING</u> is reported unless <b>-a</b> or <b>--all</b> is given, in which case all matches are reported.

       If you specify the <b>-e</b> or <b>--entire</b> then each matching string is printed including any prefix or suffix not
       matched  by  the  pattern  (equivalent to <b>grep</b> without the <b>-o</b> flag). You can, obviously, achieve the same
       result by prepending and appending <b>*</b> or <b>.*</b> depending on whether or not you  have  specified  the  <b>--regex</b>
       flag.  The  <b>--entire</b>  flag  is simply a way to avoid having to complicate the pattern in that fashion and
       make the intent of the <b>string</b> <b>match</b> clearer. Without <b>--entire</b> and <b>--regex</b>, a <u>PATTERN</u> will need  to  match
       the entire <u>STRING</u> before it will be reported.

       Matching can be made case-insensitive with <b>--ignore-case</b> or <b>-i</b>.

       If <b>--groups-only</b> or <b>-g</b> is given, only the capturing groups will be reported - meaning the full match will
       be  skipped.  This  is  incompatible  with <b>--entire</b> and <b>--invert</b>, and requires <b>--regex</b>. It is useful as a
       simple cutting tool instead of <b>string</b> <b>replace</b>, so you can simply choose "this part" of a string.

       If <b>--index</b> or <b>-n</b> is given, each match is reported as a 1-based start position and a length.  By  default,
       PATTERN  is  interpreted as a glob pattern matched against each entire <u>STRING</u> argument. A glob pattern is
       only considered a valid match if it matches the entire <u>STRING</u>.

       If <b>--regex</b> or <b>-r</b> is given, <u>PATTERN</u> is interpreted as a Perl-compatible regular expression, which does not
       have to match the entire <u>STRING</u>. For a regular expression containing  capturing  groups,  multiple  items
       will  be  reported  for each match, one for the entire match and one for each capturing group. With this,
       only the matching part of the <u>STRING</u> will be reported, unless <b>--entire</b> is given.

       When matching via regular expressions, <b>string</b> <b>match</b> automatically sets variables for all named  capturing
       groups (<b>(?&lt;name&gt;expression)</b>). It will create a variable with the name of the group, in the default scope,
       for  each  named  capturing  group,  and  set it to the value of the capturing group in the first matched
       argument. If a named capture group matched an empty string, the variable will be set to the empty  string
       (like <b>set</b> <b>var</b> <b>""</b>). If it did not match, the variable will be set to nothing (like <b>set</b> <b>var</b>).  When <b>--regex</b>
       is  used  with <b>--all</b>, this behavior changes. Each named variable will contain a list of matches, with the
       first match contained in the first element, the second match in the second, and so on. If the  group  was
       empty or did not match, the corresponding element will be an empty string.

       If <b>--invert</b> or <b>-v</b> is used the selected lines will be only those which do not match the given glob pattern
       or regular expression.

       If  <b>--max-matches</b>  <b>MAX</b>  or <b>-m</b> <b>MAX</b> is used, <b>string</b> will stop checking for matches after MAX lines of input
       have matched. This can be used as an "early exit" optimization when processing long inputs but  expecting
       a  limited  and fixed number of outputs that might be found considerably before the input stream has been
       exhausted. If combined with <b>--invert</b> or <b>-v</b>, considers only inverted matches.

       Exit status: 0 if at least one match was found, or 1 otherwise.

   <b>Examples</b>
   <b>Match</b> <b>Glob</b> <b>Examples</b>
          &gt;_ string match '?' a
          a

          &gt;_ string match 'a*b' axxb
          axxb

          &gt;_ string match -i 'a??B' Axxb
          Axxb

          &gt;_ string match -- '-*' -h foo --version bar
          # To match things that look like options, we need a `--`
          # to tell string its options end there.
          -h
          --version

          &gt;_ echo 'ok?' | string match '*\?'
          ok?

          # Note that only the second STRING will match here.
          &gt;_ string match 'foo' 'foo1' 'foo' 'foo2'
          foo

          &gt;_ string match -e 'foo' 'foo1' 'foo' 'foo2'
          foo1
          foo
          foo2

          &gt;_ string match 'foo?' 'foo1' 'foo' 'foo2'
          foo1
          foo2

   <b>Match</b> <b>Regex</b> <b>Examples</b>
          &gt;_ string match -r 'cat|dog|fish' 'nice dog'
          dog

          &gt;_ string match -r -v "c.*[12]" {cat,dog}(seq 1 4)
          dog1
          dog2
          cat3
          dog3
          cat4
          dog4

          &gt;_ string match -r -- '-.*' -h foo --version bar
          # To match things that look like options, we need a `--`
          # to tell string its options end there.
          -h
          --version

          &gt;_ string match -r '(\d\d?):(\d\d):(\d\d)' 2:34:56
          2:34:56
          2
          34
          56

          &gt;_ string match -r '^(\w{2,4})\1$' papa mud murmur
          papa
          pa
          murmur
          mur

          &gt;_ string match -r -a -n at ratatat
          2 2
          4 2
          6 2

          &gt;_ string match -r -i '0x[0-9a-f]{1,8}' 'int magic = 0xBadC0de;'
          0xBadC0de

          &gt;_ echo $version
          3.1.2-1575-ga2ff32d90
          &gt;_ string match -rq '(?&lt;major&gt;\d+).(?&lt;minor&gt;\d+).(?&lt;revision&gt;\d+)' -- $version
          &gt;_ echo "You are using fish $major!"
          You are using fish 3!

          &gt;_ string match -raq ' *(?&lt;sentence&gt;[^.!?]+)(?&lt;punctuation&gt;[.!?])?' "hello, friend. goodbye"
          &gt;_ printf "%s\n" -- $sentence
          hello, friend
          goodbye
          &gt;_ printf "%s\n" -- $punctuation
          .

          &gt;_ string match -rq '(?&lt;word&gt;hello)' 'hi'
          &gt;_ count $word
          0

   <b>string-pad</b> <b>-</b> <b>pad</b> <b>strings</b> <b>to</b> <b>a</b> <b>fixed</b> <b>width</b>
   <b>Synopsis</b>
       <b>string</b> <b>pad</b> [<b>-r</b> | <b>--right</b>] [(<b>-c</b> | <b>--char</b>) <u>CHAR</u>] [(<b>-w</b> | <b>--width</b>) <u>INTEGER</u>]
                  [<u>STRING</u> ...]

   <b>Description</b>
       <b>string</b> <b>pad</b> extends each <u>STRING</u> to the given visible width by adding <u>CHAR</u> to  the  left.  That  means  the
       width  of  all  visible  characters  added  together,  excluding  escape  sequences  and  accounting  for
       <u>fish_emoji_width</u> and <u>fish_ambiguous_width</u>. It is the amount of columns in a terminal the <u>STRING</u> occupies.

       The escape sequences reflect what fish knows about, and how it computes its output. Your  terminal  might
       support more escapes, or not support escape sequences that fish knows about.

       If <b>-r</b> or <b>--right</b> is given, add the padding after a string.

       If <b>-c</b> or <b>--char</b> is given, pad with <u>CHAR</u> instead of whitespace.

       The  output  is padded to the maximum width of all input strings. If <b>-w</b> or <b>--width</b> is given, use at least
       that.

   <b>Examples</b>
          &gt;_ string pad -w 10 abc abcdef
                 abc
              abcdef

          &gt;_ string pad --right --char=🐟 "fish are pretty" "rich. "
          fish are pretty
          rich.  🐟🐟🐟🐟

          &gt;_ string pad -w$COLUMNS (date)
          # Prints the current time on the right edge of the screen.

   <b>See</b> <b>Also</b>
       • The <u>printf</u> command can do simple padding, for example <b>printf</b> <b>%10s\n</b> works like <b>string</b> <b>pad</b> <b>-w10</b>.

       • <u>string</u> <u>length</u> with the <b>--visible</b> option can be used to show what fish thinks the width is.

   <b>string-repeat</b> <b>-</b> <b>multiply</b> <b>a</b> <b>string</b>
   <b>Synopsis</b>
       <b>string</b> <b>repeat</b> [(<b>-n</b> | <b>--count</b>) <u>COUNT</u>] [(<b>-m</b> | <b>--max</b>) <u>MAX</u>] [<b>-N</b> | <b>--no-newline</b>]
                     [<b>-q</b> | <b>--quiet</b>] [<u>STRING</u> ...]
       <b>string</b> <b>repeat</b> [<b>-N</b> | <b>--no-newline</b>] [<b>-q</b> | <b>--quiet</b>] <u>COUNT</u> [<u>STRING</u> ...]

   <b>Description</b>
       <b>string</b> <b>repeat</b> repeats the <u>STRING</u> <b>-n</b> or <b>--count</b> times. The <b>-m</b> or <b>--max</b> option will  limit  the  number  of
       outputted  characters  (excluding  the newline). This option can be used by itself or in conjunction with
       <b>--count</b>. If both <b>--count</b> and <b>--max</b> are present, max char will be  outputted  unless  the  final  repeated
       string  size  is  less  than max, in that case, the string will repeat until count has been reached. Both
       <b>--count</b> and <b>--max</b> will accept a number greater than or equal to zero, in the case of zero,  nothing  will
       be  outputted.  The  first  argument  is  interpreted  as  <u>COUNT</u>  if  <b>--count</b> or <b>--max</b> are not explicitly
       specified. If <b>-N</b> or <b>--no-newline</b> is given, the output won't contain a newline character at the end.  Exit
       status: 0 if yielded string is not empty, 1 otherwise.

   <b>Examples</b>
   <b>Repeat</b> <b>Examples</b>
          &gt;_ string repeat -n 2 'foo '
          foo foo

          &gt;_ echo foo | string repeat -n 2
          foofoo

          &gt;_ string repeat -n 2 -m 5 'foo'
          foofo

          &gt;_ string repeat -m 5 'foo'
          foofo

          &gt;_ string repeat 2 'foo'
          foofoo

          &gt;_ string repeat 2 -n 3
          222

   <b>string-replace</b> <b>-</b> <b>replace</b> <b>substrings</b>
   <b>Synopsis</b>
       <b>string</b> <b>replace</b> [<b>-a</b> | <b>--all</b>] [<b>-f</b> | <b>--filter</b>] [<b>-i</b> | <b>--ignore-case</b>]
                      [<b>-r</b> | <b>--regex</b>] [(<b>-m</b> | <b>--max-matches</b>) <u>MAX</u>] [<b>-q</b> | <b>--quiet</b>]
                      <u>PATTERN</u> <u>REPLACEMENT</u> [<u>STRING</u> ...]

   <b>Description</b>
       <b>string</b>  <b>replace</b>  is  similar  to  <b>string</b>  <b>match</b>  but  replaces non-overlapping matching substrings with a
       replacement string and prints the result. By default, <u>PATTERN</u> is treated as a  literal  substring  to  be
       matched.

       If  <b>-r</b>  or  <b>--regex</b>  is  given,  <u>PATTERN</u>  is  interpreted  as  a  Perl-compatible regular expression, and
       <u>REPLACEMENT</u> can contain C-style escape sequences like <b>t</b> as well as  references  to  capturing  groups  by
       number or name as <u>$n</u> or <u>${n}</u>.

       If  you specify the <b>-f</b> or <b>--filter</b> flag then each input string is printed only if a replacement was done.
       This is useful where you would otherwise use this idiom: <b>a_cmd</b> <b>|</b> <b>string</b> <b>match</b> <b>pattern</b>  <b>|</b>  <b>string</b>  <b>replace</b>
       <b>pattern</b> <b>new_pattern</b>. You can instead just write <b>a_cmd</b> <b>|</b> <b>string</b> <b>replace</b> <b>--filter</b> <b>pattern</b> <b>new_pattern</b>.

       If  <b>--max-matches</b> <b>MAX</b> or <b>-m</b> <b>MAX</b> is used, <b>string</b> <b>replace</b> will stop all processing after MAX lines of input
       have matched the specified pattern. In the event of <b>--filter</b> or <b>-f</b>, this means the  output  will  be  MAX
       lines  in  length.  This  can  be  used  as  an "early exit" optimization when processing long inputs but
       expecting a limited and fixed number of outputs that might be found considerably before the input  stream
       has been exhausted.

       Exit status: 0 if at least one replacement was performed, or 1 otherwise.

   <b>Examples</b>
   <b>Replace</b> <b>Literal</b> <b>Examples</b>
          &gt;_ string replace is was 'blue is my favorite'
          blue was my favorite

          &gt;_ string replace 3rd last 1st 2nd 3rd
          1st
          2nd
          last

          &gt;_ string replace -a ' ' _ 'spaces to underscores'
          spaces_to_underscores

   <b>Replace</b> <b>Regex</b> <b>Examples</b>
          &gt;_ string replace -r -a '[^\d.]+' ' ' '0 one two 3.14 four 5x'
          0 3.14 5

          &gt;_ string replace -r '(\w+)\s+(\w+)' '$2 $1 $$' 'left right'
          right left $

          &gt;_ string replace -r '\s*newline\s*' '\n' 'put a newline here'
          put a
          here

   <b>string-shorten</b> <b>-</b> <b>shorten</b> <b>strings</b> <b>to</b> <b>a</b> <b>width,</b> <b>with</b> <b>an</b> <b>ellipsis</b>
   <b>Synopsis</b>
       <b>string</b> <b>shorten</b> [(<b>-c</b> | <b>--char</b>) <u>CHARS</u>] [(<b>-m</b> | <b>--max</b>) <u>INTEGER</u>]
                      [<b>-N</b> | <b>--no-newline</b>] [<b>-l</b> | <b>--left</b>] [<b>-q</b> | <b>--quiet</b>] [<u>STRING</u> ...]

   <b>Description</b>
       <b>string</b>  <b>shorten</b>  truncates  each  <u>STRING</u>  to the given visible width and adds an ellipsis to indicate it.
       "Visible width" means the width of all visible characters added together, excluding escape sequences  and
       accounting  for  <u>fish_emoji_width</u> and <u>fish_ambiguous_width</u>. It is the amount of columns in a terminal the
       <u>STRING</u> occupies.

       The escape sequences reflect what fish knows about, and how it computes its output. Your  terminal  might
       support more escapes, or not support escape sequences that fish knows about.

       If  <b>-m</b>  or <b>--max</b> is given, truncate at the given width. Otherwise, the lowest non-zero width of all input
       strings is used. A max of 0 means no shortening takes place, all STRINGs are printed as-is.

       If <b>-N</b> or <b>--no-newline</b> is given, only the first line (or last line with <b>--left</b>) of each  STRING  is  used,
       and  an  ellipsis  is  added  if  it was multiline. This only works for STRINGs being given as arguments,
       multiple lines given on stdin will be interpreted as separate STRINGs instead.

       If <b>-c</b> or <b>--char</b> is given, add <u>CHAR</u> instead of an ellipsis. This can  also  be  empty  or  more  than  one
       character.

       If  <b>-l</b> or <b>--left</b> is given, remove text from the left on instead, so this prints the longest <u>suffix</u> of the
       string that fits. With <b>--no-newline</b>, this will take from the last line instead of the first.

       If <b>-q</b> or <b>--quiet</b> is given, <b>string</b> <b>shorten</b> only  runs  for  the  return  value  -  if  anything  would  be
       shortened, it returns 0, else 1.

       The  default  ellipsis  is <b>…</b>. If fish thinks your system is incapable because of your locale, it will use
       <b>...</b> instead.

       The return value is 0 if any shortening occurred, 1 otherwise.

   <b>Examples</b>
          &gt;_ string shorten foo foobar
          # No width was given, we infer, and "foo" is the shortest.
          foo
          fo…

          &gt;_ string shorten --char="..." foo foobar
          # The target width is 3 because of "foo",
          # and our ellipsis is 3 too, so we can't really show anything.
          # This is the default ellipsis if your locale doesn't allow "…".
          foo
          ...

          &gt;_ string shorten --char="" --max 4 abcdef 123456
          # Leaving the char empty makes us not add an ellipsis
          # So this truncates at 4 columns:
          abcd
          1234

          &gt;_ touch "a multiline"\n"file"
          &gt;_ for file in *; string shorten -N -- $file; end
          # Shorten the multiline file so we only show one line per file:
          a multiline…

          &gt;_ ss -p | string shorten -m$COLUMNS -c ""
          # `ss` from Linux' iproute2 shows socket information, but prints extremely long lines.
          # This shortens input so it fits on the screen without overflowing lines.

          &gt;_ git branch | string match -rg '^\* (.*)' | string shorten -m20
          # Take the current git branch and shorten it at 20 columns.
          # Here the branch is "builtin-path-with-expand"
          builtin-path-with-e…

          &gt;_ git branch | string match -rg '^\* (.*)' | string shorten -m20 --left
          # Taking 20 columns from the right instead:
          …in-path-with-expand

   <b>See</b> <b>Also</b>
       • <u>string</u>'s <b>pad</b> subcommand does the inverse of this command, adding padding to a specific width instead.

       • The <u>printf</u> command can do simple padding, for example <b>printf</b> <b>%10s\n</b> works like <b>string</b> <b>pad</b> <b>-w10</b>.

       • <u>string</u> <u>length</u> with the <b>--visible</b> option can be used to show what fish thinks the width is.

   <b>string-split</b> <b>-</b> <b>split</b> <b>strings</b> <b>by</b> <b>delimiter</b>
   <b>Synopsis</b>
       <b>string</b> <b>split</b> [(<b>-f</b> | <b>--fields</b>) <u>FIELDS</u>] [(<b>-m</b> | <b>--max</b>) <u>MAX</u>] [<b>-n</b> | <b>--no-empty</b>]
                    [<b>-q</b> | <b>--quiet</b>] [<b>-r</b> | <b>--right</b>] <u>SEP</u> [<u>STRING</u> ...]
       <b>string</b> <b>split0</b> [(<b>-f</b> | <b>--fields</b>) <u>FIELDS</u>] [(<b>-m</b> | <b>--max</b>) <u>MAX</u>] [<b>-n</b> | <b>--no-empty</b>]
                     [<b>-q</b> | <b>--quiet</b>] [<b>-r</b> | <b>--right</b>] [<u>STRING</u> ...]

   <b>Description</b>
       <b>string</b> <b>split</b> splits each <u>STRING</u> on the separator <u>SEP</u>, which can be an empty string. If  <b>-m</b>  or  <b>--max</b>  is
       specified,  at most MAX splits are done on each <u>STRING</u>. If <b>-r</b> or <b>--right</b> is given, splitting is performed
       right-to-left. This is useful in combination with <b>-m</b> or <b>--max</b>. With <b>-n</b> or <b>--no-empty</b>, empty  results  are
       excluded from consideration (e.g. <b>hello\n\nworld</b> would expand to two strings and not three). Exit status:
       0 if at least one split was performed, or 1 otherwise.

       Use  <b>-f</b>  or  <b>--fields</b>  to  print out specific fields. FIELDS is a comma-separated string of field numbers
       and/or spans. Each field is one-indexed, and will be printed on separate lines. If a given field does not
       exist, then the command exits with status 1 and does not print anything, unless <b>--allow-empty</b> is used.

       See also the <b>--delimiter</b> option of the <u>read</u> command.

       <b>string</b> <b>split0</b> splits each <u>STRING</u> on the zero byte (NUL). Options are the same as <b>string</b> <b>split</b> except that
       no separator is given.

       <b>split0</b> has the important property  that  its  output  is  not  further  split  when  used  in  a  command
       substitution, allowing for the command substitution to produce elements containing newlines. This is most
       useful  when  used  with  Unix tools that produce zero bytes, such as <b>find</b> <b>-print0</b> or <b>sort</b> <b>-z</b>. See split0
       examples below.

   <b>Examples</b>
          &gt;_ string split . example.com
          example
          com

          &gt;_ string split -r -m1 / /usr/local/bin/fish
          <a href="file:/usr/local/bin">/usr/local/bin</a>
          fish

          &gt;_ string split '' abc
          a
          b
          c

          &gt;_ string split --allow-empty -f1,3-4,5 '' abcd
          a
          c
          d

   <b>NUL</b> <b>Delimited</b> <b>Examples</b>
          &gt;_ # Count files in a directory, without being confused by newlines.
          &gt;_ count (find . -print0 | string split0)
          42

          &gt;_ # Sort a list of elements which may contain newlines
          &gt;_ set foo beta alpha\ngamma
          &gt;_ set foo (string join0 $foo | sort -z | string split0)
          &gt;_ string escape $foo[1]
          alpha\ngamma

   <b>string-split0</b> <b>-</b> <b>split</b> <b>on</b> <b>zero</b> <b>bytes</b>
   <b>Synopsis</b>
       <b>string</b> <b>split</b> [(<b>-f</b> | <b>--fields</b>) <u>FIELDS</u>] [(<b>-m</b> | <b>--max</b>) <u>MAX</u>] [<b>-n</b> | <b>--no-empty</b>]
                    [<b>-q</b> | <b>--quiet</b>] [<b>-r</b> | <b>--right</b>] <u>SEP</u> [<u>STRING</u> ...]
       <b>string</b> <b>split0</b> [(<b>-f</b> | <b>--fields</b>) <u>FIELDS</u>] [(<b>-m</b> | <b>--max</b>) <u>MAX</u>] [<b>-n</b> | <b>--no-empty</b>]
                     [<b>-q</b> | <b>--quiet</b>] [<b>-r</b> | <b>--right</b>] [<u>STRING</u> ...]

   <b>Description</b>
       <b>string</b> <b>split</b> splits each <u>STRING</u> on the separator <u>SEP</u>, which can be an empty string. If  <b>-m</b>  or  <b>--max</b>  is
       specified,  at most MAX splits are done on each <u>STRING</u>. If <b>-r</b> or <b>--right</b> is given, splitting is performed
       right-to-left. This is useful in combination with <b>-m</b> or <b>--max</b>. With <b>-n</b> or <b>--no-empty</b>, empty  results  are
       excluded from consideration (e.g. <b>hello\n\nworld</b> would expand to two strings and not three). Exit status:
       0 if at least one split was performed, or 1 otherwise.

       Use  <b>-f</b>  or  <b>--fields</b>  to  print out specific fields. FIELDS is a comma-separated string of field numbers
       and/or spans. Each field is one-indexed, and will be printed on separate lines. If a given field does not
       exist, then the command exits with status 1 and does not print anything, unless <b>--allow-empty</b> is used.

       See also the <b>--delimiter</b> option of the <u>read</u> command.

       <b>string</b> <b>split0</b> splits each <u>STRING</u> on the zero byte (NUL). Options are the same as <b>string</b> <b>split</b> except that
       no separator is given.

       <b>split0</b> has the important property  that  its  output  is  not  further  split  when  used  in  a  command
       substitution, allowing for the command substitution to produce elements containing newlines. This is most
       useful  when  used  with  Unix tools that produce zero bytes, such as <b>find</b> <b>-print0</b> or <b>sort</b> <b>-z</b>. See split0
       examples below.

   <b>Examples</b>
          &gt;_ string split . example.com
          example
          com

          &gt;_ string split -r -m1 / /usr/local/bin/fish
          <a href="file:/usr/local/bin">/usr/local/bin</a>
          fish

          &gt;_ string split '' abc
          a
          b
          c

          &gt;_ string split --allow-empty -f1,3-4,5 '' abcd
          a
          c
          d

   <b>NUL</b> <b>Delimited</b> <b>Examples</b>
          &gt;_ # Count files in a directory, without being confused by newlines.
          &gt;_ count (find . -print0 | string split0)
          42

          &gt;_ # Sort a list of elements which may contain newlines
          &gt;_ set foo beta alpha\ngamma
          &gt;_ set foo (string join0 $foo | sort -z | string split0)
          &gt;_ string escape $foo[1]
          alpha\ngamma

   <b>string-sub</b> <b>-</b> <b>extract</b> <b>substrings</b>
   <b>Synopsis</b>
       <b>string</b> <b>sub</b> [(<b>-s</b> | <b>--start</b>) <u>START</u>] [(<b>-e</b> | <b>--end</b>) <u>END</u>] [(<b>-l</b> | <b>--length</b>) <u>LENGTH</u>]
                  [<b>-q</b> | <b>--quiet</b>] [<u>STRING</u> ...]

   <b>Description</b>
       <b>string</b> <b>sub</b> prints a substring of each string argument. The start/end of the substring  can  be  specified
       with  <b>-s</b>/<b>-e</b> or <b>--start</b>/<b>--end</b> followed by a 1-based index value. Positive index values are relative to the
       start of the string and negative index values are relative to the end of the string.  The  default  start
       value is 1. The length of the substring can be specified with <b>-l</b> or <b>--length</b>. If the length or end is not
       specified,  the  substring  continues to the end of each STRING. Exit status: 0 if at least one substring
       operation was performed, 1 otherwise. <b>--length</b> is mutually exclusive with <b>--end</b>.

   <b>Examples</b>
          &gt;_ string sub --length 2 abcde
          ab

          &gt;_ string sub -s 2 -l 2 abcde
          bc

          &gt;_ string sub --start=-2 abcde
          de

          &gt;_ string sub --end=3 abcde
          abc

          &gt;_ string sub -e -1 abcde
          abcd

          &gt;_ string sub -s 2 -e -1 abcde
          bcd

          &gt;_ string sub -s -3 -e -2 abcde
          c

   <b>string-trim</b> <b>-</b> <b>remove</b> <b>trailing</b> <b>whitespace</b>
   <b>Synopsis</b>
       <b>string</b> <b>trim</b> [<b>-l</b> | <b>--left</b>] [<b>-r</b> | <b>--right</b>] [(<b>-c</b> | <b>--chars</b>) <u>CHARS</u>]
                   [<b>-q</b> | <b>--quiet</b>] [<u>STRING</u> ...]

   <b>Description</b>
       <b>string</b> <b>trim</b> removes leading and trailing whitespace from each <u>STRING</u>. If <b>-l</b>  or  <b>--left</b>  is  given,  only
       leading whitespace is removed. If <b>-r</b> or <b>--right</b> is given, only trailing whitespace is trimmed.

       The  <b>-c</b> or <b>--chars</b> switch causes the set of characters in <u>CHARS</u> to be removed instead of whitespace. This
       is a set of characters, not a string - if you pass <b>-c</b> <b>foo</b>, it will remove any "f" or "o", not just  "foo"
       as a whole.

       Exit status: 0 if at least one character was trimmed, or 1 otherwise.

   <b>Examples</b>
          &gt;_ string trim ' abc  '
          abc

          &gt;_ string trim --right --chars=yz xyzzy zany
          x
          zan

   <b>string-unescape</b> <b>-</b> <b>expand</b> <b>escape</b> <b>sequences</b>
   <b>Synopsis</b>
       <b>string</b> <b>escape</b> [<b>-n</b> | <b>--no-quoted</b>] [<b>--style=</b>] [<u>STRING</u> ...]
       <b>string</b> <b>unescape</b> [<b>--style=</b>] [<u>STRING</u> ...]

   <b>Description</b>
       <b>string</b> <b>escape</b> escapes each <u>STRING</u> in one of several ways.

       <b>--style=script</b>  (default)  alters  the  string  such  that  it  can be passed back to <b>eval</b> to produce the
       original argument again. By default, all special characters are escaped, and quotes are used to  simplify
       the  output when possible. If <b>-n</b> or <b>--no-quoted</b> is given, the simplifying quoted format is not used. Exit
       status: 0 if at least one string was escaped, or 1 otherwise.

       <b>--style=var</b> ensures the string can be used as a  variable  name  by  hex  encoding  any  non-alphanumeric
       characters. The string is first converted to UTF-8 before being encoded.

       <b>--style=url</b> ensures the string can be used as a URL by hex encoding any character which is not legal in a
       URL. The string is first converted to UTF-8 before being encoded.

       <b>--style=regex</b> escapes an input string for literal matching within a regex expression. The string is first
       converted to UTF-8 before being encoded.

       <b>string</b>  <b>unescape</b>  performs the inverse of the <b>string</b> <b>escape</b> command. If the string to be unescaped is not
       properly formatted it  is  ignored.  For  example,  doing  <b>string</b>  <b>unescape</b>  <b>--style=var</b>  <b>(string</b>  <b>escape</b>
       <b>--style=var</b> <b>$str)</b> will return the original string. There is no support for unescaping <b>--style=regex</b>.

   <b>Examples</b>
          &gt;_ echo \x07 | string escape
          \cg

          &gt;_ string escape --style=var 'a1 b2'\u6161
          a1_20_b2_E6_85_A1_

   <b>string-upper</b> <b>-</b> <b>convert</b> <b>strings</b> <b>to</b> <b>uppercase</b>
   <b>Synopsis</b>
       <b>string</b> <b>upper</b> [<b>-q</b> | <b>--quiet</b>] [<u>STRING</u> ...]

   <b>Description</b>
       <b>string</b>  <b>upper</b>  converts  each  string  argument  to  uppercase. Exit status: 0 if at least one string was
       converted to uppercase, else 1. This means that in conjunction with the <b>-q</b>  flag  you  can  readily  test
       whether a string is already uppercase.

   <b>suspend</b> <b>-</b> <b>suspend</b> <b>the</b> <b>current</b> <b>shell</b>
   <b>Synopsis</b>
       <b>suspend</b> [<b>--force</b>]

   <b>Description</b>
       <b>suspend</b>  suspends  execution  of  the  current  shell  by  sending  it a SIGTSTP signal, returning to the
       controlling process. It can be resumed later by sending it a SIGCONT.  In order to prevent  suspending  a
       shell that doesn't have a controlling process, it will not suspend the shell if it is a login shell. This
       requirement is bypassed if the <b>--force</b> option is given or the shell is not interactive.

   <b>switch</b> <b>-</b> <b>conditionally</b> <b>execute</b> <b>a</b> <b>block</b> <b>of</b> <b>commands</b>
   <b>Synopsis</b>
       <b>switch</b> <u>VALUE</u><b>;</b> [<b>case</b> [<u>GLOB</u> ...]<b>;</b> [<u>COMMANDS</u> ...]<b>;</b> ...] <b>end</b>

   <b>Description</b>
       <b>switch</b>  performs  one of several blocks of commands, depending on whether a specified value equals one of
       several globbed values. <b>case</b> is used together with the <b>switch</b> statement in order to determine which block
       should be executed.

       Each <b>case</b> command is given one or more parameters. The first <b>case</b> command with a parameter  that  matches
       the  string  specified  in the switch command will be evaluated. <b>case</b> parameters may contain globs. These
       need to be escaped or quoted in order to avoid regular glob expansion using filenames.

       Note that fish does not fall through on case statements. Only the first matching case is executed.

       Note that <u>break</u> cannot be used to exit a case/switch block early like in other languages. It can only  be
       used in loops.

       Note  that command substitutions in a case statement will be evaluated even if its body is not taken. All
       substitutions, including command substitutions, must be  performed  before  the  value  can  be  compared
       against the parameter.

   <b>Example</b>
       If the variable <b>$animal</b> contains the name of an animal, the following code would attempt to classify it:

          switch $animal
              case cat
                  echo evil
              case wolf dog human moose dolphin whale
                  echo mammal
              case duck goose albatross
                  echo bird
              case shark trout stingray
                  echo fish
              case '*'
                  echo I have no idea what a $animal is
          end

       If the above code was run with <b>$animal</b> set to <b>whale</b>, the output would be <b>mammal</b>.

   <b>test</b> <b>-</b> <b>perform</b> <b>tests</b> <b>on</b> <b>files</b> <b>and</b> <b>text</b>
   <b>Synopsis</b>
       <b>test</b> [<u>EXPRESSION</u>]
       <b>[</b> [<u>EXPRESSION</u>] <b>]</b>

   <b>Description</b>
       NOTE:  This page documents the fish builtin <b>test</b>.  To see the documentation on any non-fish versions, use
       <b>command</b> <b>man</b> <b>test</b>.

       <b>test</b> checks the given conditions and sets the exit status to 0 if they are true, 1 if they are false.

       The first form (<b>test</b>) is preferred. For compatibility with other shells, the second form is available:  a
       matching pair of square brackets (<b>[</b> <b>[EXPRESSION]</b> <b>]</b>).

       When  using  a variable or command substitution as an argument with <b>test</b> you should almost always enclose
       it in double-quotes, as variables expanding to zero or more than one argument will most  likely  interact
       badly with <b>test</b>.

       <b>WARNING:</b>
          For  historical  reasons,  <b>test</b>  supports  the  one-argument  form  (<b>test</b>  <b>foo</b>), and this will also be
          triggered by e.g. <b>test</b> <b>-n</b> <b>$foo</b> if $foo is unset. We recommend you don't use the one-argument form  and
          quote all variables or command substitutions used with <b>test</b>.

          This  confusing  misfeature will be removed in future. <b>test</b> <b>-n</b> without any additional argument will be
          false, <b>test</b> <b>-z</b> will be true and any other invocation with exactly one  or  zero  arguments,  including
          <b>test</b> <b>-d</b> and <b>test</b> <b>"foo"</b> will be an error.

          The same goes for <b>[</b>, e.g. <b>[</b> <b>"foo"</b> <b>]</b> and <b>[</b> <b>-d</b> <b>]</b> will be errors.

          This  can  be  turned on already via the <b>test-require-arg</b> <u>feature</u> <u>flag</u>, and will eventually become the
          default and then only option.

   <b>Operators</b> <b>for</b> <b>files</b> <b>and</b> <b>directories</b>
       <b>-b</b> <u>FILE</u>
              Returns true if <u>FILE</u> is a block device.

       <b>-c</b> <u>FILE</u>
              Returns true if <u>FILE</u> is a character device.

       <b>-d</b> <u>FILE</u>
              Returns true if <u>FILE</u> is a directory.

       <b>-e</b> <u>FILE</u>
              Returns true if <u>FILE</u> exists.

       <b>-f</b> <u>FILE</u>
              Returns true if <u>FILE</u> is a regular file.

       <b>-g</b> <u>FILE</u>
              Returns true if <u>FILE</u> has the set-group-ID bit set.

       <b>-G</b> <u>FILE</u>
              Returns true if <u>FILE</u> exists and has the same group ID as the current user.

       <b>-k</b> <u>FILE</u>
              Returns true if <u>FILE</u> has the sticky bit set. If the OS does not support  the  concept  it  returns
              false. See <u>https://en.wikipedia.org/wiki/Sticky_bit</u>.

       <b>-L</b> <u>FILE</u>
              Returns true if <u>FILE</u> is a symbolic link.

       <b>-O</b> <u>FILE</u>
              Returns true if <u>FILE</u> exists and is owned by the current user.

       <b>-p</b> <u>FILE</u>
              Returns true if <u>FILE</u> is a named pipe.

       <b>-r</b> <u>FILE</u>
              Returns true if <u>FILE</u> is marked as readable.

       <b>-s</b> <u>FILE</u>
              Returns true if the size of <u>FILE</u> is greater than zero.

       <b>-S</b> <u>FILE</u>
              Returns true if <u>FILE</u> is a socket.

       <b>-t</b> <u>FD</u>  Returns true if the file descriptor <u>FD</u> is a terminal (TTY).

       <b>-u</b> <u>FILE</u>
              Returns true if <u>FILE</u> has the set-user-ID bit set.

       <b>-w</b> <u>FILE</u>
              Returns  true  if  <u>FILE</u>  is marked as writable; note that this does not check if the filesystem is
              read-only.

       <b>-x</b> <u>FILE</u>
              Returns true if <u>FILE</u> is marked as executable.

   <b>Operators</b> <b>to</b> <b>compare</b> <b>files</b> <b>and</b> <b>directories</b>
       <u>FILE1</u> <b>-nt</b> <u>FILE2</u>
              Returns true if <u>FILE1</u> is newer than <u>FILE2</u>, or <u>FILE1</u> exists and <u>FILE2</u> does not.

       <u>FILE1</u> <b>-ot</b> <u>FILE2</u>
              Returns true if <u>FILE1</u> is older than <u>FILE2</u>, or <u>FILE2</u> exists and <u>FILE1</u> does not.

       <u>FILE1</u> <b>-ef</b> <u>FILE1</u>
              Returns true if <u>FILE1</u> and <u>FILE2</u> refer to the same file.

   <b>Operators</b> <b>for</b> <b>text</b> <b>strings</b>
       <u>STRING1</u> <b>=</b> <u>STRING2</u>
              Returns true if the strings <u>STRING1</u> and <u>STRING2</u> are identical.

       <u>STRING1</u> <b>!=</b> <u>STRING2</u>
              Returns true if the strings <u>STRING1</u> and <u>STRING2</u> are not identical.

       <b>-n</b> <u>STRING</u>
              Returns true if the length of <u>STRING</u> is non-zero.

       <b>-z</b> <u>STRING</u>
              Returns true if the length of <u>STRING</u> is zero.

   <b>Operators</b> <b>to</b> <b>compare</b> <b>and</b> <b>examine</b> <b>numbers</b>
       <u>NUM1</u> <b>-eq</b> <u>NUM2</u>
              Returns true if <u>NUM1</u> and <u>NUM2</u> are numerically equal.

       <u>NUM1</u> <b>-ne</b> <u>NUM2</u>
              Returns true if <u>NUM1</u> and <u>NUM2</u> are not numerically equal.

       <u>NUM1</u> <b>-gt</b> <u>NUM2</u>
              Returns true if <u>NUM1</u> is greater than <u>NUM2</u>.

       <u>NUM1</u> <b>-ge</b> <u>NUM2</u>
              Returns true if <u>NUM1</u> is greater than or equal to <u>NUM2</u>.

       <u>NUM1</u> <b>-lt</b> <u>NUM2</u>
              Returns true if <u>NUM1</u> is less than <u>NUM2</u>.

       <u>NUM1</u> <b>-le</b> <u>NUM2</u>
              Returns true if <u>NUM1</u> is less than or equal to <u>NUM2</u>.

       Both integers and floating point numbers are supported.

   <b>Operators</b> <b>to</b> <b>combine</b> <b>expressions</b>
       <u>COND1</u> <b>-a</b> <u>COND2</u>
              Returns true if both <u>COND1</u> and <u>COND2</u> are true.

       <u>COND1</u> <b>-o</b> <u>COND2</u>
              Returns true if either <u>COND1</u> or <u>COND2</u> are true.

       Expressions can be inverted using the <b>!</b> operator:

       <b>!</b> <u>EXPRESSION</u>
              Returns true if <u>EXPRESSION</u> is false, and false if <u>EXPRESSION</u> is true.

       Expressions can be grouped using parentheses.

       <b>(</b> <u>EXPRESSION</u> <b>)</b>
              Returns the value of <u>EXPRESSION</u>.

       Note that parentheses will usually require escaping with <b>\</b> (so they appear as <b>\(</b> and <b>\)</b>) to  avoid  being
       interpreted as a command substitution.

   <b>Examples</b>
       If the <b><a href="file:/tmp">/tmp</a></b> directory exists, copy the <b>/etc/motd</b> file to it:

          if test -d <a href="file:/tmp">/tmp</a>
              cp /etc/motd /tmp/motd
          end

       If the variable <b>MANPATH</b> is defined and not empty, print the contents. (If <b>MANPATH</b> is not defined, then it
       will expand to zero arguments, unless quoted.)

          if test -n "$MANPATH"
              echo $MANPATH
          end

       Be careful with unquoted variables:

          if test -n $MANPATH
              # This will also be reached if $MANPATH is unset,
              # because in that case we have `test -n`, so it checks if "-n" is non-empty, and it is.
              echo $MANPATH
          end

       This  will  change  in  a  future release of fish, or already with the <b>test-require-arg</b> <u>feature</u> <u>flag</u> - if
       $MANPATH is unset, <b>if</b> <b>test</b> <b>-n</b> <b>$MANPATH</b> will be false.

       Parentheses and the <b>-o</b> and <b>-a</b> operators can be combined to produce more complicated expressions. In  this
       example, success is printed if there is a <b>/foo</b> or <b>/bar</b> file as well as a <b>/baz</b> or <b>/bat</b> file.

          if test \( -f /foo -o -f /bar \) -a \( -f /baz -o -f /bat \)
              echo Success.
          end

       Numerical comparisons will simply fail if one of the operands is not a number:

          if test 42 -eq "The answer to life, the universe and everything"
              echo So long and thanks for all the fish # will not be executed
          end

       A common comparison is with <u>status</u>:

          if test $status -eq 0
              echo "Previous command succeeded"
          end

       The previous test can likewise be inverted:

          if test ! $status -eq 0
              echo "Previous command failed"
          end

       which is logically equivalent to the following:

          if test $status -ne 0
              echo "Previous command failed"
          end

   <b>Standards</b>
       Unlike  many  things  in  fish,  <b>test</b>  implements a subset of the <u>IEEE</u> <u>Std</u> <u>1003.1-2008</u> <u>(POSIX.1)</u> <u>standard</u>
       &lt;<b>https://pubs.opengroup.org/onlinepubs/9699919799/utilities/test.html</b>&gt;. The following exceptions apply:

       • The <b>&lt;</b> and <b>&gt;</b> operators for comparing strings are not implemented.

       • With <b>test-require-arg</b>, the zero- and one-argument modes will behave differently.
          In cases such as this, one can use <b>command</b> <b>test</b> to explicitly use the system's standalone <b>test</b>  rather
          than this <b>builtin</b> <b>test</b>.

   <b>See</b> <b>also</b>
       Other commands that may be useful as a condition, and are often easier to use:

       • <u>string</u>  <u>-</u>  <u>manipulate</u> <u>strings</u>, which can do string operations including wildcard and regular expression
         matching

       • <u>path</u> <u>-</u> <u>manipulate</u> <u>and</u> <u>check</u> <u>paths</u>, which can do  file  checks  and  operations,  including  filters  on
         multiple paths at once

   <b>time</b> <b>-</b> <b>measure</b> <b>how</b> <b>long</b> <b>a</b> <b>command</b> <b>or</b> <b>block</b> <b>takes</b>
   <b>Synopsis</b>
       <b>time</b> <u>COMMAND</u>

   <b>Description</b>
       NOTE:  This page documents the fish keyword <b>time</b>.  To see the documentation on any non-fish versions, use
       <b>command</b> <b>man</b> <b>time</b>.

       <b>time</b> causes fish to measure how long a command takes and print the results afterwards. The command can be
       a simple fish command or a block. The results can not currently be redirected.

       For checking timing after a command has completed, check <u>$CMD_DURATION</u>.

       Your system most likely also has a <b>time</b> command. To use that use  something  like  <b>command</b>  <b>time</b>,  as  in
       <b>command</b>  <b>time</b> <b>sleep</b> <b>10</b>. Because it's not inside fish, it won't have access to fish functions and won't be
       able to time blocks and such.

   <b>How</b> <b>to</b> <b>interpret</b> <b>the</b> <b>output</b>
       Time outputs a few different values. Let's look at an example:

          &gt; time string repeat -n 10000000 y\n | command grep y &gt;/dev/null
          ________________________________________________________
          Executed in  805.98 millis    fish           external
             usr time  798.88 millis  763.88 millis   34.99 millis
             sys time  141.22 millis   40.20 millis  101.02 millis

       The time after "Executed in" is what is known as the "wall-clock time". It is simply  a  measure  of  how
       long  it  took  from  the  start  of  the  command until it finished. Typically it is reasonably close to
       <u>CMD_DURATION</u>, except for a slight skew because the two are taken at slightly different times.

       The other times are all measures of CPU time. That means they measure how long the CPU was used  in  this
       part, and they count multiple cores separately. So a program with four threads using all CPU for a second
       will have a time of 4 seconds.

       The  "usr"  time is how much CPU time was spent inside the program itself, the "sys" time is how long was
       spent in the kernel on behalf of that program.

       The "fish" time is how much CPU was spent in fish, the "external" time how much  was  spent  in  external
       commands.

       So  in  this  example, since <b>string</b> is a builtin, everything that <b>string</b> <b>repeat</b> did is accounted to fish.
       Any time it spends doing syscalls like <b>write()</b> is accounted for in the fish/sys time.

       And <b>grep</b> here is explicitly invoked as an  external  command,  so  its  times  will  be  counted  in  the
       "external" column.

       Note  that, as in this example, the CPU times can add up to more than the execution time. This is because
       things can be done in parallel - <b>grep</b> can match while <b>string</b> <b>repeat</b> writes.

   <b>Example</b>
       (for obvious reasons exact results will vary on your system)

          &gt;_ time sleep 1s

          ________________________________________________________
          Executed in    1,01 secs   fish           external
             usr time    2,32 millis    0,00 micros    2,32 millis
             sys time    0,88 millis  877,00 micros    0,00 millis

          &gt;_ time for i in 1 2 3; sleep 1s; end

          ________________________________________________________
          Executed in    3,01 secs   fish           external
             usr time    9,16 millis    2,94 millis    6,23 millis
             sys time    0,23 millis    0,00 millis    0,23 millis

       Inline variable assignments need to follow the <b>time</b> keyword:

          &gt;_ time a_moment=1.5m sleep $a_moment

          ________________________________________________________
          Executed in   90.00 secs      fish           external
             usr time    4.62 millis    4.62 millis    0.00 millis
             sys time    2.35 millis    0.41 millis    1.95 millis

   <b>trap</b> <b>-</b> <b>perform</b> <b>an</b> <b>action</b> <b>when</b> <b>the</b> <b>shell</b> <b>receives</b> <b>a</b> <b>signal</b>
   <b>Synopsis</b>
       <b>trap</b> [<u>OPTIONS</u>] [[<u>ARG</u>] <u>REASON</u> ... <b>]</b>

   <b>Description</b>
       NOTE: This page documents the fish builtin <b>trap</b>.  To see the documentation on any non-fish versions,  use
       <b>command</b> <b>man</b> <b>trap</b>.

       <b>trap</b>  is  a  wrapper around the fish event delivery framework. It exists for backwards compatibility with
       POSIX shells. For other uses, it is recommended to define an <u>event</u> <u>handler</u>.

       The following parameters are available:

       <u>ARG</u>    Command to be executed on signal delivery.

       <u>REASON</u> Name of the event to trap. For example, a signal like <b>INT</b> or <b>SIGINT</b>, or the special symbol <b>EXIT</b>.

       <b>-l</b> or <b>--list-signals</b>
              Prints a list of signal names.

       <b>-p</b> or <b>--print</b>
              Prints all defined signal handlers.

       <b>-h</b> or <b>--help</b>
              Displays help about using this command.

       If <u>ARG</u> and <u>REASON</u> are both specified, <u>ARG</u> is the command to be  executed  when  the  event  specified  by
       <u>REASON</u> occurs (e.g., the signal is delivered).

       If  <u>ARG</u>  is  absent  (and  there is a single <u>REASON</u>) or <b>-</b>, each specified signal is reset to its original
       disposition (the value it had upon entrance to the  shell).   If  <u>ARG</u>  is  the  null  string  the  signal
       specified by each <u>REASON</u> is ignored by the shell and by the commands it invokes.

       If  <u>ARG</u>  is  not present and <b>-p</b> has been supplied, then the trap commands associated with each <u>REASON</u> are
       displayed. If no arguments are supplied or if only  <b>-p</b>  is  given,  <b>trap</b>  prints  the  list  of  commands
       associated with each signal.

       Signal  names  are  case  insensitive and the <b>SIG</b> prefix is optional. Trapping a signal will prevent fish
       from exiting in response to that signal.

       The exit status is 1 if any <u>REASON</u> is invalid; otherwise trap returns 0.

   <b>Example</b>
          trap "status --print-stack-trace" SIGUSR1
          # Prints a stack trace each time the SIGUSR1 signal is sent to the shell.

   <b>true</b> <b>-</b> <b>return</b> <b>a</b> <b>successful</b> <b>result</b>
   <b>Synopsis</b>
       <b>true</b>

   <b>Description</b>
       <b>true</b> sets the exit status to 0.

       <b>:</b> (a single colon) is an alias for the <b>true</b> command.

   <b>See</b> <b>Also</b>
       • <u>false</u> command

       • <u>$status</u> variable

   <b>type</b> <b>-</b> <b>locate</b> <b>a</b> <b>command</b> <b>and</b> <b>describe</b> <b>its</b> <b>type</b>
   <b>Synopsis</b>
       <b>type</b> [<u>OPTIONS</u>] <u>NAME</u> [...]

   <b>Description</b>
       NOTE: This page documents the fish builtin <b>type</b>.  To see the documentation on any non-fish versions,  use
       <b>command</b> <b>man</b> <b>type</b>.

       With no options, <b>type</b> indicates how each <u>NAME</u> would be interpreted if used as a command name.

       The following options are available:

       <b>-a</b> or <b>--all</b>
              Prints all of possible definitions of the specified names.

       <b>-s</b> or <b>--short</b>
              Don't print function definitions when used with no options or with <b>-a</b>/<b>--all</b>.

       <b>-f</b> or <b>--no-functions</b>
              Suppresses function lookup.

       <b>-t</b> or <b>--type</b>
              Prints  <b>function</b>,  <b>builtin</b>,  or  <b>file</b>  if  <u>NAME</u>  is  a  shell  function,  builtin,  or  disk file,
              respectively.

       <b>-p</b> or <b>--path</b>
              Prints the path to <u>NAME</u> if <u>NAME</u> resolves to an executable file in <u>PATH</u>, the  path  to  the  script
              containing  the  definition of the function <u>NAME</u> if <u>NAME</u> resolves to a function loaded from a file
              on disk (i.e. not interactively defined at the prompt), or nothing otherwise.

       <b>-P</b> or <b>--force-path</b>
              Returns the path to the executable file <u>NAME</u>, presuming <u>NAME</u> is  found  in  the  <u>PATH</u>  environment
              variable, or nothing otherwise. <b>--force-path</b> explicitly resolves only the path to executable files
              in  <u>PATH</u>, regardless of whether <u>NAME</u> is shadowed by a function or builtin with the same name.

       <b>-q</b> or <b>--query</b>
              Suppresses  all  output;  this  is useful when testing the exit status. For compatibility with old
              fish versions this is also <b>--quiet</b>.

       <b>-h</b> or <b>--help</b>
              Displays help about using this command.

       The <b>-q</b>, <b>-p</b>, <b>-t</b> and <b>-P</b> flags (and their long flag  aliases)  are  mutually  exclusive.  Only  one  can  be
       specified at a time.

       <b>type</b>  returns  0  if  at  least  one  entry  was  found, 1 otherwise, and 2 for invalid options or option
       combinations.

   <b>Example</b>
          &gt;_ type fg
          fg is a builtin

   <b>ulimit</b> <b>-</b> <b>set</b> <b>or</b> <b>get</b> <b>resource</b> <b>usage</b> <b>limits</b>
   <b>Synopsis</b>
       <b>ulimit</b> [<u>OPTIONS</u>] [<u>LIMIT</u>]

   <b>Description</b>
       <b>ulimit</b> sets or outputs the resource usage limits of the shell and any processes spawned by it. If  a  new
       limit  value  is  omitted,  the  current  value  of  the limit of the resource is printed; otherwise, the
       specified limit is set to the new value.

       Use one of the following switches to specify which resource limit to set or report:

       <b>-b</b> or <b>--socket-buffers</b>
              The maximum size of socket buffers.

       <b>-c</b> or <b>--core-size</b>
              The maximum size of core files created. By setting this limit to zero, core dumps can be disabled.

       <b>-d</b> or <b>--data-size</b>
              The maximum size of a process' data segment.

       <b>-e</b> or <b>--nice</b>
              Controls the maximum nice value; on Linux, this value is subtracted from 20 to give the  effective
              value.

       <b>-f</b> or <b>--file-size</b>
              The maximum size of files created by a process.

       <b>-i</b> or <b>--pending-signals</b>
              The maximum number of signals that may be queued.

       <b>-l</b> or <b>--lock-size</b>
              The maximum size that may be locked into memory.

       <b>-m</b> or <b>--resident-set-size</b>
              The maximum resident set size.

       <b>-n</b> or <b>--file-descriptor-count</b>
              The maximum number of open file descriptors.

       <b>-q</b> or <b>--queue-size</b>
              The maximum size of data in POSIX message queues.

       <b>-r</b> or <b>--realtime-priority</b>
              The maximum realtime scheduling priority.

       <b>-s</b> or <b>--stack-size</b>
              The maximum stack size.

       <b>-t</b> or <b>--cpu-time</b>
              The maximum amount of CPU time in seconds.

       <b>-u</b> or <b>--process-count</b>
              The maximum number of processes available to the current user.

       <b>-w</b> or <b>--swap-size</b>
              The maximum swap space available to the current user.

       <b>-v</b> or <b>--virtual-memory-size</b>
              The maximum amount of virtual memory available to the shell.

       <b>-y</b> or <b>--realtime-maxtime</b>
              The maximum contiguous realtime CPU time in microseconds.

       <b>-K</b> or <b>--kernel-queues</b>
              The maximum number of kqueues (kernel queues) for the current user.

       <b>-P</b> or <b>--ptys</b>
              The maximum number of pseudo-terminals for the current user.

       <b>-T</b> or <b>--threads</b>
              The maximum number of simultaneous threads for the current user.

       Note  that  not  all  these  limits are available in all operating systems; consult the documentation for
       <b>setrlimit</b> in your operating system.

       The value of limit can be a number in the unit specified for the resource or one of  the  special  values
       <b>hard</b>,  <b>soft</b>,  or <b>unlimited</b>, which stand for the current hard limit, the current soft limit, and no limit,
       respectively.

       If limit is given, it is the new value of the specified resource. If no  option  is  given,  then  <b>-f</b>  is
       assumed.  Values  are  in kilobytes, except for <b>-t</b>, which is in seconds and <b>-n</b> and <b>-u</b>, which are unscaled
       values. The exit status is 0 unless an invalid option or argument is supplied, or an error  occurs  while
       setting a new limit.

       <b>ulimit</b> also accepts the following options that determine what type of limit to set:

       <b>-H</b> or <b>--hard</b>
              Sets hard resource limit.

       <b>-S</b> or <b>--soft</b>
              Sets soft resource limit.

       A  hard limit can only be decreased. Once it is set it cannot be increased; a soft limit may be increased
       up to the value of the hard limit. If neither <b>-H</b> nor <b>-S</b> is specified, both the soft and hard  limits  are
       updated when assigning a new limit value, and the soft limit is used when reporting the current value.

       The following additional options are also understood by <b>ulimit</b>:

       <b>-a</b> or <b>--all</b>
              Prints all current limits.

       <b>-h</b> or <b>--help</b>
              Displays help about using this command.

       The  <b>fish</b>  implementation  of  <b>ulimit</b> should behave identically to the implementation in bash, except for
       these differences:

       • Fish <b>ulimit</b> supports GNU-style long options for all switches.

       • Fish <b>ulimit</b> does not support the <b>-p</b> option for getting the pipe size. The bash implementation  consists
         of  a  compile-time  check  that  empirically  guesses this number by writing to a pipe and waiting for
         SIGPIPE. Fish does not do this because this method of determining pipe size is unreliable. Depending on
         bash version, there may also be further additional limits to set in bash that do not exist in fish.

       • Fish <b>ulimit</b> does not support getting or setting multiple limits in one command,  except  reporting  all
         values using the <b>-a</b> switch.

   <b>Example</b>
       <b>ulimit</b> <b>-Hs</b> <b>64</b> sets the hard stack size limit to 64 kB.

   <b>umask</b> <b>-</b> <b>set</b> <b>or</b> <b>get</b> <b>the</b> <b>file</b> <b>creation</b> <b>mode</b> <b>mask</b>
   <b>Synopsis</b>
       <b>umask</b> [<u>OPTIONS</u>] [<u>MASK</u>]

   <b>Description</b>
       NOTE: This page documents the fish builtin <b>umask</b>.  To see the documentation on any non-fish versions, use
       <b>command</b> <b>man</b> <b>umask</b>.

       <b>umask</b>  displays  and  manipulates  the "umask", or file creation mode mask, which is used to restrict the
       default access to files.

       The umask may be expressed either as an octal number, which represents the rights that will be removed by
       default, or symbolically, which represents the only rights that will be granted by default.

       Access rights are explained in the manual page for the <b><a href="../man1/chmod.1.html">chmod</a>(1)</b> program.

       With no parameters, the current file creation mode mask is printed as an octal number.

       <b>-S</b> or <b>--symbolic</b>
              Prints the umask in symbolic form instead of octal form.

       <b>-p</b> or <b>--as-command</b>
              Outputs the umask in a form that may be reused as input.

       <b>-h</b> or <b>--help</b>
              Displays help about using this command.

       If a numeric mask is specified as a parameter, the current shell's umask will be set to that  value,  and
       the rights specified by that mask will be removed from new files and directories by default.

       If a symbolic mask is specified, the desired permission bits, and not the inverse, should be specified. A
       symbolic mask is a comma separated list of rights. Each right consists of three parts:

       • The  first  part  specifies  to whom this set of right applies, and can be one of <b>u</b>, <b>g</b>, <b>o</b> or <b>a</b>, where <b>u</b>
         specifies the user who owns the file, <b>g</b> specifies the group owner of the file, <b>o</b> specific  other  users
         rights and <b>a</b> specifies all three should be changed.

       • The  second part of a right specifies the mode, and can be one of <b>=</b>, <b>+</b> or <b>-</b>, where <b>=</b> specifies that the
         rights should be set to the new value, <b>+</b> specifies that the specified right should be  added  to  those
         previously  specified and <b>-</b> specifies that the specified rights should be removed from those previously
         specified.

       • The third part of a right specifies what rights should be changed and can be any combination  of  <b>r</b>,  <b>w</b>
         and <b>x</b>, representing read, write and execute rights.

       If  the  first and second parts are skipped, they are assumed to be <b>a</b> and <b>=</b>, respectively. As an example,
       <b>r,u+w</b> means all users should have read access and the file owner should also have write access.

       Note that symbolic masks currently do not work as intended.

   <b>Example</b>
       <b>umask</b> <b>177</b> or <b>umask</b> <b>u=rw</b> sets the file creation mask to read and write for the owner and no permissions at
       all for any other users.

   <b>vared</b> <b>-</b> <b>interactively</b> <b>edit</b> <b>the</b> <b>value</b> <b>of</b> <b>an</b> <b>environment</b> <b>variable</b>
   <b>Synopsis</b>
       <b>vared</b> <u>VARIABLE_NAME</u>

   <b>Description</b>
       <b>vared</b> is used to interactively edit the value of an environment variable. Array variables as a whole  can
       not be edited using <b>vared</b>, but individual list elements can.

       The <b>-h</b> or <b>--help</b> option displays help about using this command.

   <b>Example</b>
       <b>vared</b> <b>PATH[3]</b> edits the third element of the PATH list

   <b>wait</b> <b>-</b> <b>wait</b> <b>for</b> <b>jobs</b> <b>to</b> <b>complete</b>
   <b>Synopsis</b>
       <b>wait</b> [<b>-n</b> | <b>--any</b>] [<u>PID</u> | <u>PROCESS_NAME</u>] ...

   <b>Description</b>
       NOTE:  This page documents the fish builtin <b>wait</b>.  To see the documentation on any non-fish versions, use
       <b>command</b> <b>man</b> <b>wait</b>.

       <b>wait</b> waits for child jobs to complete.

       If a <u>PID</u> is specified, the command waits for the job that the process with that process ID belongs to.

       If a <u>PROCESS_NAME</u> is specified, the command waits for the jobs that the matched processes belong to.

       If neither a pid nor a process name is specified, the command waits for all background jobs.

       If the <b>-n</b> or <b>--any</b> flag is provided, the command returns as soon as the first job completes. If it is not
       provided, it returns after all jobs complete.

       The <b>-h</b> or <b>--help</b> option displays help about using this command.

   <b>Example</b>
          sleep 10 &amp;
          wait $last_pid

       spawns <b>sleep</b> in the background, and then waits until it finishes.

          for i in (seq 1 5); sleep 10 &amp;; end
          wait

       spawns five jobs in the background, and then waits until all of them finish.

          for i in (seq 1 5); sleep 10 &amp;; end
          hoge &amp;
          wait sleep

       spawns five <b>sleep</b> jobs and <b>hoge</b> in the background, and then waits until all <b>sleep</b>s  finish,  and  doesn't
       wait for <b>hoge</b>.

   <b>while</b> <b>-</b> <b>perform</b> <b>a</b> <b>set</b> <b>of</b> <b>commands</b> <b>multiple</b> <b>times</b>
   <b>Synopsis</b>
       <b>while</b> <u>CONDITION</u><b>;</b> <u>COMMANDS</u><b>;</b> <b>end</b>

   <b>Description</b>
       <b>while</b> repeatedly executes <b>CONDITION</b>, and if the exit status is 0, then executes <b>COMMANDS</b>.

       The exit status of the <b>while</b> loop is the exit status of the last iteration of the <b>COMMANDS</b> executed, or 0
       if none were executed. (This matches other shells and is POSIX-compatible.)

       You  can  use <u>and</u> or <u>or</u> for complex conditions. Even more complex control can be achieved with <b>while</b> <b>true</b>
       containing a <u>break</u>.

       The <b>-h</b> or <b>--help</b> option displays help about using this command.

   <b>Example</b>
          while test -f foo.txt; or test -f bar.txt ; echo file exists; sleep 10; end
          # outputs 'file exists' at 10 second intervals,
          # as long as the file foo.txt or bar.txt exists.

   <b>Fish</b> <b>for</b> <b>bash</b> <b>users</b>
       This is to give you a quick overview if you come from bash (or to a lesser extent other shells  like  zsh
       or ksh) and want to know how fish differs. Fish is intentionally not POSIX-compatible and as such some of
       the things you are used to work differently.

       Many  things  are  similar - they both fundamentally expand commandlines to execute commands, have pipes,
       redirections, variables, globs, use command output in various ways. This document  is  there  to  quickly
       show you the differences.

   <b>Command</b> <b>substitutions</b>
       Fish spells command substitutions as <b>$(command)</b> or <b>(command)</b>, but not <b>`command`</b>.

       In addition, it only splits them on newlines instead of $IFS. If you want to split on something else, use
       <u>string</u>  <u>split</u>,  <u>string</u>  <u>split0</u>  or  <u>string</u>  <u>collect</u>.  If  those are used as the last command in a command
       substitution the splits they create are carried over. So:

          for i in (find . -print0 | string split0)

       will correctly handle all possible filenames.

   <b>Variables</b>
       Fish sets and erases variables with <u>set</u> instead of <b>VAR=VAL</b>  and  a  variety  of  separate  builtins  like
       <b>declare</b> and <b>unset</b> and <b>export</b>. <b>set</b> takes options to determine the scope and exportedness of a variable:

          # Define $PAGER *g*lobal and e*x*ported,
          # so this is like ``export PAGER=less``
          set -gx PAGER less

          # Define $alocalvariable only locally,
          # like ``local alocalvariable=foo``
          set -l alocalvariable foo

       or to erase variables:

          set -e PAGER

       <b>VAR=VAL</b> statements are available as environment overrides:

          PAGER=cat git log

       Fish does not perform word splitting. Once a variable has been set to a value, that value stays as it is,
       so double-quoting variable expansions isn't the necessity it is in bash. [1]

       For instance, here's bash

          &gt; foo="bar baz"
          &gt; printf '"%s"\n' $foo
          # will print two lines, because we didn't double-quote
          # this is word splitting
          "bar"
          "baz"

       And here is fish:

          &gt; set foo "bar baz"
          &gt; printf '"%s"\n' $foo
          # foo was set as one element,
          # so it will be passed as one element, so this is one line
          "bar baz"

       All  variables  are  "arrays"  (we  use  the  term  "lists"), and expanding a variable expands to all its
       elements, with each element as its own argument (like bash's <b>"${var[@]}"</b>:

          &gt; set var "foo bar" banana
          &gt; printf %s\n $var
          foo bar
          banana

       Specific elements of a list can be selected:

          echo $list[5..7]

       The arguments to <b>set</b> are ordinary, so you can also set a variable to the output of a command:

          # Set lines to all the lines in file, one element per line
          set lines (cat file)

       or a mixture of literal values and output:

          &gt; set numbers 1 2 3 (seq 5 8) 9
          &gt; printf '%s\n' $numbers
          1
          2
          3
          5
          6
          7
          8
          9

       A <b>=</b> is unnecessary and unhelpful with <b>set</b> - <b>set</b> <b>foo</b> <b>=</b> <b>bar</b> will set the variable "foo" to two values:  "="
       and "bar". <b>set</b> <b>foo=bar</b> will print an error.

       See <u>Shell</u> <u>variables</u> for more.

       [1]  zsh also does not perform word splitting by default (the SH_WORD_SPLIT option controls this)

   <b>Wildcards</b> <b>(globs)</b>
       Fish  only  supports  the <b>*</b> and <b>**</b> glob (and the deprecated <b>?</b> glob) as syntax. If a glob doesn't match it
       fails the command (like with bash's <b>failglob</b>) unless the command is <b>for</b>, <b>set</b> or <b>count</b> or the glob is used
       with an environment override (<b>VAR=*</b> <b>command</b>), in which case it  expands  to  nothing  (like  with  bash's
       <b>nullglob</b> option).

       Globbing doesn't happen on expanded variables, so:

          set foo "*"
          echo $foo

       will not match any files.

       There are no options to control globbing so it always behaves like that.

       The  <b>**</b>  glob will match in subdirectories as well. In other shells this often needs to be turned on with
       an option, like <b>setopt</b> <b>globstar</b> in bash.

       Unlike bash, fish will also follow symlinks, and will sort the results in a natural sort,  with  included
       numbers  compared  as  numbers.  That  means  it  will sort e.g. music tracks correctly even if they have
       numbers like <b>1</b> instead of <b>01</b>.

       See <u>Wildcards</u> for more.

   <b>Quoting</b>
       Fish has two quoting styles: <b>""</b> and <b>''</b>. Variables are expanded in double-quotes, nothing is  expanded  in
       single-quotes.

       There is no <b>$''</b>, instead the sequences that would transform are transformed <u>when</u> <u>unquoted</u>:

          &gt; echo a\nb
          a
          b

       See <u>Quotes</u> for more.

   <b>String</b> <b>manipulation</b>
       Fish  does not have <b>${foo%bar}</b>, <b>${foo#bar}</b> and <b>${foo/bar/baz}</b>. Instead string manipulation is done by the
       <u>string</u> builtin.

       For example, to replace "bar" with "baz":

          &gt; string replace bar baz "bar luhrmann"
          baz luhrmann

       It can also split strings:

          &gt; string split "," "foo,bar"
          foo
          bar

       Match regular expressions as a replacement for <b>grep</b>:

          &gt; echo bababa | string match -r 'aba$'
          aba

       Pad strings to a given width, with arbitrary characters:

          &gt; string pad -c x -w 20 "foo"
          xxxxxxxxxxxxxxxxxfoo

       Make strings lower/uppercase:

          &gt; string lower Foo
          foo

          &gt; string upper Foo
          FOO

       repeat strings, trim strings, escape strings or print a string's length or width (in terminal cells).

   <b>Special</b> <b>variables</b>
       Some bash variables and their closest fish equivalent:

       • <b>$*</b>, <b>$@</b>, <b>$1</b> and so on: <b>$argv</b>

       • <b>$?</b>: <b>$status</b>

       • <b>$$</b>: <b>$fish_pid</b>

       • <b>$#</b>: No variable, instead use <b>count</b> <b>$argv</b>

       • <b>$!</b>: <b>$last_pid</b>

       • <b>$0</b>: <b>status</b> <b>filename</b>

       • <b>$-</b>: Mostly <b>status</b> <b>is-interactive</b> and <b>status</b> <b>is-login</b>

   <b>Process</b> <b>substitution</b>
       Instead of <b>&lt;(command)</b> fish uses <b>(command</b> <b>|</b> <b>psub)</b>. There is no equivalent to <b>&gt;(command)</b>.

       Note that both of these are bashisms, and most things can easily be expressed without. E.g. instead of:

          source (command | psub)

       just use:

          command | source

       as fish's <u>source</u> can read from stdin.

   <b>Heredocs</b>
       Fish does not have <b>&lt;&lt;EOF</b> "heredocs". Instead of

          cat &lt;&lt;EOF
          some string
          some more string
          EOF

       use:

          printf %s\n "some string" "some more string"

       or:

          echo "some string
          some more string"

          # or if you want the quotes on separate lines:

          echo "\
          some string
          some more string\
          "

       Quotes are followed across newlines.

       What "heredocs" do is:

       1. Read/interpret the string, with special rules, up to the terminator. [2]

       2. Write the resulting string to a temporary file.

       3. Start the command the heredoc is attached to with that file as stdin.

       This means it is essentially the same as just reading from a pipe, so:

          echo "foo" | cat

       is mostly the same as

          cat &lt;&lt;EOF
          foo
          EOF

       Just like with heredocs, the command has to be prepared to  read  from  stdin.  Sometimes  this  requires
       special options to be used, often giving a filename of <b>-</b> turns it on.

       For example:

          echo "xterm
          rxvt-unicode" | pacman --remove -

          # is the same as (the `-` makes pacman read arguments from stdin)
          pacman --remove xterm rxvt-unicode

       and could be written in other shells as

          # This "-" is still necessary - the heredoc is *also* passed over stdin!
          pacman --remove - &lt;&lt; EOF
          xterm
          rxvt-unicode
          EOF

       So  heredocs really are just minor syntactical sugar that introduces a lot of special rules, which is why
       fish doesn't have them. Pipes are a core concept, and are simpler and compose nicer.

       [2]  For example, the "EOF" is just a convention, the terminator can be an  arbitrary  string,  something
            like  "THISISTHEEND"  also  works.  And  using  <b>&lt;&lt;-</b>  trims  leading  <u>tab</u>  characters  (but not other
            whitespace), so you can indent the lines, but only with tabs.  Substitutions  (variables,  commands)
            are done on the heredoc by default, but not if the terminator is quoted: <b>cat</b> <b>&lt;&lt;</b> <b>"EOF"</b>.

   <b>Test</b> <b>(test,</b> <b>[,</b> <b>[[)</b>
       Fish  has  a  POSIX-compatible <b>test</b> or <b>[</b> builtin. There is no <b>[[</b> and <b>test</b> does not accept <b>==</b> as a synonym
       for <b>=</b>. It can compare floating point numbers, however.

       <b>set</b> <b>-q</b> can be used to determine if a variable exists or has a certain number of elements (<b>set</b> <b>-q</b> <b>foo[2]</b>).

   <b>Arithmetic</b> <b>Expansion</b>
       Fish does not have <b>$((i+1))</b> arithmetic expansion, computation is handled by <u>math</u>:

          math $i + 1

       Unlike bash's arithmetic, it can handle floating point numbers:

          &gt; math 5 / 2
          2.5

       And also has some functions, like for trigonometry:

          &gt; math cos 2 x pi
          1

       You can pass arguments to <b>math</b> separately like above or in quotes. Because fish uses <b>()</b>  parentheses  for
       <u>command</u> <u>substitutions</u>, quoting is needed if you want to use them in your expression:

          &gt; math '(5 + 2) * 4'

       Both  <b>*</b>  and  <b>x</b>  are valid ways to spell multiplication, but <b>*</b> needs to be quoted because it looks like a
       <u>glob</u>.

   <b>Prompts</b>
       Fish does not use the <b>$PS1</b>, <b>$PS2</b> and so on variables. Instead the prompt is the output of the <u>fish_prompt</u>
       function, plus the <u>fish_mode_prompt</u> function if <u>vi</u> <u>mode</u> is enabled. The output of  the  <u>fish_right_prompt</u>
       function is used for the right-sided prompt.

       As an example, here's a relatively simple bash prompt:

          # &lt;$HOSTNAME&gt; &lt;$PWD in blue&gt; &lt;Prompt Sign in Yellow&gt; &lt;Rest in default light white&gt;
          PS1='\h\[\e[1;34m\]\w\[\e[m\] \[\e[1;32m\]\$\[\e[m\] '

       and a rough fish equivalent:

          function fish_prompt
              set -l prompt_symbol '$'
              fish_is_root_user; and set prompt_symbol '#'

              echo -s (prompt_hostname) \
              (set_color blue) (prompt_pwd) \
              (set_color yellow) $prompt_symbol (set_color normal)
          end

       This shows a few differences:

       • Fish  provides  <u>set_color</u>  to color text. It can use the 16 named colors and also RGB sequences (so you
         could also use <b>set_color</b> <b>5555FF</b>)

       • Instead of introducing specific escapes like <b>\h</b> for the hostname, the prompt is simply a  function.  To
         achieve the effect of <b>\h</b>, fish provides helper functions like <u>prompt_hostname</u>, which prints a shortened
         version of the hostname.

       • Fish  offers  other helper functions for adding things to the prompt, like <u>fish_vcs_prompt</u> for adding a
         display for common version control  systems  (git,  mercurial,  svn),  and  <u>prompt_pwd</u>  for  showing  a
         shortened <b>$PWD</b> (the user's home directory becomes <b>~</b> and any path component is shortened).

       The default prompt is reasonably full-featured and its code can be read via <b>type</b> <b>fish_prompt</b>.

       Fish  does  not  have  <b>$PS2</b> for continuation lines, instead it leaves the lines indented to show that the
       commandline isn't complete yet.

   <b>Blocks</b> <b>and</b> <b>loops</b>
       Fish's blocking constructs look a little different. They all start with a word, end in <b>end</b> and don't have
       a second starting word:

          for i in 1 2 3; do
             echo $i
          done

          # becomes

          for i in 1 2 3
             echo $i
          end

          while true; do
             echo Weeee
          done

          # becomes

          while true
             echo Weeeeeee
          end

          {
             echo Hello
          }

          # becomes

          begin
             echo Hello
          end

          if true; then
             echo Yes I am true
          else
             echo "How is true not true?"
          fi

          # becomes

          if true
             echo Yes I am true
          else
             echo "How is true not true?"
          end

          foo() {
             echo foo
          }

          # becomes

          function foo
              echo foo
          end

          # (bash allows the word "function",
          #  but this is an extension)

       Fish does not have an <b>until</b>. Use <b>while</b> <b>not</b> or <b>while</b> <b>!</b>.

   <b>Subshells</b>
       Bash has a feature called "subshells", where it will start another shell process for certain things. That
       shell will then be independent and e.g. any changes it makes to variables won't be visible  in  the  main
       shell.

       This includes things like:

          # A list of commands in `()` parentheses
          (foo; bar) | baz

          # Both sides of a pipe
          foo | while read -r bar; do
              # This will not be visible outside of the loop.
              VAR=VAL
              # This background process will not be, either
              baz &amp;
          done

       Fish  does  not  currently  have subshells. You will have to find a different solution. The isolation can
       usually be achieved by just scoping variables (with <b>set</b> <b>-l</b>), but if you really do need to run  your  code
       in a new shell environment you can use <b>fish</b> <b>-c</b> <b>'your</b> <b>code</b> <b>here'</b> to do so explicitly.

       <b>()</b>  subshells  are  often confused with <b>{}</b> grouping, which does <u>not</u> use a subshell. When you just need to
       group, you can use <b>begin;</b> <b>end</b> in fish:

          (foo; bar) | baz
          # when it should really have been:
          { foo; bar; } | baz
          # becomes
          begin; foo; bar; end | baz

       The pipe will simply be run in the same process, so <b>while</b> <b>read</b> loops can set variables outside:

          foo | while read bar
              set -g VAR VAL
              baz &amp;
          end

          echo $VAR # will print VAL
          jobs # will show "baz"

       Subshells are also frequently confused with <u>command</u> <u>substitutions</u>, which  bash  writes  as  <b>`command`</b>  or
       <b>$(command)</b> and fish writes as <b>$(command)</b> or <b>(command)</b>. Bash also <u>uses</u> subshells to implement them.

   <b>Builtins</b> <b>and</b> <b>other</b> <b>commands</b>
       By  now  it has become apparent that fish puts much more of a focus on its builtins and external commands
       rather than its syntax. So here are some helpful builtins and their rough equivalent in bash:

       • <u>string</u> - this replaces most of the string transformation (<b>${i%foo}</b> et al) and can also be used  instead
         of <b>grep</b> and <b>sed</b> and such.

       • <u>math</u>  -  this replaces <b>$((i</b> <b>+</b> <b>1))</b> arithmetic and can also do floats and some simple functions (sine and
         friends).

       • <u>argparse</u> - this can handle a script's option parsing, for which bash would  probably  use  <b>getopt</b>  (zsh
         provides <b>zparseopts</b>).

       • <u>count</u> can be used to count things and therefore replaces <b>$#</b> and can be used instead of <b>wc</b>.

       • <u>status</u>  provides  information  about  the  shell  status,  e.g. if it's interactive or what the current
         linenumber is. This replaces <b>$-</b> and <b>$BASH_LINENO</b> and other variables.

       • <b><a href="../man1/seq.1.html">seq</a>(1)</b> can be used as a replacement for <b>{1..10}</b> range expansion. If your OS doesn't  ship  a  <b>seq</b>  fish
         includes a replacement function.

   <b>Other</b> <b>facilities</b>
       Bash  has  <b>set</b>  <b>-x</b> or <b>set</b> <b>-o</b> <b>xtrace</b> to print all commands that are being executed. In fish, this would be
       enabled by setting <u>fish_trace</u>.

       Or, if your intention is to <u>profile</u> how long each line of a script takes, you can use  <b>fish</b>  <b>--profile</b>  -
       see the <u>page</u> <u>for</u> <u>the</u> <u>fish</u> <u>command</u>.

   <b>Tutorial</b>
   <b>Why</b> <b>fish?</b>
       Fish  is  a  fully-equipped  command  line shell (like bash or zsh) that is smart and user-friendly. Fish
       supports powerful features like syntax highlighting, autosuggestions, and tab completions that just work,
       with nothing to learn or configure.

       If you want to make your command line more productive, more useful, and  more  fun,  without  learning  a
       bunch of arcane syntax and configuration options, then fish might be just what you're looking for!

   <b>Getting</b> <b>started</b>
       Once installed, just type in <b>fish</b> into your current shell to try it out!

       You will be greeted by the standard fish prompt, which means you are all set up and can start using fish:

          &gt; fish
          Welcome to fish, the friendly interactive shell
          Type help for instructions on how to use fish
          you@hostname ~&gt;

       This  prompt that you see above is the fish default prompt: it shows your username, hostname, and working
       directory. You can customize it, see <u>how</u> <u>to</u> <u>change</u> <u>your</u> <u>prompt</u>.

       From now on, we'll pretend your prompt is just a <b>&gt;</b> to save space.

   <b>Learning</b> <b>fish</b>
       This tutorial assumes a basic understanding of command line shells and Unix commands, and that you have a
       working copy of fish.

       If you have a strong understanding of other shells, and want to know what fish does  differently,  search
       for the magic phrase <u>unlike</u> <u>other</u> <u>shells</u>, which is used to call out important differences.

       Or, if you want a quick overview over the differences to other shells like Bash, see <u>Fish</u> <u>For</u> <u>Bash</u> <u>Users</u>.

       For the full, detailed description of how to use fish interactively, see <u>Interactive</u> <u>Use</u>.

       For a comprehensive description of fish's scripting language, see <u>The</u> <u>Fish</u> <u>Language</u>.

   <b>Running</b> <b>Commands</b>
       Fish  runs  commands  like  other  shells:  you  type  a  command,  followed by its arguments. Spaces are
       separators:

          &gt; echo hello world
          hello world

       This runs the command <b>echo</b> with the arguments <b>hello</b> and <b>world</b>. In  this  case  that's  the  same  as  one
       argument  <b>hello</b> <b>world</b>, but in many cases it's not. If you need to pass an argument that includes a space,
       you can <u>escape</u> with a backslash, or <u>quote</u> it using single or double quotes:

          &gt; mkdir My\ Files
          # Makes a directory called "My Files", with a space in the name
          &gt; cp <a href="file:~/Some">~/Some</a>\ File 'My Files'
          # Copies a file called "Some File" in the home directory to "My Files"
          &gt; ls "My Files"
          Some File

   <b>Getting</b> <b>Help</b>
       Run <b>help</b> to open fish's help in a web browser, and <b>man</b> with the page (like <b>fish-language</b>) to open it in a
       man page. You can also ask for help with a specific command, for example, <b>help</b>  <b>set</b>  to  open  in  a  web
       browser, or <b>man</b> <b>set</b> to see it in the terminal.

          &gt; man set
          set - handle shell variables
            Synopsis...

       To open this section, use <b>help</b> <b>getting-help</b>.

       This  only  works for fish's own documentation for itself and its built-in commands (the "builtins"). For
       any other commands on your system, they should provide their own documentation, often in the man  system.
       For example <b>man</b> <b>ls</b> should tell you about your computer's <b>ls</b> command.

   <b>Syntax</b> <b>Highlighting</b>
       You'll  quickly  notice  that fish performs syntax highlighting as you type. Invalid commands are colored
       red by default:

          &gt; /bin/mkd

       A command may be invalid because it does not exist, or refers to a file that you cannot execute. When the
       command becomes valid, it is shown in a different color:

          &gt; <a href="file:/bin/mkdir">/bin/mkdir</a>

       Valid file paths are underlined as you type them:

          &gt; cat <a href="file:~/somefi">~/somefi</a>

       This tells you that there exists a file that starts with <b>somefi</b>, which is useful feedback as you type.

       These colors, and many more, can be changed by running  <b>fish_config</b>,  or  by  modifying  <u>color</u>  <u>variables</u>
       directly.

       For example, if you want to disable (almost) all coloring:

          fish_config theme choose none

       This picks the "none" theme. To see all themes:

          fish_config theme show

       Just  running  <b>fish_config</b>  will  open  up a browser interface that allows you to pick from the available
       themes.

   <b>Autosuggestions</b>
       As you type fish will suggest commands to the right of the cursor, in gray. For example:

          &gt; <a href="file:/bin/hostname">/bin/hostname</a>

       It knows about paths and options:

          &gt; grep --ignore-case

       And history too. Type a command once, and you can re-summon it by just typing a few letters:

          &gt; rsync -avze ssh . <a href="mailto:myname@somelonghost.com">myname@somelonghost.com</a>:/some/long/path/doo/dee/doo/dee/doo

       To accept the autosuggestion, hit <b>right</b> (<b>→</b>) or <b>ctrl-f</b>. To accept a single  word  of  the  autosuggestion,
       <b>alt-right</b> (<b>→</b>). If the autosuggestion is not what you want, just ignore it.

       If you don't like autosuggestions, you can disable them by setting <b>$fish_autosuggestion_enabled</b> to 0:

          set -g fish_autosuggestion_enabled 0

   <b>Tab</b> <b>Completions</b>
       A rich set of tab completions work "out of the box".

       Press <b>tab</b> and fish will attempt to complete the command, argument, or path:

          &gt; /pri<b>tab</b> =&gt; /private/

       If there's more than one possibility, it will list them:

          &gt; <a href="file:~/stuff/s">~/stuff/s</a><b>tab</b>
          <a href="file:~/stuff/script.sh">~/stuff/script.sh</a>  (command)  <a href="file:~/stuff/sources/">~/stuff/sources/</a>  (directory)

       Hit  tab  again  to  cycle  through  the possibilities. The part in parentheses there (that "command" and
       "directory") is the completion description. It's just a short hint to explain what kind  of  argument  it
       is.

       fish can also complete many commands, like git branches:

          &gt; git merge pr<b>tab</b> =&gt; git merge prompt_designer
          &gt; git checkout b<b>tab</b>
          builtin_list_io_merge (Branch)  builtin_set_color (Branch) busted_events (Tag)

       Try hitting tab and see what fish can do!

   <b>Variables</b>
       Like other shells, a dollar sign followed by a variable name is replaced with the value of that variable:

          &gt; echo My home directory is $HOME
          My home directory is /home/tutorial

       This is known as variable substitution, and it also happens in double quotes, but not single quotes:

          &gt; echo "My current directory is $PWD"
          My current directory is /home/tutorial
          &gt; echo 'My current directory is $PWD'
          My current directory is $PWD

       Unlike other shells, fish has an ordinary command to set variables: <b>set</b>, which takes a variable name, and
       then its value.

          &gt; set name 'Mister Noodle'
          &gt; echo $name
          Mister Noodle

       (Notice  the  quotes: without them, <b>Mister</b> and <b>Noodle</b> would have been separate arguments, and <b>$name</b> would
       have been made into a list of two elements.)

       Unlike other shells, variables are not further split after substitution:

          &gt; mkdir $name
          &gt; ls
          Mister Noodle

       In bash, this would have created two directories "Mister" and "Noodle". In fish, it created only one: the
       variable had the value "Mister Noodle", so that is the argument that was passed to <b>mkdir</b>, spaces and all.

       You can erase (or "delete") a variable with <b>-e</b> or <b>--erase</b>

          &gt; set -e MyVariable
          &gt; env | grep MyVariable
          (no output)

       For more, see <u>Variable</u> <u>expansion</u>.

   <b>Exports</b> <b>(Shell</b> <b>Variables)</b>
       Sometimes you need to have a variable available to an external command, often as a setting.  For  example
       many  programs  like  <b>git</b> or <b>man</b> read the <b>$PAGER</b> variable to figure out your preferred pager (the program
       that lets you scroll text). Other variables used like this include <b>$BROWSER</b>,  <b>$LANG</b>  (to  configure  your
       language) and <b>$PATH</b>. You'll note these are written in ALLCAPS, but that's just a convention.

       To  give  a  variable to an external command, it needs to be "exported". This is done with a flag to <b>set</b>,
       either <b>--export</b> or just <b>-x</b>.

          &gt; set -x MyVariable SomeValue
          &gt; env | grep MyVariable
          MyVariable=SomeValue

       It can also be unexported with <b>--unexport</b> or <b>-u</b>.

       This works the other way around as well! If fish is started by something else, it inherits  that  parents
       exported  variables.  So  if your terminal emulator starts fish, and it exports <b>$LANG</b> set to <b>en_US.UTF-8</b>,
       fish will receive that setting. And whatever started your terminal emulator also gave <u>it</u>  some  variables
       that  it  will  then pass on unless it specifically decides not to. This is how fish usually receives the
       values for things like <b>$LANG</b>, <b>$PATH</b> and <b>$TERM</b>, without you having to specify them again.

       Exported variables can be local or global or universal - "exported" is not a <u>scope</u>!  Usually  you'd  make
       them global via <b>set</b> <b>-gx</b> <b>MyVariable</b> <b>SomeValue</b>.

       For more, see <u>Exporting</u> <u>variables</u>.

   <b>Lists</b>
       The  <b>set</b>  command  above  used  quotes  to ensure that <b>Mister</b> <b>Noodle</b> was one argument. If it had been two
       arguments, then <b>name</b> would have been a list of length 2.  In fact,  all  variables  in  fish  are  really
       lists, that can contain any number of values, or none at all.

       Some  variables,  like <b>$PWD</b>, only have one value. By convention, we talk about that variable's value, but
       we really mean its first (and only) value.

       Other variables, like <b>$PATH</b>, really do have multiple values.  During  variable  expansion,  the  variable
       expands to become multiple arguments:

          &gt; echo $PATH
          <a href="file:/usr/bin">/usr/bin</a> <a href="file:/bin">/bin</a> <a href="file:/usr/sbin">/usr/sbin</a> <a href="file:/sbin">/sbin</a> <a href="file:/usr/local/bin">/usr/local/bin</a>

       Variables  whose  name  ends in "PATH" are automatically split on colons to become lists. They are joined
       using colons when exported to subcommands. This is for compatibility with other tools, which expect $PATH
       to use colons. You can also explicitly add this quirk to a variable with <b>set</b> <b>--path</b>, or  remove  it  with
       <b>set</b> <b>--unpath</b>.

       Lists cannot contain other lists: there is no recursion.  A variable is a list of strings, full stop.

       Get the length of a list with <b>count</b>:

          &gt; count $PATH
          5

       You can append (or prepend) to a list by setting the list to itself, with some additional arguments. Here
       we append <a href="file:/usr/local/bin">/usr/local/bin</a> to $PATH:

          &gt; set PATH $PATH <a href="file:/usr/local/bin">/usr/local/bin</a>

       You  can access individual elements with square brackets. Indexing starts at 1 from the beginning, and -1
       from the end:

          &gt; echo $PATH
          <a href="file:/usr/bin">/usr/bin</a> <a href="file:/bin">/bin</a> <a href="file:/usr/sbin">/usr/sbin</a> <a href="file:/sbin">/sbin</a> <a href="file:/usr/local/bin">/usr/local/bin</a>
          &gt; echo $PATH[1]
          <a href="file:/usr/bin">/usr/bin</a>
          &gt; echo $PATH[-1]
          <a href="file:/usr/local/bin">/usr/local/bin</a>

       You can also access ranges of elements, known as "slices":

          &gt; echo $PATH[1..2]
          <a href="file:/usr/bin">/usr/bin</a> <a href="file:/bin">/bin</a>
          &gt; echo $PATH[-1..2]
          <a href="file:/usr/local/bin">/usr/local/bin</a> <a href="file:/sbin">/sbin</a> <a href="file:/usr/sbin">/usr/sbin</a> <a href="file:/bin">/bin</a>

       You can iterate over a list (or a slice) with a for loop:

          for val in $PATH
            echo "entry: $val"
          end
          # Will print:
          # entry: <a href="file:/usr/bin/">/usr/bin/</a>
          # entry: <a href="file:/bin">/bin</a>
          # entry: <a href="file:/usr/sbin">/usr/sbin</a>
          # entry: <a href="file:/sbin">/sbin</a>
          # entry: <a href="file:/usr/local/bin">/usr/local/bin</a>

       One particular bit is that you can use lists like <u>Brace</u> <u>expansion</u>. If you  attach  another  string  to  a
       list, it'll combine every element of the list with the string:

          &gt; set mydirs <a href="file:/usr/bin">/usr/bin</a> <a href="file:/bin">/bin</a>
          &gt; echo $mydirs/fish # this is just like {<a href="file:/usr/bin">/usr/bin</a>,<a href="file:/bin">/bin</a>}/fish
          /usr/bin/fish /bin/fish

       This also means that, if the list is empty, there will be no argument:

          &gt; set empty # no argument
          &gt; echo $empty/this_is_gone # prints an empty line

       If you quote the list, it will be used as one string and so you'll get one argument even if it is empty.

       For  more,  see  <u>Lists</u>.   For  more  on combining lists with strings (or even other lists), see <u>cartesian</u>
       <u>products</u> and <u>Variable</u> <u>expansion</u>.

   <b>Wildcards</b>
       Fish supports the familiar wildcard <b>*</b>. To list all JPEG files:

          &gt; ls *.jpg
          lena.jpg
          meena.jpg
          santa maria.jpg

       You can include multiple wildcards:

          &gt; ls l*.p*
          lena.png
          lesson.pdf

       The recursive wildcard <b>**</b> searches directories recursively:

          &gt; ls <a href="file:/var/">/var/</a>**.log
          /var/log/system.log
          /var/run/sntp.log

       If that directory traversal is taking a long time, you can <b>ctrl-c</b> out of it.

       For more, see <u>Wildcards</u>.

   <b>Pipes</b> <b>and</b> <b>Redirections</b>
       You can pipe between commands with the usual vertical bar:

          &gt; echo hello world | wc
                1       2      12

       stdin and stdout can be redirected via the familiar <b>&lt;</b> and <b>&gt;</b>. stderr is redirected with a <b>2&gt;</b>.

          &gt; grep fish &lt; <a href="file:/etc/shells">/etc/shells</a> &gt; <a href="file:~/output.txt">~/output.txt</a> 2&gt; <a href="file:~/errors.txt">~/errors.txt</a>

       To redirect stdout and stderr into one file, you can use <b>&amp;&gt;</b>:

          &gt; make &amp;&gt; make_output.txt

       For more, see <u>Input</u> <u>and</u> <u>output</u> <u>redirections</u> and <u>Pipes</u>.

   <b>Command</b> <b>Substitutions</b>
       Command substitutions use the output of one command as an argument to another. Unlike other shells,  fish
       does  not  use  backticks  ``  for  command substitutions. Instead, it uses parentheses with or without a
       dollar:

          &gt; echo In (pwd), running $(uname)
          In /home/tutorial, running FreeBSD

       A common idiom is to capture the output of a command in a variable:

          &gt; set os (uname)
          &gt; echo $os
          Linux

       Command substitutions without a dollar are not expanded within quotes, so the version with  a  dollar  is
       simpler:

          &gt; touch "testing_$(date +%s).txt"
          &gt; ls *.txt
          testing_1360099791.txt

       Unlike  other  shells, fish does not split command substitutions on any whitespace (like spaces or tabs),
       only newlines. Usually this is a big  help  because  unix  commands  operate  on  a  line-by-line  basis.
       Sometimes  it  can  be  an  issue  with  commands like <b>pkg-config</b> that print what is meant to be multiple
       arguments on a single line. To split it on spaces too, use <b>string</b> <b>split</b>.

          &gt; printf '%s\n' (pkg-config --libs gio-2.0)
          -lgio-2.0 -lgobject-2.0 -lglib-2.0
          &gt; printf '%s\n' (pkg-config --libs gio-2.0 | string split -n " ")
          -lgio-2.0
          -lgobject-2.0
          -lglib-2.0

       If you need a command substitutions output as one  argument,  without  any  splits,  use  quoted  command
       substitution:

          &gt; echo "first line
          second line" &gt; myfile
          &gt; set myfile "$(cat myfile)"
          &gt; printf '|%s|' $myfile
          |first line
          second line|

       For more, see <u>Command</u> <u>substitution</u>.

   <b>Separating</b> <b>Commands</b> <b>(Semicolon)</b>
       Like other shells, fish allows multiple commands either on separate lines or the same line.

       To  write  them  on  the  same  line,  use the semicolon (";"). That means the following two examples are
       equivalent:

          echo fish; echo chips

          # or
          echo fish
          echo chips

       This is useful interactively to enter multiple commands. In a script it's easier to read if the  commands
       are on separate lines.

   <b>Exit</b> <b>Status</b>
       When a command exits, it returns a status code as a non-negative integer (that's a whole number &gt;= 0).

       Unlike other shells, fish stores the exit status of the last command in <b>$status</b> instead of <b>$?</b>.

          &gt; false
          &gt; echo $status
          1

       This  indicates  how  the  command  fared  -  0  usually means success, while the others signify kinds of
       failure. For instance fish's <b>set</b> <b>--query</b> returns the number of variables it queried that  weren't  set  -
       <b>set</b> <b>--query</b> <b>PATH</b> usually returns 0, <b>set</b> <b>--query</b> <b>arglbargl</b> <b>boogagoogoo</b> usually returns 2.

       There is also a <b>$pipestatus</b> list variable for the exit statuses [1] of processes in a pipe.

       For more, see <u>The</u> <u>status</u> <u>variable</u>.

       [1]  or  "stati" if you prefer, or "statūs" if you've time-travelled from ancient Rome or work as a latin
            teacher

   <b>Combiners</b> <b>(And,</b> <b>Or,</b> <b>Not)</b>
       fish supports the familiar <b>&amp;&amp;</b> and <b>||</b> to combine commands, and <b>!</b> to negate them:

          &gt; ./configure &amp;&amp; make &amp;&amp; sudo make install

       Here, <b>make</b> is only executed if <b>./configure</b> succeeds (returns 0), and <b>sudo</b> <b>make</b> <b>install</b> is  only  executed
       if both <b>./configure</b> and <b>make</b> succeed.

       fish  also  supports <u>and</u>, <u>or</u>, and <u>not</u>. The first two are job modifiers and have lower precedence. Example
       usage:

          &gt; cp file1 file1_bak &amp;&amp; cp file2 file2_bak; and echo "Backup successful"; or echo "Backup failed"
          Backup failed

       As mentioned in <u>the</u> <u>section</u> <u>on</u> <u>the</u> <u>semicolon</u>, this can also be written in multiple lines, like so:

          cp file1 file1_bak &amp;&amp; cp file2 file2_bak
          and echo "Backup successful"
          or echo "Backup failed"

   <b>Conditionals</b> <b>(If,</b> <b>Else,</b> <b>Switch)</b>
       Use <u>if</u> and <u>else</u> to conditionally execute code, based on the exit status of a command.

          if grep fish <a href="file:/etc/shells">/etc/shells</a>
              echo Found fish
          else if grep bash <a href="file:/etc/shells">/etc/shells</a>
              echo Found bash
          else
              echo Got nothing
          end

       To compare strings or numbers or check file properties (whether a file exists or is writeable and  such),
       use <u>test</u>, like

          if test "$fish" = "flounder"
              echo FLOUNDER
          end

          # or

          if test "$number" -gt 5
              echo $number is greater than five
          else
              echo $number is five or less
          end

          # or

          # This test is true if the path <a href="file:/etc/hosts">/etc/hosts</a> exists
          # - it could be a file or directory or symlink (or possibly something else).
          if test -e <a href="file:/etc/hosts">/etc/hosts</a>
              echo We most likely have a hosts file
          else
              echo We do not have a hosts file
          end

       <u>Combiners</u> can also be used to make more complex conditions, like

          if command -sq fish; and grep fish <a href="file:/etc/shells">/etc/shells</a>
              echo fish is installed and configured
          end

       For even more complex conditions, use <u>begin</u> and <u>end</u> to group parts of them.

       There is also a <u>switch</u> command:

          switch (uname)
          case Linux
              echo Hi Tux!
          case Darwin
              echo Hi Hexley!
          case FreeBSD NetBSD DragonFly
              echo Hi Beastie!
          case '*'
              echo Hi, stranger!
          end

       As you see, <u>case</u> does not fall through, and can accept multiple arguments or (quoted) wildcards.

       For more, see <u>Conditions</u>.

   <b>Functions</b>
       A  fish  function  is  a  list  of  commands,  which  may optionally take arguments. Unlike other shells,
       arguments are not passed in "numbered variables" like <b>$1</b>, but instead in a single list <b>$argv</b>. To create a
       function, use the <u>function</u> builtin:

          function say_hello
              echo Hello $argv
          end
          say_hello
          # prints: Hello
          say_hello everybody!
          # prints: Hello everybody!

       Unlike other shells, fish does not have aliases or special prompt syntax. Functions take their place. [2]

       You can list the names of all functions with the <u>functions</u> builtin (note the plural!).  fish  starts  out
       with a number of functions:

          &gt; functions
          N_, abbr, alias, bg, cd, cdh, contains_seq, dirh, dirs, disown, down-or-search, edit_command_buffer, export, fg, fish_add_path, fish_breakpoint_prompt, fish_clipboard_copy, fish_clipboard_paste, fish_config, fish_default_key_bindings, fish_default_mode_prompt, fish_git_prompt, fish_hg_prompt, fish_hybrid_key_bindings, fish_indent, fish_is_root_user, fish_job_summary, fish_key_reader, fish_md5, fish_mode_prompt, fish_npm_helper, fish_opt, fish_print_git_action, fish_print_hg_root, fish_prompt, fish_sigtrap_handler, fish_svn_prompt, fish_title, fish_update_completions, fish_vcs_prompt, fish_vi_cursor, fish_vi_key_bindings, funced, funcsave, grep, help, history, hostname, isatty, kill, la, ll, ls, man, nextd, open, popd, prevd, prompt_hostname, prompt_pwd, psub, pushd, realpath, seq, setenv, suspend, trap, type, umask, up-or-search, vared, wait

       You can see the source for any function by passing its name to <b>functions</b>:

          &gt; functions ls
          function ls --description 'List contents of directory'
              command ls -G $argv
          end

       For more, see <u>Functions</u>.

       [2]  There  is  a  function  called <u>alias</u>, but it's just a shortcut to make functions. fish also provides
            <u>abbreviations</u>, through the <u>abbr</u> command.

   <b>Loops</b>
       While loops:

          while true
              echo "Loop forever"
          end
          # Prints:
          # Loop forever
          # Loop forever
          # Loop forever
          # yes, this really will loop forever. Unless you abort it with ctrl-c.

       For loops can be used to iterate over a list. For example, a list of files:

          for file in *.txt
              cp $file $file.bak
          end

       Iterating over a list of numbers can be done with <b>seq</b>:

          for x in (seq 5)
              touch file_$x.txt
          end

       For more, see <u>Loops</u> <u>and</u> <u>blocks</u>.

   <b>Prompt</b>
       Unlike other shells, there is no prompt variable like <b>PS1</b>. To display  your  prompt,  fish  executes  the
       <u>fish_prompt</u>  function  and  uses  its  output  as  the  prompt.  And if it exists, fish also executes the
       <u>fish_right_prompt</u> function and uses its output as the right prompt.

       You can define your own prompt from the command line:

          &gt; function fish_prompt; echo "New Prompt % "; end
          New Prompt % _

       Then, if you are happy with it, you can save it to disk by typing <b>funcsave</b> <b>fish_prompt</b>.  This  saves  the
       prompt  in <b><a href="file:~/.config/fish/functions/fish_prompt.fish">~/.config/fish/functions/fish_prompt.fish</a></b>. (Or, if you want, you can create that file manually
       from the start.)

       Multiple lines are OK. Colors can be set via <u>set_color</u>, passing it named ANSI colors, or hex RGB values:

          function fish_prompt
              set_color purple
              date "+%m/%d/%y"
              set_color F00
              echo (pwd) '&gt;' (set_color normal)
          end

       This prompt would look like:

          02/06/13
          /home/tutorial &gt; _

       You can choose among some sample prompts by running <b>fish_config</b> for a web UI or <b>fish_config</b> <b>prompt</b> for  a
       simpler version inside your terminal.

   <b>$PATH</b>
       <b>$PATH</b> is an environment variable containing the directories that fish searches for commands. Unlike other
       shells, $PATH is a <u>list</u>, not a colon-delimited string.

       Fish  takes care to set <b>$PATH</b> to a default, but typically it is just inherited from fish's parent process
       and is set to a value that makes sense for the system - see <u>Exports</u>.

       To prepend <a href="file:/usr/local/bin">/usr/local/bin</a> and <a href="file:/usr/sbin">/usr/sbin</a> to <b>$PATH</b>, you can write:

          &gt; set PATH <a href="file:/usr/local/bin">/usr/local/bin</a> <a href="file:/usr/sbin">/usr/sbin</a> $PATH

       To remove <a href="file:/usr/local/bin">/usr/local/bin</a> from <b>$PATH</b>, you can write:

          &gt; set PATH (string match -v <a href="file:/usr/local/bin">/usr/local/bin</a> $PATH)

       For compatibility with other shells and external commands, $PATH is a  <u>path</u>  <u>variable</u>,  and  so  will  be
       joined with colons (not spaces) when you quote it:

          &gt; echo "$PATH"
          <a href="file:/usr/local/sbin">/usr/local/sbin</a>:<a href="file:/usr/local/bin">/usr/local/bin</a>:<a href="file:/usr/bin">/usr/bin</a>

       and  it  will  be exported like that, and when fish starts it splits the $PATH it receives into a list on
       colon.

       You can do so directly in <b>config.fish</b>, like you might do in other shells with <b>.profile</b>. See <u>this</u> <u>example</u>.

       A faster way is to use the <u>fish_add_path</u> function, which adds given  directories  to  the  path  if  they
       aren't  already  included.  It  does  this by modifying the <b>$fish_user_paths</b> <u>universal</u> <u>variable</u>, which is
       automatically prepended to <b>$PATH</b>. For example, to permanently add <b><a href="file:/usr/local/bin">/usr/local/bin</a></b> to your <b>$PATH</b>, you could
       write:

          &gt; fish_add_path <a href="file:/usr/local/bin">/usr/local/bin</a>

       The advantage is that you don't have to go mucking around in files: just run this  once  at  the  command
       line,  and it will affect the current session and all future instances too. You can also add this line to
       <u>config.fish</u>, as it only adds the component if necessary.

       Or  you  can  modify  $fish_user_paths  yourself,  but  you  should  be  careful  <u>not</u>  to  append  to  it
       unconditionally in config.fish, or it will grow longer and longer.

   <b>Startup</b> <b>(Where's</b> <b>.bashrc?)</b>
       Fish starts by executing commands in <b><a href="file:~/.config/fish/config.fish">~/.config/fish/config.fish</a></b>. You can create it if it does not exist.

       It  is  possible to directly create functions and variables in <b>config.fish</b> file, using the commands shown
       above. For example:

          &gt; cat <a href="file:~/.config/fish/config.fish">~/.config/fish/config.fish</a>

          set -x PATH $PATH <a href="file:/sbin/">/sbin/</a>

          function ll
              ls -lh $argv
          end

       However, it is more common and efficient to use  autoloading functions and universal variables.

       If  you  want  to  organize  your  configuration,  fish  also  reads   commands   in   .fish   files   in
       <b><a href="file:~/.config/fish/conf.d/">~/.config/fish/conf.d/</a></b>. See <u>Configuration</u> <u>Files</u> for the details.

   <b>Autoloading</b> <b>Functions</b>
       When  fish  encounters  a  command, it attempts to autoload a function for that command, by looking for a
       file with the name of that command in <b><a href="file:~/.config/fish/functions/">~/.config/fish/functions/</a></b>.

       For  example,  if  you  wanted  to  have  a  function  <b>ll</b>,  you  would  add  a  text  file   <b>ll.fish</b>   to
       <b><a href="file:~/.config/fish/functions">~/.config/fish/functions</a></b>:

          &gt; cat <a href="file:~/.config/fish/functions/ll.fish">~/.config/fish/functions/ll.fish</a>
          function ll
              ls -lh $argv
          end

       This is the preferred way to define your prompt as well:

          &gt; cat <a href="file:~/.config/fish/functions/fish_prompt.fish">~/.config/fish/functions/fish_prompt.fish</a>
          function fish_prompt
              echo (pwd) "&gt; "
          end

       See  the  documentation  for  <u>funced</u>  and  <u>funcsave</u>  for  ways  to  create these files automatically, and
       <u>$fish_function_path</u> to control their location.

   <b>Universal</b> <b>Variables</b>
       A universal variable is a variable whose value is shared across all instances of fish,  now  and  in  the
       future – even after a reboot. You can make a variable universal with <b>set</b> <b>-U</b>:

          &gt; set -U EDITOR vim

       Now in another shell:

          &gt; echo $EDITOR
          vim

       You  only need to set universal variables once interactively. There is no need to add them to your <u>config</u>
       <u>files</u>. For more details, see <u>Universal</u> <u>Variables</u>.

   <b>Ready</b> <b>for</b> <b>more?</b>
       If you want to learn more about fish, there is  <u>lots</u>  <u>of</u>  <u>detailed</u>  <u>documentation</u>,  the  <u>official</u>  <u>gitter</u>
       <u>channel</u>       &lt;<b>https://gitter.im/fish-shell/fish-shell</b>&gt;,       an       <u>official</u>       <u>mailing</u>       <u>list</u>
       &lt;<b>https://lists.sourceforge.net/lists/listinfo/fish-users</b>&gt;, and the <u>github</u> <u>page</u>  &lt;<b>https://github.com/fish-</b>
       <b>shell/fish-shell/</b>&gt;.

   <b>Writing</b> <b>your</b> <b>own</b> <b>completions</b>
       To  specify a completion, use the <b>complete</b> command. <b>complete</b> takes as a parameter the name of the command
       to specify a completion for. For example,  to  add  a  completion  for  the  program  <b>myprog</b>,  start  the
       completion command with <b>complete</b> <b>-c</b> <b>myprog</b> <b>...</b>

       For  a  complete  description  of  the  various  switches  accepted  by  the  <b>complete</b>  command,  see the
       documentation for the <u>complete</u> builtin, or write <b>complete</b> <b>--help</b> inside the <b>fish</b> shell.

       To provide a list of possible completions for myprog, use the <b>-a</b> switch. If <b>myprog</b> accepts the  arguments
       start  and  stop,  this  can  be  specified as <b>complete</b> <b>-c</b> <b>myprog</b> <b>-a</b> <b>'start</b> <b>stop'</b>. The argument to the <b>-a</b>
       switch is always a single string. At completion time, it will  be  tokenized  on  spaces  and  tabs,  and
       variable expansion, command substitution and other forms of parameter expansion will take place:

          # If myprog can list the valid outputs with the list-outputs subcommand:
          complete -c myprog -l output -a '(myprog list-outputs)'

       <b>fish</b>  has  a special syntax to support specifying switches accepted by a command. The switches <b>-s</b>, <b>-l</b> and
       <b>-o</b> are used to specify a short switch (single character, such as <b>-l</b>), a gnu style long  switch  (such  as
       <b>--color</b>)  and an old-style long switch (with one <b>-</b>, like <b>-shuffle</b>), respectively. If the command 'myprog'
       has an option that can be written as <b>-o</b> or <b>--output</b>, that is:

          complete -c myprog -s o -l output

       If this option takes an optional argument, you would also  add  <b>--argument</b>  or  <b>-a</b>,  and  give  that  the
       possible arguments:

          complete -c myprog -s o -l output -a "yes no"

       This offers the arguments "yes" and "no" for:

          &gt; myprog -o&lt;TAB&gt;
          &gt; myprog --output=&lt;TAB&gt;

       By  default,  option  arguments  are  <u>optional</u>, so the candidates are only offered directly attached like
       that, so they aren't given in this case:

          &gt; myprog -o &lt;TAB&gt;

       Usually options <u>require</u> a parameter, so you would give <b>--require-parameter</b> / <b>-r</b>:

          complete -c myprog -s o -l output -ra "yes no"

       which offers yes/no in these cases:

          &gt; myprog -o&lt;TAB&gt;
          &gt; myprog --output=&lt;TAB&gt;
          &gt; myprog -o &lt;TAB&gt;
          &gt; myprog --output &lt;TAB&gt;

       Fish will also offer files by default, in addition to the  arguments  you  specified.  You  would  either
       inhibit file completion for a single option:

          complete -c myprog -s o -l output --no-files -ra "yes no"

       or with a specific condition:

          complete -c myprog -f --condition '__fish_seen_subcommand_from somesubcommand'

       or you can disable file completions globally for the command:

          complete -c myprog -f

       If  you have disabled them globally, you can enable them just for a specific condition or option with the
       <b>--force-files</b> / <b>-F</b> option:

          # Disable files by default
          complete -c myprog -f
          # but reenable them for --config-file
          complete -c myprog -l config-file --force-files -r

       As a more comprehensive example, here's a commented excerpt of the completions for systemd's <b>timedatectl</b>:

          # All subcommands that timedatectl knows - this is useful for later.
          set -l commands status set-time set-timezone list-timezones set-local-rtc set-ntp

          # Disable file completions for the entire command
          # because it does not take files anywhere
          # Note that this can be undone by using "-F".
          #
          # File completions also need to be disabled
          # if you want to have more control over what files are offered
          # (e.g. just directories, or just files ending in ".mp3").
          complete -c timedatectl -f

          # This line offers the subcommands
          # -"status",
          # -"set-timezone",
          # -"set-time"
          # -"list-timezones"
          # if no subcommand has been given so far.
          #
          # The `-n`/`--condition` option takes script as a string, which it executes.
          # If it returns true, the completion is offered.
          # Here the condition is the `__fish_seen_subcommands_from` helper function.
          # It returns true if any of the given commands is used on the commandline,
          # as determined by a simple heuristic.
          # For more complex uses, you can write your own function.
          # See e.g. the git completions for an example.
          #
          complete -c timedatectl -n "not __fish_seen_subcommand_from $commands" \
              -a "status set-time set-timezone list-timezones"

          # If the "set-timezone" subcommand is used,
          # offer the output of `timedatectl list-timezones` as completions.
          # Each line of output is used as a separate candidate,
          # and anything after a tab is taken as the description.
          # It's often useful to transform command output with `string` into that form.
          complete -c timedatectl -n "__fish_seen_subcommand_from set-timezone" \
              -a "(timedatectl list-timezones)"

          # Completion candidates can also be described via `-d`,
          # which is useful if the description is constant.
          # Try to keep these short, because that means the user gets to see more at once.
          complete -c timedatectl -n "not __fish_seen_subcommand_from $commands" \
              -a "set-local-rtc" -d "Maintain RTC in local time"

          # We can also limit options to certain subcommands by using conditions.
          complete -c timedatectl -n "__fish_seen_subcommand_from set-local-rtc" \
              -l adjust-system-clock -d 'Synchronize system clock from the RTC'

          # These are simple options that can be used everywhere.
          complete -c timedatectl -s h -l help -d 'Print a short help text and exit'
          complete -c timedatectl -l version -d 'Print a short version string and exit'
          complete -c timedatectl -l no-pager -d 'Do not pipe output into a pager'

       For  examples  of  how  to   write   your   own   complex   completions,   study   the   completions   in
       <b>/usr/share/fish/completions</b>.  (The  exact  path  depends  on  your  chosen installation prefix and may be
       slightly different)

   <b>Useful</b> <b>functions</b> <b>for</b> <b>writing</b> <b>completions</b>
       <b>fish</b> ships with several functions that may be useful when writing command-specific completions.  Most  of
       these  function  names  begin with the string <b>__fish_</b>. Such functions are internal to <b>fish</b> and their name
       and interface may change in future fish versions. A few of these functions are described here.

       Functions beginning with the string <b>__fish_print_</b> print a newline separated list of strings. For example,
       <b>__fish_print_filesystems</b>  prints  a  list  of  all  known  file   systems.   Functions   beginning   with
       <b>__fish_complete_</b>  print out a newline separated list of completions with descriptions. The description is
       separated from the completion by a tab character.

       • <b>__fish_complete_directories</b> <b>STRING</b> <b>DESCRIPTION</b>  performs  path  completion  on  STRING,  allowing  only
         directories, and giving them the description DESCRIPTION.

       • <b>__fish_complete_path</b> <b>STRING</b> <b>DESCRIPTION</b> performs path completion on STRING, giving them the description
         DESCRIPTION.

       • <b>__fish_complete_groups</b> prints a list of all user groups with the groups members as description.

       • <b>__fish_complete_pids</b> prints a list of all processes IDs with the command name as description.

       • <b>__fish_complete_suffix</b>  <b>SUFFIX</b> performs file completion but sorts files ending in SUFFIX first. This is
         useful in conjunction with <b>complete</b> <b>--keep-order</b>.

       • <b>__fish_complete_users</b> prints a list of all users with their full name as description.

       • <b>__fish_print_filesystems</b> prints a list of all known file systems. Currently, this is a static list, and
         not dependent on what file systems the host operating system actually understands.

       • <b>__fish_print_hostnames</b> prints a list of all known hostnames. This function searches the fstab  for  nfs
         servers, ssh for known hosts and checks the <b><a href="file:/etc/hosts">/etc/hosts</a></b> file.

       • <b>__fish_print_interfaces</b> prints a list of all known network interfaces.

   <b>Where</b> <b>to</b> <b>put</b> <b>completions</b>
       Completions  can  be  defined  on  the  commandline  or  in  a  configuration  file, but they can also be
       automatically  loaded.  Fish  automatically  searches  through  any  directories  in  the  list  variable
       <b>$fish_complete_path</b>,  and any completions defined are automatically loaded when needed. A completion file
       must have a filename consisting of the name of the command to complete and the suffix <b>.fish</b>.

       By default, Fish searches the following for completions, using the first available file that it finds:

       • A directory for end-users to keep their own completions, usually <b><a href="file:~/.config/fish/completions">~/.config/fish/completions</a></b> (controlled
         by the <b>XDG_CONFIG_HOME</b> environment variable);

       • A directory for systems administrators to install completions for all  users  on  the  system,  usually
         <b>/etc/fish/completions</b>;

       • A      user-specified      directory      for      third-party      vendor     completions,     usually
         <b><a href="file:~/.local/share/fish/vendor_completions.d">~/.local/share/fish/vendor_completions.d</a></b> (controlled by the <b>XDG_DATA_HOME</b> environment variable);

       • A directory for third-party software vendors to ship their own completions for their software,  usually
         <b><a href="file:/usr/share/fish/vendor_completions.d">/usr/share/fish/vendor_completions.d</a></b>;

       • The completions shipped with fish, usually installed in <b>/usr/share/fish/completions</b>; and

       • Completions   automatically   generated   from   the  operating  system's  manual,  usually  stored  in
         <b><a href="file:~/.cache/fish/generated_completions">~/.cache/fish/generated_completions</a></b> (controlled by <b>XDG_CACHE_HOME</b> environment variable).

       These paths are controlled by parameters set at build, install, or  run  time,  and  may  vary  from  the
       defaults listed above.

       This   wide   search  may  be  confusing.  If  you  are  unsure,  your  completions  probably  belong  in
       <b><a href="file:~/.config/fish/completions">~/.config/fish/completions</a></b>.

       If you have written new completions for a common Unix command,  please  consider  sharing  your  work  by
       submitting it via the instructions in <u>Further</u> <u>help</u> <u>and</u> <u>development</u>.

       If  you are developing another program and would like to ship completions with your program, install them
       to the "vendor" completions directory. As this path  may  vary  from  system  to  system,  the  <b>pkgconfig</b>
       framework  should  be  used to discover this path with the output of <b>pkg-config</b> <b>--variable</b> <b>completionsdir</b>
       <b>fish</b>.

   <b>Writing</b> <b>your</b> <b>own</b> <b>prompt</b>
       <b>WARNING:</b>
          This document uses formatting to show what a prompt would look like. If you are viewing  this  in  the
          man  page,  you probably want to switch to looking at the html version instead. Run <b>help</b> <b>custom-prompt</b>
          to view it in a web browser.

       Fish ships a number of prompts that you can view with the <u>fish_config</u> command, and many users have shared
       their prompts online.

       However, you can also write your own, or adjust an existing prompt. This is a good way  to  get  used  to
       fish's <u>scripting</u> <u>language</u>.

       Unlike  other  shells, fish's prompt is built by running a function - <u>fish_prompt</u>. Or, more specifically,
       three functions:

       • <u>fish_prompt</u>, which is the main prompt function

       • <u>fish_right_prompt</u>, which is shown on the right side of the terminal.

       • <u>fish_mode_prompt</u>, which is shown if <u>vi</u> <u>mode</u> is used.

       These functions are run, and whatever they print is displayed as the prompt (minus one trailing newline).

       Here, we will just be writing a simple fish_prompt.

   <b>Our</b> <b>first</b> <b>prompt</b>
       Let's look at a very simple example:

          function fish_prompt
              echo $PWD '&gt;'
          end

       This prints the current working directory (<u>PWD</u>) and a <b>&gt;</b> symbol to show where the prompt ends.  The  <b>&gt;</b>  is
       <u>quoted</u> because otherwise it would signify a <u>redirection</u>.

       Because  we've  used  <u>echo</u>, it adds spaces between the two so it ends up looking like (assuming <b>_</b> is your
       cursor):

          /home/tutorial &gt;_

   <b>Formatting</b>
       <b>echo</b> adds spaces between its arguments. If you don't want those, you can use <u>string</u> <u>join</u> like this:

          function fish_prompt
              string join '' -- $PWD '&gt;'
          end

       The <b>--</b> indicates to <b>string</b> that no options can come after it, in case we extend this with something  that
       can start with a <b>-</b>.

       There are other ways to remove the space, including <b>echo</b> <b>-s</b> and <u>printf</u>.

   <b>Adding</b> <b>color</b>
       This prompt is functional, but a bit boring. We could add some color.

       Fortunately, fish offers the <u>set_color</u> command, so you can do:

          echo (set_color red)foo

       <b>set_color</b>  can  also handle RGB colors like <b>set_color</b> <b>23b455</b>, and other formatting options including bold
       and italics.

       So, taking our previous prompt and adding some color:

          function fish_prompt
              string join '' -- (set_color green) $PWD (set_color normal) '&gt;'
          end

       A "normal" color tells the terminal to go back to its normal formatting options.

       <b>set_color</b> works by producing an escape sequence,  which  is  a  special  piece  of  text  that  terminals
       interpret as instructions - for example, to change color. So <b>set_color</b> <b>red</b> produces the same effect as:

          echo \e\[31m

       Although you can write your own escape sequences by hand, it's much easier to use <b>set_color</b>.

   <b>Shortening</b> <b>the</b> <b>working</b> <b>directory</b>
       This  is  fine,  but  our  <u>PWD</u>  can  be  a bit long, and we are typically only interested in the last few
       directories. We can shorten this with the <u>prompt_pwd</u>  helper  that  will  give  us  a  shortened  working
       directory:

          function fish_prompt
              string join '' -- (set_color green) (prompt_pwd) (set_color normal) '&gt;'
          end

       <b>prompt_pwd</b> takes options to control how much to shorten. For instance, if we want to display the last two
       directories, we'd use <b>prompt_pwd</b> <b>--full-length-dirs</b> <b>2</b>:

          function fish_prompt
              string join '' -- (set_color green) (prompt_pwd --full-length-dirs 2) (set_color normal) '&gt;'
          end

       With a current directory of "/home/tutorial/Music/Lena Raine/Oneknowing", this would print

          <a href="file:~/M/Lena">~/M/Lena</a> Raine/Oneknowing&gt;_

   <b>Status</b>
       One  important bit of information that every command returns is the <u>status</u>. This is a whole number from 0
       to 255, and usually it is used as an error code - 0 if the command returned  successfully,  or  a  number
       from 1 to 255 if not.

       It's useful to display this in your prompt, but showing it when it's 0 seems kind of wasteful.

       First of all, since every command (except for <u>set</u>) changes the status, you need to store it for later use
       as the first thing in your prompt. Use a <u>local</u> <u>variable</u> so it will be confined to your prompt function:

          set -l last_status $status

       And after that, you can set a string if it is not zero:

          # Prompt status only if it's not 0
          set -l stat
          if test $last_status -ne 0
              set stat (set_color red)"[$last_status]"(set_color normal)
          end

       And to print it, we add it to our <b>string</b> <b>join</b>:

          string join '' -- (set_color green) (prompt_pwd) (set_color normal) $stat '&gt;'

       If <b>$last_status</b> was 0, <b>$stat</b> is empty, and so it will simply disappear.

       So our entire prompt is now:

          function fish_prompt
              set -l last_status $status
              # Prompt status only if it's not 0
              set -l stat
              if test $last_status -ne 0
                  set stat (set_color red)"[$last_status]"(set_color normal)
              end

              string join '' -- (set_color green) (prompt_pwd) (set_color normal) $stat '&gt;'
          end

       And it looks like:

          <a href="file:~/M/L/Oneknowing">~/M/L/Oneknowing</a>[1]&gt;_

       after we run <b>false</b> (which returns 1).

   <b>Save</b> <b>the</b> <b>prompt</b>
       Once  you  are happy with your prompt, you can save it with <b>funcsave</b> <b>fish_prompt</b> (see <u>funcsave</u> <u>-</u> <u>save</u> <u>the</u>
       <u>definition</u>   <u>of</u>   <u>a</u>   <u>function</u>   <u>to</u>    <u>the</u>    <u>user's</u>    <u>autoload</u>    <u>directory</u>)    or    write    it    to
       <a href="file:~/.config/fish/functions/fish_prompt.fish">~/.config/fish/functions/fish_prompt.fish</a> yourself.

       If  you  want  to  edit  it again, open that file or use <b>funced</b> <b>fish_prompt</b> (see <u>funced</u> <u>-</u> <u>edit</u> <u>a</u> <u>function</u>
       <u>interactively</u>).

   <b>Where</b> <b>to</b> <b>go</b> <b>from</b> <b>here?</b>
       We have now built a simple but working and usable prompt, but of course more can be done.

       •

         <b>Fish</b> <b>offers</b> <b>more</b> <b>helper</b> <b>functions:</b>

                • <b>prompt_login</b> to describe the user/hostname/container or <b>prompt_hostname</b> to describe  just  the
                  host

                • <b>fish_is_root_user</b> to help with changing the symbol for root.

                • <b>fish_vcs_prompt</b>  to  show  version  control information (or <b>fish_git_prompt</b> / <b>fish_hg_prompt</b> /
                  <b>fish_svn_prompt</b> to limit it to specific systems)

       • You  can  add  a  right  prompt  by  changing  <u>fish_right_prompt</u>  or  a  vi  mode  prompt  by  changing
         <u>fish_mode_prompt</u>.

       •

         <b>Some</b> <b>prompts</b> <b>have</b> <b>interesting</b> <b>or</b> <b>advanced</b> <b>features</b>

                • Add the time when the prompt was printed

                • Show various integrations like python's venv

                • Color the parts differently.

       You  can  look  at fish's sample prompts for inspiration. Open up <u>fish_config</u>, find one you like and pick
       it. For example:

          fish_config prompt show # &lt;- shows all the sample prompts
          fish_config prompt choose disco # &lt;- this picks the "disco" prompt for this session
          funced fish_prompt # &lt;- opens fish_prompt in your editor, and reloads it once the editor exits

   <b>Design</b>
       This is a description of the design principles that have been used to design fish. The  fish  design  has
       three high level goals. These are:

       1. Everything that can be done in other shell languages should be possible to do in fish, though fish may
          rely on external commands in doing so.

       2. Fish  should  be user-friendly, but not at the expense of expressiveness. Most tradeoffs between power
          and ease of use can be avoided with careful design.

       3. Whenever possible without breaking the above goals, fish should follow POSIX.

       To achieve these high-level goals, the fish design relies on a number of more specific design principles.
       These are presented below, together with a rationale and a few examples for each.

   <b>The</b> <b>law</b> <b>of</b> <b>orthogonality</b>
       The shell language should have a small set of orthogonal features. Any situation where two  features  are
       related  but  not  identical,  one  of  them should be removed, and the other should be made powerful and
       general enough to handle all common use cases of either feature.

       Rationale: Related features make the language larger, which makes it harder to learn. It  also  increases
       the size of the source code, making the program harder to maintain and update.

       Examples:

       • Here documents are too similar to using echo inside of a pipeline.

       • Subshells,  command  substitution  and  process  substitution  are strongly related. <b>fish</b> only supports
         command substitution, the others can be achieved either using a block or the psub shellscript function.

       • Having both aliases and functions is confusing, especially since both  of  them  have  limitations  and
         problems. <b>fish</b> functions have none of the drawbacks of either syntax.

       • The many Posix quoting styles are silly, especially <b>$</b>.

   <b>The</b> <b>law</b> <b>of</b> <b>responsiveness</b>
       The  shell should attempt to remain responsive to the user at all times, even in the face of contended or
       unresponsive filesystems. It is only acceptable to block in response to a user initiated action, such  as
       running a command.

       Rationale:  Bad  performance  increases  user-facing complexity, because it trains users to recognize and
       route around slow use cases. It is also incredibly frustrating.

       Examples:

       • Features  like  syntax  highlighting  and  autosuggestions  must  perform  all  of   their   disk   I/O
         asynchronously.

       • Startup  should  minimize  forks  and disk I/O, so that fish can be started even if the system is under
         load.

   <b>Configurability</b> <b>is</b> <b>the</b> <b>root</b> <b>of</b> <b>all</b> <b>evil</b>
       Every configuration option in a program is a place where the program is too  stupid  to  figure  out  for
       itself  what  the  user  really  wants,  and  should  be considered a failure of both the program and the
       programmer who implemented it.

       Rationale: Different configuration options are a nightmare to maintain, since  the  number  of  potential
       bugs  caused by specific configuration combinations quickly becomes an issue. Configuration options often
       imply assumptions about the code which change when reimplementing the code, causing issues with backwards
       compatibility. But mostly, configuration options should be avoided since they simply should not exist, as
       the program should be smart enough to do what is best, or at least a good enough approximation of it.

       Examples:

       • Fish allows the user to set various syntax highlighting colors. This is needed because  fish  does  not
         know  what  colors  the  terminal  uses by default, which might make some things unreadable. The proper
         solution would be for text color preferences to be defined centrally by the user for all programs,  and
         for the terminal emulator to send these color properties to fish.

       • Fish  does  not  allow  you  to  set the number of history entries, different language substyles or any
         number of other common shell configuration options.

       A special note on the evils of configurability is the long list of very useful  features  found  in  some
       shells, that are not turned on by default. Both zsh and bash support command-specific completions, but no
       such  completions  are  shipped  with  bash  by default, and they are turned off by default in zsh. Other
       features that zsh supports that are disabled by default  include  tab-completion  of  strings  containing
       wildcards, a sane completion pager and a history file.

   <b>The</b> <b>law</b> <b>of</b> <b>user</b> <b>focus</b>
       When  designing  a  program,  one should first think about how to make an intuitive and powerful program.
       Implementation issues should only be considered once a user interface has been designed.

       Rationale: This design rule is different than the others, since it describes  how  one  should  go  about
       designing  new  features, not what the features should be. The problem with focusing on what can be done,
       and what is easy to do, is that too much of the implementation is exposed. This means that the user  must
       know a great deal about the underlying system to be able to guess how the shell works, it also means that
       the language will often be rather low-level.

       Examples:

       • There  should  only  be  one  type  of  input  to the shell, lists of commands. Loops, conditionals and
         variable assignments are all performed through regular commands.

       • The differences between built-in commands  and  shellscript  functions  should  be  made  as  small  as
         possible.  Built-ins and shellscript functions should have exactly the same types of argument expansion
         as other commands, should be possible to use in any position in a pipeline, and should support any  I/O
         redirection.

       • Instead  of  forking  when  performing  command substitution to provide a fake variable scope, all fish
         commands are performed from the same process, and fish instead supports true scoping.

       • All blocks end with the <b>end</b> built-in.

   <b>The</b> <b>law</b> <b>of</b> <b>discoverability</b>
       A program should be designed to make its features as easy as possible to discover for the user.

       Rationale: A program whose features are discoverable turns a new user into an expert in a shorter span of
       time, since the user will become an expert on the program simply by using it.

       The main benefit of a graphical program over  a  command-line-based  program  is  discoverability.  In  a
       graphical  program,  one can discover all the common features by simply looking at the user interface and
       guessing what the different buttons, menus and other widgets do. The traditional way to discover features
       in command-line programs is through manual pages. This requires both  that  the  user  starts  to  use  a
       different  program,  and  then  they  remember  the new information until the next time they use the same
       program.

       Examples:

       • Everything should be tab-completable, and every tab completion should have a description.

       • Every syntax error and error in a built-in command should contain an error message describing what went
         wrong and a relevant help page.  Whenever  possible,  errors  should  be  flagged  red  by  the  syntax
         highlighter.

       • The  help  manual  should  be  easy to read, easily available from the shell, complete and contain many
         examples

       • The language should be uniform, so that once the user understands  the  command/argument  syntax,  they
         will know the whole language, and be able to use tab-completion to discover new features.

   <b>Release</b> <b>notes</b>
   <b>fish</b> <b>4.0.1</b> <b>(released</b> <b>March</b> <b>12,</b> <b>2025)</b>
       This release of fish includes the following improvements compared to fish 4.0.0:

       • Key  combinations  using  the  super (Windows/command) key can be bound using the <b>super-</b> prefix (<u>#11217</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/11217</b>&gt;).

       • Konsole's menu shows the "Open folder with" option again  (<u>#11198</u>  &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/11198</b>&gt;).

       •

         <b>$fish_color_search_match</b> <b>will</b> <b>now</b> <b>only</b> <b>be</b> <b>applied</b> <b>to</b> <b>the</b> <b>foreground</b> <b>color</b> <b>if</b> <b>it</b> <b>has</b> <b>an</b> <b>explicit</b>
         <b>foreground.</b> <b>For</b> <b>example,</b> <b>this</b> <b>allows</b> <b>setting::</b>
                set -g fish_color_search_match --reverse

       • Cursor  shape commands (<b>\e[2</b> <b>q</b>) are no longer sent in non-interactive shells or in redirections (<u>#11255</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/11255</b>&gt;).

       • <u>status</u> gained a <b>is-interactive-read</b> subcommand, to check whether the script is  being  called  from  an
         interactive <u>read</u> invocation.

       • fish's  background  tasks  are  now started in a way that avoids an error on macOS Terminal.app (<u>#11181</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/11181</b>&gt;).

       • Using key combinations within qemu should work correctly.

       • Prompts containing control characters no longer  cause  incorrect  display  of  command  lines  (<u>#11252</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/11252</b>&gt;).

       • Cancelling  the  command-line  in  Vi  mode  displays correctly again (<u>#11261</u> &lt;<b>https://github.com/fish-</b>
         <b>shell/fish-shell/issues/11261</b>&gt;).

       • The acidhub prompt properly displays the git branch again (<u>#11179</u>  &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/11179</b>&gt;).

       • Completions  for  <b>wine</b>  correctly  include  files  again  (<u>#11202</u>  &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/11202</b>&gt;).

       • On macOS, paths from <b>/etc/paths</b> and <b>/etc/manpaths</b>  containing  colons  are  handled  correctly  (<u>#10684</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/10684</b>&gt;).  This functionality was included in the 4.0.0
         release notes but was missing from the source code.

       • The XTerm <b>modifyOtherKeys</b> keyboard encoding is no longer used  under  WezTerm,  as  it  does  not  work
         correctly in all layouts (<u>#11204</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/11204</b>&gt;).

       • kbd:<u>option-left</u>  and  other  similar  keys  should  now work in iTerm versions before 3.5.12; the kitty
         keyboard protocol is  now  disabled  on  these  versions  (<u>#11192</u>  &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/11192</b>&gt;).

       • The  kitty  keyboard protocol is no longer used under Midnight Commander, as it does not work correctly
         (<u>#10640</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/10640</b>&gt;).

       • fish now sends the commandline along with the OSC 133 semantic  prompt  command  start  sequence.  This
         fixes a test in the kitty terminal (<u>#11203</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/11203</b>&gt;).

       • Git  completions  for  third-party  commands  like  "git-absorb"  are completed correctly again (<u>#11205</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/11205</b>&gt;).

       • Completions for <b>diskutil</b>  no  longer  produce  an  error  (<u>#11201</u>  &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/11201</b>&gt;).

       • The   output  of  certain  error  messages  no  longer  prints  newlines  to  standard  output  (<u>#11248</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/11248</b>&gt;).

       • A  number  of  crashes  have  been  fixed,  including  file  names  longer  than  255   bytes   (<u>#11221</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/11221</b>&gt;),  using  fish  on  a  btrfs filesystem (<u>#11219</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/11219</b>&gt;), history files that do not have  the  expected
         format  (<u>#11236</u>  &lt;<b>https://github.com/fish-shell/fish-shell/issues/11236</b>&gt;),  and  pasting  into an empty
         command line (<u>#11256</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/11256</b>&gt;).

                                                         ----

   <b>fish</b> <b>4.0.0</b> <b>(released</b> <b>February</b> <b>27,</b> <b>2025)</b>
       fish's  core  code  has  been  ported  from  C++  to  Rust  (<u>#9512</u>   &lt;<b>https://github.com/fish-shell/fish-</b>
       <b>shell/issues/9512</b>&gt;).  This  means  a  large  change in dependencies and how to build fish. However, there
       should be no direct impact on users. Packagers should see the <u>For</u> <u>Distributors</u> section at the end.

   <b>Notable</b> <b>backwards-incompatible</b> <b>changes</b>
       • As part of a larger binding rework, <b>bind</b> gained a new key notation.  In most  cases  the  old  notation
         should  keep  working,  but  in  rare  cases  you  may  have to change a <b>bind</b> invocation to use the new
         notation.  See <u>below</u> for details.

       • <b>ctrl-c</b> now calls a new bind function called <b>clear-commandline</b>. The old behavior, which  leaves  a  "^C"
         marker,    is    available    as    <b>cancel-commandline</b>   (<u>#10935</u>   &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/10935</b>&gt;)

       • <b>random</b> will produce different values from previous versions of fish when used with the same  seed,  and
         will work more sensibly with small seed numbers.  The seed was never guaranteed to give the same result
         across  systems,  so  we  do  not  expect  this to have a large impact (<u>#9593</u> &lt;<b>https://github.com/fish-</b>
         <b>shell/fish-shell/issues/9593</b>&gt;).

       • Variables in command position that expand to a subcommand keyword are now forbidden  to  fix  a  likely
         user   error.    For  example,  <b>set</b>  <b>editor</b>  <b>command</b>  <b>emacs;</b>  <b>$editor</b>  is  no  longer  allowed  (<u>#10249</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/10249</b>&gt;).

       • <b>functions</b> <b>--handlers</b> will now list handlers in a different order.  Now it is definition order, first to
         last, where before it was last to first.  This was never specifically defined,  and  we  recommend  not
         relying on a specific order (<u>#9944</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/9944</b>&gt;).

       • The  <b>qmark-noglob</b>  feature,  introduced in fish 3.0, is enabled by default. That means <b>?</b> will no longer
         act as a single-character glob.  You can, for the time being, turn it back on by adding <b>no-qmark-noglob</b>
         to <b>fish_features</b> and restarting fish:

            set -Ua fish_features no-qmark-noglob

         The flag will eventually be made read-only, making it impossible to turn off.

       • Terminals that fail to  ignore  unrecognized  OSC  or  CSI  sequences  may  display  garbage.  We  know
         cool-retro-term and emacs' ansi-term are affected, but most mainstream terminals are not.

       • fish  no  longer searches directories from the Windows system/user <b>$PATH</b> environment variable for Linux
         executables. To execute Linux binaries by name (i.e. not with a  relative  or  absolute  path)  from  a
         Windows  folder,  make  sure  the  <b>/mnt/c/...</b> path is explicitly added to <b>$fish_user_paths</b> and not just
         automatically   appended   to   <b>$PATH</b>   by   <b>wsl.exe</b>    (<u>#10506</u>    &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/10506</b>&gt;).

       • Under  Microsoft  Windows  Subsystem  for  Linux  1  (not  WSL 2), backgrounded jobs that have not been
         disowned and do not terminate on their own after a <b>SIGHUP</b> + <b>SIGCONT</b> sequence will be explicitly  killed
         by fish on exit (after the usual prompt to close or disown them) to work around a WSL 1 deficiency that
         sees  backgrounded  processes  that  run  into  <b>SIGTTOU</b> remain in a suspended state indefinitely (<u>#5263</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/5263</b>&gt;).  The  workaround  is  to   explicitly   <b>disown</b>
         processes you wish to outlive the shell session.

   <b>Notable</b> <b>improvements</b> <b>and</b> <b>fixes</b>
       • fish   now   requests   XTerm's   <b>modifyOtherKeys</b>  keyboard  encoding  and  <u>kitty</u>  <u>keyboard</u>  <u>protocol's</u>
         &lt;<b>https://sw.kovidgoyal.net/kitty/keyboard-protocol/</b>&gt;       progressive       enhancements       (<u>#10359</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/10359</b>&gt;).   Depending  on terminal support, this allows
         to binding more key combinations, including arbitrary combinations of modifiers <b>ctrl</b>,  <b>alt</b>  and  <b>shift</b>,
         and distinguishing (for example) <b>ctrl-i</b> from <b>tab</b>.

         Additionally,  <b>bind</b>  now supports a human-readable syntax in addition to byte sequences.  This includes
         modifier names, and names for keys like <b>enter</b> and <b>backspace</b>.  For example

         • <b>bind</b> <b>up</b> <b>'do</b> <b>something'</b> binds the up-arrow key instead of a two-key sequence ("u" and then "p")

         • <b>bind</b> <b>ctrl-x,alt-c</b> <b>'do</b> <b>something'</b> binds a sequence of two keys.

         Any key argument that starts with an ASCII control character (like <b>\e</b> or <b>\cX</b>) or is up to 3  characters
         long,  not  a  named  key,  and  does  not contain <b>,</b> or <b>-</b> will be interpreted in the old syntax to keep
         compatibility for the majority of bindings.

         Keyboard protocols can be turned off by disabling the "keyboard-protocols" feature flag:

            set -Ua fish_features no-keyboard-protocols

         This is a temporary measure to work around buggy terminals (<u>#11056</u> &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/11056</b>&gt;), which appear to be relatively rare.  Use this if something  like  "=0"  or  "=5u"
         appears in your commandline mysteriously.

       • fish  can  now  be  built  as  a  self-installing  binary  (<u>#10367</u> &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/10367</b>&gt;). That means it can be easily built on one system and copied to another,  where  it
         can extract supporting files.  To do this, run:

            cargo install --path . # in a clone of the fish repository
            # or `cargo build --release` and copy target/release/fish{,_indent,_key_reader} wherever you want

         The    first    time   it   runs   interactively,   it   will   extract   all   the   data   files   to
         <b><a href="file:~/.local/share/fish/install/">~/.local/share/fish/install/</a></b>. A specific path can be used for the data files with  <b>fish</b>  <b>--install=PATH</b>
         To uninstall, remove the fish binaries and that directory.

         This build system is experimental; the main build system, using <b>cmake</b>, remains the recommended approach
         for packaging and installation to a prefix.

       • A new function <b>fish_should_add_to_history</b> can be overridden to decide whether a command should be added
         to the history (<u>#10302</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/10302</b>&gt;).

       • Bindings  can  now  mix  special  input  functions  and  shell  commands,  so  <b>bind</b>  <b>ctrl-g</b> <b>expand-abbr</b>
         <b>"commandline</b> <b>-i</b> <b>\n"</b> works as expected (<u>#8186</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/8186</b>&gt;).

       • Special input functions run from bindings via <b>commandline</b> <b>-f</b> are now applied  immediately,  instead  of
         after  the currently executing binding (<u>#3031</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/3031</b>&gt;, ‐
         <u>#10126</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/10126</b>&gt;).   For  example,  <b>commandline</b>  <b>-i</b>  <b>foo;</b>
         <b>commandline</b> <b>|</b> <b>grep</b> <b>foo</b> succeeds now.

       • Undo  history  is  no  longer  truncated  after  every  command, but kept for the lifetime of the shell
         process.

       • The  <b>ctrl-r</b>  history  search  now  uses  glob   syntax   (<u>#10131</u>   &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/10131</b>&gt;).

       • The  <b>ctrl-r</b>  history  search now operates only on the line or command substitution at cursor, making it
         easier to combine commands from history (<u>#9751</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/9751</b>&gt;).

       • Abbreviations can now be restricted to specific commands. For instance:

            abbr --add --command git back 'reset --hard HEAD^'

         will  expand  "back"  to  <b>reset</b>  <b>--hard</b>  <b>HEAD^</b>,   but   only   when   the   command   is   <b>git</b>   (<u>#9411</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/9411</b>&gt;).

   <b>Deprecations</b> <b>and</b> <b>removed</b> <b>features</b>
       • <b>commandline</b>  <b>--tokenize</b> (short option <b>-o</b>) has been deprecated in favor of <b>commandline</b> <b>--tokens-expanded</b>
         (short option <b>-x</b>) which expands variables and other shell syntax, removing the  need  to  use  <u>eval</u>  in
         completion scripts (<u>#10212</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/10212</b>&gt;).

       • Two new feature flags:

         • <b>remove-percent-self</b>  (see <b>status</b> <b>features</b>) disables PID expansion of <b>%self</b>, which has been supplanted
           by <b>$fish_pid</b> (<u>#10262</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/10262</b>&gt;).

         • <b>test-require-arg</b> disables <b>test</b>'s one-argument mode. That means <b>test</b> <b>-n</b> without an additional argument
           will return false, <b>test</b> <b>-z</b> will keep returning true. Any other option without an  argument,  anything
           that  is not an option and no argument will be an error. This also goes for <b>[</b>, test's alternate name.
           This is a frequent source of confusion and so we are breaking with POSIX explicitly in  this  regard.
           In  addition to the feature flag, there is a debug category "deprecated-test". Running fish with <b>fish</b>
           <b>-d</b> <b>deprecated-test</b> will show warnings whenever a <b>test</b> invocation that would change is  used.  (<u>#10365</u>
           &lt;<b>https://github.com/fish-shell/fish-shell/issues/10365</b>&gt;).

         These can be enabled with:

            set -Ua fish_features remove-percent-self test-require-arg

         We intend to enable them by default in future, and after that eventually make them read-only.

       • Specifying key names as terminfo names (using the <b>bind</b> <b>-k</b> syntax) is deprecated and may be removed in a
         future version.

       • When  a  terminal  pastes  text into fish using bracketed paste, fish used to switch to a special <b>paste</b>
         bind mode.  This bind mode has been removed. The behavior on paste is no longer configurable.

       • When an interactive fish is stopped or terminated by  a  signal  that  cannot  be  caught  (SIGSTOP  or
         SIGKILL),  it  may  leave  the  terminal  in  a state where keypresses with modifiers are sent as CSI u
         sequences, instead of traditional control  characters  or  escape  sequences  that  are  recognized  by
         Readline  and  compatible  programs,  such  as bash and python.  If this happens, you can use the <b>reset</b>
         command from <b>ncurses</b> to restore the terminal state.

       • <b>fish_key_reader</b> <b>--verbose</b> no longer shows timing information.

       • Terminal information is no longer read from hashed terminfo databases,  or  termcap  databases  (<u>#10269</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/10269</b>&gt;). The vast majority of systems use a non-hashed
         terminfo database, which is still supported.

       • <b>source</b>    returns    an    error   if   used   without   a   filename   or   pipe/redirection   (<u>#10774</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/10774</b>&gt;).

   <b>Scripting</b> <b>improvements</b>
       • <b>for</b>  loops  will  no  longer  remember  local   variables   from   the   previous   iteration   (<u>#10525</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/10525</b>&gt;).

       • A  new  <b>history</b>  <b>append</b>  subcommand  appends  a  command  to  the  history, without executing it (<u>#4506</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/4506</b>&gt;).

       • A new redirection: <b>&lt;?</b> <b>/path/to/file</b> will try opening the file as  input,  and  if  it  doesn't  succeed
         silently  uses  <b>/dev/null</b>  instead.   This  can help with checks like <b>test</b> <b>-f</b> <b>/path/to/file;</b> <b>and</b> <b>string</b>
         <b>replace</b> <b>foo</b> <b>bar</b> <b>&lt;</b> <b>/path/to/file</b>. (<u>#10387</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/10387</b>&gt;)

       • A new option  <b>commandline</b>  <b>--tokens-raw</b>  prints  a  list  of  tokens  without  any  unescaping  (<u>#10212</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/10212</b>&gt;).

       • A new option <b>commandline</b> <b>--showing-suggestion</b> tests whether an autosuggestion is currently displayed (‐
         <u>#10586</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/10586</b>&gt;).

       • <b>functions</b>  and  <b>type</b>  now  show  that  a function was copied and its source, rather than solely <b>Defined</b>
         <b>interactively</b> (<u>#6575</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/6575</b>&gt;).

       • Stack trace now shows line numbers for  copied  functions  (<u>#6575</u>  &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/6575</b>&gt;).

       • <b>foo</b>  <b>&amp;</b>  <b>&amp;&amp;</b>  <b>bar</b> is now a syntax error, like in other shells (<u>#9911</u> &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/9911</b>&gt;).

       • <b>if</b>  <b>-e</b>  <b>foo;</b>  <b>end</b>  now  prints  a  more  accurate  error  (<u>#10000</u>  &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/10000</b>&gt;).

       • <b>cd</b>  into  a  directory  that  is  not readable but accessible (permissions <b>--x</b>) is now possible (<u>#10432</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/10432</b>&gt;).

       • An integer  overflow  in  <b>string</b>  <b>repeat</b>  leading  to  a  near-infinite  loop  has  been  fixed  (<u>#9899</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/9899</b>&gt;).

       • <b>string</b>  <b>shorten</b> behaves better in the presence of non-printable characters, including fixing an integer
         overflow  that  shortened  strings  more  than  intended  (<u>#9854</u>   &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/9854</b>&gt;).

       • <b>string</b>  <b>pad</b>  no  longer  allows  non-printable  characters  as padding (<u>#9854</u> &lt;<b>https://github.com/fish-</b>
         <b>shell/fish-shell/issues/9854</b>&gt;).

       • <b>string</b>  <b>repeat</b>  now  allows  omission  of  <b>-n</b>  when  the  first  argument   is   an   integer   (<u>#10282</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/10282</b>&gt;).

       • <b>string</b>  <b>match</b>  and <b>replace</b> have a new <b>--max-matches</b> option to return as soon as the specified number of
         matches   have   been   identified,   which   can    improve    performance    in    scripts    (<u>#10587</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/10587</b>&gt;).

       • <b>functions</b>  <b>--handlers-type</b>  <b>caller-exit</b>  once  again  lists functions defined as <b>function</b> <b>--on-job-exit</b>
         <b>caller</b>, rather than them being listed by <b>functions</b> <b>--handlers-type</b> <b>process-exit</b>.

       • A new <b>set</b> <b>--no-event</b> option sets or erases variables without triggering a variable event. This  can  be
         useful   to  change  a  variable  in  an  event  handler  (<u>#10480</u>  &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/10480</b>&gt;).

       • Commas in command substitution output are no longer used as separators in brace expansion, preventing a
         surprising expansion in some cases (<u>#5048</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/5048</b>&gt;).

       • Universal variables can now store strings containing invalid  UTF-8  (<u>#10313</u>  &lt;<b>https://github.com/fish-</b>
         <b>shell/fish-shell/issues/10313</b>&gt;).

       • A  new  <b>path</b>  <b>basename</b>  <b>-E</b>  option that causes it to return the basename ("filename" with the directory
         prefix removed) with the final extension (if any) also removed. This  is  a  shorter  version  of  <b>path</b>
         <b>change-extension</b>    <b>""</b>    <b>(path</b>    <b>basename</b>    <b>$foo)</b>    (<u>#10521</u>    &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/10521</b>&gt;).

       • A new <b>math</b> <b>--scale-mode</b> option to select <b>truncate</b>, <b>round</b>, <b>floor</b>, <b>ceiling</b> as you wish; the default value
         is <b>truncate</b>. (<u>#9117</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/9117</b>&gt;).

       • <b>random</b> is now less strict about its arguments, allowing a start larger or equal  to  the  end.  (<u>#10879</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/10879</b>&gt;)

       • <b>function</b>  <b>--argument-names</b>  now  produces  an  error  if a read-only variable name is used, rather than
         simply ignoring it (<u>#10842</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/10842</b>&gt;).

       • Tilde expansion in braces (that is, <b>{~,}</b>) works correctly (<u>#10610</u>  &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/10610</b>&gt;).

   <b>Interactive</b> <b>improvements</b>
       • Autosuggestions  were  sometimes not shown after recalling a line from history, which has been fixed (‐
         <u>#10287</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/10287</b>&gt;).

       • Up-arrow search matches -- which are highlighted in reverse colors -- are no longer syntax-highlighted,
         to fix bad contrast with the search match highlighting.

       • Command abbreviations (those with <b>--position</b> <b>command</b> or without a <b>--position</b>)  now  also  expand  after
         decorators like <b>command</b> (<u>#10396</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/10396</b>&gt;).

       • Abbreviations  now expand after process separators like <b>;</b> and <b>|</b>. This fixes a regression in version 3.6
         (<u>#9730</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/9730</b>&gt;).

       • When exporting interactively defined functions (using <b>type</b>, <b>functions</b> or <b>funcsave</b>) the function body is
         now indented, to match the interactive command line editor (<u>#8603</u>  &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/8603</b>&gt;).

       • <b>ctrl-x</b>    (<b>fish_clipboard_copy</b>)    on    multiline    commands   now   includes   indentation   (<u>#10437</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/10437</b>&gt;).

       • <b>ctrl-v</b> (<b>fish_clipboard_paste</b>) now strips ASCII control  characters  from  the  pasted  text.   This  is
         consistent with normal keyboard input (<u>#5274</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/5274</b>&gt;).

       • When a command like <b>fg</b> <b>%2</b> fails to find the given job, it no longer behaves as if no job spec was given
         (<u>#9835</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/9835</b>&gt;).

       • Redirection in command position like <b>&gt;echo</b> is now highlighted as error (<u>#8877</u> &lt;<b>https://github.com/fish-</b>
         <b>shell/fish-shell/issues/8877</b>&gt;).

       • <b>fish_vi_cursor</b>   now   works   properly   inside   the   prompt   created   by   builtin  <b>read</b>  (<u>#10088</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/10088</b>&gt;).

       • fish  no  longer  fails  to  open  a  FIFO  if  interrupted  by  a  terminal  resize   signal   (<u>#10250</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/10250</b>&gt;).

       • <b>read</b>  <b>--help</b>  and friends no longer ignore redirections. This fixes a regression in version 3.1 (<u>#10274</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/10274</b>&gt;).

       • Measuring  a  command  with  <b>time</b>  now  considers  the  time  taken  for  command  substitution  (<u>#9100</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/9100</b>&gt;).

       • <b>fish_add_path</b>  now automatically enables verbose mode when used interactively (in the command line), in
         an  effort  to  be  clearer   about   what   it   does   (<u>#10532</u>   &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/10532</b>&gt;).

       • fish  no  longer  adopts  TTY  modes  of  failed  commands (<u>#10603</u> &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/10603</b>&gt;).

       • <b>complete</b>  <b>-e</b>  <b>cmd</b>  now  prevents  autoloading  completions  for  <b>cmd</b>  (<u>#6716</u>  &lt;<b>https://github.com/fish-</b>
         <b>shell/fish-shell/issues/6716</b>&gt;).

       • fish's  default  color  scheme  no  longer  uses  the  color "blue", as it has bad contrast against the
         background  in  a  few  terminal's  default   palettes   (<u>#10758</u>   &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/10758</b>&gt;,  <u>#10786</u>  &lt;<b>https://github.com/fish-shell/fish-shell/issues/10786</b>&gt;) The color scheme
         will not be upgraded for existing installs. If you want, you should select it again via <b>fish_config</b>.

       • Command lines which are larger than the terminal are now displayed correctly, instead of multiple blank
         lines being displayed (<u>#7296</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/7296</b>&gt;).

       • Prompts that use external commands will no longer produce an infinite loop if the  command  crashes  (‐
         <u>#9796</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/9796</b>&gt;).

       • Undo   (<b>ctrl-z</b>)   restores   the   cursor  position  too  (<u>#10838</u>  &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/10838</b>&gt;).

       • The output of <b>jobs</b> shows "-" for jobs that have the same process group ID as the fish  process,  rather
         than "-2" (<u>#10833</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/10833</b>&gt;).

       • Job expansion (<b>%1</b> syntax) works properly for jobs that are a mixture of external commands and functions
         (<u>#10832</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/10832</b>&gt;).

       • Command  lines  which  have  more lines than the terminal can be displayed and edited correctly (<u>#10827</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/10827</b>&gt;).

       • Functions  that  have  been  erased   are   no   longer   highlighted   as   valid   commands   (<u>#10866</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/10866</b>&gt;).

       • <b>not</b>,  <b>time</b>, and variable assignments (that is <b>not</b> <b>time</b> <b>a=b</b> <b>env</b>) is correctly recognized as valid syntax
         (<u>#10890</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/10890</b>&gt;).

       • The Web-based configuration removes old right-hand-side prompts again,  fixing  a  regression  in  fish
         3.4.0 (<u>#10675</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/10675</b>&gt;).

       • Further protection against programs which crash and leave the terminal in an inconsistent state (<u>#10834</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/10834</b>&gt;,   <u>#11038</u>  &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/11038</b>&gt;).

       • A workaround for git being very slow on macOS has been applied, improving  performance  after  a  fresh
         boot (<u>#10535</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/10535</b>&gt;).

   <b>New</b> <b>or</b> <b>improved</b> <b>bindings</b>
       • When  the cursor is on a command that resolves to an executable script, <b>alt-o</b> will now open that script
         in your editor (<u>#10266</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/10266</b>&gt;).

       • During up-arrow history search, <b>shift-delete</b> will delete the current search item and move to  the  next
         older item. Previously this was only supported in the history pager.

       • <b>shift-delete</b>  will  also remove the currently-displayed autosuggestion from history, and remove it as a
         suggestion.

       • <b>ctrl-Z</b> (also known as <b>ctrl-shift-z</b>) is now bound to redo.

       • Some improvements to the <b>alt-e</b> binding which edits the command  line  in  an  external  editor:  -  The
         editor's  cursor  position  is copied back to fish. This is currently supported for Vim and Kakoune.  -
         Cursor position synchronization is only supported for a set  of  known  editors,  which  are  now  also
         detected  in  aliases  which  use  <b>complete</b>  <b>--wraps</b>.  For  example, use <b>complete</b> <b>--wraps</b> <b>my-vim</b> <b>vim</b> to
         synchronize cursors when <b>EDITOR=my-vim</b>.  - Multiline commands are indented before  being  sent  to  the
         editor, which matches how they are displayed in fish.

       • The  <b>...-path-component</b>  bindings,  like  <b>backward-kill-path-component</b>,  now  treat <b>#</b> as part of a path
         component (<u>#10271</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/10271</b>&gt;).

       • Bindings  like  <b>alt-l</b>  that  print  output  in  between  prompts  now  work  correctly  with  multiline
         commandlines.

       • <b>alt-d</b> on an empty command line lists the directory history again. This restores the behavior of version
         2.1.

       • <b>history-prefix-search-backward</b>  and  <b>-forward</b>  now  maintain the cursor position, instead of moving the
         cursor to the end of the command line (<u>#10430</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/10430</b>&gt;).

       • The following keys have refined behavior if  the  terminal  supports  <u>the</u>  <u>new</u>  <u>keyboard</u>  <u>encodings</u>:  -
         <b>shift-enter</b>  now inserts a newline instead of executing the command line.  - <b>ctrl-backspace</b> now deletes
         the  last  word  instead   of   only   one   character   (<u>#10741</u>   &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/10741</b>&gt;).  - <b>ctrl-delete</b> deletes the next word (same as <b>alt-d</b>).

       • New   special  input  functions:  -  <b>forward-char-passive</b>  and  <b>backward-char-passive</b>  are  like  their
         non-passive variants but do not accept autosuggestions or move focus in the  completion  pager  (<u>#10398</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/10398</b>&gt;).  - <b>forward-token</b>, <b>backward-token</b>, <b>kill-token</b>,
         and  <b>backward-kill-token</b>  are similar to the <b>*-bigword</b> variants but for the whole argument token (which
         includes   escaped   spaces)   (<u>#2014</u>    &lt;<b>https://github.com/fish-shell/fish-shell/issues/2014</b>&gt;).     -
         <b>clear-commandline</b>,  which merely clears the command line, as an alternative to <b>cancel-commandline</b> which
         prints <b>^C</b> and a new prompt (<u>#10213</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/10213</b>&gt;).

       • The <b>accept-autosuggestion</b> special input function now returns false when there was nothing to accept  (‐
         <u>#10608</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/10608</b>&gt;).

       • Vi  mode  has  seen some improvements but continues to suffer from the lack of people working on it.  -
         New default cursor shapes for insert and replace mode.  - <b>ctrl-n</b> in insert mode accepts autosuggestions
         (<u>#10339</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/10339</b>&gt;).  - Outside insert  mode,  the  cursor
         will no longer be placed beyond the last character on the commandline.  - When the cursor is at the end
         of  the  commandline,  a  single  <b>l</b>  will  accept  an  autosuggestion (<u>#10286</u> &lt;<b>https://github.com/fish-</b>
         <b>shell/fish-shell/issues/10286</b>&gt;).  - The cursor position after pasting (<b>p</b>) has been corrected.  -  Added
         an  additional  binding,  <b>_</b>,  for moving to the beginning of the line (<u>#10720</u> &lt;<b>https://github.com/fish-</b>
         <b>shell/fish-shell/issues/10720</b>&gt;).  - When the cursor is at the start of a  line,  escaping  from  insert
         mode no longer moves the cursor to the previous line.  - Added bindings for clipboard interaction, like
         <b>",+,p</b>  and  <b>",+,y,y</b>.   -  Deleting  in  visual  mode  now  moves  the  cursor back, matching vi (<u>#10394</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/10394</b>&gt;).  - The <b>;</b>, <b>,</b>, <b>v</b>, <b>V</b>, <b>I</b>, and <b>gU</b> bindings work in
         visual      mode      (<u>#10601</u>      &lt;<b>https://github.com/fish-shell/fish-shell/issues/10601</b>&gt;,      <u>#10648</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/10648</b>&gt;).      -     Support     <b>%</b>    motion    (<u>#10593</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/10593</b>&gt;).  - <b>ctrl-k</b> to remove the contents of the  line
         beyond  the  cursor  in  all modes (<u>#10648</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/10648</b>&gt;).  -
         Support <u>ab</u> and <u>ib</u> vi text objects. New input functions are  introduced  <b>jump-{to,till}-matching-bracket</b>
         (<u>#1842</u>  &lt;<b>https://github.com/fish-shell/fish-shell/issues/1842</b>&gt;).  - The <b>E</b> binding now correctly handles
         the last character of the word, by jumping to the next word (<u>#9700</u> &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/9700</b>&gt;).

   <b>Completions</b>
       • Command-specific tab completions may now offer results whose first character is a period. For  example,
         it is now possible to tab-complete <b>git</b> <b>add</b> for files with leading periods. The default file completions
         hide  these  files,  unless  the  token  itself  has  a leading period (<u>#3707</u> &lt;<b>https://github.com/fish-</b>
         <b>shell/fish-shell/issues/3707</b>&gt;).

       • Option completion  now  uses  fuzzy  subsequence  filtering,  just  like  non-option  completion  (<u>#830</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/830</b>&gt;).   This  means  that  <b>--fb</b>  may  be completed to
         <b>--foobar</b> if there is no better match.

       • Completions that insert an entire token now  use  quotes  instead  of  backslashes  to  escape  special
         characters (<u>#5433</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/5433</b>&gt;).

       • Normally,  file  name  completions  start  after the last <b>:</b>  or <b>=</b> in a token.  This helps commands like
         <b>rsync</b> <b>--files-from=</b>.  This special meaning can now disabled by escaping these separators as <b>\:</b> and  <b>\=</b>.
         This  matches  Bash's  behavior.  Note that this escaping is usually not necessary since the completion
         engine already tries to guess whether the separator is actually part of a file name.

       • Various new completion scripts and numerous updates to existing ones.

       • Completions could hang if the <b>PAGER</b> environment variable was sent to certain editors on macOS,  FreeBSD
         and   some   other   platforms.   This  has  been  fixed  (<u>#10820</u>  &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/10820</b>&gt;).

       • Generated completions are now stored  in  <b>$XDG_CACHE_HOME/fish</b>  or  <b><a href="file:~/.cache/fish">~/.cache/fish</a></b>  by  default  (<u>#10369</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/10369</b>&gt;)

       • A regression in fish 3.1, where completing a command line could change it completely, has been fixed (‐
         <u>#10904</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/10904</b>&gt;).

   <b>Improved</b> <b>terminal</b> <b>support</b>
       • fish now marks the prompt and command-output regions (via OSC 133) to enable terminal shell integration
         (<u>#10352</u>  &lt;<b>https://github.com/fish-shell/fish-shell/issues/10352</b>&gt;).   Shell  integration  shortcuts  can
         scroll to the next/previous prompt or show the last command output in a pager.

       • fish now reports the working directory (via OSC 7) unconditionally instead of only for  some  terminals
         (<u>#9955</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/9955</b>&gt;).

       • fish  now sets the terminal window title (via OSC 0) unconditionally instead of only for some terminals
         (<u>#10037</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/10037</b>&gt;).

       • Focus reporting in tmux is no longer disabled on the first prompt.

       • Focus   reporting   is   now   disabled   during   commands   run   inside    key    bindings    (<u>#6942</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/6942</b>&gt;).

       • Cursor  changes  are applied to all terminals that support them, and the list of specifically-supported
         terminals has been removed (<u>#10693</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/10693</b>&gt;).

       • If it cannot find the terminfo entry given by <u>TERM</u> environment variable, fish will now use an  included
         <b>xterm-256color</b>   definition   to  match  the  vast  majority  of  current  terminal  emulators  (<u>#10905</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/10905</b>&gt;). If you  need  to  have  a  specific  terminfo
         profile for your terminal's <b>TERM</b> variable, install it into the terminfo database.

       • Further  improvements  to  the  correct  display of prompts which fill the width of the terminal (<u>#8164</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/8164</b>&gt;).

   <b>Other</b> <b>improvements</b>
       • <b>status</b> gained a <b>buildinfo</b> subcommand, to print  information  on  how  fish  was  built,  to  help  with
         debugging (<u>#10896</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/10896</b>&gt;).

       • <b>fish_indent</b>  will  now  collapse  multiple  empty  lines  into  one  (<u>#10325</u>  &lt;<b>https://github.com/fish-</b>
         <b>shell/fish-shell/issues/10325</b>&gt;).

       • <b>fish_indent</b>  now  preserves  the  modification  time  of  files  if  there  were  no  changes   (<u>#10624</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/10624</b>&gt;).

       • Performance   in   launching   external   processes   has   been   improved   for  many  cases  (<u>#10869</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/10869</b>&gt;).

       • Performance and interactivity under Windows Subsystem for Linux has been improved,  with  a  workaround
         for  Windows-specific  locations  being  appended to <b>$PATH</b> by default (<u>#10506</u> &lt;<b>https://github.com/fish-</b>
         <b>shell/fish-shell/issues/10506</b>&gt;).

       • On macOS, paths from <b>/etc/paths</b> and <b>/etc/manpaths</b>  containing  colons  are  handled  correctly  (<u>#10684</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/10684</b>&gt;).

       • Additional  filesystems  such as AFS are properly detected as remote, which avoids certain hangs due to
         expensive filesystem locks (<u>#10818</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/10818</b>&gt;).

       • A spurious error when launching multiple instances of fish for the first time has been removed  (<u>#10813</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/10813</b>&gt;).

   <b>For</b> <b>distributors</b>
       fish  has  been  ported to Rust. This means a significant change in dependencies, which are listed in the
       README. In short, Rust 1.70 or greater is required, and a C++ compiler is no longer needed (although a  C
       compiler is still required, for some C glue code and the tests).

       CMake  remains  the  recommended  build system, because of cargo's limited support for installing support
       files. Version 3.5 remains the minimum supported version. The Xcode generator for CMake is not  supported
       any  longer  (<u>#9924</u>  &lt;<b>https://github.com/fish-shell/fish-shell/issues/9924</b>&gt;).  CMake  builds  default  to
       optimized release builds (<u>#10799</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/10799</b>&gt;).

       fish no longer depends on the ncurses library, but still uses a terminfo database. When  packaging  fish,
       please add a dependency on the package containing your terminfo database instead of curses.

       The  <b>test</b>  target  was  removed  as  it  can  no  longer  be  defined  in  new  CMake  versions. Use <b>make</b>
       <b>fish_run_tests</b>.  Any   existing   test   target   will   not   print   output   if   it   fails   (<u>#11116</u>
       &lt;<b>https://github.com/fish-shell/fish-shell/issues/11116</b>&gt;).

       The  Web-based  configuration  has  been  rewritten  to  use  Alpine.js  (<u>#9554</u> &lt;<b>https://github.com/fish-</b>
       <b>shell/fish-shell/issues/9554</b>&gt;).

                                                         ----

   <b>fish</b> <b>4.0b1</b> <b>(released</b> <b>December</b> <b>17,</b> <b>2024)</b>
       A number of improvements were included in fish 4.0.0 following the beta release of 4.0b1.  These  include
       fixes  for  regressions, improvements to completions and documentation, and the removal of a small number
       of problematic changes.

       The  full  list  of  fixed  issues  can  be  found  on  the   <u>GitHub</u>   <u>milestone</u>   <u>page</u>   <u>for</u>   <u>4.0-final</u>
       &lt;<b>https://github.com/fish-shell/fish-shell/milestone/43</b>&gt;.

                                                         ----

   <b>fish</b> <b>3.7.1</b> <b>(released</b> <b>March</b> <b>19,</b> <b>2024)</b>
       This release of fish fixes the following problems identified in fish 3.7.0:

       • Deleting  the  last  history  entry  via  <b>history</b>  <b>delete</b> works again (<u>#10190</u> &lt;<b>https://github.com/fish-</b>
         <b>shell/fish-shell/issues/10190</b>&gt;).

       • Wildcards  (<b>*</b>)   will   no   longer   sometimes   generate   paths   that   did   not   exist   (<u>#10205</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/10205</b>&gt;).

       This release also contains some improvements:

       • A  crash  when  trying to run an ELF program with a missing interpreter has been fixed. This crashed in
         the process after fork, so did not affect the fish process that tried  to  start  the  program  (<u>#10199</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/10199</b>&gt;).

       • <b>funced</b>  will  now  always <b>source</b> the file after it has written it, even if the contents did not change.
         This prevents issues if the file was otherwise  modified  (<u>#10318</u>  &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/10318</b>&gt;).

       • The  warning  for when a builtin returns a negative exit code was improved, now mentioning the original
         status (<u>#10187</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/10187</b>&gt;).

       • Added completions for

         • <b>cobra-cli</b> (<u>#10293</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/10293</b>&gt;)

         • <b>dmidecode</b> (<u>#10368</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/10368</b>&gt;)

         • <b>mycli</b> (<u>#10309</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/10309</b>&gt;)

         • <b>ollama</b> (<u>#10327</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/10327</b>&gt;)

         • <b>pstree</b> (<u>#10317</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/10317</b>&gt;)

       • Some improvements to documentation and completions.

                                                         ----

   <b>fish</b> <b>3.7.0</b> <b>(released</b> <b>January</b> <b>1,</b> <b>2024)</b>
       This release of fish includes a number of improvements over fish 3.6.4,  detailed  below.  Although  work
       continues on the porting of fish internals to the Rust programming language, that work is not included in
       this release. fish 3.7.0 and any future releases in the 3.7 series remain C++ programs.

   <b>Notable</b> <b>improvements</b> <b>and</b> <b>fixes</b>
       • Improvements to the history pager, including:

         • The  history  pager  will  now  also  attempt  subsequence  matches  (<u>#9476</u> &lt;<b>https://github.com/fish-</b>
           <b>shell/fish-shell/issues/9476</b>&gt;), so you can find a command line like <b>git</b> <b>log</b>  <b>3.6.1..Integration_3.7.0</b>
           by searching for <b>gitInt</b>.

         • Opening  the history pager will now fill the search field with a search string if you're already in a
           search (<u>#10005</u>  &lt;<b>https://github.com/fish-shell/fish-shell/issues/10005</b>&gt;).  This  makes  it  nicer  to
           search something with <b>up</b> and then later decide to switch to the full pager.

         • Closing the history pager with enter will now copy the search text to the commandline if there was no
           match,   so   you   can   continue   editing  the  command  you  tried  to  find  right  away  (<u>#9934</u>
           &lt;<b>https://github.com/fish-shell/fish-shell/issues/9934</b>&gt;).

       • Performance improvements for command completions and globbing, where supported by the operating system,
         especially   on   slow   filesystems   such   as   NFS   (<u>#9891</u>    &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/9891</b>&gt;,      <u>#9931</u>      &lt;<b>https://github.com/fish-shell/fish-shell/issues/9931</b>&gt;,      <u>#10032</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/10032</b>&gt;,  <u>#10052</u>   &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/10052</b>&gt;).

       • fish can now be configured to wait a specified amount of time for a multi-key sequence to be completed,
         instead  of  waiting  indefinitely.  For  example,  this makes binding <b>kj</b> to switching modes in vi mode
         possible.   The  timeout  can  be  set  via  the   new   <u>fish_sequence_key_delay_ms</u>   variable   (<u>#7401</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/7401</b>&gt;), and may be set by default in future versions.

   <b>Deprecations</b> <b>and</b> <b>removed</b> <b>features</b>
       • <b>LS_COLORS</b>  is  no  longer  set  automatically  by  the  <b>ls</b>  function  (<u>#10080</u> &lt;<b>https://github.com/fish-</b>
         <b>shell/fish-shell/issues/10080</b>&gt;). Users that set <b>.dircolors</b> should manually import it using other means.
         Typically this would be <b>set</b> <b>-gx</b> <b>LS_COLORS</b> <b>(dircolors</b> <b>-c</b> <b>.dircolors</b> <b>|</b> <b>string</b> <b>split</b> <b>'</b> <b>')[3]</b>

   <b>Scripting</b> <b>improvements</b>
       • Running <b>exit</b> with a negative number no longer crashes fish (<u>#9659</u>  &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/9659</b>&gt;).

       • <b>fish</b>  <b>--command</b>  will  now  return a non-zero status if parsing failed (<u>#9888</u> &lt;<b>https://github.com/fish-</b>
         <b>shell/fish-shell/issues/9888</b>&gt;).

       • The <b>jobs</b> builtin will now escape the commands  it  prints  (<u>#9808</u>  &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/9808</b>&gt;).

       • <b>string</b>   <b>repeat</b>   no   longer  overflows  if  the  count  is  a  multiple  of  the  chunk  size  (<u>#9900</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/9900</b>&gt;).

       • The <b>builtin</b> builtin will now properly error out with invalid arguments instead  of  doing  nothing  and
         returning true (<u>#9942</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/9942</b>&gt;).

       • <b>command</b>   <b>time</b>   in   a   pipeline  is  allowed  again,  as  is  <b>command</b>  <b>and</b>  and  <b>command</b>  <b>or</b>  (<u>#9985</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/9985</b>&gt;).

       • <b>exec</b> will now also apply variable overrides, so  <b>FOO=bar</b>  <b>exec</b>  will  now  set  <b>$FOO</b>  correctly  (<u>#9995</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/9995</b>&gt;).

       • <b>umask</b>   will   now   handle   empty   symbolic   modes   correctly,   like  <b>umask</b>  <b>u=,g=rwx,o=</b>  (<u>#10177</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/10177</b>&gt;).

       • Improved error messages for errors occurring in command substitutions (<u>#10054</u> &lt;<b>https://github.com/fish-</b>
         <b>shell/fish-shell/issues/10054</b>&gt;).

   <b>Interactive</b> <b>improvements</b>
       • <b>read</b> no longer enables bracketed paste so it doesn't stay enabled in combined commandlines  like  <b>mysql</b>
         <b>-p(read</b> <b>--silent)</b> (<u>#8285</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/8285</b>&gt;).

       • Vi  mode  now  uses  <b>fish_cursor_external</b>  to  set  the  cursor  shape  for  external  commands  (<u>#4656</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/4656</b>&gt;).

       • Opening   the   history   search   in   vi   mode   switches   to   insert   mode   correctly   (<u>#10141</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/10141</b>&gt;).

       • Vi   mode   cursor  shaping  is  now  enabled  in  iTerm2  (<u>#9698</u>  &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/9698</b>&gt;).

       • Completing commands as root includes commands not owned by root, fixing a regression introduced in fish
         3.2.0 (<u>#9699</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/9699</b>&gt;).

       • Selection uses <b>fish_color_selection</b> for the foreground and background colors, as intended, rather  than
         just the background (<u>#9717</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/9717</b>&gt;).

       • The  completion  pager  will no longer sometimes skip the last entry when moving through a long list (‐
         <u>#9833</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/9833</b>&gt;).

       • The interactive <b>history</b> <b>delete</b>  interface  now  allows  specifying  index  ranges  like  "1..5"  (<u>#9736</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/9736</b>&gt;),  and <b>history</b> <b>delete</b> <b>--exact</b> now properly saves
         the history (<u>#10066</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/10066</b>&gt;).

       • Command completion will now call the stock <b>manpath</b> on macOS, instead of a potential  Homebrew  version.
         This prevents awkward error messages (<u>#9817</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/9817</b>&gt;).

       • the <b>redo</b> special input function restores the pre-undo cursor position.

       • A  new  bind  function  <b>history-pager-delete</b>,  bound  to  <b>shift-delete</b>  by  default,  will  delete  the
         currently-selected  history  pager  item  from  history   (<u>#9454</u>   &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/9454</b>&gt;).

       • <b>fish_key_reader</b>  will now use printable characters as-is, so pressing "ö" no longer leads to it telling
         you to bind <b>\u00F6</b> (<u>#9986</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/9986</b>&gt;).

       • <b>open</b> can be used to launch terminal programs again, as an <b>xdg-open</b> bug has been fixed and a  workaround
         has been removed  (<u>#10045</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/10045</b>&gt;).

       • The  <b>repaint-mode</b>  binding  will now only move the cursor if there is repainting to be done. This fixes
         <b>alt</b> combination bindings in vi mode (<u>#7910</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/7910</b>&gt;).

       • A new <b>clear-screen</b> bind function is used for <b>ctrl-l</b> by default. This clears the screen and repaints the
         existing prompt at first, so it eliminates visible flicker unless the terminal  is  very  slow  (<u>#10044</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/10044</b>&gt;).

       • The  <b>alias</b>  convenience function has better support for commands with unusual characters, like <b>+</b> (<u>#8720</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/8720</b>&gt;).

       • A longstanding issue where items in the pager would sometimes display  without  proper  formatting  has
         been fixed (<u>#9617</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/9617</b>&gt;).

       • The <b>alt-l</b> binding, which lists the directory of the token under the cursor, correctly expands tilde (<b>~</b>)
         to the home directory (<u>#9954</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/9954</b>&gt;).

       • Various  fish  utilities  that  use  an external pager will now try a selection of common pagers if the
         <b>PAGER</b> environment variable is not set, or write the output to the screen without a pager  if  there  is
         not one available (<u>#10074</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/10074</b>&gt;).

       • Command-specific  tab completions may now offer results whose first character is a period. For example,
         it is now possible to tab-complete <b>git</b> <b>add</b> for files with leading periods. The default file completions
         hide these files, unless the  token  itself  has  a  leading  period  (<u>#3707</u>  &lt;<b>https://github.com/fish-</b>
         <b>shell/fish-shell/issues/3707</b>&gt;).

   <b>Improved</b> <b>prompts</b>
       • The  default  theme  now  only  uses  named  colors,  so  it  will  track the terminal's palette (<u>#9913</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/9913</b>&gt;).

       • The Dracula theme  has  now  been  synced  with  upstream  (<u>#9807</u>  &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/9807</b>&gt;); use <b>fish_config</b> to re-apply it to pick up the changes.

       • <b>fish_vcs_prompt</b>             now            also            supports            fossil            (<u>#9497</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/9497</b>&gt;).

       • Prompts which display the working directory using the <b>prompt_pwd</b> function correctly display directories
         beginning with dashes (<u>#10169</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/10169</b>&gt;).

   <b>Completions</b>
       • Added completions for:

         • <b>age</b> and <b>age-keygen</b> (<u>#9813</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/9813</b>&gt;)

         • <b>airmon-ng</b> (<u>#10116</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/10116</b>&gt;)

         • <b>ar</b> (<u>#9720</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/9720</b>&gt;)

         • <b>blender</b> (<u>#9905</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/9905</b>&gt;)

         • <b>bws</b> (<u>#10165</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/10165</b>&gt;)

         • <b>calendar</b> (<u>#10138</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/10138</b>&gt;)

         • <b>checkinstall</b> (<u>#10106</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/10106</b>&gt;)

         • <b>crc</b> (<u>#10034</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/10034</b>&gt;)

         • <b>doctl</b>

         • <b>gimp</b> (<u>#9904</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/9904</b>&gt;)

         • <b>gojq</b> (<u>#9740</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/9740</b>&gt;)

         • <b>horcrux</b> (<u>#9922</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/9922</b>&gt;)

         • <b>ibmcloud</b> (<u>#10004</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/10004</b>&gt;)

         • <b>iwctl</b> (<u>#6884</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/6884</b>&gt;)

         • <b>java_home</b> (<u>#9998</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/9998</b>&gt;)

         • <b>krita</b> (<u>#9903</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/9903</b>&gt;)

         • <b>oc</b> (<u>#10034</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/10034</b>&gt;)

         • <b>qjs</b> (<u>#9723</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/9723</b>&gt;)

         • <b>qjsc</b> (<u>#9731</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/9731</b>&gt;)

         • <b>rename</b> (<u>#10136</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/10136</b>&gt;)

         • <b>rpm-ostool</b> (<u>#9669</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/9669</b>&gt;)

         • <b>smerge</b> (<u>#10135</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/10135</b>&gt;)

         • <b>userdel</b> (<u>#10056</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/10056</b>&gt;)

         • <b>watchexec</b> (<u>#10027</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/10027</b>&gt;)

         • <b>wpctl</b> (<u>#10043</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/10043</b>&gt;)

         • <b>xxd</b> (<u>#10137</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/10137</b>&gt;)

         • <b>zabbix</b> (<u>#9647</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/9647</b>&gt;)

       • The  <b>zfs</b>  completions  no  longer  print   errors   about   setting   a   read-only   variable   (<u>#9705</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/9705</b>&gt;).

       • The   <b>kitty</b>   completions   have   been   removed   in   favor   of   keeping   them   upstream  (<u>#9750</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/9750</b>&gt;).

       • <b>git</b> completions now support aliases  that  reference  other  aliases  (<u>#9992</u>  &lt;<b>https://github.com/fish-</b>
         <b>shell/fish-shell/issues/9992</b>&gt;).

       • The  <b>gw</b>  and  <b>gradlew</b>  completions  are  loaded  properly  (<u>#10127</u> &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/10127</b>&gt;).

       • Improvements to many other completions.

       • Improvements to  the  manual  page  completion  generator  (<u>#9787</u>  &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/9787</b>&gt;,       <u>#9814</u>      &lt;<b>https://github.com/fish-shell/fish-shell/issues/9814</b>&gt;,      <u>#9961</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/9961</b>&gt;).

   <b>Other</b> <b>improvements</b>
       • Improvements and corrections to the documentation.

       • The Web-based configuration now uses a more readable style when  printed,  such  as  for  a  keybinding
         reference (<u>#9828</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/9828</b>&gt;).

       • Updates to the German translations (<u>#9824</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/9824</b>&gt;).

       • The  colors  of  the  Nord  theme  better  match their official style (<u>#10168</u> &lt;<b>https://github.com/fish-</b>
         <b>shell/fish-shell/issues/10168</b>&gt;).

   <b>For</b> <b>distributors</b>
       • The licensing information for some of the derived code distributed with fish was incomplete. Though the
         license information was present in the source distribution, it was not present  in  the  documentation.
         This has been corrected (<u>#10162</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/10162</b>&gt;).

       • The  CMake  configure  step  will now also look for libterminfo as an alternative name for libtinfo, as
         used in NetBSD curses (<u>#9794</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/9794</b>&gt;).

                                                         ----

   <b>fish</b> <b>3.6.4</b> <b>(released</b> <b>December</b> <b>5,</b> <b>2023)</b>
       This release contains a complete fix for the test suite failure in fish 3.6.2 and 3.6.3.

                                                         ----

   <b>fish</b> <b>3.6.3</b> <b>(released</b> <b>December</b> <b>4,</b> <b>2023)</b>
       This release contains a fix for a test suite failure in fish 3.6.2.

                                                         ----

   <b>fish</b> <b>3.6.2</b> <b>(released</b> <b>December</b> <b>4,</b> <b>2023)</b>
       This release of fish contains a security fix for CVE-2023-49284, a minor security problem  identified  in
       fish 3.6.1 and previous versions (thought to affect all released versions of fish).

       fish  uses certain Unicode non-characters internally for marking wildcards and expansions. It incorrectly
       allowed these markers to be read on command substitution output, rather than  transforming  them  into  a
       safe internal representation.

       For example, <b>echo</b> <b>\UFDD2HOME</b> has the same output as <b>echo</b> <b>$HOME</b>.

       While  this  may cause unexpected behavior with direct input, this may become a minor security problem if
       the output is being fed from an external program into a command substitution where this output may not be
       expected.

                                                         ----

   <b>fish</b> <b>3.6.1</b> <b>(released</b> <b>March</b> <b>25,</b> <b>2023)</b>
       This release of fish contains a number of fixes for problems identified in fish 3.6.1, as  well  as  some
       enhancements.

   <b>Notable</b> <b>improvements</b> <b>and</b> <b>fixes</b>
       • <b>abbr</b> <b>--erase</b> now also erases the universal variables used by the old abbr function. That means:

            abbr --erase (abbr --list)

         can  now  be  used  to  clean  out  all  old  abbreviations (<u>#9468</u> &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/9468</b>&gt;).

       • <b>abbr</b> <b>--add</b> <b>--universal</b> now warns about <b>--universal</b> being non-functional, to make it  easier  to  detect
         old-style <b>abbr</b> calls (<u>#9475</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/9475</b>&gt;).

   <b>Deprecations</b> <b>and</b> <b>removed</b> <b>features</b>
       • The  Web-based  configuration  for  abbreviations  has  been removed, as it was not functional with the
         changes            abbreviations            introduced            in            3.6.0            (<u>#9460</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/9460</b>&gt;).

   <b>Scripting</b> <b>improvements</b>
       • <b>abbr</b>  <b>--list</b>  no longer escapes the abbr name, which is necessary to be able to pass it to <b>abbr</b> <b>--erase</b>
         (<u>#9470</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/9470</b>&gt;).

       • <b>read</b> will now print an error if told to set a read-only variable, instead of silently doing nothing  (‐
         <u>#9346</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/9346</b>&gt;).

       • <b>set_color</b> <b>-v</b> no longer crashes fish (<u>#9640</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/9640</b>&gt;).

   <b>Interactive</b> <b>improvements</b>
       • Using  <b>fish_vi_key_bindings</b>  in  combination  with fish's <b>--no-config</b> mode works without locking up the
         shell (<u>#9443</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/9443</b>&gt;).

       • The history pager now uses more screen space, usually half the screen (<u>#9458</u>  &lt;<b>https://github.com/fish-</b>
         <b>shell/fish-shell/issues/9458</b>&gt;)

       • Variables  that  were  set  while the locale was C (the default ASCII-only locale) will now properly be
         encoded if the locale is switched (<u>#2613</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/2613</b>&gt;,  <u>#9473</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/9473</b>&gt;).

       • Escape during history search restores the original command line again (fixing a regression in 3.6.0).

       • Using  <b>--help</b>  on  builtins  now  respects  the  <b>$MANPAGER</b>  variable,  in  preference  to <b>$PAGER</b> (<u>#9488</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/9488</b>&gt;).

       • <b>ctrl-g</b>  closes  the  history  pager,  like  other  shells  (<u>#9484</u>  &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/9484</b>&gt;).

       • The  documentation  for  the  <b>:</b>,  <b>[</b>  and  <b>.</b>  builtin  commands  can  now  be  looked up with <b>man</b> (<u>#9552</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/9552</b>&gt;).

       • fish no longer crashes when  searching  history  for  non-ASCII  codepoints  case-insensitively  (<u>#9628</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/9628</b>&gt;).

       • The  <b>alt-s</b>  binding  will  now also use <b>please</b> if available (<u>#9635</u> &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/9635</b>&gt;).

       • Themes that don't specify every color option can be installed correctly in the Web-based  configuration
         (<u>#9590</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/9590</b>&gt;).

       • Compatibility    with    Midnight   Commander's   prompt   integration   has   been   improved   (<u>#9540</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/9540</b>&gt;).

       • A spurious error, noted when using fish in Google Drive directories under WSL 2, has been  silenced  (‐
         <u>#9550</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/9550</b>&gt;).

       • Using   <b>read</b>  in  <b>fish_greeting</b>  or  similar  functions  will  not  trigger  an  infinite  loop  (<u>#9564</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/9564</b>&gt;).

       • Compatibility when upgrading from old  versions  of  fish  (before  3.4.0)  has  been  improved  (<u>#9569</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/9569</b>&gt;).

   <b>Improved</b> <b>prompts</b>
       • The  git  prompt will compute the stash count to be used independently of the informative status (<u>#9572</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/9572</b>&gt;).

   <b>Completions</b>
       • Added completions for:

         • <b>apkanalyzer</b> (<u>#9558</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/9558</b>&gt;)

         • <b>neovim</b> (<u>#9543</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/9543</b>&gt;)

         • <b>otool</b>

         • <b>pre-commit</b> (<u>#9521</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/9521</b>&gt;)

         • <b>proxychains</b> (<u>#9486</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/9486</b>&gt;)

         • <b>scrypt</b> (<u>#9583</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/9583</b>&gt;)

         • <b>stow</b> (<u>#9571</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/9571</b>&gt;)

         • <b>trash</b>   and   helper   utilities   <b>trash-empty</b>,   <b>trash-list</b>,   <b>trash-put</b>,    <b>trash-restore</b>    (<u>#9560</u>
           &lt;<b>https://github.com/fish-shell/fish-shell/issues/9560</b>&gt;)

         • <b>ssh-copy-id</b> (<u>#9675</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/9675</b>&gt;)

       • Improvements  to  many  completions,  including  the  speed  of  completing directories in WSL 2 (<u>#9574</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/9574</b>&gt;).

       • Completions using <b>__fish_complete_suffix</b> are now offered in the correct order, fixing a  regression  in
         3.6.0 (<u>#8924</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/8924</b>&gt;).

       • <b>git</b>  completions  for  <b>git-foo</b>-style  commands  was  restored,  fixing  a  regression  in  3.6.0 (<u>#9457</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/9457</b>&gt;).

       • File  completion  now  offers   <b>../</b>   and   <b>./</b>   again,   fixing   a   regression   in   3.6.0   (<u>#9477</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/9477</b>&gt;).

       • The  behaviour  of  completions  using  <b>__fish_complete_path</b>  matches  standard path completions (<u>#9285</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/9285</b>&gt;).

   <b>Other</b> <b>improvements</b>
       • Improvements and corrections to the documentation.

   <b>For</b> <b>distributors</b>
       • fish 3.6.1 builds correctly on Cygwin (<u>#9502</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/9502</b>&gt;).

                                                         ----

   <b>fish</b> <b>3.6.0</b> <b>(released</b> <b>January</b> <b>7,</b> <b>2023)</b>
   <b>Notable</b> <b>improvements</b> <b>and</b> <b>fixes</b>
       • By default, <b>ctrl-r</b>  now  opens  the  command  history  in  the  pager  (<u>#602</u>  &lt;<b>https://github.com/fish-</b>
         <b>shell/fish-shell/issues/602</b>&gt;).  This  is  fully searchable and syntax-highlighted, as an alternative to
         the incremental search seen in other shells. The new special  input  function  <b>history-pager</b>  has  been
         added for custom bindings.

       • Abbrevations  are  more  flexible  (<u>#9313</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/9313</b>&gt;, <u>#5003</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/5003</b>&gt;,   <u>#2287</u>    &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/2287</b>&gt;):

         • They may optionally replace tokens anywhere on the command line, instead of only commands

         • Matching tokens may be described using a regular expression instead of a literal word

         • The replacement text may be produced by a fish function, instead of a literal word

         • They may position the cursor anywhere in the expansion, instead of at the end

         For example:

            function multicd
                echo cd (string repeat -n (math (string length -- $argv[1]) - 1) ../)
            end

            abbr --add dotdot --regex '^\.\.+$' --function multicd

         This expands <b>..</b> to <b>cd</b> <b>../</b>, <b>...</b> to <b>cd</b> <b>..<a href="file:/../">/../</a></b> and <b>....</b> to <b>cd</b> <b>..<a href="file:/../../">/../../</a></b> and so on.

         Or:

            function last_history_item; echo $history[1]; end
            abbr -a !! --position anywhere --function last_history_item

         which  expands  <b>!!</b>  to  the  last  history  item, anywhere on the command line, mimicking other shells'
         history expansion.

         See <u>the</u> <u>documentation</u> for more.

       • <b>path</b> gained a new <b>mtime</b> subcommand to print the modification time stamp for files.  For  example,  this
         can be used to handle cache file ages (<u>#9057</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/9057</b>&gt;):

            &gt; touch foo
            &gt; sleep 10
            &gt; path mtime --relative foo
            10

       • <b>string</b>  gained  a  new  <b>shorten</b>  subcommand  to  shorten  strings  to  a  given  visible  width  (<u>#9156</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/9156</b>&gt;):

            &gt; string shorten --max 10 "Hello this is a long string"
            Hello thi…

       • <b>test</b> (aka <b>[</b>) gained <b>-ot</b> (older than) and <b>-nt</b> (newer than) operators to compare file modification times,
         and <b>-ef</b> to compare whether the arguments are the same file (<u>#3589</u>  &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/3589</b>&gt;).

       • fish  will  now mark the extent of many errors with a squiggly line, instead of just a caret (<b>^</b>) at the
         beginning (<u>#9130</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/9130</b>&gt;). For example:

            checks/set.fish (line 471): for: a,b: invalid variable name. See `help identifiers`
            for a,b in y 1 z 3
                ^~^

       • A new function, <b>fish_delta</b>, shows changes that have been made in fish's configuration from the defaults
         (<u>#9255</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/9255</b>&gt;).

       • <b>set</b>  <b>--erase</b>  can  now  be  used  with  multiple  scopes  at  once,  like   <b>set</b>   <b>-efglU</b>   <b>foo</b>   (<u>#7711</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/7711</b>&gt;,    <u>#9280</u>   &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/9280</b>&gt;).

       • <b>status</b>  gained  a  new  subcommand,  <b>current-commandline</b>,  which  retrieves   the   entirety   of   the
         currently-executing  command  line when called from a function during execution. This allows easier job
         introspection        (<u>#8905</u>        &lt;<b>https://github.com/fish-shell/fish-shell/issues/8905</b>&gt;,        <u>#9296</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/9296</b>&gt;).

   <b>Deprecations</b> <b>and</b> <b>removed</b> <b>features</b>
       • The <b>\x</b> and <b>\X</b> escape syntax is now equivalent. <b>\xAB</b> previously behaved the same as <b>\XAB</b>, except that it
         would  error  if  the  value "AB" was larger than "7f" (127 in decimal, the highest ASCII value) (<u>#9247</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/9247</b>&gt;,   <u>#9245</u>    &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/9245</b>&gt;, <u>#1352</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/1352</b>&gt;).

       • The  <b>fish_git_prompt</b>  will now only turn on features if the appropriate variable has been set to a true
         value (of "1", "yes" or "true") instead of just checking if it is  defined.  This  allows  specifically
         turning  features  <u>off</u>  without having to erase variables, such as via universal variables. If you have
         defined a variable to a different value and expect it to count as true, you need to  change  it  (<u>#9274</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/9274</b>&gt;).         For        example,       <b>set</b>       <b>-g</b>
         <b>__fish_git_prompt_show_informative_status</b> <b>0</b> previously would have enabled informative  status  (because
         any value would have done so), but now it turns it off.

       • Abbreviations  are  no longer stored in universal variables. Existing universal abbreviations are still
         imported, but new abbreviations should be added to <b>config.fish</b>.

       • The short option <b>-r</b> for abbreviations has changed from <b>rename</b> to <b>regex</b>, for consistency with <b>string</b>.

   <b>Scripting</b> <b>improvements</b>
       • <b>argparse</b> can now be used without option specifications, to allow using <b>--min-args</b>,  <b>--max-args</b>  or  for
         commands  that  take  no  options  (but  might  in  future) (<u>#9006</u> &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/9006</b>&gt;):

            function my_copy
                argparse --min-args 2 -- $argv
                or return

                cp $argv
            end

       • <b>set</b> <b>--show</b> now shows when a variable was inherited from fish's parent process, which should  help  with
         debugging (<u>#9029</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/9029</b>&gt;):

            &gt; set --show XDG_DATA_DIRS
            $XDG_DATA_DIRS: set in global scope, exported, a path variable with 4 elements
            $XDG_DATA_DIRS[1]: |/home/alfa/.local/share/flatpak/exports/share|
            $XDG_DATA_DIRS[2]: |/var/lib/flatpak/exports/share|
            $XDG_DATA_DIRS[3]: |<a href="file:/usr/local/share">/usr/local/share</a>|
            $XDG_DATA_DIRS[4]: |<a href="file:/usr/share">/usr/share</a>|
            $XDG_DATA_DIRS: originally inherited as |/home/alfa/.local/share/flatpak/exports/share:/var/lib/flatpak/exports/share:<a href="file:/usr/local/share/">/usr/local/share/</a>:<a href="file:/usr/share/">/usr/share/</a>|

       • The   read   limit   is   now   restored   to   the   default  when  <u>fish_read_limit</u>  is  unset  (<u>#9129</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/9129</b>&gt;).

       • <b>math</b> produces an error for division-by-zero, as well as augmenting some errors with their extent (<u>#9190</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/9190</b>&gt;). This changes behavior in some  limited  cases,
         such as:

            math min 1 / 0, 5

         which  would previously print "5" (because in floating point division "1 / 0" yields infinite, and 5 is
         smaller than infinite) but will now return an error.

       • <b>fish_clipboard_copy</b> and <b>fish_clipboard_paste</b> can now be used in pipes (<u>#9271</u>  &lt;<b>https://github.com/fish-</b>
         <b>shell/fish-shell/issues/9271</b>&gt;):

            git rev-list 3.5.1 | fish_clipboard_copy

            fish_clipboard_paste | string join + | math

       • <b>status</b>   <b>fish-path</b>   returns   a  fully-normalised  path,  particularly  noticeable  on  NetBSD  (<u>#9085</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/9085</b>&gt;).

   <b>Interactive</b> <b>improvements</b>
       • If the terminal definition for <u>TERM</u> can't be found, fish  now  tries  using  the  "xterm-256color"  and
         "xterm"  definitions  before "ansi" and "dumb". As the majority of terminal emulators in common use are
         now more or less xterm-compatible (often even  explicitly  claiming  the  xterm-256color  entry),  this
         should  often  result  in  a  fully  or  almost  fully usable terminal (<u>#9026</u> &lt;<b>https://github.com/fish-</b>
         <b>shell/fish-shell/issues/9026</b>&gt;).

       • A new variable, <u>fish_cursor_selection_mode</u>, can be used to configure whether the command line selection
         includes the character under the cursor (<b>inclusive</b>) or not (<b>exclusive</b>). The new default  is  <b>exclusive</b>;
         use   <b>set</b>   <b>fish_cursor_selection_mode</b>   <b>inclusive</b>   to   get   the   previous   behavior  back  (<u>#7762</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/7762</b>&gt;).

       • fish's completion pager now fills half the terminal on first tab press instead of only  4  rows,  which
         should  make  results  visible more often and save key presses, without constantly snapping fish to the
         top   of   the   terminal    (<u>#9105</u>    &lt;<b>https://github.com/fish-shell/fish-shell/issues/9105</b>&gt;,    <u>#2698</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/2698</b>&gt;).

       • The  <b>complete-and-search</b> binding, used with <b>shift-tab</b> by default, selects the first item in the results
         immediately (<u>#9080</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/9080</b>&gt;).

       • <b>bind</b> output is now syntax-highlighted when used interacively.

       • <b>alt-h</b> (the default <b>__fish_man_page</b> binding) does a better job of showing the manual page of the command
         under cursor (<u>#9020</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/9020</b>&gt;).

       • If <u>fish_color_valid_path</u> contains an actual color instead of just modifiers, those  will  be  used  for
         valid  paths  even  if  the underlying color isn't "normal" (<u>#9159</u> &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/9159</b>&gt;).

       • The key combination for the QUIT terminal sequence, often <b>ctrl-\</b> (<b>\x1c</b>), can now be used as  a  binding
         (<u>#9234</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/9234</b>&gt;).

       • fish's  vi mode uses normal xterm-style sequences to signal cursor change, instead of using the iTerm's
         proprietary escape sequences. This allows for a blinking  cursor  and  makes  it  work  in  complicated
         scenarios  with  nested terminals. (<u>#3741</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/3741</b>&gt;, <u>#9172</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/9172</b>&gt;)

       • When running fish on a remote system (such as inside SSH or a container),  <b>ctrl-x</b>  now  copies  to  the
         local client system's clipboard if the terminal supports OSC 52.

       • <b>commandline</b>  gained two new options, <b>--selection-start</b> and <b>--selection-end</b>, to set the start/end of the
         current     selection     (<u>#9197</u>     &lt;<b>https://github.com/fish-shell/fish-shell/issues/9197</b>&gt;,      <u>#9215</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/9215</b>&gt;).

       • fish's  builtins  now  handle  keyboard  interrupts (<b>ctrl-c</b>) correctly (<u>#9266</u> &lt;<b>https://github.com/fish-</b>
         <b>shell/fish-shell/issues/9266</b>&gt;).

   <b>Completions</b>
       • Added completions for:

         • <b>ark</b>

         • <b>asciinema</b> (<u>#9257</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/9257</b>&gt;)

         • <b>clojure</b> (<u>#9272</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/9272</b>&gt;)

         • <b>csh</b>

         • <b>direnv</b> (<u>#9268</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/9268</b>&gt;)

         • <b>dive</b> (<u>#9082</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/9082</b>&gt;)

         • <b>dolphin</b>

         • <b>dua</b> (<u>#9277</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/9277</b>&gt;)

         • <b>efivar</b> (<u>#9318</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/9318</b>&gt;)

         • <b>eg</b>

         • <b>es</b> (<u>#9388</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/9388</b>&gt;)

         • <b>firefox-developer-edition</b> and <b>firefox</b> (<u>#9090</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/9090</b>&gt;)

         • <b>fortune</b> (<u>#9177</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/9177</b>&gt;)

         • <b>kb</b>

         • <b>kind</b> (<u>#9110</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/9110</b>&gt;)

         • <b>konsole</b>

         • <b>ksh</b>

         • <b>loadkeys</b> (<u>#9312</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/9312</b>&gt;)

         • <b>okular</b>

         • <b>op</b> (<u>#9300</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/9300</b>&gt;)

         • <b>ouch</b> (<u>#9405</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/9405</b>&gt;)

         • <b>pix</b>

         • <b>readelf</b>         (<u>#8746</u>         &lt;<b>https://github.com/fish-shell/fish-shell/issues/8746</b>&gt;,          <u>#9386</u>
           &lt;<b>https://github.com/fish-shell/fish-shell/issues/9386</b>&gt;)

         • <b>qshell</b>

         • <b>rc</b>

         • <b>sad</b> (<u>#9145</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/9145</b>&gt;)

         • <b>tcsh</b>

         • <b>toot</b>

         • <b>tox</b> (<u>#9078</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/9078</b>&gt;)

         • <b>wish</b>

         • <b>xed</b>

         • <b>xonsh</b> (<u>#9389</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/9389</b>&gt;)

         • <b>xplayer</b>

         • <b>xreader</b>

         • <b>xviewer</b>

         • <b>yash</b> (<u>#9391</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/9391</b>&gt;)

         • <b>zig</b> (<u>#9083</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/9083</b>&gt;)

       • Improvements   to   many   completions,   including   making   <b>cd</b>   completion   much   faster   (<u>#9220</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/9220</b>&gt;).

       • Completion of tilde (<b>~</b>) works properly even when the file name contains  an  escaped  character  (<u>#9073</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/9073</b>&gt;).

       • fish  no  longer loads completions if the command is used via a relative path and is not in <u>PATH</u> (<u>#9133</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/9133</b>&gt;).

       • fish   no   longer   completes   inside   of   comments   (<u>#9320</u>   &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/9320</b>&gt;).

   <b>Improved</b> <b>terminal</b> <b>support</b>
       • Opening  <b>help</b>  on  WSL  now uses PowerShell to open the browser if available, removing some awkward UNC
         path errors (<u>#9119</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/9119</b>&gt;).

   <b>Other</b> <b>improvements</b>
       • The   Web-based   configuration   tool   now   works   on   systems   with   IPv6    disabled    (<u>#3857</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/3857</b>&gt;).

       • Aliases  can  ignore  arguments  by  ending  them  with  <b>#</b>  (<u>#9199</u> &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/9199</b>&gt;).

       • <b>string</b> is now faster when reading large strings from stdin (<u>#9139</u>  &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/9139</b>&gt;).

       • <b>string</b>   <b>repeat</b>   uses   less   memory   and  is  faster.  (<u>#9124</u>  &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/9124</b>&gt;)

       • Builtins are much faster when writing to a pipe or  file.  (<u>#9229</u>  &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/9229</b>&gt;).

       • Performance improvements to highlighting (<u>#9180</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/9180</b>&gt;)
         should make using fish more pleasant on slow systems.

       • On  32-bit  systems,  globs  like <b>*</b> will no longer fail to return some files, as large file support has
         been enabled.

   <b>Fixed</b> <b>bugs</b>
       • The history search text for a token search is now highlighted correctly if the line  contains  multiple
         instances of that text (<u>#9066</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/9066</b>&gt;).

       • <b>process-exit</b>  and  <b>job-exit</b>  events are now generated for all background jobs, including those launched
         from event handlers (<u>#9096</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/9096</b>&gt;).

       • A crash when completing a token that contained both a potential glob and a  quoted  variable  expansion
         was fixed (<u>#9137</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/9137</b>&gt;).

       • <b>prompt_pwd</b>  no  longer  accidentally  overwrites  a global or universal <b>$fish_prompt_pwd_full_dirs</b> when
         called  with  the  <b>-d</b>  or   <b>--full-length-dirs</b>   option   (<u>#9123</u>   &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/9123</b>&gt;).

       • A  bug  which  caused  fish  to  freeze  or  exit  after  running a command which does not preserve the
         foreground process group was fixed (<u>#9181</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/9181</b>&gt;).

       • The  "Disco"  sample  prompt  no  longer  prints  an  error  in   some   working   directories   (<u>#9164</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/9164</b>&gt;).  If  you  saved  this  prompt,  you should run
         <b>fish_config</b> <b>prompt</b> <b>save</b> <b>disco</b> again.

       • fish launches external commands via the given path again, rather than always using  an  absolute  path.
         This  behaviour  was  inadvertently changed in 3.5.0 and is visible, for example, when launching a bash
         script which checks <b>$0</b> (<u>#9143</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/9143</b>&gt;).

       • <b>printf</b> no longer tries to interpret the first argument as an  option  (<u>#9132</u>  &lt;<b>https://github.com/fish-</b>
         <b>shell/fish-shell/issues/9132</b>&gt;).

       • Interactive    <b>read</b>    in    scripts   will   now   have   the   correct   keybindings   again   (<u>#9227</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/9227</b>&gt;).

       • A  possible  stack  overflow  when  recursively  evaluating  substitutions  has   been   fixed   (<u>#9302</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/9302</b>&gt;).

       • A   crash   with   relative   $CDPATH   has   been  fixed  (<u>#9407</u>  &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/9407</b>&gt;).

       • <b>printf</b>  now  properly  fills  extra  <b>%d</b>  specifiers   with   0   even   on   macOS   and   BSD   (<u>#9321</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/9321</b>&gt;).

       • <b>fish_key_reader</b>  now  correctly  exits when receiving a SIGHUP (like after closing the terminal) (<u>#9309</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/9309</b>&gt;).

       • <b>fish_config</b> <b>theme</b> <b>save</b> now works as documented instead of erroring out (<u>#9088</u> &lt;<b>https://github.com/fish-</b>
         <b>shell/fish-shell/issues/9088</b>&gt;, <u>#9273</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/9273</b>&gt;).

       • fish no longer triggers prompts  to  install  command  line  tools  when  first  run  on  macOS  (<u>#9343</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/9343</b>&gt;).

       • <b>fish_git_prompt</b>  now  quietly  fails  on  macOS  if  the  xcrun  cache  is  not  yet  populated  (<u>#6625</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/6625</b>&gt;), working around a potential hang.

   <b>For</b> <b>distributors</b>
       • The vendored PCRE2 sources have been removed. It is recommended to declare PCRE2 as a  dependency  when
         packaging  fish. If the CMake variable FISH_USE_SYSTEM_PCRE2 is false, fish will now download and build
         PCRE2 from  the  official  repo  (<u>#8355</u>  &lt;<b>https://github.com/fish-shell/fish-shell/issues/8355</b>&gt;,  <u>#8363</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/8363</b>&gt;).  Note  this variable defaults to true if PCRE2
         is found installed on the system.

                                                         ----

   <b>fish</b> <b>3.5.1</b> <b>(released</b> <b>July</b> <b>20,</b> <b>2022)</b>
       This release of fish introduces the following small enhancements:

       • Cursor shaping for Vi mode is enabled by default in tmux, and will be used if  the  outer  terminal  is
         capable (<u>#8981</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/8981</b>&gt;).

       • <b>printf</b>  returns  a  better  error  when  used  with  arguments  interpreted  as  octal  numbers  (<u>#9035</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/9035</b>&gt;).

       • <b>history</b> <b>merge</b> when in private mode is now an error, rather than wiping out other sessions'  history  (‐
         <u>#9050</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/9050</b>&gt;).

       • The  error  message  when launching a command that is built for the wrong architecture on macOS is more
         helpful (<u>#9052</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/9052</b>&gt;).

       • Added completions for:

         • <b>choose</b> (<u>#9065</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/9065</b>&gt;)

         • <b>expect</b> (<u>#9060</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/9060</b>&gt;)

         • <b>navi</b> (<u>#9064</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/9064</b>&gt;)

         • <b>qdbus</b> (<u>#9031</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/9031</b>&gt;)

         • <b>reflector</b> (<u>#9027</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/9027</b>&gt;)

       • Improvements to some completions.

       This release also fixes a number of problems identified in fish 3.5.0.

       • Completing  <b>git</b>  <b>blame</b>  or  <b>git</b>  <b>-C</b>   works   correctly   (<u>#9053</u>   &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/9053</b>&gt;).

       • On  terminals  that  emit a <b>CSI</b> <b>u</b> sequence for <b>shift-space</b>, fish inserts a space instead of printing an
         error. (<u>#9054</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/9054</b>&gt;).

       • <b>status</b> <b>fish-path</b> on Linux-based platforms could print the path with a  "  (deleted)"  suffix  (such  as
         <b>/usr/bin/fish</b>   <b>(deleted)</b>),   which   is   now   removed   (<u>#9019</u>  &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/9019</b>&gt;).

       • Cancelling an initial command (from fish's  <b>--init-command</b>  option)  with  <b>ctrl-c</b>  no  longer  prevents
         configuration scripts from running (<u>#9024</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/9024</b>&gt;).

       • The  job  summary  contained extra blank lines if the prompt used multiple lines, which is now fixed (‐
         <u>#9044</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/9044</b>&gt;).

       • Using special input functions in bindings, in combination with <b>and</b>/<b>or</b> conditionals, no  longer  crashes
         (<u>#9051</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/9051</b>&gt;).

                                                         ----

   <b>fish</b> <b>3.5.0</b> <b>(released</b> <b>June</b> <b>16,</b> <b>2022)</b>
   <b>Notable</b> <b>improvements</b> <b>and</b> <b>fixes</b>
       • A  new  <b>path</b>  builtin command to filter and transform paths (<u>#7659</u> &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/7659</b>&gt;, <u>#8958</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/8958</b>&gt;). For example, to list
         all the separate extensions used on files in <a href="file:/usr/share/man">/usr/share/man</a> (after removing one extension,  commonly  a
         ".gz"):

            path filter -f <a href="file:/usr/share/man/">/usr/share/man/</a>** | path change-extension '' | path extension | path sort -u

       • Tab (or any key bound to <b>complete</b>) now expands wildcards instead of invoking completions, if there is a
         wildcard   in   the   path   component  under  the  cursor  (<u>#954</u>  &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/954</b>&gt;, <u>#8593</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/8593</b>&gt;).

       • Scripts can now catch and handle the SIGINT and SIGTERM signals, either  via  <b>function</b>  <b>--on-signal</b>  or
         with <b>trap</b> (<u>#6649</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/6649</b>&gt;).

   <b>Deprecations</b> <b>and</b> <b>removed</b> <b>features</b>
       • The  <b>stderr-nocaret</b>  feature  flag, introduced in fish 3.0 and enabled by default in fish 3.1, has been
         made read-only.  That means it is no  longer  possible  to  disable  it,  and  code  supporting  the  <b>^</b>
         redirection  has  been  removed  (<u>#8857</u>  &lt;<b>https://github.com/fish-shell/fish-shell/issues/8857</b>&gt;,  <u>#8865</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/8865</b>&gt;).

         To recap: fish used to support <b>^</b> to redirect stderr, so you could use commands like:

            test "$foo" -gt 8 ^/dev/null

         to ignore error messages. This made the <b>^</b> symbol require escaping and quoting, and was a bit of a weird
         shortcut considering <b>2&gt;</b> already worked, which is only one character longer.

         So the above can simply become:

            test "$foo" -gt 8 2&gt;/dev/null

       • The following feature flags have been enabled by default:

         • <b>regex-easyesc</b>, which makes <b>string</b> <b>replace</b> <b>-r</b>  not  do  a  superfluous  round  of  unescaping  in  the
           replacement  expression.   That means e.g. to escape any "a" or "b" in an argument you can use <b>string</b>
           <b>replace</b> <b>-ra</b> <b>'([ab])'</b> <b>'\\\\$1'</b> <b>foobar</b> instead of needing 8 backslashes.

           This only affects the <u>replacement</u> expression, not the <u>match</u> expression  (the  <b>'([ab])'</b>  part  in  the
           example).   A survey of plugins on GitHub did not turn up any affected code, so we do not expect this
           to affect many users.

           This flag was introduced in fish 3.1.

         • <b>ampersand-nobg-in-token</b>, which means that <b>&amp;</b> will not create a background job  if  it  occurs  in  the
           middle  of  a word. For example, <b>echo</b> <b>foo&amp;bar</b> will print "foo&amp;bar" instead of running <b>echo</b> <b>foo</b> in the
           background and then starting <b>bar</b> as a second job.

           Reformatting with <b>fish_indent</b> would already introduce spaces, turning <b>echo</b> <b>foo&amp;bar</b> into  <b>echo</b>  <b>foo</b>  <b>&amp;</b>
           <b>bar</b>.

           This flag was introduced in fish 3.4.

         To  turn  off  these  flags,  add  <b>no-regex-easyesc</b>  or <b>no-ampersand-nobg-in-token</b> to <b>fish_features</b> and
         restart fish:

            set -Ua fish_features no-regex-easyesc

         Like <b>stderr-nocaret</b>, they will eventually be made read-only.

       • Most <b>string</b> subcommands no longer append a newline to their input if the input didn't have  one  (<u>#8473</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/8473</b>&gt;,    <u>#3847</u>   &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/3847</b>&gt;)

       • Fish's escape sequence removal (like for <b>string</b> <b>length</b> <b>--visible</b> or to figure out how wide  the  prompt
         is)  no  longer  has special support for non-standard color sequences like from Data General terminals,
         e.g. the Data General Dasher D220 from 1984. This removes a bunch of work in the common case,  allowing
         <b>string</b> <b>length</b> <b>--visible</b> to be much faster with unknown escape sequences. We don't expect anyone to have
         ever used fish with such a terminal (<u>#8769</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/8769</b>&gt;).

       • Code  to  upgrade universal variables from fish before 3.0 has been removed. Users who upgrade directly
         from fish versions 2.7.1 or before will have to set their universal variables &amp; abbreviations again. (‐
         <u>#8781</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/8781</b>&gt;)

       • The meaning  of  an  empty  color  variable  has  changed  (<u>#8793</u>  &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/8793</b>&gt;).  Previously,  when  a  variable  was set but empty, it would be interpreted as the
         "normal" color. Now, empty color variables cause the same effect  as  unset  variables  -  the  general
         highlighting variable for that type is used instead. For example:

            set -g fish_color_command blue
            set -g fish_color_keyword

         would  previously  make keywords "normal" (usually white in a dark terminal). Now it'll make them blue.
         To achieve the previous behavior, use the normal color explicitly: <b>set</b> <b>-g</b> <b>fish_color_keyword</b> <b>normal</b>.

         This makes it easier to make self-contained color schemes that don't accidentally use  color  that  was
         set before.  <b>fish_config</b> has been adjusted to set known color variables that a theme doesn't explicitly
         set to empty.

       • <b>eval</b>  is now a reserved keyword, so it can't be used as a function name. This follows <b>set</b> and <b>read</b>, and
         is necessary because it can't be cleanly shadowed by a function - at the very least <b>eval</b>  <b>set</b>  <b>-l</b>  <b>argv</b>
         <b>foo</b>  breaks. Fish will ignore autoload files for it, so left over <b>eval.fish</b> from previous fish versions
         won't be loaded.

       • The git prompt in informative mode now defaults to skipping  counting  untracked  files,  as  this  was
         extremely  slow.  To  turn  it on, set <b>__fish_git_prompt_showuntrackedfiles</b> or set the git config value
         "bash.showuntrackedfiles" to <b>true</b> explicitly (which can  be  done  for  individual  repositories).  The
         "informative+vcs"  sample  prompt already skipped display of untracked files, but didn't do so in a way
         that  skipped  the  computation,  so  it  should  be  quite  a  bit  faster  in   many   cases   (<u>#8980</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/8980</b>&gt;).

       • The  <b>__terlar_git_prompt</b>  function,  used  by  the  "Terlar"  sample  prompt,  has  been  rebuilt  as a
         configuration of the normal <b>fish_git_prompt</b> to ease maintenance, improve performance and  add  features
         (like  reading  per-repo git configuration). Some slight changes remain; users who absolutely must have
         the same behavior are encouraged to copy the old function  (<u>#9011</u>  &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/9011</b>&gt;,       <u>#7918</u>      &lt;<b>https://github.com/fish-shell/fish-shell/issues/7918</b>&gt;,      <u>#8979</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/8979</b>&gt;).

   <b>Scripting</b> <b>improvements</b>
       • Quoted command substitution that directly follow a variable expansion (like <b>echo</b>  <b>"$var$(echo</b>  <b>x)"</b>)  no
         longer affect the variable expansion (<u>#8849</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/8849</b>&gt;).

       • Fish  now  correctly  expands  command  substitutions that are preceded by an escaped dollar (like <b>echo</b>
         <b>\$(echo)</b>). This regressed in version 3.4.0.

       • <b>math</b> can now handle underscores (<b>_</b>) as visual separators in  numbers  (<u>#8611</u>  &lt;<b>https://github.com/fish-</b>
         <b>shell/fish-shell/issues/8611</b>&gt;, <u>#8496</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/8496</b>&gt;):

            math 5 + 2_123_252

       • <b>math</b>'s  <b>min</b>  and <b>max</b> functions now take a variable number of arguments instead of always requiring 2 (‐
         <u>#8644</u>    &lt;<b>https://github.com/fish-shell/fish-shell/issues/8644</b>&gt;,    <u>#8646</u>     &lt;<b>https://github.com/fish-</b>
         <b>shell/fish-shell/issues/8646</b>&gt;):

            &gt; math min 8,2,4
            2

       • <b>read</b>  is  now  faster  as  the  last  process in a pipeline (<u>#8552</u> &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/8552</b>&gt;).

       • <b>string</b> <b>join</b> gained a new <b>--no-empty</b> flag  to  skip  empty  arguments  (<u>#8774</u>  &lt;<b>https://github.com/fish-</b>
         <b>shell/fish-shell/issues/8774</b>&gt;, <u>#8351</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/8351</b>&gt;).

       • <b>read</b>  now only triggers the <b>fish_read</b> event, not the <b>fish_prompt</b> event (<u>#8797</u> &lt;<b>https://github.com/fish-</b>
         <b>shell/fish-shell/issues/8797</b>&gt;). It was supposed to work this way in fish  3.2.0  and  later,  but  both
         events were emitted.

       • The  TTY  modes  are no longer restored when non-interactive shells exit. This fixes wrong tty modes in
         pipelines with interactive commands. (<u>#8705</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/8705</b>&gt;).

       • Some functions shipped with fish printed error messages to standard output, but they now  they  rightly
         go to standard error (<u>#8855</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/8855</b>&gt;).

       • <b>jobs</b>  now  correctly  reports  CPU  usage as a percentage, instead of as a number of clock ticks (<u>#8919</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/8919</b>&gt;).

       • <b>process-exit</b> events now fire when the process exits even if the  job  has  not  yet  exited,  fixing  a
         regression in 3.4.1 (<u>#8914</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/8914</b>&gt;).

   <b>Interactive</b> <b>improvements</b>
       • Fish  now  reports a special error if a command wasn't found and there is a non-executable file by that
         name in <u>PATH</u> (<u>#8804</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/8804</b>&gt;).

       • <b>less</b> and other interactive commands would occasionally be stopped when run  in  a  pipeline  with  fish
         functions; this has been fixed (<u>#8699</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/8699</b>&gt;).

       • Case-changing  autosuggestions  generated  mid-token  now  correctly append only the suffix, instead of
         duplicating the token (<u>#8820</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/8820</b>&gt;).

       • <b>ulimit</b> learned a number of new options for the resource limits available on Linux, FreeBSD ande NetBSD,
         and returns a specific warning if the limit specified is not available on the active  operating  system
         (<u>#8823</u>    &lt;<b>https://github.com/fish-shell/fish-shell/issues/8823</b>&gt;,    <u>#8786</u>    &lt;<b>https://github.com/fish-</b>
         <b>shell/fish-shell/issues/8786</b>&gt;).

       • The  <b>vared</b>  command  can  now  successfully   edit   variables   named   "tmp"   or   "prompt"   (<u>#8836</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/8836</b>&gt;,    <u>#8837</u>   &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/8837</b>&gt;).

       • <b>time</b> now emits an error if used after the first command in a pipeline (<u>#8841</u>  &lt;<b>https://github.com/fish-</b>
         <b>shell/fish-shell/issues/8841</b>&gt;).

       • <b>fish_add_path</b>  now  prints  a  message  for  skipped  non-existent  paths when using the <b>-v</b> flag (<u>#8884</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/8884</b>&gt;).

       • Since fish 3.2.0, pressing <b>ctrl-d</b> while a command is running would end up inserting a  space  into  the
         next commandline, which has been fixed (<u>#8871</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/8871</b>&gt;).

       • A  bug  that caused multi-line prompts to be moved down a line when pasting or switching modes has been
         fixed (<u>#3481</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/3481</b>&gt;).

       • The Web-based configuration system no longer strips too many quotes in the abbreviation display  (<u>#8917</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/8917</b>&gt;,    <u>#8918</u>   &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/8918</b>&gt;).

       • Fish started with <b>--no-config</b> will now use the  default  keybindings  (<u>#8493</u>  &lt;<b>https://github.com/fish-</b>
         <b>shell/fish-shell/issues/8493</b>&gt;)

       • When  fish  inherits a <u>USER</u> environment variable value that doesn't correspond to the current effective
         user  ID,  it  will  now  correct  it  in   all   cases   (<u>#8879</u>   &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/8879</b>&gt;, <u>#8583</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/8583</b>&gt;).

       • Fish sets a new <u>EUID</u> variable containing the current effective user id (<u>#8866</u> &lt;<b>https://github.com/fish-</b>
         <b>shell/fish-shell/issues/8866</b>&gt;).

       • <b>history</b>  <b>search</b>  no  longer  interprets  the  search term as an option (<u>#8853</u> &lt;<b>https://github.com/fish-</b>
         <b>shell/fish-shell/issues/8853</b>&gt;)

       • The status message when a job terminates should no longer  be  erased  by  a  multiline  prompt  (<u>#8817</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/8817</b>&gt;)

   <b>New</b> <b>or</b> <b>improved</b> <b>bindings</b>
       • The  <b>alt-s</b>  binding  will now insert <b>doas</b> instead of <b>sudo</b> if necessary (<u>#8942</u> &lt;<b>https://github.com/fish-</b>
         <b>shell/fish-shell/issues/8942</b>&gt;).

       • The <b>kill-whole-line</b> special input function now kills the newline preceeding the last line.  This  makes
         <b>dd</b> in vi-mode clear the last line properly.

       • The  new  <b>kill-inner-line</b>  special  input  function kills the line without any newlines, allowing <b>cc</b> in
         vi-mode to  clear  the  line  while  preserving  newlines  (<u>#8983</u>  &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/8983</b>&gt;).

       • On  terminals  that emit special sequences for these combinations, <b>shift-space</b> is bound like <b>space</b>, and
         <b>ctrl-enter</b> is bound like <b>return</b> (<u>#8874</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/8874</b>&gt;).

   <b>Improved</b> <b>prompts</b>
       • A new <b>Astronaut</b> prompt  (<u>#8775</u>  &lt;<b>https://github.com/fish-shell/fish-shell/issues/8775</b>&gt;),  a  multi-line
         prompt using plain text reminiscent of the Starship.rs prompt.

   <b>Completions</b>
       • Added completions for:

         • <b>archlinux-java</b> (<u>#8911</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/8911</b>&gt;)

         • <b>apk</b> (<u>#8951</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/8951</b>&gt;)

         • <b>brightnessctl</b> (<u>#8758</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/8758</b>&gt;)

         • <b>efibootmgr</b> (<u>#9010</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/9010</b>&gt;)

         • <b>fastboot</b> (<u>#8904</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/8904</b>&gt;)

         • <b>optimus-manager</b> (<u>#8913</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/8913</b>&gt;)

         • <b>rclone</b> (<u>#8819</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/8819</b>&gt;)

         • <b>sops</b> (<u>#8821</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/8821</b>&gt;)

         • <b>tuned-adm</b> (<u>#8760</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/8760</b>&gt;)

         • <b>wg-quick</b> (<u>#8687</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/8687</b>&gt;)

       • <b>complete</b>  can  now be given multiple <b>--condition</b> options. They will be attempted in the order they were
         given, and only if all succeed will the completion be made available (as if they  were  connected  with
         <b>&amp;&amp;</b>). This helps with caching - fish's complete system stores the return value of each condition as long
         as  the  commandline  doesn't  change,  so  this  can  reduce  the number of conditions that need to be
         evaluated         (<u>#8536</u>         &lt;<b>https://github.com/fish-shell/fish-shell/issues/8536</b>&gt;,          <u>#8967</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/8967</b>&gt;).

   <b>Improved</b> <b>terminal</b> <b>support</b>
       • Working   directory   reporting   is  enabled  for  kitty  (<u>#8806</u>  &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/8806</b>&gt;).

       • Changing the cursor shape  is  now  enabled  by  default  in  iTerm2  (<u>#3696</u>  &lt;<b>https://github.com/fish-</b>
         <b>shell/fish-shell/issues/3696</b>&gt;).

   <b>For</b> <b>distributors</b>
       • libatomic    is    now   correctly   detected   as   necessary   when   building   on   RISC-V   (<u>#8850</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/8850</b>&gt;,   <u>#8851</u>    &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/8851</b>&gt;).

       • In  some  cases,  the  build  process  found the wrong libintl on macOS. This has been corrected (<u>#5244</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/5244</b>&gt;).

       • The  paths  for  completions,  functions,  and  configuration  snippets  now   include   subdirectories
         <b>fish/vendor_completions.d</b>,   <b>fish/vendor_functions.d</b>,   and  <b>fish/vendor_conf.d</b>  (respectively)  within
         <b>XDG_DATA_HOME</b>  (or  <b><a href="file:~/.local/share">~/.local/share</a></b>  if   not   defined)   (<u>#8887</u>   &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/8887</b>&gt;, <u>#7816</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/7816</b>&gt;).

                                                         ----

   <b>fish</b> <b>3.4.1</b> <b>(released</b> <b>March</b> <b>25,</b> <b>2022)</b>
       This release of fish fixes the following problems identified in fish 3.4.0:

       • An  error  printed after upgrading, where old instances could pick up a newer version of the <b>fish_title</b>
         function, has been fixed (<u>#8778</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/8778</b>&gt;)

       • fish builds correctly  on  NetBSD  (<u>#8788</u>  &lt;<b>https://github.com/fish-shell/fish-shell/issues/8788</b>&gt;)  and
         OpenIndiana (<u>#8780</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/8780</b>&gt;).

       • <b>nextd-or-forward-word</b>,  bound  to  <b>alt-right</b>  by  default,  was  inadvertently  changed  to  move  like
         <b>forward-bigword</b>.            This            has            been            corrected             (<u>#8790</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/8790</b>&gt;).

       • <b>funcsave</b>  <b>-q</b>  and  <b>funcsave</b>  <b>--quiet</b>  now  work  correctly  (<u>#8830</u> &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/8830</b>&gt;).

       • Issues with the <b>csharp</b> and <b>nmcli</b> completions were corrected.

       If you are upgrading from version 3.3.1 or before,  please  also  review  the  release  notes  for  3.4.0
       (included below).

                                                         ----

   <b>fish</b> <b>3.4.0</b> <b>(released</b> <b>March</b> <b>12,</b> <b>2022)</b>
   <b>Notable</b> <b>improvements</b> <b>and</b> <b>fixes</b>
       • fish's  command  substitution syntax has been extended: <b>$(cmd)</b> now has the same meaning as <b>(cmd)</b> but it
         can  be  used  inside   double   quotes,   to   prevent   line   splitting   of   the   results   (<u>#159</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/159</b>&gt;):

            foo (bar | string collect)
            # can now be written as
            foo "$(bar)"

            # and

            foo (bar)
            # can now be written as
            foo $(bar)
            # this will still split on newlines only.

       • Complementing  the <b>prompt</b> command in 3.3.0, <b>fish_config</b> gained a <b>theme</b> subcommand to show and pick from
         the sample themes (meaning color schemes) directly in the terminal, instead of having  to  open  a  Web
         browser.  For  example <b>fish_config</b> <b>theme</b> <b>choose</b> <b>Nord</b> loads the Nord theme in the current session (<u>#8132</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/8132</b>&gt;).  The  current  theme   can   be   saved   with
         <b>fish_config</b> <b>theme</b> <b>dump</b>, and custom themes can be added by saving them in <b><a href="file:~/.config/fish/themes/">~/.config/fish/themes/</a></b>.

       • <b>set</b>  and  <b>read</b>  learned  a  new option, <b>--function</b>, to set a variable in the function's top scope. This
         should be a more familiar way of scoping variables and avoids issues with <b>--local</b>,  which  is  actually
         block-scoped         (<u>#565</u>         &lt;<b>https://github.com/fish-shell/fish-shell/issues/565</b>&gt;,         <u>#8145</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/8145</b>&gt;):

            function demonstration
                if true
                    set --function foo bar
                    set --local baz banana
                end
                echo $foo # prints "bar" because $foo is still valid
                echo $baz # prints nothing because $baz went out of scope
            end

       • <b>string</b> <b>pad</b> now excludes escape sequences like colors that fish knows about, and a new <b>--visible</b> flag to
         <b>string</b> <b>length</b> makes it use that kind of visible width. This is useful to get  the  number  of  terminal
         cells  an  already  colored  string  would  occupy,  like in a prompt. (<u>#8182</u> &lt;<b>https://github.com/fish-</b>
         <b>shell/fish-shell/issues/8182</b>&gt;,  <u>#7784</u>   &lt;<b>https://github.com/fish-shell/fish-shell/issues/7784</b>&gt;,   <u>#4012</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/4012</b>&gt;):

            &gt; string length --visible (set_color red)foo
            3

       • Performance  improvements  to  globbing,  especially  on  systems  using  glibc.  In  some cases (large
         directories with files with many numbers in the names) this almost halves the time taken to expand  the
         glob.

       • Autosuggestions  can  now  be turned off by setting <b>$fish_autosuggestion_enabled</b> to 0, and (almost) all
         highlighting can be turned off by choosing the new "None" theme. The  exception  is  necessary  colors,
         like    those    which   distinguish   autosuggestions   from   the   actual   command   line.   (<u>#8376</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/8376</b>&gt;)

       • The <b>fish_git_prompt</b> function, which is included in the default prompts,  now  overrides  <b>git</b>  to  avoid
         running   commands  set by per-repository configuration. This avoids a potential security issue in some
         circumstances,  and  has  been  assigned  CVE-2022-20001  (<u>#8589</u>   &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/8589</b>&gt;).

   <b>Deprecations</b> <b>and</b> <b>removed</b> <b>features</b>
       • A  new  feature  flag, <b>ampersand-nobg-in-token</b> makes <b>&amp;</b> only act as background operator if followed by a
         separator. In combination with <b>qmark-noglob</b>, this allows entering most URLs at the command line without
         quoting or escaping (<u>#7991</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/7991</b>&gt;). For example:

            &gt; echo foo&amp;bar # will print "foo&amp;bar", instead of running "echo foo" in the background and executing "bar"
            &gt; echo foo &amp; bar # will still run "echo foo" in the background and then run "bar"
            # with both ampersand-nobg-in-token and qmark-noglob, this argument has no special characters anymore
            &gt; open https://www.youtube.com/watch?v=dQw4w9WgXcQ&amp;feature=youtu.be

         As   a   reminder,   feature   flags    can    be    set    on    startup    with    <b>fish</b>    <b>--features</b>
         <b>ampersand-nobg-in-token,qmark-noglob</b> or with a universal variable called <b>fish_features</b>:

            &gt; set -Ua fish_features ampersand-nobg-in-token

       • <b>$status</b>  is now forbidden as a command, to prevent a surprisingly common error among new users: Running
         <b>if</b>  <b>$status</b>  (<u>#8171</u>  &lt;<b>https://github.com/fish-shell/fish-shell/issues/8171</b>&gt;).  This  applies  <u>only</u>   to
         <b>$status</b>, other variables are still allowed.

       • <b>set</b>  <b>--query</b>  now  returns  an exit status of 255 if given no variable names. This means <b>if</b> <b>set</b> <b>-q</b> <b>$foo</b>
         will not enter the if-block if <b>$foo</b> is empty or unset. To restore the previous behavior, use <b>if</b> <b>not</b> <b>set</b>
         <b>-q</b> <b>foo;</b> <b>or</b> <b>set</b> <b>-q</b> <b>$foo</b> - but  this  is  unlikely  to  be  desireable  (<u>#8214</u>  &lt;<b>https://github.com/fish-</b>
         <b>shell/fish-shell/issues/8214</b>&gt;).

       • <b>_</b> is now a reserved keyword (<u>#8342</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/8342</b>&gt;).

       • The  special  input  functions <b>delete-or-exit</b>, <b>nextd-or-forward-word</b> and <b>prevd-or-backward-word</b> replace
         fish functions of the same names (<u>#8538</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/8538</b>&gt;).

       • Mac OS X 10.9 is no longer supported. The minimum Mac version is now 10.10 "Yosemite."

   <b>Scripting</b> <b>improvements</b>
       • <b>string</b> <b>collect</b> supports a new <b>--allow-empty</b> option, which will output one empty argument in  a  command
         substitution  that  has  no output (<u>#8054</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/8054</b>&gt;). This
         allows commands like <b>test</b> <b>-n</b> <b>(echo</b> <b>-n</b> <b>|</b> <b>string</b> <b>collect</b> <b>--allow-empty)</b> to work more reliably. Note  this
         can also be written as <b>test</b> <b>-n</b> <b>"$(echo</b> <b>-n)"</b> (see above).

       • <b>string</b>  <b>match</b> gained a <b>--groups-only</b> option, which makes it only output capturing groups, excluding the
         full match. This allows <b>string</b> <b>match</b> to  do  simple  transformations  (<u>#6056</u>  &lt;<b>https://github.com/fish-</b>
         <b>shell/fish-shell/issues/6056</b>&gt;):

            &gt; string match -r --groups-only '(.*)fish' 'catfish' 'twofish' 'blue fish' | string escape
            cat
            two
            'blue '

       • <b>$fish_user_paths</b>  is  now  automatically  deduplicated to fix a common user error of appending to it in
         config.fish  when  it  is  universal  (<u>#8117</u>   &lt;<b>https://github.com/fish-shell/fish-shell/issues/8117</b>&gt;).
         <u>fish_add_path</u> remains the recommended way to add to $PATH.

       • <b>return</b>  can  now  be used outside functions. In scripts, it does the same thing as <b>exit</b>. In interactive
         mode,it sets <b>$status</b> without exiting (<u>#8148</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/8148</b>&gt;).

       • An  oversight  prevented  all  syntax  checks  from  running  on  commands  given  to  <b>fish</b>  <b>-c</b>  (<u>#8171</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/8171</b>&gt;).  This  includes  checks such as <b>exec</b> not being
         allowed in a pipeline, and <b>$$</b> not being a  valid  variable.  Generally,  another  error  was  generated
         anyway.

       • <b>fish_indent</b>  now  correctly  reformats  tokens  that  end with a backslash followed by a newline (<u>#8197</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/8197</b>&gt;).

       • <b>commandline</b> gained an <b>--is-valid</b> option to check  if  the  command  line  is  syntactically  valid  and
         complete.  This  allows  basic  implementation  of  transient  prompts (<u>#8142</u> &lt;<b>https://github.com/fish-</b>
         <b>shell/fish-shell/issues/8142</b>&gt;).

       • <b>commandline</b> gained a <b>--paging-full-mode</b> option to check if the pager is showing all the possible  lines
         (no "7 more rows" message) (<u>#8485</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/8485</b>&gt;).

       • List   expansion   correctly   reports   an   error   when   used   with   all   zero   indexes  (<u>#8213</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/8213</b>&gt;).

       • Running <b>fish</b> with a directory instead of a script as argument  (eg  <b>fish</b>  <b>.</b>)  no  longer  leads  to  an
         infinite   loop.   Instead   it  errors  out  immediately  (<u>#8258</u>  &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/8258</b>&gt;)

       • Some error messages occuring after fork, like "text file busy" have  been  replaced  by  bespoke  error
         messages  for  fish (like "File is currently open for writing"). This also restores error messages with
         current  glibc  versions   that   removed   sys_errlist   (<u>#8234</u>   &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/8234</b>&gt;, <u>#4183</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/4183</b>&gt;).

       • The  <b>realpath</b>  builtin  now  also  squashes  leading  slashes  with  the  <b>--no-symlinks</b>  option  (<u>#8281</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/8281</b>&gt;).

       • When trying to <b>cd</b> to a dangling (broken) symbolic link, fish will print an error noting that the target
         is a broken link (<u>#8264</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/8264</b>&gt;).

       • On MacOS terminals that are not granted permissions to access a  folder,  <b>cd</b>  would  print  a  spurious
         "rotten    symlink"    error,    which    has    been   corrected   to   "permission   denied"   (<u>#8264</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/8264</b>&gt;).

       • Since fish 3.0, <b>for</b> loops would trigger a variable handler function before the loop was entered. As the
         variable had not actually changed or been set, this was a spurious event and has  been  removed  (<u>#8384</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/8384</b>&gt;).

       • <b>math</b>  now  correctly  prints negative values and values larger than <b>2**31</b> when in hex or octal bases (‐
         <u>#8417</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/8417</b>&gt;).

       • <b>dirs</b>  always  produces  an  exit   status   of   0,   instead   of   sometimes   returning   1   (<u>#8211</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/8211</b>&gt;).

       • <b>cd</b> <b>""</b> no longer crashes fish (<u>#8147</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/8147</b>&gt;).

       • <b>set</b>  <b>--query</b>  can  now  query  whether  a  variable  is  a  path variable via <b>--path</b> or <b>--unpath</b> (<u>#8494</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/8494</b>&gt;).

       • Tilde characters (<b>~</b>) produced by custom completions are no longer escaped when applied to  the  command
         line,  making  it  easier  to  use  the  output of a recursive <b>complete</b> <b>-C</b> in completion scripts (<u>#4570</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/4570</b>&gt;).

       • <b>set</b>  <b>--show</b>  reports  when  a  variable  is   read-only   (<u>#8179</u>   &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/8179</b>&gt;).

       • Erasing   <b>$fish_emoji_width</b>   will   reset   fish   to   the   default   guessed   emoji  width  (<u>#8274</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/8274</b>&gt;).

       • The <b>la</b> function no longer lists entries for "."  and  "..",  matching  other  systems  defaults  (<u>#8519</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/8519</b>&gt;).

       • <b>abbr</b>  <b>-q</b>  returns  the  correct  exit status when given multiple abbreviation names as arguments (<u>#8431</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/8431</b>&gt;).

       • <b>command</b>  <b>-v</b>  returns  an  exit  status  of  127  instead  of  1  if  no  command   was   found   (<u>#8547</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/8547</b>&gt;).

       • <b>argparse</b>  with  <b>--ignore-unknown</b> no longer breaks with multiple unknown options in a short option group
         (<u>#8637</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/8637</b>&gt;).

       • Comments inside command substitutions  or  brackets  now  correctly  ignore  parentheses,  quotes,  and
         brackets (<u>#7866</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/7866</b>&gt;, <u>#8022</u> &lt;<b>https://github.com/fish-</b>
         <b>shell/fish-shell/issues/8022</b>&gt;, <u>#8695</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/8695</b>&gt;).

       • <b>complete</b>  <b>-C</b>  supports a new <b>--escape</b> option, which turns on escaping in returned completion strings (‐
         <u>#3469</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/3469</b>&gt;).

       • Invalid byte or unicode escapes like <b>\Utest</b> or <b>\xNotHex</b> are now a tokenizer error  instead  of  causing
         the token to be truncated (<u>#8545</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/8545</b>&gt;).

   <b>Interactive</b> <b>improvements</b>
       • Vi  mode  cursors  are  now  set  properly  after  <b>ctrl-c</b>  (<u>#8125</u>  &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/8125</b>&gt;).

       • <b>funced</b> will try to edit the whole file  containing  a  function  definition,  if  there  is  one  (<u>#391</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/391</b>&gt;).

       • Running a command line consisting of just spaces now deletes an ephemeral (starting with space) history
         item again (<u>#8232</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/8232</b>&gt;).

       • Command substitutions no longer respect job control, instead running inside fish's own process group (‐
         <u>#8172</u>  &lt;<b>https://github.com/fish-shell/fish-shell/issues/8172</b>&gt;). This more closely matches other shells,
         and improves <b>ctrl-c</b> reliability inside a command substitution.

       • <b>history</b> and <b>__fish_print_help</b> now properly support <b>less</b> before version 530, including the version  that
         ships with macOS. (<u>#8157</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/8157</b>&gt;).

       • <b>help</b>  now  knows  which  section is in which document again (<u>#8245</u> &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/8245</b>&gt;).

       • fish's highlighter will now color options (starting with <b>-</b> or <b>--</b>) with  the  color  given  in  the  new
         $fish_color_option,  up  to  the  first  <b>--</b>. It falls back on $fish_color_param, so nothing changes for
         existing setups (<u>#8292</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/8292</b>&gt;).

       • When executing a command, abbreviations are no longer expanded when the cursor is  separated  from  the
         command  by  spaces, making it easier to suppress abbreviation expansion of commands without arguments.
         (<u>#8423</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/8423</b>&gt;).

       • <b>fish_key_reader</b>'s output was simplified. By default, it now only prints a bind statement. The  previous
         per-character    timing    information   can   be   seen   with   a   new   <b>--verbose</b>   switch   (<u>#8467</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/8467</b>&gt;).

       • Custom completions are now also loaded for commands that contain tildes or variables like <b><a href="file:~/bin/fish">~/bin/fish</a></b> or
         <b>$PWD/fish</b> (<u>#8442</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/8442</b>&gt;).

       • Command lines spanning multiple lines will not be overwritten by the completion pager when it fills the
         entire     terminal      (<u>#8509</u>      &lt;<b>https://github.com/fish-shell/fish-shell/issues/8509</b>&gt;,      <u>#8405</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/8405</b>&gt;).

       • When   redrawing   a   multiline   prompt,   the   old   prompt   is   now   properly   cleared  (<u>#8163</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/8163</b>&gt;).

       • Interactive completion would occasionally ignore the last word on  the  command  line  due  to  a  race
         condition. This has been fixed (<u>#8175</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/8175</b>&gt;).

       • Propagation   of   universal   variables  from  a  fish  process  that  is  closing  is  faster  (<u>#8209</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/8209</b>&gt;).

       • The  command  line  is  drawn  in  the  correct  place  if  the  prompt  ends  with  a  newline  (<u>#8298</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/8298</b>&gt;).

       • <b>history</b>  learned  a  new  subcommand <b>clear-session</b> to erase all history from the current session (<u>#5791</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/5791</b>&gt;).

       • Pressing <b>ctrl-c</b> in <b>fish_key_reader</b> will no longer print the incorrect "Press [ctrl-C]  again  to  exit"
         message (<u>#8510</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/8510</b>&gt;).

       • The default command-not-found handler for Fedora/PackageKit now passes the whole command line, allowing
         for  functionality  such  as  running  the  suggested command directly (<u>#8579</u> &lt;<b>https://github.com/fish-</b>
         <b>shell/fish-shell/issues/8579</b>&gt;).

       • When looking for locale information, the  Debian  configuration  is  now  used  when  available  (<u>#8557</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/8557</b>&gt;).

       • Pasting   text   containing   quotes   from  the  clipboard  trims  spaces  more  appropriately  (<u>#8550</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/8550</b>&gt;).

       • The clipboard bindings ignore X-based clipboard programs if the <b>DISPLAY</b>  environment  variable  is  not
         set, which helps prefer the Windows clipboard when it is available (such as on WSL).

       • <b>funcsave</b> will remove a saved copy of a function that has been erased with <b>functions</b> <b>--erase</b>.

       • The  Web-based  configuration  tool gained a number of improvements, including the ability to set pager
         colors.

       • The default <b>fish_title</b> prints a shorter title with shortened $PWD and no more redundant  "fish"  (<u>#8641</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/8641</b>&gt;).

       • Holding   down  an  arrow  key  won't  freeze  the  terminal  with  long  periods  of  flashing  (<u>#8610</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/8610</b>&gt;).

       • Multi-char bindings  are  no  longer  interrupted  if  a  signal  handler  enqueues  an  event.  (<u>#8628</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/8628</b>&gt;).

   <b>New</b> <b>or</b> <b>improved</b> <b>bindings</b>
       • <b>escape</b>  can  now  bound without breaking arrow key bindings (<u>#8428</u> &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/8428</b>&gt;).

       • The  <b>alt-h</b>  binding  (to  open  a  command’s   manual   page)   now   also   ignores   <b>command</b>   (<u>#8447</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/8447</b>&gt;).

   <b>Improved</b> <b>prompts</b>
       • The  <b>fish_status_to_signal</b>  helper  function returns the correct signal names for the current platform,
         rather than Linux (<u>#8530</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/8530</b>&gt;).

       • The <b>prompt_pwd</b> helper function learned a <b>--full-length-dirs</b> <b>N</b> option  to  keep  the  last  N  directory
         components  unshortened.  In  addition  the  number  of  characters to shorten each component should be
         shortened to can now be given as <b>-d</b> <b>N</b> or <b>--dir-length</b>  <b>N</b>.  (<u>#8208</u>  &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/8208</b>&gt;):

            &gt; prompt_pwd --full-length-dirs 2 -d 1 <a href="file:~/dev/fish-shell/share/tools/web_config">~/dev/fish-shell/share/tools/web_config</a>
            <a href="file:~/d/f/s/tools/web_config">~/d/f/s/tools/web_config</a>

   <b>Completions</b>
       • Added completions for:

         • Apple's <b>shortcuts</b>

         • <b>argparse</b> (<u>#8434</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/8434</b>&gt;)

         • <b>asd</b> (<u>#8759</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/8759</b>&gt;)

         • <b>az</b> (<u>#8141</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/8141</b>&gt;)

         • <b>black</b> (<u>#8123</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/8123</b>&gt;)

         • <b>clasp</b> (<u>#8373</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/8373</b>&gt;)

         • <b>cpupower</b> (<u>#8302</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/8302</b>&gt;)

         • <b>dart</b> (<u>#8315</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/8315</b>&gt;)

         • <b>dscacheutil</b>

         • <b>elvish</b> (<u>#8416</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/8416</b>&gt;)

         • <b>ethtool</b> (<u>#8283</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/8283</b>&gt;)

         • <b>exif</b> (<u>#8246</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/8246</b>&gt;)

         • <b>findstr</b> (<u>#8481</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/8481</b>&gt;)

         • <b>git-sizer</b> (<u>#8156</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/8156</b>&gt;)

         • <b>gnome-extensions</b> (<u>#8732</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/8732</b>&gt;)

         • <b>gping</b> (<u>#8181</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/8181</b>&gt;)

         • <b>isatty</b> (<u>#8609</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/8609</b>&gt;)

         • <b>istioctl</b> (<u>#8343</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/8343</b>&gt;)

         • <b>kmutil</b>

         • <b>kubectl</b> (<u>#8734</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/8734</b>&gt;)

         • <b>matlab</b> (<u>#8505</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/8505</b>&gt;)

         • <b>mono</b>   (<u>#8415</u>   &lt;<b>https://github.com/fish-shell/fish-shell/issues/8415</b>&gt;)  and  related  tools  <b>csharp</b>,
           <b>gacutil</b>,  <b>gendarme</b>,  <b>ikdasm</b>,   <b>ilasm</b>,   <b>mkbundle</b>,   <b>monodis</b>,   <b>monop</b>,   <b>sqlsharp</b>   and   <b>xsp</b>   (<u>#8452</u>
           &lt;<b>https://github.com/fish-shell/fish-shell/issues/8452</b>&gt;)

         • Angular's <b>ng</b> (<u>#8111</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/8111</b>&gt;)

         • <b>nodeenv</b> (<u>#8533</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/8533</b>&gt;)

         • <b>octave</b> (<u>#8505</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/8505</b>&gt;)

         • <b>pabcnet_clear</b> (<u>#8421</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/8421</b>&gt;)

         • <b>qmk</b> (<u>#8180</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/8180</b>&gt;)

         • <b>rakudo</b> (<u>#8113</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/8113</b>&gt;)

         • <b>rc-status</b> (<u>#8757</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/8757</b>&gt;)

         • <b>roswell</b> (<u>#8330</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/8330</b>&gt;)

         • <b>sbcl</b> (<u>#8330</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/8330</b>&gt;)

         • <b>starship</b> (<u>#8520</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/8520</b>&gt;)

         • <b>topgrade</b> (<u>#8651</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/8651</b>&gt;)

         • <b>wine</b>, <b>wineboot</b> and <b>winemaker</b> (<u>#8411</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/8411</b>&gt;)

         • Windows   Subsystem   for   Linux   (WSL)'s   <b>wslpath</b>   (<u>#8364</u>   &lt;<b>https://github.com/fish-shell/fish-</b>
           <b>shell/issues/8364</b>&gt;)

         • Windows' <b>color</b> (<u>#8483</u>  &lt;<b>https://github.com/fish-shell/fish-shell/issues/8483</b>&gt;),  <b>attrib</b>,  <b>attributes</b>,
           <b>choice</b>,  <b>clean</b>,  <b>cleanmgr</b>,  <b>cmd</b>,  <b>cmdkey</b>,  <b>comp</b>,  <b>forfiles</b>,  <b>powershell</b>,  <b>reg</b>,  <b>schtasks</b>, <b>setx</b> (<u>#8486</u>
           &lt;<b>https://github.com/fish-shell/fish-shell/issues/8486</b>&gt;)

         • <b>zef</b> (<u>#8114</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/8114</b>&gt;)

       • Improvements  to  many  completions,  especially  for  <b>git</b>  aliases  (<u>#8129</u>   &lt;<b>https://github.com/fish-</b>
         <b>shell/fish-shell/issues/8129</b>&gt;),       subcommands      (<u>#8134</u>      &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/8134</b>&gt;) and submodules (<u>#8716</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/8716</b>&gt;).

       • Many adjustments to complete correct options for system utilities on BSD and macOS.

       • When evaluating custom completions, the command  line  state  no  longer  includes  variable  overrides
         (<b>var=val</b>). This unbreaks completions that read <b>commandline</b> <b>-op</b>.

   <b>Improved</b> <b>terminal</b> <b>support</b>
       • Dynamic   terminal   titles   are   enabled   on  WezTerm  (<u>#8121</u>  &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/8121</b>&gt;).

       • Directory history navigation works out of the box with Apple Terminal's  default  key  settings  (<u>#2330</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/2330</b>&gt;).

       • fish  now assumes Unicode 9+ widths for emoji under iTerm 2 (<u>#8200</u> &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/8200</b>&gt;).

       • Skin-tone  emoji  modifiers  (U+1F3FB  through  U+1F3FF)  are  now   measured   as   width   0   (<u>#8275</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/8275</b>&gt;).

       • fish's escape sequence removal now also knows Tmux's wrapped escapes.

       • Vi   mode  cursors  are  enabled  in  Apple  Terminal.app  (<u>#8167</u>  &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/8167</b>&gt;).

       • Vi cursor shaping and $PWD reporting is now  also  enabled  on  foot  (<u>#8422</u>  &lt;<b>https://github.com/fish-</b>
         <b>shell/fish-shell/issues/8422</b>&gt;).

       • <b>ls</b>  will  use  colors  also  on  newer  versions of Apple Terminal.app (<u>#8309</u> &lt;<b>https://github.com/fish-</b>
         <b>shell/fish-shell/issues/8309</b>&gt;).

       • The <b>delete</b> and <b>shift-tab</b> keys work more reliably under <b>st</b>  (<u>#8352</u>  &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/8352</b>&gt;, <u>#8354</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/8354</b>&gt;).

   <b>Other</b> <b>improvements</b>
       • Fish's  test  suite  now  uses <b>ctest</b>, and has become much faster to run. It is now also possible to run
         only specific tests with targets named <b>test_$filename</b> - <b>make</b> <b>test_set.fish</b> only runs the set.fish test.
         (<u>#7851</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/7851</b>&gt;)

       • The  HTML  version  of  the  documentation  now  includes  copy  buttons  for  code   examples   (<u>#8218</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/8218</b>&gt;).

       • The  HTML version of the documentation and the web-based configuration tool now pick more modern system
         fonts instead of falling back to Arial  and  something  like  Courier  New  most  of  the  time  (<u>#8632</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/8632</b>&gt;).

       • The  Debian  &amp; Ubuntu package linked from fishshell.com is now a single package, rather than split into
         <b>fish</b> and <b>fish-common</b> (<u>#7845</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/7845</b>&gt;).

       • The macOS installer does not assert that Rosetta is required to install fish  on  machines  with  Apple
         Silicon (<u>#8566</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/8566</b>&gt;).

       • The   macOS   installer   now   cleans   up   previous   .pkg   installations  when  upgrading.  (<u>#2963</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/2963</b>&gt;).

   <b>For</b> <b>distributors</b>
       • The minimum version of CMake required to build fish is now 3.5.0.

       • The    CMake    installation    supports    absolute    paths    for    <b>CMAKE_INSTALL_DATADIR</b>    (<u>#8150</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/8150</b>&gt;).

       • Building  using  NetBSD  curses  works  on  any  platform  (<u>#8087</u>  &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/8087</b>&gt;).

       • The build system now uses the default linker instead of forcing use of the gold or  lld  linker  (<u>#8152</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/8152</b>&gt;).

                                                         ----

   <b>fish</b> <b>3.3.1</b> <b>(released</b> <b>July</b> <b>6,</b> <b>2021)</b>
       This release of fish fixes the following problems identified in fish 3.3.0:

       • The  prompt  and  command  line  are redrawn correctly in response to universal variable changes (<u>#8088</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/8088</b>&gt;).

       • A superfluous error that was produced when setting the <b>PATH</b> or <b>CDPATH</b> environment variables to  include
         colon-delimited  components  that  do not exist was removed (<u>#8095</u> &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/8095</b>&gt;).

       • The Vi mode indicator in the prompt is repainted correctly after <b>ctrl-c</b> cancels the current command  (‐
         <u>#8103</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/8103</b>&gt;).

       • fish  builds  correctly on platforms that do not have a <b>spawn.h</b> header, such as old versions of OS X (‐
         <u>#8097</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/8097</b>&gt;).

       A number of improvements to the documentation, and fixes for completions, are included as well.

       If you are upgrading from version 3.2.2 or before,  please  also  review  the  release  notes  for  3.3.0
       (included below).

                                                         ----

   <b>fish</b> <b>3.3.0</b> <b>(released</b> <b>June</b> <b>28,</b> <b>2021)</b>
   <b>Notable</b> <b>improvements</b> <b>and</b> <b>fixes</b>
       • <b>fish_config</b>  gained  a  <b>prompt</b>  subcommand  to  show  and  pick from the sample prompts directly in the
         terminal, instead of having to open a webbrowser. For example <b>fish_config</b> <b>prompt</b> <b>choose</b>  <b>default</b>  loads
         the         default         prompt         in         the         current         session        (<u>#7958</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/7958</b>&gt;).

       • The documentation has been reorganized to be  easier  to  understand  (<u>#7773</u>  &lt;<b>https://github.com/fish-</b>
         <b>shell/fish-shell/issues/7773</b>&gt;).

   <b>Deprecations</b> <b>and</b> <b>removed</b> <b>features</b>
       • The <b>$fish_history</b> value "default" is no longer special. It used to be treated the same as "fish" (<u>#7650</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/7650</b>&gt;).

       • Redirection  to standard error with the <b>^</b> character has been disabled by default. It can be turned back
         on  using  the  <b>stderr-nocaret</b>  feature  flag,  but  will  eventually  be  disabled  completely  (<u>#7105</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/7105</b>&gt;).

       • Specifying  an initial tab to <b>fish_config</b> now only works with <b>fish_config</b> <b>browse</b> (eg <b>fish_config</b> <b>browse</b>
         <b>variables</b>),  otherwise  it  would  interfere  with  the  new  <b>prompt</b>  subcommand  (see  below)   (<u>#7958</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/7958</b>&gt;).

   <b>Scripting</b> <b>improvements</b>
       • <b>math</b>   gained   new   functions   <b>log2</b>   (like   the   documentation   claimed),  <b>max</b>  and  <b>min</b>  (<u>#7856</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/7856</b>&gt;).  <b>math</b>  functions  can  be  used  without   the
         parentheses (eg <b>math</b> <b>sin</b> <b>2</b> <b>+</b> <b>6</b>), and functions have the lowest precedence in the order of operations (‐
         <u>#7877</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/7877</b>&gt;).

       • Shebang  (<b>#!</b>)  lines  are  no  longer required within shell scripts, improving support for scripts with
         concatenated binary contents. If a file fails to execute  and  passes  a  (rudimentary)  binary  safety
         check,   fish   will   re-invoke   it   using   <b><a href="file:/bin/sh">/bin/sh</a></b>   (<u>#7802</u>   &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/7802</b>&gt;).

       • Exit codes are better aligned with bash. A failed execution now reports <b>$status</b> of 127 if the  file  is
         not found, and 126 if it is not executable.

       • <b>echo</b>  no  longer  writes  its  output  one  byte at a time, improving performance and allowing use with
         Linux's  special  API  files  (<b><a href="file:/proc">/proc</a></b>,  <b><a href="file:/sys">/sys</a></b>  and  such)   (<u>#7836</u>   &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/7836</b>&gt;).

       • fish   should   now   better   handle   <b>cd</b>   on   filesystems  with  broken  <b><a href="../man3/stat.3.html">stat</a>(3)</b>  responses  (<u>#7577</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/7577</b>&gt;).

       • Builtins now properly report a <b>$status</b> of 1 upon unsuccessful writes  (<u>#7857</u>  &lt;<b>https://github.com/fish-</b>
         <b>shell/fish-shell/issues/7857</b>&gt;).

       • <b>string</b>  <b>match</b>  with  unmatched  capture  groups  and  without the <b>--all</b> flag now sets an empty variable
         instead of a variable containing the empty string.  It  also  correctly  imports  the  first  match  if
         multiple   arguments   are  provided,  matching  the  documentation.  (<u>#7938</u>  &lt;<b>https://github.com/fish-</b>
         <b>shell/fish-shell/issues/7938</b>&gt;).

       • fish produces more specific errors when a command in a command substitution  wasn't  found  or  is  not
         allowed.  This  now  prints something like "Unknown command" instead of "Unknown error while evaluating
         command substitution".

       • <b>fish_indent</b> allows inline variable assignments (<b>FOO=BAR</b> <b>command</b>) to use line continuation,  instead  of
         joining them into one line (<u>#7955</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/7955</b>&gt;).

       • fish  gained a <b>--no-config</b> option to disable configuration files. This applies to user-specific and the
         systemwide <b>config.fish</b> (typically in <b>/etc/fish/config.fish</b>), and configuration snippets  (typically  in
         <b>conf.d</b>  directories).  It  also  disables  universal  variables, history, and loading of functions from
         system or user configuration directories (<u>#7921</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/7921</b>&gt;,
         <u>#1256</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/1256</b>&gt;).

       • When universal variables are unavailable for some reason, setting  a  universal  variable  now  sets  a
         global variable instead (<u>#7921</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/7921</b>&gt;).

       • <b>$last_pid</b>  now  contains  the process ID of the last process in the pipeline, allowing it to be used in
         scripts (<u>#5036</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/5036</b>&gt;, <u>#5832</u>  &lt;<b>https://github.com/fish-</b>
         <b>shell/fish-shell/issues/5832</b>&gt;,      <u>#7721</u>      &lt;<b>https://github.com/fish-shell/fish-shell/issues/7721</b>&gt;).
         Previously, this value contained the process group ID, but in scripts this was the same as the  running
         fish's process ID.

       • <b>process-exit</b> event handlers now receive the same value as <b>$status</b> in all cases, instead of receiving -1
         when the exit was due to a signal.

       • <b>process-exit</b> event handlers for PID 0 also received <b>JOB_EXIT</b> events; this has been fixed.

       • <b>job-exit</b> event handlers may now be created with any of the PIDs from the job. The handler is passed the
         last PID in the job as its second argument, instead of the process group.

       • Trying  to  set  an  empty variable name with <b>set</b> no longer works (these variables could not be used in
         expansions anyway).

       • <b>fish_add_path</b> handles an undefined <b>PATH</b> environment variable correctly (<u>#8082</u> &lt;<b>https://github.com/fish-</b>
         <b>shell/fish-shell/issues/8082</b>&gt;).

   <b>Interactive</b> <b>improvements</b>
       • Commands entered before the previous command finishes will now be properly syntax highlighted.

       • fish now automatically creates <b>config.fish</b> and the configuration directories  in  <b>$XDG_CONFIG_HOME/fish</b>
         (by  default  <b><a href="file:~/.config/fish">~/.config/fish</a></b>)  if they do not already exist (<u>#7402</u> &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/7402</b>&gt;).

       • <b>$SHLVL</b> is no longer incremented in non-interactive shells. This means it won't be set to values  larger
         than  1  just because your environment happens to run some scripts in $SHELL in its startup path (<u>#7864</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/7864</b>&gt;).

       • fish no longer rings the bell when flashing the command line. The flashing  should  already  be  enough
         notification         and         the         bell         can         be         annoying        (<u>#7875</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/7875</b>&gt;).

       • <b>fish</b> <b>--help</b> is more helpful if  the  documentation  isn't  installed  (<u>#7824</u>  &lt;<b>https://github.com/fish-</b>
         <b>shell/fish-shell/issues/7824</b>&gt;).

       • <b>funced</b>  won't include an entry on where a function is defined, thanks to the new <b>functions</b> <b>--no-details</b>
         option (<u>#7879</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/7879</b>&gt;).

       • A new  variable,  <b>fish_killring</b>,  containing  entries  from  the  killring,  is  now  available  (<u>#7445</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/7445</b>&gt;).

       • <b>fish</b>  <b>--private</b> prints a note on private mode on startup even if <b>$fish_greeting</b> is an empty list (<u>#7974</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/7974</b>&gt;).

       • fish no longer attempts to lock history or universal variable files on  remote  filesystems,  including
         NFS  and  Samba mounts. In rare cases, updates to these files may be dropped if separate fish instances
         modify them simultaneously. (<u>#7968</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/7968</b>&gt;).

       • <b>wait</b>   and   <b>on-process-exit</b>   work   correctly   with   jobs   that   have   already   exited   (<u>#7210</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/7210</b>&gt;).

       • <b>__fish_print_help</b>  (used  for  <b>--help</b>  output  for  fish's  builtins) now respects the <b>LESS</b> environment
         variable, and  if  not  set,  uses  better  default  pager  settings  (<u>#7997</u>  &lt;<b>https://github.com/fish-</b>
         <b>shell/fish-shell/issues/7997</b>&gt;).

       • Errors  from  <b>alias</b>  are  now  printed  to standard error, matching other builtins and functions (<u>#7925</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/7925</b>&gt;).

       • <b>ls</b> output is colorized on OpenBSD if colorls  utility  is  installed  (<u>#8035</u>  &lt;<b>https://github.com/fish-</b>
         <b>shell/fish-shell/issues/8035</b>&gt;)

       • The    default    pager   color   looks   better   in   terminals   with   light   backgrounds   (<u>#3412</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/3412</b>&gt;).

       • Further robustness improvements to the bash history import (<u>#7874</u>  &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/7874</b>&gt;).

       • fish  now  tries  to  find a Unicode-aware locale for encoding (<b>LC_CTYPE</b>) if started without any locale
         information, improving the display of emoji and other non-ASCII text on  misconfigured  systems  (<u>#8031</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/8031</b>&gt;).   To  allow  a  C  locale,  set  the  variable
         <b>fish_allow_singlebyte_locale</b> to 1.

       • The Web-based configuration and documentation now feature a dark mode if the browser requests it (<u>#8043</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/8043</b>&gt;).

       • Color variables can now also be given like <b>--background</b> <b>red</b> and <b>-b</b> <b>red</b>, not  just  <b>--background=red</b>  (‐
         <u>#8053</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/8053</b>&gt;).

       • <b>exit</b>   run   within   <b>fish_prompt</b>   now   exits  properly  (<u>#8033</u>  &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/8033</b>&gt;).

       • When attempting to execute the unsupported POSIX-style brace command group (<b>{</b> <b>...</b> <b>}</b>) fish will  suggest
         its equivalent <b>begin;</b> <b>...;</b> <b>end</b> commands (<u>#6415</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/6415</b>&gt;).

   <b>New</b> <b>or</b> <b>improved</b> <b>bindings</b>
       • Pasting  in  Vi  mode  puts  text  in  the  right place in normal mode (<u>#7847</u> &lt;<b>https://github.com/fish-</b>
         <b>shell/fish-shell/issues/7847</b>&gt;).

       • Vi mode's <b>u</b> is bound to <b>undo</b> instead of <b>history-search-backward</b>,  following  GNU  readline's  behavior.
         Similarly,   <b>ctrl-r</b>  is  bound  to  <b>redo</b>  instead  of  <b>history-search-backward</b>,  following  Vim  (<u>#7908</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/7908</b>&gt;).

       • <b>s</b> in Vi  visual  mode  now  does  the  same  thing  as  <b>c</b>  (<u>#8039</u>  &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/8039</b>&gt;).

       • The binding for <b>",*,y</b> now uses <b>fish_clipboard_copy</b>, allowing it to support more than just <b>xsel</b>.

       • The   <b>ctrl-space</b>  binding  can  be  correctly  customised  (<u>#7922</u>  &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/7922</b>&gt;).

       • <b>exit</b> works correctly in bindings (<u>#7967</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/7967</b>&gt;).

       • The <b>f1</b> binding, which opens the manual page for the current command, now works around a bug in  certain
         <b>less</b>   versions   that   fail   to   clear   the   screen  (<u>#7863</u>  &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/7863</b>&gt;).

       • The binding for <b>alt-s</b> now toggles whether <b>sudo</b> is prepended, even when it  took  the  commandline  from
         history instead of only adding it.

       • The new functions <b>fish_commandline_prepend</b> and <b>fish_commandline_append</b> allow toggling the presence of a
         prefix/suffix            on            the            current            commandline.            (<u>#7905</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/7905</b>&gt;).

       • <b>backward-kill-path-component</b> <b>ctrl-w</b>) no longer erases parts of two tokens when the cursor is positioned
         immediately after <b>/</b>. (<u>#6258</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/6258</b>&gt;).

   <b>Improved</b> <b>prompts</b>
       • The default Vi mode prompt now uses foreground instead of background colors, making it  less  obtrusive
         (<u>#7880</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/7880</b>&gt;).

       • Performance  of  the  "informative"  git  prompt  is improved somewhat (<u>#7871</u> &lt;<b>https://github.com/fish-</b>
         <b>shell/fish-shell/issues/7871</b>&gt;). This is still slower than  the  non-informative  version  by  its  very
         nature. In particular it is IO-bound, so it will be very slow on slow disks or network mounts.

       • The  sample  prompts  were updated. Some duplicated prompts, like the various classic variants, or less
         useful ones, like the "justadollar" prompt were removed, some prompts were  cleaned  up,  and  in  some
         cases renamed. A new "simple" and "disco" prompt were added (<u>#7884</u> &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/7884</b>&gt;,       <u>#7897</u>      &lt;<b>https://github.com/fish-shell/fish-shell/issues/7897</b>&gt;,      <u>#7930</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/7930</b>&gt;). The new prompts will  only  take  effect  when
         selected and existing installed prompts will remain unchanged.

       • A  new  <b>prompt_login</b> helper function to describe the kind of "login" (user, host and chroot status) for
         use in prompts. This replaces the old "debian chroot" prompt and has been  added  to  the  default  and
         terlar prompts (<u>#7932</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/7932</b>&gt;).

       • The   Web-based   configuration's   prompt   picker   now  shows  and  installs  right  prompts  (<u>#7930</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/7930</b>&gt;).

       • The git prompt now has the same symbol order in normal and "informative" mode,  and  it's  customizable
         via <b>$__fish_git_prompt_status_order</b> (<u>#7926</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/7926</b>&gt;).

   <b>Completions</b>
       • Added completions for:

         • <b>firewall-cmd</b> (<u>#7900</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/7900</b>&gt;)

         • <b>sv</b> (<u>#8069</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/8069</b>&gt;)

       • Improvements to plenty of completions!

       • Commands   that   wrap  <b>cd</b>  (using  <b>complete</b>  <b>--wraps</b>  <b>cd</b>)  get  the  same  completions  as  <b>cd</b>  (<u>#4693</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/4693</b>&gt;).

       • The  <b>--force-files</b>  option  to  <b>complete</b>  works  for  bare   arguments,   not   just   options   (<u>#7920</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/7920</b>&gt;).

       • Completion  descriptions  for functions don't include the function definition, making them more concise
         (<u>#7911</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/7911</b>&gt;).

       • The  <b>kill</b>  completions  no  longer   error   on   MSYS2   (<u>#8046</u>   &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/8046</b>&gt;).

       • Completion  scripts  are  now  loaded  when  calling  a command via a relative path (like <b>./git</b>) (<u>#6001</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/6001</b>&gt;,   <u>#7992</u>    &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/7992</b>&gt;).

       • When  there  are  multiple  completion  candidates,  fish  inserts their shared prefix. This prefix was
         computed in a case-insensitive way, resulting in wrong case in the completion pager. This was fixed  by
         only    inserting    prefixes    with   matching   case   (<u>#7744</u>   &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/7744</b>&gt;).

   <b>Improved</b> <b>terminal</b> <b>support</b>
       • fish no longer tries to detect a missing new line  during  startup,  preventing  an  erroneous  <b>⏎</b>  from
         appearing  if  the terminal is resized at the wrong time, which can happen in tiling window managers (‐
         <u>#7893</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/7893</b>&gt;).

       • fish behaves better when it disagrees with the terminal on the  width  of  characters.  In  particular,
         staircase  effects  with  right  prompts  should be gone in most cases (<u>#8011</u> &lt;<b>https://github.com/fish-</b>
         <b>shell/fish-shell/issues/8011</b>&gt;).

       • If the prompt takes up the entire line, the last character should no longer be chopped off  in  certain
         terminals (<u>#8002</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/8002</b>&gt;).

       • fish's  reflow  handling  has  been  disabled  by  default  for  kitty (<u>#7961</u> &lt;<b>https://github.com/fish-</b>
         <b>shell/fish-shell/issues/7961</b>&gt;).

       • The  default  prompt  no  longer  produces   errors   when   used   with   a   dumb   terminal   (<u>#7904</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/7904</b>&gt;).

       • Terminal size variables are updated for window size change signal handlers (<b>SIGWINCH</b>).

       • Pasting  within  a  multi-line  command using a terminal that supports bracketed paste works correctly,
         instead of producing an error (<u>#7782</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/7782</b>&gt;).

       • <b>set_color</b> produces an error when used with invalid arguments, rather than empty output which  interacts
         badly with Cartesian product expansion.

   <b>For</b> <b>distributors</b>
       • fish    runs    correctly    on   platforms   without   the   <b>O_CLOEXEC</b>   flag   for   <b><a href="../man2/open.2.html">open</a>(2)</b>   (<u>#8023</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/8023</b>&gt;).

                                                         ----

   <b>fish</b> <b>3.2.2</b> <b>(released</b> <b>April</b> <b>7,</b> <b>2021)</b>
       This release of fish fixes a number of additional issues identified in the fish 3.2 series:

       • The command-not-found handler used suggestions from  <b>pacman</b>  on  Arch  Linux,  but  this  caused  major
         slowdowns   on   some   systems  and  has  been  disabled  (<u>#7841</u>  &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/7841</b>&gt;).

       • fish will  no  longer  hang  on  exit  if  another  process  is  in  the  foreground  on  macOS  (<u>#7901</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/7901</b>&gt;).

       • Certain  programs  (such  as  <b>lazygit</b>)  could create situations where fish would not receive keystrokes
         correctly, but it is now more robust in these  situations  (<u>#7853</u>  &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/7853</b>&gt;).

       • Arguments  longer  than  1024  characters  no  longer  trigger  excessive  CPU  usage  on  macOS (<u>#7837</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/7837</b>&gt;).

       • fish builds correctly on macOS when  using  new  versions  of  Xcode  (<u>#7838</u>  &lt;<b>https://github.com/fish-</b>
         <b>shell/fish-shell/issues/7838</b>&gt;).

       • Completions  for  <b>aura</b> (<u>#7865</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/7865</b>&gt;) and <b>tshark</b> (<u>#7858</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/7858</b>&gt;) should no longer produce errors.

       • Background jobs no longer interfere with syntax highlighting (a regression introduced in fish 3.2.1,  ‐
         <u>#7842</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/7842</b>&gt;).

       If  you  are  upgrading  from version 3.1.2 or before, please also review the release notes for 3.2.1 and
       3.2.0 (included below).

                                                         ----

   <b>fish</b> <b>3.2.1</b> <b>(released</b> <b>March</b> <b>18,</b> <b>2021)</b>
       This release of fish fixes the following problems identified in fish 3.2.0:

       • Commands in key bindings are run with fish's internal terminal modes, instead  of  the  terminal  modes
         typically used for commands. This fixes a bug introduced in 3.2.0, where text would unexpectedly appear
         on           the           terminal,          especially          when          pasting          (<u>#7770</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/7770</b>&gt;).

       • Prompts which use the internal <b>__fish_print_pipestatus</b> function  will  display  correctly  rather  than
         carrying  certain  modifiers  (such  as  bold)  further  than intended (<u>#7771</u> &lt;<b>https://github.com/fish-</b>
         <b>shell/fish-shell/issues/7771</b>&gt;).

       • Redirections to internal file descriptors is allowed again, reversing the changes in 3.2.0. This  fixes
         a problem with Midnight Commander (<u>#7769</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/7769</b>&gt;).

       • Universal   variables   should   be   fully  reliable  regardless  of  operating  system  again  (<u>#7774</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/7774</b>&gt;).

       • <b>fish_git_prompt</b>   no   longer    causes    screen    flickering    in    certain    terminals    (<u>#7775</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/7775</b>&gt;).

       • <b>fish_add_path</b>  manipulates  the  <b>fish_user_paths</b>  variable  correctly when moving multiple paths (<u>#7776</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/7776</b>&gt;).

       • Pasting  with  a  multi-line  command  no  longer  causes   a   <b>__fish_tokenizer_state</b>   error   (<u>#7782</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/7782</b>&gt;).

       • <b>psub</b>  inside  event  handlers  cleans  up  temporary  files  properly  (<u>#7792</u> &lt;<b>https://github.com/fish-</b>
         <b>shell/fish-shell/issues/7792</b>&gt;).

       • Event  handlers   declared   with   <b>--on-job-exit</b>   <b>$fish_pid</b>   no   longer   run   constantly   (<u>#7721</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/7721</b>&gt;), although these functions should use <b>--on-event</b>
         <b>fish_exit</b> instead.

       • Changing   terminal   modes   inside   <b>config.fish</b>  works  (<u>#7783</u>  &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/7783</b>&gt;).

       • <b>set_color</b>  <b>--print-colors</b>  no  longer  prints  all  colors  in  bold  (<u>#7805</u>  &lt;<b>https://github.com/fish-</b>
         <b>shell/fish-shell/issues/7805</b>&gt;)

       • Completing  commands  starting  with  a  <b>-</b>  no  longer prints an error (<u>#7809</u> &lt;<b>https://github.com/fish-</b>
         <b>shell/fish-shell/issues/7809</b>&gt;).

       • Running <b>fish_command_not_found</b> directly no longer produces an error on macOS or other OSes which do not
         have a handler available (<u>#7777</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/7777</b>&gt;).

       • The new <b>type</b> builtin now has the (deprecated) <b>--quiet</b> long form of <b>-q</b> (<u>#7766</u>  &lt;<b>https://github.com/fish-</b>
         <b>shell/fish-shell/issues/7766</b>&gt;).

       It also includes some small enhancements:

       • <b>help</b>  and  <b>fish_config</b>  work  correctly  when  fish  is running in a Chrome OS Crostini Linux VM (<u>#7789</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/7789</b>&gt;).

       • The  history  file  can   be   made   a   symbolic   link   without   it   being   overwritten   (<u>#7754</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/7754</b>&gt;),   matching   a  similar  improvement  for  the
         universal variable file in 3.2.0.

       • An  unhelpful  error  ("access:  No  error"),  seen  on  Cygwin,   is   no   longer   produced   (<u>#7785</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/7785</b>&gt;).

       • Improvements  to  the <b>rsync</b> completions (<u>#7763</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/7763</b>&gt;),
         some  completion  descriptions  (<u>#7788</u>   &lt;<b>https://github.com/fish-shell/fish-shell/issues/7788</b>&gt;),   and
         completions that use IP address (<u>#7787</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/7787</b>&gt;).

       • Improvements   to   the   appearance   of   <b>fish_config</b>   (<u>#7811</u>   &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/7811</b>&gt;).

       If you are upgrading from version 3.1.2 or before,  please  also  review  the  release  notes  for  3.2.0
       (included below).

                                                         ----

   <b>fish</b> <b>3.2.0</b> <b>(released</b> <b>March</b> <b>1,</b> <b>2021)</b>
   <b>Notable</b> <b>improvements</b> <b>and</b> <b>fixes</b>
       • <b>Undo</b>  <b>and</b>  <b>redo</b>  <b>support</b>  for the command-line editor and pager search (<u>#1367</u> &lt;<b>https://github.com/fish-</b>
         <b>shell/fish-shell/issues/1367</b>&gt;). By default, undo is bound to Control+Z, and redo to Alt+<a href="file:/.">/.</a>

       • <b>Builtins</b> <b>can</b> <b>now</b> <b>output</b> <b>before</b> <b>all</b> <b>data</b> <b>is</b> <b>read</b>. For example, <b>string</b> <b>replace</b> no longer has to read  all
         of stdin before it can begin to output.  This makes it usable also for pipes where the previous command
         hasn't finished yet, like:

            # Show all dmesg lines related to "usb"
            dmesg -w | string match '*usb*'

       • <b>Prompts</b>  <b>will</b>  <b>now</b> <b>be</b> <b>truncated</b> instead of replaced with <b>"&gt;</b> <b>"</b> if they are wider than the terminal (<u>#904</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/904</b>&gt;).  For example:

            <a href="file:~/dev/build/fish-shell-git/src/fish-shell/build">~/dev/build/fish-shell-git/src/fish-shell/build</a> (makepkg)&gt;

         will turn into:

            …h-shell/build (makepkg)&gt;

         It is still possible to react to the <b>COLUMNS</b> variable inside the prompt to implement smarter behavior.

       • <b>fish</b> <b>completes</b> <b>ambiguous</b> <b>completions</b> after pressing <b>tab</b> even when they have a  common  prefix,  without
         the user having to press <b>tab</b> again (<u>#6924</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/6924</b>&gt;).

       • fish  is  less  aggressive  about  resetting terminal modes, such as flow control, after every command.
         Although flow control remains off by default, enterprising users can now enable  it  with  <b>stty</b>  (<u>#2315</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/2315</b>&gt;,    <u>#7704</u>   &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/7704</b>&gt;).

       • A new <b>"fish_add_path"</b> <b>helper</b> <b>function</b> <b>to</b> <b>add</b> <b>paths</b> <b>to</b> <b>$PATH</b> without producing duplicates,  to  be  used
         interactively  or  in  <b>config.fish</b> (<u>#6960</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/6960</b>&gt;, <u>#7028</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/7028</b>&gt;).  For example:

            fish_add_path /opt/mycoolthing/bin

         will add /opt/mycoolthing/bin to the beginning of $fish_user_path without creating  duplicates,  so  it
         can be called safely from config.fish or interactively, and the path will just be there, once.

       • <b>Better</b> <b>errors</b> <b>with</b> <b>"test"</b> (<u>#6030</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/6030</b>&gt;):

            &gt; test 1 = 2 and echo true or false
            test: Expected a combining operator like '-a' at index 4
            1 = 2 and echo true or echo false
                  ^

         This includes numbering the index from 1 instead of 0, like fish lists.

       • <b>A</b>  <b>new</b>  <b>theme</b>  <b>for</b>  <b>the</b>  <b>documentation</b>  <b>and</b>  <b>Web-based</b>  <b>configuration</b>  (<u>#6500</u> &lt;<b>https://github.com/fish-</b>
         <b>shell/fish-shell/issues/6500</b>&gt;,  <u>#7371</u>   &lt;<b>https://github.com/fish-shell/fish-shell/issues/7371</b>&gt;,   <u>#7523</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/7523</b>&gt;), matching the design on fishshell.com.

       • <b>fish</b>  <b>--no-execute</b>  <b>will</b>  <b>no</b> <b>longer</b> <b>complain</b> <b>about</b> <b>unknown</b> <b>commands</b> or non-matching wildcards, as these
         could be defined differently at runtime (especially for functions). This makes it usable  as  a  static
         syntax checker (<u>#977</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/977</b>&gt;).

       • <b>string</b> <b>match</b> <b>--regex</b> now integrates <b>named</b> <b>PCRE2</b> <b>capture</b> <b>groups</b> <b>as</b> <b>fish</b> <b>variables</b>, allowing variables to
         be  set  directly  from <b>string</b> <b>match</b> (<u>#7459</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/7459</b>&gt;). To
         support this functionality, <b>string</b> is now a reserved word and can no longer be wrapped in a function.

       • Globs and other <b>expansions</b> <b>are</b> <b>limited</b> <b>to</b> <b>512,288</b> <b>results</b>  (<u>#7226</u>  &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/7226</b>&gt;). Because operating systems limit the number of arguments to commands, larger values
         are unlikely to work anyway, and this helps to avoid hangs.

       • A  new  <b>"fish</b>  <b>for</b>  <b>bash</b>  <b>users"</b> <b>documentation</b> <b>page</b> gives a quick overview of the scripting differences
         between  bash  and  fish  (<u>#2382</u>   &lt;<b>https://github.com/fish-shell/fish-shell/issues/2382</b>&gt;),   and   the
         completion  tutorial  has  also  been  moved out into its own document (<u>#6709</u> &lt;<b>https://github.com/fish-</b>
         <b>shell/fish-shell/issues/6709</b>&gt;).

   <b>Syntax</b> <b>changes</b> <b>and</b> <b>new</b> <b>commands</b>
       • Range limits in index range expansions like <b>$x[$start..$end]</b> may be omitted: <b>$start</b> and <b>$end</b> default to
         1 and -1 (the last item) respectively (<u>#6574</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/6574</b>&gt;):

            echo $var[1..]
            echo $var[..-1]
            echo $var[..]

         All print the full list <b>$var</b>.

       • When globbing, a segment which is exactly <b>**</b> may now match zero directories.  For  example  <b>**/foo</b>  may
         match <b>foo</b> in the current directory (<u>#7222</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/7222</b>&gt;).

   <b>Scripting</b> <b>improvements</b>
       • The  <b>type</b>, <b>_</b> (gettext), <b>.</b> (source) and <b>:</b> (no-op) functions are now implemented builtins for performance
         purposes (<u>#7342</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/7342</b>&gt;, <u>#7036</u> &lt;<b>https://github.com/fish-</b>
         <b>shell/fish-shell/issues/7036</b>&gt;, <u>#6854</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/6854</b>&gt;).

       • <b>set</b> and backgrounded jobs no longer overwrite <b>$pipestatus</b>  (<u>#6820</u>  &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/6820</b>&gt;),  improving  its  use  in  command  substitutions  (<u>#6998</u> &lt;<b>https://github.com/fish-</b>
         <b>shell/fish-shell/issues/6998</b>&gt;).

       • Computed ("electric") variables such as <b>status</b> are now only global in scope, so <b>set</b> <b>-Uq</b> <b>status</b>  returns
         false (<u>#7032</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/7032</b>&gt;).

       • The  output for <b>set</b> <b>--show</b> has been shortened, only mentioning the scopes in which a variable exists (‐
         <u>#6944</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/6944</b>&gt;).  In addition, it now shows if a variable
         is a path variable.

       • A new variable, <b>fish_kill_signal</b>, is set to the signal that terminated the last foreground job, or <b>0</b> if
         the  job   exited   normally   (<u>#6824</u>   &lt;<b>https://github.com/fish-shell/fish-shell/issues/6824</b>&gt;,   <u>#6822</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/6822</b>&gt;).

       • A    new   subcommand,   <b>string</b>   <b>pad</b>,   allows   extending   strings   to   a   given   width   (<u>#7340</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/7340</b>&gt;,   <u>#7102</u>    &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/7102</b>&gt;).

       • <b>string</b>   <b>sub</b>   has   a   new   <b>--end</b>   option   to   specify  the  end  index  of  a  substring  (<u>#6765</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/6765</b>&gt;,   <u>#5974</u>    &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/5974</b>&gt;).

       • <b>string</b>  <b>split</b>  has  a  new  <b>--fields</b>  option  to  specify  fields  to  output, similar to <b>cut</b> <b>-f</b> (<u>#6770</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/6770</b>&gt;).

       • <b>string</b> <b>trim</b> now  also  trims  vertical  tabs  by  default  (<u>#6795</u>  &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/6795</b>&gt;).

       • <b>string</b>  <b>replace</b>  no  longer prints an error if a capturing group wasn't matched, instead treating it as
         empty (<u>#7343</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/7343</b>&gt;).

       • <b>string</b> subcommands now quit early when used with  <b>--quiet</b>  (<u>#7495</u>  &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/7495</b>&gt;).

       • <b>string</b>  <b>repeat</b>  now  handles  multiple  arguments,  repeating each one (<u>#5988</u> &lt;<b>https://github.com/fish-</b>
         <b>shell/fish-shell/issues/5988</b>&gt;).

       • <b>printf</b> no longer prints an error if not given an argument (not even a format string).

       • The <b>true</b> and <b>false</b> builtins ignore any arguments, like other  shells  (<u>#7030</u>  &lt;<b>https://github.com/fish-</b>
         <b>shell/fish-shell/issues/7030</b>&gt;).

       • <b>fish_indent</b>  now removes unnecessary quotes in simple cases (<u>#6722</u> &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/6722</b>&gt;) and gained a <b>--check</b> option to just check if a file is  indented  correctly  (<u>#7251</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/7251</b>&gt;).

       • <b>fish_indent</b> indents continuation lines that follow a line ending in a backslash, <b>|</b>, <b>&amp;&amp;</b> or <b>||</b>.

       • <b>pushd</b>   only   adds   a   directory   to   the   stack   if   changing  to  it  was  successful  (<u>#6947</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/6947</b>&gt;).

       • A new <b>fish_job_summary</b> function is called  whenever  a  background  job  stops  or  ends,  or  any  job
         terminates   from   a   signal   (<u>#6959</u>  &lt;<b>https://github.com/fish-shell/fish-shell/issues/6959</b>&gt;,  <u>#2727</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/2727</b>&gt;,   <u>#4319</u>    &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/4319</b>&gt;).  The default behaviour can now be customized by redefining it.

       • <b>status</b> gained new <b>dirname</b> and <b>basename</b> convenience subcommands to get just the directory to the running
         script  or  the name of it, to simplify common tasks such as running <b>(dirname</b> <b>(status</b> <b>filename))</b> (<u>#7076</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/7076</b>&gt;,   <u>#1818</u>    &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/1818</b>&gt;).

       • Broken  pipelines are now handled more smoothly; in particular, bad redirection mid-pipeline results in
         the job continuing to run but with the broken file descriptor replaced with a closed  file  descriptor.
         This  allows  better  error  recovery  and  is  more  in  line  with  other  shells'  behaviour  (<u>#7038</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/7038</b>&gt;).

       • <b>jobs</b> <b>--quiet</b> <b>PID</b> no longer prints "no suitable job" if the job for PID does not  exist  (eg because  it
         has       finished)      (<u>#6809</u>      &lt;<b>https://github.com/fish-shell/fish-shell/issues/6809</b>&gt;,      <u>#6812</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/6812</b>&gt;).

       • <b>jobs</b>  now  shows  continued  child  processes  correctly  (<u>#6818</u>   &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/6818</b>&gt;)

       • <b>disown</b>  should no longer create zombie processes when job control is off, such as in <b>config.fish</b> (<u>#7183</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/7183</b>&gt;).

       • <b>command</b>, <b>jobs</b> and <b>type</b> builtins support <b>--query</b> as the long form of <b>-q</b>, matching other  builtins.   The
         long form <b>--quiet</b> is deprecated (<u>#7276</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/7276</b>&gt;).

       • <b>argparse</b>  no longer requires a short flag letter for long-only options (<u>#7585</u> &lt;<b>https://github.com/fish-</b>
         <b>shell/fish-shell/issues/7585</b>&gt;) and only prints a backtrace with invalid options to argparse  itself  (‐
         <u>#6703</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/6703</b>&gt;).

       • <b>argparse</b>  now passes the validation variables (e.g. <b>$_flag_value</b>) as local-exported variables, avoiding
         the need for <b>--no-scope-shadowing</b> in validation functions.

       • <b>complete</b> takes the first argument as the name of the command if the <b>--command</b>/<b>-c</b> option is not used, so
         <b>complete</b> <b>git</b> is treated like <b>complete</b> <b>--command</b> <b>git</b>,  and  it  can  show  the  loaded  completions  for
         specific    commands    with    <b>complete</b>    <b>COMMANDNAME</b>   (<u>#7321</u>   &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/7321</b>&gt;).

       • <b>set_color</b> <b>-b</b> (without  an  argument)  no  longer  prints  an  error  message,  matching  other  invalid
         invocations of this command (<u>#7154</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/7154</b>&gt;).

       • <b>exec</b>   no   longer   produces   a   syntax   error   when   the   command   cannot   be   found  (<u>#6098</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/6098</b>&gt;).

       • <b>set</b> <b>--erase</b> and <b>abbr</b> <b>--erase</b> can now erase multiple things in one go, matching <b>functions</b> <b>--erase</b> (<u>#7377</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/7377</b>&gt;).

       • <b>abbr</b> <b>--erase</b> no longer prints errors when used with no arguments or on  an  unset  abbreviation  (<u>#7376</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/7376</b>&gt;,    <u>#7732</u>   &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/7732</b>&gt;).

       • <b>test</b> <b>-t</b>, for testing whether file descriptors are connected to a terminal, works for  file  descriptors
         0,  1,  and  2  (<u>#4766</u>  &lt;<b>https://github.com/fish-shell/fish-shell/issues/4766</b>&gt;).   It  can still return
         incorrect results in other cases (<u>#1228</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/1228</b>&gt;).

       • Trying to  execute  scripts  with  Windows  line  endings  (CRLF)  produces  a  sensible  error  (<u>#2783</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/2783</b>&gt;).

       • Trying  to  execute  commands  with  arguments  that  exceed  the operating system limit now produces a
         specific error (<u>#6800</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/6800</b>&gt;).

       • An <b>alias</b> that delegates to a command with the same name no longer triggers  an  error  about  recursive
         completion (<u>#7389</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/7389</b>&gt;).

       • <b>math</b>   now   has   a   <b>--base</b>   option   to   output   the   result  in  hexadecimal  or  octal  (<u>#7496</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/7496</b>&gt;) and produces more specific  error  messages  (‐
         <u>#7508</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/7508</b>&gt;).

       • <b>math</b>  learned  bitwise  functions  <b>bitand</b>,  <b>bitor</b>  and  <b>bitxor</b>, used like <b>math</b> <b>"bitand(0xFE,</b> <b>5)"</b> (<u>#7281</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/7281</b>&gt;).

       • <b>math</b> learned tau for those who don't like typing "2 * pi".

       • Failed          redirections          will          now          set           <b>$status</b>           (<u>#7540</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/7540</b>&gt;).

       • fish  sets  exit  status  in  a  more consistent manner after errors, including invalid expansions like
         <b>$foo[</b>.

       • Using <b>read</b> <b>--silent</b> while fish is in private mode was adding these potentially-sensitive entries to the
         history; this has been fixed (<u>#7230</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/7230</b>&gt;).

       • <b>read</b> can now read interactively from other files, and can be used to read from the  terminal  via  <b>read</b>
         <b>&lt;/dev/tty</b>  (if  the  operating  system  provides  <b>/dev/tty</b>) (<u>#7358</u> &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/7358</b>&gt;).

       • A new <b>fish_status_to_signal</b> function for transforming exit statuses to signal names has been  added  (‐
         <u>#7597</u>     &lt;<b>https://github.com/fish-shell/fish-shell/issues/7597</b>&gt;,    <u>#7595</u>    &lt;<b>https://github.com/fish-</b>
         <b>shell/fish-shell/issues/7595</b>&gt;).

       • The  fallback  <b>realpath</b>  builtin  supports  the  <b>-s</b>/<b>--no-symlinks</b>  option,  like  GNU  realpath  (<u>#7574</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/7574</b>&gt;).

       • <b>functions</b> and <b>type</b> now explain when a function was defined via <b>source</b> instead of just saying <b>Defined</b> <b>in</b>
         <b>-</b>.

       • Significant performance improvements when globbing, appending to variables or in <b>math</b>.

       • <b>echo</b>  no  longer  interprets  options  at  the  beginning  of  an  argument  (eg  <b>echo</b> <b>"-n</b> <b>foo"</b>) (<u>#7614</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/7614</b>&gt;).

       • fish  now  finds  user  configuration  even  if  the  <b>HOME</b>  environment  variable  is  not  set  (<u>#7620</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/7620</b>&gt;).

       • fish  no  longer  crashes  when  started  from  a  Windows-style  working directory (eg <b>F:\path</b>) (<u>#7636</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/7636</b>&gt;).

       • <b>fish</b> <b>-c</b> now reads  the  remaining  arguments  into  <b>$argv</b>  (<u>#2314</u>  &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/2314</b>&gt;).

       • The  <b>pwd</b>  command supports the long options <b>--logical</b> and <b>--physical</b>, matching other implementations (‐
         <u>#6787</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/6787</b>&gt;).

       • <b>fish</b> <b>--profile</b> now only starts profiling after fish is ready to execute commands (all configuration  is
         completed).  There  is  a new <b>--profile-startup</b> option that only profiles the startup and configuration
         process (<u>#7648</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/7648</b>&gt;).

       • Builtins return a maximum exit status of 255, rather than potentially overflowing. In particular,  this
         affects  <b>exit</b>,  <b>return</b>,  <b>functions</b> <b>--query</b>, and <b>set</b> <b>--query</b> (<u>#7698</u> &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/7698</b>&gt;, <u>#7702</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/7702</b>&gt;).

       • It is no longer an error to run builtin with closed stdin. For example <b>count</b> <b>&lt;&amp;-</b> now prints 0,  instead
         of failing.

       • Blocks, functions, and builtins no longer permit redirecting to file descriptors other than 0 (standard
         input),  1  (standard output) and 2 (standard error). For example, <b>echo</b> <b>hello</b> <b>&gt;&amp;5</b> is now an error. This
         prevents corruption of internal state (<u>#3303</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/3303</b>&gt;).

   <b>Interactive</b> <b>improvements</b>
       • fish  will  now  always  attempt  to  become  process  group  leader   in   interactive   mode   (<u>#7060</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/7060</b>&gt;).    This   helps   avoid   hangs   in   certain
         circumstances,   and   allows   tmux's    current    directory    introspection    to    work    (<u>#5699</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/5699</b>&gt;).

       • The  interactive  reader  now  allows  ending  a  line  in  a  logical operators (<b>&amp;&amp;</b> and <b>||</b>) instead of
         complaining about a missing command. (This was already syntactically valid,  but  interactive  sessions
         didn't know about it yet).

       • The  prompt  is  reprinted  after  a  background  job exits (<u>#1018</u> &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/1018</b>&gt;).

       • fish no longer inserts a space after  a  completion  ending  in  <b>.</b>,  <b>,</b>  or  <b>-</b>  is  accepted,  improving
         completions  for  tools  that  provide  dynamic completions (<u>#6928</u> &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/6928</b>&gt;).

       • If a filename is invalid when first pressing <b>tab</b>, but becomes valid, it will be completed  properly  on
         the next attempt (<u>#6863</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/6863</b>&gt;).

       • <b>help</b>   <b>string</b>   <b>match/replace/&lt;subcommand&gt;</b>   will   show   the   help  for  string  subcommands  (<u>#6786</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/6786</b>&gt;).

       • <b>fish_key_reader</b>  sets  the  exit  status  to  0   when   used   with   <b>--help</b>   or   <b>--version</b>   (<u>#6964</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/6964</b>&gt;).

       • <b>fish_key_reader</b>  and  <b>fish_indent</b>  send  output  from <b>--version</b> to standard output, matching other fish
         binaries (<u>#6964</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/6964</b>&gt;).

       • A new variable <b>$status_generation</b> is incremented only when the previous command produces an exit status
         (<u>#6815</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/6815</b>&gt;). This can be used, for example, to check
         whether a failure status is a holdover due to a background job, or actually produced by  the  last  run
         command.

       • <b>fish_greeting</b>  is  now  a  function  that reads a variable of the same name, and defaults to setting it
         globally.  This removes a universal variable by default and helps with updating the greeting.  However,
         to  disable  the  greeting  it  is  now  necessary  to  explicitly  specify  universal  scope  (<b>set</b>  <b>-U</b>
         <b>fish_greeting</b>)   or   to   disable   it   in  config.fish  (<u>#7265</u>  &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/7265</b>&gt;).

       • Events are properly emitted  after  a  job  is  cancelled  (<u>#2356</u>  &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/2356</b>&gt;).

       • <b>fish_preexec</b>   and   <b>fish_postexec</b>   events   are   no  longer  triggered  for  empty  commands  (<u>#4829</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/4829</b>&gt;,   <u>#7085</u>    &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/7085</b>&gt;).

       • Functions  triggered  by the <b>fish_exit</b> event are correctly run when the terminal is closed or the shell
         receives SIGHUP (<u>#7014</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/7014</b>&gt;).

       • The <b>fish_prompt</b> event no longer fires when <b>read</b> is used. If you need a function to run any time <b>read</b> is
         invoked by a script, use the new <b>fish_read</b> event  instead  (<u>#7039</u>  &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/7039</b>&gt;).

       • A  new  <b>fish_posterror</b>  event is emitted when attempting to execute a command with syntax errors (<u>#6880</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/6880</b>&gt;,   <u>#6816</u>    &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/6816</b>&gt;).

       • The  debugging  system  has  now  fully  switched from the old numbered level to the new named category
         system introduced in 3.1. A number of new debugging categories have been added, including <b>config</b>, <b>path</b>,
         <b>reader</b> and <b>screen</b> (<u>#6511</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/6511</b>&gt;).  See  the  output  of
         <b>fish</b> <b>--print-debug-categories</b> for the full list.

       • The  warning  about read-only filesystems has been moved to a new "warning-path" debug category and can
         be disabled by setting a debug category of  <b>-warning-path</b>  (<u>#6630</u>  &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/6630</b>&gt;):

            fish --debug=-warning-path

       • The  enabled  debug  categories  are  now  printed  on  shell  startup (<u>#7007</u> &lt;<b>https://github.com/fish-</b>
         <b>shell/fish-shell/issues/7007</b>&gt;).

       • The <b>-o</b> short option to fish, for <b>--debug-output</b>, works correctly instead of producing an invalid option
         error (<u>#7254</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/7254</b>&gt;).

       • fish's debugging can now also be enabled via <b>FISH_DEBUG</b> and  <b>FISH_DEBUG_OUTPUT</b>  environment  variables.
         This  helps  with  debugging  when  no commandline options can be passed, like when fish is called in a
         shebang (<u>#7359</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/7359</b>&gt;).

       • Abbreviations are now expanded after all command terminators (eg <b>;</b> or <b>|</b>), not just space,  as  in  fish
         2.7.1  and  before  (<u>#6970</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/6970</b>&gt;), and after closing a
         command substitution (<u>#6658</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/6658</b>&gt;).

       • The  history  file  is  now  created  with  user-private  permissions,  matching  other  shells  (<u>#6926</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/6926</b>&gt;).  The directory containing the history file was
         already private, so there should not have been any private data revealed.

       • The output of <b>time</b> is now properly aligned in  all  cases  (<u>#6726</u>  &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/6726</b>&gt;, <u>#6714</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/6714</b>&gt;) and no longer depends
         on locale (<u>#6757</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/6757</b>&gt;).

       • The  command-not-found  handling  has  been  simplified.   When  it can't find a command, fish now just
         executes a function called <b>fish_command_not_found</b> instead of firing  an  event,  making  it  easier  to
         replace  and  reason  about.   Previously-defined  <b>__fish_command_not_found_handler</b>  functions  with an
         appropriate   event   listener   will   still    work    (<u>#7293</u>    &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/7293</b>&gt;).

       • <b>ctrl-c</b> handling has been reimplemented in C++ and is therefore quicker (<u>#5259</u> &lt;<b>https://github.com/fish-</b>
         <b>shell/fish-shell/issues/5259</b>&gt;),  no  longer  occasionally  prints  an  "unknown  command"  error (<u>#7145</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/7145</b>&gt;)  or   overwrites   multiline   prompts   (<u>#3537</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/3537</b>&gt;).

       • <b>ctrl-c</b>  no  longer kills background jobs for which job control is disabled, matching POSIX semantics (‐
         <u>#6828</u>    &lt;<b>https://github.com/fish-shell/fish-shell/issues/6828</b>&gt;,    <u>#6861</u>     &lt;<b>https://github.com/fish-</b>
         <b>shell/fish-shell/issues/6861</b>&gt;).

       • Autosuggestions   work   properly   after   <b>ctrl-c</b>   cancels   the   current   commmand   line   (<u>#6937</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/6937</b>&gt;).

       • History search is now case-insensitive unless the search string contains an uppercase character  (<u>#7273</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/7273</b>&gt;).

       • <b>fish_update_completions</b>  gained  a new <b>--keep</b> option, which improves speed by skipping completions that
         already      exist      (<u>#6775</u>      &lt;<b>https://github.com/fish-shell/fish-shell/issues/6775</b>&gt;,       <u>#6796</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/6796</b>&gt;).

       • Aliases   containing   an   embedded   backslash   appear  properly  in  the  output  of  <b>alias</b>  (<u>#6910</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/6910</b>&gt;).

       • <b>open</b> no longer hangs indefinitely on certain systems, as a bug in <b>xdg-open</b> has been  worked  around  (‐
         <u>#7215</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/7215</b>&gt;).

       • Long  command  lines  no  longer  add  a  blank  line  after execution (<u>#6826</u> &lt;<b>https://github.com/fish-</b>
         <b>shell/fish-shell/issues/6826</b>&gt;)  and  behave  better  with  <b>backspace</b>  (<u>#6951</u>  &lt;<b>https://github.com/fish-</b>
         <b>shell/fish-shell/issues/6951</b>&gt;).

       • <b>functions</b>  <b>-t</b>  works like the long option <b>--handlers-type</b>, as documented, instead of producing an error
         (<u>#6985</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/6985</b>&gt;).

       • History search now flashes when it found no more  results  (<u>#7362</u>  &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/7362</b>&gt;)

       • fish  now  creates  the  path  in the environment variable <b>XDG_RUNTIME_DIR</b> if it does not exist, before
         using it for runtime data storage (<u>#7335</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/7335</b>&gt;).

       • <b>set_color</b> <b>--print-colors</b> now also respects the bold, dim, underline,  reverse,  italic  and  background
         modifiers, to better show their effect (<u>#7314</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/7314</b>&gt;).

       • The  fish  Web  configuration  tool  (<b>fish_config</b>) shows prompts correctly on Termux for Android (<u>#7298</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/7298</b>&gt;)  and  detects  Windows  Services  for  Linux  2
         properly (<u>#7027</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/7027</b>&gt;). It no longer shows the <b>history</b>
         variable  as  it  may be too large (one can use the History tab instead). It also starts the browser in
         another thread, avoiding hangs in some circumstances, especially with Firefox's  Developer  Edition  (‐
         <u>#7158</u>  &lt;<b>https://github.com/fish-shell/fish-shell/issues/7158</b>&gt;).  Finally,  a bug in the Source Code Pro
         font  may  cause  browsers  to  hang,  so  this  font  is  no   longer   chosen   by   default   (<u>#7714</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/7714</b>&gt;).

       • <b>funcsave</b>  gained  a  new  <b>--directory</b>  option  to  specify  the  location  of the saved function (<u>#7041</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/7041</b>&gt;).

       • <b>help</b> works properly on MSYS2 (<u>#7113</u>  &lt;<b>https://github.com/fish-shell/fish-shell/issues/7113</b>&gt;)  and  only
         uses <b>cmd.exe</b> if running on WSL (<u>#6797</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/6797</b>&gt;).

       • Resuming  a  piped  job  by  its  number,  like <b>fg</b> <b>%1</b>, works correctly (<u>#7406</u> &lt;<b>https://github.com/fish-</b>
         <b>shell/fish-shell/issues/7406</b>&gt;). Resumed jobs show the correct title in  the  terminal  emulator  (<u>#7444</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/7444</b>&gt;).

       • Commands   run   from   key   bindings   now   use  the  same  TTY  modes  as  normal  commands  (<u>#7483</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/7483</b>&gt;).

       • Autosuggestions  from  history  are  now  case-sensitive  (<u>#3978</u>   &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/3978</b>&gt;).

       • <b>$status</b>  from  completion  scripts  is  no longer passed outside the completion, which keeps the status
         display in  the  prompt  as  the  last  command's  status  (<u>#7555</u>  &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/7555</b>&gt;).

       • Updated localisations for pt_BR (<u>#7480</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/7480</b>&gt;).

       • <b>fish_trace</b>  output  now  starts  with  <b>-&gt;</b>  (like  <b>fish</b> <b>--profile</b>), making the depth more visible (<u>#7538</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/7538</b>&gt;).

       • Resizing the terminal window no longer produces a  corrupted  prompt  (<u>#6532</u>  &lt;<b>https://github.com/fish-</b>
         <b>shell/fish-shell/issues/6532</b>&gt;, <u>#7404</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/7404</b>&gt;).

       • <b>functions</b>   produces   an   error   rather   than   crashing   on   certain  invalid  arguments  (<u>#7515</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/7515</b>&gt;).

       • A  crash  in  completions  with  inline  variable  assignment  (eg  <b>A=</b>  <b>b</b>)  has   been   fixed   (<u>#7344</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/7344</b>&gt;).

       • <b>fish_private_mode</b>  may now be changed dynamically using <b>set</b> (<u>#7589</u> &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/7589</b>&gt;), and history is kept in memory in private mode (but not stored permanently)  (<u>#7590</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/7590</b>&gt;).

       • Commands  with  leading  spaces may be retrieved from history with up-arrow until a new command is run,
         matching zsh's <b>HIST_IGNORE_SPACE</b> (<u>#1383</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/1383</b>&gt;).

       • Importing bash  history  or  reporting  errors  with  recursive  globs  (<b>**</b>)  no  longer  hangs  (<u>#7407</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/7407</b>&gt;,    <u>#7497</u>   &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/7497</b>&gt;).

       • <b>bind</b> now shows <b>\x7f</b> for the del key instead of a literal DEL character (<u>#7631</u> &lt;<b>https://github.com/fish-</b>
         <b>shell/fish-shell/issues/7631</b>&gt;)

       • Paths containing variables or tilde expansion are only suggested  when  they  are  still  valid  (<u>#7582</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/7582</b>&gt;).

       • Syntax   highlighting   can   now   color  a  command  as  invalid  even  if  executed  quickly  (<u>#5912</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/5912</b>&gt;).

       • Redirection targets are no longer highlighted as error if they contain variables which will  likely  be
         defined by the current commandline (<u>#6654</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/6654</b>&gt;).

       • fish  is  now  more resilient against broken terminal modes (<u>#7133</u> &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/7133</b>&gt;, <u>#4873</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/4873</b>&gt;).

       • fish handles being in control of the TTY without owning its own process  group  better,  avoiding  some
         hangs in special configurations (<u>#7388</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/7388</b>&gt;).

       • Keywords  can now be colored differently by setting the <b>fish_color_keyword</b> variable (<b>fish_color_command</b>
         is used as a fallback) (<u>#7678</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/7678</b>&gt;).

       • Just like <b>fish_indent</b>, the interactive reader will indent continuation lines that follow a line  ending
         in a backslash, <b>|</b>, <b>&amp;&amp;</b> or <b>||</b> (<u>#7694</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/7694</b>&gt;).

       • Commands  with a trailing escaped space are saved in history correctly (<u>#7661</u> &lt;<b>https://github.com/fish-</b>
         <b>shell/fish-shell/issues/7661</b>&gt;).

       • <b>fish_prompt</b> no longer mangles  Unicode  characters  in  the  private-use  range  U+F600-U+F700.  (<u>#7723</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/7723</b>&gt;).

       • The  universal  variable file, <b>fish_variables</b>, can be made a symbolic link without it being overwritten
         (<u>#7466</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/7466</b>&gt;).

       • fish  is  now  more  resilient  against  <b>mktemp</b>  failing  (<u>#7482</u>   &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/7482</b>&gt;).

   <b>New</b> <b>or</b> <b>improved</b> <b>bindings</b>
       • As mentioned above, new special input functions <b>undo</b> (<b>ctrl-_</b> or <b>ctrl-z</b>) and <b>redo</b> (<b>alt-/</b>) can be used to
         revert  changes  to  the  command  line  or  the  pager  search  field (<u>#6570</u> &lt;<b>https://github.com/fish-</b>
         <b>shell/fish-shell/issues/6570</b>&gt;).

       • <b>ctrl-z</b> is now available for binding (<u>#7152</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/7152</b>&gt;).

       • Additionally, using the <b>cancel</b> special input function (bound to <b>escape</b> by  default)  right  after  fish
         picked   an   unambiguous   completion   will  undo  that  (<u>#7433</u>  &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/7433</b>&gt;).

       • <b>fish_clipboard_paste</b> (<b>ctrl-v</b>) trims indentation from multiline commands, because fish  already  indents
         (<u>#7662</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/7662</b>&gt;).

       • Vi mode bindings now support <b>dh</b>, <b>dl</b>, <b>c0</b>, <b>cf</b>, <b>ct</b>, <b>cF</b>, <b>cT</b>, <b>ch</b>, <b>cl</b>, <b>y0</b>, <b>ci</b>, <b>ca</b>, <b>yi</b>, <b>ya</b>, <b>di</b>, <b>da</b>, <b>d;</b>, <b>d,</b>, <b>o</b>,
         <b>O</b>   and  Control+left/right  keys  to  navigate  by  word  (<u>#6648</u>  &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/6648</b>&gt;,      <u>#6755</u>      &lt;<b>https://github.com/fish-shell/fish-shell/issues/6755</b>&gt;,       <u>#6769</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/6769</b>&gt;,    <u>#7442</u>   &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/7442</b>&gt;, <u>#7516</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/7516</b>&gt;).

       • Vi  mode  bindings  support  <b>~</b>  (tilde)  to  toggle  the  case  of  the   selected   character   (<u>#6908</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/6908</b>&gt;).

       • Functions  <b>up-or-search</b>  and  <b>down-or-search</b>  (<b>up</b>  and  <b>down</b>) can cross empty lines, and don't activate
         search mode if the search fails, which makes  them  easier  to  use  to  move  between  lines  in  some
         situations.

       • If  history  search  fails  to  find  a  match,  the  cursor  is  no  longer moved. This is useful when
         accidentally starting a history search on a multi-line commandline.

       • The special input function <b>beginning-of-history</b> (<b>pageup</b>) now moves to the oldest search instead of  the
         youngest - that's <b>end-of-history</b> (<b>pagedown</b>).

       • A  new  special  input  function  <b>forward-single-char</b>  moves  one  character  to  the  right, and if an
         autosuggestion is available, only take a single  character  from  it  (<u>#7217</u>  &lt;<b>https://github.com/fish-</b>
         <b>shell/fish-shell/issues/7217</b>&gt;, <u>#4984</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/4984</b>&gt;).

       • Special  input  functions  can  now  be  joined with <b>or</b> as a modifier (adding to <b>and</b>), though only some
         commands  set  an  exit  status  (<u>#7217</u>  &lt;<b>https://github.com/fish-shell/fish-shell/issues/7217</b>&gt;).  This
         includes   <b>suppress-autosuggestion</b>   to   reflect  whether  an  autosuggestion  was  suppressed  (<u>#1419</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/1419</b>&gt;)

       • A new function <b>__fish_preview_current_file</b>, bound to <b>alt-o</b>, opens the current file at the cursor  in  a
         pager  (<u>#6838</u>  &lt;<b>https://github.com/fish-shell/fish-shell/issues/6838</b>&gt;,  <u>#6855</u> &lt;<b>https://github.com/fish-</b>
         <b>shell/fish-shell/issues/6855</b>&gt;).

       • <b>edit_command_buffer</b> (<b>alt-e</b> and <b>alt-v</b>) passes the cursor position to the external editor if  the  editor
         is       recognized      (<u>#6138</u>      &lt;<b>https://github.com/fish-shell/fish-shell/issues/6138</b>&gt;,      <u>#6954</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/6954</b>&gt;).

       • <b>__fish_prepend_sudo</b> (<b>alt-s</b>) now  toggles  a  <b>sudo</b>  prefix  (<u>#7012</u>  &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/7012</b>&gt;)   and   avoids  shifting  the  cursor  (<u>#6542</u>  &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/6542</b>&gt;).

       • <b>__fish_prepend_sudo</b> (<b>alt-s</b>) now uses the previous commandline if the current one is empty, to  simplify
         rerunning           the           previous          command          with          <b>sudo</b>          (<u>#7079</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/7079</b>&gt;).

       • <b>__fish_toggle_comment_commandline</b> (<b>alt-#</b>) now uncomments and presents the last comment from history  if
         the commandline is empty (<u>#7137</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/7137</b>&gt;).

       • <b>__fish_whatis_current_token</b>   (<b>alt-w</b>)   prints   descriptions   for   functions   and  builtins  (<u>#7191</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/7191</b>&gt;,   <u>#2083</u>    &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/2083</b>&gt;).

       • The definition of "word" and "bigword" for movements was refined, fixing (eg) vi mode's behavior with <b>e</b>
         on  the  second-to-last  char,  and  bigword's  behavior  with  single-character  words  and  non-blank
         non-graphical   characters   (<u>#7353</u>    &lt;<b>https://github.com/fish-shell/fish-shell/issues/7353</b>&gt;,    <u>#7354</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/7354</b>&gt;,    <u>#4025</u>   &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/4025</b>&gt;,      <u>#7328</u>      &lt;<b>https://github.com/fish-shell/fish-shell/issues/7328</b>&gt;,       <u>#7325</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/7325</b>&gt;)

       • fish's  clipboard  bindings now also support Windows Subsystem for Linux via PowerShell and clip.exe (‐
         <u>#7455</u>    &lt;<b>https://github.com/fish-shell/fish-shell/issues/7455</b>&gt;,    <u>#7458</u>     &lt;<b>https://github.com/fish-</b>
         <b>shell/fish-shell/issues/7458</b>&gt;) and will properly copy newlines in multi-line commands.

       • Using the <b>*-jump</b> special input functions before typing anything else no longer crashes fish.

       • Completing variable overrides (<b>foo=bar</b>) could replace the entire thing with just the completion in some
         circumstances. This has been fixed (<u>#7398</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/7398</b>&gt;).

   <b>Improved</b> <b>prompts</b>
       • The  default  and  example  prompts print the correct exit status for commands prefixed with <b>not</b> (<u>#6566</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/6566</b>&gt;).

       • git prompts include all untracked files in the repository, not just those in the current  directory  (‐
         <u>#6086</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/6086</b>&gt;).

       • The   git   prompts   correctly   show   stash   states   (<u>#6876</u>   &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/6876</b>&gt;, <u>#7136</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/7136</b>&gt;) and clean  states  (‐
         <u>#7471</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/7471</b>&gt;).

       • The  Mercurial  prompt  correctly  shows  untracked  status (<u>#6906</u> &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/6906</b>&gt;), and by default only shows the branch for  performance  reasons.   A  new  variable
         <b>$fish_prompt_hg_show_informative_status</b> can be set to enable more information.

       • The   <b>fish_vcs_prompt</b>   passes  its  arguments  to  the  various  VCS  prompts  that  it  calls  (<u>#7033</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/7033</b>&gt;).

       • The Subversion prompt was  broken  in  a  number  of  ways  in  3.1.0  and  has  been  restored  (<u>#6715</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/6715</b>&gt;,    <u>#7278</u>   &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/7278</b>&gt;).

       • A  new  helper  function  <b>fish_is_root_user</b>  simplifies  checking  for   superuser   privilege   (<u>#7031</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/7031</b>&gt;,    <u>#7123</u>   &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/7123</b>&gt;).

       • New colorschemes - <b>ayu</b> <b>Light</b>, <b>ayu</b>  <b>Dark</b>  and  <b>ayu</b>  <b>Mirage</b>  (<u>#7596</u>  &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/7596</b>&gt;).

       • Bugs  related  to  multiline  prompts, including repainting (<u>#5860</u> &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/5860</b>&gt;)  or  navigating  directory  history   (<u>#3550</u>   &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/3550</b>&gt;) leading to graphical glitches have been fixed.

       • The        <b>nim</b>        prompt        now        handles        vi        mode        better       (<u>#6802</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/6802</b>&gt;)

   <b>Improved</b> <b>terminal</b> <b>support</b>
       • A new variable, <b>fish_vi_force_cursor</b>, can be set to force <b>fish_vi_cursor</b> to attempt changing the cursor
         shape         in         vi         mode,         regardless         of         terminal         (<u>#6968</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/6968</b>&gt;).  The  <b>fish_vi_cursor</b>  option <b>--force-iterm</b> has
         been deprecated.

       • <b>diff</b>  will   now   colourize   output,   if   supported   (<u>#7308</u>   &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/7308</b>&gt;).

       • Autosuggestions  appear  when  the  cursor  passes  the  right  prompt (<u>#6948</u> &lt;<b>https://github.com/fish-</b>
         <b>shell/fish-shell/issues/6948</b>&gt;) or wraps to the next  line  (<u>#7213</u>  &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/7213</b>&gt;).

       • The  cursor  shape  in  Vi  mode  changes properly in Windows Terminal (<u>#6999</u> &lt;<b>https://github.com/fish-</b>
         <b>shell/fish-shell/issues/6999</b>&gt;, <u>#6478</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/6478</b>&gt;).

       • The  spurious  warning  about  terminal   size   in   small   terminals   has   been   removed   (<u>#6980</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/6980</b>&gt;).

       • Dynamic   titles   are   now   enabled   in   Alacritty   (<u>#7073</u>   &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/7073</b>&gt;) and emacs' vterm (<u>#7122</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/7122</b>&gt;).

       • Current working directory updates  are  enabled  in  foot  (<u>#7099</u>  &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/7099</b>&gt;) and WezTerm (<u>#7649</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/7649</b>&gt;).

       • The  width  computation  for  certain  emoji  agrees  better  with terminals (especially flags). (<u>#7237</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/7237</b>&gt;).

       • Long command lines are wrapped in all cases, instead of sometimes  being  put  on  a  new  line  (<u>#5118</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/5118</b>&gt;).

       • The  pager  is  properly  rendered  with  long  command lines selected (<u>#2557</u> &lt;<b>https://github.com/fish-</b>
         <b>shell/fish-shell/issues/2557</b>&gt;).

       • Sessions with right prompts can be resized correctly  in  terminals  that  handle  reflow,  like  GNOME
         Terminal  (and  other VTE-based terminals), upcoming Konsole releases and Alacritty. This detection can
         be overridden with the  new  <b>fish_handle_reflow</b>  variable  (<u>#7491</u>  &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/7491</b>&gt;).

       • fish  now  sets terminal modes sooner, which stops output from appearing before the greeting and prompt
         are ready (<u>#7489</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/7489</b>&gt;).

       • Better detection of new Konsole versions for true color support and cursor shape changing.

       • fish no longer attempts to modify the terminal size via <b>TIOCSWINSZ</b>, improving compatibility with  Kitty
         (<u>#6994</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/6994</b>&gt;).

   <b>Completions</b>
       • Added completions for

         • <b>7z</b>, <b>7za</b> and <b>7zr</b> (<u>#7220</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/7220</b>&gt;)

         • <b>alias</b> (<u>#7035</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/7035</b>&gt;)

         • <b>alternatives</b> (<u>#7616</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/7616</b>&gt;)

         • <b>apk</b> (<u>#7108</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/7108</b>&gt;)

         • <b>asciidoctor</b> (<u>#7000</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/7000</b>&gt;)

         • <b>avifdec</b> and <b>avifenc</b> (<u>#7674</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/7674</b>&gt;)

         • <b>bluetoothctl</b> (<u>#7438</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/7438</b>&gt;)

         • <b>cjxl</b> and <b>djxl</b> (<u>#7673</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/7673</b>&gt;)

         • <b>cmark</b> (<u>#7000</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/7000</b>&gt;)

         • <b>create_ap</b> (<u>#7096</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/7096</b>&gt;)

         • <b>deno</b> (<u>#7138</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/7138</b>&gt;)

         • <b>dhclient</b> (<u>#6684</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/6684</b>&gt;)

         • Postgres-related   commands   <b>dropdb</b>,   <b>createdb</b>,   <b>pg_restore</b>,   <b>pg_dump</b>   and   <b>pg_dumpall</b>   (<u>#6620</u>
           &lt;<b>https://github.com/fish-shell/fish-shell/issues/6620</b>&gt;)

         • <b>dotnet</b> (<u>#7558</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/7558</b>&gt;)

         • <b>downgrade</b> (<u>#6751</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/6751</b>&gt;)

         • <b>gapplication</b>, <b>gdbus</b>, <b>gio</b> and <b>gresource</b> (<u>#7300</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/7300</b>&gt;)

         • <b>gh</b> (<u>#7112</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/7112</b>&gt;)

         • <b>gitk</b>

         • <b>groups</b> (<u>#6889</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/6889</b>&gt;)

         • <b>hashcat</b> (<u>#7746</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/7746</b>&gt;)

         • <b>hikari</b> (<u>#7083</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/7083</b>&gt;)

         • <b>icdiff</b> (<u>#7503</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/7503</b>&gt;)

         • <b>imv</b> (<u>#6675</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/6675</b>&gt;)

         • <b>john</b> (<u>#7746</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/7746</b>&gt;)

         • <b>julia</b> (<u>#7468</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/7468</b>&gt;)

         • <b>k3d</b> (<u>#7202</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/7202</b>&gt;)

         • <b>ldapsearch</b> (<u>#7578</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/7578</b>&gt;)

         • <b>lightdm</b> and <b>dm-tool</b> (<u>#7624</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/7624</b>&gt;)

         • <b>losetup</b> (<u>#7621</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/7621</b>&gt;)

         • <b>micro</b> (<u>#7339</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/7339</b>&gt;)

         • <b>mpc</b> (<u>#7169</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/7169</b>&gt;)

         • Metasploit's   <b>msfconsole</b>,   <b>msfdb</b>   and   <b>msfvenom</b>    (<u>#6930</u>    &lt;<b>https://github.com/fish-shell/fish-</b>
           <b>shell/issues/6930</b>&gt;)

         • <b>mtr</b> (<u>#7638</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/7638</b>&gt;)

         • <b>mysql</b> (<u>#6819</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/6819</b>&gt;)

         • <b>ncat</b>,    <b>nc.openbsd</b>,    <b>nc.traditional</b>    and    <b>nmap</b>   (<u>#6873</u>   &lt;<b>https://github.com/fish-shell/fish-</b>
           <b>shell/issues/6873</b>&gt;)

         • <b>openssl</b> (<u>#6845</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/6845</b>&gt;)

         • <b>prime-run</b> (<u>#7241</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/7241</b>&gt;)

         • <b>ps2pdf{12,13,14,wr}</b> (<u>#6673</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/6673</b>&gt;)

         • <b>pyenv</b> (<u>#6551</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/6551</b>&gt;)

         • <b>rst2html</b>, <b>rst2html4</b>,  <b>rst2html5</b>,  <b>rst2latex</b>,  <b>rst2man</b>,  <b>rst2odt</b>,  <b>rst2pseudoxml</b>,  <b>rst2s5</b>,  <b>rst2xetex</b>,
           <b>rst2xml</b> and <b>rstpep2html</b> (<u>#7019</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/7019</b>&gt;)

         • <b>spago</b> (<u>#7381</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/7381</b>&gt;)

         • <b>sphinx-apidoc</b>,  <b>sphinx-autogen</b>,  <b>sphinx-build</b>  and <b>sphinx-quickstart</b> (<u>#7000</u> &lt;<b>https://github.com/fish-</b>
           <b>shell/fish-shell/issues/7000</b>&gt;)

         • <b>strace</b> (<u>#6656</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/6656</b>&gt;)

         • systemd's   <b>bootctl</b>,    <b>coredumpctl</b>,    <b>hostnamectl</b>    (<u>#7428</u>    &lt;<b>https://github.com/fish-shell/fish-</b>
           <b>shell/issues/7428</b>&gt;),    <b>homectl</b>    (<u>#7435</u>    &lt;<b>https://github.com/fish-shell/fish-shell/issues/7435</b>&gt;),
           <b>networkctl</b>  (<u>#7668</u>  &lt;<b>https://github.com/fish-shell/fish-shell/issues/7668</b>&gt;)  and   <b>userdbctl</b>   (<u>#7667</u>
           &lt;<b>https://github.com/fish-shell/fish-shell/issues/7667</b>&gt;)

         • <b>tcpdump</b> (<u>#6690</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/6690</b>&gt;)

         • <b>tig</b>

         • <b>traceroute</b> and <b>tracepath</b> (<u>#6803</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/6803</b>&gt;)

         • <b>windscribe</b> (<u>#6788</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/6788</b>&gt;)

         • <b>wireshark</b>, <b>tshark</b>, and <b>dumpcap</b>

         • <b>xbps-*</b> (<u>#7239</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/7239</b>&gt;)

         • <b>xxhsum</b>,    <b>xxh32sum</b>,    <b>xxh64sum</b>    and    <b>xxh128sum</b>    (<u>#7103</u>   &lt;<b>https://github.com/fish-shell/fish-</b>
           <b>shell/issues/7103</b>&gt;)

         • <b>yadm</b> (<u>#7100</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/7100</b>&gt;)

         • <b>zopfli</b> and <b>zopflipng</b> (<u>#6872</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/6872</b>&gt;)

       • Lots of improvements to completions, including:

         • <b>git</b> completions can  complete  the  right  and  left  parts  of  a  commit  range  like  <b>from..to</b>  or
           <b>left...right</b>.

         • Completion  scripts  for custom Git subcommands like <b>git-xyz</b> are now loaded with Git completions. The
           completions can now be defined directly on the subcommand (using <b>complete</b>  <b>git-xyz</b>),  and  completion
           for   <b>git</b>   <b>xyz</b>   will  work.  (<u>#7075</u>  &lt;<b>https://github.com/fish-shell/fish-shell/issues/7075</b>&gt;,  <u>#7652</u>
           &lt;<b>https://github.com/fish-shell/fish-shell/issues/7652</b>&gt;,  <u>#4358</u>   &lt;<b>https://github.com/fish-shell/fish-</b>
           <b>shell/issues/4358</b>&gt;)

         • <b>make</b> completions no longer second-guess make's file detection, fixing target completion in some cases
           (<u>#7535</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/7535</b>&gt;).

         • Command  completions  now correctly print the description even if the command was fully matched (like
           in <b>ls&lt;TAB&gt;</b>).

         • <b>set</b> completions no longer hide variables starting with <b>__</b>, they are sorted last instead.

       • Improvements to  the  manual  page  completion  generator  (<u>#7086</u>  &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/7086</b>&gt;,       <u>#6879</u>      &lt;<b>https://github.com/fish-shell/fish-shell/issues/6879</b>&gt;,      <u>#7187</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/7187</b>&gt;).

       • Significant   performance   improvements   to   completion   of   the   available    commands    (<u>#7153</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/7153</b>&gt;),  especially on macOS Big Sur where there was a
         significant    regression    (<u>#7365</u>    &lt;<b>https://github.com/fish-shell/fish-shell/issues/7365</b>&gt;,    <u>#7511</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/7511</b>&gt;).

       • Suffix  completion  using  <b>__fish_complete_suffix</b>  uses  the  same  fuzzy matching logic as normal file
         completion,  and  completes  any  file  but   sorts   files   with   matching   suffix   first   (<u>#7040</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/7040</b>&gt;,    <u>#7547</u>   &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/7547</b>&gt;). Previously, it only completed files with matching suffix.

   <b>For</b> <b>distributors</b>
       • fish has a new interactive test driver based on pexpect, removing the  optional  dependency  on  expect
         (and   adding   an   optional   dependency   on  pexpect)  (<u>#5451</u>  &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/5451</b>&gt;, <u>#6825</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/6825</b>&gt;).

       • The CHANGELOG was moved to restructured text, allowing it to be included in  the  documentation  (<u>#7057</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/7057</b>&gt;).

       • fish  handles  ncurses  installed  in  a  non-standard  prefix  better (<u>#6600</u> &lt;<b>https://github.com/fish-</b>
         <b>shell/fish-shell/issues/6600</b>&gt;, <u>#7219</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/7219</b>&gt;), and  uses
         variadic tparm on NetBSD curses (<u>#6626</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/6626</b>&gt;).

       • The   Web-based   configuration   tool   no   longer   uses   an   obsolete   Angular   version  (<u>#7147</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/7147</b>&gt;).

       • The fish project has adopted the Contributor Covenant code of conduct (<u>#7151</u>  &lt;<b>https://github.com/fish-</b>
         <b>shell/fish-shell/issues/7151</b>&gt;).

   <b>Deprecations</b> <b>and</b> <b>removed</b> <b>features</b>
       • The  <b>fish_color_match</b>  variable  is  no  longer used. (Previously this controlled the color of matching
         quotes and parens when using <b>read</b>).

       • fish 3.2.0 will be the last release in which the redirection to standard error with the <b>^</b> character  is
         enabled.  The <b>stderr-nocaret</b> feature flag will be changed to "on" in future releases.

       • <b>string</b> is now a reserved word and cannot be used for function names (see above).

       • <b>fish_vi_cursor</b>'s option <b>--force-iterm</b> has been deprecated (see above).

       • <b>command</b>, <b>jobs</b> and <b>type</b> long-form option <b>--quiet</b> is deprecated in favor of <b>--query</b> (see above).

       • The  <b>fish_command_not_found</b>  event  is no longer emitted, instead there is a function of that name.  By
         default it will call a previously-defined <b>__fish_command_not_found_handler</b>. To emit the event  manually
         use <b>emit</b> <b>fish_command_not_found</b>.

       • The <b>fish_prompt</b> event no longer fires when <b>read</b> is used. If you need a function to run any time <b>read</b> is
         invoked  by  a  script, use the new <b>fish_read</b> event instead (<u>#7039</u> &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/7039</b>&gt;).

       • To disable the greeting message permanently it is no  longer  enough  to  just  run  <b>set</b>  <b>fish_greeting</b>
         interactively  as  it is no longer implicitly a universal variable. Use <b>set</b> <b>-U</b> <b>fish_greeting</b> or disable
         it in config.fish with <b>set</b> <b>-g</b> <b>fish_greeting</b>.

       • The long-deprecated and non-functional <b>-m</b>/<b>--read-mode</b> options to <b>read</b> were removed in 3.1b1. Using  the
         short  form,  or a never-implemented <b>-B</b> option, no longer crashes fish (<u>#7659</u> &lt;<b>https://github.com/fish-</b>
         <b>shell/fish-shell/issues/7659</b>&gt;).

       • With the addition of new categories for debug options, the old  numbered  debugging  levels  have  been
         removed.

   <b>For</b> <b>distributors</b> <b>and</b> <b>developers</b>
       • fish    source    tarballs   are   now   distributed   using   the   XZ   compression   method   (<u>#5460</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/5460</b>&gt;).

       • The fish source tarball contains an example FreeDesktop entry and icon.

       • The  CMake  variable  <b>MAC_CODESIGN_ID</b>  can  now  be  set  to  "off"  to  disable  code-signing   (<u>#6952</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/6952</b>&gt;,    <u>#6792</u>   &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/6792</b>&gt;).

       • Building on on macOS  earlier  than  10.13.6  succeeds,  instead  of  failing  on  code-signing  (<u>#6791</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/6791</b>&gt;).

       • The pkg-config file now uses variables to ensure paths used are portable across prefixes.

       • The  default  values for the <b>extra_completionsdir</b>, <b>extra_functionsdir</b> and <b>extra_confdir</b> options now use
         the  installation   prefix   rather   than   <b><a href="file:/usr/local">/usr/local</a></b>   (<u>#6778</u>   &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/6778</b>&gt;).

       • A  new  CMake  variable  <b>FISH_USE_SYSTEM_PCRE2</b>  controls  whether fish builds with the system-installed
         PCRE2, or the version it bundles. By default it prefers the system library  if  available,  unless  Mac
         codesigning is enabled (<u>#6952</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/6952</b>&gt;).

       • Running  the  full  interactive  test  suite  now  requires  Python 3.5+ and the pexpect package (<u>#6825</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/6825</b>&gt;); the expect package is no longer required.

       • Support for Python 2 in fish's tools (<b>fish_config</b> and the  manual  page  completion  generator)  is  no
         longer   guaranteed.  Please  use  Python  3.5  or  later  (<u>#6537</u>  &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/6537</b>&gt;).

       • The Web-based configuration tool is  compatible  with  Python  3.10   (<u>#7600</u>  &lt;<b>https://github.com/fish-</b>
         <b>shell/fish-shell/issues/7600</b>&gt;)   and   no   longer   requires   Python's   distutils   package   (<u>#7514</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/7514</b>&gt;).

       • fish 3.2 is the last release to support Red Hat Enterprise Linux &amp; CentOS version 6.

                                                         ----

   <b>fish</b> <b>3.1.2</b> <b>(released</b> <b>April</b> <b>29,</b> <b>2020)</b>
       This release of fish fixes a major issue discovered in fish 3.1.1:

       • Commands such as <b>fzf</b>  and  <b>enhancd</b>,  when  used  with  <b>eval</b>,  would  hang.  <b>eval</b>  buffered  output  too
         aggressively, which has been fixed (<u>#6955</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/6955</b>&gt;).

       If  you are upgrading from version 3.0.0 or before, please also review the release notes for 3.1.1, 3.1.0
       and 3.1b1 (included below).

                                                         ----

   <b>fish</b> <b>3.1.1</b> <b>(released</b> <b>April</b> <b>27,</b> <b>2020)</b>
       This release of fish fixes a number of major issues discovered in fish 3.1.0.

       • Commands which involve <b>.</b> <b>(</b> <b>...</b> <b>|</b> <b>psub)</b> now work correctly, as  a  bug  in  the  <b>function</b>  <b>--on-job-exit</b>
         option has been fixed (<u>#6613</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/6613</b>&gt;).

       • Conflicts  between  upstream packages for ripgrep and bat, and the fish packages, have been resolved (‐
         <u>#5822</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/5822</b>&gt;).

       • Starting fish in  a  directory  without  read  access,  such  as  via  <b>su</b>,  no  longer  crashes  (<u>#6597</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/6597</b>&gt;).

       • Glob  ordering  changes which were introduced in 3.1.0 have been reverted, returning the order of globs
         to the previous state (<u>#6593</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/6593</b>&gt;).

       • Redirections using the deprecated caret syntax to a file descriptor  (eg  <b>^&amp;2</b>)  work  correctly  (<u>#6591</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/6591</b>&gt;).

       • Redirections    that    append    to   a   file   descriptor   (eg   <b>2&gt;&gt;&amp;1</b>)   work   correctly   (<u>#6614</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/6614</b>&gt;).

       • Building fish on  macOS  (<u>#6602</u>  &lt;<b>https://github.com/fish-shell/fish-shell/issues/6602</b>&gt;)  or  with  new
         versions     of     GCC     (<u>#6604</u>     &lt;<b>https://github.com/fish-shell/fish-shell/issues/6604</b>&gt;,    <u>#6609</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/6609</b>&gt;) is now successful.

       • <b>time</b> is now correctly listed in the output of <b>builtin</b>  <b>-n</b>,  and  <b>time</b>  <b>--help</b>  works  correctly  (<u>#6598</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/6598</b>&gt;).

       • Exported   universal   variables   now   update  properly  (<u>#6612</u>  &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/6612</b>&gt;).

       • <b>status</b> <b>current-command</b> gives the expected output when used with an environment override - that is,  <b>F=B</b>
         <b>status</b>  <b>current-command</b>  returns  <b>status</b>  instead  of  <b>F=B</b>  (<u>#6635</u> &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/6635</b>&gt;).

       • <b>test</b> no longer  crashes  when  used  with  “<b>nan</b>”  or  “<b>inf</b>”  arguments,  erroring  out  instead  (<u>#6655</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/6655</b>&gt;).

       • Copying  from  the  end  of  the  command  line no longer crashes fish (<u>#6680</u> &lt;<b>https://github.com/fish-</b>
         <b>shell/fish-shell/issues/6680</b>&gt;).

       • <b>read</b> no longer removes multiple separators when  splitting  a  variable  into  a  list,  restoring  the
         previous   behaviour   from   fish   3.0   and   before   (<u>#6650</u>   &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/6650</b>&gt;).

       • Functions    using    <b>--on-job-exit</b>    and    <b>--on-process-exit</b>    work    reliably    again     (<u>#6679</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/6679</b>&gt;).

       • Functions  using  <b>--on-signal</b>  <b>INT</b>  work  reliably in interactive sessions, as they did in fish 2.7 and
         before (<u>#6649</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/6649</b>&gt;). These handlers have never worked
         in non-interactive sessions, and making them work is an ongoing process.

       • Functions using <b>--on-variable</b> work reliably with variables which are set implicitly (rather  than  with
         <b>set</b>),           such           as          “<b>fish_bind_mode</b>”          and          “<b>PWD</b>”          (<u>#6653</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/6653</b>&gt;).

       • 256 colors are properly enabled under certain conditions that were incorrectly detected in  fish  3.1.0
         (<b>$TERM</b>  begins  with  xterm,  does  not  include  “<b>256color</b>”,  and  <b>$TERM_PROGRAM</b>  is  not  set) (<u>#6701</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/6701</b>&gt;).

       • The Mercurial (<b>hg</b>) prompt no longer produces an error when the current working directory is removed  (‐
         <u>#6699</u>  &lt;<b>https://github.com/fish-shell/fish-shell/issues/6699</b>&gt;).  Also, for performance reasons it shows
         only    basic    information    by    default;    to    restore    the     detailed     status,     set
         <b>$fish_prompt_hg_show_informative_status</b>.

       • The  VCS  prompt,  <b>fish_vcs_prompt</b>,  no  longer displays Subversion (<b>svn</b>) status by default, due to the
         potential slowness of this operation (<u>#6681</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/6681</b>&gt;).

       • Pasting of commands has been sped up (<u>#6713</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/6713</b>&gt;).

       • Using extended Unicode characters, such as emoji, in a non-Unicode capable locale (such  as  the  <b>C</b>  or
         <b>POSIX</b>   locale)   no  longer  renders  all  output  blank  (<u>#6736</u>  &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/6736</b>&gt;).

       • <b>help</b> prefers to use <b>xdg-open</b>, avoiding the use of <b>open</b> on Debian systems where this command is actually
         <b>openvt</b> (<u>#6739</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/6739</b>&gt;).

       • Command lines starting with a space, which are not saved in history, now do  not  get  autosuggestions.
         This  fixes  an  issue  with Midnight Commander integration (<u>#6763</u> &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/6763</b>&gt;), but may be changed in a future version.

       • Copying to the clipboard no longer inserts a newline at the end of the content, matching fish  2.7  and
         earlier (<u>#6927</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/6927</b>&gt;).

       • <b>fzf</b> in complex pipes no longer hangs. More generally, code run as part of command substitutions or <b>eval</b>
         will   no   longer   have   separate   process   groups.   (<u>#6624</u>  &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/6624</b>&gt;, <u>#6806</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/6806</b>&gt;).

       This release also includes:

       • several changes to improve macOS compatibility with code signing and notarization;

       • several improvements to completions; and

       • several content and formatting improvements to the documentation.

       If you are upgrading from version 3.0.0 or before, please also review the release  notes  for  3.1.0  and
       3.1b1 (included below).

   <b>Errata</b> <b>for</b> <b>fish</b> <b>3.1</b>
       A new builtin, <b>time</b>, was introduced in the fish 3.1 releases. This builtin is a reserved word (like <b>test</b>,
       <b>function</b>,  and  others)  because of the way it is implemented, and functions can no longer be named <b>time</b>.
       This was not clear in the fish 3.1b1 changelog.

                                                         ----

   <b>fish</b> <b>3.1.0</b> <b>(released</b> <b>February</b> <b>12,</b> <b>2020)</b>
       Compared to the beta release of fish 3.1b1, fish version 3.1.0:

       • Fixes a regression where spaces after a brace were removed despite brace expansion not occurring (<u>#6564</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/6564</b>&gt;).

       • Fixes a number of  problems  in  compiling  and  testing  on  Cygwin  (<u>#6549</u>  &lt;<b>https://github.com/fish-</b>
         <b>shell/fish-shell/issues/6549</b>&gt;)     and    Solaris-derived    systems    such    as    Illumos    (<u>#6553</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/6553</b>&gt;,   <u>#6554</u>    &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/6554</b>&gt;,       <u>#6555</u>      &lt;<b>https://github.com/fish-shell/fish-shell/issues/6555</b>&gt;,      <u>#6556</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/6556</b>&gt;, and <u>#6558</u>  &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/6558</b>&gt;).

       • Fixes the process for building macOS packages.

       • Fixes  a  regression  where  excessive  error messages are printed if Unicode characters are emitted in
         non-Unicode-capable locales (<u>#6584</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/6584</b>&gt;).

       • Contains some improvements to the documentation and a small number of completions.

       If you are upgrading from version 3.0.0 or before,  please  also  review  the  release  notes  for  3.1b1
       (included below).

                                                         ----

   <b>fish</b> <b>3.1b1</b> <b>(released</b> <b>January</b> <b>26,</b> <b>2020)</b>
   <b>Notable</b> <b>improvements</b> <b>and</b> <b>fixes</b>
       • A  new  <b>$pipestatus</b>  variable  contains  a  list  of exit statuses of the previous job, for each of the
         separate commands in a pipeline (<u>#5632</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/5632</b>&gt;).

       • fish no longer buffers pipes to the last function in a  pipeline,  improving  many  cases  where  pipes
         appeared to block or hang (<u>#1396</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/1396</b>&gt;).

       • An  overhaul  of  error  messages  for  builtin commands, including a removal of the overwhelming usage
         summary, more readable stack traces  (<u>#3404</u>  &lt;<b>https://github.com/fish-shell/fish-shell/issues/3404</b>&gt;,  ‐
         <u>#5434</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/5434</b>&gt;), and stack traces for <b>test</b> (aka <b>[</b>) (<u>#5771</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/5771</b>&gt;).

       • fish’s debugging arguments have been significantly improved. The <b>--debug-level</b> option has been removed,
         and  a  new <b>--debug</b> option replaces it. This option accepts various categories, which may be listed via
         <b>fish</b> <b>--print-debug-categories</b>  (<u>#5879</u>  &lt;<b>https://github.com/fish-shell/fish-shell/issues/5879</b>&gt;).  A  new
         <b>--debug-output</b> option allows for redirection of debug output.

       • <b>string</b> has a new <b>collect</b> subcommand for use in command substitutions, producing a single output instead
         of  splitting  on  new  lines  (similar  to  <b>"$(cmd)"</b>  in other shells) (<u>#159</u> &lt;<b>https://github.com/fish-</b>
         <b>shell/fish-shell/issues/159</b>&gt;).

       • The fish manual, tutorial and FAQ are now available  in  <b>man</b>  format  as  <b>fish-doc</b>,  <b>fish-tutorial</b>  and
         <b>fish-faq</b> respectively (<u>#5521</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/5521</b>&gt;).

       • Like other shells, <b>cd</b> now always looks for its argument in the current directory as a last resort, even
         if  the  <b>CDPATH</b>  variable  does  not  include  it  or  “.”  (<u>#4484</u> &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/4484</b>&gt;).

       • fish now correctly  handles  <b>CDPATH</b>  entries  that  start  with  <b>..</b>   (<u>#6220</u>  &lt;<b>https://github.com/fish-</b>
         <b>shell/fish-shell/issues/6220</b>&gt;)    or    contain    <b>./</b>    (<u>#5887</u>    &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/5887</b>&gt;).

       • The <b>fish_trace</b> variable may be  set  to  trace  execution  (<u>#3427</u>  &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/3427</b>&gt;).  This performs a similar role as <b>set</b> <b>-x</b> in other shells.

       • fish  uses  the  temporary  directory  determined  by  the  system,  rather than relying on <b><a href="file:/tmp">/tmp</a></b> (<u>#3845</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/3845</b>&gt;).

       • The fish Web configuration tool (<b>fish_config</b>) prints a list  of  commands  it  is  executing,  to  help
         understanding and debugging (<u>#5584</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/5584</b>&gt;).

       • Major    performance    improvements    when    pasting   (<u>#5866</u>   &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/5866</b>&gt;),   executing   lots   of   commands   (<u>#5905</u>   &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/5905</b>&gt;),   importing   history   from   bash   (<u>#6295</u>  &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/6295</b>&gt;),   and   when   completing   variables   that   might   match    <b>$history</b>    (<u>#6288</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/6288</b>&gt;).

   <b>Syntax</b> <b>changes</b> <b>and</b> <b>new</b> <b>commands</b>
       • A  new  builtin  command,  <b>time</b>, which allows timing of fish functions and builtins as well as external
         commands (<u>#117</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/117</b>&gt;).

       • Brace expansion now only takes place if the braces include a  “,”  or  a  variable  expansion,  meaning
         common  commands  such  as  <b>git</b> <b>reset</b> <b>HEAD@{0}</b> do not require escaping (<u>#5869</u> &lt;<b>https://github.com/fish-</b>
         <b>shell/fish-shell/issues/5869</b>&gt;).

       • New redirections <b>&amp;&gt;</b> and <b>&amp;|</b> may be used to redirect or pipe stdout, and also redirect stderr  to  stdout
         (<u>#6192</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/6192</b>&gt;).

       • <b>switch</b>    now    allows   arguments   that   expand   to   nothing,   like   empty   variables   (<u>#5677</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/5677</b>&gt;).

       • The <b>VAR=val</b>  <b>cmd</b>  syntax  can  now  be  used  to  run  a  command  in  a  modified  environment  (<u>#6287</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/6287</b>&gt;).

       • <b>and</b>  is  no  longer  recognised as a command, so that nonsensical constructs like <b>and</b> <b>and</b> <b>and</b> produce a
         syntax error (<u>#6089</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/6089</b>&gt;).

       • <b>math</b>‘s exponent operator,’<b>^</b>‘, was previously left-associative, but  now  uses  the  more  commonly-used
         right-associative  behaviour (<u>#6280</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/6280</b>&gt;). This means
         that <b>math</b> <b>'3^0.5^2'</b> was previously calculated as’(30.5)2’, but is now calculated as ‘3(0.52)’.

       • In fish 3.0, the variable used with <b>for</b> loops inside command substitutions could  leak  into  enclosing
         scopes; this was an inadvertent behaviour change and has been reverted (<u>#6480</u> &lt;<b>https://github.com/fish-</b>
         <b>shell/fish-shell/issues/6480</b>&gt;).

   <b>Scripting</b> <b>improvements</b>
       • <b>string</b>  <b>split0</b>  now  returns  0  if  it  split  something  (<u>#5701</u>  &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/5701</b>&gt;).

       • In the interest of consistency, <b>builtin</b> <b>-q</b> and <b>command</b> <b>-q</b> can now be used to  query  if  a  builtin  or
         command exists (<u>#5631</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/5631</b>&gt;).

       • <b>math</b>  now  accepts  <b>--scale=max</b>  for  the  maximum  scale  (<u>#5579</u>  &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/5579</b>&gt;).

       • <b>builtin</b>  <b>$var</b>   now   works   correctly,   allowing   a   variable   as   the   builtin   name   (<u>#5639</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/5639</b>&gt;).

       • <b>cd</b>  understands  the <b>--</b> argument to make it possible to change to directories starting with a hyphen (‐
         <u>#6071</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/6071</b>&gt;).

       • <b>complete</b>  <b>--do-complete</b>  now  also  does  fuzzy  matches  (<u>#5467</u>   &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/5467</b>&gt;).

       • <b>complete</b>   <b>--do-complete</b>   can   be   used   inside  completions,  allowing  limited  recursion  (<u>#3474</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/3474</b>&gt;).

       • <b>count</b>  now  also  counts  lines  fed  on  standard  input  (<u>#5744</u>  &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/5744</b>&gt;).

       • <b>eval</b>   produces   an   exit   status   of   0  when  given  no  arguments,  like  other  shells  (<u>#5692</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/5692</b>&gt;).

       • <b>printf</b> prints what it can when input hasn’t been fully converted to a number, but still prints an error
         (<u>#5532</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/5532</b>&gt;).

       • <b>complete</b> <b>-C</b> <b>foo</b> now works as expected, rather than requiring <b>complete</b> <b>-Cfoo</b>.

       • <b>complete</b> has a new <b>--force-files</b> option, to re-enable file completions. This allows <b>sudo</b> <b>-E</b> and  <b>pacman</b>
         <b>-Qo</b> to complete correctly (<u>#5646</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/5646</b>&gt;).

       • <b>argparse</b>  now defaults to showing the current function name (instead of <b>argparse</b>) in its errors, making
         <b>--name</b> often superfluous (<u>#5835</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/5835</b>&gt;).

       • <b>argparse</b> has a new <b>--ignore-unknown</b> option to keep unrecognized  options,  allowing  multiple  argparse
         passes to parse options (<u>#5367</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/5367</b>&gt;).

       • <b>argparse</b>  correctly  handles  flag  value  validation  of  options  that  only  have short names (<u>#5864</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/5864</b>&gt;).

       • <b>read</b> <b>-S</b> (short option of <b>--shell</b>) is recognised correctly  (<u>#5660</u>  &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/5660</b>&gt;).

       • <b>read</b>  understands  <b>--list</b>, which acts like <b>--array</b> in reading all arguments into a list inside a single
         variable, but is better named (<u>#5846</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/5846</b>&gt;).

       • <b>read</b> has a new option, <b>--tokenize</b>, which splits a  string  into  variables  according  to  the  shell’s
         tokenization   rules,  considering  quoting,  escaping,  and  so  on  (<u>#3823</u>  &lt;<b>https://github.com/fish-</b>
         <b>shell/fish-shell/issues/3823</b>&gt;).

       • <b>read</b> interacts more correctly with the  deprecated  <b>$IFS</b>  variable,  in  particular  removing  multiple
         separators   when   splitting  a  variable  into  a  list  (<u>#6406</u>  &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/6406</b>&gt;), matching other shells.

       • <b>fish_indent</b> now handles semicolons better, including leaving them in place for <b>;</b> <b>and</b> and <b>;</b>  <b>or</b>  instead
         of breaking the line (<u>#5859</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/5859</b>&gt;).

       • <b>fish_indent</b> <b>--write</b> now supports multiple file arguments, indenting them in turn.

       • The  default  read  limit  has  been  increased  to  100MiB (<u>#5267</u> &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/5267</b>&gt;).

       • <b>math</b> now also  understands  <b>x</b>  for  multiplication,  provided  it  is  followed  by  whitespace  (<u>#5906</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/5906</b>&gt;).

       • <b>math</b>   reports   the   right   error   when   incorrect   syntax  is  used  inside  parentheses  (<u>#6063</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/6063</b>&gt;), and warns when unsupported logical  operations
         are used (<u>#6096</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/6096</b>&gt;).

       • <b>functions</b>  <b>--erase</b>  now  also  prevents  fish  from  autoloading  a  function for the first time (<u>#5951</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/5951</b>&gt;).

       • <b>jobs</b> <b>--last</b> returns 0 to  indicate  success  when  a  job  is  found  (<u>#6104</u>  &lt;<b>https://github.com/fish-</b>
         <b>shell/fish-shell/issues/6104</b>&gt;).

       • <b>commandline</b>  <b>-p</b>  and  <b>commandline</b>  <b>-j</b>  now  split  on  <b>&amp;&amp;</b>  and  <b>||</b>  in  addition  to  <b>;</b>  and  <b>&amp;</b>  (<u>#6214</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/6214</b>&gt;).

       • A bug where <b>string</b> <b>split</b> would drop empty strings if the output was only empty strings has  been  fixed
         (<u>#5987</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/5987</b>&gt;).

       • <b>eval</b>  no  long creates a new local variable scope, but affects variables in the scope it is called from
         (<u>#4443</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/4443</b>&gt;). <b>source</b> still creates a new local scope.

       • <b>abbr</b> has a new <b>--query</b> option to check for the existence of an abbreviation.

       • Local values for <b>fish_complete_path</b> and <b>fish_function_path</b> are now ignored; only  their  global  values
         are respected.

       • Syntax  error  reports  now  display  a marker in the correct position (<u>#5812</u> &lt;<b>https://github.com/fish-</b>
         <b>shell/fish-shell/issues/5812</b>&gt;).

       • Empty  universal  variables   may   now   be   exported   (<u>#5992</u>   &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/5992</b>&gt;).

       • Exported  universal  variables are no longer imported into the global scope, preventing shadowing. This
         makes it easier to change such variables for all fish sessions and avoids breakage when the value is  a
         list of multiple elements (<u>#5258</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/5258</b>&gt;).

       • A  bug  where  <b>for</b>  could  use  invalid  variable names has been fixed (<u>#5800</u> &lt;<b>https://github.com/fish-</b>
         <b>shell/fish-shell/issues/5800</b>&gt;).

       • A  bug  where  local  variables  would  not  be  exported  to   functions   has   been   fixed   (<u>#6153</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/6153</b>&gt;).

       • The  null  command  (<b>:</b>)  now  always  exits successfully, rather than passing through the previous exit
         status (<u>#6022</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/6022</b>&gt;).

       • The output of <b>functions</b> <b>FUNCTION</b> matches the declaration of the function, correctly including  comments
         or  blank  lines (<u>#5285</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/5285</b>&gt;), and correctly includes
         any <b>--wraps</b> flags (<u>#1625</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/1625</b>&gt;).

       • <b>type</b> supports a new option, <b>--short</b>, which suppress function expansion (<u>#6403</u> &lt;<b>https://github.com/fish-</b>
         <b>shell/fish-shell/issues/6403</b>&gt;).

       • <b>type</b> <b>--path</b> with a function argument will now output the path to the file containing the definition  of
         that function, if it exists.

       • <b>type</b> <b>--force-path</b> with an argument that cannot be found now correctly outputs nothing, as documented (‐
         <u>#6411</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/6411</b>&gt;).

       • The  <b>$hostname</b>  variable  is  no  longer  truncated  to  32 characters (<u>#5758</u> &lt;<b>https://github.com/fish-</b>
         <b>shell/fish-shell/issues/5758</b>&gt;).

       • Line  numbers  in  function  backtraces  are  calculated  correctly  (<u>#6350</u>   &lt;<b>https://github.com/fish-</b>
         <b>shell/fish-shell/issues/6350</b>&gt;).

       • A  new  <b>fish_cancel</b>  event  is emitted when the command line is cancelled, which is useful for terminal
         integration (<u>#5973</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/5973</b>&gt;).

   <b>Interactive</b> <b>improvements</b>
       • New   Base16   color   options   are   available   through   the   Web-based    configuration    (<u>#6504</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/6504</b>&gt;).

       • fish  only  parses  <b>/etc/paths</b>  on  macOS  in  login  shells,  matching  the bash implementation (<u>#5637</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/5637</b>&gt;) and avoiding changes to path ordering in  child
         shells  (<u>#5456</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/5456</b>&gt;). It now ignores blank lines like
         the bash implementation (<u>#5809</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/5809</b>&gt;).

       • The locale is now reloaded when  the  <b>LOCPATH</b>  variable  is  changed  (<u>#5815</u>  &lt;<b>https://github.com/fish-</b>
         <b>shell/fish-shell/issues/5815</b>&gt;).

       • <b>read</b>  no  longer  keeps  a history, making it suitable for operations that shouldn’t end up there, like
         password entry (<u>#5904</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/5904</b>&gt;).

       • <b>dirh</b>  outputs  its   stack   in   the   correct   order   (<u>#5477</u>   &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/5477</b>&gt;),  and  behaves as documented when universal variables are used for its stack (<u>#5797</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/5797</b>&gt;).

       • <b>funced</b> and the edit-commandline-in-buffer bindings did not work in fish 3.0 when the  <b>$EDITOR</b>  variable
         contained           spaces;          this          has          been          corrected          (<u>#5625</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/5625</b>&gt;).

       • Builtins now  pipe  their  help  output  to  a  pager  automatically  (<u>#6227</u>  &lt;<b>https://github.com/fish-</b>
         <b>shell/fish-shell/issues/6227</b>&gt;).

       • <b>set_color</b> now colors the <b>--print-colors</b> output in the matching colors if it is going to a terminal.

       • fish   now   underlines   every   valid   entered   path   instead   of   just   the  last  one  (<u>#5872</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/5872</b>&gt;).

       • When syntax highlighting a string with an unclosed quote, only the quote itself will  be  shown  as  an
         error, instead of the whole argument.

       • Syntax  highlighting  works  correctly  with  variables  as  commands  (<u>#5658</u> &lt;<b>https://github.com/fish-</b>
         <b>shell/fish-shell/issues/5658</b>&gt;)    and    redirections    to    close    file     descriptors     (<u>#6092</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/6092</b>&gt;).

       • <b>help</b>   works  properly  on  Windows  Subsytem  for  Linux  (<u>#5759</u>  &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/5759</b>&gt;, <u>#6338</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/6338</b>&gt;).

       • A bug where <b>disown</b> could crash the shell has  been  fixed  (<u>#5720</u>  &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/5720</b>&gt;).

       • fish  will  not  autosuggest  files  ending  with  <b>~</b> unless there are no other candidates, as these are
         generally backup files (<u>#985</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/985</b>&gt;).

       • Escape in the pager works correctly (<u>#5818</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/5818</b>&gt;).

       • Key  bindings  that  call  <b>fg</b>   no   longer   leave   the   terminal   in   a   broken   state   (<u>#2114</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/2114</b>&gt;).

       • Brackets  (<u>#5831</u>  &lt;<b>https://github.com/fish-shell/fish-shell/issues/5831</b>&gt;) and filenames containing <b>$</b> (‐
         <u>#6060</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/6060</b>&gt;) are completed with appropriate escaping.

       • The output of <b>complete</b> and <b>functions</b> is now colorized in interactive terminals.

       • The  Web-based  configuration  handles  aliases   that   include   single   quotes   correctly   (<u>#6120</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/6120</b>&gt;),  and  launches  correctly  under Termux (<u>#6248</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/6248</b>&gt;) and  OpenBSD  (<u>#6522</u>  &lt;<b>https://github.com/fish-</b>
         <b>shell/fish-shell/issues/6522</b>&gt;).

       • <b>function</b>  now  correctly  validates  parameters  for  <b>--argument-names</b>  as  valid variable names (<u>#6147</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/6147</b>&gt;)  and   correctly   parses   options   following
         <b>--argument-names</b>,  as  in  “<b>--argument-names</b>  <b>foo</b>  <b>--description</b>  <b>bar</b>” (<u>#6186</u> &lt;<b>https://github.com/fish-</b>
         <b>shell/fish-shell/issues/6186</b>&gt;).

       • History newly imported from bash includes command lines using <b>&amp;&amp;</b> or <b>||</b>.

       • The automatic generation of completions from manual pages  is  better  described  in  job  and  process
         listings,  and  no  longer  produces  a  warning  when  exiting  fish  (<u>#6269</u> &lt;<b>https://github.com/fish-</b>
         <b>shell/fish-shell/issues/6269</b>&gt;).

       • In private mode, setting <b>$fish_greeting</b> to an empty string before starting  the  private  session  will
         prevent  the  warning about history not being saved from being printed (<u>#6299</u> &lt;<b>https://github.com/fish-</b>
         <b>shell/fish-shell/issues/6299</b>&gt;).

       • In the interactive editor, a line break (Enter) inside unclosed brackets will insert a new line, rather
         than  executing  the  command  and  producing  an  error  (<u>#6316</u>   &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/6316</b>&gt;).

       • Ctrl-C always repaints the prompt (<u>#6394</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/6394</b>&gt;).

       • When  run  interactively from another program (such as Python), fish will correctly start a new process
         group, like other shells (<u>#5909</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/5909</b>&gt;).

       • Job  identifiers  (for  example,  for   background   jobs)   are   assigned   more   logically   (<u>#6053</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/6053</b>&gt;).

       • A  bug  where  history  would  appear  truncated  if  an  empty  command  was executed was fixed (<u>#6032</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/6032</b>&gt;).

   <b>New</b> <b>or</b> <b>improved</b> <b>bindings</b>
       • Pasting strips leading  spaces  to  avoid  pasted  commands  being  omitted  from  the  history  (<u>#4327</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/4327</b>&gt;).

       • Shift-Left and Shift-Right now default to moving backwards and forwards by one bigword (words separated
         by whitespace) (<u>#1505</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/1505</b>&gt;).

       • The  default  escape  delay  (to  differentiate between the escape key and an alt-combination) has been
         reduced  to  30ms,  down  from  300ms  for  the  default  mode   and   100ms   for   Vi   mode   (<u>#3904</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/3904</b>&gt;).

       • The    <b>forward-bigword</b>    binding    now    interacts    correctly    with    autosuggestions    (<u>#5336</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/5336</b>&gt;).

       • The <b>fish_clipboard_*</b> functions support Wayland by  using  <u>wl-clipboard</u>  &lt;<b>https://github.com/bugaevc/wl-</b>
         <b>clipboard</b>&gt; (<u>#5450</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/5450</b>&gt;).

       • The  <b>nextd</b>  and  <b>prevd</b>  functions  no  longer  print  “Hit  end of history”, instead using a bell. They
         correctly  store  working  directories  containing  symbolic  links  (<u>#6395</u>   &lt;<b>https://github.com/fish-</b>
         <b>shell/fish-shell/issues/6395</b>&gt;).

       • If  a  <b>fish_mode_prompt</b>  function  exists,  Vi  mode will only execute it on mode-switch instead of the
         entire  prompt.   This   should   make   it   much   more   responsive   with   slow   prompts   (<u>#5783</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/5783</b>&gt;).

       • The  path-component  bindings  (like  Ctrl-w)  now  also stop at “:” and “@”, because those are used to
         denote  user  and  host  in  commands   such   as   <b>ssh</b>   (<u>#5841</u>   &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/5841</b>&gt;).

       • The  NULL  character  can  now  be  bound  via <b>bind</b> <b>-k</b> <b>nul</b>. Terminals often generate this character via
         control-space. (<u>#3189</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/3189</b>&gt;).

       • A  new  readline  command  <b>expand-abbr</b>  can  be  used  to   trigger   abbreviation   expansion   (<u>#5762</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/5762</b>&gt;).

       • A  new  readline  command,  <b>delete-or-exit</b>, removes a character to the right of the cursor or exits the
         shell if the command line is empty (moving this functionality out of the <b>delete-or-exit</b> function).

       • The <b>self-insert</b> readline command will now insert the binding sequence, if not empty.

       • A new binding to prepend <b>sudo</b>, bound to Alt-S by  default  (<u>#6140</u>  &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/6140</b>&gt;).

       • The  Alt-W  binding  to  describe  a  command  should  now  work  better  with multiline prompts (<u>#6110</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/6110</b>&gt;)

       • The  Alt-H  binding  to   open   a   command’s   man   page   now   tries   to   ignore   <b>sudo</b>   (<u>#6122</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/6122</b>&gt;).

       • A  new  pair  of  bind  functions,  <b>history-prefix-search-backward</b> (and <b>forward</b>), was introduced (<u>#6143</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/6143</b>&gt;).

       • Vi  mode  now  supports  R  to   enter   replace   mode   (<u>#6342</u>   &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/6342</b>&gt;),  and  <b>d0</b>  to  delete  the current line (<u>#6292</u> &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/6292</b>&gt;).

       • In  Vi  mode,  hitting   Enter   in   replace-one   mode   no   longer   erases   the   prompt   (<u>#6298</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/6298</b>&gt;).

       • Selections   in   Vi   mode   are   inclusive,   matching   the   actual   behaviour   of   Vi   (<u>#5770</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/5770</b>&gt;).

   <b>Improved</b> <b>prompts</b>
       • The Git prompt in informative mode now shows the number of stashes if enabled.

       • The Git prompt now has an option (<b>$__fish_git_prompt_use_informative_chars</b>) to use  the  (more  modern)
         informative characters without enabling informative mode.

       • The  default prompt now also features VCS integration and will color the host if running via SSH (<u>#6375</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/6375</b>&gt;).

       • The default and example prompts print the pipe status if an earlier command in the pipe fails.

       • The default and example prompts try to resolve exit statuses to signal names when appropriate.

   <b>Improved</b> <b>terminal</b> <b>output</b>
       • New <b>fish_pager_color_</b> options have been added to control more elements of  the  pager’s  colors  (<u>#5524</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/5524</b>&gt;).

       • Better  detection  and  support  for  using fish from various system consoles, where limited colors and
         special characters are supported (<u>#5552</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/5552</b>&gt;).

       • fish now tries to guess if the system supports Unicode 9 (and displays emoji as wide), eliminating  the
         need   to   set   <b>$fish_emoji_width</b>   in   most   cases   (<u>#5722</u>   &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/5722</b>&gt;).

       • Improvements to the display of  wide  characters,  particularly  Korean  characters  and  emoji  (<u>#5583</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/5583</b>&gt;,    <u>#5729</u>   &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/5729</b>&gt;).

       • The Vi mode cursor is correctly redrawn when regaining focus under  terminals  that  report  focus  (eg
         tmux) (<u>#4788</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/4788</b>&gt;).

       • Variables that control background colors (such as <b>fish_pager_color_search_match</b>) can now use <b>--reverse</b>.

   <b>Completions</b>
       • Added completions for

         • <b>aws</b>

         • <b>bat</b> (<u>#6052</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/6052</b>&gt;)

         • <b>bosh</b> (<u>#5700</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/5700</b>&gt;)

         • <b>btrfs</b>

         • <b>camcontrol</b>

         • <b>cf</b> (<u>#5700</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/5700</b>&gt;)

         • <b>chronyc</b> (<u>#6496</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/6496</b>&gt;)

         • <b>code</b> (<u>#6205</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/6205</b>&gt;)

         • <b>cryptsetup</b> (<u>#6488</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/6488</b>&gt;)

         • <b>csc</b> and <b>csi</b> (<u>#6016</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/6016</b>&gt;)

         • <b>cwebp</b> (<u>#6034</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/6034</b>&gt;)

         • <b>cygpath</b> and <b>cygstart</b> (<u>#6239</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/6239</b>&gt;)

         • <b>epkginfo</b> (<u>#5829</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/5829</b>&gt;)

         • <b>ffmpeg</b>, <b>ffplay</b>, and <b>ffprobe</b> (<u>#5922</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/5922</b>&gt;)

         • <b>fsharpc</b> and <b>fsharpi</b> (<u>#6016</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/6016</b>&gt;)

         • <b>fzf</b> (<u>#6178</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/6178</b>&gt;)

         • <b>g++</b> (<u>#6217</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/6217</b>&gt;)

         • <b>gpg1</b> (<u>#6139</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/6139</b>&gt;)

         • <b>gpg2</b> (<u>#6062</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/6062</b>&gt;)

         • <b>grub-mkrescue</b> (<u>#6182</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/6182</b>&gt;)

         • <b>hledger</b> (<u>#6043</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/6043</b>&gt;)

         • <b>hwinfo</b> (<u>#6496</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/6496</b>&gt;)

         • <b>irb</b> (<u>#6260</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/6260</b>&gt;)

         • <b>iw</b> (<u>#6232</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/6232</b>&gt;)

         • <b>kak</b>

         • <b>keepassxc-cli</b> (<u>#6505</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/6505</b>&gt;)

         • <b>keybase</b> (<u>#6410</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/6410</b>&gt;)

         • <b>loginctl</b> (<u>#6501</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/6501</b>&gt;)

         • <b>lz4</b>, <b>lz4c</b> and <b>lz4cat</b> (<u>#6364</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/6364</b>&gt;)

         • <b>mariner</b> (<u>#5718</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/5718</b>&gt;)

         • <b>nethack</b> (<u>#6240</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/6240</b>&gt;)

         • <b>patool</b> (<u>#6083</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/6083</b>&gt;)

         • <b>phpunit</b> (<u>#6197</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/6197</b>&gt;)

         • <b>plutil</b> (<u>#6301</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/6301</b>&gt;)

         • <b>pzstd</b> (<u>#6364</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/6364</b>&gt;)

         • <b>qubes-gpg-client</b> (<u>#6067</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/6067</b>&gt;)

         • <b>resolvectl</b> (<u>#6501</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/6501</b>&gt;)

         • <b>rg</b>

         • <b>rustup</b>

         • <b>sfdx</b> (<u>#6149</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/6149</b>&gt;)

         • <b>speedtest</b> and <b>speedtest-cli</b> (<u>#5840</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/5840</b>&gt;)

         • <b>src</b> (<u>#6026</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/6026</b>&gt;)

         • <b>tokei</b> (<u>#6085</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/6085</b>&gt;)

         • <b>tsc</b> (<u>#6016</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/6016</b>&gt;)

         • <b>unlz4</b> (<u>#6364</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/6364</b>&gt;)

         • <b>unzstd</b> (<u>#6364</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/6364</b>&gt;)

         • <b>vbc</b> (<u>#6016</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/6016</b>&gt;)

         • <b>zpaq</b> (<u>#6245</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/6245</b>&gt;)

         • <b>zstd</b>,   <b>zstdcat</b>,   <b>zstdgrep</b>,   <b>zstdless</b>   and   <b>zstdmt</b>   (<u>#6364</u>  &lt;<b>https://github.com/fish-shell/fish-</b>
           <b>shell/issues/6364</b>&gt;)

       • Lots of improvements to completions.

       • Selecting short options which also have a long name  from  the  completion  pager  is  possible  (<u>#5634</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/5634</b>&gt;).

       • Tab    completion   will   no   longer   add   trailing   spaces   if   they   already   exist   (<u>#6107</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/6107</b>&gt;).

       • Completion  of   subcommands   to   builtins   like   <b>and</b>   or   <b>not</b>   now   works   correctly   (<u>#6249</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/6249</b>&gt;).

       • Completion  of arguments to short options works correctly when multiple short options are used together
         (<u>#332</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/332</b>&gt;).

       • Activating completion in the middle of an invalid completion does not move the cursor any more,  making
         it easier to fix a mistake (<u>#4124</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/4124</b>&gt;).

       • Completion in empty commandlines now lists all available commands.

       • Functions  listed as completions could previously leak parts of the function as other completions; this
         has been fixed.

   <b>Deprecations</b> <b>and</b> <b>removed</b> <b>features</b>
       • The vcs-prompt functions have been promoted to names without double-underscore, so __fish_git_prompt is
         now fish_git_prompt, __fish_vcs_prompt is now fish_vcs_prompt, __fish_hg_prompt is  now  fish_hg_prompt
         and __fish_svn_prompt is now fish_svn_prompt. Shims at the old names have been added, and the variables
         have kept their old names (<u>#5586</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/5586</b>&gt;).

       • <b>string</b>  <b>replace</b>  has  an  additional  round  of  escaping  in  the  replacement expression, so escaping
         backslashes requires many escapes (eg <b>string</b> <b>replace</b> <b>-ra</b> <b>'([ab])'</b> <b>'\\\\\\\$1'</b> <b>a</b>). The new feature  flag
         <b>regex-easyesc</b>  can be used to disable this, so that the same effect can be achieved with <b>string</b> <b>replace</b>
         <b>-ra</b> <b>'([ab])'</b> <b>'\\\\$1'</b> <b>a</b> (<u>#5556</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/5556</b>&gt;). As a  reminder,
         the  intention  behind  feature  flags  is  that  this will eventually become the default and then only
         option, so scripts should be updated.

       • The <b>fish_vi_mode</b> function, deprecated in fish 2.3, has been removed. Use  <b>fish_vi_key_bindings</b>  instead
         (<u>#6372</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/6372</b>&gt;).

   <b>For</b> <b>distributors</b> <b>and</b> <b>developers</b>
       • fish  3.0 introduced a CMake-based build system. In fish 3.1, both the Autotools-based build and legacy
         Xcode build system have been removed, leaving  only  the  CMake  build  system.  All  distributors  and
         developers must install CMake.

       • fish now depends on the common <b>tee</b> external command, for the <b>psub</b> process substitution function.

       • The  documentation  is  now  built  with  Sphinx.  The  old Doxygen-based documentation system has been
         removed. Developers, and distributors who wish to rebuild the documentation, must install Sphinx.

       • The <b>INTERNAL_WCWIDTH</b> build option has been removed,  as  fish  now  always  uses  an  internal  <b>wcwidth</b>
         function.  It  has  a number of configuration options that make it more suitable for general use (<u>#5777</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/5777</b>&gt;).

       • mandoc can now be used to format the output from <b>--help</b> if <b>nroff</b> is not installed, reducing the  number
         of  external  dependencies on systems with <b>mandoc</b> installed (<u>#5489</u> &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/5489</b>&gt;).

       • Some  bugs  preventing  building  on  Solaris-derived  systems  such  as  Illumos  were  fixed   (<u>#5458</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/5458</b>&gt;,    <u>#5461</u>   &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/5461</b>&gt;, <u>#5611</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/5611</b>&gt;).

       • Completions for <b>npm</b>, <b>bower</b> and <b>yarn</b> no longer require the <b>jq</b> utility for full functionality,  but  will
         use Python instead if it is available.

       • The  paths  for  completions,  functions and configuration snippets have been extended. On systems that
         define <b>XDG_DATA_DIRS</b>, each of the directories in this  variable  are  searched  in  the  subdirectories
         <b>fish/vendor_completions.d</b>,  <b>fish/vendor_functions.d</b>,  and  <b>fish/vendor_conf.d</b>  respectively. On systems
         that do not define this variable in the environment, the vendor directories are searched  for  in  both
         the  installation  prefix  and  the  default “extra” directory, which now defaults to <b><a href="file:/usr/local">/usr/local</a></b> (<u>#5029</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/5029</b>&gt;).

                                                         ----

   <b>fish</b> <b>3.0.2</b> <b>(released</b> <b>February</b> <b>19,</b> <b>2019)</b>
       This release of fish fixes an issue discovered in fish 3.0.1.

   <b>Fixes</b> <b>and</b> <b>improvements</b>
       • The PWD environment variable is now ignored if it does not  resolve  to  the  true  working  directory,
         fixing  strange  behaviour  in  terminals  started by editors and IDEs (<u>#5647</u> &lt;<b>https://github.com/fish-</b>
         <b>shell/fish-shell/issues/5647</b>&gt;).

       If you are upgrading from version 2.7.1 or before, please also review the release notes for 3.0.1,  3.0.0
       and 3.0b1 (included below).

   <b>fish</b> <b>3.0.1</b> <b>(released</b> <b>February</b> <b>11,</b> <b>2019)</b>
       This release of fish fixes a number of major issues discovered in fish 3.0.0.

   <b>Fixes</b> <b>and</b> <b>improvements</b>
       • <b>exec</b>  does  not  complain  about  running  foreground jobs when called (<u>#5449</u> &lt;<b>https://github.com/fish-</b>
         <b>shell/fish-shell/issues/5449</b>&gt;).

       • while loops now evaluate to the last executed command in the loop body (or zero if the body was empty),
         matching POSIX semantics (<u>#4982</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/4982</b>&gt;).

       • <b>read</b>  <b>--silent</b>  no  longer  echoes  to  the  tty  when  run  from  a  non-interactive   script   (<u>#5519</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/5519</b>&gt;).

       • On  macOS,  path entries with spaces in <b>/etc/paths</b> and <b>/etc/paths.d</b> now correctly set path entries with
         spaces.   Likewise,  <b>MANPATH</b>  is  correctly  set  from   <b>/etc/manpaths</b>   and   <b>/etc/manpaths.d</b>   (<u>#5481</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/5481</b>&gt;).

       • fish             starts            correctly            under            Cygwin/MSYS2            (<u>#5426</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/5426</b>&gt;).

       • The <b>pager-toggle-search</b> binding (Ctrl-S by default) will now activate the search field, even  when  the
         pager is not focused.

       • The error when a command is not found is now printed a single time, instead of once per argument (<u>#5588</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/5588</b>&gt;).

       • Fixes  and  improvements  to  the  git  completions,  including  printing  correct paths with older git
         versions, fuzzy matching again, reducing unnecessary offers of root paths  (starting  with  <b>:/</b>)  (<u>#5578</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/5578</b>&gt;,    <u>#5574</u>   &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/5574</b>&gt;, <u>#5476</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/5476</b>&gt;), and  ignoring  shell
         aliases,  so  enterprising  users can set up the wrapping command (via <b>set</b> <b>-g</b> <b>__fish_git_alias_$command</b>
         <b>$whatitwraps</b>) (<u>#5412</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/5412</b>&gt;).

       • Significant  performance  improvements  to  core  shell  functions   (<u>#5447</u>   &lt;<b>https://github.com/fish-</b>
         <b>shell/fish-shell/issues/5447</b>&gt;)  and to the <b>kill</b> completions (<u>#5541</u> &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/5541</b>&gt;).

       • Starting in symbolically-linked working directories works  correctly  (<u>#5525</u>  &lt;<b>https://github.com/fish-</b>
         <b>shell/fish-shell/issues/5525</b>&gt;).

       • The  default  <b>fish_title</b>  function  no  longer  contains  extra spaces (<u>#5517</u> &lt;<b>https://github.com/fish-</b>
         <b>shell/fish-shell/issues/5517</b>&gt;).

       • The  <b>nim</b>  prompt  now  works  correctly   when   chosen   in   the   Web-based   configuration   (<u>#5490</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/5490</b>&gt;).

       • <b>string</b>  now  prints  help  to  stdout,  like other builtins (<u>#5495</u> &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/5495</b>&gt;).

       • Killing the terminal while fish is in vi normal mode will no longer send it spinning and eating CPU. (‐
         <u>#5528</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/5528</b>&gt;)

       • A number of crashes have been fixed  (<u>#5550</u>  &lt;<b>https://github.com/fish-shell/fish-shell/issues/5550</b>&gt;,  ‐
         <u>#5548</u>     &lt;<b>https://github.com/fish-shell/fish-shell/issues/5548</b>&gt;,    <u>#5479</u>    &lt;<b>https://github.com/fish-</b>
         <b>shell/fish-shell/issues/5479</b>&gt;, <u>#5453</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/5453</b>&gt;).

       • Improvements to the documentation and certain completions.

   <b>Known</b> <b>issues</b>
       There is one significant known issue that was not corrected before the release:

       • fish does not run correctly under Windows Services for Linux before Windows 10 version 1809/17763,  and
         the   message  warning  of  this  may  not  be  displayed  (<u>#5619</u>  &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/5619</b>&gt;).

       If you are upgrading from version 2.7.1 or before, please also review the release  notes  for  3.0.0  and
       3.0b1 (included below).

                                                         ----

   <b>fish</b> <b>3.0.0</b> <b>(released</b> <b>December</b> <b>28,</b> <b>2018)</b>
       fish  3  is  a  major  release,  which introduces some breaking changes alongside improved functionality.
       Although most existing scripts will continue to work, they should be reviewed against the list  contained
       in the 3.0b1 release notes below.

       Compared to the beta release of fish 3.0b1, fish version 3.0.0:

       • builds correctly against musl libc (<u>#5407</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/5407</b>&gt;)

       • handles   huge   numeric   arguments  to  <b>test</b>  correctly  (<u>#5414</u>  &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/5414</b>&gt;)

       • removes the history colouring introduced in 3.0b1, which did not always work correctly

       There is one significant known issue which was not able to be corrected before the release:

       • fish 3.0.0 builds on Cygwin (<u>#5423</u>  &lt;<b>https://github.com/fish-shell/fish-shell/issues/5423</b>&gt;),  but  does
         not  run  correctly (<u>#5426</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/5426</b>&gt;) and will result in a
         hanging terminal when started. Cygwin users are encouraged to continue  using  2.7.1  until  a  release
         which corrects this is available.

       If  you  are  upgrading  from  version  2.7.1  or  before, please also review the release notes for 3.0b1
       (included below).

                                                         ----

   <b>fish</b> <b>3.0b1</b> <b>(released</b> <b>December</b> <b>11,</b> <b>2018)</b>
       fish 3 is a major release, which introduces  some  breaking  changes  alongside  improved  functionality.
       Although most existing scripts will continue to work, they should be reviewed against the list below.

   <b>Notable</b> <b>non-backward</b> <b>compatible</b> <b>changes</b>
       • Process  and  job expansion has largely been removed. <b>%</b> will no longer perform these expansions, except
         for <b>%self</b> for the PID of the current shell. Additionally, job management commands (<b>disown</b>, <b>wait</b>, <b>bg</b>, <b>fg</b>
         and <b>kill</b>) will expand  job  specifiers  starting  with  <b>%</b>  (<u>#4230</u>  &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/4230</b>&gt;, <u>#1202</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/1202</b>&gt;).

       • <b>set</b>  <b>x[1]</b>  <b>x[2]</b>  <b>a</b>  <b>b</b>,  to  set multiple elements of an array at once, is no longer valid syntax (<u>#4236</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/4236</b>&gt;).

       • A literal <b>{}</b> now expands to itself, rather than nothing. This makes working with <b>find</b> <b>-exec</b>  easier  (‐
         <u>#1109</u>     &lt;<b>https://github.com/fish-shell/fish-shell/issues/1109</b>&gt;,    <u>#4632</u>    &lt;<b>https://github.com/fish-</b>
         <b>shell/fish-shell/issues/4632</b>&gt;).

       • Literally  accessing  a  zero-index  is  now  illegal  syntax  and  is  caught  by  the  parser  (<u>#4862</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/4862</b>&gt;). (fish indices start at 1)

       • Successive commas in brace expansions are handled in less surprising manner. For example, <b>{,,,}</b> expands
         to  four  empty  strings  rather  than  an  empty  string,  a  comma  and  an empty string again (<u>#3002</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/3002</b>&gt;,   <u>#4632</u>    &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/4632</b>&gt;).

       • <b>for</b>  loop  control  variables  are  no  longer  local to the <b>for</b> block (<u>#1935</u> &lt;<b>https://github.com/fish-</b>
         <b>shell/fish-shell/issues/1935</b>&gt;).

       • Variables   set   in   <b>if</b>   and   <b>while</b>   conditions   are   available   outside   the   block   (<u>#4820</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/4820</b>&gt;).

       • Local  exported (<b>set</b> <b>-lx</b>) vars are now visible to functions (<u>#1091</u> &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/1091</b>&gt;).

       • The new <b>math</b> builtin (see below) does not support logical expressions; <b>test</b> should be used  instead  (‐
         <u>#4777</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/4777</b>&gt;).

       • Range  expansion  will now behave sensibly when given a single positive and negative index (<b>$foo[5..-1]</b>
         or <b>$foo[-1..5]</b>), clamping to the last valid index without changing direction  if  the  list  has  fewer
         elements than expected.

       • <b>read</b>  now  uses  <b>-s</b>  as  short for <b>--silent</b> (à la <b>bash</b>); <b>--shell</b>’s abbreviation (formerly <b>-s</b>) is now <b>-S</b>
         instead (<u>#4490</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/4490</b>&gt;).

       • <b>cd</b> no longer resolves symlinks. fish now  maintains  a  virtual  path,  matching  other  shells  (<u>#3350</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/3350</b>&gt;).

       • <b>source</b>   now   requires   an   explicit   <b>-</b>   as   the  filename  to  read  from  the  terminal  (<u>#2633</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/2633</b>&gt;).

       • Arguments to <b>end</b> are now errors, instead of being silently ignored.

       • The names <b>argparse</b>, <b>read</b>, <b>set</b>, <b>status</b>, <b>test</b> and <b>[</b> are now reserved and not allowed as  function  names.
         This   prevents   users  unintentionally  breaking  stuff  (<u>#3000</u>  &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/3000</b>&gt;).

       • The <b>fish_user_abbreviations</b> variable is no longer used; abbreviations  will  be  migrated  to  the  new
         storage format automatically.

       • The  <b>FISH_READ_BYTE_LIMIT</b>  variable  is  now  called  <b>fish_byte_limit</b>  (<u>#4414</u> &lt;<b>https://github.com/fish-</b>
         <b>shell/fish-shell/issues/4414</b>&gt;).

       • Environment variables are no longer split into arrays  based  on  the  record  separator  character  on
         startup. Instead, variables are not split, unless their name ends in PATH, in which case they are split
         on colons (<u>#436</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/436</b>&gt;).

       • The  <b>history</b>  builtin’s  <b>--with-time</b>  option  has  been  removed;  this has been deprecated in favor of
         <b>--show-time</b> since 2.7.0 (<u>#4403</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/4403</b>&gt;).

       • The internal variables <b>__fish_datadir</b> and  <b>__fish_sysconfdir</b>  are  now  known  as  <b>__fish_data_dir</b>  and
         <b>__fish_sysconf_dir</b> respectively.

   <b>Deprecations</b>
       With  the  release  of fish 3, a number of features have been marked for removal in the future. All users
       are encouraged to explore alternatives.  A small number of these features are  currently  behind  feature
       flags, which are turned on at present but may be turned off by default in the future.

       A  new  feature flags mechanism is added for staging deprecations and breaking changes. Feature flags may
       be specified at launch with <b>fish</b> <b>--features</b> <b>...</b> or by setting the universal  <b>fish_features</b>  variable.  (‐
       <u>#4940</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/4940</b>&gt;)

       • The  use  of  the  <b>IFS</b>  variable  for  <b>read</b>  is  deprecated;  <b>IFS</b>  will be ignored in the future (<u>#4156</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/4156</b>&gt;). Use the <b>read</b> <b>--delimiter</b> option instead.

       • The <b>function</b> <b>--on-process-exit</b> switch  will  be  removed  in  future  (<u>#4700</u>  &lt;<b>https://github.com/fish-</b>
         <b>shell/fish-shell/issues/4700</b>&gt;). Use the <b>fish_exit</b> event instead: <b>function</b> <b>--on-event</b> <b>fish_exit</b>.

       • <b>$_</b>   is   deprecated   and  will  removed  in  the  future  (<u>#813</u>  &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/813</b>&gt;). Use <b>status</b> <b>current-command</b> in a command substitution instead.

       • <b>^</b> as a redirection deprecated and will be removed  in  the  future.   (<u>#4394</u>  &lt;<b>https://github.com/fish-</b>
         <b>shell/fish-shell/issues/4394</b>&gt;).  Use  <b>2&gt;</b>  to  redirect stderr. This is controlled by the <b>stderr-nocaret</b>
         feature flag.

       • <b>?</b> as a glob (wildcard) is deprecated and will be removed in the future (<u>#4520</u> &lt;<b>https://github.com/fish-</b>
         <b>shell/fish-shell/issues/4520</b>&gt;). This is controlled by the <b>qmark-noglob</b> feature flag.

   <b>Notable</b> <b>fixes</b> <b>and</b> <b>improvements</b>
   <b>Syntax</b> <b>changes</b> <b>and</b> <b>new</b> <b>commands</b>
       • fish now supports <b>&amp;&amp;</b>  (like  <b>and</b>),  <b>||</b>  (like  <b>or</b>),  and  <b>!</b>  (like  <b>not</b>),  for  better  migration  from
         POSIX-compliant shells (<u>#4620</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/4620</b>&gt;).

       • Variables may be used as commands (<u>#154</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/154</b>&gt;).

       • fish  may  be started in private mode via <b>fish</b> <b>--private</b>. Private mode fish sessions do not have access
         to the history file and any commands evaluated in private mode are not persisted for future sessions. A
         session variable <b>$fish_private_mode</b> can be queried to detect private mode and adjust  the  behavior  of
         scripts accordingly to respect the user’s wish for privacy.

       • A  new  <b>wait</b>  command for waiting on backgrounded processes (<u>#4498</u> &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/4498</b>&gt;).

       • <b>math</b> is now a builtin rather than  a  wrapper  around  <b>bc</b>  (<u>#3157</u>  &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/3157</b>&gt;). Floating point computations is now used by default, and can be controlled with the
         new <b>--scale</b> option (<u>#4478</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/4478</b>&gt;).

       • Setting  <b>$PATH</b>  no  longer  warns on non-existent directories, allowing for a single $PATH to be shared
         across machines (eg via dotfiles) (<u>#2969</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/2969</b>&gt;).

       • <b>while</b> sets <b>$status</b> to a non-zero value if the loop is  not  executed  (<u>#4982</u>  &lt;<b>https://github.com/fish-</b>
         <b>shell/fish-shell/issues/4982</b>&gt;).

       • Command  substitution  output  is  now  limited  to 10 MB by default, controlled by the <b>fish_read_limit</b>
         variable (<u>#3822</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/3822</b>&gt;). Notably, this is  larger  than
         most  operating  systems’  argument  size limit, so trying to pass argument lists this size to external
         commands has never worked.

       • The machine hostname, where available, is now exposed as the <b>$hostname</b> reserved variable. This  removes
         the           dependency          on          the          <b>hostname</b>          executable          (<u>#4422</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/4422</b>&gt;).

       • Bare <b>bind</b> invocations in config.fish  now  work.  The  <b>fish_user_key_bindings</b>  function  is  no  longer
         necessary,  but  will  still  be  executed  if  it  exists  (<u>#5191</u> &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/5191</b>&gt;).

       • <b>$fish_pid</b> and <b>$last_pid</b> are available as replacements for <b>%self</b> and <b>%last</b>.

   <b>New</b> <b>features</b> <b>in</b> <b>commands</b>
       • <b>alias</b>   has   a   new   <b>--save</b>   option   to   save   the   generated   function   immediately   (<u>#4878</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/4878</b>&gt;).

       • <b>bind</b>  has  a new <b>--silent</b> option to ignore bind requests for named keys not available under the current
         terminal (<u>#4188</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/4188</b>&gt;, <u>#4431</u> &lt;<b>https://github.com/fish-</b>
         <b>shell/fish-shell/issues/4431</b>&gt;).

       • <b>complete</b> has a new <b>--keep-order</b> option to show the provided or dynamically-generated argument  list  in
         the  same  order  as  specified,  rather than alphabetically (<u>#361</u> &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/361</b>&gt;).

       • <b>exec</b> prompts for confirmation if background jobs are running.

       • <b>funced</b> has a new <b>--save</b> option to automatically save the edited function after successfully editing  (‐
         <u>#4668</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/4668</b>&gt;).

       • <b>functions</b>  has  a  new  <b>--handlers</b>  option  to  show  functions  registered  as  event  handlers (<u>#4694</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/4694</b>&gt;).

       • <b>history</b> <b>search</b>  supports  globs  for  wildcard  searching  (<u>#3136</u>  &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/3136</b>&gt;)  and  has  a  new  <b>--reverse</b>  option  to  show entries from oldest to newest (<u>#4375</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/4375</b>&gt;).

       • <b>jobs</b> has a new <b>--quiet</b> option to silence the output.

       • <b>read</b> has a new <b>--delimiter</b> option for splitting  input  into  arrays  (<u>#4256</u>  &lt;<b>https://github.com/fish-</b>
         <b>shell/fish-shell/issues/4256</b>&gt;).

       • <b>read</b>  writes directly to stdout if called without arguments (<u>#4407</u> &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/4407</b>&gt;).

       • <b>read</b> can now read individual lines into separate variables without consuming the input in its  entirety
         via the new <b>/--line</b> option.

       • <b>set</b>    has   new   <b>--append</b>   and   <b>--prepend</b>   options   (<u>#1326</u>   &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/1326</b>&gt;).

       • <b>string</b> <b>match</b> with an empty pattern and <b>--entire</b> in glob mode now matches everything instead of  nothing
         (<u>#4971</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/4971</b>&gt;).

       • <b>string</b>  <b>split</b>  supports  a  new  <b>--no-empty</b>  option  to  exclude  empty  strings from the result (<u>#4779</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/4779</b>&gt;).

       • <b>string</b> has new subcommands <b>split0</b> and <b>join0</b> for working with NUL-delimited output.

       • <b>string</b> no longer stops processing text after NUL characters (<u>#4605</u> &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/4605</b>&gt;)

       • <b>string</b> <b>escape</b> has a new <b>--style</b> <b>regex</b> option for escaping strings to be  matched  literally  in  <b>string</b>
         regex operations.

       • <b>test</b> now supports floating point values in numeric comparisons.

   <b>Interactive</b> <b>improvements</b>
       • A   pipe   at   the  end  of  a  line  now  allows  the  job  to  continue  on  the  next  line  (<u>#1285</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/1285</b>&gt;).

       • Italics  and  dim  support  out  of  the   box   on   macOS   for   Terminal.app   and   iTerm   (<u>#4436</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/4436</b>&gt;).

       • <b>cd</b> tab completions no longer descend into the deepest unambiguous path (<u>#4649</u> &lt;<b>https://github.com/fish-</b>
         <b>shell/fish-shell/issues/4649</b>&gt;).

       • Pager  navigation  has  been  improved.  Most notably, moving down now wraps around, moving up from the
         commandline now jumps to the last element and moving right and left now reverse each  other  even  when
         wrapping around (<u>#4680</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/4680</b>&gt;).

       • Typing normal characters while the completion pager is active no longer shows the search field. Instead
         it  enters  them  into  the  command  line, and ends paging (<u>#2249</u> &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/2249</b>&gt;).

       • A new input binding <b>pager-toggle-search</b> toggles the search field in the completions pager on  and  off.
         By default, this is bound to Ctrl-S.

       • Searching  in  the  pager  now  does  a  full  fuzzy search (<u>#5213</u> &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/5213</b>&gt;).

       • The pager will now show the full command instead of just its last line if the number of completions  is
         large (<u>#4702</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/4702</b>&gt;).

       • Abbreviations can be tab-completed (<u>#3233</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/3233</b>&gt;).

       • Tildes  in  file  names  are  now  properly  escaped  in  completions  (<u>#2274</u> &lt;<b>https://github.com/fish-</b>
         <b>shell/fish-shell/issues/2274</b>&gt;).

       • Wrapping completions (from <b>complete</b> <b>--wraps</b> or <b>function</b> <b>--wraps</b>) can now inject arguments. For example,
         <b>complete</b> <b>gco</b> <b>--wraps</b> <b>'git</b> <b>checkout'</b>  now  works  properly  (<u>#1976</u>  &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/1976</b>&gt;).  The <b>alias</b> function has been updated to respect this behavior.

       • Path  completions  now  support  expansions,  meaning expressions like <b>python</b> <b>~/&lt;TAB&gt;</b> now provides file
         suggestions just like any other relative or absolute path. (This includes support for other expansions,
         too.)

       • Autosuggestions try to avoid arguments that are already present in the command line.

       • Notifications about crashed processes are now  always  shown,  even  in  command  substitutions  (<u>#4962</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/4962</b>&gt;).

       • The  screen  is no longer reset after a BEL, fixing graphical glitches (<u>#3693</u> &lt;<b>https://github.com/fish-</b>
         <b>shell/fish-shell/issues/3693</b>&gt;).

       • vi-mode now supports  ‘;’  and  ‘,’  motions.  This  introduces  new  {forward,backward}-jump-till  and
         repeat-jump{,-reverse} bind functions (<u>#5140</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/5140</b>&gt;).

       • The <b>*y</b> vi-mode binding now works (<u>#5100</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/5100</b>&gt;).

       • True   color   is   now  enabled  in  neovim  by  default  (<u>#2792</u>  &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/2792</b>&gt;).

       • Terminal size variables (<b>$COLUMNS</b>/<b>$LINES</b>) are now updated before <b>fish_prompt</b> is  called,  allowing  the
         prompt to react (<u>#904</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/904</b>&gt;).

       • Multi-line  prompts  no  longer  repeat  when  the terminal is resized (<u>#2320</u> &lt;<b>https://github.com/fish-</b>
         <b>shell/fish-shell/issues/2320</b>&gt;).

       • <b>xclip</b> support has been added to the clipboard integration  (<u>#5020</u>  &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/5020</b>&gt;).

       • The Alt-P keybinding paginates the last command if the command line is empty.

       • <b>$cmd_duration</b>  is  no  longer  reset  when  no  command  is  executed  (<u>#5011</u> &lt;<b>https://github.com/fish-</b>
         <b>shell/fish-shell/issues/5011</b>&gt;).

       • Deleting a one-character word no longer erases the next word as well  (<u>#4747</u>  &lt;<b>https://github.com/fish-</b>
         <b>shell/fish-shell/issues/4747</b>&gt;).

       • Token  history  search  (Alt-Up)  omits  duplicate  entries (<u>#4795</u> &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/4795</b>&gt;).

       • The <b>fish_escape_delay_ms</b> timeout, allowing the use of the escape key both on its own and as part  of  a
         control sequence, was applied to all control characters; this has been reduced to just the escape key.

       • Completing  a  function  shows  the  description  properly  (<u>#5206</u> &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/5206</b>&gt;).

       • <b>commandline</b> can now be used to set the commandline for the next command, restoring a behavior in  3.4.1
         (<u>#8807</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/8807</b>&gt;).

       • Added completions for

         • <b>ansible</b>,      including     <b>ansible-galaxy</b>,     <b>ansible-playbook</b>     and     <b>ansible-vault</b>     (<u>#4697</u>
           &lt;<b>https://github.com/fish-shell/fish-shell/issues/4697</b>&gt;)

         • <b>bb-power</b> (<u>#4800</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/4800</b>&gt;)

         • <b>bd</b> (<u>#4472</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/4472</b>&gt;)

         • <b>bower</b>

         • <b>clang</b> and <b>clang++</b> (<u>#4174</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/4174</b>&gt;)

         • <b>conda</b> (<u>#4837</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/4837</b>&gt;)

         • <b>configure</b> (for autoconf-generated files only)

         • <b>curl</b>

         • <b>doas</b> (<u>#5196</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/5196</b>&gt;)

         • <b>ebuild</b> (<u>#4911</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/4911</b>&gt;)

         • <b>emaint</b> (<u>#4758</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/4758</b>&gt;)

         • <b>eopkg</b> (<u>#4600</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/4600</b>&gt;)

         • <b>exercism</b> (<u>#4495</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/4495</b>&gt;)

         • <b>hjson</b>

         • <b>hugo</b> (<u>#4529</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/4529</b>&gt;)

         • <b>j</b> (from autojump <u>#4344</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/4344</b>&gt;)

         • <b>jbake</b> (<u>#4814</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/4814</b>&gt;)

         • <b>jhipster</b> (<u>#4472</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/4472</b>&gt;)

         • <b>kitty</b>

         • <b>kldload</b>

         • <b>kldunload</b>

         • <b>makensis</b> (<u>#5242</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/5242</b>&gt;)

         • <b>meson</b>

         • <b>mkdocs</b> (<u>#4906</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/4906</b>&gt;)

         • <b>ngrok</b> (<u>#4642</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/4642</b>&gt;)

         • OpenBSD’s   <b>pkg_add</b>,   <b>pkg_delete</b>,   <b>pkg_info</b>,   <b>pfctl</b>,   <b>rcctl</b>,   <b>signify</b>,    and    <b>vmctl</b>    (<u>#4584</u>
           &lt;<b>https://github.com/fish-shell/fish-shell/issues/4584</b>&gt;)

         • <b>openocd</b>

         • <b>optipng</b>

         • <b>opkg</b> (<u>#5168</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/5168</b>&gt;)

         • <b>pandoc</b> (<u>#2937</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/2937</b>&gt;)

         • <b>port</b> (<u>#4737</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/4737</b>&gt;)

         • <b>powerpill</b> (<u>#4800</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/4800</b>&gt;)

         • <b>pstack</b> (<u>#5135</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/5135</b>&gt;)

         • <b>serve</b> (<u>#5026</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/5026</b>&gt;)

         • <b>ttx</b>

         • <b>unzip</b>

         • <b>virsh</b> (<u>#5113</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/5113</b>&gt;)

         • <b>xclip</b> (<u>#5126</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/5126</b>&gt;)

         • <b>xsv</b>

         • <b>zfs</b> and <b>zpool</b> (<u>#4608</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/4608</b>&gt;)

       • Lots  of  improvements  to  completions  (especially  <b>darcs</b> (<u>#5112</u> &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/5112</b>&gt;), <b>git</b>, <b>hg</b> and <b>sudo</b>).

       • Completions for <b>yarn</b> and <b>npm</b> now require the <b>all-the-package-names</b> NPM package for full functionality.

       • Completions for <b>bower</b> and <b>yarn</b> now require the <b>jq</b> utility for full functionality.

       • Improved French translations.

   <b>Other</b> <b>fixes</b> <b>and</b> <b>improvements</b>
       • Significant   performance   improvements   to    <b>abbr</b>    (<u>#4048</u>    &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/4048</b>&gt;), setting variables (<u>#4200</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/4200</b>&gt;, ‐
         <u>#4341</u>   &lt;<b>https://github.com/fish-shell/fish-shell/issues/4341</b>&gt;),   executing  functions,  globs  (<u>#4579</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/4579</b>&gt;), <b>string</b>  reading  from  standard  input  (<u>#4610</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/4610</b>&gt;),    and   slicing   history   (in   particular,
         <b>$history[1]</b> for the last executed command).

       • Fish’s internal wcwidth function has been updated to deal with newer Unicode, and  the  width  of  some
         characters  can  be configured via the <b>fish_ambiguous_width</b> (<u>#5149</u> &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/5149</b>&gt;) and <b>fish_emoji_width</b> (<u>#2652</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/2652</b>&gt;)
         variables. Alternatively, a new build-time option INTERNAL_WCWIDTH can be  used  to  use  the  system’s
         wcwidth instead (<u>#4816</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/4816</b>&gt;).

       • <b>functions</b>  correctly  supports  <b>-d</b> as the short form of <b>--description</b>. (<u>#5105</u> &lt;<b>https://github.com/fish-</b>
         <b>shell/fish-shell/issues/5105</b>&gt;)

       • <b>/etc/paths</b>   is   now   parsed   like   macOS’   bash   <b>path_helper</b>,   fixing   $PATH   order    (<u>#4336</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/4336</b>&gt;,    <u>#4852</u>   &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/4852</b>&gt;) on macOS.

       • Using a read-only variable in a <b>for</b> loop produces an error, rather than  silently  producing  incorrect
         results (<u>#4342</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/4342</b>&gt;).

       • The universal variables filename no longer contains the hostname or MAC address. It is now at the fixed
         location <b>.config/fish/fish_variables</b> (<u>#1912</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/1912</b>&gt;).

       • Exported  variables  in  the global or universal scope no longer have their exported status affected by
         local variables (<u>#2611</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/2611</b>&gt;).

       • Major rework of terminal and job handling to eliminate bugs (<u>#3805</u> &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/3805</b>&gt;,      <u>#3952</u>      &lt;<b>https://github.com/fish-shell/fish-shell/issues/3952</b>&gt;,       <u>#4178</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/4178</b>&gt;,    <u>#4235</u>   &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/4235</b>&gt;,      <u>#4238</u>      &lt;<b>https://github.com/fish-shell/fish-shell/issues/4238</b>&gt;,       <u>#4540</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/4540</b>&gt;,    <u>#4929</u>   &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/4929</b>&gt;, <u>#5210</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/5210</b>&gt;).

       • Improvements to  the  manual  page  completion  generator  (<u>#2937</u>  &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/2937</b>&gt;, <u>#4313</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/4313</b>&gt;).

       • <b>suspend</b> <b>--force</b> now works correctly (<u>#4672</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/4672</b>&gt;).

       • Pressing  Ctrl-C  while  running a script now reliably terminates fish (<u>#5253</u> &lt;<b>https://github.com/fish-</b>
         <b>shell/fish-shell/issues/5253</b>&gt;).

   <b>For</b> <b>distributors</b> <b>and</b> <b>developers</b>
       • fish ships with a new build system based on CMake. CMake 3.2 is the minimum required version.  Although
         the  autotools-based  Makefile  and the Xcode project are still shipped with this release, they will be
         removed in the near future. All distributors and developers are encouraged  to  migrate  to  the  CMake
         build.

       • Build scripts for most platforms no longer require bash, using the standard sh instead.

       • The <b>hostname</b> command is no longer required for fish to operate.

       –

   <b>fish</b> <b>2.7.1</b> <b>(released</b> <b>December</b> <b>23,</b> <b>2017)</b>
       This release of fish fixes an issue where iTerm 2 on macOS would display a warning about paste bracketing
       being   left   on   when   starting   a  new  fish  session  (<u>#4521</u>  &lt;<b>https://github.com/fish-shell/fish-</b>
       <b>shell/issues/4521</b>&gt;).

       If you are upgrading from version 2.6.0 or before, please also review the release  notes  for  2.7.0  and
       2.7b1 (included below).

       –

   <b>fish</b> <b>2.7.0</b> <b>(released</b> <b>November</b> <b>23,</b> <b>2017)</b>
       There  are  no  major changes between 2.7b1 and 2.7.0. If you are upgrading from version 2.6.0 or before,
       please also review the release notes for 2.7b1 (included below).

       Xcode builds and macOS packages could not be produced with 2.7b1, but this is fixed in 2.7.0.

       –

   <b>fish</b> <b>2.7b1</b> <b>(released</b> <b>October</b> <b>31,</b> <b>2017)</b>
   <b>Notable</b> <b>improvements</b>
       • A new <b>cdh</b> (change directory using recent history) command  provides  a  more  friendly  alternative  to
         prevd/nextd and pushd/popd (<u>#2847</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/2847</b>&gt;).

       • A  new  <b>argparse</b> command is available to allow fish script to parse arguments with the same behavior as
         builtin commands. This also includes the  <b>fish_opt</b>  helper  command.  (<u>#4190</u>  &lt;<b>https://github.com/fish-</b>
         <b>shell/fish-shell/issues/4190</b>&gt;).

       • Invalid   array   indexes   are   now   silently   ignored  (<u>#826</u>  &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/826</b>&gt;, <u>#4127</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/4127</b>&gt;).

       • Improvements  to  the   debugging   facility,   including   a   prompt   specific   to   the   debugger
         (<b>fish_breakpoint_prompt</b>)   and  a  <b>status</b>  <b>is-breakpoint</b>  subcommand  (<u>#1310</u>  &lt;<b>https://github.com/fish-</b>
         <b>shell/fish-shell/issues/1310</b>&gt;).

       • <b>string</b>  supports  new  <b>lower</b>  and  <b>upper</b>  subcommands,  for  altering  the  case  of   strings   (<u>#4080</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/4080</b>&gt;).  The  case  changing is not locale-aware yet.-
         <b>string</b>  <b>escape</b>  has  a  new  <b>--style=xxx</b>  flag  where  <b>xxx</b>  can  be  <b>script</b>,   <b>var</b>,   or   <b>url</b>   (<u>#4150</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/4150</b>&gt;),  and  can  be reversed with <b>string</b> <b>unescape</b> (‐
         <u>#3543</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/3543</b>&gt;).

       • History can now be split into sessions with the <b>fish_history</b> variable, or not saved to disk at  all  (‐
         <u>#102</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/102</b>&gt;).

       • Read  history  is  now  controlled by the <b>fish_history</b> variable rather than the <b>--mode-name</b> flag (<u>#1504</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/1504</b>&gt;).

       • <b>command</b> now supports an <b>--all</b> flag to report all directories with the command. <b>which</b>  is  no  longer  a
         runtime dependency (<u>#2778</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/2778</b>&gt;).

       • fish can run commands before starting an interactive session using the new <b>--init-command</b>/<b>-C</b> options (‐
         <u>#4164</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/4164</b>&gt;).

       • <b>set</b>   has   a   new   <b>--show</b>   option   to   show   lots   of   information   about   variables  (<u>#4265</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/4265</b>&gt;).

   <b>Other</b> <b>significant</b> <b>changes</b>
       • The <b>COLUMNS</b> and <b>LINES</b> environment variables are now correctly set the first time <b>fish_prompt</b> is run  (‐
         <u>#4141</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/4141</b>&gt;).

       • <b>complete</b>’s   <b>--no-files</b>   option   works   as   intended   (<u>#112</u>   &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/112</b>&gt;).

       • <b>echo</b> <b>-h</b> now correctly echoes <b>-h</b> in line with other shells  (<u>#4120</u>  &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/4120</b>&gt;).

       • The  <b>export</b>  compatibility  function now returns zero on success, rather than always returning 1 (<u>#4435</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/4435</b>&gt;).

       • Stop  converting  empty  elements  in  MANPATH  to  “.”   (<u>#4158</u>   &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/4158</b>&gt;). The behavior being changed was introduced in fish 2.6.0.

       • <b>count</b>   <b>-h</b>   and   <b>count</b>   <b>--help</b>  now  return  1  rather  than  produce  command  help  output  (<u>#4189</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/4189</b>&gt;).

       • An attempt to <b>read</b> which stops because too much data is available still defines the variables given  as
         parameters (<u>#4180</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/4180</b>&gt;).

       • A   regression   in   fish  2.4.0  which  prevented  <b>pushd</b>  <b>+1</b>  from  working  has  been  fixed  (<u>#4091</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/4091</b>&gt;).

       • A regression in fish 2.6.0 where multiple <b>read</b> commands in non-interactive scripts were broken has been
         fixed (<u>#4206</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/4206</b>&gt;).

       • A regression in fish 2.6.0 involving universal variables with side-effects at startup such  as  <b>set</b>  <b>-U</b>
         <b>fish_escape_delay_ms</b> <b>10</b> has been fixed (<u>#4196</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/4196</b>&gt;).

       • Added completions for:

         • <b>as</b> (<u>#4130</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/4130</b>&gt;)

         • <b>cdh</b> (<u>#2847</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/2847</b>&gt;)

         • <b>dhcpd</b> (<u>#4115</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/4115</b>&gt;)

         • <b>ezjail-admin</b> (<u>#4324</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/4324</b>&gt;)

         • Fabric’s <b>fab</b> (<u>#4153</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/4153</b>&gt;)

         • <b>grub-file</b> (<u>#4119</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/4119</b>&gt;)

         • <b>grub-install</b> (<u>#4119</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/4119</b>&gt;)

         • <b>jest</b> (<u>#4142</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/4142</b>&gt;)

         • <b>kdeconnect-cli</b>

         • <b>magneto</b>          (<u>#4043</u>         &lt;<b>https://github.com/fish-shell/fish-shell/issues/4043</b>&gt;,         <u>#4108</u>
           &lt;<b>https://github.com/fish-shell/fish-shell/issues/4108</b>&gt;)

         • <b>mdadm</b> (<u>#4198</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/4198</b>&gt;)

         • <b>passwd</b> (<u>#4209</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/4209</b>&gt;)

         • <b>pip</b> and <b>pipenv</b> (<u>#4448</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/4448</b>&gt;)

         • <b>s3cmd</b> (<u>#4332</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/4332</b>&gt;)

         • <b>sbt</b> (<u>#4347</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/4347</b>&gt;)

         • <b>snap</b> (<u>#4215</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/4215</b>&gt;)

         • Sublime Text 3’s <b>subl</b> (<u>#4277</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/4277</b>&gt;)

       • Lots of improvements to completions.

       • Updated Chinese and French translations.

       • Improved completions for:

         • <b>apt</b>

         • <b>cd</b> (<u>#4061</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/4061</b>&gt;)

         • <b>composer</b> (<u>#4295</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/4295</b>&gt;)

         • <b>eopkg</b>

         • <b>flatpak</b> (<u>#4456</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/4456</b>&gt;)

         • <b>git</b> (<u>#4117</u>  &lt;<b>https://github.com/fish-shell/fish-shell/issues/4117</b>&gt;,  <u>#4147</u>  &lt;<b>https://github.com/fish-</b>
           <b>shell/fish-shell/issues/4147</b>&gt;,  <u>#4329</u>  &lt;<b>https://github.com/fish-shell/fish-shell/issues/4329</b>&gt;,  <u>#4368</u>
           &lt;<b>https://github.com/fish-shell/fish-shell/issues/4368</b>&gt;)

         • <b>gphoto2</b>

         • <b>killall</b> (<u>#4052</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/4052</b>&gt;)

         • <b>ln</b>

         • <b>npm</b> (<u>#4241</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/4241</b>&gt;)

         • <b>ssh</b> (<u>#4377</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/4377</b>&gt;)

         • <b>tail</b>

         • <b>xdg-mime</b> (<u>#4333</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/4333</b>&gt;)

         • <b>zypper</b> (<u>#4325</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/4325</b>&gt;)

   <b>fish</b> <b>2.6.0</b> <b>(released</b> <b>June</b> <b>3,</b> <b>2017)</b>
       Since the beta release of fish  2.6b1,  fish  version  2.6.0  contains  a  number  of  minor  fixes,  new
       completions  for <b>magneto</b> (<u>#4043</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/4043</b>&gt;), and improvements
       to the documentation.

   <b>Known</b> <b>issues</b>
       • Apple macOS Sierra 10.12.5 introduced a problem with launching web browsers from other  programs  using
         AppleScript.  This affects the fish Web configuration (<b>fish_config</b>); users on these platforms will need
         to manually open the address displayed in the terminal, such as  by  copying  and  pasting  it  into  a
         browser. This problem will be fixed with macOS 10.12.6.

       If  you  are  upgrading  from  version  2.5.0  or  before, please also review the release notes for 2.6b1
       (included below).

                                                         ----

   <b>fish</b> <b>2.6b1</b> <b>(released</b> <b>May</b> <b>14,</b> <b>2017)</b>
   <b>Notable</b> <b>fixes</b> <b>and</b> <b>improvements</b>
       • Jobs running in the background can now be removed from the list of jobs with the  new  <b>disown</b>  builtin,
         which  behaves  like  the  same  command  in  other  shells (<u>#2810</u> &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/2810</b>&gt;).

       • Command substitutions now have access to the terminal, like in other shells. This allows tools like <b>fzf</b>
         to    work    properly     (<u>#1362</u>     &lt;<b>https://github.com/fish-shell/fish-shell/issues/1362</b>&gt;,     <u>#3922</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/3922</b>&gt;).

       • In  cases  where  the  operating system does not report the size of the terminal, the <b>COLUMNS</b> and <b>LINES</b>
         environment variables are used; if they are unset, a default of 80x24 is assumed.

       • New     French     (<u>#3772</u>      &lt;<b>https://github.com/fish-shell/fish-shell/issues/3772</b>&gt;      &amp;      <u>#3788</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/3788</b>&gt;)       and      improved      German      (<u>#3834</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/3834</b>&gt;) translations.

       • fish no longer depends on the <b>which</b> external command.

   <b>Other</b> <b>significant</b> <b>changes</b>
       • Performance improvements in  launching  processes,  including  major  reductions  in  signal  blocking.
         Although  this  has  been  heavily  tested,  it  may  cause  problems  in  some  circumstances; set the
         <b>FISH_NO_SIGNAL_BLOCK</b> variable to 0 in your fish configuration file to return to the  old  behaviour  (‐
         <u>#2007</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/2007</b>&gt;).

       • Performance   improvements   in   prompts   and   functions   that   set   lots   of   colours   (<u>#3793</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/3793</b>&gt;).

       • The Delete key no longer deletes backwards (a regression in 2.5.0).

       • <b>functions</b> supports a new <b>--details</b> option, which identifies where the function was loaded  from  (<u>#3295</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/3295</b>&gt;),   and   a  <b>--details</b>  <b>--verbose</b>  option  which
         includes the function description (<u>#597</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/597</b>&gt;).

       • <b>read</b> will read up to 10 MiB by default, leaving the target variable empty and exiting with  status  122
         if the line is too long.  You can set a different limit with the <b>FISH_READ_BYTE_LIMIT</b> variable.

       • <b>read</b>  supports  a  new  <b>--silent</b>  option  to  hide the characters typed (<u>#838</u> &lt;<b>https://github.com/fish-</b>
         <b>shell/fish-shell/issues/838</b>&gt;), for when reading sensitive  data  from  the  terminal.   <b>read</b>  also  now
         accepts simple strings for the prompt (rather than scripts) with the new <b>-P</b> and <b>--prompt-str</b> options (‐
         <u>#802</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/802</b>&gt;).

       • <b>export</b> and <b>setenv</b> now understand colon-separated <b>PATH</b>, <b>CDPATH</b> and <b>MANPATH</b> variables.

       • <b>setenv</b>  is  no longer a simple alias for <b>set</b> <b>-gx</b> and will complain, just like the csh version, if given
         more than one value (<u>#4103</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/4103</b>&gt;).

       • <b>bind</b> supports a new <b>--list-modes</b> option (<u>#3872</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/3872</b>&gt;).

       • <b>bg</b> will check all of its arguments before backgrounding any jobs; any invalid arguments  will  cause  a
         failure,  but  non-existent  (eg  recently  exited)  jobs  are ignored (<u>#3909</u> &lt;<b>https://github.com/fish-</b>
         <b>shell/fish-shell/issues/3909</b>&gt;).

       • <b>funced</b> warns if the function being  edited  has  not  been  modified  (<u>#3961</u>  &lt;<b>https://github.com/fish-</b>
         <b>shell/fish-shell/issues/3961</b>&gt;).

       • <b>printf</b>   correctly   outputs   “long   long”   integers   (<u>#3352</u>   &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/3352</b>&gt;).

       • <b>status</b>  supports  a  new  <b>current-function</b>  subcommand  to  print  the  current  function  name  (<u>#1743</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/1743</b>&gt;).

       • <b>string</b> supports a new <b>repeat</b> subcommand (<u>#3864</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/3864</b>&gt;).
         <b>string</b>  <b>match</b>  supports  a  new  <b>--entire</b>  option  to  emit the entire line matched by a pattern (<u>#3957</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/3957</b>&gt;). <b>string</b> <b>replace</b> supports a new <b>--filter</b>  option
         to   only   emit  lines  which  underwent  a  replacement  (<u>#3348</u>  &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/3348</b>&gt;).

       • <b>test</b> supports the  <b>-k</b>  option  to  test  for  sticky  bits  (<u>#733</u>  &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/733</b>&gt;).

       • <b>umask</b> understands symbolic modes (<u>#738</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/738</b>&gt;).

       • Empty  components  in  the  <b>CDPATH</b>,  <b>MANPATH</b>  and  <b>PATH</b>  variables  are  now  converted  to  “.” (<u>#2106</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/2106</b>&gt;,   <u>#3914</u>    &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/3914</b>&gt;).

       • New  versions  of  ncurses (6.0 and up) wipe terminal scrollback buffers with certain commands; the <b>C-l</b>
         binding tries to avoid this (<u>#2855</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/2855</b>&gt;).

       • Some systems’ <b>su</b> implementations do not set the <b>USER</b> environment variable; it is  now  reset  for  root
         users (<u>#3916</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/3916</b>&gt;).

       • Under  terminals  which  support  it,  bracketed  paste is enabled, escaping problematic characters for
         security and convience (<u>#3871</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/3871</b>&gt;).   Inside  single
         quotes  (<b>'</b>),  single  quotes and backslashes in pasted text are escaped (<u>#967</u> &lt;<b>https://github.com/fish-</b>
         <b>shell/fish-shell/issues/967</b>&gt;). The <b>fish_clipboard_paste</b> function (bound to <b>C-v</b> by default) is still the
         recommended pasting method where possible as it includes this functionality and more.

       • Processes in pipelines are no longer signalled as soon as one command in the pipeline has completed  (‐
         <u>#1926</u>  &lt;<b>https://github.com/fish-shell/fish-shell/issues/1926</b>&gt;). This behaviour matches other shells mre
         closely.

       • All  functions  requiring  Python  work  with  whichever  version  of  Python   is   installed   (<u>#3970</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/3970</b>&gt;).  Python 3 is preferred, but Python 2.6 remains
         the minimum version required.

       • The color of the cancellation character can be controlled  by  the  <b>fish_color_cancel</b>  variable  (<u>#3963</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/3963</b>&gt;).

       • Added completions for:

       • <b>caddy</b> (<u>#4008</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/4008</b>&gt;)

       • <b>castnow</b> (<u>#3744</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/3744</b>&gt;)

       • <b>climate</b> (<u>#3760</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/3760</b>&gt;)

       • <b>flatpak</b>

       • <b>gradle</b> (<u>#3859</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/3859</b>&gt;)

       • <b>gsettings</b> (<u>#4001</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/4001</b>&gt;)

       • <b>helm</b> (<u>#3829</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/3829</b>&gt;)

       • <b>i3-msg</b> (<u>#3787</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/3787</b>&gt;)

       • <b>ipset</b> (<u>#3924</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/3924</b>&gt;)

       • <b>jq</b> (<u>#3804</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/3804</b>&gt;)

       • <b>light</b> (<u>#3752</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/3752</b>&gt;)

       • <b>minikube</b> (<u>#3778</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/3778</b>&gt;)

       • <b>mocha</b> (<u>#3828</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/3828</b>&gt;)

       • <b>mkdosfs</b> (<u>#4017</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/4017</b>&gt;)

       • <b>pv</b> (<u>#3773</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/3773</b>&gt;)

       • <b>setsid</b> (<u>#3791</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/3791</b>&gt;)

       • <b>terraform</b> (<u>#3960</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/3960</b>&gt;)

       • <b>usermod</b> (<u>#3775</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/3775</b>&gt;)

       • <b>xinput</b>

       • <b>yarn</b> (<u>#3816</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/3816</b>&gt;)

       • Improved completions for <b>adb</b> (<u>#3853</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/3853</b>&gt;), <b>apt</b> (<u>#3771</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/3771</b>&gt;),     <b>bzr</b>    (<u>#3769</u>    &lt;<b>https://github.com/fish-</b>
         <b>shell/fish-shell/issues/3769</b>&gt;),  <b>dconf</b>,  <b>git</b>  (including   <u>#3743</u>   &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/3743</b>&gt;),  <b>grep</b>  (<u>#3789</u>  &lt;<b>https://github.com/fish-shell/fish-shell/issues/3789</b>&gt;),  <b>go</b> (<u>#3789</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/3789</b>&gt;),    <b>help</b>    (<u>#3789</u>    &lt;<b>https://github.com/fish-</b>
         <b>shell/fish-shell/issues/3789</b>&gt;), <b>hg</b> (<u>#3975</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/3975</b>&gt;), <b>htop</b>
         (<u>#3789</u>          &lt;<b>https://github.com/fish-shell/fish-shell/issues/3789</b>&gt;),         <b>killall</b>         (<u>#3996</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/3996</b>&gt;),  <b>lua</b>,  <b>man</b>  (<u>#3762</u>   &lt;<b>https://github.com/fish-</b>
         <b>shell/fish-shell/issues/3762</b>&gt;), <b>mount</b> (<u>#3764</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/3764</b>&gt; &amp; ‐
         <u>#3841</u>  &lt;<b>https://github.com/fish-shell/fish-shell/issues/3841</b>&gt;),  <b>obnam</b> (<u>#3924</u> &lt;<b>https://github.com/fish-</b>
         <b>shell/fish-shell/issues/3924</b>&gt;),  <b>perl</b>  (<u>#3856</u>  &lt;<b>https://github.com/fish-shell/fish-shell/issues/3856</b>&gt;),
         <b>portmaster</b>     (<u>#3950</u>     &lt;<b>https://github.com/fish-shell/fish-shell/issues/3950</b>&gt;),     <b>python</b>    (<u>#3840</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/3840</b>&gt;),    <b>ssh</b>    (<u>#3781</u>     &lt;<b>https://github.com/fish-</b>
         <b>shell/fish-shell/issues/3781</b>&gt;),   <b>scp</b>  (<u>#3781</u>  &lt;<b>https://github.com/fish-shell/fish-shell/issues/3781</b>&gt;),
         <b>systemctl</b>   (<u>#3757</u>   &lt;<b>https://github.com/fish-shell/fish-shell/issues/3757</b>&gt;)    and    <b>udisks</b>    (<u>#3764</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/3764</b>&gt;).

                                                         ----

   <b>fish</b> <b>2.5.0</b> <b>(released</b> <b>February</b> <b>3,</b> <b>2017)</b>
       There  are  no  major changes between 2.5b1 and 2.5.0. If you are upgrading from version 2.4.0 or before,
       please also review the release notes for 2.5b1 (included below).

   <b>Notable</b> <b>fixes</b> <b>and</b> <b>improvements</b>
       • The Home, End, Insert, Delete, Page Up and  Page  Down  keys  work  in  Vi-style  key  bindings  (<u>#3731</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/3731</b>&gt;).

                                                         ----

   <b>fish</b> <b>2.5b1</b> <b>(released</b> <b>January</b> <b>14,</b> <b>2017)</b>
   <b>Platform</b> <b>Changes</b>
       Starting  with  version  2.5,  fish  requires  a more up-to-date version of C++, specifically C++11 (from
       2011). This affects some older platforms:

   <b>Linux</b>
       For users building from source, GCC’s g++ 4.8 or later, or LLVM’s clang 3.3 or later, are known to  work.
       Older platforms may require a newer compiler installed.

       Unfortunately, because of the complexity of the toolchain, binary packages are no longer published by the
       fish-shell developers for the following platforms:

       • Red Hat Enterprise Linux and CentOS 5 &amp; 6 for 64-bit builds

       • Ubuntu 12.04 (EoLTS April 2017)

       • Debian 7 (EoLTS May 2018)

       Installing newer version of fish on these systems will require building from source.

   <b>OS</b> <b>X</b> <b>SnowLeopard</b>
       Starting  with  version 2.5, fish requires a C++11 standard library on OS X 10.6 (“SnowLeopard”). If this
       library is not installed, you will see this error: <b>dyld:</b> <b>Library</b> <b>not</b> <b>loaded:</b> <b>/usr/lib/libc++.1.dylib</b>

       MacPorts is the easiest way to obtain this library. After installing  the  SnowLeopard  MacPorts  release
       from the install page, run:

          sudo port -v install libcxx

       Now fish should launch successfully. (Please open an issue if it does not.)

       This is only necessary on 10.6. OS X 10.7 and later include the required library by default.

   <b>Other</b> <b>significant</b> <b>changes</b>
       • Attempting  to  exit  with running processes in the background produces a warning, then signals them to
         terminate if a second attempt to exit is  made.  This  brings  the  behaviour  for  running  background
         processes    into    line   with   stopped   processes.   (<u>#3497</u>   &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/3497</b>&gt;)

       • <b>random</b> can now have start, stop and step values specified, or the new <b>choice</b> subcommand can be used  to
         pick an argument from a list (<u>#3619</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/3619</b>&gt;).

       • A  new  key  bindings  preset,  <b>fish_hybrid_key_bindings</b>,  including  all  the Emacs-style and Vi-style
         bindings, which behaves  like  <b>fish_vi_key_bindings</b>  in  fish  2.3.0  (<u>#3556</u>  &lt;<b>https://github.com/fish-</b>
         <b>shell/fish-shell/issues/3556</b>&gt;).

       • <b>function</b>  now  returns  an  error  when  called with invalid options, rather than defining the function
         anyway (<u>#3574</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/3574</b>&gt;). This was a regression present in
         fish 2.3 and 2.4.0.

       • fish no longer prints a warning when it identifies a running instance of  an  old  version  (2.1.0  and
         earlier). Changes to universal variables may not propagate between these old versions and 2.5b1.

       • Improved  compatiblity  with  Android  (<u>#3585</u>  &lt;<b>https://github.com/fish-shell/fish-shell/issues/3585</b>&gt;),
         MSYS/mingw   (<u>#2360</u>   &lt;<b>https://github.com/fish-shell/fish-shell/issues/2360</b>&gt;),   and   Solaris   (<u>#3456</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/3456</b>&gt;,    <u>#3340</u>   &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/3340</b>&gt;).

       • Like other shells, the <b>test</b> builting now returns an error for numeric operations on invalid integers (‐
         <u>#3346</u>    &lt;<b>https://github.com/fish-shell/fish-shell/issues/3346</b>&gt;,    <u>#3581</u>     &lt;<b>https://github.com/fish-</b>
         <b>shell/fish-shell/issues/3581</b>&gt;).

       • <b>complete</b>  no  longer  recognises  <b>--authoritative</b> and <b>--unauthoritative</b> options, and they are marked as
         obsolete.

       • <b>status</b> accepts subcommands, and should be used like <b>status</b> <b>is-interactive</b>. The old options continue  to
         be supported for the foreseeable future (<u>#3526</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/3526</b>&gt;),
         although only one subcommand or option can be specified at a time.

       • Selection  mode  (used  with  “begin-selection”) no longer selects a character the cursor does not move
         over (<u>#3684</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/3684</b>&gt;).

       • List indexes are handled better, and a bit more liberally in some cases (<b>echo</b>  <b>$PATH[1</b>  <b>..</b>  <b>3]</b>  is  now
         valid) (<u>#3579</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/3579</b>&gt;).

       • The  <b>fish_mode_prompt</b>  function  is now simply a stub around <b>fish_default_mode_prompt</b>, which allows the
         mode prompt to be included more easily in customised prompt functions (<u>#3641</u>  &lt;<b>https://github.com/fish-</b>
         <b>shell/fish-shell/issues/3641</b>&gt;).

   <b>Notable</b> <b>fixes</b> <b>and</b> <b>improvements</b>
       • <b>alias</b>,  run  without  options  or  arguments,  lists  all  defined  aliases,  and aliases now include a
         description in the function signature that identifies them.

       • <b>complete</b>  accepts   empty   strings   as   descriptions   (<u>#3557</u>   &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/3557</b>&gt;).

       • <b>command</b>  accepts  <b>-q</b>/<b>--quiet</b>  in  combination with <b>--search</b> (<u>#3591</u> &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/3591</b>&gt;), providing a simple way of checking whether a command exists in scripts.

       • Abbreviations can now be renamed with <b>abbr</b> <b>--rename</b> <b>OLD_KEY</b>  <b>NEW_KEY</b>  (<u>#3610</u>  &lt;<b>https://github.com/fish-</b>
         <b>shell/fish-shell/issues/3610</b>&gt;).

       • The  command  synopses  printed  by  <b>--help</b>  options  work  better  with  copying  and  pasting  (<u>#2673</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/2673</b>&gt;).

       • <b>help</b>  launches  the  browser  specified  by  the  <b>$fish_help_browser</b>  <b>variable</b>  if  it  is  set  (<u>#3131</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/3131</b>&gt;).

       • History   merging   could   lose   items   under   certain   circumstances  and  is  now  fixed  (<u>#3496</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/3496</b>&gt;).

       • The <b>$status</b> variable is now set  to  123  when  a  syntactically  invalid  command  is  entered  (<u>#3616</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/3616</b>&gt;).

       • Exiting  fish  now  signals  all  background  processes  to  terminate,  not  just  stopped jobs (<u>#3497</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/3497</b>&gt;).

       • A  new  <b>prompt_hostname</b>  function  which  prints  a  hostname  suitable  for  use  in  prompts   (<u>#3482</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/3482</b>&gt;).

       • The  <b>__fish_man_page</b>  function (bound to Alt-h by default) now tries to recognize subcommands (e.g. <b>git</b>
         <b>add</b>       will        now        open        the        “git-add”        man        page)        (<u>#3678</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/3678</b>&gt;).

       • A new function <b>edit_command_buffer</b> (bound to Alt-e &amp; Alt-v by default) to edit the command buffer in an
         external      editor      (<u>#1215</u>      &lt;<b>https://github.com/fish-shell/fish-shell/issues/1215</b>&gt;,     <u>#3627</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/3627</b>&gt;).

       • <b>set_color</b>  now  supports  italics  (<b>--italics</b>),  dim  (<b>--dim</b>)  and  reverse  (<b>--reverse</b>)  modes  (<u>#3650</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/3650</b>&gt;).

       • Filesystems  with very slow locking (eg incorrectly-configured NFS) will no longer slow fish down (<u>#685</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/685</b>&gt;).

       • Improved completions for <b>apt</b> (<u>#3695</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/3695</b>&gt;), <b>fusermount</b>
         (<u>#3642</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/3642</b>&gt;), <b>make</b>  (<u>#3628</u>  &lt;<b>https://github.com/fish-</b>
         <b>shell/fish-shell/issues/3628</b>&gt;),       <b>netctl-auto</b>      (<u>#3378</u>      &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/3378</b>&gt;), <b>nmcli</b> (<u>#3648</u>  &lt;<b>https://github.com/fish-shell/fish-shell/issues/3648</b>&gt;),  <b>pygmentize</b>
         (<u>#3378</u>        &lt;<b>https://github.com/fish-shell/fish-shell/issues/3378</b>&gt;),       and       <b>tar</b>       (<u>#3719</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/3719</b>&gt;).

       • Added completions for:

       • <b>VBoxHeadless</b> (<u>#3378</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/3378</b>&gt;)

       • <b>VBoxSDL</b> (<u>#3378</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/3378</b>&gt;)

       • <b>base64</b> (<u>#3378</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/3378</b>&gt;)

       • <b>caffeinate</b> (<u>#3524</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/3524</b>&gt;)

       • <b>dconf</b> (<u>#3638</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/3638</b>&gt;)

       • <b>dig</b> (<u>#3495</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/3495</b>&gt;)

       • <b>dpkg-reconfigure</b>     (<u>#3521</u>     &lt;<b>https://github.com/fish-shell/fish-shell/issues/3521</b>&gt;     &amp;      <u>#3522</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/3522</b>&gt;)

       • <b>feh</b> (<u>#3378</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/3378</b>&gt;)

       • <b>launchctl</b> (<u>#3682</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/3682</b>&gt;)

       • <b>lxc</b>  (<u>#3554</u>  &lt;<b>https://github.com/fish-shell/fish-shell/issues/3554</b>&gt;  &amp;  <u>#3564</u> &lt;<b>https://github.com/fish-</b>
         <b>shell/fish-shell/issues/3564</b>&gt;),

       • <b>mddiagnose</b> (<u>#3524</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/3524</b>&gt;)

       • <b>mdfind</b> (<u>#3524</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/3524</b>&gt;)

       • <b>mdimport</b> (<u>#3524</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/3524</b>&gt;)

       • <b>mdls</b> (<u>#3524</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/3524</b>&gt;)

       • <b>mdutil</b> (<u>#3524</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/3524</b>&gt;)

       • <b>mkvextract</b> (<u>#3492</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/3492</b>&gt;)

       • <b>nvram</b> (<u>#3524</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/3524</b>&gt;)

       • <b>objdump</b> (<u>#3378</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/3378</b>&gt;)

       • <b>sysbench</b> (<u>#3491</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/3491</b>&gt;)

       • <b>tmutil</b> (<u>#3524</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/3524</b>&gt;)

                                                         ----

   <b>fish</b> <b>2.4.0</b> <b>(released</b> <b>November</b> <b>8,</b> <b>2016)</b>
       There are no major changes between 2.4b1 and 2.4.0.

   <b>Notable</b> <b>fixes</b> <b>and</b> <b>improvements</b>
       • The documentation is now generated properly and with the correct version identifier.

       • Automatic cursor changes are now only enabled on the subset of XTerm versions known  to  support  them,
         resolving  a problem where older versions printed garbage to the terminal before and after every prompt
         (<u>#3499</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/3499</b>&gt;).

       • Improved the title set in Apple Terminal.app.

       • Added completions for <b>defaults</b> and improved completions for <b>diskutil</b>  (<u>#3478</u>  &lt;<b>https://github.com/fish-</b>
         <b>shell/fish-shell/issues/3478</b>&gt;).

                                                         ----

   <b>fish</b> <b>2.4b1</b> <b>(released</b> <b>October</b> <b>18,</b> <b>2016)</b>
   <b>Significant</b> <b>changes</b>
       • The  clipboard  integration  has been revamped with explicit bindings.  The killring commands no longer
         copy from, or paste to, the X11 clipboard - use the new copy (<b>C-x</b>) and paste  (<b>C-v</b>)  bindings  instead.
         The  clipboard  is  now  available  on  OS  X  as  well  as  systems  using  X11  (e.g. Linux).  (<u>#3061</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/3061</b>&gt;)

       • <b>history</b> uses subcommands (<b>history</b> <b>delete</b>) rather than options (<b>history</b> <b>--delete</b>) for its actions (<u>#3367</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/3367</b>&gt;). You can no longer specify multiple actions via
         flags (e.g., <b>history</b> <b>--delete</b> <b>--save</b> <b>something</b>).

       • New <b>history</b> options have been added,  including  <b>--max=n</b>  to  limit  the  number  of  history  entries,
         <b>--show-time</b>  option to show timestamps (<u>#3175</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/3175</b>&gt;, ‐
         <u>#3244</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/3244</b>&gt;), and <b>--null</b>  to  null  terminate  history
         entries in the search output.

       • <b>history</b>  <b>search</b>  is  now  case-insensitive  by  default  (which  also  affects  <b>history</b>  <b>delete</b>) (<u>#3236</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/3236</b>&gt;).

       • <b>history</b> <b>delete</b> now  correctly  handles  multiline  commands  (<u>#31</u>  &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/31</b>&gt;).

       • Vi-style  bindings  no longer include all of the default emacs-style bindings; instead, they share some
         definitions (<u>#3068</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/3068</b>&gt;).

       • If there is no locale set in the environment, various known system configuration files will be  checked
         for  a  default.  If  no  locale can be found, <b>en_US-UTF.8</b> will be used (<u>#277</u> &lt;<b>https://github.com/fish-</b>
         <b>shell/fish-shell/issues/277</b>&gt;).

       • A  number  followed  by  a  caret  (e.g. <b>5^</b>)  is  no   longer   treated   as   a   redirection   (<u>#1873</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/1873</b>&gt;).

       • The  <b>$version</b>  special  variable  can  be  overwritten,  so  that  it can be used for other purposes if
         required.

   <b>Notable</b> <b>fixes</b> <b>and</b> <b>improvements</b>
       • The <b>fish_realpath</b> builtin has been renamed to <b>realpath</b> and made compatible with GNU <b>realpath</b>  when  run
         without  arguments  (<u>#3400</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/3400</b>&gt;). It is used only for
         systems  without  a  <b>realpath</b>  or   <b>grealpath</b>   utility   (<u>#3374</u>   &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/3374</b>&gt;).

       • Improved  color  handling  on terminals/consoles with 8-16 colors, particularly the use of bright named
         color (<u>#3176</u>  &lt;<b>https://github.com/fish-shell/fish-shell/issues/3176</b>&gt;,  <u>#3260</u>  &lt;<b>https://github.com/fish-</b>
         <b>shell/fish-shell/issues/3260</b>&gt;).

       • <b>fish_indent</b>  can  now  read  from  files  given  as  arguments,  rather than just standard input (<u>#3037</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/3037</b>&gt;).

       • Fuzzy tab completions behave in a less surprising  manner  (<u>#3090</u>  &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/3090</b>&gt;, <u>#3211</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/3211</b>&gt;).

       • <b>jobs</b>   should   only   print   its   header   line   once  (<u>#3127</u>  &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/3127</b>&gt;).

       • Wildcards in redirections are  highlighted  appropriately  (<u>#2789</u>  &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/2789</b>&gt;).

       • Suggestions will be offered more often, like after removing characters (<u>#3069</u> &lt;<b>https://github.com/fish-</b>
         <b>shell/fish-shell/issues/3069</b>&gt;).

       • <b>history</b> <b>--merge</b> now correctly interleaves items in chronological order (<u>#2312</u> &lt;<b>https://github.com/fish-</b>
         <b>shell/fish-shell/issues/2312</b>&gt;).

       • Options  for  <b>fish_indent</b>  have  been  aligned  with  the  other binaries - in particular, <b>-d</b> now means
         <b>--debug</b>. The <b>--dump</b> option has  been  renamed  to  <b>--dump-parse-tree</b>  (<u>#3191</u>  &lt;<b>https://github.com/fish-</b>
         <b>shell/fish-shell/issues/3191</b>&gt;).

       • The   display   of   bindings   in  the  Web-based  configuration  has  been  greatly  improved  (<u>#3325</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/3325</b>&gt;),  as  has  the  rendering  of  prompts   (<u>#2924</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/2924</b>&gt;).

       • fish  should  no longer hang using 100% CPU in the C locale (<u>#3214</u> &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/3214</b>&gt;).

       • A bug in FreeBSD 11 &amp; 12, Dragonfly BSD &amp; illumos  prevented  fish  from  working  correctly  on  these
         platforms  under  UTF-8  locales;  fish now avoids the buggy behaviour (<u>#3050</u> &lt;<b>https://github.com/fish-</b>
         <b>shell/fish-shell/issues/3050</b>&gt;).

       • Prompts which show git repository information (via <b>__fish_git_prompt</b>) are faster in large  repositories
         (<u>#3294</u>    &lt;<b>https://github.com/fish-shell/fish-shell/issues/3294</b>&gt;)    and    slow   filesystems   (<u>#3083</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/3083</b>&gt;).

       • fish 2.3.0 reintroduced a problem where the greeting was printed even when using <b>read</b>;  this  has  been
         corrected again (<u>#3261</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/3261</b>&gt;).

       • Vi  mode  changes  the cursor depending on the current mode (<u>#3215</u> &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/3215</b>&gt;).

       • Command  lines  with  escaped   space   characters   at   the   end   tab-complete   correctly   (<u>#2447</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/2447</b>&gt;).

       • Added completions for:

         • <b>arcanist</b> (<u>#3256</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/3256</b>&gt;)

         • <b>connmanctl</b> (<u>#3419</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/3419</b>&gt;)

         • <b>figlet</b> (<u>#3378</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/3378</b>&gt;)

         • <b>mdbook</b> (<u>#3378</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/3378</b>&gt;)

         • <b>ninja</b> (<u>#3415</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/3415</b>&gt;)

         • <b>p4</b>, the Perforce client (<u>#3314</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/3314</b>&gt;)

         • <b>pygmentize</b> (<u>#3378</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/3378</b>&gt;)

         • <b>ranger</b> (<u>#3378</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/3378</b>&gt;)

       • Improved  completions  for <b>aura</b> (<u>#3297</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/3297</b>&gt;), <b>abbr</b> (‐
         <u>#3267</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/3267</b>&gt;),  <b>brew</b>  (<u>#3309</u>  &lt;<b>https://github.com/fish-</b>
         <b>shell/fish-shell/issues/3309</b>&gt;),  <b>chown</b> (<u>#3380</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/3380</b>&gt;, ‐
         <u>#3383</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/3383</b>&gt;),<b>cygport</b> (<u>#3392</u>  &lt;<b>https://github.com/fish-</b>
         <b>shell/fish-shell/issues/3392</b>&gt;),  <b>git</b>  (<u>#3274</u>  &lt;<b>https://github.com/fish-shell/fish-shell/issues/3274</b>&gt;, ‐
         <u>#3226</u>    &lt;<b>https://github.com/fish-shell/fish-shell/issues/3226</b>&gt;,    <u>#3225</u>     &lt;<b>https://github.com/fish-</b>
         <b>shell/fish-shell/issues/3225</b>&gt;,   <u>#3094</u>   &lt;<b>https://github.com/fish-shell/fish-shell/issues/3094</b>&gt;,  <u>#3087</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/3087</b>&gt;,   <u>#3035</u>    &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/3035</b>&gt;,       <u>#3021</u>      &lt;<b>https://github.com/fish-shell/fish-shell/issues/3021</b>&gt;,      <u>#2982</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/2982</b>&gt;,   <u>#3230</u>    &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/3230</b>&gt;),   <b>kill</b>  &amp;  <b>pkill</b>  (<u>#3200</u>  &lt;<b>https://github.com/fish-shell/fish-shell/issues/3200</b>&gt;),
         <b>screen</b>      (<u>#3271</u>      &lt;<b>https://github.com/fish-shell/fish-shell/issues/3271</b>&gt;),      <b>wget</b>       (<u>#3470</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/3470</b>&gt;),   and   <b>xz</b>   (<u>#3378</u>  &lt;<b>https://github.com/fish-</b>
         <b>shell/fish-shell/issues/3378</b>&gt;).

       • Distributors, packagers and developers will notice that the build process produces more succinct output
         by  default;  use  <b>make</b>  <b>V=1</b>  to  get  verbose   output   (<u>#3248</u>   &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/3248</b>&gt;).

       • Improved  compatibility with minor platforms including musl (<u>#2988</u> &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/2988</b>&gt;), Cygwin (<u>#2993</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/2993</b>&gt;), Android  (‐
         <u>#3441</u>     &lt;<b>https://github.com/fish-shell/fish-shell/issues/3441</b>&gt;,    <u>#3442</u>    &lt;<b>https://github.com/fish-</b>
         <b>shell/fish-shell/issues/3442</b>&gt;),  Haiku  (<u>#3322</u>  &lt;<b>https://github.com/fish-shell/fish-shell/issues/3322</b>&gt;)
         and Solaris .

                                                         ----

   <b>fish</b> <b>2.3.1</b> <b>(released</b> <b>July</b> <b>3,</b> <b>2016)</b>
       This  is  a functionality and bugfix release. This release does not contain all the changes to fish since
       the last release, but fixes a number of issues directly affecting users at present and includes  a  small
       number of new features.

   <b>Significant</b> <b>changes</b>
       • A  new  <b>fish_key_reader</b>  binary  for  decoding  interactive keypresses (<u>#2991</u> &lt;<b>https://github.com/fish-</b>
         <b>shell/fish-shell/issues/2991</b>&gt;).

       • <b>fish_mode_prompt</b> has been updated to reflect the changes in the way the Vi input mode is set up  (<u>#3067</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/3067</b>&gt;), making this more reliable.

       • <b>fish_config</b>  can  now  properly  be  launched from the OS X app bundle (<u>#3140</u> &lt;<b>https://github.com/fish-</b>
         <b>shell/fish-shell/issues/3140</b>&gt;).

   <b>Notable</b> <b>fixes</b> <b>and</b> <b>improvements</b>
       • Extra lines were sometimes inserted into  the  output  under  Windows  (Cygwin  and  Microsoft  Windows
         Subsystem  for  Linux)  due  to  TTY  timestamps  not  being  updated  (<u>#2859</u> &lt;<b>https://github.com/fish-</b>
         <b>shell/fish-shell/issues/2859</b>&gt;).

       • The <b>string</b> builtin’s <b>match</b> mode now handles the combination of <b>-rnv</b> (match, invert and count) correctly
         (<u>#3098</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/3098</b>&gt;).

       • Improvements  to   TTY   special   character   handling   (<u>#3064</u>   &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/3064</b>&gt;), locale handling (<u>#3124</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/3124</b>&gt;) and
         terminal environment variable handling (<u>#3060</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/3060</b>&gt;).

       • Work  towards  handling  the terminal modes for external commands launched from initialisation files (‐
         <u>#2980</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/2980</b>&gt;).

       • Ease the upgrade path from fish 2.2.0 and before by warning users to restart fish if the <b>string</b> builtin
         is not available (<u>#3057</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/3057</b>&gt;).

       • <b>type</b> <b>-a</b> now syntax-colorizes function source output.

       • Added completions for <b>alsamixer</b>, <b>godoc</b>, <b>gofmt</b>, <b>goimports</b>, <b>gorename</b>, <b>lscpu</b>, <b>mkdir</b>, <b>modinfo</b>, <b>netctl-auto</b>,
         <b>poweroff</b>, <b>termite</b>, <b>udisksctl</b> and <b>xz</b> (<u>#3123</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/3123</b>&gt;).

       • Improved completions for <b>apt</b> (<u>#3097</u>  &lt;<b>https://github.com/fish-shell/fish-shell/issues/3097</b>&gt;),  <b>aura</b>  (‐
         <u>#3102</u>   &lt;<b>https://github.com/fish-shell/fish-shell/issues/3102</b>&gt;),<b>git</b>   (<u>#3114</u>  &lt;<b>https://github.com/fish-</b>
         <b>shell/fish-shell/issues/3114</b>&gt;),  <b>npm</b>  (<u>#3158</u>   &lt;<b>https://github.com/fish-shell/fish-shell/issues/3158</b>&gt;),
         <b>string</b> and <b>suspend</b> (<u>#3154</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/3154</b>&gt;).

                                                         ----

   <b>fish</b> <b>2.3.0</b> <b>(released</b> <b>May</b> <b>20,</b> <b>2016)</b>
       There are no significant changes between 2.3.0 and 2.3b2.

   <b>Other</b> <b>notable</b> <b>fixes</b> <b>and</b> <b>improvements</b>
       • <b>abbr</b> now allows non-letter keys (<u>#2996</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/2996</b>&gt;).

       • Define        a        few        extra        colours        on        first        start       (<u>#2987</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/2987</b>&gt;).

       • Multiple documentation updates.

       • Added completions for rmmod (<u>#3007</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/3007</b>&gt;).

       • Improved completions for git (<u>#2998</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/2998</b>&gt;).

   <b>Known</b> <b>issues</b>
       • Interactive commands started from fish configuration files or from the <b>-c</b>  option  may,  under  certain
         circumstances,  be  started  with  incorrect  terminal  modes  and fail to behave as expected. A fix is
         planned but requires further testing (<u>#2619</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/2619</b>&gt;).

                                                         ----

   <b>fish</b> <b>2.3b2</b> <b>(released</b> <b>May</b> <b>5,</b> <b>2016)</b>
   <b>Significant</b> <b>changes</b>
       • A new <b>fish_realpath</b> builtin and associated function  to  allow  the  use  of  <b>realpath</b>  even  on  those
         platforms   that   don’t   ship  an  appropriate  command  (<u>#2932</u>  &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/2932</b>&gt;).

       • Alt-# toggles the current command line between commented and uncommented states, making it easy to save
         a command in history without executing it.

       • The <b>fish_vi_mode</b> function is now deprecated in favour of <b>fish_vi_key_bindings</b>.

   <b>Other</b> <b>notable</b> <b>fixes</b> <b>and</b> <b>improvements</b>
       • Fix the build  on  Cygwin  (<u>#2952</u>  &lt;<b>https://github.com/fish-shell/fish-shell/issues/2952</b>&gt;)  and  RedHat
         Enterprise Linux/CentOS 5 (<u>#2955</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/2955</b>&gt;).

       • Avoid   confusing   the  terminal  line  driver  with  non-printing  characters  in  <b>fish_title</b>  (<u>#2453</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/2453</b>&gt;).

       • Improved completions for busctl, git (<u>#2585</u>  &lt;<b>https://github.com/fish-shell/fish-shell/issues/2585</b>&gt;,  ‐
         <u>#2879</u>     &lt;<b>https://github.com/fish-shell/fish-shell/issues/2879</b>&gt;,    <u>#2984</u>    &lt;<b>https://github.com/fish-</b>
         <b>shell/fish-shell/issues/2984</b>&gt;), and netctl.

                                                         ----

   <b>fish</b> <b>2.3b1</b> <b>(released</b> <b>April</b> <b>19,</b> <b>2016)</b>
   <b>Significant</b> <b>Changes</b>
       • A new <b>string</b> builtin to handle… strings! This builtin will measure,  split,  search  and  replace  text
         strings,  including  using  regular  expressions.  It can also be used to turn lists into plain strings
         using <b>join</b>. <b>string</b> can be used in place of <b>sed</b>, <b>grep</b>, <b>tr</b>, <b>cut</b>,  and  <b>awk</b>  in  many  situations.  (<u>#2296</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/2296</b>&gt;)

       • Allow  using  escape  as  the Meta modifier key, by waiting after seeing an escape character wait up to
         300ms for an additional character.  This is consistent with readline (e.g. bash) and can be  configured
         via  the  <b>fish_escape_delay_ms</b>  <b>variable</b>.  This  allows  using  escape  as  the  Meta  modifier. (<u>#1356</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/1356</b>&gt;)

       • Add new directories for vendor functions and configuration  snippets  (<u>#2500</u>  &lt;<b>https://github.com/fish-</b>
         <b>shell/fish-shell/issues/2500</b>&gt;)

       • A new <b>fish_realpath</b> builtin and associated <b>realpath</b> function should allow scripts to resolve path names
         via  <b>realpath</b>  regardless  of  whether  there  is  an  external  command of that name; albeit with some
         limitations. See the associated documentation.

   <b>Backward-incompatible</b> <b>changes</b>
       • Unmatched  globs  will  now  cause  an  error,  except  when  used  with  <b>for</b>,  <b>set</b>  or  <b>count</b>   (<u>#2719</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/2719</b>&gt;)

       • <b>and</b> and <b>or</b> will now bind to the closest <b>if</b> or <b>while</b>, allowing compound conditions without <b>begin</b> and <b>end</b>
         (<u>#1428</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/1428</b>&gt;)

       • <b>set</b>  <b>-ql</b>  now  searches  up to function scope for variables (<u>#2502</u> &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/2502</b>&gt;)

       • <b>status</b>  <b>-f</b>  will  now  behave  the  same  when  run  as  the  main  script  or  using   <b>source</b>   (<u>#2643</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/2643</b>&gt;)

       • <b>source</b>  no longer puts the file name in <b>$argv</b> if no arguments are given (<u>#139</u> &lt;<b>https://github.com/fish-</b>
         <b>shell/fish-shell/issues/139</b>&gt;)

       • History files are stored under  the  <b>XDG_DATA_HOME</b>  hierarchy  (by  default,  in  <b><a href="file:~/.local/share">~/.local/share</a></b>),  and
         existing        history        will        be        moved        on        first       use       (<u>#744</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/744</b>&gt;)

   <b>Other</b> <b>notable</b> <b>fixes</b> <b>and</b> <b>improvements</b>
       • Fish  no  longer   silences   errors   in   config.fish   (<u>#2702</u>   &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/2702</b>&gt;)

       • Directory  autosuggestions  will now descend as far as possible if there is only one child directory (‐
         <u>#2531</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/2531</b>&gt;)

       • Add support for bright colors (<u>#1464</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/1464</b>&gt;)

       • Allow Ctrl-J (<b>\cj</b>) to be bound separately from Ctrl-M (<b>\cm</b>) (<u>#217</u>  &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/217</b>&gt;)

       • psub now has a “-s”/“–suffix” option to name the temporary file with that suffix

       • Enable 24-bit colors on select terminals (<u>#2495</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/2495</b>&gt;)

       • Support for SVN status in the prompt (<u>#2582</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/2582</b>&gt;)

       • Mercurial  and SVN support have been added to the Classic + Git (now Classic + VCS) prompt (via the new
         __fish_vcs_prompt function) (<u>#2592</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/2592</b>&gt;)

       • export now handles variables with  a  “=”  in  the  value  (<u>#2403</u>  &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/2403</b>&gt;)

       • New completions for:

         • alsactl

         • Archlinux’s asp, makepkg

         • Atom’s apm (<u>#2390</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/2390</b>&gt;)

         • entr - the “Event Notify Test Runner” (<u>#2265</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/2265</b>&gt;)

         • Fedora’s dnf (<u>#2638</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/2638</b>&gt;)

         • OSX diskutil (<u>#2738</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/2738</b>&gt;)

         • pkgng (<u>#2395</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/2395</b>&gt;)

         • pulseaudio’s pacmd and pactl

         • rust’s rustc and cargo (<u>#2409</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/2409</b>&gt;)

         • sysctl (<u>#2214</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/2214</b>&gt;)

         • systemd’s  machinectl  (<u>#2158</u>  &lt;<b>https://github.com/fish-shell/fish-shell/issues/2158</b>&gt;), busctl (<u>#2144</u>
           &lt;<b>https://github.com/fish-shell/fish-shell/issues/2144</b>&gt;), systemd-nspawn, systemd-analyze,  localectl,
           timedatectl

         • and more

       • Fish   no   longer   has   a   function   called  sgrep,  freeing  it  for  user  customization  (<u>#2245</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/2245</b>&gt;)

       • A rewrite of the completions for cd, fixing  a  few  bugs  (<u>#2299</u>  &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/2299</b>&gt;,       <u>#2300</u>       &lt;<b>https://github.com/fish-shell/fish-shell/issues/2300</b>&gt;,      <u>#562</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/562</b>&gt;)

       • Linux VTs now run in a simplified mode  to  avoid  issues  (<u>#2311</u>  &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/2311</b>&gt;)

       • The vi-bindings now inherit from the emacs bindings

       • Fish will also execute <b>fish_user_key_bindings</b> when in vi-mode

       • <b>funced</b> will now also check $VISUAL (<u>#2268</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/2268</b>&gt;)

       • A new <b>suspend</b> function (<u>#2269</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/2269</b>&gt;)

       • Subcommand  completion  now  works  better  with split <a href="file:/usr">/usr</a> (<u>#2141</u> &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/2141</b>&gt;)

       • The   command-not-found-handler   can   now   be   overridden   by   defining   a    function    called
         <b>__fish_command_not_found_handler</b>    in    config.fish    (<u>#2332</u>    &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/2332</b>&gt;)

       • A few fixes to the Sorin theme

       • PWD shortening in the prompt can now be configured via the <b>fish_prompt_pwd_dir_length</b> variable, set  to
         the length per path component (<u>#2473</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/2473</b>&gt;)

       • fish  no  longer  requires <b>/etc/fish/config.fish</b> to correctly start, and now ships a skeleton file that
         only contains some documentation (<u>#2799</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/2799</b>&gt;)

                                                         ----

   <b>fish</b> <b>2.2.0</b> <b>(released</b> <b>July</b> <b>12,</b> <b>2015)</b>
   <b>Significant</b> <b>changes</b>
       • Abbreviations: the new <b>abbr</b> command allows for  interactively-expanded  abbreviations,  allowing  quick
         access to frequently-used commands (<u>#731</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/731</b>&gt;).

       • Vi  mode:  run <b>fish_vi_mode</b> to switch fish into the key bindings and prompt familiar to users of the Vi
         editor (<u>#65</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/65</b>&gt;).

       • New  inline   and   interactive   pager,   which   will   be   familiar   to   users   of   zsh   (<u>#291</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/291</b>&gt;).

       • Underlying  architectural  changes:  the  <b>fishd</b>  universal variable server has been removed as it was a
         source of many bugs and security problems. Notably, old fish sessions will not be able  to  communicate
         universal  variable  changes with new fish sessions. For best results, restart all running instances of
         <b>fish</b>.

       • The web-based configuration tool has been redesigned,  featuring  a  prompt  theme  chooser  and  other
         improvements.

       • New German, Brazilian Portuguese, and Chinese translations.

   <b>Backward-incompatible</b> <b>changes</b>
       These  are  kept  to  a  minimum, but either change undocumented features or are too hard to use in their
       existing forms. These changes may break existing scripts.

       • <b>commandline</b>  no  longer  interprets  functions  “in  reverse”,  instead  behaving  as  expected  (<u>#1567</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/1567</b>&gt;).

       • The  previously-undocumented  <b>CMD_DURATION</b>  variable  is  now  set  for  all  commands and contains the
         execution  time  of  the  last  command  in  milliseconds  (<u>#1585</u>  &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/1585</b>&gt;).  It  is  no  longer  exported  to  other commands (<u>#1896</u> &lt;<b>https://github.com/fish-</b>
         <b>shell/fish-shell/issues/1896</b>&gt;).

       • <b>if</b> / <b>else</b> conditional statements now return values consistent with the Single Unix Specification,  like
         other shells (<u>#1443</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/1443</b>&gt;).

       • A  new  “top-level” local scope has been added, allowing local variables declared on the commandline to
         be visible to subsequent commands. (<u>#1908</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/1908</b>&gt;)

   <b>Other</b> <b>notable</b> <b>fixes</b> <b>and</b> <b>improvements</b>
       • New documentation design (<u>#1662</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/1662</b>&gt;), which requires
         a Doxygen version 1.8.7 or newer to build.

       • Fish now defines a default directory for other packages to provide  completions.  By  default  this  is
         <b>/usr/share/fish/vendor-completions.d</b>;  on  systems  with  <b>pkgconfig</b> installed this path is discoverable
         with <b>pkg-config</b> <b>--variable</b> <b>completionsdir</b> <b>fish</b>.

       • A new parser removes many bugs; all existing syntax should keep working.

       • New <b>fish_preexec</b> and <b>fish_postexec</b> events are fired before and after job execution respectively  (<u>#1549</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/1549</b>&gt;).

       • Unmatched wildcards no longer prevent a job from running. Wildcards used interactively will still print
         an  error,  but  the  job  will  proceed  and  the  wildcard  will  expand  to  zero  arguments  (<u>#1482</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/1482</b>&gt;).

       • The <b>.</b> command is deprecated  and  the  <b>source</b>  command  is  preferred  (<u>#310</u>  &lt;<b>https://github.com/fish-</b>
         <b>shell/fish-shell/issues/310</b>&gt;).

       • <b>bind</b> supports “bind modes”, which allows bindings to be set for a particular named mode, to support the
         implementation of Vi mode.

       • A  new  <b>export</b>  alias,  which  behaves  like  other  shells (<u>#1833</u> &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/1833</b>&gt;).

       • <b>command</b> has a new <b>--search</b> option to print the name of the disk file that would be executed, like other
         shells’ <b>command</b> <b>-v</b> (<u>#1540</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/1540</b>&gt;).

       • <b>commandline</b> has a new <b>--paging-mode</b> option to support the new pager.

       • <b>complete</b> has a new <b>--wraps</b> option, which allows a command to (recursively) inherit the completions of a
         wrapped command  (<u>#393</u>  &lt;<b>https://github.com/fish-shell/fish-shell/issues/393</b>&gt;),  and  <b>complete</b>  <b>-e</b>  now
         correctly erases completions (<u>#380</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/380</b>&gt;).

       • Completions  are  now  generated  from  manual  pages  by  default  on  the  first  run  of  fish (<u>#997</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/997</b>&gt;).

       • <b>fish_indent</b>   can   now   produce   colorized   (<b>--ansi</b>)    and    HTML    (<b>--html</b>)    output    (<u>#1827</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/1827</b>&gt;).

       • <b>functions</b> <b>--erase</b> now prevents autoloaded functions from being reloaded in the current session.

       • <b>history</b>  has  a new <b>--merge</b> option, to incorporate history from other sessions into the current session
         (<u>#825</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/825</b>&gt;).

       • <b>jobs</b>  returns  1  if   there   are   no   active   jobs   (<u>#1484</u>   &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/1484</b>&gt;).

       • <b>read</b> has several new options:

       • <b>--array</b> to break input into an array (<u>#1540</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/1540</b>&gt;)

       • <b>--null</b>  to  break  lines  on  NUL  characters  rather  than  newlines  (<u>#1694</u> &lt;<b>https://github.com/fish-</b>
         <b>shell/fish-shell/issues/1694</b>&gt;)

       • <b>--nchars</b>  to  read  a  specific  number  of  characters   (<u>#1616</u>   &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/1616</b>&gt;)

       • <b>--right-prompt</b>    to    display    a    right-hand-side   prompt   during   interactive   read   (<u>#1698</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/1698</b>&gt;).

       • <b>type</b>  has  a  new  <b>-q</b>   option   to   suppress   output   (<u>#1540</u>   &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/1540</b>&gt;  and,  like  other  shells,  <b>type</b>  <b>-a</b>  now  prints  all  matches for a command (<u>#261</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/261</b>&gt;).

       • Pressing <b>f1</b> now shows  the  manual  page  for  the  current  command  (<u>#1063</u>  &lt;<b>https://github.com/fish-</b>
         <b>shell/fish-shell/issues/1063</b>&gt;).

       • <b>fish_title</b>  functions have access to the arguments of the currently running argument as <b>$argv[1]</b> (<u>#1542</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/1542</b>&gt;).

       • The OS command-not-found handler is used  on  Arch  Linux  (<u>#1925</u>  &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/1925</b>&gt;), nixOS (<u>#1852</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/1852</b>&gt;), openSUSE and
         Fedora (<u>#1280</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/1280</b>&gt;).

       • <b>Alt</b>+<b>.</b>  searches  backwards  in  the  token  history, mapping to the same behavior as inserting the last
         argument  of  the  previous  command,  like  other  shells  (<u>#89</u>   &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/89</b>&gt;).

       • The  <b>SHLVL</b>  environment  variable  is incremented correctly (<u>#1634</u> &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/1634</b>&gt; &amp; <u>#1693</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/1693</b>&gt;).

       • Added  completions  for  <b>adb</b>  (<u>#1165</u>  &lt;<b>https://github.com/fish-shell/fish-shell/issues/1165</b>&gt;  &amp;   <u>#1211</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/1211</b>&gt;),     <b>apt</b>    (<u>#2018</u>    &lt;<b>https://github.com/fish-</b>
         <b>shell/fish-shell/issues/2018</b>&gt;),  <b>aura</b>  (<u>#1292</u>  &lt;<b>https://github.com/fish-shell/fish-shell/issues/1292</b>&gt;),
         <b>composer</b>     (<u>#1607</u>     &lt;<b>https://github.com/fish-shell/fish-shell/issues/1607</b>&gt;),     <b>cygport</b>     (<u>#1841</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/1841</b>&gt;),   <b>dropbox</b>   (<u>#1533</u>   &lt;<b>https://github.com/fish-</b>
         <b>shell/fish-shell/issues/1533</b>&gt;),  <b>elixir</b> (<u>#1167</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/1167</b>&gt;),
         <b>fossil</b>,   <b>heroku</b>    (<u>#1790</u>    &lt;<b>https://github.com/fish-shell/fish-shell/issues/1790</b>&gt;),    <b>iex</b>    (<u>#1167</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/1167</b>&gt;),   <b>kitchen</b>   (<u>#2000</u>   &lt;<b>https://github.com/fish-</b>
         <b>shell/fish-shell/issues/2000</b>&gt;),  <b>nix</b>  (<u>#1167</u>   &lt;<b>https://github.com/fish-shell/fish-shell/issues/1167</b>&gt;),
         <b>node</b>/<b>npm</b>      (<u>#1566</u>      &lt;<b>https://github.com/fish-shell/fish-shell/issues/1566</b>&gt;),      <b>opam</b>     (<u>#1615</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/1615</b>&gt;),   <b>setfacl</b>   (<u>#1752</u>   &lt;<b>https://github.com/fish-</b>
         <b>shell/fish-shell/issues/1752</b>&gt;),       <b>tmuxinator</b>       (<u>#1863</u>      &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/1863</b>&gt;), and <b>yast2</b> (<u>#1739</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/1739</b>&gt;).

       • Improved completions for <b>brew</b>  (<u>#1090</u>  &lt;<b>https://github.com/fish-shell/fish-shell/issues/1090</b>&gt;  &amp;  <u>#1810</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/1810</b>&gt;),   <b>bundler</b>   (<u>#1779</u>   &lt;<b>https://github.com/fish-</b>
         <b>shell/fish-shell/issues/1779</b>&gt;),  <b>cd</b>   (<u>#1135</u>   &lt;<b>https://github.com/fish-shell/fish-shell/issues/1135</b>&gt;),
         <b>emerge</b>         (<u>#1840</u>         &lt;<b>https://github.com/fish-shell/fish-shell/issues/1840</b>&gt;),<b>git</b>        (<u>#1680</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/1680</b>&gt;,   <u>#1834</u>    &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/1834</b>&gt;   &amp;   <u>#1951</u>   &lt;<b>https://github.com/fish-shell/fish-shell/issues/1951</b>&gt;),   <b>man</b>   (<u>#960</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/960</b>&gt;),   <b>modprobe</b>   (<u>#1124</u>   &lt;<b>https://github.com/fish-</b>
         <b>shell/fish-shell/issues/1124</b>&gt;),  <b>pacman</b> (<u>#1292</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/1292</b>&gt;),
         <b>rpm</b>      (<u>#1236</u>       &lt;<b>https://github.com/fish-shell/fish-shell/issues/1236</b>&gt;),       <b>rsync</b>       (<u>#1872</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/1872</b>&gt;),     <b>scp</b>    (<u>#1145</u>    &lt;<b>https://github.com/fish-</b>
         <b>shell/fish-shell/issues/1145</b>&gt;),  <b>ssh</b>  (<u>#1234</u>   &lt;<b>https://github.com/fish-shell/fish-shell/issues/1234</b>&gt;),
         <b>sshfs</b>      (<u>#1268</u>     &lt;<b>https://github.com/fish-shell/fish-shell/issues/1268</b>&gt;),     <b>systemctl</b>     (<u>#1462</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/1462</b>&gt;,   <u>#1950</u>    &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/1950</b>&gt;   &amp;   <u>#1972</u>   &lt;<b>https://github.com/fish-shell/fish-shell/issues/1972</b>&gt;),  <b>tmux</b>  (<u>#1853</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/1853</b>&gt;),   <b>vagrant</b>   (<u>#1748</u>   &lt;<b>https://github.com/fish-</b>
         <b>shell/fish-shell/issues/1748</b>&gt;), <b>yum</b> (<u>#1269</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/1269</b>&gt;), and
         <b>zypper</b> (<u>#1787</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/1787</b>&gt;).

                                                         ----

   <b>fish</b> <b>2.1.2</b> <b>(released</b> <b>Feb</b> <b>24,</b> <b>2015)</b>
       fish   2.1.2   contains   a   workaround   for   a   filesystem   bug   in   Mac  OS  X  Yosemite.  <u>#1859</u>
       &lt;<b>https://github.com/fish-shell/fish-shell/issues/1859</b>&gt;

       Specifically, after installing fish 2.1.1 and then rebooting, “Verify Disk” in Disk Utility  will  report
       “Invalid  number  of  hard  links.” We don’t have any reports of data loss or other adverse consequences.
       fish 2.1.2 avoids triggering the bug, but does not repair an already affected filesystem. To  repair  the
       filesystem,  you can boot into Recovery Mode and use Repair Disk from Disk Utility. Linux and versions of
       OS X prior to Yosemite are believed to be unaffected.

       There are no other changes in this release.

                                                         ----

   <b>fish</b> <b>2.1.1</b> <b>(released</b> <b>September</b> <b>26,</b> <b>2014)</b>
       <b>Important:</b> if you are upgrading, stop all running instances of <b>fishd</b> as soon as possible after installing
       this release; it will be restarted automatically. On most  systems,  there  will  be  no  further  action
       required.  Note  that some environments (where <b>XDG_RUNTIME_DIR</b> is set), such as Fedora 20, will require a
       restart of all running fish processes before universal variables work as intended.

       Distributors are highly encouraged to call <b>killall</b> <b>fishd</b>, <b>pkill</b> <b>fishd</b> or similar in installation scripts,
       or to warn their users to do so.

   <b>Security</b> <b>fixes</b>
       • The fish_config web interface now uses an authentication token to protect requests and only responds to
         requests from the local machine with this token, preventing a remote code  execution  attack.  (closing
         CVE-2014-2914). <u>#1438</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/1438</b>&gt;

       • <b>psub</b>  and  <b>funced</b>  are  no longer vulnerable to attacks which allow local privilege escalation and data
         tampering  (closing  CVE-2014-2906  and  CVE-2014-3856).   <u>#1437</u>   &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/1437</b>&gt;

       • <b>fishd</b>  uses  a  secure  path  for  its  socket, preventing a local privilege escalation attack (closing
         CVE-2014-2905). <u>#1436</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/1436</b>&gt;

       • <b>__fish_print_packages</b> is no longer vulnerable to attacks which would allow local  privilege  escalation
         and    data    tampering    (closing    CVE-2014-3219).    <u>#1440</u>   &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/1440</b>&gt;

   <b>Other</b> <b>fixes</b>
       • <b>fishd</b> now ignores SIGPIPE, fixing crashes using tools like GNU Parallel and which occurred  more  often
         as  a result of the other <b>fishd</b> changes. <u>#1084</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/1084</b>&gt; &amp;
         <u>#1690</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/1690</b>&gt;

                                                         ----

   <b>fish</b> <b>2.1.0</b>
   <b>Significant</b> <b>Changes</b>
       • <b>Tab</b> <b>completions</b> <b>will</b> <b>fuzzy-match</b> <b>files.</b> <u>#568</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/568</b>&gt;

         When tab-completing a file, fish will first attempt prefix matches (<b>foo</b> matches <b>foobar</b>), then substring
         matches (<b>ooba</b> matches <b>foobar</b>), and lastly subsequence matches (<b>fbr</b> matches <b>foobar</b>). For example,  in  a
         directory  with  files foo1.txt, foo2.txt, foo3.txt…, you can type only the numeric part and hit tab to
         fill in the rest.

         This feature is implemented for files and executables. It is not  yet  implemented  for  options  (like
         <b>--foobar</b>), and not yet implemented across path components (like <b>/u/l/b</b> to match <b><a href="file:/usr/local/bin">/usr/local/bin</a></b>).

       • <b>Redirections</b>    <b>now</b>   <b>work</b>   <b>better</b>   <b>across</b>   <b>pipelines.</b>   <u>#110</u>   &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/110</b>&gt;, <u>#877</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/877</b>&gt;

         In particular, you can pipe stderr and stdout together, for example, with <b>cmd</b> <b>^&amp;1</b> <b>|</b> <b>tee</b> <b>log.txt</b>, or the
         more familiar <b>cmd</b> <b>2&gt;&amp;1</b> <b>|</b> <b>tee</b> <b>log.txt</b>.

       • <b>A</b> <b>single</b> <b>``%``</b> <b>now</b> <b>expands</b> <b>to</b> <b>the</b> <b>last</b>  <b>job</b>  <b>backgrounded.</b>  <u>#1008</u>  &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/1008</b>&gt;

         Previously,  a  single  <b>%</b>  would  pid-expand to either all backgrounded jobs, or all jobs owned by your
         user. Now it expands to the last job backgrounded. If no job is in the  background,  it  will  fail  to
         expand. In particular, <b>fg</b> <b>%</b> can be used to put the most recent background job in the foreground.

   <b>Other</b> <b>Notable</b> <b>Fixes</b>
       • alt-U  and  alt+C  now  uppercase  and  capitalize words, respectively.  <u>#995</u> &lt;<b>https://github.com/fish-</b>
         <b>shell/fish-shell/issues/995</b>&gt;

       • VTE based terminals should now know the working  directory.  <u>#906</u>  &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/906</b>&gt;

       • The autotools build now works on Mavericks. <u>#968</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/968</b>&gt;

       • The end-of-line binding (ctrl+E) now accepts autosuggestions. <u>#932</u> &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/932</b>&gt;

       • Directories  in  <b>/etc/paths</b>  (used  on  OS  X)  are now prepended instead of appended, similar to other
         shells. <u>#927</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/927</b>&gt;

       • Option-right-arrow  (used  for  partial  autosuggestion  completion)  now   works   on   iTerm2.   <u>#920</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/920</b>&gt;

       • Tab  completions now work properly within nested subcommands. <u>#913</u> &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/913</b>&gt;

       • <b>printf</b> supports <b>\e</b>, the escape character. <u>#910</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/910</b>&gt;

       • <b>fish_config</b>  <b>history</b>  no  longer  shows  duplicate  items.  <u>#900</u>   &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/900</b>&gt;

       • <b>$fish_user_paths</b>  is  now  prepended  to  $PATH  instead  of  appended.  <u>#888</u> &lt;<b>https://github.com/fish-</b>
         <b>shell/fish-shell/issues/888</b>&gt;

       • Jobs complete when all processes complete. <u>#876</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/876</b>&gt;

         For example, in previous versions of fish, <b>sleep</b> <b>10</b> <b>|</b> <b>echo</b> <b>Done</b> returns  control  immediately,  because
         echo  does  not  read  from  stdin.   Now  it  does not complete until sleep exits (presumably after 10
         seconds).

       • Better error reporting for square brackets. <u>#875</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/875</b>&gt;

       • fish no longer tries to add <b><a href="file:/bin">/bin</a></b> to <b>$PATH</b> unless PATH is totally empty. <u>#852</u>  &lt;<b>https://github.com/fish-</b>
         <b>shell/fish-shell/issues/852</b>&gt;

       • History    token    substitution    (alt-up)    now    works    correctly    inside   subshells.   <u>#833</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/833</b>&gt;

       • Flow  control  is   now   disabled,   freeing   up   ctrl-S   and   ctrl-Q   for   other   uses.   <u>#814</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/814</b>&gt;

       • sh-style    variable    setting    like    <b>foo=bar</b>   now   produces   better   error   messages.   <u>#809</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/809</b>&gt;

       • Commands with wildcards no longer produce  autosuggestions.  <u>#785</u>  &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/785</b>&gt;

       • funced  no longer freaks out when supplied with no arguments. <u>#780</u> &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/780</b>&gt;

       • fish.app  now  works  correctly  in  a  directory  containing  spaces.  <u>#774</u>  &lt;<b>https://github.com/fish-</b>
         <b>shell/fish-shell/issues/774</b>&gt;

       • Tab  completion  cycling  no  longer  occasionally  fails  to  repaint.  <u>#765</u> &lt;<b>https://github.com/fish-</b>
         <b>shell/fish-shell/issues/765</b>&gt;

       • Comments now work in eval’d strings. <u>#684</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/684</b>&gt;

       • History search (up-arrow) now shows the item matching the autosuggestion, if  that  autosuggestion  was
         truncated. <u>#650</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/650</b>&gt;

       • Ctrl-T  now  transposes  characters,  as  in  other  shells.  <u>#128</u> &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/128</b>&gt;

                                                         ----

   <b>fish</b> <b>2.0.0</b>
   <b>Significant</b> <b>Changes</b>
       • <b>Command</b> <b>substitutions</b> <b>now</b> <b>modify</b> <b>``$status``</b>  <b>:issue:`547`.</b>  Previously  the  exit  status  of  command
         substitutions  (like  <b>(pwd)</b>) was ignored; however now it modifies $status. Furthermore, the <b>set</b> command
         now only sets $status on failure; it is untouched on success. This allows for the following pattern:

            if set python_path (which python)
               ...
            end

         Because set does not modify  $status  on  success,  the  if  branch  effectively  tests  whether  <b>which</b>
         succeeded, and if so, whether the <b>set</b> also succeeded.

       • Improvements  to PATH handling. There is a new variable, fish_user_paths, which can be set universally,
         and whose contents are appended to $PATH <u>#527</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/527</b>&gt;

         • /etc/paths and /etc/paths.d are now respected on OS X

         • fish no longer modifies $PATH to find its own binaries

       • <b>Long</b> <b>lines</b> <b>no</b> <b>longer</b> <b>use</b> <b>ellipsis</b> <b>for</b> <b>line</b> <b>breaks</b>, and copy  and  paste  should  no  longer  include  a
         newline even if the line was broken <u>#300</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/300</b>&gt;

       • <b>New</b>  <b>syntax</b>  <b>for</b>  <b>index</b>  <b>ranges</b> (sometimes known as “slices”) <u>#212</u> &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/212</b>&gt;

       • <b>fish</b> <b>now</b> <b>supports</b> <b>an</b> <b>``else</b> <b>if``</b> <b>statement</b> <u>#134</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/134</b>&gt;

       • <b>Process</b> <b>and</b> <b>pid</b> <b>completion</b> <b>now</b> <b>works</b> <b>on</b> <b>OS</b> <b>X</b> <u>#129</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/129</b>&gt;

       • <b>fish</b> <b>is</b> <b>now</b> <b>relocatable</b>, and no longer depends  on  compiled-in  paths  <u>#125</u>  &lt;<b>https://github.com/fish-</b>
         <b>shell/fish-shell/issues/125</b>&gt;

       • <b>fish</b>   <b>now</b>   <b>supports</b>   <b>a</b>   <b>right</b>   <b>prompt</b>   <b>(RPROMPT)</b>   through  the  fish_right_prompt  function  <u>#80</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/80</b>&gt;

       • <b>fish</b> <b>now</b> <b>uses</b> <b>posix_spawn</b> <b>instead</b> <b>of</b> <b>fork</b> <b>when</b> <b>possible</b>, which is much faster  on  BSD  and  OS  X  <u>#11</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/11</b>&gt;

   <b>Other</b> <b>Notable</b> <b>Fixes</b>
       • Updated VCS completions (darcs, cvs, svn, etc.)

       • Avoid  calling  getcwd  on  the  main  thread, as it can hang <u>#696</u> &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/696</b>&gt;

       • Control-D (forward delete) no  longer  stops  at  a  period  <u>#667</u>  &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/667</b>&gt;

       • Completions for many new commands

       • fish now respects rxvt’s unique keybindings <u>#657</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/657</b>&gt;

       • xsel  is  no  longer  built  as  part  of  fish.  It will still be invoked if installed separately <u>#633</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/633</b>&gt;

       • __fish_filter_mime no longer spews <u>#628</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/628</b>&gt;

       • The –no-execute option  to  fish  no  longer  falls  over  when  reaching  the  end  of  a  block  <u>#624</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/624</b>&gt;

       • fish_config  knows  how  to  find  fish  even  if  it’s not in the $PATH <u>#621</u> &lt;<b>https://github.com/fish-</b>
         <b>shell/fish-shell/issues/621</b>&gt;

       • A  leading  space  now  prevents  writing  to  history,   as   is   done   in   bash   and   zsh   <u>#615</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/615</b>&gt;

       • Hitting  enter  after a backslash only goes to a new line if it is followed by whitespace or the end of
         the line <u>#613</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/613</b>&gt;

       • printf is now a builtin <u>#611</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/611</b>&gt;

       • Event handlers should no longer fire if signals are blocked  <u>#608</u>  &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/608</b>&gt;

       • set_color is now a builtin <u>#578</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/578</b>&gt;

       • man  page  completions  are  now  located  in  a  new  generated_completions directory, instead of your
         completions directory <u>#576</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/576</b>&gt;

       • tab now clears autosuggestions <u>#561</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/561</b>&gt;

       • tab completion from within a pair of quotes now  attempts  to  “appropriate”  the  closing  quote  <u>#552</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/552</b>&gt;

       • $EDITOR  can  now be a list: for example, <b>set</b> <b>EDITOR</b> <b>gvim</b> <b>-f</b>) <u>#541</u> &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/541</b>&gt;

       • <b>case</b> bodies are now indented <u>#530</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/530</b>&gt;

       • The profile switch <b>-p</b> no longer crashes <u>#517</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/517</b>&gt;

       • You can now control-C out of <b>read</b> <u>#516</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/516</b>&gt;

       • <b>umask</b> is now functional on OS X <u>#515</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/515</b>&gt;

       • Avoid calling getpwnam on the main thread, as it  can  hang  <u>#512</u>  &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/512</b>&gt;

       • Alt-F  or  Alt-right-arrow (Option-F or option-right-arrow) now accepts one word of an autosuggestion ‐
         <u>#435</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/435</b>&gt;

       • Setting fish as your login shell no longer  kills  OpenSUSE  <u>#367</u>  &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/367</b>&gt;

       • Backslashes  now  join  lines,  instead  of  creating  multiple commands <u>#347</u> &lt;<b>https://github.com/fish-</b>
         <b>shell/fish-shell/issues/347</b>&gt;

       • echo now  implements  the  -e  flag  to  interpret  escapes  <u>#337</u>  &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/337</b>&gt;

       • When the last token in the user’s input contains capital letters, use its case in preference to that of
         the autosuggestion <u>#335</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/335</b>&gt;

       • Descriptions now have their own muted color <u>#279</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/279</b>&gt;

       • Wildcards   beginning   with   a   .   (for   example,   <b>ls</b>   <b>.*</b>)   no  longer  match  .  and  ..  <u>#270</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/270</b>&gt;

       • Recursive wildcards now handle symlink loops <u>#268</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/268</b>&gt;

       • You can now delete history items from the  fish_config  web  interface  <u>#250</u>  &lt;<b>https://github.com/fish-</b>
         <b>shell/fish-shell/issues/250</b>&gt;

       • The  OS  X  build  now  weak  links  <b>wcsdup</b>  and  <b>wcscasecmp</b>  <u>#240</u> &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/240</b>&gt;

       • fish now saves and restores the process group, which prevents certain processes from being  erroneously
         reported as stopped <u>#197</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/197</b>&gt;

       • funced now takes an editor option <u>#187</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/187</b>&gt;

       • Alternating   row   colors   are  available  in  fish  pager  through  <b>fish_pager_color_secondary</b>  <u>#186</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/186</b>&gt;

       • Universal variable  values  are  now  stored  based  on  your  MAC  address,  not  your  hostname  <u>#183</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/183</b>&gt;

       • The  caret  ^  now  only  does a stderr redirection if it is the first character of a token, making git
         users happy <u>#168</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/168</b>&gt;

       • Autosuggestions  will  no  longer  cause  line   wrapping   <u>#167</u>   &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/167</b>&gt;

       • Better   handling   of   Unicode   combining   characters   <u>#155</u>   &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/155</b>&gt;

       • fish SIGHUPs processes more often <u>#138</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/138</b>&gt;

       • fish no longer causes <b>sudo</b> to ask for a password every time

       • fish behaves better under Midnight Commander <u>#121</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/121</b>&gt;

       • <b>set</b> <b>-e</b> no longer crashes <u>#100</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/100</b>&gt;

       • fish  now  will  automatically  import  history  from  bash,  if  there  is   no   fish   history   <u>#66</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/66</b>&gt;

       • Backslashed-newlines  inside  quoted  strings now behave more intuitively <u>#52</u> &lt;<b>https://github.com/fish-</b>
         <b>shell/fish-shell/issues/52</b>&gt;

       • Tab titles should be shown correctly in iTerm2 <u>#47</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/47</b>&gt;

       • scp remote path completion now sometimes works <u>#42</u> &lt;<b>https://github.com/fish-shell/fish-shell/issues/42</b>&gt;

       • The  <b>read</b>  builtin   no   longer   shows   autosuggestions   <u>#29</u>   &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/29</b>&gt;

       • Custom    key    bindings    can   now   be   set   via   the   <b>fish_user_key_bindings</b>   function   <u>#21</u>
         &lt;<b>https://github.com/fish-shell/fish-shell/issues/21</b>&gt;

       • All Python scripts now run correctly under both Python 2 and  Python  3  <u>#14</u>  &lt;<b>https://github.com/fish-</b>
         <b>shell/fish-shell/issues/14</b>&gt;

       • The  “accept  autosuggestion”  key  can  now  be  configured  <u>#19</u>  &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/19</b>&gt;

       • Autosuggestions  will  no  longer  suggest  invalid  commands  <u>#6</u>  &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/6</b>&gt;

                                                         ----

   <b>fishfish</b> <b>Beta</b> <b>r2</b>
   <b>Bug</b> <b>Fixes</b>
       • <b>Implicit</b> <b>cd</b> is back, for paths that start with one or two dots, a slash, or a tilde.

       • <b>Overrides</b> <b>of</b> <b>default</b> <b>functions</b> <b>should</b> <b>be</b> <b>fixed.</b> The “internalized scripts” feature is disabled for now.

       • <b>Disabled</b>  <b>delayed</b>  <b>suspend.</b>  This  is  a  strange  job-control  feature of BSD systems, including OS X.
         Disabling it frees up Control Y for other purposes; in particular, for yank, which now works on OS X.

       • <b>fish_indent</b> <b>is</b> <b>fixed.</b> In particular, the <b>funced</b> and <b>funcsave</b> functions work again.

       • A SIGTERM now ends the whole execution stack again (resolving <u>#13</u>  &lt;<b>https://github.com/fish-shell/fish-</b>
         <b>shell/issues/13</b>&gt;).

       • Bumped the __fish_config_interactive version number so the default fish_color_autosuggestion kicks in.

       • fish_config better handles combined term256 and classic colors like “555 yellow”.

   <b>New</b> <b>Features</b>
       • <b>A</b>  <b>history</b>  <b>builtin</b>,  and  associated interactive function that enables deleting history items. Example
         usage: * Print all history items beginning with echo: <b>history</b> <b>--prefix</b> <b>echo</b> * Print all  history  items
         containing  foo:  <b>history</b>  <b>--contains</b>  <b>foo</b>  *  Interactively  delete some items containing foo: <b>history</b>
         <b>--delete</b> <b>--contains</b> <b>foo</b>

       Credit to @siteshwar for implementation. Thanks @siteshwar!

                                                         ----

   <b>fishfish</b> <b>Beta</b> <b>r1</b>
   <b>Scripting</b>
       • No changes! All existing fish scripts, config files, completions, etc. from trunk  should  continue  to
         work.

   <b>New</b> <b>Features</b>
       • <b>Autosuggestions</b>.  Think  URL fields in browsers. When you type a command, fish will suggest the rest of
         the command after the cursor, in a muted gray when possible. You can accept  the  suggestion  with  the
         right arrow key or Ctrl-F. Suggestions come from command history, completions, and some custom code for
         cd;  there’s  a  lot  of  potential  for improvement here. The suggestions are computed on a background
         pthread, so they never slow down your typing. The autosuggestion  feature  is  incredible.  I  miss  it
         dearly every time I use anything else.

       • <b>term256</b>  <b>support</b>  where available, specifically modern xterms and OS X Lion. You can specify colors the
         old way (‘set_color cyan’) or by specifying RGB hex values (‘set_color FF3333’);  fish  will  pick  the
         closest  supported  color. Some xterms do not advertise term256 support either in the $TERM or terminfo
         max_colors field, but nevertheless support it. For that reason, fish will default into using it on  any
         xterm (but it can be disabled with an environment variable).

       • <b>Web-based</b>  <b>configuration</b> page. There is a new function ‘fish_config’. This spins up a simple Python web
         server and opens a browser window to it. From this web page, you can set your  shell  colors  and  view
         your functions, variables, and history; all changes apply immediately to all running shells. Eventually
         all configuration ought to be supported via this mechanism (but in addition to, not instead of, command
         line mechanisms).

       • <b>Man</b>  <b>page</b>  <b>completions</b>.  There is a new function ‘fish_update_completions’. This function reads all the
         man1 files from your manpath, removes the roff  formatting,  parses  them  to  find  the  commands  and
         options,  and  outputs  fish  completions  into <a href="file:~/.config/fish/completions.">~/.config/fish/completions.</a> It won’t overwrite existing
         completion files (except ones that it generated itself).

   <b>Programmatic</b> <b>Changes</b>
       • fish is now entirely in C++. I have no particular love for C++, but it provides a ready memory-model to
         replace halloc. We’ve made an effort to keep it to a sane and portable subset (no C++11, no  boost,  no
         going crazy with templates or smart pointers), but we do use the STL and a little tr1.

       • halloc is entirely gone, replaced by normal C++ ownership semantics.  If you don’t know what halloc is,
         well, now you have two reasons to be happy.

       • All  the  crufty  C  data  structures  are entirely gone. array_list_t, priority_queue_t, hash_table_t,
         string_buffer_t have been removed and replaced by  STL  equivalents  like  std::vector,  std::map,  and
         std::wstring. A lot of the string handling now uses std::wstring instead of wchar_t *

       • fish now spawns pthreads for tasks like syntax highlighting that require blocking I/O.

       • History  has  been completely rewritten. History files now use an extensible YAML-style syntax. History
         “merging” (multiple shells writing to the same history file) now works better. There is now  a  maximum
         history length of about 250k items (256 * 1024).

       • The parser has been “instanced,” so you can now create more than one.

       • Total #LoC has shrunk slightly even with the new features.

   <b>Performance</b>
       • fish  now runs syntax highlighting in a background thread, so typing commands is always responsive even
         on slow filesystems.

       • echo, test, and pwd are now builtins, which eliminates many forks.

       • The files in share/functions and share/completions now get  ‘internalized’  into  C  strings  that  get
         compiled in with fish. This substantially reduces the number of files touched at startup. A consequence
         is  that  you  cannot  change  these functions without recompiling, but often other functions depend on
         these “standard” functions, so changing them is perhaps not a good idea anyways.

       Here are some system call counts for launching and then exiting fish with the default  configuration,  on
       OS  X.  The  first column is fish trunk, the next column is with our changes, and the last column is bash
       for comparison. This data was collected via dtrace.

       before

       after

       bash

       open

       9

       4

       5

       fork

       28

       14

       0

       stat

       131

       85

       11

       lstat

       670

       0

       0

       read

       332

       80

       4

       write

       172

       149

       0

       The large number of forks relative to bash are due to fish’s insanely expensive default prompt, which  is
       unchanged  in my version. If we switch to a prompt comparable to bash’s (lame) default, the forks drop to
       16 with trunk, 4 after our changes.

       The large reduction in lstat() numbers is due to fish no longer needing to call ttyname() on OS X.

       We’ve got some work to do to be as lean as bash, but we’re on the right track.

   <b>Contributing</b> <b>To</b> <b>Fish</b>
       This document tells you how you can contribute to fish.

       Fish is free and open source software, distributed under the terms of the GPLv2.

       Contributions are welcome, and there are many ways to contribute!

       Whether you want to change some of the core Rust source, enhance or add a completion script or  function,
       improve the documentation or translate something, this document will tell you how.

   <b>Getting</b> <b>Set</b> <b>Up</b>
       Fish is developed on Github, at <u>https://github.com/fish-shell/fish-shell</u>.

       First,  you'll  need  an  account there, and you'll need a git clone of fish.  Fork it on Github and then
       run:

          git clone https://github.com/&lt;USERNAME&gt;/fish-shell.git

       This will create a copy of the fish repository in  the  directory  fish-shell  in  your  current  working
       directory.

       Also,  for  most  changes  you want to run the tests and so you'd get a setup to compile fish.  For that,
       you'll require:

       • Rust - when in doubt, try rustup

       • CMake

       • PCRE2 (headers and libraries) - optional, this will be downloaded if missing

       • gettext (headers and libraries) - optional, for translation support

       • Sphinx - optional, to build the documentation

       Of course not everything is  required  always  -  if  you  just  want  to  contribute  something  to  the
       documentation  you'll just need Sphinx, and if the change is very simple and obvious you can just send it
       in. Use your judgement!

       Once you have your changes, open a pull request on <u>https://github.com/fish-shell/fish-shell/pulls</u>.

   <b>Guidelines</b>
       In short:

       • Be conservative in what you need (keep  to  the  agreed  minimum  supported  Rust  version,  limit  new
         dependencies)

       • Use automated tools to help you (including <b>make</b> <b>fish_run_tests</b> and <b>build_tools/style.fish</b>)

   <b>Contributing</b> <b>completions</b>
       Completion scripts are the most common contribution to fish, and they are very welcome.

       In  general,  we'll  take all well-written completion scripts for a command that is publically available.
       This means no private tools or personal scripts, and we do reserve the right to reject for other reasons.

       Before you try to contribute them to fish, consider if the authors of the tool you are completing want to
       maintain the script instead.  Often that makes more sense, specifically because they can add new  options
       to  the  script  immediately  once  they  add  them, and don't have to maintain one completion script for
       multiple versions. If the authors no longer wish to maintain  the  script,  they  can  of  course  always
       contact  the fish maintainers to hand it over, preferably by opening a PR.  This isn't a requirement - if
       the authors don't want to maintain it, or you simply don't want to contact them, you can contribute  your
       script to fish.

       Completion scripts should

       1. Use  as few dependencies as possible - try to use fish's builtins like <b>string</b> instead of <b>grep</b> and <b>awk</b>,
          use <b>python</b> to read json instead of <b>jq</b> (because it's already a soft dependency for fish's tools)

       2. If it uses a common unix tool, use posix-compatible invocations - ideally it would work on  GNU/Linux,
          macOS, the BSDs and other systems

       3. Option  and  argument descriptions should be kept short.  The shorter the description, the more likely
          it is that fish can use more columns.

       4. Function names should start with <b>__fish</b>, and functions should be kept in the  completion  file  unless
          they're used elsewhere.

       5. Run <b>fish_indent</b> on your script.

       6. Try  not  to use minor convenience features right after they are available in fish - we do try to keep
          completion scripts backportable.  If something has a real impact on the  correctness  or  performance,
          feel free to use it, but if it is just a shortcut, please leave it.

       Put  your  completion  script into share/completions/name-of-command.fish. If you have multiple commands,
       you need multiple files.

       If you want to add tests, you probably want to add a littlecheck test. See below for details.

   <b>Contributing</b> <b>documentation</b>
       The documentation is stored in <b>doc_src/</b>, and written in ReStructured Text and built with Sphinx.

       To build it locally, run from the main fish-shell directory:

          sphinx-build -j 8 -b html -n doc_src/ /tmp/fish-doc/

       which will build the docs as html in /tmp/fish-doc. You can open it in a browser and see  that  it  looks
       okay.

       The builtins and various functions shipped with fish are documented in doc_src/cmds/.

   <b>Code</b> <b>Style</b>
       To ensure your changes conform to the style rules run

          build_tools/style.fish

       before committing your change. That will run our autoformatters:

       • <b>rustfmt</b> for Rust

       • <b>fish_indent</b> (shipped with fish) for fish script

       • <b>black</b> for python

       If  you’ve  already  committed  your  changes  that’s okay since it will then check the files in the most
       recent commit. This can be useful after you’ve merged another person’s change and want to check that it’s
       style is acceptable. However, in that case it will run <b>clang-format</b> to ensure the entire file,  not  just
       the lines modified by the commit, conform to the style.

       If you want to check the style of the entire code base run

          build_tools/style.fish --all

       That command will refuse to restyle any files if you have uncommitted changes.

   <b>Fish</b> <b>Script</b> <b>Style</b> <b>Guide</b>
       1. All  fish  scripts,  such  as  those in the <u>share/functions</u> and <u>tests</u> directories, should be formatted
          using the <b>fish_indent</b> command.

       2. Function names should be in all lowercase with  words  separated  by  underscores.  Private  functions
          should begin with an underscore. The first word should be <b>fish</b> if the function is unique to fish.

       3. The  first word of global variable names should generally be <b>fish</b> for public vars or <b>_fish</b> for private
          vars to minimize the possibility of name clashes with user defined vars.

   <b>Configuring</b> <b>Your</b> <b>Editor</b> <b>for</b> <b>Fish</b> <b>Scripts</b>
       If you use Vim: Install  <u>vim-fish</u>  &lt;<b>https://github.com/dag/vim-fish</b>&gt;,  make  sure  you  have  syntax  and
       filetype functionality in <b><a href="file:~/.vimrc">~/.vimrc</a></b>:

          syntax enable
          filetype plugin indent on

       Then turn on some options for nicer display of fish scripts in <b><a href="file:~/.vim/ftplugin/fish.vim">~/.vim/ftplugin/fish.vim</a></b>:

          " Set up :make to use fish for syntax checking.
          compiler fish

          " Set this to have long lines wrap inside comments.
          setlocal textwidth=79

          " Enable folding of block structures in fish.
          setlocal foldmethod=expr

       If  you  use Emacs: Install <u>fish-mode</u> &lt;<b>https://github.com/wwwjfy/emacs-fish</b>&gt; (also available in melpa and
       melpa-stable) and <b>(setq-default</b> <b>indent-tabs-mode</b> <b>nil)</b> for it (via  a  hook  or  in  <b>use-package</b>s  “:init”
       block). It can also be made to run fish_indent via e.g.

          (add-hook 'fish-mode-hook (lambda ()
              (add-hook 'before-save-hook 'fish_indent-before-save)))

   <b>Rust</b> <b>Style</b> <b>Guide</b>
       Use <b>cargo</b> <b>fmt</b> and <b>cargo</b> <b>clippy</b>. Clippy warnings can be turned off if there's a good reason to.

   <b>Testing</b>
       The  source  code  for  fish includes a large collection of tests. If you are making any changes to fish,
       running these tests is a good way to make sure the behaviour remains consistent and regressions  are  not
       introduced. Even if you don’t run the tests on your machine, they will still be run via Github Actions.

       You  are  strongly encouraged to add tests when changing the functionality of fish, especially if you are
       fixing a bug to help ensure there are no regressions in the future (i.e., we don’t reintroduce the bug).

       The tests can be found in three places:

       • src/tests for unit tests.

       • tests/checks for script tests, run by <u>littlecheck</u> &lt;<b>https://github.com/ridiculousfish/littlecheck</b>&gt;

       • tests/pexpects for interactive tests using <u>pexpect</u> &lt;<b>https://pexpect.readthedocs.io/en/stable/</b>&gt;

       When in doubt, the bulk of the tests should be added as a littlecheck test in tests/checks, as  they  are
       the  easiest  to  modify  and  run, and much faster and more dependable than pexpect tests. The syntax is
       fairly self-explanatory. It's a fish script with the expected output in <b>#</b>  <b>CHECK:</b>  or  <b>#</b>  <b>CHECKERR:</b>  (for
       stderr) comments.

       The  pexpects  are  written  in  python and can simulate input and output to/from a terminal, so they are
       needed for anything that needs actual interactivity. The runner is in  build_tools/pexpect_helper.py,  in
       case you need to modify something there.

   <b>Local</b> <b>testing</b>
       The tests can be run on your local computer on all operating systems.

          cmake path/to/fish-shell
          make fish_run_tests

   <b>Git</b> <b>hooks</b>
       Since  developers sometimes forget to run the tests, it can be helpful to use git hooks (see <a href="../man5/githooks.5.html">githooks</a>(5))
       to automate it.

       One possibility is a pre-push hook script like this one:

          #!<a href="file:/bin/sh">/bin/sh</a>
          #### A pre-push hook for the fish-shell project
          # This will run the tests when a push to master is detected, and will stop that if the tests fail
          # Save this as .git/hooks/pre-push and make it executable

          protected_branch='master'

          # Git gives us lines like "refs/heads/frombranch SOMESHA1 refs/heads/tobranch SOMESHA1"
          # We're only interested in the branches
          while read from _ to _; do
              if [ "x$to" = "xrefs/heads/$protected_branch" ]; then
                  isprotected=1
              fi
          done
          if [ "x$isprotected" = x1 ]; then
              echo "Running tests before push to master"
              make fish_run_tests
              RESULT=$?
              if [ $RESULT -ne 0 ]; then
                  echo "Tests failed for a push to master, we can't let you do that" &gt;&amp;2
                  exit 1
              fi
          fi
          exit 0

       This will check if the push is to the master branch and, if it is, only allow the push  if  running  <b>make</b>
       <b>fish_run_tests</b> succeeds. In some circumstances it may be advisable to circumvent this check with <b>git</b> <b>push</b>
       <b>--no-verify</b>, but usually that isn’t necessary.

       To install the hook, place the code in a new file <b>.git/hooks/pre-push</b> and make it executable.

   <b>Coverity</b> <b>Scan</b>
       We  use Coverity’s static analysis tool which offers free access to open source projects. While access to
       the tool itself is restricted, fish-shell organization members should  know  that  they  can  login  <u>here</u>
       &lt;<b>https://scan.coverity.com/projects/fish-shell-fish-shell?tab=overview</b>&gt;   with   their   GitHub  account.
       Currently, tests are triggered upon merging the <b>master</b> branch into <b>coverity_scan_master</b>. Even if you  are
       not a fish developer, you can keep an eye on our statistics there.

   <b>Contributing</b> <b>Translations</b>
       Fish uses the GNU gettext library to translate messages from English to other languages.

       Creating  and  updating translations requires the Gettext tools, including <b>xgettext</b>, <b>msgfmt</b> and <b>msgmerge</b>.
       Translation sources are stored in the <b>po</b> directory, named <b>LANG.po</b>, where <b>LANG</b> is the two letter ISO 639-1
       language code of the target language (eg <b>de</b> for German).

       To create a new translation:

       • generate a <b>messages.pot</b> file by running <b>build_tools/fish_xgettext.fish</b> from the source tree

       • copy <b>messages.pot</b> to <b>po/LANG.po</b>

       To update a translation:

       • generate a <b>messages.pot</b> file by running <b>build_tools/fish_xgettext.fish</b> from the source tree

       • update  the  existing  translation  by  running  <b>msgmerge</b>   <b>--update</b>   <b>--no-fuzzy-matching</b>   <b>po/LANG.po</b>
         <b>messages.pot</b>

       The  <b>--no-fuzzy-matching</b>  is  important  as  we  have  had  terrible  experiences  with gettext's "fuzzy"
       translations in the past.

       Many tools are available for  editing  translation  files,  including  command-line  and  graphical  user
       interface programs. For simple use, you can just use your text editor.

       Open up the po file, for example <b>po/sv.po</b>, and you'll see something like:

          msgid "%ls: No suitable job\n"
          msgstr ""

       The  <b>msgid</b>  here is the "name" of the string to translate, typically the english string to translate. The
       second line (<b>msgstr</b>) is where your translation goes.

       For example:

          msgid "%ls: No suitable job\n"
          msgstr "%ls: Inget passande jobb\n"

       Any <b>%s</b> / <b>%ls</b> or <b>%d</b> are placeholders that fish will use for formatting at runtime. It  is  important  that
       they match - the translated string should have the same placeholders in the same order.

       Also  any  escaped characters, like that <b>\n</b> newline at the end, should be kept so the translation has the
       same behavior.

       Our tests run <b>msgfmt</b>  <b>--check-format</b>  <b>/path/to/file</b>,  so  they  would  catch  mismatched  placeholders  -
       otherwise fish would crash at runtime when the string is about to be used.

       Be  cautious  about blindly updating an existing translation file. Trivial changes to an existing message
       (eg changing the punctuation) will cause existing translations to be removed, since the tools do  literal
       string matching. Therefore, in general, you need to carefully review any recommended deletions.

   <b>Setting</b> <b>Code</b> <b>Up</b> <b>For</b> <b>Translations</b>
       All  non-debug  messages  output  for  user  consumption  should be marked for translation. In Rust, this
       requires the use of the <b>wgettext!</b> or <b>wgettext_fmt!</b>  macros:

          streams.out.append(wgettext_fmt!("%ls: There are no jobs\n", argv[0]));

       All messages in fish script must be enclosed in  single  or  double  quote  characters  for  our  message
       extraction script to find them.  They must also be translated via a command substitution. This means that
       the following are <b>not</b> valid:

          echo (_ hello)
          _ "goodbye"

       Above should be written like this instead:

          echo (_ "hello")
          echo (_ "goodbye")

       You  can  use  either  single  or  double  quotes  to  enclose the message to be translated. You can also
       optionally include spaces after the opening parentheses or before the closing parentheses.

   <b>Versioning</b>
       The fish version is constructed by the <u>build_tools/git_version_gen.sh</u> script. For developers the  version
       is  the  branch  name  plus  the  output  of <b>git</b> <b>describe</b> <b>--always</b> <b>--dirty</b>. Normally the main part of the
       version will be the closest annotated tag. Which itself is usually the most recent release number  (e.g.,
       <b>2.6.0</b>).

   <b>License</b>
   <b>License</b> <b>for</b> <b>fish</b>
       <b>fish</b>  Copyright  © 2005-2009 Axel Liljencrantz, 2009-2024 fish-shell contributors. <b>fish</b> is released under
       the GNU General Public License, version 2.

       <b>fish</b> includes other code licensed under the GNU General Public License, version 2, including GNU <b>printf</b>.

       Copyright © 1990-2007 Free Software Foundation, Inc. Printf (from GNU Coreutils 6.9)  is  released  under
       the GNU General Public License, version 2.

       The GNU General Public License agreement follows.

       <b>GNU</b> <b>GENERAL</b> <b>PUBLIC</b> <b>LICENSE</b>

       Version 2, June 1991
          Copyright  (C)  1989, 1991 Free Software Foundation, Inc.  51 Franklin Street, Fifth Floor, Boston, MA
          02110-1301, USA

          Everyone is permitted to copy and distribute verbatim copies of this license document, but changing it
          is not allowed.

       <b>Preamble</b>

       The licenses for most software are designed to take away  your  freedom  to  share  and  change  it.   By
       contrast,  the  GNU General Public License is intended to guarantee your freedom to share and change free
       software - to make sure the software is free for all its users.  This General Public License  applies  to
       most  of  the  Free Software Foundation's software and to any other program whose authors commit to using
       it.  (Some other Free Software Foundation software is covered by the GNU Library General  Public  License
       instead.)  You can apply it to your programs, too.

       When  we speak of free software, we are referring to freedom, not price.  Our General Public Licenses are
       designed to make sure that you have the freedom to distribute copies of free  software  (and  charge  for
       this service if you wish), that you receive source code or can get it if you want it, that you can change
       the software or use pieces of it in new free programs; and that you know you can do these things.

       To  protect  your  rights, we need to make restrictions that forbid anyone to deny you these rights or to
       ask you to surrender the rights. These restrictions translate to certain responsibilities for you if  you
       distribute copies of the software, or if you modify it.

       For  example,  if you distribute copies of such a program, whether gratis or for a fee, you must give the
       recipients all the rights that you have.  You must make sure that they,  too,  receive  or  can  get  the
       source code.  And you must show them these terms so they know their rights.

       We  protect  your rights with two steps: (1) copyright the software, and (2) offer you this license which
       gives you legal permission to copy, distribute and/or modify the software.

       Also, for each author's protection and ours, we want to make certain that everyone understands that there
       is no warranty for this free software.  If the software is modified by someone else  and  passed  on,  we
       want  its  recipients to know that what they have is not the original, so that any problems introduced by
       others will not reflect on the original authors' reputations.

       Finally, any free program is threatened constantly by software patents.  We wish to avoid the danger that
       redistributors of a free program will individually obtain patent licenses, in effect making  the  program
       proprietary.  To prevent this, we have made it clear that any patent must be licensed for everyone's free
       use or not licensed at all.

       The precise terms and conditions for copying, distribution and modification follow.

       <b>TERMS</b> <b>AND</b> <b>CONDITIONS</b> <b>FOR</b> <b>COPYING,</b> <b>DISTRIBUTION</b> <b>AND</b> <b>MODIFICATION</b>

       • This License applies to any program or other work which contains  a  notice  placed  by  the  copyright
         holder  saying  it  may  be distributed under the terms of this General Public License.  The "Program",
         below, refers to any such program or work, and a "work based on the Program" means either  the  Program
         or  any derivative work under copyright law: that is to say, a work containing the Program or a portion
         of it, either verbatim or with modifications and/or translated into  another  language.   (Hereinafter,
         translation  is  included without limitation in the term "modification".) Each licensee is addressed as
         "you".
          Activities other than copying, distribution and modification are not covered by this License; they are
          outside its scope.  The act of running the Program is not restricted, and the output from the  Program
          is  covered  only  if  its contents constitute a work based on the Program (independent of having been
          made by running the Program). Whether that is true depends on what the Program does.

       1. You may copy and distribute verbatim copies of the Program's source code as you  receive  it,  in  any
          medium,  provided  that  you  conspicuously  and  appropriately  publish  on  each copy an appropriate
          copyright notice and disclaimer of warranty; keep intact all the notices that refer  to  this  License
          and  to  the  absence  of  any  warranty;  and give any other recipients of the Program a copy of this
          License along with the Program.
          You may charge a fee for the physical act of transferring a copy, and you may  at  your  option  offer
          warranty protection in exchange for a fee.

       2. You  may  modify your copy or copies of the Program or any portion of it, thus forming a work based on
          the Program, and copy and distribute such modifications or work under the terms of  Section  1  above,
          provided that you also meet all of these conditions:

          • You  must cause the modified files to carry prominent notices stating that you changed the files and
            the date of any change.

          • You must cause any work that you distribute or publish, that in whole or  in  part  contains  or  is
            derived  from  the  Program or any part thereof, to be licensed as a whole at no charge to all third
            parties under the terms of this License.

          • If the modified program normally reads commands interactively when run,  you  must  cause  it,  when
            started  running  for  such  interactive  use  in  the  most  ordinary  way,  to print or display an
            announcement including an appropriate copyright notice and a notice that there is  no  warranty  (or
            else,  saying  that  you provide a warranty) and that users may redistribute the program under these
            conditions, and telling the user how to view a copy of this  License.  (Exception:  if  the  Program
            itself  is  interactive  but  does  not  normally print such an announcement, your work based on the
            Program is not required to print an announcement.)

          These requirements apply to the modified work as a whole.  If identifiable sections of that  work  are
          not  derived  from  the  Program,  and  can be reasonably considered independent and separate works in
          themselves, then this License, and its terms, do not apply to those sections when you distribute  them
          as separate works.  But when you distribute the same sections as part of a whole which is a work based
          on  the Program, the distribution of the whole must be on the terms of this License, whose permissions
          for other licensees extend to the entire whole, and thus to each and  every  part  regardless  of  who
          wrote it.

          Thus,  it  is  not  the  intent of this section to claim rights or contest your rights to work written
          entirely by you; rather, the intent is to exercise the right to control the distribution of derivative
          or collective works based on the Program.

          In addition, mere aggregation of another work not based on the Program with the  Program  (or  with  a
          work  based  on  the Program) on a volume of a storage or distribution medium does not bring the other
          work under the scope of this License.

       3. You may copy and distribute the Program (or a work based on it, under Section 2)  in  object  code  or
          executable  form  under  the  terms  of  Sections  1  and 2 above provided that you also do one of the
          following:

          • Accompany it with the complete corresponding machine-readable source code, which must be distributed
            under the terms of Sections 1 and 2 above on a medium customarily used for software interchange; or,

          • Accompany it with a written offer, valid for at least three years, to give any third  party,  for  a
            charge   no   more  than  your  cost  of  physically  performing  source  distribution,  a  complete
            machine-readable copy of the corresponding source  code,  to  be  distributed  under  the  terms  of
            Sections 1 and 2 above on a medium customarily used for software interchange; or,

          • Accompany  it  with  the information you received as to the offer to distribute corresponding source
            code.  (This alternative is allowed only for noncommercial distribution and only if you received the
            program in object code or executable form with such an offer, in accord with Subsection b above.)

          The source code for a work means the preferred form of the work for making modifications to  it.   For
          an  executable  work, complete source code means all the source code for all modules it contains, plus
          any associated  interface  definition  files,  plus  the  scripts  used  to  control  compilation  and
          installation of the executable.  However, as a special exception, the source code distributed need not
          include  anything  that  is  normally  distributed  (in  either  source or binary form) with the major
          components (compiler, kernel, and so on) of the operating system on which the executable runs,  unless
          that component itself accompanies the executable.

          If  distribution  of  executable  or  object code is made by offering access to copy from a designated
          place, then offering equivalent access to  copy  the  source  code  from  the  same  place  counts  as
          distribution  of the source code, even though third parties are not compelled to copy the source along
          with the object code.

       4. You may not copy, modify, sublicense, or distribute the Program except  as  expressly  provided  under
          this License. Any attempt otherwise to copy, modify, sublicense or distribute the Program is void, and
          will  automatically  terminate  your  rights  under  this  License. However, parties who have received
          copies, or rights, from you under this License will not have their licenses terminated so long as such
          parties remain in full compliance.

       5. You are not required to accept this License, since you have  not  signed  it.  However,  nothing  else
          grants  you permission to modify or distribute the Program or its derivative works.  These actions are
          prohibited by law if you do not accept this License.  Therefore,  by  modifying  or  distributing  the
          Program (or any work based on the Program), you indicate your acceptance of this License to do so, and
          all its terms and conditions for copying, distributing or modifying the Program or works based on it.

       6. Each time you redistribute the Program (or any work based on the Program), the recipient automatically
          receives  a  license  from  the original licensor to copy, distribute or modify the Program subject to
          these terms and conditions. You may not impose any further restrictions on the recipients' exercise of
          the rights granted herein. You are not responsible for enforcing compliance by third parties  to  this
          License.

       7. If,  as a consequence of a court judgment or allegation of patent infringement or for any other reason
          (not limited to patent issues), conditions are imposed on you (whether by court  order,  agreement  or
          otherwise)  that contradict the conditions of this License, they do not excuse you from the conditions
          of this License.  If you cannot distribute so as to satisfy simultaneously your obligations under this
          License and any other pertinent obligations, then as a consequence you may not distribute the  Program
          at  all.  For example, if a patent license would not permit royalty-free redistribution of the Program
          by all those who receive copies directly or indirectly through  you,  then  the  only  way  you  could
          satisfy both it and this License would be to refrain entirely from distribution of the Program.
          If any portion of this section is held invalid or unenforceable under any particular circumstance, the
          balance  of  the section is intended to apply and the section as a whole is intended to apply in other
          circumstances.

          It is not the purpose of this section to induce you to infringe any patents or  other  property  right
          claims  or to contest validity of any such claims; this section has the sole purpose of protecting the
          integrity of the free software distribution system, which is implemented by public license  practices.
          Many  people  have  made generous contributions to the wide range of software distributed through that
          system in reliance on consistent application of that system; it is up to the author/donor to decide if
          he or she is willing to distribute software through any other system and a licensee cannot impose that
          choice.

          This section is intended to make thoroughly clear what is believed to be a consequence of the rest  of
          this License.

       8. If  the distribution and/or use of the Program is restricted in certain countries either by patents or
          by copyrighted interfaces, the original copyright holder who places the Program under this License may
          add an explicit geographical distribution limitation excluding those countries, so  that  distribution
          is  permitted  only  in or among countries not thus excluded.  In such case, this License incorporates
          the limitation as if written in the body of this License.

       9. The Free Software Foundation may publish revised and/or new versions of  the  General  Public  License
          from time to time.  Such new versions will be similar in spirit to the present version, but may differ
          in detail to address new problems or concerns.
          Each  version  is given a distinguishing version number.  If the Program specifies a version number of
          this License which applies to it and "any later version", you have the option of following  the  terms
          and  conditions  either  of  that  version  or  of  any  later  version published by the Free Software
          Foundation.  If the Program does not specify a version number of this  License,  you  may  choose  any
          version ever published by the Free Software Foundation.

       10.
          If you wish to incorporate parts of the Program into other free programs whose distribution conditions
          are  different,  write  to the author to ask for permission.  For software which is copyrighted by the
          Free Software Foundation, write to the Free Software Foundation;  we  sometimes  make  exceptions  for
          this.   Our  decision will be guided by the two goals of preserving the free status of all derivatives
          of our free software and of promoting the sharing and reuse of software generally.
          <b>NO</b> <b>WARRANTY</b>

       11. BECAUSE THE PROGRAM IS LICENSED FREE OF CHARGE, THERE IS NO WARRANTY FOR THE PROGRAM, TO  THE  EXTENT
           PERMITTED  BY  APPLICABLE  LAW.  EXCEPT WHEN OTHERWISE STATED IN WRITING THE COPYRIGHT HOLDERS AND/OR
           OTHER PARTIES PROVIDE THE PROGRAM "AS IS" WITHOUT WARRANTY OF ANY KIND, EITHER EXPRESSED OR  IMPLIED,
           INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
           PURPOSE.   THE  ENTIRE RISK AS TO THE QUALITY AND PERFORMANCE OF THE PROGRAM IS WITH YOU.  SHOULD THE
           PROGRAM PROVE DEFECTIVE, YOU ASSUME THE COST OF ALL NECESSARY SERVICING, REPAIR OR CORRECTION.

       12. IN NO EVENT UNLESS REQUIRED BY APPLICABLE LAW OR AGREED TO IN WRITING WILL ANY COPYRIGHT  HOLDER,  OR
           ANY  OTHER  PARTY WHO MAY MODIFY AND/OR REDISTRIBUTE THE PROGRAM AS PERMITTED ABOVE, BE LIABLE TO YOU
           FOR DAMAGES, INCLUDING ANY GENERAL, SPECIAL, INCIDENTAL OR CONSEQUENTIAL DAMAGES ARISING OUT  OF  THE
           USE OR INABILITY TO USE THE PROGRAM (INCLUDING BUT NOT LIMITED TO LOSS OF DATA OR DATA BEING RENDERED
           INACCURATE  OR  LOSSES  SUSTAINED BY YOU OR THIRD PARTIES OR A FAILURE OF THE PROGRAM TO OPERATE WITH
           ANY OTHER PROGRAMS), EVEN IF SUCH HOLDER OR OTHER PARTY HAS BEEN ADVISED OF THE POSSIBILITY  OF  SUCH
           DAMAGES.

   <b>License</b> <b>for</b> <b>the</b> <b>Python</b> <b>docs</b> <b>theme</b>
       In doc_src/python_docs_theme/, taken from <u>https://pypi.org/project/python-docs-theme/2020.1/</u>.

       <b>PYTHON</b> <b>SOFTWARE</b> <b>FOUNDATION</b> <b>LICENSE</b> <b>VERSION</b> <b>2</b>

       1.  This  LICENSE  AGREEMENT  is  between  the  Python Software Foundation ("PSF"), and the Individual or
       Organization ("Licensee") accessing and otherwise using this software ("Python") in source or binary form
       and its associated documentation.

       2. Subject to the terms  and  conditions  of  this  License  Agreement,  PSF  hereby  grants  Licensee  a
       nonexclusive,  royalty-free,  world-wide  license  to  reproduce,  analyze,  test, perform and/or display
       publicly, prepare derivative works, distribute, and otherwise use  Python  alone  or  in  any  derivative
       version,  provided, however, that PSF's License Agreement and PSF's notice of copyright, i.e., "Copyright
       (c) 2001, 2002, 2003, 2004, 2005, 2006, 2007, 2008, 2009, 2010, 2011, 2012, 2013, 2014, 2015, 2016,  2017
       Python  Software  Foundation;  All  Rights  Reserved"  are  retained in Python alone or in any derivative
       version prepared by Licensee.

       3. In the event Licensee prepares a derivative work that is based on or incorporates Python or  any  part
       thereof,  and  wants  to  make  the derivative work available to others as provided herein, then Licensee
       hereby agrees to include in any such work a brief summary of the changes made to Python.

       4. PSF is making Python available to Licensee on an "AS IS"  basis.   PSF  MAKES  NO  REPRESENTATIONS  OR
       WARRANTIES,  EXPRESS  OR  IMPLIED.  BY WAY OF EXAMPLE, BUT NOT LIMITATION, PSF MAKES NO AND DISCLAIMS ANY
       REPRESENTATION OR WARRANTY OF MERCHANTABILITY OR FITNESS FOR ANY PARTICULAR PURPOSE OR THAT  THE  USE  OF
       PYTHON WILL NOT INFRINGE ANY THIRD PARTY RIGHTS.

       5.  PSF  SHALL  NOT  BE  LIABLE  TO LICENSEE OR ANY OTHER USERS OF PYTHON FOR ANY INCIDENTAL, SPECIAL, OR
       CONSEQUENTIAL DAMAGES OR LOSS AS A RESULT OF MODIFYING, DISTRIBUTING, OR OTHERWISE USING PYTHON,  OR  ANY
       DERIVATIVE THEREOF, EVEN IF ADVISED OF THE POSSIBILITY THEREOF.

       6.  This  License  Agreement  will  automatically  terminate  upon  a  material  breach  of its terms and
       conditions.

       7. Nothing in this License Agreement shall be deemed to create any relationship of  agency,  partnership,
       or  joint  venture between PSF and Licensee.  This License Agreement does not grant permission to use PSF
       trademarks or trade name in a trademark sense to endorse or promote products or services of Licensee,  or
       any third party.

       8.  By  copying,  installing  or  otherwise  using  Python,  Licensee agrees to be bound by the terms and
       conditions of this License Agreement.

   <b>MIT</b> <b>License</b>
       <b>fish</b> includes a copy of Alpine.js, which is  copyright  2019-2021  Caleb  Porzio  and  contributors,  and
       licensed  under  the  MIT  License.  It  also  uses  FindRust.cmake, from the Corrosion project, which is
       copyright 2018 Andrew Gaspar and licensed under the MIT license. It  also  includes  the  Dracula  theme,
       which  is  copyright  2018  Dracula  Team, and the Nord theme, which is copyright 2016-present Sven Greb.
       These themes are also used under the MIT license.

       <b>fish</b> contains code derived from  <u>musl-libc</u> &lt;<b>https://www.musl-libc.org</b>&gt;, which is copyright 2006-2020 Rich
       Felker, et al., to implement printf. This code is used under the terms of the MIT license.

       The MIT license follows.

       Permission is hereby granted, free of charge, to any  person  obtaining  a  copy  of  this  software  and
       associated  documentation  files (the "Software"), to deal in the Software without restriction, including
       without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense,  and/or  sell
       copies  of the Software, and to permit persons to whom the Software is furnished to do so, subject to the
       following conditions:

       The above copyright notice and this permission notice shall be included  in  all  copies  or  substantial
       portions of the Software.

       THE  SOFTWARE  IS  PROVIDED  "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT
       LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO
       EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER
       IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE  SOFTWARE  OR
       THE USE OR OTHER DEALINGS IN THE SOFTWARE.

   <b>GNU</b> <b>Library</b> <b>General</b> <b>Public</b> <b>License</b>
       <b>fish</b> contains code derived from the GNU C Library, licensed under the GNU Library General Public License.
       This code is copyright © 1989-1994 Free Software Foundation, Inc.

       The GNU Library General Public License agreement follows.

       <b>GNU</b> <b>LIBRARY</b> <b>GENERAL</b> <b>PUBLIC</b> <b>LICENSE</b>

       Version 2, June 1991

       Copyright  (C)  1991  Free  Software  Foundation,  Inc.   51  Franklin  Street,  Fifth  Floor, Boston, MA
       02110-1301  USA Everyone is permitted to copy and distribute verbatim copies of  this  license  document,
       but changing it is not allowed.

       <b>[This</b> <b>is</b> <b>the</b> <b>first</b> <b>released</b> <b>version</b> <b>of</b> <b>the</b> <b>library</b> <b>GPL.</b> <b>It</b> <b>is</b>
              numbered 2 because it goes with version 2 of the ordinary GPL.]

       <b>Preamble</b>

       The  licenses  for  most  software  are  designed  to  take away your freedom to share and change it.  By
       contrast, the GNU General Public Licenses are intended to guarantee your freedom to share and change free
       software--to make sure the software is free for all its users.

       This license, the Library General Public License, applies to  some  specially  designated  Free  Software
       Foundation  software, and to any other libraries whose authors decide to use it.  You can use it for your
       libraries, too.

       When we speak of free software, we are referring to freedom, not price.  Our General Public Licenses  are
       designed  to  make  sure  that you have the freedom to distribute copies of free software (and charge for
       this service if you wish), that you receive source code or can get it if you want it, that you can change
       the software or use pieces of it in new free programs; and that you know you can do these things.

       To protect your rights, we need to make restrictions that forbid anyone to deny you these  rights  or  to
       ask you to surrender the rights.  These restrictions translate to certain responsibilities for you if you
       distribute copies of the library, or if you modify it.

       For  example,  if  you  distribute  copies of the library, whether gratis or for a fee, you must give the
       recipients all the rights that we gave you.  You must make sure that they, too, receive or  can  get  the
       source  code.   If  you  link  a  program with the library, you must provide complete object files to the
       recipients so that they can relink them with the  library,  after  making  changes  to  the  library  and
       recompiling it.  And you must show them these terms so they know their rights.

       Our  method  of  protecting  your rights has two steps: (1) copyright the library, and (2) offer you this
       license which gives you legal permission to copy, distribute and/or modify the library.

       Also, for each distributor's protection, we want to make certain that everyone understands that there  is
       no warranty for this free library.  If the library is modified by someone else and passed on, we want its
       recipients  to  know  that what they have is not the original version, so that any problems introduced by
       others will not reflect on the original authors' reputations.

       Finally, any free program is threatened constantly by software patents.  We wish to avoid the danger that
       companies  distributing  free  software  will  individually  obtain  patent  licenses,  thus  in   effect
       transforming  the  program  into  proprietary  software.  To prevent this, we have made it clear that any
       patent must be licensed for everyone's free use or not licensed at all.

       Most GNU software, including some libraries, is covered by the ordinary GNU General Public License, which
       was designed for utility programs.  This license, the GNU Library  General  Public  License,  applies  to
       certain  designated libraries.  This license is quite different from the ordinary one; be sure to read it
       in full, and don't assume that anything in it is the same as in the ordinary license.

       The reason we have a separate public license for some libraries is that  they  blur  the  distinction  we
       usually  make  between  modifying  or  adding to a program and simply using it.  Linking a program with a
       library, without changing the library, is in some sense simply using the library,  and  is  analogous  to
       running  a  utility  program  or  application program.  However, in a textual and legal sense, the linked
       executable is a combined work, a derivative of the original library,  and  the  ordinary  General  Public
       License treats it as such.

       Because  of  this  blurred  distinction,  using the ordinary General Public License for libraries did not
       effectively promote software sharing, because most developers did not use the  libraries.   We  concluded
       that weaker conditions might promote sharing better.

       However,  unrestricted  linking  of  non-free  programs  would deprive the users of those programs of all
       benefit from the free status of the  libraries  themselves.   This  Library  General  Public  License  is
       intended  to  permit developers of non-free programs to use free libraries, while preserving your freedom
       as a user of such programs to change the free libraries that are incorporated in them.  (We have not seen
       how to achieve this as regards changes in header files, but we have achieved it as regards changes in the
       actual functions of the Library.)  The hope is  that  this  will  lead  to  faster  development  of  free
       libraries.

       The  precise terms and conditions for copying, distribution and modification follow.  Pay close attention
       to the difference between a "work based on the library" and a "work that uses the library".   The  former
       contains code derived from the library, while the latter only works together with the library.

       Note  that  it is possible for a library to be covered by the ordinary General Public License rather than
       by this special one.

       <b>TERMS</b> <b>AND</b> <b>CONDITIONS</b> <b>FOR</b> <b>COPYING,</b> <b>DISTRIBUTION</b> <b>AND</b> <b>MODIFICATION</b>

       0. This License Agreement applies to any software library which contains a notice placed by the copyright
       holder or other authorized party saying it may be distributed under the terms  of  this  Library  General
       Public License (also called "this License").  Each licensee is addressed as "you".

       A "library" means a collection of software functions and/or data prepared so as to be conveniently linked
       with application programs (which use some of those functions and data) to form executables.

       The  "Library", below, refers to any such software library or work which has been distributed under these
       terms.  A "work based on the Library" means either the Library or any  derivative  work  under  copyright
       law:  that  is  to  say,  a  work  containing  the  Library  or  a portion of it, either verbatim or with
       modifications and/or translated straightforwardly into another language.   (Hereinafter,  translation  is
       included without limitation in the term "modification".)

       "Source  code"  for  a  work  means the preferred form of the work for making modifications to it.  For a
       library, complete source code means all the source code for all modules it contains, plus any  associated
       interface definition files, plus the scripts used to control compilation and installation of the library.

       Activities  other  than  copying, distribution and modification are not covered by this License; they are
       outside its scope.  The act of running a program using the Library is not  restricted,  and  output  from
       such a program is covered only if its contents constitute a work based on the Library (independent of the
       use  of the Library in a tool for writing it).  Whether that is true depends on what the Library does and
       what the program that uses the Library does.

       1. You may copy and distribute verbatim copies of the Library's complete source code as you  receive  it,
       in  any  medium,  provided  that  you conspicuously and appropriately publish on each copy an appropriate
       copyright notice and disclaimer of warranty; keep intact all the notices that refer to this  License  and
       to the absence of any warranty; and distribute a copy of this License along with the Library.

       You  may  charge  a  fee  for  the  physical act of transferring a copy, and you may at your option offer
       warranty protection in exchange for a fee.

       2. You may modify your copy or copies of the Library or any portion of it, thus forming a work  based  on
       the  Library,  and  copy  and  distribute  such modifications or work under the terms of Section 1 above,
       provided that you also meet all of these conditions:

          a. The modified work must itself be a software library.

          b) You must cause the files modified to carry prominent notices stating that you changed the files and
          the date of any change.

          c) You must cause the whole of the work to be licensed at no charge to all  third  parties  under  the
          terms of this License.

          d)  If a facility in the modified Library refers to a function or a table of data to be supplied by an
          application program that uses the facility, other than as an argument  passed  when  the  facility  is
          invoked,  then  you must make a good faith effort to ensure that, in the event an application does not
          supply such function or table, the facility still operates, and performs whatever part of its  purpose
          remains meaningful.

          (For  example,  a  function  in  a  library  to  compute  square  roots has a purpose that is entirely
          well-defined  independent  of  the  application.   Therefore,  Subsection   2d   requires   that   any
          application-supplied function or table used by this function must be optional: if the application does
          not supply it, the square root function must still compute square roots.)

       These  requirements apply to the modified work as a whole.  If identifiable sections of that work are not
       derived from the Library, and can be reasonably considered independent and separate works in  themselves,
       then  this  License,  and  its terms, do not apply to those sections when you distribute them as separate
       works.  But when you distribute the same sections as part of a  whole  which  is  a  work  based  on  the
       Library,  the distribution of the whole must be on the terms of this License, whose permissions for other
       licensees extend to the entire whole, and thus to each and every part regardless of who wrote it.

       Thus, it is not the intent of this section to claim  rights  or  contest  your  rights  to  work  written
       entirely by you; rather, the intent is to exercise the right to control the distribution of derivative or
       collective works based on the Library.

       In  addition,  mere aggregation of another work not based on the Library with the Library (or with a work
       based on the Library) on a volume of a storage or distribution medium does not bring the other work under
       the scope of this License.

       3. You may opt to apply the terms of the ordinary GNU General Public License instead of this License to a
       given copy of the Library.  To do this, you must alter all the notices that refer  to  this  License,  so
       that they refer to the ordinary GNU General Public License, version 2, instead of to this License.  (If a
       newer  version  than  version  2  of  the  ordinary GNU General Public License has appeared, then you can
       specify that version instead if you wish.)  Do not make any other change in these notices.

       Once this change is made in a given copy, it is irreversible for that copy, so the ordinary  GNU  General
       Public License applies to all subsequent copies and derivative works made from that copy.

       This  option is useful when you wish to copy part of the code of the Library into a program that is not a
       library.

       4. You may copy and distribute the Library (or a portion or derivative of it, under Section 2) in  object
       code or executable form under the terms of Sections 1 and 2 above provided that you accompany it with the
       complete  corresponding  machine-readable  source  code,  which  must  be  distributed under the terms of
       Sections 1 and 2 above on a medium customarily used for software interchange.

       If distribution of object code is made by offering access to copy from a designated place, then  offering
       equivalent access to copy the source code from the same place satisfies the requirement to distribute the
       source code, even though third parties are not compelled to copy the source along with the object code.

       5.  A program that contains no derivative of any portion of the Library, but is designed to work with the
       Library by being compiled or linked with it, is called a "work that uses the Library".  Such a  work,  in
       isolation,  is  not  a  derivative  work  of  the  Library, and therefore falls outside the scope of this
       License.

       However, linking a "work that uses the Library"  with  the  Library  creates  an  executable  that  is  a
       derivative  of  the  Library (because it contains portions of the Library), rather than a "work that uses
       the library".  The executable is  therefore  covered  by  this  License.   Section  6  states  terms  for
       distribution of such executables.

       When  a  "work  that  uses the Library" uses material from a header file that is part of the Library, the
       object code for the work may be a derivative work of the Library even though  the  source  code  is  not.
       Whether  this  is true is especially significant if the work can be linked without the Library, or if the
       work is itself a library.  The threshold for this to be true is not precisely defined by law.

       If such an object file uses only numerical parameters, data structure layouts and  accessors,  and  small
       macros  and  small  inline  functions  (ten  lines or less in length), then the use of the object file is
       unrestricted, regardless of whether it is legally a derivative work.  (Executables containing this object
       code plus portions of the Library will still fall under Section 6.)

       Otherwise, if the work is a derivative of the Library, you may distribute the object code  for  the  work
       under the terms of Section 6.  Any executables containing that work also fall under Section 6, whether or
       not they are linked directly with the Library itself.

       6.  As  an  exception  to the Sections above, you may also compile or link a "work that uses the Library"
       with the Library to produce a work containing portions of the Library, and  distribute  that  work  under
       terms  of your choice, provided that the terms permit modification of the work for the customer's own use
       and reverse engineering for debugging such modifications.

       You must give prominent notice with each copy of the work that the Library is used in  it  and  that  the
       Library  and  its  use are covered by this License.  You must supply a copy of this License.  If the work
       during execution displays copyright notices, you must include the copyright notice for the Library  among
       them,  as  well  as a reference directing the user to the copy of this License.  Also, you must do one of
       these things:
          a) Accompany the work with the complete corresponding machine-readable source  code  for  the  Library
          including  whatever  changes  were  used in the work (which must be distributed under Sections 1 and 2
          above); and, if the work is an executable linked with the Library, with the complete  machine-readable
          "work  that  uses  the  Library",  as  object code and/or source code, so that the user can modify the
          Library and then relink to produce a modified executable containing  the  modified  Library.   (It  is
          understood  that  the  user  who  changes  the  contents  of definitions files in the Library will not
          necessarily be able to recompile the application to use the modified definitions.)

          b) Accompany the work with a written offer, valid for at least three years, to give the same user  the
          materials  specified  in  Subsection  6a, above, for a charge no more than the cost of performing this
          distribution.

          c) If distribution of the work is made by offering access to  copy  from  a  designated  place,  offer
          equivalent access to copy the above specified materials from the same place.

          d)  Verify  that the user has already received a copy of these materials or that you have already sent
          this user a copy.

       For an executable, the required form of the "work that uses  the  Library"  must  include  any  data  and
       utility  programs  needed  for  reproducing the executable from it.  However, as a special exception, the
       source code distributed need not include anything that is  normally  distributed  (in  either  source  or
       binary form) with the major components (compiler, kernel, and so on) of the operating system on which the
       executable runs, unless that component itself accompanies the executable.

       It  may  happen that this requirement contradicts the license restrictions of other proprietary libraries
       that do not normally accompany the operating system.  Such a contradiction means you cannot use both them
       and the Library together in an executable that you distribute.

       7. You may place library facilities that are a work based on the Library side-by-side in a single library
       together with other library facilities not covered by  this  License,  and  distribute  such  a  combined
       library,  provided  that  the  separate  distribution  of  the work based on the Library and of the other
       library facilities is otherwise permitted, and provided that you do these two things:
          a) Accompany the combined library with a copy of the same work based on the Library,  uncombined  with
          any other library facilities.  This must be distributed under the terms of the Sections above.

          b)  Give prominent notice with the combined library of the fact that part of it is a work based on the
          Library, and explaining where to find the accompanying uncombined form of the same work.

       8. You may not copy, modify, sublicense, link  with,  or  distribute  the  Library  except  as  expressly
       provided under this License.  Any attempt otherwise to copy, modify, sublicense, link with, or distribute
       the  Library  is void, and will automatically terminate your rights under this License.  However, parties
       who have received copies, or rights, from you under this License will not have their licenses  terminated
       so long as such parties remain in full compliance.

       9.  You  are  not  required  to accept this License, since you have not signed it.  However, nothing else
       grants you permission to modify or distribute the Library or its derivative  works.   These  actions  are
       prohibited by law if you do not accept this License.  Therefore, by modifying or distributing the Library
       (or  any  work  based on the Library), you indicate your acceptance of this License to do so, and all its
       terms and conditions for copying, distributing or modifying the Library or works based on it.

       10. Each time  you  redistribute  the  Library  (or  any  work  based  on  the  Library),  the  recipient
       automatically  receives a license from the original licensor to copy, distribute, link with or modify the
       Library subject to these terms and conditions.  You may  not  impose  any  further  restrictions  on  the
       recipients'  exercise  of the rights granted herein.  You are not responsible for enforcing compliance by
       third parties to this License.

       11. If, as a consequence of a court judgment or allegation of patent infringement or for any other reason
       (not limited to patent issues), conditions are imposed on you  (whether  by  court  order,  agreement  or
       otherwise)  that contradict the conditions of this License, they do not excuse you from the conditions of
       this License.  If you cannot distribute so as to  satisfy  simultaneously  your  obligations  under  this
       License  and any other pertinent obligations, then as a consequence you may not distribute the Library at
       all.  For example, if a patent license would not permit royalty-free redistribution of the Library by all
       those who receive copies directly or indirectly through you, then the only way you could satisfy both  it
       and this License would be to refrain entirely from distribution of the Library.

       If  any  portion  of this section is held invalid or unenforceable under any particular circumstance, the
       balance of the section is intended to apply, and the section as a whole is intended  to  apply  in  other
       circumstances.

       It  is  not  the  purpose  of  this section to induce you to infringe any patents or other property right
       claims or to contest validity of any such claims; this section has the sole  purpose  of  protecting  the
       integrity  of  the  free  software  distribution system which is implemented by public license practices.
       Many people have made generous contributions to the wide  range  of  software  distributed  through  that
       system in reliance on consistent application of that system; it is up to the author/donor to decide if he
       or  she  is  willing  to  distribute  software through any other system and a licensee cannot impose that
       choice.

       This section is intended to make thoroughly clear what is believed to be a consequence  of  the  rest  of
       this License.

       12. If the distribution and/or use of the Library is restricted in certain countries either by patents or
       by  copyrighted  interfaces,  the original copyright holder who places the Library under this License may
       add an explicit geographical distribution limitation excluding those countries, so that  distribution  is
       permitted  only  in  or  among  countries not thus excluded.  In such case, this License incorporates the
       limitation as if written in the body of this License.

       13. The Free Software Foundation may publish revised and/or new versions of the  Library  General  Public
       License  from  time to time.  Such new versions will be similar in spirit to the present version, but may
       differ in detail to address new problems or concerns.

       Each version is given a distinguishing version number.  If the Library specifies a version number of this
       License which applies to it and "any later version", you have the  option  of  following  the  terms  and
       conditions  either of that version or of any later version published by the Free Software Foundation.  If
       the Library does not specify a license version number, you may choose any version ever published  by  the
       Free Software Foundation.

       14.  If  you  wish  to  incorporate  parts  of  the  Library  into other free programs whose distribution
       conditions are incompatible with these, write to the author to ask for permission.  For software which is
       copyrighted by the Free Software Foundation, write to the Free Software  Foundation;  we  sometimes  make
       exceptions  for  this.  Our decision will be guided by the two goals of preserving the free status of all
       derivatives of our free software and of promoting the sharing and reuse of software generally.

       <b>NO</b> <b>WARRANTY</b>

       15. BECAUSE THE LIBRARY IS LICENSED FREE OF CHARGE, THERE IS NO WARRANTY FOR THE LIBRARY, TO  THE  EXTENT
       PERMITTED  BY APPLICABLE LAW.  EXCEPT WHEN OTHERWISE STATED IN WRITING THE COPYRIGHT HOLDERS AND/OR OTHER
       PARTIES PROVIDE THE LIBRARY "AS IS" WITHOUT WARRANTY OF ANY KIND, EITHER EXPRESSED OR IMPLIED, INCLUDING,
       BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.   THE
       ENTIRE  RISK  AS  TO  THE  QUALITY  AND PERFORMANCE OF THE LIBRARY IS WITH YOU.  SHOULD THE LIBRARY PROVE
       DEFECTIVE, YOU ASSUME THE COST OF ALL NECESSARY SERVICING, REPAIR OR CORRECTION.

       16. IN NO EVENT UNLESS REQUIRED BY APPLICABLE LAW OR AGREED TO IN WRITING WILL ANY COPYRIGHT  HOLDER,  OR
       ANY  OTHER  PARTY WHO MAY MODIFY AND/OR REDISTRIBUTE THE LIBRARY AS PERMITTED ABOVE, BE LIABLE TO YOU FOR
       DAMAGES, INCLUDING ANY GENERAL, SPECIAL, INCIDENTAL OR CONSEQUENTIAL DAMAGES ARISING OUT OF  THE  USE  OR
       INABILITY TO USE THE LIBRARY (INCLUDING BUT NOT LIMITED TO LOSS OF DATA OR DATA BEING RENDERED INACCURATE
       OR  LOSSES  SUSTAINED  BY  YOU  OR  THIRD  PARTIES  OR A FAILURE OF THE LIBRARY TO OPERATE WITH ANY OTHER
       SOFTWARE), EVEN IF SUCH HOLDER OR OTHER PARTY HAS BEEN ADVISED OF THE POSSIBILITY OF SUCH DAMAGES.

</pre><h4><b>AUTHOR</b></h4><pre>
       fish-shell developers

</pre><h4><b>COPYRIGHT</b></h4><pre>
       2024, fish-shell developers

4.0                                               Mar 13, 2025                                       <u><a href="../man1/FISH-DOC.1.html">FISH-DOC</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>