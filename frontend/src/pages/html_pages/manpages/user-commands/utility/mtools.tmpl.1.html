<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>mtools - utilities to access DOS disks in Unix.</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/mtools">mtools_4.0.48-1_amd64</a> <br><br><pre>
</pre><h4><b>Name</b></h4><pre>
       mtools - utilities to access DOS disks in Unix.

</pre><h4><b>Introduction</b></h4><pre>
       Mtools  is  a collection of tools to allow Unix systems to manipulate MS-DOS files: read, write, and move
       around files on an MS-DOS file system (typically a floppy disk).  Where reasonable, each program attempts
       to emulate the MS-DOS equivalent command. However, unnecessary restrictions and oddities of DOS  are  not
       emulated. For instance, it is possible to move subdirectories from one subdirectory to another.

       Mtools  is sufficient to give access to MS-DOS file systems.  For instance, commands such as mdir a: work
       on  the  a:  floppy  without  any  preliminary  mounting  or   initialization   (assuming   the   default
       `SYSCONFDIRmtools.conf'  works  on  your  machine).   With  mtools,  one  can change floppies too without
       unmounting and mounting.

</pre><h4><b>Where</b> <b>to</b> <b>get</b> <b>mtools</b></h4><pre>
       Mtools can be found at the following places (and their mirrors):

          <b><a href="http://ftp.gnu.org/gnu/mtools/mtools-4.0.48.tar.gz">http://ftp.gnu.org/gnu/mtools/mtools-4.0.48.tar.gz</a></b>

       These patches are named mtools-<u>version</u>-<u>ddmm</u>.taz, where version stands for the base version,  <u>dd</u>  for  the
       day and <u>mm</u> for the month. Due to a lack of space, I usually leave only the most recent patch.

       There  is  an  mtools  mailing list at info-mtools @ gnu.org .  Please send all bug reports to this list.
       You may subscribe to the list at https://lists.gnu.org/mailman/listinfo/info-mtools. (N.B. Please  remove
       the  spaces  around  the  "@". I left them there in order to fool spambots.)  Announcements of new mtools
       versions will also be sent to the list, in addition to the Linux announce newsgroups.  The  mailing  list
       is archived at <a href="http://lists.gnu.org/pipermail/info-mtools/">http://lists.gnu.org/pipermail/info-mtools/</a>

</pre><h4><b>Common</b> <b>features</b> <b>of</b> <b>all</b> <b>mtools</b> <b>commands</b></h4><pre>
   <b>Options</b> <b>and</b> <b>filenames</b>
       MS-DOS filenames are composed of a drive letter followed by a colon, a subdirectory, and a filename. Only
       the  filename  part is mandatory, the drive letter and the subdirectory are optional. Filenames without a
       drive letter refer to Unix files. Subdirectory names can use either the '/' or '\' separator.  The use of
       the '\' separator or wildcards requires the names to be enclosed in  quotes  to  protect  them  from  the
       shell.  However,  wildcards  in Unix filenames should not be enclosed in quotes, because here we <b>want</b> the
       shell to expand them.

       The regular expression "pattern matching" routines follow the Unix-style rules.  For example, `*' matches
       all MS-DOS files in lieu of `*.*'.  The archive, hidden, read-only and system attribute bits are  ignored
       during pattern matching.

       All options use the - (minus) as their first character, not / as you'd expect in MS-DOS.

       Most  mtools  commands  allow  multiple filename parameters, which doesn't follow MS-DOS conventions, but
       which is more user-friendly.

       Most mtools commands allow options that instruct them how to handle file name clashes. See  section  name
       clashes, for more details on these.

       All commands accept the -i flag which allows to specify an image file (See section drive letters).

       All  commands accept the -V flag which prints the version, and most accept the -v flag, which switches on
       verbose mode. In verbose mode, these commands print out the name of the MS-DOS files upon which they act,
       unless stated otherwise. See section Commands, for a description of the options  which  are  specific  to
       each command.

   <b>Drive</b> <b>letters</b>
       The  meaning  of  the  drive  letters  depends  on  the  target  architectures.   However, on most target
       architectures, drive A is the first floppy drive, drive B is the  second  floppy  drive  (if  available),
       drive J is a Jaz drive (if available), and drive Z is a Zip drive (if available).  On those systems where
       the device name is derived from the SCSI id, the Jaz drive is assumed to be at SCSI target 4, and the Zip
       at SCSI target 5 (factory default settings).  On Linux, both drives are assumed to be the second drive on
       the  SCSI  bus  (/dev/sdb).  The  default settings can be changes using a configuration file (see section
       Configuration).

       The drive letter : (colon) has a special meaning. It is used to access image  files  which  are  directly
       specified on the command line using the -i options.

       Example:

           <b>mcopy</b> <b>-i</b> <b>my-image-file.bin</b> <b>::file1</b> <b>::file2</b> <b>.</b>

       This copies file1 and file2 from the image file (my-image-file.bin) to the <a href="file:/tmp">/tmp</a> directory.

       You can also supply an offset within the image file by including @@<u>offset</u> into the file name.

       Example:

           <b>mcopy</b> <b>-i</b> <b>my-image-file.bin@@1M</b> <b>::file1</b> <b>::file2</b> <b>.</b>

       This looks for the image at the offset of 1M in the file, rather than at its beginning.

   <b>Sizes</b> <b>and</b> <b>offsets</b>
       Certain commands, such as mformat, allow you to specify a hard disk size.

       The size is a number, followed by an optional unit suffix.

       The  number  is interpreted as a hexadecimal number if it starts with 0x, as an octal number if it starts
       with the digit 0, or as a decimal number if it starts with any other digit.

       The following units are supported:

       *      S sectors (of 512 bytes)

       *      K Kilobytes

       *      M Megabytes

       *      G Gigabytes

       *      T Terabytes

       If no unit is specified, the default depends on context. Mformat's T option, and  mpartition's  l  option
       assume  sectors,  whereas  all other places (mshowfat's o option, offset drive config option and data_map
       drive config option) assume bytes.

   <b>Current</b> <b>working</b> <b>directory</b>
       The mcd command (`mcd') is used to establish the device and the current working  directory  (relative  to
       the  MS-DOS  file  system),  otherwise the default is assumed to be A:<a href="file:/.">/.</a> However, unlike MS-DOS, there is
       only one working directory for all drives, and not one per drive. Moreover, if you set drive ::/,  mtools
       does  not  remember the associated image file, but only the fact that you are working on an image file at
       all.

   <b>VFAT-style</b> <b>long</b> <b>file</b> <b>names</b>
       This version of mtools supports VFAT style long filenames. If a Unix filename is too long  to  fit  in  a
       short  DOS  name,  it  is stored as a VFAT long name, and a companion short name is generated. This short
       name is what you see when you examine the disk with a pre-7.0 version of DOS.
        The following table shows some examples of short names:

          <b>Long</b> <b>name</b>       <b>MS-DOS</b> <b>name</b>     <b>Reason</b> <b>for</b> <b>the</b> <b>change</b>
          <b>---------</b>       <b>----------</b>      <b>---------------------</b>
          <b>thisisatest</b>     <b>THISIS~1</b>        <b>filename</b> <b>too</b> <b>long</b>
          <b>alain.knaff</b>     <b>ALAIN~1.KNA</b>     <b>extension</b> <b>too</b> <b>long</b>
          <b>prn.txt</b>         <b>PRN~1.TXT</b>       <b>PRN</b> <b>is</b> <b>a</b> <b>device</b> <b>name</b>
          <b>.abc</b>            <b>ABC~1</b>           <b>null</b> <b>filename</b>
          <b>hot+cold</b>        <b>HOT_CO~1</b>        <b>illegal</b> <b>character</b>

        As you see, the following transformations happen to derive a short name:

       *      Illegal characters are replaced by underscores. The illegal characters are ;+=[]',\"*\\&lt;&gt;/?:|.

       *      Extra dots, which cannot be interpreted as a main name/extension separator are removed

       *      A ~<u>n</u> number is generated,

       *      The name is shortened so as to fit in the 8+3 limitation

        The initial Unix-style file name (whether long or short) is  also  called  the  <u>primary</u>  name,  and  the
       derived short name is also called the <u>secondary</u> name.

        Example:

           <b>mcopy</b> <b>/etc/motd</b> <b>a:Reallylongname</b>

        Mtools creates a VFAT entry for Reallylongname, and uses REALLYLO as a short name. Reallylongname is the
       primary name, and REALLYLO is the secondary name.

           <b>mcopy</b> <b>/etc/motd</b> <b>a:motd</b>

         Motd  fits  into  the  DOS  filename  limits. Mtools doesn't need to derivate another name. Motd is the
       primary name, and there is no secondary name.

        In a nutshell: The primary name is the long name, if one exists, or the short name if there is  no  long
       name.

        Although  VFAT  is  much  more flexible than FAT, there are still names that are not acceptable, even in
       VFAT. There are still some illegal characters left (\"*\\&lt;&gt;/?:|), and device names are still reserved.

          <b>Unix</b> <b>name</b>       <b>Long</b> <b>name</b>       <b>Reason</b> <b>for</b> <b>the</b> <b>change</b>
          <b>---------</b>       <b>----------</b>      <b>---------------------</b>
          <b>prn</b>             <b>prn-1</b>           <b>PRN</b> <b>is</b> <b>a</b> <b>device</b> <b>name</b>
          <b>ab:c</b>            <b>ab_c-1</b>          <b>illegal</b> <b>character</b>

        As you see, the following transformations happen if a long name is illegal:

       *      Illegal characters are replaces by underscores,

       *      A -<u>n</u> number is generated,

   <b>Name</b> <b>clashes</b>
       When writing a file to disk, its long name or short name may collide with an  already  existing  file  or
       directory. This may happen for all commands which create new directory entries, such as mcopy, mmd, mren,
       mmove. When a name clash happens, mtools asks you what it should do. It offers several choices:

       overwrite
              Overwrites the existing file. It is not possible to overwrite a directory with a file.

       rename
              Renames the newly created file. Mtools prompts for the new filename

       autorename
              Renames the newly created file. Mtools chooses a name by itself, without prompting

       skip   Gives up on this file, and moves on to the next (if any)

       To  chose  one of these actions, type its first letter at the prompt. If you use a lower case letter, the
       action only applies for this file only, if you use an upper case letter, the action applies to all files,
       and you won't be prompted again.

       You may also chose actions (for all files) on the command line, when invoking mtools:

       -D o   Overwrites primary names by default.

       -D O   Overwrites secondary names by default.

       -D r   Renames primary name by default.

       -D R   Renames secondary name by default.

       -D a   Autorenames primary name by default.

       -D A   Autorenames secondary name by default.

       -D s   Skip primary name by default.

       -D S   Skip secondary name by default.

       -D m   Ask user what to do with primary name.

       -D M   Ask user what to do with secondary name.

       Note that for command line switches lower/upper differentiates between primary/secondary name whereas for
       interactive choices, lower/upper differentiates between just-this-time/always.

       The primary name is the name as displayed in Windows 95 or Windows NT: i.e. the long name if  it  exists,
       and  the  short  name  otherwise.  The secondary name is the "hidden" name, i.e. the short name if a long
       name exists.

       By default, the user is prompted if the primary name clashes, and the secondary name is autorenamed.

       If a name clash occurs in a Unix directory, mtools only asks whether to overwrite the file,  or  to  skip
       it.

   <b>Case</b> <b>sensitivity</b> <b>of</b> <b>the</b> <b>VFAT</b> <b>file</b> <b>system</b>
       The  VFAT file system is able to remember the case of the filenames. However, filenames which differ only
       in case are not allowed to coexist in the same  directory.  For  example  if  you  store  a  file  called
       LongFileName  on  a  VFAT  file  system,  mdir  shows this file as LongFileName, and not as Longfilename.
       However, if you then try to add LongFilename to the same  directory,  it  is  refused,  because  case  is
       ignored for clash checks.

       The  VFAT file system allows you to store the case of a filename in the attribute byte, if all letters of
       the filename are the same case, and if all letters of the extension are the same case  too.  Mtools  uses
       this  information  when  displaying  the files, and also to generate the Unix filename when mcopying to a
       Unix directory. This may have unexpected results when applied to files written using an  pre-7.0  version
       of DOS: Indeed, the old style filenames map to all upper case. This is different from the behavior of the
       old version of mtools which used to generate lower case Unix filenames.

   <b>high</b> <b>capacity</b> <b>formats</b>
       Mtools supports a number of formats which allow storage of more data on disk than usual. Due to different
       operating  system  abilities, these formats are not supported on all operating systems. Mtools recognizes
       these formats transparently where supported.

       In order to format these disks, you need to use an operating system specific tool.  For  Linux,  suitable
       floppy tools can be found in the fdutils package at the following locations~:

          <a href="http://www.fdutils.linux.lu/">http://www.fdutils.linux.lu/</a>.

       See  the  manual pages included in that package for further detail: Use superformat to format all formats
       except XDF, and use xdfcopy to format XDF.

     <b>More</b> <b>sectors</b>
       The oldest method of fitting more data on a disk is to use more sectors and more cylinders. Although  the
       standard format uses 80 cylinders and 18 sectors (on a 3 1/2 high density disk), it is possible to use up
       to 83 cylinders (on most drives) and up to 21 sectors. This method allows to store up to 1743K on a 3 1/2
       HD  disk.  However, 21 sector disks are twice as slow as the standard 18 sector disks because the sectors
       are packed so close together that we need to interleave them. This problem doesn't exist  for  20  sector
       formats.

       These  formats  are  supported  by  numerous DOS shareware utilities such as fdformat and vgacopy. In his
       infinite hubris, Bill Gate$ believed that he invented this,  and  called  it  `DMF  disks',  or  `Windows
       formatted  disks'.  But in reality, it has already existed years before! Mtools supports these formats on
       Linux, on SunOS and on the DELL Unix PC.

     <b>Bigger</b> <b>sectors</b>
       By using bigger sectors it is possible to go beyond the capacity which can be obtained  by  the  standard
       512-byte  sectors.  This is because of the sector header. The sector header has the same size, regardless
       of how many data bytes are in the sector. Thus, we save some space by using <u>fewer</u>,  but  bigger  sectors.
       For  example,  1 sector of 4K only takes up header space once, whereas 8 sectors of 512 bytes have also 8
       headers, for the same amount of useful data.

       This method permits storage of up to 1992K on a 3 1/2 HD disk.

       Mtools supports these formats only on Linux.

     <b>2m</b>
       The 2m format was originally invented by Ciriaco Garcia de Celis. It also uses bigger sectors than  usual
       in  order  to  fit  more data on the disk.  However, it uses the standard format (18 sectors of 512 bytes
       each) on the first cylinder, in order to make these disks easier to handle by  DOS.  Indeed  this  method
       allows you to have a standard sized boot sector, which contains a description of how the rest of the disk
       should be read.

       However,  the  drawback  of  this  is  that  the  first  cylinder  can  hold  less  data than the others.
       Unfortunately, DOS can only handle disks where each track contains the same amount of data. Thus 2m hides
       the fact that the first track contains less data by using a <u>shadow</u> <u>FAT</u>. (Usually, DOS stores the  FAT  in
       two identical copies, for additional safety.  XDF stores only one copy, but tells DOS that it stores two.
       Thus  the  space that would be taken up by the second FAT copy is saved.) This also means that you should
       <b>never</b> <b>use</b> <b>a</b> <b>2m</b> <b>disk</b> <b>to</b> <b>store</b> <b>anything</b> <b>else</b> <b>than</b> <b>a</b> <b>DOS</b> <b>file</b> <b>system</b>.

       Mtools supports these formats only on Linux.

     <b>XDF</b>
       XDF is a high capacity format used by OS/2. It can hold 1840 K per disk. That's lower than  the  best  2m
       formats, but its main advantage is that it is fast: 600 milliseconds per track. That's faster than the 21
       sector  format, and almost as fast as the standard 18 sector format. In order to access these disks, make
       sure mtools has been compiled with XDF support, and set  the  use_xdf  variable  for  the  drive  in  the
       configuration file. See section Compiling mtools, and `miscellaneous variables', for details on how to do
       this. Fast XDF access is only available for Linux kernels which are more recent than 1.1.34.

       Mtools supports this format only on Linux.

       <b>Caution</b>  <b>/</b>  <b>Attention</b>  <b>distributors</b>:  If mtools is compiled on a Linux kernel more recent than 1.3.34, it
       won't run on an older kernel. However, if it has been compiled on an older kernel, it  still  runs  on  a
       newer  kernel, except that XDF access is slower. It is recommended that distribution authors only include
       mtools binaries compiled on kernels older than 1.3.34 until 2.0 comes out. When 2.0 will be  out,  mtools
       binaries  compiled  on newer kernels may (and should) be distributed. Mtools binaries compiled on kernels
       older than 1.3.34 won't run on any 2.1 kernel or later.

   <b>Exit</b> <b>codes</b>
       All the Mtools commands return 0 on success, 1 on utter failure, or 2 on partial failure.  All the Mtools
       commands perform a few sanity checks before going ahead, to make sure that the disk is indeed  an  MS-DOS
       disk (as opposed to, say an ext2 or MINIX disk). These checks may reject partially corrupted disks, which
       might  otherwise  still  be  readable.  To  avoid  these  checks, set the MTOOLS_SKIP_CHECK environmental
       variable or the corresponding configuration file variable (see section  global variables)

   <b>Bugs</b>
       An unfortunate side effect of  not  guessing  the  proper  device  (when  multiple  disk  capacities  are
       supported) is an occasional error message from the device driver.  These can be safely ignored.

       The  fat  checking  code  chokes on 1.72 Mb disks mformatted with pre-2.0.7 mtools. Set the environmental
       variable MTOOLS_FAT_COMPATIBILITY (or the corresponding configuration file variable, `global  variables')
       to bypass the fat checking.

   <b>Credits</b>
       Original code (versions through 2.0.7?) of mtools was developped by Emmet P. Gray (Texas, USA).

       David C. Niemi contributed VFAT support and helped maintain mtools.

       The  packaging  process  of  mtools  uses a modified version of Beverly A. Erlebacher's texi2roff tool to
       convert the texi documentation into man pages.

</pre><h4><b>See</b> <b>also</b></h4><pre>
       floppyd_installtest mattrib mbadblocks  mcd  mcopy  mdel  mdeltree  mdir  mdoctorfat  mdu  mformat  minfo
       mkmanifest mlabel mmd mmount mmove mrd mren mshortname mshowfat mtoolstest mtype

mtools-4.0.48                                        22Feb25                                           <u><a href="../man1/mtools.1.html">mtools</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>