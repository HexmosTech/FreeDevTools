<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>sash - stand-alone shell with built-in commands</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/sash">sash_3.8-6_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       sash - stand-alone shell with built-in commands

</pre><h4><b>SYNOPSYS</b></h4><pre>
       <b>sash</b> <b>[-c</b> <b>command]</b> <b>[-f</b> <b>fileName</b> <b>]</b> <b>[-p</b> <b>prompt]</b> <b>[-q]</b> <b>[-a]</b> <b>[script]</b>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The  <b>sash</b>  program  is  a  stand-alone  shell which is useful for recovering from certain types of system
       failures.  In particular, it was created in order to cope with the problem of missing shared libraries or
       important executables.

       <b>Sash</b> can execute external programs, as in any shell.  There are no restrictions on these commands, as the
       standard shell is used to execute them if there are any non-wildcard meta-characters in the command.

       More importantly, however, is that many of the standard system commands  are  built-in  to  <b>sash</b>.   These
       built-in commands are:

            -ar, -chattr, -chgrp, -chmod, -chown, -chroot, -cmp,
            -cp, -dd, -echo, -ed, -grep, -file, -find, -gunzip,
            -gzip, -kill, -losetup, -ln, -ls, -lsattr, -mkdir,
            -mknod, -more, -mount, -mv, -pivot_root, -printenv, -pwd,
            -rm, -rmdir, -sum, -sync, -tar, -touch, -umount, -where

       These  commands  are  generally  similar  to the standard programs with similar names.  However, they are
       simpler and cruder than the external programs, and so many of  the  options  are  not  implemented.   The
       restrictions for each built-in command are described later.

       The  built-in  commands  which  correspond  to  external programs begin with a dash character in order to
       distinguish them from the external programs.  So typing "ls", for example, will attempt to run  the  real
       <b>ls</b> program.  If "-ls" is typed, then the built-in command which mimics <b>ls</b> is called.

       For  the  built-in  commands,  file  names are expanded so that asterisks, question marks, and characters
       inside of square brackets are recognised and are expanded.  Arguments can be quoted using single  quotes,
       double  quotes,  or  backslashes.  However, no other command line processing is performed.  This includes
       specifying of file redirection, and the specifying of a pipeline.

       If an external program is non-existant or fails to run correctly, then the "alias" built-in  command  may
       be used to redefine the standard command so that it automatically runs the built-in command instead.  For
       example,  the command "alias ls -ls" redefines "ls" to run the built-in command.  This saves you the pain
       of having to remember to type the leading dash all of the time.  If many external programs will not  run,
       then the "aliasall" command may be useful to create multiple aliases.

       The  "help"  command  will  list all of the built-in commands in <b>sash</b> <b>.</b>  If an argument is given, it will
       list only those built-in commands which contain the  given  argument  as  a  sub-string.   Each  built-in
       command is described below in more detail.

       <b>alias</b> <b>[name</b> <b>[command]]</b>
              If  <u>name</u>  and  <u>command</u>  are  provided, this defines an alias for a command with the specified name
              which executes the specified command with possible arguments.  Arguments containing wildcards  can
              be quoted in order to defer their expansion until the alias is invoked.  If just <u>name</u> is provided,
              then the definition of the specified command alias is displayed.  If nothing is provided, then the
              definitions of all aliases are displayed.

       <b>aliasall</b>
              This  defines aliases for all of the built-in commands that start with dashes to the corresponding
              names without the dashes.  This may be useful when the system is so  corrupted  that  no  external
              programs may be executed at all.

       <b>-ar</b> <b>[txp][v]</b> <b>arfile</b> <b>[filename]...</b>
              List  or  extract  files  from  an  ar  archive.   The arfile argument specifies a file name which
              contains the archive.  If no additional filenames are specified, then all files in the archive are
              operated on.  Otherwise, only those archive members which  have  the  same  name  as  one  of  the
              additional  filenames  are operated on.  Filenames which do not appear in the archive are ignored.
              Archives cannot be created or modified.  The  archiver  correctly  handles  4.0BSD  archives,  and
              understands  both  the  SysV  and  4.4BSD extensions for long file names.  The extended pseudo-BSD
              formats are not supported; nor are the  two  antediluvian  binary  formats  derived  from  V7  and
              earlier.  (The GNU archiver normally creates archives in the 4.0BSD format with SysV extensions.)

       <b>cd</b> <b>[dirName]</b>
              If  <u>dirName</u>  is  provided,  then  the  current directory is changed to the dirName.  If <u>dirName</u> is
              absent, then the current directory is changed to the user's home directory  (value  of  the  $HOME
              environment variable).

       <b>-chattr</b> <b>[+i]</b> <b>[-i]</b> <b>[+a]</b> <b>[-a]</b> <b>fileName</b> <b>...</b>
              Change  the  attributes  of the specified files on an ext2 or ext3 file system.  Using a plus sign
              adds the specified attribute for the files.  Using a minus sign removes the  specified  attributes
              for  the  files.   The 'i' attribute makes a file immutable so that it cannot be changed.  The 'a'
              attribute makes a file append-only.  This command is only available on Linux.

       <b>-chgrp</b> <b>gid</b> <b>fileName</b> <b>...</b>
              Change the group id for the specified list of files.  The <u>gid</u> can either be a  group  name,  or  a
              decimal value.

       <b>-chmod</b> <b>mode</b> <b>fileName</b> <b>...</b>
              Change the mode of the specified list of files.  The <u>mode</u> argument can only be an octal value.

       <b>-chown</b> <b>uid</b> <b>fileName</b> <b>...</b>
              Change  the  owner  id  for  the specified list of files.  The <u>uid</u> can either be a user name, or a
              decimal value.

       <b>-chroot</b> <b>path</b>
              Changes  the  root  directory to that specified in <u>path.</u>  This directory will  be  used  for  path
              names  beginning with <a href="file:/.">/.</a> The root directory is inherited by all children of the current process.

       <b>-cmp</b> <b>fileName1</b> <b>fileName2</b>
              Determines  whether or not the specified file names have identical data.  This says that the files
              are links to each other, are  different  sizes,  differ  at  a  particular  byte  number,  or  are
              identical.

       <b>-cp</b> <b>srcName</b> <b>...</b> <b>destName</b>
              Copies  one or more files from the <u>srcName</u> to the <u>destName</u>.  If more than one srcName is given, or
              if destName is a directory, then all the srcNames are copied into the destName directory with  the
              same names as the srcNames.

       <b>-dd</b> <b>if=name</b> <b>of=name</b> <b>[bs=n]</b> <b>[count=n]</b> <b>[skip=n]</b> <b>[seek=n]</b>
              Copy data from one file to another with the specified parameters.  The <u>if</u> and <u>of</u> arguments must be
              provided,  so  stdin  and stdout cannot be specified.  The <u>bs</u> argument is the block size, and is a
              numeric value (which defaults to 512 bytes).  <u>Count</u> is the number of blocks to  be  copied  (which
              defaults  to  end  of  file  for  the  input file).  <u>Skip</u> is the number of blocks to ignore before
              copying (seek is used if possible, and the default is 0).  <u>Seek</u> is the number of blocks to seek in
              the output file before writing (and defaults to 0).  Any of the numeric decimal  values  can  have
              one  or  more  trailing letters from the set 'kbw', which multiplies the value by 1024, 512, and 2
              respectively.  The command reports the number of full blocks read and written, and whether or  not
              any partial block was read or written.

       <b>-echo</b> <b>[args]</b> <b>...</b>
              Echo  the  arguments to the -echo command.  Wildcards are expanded, so this is a convenient way to
              get a quick list of file names in a directory.  The output is always terminated with a newline.

       <b>-ed</b> <b>[fileName]</b>
              Edit the specified file using line-mode commands.  The following <b>ed</b> commands are provided: = c r w
              i a d p l s f k z and q.  Line numbers can be constants,  ".",  "$",  "'x",  /<u>string</u>/  and  simple
              arithmetic  combinations  of these.  The substitute command and the search expression can only use
              literal strings.  There are some small differences in the way that some commands behave.

       <b>exec</b> <b>fileName</b> <b>[args]</b>
              Execute the specified program with the specified arguments.  This replaces <b>sash</b> completely by  the
              executed program.

       <b>exit</b>   Quit from <b>sash</b>.

       <b>-file</b> <b>fileName</b> <b>...</b>
              Examine  the  specified files and print out their file type.  This indicates whether the files are
              regular files or not, whether they contain printable text or shell scripts,  are  executables,  or
              contain binary data.

       <b>-find</b> <b>dirName</b> <b>[-xdev]</b> <b>[-type</b> <b>chars]</b> <b>[-name</b> <b>pattern]</b> <b>[-size</b> <b>minSize]</b>
              Find  all  files  contained  within  the  specified directory tree which meet all of the specified
              conditions.  The -xdev option prevents crossing of mount points.  The  -name  option  specifies  a
              wildcard  pattern  to match the last component of the file names.  The -type option specifies that
              the files must have a type matching the specified list from the set:  f  d  c  b  p  s  l.   These
              represent  regular files, directories, character devices, block devices, named pipes, sockets, and
              symbolic links.  The -size option specifies that the files must be regular  files  or  directories
              which contain at least the specified number of bytes.

       <b>-grep</b> <b>[-in]</b> <b>word</b> <b>fileName</b> <b>...</b>
              Display  lines  of  the  specified  files  which contain the given word.  If only one file name is
              given, then only the matching lines are printed.  If multiple file names are given, then the  file
              names  are  printed along with the matching lines.  <u>Word</u> must be a single word, (ie, not a regular
              expression).  If -i is given, then case is ignored when doing the search.  If -n  is  given,  then
              the line numbers of the matching lines are also printed.

       <b>-gunzip</b> <b>inputFileName</b> <b>...</b> <b>[-o</b> <b>outputPath]</b>
              Uncompress  one  or more files that had been compressed using the <u>gzip</u> or <u>compress</u> algorithms.  If
              the -o option is not given, then each of the input file names must  have  one  of  the  extensions
              ".gz",  ".tgz",  or  ".Z",  and those files will be replaced by the uncompressed versions of those
              files.  The original files will be deleted after the output files have been successfully  created.
              The  uncompressed versions of the files have the same names as the original file names, except for
              a simple modification of their extensions.  If an extension  is  ".tgz",  then  the  extension  is
              replaced by ".tar".  Otherwise, the ".gz" or ".Z" extension is removed.

              If the -o option is given, then the input files will not be deleted, and the uncompressed versions
              of  the files will be created as specified by <u>outputPath</u>.  If the output path is a directory, then
              the uncompressed versions of the input files will be placed in  that  directory  with  their  file
              names  modified as described above, or with the same name if the input file name does not have one
              of the special extensions.  If the output path is a regular file, then  only  one  input  file  is
              allowed,  and the uncompressed version of that input file is created as the output path exactly as
              specified.  If the output path is a block or character device, then the uncompressed  versions  of
              the input files are concatenated to the device.

              This command is only available if <b>sash</b> was compiled to use the gzip library.

       <b>-gzip</b> <b>inputFileName</b> <b>...</b> <b>[-o</b> <b>outputPath]</b>
              Compresses  one  or more files using the <u>gzip</u> algorithm.  If the -o option is not given, then each
              of the input file names will be replaced by the compressed versions of those files,  The  original
              files  will  be  deleted  after  the  output files have been successfully created.  The compressed
              versions of the files have the same names  as  the  original  file  names,  except  for  a  simple
              modification  of  the  extensions.   If  an extension is ".tar", then the extension is replaced by
              ".tgz".  Otherwise, the ".gz" extension is added.

              If the -o option is given, then the input files will not be deleted, and the  compressed  versions
              of  the files will be created as specified by <u>outputPath</u>.  If the output path is a directory, then
              the compressed versions of the input files will be placed in that directory with their file  names
              modified  as  described above.  If the output path is not a directory, then only one input file is
              allowed, and the compressed version of that input file is created as the output  path  exactly  as
              specified.

              This command is only available if <b>sash</b> was compiled to use the gzip library.

       <b>help</b> <b>[word]</b>
              Displays  a  list  of  built-in commands along with their usage strings.  If a word is given, then
              just those commands whose name or usage contains the word is displayed.  If a  word  is  specified
              which  exactly  matches  a  built-in command name, then a short description of the command and its
              usage is given.

       <b>-kill</b> <b>[-signal]</b> <b>pid</b> <b>...</b>
              Sends the specified signal to the specified list of processes.  <u>Signal</u> is a numeric value, or  one
              of  the  special  values  HUP,  INT,  QUIT, KILL, TERM, STOP, CONT, USR1 or USR2.  If no signal is
              specified then SIGTERM is used.

       <b>-losetup</b> <b>[-d]</b> <b>loopDev</b> <b>[file]</b>
              Associates loopback devices with files on the system. If <u>-d</u> is  not  given,  the  loopback  device
              <u>loopDev</u>  is  associated  with  <u>file.</u>   If  <u>-d</u> is given, <u>loopDev</u> is unassociated with the file it's
              currently configured for.

       <b>-ln</b> <b>[-s]</b> <b>srcName</b> <b>...</b> <b>destName</b>
              Links one or more files from the <u>srcName</u>  to  the  specified  <u>destName</u>.   If  there  are  multiple
              srcNames, or destName is a directory, then the link is put in the destName directory with the same
              name  as  the source name.  The default links are hard links.  Using -s makes symbolic links.  For
              symbolic links, only one srcName can be specified.

       <b>-ls</b> <b>[-lidFC]</b> <b>fileName</b> <b>...</b>
              Display information about the specified list of file names.  The normal listing is simply  a  list
              of  file  names,  one  per line.  The options available are -l, -n, -i, -d, and -F.  The -l option
              produces a long listing giving the normal 'ls' information.  The -n option is like -l except  that
              numeric user and group ids are shown.  The -i option displays the inode numbers of the files.  The
              -d  option  displays information about a directory, instead of the files within it.  The -F option
              appends a slash or asterisk to the file name if the file is a directory or is executable.  The  -C
              option  displays  the  file names in a multi-column format.  The width of the output is calculated
              using the COLS environment variable.

       <b>-lsattr</b> <b>fileName</b> <b>...</b>
              Display attributes for the specified files on an  ext2  or  ext3  file  system.   The  letter  'i'
              indicates that the file is immutable and cannot change.  The letter 'a' indicates that the file is
              append-only.   Dashes  are shown where the attributes are not set.  This command is only available
              on Linux.

       <b>-mkdir</b> <b>dirName</b> <b>...</b>
              Creates the specified directories.  They are created with the default permissions.

       <b>-mknod</b> <b>fileName</b> <b>type</b> <b>major</b> <b>minor</b>
              Creates a special device node, either a character file or a block file.  <u>Filename</u> is the  name  of
              the  node.   <u>Type</u>  is  either  'c'  or 'd'.  <u>Major</u> is the major device number.  <u>Minor</u> is the minor
              device number.  Both of these numbers are decimal.

       <b>-more</b> <b>fileName</b> <b>...</b>
              Type out the contents of the specified file names, one page at a time.  For each  page  displayed,
              you  can  type  'n'  and  a  return  to  go to the next file, 'q' and a return to quit the command
              completely, or just a return to go to the next page.  The environment variables LINES and COLS can
              be used to set the page size.

       <b>-mount</b> <b>[-t</b> <b>type]</b> <b>[-r]</b> <b>[-s]</b> <b>[-e]</b> <b>[-m]</b> <b>devName</b> <b>dirName</b>
              Mount a filesystem on a directory name.  The -t option specifies  the  type  of  filesystem  being
              mounted, and defaults to "ext3" for Linux and "ffs" for BSD.  The -r option indicates to mount the
              filesystem  read-only.   The  -s  option indicates to mount the filesystem no-suid.  The -e option
              indicates to mount the filesystem no-exec.  The -m option indicates to remount an already  mounted
              filesystem.  The -m option is only available on Linux.

       <b>-mv</b> <b>srcName</b> <b>...</b> <b>destName</b>
              Moves  one  or more files from the <u>srcName</u> to the <u>destName</u>.  If multiple srcNames are given, or if
              destName is a directory, then the srcNames are copied into the destination directory with the same
              names as the srcNames.  Renames are attempted first, but if this fails because of the files  being
              on different filesystems, then copies and deletes are done instead.

       <b>-pivot_root</b> <b>newRoot</b> <b>putOld</b>
              Moves  the  root  file system of the current process to the directory <u>putOld</u> and makes <u>newRoot</u> the
              new root file system of the current process.

       <b>-printenv</b> <b>[name]</b>
              If <u>name</u> is not given, this prints out the values of all the  current  environment  variables.   If
              <u>name</u> is given, then only that environment variable value is printed.

       <b>prompt</b> <b>[word]</b> <b>...</b>
              Sets  the prompt string that is displayed before reading of a command.  A space is always added to
              the specified prompt.

       <b>-pwd</b>   Prints the current working directory.

       <b>quit</b>   Exits from <b>sash</b>.

       <b>-rm</b> <b>fileName</b> <b>...</b>
              Removes one or more files.

       <b>-rmdir</b> <b>dirName</b> <b>...</b>
              Removes one or more directories.  The directories must be empty for this to be successful.

       <b>setenv</b> <b>name</b> <b>value</b>
              Set the value of an environment variable.

       <b>source</b> <b>fileName</b>
              Execute commands which are contained in the specified file name.

       <b>-sum</b> <b>fileName</b> <b>...</b>
              Calculates checksums for one or more files.  This is the 16 bit checksum compatible with  the  BSD
              sum program.

       <b>-sync</b>  Do a "sync" system call to force dirty blocks out to the disk.

       <b>-tar</b> <b>[ctxv]f</b> <b>tarFileName</b> <b>[fileName]</b> <b>...</b>
              Create,  list  or extract files from a tar archive.  The f option must be specified, and accepts a
              device or file name argument which contains the tar archive.  When creating,  at  least  one  file
              name  must  be  specified  to  be  stored.   If a file name is a directory, then all the files and
              directories within the directory are stored.  Linked files and other special file  types  are  not
              handled  properly.  When listing or extracting files, only those files starting with the specified
              file names are processed.  If no file names are specified, then  all  files  in  the  archive  are
              processed.   Leading  slashes  in  the tar archive file names are always removed so that you might
              need to cd to "/" to restore files which had absolute paths.

       <b>-touch</b> <b>fileName</b> <b>...</b>
              Updates the modify times of the specifed files.  If a file does not exist, then it will be created
              with the default protection.

       <b>umask</b> <b>[mask]</b>
              If <u>mask</u> is given, sets the "umask" value used for initializing the permissions  of  newly  created
              files.   If  <u>mask</u>  is  not  given,  then the current umask value is printed.  The mask is an octal
              value.

       <b>-umount</b> <b>[-f]</b> <b>fileName</b>
              Unmounts a file system.  The file name can either be the device name which is mounted, or else the
              directory name which the file system is mounted onto.  The -f option unmounts the filesystem  even
              if it is being used.  The -f option is only available on BSD.

       <b>unalias</b> <b>name</b>
              Remove the definition for the specified alias.

       <b>-where</b> <b>program</b>
              Prints  out  all  of  paths  defined  by the PATH environment variable where the specified program
              exists.  If the program exists but cannot be executed, then the reason is also printed.

</pre><h4><b>OPTIONS</b></h4><pre>
       There are several command line options to <b>sash</b>.

       The -c option executes the next argument  as  a  command  (including  embedded  spaces  to  separate  the
       arguments of the command), and then exits.

       The  -f  option executes the commands contained in the file name specified by the next argument, and then
       exits.  This feature can be used to create executable scripts for <b>sash</b> by starting the script file with a
       line similar to:
            #! /bin/sash -f

       The -p option takes the next argument as the prompt string to be used when prompting for commands.

       The -q option makes <b>sash</b> quiet, which simply means that it doesn't print its introduction  line  when  it
       starts.  This option is also implied if the -c or -f options are used.

       The  -a  option creates aliases for the built-in commands so that they replace the corresponding standard
       commands.  This is the same result as if the 'aliasall' command was used.

       A file name may be provided as the last argument to sash, in which case sash's  standard  input  is  read
       from  that  file. This allows #! scripts to use sash as their script interpreter. Be aware that sash does
       not provide most normal bourne-shell programming features, however.

</pre><h4><b>SYSTEM</b> <b>RECOVERY</b></h4><pre>
       This section contains some useful information about using <b>sash</b> with <b>lilo</b> to perform  system  recovery  in
       some situations.  Similar concepts should exist for other boot loaders and operating systems.

       When  important shared libraries are being upgraded, it might be a good idea to have <b>sash</b> already running
       on a console by itself.  Then if there is a problem with the shared libraries <b>sash</b> will be unaffected and
       you may be able to use it to fix the problem.

       If a problem with the system shows up at boot time so that you cannot enter multi-user mode and  log  in,
       then you can first try booting into single-user mode by adding the <u>single</u> keyword after your kernel image
       name  at  the  <b>lilo</b> prompt.  If you manage to reach a shell prompt, then you can run <b>sash</b> from that shell
       (if necessary).  One reason for doing this is that you might need to use the <b>-mount</b> command with  the  -m
       option to remount the root file system so that it can be modified.

       If  you  cannot  reach  the  shell  in  single-user  mode,  then  you  can try running sash directly as a
       replacement for the init process.  This is done by adding the <u>init=/bin/sash</u> keyword  after  your  kernel
       image  name  at the <b>lilo</b> prompt.  When this is done, then the use of the <b>aliasall</b> command might be useful
       to reduce attempts to access the root file system when running commands.

       If your root file system is so corrupted that you cannot get <b>sash</b> to run at all, then you  will  have  to
       resort to a system recovery floppy.

</pre><h4><b>WARNINGS</b></h4><pre>
       <b>Sash</b> should obviously be linked statically, otherwise its purpose is lost.  Note that even if the rest of
       the  program  is  linked statically, the password and group lookup routines in the C library can still be
       dynamic.  For that reason, if there are problems then it might be necessary to only use numeric  ids  for
       the -chown and -chgrp commands and to use the -n option instead of -l for the -ls command.

       Several other system commands might be necessary for system recovery, but aren't built-in to <b>sash</b>.

</pre><h4><b>AUTHOR</b></h4><pre>
       David I. Bell
       <a href="mailto:dbell@tip.net.au">dbell@tip.net.au</a>
       5 March 2014

                                                                                                         <u><a href="../man1/SASH.1.html">SASH</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>