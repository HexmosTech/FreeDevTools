<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>git-shell - Restricted login shell for Git-only SSH access</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/git-man">git-man_2.48.1-0ubuntu1.1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       git-shell - Restricted login shell for Git-only SSH access

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <u>chsh</u> -s $(command -v git-shell) &lt;user&gt;
       <u>git</u> <u>clone</u> &lt;user&gt;<b>@localhost:/path/to/repo.git</b>
       <u>ssh</u> &lt;user&gt;<b>@localhost</b>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This is a login shell for SSH accounts to provide restricted Git access. It permits execution only of
       server-side Git commands implementing the pull/push functionality, plus custom commands present in a
       subdirectory named <b>git-shell-commands</b> in the user’s home directory.

</pre><h4><b>COMMANDS</b></h4><pre>
       <u>git</u> <u>shell</u> accepts the following commands after the <b>-c</b> option:

       <u>git</u> <u>receive-pack</u> <u>&lt;argument&gt;</u>, <u>git</u> <u>upload-pack</u> <u>&lt;argument&gt;</u>, <u>git</u> <u>upload-archive</u> <u>&lt;argument&gt;</u>
           Call the corresponding server-side command to support the client’s <u>git</u> <u>push</u>, <u>git</u> <u>fetch</u>, or <u>git</u>
           <u>archive</u> <u>--remote</u> request.

       <u>cvs</u> <u>server</u>
           Imitate a CVS server. See <b><a href="../man1/git-cvsserver.1.html">git-cvsserver</a></b>(1).

       If a <b><a href="file:~/git-shell-commands">~/git-shell-commands</a></b> directory is present, <u>git</u> <u>shell</u> will also handle other, custom commands by
       running "<b>git-shell-commands/</b><u>&lt;command&gt;</u> <u>&lt;arguments&gt;</u>" from the user’s home directory.

</pre><h4><b>INTERACTIVE</b> <b>USE</b></h4><pre>
       By default, the commands above can be executed only with the <b>-c</b> option; the shell is not interactive.

       If a <b><a href="file:~/git-shell-commands">~/git-shell-commands</a></b> directory is present, <u>git</u> <u>shell</u> can also be run interactively (with no
       arguments). If a <b>help</b> command is present in the <b>git-shell-commands</b> directory, it is run to provide the
       user with an overview of allowed actions. Then a "git&gt; " prompt is presented at which one can enter any
       of the commands from the <b>git-shell-commands</b> directory, or <b>exit</b> to close the connection.

       Generally this mode is used as an administrative interface to allow users to list repositories they have
       access to, create, delete, or rename repositories, or change repository descriptions and permissions.

       If a <b>no-interactive-login</b> command exists, then it is run and the interactive shell is aborted.

</pre><h4><b>EXAMPLES</b></h4><pre>
       To disable interactive logins, displaying a greeting instead:

           $ chsh -s <a href="file:///usr/lib/w3m/cgi-bin/w3mman2html.cgi?git-shell">/usr/bin/git-shell</a>
           $ mkdir $HOME/git-shell-commands
           $ cat &gt;$HOME/git-shell-commands/no-interactive-login &lt;&lt;\EOF
           #!<a href="file:/bin/sh">/bin/sh</a>
           printf '%s\n' "Hi $USER! You've successfully authenticated, but I do not"
           printf '%s\n' "provide interactive shell access."
           exit 128
           EOF
           $ chmod +x $HOME/git-shell-commands/no-interactive-login

       To enable git-cvsserver access (which should generally have the <b>no-interactive-login</b> example above as a
       prerequisite, as creating the git-shell-commands directory allows interactive logins):

           $ cat &gt;$HOME/git-shell-commands/cvs &lt;&lt;\EOF
           if ! test $# = 1 &amp;&amp; test "$1" = "server"
           then
                   echo &gt;&amp;2 "git-cvsserver only handles \"server\""
                   exit 1
           fi
           exec git cvsserver server
           EOF
           $ chmod +x $HOME/git-shell-commands/cvs

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <a href="../man1/ssh.1.html">ssh</a>(1), <b><a href="../man1/git-daemon.1.html">git-daemon</a></b>(1), contrib/git-shell-commands/README

</pre><h4><b>GIT</b></h4><pre>
       Part of the <b><a href="../man1/git.1.html">git</a></b>(1) suite

Git 2.48.1                                         07/02/2025                                       <u><a href="../man1/GIT-SHELL.1.html">GIT-SHELL</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>