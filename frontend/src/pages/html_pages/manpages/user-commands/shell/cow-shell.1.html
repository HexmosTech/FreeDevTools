<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>cow-shell - Start a copy-on-write session and invoke a shell.</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/cowdancer">cowdancer_0.90_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       cow-shell - Start a copy-on-write session and invoke a shell.

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>cow-shell</b> <b>[</b><u>commandline</u><b>]</b>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>cow-shell</b> Executes specified command with <b>cowdancer</b> or a shell if no command-line option is given.

       Inside  the  cowdancer  session, files under the current directory are protected in a way so that a write
       operation to an i-node which existed at the point of running cow-shell is not modified.

       Useful for managing hard-linked source-trees and scratch-filesystems.

</pre><h4><b>EXAMPLES</b></h4><pre>
       <b>cp</b> <b>-al</b> <b>cowdancer/</b> <b>cowdancer.new</b> <b>&amp;&amp;</b>  <b>cd</b> <b>cowdancer.new</b> <b>&amp;&amp;</b> <b>cow-shell</b>
              Create a hardlinked tree, and cd into the newly created tree.   After  invoking  cow-shell  inside
              that  tree,  a  write  operation  against a file that is hardlinked with the original tree will be
              copied to a new file before write.

       <b>cp</b> <b>-al</b> <b>cowdancer/</b> <b>cowdancer.new</b> <b>&amp;&amp;</b>  <b>cd</b> <b>cowdancer.new</b> <b>&amp;&amp;</b> <b>cow-shell</b> <b>debuild</b>
              Tries to run dpkg-buildpackage on the new tree, to avoid damage to the original tree.

              Configure debuild to ignore <b>.ilist</b> files, through <b>-i</b> or <b>-I</b> option.

</pre><h4><b>FILES</b></h4><pre>
       <b>.ilist</b> Generated dynamically in the current directory.  The file contains the list of i-node numbers that
              should be protected from write operation.

       <b>/usr/lib/cowdancer/libcowdancer.so</b>
              The shared library used internally that overrides some functions that potentially write to  files.
              This library implements the COW feature and is preloaded with LD_PRELOAD.

       <b><a href="file:/bin/cp">/bin/cp</a></b>
              Used for copying.  Requires GNU option <b>-a</b> to be functional.

</pre><h4><b>ENVIRONMENT</b></h4><pre>
       <b>COWDANCER_ILISTFILE</b>
              The path to the current <b>.ilist</b> file.

       <b>COWDANCER_IGNORE</b>
              Used internally to work around infinite loops.  It will be unset.

       <b>LD_PRELOAD</b>
              Utilized to preload <b>libcowdancer.so</b>

       <b>COWDANCER_DEBUG</b>
              Debugging option.  Enables debug messages.  cowdancer will give verbose debug messages in standard
              error output.

       <b>COWDANCER_SO</b>
              Debugging option.  Specifies a different path for libcowdancer.so.

       <b>COWDANCER_REUSE=yes</b>
              Enables reuse of cowdancer .ilist file found for consecutive runs of cow-shell.

</pre><h4><b>RETURN</b> <b>VALUE</b></h4><pre>
       The  functions  that  are  overridden  with  cowdancer will give an errno value of <b>ENOMEM</b> when there is a
       problem.

       System isn't really out of memory, but this error code is chosen because this error  is  usually  handled
       gracefully by applications.

</pre><h4><b>RESTRICTIONS</b></h4><pre>
       Can only support directories that are scanned by <b>cow-shell</b> command.

       The  operation  is  not  semantically  correct when files are originally hardlinked, hardlinks are always
       broken.

       Does not support anything when LD_PRELOAD trick does not work.

       Does not work unless hardlinks are supported on the filesystem.

       Not very user-friendly.

       Leaves <b>.ilist</b> file around.

</pre><h4><b>AUTHOR</b></h4><pre>
       Junichi Uekawa (<a href="mailto:dancer@debian.org">dancer@debian.org</a>)

       Upstream page is available at <b><a href="http://www.netfort.gr.jp/~dancer/software/cowdancer.html">http://www.netfort.gr.jp/~dancer/software/cowdancer.html</a></b>

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b>cowdancer-ilistcreate</b> <b>(</b>1<b>)</b>

cowdancer                                          2006 Jan 25                                      <u><a href="../man1/cow-shell.1.html">cow-shell</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>