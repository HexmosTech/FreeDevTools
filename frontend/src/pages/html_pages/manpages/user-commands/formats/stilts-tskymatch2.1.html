<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>stilts-tskymatch2 - Crossmatches 2 tables on sky position</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/stilts">stilts_3.5.1-2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       stilts-tskymatch2 - Crossmatches 2 tables on sky position

</pre><h4><b>SYNOPSIS</b></h4><pre>

       <b>stilts</b> <b>tskymatch2</b> [in1=<u>&lt;table1&gt;</u>] [ifmt1=<u>&lt;in-format&gt;</u>] [in2=<u>&lt;table2&gt;</u>] [ifmt2=<u>&lt;in-format&gt;</u>]
                         [omode=<u>out|meta|stats|count|checksum|cgi|discard|topcat|samp|tosql|gui</u>] [out=<u>&lt;out-</u>
                         <u>table&gt;</u>] [ofmt=<u>&lt;out-format&gt;</u>] [ra1=<u>&lt;expr&gt;</u>] [dec1=<u>&lt;expr&gt;</u>] [ra2=<u>&lt;expr&gt;</u>] [dec2=<u>&lt;expr&gt;</u>]
                         [error=<u>&lt;value/arcsec&gt;</u>] [tuning=<u>&lt;healpix-k&gt;</u>]
                         [join=<u>1and2|1or2|all1|all2|1not2|2not1|1xor2</u>] [find=<u>all|best|best1|best2</u>]
                         [runner=<u>parallel|parallel&lt;n&gt;|parallel-all|sequential|classic|partest</u>]

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <u>tskymatch2</u>  performs  a crossmatch of two tables based on the proximity of sky positions. You specify the
       columns or expressions giving right ascension and declination in degrees for each input table, and a max‐
       imum permissible separation in arcseconds, and the resulting joined table is output.

       If you omit expressions for the RA and Dec, an attempt is made to identify the columns to use using  col‐
       umn  Unified  Content Descriptors (UCDs) or names. First columns bearing appropriate UCD1 or UCD1+ values
       (<u>POS_EQ_RA</u>, <u>POS_EQ_RA_MAIN</u>, <u>pos.eq.ra</u> or <u>pos.eq.ra;meta.main</u> and their equivalents for  declination)  are
       sought.  If these cannot be found, columns named something like "RA" or "RA2000" are sought. If either is
       found, the column units are consulted and radian-&gt;degree conversions are performed if necessary  (degrees
       are  assumed  if no unit value is given). If nothing likely can be found, then the command will fail with
       an error message. This search logic is intended as a convenience only; it is somewhat ad hoc and  subject
       to change. To make sure that the correct angle values are being used, specify the <u>ra</u> and <u>dec</u> position pa‐
       rameters explicitly.

       <u>tskymatch2</u>  is  simply  a  cut-down  version, provided for convenience, of the more general matching task
       <u>tmatch2</u>. If you want more match options or otherwise more configurability, you can probably  find  it  by
       using <u>tmatch2</u>.

</pre><h4><b>OPTIONS</b></h4><pre>
       <b>in1=</b><u>&lt;table1&gt;</u>
              The location of the first input table. This may take one of the following forms:

                * A filename.

                * A URL.

                * The special value "<u>-</u>", meaning standard input. In this case the input format must be given ex‐
                  plicitly using the <u>ifmt1</u> parameter. Note that not all formats can be streamed in this way.

                * A scheme specification of the form <u>:&lt;scheme-name&gt;:&lt;scheme-args&gt;</u>.

                * A  system command line with either a "<u>&lt;</u>" character at the start, or a "<u>|</u>" character at the end
                  ("<u>&lt;syscmd</u>" or "<u>syscmd|</u>"). This executes the given pipeline and reads from its standard output.
                  This will probably only work on unix-like systems.
               In any case, compressed data in one of the supported compression formats (gzip, Unix compress  or
              bzip2) will be decompressed transparently.

       <b>ifmt1=</b><u>&lt;in-format&gt;</u>
              Specifies the format of the first input table as specified by parameter <u>in1</u>. The known formats are
              listed  in  SUN/256. This flag can be used if you know what format your table is in. If it has the
              special value <u>(auto)</u> (the default), then an attempt will be made to detect the format of the table
              automatically. This cannot always be done correctly however, in which case the program  will  exit
              with an error explaining which formats were attempted. This parameter is ignored for scheme-speci‐
              fied tables.

       <b>in2=</b><u>&lt;table2&gt;</u>
              The location of the second input table. This may take one of the following forms:

                * A filename.

                * A URL.

                * The special value "<u>-</u>", meaning standard input. In this case the input format must be given ex‐
                  plicitly using the <u>ifmt2</u> parameter. Note that not all formats can be streamed in this way.

                * A scheme specification of the form <u>:&lt;scheme-name&gt;:&lt;scheme-args&gt;</u>.

                * A  system command line with either a "<u>&lt;</u>" character at the start, or a "<u>|</u>" character at the end
                  ("<u>&lt;syscmd</u>" or "<u>syscmd|</u>"). This executes the given pipeline and reads from its standard output.
                  This will probably only work on unix-like systems.
               In any case, compressed data in one of the supported compression formats (gzip, Unix compress  or
              bzip2) will be decompressed transparently.

       <b>ifmt2=</b><u>&lt;in-format&gt;</u>
              Specifies  the  format  of the second input table as specified by parameter <u>in2</u>. The known formats
              are listed in SUN/256. This flag can be used if you know what format your table is in. If  it  has
              the  special  value <u>(auto)</u> (the default), then an attempt will be made to detect the format of the
              table automatically. This cannot always be done correctly however, in which case the program  will
              exit  with an error explaining which formats were attempted. This parameter is ignored for scheme-
              specified tables.

       <b>omode=</b><u>out|meta|stats|count|checksum|cgi|discard|topcat|samp|tosql|gui</u>
              The mode in which the result table will be output. The default mode is <u>out</u>, which means  that  the
              result  will be written as a new table to disk or elsewhere, as determined by the <u>out</u> and <u>ofmt</u> pa‐
              rameters. However, there are other possibilities, which correspond to uses to which a table can be
              put other than outputting it, such as displaying metadata, calculating statistics, or populating a
              table in an SQL database. For some values of this parameter, additional  parameters  (<u>&lt;mode-args&gt;</u>)
              are required to determine the exact behaviour.

              Possible values are

                * <u>out</u>

                * <u>meta</u>

                * <u>stats</u>

                * <u>count</u>

                * <u>checksum</u>

                * <u>cgi</u>

                * <u>discard</u>

                * <u>topcat</u>

                * <u>samp</u>

                * <u>tosql</u>

                * <u>gui</u>
               Use the <u>help=omode</u> flag or see SUN/256 for more information.

       <b>out=</b><u>&lt;out-table&gt;</u>
              The  location  of  the output table. This is usually a filename to write to. If it is equal to the
              special value "-" (the default) the output table will be written to standard output.

              This parameter must only be given if <u>omode</u> has its default value of "<u>out</u>".

       <b>ofmt=</b><u>&lt;out-format&gt;</u>
              Specifies the format in which the output table will be written (one  of  the  ones  in  SUN/256  -
              matching  is  case-insensitive  and you can use just the first few letters). If it has the special
              value "<u>(auto)</u>" (the default), then the output filename will be examined to try to guess what  sort
              of  file  is  required  usually by looking at the extension. If it's not obvious from the filename
              what output format is intended, an error will result.

              This parameter must only be given if <u>omode</u> has its default value of "<u>out</u>".

       <b>ra1=</b><u>&lt;expr&gt;</u>
              Right ascension in degrees for the position of each row of table 1. This may simply  be  a  column
              name,  or  it  may  be an algebraic expression calculated from columns as explained in SUN/256. If
              left blank, an attempt is made to guess from UCDs, column names and unit annotations what  expres‐
              sion to use.

       <b>dec1=</b><u>&lt;expr&gt;</u>
              Declination  in degrees for the position of each row of table 1. This may simply be a column name,
              or it may be an algebraic expression calculated from columns as  explained  in  SUN/256.  If  left
              blank, an attempt is made to guess from UCDs, column names and unit annotations what expression to
              use.

       <b>ra2=</b><u>&lt;expr&gt;</u>
              Right  ascension  in  degrees for the position of each row of table 2. This may simply be a column
              name, or it may be an algebraic expression calculated from columns as  explained  in  SUN/256.  If
              left  blank, an attempt is made to guess from UCDs, column names and unit annotations what expres‐
              sion to use.

       <b>dec2=</b><u>&lt;expr&gt;</u>
              Declination in degrees for the position of each row of table 2. This may simply be a column  name,
              or  it  may  be  an  algebraic expression calculated from columns as explained in SUN/256. If left
              blank, an attempt is made to guess from UCDs, column names and unit annotations what expression to
              use.

       <b>error=</b><u>&lt;value/arcsec&gt;</u>
              The maximum separation permitted between two objects for them to count as a match. Units  are  arc
              seconds.

       <b>tuning=</b><u>&lt;healpix-k&gt;</u>
              Tuning  parameter that controls the pixel size used when binning the rows. The legal range is from
              0 (corresponding to pixel size of about 60 degrees) to 20 (about 0.2 arcsec). The  value  of  this
              parameter will not affect the result but may affect the performance in terms of CPU and memory re‐
              sources  required. A default value will be chosen based on the size of the <u>error</u> parameter, but it
              may be possible to improve performance by adjusting the default value. The value used can be  seen
              by  examining  the progress output. If your match is taking a long time or is failing from lack of
              memory it may be worth trying different values for this parameter.

       <b>join=</b><u>1and2|1or2|all1|all2|1not2|2not1|1xor2</u>
              Determines which rows are included in the output table. The matching algorithm determines which of
              the rows from the first table correspond to which rows from the second. This parameter  determines
              what  to do with that information. Perhaps the most obvious thing is to write out a table contain‐
              ing only rows which correspond to a row in both of the two input tables.  However,  you  may  also
              want to see the unmatched rows from one or both input tables, or rows present in one table but un‐
              matched in the other, or other possibilities. The options are:

                * <u>1and2</u>: An output row for each row represented in both input tables (INNER JOIN)

                * <u>1or2</u>: An output row for each row represented in either or both of the input tables (FULL OUTER
                  JOIN)

                * <u>all1</u>: An output row for each matched or unmatched row in table 1 (LEFT OUTER JOIN)

                * <u>all2</u>: An output row for each matched or unmatched row in table 2 (RIGHT OUTER JOIN)

                * <u>1not2</u>:  An output row only for rows which appear in the first table but are not matched in the
                  second table

                * <u>2not1</u>: An output row only for rows which appear in the second table but are not matched in the
                  first table

                * <u>1xor2</u>: An output row only for rows represented in one of the input tables but  not  the  other
                  one

       <b>find=</b><u>all|best|best1|best2</u>
              Determines  what  happens when a row in one table can be matched by more than one row in the other
              table. The options are:

                * <u>all</u>: All matches. Every match between the two tables is included in the result. Rows from both
                  of the input tables may appear multiple times in the result.

                * <u>best</u>: Best match, symmetric. The best pairs are selected in a way which treats the two  tables
                  symmetrically.  Any  input row which appears in one result pair is disqualified from appearing
                  in any other result pair, so each row from both input tables will appear in at most one row in
                  the result.

                * <u>best1</u>: Best match for each Table 1 row. For each row in table 1, only the best match from  ta‐
                  ble  2  will  appear in the result. Each row from table 1 will appear a maximum of once in the
                  result, but rows from table 2 may appear multiple times.

                * <u>best2</u>: Best match for each Table 2 row. For each row in table 2, only the best match from  ta‐
                  ble  1  will  appear in the result. Each row from table 2 will appear a maximum of once in the
                  result, but rows from table 1 may appear multiple times.
               The differences between <u>best</u>, <u>best1</u> and <u>best2</u> are a bit subtle. In cases where it's obvious which
              object in each table is the best match for which object in the other, choosing  betwen  these  op‐
              tions  will  not affect the result. However, in crowded fields (where the distance between objects
              within one or both tables is typically similar to or smaller than the specified match  radius)  it
              will  make  a  difference.  In this case one of the asymmetric options (<u>best1</u> or <u>best2</u>) is usually
              more appropriate than <u>best</u>, but you'll have to think about which of them suits your  requirements.
              The  performance (time and memory usage) of the match may also differ between these options, espe‐
              cially if one table is much bigger than the other.

       <b>runner=</b><u>parallel|parallel&lt;n&gt;|parallel-all|sequential|classic|partest</u>
              Selects the threading implementation. The options are currently:

                * <u>parallel</u>: uses multithreaded implementation for large tables, with default parallelism,  which
                  is the smaller of 6 and the number of available processors

                * <u>parallel&lt;n&gt;</u>: uses multithreaded implementation for large tables, with parallelism given by the
                  supplied value <u>&lt;n&gt;</u>

                * <u>parallel-all</u>:  uses multithreaded implementation for large tables, with a parallelism given by
                  the number of available processors

                * <u>sequential</u>: uses multithreaded implementation but with only a single thread

                * <u>classic</u>: uses legacy sequential implementation

                * <u>partest</u>: uses multithreaded implementation even when tables are small
               The <u>parallel*</u> options should normally run faster than <u>sequential</u> or <u>classic</u> (which  are  provided
              mainly  for  testing purposes), at least for large matches and where multiple processing cores are
              available.

              The default value "<u>parallel</u>" is currently limited to a parallelism of 6 since larger values  yield
              diminishing  returns  given  that some parts of the matching algorithms run sequentially (Amdahl's
              Law), and using too many threads can sometimes end up doing more work or impacting on other opera‐
              tions on the same machine. But you can experiment with other concurrencies, e.g.  "<u>parallel16</u>"  to
              run on 16 cores (if available) or "<u>parallel-all</u>" to run on all available cores.

              The  value  of this parameter should make no difference to the matching results. If you notice any
              discrepancies <b>please</b> <b>report</b> <b>them</b>.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man1/stilts.1.html">stilts</a></b>(1)

       If the package stilts-doc is installed, the full documentation <b>SUN/256</b> is available in HTML format:
       file:///usr/share/doc/stilts/sun256/index.html

</pre><h4><b>VERSION</b></h4><pre>
       STILTS version 3.5.1-debian

       This is the Debian version of Stilts, which lack the support of some file formats and network  protocols.
       For differences see
       file:///usr/share/doc/stilts/README.Debian

</pre><h4><b>AUTHOR</b></h4><pre>
       Mark Taylor (Bristol University)

                                                    Mar 2017                                <u><a href="../man1/STILTS-TSKYMATCH2.1.html">STILTS-TSKYMATCH2</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>