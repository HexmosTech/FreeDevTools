<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>stilts-tmatch2 - Crossmatches 2 tables using flexible criteria</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/stilts">stilts_3.5.1-2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       stilts-tmatch2 - Crossmatches 2 tables using flexible criteria

</pre><h4><b>SYNOPSIS</b></h4><pre>

       <b>stilts</b> <b>tmatch2</b> [in1=<u>&lt;table1&gt;</u>] [ifmt1=<u>&lt;in-format&gt;</u>] [in2=<u>&lt;table2&gt;</u>] [ifmt2=<u>&lt;in-format&gt;</u>] [icmd1=<u>&lt;cmds&gt;</u>]
                      [icmd2=<u>&lt;cmds&gt;</u>] [ocmd=<u>&lt;cmds&gt;</u>]
                      [omode=<u>out|meta|stats|count|checksum|cgi|discard|topcat|samp|tosql|gui</u>] [out=<u>&lt;out-table&gt;</u>]
                      [ofmt=<u>&lt;out-format&gt;</u>] [matcher=<u>&lt;matcher-name&gt;</u>] [values1=<u>&lt;expr-list&gt;</u>] [values2=<u>&lt;expr-list&gt;</u>]
                      [params=<u>&lt;match-params&gt;</u>] [tuning=<u>&lt;tuning-params&gt;</u>]
                      [join=<u>1and2|1or2|all1|all2|1not2|2not1|1xor2</u>] [find=<u>all|best|best1|best2</u>]
                      [fixcols=<u>none|dups|all</u>] [suffix1=<u>&lt;label&gt;</u>] [suffix2=<u>&lt;label&gt;</u>] [scorecol=<u>&lt;col-name&gt;</u>]
                      [progress=<u>none|log|time|profile</u>] [runner=<u>parallel|parallel&lt;n&gt;|parallel-</u>
                      <u>all|sequential|classic|partest</u>]

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <u>tmatch2</u> is an efficient and highly configurable tool for crossmatching pairs of tables. It can match rows
       between tables on the basis of their relative position in the sky, or alternatively using many other cri‐
       teria  such  as  separation in some isotropic or anisotropic Cartesian space, identity of a key value, or
       some combination of these; the full range of match criteria is  discussed  in  SUN/256.  You  can  choose
       whether  you  want to identify all the matches or only the closest, and what form the output table takes,
       for instance matched rows only, or all rows from one or both tables, or only the unmatched rows.

       If you simply want to match two tables based on sky position with a fixed  maximum  separation,  you  may
       find the <u>tskymatch2</u> command easier to use.

       <b>Note:</b>  the  <u>duptag1</u>  and  <u>duptag2</u> parameters have been replaced at version 1.4 by <u>suffix1</u> and <u>suffix2</u> for
       consistency with other table join tasks.

</pre><h4><b>OPTIONS</b></h4><pre>
       <b>in1=</b><u>&lt;table1&gt;</u>
              The location of the first input table. This may take one of the following forms:

                * A filename.

                * A URL.

                * The special value "<u>-</u>", meaning standard input. In this case the input format must be given ex‐
                  plicitly using the <u>ifmt1</u> parameter. Note that not all formats can be streamed in this way.

                * A scheme specification of the form <u>:&lt;scheme-name&gt;:&lt;scheme-args&gt;</u>.

                * A system command line with either a "<u>&lt;</u>" character at the start, or a "<u>|</u>" character at the  end
                  ("<u>&lt;syscmd</u>" or "<u>syscmd|</u>"). This executes the given pipeline and reads from its standard output.
                  This will probably only work on unix-like systems.
               In  any case, compressed data in one of the supported compression formats (gzip, Unix compress or
              bzip2) will be decompressed transparently.

       <b>ifmt1=</b><u>&lt;in-format&gt;</u>
              Specifies the format of the first input table as specified by parameter <u>in1</u>. The known formats are
              listed in SUN/256. This flag can be used if you know what format your table is in. If it  has  the
              special value <u>(auto)</u> (the default), then an attempt will be made to detect the format of the table
              automatically.  This  cannot always be done correctly however, in which case the program will exit
              with an error explaining which formats were attempted. This parameter is ignored for scheme-speci‐
              fied tables.

       <b>in2=</b><u>&lt;table2&gt;</u>
              The location of the second input table. This may take one of the following forms:

                * A filename.

                * A URL.

                * The special value "<u>-</u>", meaning standard input. In this case the input format must be given ex‐
                  plicitly using the <u>ifmt2</u> parameter. Note that not all formats can be streamed in this way.

                * A scheme specification of the form <u>:&lt;scheme-name&gt;:&lt;scheme-args&gt;</u>.

                * A system command line with either a "<u>&lt;</u>" character at the start, or a "<u>|</u>" character at the  end
                  ("<u>&lt;syscmd</u>" or "<u>syscmd|</u>"). This executes the given pipeline and reads from its standard output.
                  This will probably only work on unix-like systems.
               In  any case, compressed data in one of the supported compression formats (gzip, Unix compress or
              bzip2) will be decompressed transparently.

       <b>ifmt2=</b><u>&lt;in-format&gt;</u>
              Specifies the format of the second input table as specified by parameter <u>in2</u>.  The  known  formats
              are  listed  in SUN/256. This flag can be used if you know what format your table is in. If it has
              the special value <u>(auto)</u> (the default), then an attempt will be made to detect the format  of  the
              table  automatically. This cannot always be done correctly however, in which case the program will
              exit with an error explaining which formats were attempted. This parameter is ignored for  scheme-
              specified tables.

       <b>icmd1=</b><u>&lt;cmds&gt;</u>
              Specifies  processing  to be performed on the first input table as specified by parameter <u>in1</u>, be‐
              fore any other processing has taken place. The value of this parameter is one or more of the  fil‐
              ter  commands described in SUN/256. If more than one is given, they must be separated by semicolon
              characters (";"). This parameter can be repeated multiple times on the same command line to  build
              up  a  list of processing steps. The sequence of commands given in this way defines the processing
              pipeline which is performed on the table.

              Commands may alternatively be supplied in an external file, by  using  the  indirection  character
              '<u>@</u>'. Thus a value of "<u>@filename</u>" causes the file <u>filename</u> to be read for a list of filter commands
              to execute. The commands in the file may be separated by newline characters and/or semicolons, and
              lines which are blank or which start with a '<u>#</u>' character are ignored. A backslash character '<u>\fR'</u>
              <u>at</u> <u>the</u> <u>end</u> <u>of</u> <u>a</u> <u>line</u> <u>joins</u> <u>it</u> <u>with</u> <u>the</u> <u>following</u> <u>line.</u>

       <b>icmd2=</b><u>&lt;cmds&gt;</u>
              Specifies  processing to be performed on the second input table as specified by parameter <u>in2</u>, be‐
              fore any other processing has taken place. The value of this parameter is one or more of the  fil‐
              ter  commands described in SUN/256. If more than one is given, they must be separated by semicolon
              characters (";"). This parameter can be repeated multiple times on the same command line to  build
              up  a  list of processing steps. The sequence of commands given in this way defines the processing
              pipeline which is performed on the table.

              Commands may alternatively be supplied in an external file, by  using  the  indirection  character
              '<u>@</u>'. Thus a value of "<u>@filename</u>" causes the file <u>filename</u> to be read for a list of filter commands
              to execute. The commands in the file may be separated by newline characters and/or semicolons, and
              lines which are blank or which start with a '<u>#</u>' character are ignored. A backslash character '<u>\fR'</u>
              <u>at</u> <u>the</u> <u>end</u> <u>of</u> <u>a</u> <u>line</u> <u>joins</u> <u>it</u> <u>with</u> <u>the</u> <u>following</u> <u>line.</u>

       <b>ocmd=</b><u>&lt;cmds&gt;</u>
              Specifies  processing  to  be  performed on the output table, after all other processing has taken
              place. The value of this parameter is one or more of the filter commands described in SUN/256.  If
              more  than  one is given, they must be separated by semicolon characters (";"). This parameter can
              be repeated multiple times on the same command line to build up a list of  processing  steps.  The
              sequence  of  commands given in this way defines the processing pipeline which is performed on the
              table.

              Commands may alternatively be supplied in an external file, by  using  the  indirection  character
              '<u>@</u>'. Thus a value of "<u>@filename</u>" causes the file <u>filename</u> to be read for a list of filter commands
              to execute. The commands in the file may be separated by newline characters and/or semicolons, and
              lines which are blank or which start with a '<u>#</u>' character are ignored. A backslash character '<u>\fR'</u>
              <u>at</u> <u>the</u> <u>end</u> <u>of</u> <u>a</u> <u>line</u> <u>joins</u> <u>it</u> <u>with</u> <u>the</u> <u>following</u> <u>line.</u>

       <b>omode=</b><u>out|meta|stats|count|checksum|cgi|discard|topcat|samp|tosql|gui</u>
              The  mode  in which the result table will be output. The default mode is <u>out</u>, which means that the
              result will be written as a new table to disk or elsewhere, as determined by the <u>out</u> and <u>ofmt</u>  pa‐
              rameters. However, there are other possibilities, which correspond to uses to which a table can be
              put other than outputting it, such as displaying metadata, calculating statistics, or populating a
              table  in  an SQL database. For some values of this parameter, additional parameters (<u>&lt;mode-args&gt;</u>)
              are required to determine the exact behaviour.

              Possible values are

                * <u>out</u>

                * <u>meta</u>

                * <u>stats</u>

                * <u>count</u>

                * <u>checksum</u>

                * <u>cgi</u>

                * <u>discard</u>

                * <u>topcat</u>

                * <u>samp</u>

                * <u>tosql</u>

                * <u>gui</u>
               Use the <u>help=omode</u> flag or see SUN/256 for more information.

       <b>out=</b><u>&lt;out-table&gt;</u>
              The location of the output table. This is usually a filename to write to. If it is  equal  to  the
              special value "-" (the default) the output table will be written to standard output.

              This parameter must only be given if <u>omode</u> has its default value of "<u>out</u>".

       <b>ofmt=</b><u>&lt;out-format&gt;</u>
              Specifies  the  format  in  which  the  output table will be written (one of the ones in SUN/256 -
              matching is case-insensitive and you can use just the first few letters). If it  has  the  special
              value  "<u>(auto)</u>" (the default), then the output filename will be examined to try to guess what sort
              of file is required usually by looking at the extension. If it's not  obvious  from  the  filename
              what output format is intended, an error will result.

              This parameter must only be given if <u>omode</u> has its default value of "<u>out</u>".

       <b>matcher=</b><u>&lt;matcher-name&gt;</u>
              Defines  the  nature  of the matching that will be performed. Depending on the name supplied, this
              may be positional matching using celestial or Cartesian coordinates, exact matching on  the  value
              of  a  string column, or other things. A list and explanation of the available matching algorithms
              is given in SUN/256. The value supplied for this parameter determines the meanings of  the  values
              required by the <u>params</u>, <u>values*</u> and <u>tuning</u> parameter(s).

       <b>values1=</b><u>&lt;expr-list&gt;</u>
              Defines  the  values  from table 1 which are used to determine whether a match has occurred. These
              will typically be coordinate values such as RA and Dec and perhaps some per-row  error  values  as
              well,  though exactly what values are required is determined by the kind of match as determined by
              <u>matcher</u>. Depending on the kind of match, the number and type of the values required will  be  dif‐
              ferent.  Multiple  values  should be separated by whitespace; if whitespace occurs within a single
              value it must be 'quoted' or "quoted". Elements of the expression list are  commonly  just  column
              names,  but  may  be  algebraic  expressions  calculated from zero or more columns as explained in
              SUN/256.

       <b>values2=</b><u>&lt;expr-list&gt;</u>
              Defines the values from table 2 which are used to determine whether a match  has  occurred.  These
              will  typically  be  coordinate values such as RA and Dec and perhaps some per-row error values as
              well, though exactly what values are required is determined by the kind of match as determined  by
              <u>matcher</u>.  Depending  on the kind of match, the number and type of the values required will be dif‐
              ferent. Multiple values should be separated by whitespace; if whitespace occurs  within  a  single
              value  it  must  be 'quoted' or "quoted". Elements of the expression list are commonly just column
              names, but may be algebraic expressions calculated from zero  or  more  columns  as  explained  in
              SUN/256.

       <b>params=</b><u>&lt;match-params&gt;</u>
              Determines  the  parameters  of this match. This is typically one or more tolerances such as error
              radii. It may contain zero or more values; the values that are required depend on the  match  type
              selected  by  the  <u>matcher</u>  parameter.  If  it contains multiple values, they must be separated by
              spaces; values which contain a space can be 'quoted' or "quoted".

       <b>tuning=</b><u>&lt;tuning-params&gt;</u>
              Tuning values for the matching process, if appropriate. It may contain zero or  more  values;  the
              values  that  are permitted depend on the match type selected by the <u>matcher</u> parameter. If it con‐
              tains multiple values, they must be separated by spaces; values  which  contain  a  space  can  be
              'quoted'  or  "quoted". If this optional parameter is not supplied, sensible defaults will be cho‐
              sen.

       <b>join=</b><u>1and2|1or2|all1|all2|1not2|2not1|1xor2</u>
              Determines which rows are included in the output table. The matching algorithm determines which of
              the rows from the first table correspond to which rows from the second. This parameter  determines
              what  to do with that information. Perhaps the most obvious thing is to write out a table contain‐
              ing only rows which correspond to a row in both of the two input tables.  However,  you  may  also
              want to see the unmatched rows from one or both input tables, or rows present in one table but un‐
              matched in the other, or other possibilities. The options are:

                * <u>1and2</u>: An output row for each row represented in both input tables (INNER JOIN)

                * <u>1or2</u>: An output row for each row represented in either or both of the input tables (FULL OUTER
                  JOIN)

                * <u>all1</u>: An output row for each matched or unmatched row in table 1 (LEFT OUTER JOIN)

                * <u>all2</u>: An output row for each matched or unmatched row in table 2 (RIGHT OUTER JOIN)

                * <u>1not2</u>:  An output row only for rows which appear in the first table but are not matched in the
                  second table

                * <u>2not1</u>: An output row only for rows which appear in the second table but are not matched in the
                  first table

                * <u>1xor2</u>: An output row only for rows represented in one of the input tables but  not  the  other
                  one

       <b>find=</b><u>all|best|best1|best2</u>
              Determines  what  happens when a row in one table can be matched by more than one row in the other
              table. The options are:

                * <u>all</u>: All matches. Every match between the two tables is included in the result. Rows from both
                  of the input tables may appear multiple times in the result.

                * <u>best</u>: Best match, symmetric. The best pairs are selected in a way which treats the two  tables
                  symmetrically.  Any  input row which appears in one result pair is disqualified from appearing
                  in any other result pair, so each row from both input tables will appear in at most one row in
                  the result.

                * <u>best1</u>: Best match for each Table 1 row. For each row in table 1, only the best match from  ta‐
                  ble  2  will  appear in the result. Each row from table 1 will appear a maximum of once in the
                  result, but rows from table 2 may appear multiple times.

                * <u>best2</u>: Best match for each Table 2 row. For each row in table 2, only the best match from  ta‐
                  ble  1  will  appear in the result. Each row from table 2 will appear a maximum of once in the
                  result, but rows from table 1 may appear multiple times.
               The differences between <u>best</u>, <u>best1</u> and <u>best2</u> are a bit subtle. In cases where it's obvious which
              object in each table is the best match for which object in the other, choosing  betwen  these  op‐
              tions  will  not affect the result. However, in crowded fields (where the distance between objects
              within one or both tables is typically similar to or smaller than the specified match  radius)  it
              will  make  a  difference.  In this case one of the asymmetric options (<u>best1</u> or <u>best2</u>) is usually
              more appropriate than <u>best</u>, but you'll have to think about which of them suits your  requirements.
              The  performance (time and memory usage) of the match may also differ between these options, espe‐
              cially if one table is much bigger than the other.

       <b>fixcols=</b><u>none|dups|all</u>
              Determines how input columns are renamed before use in the output table. The choices are:

                * <u>none</u>: columns are not renamed

                * <u>dups</u>: columns which would otherwise have duplicate names in the output will be renamed to  in‐
                  dicate which table they came from

                * <u>all</u>: all columns will be renamed to indicate which table they came from
               If columns are renamed, the new ones are determined by <u>suffix*</u> parameters.

       <b>suffix1=</b><u>&lt;label&gt;</u>
              If  the  <u>fixcols</u>  parameter is set so that input columns are renamed for insertion into the output
              table, this parameter determines how the renaming is done. It gives a suffix which is appended  to
              all renamed columns from table 1.

       <b>suffix2=</b><u>&lt;label&gt;</u>
              If  the  <u>fixcols</u>  parameter is set so that input columns are renamed for insertion into the output
              table, this parameter determines how the renaming is done. It gives a suffix which is appended  to
              all renamed columns from table 2.

       <b>scorecol=</b><u>&lt;col-name&gt;</u>
              Gives  the  name  of  a  column in the output table to contain the "match score" for each pairwise
              match. The meaning of this column is dependent on the chosen <u>matcher</u>, but it typically  represents
              a  distance of some kind between the two matching points. If a null value is chosen, no score col‐
              umn will be inserted in the output table. The default value of this parameter depends on <u>matcher</u>.

       <b>progress=</b><u>none|log|time|profile</u>
              Determines whether information on progress of the match should be output  to  the  standard  error
              stream  as  it  progresses. For lengthy matches this is a useful reassurance and can give guidance
              about how much longer it will take. It can also be useful as a performance diagnostic.

              The options are:

                * <u>none</u>: no progress is shown

                * <u>log</u>: progress information is shown

                * <u>time</u>: progress information and some time profiling information is shown

                * <u>profile</u>: progress information and limited time/memory profiling information are shown

       <b>runner=</b><u>parallel|parallel&lt;n&gt;|parallel-all|sequential|classic|partest</u>
              Selects the threading implementation. The options are currently:

                * <u>parallel</u>: uses multithreaded implementation for large tables, with default parallelism,  which
                  is the smaller of 6 and the number of available processors

                * <u>parallel&lt;n&gt;</u>: uses multithreaded implementation for large tables, with parallelism given by the
                  supplied value <u>&lt;n&gt;</u>

                * <u>parallel-all</u>:  uses multithreaded implementation for large tables, with a parallelism given by
                  the number of available processors

                * <u>sequential</u>: uses multithreaded implementation but with only a single thread

                * <u>classic</u>: uses legacy sequential implementation

                * <u>partest</u>: uses multithreaded implementation even when tables are small
               The <u>parallel*</u> options should normally run faster than <u>sequential</u> or <u>classic</u> (which  are  provided
              mainly  for  testing purposes), at least for large matches and where multiple processing cores are
              available.

              The default value "<u>parallel</u>" is currently limited to a parallelism of 6 since larger values  yield
              diminishing  returns  given  that some parts of the matching algorithms run sequentially (Amdahl's
              Law), and using too many threads can sometimes end up doing more work or impacting on other opera‐
              tions on the same machine. But you can experiment with other concurrencies, e.g.  "<u>parallel16</u>"  to
              run on 16 cores (if available) or "<u>parallel-all</u>" to run on all available cores.

              The  value  of this parameter should make no difference to the matching results. If you notice any
              discrepancies <b>please</b> <b>report</b> <b>them</b>.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man1/stilts.1.html">stilts</a></b>(1)

       If the package stilts-doc is installed, the full documentation <b>SUN/256</b> is available in HTML format:
       file:///usr/share/doc/stilts/sun256/index.html

</pre><h4><b>VERSION</b></h4><pre>
       STILTS version 3.5.1-debian

       This is the Debian version of Stilts, which lack the support of some file formats and network  protocols.
       For differences see
       file:///usr/share/doc/stilts/README.Debian

</pre><h4><b>AUTHOR</b></h4><pre>
       Mark Taylor (Bristol University)

                                                    Mar 2017                                   <u><a href="../man1/STILTS-TMATCH2.1.html">STILTS-TMATCH2</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>