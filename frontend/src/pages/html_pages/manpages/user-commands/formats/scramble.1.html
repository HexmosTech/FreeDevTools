<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>scramble - Converts between the SAM, BAM and CRAM file formats.</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/staden-io-lib-utils">staden-io-lib-utils_1.15.0-1.1build2_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       <b>scramble</b> - Converts between the SAM, BAM and CRAM file formats.

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>scramble</b>  [<u>options</u>] [<u>input_file</u> [<u>output_file</u>]]

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>scramble</b>  converts  between  various  next-gen  sequencing alignment file formats, including SAM, BAM and
       CRAM. It can either act as a pipe reading stdin and writing to stdout, or on named files.

       When operating as a pipe the input type defaults to SAM or BAM, requiring the <b>-I</b> <b>cram</b> option to  indicate
       input  is  in CRAM format is appropriate. The output defaults to BAM, but can be adjusted by using the <b>-O</b>
       <u>format</u> option. When given filenames the file type is automatically chosen based on the filename suffix.

</pre><h4><b>OPTIONS</b></h4><pre>
       <b>-I</b> <u>format</u>
              Selects the input format, where <u>format</u> is one of sam, bam or cram.  Use this when  reading  via  a
              pipe  to  avoid input bytes being consumed when attempting to detect if the input is in SAM or BAM
              format.

       <b>-O</b> <u>format</u>
              Selects the output format, where <u>format</u> is one of sam, bam or cram.

       <b>-1</b> to <b>-9</b>
              Sets the compression level from 1 (low compression, fast)  to  9  (high  compression,  slow)  when
              writing in BAM or CRAM format. This is only used during writing.

       <b>-0</b> or <b>-u</b>
              Writes  uncompressed  data.  In  BAM  this  still  uses  BGZF  containers,  but  with  no internal
              compression. In CRAM it stores blocks in RAW format instead. The  option  has  no  effect  on  SAM
              output.

       <b>-j</b>     CRAM  encoding  only.   Add  bzip2  to  the list of compression codes potentially used during CRAM
              creation.

       <b>-Z</b>     CRAM encoding only.  Add lzma to the list  of  compression  codes  potentially  used  during  CRAM
              creation.   Given  the  slow  compression  speed  of  lzma, this may only be used where it gives a
              significant advantage over zlib or bzip2, but with higher compression levels (-7)  this  weighting
              is ignored as LZMA decompression speed is acceptable, albeit still slower than zlib.

       <b>-m</b>     CRAM  decoding  only.  Generate  MD:Z:  and  NM:I:  auxiliary  fields based on the reference-based
              compression.

       <b>-M</b>     CRAM encoding only.  Forcibly pack  sequences  from  multiple  references  into  the  same  slice.
              Normally  CRAM  will start a new slice when changing from one reference to another, but will still
              automatically switch to multi-reference slices if the number of sequences per  slice  becomes  too
              small.

       <b>-R</b> <u>range</u>
              Currently for CRAM input only, but SAM/BAM support is pending. This indicates a reference sequence
              name  and  optionally a start and end location within that reference, using the syntax <u>ref_name</u> or
              <u>ref_name</u>:<u>start</u>-<u>end</u>. For efficient operation the CRAM file needs a .crai format index (built  using
              the <b>cram_index</b> program).

       <b>-r</b> <u>ref.fa</u>
              CRAM  encoding only.  Use this to specify the reference fasta file.  Note that if the input SAM or
              BAM file a <u>file:</u> or local file system based URI specified in the @SQ headers then this option  may
              not be necessary.

       <b>-s</b> <u>number</u>
              CRAM encoding only.  Specifies the number of sequecnes per slice.  Defaults to 10000.

       <b>-S</b> <u>number</u>
              CRAM encoding only.   Specifies the number of slices per container.  Defaults to 1.

       <b>-t</b>     BAM  and  CRAM  only.   Specifies  the  number of compression or decompression threads, adaptively
              shared between both encoding and decoding.  Defaults to 1 (no threading).

       <b>-V</b> <u>version_string</u>
              CRAM encoding only.  Sets the CRAM file format version. Supported  values  are  "2.0",  "2.1"  and
              "3.0".

       <b>-e</b>     CRAM encoding only. Embed snippets of the reference sequence in every slice.  This means the files
              can be decoded without needing to specify the reference fasta file.

       <b>-E</b>     CRAM encoding only. Embed snippets of the consensus sequence in every slice.  This operates as per
              the  -e  option,  but  the  consensus is generated from the aligned data.  This does not therefore
              require a reference to be known during encode (although it  is  still  a  mandatory  part  of  the
              specification  that  the SQ SAM headers have an M5 field).  It also means the files can be decoded
              without needing to specify the reference fasta file.

       <b>-x</b>     CRAM encoding only.  Omit reference based compression and instead  store  details  of  every  base
              verbatim.

       <b>-B</b>     Experimental, encoding only.  When storing quality values, bin into 8 discrete values (plus 0), as
              typically  used by modern Illumina instruments.  (Note that the bins may not be precisely the same
              ranges.)

       <b>-!</b>     CRAM v3.0 and above decoding only. Do not check CRCs.   This  option  should  only  be  used  when
              attempting to recover from a data corruption.

       <b>-q</b>     Do not append @PG header lines with the scramble program name and arguments.

       <b>-X</b> <u>mode</u>
              Encode  CRAM using a set of predefined parameters defined by mode.  This are one of fast, normal /
              default, small or archive.

              <b>fast</b> (param: -1 -s 1000)
                     Lightweight compression for speed and  small  slice  size  for  quick  fine-grained  random
                     access.

              <b>normal</b> (param: none)
                     Default mode.  This is the same as not specifying <b>-X</b>.  For version 3.1 onwards this enables
                     the name tokeniser ("-T").

              <b>small</b> (param v3.0: -j -s 25000,  param v3.1 or v4: -Tf -s 25000)
                     Optimise for smaller files, with larger slices.

              <b>archive</b> (param v3.0: -j -s 100000,  param v3.1 or v4: -Tfa -s 100000)
                     Optimised for smallest files, intended for data archival.  This uses a large slice size and
                     will  have  poorer  random access. At level 7 onwards this also enables lzma compression if
                     compiled in ("-Z").

       <b>-d</b> <u>tag-list</u>
              Discard all auxiliary tags except those listed in <u>tag-list</u>.   The  list  is  comma  separated  and
              contains  the  two  letter  tag  codes  specified  as-is  or  with simplified regular expressions.
              Character classes such as "[A-W]" are permitted, but not with the negation code "^". Also "." is a
              synonym for any legal tag character.  Hence "[A-Z][A-Z0-9]" represents all tag types belonging  to
              the official namespace.

              The option may be specified more than once, but it cannot be mixed with <b>-D</b>.

       <b>-D</b> <u>tag-list</u>
              Discard  auxiliary  tags listed in <u>tag-list</u>, keeping everything else.  The list is comma separated
              and contains only the two letter tag codes.   As  with  <b>-d</b>  tag-list  can  be  specified  using  a
              simplified regular expression.  This means <b>-D</b> <b>..</b> removes all auxiliary tags.

              The option may be specified more than once, but it cannot be mixed with <b>-d</b>.

</pre><h4><b>EXAMPLES</b></h4><pre>
       To convert a BAM file from stdin to CRAM on stdout, using reference MT.fa.

           <u>some_command</u> | scramble -I bam -O cram -r MT.fa | <u>some_command</u>

       The  default  CRAM  output  format  is  version  3.0.   The  command below enables the experimental newer
       compression codecs (NB: do not use this in production) using the "small" profile, while also removing all
       tag types reserved for local/private use.  (Also consider <b>-d</b> <b>[A-Z][A-Z0-9]</b> instead of the <b>-D</b> arguments.)

           scramble -V 3.1 -X small -D [a-zXYZ]. -D.[a-z] in.cram out.cram

</pre><h4><b>AUTHOR</b></h4><pre>
       James Bonfield, Wellcome Trust Sanger Institute

                                                 December 6 2022                                     <u><a href="../man1/scramble.1.html">scramble</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>