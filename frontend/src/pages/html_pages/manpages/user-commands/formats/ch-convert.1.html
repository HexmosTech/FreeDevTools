<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ch-convert - Convert an image from one format to another</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/charliecloud-builders">charliecloud-builders_0.38-2_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       ch-convert - Convert an image from one format to another

</pre><h4><b>SYNOPSIS</b></h4><pre>
          $ ch-convert [-i FMT] [-o FMT] [OPTION ...] IN OUT

</pre><h4><b>DESCRIPTION</b></h4><pre>
       Copy  image  <b>IN</b>  to  <b>OUT</b> and convert its format. Replace <b>OUT</b> if it already exists, unless <b>--no-clobber</b> is
       specified. It is an error if <b>IN</b> and <b>OUT</b> have the same format; use the format’s own tools for that case.

       <b>ch-run</b> can run container images that are plain directories or (optionally)  SquashFS  archives.  However,
       images can take on a variety of other formats as well. The main purpose of this tool is to make images in
       those other formats available to <b>ch-run</b>.

       For best performance, <b>ch-convert</b> should be invoked only once, producing the final format actually needed.

          <b>IN</b>     Descriptor for the input image. For image builders, this is an image reference; otherwise, it’s
                 a filesystem path.

          <b>OUT</b>    Descriptor for the output image.

          <b>-h,</b> <b>--help</b>
                 Print help and exit.

          <b>-i,</b> <b>--in-fmt</b> <b>FMT</b>
                 Input image format is <b>FMT</b>. If omitted, inferred as described below.

          <b>-n,</b> <b>--dry-run</b>
                 Don’t read the input or write the output. Useful for testing format inference.

          <b>--no-clobber</b>
                 Error if <b>OUT</b> already exists, rather than replacing it.

          <b>--no-xattrs</b>
                 Ignore xattrs and ACLs when converting. Overrides <b>$CH_XATTRS</b>.

          <b>-o,</b> <b>--out-fmt</b> <b>FMT</b>
                 Output image format is <b>FMT</b>; inferred if omitted.

          <b>-q,</b> <b>--quiet</b>
                 Be quieter; can be repeated. Incompatible with <b>-v</b>. See the <u>FAQ</u> <u>entry</u> <u>on</u> <u>verbosity</u> for details.

          <b>-s,</b> <b>--storage</b> <b>DIR</b>
                 Set the storage directory. Equivalent to the same option for <b><a href="../man1/ch-image.1.html">ch-image</a>(1)</b> and <b><a href="../man1/ch-run.1.html">ch-run</a>(1)</b>.

          <b>--tmp</b> <b>DIR</b>
                 A  sub-directory for temporary storage is created in <b>DIR</b> and removed at the end of a successful
                 conversion. <b>If</b> <b>this</b> <b>script</b> <b>crashes</b> <b>or</b> <b>errors</b> <b>out,</b> <b>the</b> <b>temporary</b> <b>directory</b>  <b>is</b>  <b>left</b>  <b>behind</b>  <b>to</b>
                 <b>assist</b>  <b>in</b>  <b>debugging.</b>  Storage  may  be needed up to twice the uncompressed size of the image,
                 depending on the input and output formats. Default: <b>$TMPDIR</b> if specified; otherwise <b><a href="file:/var/tmp">/var/tmp</a></b>.

          <b>-v,</b> <b>--verbose</b>
                 Print extra chatter. Can be repeated.

          <b>--xattrs</b>
                 Preserve xattrs and ACLs when converting.

</pre><h4><b>IMAGE</b> <b>FORMATS</b></h4><pre>
       <b>ch-convert</b> knows about these values of <b>FMT</b>:

          <b>ch-image</b>
                 Internal  storage  for  Charliecloud’s  unprivileged  image  builder  (Dockerfile  interpreter)
                 <b>ch-image</b>.

          <b>dir</b>    Ordinary  filesystem  directory  (i.e., not a mount point) containing an unpacked image. Output
                 directories that already exist are replaced if they look like an image. If the output directory
                 is empty, the conversion should use the directory without  overwriting  it.  If  the  directory
                 doesn’t look like an image and isn’t empty, exit with an error.

          <b>docker</b> Internal storage for Docker.

          <b>podman</b> Internal storage for Podman.

          <b>squash</b> SquashFS filesystem archive containing the flattened image. SquashFS archives are much like tar
                 archives  but  are  mountable, including by <b>ch-run</b>’s internal SquashFUSE mounting. Most systems
                 have at least the SquashFS-Tools installed which allows unpacking into a directory,  just  like
                 tar. Due to this greater flexibility, SquashFS is preferred to tar.

                 <b>Note:</b>  Conversions  to and from SquashFS are quite noisy due to the verbosity of the underlying
                 <b><a href="../man1/mksquashfs.1.html">mksquashfs</a>(1)</b> and <b><a href="../man1/unsquashfs.1.html">unsquashfs</a>(1)</b> tools.

          <b>tar</b>    Tar archive containing the flattened image with no layer  sub-archives;  i.e.,  the  output  of
                 <b>docker</b>  <b>export</b> works but the output of <b>docker</b> <b>save</b> does not. Output tarballs are always gzipped
                 and must end in <b>.tar.gz</b>; input tarballs can be any compression acceptable to <b><a href="../man1/tar.1.html">tar</a>(1)</b>.

       All of these are local formats; <b>ch-convert</b> does not know how to push or pull images.

</pre><h4><b>FORMAT</b> <b>INFERENCE</b></h4><pre>
       <b>ch-convert</b> tries to save typing by guessing formats when they are reasonably clear. This is done  against
       filenames,  rather  than  file contents, so the rules are the same for output descriptors that do not yet
       exist.

       Format inference is done for both <b>IN</b> and <b>OUT</b>. The first matching glob below yields the  inferred  format.
       Paths need not exist in the filesystem.

          1. <b>*.sqfs</b>, <b>*.squash</b>, <b>*.squashfs</b>: SquashFS.

          2. <b>*.tar</b>, <b>*.t?z</b>, <b>*.tar.?</b>, <b>*.tar.??</b>: Tarball.

          3. <b>/*</b>, <b>./*</b>, i.e. absolute path or relative path with explicit dot: Directory.

          4. If <u>ch-image</u> is installed: <b>ch-image</b> internal storage.

          5. If Podman is installed: Podman internal storage.

          6. If Docker is installed: Docker internal storage.

          7. Otherwise: No format inference.

</pre><h4><b>EXAMPLES</b></h4><pre>
       Typical  build-to-run  sequence  for image <b>foo/bar</b> using <b>ch-run</b>’s internal SquashFUSE code, inferring the
       output format:

          $ sudo docker build -t foo/bar -f Dockerfile .
          [...]
          $ ch-convert foo/bar:latest /var/tmp/foobar.sqfs
          input:   docker    foo/bar:latest
          output:  squashfs  /var/tmp/foobar.sqfs
          copying ...
          done
          $ ch-run /var/tmp/foobar.sqfs -- echo hello
          hello

       Same conversion, but no format inference:

          $ ch-convert -i ch-image -o squash foo/bar:latest /var/tmp/foobar.sqfs
          input:   docker    foo/bar:latest
          output:  squashfs  /var/tmp/foobar.sqfs
          copying ...
          done

</pre><h4><b>REPORTING</b> <b>BUGS</b></h4><pre>
       If Charliecloud was obtained  from  your  Linux  distribution,  use  your  distribution’s  bug  reporting
       procedures.

       Otherwise, report bugs to: <u>https://github.com/hpc/charliecloud/issues</u>

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <a href="../man7/charliecloud.7.html">charliecloud</a>(7)

       Full documentation at: &lt;<u>https://hpc.github.io/charliecloud</u>&gt;

</pre><h4><b>COPYRIGHT</b></h4><pre>
       2014–2023, Triad National Security, LLC and others

0.38                                          2024-11-23 16:04 UTC                                 <u><a href="../man1/CH-CONVERT.1.html">CH-CONVERT</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>