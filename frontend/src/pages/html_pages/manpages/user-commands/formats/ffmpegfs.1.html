<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ffmpegfs - mounts and transcodes a multitude of formats to one of the target formats on the fly.</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/ffmpegfs">ffmpegfs_2.17-1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       ffmpegfs - mounts and transcodes a multitude of formats to one of the target formats on the fly.

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>ffmpegfs</b> [<u>OPTION</u>]... <u>IN_DIR</u> <u>OUT_DIR</u>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The <a href="../man1/ffmpegfs.1.html">ffmpegfs</a>(1) command will mount the directory <u>IN_DIR</u> on <u>OUT_DIR</u>. Thereafter, accessing <u>OUT_DIR</u> will
       show the contents of <u>IN_DIR</u>, with all supported media files transparently renamed and transcoded to one
       of the supported target formats upon access.

       Supported output formats:
       ┌────────┬────────────────────────┬────────┬───────────────┐
       │        │                        │        │               │
       │ <b>Format</b> │ <b>Description</b>            │ <b>Audio</b>  │ <b>Video</b>         │
       ├────────┼────────────────────────┼────────┼───────────────┤
       │        │                        │        │               │
       │ AIFF   │ Audio Interchange File │        │ PCM 16 bit BE │
       │        │ Format                 │        │               │
       ├────────┼────────────────────────┼────────┼───────────────┤
       │        │                        │        │               │
       │ ALAC   │ Apple Lossless Audio   │        │ ALAC          │
       │        │ Codec                  │        │               │
       ├────────┼────────────────────────┼────────┼───────────────┤
       │        │                        │        │               │
       │ FLAC   │ Free Lossless Audio    │        │ FLAC          │
       ├────────┼────────────────────────┼────────┼───────────────┤
       │        │                        │        │               │
       │ HLS    │ HTTP Live Streaming    │ H264   │ AAC           │
       ├────────┼────────────────────────┼────────┼───────────────┤
       │        │                        │        │               │
       │ MOV    │ QuickTime File Format  │ H264   │ AAC           │
       ├────────┼────────────────────────┼────────┼───────────────┤
       │        │                        │        │               │
       │ MP3    │ MPEG-2 Audio Layer III │        │ MP3           │
       ├────────┼────────────────────────┼────────┼───────────────┤
       │        │                        │        │               │
       │ MP4    │ MPEG-4                 │ H264   │ AAC           │
       ├────────┼────────────────────────┼────────┼───────────────┤
       │        │                        │        │               │
       │ OGG    │                        │ Theora │ Vorbis        │
       ├────────┼────────────────────────┼────────┼───────────────┤
       │        │                        │        │               │
       │ MKV    │ Matroska               │ H264   │ AAC           │
       ├────────┼────────────────────────┼────────┼───────────────┤
       │        │                        │        │               │
       │ Opus   │                        │ Opus   │               │
       ├────────┼────────────────────────┼────────┼───────────────┤
       │        │                        │        │               │
       │ ProRes │ Apple ProRes           │ ProRes │ PCM 16 bit LE │
       ├────────┼────────────────────────┼────────┼───────────────┤
       │        │                        │        │               │
       │ TS     │ MPEG Transport Stream  │ H264   │ AAC           │
       ├────────┼────────────────────────┼────────┼───────────────┤
       │        │                        │        │               │
       │ WAV    │ Waveform Audio File    │        │ PCM 16 bit LE │
       │        │ Format                 │        │               │
       ├────────┼────────────────────────┼────────┼───────────────┤
       │        │                        │        │               │
       │ WebM   │                        │ VP9    │ Opus          │
       ├────────┼────────────────────────┼────────┼───────────────┤
       │        │                        │        │               │
       │ BMP    │ Video to frameset      │        │ BMP           │
       ├────────┼────────────────────────┼────────┼───────────────┤
       │        │                        │        │               │
       │ JPG    │ Video to frameset      │        │ JPEG          │
       ├────────┼────────────────────────┼────────┼───────────────┤
       │        │                        │        │               │
       │ PNG    │ Video to frameset      │        │ PNG           │
       └────────┴────────────────────────┴────────┴───────────────┘

</pre><h4><b>OPTIONS</b></h4><pre>
       Usage: ffmpegfs [OPTION]... IN_DIR OUT_DIR

       Mount IN_DIR on OUT_DIR, converting audio and video files upon access.

   <b>Encoding</b> <b>options</b>
       <b>--desttype</b>=TYPE, <b>-odesttype</b>=TYPE
           Select the destination format.  <u>TYPE</u> can currently be:

           <b>AIFF</b>, <b>ALAC</b>, <b>BMP</b>, <b>FLAC</b>, <b>HLS</b>, <b>JPG</b>, <b>MOV</b>, <b>MP3</b>, <b>MP4</b>, <b>MKV</b>, <b>OGG</b>, <b>Opus</b>, <b>PNG</b>, <b>ProRes</b>, <b>TS</b>, <b>WAV</b>, <b>WebM</b>.

           To stream videos, <b>MP4</b>, <b>TS</b>, <b>HLS</b>, <b>OGG</b>, <b>WEBM</b>, <b>MKV</b>, or <b>MOV</b>/<b>PRORES</b> must be selected.

           To use HTTP Live Streaming, set <b>HLS</b>.

           When a destination <b>JPG</b>, <b>PNG</b>, or <b>BMP</b> is chosen, all frames of a video source file will be presented in
           a virtual directory named after the source file. Audio will not be available.

           To use the smart transcoding feature, specify a video and audio file type, separated by a "+" sign.
           For example, --desttype=mov+aiff will convert video files to Apple Quicktime MOV and audio-only files
           to AIFF.

           Defaults to: <b>mp4</b>

       <b>--audiocodec</b>=TYPE, <b>-oaudiocodec</b>=TYPE
           Select an audio codec.  <u>TYPE</u> depends on the destination format and can currently be:
           ┌─────────┬───────────────┐
           │ <b>Formats</b> │ <b>Audio</b> <b>Codecs</b>  │
           ├─────────┼───────────────┤
           │ MP4     │ <b>AAC</b>, MP3      │
           ├─────────┼───────────────┤
           │ WebM    │ <b>OPUS</b>, VORBIS  │
           ├─────────┼───────────────┤
           │ MOV     │ <b>AAC</b>, AC3, MP3 │
           ├─────────┼───────────────┤
           │ MKV     │ <b>AAC</b>, AC3, MP3 │
           ├─────────┼───────────────┤
           │ TS, HLS │ <b>AAC</b>, AC3, MP3 │
           └─────────┴───────────────┘

           Other destination formats do not support other codecs than the default.

           Defaults to: The destination format’s default setting, as indicated by the first codec name in the
           list.

       <b>--videocodec</b>=TYPE, <b>-ovideocodec</b>=TYPE
           Select a video codec.  <u>TYPE</u> depends on the destination format and can currently be:
           ┌─────────┬──────────────────────────┐
           │ <b>Formats</b> │ <b>Video</b> <b>Codecs</b>             │
           ├─────────┼──────────────────────────┤
           │ MP4     │ <b>H264</b>, H265, MPEG1, MPEG2 │
           ├─────────┼──────────────────────────┤
           │ WebM    │ <b>VP9</b>, VP8, AV1            │
           ├─────────┼──────────────────────────┤
           │ MOV     │ <b>H264</b>, H265, MPEG1, MPEG2 │
           ├─────────┼──────────────────────────┤
           │ MKV     │ <b>H264</b>, H265, MPEG1, MPEG2 │
           ├─────────┼──────────────────────────┤
           │ TS, HLS │ <b>H264</b>, H265, MPEG1, MPEG2 │
           └─────────┴──────────────────────────┘

           Other destination formats do not support other codecs than the default.

           Defaults to: The destination format’s default setting, as indicated by the first codec name in the
           list.

       <b>--autocopy</b>=OPTION, <b>-oautocopy</b>=OPTION
           Select the auto copy option.  <u>OPTION</u> can be:
           ┌─────────────┬───────────────────────────────────────┐
           │ <b>OFF</b>         │ Never copy streams, transcode always. │
           ├─────────────┼───────────────────────────────────────┤
           │ <b>MATCH</b>       │ Copy stream if target supports codec. │
           ├─────────────┼───────────────────────────────────────┤
           │ <b>MATCHLIMIT</b>  │ Same as MATCH, only copy if target    │
           │             │ not larger, transcode otherwise.      │
           ├─────────────┼───────────────────────────────────────┤
           │ <b>STRICT</b>      │ Copy stream if codec matches desired  │
           │             │ target, transcode otherwise.          │
           ├─────────────┼───────────────────────────────────────┤
           │ <b>STRICTLIMIT</b> │ Same as STRICT, only copy if target   │
           │             │ not larger, transcode otherwise.      │
           └─────────────┴───────────────────────────────────────┘

           This can speed up transcoding significantly as copying streams uses much less computing power as
           compared to transcoding.

           <b>MATCH</b> copies a stream if the target supports it, e.g., an AAC audio stream will be copied to MPEG,
           although FFmpeg’s target format is MP3 for this container. H264 would be copied to ProRes, although
           the result would be a regular MOV or MP4, not a ProRes file.

           <b>STRICT</b> would convert AAC to MP3 for MPEG or H264 to ProRes for Prores files to strictly adhere to the
           output format setting. This will create homogenous results which might prevent problems with picky
           playback software.

           Note: When the <b>--audiocodec</b> or <b>--videocodec</b> option is specified, the STRICT option should be used to
           ensure that the chosen output codec is used in any scenario. MATCH would enable copy if the output
           format supports the input codec.

       Defaults to: <b>OFF</b>

       <b>--recodesame</b>=OPTION, <b>-orecodesame</b>=OPTION
           Select recode to the same format option, <u>OPTION</u> can be:
           ┌─────┬───────────────────────────────────┐
           │ <b>NO</b>  │ Never recode to the same format.  │
           ├─────┼───────────────────────────────────┤
           │ <b>YES</b> │ Always recode to the same format. │
           └─────┴───────────────────────────────────┘

           Defaults to: <b>NO</b>

       <b>--profile</b>=NAME, <b>-oprofile</b>=NAME
           Set profile for target audience, <u>NAME</u> can be:
           ┌─────────┬───────────────────────────────────┐
           │ <b>NONE</b>    │ no profile                        │
           ├─────────┼───────────────────────────────────┤
           │ <b>FF</b>      │ optimise for Firefox              │
           ├─────────┼───────────────────────────────────┤
           │ <b>EDGE</b>    │ optimise for MS Edge and Internet │
           │         │ Explorer &gt; 11                     │
           ├─────────┼───────────────────────────────────┤
           │ <b>IE</b>      │ optimise for MS Edge and Internet │
           │         │ Explorer ⇐ 11                     │
           ├─────────┼───────────────────────────────────┤
           │ <b>CHROME</b>  │ Google Chrome                     │
           ├─────────┼───────────────────────────────────┤
           │ <b>SAFARI</b>  │ Apple Safari                      │
           ├─────────┼───────────────────────────────────┤
           │ <b>OPERA</b>   │ Opera                             │
           ├─────────┼───────────────────────────────────┤
           │ <b>MAXTHON</b> │ Maxthon                           │
           └─────────┴───────────────────────────────────┘

           <b>Note:</b> applies to the MP4 output format only, and is ignored for all other formats.

           Defaults to: <b>NONE</b>

       --<b>level</b>=NAME, -o <b>level</b>=NAME
           Set level for output if available.  <u>NAME</u> can be:
           ┌──────────┬─────────────────┐
           │ <b>PROXY</b>    │ Proxy – apco    │
           ├──────────┼─────────────────┤
           │ <b>LT</b>       │ LT – apcs       │
           ├──────────┼─────────────────┤
           │ <b>STANDARD</b> │ standard – apcn │
           ├──────────┼─────────────────┤
           │ <b>HQ</b>       │ HQ - apch       │
           └──────────┴─────────────────┘

           <b>Note:</b> applies to the MP4 output format only, and is ignored for all other formats.

           Defaults to: <b>HQ</b>

       <b>--include_extensions</b>=LIST, <b>-oinclude_extensions</b>=LIST
           Set the list of file extensions to be encoded.  <u>LIST</u> can have one or more entries that are separated
           by commas. These are the only file extensions that will be transcoded. Can be specified numerous
           times and will be merged, which is required when specifying them in the fstab because commas cannot
           be used to separate the extensions. The entries support shell wildcard patterns.

           Example: --include_extensions=mp4,wmv to encode MPEG-4 and Windows Media files only.

           Defaults to: Encode all supported files.

       <b>--hide_extensions</b>=LIST, <b>-ohide_extensions</b>=LIST
           Set a list of file extensions to exclude from the output.  <u>LIST</u> can have one or more entries that are
           separated by commas. Can be specified numerous times and will be merged, which is required when
           specifying them in the fstab because commas cannot be used to separate the extensions. The entries
           support shell wildcard patterns.

           Example: --hide_extensions=jpg,png,cue to stop covers and cue sheets from showing up.

           Defaults to: Show all files.

   <b>Audio</b> <b>Options</b>
       <b>--audiobitrate</b>=BITRATE, <b>-o</b> <b>audiobitrate</b>=BITRATE
           Select the audio encoding bitrate.

           Defaults to: <b>128</b> <b>kbit</b>

           <b>Acceptable</b> <b>values</b> <b>for</b> <u>BITRATE</u><b>:</b>

           <b>mp4:</b> 8, 16, 24, 32, 40, 48, 56, 64, 80, 96, 112, 128, 144, 160, 176, 192, 224, 256, 288, 320, 352,
           384, 416, and 448 kbps.

           <b>mp3:</b> For sampling frequencies of 32, 44.1, and 48 kHz, <u>BITRATE</u> can be among 32, 40, 48, 56, 64, 80,
           96, 112, 128, 160, 192, 224, 256, and 320 kbps.

           For sampling frequencies of 16, 22.05, and 24 kHz, <u>BITRATE</u> can be among 8, 16, 24, 32, 40, 48, 56,
           64, 80, 96, 112, 128, 144, and 160 kbps.

           When in doubt, it is recommended to choose a bitrate among 96, 112, 128, 160, 192, 224, 256, and 320
           kbps.

           <b>BITRATE</b>
               can be defined as...

               •   n bit/s: # or #bps

               •   n kbit/s: #K or #Kbps

               •   n Mbit/s: #M or #Mbps

       <b>--audiosamplerate</b>=SAMPLERATE, <b>-o</b> <b>audiosamplerate</b>=SAMPLERATE
           This limits the output sample rate to <u>SAMPLERATE</u>. If the source file sample rate is higher, it will
           be downsampled automatically.

           Typical values are 8000, 11025, 22050, 44100, 48000, 96000, and 192000.

           If the target codec does not support the selected sample rate, the next matching rate will be chosen
           (e.g. if 24K is selected but only 22.05 or 44.1 KHz is supported, 22.05 KHz will be set).

           Set to 0 to keep the source rate.

           Defaults to: <b>44.1</b> <b>kHz</b>

           <b>SAMPLERATE</b>
               can be defined as...

               •   In Hz: # or #Hz

               •   In kHz: #K or #KHz

       <b>--audiochannels</b>=CHANNELS, <b>-o</b> <b>audiochannels</b>=CHANNELS
           This limits the number of output channels to <u>CHANNELS</u>. If the source has more channels, the number
           will be reduced to this limit.

           Typical values are 1, 2 or 6 (e.g., 5.1) channels.

           If the target codec does not support the selected number of channels, transcoding may fail.

           Set to 0 to keep the number of channels.

           Defaults to: <b>2</b> <b>channels</b> <b>(stereo)</b>

       <b>--audiosamplefmt</b>=SAMPLEFMT, <b>-o</b> <b>audiosamplefmt</b>=SAMPLEFMT
           This sets a sample format.  <u>SAMPLEFMT</u> can be:

           0 to use the predefined setting; 8, 16, 32, 64 for integer format, F16, F32, F64 for floating point.

           Not all formats are supported by all destination types. Selecting an invalid format will be reported
           as a command line error and a list of values printed.
           ┌──────────────────┬─────────────────────────────────┐
           │ <b>Container</b> <b>Format</b> │ <b>Sample</b> <b>Format</b>                   │
           ├──────────────────┼─────────────────────────────────┤
           │ <b>AIFF</b>             │ 0, 16, 32                       │
           ├──────────────────┼─────────────────────────────────┤
           │ <b>ALAC</b>             │ 0, 16, 24                       │
           ├──────────────────┼─────────────────────────────────┤
           │ <b>WAV</b>              │ 0, 8, 16, 32, 64, F16, F32, F64 │
           ├──────────────────┼─────────────────────────────────┤
           │ <b>FLAC</b>             │ 0, 16, 24                       │
           └──────────────────┴─────────────────────────────────┘

           Defaults to: 0 (Use the same as the source or the predefined format of the destination if the source
           format is not possible.)

   <b>Video</b> <b>Options</b>
       <b>--videobitrate</b>=BITRATE, <b>-o</b> <b>videobitrate</b>=BITRATE
           This sets the video encoding bit rate. Setting this too high or too low may cause transcoding to
           fail.

           Defaults to: <b>2</b> <b>Mbit</b>

           <b>mp4:</b> May be specified as 500 to 25,000 kbps.

           <b>BITRATE</b>
               can be defined as...

               •   n bit/s: # or #bps

               •   n kbit/s: #K or #Kbps

               •   n Mbit/s: #M or #Mbps

       <b>--videoheight</b>=HEIGHT, -o <b>videoheight</b>=HEIGHT
           This sets the height of the transcoded video.

           When the video is rescaled, the aspect ratio is preserved if --width is not set at the same time.

           Defaults to: <b>keep</b> <b>source</b> <b>video</b> <b>height</b>

       <b>--videowidth</b>=WIDTH, -o <b>videowidth</b>=WIDTH
           This sets the width of the transcoded video.

           When the video is rescaled, the aspect ratio is preserved if --height is not set at the same time.

           Defaults to: <b>keep</b> <b>source</b> <b>video</b> <b>width</b>

       <b>--deinterlace</b>, -o <b>deinterlace</b>
           Deinterlace video if necessary while transcoding.

           This may need a higher bit rate, but this will increase picture quality when streaming via HTML5.

           Defaults to: "no deinterlace"

   <b>HLS</b> <b>Options</b>
       <b>--segment_duration</b>, -o <b>segment_duration</b>
           Set the duration of one video segment of the HLS stream. This argument is a floating point value,
           e.g., it can be set to 2.5 for 2500 milliseconds.

           Should normally be left as the default.

           <b>Note:</b> This applies to the HLS output format only, and is ignored for all other formats.

           Defaults to: <b>10</b> <b>seconds</b>

       <b>--min_seek_time_diff</b>, -o <b>min_seek_time_diff</b>
           If the requested HLS segment is less than min_seek_time seconds away, discard the seek request. The
           segment will be available very soon anyway, and that makes a re-transcode necessary. Set to 0 to
           disable.

           Should normally be left as the default.

           <b>Note:</b> This applies to the HLS output format only, and is ignored for all other formats.

           Defaults to: <b>30</b> <b>seconds</b>

   <b>Hardware</b> <b>Acceleration</b> <b>Options</b>
       <b>--hwaccel_enc</b>=API, <b>-o</b> <b>hwaccel_enc</b>=API
           Select the hardware acceleration API for encoding.

           Defaults to: <b>NONE</b> (no acceleration).

           <b>API</b>
               can be defined as...

               •   <b>NONE</b>: use software encoder

               •   <b>VAAPI</b>: Video Acceleration API (VA-API)

               •   <b>OMX</b>: OpenMAX (Open Media Acceleration)

       <b>--hwaccel_dec_blocked</b>=CODEC[:PROFILE[:PROFILE]], <b>-o</b> <b>hwaccel_dec_blocked</b>=CODEC:[:PROFILE[:PROFILE]]
           Block a codec and, optionally, a profile for hardware decoding. The option can be repeated to block
           several codecs.

           Defaults to: no codecs blocked.

           <b>CODEC</b>
               can be defined as...

               •   <b>H263</b>: H.263

               •   <b>H264</b>: H.264

               •   <b>HEVC</b>: H.265 / HEVC

               •   <b>MPEG2</b>: MPEG-2 video

               •   <b>MPEG4</b>: MPEG-4 video

               •   <b>VC1</b>: SMPTE VC-1

               •   <b>VP8</b>: Google VP9

               •   <b>VP9</b>: Google VP9

               •   <b>WMV3</b>: Windows Media Video 9

       <b>PROFILE</b>
           can optionally be added to block a certain profile from the codec only.

           Example: VP9:0 blocks Google VP profile 0.

           Example: H264:1:33 blocks H.264 profile 1 and 33.

       <b>--hwaccel_enc_device</b>=DEVICE, -o <b>hwaccel_enc_device</b>=DEVICE
           Select the hardware acceleration device. May be required for VAAPI, especially if more than one
           device is available.

           <b>Note:</b> This only applies to VAAPI hardware acceleration; all other types are ignored.

           Defaults to: <b>empty</b> (use default device).

           Example: <b>/dev/dri/renderD128</b>

       <b>--hwaccel_dec</b>=API, <b>-o</b> <b>hwaccel_dec</b>=API
           Select the hardware acceleration API for decoding.

           Defaults to: <b>NONE</b> (no acceleration)

           <b>API</b>
               can be defined as...

               •   <b>NONE</b>: use software decoder

               •   <b>VAAPI</b>: Video Acceleration API (VA-API)

               •   <b>MMAL</b>: Multimedia Abstraction Layer by Broadcom

       <b>--hwaccel_dec_device</b>=DEVICE, -o <b>hwaccel_dec_device</b>=DEVICE
           Select the hardware acceleration device. May be required for VAAPI, especially if more than one
           device is available.

           <b>Note:</b> This only applies to VAAPI hardware acceleration; all other types are ignored.

           Defaults to: <b>empty</b> (use default device)

           Example: <b>/dev/dri/renderD128</b>

   <b>Album</b> <b>Arts</b>
       --<b>noalbumarts</b>, -o <b>noalbumarts</b>
           Do not copy album art into the output file.

           This will reduce the file size and may be useful when streaming via HTML5 when album art is not used
           anyway.

           Defaults to: <b>add</b> <b>album</b> <b>arts</b>

   <b>Virtual</b> <b>Script</b>
       --<b>enablescript</b>, -o <b>enablescript</b>
           Add a virtual index.php to every directory. It reads scripts/videotag.php from the FFmpegfs binary
           directory.

           This can be very handy for testing video playback. Of course, feel free to replace videotag.php with
           your own script.

           Defaults to: <b>Do</b> <b>not</b> <b>generate</b> <b>script</b> <b>file</b>

       --<b>scriptfile</b>, -o <b>scriptfile</b>
           Set the name of the virtual script created in each directory.

           Defaults to: <b>index.php</b>

       --<b>scriptsource</b>, -o <b>scriptsource</b>
           Use a different source file.

           Defaults to: <b>scripts/videotag.php</b>

   <b>Cache</b> <b>Options</b>
       <b>--expiry_time</b>=TIME, <b>-o</b> <b>expiry_time</b>=TIME
           Cache entries expire after <u>TIME</u> and will be deleted to save disc space.

           Defaults to: <b>1</b> <b>week</b>

       <b>--max_inactive_suspend</b>=TIME, <b>-o</b> <b>max_inactive_suspend</b>=TIME
           While being accessed, the file is transcoded to the target format in the background. When the client
           quits, transcoding will continue until this time out. Transcoding is suspended until it is accessed
           again, then transcoding will continue.

           Defaults to: <b>15</b> <b>seconds</b>

       <b>--max_inactive_abort</b>=TIME, <b>-o</b> <b>max_inactive_abort</b>=TIME
           While being accessed, the file is transcoded in the background to the target format. When the client
           quits, transcoding will continue until this time out, then the transcoder thread quits.

           Defaults to: <b>30</b> <b>seconds</b>

       <b>--prebuffer_time</b>=TIME, <b>-o</b> <b>prebuffer_time</b>=TIME
           Files will be decoded until the buffer contains the specified playing time, allowing playback to
           start smoothly without lags. Both options must be met if prebuffer time and prebuffer size are
           specified.

           Set to 0 to disable pre-buffering.

           Defaults to: <b>no</b> <b>prebuffer</b> <b>time</b>

       <b>--prebuffer_size</b>=SIZE, <b>-o</b> <b>prebuffer_size</b>=SIZE
           Files will be decoded until the specified number of bytes is present in the buffer, allowing playback
           to start smoothly without lags. Both options must be met if prebuffer size and prebuffer time are
           specified.

           Set to 0 to disable pre-buffering.

           Defaults to: <b>100</b> <b>KB</b>

       <b>--max_cache_size</b>=SIZE, <b>-o</b> <b>max_cache_size</b>=SIZE
           Set the maximum diskspace used by the cache. If the cache grows beyond this limit when a file is
           transcoded, old entries will be deleted to keep the cache within the size limit.

           Defaults to: <b>unlimited</b>

       <b>--min_diskspace</b>=SIZE, <b>-o</b> <b>min_diskspace</b>=SIZE
           Set the required diskspace on the cachepath mount. If the remaining space falls below <u>SIZE</u> when a
           file is transcoded, old entries will be deleted to keep the diskspace within the limit.

           Defaults to: <b>0</b> <b>(no</b> <b>minimum</b> <b>space)</b>

       <b>--cachepath</b>=DIR, <b>-o</b> <b>cachepath</b>=DIR
           Sets the disc cache directory to <u>DIR</u>. If it does not already exist, it will be created. The user
           running FFmpegfs must have write access to the location.

           Defaults to: <b>${XDG_CACHE_HOME:-<a href="file:~/.cache">~/.cache</a>}/ffmpegfs</b> (as specified in the XDG Base Directory
           Specification). Falls back to ${HOME:-<a href="file:~/.cache">~/.cache</a>}/ffmpegfs if not defined. If executed with root
           privileges, "/var/cache/ffmpegfs" will be used.

       <b>--disable_cache</b>, -o <b>disable_cache</b>
           Disable the cache functionality completely.

           Defaults to: <b>enabled</b>

       <b>--cache_maintenance</b>=TIME, <b>-o</b> <b>cache_maintenance</b>=TIME
           Starts cache maintenance in <u>TIME</u> intervals. This will enforce the expery_time, max_cache_size and
           min_diskspace settings. Do not set it too low as this can slow down transcoding.

           Only one FFmpegfs process will do the maintenance by becoming the master. If that process exits,
           another will take over, so that one will always do the maintenance.

           Defaults to: <b>1</b> <b>hour</b>

       <b>--prune_cache</b>
           Prune the cache immediately according to the above settings at application start up.

           Defaults to: <b>Do</b> <b>not</b> <b>prune</b> <b>cache</b>

       <b>--clear_cache</b>, <b>-o</b> <b>clear_cache</b>
           On startup, clear the cache. All previously transcoded files will be deleted.

           <b>TIME</b>
               can be defined as...

               •   Seconds: #

               •   Minutes: #m

               •   Hours: #h

               •   Days: #d

               •   Weeks: #w

           <b>SIZE</b>
               can be defined as...

               •   In bytes: # or #B

               •   In KBytes: #K or #KB

               •   In MBytes: #M or #MB

               •   In GBytes: #G or #GB

               •   In TBytes: #T or #TB

   <b>Other</b>
       <b>--max_threads</b>=COUNT, <b>-o</b> <b>max_threads</b>=COUNT
           Limit concurrent transcoder threads. Set to 0 for unlimited threads. Recommended values are up to 16
           times the number of CPU cores. Should be left as the default.

           Defaults to: <b>16</b> <b>times</b> <b>number</b> <b>of</b> <b>detected</b> <b>cpu</b> <b>cores</b>

       <b>--decoding_errors</b>, <b>-o</b> <b>decoding_errors</b>
           Decoding errors are normally ignored, leaving bloopers and hiccups in encoded audio or video but
           still creating a valid file. When this option is set, transcoding will stop with an error.

           Defaults to: <b>Ignore</b> <b>errors</b>

       <b>--min_dvd_chapter_duration</b>=SECONDS, <b>-o</b> <b>min_dvd_chapter_duration</b>=SECONDS
           This ignores DVD chapters shorter than SECONDS. To disable, set to 0. This avoids transcoding errors
           for DVD chapters too short to detect its streams.

           Defaults to: <b>1</b> <b>second</b>

       <b>--win_smb_fix</b>, <b>-o</b> <b>win_smb_fix</b>
           Windows seems to access the files on Samba drives starting at the last 64K segment when the file is
           opened. Setting --win_smb_fix=1 will ignore these attempts (not decode the file up to this point).

           Defaults to: <b>on</b>

   <b>Logging</b>
       <b>--log_maxlevel</b>=LEVEL, <b>-o</b> <b>log_maxlevel</b>=LEVEL
           Maximum level of messages to log, either ERROR, WARNING, INFO, DEBUG or TRACE. Defaults to INFO and
           is always set to DEBUG in debug mode.

           Note that the other log flags must also be set to enable logging.

       <b>--log_stderr</b>, <b>-o</b> <b>log_stderr</b>
           Enable outputting logging messages to stderr. Automatically enabled in debug mode.

       <b>--log_syslog</b>, <b>-o</b> <b>log_syslog</b>
           Enable outputting logging messages to syslog.

       <b>--logfile</b>=FILE, <b>-o</b> <b>logfile</b>=FILE
           File to output log messages to. By default, no file will be written.

   <b>General/FUSE</b> <b>options</b>
       <b>-d</b>, <b>-o</b> <b>debug</b>
           Enable debug output. This will result in a large quantity of diagnostic information being printed to
           stderr as the programme runs. It implies <b>-f</b>.

       <b>-f</b>
           Run in the foreground instead of detaching from the terminal.

       <b>-h</b>, <b>--help</b>
           Print usage information.

       <b>-V</b>, <b>--version</b>
           Output version information.

       <b>-c</b>, <b>--capabilities</b>
           Output FFmpeg capabilities: a list of the system’s available codecs.

       <b>-s</b>
           Force single-threaded operation.

</pre><h4><b>USAGE</b></h4><pre>
       Mount your file system as follows:

           ffmpegfs [--audiobitrate bitrate] [--videobitrate bitrate] musicdir mountpoint [-o fuse_options]

       To use FFmpegfs as a daemon and encode to MPEG-4, for instance:

           ffmpegfs --audiobitrate=256K --videobitrate=1.5M /mnt/music /mnt/ffmpegfs -o allow_other,ro,desttype=mp4

       This will run FFmpegfs in the foreground and print the log output to the screen:

           ffmpegfs -f --log_stderr --audiobitrate=256K --videobitrate=1.5M --audiobitrate=256K --videobitrate=1.5M /mnt/music /mnt/ffmpegfs -o allow_other,ro,desttype=mp4

       With the following entry in "<a href="file:/etc/fstab">/etc/fstab</a>," the same result can be obtained with more recent versions of
       FUSE:

           ffmpegfs#/mnt/music /mnt/ffmpegfs fuse allow_other,ro,audiobitrate=256K,videobitrate=2000000,desttype=mp4 0 0

       Another (more current) way to express this command:

           /mnt/music /mnt/ffmpegfs fuse.ffmpegfs allow_other,ro,audiobitrate=256K,videobitrate=2000000,desttype=mp4 0 0

       At this point, files like /mnt/music/**.flac and /mnt/music/**.ogg will show up as /mnt/ffmpegfs/**.mp4.

       Audio bitrates will be reduced to 256 KBit, video to 1.5 MBit. The source bitrate will not be scaled up
       if it is lower; it will remain at the lower value.

       Keep in mind that only root can, by default, utilise the "allow other" option. Either use the "user allow
       other" key in <a href="file:/etc/fuse.conf">/etc/fuse.conf</a> or run FFmpegfs as root.

       Any user must have "allow other" enabled in order to access the mount. By default, only the user who
       initiated FFmpegfs has access to this.

       Examples:

           ffmpegfs -f $HOME/test/in $HOME/test/out --log_stderr --log_maxlevel=DEBUG -o allow_other,ro,desttype=mp4,cachepath=$HOME/test/cache

       Transcode files using FFmpegfs from test/in to test/out while logging to stderr at a noisy TRACE level.
       The cache resides in test/cache. All directories are under the current user’s home directory.

           ffmpegfs -f $HOME/test/in $HOME/test/out --log_stderr --log_maxlevel=DEBUG -o allow_other,ro,desttype=mp4,cachepath=$HOME/test/cache,videowidth=640

       Similar to the previous, but with a 640-pixel maximum video width. The aspect ratio will be maintained
       when scaling down larger videos. Videos that are smaller won’t be scaled up.

           ffmpegfs -f $HOME/test/in $HOME/test/out --log_stderr --log_maxlevel=DEBUG -o allow_other,ro,desttype=mp4,cachepath=$HOME/test/cache,deinterlace

       Deinterlacing can be enabled for better image quality.

</pre><h4><b>HOW</b> <b>IT</b> <b>WORKS</b></h4><pre>
       The decoder and encoder are initialised when a file is opened, and the file’s metadata is also read. At
       this point, a rough estimate of the total file size can be made. Because the actual size greatly depends
       on the material encoded, this technique works fair-to-good for MP4 or WebM output files but works well
       for MP3, AIFF, or WAV output files.

       The file is transcoded as it is being read and stored in a private per-file buffer. This buffer keeps
       expanding as the file is read until the entire file has been transcoded. After being decoded, the file is
       stored in a disc buffer and is readily accessible.

       Other processes will share the same transcoded data if they access the same file because transcoding is
       done in a single additional thread, which saves CPU time. Transcoding will continue for a while if all
       processes close the file before it is finished. Transcoding will resume if the file is viewed once more
       before the timer expires. If not, it will halt and delete the current chunk to free up storage space.

       A file will be transcoded up to the seek point when you seek within it (if not already done). Since the
       majority of programmes will read a file from beginning to end, this is typically not a problem. Future
       upgrades might offer actual random seeking (but if this is feasible, it is not yet clear due to
       restrictions to positioning inside compressed streams). When HLS streaming is chosen, this already
       functions. The requested segment is immediately skipped to by FFmpegfs.

       <b>MP3:</b> The source file’s comments are used to generate ID3 version 2.4 and 1.1 tags. They are
       correspondingly at the beginning and the end of the file.

       <b>MP4:</b> The same is true for meta atoms contained in MP4 containers.

       <b>WAV</b>: The estimated size of the WAV file will be included in a pro forma WAV header. When the file is
       complete, this header will be changed. Though most current gamers apparently disregard this information
       and continue to play the file, it does not seem required.

       Only for MP3 targets: A particular optimization has been done so that programmes that look for id3v1 tags
       don’t have to wait for the entire file to be transcoded before reading the tag. This accelerates these
       apps <b>dramatically</b>.

</pre><h4><b>ABOUT</b> <b>OUTPUT</b> <b>FORMATS</b></h4><pre>
       A few remarks regarding the output formats that are supported:

       Since these are plain vanilla constant bitrate (CBR) MP3 files, there isn’t much to say about the MP3
       output. Any modern player should be able to play them well.

       However, MP4 files are unique because standard MP4s aren’t really ideal for live broadcasting. The start
       block of an MP4 has a field with the size of the compressed data section, which is the cause. It suffices
       to say that until the size is known, compression must be finished, a file seek must be performed to the
       beginning, and the size atom updated.

       That size is unknown for a live stream that is ongoing. To obtain that value for our transcoded files,
       one would need to wait for the entire file to be recoded. As if that weren’t enough, the file’s final
       section contains some crucial details, such as meta tags for the artist, album, etc. Additionally, the
       fact that there is just one enormous data block makes it difficult to do random searches among the
       contents without access to the entire data section.

       Many programmes will then read the crucial information from the end of an MP4 before returning to the
       file’s head and beginning playback. This will destroy FFmpegfs' entire transcode-on-demand concept.

       Several extensions have been created to work around the restriction, including "faststart," which moves
       the aforementioned meta data from the end to the beginning of the MP4 file. Additionally, it is possible
       to omit the size field (0). An further plugin is isml (smooth live streaming).

       Older versions of FFmpeg do not support several new MP4 features that are required for direct-to-stream
       transcoding, like ISMV, faststart, separate moof/empty moov, to mention a few (or if available, not
       working properly).

       Faststart files are produced by default with an empty size field so that the file can be started to be
       written out at once rather than having to be encoded as a complete first. It would take some time before
       playback could begin if it were fully encoded. The data part is divided into chunks of about 1 second
       each, all with their own header, so it is possible to fill in the size fields early enough.

       One disadvantage is that not all players agree with the format, or they play it with odd side effects.
       VLC only refreshes the time display every several seconds while playing the file. There may not always be
       a complete duration displayed while streaming using HTML5 video tags, but that is fine as long as the
       content plays. Playback can only move backwards from the current playback position.

       However, that is the cost of commencing playback quickly.

</pre><h4><b>DEVELOPMENT</b></h4><pre>
       Git is the revision control system used by FFmpegfs. The complete repository is available here:

       git clone https://github.com/nschlia/ffmpegfs.git

       or the mirror:

       git clone https://salsa.debian.org/nschlia/ffmpegfs.git

       FFmpegfs is composed primarily of C++17 with a small amount of C. The following libraries are utilised:

       •   FUSE

       FFmpeg home pages:

       •   FFmpeg

</pre><h4><b>FILES</b></h4><pre>
       <b>/usr/local/bin/ffmpegfs</b>, <b><a href="file:/etc/fstab">/etc/fstab</a></b>

</pre><h4><b>AUTHORS</b></h4><pre>
       This fork with FFmpeg support has been maintained by Norbert Schlia since 2017 to date.

       Based on work by K. Henriksson (from 2008 to 2017) and the original author, David Collett (from 2006 to
       2008).

       Much thanks to them for the original work and giving me a good head start!

</pre><h4><b>LICENSE</b></h4><pre>
       This program can be distributed under the terms of the GNU GPL version 3 or later. It can be found online
       or in the COPYING file.

       This file and other documentation files can be distributed under the terms of the GNU Free Documentation
       License 1.3 or later. It can be found online or in the COPYING.DOC file.

</pre><h4><b>FFMPEG</b> <b>LICENSE</b></h4><pre>
       FFmpeg is licensed under the GNU Lesser General Public License (LGPL) version 2.1 or later. However,
       FFmpeg incorporates several optional parts and optimizations that are covered by the GNU General Public
       License (GPL) version 2 or later. If those parts get used the GPL applies to all of FFmpeg.

       See https://www.ffmpeg.org/legal.html for details.

</pre><h4><b>COPYRIGHT</b></h4><pre>
       This fork with FFmpeg support copyright (C) 2017-2024 Norbert Schlia.

       Based on work copyright (C) 2006-2008 David Collett, 2008-2013 K. Henriksson.

       Much thanks to them for the original work!

       This is free software: you are free to change and redistribute it under the terms of the GNU General
       Public License (GPL) version 3 or later.

       This manual is copyright (C) 2010-2011 K. Henriksson and (C) 2017-2024 by N. Schlia and may be
       distributed under the GNU Free Documentation License (GFDL) 1.3 or later with no invariant sections, or
       alternatively under the GNU General Public License (GPL) version 3 or later.

ffmpegfs 2.17                                     November 2024                                      <u><a href="../man1/FFMPEGFS.1.html">FFMPEGFS</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>