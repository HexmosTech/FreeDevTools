<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>samtools-reference - extracts an embedded reference from a CRAM file</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/samtools">samtools_1.21-1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       samtools-reference - extracts an embedded reference from a CRAM file

</pre><h4><b>SYNOPSIS</b></h4><pre>
       samtools reference [<b>-q</b>] [<b>-r</b> <u>region</u>] [<b>-o</b> <u>out.fa</u>] <u>in.cram</u>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       Creates  the reference from aligned data using either the MD:Z auxiliary tags or an embedded reference in
       a CRAM file.  The output is a FASTA file.

       For the embedded reference mode (<b>-e</b>) this operation is fast, but  only  works  on  CRAMs  produced  using
       <b>--output-fmt-option</b> <b>embed_ref=1</b>.  Note this may not be the complete reference used.  Each CRAM slice will
       hold the entire reference that spans the slice coordinates, but gaps in coverage can lead to gaps between
       slices.   However  this  reference  should  be  suitable for passing into a CRAM decode (<b>samtools</b> <b>view</b> <b>-T</b>
       <b>ref.fa</b>).

       For SAM/BAM files or CRAMs without  reference,  using  the  MD:Z  tag  may  also  produce  an  incomplete
       reference.   Unlike  embedded reference, this reference may not be sufficient for decoding a CRAM file as
       the CRAM slice headers store the MD5sum of the portion of reference than spans that slice, but the  slice
       may  not have 100% coverage leading to Ns in the computed reference.  However it should still be possible
       to decode such CRAMs  by  ignoring  the  md5  mismatches  using  e.g.  <b>samtools</b>  <b>view</b>  <b>--input-fmt-option</b>
       <b>ignore_md5=1</b>.

</pre><h4><b>OPTIONS</b></h4><pre>
       <b>-e</b>      Enable CRAM embedded reference mode.

       <b>-q</b>      Enables  quiet  mode  and  will  produce no output.  By default a line per reference is reporting
               describing the percentage with non-N bases.

       <b>-r</b> <u>region</u>
               Specifies a single region to produce the reference from.  If specified, an  index  file  must  be
               present.

       <b>-o</b> <u>FILE</u> Write the FASTA records to <u>FILE</u>.  By default this is sent to stdout.

       <b>-@</b> <u>INT</u>  The number of BAM/CRAM decompression threads to use in addition to the main thread [0].

               Note  this does not multi-thread the main reference generation steps, so scaling may be capped by
               2 or 3 threads, depending on the data.  It will also not affect the <b>-e</b> option for  CRAM  embedded
               reference, although this is already the fastest method.

</pre><h4><b>AUTHOR</b></h4><pre>
       Written by James Bonfield from the Sanger Institute.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <u><a href="../man1/samtools.1.html">samtools</a></u>(1)

       Samtools website: &lt;<a href="http://www.htslib.org/">http://www.htslib.org/</a>&gt;

samtools-1.21                                   12 September 2024                          <u><a href="../man1/samtools-reference.1.html">samtools-reference</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>