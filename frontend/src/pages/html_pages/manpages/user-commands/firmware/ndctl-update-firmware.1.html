<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ndctl-update-firmware - update the firmware the given device</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/ndctl">ndctl_77-2.2ubuntu2_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       ndctl-update-firmware - update the firmware the given device

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <u>ndctl</u> <u>update-firmware</u> &lt;dimm&gt; [&lt;options&gt;]

</pre><h4><b>DESCRIPTION</b></h4><pre>
       Provide a generic interface for updating NVDIMM firmware. The use of this depends on support for the
       NVDIMM "family" in libndctl, the kernel needs to enable that command set, and the device itself needs to
       implement the command. Use "ndctl list -DF" to interrogate if firmware update is enabled. For example:

       ndctl list -DFu -d nmem1
       {
         "dev":"nmem1",
         "id":"cdab-0a-07e0-ffffffff",
         "handle":"0",
         "phys_id":"0",
         "security":"disabled",
         "firmware":{
           "current_version":"0",
           "can_update":true
         }
       }

</pre><h4><b>OPTIONS</b></h4><pre>
       &lt;dimm&gt;
           A <u>nmemX</u> device name, or a dimm id number. Restrict the operation to the specified dimm(s). The
           keyword <u>all</u> can be specified to indicate the lack of any restriction, however this is the same as not
           supplying a --dimm option at all.

       -b, --bus=
           A bus id number, or a provider string (e.g. "ACPI.NFIT"). Restrict the operation to the specified
           bus(es). The keyword <u>all</u> can be specified to indicate the lack of any restriction, however this is
           the same as not supplying a --bus option at all.

       -f, --firmware
           firmware file used to perform the update

       -i, --force
           Ignore in-progress Address Range Scrub and try to submit the firmware update, or ignore firmware
           activate arm overflows and force-arm devices.

       -A, --arm
           Arm a device for firmware activation. This is enabled by default when a firmware image is specified.
           Specify --no-arm to disable this default. Otherwise, without a firmware image, this option can be
           used to manually arm a device for firmware activate. When a device transitions from unarmed to armed
           the platform recalculates the firmware activation time and compares it against the maximum platform
           supported time. If the activation time would exceed the platform maximum the arm attempt is aborted:

       ndctl update-firmware --arm --bus=nfit_test.0 all
         Error: update firmware: nmem4: arm aborted, tripped overflow
       [
         {
           "dev":"nmem1",
           "id":"cdab-0a-07e0-ffffffff",
           "handle":"0",
           "phys_id":"0",
           "security":"disabled",
           "firmware":{
             "current_version":"0",
             "can_update":true
           }
         },
         {
           "dev":"nmem3",
           "id":"cdab-0a-07e0-fffeffff",
           "handle":"0x100",
           "phys_id":"0x2",
           "security":"disabled",
           "firmware":{
             "current_version":"0",
             "can_update":true
           }
         },
         {
           "dev":"nmem2",
           "id":"cdab-0a-07e0-feffffff",
           "handle":"0x1",
           "phys_id":"0x1",
           "security":"disabled",
           "firmware":{
             "current_version":"0",
             "can_update":true
           }
         }
       ]
       updated 3 nmems.

           It is possible, but not recommended, to ignore timeout overflows
           with the --force option. At any point to view the 'armed' state of the
           bus do:

       ndctl list -BF -b nfit_test.0
       [
         {
           "provider":"nfit_test.0",
           "dev":"ndbus2",
           "scrub_state":"idle",
           "firmware":{
             "activate_method":"suspend",
             "activate_state":"overflow"
           }
         }
       ]

       -D, --disarm
           Disarm devices after uploading the firmware file, or manually disarm devices when a firmware image is
           not specified. --no-disarm is not accepted.

       -v, --verbose
           Emit debug messages for the namespace check process.

</pre><h4><b>COPYRIGHT</b></h4><pre>
       Copyright Â© 2016 - 2022, Intel Corporation. License GPLv2: GNU GPL version 2
       <a href="http://gnu.org/licenses/gpl.html">http://gnu.org/licenses/gpl.html</a>. This is free software: you are free to change and redistribute it.
       There is NO WARRANTY, to the extent permitted by law.

ndctl                                              2024-11-01                           <u><a href="../man1/NDCTL-UPDATE-FIRMWARE.1.html">NDCTL-UPDATE-FIRMWARE</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>