<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>p2v-building - How to build virt-p2v from source</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/virt-p2v">virt-p2v_1.42.4-1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       p2v-building - How to build virt-p2v from source

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This manual page describes how to build virt-p2v from source.

       The main steps are:

       •   Install the requirements.

       •   Build, either from the git repository or from a tarball.

       •   Run the tests.

       •   Run the tools from the source directory, or install.

</pre><h4><b>REQUIREMENTS</b></h4><pre>
   <b>Full</b> <b>list</b> <b>of</b> <b>requirements</b>
       qemu-img ≥ 2.2.0
           <u>Required</u>.

       Gcc or Clang
           <u>Required</u>.  We use "__attribute__((cleanup))" which is a GCC extension also supported by Clang.

       Perl
           <u>Required</u>.  Various build steps and tests are written in Perl.  Perl is not needed at runtime.

       Perl "Pod::Man"
       Perl "Pod::Simple"
           <u>Required</u>.  Part of Perl core.

       autoconf
       automake
           <u>Required</u> if compiling from git.  Optional if compiling from tarball.

       Perl-compatible Regular Expressions (PCRE2) library
           <u>Required</u>.

       libxml2
           <u>Required</u>.

       xz  <u>Required</u>.

       nbdkit
           Optional.

           <b><a href="../man1/virt-p2v.1.html">virt-p2v</a></b>(1) requires nbdkit, but it only needs to be present on the virt-p2v ISO, it does not need to
           be installed at compile time.

       Glib ≥ 2.56
           <u>Required</u>.

       Gtk ≥ 3.22
           <u>Required</u>.

       D-Bus
           Optional.

           If  the  D-Bus  low  level C API is available, virt-p2v can send a D-Bus message to logind to inhibit
           power saving (sleep, suspend, etc) during P2V conversions.

           If this API is not available at build time, then very long conversions might be  interrupted  if  the
           physical machine goes to sleep.

       valgrind
           Optional.  For testing memory problems.

       bash-completion
           Optional.  For tab-completion of commands in bash.

</pre><h4><b>BUILDING</b> <b>FROM</b> <b>GIT</b></h4><pre>
       You will need to install additional dependencies "autoconf", and "automake" when building from git.

        git clone https://github.com/libguestfs/virt-p2v
        cd virt-p2v
        autoreconf -i
        ./configure
        make

</pre><h4><b>BUILDING</b> <b>FROM</b> <b>TARBALLS</b></h4><pre>
       Tarballs  are downloaded from <a href="http://download.libguestfs.org/">http://download.libguestfs.org/</a>.  Stable tarballs are signed with the GnuPG
       key for "<a href="mailto:rich@annexia.org">rich@annexia.org</a>", see https://pgp.mit.edu/pks/lookup?op=vindex&amp;search=0x91738F73E1B768A0.   The
       fingerprint is "F777 4FB1 AD07 4A7E 8C87 67EA 9173 8F73 E1B7 68A0".

       Download and unpack the tarball.

        cd virt-p2v-1.xx.yy
        ./configure
        make

</pre><h4><b>RUNNING</b> <b>THE</b> <b>TESTS</b></h4><pre>
       <b>DO</b>  <b>NOT</b>  <b>run</b> <b>the</b> <b>tests</b> <b>as</b> <b>root!</b>  Virt-p2v can be built and tested as non-root.  Running the tests as root
       could even be dangerous, don't do it.

       To run the tests, do:

        make check

       There are many more tests you can run.  See <b><a href="../man1/p2v-hacking.1.html">p2v-hacking</a></b>(1) for details.

</pre><h4><b>INSTALLING</b></h4><pre>
       <b>DO</b> <b>NOT</b> <b>use</b> <b>"make</b> <b>install"!</b>  You'll end up with conflicting  versions  of  virt-p2v  installed,  and  this
       causes constant headaches for users.  See the next section for how to use the <u>.<a href="file:/run">/run</a></u> script instead.

       Distro packagers can use:

        make DESTDIR=[temp-build-dir] install

</pre><h4><b>THE</b> <b>.<a href="file:/run">/run</a></b> <b>SCRIPT</b></h4><pre>
       You can test <b><a href="../man1/virt-p2v.1.html">virt-p2v</a></b>(1) and the other tools without needing to install them by using the <u>.<a href="file:/run">/run</a></u> script in
       the top directory.  This script works by setting several environment variables.

       For example:

        .<a href="file:/run">/run</a> virt-p2v-make-disk [usual virt-p2v-make-disk args ...]

       The  <u>.<a href="file:/run">/run</a></u>  script  adds  every virt-p2v binary to the $PATH, so the above example run virt-p2v-make-disk
       from the build directory (not the globally installed virt-p2v-make-disk if there is one).

</pre><h4><b>SELECTED</b> <b>./configure</b> <b>SETTINGS</b></h4><pre>
       There are many "./configure" options.  Use:

        ./configure --help

       to list them all.  This section covers some of the more important ones.

       <b>--enable-werror</b>
           This turns compiler warnings into errors (ie. "-Werror").  Use this for development, especially  when
           submitting patches.  It should generally <u>not</u> be used for production or distro builds.

       <b>--with-extra="</b><u>distroname</u>=<u>version</u>,...<b>"</b>
       <b>--with-extra="local"</b>
           This option appends a text to the version of the virt-p2v tools.  It is a free text field, but a good
           idea  is  to encode a comma-separated list of facts such as the distro name and version, and anything
           else that may help with debugging problems raised by users.

           For custom and/or local builds, this can be set to "local" to indicate this is <u>not</u> a distro build.

</pre><h4><b>USING</b> <b>CLANG</b> <b>(LLVM)</b> <b>INSTEAD</b> <b>OF</b> <b>GCC</b></h4><pre>
        export CC=clang
        ./configure
        make

</pre><h4><b>BUILDING</b> <b>i686</b> <b>32</b> <b>BIT</b> <b>VIRT-P2V</b></h4><pre>
       <u>(This</u> <u>section</u> <u>only</u> <u>applies</u> <u>on</u> <u>the</u> <u>x86-64</u> <u>architecture.)</u>

       Building  a  32  bit  virt-p2v  (i686)  binary  improves  compatibility   with   older   hardware.    See
       <b><a href="../man1/virt-p2v-make-disk.1.html">virt-p2v-make-disk</a></b>(1)  for  details.  Although virt-p2v is a simple Gtk application, it is not especially
       easy to build just virt-p2v as a 32 bit application on a 64 bit host.  Usually the simplest way is to use
       a 32 bit chroot or even a 32 bit virtual machine to build virt-p2v.

       On Fedora you can use the <b><a href="../man1/mock.1.html">mock</a></b>(1) tool.  For example:

        fedpkg mockbuild --root fedora-23-i386

       This will result in a <u>virt-v2v-*.i686.rpm</u> file which can be unpacked  to  extract  the  32  bit  virt-p2v
       binary.

       The  binary  may  be  compressed  to  either  <u>virt-p2v.i686.xz</u>,  or  <u>$libdir/virt-p2v/virt-p2v.i686.xz</u> or
       <u>$VIRT_P2V_DATA_DIR/virt-p2v.i686.xz</u>  as  appropriate.   This  enables  the  <b><a href="../man1/virt-p2v-make-disk.1.html">virt-p2v-make-disk</a></b>(1)  <u>--arch</u>
       option.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man1/p2v-hacking.1.html">p2v-hacking</a></b>(1), <b><a href="../man1/p2v-release-notes.1.html">p2v-release-notes</a></b>(1), <a href="http://libguestfs.org/">http://libguestfs.org/</a>.

</pre><h4><b>AUTHORS</b></h4><pre>
       Richard W.M. Jones ("rjones at redhat dot com")

</pre><h4><b>COPYRIGHT</b></h4><pre>
       Copyright (C) 2009-2019 Red Hat Inc.

</pre><h4><b>LICENSE</b></h4><pre>
       This library is free software; you can redistribute it and/or modify it under the terms of the GNU Lesser
       General  Public License as published by the Free Software Foundation; either version 2 of the License, or
       (at your option) any later version.

       This library is distributed in the hope that it will be useful, but WITHOUT ANY  WARRANTY;  without  even
       the  implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU Lesser General
       Public License for more details.

       You should have received a copy of the GNU Lesser General Public License along  with  this  program.   If
       not, see &lt;https://www.gnu.org/licenses/&gt;.

</pre><h4><b>BUGS</b></h4><pre>
       To   get   a   list   of   bugs   against   libguestfs   (which   include   virt-p2v),   use  this  link:
       https://bugzilla.redhat.com/buglist.cgi?component=libguestfs&amp;product=Virtualization+Tools

       To      report      a      new       bug       against       libguestfs,       use       this       link:
       https://bugzilla.redhat.com/enter_bug.cgi?component=libguestfs&amp;product=Virtualization+Tools

       When reporting a bug, please supply:

       •   The version of virt-p2v.

       •   Where you got virt-p2v (eg. which Linux distro, compiled from source, etc)

       •   Describe the bug accurately and give a way to reproduce it.

virt-p2v-1.42.4                                    2024-11-30                                    <u><a href="../man1/p2v-building.1.html">p2v-building</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>