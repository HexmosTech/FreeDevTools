<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>hardlink - link multiple copies of a file</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/util-linux">util-linux_2.40.2-14ubuntu1.1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       hardlink - link multiple copies of a file

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>hardlink</b> [options] [<u>directory</u>|<u>file</u>]...

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>hardlink</b> is a tool that replaces copies of a file with either hardlinks or copy-on-write clones, thus
       saving space.

       <b>hardlink</b> first creates a binary tree of file sizes and then compares the content of files that have the
       same size. There are two basic content comparison methods. The <b>memcmp</b> method directly reads data blocks
       from files and compares them. The other method is based on checksums (like SHA256); in this case for each
       data block a checksum is calculated by the Linux kernel crypto API, and this checksum is stored in
       userspace and used for file comparisons.

       For each file also an "intro" buffer (32 bytes) is cached. This buffer is used independently from the
       comparison method and requested cache-size and io-size. The "intro" buffer dramatically reduces
       operations with data content as files are very often different from the beginning.

</pre><h4><b>OPTIONS</b></h4><pre>
       <b>-h</b>, <b>--help</b>
           Display help text and exit.

       <b>-V</b>, <b>--version</b>
           Print version and exit.

       <b>-c</b>, <b>--content</b>
           Consider only file content, not attributes, when determining whether two files are equal. Same as
           <b>-pot</b>.

       <b>-b</b>, <b>--io-size</b> <u>size</u>
           The size of the <b><a href="../man2/read.2.html">read</a></b>(2) or <b><a href="../man2/sendfile.2.html">sendfile</a></b>(2) buffer used when comparing file contents. The <u>size</u> argument
           may be followed by the multiplicative suffixes KiB, MiB, etc. The "iB" is optional, e.g., "K" has the
           same meaning as "KiB". The default is 8KiB for memcmp method and 1MiB for the other methods. The only
           memcmp method uses process memory for the buffer, other methods use zero-copy way and I/O operation
           is done in the kernel. The size may be altered on the fly to fit a number of cached content
           checksums.

       <b>-d</b>, <b>--respect-dir</b>
           Only try to link files with the same directory name. The top-level directory (as specified on the
           <b>hardlink</b> command line) is ignored. For example, <b>hardlink</b> <b>--respect-dir</b> <b>/foo</b> <b>/bar</b> will link
           <u>/foo/some/file</u> with <u>/bar/some/file</u>, but not <u>/bar/other/file</u>. If combined with <b>--respect-name</b>, then
           entire paths (except the top-level directory) are compared.

       <b>-f</b>, <b>--respect-name</b>
           Only try to link files with the same (base)name. It’s strongly recommended to use long options rather
           than <b>-f</b> which is interpreted in a different way by other <b>hardlink</b> implementations.

       <b>-i</b>, <b>--include</b> <u>regex</u>
           A regular expression to include files. If the option <b>--exclude</b> has been given, this option
           re-includes files which would otherwise be excluded. If the option is used without <b>--exclude</b>, only
           files matched by the pattern are included.

       <b>-m</b>, <b>--maximize</b>
           Among equal files, keep the file with the highest link count.

       <b>-M</b>, <b>--minimize</b>
           Among equal files, keep the file with the lowest link count.

       <b>-n</b>, <b>--dry-run</b>
           Do not act, just print what would happen.

       <b>-o</b>, <b>--ignore-owner</b>
           Link and compare files even if their owner information (user and group) differs. Results may be
           unpredictable.

       <b>-O</b>, <b>--keep-oldest</b>
           Among equal files, keep the oldest file (least recent modification time). By default, the newest file
           is kept. If <b>--maximize</b> or <b>--minimize</b> is specified, the link count has a higher precedence than the
           time of modification.

       <b>-p</b>, <b>--ignore-mode</b>
           Link and compare files even if their mode is different. Results may be slightly unpredictable.

       <b>-q</b>, <b>--quiet</b>
           Quiet mode, don’t print anything.

       <b>-r</b>, <b>--cache-size</b> <u>size</u>
           The size of the cache for content checksums. All non-memcmp methods calculate checksum for each file
           content block (see <b>--io-size</b>), these checksums are cached for the next comparison. The size is
           important for large files or a large sets of files of the same size. The default is 10MiB.

       <b>-s</b>, <b>--minimum-size</b> <u>size</u>
           The minimum size to consider. By default this is 1, so empty files will not be linked. The <u>size</u>
           argument may be followed by the multiplicative suffixes KiB (=1024), MiB (=1024*1024), and so on for
           GiB, TiB, PiB, EiB, ZiB and YiB (the "iB" is optional, e.g., "K" has the same meaning as "KiB").

       <b>-S</b>, <b>--maximum-size</b> <u>size</u>
           The maximum size to consider. By default this is 0 and 0 has the special meaning of unlimited. The
           <u>size</u> argument may be followed by the multiplicative suffixes KiB (=1024), MiB (=1024*1024), and so on
           for GiB, TiB, PiB, EiB, ZiB and YiB (the "iB" is optional, e.g., "K" has the same meaning as "KiB").

       <b>-t</b>, <b>--ignore-time</b>
           Link and compare files even if their time of modification is different. This is usually a good
           choice.

       <b>-v</b>, <b>--verbose</b>
           Verbose output, explain to the user what is being done. If specified once, every hardlinked file is
           displayed. If specified twice, it also shows every comparison.

       <b>-x</b>, <b>--exclude</b> <u>regex</u>
           A regular expression which excludes files from being compared and linked.

       <b>-X</b>, <b>--respect-xattrs</b>
           Only try to link files with the same extended attributes.

       <b>-y</b>, <b>--method</b> <u>name</u>
           Set the file content comparison method. The currently supported methods are sha256, sha1, crc32c and
           memcmp. The default is sha256, or memcmp if Linux Crypto API is not available. The methods based on
           checksums are implemented in zero-copy way, in this case file contents are not copied to the
           userspace and all calculation is done in kernel.

       <b>--reflink</b>[=<u>when</u>]
           Create copy-on-write clones (aka reflinks) rather than hardlinks. The reflinked files share only
           on-disk data, but the file mode and owner can be different. It’s recommended to use it with
           <b>--ignore-owner</b> and <b>--ignore-mode</b> options. This option implies <b>--skip-reflinks</b> to ignore already
           cloned files.

           The optional argument <u>when</u> can be <b>never</b>, <b>always</b>, or <b>auto</b>. If the <u>when</u> argument is omitted, it
           defaults to <b>auto</b>, in this case, <b>hardlink</b> checks filesystem type and uses reflinks on BTRFS and XFS
           only, and fallback to hardlinks when creating reflink is impossible. The argument <b>always</b> disables
           filesystem type detection and fallback to hardlinks, in this case, only reflinks are allowed.

       <b>--skip-reflinks</b>
           Ignore already cloned files. This option may be used without <b>--reflink</b> when creating classic
           hardlinks.

</pre><h4><b>ARGUMENTS</b></h4><pre>
       <b>hardlink</b> takes one or more directories which will be searched for files to be linked.

</pre><h4><b>BUGS</b></h4><pre>
       The original <b>hardlink</b> implementation uses the option <b>-f</b> to force hardlinks creation between filesystem.
       This very rarely usable feature is no more supported by the current <b>hardlink</b>.

       <b>hardlink</b> assumes that the trees it operates on do not change during operation. If a tree does change, the
       result is undefined and potentially dangerous. For example, if a regular file is replaced by a device,
       <b>hardlink</b> may start reading from the device. If a component of a path is replaced by a symbolic link or
       file permissions change, security may be compromised. Do not run <b>hardlink</b> on a changing tree or on a tree
       controlled by another user.

</pre><h4><b>AUTHOR</b></h4><pre>
       There are multiple <b>hardlink</b> implementations. The very first implementation is from Jakub Jelinek for
       Fedora distribution, this implementation has been used in util-linux between versions v2.34 to v2.36. The
       current implementations is based on Debian version from Julian Andres Klode.

</pre><h4><b>REPORTING</b> <b>BUGS</b></h4><pre>
       For bug reports, use the issue tracker at https://github.com/util-linux/util-linux/issues.

</pre><h4><b>AVAILABILITY</b></h4><pre>
       The <b>hardlink</b> command is part of the util-linux package which can be downloaded from Linux Kernel Archive
       &lt;https://www.kernel.org/pub/linux/utils/util-linux/&gt;.

util-linux 2.40.2                                  2024-07-04                                        <u><a href="../man1/HARDLINK.1.html">HARDLINK</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>