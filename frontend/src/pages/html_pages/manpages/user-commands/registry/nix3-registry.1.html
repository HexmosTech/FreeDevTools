<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>nix registry - manage the flake registry</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/nix-bin">nix-bin_2.24.9+dfsg-2ubuntu2_amd64</a> <br><br><pre>
</pre><h4><b>Name</b></h4><pre>
       nix registry - manage the flake registry

</pre><h4><b>Synopsis</b></h4><pre>
       nix registry [<u>option</u>…] <u>subcommand</u>

       where <u>subcommand</u> is one of the following:

       •  nix registry add - add/replace flake in user flake registry
       •  nix registry list - list available Nix flakes
       •  nix registry pin - pin a flake to its current version or to the current version of a flake URL
       •  nix registry remove - remove flake from user flake registry

</pre><h4><b>Description</b></h4><pre>
       nix  registry  provides  subcommands  for  managing  <u>flake</u> <u>registries</u>. Flake registries are a convenience
       feature that allows you to refer to flakes using symbolic identifiers such as nixpkgs, rather  than  full
       URLs such as git://github.com/NixOS/nixpkgs. You can use these identifiers on the command line (e.g. when
       you  do  nix  run  nixpkgs#hello)  or  in  flake  input specifications in flake.nix files. The latter are
       automatically resolved to full URLs and recorded in the flake’s flake.lock file.

       In  addition,  the  flake  registry  allows  you   to   redirect   arbitrary   flake   references   (e.g.
       github:NixOS/patchelf) to another location, such as a local fork.

       There are multiple registries. These are, in order from lowest to highest precedence:

       •  The  global registry, which is a file downloaded from the URL specified by the setting flake-registry.
          It is cached locally and updated automatically when it’s older than tarball-ttl seconds.  The  default
          global registry is kept in a GitHub repository.

       •  The  system registry, which is shared by all users. The default location is /etc/nix/registry.json. On
          NixOS, the system registry can be specified using the NixOS option nix.registry.

       •  The user registry <a href="file:~/.config/nix/registry.json.">~/.config/nix/registry.json.</a> This registry can be modified by commands such  as  nix
          registry pin.

       •  Overrides specified on the command line using the option --override-flake.

</pre><h4><b>Registry</b> <b>format</b></h4><pre>
       A registry is a JSON file with the following format:

       {
         "version": 2,
         "flakes": [
           {
             "from": {
               "type": "indirect",
               "id": "nixpkgs"
             },
             "to": {
               "type": "github",
               "owner": "NixOS",
               "repo": "nixpkgs"
             }
           },
           ...
         ]
       }

       That  is,  it  contains  a  list  of  objects  with attributes from and to, both of which contain a flake
       reference in attribute representation.  (For  example,  {"type":  "indirect",  "id":  "nixpkgs"}  is  the
       attribute representation of nixpkgs, while {"type": "github", "owner": "NixOS", "repo": "nixpkgs"} is the
       attribute representation of github:NixOS/nixpkgs.)

       Given  some  flake reference <u>R</u>, a registry entry is used if its from flake reference <u>matches</u> <u>R</u>. <u>R</u> is then
       replaced by the <u>unification</u> of the to flake reference with <u>R</u>.

</pre><h4><b>Matching</b></h4><pre>
       The from flake reference in a registry entry <u>matches</u> some flake reference <u>R</u> if the attributes in from are
       the same as the attributes in R. For example:

       •  nixpkgs matches with nixpkgs.

       •  nixpkgs matches with nixpkgs/nixos-20.09.

       •  nixpkgs/nixos-20.09 does not match with nixpkgs.

       •  nixpkgs does not match with git://github.com/NixOS/patchelf.

</pre><h4><b>Unification</b></h4><pre>
       The to flake reference in a registry entry is <u>unified</u> with some  flake  reference  <u>R</u>  by  taking  to  and
       applying the rev and ref attributes from <u>R</u>, if specified. For example:

       •  github:NixOS/nixpkgs unified with nixpkgs produces github:NixOS/nixpkgs.

       •  github:NixOS/nixpkgs unified with nixpkgs/nixos-20.09 produces github:NixOS/nixpkgs/nixos-20.09.

       •  github:NixOS/nixpkgs/master          unified         with         nixpkgs/nixos-20.09         produces
          github:NixOS/nixpkgs/nixos-20.09.

</pre><h4><b>Options</b></h4><pre>
   <b>Logging-related</b> <b>options</b>
       •  --debug

          Set the logging verbosity level to ‘debug’.

       •  --log-format <u>format</u>

          Set the format of log output; one of raw, internal-json, bar or bar-with-logs.

       •  --print-build-logs / -L

          Print full build logs on standard error.

       •  --quiet

          Decrease the logging verbosity level.

       •  --verbose / -v

          Increase the logging verbosity level.

   <b>Miscellaneous</b> <b>global</b> <b>options</b>
       •  --help

          Show usage information.

       •  --offline

          Disable substituters and consider all previously downloaded files up-to-date.

       •  --option <u>name</u> <u>value</u>

          Set the Nix configuration setting <u>name</u> to <u>value</u> (overriding nix.conf).

       •  --refresh

          Consider all previously downloaded files out-of-date.

       •  --version

          Show version information.

          <b>Note</b>

          See man nix.conf for overriding configuration settings with command line flags.

                                                                                                <u><a href="../man1/nix3-registry.1.html">nix3-registry</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>