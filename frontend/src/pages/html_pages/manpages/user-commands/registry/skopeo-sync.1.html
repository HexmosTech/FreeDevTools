<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>skopeo-sync - Synchronize images between registry repositories and local directories.</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/skopeo">skopeo_1.13.3+ds1-2build2_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       skopeo-sync - Synchronize images between registry repositories and local directories.

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>skopeo</b> <b>sync</b> [<u>options</u>] --src <u>transport</u> --dest <u>transport</u> <u>source</u> <u>destination</u>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       Synchronize  images  between  registry repositories and local directories. Synchronization is achieved by
       copying all the images found at <u>source</u> to <u>destination</u> -  useful  when  synchronizing  a  local  container
       registry mirror or for populating registries running inside of air-gapped environments.

       Differently from other skopeo commands, skopeo sync requires both source and destination transports to be
       specified  separately  from  <u>source</u> and <u>destination</u>.  One of the problems of prefixing a destination with
       its transport is that, the registry <b>docker://hostname:port</b> would  be  wrongly  interpreted  as  an  image
       reference at a non-fully qualified registry, with <b>hostname</b> and <b>port</b> the image name and tag.

       Available <u>source</u> transports:
        -  <u>docker</u>  (i.e.  <b>--src</b>  <b>docker</b>):  <u>source</u>  is  a  repository  hosted  on  a  container  registry  (e.g.:
       <b>registry.example.com/busybox</b>).
        If no image tag is specified, skopeo sync copies all the tags found in that repository.
        - <u>dir</u> (i.e. <b>--src</b> <b>dir</b>): <u>source</u> is a  local  directory  path  (e.g.:  <b>/media/usb/</b>).  Refer  to  <a href="../man1/skopeo.1.html">skopeo</a>(1)
       <b>dir:</b><u>path</u> for the local image format.
        - <u>yaml</u> (i.e. <b>--src</b> <b>yaml</b>): <u>source</u> is local YAML file path.
        The  YAML  file  should  specify  the  list  of images copied from different container registries (local
       directories are not supported). Refer to EXAMPLES for the file format.

       Available <u>destination</u> transports:
        - <u>docker</u> (i.e. <b>--dest</b> <b>docker</b>): <u>destination</u> is a container registry (e.g.: <b>my-registry.local.lan</b>).
        - <u>dir</u> (i.e. <b>--dest</b> <b>dir</b>): <u>destination</u> is a local directory path (e.g.: <b>/media/usb/</b>).
        One directory per source 'image:tag' is created for each copied image.

       When the <b>--scoped</b> option is specified, images are prefixed with the source image path  so  that  multiple
       images with the same name can be stored at <u>destination</u>.

</pre><h4><b>OPTIONS</b></h4><pre>
       See also <a href="../man1/skopeo.1.html">skopeo</a>(1) for options placed before the subcommand name.

       <b>--all</b>, <b>-a</b> If one of the images in <b>src</b> refers to a list of images, instead of copying just the image which
       matches  the current OS and architecture (subject to the use of the global --override-os, --override-arch
       and --override-variant options), attempt to copy all of the images in the list, and the list itself.

       <b>--authfile</b> <u>path</u>

       Path of the authentication file. Default is ${XDG_RUNTIME_DIR}/containers/auth.json, which is  set  using
       <b>skopeo</b> <b>login</b>.  If the authorization state is not found there, $HOME/.docker/config.json is checked, which
       is set using <b>docker</b> <b>login</b>.

       <b>--src-authfile</b> <u>path</u>

       Path of the authentication file for the source registry. Uses path given by <b>--authfile</b>, if not provided.

       <b>--dest-authfile</b> <u>path</u>

       Path  of  the  authentication  file  for  the destination registry. Uses path given by <b>--authfile</b>, if not
       provided.

       <b>--dry-run</b>

       Run the sync without actually copying data to the destination.

       <b>--src</b>, <b>-s</b> <u>transport</u> Transport for the source repository.

       <b>--dest</b>, <b>-d</b> <u>transport</u> Destination transport.

       <b>--format</b>, <b>-f</b> <u>manifest-type</u> Manifest Type (oci,  v2s1,  or  v2s2)  to  use  when  syncing  image(s)  to  a
       destination (default is manifest type of source, with fallbacks).

       <b>--help</b>, <b>-h</b>

       Print usage statement.

       <b>--scoped</b>  Prefix  images  with  the  source image path, so that multiple images with the same name can be
       stored at <u>destination</u>.

       <b>--append-suffix</b> <u>tag-suffix</u> String to append to destination tags.

       <b>--preserve-digests</b>

       Preserve the digests during copying. Fail if the digest cannot be preserved.

       This option does not change what will be copied; consider using <b>--all</b> at the same time.

       <b>--remove-signatures</b> Do not copy signatures, if any, from <u>source-image</u>. This is necessary when  copying  a
       signed image to a destination which does not support signatures.

       <b>--sign-by</b> <u>key-id</u>

       Add a “simple signing” signature using that key ID for an image name corresponding to <u>destination-image</u>

       <b>--sign-by-sigstore</b> <u>param-file</u>

       Add  a  sigstore  signature  based  on the options in the specified containers sigstore signing parameter
       file, <u>param-file</u>.  See <a href="../man5/containers-sigstore-signing-params.yaml.5.html">containers-sigstore-signing-params.yaml</a>(5) for details about the file format.

       <b>--sign-by-sigstore-private-key</b> <u>path</u>

       Add a sigstore signature using a private key at <u>path</u> for an image name corresponding to <u>destination-image</u>

       <b>--sign-passphrase-file</b> <u>path</u>

       The passphare to use when signing with <b>--sign-by</b> or <b>--sign-by-sigstore-private-key</b>. Only the  first  line
       will  be  read.  A  passphrase  stored in a file is of questionable security if other users can read this
       file. Do not use this option if at all avoidable.

       <b>--src-creds</b> <u>username[:password]</u> for accessing the source registry.

       <b>--dest-creds</b> <u>username[:password]</u> for accessing the destination registry.

       <b>--src-cert-dir</b> <u>path</u> Use certificates (*.crt, *.cert, *.key) at <u>path</u> to connect to the source registry  or
       daemon.

       <b>--src-no-creds</b> Access the registry anonymously.

       <b>--src-tls-verify</b>=<u>bool</u>  Require  HTTPS and verify certificates when talking to a container source registry
       or daemon. Default to source registry entry in registry.conf setting.

       <b>--dest-cert-dir</b> <u>path</u> Use certificates (*.crt, *.cert, *.key)  at  <u>path</u>  to  connect  to  the  destination
       registry or daemon.

       <b>--dest-no-creds</b> Access the registry anonymously.

       <b>--dest-tls-verify</b>=<u>bool</u>  Require  HTTPS  and  verify  certificates when talking to a container destination
       registry or daemon. Default to destination registry entry in registry.conf setting.

       <b>--src-registry-token</b> <u>Bearer</u> <u>token</u> for accessing the source registry.

       <b>--dest-registry-token</b> <u>Bearer</u> <u>token</u> for accessing the destination registry.

       <b>--retry-times</b>  the number of times to retry, retry wait time will be exponentially increased based on the
       number of failed attempts.

       <b>--keep-going</b> If any errors occur during copying of images,  those  errors  are  logged  and  the  process
       continues syncing rest of the images and finally fails at the end.

       <b>--src-username</b>

       The username to access the source registry.

       <b>--src-password</b>

       The password to access the source registry.

       <b>--dest-username</b>

       The username to access the destination registry.

       <b>--dest-password</b>

       The password to access the destination registry.

</pre><h4><b>EXAMPLES</b></h4><pre>
   <b>Synchronizing</b> <b>to</b> <b>a</b> <b>local</b> <b>directory</b>
       $ skopeo sync --src docker --dest dir registry.example.com/busybox /media/usb

       Images are located at:

       /media/usb/busybox:1-glibc
       /media/usb/busybox:1-musl
       /media/usb/busybox:1-ubuntu
       /media/usb/busybox:latest

   <b>Synchronizing</b> <b>to</b> <b>a</b> <b>container</b> <b>registry</b> <b>from</b> <b>local</b>
       Images are located at:

       /media/usb/busybox:1-glibc

       Sync run

       $ skopeo sync --src dir --dest docker /media/usb/busybox:1-glibc my-registry.local.lan/test/

       Destination registry content:

       REPO                                 TAGS
       my-registry.local.lan/test/busybox   1-glibc

   <b>Synchronizing</b> <b>to</b> <b>a</b> <b>local</b> <b>directory,</b> <b>scoped</b>
       $ skopeo sync --src docker --dest dir --scoped registry.example.com/busybox /media/usb

       Images are located at:

       /media/usb/registry.example.com/busybox:1-glibc
       /media/usb/registry.example.com/busybox:1-musl
       /media/usb/registry.example.com/busybox:1-ubuntu
       /media/usb/registry.example.com/busybox:latest

   <b>Synchronizing</b> <b>to</b> <b>a</b> <b>container</b> <b>registry</b>
       $ skopeo sync --src docker --dest docker registry.example.com/busybox my-registry.local.lan

       Destination registry content:

       REPO                         TAGS
       registry.local.lan/busybox   1-glibc, 1-musl, 1-ubuntu, ..., latest

   <b>Synchronizing</b> <b>to</b> <b>a</b> <b>container</b> <b>registry</b> <b>keeping</b> <b>the</b> <b>repository</b>
       $ skopeo sync --src docker --dest docker registry.example.com/repo/busybox my-registry.local.lan/repo

       Destination registry content:

       REPO                              TAGS
       registry.local.lan/repo/busybox   1-glibc, 1-musl, 1-ubuntu, ..., latest

   <b>Synchronizing</b> <b>to</b> <b>a</b> <b>container</b> <b>registry</b> <b>with</b> <b>tag</b> <b>suffix</b>
       $ skopeo sync --src docker --dest docker --append-suffix '-mirror' registry.example.com/busybox my-registry.local.lan

       Destination registry content:

       REPO                         TAGS
       registry.local.lan/busybox   1-glibc-mirror, 1-musl-mirror, 1-ubuntu-mirror, ..., latest-mirror

   <b>YAML</b> <b>file</b> <b>content</b> <b>(used</b> <u><b>source</b></u> <b>for</b> <b>**--src</b> <b>yaml**</b>)
       registry.example.com:
           images:
               busybox: []
               redis:
                   - "1.0"
                   - "2.0"
                   - "sha256:0000000000000000000000000000000011111111111111111111111111111111"
           images-by-tag-regex:
               nginx: ^1\.13\.[12]-alpine-perl$
           credentials:
               username: john
               password: this is a secret
           tls-verify: true
           cert-dir: /home/john/certs
       quay.io:
           tls-verify: false
           images:
               coreos/etcd:
                   - latest

       If the yaml filename is <b>sync.yml</b>, sync run:

       $ skopeo sync --src yaml --dest docker sync.yml my-registry.local.lan/repo/

       This  will  copy  the following images: - Repository <b>registry.example.com/busybox</b>: all images, as no tags
       are specified.  - Repository <b>registry.example.com/redis</b>: images tagged "1.0" and "2.0" along  with  image
       with   digest  "sha256:0000000000000000000000000000000011111111111111111111111111111111".   -  Repository
       <b>registry.example.com/nginx</b>: images tagged "1.13.1-alpine-perl" and  "1.13.2-alpine-perl".   -  Repository
       <b>quay.io/coreos/etcd</b>: images tagged "latest".

       For  the  registry  <b>registry.example.com</b>, the "john"/"this is a secret" credentials are used, with server
       TLS certificates located at <b>/home/john/certs</b>.

       TLS verification is normally enabled, and it can be disabled setting <b>tls-verify</b> to <b>false</b>.  In  the  above
       example, TLS verification is enabled for <b>registry.example.com</b>, while is disabled for <b>quay.io</b>.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <a href="../man1/skopeo.1.html">skopeo</a>(1),    <a href="../man1/skopeo-login.1.html">skopeo-login</a>(1),   <a href="../man1/docker-login.1.html">docker-login</a>(1),   <a href="../man5/containers-auth.json.5.html">containers-auth.json</a>(5),   <a href="../man5/containers-policy.json.5.html">containers-policy.json</a>(5),
       <a href="../man5/containers-transports.5.html">containers-transports</a>(5)

</pre><h4><b>AUTHORS</b></h4><pre>
       Flavio  Castelli  <a href="mailto:fcastelli@suse.com">fcastelli@suse.com</a>  ⟨<a href="mailto:fcastelli@suse.com">mailto:fcastelli@suse.com</a>⟩,  Marco   Vedovati   <a href="mailto:mvedovati@suse.com">mvedovati@suse.com</a>
       ⟨<a href="mailto:mvedovati@suse.com">mailto:mvedovati@suse.com</a>⟩

                                                                                                <u><a href="../man1/skopeo-sync.1.html">skopeo-sync</a>(1)</u>()
</pre>
 </div>
</div></section>
</div>
</body>
</html>