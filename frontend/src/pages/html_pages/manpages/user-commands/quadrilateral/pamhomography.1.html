<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>pamhomography - stretch/shrink a quadrilateral region of an image to</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/netpbm">netpbm_11.09.02-2_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       pamhomography - stretch/shrink a quadrilateral region of an image to
         another quadrilateral shape

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>pamhomography</b>
         [<b>-from</b>=<u>coords</u>]
         [<b>-to</b>=<u>coords</u>]
         [<b>-mapfile</b>=<u>map_file</u>]
         [<b>-view</b>=<u>coords</u>]
         [<b>-fill</b>=<u>color</u>]
         [<b>-verbose</b>
         [<u>pam_file</u>]

       You  can  abbreviate  any option to its shortest unique prefix. You can use two hyphens instead of one to
       delimit an option. You can separate an option from its value with whitespace instead of =.

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This program is part of Netpbm .

       <b>pamhomography</b> stretches and shrinks an arbitrary quadrilateral portion of an input image you specify (not
       necessarily rectangular), into a new quadrilateral shape you specify, producing a new image.

       You  can  do  any  affine image transformation  :  translation,  reflection,   scaling,   rotation,   and
       shearing/skewing. However, <b>pamhomography</b> additionally can do <u>bilinear</u> transforms, which means it can warp
       any  quadrilateral  to any other quadrilateral, even when this mapping cannot be described using a single
       set of linear equations. This can be useful, for example, for creating perspective views  of  rectangular
       images or for reverse-mapping a perspective view back to a rectangular projection.

</pre><h4><b>OPTIONS</b></h4><pre>
       In  addition  to  the  options common to all programs based on libnetpbm (most notably <b>-quiet</b>, see Common
       Options ), <b>pamhomography</b> recognizes the following command line options:

       <b>-from</b>=<u>coords</u>

              This defines the source quadrilateral. <u>coords</u> is a list of four
                integer-valued (<u>x</u>, <u>y</u>) coordinates. If you do not specify the
                source with either <b>-from</b> or <b>-mapfile</b>, the source quadrilateral
                is the entire input image.

       <b>-to</b>=<u>coords</u>

              This defines the target quadrilateral. <u>coords</u> is a list of four integer-valued (<u>x</u>, <u>y</u>) coordinates.
              If you do not specify the target with either <b>-to</b> or <b>-mapfile</b>, the target quadrilateral is the same
              as the entire input image.

       <b>-mapfile</b>=<u>map_file</u>

              This names a text file that describes the mapping from the source to the target quadrilateral. The
              file <u>map_file</u> must contain either eight integer-valued (<u>x</u>, <u>y</u>) coordinates, being the  four  source
              coordinates  followed  by  the  corresponding  four  target  coordinates,  or  only  four  (<u>x</u>,  <u>y</u>)
              coordinates, being only the four target coordinates. In the latter case, the source  quadrilateral
              is  taken  to  be  the four corners of the input image in clockwise order, starting from the upper
              left.

              Anything you specify with <b>-to</b> or <b>-from</b> overrides what is in
                this file.

       <b>-view</b>=<u>coords</u>

              This defines the target view. <u>coords</u> is a list of two integer-valued (<u>x</u>, <u>y</u>) coordinates: the upper
              left and lower right boundaries, respectively, of the pixels that will be visible  in  the  output
              image. If <b>-view</b> is not specified, the target view will fit precisely the target quadrilateral.

       <b>-fill</b>=<u>color</u>

              This  is  the  color  with  which  the  program  fills  all  pixels that lie outside of the target
              quadrilateral. Specify the color as described  for  the   argument of the pnm_parsecolor() library
              routine .

              The default is black, and for images with a transparency plane, transparent.

       <b>-verbose</b>
              This makes the program issue some informational messages about what it is doing.

       Cooordinates  should  normally  be  specified  in  clockwise  order.  The  syntax is fairly flexible: all
       characters other than the plus  sign,  minus  sign,  and  digits  are  treated  as  separators.  Although
       coordinates need to be integers, they may lie outside the image's boundary.

</pre><h4><b>PARAMETERS</b></h4><pre>
       <b>pamhomography</b>'s only parameter, <u>pam_file</u>, is the name of the
         file containing the input image. If you don't specify <u>pam_file</u>, the
         image comes from Standard Input.

</pre><h4><b>NOTES</b></h4><pre>
       The output image uses the same Netpbm format as the input image.

       Simple transformations are best handled by other Netpbm programs, such as those listed in the 'SEE ALSO'
       section  below. Use <b>pamhomography</b> for more sophisticated transformations such as perspective adjustments,
       rotations around an arbitrary point in the image, extraction of non-rectangular quadrilaterals, shearings
       by coordinates rather than by angle, and, in general, all transformations that are most easily  expressed
       as mapping four points in one image to four points in another image.

</pre><h4><b>EXAMPLES</b></h4><pre>
       The  following  examples use the park_row.ppm  test image, which is a  photograph of New York City's Park
       Row Building , scaled to 441&amp;times;640, converted to a PPM file, and redistributed under the terms of the
        GFDL .

       The first example showcases the real power of bilinear transformations.  Assuming  <u>park_row_rect.map</u>  has
       the following contents:

             (0,  0) (440,   0) (440, 639)  (0, 639)

       then

       projects  the  building's  facade  from  a perspective view to a rectilinear front-on view. Remember that
       <b>pamhomography</b> ignores the parentheses and commas used in <u>park_row_rect.map</u>; they  merely  make  the  file
       more human-readable. We equivalently could have written

       or any of myriad other variations.

       <b>pamhomography</b> can warp the image to a trapezoid to make it look like it's leaning backwards in 3-D:

       As a very simple example,

       flips  the  image left-to-right. Note that in this case the target quadrilateral's coordinates are listed
       in counterclockwise order because that represents the correspondence between points (0, 0)  &amp;harr;  (440,
       0) and (0, 639) &amp;harr; (639, 0).

       Scaling  is  also  straightforward.  The  following  command  scales down the image from 441&amp;times;640 to
       341&amp;times;540:

       Let's add 100 pixels of tan border to the above. We use <b>-view</b> and <b>-fill</b> to accomplish that task:

       We can add a border without having to scale the image:

       The <b>-view</b> option can also be used to extract a rectangle out of an image,  discarding  the  rest  of  the
       image:

       Specifying  the  same  set  of  coordinates  to  <b>-from</b> and <b>-to</b> has the same effect but also allows you to
       extract non-rectangular quadrilaterals from an image:

       Rotation is doable but takes some effort.  The  challenge  is  that  you  need  to  compute  the  rotated
       coordinates  yourself.  The  matrix  expression  to  rotate points \((x_1, y_1)\) \((x_2, y_2)\), \((x_3,
       y_3)\), and \((x_4, y_4)\) clockwise by \(\theta\) degrees around point \((c_x, c_y)\) is

       \[ \begin{bmatrix} 1 &amp; 0 &amp; c_x \\ 0 &amp; 1 &amp; c_y \\ 0 &amp; 0 &amp; 1 \end{bmatrix} \begin{bmatrix}  \cos  \theta  &amp;
       -\sin \theta &amp; 0 \\ \sin \theta &amp; \cos \theta &amp; 0 \\ 0 &amp; 0 &amp; 1 \end{bmatrix} \begin{bmatrix} 1 &amp; 0 &amp; -c_x
       \\ 0 &amp; 1 &amp; -c_y \\ 0 &amp; 0 &amp; 1 \end{bmatrix} \begin{bmatrix} x_1 &amp; x_2 &amp; x_3 &amp; x_4 \\ y_1 &amp; y_2 &amp; y_3 &amp; y_4
       \\ 1 &amp; 1 &amp; 1 &amp; 1 \end{bmatrix} \quad. \]

       For example, to rotate <u>park_row.ppm</u> 30&amp;deg; clockwise around (220, 320) you would compute

       \[  \begin{bmatrix} 1 &amp; 0 &amp; 220 \\ 0 &amp; 1 &amp; 320 \\ 0 &amp; 0 &amp; 1 \end{bmatrix} \begin{bmatrix} \cos 30^{\circ}
       &amp; -\sin 30^{\circ} &amp; 0  \\  \sin  30^{\circ}  &amp;  \cos  30^{\circ}  &amp;  0  \\  0  &amp;  0  &amp;  1  \end{bmatrix}
       \begin{bmatrix} 1 &amp; 0 &amp; -220 \\ 0 &amp; 1 &amp; -320 \\ 0 &amp; 0 &amp; 1 \end{bmatrix} \begin{bmatrix} 0 &amp; 440 &amp; 440 &amp; 0
       \\  0  &amp;  0 &amp; 639 &amp; 639 \\ 1 &amp; 1 &amp; 1 &amp; 1 \end{bmatrix} = \begin{bmatrix} 189.4744 &amp; 570.5256 &amp; 251.0256 &amp;
       -130.0256 \\ -67.1281 &amp; 152.8719 &amp; 706.2621 &amp; 486.2621 \\ 1.0000 &amp; 1.0000 &amp; 1.0000 &amp; 1.0000 \end{bmatrix}
       \quad, \]

       round these coordinates  to  integers,  transpose  the  matrix,  and  produce  the  following  map  file,
       <u>park_row_rot30.map</u>:

            571  153
            251  706
           -130  486

       (These  are  the  'to'  coordinates; we use the default, full-image 'from' coordinates.) The mapping then
       works as in all of the preceding examples:

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       •      <b><a href="../man1/pamcut.1.html">pamcut</a></b>(1)

       •      <b><a href="../man1/pamenlarge.1.html">pamenlarge</a></b>(1)

       •      <b><a href="../man1/pamflip.1.html">pamflip</a></b>(1)

       •      <b><a href="../man1/pamperspective.1.html">pamperspective</a></b>(1)

       •      <b><a href="../man1/pamscale.1.html">pamscale</a></b>(1)

       •      <b><a href="../man1/pamstretch.1.html">pamstretch</a></b>(1)

       •      <b><a href="../man1/pam.1.html">pam</a></b>(1)

       •      <b><a href="../man1/pnmmargin.1.html">pnmmargin</a></b>(1)

       •      <b><a href="../man1/pnmpad.1.html">pnmpad</a></b>(1)

       •      <b><a href="../man1/pnmrotate.1.html">pnmrotate</a></b>(1)

       •      <b><a href="../man1/pnmshear.1.html">pnmshear</a></b>(1)

</pre><h4><b>HISTORY</b></h4><pre>
       <b>pamhomography</b> was new in Netpbm 10.94 (March 2021).

</pre><h4><b>AUTHOR</b></h4><pre>
       Copyright © 2020 Scott Pakin, <u>scott+<a href="mailto:pbm@pakin.org">pbm@pakin.org</a></u>

</pre><h4><b>Table</b> <b>of</b> <b>Contents</b></h4><pre>
       •      SYNOPSIS

       •      DESCRIPTION

       •      OPTIONS

       •      PARAMETERS

       •      NOTES

       •      EXAMPLES

       •      SEE ALSO

       •      HISTORY

       •      AUTHOR

</pre><h4><b>DOCUMENT</b> <b>SOURCE</b></h4><pre>
       This manual page was generated by the Netpbm tool 'makeman' from HTML source.  The  master  documentation
       is at

              <b><a href="http://netpbm.sourceforge.net/doc/pamhomography.html">http://netpbm.sourceforge.net/doc/pamhomography.html</a></b>

netpbm documentation                            04 December 2022                                <u><a href="../man1/pamhomography.1.html">pamhomography</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>