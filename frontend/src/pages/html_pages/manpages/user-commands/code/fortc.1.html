<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>fortc - Unidata utility to generate fortran-compatible C code</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/libxgks-dev">libxgks-dev_2.6.1+dfsg.2-16_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       fortc - Unidata utility to generate fortran-compatible C code

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>fortc</b> <b>[-L</b> <u>LibDir</u><b>]</b> <b>[-O</b> <u>OpSys</u><b>]</b> <u>file</u>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>fortc</b> Reads C code from `<u>file</u>', transforms it into FORTRAN compatible code, and then writes the result to
       standard output.  The transformation is operating-system dependent because there are no standards in this
       matter.

       The  target  operating-system  can  be  specified in several ways.  If the `<b>-O</b>' option is given, then the
       operating-system specified by its argument is used; otherwise, if the environmental variable `<b>OS</b>' exists,
       then the operating-system specified by it's value is used; otherwise,  the  default  operating-system  --
       determined at installation time -- is used.

       Global  names  that  are  not  function definitions but that are to be accessible from both C and FORTRAN
       should be enclosed by the `<b>FC_NAME()</b>' macro:

           extern int FC_NAME(foo)(void);  /* FORTRAN function */

           extern struct {
               float f;
               int   i;
           } FC_NAME(comblk);              /* FORTRAN common block */

           cfoo()
           {
               return FC_NAME(foo)();      /* call FORTRAN function */
           }

       C functions which are to be called from FORTRAN are written as follows:

           int
           /*FORTRAN*/
           foo(
               character        pathname,    /* file name of new file */
               real             amount,      /* amount to frobdicate by */
               doubleprecision  dbl,         /* amount to tizzle by */
               void function    errf,        /* error routine */
               integer          rcode        /* returned error code */)
           {
           ...

       or, equivalently,

              int
              /*FORTRAN*/
              foo(char* pathname, float* amount, double* dbl,
                  void (*errf)(), int* rcode)
              {
              ...

       The points to note in writing FORTRAN-compatible functions are:

       1. Functions to be transformed are marked by a proceeding `<b>/*FORTRAN*/</b>' comment, which must appear on the
          line prior to the function name.  Any return-type declarations must proceed the comment.

       2. The formal parameters must be declared within function parentheses and be separated by commas.

       3. The formal parameters are restricted to the following types:

           <b>character</b> or <b>char*</b>
                   For Fortran character-variables.

           <b>doubleprecision</b> or <b>double*"</b>
                   For double-precision floating-point values.

           <b>real</b> or <b>float*</b>
                   For single-precision floating-point values.

           <b>integer</b> or <b>int*</b>
                   For integer values.

           <u>type</u> <b>function</b> <u>name</u> or <u>type</u> <b>(*</b><u>name</u><b>)()</b>
                   For functions returning type `<u>type</u>'.

       4. There must be nothing important after the opening brace, `{', and on the same line.

       The functions should be written using variables with the same names as the formal  parameters,  and  with
       the  same  semantics.   In  the  case  of  formal parameters of type `<b>character</b>' (i.e. Fortran character-
       variables), a variable with the same name will exist and will be of type `<b>char*</b>'.  In addition, for  each
       character-variable  argument, a local variable of integral type will be created and its value will be the
       size of the associated character-variable.  The name of this variable will be the name of the  associated
       character variable with "<b>_len</b>" appended (e.g. "<b>pathname_len</b>").  These length variables may be used in the
       function just like any other variable.

       For example, under SunOS the previous function would become (if it is contained in the file `<b>foo.src</b>'):

           #line 1 "foo.src"
           unsigned int
           #line 2 "foo.src"
           foo_(pathname, amount, errf, rcode, pathname_len)
               char      *pathname;
               int        pathname_len;
               float     *amount;
               void       (*errf)();
               int       *rcode;
           {
           #line 9 "foo.src"

       Note that 1) preprocessor line directives have been added; 2) the function name has been suffixed with an
       underscore; and 3) a formal parameter, `<b>pathname_len</b>', has been created.

       Under UNICOS, the same file would become

           #include &lt;fortran.h&gt;
           #line 1  "foo.src"
           unsigned int
           #line 2  "foo.src"
           FOO(pathnamed, amount, errf, rcode)
               _fcd       pathnamed;
               float     *amount;
               void       (*errf)();
               int       *rcode;
           {
               char      *pathname = _fcdtocp (pathnamed);
               unsigned   pathname_len  = _fcdlen (pathnamed);
           #line 9  "foo.src"

       Note,  in  particular,  the  additional `#include &lt;fortran.h&gt;' and the creation and initialization of the
       local variables `<b>pathname</b>' and `<b>pathname_len</b>'.

       This utility is implemented as a script and uses the system-supplied utilities <a href="../man1/sed.1.html">sed</a>(1) and <a href="../man1/m4.1.html">m4</a>(1).

</pre><h4><b>OPTIONS</b></h4><pre>
       <b>-L</b> <u>LibDir"</u>
               Defines the directory containing the  `fortc'  library  files.   The  default  is  determined  at
               installation time.

       <b>-O</b> <u>OpSys</u>
               Defines  the  operating-system  as  <u>OpSys</u>.   Known  values include `aix', `convexos', `domainos',
               `hpux', `irix', `msoft', `next-absoft', `newsos', `sunos', `ultrix',  `unicos',  and  `vms'.   To
               allow for greater flexibility, the known values may have any suffix (e.g. `sunos_4.1').

</pre><h4><b>ENVIRONMENT</b></h4><pre>
       <b>OS</b>      Defines  the  operating system if the `-O' option is not specified.  Known values are the same as
               the <b>-O</b> option.

</pre><h4><b>FILES</b></h4><pre>
       In the following, `LIBDIR' is the default library directory determined at installation time.

       <b>LIBDIR/pre.sed</b>
              A pre-m4, <a href="../man1/sed.1.html">sed</a>(1) script for transforming the input source into <a href="../man1/m4.1.html">m4</a>(1) source.

       <b>LIBDIR/post.sed</b>
              A post-m4, <a href="../man1/sed.1.html">sed</a>(1) script for transforming the <a href="../man1/m4.1.html">m4</a>(1) output into C code.

       <b>LIBDIR/common.m4</b>
              An <a href="../man1/m4.1.html">m4</a>(1) source common to all Fortran-calling-C implementations.

       <b>LIBDIR/*.m4</b>
              Operating-system-specific <a href="../man1/m4.1.html">m4</a>(1) sources.

</pre><h4><b>BUGS</b></h4><pre>
       The names of  automatically  generated  variables  might  conflict  with  those  of  other,  pre-existing
       variables.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man1/sed.1.html">sed</a></b>(1), <b><a href="../man1/m4.1.html">m4</a></b>(1).

Printed: 125-8-22                         $Date: 2000/08/07 23:15:03 $                                  <u><a href="../man1/fortc.1.html">fortc</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>