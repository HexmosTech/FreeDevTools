<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>borg-transfer - archives transfer from other repository, optionally upgrade data format</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/borgbackup2">borgbackup2_2.0.0b14-3build1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       borg-transfer - archives transfer from other repository, optionally upgrade data format

</pre><h4><b>SYNOPSIS</b></h4><pre>
       borg [common options] transfer [options]

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This  command  transfers  archives  from  one  repository to another repository.  Optionally, it can also
       upgrade the transferred data.  Optionally, it can also recompress the transferred data.

       It is  easiest  (and  fastest)  to  give  <b>--compression=COMPRESSION</b>  <b>--recompress=never</b>  using  the  same
       COMPRESSION  mode as in the SRC_REPO - borg will use that COMPRESSION for metadata (in any case) and keep
       data compressed "as is" (saves time as no data compression is needed).

       If  you  want  to  globally  change  compression  while  transferring  archives  to  the  DST_REPO,  give
       <b>--compress=WANTED_COMPRESSION</b> <b>--recompress=always</b>.

       The default is to transfer all archives.

       You  could  use the misc. archive filter options to limit which archives it will transfer, e.g. using the
       <b>-a</b> option. This is recommended for big repositories with multiple data  sets  to  keep  the  runtime  per
       invocation lower.

   <b>General</b> <b>purpose</b> <b>archive</b> <b>transfer</b>
       Transfer borg2 archives into a related other borg2 repository:

          # create a related DST_REPO (reusing key material from SRC_REPO), so that
          # chunking and chunk id generation will work in the same way as before.
          borg --repo=DST_REPO repo-create --encryption=DST_ENC --other-repo=SRC_REPO

          # transfer archives from SRC_REPO to DST_REPO
          borg --repo=DST_REPO transfer --other-repo=SRC_REPO --dry-run  # check what it would do
          borg --repo=DST_REPO transfer --other-repo=SRC_REPO            # do it!
          borg --repo=DST_REPO transfer --other-repo=SRC_REPO --dry-run  # check! anything left?

   <b>Data</b> <b>migration</b> <b>/</b> <b>upgrade</b> <b>from</b> <b>borg</b> <b>1.x</b>
       To  migrate  your  borg  1.x archives into a related, new borg2 repository, usage is quite similar to the
       above, but you need the <b>--from-borg1</b> option:

          borg --repo=DST_REPO repocreate --encryption=DST_ENC --other-repo=SRC_REPO --from-borg1

          # to continue using lz4 compression as you did in SRC_REPO:
          borg --repo=DST_REPO transfer --other-repo=SRC_REPO --from-borg1 \
               --compress=lz4 --recompress=never

          # alternatively, to recompress everything to zstd,3:
          borg --repo=DST_REPO transfer --other-repo=SRC_REPO --from-borg1 \
               --compress=zstd,3 --recompress=always

</pre><h4><b>OPTIONS</b></h4><pre>
       See <u><a href="../man1/borg-common.1.html">borg-common</a>(1)</u> for common options of Borg commands.

   <b>options</b>
       <b>-n</b>, <b>--dry-run</b>
              do not change repository, just check

       <b>--other-repo</b> <u>SRC_REPOSITORY</u>
              transfer archives from the other repository

       <b>--from-borg1</b>
              other repository is borg 1.x

       <b>--upgrader</b> <u>UPGRADER</u>
              use the upgrader to convert transferred data (default: no conversion)

       <b>-C</b> <u>COMPRESSION</u>, <b>--compression</b> <u>COMPRESSION</u>
              select compression algorithm, see the output of the "borg help compression" command for details.

       <b>--recompress</b> <u>MODE</u>
              recompress data chunks according to <u>MODE</u> and <b>--compression</b>. Possible modes are <u>always</u>:  recompress
              unconditionally;  and  <u>never</u>:  do  not  recompress  (faster:  re-uses  compressed  data chunks w/o
              change).If no MODE is given, <u>always</u> will be  used.  Not  passing  --recompress  is  equivalent  to
              "--recompress never".

   <b>Archive</b> <b>filters</b>
       <b>-a</b> <u>PATTERN</u>, <b>--match-archives</b> <u>PATTERN</u>
              only consider archives matching all patterns. see "borg help match-archives".

       <b>--sort-by</b> <u>KEYS</u>
              Comma-separated  list  of  sorting keys; valid keys are: timestamp, archive, name, id, tags, host,
              user; default is: timestamp

       <b>--first</b> <u>N</u>
              consider first N archives after other filters were applied

       <b>--last</b> <u>N</u>
              consider last N archives after other filters were applied

       <b>--oldest</b> <u>TIMESPAN</u>
              consider archives between the oldest archive's timestamp and (oldest + TIMESPAN), e.g. 7d or 12m.

       <b>--newest</b> <u>TIMESPAN</u>
              consider archives between the newest archive's timestamp and (newest - TIMESPAN), e.g. 7d or 12m.

       <b>--older</b> <u>TIMESPAN</u>
              consider archives older than (now - TIMESPAN), e.g. 7d or 12m.

       <b>--newer</b> <u>TIMESPAN</u>
              consider archives newer than (now - TIMESPAN), e.g. 7d or 12m.

</pre><h4><b>EXAMPLES</b></h4><pre>
          # 0. Have borg 2.0 installed on client AND server, have a b12 repo copy for testing.

          # 1. Create a new "related" repository:
          # here, the existing borg 1.2 repo used repokey-blake2 (and aes-ctr mode),
          # thus we use repokey-blake2-aes-ocb for the new borg 2.0 repo.
          # staying with the same chunk id algorithm (blake2) and with the same
          # key material (via --other-repo &lt;oldrepo&gt;) will make deduplication work
          # between old archives (copied with borg transfer) and future ones.
          # the AEAD cipher does not matter (everything must be re-encrypted and
          # re-authenticated anyway), you could also choose repokey-blake2-chacha20-poly1305.
          # in case your old borg repo did not use blake2, just remove the "-blake2".
          $ borg --repo       ssh://borg2@borgbackup/./tests/b20 repo-create \
                 --other-repo ssh://borg2@borgbackup/./tests/b12 -e repokey-blake2-aes-ocb

          # 2. Check what and how much it would transfer:
          $ borg --repo       ssh://borg2@borgbackup/./tests/b20 transfer --upgrader=From12To20 \
                 --other-repo ssh://borg2@borgbackup/./tests/b12 --dry-run

          # 3. Transfer (copy) archives from old repo into new repo (takes time and space!):
          $ borg --repo       ssh://borg2@borgbackup/./tests/b20 transfer --upgrader=From12To20 \
                 --other-repo ssh://borg2@borgbackup/./tests/b12

          # 4. Check if we have everything (same as 2.):
          $ borg --repo       ssh://borg2@borgbackup/./tests/b20 transfer --upgrader=From12To20 \
                 --other-repo ssh://borg2@borgbackup/./tests/b12 --dry-run

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <u><a href="../man1/borg-common.1.html">borg-common</a>(1)</u>

</pre><h4><b>AUTHOR</b></h4><pre>
       The Borg Collective

                                                   2025-01-03                                   <u><a href="../man1/BORG-TRANSFER.1.html">BORG-TRANSFER</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>