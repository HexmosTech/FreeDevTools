<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>sc_bdrmap — scamper driver to map first hop border routers of networks</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/scamper">scamper_20211212-1.2build1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       sc_bdrmap — scamper driver to map first hop border routers of networks

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>sc_bdrmap</b>  [<b>-6ADi</b>]  [<b>-a</b> <u>ip2as-file</u>] [<b>-c</b> <u>allyconf</u>] [<b>-C</b> <u>flowid</u>] [<b>-f</b> <u>firsthop</u>] [<b>-l</b> <u>log-file</u>] [<b>-M</b> <u>ipmap-file</u>]
                 [<b>-o</b> <u>output-file</u>]  [<b>-O</b>  <u>option</u>]  [<b>-p</b>  <u>port</u>]  [<b>-U</b>  <u>unix</u>]  [<b>-R</b>  <u>unix</u>]  [<b>-S</b>  <u>srcaddr</u>]  [<b>-v</b>  <u>vpases</u>]
                 [<b>-x</b> <u>ixp-file</u>]

       <b>sc_bdrmap</b>   [<b>-6</b>]   [<b>-a</b>  <u>ip2as-file</u>]  [<b>-d</b>  <u>dump</u>]  [<b>-g</b>  <u>delegated-file</u>]  [<b>-M</b>  <u>ipmap-file</u>]  [<b>-n</b>  <u>names-file</u>]
                 [<b>-r</b> <u>relationships-file</u>] [<b>-v</b> <u>vpases</u>] [<b>-x</b> <u>ixp-file</u>] [<u>file</u> <u>...</u>]

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The <b>sc_bdrmap</b> utility provides the ability to connect to a running <u><a href="../man1/scamper.1.html">scamper</a></u>(1) instance and use it to  map
       the  first  hop  border  routers  of  networks  using  the  "bdrmap"  technique.  <b>sc_bdrmap</b> uses targeted
       traceroutes, alias resolution techniques, knowledge of traceroute  idiosyncrasies,  and  codification  of
       topologicial  constraints  in a structured set of constraints, to correctly identify interdomain links at
       the granularity of individual border routers.  <b>sc_bdrmap</b> operates in two distinct modes: data collection,
       and data analysis.

       In the data collection mode, <b>sc_bdrmap</b> uses Paris traceroute with ICMP-echo probes  to  trace  the  paths
       towards  every distinct address block, using a stop-set to avoid re-probing portions of paths that do not
       provide useful constraints for the first hop border routers,  as  well  as  alias  resolution  techniques
       (Mercator,  Ally,  Prefixscan, and the Too-Big-Trick) to collapse the interface graph into a router-level
       topology.  <b>sc_bdrmap</b> will also use probes with the  record-route  and  pre-specified  timestamp  IP-level
       options to collect additional information on the return path from a router, where the probes are usable.

       In  the  data  analysis  mode,  <b>sc_bdrmap</b> uses the collected data to infer a router-level topology of the
       hosting network and the interconnecting routers belonging to the hosting network's neighbors.

       The supported options to <b>sc_bdrmap</b> are as follows:

       <b>-6</b>      specifies that <b>sc_bdrmap</b> should infer IPv6 border routers, and that the input files are  for  the
               IPv6 topology.  This feature is currently work in progress.

       <b>-a</b> <u>ip2as-file</u>
               specifies  the  IP  prefix  to Autonomous System (AS) mapping file that <b>sc_bdrmap</b> should use when
               collecting and analysing topology data.  See the examples section for a description of  how  this
               file must be formatted.

       <b>-A</b>      specifies  the  AS  numbers  (ASNs)  that  <b>sc_bdrmap</b> should collect data towards.  This option is
               useful for testing and debugging.

       <b>-c</b> <u>allyconf</u>
               specifies the number of times that <b>sc_bdrmap</b> should repeat pair-wise alias inferences  that  were
               made  implying  a  central shared IP-ID counter.  By default, each pair of aliases is tested five
               additional times at 5 minute intervals because  two  IP  addresses  belonging  to  two  different
               routers could happen to return IP-ID values that imply a central shared IP-ID counter.

       <b>-C</b> <u>flowid</u>
               specifies  the  checksum  that scamper should use in ICMP probes, or the source port that scamper
               should use in UDP probes, so that traceroutes to the same destination  will  also  use  the  same
               flowid.  By default, the flowid is 0x420.

       <b>-d</b> <u>dump</u>
               specifies the dump ID to use to analyze the collected data.  Currently, ID values 1 (routers) and
               2 (traces) are valid, which dumps inferred routers and annotated traceroute paths, respectively.

       <b>-D</b>      causes <b>sc_bdrmap</b> to detach and become a daemon.

       <b>-f</b> <u>firsthop</u>
               specifies  the  first  hop  in  a  traceroute path that <b>sc_bdrmap</b> should begin at when collecting
               traceroute paths.  If <b>sc_bdrmap</b> is being run behind a NAT router, the private IP address of  that
               router is uninteresting, and this option allows that hop to be skipped.

       <b>-g</b> <u>delegated-file</u>
               specifies an IP address delegations file that can be provided to <b>sc_bdrmap</b> to allow inferences in
               the analysis phase of who operates unrouted IP address space.

       <b>-i</b>      specifies the IP addresses that <b>sc_bdrmap</b> should collect data towards.  This option is useful for
               testing and debugging.

       <b>-l</b> <u>log-file</u>
               specifies the name of a file to log progress output from <b>sc_bdrmap</b> generated at run time.

       <b>-M</b> <u>ipmap-file</u>
               specifies  the  name  of  a file containing individual IP address to ASN mappings, which override
               heuristics inferring if the IP address is from a reserved address, or an IXP address.

       <b>-n</b> <u>names-file</u>
               specifies the name of a file containing IP address to domain name system names.

       <b>-o</b> <u>output-file</u>
               specifies the name of the output file to be written during the data collection phase.  The output
               file will use the <u><a href="../man5/warts.5.html">warts</a></u>(5) format.

       <b>-O</b> <u>option</u>
               allows the behavior of <b>sc_bdrmap</b> to be further tailored.  The current  choices  for  this  option
               are:
                 <b>-</b>  <b>dumpborders:</b> only dump inferred border routers, not all VP routers.
                 <b>-</b>  <b>dumponedsts:</b> further annotate routers that were only observed towards one AS.
                 <b>-</b>  <b>dumptracesets:</b> dump the traceroutes observed towards networks where no topology was observed
                    to be routed by a neighbor network.
                 <b>-</b>  <b>impatient:</b>  probe  the  destination  ASes  in order of number of address blocks, so that the
                    probing will complete fastest.
                 <b>-</b>  <b>noalias:</b> do not do alias resolution probes when collecting topology data.
                 <b>-</b>  <b>nogss:</b> do not use a global stop set when collecting topology data.
                 <b>-</b>  <b>noipopts:</b> do not probe with IP record route and IP prespecified timestamp options.
                 <b>-</b>  <b>nomerge:</b> do not analytically merge  IP  interfaces  to  routers  based  on  common  adjacent
                    neighbor routers.
                 <b>-</b>  <b>noself:</b>  do  not  report  links to other routers operated by the network hosting the vantage
                    point.
                 <b>-</b>  <b>randomdst:</b> probe a random address in each address block, rather than the first.
                 <b>-</b>  <b>udp:</b> probe using UDP traceroute probes.

       <b>-p</b> <u>port</u>
               specifies the port on the local host where <u><a href="../man1/scamper.1.html">scamper</a></u>(1) is accepting control socket connections.

       <b>-r</b> <u>relationships-file</u>
               specifies the AS relationships file which is used in the analysis phase to reason about who  owns
               each router in the observed topology.

       <b>-R</b> <u>unix</u>
               specifies the name of a unix domain socket where a remote <u><a href="../man1/scamper.1.html">scamper</a></u>(1) instance is accepting remote
               control socket connections.

       <b>-S</b> <u>srcaddr</u>
               specifies the source address that <u><a href="../man1/scamper.1.html">scamper</a></u>(1) should use in probes.

       <b>-U</b> <u>unix</u>
               specifies the name of a unix domain socket where a local <u><a href="../man1/scamper.1.html">scamper</a></u>(1) instance is accepting control
               socket connections.

       <b>-v</b> <u>vpases</u>
               specifies  the  name of a file, or a list of ASes, that represent the network hosting the vantage
               point.

       <b>-x</b> <u>ixp-file</u>
               specifies the name of a file that  contains  a  list  of  prefixes  used  by  an  IXP  to  enable
               interconnection at their facilities.

</pre><h4><b>EXAMPLES</b></h4><pre>
       Given a set of prefixes with origin AS in a file named ip2as.txt, a list of VP ases in vpases.txt, a list
       of  IXP prefixes in ixp.txt, and a <u><a href="../man1/scamper.1.html">scamper</a></u>(1) instance listening on port 31337 configured to probe at 100
       packets per second started as follows:

             <b>scamper</b> <b>-P</b> <b>31337</b> <b>-p</b> <b>100</b>

       the following command will collect raw topology data to support  inference  of  border  routers  for  the
       network  hosting  the vantage point, storing raw data into bdrmap.warts, and logging run-time information
       into logfile1.txt:

             <b>sc_bdrmap</b> <b>-p</b> <b>31337</b> <b>-o</b> <b>bdrmap.warts</b> <b>-l</b> <b>logfile1.txt</b> <b>-a</b> <b>ip2as.txt</b> <b>-v</b> <b>vpases.txt</b> <b>-x</b> <b>ixp.txt</b>

       To infer border routers from the collected data, using the same input files as above, with a  set  of  AS
       relationships  contained  in  asrel.txt,  and  a  set  of  prefix delegations assembled from the Regional
       Internet Registry (RIR) Statistics files in delegated.txt:

             <b>sc_bdrmap</b> <b>-d</b>  <b>routers</b>  <b>-a</b>  <b>ip2as.txt</b>  <b>-g</b>  <b>delegated.txt</b>  <b>-r</b>  <b>asrel.txt</b>  <b>-v</b>  <b>vpases.txt</b>  <b>-x</b>  <b>ixp.txt</b>
             <b>bdrmap.warts</b> <b>&gt;bdrmap.routers.txt</b>

       To  view  annotated  traceroutes  stored  in  bdrmap.warts  with  IP  to  DNS names information stored in
       names.txt:

             <b>sc_bdrmap</b>  <b>-d</b>  <b>traces</b>  <b>-a</b>  <b>ip2as.txt</b>  <b>-v</b>   <b>vpases.txt</b>   <b>-x</b>   <b>ixp.txt</b>   <b>-n</b>   <b>names.txt</b>   <b>bdrmap.wart</b>
             <b>&gt;bdrmap.traces.txt</b>

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <u><a href="../man1/scamper.1.html">scamper</a></u>(1), <u><a href="../man1/sc_ally.1.html">sc_ally</a></u>(1), <u><a href="../man1/sc_speedtrap.1.html">sc_speedtrap</a></u>(1), <u><a href="../man1/sc_wartsdump.1.html">sc_wartsdump</a></u>(1), <u><a href="../man1/sc_warts2text.1.html">sc_warts2text</a></u>(1), <u><a href="../man1/sc_warts2json.1.html">sc_warts2json</a></u>(1)

       M.  Luckie,  A.  Dhamdhere, B. Huffaker, D. Clark, and k. claffy, <u>bdrmap:</u> <u>Inference</u> <u>of</u> <u>Borders</u> <u>Between</u> <u>IP</u>
       <u>Networks</u>, Proc. ACM/SIGCOMM Internet Measurement Conference 2016.

       R. Govindan and H. Tangmunarunkit, <u>Heuristics</u> <u>for</u> <u>Internet</u> <u>Map</u> <u>Discovery</u>, Proc. IEEE INFOCOM 2000.

       N. Spring, R. Mahajan, and D. Wetherall, <u>Measuring</u> <u>ISP</u> <u>topologies</u>  <u>with</u>  <u>Rocketfuel</u>,  Proc.  ACM  SIGCOMM
       2002.

       B.  Donnet,  P.  Raoult,  T.  Friedman,  and  M.  Crovella, <u>Efficient</u> <u>algorithms</u> <u>for</u> <u>large-scale</u> <u>topology</u>
       <u>discovery</u>, Proc. ACM SIGMETRICS 2005.

       B. Augustin, X. Cuvellier, B. Orgogozo, F. Viger, T. Friedman, M. Latapy, C. Magnien,  and  R.  Teixeira,
       <u>Avoiding</u>  <u>traceroute</u>  <u>anomalies</u>  <u>with</u> <u>Paris</u> <u>traceroute</u>, Proc. ACM/SIGCOMM Internet Measurement Conference
       2006.

       A. Bender, R. Sherwood, and N.  Spring,  <u>Fixing</u>  <u>Ally's</u>  <u>growing</u>  <u>pains</u>  <u>with</u>  <u>velocity</u>  <u>modeling</u>,  Proc.
       ACM/SIGCOMM Internet Measurement Conference 2008.

       M. Luckie, <u>Scamper:</u> <u>a</u> <u>Scalable</u> <u>and</u> <u>Extensible</u> <u>Packet</u> <u>Prober</u> <u>for</u> <u>Active</u> <u>Measurement</u> <u>of</u> <u>the</u> <u>Internet</u>, Proc.
       ACM/SIGCOMM Internet Measurement Conference 2010.

       R.  Beverly,  W. Brinkmeyer, M. Luckie, and J.P. Rohrer, <u>IPv6</u> <u>Alias</u> <u>Resolution</u> <u>via</u> <u>Induced</u> <u>Fragmentation</u>,
       Proc. Passive and Active Measurement Conference 2013.

       M. Luckie, R. Beverly, W. Brinkmeyer, and k claffy,  <u>Speedtrap:</u>  <u>Internet-scale</u>  <u>IPv6</u>  <u>Alias</u>  <u>Resolution</u>,
       Proc. ACM/SIGCOMM Internet Measurement Conference 2013.

       M.  Luckie,  B.  Huffaker,  A. Dhamdhere, V. Giotsas, and k claffy, <u>AS</u> <u>Relationships,</u> <u>Customer</u> <u>Cones,</u> <u>and</u>
       <u>Validation</u>, Proc. ACM/SIGCOMM Internet Measurement Conference 2013.

</pre><h4><b>AUTHOR</b></h4><pre>
       <b>sc_bdrmap</b> was written by Matthew Luckie &lt;<a href="mailto:mjl@luckie.org.nz">mjl@luckie.org.nz</a>&gt;.

Debian                                         September 24, 2019                                   <u><a href="../man1/SC_BDRMAP.1.html">SC_BDRMAP</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>