<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>tcpstat — report network interface statistics</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/tcpstat">tcpstat_1.5-8.2_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       tcpstat — report network interface statistics

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>tcpstat</b>  [<b>-?haeFlp</b>]  [<b>-B</b>  <u>bps</u>]  [<b>-b</b>  <u>bps</u>]  [<b>-f</b>  <u>filter</u>  <u>expr</u>]  [<b>-i</b>  <u>interface</u>]  [<b>-o</b>  <u>output</u>] [<b>-R</b> <u>seconds</u>]
               [<b>-r</b> <u>filename</u>] [<b>-s</b> <u>seconds</u>] [<u>interval</u>]

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>tcpstat</b> reports certain network interface statistics much like  <u><a href="../man8/vmstat.8.html">vmstat</a></u>(8)  does  for  system  statistics.
       Statistics include bandwidth being used, number of packets, average packet size, and much more.

       Network  information  is  collected  either  by reading data from <u>filename</u>, or by directly monitoring the
       network interface <u>interface</u>.   The  default  action  for  <b>tcpstat</b>  is  to  automatically  search  for  an
       appropriate interface, and to show current statistics on it.

       <u>interval</u>  is  the sample interval, in seconds, in which the statistics are based upon and when in default
       mode, how often the display is updated. If -1 is given, then the interval  is  taken  to  be  the  entire
       length of the sample.  Default is 5 seconds.

       When  reading data from <u>filename</u>, <b>tcpstat</b> will exit immediately after the entire file has been processed.
       When collecting data from <u>interface</u>, <b>tcpstat</b> will keep running unless the <b>-s</b> option had been specified.

</pre><h4><b>OPTIONS</b></h4><pre>
       The options are as follows:

       <b>-a</b>          Accounting mode.  Displays the estimated number of bytes per second, minute, hour,  day,  and
                   month.

       <b>-b</b> <u>bps</u>      Bandwidth  mode.   Displays the total number of seconds the data-throughput exceeded <u>bps</u>, and
                   the percentage of total time this was, as if the interface  were  limited  to  <u>bps</u>  bits  per
                   second.  See the “NOTES” section below to see how the <u>interval</u> affects bandwidth calculation.

       <b>-B</b> <u>bps</u>      "Dumb"  bandwidth  mode.   Displays  the total number of seconds the data-throughput exceeded
                   <u>bps</u>, and the percentage of total time this  was.   See  the  “NOTES”  section  below  to  see
                   difference between "dumb" and normal bandwidth modes.

       <b>-e</b>          Suppresses the display of empty intervals.

       <b>-F</b>          Flush  all  output  streams  after printing each interval.  Sometimes useful when redirecting
                   output into a file, or piping tcpstat into another program like <u><a href="../man1/grep.1.html">grep</a></u>(1).

       <b>-f</b> <u>filter</u> <u>expr</u>
                   Filter the packets according the rules given by <u>filter</u> <u>expr</u>.  For the syntax of these  rules,
                   see  <u><a href="../man1/tcpdump.1.html">tcpdump</a></u>(1).   The  argument must be quoted if it contains spaces in order to separate it
                   from other options.

       <b>-h</b>, <b>-</b>?      Display version and a brief help message.

       <b>-i</b> <u>interface</u>
                   Do a live capture (rather than read from a file) on the  interface  <u>interface</u>  given  on  the
                   command  line.   If  <u>interface</u>  is  "auto"  then  <b>tcpstat</b> tries to find an appropriate one by
                   itself.

       <b>-l</b>          Include the size of the link-layer header when calculating statistics.  (Ethernet only, right
                   now.  Usually 14 bytes per packet.)

       <b>-p</b>          Set the interface into non-promiscuous mode (promiscuous is  the  default)  when  doing  live
                   captures.

       <b>-o</b> <u>format</u>   Set  the output format when displaying statistics.  See the “OUTPUT FORMAT” section below for
                   a description of the syntax.

       <b>-R</b> <u>seconds</u>  Show the timestamp relative to <u>seconds</u>.  Avoid this option, because it will  most  likely  go
                   away in future versions.

       <b>-r</b> <u>filename</u>
                   Read  all  data  from <u>filename</u>, which may be a regular file, a named pipe or "-" to read it's
                   data from standard input. Acceptable file formats include pcap <u>(<a href="../man1/tcpdump.1.html">tcpdump</a></u>(1) files) and "snoop"
                   format files.  <u>filename</u> is usually a file created by the <u><a href="../man1/tcpdump.1.html">tcpdump</a></u>(1) command  using  the  "-w"
                   option.

       <b>-s</b> <u>seconds</u>  When  monitoring  an  interface, <b>tcpstat</b> runs for only <u>seconds</u> seconds, and then quits.  When
                   reading from a data file, <b>tcpstat</b> prints statistics for <u>seconds</u> seconds relative to the first
                   packet seen.

</pre><h4><b>OUTPUT</b> <b>FORMAT</b></h4><pre>
       The <u>output</u> string is any quoted string, and <b>tcpstat</b> will write this string to the stdout.   In  addition,
       <b>tcpstat</b>  will  substitute  certain values for substrings which begin with a "%", as well as most standard
       <u><a href="../man3/printf.3.html">printf</a></u>(3) "\" escape characters. Here is a list of all substitution strings:

       %A    the number of ARP packets

       %a    the average packet size in bytes

       %B    the number of bytes per second

       %b    the number of bits per second

       %C    the number of ICMP and ICMPv6 packets

       %d    the standard deviation of the size of each packet in bytes

       %I    the number of IPv4 packets

       %l    the network "load" over the last minute, similar to <u><a href="../man1/uptime.1.html">uptime</a></u>(1)

       %M    the maximum packet size in bytes

       %m    the minimum packet size in bytes

       %N    the number of bytes

       %n    the number of packets

       %p    the number of packets per second

       %R    same as %S, but relative to the first packet seen

       %r    same as %s, but relative to the first packet seen

       %S    the timestamp for the interval in seconds after the "UNIX epoch"

       %s    the timestamp for the interval in seconds.microseconds after the "UNIX epoch"

       %T    the number of TCP packets

       %U    the number of UDP packets

       %V    the number of IPv6 packets

       %<u>number</u>
             switch the output to the file descriptor <u>number</u> at this point in the string.  All output  for  each
             interval  before this parameter is by default the standard output (file descriptor 1).  Useful when
             redirecting the output into more than one file (or fifo) for separate statistics.  Be sure you know
             where they are going.  Writing to "dangling" file descriptors (without directing them to a specific
             destination) may produce unexpected results.

       %%    the "%" character

       The default <u>format</u> string for <b>tcpstat</b> is:

       "Time:%S\tn=%n\tavg=%a\tstddev=%d\tbps=%b\n"

       which will produce an output which would look similar to:

       Time:940948785  n=107   avg=251.81      stddev=422.45   bps=43110.40
       Time:940948790  n=99    avg=400.21      stddev=539.39   bps=63393.60
       Time:940948795  n=43    avg=257.16      stddev=352.83   bps=17692.80

       It is worth noting for example, that many of the protocol filters (%T, %U, etc.) may  be  seen  as  being
       redundant because protocols can be filtered using <b>-f</b> (see “OPTIONS” above)

</pre><h4><b>SIGNALS</b></h4><pre>
       Upon  receiving  a  SIGINT, <b>tcpstat</b> will print any remaining statistics, and then exit.  Upon receiving a
       SIGUSR1 when printing intervals, <b>tcpstat</b> will print the current  statistics  immediately.   This  can  be
       useful when using an interval length of "-1" to print statistics on demand.

</pre><h4><b>FILES</b></h4><pre>
       <u>/dev/bpf</u><b>n</b>    the packet filter device

</pre><h4><b>EXAMPLES</b></h4><pre>
             <b>tcpstat</b> <b>-i</b> <b>fxp0</b>

       Displays the default statistics every 5 seconds of all traffic currently passing through the fxp0 network
       interface.

             <b>tcpstat</b> <b>-r</b> <b>file.dump</b>

       Displays the default statistics every 5 seconds from the <u><a href="../man1/tcpdump.1.html">tcpdump</a></u>(1) generated file "file.dump".

             <b>tcpstat</b> <b>-f</b> <b>'port</b> <b>(smtp</b> <b>or</b> <b>http)'</b> <b>-o</b> <b>'%S</b> <b>%b\n'</b> <b>-r</b> <b>file.dump</b> <b>2.3</b>

       Displays  every 2.3 seconds the timestamp together with smtp and http traffic throughput of the data from
       "file.dump", in a format which would be suitable for <u><a href="../man1/gnuplot.1.html">gnuplot</a></u>(1).

             <b>tcpstat</b> <b>-b</b> <b>28800</b> <b>-r</b> <b>file.dump</b> <b>0.5</b>

       Displays what percentage of the traffic in file.dump exceeded the speed  of  my  modem  (28800  bits  per
       second.)

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <u><a href="../man1/tcpdump.1.html">tcpdump</a></u>(1), <u><a href="../man3/pcap.3.html">pcap</a></u>(3), <u><a href="../man4/bpf.4.html">bpf</a></u>(4), <u><a href="../man3/printf.3.html">printf</a></u>(3)

</pre><h4><b>NOTES</b></h4><pre>
   <b>Interval</b> <b>size</b> <b>affects</b> <b>bandwidth</b>
       Due  to  the  nature of how bandwidth is actually measured (from discrete samples of data), the bandwidth
       numbers displayed will vary according to the <u>interval</u> variable.  Generally speaking, if  you  often  have
       rapid  bursts  of packet data, the bandwidth reported will not reflect this when <u>interval</u> is sufficiently
       large.  This results in an "averaging" effect, which may or may not be desired.  On the  other  hand,  if
       <u>interval</u>  is  too  small  (say  &lt;  0.01), this results in unrealistically large bandwidths for very short
       amounts of time.

       The reason for the latter is that most network interfaces do not hand over packets bit by bit, but rather
       packet by packet.  Thus, each packet is reported as being  transferred  "instantaneously",  resulting  in
       "infinite"  (or  rather  indeterminable)  bandwidth.   Thus, when counting single bits on the wire, there
       really is no such thing as "bandwidth" because they aren't really moving from the network  stack's  point
       of view (cf. Zeno's Paradox.)

       A  possible  solution  is  to internally spline the packet sizes together and report the bandwidth as the
       scalar integral over the given interval, but this has yet to be implemented, and to be honest,  would  be
       the proverbial cruise missile to destroy an ant hill.

       That being said (whew!), a "good value" for <u>interval</u> is usually somewhere between 0.5 and 2.

   <b>Difference</b> <b>between</b> <b>normal</b> <b>and</b> <b>'dumb'</b> <b>bandwidth</b> <b>modes.</b>
       In  normal bandwidth mode, when an interval exceeds the given bandwidth, the extra bytes are "moved" into
       the next interval.  This has the effect of trying to imagine how overloaded an interface would be if  the
       interface had a smaller bandwidth, yet same amount of data tried to get through.

       In  "dumb"  bandwidth  mode,  each interval which exceeds the given bandwidth is simply counted.  Nothin'
       else.

</pre><h4><b>HISTORY</b></h4><pre>
       <b>tcpstat</b> was first written in Winter 1998 using FreeBSD 3.0, and then finally  retrofitted  for  Linux  in
       Spring 2000.

</pre><h4><b>AUTHORS</b></h4><pre>
       Paul Herman &lt;<a href="mailto:pherman@frenchfries.net">pherman@frenchfries.net</a>&gt;
       Cologne, Germany.

       Please send all bug reports to this address.

</pre><h4><b>BUGS</b></h4><pre>
       Due  to  a  bug  in  libpcap, tcpstat will hang indefinitely under Linux when no packets arrive.  This is
       because the timeout in pcap_open_live() is ignored under Linux when the interface is idle,  which  causes
       pcap_dispatch() to never return.

       Not tested with link types other than Ethernet, PPP, and "None" types.

       There may be problems reading non-IPv4 packets across platforms when reading null type link layers.  This
       is due to a lack of a standardized packet type descriptor in libpcap for this link type.

       Snoop file formats cannot be read from stdin or named pipes.

Debian                                           April 29, 2000                                       <u><a href="../man1/TCPSTAT.1.html">TCPSTAT</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>