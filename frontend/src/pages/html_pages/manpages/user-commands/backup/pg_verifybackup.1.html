<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>pg_verifybackup - verify the integrity of a base backup of a PostgreSQL cluster</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/postgresql-client-17">postgresql-client-17_17.5-0ubuntu0.25.04.1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       pg_verifybackup - verify the integrity of a base backup of a PostgreSQL cluster

</pre><h4><b>SYNOPSIS</b></h4><pre>

       <b>pg_verifybackup</b> [<u>option</u>...]

</pre><h4><b>DESCRIPTION</b></h4><pre>
       pg_verifybackup is used to check the integrity of a database cluster backup taken using <b>pg_basebackup</b>
       against a backup_manifest generated by the server at the time of the backup. The backup must be stored in
       the "plain" format; a "tar" format backup can be checked after extracting it.

       It is important to note that the validation which is performed by pg_verifybackup does not and cannot
       include every check which will be performed by a running server when attempting to make use of the
       backup. Even if you use this tool, you should still perform test restores and verify that the resulting
       databases work as expected and that they appear to contain the correct data. However, pg_verifybackup can
       detect many problems that commonly occur due to storage problems or user error.

       Backup verification proceeds in four stages. First, pg_verifybackup reads the backup_manifest file. If
       that file does not exist, cannot be read, is malformed, fails to match the system identifier with
       pg_control of the backup directory or fails verification against its own internal checksum,
       pg_verifybackup will terminate with a fatal error.

       Second, pg_verifybackup will attempt to verify that the data files currently stored on disk are exactly
       the same as the data files which the server intended to send, with some exceptions that are described
       below. Extra and missing files will be detected, with a few exceptions. This step will ignore the
       presence or absence of, or any modifications to, postgresql.auto.conf, standby.signal, and
       recovery.signal, because it is expected that these files may have been created or modified as part of the
       process of taking the backup. It also won't complain about a backup_manifest file in the target directory
       or about anything inside pg_wal, even though these files won't be listed in the backup manifest. Only
       files are checked; the presence or absence of directories is not verified, except indirectly: if a
       directory is missing, any files it should have contained will necessarily also be missing.

       Next, pg_verifybackup will checksum all the files, compare the checksums against the values in the
       manifest, and emit errors for any files for which the computed checksum does not match the checksum
       stored in the manifest. This step is not performed for any files which produced errors in the previous
       step, since they are already known to have problems. Files which were ignored in the previous step are
       also ignored in this step.

       Finally, pg_verifybackup will use the manifest to verify that the write-ahead log records which will be
       needed to recover the backup are present and that they can be read and parsed. The backup_manifest
       contains information about which write-ahead log records will be needed, and pg_verifybackup will use
       that information to invoke pg_waldump to parse those write-ahead log records. The --quiet flag will be
       used, so that pg_waldump will only report errors, without producing any other output. While this level of
       verification is sufficient to detect obvious problems such as a missing file or one whose internal
       checksums do not match, they aren't extensive enough to detect every possible problem that might occur
       when attempting to recover. For instance, a server bug that produces write-ahead log records that have
       the correct checksums but specify nonsensical actions can't be detected by this method.

       Note that if extra WAL files which are not required to recover the backup are present, they will not be
       checked by this tool, although a separate invocation of pg_waldump could be used for that purpose. Also
       note that WAL verification is version-specific: you must use the version of pg_verifybackup, and thus of
       pg_waldump, which pertains to the backup being checked. In contrast, the data file integrity checks
       should work with any version of the server that generates a backup_manifest file.

</pre><h4><b>OPTIONS</b></h4><pre>
       pg_verifybackup accepts the following command-line arguments:

       <b>-e</b>
       <b>--exit-on-error</b>
           Exit as soon as a problem with the backup is detected. If this option is not specified,
           pg_verifybackup will continue checking the backup even after a problem has been detected, and will
           report all problems detected as errors.

       <b>-i</b> <u>path</u>
       <b>--ignore=</b><u>path</u>
           Ignore the specified file or directory, which should be expressed as a relative path name, when
           comparing the list of data files actually present in the backup to those listed in the
           backup_manifest file. If a directory is specified, this option affects the entire subtree rooted at
           that location. Complaints about extra files, missing files, file size differences, or checksum
           mismatches will be suppressed if the relative path name matches the specified path name. This option
           can be specified multiple times.

       <b>-m</b> <u>path</u>
       <b>--manifest-path=</b><u>path</u>
           Use the manifest file at the specified path, rather than one located in the root of the backup
           directory.

       <b>-n</b>
       <b>--no-parse-wal</b>
           Don't attempt to parse write-ahead log data that will be needed to recover from this backup.

       <b>-P</b>
       <b>--progress</b>
           Enable progress reporting. Turning this on will deliver a progress report while verifying checksums.

           This option cannot be used together with the option <b>--quiet</b>.

       <b>-q</b>
       <b>--quiet</b>
           Don't print anything when a backup is successfully verified.

       <b>-s</b>
       <b>--skip-checksums</b>
           Do not verify data file checksums. The presence or absence of files and the sizes of those files will
           still be checked. This is much faster, because the files themselves do not need to be read.

       <b>-w</b> <u>path</u>
       <b>--wal-directory=</b><u>path</u>
           Try to parse WAL files stored in the specified directory, rather than in pg_wal. This may be useful
           if the backup is stored in a separate location from the WAL archive.

       Other options are also available:

       <b>-V</b>
       <b>--version</b>
           Print the pg_verifybackup version and exit.

       <b>-?</b>
       <b>--help</b>
           Show help about pg_verifybackup command line arguments, and exit.

</pre><h4><b>EXAMPLES</b></h4><pre>
       To create a base backup of the server at mydbserver and verify the integrity of the backup:

           $ <b>pg_basebackup</b> <b>-h</b> <b>mydbserver</b> <b>-D</b> <b>/usr/local/pgsql/data</b>
           $ <b>pg_verifybackup</b> <b>/usr/local/pgsql/data</b>

       To create a base backup of the server at mydbserver, move the manifest somewhere outside the backup
       directory, and verify the backup:

           $ <b>pg_basebackup</b> <b>-h</b> <b>mydbserver</b> <b>-D</b> <b>/usr/local/pgsql/backup1234</b>
           $ <b>mv</b> <b>/usr/local/pgsql/backup1234/backup_manifest</b> <b>/my/secure/location/backup_manifest.1234</b>
           $ <b>pg_verifybackup</b> <b>-m</b> <b>/my/secure/location/backup_manifest.1234</b> <b>/usr/local/pgsql/backup1234</b>

       To verify a backup while ignoring a file that was added manually to the backup directory, and also
       skipping checksum verification:

           $ <b>pg_basebackup</b> <b>-h</b> <b>mydbserver</b> <b>-D</b> <b>/usr/local/pgsql/data</b>
           $ <b>edit</b> <b>/usr/local/pgsql/data/note.to.self</b>
           $ <b>pg_verifybackup</b> <b>--ignore=note.to.self</b> <b>--skip-checksums</b> <b>/usr/local/pgsql/data</b>

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man1/pg_basebackup.1.html">pg_basebackup</a></b>(1)

PostgreSQL 17.5                                       2025                                    <u><a href="../man1/PG_VERIFYBACKUP.1.html">PG_VERIFYBACKUP</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>