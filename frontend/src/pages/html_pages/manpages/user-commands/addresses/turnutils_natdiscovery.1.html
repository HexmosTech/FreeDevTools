<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>A  set of turnutils_* programs provides some utility functionality to be used for testing and for setting</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/coturn">coturn_4.6.1-2build1_amd64</a> <br><br><pre>
</pre><h4><b>GENERAL</b> <b>INFORMATION</b></h4><pre>
       A  set of turnutils_* programs provides some utility functionality to be used for testing and for setting
       up the TURN server.

       <b>1.</b>     <u>turnutils_uclient</u>: emulates multiple UDP,TCP,TLS or DTLS clients.  (this program is  provided  for
              the  testing  purposes  only  !)   The  compiled  binary  image of this program is located in bin/
              sub-directory.

       <b>2.</b>     <u>turnutils_peer</u>: a simple stateless UDP-only "echo" server, to be used as the final server in relay
              pattern ("peer"). For every incoming UDP packet, it simply  echoes  it  back.   (this  program  is
              provided  for  the  testing  purposes  only  !)   When  the  test clients are communicating in the
              client-to-client manner (when the "<u>turnutils_uclient</u>" program is used with "<b>-y</b>" option)  then  the
              <u>turnutils_peer</u> is not needed.

       The compiled binary image of this program is located in bin/ subdirectory.

       <b>3.</b>     <u>turnutils_stunclient</u>:  a simple STUN client example.  The compiled binary image of this program is
              located in bin/ subdirectory.

       <b>4.</b>     <u>turnutils_rfc5769check</u>:  a  utility  that  checks  the  correctness  of  the  STUN/TURN   protocol
              implementation. This utility is used only for the compilation check procedure, it is not copied to
              the installation destination.

       In the "examples/scripts" subdirectory, you will find the examples of command lines to be used to run the
       programs. The scripts are meant to be run from examples/ subdirectory, for example:

       $ cd examples

       $ ./scripts/secure_relay.sh

       <b>5.</b>     <u>turnutils_natdiscovery</u>:  a  utility  that  provides NAT behavior discovery according RFC5780. This
              utility discovers the actual NAT Mapping and Filtering behavior, etc. Be aware that on TURN server
              side two different listening IP addresses should be configured to be able to work properly!

       <b>6.</b>     <u>turnutils_oauth</u>:  a  utility  that  provides  OAuth  access_token   <b>generation</b>(AEAD   encryption),
              validation  and  decryption.  This  utility  inputs  all  the  keys  and lifetimes and any related
              information that needed for creation and validationi of an access_token. It outputs  a  JSON  with
              all  OAuth  PoP parameters that need to pass to the client. Output is generated accoriding RFC7635
              Appendix B, Figure 8.

       For  more  details,  and  for  the  access_token   structure,   read   rfc7635,   and   see   script   in
       examples/scripts/oauth.sh.

</pre><h4><b>=====================================</b></h4><pre>
   <b>NAME</b>
        <b>turnutils_uclient</b> <b>-</b> <b>this</b> <b>client</b> <b>emulation</b> <b>application</b> <b>is</b> <b>supplied</b> <b>for</b> <b>the</b> <b>test</b> <b>purposes</b> <b>only.</b>

   <b>SYNOPSIS</b>
       $ <u>turnutils_uclient</u> [<b>-tTSvsyhcxg</b>] [<u>options</u>] &lt;TURN-Server-IP-address&gt;

   <b>DESCRIPTION</b>
       It  was  designed  to  simulate  multiple  clients.  It uses asynch IO API in libevent to handle multiple
       clients. A client connects to the relay, negotiates the session, and sends multiple  (configured  number)
       messages  to  the  server  (relay),  expecting  the same number of replies. The length of the messages is
       configurable.  The message is an arbitrary  octet  stream.   The  number  of  the  messages  to  send  is
       configurable.

       Flags:

       <b>-t</b>     Use TCP for communications between client and TURN server (default is UDP).

       <b>-b</b>     Use SCTP for communications between client and TURN server (default is UDP).

       <b>-T</b>     Use TCP for the relay transport (default - UDP). Implies <u>options</u> <b>-t</b>, <b>-y</b>, <b>-c</b>, and ignores flags and
              <u>options</u> <b>-s</b>, <b>-e</b>, <b>-r</b> and <b>-g</b>. Can be used together with <b>-b</b>.

       <b>-P</b>     Passive TCP (RFC6062 with active peer). Implies <b>-T</b>.

       <b>-S</b>     Secure SSL connection: SSL/TLS for TCP, DTLS for UDP, TLS/SCTP for SCTP.

       <b>-U</b>     Secure unencrypted connection (suite eNULL): SSL/TLS for TCP, DTLS for UDP.

       <b>-v</b>     Verbose.

       <b>-s</b>     Use "Send" method in TURN; by default, it uses TURN Channels.

       <b>-y</b>     Use  client-to-client connections: RTP/RTCP pair of channels to another RTP/RTCP pair of channels.
              with this option the <u>turnutils_peer</u> application is not used, as the allocated relay endpoints  are
              talking to each other.

       <b>-h</b>     Hang on indefinitely after the last sent packet.

       <b>-c</b>     Do not create rtcp connections.

       <b>-x</b>     Request IPv6 relay address (RFC6156).

       <b>-X</b>     IPv4 relay address explicitly requested.

       <b>-g</b>     Set DONT_FRAGMENT parameter in TURN requests.

       <b>-D</b>     Do mandatory channel padding even for UDP (like pjnath).

       <b>-N</b>     do negative tests (some limited cases only).

       <b>-R</b>     do negative protocol tests.

       <b>-O</b>     DOS attack mode.

       <b>-M</b>     Use TURN ICE Mobility.

       <b>-I</b>     Do  not  set  permissions  on  TURN  relay  endpoints  (for  testing the non-standard server relay
              functionality).

       <b>-G</b>     Generate extra requests (create permissions, channel bind).

       <b>-B</b>     Random disconnect after a few initial packets.

       <b>-Z</b>     Dual allocation (SSODA). Implies <b>-c</b> option.

       <b>-J</b>     Use oAuth with default test key kid='north'.

       Options with required values:

       <b>-l</b>     Message length (Default: 100 Bytes).

       <b>-i</b>     Certificate file (for secure connections only, optional).

       <b>-k</b>     Private key file (for secure connections only).

       <b>-E</b>     CA file for server certificate verification, if the server certificate to be verified.

       <b>-p</b>     <b>TURN</b> <b>Server</b> port (Defaults: 3478 unsecure, 5349 secure).

       <b>-n</b>     Number of messages to send (Default: 5).

       <b>-d</b>     Local interface device (optional, Linux only).

       <b>-L</b>     Local IP address (optional).

       <b>-m</b>     Number of clients (Default: 1, 2 or 4, depending on <u>options</u>).

       <b>-e</b>     Peer address.

       <b>-r</b>     Peer port (Default: 3480).

       <b>-z</b>     Per-session packet interval in milliseconds (Default: 20).

       <b>-u</b>     STUN/TURN user name.

       <b>-w</b>     STUN/TURN user password.

       <b>-W</b>     TURN REST API secret. The "plain text" secret e.g. "north" that is stored in the value  column  of
              the  turn_secret  table  in  the  database  if dynamic, or the static-auth-secret value set in the
              configuration file if using static.

       <b>-C</b>     This is the timestamp/username separator symbol (character) in TURN REST API. The default value is
              :.

       <b>-F</b>     Cipher suite for TLS/DTLS. Default value is DEFAULT.

       <b>-o</b>     the ORIGIN STUN attribute value.

       <b>-a</b>     Bandwidth for the bandwidth request in ALLOCATE. The default value is zero.

       See the examples in the "examples/scripts" directory.

</pre><h4><b>======================================</b></h4><pre>
   <b>NAME</b>
        <b>turnutils_peer</b> <b>-</b> <b>a</b> <b>simple</b> <b>UDP-only</b> <b>echo</b> <b>backend</b> <b>server.</b>

   <b>SYNOPSIS</b>
       $ <u>turnutils_peer</u> [<b>-v</b>] [<u>options</u>]

   <b>DESCRIPTION</b>
       This application is used for the test purposes only, as a peer for the <u>turnutils_uclient</u> application.

       Options with required values:

       <b>-p</b>     Listening UDP port (Default: 3480).

       <b>-d</b>     Listening interface device (optional)

       <b>-L</b>     Listening address of <u>turnutils_peer</u> server. Multiple listening addresses can  be  used,  IPv4  and
              IPv6.  If no listener <b>address</b>(es) defined, then it listens on all IPv4 and IPv6 addresses.

       <b>-v</b>     Verbose

</pre><h4><b>========================================</b></h4><pre>
   <b>NAME</b>
        <b>turnutils_stunclient</b> <b>-</b> <b>a</b> <b>basic</b> <b>STUN</b> <b>client.</b>

   <b>SYNOPSIS</b>
       $ <u>turnutils_stunclient</u> [<u>options</u>] &lt;STUN-Server-IP-address&gt;

   <b>DESCRIPTION</b>
       It sends a "new" STUN RFC 5389 request (over UDP) and shows the reply information.

       Options with required values:

       <b>-p</b>     STUN server port (Default: 3478).

       <b>-L</b>     Local address to use (optional).

       <b>-f</b>     Force RFC 5780 processing.

       The  <u>turnutils_stunclient</u>  program checks the results of the first request, and if it finds that the STUN
       server supports RFC 5780 (the binding response reveals that) then the <u>turnutils_stunclient</u> makes a couple
       more requests with different parameters, to demonstrate the NAT discovery capabilities.

       This utility does not support the "old" "classic" STUN protocol (RFC 3489).

</pre><h4><b>=====================================</b></h4><pre>
   <b>NAME</b>
        <b>turnutils_rfc5769check</b> <b>-</b> <b>a</b> <b>utility</b> <b>that</b> <b>tests</b> <b>the</b> <b>correctness</b> <b>of</b> <b>STUN</b> <b>protocol</b> <b>implementation.</b>

   <b>SYNOPSIS</b>
       $ <u>turnutils_rfc5769check</u>

   <b>DESCRIPTION</b>
       <u>turnutils_rfc5769check</u> tests the correctness of STUN protocol implementation  against  the  test  vectors
       predefined  in  RFC 5769 and prints the results of the tests on the screen. This utility is used only for
       the compilation check procedure, it is not copied to the installation destination.

       Usage:

       $ <u>turnutils_rfc5769check</u>

</pre><h4><b>=====================================</b></h4><pre>
   <b>NAME</b>
        <b>turnutils_natdiscovery</b> <b>-</b> <b>a</b> <b>utility</b> <b>that</b> <b>discovers</b> <b>NAT</b> <b>mapping</b> <b>and</b> <b>filtering</b> <b>behavior</b> <b>according</b> <b>RFC5780.</b>

   <b>SYNOPSIS</b>
       $ <u>turnutils_natdiscovery</u> [<u>options</u>] &lt;STUN-Server-FQDN-or-IP-address&gt;

   <b>DESCRIPTION</b>
       <u>turnutils_natdiscovery</u> discovers the NAT Mapping and Filtering behavior, to  determine  if  that  NAT  is
       currently  using Endpoint-Independent, Address-Dependent, or Address and Port-Dependent Mapping and/or to
       determine if that  NAT  is  currently  using  Endpoint-Independent,  Address-Dependent,  or  Address  and
       Port-Dependent Filtering.

       Use either <b>-m</b>, <b>-f</b>, <b>-c</b>, <b>-H</b> flag to discover NAT behavior.

       Flags:

       <b>-m</b>     NAT mapping behavior discovery

       <b>-f</b>     NAT filtering behavior discovery

       <b>-t</b>     NAT mapping lifetime behavior discovery Requires a timer (<b>-T</b>)

       <b>-c</b>     NAT collision behavior discovery

       <b>-H</b>     NAT hairpinning behavior discovery

       <b>-P</b>     Add  1500  byte  Padding to the behavior discovery Applicable with all except NAT mapping Lifetime
              discovery

       Options with required values:

       <b>-p</b>     STUN server port (Default: 3478)

       <b>-L</b>     Local address to use (optional)

       <b>-l</b>     Local port to use (use with <b>-L</b>)

       <b>-A</b>     Secondary Local address (optional) Required for collision discovery

       <b>-T</b>     Mapping lifetime timer (sec) Used by mapping lifetime behavior discovery

       Usage:

       $ <u>turnutils_natdiscovery</u> <b>-m</b> <b>-f</b> stun.example.com

</pre><h4><b>=====================================</b></h4><pre>
   <b>NAME</b>
        <b>turnutils_oauth</b> <b>-</b> <b>a</b> <b>utility</b> <b>that</b> <b>helps</b> <b>OAuth</b> <b>access_token</b> <b>generation/encryption</b> <b>and</b> <b>validation/decyption</b>

   <b>SYNOPSIS</b>
       $ <u>turnutils_oauth</u> [<u>options</u>]

   <b>DESCRIPTION</b>
       <u>turnutils_oauth</u> utilitiy provides help in OAuth  access_token  encryption  and/or  decryption  with  AEAD
       (Atuthenticated  Encryption  with Associated Data). It helps for an Auth Server in access_token creation,
       and also for debugging purposes it helps the access_token validation and decryption. This utility  inputs
       all the keys and lifetimes and any related information that are needed for encryption or decryption of an
       access_token.  It outputs a JSON with all OAuth PoP parameters that need to pass to the client. Output is
       generated accoriding RFC7635 Appendix B, Figure 8. This utility  could  help  to  build  an  Auth  Server
       service,  but  be  awere  that  this utility does not generate "session key" / "mac_key" and not verifies
       lifetime of "session key" / "mac_key" or  "Auth  key".   For  more  details,  and  for  the  access_token
       structure, read rfc7635, and see the example in examples/scripts/oauth.sh.

       Use either <b>-e</b> and/or <b>-d</b> flag to encrypt or decrypt access_token.

       Flags:

       <b>-h,</b> <b>--help</b>
              usage

       <b>-v,</b> <b>--verbose</b>
              verbose mode

       <b>-e,</b> <b>--encrypt</b>
              encrypt token

       <b>-d,</b> <b>--decrypt</b>
              decrypt validate token

       Options with required values:

       <b>-i,</b> <b>--server-name</b>
              server name (max. 255 char)

       <b>-j,</b> <b>--auth-key-id</b>
              Auth key id (max. 32 char)

       <b>-k,</b> <b>--auth-key</b>
              base64 encoded Auth key

       <b>-l</b>     <b>--auth-key-timestamp</b>       Auth key timestamp (sec since epoch)

       <b>-m,</b> <b>--auth-key-lifetime</b>
              Auth key lifetime in sec

       <b>-n,</b> <b>--auth-key-as-rs-alg</b>
              Authorization <b>Server</b>(AS) - Resource <b>Server</b>(RS) encryption algorithm

       <b>-o,</b> <b>--token-nonce</b>
              base64 encoded nonce <b>base64</b>(12 octet) = 16 char

       <b>-p,</b> <b>--token-mac-key</b>
              base64 encoded MAC key <b>base64</b>(32 octet) = 44 char

       <b>-q,</b> <b>--token-timestamp</b>
              timestamp  in  format 64 bit unsigned (Native format - Unix), so 48 bit for secs since epoch UTC +
              16 bit for 1/64000 fractions of a second.  e.g.: the actual unixtimestamp  16  bit  left  shifted.
              (Default: actual gmtime)

       <b>-r,</b> <b>--token-lifetime</b>
              lifetime in sec (Default: 3600)

       <b>-t,</b> <b>--token</b>
              base64 encoded encrypted token for validation and decryption

       <b>-u,</b> <b>--hmac-alg</b>
              stun client hmac algorithm

       Usage:

       $ <u>turnutils_natdiscovery</u>

</pre><h4><b>===================================</b></h4><pre>
</pre><h4><b>DOCS</b></h4><pre>
       After installation, run the command:

       $ man <u>turnutils</u>

       or in the project root directory:

       $ man <b>-M</b> man <u>turnutils</u>

       to see the man page.

</pre><h4><b>=====================================</b></h4><pre>
</pre><h4><b>FILES</b></h4><pre>
       /etc/turnserver.conf

       /var/db/turndb

       /usr/local/var/db/turndb

       /var/lib/turn/turndb

       /usr/local/etc/turnserver.conf

</pre><h4><b>=================================</b></h4><pre>
</pre><h4><b>DIRECTORIES</b></h4><pre>
       <a href="file:/usr/local/share/">/usr/local/share/</a><u>turnserver</u>

       /usr/local/share/doc/<u>turnserver</u>

       /usr/local/share/examples/<u>turnserver</u>

</pre><h4><b>===================================</b></h4><pre>
</pre><h4><b>STANDARDS</b></h4><pre>
       new STUN RFC 5389

</pre><h4><b>TURN</b> <b>RFC</b> <b>5766</b></h4><pre>
       TURN-TCP extension RFC 6062

       TURN IPv6 extension RFC 6156

       STUN/TURN test vectors RFC 5769

       STUN NAT behavior discovery RFC 5780

</pre><h4><b>====================================</b></h4><pre>
</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <u>turnserver</u>, <u>turnadmin</u>

</pre><h4><b>======================================</b></h4><pre>
   <b>WEB</b> <b>RESOURCES</b>
       project page:

       https://github.com/coturn/coturn/

       Wiki page:

       https://github.com/coturn/coturn/wiki

       forum:

       https://groups.google.com/forum/?fromgroups=#!forum/turn-server-project-rfc5766-turn-server/

</pre><h4><b>======================================</b></h4><pre>
   <b>AUTHORS</b>
       Oleg Moskalenko &lt;<a href="mailto:mom040267@gmail.com">mom040267@gmail.com</a>&gt;

       Gabor Kovesdan <a href="http://kovesdan.org/">http://kovesdan.org/</a>

       Daniel Pocock <a href="http://danielpocock.com/">http://danielpocock.com/</a>

       John Selbie (<a href="mailto:jselbie@gmail.com">jselbie@gmail.com</a>)

       Lee Sylvester &lt;<a href="mailto:lee@designrealm.co.uk">lee@designrealm.co.uk</a>&gt;

       Erik Johnston &lt;<a href="mailto:erikj@openmarket.com">erikj@openmarket.com</a>&gt;

       Roman Lisagor &lt;<a href="mailto:roman@demonware.net">roman@demonware.net</a>&gt;

       Vladimir Tsanev &lt;<a href="mailto:tsachev@gmail.com">tsachev@gmail.com</a>&gt;

       Po-sheng Lin &lt;<a href="mailto:personlin118@gmail.com">personlin118@gmail.com</a>&gt;

       Peter Dunkley &lt;<a href="mailto:peter.dunkley@acision.com">peter.dunkley@acision.com</a>&gt;

       Mutsutoshi Yoshimoto &lt;<a href="mailto:mutsutoshi.yoshimoto@mixi.co.jp">mutsutoshi.yoshimoto@mixi.co.jp</a>&gt;

       Federico Pinna &lt;<a href="mailto:fpinna@vivocha.com">fpinna@vivocha.com</a>&gt;

       Bradley T. Hughes &lt;<a href="mailto:bradleythughes@fastmail.fm">bradleythughes@fastmail.fm</a>&gt;

       Mihály Mészáros &lt;<a href="mailto:misi@majd.eu">misi@majd.eu</a>&gt;

   <b>ACTIVE</b> <b>MAINTAINERS</b>
       Mihály Mészáros &lt;<a href="mailto:misi@majd.eu">misi@majd.eu</a>&gt;

                                                  05 June 2021                                           <u><a href="../man1/TURN.1.html">TURN</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>