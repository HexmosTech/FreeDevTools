<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>penctl - control a running pen load balancer</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/pen">pen_0.34.1-3_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       penctl - control a running pen load balancer

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>penctl</b> host:port|/path/to/socket command

</pre><h4><b>EXAMPLE</b></h4><pre>
       penctl lbhost:8888 roundrobin

       Turns off client tracking on the load balancer running on lbhost.

       penctl /var/run/pen/tmp/ctrl status

       Prints status information in html format.

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <u>Penctl</u>  connects  to  the  optional  control  socket  on a pen load balancer.  It reads commands from the
       command line, performs minimal syntax checking and sends them to pen. Replies, if  any,  are  printed  on
       stdout.

       The  program  can  also be used through the cgi script penctl.cgi, which allows pen to be controlled from
       any web browser.

</pre><h4><b>OPTIONS</b></h4><pre>
       <u>host:port</u>
              Specifies a control port where the load balancer listens for commands.

</pre><h4><b>COMMANDS</b></h4><pre>
       <u>abort_on_error</u>
              Call abort() when a fatal error is encountered. This will create a core file which allows  further
              troubleshooting. Disabled by default.

       <u>no</u> <u>abort_on_error</u>
              Exit normally on fatal error with an error code which indicates failure.

       <u>acl</u> <u>N</u> <u>permit|deny</u> <u>sourceip4</u> <u>[mask]</u>
              Adds an entry to access list N, where N is a number from 0 to 9. The source and mask addresses are
              in the usual dotted quad notation. If mask is omitted, it defaults to 255.255.255.255.

       <u>acl</u> <u>N</u> <u>permit|deny</u> <u>sourceip6[/length]</u>
              If  the source address contains the character ':', the address is interpreted as IPv6. Unlike IPv4
              access entries, a length is used to indicate the mask. If length is omitted, it defaults to 128.

       <u>acl</u> <u>N</u> <u>permit|deny</u> <u>country</u> <u>NN</u>
              If the source address is the special word "country", a two-letter country  code  can  be  used  to
              restrict access to the load balancer. For this to work, pen must be built with geoip support.

       <u>no</u> <u>acl</u> <u>N</u>
              Deletes all entries from access list N. The resulting access list permits all traffic.

       <u>ascii</u>  Communication dumps in ascii format (cf option -a).

       <u>no</u> <u>ascii</u>
              Communication dumps in hex format.

       <u>blacklist</u>
              Return current blacklist time in seconds.

       <u>blacklist</u> <u>T</u>
              Set the blacklist time in seconds.

       <u>block</u>  Do not make sockets nonblocking. This is obsolete as of 0.26.0 and does nothing.

       <u>no</u> <u>block</u>
              Make sockets nonblocking.

       <u>client_acl</u> <u>N</u>
              Check connecting clients against access list N (default 0).

       <u>clients_max</u> <u>[N]</u>
              With argument, increase the maximum number of known clients. Returns max number of clients.

       <u>close</u> <u>N</u>
              Close connection N

       <u>connection</u> <u>N</u>
              Display some basic information about connection N.

       <u>conn_max</u> <u>[N]</u>
              With argument, increase the max number of simultaneous connections. Returns max number.

       <u>control</u>
              Return address and port where pen listens for control connections.

       <u>control_acl</u> <u>N</u>
              Check accesses to the control port against access list N (default 0).

       <u>debug</u>  Return current debug level.

       <u>debug</u> <u>N</u>
              Set debug level to N.

       <u>delayed_forward</u>
              Always  wait  for the next round of the main loop before forwarding data. Normally pen tries to do
              that immediately. This is obsolete as of 0.26.0 and does nothing.

       <u>no</u> <u>delayed_forward</u>
              Try to forward data immediately, to avoid the overhead of copying it to  a  temporary  buffer  and
              waiting for the next main loop round.

       <u>dsr_if</u> <u>IF</u>
              Use IF as the interface for Direct Server Return.

       <u>dummy</u>  Act  as  a  dummy web server with very limited functionality but high performance. Only useful for
              testing. Disabled by default.

       <u>no</u> <u>dummy</u>
              Do not act as a dummy web server.

       <u>epoll</u>  Use epoll for event management (Linux).  This is the default on Linux.

       <u>exit</u>   Exit. Only available if pen was started with the -X option.

       <u>hash</u>   Use a hash on the client IP address for initial server selection.

       <u>no</u> <u>hash</u>
              Do not use a hash.

       <u>http</u>   Add X-Forwarded-For headers to http requests.

       <u>no</u> <u>http</u>
              Do not add X-Forwarded-For headers.

       <u>idle_timeout</u> <u>N</u>
              Close connections that have been inactive for N seconds. Default 0 = never close.

       <u>idlers</u> <u>[N]</u>
              Create N reliable  idle  connections  to  the  backend  servers.  Without  argument,  display  the
              current/requested number of reliable idlers.

       <u>include</u> <u>FILE</u>
              Read commands from file.

       <u>kqueue</u> Use  kqueue  for  event management (FreeBSD, NetBSD, OpenBSD).  This is the default on the systems
              that have it.

       <u>listen</u> Return local address and port pen listens to for incoming client connections.

       <u>listen</u> <u>[address:]:port</u>
              Close the listening socket and reopen using specified address (optional) and port.

       <u>log</u>    Show where pen is logging, if anywhere.

       <u>log</u> <u>FILE</u>
              Log to FILE.

       <u>mode</u>   Write a summary of the current mode of operation. The listed  modes  are  block,  delayed_forward,
              hash, roundrobin, stubborn.

       <u>no</u> <u>log</u> Turn off logging.

       <u>pending_max</u> <u>N</u>
              Max allowed number of pending nonblocking connections. Default 100, minimum 1.

       <u>pid</u>    Return the process id of the running daemon.

       <u>poll</u>   Use poll for event management.

       <u>prio</u>   Use the priority based algorithm.

       <u>no</u> <u>prio</u>
              Do not use the priority based algorithm.

       <u>recent</u> <u>[N]</u>
              Shows which clients have connected in the last N seconds (default 300).

       <u>roundrobin</u>
              Use round-robin server selection without client tracking

       <u>no</u> <u>roundrobin</u>

       <u>select</u> Use select for event management.

       <u>server</u> <u>N</u> <u>[</u> <u>acl</u> <u>A</u> <u>|</u> <u>address</u> <u>A</u> <u>|</u> <u>port</u> <u>P</u> <u>|</u> <u>max</u> <u>M</u> <u>|</u> <u>hard</u> <u>H</u> <u>|</u> <u>blacklist</u> <u>T</u> <u>|</u> <u>weight</u> <u>W</u> <u>|</u> <u>prio</u> <u>P</u> <u>]</u>
              Change  acl,  address, port, weight, priority and/or max connections for server N, or blacklist it
              for T seconds.

       <u>servers</u>
              List address, port, weight, priority and max number of simultaneous connections  for  each  remote
              server.

       <u>socket</u> <u>N</u>
              Show to which connection socket N belongs.

       <u>source</u> <u>IP</u>
              Set the local address to IP for upstream connections, i.e. where Pen connects to backend servers.

       <u>ssl_ciphers</u> <u>CIPHERS</u>
              Choose    list    of   available   SSL   ciphers,   specified   in   the   format   described   in
              https://www.openssl.org/docs/apps/ciphers.html.

       <u>ssl_client_renegotiation_interval</u> <u>S</u>
              Allowing the client to request renegotiation is a potential denial of service vector. This command
              specifies the minimum number of seconds the client has to wait between requests for  renegotiation
              requests. Default 3600 = effectively disabled.

       <u>ssl_ocsp_response</u> <u>FILENAME</u>
              Specifies  the  location  of  a  file  containing  a  pre-fetched  OCSP response. The file must be
              refreshed regularly by a cron job or similar and the ssl_ocsp_response command  repeated  to  make
              Pen re-read the file..

       <u>ssl_option</u> <u>OPTION</u>
              Manipulate  SSL  options.  The  available  options  are  no_sslv2, no_sslv3, no_tlsv1, no_tlsv1.1,
              no_tlsv1.2, cipher_server_preference. Use the command multiple times to specify multiple options.

       <u>ssl_sni_path</u> <u>PATH</u>
              This command enables the Server Name Indication TLS extension  by  specifying  a  directory  where
              domain.key, domain.crt and domain.ca files can be found.

       <u>status</u> Print status information in html format.

       <u>stubborn</u>
              If the initial server selection is unavailable, close the client connection without trying another

       <u>no</u> <u>stubborn</u>

       <u>tarpit_acl</u> <u>[N]</u>
              Used in DSR mode. If N is an existing access list, Pen will reply to ARP requests for IP addresses
              that  match  the  access  list, and reply with SYN+ACK to TCP SYN requests to these addresses. The
              result is that someone trying to scan a network will be slowed down by a  large  number  of  false
              positives.

       <u>tcp_fastclose</u> <u>up|down|both|off</u>
              Close both sockets to upstream and downstream if one of them closes theirs. Default = off.

       <u>tcp_nodelay</u>
              Set TCP_NODELAY on sockets, effectively turning off the Nagle algorithm.

       <u>no</u> <u>tcp_nodelay</u>
              Do not set TCP_NODELAY on sockets. This is the default.

       <u>timeout</u>
              Return current connect timeout in seconds.

       <u>timeout</u> <u>N</u>
              Set connect timeout to N seconds.

       <u>tracking</u> <u>N</u>
              Set  tracking  time,  i.e.  how  long  clients will be remembered. The default 0 will never expire
              clients based on time.

       <u>transparent</u>
              On compatible platforms, use the client's address as source  address  in  the  connection  to  the
              backend server.

       <u>no</u> <u>transparent</u>
              Use Pen's address as source address in the connection to the backend server.

       <u>web_stats</u>
              Return file name of html status reports, if any.

       <u>web_stats</u> <u>FILE</u>
              Set the name of html status reports.

       <u>no</u> <u>web_stats</u>
              Do not generate html status reports.

       <u>weight</u> Use weight for server selection.

       <u>no</u> <u>weight</u>
              Do not use weight for server selection.

       <u>write</u> <u>[FILE]</u>
              Write  the  current  configuration into a file which can be used to start pen. If FILE is omitted,
              the configuration is written into pen's original configuration file.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <a href="../man1/pen.1.html">pen</a>(1)

</pre><h4><b>AUTHOR</b></h4><pre>
       Copyright (C) 2002-2015 Ulric Eriksson, &lt;<a href="mailto:ulric@siag.nu">ulric@siag.nu</a>&gt;.

                                                      LOCAL                                            <u><a href="../man1/PENCTL.1.html">PENCTL</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>