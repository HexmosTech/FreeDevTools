<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>pmprobe - lightweight probe for performance metrics</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/pcp">pcp_6.3.3-1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       <b>pmprobe</b> - lightweight probe for performance metrics

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>pmprobe</b>  [<b>-dfFiILvVz?</b>]  [<b>-a</b> <u>archive</u>] [<b>-b</b> <u>batchsize</u>] [<b>--container</b>=<u>name</u>] [<b>--derived</b>=<u>file</u>] [<b>-h</b> <u>hostname</u>] [<b>-K</b>
       <u>spec</u>] [<b>-n</b> <u>pmnsfile</u>] [<b>-O</b> <u>time</u>] [<b>-Z</b> <u>timezone</u>] [<u>metricname</u> ...]

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>pmprobe</b> determines the availability of  performance  metrics  exported  through  the  facilities  of  the
       Performance Co-Pilot (PCP).

       The  metrics  of interest are named in the <u>metricname</u> arguments.  If <u>metricname</u> is a non-leaf node in the
       Performance Metrics Name Space (<b><a href="../man5/PMNS.5.html">PMNS</a></b>(5)), then <b>pmprobe</b> will recursively descend the PMNS  and  report  on
       all leaf nodes.  If no <u>metricname</u> argument is given, the root of the namespace is used.

       This  recursive  expansion  of  the PMNS can be inhibited by the <b>-F</b> (go faster) option, which reduces the
       number of roundtrips to <b><a href="../man1/pmcd.1.html">pmcd</a></b>(1) when the <u>metricname</u> arguments are known to be leaf nodes ahead of time.

       The output format is spartan and intended for use in wrapper scripts  creating  configuration  files  for
       other  PCP tools.  By default, there is one line of output per metric, with the metric name followed by a
       count of the number of available values.  Error conditions are encoded as a negative value count (as  per
       the  <b><a href="../man3/PMAPI.3.html">PMAPI</a></b>(3)  protocols, but may be decoded using <b><a href="../man1/pmerr.1.html">pmerr</a></b>(1)) and followed by a textual description of the
       error.

       Unless directed to another host by the <b>-h</b> option, <b>pmprobe</b> will contact the Performance Metrics  Collector
       Daemon (PMCD) on the local host.

       The <b>-a</b> option causes <b>pmprobe</b> to use the specified set of archives rather than connecting to a PMCD.

       The  <b>-L</b>  option  causes  <b>pmprobe</b>  to  use a local context to collect metrics from PMDAs on the local host
       without PMCD.  Only some metrics are available in this mode.

       The <b>-a</b>, <b>-h</b> and <b>-L</b> options are mutually exclusive.

</pre><h4><b>OPTIONS</b></h4><pre>
       The available command line options are:

       <b>-a</b> <u>archive</u>, <b>--archive</b>=<u>archive</u>
            Performance metric values are retrieved from the set of Performance  Co-Pilot  (PCP)  archive  files
            identified  by  the <u>archive</u> argument, which is a comma-separated list of names, each of which may be
            the base name of an archive or the name of a directory containing one or more archives.

       <b>-b</b>, <b>--batch</b>
            This option may be used to define the maximum number of metrics to be fetched in  a  single  request
            for  the  <b>-v</b>  option  and  any <b><a href="../man3/pmLookupName.3.html">pmLookupName</a></b>(3) request that <b>pmprobe</b> calls with a list of leaf metric
            names.  The default value for <u>batchsize</u> is 128.  This option is useful to avoid limitations  on  PDU
            request  sizes and also to stagger fetches, which may otherwise timeout if <b><a href="../man1/pmcd.1.html">pmcd</a></b>(1) or a PMDA is slow
            to respond, particularly if a large number of metrics are probed.

       <b>--container</b>=<u>container</u>
            Specify an individual <u>container</u> to be queried.

       <b>-d</b>, <b>--version</b>
            Display version number and exit.

       <b>--derived</b>=<u>dmfile</u>
            The <u>dmfile</u> argument specifies a  file  that  contains  derived  metric  definitions  in  the  format
            described for <b><a href="../man3/pmLoadDerivedConfig.3.html">pmLoadDerivedConfig</a></b>(3).  This option provides a way to load derived metric definitions
            that  is  an  alternative  to the more generic use of the <b>PCP_DERIVED_CONFIG</b> environment variable as
            described in <b><a href="../man1/PCPIntro.1.html">PCPIntro</a></b>(1).   Using  the  <b>--derived</b>  option  and  the  <b>PCP_DERIVED_CONFIG</b>  environment
            variable to specify the <b>same</b> configuration is a bad idea, so choose one or the other method.

       <b>-f</b>, <b>--force</b>
            When  used  with  <b>-i</b> or <b>-I</b> the set of instances reported will be all of those known at the source of
            the performance data.  By default the set of reported instances  are  those  for  which  values  are
            currently available, which may be smaller than the set reported with <b>-f</b>.

       <b>-F</b>, <b>--faster</b>
            Assume given metric names are PMNS leaf nodes.

       <b>-h</b> <u>host</u>, <b>--host</b>=<u>host</u>
            Connect to <b><a href="../man1/pmcd.1.html">pmcd</a></b>(1) on <u>host</u>, rather than on the default localhost.

       <b>-i</b>, <b>--internal</b>
            Report the internal identifiers for each instance.  The values are in decimal and prefixed by ``?''.
            As a special case, the literal string <b>PM_IN_NULL</b> is reported for singular metrics.

       <b>-I</b>, <b>--external</b>
            Report  the  external  identifiers for each instance.  The literal string <b>PM_IN_NULL</b> is reported for
            singular metrics.

       <b>-K</b> <u>spec</u>, <b>--spec-local</b>=<u>spec</u>
            When using the <b>-L/</b> option to fetch metrics from a local context, this option controls the DSO  PMDAs
            that   should  be  made  accessible.   The  <u>spec</u>  argument  conforms  to  the  syntax  described  in
            <b><a href="../man3/pmSpecLocalPMDA.3.html">pmSpecLocalPMDA</a></b>(3).  More than one <b>-K</b> option may be used.

       <b>-L</b>, <b>--local-PMDA</b>
            Use a local context to collect metrics from DSO PMDAs on the local host without PMCD.  See also <b>-K</b>.

       <b>-n</b> <u>pmnsfile</u>, <b>--namespace</b>=<u>pmnsfile</u>
            Normally <b>pmprobe</b> operates on the distributed Performance Metrics Name Space (PMNS), however, if  the
            <b>-n</b> option is specified an alternative local PMNS file is loaded from the file <u>pmnsfile</u>.

       <b>-O</b> <u>time</u>, <b>--origin</b>=<u>time</u>
            When  used  in  conjunction with an archive source of metrics and the options <b>-f/</b>, the <u>time</u> argument
            defines a time origin at which the metrics should be fetched from the set  of  archives.   Refer  to
            <b><a href="../man1/PCPIntro.1.html">PCPIntro</a></b>(1) for a complete description of this option, and the syntax for the <u>time</u> argument.

       <b>-v</b>, <b>--values</b>
            Report  the  value for each instance, as per the formatting rules of <b><a href="../man3/pmPrintValue.3.html">pmPrintValue</a></b>(3).  When fetching
            from a set of archives, only those instances present in the first archive record for a  metric  will
            be  displayed; see also the <b>-O</b> option.  The <b>-v</b> option is mutually exclusive with either the <b>-I</b> or <b>-i</b>
            options.

       <b>-V</b>, <b>--verbose</b>
            This option provides a cryptic summary of the number of messages sent and received across the  PMAPI
            interface.

       <b>-z</b>, <b>--hostzone</b>
            Change  the  reporting  timezone  to  the  local  timezone  at  the  host  that is the source of the
            performance metrics, as identified via either the <b>-h</b> or <b>-a</b> options.

       <b>-Z</b> <u>timezone</u>, <b>--timezone</b>=<u>timezone</u>
            By default, <b>pmprobe</b> reports the time of day according to the local  timezone  on  the  system  where
            <b>pmprobe</b>  is  run.   The  <b>-Z</b> option changes the timezone to <u>timezone</u> in the format of the environment
            variable TZ as described in <b><a href="../man7/environ.7.html">environ</a></b>(7).

       <b>-?</b>, <b>--help</b>
            Display usage message and exit.

</pre><h4><b>EXAMPLES</b></h4><pre>
       $ pmprobe disk.dev
       disk.dev.read 2
       disk.dev.write 2
       disk.dev.total 2
       disk.dev.blkread 2
       disk.dev.blkwrite 2
       disk.dev.blktotal 2
       disk.dev.active 2
       disk.dev.response 2

       $ pmprobe -I disk.dev.read disk.dev.write disk.all.total
       disk.dev.read 2 "sda" "sdb"
       disk.dev.write 2 "sda" "sdb"
       disk.all.total 1 PM_IN_NULL

       $ pmprobe -v pmcd.numagents pmcd.version pmcd.control.timeout
       pmcd.numagents 1 9
       pmcd.version 1 "5.0.0"
       pmcd.control.timeout 1 5

       $ pmprobe -v disk.dev.total disk.all.total
       disk.dev.total -1012 Unknown metric name
       disk.all.total 1 4992466

</pre><h4><b>FILES</b></h4><pre>
       <u>$PCP_VAR_DIR/pmns/*</u>
            default PMNS specification files

</pre><h4><b>PCP</b> <b>ENVIRONMENT</b></h4><pre>
       Environment variables with the prefix <b>PCP_</b> are used to parameterize the file and directory names used  by
       PCP.   On  each  installation, the file <u>/etc/pcp.conf</u> contains the local values for these variables.  The
       <b>$PCP_CONF</b> variable may be used to specify an alternative configuration file, as described in <b><a href="../man5/pcp.conf.5.html">pcp.conf</a></b>(5).

       For environment variables affecting PCP tools, see <b><a href="../man3/pmGetOptions.3.html">pmGetOptions</a></b>(3).

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man1/PCPIntro.1.html">PCPIntro</a></b>(1),    <b><a href="../man1/pmcd.1.html">pmcd</a></b>(1),    <b><a href="../man1/pminfo.1.html">pminfo</a></b>(1),    <b><a href="../man1/pmlogdump.1.html">pmlogdump</a></b>(1),    <b><a href="../man3/PMAPI.3.html">PMAPI</a></b>(3),    <b><a href="../man3/pmErrStr.3.html">pmErrStr</a></b>(3),     <b><a href="../man3/pmGetOptions.3.html">pmGetOptions</a></b>(3),
       <b><a href="../man3/pmSpecLocalPMDA.3.html">pmSpecLocalPMDA</a></b>(3), <b><a href="../man5/pcp.conf.5.html">pcp.conf</a></b>(5), <b><a href="../man5/pcp.env.5.html">pcp.env</a></b>(5) and <b><a href="../man5/PMNS.5.html">PMNS</a></b>(5).

Performance Co-Pilot                                   PCP                                            <u><a href="../man1/PMPROBE.1.html">PMPROBE</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>