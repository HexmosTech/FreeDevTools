<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>pmlc - configure active Performance Co-Pilot pmlogger(s) interactively</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/pcp">pcp_6.3.3-1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       <b>pmlc</b> - configure active Performance Co-Pilot pmlogger(s) interactively

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>pmlc</b> [<b>-eiPz?</b>]  [<b>-h</b> <u>host</u>] [<b>-n</b> <u>pmnsfile</u>] [<b>-p</b> <u>port</u>] [<b>-Z</b> <u>timezone</u>] [<u>pid</u>]

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>pmlc</b>  may  be  used to change those metrics and instances which a <b><a href="../man1/pmlogger.1.html">pmlogger</a></b>(1) writes to a Performance Co-
       Pilot archive (see <b><a href="../man1/PCPIntro.1.html">PCPIntro</a></b>(1)), the frequency with which the  metrics  are  collected  and  whether  the
       logging  is  mandatory,  advisory,  on or off.  It also reports the current logging status of metrics and
       instances.  <b>pmlc</b> may be used to control pmlogger instances on remote hosts as well as those on the  local
       host.

       Normally <b>pmlc</b> operates on the distributed Performance Metrics Name Space (PMNS), however if the <b>-n</b> option
       is specified an alternative local PMNS is loaded from the file <u>pmnsfile</u>.

       If  the  <b>-P</b>  option is specified, <b>pmlc</b> will attempt to start with a connection to the primary pmlogger on
       the local host.  If the <b>-p</b> option is specified, then <b>pmlc</b> will attempt to start with a connection to  the
       pmlogger  on this TCP/IP <u>port</u>.  Alternatively, if <u>pid</u> is specified, a connection to the pmlogger instance
       with that process id will be attempted on startup.  The <b>-h</b> option may only be used if <b>-P,</b> <b>-p</b>  <u>port</u>  or  a
       <u>pid</u>  is  also  specified.   In  that  case <b>pmlc</b> will initially connect to the specified (remote) pmlogger
       instance on <u>host</u> rather than the local host.  If the connection to the specified pmlogger instance cannot
       be established, <b>pmlc</b> will start with no connection.  These options typically allow the same file of  <b>pmlc</b>
       commands  to be directed to multiple pmlogger instances by varying the command line arguments.  Note that
       <b>-P</b>, <b>-p</b> <u>port</u>, <u>pid</u> and <b>-h</b> are used only when making an initial connection to a pmlogger instance.  They are
       not used as defaults if subsequent connections are made interactively (see the <b>connect</b> command below).

       By default, <b>pmlc</b> reports the time of day according to the local timezone on the system where <b>pmlc</b> is run.
       The <b>-Z</b> option changes the timezone to <u>timezone</u> in the format of the environment variable <b>TZ</b> as  described
       in  <b><a href="../man7/environ.7.html">environ</a></b>(7).   The  <b>-z</b> option changes the timezone to the timezone of the pmlogger instance from which
       information is being obtained.  Only one of <b>-z</b> or <b>-Z</b> may be specified.

       If standard input is from a tty, <b>pmlc</b> is interactive, with prompts.  The <b>-i</b> flag may  be  used  to  force
       interactive  behavior, and is typically used in conjunction with <b>-e</b> to echo all command input on standard
       output.

</pre><h4><b>COMMANDS</b></h4><pre>
       The following commands may be used:

       <b>show</b> [ <b>loggers</b> ] [ <b>@</b><u>host</u> ]
           Displays the process identities of all pmlogger instances running on the  local  host  (or  <u>host</u>,  if
           specified).   The primary pmlogger pid is parenthesized because it can be referred to as "primary" as
           well as by its pid.

       <b>connect</b> <u>pid</u> [ <b>@</b><u>host</u> ]
       <b>connect</b> <b>primary</b> [ <b>@</b><u>host</u> ]
           Connects <b>pmlc</b> to the specified pmlogger process.  Any existing connection to a pmlogger  instance  is
           closed  first.   Each  pmlogger  instance  will  accept  at  most one connection at a time, so if the
           connection is successfully established, your <b>pmlc</b> will be  the  only  one  controlling  the  pmlogger
           instance it is connected to.

       <b>new</b> <b>volume</b>
           This  command  works  only  while  a  connection to a pmlogger instance is established.  It tells the
           pmlogger to close the current volume of the archive and open a new volume.   Closed  volumes  may  be
           compressed  and/or  moved  to  a remote system, remote storage or off-line storage, e.g. as part of a
           regular archive management procedure to control the size of the physical archive files on the  system
           where <b>pmlogger</b> is running.

       <b>status</b>
           This  command  works  only  while  a  connection  to  a  pmlogger instance is established.  It prints
           information about the state of the pmlogger instance and its associated archive.

       <b>timezone</b> <b>local</b> | <b>logger</b> | <b>"</b><u>timezone</u><b>"</b>
           This command sets the time zone used when times are printed.  <b>local</b> means use the time  zone  of  the
           machine  that  <b>pmlc</b>  is running on.  <b>logger</b> means use the time zone of the machine where the pmlogger
           instance is running.  Alternatively an explicit <u>timezone</u> enclosed in quotes may be supplied (refer to
           <b>TZ</b> in <b><a href="../man7/environ.7.html">environ</a></b>(7) for details).  The default time zone is <b>local</b> unless one of the <b>-z</b> or <b>-Z</b> options has
           been supplied on the command line.

       <b>flush</b>
           This command works only while a connection to a pmlogger instance is established,  and  requests  the
           pmlogger  instance to flush to disk all buffers associated with the current archive.  For old-timers,
           <b>sync</b> is a synonym for <b>flush</b>.  In current versions  of  <b><a href="../man1/pmlogger.1.html">pmlogger</a></b>(1)  all  writes  are  unbuffered  and
           aligned  with  the  logical  records  in the external files, so this command achieves nothing, but is
           retained for backwards compatibility.

       <b>disconnect</b>
           Disconnect <b>pmlc</b> from the current pmlogger instance, if any.

       <b>sleep</b> <u>delay</u>
           Pause <b>pmlc</b> for <u>delay</u> milliseconds.  This may be helpful in scripted uses of <b>pmlc</b> to allow the current
           pmlogger instance to make progress on recent requests before interrogating the status.

       <b>help</b>
           Displays a summary of the available commands.
           <b>h</b> and <b>?</b> are synonyms for <b>help</b>.

       <b>quit</b>
           Exits from <b>pmlc</b>.

       The remaining commands query and change the logging state of metrics and instances.  They will work  only
       if <b>pmlc</b> has a connection to a pmlogger instance.  Metrics may be specified as fully qualified names (e.g.
       hinv.ncpu)  or  subtrees of the PMNS (e.g. hinv) which are expanded to include all metrics in the subtree
       (e.g. hinv.ncpu, hinv.cpuclock, etc.).  Lists of metrics may be specified by  enclosing  them  in  braces
       with  spaces  or  a  comma  between  metrics  (e.g.  {hinv.ncpu hinv.ndisk}).  Subtrees of metrics may be
       included in such lists.

       Each individual metric specification may be further qualified with a space or  comma  separated  list  of
       instances  in square brackets (e.g. kernel.all.load["1 minute", "5 minute"]).  External instance names or
       numeric  internal   instance   identifiers   or   both   may   be   used   in   the   same   list   (e.g.
       sample.colour.[red,1,"blue"]).   If  an instance qualification is applied to a subtree of the PMNS all of
       the metrics in the subtree must have the same  instance  domain.   Instance  qualifications  may  not  be
       applied to entire lists of metrics but may appear inside such lists.

       If  no  instances  are specified for a metric, all instances are used.  All instances means all instances
       available at the time the pmlogger instance in question fetches the metrics for logging.  If an  instance
       domain changes over time this is not always the same as the set of instances displayed by <b>pmlc</b>, which can
       only display the currently available instances.  To prevent unintentional errors, only the instances that
       are currently available to <b>pmlc</b> may appear in instance specifications.

       <b>query</b> <u>metriclist</u>
           The  current  logging  state  of  each  metric  (and  instances,  where  applicable) in <u>metriclist</u> is
           displayed.  This includes the logging state (e.g. on, maybe, off) and the logging interval  for  each
           metric  (and  instance) requested.  The following abbreviations pertaining to metrics (and instances)
           may appear in the output: <b>adv</b>, advisory; <b>mand</b>, mandatory; <b>nl</b>, not logged (not in the archive); <b>na</b>, in
           the archive but not currently available from its Performance  Metrics  Domain  Agent  (PMDA).   Where
           appropriate,  an  instance  name will appear last on a line preceded by its numeric internal instance
           identifier.

       [ <b>log</b> ] <b>mandatory</b> <b>on</b> <u>interval</u> <u>metriclist</u>
           This form of the <b>log</b> command turns on logging for the metrics  (and  any  instances)  in  <u>metriclist.</u>
           <u>interval</u>  specifies  how often the specified metrics/instances should be logged.  <b>once</b> indicates that
           the metrics/instances should appear at most once in the  archive.   More  often  one  would  use  the
           optional  keyword  <b>every</b>  followed  by a positive number and one of <b>millisecond</b> (or <b>msec</b>), <b>second</b> (or
           <b>sec</b>), <b>minute</b> (or <b>min</b>), <b>hour</b> or their plurals.
           Note that the keyword  <b>default</b>  which  may  be  used  for  the  default  <u>interval</u>  in  a  <b><a href="../man1/pmlogger.1.html">pmlogger</a></b>(1)
           configuration file cannot be used in <b>pmlc</b>.
           Internal  limitations  require  the  <u>interval</u>  to be less than (approximately) 74 hours.  An <u>interval</u>
           value of zero is a synonym for <b>once</b>.

       [ <b>log</b> ] <b>mandatory</b> <b>off</b> <u>metriclist</u>
           This tells the pmlogger instance not to archive any of the metrics/instances in <u>metriclist</u>.

       [ <b>log</b> ] <b>mandatory</b> <b>maybe</b> <u>metriclist</u>
           This tells the  pmlogger  instance  to  honor  any  subsequent  advisory  logging  requests  for  the
           metrics/instances  in <u>metriclist</u>.  If the current logging state of the metrics/instances is mandatory
           (either on or off) the new state will be set to maybe (effectively advisory  off).   If  the  current
           state  of  the  metrics/instances  is  already  advisory  (either  on  or  off)  the state(s) for the
           metrics/instances will remain as they are.

       [ <b>log</b> ] <b>advisory</b> <b>on</b> <u>interval</u> <u>metriclist</u>
       [ <b>log</b> ] <b>advisory</b> <b>off</b> <u>metriclist</u>
           Advisory logging is only applicable if the last logging state specified  for  a  metric/instance  was
           "mandatory  maybe"  (which  permits  subsequent  advisory logging control) or if the logging state is
           already advisory.  These two statements turn advisory  logging  on  or  off  (respectively)  for  the
           specified metrics/instances.
           The interpretation for <u>interval</u> is as above for the <b>mandatory</b> case.

       There is no continuation character required for commands that span lines.

       The word <b>at</b> may be used interchangeably with <b>@</b>.

       A  request  to  archive  all  instances of a metric will supersede any prior request to log either all or
       specific instances of a metric (if the request specifies a permissible transition in the logging  state).
       A  request  to  archive  specific  instances of a metric when all instances of a metric are already being
       logged is refused by <b>pmlogger</b>.

</pre><h4><b>OPTIONS</b></h4><pre>
       The available command line options are:

       <b>-e</b>, <b>--echo</b>
            Echo all command input on standard output.

       <b>-h</b> <u>host</u>, <b>--host</b>=<u>host</u>
            Connect pmlogger on <u>host</u>, rather than on the default localhost.

       <b>-i</b>, <b>--interactive</b>
            Force interactive behavior.

       <b>-n</b> <u>pmnsfile</u>, <b>--namespace</b>=<u>pmnsfile</u>
            Load an alternative Performance Metrics Name Space (<b><a href="../man5/PMNS.5.html">PMNS</a></b>(5)) from the file <u>pmnsfile</u>.

       <b>-p</b> <u>port</u>, <b>--port</b>=<u>port</u>
            Connect to the primary pmlogger on TCP/IP port <u>port</u>.

       <b>-P</b>, <b>--primary</b>
            Connect to the primary pmlogger.

       <b>-z</b>, <b>--logzone</b>
            Use local time of the pmlogger as the reporting timezone.

       <b>-Z</b> <u>timezone</u>, <b>--timezone</b>=<u>timezone</u>
            Use <u>timezone</u> for the date and time.  <u>Timezone</u> is in the format of the  environment  variable  <b>TZ</b>  as
            described in <b><a href="../man7/environ.7.html">environ</a></b>(7).

       <b>-?</b>, <b>--help</b>
            Display usage message and exit.

</pre><h4><b>ACCESS</b> <b>CONTROL</b></h4><pre>
       <b>pmlc</b> may have restricted access to and control over <b><a href="../man1/pmlogger.1.html">pmlogger</a></b>(1) processes.

       If  a <b><a href="../man1/pmlogger.1.html">pmlogger</a></b>(1) is unable to export its control information to the local <b><a href="../man1/pmcd.1.html">pmcd</a></b>(1), then that <b><a href="../man1/pmlogger.1.html">pmlogger</a></b>(1)
       cannot cannot be connected to nor controlled by <b>pmlc</b>.  In practice, this means  the  <b><a href="../man1/pmlogger.1.html">pmlogger</a></b>(1)  process
       has  to  be  owned  by  the user ``pcp'' and/or the group ``pcp''.  If <b><a href="../man1/pmlogger.1.html">pmlogger</a></b>(1) is running on the host
       ``foo'' then use ``pminfo -f -h foo pmcd.pmlogger'' to verify that the <b><a href="../man1/pmlogger.1.html">pmlogger</a></b>(1) of interest  is  known
       to  <b><a href="../man1/pmcd.1.html">pmcd</a></b>(1),  alternatively  <b><a href="../man1/pmlogger.1.html">pmlogger</a></b>(1)  instances that are not reported from the <b>pmlc</b> <b>show</b> <b>loggers</b> <b>@foo</b>
       command are not known to <b><a href="../man1/pmcd.1.html">pmcd</a></b>(1) on the host ``foo''.

       If <b><a href="../man1/pmlogger.1.html">pmlogger</a></b>(1) is launched with a configuration file that contains an <b>[access]</b> section, then <b>pmlc</b> will be
       unable to connect to that <b><a href="../man1/pmlogger.1.html">pmlogger</a></b>(1) unless the access controls allow <b>some</b> access from  the  host  where
       <b>pmlc</b>  is being run.  Minimally this requires the <b>enquire</b> access to be permitted in the <b><a href="../man1/pmlogger.1.html">pmlogger</a></b>(1) access
       control section.

       If <b>pmlc</b> is able to connect to the <b><a href="../man1/pmlogger.1.html">pmlogger</a></b>(1) of  interest,  then  the  following  table  summarizes  the
       permissions needed to perform different <b>pmlc</b> commands:
                            ┌───────────────────┬───────────────────────────────────────┐
                            │   <b>pmlc</b> command    │       Required <b>pmlogger</b> access        │
                            ├───────────────────┼───────────────────────────────────────┤
                            │ <b>show</b> <b>loggers</b>      │ Any                                   │
                            │ <b>connect</b>           │ Any of <b>enquire</b>, <b>advisory</b> or <b>mandatory</b> │
                            │ <b>status</b>            │ Any of <b>enquire</b>, <b>advisory</b> or <b>mandatory</b> │
                            │ <b>query</b> ...         │ Any of <b>enquire</b>, <b>advisory</b> or <b>mandatory</b> │
                            │ <b>disconnect</b>        │ Any                                   │
                            │ <b>log</b> <b>advisory</b> ...  │ <b>advisory</b>                              │
                            │ <b>log</b> <b>mandatory</b> ... │ <b>mandatory</b>                             │
                            │ <b>new</b> <b>volume</b>        │ <b>mandatory</b>                             │
                            └───────────────────┴───────────────────────────────────────┘

</pre><h4><b>CAVEATS</b></h4><pre>
       If  all  instances  of  a  metric are being logged and a request is made to log specific instances of the
       metric with the same state and frequency, the request may appear to succeed,  even  though  <b>pmlogger</b>  has
       refused  the  request.   This is not normally a problem, as the required information will still be placed
       into the archive by <b>pmlogger</b>.

       However in the case where the metric is to be logged once, the outcome is not  what  might  be  expected.
       When  <b>pmlogger</b>  receives a request to archive a metric once, it places the current value(s) of the metric
       into the archive as soon as it can, regardless of whether the metric is already in the archive.  This may
       be used to force values into the archive.  When a request to  archive  specific  instances  of  a  metric
       arrives  and  is  refused because all instances of the metric are already being logged, <b>pmlogger</b> does not
       place values for the instances requested into the archive.  It returns the current logging state for each
       instance requested to <b>pmlc</b>.  The requested and returned states are identical, so <b>pmlc</b>  doesn't  raise  an
       error as it should.

       To  ensure  that  only certain instances of a metric are being logged, one should always turn off logging
       for all instances of the metric prior to turning on logging for the specific instances required.

</pre><h4><b>DIAGNOSTICS</b></h4><pre>
       Most error or warning messages are self-explanatory.  A message of the form
               Warning: unable to change logging state for...
       followed by a list of metrics (and possibly instances) indicates that <b>pmlogger</b> refused  the  request  for
       the  metrics  (and  instances)  that  appear.  Any metrics (and instances) that were specified but do not
       appear in the message have had their logging state updated successfully (no news is good news).   Usually
       this  warning  results  from requesting advisory logging when a mandatory control is already in place, or
       requesting logging for specific instances when all instances are already being logged.

</pre><h4><b>ENVIRONMENT</b></h4><pre>
       If the <b>PMLOGGER_REQUEST_TIMEOUT</b> environment variable is not set or set to 0 (zero), then <b>pmlc</b> will  block
       until a connection is established with <b><a href="../man1/pmlogger.1.html">pmlogger</a></b>(1) on the requested <u>port</u>.  If <b>PMLOGGER_REQUEST_TIMEOUT</b> is
       set  to  a  value  greater  than  zero,  then  <b>pmlc</b>  will fail with an error after that many seconds if a
       connection isn't established.  This may be used by administrative scripts such  as  <b><a href="../man1/pmlogger_daily.1.html">pmlogger_daily</a></b>(1)  to
       poll <b>pmlogger</b> when is starting up until it is ready and listening on it's control <u>port</u>.

</pre><h4><b>PCP</b> <b>ENVIRONMENT</b></h4><pre>
       Environment  variables with the prefix <b>PCP_</b> are used to parameterize the file and directory names used by
       PCP.  On each installation, the file <u>/etc/pcp.conf</u> contains the local values for  these  variables.   The
       <b>$PCP_CONF</b> variable may be used to specify an alternative configuration file, as described in <b><a href="../man5/pcp.conf.5.html">pcp.conf</a></b>(5).

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man1/PCPIntro.1.html">PCPIntro</a></b>(1), <b><a href="../man1/pmcd.1.html">pmcd</a></b>(1), <b><a href="../man1/pmlogdump.1.html">pmlogdump</a></b>(1), <b><a href="../man1/pmlogger.1.html">pmlogger</a></b>(1), <b><a href="../man5/pcp.conf.5.html">pcp.conf</a></b>(5), <b><a href="../man5/pcp.env.5.html">pcp.env</a></b>(5), <b><a href="../man5/PMNS.5.html">PMNS</a></b>(5) and <b><a href="../man7/environ.7.html">environ</a></b>(7).

Performance Co-Pilot                                   PCP                                               <u><a href="../man1/PMLC.1.html">PMLC</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>