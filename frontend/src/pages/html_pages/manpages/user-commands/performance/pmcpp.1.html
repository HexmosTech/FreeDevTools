<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>pmcpp - simple preprocessor for the Performance Co-Pilot</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/pcp">pcp_6.3.3-1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       <b>pmcpp</b> - simple preprocessor for the Performance Co-Pilot

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>pmcpp</b> [<b>-Prs?</b>]  [<b>-D</b> <u>name</u>[=<u>value</u>] ...]  [<b>-I</b> <u>dir</u> ...]  [[<u>infile</u>] [<u>outfile</u>]]

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>pmcpp</b>  provides  a very simple pre-processor originally designed for manipulating Performance Metric Name
       Space (PMNS) files for the Performance Co-Pilot (PCP),  but  later  generalized  to  provide  conditional
       blocks,  include  file  processing,  in-line shell command execution and macro substitution for arbitrary
       files.  It is most commonly used internally to process  the  PMNS  file(s)  after  <b><a href="../man3/pmLoadNameSpace.3.html">pmLoadNameSpace</a></b>(3)  or
       <b><a href="../man3/pmLoadASCIINameSpace.3.html">pmLoadASCIINameSpace</a></b>(3) is called and to pre-process the configuration files for <b><a href="../man1/pmlogger.1.html">pmlogger</a></b>(1).

       Input lines are read from <u>infile</u> (or standard input if <u>infile</u> is not specified), processed and written to
       <u>outfile</u> (standard output if <u>outfile</u> is not specified).

       All C-style comments of the form /* ... */ are stripped from the input stream.

       There  are no predefined macros for <b>pmcpp</b> although macros may be defined on the command line using the <b>-D</b>
       option, where <u>name</u> and <u>value</u> must follow the same rules as described below for the <b>#define</b> directive.

       <b>pmcpp</b> accepts the following directives in the input stream (like <b><a href="../man1/cpp.1.html">cpp</a></b>(1)):

       •  <b>#include</b> <b>"</b><u>filename</u><b>"</b>
          or
          <b>#include</b> <b>&lt;</b><u>filename</u><b>&gt;</b>
          In either case the directory search path for <u>filename</u> tries <u>filename</u> first, then the directory for the
          command line <u>infile</u> (if any), followed by any directories named in  <b>-I</b>  command  line  arguments,  and
          finally  the  <b>$PCP_VAR_DIR/pmns</b>  directory  (the  latter  is  for backwards compatibility with earlier
          versions of <b>pmcpp</b> and the implied used from  <b><a href="../man3/pmLoadASCIINameSpace.3.html">pmLoadASCIINameSpace</a></b>(3)).   <b>#include</b>  directives  may  be
          nested, up to a maximum depth of 5.

       •  <b>#shell</b> <b>"</b><u>command</u><b>"</b>
          or
          <b>#shell</b> <b>'</b><u>command</u><b>'</b>
          <b>The</b>  <b>shell</b>  <u>command</u> will be executed and the standard output is inserted into the stream of data to be
          processed by <b>pmcpp</b>.  Functionally this is similar to a <b>#include</b> directive, except input lines are read
          from a <u>command</u> rather than a file.  The <b>#shell</b> directive is most useful  for  including  or  excluding
          <b>#define</b> or <b>#undef</b> directives based on run-time logic in the <u>command</u>.

       •  <b>#define</b> <u>name</u> <u>value</u>
          or
          <b>#define</b> <u>name</u> <b>"</b><u>value</u><b>"</b>
          or
          <b>#define</b> <u>name</u> <b>'</b><u>value</u><b>'</b>
          Defines  a  value  for  the  macro  <u>name</u>  which must be a valid C-style name, so leading alphabetic or
          underscore followed by zero or more alphanumerics or underscores.  <u>value</u> is optional (and defaults  to
          an  empty  string).  There is no character escape mechanism, but either single quotes or double quotes
          may be used to define a  <u>value</u>  with  special  characters  or  embedded  horizontal  white  space  (no
          newlines).

       •  <b>#undef</b> <u>name</u>
          Removes the macro definition, if any, for <u>name</u>.

       •  <b>#ifdef</b> <u>name</u>
          ...
          <b>#endif</b>
          or
          <b>#ifndef</b> <u>name</u>
          ...
          <b>#endif</b>
          The enclosing lines will be stripped or included, depending if the macro <u>name</u> is defined or not.

       •  <b>#else</b>
          Within  a  <b>#ifdef</b> or <b>#ifndef</b> block, <b>#else</b> may be used to delimit lines to be included if the preceding
          ``if'' condition is false.

       Macro substitution is achieved by breaking the input stream  into  words  separated  by  white  space  or
       characters  that  are  not valid in a macro name, i.e. not alphanumeric and not underscore.  Each word is
       checked and if it matches a macro name, the word is replaced by the macro value, otherwise  the  word  is
       unchanged.

       There  is  generally  one output line for each input line, although the line may be empty if the text has
       been stripped due to the handling of comments or conditional directives.  When there is a change  in  the
       input stream, an additional output line is generated of the form:

                 # lineno "filename"

       to indicate the <u>following</u> line of output corresponds to line number <u>lineno</u> of the input file <u>filename</u>.

</pre><h4><b>OPTIONS</b></h4><pre>
       The available command line options are:

       <b>-D</b> <u>name[=value]</u>, <b>--define</b>=<u>name[=value]</u>
            Defines a macro with an optional value, as described earlier.

       <b>-I</b> <u>dir</u>, <b>--include</b>=<u>dir</u>
            An additional directory to search for include files.

       <b>-P</b>   Suppresses the generation of the linemarker lines, described above.

       <b>-s</b>, <b>--shell</b>
            Changes  the  expected  input  style  from C-like to shell-like (where # is a comment prefix).  This
            forces the following changes in <b>pmcpp</b> behaviour:
            •  The control prefix character changes from <b>#</b> to <b>%</b>, so for example <b>%include</b>  instead  of  <b>#include</b>,
               and <b>%ifdef</b> instead of <b>#ifdef</b>.
            •  No C-style comment stripping is performed.

       <b>-r</b>, <b>--restrict</b>
            Provide  finer  control  of macro expansion - this option restricts macro substitution to words that
            match the patterns <b>#</b>name or <b>#{</b>name<b>}</b> or if <b>-s</b> is specified, then <b>%</b>name or <b>%{</b>name<b>}</b>.  In this mode, the
            macro <u>name</u> alone in the input stream will never be expanded, however in control lines (like  <b>#ifdef</b>)
            the  macro  <u>name</u> should appear alone with out the prefix character or the curly braces (refer to the
            EXAMPLES below).

       <b>-?</b>, <b>--help</b>
            Display usage message and exit.

       Important <b><a href="../man1/cpp.1.html">cpp</a></b>(1) features that are <b>not</b> supported by <b>pmcpp</b> include:
       •  Macros with parameters - the <b>pmcpp</b> macros support only parameterless string substitution.
       •  <b>#if</b> <u>expr</u>
          ...
          <b>#endif</b>
       •  Nested use of <b>#ifdef</b> or <b>#ifndef</b>.
       •  Stripping C++ style comments, as in // comment.
       •  Error recovery - the first error encountered by <b>pmcpp</b> will be fatal.
       •  <b><a href="../man1/cpp.1.html">cpp</a></b>(1) command line options like <b>-o</b>, <b>-W</b>, <b>-U</b>, and <b>-x</b>.

</pre><h4><b>EXAMPLES</b></h4><pre>
       ┌──────────────────────────────────────────────┐
       │ Command: <b>pmcpp</b>                               │
       ├────────────────────────┬─────────────────────┤
       │ <b>Input</b>                  │ <b>Output</b>              │
       ├────────────────────────┼─────────────────────┤
       │                        │ # 1 "&lt;stdin&gt;"       │
       │ #define MYDOMAIN 27    │                     │
       │                        │                     │
       │ root {                 │ root {              │
       │     foo   MYDOMAIN:0:0 │    foo   27:0:0     │
       │ }                      │ }                   │
       └────────────────────────┴─────────────────────┘

       For the following examples, the file <u>frequencies</u> contains the lines:
               %define dk_freq 1minute
               %define cpu_freq '15 sec'

       ┌────────────────────────────────────────────────────────────────────┐
       │ Command: <b>pmcpp</b> <b>-rs</b>                                                 │
       ├───────────────────────────────────┬────────────────────────────────┤
       │ <b>Input</b>                             │ <b>Output</b>                         │
       ├───────────────────────────────────┼────────────────────────────────┤
       │ # get logging frequencies         │ # get logging frequencies      │
       │ # e.g. dk_freq macro              │ # e.g. dk_freq macro           │
       │ %include "frequencies"            │                                │
       │                                   │                                │
       │ log mandatory on %dk_freq {       │ log mandatory on 1minute {     │
       │     disk.dev                      │    disk.dev                    │
       │ }                                 │ }                              │
       │                                   │                                │
       │ # note no %want_cpu here          │ # note no %want_cpu here       │
       │ %ifdef want_cpu                   │                                │
       │ %define cpu_pfx 'kernel.all.cpu.' │                                │
       │ log mandatory on %cpu_freq {      │                                │
       │     %{cpu_pfx}user                │                                │
       │     %{cpu_pfx}sys                 │                                │
       │ }                                 │                                │
       │ %endif                            │                                │
       └───────────────────────────────────┴────────────────────────────────┘

       ┌───────────────────────────────────────────────────────────────────┐
       │ Command: <b>pmcpp</b> <b>-rs</b> <b>-D</b> <b>want_cpu</b>                                    │
       ├───────────────────────────────────┬───────────────────────────────┤
       │ <b>Input</b>                             │ <b>Output</b>                        │
       ├───────────────────────────────────┼───────────────────────────────┤
       │ # get logging frequencies         │ # get logging frequencies     │
       │ # e.g. dk_freq macro              │ # e.g. dk_freq macro          │
       │ %include "frequencies"            │                               │
       │                                   │                               │
       │ log mandatory on %dk_freq {       │ log mandatory on 1min {       │
       │     disk.dev                      │    disk.dev                   │
       │ }                                 │ }                             │
       │                                   │                               │
       │ # note no %want_cpu here          │ # note no %want_cpu here      │
       │ %ifdef want_cpu                   │                               │
       │ %define cpu_pfx 'kernel.all.cpu.' │                               │
       │ log mandatory on %cpu_freq {      │ log mandatory on 15 sec {     │
       │     %{cpu_pfx}user                │    kernel.all.cpu.user        │
       │     %{cpu_pfx}sys                 │    kernel.all.cpu.sys         │
       │ }                                 │ }                             │
       │ %endif                            │                               │
       └───────────────────────────────────┴───────────────────────────────┘

</pre><h4><b>PCP</b> <b>ENVIRONMENT</b></h4><pre>
       Environment variables with the prefix <b>PCP_</b> are used to parameterize the file and directory names used  by
       PCP.   On  each  installation, the file <u>/etc/pcp.conf</u> contains the local values for these variables.  The
       <b>$PCP_CONF</b> variable may be used to specify an alternative configuration file, as described in <b><a href="../man5/pcp.conf.5.html">pcp.conf</a></b>(5).

       For environment variables affecting PCP tools, see <b><a href="../man3/pmGetOptions.3.html">pmGetOptions</a></b>(3).

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man1/cpp.1.html">cpp</a></b>(1), <b><a href="../man3/pmLoadASCIINameSpace.3.html">pmLoadASCIINameSpace</a></b>(3), <b><a href="../man3/pmLoadNameSpace.3.html">pmLoadNameSpace</a></b>(3), <b><a href="../man5/pcp.conf.5.html">pcp.conf</a></b>(5), <b><a href="../man5/pcp.env.5.html">pcp.env</a></b>(5) and <b><a href="../man5/PMNS.5.html">PMNS</a></b>(5).

Performance Co-Pilot                                                                                    <u><a href="../man1/PMCPP.1.html">PMCPP</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>