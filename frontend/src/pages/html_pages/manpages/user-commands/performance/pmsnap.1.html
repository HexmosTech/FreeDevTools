<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>pmsnap - generate performance summary snapshot images</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/pcp-gui">pcp-gui_6.3.3-1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       <b>pmsnap</b> - generate performance summary snapshot images

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>$PCP_BINADM_DIR/pmsnap</b> [<b>-NV?</b>]  [<b>-c</b> <u>configs</u>] [<b>-C</b> <u>dir</u>] [<b>-f</b> <u>format</u>] [<b>-n</b> <u>names</u>] [<b>-o</b> <u>dir</u>]

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>pmsnap</b>  is a shell script that is normally run periodically from <b><a href="../man1/crontab.1.html">crontab</a></b>(1) to generate graphic images of
       <b><a href="../man1/pmchart.1.html">pmchart</a></b>(1) performance charts.  These images can be in any of the supported  <b>pmchart</b>  formats,  including
       <u>png</u>, <u>bmp</u>, and <u>jpeg</u>, and may be incorporated into the content offered by the local web server.  By default
       <b>pmsnap</b> generates no textual output unless some error or warning condition is encountered.

       <b>pmsnap</b>  generates images according to its control file, <b>$PCP_PMSNAPCONTROL_PATH</b> (or <b>dir/control</b> if the <b>-C</b>
       option is specified), and uses archives created by <b><a href="../man1/pmlogger.1.html">pmlogger</a></b>(1) or PCP archive folios created by  <b><a href="../man1/pmafm.1.html">pmafm</a></b>(1)
       and  <b><a href="../man1/pmlogger_check.1.html">pmlogger_check</a></b>(1).   Before attempting to configure <b>pmsnap</b>, it is strongly recommended that <b>pmlogger</b>
       be configured according to the descriptions in <b><a href="../man1/pmlogger_daily.1.html">pmlogger_daily</a></b>(1), <b><a href="../man1/pmlogger_check.1.html">pmlogger_check</a></b>(1) and <b><a href="../man1/pmlogger.1.html">pmlogger</a></b>(1).

       Once <b>pmlogger</b> has been configured, it is necessary to configure <b>pmsnap</b> as follows;

       1.     Edit the control file <b>$PCP_PMSNAPCONTROL_PATH</b>.  The syntax  of  this  file  is  described  in  the
              comment  at  the  head  of  the  file and an example is supplied for one and twelve hour "Summary"
              performance charts for the local host.  Suitable arguments for <b>pmchart</b> are also described  in  the
              comment.   The  user should consult <b>pmchart</b> for further details.  Note that when <b>pmsnap</b> is run, it
              globally substitutes the string <b>LOCALHOSTNAME</b> with the name of the local host in the control file.

       2.     Test the configuration by running
                                                   <b>$PCP_BINADM_DIR/pmsnap</b>.
              Without any arguments <b>pmsnap</b> will process every non-comment line in <b>$PCP_PMSNAPCONTROL_PATH</b>.   The
              output  images  will  be  placed in the files named in the first field of each line in the control
              file, with the file format appended if necessary.  If these file names do not start with  <b>/</b>  or  <b>.</b>
              then  they  are  assumed relative to <u>dir</u>, as specified with the <b>-o</b> option.  The default <u>dir</u> is the
              current directory.  Note that if <b>pmlogger</b> has only been recently started (within about the last 15
              minutes), snapshot images may not be produced and no error messages will be issued - the reason is
              that <b>pmchart</b> can not use very short  archives  and  hence,  neither  can  <b>pmsnap</b>.   For  debugging
              purposes the <b>-V</b> flag should be used.

       3.     Add  an  appropriate  entry  for  <b>pmsnap</b>  in  the  <b>root</b> user's <b>crontab</b>.  An example is supplied in
              <b>$PCP_VAR_DIR/config/pmlogger/crontab</b>.

       4.     Incorporate the <b>pmsnap</b> images into the local WWW content.  Usually, WWW pages use images that  are
              relative  to  a  particular  document  root,  so it is often convenient to use the <b>-o</b> command line
              option to specify a sub-directory of the local WWW content, and then create a  web  page  in  this
              directory  that  shows  the  snapshot  images with text and other content appropriate to the local
              environment.

       A    sample    HTML    page,    suitable    for    the    Summary    snapshot    may    be    found    in
       <b>$PCP_VAR_DIR/config/pmsnap/Summary.html</b>.

       Although  <b>pmsnap</b>  attempts  to  flush  <b><a href="../man3/stdio.3.html">stdio</a></b>(3)  output buffers in the relevant <b>pmlogger</b> processes before
       generating snapshots images, this may fail for assorted reasons and no error message will be given.

       <b>pmsnap</b> should not be invoked immediately after  <b>pmlogger_daily</b>  has  rolled  the  logs  because  the  new
       archives will be too short to obtain meaningful results.  Note however that <b>pmsnap</b> will not report errors
       from <b>pmchart</b> about not being able to comply with the <b>-A</b> option on very short archives.  In these cases no
       error will be reported and no output images will be produced.

</pre><h4><b>OPTIONS</b></h4><pre>
       The available command line options are:

       <b>-c</b> <u>config-pattern</u>
            Only  process  lines  in  the  control file which match the <u>config-pattern</u> regular expression in the
            <b>Config</b> column.

       <b>-C</b> <u>dir</u>
            The <b>control</b> file is located in the directory <u>dir</u> rather than in the default  <b>$PCP_PMSNAPCONTROL_PATH</b>
            location.

       <b>-f</b> <u>format</u>
            Set output image format.  The defaults format is <b>png</b>.

       <b>-n</b> <u>name-pattern</u>
            Only  process  lines  in  the  control  file  which  match  the <u>name-pattern</u> regular expression (see
            <b><a href="../man1/egrep.1.html">egrep</a></b>(1)) in the <b>Name</b> column.

       <b>-N</b>   Enable a ``show me'' mode, where the actions are echoed, but not executed, in the  style  of  ``make
            -n''.  Using <b>-N</b> in conjunction with <b>-V</b> maximizes the diagnostic capabilities for debugging.

       <b>-o</b> <u>dir</u>
            The  output  images  having file names which do not start with <b>/</b> or <b>.</b>  will be placed in a directory
            relative to <u>dir</u>, otherwise the output directory is relative  to  the  current  directory  (i.e.  the
            default  value for <u>dir</u> is <b>./</b>).  Note that <u>dir</u> must be a writable directory path and may be on an NFS
            or CIFS file system.

       <b>-V</b>   Enable verbose mode.

       <b>-?</b>   Display usage message and exit.

       When either <b>-n</b> or <b>-c</b> are used, <b>pmsnap</b> will only process lines in the control file  which  match  all  the
       supplied  patterns.   If  no patterns are given, then all lines will be processed.  These arguments allow
       multiple entries for <b>pmsnap</b> in <b>crontab</b> so that different performance summary images can be  generated  at
       different times or with different frequencies.

</pre><h4><b>FILES</b></h4><pre>
       <u>$PCP_PMSNAPCONTROL_PATH</u>
            <b>pmsnap</b> control file

       <u>$PCP_VAR_DIR/config/pmsnap/Summary</u>
            summary view for <b>pmchart</b>

       <u>$PCP_VAR_DIR/config/pmsnap/Summary.html</u>
            sample HTML page for summary snapshot

       <u>$PCP_LOG_DIR/pmlogger/&lt;hostname&gt;/Latest</u>
            PCP archive folio for the host <u>hostname</u>, as generated by <b>pmlogger_check</b>

       <u>$PCP_VAR_DIR/config/pmlogger/crontab</u>
            example <b>crontab</b> entry

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man1/cron.1.html">cron</a></b>(1), <b><a href="../man1/crontab.1.html">crontab</a></b>(1), <b><a href="../man1/egrep.1.html">egrep</a></b>(1), <b><a href="../man1/pmafm.1.html">pmafm</a></b>(1), <b><a href="../man1/pmchart.1.html">pmchart</a></b>(1), <b><a href="../man1/pmlc.1.html">pmlc</a></b>(1), <b><a href="../man1/pmlogger.1.html">pmlogger</a></b>(1) and <b><a href="../man1/pmlogger_daily.1.html">pmlogger_daily</a></b>(1).

Performance Co-Pilot                                                                                   <u><a href="../man1/PMSNAP.1.html">PMSNAP</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>