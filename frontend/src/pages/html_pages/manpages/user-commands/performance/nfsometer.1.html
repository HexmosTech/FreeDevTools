<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>nfsometer - NFS performance measurement tool</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/nfsometer">nfsometer_1.9-3.1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       nfsometer - NFS performance measurement tool

</pre><h4><b>SYNOPSIS</b></h4><pre>
       nfsometer [options] [mode] [[&lt;server:path&gt;] [workloads...]]

</pre><h4><b>DESCRIPTION</b></h4><pre>
       nfsometer  is  a performance measurement framework for running workloads and reporting results across NFS
       protocol versions, NFS options and Linux NFS client implementations

</pre><h4><b>MODES</b></h4><pre>
       Basic usage (no mode specified):

        <b>nfsometer</b> <b>&lt;server:path&gt;</b> <b>[workloads...]</b>

         This will fetch needed files, run traces, and generate reports,
         same as running the the 'fetch', 'trace' and 'report' stages.

       Advanced usage (specify modes):

        <b>nfsometer</b> <b>list</b>

           List the contents of the results directory.

        <b>nfsometer</b> <b>workloads</b>

           List available and unavailable workloads.

        <b>nfsometer</b> <b>notes</b>

           Edit the notes file of the results directory. These notes will
           be displayed in report headers.

        <b>nfsometer</b> <b>loadgen</b> <b>&lt;server:path&gt;</b> <b>&lt;workload&gt;</b>

           Run in loadgen mode: don't record any stats, just loop over
           &lt;workload&gt; against &lt;server:path&gt;.  Only one -o option is allowed.
           Use the -n option to run multuple instances of the loadgen workload.
           When running more than one instance, the intial start times are
           staggered.

        <b>nfsometer</b> <b>fetch</b> <b>[workloads...]</b>

           Fetch all needed files for the specified workload(s).  If no
           workloads are specified, all workloads are fetched.
           Fetched files are only downloaded once and are cached for
           future runs.

        <b>nfsometer</b> <b>trace</b> <b>&lt;server:path&gt;</b> <b>[workloads...]</b>

           Run traces against &lt;server:path&gt;.  The traces run will be:
           (options + always options + tags) X (workloads) X (num runs)
           This will only run traces that don't already exist in the results
           directory.

        <b>nfsometer</b> <b>report</b>

           Generate all reports available from the results directory.

        <b>nfsometer</b> <b>example</b>

           Show examples from man page

</pre><h4><b>OPTIONS</b></h4><pre>
        <b>-r</b> <b>&lt;dir&gt;</b>, <b>--resultdir=&lt;dir&gt;</b>
            The directory used to save results.  default: '/root/nfsometer_results'

        <b>-o</b> <b>&lt;mount.nfs</b> <b>options&gt;</b>, <b>--options=&lt;mount.nfs</b> <b>options&gt;</b>
            Mount options to iterate through.  This option may be used multiple times.  Each mount  option  must
            have a version specified.

        <b>-a</b> <b>&lt;mount.nfs</b> <b>options&gt;</b>, <b>--always-options=&lt;mount.nfs</b> <b>options&gt;</b>
            Options added to every trace.  This option may be used multiple times.

        <b>-t</b> <b>&lt;tags&gt;</b>, <b>--tag=&lt;tags&gt;</b>
            Tag all new traces with 'tags'.  This option may be used multiple times.

        <b>-n</b> <b>&lt;num</b> <b>runs&gt;</b>, <b>--num-runs=&lt;num</b> <b>runs&gt;</b>
            Number of runs for each trace of &lt;options&gt; X &lt;tags&gt; X &lt;workloads&gt; default: 1

        <b>--serial-graphs</b>
            Generate graphs inline while generating reports.  Useful for debugging graphing issues.

        <b>--rand</b>
            Randomize the order of traces

        <b>-h</b>, <b>--help</b>
            Show the help message

</pre><h4><b>EXAMPLES</b></h4><pre>
       Example 1: See what workloads are available

         <b>$</b> <b>nfsometer</b> <b>workloads</b>

         This command lists available workloads and will tell you why
         workloads are unavailable (if any exist).

       Example 2: Compare cthon, averaged over 3 runs,
                  across nfs protocol versions

          <b>nfsometer</b> <b>-n</b> <b>3</b> <b>server:/export</b> <b>cthon</b>

         This example uses the default for -o: "-o v3 -o v4 -o v4.1".
         To see the results, open results/index.html in a web browser.

       Example 3: Compare cthon, averaged over 3 runs,
                  between v3 and v4.0 only

         <b>nfsometer</b> <b>-n</b> <b>3</b> <b>-o</b> <b>v3</b> <b>-o</b> <b>v4</b> <b>server:/export</b> <b>cthon</b>

         This example specifies v3 and v4 only.
         To see the results, open results/index.html in a web browser.

       Example 4: Compare two kernels running iozone workload, averaged
                  over 2 runs, across all nfs protocol versions

         nfsometer can compare two (or more) kernel versions, but
         has no way of building, installing or booting new kernels.
         It's up to the user to install new kernels.
         In order for these kernels to be differentiated, 'uname -a'
         must be different.

          1) boot into kernel #1

          2) <b>nfsometer</b> <b>-n</b> <b>2</b> <b>server:/export</b> <b>iozone</b>

          3) boot into kernel #2

          4) <b>nfsometer</b> <b>-n</b> <b>2</b> <b>server:/export</b> <b>iozone</b>

          5) open results/index.html in a web browser

         To see the results, open results/index.html in a web browser.

       Example 5: Using tags

         Tags (the -t option) can be used to mark nfsometer runs as
         occurring with some configuration not captured by mount options
         or detectable tags, such as different sysctl settings (client side),
         different server side options, or different network conditions.

         1) set server value foo to 2.3

         2) <b>nfsometer</b> <b>-o</b> <b>v4</b> <b>-o</b> <b>v4.1</b> <b>-t</b> <b>foo=2.3</b>

         3) set server value foo to 10

         4) <b>nfsometer</b> <b>-o</b> <b>v4</b> <b>-o</b> <b>v4.1</b> <b>-t</b> <b>foo=10</b>

         What is passed to -t is entirely up to the user - it will not be
         interpreted or checked by nfsometer at all, so be careful!

         To see the results, open results/index.html in a web browser.

       Example 6: Always options

         The -o flag specifies distinct option sets to run, but sometimes
         there are options that should be present in each.  Instead of
         writing each one out, you can use the -a option:

         <b>nfsometer</b> <b>-o</b> <b>v3</b> <b>-o</b> <b>v4</b> <b>-a</b> <b>sec=krb5</b> <b>server:/export</b> <b>iozone</b>

         this is equivalent to:

         <b>nfsometer</b> <b>-o</b> <b>v3,sec=krb5</b> <b>-o</b> <b>v4,sec=krb5</b> <b>server:/export</b> <b>iozone</b>

       Example 7: Using the "custom" workload

         A main use case of nfsometer is the "custom" workload - it allows
         the user to specify the command that nfsometer is to run.

         NOTE: the command's cwd (current working directory) is the runroot
               created on the server.

         <b>export</b> <b>NFSOMETER_CMD="echo</b> <b>foo</b> <b>&gt;</b> <b>bar"</b>
         <b>export</b> <b>NFSOMETER_NAME="echo"</b>
         <b>export</b> <b>NFSOMETER_DESC="Writes</b> <b>4</b> <b>bytes</b> <b>to</b> <b>a</b> <b>file"</b>
         <b>nfsometer</b> <b>server:/export</b> <b>custom</b>

         This will run 3 traces (v3, v4, v4.1) against server:/export of
         the command: <b>echo</b> <b>foo</b> <b>&gt;</b> <b>bar</b>.

       Example 8: Using the loadgen mode

        Loadgen runs several instances of a workload without capturing
        traces. The idea is that you use several clients to generate
        load, then another client to measure performance of a loaded
        server. The "real" run of nfsometer (not loadgen) should mark
        the traces using the -t option.

        1) On client A, run the cthon workload to get a baseline of
           a server without any load.

          <b>nfsometer</b> <b>trace</b> <b>server:/export</b> <b>cthon</b>

        2) When that's done, start loadgen on client B:

          <b>nfsometer</b> <b>-n</b> <b>10</b> <b>loadgen</b> <b>server:/export</b> <b>dd_100m_1k</b>

           This runs 10 instances of dd_100m_1k workload on server:/export.
           It can take several minutes to start in an attempt to stagger
           all the workload instances.

        3) once all instances are started, run the "real" nfsometer
           trace on client A.  Use the -t option to mark the traces
           as having run under load conditions:

          <b>nfsometer</b> <b>-t</b> <b>"10_dd"</b> <b>trace</b> <b>server:/export</b> <b>cthon</b>

        4) Explain how the tests were set up in the result notes.
           This should be run on client A (which has the traces:

          <b>nfsometer</b> <b>notes</b>

        5) Now generate the reports:

          <b>nfsometer</b> <b>report</b>

       Example 8: Long running nfsometer trace

         The nfsometer.py script currently runs in the foreground.  As
         such, it will be killed if the tty gets a hangup or the connection
         to the client is closed.

         For the time being, nfsometer should be run in a screen
         session, or run with nohup and the output redirected to a file.

          1) <b>screen</b> <b>-RD</b>
          2) <b>nfsometer</b> <b>-n</b> <b>2</b> <b>server:/export</b> <b>iozone</b>
          3) close terminal window (or ^A^D)
          ...
          4) reattach later with <b>screen</b> <b>-RD</b>
          5) once nfsometer.py is done, results will be in results/index.html

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       mountstats, nfsstats

</pre><h4><b>BUGS</b></h4><pre>
       No known bugs.

</pre><h4><b>AUTHOR</b></h4><pre>
       Weston Andros Adamson (<a href="mailto:dros@netapp.com">dros@netapp.com</a>)

nfsometer                                              1.9                                                <u><a href="../man1/man.1.html">man</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>