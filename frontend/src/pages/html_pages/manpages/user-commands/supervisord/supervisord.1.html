<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>supervisord - supervisord Documentation</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/supervisor">supervisor_4.2.5-3_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       supervisord - supervisord Documentation

       Supervisor  is  a client/server system that allows its users to monitor and control a number of processes
       on UNIX-like operating systems.

       It shares some of the same goals of programs like launchd, daemontools, and runit. Unlike some  of  these
       programs, it is not meant to be run as a substitute for <b>init</b> as "process id 1". Instead it is meant to be
       used  to  control  processes  related  to  a  project or a customer, and is meant to start like any other
       program at boot time.

</pre><h4><b>DOCUMENTATION</b></h4><pre>
   <b>supervisord</b>
       The server piece of supervisor is named <b>supervisord</b>.  It is responsible for starting  child  programs  at
       its  own  invocation,  responding  to commands from clients, restarting crashed or exited subprocesseses,
       logging its subprocess <b>stdout</b> and <b>stderr</b> output, and generating and handling  "events"  corresponding  to
       points in subprocess lifetimes.

       The  server process uses a configuration file.  This is typically located in <b>/etc/supervisord.conf</b>.  This
       configuration file is a "Windows-INI" style config file.  It is important to keep this  file  secure  via
       proper filesystem permissions because it may contain unencrypted usernames and passwords.

   <b>Running</b> <b>Supervisor</b>
       This  section  makes  reference  to a <b>BINDIR</b> when explaining how to run the <b>supervisord</b> and <b>supervisorctl</b>
       commands.  This is the "bindir" directory that your Python installation has been  configured  with.   For
       example,  for  an  installation  of  Python  installed via <b>./configure</b> <b>--prefix=/usr/local/py;</b> <b>make;</b> <b>make</b>
       <b>install</b>, <b>BINDIR</b> would be <b>/usr/local/py/bin</b>. Python interpreters on different platforms  use  a  different
       <b>BINDIR</b>.  Look at the output of <b>setup.py</b> <b>install</b> if you can't figure out where yours is.

   <b>Adding</b> <b>a</b> <b>Program</b>
       Before  <b>supervisord</b>  will  do anything useful for you, you'll need to add at least one <b>program</b> section to
       its configuration.  The <b>program</b> section will define a program that is run and managed when you invoke the
       <b>supervisord</b> command.  To add a program, you'll need to edit the <b>supervisord.conf</b> file.

       One of the simplest possible programs to run is the UNIX <b>cat</b> program.  A <b>program</b> section  that  will  run
       <b>cat</b> when the <b>supervisord</b> process starts up is shown below.

          [program:foo]
          command=<a href="file:/bin/cat">/bin/cat</a>

       This  stanza may be cut and pasted into the <b>supervisord.conf</b> file.  This is the simplest possible program
       configuration, because it  only  names  a  command.   Program  configuration  sections  have  many  other
       configuration options which aren't shown here.  See programx_section for more information.

   <b>Running</b> <b>supervisord</b>
       To  start  <b>supervisord</b>,  run <b>$BINDIR/supervisord</b>.  The resulting process will daemonize itself and detach
       from the terminal.  It keeps an operations log at <b>$CWD/supervisor.log</b> by default.

       You may start the <b>supervisord</b> executable in the foreground by passing the <b>-n</b> flag on  its  command  line.
       This is useful to debug startup problems.

       <b>WARNING:</b>
          When  <b>supervisord</b>  starts up, it will search for its configuration file in default locations <u>including</u>
          <u>the</u> <u>current</u> <u>working</u> <u>directory</u>.  If you are security-conscious you will probably want to specify a "-c"
          argument after the <b>supervisord</b> command specifying an absolute path to a configuration file  to  ensure
          that  someone  doesn't trick you into running supervisor from within a directory that contains a rogue
          <b>supervisord.conf</b> file.  A warning is emitted when supervisor  is  started  as  root  without  this  <b>-c</b>
          argument.

       To  change the set of programs controlled by <b>supervisord</b>, edit the <b>supervisord.conf</b> file and <b>kill</b> <b>-HUP</b> or
       otherwise restart the <b>supervisord</b> process.  This file has several example program definitions.

       The <b>supervisord</b> command accepts a number of command-line options.  Each of  these  command  line  options
       overrides any equivalent value in the configuration file.

   <b>supervisord</b> <b>Command-Line</b> <b>Options</b>
       <b>-c</b> <u>FILE</u><b>,</b> <b>--configuration=</b><u>FILE</u>
              The path to a <b>supervisord</b> configuration file.

       <b>-n</b>, <b>--nodaemon</b>
              Run <b>supervisord</b> in the foreground.

       <b>-h</b>, <b>--help</b>
              Show <b>supervisord</b> command help.

       <b>-u</b> <u>USER</u><b>,</b> <b>--user=</b><u>USER</u>
              UNIX username or numeric user id.  If <b>supervisord</b> is started as the root user, setuid to this user
              as soon as possible during startup.

       <b>-m</b> <u>OCTAL</u><b>,</b> <b>--umask=</b><u>OCTAL</u>
              Octal number (e.g. 022) representing the umask that should be used by <b>supervisord</b> after it starts.

       <b>-d</b> <u>PATH</u><b>,</b> <b>--directory=</b><u>PATH</u>
              When supervisord is run as a daemon, cd to this directory before daemonizing.

       <b>-l</b> <u>FILE</u><b>,</b> <b>--logfile=</b><u>FILE</u>
              Filename path to use as the supervisord activity log.

       <b>-y</b> <u>BYTES</u><b>,</b> <b>--logfile_maxbytes=</b><u>BYTES</u>
              Max  size  of  the  supervisord  activity  log  file  before  a  rotation  occurs.   The  value is
              suffix-multiplied, e.g "1" is one byte, "1MB" is 1 megabyte, "1GB" is 1 gigabyte.

       <b>-y</b> <u>NUM</u><b>,</b> <b>--logfile_backups=</b><u>NUM</u>
              Number of backup copies of the supervisord activity log to keep around.  Each logfile will  be  of
              size <b>logfile_maxbytes</b>.

       <b>-e</b> <u>LEVEL</u><b>,</b> <b>--loglevel=</b><u>LEVEL</u>
              The  logging  level at which supervisor should write to the activity log.  Valid levels are <b>trace</b>,
              <b>debug</b>, <b>info</b>, <b>warn</b>, <b>error</b>, and <b>critical</b>.

       <b>-j</b> <u>FILE</u><b>,</b> <b>--pidfile=</b><u>FILE</u>
              The filename to which supervisord should write its pid file.

       <b>-i</b> <u>STRING</u><b>,</b> <b>--identifier=</b><u>STRING</u>
              Arbitrary string identifier exposed by various client UIs for this instance of supervisor.

       <b>-q</b> <u>PATH</u><b>,</b> <b>--childlogdir=</b><u>PATH</u>
              A path to a directory (it must already exist) where supervisor will write  its  <b>AUTO</b>  -mode  child
              process logs.

       <b>-k</b>, <b>--nocleanup</b>
              Prevent <b>supervisord</b> from performing cleanup (removal of old <b>AUTO</b> process log files) at startup.

       <b>-a</b> <u>NUM</u><b>,</b> <b>--minfds=</b><u>NUM</u>
              The minimum number of file descriptors that must be available to the supervisord process before it
              will start successfully.

       <b>-t</b>, <b>--strip_ansi</b>
              Strip ANSI escape sequences from all child log process.

       <b>-v</b>, <b>--version</b>
              Print the supervisord version number out to stdout and exit.

       <b>--profile_options=</b><u>LIST</u>
              Comma-separated  options  list  for  profiling.   Causes  <b>supervisord</b> to run under a profiler, and
              output results based on the options, which is a comma-separated list of the following: <b>cumulative</b>,
              <b>calls</b>, <b>callers</b>.  E.g. <b>cumulative,callers</b>.

       <b>--minprocs=</b><u>NUM</u>
              The minimum number of OS process slots that must be available to the supervisord process before it
              will start successfully.

   <b>Signals</b>
       The <b>supervisord</b> program may be sent signals which cause it to perform certain actions while it's running.

       You can send any of these signals to the single <b>supervisord</b> process id.  This process id can be found  in
       the  file represented by the <b>pidfile</b> parameter in the <b>[supervisord]</b> section of the configuration file (by
       default it's <b>$CWD/supervisord.pid</b>).

   <b>Signal</b> <b>Handlers</b>
       <b>SIGTERM</b>
          <b>supervisord</b> and all its subprocesses will shut down.  This may take several seconds.

       <b>SIGINT</b>
          <b>supervisord</b> and all its subprocesses will shut down.  This may take several seconds.

       <b>SIGQUIT</b>
          <b>supervisord</b> and all its subprocesses will shut down.  This may take several seconds.

       <b>SIGHUP</b>
          <b>supervisord</b> will stop all processes, reload the configuration from the first config file it finds, and
          restart all processes.

       <b>SIGUSR2</b>
          <b>supervisord</b> will close and reopen the main activity log and all child log files.

   <b>Runtime</b> <b>Security</b>
       The developers have done their best to assure that use of a <b>supervisord</b> process running  as  root  cannot
       lead  to unintended privilege escalation.  But <b>caveat</b> <b>emptor</b>.  Supervisor is not as paranoid as something
       like DJ Bernstein's daemontools, inasmuch as <b>supervisord</b> allows for arbitrary path specifications in  its
       configuration  file  to  which  data  may  be  written.   Allowing  arbitrary  path selections can create
       vulnerabilities from symlink attacks.  Be careful when specifying paths in  your  configuration.   Ensure
       that  the <b>supervisord</b> configuration file cannot be read from or written to by unprivileged users and that
       all files  installed  by  the  supervisor  package  have  "sane"  file  permission  protection  settings.
       Additionally,  ensure  that  your  <b>PYTHONPATH</b>  is  sane  and  that all Python standard library files have
       adequate file permission protections.

   <b>Running</b> <b>supervisord</b> <b>automatically</b> <b>on</b> <b>startup</b>
       If you are using a distribution-packaged version of Supervisor, it should already be integrated into  the
       service management infrastructure of your distribution.

       There      are      user-contributed      scripts      for      various     operating     systems     at:
       <u>https://github.com/Supervisor/initscripts</u>

       There are some answers at Serverfault in case you get stuck: <u>How</u> <u>to</u> <u>automatically</u>  <u>start</u>  <u>supervisord</u>  <u>on</u>
       <u>Linux</u> <u>(Ubuntu)</u>

</pre><h4><b>Subprocesses</b></h4><pre>
       <b>supervisord</b>'s  primary purpose is to create and manage processes based on data in its configuration file.
       It does this by creating subprocesses.  Each subprocess spawned by supervisor is managed for the entirety
       of its lifetime by supervisord (<b>supervisord</b> is the parent process of each process it  creates).   When  a
       child  dies,  supervisor is notified of its death via the <b>SIGCHLD</b> signal, and it performs the appropriate
       operation.

   <b>Nondaemonizing</b> <b>of</b> <b>Subprocesses</b>
       Programs meant to be run under supervisor should not daemonize themselves.  Instead, they should  run  in
       the foreground.  They should not detach from the terminal from which they are started.

       The  easiest  way  to tell if a program will run in the foreground is to run the command that invokes the
       program from a shell prompt.  If it gives you control of the terminal back, but continues  running,  it's
       daemonizing  itself and that will almost certainly be the wrong way to run it under supervisor.  You want
       to run a command that essentially requires you to press <b>Ctrl-C</b> to get control of the terminal  back.   If
       it  gives you a shell prompt back after running it without needing to press <b>Ctrl-C</b>, it's not useful under
       supervisor.  All programs have options to be run in the foreground but there's no "standard  way"  to  do
       it; you'll need to read the documentation for each program.

       Below  are configuration file examples that are known to start common programs in "foreground" mode under
       Supervisor.

   <b>Examples</b> <b>of</b> <b>Program</b> <b>Configurations</b>
       Here are some "real world" program configuration examples:

   <b>Apache</b> <b>2.2.6</b>
          [program:apache2]
          command=/path/to/httpd -c "ErrorLog /dev/stdout" -DFOREGROUND
          redirect_stderr=true

   <b>Two</b> <b>Zope</b> <b>2.X</b> <b>instances</b> <b>and</b> <b>one</b> <b>ZEO</b> <b>server</b>
          [program:zeo]
          command=/path/to/runzeo
          priority=1

          [program:zope1]
          command=/path/to/instance/home/bin/runzope
          priority=2
          redirect_stderr=true

          [program:zope2]
          command=/path/to/another/instance/home/bin/runzope
          priority=2
          redirect_stderr=true

   <b>Postgres</b> <b>8.X</b>
          [program:postgres]
          command=/path/to/postmaster
          ; we use the "fast" shutdown signal SIGINT
          stopsignal=INT
          redirect_stderr=true

   <b>OpenLDAP</b> <b>slapd</b>
          [program:slapd]
          command=/path/to/slapd -f /path/to/slapd.conf -h ldap://0.0.0.0:8888
          redirect_stderr=true

   <b>Other</b> <b>Examples</b>
       Other examples of shell scripts that could be used to start services under <b>supervisord</b> can  be  found  at
       <u><a href="http://thedjbway.b0llix.net/services.html">http://thedjbway.b0llix.net/services.html</a></u>.   These  examples are actually for <b>daemontools</b> but the premise
       is the same for supervisor.

       Another collection of recipes  for  starting  various  programs  in  the  foreground  is  available  from
       <u><a href="http://smarden.org/runit/runscripts.html">http://smarden.org/runit/runscripts.html</a></u>.

   <b>pidproxy</b> <b>Program</b>
       Some  processes  (like <b>mysqld</b>) ignore signals sent to the actual process which is spawned by <b>supervisord</b>.
       Instead, a "special" thread/process is created by these  kinds  of  programs  which  is  responsible  for
       handling  signals.   This  is  problematic  because  <b>supervisord</b> can only kill a process which it creates
       itself.  If a process created by <b>supervisord</b> creates its own child  processes,  <b>supervisord</b>  cannot  kill
       them.

       Fortunately,  these  types  of programs typically write a "pidfile" which contains the "special" process'
       PID, and is meant to be read and used in order to kill the process.  As a workaround  for  this  case,  a
       special <b>pidproxy</b> program can handle startup of these kinds of processes.  The <b>pidproxy</b> program is a small
       shim  that  starts a process, and upon the receipt of a signal, sends the signal to the pid provided in a
       pidfile.  A sample configuration program entry for a pidproxy-enabled program is provided below.

          [program:mysql]
          command=/path/to/pidproxy /path/to/pidfile /path/to/mysqld_safe

       The <b>pidproxy</b> program is put into your configuration's <b>$BINDIR</b> when  supervisor  is  installed  (it  is  a
       "console script").

   <b>Subprocess</b> <b>Environment</b>
       Subprocesses  will  inherit  the environment of the shell used to start the <b>supervisord</b> program.  Several
       environment variables will be set by <b>supervisord</b>  itself  in  the  child's  environment  also,  including
       <b>SUPERVISOR_ENABLED</b>  (a  flag indicating the process is under supervisor control), <b>SUPERVISOR_PROCESS_NAME</b>
       (the  config-file-specified   process   name   for   this   process)   and   <b>SUPERVISOR_GROUP_NAME</b>   (the
       config-file-specified process group name for the child process).

       These  environment  variables  may  be  overridden  within  the <b>[supervisord]</b> section config option named
       <b>environment</b> (applies to all subprocesses) or within  the  per-  <b>[program:x]</b>  section  <b>environment</b>  config
       option  (applies  only  to the subprocess specified within the <b>[program:x]</b> section).  These "environment"
       settings are additive.  In other words, each subprocess' environment will consist of:
          The environment variables set within the shell used to start supervisord...

          ... added-to/overridden-by ...

          <b>...</b> <b>the</b> <b>environment</b> <b>variables</b> <b>set</b> <b>within</b> <b>the</b> <b>environment</b> <b>global</b>
                     config option ...

                 ... added-to/overridden-by ...

                 <b>...</b> <b>supervisor-specific</b> <b>environment</b> <b>variables</b>
                        (<b>SUPERVISOR_ENABLED</b>, <b>SUPERVISOR_PROCESS_NAME</b>, <b>SUPERVISOR_GROUP_NAME</b>) ..

                 ... added-to/overridden-by ...

                 <b>...</b> <b>the</b> <b>environment</b> <b>variables</b> <b>set</b> <b>within</b> <b>the</b> <b>per-process</b>
                        "environment" config option.

       No shell is executed by <b>supervisord</b> when it runs a subprocess, so environment  variables  such  as  <b>USER</b>,
       <b>PATH</b>,  <b>HOME</b>,  <b>SHELL</b>,  <b>LOGNAME</b>, etc. are not changed from their defaults or otherwise reassigned.  This is
       particularly important to note when you are running a program from a <b>supervisord</b> run as root with a <b>user=</b>
       stanza in the  configuration.   Unlike  <b>cron</b>,  <b>supervisord</b>  does  not  attempt  to  divine  and  override
       "fundamental"  environment  variables like <b>USER</b>, <b>PATH</b>, <b>HOME</b>, and <b>LOGNAME</b> when it performs a setuid to the
       user defined within the <b>user=</b> program config option.  If you need to  set  environment  variables  for  a
       particular  program  that might otherwise be set by a shell invocation for a particular user, you must do
       it explicitly within the <b>environment=</b> program config option.  An example  of  setting  these  environment
       variables is as below.

          [program:apache2]
          command=/home/chrism/bin/httpd -c "ErrorLog /dev/stdout" -DFOREGROUND
          user=chrism
          environment=HOME="/home/chrism",USER="chrism"

   <b>Process</b> <b>States</b>
       A  process  controlled  by supervisord will be in one of the below states at any given time.  You may see
       these state names in various user interface elements in clients.

       <b>STOPPED</b> (0)
          The process has been stopped due to a stop request or has never been started.

       <b>STARTING</b> (10)
          The process is starting due to a start request.

       <b>RUNNING</b> (20)
          The process is running.

       <b>BACKOFF</b> (30)
          The process entered the <b>STARTING</b> state but subsequently exited too quickly  to  move  to  the  <b>RUNNING</b>
          state.

       <b>STOPPING</b> (40)
          The process is stopping due to a stop request.

       <b>EXITED</b> (100)
          The process exited from the <b>RUNNING</b> state (expectedly or unexpectedly).

       <b>FATAL</b> (200)
          The process could not be started successfully.

       <b>UNKNOWN</b> (1000)
          The process is in an unknown state (<b>supervisord</b> programming error).

       Each process run under supervisor progresses through these states as per the following directed graph.
         [image: Subprocess State Transition Graph] [image] Subprocess State Transition Graph.UNINDENT

         A  process  is  in  the  <b>STOPPED</b>  state  if it has been stopped adminstratively or if it has never been
         started.

         When an autorestarting process is  in  the  <b>BACKOFF</b>  state,  it  will  be  automatically  restarted  by
         <b>supervisord</b>.   It  will  switch  between  <b>STARTING</b>  and <b>BACKOFF</b> states until it becomes evident that it
         cannot be started because the number of <b>startretries</b> has exceeded the maximum, at which point  it  will
         transition to the <b>FATAL</b> state.  Each start retry will take progressively more time.

         When a process is in the <b>EXITED</b> state, it will automatically restart:

       • never if its <b>autorestart</b> parameter is set to <b>false</b>.

       • unconditionally if its <b>autorestart</b> parameter is set to <b>true</b>.

       • conditionally  if  its <b>autorestart</b> parameter is set to <b>unexpected</b>.  If it exited with an exit code that
         doesn't match one of the exit codes defined in the <b>exitcodes</b> configuration parameter for  the  process,
         it will be restarted.

       A process automatically transitions from <b>EXITED</b> to <b>RUNNING</b> as a result of being configured to autorestart
       conditionally or unconditionally.  The number of transitions between <b>RUNNING</b> and <b>EXITED</b> is not limited in
       any  way:  it is possible to create a configuration that endlessly restarts an exited process.  This is a
       feature, not a bug.

       An autorestarted process will never be automatically restarted if it ends up in the <b>FATAL</b> state (it  must
       be manually restarted from this state).

       A process transitions into the <b>STOPPING</b> state via an administrative stop request, and will then end up in
       the <b>STOPPED</b> state.

       A  process  that  cannot be stopped successfully will stay in the <b>STOPPING</b> state forever.  This situation
       should never be reached during normal operations as it implies that the process  did  not  respond  to  a
       final <b>SIGKILL</b> signal sent to it by supervisor, which is "impossible" under UNIX.

       State transitions which always require user action to invoke are these:

       <b>FATAL</b>   -&gt; <b>STARTING</b>

       <b>RUNNING</b> -&gt; <b>STOPPING</b>

       State  transitions  which  typically,  but  not  always,  require  user  action to invoke are these, with
       exceptions noted:

       <b>STOPPED</b> -&gt; <b>STARTING</b> (except at supervisord startup if process is configured to autostart)

       <b>EXITED</b> -&gt; <b>STARTING</b> (except if process is configured to autorestart)

       All other state transitions are managed by supervisord automatically.

   <b>Glossary</b>
       <b>daemontools</b>
              A <u>process</u> <u>control</u> <u>system</u> <u>by</u> <u>D.J.</u> <u>Bernstein</u>.

       <b>launchd</b>
              A <u>process</u> <u>control</u> <u>system</u> <u>used</u> <u>by</u> <u>Apple</u> as process 1 under Mac OS X.

       <b>runit</b>  A <u>process</u> <u>control</u> <u>system</u>.

       <b>Superlance</b>
              A package which provides various event listener implementations that plug  into  Supervisor  which
              can help monitor process memory usage and crash status: <u><a href="http://pypi.python.org/pypi/superlance">http://pypi.python.org/pypi/superlance</a></u>.

       <b>umask</b>  Abbreviation  of  <u>user</u>  <u>mask</u>:  sets  the  file  mode  creation  mask  of the current process.  See
              <u><a href="http://en.wikipedia.org/wiki/Umask">http://en.wikipedia.org/wiki/Umask</a></u>.

</pre><h4><b>AUTHOR</b></h4><pre>
       This man page was created by Orestis Ioannou &lt;<a href="mailto:orestis@oioannou.com">orestis@oioannou.com</a>&gt; using the official documentation.

</pre><h4><b>COPYRIGHT</b></h4><pre>
       2004-2015, Agendaless Consulting and Contributors

3.2.0                                           December 10, 2015                                 <u><a href="../man1/SUPERVISORD.1.html">SUPERVISORD</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>