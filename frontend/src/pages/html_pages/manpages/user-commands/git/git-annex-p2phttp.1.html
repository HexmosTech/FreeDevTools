<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>git-annex-p2phttp - HTTP server for the git-annex API</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/git-annex">git-annex_10.20241202-2_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       git-annex-p2phttp - HTTP server for the git-annex API

</pre><h4><b>SYNOPSIS</b></h4><pre>
       git-annex p2phttp

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This  is a HTTP server for the git-annex API.  It is the git-annex equivilant of <a href="../man1/git-http-backend.1.html">git-http-backend</a>(1), for
       serving a repository over HTTP with write access for authenticated users.

       This does not serve a git repository over HTTP, only the git-annex API.

       By default, this serves the git-annex API for the git-annex repository in the current working  directory.
       It can also serve more than one repository, see the <b>--directory</b> parameter.

       Typically  a remote will have <b>remote.name.url</b> set to a http url as usual, and <b>remote.name.annexUrl</b> set to
       an annex+http url such as "annex+<a href="http://example.com/git-annex/">http://example.com/git-annex/</a>". The annex+http url  is  served  by  this
       server, and uses port 9417 by default.

       Note  that,  when <b>remote.name.url</b> and <b>remote.name.annexUrl</b> contain the same hostname, they are assumed by
       git-annex to support the same  users  and  passwords.  So,  git-annex  will  use  the  password  for  the
       <b>remote.name.url</b> to log into the <b>remote.name.annexUrl</b>.

       As  well as serving the git-annex HTTP API, this server provides a convenient way to download the content
       of any key, by using the path "/git-annex/$uuid/$key". For example:

        $                                   curl                                    <a href="http://example.com">http://example.com</a>:9417/git-
       annex/f11773f0-11e1-45b2-9805-06db16768efe/key/SHA256E-s6--5891b5b522d5df086d0ff0b110fbd9d21bb4fc7163af34d08286a2e846f6be03
        hello

</pre><h4><b>OPTIONS</b></h4><pre>
       <b>--directory=path</b>

              Serve each git-annex repository found in immediate subdirectories of a directory.

              This  option  can  be  provided  more  than  once  to  serve several directories full of git-annex
              repositories.

              New git-annex repositories can be  added  to  the  directory,  and  will  be  noticed  and  served
              immediately. There is no need to restart the server.

              When  a  git-annex  repository  is  removed from the directory, the server will stop serving it as
              well. This may not be immediate, as some files in the deleted repository may still be open.

       <b>--jobs=N</b> <b>-JN</b>
              This or annex.jobs must be set to configure the number of worker threads, per  repository  served,
              that serve connections to the webserver.

              Since the webserver itself also uses one of these threads, this needs to be set to 2 or more.

              A good choice is often one worker per CPU core: <b>--jobs=cpus</b>

       <b>--proxyconnections=N</b>
              When  serving  a  repository that is configured to act as a proxy for some of its remotes, this is
              the maximum number of idle connections to keep open to proxied remotes.

              The default is 1.

       <b>--clusterjobs=N</b>
              When serving a repository that is a gateway for a cluster, this is the number of  concurrent  jobs
              to use to access nodes of the cluster, per connection to the webserver.

              The default is 1.

              A  good choice for this will be a balance between the number of nodes in the cluster and the value
              of <b>--jobs</b>.

              For example, if the cluster has 4 nodes, and <b>--jobs=4</b>, using <b>--clusterjobs=4</b> will make  all  nodes
              in the cluster be accessed concurrently, which is often optimal. But around 20 cores can be needed
              when the webserver is busy.

       <b>--port=N</b>
              Port  to  listen on. The default is port 9417, which is the default port used for an annex+http or
              annex+https url.

              It is not recommended to run this command as root in order to use a low port like port 80. It will
              not drop permissions when run as root.

       <b>--bind=address</b>
              What address to bind to. The default is to bind to all addresses.

       <b>--certfile=filename</b>
              TLS certificate file to use. Combining this with <b>--privatekeyfile</b> makes the server use HTTPS.

       <b>--privatekeyfile=filename</b>
              TLS private key file to use. Combining this with <b>--certfile</b> makes the server use HTTPS.

       <b>--chainfile=filename</b>
              TLS chain file to use. This option can be repeated any number of times.

       <b>--authenv</b>
              Allows users to be authenticated with a username and password.  For  security,  this  only  allows
              authentication when the user connects over HTTPS.

              To configure the passwords, set environment variables like <b>GIT_ANNEX_P2PHTTP_PASSWORD_alice=foo123</b>

              The   permissions  of  users  can  also  be  configured  by  setting  environment  variables  like
              <b>GIT_ANNEX_P2PHTTP_PERMISSIONS_alice=readonly</b>. The value can be either "readonly" or  "appendonly".
              When this is not set, the default is to give the user full read+write+remove access.

       <b>--authenv-http</b>
              Like  <b>--authenv</b>,  but  allows authentication when the user connects over HTTP. This is not secure,
              since HTTP basic authentication is not encrypted.

       <b>--unauth-readonly</b>
              Allows unauthenticated users to read the repository, but not make modifications to it.

              This can be combined with <b>--authenv</b> or <b>--authenv-http</b> to  allow  anonymous  readonly  access,  and
              authenticated write access.

       <b>--unauth-appendonly</b>
              Allows  unauthenticated  users  to  read the repository, and store data in it, but not remove data
              from it.

              This can be combined with <b>--authenv</b> or <b>--authenv-http</b> to allow anonymous  appendonly  access,  and
              authenticated remove access.

       <b>--unauth-nolocking</b>
              By  default,  when  <b>--unauth-readonly</b>  or  <b>--unauth-appendonly</b>  is used, unauthenticated users are
              allowed to lock content in the repository.  This option prevents that.

              Locking content prevents it from  being  dropped  from  the  repository  so  it  may  be  that  an
              unauthenticated user abuses that, and this option can be used in such a situation.

              Note that enabling this option will prevent unauthenticated users from dropping content from their
              other remotes in some cases.

       <b>--wideopen</b>
              Gives unauthenticated users full read+write+remove access to the repository.

              Please think carefully before enabling this option.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <a href="../man1/git-annex.1.html">git-annex</a>(1)

       <a href="../man1/git-http-backend.1.html">git-http-backend</a>(1)

       <a href="../man1/git-annex-shell.1.html">git-annex-shell</a>(1)

       <a href="../man1/git-annex-updateproxy.1.html">git-annex-updateproxy</a>(1)

       <a href="../man1/git-annex-initcluster.1.html">git-annex-initcluster</a>(1)

       <a href="../man1/git-annex-updatecluster.1.html">git-annex-updatecluster</a>(1)

       &lt;https://git-annex.branchable.com/design/p2p_protocol_over_http/&gt;

</pre><h4><b>AUTHOR</b></h4><pre>
       Joey Hess &lt;<a href="mailto:id@joeyh.name">id@joeyh.name</a>&gt;

       &lt;<a href="http://git-annex.branchable.com/">http://git-annex.branchable.com/</a>&gt;

                                                                                            <u><a href="../man1/git-annex-p2phttp.1.html">git-annex-p2phttp</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>