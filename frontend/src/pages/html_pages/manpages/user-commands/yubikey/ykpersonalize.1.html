<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ykpersonalize - personalize YubiKey OTP tokens</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/yubikey-personalization">yubikey-personalization_1.20.0-5_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       ykpersonalize - personalize YubiKey OTP tokens

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>ykpersonalize</b> [<u>-Nkey</u>] [<u>-1</u> | <u>-2</u>] [<u>-sfile</u>] [<u>-ifile</u>] [<u>-fformat</u>] [<u>-axxx</u>] [<u>-cxxx</u>] [<u>-ooption</u>] [<u>-y</u>] [<u>-v</u>] [<u>-d</u>]
       [<u>-h</u>] [<u>-n</u>] [<u>-t</u>] [<u>-u</u>] [<u>-x</u>] [<u>-z</u>] [<u>-m</u>] [<u>-S</u>] [<u>-V</u>] [<u>-Dxxx</u>_]

</pre><h4><b>DESCRIPTION</b></h4><pre>
       Set the AES key, user ID and other settings in a YubiKey. For the complete explanation of the meaning of
       all parameters, see the reference manual: YubiKey manual
       (https://www.yubico.com/wp-content/uploads/2015/03/YubiKeyManual_v3.4.pdf)

</pre><h4><b>OPTIONS</b></h4><pre>
       <b>-Nkey</b>
           use the nth YubiKey found.

       <b>-1</b>
           change the first configuration. This is the default and is normally used for true OTP generation. In
           this configuration, the option flag <b>-oappend-cr</b> is set by default.

       <b>-2</b>
           change the second configuration. This is for YubiKey II only and is then normally used for static key
           generation. In this configuration, the option flags <b>-oappend-cr</b>, <b>-ostatic-ticket</b>, <b>-ostrong-pw1</b>,
           <b>-ostrong-pw2</b> and <b>-oman-update</b> are set by default.

       <b>-z</b>
           delete configuration in selected slot.

       <b>-s</b><u>file</u>
           save configuration to file instead of key (if file is -, send to stdout).

       <b>-i</b><u>file</u>
           read configuration from file (if file is -, read from stdin). Configuration import is only valid for
           the ycfg format.

       <b>-f</b><u>format</u>
           format to be used with <b>-s</b> and <b>-i</b>. Valid options are <b>ycfg</b> and <b>legacy</b>.

       <b>-a</b>[<u>xxx</u>]
           the AES secret key as a 32 (or 40 for OATH-HOTP/HMAC CHAL-RESP) char hex value (not modhex) (none to
           prompt for key on stdin). If <b>-a</b> is not used a random key will be generated.

       <b>-c</b>[<u>xxx</u>]
           a 12 char hex value (not modhex) to use as the access code for programming. NOTE: this does NOT SET
           the access code. That is done with <b>-oaccess</b><u>=</u>. If no argument is provided the code is prompted for on
           stdin.

       <b>-o</b><u>option</u>
           change configuration option. Possible option arguments are:

           <b>fixed</b>=<u>fffffffffff</u>
               The modhex <u>public</u> <u>identity</u> of the YubiKey, 0-32 characters long (encoding up to 16 bytes). It’s
               possible to give the identity in hex as well, just prepend the value with ’h:’. The fixed part is
               emitted before the OTP when the button on the YubiKey is pressed. It can be used as an identifier
               for the user, for example.

           <b>uid</b>[=<u>uuuuuu</u>]
               The uid part of the generated OTP, also called <u>private</u> <u>identity</u>, in hex. Must be 12 characters
               long. The uid is 6 bytes of static data that is included (encrypted) in every OTP, and is used to
               validate that an OTP was in fact encrypted with the AES key shared between the YubiKey and the
               validation service. It cannot be used to identify the YubiKey as it is only readable to those
               that know the AES key. If no argument is provided the uid is prompted for on stdin.

           <b>access</b>[=<u>fffffffffff</u>]
               New hex access code to set. Must be 12 characters long. If an access code is set, it will be
               required for subsequent reprogramming of the YubiKey. If no argument is provided code is prompted
               for on stdin.

           <b>oath-imf</b>=<u>xxx</u>
               Set OATH Initial Moving Factor. This is the initial counter value for the YubiKey. This should be
               a value between 0 and 1048560, evenly dividable by 16.

           <u>ticket-flag</u>
               Set/clear ticket flag, see the section <u>Ticket</u> <u>Flags</u>.

           <u>configuration-flag</u>
               Set/clear configuration flag, see the section <u>Configuration</u> <u>flags</u>.

       <b>-y</b>
           always commit without prompting.

       <b>-d</b>
           dry-run, run without writing a YubiKey.

       <b>-v</b>
           be more verbose.

       <b>-h</b>
           display help.

       <b>-V</b>
           display version.

   <b>YubiKey</b> <b>Neo</b> <b>only</b>
       <b>-n</b> URI
           program NFC NDEF URI.

       <b>-t</b> text
           program NFC NDEF text.

   <b>YubiKey</b> <b>3</b> <b>and</b> <b>4</b> <b>only</b>
       <b>-m</b> mode
           set device configuration for the YubiKey. It is parsed in the form <u>mode:cr_timeout:autoeject_timeout</u>
           where mode is:

           0
               OTP device only.

           1
               CCID device only.

           2
               OTP/CCID composite device.

           3
               U2F device only.

           4
               OTP/U2F composite device.

           5
               U2F/CCID composite device.

           6
               OTP/U2F/CCID composite device. Add 80 to set MODE_FLAG_EJECT, for example: 81

               cr_timeout is the timeout in seconds for the YubiKey to wait on button press for challenge
               response (default is 15)

               autoeject_timeout is the timeout in seconds before the card is automatically ejected in mode 81

       Removing OTP mode also disables communication between ykpersonalize and the YubiKey. Further mode changes
       will have to be done with ykneomgr (for CCID mode) or u2f-host (for U2F mode).

   <b>YubiKey</b> <b>3</b> <b>and</b> <b>above</b>
       <b>-S</b><u>0605...</u>
           set the scanmap to be used with the YubiKey. It must be 45 unique bytes as 90 characters. Leave
           argument empty to reset to the YubiKey’s default. The scanmap must be sent in the order:

               cbdefghijklnrtuvCBDEFGHIJKLNRTUV0123456789!\t\r

           The default scanmap in the YubiKey is:

               06050708090a0b0c0d0e0f111517181986858788898a8b8c8d8e8f9195979899271e1f202122232425269e2b28

           An example for simplified U.S. Dvorak would be:

               0c110b071c180d0a0619130f120e09378c918b879c988d8a8699938f928e89b7271e1f202122232425269e2b28

           Or for a French azerty keyboard (digits are shifted):

               06050708090a0b0c0d0e0f111517181986858788898a8b8c8d8e8f9195979899a79e9fa0a1a2a3a4a5a6382b28

           Or for a French BÉPO keyboard (French Dvorak):

               0b140c0938363707130512330f0d16188b948c89b8b6b787938592b38f8d9698a79e9fa0a1a2a3a4a5a69c2b28

           And a Turkish example (has a dotless i instead of usual i):

               06050708090a0b340d0e0f111517181986858788898a8b8c8d8e8f9195979899271e1f202122232425269e2b28

           Note that you must remove any whitespace present in these examples before using the values.

   <b>YubiKey</b> <b>5</b> <b>and</b> <b>above</b>
       <b>-D</b><u>0403...</u>
           Set the deviceinfo to use with this YubiKey.

   <b>YubiKey</b> <b>2.3</b> <b>and</b> <b>above</b>
       <b>-u</b>
           Update existing configuration, rather than overwriting. Only possible if the slot is configured as
           updatable.

       <b>-x</b>
           Swap configuration slot 1 and 2 inside the YubiKey. Only possible if both slots are configured as
           updatable.

</pre><h4><b>TICKET</b> <b>FLAGS</b></h4><pre>
       <b>tab-first</b>
           Send a tab character as the first character. This is usually used to move to the next input field.

       <b>append-tab1</b>
           Send a tab character between the fixed part and the one-time password part. This is useful if you
           have the fixed portion equal to the user name and two input fields that you navigate between using
           tab.

       <b>append-tab2</b>
           Send a tab character as the last character.

       <b>append-delay1</b>
           Add a half-second delay before sending the one-time password part. This option is only valid for
           firmware 1.x and 2.x.

       <b>append-delay2</b>
           Add a half-second delay after sending the one-time password part. This option is only valid for
           firmware 1.x and 2.x.

       <b>append-cr</b>
           Add a carriage return after sending the one-time password part.

   <b>YubiKey</b> <b>2.0</b> <b>firmware</b> <b>and</b> <b>above</b>
       <b>protect-cfg2</b>
           When written to configuration 1, block later updates to configuration 2. When written to
           configuration 2, prevent configuration 1 from having the lock bit set.

   <b>YubiKey</b> <b>2.1</b> <b>firmware</b> <b>and</b> <b>above</b>
       <b>oath-hotp</b>
           Set OATH-HOTP mode rather than YubiKey mode. In this mode, the token functions according to the
           OATH-HOTP standard.

   <b>YubiKey</b> <b>2.2</b> <b>firmware</b> <b>and</b> <b>above</b>
       <b>chal-resp</b>
           Set challenge-response mode.

</pre><h4><b>CONFIGURATION</b> <b>FLAGS</b></h4><pre>
       <b>send-ref</b>
           Send a reference string of all 16 modhex characters before the fixed part. When combined with
           <b>-ostrong-pw2</b> this sends a <u>!</u>  before the rest of the string.

       <b>pacing-10ms</b>
           Add a 10ms delay between key presses.

       <b>pacing-20ms</b>
           Add a 20ms delay between key presses.

       <b>static-ticket</b>
           Output a fixed string rather than a one-time password. The password is still based on the AES key and
           should be hard to guess and impossible to remember.

   <b>YubiKey</b> <b>1.x</b> <b>firmware</b> <b>only</b>
       <b>ticket-first</b>
           Send the one-time password rather than the fixed part first.

       <b>allow-hidtrig</b>
           Allow trigger through HID/keyboard by pressing caps-, num or scroll-lock twice. Not recommended for
           security reasons.

   <b>YubiKey</b> <b>2.0</b> <b>firmware</b> <b>and</b> <b>above</b>
       <b>short-ticket</b>
           Limit the length of the static string to max 16 digits. This flag only makes sense with the
           <b>-ostatic-ticket</b> option. When <b>-oshort-ticket</b> is used without <b>-ostatic-ticket</b> it will program the
           YubiKey in "scan-code mode", in this mode the key sends the contents of fixed, uid and key as raw
           keyboard scancodes. For example, by using the fixed string <u>h:8b080f0f122c9a12150f079e</u> in this mode it
           will send <u>Hello</u> <u>World!</u>  on a qwerty keyboard. This mode sends raw scan codes, so output will differ
           between keyboard layouts.

       <b>strong-pw1</b>
           Upper-case the two first letters of the output string. This is for compatibility with legacy systems
           that enforce both uppercase and lowercase characters in a password and does not add any security.

       <b>strong-pw2</b>
           Replace the first eight characters of the modhex alphabet with the numbers 0 to 7. Like <b>-ostrong-pw1</b>,
           this is intended to support legacy systems.

       <b>man-update</b>
           Enable user-initiated update of the static password. Only makes sense with the <b>-ostatic-ticket</b>
           option. This is only valid for firmware 2.x.

   <b>YubiKey</b> <b>2.1</b> <b>firmware</b> <b>and</b> <b>above</b>
       <b>oath-hotp8</b>
           Generate an 8-digit HOTP rather than a 6-digit one.

       <b>oath-fixed-modhex1</b>
           Send the first byte of the fixed part as modhex.

       <b>oath-fixed-modhex2</b>
           Send the first two bytes of the fixed part as modhex.

       <b>oath-fixed-modhex</b>
           Send the fixed part is as modhex.

       <b>oath-id</b>=m:OOTTUUUUUUUU
           Configure OATH token id with a provided value. See description of this option under the 2.2 section
           for details, but note that a YubiKey 2.1 key can’t report its serial number and thus a token
           identifier value must be specified.

   <b>YubiKey</b> <b>2.2</b> <b>firmware</b> <b>and</b> <b>above</b>
       <b>chal-yubico</b>
           Yubico OTP challenge-response mode.

       <b>chal-hmac</b>
           Generate HMAC-SHA1 challenge responses.

       <b>hmac-lt64</b>
           Calculate HMAC on less than 64 bytes input. Whatever is in the last byte of the challenge is used as
           end of input marker (backtracking from end of payload).

       <b>chal-btn-trig</b>
           The YubiKey will wait for the user to press the key (within 15 seconds) before answering the
           challenge.

       <b>serial-btn-visible</b>
           The YubiKey will emit its serial number if the button is pressed during power-up. This option is only
           valid for the 2.x firmware line.

       <b>serial-usb-visible</b>
           The YubiKey will indicate its serial number in the USB iSerial field. This option is not available in
           the 3.0 and 3.1 firmwares.

       <b>serial-api-visible</b>
           The YubiKey will allow its serial number to be read using an API call.

       <b>oath-id</b>[=m:OOTTUUUUUUUU]
           Configure OATH token id with a provided value, or if used without a value use the standard YubiKey
           token identifier.

       The standard OATH token id for a Yubico YubiKey is (modhex) OO=ub, TT=he, (decimal) UUUUUUUU=serial
       number.

       The reason for the decimal serial number is to make it easy for humans to correlate the serial number on
       the back of the YubiKey to an entry in a list of associated tokens for example. Other encodings can be
       accomplished using the appropriate oath-fixed-modhex options.

       Note that the YubiKey must be programmed to allow reading its serial number, otherwise automatic token id
       creation is not possible.

       See section "5.3.4 - OATH-HOTP Token Identifier" of the YubiKey manual
       <a href="http://yubico.com/files/YubiKey_manual-2.0.pdf">http://yubico.com/files/YubiKey_manual-2.0.pdf</a> for further details.

   <b>YubiKey</b> <b>2.3</b> <b>firmware</b> <b>and</b> <b>above</b>
       <b>use-numeric-keypad</b>
           Send scancodes for numeric keypad keypresses when sending digits - helps with some keyboard layouts.
           This option is only valid for the 2.x firmware line.

       <b>fast-trig</b>
           Faster triggering when only configuration 1 is available. This option is always in effect on firmware
           versions 3.0 and above.

       <b>allow-update</b>
           Allow updating (or swapping) of certain parameters in a configuration at a later time.

       <b>dormant</b>
           Hides/unhides a configuration stored in a YubiKey.

   <b>YubiKey</b> <b>2.4/3.1</b> <b>firmware</b> <b>and</b> <b>above</b>
       <b>led-inv</b>
           Inverts the behaviour of the led on the YubiKey.

   <b>OATH-HOTP</b> <b>Mode</b>
       When using OATH-HOTP mode, a HMAC key of 160 bits (20 bytes, 40 chars of hex) can be supplied with <b>-a</b>.

   <b>Challenge-response</b> <b>Mode</b>
       In <b>CHAL-RESP</b> mode, the token will NOT generate any keypresses when the button is pressed (although it is
       perfectly possible to have one slot with a keypress-generating configuration, and the other in
       challenge-response mode). Instead, a program capable of sending USB HID feature reports to the token must
       be used to send it a challenge, and read the response.

   <b>Modhex</b>
       Modhex is a way of writing hex digits where the “digits” are chosen for being in the same place on most
       keyboard layouts. To convert from hex to modhex, you can use:

           tr "[0123456789abcdef]" "[cbdefghijklnrtuv]"

       To convert the other way, use:

           tr "[cbdefghijklnrtuv]" "[0123456789abcdef]"

   <b>EXAMPLES</b>
       Programming for YubiCloud:

           ouid=`dd if=/dev/urandom 2&gt;/dev/null | tr -d '[:upper:]' | tr -cd '[:xdigit:]' | fold -w12 | head -1`
           ofixed=ff`dd if=/dev/urandom 2&gt;/dev/null | tr -d '[:upper:]' | tr -cd '[:xdigit:]' | fold -w10 | head -1`
           ykpersonalize -1 -ouid=h:$ouid -ofixed=h:$ofixed

       This will program a key with a random 6 byte uid and a 12 character fixed string starting with vv. This
       is suitable for upload to YubiCloud at https://upload.yubico.com/

   <b>BUGS</b>
       Report ykpersonalize bugs in the issue tracker https://github.com/Yubico/yubikey-personalization/issues

   <b>SEE</b> <b>ALSO</b>
       The ykpersonalize home page https://developers.yubico.com/yubikey-personalization/

       YubiKeys can be obtained from Yubico <a href="http://www.yubico.com/">http://www.yubico.com/</a>

ykpersonalize                                    Version 1.20.0                                 <u><a href="../man1/YKPERSONALIZE.1.html">YKPERSONALIZE</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>