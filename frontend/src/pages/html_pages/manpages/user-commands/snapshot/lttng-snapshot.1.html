<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>lttng-snapshot - Take a snapshot of an LTTng recording session</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/lttng-tools">lttng-tools_2.13.14-2_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       lttng-snapshot - Take a snapshot of an LTTng recording session

</pre><h4><b>SYNOPSIS</b></h4><pre>
       Take a recording session snapshot:

       <b>lttng</b> [<u>GENERAL</u> <u>OPTIONS</u>] <b>snapshot</b> <b>record</b> [<b>--max-size</b>=<u>SIZE</u>]
             [<b>--name</b>=<u>NAME</u>] [<b>--session</b>=<u>SESSION</u>]
             [<b>--ctrl-url</b>=<u>URL</u> <b>--data-url</b>=<u>URL</u> | <u>URL</u>]

       Add a snapshot output to a recording session:

       <b>lttng</b> [<u>GENERAL</u> <u>OPTIONS</u>] <b>snapshot</b> <b>add-output</b> [<b>--max-size</b>=<u>SIZE</u>]
             [<b>--name</b>=<u>NAME</u>] [<b>--session</b>=<u>SESSION</u>]
             (<b>--ctrl-url</b>=<u>URL</u> <b>--data-url</b>=<u>URL</u> | <u>URL</u>)

       Show the snapshot output of a recording session:

       <b>lttng</b> [<u>GENERAL</u> <u>OPTIONS</u>] <b>snapshot</b> <b>list-output</b> [<b>--session</b>=<u>SESSION</u>]

       Remove the snapshot output from a recording session:

       <b>lttng</b> [<u>GENERAL</u> <u>OPTIONS</u>] <b>snapshot</b> <b>del-output</b> [<b>--session</b>=<u>SESSION</u>] <b>1</b>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The <b>lttng</b> <b>snapshot</b> command can take a snapshot of, add or remove a snapshot output, and show the snapshot
       output of:

       With the <b>--session</b>=<u>SESSION</u> option
           The recording session named <u>SESSION</u>.

       Without the <b>--session</b> option
           The current recording session (see <b><a href="../man7/lttng-concepts.7.html">lttng-concepts</a></b>(7) to learn more about the current recording
           session).

       See <b><a href="../man7/lttng-concepts.7.html">lttng-concepts</a></b>(7) to learn more about recording sessions.

       A <u>snapshot</u> is a dump of the current sub-buffers of all the channels of the selected recording session.

       When LTTng takes a snapshot, it sends the sub-buffer dump of the selected recording session to the local
       file system or over the network to a listening relay daemon (<b><a href="../man8/lttng-relayd.8.html">lttng-relayd</a></b>(8)). See the “Snapshot output”
       section below to learn more.

       When LTTng takes a snapshot, it does NOT clear the sub-buffers of the selected recording session. In
       other words, different snapshots of the selected recording session can contain the same event records.

       You must have created the selected recording session in snapshot mode (see the <b>--snapshot</b> option of the
       <b><a href="../man1/lttng-create.1.html">lttng-create</a></b>(1) command as well as <b><a href="../man7/lttng-concepts.7.html">lttng-concepts</a></b>(7) to learn more about recording session modes) to use
       the <b>snapshot</b> command.

       A <b>snapshot-session</b> trigger action can also take a recording session snapshot (see <b><a href="../man1/lttng-add-trigger.1.html">lttng-add-trigger</a></b>(1)).

       See the “EXAMPLES” section below for usage examples.

       If you want, instead, to keep all the trace data, but divide it into archived chunks which are then, like
       snapshots, ready to be processed, see the recording session rotation feature in <b><a href="../man7/lttng-concepts.7.html">lttng-concepts</a></b>(7). Trace
       chunk archives do NOT overlap like snapshots can.

       <b>Note</b>

           Before you take a snapshot on a system with a high event throughput, the LTTng project recommends
           that you first run the <b><a href="../man1/lttng-stop.1.html">lttng-stop</a></b>(1) command. Otherwise, the snapshot could contain “holes”, the
           result of the tracers overwriting unconsumed trace packets during the snapshot operation.

           After LTTng writes the snapshot trace data, you can restart the recording session with the <b><a href="../man1/lttngstart.1.html">lttng-</a></b>
           <b><a href="../man1/lttngstart.1.html">start</a></b>(1) command.

   <b>Snapshot</b> <b>output</b>
       When you take a recording session snapshot with the <b>record</b> action, LTTng writes the snapshot trace files
       to:

       If you specify the <u>URL</u> non-option argument or the <b>--ctrl-url</b> and <b>--data-url</b> options
           The output defined by the <u>URL</u> non-option argument or by the arguments of the options.

           See <b><a href="../man1/lttng-create.1.html">lttng-create</a></b>(1) for the format of <u>URL</u>.

       Otherwise
           The snapshot output of the selected recording session.

           Add a snapshot output to a recording session with the <b>add-output</b> action. As of LTTng 2.13.14, you may
           only add one snapshot output to a given recording session.

           When you create a snapshot mode recording session with the <b>--snapshot</b> option of the <b><a href="../man1/lttng-create.1.html">lttng-create</a></b>(1)
           command, and without its <b>--no-output</b> option, the <b>create</b> command automatically adds a snapshot output
           named <b>snapshot-1</b> to the created recording session:

           With its <b>--output</b>, <b>--set-url</b>, <b>--ctrl-url</b>, or <b>--data-url</b> options
               Equivalent to using the <b>add-output</b> action with the provided or equivalent URL(s) immediately
               after creating the recording session.

           Otherwise
               A subdirectory, under the <b>$LTTNG_HOME/lttng-traces</b> (<b>$LTTNG_HOME</b> defaults to <b>$HOME</b>) directory, of
               which the name contains the recording session name and the date/time.

           Show the current snapshot output of a recording session with the <b>list-output</b> action.

           Remove the snapshot output of a recording session with the <b>del-output</b> action.

       For both the <b>record</b> and <b>add-output</b> actions:

       •   Assign a name to a snapshot output with the <b>--name</b>=<u>NAME</u> option.

           <u>NAME</u> becomes part of the snapshot trace file names which LTTng sends to this output.

       •   By default, the snapshot files can be as big as the sum of the sizes of all the sub-buffers of all
           the channels of the selected recording session.

           Set the maximum total size of all the snapshot trace files LTTng writes with the <b>--max-size</b> option.

</pre><h4><b>OPTIONS</b></h4><pre>
       See <b><a href="../man1/lttng.1.html">lttng</a></b>(1) for <u>GENERAL</u> <u>OPTIONS</u>.

   <b>Recording</b> <b>target</b>
       <b>-s</b> <u>SESSION</u>, <b>--session</b>=<u>SESSION</u>
           Take a snapshot of the sub-buffers of the recording session named <u>SESSION</u> instead of the current
           recording session.

   <b>Output</b>
       See the “Snapshot output” section above.

       <b>-C</b> <u>URL</u>, <b>--ctrl-url</b>=<u>URL</u>
           Set the control path URL to <u>URL</u>.

           You must also use the <b>--data-url</b> option.

           See <b><a href="../man1/lttng-create.1.html">lttng-create</a></b>(1) for the format of <u>URL</u>.

       <b>-D</b> <u>URL</u>, <b>--data-url</b>=<u>URL</u>
           Set the trace data path URL to <u>URL</u>.

           You must also use the <b>--ctrl-url</b> option.

           See <b><a href="../man1/lttng-create.1.html">lttng-create</a></b>(1) for the format of <u>URL</u>.

       <b>-m</b> <u>SIZE</u>, <b>--max-size</b>=<u>SIZE</u>
           Set the maximum total size of all the snapshot trace files LTTng writes when taking a snapshot to
           <u>SIZE</u> bytes.

           The <b>k</b> (KiB), <b>M</b> (MiB), and <b>G</b> (GiB) suffixes are supported.

       <b>-n</b> <u>NAME</u>, <b>--name</b>=<u>NAME</u>
           Assign the name <u>NAME</u> to the snapshot output.

   <b>Program</b> <b>information</b>
       <b>-h</b>, <b>--help</b>
           Show help.

           This option attempts to launch <b><a href="file:///usr/lib/w3m/cgi-bin/w3mman2html.cgi?man">/usr/bin/man</a></b> to view this manual page. Override the manual pager path
           with the <b>LTTNG_MAN_BIN_PATH</b> environment variable.

       <b>--list-options</b>
           List available command options and quit.

</pre><h4><b>EXIT</b> <b>STATUS</b></h4><pre>
       <b>0</b>
           Success

       <b>1</b>
           Command error

       <b>2</b>
           Undefined command

       <b>3</b>
           Fatal error

       <b>4</b>
           Command warning (something went wrong during the command)

</pre><h4><b>ENVIRONMENT</b></h4><pre>
       <b>LTTNG_ABORT_ON_ERROR</b>
           Set to <b>1</b> to abort the process after the first error is encountered.

       <b>LTTNG_HOME</b>
           Path to the LTTng home directory.

           Defaults to <b>$HOME</b>.

           Useful when the Unix user running the commands has a non-writable home directory.

       <b>LTTNG_MAN_BIN_PATH</b>
           Absolute path to the manual pager to use to read the LTTng command-line help (with <b><a href="../man1/lttng-help.1.html">lttng-help</a></b>(1) or
           with the <b>--help</b> option) instead of <b><a href="file:///usr/lib/w3m/cgi-bin/w3mman2html.cgi?man">/usr/bin/man</a></b>.

       <b>LTTNG_SESSION_CONFIG_XSD_PATH</b>
           Path to the directory containing the <b>session.xsd</b> recording session configuration XML schema.

       <b>LTTNG_SESSIOND_PATH</b>
           Absolute path to the LTTng session daemon binary (see <b><a href="../man8/lttng-sessiond.8.html">lttng-sessiond</a></b>(8)) to spawn from the <b><a href="../man1/lttngcreate.1.html">lttng-</a></b>
           <b><a href="../man1/lttngcreate.1.html">create</a></b>(1) command.

           The <b>--sessiond-path</b> general option overrides this environment variable.

</pre><h4><b>FILES</b></h4><pre>
       <b>$LTTNG_HOME/.lttngrc</b>
           Unix user’s LTTng runtime configuration.

           This is where LTTng stores the name of the Unix user’s current recording session between executions
           of <b><a href="../man1/lttng.1.html">lttng</a></b>(1).  <b><a href="../man1/lttng-create.1.html">lttng-create</a></b>(1) and <b><a href="../man1/lttng-set-session.1.html">lttng-set-session</a></b>(1) set the current recording session.

       <b>$LTTNG_HOME/lttng-traces</b>
           Default output directory of LTTng traces in local and snapshot modes.

           Override this path with the <b>--output</b> option of the <b><a href="../man1/lttng-create.1.html">lttng-create</a></b>(1) command.

       <b>$LTTNG_HOME/.lttng</b>
           Unix user’s LTTng runtime and configuration directory.

       <b>$LTTNG_HOME/.lttng/sessions</b>
           Default directory containing the Unix user’s saved recording session configurations (see <b><a href="../man1/lttngsave.1.html">lttng-</a></b>
           <b><a href="../man1/lttngsave.1.html">save</a></b>(1) and <b><a href="../man1/lttng-load.1.html">lttng-load</a></b>(1)).

       <b>/etc/lttng/sessions</b>
           Directory containing the system-wide saved recording session configurations (see <b><a href="../man1/lttng-save.1.html">lttng-save</a></b>(1) and
           <b><a href="../man1/lttng-load.1.html">lttng-load</a></b>(1)).

       <b>Note</b>

           <b>$LTTNG_HOME</b> defaults to the value of the <b>HOME</b> environment variable.

</pre><h4><b>EXAMPLES</b></h4><pre>
       <b>Example</b> <b>1.</b> <b>Take</b> <b>a</b> <b>snapshot</b> <b>of</b> <b>the</b> <b>current</b> <b>recording</b> <b>session,</b> <b>sending</b> <b>the</b> <b>trace</b> <b>files</b> <b>to</b> <b>its</b> <b>snapshot</b>
       <b>output.</b>

               $ lttng snapshot record

       <b>Example</b> <b>2.</b> <b>Take</b> <b>a</b> <b>snapshot</b> <b>of</b> <b>a</b> <b>specific</b> <b>recording</b> <b>session,</b> <b>giving</b> <b>it</b> <b>a</b> <b>custom</b> <b>name.</b>

           See the <b>--session</b> and <b>--name</b> options.

               $ lttng snapshot record --session=my-session --name=SNAP

       <b>Example</b> <b>3.</b> <b>Take</b> <b>a</b> <b>snapshot</b> <b>of</b> <b>the</b> <b>current</b> <b>recording</b> <b>session,</b> <b>sending</b> <b>the</b> <b>trace</b> <b>files</b> <b>to</b> <b>a</b> <b>custom</b>
       <b>location.</b>

           See the “Output directory” section of <b><a href="../man8/lttng-relayd.8.html">lttng-relayd</a></b>(8) to understand where the relay daemon to connect
           to (<b>3.96.87.215</b>) writes the received traces.

               $ lttng snapshot record net://3.96.87.215

       <b>Example</b> <b>4.</b> <b>Replace</b> <b>the</b> <b>snapshot</b> <b>output</b> <b>of</b> <b>a</b> <b>specific</b> <b>recording</b> <b>session</b> <b>with</b> <b>a</b> <b>local</b> <b>file</b> <b>system</b> <b>path.</b>

           See the <b>--session</b> option.

               $ lttng snapshot del-output --session=monk 1
               $ lttng snapshot add-output --session=monk \
                                file:///path/to/snapshots

       <b>Example</b> <b>5.</b> <b>Take</b> <b>a</b> <b>snapshot</b> <b>of</b> <b>the</b> <b>current</b> <b>recording</b> <b>session,</b> <b>making</b> <b>sure</b> <b>its</b> <b>size</b> <b>is</b> <b>not</b> <b>over</b> <b>4</b> <b>MiB.</b>

           See the <b>--max-size</b> option.

               $ lttng snapshot record --max-size=4M

</pre><h4><b>RESOURCES</b></h4><pre>
       •   LTTng project website &lt;https://lttng.org&gt;

       •   LTTng documentation &lt;https://lttng.org/docs&gt;

       •   LTTng bug tracker &lt;https://bugs.lttng.org&gt;

       •   Git repositories &lt;https://git.lttng.org&gt;

       •   GitHub organization &lt;https://github.com/lttng&gt;

       •   Continuous integration &lt;https://ci.lttng.org/&gt;

       •   Mailing list &lt;https://lists.lttng.org/&gt; for support and development: <b><a href="mailto:lttng-dev@lists.lttng.org">lttng-dev@lists.lttng.org</a></b>

       •   IRC channel &lt;irc://irc.oftc.net/lttng&gt;: <b>#lttng</b> on <b>irc.oftc.net</b>

</pre><h4><b>COPYRIGHT</b></h4><pre>
       This program is part of the LTTng-tools project.

       LTTng-tools is distributed under the GNU General Public License version 2
       &lt;<a href="http://www.gnu.org/licenses/old-licenses/gpl-2.0.en.html">http://www.gnu.org/licenses/old-licenses/gpl-2.0.en.html</a>&gt;. See the <b>LICENSE</b>
       &lt;https://github.com/lttng/lttng-tools/blob/master/LICENSE&gt; file for details.

</pre><h4><b>THANKS</b></h4><pre>
       Special thanks to Michel Dagenais and the DORSAL laboratory &lt;<a href="http://www.dorsal.polymtl.ca/">http://www.dorsal.polymtl.ca/</a>&gt; at École
       Polytechnique de Montréal for the LTTng journey.

       Also thanks to the Ericsson teams working on tracing which helped us greatly with detailed bug reports
       and unusual test cases.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man1/lttng.1.html">lttng</a></b>(1), <b><a href="../man1/lttng-create.1.html">lttng-create</a></b>(1), <b><a href="../man7/lttng-concepts.7.html">lttng-concepts</a></b>(7)

LTTng 2.13.14                                     14 June 2021                                 <u><a href="../man1/LTTNG-SNAPSHOT.1.html">LTTNG-SNAPSHOT</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>