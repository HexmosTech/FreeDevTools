<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>coqos_add - Add a managed data stream</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/plc-utils-extra">plc-utils-extra_0.0.6+git20250218.cbf52f68-1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       coqos_add - Add a managed data stream

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>coqos_add</b> <u>action</u> <u>priority</u> <u>rate</u> <u>ttl</u> <u>operand</u> <u>condition</u> [<u>condition</u>] [...]  [<u>device</u>] [...]

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>This</b> <b>page</b> <b>is</b> <b>under</b> <b>construction.</b>

       Add  a  managed  stream  to  one  or  more  powerline devices using the VS_CONN_ADD message.  Consult the
       Qualcomm Atheros Firmware Technical Reference Manual for a description of this  vendor  specific  message
       type.

       This program is part of the Qualcomm Atheros Powerline Toolkit.  See the <b>plc</b> man page for an overview and
       installation instructions.

</pre><h4><b>BACKGROUND</b></h4><pre>
       Bandwidth  management  prioritizes  streams  so  that  data  from lowest priority stream is dropped first
       whenever one of the following conditions is detected.  This ensures that the remaining  streams  continue
       operate at their full pontential.

       <b>Degraded</b> <b>line</b> <b>condition</b>
              The  channel  degrades  to  the  point  where  the  available PHY rate from the transmitter to the
              receiver is too low due to the variability of the power line.s characteristics.

       <b>Over</b> <b>subscription</b>
              Too much data is being sent per second, resulting in packet loss due to excessive  collisions  due
              to excessive channel oversubscription.

       <b>Lack</b> <b>of</b> <b>channel</b> <b>Capacity</b>
              On starting new source there is not enough channel capacity to support it.

</pre><h4><b>OPTIONS</b></h4><pre>
       -<b>e</b>     Redirects  stderr  messages  to  stdout.   By  convention progress messages and error messages are
              printed on stderr while primary program output is printed  on  stdout.   This  option  prints  all
              output on stdout in cases where this is desired.

       -<b>i</b> <u>interface</u>
              Select  the  host  Ethernet  interface.   All  requests  are sent via this host interface and only
              reponses received via this host interface are recognized.  The default interface is  <b>eth1</b>  because
              most  people  use <b>eth0</b> as their principle network connection; however, if environment string "PLC"
              is defined then it takes precedence over the default interface.  This option then takes precedence
              over either default.

       -<b>q</b>     Suppresses status messages on stderr.

       -<b>r</b>     Display relative memory offsets on output.  This option is the default.

       -<b>v</b>     Prints additional information on stdout.  In  particular,  this  option  dumps  outgoing  Ethernet
              packets on stdout.

       -<b>?</b>,--<b>help</b>
              Displays  program help information on stderr.  This option takes precedence over all other options
              on the command line except version information.

       -<b>!</b>,--<b>version</b>
              Displays program version information on stderr.  This  option  takes  precedence  over  all  other
              options on the command line except help information.  Use this option when sending screen dumps to
              Atheros technical staff.

</pre><h4><b>ARGUMENTS</b></h4><pre>
       <u>action</u> The  action  taken  for  frames  that  satisfy  the selection criteria.  Valid actions are "<b>CAP0</b>",
              "<b>CAP1</b>", "<b>CAP2</b>", "<b>CAP3</b>" to specify the channel access priority queue.  CAP0 and CAP1 are  for  best
              effort  data.   CAP2 is for video and non urgent MMEs.  CAP3 is for voice, urgent MMEs and control
              messages such as IGMP and MLD.

       <u>priority</u>
              The relative priority of this stream.  Valid values are  <b>0</b>  through  <b>15</b>  where  0  is  the  lowest
              priority and 15 is the highest.

       <u>destination</u>
              The destination MAC address.

       <u>rate</u>   The  average  expected  data  rate for this stream.  Valid values are <b>1</b> to <b>9000</b> where units are in
              10kbps so the minimum rate is 10kbps and the maximum rate is 90mbps.

       <u>ttl</u>    The time to live for this  stream.   Valid  values  are  10000  to  2000000  where  units  are  in
              microseconds so the minimum is time is 10 milliseconds and the maximum time is 2 seconds.

       <u>operand</u>
              The  operand  specifies the logical relationship between conditions before the <u>action</u> to be taken.
              Valid operands are listed and described under <b>OPERANDS</b>.

       <u>condition</u>
              A conditional expression consisting of a <u>field</u>, <u>operator</u>  and  <u>value</u>.   See  <b>CONDITIONS</b>  for  more
              information.

       <u>device</u> The  MAC  address of some powerline device.  More than one address may be specified on the command
              line.  If more than one address is specified then operations are performed on each device in turn.
              The default address is "<b>local</b>".  See <b>DEVICES</b> for more information.

</pre><h4><b>CONDITIONS</b></h4><pre>
       A condition consists of a <u>field</u>, an <u>operator</u> and a <u>value</u>.   One  condition  is  required  but  three  are
       permitted.   Condition order is not important but all conditions must appear after the <u>operand</u> and before
       the <u>control</u>.

       <u>field</u>  The field is the part of the Ethernet frame to be examined.  Some fields are not  valid  for  some
              actions  but  this  program  does  not enforce such rules since validation is performed by runtime
              firmware on each device.  Recognized fields are listed and described under <b>FIELDS</b>.

       <u>operator</u>
              The operator specifies the relationsip that must exist between the <u>field</u> and <u>value</u>  in  order  for
              the  <u>condition</u>  to  evaluate  <b>True</b>.   Currently,  only  equality  operators  are supported.  Valid
              operators are listed and described under <b>OPERATORS</b>.

       <u>value</u>  The value must be appropriate to the field type.  Some fields are MAC or IP  addresses,  some  are
              integers,  some  are  bitmaps  and  others  are  states.  Integers and bitmaps may be expressed in
              binary, decimal or hexadecimal format.  Binary values staRt with  <b>0b</b>.   Hexadecimal  values  start
              with  <b>0x</b>.   States  are expressed using keywords.  Users are responsible for knowing how many bits
              are significant for each type of value.  Valid  values  are  described  along  with  fields  under
              <b>FIELDS</b>.

</pre><h4><b>OPERANDS</b></h4><pre>
       The  <u>operand</u> indicates the logical relationship that must exist between conditions in the rule set before
       the action is applied to a frame.  Operands are expressed as discrete  alphanumeric  strings  entered  in
       upper,  lower  or mixed character case.  Failure to enter a known operand will result in an error message
       that lists all possible operands.  They are positon sensitive.  One operand is allowed and it must appear
       after the <u>action</u> and before any <u>condition</u>.

       <b>Any</b>    Apply the action to frames that satisfy <b>any</b> of the conditions.  This is equivalent to the  logical
              <b>or</b> operation.

       <b>All</b>    Apply  the action to frames that satisfy <b>all</b> of the conditions.  This is equivalent to the logical
              <b>and</b> operation.

       <b>Always</b> Apply the action to all frames, regardless of any and all conditions that may be specified.

</pre><h4><b>FIELDS</b></h4><pre>
       Fields indicate the portion of the frame that is inspected during selection and the size  and  format  of
       the  value  permited  in  the  condition  statement.  They are expressed as discrete alphanumeric strings
       entered in upper, lower or mixed character case.  Failure to enter a known field will result in an  error
       message that lists all possible fields.

       <b>ET</b>     A  16-bit  Ethertype expressed in decimal, hexadecimal or binary.  The format is described in IEEE
              Standard 802-2001 [4].

       <b>EthDA</b>  A 48-bit Ethernet destination address expressed in hexadecimal.  The format is described  in  IEEE
              Standard 802-2001 [4].

       <b>EthSA</b>  A  48-bit  Ethernet  source  address  expressed  in  hexadecimal.  The format is described in IEEE
              Standard 802-2001 [4].

       <b>VLANUP</b> An 8-bit Ethernet VLAN tag where the lower 3 bits are the User Priority sub-field of  a  VLAN  Tag
              defined  in  IEEE  Std  802.1Q-1998  (Virtual Bridged Local Area Networks) [11].  The upper 5 bits
              should be zero.

       <b>VLANID</b> A 16-bit VLAN identifier where the lower 12 bits are the VLAN Identifier (VID) defined in IEEE Std
              802.1Q-1998 (Virtual Bridged Local Area Networks) [11].  The upper 4 bits should be zero.

       <b>IPV4TOS</b>
              An 8-bit Type-of-Service code where the format is defined in the RFC 791 (Internet Protocol) [14].

       <b>IPV4PROT</b>
              An 8-bit Ethernet Protocol identifier.  The format is defined in the RFC 791  (Internet  Protocol)
              [14].

       <b>IPV4SA</b> A  32-bit  Internet  Protocol  source  address expressed in dotted-decimal notation.  The official
              format is defined in RFC 791 (Internet Protocol) [14].  Our implementation  permits  empty  octets
              and  leading zeros within fields.  For example, "..." is equivalent to "0.0.0.0 and "127..000.001"
              is equivalent to "127.0.0.1".

       <b>IPV4DA</b> A 32-bit Internet Protocol destination address expressed in dotted-decimal notation. The  official
              format is defined in RFC 791 (internet Protocol) [14]. Our implementation permits empty octets and
              leading  zeros  within  fields. For example, "..." is equivalent to "0.0.0.0 and "127..000.001" is
              equivalent to "127.0.0.1".

       <b>IPV6TC</b> An 8-bit Internet Protocol V6 traffic class expressed as defined in RFC  2460  (Internet  Protocol
              Version 6) [17].

       <b>IPV6FL</b> A  24-bit  IPV6  flow  label  where  the lower 20 bits are the IPv6 Flow Label defined in RFC 2460
              (Internat Protocol Version 6) [17].  The upper 4 bits should be zero.  The value  can  be  entered
              either as a decimal, binary or hex integer.

       <b>IPV6SA</b> A  128-bit  IPV6  source  address expressed as colon-separated hexadecmial quartets (octet pairs).
              The official format is defined in RFC 2460 (Internet Protocol Version 6) [17].  Our implementation
              permits multiple empty fields, abreviated fields and leading zeros within fields.   When  multiple
              empty   fields   appear,   only   the   right-most  occurance  expands  to  zeros.   For  example,
              "FFFF::DDDD::BBBB::AAAA" is equivalent to "FFFF:0000:DDDD:0000:BBBB:0000:0000:AAAA".

       <b>IPV6DA</b> A 128-bit IPV6 destination  address  expressed  as  colon-separated  hexadecimal  quartets  (octet
              pairs).   The  official  format  is  defined  in RFC 2460 (Internet Protocol Version 6) [17].  Our
              implementation permits multiple empty fields, abbreviated fields and leading zeros within  fields.
              When  multiple  empty fields appear, only the right-most occurance expands to zeros.  For example,
              "AAAA::BBBB::CCCC::DDDD" is equivalent to "AAAA:0000:BBBB:0000:CCCC:0000:0000:DDDD".

       <b>TCPSP</b>  A 16-bit TCP source port as a decimal integer.  The format is defined  in  RFC  793  (Transmission
              Control Protocol [15]).

       <b>TCPDP</b>  A  16-bit  TCP  destination port expressed as a decimal integer.  The format is defined in RFC 793
              (Transmission Control Protocol [15]).

       <b>UDPSP</b>  A 16-bit UDP source port expressed as a decimal integer.  The format is defined in RFC  768  (User
              Datagram Protocol [13]).

       <b>UDPDP</b>  A  16-bit  UDP  destination port expressed as a decimal integer.  The format is defined in RFC 768
              (User Datagram Protocol [13]).

       <b>IPSP</b>   A 16-bit IP source port expressed as a decimal integer.  This condition applies to either  TCP  or
              UDP packets, depending on the protocol used, and is valid only for actions "<b>CAP0</b>", "<b>CAP1</b>", "<b>CAP2</b>",
              "<b>CAP3</b>" and "<b>Drop</b>".

       <b>IPDP</b>   A 16-bit IP destination port expressed as a decimal integer.  This condition applies to either TCP
              or  UDP  packets,  depending  on  the protocol used, and is valid only for actions "<b>CAP0</b>", "<b>CAP1</b>",
              "<b>CAP2</b>", "<b>CAP3</b>" and "<b>Drop</b>".

       <b>MME</b>    A 24-bit Atheros HomePlugAV Management Message type expressed in hexadecimal.  The first  byte  is
              the  MMV  and the next two bytes are the MMTYPE for a HomePlug AV frame as defined in the HomePlug
              AV Specification.  The MMTYPE will match any MME sub-type (Request; Confirm; Indicate;  Response).
              This field is only valid for action "<b>Boost</b>".

</pre><h4><b>OPERATORS</b></h4><pre>
       An  operator  indicates  an  equality between a <u>field</u> and a <u>value</u>.  An operator is an alphanumeric string
       entered in upper, lower or mixed character case.  Failure to enter a known operator  will  result  in  an
       error  message  that  lists  all  possible  operators.   Operators are position sensitive and must appear
       between each <u>field</u> and <u>value</u>.

       <b>Is</b>     Indicates that the frame field must equal the associated value for the condition to evaluate true.

       <b>Not</b>    Indicates that the frame field must not equal the associated value for the condition to true true.

</pre><h4><b>STATES</b></h4><pre>
       A state is a special case of <u>value</u>.

       <b>True</b>,<b>On</b>,<b>Yes</b>,<b>Present</b>
              Indicates a positive state or presence of some  entity.   All  are  equivalent  and  can  be  used
              interchangeably.  Double negatives are permitted so "Is True" is equvalent to "Not False".

       <b>False</b>,<b>Off</b>,<b>No</b>,<b>Missing</b>
              Indicates  a  negative  state  or  absence  of  some  entity.   ALl are equivalent and can be used
              interchangeably.  Double negatives are permitted so "Is False" is equvalent to "Not True".

</pre><h4><b>DEVICES</b></h4><pre>
       Powerline devices use Ethernet Media Access Control (MAC) addresses.  A MAC address  is  a  48-bit  value
       entered  as  12 hexadecimal digits in upper, lower or mixed character case.  Octets may be separated with
       colons for clarity.  For example, "00b052000001", "00:b0:52:00:00:01" and "00b052:000001" are  valid  and
       equivalent.

       The following MAC addresses are common or special and may be entered by name instead of number.

       <b>all</b>    Same as "broadcast".

       <b>broadcast</b>
              A  synonym  for  the  Ethernet  broadcast address, <b>FF:FF:FF:FF:FF:FF</b>.  All devices, whether local,
              remote or foreign recognize messages sent to this address.  A remote device is any device  at  the
              far end of a powerline connection.  A foreign device is any device not manufactured by Atheros.

       <b>local</b>  A   synonym   for   the   Qualcomm   Atheros  vendor  specific  Local  Management  Address  (LMA),
              <b>00:B0:52:00:00:01</b>.  All local Atheros devices  recognize  this  address  but  remote  and  foreign
              devices  do  not.   A  remote  device  is  any device at the far end of a powerline connection.  A
              foreign device is any device not manufactured by Atheros.

</pre><h4><b>REFERENCES</b></h4><pre>
       See the Qualcomm Atheros HomePlug AV Firmware Technical Reference Manual for more information.

</pre><h4><b>DISCLAIMER</b></h4><pre>
       Atheros HomePlug AV Vendor Specific Management Message structure and content is proprietary  to  Qualcomm
       Atheros, Ocala FL USA.  Consequently, public information may not be available.  Qualcomm Atheros reserves
       the  right  to modify message structure and content in future firmware releases without any obligation to
       notify or compensate users of this program.

</pre><h4><b>EXAMPLES</b></h4><pre>
       The following example adds a temporary stream to device <b>00:b0:52:BA:BE:01</b>  which  will  then  manage  the
       bandwidth for that stream until removed with program <b>coqos_rel</b>.

            # coqos_add CAP2 15 5000 200000 any ethda is 192.168.105 00:B0:52:BA:BE:01

       This adds a stream to the bandwidth manager that sets all traffic to destination address of 192.168.0.105
       as  priority  15  (the  highest  priority).   This  would then need to also be sent to each device on the
       network.  Refer to int6krule for more details on how to specify conditions.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b>coqos_info</b>(<b>1</b>), <b>coqos_man</b>(<b>1</b>), <b>coqos_mod</b>(<b>1</b>), <b>coqos_rel</b>(<b>1</b>)

</pre><h4><b>CREDITS</b></h4><pre>
        Bill Wike
        Nathaniel Houghton
        Charles Maier

open-plc-utils-0.0.3                              November 2013                                     <u><a href="../man1/coqos_add.1.html">coqos_add</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>