<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>t.rast.accumulate  - Computes cyclic accumulations of a space time raster dataset.</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/grass-doc">grass-doc_8.4.1-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       <b>t.rast.accumulate</b>  - Computes cyclic accumulations of a space time raster dataset.

</pre><h4><b>KEYWORDS</b></h4><pre>
       temporal, accumulation, raster, time

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>t.rast.accumulate</b>
       <b>t.rast.accumulate</b> <b>--help</b>
       <b>t.rast.accumulate</b>  [-<b>nr</b>] <b>input</b>=<u>name</u> <b>output</b>=<u>name</u>  [<b>lower</b>=<u>name</u>]   [<b>upper</b>=<u>name</u>]  <b>start</b>=<u>string</u>  [<b>stop</b>=<u>string</u>]
       <b>cycle</b>=<u>string</u>      [<b>offset</b>=<u>string</u>]        [<b>granularity</b>=<u>string</u>]       <b>basename</b>=<u>string</u>       [<b>suffix</b>=<u>string</u>]
       <b>limits</b>=<u>lower,upper</u>     [<b>scale</b>=<u>float</u>]      [<b>shift</b>=<u>float</u>]     [<b>method</b>=<u>string</u>]     [--<b>overwrite</b>]    [--<b>help</b>]
       [--<b>verbose</b>]  [--<b>quiet</b>]  [--<b>ui</b>]

   <b>Flags:</b>
       <b>-n</b>
           Register empty maps in the output space time raster dataset, otherwise they will be deleted

       <b>-r</b>
           Reverse time direction in cyclic accumulation

       <b>--overwrite</b>
           Allow output files to overwrite existing files

       <b>--help</b>
           Print usage summary

       <b>--verbose</b>
           Verbose module output

       <b>--quiet</b>
           Quiet module output

       <b>--ui</b>
           Force launching GUI dialog

   <b>Parameters:</b>
       <b>input</b>=<u>name</u> <b>[required]</b>
           Name of the input space time raster dataset

       <b>output</b>=<u>name</u> <b>[required]</b>
           Name of the output space time raster dataset

       <b>lower</b>=<u>name</u>
           Input space time raster dataset that defines the lower threshold, values lower  than  this  threshold
           are excluded from accumulation

       <b>upper</b>=<u>name</u>
           Input  space  time raster dataset that defines the upper threshold, values higher than this threshold
           are excluded from accumulation

       <b>start</b>=<u>string</u> <b>[required]</b>
           The temporal starting point to begin the accumulation, eg ’2001-01-01’

       <b>stop</b>=<u>string</u>
           The temporal date to stop the accumulation, eg ’2009-01-01’

       <b>cycle</b>=<u>string</u> <b>[required]</b>
           The temporal cycle to restart the accumulation, eg ’12 months’

       <b>offset</b>=<u>string</u>
           The temporal offset to the beginning of the next cycle, eg ’6 months’

       <b>granularity</b>=<u>string</u>
           The granularity for accumulation ’1 day’
           Default: <u>1</u> <u>day</u>

       <b>basename</b>=<u>string</u> <b>[required]</b>
           Basename of the new generated output maps
           A numerical suffix separated by an underscore will be attached to create a unique identifier

       <b>suffix</b>=<u>string</u>
           Suffix to add to the basename. Set ’gran’ for granularity, ’time’ for the full time format, ’num’ for
           numerical suffix with a specific number of digits (default %05)
           Default: <u>gran</u>

       <b>limits</b>=<u>lower,upper</u> <b>[required]</b>
           Use these limits in case lower and/or upper input space time  raster  datasets  are  not  defined  or
           contain NULL values

       <b>scale</b>=<u>float</u>
           Scale factor for input space time raster dataset

       <b>shift</b>=<u>float</u>
           Shift factor for input space time raster dataset

       <b>method</b>=<u>string</u>
           This  method  will  be  applied  to  compute  the accumulative values from the input maps in a single
           granule
           Growing Degree Days or Winkler indices; Mean: sum(input maps)/(number of  input  maps);  Biologically
           Effective Degree Days; Huglin Heliothermal index
           Options: <u>mean,</u> <u>gdd,</u> <u>bedd,</u> <u>huglin</u>
           Default: <u>mean</u>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <u>t.rast.accumulate</u>  is  designed  to  perform  temporal accumulations of space time raster datasets.  This
       module expects a space time raster dataset as input that will be sampled by a given <b>granularity</b>. All maps
       that have the start time during the actual granule will  be  accumulated  with  the  predecessor  granule
       accumulation  result  using  the raster module r.series.accumulate. The default granularity is 1 day, but
       any temporal granularity can be set.

       The <b>start</b> time and the <b>end</b>  time  of  the  accumulation  process  must  be  set,  eg.  <b>start="2000-03-01"</b>
       <b>end="2011-01-01"</b>.  In addition, a <b>cycle</b>, eg. <b>cycle="8</b> <b>months"</b>, can be specified, that defines after which
       interval of time the accumulation process restarts. The <b>offset</b> option specifies the time that  should  be
       skipped between two cycles, eg. <b>offset="4</b> <b>months"</b>.

       The  <b>lower</b>  and  <b>upper</b>  <b>limits</b>  of the accumulation process can be set, either by using space time raster
       datasets or by using fixed values for all raster cells and time steps. The raster maps that  specify  the
       lower  and  upper  limits  of the actual granule will be detected using the following temporal relations:
       equals, during, overlaps, overlapped and contains. First, all maps with time stamps equal to the  current
       granule  will  be  detected,  the  first  lower  map  and the first upper map found will be used as limit
       definitions.  If no equal maps are found, then maps with a temporal during relation  are  detected,  then
       maps  that  temporally  overlap the actual granules, until maps that have a temporal contain relation are
       detected. If no maps are found or lower/upper STRDS are not defined, then the <b>limits</b> option is used,  eg.
       <b>limits=10,30</b>.

       The <b>upper</b> <b>limit</b> is only used in the Biologically Effective Degree Days calculation.

       The  options  <b>shift</b>, <b>scale</b> and <b>method</b> are passed to r.series.accumulate.  Please refer to the manual page
       of r.series.accumulate for detailed option description.

       The <b>output</b> is a new space time raster dataset with the provided start  time,  end  time  and  granularity
       containing  the  accumulated  raster  maps.  The <b>base</b> name of the generated maps must always be set.  The
       <b>output</b> space time raster  dataset  can  then  be  analyzed  using  t.rast.accdetect  to  detect  specific
       accumulation patterns.

</pre><h4><b>EXAMPLE</b></h4><pre>
       This  is  an  example  how to accumulate the daily mean temperature of Europe from 1990 to 2000 using the
       growing-degree-day method to detect grass hopper reproduction cycles that are critical to agriculture.
       # Get the temperature data
       wget <a href="http://www-pool.math.tu-berlin.de/~soeren/grass/temperature_mean_1990_2000_daily_celsius.tar.gz">http://www-pool.math.tu-berlin.de/~soeren/grass/temperature_mean_1990_2000_daily_celsius.tar.gz</a>
       # Create a temporary project directory
       mkdir -p /tmp/grassdata/LL
       # Start GRASS and create a new project with PERMANENT mapset
       grass -c EPSG:4326 /tmp/grassdata/LL/PERMANENT
       # Import the temperature data
       t.rast.import input=temperature_mean_1990_2000_daily_celsius.tar.gz \
           output=temperature_mean_1990_2000_daily_celsius directory=<a href="file:/tmp">/tmp</a>
       # We need to set the region correctly
       g.region -p raster=`t.rast.list input=temperature_mean_1990_2000_daily_celsius column=name | tail -1`
       # We can zoom to the raster map
       g.region -p zoom=`t.rast.list input=temperature_mean_1990_2000_daily_celsius column=name | tail -1`
       #############################################################################
       #### ACCUMULATION USING GDD METHOD ##########################################
       #############################################################################
       # The computation of grashopper pest control cycles is based on:
       #
       #   Using Growing Degree Days For Insect Management
       #   Nancy E. Adams
       #   Extension Educator, Agricultural Resources
       #
       # available here: <a href="http://extension.unh.edu/agric/gddays/docs/growch.pdf">http://extension.unh.edu/agric/gddays/docs/growch.pdf</a>
       # Now we compute the Biologically Effective Degree Days
       # from 1990 - 2000 for each year (12 month cycle) with
       # a granularity of one day. Base temperature is 10°C, upper limit is 30°C.
       # Hence the accumulation starts at 10°C and does not accumulate values above 30°C.
       t.rast.accumulate input="temperature_mean_1990_2000_daily_celsius" \
           output="temperature_mean_1990_2000_daily_celsius_accumulated_10_30" \
           limits="10,30" start="1990-01-01" stop="2000-01-01" cycle="12 months" \
           basename="temp_acc_daily_10_30" method="bedd"
       #############################################################################
       #### ACCUMULATION PATTERN DETECTION #########################################
       #############################################################################
       # Now we detect the three grasshopper pest control cycles
       # First cycle at 325°C - 427°C GDD
       t.rast.accdetect input=temperature_mean_1990_2000_daily_celsius_accumulated_10_30@PERMANENT \
           occ=leafhopper_occurrence_c1_1990_2000 start="1990-01-01" stop="2000-01-01" \
           cycle="12 months" range=325,427 basename=lh_c1 indicator=leafhopper_indicator_c1_1990_2000
       # Second cycle at 685°C - 813°C GDD
       t.rast.accdetect input=temperature_mean_1990_2000_daily_celsius_accumulated_10_30@PERMANENT \
           occ=leafhopper_occurrence_c2_1990_2000 start="1990-01-01" stop="2000-01-01" \
           cycle="12 months" range=685,813 basename=lh_c2 indicator=leafhopper_indicator_c2_1990_2000
       # Third cycle at 1047°C - 1179°C GDD
       t.rast.accdetect input=temperature_mean_1990_2000_daily_celsius_accumulated_10_30@PERMANENT \
           occ=leafhopper_occurrence_c3_1990_2000 start="1990-01-01" stop="2000-01-01" \
           cycle="12 months" range=1047,1179 basename=lh_c3 indicator=leafhopper_indicator_c3_1990_2000
       #############################################################################
       #### YEARLY SPATIAL OCCURRENCE COMPUTATION OF ALL CYCLES ####################
       #############################################################################
       # Extract the areas that have full cycles
       t.rast.aggregate input=leafhopper_indicator_c1_1990_2000 gran="1 year" \
           output=leafhopper_cycle_1_1990_2000_yearly method=maximum basename=li_c1
       t.rast.mapcalc input=leafhopper_cycle_1_1990_2000_yearly basename=lh_clean_c1 \
           output=leafhopper_cycle_1_1990_2000_yearly_clean \
           expression="if(leafhopper_cycle_1_1990_2000_yearly == 3, 1, null())"
       t.rast.aggregate input=leafhopper_indicator_c2_1990_2000 gran="1 year" \
           output=leafhopper_cycle_2_1990_2000_yearly method=maximum basename=li_c2
       t.rast.mapcalc input=leafhopper_cycle_2_1990_2000_yearly basename=lh_clean_c2 \
           output=leafhopper_cycle_2_1990_2000_yearly_clean \
           expression="if(leafhopper_cycle_2_1990_2000_yearly == 3, 2, null())"
       t.rast.aggregate input=leafhopper_indicator_c3_1990_2000 gran="1 year" \
           output=leafhopper_cycle_3_1990_2000_yearly method=maximum basename=li_c3
       t.rast.mapcalc input=leafhopper_cycle_3_1990_2000_yearly basename=lh_clean_c3 \
           output=leafhopper_cycle_3_1990_2000_yearly_clean \
           expression="if(leafhopper_cycle_3_1990_2000_yearly == 3, 3, null())"
       t.rast.mapcalc input=leafhopper_cycle_1_1990_2000_yearly_clean,leafhopper_cycle_2_1990_2000_yearly_clean,leafhopper_cycle_3_1990_2000_yearly_clean \
           basename=lh_cleann_all_cycles \
           output=leafhopper_all_cycles_1990_2000_yearly_clean \
           expression="if(isnull(leafhopper_cycle_3_1990_2000_yearly_clean), \
             if(isnull(leafhopper_cycle_2_1990_2000_yearly_clean), \
             if(isnull(leafhopper_cycle_1_1990_2000_yearly_clean), \
             null() ,1),2),3)"
       cat &gt; color.table &lt;&lt; EOF
       3 yellow
       2 blue
       1 red
       EOF
       t.rast.colors input=leafhopper_cycle_1_1990_2000_yearly_clean rules=color.table
       t.rast.colors input=leafhopper_cycle_2_1990_2000_yearly_clean rules=color.table
       t.rast.colors input=leafhopper_cycle_3_1990_2000_yearly_clean rules=color.table
       t.rast.colors input=leafhopper_all_cycles_1990_2000_yearly_clean rules=color.table
       #############################################################################
       ################ DURATION COMPUTATION #######################################
       #############################################################################
       # Extract the duration in days of the first cycle
       t.rast.aggregate input=leafhopper_occurrence_c1_1990_2000 gran="1 year" \
           output=leafhopper_min_day_c1_1990_2000 method=minimum basename=occ_min_day_c1
       t.rast.aggregate input=leafhopper_occurrence_c1_1990_2000 gran="1 year" \
           output=leafhopper_max_day_c1_1990_2000 method=maximum basename=occ_max_day_c1
       t.rast.mapcalc input=leafhopper_min_day_c1_1990_2000,leafhopper_max_day_c1_1990_2000 \
           basename=occ_duration_c1 \
           output=leafhopper_duration_c1_1990_2000 \
           expression="leafhopper_max_day_c1_1990_2000 - leafhopper_min_day_c1_1990_2000"
       # Extract the duration in days of the second cycle
       t.rast.aggregate input=leafhopper_occurrence_c2_1990_2000 gran="1 year" \
           output=leafhopper_min_day_c2_1990_2000 method=minimum basename=occ_min_day_c2
       t.rast.aggregate input=leafhopper_occurrence_c2_1990_2000 gran="1 year" \
           output=leafhopper_max_day_c2_1990_2000 method=maximum basename=occ_max_day_c2
       t.rast.mapcalc input=leafhopper_min_day_c2_1990_2000,leafhopper_max_day_c2_1990_2000 \
           basename=occ_duration_c2 \
           output=leafhopper_duration_c2_1990_2000 \
           expression="leafhopper_max_day_c2_1990_2000 - leafhopper_min_day_c2_1990_2000"
       # Extract the duration in days of the third cycle
       t.rast.aggregate input=leafhopper_occurrence_c3_1990_2000 gran="1 year" \
           output=leafhopper_min_day_c3_1990_2000 method=minimum basename=occ_min_day_c3
       t.rast.aggregate input=leafhopper_occurrence_c3_1990_2000 gran="1 year" \
           output=leafhopper_max_day_c3_1990_2000 method=maximum basename=occ_max_day_c3
       t.rast.mapcalc input=leafhopper_min_day_c3_1990_2000,leafhopper_max_day_c3_1990_2000 \
           basename=occ_duration_c3 \
           output=leafhopper_duration_c3_1990_2000 \
           expression="leafhopper_max_day_c3_1990_2000 - leafhopper_min_day_c3_1990_2000"
       t.rast.colors input=leafhopper_duration_c1_1990_2000 color=rainbow
       t.rast.colors input=leafhopper_duration_c2_1990_2000 color=rainbow
       t.rast.colors input=leafhopper_duration_c3_1990_2000 color=rainbow
       #############################################################################
       ################ MONTHLY CYCLES OCCURRENCE ##################################
       #############################################################################
       # Extract the monthly indicator that shows the start and end of a cycle
       # First cycle
       t.rast.aggregate input=leafhopper_indicator_c1_1990_2000 gran="1 month" \
           output=leafhopper_indi_min_month_c1_1990_2000 method=minimum basename=occ_indi_min_month_c1
       t.rast.aggregate input=leafhopper_indicator_c1_1990_2000 gran="1 month" \
           output=leafhopper_indi_max_month_c1_1990_2000 method=maximum basename=occ_indi_max_month_c1
       t.rast.mapcalc input=leafhopper_indi_min_month_c1_1990_2000,leafhopper_indi_max_month_c1_1990_2000 \
           basename=indicator_monthly_c1 \
           output=leafhopper_monthly_indicator_c1_1990_2000 \
           expression="if(leafhopper_indi_min_month_c1_1990_2000 == 1, 1, if(leafhopper_indi_max_month_c1_1990_2000 == 3, 3, 2))"
       # Second cycle
       t.rast.aggregate input=leafhopper_indicator_c2_1990_2000 gran="1 month" \
           output=leafhopper_indi_min_month_c2_1990_2000 method=minimum basename=occ_indi_min_month_c2
       t.rast.aggregate input=leafhopper_indicator_c2_1990_2000 gran="1 month" \
           output=leafhopper_indi_max_month_c2_1990_2000 method=maximum basename=occ_indi_max_month_c2
       t.rast.mapcalc input=leafhopper_indi_min_month_c2_1990_2000,leafhopper_indi_max_month_c2_1990_2000 \
           basename=indicator_monthly_c2 \
           output=leafhopper_monthly_indicator_c2_1990_2000 \
           expression="if(leafhopper_indi_min_month_c2_1990_2000 == 1, 1, if(leafhopper_indi_max_month_c2_1990_2000 == 3, 3, 2))"
       # Third cycle
       t.rast.aggregate input=leafhopper_indicator_c3_1990_2000 gran="1 month" \
           output=leafhopper_indi_min_month_c3_1990_2000 method=minimum basename=occ_indi_min_month_c3
       t.rast.aggregate input=leafhopper_indicator_c3_1990_2000 gran="1 month" \
           output=leafhopper_indi_max_month_c3_1990_2000 method=maximum basename=occ_indi_max_month_c3
       t.rast.mapcalc input=leafhopper_indi_min_month_c3_1990_2000,leafhopper_indi_max_month_c3_1990_2000 \
           basename=indicator_monthly_c3 \
           output=leafhopper_monthly_indicator_c3_1990_2000 \
           expression="if(leafhopper_indi_min_month_c3_1990_2000 == 1, 1, if(leafhopper_indi_max_month_c3_1990_2000 == 3, 3, 2))"
       cat &gt; color.table &lt;&lt; EOF
       3 red
       2 yellow
       1 green
       EOF
       t.rast.colors input=leafhopper_monthly_indicator_c1_1990_2000 rules=color.table
       t.rast.colors input=leafhopper_monthly_indicator_c2_1990_2000 rules=color.table
       t.rast.colors input=leafhopper_monthly_indicator_c3_1990_2000 rules=color.table
       #############################################################################
       ################ VISUALIZATION ##############################################
       #############################################################################
       # Now we use g.gui.animation to visualize the yearly occurrence, the duration and the monthly occurrence
       # Yearly occurrence of all reproduction cycles
       g.gui.animation strds=leafhopper_all_cycles_1990_2000_yearly_clean
       # Yearly duration of reproduction cycle 1
       g.gui.animation strds=leafhopper_duration_c1_1990_2000
       # Yearly duration of reproduction cycle 2
       g.gui.animation strds=leafhopper_duration_c2_1990_2000
       # Yearly duration of reproduction cycle 3
       g.gui.animation strds=leafhopper_duration_c3_1990_2000
       # Monthly occurrence of reproduction cycle 1
       g.gui.animation strds=leafhopper_monthly_indicator_c1_1990_2000
       # Monthly occurrence of reproduction cycle 2
       g.gui.animation strds=leafhopper_monthly_indicator_c2_1990_2000
       # Monthly occurrence of reproduction cycle 3
       g.gui.animation strds=leafhopper_monthly_indicator_c3_1990_2000

</pre><h4><b>REFERENCES</b></h4><pre>
           •   Jones, G.V., Duff, A.A., Hall, A., Myers, J.W., 2010.  Spatial Analysis of Climate  in  Winegrape
               Growing Regions in the Western United States. Am. J. Enol. Vitic. 61, 313-326.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
        <u>t.rast.accdetect,</u> <u>t.rast.aggregate,</u> <u>t.rast.mapcalc,</u> <u>t.info,</u> <u>g.region,</u> <u>r.series.accumulate</u>

</pre><h4><b>AUTHOR</b></h4><pre>
       Sören Gebbert, Thünen Institute of Climate-Smart Agriculture

</pre><h4><b>SOURCE</b> <b>CODE</b></h4><pre>
       Available at: t.rast.accumulate source code (history)

       Accessed: Friday Apr 04 01:21:14 2025

       Main index | Temporal index | Topics index | Keywords index | Graphical index | Full index

       © 2003-2025 GRASS Development Team, GRASS GIS 8.4.1 Reference Manual

GRASS 8.4.1                                                                            <u><a href="../man1grass/t.rast.accumulate.1grass.html">t.rast.accumulate</a></u>(1grass)
</pre>
 </div>
</div></section>
</div>
</body>
</html>