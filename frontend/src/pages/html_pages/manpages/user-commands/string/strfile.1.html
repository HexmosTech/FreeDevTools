<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>strfile - create a random access file for storing strings</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/fortune-mod">fortune-mod_1.99.1-9_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       strfile - create a random access file for storing strings
       unstr - dump strings in pointer order

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>strfile</b> [<b>-iorsx</b>] [<b>-c</b> <u>char</u>] <u>sourcefile</u> [<u>outputfile</u>]
       <b>unstr</b> [<b>-c</b> <u>char</u>] <u>datafile</u>[<u>.ext</u>] [<u>outputfile</u>]

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>strfile</b>  reads a file containing groups of lines separated by a line containing a single percent `%' sign
       (or other specified delimiter character) and creates a data file which contains a header structure and  a
       table of file offsets for each group of lines. This allows random access of the strings.

       The output file, if not specified on the command line, is named <u>sourcefile.dat</u>.

       The  purpose  of  <b>unstr</b>  is  to  undo  the  work  of <b>strfile</b>.  It prints out the strings contained in the
       sourcefile, which is <u>datafile.ext</u> without its extension, or <u>datafile</u> if no  extension  is  specified  (in
       this  case, the extension <u>.dat</u> is added to the name of the datafile) in the order that they are listed in
       the header file <u>datafile</u>.  If no <u>outputfile</u> is specified, it prints  to  standard  output;  otherwise  it
       prints  to  the  file  specified.  <b>unstr</b> can also universally change the delimiter character in a strings
       file.  It is possible to create sorted versions of input files by using <b>strfile</b> <b>-o</b> and then  using  <b>unstr</b>
       to dump them out in the table order.

   <b>Options</b>
       The options are as follows:

       <b>-c</b> <u>char</u>
              Change  the delimiting character from the percent sign to <u>char</u>.  This option is available for both
              <b>strfile</b> and <b>unstr</b>.

       <b>-i</b>     Ignore case when ordering the strings.

       <b>-o</b>     Order the strings in alphabetical order.  The offset table will  be  sorted  in  the  alphabetical
              order  of  the  groups  of lines referenced.  Any initial non-alphanumeric characters are ignored.
              This option causes the STR_ORDERED bit in the header <u>str_flags</u> field  to  be  set.  (It  also  now
              really does sort! It didn't used to).

       <b>-r</b>     Randomize  access  to  the  strings.   Entries in the offset table will be randomly ordered.  This
              option causes the STR_RANDOM bit in the header  <u>str_flags</u>  field  to  be  set.  (And  really  does
              randomize)

       <b>-s</b>     Run silently; don't give a summary message when finished.

       <b>-x</b>     Note  that  each  alphabetic  character in the groups of lines is rotated 13 positions in a simple
              caesar cypher.  This option causes the STR_ROTATED bit in the header <u>str_flags</u> field  to  be  set.
              Note that it <b>does</b> <b>not</b> rotate the strings--that operation must be performed separately.

   <b>Header</b>
       The format of the header is:

       #define VERSION 1
       unsigned long str_version;  /* version number */
       unsigned long str_numstr;   /* # of strings in the file */
       unsigned long str_longlen;  /* length of longest string */
       unsigned long str_shortlen; /* shortest string length */
       #define STR_RANDOM    0x1   /* randomized pointers */
       #define STR_ORDERED   0x2   /* ordered pointers */
       #define STR_ROTATED   0x4   /* rot-13'd text */
       unsigned long str_flags;    /* bit field for flags */
       char str_delim;             /* delimiting character */

       All fields are written in network byte order.

</pre><h4><b>BUGS</b></h4><pre>
       Fewer  now,  one hopes.  However, fortunes (text strings) beginning with a blank line appear to be sorted
       between random letters.  This includes ASCII art that contains no  letters,  and  first  lines  that  are
       solely non-alphanumeric, apparently.  I've no idea why this should be.

</pre><h4><b>OTHER</b> <b>USES</b></h4><pre>
       What  can  you  do  with this besides printing sarcastic and obscene messages to the screens of lusers at
       login or logout?

       There <b>are</b> some other possibilities.  Source code for a sample program, <b>randstr</b>,  is  included  with  this
       distribution:  randstr  splits  the  difference  between <b>unstr</b> and <b>fortune</b>.  It reads a single, specified
       file, and randomly selects a single text string.

       1      Include <u>strfile.h</u> into a news reading/posting program, to generate random signatures.  <b><a href="../man1/Tin.1.html">Tin</a></b>(1) does
              something similar, in a much more complex manner.

       2      Include it in a game.  While strfile doesn't support 'fields' or 'records', there's no reason that
              the text strings can't be consistent: first line, a die roll; second  line,  a  score;  third  and
              subsequent lines, a text message.

       3      Use it to store your address book.  Hell, some of the guys I know would be as well off using it to
              decide  who  to  call  on Friday nights (and for some, it wouldn't matter whether there were phone
              numbers in it or not).

       4      Use it in 'lottery' situations.  If you're an ISP, write a script to store login names  and  GECOS
              from  <u><a href="file:/etc/passwd">/etc/passwd</a></u>  in  strfile  format, write another to send 'congratulations, you've won' to the
              lucky login selected.  The prize might be a month's free service, or if you're AOL, a  month  free
              on a real service provider.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man3/byteorder.3.html">byteorder</a></b>(3), <b><a href="../man6/fortune.6.html">fortune</a></b>(6)

</pre><h4><b>HISTORY</b></h4><pre>
       The  <b>strfile</b>  utility  first  appeared  in  4.4BSD. This version was heavily modified, much of it in ways
       peculiar to Linux.  Work has since been done to make the code more generic, and has so far been tested to
       work with SunOS 4.x.  More platforms are expected to be supported as work continues.

4th Berkeley Distribution                    June 9, 1993 [Apr. '97]                                  <u><a href="../man1/STRFILE.1.html">STRFILE</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>