<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>v.overlay   -  Overlays  two vector maps offering clip, intersection, difference, symmetrical difference,</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/grass-doc">grass-doc_8.4.1-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       <b>v.overlay</b>   -  Overlays  two vector maps offering clip, intersection, difference, symmetrical difference,
       union operators.

</pre><h4><b>KEYWORDS</b></h4><pre>
       vector, geometry, spatial query, clip, difference, intersection, union

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>v.overlay</b>
       <b>v.overlay</b> <b>--help</b>
       <b>v.overlay</b> [-<b>t</b>] <b>ainput</b>=<u>name</u>  [<b>alayer</b>=<u>string</u>]   [<b>atype</b>=<u>string</u>[,<u>string</u>,...]]   <b>binput</b>=<u>name</u>   [<b>blayer</b>=<u>string</u>]
       [<b>btype</b>=<u>string</u>[,<u>string</u>,...]]   <b>operator</b>=<u>string</u>  <b>output</b>=<u>name</u>   [<b>olayer</b>=<u>string</u>[,<u>string</u>,...]]    [<b>snap</b>=<u>float</u>]
       [--<b>overwrite</b>]  [--<b>help</b>]  [--<b>verbose</b>]  [--<b>quiet</b>]  [--<b>ui</b>]

   <b>Flags:</b>
       <b>-t</b>
           Do not create attribute table

       <b>--overwrite</b>
           Allow output files to overwrite existing files

       <b>--help</b>
           Print usage summary

       <b>--verbose</b>
           Verbose module output

       <b>--quiet</b>
           Quiet module output

       <b>--ui</b>
           Force launching GUI dialog

   <b>Parameters:</b>
       <b>ainput</b>=<u>name</u> <b>[required]</b>
           Name of input vector map (A)
           Or data source for direct OGR access

       <b>alayer</b>=<u>string</u>
           Layer number or name (vector map A)
           Vector features can have category values in different layers. This number determines which  layer  to
           use. When used with direct OGR access this is the layer name.
           Default: <u>1</u>

       <b>atype</b>=<u>string[,string</u>,...]
           Feature type (vector map A)
           Input feature type
           Options: <u>line,</u> <u>area,</u> <u>auto</u>
           Default: <u>auto</u>

       <b>binput</b>=<u>name</u> <b>[required]</b>
           Name of input vector map (B)
           Or data source for direct OGR access

       <b>blayer</b>=<u>string</u>
           Layer number or name (vector map B)
           Vector  features  can have category values in different layers. This number determines which layer to
           use. When used with direct OGR access this is the layer name.
           Default: <u>1</u>

       <b>btype</b>=<u>string[,string</u>,...]
           Feature type (vector map B)
           Input feature type
           Options: <u>area</u>
           Default: <u>area</u>

       <b>operator</b>=<u>string</u> <b>[required]</b>
           Operator defines features written to output vector map
           Feature is written to output if the result of operation  ’ainput  operator  binput’  is  true.  Input
           feature is considered to be true, if category of given layer is defined.
           Options: <u>and,</u> <u>or,</u> <u>not,</u> <u>xor</u>
           <b>and</b>: also known as ’intersection’ in GIS
           <b>or</b>: also known as ’union’ in GIS (only for atype=area)
           <b>not</b>: also known as ’difference’ (features from ainput not overlaid by features from binput)
           <b>xor</b>: also known as ’symmetrical difference’ (features from either ainput or binput but not those from
           ainput overlaid by binput (only for atype=area)

       <b>output</b>=<u>name</u> <b>[required]</b>
           Name for output vector map

       <b>olayer</b>=<u>string[,string</u>,...]
           Output layer for new category, ainput and binput
           If 0 or not given, the category is not written
           Default: <u>1,0,0</u>

       <b>snap</b>=<u>float</u>
           Snapping threshold for boundaries
           Disable snapping with snap &lt;= 0
           Default: <u>1e-8</u>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <u>v.overlay</u>  allows  the  user to overlay two vector maps. Features in <b>ainput</b> can be lines or areas and are
       cut with areas in <b>binput</b>. Simple <u>clipping</u> can be performed with the <b>and</b> operator.

       If areas in <b>ainput</b> are overlaid with areas in <b>binput</b>, it is sometimes necessary to snap areas  of  <b>binput</b>
       to  those  of  <b>ainput</b>,  otherwise  areas  can go missing or many sliver areas can be created. Snapping is
       enabled by default and can be disabled by setting the <b>snap</b> option to a negative value. Recommended values
       are between 0.00000001 and 0.0001. Using larger values for snapping can have undesired side-effects,  but
       may  sometimes  be  necessary to get a clean output (see example below). In general, it is recommended to
       start with a small snapping threshold, gradually increasing the threshold until the result is  reasonably
       clean. Snapping modifies only boundaries in binput, which are snapped to boundaries in ainput. Boundaries
       in <b>ainput</b> are not modified.

</pre><h4><b>NOTES</b></h4><pre>
       Currently  only  areas  in  <b>ainput</b>  are  supported  for the operators <u>or</u> and <u>xor</u>! See also <u>v.select</u>.  The
       operator defines what kind of operation will be done. Features are written to output, if the result of an
       operation <b>ainput</b> operator <b>binput</b> is true.

       If the <u>first</u> number of the <b>olayer</b> option is greater than 0, then the resulting output map  has  a  merged
       attribute  table  in  the  given  layer  number.  The  original  column  names  have a prefix (<u>a</u><b>_</b> and <u>b</u><b>_</b>)
       corresponding to <b>ainput</b> and <b>binput</b> map.

       If the <u>second</u> number of the <b>olayer</b> option is greater than 0, then  the  categories  of  <b>ainput</b>  in  layer
       <b>alayer</b> are transferred to the output layer with the second number.

       If the <u>third</u> number of the <b>olayer</b> option is greater than 0, then the categories of <b>binput</b> in layer <u>blayer</u>
       are transferred to the output layer with the third number.

       If <b>atype</b>=auto is given than <u>v.overlay</u> determines feature type for <b>ainput</b> from the first found feature.

</pre><h4><b>EXAMPLES</b></h4><pre>
       Preparation of example data (North Carolina sample dataset):
       # Create an empty box for overlaying to ZIP code vector map
       v.mkgrid map=box grid=1,1 position=coor coordinates=584037,201970 box=50000,50000
       # set region to ZIP codes and box vector maps
       g.region vector=zipcodes_wake,box -p res=100 -a
       # enlarge region a bit for "white border" around map in monitor
       g.region n=n+1000 s=s-1000 w=w-1000 e=e+1000 -p
       d.mon wx0

   <b>AND</b> <b>operator</b>
       Clipping example (no attribute table is generated here):
       d.vect map=zipcodes_wake fill_color=0:128:0
       d.vect map=box fill_color=85:130:176
       v.overlay -t ainput=box binput=zipcodes_wake operator=and output=v_overlay_AND
       d.vect map=v_overlay_AND
       <u>Figure:</u> <u>v.overlay</u> <u>with</u> <u>AND</u> <u>operator</u> <u>(selected</u> <u>polygons</u> <u>in</u> <u>yellow</u> <u>color)</u>

   <b>OR</b> <b>operator</b>
       Union example of areas:
       d.vect map=zipcodes_wake fill_color=0:128:0
       d.vect map=box fill_color=85:130:176
       v.overlay -t ainput=box binput=zipcodes_wake operator=or output=v_overlay_OR
       d.vect map=v_overlay_OR
       <u>Figure:</u> <u>v.overlay</u> <u>with</u> <u>OR</u> <u>operator</u> <u>(selected</u> <u>polygons</u> <u>in</u> <u>yellow</u> <u>color)</u>

   <b>XOR</b> <b>operator</b>
       Symmetrical difference example:
       d.vect map=zipcodes_wake fill_color=0:128:0
       d.vect map=box fill_color=85:130:176
       v.overlay -t ainput=box binput=zipcodes_wake operator=xor output=v_overlay_XOR
       d.vect map=v_overlay_XOR
       <u>Figure:</u> <u>v.overlay</u> <u>with</u> <u>XOR</u> <u>operator</u> <u>(selected</u> <u>polygons</u> <u>in</u> <u>yellow</u> <u>color)</u>

   <b>NOT</b> <b>operator</b>
       Difference example:
       d.vect map=zipcodes_wake fill_color=0:128:0
       d.vect map=box fill_color=85:130:176
       v.overlay -t ainput=box binput=zipcodes_wake operator=not output=v_overlay_NOT
       d.vect map=v_overlay_NOT
       <u>Figure:</u> <u>v.overlay</u> <u>with</u> <u>NOT</u> <u>operator</u> <u>(selected</u> <u>polygon</u> <u>in</u> <u>yellow</u> <u>color)</u>

   <b>Overlay</b> <b>operations:</b> <b>AND,</b> <b>OR,</b> <b>NOT,</b> <b>XOR</b>
       ZIP code examples, based on North Carolina sample dataset:
       # creation of simple dataset
       v.extract input=zipcodes_wake output=poly1 where="cat = 42"
       v.extract input=urbanarea output=poly2 where="cat = 55"
       v.overlay ainput=poly1 binput=poly2 operator=and output=poly_1_2_and
       v.overlay ainput=poly1 binput=poly2 operator=or  output=poly_1_2_or
       v.overlay ainput=poly1 binput=poly2 operator=not output=poly_1_2_not
       v.overlay ainput=poly1 binput=poly2 operator=xor output=poly_1_2_xor
       <u>Figure:</u> <u>v.overlay</u> <u>operations:</u> <u>original</u> <u>input</u> <u>polygons</u>

       <u>Figure:</u> <u>v.overlay</u> <u>results</u> <u>of</u> <u>AND,</u> <u>OR,</u> <u>NOT,</u> <u>XOR</u> <u>operations</u>

   <b>Polygons</b> <b>overlaid</b> <b>with</b> <b>polygons</b>
       v.overlay ainput=lake binput=province output=lakeXprovince operator=or
       Polygon union of urban area and Census 2000 areas (North Carolina dataset):
       # input maps
       d.vect urbanarea
       d.vect census_wake2000
       # union
       v.overlay ain=census_wake2000 bin=urbanarea out=urban_census2000 operator=or
       # show result, graphically zooming a subset
       g.region n=230400 s=223800 w=655800 e=662400
       d.erase
       d.vect urban_census2000
       # show merged attribute table
       v.db.select urban_census2000 where="cat=108" -v
       cat|108
       a_cat|98
       a_AREA|231001264
       a_PERIMETE|67804.305
       a_TRACT_|98
       a_TRACT_ID|98
       a_RINGS_OK|1
       a_RINGS_NO|0
       a_ID|98
       a_FIPSSTCO|37183
       a_TRT2000|054108
       a_STFID|37183054108
       a_TRACTID|541.08
       a_TRACT|541.08
       b_cat|55
       b_OBJECTID|55
       b_UA|73261
       b_NAME|Raleigh
       b_UA_TYPE|UA
       <u>Figure:</u>  <u>v.overlay:</u>  <u>Polygon</u>  <u>union</u>  <u>(right)</u>  <u>of</u>  <u>urban</u> <u>area</u> <u>(left)</u> <u>and</u> <u>Census</u> <u>2000</u> <u>(middle)</u> <u>areas</u> <u>(North</u>
       <u>Carolina</u> <u>dataset)</u>

       As can be seen by the resulting large number of centroids on boundaries, the urban  areas  do  not  match
       exactly  the  Census 2000 areas. In this case a clean result can be obtained by snapping with a threshold
       of 0.1 m.

   <b>Lines</b> <b>overlaid</b> <b>with</b> <b>polygons</b>
       Using the North Carolina sample dataset, we clip the roads map to the area of city of Raleigh, preserving
       road attributes in layer 1:
       g.region vector=zipcodes_wake
       # extract Raleigh city:
       v.extract in=zipcodes_wake out=raleigh where="ZIPNAME = ’RALEIGH’"
       # clip road network to city polygon:
       v.overlay ainput=roadsmajor atype=line binput=raleigh out=roadsmajor_raleigh operator=and olayer=0,1,0
       <u>Figure:</u> <u>v.overlay:</u> <u>Line</u> <u>to</u> <u>polygon</u> <u>clipping</u>

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
        <u>v.clip,</u> <u>v.db.connect,</u> <u>v.select,</u> <u>g.copy</u>

</pre><h4><b>AUTHORS</b></h4><pre>
       Radim Blazek, ITC-Irst, Trento, Italy
       Markus Metz
       Speedup for large, complex input areas sponsored by mundialis

</pre><h4><b>SOURCE</b> <b>CODE</b></h4><pre>
       Available at: v.overlay source code (history)

       Accessed: Friday Apr 04 01:20:31 2025

       Main index | Vector index | Topics index | Keywords index | Graphical index | Full index

       © 2003-2025 GRASS Development Team, GRASS GIS 8.4.1 Reference Manual

GRASS 8.4.1                                                                                    <u><a href="../man1grass/v.overlay.1grass.html">v.overlay</a></u>(1grass)
</pre>
 </div>
</div></section>
</div>
</body>
</html>