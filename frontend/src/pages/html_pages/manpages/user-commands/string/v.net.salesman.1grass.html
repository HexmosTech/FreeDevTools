<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>v.net.salesman  - Creates a cycle connecting given nodes (Traveling salesman problem).</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/grass-doc">grass-doc_8.4.1-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       <b>v.net.salesman</b>  - Creates a cycle connecting given nodes (Traveling salesman problem).
       Note that TSP is NP-hard, heuristic algorithm is used by this module and created cycle may be sub optimal

</pre><h4><b>KEYWORDS</b></h4><pre>
       vector, network, salesman

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>v.net.salesman</b>
       <b>v.net.salesman</b> <b>--help</b>
       <b>v.net.salesman</b>       [-<b>tg</b>]       <b>input</b>=<u>name</u>      <b>output</b>=<u>name</u>      <b>center_cats</b>=<u>range</u>      <b>arc_layer</b>=<u>string</u>
       <b>arc_type</b>=<u>string</u>[,<u>string</u>,...]   <b>node_layer</b>=<u>string</u>    [<b>arc_column</b>=<u>string</u>]      [<b>arc_backward_column</b>=<u>string</u>]
       [<b>turn_layer</b>=<u>string</u>]    [<b>turn_cat_layer</b>=<u>string</u>]    [<b>sequence</b>=<u>name</u>]    [--<b>overwrite</b>]  [--<b>help</b>]  [--<b>verbose</b>]
       [--<b>quiet</b>]  [--<b>ui</b>]

   <b>Flags:</b>
       <b>-t</b>
           Use turntable

       <b>-g</b>
           Use geodesic calculation for longitude-latitude projects

       <b>--overwrite</b>
           Allow output files to overwrite existing files

       <b>--help</b>
           Print usage summary

       <b>--verbose</b>
           Verbose module output

       <b>--quiet</b>
           Quiet module output

       <b>--ui</b>
           Force launching GUI dialog

   <b>Parameters:</b>
       <b>input</b>=<u>name</u> <b>[required]</b>
           Name of input vector map
           Or data source for direct OGR access

       <b>output</b>=<u>name</u> <b>[required]</b>
           Name for output vector map

       <b>center_cats</b>=<u>range</u> <b>[required]</b>
           Category values
           Categories of points (’cities’) on nodes (layer is specified by nlayer)

       <b>arc_layer</b>=<u>string</u> <b>[required]</b>
           Arc layer
           Vector features can have category values in different layers. This number determines which  layer  to
           use. When used with direct OGR access this is the layer name.
           Default: <u>1</u>

       <b>arc_type</b>=<u>string[,string</u>,...] <b>[required]</b>
           Arc type
           Input feature type
           Options: <u>line,</u> <u>boundary</u>
           Default: <u>line,boundary</u>

       <b>node_layer</b>=<u>string</u> <b>[required]</b>
           Node layer (used for cities)
           Vector  features  can have category values in different layers. This number determines which layer to
           use. When used with direct OGR access this is the layer name.
           Default: <u>2</u>

       <b>arc_column</b>=<u>string</u>
           Arc forward/both direction(s) cost column (number)

       <b>arc_backward_column</b>=<u>string</u>
           EXPERIMENTAL: Arc backward direction cost column (number)

       <b>turn_layer</b>=<u>string</u>
           Layer with turntable
           Relevant only with -t flag
           Default: <u>3</u>

       <b>turn_cat_layer</b>=<u>string</u>
           Layer with unique categories used in turntable
           Relevant only with -t flag
           Default: <u>4</u>

       <b>sequence</b>=<u>name</u>
           Name for output file holding node sequence ("-" for stdout)

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <u>v.net.salesman</u> calculates the optimal route to visit nodes on a vector network.

       Costs may be either line lengths, or attributes saved in a database table.  These  attribute  values  are
       taken  as  costs  of  whole segments, not as costs to traverse a length unit (e.g. meter) of the segment.
       For example, if the speed limit is 100 km / h, the cost to traverse a 10 km long  road  segment  must  be
       calculated as
       length / speed = 10 km / (100 km/h) = 0.1 h.
       Supported  are  cost assignments for arcs, and also different costs for both directions of a vector line.
       For areas, costs will be calculated along boundary lines.

       The input vector  needs  to  be  prepared  with  <u>v.net</u>  <u>operation=connect</u>  in  order  to  connect  points
       representing center nodes to the network.

       Points  specified  by  category  must  be  exactly on network nodes, and the input vector map needs to be
       prepared with <u>v.net</u> <u>operation=connect</u>.

       Application of flag <b>-t</b> enables a turntable support.  This flag requires additional parameters  <b>turn_layer</b>
       and  <b>turn_cat_layer</b>  that  are otherwise ignored.  The turntable allows to model e.g. traffic code, where
       some turns may be prohibited.  This means that the input layer is expanded by  turntable  with  costs  of
       every  possible turn on any possible node (intersection) in both directions.  Turntable can be created by
       the <u>v.net</u> module.  For more information about turns in the vector network analyses see wiki page.

</pre><h4><b>NOTES</b></h4><pre>
       Arcs can be closed using cost = -1.  Turns support: The costs of turns on visiting nodes are not taken in
       account.

</pre><h4><b>EXAMPLE</b></h4><pre>
       Traveling salesman for 6 digitized nodes (Spearfish):

       Shortest path, along unimproved roads:

       Fastest path, along highways:

       Searching for the shortest path using distance and the fastest path using traveling time according to the
       speed limits of different road types:
       # Spearfish
       g.copy vect=roads,myroads
       # we have 6 locations to visit on our trip
       echo "1|601653.5|4922869.2|a
       2|608284|4923776.6|b
       3|601845|4914981.9|c
       4|596270|4917456.3|d
       5|593330.8|4924096.6|e
       6|598005.5|4921439.2|f" | v.in.ascii in=- cat=1 x=2 y=3 out=centers col="cat integer, \
                                east double precision, north double precision, label <a href="../man43/varchar.43.html">varchar</a>(43)"
       # verify data preparation
       v.db.select centers
       v.category centers op=report
       # type       count        min        max
       # point          6          1          6
       # create lines map connecting points to network (on layer 2)
       v.net myroads points=centers out=myroads_net op=connect thresh=500
       v.category myroads_net op=report
       # Layer / table: 1 / myroads_net
       # type       count        min        max
       # line         837          1          5
       #
       # Layer: 2
       # type       count        min        max
       # point          6          1          5
       # find the shortest path
       v.net.salesman myroads_net center_cats=1-6 out=mysalesman_distance
       # set up costs as traveling time
       # create unique categories for each road in layer 3
       v.category in=myroads_net out=myroads_net_time opt=add cat=1 layer=3 type=line
       # add new table for layer 3
       v.db.addtable myroads_net_time layer=3 col="cat integer,label <a href="../man43/varchar.43.html">varchar</a>(43),length double precision,speed double precision,cost double precision,bcost double precision"
       # copy road type to layer 3
       v.to.db myroads_net_time layer=3 qlayer=1 opt=query qcolumn=label columns=label
       # upload road length in miles
       v.to.db myroads_net_time layer=3 type=line option=length col=length unit=miles
       # set speed limits in miles / hour
       v.db.update myroads_net_time layer=3 col=speed val="5.0"
       v.db.update myroads_net_time layer=3 col=speed val="75.0" where="label=’interstate’"
       v.db.update myroads_net_time layer=3 col=speed val="75.0" where="label=’primary highway, hard surface’"
       v.db.update myroads_net_time layer=3 col=speed val="50.0" where="label=’secondary highway, hard surface’"
       v.db.update myroads_net_time layer=3 col=speed val="25.0" where="label=’light-duty road, improved surface’"
       v.db.update myroads_net_time layer=3 col=speed val="5.0" where="label=’unimproved road’"
       # define traveling costs as traveling time in minutes:
       # set forward costs
       v.db.update myroads_net_time layer=3 col=cost val="length / speed * 60"
       # set backward costs
       v.db.update myroads_net_time layer=3 col=bcost val="length / speed * 60"
       # find the fastest path
       v.net.salesman myroads_net_time arc_layer=3 node_layer=2 arc_column=cost arc_backward_column=bcost center_cats=1-6 out=mysalesman_time
       To display the result, run for example:
       # Display the results
       g.region vector=myroads_net
       # shortest path
       d.mon x0
       d.vect myroads_net
       d.vect centers -c icon=basic/triangle
       d.vect mysalesman_distance col=green width=2
       d.font Vera
       d.vect centers col=red disp=attr attrcol=label lsize=12
       # fastest path
       d.mon x1
       d.vect myroads_net
       d.vect centers -c icon=basic/triangle
       d.vect mysalesman_time col=green width=2
       d.font Vera
       d.vect centers col=red disp=attr attrcol=label lsize=12

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
        <u>d.path,</u> <u>v.net,</u> <u>v.net.alloc,</u> <u>v.net.iso,</u> <u>v.net.path,</u> <u>v.net.steiner</u>

</pre><h4><b>AUTHORS</b></h4><pre>
       Radim Blazek, ITC-Irst, Trento, Italy
       Markus Metz
       Documentation: Markus Neteler, Markus Metz

   <b>TURNS</b> <b>SUPPORT</b>
       The turns support was implemnented as part of GRASS GIS turns cost project at Czech Technical  University
       in Prague, Czech Republic.
       Eliska Kyzlikova, Stepan Turek, Lukas Bocan and Viera Bejdova participated in the project.

       Implementation: Stepan Turek
       Documentation: Lukas Bocan
       Mentor: Martin Landa

</pre><h4><b>SOURCE</b> <b>CODE</b></h4><pre>
       Available at: v.net.salesman source code (history)

       Accessed: Friday Apr 04 01:20:27 2025

       Main index | Vector index | Topics index | Keywords index | Graphical index | Full index

       © 2003-2025 GRASS Development Team, GRASS GIS 8.4.1 Reference Manual

GRASS 8.4.1                                                                               <u><a href="../man1grass/v.net.salesman.1grass.html">v.net.salesman</a></u>(1grass)
</pre>
 </div>
</div></section>
</div>
</body>
</html>