<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>doveadm-mailbox - Commands related to handling mailboxes</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/dovecot-core">dovecot-core_2.3.21.1+dfsg1-1ubuntu2_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       doveadm-mailbox - Commands related to handling mailboxes

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>doveadm</b> [<b>-Dv</b>] [<b>-f</b> <u>formatter</u>] <u>mailbox_cmd</u> [<u>options</u>] [<u>arguments</u>]

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>doveadm</b> <b>mailbox</b> can be used to query and modify mailboxes.

</pre><h4><b>OPTIONS</b></h4><pre>
       Global <b><a href="../man1/doveadm.1.html">doveadm</a></b>(1) <u>options</u>:

       <b>-D</b>     Enables verbosity and debug messages.

       <b>-f</b> <u>formatter</u>
              Specifies the <u>formatter</u> for formatting the output.  Supported formatters are:

              <b>flow</b>   prints each line with <u>key</u><b>=</b><u>value</u> pairs.

              <b>pager</b>  prints  each <u>key</u>: <u>value</u> pair on its own line and separates records with form feed character
                     (<b>^L</b>).

              <b>tab</b>    prints a table header followed by tab separated value lines.

              <b>table</b>  prints a table header followed by adjusted value lines.

       <b>-o</b> <u>setting</u><b>=</b><u>value</u>
              Overrides the configuration <u>setting</u> from <u>/etc/dovecot/dovecot.conf</u> and from the  userdb  with  the
              given  <u>value</u>.   In  order  to  override multiple settings, the <b>-o</b> option may be specified multiple
              times.

       <b>-v</b>     Enables verbosity, including progress counter.

       Command specific <u>options</u>:

       <b>-A</b>     If the <b>-A</b> option is present, the <u>command</u> will be performed for all users.  Using  this  option  in
              combination  with  system  users  from  <b>userdb</b>  <b>{</b> <b>driver</b> <b>=</b> <b>passwd</b> <b>}</b> is not recommended, because it
              contains also users with a lower UID than the one configured with the <u>first_valid_uid</u> setting.

              When  the  SQL  userdb  module  is  used   make   sure   that   the   <u>iterate_query</u>   setting   in
              <u>/etc/dovecot/dovecot-sql.conf.ext</u>  matches  your  database  layout.   When  using  the LDAP userdb
              module, make sure that the <u>iterate_attrs</u>  and  <u>iterate_filter</u>  settings  in  <u>/etc/dovecot/dovecot-</u>
              <u>ldap.conf.ext</u>  match  your  LDAP  schema.  Otherwise <b><a href="../man1/doveadm.1.html">doveadm</a></b>(1) will be unable to iterate over all
              users.

       <b>-F</b> <u>file</u>
              Execute the <u>command</u> for all the users in the <u>file</u>.  This is similar to the <b>-A</b> option, but  instead
              of  getting  the  list  of  users  from  the  userdb, they are read from the given <u>file</u>.  The <u>file</u>
              contains one username per line.

       <b>-S</b> <u>socket_path</u>
              The option's argument is either an absolute path to a local UNIX domain socket, or a hostname  and
              port (<u>hostname</u>:<u>port</u>), in order to connect a remote host via a TCP socket.

              This allows an administrator to execute <b><a href="../man1/doveadm.1.html">doveadm</a></b>(1) mail commands through the given socket.

       <b>-u</b> <u>user/mask</u>
              Run the <u>command</u> only for the given <u>user</u>.  It's also possible to use '<b>*</b>' and '<b>?</b>' wildcards (e.g. -u
              *@example.org).
              When  neither  the  <b>-A</b>  option, nor the <b>-F</b> <u>file</u> option, nor the <b>-u</b> <u>user</u> was specified, the <u>command</u>
              will be executed with the environment of the currently logged in user.

</pre><h4><b>ARGUMENTS</b></h4><pre>
       <u>mailbox</u>
              Is the name of a <u>mailbox</u>, as visible to IMAP  clients,  except  in  UTF-8  format.  The  hierarchy
              separator  between  a  parent  and  child mailbox is commonly '<b>/</b>' or '<b>.</b>', but this depends on your
              selected mailbox storage format and namespace configuration. The mailbox names may also require  a
              namespace prefix.

</pre><h4><b>COMMANDS</b></h4><pre>
   <b>mailbox</b> <b>create</b>
       <b>doveadm</b> <b>mailbox</b> <b>create</b> [<b>-A</b>|<b>-u</b> <u>user</u>|<b>-F</b> <u>file</u>] [<b>-S</b> <u>socket_path</u>] [<b>-g</b> <u>guid</u>] [<b>-s</b>] <u>mailbox</u> ...

       This  command  is  used  to  create  one  or more mailboxes.  The mailbox format of the created mailboxes
       depends on the <u>mail_location</u> setting, or the user's <u>mail</u> field, returned by the userdb.

       <b>-g</b> <u>guid</u>
              Create the mailbox with the specified GUID.

       <b>-s</b>     When this option was given, the created mailboxes will be also added to the user's subscriptions.

   <b>mailbox</b> <b>cryptokey</b>
       <b>mailbox</b> <b>cryptokey</b> <b>export|generate|list|password</b>

       This command is used to manage  mail  crypt  plugin  cryptographic  keys.   Please  see  <a href="../man1/doveadm-mailboxcryptokey.1.html">doveadm-mailbox-</a>
       <a href="../man1/doveadm-mailboxcryptokey.1.html">cryptokey</a>(1) for more details.

   <b>mailbox</b> <b>delete</b>
       <b>doveadm</b> <b>mailbox</b> <b>delete</b> [<b>-A</b>|<b>-u</b> <u>user</u>|<b>-F</b> <u>file</u>] [<b>-S</b> <u>socket_path</u>] [<b>-s</b>] [<b>-r</b>] [<b>-e</b>] [<b>-Z</b>] <u>mailbox</u> ...

       This  command  deletes  a  mailbox  and  expunges  all  the messages it contains.  If the mailbox has any
       children, they won't be deleted, unless <b>-r</b> is given.

       <b>-r</b>     Delete mailboxes recursively

       <b>-s</b>     Unsubscribe deleted mailboxes.

       <b>-e</b>     Require mailboxes to be empty before deleting.

       <b>-Z</b>     Delete the mailbox as efficiently as possible, but the user may not be in fully  consistent  state
              afterwards.  For example quota may be wrong. This option is mainly useful when deleting the entire
              user.

   <b>mailbox</b> <b>list</b>
       <b>doveadm</b> <b>mailbox</b> <b>list</b> [<b>-7</b>|<b>-8</b>] [<b>-A</b>|<b>-u</b> <u>user</u>|<b>-F</b> <u>file</u>] [<b>-S</b> <u>socket_path</u>] [<b>-s</b>] [<u>mailbox</u> ...]

       To get an overview of existing mailboxes use this command.  It's also possible to use  wildcards  in  the
       <u>mailbox</u> name.
       When  the  <b>-s</b>  option is present, only subscribed mailboxes will be listed. Listed subscriptions may also
       contain mailboxes that are already deleted.

       <b>-7</b>     Lists the mailboxes with mUTF-7 encoding.

       <b>-8</b>     Lists the mailboxes with UTF-8 encoding.

   <b>mailbox</b> <b>mutf7</b>
       <b>doveadm</b> <b>mailbox</b> <b>mutf7</b> [<b>-7</b>|<b>-8</b>] <u>name</u> ...

       The <b>mailbox</b> <b>mutf7</b> command may be used to convert the international mailbox <u>name</u> into a  modified  version
       of  the  UTF-7  encoding  and  vice  versa.   See  RFC  3501, section 5.1.3 (Mailbox International Naming
       Convention).

       <b>-7</b>     Indicates that the <u>name</u>'s string representation is mUTF-7 encoded and it should  be  converted  to
              UTF-8.

       <b>-8</b>     Indicates that the <u>name</u>'s is UTF-8 encoded and should be converted to mUTF-7 (default).

       <u>name</u>   One or more mailbox names that should be converted.

   <b>mailbox</b> <b>rename</b>
       <b>doveadm</b> <b>mailbox</b> <b>rename</b> [<b>-A</b>|<b>-u</b> <u>user</u>|<b>-F</b> <u>file</u>] [<b>-S</b> <u>socket_path</u>] [<b>-s</b>] <u>old_name</u> <u>new_name</u>

       The <b>mailbox</b> <b>rename</b> command is used to rename the mailbox <u>old_name</u> to <u>new_name</u>.
       When the <b>-s</b> option is given, <u>old_name</u> will be unsubscribed and <u>new_name</u> will be subscribed.

   <b>mailbox</b> <b>status</b>
       <b>doveadm</b> [<b>-f</b> <u>formatter</u>] <b>mailbox</b> <b>status</b> [<b>-A</b>|<b>-u</b> <u>user</u>|<b>-F</b> <u>file</u>] [<b>-S</b> <u>socket_path</u>] [<b>-t</b>] <u>fields</u> <u>mailbox</u> ...

       Show the <b>status</b> of one or more mailboxes.  The <u>mailbox</u> name may also contain wildcards.
       This command uses by default the output <u>formatter</u> <b>flow</b>.

       <b>-t</b>     Summarize  the  values  of  the  status  <u>fields</u>  <b>messages</b>, <b>recent</b>, <b>unseen</b> and/or <b>vsize</b> of multiple
              mailboxes to a sum (total).

       <u>fields</u> Specify the status <u>fields</u> which should be shown.  In order  to  specify  multiple  status  <u>fields</u>,
              enclosed them in quotes.

              <b>all</b>    This  is a special status field name.  It means show all of the following <u>fields</u>.  When the
                     <b>-t</b> option is present, it means show only the <b>messages</b>, <b>recent</b>, <b>unseen</b> and <b>vsize</b> <u>fields</u>.

              <b>guid</b>   The <u>mailbox</u>'s globally unique identifier.

              <b>highestmodseq</b>
                     The highest mod-sequence value of all messages in the <u>mailbox</u>.

              <b>messages</b>
                     The number of messages in the <u>mailbox</u>.

              <b>recent</b> The number of messages with the \Recent flag set.

              <b>uidnext</b>
                     The next unique identifier value.

              <b>uidvalidity</b>
                     The unique identifier validity value.

              <b>unseen</b> The message sequence number of the first unseen message in the <u>mailbox</u>.

              <b>vsize</b>  The <u>mailbox</u>'s virtual size, computed with CRLF line terminators.

              <b>firstsaved</b>
                     Saved time of the first mail in the mailbox.

   <b>mailbox</b> <b>subscribe</b>
       <b>doveadm</b> <b>mailbox</b> <b>subscribe</b> [<b>-A</b>|<b>-u</b> <u>user</u>|<b>-F</b> <u>file</u>] [<b>-S</b> <u>socket_path</u>] <u>mailbox</u> ...

       This command is used to subscribe one or more mailboxes.

   <b>mailbox</b> <b>unsubscribe</b>
       <b>doveadm</b> <b>mailbox</b> <b>unsubscribe</b> [<b>-A</b>|<b>-u</b> <u>user</u>|<b>-F</b> <u>file</u>] [<b>-S</b> <u>socket_path</u>] <u>mailbox</u> ...

       This command is used to unsubscribe one or more mailboxes.

   <b>mailbox</b> <b>update</b>
       <b>doveadm</b> <b>mailbox</b> <b>update</b> [<b>-A</b>|<b>-u</b>  <u>user</u>|<b>-F</b>]  [<b>-S</b>  <u>socket_path</u>]  [<b>--mailbox-guid</b>  <u>guid</u>]  [<b>--uid-validity</b>  <u>uid</u>]
       [<b>--min-next-uid</b>  <u>uid</u>]  [<b>--min-first-recent-uid</b>  <u>uid</u>] [<b>--min-highest-modseq</b> <u>seq</u>] [<b>--min-highest-pvt-modseq</b>
       <u>seq</u>] <u>mailbox</u> <u>...</u>

       This command is used to set UID validity, next UID, first recent UID and modification sequence values.

       Usually this is only ever to be used during migration, or restoring  mailbox  after  disaster.   Settings
       these values is highly discouraged, and is not supported for all mail backends.

   <b>mailbox</b> <b>cache</b> <b>purge</b>
       <b>doveadm</b> <b>mailbox</b> <b>cache</b> <b>purge</b> [<b>-A</b>|<b>-u</b> <u>user</u>|<b>-F</b> <u>file</u>] [<b>-S</b> <u>socket_path</u>] <u>mailbox</u> <u>...</u>

       Purge  the  dovecot.index.cache  file.  Most  importantly  this  frees up disk space from mails that were
       already deleted. Normally there i no need to run this command manually, because the compression  is  also
       run automatically.

   <b>mailbox</b> <b>cache</b> <b>decision</b>
       <b>doveadm</b>  <b>mailbox</b>  <b>cache</b>  <b>decision</b> [<b>-A</b>|<b>-u</b> <u>user</u>|<b>-F</b> <u>file</u>] [<b>-S</b> <u>socket_path</u>] [<b>--all</b>] [<b>--fields</b> <u>list</u> <u>of</u> <u>fields</u>]
       [<b>--last-used</b> <u>unix</u> <u>timestamp</u>] [<b>--decision</b> <u>no|temp|yes</u>] <u>mailbox</u> <u>...</u>

       This command is used to list or change caching decisions for  field(s)  in  mailbox(es).   You  can  list
       decisions by leaving out decision and last-used parameters.

       <b>--all</b>  List or change all fields.

       <b>--fields</b>
              List or change these comma/space separated fields.

       <b>--decision</b>
              Set  field  caching decision. Yes means it's always cached.  Temp means it's provisionally cached.
              No means the field is not cached.

       <b>--last-used</b>
              Set field's last used timestamp.

       NOTE. This command cannot be  used  to  add  new  fields  to  cache!  You  need  to  first  add  them  to
       configuration.  Setting caching to no will not immediately drop field from cache, it will stop adding the
       field to cache.

   <b>mailbox</b> <b>cache</b> <b>remove</b>
       <b>doveadm</b> <b>mailbox</b> <b>cache</b> <b>remove</b> [<b>-A</b>|<b>-u</b> <u>user</u>|<b>-F</b> <u>file</u>] [<b>-S</b> <u>socket_path</u>] <u>search</u>query

       Remove any matching mail(s) from cache.

       WARNING! This command can erase ALL cached data, causing system slowness.

</pre><h4><b>EXAMPLE</b></h4><pre>
       List subscribed mailboxes, beginning with 'dovecot', of user bob.

       <b>doveadm</b> <b>mailbox</b> <b>list</b> <b>-s</b> <b>-u</b> <b>bob</b> <b>dovecot*</b>
       dovecot
       dovecot/pigeonhole
       dovecot/pigeonhole/2.0

       Now have a look at the status of user bob's dovecot mailboxes.

       <b>doveadm</b> <b>-f</b> <b>table</b> <b>mailbox</b> <b>status</b> <b>-u</b> <b>bob</b> <b>"messages</b> <b>vsize"</b> <b>dovecot*</b>
       mailbox                                    messages vsize
       dovecot                                    20501    93968492
       dovecot/pigeonhole                         0        0
       dovecot/pigeonhole/2.0                     47       323474

       Converting an internationalized mailbox name from mUTF-7 to UTF-8 and vice versa.

       <b>doveadm</b> <b>mailbox</b> <b>mutf7</b> <b>-7</b> <b>"~peter/mail/&amp;U,BTFw-/&amp;ZeVnLIqe-"</b>
       ~peter/mail/台北/日本語
       <b>doveadm</b> <b>mailbox</b> <b>mutf7</b> <b>~peter/mail/台北/日本語</b>

       ~peter/mail/&amp;U,BTFw-/&amp;ZeVnLIqe-
</pre><h4><b>REPORTING</b> <b>BUGS</b></h4><pre>
       Report  bugs,  including  <u>doveconf</u>  <u>-n</u>  output,  to  the  Dovecot  Mailing  List   &lt;<a href="mailto:dovecot@dovecot.org">dovecot@dovecot.org</a>&gt;.
       Information about reporting bugs is available at: <a href="http://dovecot.org/bugreport.html">http://dovecot.org/bugreport.html</a>

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man1/doveadm.1.html">doveadm</a></b>(1) <b><a href="../man7/doveadm-search-query.7.html">doveadm-search-query</a></b>(7) <b><a href="../man1/doveadm-mailbox-cryptokey.1.html">doveadm-mailbox-cryptokey</a>(1)</b>

Dovecot v2.3                                       2015-05-09                                 <u><a href="../man1/DOVEADM-MAILBOX.1.html">DOVEADM-MAILBOX</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>