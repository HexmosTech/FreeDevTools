<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>atf-check — executes a command and analyzes its results</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/atf-sh">atf-sh_0.21+git20240225+0c62cf9d569d-1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       atf-check — executes a command and analyzes its results

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>atf-check</b> [<b>-s</b> <u>qual:value</u>] [<b>-o</b> <u>action:arg</u> <u>...</u>] [<b>-e</b> <u>action:arg</u> <u>...</u>] [<b>-x</b>] <u>command</u>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>atf-check</b> executes a given command and analyzes its results, including exit code, stdout and stderr.

       <u>Test</u> <u>cases</u> <u>must</u> <u>use</u> <u>atf-sh</u>(<u>3</u>)<u>'s</u> <b>atf_check</b> <u>builtin</u> <u>function</u> <u>instead</u> <u>of</u> <u>calling</u> <u>this</u> <u>utility</u> <u>directly.</u>

       In  the  first  synopsis  form, <b>atf-check</b> will execute the provided command and apply checks specified by
       arguments.  By default it will act as if it was run with <b>-s</b> <u>exit:0</u> <b>-o</b> <u>empty</u> <b>-e</b>  <u>empty</u>.   Multiple  checks
       for  the  same  output channel are allowed and, if specified, their results will be combined as a logical
       and (meaning that the output must match all the provided checks).

       In the second synopsis form, <b>atf-check</b> will print information  about  all  supported  options  and  their
       purpose.

       The following options are available:

       <b>-s</b> <u>qual:value</u>  Analyzes termination status.  Must be one of:
                      <u>exit:&lt;value&gt;</u>    checks  that  the program exited cleanly and that its exit status is equal
                                      to <u>value</u>.  The exit code can be omitted  altogether,  in  which  case  any
                                      clean exit is accepted.
                      <u>ignore</u>          ignores the exit check.
                      <u>signal:&lt;value&gt;</u>  checks  that  the  program exited due to a signal and that the signal that
                                      terminated it is <u>value</u>.  The signal can be specified both as a  number  or
                                      as  a name, or it can also be omitted altogether, in which case any signal
                                      is accepted.

                      Most of these checkers can be prefixed by the ‘not-’ string,  which  effectively  reverses
                      the check.

       <b>-o</b> <u>action:arg</u>  Analyzes standard output.  Must be one of:
                      <u>empty</u>           checks that stdout is empty
                      <u>ignore</u>          ignores stdout
                      <u>file:&lt;path&gt;</u>     compares stdout with given file
                      <u>inline:&lt;value&gt;</u>  compares stdout with inline value
                      <u>match:&lt;regexp&gt;</u>  looks for a regular expression in stdout
                      <u>save:&lt;path&gt;</u>     saves stdout to given file

                      Most  of  these  checkers can be prefixed by the ‘not-’ string, which effectively reverses
                      the check.

       <b>-e</b> <u>action:arg</u>  Analyzes standard error (syntax identical to above)

       <b>-x</b>             Executes <u>command</u> as a shell command line, executing it with the system  shell  defined  by
                      <u>ATF_SHELL</u>.   You  should avoid using this flag if at all possible to prevent shell quoting
                      issues.

       <b>-r</b> <u>timeout[:interval]</u>
                      Repeats failed checks until the <u>timeout</u> (in seconds) expires.  If unspecified, the default
                      <u>interval</u> (in milliseconds) is 50 ms.  This can be used to wait for an expected  update  to
                      the contents of a file.

</pre><h4><b>ENVIRONMENT</b></h4><pre>
       <u>ATF_SHELL</u>    Path to the system shell to be used when the <b>-x</b> is given to run commands.

</pre><h4><b>EXIT</b> <b>STATUS</b></h4><pre>
       <b>atf-check</b> exits 0 on success, and other (unspecified) value on failure.

</pre><h4><b>EXAMPLES</b></h4><pre>
       The  following  are  sample invocations from within a test case.  Note that we use the <b>atf_check</b> function
       provided by <u><a href="../man3/atf-sh.3.html">atf-sh</a></u>(3) instead of executing <b>atf-check</b> directly:

             # Exit code 0, nothing on stdout/stderr
             atf_check true

             # Typical usage if failure is expected
             atf_check -s not-exit:0 false

             # Checking stdout/stderr
             echo foobar &gt;expout
             atf_check -o file:expout -e inline:"xx\tyy\n" \
                 -x 'echo foobar ; printf "xx\tyy\n" &gt;&amp;2'

             # Checking for a crash
             atf_check -s signal:sigsegv my_program

             # Combined checks
             atf_check -o match:foo -o not-match:bar echo foo baz

             # Wait 5 seconds for a line to show up in a file
             ( sleep 2 ; echo "testing 123" &gt; $test_path ) &amp;
             atf-check -o ignore -e ignore -s exit:0 -r 5 \
                 grep "testing 123" $test_path

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <u><a href="../man1/atf-sh.1.html">atf-sh</a></u>(1)

Debian                                          February 6, 2021                                    <u><a href="../man1/ATF-CHECK.1.html">ATF-CHECK</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>