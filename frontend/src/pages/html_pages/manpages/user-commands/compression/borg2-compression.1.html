<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>borg-compression - Details regarding compression</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/borgbackup2">borgbackup2_2.0.0b14-3build1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       borg-compression - Details regarding compression

</pre><h4><b>DESCRIPTION</b></h4><pre>
       It  is  no  problem to mix different compression methods in one repo, deduplication is done on the source
       data chunks (not on the compressed or encrypted data).

       If some specific chunk was once compressed and stored into the repo, creating another  backup  that  also
       uses  this  chunk  will  not  change the stored chunk.  So if you use different compression specs for the
       backups, whichever stores a chunk first determines its compression. See also borg recreate.

       Compression is lz4 by default. If you want something else, you have to specify what you want.

       Valid compression specifiers are:

       <b>none</b>   Do not compress.

       <b>lz4</b>    Use lz4 compression. Very high speed, very low compression. (default)

       <b>zstd[,L]</b>
              Use zstd ("zstandard") compression, a modern wide-range algorithm.  If you do not explicitly  give
              the compression level L (ranging from 1 to 22), it will use level 3.

       <b>zlib[,L]</b>
              Use  zlib ("gz") compression. Medium speed, medium compression.  If you do not explicitly give the
              compression level L (ranging from 0 to 9), it will  use  level  6.   Giving  level  0  (means  "no
              compression",  but  still  has zlib protocol overhead) is usually pointless, you better use "none"
              compression.

       <b>lzma[,L]</b>
              Use lzma ("xz") compression. Low speed, high compression.  If  you  do  not  explicitly  give  the
              compression  level  L  (ranging  from  0  to  9),  it  will use level 6.  Giving levels above 6 is
              pointless and counterproductive because it does not compress better due to the buffer size used by
              borg - but it wastes lots of CPU cycles and RAM.

       <b>auto,C[,L]</b>
              Use a built-in heuristic to decide per chunk whether to compress or not.  The heuristic tries with
              lz4 whether the data is compressible.  For incompressible data, it will not use compression  (uses
              "none").   For compressible data, it uses the given C[,L] compression - with C[,L] being any valid
              compression specifier. This can be helpful for media files which often cannot be  compressed  much
              more.

       <b>obfuscate,SPEC,C[,L]</b>
              Use  compressed-size  obfuscation  to  make  fingerprinting attacks based on the observable stored
              chunk size more difficult. Note:

              • You must combine this with encryption, or it won't make any sense.

              • Your repo size will be bigger, of course.

              • A chunk is limited by the constant <b>MAX_DATA_SIZE</b> (cur. ~20MiB).

              The SPEC value determines how the size obfuscation works:

              <u>Relative</u> <u>random</u> <u>reciprocal</u> <u>size</u> <u>variation</u> (multiplicative)

              Size will increase by a factor, relative to the compressed data size.  Smaller  factors  are  used
              often, larger factors rarely.

              Available factors:

                 1:     0.01 ..        100
                 2:     0.1  ..      1,000
                 3:     1    ..     10,000
                 4:    10    ..    100,000
                 5:   100    ..  1,000,000
                 6: 1,000    .. 10,000,000

              Example probabilities for SPEC <b>1</b>:

                 90   %  0.01 ..   0.1
                  9   %  0.1  ..   1
                  0.9 %  1    ..  10
                  0.09% 10    .. 100

              <u>Randomly</u> <u>sized</u> <u>padding</u> <u>up</u> <u>to</u> <u>the</u> <u>given</u> <u>size</u> (additive)

                 110: 1kiB (2 ^ (SPEC - 100))
                 ...
                 120: 1MiB
                 ...
                 123: 8MiB (max.)

       Examples:

          borg create --compression lz4 REPO::ARCHIVE data
          borg create --compression zstd REPO::ARCHIVE data
          borg create --compression zstd,10 REPO::ARCHIVE data
          borg create --compression zlib REPO::ARCHIVE data
          borg create --compression zlib,1 REPO::ARCHIVE data
          borg create --compression auto,lzma,6 REPO::ARCHIVE data
          borg create --compression auto,lzma ...
          borg create --compression obfuscate,110,none ...
          borg create --compression obfuscate,3,auto,zstd,10 ...
          borg create --compression obfuscate,2,zstd,6 ...

</pre><h4><b>AUTHOR</b></h4><pre>
       The Borg Collective

                                                   2025-01-03                                <u><a href="../man1/BORG-COMPRESSION.1.html">BORG-COMPRESSION</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>