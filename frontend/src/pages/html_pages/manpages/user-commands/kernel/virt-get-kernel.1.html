<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>virt-get-kernel - Extract kernel and ramdisk from guests</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/guestfs-tools">guestfs-tools_1.52.2-4ubuntu1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       virt-get-kernel - Extract kernel and ramdisk from guests

</pre><h4><b>SYNOPSIS</b></h4><pre>
        virt-get-kernel [--options] -d domname

        virt-get-kernel [--options] -a disk.img

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This program extracts the kernel and initramfs from a guest.

       The format of the disk image is automatically detected unless you specify it by using the <u>--format</u>
       option.

       In the case where the guest contains multiple kernels, the one with the highest version number is chosen.
       To extract arbitrary kernels from the disk image, see <b><a href="../man1/guestfish.1.html">guestfish</a></b>(1).  To extract the entire "<a href="file:/boot">/boot</a>"
       directory of a guest, see <b><a href="../man1/virt-copy-out.1.html">virt-copy-out</a></b>(1).

</pre><h4><b>OPTIONS</b></h4><pre>
       <b>--help</b>
           Display help.

       <b>-a</b> file
       <b>--add</b> file
           Add <u>file</u> which should be a disk image from a virtual machine.

           The  format  of  the disk image is auto-detected.  To override this and force a particular format use
           the <u>--format</u> option.

       <b>-a</b> URI
       <b>--add</b> URI
           Add a remote disk.  The URI format is compatible with guestfish.   See  "ADDING  REMOTE  STORAGE"  in
           <b><a href="../man1/guestfish.1.html">guestfish</a></b>(1).

       <b>--blocksize</b> <b>512</b>
       <b>--blocksize</b> <b>4096</b>
           This parameter sets the sector size of the disk image added with <u>-a</u> option and is ignored for libvirt
           guest added with <u>-d</u> option.  See also "guestfs_add_drive_opts" in <b><a href="../man3/guestfs.3.html">guestfs</a></b>(3).

       <b>--colors</b>
       <b>--colours</b>
           Use  ANSI  colour sequences to colourize messages.  This is the default when the output is a tty.  If
           the output of the program is redirected to a file, ANSI colour sequences are disabled unless you  use
           this option.

       <b>-c</b> URI
       <b>--connect</b> URI
           If  using  libvirt,  connect  to  the  given <u>URI</u>.  If omitted, then we connect to the default libvirt
           hypervisor.

           If you specify guest block devices directly (<u>-a</u>), then libvirt is not used at all.

       <b>-d</b> guest
       <b>--domain</b> guest
           Add all the disks from the named libvirt guest.  Domain UUIDs can be used instead of names.

       <b>--echo-keys</b>
           When prompting for keys and passphrases, virt-get-kernel normally turns echoing off so you cannot see
           what you are typing.  If you are not worried about Tempest attacks and there is no one  else  in  the
           room you can specify this flag to see what you are typing.

       <b>--format</b> raw|qcow2|..
       <b>--format</b> auto
           The  default for the <u>-a</u> option is to auto-detect the format of the disk image.  Using this forces the
           disk format for the <u>-a</u> option on the command line.

           If you have untrusted raw-format guest disk images, you should use this option to  specify  the  disk
           format.  This avoids a possible security problem with malicious guests (CVE-2010-3851).

       <b>--key</b> SELECTOR
           Specify a key for LUKS, to automatically open a LUKS device when using the inspection.

           <b>--key</b> NAME<b>:key:</b>KEY_STRING
           <b>--key</b> UUID<b>:key:</b>KEY_STRING
           <b>--key</b> <b>all:key:</b>KEY_STRING
               "NAME"  is the libguestfs device name (eg. "/dev/sda1").  "UUID" is the device UUID.  "all" means
               try the key against any encrypted device.

               Use the specified "KEY_STRING" as passphrase.

           <b>--key</b> NAME<b>:file:</b>FILENAME
           <b>--key</b> UUID<b>:file:</b>FILENAME
           <b>--key</b> <b>all:file:</b>FILENAME
               Read the passphrase from <u>FILENAME</u>.

           <b>--key</b> NAME<b>:clevis</b>
           <b>--key</b> UUID<b>:clevis</b>
           <b>--key</b> <b>all:clevis</b>
               Attempt passphrase-less unlocking for the device with Clevis, over the network.  Please refer  to
               "ENCRYPTED DISKS" in <b><a href="../man3/guestfs.3.html">guestfs</a></b>(3) for more information on network-bound disk encryption (NBDE).

               Note  that  if  any  such  option  is  present  on the command line, QEMU user networking will be
               automatically enabled for the libguestfs appliance.

       <b>--keys-from-stdin</b>
           Read key or passphrase parameters from stdin.  The default is to try to  read  passphrases  from  the
           user by opening <u>/dev/tty</u>.

           If  there  are multiple encrypted devices then you may need to supply multiple keys on stdin, one per
           line.

       <b>--machine-readable</b>
       <b>--machine-readable</b>=format
           This option is used to make the output more machine friendly when being  parsed  by  other  programs.
           See "MACHINE READABLE OUTPUT" below.

       <b>-o</b> directory
       <b>--output</b> directory
           This option specifies the output directory where kernel and initramfs from the guest are written.

           If not specified, the default output is the current directory.

       <b>--prefix</b> prefix
           This option specifies a prefix for the extracted files.

           If a prefix is specified, then there will be a dash ("-") after the prefix and before the rest of the
           file  name;  for  example,  a  kernel  in  the  guest  like  "vmlinuz-3.19.0-20-generic"  is saved as
           "mydistro-vmlinuz-3.19.0-20-generic" when the prefix is "mydistro".

           See also <u>--unversioned-names</u>.

       <b>-q</b>
       <b>--quiet</b>
           Don’t print ordinary progress messages.

       <b>--unversioned-names</b>
           This option affects the destination file name of extracted files.

           If enabled, files will be saved locally just with the base name; for example, kernel and  ramdisk  in
           the  guest like "vmlinuz-3.19.0-20-generic" and "initrd.img-3.19.0-20-generic" are saved respectively
           as "vmlinuz" and "initrd.img".

           See also <u>--prefix</u>.

       <b>-v</b>
       <b>--verbose</b>
           Enable verbose messages for debugging.

       <b>-V</b>
       <b>--version</b>
           Display version number and exit.

       <b>--wrap</b>
           Wrap error, warning, and informative messages.  This is the default when the output is a tty.  If the
           output of the program is redirected to a file, wrapping is disabled unless you use this option.

       <b>-x</b>  Enable tracing of libguestfs API calls.

</pre><h4><b>MACHINE</b> <b>READABLE</b> <b>OUTPUT</b></h4><pre>
       The <u>--machine-readable</u> option can be used to make the output more machine friendly, which is useful  when
       calling virt-get-kernel from other programs, GUIs etc.

       Use  the option on its own to query the capabilities of the virt-get-kernel binary.  Typical output looks
       like this:

        $ virt-get-kernel --machine-readable
        virt-get-kernel

       A list of features is printed, one per line, and the program exits with status 0.

       It is possible to specify a format string for controlling the  output;  see  "ADVANCED  MACHINE  READABLE
       OUTPUT" in <b><a href="../man3/guestfs.3.html">guestfs</a></b>(3).

</pre><h4><b>ENVIRONMENT</b> <b>VARIABLES</b></h4><pre>
       For  other  environment  variables  which  affect all libguestfs programs, see "ENVIRONMENT VARIABLES" in
       <b><a href="../man3/guestfs.3.html">guestfs</a></b>(3).

</pre><h4><b>EXIT</b> <b>STATUS</b></h4><pre>
       This program returns 0 if successful, or non-zero if there was an error.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man3/guestfs.3.html">guestfs</a></b>(3), <b><a href="../man1/guestfish.1.html">guestfish</a></b>(1), <b><a href="../man1/guestmount.1.html">guestmount</a></b>(1), <b><a href="../man1/virt-copy-out.1.html">virt-copy-out</a></b>(1), <b><a href="../man1/virt-drivers.1.html">virt-drivers</a></b>(1), <a href="http://libguestfs.org/">http://libguestfs.org/</a>.

</pre><h4><b>AUTHOR</b></h4><pre>
       Richard W.M. Jones <a href="http://people.redhat.com/~rjones/">http://people.redhat.com/~rjones/</a>

</pre><h4><b>COPYRIGHT</b></h4><pre>
       Copyright (C) 2013-2023 Red Hat Inc.

</pre><h4><b>LICENSE</b></h4><pre>
       This program is free software; you can redistribute it and/or modify  it  under  the  terms  of  the  GNU
       General  Public License as published by the Free Software Foundation; either version 2 of the License, or
       (at your option) any later version.

       This program is distributed in the hope that it will be useful, but WITHOUT ANY  WARRANTY;  without  even
       the  implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public
       License for more details.

       You should have received a copy of the GNU General Public License along with this program; if not,  write
       to the Free Software Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA.

</pre><h4><b>BUGS</b></h4><pre>
       To      get      a      list      of      bugs      against      libguestfs,      use      this     link:
       https://bugzilla.redhat.com/buglist.cgi?component=libguestfs&amp;product=Virtualization+Tools

       To      report      a      new       bug       against       libguestfs,       use       this       link:
       https://bugzilla.redhat.com/enter_bug.cgi?component=libguestfs&amp;product=Virtualization+Tools

       When reporting a bug, please supply:

       •   The version of libguestfs.

       •   Where you got libguestfs (eg. which Linux distro, compiled from source, etc)

       •   Describe the bug accurately and give a way to reproduce it.

       •   Run <b><a href="../man1/libguestfs-test-tool.1.html">libguestfs-test-tool</a></b>(1) and paste the <b>complete,</b> <b>unedited</b> output into the bug report.

guestfs-tools-1.52.2                               2025-02-04                                 <u><a href="../man1/virt-get-kernel.1.html">virt-get-kernel</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>