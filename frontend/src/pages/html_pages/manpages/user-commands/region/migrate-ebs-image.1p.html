<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>migrate-ebs-image - Copy an EBS-backed Amazon Image from one region to another</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/libvm-ec2-perl">libvm-ec2-perl_1.28-5_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       migrate-ebs-image - Copy an EBS-backed Amazon Image from one region to another

</pre><h4><b>SYNOPSYS</b></h4><pre>
         % migrate-ebs-image --from us-east-1 --to ap-southeast-1 ami-123456

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This script copies an EBS-backed Unix/Linux/windows AMI located in the EC2 region indicated by --from to
       the region indicated by --to. All associated volume snapshots, including LVM and RAID volumes, are
       migrated as well.

       If --from is omitted, then the source region is derived from the endpoint URL contained in the EC2_URL
       environment variable. The --to option is required.

       This script works with any EBS backed image, including Linux PVM, Linux HVM (cluster) and Windows images.
       It will <b>not</b> work with any instance-store backed image. To migrate such instances, please see one of the
       recipes listed online, for example:

        <a href="http://www.dowdandassociates.com/content/howto-move-ec2-instance-store-ami-one-region-another">http://www.dowdandassociates.com/content/howto-move-ec2-instance-store-ami-one-region-another</a>

</pre><h4><b>COMMAND-LINE</b> <b>OPTIONS</b></h4><pre>
       Options can be abbreviated.  For example, you can use -l for --list-regions and -b for
       --block-device-mapping:

             --from         Region in which the AMI is currently located (e.g. "us-east-1")
             --to           Region to which the AMI is to be copied (e.g. "us-west-1") REQUIRED
             --access_key   EC2 access key
             --secret_key   EC2 secret key
             --block_device_mapping
                            Add additional block devices to the image.
             --endpoint     EC2 URL (defaults to <a href="http://ec2.amazonaws.com/">http://ec2.amazonaws.com/</a>)
             --kernel       Force assignment of kernel in destination image.
             --ramdisk      Force assignment of ramdisk in destination image.
             --quiet        Quench status messages
             --list_regions List the EC2 regions

       The --block-device-mapping (-b) option is used to add ephemeral storage to the destination image.
       Amazon's API doesn't describe ephemeral volumes that are associated with images, and so this information
       is not copied from the source to the destination image, requiring you to add it back manually. The value
       of the argument is a block device mapping string in the same format as described for the command line
       program ec2-register:

        migrate-ebs-image -f us-east-1 -t ap-southeast-1 \
                             -b /dev/sdy=ephemeral0 \
                             ami-123456

       Ordinarily the script attempts to guess the correct matching kernel and ramdisk for the destination image
       based on approximate string matching. You can override these values by manually specifying the kernel
       and/or ramdisk ID in the destination region. Note that no checking is performed that the values you
       provide are correct.

</pre><h4><b>ENVIRONMENT</b> <b>VARIABLES</b></h4><pre>
       The following environment variables are used if the corresponding options are not present:

        EC2_ACCESS_KEY     your access key
        EC2_SECRET_KEY     your secret key
        EC2_URL            the desired region endpoint

</pre><h4><b>INSTALLING</b> <b>THIS</b> <b>SCRIPT</b></h4><pre>
       This script is part of the Perl VM::EC2 package. To install from the command line:

        % perl -MCPAN -e 'install VM::EC2'
        % migrate-ebs-image --from us-east-1 --to ap-southeast-1 ami-123456

</pre><h4><b>IMPORTANT</b> <b>CAVEATS</b></h4><pre>
       This script launches two "m1.small" instances, one each in the source and destination regions. It also
       creates transient volumes in both regions to hold the root volume and all other EBS snapshots associated
       with the image. Running it will incur charges for instance run time and data storage.

       In addition, this script will transfer data from one region to another across the internet, incurring
       internet data out fees on the source side, and internet data in fees on the destination side. Volumes
       that contain a filesystem, such as ext4 or ntfs, are copied from source to destination using rsync.
       Volumes that are part of a RAID or LVM volume are copied at the block level using gzip and dd via the
       secure shell. In general, rsync will be much faster and parsimonious of network bandwidth than block
       copying!

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       VM::EC2, VM::EC2::Staging::Manager

</pre><h4><b>AUTHOR</b></h4><pre>
       Lincoln Stein, <a href="mailto:lincoln.stein@gmail.com">lincoln.stein@gmail.com</a>

       Copyright (c) 2012 Ontario Institute for Cancer Research

       This package and its accompanying libraries is free software; you can redistribute it and/or modify it
       under the terms of the GPL (either version 1, or at your option, any later version) or the Artistic
       License 2.0.  Refer to LICENSE for the full license text. In addition, please see DISCLAIMER.txt for
       disclaimers of warranty.

perl v5.38.2                                       2024-08-10                              <u><a href="../man1p/MIGRATE-EBS-IMAGE.1p.html">MIGRATE-EBS-IMAGE</a></u>(1p)
</pre>
 </div>
</div></section>
</div>
</body>
</html>