<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>traffic_cache_tool - Traffic Server cache management tool</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/trafficserver">trafficserver_9.2.5+ds-1ubuntu1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       traffic_cache_tool - Traffic Server cache management tool

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>traffic_cache_tool</b> [OPTIONS] COMMAND [SUBCOMMAND ...] [OPTIONS]

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>traffic_cache_tool</b>  is  designed  to  interact  with  the  Traffic  Server  cache both for inspection and
       modification. It uses a nested command keyword style for specifying operations.  There  are  some  global
       options  that  apply  to  all  commands.  These  should  be  specified  before  any command. These can be
       abbreviated to any unique initial substring (e.g. "--sp" for "--span").

       <b>--help</b> Prints a brief usage message along with the current command hierarchy.

       <b>--spans</b>
              Specify the span (storage)  configuration.  This  can  be  a  device,  a  cache  directory,  or  a
              configuration  file  in  the  form of <u>storage.config</u>. In the latter case all devices listed in the
              configuration file become active.

       <b>--volumes</b>
              Specify the volume configuration file in the format of <u>volume.config</u>. This is important  primarily
              for  allocation  operations  where  having the volume configuration is needed in order to properly
              allocate storage in spans to specific volumes.

       <b>--write</b>
              Enable writing to storage devices. If this flag is not present then all  storage  will  be  opened
              read  only and no operation will write to any storage device. This makes "dry run" the default and
              actual changes require specifying this flag.

       <b>--aos</b>  Specific the average object size in bytes. This is used in various computations. It  is  identical
              to <u>proxy.config.cache.min_average_object_size</u>.

       <b>--input</b>
              Specify the input file or disk.

</pre><h4><b>COMMANDS</b></h4><pre>
       <b>list</b>   Search the spans for stripe data and display it. This is potentially slow as large sections of the
              disk may need to be read to find the stripe headers.

              <b>stripes</b>
                     Print internal stripe metadata.

       <b>clear</b>  Clear all the spans by writing updated span headers.

              <b>span</b>   Clears an specific span and it's stripes. The span to be cleared is specified via <b>--device</b>

       <b>dir_check</b>
              Perform diagnostics on the stripe directories.

              <b>full</b>   Full check of the directories.

              <b>freelist</b>
                     Validate the directory free lists.

              <b>bucket_chain</b>
                     Validate the bucket chains in the directories.

       <b>volumes</b>
              Compute storage allocation to stripes based on the volume configuration and print it.

       <b>alloc</b>  Allocate storage to stripes, updating the span and stripe headers.

              <b>free</b>   Allocate only free (unused) storage to volumes, updating span and stripe headers as needed.

       <b>init</b>   Initializes  an  uninitialized  span  and creates stripes on that span according to the volume and
              storage configuration The span to be initialized can be passed via <b>--input</b>

       <b>find</b>   Determines the stripe in disk cache where the content corresponding to the  provided  URL  may  be
              cached.  This command takes an input file which lists all the urls for which the stripe assignment
              needs to be determined.

</pre><h4><b>EXAMPLES</b></h4><pre>
       List the basic span data.:

          traffic_cache_tool --spans=/usr/local/etc/trafficserver/storage.config list

       Allocate unused storage space.:

          traffic_cache_tool \
             --spans=/usr/local/etc/trafficserver/storage.config \
             --volumes=/usr/local/etc/trafficserver/volume.config \
             alloc free

       Clear all spans.:

          traffic_cache_tool \
           --spans=/usr/local/etc/trafficserver/storage.config \
           --volumes=/usr/local/etc/trafficserver/volume.config \
           clear

       Clear a single span.:

          traffic_cache_tool \
          --span /opt/etc/trafficserver/storage.config \
          --volume /opt/etc/trafficserver/volume.config \
          clear span --device "/dev/sdb3" --write

       Initialize a new span.:

          traffic_cache_tool \
          --span /opt/etc/trafficserver/storage.config \
          --volume /opt/etc/trafficserver/volume.config \
          init --input "/dev/sdb3" --write

       Find Stripe Assignment.:

          traffic_cache_tool \
          --span /opt/etc/trafficserver/storage.config \
          --volume /opt/etc/trafficserver/volume.config \
          init --input "/home/user/urls.txt"

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man5/storage.config.5.html">storage.config</a>(5)</b> <b><a href="../man5/volume.config.5.html">volume.config</a>(5)</b>,

</pre><h4><b>COPYRIGHT</b></h4><pre>
       2025, <a href="mailto:dev@trafficserver.apache.org">dev@trafficserver.apache.org</a>

9.2                                               Mar 17, 2025                             <u><a href="../man1/TRAFFIC_CACHE_TOOL.1.html">TRAFFIC_CACHE_TOOL</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>