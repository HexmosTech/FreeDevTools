<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>dpkg-divert - override a package's version of a file</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/dpkg">dpkg_1.22.18ubuntu2_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       dpkg-divert - override a package's version of a file

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>dpkg-divert</b> [<u>option</u>...]  <u>command</u>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>dpkg-divert</b> is the utility used to set up and update the list of diversions.

       File <u>diversions</u> are a way of forcing <b><a href="../man1/dpkg.1.html">dpkg</a></b>(1) not to install a file into its location, but to a <u>diverted</u>
       location.  Diversions can be used through the package maintainer scripts to move a file away when it
       causes a conflict.  System administrators can also use it to override some package's configuration file,
       or whenever some files (which aren't marked as “conffiles”) need to be preserved by <b>dpkg</b>, when installing
       a newer version of a package which contains those files.

</pre><h4><b>COMMANDS</b></h4><pre>
       [<b>--add</b>] <u>file</u>
           Add a diversion for <u>file</u>.  The file is currently not renamed, see <b>--rename</b>.

       <b>--remove</b> <u>file</u>
           Remove a diversion for <u>file</u>.  The file is currently not renamed, see <b>--rename</b>.

       <b>--list</b> [<u>glob-pattern</u>]
           List all diversions, or ones matching <u>glob-pattern</u>.

       <b>--listpackage</b> <u>file</u>
           Print the name of the package that diverts <u>file</u> (since dpkg 1.15.0).  Prints LOCAL if <u>file</u> is locally
           diverted and nothing if <u>file</u> is not diverted.

       <b>--truename</b> <u>file</u>
           Print the real name for a diverted file.

</pre><h4><b>OPTIONS</b></h4><pre>
       <b>--admindir</b> <u>directory</u>
           Set  the administrative directory to <u>directory</u>.  Defaults to «<u><a href="file:/var/lib/dpkg">/var/lib/dpkg</a></u>» if <b>DPKG_ADMINDIR</b> has not
           been set.

       <b>--instdir</b> <u>directory</u>
           Set the installation directory, which refers to the directory where  packages  get  installed  (since
           dpkg 1.19.2).  Defaults to «<u>/</u>» if <b>DPKG_ROOT</b> has not been set.

       <b>--root</b> <u>directory</u>
           Set  the  root  directory  to <b>directory</b>, which sets the installation directory to «<u>directory</u>» and the
           administrative directory to «<u>directory</u><b><a href="file:/var/lib/dpkg">/var/lib/dpkg</a></b>» (since dpkg 1.19.2) if <b>DPKG_ROOT</b>  has  not  been
           set.

       <b>--divert</b> <u>divert-to</u>
           <u>divert-to</u>  is  the  location  where  the  versions  of  <u>file</u>,  as provided by other packages, will be
           diverted.

       <b>--local</b>
           Specifies that all packages' versions of this file are diverted.   This  means,  that  there  are  no
           exceptions, and whatever package is installed, the file is diverted.  This can be used by an admin to
           install a locally modified version.

       <b>--package</b> <u>package</u>
           <u>package</u> is the name of a package whose copy of <u>file</u> will not be diverted.  i.e. <u>file</u> will be diverted
           for all packages except <u>package</u>.

       <b>--quiet</b>
           Quiet mode, i.e. no verbose output.

       <b>--rename</b>
           Actually  move  the  file  aside (or back).  <b>dpkg-divert</b> will abort operation in case the destination
           file already exists.  This is the common behavior used for diversions of files from the non-<b>Essential</b>
           package set (see <b>--no-rename</b> for more details).

       <b>--no-rename</b>
           Specifies that the file should not be renamed  while  adding  or  removing  the  diversion  into  the
           database  (since  dpkg  1.19.1).  This is intended for diversions of files from the <b>Essential</b> package
           set, where the temporary disappearance of the original file is not acceptable, as it can  render  the
           system non-functional.  This is the default behavior, but that will change in the dpkg 1.20.x cycle.

       <b>--test</b>
           Test mode, i.e. don't actually perform any changes, just demonstrate.

       <b>-?</b>, <b>--help</b>
           Show the usage message and exit.

       <b>--version</b>
           Show the version and exit.

</pre><h4><b>EXIT</b> <b>STATUS</b></h4><pre>
       <b>0</b>   The requested action was successfully performed.

       <b>2</b>   Fatal or unrecoverable error due to invalid command-line usage, or interactions with the system, such
           as accesses to the database, memory allocations, etc.

</pre><h4><b>ENVIRONMENT</b></h4><pre>
       <b>DPKG_ROOT</b>
           If set and the <b>--instdir</b> or <b>--root</b> options have not been specified, it will be used as the filesystem
           root directory (since dpkg 1.19.2).

       <b>DPKG_ADMINDIR</b>
           If set and the <b>--admindir</b> or <b>--root</b> options have not been specified, it will be used as the <b>dpkg</b> data
           directory.

       <b>DPKG_MAINTSCRIPT_PACKAGE</b>
           If  set and the <b>--local</b> and <b>--package</b> options have not been specified, <b>dpkg-divert</b> will use it as the
           package name.

       <b>DPKG_DEBUG</b>
           Sets the debug mask (since dpkg 1.21.10) from an octal  value.   The  currently  accepted  flags  are
           described in the <b>dpkg</b> <b>--debug</b> option, but not all these flags might have an effect on this program.

       <b>DPKG_COLORS</b>
           Sets  the  color mode (since dpkg 1.18.5).  The currently accepted values are: <b>auto</b> (default), <b>always</b>
           and <b>never</b>.

       <b>DPKG_NLS</b>
           If set, it will be used to decide  whether  to  activate  Native  Language  Support,  also  known  as
           internationalization  (or  i18n)  support  (since  dpkg  1.22.7).   The  accepted values are: <b>0</b> and <b>1</b>
           (default).

</pre><h4><b>FILES</b></h4><pre>
       <u><a href="file:/var/lib/dpkg/diversions">/var/lib/dpkg/diversions</a></u>
           File which contains the current list of diversions  of  the  system.   It  is  located  in  the  <b>dpkg</b>
           administration directory, along with other files important to <b>dpkg</b>, such as <u>status</u> or <u>available</u>.

           <b>Note</b>:  <b>dpkg-divert</b> preserves the old copy of this file, with extension <u>-old</u>, before replacing it with
           the new one.

</pre><h4><b>NOTES</b></h4><pre>
       When adding, default is <b>--local</b> and <b>--divert</b> <u>original</u><b>.distrib</b>.  When removing, <b>--package</b> or  <b>--local</b>  and
       <b>--divert</b> must match if specified.

       Directories can't be diverted with <b>dpkg-divert</b>.

       Care  should  be  taken when diverting shared libraries, <b><a href="../man8/ldconfig.8.html">ldconfig</a></b>(8) creates a symbolic link based on the
       DT_SONAME field embedded in the library.  Because <b>ldconfig</b> does not honor diverts (only <b>dpkg</b>  does),  the
       symlink  may  end  up  pointing at the diverted library, if a diverted library has the same SONAME as the
       undiverted one.

</pre><h4><b>EXAMPLES</b></h4><pre>
       To divert all copies of a <u>/usr/bin/example</u> to <u>/usr/bin/example.foo</u>, i.e. directs all  packages  providing
       <u>/usr/bin/example</u> to install it as <u>/usr/bin/example.foo</u>, performing the rename if required:

        dpkg-divert --divert /usr/bin/example.foo --rename /usr/bin/example

       To remove that diversion:

        dpkg-divert --rename --remove /usr/bin/example

       To  divert any package trying to install <u>/usr/bin/example</u> to <u>/usr/bin/example.foo</u>, except your own <u>wibble</u>
       package:

        dpkg-divert --package wibble --divert /usr/bin/example.foo \
           --rename /usr/bin/example

       To remove that diversion:

        dpkg-divert --package wibble --rename --remove /usr/bin/example

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man1/dpkg.1.html">dpkg</a></b>(1).

1.22.18                                            2025-03-20                                     <u><a href="../man1/dpkg-divert.1.html">dpkg-divert</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>