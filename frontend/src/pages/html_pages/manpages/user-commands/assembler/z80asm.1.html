<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>z80asm - assembler for the Z80 microprocessor</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/z80asm">z80asm_1.8-2_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       z80asm - assembler for the Z80 microprocessor

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>z80asm</b> [<u>options</u>] [<u>files...</u>]

</pre><h4><b>DESCRIPTION</b></h4><pre>
       Z80asm  is  an assembler for Z80 assembly.  If no input files are specified, stdin is used.  If no output
       file is specified, "a.bin" is used.  If "-" is specified as output file, stdout is used.  This  makes  it
       possible to use the assembler in a pipeline.

       When  multiple input files are specified, the assembler first uses all files which were specified with -i
       or --input, in the order given.  After that, all files which were specified as non-option  arguments  are
       assembled, also in the order given.

</pre><h4><b>OPTIONS</b></h4><pre>
       <b>-h,</b> <b>--help</b>
              Show summary of options and exit.

       <b>-V,</b> <b>--version</b>
              Display version information and exit.

       <b>-v,</b> <b>--verbose</b>
              Be verbose.  Specify multiple times to be more verbose.  Messages are sent to standard error.

       <b>-l,</b> <b>--list</b>[=filename]
              Write a list file.  No filename or '-' means stderr.

       <b>-L,</b> <b>--label</b>[=filename]
              Write a label file.  No filename or '-' means stderr.

       <b>-p,</b> <b>--label-prefix</b>=prefix
              prefix all labels with this prefix.

       <b>-i,</b> <b>--input</b>=filename
              Specify an input file (-i may be omitted).  '-' means stdin.

       <b>-o,</b> <b>--output</b>=filename
              Specify the output file.  '-' or completely omitting the option means stdout.

       <b>-I,</b> <b>--includepath</b>=dirname
              Add a directory to the include path.  The order in which the directories are tried is from back to
              front:  the  last  directory specified has the highest priority.  "/usr/share/z80asm" is always in
              the include path (with lowest priority), you don't have to specify it.

       <b>-f,</b> <b>--force</b>
              Produce output even in case of errors.  Normally the output, list and label files are removed when
              assembly is unsuccesful.

</pre><h4><b>ASSEMBLER</b> <b>DIRECTIVES</b></h4><pre>
       All mnemonics and registers are case insensitive.  All other text (in particular, labels and macros)  are
       not.  Undocumented opcodes are as much as possible supported:

       sll and sli are equal and can both be used.

       ixh, ixl, iyh and iyl can be used.

       Assembler directives are:

       <b>incbin</b> 'filename'
              Include  a binary file into the resulting assembled file.  This can be used to include text files,
              or images, sound files, etc.  The filename is searched for in the current directory, and  then  in
              the  include  path, just like for include.  Also like for include, the quotes can be any character
              (but must match) and no substitution is performed (so ~ is not your home directory).

       <b>defb</b> or <b>db</b> arg, arg, arg, ...
              Define bytes.

       <b>defm</b> or <b>dm</b> "String", 'String'
              Define message.  Each character in the string is  stored  as  one  byte.   Backslash  escapes  are
              allowed, as in characters in expressions.  Unlike the argument for include, the quotes must really
              be  quotes  (but  they  can  be single or double quotes.  The closing quote must match the opening
              quote.)

       defb/db and defm/dm are really aliases; either can take both quoted strings and numbers:
       defb "This text should be in a buffer\r\n", 0

       <b>defs</b> or <b>ds</b> count [, value]
              Define space.  count bytes are reserved.  Each of them is initialised to the specified value, or 0
              if no value is specified.

       <b>defw</b> or <b>dw</b> arg, arg, arg, ...
              Define words.  Each argument is stored as two bytes, the low order byte first.

       <b>end</b>    End assembly of this source file.  Any remaining lines are copied into the list file (if present),
              but not assembled.

       label: <b>equ</b> expression
              Define label to have value expression.

       <b>if</b> expression
       code block 1
       <b>else</b>
       code block 2
       <b>else</b>
       code block 3
       <b>...</b>
       code block n
       <b>endif</b>
              Conditionally assemble code.  If expression is not 0,  all  odd  code  blocks  are  assembled,  if
              expression is 0, all even blocks are assembled.  Usually only one or two code blocks are present.

       <b>include</b> 'file'
              Include  file  into the source.  The quotes around the file for include are mandatory, but you can
              choose the quotes yourself.  eg, you may use % or even a letter as a quote.  The filename does not
              undergo any expansion, so \, ~, $, etc are passed as written (which means ~ will not be your  home
              directory.)   The  filename  is  used  as  specified, and then prefixed with each directory in the
              include path, until it can be opened.

       label: <b>macro</b> arg1, arg2, ...
       code block
       <b>endif</b>
              Define a macro.  The macro can be used where an opcode  is  expected.   The  code  block  is  then
              substituted,  with  the  given  values  for the arguments.  This is a textual substitution, so the
              following example is valid:
       makelabel name
       label_name:
       endm
              This will generate a label with a constructed name (it's not a very useful example, but  it  shows
              the possiblities).

       <b>org</b> address
              Set  the  "program  counter"  to address.  This does not add any bytes to the resulting binary, it
              only determines how the rest of the code is interpreted (in particular, the value  of  labels  and
              <b>$</b>).

       <b>seek</b> offset
              Seek  to position offset in the output file.  This can be used for overwiting previously assembled
              code, for example for patching a binary which was included using <b>incbin</b>.

</pre><h4><b>EXPRESSIONS</b></h4><pre>
       All expressions  can  use  the  following  operators,  in  order  of  precedence:  (<b>a</b>,  <b>b</b>  and  <b>c</b>  denote
       subexpressions)

       <b>a</b> <b>?</b> <b>b</b> <b>:</b> <b>c</b>
              If a is not zero, return b, otherwise c

       <b>a</b> <b>|</b> <b>b</b>  bitwise or

       <b>a</b> <b>^</b> <b>b</b>  bitwise xor

       <b>a</b> <b>&amp;</b> <b>b</b>  bitwise and

       <b>a</b> <b>==</b> <b>b,</b> <b>a</b> <b>=</b> <b>b,</b> <b>a</b> <b>!=</b> <b>b</b>
              equality

       <b>a</b> <b>&lt;=</b> <b>b,</b> <b>a</b> <b>&gt;=</b> <b>b,</b> <b>a</b> <b>&lt;</b> <b>b,</b> <b>a</b> <b>&gt;</b> <b>b</b>
              inequality

       <b>a</b> <b>&lt;&lt;</b> <b>b,</b> <b>a</b> <b>&gt;&gt;</b> <b>b</b>
              bit shift

       <b>a</b> <b>+</b> <b>b,</b> <b>a</b> <b>-</b> <b>b</b>
              addition and subtraction

       <b>a</b> <b>*</b> <b>b,</b> <b>a</b> <b>/</b> <b>b,</b> <b>a</b> <b>%</b> <b>b</b>
              multiplication, division and modulo

       <b>~a,</b> <b>+a,</b> <b>-a</b>
              bitwise not, no effect and negation

       <b>?</b>label 1  if  label  exists,  0 if it does not.  This does not generate an error if label does not exist.
              Note that this is usually evaluated immediately (if the rest of the expression  permits),  and  it
              does  not  check if the label is defined later.  This means it can be used as the argument of <b>if</b> ,
              to get the functionality of #ifdef in C.

       <b>(a)</b>    parenthesis

       Literals in expressions may be written as: (case does not matter)

       <b>@c11</b>   arbitrary base number (specified by 'c' so c+1 == 10: here base is 13)

       <b>14,</b> <b>14d,</b> <b>@914</b>
              decimal number

       <b>016,</b> <b>16o,</b> <b>16q,</b> <b>&amp;o16,</b> <b>@716</b>
              octal number

       <b>0Eh,</b> <b>0xE,</b> <b>&amp;hE,</b> <b>$E,</b> <b>@FE</b>
              hexadecimal number (for the first notations, the first character must be 0-9)

       <b>%1110,</b> <b>1110b,</b> <b>&amp;b1110,</b> <b>@11110</b>
              binary number

       <b>'s'</b>    ASCII code of 's'

       <b>'\n',</b> <b>'\r',</b> <b>'\a',</b> <b>'\t'</b>
              Newline, carriage return, alert, tab

       <b>'\nnn'</b> Octal ASCII code

       <b>$</b>      address of first byte of current command

</pre><h4><b>LABELS</b></h4><pre>
       In all expressions, labels may be used.  However, there are some expressions  where  the  value  must  be
       computable at once, and therefore only previously defined labels may be used.  This is the case for:

       - The argument of org

       - The argument of seek

       - The argument of equ (eg, a label definition)

       - The first argument of ds

       - The argument of if

       In all other expressions, labels which are defined later may be used.

       Labels must consist of letters, digits, underscores and periods, and must not start with a digit.  Labels
       are case sensitive.

       Labels starting with a period (.) are <b>local</b> , which means their scope is only the current include file or
       macro  definition (and files included/macros called from it).  This is particularly useful for macros, to
       prevent duplicate definitions when using a macro more than once.

</pre><h4><b>EXIT</b> <b>STATUS</b></h4><pre>
       If assembly was successful, no  output  is  produced  (except  the  result,  and  messages  triggered  by
       --verbose) and 0 is returned.  At any error, there is output on the standard error and 1 is returned.

</pre><h4><b>NOTES</b></h4><pre>
       Parts  that  are not assembled because of an if statement and macros which are defined but never used are
       only checked to have a correct command. The argument is not parsed.  This means that if the  file  passes
       through  the  assembler  with  no  warnings or errors, it may still not assemble correctly in a different
       setting (where the if's give different results).

</pre><h4><b>BUGS</b></h4><pre>
       If  you   find   a   bug,   or   want   to   send   comments,   please   use   the   web   interface   at
       <a href="http://savannah.nongnu.org/projects/z80asm/">http://savannah.nongnu.org/projects/z80asm/</a> or send an e-mail to <a href="mailto:wijnen@debian.org">wijnen@debian.org</a>.

</pre><h4><b>AUTHOR</b></h4><pre>
       Z80asm  was  written  by  Bas  Wijnen  &lt;<a href="mailto:wijnen@debian.org">wijnen@debian.org</a>&gt;.   Some  patches  were provided by Jan Wilmans
       &lt;<a href="mailto:jw@dds.nl">jw@dds.nl</a>&gt;

                                                  May 10, 2005                                         <u><a href="../man1/Z80ASM.1.html">Z80ASM</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>