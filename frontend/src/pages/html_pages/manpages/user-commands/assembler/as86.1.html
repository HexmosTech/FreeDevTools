<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>as86 - Assembler for 8086..80386 processors</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/jammy/+package/bin86">bin86_0.16.17-3.3_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       as86 - Assembler for 8086..80386 processors

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>as86</b> [<b>-0123agjuw</b>] [<b>-lm</b>[<b>list</b>]] [<b>-n</b> <b>name</b>] [<b>-o</b> <b>obj</b>] [<b>-b</b>[<b>bin</b>]] [<b>-s</b> <b>sym</b>] [<b>-t</b> <b>textseg</b>] <b>src</b>

       <b>as86_encap</b> <b>prog.s</b> <b>prog.v</b> [<b>prefix_</b>] [<b>as86_options</b>]

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>as86</b>  is  an  assembler for the 8086..80386 processors, it's syntax is closer to the intel/microsoft form
       rather than the more normal generic form of the unix system assembler.

       The <b>src</b> file can be '-' to assemble the standard input.

       This assembler can be compiled to support the 6809 cpu and may even work.

       <b>as86_encap</b> is a shell script to call as86 and convert the created binary into  a  C  file  <b>prog.v</b>  to  be
       included  in  or linked with programs like boot block installers.  The <b>prefix_</b> argument is a prefix to be
       added to all variables defined by the source, it defaults to the name of the source file.  The  variables
       defined  include  <b>prefix_start</b>  <b>prefix_size</b> and <b>prefix_data</b> to define and contain the code, plus integers
       containing the values of all exported labels.  Either or both the <b>prog.s</b> and <b>prog.v</b> arguments can be  '-'
       for standard in/out.

</pre><h4><b>OPTIONS</b></h4><pre>
       <b>-0</b>     start with 16-bit code segment, warn for all instructions &gt; 8086

       <b>-1</b>     start with 16-bit code segment, warn for all instructions &gt; 80186

       <b>-2</b>     start with 16-bit code segment, warn for all instructions &gt; 80286

       <b>-3</b>     start with 32-bit code segment, don't warn for any instructions. (not even 486 or 586)

       <b>-a</b>     enable  partial compatibility with Minix asld. This swaps the interpretation of round brackets and
              square brackets as well as making alterations to the code generation and syntax  for  16bit  jumps
              and calls. ("jmp @(bx)" is then a valid instruction)

       <b>-g</b>     only put global symbols in object or symbol file

       <b>-j</b>     replace  all  short  jumps  with  similar  16 or 32 bit jumps, the 16 bit conditional branches are
              encoded as a short conditional and a long unconditional branch.

       <b>-O</b>     this causes the assembler to add extra passes to try to use forward references to reduce the bytes
              needed for some instructions.  If the labels move on the last pass the assembler will keep  adding
              passes until the labels all stabilise (to a maximum of 30 passes) It's probably not a good idea to
              use  this  with  hand written assembler use the explicit <b>br</b> <b>bmi</b> <b>bcc</b> style opcodes for 8086 code or
              the <b>jmp</b> <b>near</b> style for conditional i386 instructions and  make  sure  all  variables  are  defined
              before they are used.

       <b>-l</b>     produce list file, filename may follow

       <b>-m</b>     print macro expansions in listing

       <b>-n</b>     name of module follows (goes in object instead of source name)

       <b>-o</b>     produce object file, filename follows

       <b>-b</b>     produce  a  raw  binary file, filename may follow.  This is a 'raw' binary file with no header, if
              there's no <b>-s</b> option the file starts at location 0.

       <b>-s</b>     produce an ASCII symbol file, filename follows.  The format of this table is designed to  be  easy
              to  parse for encapsulation and related activities in relation to binary files created with the <b>-b</b>
              option.  If a binary file doesn't start at location zero the first two items in the table are  the
              start and end addresses of the binary file.

       <b>-u</b>     assume undefined symbols are imported-with-unspecified segment.

       <b>-w-</b>    allow the assembler to print warning messages.

       <b>-t</b> <b>n</b>   move all text segment data in segment n+3.

</pre><h4><b>AS86</b> <b>SOURCE</b></h4><pre>
       Special characters

       <b>*</b>      Address of the start of the current line.

       <b>;</b> <b>!</b>    Either  of these marks the start of a comment. In addition any 'unexpected' character at the start
              of a line is assumed to be a comment (but it's also displayed to the terminal).

       <b>$</b>      Prefix for hexadecimal numbers, the 'C' syntax, eg 0x1234, is also accepted.

       <b>%</b>      Prefix for binary numbers.

       <b>#</b>      Prefix for immediate operands.

       <b>[</b> <b>]</b>    Specifies an indirect operand.
              Unlike MASM the assembler has no type information on labels just a segment and offset. This  means
              that the way this operator and the immediate prefix work are like traditional assemblers.

              Examples:
                   mov     ax,bx
                   jmp     bx
              Direct register addressing, the jump copies BX into PC.

                   mov ax,[bx]
                   jmp [bx]
              Simple  indirect  register addressing, the jump moves the contents of the location specified by BX
              into the PC.

                   mov ax,#1234
              Immediate value, ax becomes 1234.

                   mov ax,1234
                   mov ax,_hello
                   mov ax,[_hello]
              Absolute addressing, ax is set to contents of location 1234. Note the third option is not strictly
              consistent but is in place mainly for asld compatibility.

                   mov ax,_table[bx]
                   mov ax,_table[bx+si]
                   mov eax,_table[ebx*4]

                   mov ax,[bx+_table]
                   mov ax,[bx+si+_table]
                   mov eax,[ebx*4+_table]
              Indexed addressing, both formats are ok, I think the first is more correct but I tend to used  the
              second. :-)

       Conditionals

       <b>IF,</b> <b>ELSE,</b> <b>ELSEIF,</b> <b>ENDIF</b>
              Numeric condition

       <b>IFC,</b> <b>ELSEIFC</b>
              String compare (str1,str2)

       <b>FAIL</b> <b>.FAIL</b>
              Generate user error.

       Segment related

       <b>.TEXT</b> <b>.ROM</b> <b>.DATA</b> <b>.BSS</b>
              Set current segment. These can be preceded by the keyword <b>.SECT</b>

       <b>LOC</b>    Set  numeric  segment  0=TEXT, 3=DATA,ROM,BSS, 14=MAX.  The segment order set by the linker is now
              0,4,5,6,7,8,9,A,B,C,D,E,1,2,3.  Segment 0 and all segments above 3 are assumed to be text segment.
              Note the 64k size restrictions are not imposed for segments 3-14.

       Label type definition

       <b>EXPORT</b> <b>PUBLIC</b> <b>.DEFINE</b>
              Export label defined in this object

       <b>ENTRY</b>  Force linker to include the specified label in a.out

       <b>.GLOBL</b> <b>.GLOBAL</b>
              Define label as external and force import even if it isn't used.

       <b>EXTRN</b> <b>EXTERN</b> <b>IMPORT</b> <b>.EXTERN</b>
              Import list of externally defined labels
              NB: It doesn't make sense to use imports for raw binary files.

       <b>.ENTER</b> Mark entry for old binary file (obs)

       Data definition

       <b>DB</b> <b>.DATA1</b> <b>.BYTE</b> <b>FCB</b>
              List of 1 byte objects.

       <b>DW</b> <b>.DATA2</b> <b>.SHORT</b> <b>FDB</b> <b>.WORD</b>
              List of 2 byte objects.

       <b>DD</b> <b>.DATA4</b> <b>.LONG</b>
              List of 4 byte objects.

       <b>.ASCII</b> <b>FCC</b>
              Ascii string copied to output.

       <b>.ASCIZ</b> Ascii string copied to output with trailing <b>nul</b> byte.

       Space definition

       <b>.BLKB</b> <b>RMB</b> <b>.SPACE</b>
              Space is counted in bytes.

       <b>.BLKW</b> <b>.ZEROW</b>
              Space is counted in words. (2 bytes each)

       <b>COMM</b> <b>.COMM</b> <b>LCOMM</b> <b>.LCOMM</b>
              Common area data definition

       Other useful pseudo operations.

       <b>.ALIGN</b> <b>.EVEN</b>
              Alignment

       <b>EQU</b>    Define label

       <b>SET</b>    Define re-definable label

       <b>ORG</b> <b>.ORG</b>
              Set assemble location

       <b>BLOCK</b>  Set assemble location and stack old one

       <b>ENDB</b>   Return to stacked assemble location

       <b>GET</b> <b>INCLUDE</b>
              Insert new file (no quotes on name)

       <b>USE16</b> [<b>cpu</b>]
              Define default operand size as 16 bit, argument is cpu type the code is expected to  run  on  (86,
              186, 286, 386, 486, 586) instructions for cpus later than specified give a warning.

       <b>USE32</b> [<b>cpu</b>]
              Define  default  operand  size as 32 bit, argument is cpu type the code is expected to run on (86,
              186, 286, 386, 486, 586) instructions for cpus later than specified give a warning. If the cpu  is
              not mentioned the assembler ensures it is &gt;= 80386.

       <b>END</b>    End of compilation for this file.

       <b>.WARN</b>  Switch warnings

       <b>.LIST</b>  Listings on/off (1,-1)

       <b>.MACLIST</b>
              Macro listings on/off (1,-1)

       Macros, now working, the general form is like this.

           MACRO sax
              mov ax,#?1
           MEND
           <a href="../man1/sax.1.html">sax</a>(1)

       Unimplemented/unused.

       IDENT  Define object identity string.

       SETDP  Set DP value on 6809

       MAP    Set binary symbol table map number.

       Registers
              BP BX DI SI
              EAX EBP EBX ECX EDI EDX ESI ESP
              AX CX DX SP
              AH AL BH BL CH CL DH DL
              CS DS ES FS GS SS
              CR0 CR2 CR3 DR0 DR1 DR2 DR3 DR6 DR7
              TR3 TR4 TR5 TR6 TR7 ST

       Operand type specifiers
              BYTE DWORD FWORD FAR PTR PWORD QWORD TBYTE WORD NEAR

              The  'near  and  'far'  do not allow multi-segment programming, all 'far' operations are specified
              explicitly through the use of the instructions: jmpi, jmpf, callf, retf, etc. The 'Near'  operator
              can be used to force the use of 80386 16bit conditional branches. The 'Dword' and 'word' operators
              can control the size of operands on far jumps and calls.

       General instructions.
              These are in general the same as the instructions found in any 8086 assembler, the main exceptions
              being a few 'Bcc' (BCC, BNE, BGE, etc) instructions which are shorthands for a short branch plus a
              long jump and 'BR' which is the longest unconditional jump (16 or 32 bit).

       Long branches
              BCC BCS BEQ BGE BGT BHI BHIS BLE BLO BLOS BLT BMI BNE BPC BPL BPS BVC BVS BR

       Intersegment
              CALLI CALLF JMPI JMPF

       Segment modifier instructions
              ESEG FSEG GSEG SSEG

       Byte operation instructions
              ADCB  ADDB  ANDB  CMPB  DECB DIVB IDIVB IMULB INB INCB MOVB MULB NEGB NOTB ORB OUTB RCLB RCRB ROLB
              RORB SALB SARB SHLB SHRB SBBB SUBB TESTB XCHGB XORB

       Standard instructions
              AAA AAD AAM AAS ADC ADD AND ARPL BOUND BSF BSR BSWAP BT BTC BTR BTS CALL CBW CDQ CLC CLD CLI  CLTS
              CMC CMP CMPS CMPSB CMPSD CMPSW CMPW CMPXCHG CSEG CWD CWDE DAA DAS DEC DIV DSEG ENTER HLT IDIV IMUL
              IN  INC  INS  INSB  INSD  INSW INT INTO INVD INVLPG INW IRET IRETD J JA JAE JB JBE JC JCXE JCXZ JE
              JECXE JECXZ JG JGE JL JLE JMP JNA JNAE JNB JNBE JNC JNE JNG JNGE JNL JNLE JNO JNP JNS  JNZ  JO  JP
              JPE  JPO  JS  JZ LAHF LAR LDS LEA LEAVE LES LFS LGDT LGS LIDT LLDT LMSW LOCK LODB LODS LODSB LODSD
              LODSW LODW LOOP LOOPE LOOPNE LOOPNZ LOOPZ LSL LSS LTR MOV MOVS MOVSB MOVSD MOVSW MOVSX MOVW  MOVZX
              MUL  NEG  NOP  NOT  OR OUT OUTS OUTSB OUTSD OUTSW OUTW POP POPA POPAD POPF POPFD PUSH PUSHA PUSHAD
              PUSHF PUSHFD RCL RCR RDMSR REP REPE REPNE REPNZ REPZ RET RETF RETI ROL ROR SAHF SAL SAR  SBB  SCAB
              SCAS SCASB SCASD SCASW SCAW SEG SETA SETAE SETB SETBE SETC SETE SETG SETGE SETL SETLE SETNA SETNAE
              SETNB  SETNBE  SETNC SETNE SETNG SETNGE SETNL SETNLE SETNO SETNP SETNS SETNZ SETO SETP SETPE SETPO
              SETS SETZ SGDT SHL SHLD SHR SHRD SIDT SLDT SMSW STC STD STI STOB STOS STOSB STOSD STOSW  STOW  STR
              SUB TEST VERR VERW WAIT WBINVD WRMSR XADD XCHG XLAT XLATB XOR

       Floating point
              F2XM1  FABS FADD FADDP FBLD FBSTP FCHS FCLEX FCOM FCOMP FCOMPP FCOS FDECSTP FDISI FDIV FDIVP FDIVR
              FDIVRP FENI FFREE FIADD FICOM FICOMP FIDIV FIDIVR FILD FIMUL FINCSTP FINIT FIST FISTP FISUB FISUBR
              FLD FLD1 FLDL2E FLDL2T FLDCW FLDENV FLDLG2 FLDLN2 FLDPI FLDZ FMUL FMULP FNCLEX FNDISI FNENI FNINIT
              FNOP FNSAVE FNSTCW FNSTENV FNSTSW FPATAN FPREM FPREM1 FPTAN FRNDINT  FRSTOR  FSAVE  FSCALE  FSETPM
              FSIN  FSINCOS  FSQRT FST FSTCW FSTENV FSTP FSTSW FSUB FSUBP FSUBR FSUBRP FTST FUCOM FUCOMP FUCOMPP
              FWAIT FXAM FXCH FXTRACT FYL2X FYL2XP1

</pre><h4><b>Using</b> <b>GASP</b></h4><pre>
       The Gnu assembler preprocessor provides some reasonable implementations of user biased pseudo opcodes.

       It can be invoked in a form similar to:

       <b>gasp</b>   [<b>-a...</b>]  <b>file.s</b> [<b>file2.s</b>] <b>|</b>
              <b>as86</b> [<b>...</b>]  <b>-</b> [<b>-o</b> <b>obj</b>] [<b>-b</b> <b>bin</b>]

       Be aware though that Gasp generates an error for <b>.org</b> commands, if you're not using alternate syntax  you
       can  use  <b>org</b>  instead,  otherwise  use <b>block</b> and <b>endb</b>.  The directive <b>export</b> is translated into <b>.global</b>,
       which forces an import, if you are making a file using <b>-b</b> use <b>public</b> or <b>.define</b> instead.

       The GASP list options have no support in as86.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <a href="../man1/as.1.html">as</a>(1), <a href="../man1/ld86.1.html">ld86</a>(1), <a href="../man1/bcc.1.html">bcc</a>(1)

</pre><h4><b>BUGS</b></h4><pre>
       The 6809 version does not support -0, -3, -a or -j.

       If this assembler is compiled with BCC this is classed as a 'small' compiler, so there is a maximum input
       line length of 256 characters and the instruction to cpu checking is not included.

       The checking for instructions that work on specific  cpus  is  probably  not  complete,  the  distinction
       between 80186 and 80286 is especially problematic.

       The <b>.text</b> and <b>.data</b> pseudo operators are not useful for raw binary files.

       When using the <b>org</b> directive the assembler can generate object files that may break <a href="../man1/ld86.1.html">ld86</a>(1).

                                                    Mar, 1999                                            <u><a href="../man1/as86.1.html">as86</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>