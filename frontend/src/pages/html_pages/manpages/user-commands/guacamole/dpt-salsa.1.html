<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>dpt-salsa - manage repositories and members of the perl-team on salsa.debian.org</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/pkg-perl-tools">pkg-perl-tools_0.82_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       dpt-salsa - manage repositories and members of the perl-team on salsa.debian.org

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>dpt</b> <b>salsa</b> [--help|--man|--json|--verbose|--all|--attic] <u>subcommand</u> [parameters]

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>dpt-salsa</b> is basically a wrapper around GitLab::API::v4, similar to <b><a href="../man1/gitlab-api-v4.1.html">gitlab-api-v4</a></b>(1), with various
       variables regarding <u>salsa.debian.org</u> and the <u>modules</u> subgroup of the <u>perl-team</u> group already preset and
       typical method calls encapsulated.

       It offers subcommands to manage repositories and members of the <u>modules</u> subgroup with hopefully less
       typing then calling the API manually each time.

       Make sure to check the "CONFIGURATION" section below if you use <b>dpt-salsa</b> for the first time.

</pre><h4><b>SUBCOMMANDS</b></h4><pre>
   <b>for</b> <b>managing</b> <b>repositories</b>
       <u>pushrepo</u>

       Creates a new repository in the <u>modules</u> subgroup (with createrepo() and configurerepo()) and pushes the
       local repository.

       <u>createrepo</u> <u>repositoryname</u>

       Creates a new empty repository in the <u>modules</u> subgroup and calls configurerepo().

       Parameters:

       repositoryname
           Name of the repository to be added; usually the package name.  Required.

       <u>configurerepo</u> <u>repositoryid|repositoryname</u> <u>[--verbose]</u>

       Sets up the default webhooks and services for one repository.

       Parameters:

       repositoryid|repositoryname
           The repository to be configured. Either its id (\d+) or name (\w+).  Required.

       Silent on success unless "--verbose" is given.

       <u>configurerepo</u> <u>--all</u> <u>[--attic]</u> <u>[--verbose]</u> <u>[--parallel</u> <u>N]</u> <u>[-j</u> <u>N]</u>

       Sets up the default webhooks and services for all active (or, with "--attic", archived) repositories.

       Silent on success unless "--verbose" is given.

       With "--parallel" Parallel::ForkManager is employed for parallelism.

       <u>changerepo</u> <u>repositoryid|repositoryname</u> <u>"name"|"description"</u> <u>"parameter"</u>

       Changes the name (and the path) or the description of a repository.

       Parameters:

       repositoryid|repositoryname
           The repository to be configured. Either its id (\d+) or name (\w+).  Required.

       "name"|"description"
           What should be changed? The "name" or the "description" of the repository.  Required.

       parameter
           The new name or description.  Required.

       <u>deleterepo</u> <u>repositoryid|repositoryname</u>

       Delete a repository (a.k.a project).

       Parameters:

       repositoryid|repositoryname
           The repository to be deleted. Either its id (\d+) or name (\w+).  Required.

       <u>listrepos</u> <u>[--json]</u> <u>[--attic]</u>

       Show all active (or, with "--attic", archived) repositories in the <u>modules</u> subgroup.

       If used with "--all", returns repository ids and does not output anything; for internal use.

       <u>kgb</u> <u>repositoryid|repositoryname|--all</u> <u>[--attic]</u> <u>--on|--off</u>

       Install  ("--on")  or  remove  ("--off")  the  KGB  IRC  notification  webhook  for the given, all active
       ("--all"), or all archived ("--attic") repositories.

       "--on" removes any legacy hooks (plain http, explicit port number) and replaces them with  the  canonical
       one. If the repository already uses the right hook, "--on" does nothing.

       Parameters:

       repositoryid|repositoryname
           The repository to be configured. Either its id (\d+) or name (\w+).  Required unless "--all" is used.

       <u>toattic|fromattic</u> <u>repositoryid|repositoryname</u>

       Moves  a  repository  to/from  the  <u>attic</u>  sub-group  of the <u>modules</u> sub-group.  Useful when a package is
       removed from the archive or added back.

       Probably needs appropriate permissions.

   <b>for</b> <b>managing</b> <b>users</b>
       <u>adduser</u> <u>username|userid</u> <u>[access_level]</u>

       Adds a user to the <u>modules</u> subgroup of the <u>perl-team</u> group.

       Parameters:

       username|userid
           The user to be added. Either their id (\d+) or their username (\w+).  Required.

       access_level
           One of <u>GitLab</u>'s access levels: no_access, guest, reporter, developer, maintainer,  owner.   Optional,
           defaults to "maintainer".

       <u>removeuser</u> <u>username|userid</u>

       Removes a user from the <u>modules</u> subgroup of the <u>perl-team</u> group.

       Parameters:

       username|userid
           The user to be removed. Either their id (\d+) or their username (\w+).  Required.

       <u>changeuser</u> <u>access_level</u> <u>username|userid|--all</u>

       Change the access level of one or all user(s) in the <u>modules</u> subgroup of the <u>perl-team</u> group.

       Parameters:

       access_level
           One of <u>GitLab</u>'s access levels: guest, reporter, developer, maintainer, owner.  Required.

       username|userid
           The  user  whose  access  level  is  to  be  changed.  Either their id (\d+) or their username (\w+).
           Required, unless "--all" is used.

       <u>listmembers</u> <u>[--json]</u>

       Show all members of the <u>modules</u> subgroup of the <u>perl-team</u> group.

       If used with "--all", returns user ids and does not output anything; for internal use.

   <b>others</b>
       <u>mrconfig</u> <u>[--parallel</u> <u>N]</u> <u>[-j</u> <u>N]</u>

       Helper for creating

       •   a <u>.mrconfig.packages</u> file in the local clone of "meta.git" for all active  packages  of  the  <u>modules</u>
           subgroup of the <u>perl-team</u> group. Also writes to stdout which can be included from <u>.mrconfig</u>.

       •   <u>.lastactivity/PKGNAME</u>  files  in the local clone of "meta.git" for all active packages of the <u>modules</u>
           subgroup of the <u>perl-team</u> group which are then used by <b>compare-lastactivity</b> in <u>.mrconfig</u>.

       With "--parallel" Parallel::ForkManager is employed for parallelism.

       Additionally, the option will also  output  a  list  of  repositories  that  potentially  have  not  been
       configured with <b>dpt-salsa</b>.

       <u>current_user</u> <u>[--json]</u>

       Outputs information about the user whose <u>GitLab</u> token is used.

       <u>help</u>

       Same as option <u>--help</u>.

       <u>version</u> <u>[--json]</u>

       Returns the version of the <u>GitLab</u> instance running on <u>salsa.debian.org</u>.

       This subcommand is pretty useless, the only excuse for its existence is the ability to test if everything
       is working fine.

</pre><h4><b>OPTIONS</b></h4><pre>
       --help
           Show short help.

       --man
           Show complete manpage.

       --all
           Act on all users or repositories, not a single named one.  Only for specific subcommands, as noted in
           their description.

       --attic
           Act  on  archived  repositories  instead  of active ones.  Only for specific subcommands, as noted in
           their description.

       --json
           Format output as JSON instead of human-targeted text.  Only for specific  subcommands,  as  noted  in
           their description.

       --verbose
           Print  output  for  otherwise  silent  and  potentially  long-running  commands.   Only  for specific
           subcommands, as noted in their description.

</pre><h4><b>CONFIGURATION</b></h4><pre>
       <b>dpt-salsa</b>  uses  the  following  environment  variables,  set  either  directly  or  via  <u><a href="file:~/.dpt.conf">~/.dpt.conf</a></u>   /
       <u><a href="file:~/.config/dpt.conf">~/.config/dpt.conf</a></u>:

       DPT_SALSA_PRIVATE_TOKEN
           required, no default, obviously

           These  tokens  are created at &lt;https://salsa.debian.org/-/profile/personal_access_tokens&gt;.  Note that
           the token needs <b>api</b> and <b>read_user</b> scope permissions.

       DPT_SALSA_API_URL
           optional, default: https://salsa.debian.org/api/v4

       DPT_SALSA_PERL_TEAM_PATH
           optional, default: perl-team

       DPT_SALSA_PERL_TEAM_ID
           optional, default: 2663

       DPT_SALSA_PERL_TEAM_INTERPRETER_PATH
           optional, default: perl-team/interpreter

       DPT_SALSA_PERL_TEAM_INTERPRETER_ID
           optional, default: 2664

       DPT_SALSA_PERL_TEAM_MODULES_PATH
           optional, default: perl-team/modules

       DPT_SALSA_PERL_TEAM_MODULES_ID
           optional, default: 2665

       DPT_SALSA_PERL_TEAM_MODULES_PACKAGES_PATH
           optional, default: perl-team/modules/packages

       DPT_SALSA_PERL_TEAM_MODULES_PACKAGES_ID
           optional, default: 2666

       DPT_SALSA_PERL_TEAM_MODULES_ATTIC_PATH
           optional, default: perl-team/modules/attic

       DPT_SALSA_PERL_TEAM_MODULES_ATTIC_ID
           optional, default: 2667

       DPT_SALSA_PERL_TEAM_MODULES_META_PATH
           optional, default: perl-team/modules/meta

       DPT_SALSA_PERL_TEAM_MODULES_META_ID
           optional, default: 13881

       DPT_SALSA_PERL_TEAM_PAGES_PATH
           optional, default: perl-team/perl-team.pages.debian.net

       DPT_SALSA_PERL_TEAM_PAGES_ID
           optional, default: 11266

       DPT_SALSA_PERL_TEAM_SCRIPTS_PATH
           optional, default: perl-team/scripts

       DPT_SALSA_PERL_TEAM_SCRIPTS_ID
           optional, default: 13429

       DPT_PACKAGES
           only used by the <b>mrconfig</b> subcommand, no default; most probably already set for use  with  other  <b>dpt</b>
           commands.

       Cf. <b><a href="../man5/dpt-config.5.html">dpt-config</a></b>(5).

       By  default,  the  output  of some subcommands uses colors, unless STDOUT is not a tty or the environment
       variables CLICOLOR or NO_COLOR are set to false or true, respectively.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       &lt;https://salsa.debian.org/perl-team&gt;

       GitLab::API::v4

       &lt;https://docs.gitlab.com/ce/api/&gt;

</pre><h4><b>COPYRIGHT</b> <b>AND</b> <b>LICENSE</b></h4><pre>
       Copyright 2018-2024, gregor herrmann &lt;<a href="mailto:gregoa@debian.org">gregoa@debian.org</a>&gt;

       Released under the same terms as Perl itself, i.e. Artistic or GPL-1+.

pkg-perl-tools 0.82                                2025-02-28                                       <u><a href="../man1/dpt-salsa.1.html">dpt-salsa</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>