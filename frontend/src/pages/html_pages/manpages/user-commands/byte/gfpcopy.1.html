<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>gfpcopy - copy Gfarm files in parallel</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/gfarm-client">gfarm-client_2.7.20+dfsg-1.1ubuntu1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       gfpcopy - copy Gfarm files in parallel

</pre><h4><b>SYNOPSIS</b></h4><pre>

       <b>gfpcopy</b> [-nqvdpPU] [-X <u>regexp</u>] [-S <u>source-domainname</u>] [-h <u>source-hostfile</u>] [-D <u>destination-domainname</u>]
               [-H <u>destination-hostfile</u>] [-j <u>num-of-processes</u>] [-J <u>num-of-processes</u>] [-M <u>limit-byte</u>]
               [-z <u>minimum-byte</u>] [-Z <u>maximum-byte</u>] [-w <u>way-of-scheduling</u>] [-W <u>kilobytes-for-threshold</u>]
               [-s <u>KB/s-to-simulate</u>] [-F <u>num-for-readahead</u>] [-b <u>bufsize</u>] [-f] [-e] [-k] <u>source-path</u>
               <u>destination-path</u>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>gfpcopy</b> copies files in parallel.

       When the <u>source-path</u> is a directory, files under the directory will be copied recursively.

       When the <u>destination-path</u> does not exist, the directory is created. When the <u>destination-path</u> exists, a
       directory of the same name as the <u>source-path</u> is created under the <u>destination-path</u>.

       A set of source/destination hosts can be specified by a domain name and/or a hostlist file. When both a
       domain name and a hostlist file are specified, a set of hosts is determined by both conditions. When a
       set of source hosts is specified, only files stored on the source hosts are copied.

       <b>gfpcopy</b> also retrieves the directory entries in parallel.

</pre><h4><b>SOURCE</b> <b>PATH</b></h4><pre>
       <u>source-path</u> must be one of the following formats. Files on HPSS cannot be copied.

       <u>path-name</u>
           is a relative path or an absolute path of a local file system. When the path is a mount point on
           gfarm2fs, files are copied without passing through the gfarm2fs.

       <u>gfarm:...</u>
           is a Gfarm URL.

       <u>file:...</u>
           is an URL of a local file system.

</pre><h4><b>DESTINATION</b> <b>PATH</b></h4><pre>
       <u>destination-path</u> must be one of the following formats.

       <u>path-name</u>
           is a relative path or an absolute path of a local file system. When the path is a mount point on
           gfarm2fs, files are copied without passing through the gfarm2fs.

       <u>gfarm:...</u>
           is a Gfarm URL of a directory.

       <u>file:...</u>
           is an URL of a directory on a local file system.

       <u>hpss:...</u>
           is an URL of a directory on HPSS. If the same directory as the <u>source-path</u> exists under this
           directory, the <u>source-path</u> cannot be copied. The differential copy is not supported for HPSS.
           Relative path such as "hpss:". and "hpss:dir" can be specified.

</pre><h4><b>GFPCOPY</b> <b>OPTIONS</b></h4><pre>
       These are options only for <b>gfpcopy</b>.

       <b>-b</b> <u>bufsize</u>
           Specifies the buffer size in bytes to copy.

           The default value is 64 KiB (64 * 1024).

       <b>-f</b>
           With the -f option, existing files will be overwritten when the size is different or the modification
           time (mtime) is different from the source file.

           Without the -f option, existing files will be overwritten when they are older than the corresponding
           source files in the modification time.

       <b>-e</b>
           Skips existing files in order to execute gfpcopy simultaneously.

       <b>-k</b>
           Does not copy symbolic links.

</pre><h4><b>COMMON</b> <b>OPTIONS</b></h4><pre>
       The following options are common options for <b>gfprep</b> and <b>gfpcopy</b>.

       <b>-X</b> <u>regexp</u>
           Skips files matched by the pattern of <u>regexp</u>. When multiple patterns need to be specified, specify -X
           options multiple times.

       <b>-S</b> <u>source-domainname</u>
           Creates file replicas or copies files only stored on the hosts in the specified domain name.

       <b>-h</b> <u>source-hostfile</u>
           Creates file replicas or copies files only stored on the hosts listed in the specified hostfile. The
           <u>source-hostfile</u> consists of a file system node name on each line.

           If ``-'' is specified, standard input is used to read the host list.

       <b>-L</b>
           Creates file replicas or copies files from the hosts specified by the -S or -h option.

       <b>-D</b> <u>destination-domainname</u>
           Specifies the domain name for destination.

           If neither this nor the <b>-H</b> option is specified, replicas may be copied to any available host.

       <b>-H</b> <u>destination-hostfile</u>
           Specifies a file which describes hostnames for destination. The <u>destination-hostfile</u> consists of a
           file system node name on each line.

           If ``-'' is specified, standard input is used to read the host list.

       <b>-j</b> <u>num-of-processes</u>
           Specifies the maximum number of processes to create file replicas (or copy files) simultaneously.

           The default value is the parameter of client_parallel_copy in gfarm2.conf. (see man gfarm2.conf)

           The maximum number of process per file system node for source or destination is the number of CPUs
           (see man <b>gfhost</b>).

       <b>-J</b> <u>num-of-processes</u>
           Specifies the number of processes to retrieve directory entries in parallel.

           The default value is 8.

       <b>-M</b> <u>total-byte</u>
           Specifies the total file size in bytes to replicate or copy. This option is useful to increase the
           available capacity by moving the specified bytes of files.

           The default value is unlimited.

       <b>-z</b> <u>minimum-byte</u>
           Specifies the minimum file size in bytes to replicate or copy. This option is useful not to replicate
           or copy small files.

           The default value is unlimited.

       <b>-Z</b> <u>maximum-byte</u>
           Specifies the maximum file size in bytes to replicate or copy. This option is useful not to replicate
           or copy large files.

           The default value is unlimited.

       <b>-w</b> <u>way-of-scheduling</u>
           Specifies a scheduling method. ``noplan'' replicates/copies while finding files. ``greedy'' schedules
           greedily the order of replication/copy beforehand.

           The default behavior is ``noplan''.

           ``greedy'' scheduling cannot use with the -N option and -m option.

       <b>-W</b> <u>kibibytes</u>
           Specifies a threshold size/cost(KiB) to flat costs of Connections. A Connection means a scheduling
           information to assign files per a child-process

           This option is effective with -w greedy.

           The default value is 50*1024 KiB (50 MiB).

       <b>-I</b> <u>sec-to-update</u>
           Specifies the interval in seconds to collect load average and available capacity.

           Default is 300 seconds.

       <b>-B</b>
           Gfarm 2.6.16 or later does not select high loaded file system nodes. This option disables this
           feature.

           High loaded node is defined by having more CPU load than schedule_busy_load_thresh * number of CPUs.
           For details of schedule_busy_load_thresh, refer to a manual page of gfarm2.conf.

       <b>-U</b>
           Disables checking the available disk space of the selected node every time.

       <b>-F</b> <u>num-of-dirents</u>
           Specifies the number of readahead entries to retrieve the directory entries.

           The default value is 10000.

       <b>-s</b> <u>kilobytes-per-second</u>
           Specifies a throughput(KB/s) to simulate the replication/copy, and does nothing (gets file
           information only).

       <b>-n</b>
           Does nothing.

       <b>-p</b>
           Reports the total performance information.

       <b>-P</b>
           Reports the performance information for each file and all files.

       <b>-q</b>
           Suppresses non-error messages.

       <b>-v</b>
           Displays verbose output.

       <b>-d</b>
           Displays debug output.

       <b>-?</b>
           Displays a list of command options.

</pre><h4><b>EXAMPLES</b></h4><pre>
       To copy files under the directory recursively.

           $ gfpcopy gfarm:///dir file:///tmp/dir

           $ gfpcopy file:///tmp/dir gfarm:///dir

           $ gfpcopy gfarm:///dir1 gfarm:///dir2

           $ gfpcopy gfarm:///dir hpss:///tmp/dir

           $ cd /mnt/gfarm2fs
           $ gfpcopy dir /tmp/dir

       To copy a file.

           $ gfpcopy gfarm:///dir/file file:///dir

           $ cd /mnt/gfarm2fs
           $ gfpcopy file /tmp/dir

</pre><h4><b>NOTES</b></h4><pre>
       To retrieve the directory entries efficiently, it is better to execute <b>gfpcopy</b> command near the metadata
       server. When you need to execute <b>gfpcopy</b> command far from the metadata server, increase the parallelism
       by the -j and -J options.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man1/gfprep.1.html">gfprep</a></b>(1), <b><a href="../man1/gfreg.1.html">gfreg</a></b>(1), <b><a href="../man1/gfexport.1.html">gfexport</a></b>(1), <b><a href="../man5/gfarm2.conf.5.html">gfarm2.conf</a></b>(5)

Gfarm                                              27 Aug 2015                                        <u><a href="../man1/GFPCOPY.1.html">GFPCOPY</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>