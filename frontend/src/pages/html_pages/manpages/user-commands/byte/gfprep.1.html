<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>gfprep - replicate Gfarm files in parallel</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/gfarm-client">gfarm-client_2.7.20+dfsg-1.1ubuntu1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       gfprep - replicate Gfarm files in parallel

</pre><h4><b>SYNOPSIS</b></h4><pre>

       <b>gfprep</b> [-nqvdpPBU] [-mx] [-X <u>regexp</u>] [-S <u>source-domainname</u>] [-h <u>source-hostfile</u>]
              [-D <u>destination-domainname</u>] [-H <u>destination-hostfile</u>] [-j <u>num-of-processes</u>] [-J <u>num-of-processes</u>]
              [-M <u>total-byte</u>] [-z <u>minimum-byte</u>] [-Z <u>maximum-byte</u>] [-w <u>way-of-scheduling</u>]
              [-W <u>kilobytes-for-threshold</u>] [-s <u>KB/s-to-simulate</u>] [-F <u>num-for-readahead</u>] [-I <u>sec-to-update</u>]
              [-N <u>num-of-replicas</u>] <u>path</u>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>gfprep</b> creates replicas of Gfarm files in parallel.

       When the <u>path</u> specifies a directory, files under the directory will be replicated recursively.

       <u>Path</u> can be specified by a Gfarm URL or a path on a mount point of gfarm2fs.

       A set of source/destination hosts can be specified by a domain name and/or a hostlist file. When both a
       domain name and a hostlist file are specified, a set of hosts is determined by both conditions. When a
       set of source hosts is specified, only files stored on the source hosts are replicated.

       Less busy file system nodes will be selected for source or destination. The maximum number of parallel
       replications/copies per host is the number of CPUs. Please see the manual page of <b>gfhost</b> for information
       about the number of CPUs.

       <b>gfprep</b> also retrieves the directory entries in parallel.

</pre><h4><b>GFPREP</b> <b>OPTIONS</b></h4><pre>
       These are options only for <b>gfprep</b>.

       <b>-N</b> <u>num-of-replicas</u>
           Specifies the required number of file replicas. If there are a sufficient number of replicas in the
           destination hosts, neither any copying nor any removal will be done.

           If this option is not specified, -N 1 is assumed.

       <b>-x</b>
           Removes extra file replicas when a set of destination nodes has more file replicas than specified by
           the -N option.

       <b>-m</b>
           Migrates file replicas from a set of source nodes to destination nodes. When specifying twice like
           -mm, it leaves the source file replica.

           This option requires at least one of -S, -h, -D, and -H options.

           This option and the -N option are mutually exclusive.

</pre><h4><b>COMMON</b> <b>OPTIONS</b></h4><pre>
       There are several common options with <b>gfprep</b>. (see man <b>gfpcopy</b>)

</pre><h4><b>EXAMPLES</b></h4><pre>
       To replicate files under the directory recursively.

           $ gfprep -N 3 gfarm:///dir

           $ cd /mnt/gfarm2fs
           $ gfprep -N 3 dir

       To replicate a file or remove surplus replicas of the file.

           $ gfprep -N 3 -x gfarm:///dir/file

       To migrate replicas from gfsd1.example.com to other nodes.

           $ gfprep -m -S gfsd1.example.com gfarm:///

</pre><h4><b>NOTES</b></h4><pre>
       When the -L or -m option is not specified, a source node is not always selected within a set of specified
       source file system nodes.

       It is better to execute <b>gfprep</b> command near the metadata server. When you need to execute <b>gfprep</b> command
       far from the metadata server, increase the parallelism by the -j and -J options.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man1/gfrep.1.html">gfrep</a></b>(1), <b><a href="../man1/gfpcopy.1.html">gfpcopy</a></b>(1), <b><a href="../man1/gfhost.1.html">gfhost</a></b>(1), <b><a href="../man5/gfarm2.conf.5.html">gfarm2.conf</a></b>(5)

Gfarm                                              14 Jan 2017                                         <u><a href="../man1/GFPREP.1.html">GFPREP</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>