<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>mmdebstrap-autopkgtest-build-qemu - autopkgtest-build-qemu without vmdb2 but mmdebstrap and EFI boot</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/mmdebstrap">mmdebstrap_1.5.6-4_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       mmdebstrap-autopkgtest-build-qemu - autopkgtest-build-qemu without vmdb2 but mmdebstrap and EFI boot

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>mmdebstrap-autopkgtest-build-qemu</b> [<u>OPTIONS</u>] <b>--boot</b>=<b>efi</b> <u>RELEASE</u> <u>IMAGE</u>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>mmdebstrap-autopkgtest-build-qemu</b> is a mostly compatible drop-in replacement for
       <b><a href="../man1/autopkgtest-build-qemu.1.html">autopkgtest-build-qemu</a></b>(1) with two main differences: Firstly, it uses <b><a href="../man1/mmdebstrap.1.html">mmdebstrap</a></b>(1) instead of <b><a href="../man1/vmdb2.1.html">vmdb2</a></b>(1)
       and thus is able to create QEMU disk images without requiring superuser privileges and with bit-by-bit
       reproducible output. Secondly, it uses <b><a href="../man7/systemd-boot.7.html">systemd-boot</a></b>(7) and thus only supports booting via EFI. For
       architectures for which <b><a href="../man1/autopkgtest-virt-qemu.1.html">autopkgtest-virt-qemu</a></b>(1) does not default to EFI booting you must pass <b>--boot=efi</b>
       when invoking the autopkgtest virt backend.

</pre><h4><b>POSITIONAL</b> <b>PARAMETERS</b></h4><pre>
       <u>RELEASE</u> The release to download from the <u>MIRROR</u>.  This parameter is required.

       <u>IMAGE</u>   The file to write, in raw format. This parameter is required.

</pre><h4><b>OPTIONS</b></h4><pre>
       <b>--mirror</b>=<u>MIRROR</u>
               Specify   which   distribution   to  install.   It defaults to <a href="http://deb.debian.org/debian">http://deb.debian.org/debian</a> (i.e.
               Debian), but you can pass a mirror of any Debian derivative.

       <b>--architecture</b>=<u>ARCHITECTURE</u>
               Set the architecture for the virtual machine image, specified  as  a  <b><a href="../man1/dpkg.1.html">dpkg</a></b>(1)  architecture.   If
               omitted, the host architecture is assumed.

               <b>--arch</b>=<u>ARCH</u> is an alias for this option.

       <b>--script</b>=<u>SCRIPT</u>
               Specifies  a  user  script that will be called with the root filesystem of the image as its first
               parameter. This script can them make any necesssary modifications to the root filesystem.

               The script must be a POSIX shell script, and should not depend on  bash-specific  features.  This
               script will be executed inside a <b><a href="../man1/chroot.1.html">chroot</a></b>(1) call in the virtual machine root filesystem.

       <b>--size</b>=<u>SIZE</u>
               Specifies the image size for the virtual machine, defaulting to 25G.

       <b>--apt-proxy</b>=<u>PROXY</u>
               Specify   an   apt  proxy  to  use  in the virtual machine.  By default, if you have an apt proxy
               configured on the host, the virtual machine will automatically use this, otherwise  there  is  no
               default.

       <b>--boot</b>=<b>efi</b>, <b>--efi</b>
               Select  the  way  the  generated  image  will  expect  to be booted. Unless you explicitly select
               --boot=efi, operation will fail.

       <b>--keyring</b>=<u>KEYRING</u>
               Passes an additional <b>--keyring</b> parameter to <b>mmdebstrap</b>.

</pre><h4><b>EXAMPLES</b></h4><pre>
       Make sure, that <u>/path/to/debian-unstable.img</u> is a path that the unshared user has access to. This can  be
       done  by  ensuring  world-execute permissions on all path components or by creating the image in a world-
       readable directory like <a href="file:/tmp">/tmp</a> before copying it into its final location.

           $ mmdebstrap-autopkgtest-build-qemu --boot=efi --arch=amd64 unstable /path/to/debian-unstable.img
           [...]
           $ autopkgtest mypackage -- qemu --boot=efi --dpkg-architecture=amd64 /path/to/debian-unstable.img

       Make sure to add <b>--boot=efi</b> to both the <b>mmdebstrap-autopkgtest-build-qemu</b> as  well  as  the  <b>autopkgtest-</b>
       <b>virt-qemu</b> invocation.

       Create bit-by-bit reproducible images from a given snapshot.d.o timestamp.

           SOURCE_DATE_EPOCH=1612543740 mmdebstrap-autopkgtest-build-qemu --boot=efi \
               --mirror=<a href="http://snapshot.debian.org/archive/debian/20210205T164900Z/">http://snapshot.debian.org/archive/debian/20210205T164900Z/</a> \
               unstable /path/to/debian-unstable.img

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man1/autopkgtest-build-qemu.1.html">autopkgtest-build-qemu</a></b>(1), <b><a href="../man1/autopkgtest-virt-qemu.1.html">autopkgtest-virt-qemu</a></b>(1), <b><a href="../man1/mmdebstrap.1.html">mmdebstrap</a></b>(1), <b><a href="../man1/autopkgtest.1.html">autopkgtest</a></b>(1)

perl v5.40.1                                       2025-03-09               <u><a href="../man1/MMDEBSTRAP-AUTOPKGTEST-BUILD-QEMU.1.html">MMDEBSTRAP-AUTOPKGTEST-BUILD-QEMU</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>