<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ssh-cron - cron-like daemon able to use ssh-connections</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/ssh-cron">ssh-cron_1.05.00-1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       ssh-cron - cron-like daemon able to use ssh-connections

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>ssh-cron</b> [OPTIONS] <u>[crontab-file]</u>
       [OPTIONS] - cf. section <b>OPTIONS</b>
       [crontab-file] - file containing jobs to run.

</pre><h4><b>DESCRIPTION</b></h4><pre>
       Consider  the  situation  where  a  computer  every now and then must access a remote computer to do some
       useful things at that remote computer (like running a <b><a href="../man1/stealth.1.html">stealth</a></b>(1) file integrity scan). In order to do  so
       the  computer  must  be allowed to make <b><a href="../man1/ssh.1.html">ssh</a></b>(1) connections to the remote computer. But since the commands
       are not executed by the user but by <b><a href="../man1/cron.1.html">cron</a></b>(1), the  ssh-keys  which  are  required  to  access  the  remote
       computer cannot use passphrases.

       This  is  an  undesirable  situation: if the computer running the <u>ssh</u> commands gets compromised, then the
       remote computers are compromised as well, since the attacker may access these remote  systems  using  ssh
       keys not requiring pass phrases.

       <b>Ssh-Cron</b>  offers a way out of this undesirable situation, while still allowing commands to be executed on
       remote computers. Here’s how this is realized:

       o      Normally, <b>ssh-cron</b> runs as a daemon program. When <b>ssh-cron</b> starts it  first  reads  and  parses  a
              crontab-like specification file. Following this, <b>ssh-cron</b> spawns a child process, and terminates.

       o      <b>Ssh-Cron</b>’s  daemon  process  itself  spawns an <b><a href="../man1/ssh-agent.1.html">ssh-agent</a></b>(1) child process, executing all scheduled
              commands.

       o      In addition, <b>ssh-cron</b>’s daemon defines communication channels between itself and its  <b><a href="../man1/ssh-agent.1.html">ssh-agent</a></b>(1)
              child process;

       o      <b>Ssh-Cron</b>’s  daemon  sends  the  command  <b><a href="../man1/ssh-add.1.html">ssh-add</a></b>(1)  to  its child process as its first command to
              execute, and using  normal  user-interaction  means  (e.g.,  using  <b><a href="../man1/ssh-askpass.1.html">ssh-askpass</a></b>(1))  <u>ssh-agent</u>  is
              provided with the required passphrase(s) for the ssh key(s).

       o      <b>Ssh-Cron</b>’s  daemon  now monitors the time, firing off scheduled commands at their required moments
              in time. If these commands require access to remote computers, then this  access  is  granted,  as
              <u>ssh-agent</u> is able to provide the passphrase(s).

       o      If  an  <b>ssh-cron</b>  daemon  process is already running, then the <u>--reload</u> option (see below), can be
              used to load the <b>ssh-cron</b> daemon with the commands and environment variable settings from  another
              <u>crontab-file</u>,  replacing  the  currently  stored  commands  and  environment  settings by the ones
              provided in the reloaded file.

       When shell control characters (like redirection symbols) must be used  in  command  specifications,  they
       should be escaped. E.g., as in <u>echo</u> <u>hello</u> <u>world</u> <u>\&gt;</u> <u>/dev/null</u>.

       Users  sharing  a  computer  each  define their own <b>ssh-cron</b> specification file. When a user logs out and
       leaves the system the daemon process  continues  to  run,  executing  its  scheduled  commands  at  their
       scheduled times, using ssh-keys whenever required.

       If  the  accounts  for  which <b>ssh-cron</b> jobs are running are ever compromised, the remote computers remain
       safe, as the passphrases of the available ssh-keys remain unavailable.

       To prevent unauthorized modifications of the commands scheduled  by  the  <b>ssh-cron</b>  daemon  themselves  a
       passphrase  is  required  when starting <b>ssh-cron</b>’s daemon process. The passphrase itself is not stored by
       the daemon (instead, it stores a <b><a href="../man1/sha256.1.html">sha256</a></b>(1) hash value), which avoids  access  to  the  <b>ssh-cron</b>  daemon’s
       passphrase by browsing the computer’s memory. The passphrase must be at least 10 characters long and must
       be  provided  when  reloading <b>ssh-cron</b> daemon’s scheduled commands. The scheduled commands may be listed,
       however. This is allowed without providing a passphrase since the file containing the scheduled  commands
       will  usually  also be available on the computer. Likewise, since a user may always terminate his/her own
       programs an <b>ssh-cron</b> daemon process can be terminated from another <b>ssh-cron</b> program using the <u>--terminate</u>
       command line option.

       The above mentioned facilities are not supported by <b><a href="../man1/crontab.1.html">crontab</a></b>(1) itself.  <b><a href="../man1/Cron.1.html">Cron</a></b>(1), which is responsible for
       executing scheduled crontab commands, has no access to the passphrases of ssh-keys (which  are  otherwise
       provided <u>ssh-agent</u>).

</pre><h4><b>RETURN</b> <b>VALUE</b></h4><pre>
       <b>Ssh-Cron</b> returns 0 if the daemon was successfully started. Otherwise 1 is returned.

</pre><h4><b>OPTIONS</b></h4><pre>
       Where  available,  single  letter  options  are  listed  between  parentheses  following their associated
       long-option variants. Single letter options require arguments  if  their  associated  long  options  also
       require arguments.

       Several  options  have  default  values.  Run  <u>ssh-cron</u> <u>--help</u> for an overview of the implemented default
       option values. Also, several options can be specified in a configuration file (where  this  doesn’t  hold
       true, it is explicitly mentioned at the relevant options).

       The  configuration  file  (not  to  be confused with the file containing the scheduled commands, which is
       provided as <b>ssh-cron</b> command-line file argument)  ignores  empty  lines  and  all  information  on  lines
       starting at a hash-mark (<u>#</u>, optionally preceded by blanks and/or tabs). The configuration file is used to
       specify  <b>ssh-cron</b>’s  options  using  their  long variants. However, in the configuration file the initial
       hyphens of command-line options must be omitted, and optionally a colon may be  appended  to  these  long
       options names. Note that multi-word option arguments should not be surrounded by quotes. Examples:

           stdout
           syslog-facility: LOCAL0
           mailer: /usr/bin/mail -s "some subject" <a href="mailto:me@myhost.warpnet.nl">me@myhost.warpnet.nl</a>

       Command-line options always override configuration file options.

       o      <b>--agent</b>=<u>agent</u>
              absolute path to the agent program (plus its argument(s)) providing the ssh-keys.

              By default <u><a href="file:///usr/lib/w3m/cgi-bin/w3mman2html.cgi?ssh-agent">/usr/bin/ssh-agent</a></u> <u><a href="file:/bin/bash">/bin/bash</a></u> is used.

       o      <b>--config</b>=<u>path</u> (<b>-c</b>)
              config file containing long option specifications.

              By default <u><a href="file:~/.ssh-cron">~/.ssh-cron</a></u> is used.

              This option cannot be specified in the configuration file.

       o      <b>--forced</b> (<b>-f</b>)
              When  restarting  <b>ssh-cron</b>  and  an  existing  (leftover)  ipc-file  file exists, then the user is
              interactively given the opportunity to remove the existing ipc-file during daemon-startup.

       o      <b>--help</b> (<b>-h</b>)
              basic usage information is written to the standard output stream (only interpreted in  combination
              with <u>--no-daemon</u>).

              This option cannot be specified in the configuration file.

       o      <b>--ipc-file</b>=<u>path</u> (<b>-p</b>)
              when  <b>ssh-cron</b>  runs  as  a  daemon, then <u>path</u> specifies the path of the file holding the daemon’s
              shared memory ID and process ID. The ipc file must be available if <b>ssh-cron</b> is  connecting  to  or
              starting  a  daemon  process  (the  former situation occurs with the options <u>--list,</u> <u>--reload</u>, and
              <u>--terminate</u>). If <b>ssh-cron</b> detects an existing <u>ipc-file</u> at daemon startup and the  option  <u>--forced</u>
              was  not  specified,  then  the user is interactively given the opportunity to remove the existing
              file. If the existing ipc-file can or should not be removed, then the daemon is  not  started.  To
              end  a daemon process use <u>ssh-cron</u> <u>--terminate</u>, or send a SIGINT (<u>ctrl-C</u>) or SIGTERM signal to the
              process-id found as the second value in the <u>ipc-file</u>.

              By default <u><a href="file:~/.ssh-cron.ipc">~/.ssh-cron.ipc</a></u> is used.

       o      <b>--list</b> (<b>-l</b>)
              list the currently defined environment settings and cron-commands (the <u>crontab-file</u> argument  must
              be omitted). This option is incompatible with (--no-daemon, --reload,) and <u>--terminate</u>.

              This option cannot be specified in the configuration file.

       o      <b>--log</b>=<u>path</u> (<b>-L</b>)
              log messages are appended to <u>path</u>. If <u>path</u> does not exist, it is created first.

       o      <b>--mailer</b>=<u>command</u> (<b>-m</b>)
              information  written  to the standard output or standard error streams of the commands executed by
              <b>ssh-cron</b> is sent by e-mail to the current user. Use <u>--mailer</u> to redefine (or to  suppress  sending
              e-mail by specifying an empty mailer command (i.e., <u>--mailer</u> <u>""</u>)).

              By  default  <u>/usr/bin/mail</u>  <u>-s</u>  <u>\"Ssh-cron</u>  <u>$*\"</u>  <u>$USER@localhost</u> is used, with <u>$*</u> replaced by the
              exected command as specified in the <u>crontab</u> file argument.

       o      <b>--no-daemon</b>
              <b>ssh-cron</b> is not run as a daemon. To properly end <b>ssh-cron</b> if not running as a  daemon,  press  the
              `Enter’  key,  enter  <u>ctrl-C</u> or send <b>ssh-cron</b> a <u>SIGTERM</u> signal. This option is incompatible with (
              --list, --reload,) and <u>--terminate</u>.

              This option cannot be specified in the configuration file.

       o      <b>--reload</b> (<b>-r</b>)
              reload the <b>ssh-cron</b> daemon with de cron-commands defined in the <u>crontab-file</u> argument (which  must
              be provided). This option is incompatible with (--list, --no-daemon,) and <u>--terminate</u>.

              This option cannot be specified in the configuration file.

       o      <b>--stdout</b> (<b>-s</b>)
              in addition to using a log file and syslog messages send all messages to the standard output. This
              option is not available if <b>ssh-cron</b> runs as a daemon process.

              This option cannot be specified in the configuration file.

       o      <b>--syslog</b>
              messages  are sent to the syslog daemon when this option is specified.  By default syslog messages
              are written to the <u>DAEMON</u> facility with priority <u>NOTICE</u>.

       o      <b>--syslog-facility</b>=<u>facility</u>
              the facility that is used to write the syslog messages to. By  default  this  is  <u>DAEMON</u>.  For  an
              overview  of  facilities  and  their  meanings, see, e.g., <b><a href="../man3/syslog.3.html">syslog</a></b>(3). With <b>ssh-cron</b> the facilities
              <u>DAEMON,</u> <u>LOCAL0,</u> <u>LOCAL1,</u> <u>LOCAL2,</u> <u>LOCAL3,</u> <u>LOCAL4,</u> <u>LOCAL5,</u> <u>LOCAL6,</u> <u>LOCAL7</u>, and <u>USER</u> can be used.

              By default facility <u>DAEMON</u> is used.

       o      <b>--syslog-priority</b>=<u>priority</u>
              the priority that is used to write the syslog messages to. By  default  this  is  <u>NOTICE</u>.  For  an
              overview  of  priorities  and  their  meanings,  see,  e.g.,  <b><a href="../man3/syslog.3.html">syslog</a></b>(3). With <b>ssh-cron</b> all defined
              priorities can be used. E.g.,  <u>EMERG,</u> <u>ALERT,</u> <u>CRIT,</u> <u>ERR,</u> <u>WARNING,</u> <u>NOTICE,</u> <u>INFO</u> and <u>DEBUG</u>.

              By default priority <u>NOTICE</u> is used.

       o      <b>--syslog-tag</b>=<u>tag</u>
              syslog messages can be provided with a <u>tag</u>, which can be used to filter them from  the  log-files.
              See also section <u>RSYSLOG</u> <u>FILTERING</u> below.

              By default the tag <u>SSH-CRON</u> is used.

       o      <b>--terminate</b> (<b>-t</b>)
              terminate a running <b>ssh-cron</b> daemon program, using the daemon’s process ID found in the ipc-file’s
              second  value.  The  <u>crontab-file</u>  argument  must  be omitted. This option is incompatible tt with
              (--list, --nodaemon,) and <u>--reload</u> .  This option cannot be specified in the configuration file.

       o      <b>--verbose</b>
              additional messages about <b>ssh-cron</b>’s mode of operation  are  sent  to  <b>ssh-cron</b>’s  log  facilities
              (specified by <u>--log,</u> <u>--syslog,</u> and/or <u>--stdout</u>).

       o      <b>--version</b> (<b>-v</b>)
              <b>ssh-cron</b>’s version number is written to the standard output stream.

              This option cannot be specified in the configuration file.

</pre><h4><b>RSYSLOG</b> <b>FILTERING</b></h4><pre>
       When  using  <b><a href="../man1/rsyslogd.1.html">rsyslogd</a></b>(1) property based filters may be used to filter syslog messages and write them to a
       file of your choice. E.g., to filter messages starting with the syslog message tag (e.g., <u>SSH-CRON</u>) use

       :syslogtag, isequal, "SSH-CRON:"   /var/log/ssh-cron.log
       :syslogtag, isequal, "SSH-CRON:"   stop

       Note that the colon is part of the tag, but is not specified with the <u>syslog-tag</u> option.

       This causes all messages having the <u>SSH-CRON:</u> tag to be written on <u>/var/log/ssh-cron.log</u> after which they
       are     discarded.     More     extensive     filtering     is     also     supported,     see,     e.g.,
       <u><a href="http://www.rsyslog.com/doc/rsyslog_conf_filter.html">http://www.rsyslog.com/doc/rsyslog_conf_filter.html</a></u> and <u><a href="http://www.rsyslog.com/doc/property_replacer.html">http://www.rsyslog.com/doc/property_replacer.html</a></u>

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man1/cron.1.html">cron</a></b>(1),  <b><a href="../man1/crontab.1.html">crontab</a></b>(1),  <b><a href="../man5/crontab.5.html">crontab</a></b>(5),  ,  <b><a href="../man1/rsyslogd.1.html">rsyslogd</a></b>(1),  <b><a href="../man1/ssh.1.html">ssh</a></b>(1),  <b><a href="../man1/ssh-add.1.html">ssh-add</a></b>(1),  <b><a href="../man1/ssh-agent.1.html">ssh-agent</a></b>(1),  <b><a href="../man1/ssh-askpass.1.html">ssh-askpass</a></b>(1),
       <b><a href="../man1/stealth.1.html">stealth</a></b>(1), <b><a href="../man3/syslog.3.html">syslog</a></b>(3)

</pre><h4><b>BUGS</b></h4><pre>
       None reported.

</pre><h4><b>COPYRIGHT</b></h4><pre>
       This is free software, distributed under the terms of the `GNU General Public License’. Copyright remains
       with the author. <b>ssh-cron</b> is available at <u>https://fbb-git.gitlab.io/ssh-cron/</u>.

</pre><h4><b>ORGANIZATION</b></h4><pre>
       Center for Information Technology, University of Groningen.

</pre><h4><b>AUTHOR</b></h4><pre>
       Frank B. Brokken (<b><a href="mailto:f.b.brokken@rug.nl">f.b.brokken@rug.nl</a></b>).

ssh-cron_1.05.00                                    2014-2025                                        <u><a href="../man1/ssh-cron.1.html">ssh-cron</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>