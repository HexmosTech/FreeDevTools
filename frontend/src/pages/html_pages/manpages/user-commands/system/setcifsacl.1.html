<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>setcifsacl  -  Userspace  helper  to  alter  components of a security descriptor for Common Internet File</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/cifs-utils">cifs-utils_7.2-2ubuntu0.1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       setcifsacl  -  Userspace  helper  to  alter  components of a security descriptor for Common Internet File
       System (CIFS)

</pre><h4><b>SYNOPSIS</b></h4><pre>
          setcifsacl [-v|-U|-a|-A|-D|-M|-S|-o|-g] "{one or more ACEs or a SID}" {file system object}

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This tool is part of the cifs-utils suite.

       <b>setcifsacl</b> is a userspace helper program for the Linux CIFS client file system. It is intended  to  alter
       an  ACL  or  set  owner/group  SID  of a security descriptor for a file system object. Whether a security
       descriptor to be set is applied or not is determined by the CIFS/SMB server.

       This  program  uses  a  plugin  to  handle   the   mapping   of   user   and   group   names   to   SIDs.
       <u>/etc/cifs-utils/idmap-plugin</u> should be a symlink that points to the correct plugin to use.

</pre><h4><b>OPTIONS</b></h4><pre>
       <b>-h</b>     Print usage message and exit.

       <b>-v</b>     Print version number and exit.

       <b>-U</b>     Apply  ACE  editing actions (-a, -D, -M, -S) to SACL (aUdit ACL). The actions are appliend to DACL
              if -U is not specified.

       <b>-a</b>     Add one or more ACEs to an ACL of a security descriptor.  An ACE is added even  if  the  same  ACE
              exists in the ACL.

       <b>-A</b>     Add one or more ACEs to the ACL of a security descriptor, while maintaining the preferred order of
              the ACEs.  The preferred order of ACEs are described in the following documentation:
               &lt;https://docs.microsoft.com/en-us/windows/win32/secauthz/order-of-aces-in-a-dacl&gt;

       <b>-D</b>     Delete  one  or  more  ACEs  from  an ACL of a security descriptor.  Entire ACE has to match in an
              existing ACL for the listed ACEs to be deleted.

       <b>-M</b>     Modify one or more ACEs from an ACL of a security descriptor.  SID and type are used to match  for
              existing ACEs to be modified with the list of ACEs specified.

       <b>-S</b>     Set an ACL of security descriptor with the list of ACEs Existing ACL is replaced entirely with the
              specified ACEs.

       <b>-o</b>     Set owner SID to one specified as a command line argument.

       <b>-g</b>     Set group SID to one specified as a command line argument.

              The  owner/group  SID  can be specified as a name or a raw SID value.  Every ACE entry starts with
              "ACL:" One or more ACEs are specified within double quotes.  Multiple  ACEs  are  separated  by  a
              comma.

              Following fields of a DACL ACE can be modified with possible values:

              • <b>SID</b> - Either a name or a raw SID value.

              • <b>type</b> - ALLOWED (0x0), DENIED (0x1), OBJECT_ALLOWED (0x5), OBJECT_DENIED (0x6)

              • <b>flags</b>    -    OBJECT_INHERIT_FLAG   (OI   or   0x1),   CONTAINER_INHERIT_FLAG   (CI   or   0x2),
                NO_PROPAGATE_INHERIT_FLAG (NI or 0x4), INHERIT_ONLY_FLAG (IO or 0x8), INHERITED_ACE_FLAG (IA  or
                0x10) or a combination/OR of these values.

              • <b>mask</b>  - Either one of FULL, CHANGE, READ, a combination of R W X D P O, or a hex value.

              Following fields of a SACL ACE can be modified with possible values:

              • <b>SID</b> - Either a name or a raw SID value.

              • <b>type</b>  -  AUDIT  (0x2),  AUDIT_OBJECT  (0x7),  AUDIT_CALLBACK (0xD), AUDIT_CALLBACK_OBJECT (0xF),
                MANDATORY_LABEL (0x11), RESOURCE_ATTRIBUTE (0x12), SCOPED_POLICY_ID (0x13)

              • <b>flags</b> - SUCCESSFULL_ACCESS (SA or 0x40), FAILED_ACCESS (FA or 0x80)

              • <b>mask</b>  - Either one of FULL, CHANGE, READ, a combination of R W X D P O, or a hex value.

</pre><h4><b>EXAMPLES</b></h4><pre>
   <b>Add</b> <b>an</b> <b>ACE</b>
          setcifsacl -a "ACL:CIFSTESTDOM\user2:DENIED/0x1/D" &lt;file_name&gt;

          setcifsacl -a "ACL:CIFSTESTDOM\user1:ALLOWED/OI|CI|NI/D" &lt;file_name&gt;

          setcifsacl -U -a "ACL:CIFSTESTDOM\user1:AUDIT/SA/D" &lt;file_name&gt;

   <b>Add</b> <b>an</b> <b>ACE</b> <b>and</b> <b>reorder</b> <b>ACL</b>
          setcifsacl     -A      "ACL:CIFSTESTDOMuser3:ALLOWED/OI/FULL"      &lt;file_name&gt;      setcifsacl      -A
          "ACL:CIFSTESTDOMuser2:DENIED/0x1/D"               &lt;file_name&gt;               setcifsacl              -A
          "ACL:CIFSTESTDOMuser1:ALLOWED/OI|CI|NI/D" &lt;file_name&gt;

          After setting above mentioned ACEs, below is output of  getcifsacl:  ACL:CIFSTESTDOMuser2:DENIED/0x1/D
          ACL:CIFSTESTDOMuser3:ALLOWED/OI/FULL ACL:CIFSTESTDOMuser1:ALLOWED/OI|CI|NI/D

   <b>Delete</b> <b>an</b> <b>ACE</b>
          setcifsacl -D "ACL:S-1-1-0:0x1/OI/0x1201ff" &lt;file_name&gt;

          setcifsacl -U -D "ACL:S-1-1-0:0x2/FA/0xf01ff" &lt;file_name&gt;

   <b>Modify</b> <b>an</b> <b>ACE</b>
          setcifsacl -M "ACL:CIFSTESTDOM\user1:ALLOWED/0x1f/CHANGE" &lt;file_name&gt;

          setcifsacl -U -M "ACL:CIFSTESTDOM\user1:AUDIT_OBJECT/SA/CHANGE" &lt;file_name&gt;

   <b>Set</b> <b>an</b> <b>ACL</b>
          setcifsacl      -S     "ACL:CIFSTESTDOM\Administrator:0x0/0x0/FULL,ACL:CIFSTESTDOM\user2:0x0/0x0/FULL"
          &lt;file_name&gt;

          setcifsacl  -U  -S   "ACL:CIFSTESTDOM\Administrator:AUDIT/SA/FULL,ACL:CIFSTESTDOM\user2:0x7/0x80/FULL"
          &lt;file_name&gt;

   <b>Set</b> <b>owner</b> <b>SID</b>
          setcifsacl -o "S-1-5-21-3338130290-3403600371-1423429424-2102" &lt;file_name&gt;

   <b>Set</b> <b>group</b> <b>SID</b>
          setcifsacl -g " &lt;Administrators@BUILTIN&gt; " &lt;file_name&gt;

</pre><h4><b>NOTES</b></h4><pre>
       Kernel support for getcifsacl/setcifsacl utilities was initially introduced in the 2.6.37 kernel.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <a href="../man8/mount.cifs.8.html">mount.cifs</a>(8), <a href="../man1/getcifsacl.1.html">getcifsacl</a>(1)

</pre><h4><b>AUTHOR</b></h4><pre>
       Shirish Pargaonkar wrote the setcifsacl program.

       The Linux CIFS Mailing list is the preferred place to ask questions regarding these programs.

                                                                                                   <u><a href="../man1/SETCIFSACL.1.html">SETCIFSACL</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>