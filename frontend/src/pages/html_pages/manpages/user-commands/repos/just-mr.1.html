<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>just-mr - multi-repository configuration tool and launcher for the build tool</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/justbuild">justbuild_1.4.1-1ubuntu1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       just-mr - multi-repository configuration tool and launcher for the build tool

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>just-mr</b> [<u>OPTION</u>]...  <b>mrversion</b>
       <b>just-mr</b> [<u>OPTION</u>]...  {<b>setup</b>|<b>setup-env</b>} [<b>--all</b>] [<u>main-repo</u>]
       <b>just-mr</b> [<u>OPTION</u>]...  <b>fetch</b> [<b>--all</b>] [<b>--backup-to-remote</b>] [<b>-o</b> <u>fetch-dir</u>] [<u>main-repo</u>]
       <b>just-mr</b> [<u>OPTION</u>]...  <b>update</b> [<u>repo</u>]...
       <b>just-mr</b> [<u>OPTION</u>]...  <b>do</b> [<u>JUST_ARG</u>]...
       <b>just-mr</b>      [<u>OPTION</u>]...       {<b>version</b>|<b>describe</b>|<b>analyse</b>|<b>build</b>|<b>install</b>|<b>install-cas</b>|<b>add-to-cas</b>|<b>rebuild</b>|<b>gc</b>}
       [<u>JUST_ARG</u>]...

</pre><h4><b>DESCRIPTION</b></h4><pre>
       Just-MR is a configuration tool for the  multi-repository  Just  build  system.   It  can  be  used  both
       standalone and as a launcher for <b><a href="../man1/justbuild.1.html">justbuild</a></b>(1).

       The  tool  performs  specific operations, based on the invoked subcommand, on repositories described in a
       configuration file.  All subcommands operate at the level of  <u>workspace</u>  <u>roots</u>  deduced  from  the  given
       repository descriptions.  See <b><a href="../man5/just-mr-repository-config.5.html">just-mr-repository-config</a></b>(5) for more details on the input format.

</pre><h4><b>OPTIONS</b></h4><pre>
   <b>General</b> <b>options</b>
       <b>-h</b>, <b>--help</b>
       Output a usage message and exit.

       <b>-C</b>, <b>--repository-config</b> <u>PATH</u>
       Path  to the multi-repository configuration file.  See <b><a href="../man5/just-mr-repository-config.5.html">just-mr-repository-config</a></b>(5) for more details.  If
       no configuration file is specified, <b>just-mr</b> will look for one in the following order:

       • <u>$WORKSPACE_ROOT/repos.json</u> (workspace of the <b>just-mr</b> invocation)

       • <u>$WORKSPACE_ROOT/etc/repos.json</u> (workspace of the <b>just-mr</b> invocation)

       • <u>$HOME/.just-repos.json</u>

       • <u>/etc/just-repos.json</u>

       The default configuration lookup order can be adjusted in the just-mrrc file.  See <b><a href="../man5/just-mrrc.5.html">just-mrrc</a></b>(5) for  more
       details.

       <b>--absent</b> <u>PATH</u>
       Path  to  a  file specifying which repositories are to be considered absent, overriding the values set by
       the <u>"pragma"</u> entries in the multi-repository configuration.  The file has to  contain  a  JSON  array  of
       those repository names to be considered absent.

       <b>-D</b>, <b>--defines</b> <u>JSON</u>
       Defines, via an in-line JSON object, an overlay configuration for <b><a href="../man1/justbuild.1.html">justbuild</a></b>(1); if used as a launcher for
       a subcommand known to support <b>--defines</b>, this defines value is forwarded, otherwise it is ignored.  If <b>-D</b>
       is given several times, the <b>-D</b> options overlay (in the sense of <u>map_union</u>) in the order they are given on
       the command line.

       <b>--local-build-root</b> <u>PATH</u>
       Root for local CAS, cache, and build directories.  The path will be created if it does not exist already.
       This option overwrites any values set in the <b><a href="../man5/just-mrrc.5.html">just-mrrc</a></b>(5) file.
       Default: path <u>".cache/just"</u> in user’s home directory.

       <b>--checkout-locations</b> <u>PATH</u>
       Specification  file for checkout locations and additional mirrors.  This file contains a JSON object with
       several known keys:

       • the key <u>"&lt;version</u> <u>control&gt;"</u> of key <u>"checkouts"</u> specifies pairs of repository URLs as keys and  absolute
         paths  as  values.   Currently supported version control is Git, therefore the respective key is <u>"git"</u>.
         The paths contained for each repository URL point to existing locations on  the  filesystem  containing
         the checkout of the respective repository.
       • the  key  <u>"local</u>  <u>mirrors"</u>,  if  given,  is  a  JSON  object  mapping  primary  URLs to a list of local
         (non-public) mirrors.  These mirrors are always tried first (in the given order) before any  other  URL
         is contacted.

       • the  key  <u>"preferred</u>  <u>hostnames"</u>,  if  given,  is  a  list of strings specifying known hostnames.  When
         fetching from a non-local mirror, URLs with hostnames in the given list are  preferred  (in  the  order
         given) over URLs with other hostnames.

       This options overwrites any values set in the <b><a href="../man5/just-mrrc.5.html">just-mrrc</a></b>(5) file.
       Default: file path <u>".just-local.json"</u> in user’s home directory.

       <b>-L</b>, <b>--local-launcher</b> <u>JSON_ARRAY</u>
       JSON  array  with the list of strings representing the launcher to prepend actions’ commands before being
       executed locally.
       Default: <u>["env",</u> <u>"--"]</u>.

       <b>--distdir</b> <u>PATH</u>
       Directory to look for distfiles before fetching.  If given, this will be the first  place  distfiles  are
       looked  for.   This option can be given multiple times to specify a list of distribution directories that
       are used for lookup in the order they appear on the command line.  Directories specified via this  option
       will be appended to the ones set in the <b><a href="../man5/just-mrrc.5.html">just-mrrc</a></b>(5) file.
       Default: the single file path <u>".distfiles"</u> in user’s home directory.

       <b>--main</b> <u>NAME</u>
       The repository to take the target from.

       <b>-f</b>, <b>--log-file</b> <u>PATH</u>
       Path  to local log file.  <b>just-mr</b> will store the information printed on stderr in the log file along with
       the thread id and timestamp when the output has been generated.

       <b>--log-limit</b> <u>NUM</u>
       Log limit (higher is more verbose) in interval [0,6] (Default: 3).

       <b>--restrict-stderr-log-limit</b> <u>NUM</u>
       Restrict logging on console to the minimum of the specified <b>--log-limit</b> and the value specified  in  this
       option.  The default is to not additionally restrict the log level at the console.

       <b>--plain-log</b>
       Do not use ANSI escape sequences to highlight messages.

       <b>--log-append</b>
       Append messages to log file instead of overwriting existing.

       <b>--no-fetch-ssl-verify</b>
       Disable  the  default  peer SSL certificate verification step when fetching archives (for which we verify
       the hash anyway) from remote.

       <b>--fetch-cacert</b> <u>PATH</u>
       Path to the CA certificate bundle containing one or more certificates to be used to peer  verify  archive
       fetches from remote.

       <b>-r</b>, <b>--remote-execution-address</b> <u>NAME</u>:<u>PORT</u>
       Address  of  a  remote  execution  service.  This is used as an intermediary fetch location for archives,
       between local CAS (or distdirs) and the network.

       <b>-R</b>, <b>--remote-serve-address</b> <u>NAME</u>:<u>PORT</u>
       Address of a <b>justbuild</b> <b>serve</b> service.  This is used as  intermediary  fetch  location  for  Git  commits,
       between local CAS and the network.

       <b>--max-attempts</b> <u>NUM</u>
       If  a  remote procedure call (rpc) returns grpc::StatusCode::UNAVAILABLE, that rpc is retried at most <u>NUM</u>
       times.  (Default: 1, i.e., no retry).

       <b>--initial-backoff-seconds</b> <u>NUM</u>
       Before retrying the second time, the client will wait the given amount  of  seconds  plus  a  jitter,  to
       better distribute the workload.  (Default: 1).

       <b>--max-backoff-seconds</b> <u>NUM</u>
       From  the  third attempt (included) on, the backoff time is doubled at each attempt, until it exceeds the
       max-backoff-seconds parameter.  From that point, the waiting time is computed as max-backoff-seconds plus
       a jitter.  (Default: 60)

       <b>--fetch-absent</b>
       Try to make available all repositories, including those marked as absent.   This  option  cannot  be  set
       together with <b>--compatible</b>.

       <b>--compatible</b>
       At increased computational effort, be compatible with the original remote build execution protocol.  If a
       remote  execution service address is provided, this option can be used to match the artifacts expected by
       the remote endpoint.

       <b>--just</b> <u>PATH</u>
       Name of the justbuild binary in <u>PATH</u> or path to the justbuild binary.
       Default: <u>"/usr/bin/justbuild"</u>.

       <b>--rc</b> <u>PATH</u>
       Path to the just-mrrc file to use.  See <b><a href="../man5/just-mrrc.5.html">just-mrrc</a></b>(5) for more details.
       Default: file path <u>".just-mrrc"</u> in the user’s home directory.

       <b>--dump-rc</b> <u>PATH</u>
       Dump the effective rc, i.e., the rc after overlaying all applicable auxiliary files specified in the  "rc
       files"  field,  to  the specified file.  In this way, an rc can be made self-contained in preparation for
       committing it to a repository.

       <b>--git</b> <u>PATH</u>
       Path to the git binary in <u>PATH</u> or path to the git binary.  Used in the rare instances when  shelling  out
       to git is needed.
       Default: <u>"git"</u>.

       <b>--norc</b>
       Option to prevent reading any <b><a href="../man5/just-mrrc.5.html">just-mrrc</a></b>(5) file.

   <b>Authentication</b> <b>options</b>
       Only TLS and mutual TLS (mTLS) are supported.  They mirror the <b><a href="../man1/justbuild.1.html">justbuild</a></b>(1) options.

       <b>--tls-ca-cert</b> <u>PATH</u>
       Path to a TLS CA certificate that is trusted to sign the server certificate.

       <b>--tls-client-cert</b> <u>PATH</u>
       Path  to a TLS client certificate to enable mTLS.  It must be passed in conjunction with <b>--tls-client-key</b>
       and <b>--tls-ca-cert</b>.

       <b>--tls-client-key</b> <u>PATH</u>
       Path to a TLS client key to enable mTLS.  It must be passed in  conjunction  with  <b>--tls-client-cert</b>  and
       <b>--tls-ca-cert</b>.

</pre><h4><b>SUBCOMMANDS</b></h4><pre>
   <b>mrversion</b>
       Print  on stdout a JSON object providing version information for this tool itself; the <b>version</b> subcommand
       calls the <b>version</b> subcommand of justbuild.  The version information for just-mr is  in  the  same  format
       that also <b>justbuild</b> uses.

   <b>setup</b>|<b>setup-env</b>
       These  subcommands fetch all required repositories and generate an appropriate multi-repository <b>justbuild</b>
       configuration file.  The resulting file is stored in  CAS  and  its  path  is  printed  to  stdout.   See
       <b><a href="../man5/just-repository-config.5.html">just-repository-config</a></b>(5) for more details on the resulting configuration file format.

       If  a  main  repository  is  provided  in  the  input  configuration  or on command line, only it and its
       dependencies are considered in the generation of the resulting multi-repository configuration  file.   If
       no  main repository is provided, the lexicographical first repository from the configuration is used.  To
       perform the setup for all repositories from the input configuration file, use the <b>--all</b> flag.

       The behavior of the two subcommands differs only with respect to the main repository.   In  the  case  of
       <b>setup-env</b>,  the  workspace  root of the main repository is left out, such that it can be deduced from the
       working directory when <b>justbuild</b> is invoked.  In this way, working on a checkout of  that  repository  is
       possible, while having all of its dependencies properly set up.  In the case of <b>setup</b>, the workspace root
       of the main repository is taken as-is into the output configuration file.

   <b>fetch</b>
       This subcommand prepares all archive-type and <b>"git</b> <b>tree"</b> workspace roots for an offline build by fetching
       all  their  required  source  files from the specified locations given in the input configuration file or
       ensuring the specified tree is present in  the  Git  cache,  respectively.   Any  subsequent  <b>just-mr</b>  or
       <b>justbuild</b>  invocations containing fetched archive or <b>"git</b> <b>tree"</b> workspace roots will thus need no further
       network connections.

       If a main repository is provided in the  input  configuration  or  on  command  line,  only  it  and  its
       dependencies  are  considered for fetching.  If no main repository is provided, the lexicographical first
       repository from the configuration is used.  To perform the fetch for  all  repositories  from  the  input
       configuration file, use the <b>--all</b> flag.

       By  default  the  first  existing  distribution directory is used as the output directory for writing the
       fetched archives on disk.  If no existing distribution directory can be found an error is  produced.   To
       define an output directory that is independent of the given distribution directories, use the <b>-o</b> option.

       Additionally,  and only in <u>native</u> <u>mode</u>, the <b>--backup-to-remote</b> option can be used in combination with the
       <b>--remote-execution-address</b> argument to synchronize the locally fetched archives,  as  well  as  the  <b>"git</b>
       <b>tree"</b> workspace roots, with a remote endpoint.

   <b>update</b>
       This  subcommand  updates  the  specified  repositories  (possibly none) and prints the resulting updated
       configuration file to stdout.

       Currently, <b>just-mr</b> can only update Git repositories and it will fail if a different  repository  type  is
       given.  The tool also fails if any of the given repository names are not found in the configuration file.

       For  Git  repositories, the subcommand will replace the value for the <u>"commit"</u> field with the commit hash
       (as a string) found in the remote repository in the specified branch.  The output configuration file will
       otherwise remain the same at the JSON level with the input configuration file.

   <b>do</b>
       This subcommand is used as the canonical way of specifying justbuild arguments and calling <b>justbuild</b>  via
       <b><a href="../man2/execvp.2.html">execvp</a></b>(2).   Any  subsequent  argument  is unconditionally forwarded to <b>justbuild</b>.  For <u>known</u> subcommands
       (<b>version</b>, <b>describe</b>, <b>analyse</b>, <b>build</b>, <b>install</b>, <b>install-cas</b>, <b>add-to-cas</b>, <b>rebuild</b>,  <b>gc</b>),  the  <b>just-mr</b>  <b>setup</b>
       step  is  performed  first for those commands accepting a configuration and the produced configuration is
       prefixed to the provided arguments.  The main repository for the  <b>setup</b>  step  can  be  provided  in  the
       configuration  or  on  the  command  line.   If no main repository is provided, the lexicographical first
       repository from the configuration is used.

       All logging arguments given to <b>just-mr</b> are passed to <b>justbuild</b> as early  arguments.   If  log  files  are
       provided,  an  unconditional  <b>--log-append</b> argument is passed as well, which ensures no log messages will
       get overwritten.

       The <b>--local-launcher</b> argument is passed to <b>justbuild</b> as early argument for those <u>known</u>  subcommands  that
       accept it (build, install, rebuild).

       The   <b>--remote-execution-address</b>,  <b>--compatible</b>,  and  <b>--remote-serve-address</b>  arguments  are  passed  to
       <b>justbuild</b> as early arguments for those <u>known</u> subcommands that accept them (analyse,  build,  install-cas,
       add-to-cas, install, rebuild, traverse).

       The  <u>authentication</u>  <u>options</u>  given to <b>just-mr</b> are passed to <b>justbuild</b> as early arguments for those <u>known</u>
       subcommands that accept them, according to <b><a href="../man1/justbuild.1.html">justbuild</a></b>(1).

   <b>version</b>|<b>describe</b>|<b>analyse</b>|<b>build</b>|<b>install</b>|<b>install-cas</b>|<b>add-to-cas</b>|<b>rebuild</b>|<b>gc</b>
       This subcommand is the explicit way of specifying  <u>known</u>  just  subcommands  and  calling  <b>justbuild</b>  via
       <b><a href="../man2/execvp.2.html">execvp</a></b>(2).  The same description as for the <b>do</b> subcommand applies.

   <b>gc-repo</b>
       Rotate  the repository-root generations.  In this way, all repository roots not needed since the the last
       call to <b>gc-repo</b> are purged and the corresponding disk space reclaimed.

</pre><h4><b>EXIT</b> <b>STATUS</b></h4><pre>
       The exit status of <b>just-mr</b> is one of the following values:

       • 0: the command completed successfully

       • 64: setup succeeded, but exec failed

       • 65: any unspecified error occurred in just-mr

       • 66: unknown subcommand

       • 67: error parsing the command-line arguments

       • 68: error parsing the configuration

       • 69: error during fetch

       • 70: error during update

       • 71: error during setup

       Any other exit code that does not have bit 64 set is a status value from <b>justbuild</b>, if <b>just-mr</b> is used as
       a launcher.  See <b><a href="../man1/justbuild.1.html">justbuild</a></b>(1) for more details.

</pre><h4><b>See</b> <b>also</b></h4><pre>
       <b><a href="../man5/just-mr-repository-config.5.html">just-mr-repository-config</a></b>(5), <b><a href="../man5/just-repository-config.5.html">just-repository-config</a></b>(5), <b><a href="../man1/justbuild.1.html">justbuild</a></b>(1)

                                                                                                      <u><a href="../man1/JUST-MR.1.html">JUST-MR</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>