<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>virt-customize - Customize a virtual machine</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/guestfs-tools">guestfs-tools_1.52.2-4ubuntu1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       virt-customize - Customize a virtual machine

</pre><h4><b>SYNOPSIS</b></h4><pre>
        virt-customize
           [ -a disk.img [ -a disk.img ... ] | -d domname ]
           [--attach ISOFILE] [--attach-format FORMAT]
           [ -c URI | --connect URI ] [ -n | --dry-run ]
           [ --format FORMAT] [ -m MB | --memsize MB ]
           [ --network | --no-network ]
           [ -q | --quiet ] [--smp N] [ -v | --verbose ] [-x]
           [--append-line FILE:LINE] [--chmod PERMISSIONS:FILE]
           [--chown UID:GID:PATH] [--commands-from-file FILENAME]
           [--copy SOURCE:DEST] [--copy-in LOCALPATH:REMOTEDIR]
           [--delete PATH] [--edit FILE:EXPR] [--firstboot SCRIPT]
           [--firstboot-command 'CMD+ARGS'] [--firstboot-install PKG,PKG..]
           [--hostname HOSTNAME] [--inject-qemu-ga METHOD]
           [--inject-virtio-win METHOD] [--install PKG,PKG..]
           [--link TARGET:LINK[:LINK..]] [--mkdir DIR] [--move SOURCE:DEST]
           [--password USER:SELECTOR] [--root-password SELECTOR]
           [--run SCRIPT] [--run-command 'CMD+ARGS'] [--scrub FILE]
           [--sm-attach SELECTOR] [--sm-register] [--sm-remove]
           [--sm-unregister] [--ssh-inject USER[:SELECTOR]]
           [--tar-in TARFILE:REMOTEDIR] [--timezone TIMEZONE] [--touch FILE]
           [--truncate FILE] [--truncate-recursive PATH]
           [--uninstall PKG,PKG..] [--update] [--upload FILE:DEST]
           [--write FILE:CONTENT] [--no-logfile]
           [--password-crypto md5|sha256|sha512] [--no-selinux-relabel]
           [--selinux-relabel] [--sm-credentials SELECTOR]

        virt-customize [ -V | --version ]

</pre><h4><b>WARNING</b></h4><pre>
       Using "virt-customize" on live virtual machines, or concurrently with other disk editing tools, can be
       dangerous, potentially causing disk corruption.  The virtual machine must be shut down before you use
       this command, and disk images must not be edited concurrently.

</pre><h4><b>DESCRIPTION</b></h4><pre>
       Virt-customize can customize a virtual machine (disk image) by installing packages, editing configuration
       files, and so on.

       Virt-customize modifies the guest or disk image <u>in</u> <u>place</u>.  The guest must be shut down.  If you want to
       preserve the existing contents of the guest, <u>you</u> <u>must</u> <u>snapshot,</u> <u>copy</u> <u>or</u> <u>clone</u> <u>the</u> <u>disk</u> <u>first</u>.

       You do <u>not</u> need to run virt-customize as root.  In fact we'd generally recommend that you don't.

       Related tools include: <b><a href="../man1/virt-sysprep.1.html">virt-sysprep</a></b>(1) and <b><a href="../man1/virt-builder.1.html">virt-builder</a></b>(1).

</pre><h4><b>OPTIONS</b></h4><pre>
       <b>--help</b>
           Display brief help.

       <b>-a</b> file
       <b>--add</b> file
           Add <u>file</u> which should be a disk image from a virtual machine.

           The  format  of  the disk image is auto-detected.  To override this and force a particular format use
           the <u>--format</u> option.

       <b>-a</b> URI
       <b>--add</b> URI
           Add a remote disk.  The URI format is compatible with guestfish.   See  "ADDING  REMOTE  STORAGE"  in
           <b><a href="../man1/guestfish.1.html">guestfish</a></b>(1).

       <b>--attach</b> ISOFILE
           The  given  disk  is  attached  to  the libguestfs appliance.  This is used to provide extra software
           repositories or other data for customization.

           You probably want to ensure the volume(s) or filesystems in the attached disks are labelled  (or  use
           an ISO volume name) so that you can mount them by label in your run-scripts:

            mkdir /tmp/mount
            mount LABEL=EXTRA /tmp/mount

           You can have multiple <u>--attach</u> options, and the format can be any disk format (not just an ISO).

       <b>--attach-format</b> FORMAT
           Specify the disk format for the next <u>--attach</u> option.  The "FORMAT" is usually "raw" or "qcow2".  Use
           "raw" for ISOs.

       <b>--colors</b>
       <b>--colours</b>
           Use  ANSI  colour sequences to colourize messages.  This is the default when the output is a tty.  If
           the output of the program is redirected to a file, ANSI colour sequences are disabled unless you  use
           this option.

       <b>-c</b> URI
       <b>--connect</b> URI
           If  using  libvirt,  connect  to  the  given <u>URI</u>.  If omitted, then we connect to the default libvirt
           hypervisor.

           If you specify guest block devices directly (<u>-a</u>), then libvirt is not used at all.

       <b>-d</b> guest
       <b>--domain</b> guest
           Add all the disks from the named libvirt guest.  Domain UUIDs can be used instead of names.

       <b>-n</b>
       <b>--dry-run</b>
           Perform a read-only "dry run" on the guest.  This runs the sysprep operation,  but  throws  away  any
           changes to the disk at the end.

       <b>--echo-keys</b>
           When  prompting for keys and passphrases, virt-customize normally turns echoing off so you cannot see
           what you are typing.  If you are not worried about Tempest attacks and there is no one  else  in  the
           room you can specify this flag to see what you are typing.

       <b>--format</b> raw|qcow2|..
       <b>--format</b> auto
           The  default for the <u>-a</u> option is to auto-detect the format of the disk image.  Using this forces the
           disk format for <u>-a</u> options which follow on the command line.  Using <u>--format</u> <u>auto</u>  switches  back  to
           auto-detection for subsequent <u>-a</u> options.

           For example:

            virt-customize --format raw -a disk.img

           forces raw format (no auto-detection) for <u>disk.img</u>.

            virt-customize --format raw -a disk.img --format auto -a another.img

           forces raw format (no auto-detection) for <u>disk.img</u> and reverts to auto-detection for <u>another.img</u>.

           If  you  have  untrusted raw-format guest disk images, you should use this option to specify the disk
           format.  This avoids a possible security problem with malicious guests (CVE-2010-3851).

       <b>--key</b> SELECTOR
           Specify a key for LUKS, to automatically open a LUKS device when using the inspection.

           <b>--key</b> NAME<b>:key:</b>KEY_STRING
           <b>--key</b> UUID<b>:key:</b>KEY_STRING
           <b>--key</b> <b>all:key:</b>KEY_STRING
               "NAME" is the libguestfs device name (eg. "/dev/sda1").  "UUID" is the device UUID.  "all"  means
               try the key against any encrypted device.

               Use the specified "KEY_STRING" as passphrase.

           <b>--key</b> NAME<b>:file:</b>FILENAME
           <b>--key</b> UUID<b>:file:</b>FILENAME
           <b>--key</b> <b>all:file:</b>FILENAME
               Read the passphrase from <u>FILENAME</u>.

           <b>--key</b> NAME<b>:clevis</b>
           <b>--key</b> UUID<b>:clevis</b>
           <b>--key</b> <b>all:clevis</b>
               Attempt  passphrase-less unlocking for the device with Clevis, over the network.  Please refer to
               "ENCRYPTED DISKS" in <b><a href="../man3/guestfs.3.html">guestfs</a></b>(3) for more information on network-bound disk encryption (NBDE).

               Note that if any such option is present on  the  command  line,  QEMU  user  networking  will  be
               automatically enabled for the libguestfs appliance.

       <b>--keys-from-stdin</b>
           Read  key  or  passphrase  parameters from stdin.  The default is to try to read passphrases from the
           user by opening <u>/dev/tty</u>.

           If there are multiple encrypted devices then you may need to supply multiple keys on stdin,  one  per
           line.

       <b>-m</b> MB
       <b>--memsize</b> MB
           Change the amount of memory allocated to <u>--run</u> scripts.  Increase this if you find that <u>--run</u> scripts
           or the <u>--install</u> option are running out of memory.

           The default can be found with this command:

            guestfish get-memsize

       <b>--network</b>
       <b>--no-network</b>
           Enable or disable network access from the guest during the installation.

           Enabled is the default.  Use <u>--no-network</u> to disable access.

           The  network  only  allows  outgoing  connections  and has other minor limitations.  See "NETWORK" in
           <b><a href="../man1/virt-rescue.1.html">virt-rescue</a></b>(1).

           If you use <u>--no-network</u> then certain other options such as <u>--install</u> will not work.

           This does not affect whether the guest can access the network once it has been booted,  because  that
           is controlled by your hypervisor or cloud environment and has nothing to do with virt-customize.

           Generally speaking you should <u>not</u> use <u>--no-network</u>.  But here are some reasons why you might want to:

           1.  Because  the  libguestfs backend that you are using doesn't support the network.  (See: "BACKEND"
               in <b><a href="../man3/guestfs.3.html">guestfs</a></b>(3)).

           2.  Any software you need to install comes from an attached ISO, so you don't need the network.

           3.  You don’t want untrusted guest code trying  to  access  your  host  network  when  running  virt-
               customize.  This is particularly an issue when you don't trust the source of the operating system
               templates.  (See "SECURITY" below).

           4.  You don’t have a host network (eg. in secure/restricted environments).

       <b>-q</b>
       <b>--quiet</b>
           Don’t print log messages.

           To enable detailed logging of individual file operations, use <u>-x</u>.

       <b>--smp</b> N
           Enable N ≥ 2 virtual CPUs for <u>--run</u> scripts to use.

       <b>-v</b>
       <b>--verbose</b>
           Enable verbose messages for debugging.

       <b>-V</b>
       <b>--version</b>
           Display version number and exit.

       <b>--wrap</b>
           Wrap error, warning, and informative messages.  This is the default when the output is a tty.  If the
           output of the program is redirected to a file, wrapping is disabled unless you use this option.

       <b>-x</b>  Enable tracing of libguestfs API calls.

   <b>Customization</b> <b>options</b>
       <b>--append-line</b> FILE:LINE
           Append  a  single  line of text to the "FILE".  If the file does not already end with a newline, then
           one is added before the appended line.  Also a newline is added to  the  end  of  the  "LINE"  string
           automatically.

           For example (assuming ordinary shell quoting) this command:

            --append-line '<a href="file:/etc/hosts">/etc/hosts</a>:10.0.0.1 foo'

           will add either "10.0.0.1 foo⏎" or "⏎10.0.0.1 foo⏎" to the file, the latter only if the existing file
           does not already end with a newline.

           "⏎"  represents a newline character, which is guessed by looking at the existing content of the file,
           so this command does the right thing for files using Unix or Windows line endings.  It also works for
           empty or non-existent files.

           To insert several lines, use the same option several times:

            --append-line '<a href="file:/etc/hosts">/etc/hosts</a>:10.0.0.1 foo'
            --append-line '<a href="file:/etc/hosts">/etc/hosts</a>:10.0.0.2 bar'

           To insert a blank line before the appended line, do:

            --append-line '<a href="file:/etc/hosts">/etc/hosts</a>:'
            --append-line '<a href="file:/etc/hosts">/etc/hosts</a>:10.0.0.1 foo'

       <b>--chmod</b> PERMISSIONS:FILE
           Change the permissions of "FILE" to "PERMISSIONS".

           <u>Note</u>: "PERMISSIONS" by default would be decimal, unless you prefix it with 0 to get  octal,  ie.  use
           0700 not 700.

       <b>--chown</b> UID:GID:PATH
           Change the owner user and group ID of a file or directory in the guest.  Note:

           •   Only  numeric  UIDs  and GIDs will work, and these may not be the same inside the guest as on the
               host.

           •   This will not work with Windows guests.

           For example:

            virt-customize --chown '0:0:/var/log/audit.log'

           See also: <u>--upload</u>.

       <b>--commands-from-file</b> FILENAME
           Read the customize commands from a file, one (and its arguments) each line.

           Each line contains a single customization command and its arguments, for example:

            delete /some/file
            install some-package
            password some-user:password:its-new-password

           Empty lines are ignored, and  lines  starting  with  "#"  are  comments  and  are  ignored  as  well.
           Furthermore,  arguments can be spread across multiple lines, by adding a "\" (continuation character)
           at the of a line, for example

            edit /some/file:\
              s/^OPT=.*/OPT=ok/

           The commands are handled in the same order as they are in the file, as  if  they  were  specified  as
           <u>--delete</u> <u>/some/file</u> on the command line.

       <b>--copy</b> SOURCE:DEST
           Copy files or directories recursively inside the guest.

           Wildcards cannot be used.

       <b>--copy-in</b> LOCALPATH:REMOTEDIR
           Copy  local  files  or  directories  recursively  into  the disk image, placing them in the directory
           "REMOTEDIR" (which must exist).

           Wildcards cannot be used.

       <b>--delete</b> PATH
           Delete a file from the guest.  Or delete a directory (and all its contents, recursively).

           You can use shell glob characters in the specified path.  Be careful to escape glob  characters  from
           the host shell, if that is required.  For example:

            virt-customize --delete '<a href="file:/var/log/">/var/log/</a>*.log'.

           See also: <u>--upload</u>, <u>--scrub</u>.

       <b>--edit</b> FILE:EXPR
           Edit "FILE" using the Perl expression "EXPR".

           Be careful to properly quote the expression to prevent it from being altered by the shell.

           Note that this option is only available when Perl 5 is installed.

           See "NON-INTERACTIVE EDITING" in <b><a href="../man1/virt-edit.1.html">virt-edit</a></b>(1).

       <b>--firstboot</b> SCRIPT
           Install  "SCRIPT"  inside the guest, so that when the guest first boots up, the script runs (as root,
           late in the boot process).

           The script is automatically chmod +x after installation in the guest.

           The alternative version <u>--firstboot-command</u> is the same, but it conveniently wraps the command up  in
           a single line script for you.

           You  can  have  multiple  <u>--firstboot</u>  options.   They  run in the same order that they appear on the
           command line.

           Please take a look at "FIRST BOOT SCRIPTS" in <b><a href="../man1/virt-builder.1.html">virt-builder</a></b>(1) for more information and caveats  about
           the first boot scripts.

           See also <u>--run</u>.

       <b>--firstboot-command</b> 'CMD+ARGS'
           Run command (and arguments) inside the guest when the guest first boots up (as root, late in the boot
           process).

           You  can  have  multiple  <u>--firstboot</u>  options.   They  run in the same order that they appear on the
           command line.

           Please take a look at "FIRST BOOT SCRIPTS" in <b><a href="../man1/virt-builder.1.html">virt-builder</a></b>(1) for more information and caveats  about
           the first boot scripts.

           See also <u>--run</u>.

       <b>--firstboot-install</b> PKG,PKG..
           Install  the named packages (a comma-separated list).  These are installed when the guest first boots
           using the guest’s package manager (eg. apt, yum, etc.) and the guest’s network connection.

           For  an  overview  on  the  different  ways  to  install  packages,  see  "INSTALLING  PACKAGES"   in
           <b><a href="../man1/virt-builder.1.html">virt-builder</a></b>(1).

       <b>--hostname</b> HOSTNAME
           Set  the hostname of the guest to "HOSTNAME".  You can use a dotted hostname.domainname (FQDN) if you
           want.

       <b>--inject-qemu-ga</b> METHOD
           Inject the QEMU Guest Agent into a Windows guest.  The guest agent communicates with qemu  through  a
           socket  in  order  to  provide  enhanced  features  (see  <b><a href="../man8/qemu-ga.8.html">qemu-ga</a></b>(8)).  This operation also injects a
           firstboot script so that the Guest Agent is installed when the guest boots.

           The parameter is the same as used by the <u>--inject-virtio-win</u> operation.

           Note that to do a full conversion of a Windows guest from a foreign  hypervisor  like  VMware  (which
           involves many other operations) you should use the <b><a href="../man1/virt-v2v.1.html">virt-v2v</a></b>(1) tool instead of this.

       <b>--inject-virtio-win</b> METHOD
           Inject  virtio-win  drivers  into  a  Windows  guest.   These  drivers add virtio accelerated drivers
           suitable when running on top of a hypervisor that supports virtio (such as qemu/KVM).  The  operation
           also adjusts the Windows Registry so that the drivers are installed when the guest boots.

           The parameter can be one of:

           ISO The     path     to     the    ISO    image    containing    the    virtio-win    drivers    (eg.
               <u>/usr/share/virtio-win/virtio-win.iso</u>).

           DIR The directory containing the unpacked virtio-win drivers (eg. <u>/usr/share/virtio-win</u>).

           <b>"osinfo"</b>
               The literal string "osinfo" means to use the libosinfo database  to  locate  the  drivers.   (See
               <b><a href="../man1/osinfo-query.1.html">osinfo-query</a></b>(1).

           Note  that  to  do  a full conversion of a Windows guest from a foreign hypervisor like VMware (which
           involves many other operations) you should use the <b><a href="../man1/virt-v2v.1.html">virt-v2v</a></b>(1) tool instead of this.

       <b>--install</b> PKG,PKG..
           Install the named packages (a comma-separated list).  These are  installed  during  the  image  build
           using the guest’s package manager (eg. apt, yum, etc.) and the host’s network connection.

           For   an  overview  on  the  different  ways  to  install  packages,  see  "INSTALLING  PACKAGES"  in
           <b><a href="../man1/virt-builder.1.html">virt-builder</a></b>(1).

           See also <u>--update</u>, <u>--uninstall</u>.

       <b>--link</b> TARGET:LINK[:LINK..]
           Create symbolic link(s) in the guest, starting at "LINK" and pointing at "TARGET".

       <b>--mkdir</b> DIR
           Create a directory in the guest.

           This uses "mkdir -p" so any intermediate directories are created, and it also works if the  directory
           already exists.

       <b>--move</b> SOURCE:DEST
           Move files or directories inside the guest.

           Wildcards cannot be used.

       <b>--no-logfile</b>
           Scrub "builder.log" (log file from build commands) from the image after building is complete.  If you
           don't want to reveal precisely how the image was built, use this option.

           See also: "LOG FILE".

       <b>--no-selinux-relabel</b>
           Do not attempt to correct the SELinux labels of files in the guest.

           In such guests that support SELinux, customization automatically relabels files so that they have the
           correct  SELinux  label.   (The  relabeling  is  performed  immediately,  but if the operation fails,
           customization will instead touch <u>/.autorelabel</u> on the image to schedule a relabel operation  for  the
           next time the image boots.)  This option disables the automatic relabeling.

           The option is a no-op for guests that do not support SELinux.

       <b>--password</b> USER:SELECTOR
           Set the password for "USER".  (Note this option does <u>not</u> create the user account).

           See  "USERS AND PASSWORDS" in <b><a href="../man1/virt-builder.1.html">virt-builder</a></b>(1) for the format of the "SELECTOR" field, and also how to
           set up user accounts.

       <b>--password-crypto</b> md5|sha256|sha512
           When the virt tools change or set a password in the guest, this option sets the  password  encryption
           of that password to "md5", "sha256" or "sha512".

           "sha256" and "sha512" require glibc ≥ 2.7 (check <b><a href="../man3/crypt.3.html">crypt</a></b>(3) inside the guest).

           "md5"  will  work  with  relatively  old  Linux guests (eg. RHEL 3), but is not secure against modern
           attacks.

           The default is "sha512" unless libguestfs detects an old guest that didn't have support for  SHA-512,
           in which case it will use "md5".  You can override libguestfs by specifying this option.

           Note  this does not change the default password encryption used by the guest when you create new user
           accounts inside the guest.  If you want to do that, then you should use the <u>--edit</u> option  to  modify
           "/etc/sysconfig/authconfig" (Fedora, RHEL) or "<a href="file:/etc/pam.d/common-password">/etc/pam.d/common-password</a>" (Debian, Ubuntu).

       <b>--root-password</b> SELECTOR
           Set the root password.

           See  "USERS AND PASSWORDS" in <b><a href="../man1/virt-builder.1.html">virt-builder</a></b>(1) for the format of the "SELECTOR" field, and also how to
           set up user accounts.

           Note: In virt-builder, if you <u>don't</u> set <u>--root-password</u>  then  the  guest  is  given  a  <u>random</u>  root
           password.

       <b>--run</b> SCRIPT
           Run the shell script (or any program) called "SCRIPT" on the disk image.  The script runs virtualized
           inside a small appliance, chrooted into the guest filesystem.

           The script is automatically chmod +x.

           If  libguestfs supports it then a limited network connection is available but it only allows outgoing
           network connections.  You can also attach data disks (eg. ISO files) as another way to  provide  data
           (eg.  software packages) to the script without needing a network connection (<u>--attach</u>).  You can also
           upload data files (<u>--upload</u>).

           You can have multiple <u>--run</u> options.  They run in the same order that  they  appear  on  the  command
           line.

           See also: <u>--firstboot</u>, <u>--attach</u>, <u>--upload</u>.

       <b>--run-command</b> 'CMD+ARGS'
           Run  the  command  and  arguments  on  the  disk  image.  The command runs virtualized inside a small
           appliance, chrooted into the guest filesystem.

           If libguestfs supports it then a limited network connection is available but it only allows  outgoing
           network  connections.   You can also attach data disks (eg. ISO files) as another way to provide data
           (eg. software packages) to the script without needing a network connection (<u>--attach</u>).  You can  also
           upload data files (<u>--upload</u>).

           You  can  have  multiple  <u>--run-command</u>  options.  They run in the same order that they appear on the
           command line.

           See also: <u>--firstboot</u>, <u>--attach</u>, <u>--upload</u>.

       <b>--scrub</b> FILE
           Scrub a file from the guest.  This is like <u>--delete</u> except that:

           •   It scrubs the data so a guest could not recover it.

           •   It cannot delete directories, only regular files.

       <b>--selinux-relabel</b>
           This is a compatibility option that does nothing.

       <b>--sm-attach</b> SELECTOR
           Attach to a pool using "subscription-manager".

           See "SUBSCRIPTION-MANAGER" in <b><a href="../man1/virt-builder.1.html">virt-builder</a></b>(1) for the format of the "SELECTOR" field.

       <b>--sm-credentials</b> SELECTOR
           Set the credentials for "subscription-manager".

           See "SUBSCRIPTION-MANAGER" in <b><a href="../man1/virt-builder.1.html">virt-builder</a></b>(1) for the format of the "SELECTOR" field.

       <b>--sm-register</b>
           Register the guest using "subscription-manager".

           This requires credentials being set using <u>--sm-credentials</u>.

       <b>--sm-remove</b>
           Remove all the subscriptions from the guest using "subscription-manager".

       <b>--sm-unregister</b>
           Unregister the guest using "subscription-manager".

       <b>--ssh-inject</b> USER[:SELECTOR]
           Inject an ssh key so the given "USER" will be able to log in over ssh without supplying  a  password.
           The "USER" must exist already in the guest.

           See "SSH KEYS" in <b><a href="../man1/virt-builder.1.html">virt-builder</a></b>(1) for the format of the "SELECTOR" field.

           You can have multiple <u>--ssh-inject</u> options, for different users and also for more keys for each user.

       <b>--tar-in</b> TARFILE:REMOTEDIR
           Copy  local  files or directories from a local tar file called "TARFILE" into the disk image, placing
           them in the directory "REMOTEDIR" (which must exist).  Note that the tar file  must  be  uncompressed
           (<u>.tar.gz</u> files will not work here)

       <b>--timezone</b> TIMEZONE
           Set the default timezone of the guest to "TIMEZONE".  Use a location string like "Europe/London"

       <b>--touch</b> FILE
           This command performs a <b><a href="../man1/touch.1.html">touch</a></b>(1)-like operation on "FILE".

       <b>--truncate</b> FILE
           This command truncates "FILE" to a zero-length file. The file must exist already.

       <b>--truncate-recursive</b> PATH
           This command recursively truncates all files under "PATH" to zero-length.

       <b>--uninstall</b> PKG,PKG..
           Uninstall  the  named  packages  (a  comma-separated list).  These are removed during the image build
           using the guest’s package manager (eg. apt, yum, etc.).  Dependent  packages  may  also  need  to  be
           uninstalled to satisfy the request.

           See also <u>--install</u>, <u>--update</u>.

       <b>--update</b>
           Do  the  equivalent of "yum update", "apt-get upgrade", or whatever command is required to update the
           packages already installed in the template to their latest versions.

           See also <u>--install</u>, <u>--uninstall</u>.

       <b>--upload</b> FILE:DEST
           Upload local file "FILE" to destination "DEST" in the disk image.  File owner  and  permissions  from
           the original are preserved, so you should set them to what you want them to be in the disk image.

           "DEST" could be the final filename.  This can be used to rename the file on upload.

           If  "DEST" is a directory name (which must already exist in the guest) then the file is uploaded into
           that directory, and it keeps the same name as on the local filesystem.

           See also: <u>--mkdir</u>, <u>--delete</u>, <u>--scrub</u>.

       <b>--write</b> FILE:CONTENT
           Write "CONTENT" to "FILE".

</pre><h4><b>SELINUX</b></h4><pre>
       For guests which make use of SELinux, special handling for them might be  needed  when  using  operations
       which create new files or alter existing ones.

       For further details, see "SELINUX" in <b><a href="../man1/virt-builder.1.html">virt-builder</a></b>(1).

</pre><h4><b>EXIT</b> <b>STATUS</b></h4><pre>
       This program returns 0 on success, or 1 if there was an error.

</pre><h4><b>ENVIRONMENT</b> <b>VARIABLES</b></h4><pre>
       "VIRT_TOOLS_DATA_DIR"
           This can point to the directory containing data files used for Windows firstboot installation.

           Normally you do not need to set this.  If not set, a compiled-in default will be used (something like
           <u>/usr/share/virt-tools</u>).

           This directory may contain the following files:

           <u>rhsrvany.exe</u>
               This  is the RHSrvAny Windows binary, used to install a "firstboot" script in Windows guests.  It
               is required if you intend to use the <u>--firstboot</u>  or  <u>--firstboot-command</u>  options  with  Windows
               guests.

               See also: "https://github.com/rwmjones/rhsrvany"

           <u>pvvxsvc.exe</u>
               This  is a Windows binary shipped with SUSE VMDP, used to install a "firstboot" script in Windows
               guests.  It is required if you intend to use the <u>--firstboot</u> or <u>--firstboot-command</u> options  with
               Windows guests.

       For other environment variables, see "ENVIRONMENT VARIABLES" in <b><a href="../man3/guestfs.3.html">guestfs</a></b>(3).

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man3/guestfs.3.html">guestfs</a></b>(3),     <b><a href="../man1/guestfish.1.html">guestfish</a></b>(1),    <b><a href="../man1/virt-builder.1.html">virt-builder</a></b>(1),    <b><a href="../man1/virt-clone.1.html">virt-clone</a></b>(1),    <b><a href="../man1/virt-rescue.1.html">virt-rescue</a></b>(1),    <b><a href="../man1/virt-resize.1.html">virt-resize</a></b>(1),
       <b><a href="../man1/virt-sparsify.1.html">virt-sparsify</a></b>(1), <b><a href="../man1/virt-sysprep.1.html">virt-sysprep</a></b>(1), <b><a href="../man1/virsh.1.html">virsh</a></b>(1), <b><a href="../man8/lvcreate.8.html">lvcreate</a></b>(8), <b><a href="../man1/qemu-img.1.html">qemu-img</a></b>(1), <b><a href="../man1/scrub.1.html">scrub</a></b>(1),  <a href="http://libguestfs.org/">http://libguestfs.org/</a>,
       <a href="http://libvirt.org/">http://libvirt.org/</a>.

</pre><h4><b>AUTHORS</b></h4><pre>
       Richard W.M. Jones <a href="http://people.redhat.com/~rjones/">http://people.redhat.com/~rjones/</a>

</pre><h4><b>COPYRIGHT</b></h4><pre>
       Copyright (C) 2011-2023 Red Hat Inc.

</pre><h4><b>LICENSE</b></h4><pre>
       This  program  is  free  software;  you  can  redistribute it and/or modify it under the terms of the GNU
       General Public License as published by the Free Software Foundation; either version 2 of the License,  or
       (at your option) any later version.

       This  program  is  distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even
       the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General  Public
       License for more details.

       You  should have received a copy of the GNU General Public License along with this program; if not, write
       to the Free Software Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA.

</pre><h4><b>BUGS</b></h4><pre>
       To     get      a      list      of      bugs      against      libguestfs,      use      this      link:
       https://bugzilla.redhat.com/buglist.cgi?component=libguestfs&amp;product=Virtualization+Tools

       To       report       a       new       bug       against       libguestfs,      use      this      link:
       https://bugzilla.redhat.com/enter_bug.cgi?component=libguestfs&amp;product=Virtualization+Tools

       When reporting a bug, please supply:

       •   The version of libguestfs.

       •   Where you got libguestfs (eg. which Linux distro, compiled from source, etc)

       •   Describe the bug accurately and give a way to reproduce it.

       •   Run <b><a href="../man1/libguestfs-test-tool.1.html">libguestfs-test-tool</a></b>(1) and paste the <b>complete,</b> <b>unedited</b> output into the bug report.

guestfs-tools-1.52.2                               2025-02-04                                  <u><a href="../man1/virt-customize.1.html">virt-customize</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>