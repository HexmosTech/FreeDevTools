<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title></title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/criu">criu_4.0-4_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b> <b>criu-amdgpu-plugin</b> <b>-</b> <b>A</b> <b>plugin</b> <b>extension</b> <b>to</b> <b>CRIU</b> <b>to</b> <b>support</b> <b>checkpoint/restore</b> <b>in</b> <b>userspace</b> <b>for</b> <b>AMD</b> <b>GPUs.</b></h4><pre>

</pre><h4><b>CURRENT</b> <b>SUPPORT</b></h4><pre>

       <b>Single</b>  <b>and</b> <b>Multi</b> <b>GPU</b> <b>systems</b> <b>(Gfx9)</b> <b>Checkpoint</b> <b>/</b> <b>Restore</b> <b>on</b> <b>different</b> <b>system</b> <b>Checkpoint</b> <b>/</b> <b>Restore</b> <b>inside</b>
       <b>a</b> <b>docker</b> <b>container</b> <b>Pytorch</b> <b>Tensorflow</b> <b>Using</b> <b>CRIU</b> <b>Image</b> <b>Streamer</b>

</pre><h4><b>DESCRIPTION</b></h4><pre>

       <b>Though</b> <b>criu</b> is a great tool  for  checkpointing  and  restoring  running  applications,  it  has  certain
       limitations  such  as it cannot handle applications that have device files open. In order to support <b>ROCm</b>
       based workloads with <b>criu</b> we need to augment criu’s core functionality  with  a  plugin  based  extension
       mechanism.  <b>criu-amdgpu-plugin</b>  provides the necessary support to criu to allow Checkpoint / Restore with
       ROCm.

</pre><h4><b>DEPENDENCIES</b></h4><pre>

       <b>amdkfd</b> <b>support</b>
           In order to snapshot the <b>VRAM</b> and  other  <b>GPU</b>  device  states,  we  require  an  updated  version  of
           amdkfd(amdgpu) driver.

</pre><h4><b>OPTIONS</b></h4><pre>

       <b>Optional</b> <b>parameters</b> <b>can</b> <b>be</b> <b>passed</b> <b>in</b> <b>as</b> <b>environment</b> <b>variables</b> <b>before</b> <b>executing</b> <b>criu</b> <b>command.</b>

       <b>KFD_FW_VER_CHECK</b>
           Enable  or  disable  firmware version check. If enabled, firmware version on restored gpu needs to be
           greater than or equal firmware version on checkpointed GPU. Default:Enabled

               E.g:
               KFD_FW_VER_CHECK=0

       <b>KFD_SDMA_FW_VER_CHECK</b>
           Enable or disable SDMA firmware version check. If enabled, SDMA  firmware  version  on  restored  gpu
           needs to be greater than or equal firmware version on checkpointed GPU. Default:Enabled

               E.g:
               KFD_SDMA_FW_VER_CHECK=0

       <b>KFD_CACHES_COUNT_CHECK</b>
           Enable  or  disable  caches  count  check.  If  enabled, the caches count on restored GPU needs to be
           greater than or equal caches count on checkpointed GPU. Default:Enabled

               E.g:
               KFD_CACHES_COUNT_CHECK=0

       <b>KFD_NUM_GWS_CHECK</b>
           Enable or disable num_gws check. If enabled, the num_gws on restored GPU needs to be greater than  or
           equal num_gws on checkpointed GPU. Default:Enabled

               E.g:
               KFD_NUM_GWS_CHECK=0

       <b>KFD_VRAM_SIZE_CHECK</b>
           Enable or disable VRAM size check. If enabled, the VRAM size on restored GPU needs to be greater than
           or equal VRAM size on checkpointed GPU. Default:Enabled

               E.g:
               KFD_VRAM_SIZE_CHECK=0

       <b>KFD_NUMA_CHECK</b>
           Enable  or disable NUMA CPU region check. If enabled, the plugin will restore GPUs that belong to one
           CPU NUMA region to the same CPU NUMA region. Default:Enabled

               E.g:
               KFD_NUMA_CHECK=1

       <b>KFD_CAPABILITY_CHECK</b>
           Enable or disable capability check. If enabled, the capability on restored GPU needs to be  equal  to
           the capability on the checkpointed GPU. Default:Enabled

               E.g:
               KFD_CAPABILITY_CHECK=1

       <b>KFD_MAX_BUFFER_SIZE</b>
           On  some  systems, VRAM sizes may exceed RAM sizes, and so buffers for dumping and restoring VRAM may
           be unable to fit. Set to a nonzero value (in bytes) to set a limit  on  the  plugin’s  memory  usage.
           Default:0 (Disabled)

               E.g:
               KFD_MAX_BUFFER_SIZE="2G"

</pre><h4><b>AUTHOR</b></h4><pre>

       <b>The</b> <b>AMDKFD</b> <b>team.</b>

</pre><h4><b>COPYRIGHT</b></h4><pre>

       <b>Copyright</b> <b>(C)</b> <b>2020-2021,</b> <b>Advanced</b> <b>Micro</b> <b>Devices,</b> <b>Inc.</b> <b>(AMD)</b>

                                                   03/10/2025                                    <u>ROCM</u> <u><a href="../man1/SUPPORT.1.html">SUPPORT</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>