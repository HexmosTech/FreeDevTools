<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>openssl-ca - sample minimal CA application</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/openssl">openssl_3.4.1-1ubuntu3_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       openssl-ca - sample minimal CA application

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>openssl</b> <b>ca</b> [<b>-help</b>] [<b>-verbose</b>] [<b>-quiet</b>] [<b>-config</b> <u>filename</u>] [<b>-name</b> <u>section</u>] [<b>-section</b> <u>section</u>] [<b>-gencrl</b>]
       [<b>-revoke</b> <u>file</u>] [<b>-valid</b> <u>file</u>] [<b>-status</b> <u>serial</u>] [<b>-updatedb</b>] [<b>-crl_reason</b> <u>reason</u>] [<b>-crl_hold</b> <u>instruction</u>]
       [<b>-crl_compromise</b> <u>time</u>] [<b>-crl_CA_compromise</b> <u>time</u>] [<b>-crl_lastupdate</b> <u>date</u>] [<b>-crl_nextupdate</b> <u>date</u>] [<b>-crldays</b>
       <u>days</u>] [<b>-crlhours</b> <u>hours</u>] [<b>-crlsec</b> <u>seconds</u>] [<b>-crlexts</b> <u>section</u>] [<b>-startdate</b> <u>date</u>] [<b>-not_before</b> <u>date</u>]
       [<b>-enddate</b> <u>date</u>] [<b>-not_after</b> <u>date</u>] [<b>-days</b> <u>arg</u>] [<b>-md</b> <u>arg</u>] [<b>-policy</b> <u>arg</u>] [<b>-keyfile</b> <u>filename</u>|<u>uri</u>] [<b>-keyform</b>
       <b>DER</b>|<b>PEM</b>|<b>P12</b>|<b>ENGINE</b>] [<b>-key</b> <u>arg</u>] [<b>-passin</b> <u>arg</u>] [<b>-cert</b> <u>file</u>] [<b>-certform</b> <b>DER</b>|<b>PEM</b>|<b>P12</b>] [<b>-selfsign</b>] [<b>-in</b> <u>file</u>]
       [<b>-inform</b> <b>DER</b>|&lt;PEM&gt;] [<b>-out</b> <u>file</u>] [<b>-notext</b>] [<b>-dateopt</b>] [<b>-outdir</b> <u>dir</u>] [<b>-infiles</b>] [<b>-spkac</b> <u>file</u>] [<b>-ss_cert</b>
       <u>file</u>] [<b>-preserveDN</b>] [<b>-noemailDN</b>] [<b>-batch</b>] [<b>-msie_hack</b>] [<b>-extensions</b> <u>section</u>] [<b>-extfile</b> <u>section</u>] [<b>-subj</b>
       <u>arg</u>] [<b>-utf8</b>] [<b>-sigopt</b> <u>nm</u>:<u>v</u>] [<b>-vfyopt</b> <u>nm</u>:<u>v</u>] [<b>-create_serial</b>] [<b>-rand_serial</b>] [<b>-multivalue-rdn</b>] [<b>-rand</b>
       <u>files</u>] [<b>-writerand</b> <u>file</u>] [<b>-engine</b> <u>id</u>] [<b>-provider</b> <u>name</u>] [<b>-provider-path</b> <u>path</u>] [<b>-propquery</b> <u>propq</u>]
       [<u>certreq</u>...]

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This command emulates a CA application.  See the <b>WARNINGS</b> especially when considering to use it
       productively.

       It generates certificates bearing X.509 version 3.  Unless specified otherwise, key identifier extensions
       are included as described in <b><a href="../man5/x509v3_config.5.html">x509v3_config</a></b>(5).

       It can be used to sign certificate requests (CSRs) in a variety of forms and generate certificate
       revocation lists (CRLs).  It also maintains a text database of issued certificates and their status.
       When signing certificates, a single request can be specified with the <b>-in</b> option, or multiple requests
       can be processed by specifying a set of <b>certreq</b> files after all options.

       Note that there are also very lean ways of generating certificates: the <b>req</b> and <b>x509</b> commands can be used
       for directly creating certificates.  See <b><a href="../man1/openssl-req.1.html">openssl-req</a></b>(1) and <b><a href="../man1/openssl-x509.1.html">openssl-x509</a></b>(1) for details.

       The descriptions of the <b>ca</b> command options are divided into each purpose.

</pre><h4><b>OPTIONS</b></h4><pre>
       <b>-help</b>
           Print out a usage message.

       <b>-verbose</b>
           This prints extra details about the operations being performed.

       <b>-quiet</b>
           This  prints  fewer  details  about  the  operations being performed, which may be handy during batch
           scripts or pipelines.

       <b>-config</b> <u>filename</u>
           Specifies the configuration file to use.  Optional; for a  description  of  the  default  value,  see
           "COMMAND SUMMARY" in <b><a href="../man1/openssl.1.html">openssl</a></b>(1).

       <b>-name</b> <u>section</u>, <b>-section</b> <u>section</u>
           Specifies the configuration file section to use (overrides <b>default_ca</b> in the <b>ca</b> section).

       <b>-in</b> <u>filename</u>
           An input filename containing a single certificate request (CSR) to be signed by the CA.

       <b>-inform</b> <b>DER</b>|<b>PEM</b>
           The  format to use when loading certificate request (CSR) input files; by default PEM is tried first.
           See <b><a href="../man1/openssl-format-options.1.html">openssl-format-options</a></b>(1) for details.

       <b>-ss_cert</b> <u>filename</u>
           A single self-signed certificate to be signed by the CA.

       <b>-spkac</b> <u>filename</u>
           A file containing a single Netscape signed public key and challenge and additional field values to be
           signed by the CA. See the <b>SPKAC</b> <b>FORMAT</b> section for information  on  the  required  input  and  output
           format.

       <b>-infiles</b>
           If  present  this should be the last option, all subsequent arguments are taken as the names of files
           containing certificate requests.

       <b>-out</b> <u>filename</u>
           The output file to output certificates to. The default is standard output.  The  certificate  details
           will also be printed out to this file in PEM format (except that <b>-spkac</b> outputs DER format).

       <b>-outdir</b> <u>directory</u>
           The  directory to output certificates to. The certificate will be written to a filename consisting of
           the serial number in hex with <u>.pem</u> appended.

       <b>-cert</b> <u>filename</u>
           The CA certificate, which must match with <b>-keyfile</b>.

       <b>-certform</b> <b>DER</b>|<b>PEM</b>|<b>P12</b>
           The  format  of   the   data   in   certificate   input   files;   unspecified   by   default.    See
           <b><a href="../man1/openssl-format-options.1.html">openssl-format-options</a></b>(1) for details.

       <b>-keyfile</b> <u>filename</u>|<u>uri</u>
           The CA private key to sign certificate requests with.  This must match with <b>-cert</b>.

       <b>-keyform</b> <b>DER</b>|<b>PEM</b>|<b>P12</b>|<b>ENGINE</b>
           The  format of the private key input file; unspecified by default.  See <b><a href="../man1/openssl-format-options.1.html">openssl-format-options</a></b>(1) for
           details.

       <b>-sigopt</b> <u>nm</u>:<u>v</u>
           Pass options to the signature algorithm during sign operations.  Names and values  of  these  options
           are algorithm-specific and documented in "Signature parameters" in <b><a href="../man7/provider-signature.7.html">provider-signature</a></b>(7).

       <b>-vfyopt</b> <u>nm</u>:<u>v</u>
           Pass  options to the signature algorithm during verify operations.  Names and values of these options
           are algorithm-specific.

           This often needs to be given while signing too, because the self-signature of a  certificate  signing
           request (CSR) is verified against the included public key, and that verification may need its own set
           of options.

       <b>-key</b> <u>password</u>
           The  password  used  to encrypt the private key. Since on some systems the command line arguments are
           visible (e.g., when using <b><a href="../man1/ps.1.html">ps</a></b>(1) on Unix), this option  should  be  used  with  caution.   Better  use
           <b>-passin</b>.

       <b>-passin</b> <u>arg</u>
           The  key password source for key files and certificate PKCS#12 files.  For more information about the
           format of <b>arg</b> see <b><a href="../man1/openssl-passphrase-options.1.html">openssl-passphrase-options</a></b>(1).

       <b>-selfsign</b>
           Indicates the issued certificates are to be signed with the key the certificate requests were  signed
           with  (given  with  <b>-keyfile</b>).   Certificate  requests  signed  with a different key are ignored.  If
           <b>-spkac</b>, <b>-ss_cert</b> or <b>-gencrl</b> are given, <b>-selfsign</b> is ignored.

           A consequence of using <b>-selfsign</b> is that the self-signed certificate appears among the entries in the
           certificate database (see the configuration option <b>database</b>), and uses the same serial number counter
           as all other certificates sign with the self-signed certificate.

       <b>-notext</b>
           Don't output the text form of a certificate to the output file.

       <b>-dateopt</b>
           Specify the date output format. Values are: rfc_822 and iso_8601.  Defaults to rfc_822.

       <b>-startdate</b> <u>date</u>, <b>-not_before</b> <u>date</u>
           This allows the start date to be explicitly set. The format of the date is YYMMDDHHMMSSZ (the same as
           an ASN1 UTCTime structure), or YYYYMMDDHHMMSSZ (the same as an ASN1  GeneralizedTime  structure).  In
           both formats, seconds SS and timezone Z must be present.  Alternatively, you can also use "today".

       <b>-enddate</b> <u>date</u>, <b>-not_after</b> <u>date</u>
           This  allows  the expiry date to be explicitly set. The format of the date is YYMMDDHHMMSSZ (the same
           as an ASN1 UTCTime structure), or YYYYMMDDHHMMSSZ (the same as an ASN1 GeneralizedTime structure). In
           both formats, seconds SS and timezone Z must be present.  Alternatively, you can also use "today".

           This overrides the <b>-days</b> option.

       <b>-days</b> <u>arg</u>
           The number of days from today to certify the certificate for.

           Regardless of the option <b>-not_before</b>, the days are always counted from  today.   When  used  together
           with the option <b>-not_after</b>/<b>-startdate</b>, the explicit expiry date takes precedence.

       <b>-md</b> <u>alg</u>
           The  message  digest  to  use.   Any digest supported by the <b><a href="../man1/openssl-dgst.1.html">openssl-dgst</a></b>(1) command can be used. For
           signing algorithms that do not support a digest (i.e. Ed25519 and Ed448) any message digest  that  is
           set is ignored. This option also applies to CRLs.

       <b>-policy</b> <u>arg</u>
           This option defines the CA "policy" to use. This is a section in the configuration file which decides
           which fields should be mandatory or match the CA certificate. Check out the <b>POLICY</b> <b>FORMAT</b> section for
           more information.

       <b>-msie_hack</b>
           This  is  a  deprecated option to make this command work with very old versions of the IE certificate
           enrollment control "certenr3". It used UniversalStrings for almost everything. Since the old  control
           has various security bugs its use is strongly discouraged.

       <b>-preserveDN</b>
           Normally  the DN order of a certificate is the same as the order of the fields in the relevant policy
           section. When this option is set the  order  is  the  same  as  the  request.  This  is  largely  for
           compatibility  with the older IE enrollment control which would only accept certificates if their DNs
           match the order of the request. This is not needed for Xenroll.

       <b>-noemailDN</b>
           The DN of a certificate can contain the EMAIL field if present in the request DN, however, it is good
           policy just having the e-mail set into the altName extension of the certificate. When this option  is
           set the EMAIL field is removed from the certificate' subject and set only in the, eventually present,
           extensions. The <b>email_in_dn</b> keyword can be used in the configuration file to enable this behaviour.

       <b>-batch</b>
           This  sets  the  batch  mode.  In  this  mode no questions will be asked and all certificates will be
           certified automatically.

       <b>-extensions</b> <u>section</u>
           The section of  the  configuration  file  containing  certificate  extensions  to  be  added  when  a
           certificate is issued (defaults to <b>x509_extensions</b> unless the <b>-extfile</b> option is used).

           See the <b><a href="../man5/x509v3_config.5.html">x509v3_config</a></b>(5) manual page for details of the extension section format.

       <b>-extfile</b> <u>file</u>
           An  additional  configuration  file  to  read  certificate extensions from (using the default section
           unless the <b>-extensions</b> option is also used).

       <b>-subj</b> <u>arg</u>
           Supersedes subject name given in the request.

           The arg must be formatted  as  "/type0=value0/type1=value1/type2=...".   Special  characters  may  be
           escaped   by  "\"  (backslash),  whitespace  is  retained.   Empty  values  are  permitted,  but  the
           corresponding type will not be included in the resulting certificate.  Giving a single "/" will  lead
           to an empty sequence of RDNs (a NULL-DN).  Multi-valued RDNs can be formed by placing a "+" character
           instead  of  a  "/"  between the AttributeValueAssertions (AVAs) that specify the members of the set.
           Example:

           "/DC=org/DC=OpenSSL/DC=users/UID=123456+CN=John Doe"

       <b>-utf8</b>
           This option causes field values to be interpreted as UTF8 strings, by default they are interpreted as
           ASCII. This means that the field values,  whether  prompted  from  a  terminal  or  obtained  from  a
           configuration file, must be valid UTF8 strings.

       <b>-create_serial</b>
           If  reading serial from the text file as specified in the configuration fails, specifying this option
           creates a new random serial to be used as next serial number.  To get random serial numbers, use  the
           <b>-rand_serial</b> flag instead; this should only be used for simple error-recovery.

       <b>-rand_serial</b>
           Generate  a  large  random  number  to  use  as  the  serial  number.   This  overrides any option or
           configuration to use a serial number file.

       <b>-multivalue-rdn</b>
           This option has been deprecated and has no effect.

       <b>-rand</b> <u>files</u>, <b>-writerand</b> <u>file</u>
           See "Random State Options" in <b><a href="../man1/openssl.1.html">openssl</a></b>(1) for details.

       <b>-engine</b> <u>id</u>
           See "Engine Options" in <b><a href="../man1/openssl.1.html">openssl</a></b>(1).  This option is deprecated.

       <b>-provider</b> <u>name</u>
       <b>-provider-path</b> <u>path</u>
       <b>-propquery</b> <u>propq</u>
           See "Provider Options" in <b><a href="../man1/openssl.1.html">openssl</a></b>(1), <b><a href="../man7/provider.7.html">provider</a></b>(7), and <b><a href="../man7/property.7.html">property</a></b>(7).

</pre><h4><b>CRL</b> <b>OPTIONS</b></h4><pre>
       <b>-gencrl</b>
           This option generates a CRL based on information in the index file.

       <b>-crl_lastupdate</b> <u>time</u>
           Allows the value of the CRL's lastUpdate field to be explicitly set; if this option is  not  present,
           the  current  time  is  used.  Accepts  times  in  YYMMDDHHMMSSZ  format (the same as an ASN1 UTCTime
           structure) or YYYYMMDDHHMMSSZ format (the same as an ASN1 GeneralizedTime structure).

       <b>-crl_nextupdate</b> <u>time</u>
           Allows the value of the CRL's nextUpdate field to be explicitly set; if this option is  present,  any
           values  given  for  <b>-crldays</b>, <b>-crlhours</b> and <b>-crlsec</b> are ignored. Accepts times in the same formats as
           <b>-crl_lastupdate</b>.

       <b>-crldays</b> <u>num</u>
           The number of days before the next CRL is due. That is  the  days  from  now  to  place  in  the  CRL
           nextUpdate field.

       <b>-crlhours</b> <u>num</u>
           The number of hours before the next CRL is due.

       <b>-crlsec</b> <u>num</u>
           The number of seconds before the next CRL is due.

       <b>-revoke</b> <u>filename</u>
           A filename containing a certificate to revoke.

       <b>-valid</b> <u>filename</u>
           A filename containing a certificate to add a Valid certificate entry.

       <b>-status</b> <u>serial</u>
           Displays the revocation status of the certificate with the specified serial number and exits.

       <b>-updatedb</b>
           Updates the database index to purge expired certificates.

       <b>-crl_reason</b> <u>reason</u>
           Revocation   reason,   where   <u>reason</u>   is   one   of:   <b>unspecified</b>,   <b>keyCompromise</b>,  <b>CACompromise</b>,
           <b>affiliationChanged</b>, <b>superseded</b>, <b>cessationOfOperation</b>, <b>certificateHold</b> or <b>removeFromCRL</b>. The  matching
           of <u>reason</u> is case insensitive. Setting any revocation reason will make the CRL v2.

           In  practice <b>removeFromCRL</b> is not particularly useful because it is only used in delta CRLs which are
           not currently implemented.

       <b>-crl_hold</b> <u>instruction</u>
           This sets the CRL revocation reason code to <b>certificateHold</b> and the hold instruction  to  <u>instruction</u>
           which  must  be  an  OID.  Although any OID can be used only <b>holdInstructionNone</b> (the use of which is
           discouraged by RFC2459) <b>holdInstructionCallIssuer</b> or <b>holdInstructionReject</b> will normally be used.

       <b>-crl_compromise</b> <u>time</u>
           This sets the revocation reason to <b>keyCompromise</b> and the compromise time to <u>time</u>. <u>time</u> should  be  in
           GeneralizedTime format that is <u>YYYYMMDDHHMMSSZ</u>.

       <b>-crl_CA_compromise</b> <u>time</u>
           This is the same as <b>crl_compromise</b> except the revocation reason is set to <b>CACompromise</b>.

       <b>-crlexts</b> <u>section</u>
           The  section  of  the  configuration  file  containing CRL extensions to include. If no CRL extension
           section is present then a V1 CRL is created, if the CRL extension section is present (even if  it  is
           empty)  then  a  V2 CRL is created. The CRL extensions specified are CRL extensions and <b>not</b> CRL entry
           extensions.  It should be noted that some software (for example Netscape) can't handle V2  CRLs.  See
           <b><a href="../man5/x509v3_config.5.html">x509v3_config</a></b>(5) manual page for details of the extension section format.

</pre><h4><b>CONFIGURATION</b> <b>FILE</b> <b>OPTIONS</b></h4><pre>
       The  section  of  the  configuration file containing options for this command is found as follows: If the
       <b>-name</b> command line option is used, then it names the section to be used. Otherwise the section to be used
       must be named in the <b>default_ca</b> option of the <b>ca</b> section of the configuration file  (or  in  the  default
       section  of the configuration file). Besides <b>default_ca</b>, the following options are read directly from the
       <b>ca</b> section:
        RANDFILE
        preserve
        msie_hack With the exception of <b>RANDFILE</b>, this is probably a bug and may change in future releases.

       Many of the configuration file options are identical to command line options. Where the option is present
       in the configuration file and the command line the command  line  value  is  used.  Where  an  option  is
       described  as  mandatory then it must be present in the configuration file or the command line equivalent
       (if any) used.

       <b>oid_file</b>
           This specifies a file containing additional <b>OBJECT</b> <b>IDENTIFIERS</b>.  Each line of the file should consist
           of the numerical form of the object identifier followed by whitespace then the short name followed by
           whitespace and finally the long name.

       <b>oid_section</b>
           This specifies a section in the configuration file containing extra  object  identifiers.  Each  line
           should  consist  of the short name of the object identifier followed by <b>=</b> and the numerical form. The
           short and long names are the same when this option is used.

       <b>new_certs_dir</b>
           The same as the <b>-outdir</b> command line option. It specifies the directory where new  certificates  will
           be placed. Mandatory.

       <b>certificate</b>
           The same as <b>-cert</b>. It gives the file containing the CA certificate. Mandatory.

       <b>private_key</b>
           Same as the <b>-keyfile</b> option. The file containing the CA private key. Mandatory.

       <b>RANDFILE</b>
           At  startup the specified file is loaded into the random number generator, and at exit 256 bytes will
           be written to it. (Note: Using a RANDFILE is not necessary anymore, see the "HISTORY" section.

       <b>default_days</b>
           The same as the <b>-days</b> option. The number of days from today to certify a certificate for.

       <b>default_startdate</b>
           The same as the <b>-startdate</b> option. The start date to certify  a  certificate  for.  If  not  set  the
           current time is used.

       <b>default_enddate</b>
           The same as the <b>-enddate</b> option. Either this option or <b>default_days</b> (or the command line equivalents)
           must be present.

       <b>default_crl_hours</b> <b>default_crl_days</b>
           The  same  as the <b>-crlhours</b> and the <b>-crldays</b> options. These will only be used if neither command line
           option is present. At least one of these must be present to generate a CRL.

       <b>default_md</b>
           The same as the <b>-md</b> option. Mandatory except where the signing algorithm does not  require  a  digest
           (i.e. Ed25519 and Ed448).

       <b>database</b>
           The  text  database  file  to  use.  Mandatory. This file must be present though initially it will be
           empty.

       <b>unique_subject</b>
           If the value <b>yes</b> is given, the valid certificate entries in the database must have  unique  subjects.
           if  the  value  <b>no</b>  is given, several valid certificate entries may have the exact same subject.  The
           default value is <b>yes</b>, to be compatible with older (pre 0.9.8) versions of OpenSSL.  However, to  make
           CA  certificate  roll-over  easier, it's recommended to use the value <b>no</b>, especially if combined with
           the <b>-selfsign</b> command line option.

           Note that it is valid in some circumstances for certificates to be created without  any  subject.  In
           the case where there are multiple certificates without subjects this does not count as a duplicate.

       <b>serial</b>
           A  text  file  containing the next serial number to use in hex. Mandatory.  This file must be present
           and contain a valid serial number.

       <b>crlnumber</b>
           A text file containing the next CRL number to use in hex. The crl number will be inserted in the CRLs
           only if this file exists. If this file is present, it must contain a valid CRL number.

       <b>x509_extensions</b>
           A fallback to the <b>-extensions</b> option.

       <b>crl_extensions</b>
           A fallback to the <b>-crlexts</b> option.

       <b>preserve</b>
           The same as <b>-preserveDN</b>

       <b>email_in_dn</b>
           The same as <b>-noemailDN</b>. If you want the EMAIL field to be removed from  the  DN  of  the  certificate
           simply  set  this  to  'no'.  If  not  present  the  default  is  to allow for the EMAIL filed in the
           certificate's DN.

       <b>msie_hack</b>
           The same as <b>-msie_hack</b>

       <b>policy</b>
           The same as <b>-policy</b>. Mandatory. See the <b>POLICY</b> <b>FORMAT</b> section for more information.

       <b>name_opt</b>, <b>cert_opt</b>
           These options allow the format used to display the  certificate  details  when  asking  the  user  to
           confirm  signing.  All the options supported by the <b>x509</b> utilities <b>-nameopt</b> and <b>-certopt</b> switches can
           be used here, except the <b>no_signame</b> and <b>no_sigdump</b> are permanently set and cannot be  disabled  (this
           is  because the certificate signature cannot be displayed because the certificate has not been signed
           at this point).

           For convenience the values <b>ca_default</b> are accepted by both to produce a reasonable output.

           If neither option is present the format used in earlier versions of OpenSSL is used. Use of  the  old
           format  is  <b>strongly</b>  discouraged  because  it  only displays fields mentioned in the <b>policy</b> section,
           mishandles multicharacter string types and does not display extensions.

       <b>copy_extensions</b>
           Determines how extensions in certificate requests should be handled.  If set to <b>none</b> or  this  option
           is not present then extensions are ignored and not copied to the certificate. If set to <b>copy</b> then any
           extensions  present in the request that are not already present are copied to the certificate. If set
           to <b>copyall</b> then all extensions in the request are copied to the  certificate:  if  the  extension  is
           already  present  in  the certificate it is deleted first. See the <b>WARNINGS</b> section before using this
           option.

           The main use of this option is to allow a certificate request to supply values for certain extensions
           such as subjectAltName.

</pre><h4><b>POLICY</b> <b>FORMAT</b></h4><pre>
       The policy section consists of a set of variables corresponding to certificate DN fields. If the value is
       "match" then the field value must match the same field in the CA certificate. If the value is  "supplied"
       then  it  must be present. If the value is "optional" then it may be present. Any fields not mentioned in
       the policy section are silently deleted, unless the <b>-preserveDN</b> option is set but this  can  be  regarded
       more of a quirk than intended behaviour.

</pre><h4><b>SPKAC</b> <b>FORMAT</b></h4><pre>
       The  input  to  the  <b>-spkac</b>  command line option is a Netscape signed public key and challenge. This will
       usually come from the <b>KEYGEN</b> tag in an HTML form to create a new private key.  It is however possible  to
       create SPKACs using <b><a href="../man1/openssl-spkac.1.html">openssl-spkac</a></b>(1).

       The  file  should  contain  the  variable  SPKAC  set  to the value of the SPKAC and also the required DN
       components as name value pairs.  If you need to include the same component twice then it can be  preceded
       by a number and a '.'.

       When  processing  SPKAC  format, the output is DER if the <b>-out</b> flag is used, but PEM format if sending to
       stdout or the <b>-outdir</b> flag is used.

</pre><h4><b>EXAMPLES</b></h4><pre>
       Note: these examples assume that the directory structure this command assumes is already set up  and  the
       relevant  files  already  exist.  This  usually  involves  creating a CA certificate and private key with
       <b><a href="../man1/openssl-req.1.html">openssl-req</a></b>(1), a serial number  file  and  an  empty  index  file  and  placing  them  in  the  relevant
       directories.

       To  use  the  sample  configuration file below the directories <u>demoCA</u>, <u>demoCA/private</u> and <u>demoCA/newcerts</u>
       would be created. The CA certificate would  be  copied  to  <u>demoCA/cacert.pem</u>  and  its  private  key  to
       <u>demoCA/private/cakey.pem</u>. A file <u>demoCA/serial</u> would be created containing for example "01" and the empty
       index file <u>demoCA/index.txt</u>.

       Sign a certificate request:

        openssl ca -in req.pem -out newcert.pem

       Sign an SM2 certificate request:

        openssl ca -in sm2.csr -out sm2.crt -md sm3 \
                -sigopt "distid:1234567812345678" \
                -vfyopt "distid:1234567812345678"

       Sign a certificate request, using CA extensions:

        openssl ca -in req.pem -extensions v3_ca -out newcert.pem

       Generate a CRL

        openssl ca -gencrl -out crl.pem

       Sign several requests:

        openssl ca -infiles req1.pem req2.pem req3.pem

       Certify a Netscape SPKAC:

        openssl ca -spkac spkac.txt

       A sample SPKAC file (the SPKAC line has been truncated for clarity):

        SPKAC=MIG0MGAwXDANBgkqhkiG9w0BAQEFAANLADBIAkEAn7PDhCeV/xIxUg8V70YRxK2A5
        CN=Steve Test
        emailAddress=<a href="mailto:steve@openssl.org">steve@openssl.org</a>
        0.OU=OpenSSL Group
        1.OU=Another Group

       A sample configuration file with the relevant sections for this command:

        [ ca ]
        default_ca      = CA_default            # The default ca section

        [ CA_default ]

        dir            = ./demoCA              # top dir
        database       = $dir/index.txt        # index file.
        new_certs_dir  = $dir/newcerts         # new certs dir

        certificate    = $dir/cacert.pem       # The CA cert
        serial         = $dir/serial           # serial no file
        #rand_serial    = yes                  # for random serial#'s
        private_key    = $dir/private/cakey.pem# CA private key

        default_days   = 365                   # how long to certify for
        default_crl_days= 30                   # how long before next CRL
        default_md     = sha256                # md to use

        policy         = policy_any            # default policy
        email_in_dn    = no                    # Don't add the email into cert DN

        name_opt       = ca_default            # Subject name display option
        cert_opt       = ca_default            # Certificate display option
        copy_extensions = none                 # Don't copy extensions from request

        [ policy_any ]
        countryName            = supplied
        stateOrProvinceName    = optional
        organizationName       = optional
        organizationalUnitName = optional
        commonName             = supplied
        emailAddress           = optional

</pre><h4><b>FILES</b></h4><pre>
       Note:  the  location  of all files can change either by compile time options, configuration file entries,
       environment variables or command line options.  The values below reflect the default values.

        /usr/local/ssl/lib/openssl.cnf - master configuration file
        ./demoCA                       - main CA directory
        ./demoCA/cacert.pem            - CA certificate
        ./demoCA/private/cakey.pem     - CA private key
        ./demoCA/serial                - CA serial number file
        ./demoCA/serial.old            - CA serial number backup file
        ./demoCA/index.txt             - CA text database file
        ./demoCA/index.txt.old         - CA text database backup file
        ./demoCA/certs                 - certificate output file

</pre><h4><b>RESTRICTIONS</b></h4><pre>
       The text database index file is a critical part of the process and if corrupted it can  be  difficult  to
       fix.  It  is  theoretically  possible  to  rebuild  the index file from all the issued certificates and a
       current CRL: however there is no option to do this.

       V2 CRL features like delta CRLs are not currently supported.

       Although several requests can be input and handled at once it is only possible to include  one  SPKAC  or
       self-signed certificate.

</pre><h4><b>BUGS</b></h4><pre>
       This command is quirky and at times downright unfriendly.

       The  use  of an in-memory text database can cause problems when large numbers of certificates are present
       because, as the name implies the database has to be kept in memory.

       This command really needs rewriting or  the  required  functionality  exposed  at  either  a  command  or
       interface  level  so that a more user-friendly replacement could handle things properly. The script <b>CA.pl</b>
       helps a little but not very much.

       Any fields in a request that are not present in a policy are silently deleted. This does  not  happen  if
       the  <b>-preserveDN</b> option is used. To enforce the absence of the EMAIL field within the DN, as suggested by
       RFCs, regardless the contents of the request' subject the <b>-noemailDN</b> option can be  used.  The  behaviour
       should be more friendly and configurable.

       Canceling some commands by refusing to certify a certificate can create an empty file.

</pre><h4><b>WARNINGS</b></h4><pre>
       This  command  was  originally  meant  as an example of how to do things in a CA.  Its code does not have
       production quality.  It was not supposed to be used as a full blown CA itself, nevertheless  some  people
       are  using  it  for  this  purpose  at least internally.  When doing so, specific care should be taken to
       properly secure the private key(s) used for signing certificates.  It is advisable  to  keep  them  in  a
       secure HW storage such as a smart card or HSM and access them via a suitable engine or crypto provider.

       This  command  is effectively a single user command: no locking is done on the various files and attempts
       to run more than one <b>openssl</b> <b>ca</b> command on the same database can have unpredictable results.

       The <b>copy_extensions</b> option should be used with caution. If care is not taken then it can  be  a  security
       risk.  For  example  if  a certificate request contains a basicConstraints extension with CA:TRUE and the
       <b>copy_extensions</b> value is set to <b>copyall</b> and the user does not spot this when the certificate is displayed
       then this will hand the requester a valid CA certificate.  This  situation  can  be  avoided  by  setting
       <b>copy_extensions</b>  to <b>copy</b> and including basicConstraints with CA:FALSE in the configuration file.  Then if
       the request contains a basicConstraints extension it will be ignored.

       It is advisable to also include values for other  extensions  such  as  <b>keyUsage</b>  to  prevent  a  request
       supplying its own values.

       Additional  restrictions  can  be placed on the CA certificate itself.  For example if the CA certificate
       has:

        basicConstraints = CA:TRUE, pathlen:0

       then even if a certificate is issued with CA:TRUE it will not be valid.

</pre><h4><b>HISTORY</b></h4><pre>
       Since OpenSSL 1.1.1, the program follows RFC5280. Specifically, certificate validity period (specified by
       any  of  <b>-startdate</b>,  <b>-enddate</b>  and  <b>-days</b>)  and  CRL  last/next  update  time  (specified  by   any   of
       <b>-crl_lastupdate</b>,  <b>-crl_nextupdate</b>,  <b>-crldays</b>,  <b>-crlhours</b>  and  <b>-crlsec</b>) will be encoded as UTCTime if the
       dates are earlier than year 2049 (included), and as GeneralizedTime if the dates  are  in  year  2050  or
       later.

       OpenSSL  1.1.1  introduced  a  new  random generator (CSPRNG) with an improved seeding mechanism. The new
       seeding mechanism makes it unnecessary to define a RANDFILE for saving  and  restoring  randomness.  This
       option is retained mainly for compatibility reasons.

       The <b>-section</b> option was added in OpenSSL 3.0.0.

       The <b>-multivalue-rdn</b> option has become obsolete in OpenSSL 3.0.0 and has no effect.

       The <b>-engine</b> option was deprecated in OpenSSL 3.0.

       Since  OpenSSL  3.2,  generated  certificates  bear  X.509  version  3, and key identifier extensions are
       included by default.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man1/openssl.1.html">openssl</a></b>(1), <b><a href="../man1/openssl-req.1.html">openssl-req</a></b>(1), <b><a href="../man1/openssl-spkac.1.html">openssl-spkac</a></b>(1), <b><a href="../man1/openssl-x509.1.html">openssl-x509</a></b>(1), <b><a href="../man1/CA.pl.1.html">CA.pl</a></b>(1), <b><a href="../man5/config.5.html">config</a></b>(5), <b><a href="../man5/x509v3_config.5.html">x509v3_config</a></b>(5)

</pre><h4><b>COPYRIGHT</b></h4><pre>
       Copyright 2000-2024 The OpenSSL Project Authors. All Rights Reserved.

       Licensed under the Apache License 2.0 (the "License").  You may not use this file  except  in  compliance
       with  the  License.   You  can  obtain  a  copy  in  the  file  LICENSE  in the source distribution or at
       &lt;https://www.openssl.org/source/license.html&gt;.

3.4.1                                              2025-04-03                                   <u><a href="../man1SSL/OPENSSL-CA.1SSL.html">OPENSSL-CA</a></u>(1SSL)
</pre>
 </div>
</div></section>
</div>
</body>
</html>