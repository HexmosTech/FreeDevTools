<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>This article applies to: ✔️ .NET Core 3.1 SDK and later versions</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/dotnet-host-9.0">dotnet-host-9.0_9.0.7-0ubuntu1~25.04.1_amd64</a> <br><br><pre>
</pre><h4><b>dotnet</b> <b>publish</b></h4><pre>
       <b>This</b> <b>article</b> <b>applies</b> <b>to:</b> ✔️ .NET Core 3.1 SDK and later versions

</pre><h4><b>NAME</b></h4><pre>
       dotnet-publish  -  Publishes the application and its dependencies to a folder for deployment to a hosting
       system.

</pre><h4><b>SYNOPSIS</b></h4><pre>
              dotnet publish [&lt;PROJECT&gt;|&lt;SOLUTION&gt;] [-a|--arch &lt;ARCHITECTURE&gt;]
                  [--artifacts-path &lt;ARTIFACTS_DIR&gt;]
                  [-c|--configuration &lt;CONFIGURATION&gt;] [--disable-build-servers]
                  [-f|--framework &lt;FRAMEWORK&gt;] [--force] [--interactive]
                  [--manifest &lt;PATH_TO_MANIFEST_FILE&gt;] [--no-build] [--no-dependencies]
                  [--no-restore] [--nologo] [-o|--output &lt;OUTPUT_DIRECTORY&gt;]
                  [--os &lt;OS&gt;] [-r|--runtime &lt;RUNTIME_IDENTIFIER&gt;]
                  [--sc|--self-contained [true|false]] [--no-self-contained]
                  [-s|--source &lt;SOURCE&gt;] [--tl:[auto|on|off]]
                  [--use-current-runtime, --ucr [true|false]]
                  [-v|--verbosity &lt;LEVEL&gt;] [--version-suffix &lt;VERSION_SUFFIX&gt;]

              dotnet publish -h|--help

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>dotnet</b> <b>publish</b> compiles the application, reads through its dependencies specified in  the  project  file,
       and publishes the resulting set of files to a directory.  The output includes the following assets:

       • Intermediate Language (IL) code in an assembly with a <u>dll</u> extension.

       • A <u>.deps.json</u> file that includes all of the dependencies of the project.

       • A  <u>.runtimeconfig.json</u>  file that specifies the shared runtime that the application expects, as well as
         other configuration options for the runtime (for example, garbage collection type).

       • The application’s dependencies, which are copied from the NuGet cache into the output folder.

       The <b>dotnet</b> <b>publish</b> command’s output is ready for deployment to a hosting system (for example,  a  server,
       PC,  Mac,  laptop)  for execution.  It’s the only officially supported way to prepare the application for
       deployment.  Depending on the type of deployment that the project specifies, the hosting  system  may  or
       may  not  have the .NET shared runtime installed on it.  For more information, see Publish .NET apps with
       the .NET CLI.

   <b>Implicit</b> <b>restore</b>
       You don’t have to run <b>dotnet</b> <b>restore</b> because it’s run implicitly by all commands that require  a  restore
       to occur, such as <b>dotnet</b> <b>new</b>, <b>dotnet</b> <b>build</b>, <b>dotnet</b> <b>run</b>, <b>dotnet</b> <b>test</b>, <b>dotnet</b> <b>publish</b>, and <b>dotnet</b> <b>pack</b>.  To
       disable implicit restore, use the <b>--no-restore</b> option.

       The  <b>dotnet</b>  <b>restore</b> command is still useful in certain scenarios where explicitly restoring makes sense,
       such as continuous integration builds in Azure DevOps Services or in build systems that need to explicit‐
       ly control when the restore occurs.

       For information about how to manage NuGet feeds, see the <b>dotnet</b> <b>restore</b> documentation.

   <b>MSBuild</b>
       The <b>dotnet</b> <b>publish</b> command calls MSBuild, which invokes the <b>Publish</b> target.  If the <b>IsPublishable</b> proper‐
       ty is set to <b>false</b> for a particular project, the <b>Publish</b> target can’t be invoked, and the <b>dotnet</b>  <b>publish</b>
       command only runs the implicit dotnet restore on the project.

       Any parameters passed to <b>dotnet</b> <b>publish</b> are passed to MSBuild.  The <b>-c</b> and <b>-o</b> parameters map to MSBuild’s
       <b>Configuration</b> and <b>PublishDir</b> properties, respectively.

       The  <b>dotnet</b> <b>publish</b> command accepts MSBuild options, such as <b>-p</b> for setting properties and <b>-l</b> to define a
       logger.  For example, you can set an MSBuild property by using the format: <b>-p:&lt;NAME&gt;=&lt;VALUE&gt;</b>.

   <b>.pubxml</b> <b>files</b>
       You can also set publish-related properties by referring to a <u>.pubxml</u> file.  For example:

              dotnet publish -p:PublishProfile=FolderProfile

       The preceding example uses the <u>FolderProfile.pubxml</u> file that is found  in  the  <u>&lt;project_folder&gt;/Proper‐</u>
       <u>ties/PublishProfiles</u>  folder.   If  you specify a path and file extension when setting the <b>PublishProfile</b>
       property, they’re ignored.  MSBuild by default looks in the <u>Properties/PublishProfiles</u> folder and assumes
       the <u>pubxml</u> file extension.  To specify the path and filename including extension, set the <b>PublishProfile‐</b>
       <b>FullPath</b> property instead of the <b>PublishProfile</b> property.

       In the <u>.pubxml</u> file:

       • <b>PublishUrl</b> is used by Visual Studio to denote the Publish target.

       • <b>PublishDir</b> is used by the CLI to denote the Publish target.

       If you want the scenario to work in all places, you can initialize both these properties to the same val‐
       ue in the <u>.pubxml</u> file.  When GitHub issue dotnet/sdk#20931  (https://github.com/dotnet/sdk/issues/20931)
       is resolved, only one of these properties will need to be set.

       Some  properties  in the <u>.pubxml</u> file are honored only by Visual Studio and have no effect on <b>dotnet</b> <b>pub‐</b>
       <b>lish</b>.  We’re working to bring the CLI more into alignment with Visual Studio’s behavior.  But some  prop‐
       erties will never be used by the CLI.  The CLI and Visual Studio both do the packaging aspect of publish‐
       ing,  and dotnet/sdk#29817 (https://github.com/dotnet/sdk/pull/29817) plans to add support for more prop‐
       erties related to that.  But the CLI doesn’t do the deployment automation aspect of publishing, and prop‐
       erties related to that aren’t supported.  The most notable <u>.pubxml</u> properties that  aren’t  supported  by
       <b>dotnet</b> <b>publish</b> are the following ones that impact the build:

       • <b>LastUsedBuildConfiguration</b>

       • <b>Configuration</b>

       • <b>Platform</b>

       • <b>LastUsedPlatform</b>

       • <b>TargetFramework</b>

       • <b>TargetFrameworks</b>

       • <b>RuntimeIdentifier</b>

       • <b>RuntimeIdentifiers</b>

   <b>MSBuild</b> <b>properties</b>
       The following MSBuild properties change the output of <b>dotnet</b> <b>publish</b>.

       • <b>PublishReadyToRun</b>

         Compiles  application assemblies as ReadyToRun (R2R) format.  R2R is a form of ahead-of-time (AOT) com‐
         pilation.  For more information, see ReadyToRun images.

         To see warnings about missing dependencies that could cause runtime  failures,  use  <b>PublishReadyToRun‐</b>
         <b>ShowWarnings=true</b>.

         We recommend that you specify <b>PublishReadyToRun</b> in a publish profile rather than on the command line.

       • <b>PublishSingleFile</b>

         Packages  the  app into a platform-specific single-file executable.  For more information about single-
         file  publishing,  see  the  single-file   bundler   design   document   (https://github.com/dotnet/de‐
         signs/blob/main/accepted/2020/single-file/design.md).

         We recommend that you specify this option in the project file rather than on the command line.

       • <b>PublishTrimmed</b>

         Trims  unused  libraries  to reduce the deployment size of an app when publishing a self-contained exe‐
         cutable.  For more information, see Trim self-contained deployments and executables.   Available  since
         .NET 6 SDK.

         We recommend that you specify this option in the project file rather than on the command line.

       For more information, see the following resources:

       • MSBuild command-line reference

       • Visual Studio publish profiles (.pubxml) for ASP.NET Core app deployment

       • dotnet msbuild

   <b>Workload</b> <b>manifest</b> <b>downloads</b>
       When  you run this command, it initiates an asynchronous background download of advertising manifests for
       workloads.  If the download is still running when this command finishes, the download  is  stopped.   For
       more information, see Advertising manifests.

</pre><h4><b>ARGUMENTS</b></h4><pre>
       • <b>PROJECT|SOLUTION</b>

         The project or solution to publish.

         • <b>PROJECT</b> is the path and filename of a C#, F#, or Visual Basic project file, or the path to a directo‐
           ry  that  contains a C#, F#, or Visual Basic project file.  If the directory is not specified, it de‐
           faults to the current directory.

         • <b>SOLUTION</b> is the path and filename of a solution file (<u>.sln</u> extension), or the  path  to  a  directory
           that  contains a solution file.  If the directory is not specified, it defaults to the current direc‐
           tory.

</pre><h4><b>OPTIONS</b></h4><pre>
       • <b>-a|--arch</b> <b>&lt;ARCHITECTURE&gt;</b>

         Specifies the target architecture.  This is a shorthand  syntax  for  setting  the  Runtime  Identifier
         (RID),  where  the provided value is combined with the default RID.  For example, on a <b>win-x64</b> machine,
         specifying <b>--arch</b> <b>x86</b> sets the RID to <b>win-x86</b>.  If you use this option, don’t use the <b>-r|--runtime</b>  op‐
         tion.  Available since .NET 6 Preview 7.

       • <b>--artifacts-path</b> <b>&lt;ARTIFACTS_DIR&gt;</b>

         All  build output files from the executed command will go in subfolders under the specified path, sepa‐
         rated by project.  For more information see Artifacts Output Layout.  Available since .NET 8 SDK.

       • <b>-c|--configuration</b> <b>&lt;CONFIGURATION&gt;</b>

         Defines the build configuration.  If you’re developing with the .NET 8 SDK or a later version, the com‐
         mand uses the <b>Release</b> configuration by default for projects whose TargetFramework is set to <b>net8.0</b> or a
         later version.  The default build configuration is <b>Debug</b> for earlier versions of the SDK and for earli‐
         er target frameworks.  You can override the default in project settings or by using this  option.   For
         more  information,  see `dotnet publish' uses Release configuration and `dotnet pack' uses Release con‐
         figuration.

       • <b>--disable-build-servers</b>

         Forces the command to ignore any persistent build servers.  This option provides a  consistent  way  to
         disable  all  use  of  build  caching, which forces a build from scratch.  A build that doesn’t rely on
         caches is useful when the caches might be corrupted or incorrect for some reason.  Available since .NET
         7 SDK.

       • <b>-f|--framework</b> <b>&lt;FRAMEWORK&gt;</b>

         Publishes the application for the specified target framework.  You must specify the target framework in
         the project file.

       • <b>--force</b>

         Forces all dependencies to be resolved even if the last restore was successful.  Specifying  this  flag
         is the same as deleting the <u>project.assets.json</u> file.

       • <b>-?|-h|--help</b>

         Prints out a description of how to use the command.

       • <b>--interactive</b>

         Allows the command to stop and wait for user input or action.  For example, to complete authentication.
         Available since .NET Core 3.0 SDK.

       • <b>--manifest</b> <b>&lt;PATH_TO_MANIFEST_FILE&gt;</b>

         Specifies  one  or  several target manifests to use to trim the set of packages published with the app.
         The manifest file is part of the output of the <b>dotnet</b> <b>store</b> command.  To  specify  multiple  manifests,
         add a <b>--manifest</b> option for each manifest.

       • <b>--no-build</b>

         Doesn’t build the project before publishing.  It also implicitly sets the <b>--no-restore</b> flag.

       • <b>--no-dependencies</b>

         Ignores project-to-project references and only restores the root project.

       • <b>--nologo</b>

         Doesn’t display the startup banner or the copyright message.

       • <b>--no-restore</b>

         Doesn’t execute an implicit restore when running the command.

       • <b>-o|--output</b> <b>&lt;OUTPUT_DIRECTORY&gt;</b>

         Specifies the path for the output directory.

         If  not  specified, it defaults to <u>[project_file_folder]<a href="file:/bin/">/bin/</a>[configuration]/[framework]/publish/</u> for a
         framework-dependent  executable  and  cross-platform  binaries.   It  defaults  to  <u>[project_file_fold‐</u>
         <u>er]<a href="file:/bin/">/bin/</a>[configuration]/[framework]/[runtime]/publish/</u> for a self-contained executable.

         In a web project, if the output folder is in the project folder, successive <b>dotnet</b> <b>publish</b> commands re‐
         sult in nested output folders.  For example, if the project folder is <u>myproject</u>, and the publish output
         folder  is  <u>myproject/publish</u>, and you run <b>dotnet</b> <b>publish</b> twice, the second run puts content files such
         as <u>.config</u> and <u>.json</u> files in <u>myproject/publish/publish</u>.  To avoid nesting publish folders,  specify  a
         publish  folder  that  isn’t  <b>directly</b> under the project folder, or exclude the publish folder from the
         project.  To exclude a publish folder named <u>publishoutput</u>, add the following element to a <b>PropertyGroup</b>
         element in the <u>.csproj</u> file:

                &lt;DefaultItemExcludes&gt;$(DefaultItemExcludes);publishoutput**&lt;/DefaultItemExcludes&gt;

         • .NET 7.0.200 SDK and later

           If you specify the <b>--output</b> option when running this command on a solution, the CLI will emit a warn‐
           ing (an error in 7.0.200) due to the unclear semantics of the output path.  The  <b>--output</b>  option  is
           disallowed  because  all  outputs of all built projects would be copied into the specified directory,
           which isn’t compatible with multi-targeted projects, as well as projects that have different versions
           of direct and transitive dependencies.  For more information, see Solution-level <b>--output</b>  option  no
           longer valid for build-related commands.

         • .NET Core 3.x SDK and later

           If  you specify a relative path when publishing a project, the generated output directory is relative
           to the current working directory, not to the project file location.

           If you specify a relative path when publishing a solution, all output for all projects goes into  the
           specified  folder  relative  to the current working directory.  To make publish output go to separate
           folders for each project, specify a relative path by using the msbuild <b>PublishDir</b> property instead of
           the <b>--output</b> option.  For example, <b>dotnet</b> <b>publish</b> <b>-p:PublishDir=.\publish</b> sends  publish  output  for
           each project to a <b>publish</b> folder under the folder that contains the project file.

         • .NET Core 2.x SDK

           If  you specify a relative path when publishing a project, the generated output directory is relative
           to the project file location, not to the current working directory.

           If you specify a relative path when publishing a solution, each project’s output goes into a separate
           folder relative to the project file location.  If you specify an absolute path when publishing a  so‐
           lution, all publish output for all projects goes into the specified folder.

       • <b>--os</b> <b>&lt;OS&gt;</b>

         Specifies the target operating system (OS).  This is a shorthand syntax for setting the Runtime Identi‐
         fier  (RID),  where the provided value is combined with the default RID.  For example, on a <b>win-x64</b> ma‐
         chine, specifying <b>--os</b> <b>linux</b> sets the RID to  <b>linux-x64</b>.   If  you  use  this  option,  don’t  use  the
         <b>-r|--runtime</b> option.  Available since .NET 6.

       • <b>--sc|--self-contained</b> <b>[true|false]</b>

         Publishes  the  .NET  runtime  with your application so the runtime doesn’t need to be installed on the
         target machine.  Default is <b>true</b> if a runtime identifier is specified and the project is an  executable
         project  (not  a  library  project).  For more information, see .NET application publishing and Publish
         .NET apps with the .NET CLI.

         If this option is used without specifying <b>true</b> or <b>false</b>, the default is <b>true</b>.  In that case, don’t  put
         the  solution or project argument immediately after <b>--self-contained</b>, because <b>true</b> or <b>false</b> is expected
         in that position.

       • <b>--no-self-contained</b>

         Equivalent to <b>--self-contained</b> <b>false</b>.

       • <b>--source</b> <b>&lt;SOURCE&gt;</b>

         The URI of the NuGet package source to use during the restore operation.

       • <b>-r|--runtime</b> <b>&lt;RUNTIME_IDENTIFIER&gt;</b>

         Publishes the application for a given runtime.  For a list of Runtime Identifiers (RIDs), see  the  RID
         catalog.   For  more  information,  see .NET application publishing and Publish .NET apps with the .NET
         CLI.  If you use this option, use <b>--self-contained</b> or <b>--no-self-contained</b> also.

       • <b>--tl:[auto|on|off]</b>

         Specifies whether the <u>terminal</u> <u>logger</u> should be used for the build output.  The default is <b>auto</b>,  which
         first  verifies  the environment before enabling terminal logging.  The environment check verifies that
         the terminal is capable of using modern output features and isn’t using a  redirected  standard  output
         before  enabling  the  new  logger.   <b>on</b> skips the environment check and enables terminal logging.  <b>off</b>
         skips the environment check and uses the default console logger.

         The terminal logger shows you the restore phase followed by the build phase.  During  each  phase,  the
         currently building projects appear at the bottom of the terminal.  Each project that’s building outputs
         both  the  MSBuild  target  currently being built and the amount of time spent on that target.  You can
         search this information to learn more about the build.  When a project is finished building,  a  single
         “build completed” section is written that captures:

         • The name of the built project.

         • The target framework (if multi-targeted).

         • The status of that build.

         • The primary output of that build (which is hyperlinked).

         • Any diagnostics generated for that project.

         This option is available starting in .NET 8.

       • <b>--use-current-runtime,</b> <b>--ucr</b> <b>[true|false]</b>

         Sets  the  <b>RuntimeIdentifier</b> to a platform portable <b>RuntimeIdentifier</b> based on the one of your machine.
         This happens implicitly with properties that require a <b>RuntimeIdentifier</b>, such as  <b>SelfContained</b>,  <b>Pub‐</b>
         <b>lishAot</b>,  <b>PublishSelfContained</b>,  <b>PublishSingleFile</b>,  and  <b>PublishReadyToRun</b>.  If the property is set to
         false, that implicit resolution will no longer occur.

       • <b>-v|--verbosity</b> <b>&lt;LEVEL&gt;</b>

         Sets the verbosity level of the command.  Allowed values are <b>q[uiet]</b>, <b>m[inimal]</b>, <b>n[ormal]</b>,  <b>d[etailed]</b>,
         and  <b>diag[nostic]</b>.   The  default  is  <b>minimal</b>.  For more information, see &lt;xref:Microsoft.Build.Frame‐
         work.LoggerVerbosity&gt;.

       • <b>--version-suffix</b> <b>&lt;VERSION_SUFFIX&gt;</b>

         Defines the version suffix to replace the asterisk (<b>*</b>) in the version field of the project file.

</pre><h4><b>EXAMPLES</b></h4><pre>
       • Create a framework-dependent cross-platform binary for the project in the current directory:

                dotnet publish

         Starting with .NET Core 3.0 SDK, this example also creates a  framework-dependent  executable  for  the
         current platform.

       • Create a self-contained executable for the project in the current directory, for a specific runtime:

                dotnet publish --runtime osx-x64

         The RID must be in the project file.

       • Create  a framework-dependent executable for the project in the current directory, for a specific plat‐
         form:

                dotnet publish --runtime osx-x64 --self-contained false

         The RID must be in the project file.  This example applies to .NET Core 3.0 SDK and later versions.

       • Publish the project in the current directory, for a specific runtime and target framework:

                dotnet publish --framework net8.0 --runtime osx-x64

       • Publish the specified project file:

                dotnet publish <a href="file:~/projects/app1/app1.csproj">~/projects/app1/app1.csproj</a>

       • Publish the current application but don’t restore project-to-project (P2P) references,  just  the  root
         project during the restore operation:

                dotnet publish --no-dependencies

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       • .NET application publishing overview

       • Publish .NET apps with the .NET CLI

       • Target frameworks

       • Runtime Identifier (RID) catalog

       • Containerize a .NET app with dotnet publish

       • Working with macOS Catalina Notarization

       • Directory structure of a published application

       • MSBuild command-line reference

       • Visual Studio publish profiles (.pubxml) for ASP.NET Core app deployment

       • dotnet msbuild

       • Trim self-contained deployments

                                                   2024-10-02                                  <u><a href="../man1/dotnet-publish.1.html">dotnet-publish</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>