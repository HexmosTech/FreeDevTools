<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>virt-v2v-in-place - Convert a guest to use KVM in-place</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/virt-v2v">virt-v2v_2.6.0-1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       virt-v2v-in-place - Convert a guest to use KVM in-place

</pre><h4><b>SYNOPSIS</b></h4><pre>
        virt-v2v-in-place -i disk [other -i* options]
                          [virt-customize options]
                          filename

        virt-v2v-in-place -i libvirt|libvirtxml [other -i* options]
                          [virt-customize options]
                          guest

</pre><h4><b>DESCRIPTION</b></h4><pre>
       Virt-v2v-in-place converts a single guest from a foreign hypervisor to run on KVM.  It does this
       conversion in place, modifying the original disk.

       This manual page only documents the differences between this tool and virt-v2v.  You should read
       <b><a href="../man1/virt-v2v.1.html">virt-v2v</a></b>(1) first.

   <b>Selecting</b> <b>the</b> <b>input</b> <b>disk</b>
       You normally run virt-v2v with one or more <u>-i*</u> options controlling the input mode.  Virt-v2v-in-place can
       only convert guests stored in local files.

       This command will do an in-place conversion of <u>filename.img</u>:

        virt-v2v-in-place -i disk filename.img

       If the guest has been copied to local libvirt then:

        virt-v2v-in-place -i libvirt guest

</pre><h4><b>EXAMPLES</b></h4><pre>
</pre><h4><b>OPTIONS</b></h4><pre>
       <b>--help</b>
           Display help.

       <b>-b</b> ...
       <b>--bridge</b> ...
           See <u>--network</u> below.

       <b>--block-driver</b> <b>virtio-blk</b>
       <b>--block-driver</b> <b>virtio-scsi</b>
           When  choosing  a block driver for Windows guests, prefer "virtio-blk" or "virtio-scsi".  The default
           is "virtio-blk".

           Note this has no effect for Linux guests at the moment.  That may be added in future.

       <b>--colors</b>
       <b>--colours</b>
           Use ANSI colour sequences to colourize messages.  This is the default when the output is a  tty.   If
           the  output of the program is redirected to a file, ANSI colour sequences are disabled unless you use
           this option.

       <b>--echo-keys</b>
           When prompting for keys and passphrases, virt-v2v normally turns echoing off so you cannot  see  what
           you  are  typing.   If you are not worried about Tempest attacks and there is no one else in the room
           you can specify this flag to see what you are typing.

           Note this options only applies to keys and passphrases for encrypted devices and partitions, not  for
           passwords used to connect to remote servers.

       <b>-i</b> <b>disk</b>
           Set the input method to <u>disk</u>.

           In this mode you can read a virtual machine disk image with no metadata.  virt-v2v tries to guess the
           best  default  metadata.   This  is usually adequate but you can get finer control (eg. of memory and
           vCPUs) by using <u>-i</u> <u>libvirtxml</u> instead.  Only guests that use a single disk can be imported this way.

       <b>-i</b> <b>libvirt</b>
           Set the input method to <u>libvirt</u>.  This is the default.

           In this mode you have to specify a libvirt guest name or UUID on the  command  line.   You  may  also
           specify a libvirt connection URI (see <u>-ic</u>).

       <b>-i</b> <b>libvirtxml</b>
           Set the input method to <u>libvirtxml</u>.

           In  this mode you have to pass a libvirt XML file on the command line.  This file is read in order to
           get metadata about the source guest (such as its name, amount of memory),  and  also  to  locate  the
           input disks.  See "Minimal XML for -i libvirtxml option" below.

       <b>-i</b> <b>local</b>
           This is the same as <u>-i</u> <u>disk</u>.

       <b>-ic</b> libvirtURI
           Specify a libvirt connection URI to use when reading the guest.  This is only used when <u>-i</u> <u>libvirt</u>.

           Only local libvirt connections to locally stored disks can be used.

       <b>-if</b> format
           For  <u>-i</u>  <u>disk</u>  only,  this specifies the format of the input disk image.  For other input methods you
           should specify the input format in the metadata.

       <b>-io</b> OPTION=VALUE
           Set input option(s) related to the current input mode or transport.  To display short  help  on  what
           options are available you can use:

            virt-v2v-in-place -it disk -io "?"

       <b>-ip</b> filename
           Supply  a  file  containing  a password to be used when connecting to the source.  If this is omitted
           then the input hypervisor may ask for the password interactively.  Note the file should  contain  the
           whole password, <b>without</b> <b>any</b> <b>trailing</b> <b>newline</b>, and for security the file should have mode 0600 so that
           others cannot read it.

       <b>--key</b> SELECTOR
           Specify a key for LUKS, to automatically open a LUKS device when using the inspection.

           <b>--key</b> NAME<b>:key:</b>KEY_STRING
           <b>--key</b> UUID<b>:key:</b>KEY_STRING
           <b>--key</b> <b>all:key:</b>KEY_STRING
               "NAME"  is the libguestfs device name (eg. "/dev/sda1").  "UUID" is the device UUID.  "all" means
               try the key against any encrypted device.

               Use the specified "KEY_STRING" as passphrase.

           <b>--key</b> NAME<b>:file:</b>FILENAME
           <b>--key</b> UUID<b>:file:</b>FILENAME
           <b>--key</b> <b>all:file:</b>FILENAME
               Read the passphrase from <u>FILENAME</u>.

           <b>--key</b> NAME<b>:clevis</b>
           <b>--key</b> UUID<b>:clevis</b>
           <b>--key</b> <b>all:clevis</b>
               Attempt passphrase-less unlocking for the device with Clevis, over the network.  Please refer  to
               "ENCRYPTED DISKS" in <b><a href="../man3/guestfs.3.html">guestfs</a></b>(3) for more information on network-bound disk encryption (NBDE).

               Note  that  if  any  such  option  is  present  on the command line, QEMU user networking will be
               automatically enabled for the libguestfs appliance.

       <b>--keys-from-stdin</b>
           Read key or passphrase parameters from stdin.  The default is to try to  read  passphrases  from  the
           user by opening <u>/dev/tty</u>.

           If  there  are multiple encrypted devices then you may need to supply multiple keys on stdin, one per
           line.

           Note <u>--keys-from-stdin</u> only applies to keys and passphrases for encrypted devices and partitions, not
           for passwords used to connect to remote servers.

       <b>--mac</b> aa:bb:cc:dd:ee:ff<b>:network:</b>out
       <b>--mac</b> aa:bb:cc:dd:ee:ff<b>:bridge:</b>out
           Map source NIC MAC address to a network or bridge.

           See "Networks and bridges" in <b><a href="../man1/virt-v2v.1.html">virt-v2v</a></b>(1).

       <b>--mac</b> aa:bb:cc:dd:ee:ff<b>:ip:</b>ipaddr[,gw[,len[,ns,ns,...]]]
           Force a particular interface (controlled by its MAC address) to have a static IP address after boot.

           The fields in the parameter are: "ipaddr" is the  IP  address.   "gw"  is  the  optional  gateway  IP
           address.   "len"  is  the  subnet  mask  length  (an integer).  The final parameters are zero or more
           nameserver IP addresses.

           This option can be supplied zero or more times.

           You only need to use this option for certain broken guests  such  as  Windows  which  are  unable  to
           preserve  MAC  to  static  IP address mappings automatically.  You don't need to use it if Windows is
           using DHCP.  It is currently ignored for Linux guests since they do not have this problem.

       <b>--machine-readable</b>
       <b>--machine-readable</b>=format
           This option is used to make the output more machine friendly when being  parsed  by  other  programs.
           See "Machine readable output" in <b><a href="../man1/virt-v2v.1.html">virt-v2v</a></b>(1).

       <b>-n</b> in:out
       <b>-n</b> out
       <b>--network</b> in:out
       <b>--network</b> out
       <b>-b</b> in:out
       <b>-b</b> out
       <b>--bridge</b> in:out
       <b>--bridge</b> out
           Map  network  (or  bridge)  called  "in"  to network (or bridge) called "out".  If no "in:" prefix is
           given, all other networks (or bridges) are mapped to "out".

           See "Networks and bridges" in <b><a href="../man1/virt-v2v.1.html">virt-v2v</a></b>(1).

       <b>--print-source</b>
           Print information about the source guest and stop.  This option is useful when  you  are  setting  up
           network and bridge maps.  See "Networks and bridges" in <b><a href="../man1/virt-v2v.1.html">virt-v2v</a></b>(1).

       <b>-q</b>
       <b>--quiet</b>
           This disables progress bars and other unnecessary output.

       <b>--root</b> <b>ask</b>
       <b>--root</b> <b>single</b>
       <b>--root</b> <b>first</b>
       <b>--root</b> /dev/sdX
       <b>--root</b> /dev/VG/LV
           Choose the root filesystem to be converted.

           In  the  case  where  the  virtual  machine  is  dual-boot  or  multi-boot, or where the VM has other
           filesystems that look like operating systems, this option can be used to select the  root  filesystem
           (a.k.a.  "C:"  drive  or  <u>/</u>)  of  the operating system that is to be converted.  The Windows Recovery
           Console, certain attached DVD drives, and bugs in libguestfs inspection heuristics, can make a  guest
           look like a multi-boot operating system.

           The  default  in  virt-v2v  ≤  0.7.1  was <u>--root</u> <u>single</u>, which causes virt-v2v to die if a multi-boot
           operating system is found.

           Since virt-v2v ≥ 0.7.2 the default is now <u>--root</u> <u>ask</u>: If the VM  is  found  to  be  multi-boot,  then
           virt-v2v  will  stop  and  list  the  possible  root filesystems and ask the user which to use.  This
           requires that virt-v2v is run interactively.

           <u>--root</u> <u>first</u> means to choose the first root device in the case  of  a  multi-boot  operating  system.
           Since this is a heuristic, it may sometimes choose the wrong one.

           You can also name a specific root device, eg. <u>--root</u> <u>/dev/sda2</u> would mean to use the second partition
           on  the  first  hard  drive.   If  the named root device does not exist or was not detected as a root
           device, then virt-v2v will fail.

           Note that there is a bug in grub which prevents it from successfully booting a  multiboot  system  if
           virtio  is  enabled.   Grub  is  only  able  to  boot an operating system from the first virtio disk.
           Specifically, <u><a href="file:/boot">/boot</a></u> must be on the first virtio disk, and it cannot chainload an OS which is  not  in
           the first virtio disk.

       <b>-v</b>
       <b>--verbose</b>
           Enable verbose messages for debugging.

       <b>-V</b>
       <b>--version</b>
           Display version number and exit.

       <b>--wrap</b>
           Wrap error, warning, and informative messages.  This is the default when the output is a tty.  If the
           output of the program is redirected to a file, wrapping is disabled unless you use this option.

       <b>-x</b>  Enable tracing of libguestfs API calls.

   <b>Minimal</b> <b>XML</b> <b>for</b> <b>-i</b> <b>libvirtxml</b> <b>option</b>
       When  using  the <u>-i</u> <u>libvirtxml</u> option, you have to supply some libvirt XML.  Writing this from scratch is
       hard, so the template below is helpful.

       <b>Note</b> <b>this</b> <b>should</b> <b>only</b> <b>be</b> <b>used</b> <b>for</b> <b>testing</b> <b>and/or</b> <b>where</b> <b>you</b> <b>know</b> <b>what</b> <b>you're</b> <b>doing!</b>  If you  have  libvirt
       metadata for the guest, always use that instead.

        &lt;domain type='kvm'&gt;
          &lt;name&gt; NAME &lt;/name&gt;
          &lt;memory&gt;1048576&lt;/memory&gt;
          &lt;vcpu&gt;2&lt;/vcpu&gt;
          &lt;os&gt;
            &lt;type&gt;hvm&lt;/type&gt;
            &lt;boot dev='hd'/&gt;
          &lt;/os&gt;
          &lt;features&gt;
            &lt;acpi/&gt;
            &lt;apic/&gt;
            &lt;pae/&gt;
          &lt;/features&gt;
          &lt;devices&gt;
            &lt;disk type='file' device='disk'&gt;
              &lt;driver name='qemu' type='raw'/&gt;
              &lt;source file='/path/to/disk/image'/&gt;
              &lt;target dev='hda' bus='ide'/&gt;
            &lt;/disk&gt;
            &lt;interface type='network'&gt;
              &lt;mac address='52:54:00:01:02:03'/&gt;
              &lt;source network='default'/&gt;
              &lt;model type='rtl8139'/&gt;
            &lt;/interface&gt;
          &lt;/devices&gt;
        &lt;/domain&gt;

</pre><h4><b>FILES</b></h4><pre>
       Files used are the same as for virt-v2v.  See "FILES" in <b><a href="../man1/virt-v2v.1.html">virt-v2v</a></b>(1).

</pre><h4><b>ENVIRONMENT</b> <b>VARIABLES</b></h4><pre>
       Environment variables used are the same as for virt-v2v.  See "ENVIRONMENT VARIABLES" in <b><a href="../man1/virt-v2v.1.html">virt-v2v</a></b>(1).

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man1/virt-v2v.1.html">virt-v2v</a></b>(1), <b><a href="../man1/virt-p2v.1.html">virt-p2v</a></b>(1), <b><a href="../man3/guestfs.3.html">guestfs</a></b>(3), <b><a href="../man1/guestfish.1.html">guestfish</a></b>(1), <b><a href="../man1/qemu-img.1.html">qemu-img</a></b>(1), <b><a href="../man1/nbdkit.1.html">nbdkit</a></b>(1), <a href="http://libguestfs.org/">http://libguestfs.org/</a>.

</pre><h4><b>AUTHORS</b></h4><pre>
       Matthew Booth

       Cédric Bosdonnat

       Laszlo Ersek

       Tomáš Golembiovský

       Shahar Havivi

       Richard W.M. Jones

       Roman Kagan

       Mike Latimer

       Nir Soffer

       Pino Toscano

       Xiaodai Wang

       Ming Xie

       Tingting Zheng

</pre><h4><b>COPYRIGHT</b></h4><pre>
       Copyright (C) 2009-2022 Red Hat Inc.

</pre><h4><b>LICENSE</b></h4><pre>
       This  program  is  free  software;  you  can  redistribute it and/or modify it under the terms of the GNU
       General Public License as published by the Free Software Foundation; either version 2 of the License,  or
       (at your option) any later version.

       This  program  is  distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even
       the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General  Public
       License for more details.

       You  should have received a copy of the GNU General Public License along with this program; if not, write
       to the Free Software Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA.

</pre><h4><b>BUGS</b></h4><pre>
       To     get      a      list      of      bugs      against      libguestfs,      use      this      link:
       https://bugzilla.redhat.com/buglist.cgi?component=libguestfs&amp;product=Virtualization+Tools

       To       report       a       new       bug       against       libguestfs,      use      this      link:
       https://bugzilla.redhat.com/enter_bug.cgi?component=libguestfs&amp;product=Virtualization+Tools

       When reporting a bug, please supply:

       •   The version of libguestfs.

       •   Where you got libguestfs (eg. which Linux distro, compiled from source, etc)

       •   Describe the bug accurately and give a way to reproduce it.

       •   Run <b><a href="../man1/libguestfs-test-tool.1.html">libguestfs-test-tool</a></b>(1) and paste the <b>complete,</b> <b>unedited</b> output into the bug report.

virt-v2v-2.6.0                                     2024-11-30                               <u><a href="../man1/virt-v2v-in-place.1.html">virt-v2v-in-place</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>