<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>autopkgtest-virt-docker, autopkgtest-virt-podman - autopkgtest virtualisation server using Docker/Podman</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/autopkgtest">autopkgtest_5.47_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       autopkgtest-virt-docker, autopkgtest-virt-podman - autopkgtest virtualisation server using Docker/Podman

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>autopkgtest-virt-docker</b> [<u>options</u>] <u>docker-image</u> [<u>--</u> <u>extra</u> <u>docker-run</u> <u>args...</u>]

       <b>autopkgtest-virt-podman</b> [<u>options</u>] <u>podman-image</u> [<u>--</u> <u>extra</u> <u>podman-run</u> <u>args...</u>]

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>autopkgtest-virt-docker</b>  provides an autopkgtest virtualization server using Docker or Podman.  It adapts
       the functionality provided by the <b><a href="../man1/docker.1.html">docker</a></b>(1) or <b><a href="../man1/podman.1.html">podman</a></b>(1) command line for use by autopkgtest.

       Normally, <b>autopkgtest-virt-docker</b> will be invoked by <b>autopkgtest</b>.

</pre><h4><b>HOST</b> <b>REQUIREMENTS</b></h4><pre>
       When run  as  <b>autopkgtest-virt-podman</b>  or  with  the  <b>--podman</b>  option  (recommended),  this  autopkgtest
       virtualization  server  requires  <b><a href="../man1/podman.1.html">podman</a></b>(1),  from  the  podman  package.   Unprivileged  access  to user
       namespaces must be enabled (this is true by default in Debian 11 or later), and  the  current  user  must
       have  at  least  65536  subordinate  user IDs allocated in <b><a href="file:/etc/subuid">/etc/subuid</a></b> and 65536 subordinate group IDs in
       <b><a href="file:/etc/subgid">/etc/subgid</a></b>.  See <b>/usr/share/doc/podman/README.Debian</b> for more details.

       When run as <b>autopkgtest-virt-docker</b> or with the <b>--docker</b> option, this autopkgtest  virtualization  server
       requires  <b><a href="../man1/docker.1.html">docker</a></b>(1),  from the docker.io package.  The current user must have access to the Docker daemon
       socket <b>/run/docker.sock</b>, unless the <b>--sudo</b> option is used.  Note that either  of  these  makes  the  user
       root-equivalent on the host system.  Using Podman instead of Docker is recommended.

</pre><h4><b>IMAGE</b> <b>REQUIREMENTS</b></h4><pre>
       The image must contain <b><a href="../man8/apt.8.html">apt</a></b>(8) with a suitable configuration.

       The  image  should  either provide the <b><a href="../man8/useradd.8.html">useradd</a></b>(8) program (part of the <b>passwd</b> package, which is <b>Priority:</b>
       <b>required</b>), or have an unprivileged user pre-created in the uid range 1000 to 59999.

       When using Podman, if the image contains an init system, it should be labelled with, for  example,  <b>LABEL</b>
       <b>org.debian.autopkgtest.init=systemd</b>.   This  allows  <b>autopkgtest-virt-podman</b>  to  detect  the init system
       automatically, making it unnecessary to specify the <b>--init</b> option.  A suitable label is added by commands
       like <b>autopkgtest-build-podman</b> <b>--init=systemd</b>,  but  can  also  be  done  for  images  that  were  created
       differently.   The  known  values that are used by <b><a href="../man1/autopkgtest-build-podman.1.html">autopkgtest-build-podman</a></b>(1) are <b>none</b>, <b>systemd</b>, <b>sysv-rc</b>
       and <b>openrc</b>, but any non-empty value except for <b>none</b> is  assumed  to  indicate  that  <b><a href="file:/sbin/init">/sbin/init</a></b>  will  be
       present and functional.

</pre><h4><b>OPTIONS</b></h4><pre>
       <b>--docker</b>
              Use  Docker  containers  and  the  Docker  container manager.  This is the default when invoked as
              <b>autopkgtest-virt-docker</b>.

       <b>--podman</b>
              Use Podman containers and the Podman container manager.  This  is  the  default  when  invoked  as
              <b>autopkgtest-virt-podman</b>.

       <b>-d</b> | <b>--debug</b>
              Enables debugging output.

       <b>--init</b> Launches  the  container  by  running  <b><a href="file:/sbin/init">/sbin/init</a></b>  as the initial command.  When using Podman, the
              default is to use the init system if the image has been labelled as containing one: see the "Image
              Requirements" section above.  This option is unlikely to work when using Docker.

              When using <b><a href="../man1/systemd.1.html">systemd</a></b>(1) as init, note that some of the execution environment  options  described  in
              <b><a href="../man5/systemd.exec.5.html">systemd.exec</a></b>(5)   require  the  container  to  have  <b>CAP_SYS_ADMIN</b>,  which  has  unclear  security
              implications: it certainly reduces hardening between the host and  the  container,  and  might  be
              sufficient  to  allow  code that runs as root in the container to compromise processes outside the
              container that are  running  under  the  same  uid  as  <b>autopkgtest-virt-podman</b>,  for  example  by
              unmounting  filesystems  that  are  used to "mask" security-sensitive parts of <b><a href="file:/proc">/proc</a></b> and <b><a href="file:/sys">/sys</a></b>.  If
              this  is  consistent  with  your  security  model,  it  can  be  allowed  by  passing  the  <b>--cap-</b>
              <b>add=CAP_SYS_ADMIN</b> option to <b><a href="../man1/podman-run.1.html">podman-run</a></b>(1):

                  autopkgtest ... -- podman --init $IMAGE -- --cap-add=CAP_SYS_ADMIN

       <b>--no-init</b>
              Launches  the container by running <b>sleep</b> <b>infinity</b> as the initial command.  This is the default for
              Docker,  and  for  Podman  images  that  have   <b>LABEL</b>   <b>org.debian.autopkgtest.init=none</b>   or   no
              <b>org.debian.autopkgtest.init</b>   label   at  all.   The  image  will  not  be  able  to  provide  the
              <b>isolation-container</b> autopkgtest capability when this option is used.

       <b>-p</b> | <b>--pull</b>
              Pulls the specified image before setting up the container. By default the  image  is  expected  to
              already be present.

       <b>-s</b> | <b>--sudo</b>
              Run  Docker  or  Podman  commands through sudo.  For Podman, this is rarely useful, because Podman
              usually runs unprivileged.  For Docker, use this option if you run autopkgtest as  a  normal  user
              who does not have access to the docker daemon (i.e. is not a member of the <b>docker</b> group).

       You  can  pass  additional  options  to  Docker  or  Podman:  anything after a <b>--</b> gets passed verbatim to
       <b><a href="../man1/docker-run.1.html">docker-run</a></b>(1) or <b><a href="../man1/podman-run.1.html">podman-run</a></b>(1).

</pre><h4><b>INPUT,</b> <b>OUTPUT</b> <b>AND</b> <b>EXIT</b> <b>STATUS</b></h4><pre>
       The behaviour of <b>autopkgtest-virt-docker</b> is as described by the  AutomatedTesting  virtualisation  regime
       specification.

</pre><h4><b>EXAMPLES</b></h4><pre>
       You  can  create  an  image  suitable  for  autopkgtest  from  the semi-official Debian base images, like
       <b>debian:unstable</b>, or from the official Ubuntu base images, like  <b>ubuntu:bionic</b>:

              autopkgtest-build-podman --image debian:sid
              autopkgtest hello_2.8-4.dsc -- podman localhost/autopkgtest/debian:sid

       If you would prefer not to trust images downloaded from docker.io, an equivalent image can be built  from
       a minbase tarball generated by <b><a href="../man1/mmdebstrap.1.html">mmdebstrap</a></b>(1):

              mmdebstrap --variant=minbase sid - | autopkgtest-build-podman --release=sid --tarball=-
              autopkgtest hello_2.8-4.dsc -- podman localhost/autopkgtest/debian:sid

       Alternatively,  you  can  test  a  container  that  runs a base image directly. However, most images need
       <b>apt-get</b> <b>update</b> before <b>apt</b> will work, so calling <b>autopkgtest</b> with <b>--setup-commands="apt-get</b>  <b>update"</b>  will
       be needed:

              autopkgtest hello_2.8-4.dsc --setup-commands="apt-get update" -- podman debian:sid

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man1/autopkgtest.1.html">autopkgtest</a></b>(1), <b><a href="../man1/autopkgtest-build-docker.1.html">autopkgtest-build-docker</a></b>(1), <b><a href="../man1/docker-run.1.html">docker-run</a></b>(1), <b><a href="../man1/podman-run.1.html">podman-run</a></b>(1), <b>/usr/share/doc/autopkgtest/</b>.

</pre><h4><b>AUTHORS</b> <b>AND</b> <b>COPYRIGHT</b></h4><pre>
       <b>autopkgtest-virt-docker</b> was written by Mathieu Parent &lt;<a href="mailto:math.parent@gmail.com">math.parent@gmail.com</a>&gt;.

       This manpage is part of autopkgtest, a tool for testing Debian binary packages.  autopkgtest is Copyright
       (C) 2006-2015 Canonical Ltd and others.

       See <b>/usr/share/doc/autopkgtest/CREDITS</b> for the list of contributors and full copying conditions.

Linux Programmer's Manual                             2015                            <u><a href="../man1/autopkgtest-virt-docker.1.html">autopkgtest-virt-docker</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>