<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>virt-df - Display free space on virtual filesystems</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/guestfs-tools">guestfs-tools_1.52.2-4ubuntu1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       virt-df - Display free space on virtual filesystems

</pre><h4><b>SYNOPSIS</b></h4><pre>
       All guests:

        virt-df [--options]

       Single guest:

        virt-df [--options] -d domname

        virt-df [--options] -a disk.img [-a disk.img ...]

       Old style:

        virt-df [--options] domname

        virt-df [--options] disk.img [disk.img ...]

</pre><h4><b>DESCRIPTION</b></h4><pre>
       "virt-df" is a command line tool to display free space on virtual machine filesystems.  Unlike other
       tools, it doesn't just display the size of disk allocated to a virtual machine, but can look inside disk
       images to see how much space is really being used.

       If used without any <u>-a</u> or <u>-d</u> arguments, "virt-df" checks with libvirt to get a list of all active and
       inactive guests, and performs a "df"-type operation on each one in turn, printing out the results.

       If any <u>-a</u> or <u>-d</u> arguments are specified, "virt-df" performs a "df"-type operation on either the single
       named libvirt domain, or on the disk image(s) listed on the command line (which must all belong to a
       single VM).  <b>In</b> <b>this</b> <b>mode</b> <b>(with</b> <b>arguments),</b> <b>"virt-df"</b> <b>will</b> <b>only</b> <b>work</b> <b>for</b> <b>a</b> <b>single</b> <b>guest</b>.  If you want to
       run on multiple guests, then you have to invoke "virt-df" multiple times.

       Use the <u>--csv</u> option to get a format which can be easily parsed by other programs.  Other options are
       similar to the standard <b><a href="../man1/df.1.html">df</a></b>(1) command.

</pre><h4><b>EXAMPLES</b></h4><pre>
       Show disk usage for a single libvirt guest called "F14x64".  Make the output human-readable:

        # virt-df -d F14x64 -h
        Filesystem                       Size     Used  Available  Use%
        F14x64:/dev/sda1                 484M      66M       393M   14%
        F14x64:/dev/vg_f13x64/lv_root    7.4G     3.4G       4.0G   46%

       Show disk usage for a disk image file called <u>test.img</u>:

        $ virt-df -a test1.img
        Filesystem                  1K-blocks     Used  Available  Use%
        test1.img:/dev/sda1             99099     1551      92432    2%

       If a single guest has multiple disks, use the <u>-a</u> option repeatedly.  A plus sign ("+") is displayed for
       each additional disk.  <b>Note:</b> <b>Do</b> <b>not</b> <b>do</b> <b>this</b> <b>with</b> <b>unrelated</b> <b>guest</b> <b>disks.</b>

        $ virt-df -a Win7x32TwoDisks-a -a Win7x32TwoDisks-b
        Filesystem                   1K-blocks    Used  Available  Use%
        Win7x32TwoDisks-a+:/dev/sda1    102396   24712      77684   25%
        Win7x32TwoDisks-a+:/dev/sda2  12478460 7403416    5075044   60%
        Win7x32TwoDisks-a+:/dev/sdb1    521212   55728     465484   11%

</pre><h4><b>OPTIONS</b></h4><pre>
       <b>--help</b>
           Display brief help.

       <b>-a</b> FILE
       <b>--add</b> FILE
           Add  "FILE" which should be a disk image from a virtual machine.  If the virtual machine has multiple
           block devices, you must supply all of them with separate <u>-a</u> options.

           The format of the disk image is auto-detected.  To override this and force a  particular  format  use
           the <u>--format=..</u> option.

       <b>-a</b> URI
       <b>--add</b> URI
           Add a remote disk.  See "ADDING REMOTE STORAGE" in <b><a href="../man1/guestfish.1.html">guestfish</a></b>(1).

       <b>--blocksize=512</b>
       <b>--blocksize=4096</b>
       <b>--blocksize</b>
           This  parameter  sets  the sector size of the disk image.  It affects all explicitly added subsequent
           disks after this parameter.  Using <u>--blocksize</u> with no argument switches the disk sector size to  the
           default value which is usually 512 bytes.  See also "guestfs_add_drive_opts" in <b><a href="../man3/guestfs.3.html">guestfs</a></b>(3).

       <b>-c</b> URI
       <b>--connect</b> URI
           If  using  libvirt,  connect  to  the  given <u>URI</u>.  If omitted, then we connect to the default libvirt
           hypervisor.

           If you specify guest block devices directly (<u>-a</u>), then libvirt is not used at all.

       <b>--csv</b>
           Write out the results in CSV format (comma-separated values).  This format  can  be  imported  easily
           into databases and spreadsheets, but read "NOTE ABOUT CSV FORMAT" below.

       <b>-d</b> guest
       <b>--domain</b> guest
           Add all the disks from the named libvirt guest.  Domain UUIDs can be used instead of names.

       <b>--format=raw|qcow2|..</b>
       <b>--format</b>
           The  default for the <u>-a</u> option is to auto-detect the format of the disk image.  Using this forces the
           disk format for <u>-a</u> options which follow on  the  command  line.   Using  <u>--format</u>  with  no  argument
           switches back to auto-detection for subsequent <u>-a</u> options.

           For example:

            virt-df --format=raw -a disk.img

           forces raw format (no auto-detection) for <u>disk.img</u>.

            virt-df --format=raw -a disk.img --format -a another.img

           forces raw format (no auto-detection) for <u>disk.img</u> and reverts to auto-detection for <u>another.img</u>.

           If  you  have  untrusted raw-format guest disk images, you should use this option to specify the disk
           format.  This avoids a possible security problem with malicious guests (CVE-2010-3851).

       <b>-h</b>
       <b>--human-readable</b>
           Print sizes in human-readable format.

           You are not allowed to use <u>-h</u> and <u>--csv</u> at the same time.

       <b>-i</b>
       <b>--inodes</b>
           Print inodes instead of blocks.

       <b>--one-per-guest</b>
           Since libguestfs 1.22, this is the default.  This option does nothing and is left here for  backwards
           compatibility with older scripts.

       <b>-P</b> nr_threads
           Since  libguestfs  1.22,  virt-df  is  multithreaded and examines guests in parallel.  By default the
           number of threads to use is chosen based on the amount of free memory  available  at  the  time  that
           virt-df is started.  You can force virt-df to use at most "nr_threads" by using the <u>-P</u> option.

           Note that <u>-P</u> <u>0</u> means to autodetect, and <u>-P</u> <u>1</u> means to use a single thread.

       <b>--uuid</b>
           Print  UUIDs  instead of names.  This is useful for following a guest even when the guest is migrated
           or renamed, or when two guests happen to have the same name.

           Note that only domains that we fetch from libvirt come with UUIDs.  For disk images, we  still  print
           the disk image name even when this option is specified.

       <b>-v</b>
       <b>--verbose</b>
           Enable verbose messages for debugging.

       <b>-V</b>
       <b>--version</b>
           Display version number and exit.

       <b>-x</b>  Enable tracing of libguestfs API calls.

</pre><h4><b>STATVFS</b> <b>NUMBERS</b></h4><pre>
       "virt-df"  (and  <b><a href="../man1/df.1.html">df</a></b>(1))  get  information  by  issuing  a  <b><a href="../man3/statvfs.3.html">statvfs</a></b>(3)  system call.  You can get the same
       information directly, either from the host (using libguestfs) or inside the guest:

       From the host
           Run this command:

            guestfish --ro -d GuestName -i statvfs /

           (change <u>/</u> to see stats for other filesystems).

       From inside the guest
           Run this command:

            python -c 'import os; s = os.statvfs ("/"); print s'

           (change <u>/</u> to see stats for other filesystems).

</pre><h4><b>NOTE</b> <b>ABOUT</b> <b>CSV</b> <b>FORMAT</b></h4><pre>
       Comma-separated values (CSV) is a deceptive format.  It <u>seems</u> like it should be easy to parse, but it  is
       definitely not easy to parse.

       Myth: Just split fields at commas.  Reality: This does <u>not</u> work reliably.  This example has two columns:

        "foo,bar",baz

       Myth: Read the file one line at a time.  Reality: This does <u>not</u> work reliably.  This example has one row:

        "foo
        bar",baz

       For  shell  scripts,  use  "csvtool"  (https://github.com/Chris00/ocaml-csv  also packaged in major Linux
       distributions).

       For other languages, use a CSV processing library (eg. "Text::CSV" for  Perl  or  Pythonâ€™s  built-in  csv
       library).

       Most spreadsheets and databases can import CSV directly.

</pre><h4><b>EXIT</b> <b>STATUS</b></h4><pre>
       This program returns 0 if successful, or non-zero if there was an error.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man1/df.1.html">df</a></b>(1), <b><a href="../man3/guestfs.3.html">guestfs</a></b>(3), <b><a href="../man1/guestfish.1.html">guestfish</a></b>(1), <b><a href="../man1/virt-drivers.1.html">virt-drivers</a></b>(1), <b><a href="../man1/virt-filesystems.1.html">virt-filesystems</a></b>(1), <a href="http://libguestfs.org/">http://libguestfs.org/</a>.

</pre><h4><b>AUTHOR</b></h4><pre>
       Richard W.M. Jones <a href="http://people.redhat.com/~rjones/">http://people.redhat.com/~rjones/</a>

</pre><h4><b>COPYRIGHT</b></h4><pre>
       Copyright (C) 2009-2023 Red Hat Inc.

</pre><h4><b>LICENSE</b></h4><pre>
       This  program  is  free  software;  you  can  redistribute it and/or modify it under the terms of the GNU
       General Public License as published by the Free Software Foundation; either version 2 of the License,  or
       (at your option) any later version.

       This  program  is  distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even
       the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General  Public
       License for more details.

       You  should have received a copy of the GNU General Public License along with this program; if not, write
       to the Free Software Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA.

</pre><h4><b>BUGS</b></h4><pre>
       To     get      a      list      of      bugs      against      libguestfs,      use      this      link:
       https://bugzilla.redhat.com/buglist.cgi?component=libguestfs&amp;product=Virtualization+Tools

       To       report       a       new       bug       against       libguestfs,      use      this      link:
       https://bugzilla.redhat.com/enter_bug.cgi?component=libguestfs&amp;product=Virtualization+Tools

       When reporting a bug, please supply:

       â€¢   The version of libguestfs.

       â€¢   Where you got libguestfs (eg. which Linux distro, compiled from source, etc)

       â€¢   Describe the bug accurately and give a way to reproduce it.

       â€¢   Run <b><a href="../man1/libguestfs-test-tool.1.html">libguestfs-test-tool</a></b>(1) and paste the <b>complete,</b> <b>unedited</b> output into the bug report.

guestfs-tools-1.52.2                               2025-02-04                                         <u><a href="../man1/virt-df.1.html">virt-df</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>