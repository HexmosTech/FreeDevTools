<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>virt-p2v-make-disk - Build the virt-p2v disk using virt-builder</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/virt-p2v">virt-p2v_1.42.4-1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       virt-p2v-make-disk - Build the virt-p2v disk using virt-builder

</pre><h4><b>SYNOPSIS</b></h4><pre>
        virt-p2v-make-disk -o /dev/sdX [os-version]

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b><a href="../man1/virt-p2v.1.html">virt-p2v</a></b>(1) converts a physical machine to run virtualized on KVM, managed by libvirt, OpenStack, oVirt,
       Red Hat Enterprise Virtualisation (RHEV), or one of the other targets supported by <b><a href="../man1/virt-v2v.1.html">virt-v2v</a></b>(1).

       virt-p2v-make-disk is a script which creates a bootable disk image or USB key containing virt-p2v.  It
       uses <b><a href="../man1/virt-builder.1.html">virt-builder</a></b>(1) to do this, and is just a small shell script around virt-builder.

       The required <u>-o</u> parameter specifies where the output should go, for example to a USB key (eg. "-o
       /dev/sdX") or to a file.  If you pass a device name, then <b>the</b> <b>existing</b> <b>contents</b> <b>of</b> <b>the</b> <b>device</b> <b>will</b> <b>be</b>
       <b>erased</b>.

       The root user on the disk image uses "p2v" as its initial password.

   <b>"os-version"</b> <b>parameter</b>
       The optional "os-version" parameter is the base Linux distro to use for the operating system on the ISO.
       If you don't set this parameter, the script tries to choose a suitable default for you.  Most users
       should <u>not</u> use the "os-version" parameter.

       The base OS selected for virt-p2v is not related in any way to the OS of the physical machine that you
       are trying to convert.

       To list possible "os-version" combinations, do:

        virt-builder -l

</pre><h4><b>EXAMPLES</b></h4><pre>
       Write a virt-p2v bootable USB key on <u>/dev/sdX</u> (any existing content on <u>/dev/sdX</u> is erased):

        virt-p2v-make-disk -o /dev/sdX

       Write a virt-p2v bootable virtual disk image, and boot it under qemu:

        virt-p2v-make-disk -o /var/tmp/p2v.img
        qemu-kvm -m 1024 -boot c \
          -drive file=/var/tmp/p2v.img,if=virtio,index=0 \
          -drive file=/var/tmp/guest.img,if=virtio,index=1

       where <u>/var/tmp/guest.img</u> would be the disk image of some guest that you want to convert (for testing
       only).

</pre><h4><b>ADDING</b> <b>EXTRA</b> <b>PACKAGES</b></h4><pre>
       You can install extra packages using the <u>--install</u> option.  This can be useful for making a more fully-
       featured virt-p2v disk with extra tools for debugging and troubleshooting.  Give a list of packages,
       separated by commas.  For example:

        virt-p2v-make-disk -o /var/tmp/p2v.img --install tcpdump,traceroute

</pre><h4><b>ADDING</b> <b>AN</b> <b>SSH</b> <b>IDENTITY</b></h4><pre>
       You can inject an SSH identity (private key) file to the image using the <u>--inject-ssh-identity</u> option.

       First create a key pair.  It must have an empty passphrase:

        ssh-keygen -t rsa -N '' -f id_rsa

       This creates a private key ("id_rsa") and a public key ("id_rsa.pub") pair.  The public key should be
       appended to the "authorized_keys" file on the virt-v2v conversion server (usually to
       "/root/.ssh/authorized_keys").

       The private key should be injected into the disk image and then discarded:

        virt-p2v-make-disk [...] --inject-ssh-identity id_rsa
        rm id_rsa

       When booting virt-p2v, specify the URL of the injected file like this:

        │         User name: [root_____________________________] │
        │                                                        │
        │          Password: [    &lt;leave this field blank&gt;     ] │
        │                                                        │
        │  SSH Identity URL: [file:///var/tmp/id_rsa___________] │

       or if using the kernel command line, add:

        p2v.identity=file:///var/tmp/id_rsa

       For more information, see "SSH IDENTITIES" in <b><a href="../man1/virt-p2v.1.html">virt-p2v</a></b>(1).

</pre><h4><b>32</b> <b>BIT</b> <b>VIRT-P2V</b></h4><pre>
       For improved compatibility with older hardware, virt-p2v-make-disk has an <u>--arch</u> option.  The most useful
       setting (on x86-64 hosts) is <u>--arch</u> <u>i686</u>, which builds a 32 bit virt-p2v environment that will work on
       older hardware.  32 bit virt-p2v can convert 64 bit physical machines and can interoperate with 64 bit
       virt-v2v and 64 bit hypervisors.

       This option requires that you have built <u>virt-p2v.$arch</u> (ie.  usually <u>virt-p2v.i686</u>) by some means, and
       that you install it next to the ordinary <u>virt-p2v</u> binary (eg. in <u>$libdir/virt-p2v/</u> or
       $VIRT_V2V_DATA_DIR).  This is outside the scope of this manual page, but you can find some tips in
       "BUILDING i686 32 BIT VIRT-P2V" in <b><a href="../man1/p2v-building.1.html">p2v-building</a></b>(1).

</pre><h4><b>OPTIONS</b></h4><pre>
       <b>--help</b>
           Display help.

       <b>--arch</b> ARCH
           Set the architecture of the virt-p2v ISO.  See "32 BIT VIRT-P2V" above.

           If  this option is not supplied, then the default is to use the same architecture as the host that is
           running virt-p2v-make-disk.

       <b>--inject-ssh-identity</b> id_rsa
           Add an SSH identity (private key) file into the image.  See "ADDING AN SSH IDENTITY" above.

       <b>--install</b> pkg,pkg,...
           Add extra packages to the image.  See "ADDING EXTRA PACKAGES" above.

       <b>--no-warn-if-partition</b>
           Normally you should not write to a partition on a  USB  drive  (ie.  don’t  use  "-o /dev/sdX1",  use
           "-o /dev/sdX"  to  make  a bootable USB drive).  If you do this, virt-builder prints a warning.  This
           option suppresses that warning.

       <b>-o</b> OUTPUT
       <b>--output</b> OUTPUT
           Write output to "OUTPUT", which can be a local file or block device.  <b>The</b> <b>existing</b>  <b>contents</b>  <b>of</b>  <b>the</b>
           <b>device</b> <b>will</b> <b>be</b> <b>erased</b>.

       <b>-v</b>
       <b>--verbose</b>
           Enable verbose output.  Use this if you need to debug problems with the script or if you are filing a
           bug.

       <b>-V</b>
       <b>--version</b>
           Display version number and exit.

</pre><h4><b>FILES</b></h4><pre>
       <u>$libdir/virt-p2v/virt-p2v.xz</u>
           The <b><a href="../man1/virt-p2v.1.html">virt-p2v</a></b>(1) binary which is copied into the bootable disk image.

           The location of the binary can be changed by setting the "VIRT_P2V_DATA_DIR" environment variable.

       <u>$datadir/virt-p2v/issue</u>
       <u>$datadir/virt-p2v/launch-virt-p2v.in</u>
       <u>$datadir/virt-p2v/p2v.service</u>
           Various data files that are copied into the bootable disk image.

           The location of these files can be changed by setting the "VIRT_P2V_DATA_DIR" environment variable.

</pre><h4><b>ENVIRONMENT</b> <b>VARIABLES</b></h4><pre>
       "VIRT_P2V_DATA_DIR"
           The  directory  where  virt-p2v-make-disk  looks  for  data files (see "FILES" above).  If not set, a
           compiled-in location is used.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man1/virt-p2v.1.html">virt-p2v</a></b>(1), <b><a href="../man1/virt-p2v-make-kickstart.1.html">virt-p2v-make-kickstart</a></b>(1), <b><a href="../man1/virt-p2v-make-kiwi.1.html">virt-p2v-make-kiwi</a></b>(1), <b><a href="../man1/virt-v2v.1.html">virt-v2v</a></b>(1), <a href="http://libguestfs.org/">http://libguestfs.org/</a>.

</pre><h4><b>AUTHORS</b></h4><pre>
       Richard W.M. Jones <a href="http://people.redhat.com/~rjones/">http://people.redhat.com/~rjones/</a>

</pre><h4><b>COPYRIGHT</b></h4><pre>
       Copyright (C) 2009-2019 Red Hat Inc.

</pre><h4><b>LICENSE</b></h4><pre>
       This program is free software; you can redistribute it and/or modify  it  under  the  terms  of  the  GNU
       General  Public License as published by the Free Software Foundation; either version 2 of the License, or
       (at your option) any later version.

       This program is distributed in the hope that it will be useful, but WITHOUT ANY  WARRANTY;  without  even
       the  implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public
       License for more details.

       You should have received a copy of the GNU General Public License along with this program.  If  not,  see
       &lt;https://www.gnu.org/licenses/&gt;.

</pre><h4><b>BUGS</b></h4><pre>
       To   get   a   list   of   bugs   against   libguestfs   (which   include   virt-p2v),   use  this  link:
       https://bugzilla.redhat.com/buglist.cgi?component=libguestfs&amp;product=Virtualization+Tools

       To      report      a      new       bug       against       libguestfs,       use       this       link:
       https://bugzilla.redhat.com/enter_bug.cgi?component=libguestfs&amp;product=Virtualization+Tools

       When reporting a bug, please supply:

       •   The version of virt-p2v.

       •   Where you got virt-p2v (eg. which Linux distro, compiled from source, etc)

       •   Describe the bug accurately and give a way to reproduce it.

virt-p2v-1.42.4                                    2024-11-30                              <u><a href="../man1/virt-p2v-make-disk.1.html">virt-p2v-make-disk</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>