<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>virt-p2v-make-kiwi - Build the virt-p2v kiwi configuration</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/virt-p2v">virt-p2v_1.42.4-1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       virt-p2v-make-kiwi - Build the virt-p2v kiwi configuration

</pre><h4><b>SYNOPSIS</b></h4><pre>
        virt-p2v-make-kiwi [--inject-ssh-identity path] [-o kiwi-folder]

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b><a href="../man1/virt-p2v.1.html">virt-p2v</a></b>(1) converts a physical machine to run virtualized on KVM, managed by libvirt, OpenStack, oVirt,
       Red Hat Enterprise Virtualisation (RHEV), or one of the other targets supported by <b><a href="../man1/virt-v2v.1.html">virt-v2v</a></b>(1).

       Kiwi is a tool used mainly by SUSE Linux Enterprise and openSUSE to build live CDs, make appliances and
       so on. It is driven by a few files including an xml description of the machine.

       virt-p2v-make-kiwi builds a folder containing all the pieces needed for kiwi to build a bootable P2V live
       CD ISO, USB key, or PXE image.  This tool only builds the kiwi configuration, but this manual page
       describes some of the ways you can use the kiwi configuration.

       The root user on the disk image uses "p2v" as its initial password.

</pre><h4><b>BUILDING</b> <b>THE</b> <b>KIWI</b> <b>CONFIGURATION</b></h4><pre>
       Using virt-p2v-make-kiwi is very simple:

        virt-p2v-make-kiwi

       will build a kiwi configuration based on the current machine’s distribution.

       To control the name of the output folder, use the <u>-o</u> parameter.

</pre><h4><b>BUILDING</b> <b>A</b> <b>LIVE</b> <b>CD</b> <b>/</b> <b>ISO</b></h4><pre>
       Once you have the kiwi configuration folder, you can use <b><a href="../man1/kiwi.1.html">kiwi</a></b>(1) to make a live CD:

        sudo kiwi --build p2v.kiwi -d build --type iso

       Before running this, you may have to tweak the "config.xml" file to change the locale and keyboard
       mapping to the one you need.

       If running on a SUSE Linux Entreprise Server, add the path to your packages repositories using the
       "--ignore-repos" and "--add-repo" kiwi parameters.

       The generated ISO image will be placed in the "build" folder.

</pre><h4><b>BUILDING</b> <b>A</b> <b>BOOTABLE</b> <b>USB</b> <b>KEY</b></h4><pre>
       Use the <b><a href="../man1/dd.1.html">dd</a></b>(1) program to write the ISO created above to a USB key:

        sudo dd if=path/to/p2v.iso of=/dev/sdX

</pre><h4><b>BUILDING</b> <b>A</b> <b>PXE</b> <b>BOOT</b> <b>IMAGE</b></h4><pre>
       To create a PXE boot image, run kiwi in such a way:

        sudo kiwi --build $PWD/p2v.kiwi -d build --add-profile netboot --type pxe

       For more details on how to use the generated image, report to the kiwi documentation on PXE images:
       https://doc.opensuse.org/projects/kiwi/doc/#chap.pxe

</pre><h4><b>ADDING</b> <b>AN</b> <b>SSH</b> <b>IDENTITY</b></h4><pre>
       You can inject an SSH identity (private key) file to the kiwi config and hence into the ISO using the
       <u>--inject-ssh-identity</u> option.  Note that you <u>cannot</u> inject a key once the ISO has been built.

       First create a key pair.  It must have an empty passphrase:

        ssh-keygen -t rsa -N '' -f id_rsa

       This creates a private key ("id_rsa") and a public key ("id_rsa.pub") pair.  The public key should be
       appended to the "authorized_keys" file on the virt-v2v conversion server (usually to
       "/root/.ssh/authorized_keys").

       The private key should be added to the kiwi config and then discarded:

        virt-p2v-make-kiwi [...] --inject-ssh-identity id_rsa
        rm id_rsa

       The ISO can then be built from the kickstart in the usual way (see above), and it will contain the
       embedded SSH identity (<u>/var/tmp/id_rsa</u>).

       When booting virt-p2v, specify the URL of the injected file like this:

        │         User name: [root_____________________________] │
        │                                                        │
        │          Password: [    &lt;leave this field blank&gt;     ] │
        │                                                        │
        │  SSH Identity URL: [file:///var/tmp/id_rsa___________] │

       or if using the kernel command line, add:

        p2v.identity=file:///var/tmp/id_rsa

       For more information, see "SSH IDENTITIES" in <b><a href="../man1/virt-p2v.1.html">virt-p2v</a></b>(1).

</pre><h4><b>OPTIONS</b></h4><pre>
       <b>--help</b>
           Display help.

       <b>--inject-ssh-identity</b> id_rsa
           Add an SSH identity (private key) file into the kickstart.  See "ADDING AN SSH IDENTITY" above.

       <b>-o</b> OUTPUT
       <b>--output</b> OUTPUT
           Write  kiwi  configuration  to the "OUTPUT" folder.  If not specified, the default is <u>p2v.kiwi</u> in the
           current directory.

       <b>-V</b>
       <b>--version</b>
           Display version number and exit.

</pre><h4><b>FILES</b></h4><pre>
       <u>$libdir/virt-p2v/virt-p2v.xz</u>
           The <b><a href="../man1/virt-p2v.1.html">virt-p2v</a></b>(1) binary which is copied into the kiwi configuration.

           The location of the binary can be changed by setting the "VIRT_P2V_DATA_DIR" environment variable.

       <u>$datadir/virt-p2v/issue</u>
       <u>$datadir/virt-p2v/launch-virt-p2v.in</u>
       <u>$datadir/virt-p2v/kiwi</u>
       <u>$datadir/virt-p2v/p2v.service</u>
           Various data files that are used to make the kiwi appliance.

           The location of these files can be changed by setting the "VIRT_P2V_DATA_DIR" environment variable.

</pre><h4><b>ENVIRONMENT</b> <b>VARIABLES</b></h4><pre>
       "VIRT_P2V_DATA_DIR"
           The directory where virt-p2v-make-kiwi looks for data files and  the  virt-p2v  binary  (see  "FILES"
           above).  If not set, a compiled-in location is used.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man1/virt-p2v.1.html">virt-p2v</a></b>(1), <b><a href="../man1/virt-p2v-make-disk.1.html">virt-p2v-make-disk</a></b>(1), <b><a href="../man1/virt-v2v.1.html">virt-v2v</a></b>(1), <b><a href="../man1/kiwi.1.html">kiwi</a></b>(1), <a href="http://libguestfs.org/">http://libguestfs.org/</a>.

</pre><h4><b>AUTHORS</b></h4><pre>
       Cédric Bosdonnat

</pre><h4><b>COPYRIGHT</b></h4><pre>
       Copyright (C) 2016 SUSE Ltd.

</pre><h4><b>LICENSE</b></h4><pre>
       This  program  is  free  software;  you  can  redistribute it and/or modify it under the terms of the GNU
       General Public License as published by the Free Software Foundation; either version 2 of the License,  or
       (at your option) any later version.

       This  program  is  distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even
       the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General  Public
       License for more details.

       You  should  have received a copy of the GNU General Public License along with this program.  If not, see
       &lt;https://www.gnu.org/licenses/&gt;.

</pre><h4><b>BUGS</b></h4><pre>
       To  get  a   list   of   bugs   against   libguestfs   (which   include   virt-p2v),   use   this   link:
       https://bugzilla.redhat.com/buglist.cgi?component=libguestfs&amp;product=Virtualization+Tools

       To       report       a       new       bug       against       libguestfs,      use      this      link:
       https://bugzilla.redhat.com/enter_bug.cgi?component=libguestfs&amp;product=Virtualization+Tools

       When reporting a bug, please supply:

       •   The version of virt-p2v.

       •   Where you got virt-p2v (eg. which Linux distro, compiled from source, etc)

       •   Describe the bug accurately and give a way to reproduce it.

virt-p2v-1.42.4                                    2024-11-30                              <u><a href="../man1/virt-p2v-make-kiwi.1.html">virt-p2v-make-kiwi</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>