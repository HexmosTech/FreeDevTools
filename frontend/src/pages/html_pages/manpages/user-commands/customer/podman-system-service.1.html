<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>podman-system-service - Run an API service</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/podman">podman_5.4.1+ds1-1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       podman-system-service - Run an API service

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>podman</b> <b>system</b> <b>service</b> [<u>options</u>]

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The  <b>podman</b>  <b>system</b>  <b>service</b>  command creates a listening service that answers API calls for Podman.  The
       command is available on Linux systems and is usually executed in systemd services.  The  command  is  not
       available  when the Podman command is executed directly on a Windows or macOS host or in other situations
       where the Podman command is accessing a remote Podman API service.

       The REST API provided by <b>podman</b> <b>system</b> <b>service</b> is split into two parts: a  compatibility  layer  offering
       support  for  the  Docker  v1.40  API, and a Podman-native Libpod layer.  Documentation for the latter is
       available at <u>https://docs.podman.io/en/latest/_static/api.html</u>.  Both APIs are versioned, but the  server
       does not reject requests with an unsupported version set.

   <b>Run</b> <b>the</b> <b>command</b> <b>in</b> <b>a</b> <b>systemd</b> <b>service</b>
       The  command  <b>podman</b>  <b>system</b>  <b>service</b>  supports  systemd socket activation.  When the command is run in a
       systemd service, the API service can therefore be provided on demand.  If  the  systemd  service  is  not
       already  running, it will be activated as soon as a client connects to the listening socket. Systemd then
       executes the <b>podman</b> <b>system</b> <b>service</b> command.  After some time of inactivity,  as  defined  by  the  <b>--time</b>
       option,  the  command terminates.  Systemd sets the <u>podman.service</u> state as inactive. At this point there
       is no <b>podman</b> <b>system</b> <b>service</b> process running. No unnecessary compute resources are  wasted.   As  soon  as
       another client connects, systemd activates the systemd service again.

       The systemd unit files that declares the Podman API service for users are

              • <u>/usr/lib/systemd/user/podman.service</u>

              • <u>/usr/lib/systemd/user/podman.socket</u>

       In the file <u>podman.socket</u> the path of the listening Unix socket is defined by

       ListenStream=%t/podman/podman.sock

       The path contains the systemd specifier <b>%t</b> which systemd expands to the value of the environment variable
       <b>XDG_RUNTIME_DIR</b> (see systemd specifiers in the <b><a href="../man5/systemd.unit.5.html">systemd.unit</a>(5)</b> man page).

       In addition to the systemd user services, there is also a systemd system service <u>podman.service</u>.  It runs
       rootful Podman and is accessed from the Unix socket <u>/run/podman/podman.sock</u>. See the systemd unit files

              • <u>/usr/lib/systemd/system/podman.service</u>

              • <u>/usr/lib/systemd/system/podman.socket</u>

       The <b>podman</b> <b>system</b> <b>service</b> command does not support more than one listening socket for the API service.

       Note:  The  default  systemd unit files (system and user) change the log-level option to <u>info</u> from <u>error</u>.
       This change provides additional information on each API call.

   <b>Run</b> <b>the</b> <b>command</b> <b>directly</b>
       To support running an API service without using a systemd service, the command  also  takes  an  optional
       endpoint argument for the API in URI form.  For example, <u>unix:///tmp/foobar.sock</u> or <u>tcp://localhost:8080</u>.
       If  no  endpoint  is  provided,  defaults  is  used.   The  default  endpoint  for  a  rootful service is
       <u>unix:///run/podman/podman.sock</u> and rootless is  <u>unix://$XDG_RUNTIME_DIR/podman/podman.sock</u>  (for  example
       <u>unix:///run/user/1000/podman/podman.sock</u>)

   <b>Access</b> <b>the</b> <b>Unix</b> <b>socket</b> <b>from</b> <b>inside</b> <b>a</b> <b>container</b>
       To  access  the  API  service inside a container: - mount the socket as a volume - run the container with
       <b>--security-opt</b> <b>label=disable</b>

   <b>Security</b>
       Please note that the API grants full access to all Podman functionality, and thus allows  arbitrary  code
       execution as the user running the API, with no ability to limit or audit this access.  The API's security
       model  is  built  upon  access  via  a  Unix socket with access restricted via standard file permissions,
       ensuring that only the user running the service will be able to access it.  We <u>strongly</u> recommend against
       making the API socket available via the network (IE, bindings the service to a <u>tcp</u> URL).  Even access via
       Localhost carries risks - anyone with access to the system will be able to access  the  API.   If  remote
       access  is  required,  we instead recommend forwarding the API socket via SSH, and limiting access on the
       remote machine to the greatest extent possible.  If a <u>tcp</u> URL must be used, using the  <u>--cors</u>  option  is
       recommended to improve security.

</pre><h4><b>OPTIONS</b></h4><pre>
   <b>--cors</b>
       CORS  headers  to  inject  to  the  HTTP  response. The default value is empty string which disables CORS
       headers.

   <b>--help,</b> <b>-h</b>
       Print usage statement.

   <b>--time,</b> <b>-t</b>
       The time until the session expires in <u>seconds</u>. The default is 5 seconds. A value of <b>0</b> means  no  timeout,
       therefore the session does not expire.

       The  default  timeout  can  be  changed  via  the  <b>service_timeout=VALUE</b>  field  in containers.conf.  See
       <b><a href="../man5/containers.conf.5.html">containers.conf</a>(5)</b> for more information.

</pre><h4><b>EXAMPLES</b></h4><pre>
       Start the user systemd socket for a rootless service.

       systemctl --user start podman.socket

       Configure DOCKER_HOST environment variable to point to the Podman socket so  that  it  can  be  used  via
       Docker API tools like docker-compose.

       $ export DOCKER_HOST=unix://$XDG_RUNTIME_DIR/podman/podman.sock
       $ docker-compose up

       Configure the systemd socket to be automatically started after reboots, and run as the specified user.

       systemctl --user enable podman.socket
       loginctl enable-linger &lt;USER&gt;

       Start the systemd socket for the rootful service.

       sudo systemctl start podman.socket

       Configure the socket to be automatically started after reboots.

       sudo systemctl enable podman.socket

       It  is possible to run the API without using systemd socket activation.  In this case the API will not be
       available on demand because the command will stay terminated after the  inactivity  timeout  has  passed.
       Run an API with an inactivity timeout of 5 seconds without using socket activation.

       podman system service --time 5

       The default socket was used as no URI argument was provided.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man1/podman.1.html">podman</a>(1)</b>, <b><a href="../man1/podman-system-connection.1.html">podman-system-connection</a>(1)</b>, <b><a href="../man5/containers.conf.5.html">containers.conf</a>(5)</b>

</pre><h4><b>HISTORY</b></h4><pre>
       January 2020, Originally compiled by Brent Baude <b>&lt;<a href="mailto:bbaude@redhat.com">bbaude@redhat.com</a>&gt;</b> November 2020, Updated by Jhon Honce
       (jhonce at redhat dot com)

                                                                                        <u><a href="../man1/podman-system-service.1.html">podman-system-service</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>