<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>kdig - Advanced DNS lookup utility</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/knot-dnsutils">knot-dnsutils_3.4.4-1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       kdig - Advanced DNS lookup utility

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>kdig</b> [<u>common-settings</u>] [<u>query</u> [<u>settings</u>]]...

       <b>kdig</b> <b>-h</b>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This  utility  sends one or more DNS queries to a nameserver. Each query can have individual <u>settings</u>, or
       it can be specified globally via <u>common-settings</u>, which must precede <u>query</u> specification.

   <b>Parameters</b>
       <u>query</u>  <u>name</u> | <b>-q</b> <u>name</u> | <b>-x</b> <u>address</u> | <b>-G</b> <u>tapfile</u>

       <u>common-settings</u><b>,</b> <u>settings</u>
              [<u>query_class</u>] [<u>query_type</u>] [<b>@</b><u>server</u>]... [<u>options</u>]

       <u>name</u>   Is a domain name that is to be looked up.

       <u>server</u> Is a domain name or an IPv4 or IPv6 address of the nameserver to send a query  to.  An  additional
              port  can  be  specified  using  address:port  ([address]:port for IPv6 address), address@port, or
              address#port notation. A value which begins with '/' character  is  considered  an  absolute  UNIX
              socket path. If no server is specified, the servers from <b><a href="file:/etc/resolv.conf">/etc/resolv.conf</a></b> are used.

       If no arguments are provided, <b>kdig</b> sends NS query for the root zone.

   <b>Query</b> <b>classes</b>
       A  <u>query_class</u>  can  be  either a DNS class name (IN, CH) or generic class specification <b>CLASS</b><u>XXXXX</u> where
       <u>XXXXX</u> is a corresponding decimal class number. The default query class is IN.

   <b>Query</b> <b>types</b>
       A <u>query_type</u> can be either a DNS resource record type (A, AAAA, NS, SOA, DNSKEY, ANY, etc.) or one of the
       following:

       <b>TYPE</b><u>XXXXX</u>
              Generic query type specification where <u>XXXXX</u> is a corresponding decimal type number.

       <b>AXFR</b>   Full zone transfer request.

       <b>IXFR=</b><u>serial</u>
              Incremental zone transfer request for specified SOA serial number (i.e. all zone updates since the
              specified zone version are to be returned).

       <b>NOTIFY=</b><u>serial</u>
              Notify message with a SOA serial hint specified.

       <b>NOTIFY</b> Notify message with a SOA serial hint unspecified.

       The default query type is A.

   <b>Options</b>
       <b>-4</b>     Use the IPv4 protocol only.

       <b>-6</b>     Use the IPv6 protocol only.

       <b>-b</b> <u>address</u>
              Set the source IP address of the query to <u>address</u>. The address must be a valid address  for  local
              interface  or  ::  or  0.0.0.0. An optional port can be specified in the same format as the <u>server</u>
              value.

       <b>-c</b> <u>class</u>
              An explicit <u>query_class</u> specification. See possible values above.

       <b>-d</b>     Enable debug messages.

       <b>-h</b>, <b>--help</b>
              Print the program help.

       <b>-k</b> <u>keyfile</u>
              Use the TSIG key stored in a file <u>keyfile</u> to authenticate the request. The file must  contain  the
              key in the same format as accepted by the <b>-y</b> option.

       <b>-p</b> <u>port</u>
              Set the nameserver port number or service name to send a query to. The default port is 53.

       <b>-q</b> <u>name</u>
              Set  the  query  name.  An  explicit  variant of <u>name</u> specification. If no <u>name</u> is provided, empty
              question section is set.

       <b>-t</b> <u>type</u>
              An explicit <u>query_type</u> specification. See possible values above.

       <b>-V</b>, <b>--version</b>
              Print the program version. The option <b>-VV</b> makes the program print the compile  time  configuration
              summary.

       <b>-x</b> <u>address</u>
              Send  a  reverse  (PTR)  query  for  IPv4 or IPv6 <u>address</u>. The correct name, class and type is set
              automatically.

       <b>-y</b> [<u>alg</u>:]<u>name</u>:<u>key</u>
              Use the TSIG key named <u>name</u> to authenticate the request. The <u>alg</u> part specifies the algorithm (the
              default is hmac-sha256) and <u>key</u> specifies the shared secret encoded in Base64.

       <b>-E</b> <u>tapfile</u>
              Export a dnstap trace of the query and response messages received to the file <u>tapfile</u>.

       <b>-G</b> <u>tapfile</u>
              Generate message output from a previously saved dnstap file <u>tapfile</u>.

       <b>+</b>[<b>no</b>]<b>multiline</b>
              Wrap long records to more lines and improve human readability.

       <b>+</b>[<b>no</b>]<b>short</b>
              Show record data only.

       <b>+</b>[<b>no</b>]<b>generic</b>
              Use the generic representation format when printing resource record types and data.

       <b>+</b>[<b>no</b>]<b>crypto</b>
              Display the DNSSEC keys and signatures values in base64, instead of omitting them.

       <b>+</b>[<b>no</b>]<b>aaflag</b>
              Set the AA flag.

       <b>+</b>[<b>no</b>]<b>tcflag</b>
              Set the TC flag.

       <b>+</b>[<b>no</b>]<b>rdflag</b>
              Set the RD flag.

       <b>+</b>[<b>no</b>]<b>recurse</b>
              Same as <b>+</b>[<b>no</b>]<b>rdflag</b>

       <b>+</b>[<b>no</b>]<b>raflag</b>
              Set the RA flag.

       <b>+</b>[<b>no</b>]<b>zflag</b>
              Set the zero flag bit.

       <b>+</b>[<b>no</b>]<b>adflag</b>
              Set the AD flag.

       <b>+</b>[<b>no</b>]<b>cdflag</b>
              Set the CD flag.

       <b>+</b>[<b>no</b>]<b>dnssec</b>
              Set the DO flag.

       <b>+</b>[<b>no</b>]<b>all</b>
              Show all packet sections.

       <b>+</b>[<b>no</b>]<b>qr</b>
              Show the query packet.

       <b>+</b>[<b>no</b>]<b>header</b>
              Show the packet header.

       <b>+</b>[<b>no</b>]<b>comments</b>
              Show commented section names.

       <b>+</b>[<b>no</b>]<b>opt</b>
              Show the EDNS pseudosection.

       <b>+</b>[<b>no</b>]<b>opttext</b>
              Try to show unknown EDNS options as text.

       <b>+</b>[<b>no</b>]<b>optpresent</b>
              Show   EDNS   in   presentation   format   according   to    the    specification    in    version
              <u>draft-peltan-edns-presentation-format-01</u>.

       <b>+</b>[<b>no</b>]<b>question</b>
              Show the question section.

       <b>+</b>[<b>no</b>]<b>answer</b>
              Show the answer section.

       <b>+</b>[<b>no</b>]<b>authority</b>
              Show the authority section.

       <b>+</b>[<b>no</b>]<b>additional</b>
              Show the additional section.

       <b>+</b>[<b>no</b>]<b>tsig</b>
              Show the TSIG pseudosection.

       <b>+</b>[<b>no</b>]<b>stats</b>
              Show trailing packet statistics.

       <b>+</b>[<b>no</b>]<b>class</b>
              Show the DNS class.

       <b>+</b>[<b>no</b>]<b>ttl</b>
              Show the TTL value.

       <b>+</b>[<b>no</b>]<b>tcp</b>
              Use the TCP protocol (default is UDP for standard query and TCP for AXFR/IXFR).

       <b>+</b>[<b>no</b>]<b>fastopen</b>
              Use TCP Fast Open.

       <b>+</b>[<b>no</b>]<b>ignore</b>
              Don't use TCP automatically if a truncated reply is received.

       <b>+</b>[<b>no</b>]<b>keepopen</b>
              Keep TCP connection open for the following query if it has the same connection configuration. This
              applies  to  +tcp,  +tls,  and +https operations. The connection is considered in the context of a
              single kdig call only.

       <b>+</b>[<b>no</b>]<b>tls</b>
              Use TLS with the Opportunistic privacy profile (<u>RFC</u> <u>7858#section-4.1</u>).

       <b>+</b>[<b>no</b>]<b>tls-ca</b>[=<u>FILE</u>]
              Use TLS with a certificate validation. Certification authority certificates are  loaded  from  the
              specified  PEM  file  (default  is system certificate storage if no argument is provided).  Can be
              specified multiple times. If the +tls-hostname option is not provided,  the  name  of  the  target
              server (if specified) is used for strict authentication.

       <b>+</b>[<b>no</b>]<b>tls-pin</b>=<u>BASE64</u>
              Use TLS with the Out-of-Band key-pinned privacy profile (<u>RFC</u> <u>7858#section-4.2</u>).  The PIN must be a
              Base64 encoded SHA-256 hash of the X.509 SubjectPublicKeyInfo.  Can be specified multiple times.

       <b>+</b>[<b>no</b>]<b>tls-hostname</b>=<u>STR</u>
              Use TLS with a remote server hostname check.

       <b>+</b>[<b>no</b>]<b>tls-sni</b>=<u>STR</u>
              Use TLS with a Server Name Indication.

       <b>+</b>[<b>no</b>]<b>tls-keyfile</b>=<u>FILE</u>
              Use TLS with a client keyfile.

       <b>+</b>[<b>no</b>]<b>tls-certfile</b>=<u>FILE</u>
              Use TLS with a client certfile.

       <b>+</b>[<b>no</b>]<b>tls-ocsp-stapling</b>[=<u>H</u>]
              Use  TLS with a valid stapled OCSP response for the server certificate (%u or specify hours). OCSP
              responses older than the specified period are considered invalid.

       <b>+</b>[<b>no</b>]<b>https</b>[=<u>URL</u>]
              Use HTTPS (DNS-over-HTTPS) in wire format  (<u>RFC</u>  <u>1035#section-4.2.1</u>).   It  is  also  possible  to
              specify  URL=[authority][/path]  where  request  will be sent to. Any leading scheme and authority
              indicator (i.e. //) are ignored.  Authority might also be  specified  as  the  <u>server</u>  (using  the
              parameter <u>@</u>).  If <u>path</u> is specified and <u>authority</u> is missing, then the <u>server</u> is used as authority
              together with the specified <u>path</u>.  Library <u>libnghttp2</u> is required.

       <b>+</b>[<b>no</b>]<b>https-get</b>
              Use  HTTPS  with  HTTP/GET  method instead of the default HTTP/POST method.  Library <u>libnghttp2</u> is
              required.

       <b>+</b>[<b>no</b>]<b>quic</b>
              Use QUIC (DNS-over-QUIC).

       <b>+</b>[<b>no</b>]<b>nsid</b>
              Request the nameserver identifier (NSID).

       <b>+</b>[<b>no</b>]<b>zoneversion</b>
              Request the EDNS zone version.

       <b>+</b>[<b>no</b>]<b>bufsize</b>=<u>B</u>
              Set EDNS buffer size in bytes (default is 1232 bytes).

       <b>+</b>[<b>no</b>]<b>padding</b>[=<u>B</u>]
              Use <a href="../man0/EDNS.0.html">EDNS</a>(0) padding option to pad queries, optionally to a specific size. The default  is  to  pad
              queries  with  a  sensible  amount  when  using  +tls, and not to pad at all when queries are sent
              without TLS.  With no argument (i.e., just +padding)  pad  every  query  with  a  sensible  amount
              regardless of the use of TLS. With +nopadding, never pad.

       <b>+</b>[<b>no</b>]<b>alignment</b>[=<u>B</u>]
              Align  the query to B-byte-block message using the <a href="../man0/EDNS.0.html">EDNS</a>(0) padding option (default is no or 128 if
              no argument is specified).

       <b>+</b>[<b>no</b>]<b>subnet</b>=<u>SUBN</u>
              Set <a href="../man0/EDNS.0.html">EDNS</a>(0) client subnet SUBN=addr/prefix.

       <b>+</b>[<b>no</b>]<b>edns</b>[=<u>N</u>]
              Use EDNS version (default is 0). <a href="../man0/EDNS.0.html">EDNS</a>(0) is enabled by default.

       <b>+</b>[<b>no</b>]<b>timeout</b>=<u>T</u>
              Set the wait-for-reply interval in seconds (default is 5 seconds). This timeout  applies  to  each
              query attempt. Zero value or <u>notimeout</u> is interpreted as infinity.

       <b>+</b>[<b>no</b>]<b>retry</b>=<u>N</u>
              Set the number (&gt;=0) of UDP retries (default is 2). This doesn't apply to AXFR/IXFR.

       <b>+</b>[<b>no</b>]<b>expire</b>
              Sets the EXPIRE EDNS option.

       <b>+</b>[<b>no</b>]<b>cookie</b>[=<u>HEX</u>]
              Attach <a href="../man0/EDNS.0.html">EDNS</a>(0) cookie to the query.

       <b>+</b>[<b>no</b>]<b>badcookie</b>
              Repeat a query with the correct cookie.

       <b>+</b>[<b>no</b>]<b>ednsopt</b>[=<u>CODE</u>[:<u>HEX</u>]]
              Send  custom  EDNS option. The <u>CODE</u> is EDNS option code in decimal, <u>HEX</u> is an optional hex encoded
              string to use as EDNS option value. This argument can be used multiple  times.  +noednsopt  clears
              all EDNS options specified by +ednsopt.

       <b>+</b>[<b>no</b>]<b>proxy</b>=<u>SRC_ADDR</u>[#<u>SRC_PORT</u>]-<u>DST_ADDR</u>[#<u>DST_PORT</u>]
              Add  PROXYv2 header with the specified source and destination addresses to the query.  The default
              source port is 0 and destination port 53.

       <b>+</b>[<b>no</b>]<b>json</b>
              Use JSON for output encoding (RFC 8427).

       <b>+noidn</b> Disable the  IDN  transformation  to  ASCII  and  vice  versa.  IDN  support  depends  on  libidn2
              availability  during  project  building!  If  used in <u>common-settings</u>, all IDN transformations are
              disabled. If used in the individual query <u>settings</u>,  transformation  from  ASCII  is  disabled  on
              output for the particular query. Note that IDN transformation does not preserve domain name letter
              case.

</pre><h4><b>NOTES</b></h4><pre>
       Options <b>-k</b> and <b>-y</b> can not be used simultaneously.

       Dnssec-keygen keyfile format is not supported. Use <b><a href="../man8/keymgr.8.html">keymgr</a>(8)</b> instead.

</pre><h4><b>EXIT</b> <b>VALUES</b></h4><pre>
       Exit status of 0 means successful operation. Any other exit status indicates an error.

</pre><h4><b>EXAMPLES</b></h4><pre>
       1. Get A records for example.com:

             $ kdig example.com A

       2. Perform AXFR for zone example.com from the server 192.0.2.1:

             $ kdig example.com -t AXFR @192.0.2.1

       3. Get  A  records  for  example.com  from  192.0.2.1  and  reverse  lookup  for address 2001:DB8::1 from
          192.0.2.2. Both using the TCP protocol:

             $ kdig +tcp example.com -t A @192.0.2.1 -x 2001:DB8::1 @192.0.2.2

       4. Get SOA record for example.com, use TLS, use system certificates, check for specified hostname,  check
          for certificate pin, and print additional debug info:

             $ kdig -d @185.49.141.38 +tls-ca +tls-host=getdnsapi.net \
               +tls-pin=foxZRnIh9gZpWnl+zEiKa0EJ2rdCGroMWm02gaxSc9S= soa example.com

       5. DNS over HTTPS examples (various DoH implementations):

             $ kdig @1.1.1.1 +https example.com.
             $ kdig @193.17.47.1 +https=/doh example.com.
             $ kdig @8.8.4.4 +https +https-get example.com.
             $ kdig @8.8.8.8 +https +tls-hostname=dns.google +fastopen example.com.

       6. More queries share one DoT connection:

             $ kdig @1.1.1.1 +tls +keepopen abc.example.com A mail.example.com AAAA

</pre><h4><b>FILES</b></h4><pre>
       <b><a href="file:/etc/resolv.conf">/etc/resolv.conf</a></b>

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man1/khost.1.html">khost</a>(1)</b>, <b><a href="../man1/knsupdate.1.html">knsupdate</a>(1)</b>, <b><a href="../man8/keymgr.8.html">keymgr</a>(8)</b>.

</pre><h4><b>AUTHOR</b></h4><pre>
       CZ.NIC Labs &lt;https://www.knot-dns.cz&gt;

</pre><h4><b>COPYRIGHT</b></h4><pre>
       Copyright 2010–2025, CZ.NIC, z.s.p.o.

3.4.4                                              2025-01-22                                            <u><a href="../man1/KDIG.1.html">KDIG</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>