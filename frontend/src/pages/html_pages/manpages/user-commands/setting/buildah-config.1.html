<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>buildah-config - Update image configuration settings.</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/buildah">buildah_1.39.3+ds1-1syncable1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       buildah-config - Update image configuration settings.

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>buildah</b> <b>config</b> [<u>options</u>] <u>container</u>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       Updates one or more of the settings kept for a container.

</pre><h4><b>OPTIONS</b></h4><pre>
       <b>--add-history</b>

       Add  an  entry  to  the  image's history which will note changes to the settings for <b>--cmd</b>, <b>--entrypoint</b>,
       <b>--env</b>,  <b>--healthcheck</b>,  <b>--label</b>,  <b>--onbuild</b>,  <b>--port</b>,  <b>--shell</b>,  <b>--stop-signal</b>,  <b>--user</b>,  <b>--volume</b>,   and
       <b>--workingdir</b>.  Defaults to false.

       Note: You can also override the default value of --add-history by setting the BUILDAH_HISTORY environment
       variable. <b>export</b> <b>BUILDAH_HISTORY=true</b>

       <b>--annotation</b>, <b>-a</b> <u>annotation</u>=<u>annotation</u>

       Add  an  image  <u>annotation</u> (e.g. annotation=<u>annotation</u>) to the image manifest of any images which will be
       built using the specified container. Can be used multiple times.  If <u>annotation</u> has a  trailing  <b>-</b>,  then
       the  <u>annotation</u>  is  removed  from  the config.  If the <u>annotation</u> is set to "-" then all annotations are
       removed from the config.

       <b>--arch</b> <u>architecture</u>

       Set the target <u>architecture</u> for any images which  will  be  built  using  the  specified  container.   By
       default,  if the container was based on an image, that image's target architecture is kept, otherwise the
       host's architecture is recorded.

       <b>--author</b> <u>author</u>

       Set contact information for the <u>author</u> for any images which will be built using the specified container.

       <b>--cmd</b> <u>command</u>

       Set the default <u>command</u> to run for containers based on any images which will be built using the specified
       container.  When used in combination with an <u>entry</u> <u>point</u>, this specifies the default parameters  for  the
       <u>entry</u> <u>point</u>.

       <b>--comment</b> <u>comment</u>

       Set the image-level comment for any images which will be built using the specified container.

       Note: this setting is not present in the OCIv1 image format, so it is discarded when writing images using
       OCIv1 formats.

       <b>--created-by</b> <u>created</u>

       Set  the  description of how the topmost layer was <u>created</u> for any images which will be created using the
       specified container.

       <b>--domainname</b> <u>domain</u>

       Set the domainname to set when  running  containers  based  on  any  images  built  using  the  specified
       container.

       Note: this setting is not present in the OCIv1 image format, so it is discarded when writing images using
       OCIv1 formats.

       <b>--entrypoint</b> <u>"command"</u> | <u>'["command",</u> <u>"arg1",</u> <u>...]'</u>

       Set the <u>entry</u> <u>point</u> for containers based on any images which will be built using the specified container.
       buildah  supports  two formats for entrypoint.  It can be specified as a simple string, or as an array of
       commands.

       Note: When the entrypoint is specified as a string, container runtimes will ignore the <b>cmd</b> value  of  the
       container  image.   However  if you use the array form, then the cmd will be appended onto the end of the
       entrypoint cmd and be executed together.

       Note: The string form is appended to the <b>sh</b> <b>-c</b>  command  as  the  entrypoint.  The  array  form  replaces
       entrypoint entirely.

       String Format:

       $ buildah from scratch
       $ buildah config --entrypoint "/usr/bin/notashell" working-container
       $ buildah inspect --format '{{ .OCIv1.Config.Entrypoint }}' working-container
       [<a href="file:/bin/sh">/bin/sh</a> -c /usr/bin/notshell]
       $ buildah inspect --format '{{ .Docker.Config.Entrypoint }}' working-container
       [<a href="file:/bin/sh">/bin/sh</a> -c /usr/bin/notshell]

       Array Format:

       $ buildah config --entrypoint '["/usr/bin/notashell"]' working-container
       $ buildah inspect --format '{{ .OCIv1.Config.Entrypoint }}' working-container
       [/usr/bin/notashell]
       $ buildah inspect --format '{{ .Docker.Config.Entrypoint }}' working-container
       [/usr/bin/notashell]

       <b>--env</b>, <b>-e</b> <u>env[=value]</u>

       Add  a  value  (e.g. env=<u>value</u>) to the environment for containers based on any images which will be built
       using the specified container. Can be used multiple times.  If <u>env</u> is named but neither <b>=</b> nor a <b>value</b>  is
       specified,  then  the value will be taken from the current process environment.  If <u>env</u> has a trailing <b>-</b>,
       then the <u>env</u> is removed from the config.  If the <u>env</u> is set to "-" then  all  environment  variables  are
       removed from the config.

       <b>--healthcheck</b> <u>command</u>

       Specify a command which should be run to check if a container is running correctly.

       Values can be <u>NONE</u>, "<u>CMD</u> ..." (run the specified command directly), or "<u>CMD-SHELL</u> ..." (run the specified
       command  using  the  system's  shell),  or  the  empty  value  (remove a previously-set value and related
       settings).

       Note: this setting is not present in the OCIv1 image format, so it is discarded when writing images using
       OCIv1 formats.

       <b>--healthcheck-interval</b> <u>interval</u>

       Specify how often the command specified using the <u>--healthcheck</u> option should be run.

       Note: this setting is not present in the OCIv1 image format, so it is discarded when writing images using
       OCIv1 formats.

       <b>--healthcheck-retries</b> <u>count</u>

       Specify how many times the command specified using the <u>--healthcheck</u> option can fail before the container
       is considered to be unhealthy.

       Note: this setting is not present in the OCIv1 image format, so it is discarded when writing images using
       OCIv1 formats.

       <b>--healthcheck-start-interval</b> <u>interval</u>

       Specify the time between health checks during the start period.

       Note: this setting is not present in the OCIv1 image format, so it is discarded when writing images using
       OCIv1 formats.

       <b>--healthcheck-start-period</b> <u>interval</u>

       Specify how much time can elapse after a container has started  before  a  failure  to  run  the  command
       specified  using  the  <u>--healthcheck</u>  option  should  be  treated  as an indication that the container is
       failing.  During this time period, failures will be attributed to the  container  not  yet  having  fully
       started,  and will not be counted as errors.  After the command succeeds, or the time period has elapsed,
       failures will be counted as errors.

       Note: this setting is not present in the OCIv1 image format, so it is discarded when writing images using
       OCIv1 formats.

       <b>--healthcheck-timeout</b> <u>interval</u>

       Specify how long to wait after starting the command specified using the <u>--healthcheck</u> option to wait  for
       the  command  to  return its exit status.  If the command has not returned within this time, it should be
       considered to have failed.

       Note: this setting is not present in the OCIv1 image format, so it is discarded when writing images using
       OCIv1 formats.

       <b>--history-comment</b> <u>comment</u>

       Sets a comment on the topmost layer in any images which will be created using the specified container.

       <b>--hostname</b> <u>host</u>

       Set the hostname to set when running containers based on any images built using the specified container.

       Note: this setting is not present in the OCIv1 image format, so it is discarded when writing images using
       OCIv1 formats.

       <b>--label</b>, <b>-l</b> <u>label</u>=<u>value</u>

       Add an image <u>label</u> (e.g. label=<u>value</u>) to the image configuration of any images which will be built  using
       the  specified  container.  Can  be  used  multiple  times.  If <u>label</u> has a trailing <b>-</b>, then the <u>label</u> is
       removed from the config.  If the <u>label</u> is set to "-" then all labels are removed from the config.

       <b>--onbuild</b> <u>onbuild</u> <u>command</u>

       Add an ONBUILD command to the image.  ONBUILD commands are automatically run when images are built  based
       on the image you are creating.

       Note: this setting is not present in the OCIv1 image format, so it is discarded when writing images using
       OCIv1 formats.

       <b>--os</b> <u>operating</u> <u>system</u>

       Set  the  target  <u>operating</u>  <u>system</u> for any images which will be built using the specified container.  By
       default, if the container was based on an image, its OS is  kept,  otherwise  the  host's  OS's  name  is
       recorded.

       <b>--os-feature</b> <u>feature</u>

       Set  the  name  of  a  required  operating  system  <u>feature</u>  for any images which will be built using the
       specified container.  By default, if the container was based on an image, the base  image's  required  OS
       feature  list is kept, if it specified one.  This option is typically only meaningful when the image's OS
       is Windows.

       If <u>feature</u> has a trailing <b>-</b>, then the <u>feature</u> is removed from the set of required features which will  be
       listed  in  the  image.   If  the <u>feature</u> is set to "-" then the entire features list is removed from the
       config.

       <b>--os-version</b> <u>version</u>

       Set the exact required operating system <u>version</u> for any images which will be built  using  the  specified
       container.   By  default, if the container was based on an image, the base image's required OS version is
       kept, if it specified one.  This option is typically only meaningful when the image's OS is Windows,  and
       is typically set in Windows base images, so using this option is usually unnecessary.

       <b>--port</b>, <b>-p</b> <u>port/protocol</u>

       Add  a <u>port</u> to expose when running containers based on any images which will be built using the specified
       container. Can be used multiple times.   To  specify  whether  the  port  listens  on  TCP  or  UDP,  use
       "port/protocol".  The default is TCP if the protocol is not specified. To expose the port on both TCP and
       UDP,  specify  the port option multiple times. If <u>port</u> has a trailing <b>-</b> and is already set, then the <u>port</u>
       is removed from the configuration. If the port is set to <b>-</b> then all exposed ports  settings  are  removed
       from the configuration.

       <b>--shell</b> <u>shell</u>

       Set  the  default  <u>shell</u>  to run inside of the container image.  The shell instruction allows the default
       shell used for the shell form of commands to be overridden. The default shell  for  Linux  containers  is
       "<a href="file:/bin/sh">/bin/sh</a> -c".

       Note: this setting is not present in the OCIv1 image format, so it is discarded when writing images using
       OCIv1 formats.

       <b>--stop-signal</b> <u>signal</u>

       Set  default  <u>stop</u>  <u>signal</u>  for container. This signal will be sent when container is stopped, default is
       SIGINT.

       <b>--unsetlabel</b> <u>label</u>

       Unset the image label, causing the label not to be inherited from the base image.

       <b>--user</b>, <b>-u</b> <u>user</u>[:<u>group</u>]

       Set the default <u>user</u> to be used when running containers based on this image.  The user can  be  specified
       as  a user name or UID, optionally followed by a group name or GID, separated by a colon (':').  If names
       are used, the container should include entries for those names in its <u><a href="file:/etc/passwd">/etc/passwd</a></u> and <u><a href="file:/etc/group">/etc/group</a></u> files.

       <b>--variant</b> <u>variant</u>

       Set the target architecture <u>variant</u> for any images which will be built using the specified container.  By
       default, if the container was based on an image, that image's target architecture and variant information
       is kept, otherwise the host's architecture and variant are recorded.

       <b>--volume</b>, <b>-v</b> <u>volume</u>

       Add a location in the directory tree which should be marked as a <u>volume</u> in any images which will be built
       using the specified container. Can be used multiple times. If <u>volume</u> has a trailing  <b>-</b>,  and  is  already
       set,  then  the  <u>volume</u>  is  removed  from  the config.  If the <u>volume</u> is set to "-" then all volumes are
       removed from the config.

       <b>--workingdir</b> <u>directory</u>

       Set the initial working <u>directory</u> for containers based on images which will be built using the  specified
       container.

</pre><h4><b>EXAMPLE</b></h4><pre>
       buildah config --author='Jane Austen' --workingdir='/etc/mycontainers' containerID

       buildah config --entrypoint /entrypoint.sh containerID

       buildah config --entrypoint '[ "/entrypoint.sh", "dev" ]' containerID

       buildah config --env foo=bar --env PATH=$PATH containerID

       buildah config --env foo- containerID

       buildah config --label Name=Mycontainer --label  Version=1.0 containerID

       buildah config --label Name- containerID

       buildah config --annotation note=myNote containerID


       buildah config --annotation note-
       buildah config --volume /usr/myvol containerID

       buildah config --volume /usr/myvol- containerID

       buildah config --port 1234 --port 8080 containerID

       buildah config --port 514/tcp --port 514/udp containerID

       buildah config --env 1234=5678 containerID

       buildah config --env 1234- containerID

       buildah config --os-version 10.0.19042.1645 containerID

       buildah config --os-feature win32k containerID

       buildah config --os-feature win32k- containerID

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <a href="../man1/buildah.1.html">buildah</a>(1)

buildah                                            March 2017                                  <u><a href="../man1/buildah-config.1.html">buildah-config</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>