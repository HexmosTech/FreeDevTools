<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>due - Dedicated User Environment.  A build environment for your build environments.</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/due">due_3.0.0-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       <b>due</b> - Dedicated User Environment.  A build environment for your build environments.

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>due</b> [<b>-r|–run</b> <u>args</u>] [<u>dedication</u>]
       <b>due</b> [ <b>–create</b> <u>args</u> ] [<u>dedication</u>]
       <b>due</b> [ <b>–delete</b> <u>term</u> ] [<u>dedication</u>]
       <b>due</b> [<b>-m</b>|<b>–manage</b> <u>args</u>] [<u>dedication</u>]
       <b>due</b> [<b>-v</b>|<b>–version</b>]
       <b>due</b> [<b>-h</b>|<b>–help</b>]

</pre><h4><b>DESCRIPTION</b></h4><pre>
       DUE  is a set of wrapper scripts for both creating Docker container based build environments, and running
       them with intelligent defaults so that the user can feel like they are still on the host system.

       Key features include:

       1 - Creating an account in the container for the user at run time and mounting the user’s  home/work  di‐
       rectory so configuration files are available.

       2 - List based browsing of images to run and active containers to log in to.

       3  - Use of container `templates' to pre configure and build containers for a particular target or Debian
       based operating system, eliminating errors caused by missing dependencies, or misconfiguration.

       4 - Commands can be run using the container without having to log into it, allowing for use in  automated
       build environments.

       5 - Compatibility with both Docker and Podman for running containers.

   <b>Functional</b> <b>Options</b>
       Each of these options has context specific help and sub commands

       <b>-r,</b> <b>–run</b>
              Start new containers.

       <b>–build,</b> <b>–duebuild</b>
              Execute container’s /usr/local/bin/duebuild script in current directory.  See the –run section for
              more.

       <b>–create</b>
              Make and configure new Docker images.

       <b>–delete</b>
              Delete existing Docker images that match the term.

       <b>-m,</b> <b>–manage</b>
              Manipulate and query existing images.

       <b>-h,</b> <b>–help</b>
              Usage information.

       <b>-v,</b> <b>–version</b>
              Print DUE’s version number.

   <b>–run</b> <b>options</b>
       These options are available after the –run argument, and relate to starting and logging in to containers.

   <b>Starting</b> <b>an</b> <b>image</b>
       <b>-i,</b> <b>–run-image</b> <b>[filter]</b>
              Allows  the  user  to reduce the number of images shown to run by restricting them to entries that
              contain [filter].  If only one image matches the filter, it will be  invoked  without  asking  the
              user to choose it.

       <b>-a,</b> <b>–all</b>
              Show  all  containers on the system.  DUE can be used to log in to containers that it did not cre‐
              ate, but the user may have to supply a default –username and –userid (usually –username  root  and
              –userid 0.  See below )

       <b>–ignore-type</b>

               When accessing the container, do not attempt to create a user
              account  for  the  user  logging in, and assume the container was not created by DUE.  This can be
              useful with image creation debug.

       <b>-c,</b> <b>–command</b> <b>[cmd]</b>
              Run [cmd] in the container using the –login-shell.  This must be the last command parsed, as [cmd]
              is handed off to be run in the container.  The primary use of this would be using the container to
              build without having to interactively log in to it.  Note: when issuing multiple commands,  remem‐
              ber to "" your arguments, and backslash () any semicolons (;) used to split up the commands.  Oth‐
              erwise the shell where the commands are invoked will take anything after the first ;, and treat it
              as  a  command to be run locally.  This can obfuscate things if the command can work inside or out
              of the container.
       Example: look at <a href="file:/proc">/proc</a> and the password file in a container: ./due –run –command “ls -lrt <a href="file:/proc">/proc</a>”  ;  “cat
       <a href="file:/etc/passwd">/etc/passwd</a>”

       <b>–build</b> <b>|</b> <b>–duebuild</b>
              If  there is a /usr/local/bin/duebuild script in the container, this option will run it with a de‐
              fault configuration, or take additional passed arguments if present.  Those  arguments  will  vary
              depending  on  the  nature of the target being built by the container’s duebuild script.  For more
              information, check the template/README.md for the image type, or use: due –duebuild –help  to  se‐
              lect a container and get its duebuild script’s help options directly.

       <b>–duebuild</b>
              Same  behavior  as –build, but a bit clearer that it is working with the selected container’s due‐
              build script.  One notable difference is that due –duebuild –help will select a container and exe‐
              cute duebuild –help to see the options provided by that particular script.

       <b>–dockerarg</b> <b>[arg]</b>
              Put [arg] in the docker run invocation.  For  multiple  arguments,  use  multiple  invocations  of
              –dockerarg.  This allows for things like running containers with –privileged

       <b>–debug</b> Sets defaults of –username root –userid 0 and the –any option to show images that were not created
              by DUE.  Helpful for internal debug if image creation dies running internal configuration scripts.

       <b>–container-name</b> <b>name</b>
              Change the name of the running container.  This can provide clarity in a build automation environ‐
              ment,  where  containers  may  be  automatically spun up.  Note that if the new name does not have
              `due' in it, it will be filtered out from DUE’s –login option unless –all is also provided.   This
              may or may not be desirable behavior.

       <b>–home-dir</b> <b>[host</b> <b>path]</b>
              Absolute  path to a directory to use as the home directory when the user logs in.  Defaults to the
              user’s home directory unless overridden with this argument, or set otherwise in /etc/due/due.conf,
              or <a href="file:~/config/due/due.conf">~/config/due/due.conf</a>

       <b>–mount-dir</b> <b>[hp:cp]</b>
              Mount absolute path on host system (hp) at absolute path in container.  The colon (:) is necessary
              to separate the two.  Multiple –mount-dir commands can be used in a single  invocation.   Example:
              mount host <a href="file:/tmp">/tmp</a> dir in container /var/build: –mount-dir <a href="file:/tmp/">/tmp/</a>:var/build

   <b>Logging</b> <b>in</b> <b>to</b> <b>a</b> <b>running</b> <b>container</b>
       <b>-l,</b> <b>–login</b>
              Choose an existing container to log in to.

       <b>–username</b> <b>[username]</b>
              Name to use when logging in.

       <b>–userid</b> <b>[id#]</b>
              User ID to use when logging in.

       <b>–groupname</b> <b>[groupname]</b>
              Container user’s default group

       <b>–groupid</b> <b>[id#]</b>
              ID of container user’s group

       <b>–login-shell</b> <b>[path]</b>
              Program to use as login

       <b>–help-runtime</b>
              Invoke runtime help

       <b>–help-runtime-examples</b>
              Show examples of use

   <b>–create</b> <b>options</b>
       These  options  are  accessed after the –create argument, and, predictably enough, relate to creating new
       images.

   <b>Creation</b> <b>Overview</b>
       Containers created by DUE will always have files from ./templates/common-templates in every  image.   The
       primary  example  of  this is the <b>container-create-user.sh</b> script that sets up an account for the user in
       the container, and allows commands to be run in the container as if it was the user invoking them.

       The order of creation is as follows, using the debian-package template as an example, where the resulting
       image will be named `debian-package-10'

       1 - The contents of common-templates are copied to  a  debian-package-10-template-merge  directory  under
       ./due-build-merge/
       2  -  The  contents  of  the  debian-package  template  directory copied in to the debian-package-10-tem‐
       plate-merge directory and will overwrite any files with identical names.
       3 - Any REPLACE_ fields in the template files are replaced with values supplied  from  the  command  line
       (such as the starting container image) and all files are copied to ./due-build-merge/debian-package-10
       4  - The ./due-build-merge/debian-package-10/Dockerfile.create file is used to create the image from this
       build directory.

   <b>Creation</b> <b>tips</b>
       Quick image changes can be made by editing the build directory  (  ./due-build-merge/debian-package-10  )
       and re running ./due –create –build-dir ./due-build-merge/debian-package-10

       The  final  image will hold a /due-configuration directory, which holds everything that went into the im‐
       age.  This is very useful for install script debug inside the container.

       A list of available default configurations is provided by running: due –create –help This will parse  the
       README.md  files  under  the ./templates directory looking for specific strings.  This output can be fil‐
       tered by using wildcard syntax as follows: due –create –help –filter

   <b>Advanced</b> <b>image</b> <b>creation</b>
       DUE 3.0.0 introduced hierarchical template parsing, where a template could be a combination of files pro‐
       vided by `sub-type' directories, to reduce file duplication.  With this, files with identical  names  and
       paths will overwrite the ones provided by higher directories.

       Example: Given directory structure: due/templates/foo/sub-type/bar/sub-type/baz

       Image creation using the `baz' template will be: 1 - files from templates/common-templates 2 - plus files
       from  foo overwriting any files with the same relative path from common-templates 3 - plus files from bar
       overwriting foo files the same way 4 - plus files from baz overwriting bar files the same way.

       While not normally needed, this may be useful for supporting a number of Images with minor but  important
       differences.  See templates/README.md for more information.

   <b>Creation</b> <b>example</b>
       1 - Configure an image build directory under due-build-merge named from –name Mandatory:

       <b>–from</b> <b>[name:tag]</b>
              Pull name:tag from registry to use as starting point for the image.

       <b>–use-template</b> <b>[role]</b>
              Use files from templates/[role] to generate the config directory.

       <b>–description</b> <b>“desc”</b>
              Quoted string to describe the container on login.

       <b>–name</b> <b>name</b>
              Name for resulting image and config directory.  Ex: debian-stretch-build, ubuntu-18.04-build, etc

       Optional:

       <b>–prompt</b> <b>[prompt]</b>
              Set in container prompt to [prompt] to provide user context

       <b>–no-image</b>
              With  –create,  allow  directories  to be created, but do not try to build the image.  Effectively
              stops use of –dir.  Useful for debugging directory configuration issues.

       <b>–filter</b> <b>[term]</b>
              With –create –help, filter examples to contain [term].

       2 - Build a Docker image from the image build directory.

       <b>–dir</b> <b>[dirname]</b>
              Build using an existing configuration directory.

       <b>–clean</b> Delete the due-build-merge staging directories.

   <b>–manage</b> <b>options</b>
       These options are accessed after the –manage argument, and can make working with containers/images  easi‐
       er.

       <b>-l,</b> <b>–list-images</b>
              List images created by DUE.

       <b>–stop</b>  Use the menu interface to stop a running container.  Works with –all to show containers not start‐
              ed  by the user.  If is supplied, it will match all the user’s containers to that pattern and pro‐
              duce a script that can be edited and run to delete the listed containers.  NOTE: –all –stop can be
              used to do some serious damage.  NOTE: since all DUE containers are started with -rm,  stopping  a
              container deletes it and all the data in it from memory.

       <b>–export-container</b> <b>name</b>
              Export a running container to disk as a Docker image named name.  Note that to run the saved image
              it must be added back to the system with –import.

       <b>–export-image</b> <b>name</b>
              Save  an  existing  Docker image as a file that can be copied elsewhere.  If name is not supplied,
              the user can choose from a menu.

       <b>–import-image</b> <b>name</b>
              Import a docker image stored on disk as tar file

       <b>–copy-config</b>
              Create a personal DUE configuration file in <a href="file:~/.config/due/due.config">~/.config/due/due.config</a>

       <b>–make-dev-dir</b> <b>[dir]</b>
              Populate a local directory for DUE container development.

       <b>–list-templates</b>
              List available templates.

       <b>–delete-matched</b> <b>[term]</b>
              Delete containers that contain this term.  USE WITH CAUTION!

       <b>–docker-clean</b>
              Run `docker system prune ; docker image prune' to reclaim disk space.

       <b>–help-examples</b>
              Examples of using management options.

</pre><h4><b>FILES</b></h4><pre>
       <u>/etc/due/due.conf</u>
              Global configuration file

       <u><a href="file:~/.conf/due/due.conf">~/.conf/due/due.conf</a></u>
              Per-user default configuration file.  Overrides the global one.  due --manage  --copy-config  will
              set that up for the user.

</pre><h4><b>ENVIRONMENT</b></h4><pre>
       The configuration file sets up the following variables:

       DUE_ENV_DEFAULT_HOMEDIR  -  evaled to define the user’s home directory.  This can be useful if there is a
       naming convention for work directories on shared systems, or your home directory is an NFS  mount  (which
       can create
       strange behavior when mounted in Docker) or you need to use a bigger build directory.

       DUE_USER_CONTAINER_LIMIT  -  limit  the number of containers a user is allowed to run.  Handy on a shared
       system to remind people of what they have running.  This can easily be circumvented, though.

</pre><h4><b>BUGS</b></h4><pre>
       See GitHub Issues: [https://github.com/[CumulusNetworks]/[DUE]/issues]

</pre><h4><b>AUTHOR</b></h4><pre>
       Alex Doyle &lt;<a href="mailto:adoyle@nvidia.com">adoyle@nvidia.com</a>&gt;

</pre><h4><b>COPYRIGHT</b></h4><pre>
       SPDX-License-Identifier: MIT

       Copyright (c) 2021 Nivia Corporation.
       Copyright (c) 2019,2020 Cumulus Networks, Inc.

       Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associ‐
       ated documentation files (the “Software”), to deal in the Software without restriction, including without
       limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of
       the Software, and to permit persons to whom the Software is furnished to do so, subject to the  following
       conditions:

       The above copyright notice and this permission notice shall be included in all copies or substantial por‐
       tions of the Software.

       THE  SOFTWARE  IS  PROVIDED  “AS IS”, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT
       LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND  NONINFRINGEMENT.   IN
       NO  EVENT  SHALL  THE  AUTHORS  OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
       WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFT‐
       WARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man4/due.conf.4.html">due.conf</a>(4)</b>

Version 3.0.0                                                                                             <u><a href="../man1/DUE.1.html">DUE</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>