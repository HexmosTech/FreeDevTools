<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ebook - create and manipulate e-books from the command line</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/libebook-tools-perl">libebook-tools-perl_0.5.4-2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       ebook - create and manipulate e-books from the command line

</pre><h4><b>SYNOPSIS</b></h4><pre>
        ebook COMMAND arg1 arg2 --opt1 --opt2

       See also "EXAMPLES".

</pre><h4><b>COMMANDS</b></h4><pre>
   <b>"adddoc"</b>
       Adds a documents to both the book manifest and spine.

       <u>Options</u>

       "--opffile"
       "--opf"
           The OPF file to modify.  If not specified one will be searched for in the current directory.

       "--identifier"
       "--id"
           The ID attribute to use for the added manifest item.  This is required, and ebook will abort if it is
           not specified.

       "--mimetype"
       "--mtype"
           The  mime  type string to use for the added manifest item.  If not specified, it will be autodetected
           via File::Mimeinfo::Magic.  This may not result in an optimal string.

       <u>Example</u>

        ebook adddoc --opf mybook.opf --id 'text-ch1' chapter1.html

   <b>"additem"</b>
       Add an item to the book manifest, but not the spine.

       Note that the "fix" command will automatically insert manifest items for any local  files  referenced  by
       existing manifest items.

       <u>Options</u>

       "--opffile"
       "--opf"
           The OPF file to modify.  If not specified one will be searched for in the current directory.

       "--identifier"
       "--id"
           The ID attribute to use for the added manifest item.  This is required, and ebook will abort if it is
           not specified.

       "--mimetype"
       "--mtype"
           The  mime  type string to use for the added manifest item.  If not specified, it will be autodetected
           via File::Mimeinfo::Magic.  This may not result in an optimal string.

       <u>Example</u>

        ebook additem --opf mybook.opf --id 'illus-ch1' chapter1-illus.jpg

   <b>"bisac"</b>
       Search for a BISAC code matching a case-insensitive regular expression.

       <u>Options</u>

       "regexp"
           The first argument is taken as a regular expression to use for the search.  If this is either '.'  or
           not specified, the entire list of valid codes is printed.

           This requires that the BISAC codes be downloaded ahead of time.  (See "dlbisac".)

   <b>"blank"</b>
       Create a blank e-book structure.

       <u>Options</u>

       "--opffile filename.opf"
       "--opf filename.opf"
           Use  the specified OPF file.  This can also be specified as the first non-option argument, which will
           override this option if it exists.  If no file is specified, the program will abort  with  an  error.
           =item "--author" "Author Name"

           The author of the book.  If not specified, defaults to "Unknown Author".

       "--title" "Title Name"
           The title of the book.  If not specified, defaults to "Unknown Title".

       "--dir directory"
       "-d directory"
           Output the OPF file in this directory, creating it if necessary.

       <u>Example</u>

        ebook blank newfile.opf --author "Me Myself" --title "New File"
        ebook blank --opffile newfile.opf --author "Me Myself" --title "New File"

       Both of those commands have the same effect.

   <b>"config"</b>
       Make changes to the EBook::Tools configuration file.

       The   configuration   file   itself  is  located  as  either  "$ENV{HOME}/.ebooktools/config.ini"  or  as
       "$ENV{USERPROFILE}\Application Data\EBook-Tools", depending on platform  and  which  directory  is  found
       first.  See "<b>userconfigdir()</b>" in EBook::Tools for details.

       <u>Arguments</u> <u>/</u> <u>Subcommands</u>

       Configuration is always handled in the format of:

        ebook config subcommand value

       •   "default"

           Replace  any  existing  configuration file with a default template.  This creates the file if it does
           not exist.  This should be done once before any other configuration manipulation is  done,  unless  a
           configuration file has been manually created ahead of time.

       •   "debug"

           Sets  the  default  debugging  level when no verbosity is specified.  Note that verbosity can only be
           increased, not decreased, with the "-v" option.

       •   "tidysafety"

           Sets the default safety level when tidy is used.  Valid  values  are  from  0-4.   See  "unpack"  for
           details on what each value means.

       •   "mobipids"

           A  comma-separated list of Mobipocket PIDs to try to use to decrypt e-books.  This value is only used
           if the appropriate plug-in modules or helper applications are available,  as  DRM  is  not  supported
           natively  by EBook::Tools.  Note that if the PID includes a $ character, the entire PID string has to
           be enclosed in single quotes.

       <u>Examples</u>

        ebook config default
        ebook config debug 2
        ebook config mobipids '1234567890,2345678$90'

   <b>"convert"</b>
       Unpacks the ebook specified as the first argument, runs standard fixes on the contents,  and  repacks  it
       into  a  new  format  in  the output file specified as the second argument.  Currently the only supported
       output format is epub, which is the format you will get irrespective of the extension you  actually  give
       the output file.

       <u>Options</u>

           All options from "unpack" and "fix" are technically valid here as well, though of course some options
           are nonsensical in this context and will likely break the conversion (e.g. --nosave).

       <u>Example</u>

        ebook convert MyBook.prc MyBook.epub
        ebook convert --name MyBook.lit /home/myname/MyBook.epub

   <b>"dlbisac"</b>
       Downloads  and caches the Book Industry Study Group BISAC codes into a local database.  This will destroy
       the existing contents of that table if this has been done previously.

   <b>"downconvert"</b>
   <b>"dc"</b>
       If the appropriate helpers or plugins are available, write  a  copy  of  the  input  file  with  the  DRM
       restrictions removed.

       NOTE:  no  actual DRM-removal code is present in this package.  This is just presents a unified interface
       to other programs that have that capability.

       <u>Arguments</u>

       •   "infile"

           The first non-option argument is taken to be the input file.  If not  specified,  the  program  exits
           with an error.

       •   "outfile"

           The  second  non-option  argument is taken to be the output file.  If not specified, the program will
           use a name based on the input file, appending '-nodrm' to the basename and keeping the extension.  In
           the special case of Mobipocket files ending in '-sm', the '-sm' portion of  the  basename  is  simply
           removed, and nothing else is appended.

       •   "key"

           The  third  non-option  argument  is  taken  to  be  either the decryption key/PID, or in the case of
           Microsoft Reader (.lit) files, the "keys.txt" file containing the decryption keys.

           If not specified, this will be looked up from the configuration file.  Convertlit  keyfiles  will  be
           looked for in standard locations.  If no key is found, the command aborts and exits with an error.

       <u>Example</u>

        ebook downconvert NewBook.lit NewBook-readable.lit mykeys.txt
        ebook dc MyBook-sm.prc

   <b>"fix"</b>
       Find  and fix problems with an e-book, including enforcing a standard specification and ensuring that all
       linked objects are present in the manifest.

       <u>Options</u>

       "--opffile filename.opf"
       "--opf filename.opf"
           Use the specified OPF file.  This can also be specified as the first non-option argument, which  will
           override this option if it exists.  If no file is specified, one will be searched for.

       "--oeb12"
           Force the OPF to conform to the OEB 1.2 standard.  This is the default.

       "--opf20"
           Force  the  OPF  to  conform  to the OPF 2.0 standard.  If both this and "--oeb12" are specified, the
           program will abort with an error.

       "--mobi"
           Correct Mobipocket-specific elements, creating an output element to force UTF-8 output  if  one  does
           not yet exist.

       "--erotic" or "--sex"
           Enable special handling for erotic fiction (most notably special subject normalization rules).

       "--names"
           Normalize  names  to standard capitalization and format (primary name display is "First Middle Last",
           but file-as is "Last, First Middle".

           This is not done by default as it can damage unusual but correct names.

   <b>"genepub"</b>
       Generate a .epub book from existing OPF data.

       <u>Options</u>

       "--input filename.opf"
       "--i filename.opf"
       "--opffile filename.opf"
       "--opf filename.opf"
           Use the specified OPF file.  If no file is specified, one will be searched for.

       "--output bookname.epub"
       "-o bookname.epub"
           Use the specified name for the final output file.  This can also be specified as the first non-option
           argument, which will override this option if it exists.  If not specified, the  book  will  have  the
           same filename as the OPF file, with the extension changed to ".epub".

       "--dir directory"
       "-d directory"
           Output  the final .epub book into the specified directory.  The default is to use the current working
           directory.

       <u>Example</u>

        ebook genepub mybook.opf -o my_special_book.epub -d ../epubbooks

       or in the simplest case:

        ebook genepub

   <b>"genimp"</b>
       Generate a eBookwise .imp book from a .RES directory

       <u>Options</u>

       "--input DIRNAME.RES"
       "-i DIRNAME.RES"
           Specifies the resource directory to use for input.  A valid resource directory will contain at  least
           a "RSRC.INF" file, a "DATA.FRK" file, and several other files with four-capital-letter filenames.

           This  can  also  be specified as the first non-option argument, which will override this option if it
           exists.  If not specified, the current directory will be used.

       "--output bookname.epub"
       "-o bookname.epub"
           Use the specified name for the final output file.  If not specified, the  book  will  have  the  same
           filename as the input, with the extension changed to ".imp".

       <u>Examples</u>

        ebook genimp MyUnpackedBook.RES MyBook.imp
        ebook genimp --resdir ../MyUnpackedBook.RES -f imp/MyBook.imp

   <b>"genmobi"</b>
       Generate a Mobipocket .mobi/.prc book from OPF, HTML, or ePub input.

       <u>Options</u>

       "--input filename"
       "--i filename"
           Use the specified file for input.  Valid formats are OPF, HTML, and ePub.  This can also be specified
           as  the  first  non-option  argument,  which  will  override this option if it exists.  If no file is
           specified, an OPF file in the current directory will be searched for.

       "--output bookname.prc"
       "-o bookname.prc"
           Use the specified name for the final output file.  If not specified, the  book  will  have  the  same
           filename  as  the  input  file, with the extension changed to ".mobi" (this file is always created by
           "mobigen", specifying a different filename only causes it to be renamed afterwards).

           This can also be specified as the second non-option argument, which will override this option  if  it
           exists.

       "--dir directory"
       "-d directory"
           Output  the  final  book  into  the  specified  directory.  The default is to use the current working
           directory, which is where "mobigen" will always place it initially; if specified this only forces the
           file to be moved after generation.

       "--compression x"
       "-c x"
           Use the specified compression level "x", where 0 is no compression, 1 is PalmDoc compression,  and  2
           is HUFF/CDIC compression.  If not specified, defaults to 1 (PalmDoc compression).

       <u>Example</u>

        ebook genmobi mybook.opf -o my_special_book.prc -d ../mobibooks
        ebook genmobi mybook.html mybook.prc -c2

       or in the simplest case:

        ebook genmobi

   <b>"genncx"</b>
       Given  an  OPF  file,  creates  a  NCX-format  table  of contents from the package unique-identifier, the
       dc:title, dc:creator, and spine elements, and then add the NCX entry to the manifest if it is not already
       referenced.

       The OPF file will be cleaned to OPF20 format before this happens.

       <u>Options</u>

       "--opffile filename.opf"
       "--opf filename.opf"
           Use the specified OPF file.  This can also be specified as the first non-option argument, which  will
           override this option if it exists.  If no file is specified, one will be searched for.

   <b>"impmeta"</b>
       Set specific metadata values in an ETI .imp file.

       <u>Options</u>

       •   "--input filename.imp"

       •   "-i filename.imp"

           Specify  the  input filename.  This can also be specified as the first argument, in which case the -i
           option will be ignored.

       •   "--output modified.imp"

       •   "-o modified.imp"

           Specify the output filename.  If not specified, the input file will be overwritten.

       •   "--identifier"

           Specify the identifier metadata.

       •   "--category"

       •   "--cat"

           Specify the category metadata.

       •   "--subcategory"

       •   "--subcat"

           Specify the subcategory metadata.

       •   "--title"

           Specify the title metadata.

       •   "--lastname"

           Specify the author last name metadata.

       •   "--middlename"

           Specify the author middle name metadata.

       •   "--firstname"

           Specify the author first name metadata.  Note that IMP files commonly place the  full  name  in  this
           component, and leave the middlename and lastname entries blank.

       <u>Examples</u>

        ebook impmeta mybook.imp --title 'Fixed Title' --lastname 'John Q. Brandy'
        ebook impmeta -i mybook.imp -o fixed.imp --title 'Fixed Title'

   <b>"setcover"</b>
       Sets the cover image

       Takes as a single argument the href of the file to use.

       <u>Options</u>

       •   "--opffile"

       •   "--opf"

           Specifies the OPF file to modify.  If not specified, the script will attempt to find one

       •   "--identifier"

       •   "--id"

           Specifies the ID to assign to the associated manifest item.

   <b>"setmeta"</b>
       Set specific metadata values on an OPF file, creating a new entry if none exists.

       Both the element to set and the value are specified as additional arguments, not as options.

       The elements that can be set are currently:

       author
       date
       description
       publisher
       rights
       series
       subject
       title
       type

       The 'series' values can take an extra argument containing the series index position.

       The  'subject' elements can be added multiple times (including in a single command-line, though --id will
       only set the ID on the first one specified).  Other entries will be overwritten.

       The element argument can be shortened to the minimum number of letters necessary to uniquely identify it.

       <u>Options</u>

       •   "--opffile" =item * "--opf"

           Specifies the OPF file to modify.  If not specified, the script will  attempt  to  find  one  in  the
           current directory.

       •   "--delete"

           Allows the deletion of subject and series metadata.  Has no effect on other elements.

       •   "--fileas"

           Specifies the 'file-as' attribute when setting an author.  Has no effect on other elements.

       •   "--identifier"

       •   "--id"

           Specifies the ID to assign to the element.

       <u>Examples</u>

        ebook setmeta series 'Some Other Series' 03
        ebook setmeta title 'My Great Title'
        ebook setmeta t 'My Great Title'
        ebook --opf newfile.opf setmeta author 'John Smith' --fileas 'Smith, John' --id mainauthor

   <b>"splitmeta"</b>
       Split the &lt;metadata&gt;...&lt;/metadata&gt; block out of a pseudo-HTML file that contains one.

   <b>"splitpre"</b>
       Split  &lt;pre&gt;...&lt;/pre&gt;  blocks  out of an existing HTML file, wrapping each one found into a separate HTML
       file.

       The first non-option argument is taken to be the input file.  The second non-option argument is taken  to
       be the basename of the output files.

   <b>"stripscript"</b>
       Strips &lt;script&gt;...&lt;/script&gt; blocks out of a HTML file.

       The  first non-option argument is taken to be the input file.  The second non-option argument is taken to
       be the output file.  If the latter is not specified, the input file will be overwritten.

       <u>Options</u>

       •   "--noscript"

           Strips &lt;noscript&gt;...&lt;/noscript&gt; blocks as well.

   <b>"tidyxhtml"</b>
       Run tidy on a HTML file to enforce valid XHTML output (required by the OPF 2.0 specification).

   <b>"tidyxml"</b>
       Run tidy an a XML file (for neatness).

   <b>"unpack_ebook"</b>
       Unpacks an ebook into its component parts, creating an OPF for them if necessary.

       <u>Options</u>

       "--input" =item "-i"
           The filename of the ebook to unpack.  This can also be specified as the first non-option argument, in
           which case it will override the option if it exists.

       "--dir" =item "-d"
           The directory to unpack into, which will be created if it does not exist, defaulting to the  filename
           with  the  extension removed.  This can also be specified as the second non-option argument, in which
           case it will override the option if it exists.

       "--format"
           The unpacking routines should autodetect the type of book under normal conditions.  If  autodetection
           fails, a format can be forced here.  See EBook::Tools::Unpack for a list of available formats.

       "--htmlconvert"
           Attempt to convert the extracted text to HTML.  This is obviously only of value if the format doesn't
           use HTML normally.

       "--raw"
           This  causes  a  lot  of  raw,  unparsed,  unmodified data to be dumped into the directory along with
           everything else.  It's useful for debugging exactly what was in the file being unpacked, but not  for
           much else.

       "--author"
           Set  the  primary author of the unpacked e-book, overriding what is detected.  Not all e-book formats
           contain author metadata, and if none is found and this is not specified the primary  author  will  be
           set to 'Unknown Author'.

       "--title"
           Set  the  title of the unpacked e-book, overriding what is detected.  A title will always be detected
           in some form from the e-book, but the exact text can be overridden here.

       "--opffile"
       "--opf"
           The filename of the OPF metadata file  that  will  be  generated.   If  not  specified,  defaults  to
           "content.opf".

       "--tidy"
           Run  tidy  on  any  HTML  output  files  to  convert  them  to  valid XHTML.  Be warned that this can
           occasionally change the formatting, as Tidy isn't very forgiving on certain common  tricks  (such  as
           empty &lt;pre&gt; elements with style elements) that abuse the standard.

       "--tidycmd"
           The  tidy  executable  name.   This  has  to be a fully qualified pathname if tidy isn't on the path.
           Defaults to 'tidy'.

       "--tidysafety"
           The safety level to use when running tidy (default is 1).  Potential values are:

       "$tidysafety &lt; 1":
           No checks performed, no error files kept, works like a clean tidy -m

           This setting is DANGEROUS!

       "$tidysafety == 1":
           Overwrites original file if there were no errors, but even if there were warnings.  Keeps  a  log  of
           errors, but not warnings.

       "$tidysafety == 2":
           Overwrites  original  file  if there were no errors, but even if there were warnings.  Keeps a log of
           both errors and warnings.

       "$tidysafety == 3":
           Overwrites original file only if there were no errors or warnings.  Keeps a log of  both  errors  and
           warnings.

       $tidysafety = 4&gt;:
           Never overwrites original file.  Keeps a log of both errors and warnings.

       <u>Examples</u>

        ebook unpack mybook.pdb My_Book --author "By Me"
        ebook unpack -i mybook.pdb -d My_Book --author "By Me"

       Both of the above commands do the same thing

</pre><h4><b>EXAMPLES</b></h4><pre>
        ebook splitmeta book.html mybook.opf
        ebook tidyxhtml book.html
        ebook tidyxml mybook.opf
        ebook fix mybook.opf --oeb12 --mobi
        ebook genepub

        ebook blank newbook.opf --title "My Title" --author "My Name"
        ebook adddoc myfile.html
        ebook fix newbook.opf --opf20 -v
        ebook genepub

        ebook unpack mybook.pdb my_book
        cd my_book
        ebook addoc new_document.html
        ebook fix
        ebook genepub

</pre><h4><b>BUGS/TODO</b></h4><pre>
       •   Need  to  implement  a  one-pass  conversion  from  one format to another.  This will wait until more
           formats are supported by the underlying modules, however.

       •   Documentation is incomplete

       •   Not all configuration file options are actually used

</pre><h4><b>COPYRIGHT</b></h4><pre>
       Copyright 2008 Zed Pobre

</pre><h4><b>LICENSE</b></h4><pre>
       Licensed to the public under the terms of the GNU GPL, version 2.

perl v5.40.0                                       2025-01-10                                          <u><a href="../man1p/EBOOK.1p.html">EBOOK</a></u>(1p)
</pre>
 </div>
</div></section>
</div>
</body>
</html>