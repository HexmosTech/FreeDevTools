<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>dh_fortran_lib - Fortran library installation support</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/dh-fortran-mod">dh-fortran-mod_0.43_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       dh_fortran_lib - Fortran library installation support

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>dh_fortran_lib</b> [<u>debhelper</u> <u>options</u>] <b>--flavor=</b><u>flavor</u> [<b>--sourcedir=</b><u>dir</u>] [<b>--no-orig-library</b>]
       [<b>--no-create-in-sourcedir</b>] [<u>libname</u> <u>destination</u> ...]

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>dh_fortran_lib</b> is a debhelper program that enables multiple compiler flavous of a Fortran library to be
       installed in parallel by mangling the library filename and SONAME.

       Fortran libraries compiled by different compilers are not expected to be ABI-compatible, and hence for
       multiple compilers to be supported simultaneously the libraries must be named differently, and shared
       libraries need to include the  compiler flavor in the SONAME.

       <b>dh_fortran_lib</b> makes this possible without changes being necessary to the upstream library code.

       It does this by renaming a library, for example:

               $(LIBDIR)/libfiat.so.1.2 =&gt; $(LIBDIR)/libfiat-gfortran.so.1.2
       =back

       Symlinks also get renamed:

               $(LIBDIR)/libfiat.so.1 =&gt; $(LIBDIR)/libfiat-gfortran.so.1

       A per-flavor compilation link is added:
             $(LIBDIR)/fortran/gfortran/libfiat.so -&gt; $(LIBDIR)/libfiat-gfortran.so.1.2

       and the SONAME in the ELF file is changed:

               $ readelf -a $(LIBDIR)/libfiat.so.1.2 | grep SONAME
                       0x000000000000000e (SONAME)             Library soname: [libfiat.so.1]
               $ readelf -a $(LIBDIR)/libfiat-gfortran.so.1.2 | grep SONAME
                       0x000000000000000e (SONAME)             Library soname: [libfiat-gfortran.so.1]

       For static files, we  just rename and add symlinks:

               $(LIBDIR)/libfiat.a =&gt; $(LIBDIR)/libfiat-gfortran.a

               $(LIBDIR)/fortran/gfortran/libfiat.a =&gt; $(LIBDIR)/libfiat-gfortran.a

       The consequence of this is that any library that builds against <u>libfiat</u> with appropriate search paths set
       will use <u>libfiat-gfortran</u> instead. This enables parallel builds with multiple compiler flavors to be
       installed simultaneously.

</pre><h4><b>USAGE</b></h4><pre>
       The expected usage is that this will be called in debian/rules as:

               dh_fortran_lib --flavor=$(FLAVOR) $(BUILDDIR)/XXX/libfiat-gfortran.so.1

       The files are installed in the sourcedir (usually debian/tmp) by default.

</pre><h4><b>OPTIONS</b></h4><pre>
       <b>--flavor=</b>dir =item <b>--sourcedir=</b><u>dir</u> =item <b>-n</b>, <b>--no-orig-library</b>
           Look in the specified directory for files to be installed.

           <b>--no-orig-library</b>  adds the library name (with default path) to the list of files not to be installed
           by debhelper.

</pre><h4><b>TODO</b></h4><pre>
       (1) Do we really want to support --no-orig-library, blocking  install  of  unmangled  library  ?   (2)  2
       install variants;
          dh_fortran_lib --flavor=F LIBBDIR/libfiat.so.4.1
          # installs in debian/tmp ; simplest
          dh_fortran_lib  -p  libfiat-dev LIBBDIR/libfiat.so.4.1 (3) what about reading .fortran-lib files? ugly
       build-paths messy to include in these

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man7/debhelper.7.html">debhelper</a></b>(7)

</pre><h4><b>AUTHORS</b></h4><pre>
       Alastair McKinstry &lt;<a href="mailto:mckinstry@debian.org">mckinstry@debian.org</a>&gt;

       Lots of code stolen shamelessly from dh_install (Joey  Hess  &lt;<a href="mailto:joeyh@debian.org">joeyh@debian.org</a>&gt;  and  SÃ©bastien  Villemot
       &lt;<a href="mailto:sebastien@debian.org">sebastien@debian.org</a>&gt;).

dh_fortran_lib v0.43                               2025-02-24                                  <u><a href="../man1/DH_FORTRAN_LIB.1.html">DH_FORTRAN_LIB</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>