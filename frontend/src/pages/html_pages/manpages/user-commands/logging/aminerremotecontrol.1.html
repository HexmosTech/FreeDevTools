<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>aminerremotecontrol - lightweight tool for log checking, log analysis</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/logdata-anomaly-miner">logdata-anomaly-miner_2.6.1-2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       aminerremotecontrol - lightweight tool for log checking, log analysis

</pre><h4><b>SYNOPSIS</b></h4><pre>

       <b>aminerremotecontrol</b> [<b>[--exec</b> <u>command</u><b>]</b> <b>|</b> <b>[--exec-file</b> <u>file</u> <b>]</b>] <b>[OPTIONS]...</b>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This manual page documents briefly the <b>aminerremotecontrol</b> command. The command executes arbitrary remote
       control commands in a running aminer child process. As child process is usually running with lowered
       privileges or SELinux/AppArmor confinement, you may observe unexpected results when accessing resources
       outside the child process, e.g. files. For more details see also packaged documentation at
       /usr/share/doc/logdata-anomaly-miner.

   <b>Example</b> <b>usecases:</b>
       <b>Print</b> <b>a</b> <b>property</b> <b>of</b> <b>the</b> <b>running</b> <b>AminerConfig:</b>
           /usr/bin/aminerremotecontrol --data '["LogResourceList"]' --exec '
           print_config_property(analysis_context, "%s" % remote_control_data[0])'

       <b>Print</b> <b>the</b> <b>complete</b> <b>AminerConfig:</b>
           /usr/bin/aminerremotecontrol --exec 'print_current_config(analysis_context)'

       <b>Print</b> <b>a</b> <b>property</b> <b>of</b> <b>the</b> <b>running</b> <b>AminerConfig,</b> <b>change</b> <b>it</b> <b>and</b> <b>confirm</b> <b>the</b> <b>changed</b> <b>value</b> <b>by</b> <b>printing</b> <b>it</b>
       <b>again:</b>
           /usr/bin/aminerremotecontrol --data '["Resources.MaxMemoryUsage", -1]' --exec '
           print_config_property(analysis_context, "%s" % remote_control_data[0])' --exec
           'change_config_property(analysis_context, "%s" % remote_control_data[0], remote_control_data[1])'
           --exec ' print_config_property(analysis_context, "%s" % remote_control_data[0])'

</pre><h4><b>OPTIONS</b></h4><pre>
       with long options starting with two dashes ('-'). A summary of options is included below. For a complete
       description, see the <b><a href="../man1/info.1.html">info</a></b>(1) files.

       <b>--control-socket,</b> <b>-c</b> <u>socket</u>
           Specify the Unix domain remote control socket path, otherwise /var/run/aminer-remote.socket is used.
           The socket is opened by aminer when 'RemoteControlSocket' feature is enabled in configuration. As the
           socket is of SOCK_STREAM type, it may also be forwarded via any other stream forwarders, e.g. socat
           (see UNIX-CONNECT and UNIX-LISTEN) and SSH (see LocalForward, DynamicForward). Access control is only
           done by file system permissions (DAC) of the socket, so make sure not to widen the access on error.

       <b>--exec,</b> <b>-e</b> <u>command</u>
           For each --exec option, the next argument is sent in a separate remote execution request using
           additional execution data (see --data). The command is executed in a separate execution namespace
           with only some variables added to the local namespace, e.g. execution data is available as
           'remote_control_data'. When setting the local variable 'remoteControlResponse' within the executed
           command, the object is serialized using json and sent back in the response.

       <b>--exec-file,</b> <b>-f</b> <u>file</u>
           For each --exec-file option, the named file is loaded and content submitted in the very same way as
           if --exec parameter with content as string would have been used.

       <b>--data,</b> <b>-d</b> <u>data</u>
           This parameter defines a json string defining Python objects, that will be sent with all subsequent
           --exec operations until changed again using another --data option. Take into account, that there are
           size limits for the request, very large data objects may exceed those limits. The execution context
           will expose the data as variable 'remote_control_data'.

       <b>--string-response,</b> <b>-s</b>
           When set, aminerremotecontrol will not pass the result to repr. The returned object is just converted
           to a plain string via str(object) and the result is printed to avoid escaping of quotation marks,
           newlines, .... WARNING: This might be insecure: without escaping the printed data may contain
           terminal control sequences to exploit vulnerabilities or misconfiguration of your terminal to execute
           code with privileges of terminal or the process calling aminerremotecontrol (usually root).

   <b>Commands</b>
        <u>change_config_property(analysis_context,'property_name','value')</u>
           This method allows you to change properties from the AminerConfig at runtime. For every property to
           be changed this method must be used. The method prints "<u>property_name</u> changed to <u>value</u> successfully."
           if the changes were successful and an individual message if the changes failed.

           Read more about which properties can be changed in the <b>Valid</b> <b>Property</b> <b>Names</b> section.

        <u>change_attribute_of_registered_analysis_component(analysis_context,'component_name','attribute','value')</u>
           This method allows you to change attributes from components of the AminerConfig at runtime. For every
           attribute to be changed this method must be used. The method prints "<u>component_name.attribute</u> changed
           to <u>value</u> successfully. " if the changes were successful and an individual message if the changes
           failed. The type of the new <u>value</u> must be the same like the old value of the <u>component_name.attribute</u>

           <u>example</u>: aminerremotecontrol --exec
           "change_attribute_of_registered_analysis_component(analysis_context, 'NewMatchPath','learn_mode',
           False)"

        <u>rename_registered_analysis_component(analysis_context,'old_component_name','new_component_name')</u>
           Renames the component from the <u>old_component_name</u> to <u>new_component_name</u>. Therefore the component with
           the <u>old_component_name</u> is deleted from the registered components and registered with the
           <u>new_component_name</u>.

           <u>example</u>: aminerremotecontrol --exec
           "rename_registered_analysis_component(analysis_context,'NewMatchPath','NewMatchPathDetector')"

        <u>add_handler_to_atom_filter_and_register_analysis_component(analysis_context,'atom_handler',component,'component_name')</u>
           Adds the <u>component</u> to the <u>atom_filter</u> and registers it with the <u>component_name</u>.

           <u>example</u>: aminerremotecontrol --exec
           "add_handler_to_atom_filter_and_register_analysis_component(analysis_context,'AtomFilter',
           NewMatchPathDetector(analysis_context.aminer_config,
           analysis_context.atomizer_factory.atom_handler_list, learn_mode=True),'NewMatchPathDet')"

        <u>print_config_property(analysis_context,'property_name')</u>
           Prints the property with the <u>property_name</u> from the current AminerConfig.

           <u>example</u>: aminerremotecontrol --exec "print_config_property(analysis_context,'LogResourceList')"

        <u>print_attribute_of_registered_analysis_component(analysis_context,'component_name','attribute')</u>
           Prints the <u>attribute</u> of the component with the <u>component_name</u>.

           <u>example</u>: aminerremotecontrol --exec
           "print_attribute_of_registered_analysis_component(analysis_context,'NewMatchPath','learn_mode')"

        <u>print_current_config(analysis_context)</u>
           Prints the current AminerConfig. It is strongly recommended to use the <b>--string-response</b> parameter
           for better readability.

           <u>example</u>: aminerremotecontrol --exec "print_current_config(analysis_context)" --string-response

        <u>save_current_config(analysis_context,'destination_file')</u>
           Saves the current AminerConfig into <u>destination_file</u>.  <u>destination_file</u> must have write permissions
           by the aminerremotecontrol process or it returns an <b>PermissionError</b>.

           <u>example</u>: aminerremotecontrol --exec "save_current_config(analysis_context,'/tmp/config.py')"

        <u>persist_all()</u>
           Saves all persistence data by calling PersistenceUtil.persist_all().

           <u>example</u>: aminerremotecontrol --exec "persist_all()"

        <u>create_backup()</u>
           Creates a backup of the current persistence directory and saves it in
           {persistence_dir}/backup/{timestamp}. Use this preferably after persist_all().

           <u>example</u>: aminerremotecontrol --exec "create_backup()"

        <u>list_backups()</u>
           Returns a list of all existing persistence backups.

           <u>example</u>: aminerremotecontrol --exec "list_backups()"

        <u>allowlist_event_in_component(analysis_context,'component_name',event_data,allowlisting_data=None)</u>
           Allowlists a path from <u>event_data</u> with the allowlist_event-method from the corresponding class of the
           component with the <u>component_name</u>. Only the following classes support allowlisting:
           <u>EnhancedNewMatchPathValueComboDetector</u>, <u>MissingMatchPathValueDetector</u>, <u>NewMatchPathDetector</u> and
           <u>NewMatchPathValueComboDetector</u>. For most of the components no <u>allowlisting_data</u> is needed and the
           <u>event_data</u> is a path. The <u>NewMatchPathDetector</u> supports a list of multiple pathes. The
           <u>MissingMatchPathValueComboDetector</u> needs an integer as <u>allowlisting_data</u>. A positive value sets the
           interval in seconds to the value. -1 sets the interval to the default value of 3600. A negative value
           removes the missingMatchPath. Please read the examples of this method to use the correct parameters.

           <u>example</u>: aminerremotecontrol --exec
           "allowlist_event_in_component(analysis_context,'EnhancedNewMatchPathValueComboDetector','new/path')"

           <u>example</u>: aminerremotecontrol --exec
           "allowlist_event_in_component(analysis_context,'MissingMatchPathValueDetector','new/path',-11)"

           <u>example</u>: aminerremotecontrol --exec
           "allowlist_event_in_component(analysis_context,'NewMatchPathDetector',['new/path'])"

           <u>example</u>: aminerremotecontrol --exec
           "allowlist_event_in_component(analysis_context,'NewMatchPathValueComboDetector','new/path')"

        <u>dump_events_from_history(analysis_context,'history_component_name',dump_event_id)</u>
           This method returns the string representation of a history event with the <u>dump_event_id</u>. If no event
           with the <u>dump_event_id</u> could be found, the message "FAILURE: the event with <u>dump_event_id</u> could not
           be found!" is returned.  <u>history_component_name</u> is the registered component of the class
           <u>VolatileLogarithmicBackoffEventHistory</u>.

           <u>example</u>: aminerremotecontrol --exec
           "dump_events_from_history(analysis_context,'VolatileLogarithmicBackoffEventHistory',12)"

        <u>ignore_events_from_history(analysis_context,'history_component_name',event_ids)</u>
           This method deletes the events with the <u>event_ids</u> from the history.  <u>history_component_name</u> is the
           registered component of the class <u>VolatileLogarithmicBackoffEventHistory</u>. The number of deleted
           events is returned.

           <u>example</u>: aminerremotecontrol --exec
           "ignore_events_from_history(analysis_context,'VolatileLogarithmicBackoffEventHistory',[12,13,15])"

        <u>list_events_from_history(analysis_context,'history_component_name',max_event_count=None)</u>
           This method lists <u>max_event_count</u> events from the history.  <u>history_component_name</u> is the registered
           component of the class <u>VolatileLogarithmicBackoffEventHistory</u>. If <u>max_event_count</u> is None, all events
           from the history are returned.

           <u>example</u>: aminerremotecontrol --exec
           "list_events_from_history(analysis_context,'VolatileLogarithmicBackoffEventHistory',600)"

        <u>allowlist_events_from_history(analysis_context,'history_component_name',id_spec_list,allowlisting_data=None)</u>
           This method allowlists the events with the ids in the<u>id_spec_list</u> from the history.
           <u>history_component_name</u> is the registered component of the class
           <u>VolatileLogarithmicBackoffEventHistory</u>. The allowlisting response is returned.

           <u>example</u>: aminerremotecontrol --exec
           "allowlist_events_from_history(analysis_context,'VolatileLogarithmicBackoffEventHistory',[12,13,15])"

        <u>reopen_event_handler_streams(analysis_context)</u>
           Reopen all StreamPrinterEventHandler streams for log rotation.

           <u>example</u>: aminerremotecontrol --exec "reopen_event_handler_streams(analysis_context)"

   <b>Valid</b> <b>Property</b> <b>Names</b>
       <u>MailAlerting.TargetAddress</u>
           <u>Value</u>: 'E-Mail Address'

           <u>Example</u>: aminerremotecontrol --exec
           "change_config_property(analysis_context,'MailAlerting.TargetAddress', 'root@localhost')"

           Define a target e-mail address to send alerts to. When undefined, no e-mail notification hooks are
           added.

       <u>MailAlerting.FromAddress</u>
           <u>Value</u>: 'E-Mail Address'

           <u>Example</u>: aminerremotecontrol --exec
           "change_config_property(analysis_context,'MailAlerting.FromAddress', 'root@localhost')"

           Sender address of e-mail alerts.

       <u>MailAlerting.SubjectPrefix</u>
           <u>Value</u>: 'String'

           <u>Example</u>: aminerremotecontrol --exec
           "change_config_property(analysis_context,'MailAlerting.SubjectPrefix', 'aminer Alerts:')"

           Define, which text should be prepended to the standard aminer subject. Defaults to "aminer Alerts:"

       <u>MailAlerting.EventCollectTime</u>
           <u>Value</u>: Seconds (Integer)

           <u>Example</u>: aminerremotecontrol --exec
           "change_config_property(analysis_context,'MailAlerting.EventCollectTime', 10)"

           Define how many seconds to wait after a first event triggered the alerting procedure before really
           sending out the e-mail. In that timespan, events are collected and will be sent all using a single
           e-mail. Defaults to 10 seconds.

       <u>MailAlerting.MinAlertGap</u>
           <u>Value</u>: Seconds (Integer)

           <u>Example</u>: aminerremotecontrol --exec
           "change_config_property(analysis_context,'MailAlerting.MinAlertGap', 600)"

           Define the minimum time between two alert e-mails in seconds to avoid spamming. All events during
           this timespan are collected and sent out with the next report. Defaults to 600 seconds.

       <u>MailAlerting.MaxAlertGap</u>
           <u>Value</u>: Seconds (Integer)

           <u>Example</u>: aminerremotecontrol --exec
           "change_config_property(analysis_context,'MailAlerting.MaxAlertGap', 1000)"

           Define the maximum time between two alert e-mails in seconds. When undefined this defaults to
           "MailAlerting.MinAlertGap". Otherwise this will activate an exponential backoff to reduce messages
           during permanent error states by increasing the alert gap by 50% when more alert-worthy events were
           recorded while the previous gap time was not yet elapsed.

       <u>MailAlerting.MaxEventsPerMessage</u>
           <u>Value</u>: Number of messages (Integer)

           <u>Example</u>: aminerremotecontrol --exec
           "change_config_property(analysis_context,'MailAlerting.MaxEventsPerMessage',1000)"

           Define how many events should be included in one alert mail at most. This defaults to 1000.

       <u>LogPrefix</u>
           <u>Value</u>: 'String'

           <u>Example</u>: aminerremotecontrol --exec "change_config_property(analysis_context,'LogPrefix','Original
           log line: ')"

           Most analysis components implement the output_logline-property, which is True by default. Define a
           prefix to the original captured log lines. This defaults to ''.

       <u>Resources.MaxMemoryUsage</u>
           <u>Value</u>: 'Allowed RAM usage in Megabytes (Integer: 32-maxSystemRAM)'

           <u>Example</u>: aminerremotecontrol --exec
           "change_config_property(analysis_context,'Resources.MaxMemoryUsage', -1)"

           This property limits the maximal possible RAM in MB which the aminer process can use. Be careful at
           choosing the value, as a shortage of memory causes a MemoryError. This defaults to -1, which means
           that there is no limit.

       <u>Core.PersistencePeriod</u>
           <u>Value</u>: Seconds (Integer)

           <u>Example</u>: aminerremotecontrol --exec
           "change_config_property(analysis_context,'Core.PersistencePeriod', 300)"

           Use this property to change the time between persisting data in analysis components. Defaults to 600
           seconds.

       <u>Log.StatisticsLevel</u>
           <u>Value</u>: Level [0, 1, 2]

           <u>Example</u>: aminerremotecontrol --exec
           "change_config_property(analysis_context,'Log.StatisticsLevel',2)"

           Change the amount of data saved in statistics. Possible stat-levels are 0 for no statistics, 1 for
           normal statistic level and 2 for verbose statistics. Defaults to 1.

       <u>Log.DebugLevel</u>
           <u>Value</u>: Level [0, 1, 2]

           <u>Example</u>: aminerremotecontrol --exec "change_config_property(analysis_context,'Log.DebugLevel',2)"

           Change the debug logging level. Possible debug-levels are 0 for no logging, 1 for normal output (INFO
           and above), 2 for printing all debug information. Defaults to 1.

       <u>Log.StatisticsPeriod</u>
           <u>Value</u>: Seconds (Integer)

           <u>Example</u>: aminerremotecontrol --exec "change_config_property(analysis_context,'Log.StatisticsPeriod',
           360)"

           Change how often statistics are logged and reset. This defaults to 3600 seconds.

</pre><h4><b>FILES</b></h4><pre>
       /var/run/aminer-remote.socket
           This is the default remote control socket used when not changed using the --control-socket option.

</pre><h4><b>BUGS</b></h4><pre>
       Report bugs via your distribution's bug tracking system. For bugs in the the software trunk, report via
       at <b>https://bugs.launchpad.net/logdata-anomaly-miner/+filebug</b>.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man1/aminer.1.html">aminer</a></b>(1)

</pre><h4><b>AUTHOR</b></h4><pre>
       <b>Markus</b> <b>Wurzenberger</b> &lt;<a href="mailto:markus.wurzenberger@ait.ac.at">markus.wurzenberger@ait.ac.at</a>&gt;
           Wrote this manpage for the Debian system.

</pre><h4><b>COPYRIGHT</b></h4><pre>
       Copyright © 2016 Markus Wurzenberger

       This manual page was written for the Debian system (and may be used by others).

       Permission is granted to copy, distribute and/or modify this document under the terms of the GNU General
       Public License, Version 3.

       On Debian systems, the complete text of the GNU General Public License can be found in
       /usr/share/common-licenses/GPL.

logdata-anomaly-miner                              06/14/2024                             <u><a href="../man1/AMINERREMOTECONTROL.1.html">AMINERREMOTECONTROL</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>