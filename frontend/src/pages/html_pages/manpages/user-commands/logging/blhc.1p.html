<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>blhc - build log hardening check, checks build logs for missing hardening flags</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/blhc">blhc_0.14+git20240421.5d2c338-2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       blhc - build log hardening check, checks build logs for missing hardening flags

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>blhc</b> [<u>options</u>] <u>&lt;dpkg-buildpackage</u> <u>build</u> <u>log</u> <u>file&gt;..</u>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       blhc is a small tool which checks build logs for missing hardening flags. It's licensed under the GPL 3
       or later.

       It's designed to check build logs generated by Debian's dpkg-buildpackage (or tools using dpkg-
       buildpackage like pbuilder or sbuild (which is used for the official buildd build logs)) to help
       maintainers detect missing hardening flags in their packages.

       Only gcc is detected as compiler at the moment. If other compilers support hardening flags as well,
       please report them.

       If there's no output, no flags are missing and the build log is fine.

       See <u>README</u> for details about performed checks, auto-detection and limitations.

</pre><h4><b>FALSE</b> <b>POSITIVES</b></h4><pre>
       To suppress false positives you can embed the following string in the build log:

           blhc: ignore-line-regexp: REGEXP

       All lines fully matching REGEXP (see <b>--ignore-line</b> for details) will be ignored. The string can be
       embedded multiple times to ignore different regexps.

       Please use this feature sparingly so that missing flags are not overlooked. If you find false positives
       which affect more packages please report a bug.

       To generate this string simply use echo in "debian/rules"; make sure to use @ to suppress the echo
       command itself as it could also trigger a false positive.  If the build process takes a long time edit
       the ".build" file in place and tweak the ignore string until <b>blhc</b> <b>--all</b> <b>--debian</b> <b>package.build</b> no longer
       reports any false positives.

</pre><h4><b>OPTIONS</b></h4><pre>
       <b>--all</b>   Force check for all +all (+pie, +bindnow) hardening flags. By default it's auto detected.

       <b>--arch</b> <u>architecture</u>
               Set  the  specific architecture (e.g. amd64, armel, etc.), automatically disables hardening flags
               not available on this architecture. Is detected automatically if dpkg-buildpackage is used.

       <b>--bindnow</b>
               Force check for all +bindnow hardening flags. By default it's auto detected.

       <b>--buildd</b>
               Special mode for buildds when automatically parsing log  files.  The  following  changes  are  in
               effect:

               • Print tags instead of normal warnings, see "BUILDD TAGS" for a list of possible tags.

               • Don't check hardening flags in old log files (if dpkg-dev &lt;&lt; 1.16.1 is detected).

               • Don't require Term::ANSIColor.

               • Return exit code 0, unless there was a error (-I, -W messages don't count as error).

       <b>--debian</b>
               Apply  Debian-specific  settings.  At  the  moment  this  only disables checking for PIE which is
               automatically applied by Debian's GCC and no longer requires a compiler command line argument.

       <b>--color</b> Use colored (ANSI) output for warning messages.

       <b>--line-numbers</b>
               Display line numbers.

       <b>--ignore-arch</b> <u>arch</u>
               Ignore build logs from architectures matching <u>arch</u>. <u>arch</u> is a string.

               Used to prevent false positives. This option can be specified multiple times.

       <b>--ignore-arch-flag</b> <u>arch</u>:<u>flag</u>
               Like <b>--ignore-flag</b>, but only ignore flag on <u>arch</u>.

       <b>--ignore-arch-line</b> <u>arch</u>:<u>line</u>
               Like <b>--ignore-line</b>, but only ignore line on <u>arch</u>.

       <b>--ignore-flag</b> <u>flag</u>
               Don't print an error when the specific flag is missing in a compiler line.  <u>flag</u> is a string.

               Used to prevent false positives. This option can be specified multiple times.

       <b>--ignore-line</b> <u>regex</u>
               Ignore lines matching the given Perl regex. <u>regex</u> is automatically anchored at the beginning  and
               end of the line to prevent false negatives.

               <b>NOTE</b>:  Not the input lines are checked, but the lines which are displayed in warnings (which have
               line continuation resolved).

               Used to prevent false positives. This option can be specified multiple times.

       <b>--pie</b>   Force check for all +pie hardening flags. By default it's auto detected.

       <b>-h</b> <b>-?</b> <b>--help</b>
               Print available options.

       <b>--version</b>
               Print version number and license.

       Auto detection for <b>--pie</b> and <b>--bindnow</b> only works if at least one command  uses  the  required  hardening
       flag (e.g. -fPIE). Then it's required for all other commands as well.

</pre><h4><b>EXAMPLES</b></h4><pre>
       Normal usage, parse a single log file.

           blhc path/to/log/file

       If there's no output, no flags are missing and the build log is fine.

       Parse multiple log files. The exit code is ORed over all files.

           blhc path/to/directory/with/log/files/*

       Don't treat missing "-g" as error:

           blhc --ignore-flag -g path/to/log/file

       Don't treat missing "-pie" on kfreebsd-amd64 as error:

           blhc --ignore-arch-flag kfreebsd-amd64:-pie path/to/log/file

       Ignore lines consisting exactly of "./script gcc file" which would cause a false positive.

           blhc --ignore-line '\./script gcc file' path/to/log/file

       Ignore lines matching "./script gcc file" somewhere in the line.

           blhc --ignore-line '.*\./script gcc file.*' path/to/log/file

       Use blhc with pbuilder.

           pbuilder path/to/package.dsc | tee path/log/file
           blhc path/to/file || echo flags missing

       Assume  this  build log was created on a Debian system and thus don't warn about missing PIE flags if the
       current architecture injects them automatically (this is enabled in buildd mode per default). "--arch" is
       necessary if the build log contains no architecture information as written by dpkg-buildpackage.

           blhc --debian --all --arch=amd64 path/to/log/file

</pre><h4><b>BUILDD</b> <b>TAGS</b></h4><pre>
       The following tags are used in <u>--buildd</u> mode. In braces the additional data which is displayed.

       <b>I-hardening-wrapper-used</b>
         The package uses hardening-wrapper which intercepts calls to gcc and adds hardening  flags.  The  build
         log doesn't contain any hardening flags and thus can't be checked by blhc.

       <b>W-compiler-flags-hidden</b> (summary of hidden lines)
         Build log contains lines which hide the real compiler flags. For example:

             CC test-a.c
             CC test-b.c
             CC test-c.c
             LD test

         Most  of  the  time  either "export V=1" or "export verbose=1" in <u>debian/rules</u> fixes builds with hidden
         compiler flags. Sometimes ".SILENT" in a <u>Makefile</u> must be removed. And as last resort the <u>Makefile</u> must
         be patched to remove the "@"s hiding the real compiler commands.

       <b>W-dpkg-buildflags-missing</b> (summary of missing flags)
         CPPFLAGS, CFLAGS, CXXFLAGS, LDFLAGS missing.

       <b>I-invalid-cmake-used</b> (version)
         By default CMake ignores CPPFLAGS thus missing those hardening flags. Debian patched CMake in  versions
         2.8.7-1  and 2.8.7-2 to respect CPPFLAGS, but this patch was rejected by upstream and later reverted in
         Debian. Thus those two versions show correct usage of CPPFLAGS even if the  package  doesn't  correctly
         handle  them  (for  example by passing them to CFLAGS). To prevent false negatives just blacklist those
         two versions.

       <b>I-no-compiler-commands</b>
         No compiler commands were detected. Either the log contains none or they were not correctly detected by
         blhc (please report the bug in this case).

</pre><h4><b>EXIT</b> <b>STATUS</b></h4><pre>
       The exit status is a "bit mask", each listed status is ORed when the error condition occurs  to  get  the
       result.

       <b>0</b>   Success.

       <b>1</b>   No compiler commands were found.

       <b>2</b>   Invalid arguments/options given to blhc.

       <b>4</b>   Non verbose build.

       <b>8</b>   Missing hardening flags.

       <b>16</b>  Hardening wrapper detected, no tests performed.

       <b>32</b>  Invalid CMake version used. See <b>I-invalid-cmake-used</b> under "BUILDD TAGS" for a detailed explanation.

</pre><h4><b>AUTHOR</b></h4><pre>
       Simon Ruderich, &lt;<a href="mailto:simon@ruderich.org">simon@ruderich.org</a>&gt;

       Thanks  to  to  Bernhard  R.  Link  &lt;<a href="mailto:brlink@debian.org">brlink@debian.org</a>&gt;  and  Jaria Alto &lt;<a href="mailto:jari.aalto@cante.net">jari.aalto@cante.net</a>&gt; for their
       valuable input and suggestions.

</pre><h4><b>LICENSE</b> <b>AND</b> <b>COPYRIGHT</b></h4><pre>
       Copyright (C) 2012-2024 by Simon Ruderich

       This program is free software: you can redistribute it and/or modify  it  under  the  terms  of  the  GNU
       General  Public License as published by the Free Software Foundation, either version 3 of the License, or
       (at your option) any later version.

       This program is distributed in the hope that it will be useful, but WITHOUT ANY  WARRANTY;  without  even
       the  implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public
       License for more details.

       You should have received a copy of the GNU General Public License along with this program.  If  not,  see
       &lt;<a href="http://www.gnu.org/licenses/">http://www.gnu.org/licenses/</a>&gt;.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man1/hardening-check.1.html">hardening-check</a></b>(1), <b><a href="../man1/dpkg-buildflags.1.html">dpkg-buildflags</a></b>(1)

perl v5.40.0                                       2025-01-17                                           <u><a href="../man1p/BLHC.1p.html">BLHC</a></u>(1p)
</pre>
 </div>
</div></section>
</div>
</body>
</html>