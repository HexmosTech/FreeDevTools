<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>qshape - Print Postfix queue domain and age distribution</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/postfix">postfix_3.9.1-10ubuntu1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       qshape - Print Postfix queue domain and age distribution

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>qshape</b> [<b>-s</b>] [<b>-p</b>] [<b>-m</b> <u>min_subdomains</u>]
               [<b>-b</b> <u>bucket_count</u>] [<b>-t</b> <u>bucket_time</u>]
               [<b>-l</b>] [<b>-w</b> <u>terminal_width</u>]
               [<b>-N</b> <u>batch_msg_count</u>] [<b>-n</b> <u>batch_top_domains</u>]
               [<b>-c</b> <u>config_directory</u>] [<u>queue_name</u> ...]

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The  <b>qshape</b> program helps the administrator understand the Postfix queue message distribution in time and
       by sender domain or recipient domain. The program needs read access to the queue  directories  and  queue
       files, so it must run as the superuser or the <b>mail_owner</b> specified in <b>main.cf</b> (typically <b>postfix</b>).

       Options:

       <b>-s</b>     Display  the  sender domain distribution instead of the recipient domain distribution.  By default
              the recipient distribution is displayed. There can be more recipients than messages, but  as  each
              message has only one sender, the sender distribution is a message distribution.

       <b>-p</b>     Generate aggregate statistics for parent domains. Top level domains are not shown, nor are domains
              with  fewer  than  <u>min_subdomains</u> subdomains. The names of parent domains are shown with a leading
              dot, (e.g. <u>.example.com</u>).

       <b>-m</b> <u>min_subdomains</u>
              When used with the <b>-p</b> option, sets the minimum subdomain count needed to show a separate line  for
              a parent domain. The default is 5.

       <b>-b</b> <u>bucket_count</u>
              The  age  distribution  is  broken  up into a sequence of geometrically increasing intervals. This
              option sets the number of intervals or "buckets". Each bucket has a  maximum  queue  age  that  is
              twice as large as that of the previous bucket. The last bucket has no age limit.

       <b>-t</b> <u>bucket_time</u>
              The age limit in minutes for the first time bucket. The default value is 5, meaning that the first
              bucket counts messages between 0 and 5 minutes old.

       <b>-l</b>     Instead  of  using  a  geometric  age  sequence,  use a linear age sequence, in other words simple
              multiples of <b>bucket_time</b>.

              This feature is available in Postfix 2.2 and later.

       <b>-w</b> <u>terminal_width</u>
              The output is right justified, with the counts for the last bucket shown on the 80th  column,  the
              <u>terminal_width</u>  can  be  adjusted  for wider screens allowing more buckets to be displayed without
              truncating the domain names on the left. When a row for a full domain name and its  counters  does
              not  fit  in  the specified number of columns, only the last 17 bytes of the domain name are shown
              with the prefix replaced by a '+' character. Truncated  parent  domain  rows  are  shown  as  '.+'
              followed  by  the last 16 bytes of the domain name. If this is still too narrow to show the domain
              name and all the counters, the terminal_width limit is violated.

       <b>-N</b> <u>batch_msg_count</u>
              When the output device is a  terminal,  intermediate  results  are  shown  each  "batch_msg_count"
              messages. This produces usable results in a reasonable time even when the deferred queue is large.
              The default is to show intermediate results every 1000 messages.

       <b>-n</b> <u>batch_top_domains</u>
              When   reporting   intermediate   or   final   results   to  a  termainal,  report  only  the  top
              "batch_top_domains" domains. The default limit is 20 domains.

       <b>-c</b> <u>config_directory</u>
              The <b>main.cf</b> configuration file is in the named directory  instead  of  the  default  configuration
              directory.

       Arguments:

       <u>queue_name</u>
              By default <b>qshape</b> displays the combined distribution of the incoming and active queues. To display
              a  different  set  of queues, just list their directory names on the command line.  Absolute paths
              are used as is, other paths are taken relative to the <b>main.cf</b> <b>queue_directory</b>  parameter  setting.
              While  <b>main.cf</b>  supports  the  use of <u>$variable</u> expansion in the definition of the <b>queue_directory</b>
              parameter, the <b>qshape</b> program does not. If you must use variable expansions in the <b>queue_directory</b>
              setting, you must specify an explicit absolute path for each queue subdirectory even if  you  want
              the default incoming and active queue distribution.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <a href="../man1/mailq.1.html">mailq</a>(1), List all messages in the queue.
       QSHAPE_README Examples and background material.

</pre><h4><b>FILES</b></h4><pre>
       $config_directory/main.cf, Postfix installation parameters.
       $queue_directory/maildrop/, local submission directory.
       $queue_directory/incoming/, new message queue.
       $queue_directory/hold/, messages waiting for tech support.
       $queue_directory/active/, messages scheduled for delivery.
       $queue_directory/deferred/, messages postponed for later delivery.

</pre><h4><b>LICENSE</b></h4><pre>
       The Secure Mailer license must be distributed with this software.

</pre><h4><b>AUTHOR(S)</b></h4><pre>
       Victor Duchovni
       Morgan Stanley

                                                                                                       <u><a href="../man1/QSHAPE.1.html">QSHAPE</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>