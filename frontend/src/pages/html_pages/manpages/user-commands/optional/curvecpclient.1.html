<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CurveCP — Message-handling programs</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/nacl-tools">nacl-tools_20110221-15_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       CurveCP — Message-handling programs

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>curvecpclient</b>  [<b>-q</b>  <u>(optional)]</u>   <u>[</u><b>-Q</b>  <u>(optional)]</u>  <u>[</u><b>-v</b> <u>(optional)]</u>  <u>[</u><b>-c</b> <b>keydir</b><u>(optional)]</u>  <u>[sname]</u>  <u>[pk]</u>
       <u>[ip]</u>  <u>[port]</u>  <u>[ext]</u>  <u>[prog]</u>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This manual page documents briefly the <b>CurveCP</b> commands.

       A traditional UNIX-style server such as ftpd handles just one  network  connection,  reading  input  from
       stdin  and  writing  output  to  stdout.  A  "superserver" such as inetd or tcpserver listens for network
       connections and starts a separate server process for each connection.

       The <b>CurveCP</b> command-line tools have an extra level of modularity. The <b>curvecpserver</b>  superserver  listens
       for  network  connections.  For each connection, <b>curvecpserver</b> starts the <b>curvecpmessage</b> message handler;
       <b>curvecpmessage</b> then starts a server such as ftpd.  Then ftpd sends a stream of  data  to  <b>curvecpmessage</b>,
       which  in  turn  sends messages to <b>curvecpserver</b>, which encrypts and authenticates the messages and sends
       them inside network packets. At the same  time  <b>curvecpclient</b>  receives  network  packets,  verifies  and
       decrypts  messages  inside the packets, and passes the messages to <b>curvecpmessage</b>; <b>curvecpmessage</b> sends a
       stream of data to ftpd.  The same curvecpmessage tool is also used by <b>curvecpclient</b>.

       <b>curvecpserver</b> and <b>curvecpclient</b> can use programs other than <b>curvecpmessage</b>. Those programs  can  directly
       generate  messages  in the CurveCP message format without talking to separate tools such as ftpd; or they
       can support a completely different protocol that  reuses  CurveCP's  cryptographic  layer  but  transmits
       different kinds of messages.

       This  page  explains  what  programmers  have  to  do  to  write <b>curvecpmessage</b> replacements that talk to
       <b>curvecpserver</b> and <b>curvecpclient.</b>

</pre><h4><b>Incoming</b> <b>messagess</b></h4><pre>
       File descriptor 8 is a pipe. Read from this pipe a length byte n, between  1  and  68,  and  a  16*n-byte
       message.  Repeat.   The pipe is set to non-blocking mode; be prepared for EAGAIN and EWOULDBLOCK, even in
       the middle of a message.

       This pipe reading must always be active. The <b>curvecpclient</b> and <b>curvecpserver</b> programs assume  that  every
       message  is read immediately. If you can't handle a message immediately, read it and put it onto a queue.
       If you don't have queue space, throw the message away; this shouldn't cause trouble, since you have to be
       able to handle missing messages in any case.

</pre><h4><b>Outgoing</b> <b>messagess</b></h4><pre>
       File descriptor 9 is a pipe. Write to this pipe a length byte n,  between  1  and  68,  and  a  16*n-byte
       message.  Repeat.   The pipe is set to non-blocking mode; be prepared for EAGAIN and EWOULDBLOCK, even in
       the middle of a message.

       As a client, do not use length bytes above 40 until a message has arrived from the server. (The  messages
       inside CurveCP Initiate packets are limited to 640 bytes.)

       The  CurveCP  server  does  not  start  until it has received a message from the client. Furthermore, the
       CurveCP server must receive this message within 60 seconds  of  the  client  starting  up.  (The  CurveCP
       Initiate  packet  is valid for only 60 seconds after the corresponding CurveCP Cookie packet.)  This does
       not mean that the client must start sending messages immediately, but it does mean that waiting for  more
       than a second to send a message is a bad idea.

</pre><h4><b>OPTIONS</b></h4><pre>
       How to use <b>curvecpclient</b>:

       <b>-q</b>           <b>optional</b>
                 no error messages

       <b>-Q</b>           <b>optional</b>
                 print error messages (default)

       <b>-v</b>           <b>optional</b>
                 print extra information

       <b>-c</b> <b>keydir</b>           <b>optional</b>
                 use this public-key directory

       <b>sname</b>     server's name

       <b>pk</b>        server's public key

       <b>ip</b>        server's IP address

       <b>port</b>      server's UDP port

       <b>ext</b>       server's extension

       <b>prog</b>      run this client

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       curvecpserver (1), curvecpmessage (1), inetd (8), tcpserver (1).

</pre><h4><b>AUTHOR</b></h4><pre>
       This  manual  page was written by Sergiusz Pawlowicz <a href="mailto:debian@pawlowicz.name">debian@pawlowicz.name</a> for the <b>Debian</b> system (and may
       be used by  others).  The  source  of  this  page  is  a  webpage  https://curvecp.org/messageapi.html  .
       Permission is granted to copy, distribute and/or modify this document under public domain.

       This  manual  page was rewritten for the <b>Debian</b> distribution because the original program does not have a
       manual page.

                                                                                                         <u><a href="../man1/NaCl.1.html">NaCl</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>