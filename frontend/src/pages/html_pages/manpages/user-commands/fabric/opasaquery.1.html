<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>opasaquery</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/opa-basic-tools">opa-basic-tools_10.10.3.0.11-1ubuntu3_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       opasaquery

       <b>(All)</b>  Performs  various  queries  of  the  subnet  manager/subnet  agent  and  provides  detailed fabric
       information.

       opareport and opareports from the Intel(R) Omni-Path Fabric Suite can provide a more  powerful  tool.  In
       some  cases,  opasaquery is preferred, especially when dealing with virtual fabrics, service records, and
       multicast.

       By default, opasaquery uses the first active port on the local system. However, if the node is  connected
       to  more  than one fabric (for example, a subnet), the Intel(R) Omni-Path Host Fabric Interface (HFI) and
       port may be specified to select the fabric whose SA is to be queried.

</pre><h4><b>Syntax</b></h4><pre>
       opasaquery [-v [-v] [-v]] [-I] [-h  <u>hfi</u>|-b  <u>addr</u>] [-p  <u>port</u>] [--timeout]
       [-x  <u>gid</u>] [-E] [-T  <u>ssl_params</u>] [-o  <u>type</u>] [-l  <u>lid</u>] [-t  <u>type</u>] [-s  <u>guid</u>]
       [-n  <u>guid</u>] [-g  <u>guid</u>] [-k  <u>pkey</u>] [-i  <u>vfIndex</u>] [-S  <u>serviceId</u>] [-L  <u>sl</u>]
       [-u  <u>gid</u>] [-m  <u>gid</u>] [-d  <u>nodeDescription</u>]  [-D  <u>dg_name</u>]  [-P '<u>guid</u> <u>guid</u>']
       [-G '<u>gid</u> <u>gid</u>'] [-H  <u>mask</u>]

</pre><h4><b>Options</b></h4><pre>
       --help

                 Produces full help text.

       -v/--verbose

                 Returns verbose output. A second invocation activates  openib  debugging,  a  third  invocation
                 activates libibumad debugging.

       -I/--IB

                 Issues query in legacy InfiniBand* format.

       -h/--hfi <u>hfi</u>

                 Specifies the HFI, numbered 1..n. Using 0 specifies that the -p <u>port</u> port is a system-wide port
                 number. Default is 0.

       -b/--oob <u>address</u>

                 Specifies  Out-of-Band  address  of  node running the FE. Can be either hostname, IPv4, or IPv6
                 address. Default is "127.0.0.1".

       -p/--port <u>port</u>

                 Specifies the port.

                 •      In-band: numbered 1..n. Using 0 specifies first active port. Default is 0.

                 •      Out-of-band: Port FE is listening on. Default is 3245.

       --timeout

                 Specifies the timeout (wait time for response) in ms. Default is 1000 ms.

       -x/--source-gid <u>src_gid</u>

                 Specifies the source GID of the local GID (This is required for  most  Path  and  Trace  Record
                 Queries when Out-of-Band.)

       -E/--feEsm

                 Specifies the ESM FE.

       -T/--ssl-params <u>file</u>

                 Specifies the SSL/TLS parameters XML file. Default is /etc/opa/opamgt_tls.xml.

       -o <u>type</u>

                 Output type for query. Default is node. See <u>Output</u> <u>Types</u> for details.

       -l/--lid <u>lid</u>

                 Query a specific LID.

       -t/--type <u>node_type</u>

                 Queries by node type. See <u>Node</u> <u>Types</u> for details.

       -s/--sysguid <u>system_image_guid</u>

                 Queries by system image GUID.

       -n/--nodeguid <u>node_guid</u>

                 Queries by node GUID.

       -g/--portguid <u>port_guid</u>

                 Queries by port GUID.

       -k/--pkey <u>pkey</u>

                 Queries a specific PKey.

       -i/--vfindex <u>vfIndex</u>

                 Queries a specific vfindex.

       -S/--serviceId <u>serviceId</u>

                 Queries a specific service ID.

       -L/--SL <u>SL</u>

                 Queries by service level.

       -u/--portgid <u>port_gid</u>

                 Queries by port GID. See <u>GIDs</u> for details.

       -m/--mcgid <u>multicast_gid</u>

                 Queries by multicast GID. See <u>GIDs</u> for details.

       -d/--desc <u>node_description</u>

                 Queries by node name/description.

       -D/--dgname <u>dg_name</u>

                 Queries by device group name/description

       -P/--guidpair <u>guid</u> <u>guid</u>

                 Queries by a pair of port GUIDs.

       -G/--gidpair <u>gid</u> <u>gid</u>

                 Queries by a pair of GIDs. See <u>GIDs</u> for details.

</pre><h4><b>-h</b> <b>and</b> <b>-p</b> <b>options</b> <b>permit</b> <b>a</b> <b>variety</b> <b>of</b> <b>selections:</b></h4><pre>
       -h 0

                 First active port in system (Default).

       -h 0 -p 0

                 First active port in system.

       -h <u>x</u>

                 First active port on HFI <u>x</u>.

       -h <u>x</u> -p 0

                 First active port on HFI <u>x</u>.

       -h 0 -p <u>y</u>

                 Port <u>y</u> within system (no matter which ports are active).

       -h <u>x</u> -p <u>y</u>

                 HFI <u>x</u>, port <u>y</u>.

</pre><h4><b>Node</b> <b>Types</b></h4><pre>
       fi

                 Fabric Interface

       sw

                 Switch

</pre><h4><b>GIDs</b></h4><pre>
       Specifies a 64-bit subnet and 64-bit interface ID in the form:

       subnet:interface

       <b>NOTE:</b>  In  the  following  example,  the  GID  corresponds  to  a PortGID. In this case, the interface ID
       coincides with the lower 64-bits of the GUID of the card. The interface ID will be different if  the  GID
       is a MGID (that is, multicast GID). See opafm.xml for MGID examples.

       0xfe80000000000000:0x00117500a0000380

</pre><h4><b>Output</b> <b>Types</b></h4><pre>
       Default is node.

       classportinfo

                 Specifies the classportinfo of the SA.

       systemguid

                 Lists the system image GUIDs.

       nodeguid

                 Lists the node GUIDs.

       portguid

                 Lists the port GUIDs.

       lid

                 Lists the LIDs.

       desc

                 Lists the node descriptions/names.

       path

                 Lists the path records.

       node

                 Lists the node records.

       portinfo

                 Lists the port info records.

       sminfo

                 Lists the SM info records.

       swinfo

                 Lists the switch info records.

       link

                 Lists the link records.

       scsc

                 Lists the SC to SC mapping table records.

       slsc

                 Lists the SL to SC mapping table records.

       scsl

                 Lists the SC to SL mapping table records.

       scvlt

                 Lists the SC to VLt table records.

       scvlr

                 Lists the SC to VLr table records.

       scvlnt

                 Lists the SC to VLnt table records.

       vlarb

                 Lists the VL arbitration table records.

       pkey

                 Lists the PKey table records.

       service

                 Lists the service records.

       mcmember

                 Lists the multicast member records.

       inform

                 Lists the inform info records.

       linfdb

                 Lists the switch linear forwarding database (FDB) records.

       mcfdb

                 Lists the switch multicast FDB records.

       trace

                 Lists the trace records.

       vfinfo

                 Lists the vFabrics.

       vfinfocsv

                 Lists the vFabrics in CSV format.

       vfinfocsv2

                 Lists the vFabrics in CSV format with enums.

       fabricinfo

                 Specifies the summary of fabric devices.

       quarantine

                 Lists the quarantined nodes.

       conginfo

                 Lists the Congestion Info Records.

       swcongset

                 Lists the Switch Congestion Settings.

       swportcong

                 Lists the Switch Port Congestion Settings.

       hficongset

                 Lists the HFI Congestion Settings.

       hficongcon

                 Lists the HFI Congestion Control Settings.

       bfrctrl

                 Lists the buffer control tables.

       cableinfo

                 Lists the Cable Info records.

       portgroup

                 Lists the AR Port Group records.

       portgroupfdb

                 Lists the AR Port Group FWD records.

       dglist

                 Lists the Device Group Names.

       dgmember

                 Lists the Device Group records.

       dtree

                 Lists the Device Tree records.

       swcost

                 Lists the switch cost records.

       The  vfinfocsv and vfinfocsv2 output formats are designed to make it easier to script vfinfo queries. One
       line is output per vFabric of the form:

       name:index:pkey:sl:mtu:rate:optionflag::mcastSl

       The only difference between these two formats is how the MTU and rate are output. vfinfocsv  outputs  MTU
       and  rate  in human/text readable format. vfinfocsv2 outputs MTU and rate as enumerations defined for the
       SMA protocol. The opagetvf command is based on this capability of opasaquery. For more  information,  see
       <u>opagetvf</u>

</pre><h4><b>Example</b></h4><pre>
       opasaquery -o desc -t fi

</pre><h4><b>Input</b> <b>Options</b> <b>vs.</b> <b>Output</b> <b>Permitted</b></h4><pre>
       The following list shows the input (assorted query by options) and outputs (-o) that are permitted.

       None

                 -o output permitted
                           systemguid,  nodeguid,  portguid,  lid,  desc,  path, node, portinfo, sminfo, swinfo,
                           link, vlarb, pkey, service,  mcmember,  inform,  linfdb,  mcfdb,  vfinfo,  vfinfocsv,
                           vfinfocsv2, scsc, slsc, scvlt, scnlmt, linfdb, classportinfo, fabricinfo, quarantine,
                           conginfo,   swcongset,   swportcong,   hficongset,   hficongcon,  bfrctl,  cableinfo,
                           portgroup, portgroupfdb, dglist, dgmember, dtree

                 -o output not permitted
                           trace

       -t <u>node_type</u>

                 -o output permitted
                           systemguid, nodeguid, portguid, lid, desc, node, dglist, dgmember, dtree

                 -o output not permitted
                           portinfo, sminfo, swinfo, vlarb, pkey,  service,  mcmember,  inform,  linfdb,  mcfdb,
                           trace, vfinfo, vfinfocsv, vfinfocsv2

       -l <u>lid</u>

                 -o output permitted
                           systemguid, nodeguid, portguid, lid, desc, path, node, portinfo, swinfo, slvl, vlarb,
                           pkey, mcmember, linfdb, mcfdb, dgmember, dtree

                 -o output not permitted
                           sminfo, link, inform, service, trace, vfinfo, vfinfocsv, vfinfocsv2, dglist

       -k <u>pkey</u>

                 -o output permitted
                           mcmember, path, vfinfo, vfinfocsv, vfinfocsv2

                 -o output not permitted
                           systemimageguid, nodeguid, portguid, lid, desc, node, portinfo, sminfo, swinfo, link,
                           vlarb, pkey, service, mcmember, inform, linfdb, mcfdb, dglist, dgmember, dtree

       -i        <u>vfindex</u>

                 -o output permitted
                           vfinfo, vfinfocsv, vfinfocsv2

                 -o output not permitted
                           systemimageguid, nodeguid, portguid, lid, desc, node, portinfo, sminfo, swinfo, link,
                           vlarb, pkey, service, mcmember, inform, linfdb, mcfdb, dglist, dgmember, dtree

       -s <u>system_image_guid</u>

                 -o output permitted
                           systemguid, nodeguid, portguid, lid, desc, node

                 -o output not permitted
                           portinfo,  sminfo,  swinfo,  link,  vlarb,  pkey,  service, mcmember, inform, linfdb,
                           mcfdb, trace, vfinfo, vfinfocsv, vfinfocsv2, dglist, dgmember, dtree

       -n <u>node_guid</u>

                 -o output permitted
                           systemguid, nodeguid, portguid, lid, desc, node

                 -o output not permitted
                           portinfo, sminfo, swinfo, link,  vlarb,  pkey,  service,  mcmember,  inform,  linfdb,
                           mcfdb, trace, vfinfo, vfinfocsv, vfinfocsv2, dglist, dgmember, dtree

       -g <u>port_guid</u>

                 -o output permitted
                           systemguid, nodeguid, portguid, lid, desc, path, node, trace, dgmember

                 -o output not permitted
                           portinfo,  sminfo,  swinfo,  link,  vlarb,  pkey,  linfdb,  mcfdb, vfinfo, vfinfocsv,
                           vfinfocsv2, dglist, dtree, service, mcmember, inform

       -u <u>port_gid</u>

                 -o output permitted
                           path, service, mcmember, inform, trace

                 -o output not permitted
                           systemguid, nodeguid, portguid, lid, desc,  node,  portinfo,  sminfo,  swinfo,  link,
                           vlarb, pkey, linfdb, mcfdb, vfinfo, vfinfocsv, vfinfocsv2, dglist, dgmember, dtree

       -m <u>multicast_gid</u>

                 -o output permitted
                           mcmember, vfinfo, vfinfocsv, vfinfocsv2

                 -o output not permitted
                           systemguid,  nodeguid,  portguid,  lid,  desc,  path, node, portinfo, sminfo, swinfo,
                           link, vlarb, pkey, service, inform, linfdb, mcfdb, trace, dglist, dgmember, dtree

       -d <u>node_description</u>

                 -o output permitted
                           systemguid, nodeguid, portguid, lid, desc, node, dgmember

                 -o output not permitted
                           trace, dglist, dtree

       -D <u>dg_name</u>

                 -o output permitted
                           dgmember

                 -o output not permitted
                           systemguid, nodeguid, portguid, lid, desc,  path,  node,  portinfo,  sminfo,  swinfo,
                           link, vlarb, pkey, service, inform, linfdb, mcfdb, trace, dglist, dtree

       -P <u>port_guid_pair</u>

                 -o output permitted
                           path, trace

                 -o output not permitted
                           systemguid,  nodeguid,  portguid,  lid,  desc,  node, portinfo, sminfo, swinfo, link,
                           vlarb, pkey, service, mcmember, inform, linfdb, mcfdb, dglist, dgmember, dtree

       -S <u>serviceId</u>

                 -o output permitted
                           path, vfinfo, vfinfocsv, vfinfocsv2, service

                 -o output not permitted
                           systemimageguid, nodeguid, portguid, lid, desc, node, portinfo, sminfo, swinfo, link,
                           vlarb, pkey, mcmember, inform, linfdb, mcfdb, dglist, dgmember, dtree

       -L <u>SL</u>

                 -o output permitted
                           path, vfinfo, vfinfocsv, vfinfocsv2

                 -o output not permitted
                           systemimageguid, nodeguid, portguid, lid, desc, node, portinfo, sminfo, swinfo, link,
                           vlarb, pkey, service, mcmember, inform, linfdb, mcfdb, dglist, dgmember, dtree

       -G <u>gid_pair</u>

                 -o output permitted
                           path, trace

                 -o output not permitted
                           systemguid, nodeguid, portguid, lid, desc,  node,  portinfo,  sminfo,  swinfo,  link,
                           vlarb, pkey, service, mcmember, inform, linfdb, mcfdb, dglist, dgmember, dtree

       -a <u>port_guid_list</u>

                 -o output permitted
                           path

                 -o output not permitted
                           systemguid,  nodeguid,  portguid,  lid,  desc,  node, portinfo, sminfo, swinfo, link,
                           vlarb, pkey, service, mcmember, inform, linfdb, mcfdb, trace, dglist, dgmember, dtree

       -A <u>gid_list</u>

                 -o output permitted
                           path

                 -o output not permitted
                           systemguid, nodeguid, portguid, lid, desc,  node,  portinfo,  sminfo,  swinfo,  link,
                           vlarb, pkey, service, mcmember, inform, linfdb, mcfdb, trace, dglist, dgmember, dtree

Copyright(C) 2015-2019                          Intel Corporation                                  <u><a href="../man1/opasaquery.1.html">opasaquery</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>