<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>podman-machine-init - Initialize a new virtual machine</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/podman">podman_5.4.1+ds1-1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       podman-machine-init - Initialize a new virtual machine

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>podman</b> <b>machine</b> <b>init</b> [<u>options</u>] [<u>name</u>]

</pre><h4><b>DESCRIPTION</b></h4><pre>
       Initialize a new virtual machine for Podman.

       The  default  machine  name is <b>podman-machine-default</b>. If a machine name is not specified as an argument,
       then the new machine will be named <b>podman-machine-default</b>.

       Rootless only.

       Podman on MacOS and Windows requires a virtual machine. This is because containers are Linux - containers
       do not run on any other OS because containers' core functionality are tied to the  Linux  kernel.  Podman
       machine must be used to manage MacOS and Windows machines, but can be optionally used on Linux.

       <b>podman</b>  <b>machine</b>  <b>init</b>  initializes  a  new  Linux virtual machine where containers are run.  SSH keys are
       automatically generated to access the VM, and system connections to the root account and a  user  account
       inside the VM are added.

       By  default, the VM distribution is Fedora CoreOS except for WSL which is based on a custom Fedora image.
       While Fedora CoreOS upgrades come out every 14 days, the automatic update mechanism Zincata  is  disabled
       by Podman machine.

       To check if there is an upgrade available for your machine os, you can run the following command:

       $ podman machine ssh 'sudo rpm-ostree upgrade --check'

       If  an  update  is  available,  you can rerun the above command and remove the <b>--check</b> and your operating
       system will be updated.  After updating, you must stop and start your machine with <b>podman</b> <b>machine</b> <b>stop</b> <b>&amp;&amp;</b>
       <b>podman</b> <b>machine</b> <b>start</b> for it to take effect.

       Note: Updating as described above can result in version mismatches between Podman on the host and  Podman
       in  the machine.  Executing <b>podman</b> <b>info</b> should reveal versions of both.  A configuration where the Podman
       host and machine mismatch are unsupported.

       For more information on updates and advanced configuration, see the  Fedora  CoreOS  documentation  about
       auto-updates and update strategies.

       Fedora  CoreOS  upgrades  come  out every 14 days and are detected and installed automatically. The VM is
       rebooted during the upgrade.  For more information on updates and advanced configuration, see the  Fedora
       CoreOS documentation about auto-updates and update strategies.

       Default Podman machine settings can be set via the [machine] section in the <a href="../man5/containers.conf.5.html">containers.conf</a>(5) file.

</pre><h4><b>OPTIONS</b></h4><pre>
   <b>--cpus=</b><u><b>number</b></u>
       Number of CPUs.

   <b>--disk-size=</b><u><b>number</b></u>
       Size of the disk for the guest VM in GiB.

   <b>--help</b>
       Print usage statement.

   <b>--ignition-path</b>
       Fully qualified path of the ignition file.

       If  an ignition file is provided, the file is copied into the user's CONF_DIR and renamed.  Additionally,
       no SSH keys are generated, nor are any system connections made.  It is assumed that the user  does  these
       things manually or handled otherwise.

   <b>--image</b>
       Fully  qualified  registry,  path,  or  URL  to  a  VM  image.   Registry  target  must be in the form of
       <b>docker://registry/repo/image:version</b>.

       Note: Only images provided by podman will be supported.

   <b>--memory,</b> <b>-m=</b><u><b>number</b></u>
       Memory (in MiB). Note: 1024MiB = 1GiB.

   <b>--now</b>
       Start the virtual machine immediately after it has been initialized.

   <b>--playbook</b>
       Add the provided Ansible playbook to the machine and execute it after the first boot.

       Note: The playbook will be executed with the same privileges given to the user in  the  virtual  machine.
       The  playbook  provided cannot include other files from the host system, as they will not be copied.  Use
       of the <b>--playbook</b> flag will require the image to include Ansible. The default image  provided  will  have
       Ansible included.

   <b>--rootful</b>
       Whether  this  machine  prefers  rootful  (<b>true</b>)  or  rootless  (<b>false</b>)  container execution. This option
       determines the remote connection default if there is no existing remote connection configurations.

       API forwarding, if available, follows this setting.

   <b>--timezone</b>
       Set the timezone for the machine  and  containers.   Valid  values  are  <b>local</b>  or  a  <b>timezone</b>  such  as
       <b>America/Chicago</b>.  A value of <b>local</b>, which is the default, means to use the timezone of the machine host.

       The  timezone  setting is not used with WSL.  WSL automatically sets the timezone to the same as the host
       Windows operating system.

   <b>--usb=</b><u><b>bus=number,devnum=number</b></u> <b>or</b> <u><b>vendor=hexadecimal,product=hexadecimal</b></u>
       Assign a USB device from the host to the VM via USB passthrough.  Only supported for QEMU Machines.

       The device needs to have proper permissions in order to be passed to the machine. This means  the  device
       needs to be under your user group.

       Note that using bus and device number are simpler but the values can change every boot or when the device
       is unplugged.

       When  specifying  a  USB  using  vendor and product ID's, if more than one device has the same vendor and
       product ID, the first available device is assigned.

   <b>--user-mode-networking</b>
       Indicates that this machine relays traffic from the guest through a user-space  process  running  on  the
       host. In some VPN configurations the VPN may drop traffic from alternate network interfaces, including VM
       network  devices.  By  enabling user-mode networking (a setting of <b>true</b>), VPNs observe all podman machine
       traffic as coming from the host, bypassing the problem.

       When the qemu backend is used (Linux, Mac), user-mode networking is mandatory and the only allowed  value
       is  <b>true</b>.  In  contrast,  The Windows/WSL backend defaults to <b>false</b>, and follows the standard WSL network
       setup.  Changing this setting to <b>true</b> on Windows/WSL informs Podman to replace the WSL  networking  setup
       on  start  of  this  machine instance with a user-mode networking distribution. Since WSL shares the same
       kernel across distributions, all other running distributions reuses this  network.   Likewise,  when  the
       last machine instance with a <b>true</b> setting stops, the original networking setup is restored.

   <b>--username</b>
       Username  to  use for executing commands in remote VM. Default value is <b>core</b> for FCOS and <b>user</b> for Fedora
       (default on Windows hosts). Should match the one used inside the resulting VM image.

   <b>--volume,</b> <b>-v=</b><u><b>source:target[:options]</b></u>
       Mounts a volume from source to target.

       Create a mount. If /host-dir:/machine-dir is specified as the <b>*source:target*</b>, Podman mounts <u>host-dir</u>  in
       the host to <u>machine-dir</u> in the Podman machine.

       Additional  options  may  be  specified  as a comma-separated string. Recognized options are: * <b>ro</b>: mount
       volume read-only * <b>rw</b>: mount volume read/write (default) * <b>security_model=[model]</b>:  specify  9p  security
       model (see below)

       The                   9p                   security                   model                  [determines]
       https://wiki.qemu.org/Documentation/9psetup#Starting_the_Guest_directly if  and  how  the  9p  filesystem
       translates some filesystem operations before actual storage on the host.

       In order to allow symlinks to work, on MacOS the default security model is
        <u>none</u>.

       The  value  of  <u>mapped-xattr</u>  specifies  that  9p  store  symlinks  and  some file attributes as extended
       attributes on the host. This is suitable when the host and the guest do not need to interoperate  on  the
       shared filesystem, but has caveats for actual shared access; notably, symlinks on the host are not usable
       on  the guest and vice versa. If interoperability is required, then choose <u>none</u> instead, but keep in mind
       that the guest is not able to do things that the user running the virtual machine cannot do, e.g.  create
       files owned by another user. Using <u>none</u> is almost certainly the best choice for read-only volumes.

       Example: <b>-v</b> <b>"$HOME/git:$HOME/git:ro,security_model=none"</b>

       Default volume mounts are defined in <u>containers.conf</u>.  Unless changed, the default values is <b>$HOME:$HOME</b>.

       <b>Note</b>  <b>on</b>  <b>Windows</b> <b>Subsystem</b> <b>for</b> <b>Linux</b> <b>(WSL)</b> Since all drives are mounted at <b><a href="file:/mnt">/mnt</a></b> on startup by default in
       WSL, passing <b>--volume</b> is redundant and has no effect. The host home directory for  a  <b>C:</b>  drive  will  be
       mounted at <b>/mnt/c/Users/&lt;my</b> <b>username&gt;</b>.

</pre><h4><b>EXAMPLES</b></h4><pre>
       Initialize the default Podman machine, pulling the content from the internet.

       $ podman machine init

       Initialize a Podman machine for the specified name pulling the content from the internet.

       $ podman machine init myvm

       Initialize  the  default Podman machine pulling the content from the internet defaulting to rootful mode.
       The default is rootless.

       $ podman machine init --rootful

       Initialize the default Podman machine overriding its disk size override, pulling  the  content  from  the
       internet.

       $ podman machine init --disk-size 50

       Initialize  the  specified  Podman  machine  overriding  its  memory  size,  pulling the content from the
       internet.

       $ podman machine init --memory=1024 myvm

       Initialize the default Podman machine with the host directory <b>/Users</b> mounted into the VM at <b>/Users</b>.

       $ podman machine init -v /Users:/Users

       Initialize the default Podman machine  with  a  usb  device  passthrough  specified  with  options.  Only
       supported for QEMU Machines.

       $ podman machine init --usb vendor=13d3,product=5406

       Initialize  the  default  Podman  machine with a usb device passthrough with specified with options. Only
       supported for QEMU Machines.

       $ podman machine init --usb bus=1,devnum=3

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man1/podman.1.html">podman</a>(1)</b>, <b><a href="../man1/podman-machine.1.html">podman-machine</a>(1)</b>, <b><a href="../man5/containers.conf.5.html">containers.conf</a>(5)</b>

</pre><h4><b>HISTORY</b></h4><pre>
       March 2021, Originally compiled by Ashley Cui <a href="mailto:acui@redhat.com">acui@redhat.com</a> ⟨<a href="mailto:acui@redhat.com">mailto:acui@redhat.com</a>⟩

                                                                                          <u><a href="../man1/podman-machine-init.1.html">podman-machine-init</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>