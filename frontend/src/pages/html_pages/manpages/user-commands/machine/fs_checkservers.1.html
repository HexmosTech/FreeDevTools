<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>fs_checkservers - Displays the status of server machines</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/openafs-client">openafs-client_1.8.13.2-1ubuntu1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       fs_checkservers - Displays the status of server machines

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>fs</b> <b>checkservers</b> [<b>-cell</b> &lt;<u>cell</u> <u>to</u> <u>check</u>&gt;] [<b>-all</b>] [<b>-fast</b>]
           [<b>-interval</b> &lt;<u>seconds</u> <u>between</u> <u>probes</u>&gt;] [<b>-help</b>]

       <b>fs</b> <b>checks</b> [<b>-c</b> &lt;<u>cell</u> <u>to</u> <u>check</u>&gt;] [<b>-a</b>] [<b>-f</b>]
           [<b>-i</b> &lt;<u>seconds</u> <u>between</u> <u>probes</u>&gt;] [<b>-h</b>]

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The <b>fs</b> <b>checkservers</b> command reports whether certain AFS server machines are accessible from the local
       client machine. The machines belong to one of two classes, and the Cache Manager maintains a list of them
       in kernel memory:

       •   The  database  server  machines for every cell listed in the local <u>/etc/openafs/CellServDB</u> <u>file</u>, plus
           any machines added to the memory list by the <b>fs</b> <b>newcell</b> command since the last reboot.

       •   All file server machines the Cache Manager has recently contacted, and which  it  probably  needs  to
           contact  again  soon.  In  most cases, the Cache Manager holds a callback on a file or volume fetched
           from the machine.

       If the Cache Manager is unable to contact the vlserver process  on  a  database  server  machine  or  the
       <b>fileserver</b>  process  on a file server machine, it marks the machine as inaccessible. (Actually, if a file
       server machine is multihomed, the Cache Manager attempts to contact all of the machine's interfaces,  and
       only  marks the machine as down if the <b>fileserver</b> fails to reply via any of them.) The Cache Manager then
       periodically (by default, every three minutes) sends a probe to each marked machine,  to  see  if  it  is
       still  inaccessible.  If  a  previously  inaccessible  machine  responds,  the  Cache Manager marks it as
       accessible and no longer sends the periodic probes to it.

       The <b>fs</b> <b>checkservers</b> command updates the list of inaccessible machines by having the Cache Manager probe a
       specified set of them:

       •   By default, only machines that are marked inaccessible and belong to the local cell (the cell  listed
           in the local <u>/etc/openafs/ThisCell</u> file).

       •   If  the  <b>-cell</b>  argument  is  included,  only machines that are marked inaccessible and belong to the
           specified cell.

       •   If the <b>-all</b> flag is included, all machines marked inaccessible.

       If the <b>-fast</b> flag is included, the Cache Manager does not probe any machines,  but  instead  reports  the
       results of the most recent previous probe.

       To set the interval between probes rather than produce a list of inaccessible machines, use the <b>-interval</b>
       argument.  The non-default setting persists until the machine reboots; to preserve it across reboots, put
       the appropriate <b>fs</b> <b>checkservers</b> command in the machine's AFS initialization files.

</pre><h4><b>CAUTIONS</b></h4><pre>
       The command can take quite a while to complete, if a number of machines  do  not  respond  to  the  Cache
       Manager's  probe.  The  Cache  Manager  probes  machines sequentially and waits a standard timeout period
       before marking the machine as unresponsive, to allow for slow network communication. To make the  command
       shell  prompt  return quickly, put the command in the background. It is harmless to interrupt the command
       by typing Ctrl-C or another interrupt signal.

       Note that the Cache Manager probes only server machines marked inaccessible in its memory list. A  server
       machine's  absence  from the output does not necessarily mean that it is functioning, because it possibly
       is not included in the memory list at all (if, for example,  the  Cache  Manager  has  not  contacted  it
       recently). For the same reason, the output is likely to vary on different client machines.

       Unlike most <b>fs</b> commands, the fs checkservers command does not refer to the AFSCELL environment variable.

</pre><h4><b>OPTIONS</b></h4><pre>
       <b>-cell</b> &lt;<u>cell</u> <u>to</u> <u>check</u>&gt;
           Names each cell in which to probe server machines marked as inaccessible. Provide the fully qualified
           domain  name,  or  a  shortened  form  that disambiguates it from the other cells listed in the local
           <u>/etc/openafs/CellServDB</u> file. Combine this argument with the <b>-fast</b> flag if desired, but not with  the
           <b>-all</b> flag. Omit both this argument and the <b>-all</b> flag to probe machines in the local cell only.

       <b>-all</b>
           Probes  all  machines  in  the Cache Manager's memory list that are marked inaccessible. Combine this
           argument with the <b>-fast</b> flag if desired, but not with the <b>-cell</b> argument. Omit both this flag and the
           <b>-cell</b> argument to probe machines in the local cell only.

       <b>-fast</b>
           Displays the Cache Manager's current list of machines that are inaccessible, rather than sending  new
           probes. The output can as old as the current setting of the probe interval (by default three minutes,
           and maximum ten minutes).

       <b>-interval</b> &lt;<u>seconds</u> <u>between</u> <u>probes</u>&gt;
           Sets  or  reports  the number of seconds between the Cache Manager's probes to machines in the memory
           list that are marked inaccessible:

           •   To set the interval, specify a value from the range between 1 and 600 (10 minutes);  the  default
               is  180  (three minutes). The issuer must be logged in as the local superuser "root". The altered
               setting persists until again changed with this command, or until the machine  reboots,  at  which
               time the setting returns to the default.

           •   Provide a value of 0 (zero) to display the current interval setting. No privilege is required. Do
               not combine this argument with any other.

       <b>-help</b>
           Prints the online help for this command. All other valid options are ignored.

</pre><h4><b>OUTPUT</b></h4><pre>
       If  there  are  no  machines marked as inaccessible, or if all of them now respond to the Cache Manager's
       probe, the output is:

          All servers are running.

       Note that this message does not mean that all server machines in each  relevant  cell  are  running.  The
       output indicates the status of only those machines that the Cache Manager probes.

       If a machine fails to respond to the probe within the timeout period, the output begins with the string

          These servers unavailable due to network or server problems:

       and  lists  the  hostname  of  each  machine on its own line. The Cache Manager stores machine records by
       Internet address, so the format of each hostname (uppercase or lowercase letters, or an Internet  address
       in  dotted  decimal  format)  depends  on how the local cell's name service translates it at the time the
       command is issued. If a server machine is multihomed,  the  output  lists  only  one  of  its  interfaces
       (usually, the currently most preferred one).

       If the <b>-interval</b> argument is provided with a value between 1 and 600, there is no output. If the value is
       0, the output reports the probe interval as follows:

          The current down server probe interval is &lt;interval&gt; secs

</pre><h4><b>EXAMPLES</b></h4><pre>
       The  following  command  displays  the Cache Manager's current list of unresponsive machines in the local
       cell, rather than probing them again. The output  indicates  that  if  there  were  any  machines  marked
       inaccessible, they all responded to the previous probe.

          % fs checkservers -fast
          All servers are running.

       The following example probes machines in the Cache Manager's memory list that belong to the "example.org"
       cell:

          % fs checkservers -cell example.org
          All servers are running.

       The  following example probes all server machines in the Cache Manager's memory list. It reports that two
       machines did not respond to the probe.

          % fs checkservers -all
          These servers unavailable due to network or server problems:
          fs1.example.com SV3.EXAMPLE.ORG.

</pre><h4><b>PRIVILEGE</b> <b>REQUIRED</b></h4><pre>
       To set the probe interval, the issuer must be logged in as the  local  superuser  "root".  Otherwise,  no
       privilege is required.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man5/CellServDB.5.html">CellServDB</a></b>(5), <b><a href="../man5/ThisCell.5.html">ThisCell</a></b>(5), <b><a href="../man1/fs_newcell.1.html">fs_newcell</a></b>(1)

</pre><h4><b>COPYRIGHT</b></h4><pre>
       IBM Corporation 2000. &lt;<a href="http://www.ibm.com/">http://www.ibm.com/</a>&gt; All Rights Reserved.

       This  documentation  is covered by the IBM Public License Version 1.0.  It was converted from HTML to POD
       by software written by Chas Williams and Russ Allbery, based on  work  by  Alf  Wachsmann  and  Elizabeth
       Cassell.

OpenAFS                                            2025-03-21                                 <u><a href="../man1/FS_CHECKSERVERS.1.html">FS_CHECKSERVERS</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>