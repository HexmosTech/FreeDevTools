<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>systemd-machine-id-setup - Initialize the machine ID in /etc/machine-id</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/systemd">systemd_257.4-1ubuntu3.1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       systemd-machine-id-setup - Initialize the machine ID in <a href="file:/etc/machine-id">/etc/machine-id</a>

</pre><h4><b>SYNOPSIS</b></h4><pre>

       <b>systemd-machine-id-setup</b>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>systemd-machine-id-setup</b> may be used by system installer tools to initialize the machine ID stored in
       <a href="file:/etc/machine-id">/etc/machine-id</a> at install time, with a provisioned or randomly generated ID. See <b><a href="../man5/machine-id.5.html">machine-id</a></b>(5) for more
       information about this file.

       If the tool is invoked without the <b>--commit</b> switch, <a href="file:/etc/machine-id">/etc/machine-id</a> is initialized with a valid, new
       machine ID if it is missing or empty. The new machine ID will be acquired in the following fashion:

        1. If a valid machine ID is stored in <a href="file:/run/machine-id">/run/machine-id</a>, the machine ID is copied and used to initialize
           the machine ID in /etc/machine-id. This step is skipped if <b>--root=</b> is specified or running in a
           chroot environment.

        2. If a valid D-Bus machine ID is already configured for the system, the D-Bus machine ID is copied and
           used to initialize the machine ID in /etc/machine-id.

        3. If a valid machine ID is provided through <b>system.machine_id</b> credential, the machine ID is copied and
           used to initialize the machine ID in /etc/machine-id. This step is skipped if <b>--root=</b> is specified or
           running in a chroot environment.

        4. If run inside a KVM virtual machine and a UUID is configured (via the <b>-uuid</b> option), this UUID is
           used to initialize the machine ID. The caller must ensure that the UUID passed is sufficiently unique
           and is different for every booted instance of the VM. This step is skipped if <b>--root=</b> is specified or
           running in a chroot environment.

        5. Similarly, if run inside a Linux container environment and a UUID is configured for the container,
           this is used to initialize the machine ID. For details, see the documentation of the <b>Container</b>
           <b>Interface</b>[1]. This step is skipped if <b>--root=</b> is specified or running in a chroot environment.

        6. Otherwise, a new ID is randomly generated.

       The <b>--commit</b> switch may be used to commit a transient machined ID to disk, making it persistent. For
       details, see below.

       Use <b><a href="../man1/systemd-firstboot.1.html">systemd-firstboot</a></b>(1) to initialize the machine ID on mounted (but not booted) system images.

</pre><h4><b>OPTIONS</b></h4><pre>
       The following options are understood:

       <b>--root=</b><u>path</u>
           Takes a directory path as argument. All paths operated on will be prefixed with the given alternate
           <u>root</u> path, including the path for <a href="file:/etc/machine-id">/etc/machine-id</a> itself.

           Added in version 212.

       <b>--image=</b><u>path</u>
           Takes a path to a device node or regular file as argument. This is similar to <b>--root=</b> as described
           above, but operates on a disk image instead of a directory tree.

           Added in version 249.

       <b>--image-policy=</b><u>policy</u>
           Takes an image policy string as argument, as per <b><a href="../man7/systemd.image-policy.7.html">systemd.image-policy</a></b>(7). The policy is enforced when
           operating on the disk image specified via <b>--image=</b>, see above. If not specified defaults to the "*"
           policy, i.e. all recognized file systems in the image are used.

       <b>--commit</b>
           Commit a transient machine ID to disk. This command may be used to convert a transient machine ID
           into a persistent one. A transient machine ID file is one that was bind mounted from a memory file
           system (usually "tmpfs") to <a href="file:/etc/machine-id">/etc/machine-id</a> during the early phase of the boot process. This may
           happen because <a href="file:/etc/">/etc/</a> is initially read-only and was missing a valid machine ID file at that point.

           This command will execute no operation if <a href="file:/etc/machine-id">/etc/machine-id</a> is not mounted from a memory file system,
           or if <a href="file:/etc/">/etc/</a> is read-only. The command will write the current transient machine ID to disk and unmount
           the <a href="file:/etc/machine-id">/etc/machine-id</a> mount point in a race-free manner to ensure that this file is always valid and
           accessible for other processes.

           This command is primarily used by the <b><a href="../man8/systemd-machine-id-commit.service.8.html">systemd-machine-id-commit.service</a></b>(8) early boot service.

           Added in version 227.

       <b>--print</b>
           Print the machine ID generated or committed after the operation is complete.

           Added in version 231.

       <b>-h</b>, <b>--help</b>
           Print a short help text and exit.

       <b>--version</b>
           Print a short version string and exit.

</pre><h4><b>EXIT</b> <b>STATUS</b></h4><pre>
       On success, 0 is returned, a non-zero failure code otherwise.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man1/systemd.1.html">systemd</a></b>(1), <b><a href="../man5/machine-id.5.html">machine-id</a></b>(5), <b><a href="../man8/systemd-machine-id-commit.service.8.html">systemd-machine-id-commit.service</a></b>(8), <b><a href="../man1/dbus-uuidgen.1.html">dbus-uuidgen</a></b>(1), <b><a href="../man1/systemd-firstboot.1.html">systemd-firstboot</a></b>(1)

</pre><h4><b>NOTES</b></h4><pre>
        1. Container Interface
           https://systemd.io/CONTAINER_INTERFACE

systemd 257.4                                                                        <u><a href="../man1/SYSTEMD-MACHINE-ID-SETUP.1.html">SYSTEMD-MACHINE-ID-SETUP</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>