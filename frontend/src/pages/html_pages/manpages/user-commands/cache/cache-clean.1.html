<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>cache-clean - Administration tool for the A-REX cache.</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/nordugrid-arc-arex">nordugrid-arc-arex_6.21.1-3_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       cache-clean - Administration tool for the A-REX cache.

</pre><h4><b>SYNOPSIS</b></h4><pre>
       cache-clean [-h] [-s] [-S] [-m NN -M NN] [-E N] [-D debug_level]
         [-f space_command] [ -c &lt;arex_config_file&gt; | &lt;dir1&gt; [&lt;dir2&gt; [...]] ]

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>cache-clean</b>  is  a  tool for administrators of ARC server installations to safely remove A-REX cache data
       and to provide an overview of the contents of the cache.  It is used by the A-REX to automatically manage
       cache contents.

       There are two modes of operation -  printing  statistics  and  deleting  files.   If  <b>-s</b>  is  used,  then
       statistics  are  printed on each cache. If <b>-m</b> and <b>-M</b> are used then files in each cache are deleted if the
       space used by the cache on the file system is more than that given by <b>-M,</b> in the order of least  recently
       accessed, until the space used by the cache is equal to what is specified by <b>-m.</b>  If <b>-E</b> is used, then all
       files  accessed less recently than the given time are deleted.  <b>-E</b> can be used in combination with <b>-m</b> and
       <b>-M</b> but deleting files using <b>-E</b> is carried out first. If after this the cache used  space  is  still  more
       than that given by <b>-M</b> then cleaning according to those options is performed.

       If  the  cache  is  on a file system shared with other data then <b>-S</b> should be specified so that the space
       used by the cache is calculated. Otherwise all the used space on the file system is assumed to be for the
       cache. Using <b>-S</b> is slower so should only be used when the cache is shared.

       By default the "df" command is used to determine total and (if <b>-S</b> is not specified) used space.  If  this
       command  is  not  supported on the cache file system then <b>-f</b> can be used to specify an alternate command.
       The output of this command must be "total_bytes used_bytes", and so the command would normally be a small
       script around the file system space information tool. The cache directory is passed as the last  argument
       to this command.

       Cache  directories  are  given  by  <b>dir1,</b>  <b>dir2..</b>   or  taken from the config file specified by <b>-c</b> or the
       ARC_CONFIG environment variable.

       <b>-h</b> - print short help

       <b>-s</b> - print cache statistics, without deleting anything. The output displays for each cache the number  of
       deletable  (and  locked) files, the total size of these files, the percentage usage of the file system in
       which the cache is stored, and a histogram of access times of the files in the cache.

       <b>-S</b> - Calculate the size of the cache instead of taking used space on the file system. This should only be
       used when the cache file system is shared with other data.

       <b>-M</b> - the maximum used space (as % of the file system) at which to start cleaning

       <b>-m</b> - the minimum used space (as % of the file system) at which to stop cleaning

       <b>-E</b> - files accessed less recently than the given time period will be  deleted.  Example  values  of  this
       option are 1800, 90s, 24h, 30d. The default when no suffix is given is seconds.

       <b>-f</b>  -  alternative command to "df" for obtaining the file system total and used space. The output of this
       command must be "total_bytes used_bytes". The cache directory is passed as  the  last  argument  to  this
       command.

       <b>-D</b>  -  debug  level.  Possible values are FATAL, ERROR, WARNING, INFO, VERBOSE or DEBUG. Default level is
       INFO.

       <b>-c</b> - path to an A-REX config file, xml or ini format

       This tool is run periodically by the A-REX to keep the size of each cache within the limits specified  in
       the  configuration file. Therefore cleaning should not be performed manually, unless the cache size needs
       to be reduced temporarily. For performance reasons  it  may  however  be  desirable  to  run  cache-clean
       independently on the machine hosting the cache file system, if this is different from the A-REX host. The
       most useful function for administrators is to give an overview of the contents of the cache, using the <b>-s</b>
       option.

       Within each cache directory specified in the configuration file, there is a subdirectory for data (data/)
       and one for per-job hard links (joblinks/).  See the A-REX Administration Guide for more details.  <b>cache-</b>
       <b>clean</b>  should  only  operate on the data subdirectory, therefore when giving <b>dir</b> arguments they should be
       the top level cache directory.  <b>cache-clean</b> will then automatically only look at files  within  the  data
       directory.

</pre><h4><b>EXAMPLE</b></h4><pre>
       <b>cache-clean</b> <b>-m20</b> <b>-M30</b> <b>-E30d</b> <b>-D</b> <b>VERBOSE</b> <b>-c</b> <b>/etc/arc.conf</b>

       Cache  directories  are taken from the configuration file <b>/etc/arc.conf</b> and all cache files accessed more
       than 30 days ago are deleted. Then if the used space in a cache is above 30%, data is deleted  until  the
       used  space  reaches  20%.  Verbose debug output is enabled so information is output on each file that is
       deleted.

</pre><h4><b>COPYRIGHT</b></h4><pre>
       APACHE LICENSE Version 2.0

</pre><h4><b>AUTHOR</b></h4><pre>
       ARC software is developed by the NorduGrid Collaboration (<a href="http://www.nordugrid.org">http://www.nordugrid.org</a>), please  consult  the
       AUTHORS    file    distributed    with    ARC.    Please    report   bugs   and   feature   requests   to
       <a href="http://bugzilla.nordugrid.org">http://bugzilla.nordugrid.org</a>

NorduGrid ARC 6.21.1                               2025-02-21                                     <u><a href="../man1/CACHE-CLEAN.1.html">CACHE-CLEAN</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>