<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>r.carve  - Generates stream channels.</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/grass-doc">grass-doc_8.4.1-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       <b>r.carve</b>  - Generates stream channels.
       Takes vector stream data, transforms it to raster and subtracts depth from the output DEM.

</pre><h4><b>KEYWORDS</b></h4><pre>
       raster, hydrology

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>r.carve</b>
       <b>r.carve</b> <b>--help</b>
       <b>r.carve</b>   [-<b>n</b>]   <b>raster</b>=<u>name</u>   <b>vector</b>=<u>name</u>  <b>output</b>=<u>name</u>   [<b>points</b>=<u>name</u>]    [<b>width</b>=<u>float</u>]    [<b>depth</b>=<u>float</u>]
       [--<b>overwrite</b>]  [--<b>help</b>]  [--<b>verbose</b>]  [--<b>quiet</b>]  [--<b>ui</b>]

   <b>Flags:</b>
       <b>-n</b>
           No flat areas allowed in flow direction

       <b>--overwrite</b>
           Allow output files to overwrite existing files

       <b>--help</b>
           Print usage summary

       <b>--verbose</b>
           Verbose module output

       <b>--quiet</b>
           Quiet module output

       <b>--ui</b>
           Force launching GUI dialog

   <b>Parameters:</b>
       <b>raster</b>=<u>name</u> <b>[required]</b>
           Name of input raster elevation map

       <b>vector</b>=<u>name</u> <b>[required]</b>
           Name of input vector map containing stream(s)
           Or data source for direct OGR access

       <b>output</b>=<u>name</u> <b>[required]</b>
           Name for output raster map

       <b>points</b>=<u>name</u>
           Name for output vector map for adjusted stream points

       <b>width</b>=<u>float</u>
           Stream width (in meters)
           Default is raster cell width

       <b>depth</b>=<u>float</u>
           Additional stream depth (in meters)

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <u>r.carve</u> accepts vector stream data as input, transforms them to raster, and subtracts a  default-depth  +
       additional-depth  from  a  DEM. If the given width is more than 1 cell, it will carve the stream with the
       given width. With the <b>-n</b> flag it should eliminate all flat cells within the stream, so when  and  if  the
       water  gets  into  the stream it will flow. The <u>points</u> option generates x,y,z for points which define the
       stream with the z-value of the bottom of the carved-in stream. These points can  then  be  combined  with
       contours to interpolate a new DEM with better representation of valleys.

</pre><h4><b>NOTES</b></h4><pre>
       <u>r.carve</u>  does  not  create a depressionless DEM because many depressions are in flat areas and not in the
       streams.

</pre><h4><b>EXAMPLE</b></h4><pre>
       North Carolina sample dataset:
       # set computational region
       g.region raster=elev_lid792_1m -p
       # digitize a ditch for the farm pond
       echo "L  3 1
        638692.93595422 220198.90026383
        638737.42270627 220149.74706926
        638984.43306379 220148.19158842
        1     1" | v.in.ascii -n input=- output=ditch format=standard
       # visualize original data
       d.mon wx0
       d.rast elev_lid792_1m
       d.vect ditch
       # carve
       r.carve raster=elev_lid792_1m vector=ditch output=carved_dem width=3 depth=0.5
       # visualize resulting carved DEM map
       d.rast carved_dem
       # visualize
       r.relief input=elev_lid792_1m output=elev_lid792_1m_shaded
       r.relief input=carved_dem output=carved_dem_shaded
       d.rast elev_lid792_1m_shaded
       d.erase
       d.rast carved_dem_shaded
       # flow accumulation
       r.watershed elevation=elev_lid792_1m accumulation=elev_lid792_1m_accum
       r.watershed elevation=carved_dem accumulation=carved_dem_accum
       d.rast elev_lid792_1m_accum
       d.erase
       d.rast carved_dem_accum
       # differences
       r.mapcalc "accum_diff = elev_lid792_1m_accum - carved_dem_accum"
       r.colors accum_diff color=differences
       d.erase
       d.rast accum_diff
       <u>Fig:</u> <u>Original</u> <u>1m</u> <u>LiDAR</u> <u>based</u> <u>DEM</u> <u>with</u> <u>vector</u> <u>streams</u> <u>map</u>  <u>on</u> <u>Fig:</u> <u>Original</u> <u>1m</u> <u>LiDAR</u> <u>based</u> <u>DEM</u> <u>shown</u> <u>as</u> <u>shaded</u> <u>terrain</u>
       <u>top</u>

       <u>Fig:</u> <u>Carved</u> <u>1m</u> <u>LiDAR</u> <u>based</u> <u>DEM</u>                               <u>Fig:</u> <u>Carved</u> <u>1m</u> <u>LiDAR</u> <u>based</u> <u>DEM</u> <u>shown</u> <u>as</u> <u>shaded</u> <u>terrain</u>

       <u>Fig:</u> <u>Flow</u> <u>accumulation</u> <u>in</u> <u>original</u> <u>1m</u> <u>LiDAR</u> <u>based</u> <u>DEM</u>        <u>Fig:</u> <u>Flow</u> <u>accumulation</u> <u>in</u> <u>carved</u> <u>1m</u> <u>LiDAR</u> <u>based</u> <u>DEM</u>

</pre><h4><b>KNOWN</b> <b>ISSUES</b></h4><pre>
       The  module  does  not  operate  yet  in latitude-longitude coordinate reference system.  It has not been
       thoroughly tested, so not all options may work properly - but this was the intention.

</pre><h4><b>REFERENCES</b></h4><pre>
       Terrain modeling and Soil Erosion Simulations for Fort Hood and Fort Polk test areas, by Helena Mitasova,
       Lubos Mitas, William M. Brown, Douglas M.  Johnston, GMSL (Report for CERL 1999)

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
        <u>r.flow,</u> <u>r.fill.dir,</u> <u>r.watershed</u>

</pre><h4><b>AUTHORS</b></h4><pre>
       Bill Brown (GMSL)
       GRASS 6 update: Brad Douglas

</pre><h4><b>SOURCE</b> <b>CODE</b></h4><pre>
       Available at: r.carve source code (history)

       Accessed: Friday Apr 04 01:19:00 2025

       Main index | Raster index | Topics index | Keywords index | Graphical index | Full index

       Â© 2003-2025 GRASS Development Team, GRASS GIS 8.4.1 Reference Manual

GRASS 8.4.1                                                                                      <u><a href="../man1grass/r.carve.1grass.html">r.carve</a></u>(1grass)
</pre>
 </div>
</div></section>
</div>
</body>
</html>