<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>mplex - MPEG 1/2 program/system stream multiplexer</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/mjpegtools">mjpegtools_2.1.0+debian-8.1build1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       mplex - MPEG 1/2 program/system stream multiplexer

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>mplex</b>  [<b>-f|--format</b>  <u>format_code</u>]  [<b>-i|--vdr-index]</b>  <u>index_pathname</u> [<b>-v|--verbose</b> <u>num</u>] [<b>-b|--video-buffer</b>
       <u>video_buffer_size_kB</u>[, <u>video_buffer_size_kB</u>...]<u>]</u> [<b>-L|--lpcm-params</b> <u>params</u>[, <u>params</u>...<u>]</u>] [<b>-r|--mux-bitrate</b>
       <u>muxed_bitrate_kbps</u>]  [<b>-l|--mux-limit</b>   <u>num</u>]   [<b>-O|--sync-offset</b>   <u>num[</u><b>ms</b><u>|</u><b>s</b><u>|</u><b>mpt</b><u>]</u>]   [<b>-d|--subpicture-delay</b>
       <u>[</u><b>ms</b><u>|</u><b>s</b><u>|</u><b>mpt|c]</b>[:stream-id]<u>[,</u>delay[:stream-id]<u>]</u>  [<b>-R|--run-in</b>  <u>num</u>]  [<b>-V|--vbr]</b> [<b>-C|--cbr]</b> [<b>-s|--sector-size</b>
       <u>sector_size_B</u>]     [<b>-p|--packets-per-pack</b>     <u>num</u>]      [<b>-h|--system-headers</b>]      [<b>-S|--max-segment-size</b>
       <u>output_filesize_limit_MB</u>] [<b>-M|--split-segment]</b>

       [<b>-?|--help</b>] <b>-o|--output</b> <u>output_pathname_pattern</u> <b>input_file...</b>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       Mplex  is  a  general-purpose audio/video multiplexer for MPEG-1/MPEG-2.  It accepts one or more MPEG-1/2
       video stream, MPEG layer I/II/III, DTS, AC3 and LPCM audio streams and multiplexes them into  a  combined
       program/system  stream  according to the constraints specified.  Many different types of output structure
       are supported along with presets for standard VCD and SVCD streams.  These latter can  be  burned  to  CD
       using tools such as <b><a href="../man1/vcdimager.1.html">vcdimager</a></b>(1) and played in stand-alone players.

       It  is  also  capable of automatically splitting the output stream into chunks of a specified size either
       independently or at sequence end/start points in the input video stream.

</pre><h4><b>GENERAL</b> <b>FUNCTION</b> <b>LETTERS</b></h4><pre>
       <b>-o|--output</b> <u>output_filename_pattern</u>
              This mandatory option sets the pattern for the name(s) of output files.

              An integer format code (e.g. %d) in the name is replaced by the number of the file generated  (see
              <b><a href="../man3/printf.3.html">printf</a></b>(3)).

       <b>-v|--verbose</b> <u>num</u>
              Set verbosity level to <u>num</u>:
               0 - warnings and errors only,
               1 - information as well,
               2 - really verbose.

       <b>-?|--help</b>
              Display a synopsis of the command syntax.

</pre><h4><b>FUNCTION</b> <b>LETTERS</b></h4><pre>
       <b>-f|--format</b> <u>format_code</u>
              This  command allows one of a number of convenient preset output formats or generic MPEG1 or MPEG2
              output to be selected. For the generic formats other function letters can be used to control  many
              aspects  of  the  multiplexed stream.  For VCD/SVCD/DVD compliant output the corresponding formats
              <u>must</u> be used as the standards require the multiplexer to enforce a variety of special  constraints
              on the structure of the output stream.

               0  -  Generic  MPEG1.   A  simple  general-purpose  MPEG1  format primarily suitable for software
              decoders.  Buffer sizes and VBR must be specified.  Bit-rate can be auto-detected.
               1 - VCD.  Standard VCD.  Overrides other option settings.
               2 - User VCD.  VCD format but buffer size, bit rate and VBR can be set manually.
               3 - Generic MPEG2.  Like 0 except MPEG2.
               4 - SVCD.  Standard SVCD.  Overrides other option settings.
               5 - User-rate SVCD.  SVCD format but buffer size bit rate and VBR can be set.
               6 - VCD Stills stream (mixed mode with hi-res and standard-res image  streams         multiplexed
              are supported).
               7 - SVCD Stills stream.
               8 - DVD (with NAV sectors). Don't get too excited.  This is really a
               very minimal mux format.  It includes empty versions of the peculiar
               VOBU start sectors DVD VOB's include.  This is enough to persuade some
               hardware players to play the stream but is a long way from full DVD authoring.
               9 - DVD.  As above but without the empty VOBU sectors.

       <b>-W|--workarounds</b> <u>workaround_flag</u> <u>[,workaround_flag...]</u>
              A  comma-seperated list of flags that set special work-arounds for what are suspected to be parser
              Bugs in widely used players. No workarounds are (currently) implemented but history suggests  this
              may  change  quickly  ;-) <b>-i|--vdr-index</b> <u>index_pathname</u> This tells mplex to generate an index file
              for the output in the format used by the 'vdr' (video disk recorder package). Useful if  you  want
              to  write  output  into  vdr's  recordings  directory for playback on your video recorder PC. This
              probably only useful in combination with -f 9.

       <b>-r|--mux-bitrate</b> <u>num</u>
              The total (non VBR) / peak (VBR) bit-rate of the output stream in k Bits/sec. If  unspecified  and
              not set by a preset it is automatically calculated from the input stream.

       <b>-b|--video-buffer</b> <u>numlist</u>
              A  comma-seperateed  list  of video decoder buffer sizes in KB for the video streams (given in the
              order the video streams appear on the  command  line).   The  default  is  46KB  the  (tiny)  size
              specified  for VCD.  The size to use for SVCD is the (more reasonable) 230KB.  If you are encoding
              for a half-decent software decoder it makes sense to push this up to 500K or more.

       <b>-L|--lpcm-params</b>
              <u>samples_per_sec:channels:bits_per_sample</u>
              [, <u>samples_per_sec:channels:bits_per_sample</u>
               ...]
              A comma-seperated list of paramter sets for the lpcm audio streams (given in the  order  the  lpcm
              streams  appear  on  the command line).  Each parameter set comprises the sampling rate in Hz, the
              number of channels, and the number of bits per sample  seperated  by  colons.   For  example,  the
              default 48kHz two-channel 16-bit audio would be specified as 48000:2:16.

              Note:  these  parameters  are  necessary  because  mplex  expects  raw LPCM audio data without any
              headers.  That is: for each sample point a group of 16,20, or 24 bit  amplitude  values,  one  for
              each  channel.  Amplitude  values  are  signed  with  the  constituent  bytes  in big-endian (most
              significant bytes first) order.  For 20 bit samples I am not sure but what  documentation  I  have
              suggests  such  samples  are padded at the lsb end so that they byte-align at the most significant
              bits.

       <b>-l|--mux-limit</b> <u>num</u>
              Multiplex limit.  Multiplex  only  the  specified  number  of  seconds.   Useful  for  tuning  and
              debugging.

       <b>-O|--sync-offset</b> <u>num[</u><b>ms</b><u>|</u><b>s</b><u>|</u><b>mpt</b><u>|</u><b>c</b><u>]</u>
              Set  the  presentation timestamp offset of video stream w.r.t. audio stream (video-audio) in mSec.
              This flag is used to produce a stream  with  synchronised  audio/video  when  one  stream  started
              before/after  the  other.   This  is common when transcoding as the synchronisation information is
              typically lost during the (seperate) decoding/encoding of audio and video.

              By appending 's', 'ms' or 'mpt' the offset can given in seconds, milliseconds or MPEG clock  ticks
              (1/90000th of a second) respectively.  If no suffix is given milliseconds are assumed.

       <b>-d|--subpicture-delay</b> <u>num</u><b>[ms|s|mpt|c]</b><u>[:stream-id]</u><b>[,</b><u>delay[:stream-id]]</u>
              Specify  offset  of timestamps (video-subpicture) in msec sec, mpt or clock-ticks. If no suffix is
              given milliseconds are assumed.

              The intention of the adding subtitle support was to enable mplex to mux all streams necessary  for
              a  DVD  so  that the mpeg2 stream created can be used directly for further dvd creation. Currently
              only ps1 streams (like created by tcextract) are supported

              Valid subtitle stream are in a range of 32-63 (including).  You may want to  specify  each  stream
              you mplex, use "," to delimit each stream.

              <b>Example:</b> If you want to mux one video, one audio and two subtitle streams having delays of 500 and
              1000 ms, the first shall have id 32, the second is 33 (Subtitle streams 0 and 1):

              $   mplex  -f  8  -o  my_mpeg.mpeg  -d  500:32,1000:33  video_in.mpv  audio_in.m2a  subtitle_0.ps1
              subtitle_1.ps1

       <b>-R|--run-in</b> <u>num</u>
              Set a non-default run-in (the time data is preloaded into buffers before decoding is scheduled) at
              the start of each sequence in video frame intervals.  By default a run-in matching  the  specified
              size  of  the  video  and  audio  buffers in the decoder and the type of multiplexing (constant or
              variable bit-rate) is selected automatically.

       <b>-V|--vbr</b>
              Force variable bit rate multiplexing even if selected profile defaults to constant-bit-rate.

       <b>-C||-cbr</b>
              Force constant bit rate multiplexing even if selected profile defaults to variable bit-rate.

       <b>-s|--sector-size</b> <u>num</u>
              This option specifies the sector size of the output stream in bytes.

       <b>-p|--packets-per-pack</b> <u>num</u>
              This option specifies the number of packets per pack in the output stream.

       <b>-S|--max-segment-size</b> <u>num</u>
              This option specifies the maximum size of output files in MBytes (2^10) When the limit is  reached
              a  new file is started.  The default is (0) unlimited.

              Note: This option is <u>not</u> for splitting a long video across multiple VCD's or SVCD's.

              It  simply  splits a single long sequence into in a way that prevents bits of a video GOP(group of
              pictures) or audio frame being split between chunks.  This is fine for formats like that used  for
              DVDs  where  all stream parameters appear every GOP.  However, for VCD / SVCD it won't work as the
              players expect each file to start a new MPEG sequence.

              For VCD / SVCD a different technique is used.  If mplex encounters a sequence break (sequence  end
              followed  by  start)  in  the  input  video  stream  it starts a new output stream and file at the
              sequence start.  Thus to split a long video across VCD's/SVCD's you have to  get  the  MPEG  video
              encoder to introduce sequence splits at the right points (see <a href="../man1/mpeg2enc.1.html">mpeg2enc</a>(1) for details of how to do
              this).

       <b>-M|--ignore-seqend-markers</b>
              This  flag  makes  mplex ignore sequence end markers embedded in the first video stream instead of
              switching to a new output file.  This is sometimes useful splitting a long stream in  files  based
              on a -S limit that doesn't need a run-in/run-out like (S)VCD.

       <b>-h|--system-headers</b>
              A system header is generated in every pack rather than just in the first.

</pre><h4><b>DIAGNOSTIC</b> <b>OUTPUT</b></h4><pre>
       When  multiplexing  using mplex you may get warning or error messages complaining about buffer underflow.
       This means that the bit-rate you have specified is simply too low to permit the video  and  audio  to  be
       played  back  without  skipping.   The  fix  is  to  either reduce the data-rate of the input material or
       increased the output stream bit-rate.

</pre><h4><b>BUGS</b></h4><pre>
       The multiplexer should handle MPEG(5.1) audio.

</pre><h4><b>AUTHOR</b></h4><pre>
       This man page was written by Andrew Stevens.
       If you have questions, remarks, problems or you just want to contact the  developers,  the  main  mailing
       list for the MJPEG-tools is:
         <u><a href="mailto:mjpeg-users@lists.sourceforge.net">mjpeg-users@lists.sourceforge.net</a></u>

       For more info, see our website at
         <u><a href="http://mjpeg.sourceforge.net">http://mjpeg.sourceforge.net</a></u>

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man1/mpeg2enc.1.html">mpeg2enc</a></b>(1), <b><a href="../man1/mp2enc.1.html">mp2enc</a></b>(1), <b><a href="../man1/lavrec.1.html">lavrec</a></b>(1), <b><a href="../man1/lavplay.1.html">lavplay</a></b>(1), <b><a href="../man1/lav2yuv.1.html">lav2yuv</a></b>(1), <b><a href="../man1/lav2wav.1.html">lav2wav</a></b>(1), <b><a href="../man1/yuvscaler.1.html">yuvscaler</a></b>(1)

MJPEG Tools Team                                   2 June 2001                                          <u><a href="../man1/mplex.1.html">mplex</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>