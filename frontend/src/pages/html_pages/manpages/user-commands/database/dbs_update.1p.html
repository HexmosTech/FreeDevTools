<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>dbs_update - Update SQL Databases</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/libdbix-easy-perl">libdbix-easy-perl_0.21-1.2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       dbs_update - Update SQL Databases

</pre><h4><b>DESCRIPTION</b></h4><pre>
       dbs_update is an utility to update SQL databases from text files.

   <b>FORMAT</b> <b>OF</b> <b>THE</b> <b>TEXT</b> <b>FILES</b>
       dbs_update assumes that each line of the input contains a data record and that the field within the
       records are separated by tabulators.  You can tell dbs_update about the input format with the <b>--format</b>
       option.

       The first field of the data record is used as table specification.  These consists of the table name and
       optionally the index of starting column, separated by a dot.

       Alternatively dbs_update can read the column names from the first line of input (see the <b>-h</b>/<b>--headline</b>
       option). These can even be aliases for the real column names (see the <b>-m</b>/<b>--map</b> option).

</pre><h4><b>COMMAND</b> <b>LINE</b> <b>PARAMETERS</b></h4><pre>
       Required command line parameters are the DBI driver ("Pg" for Postgres or "mysql" for MySQL) and the
       database name. The third parameter is optionally and specifies the database user and/or the host where
       the database resides ("racke", "<a href="mailto:racke@linuxia.de">racke@linuxia.de</a>" or "@linuxia.de").

</pre><h4><b>OPTIONS</b></h4><pre>
   <b>--cleanse</b>
       <u>Removes</u> all records which remain unaffected from the update process. The same result as deleting all
       records from the table first and then running dbs_update, but the table is not empty in the meantime.

   <b>-c</b> <u><b>COLUMN,COLUMN,...</b></u><b>,</b> <b>--columns=</b><u><b>COLUMN,COLUMN,...</b></u>
       Update only the table columns given by the <u>COLUMN</u> parameters.  To exclude columns from the update prepend
       "!" or "^" to the parameters.

   <b>--rows=</b><u><b>ROW,ROW,...</b></u>
       Update only the input rows given by the <u>ROW</u> parameters.  The first row is 1 where headlines doesn't
       count.  To exclude rows from the update prepend "!" or "^" to the parameters.

   <b>-f</b> <u><b>FILE</b></u><b>,</b> <b>--file=</b><u><b>FILE</b></u>
       Reads records from file <u>FILE</u> instead of from standard input.

   <b>--format=</b><u><b>FORMAT[SEPCHAR]</b></u>
       Assumes <u>FORMAT</u> as format for the input. Only <b>CSV</b> can be specified for now, default is <b>TAB</b>. The default
       field separator for <b>CSV</b> is a comma, you may change this by appending the separator to the format.

   <b>-h,</b> <b>--headline</b>
       Reads the column names from the first line of the input instead of dedicting them from the database
       layout. Requires the <b>-t/--table</b> option.

   <b>-i,</b> <b>--insert-only</b>
       Insert new database entries only, skip others.

   <b>-k</b> <u><b>COUNT</b></u><b>,</b> <b>-k</b> <u><b>KEY,KEY,...</b></u><b>,</b> <b>--keys=</b><u><b>COUNT</b></u><b>,</b> <b>--keys=</b><u><b>KEY,KEY,...</b></u>
       Specifies the keys for the table(s) either as the number of columns used as keys or by specifying them
       explicitly as comma separated arguments to the option.  This is used for the detection of existing
       records.

   <b>-m</b> <u><b>ALIASDEF</b></u><b>,</b> <b>--map=</b><u><b>ALIASDEF</b></u>
       Maps the names found in the first line of input to the actual column names in the database. The alias and
       the column name are separated with "=" signs and the different entries are separated by ";" signs, e.g.
       "Art-No.=code;Short Description=shortdescr'".

   <b>--map-filter=</b><u><b>FILTER</b></u>
       Applies a filter to the column names read from the input file.  Currently there is only the "lc" filter
       available.

   <b>--match-sql=</b><u><b>FIELD:{STATEMENT}</b></u>
       Updates only records where the value of the column <u>FIELD</u> is in the result set of the SQL statement
       <u>STATEMENT</u>, e.g. "category:{select distinct name from categories}".

   <b>-o,</b> <b>--update-only</b>
       Updates existing database entries only, stops if it detects new ones.

   <b>-r</b> <u><b>ROUTINE</b></u><b>,</b> <b>--routine=</b><u><b>ROUTINE</b></u>
       Applies <u>ROUTINE</u> to any data record. <u>ROUTINE</u> must be a subroutine.  dbs_update passes the table name and a
       hash reference to this subroutine.  The keys of the hash are the column names and the values are the
       corresponding field values. If the return value of <u>ROUTINE</u> is not a truth value, the data record will be
       skipped.

       "sub {my ($table, $valref) = @_;
           unless (defined $$valref{country} &amp;&amp; $$valref{country} !~ /\S/) {
               $$valref{country} = "Germany";
           }
           1; }"

   <b>--skipbadlines</b>
       Lines not matching the assumed format are ignored. Without this option, dbs_update simply stops.

   <b>-t</b> <u><b>TABLE</b></u><b>,</b> <b>--table=</b><u><b>TABLE</b></u>
       Uses <u>TABLE</u> as table name for all records instead of the first field name.

</pre><h4><b>AUTHOR</b></h4><pre>
       Stefan Hornburg (Racke), <a href="mailto:racke@linuxia.de">racke@linuxia.de</a>

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man1/perl.1.html">perl</a></b>(1), <b>DBIx::<a href="../man3/Easy.3.html">Easy</a></b>(3)

perl v5.38.2                                       2024-03-24                                     <u><a href="../man1p/DBS_UPDATE.1p.html">DBS_UPDATE</a></u>(1p)
</pre>
 </div>
</div></section>
</div>
</body>
</html>