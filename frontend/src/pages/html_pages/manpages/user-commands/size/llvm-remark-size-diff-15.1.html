<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>llvm-remark-size-diff - diff size remarks</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/llvm-15">llvm-15_15.0.7-15ubuntu1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       llvm-remark-size-diff - diff size remarks

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>llvm-remark-size-diff</b> [<u>options</u>] <u>file_a</u> <u>file_b</u> <b>–parser</b> <u>parser</u>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>llvm-remark-size-diff</b> diffs size <u>remarks</u> in two remark files: <b>file_a</b> and <b>file_b</b>.

       <b>llvm-remark-size-diff</b>  can  be  used  to gain insight into which functions were impacted the most by code
       generation changes.

       In most common use-cases <b>file_a</b> and <b>file_b</b> will be remarks  output  by  compiling  a  <b>fixed</b>  <b>source</b>  with
       <b>differing</b> <b>compilers</b> or <b>differing</b> <b>optimization</b> <b>settings</b>.

       <b>llvm-remark-size-diff</b> handles both <u>YAML</u> and <u>bitstream</u> remarks.

</pre><h4><b>OPTIONS</b></h4><pre>
       <b>--parser=&lt;yaml|bitstream&gt;</b>
              Select  the  type  of input remark parser. Required.  * <b>yaml</b>: The tool will parse YAML remarks.  *
              <b>bitstream</b>: The tool will parse bitstream remarks.

       <b>--report-style=&lt;human|json&gt;</b>
              Output style.  * <b>human</b>: Human-readable textual report. Default option.  * <b>json</b>: JSON report.

       <b>--pretty</b>
              Pretty-print JSON output. Optional.

              If output is not set to JSON, this does nothing.

       <b>-o=&lt;file&gt;</b>
              Output file for the report. Outputs to stdout by default.

</pre><h4><b>HUMAN-READABLE</b> <b>OUTPUT</b></h4><pre>
       The human-readable format for <b>llvm-remark-size-diff</b> is composed of two sections:

       • Per-function changes.

       • A high-level summary of all changes.

   <b>Changed</b> <b>Function</b> <b>Section</b>
       Suppose you are comparing two remark files OLD and NEW.

       For each function with a <b>changed</b> <b>instruction</b> <b>count</b> in OLD and NEW, <b>llvm-remark-size-diff</b> will emit a line
       like below:

          (++|--|==) (&gt;|&lt;) function_name, N instrs, M stack B

       A breakdown of the format is below:

       <b>(++|--|==)</b>
              Which of OLD and NEW the <b>function_name</b> is present in.

              • <b>++</b>: Only in NEW. (“Added”)

              • <b>--</b>: Only in OLD. (“Removed”)

              • <b>==</b>: In both.

       <b>(&gt;|&lt;)</b>  Denotes if <b>function_name</b> has more instructions or fewer instructions in the second file.

              • <b>&gt;</b>: More instructions in second file than first file.

              • <b>&lt;</b>: Fewer instructions in second file than in first file.

       <b>function_name</b>
              The name of the changed function.

       <b>N</b> <b>instrs</b>
              Second file instruction count - first file instruction count.

       <b>M</b> <b>stack</b> <b>B</b>
              Second file stack byte count - first file stack byte count.

   <b>Summary</b> <b>Section</b>
       <b>llvm-remark-size-diff</b> will output a high-level summary after printing all changed functions.

          instruction count: N (inst_pct_change%)
          stack byte usage: M (sb_pct_change%)

       <b>N</b>      Sum of all instruction count changes between the second and first file.

       <b>inst_pct_change%</b>
              Percent increase or decrease in instruction count between the second and first file.

       <b>M</b>      Sum of all stack byte count changes between the second and first file.

       <b>sb_pct_change%</b>
              Percent increase or decrease in stack byte usage between the second and first file.

</pre><h4><b>JSON</b> <b>OUTPUT</b></h4><pre>
   <b>High-Level</b> <b>view</b>
       Suppose we are comparing two files, OLD and NEW.

       <b>llvm-remark-size-diff</b> will output JSON as follows.

          "Files": [
            "A": "path/to/OLD",
            "B": "path/to/NEW"
          ]

          "InBoth": [
            ...
          ],

          "OnlyInA": [
            ...
          ],

          "OnlyInB": [
            ...
          ]

       <b>Files</b>  Original paths to remark files.

              • <b>A</b>: Path to the first file.

              • <b>B</b>: Path to the second file.

       <b>InBoth</b> Functions present in both files.

       <b>OnlyInA</b>
              Functions only present in the first file.

       <b>OnlyInB</b>
              Functions only present in the second file.

   <b>Function</b> <b>JSON</b>
       The <b>InBoth</b>, <b>OnlyInA</b>, and <b>OnlyInB</b> sections contain size information for each function in the input  remark
       files.

          {
            "FunctionName" : "function_name"
            "InstCount": [
                INST_COUNT_A,
                INST_COUNT_B
              ],
            "StackSize": [
                STACK_BYTES_A,
                STACK_BYTES_B
              ],
          }

       <b>FunctionName</b>
              Name of the function.

       <b>InstCount</b>
              Instruction counts for the function.

              • <b>INST_COUNT_A</b>: Instruction count in OLD.

              • <b>INST_COUNT_B</b>: Instruction count in NEW.

       <b>StackSize</b>
              Stack byte counts for the function.

              • <b>STACK_BYTES_A</b>: Stack bytes in OLD.

              • <b>STACK_BYTES_B</b>: Stack bytes in NEW.

   <b>Computing</b> <b>Diffs</b> <b>From</b> <b>Function</b> <b>JSON</b>
       Function  JSON  does  not  contain  the diffs. Tools consuming JSON output from <b>llvm-remark-size-diff</b> are
       responsible for computing the diffs separately.

       <b>To</b> <b>compute</b> <b>the</b> <b>diffs:</b>

       • Instruction count diff: <b>INST_COUNT_B</b> <b>-</b> <b>INST_COUNT_A</b>

       • Stack byte count diff: <b>STACK_BYTES_B</b> <b>-</b> <b>STACK_BYTES_A</b>

</pre><h4><b>EXIT</b> <b>STATUS</b></h4><pre>
       <b>llvm-remark-size-diff</b> returns 0 on success, and a non-zero value otherwise.

</pre><h4><b>AUTHOR</b></h4><pre>
       Maintained by the LLVM Team (https://llvm.org/).

</pre><h4><b>COPYRIGHT</b></h4><pre>
       2003-2025, LLVM Project

15                                                 2025-01-05                           <u><a href="../man1/LLVM-REMARK-SIZE-DIFF.1.html">LLVM-REMARK-SIZE-DIFF</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>