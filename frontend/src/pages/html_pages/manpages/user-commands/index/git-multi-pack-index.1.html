<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>git-multi-pack-index - Write and verify multi-pack-indexes</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/git-man">git-man_2.48.1-0ubuntu1.1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       git-multi-pack-index - Write and verify multi-pack-indexes

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <u>git</u> <u>multi-pack-index</u> [--object-dir=&lt;dir&gt;] [--[no-]bitmap] &lt;sub-command&gt;

</pre><h4><b>DESCRIPTION</b></h4><pre>
       Write or verify a multi-pack-index (MIDX) file.

</pre><h4><b>OPTIONS</b></h4><pre>
       --object-dir=&lt;dir&gt;
           Use given directory for the location of Git objects. We check <u>&lt;dir&gt;</u><b>/packs/multi-pack-index</b> for the
           current MIDX file, and <u>&lt;dir&gt;</u><b>/packs</b> for the pack-files to index.

           <u>&lt;dir&gt;</u> must be an alternate of the current repository.

       --[no-]progress
           Turn progress on/off explicitly. If neither is specified, progress is shown if standard error is
           connected to a terminal. Supported by sub-commands <b>write</b>, <b>verify</b>, <b>expire</b>, and `repack.

       The following subcommands are available:

       write
           Write a new MIDX file. The following options are available for the <b>write</b> sub-command:

           --preferred-pack=&lt;pack&gt;
               Optionally specify the tie-breaking pack used when multiple packs contain the same object.
               <u>&lt;pack&gt;</u> must contain at least one object. If not given, ties are broken in favor of the pack with
               the lowest mtime.

           --[no-]bitmap
               Control whether or not a multi-pack bitmap is written.

           --stdin-packs
               Write a multi-pack index containing only the set of line-delimited pack index basenames provided
               over stdin.

           --refs-snapshot=&lt;path&gt;
               With <b>--bitmap</b>, optionally specify a file which contains a "refs snapshot" taken prior to
               repacking.

               A reference snapshot is composed of line-delimited OIDs corresponding to the reference tips,
               usually taken by <b>git</b> <b>repack</b> prior to generating a new pack. A line may optionally start with a <b>+</b>
               character to indicate that the reference which corresponds to that OID is "preferred" (see <b><a href="../man1/gitconfig.1.html">git-</a></b>
               <b><a href="../man1/gitconfig.1.html">config</a></b>(1)'s <b>pack.preferBitmapTips</b>.)

               The file given at <u>&lt;path&gt;</u> is expected to be readable, and can contain duplicates. (If a given OID
               is given more than once, it is marked as preferred if at least one instance of it begins with the
               special <b>+</b> marker).

           --incremental
               Write an incremental MIDX file containing only objects and packs not present in an existing MIDX
               layer. Migrates non-incremental MIDXs to incremental ones when necessary. Incompatible with
               <b>--bitmap</b>.

       verify
           Verify the contents of the MIDX file.

       expire
           Delete the pack-files that are tracked by the MIDX file, but have no objects referenced by the MIDX
           (with the exception of <b>.keep</b> packs and cruft packs). Rewrite the MIDX file afterward to remove all
           references to these pack-files.

               <b>Note</b>
               this mode is incompatible with incremental MIDX files.

       repack
           Create a new pack-file containing objects in small pack-files referenced by the multi-pack-index. If
           the size given by the <b>--batch-size=</b><u>&lt;size&gt;</u> argument is zero, then create a pack containing all objects
           referenced by the multi-pack-index. For a non-zero batch size, Select the pack-files by examining
           packs from oldest-to-newest, computing the "expected size" by counting the number of objects in the
           pack referenced by the multi-pack-index, then divide by the total number of objects in the pack and
           multiply by the pack size. We select packs with expected size below the batch size until the set of
           packs have total expected size at least the batch size, or all pack-files are considered. If only one
           pack-file is selected, then do nothing. If a new pack-file is created, rewrite the multi-pack-index
           to reference the new pack-file. A later run of <u>git</u> <u>multi-pack-index</u> <u>expire</u> will delete the pack-files
           that were part of this batch.

           If <b>repack.packKeptObjects</b> is <b>false</b>, then any pack-files with an associated <b>.keep</b> file will not be
           selected for the batch to repack.

               <b>Note</b>
               this mode is incompatible with incremental MIDX files.

</pre><h4><b>EXAMPLES</b></h4><pre>
       •   Write a MIDX file for the packfiles in the current <b>.git</b> directory.

               $ git multi-pack-index write

       •   Write a MIDX file for the packfiles in the current <b>.git</b> directory with a corresponding bitmap.

               $ git multi-pack-index write --preferred-pack=&lt;pack&gt; --bitmap

       •   Write a MIDX file for the packfiles in an alternate object store.

               $ git multi-pack-index --object-dir &lt;alt&gt; write

       •   Verify the MIDX file for the packfiles in the current <b>.git</b> directory.

               $ git multi-pack-index verify

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       See <b>The</b> <b>Multi-Pack-Index</b> <b>Design</b> <b>Document</b>[1] and <b><a href="../man5/gitformat-pack.5.html">gitformat-pack</a></b>(5) for more information on the
       multi-pack-index feature and its file format.

</pre><h4><b>GIT</b></h4><pre>
       Part of the <b><a href="../man1/git.1.html">git</a></b>(1) suite

</pre><h4><b>NOTES</b></h4><pre>
        1. The Multi-Pack-Index Design Document
           file:///usr/share/doc/git/html/technical/multi-pack-index.html

Git 2.48.1                                         07/02/2025                            <u><a href="../man1/GIT-MULTI-PACK-INDEX.1.html">GIT-MULTI-PACK-INDEX</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>