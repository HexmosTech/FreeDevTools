<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>tile4ms - create a tile index Shape data set for use with MapServer's TILEINDEX feature</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/mapserver-bin">mapserver-bin_8.4.0-1build1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       tile4ms - create a tile index Shape data set for use with MapServer's TILEINDEX feature

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>tile4ms</b> [ <u>metafile</u> <u>tilefile</u> [<b>-tile-path-only</b>] | <b>-h</b>]

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>tile4ms</b>  creates a tile index Shape data set for use with MapServer's TILEINDEX feature. The program cre‐
       ates a Shape data set of rectangles from extents of all the Shape data sets listed in <u>metafile</u> (one Shape
       data set name per line) and the associated DBF with the filename for each shape tile in a  column  called
       LOCATION as required by mapserv.

       <u>Note:</u> Similar functionality can be found in the GDAL commandline utilities ogrtindex ⟨http://
       www.gdal.org/ogrtindex.html⟩  (for  vectors)  and  gdaltindex  ⟨<a href="http://www.gdal.org/gdaltindex.html">http://www.gdal.org/gdaltindex.html</a>⟩ (for
       rasters).

       <b>tile4ms</b> creates a Shape data set containing the MBR (minimum bounding rectangle) of  all  shapes  in  the
       files provided, which can then be used in the LAYER object's TILEINDEX parameter of the mapfile.  The new
       filed  created  with this command is used by MapServer to only load the files associated with that extent
       (or tile).

</pre><h4><b>OPTIONS</b></h4><pre>
       <u>metafile</u>
              INPUT file containing list of shapefile names.  (complete paths 255 chars max, no extension)

       <u>tilefile</u>
              OUTPUT shape file of extent rectangles and names of tiles in <u>tilefile</u>.dbf

       <b>-tile-path-only</b>
              Optional flag. If specified then only the path to the shape files will be stored in  the  LOCATION
              field instead of storing the full filename.

       <b>-h</b>     Display usage information

</pre><h4><b>EXAMPLE</b></h4><pre>
       <b>Short</b> <b>Example</b>

       Create tileindex.shp for all tiles under the /path/to/data directory:

              cd /path/to/data
              find . -name "/*.shp" -print &gt; metafile.txt
              tile4ms metafile.txt tileindex

       <b>Long</b> <b>Example</b>

       This  example  uses  TIGER Census data, where the data contains files divided up by county (in fact there
       are over 3200 counties, a very large dataset indeed). In this example we will show  how  to  display  all
       lakes  for  the  state  of Minnesota. (note that here we have already converted the TIGER data into Shape
       format, but you could keep the data in TIGER format and use the ogrtindex utility instead) The TIGER Cen‐
       sus data for Minnesota is made  up  of  87  different  counties,  each  containing  its  own  lakes  file
       ('wp.shp').

       1.  We  need  to  create the 'meta-file' for the tile4ms command. This is a text file of the paths to all
           'wp.shp' files for the MN state. To create this file we can use a few simple commands:

              find -name *wp.shp -print &gt; wp_list.txt

           The newly created file might look like the following (after removing the full path):

              001\wp.shp
              003\wp.shp
              005\wp.shp
              007\wp.shp
              009\wp.shp
              011\wp.shp
              013\wp.shp
              015\wp.shp
              017\wp.shp
              019\wp.shp
              ...

       2.  Execute the tile4ms command with the newly created meta-file to create the index file:

              tile4ms wp_list.txt index
                Processed 87 of 87 files

       3.  A new file named 'index.shp' is created. This is the index file with the MBRs of all  'wp.shp'  files
           for  the  entire state, as shown in Figure 1. The attribute table of this file contains a field named
           'LOCATION', that contains the path to each 'wp.shp file', as shown in Figure 2.

           <b>Figure</b> <b>1:</b> <b>Index</b> <b>file</b> <b>created</b> <b>by</b> <b>tile4ms</b> <b>utility</b> ⟨<a href="http://mapserver.org/_images/tile4ms-view.png">http://mapserver.org/_images/tile4ms-view.png</a>⟩

           <b>Figure</b> <b>2:</b> <b>Attributes</b> <b>of</b> <b>index</b> <b>file</b> <b>created</b> <b>by</b> <b>tile4ms</b> <b>utility</b> ⟨<a href="http://mapserver.org/_images/">http://mapserver.org/_images/</a>
           tile4ms-attributes.png⟩

       4.  The final step is to use this in your mapfile.

           • LAYER object's TILEINDEX - must point to the location of the index file

           • LAYER object's TILEITEM - specify the name of the field in the index file containing the paths (de‐
             fault is 'location')

           • do not need to use the LAYER's DATA parameter

           For example:

              LAYER
                NAME 'mn-lakes'
                STATUS ON
                TILEINDEX "index"
                TILEITEM "location"
                TYPE POLYGON
                CLASS
                  NAME "mn-lakes"
                  STYLE
                    COLOR 0 0 255
                  END
                END
              END

       When you view the layer in a MapServer application, you will notice that when you are zoomed into a small
       area of the state only those lakes layers are loaded, which speeds up the application.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man1/map2img.1.html">map2img</a></b>(1), <b><a href="../man1/shptree.1.html">shptree</a></b>(1), <b><a href="../man1/shptreetst.1.html">shptreetst</a></b>(1), <b><a href="../man1/shptreevis.1.html">shptreevis</a></b>(1), <b><a href="../man1/sortshp.1.html">sortshp</a></b>(1)

                                                 22 January 2025                                      <u><a href="../man1/tile4ms.1.html">tile4ms</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>