<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>umoci repack - Repacks an OCI runtime bundle into an image tag</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/umoci">umoci_0.4.7+ds-4_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       umoci repack - Repacks an OCI runtime bundle into an image tag

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>umoci</b>         <b>repack</b>         <b>--image</b>=<u>image</u>[:<u>tag</u>]        [<b>--no-history</b>]        [<b>--history.comment</b>=<u>comment</u>]
       [<b>--history.created_by</b>=<u>created_by</u>] [<b>--history.author</b>=<u>author</u>]  [<b>--history-created</b>=<u>date</u>]  [<b>--refresh-bundle</b>]
       <u>bundle</u>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       Given  a  modified  OCI bundle extracted with <b><a href="../man1/umoci-unpack.1.html">umoci-unpack</a></b>(1) (at the given path <u>bundle</u>), <b><a href="../man1/umoci-repack.1.html">umoci-repack</a></b>(1)
       computes the filesystem delta for the OCI bundle's <u>rootfs</u>. The delta is used to generate a  delta  layer,
       which  is  then appended to the original image manifest (that was used as an argument to <b><a href="../man1/umoci-unpack.1.html">umoci-unpack</a></b>(1))
       and tagged as a new image tag. Between a call to <b><a href="../man1/umoci-unpack.1.html">umoci-unpack</a></b>(1) and  <b><a href="../man1/umoci-repack.1.html">umoci-repack</a></b>(1)  users  SHOULD  NOT
       modify the OCI image in any way (specifically you MUST NOT use <b><a href="../man1/umoci-gc.1.html">umoci-gc</a></b>(1)).

       All  <b>--uid-map</b>  and <b>--gid-map</b> settings are implied from the saved values specified in <b><a href="../man1/umoci-unpack.1.html">umoci-unpack</a></b>(1), so
       they are not available for <b><a href="../man1/umoci-repack.1.html">umoci-repack</a></b>(1).

       If <b>--no-history</b> was not specified, a history entry is appended to the tagged OCI image  for  this  change
       (with the various <b>--history.</b> flags controlling the values used). To view the history, see <b><a href="../man1/umoci-stat.1.html">umoci-stat</a></b>(1).

       Note  that  the  original image tag (used with <b><a href="../man1/umoci-unpack.1.html">umoci-unpack</a></b>(1)) will <b>not</b> be modified unless the target of
       <b><a href="../man1/umoci-repack.1.html">umoci-repack</a></b>(1) is the original image tag.

</pre><h4><b>OPTIONS</b></h4><pre>
       The global options are defined in <b><a href="../man1/umoci.1.html">umoci</a></b>(1).

       <b>--image</b>=<u>image</u>[:<u>tag</u>]
         The destination tag for the repacked OCI image. <u>image</u> must be a path to a
         valid OCI image (and the same <u>image</u> used in <b><a href="../man1/umoci-unpack.1.html">umoci-unpack</a></b>(1) to create
         the <u>bundle</u>) and <u>tag</u> must be a valid tag name. If another tag already has
         the same name as <u>tag</u> it will be overwritten. If <u>tag</u> is not provided it
         defaults to "latest".

       <b>--no-history</b>
         Causes no history entry to be added for this operation. <b>This</b> <b>is</b> <b>not</b>
         <b>recommended</b> <b>for</b> <b>use</b> <b>with</b> <b><a href="../man1/umoci-repack.1.html">umoci-repack</a>(1),</b> <b>since</b> <b>it</b> <b>results</b> <b>in</b> <b>the</b> <b>history</b> <b>not</b>
         <b>including</b> <b>all</b> <b>of</b> <b>the</b> <b>image</b> <b>layers</b> <b>--</b> <b>and</b> <b>thus</b> <b>will</b> <b>cause</b> <b>confusion</b> <b>with</b> <b>tools</b>
         <b>that</b> <b>look</b> <b>at</b> <b>image</b> <b>history.</b>

       <b>--history.comment</b>=<u>comment</u>
         Comment for the history entry corresponding to this modification of the image
         If unspecified, <b><a href="../man1/umoci.1.html">umoci</a></b>(1) will generate an implementation-dependent value.

       <b>--history.created_by</b>=<u>created_by</u>
         CreatedBy entry for the history entry corresponding to this modification of
         the image. If unspecified, <b><a href="../man1/umoci.1.html">umoci</a></b>(1) will generate an
         implementation-dependent value.

       <b>--history.author</b>=<u>author</u>
         Author value for the history entry corresponding to this modification of the
         image. If unspecified, this value will be the image's author value <b>after</b>
         any modifications were made by this call of <b><a href="../man1/umoci-config.1.html">umoci-config</a></b>(1).

       <b>--history-created</b>=<u>date</u>
         Creation date for the history entry corresponding to this modifications of
         the image. This must be an ISO8601 formatted timestamp (see <b><a href="../man1/date.1.html">date</a></b>(1)). If
         unspecified, the current time is used.

       <b>--refresh-bundle</b>
         Whether to update the OCI bundle's metadata (i.e. mtree and umoci
         metadata) after repacking the image. If set, then the new state of
         the bundle should be equivalent to unpacking the new image tag.

</pre><h4><b>EXAMPLE</b></h4><pre>
       The following downloads an image from a <b><a href="../man1/docker.1.html">docker</a></b>(1)  registry  using  <b><a href="../man1/skopeo.1.html">skopeo</a></b>(1),  unpacks  it  with  <b><a href="../man1/umociunpack.1.html">umoci-</a></b>
       <b><a href="../man1/umociunpack.1.html">unpack</a></b>(1), modifies it and then repacks it.

       % skopeo copy docker://opensuse/amd64:42.2 oci:image:latest
       # umoci unpack --image image bundle
       # touch bundle/rootfs/a_new_file
       # umoci repack --image image:new-42.2 bundle

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man1/umoci.1.html">umoci</a></b>(1), <b><a href="../man1/umoci-unpack.1.html">umoci-unpack</a></b>(1)

repack                                                umoci                                   <u><a href="../man1/umoci-repack.1.html">umoci-repack</a>(1)</u>(#)
</pre>
 </div>
</div></section>
</div>
</body>
</html>