<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title></title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/mariadb-server-core">mariadb-server-core_11.4.7-0ubuntu0.25.04.1_amd64</a> <br><br><pre>
<b>MARIADB-UPGRADE</b>(1)                           MariaDB Database System                          <b>MARIADB-UPGRADE</b>(1)

</pre><h4><b>NAME</b></h4><pre>
       mariadb-upgrade - check tables for MariaDB upgrade (mariadb-upgrade is now a symlink to mariadb-upgrade)

</pre><h4><b>SYNOPSIS</b></h4><pre>

       <b>mariadb-upgrade</b> <b>[</b><u>options</u><b>]</b>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>mariadb-upgrade</b> examines all tables in all databases for incompatibilities with the current version of
       the MariaDB Server.  <b>mariadb-upgrade</b> also upgrades the system tables so that you can take advantage of
       new privileges or capabilities that might have been added.

       <b>mariadb-upgrade</b> should be executed each time you upgrade MariaDB.

       If a table is found to have a possible incompatibility, <b>mariadb-upgrade</b> performs a table check. If any
       problems are found, a table repair is attempted.

           <b>Note</b>

           On Windows Server 2008 and Windows Vista, you must run <b>mariadb-upgrade</b> with administrator privileges.
           You can do this by running a Command Prompt as Administrator and running the command. Failure to do
           so may result in the upgrade failing to execute correctly.

           <b>Caution</b>

           You should always back up your current MariaDB installation <u>before</u> performing an upgrade.

       To use <b>mariadb-upgrade</b>, make sure that the server is running, and then invoke it like this:

           shell&gt; <b>mariadb-upgrade</b> <b>[</b><u>options</u><b>]</b>

       After running <b>mariadb-upgrade</b>, stop the server and restart it so that any changes made to the system
       tables take effect.

       <b>mariadb-upgrade</b> executes the following commands to check and repair tables and to upgrade the system
       tables:

           mariadb-check --all-databases --check-upgrade --auto-repair
           mariadb &lt; <u>fix_priv_tables</u>
           mariadb-check --all-databases --check-upgrade --fix-db-names --fix-table-names

       Notes about the preceding commands:

       •   Because <b>mariadb-upgrade</b> invokes <b>mariadb-check</b> with the <b>--all-databases</b> option, it processes all
           tables in all databases, which might take a long time to complete. Each table is locked and therefore
           unavailable to other sessions while it is being processed. Check and repair operations can be
           time-consuming, particularly for large tables.

       •   For details about what checks the <b>--check-upgrade</b> option entails, see the description of the FOR
           UPGRADE option of the CHECK TABLE statement.

       •   <u>fix_priv_tables</u> represents a script generated internally by <b>mariadb-upgrade</b> that contains SQL
           statements to upgrade the tables in the mysql database.

       All checked and repaired tables are marked with the current MariaDB version number. This ensures that
       next time you run <b>mariadb-upgrade</b> with the same version of the server, it can tell whether there is any
       need to check or repair the table again.

       <b>mariadb-upgrade</b> also saves the MariaDB version number in a file named mariadb-upgrade_info in the data
       directory. This is used to quickly check whether all tables have been checked for this release so that
       table-checking can be skipped. To ignore this file and perform the check regardless, use the <b>--force</b>
       option.

       For this reason, <b>mariadb-upgrade</b> needs to be run as a user with write access to the data directory.

       If you install MariaDB from RPM packages on Linux, you must install the server and client RPMs.  <b>mariadb-</b>
       <b>upgrade</b> is included in the server RPM but requires the client RPM because the latter includes <b>mariadb-</b>
       <b>check</b>.

       <b>mariadb-upgrade</b> supports the following options, which can be specified on the command line or in the
       [mariadb-upgrade] and [client] option file groups. Other options are passed to <b>mariadb-check</b>. For
       example, it might be necessary to specify the <b>--password[=</b><u>password</u><b>]</b> option.  <b>mariadb-upgrade</b> also
       supports the options for processing option files.

       •   <b>--help</b>, <b>-?</b>

           Display a short help message and exit.

       •   <b>--basedir=</b><u>path</u>

           Old option accepted for backward compatibility but ignored.

       •   <b>--character-sets-dir=</b><u>path</u>

           Old option accepted for backward compatibility but ignored.

       •   <b>--check-if-upgrade-is-needed</b>

           Exit with a status code indicating if an upgrade is needed. Returns 0 if upgrade needed or current
           version couldn't be determined, 1 when no action required.

       •   <b>--datadir=</b><u>path</u>

           Old option accepted for backward compatibility but ignored.

       •   <b>--debug=</b><u>path</u>, <b>-#</b> <u>path</u>

           For debug builds, output debug log.

       •   <b>--debug-check</b>

           Print some debugging information when the program exits.

       •   <b>--debug-info</b>, <b>-T</b>

           Print debugging information and memory and CPU usage statistics when the program exits.

       •   <b>--default-character-set=</b><u>name</u>

           Old option accepted for backward compatibility but ignored.

       •   <b>--force</b>

           Ignore the mariadb-upgrade_info file and force execution of <b>mariadb-check</b> even if <b>mariadb-upgrade</b> has
           already been executed for the current version of MariaDB.

       •   <b>--host</b>

           Connect to MariaDB on the given host.

       •   <b>--password[=</b><u>password</u><b>]</b>, <b>-p[</b><u>password</u><b>]</b>

           The password to use when connecting to the server. If you use the short option form (<b>-p</b>), you <u>cannot</u>
           have a space between the option and the password. If you omit the <u>password</u> value following the
           <b>--password</b> or <b>-p</b> option on the command line, <b>mariadb-upgrade</b> prompts for one.

           Specifying a password on the command line should be considered insecure. You can use an option file
           to avoid giving the password on the command line.

       •   <b>--port=</b><u>port_num</u>, <b>-P</b> <u>port_num</u>

           The TCP/IP port number to use for the connection.

       •   <b>--protocol={TCP|SOCKET|PIPE|MEMORY}</b>

           The connection protocol to use for connecting to the server. It is useful when the other connection
           parameters normally would cause a protocol to be used other than the one you want.

       •   <b>--silent</b>

           Print less information.

       •   <b>--socket=</b><u>path</u>, <b>-S</b> <u>path</u>

           For connections to localhost, the Unix socket file to use, or, on Windows, the name of the named pipe
           to use.

       •   <b>--ssl</b>

           Enable SSL for connection (automatically enabled with other flags). Disable with <b>--skip-ssl</b>.

       •   <b>--ssl-ca=</b><u>name</u>

           CA file in PEM format (check OpenSSL docs, implies <b>--ssl</b>).

       •   <b>--ssl-capath=</b><u>name</u>

           CA directory (check OpenSSL docs, implies <b>--ssl</b>).

       •   <b>--ssl-cert=</b><u>name</u>

           X509 cert in PEM format (check OpenSSL docs, implies <b>--ssl</b>).

       •   <b>--ssl-cipher=</b><u>name</u>

           SSL cipher to use (check OpenSSL docs, implies <b>--ssl</b>).

       •   <b>--ssl-key=</b><u>name</u>

           X509 key in PEM format (check OpenSSL docs, implies <b>--ssl</b>).

       •   <b>--ssl-crl=</b><u>name</u>

           Certificate revocation list (check OpenSSL docs, implies <b>--ssl</b>).

       •   <b>--ssl-crlpath=</b><u>name</u>

           Certificate revocation list path (check OpenSSL docs, implies <b>--ssl</b>).

       •   <b>--ssl-verify-server-cert</b>

           Verify server's "Common Name" in its cert against hostname used when connecting. This option is
           disabled by default.

       •   <b>--tmpdir=</b><u>path</u>, <b>-t</b> <u>path</u>

           The path name of the directory to use for creating temporary files.

       •   <b>--upgrade-system-tables</b>, <b>-s</b>

           Only upgrade the system tables in the mysql database. Tables in other databases are not checked or
           touched.

       •   <b>--user=</b><u>user_name</u>, <b>-u</b> <u>user_name</u>

           The MariaDB user name to use when connecting to the server and not using the current login.

       •   <b>--verbose</b>

           Display more output about the process. Using it twice will print connection arguments; using it 3
           times will print out all CHECK, RENAME and ALTER TABLE commands used during the check phase; using it
           4 times (added in MariaDB 10.0.14) will also write out all mariadb-check commands used; using it 5
           times will print all the mariadb commands used and their results while running mariadb-fix-privilege-
           tables script.

       •   <b>--version</b>, <b>-V</b>

           Output version information and exit.

       •   <b>--version-check</b>, <b>-k</b>

           Run this program only if its 'server version' matches the version of the server to which it's
           connecting. Note: the 'server version' of the program is the version of the MariaDB server with which
           it was built/distributed. Defaults to on; use <b>--skip-version-check</b> to disable.

       •   <b>--write-binlog</b>

           Cause binary logging to be enabled while <b>mariadb-upgrade</b> runs.

</pre><h4><b>COPYRIGHT</b></h4><pre>
       Copyright 2007-2008 MySQL AB, 2008-2010 Sun Microsystems, Inc., 2010-2024 MariaDB Foundation

       This documentation is free software; you can redistribute it and/or modify it only under the terms of the
       GNU General Public License as published by the Free Software Foundation; version 2 of the License.

       This documentation is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without
       even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General
       Public License for more details.

       You should have received a copy of the GNU General Public License along with the program; if not, write
       to the Free Software Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1335 USA or see
       <a href="http://www.gnu.org/licenses/">http://www.gnu.org/licenses/</a>.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       For more information, please refer to the MariaDB Knowledge Base, available online at
       https://mariadb.com/kb/

</pre><h4><b>AUTHOR</b></h4><pre>
       MariaDB Foundation (<a href="http://www.mariadb.org/">http://www.mariadb.org/</a>).

MariaDB 11.4                                    3 September 2024                              <b><a href="../man1/MARIADB-UPGRADE.1.html">MARIADB-UPGRADE</a></b>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>