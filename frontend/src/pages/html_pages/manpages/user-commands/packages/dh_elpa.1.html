<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>dh_elpa - install emacs lisp packages into package build directories</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/dh-elpa">dh-elpa_2.1.9ubuntu1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       dh_elpa - install emacs lisp packages into package build directories

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>dh_elpa</b> [<u>debhelper</u> <u>options</u>]  [<u>pkg-file</u>]

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>dh_elpa</b> is a debhelper program that is responsible for installing elpa style emacs lisp packages into
       package build directories.

       <b>dh_elpa</b> will attempt to run ERT and Buttercup test suites using <b><a href="../man1/dh_elpa_test.1.html">dh_elpa_test</a></b>(1) if the debhelper compat
       level is 10 or higher.  This will override <b><a href="../man1/dh_auto_test.1.html">dh_auto_test</a></b>(1).  To disable this behaviour, or tweak it if it
       is failing to run the tests as they should be run, see <b><a href="../man1/dh_elpa_test.1.html">dh_elpa_test</a></b>(1).

</pre><h4><b>FILES</b></h4><pre>
       debian/<u>package</u>.elpa
       debian/elpa
           List  of  files  to be installed into <u>package</u> (respectively into the first binary package) as an elpa
           package.  The format is a set of lines, where each line is either (i) a single filename or  glob,  or
           (ii)  a space-separated list of one or more filenames or globs, followed by the name of a destination
           subdirectory (which should not begin with a slash).

           For lines with a single file or glob, <b>dh_elpa</b> will install matching file(s) into the top  level  elpa
           package directory.

           For  lines  which  include a destination subdirectory, <b>dh_elpa</b> will install matching file(s) into the
           named subdirectory.

           Only elisp files in the top level elpa package directory will be automatically byte-compiled.

       <u>elpa-package</u>-pkg.el
           This file contains packaging metadata for a multi-file package -- see the Emacs manual on the subject
           of "Packaging" for full details.

           This file is often part of the upstream source, but when it is not, dh_elpa will try to create it  at
           package  build  time.   If  it  cannot,  and  you  need to create one manually, you can add it to the
           upstream source, or create the file in "debian/" and list it in debian/<u>package</u>.elpa.

       <u>elpa-package</u>-autoloads.el
           This file is used by the Emacs packaging system to collect autoloads from the Emacs Lisp sources.  It
           is usually generated at package build time, and should not usually exist in the upstream source.

</pre><h4><b>OPTIONS</b></h4><pre>
       <b>--byte-compile</b>, <b>--no-byte-compile</b>
           Enable (default) or  disable  byte  compilation  of  installed  emacs  lisp  files.   Disabling  byte
           compilation changes the destination directory to one that is found by the emacs package system.

       <b>--emacs-loadpath</b> <u>path</u>
           A  colon separated list of directories to add to the Emacs load path for byte compilation (e.g. for a
           non elpa-* dependency).

       <b>--fix-autoload-date</b>, <b>--no--fix-autoload-date</b>
           Enable  (default)  or  disable  munging  the  dates  in  Emacs  generated  autoload  files  to  match
           debian/changelog.

</pre><h4><b>SUBSTVARS</b></h4><pre>
       dh_elpa currently defines three substvars (cf. <b><a href="../man5/deb-substvars.5.html">deb-substvars</a></b>(5)) that can be used in debian/control

       ${misc:Depends}
           These are dependencies needed by every dh_elpa based package.

       ${elpa:Depends}
           These are dependencies on other ELPA packages as given in the Package-Requires: line of the package's
           main Emacs Lisp file.

           Note  that  Emacs  Lisp  dependencies  packaged  outside  the elpa-* dpkg namespace must be specified
           manually.  For example, the s.el library was once provided by the binary package s-el,  and  at  that
           time  packages  depending on it required an explicit dependency on s-el.  A dependency on s.el is now
           fulfilled automatically by elpa-s via ${elpa:Depends}.

           If dh_elpa adds dependency elpa-x where x  is  an  Emacs  Lisp  binary  package  outside  the  elpa-*
           namespace, please file a bug against dh_elpa to have an exclusion added.

</pre><h4><b>EXAMPLES</b></h4><pre>
       Here is an example of using the helper in a <b><a href="../man1/dh.1.html">dh</a></b>(1) style debian/rules

           #!/usr/bin/make -f
           %:
               dh $@ --with elpa

       Here  is  a  more  complex <b><a href="../man1/dh.1.html">dh</a></b>(1) style debian/rules, where the package needs some non-dh-elpa emacs addon
       <u>fubar-el</u>

           #!/usr/bin/make -f
           %:
               dh $@ --with elpa

           override_dh_elpa:
               dh_elpa --emacs-loadpath="/usr/share/emacs/site-lisp/fubar-el"

       Here is an example of a binary package stanza using dh_elpa generated substvars

           Package: elpa-hello
           Architecture: all
           Depends: ${misc:Depends}, ${elpa:Depends}
           Description: Emacs addon to say hello
            The Emacs editor addon likes to wave and say hello.

</pre><h4><b>HINTS</b></h4><pre>
   <b>Specifying</b> <b>the</b> <b>package</b> <b>version</b>
       If dh_elpa can't determine the package version by looking at *.el files  (usually  because  upstream  has
       failed  to include the proper headers or *-pkg.el file), it will fallback to the DEB_UPSTREAM_VERSION and
       DEB_VERSION_UPSTREAM environment variables.  An easy way to set one of these based on your latest  Debian
       changelog entry is just to prepend the following to your rules file:

           include /usr/share/dpkg/pkg-info.mk
           export DEB_VERSION_UPSTREAM

       Certain  Debian upstream version strings cannot be translated into version strings Emacs will accept (see
       the docstring for the Emacs function `version-to-list' for details).   dh_elpa  will  error  out  if  the
       version  cannot  be  translated.   You  should resort to patching in a Package-Version header or adding a
       *-pkg.el file.

   <b>Specifying</b> <b>the</b> <b>Emacs</b> <b>package</b> <b>name</b>
       Every Emacs package has a name (e.g. "magit", "circe", or "tetris").  For a simple package  this  is  the
       filename  without the '.el' extension; for a multi-file package, it is given in the "*-pkg.el" file.  The
       Emacs package name is often distinct from the name of the upstream repository or the name of  the  Debian
       source package.

       <b>dh_elpa</b> needs to know what the Emacs package name is, but it does not examine the upstream source code to
       find  it.  Instead, by default, it assumes that the Emacs package name is the name of the binary package,
       stripped of any 'elpa-' prefix (which will be present for packages compliant with the Debian Emacsen Team
       addons policy (&lt;https://wiki.debian.org/EmacsenTeam&gt;).

       To override that assumption, you can export the <b>ELPA_NAME</b> environment variable in debian/rules:

           ELPA_NAME=tpp-mode
           export ELPA_NAME

       You    can    also    specify    the    name    on    a     per     binary     package     basis     with
       "ELPA_NAME_binary-package-name"=tpp-mode.

   <b>Debian-specific</b> <b>Lisp</b> <b>customizations</b>
       With  <b>dh_elpa</b>,  the  file  "debian/emacsen-startup"  is  no longer required to ensure that "load-path" is
       properly set.  This means that most packages do not require a "debian/emacsen-startup" file at all.

       If you do need other configuration to be executed, add the special <u>autoload</u> <u>cookie</u> in front  of  a  form,
       and  it  will  be run at package initialization time.  This is better than using "debian/emacsen-startup"
       because the forms are then added to <u>elpa-package</u>-autoloads.el, rather than a  file  in  "<a href="file:/etc/">/etc/</a>",  as  the
       contents of "debian/emacsen-startup" was.  This simplifies package maintenance.

       These  cookies can either annotate upstream source, or be added (along with the relevant forms) to a file
       in  "debian/",  by  convention  "debian/debian-autoloads.el".   That  file  must  then   be   listed   in
       debian/<u>package</u>.elpa.

       Autoload a function
           In  general  definitions  of  which  functions  to  autoload belong in the upstream source beside the
           function definition.

               ;;;###autoload
               (defun hello ()
               "wave in a friendly manner"
               (interactive)
               ...)

           One option is to patch in the autoload cookie (if needed) and send those patches upstream. If that is
           not possible, you can manually create the autoload form and add it to "debian-autoloads.el".

               ;;;###autoload
               (autoload 'hello "goodbye.el" "wave in a friendly manner" t)

       Other customizations
           Other customizations (e.g. key bindings or setting variables) can be handled similarly to autoloading
           functions.

               ;;;###autoload
               (setq the-package-setting 42)

           The Emacs package system will copy an arbitrary (non-defun)  form  to  the  package  autoloads  file.
           Changing  the  behaviour of the package (as opposed to making it work) should in most cases happen in
           upstreamed patches.

perl v5.40.1                                       2025-03-14                                         <u><a href="../man1/DH_ELPA.1.html">DH_ELPA</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>