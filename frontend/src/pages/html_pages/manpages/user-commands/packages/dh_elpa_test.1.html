<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>dh_elpa_test - run ELPA package testsuites</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/dh-elpa">dh-elpa_2.1.9ubuntu1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       dh_elpa_test - run ELPA package testsuites

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>dh_elpa_test</b> [<u>debhelper</u> <u>options</u>] [<u>--autopkgtest</u>] [<u>pkg-file</u>]

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>dh_elpa_test</b> is a debhelper program that is responsible for running the testsuites of ELPA packages, when
       those test suites use ERT or <b><a href="../man1/buttercup.1.html">buttercup</a></b>(1).  <b><a href="../man1/dh_auto_test.1.html">dh_auto_test</a></b>(1) is rarely suitable.

       Testing with <b><a href="../man1/buttercup.1.html">buttercup</a></b>(1) will be activated if the package build-depends on elpa-buttercup.  Testing with
       ERT will be activated if ERT test files can be found.  Neither kind of test will be activated unless the
       debhelper compat level is 10 or higher.

       <b>dh_elpa_test</b> overrides <b><a href="../man1/dh_auto_test.1.html">dh_auto_test</a></b>(1).  If you need to switch back to use <b><a href="../man1/dh_auto_test.1.html">dh_auto_test</a></b>(1), use the
       <b>disable</b> configuration key, below.

</pre><h4><b>FILES</b></h4><pre>
       debian/elpa-test
           Configuration  for  running the package's test suite.  Each line is of the form <u>key</u> = <u>value</u>, with <u>key</u>
           drawn from the list of configuration options below.

           Note that you should not surround values  with  double  quotation  marks.   This  is  convenient  for
           including  lisp.   Configuration values cannot cover more than one line.  Lines preceded with a # are
           ignored as comments.

           This configuration file is optional; in many cases, <b>dh_elpa_test</b> can figure out how to run  the  test
           suite itself.

</pre><h4><b>CONFIGURATION</b> <b>KEYS</b></h4><pre>
       <b>disable</b>
           If this key is set to any value, <b><a href="../man1/dh_elpa.1.html">dh_elpa</a></b>(1) will not invoke <b>dh_elpa_test</b>.

       <b>buttercup_load_path</b>
           A  comma-separated list of directories to add to the load-path when <b><a href="../man1/buttercup.1.html">buttercup</a></b>(1) invokes Emacs.  Will
           be passed to <b><a href="../man1/buttercup.1.html">buttercup</a></b>(1) with its <b>-L</b> command line argument.

       <b>buttercup_eval</b>
           Emacs Lisp code to be run by buttercup's --eval option.

       <b>buttercup_patterns</b>
           A comma-separated list of  Emacs  regular  expressions  jointly  matching  all  and  only  the  files
           containing  Buttercup  tests that you wish to run.  If this key is not defined, all tests that can be
           found will be run.  Will be passed to <b><a href="../man1/buttercup.1.html">buttercup</a></b>(1) with its <b>-p</b> command line argument.

       <b>ert_exclude</b>
           A comma-separated list of file globs matching files containing ERT tests that should not be run.

           The '*' character in globs in this configuration key does NOT match '/' directory separators.

       <b>ert_helper</b>
           The name of a *.el file containing Emacs Lisp code that will run the ERT test suite.  When  this  key
           is not defined, <b>dh_elpa_test</b> calls the function <b>(ert-run-tests-batch-and-exit)</b>.

           Your  helper  code  should  ensure that Emacs exits nonzero if there were any test failures, or exits
           zero if the test suite passed.

           Note that this is not the way to load test helpers that do needed work but  don't  actually  run  the
           tests.  For that, you can use something like

               ert_eval = (load-file "test-helper.el")

       <b>ert_eval</b>
           Emacs Lisp code to be run prior to running ERT tests by the Emacs instance spawned by <b>dh_elpa_test</b> to
           run those tests.

       <b>ert_load_path</b>
           A  comma-separated list of directories to add to the load-path when <b>dh_elpa_test</b> invokes Emacs to run
           ERT tests.

       <b>ert_selectors</b>
           A Lisp expression specifying a set of tests.  This is the same as ERT  test  selectors  and  will  be
           passed  to  ERT  through  command  line.   Note that this is disabled when <b>ert_eval</b> is specified, and
           you'll have to manually specify the selectors in the helper script.

       <b>autopkgtest_keep</b>
           A comma-separated list of file globs matching files that should not be moved out of the  source  tree
           before running DEP8 tests (see the <b>--autopkgtest</b> option below).

           The '*' character in globs in this configuration key matches '/' directory separators.

</pre><h4><b>OPTIONS</b></h4><pre>
       <b>--autopkgtest</b>
           Operate  in  autopkgtest  mode.   <b>dh_elpa_test</b> will rename non-test *.el files so that Emacs will not
           load them.  This ensures that the test test the installed binary package  rather  than  the  unpacked
           source package.

           To  exclude  files  from this removal, specify them in the <b>autopkgtest_keep</b> configuration option (see
           above).

</pre><h4><b>ENVIRONMENT</b> <b>VARIABLES</b></h4><pre>
       Older versions of <b>dh_elpa_test</b> were configured using environment variables corresponding to some  of  the
       above  configuration  keys.   For  example,  the <b>ert_eval</b> configuration key replaced environment variable
       <b>DH_ELPA_TEST_ERT_EVAL</b>.  Their use is now deprecated.  If the debian/elpa-test file exists, they  will  be
       ignored.

</pre><h4><b>CONTROLLING</b> <b>INVOCATION</b></h4><pre>
       The  following recipes can be combined to enable an appropriate combination of build time and autopkgtest
       time tests.

   <b>DISABLING</b> <b>BUILD</b> <b>TIME</b> <b>TESTS</b>
       To disable running tests at build time,  you  have  two  choices.  You  can  override  <b>dh_elpa_test</b>  (not
       <b>dh_auto_test</b>),  or  you  can  use  the  <b>disable</b>  key  in <b>debian/elpa-test</b>. Note that the latter will also
       (mostly) disable autopkgtests (see below).

   <b>ENABLING</b> <b>AUTOPKGTESTS</b>
       To enable running autopkgtests via <b>dh_elpa_test</b>, add "Testsuite: autpkgtest-pkg-elpa" to  <b>debian/control</b>.
       With <b>disable</b> in <b>debian/elpa-test</b>, only <b>superficial</b> tests, namely installing the binary packages and byte-
       compiling any that use <b>dh_elpa</b>.

   <b>ENABLING</b> <b>DH_AUTO_TEST</b>
       By default <b>dh_elpa_test</b> replaces <b>dh_auto_test</b>. You can re-enable <b>dh_auto_test</b> either with the <b>disable</b> key
       discussed above, or by overriding <b>dh_elpa_test</b> to call <b>dh_auto_test</b>.

perl v5.40.1                                       2025-03-14                                    <u><a href="../man1/DH_ELPA_TEST.1.html">DH_ELPA_TEST</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>