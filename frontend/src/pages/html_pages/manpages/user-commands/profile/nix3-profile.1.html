<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>nix profile - manage Nix profiles</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/nix-bin">nix-bin_2.24.9+dfsg-2ubuntu2_amd64</a> <br><br><pre>
</pre><h4><b>Name</b></h4><pre>
       nix profile - manage Nix profiles

</pre><h4><b>Synopsis</b></h4><pre>
       nix profile [<u>option</u>…] <u>subcommand</u>

       where <u>subcommand</u> is one of the following:

       •  nix profile diff-closures - show the closure difference between each version of a profile
       •  nix profile history - show all versions of a profile
       •  nix profile install - install a package into a profile
       •  nix profile list - list installed packages
       •  nix profile remove - remove packages from a profile
       •  nix profile rollback - roll back to the previous version or a specified version of a profile
       •  nix profile upgrade - upgrade packages using their most recent flake
       •  nix profile wipe-history - delete non-current versions of a profile

</pre><h4><b>Description</b></h4><pre>
       nix  profile allows you to create and manage <u>Nix</u> <u>profiles</u>. A Nix profile is a set of packages that can be
       installed and upgraded independently from each other. Nix profiles are versioned,  allowing  them  to  be
       rolled back easily.

</pre><h4><b>Files</b></h4><pre>
   <b>Profiles</b>
       A directory that contains links to profiles managed by nix-env and nix profile:

       •  $XDG_STATE_HOME/nix/profiles for regular users
       •  $NIX_STATE_DIR/profiles/per-user/root if the user is root

       A profile is a directory of symlinks to files in the Nix store.

   <b>Filesystem</b> <b>layout</b>
       Profiles  are  versioned  as  follows. When using a profile named <u>path</u>, <u>path</u> is a symlink to <u>path</u>-<u>N</u>-link,
       where <u>N</u> is the version of the profile.  In turn, <u>path</u>-<u>N</u>-link is a symlink to a path  in  the  Nix  store.
       For example:

       $ ls -l ~alice/.local/state/nix/profiles/profile*
       lrwxrwxrwx 1 alice users 14 Nov 25 14:35 /home/alice/.local/state/nix/profiles/profile -&gt; profile-7-link
       lrwxrwxrwx 1 alice users 51 Oct 28 16:18 /home/alice/.local/state/nix/profiles/profile-5-link -&gt; /nix/store/q69xad13ghpf7ir87h0b2gd28lafjj1j-profile
       lrwxrwxrwx 1 alice users 51 Oct 29 13:20 /home/alice/.local/state/nix/profiles/profile-6-link -&gt; /nix/store/6bvhpysd7vwz7k3b0pndn7ifi5xr32dg-profile
       lrwxrwxrwx 1 alice users 51 Nov 25 14:35 /home/alice/.local/state/nix/profiles/profile-7-link -&gt; /nix/store/mp0x6xnsg0b8qhswy6riqvimai4gm677-profile

       Each of these symlinks is a root for the Nix garbage collector.

       The  contents of the store path corresponding to each version of the profile is a tree of symlinks to the
       files of the installed packages, e.g.

       $ ll -R ~eelco/.local/state/nix/profiles/profile-7-link/
       /home/eelco/.local/state/nix/profiles/profile-7-link/:
       total 20
       dr-xr-xr-x 2 root root 4096 Jan  1  1970 bin
       -r--r--r-- 2 root root 1402 Jan  1  1970 manifest.nix
       dr-xr-xr-x 4 root root 4096 Jan  1  1970 share

       /home/eelco/.local/state/nix/profiles/profile-7-link/bin:
       total 20
       lrwxrwxrwx 5 root root 79 Jan  1  1970 chromium -&gt; /nix/store/ijm5k0zqisvkdwjkc77mb9qzb35xfi4m-chromium-86.0.4240.111/bin/chromium
       lrwxrwxrwx 7 root root 87 Jan  1  1970 spotify -&gt; /nix/store/w9182874m1bl56smps3m5zjj36jhp3rn-spotify-1.1.26.501.gbe11e53b-15/bin/spotify
       lrwxrwxrwx 3 root root 79 Jan  1  1970 zoom-us -&gt; /nix/store/wbhg2ga8f3h87s9h5k0slxk0m81m4cxl-zoom-us-5.3.469451.0927/bin/zoom-us

       /home/eelco/.local/state/nix/profiles/profile-7-link/share/applications:
       total 12
       lrwxrwxrwx 4 root root 120 Jan  1  1970 chromium-browser.desktop -&gt; /nix/store/4cf803y4vzfm3gyk3vzhzb2327v0kl8a-chromium-unwrapped-86.0.4240.111/share/applications/chromium-browser.desktop
       lrwxrwxrwx 7 root root 110 Jan  1  1970 spotify.desktop -&gt; /nix/store/w9182874m1bl56smps3m5zjj36jhp3rn-spotify-1.1.26.501.gbe11e53b-15/share/applications/spotify.desktop
       lrwxrwxrwx 3 root root 107 Jan  1  1970 us.zoom.Zoom.desktop -&gt; /nix/store/wbhg2ga8f3h87s9h5k0slxk0m81m4cxl-zoom-us-5.3.469451.0927/share/applications/us.zoom.Zoom.desktop

       …

       Each profile version contains a manifest file: - manifest.nix used by nix-env.  - manifest.json  used  by
       nix profile (experimental).

   <b>User</b> <b>profile</b> <b>link</b>
       A symbolic link to the user’s current profile:

       •  <a href="file:~/.nix-profile">~/.nix-profile</a>
       •  $XDG_STATE_HOME/nix/profile if use-xdg-base-directories is set to true.

       By default, this symlink points to:

       •  $XDG_STATE_HOME/nix/profiles/profile for regular users
       •  $NIX_STATE_DIR/profiles/per-user/root/profile for root

       The  PATH  environment  variable  should  include  <a href="file:/bin">/bin</a>  subdirectory  of  the profile link (e.g. <a href="file:~/.nix-">~/.nix-</a>
       profile/bin) for the user environment to be visible to the user.  The installer sets this up by  default,
       unless you enable use-xdg-base-directories.

   <b>Profile</b> <b>compatibility</b>
              <b>Warning</b>

              Once   you   have  used  nix profile  you  can  no  longer  use  nix-env  without  first  deleting
              $XDG_STATE_HOME/nix/profiles/profile

       Once you installed a package with nix profile, you get the following error message when using nix-env:

       $ nix-env -f '&lt;nixpkgs&gt;' -iA 'hello'
       error: nix-env
       profile '/home/alice/.local/state/nix/profiles/profile' is incompatible with 'nix-env'; please use 'nix profile' instead

       To migrate back to nix-env you can delete your current profile:

              <b>Warning</b>

              This will delete packages that have been installed before,  so  you  may  want  to  back  up  this
              information before running the command.

        $ rm -rf "${XDG_STATE_HOME-$HOME/.local/state}/nix/profiles/profile"

</pre><h4><b>Options</b></h4><pre>
   <b>Logging-related</b> <b>options</b>
       •  --debug

          Set the logging verbosity level to ‘debug’.

       •  --log-format <u>format</u>

          Set the format of log output; one of raw, internal-json, bar or bar-with-logs.

       •  --print-build-logs / -L

          Print full build logs on standard error.

       •  --quiet

          Decrease the logging verbosity level.

       •  --verbose / -v

          Increase the logging verbosity level.

   <b>Miscellaneous</b> <b>global</b> <b>options</b>
       •  --help

          Show usage information.

       •  --offline

          Disable substituters and consider all previously downloaded files up-to-date.

       •  --option <u>name</u> <u>value</u>

          Set the Nix configuration setting <u>name</u> to <u>value</u> (overriding nix.conf).

       •  --refresh

          Consider all previously downloaded files out-of-date.

       •  --version

          Show version information.

          <b>Note</b>

          See man nix.conf for overriding configuration settings with command line flags.

                                                                                                 <u><a href="../man1/nix3-profile.1.html">nix3-profile</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>