<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>nix store make-content-addressed - rewrite a path or closure to content-addressed form</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/nix-bin">nix-bin_2.24.9+dfsg-2ubuntu2_amd64</a> <br><br><pre>
</pre><h4><b>Name</b></h4><pre>
       nix store make-content-addressed - rewrite a path or closure to content-addressed form

</pre><h4><b>Synopsis</b></h4><pre>
       nix store make-content-addressed [<u>option</u>…] <u>installables</u>…

</pre><h4><b>Examples</b></h4><pre>
       •  Create a content-addressed representation of the closure of GNU Hello:

       # nix store make-content-addressed nixpkgs#hello
       …
       rewrote '/nix/store/v5sv61sszx301i0x6xysaqzla09nksnd-hello-2.10' to '/nix/store/5skmmcb9svys5lj3kbsrjg7vf2irid63-hello-2.10'

              Since the resulting paths are content-addressed, they are always trusted and don’t need signatures
              to copied to another store:

       # nix copy --to /tmp/nix --trusted-public-keys '' /nix/store/5skmmcb9svys5lj3kbsrjg7vf2irid63-hello-2.10

              By contrast, the original closure is input-addressed, so it does need signatures to be trusted:

       # nix copy --to /tmp/nix --trusted-public-keys '' nixpkgs#hello
       cannot add path '/nix/store/zy9wbxwcygrwnh8n2w9qbbcr6zk87m26-libunistring-0.9.10' because it lacks a signature by a trusted key

       •  Create a content-addressed representation of the current NixOS system closure:

       # nix store make-content-addressed /run/current-system

</pre><h4><b>Description</b></h4><pre>
       This command converts the closure of the store paths specified by <u>installables</u> to content-addressed form.

       Nix  store  paths  are  usually <u>input-addressed</u>, meaning that the hash part of the store path is computed
       from the contents of the derivation (i.e., the build-time dependency graph). Input-addressed  paths  need
       to  be signed by a trusted key if you want to import them into a store, because we need to trust that the
       contents of the path were actually built by the derivation.

       By contrast, in a <u>content-addressed</u> path, the hash part is computed from the contents of the  path.  This
       allows  the  contents  of  the path to be verified without any additional information such as signatures.
       This means that a command like

       # nix store build /nix/store/5skmmcb9svys5lj3kbsrjg7vf2irid63-hello-2.10 \
           --substituters https://my-cache.example.org

       will succeed even if the binary cache https://my-cache.example.org doesn’t present any signatures.

</pre><h4><b>Options</b></h4><pre>
       •  --from <u>store-uri</u>

          URL of the source Nix store.

       •  --json

          Produce output in JSON format, suitable for consumption by another program.

       •  --stdin

          Read installables from the standard input. No default installable applied.

       •  --to <u>store-uri</u>

          URL of the destination Nix store.

   <b>Common</b> <b>evaluation</b> <b>options</b>
       •  --arg <u>name</u> <u>expr</u>

          Pass the value <u>expr</u> as the argument <u>name</u> to Nix functions.

       •  --arg-from-file <u>name</u> <u>path</u>

          Pass the contents of file <u>path</u> as the argument <u>name</u> to Nix functions.

       •  --arg-from-stdin <u>name</u>

          Pass the contents of stdin as the argument <u>name</u> to Nix functions.

       •  --argstr <u>name</u> <u>string</u>

          Pass the string <u>string</u> as the argument <u>name</u> to Nix functions.

       •  --debugger

          Start an interactive environment if evaluation fails.

       •  --eval-store <u>store-url</u>

          The URL of the Nix store to use for evaluation, i.e. to store  derivations  (.drv  files)  and  inputs
          referenced by them.

       •  --impure

          Allow access to mutable paths and repositories.

       •  --include / -I <u>path</u>

          Add <u>path</u> to search path entries used to resolve lookup paths

          This option may be given multiple times.

          Paths  added  through  -I  take  precedence  over  the nix-path configuration setting and the NIX_PATH
          environment variable.

       •  --override-flake <u>original-ref</u> <u>resolved-ref</u>

          Override the flake registries, redirecting <u>original-ref</u> to <u>resolved-ref</u>.

   <b>Common</b> <b>flake-related</b> <b>options</b>
       •  --commit-lock-file

          Commit changes to the flake’s lock file.

       •  --inputs-from <u>flake-url</u>

          Use the inputs of the specified flake as registry entries.

       •  --no-registries

          Don’t allow lookups in the flake registries.

                 <b>DEPRECATED</b>

                 Use --no-use-registries instead.

       •  --no-update-lock-file

          Do not allow any updates to the flake’s lock file.

       •  --no-write-lock-file

          Do not write the flake’s newly generated lock file.

       •  --output-lock-file <u>flake-lock-path</u>

          Write the given lock file instead of flake.lock within the top-level flake.

       •  --override-input <u>input-path</u> <u>flake-url</u>

          Override a specific flake input (e.g. dwarffs/nixpkgs). This implies --no-write-lock-file.

       •  --recreate-lock-file

          Recreate the flake’s lock file from scratch.

                 <b>DEPRECATED</b>

                 Use nix flake update instead.

       •  --reference-lock-file <u>flake-lock-path</u>

          Read the given lock file instead of flake.lock within the top-level flake.

       •  --update-input <u>input-path</u>

          Update a specific flake input (ignoring its previous entry in the lock file).

                 <b>DEPRECATED</b>

                 Use nix flake update instead.

   <b>Logging-related</b> <b>options</b>
       •  --debug

          Set the logging verbosity level to ‘debug’.

       •  --log-format <u>format</u>

          Set the format of log output; one of raw, internal-json, bar or bar-with-logs.

       •  --print-build-logs / -L

          Print full build logs on standard error.

       •  --quiet

          Decrease the logging verbosity level.

       •  --verbose / -v

          Increase the logging verbosity level.

   <b>Miscellaneous</b> <b>global</b> <b>options</b>
       •  --help

          Show usage information.

       •  --offline

          Disable substituters and consider all previously downloaded files up-to-date.

       •  --option <u>name</u> <u>value</u>

          Set the Nix configuration setting <u>name</u> to <u>value</u> (overriding nix.conf).

       •  --refresh

          Consider all previously downloaded files out-of-date.

       •  --repair

          During evaluation, rewrite missing or corrupted files in  the  Nix  store.  During  building,  rebuild
          missing or corrupted store paths.

       •  --version

          Show version information.

   <b>Options</b> <b>that</b> <b>change</b> <b>the</b> <b>interpretation</b> <b>of</b> <b>installables</b>
       •  --all

          Apply the operation to every store path.

       •  --derivation

          Operate on the store derivation rather than its outputs.

       •  --expr <u>expr</u>

          Interpret <u>installables</u> as attribute paths relative to the Nix expression <u>expr</u>.

       •  --file / -f <u>file</u>

          Interpret  <u>installables</u>  as  attribute paths relative to the Nix expression stored in <u>file</u>. If <u>file</u> is
          the character -, then a Nix expression will be read from standard input. Implies --impure.

       •  --recursive / -r

          Apply operation to closure of the specified paths.

          <b>Note</b>

          See man nix.conf for overriding configuration settings with command line flags.

                                                                            <u><a href="../man1/nix3-store-make-content-addressed.1.html">nix3-store-make-content-addressed</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>