<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>trace-cmd-restore - restore a failed trace record</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/trace-cmd">trace-cmd_3.2-1ubuntu2_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       trace-cmd-restore - restore a failed trace record

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>trace-cmd</b> <b>restore</b> [<u>OPTIONS</u>] [<u>command</u>] cpu-file [cpu-file ...]

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The <a href="../man1/trace-cmd.1.html">trace-cmd</a>(1) restore command will restore a crashed <a href="../man1/trace-cmd-record.1.html">trace-cmd-record</a>(1) file. If for some reason a
       trace-cmd record fails, it will leave a the per-cpu data files and not create the final trace.dat file.
       The trace-cmd restore will append the files to create a working trace.dat file that can be read with
       <a href="../man1/trace-cmd-report.1.html">trace-cmd-report</a>(1).

       When trace-cmd record runs, it spawns off a process per CPU and writes to a per cpu file usually called
       <u>trace.dat.cpuX</u>, where X represents the CPU number that it is tracing. If the -o option was used in the
       trace-cmd record, then the CPU data files will have that name instead of the <u>trace.dat</u> name. If a
       unexpected crash occurs before the tracing is finished, then the per CPU files will still exist but there
       will not be any trace.dat file to read from. trace-cmd restore will allow you to create a trace.dat file
       with the existing data files.

</pre><h4><b>OPTIONS</b></h4><pre>
       <b>-c</b>
           Create a partial trace.dat file from the machine, to be used with a full trace-cmd restore at another
           time. This option is useful for embedded devices. If a server contains the cpu files of a crashed
           trace-cmd record (or trace-cmd listen), trace-cmd restore can be executed on the embedded device with
           the -c option to get all the stored information of that embedded device. Then the file created could
           be copied to the server to run the trace-cmd restore there with the cpu files.

               If *-o* is not specified, then the file created will be called
               'trace-partial.dat'. This is because the file is not a full version
               of something that <a href="../man1/trace-cmd-report.1.html">trace-cmd-report</a>(1) could use.

       <b>-t</b> tracing_dir
           Used with <b>-c</b>, it overrides the location to read the events from. By default, tracing information is
           read from the debugfs/tracing directory.  <b>-t</b> will use that location instead. This can be useful if
           the trace.dat file to create is from another machine. Just tar -cvf events.tar debugfs/tracing and
           copy and untar that file locally, and use that directory instead.

       <b>-k</b> kallsyms
           Used with <b>-c</b>, it overrides where to read the kallsyms file from. By default, <a href="file:/proc/kallsyms">/proc/kallsyms</a> is used.
           <b>-k</b> will override the file to read the kallsyms from. This can be useful if the trace.dat file to
           create is from another machine. Just copy the <a href="file:/proc/kallsyms">/proc/kallsyms</a> file locally, and use <b>-k</b> to point to
           that file.

       <b>-o</b> output'
           By default, trace-cmd restore will create a <u>trace.dat</u> file (or <u>trace-partial.dat</u> if <b>-c</b> is specified).
           You can specify a different file to write to with the <b>-o</b> option.

       <b>-i</b> input
           By default, trace-cmd restore will read the information of the current system to create the initial
           data stored in the <u>trace.dat</u> file. If the crash was on another machine, then that machine should have
           the trace-cmd restore run with the <b>-c</b> option to create the trace.dat partial file. Then that file can
           be copied to the current machine where trace-cmd restore will use <b>-i</b> to load that file instead of
           reading from the current system.

</pre><h4><b>EXAMPLES</b></h4><pre>
       If a crash happened on another box, you could run:

           $ trace-cmd restore -c -o box-partial.dat

       Then on the server that has the cpu files:

           $ trace-cmd restore -i box-partial.dat trace.dat.cpu0 trace.dat.cpu1

       This would create a trace.dat file for the embedded box.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <a href="../man1/trace-cmd.1.html">trace-cmd</a>(1), <a href="../man1/trace-cmd-record.1.html">trace-cmd-record</a>(1), <a href="../man1/trace-cmd-report.1.html">trace-cmd-report</a>(1), <a href="../man1/trace-cmd-start.1.html">trace-cmd-start</a>(1), <a href="../man1/trace-cmd-stop.1.html">trace-cmd-stop</a>(1),
       <a href="../man1/trace-cmd-extract.1.html">trace-cmd-extract</a>(1), <a href="../man1/trace-cmd-reset.1.html">trace-cmd-reset</a>(1), <a href="../man1/trace-cmd-split.1.html">trace-cmd-split</a>(1), <a href="../man1/trace-cmd-list.1.html">trace-cmd-list</a>(1), <a href="../man1/trace-cmd-listen.1.html">trace-cmd-listen</a>(1)

</pre><h4><b>AUTHOR</b></h4><pre>
       Written by Steven Rostedt, &lt;<b><a href="mailto:rostedt@goodmis.org">rostedt@goodmis.org</a></b>[1]&gt;

</pre><h4><b>RESOURCES</b></h4><pre>
       <b>https://git.kernel.org/pub/scm/utils/trace-cmd/trace-cmd.git/</b>

</pre><h4><b>COPYING</b></h4><pre>
       Copyright (C) 2010 Red Hat, Inc. Free use of this software is granted under the terms of the GNU Public
       License (GPL).

</pre><h4><b>NOTES</b></h4><pre>
        1. <a href="mailto:rostedt@goodmis.org">rostedt@goodmis.org</a>
           <a href="mailto:rostedt@goodmis.org">mailto:rostedt@goodmis.org</a>

libtracefs                                         04/08/2024                               <u><a href="../man1/TRACE-CMD-RESTORE.1.html">TRACE-CMD-RESTORE</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>