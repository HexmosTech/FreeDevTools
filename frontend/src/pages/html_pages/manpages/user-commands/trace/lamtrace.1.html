<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>lamtrace - Unload LAM trace data.</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/lam-runtime">lam-runtime_7.1.4-7.2_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       lamtrace - Unload LAM trace data.

</pre><h4><b>SYNOPSIS</b></h4><pre>

       lamtrace [-hkvR] [-mpi] [-l listno] [-f #secs] [filename] [nodes] [processes]

</pre><h4><b>OPTIONS</b></h4><pre>
       <b>-h</b>            Print useful information on this command.

       <b>-k</b>            Copy and do not remove trace data.

       <b>-v</b>            Be verbose.

       <b>-R</b>            Delete all trace data from the specified nodes.

       <b>-l</b>            Unload only from the given list number.

       <b>-mpi</b>          Unload trace data for an MPI application.

       <b>-f</b> <b>#secs</b>      Signal  target processes to flush trace data to the daemon.  Then wait #secs before unload‐
                     ing.

       <b>filename</b>      Place trace data into this file (default: def.lamtr).

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The -t option of <a href="../man1/mpirun.1.html">mpirun</a>(1) and <a href="../man1/loadgo.1.html">loadgo</a>(1) allows the application  to  generate  execution  traces.   These
       traces  are  first  stored in a buffer within each application process.  When the buffer is full and when
       the application terminates, the runtime buffer is flushed to the trace  daemon  (a  structural  component
       within the LAM daemon).  The trace daemon will also collect data up to a pre-compiled limit.  Beyond this
       limit, the oldest traces in will be forgotten in favor of the newer traces.

       After  an  application  has  finished, the record of its execution is stored in the trace daemons of each
       node that was running the application.  The <u>lamtrace</u> command can be used to  retrieve  these  traces  and
       store them in one file for display by a performance visualization tool, such as <a href="../man1/xmpi.1.html">xmpi</a>(1).  If the applica‐
       tion  was  started by <a href="../man1/xmpi.1.html">xmpi</a>(1), <u>lamtrace</u> is not normally needed as the equivalent functionality is invoked
       with a button.

       Incomplete trace data can be unloaded while the application is running.  The output file must  not  exist
       prior  to  invoking  <u>lamtrace</u>.   This is a good situation to use the -k option, which preserves the trace
       daemon's contents after unloading.  Each reload will then get the entire  run's  trace  data  up  to  the
       present time.

       A  running  process is likely to be holding the most recent trace data in an internal buffer.  A standard
       LAM signal, LAM_SIGTRACE (see <a href="../man1/doom.1.html">doom</a>(1)), causes trace enabled processes to flush the internal trace buffer
       to the daemon.  The -f option tells <u>lamtrace</u> to send this signal to all target processes before unloading
       trace data.  A race condition develops between the target process storing trace data to  the  daemon  and
       the unloading procedure.  The problem is foisted upon the user who gives a delay parameter after -f.

       Trace  data are organized by node, process identifier and list number.  A process can store traces on any
       node, although the local node is the obvious, least intrusive choice.  The process can identify itself in
       any meaningful way (<a href="../man2/getpid.2.html">getpid</a>(2) is a good idea) The list number is also chosen by the process.  These  val‐
       ues  may  be  set  by  an  instrumented  library,  such as <a href="../man3/libmpi.3.html">libmpi</a>(3), or directly by the application with
       <a href="../man2/lam_rtrstore.2.html">lam_rtrstore</a>(2).  Unloading flexibility follows that of storing with the -l  option  selecting  the  list
       number, and standard LAM command line mnemonics selecting nodes and processes.

       Dropping  old  traces when a pre-compiled volume limit is reached only happens for positive list numbers.
       Traces in negatively numbered lists will be collected until the underlying system runs out of memory.  Do
       not use negative list numbers for high volume trace data.

       If no process selection is given on the command line, trace data will be unloaded for  all  processes  on
       each specified node.

       LAM, its trace daemon and <u>lamtrace</u> are all unaware of the format and meaning of traces.

       The -R option does not unload trace data.  It causes the target trace daemons to free the memory occupied
       by  trace  data in the given list.  If all lists are specified (no -l option), the trace daemon is effec‐
       tively reset to its state after initiating LAM.

   <b>Unloading</b> <b>MPI</b> <b>Trace</b> <b>Data</b>
       A special capability, selected by the -mpi option, exists to search for and unload only  the  trace  data
       generated  by  an  MPI  application.  For this purpose, <u>lamtrace</u> is aware of the particular reserved list
       numbers that <a href="../man3/libmpi.3.html">libmpi</a>(3) uses to store traces.  It begins by searching all specified  nodes  and  processes
       (the whole LAM multicomputer, if nothing is specified) for a special trace generated by process rank 0 in
       MPI_COMM_WORLD  of  an  MPI application.  This special trace contains the node and process identifiers of
       all processes in that MPI_COMM_WORLD communicator.  <u>lamtrace</u> then uses the node / process information  to
       collect all trace data generated by <a href="../man3/libmpi.3.html">libmpi</a>(3).

       If  multiple world communicators exist within LAM's trace daemons, the first one found is used.  Multiple
       worlds may be present due to multiple concurrent applications, trace data from a previous run not removed
       (either with <u>lamtrace</u> or <a href="../man1/lamclean.1.html">lamclean</a>(1)), or an application that spawns processes.  A particular world  com‐
       municator can be located by providing precise node and process location to <u>lamtrace</u>.

       The -mpi option is not compatible with the -l option.

</pre><h4><b>EXAMPLES</b></h4><pre>
       lamtrace -v -mpi mytraces
           Unload  trace  data  into the file "mytraces" from the first MPI application found in a search of the
           entire LAM multicomputer.  Report on important steps as they are done.

       lamtrace n30 -l 5 p21367
           Unload trace data from list 5 of process ID 21367 on node 30.  Operate silently.

       lamtrace -mpi n30 p21367
           Unload trace data from the MPI application world group whose process rank 0 has PID 21367 and  is/was
           running on node 30.

</pre><h4><b>BUGS</b></h4><pre>
       Since trace data can be unloaded during an application's execution, there should be a way to incremental‐
       ly append to an output file.  This is a bit tricky with -mpi, but it can be done.

</pre><h4><b>FILES</b></h4><pre>
       def.lamtr     default output file

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <a href="../man1/mpirun.1.html">mpirun</a>(1), <a href="../man1/loadgo.1.html">loadgo</a>(1), <a href="../man1/lam_rtrstore.1.html">lam_rtrstore</a>(1), <a href="../man1/lamclean.1.html">lamclean</a>(1), <a href="../man3/libmpi.3.html">libmpi</a>(3), <a href="../man1/xmpi.1.html">xmpi</a>(1)

LAM 7.1.4                                          July, 2007                                        <u><a href="../man1/LAMTRACE.1.html">LAMTRACE</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>