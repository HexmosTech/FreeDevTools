<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>wforce - daemon to detect brute-force login attempts and enforce other policies for logins</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/weakforced">weakforced_2.10.2-2_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       <b>wforce</b> - daemon to detect brute-force login attempts and enforce other policies for logins

</pre><h4><b>SYNOPSIS</b></h4><pre>
       wforce [<u>OPTION</u>]...

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>wforce</b>   implements   a   simple   HTTP   server   that  accepts  JSON  formatted  commands  that  report
       successful/unsuccessful logins and query whether a login should be allowed to proceed.

       <b>wforce</b> can act as both a client and server.  As  a  server  it  typically  runs  under  systemd  control,
       although  it  can also be run as a traditional daemon or in `interactive' mode.  As a client, it connects
       to a wforce server and provides the same interactive commands.

       <b>wforce</b> is scriptable in Lua, see the wforce.conf file for a simple example, and wforce.conf.example for a
       more sophisticated example.  In fact all configuration is done using the Lua language, as wforce.conf  is
       simply a Lua script.

</pre><h4><b>SCOPE</b></h4><pre>
       <b>wforce</b>  depends  on  the systems performing login authentication to integrate with it using the HTTP/JSON
       API.  Example clients of the API include Dovecot and OX AppSuite.

       <b>wforce</b> provides  a  simple  clustering  mechanism  through  the  process  of  configuring  “siblings”  in
       wforce.conf.   All  modifications  to  the blacklists or the string stats DB (either from Lua or the REST
       API) will be replicated to all configured siblings.  Replication uses the UDP protocol,  so  if  siblings
       are not on a local subnet, you should ensure that any firewalls forward UDP on the configured ports.

</pre><h4><b>OPTIONS</b></h4><pre>
       -c     Act  as  a client, connecting to a wforce instance at the IP/Port specified in the `controlSocket'
              function in wforce.conf.  A custom configuration file can be specified.

       -C,–config <u>FILE</u>
              Load configuration from <u>FILE</u>.

       -R,–regexes <u>FILE</u>
              Read device parsing regexes from <u>FILE</u> (usually regexes.yaml).

       -s     Run in foreground, but do not spawn a console.  Use this switch to run wforce inside a  supervisor
              (use with e.g. systemd and daemontools).

       -d,–daemon
              Operate as a daemon.

       -e,–execute <u>CMD</u>
              Connect to wforce and execute <u>CMD</u>.

       -f,–facility <u>FACILITY</u> <u>NAME</u>
              Log using the specified facility name, e.g. local0

       -l,–loglevel &lt;0-7&gt;
              Logs sent to stdout will be filtered according to the specified log level, matching the equivalent
              syslog level (0 - Emerg to 7 - Debug).

       -h,–help
              Display a helpful message and exit.

</pre><h4><b>CONSOLE</b> <b>COMMANDS</b></h4><pre>
       The following commands can be run from the console when <u>wforce</u> is started with the -c option.

       • makeKey() - Returns a string to be used in the setKey() function in wforce.conf to authenticate sibling
         communications.  All siblings must be configured with the same key.

                  &gt; makeKey()
                  setKey("CRK+jKBpzXNLmM2A4C7OpFCBxiwpYlreCWgGEAIKAQI=")

       • stats() - Returns statistics about the wforce process.  For example:

                  &gt; stats()
                  40 reports, 8 allow-queries (% denies)

       • siblings() - Returns information about configured siblings.  For example:

                  &gt; siblings()
                  Address                             Send Successes  Send Failures  Rcv Successes   Rcv Failures     Note
                  127.0.0.1:4001                      0               0              17              0
                  127.0.0.1:4002                      0               0              0               0                Self

       • showNamedReportSinks() - Returns information about configured report sinks.  For example:

                  &gt; showNamedReportSinks()
                  Name            Address                             Successes Failures
                  trackalert      192.168.1.79:4501                   18        0
                  trackalert      192.168.1.30:4501                   19        0
                  elasticsearch   10.22.2.15:4501                     18        0
                  elasticsearch   10.22.2.16:4501                     19        0

       • showReportSinks()  -  Deprecated  -  use  showNamedReportSinks()  instead.   Returns  information about
         configured report sinks.  For example:

                  &gt; showReportSinks()
                  Address                             Successes Failures
                  192.168.1.79:4501                   18        7
                  192.168.1.30:4501                   25        0

       • showStringStatsDB() - Returns information about configured  stats  databases.   This  includes  the  DB
         Name/number  of  shards,  whether it is configured for replication, the size and number of windows, the
         maximum size, the current size, and finally all the configured fields and their types.  For example:

                  &gt; showStringStatsDB()
                  DB Name/Shards Repl? Win Size/No Max Size  Cur Size  Field Name       Type
                  MyDB1/1        yes   1/15        524288    0         countLogins      int
                                                                       diffPasswords    hll
                  MyDB2/10       no    600/6       5000      2093      diffIPs          hll

       • showACL() - Returns the configured ACLs for the wforce server.

                  &gt; showACL()
                  127.0.0.0/8
                  10.0.0.0/8
                  100.64.0.0/10
                  169.254.0.0/16
                  192.168.0.0/16
                  172.16.0.0/12
                  ::1/128
                  fc00::/7
                  fe80::/10

       • showWebHooks() - Returns information about configured webhooks.  For example:

                  &gt; showWebHooks()
                  ID        Successes Failures  URL                            Events
                  1         5         2         <a href="http://localhost">http://localhost</a>:8080/webhook/ report allow

       • showCustomWebHooks() - Returns information about configured custom webhooks.  For example:

                      &gt; showCustomWebHooks()
                  ID        Name                 Successes Failures  URL
                  1         mycustomhook         10         0         <a href="http://localhost">http://localhost</a>:8080/webhook/regression

       • showCustomEndpoints() - Returns information about configured custom endpoints.  For example:

                       &gt; showCustomEndpoints()
                   Custom Endpoint                Send to Report Sink?
                   custom1                        true
                   custom2                        false

       • showPerfStats() - (Deprecated in favour of prometheus metrics - will be removed in a  future  version).
         Returns  information  about  performance  statistics.   Stats beginning with WTW refer to the time that
         worker threads waited in a queue before running.  Stats beginning with  WTR  refer  to  the  time  that
         worker threads took to run.  Each stat is in a bucket, where each bucket represents a time range in ms,
         e.g. 0-1.   A server that is not overloaded will have most stats in the 0-1 buckets.  Stats are for the
         previous 5 minutes.  For example:

                  &gt; showPerfStats()
                  WTW_0_1=2939287
                  WTW_1_10=9722
                  WTW_10_100=4
                  WTW_100_1000=0
                  WTW_Slow=0
                  WTR_0_1=2939229
                  WTR_1_10=2837
                  WTR_10_100=131
                  WTR_100_1000=0
                  WTR_Slow=0

       • showCommandStats() - (Deprecated in favour of  prometheus  metrics  -  will  be  removed  in  a  future
         version).   Returns  information about the number of REST API commands that have been called, including
         custom endpoints.  Stats are for the  previous  5  mins,  and  due  to  the  counting  method,  may  be
         approximate when the numbers get very large.  For example:

                  &gt; showCommandStats()
                  addBLEntry=0
                  allow=23942
                  delBLEntry=0
                  getBL=0
                  getDBStats=0
                  ping=300
                  report=19232
                  reset=24
                  stats=92
                  customEndpoint=2821

       • showCustomStats() - (Deprecated in favour of prometheus metrics - will be removed in a future version).
         Returns  information  about  custom  stats that are incremented from Lua.  Stats are for the previous 5
         mins, and due to the counting method, may be approximate when the numbers get very large.  For example:

                  &gt; showCustomStats()
                  custom1=0
                  custom2=8405

       • reloadGeoIPDBs() - Reload all GeoIP DBs that have been initialized.  For example:

                  &gt; reloadGeoIPDBs
                  reloadGeoIPDBs() successful

       • showVersion() - Returns the current version of the wforce server.  For example:

                  &gt; showVersion()
                  wforce 1.2.0

</pre><h4><b>BUGS</b></h4><pre>
       The replication function of clustering means that as more servers are added  to  a  cluster,  incremental
       performance gains may be less each time, eventually possibly leading to performance degradation.  This is
       because  each  server  keeps  a  full  copy of the stats DBs and the blacklists, and changes to those are
       replicated to all siblings.  This can be mitigated by partitioning siblings into smaller clusters that do
       not share information, at the expense of missing potential abuse activity.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <a href="../man5/wforce.conf.5.html">wforce.conf</a>(5) <a href="../man5/wforce_webhook.5.html">wforce_webhook</a>(5) <a href="../man7/wforce_api.7.html">wforce_api</a>(7)

</pre><h4><b>AUTHORS</b></h4><pre>
       Open-Xchange.

                                                      2018                                             <u><a href="../man1/WFORCE.1.html">WFORCE</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>