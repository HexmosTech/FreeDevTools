<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>systemd-ask-password - Query the user for a system password</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/systemd">systemd_257.4-1ubuntu3.1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       systemd-ask-password - Query the user for a system password

</pre><h4><b>SYNOPSIS</b></h4><pre>

       <b>systemd-ask-password</b> [OPTIONS...] [MESSAGE]

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>systemd-ask-password</b> may be used to query a password or passphrase interactively from the user, using a
       question prompt specified on the command line. When run from a TTY it will query a password on the TTY
       and print it to standard output. When run with no TTY or with <b>--no-tty</b> it will use a system-wide or
       per-user agent-based query mechanism, which allows active users to respond via several agents, listed
       below.

       The purpose of this tool is to query system-wide or per-user passwords ‚Äî the former includes passwords
       possibly not associated to a specific user account. Examples include: unlocking encrypted hard disks when
       they are plugged in or at boot, entering an SSL certificate passphrase for web and VPN servers.

       Existing system-level agents are:

       ‚Ä¢   A boot-time password agent asking the user for passwords using <b><a href="../man8/plymouth.8.html">plymouth</a></b>(8),

       ‚Ä¢   A boot-time password agent querying the user directly on the console ‚Äî <b><a href="../man8/systemd-ask-passwordconsole.service.8.html">systemd-ask-password-</a></b>
           <b><a href="../man8/systemd-ask-passwordconsole.service.8.html">console.service</a></b>(8),

       ‚Ä¢   An agent requesting password input via a <b><a href="../man1/wall.1.html">wall</a></b>(1) message ‚Äî <b><a href="../man8/systemd-ask-password-wall.service.8.html">systemd-ask-password-wall.service</a></b>(8),

       ‚Ä¢   A TTY agent that is temporarily spawned during <b><a href="../man1/systemctl.1.html">systemctl</a></b>(1) invocations,

       ‚Ä¢   A command line agent which can be started temporarily to process queued password requests ‚Äî
           <b>systemd-tty-ask-password-agent</b> <b>--query</b>.

       Answering system-wide password queries is a privileged operation, hence all the agents listed above
       (except for the last one), run as privileged system services. The last one also needs elevated
       privileges, so should be run through <b><a href="../man1/run0.1.html">run0</a></b>(1) or similar.

       Additional password agents may be implemented according to the <b>systemd</b> <b>Password</b> <b>Agent</b> <b>Specification</b>[1].

       If a password is queried on a TTY, the user may press TAB to hide the asterisks normally shown for each
       character typed. Pressing Backspace as first key achieves the same effect.

</pre><h4><b>OPTIONS</b></h4><pre>
       The following options are understood:

       <b>--icon=</b>
           Specify an icon name alongside the password query, which may be used in all agents supporting
           graphical display. The icon name should follow the <b>XDG</b> <b>Icon</b> <b>Naming</b> <b>Specification</b>[2].

       <b>--id=</b>
           Specify an identifier for this password query. This identifier is freely choosable and allows
           recognition of queries by involved agents. It should include the subsystem doing the query and the
           specific object the query is done for. Example: "--id=cryptsetup:/dev/sda5".

           Added in version 227.

       <b>--keyname=</b>
           Configure a kernel keyring key name to use as cache for the password. If set, then the tool will try
           to push any collected passwords into the kernel keyring of the root user, as a key of the specified
           name. If combined with <b>--accept-cached</b>, it will also try to retrieve such cached passwords from the
           key in the kernel keyring instead of querying the user right away. By using this option, the kernel
           keyring may be used as effective cache to avoid repeatedly asking users for passwords, if there are
           multiple objects that may be unlocked with the same password. The cached key will have a timeout of
           2.5min set, after which it will be purged from the kernel keyring. Note that it is possible to cache
           multiple passwords under the same keyname, in which case they will be stored as <b>NUL</b>-separated list of
           passwords. Use <b><a href="../man1/keyctl.1.html">keyctl</a></b>(1) to access the cached key via the kernel keyring directly. Example:
           "--keyname=cryptsetup"

           Added in version 227.

       <b>--credential=</b>
           Configure a credential to read the password from ‚Äì if it exists. This may be used in conjunction with
           the <u>ImportCredential=</u>, <u>LoadCredential=</u> and <u>SetCredential=</u> settings in unit files. See <b><a href="../man5/systemd.exec.5.html">systemd.exec</a></b>(5)
           for details. If not specified, defaults to "password". This option has no effect if no credentials
           directory is passed to the program (i.e.  <u>$CREDENTIALS_DIRECTORY</u> is not set) or if the no credential
           of the specified name exists.

           Added in version 249.

       <b>--timeout=</b>
           Specify the query timeout in seconds. Defaults to 90s. A timeout of 0 waits indefinitely.

       <b>--echo=yes|no|masked</b>
           Controls whether to echo user input. Takes a boolean or the special string "masked", the default
           being the latter. If enabled the typed characters are echoed literally, which is useful for prompting
           for usernames and other non-protected data. If disabled the typed characters are not echoed in any
           form, the user will not get feedback on their input. If set to "masked", an asterisk ("*") is echoed
           for each character typed. In this mode, if the user hits the tabulator key ("‚Üπ"), echo is turned off.
           (Alternatively, if the user hits the backspace key ("‚å´") while no data has been entered otherwise,
           echo is turned off, too).

           Added in version 249.

       <b>--echo</b>, <b>-e</b>
           Equivalent to <b>--echo=yes</b>, see above.

           Added in version 217.

       <b>--emoji=yes|no|auto</b>
           Controls whether or not to prefix the query with a lock and key emoji (üîê), if the TTY settings
           permit this. The default is "auto", which defaults to "yes", unless <b>--echo=yes</b> is given.

           Added in version 249.

       <b>--no-tty</b>
           Never ask for password on current TTY even if one is available. Always use agent system.

       <b>--accept-cached</b>
           If passed, accept cached passwords, i.e. passwords previously entered.

       <b>--multiple</b>
           When used in conjunction with <b>--accept-cached</b> accept multiple passwords. This will output one
           password per line.

       <b>--no-output</b>
           Do not print passwords to standard output. This is useful if you want to store a password in kernel
           keyring with <b>--keyname=</b> but do not want it to show up on screen or in logs.

           Added in version 230.

       <b>-n</b>
           By default, when the acquired password is written to standard output it is suffixed by a newline
           character. This may be turned off with the <b>-n</b> switch, similarly to the switch of the same name of the
           <b><a href="../man1/echo.1.html">echo</a></b>(1) command.

           Added in version 249.

       <b>--user</b>, <b>--system</b>
           Controls whether to query the system-wide or the per-user password agents. By default if invoked
           privileged the system-wide agents are queried, otherwise the per-user ones. These options allow one
           to override this automatic behaviour.

           Added in version 257.

       <b>-h</b>, <b>--help</b>
           Print a short help text and exit.

</pre><h4><b>EXIT</b> <b>STATUS</b></h4><pre>
       On success, 0 is returned, a non-zero failure code otherwise.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man1/systemd.1.html">systemd</a></b>(1), <b><a href="../man8/systemd-ask-password-console.service.8.html">systemd-ask-password-console.service</a></b>(8), <b><a href="../man1/systemd-tty-ask-password-agent.1.html">systemd-tty-ask-password-agent</a></b>(1), <b><a href="../man1/keyctl.1.html">keyctl</a></b>(1),
       <b><a href="../man8/plymouth.8.html">plymouth</a></b>(8), <b><a href="../man1/wall.1.html">wall</a></b>(1)

</pre><h4><b>NOTES</b></h4><pre>
        1. systemd Password Agent Specification
           https://systemd.io/PASSWORD_AGENTS/

        2. XDG Icon Naming Specification
           https://standards.freedesktop.org/icon-naming-spec/icon-naming-spec-latest.html

systemd 257.4                                                                            <u><a href="../man1/SYSTEMD-ASK-PASSWORD.1.html">SYSTEMD-ASK-PASSWORD</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>