<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>netpipes - a package to manipulate BSD TCP/IP stream sockets</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/netpipes">netpipes_4.2-8build1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       netpipes - a package to manipulate BSD TCP/IP stream sockets

       version 4.2

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>faucet</b>  <u>port</u>  (<b>--in</b>|<b>--out</b>|<b>--err</b>|<b>--fd</b>  <u>n</u>)+  [<b>--once</b>]  [<b>--verbose</b>]  [<b>--quiet</b>] [<b>--unix</b>] [<b>--foreignhost</b> <u>addr</u>]
       [<b>--foreignport</b> <u>port</u>] [<b>--localhost</b> <u>addr</u>] [<b>--serial</b>] [<b>--daemon</b>] [<b>--shutdown</b> (r|w)  ]  [<b>--pidfile</b>  <u>filename</u>]
       [<b>--noreuseaddr</b>]   [<b>--backlog</b>   <u>n</u>]  [<b>-</b>[<b>i</b>][<b>o</b>][<b>e</b>][<b>#</b><u>3</u>[,<u>4</u>[,<u>5</u>...]]][<b>v</b>][<b>1</b>][<b>q</b>][<b>u</b>][<b>d</b>][<b>s</b>]]  [<b>-p</b>  <u>foreign-port</u>]  [<b>-h</b>
       <u>foreign-host</u>] [<b>-H</b> <u>local-host</u>] <u>command</u> <u>args</u>

       <b>hose</b> <u>hostname</u> <u>port</u> (<b>--in</b>|<b>--out</b>|<b>--err</b>|<b>--fd</b> <u>n</u>|<b>--slave</b>) [<b>--verbose</b>] [<b>--unix</b>] [<b>--localport</b> <u>port</u>] [<b>--localhost</b>
       <u>addr</u>] [<b>--retry</b> <u>n</u>] [<b>--delay</b> <u>n</u>] [<b>--shutdown</b> [r|w][a] ] [<b>--noreuseaddr</b>] [<b>-</b>[<b>i</b>][<b>o</b>][<b>e</b>][<b>#</b><u>3</u>[,<u>4</u>[,<u>5</u>...]]][<b>s</b>][<b>v</b>][<b>u</b>]]
       [<b>-p</b> <u>local-port</u>] [<b>-h</b> <u>local-host</u>] <u>command</u> <u>args</u>

       <b>encapsulate</b> <b>--fd</b> <u>n</u> [ <b>--verbose</b> ] [ <b>--subproc</b> [ <b>--infd</b> <u>n</u>[<b>=</b><u>sid</u>] ] [ <b>--outfd</b> <u>n</u>[<b>=</b><u>sid</u>] ] [ <b>--duplex</b> <u>n</u>[<b>=</b><u>sid</u>]  ]
       [  <b>--Duplex</b>  <u>n</u>[<b>=</b><u>sid</u>]  ]  [  <b>--DUPLEX</b>  <u>n</u>[<b>=</b><u>sid</u>] ] [ <b>--prefer-local</b> ] [ <b>--prefer-remote</b> ] [ <b>--local-only</b> ] [
       <b>--remote-only</b> ] ] [ <b>--client</b> ] [ <b>--server</b> ]  <b>-</b>[<b>#</b><u>n</u>][<b>v</b>][<b>s</b>[<b>i</b><u>n</u>][<b>o</b><u>n</u>][<b>d</b><u>n</u>][<b>io</b><u>n</u>][<b>oi</b><u>n</u>][<b>l</b>][<b>r</b>][<b>L</b>][<b>R</b>]]  <u>command</u>  <u>args</u>
       <u>...</u>

       <b>sockdown</b> [<u>fd</u> [<u>how</u>] ]

       <b>getpeername</b> [ <b>-verbose</b> ] [ <b>-sock</b> ] [ <u>fd</u> ]

       <b>getsockname</b> [ <b>-verbose</b> ] [ <b>-peer</b> ] [ <u>fd</u> ]

       <b>timelimit.netpipes</b> [ <b>-v</b> ] [ <b>-nokill</b> ] <u>time</u> <u>command</u> <u>args</u>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The  netpipes  package  makes TCP/IP streams usable in shell scripts.  It can also simplify client/server
       code by allowing the programmer to  skip  all  the  tedious  programming  bits  related  to  sockets  and
       concentrate on writing a filter/service.

       <u>``Why</u> <u>would</u> <u>anyone</u> <u>want</u> <u>to</u> <u>do</u> <u>that?''</u>
        <u>--</u> <u>Richard</u> <u>Stallman</u>

       <b>faucet</b>  is  the  server  end  of  a TCP/IP stream.  It listens on a port of the local machine waiting for
       connections.  Every time it gets a connection it forks a process to perform a service for the  connecting
       client.

       <b>hose</b>  is the client end of a TCP/IP stream.  It actively connects to a remote port and execs a process to
       request a service.

       <b>encapsulate</b> is an implementation of the Session Control Protocol.  It allows  you  to  multiplex  several
       streams across a single TCP session and also transmits remote exit status.

       <b>sockdown</b> is a simple program designed to shut down part or all of the socket connection.  It is primarily
       useful when the processes connected to the socket perform both input and output.

       <b>getpeername</b>  and  <b>getsockname</b> are two names for a program designed to print out the addresses of the ends
       of a socket.  <b>getpeername</b> prints the address of the remote end and <b>getsockname</b> prints the address of  the
       local end.

       <b>timelimit.netpipes</b>  limits the amount of foreground wallclock time a process may consume.  After the time
       limit runs out, it either kills the process, or exits and leaves it in the background.

</pre><h4><b>EXAMPLES</b></h4><pre>
       Here  is  a  simple  command I often perform to transfer directory trees between machines.  (rsh does not
       work because one machine is connected using SLIP and .rhosts are out of the question).

       server$ faucet 3000 --out tar cf - .
       client$ hose server 3000 --in tar xvf -

       Here is a minimal HTTP client.  It is so minimal it speaks old HTTP.

       cairo$ hose www.cis.ufl.edu 80 --in --out \
            sh -c "(echo 'GET /'; sockdown) &amp; cat &gt; result"

       And of course, there is Nick Trown's metaserver for Netrek

       cairo$ hose metaserver.ecst.csuchico.edu 3521 --in cat

       Allow me to apologize ahead of time for the convolutedness of the  following  example.   It  requires  an
       understanding  of  Bourne shell file descriptor redirection syntax (and illustrates why csh and tcsh suck
       eggs).  Do not try to type this from your tcsh command line.  Get a bash (GNU's Bourne Again SHell).

       Suppose you want to distinguish between stdout and stderr of a remote process

       remote$ faucet 3000 --fd 3 \
          encapsulate --fd 3 --infd 0 --outfd 1 --outfd 2 --subproc \
            remote-app
       local$ hose remote 3000 --fd 3 \
          encapsulate --fd 3 --outfd 3 --infd 4 --infd 5 --subproc \
            sh -c "cat 0&lt;&amp;4 3&gt;&amp;- &amp; cat 0&lt;&amp;5 1&gt;&amp;2 3&gt;&amp;- &amp; \
                cat 1&gt;&amp;3 ; exec 3&gt;&amp;-"

       Close all unneeded file descriptors when you spawn a background task.  That's why the  backgrounded  cats
       have 3&gt;&amp;-.

       server$ faucet 3000 --in --out --verbose enscript -2rGhp -
       client$ ps aux | hose server 3000 --in --out \
            sh -c " (cat &lt;&amp;3; sockdown ) &amp; cat &gt;&amp;4 " 3&lt;&amp;0 4&gt;&amp;1 | \
            lpr -Pps422
       #or perhaps this, but I haven't tested it
       client$ ps aux | hose server 3000 --fd 3 \
            sh -c " (cat &gt;&amp;3; sockdown 3 ) &amp; cat &lt;&amp;3 " | \
            lpr -Pps422

       This proves that hose <u>can</u> be used as part of a pipeline to perform a sort of remote procedure call (RPC).
       After  you  have  figured  out  that  example,  you  will  know  how  to use Bourne shell to shuffle file
       descriptors around.  It is a handy skill.

       Now we go to the extreme, but simplify things by using the <u>--slave</u> option of hose.  The  following  is  a
       socket relay

       gateway$ faucet 3000 -io hose server 4000 --slave

       It's  a  handy  little  bugger when you want to tunnel through a firewall on an occasional basis.  If you
       experience ``hanging'' of the connection, try using the <u>--netslave</u> option  instead  of  <u>--slave</u>.  (telnet
       proxies would benefit from this)

       For  those  of  you  who  use  ssh,  here's  how to tunnel some information through an encrypted SSH port
       forward.

       server$ faucet 3000 -1v --fd 1 --foreignhost server echo blah
       client$ ssh -n -x -L 3000:server:3000 server sleep 60 &amp;
       client$ hose localhost 3000 --fd 0 -retry 10 cat

       The trick with ssh's port forwarding, is that the <a href="../man2/shutdown.2.html">shutdown</a>(2) system call causes ssh to close both halves
       of the full-duplex connection instead of only one half.  That's why you have to use --fd 1  and  --fd  0.
       If  you  need to be able to close half of the connection while still using the other, use the encapsulate
       wrapper.

       server$ faucet 3000 -1v --fd 3 --foreignhost server \
            encapsulate --fd 3 --server -si0o1 tr a-z A-Z
       client$ ssh -n -x -L 3000:server:3000 server sleep 60 &amp;
       client$ echo blah | hose localhost 3000 --fd 3 -retry 10 \
            encapsulate --fd 3 --client

</pre><h4><b>REMARK</b></h4><pre>
       The Debian package maintainer has renamed <b>timelimit</b> to the more expressive <b>timelimit.netpipes</b>,  as  there
       exists a better alternative using the same short name, but which is actively maintained as an independent
       software.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man1/faucet.1.html">faucet</a></b>(1), <b><a href="../man1/hose.1.html">hose</a></b>(1), <b><a href="../man1/encapsulate.1.html">encapsulate</a></b>(1), <b><a href="../man1/sockdown.1.html">sockdown</a></b>(1), <b><a href="../man1/getpeername.1.html">getpeername</a></b>(1), <b><a href="../man1/timelimit.netpipes.1.html">timelimit.netpipes</a></b>(1), <b><a href="../man1/timelimit.1.html">timelimit</a></b>(1).

</pre><h4><b>BUGS</b></h4><pre>
       Report any bugs or feature requests to <a href="mailto:thoth@purplefrog.com">thoth@purplefrog.com</a>

</pre><h4><b>CREDITS</b></h4><pre>
       Thanks to Harbor Development Inc. for funding some of the netpipes development.

       Thanks  to Michal Jaegermann &lt;<a href="mailto:michal@ellpspace.math.ualberta.ca">michal@ellpspace.math.ualberta.ca</a>&gt; for some bug fixes and glibc portability
       suggestions against 4.1.1 .

       Big thanks to Joe Traister &lt;<a href="mailto:traister@gate.net">traister@gate.net</a>&gt; for his signal handling patches, strerror  surrogate,  and
       other assorted hacks.

</pre><h4><b>COPYRIGHT</b></h4><pre>
       Copyright (C) 1995-98 Robert Forsman

       This  program  is  free  software;  you  can  redistribute it and/or modify it under the terms of the GNU
       General Public License as published by the Free Software Foundation; either version 2 of the License,  or
       (at your option) any later version.

       This  program  is  distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even
       the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General  Public
       License for more details.

       You  should have received a copy of the GNU General Public License along with this program; if not, write
       to the Free Software Foundation, Inc., 675 Mass Ave, Cambridge, MA 02139, USA.

</pre><h4><b>DOWNLOAD</b></h4><pre>
       Export Version: <a href="ftp://ftp.purplefrog.com/pub/netpipes/">ftp://ftp.purplefrog.com/pub/netpipes/</a>

       U.S./Canada  version  with  ssl-auth:  <a href="http://www.cryptography.org/">http://www.cryptography.org/</a>  ,  then  find  it  in  the  network/
       subdirectory.

</pre><h4><b>AUTHOR</b></h4><pre>
       Robert Forsman
        <a href="mailto:thoth@purplefrog.com">thoth@purplefrog.com</a>
        Purple Frog Software
        <a href="http://web.purplefrog.com/~thoth/">http://web.purplefrog.com/~thoth/</a>

                                                October 28, 1997                                     <u><a href="../man1/NETPIPES.1.html">NETPIPES</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>