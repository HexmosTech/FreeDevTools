<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>nbdkit-gcs-plugin - expose data in Google Cloud Storage (GCS) buckets as block device</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/nbdkit-plugin-python">nbdkit-plugin-python_1.42.2-1ubuntu1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       nbdkit-gcs-plugin - expose data in Google Cloud Storage (GCS) buckets as block device

</pre><h4><b>SYNOPSIS</b></h4><pre>
        nbdkit gcs [json-credentials=FILE]
                   [size=NN object-size=NN]
                   bucket=BUCKET key=STRING

</pre><h4><b>DESCRIPTION</b></h4><pre>
       "nbdkit-gcs-plugin" is a plugin for <b><a href="../man1/nbdkit.1.html">nbdkit</a></b>(1) which lets you open objects stored in Google Cloud Storage
       (GCS) as disk images.

       This plugin uses the Python Google Cloud Storage client library (google-cloud-storage).  It requires
       Python ≥ 3.7.

</pre><h4><b>EXAMPLES</b></h4><pre>
        nbdkit gcs json-credentials=/path/to-my-json-credentials.json \
                   bucket=MY-BUCKET key=disk.img

       Provides a read only block device holding the data contained in the <u>disk.img</u> object.

        nbdkit gcs json-credentials=/path/to-my-json-credentials.json \
                   size=50G object-size=128k \
                   bucket=MY-BUCKET key=disk

       Provides a read-write block device with size 50G, whose contents are stored across multiple in objects of
       size 128k, prefixed with <u>disk/</u>

</pre><h4><b>PARAMETERS</b></h4><pre>
       <b>json-credentials=</b>FILE
           Path to a JSON file with Google Service account keys. Application Default Credentials will be used if
           "json-credentials" is not specified (see "CREDENTIALS" below).

       <b>bucket=</b>BUCKET
           The bucket containing the object(s).  This parameter is required.

       <b>key=</b>STRING
           The  object name (if "size" is not specified) or object prefix (if "size" is specified) to use within
           the bucket.  This parameter is required.

       <b>size=</b>SIZE
       <b>object-size=</b>SIZE
           These two parameters must always be specified together. If set, data will be  split  into  blocks  of
           "object-size" and stored as separate objects. The block device will report a total size of "size" and
           be writeable and trim-able.

           Object  names  will  have  the form <u>key/%16x</u>, where %16x is the 16-digit hexadecimal block number. If
           there are existing objects under the prefix that do not have  the  expected  size,  the  plugin  will
           crash.

</pre><h4><b>PERFORMANCE</b> <b>CONSIDERATIONS</b></h4><pre>
       It  is  highly  recommended  that clients do their utmost to issue requests that exactly match the object
       size: Smaller write requests will incur a performance penalty  due  to  the  need  for  read-modify-write
       cycles  (thus  also  incurring latency from two network round-trips). Larger read and write requests will
       incur a performance penalty because of sequential execution.

       The <b><a href="../man1/nbdkit-blocksize-filter.1.html">nbdkit-blocksize-filter</a></b>(1) can be used to alleviate the impact of requests  larger  than  the  object
       size, but does not help if the client issues requests smaller than the block size.

       The  <b><a href="../man1/nbdkit-stats-filter.1.html">nbdkit-stats-filter</a></b>(1)  can  be  used to investigate what block sizes and alignments are used by the
       client.

       When    connecting    through     the     Linux     kernel's     NBD     module,     consider     setting
       "/sys/block/nbd&lt;X&gt;/queue/max_sectors_kb" to match the object size.

</pre><h4><b>CREDENTIALS</b></h4><pre>
       Refer to the following web pages:

       Google Service account keys
           https://developers.google.com/workspace/guides/create-credentials#service-account

       Application Default Credentials
           https://cloud.google.com/docs/authentication/application-default-credentials

</pre><h4><b>FILES</b></h4><pre>
       <u>$plugindir/nbdkit-gcs-plugin</u>
           The plugin.

           Use "nbdkit --dump-config" to find the location of $plugindir.

       <u>$HOME/.config/gcloud/application_default_credentials.json</u>
           Application Default Credentials.

</pre><h4><b>ENVIRONMENT</b> <b>VARIABLES</b></h4><pre>
       "GOOGLE_APPLICATION_CREDENTIALS"
           You  can  use  the "GOOGLE_APPLICATION_CREDENTIALS" environment variable to provide the location of a
           credential JSON file.

</pre><h4><b>COMPARISON</b> <b>TO</b> <b>S3</b> <b>PLUGIN</b></h4><pre>
       You can use the "S3" plugin to access Google Cloud Storage in interoperability mode.  "read" and  "write"
       work  perfectly  fine,  while  "trim"  and  "zero"  operations don't work in the general case: trimmed or
       zeroed-out blocks cannot be deleted from the storage using the "S3" plugin.

</pre><h4><b>VERSION</b></h4><pre>
       "nbdkit-gcs-plugin" first appeared in nbdkit 1.38.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man1/nbdkit.1.html">nbdkit</a></b>(1),           <b><a href="../man3/nbdkit-plugin.3.html">nbdkit-plugin</a></b>(3),           <b><a href="../man3/nbdkit-python-plugin.3.html">nbdkit-python-plugin</a></b>(3),            <b><a href="../man3/nbdkit-S3-plugin.3.html">nbdkit-S3-plugin</a></b>(3),
       https://pypi.org/project/google-cloud-storage/,
       https://developers.google.com/workspace/guides/create-credentials#service-account,
       https://cloud.google.com/docs/authentication/application-default-credentials.

</pre><h4><b>AUTHORS</b></h4><pre>
       Mykola Ivanets

</pre><h4><b>COPYRIGHT</b></h4><pre>
       Copyright Infrascale Inc.

</pre><h4><b>LICENSE</b></h4><pre>
       Redistribution  and  use in source and binary forms, with or without modification, are permitted provided
       that the following conditions are met:

       •   Redistributions of source code must retain the above copyright notice, this list  of  conditions  and
           the following disclaimer.

       •   Redistributions in binary form must reproduce the above copyright notice, this list of conditions and
           the following disclaimer in the documentation and/or other materials provided with the distribution.

       •   Neither  the  name  of  Red  Hat  nor the names of its contributors may be used to endorse or promote
           products derived from this software without specific prior written permission.

       THIS SOFTWARE IS PROVIDED BY RED HAT AND CONTRIBUTORS ''AS IS'' AND ANY EXPRESS  OR  IMPLIED  WARRANTIES,
       INCLUDING,  BUT  NOT  LIMITED  TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
       PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL RED HAT OR CONTRIBUTORS BE LIABLE  FOR  ANY  DIRECT,  INDIRECT,
       INCIDENTAL,  SPECIAL,  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF
       SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
       ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT  LIABILITY,  OR  TORT  (INCLUDING  NEGLIGENCE  OR
       OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH
       DAMAGE.

nbdkit-1.42.2                                      2025-04-02                               <u><a href="../man1/nbdkit-gcs-plugin.1.html">nbdkit-gcs-plugin</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>