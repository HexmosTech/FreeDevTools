<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>This  manual  page  is part of the POSIX Programmer's Manual.  The Linux implementation of this interface</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/manpages-posix">manpages-posix_2017a-2_all</a> <br><br><pre>
</pre><h4><b>PROLOG</b></h4><pre>
       This  manual  page  is part of the POSIX Programmer's Manual.  The Linux implementation of this interface
       may differ (consult the corresponding Linux manual page for details of Linux behavior), or the  interface
       may not be implemented on Linux.

</pre><h4><b>NAME</b></h4><pre>
       file — determine file type

</pre><h4><b>SYNOPSIS</b></h4><pre>
       file <b>[</b>-dh<b>]</b> <b>[</b>-M <u>file</u><b>]</b> <b>[</b>-m <u>file</u><b>]</b> <u>file</u>...

       file -i <b>[</b>-h<b>]</b> <u>file</u>...

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The  <u>file</u>  utility  shall  perform  a series of tests in sequence on each specified <u>file</u> in an attempt to
       classify it:

        1. If <u>file</u> does not exist, cannot be read, or its file status could not be determined, the output  shall
           indicate that the file was processed, but that its type could not be determined.

        2. If  the  file  is  not  a regular file, its file type shall be identified.  The file types directory,
           FIFO, socket, block special, and character special shall be identified as such. Other implementation-
           defined file types may also be identified. If <u>file</u> is a symbolic link, by default the link  shall  be
           resolved  and  <u>file</u>  shall  test the type of file referenced by the symbolic link. (See the <b>-h</b> and <b>-i</b>
           options below.)

        3. If the length of <u>file</u> is zero, it shall be identified as an empty file.

        4. The <u>file</u> utility shall examine an initial segment of <u>file</u> and shall make a guess at  identifying  its
           contents  based on position-sensitive tests. (The answer is not guaranteed to be correct; see the <b>-d</b>,
           <b>-M</b>, and <b>-m</b> options below.)

        5. The <u>file</u> utility shall examine <u>file</u> and make a guess at identifying its contents  based  on  context-
           sensitive default system tests. (The answer is not guaranteed to be correct.)

        6. The file shall be identified as a data file.

       If  <u>file</u>  does  not  exist,  cannot be read, or its file status could not be determined, the output shall
       indicate that the file was processed, but that its type could not be determined.

       If <u>file</u> is a symbolic link, by default the link shall be resolved and <u>file</u> shall test the  type  of  file
       referenced by the symbolic link.

</pre><h4><b>OPTIONS</b></h4><pre>
       The  <u>file</u>  utility  shall  conform  to the Base Definitions volume of POSIX.1‐2017, <u>Section</u> <u>12.2</u>, <u>Utility</u>
       <u>Syntax</u> <u>Guidelines</u>, except that the order of the <b>-m</b>, <b>-d</b>, and <b>-M</b> options shall be significant.

       The following options shall be supported by the implementation:

       <b>-d</b>        Apply any position-sensitive default system tests and context-sensitive default system tests to
                 the file. This is the default if no <b>-M</b> or <b>-m</b> option is specified.

       <b>-h</b>        When a symbolic link is encountered, identify the file  as  a  symbolic  link.  If  <b>-h</b>  is  not
                 specified  and  <u>file</u>  is a symbolic link that refers to a nonexistent file, <u>file</u> shall identify
                 the file as a symbolic link, as if <b>-h</b> had been specified.

       <b>-i</b>        If a file is a regular file, do not attempt to classify the  type  of  the  file  further,  but
                 identify the file as specified in the STDOUT section.

       <b>-M</b> <u>file</u>   Specify  the name of a file containing position-sensitive tests that shall be applied to a file
                 in order to classify it (see the EXTENDED DESCRIPTION). No  position-sensitive  default  system
                 tests  nor context-sensitive default system tests shall be applied unless the <b>-d</b> option is also
                 specified.

       <b>-m</b> <u>file</u>   Specify the name of a file containing position-sensitive tests that shall be applied to a  file
                 in order to classify it (see the EXTENDED DESCRIPTION).

       If  the  <b>-m</b>  option  is  specified  without specifying the <b>-d</b> option or the <b>-M</b> option, position-sensitive
       default system tests shall be applied after the position-sensitive tests specified by the <b>-m</b>  option.  If
       the <b>-M</b> option is specified with the <b>-d</b> option, the <b>-m</b> option, or both, or the <b>-m</b> option is specified with
       the  <b>-d</b>  option,  the  concatenation  of the position-sensitive tests specified by these options shall be
       applied in the order specified by the appearance of these options. If a <b>-M</b> or <b>-m</b> <u>file</u> option-argument  is
       <b>-</b>, the results are unspecified.

</pre><h4><b>OPERANDS</b></h4><pre>
       The following operand shall be supported:

       <u>file</u>      A pathname of a file to be tested.

</pre><h4><b>STDIN</b></h4><pre>
       The  standard  input  shall  be  used  if  a <u>file</u> operand is <b>'-'</b> and the implementation treats the <b>'-'</b> as
       meaning standard input.  Otherwise, the standard input shall not be used.

</pre><h4><b>INPUT</b> <b>FILES</b></h4><pre>
       The <u>file</u> can be any file type.

</pre><h4><b>ENVIRONMENT</b> <b>VARIABLES</b></h4><pre>
       The following environment variables shall affect the execution of <u>file</u>:

       <u>LANG</u>      Provide a default value for the internationalization variables that are unset or null. (See the
                 Base Definitions volume of POSIX.1‐2017, <u>Section</u> <u>8.2</u>, <u>Internationalization</u>  <u>Variables</u>  for  the
                 precedence   of   internationalization  variables  used  to  determine  the  values  of  locale
                 categories.)

       <u>LC_ALL</u>    If set to a non-empty string value, override the values of all the  other  internationalization
                 variables.

       <u>LC_CTYPE</u>  Determine  the  locale  for the interpretation of sequences of bytes of text data as characters
                 (for example, single-byte as opposed to multi-byte characters in arguments and input files).

       <u>LC_MESSAGES</u>
                 Determine the locale that should be used to  affect  the  format  and  contents  of  diagnostic
                 messages written to standard error and informative messages written to standard output.

       <u>NLSPATH</u>   Determine the location of message catalogs for the processing of <u>LC_MESSAGES</u>.

</pre><h4><b>ASYNCHRONOUS</b> <b>EVENTS</b></h4><pre>
       Default.

</pre><h4><b>STDOUT</b></h4><pre>
       In the POSIX locale, the following format shall be used to identify each operand, <u>file</u> specified:

           "%s: %s\n", &lt;<u>file</u>&gt;, &lt;<u>type</u>&gt;

       The  values  for &lt;<u>type</u>&gt; are unspecified, except that in the POSIX locale, if <u>file</u> is identified as one of
       the types listed in the following table, &lt;<u>type</u>&gt; shall contain (but is not limited to)  the  corresponding
       string,  unless  the file is identified by a position-sensitive test specified by a <b>-M</b> or <b>-m</b> option. Each
       &lt;space&gt; shown in the strings shall be exactly one &lt;space&gt;.

                                        <b>Table</b> <b>4-9:</b> <b>File</b> <b>Utility</b> <b>Output</b> <b>Strings</b>
       │     ─────────────────────────────────────────┬──────────────────────────────────┬───────┬──────
--
</pre><h4><b>STDERR</b></h4><pre>
       The standard error shall be used only for diagnostic messages.

</pre><h4><b>OUTPUT</b> <b>FILES</b></h4><pre>
       None.

</pre><h4><b>EXTENDED</b> <b>DESCRIPTION</b></h4><pre>
       A file specified as an option-argument to the <b>-m</b> or <b>-M</b> options shall contain one position-sensitive  test
       per  line,  which shall be applied to the file. If the test succeeds, the message field of the line shall
       be printed and no further tests shall be applied, with the exception that tests on immediately  following
       lines beginning with a single <b>'&gt;'</b> character shall be applied.

       Each  line shall be composed of the following four &lt;tab&gt;-separated fields. (Implementations may allow any
       combination of one or more white-space characters other than &lt;newline&gt; to act as field separators.)

       <u>offset</u>    An unsigned number (optionally preceded by a single <b>'&gt;'</b> character) specifying  the  <u>offset</u>,  in
                 bytes,  of the value in the file that is to be compared against the <u>value</u> field of the line. If
                 the file is shorter than the specified offset, the test shall fail.

                 If the <u>offset</u> begins with the character <b>'&gt;'</b>, the test  contained  in  the  line  shall  not  be
                 applied  to the file unless the test on the last line for which the <u>offset</u> did not begin with a
                 <b>'&gt;'</b> was successful. By default, the <u>offset</u> shall be interpreted as an unsigned decimal  number.
                 With  a  leading  0x or 0X, the <u>offset</u> shall be interpreted as a hexadecimal number; otherwise,
                 with a leading 0, the <u>offset</u> shall be interpreted as an octal number.

       <u>type</u>      The type of the value  in  the  file  to  be  tested.  The  type  shall  consist  of  the  type
                 specification  characters <b>d</b>, <b>s</b>, and <b>u</b>, specifying signed decimal, string, and unsigned decimal,
                 respectively.

                 The <u>type</u> string shall be interpreted as the bytes from  the  file  starting  at  the  specified
                 <u>offset</u>  and  including  the  same number of bytes specified by the <u>value</u> field. If insufficient
                 bytes remain in the file past the <u>offset</u> to match the <u>value</u> field, the test shall fail.

                 The type specification characters <b>d</b> and <b>u</b> can be  followed  by  an  optional  unsigned  decimal
                 integer  that  specifies  the  number  of bytes represented by the type. The type specification
                 characters <b>d</b> and <b>u</b> can be followed by an optional <b>C</b>, <b>S</b>, <b>I</b>, or <b>L</b>, indicating that the  value  is
                 of type <b>char</b>, <b>short</b>, <b>int</b>, or <b>long</b>, respectively.

                 The  default number of bytes represented by the type specifiers <b>d</b>, <b>f</b>, and <b>u</b> shall correspond to
                 their respective C-language types as follows. If  the  system  claims  conformance  to  the  C-
                 Language  Development  Utilities option, those specifiers shall correspond to the default sizes
                 used in the <u>c99</u> utility. Otherwise, the default sizes shall be implementation-defined.

                 For the type specifier characters <b>d</b> and <b>u</b>, the default number of bytes shall correspond to  the
                 size  of  a  basic  integer  type  of  the  implementation. For these specifier characters, the
                 implementation  shall  support  values  of  the  optional  number  of  bytes  to  be  converted
                 corresponding  to the number of bytes in the C-language types <b>char</b>, <b>short</b>, <b>int</b>, or <b>long</b>.  These
                 numbers can also be specified by an application as the characters <b>C</b>, <b>S</b>, <b>I</b>, and <b>L</b>, respectively.
                 The byte order used when interpreting  numeric  values  is  implementation-defined,  but  shall
                 correspond  to  the  order in which a constant of the corresponding type is stored in memory on
                 the system.

                 All type specifiers, except for <b>s</b>, can be followed by a mask specifier of the form &amp;<u>number</u>. The
                 mask value shall be AND'ed with the value of the input file  before  the  comparison  with  the
                 <u>value</u>  field  of  the  line  is  made. By default, the mask shall be interpreted as an unsigned
                 decimal number. With a leading 0x  or  0X,  the  mask  shall  be  interpreted  as  an  unsigned
                 hexadecimal  number;  otherwise, with a leading 0, the mask shall be interpreted as an unsigned
                 octal number.

                 The strings <b>byte</b>, <b>short</b>, <b>long</b>, and <b>string</b>  shall  also  be  supported  as  type  fields,  being
                 interpreted as <b>dC</b>, <b>dS</b>, <b>dL</b>, and <b>s</b>, respectively.

       <u>value</u>     The <u>value</u> to be compared with the value from the file.

                 If  the  specifier  from  the  type field is <b>s</b> or <b>string</b>, then interpret the value as a string.
                 Otherwise, interpret it as a number. If the value is a string, then the test shall succeed only
                 when a string value exactly matches the bytes from the file.

                 If the <u>value</u> is a string, it can contain the following sequences:

                 \<u>character</u>  The &lt;backslash&gt;-escape sequences as specified in the  Base  Definitions  volume  of
                             POSIX.1‐2017, <u>Table</u> <u>5-1</u>, <u>Escape</u> <u>Sequences</u> <u>and</u> <u>Associated</u> <u>Actions</u> (<b>'\\'</b>, <b>'\a'</b>, <b>'\b'</b>,
                             <b>'\f'</b>,  <b>'\n'</b>,  <b>'\r'</b>,  <b>'\t'</b>,  <b>'\v'</b>).   In  addition,  the  escape  sequence <b>'\</b> <b>'</b> (the
                             &lt;backslash&gt; character followed by a  &lt;space&gt;  character)  shall  be  recognized  to
                             represent a &lt;space&gt; character. The results of using any other character, other than
                             an octal digit, following the &lt;backslash&gt; are unspecified.

                 \<u>octal</u>      Octal  sequences  that  can  be  used  to  represent characters with specific coded
                             values. An octal sequence shall consist of a &lt;backslash&gt; followed  by  the  longest
                             sequence of one, two, or three octal-digit characters (01234567).

                 By default, any value that is not a string shall be interpreted as a signed decimal number. Any
                 such  value,  with  a leading 0x or 0X, shall be interpreted as an unsigned hexadecimal number;
                 otherwise, with a leading zero, the value shall be interpreted as an unsigned octal number.

                 If the value is not a string, it can be preceded by a character indicating the comparison to be
                 performed. Permissible characters and the comparisons they specify are as follows:

                 =     The test shall succeed if the value from the file equals the <u>value</u> field.

                 &lt;     The test shall succeed if the value from the file is less than the <u>value</u> field.

                 &gt;     The test shall succeed if the value from the file is greater than the <u>value</u> field.

                 &amp;     The test shall succeed if all of the set bits in the <u>value</u> field are  set  in  the  value
                       from the file.

                 ^     The  test  shall succeed if at least one of the set bits in the <u>value</u> field is not set in
                       the value from the file.

                 x     The test shall succeed if the file is large  enough  to  contain  a  value  of  the  type
                       specified starting at the offset specified.

       <u>message</u>   The  <u>message</u>  to  be  printed  if the test succeeds. The <u>message</u> shall be interpreted using the
                 notation for the <u>printf</u> formatting specification; see <u>printf</u>.  If the <u>value</u> field was a string,
                 then the value from the file shall be the argument for  the  <u>printf</u>  formatting  specification;
                 otherwise, the value from the file shall be the argument.

</pre><h4><b>EXIT</b> <b>STATUS</b></h4><pre>
       The following exit values shall be returned:

        0    Successful completion.

       &gt;0    An error occurred.

</pre><h4><b>CONSEQUENCES</b> <b>OF</b> <b>ERRORS</b></h4><pre>
       Default.

       <u>The</u> <u>following</u> <u>sections</u> <u>are</u> <u>informative.</u>

</pre><h4><b>APPLICATION</b> <b>USAGE</b></h4><pre>
       The  <u>file</u> utility can only be required to guess at many of the file types because only exhaustive testing
       can determine some types with certainty. For example, binary data on some implementations might match the
       initial segment of an executable or a <u>tar</u> archive.

       Note that the table indicates that the output contains the stated string. Systems may add text before  or
       after  the  string.  For executables, as an example, the machine architecture and various facts about how
       the file was link-edited may be included. Note also that on systems that  recognize  shell  script  files
       starting with <b>"#!"</b> as executable files, these may be identified as executable binary files rather than as
       shell scripts.

</pre><h4><b>EXAMPLES</b></h4><pre>
       Determine whether an argument is a binary executable file:

           file -- "$1" | grep -q ':.*executable' &amp;&amp;
               printf "%s is executable.\n$1"

</pre><h4><b>RATIONALE</b></h4><pre>
       The <b>-f</b> option was omitted because the same effect can (and should) be obtained using the <u>xargs</u> utility.

       Historical  versions of the <u>file</u> utility attempt to identify the following types of files: symbolic link,
       directory, character special, block special, socket, <u>tar</u> archive, <u>cpio</u>  archive,  SCCS  archive,  archive
       library,  empty,  <u>compress</u>  output, <u>pack</u> output, binary data, C source, FORTRAN source, assembler source,
       <u>nroff</u>/<u>troff</u>/<u>eqn</u>/<u>tbl</u> source <u>troff</u> output, shell script, C shell script, English text, ASCII text,  various
       executables,  APL  workspace,  compiled terminfo entries, and CURSES screen images. Only those types that
       are reasonably well specified in POSIX or are directly related to  POSIX  utilities  are  listed  in  the
       table.

       Historical systems have used a ``magic file'' named <b><a href="file:/etc/magic">/etc/magic</a></b> to help identify file types. Because it is
       generally  useful  for  users  and  scripts  to be able to identify special file types, the <b>-m</b> flag and a
       portable format for user-created magic  files  has  been  specified.  No  requirement  is  made  that  an
       implementation  of  <u>file</u>  use this method of identifying files, only that users be permitted to add their
       own classifying tests.

       In addition, three options have been added to historical practice. The <b>-d</b> flag has been added  to  permit
       users to cause their tests to follow any default system tests. The <b>-i</b> flag has been added to permit users
       to test portably for regular files in shell scripts. The <b>-M</b> flag has been added to permit users to ignore
       any default system tests.

       The  POSIX.1‐2008  description  of  default  system  tests and the interaction between the <b>-d</b>, <b>-M</b>, and <b>-m</b>
       options did not clearly indicate that there were two types of ``default system tests''.  The  ``position-
       sensitive tests'' determine file types by looking for certain string or binary values at specific offsets
       in  the  file being examined. These position-sensitive tests were implemented in historical systems using
       the magic file described above.  Some of these tests are now built into the <u>file</u> utility itself  on  some
       implementations so the output can provide more detail than can be provided by magic files. For example, a
       magic file can easily identify a <b>core</b> file on most implementations, but cannot name the program file that
       dropped the core. A magic file could produce output such as:

           /home/dwc/core: ELF 32-bit MSB core file SPARC Version 1

       but by building the test into the <u>file</u> utility, you could get output such as:

           /home/dwc/core: ELF 32-bit MSB core file SPARC Version 1, from 'testprog'

       These  extended built-in tests are still to be treated as position-sensitive default system tests even if
       they are not listed in <b><a href="file:/etc/magic">/etc/magic</a></b> or any other magic file.

       The context-sensitive default system tests were always built into the <u>file</u> utility.  These  tests  looked
       for  language  constructs  in text files trying to identify shell scripts, C, FORTRAN, and other computer
       language source files, and even plain text files. With  the  addition  of  the  <b>-m</b>  and  <b>-M</b>  options  the
       distinction  between  position-sensitive  and  context-sensitive  default  system  tests became important
       because the order of testing is important. The context-sensitive system default  tests  should  never  be
       applied  before  any position-sensitive tests even if the <b>-d</b> option is specified before a <b>-m</b> option or <b>-M</b>
       option due to the high probability that the  context-sensitive  system  default  tests  will  incorrectly
       identify  arbitrary  text  files  as text files before position-sensitive tests specified by the <b>-m</b> or <b>-M</b>
       option would be applied to give a more accurate identification.

       Leaving the meaning of <b>-M</b> <b>-</b> and <b>-m</b> <b>-</b> unspecified  allows  an  existing  prototype  of  these  options  to
       continue  to  work in a backwards-compatible manner. (In that implementation, <b>-M</b> <b>-</b> was roughly equivalent
       to <b>-d</b> in POSIX.1‐2008.)

       The historical <b>-c</b> option was omitted as not particularly useful to users or portable  shell  scripts.  In
       addition,  a  reasonable  implementation  of the <u>file</u> utility would report any errors found each time the
       magic file is read.

       The historical format of the magic file  was  the  same  as  that  specified  by  the  Rationale  in  the
       ISO POSIX‐2:1993  standard  for the <u>offset</u>, <u>value</u>, and <u>message</u> fields; however, it used less precise type
       fields than the format specified by the current normative text. The new type field values are a  superset
       of the historical ones.

       The following is an example magic file:

           0  short     070707              cpio archive
           0  short     0143561             Byte-swapped cpio archive
           0  string    070707              ASCII cpio archive
           0  long      0177555             Very old archive
           0  short     0177545             Old archive
           0  short     017437              Old packed data
           0  string    \037\036            Packed data
           0  string    \377\037            Compacted data
           0  string    \037\235            Compressed data
           &gt;2 byte&amp;0x80 &gt;0                  Block compressed
           &gt;2 byte&amp;0x1f x                   %d bits
           0  string    \032\001            Compiled Terminfo Entry
           0  short     0433                Curses screen image
           0  short     0434                Curses screen image
           0  string    &lt;ar&gt;                System V Release 1 archive
           0  string    !&lt;arch&gt;\n__.SYMDEF  Archive random library
           0  string    !&lt;arch&gt;             Archive
           0  string    ARF_BEGARF          PHIGS clear text archive
           0  long      0x137A2950          Scalable OpenFont binary
           0  long      0x137A2951          Encrypted scalable OpenFont binary

       The  use  of  a  basic  integer  data  type is intended to allow the implementation to choose a word size
       commonly used by applications on that architecture.

       Earlier versions of this standard allowed for implementations with bytes other than eight bits, but  this
       has been modified in this version.

</pre><h4><b>FUTURE</b> <b>DIRECTIONS</b></h4><pre>
       None.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <u>ar</u>, <u>ls</u>, <u>pax</u>, <u>printf</u>

       The  Base Definitions volume of POSIX.1‐2017, <u>Table</u> <u>5-1</u>, <u>Escape</u> <u>Sequences</u> <u>and</u> <u>Associated</u> <u>Actions</u>, <u>Chapter</u>
       <u>8</u>, <u>Environment</u> <u>Variables</u>, <u>Section</u> <u>12.2</u>, <u>Utility</u> <u>Syntax</u> <u>Guidelines</u>

</pre><h4><b>COPYRIGHT</b></h4><pre>
       Portions of this text are reprinted and reproduced in electronic form from IEEE Std 1003.1-2017, Standard
       for Information  Technology  --  Portable  Operating  System  Interface  (POSIX),  The  Open  Group  Base
       Specifications  Issue  7, 2018 Edition, Copyright (C) 2018 by the Institute of Electrical and Electronics
       Engineers, Inc and The Open Group.  In the event of any discrepancy between this version and the original
       IEEE and The Open Group Standard, the original IEEE and The Open Group Standard is the referee  document.
       The original Standard can be obtained online at <a href="http://www.opengroup.org/unix/online.html">http://www.opengroup.org/unix/online.html</a> .

       Any  typographical  or formatting errors that appear in this page are most likely to have been introduced
       during  the  conversion  of  the  source  files  to  man  page  format.  To  report  such   errors,   see
       https://www.kernel.org/doc/man-pages/reporting_bugs.html .

IEEE/The Open Group                                   2017                                          <u><a href="../man1POSIX/FILE.1POSIX.html">FILE</a></u>(1POSIX)
</pre>
 </div>
</div></section>
</div>
</body>
</html>