<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>openqa-clone-job - creates a new job based on an existing job</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/openqa-client">openqa-client_4.6.1732034221.ae34b08ff-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       openqa-clone-job - creates a new job based on an existing job

</pre><h4><b>SYNOPSIS</b></h4><pre>
       Clones a job from the local or a remote openQA instance. Downloads all assets associated with the job
       (unless --skip-download is specified). Optionally settings can be modified.

         openqa-clone-job [OPTIONS] JOBREF [KEY=[VALUE] ...]

         # clones job 42 (and any existing parents) from "openqa.opensuse.org" to the local openQA instance
         # note: If job 42 is a parallel parent (e.g. a "server" job), its parallel children (e.g. "client"
         #       jobs) will be cloned as well.
         openqa-clone-job https://openqa.opensuse.org/t42
         openqa-clone-job --from https://openqa.opensuse.org/tests/42
         openqa-clone-job --from https://openqa.opensuse.org 42

         # clones job 42 (and any existing parents) from "openqa.opensuse.org" to the openQA instance "openqa.example.com"
         openqa-clone-job --skip-download --from https://openqa.opensuse.org --host openqa.example.com 42

         # clones job 42 (and any existing parents) within "openqa.opensuse.org" modifying some job settings
         openqa-clone-job --within-instance https://openqa.opensuse.org/t42 MAKETESTSNAPSHOTS=1 TEST+=:PR-123 FOOBAR=

         # clones job 42 including all of its direct children but excluding its chained parents
         openqa-clone-job --skip-chained-deps --clone-children https://openqa.opensuse.org/tests/42

         # clones the cluster attached to job 42 modifying job-specific settings to
         # test without interfering with production jobs
         openqa-clone-job --skip-chained-deps --within-instance https://openqa.opensuse.org/tests/42 _GROUP=0 WORKER_CLASS:client=,worker2 {TEST,BUILD}+=-my-test-boo123

</pre><h4><b>DESCRIPTION</b></h4><pre>
       Call with either a full URL pointing to a test job to clone from or one of both parameters "--from" or
       "--within-instance". The job ID can be specified as part of the URL or as its own parameter.

       API key and secret are read from "client.conf" if not specified via CLI arguments. The config file is
       checked for under "$OPENQA_CONFIG", "<a href="file:~/.config/openqa">~/.config/openqa</a>" and "/etc/openqa" in this order. It must look like
       this:

         [openqa.opensuse.org]
         key = 45ABCEB4562ACB04
         secret = 4BA0003086C4CB95
         [another.host]
         key = D7345DA7B9D86B3B
         secret = A98CDBA9C8DB87BD

       Any parent jobs (chained or parallel) are also cloned unless "--skip-deps" or "--skip-chained-deps" is
       specified. If "--skip-chained-deps" is specified published assets generated by parent jobs are downloaded
       to be directly used instead of generated.

       Keep in mind that by default any additionally specified job settings are NOT added to the also cloned
       parent jobs. Specify "--parental-inheritance" if this is wanted. It is also possible to specify the job a
       setting should be added to explicitly, e.g. "WORKER_CLASS:create_hpc=special-worker". In this example the
       setting "WORKER_CLASS" will only be set to the specified value for jobs where the setting "TEST" equals
       "create_hpc". For this keep in mind that the parameter parsing is executed in the order specified so
       changing the setting "TEST" should come after job-specific settings.

       Note that the child job is the one which has the "START_AFTER_TEST" or "PARALLEL_WITH" setting and the
       parent job is the one mentioned by that setting.

       Cloning directly chained dependencies ("START_DIRECTLY_AFTER_TEST") is NOT supported.

</pre><h4><b>OPTIONS</b></h4><pre>
       <b>--host</b> HOST
           Specifies the hostname of the target openQA instance (defaults to localhost).

           Assets  are still always downloaded to the local machine. When specifying a remote host make sure the
           assets are already there and use "--skip-download".

       <b>--from</b> HOST
           Specifies the hostname of the openQA instance to clone the job from (deduced from JOBREF if it  is  a
           URL).

       <b>--dir</b> DIR
           Specifies the directory to store test assets (defaults to $OPENQA_SHAREDIR/factory).

       <b>--skip-checks</b>
           Skips additional checks like maintenance update availability.

       <b>--skip-deps</b>
           Do NOT clone parent jobs (which is done by default).

       <b>--skip-chained-deps</b>
           Do NOT clone chained parent jobs (jobs specified via "START_AFTER_TEST").

           This  makes  the job use the downloaded HDD image instead of running the generator job again which is
           of course only possible if --host is the local machine.

       <b>--skip-download</b>
           Do NOT download assets. You need to ensure all required assets are provided yourself.

       <b>--ignore-missing-assets</b>
           Cloning a job will not fail if an asset is missing.

       <b>--clone-children</b>
           Clone all direct child jobs as well. By default, only parallel child jobs are cloned.

       <b>--max-depth</b>
           Specifies the max depth for cloning children. By default, only direct children are cloned. Use  0  to
           denote infinity.

       <b>--within-instance</b> HOST
           A  shortcut  for  "--skip-download  --from  HOST --host HOST" to clone a job within a local or remote
           instance.

       <b>--repeat</b> N
           Do the same clone operation N times; this can be useful for Statistical investigation. Example:

           openqa-clone-job  --skip-chained-deps  --repeat=50  --within-instance  \  https://openqa.opensuse.org
           123456

           Will create 50 clones of the same job.

       <b>--show-progress</b>
           Displays a progress bar when downloading assets.

       <b>--parental-inheritance</b>
           Provides parental job with settings specified via command line (they go to child job by default).

       <b>--export-command</b>
           Prints  an  `openqa-cli` command to create the jobs instead of creating them directly. This is useful
           to customize the API call or to review it before submitting.

       <b>--apikey</b> &lt;value&gt;
           Specifies the public key needed for API authentication.

       <b>--apisecret</b> &lt;value&gt;
           Specifies the secret key needed for API authentication.

       <b>--verbose,</b> <b>-v</b>
           Increases verbosity.

       <b>--help,</b> <b>-h</b>
           Prints help.

openQA 4.6.1732034221.ae34b08ff                    2025-01-23                                <u><a href="../man1/openqa-clone-job.1.html">openqa-clone-job</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>