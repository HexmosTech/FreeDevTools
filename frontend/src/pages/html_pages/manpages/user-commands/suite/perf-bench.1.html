<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>perf-bench - General framework for benchmark suites</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/linux-perf">linux-perf_6.14.0-28.28_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       perf-bench - General framework for benchmark suites

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <u>perf</u> <u>bench</u> [&lt;common options&gt;] &lt;subsystem&gt; &lt;suite&gt; [&lt;options&gt;]

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This <u>perf</u> <u>bench</u> command is a general framework for benchmark suites.

</pre><h4><b>COMMON</b> <b>OPTIONS</b></h4><pre>
       -r, --repeat=
           Specify number of times to repeat the run (default 10).

       -f, --format=
           Specify format style. Current available format styles are:

       <u>default</u>
           Default style. This is mainly for human reading.

           .ft C
           % perf bench sched pipe                      # with no style specified
           (executing 1000000 pipe operations between two tasks)
                   Total time:5.855 sec
                           5.855061 usecs/op
                           170792 ops/sec
           .ft

       <u>simple</u>
           This simple style is friendly for automated processing by scripts.

           .ft C
           % perf bench --format=simple sched pipe      # specified simple
           5.988
           .ft

</pre><h4><b>SUBSYSTEM</b></h4><pre>
       <u>sched</u>
           Scheduler and IPC mechanisms.

       <u>syscall</u>
           System call performance (throughput).

       <u>mem</u>
           Memory access performance.

       <u>numa</u>
           NUMA scheduling and MM benchmarks.

       <u>futex</u>
           Futex stressing benchmarks.

       <u>epoll</u>
           Eventpoll (epoll) stressing benchmarks.

       <u>internals</u>
           Benchmark internal perf functionality.

       <u>uprobe</u>
           Benchmark overhead of uprobe + BPF.

       <u>all</u>
           All benchmark subsystems.

   <b>SUITES</b> <b>FOR</b> <u><b>sched</b></u>
       <b>messaging</b>
           Suite for evaluating performance of scheduler and IPC mechanisms. Based on hackbench by Rusty
           Russell.

       <b>Options</b> <b>of</b> <b>messaging</b>

           -p, --pipe
               Use pipe() instead of socketpair()

           -t, --thread
               Be multi thread instead of multi process

           -g, --group=
               Specify number of groups

           -l, --nr_loops=
               Specify number of loops

       <b>Example</b> <b>of</b> <b>messaging</b>

               .ft C
               % perf bench sched messaging                 # run with default
               options (20 sender and receiver processes per group)
               (10 groups == 400 processes run)

                     Total time:0.308 sec

               % perf bench sched messaging -t -g 20        # be multi-thread, with 20 groups
               (20 sender and receiver threads per group)
               (20 groups == 800 threads run)

                     Total time:0.582 sec
               .ft

           <b>pipe</b>
               Suite for pipe() system call. Based on pipe-test-1m.c by Ingo Molnar.

       <b>Options</b> <b>of</b> <b>pipe</b>

           -l, --loop=
               Specify number of loops.

           -G, --cgroups=
               Names of cgroups for sender and receiver, separated by a comma. This is useful to check cgroup
               context switching overhead. Note that perf doesn’t create nor delete the cgroups, so users should
               make sure that the cgroups exist and are accessible before use.

       <b>Example</b> <b>of</b> <b>pipe</b>

               .ft C
               % perf bench sched pipe
               (executing 1000000 pipe operations between two tasks)

                       Total time:8.091 sec
                               8.091833 usecs/op
                               123581 ops/sec

               % perf bench sched pipe -l 1000              # loop 1000
               (executing 1000 pipe operations between two tasks)

                       Total time:0.016 sec
                               16.948000 usecs/op
                               59004 ops/sec

               % perf bench sched pipe -G AAA,BBB
               (executing 1000000 pipe operations between cgroups)
               # Running 'sched/pipe' benchmark:
               # Executed 1000000 pipe operations between two processes

                    Total time: 6.886 [sec]

                      6.886208 usecs/op
                        145217 ops/sec
               .ft

   <b>SUITES</b> <b>FOR</b> <u><b>syscall</b></u>
       <b>basic</b>
           Suite for evaluating performance of core system call throughput (both usecs/op and ops/sec metrics).
           This uses a single thread simply doing <a href="../man2/getppid.2.html">getppid</a>(2), which is a simple syscall where the result is not
           cached by glibc.

   <b>SUITES</b> <b>FOR</b> <u><b>mem</b></u>
       <b>memcpy</b>
           Suite for evaluating performance of simple memory copy in various ways.

       <b>Options</b> <b>of</b> <b>memcpy</b>

           -l, --size
               Specify size of memory to copy (default: 1MB). Available units are B, KB, MB, GB and TB (case
               insensitive).

           -f, --function
               Specify function to copy (default: default). Available functions are depend on the architecture.
               On x86-64, x86-64-unrolled, x86-64-movsq and x86-64-movsb are supported.

           -l, --nr_loops
               Repeat memcpy invocation this number of times.

           -c, --cycles
               Use perf’s cpu-cycles event instead of gettimeofday syscall.

           <b>memset</b>
               Suite for evaluating performance of simple memory set in various ways.

       <b>Options</b> <b>of</b> <b>memset</b>

           -l, --size
               Specify size of memory to set (default: 1MB). Available units are B, KB, MB, GB and TB (case
               insensitive).

           -f, --function
               Specify function to set (default: default). Available functions are depend on the architecture.
               On x86-64, x86-64-unrolled, x86-64-stosq and x86-64-stosb are supported.

           -l, --nr_loops
               Repeat memset invocation this number of times.

           -c, --cycles
               Use perf’s cpu-cycles event instead of gettimeofday syscall.

   <b>SUITES</b> <b>FOR</b> <u><b>numa</b></u>
       <b>mem</b>
           Suite for evaluating NUMA workloads.

   <b>SUITES</b> <b>FOR</b> <u><b>futex</b></u>
       <b>hash</b>
           Suite for evaluating hash tables.

       <b>wake</b>
           Suite for evaluating wake calls.

       <b>wake-parallel</b>
           Suite for evaluating parallel wake calls.

       <b>requeue</b>
           Suite for evaluating requeue calls.

       <b>lock-pi</b>
           Suite for evaluating futex lock_pi calls.

   <b>SUITES</b> <b>FOR</b> <u><b>epoll</b></u>
       <b>wait</b>
           Suite for evaluating concurrent epoll_wait calls.

       <b>ctl</b>
           Suite for evaluating multiple epoll_ctl calls.

   <b>SUITES</b> <b>FOR</b> <u><b>internals</b></u>
       <b>synthesize</b>
           Suite for evaluating perf’s event synthesis performance.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man1/perf.1.html">perf</a></b>(1)

perf                                               07/23/2025                                      <u><a href="../man1/PERF-BENCH.1.html">PERF-BENCH</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>