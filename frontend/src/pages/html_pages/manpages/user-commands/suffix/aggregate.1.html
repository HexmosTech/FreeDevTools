<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>aggregate - optimise a list of route prefixes to help make nice short filters</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/aggregate">aggregate_1.6-8_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       <b>aggregate</b> - optimise a list of route prefixes to help make nice short filters

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>aggregate</b> [-m max-length] [-o max-opt-length] [-p default-length] [-q] [-t] [-v]

</pre><h4><b>DESCRIPTION</b></h4><pre>
       Takes  a  list  of prefixes in conventional format on stdin, and performs two optimisations to attempt to
       reduce the length of the prefix list.

       The first optimisation is to remove any supplied prefixes which are superfluous because they are  already
       included  in  another  supplied  prefix. For example, 203.97.2.0/24 would be removed if 203.97.0.0/17 was
       also supplied.

       The second optimisation identifies adjacent prefixes that can be combined under a single,  shorter-length
       prefix.   For   example,  203.97.2.0/24  and  203.97.3.0/24  can  be  combined  into  the  single  prefix
       203.97.2.0/23.

</pre><h4><b>OPTIONS</b></h4><pre>
       <b>-m</b> <b>max-length</b>
              Sets the maximum prefix length for entries read from stdin <u>max_length</u> bits.  The  default  is  32.
              Prefixes with longer lengths will be discarded prior to processing.

       <b>-o</b> <b>max-opt-length</b>
              Sets  the  maximum  prefix  length  for  optimisation  to  <u>max-opt-length</u> bits. The default is 32.
              Prefixes with longer lengths will not be subject to optimisation.

       <b>-p</b> <b>default-length</b>
              Sets the default prefix length. There is no default; without this option a prefix without  a  mask
              length  is treated as invalid.  Use <b>-p</b> <b>32</b> <b>-m</b> <b>32</b> <b>-o</b> <b>32</b> to aggregate a list of host routes specified
              as bare addresses, for example.

       <b>-q</b>     Sets quiet mode -- instructs <b>aggregate</b> never to generate  warning  messages  or  other  output  on
              stderr.

       <b>-t</b>     Silently  truncate  prefixes  that  seem  to  have  an  inconsistent  prefix: e.g. an input prefix
              203.97.2.226/24 would  be  truncated  to  203.97.2.0/24.  Without  this  option  an  input  prefix
              203.97.2.226/24  would  not  be  accepted,  and  a  warning  about  the inconsistent mask would be
              generated.

       <b>-v</b>     Sets verbose mode. This changes the output format to display  the  source  line  number  that  the
              prefix  was  obtained  from,  together  with  a  preceding  "-"  to  indicate  a route that can be
              suppressed, or a "+" to indicate a shorter-prefix aggregate that was  added  by  <b>aggregate</b>  as  an
              adjacency optimisation. Note that verbose output continues even if -q is selected.
</pre><h4><b>DIAGNOSTICS</b></h4><pre>
       <b>Aggregate</b> exits 0 on success, and &gt;0 if an error occurs.

</pre><h4><b>EXAMPLES</b></h4><pre>
       The following list of prefixes:

         <b>193.58.204.0/22</b>
         <b>193.58.208.0/22</b>
         <b>193.193.160.0/22</b>
         <b>193.193.168.0/22</b>
         <b>193.243.164.0/22</b>
         <b>194.126.128.0/22</b>
         <b>194.126.132.0/22</b>
         <b>194.126.134.0/23</b>
         <b>194.151.128.0/19</b>
         <b>195.42.240.0/21</b>
         <b>195.240.0.0/16</b>
         <b>195.241.0.0/16</b>

       is optimised as followed by <b>aggregate</b> (output shown using the <u>-v</u> flag):

         <b>aggregate:</b> <b>maximum</b> <b>prefix</b> <b>length</b> <b>permitted</b> <b>will</b> <b>be</b> <b>24</b>
         <b>[</b>    <b>0]</b> <b>+</b> <b>193.58.204.0/21</b>
         <b>[</b>    <b>1]</b> <b>-</b> <b>193.58.204.0/22</b>
         <b>[</b>    <b>2]</b> <b>-</b> <b>193.58.208.0/22</b>
         <b>[</b>    <b>3]</b>   <b>193.193.160.0/22</b>
         <b>[</b>    <b>4]</b>   <b>193.193.168.0/22</b>
         <b>[</b>    <b>5]</b>   <b>193.243.164.0/22</b>
         <b>[</b>    <b>0]</b> <b>+</b> <b>194.126.128.0/21</b>
         <b>[</b>    <b>6]</b> <b>-</b> <b>194.126.128.0/22</b>
         <b>[</b>    <b>7]</b> <b>-</b> <b>194.126.132.0/22</b>
         <b>[</b>    <b>8]</b> <b>-</b> <b>194.126.134.0/23</b>
         <b>[</b>    <b>9]</b>   <b>194.151.128.0/19</b>
         <b>[</b>   <b>10]</b>   <b>195.42.240.0/21</b>
         <b>[</b>    <b>0]</b> <b>+</b> <b>195.240.0.0/15</b>
         <b>[</b>   <b>11]</b> <b>-</b> <b>195.240.0.0/16</b>
         <b>[</b>   <b>12]</b> <b>-</b> <b>195.241.0.0/16</b>

       Note  that 193.58.204.0/22 and 193.58.208.0/22 were combined under the single prefix 193.58.204.0/21, and
       194.126.134.0/23 was suppressed because it  was  included  in  194.126.132.0/22.  The  number  in  square
       brackets  at the beginning of each line indicates the original line number, or zero for new prefixes that
       were introduced by <b>aggregate.</b>

       The output without the <u>-v</u> flag is as follows:

         <b>193.58.204.0/21</b>
         <b>193.193.160.0/22</b>
         <b>193.193.168.0/22</b>
         <b>193.243.164.0/22</b>
         <b>194.126.128.0/21</b>
         <b>194.151.128.0/19</b>
         <b>195.42.240.0/21</b>
         <b>195.240.0.0/15</b>

</pre><h4><b>NOTES</b></h4><pre>
       <b>Aggregate</b> also understands the <u>a8</u><b>.</b><u>b8</u><b>.</b><u>c16</u> and <u>a8</u><b>.</b><u>b24</u>  formats:  the  address  <b>10.1.2.3</b>  is  equivalent  to
       <b>10.1.515</b> and <b>10.66051</b>.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <a href="../man1/aggregate-ios.1.html">aggregate-ios</a>(1)

</pre><h4><b>HISTORY</b></h4><pre>
       <b>Aggregate</b> was written by Joe Abley &lt;<a href="mailto:jabley@mfnx.net">jabley@mfnx.net</a>&gt;, and has been reasonably well tested. It is suitable
       for reducing customer prefix filters for production use without extensive hand-proving of results.

       Autoconf  bits were donated by Michael Shields &lt;<a href="mailto:michael.shields@mfn.com">michael.shields@mfn.com</a>&gt;.  The <b>-t</b> option was suggested by
       Robin Johnson &lt;<a href="mailto:robbat2@fermi.orbis-terrarum.net">robbat2@fermi.orbis-terrarum.net</a>&gt;, and the treatment of leading zeros on octet parsing was
       changed following comments from Arnold Nipper &lt;<a href="mailto:arnold@nipper.de">arnold@nipper.de</a>&gt;.

       An early version of <b>aggregate</b> would attempt to combine adjacent prefixes regardless of whether the  first
       prefix  lay  on  an  appropriate  bit  boundary or not (pointed out with great restraint by Robert Noland
       &lt;<a href="mailto:rnoland@2hip.net">rnoland@2hip.net</a>&gt;).

</pre><h4><b>BUGS</b></h4><pre>
       Common unix parsing of IPv4 addresses understands the representation of individual  octets  in  octal  or
       hexadecimal, following a "0" or "0x" prefix, respectively. That convention has been deliberately disabled
       here, since resources such as the IRR do not follow the convention, and confusion can result.

       For  extremely sensitive applications, judicious use of the <u>-v</u> option together with a pencil and paper is
       probably advisable.

Joe Abley                                        2001 November 2                                    <u><a href="../man1/AGGREGATE.1.html">AGGREGATE</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>