<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>rastream - stream block processor for argus(8) data.</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/argus-client">argus-client_3.0.8.2-6.2ubuntu5_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       <b>rastream</b> - stream block processor for <b><a href="../man8/argus.8.html">argus</a>(8)</b> data.

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>rastream</b>  [[<b>-M</b>  <u>splitmode</u>]  [<u>splitmode</u>  <u>options</u>]]  [<b>-f</b>  <u>file</u>  <u>processing</u> <u>program</u> -B secs] [<b>raoptions</b>] [<b>--</b>
       <u>filter-expression</u>]

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>Rastream</b> reads <b>argus</b> data from an <u>argus-data</u> source, and splits the  resulting  output  into  consecutive
       sections  of  records  based on size, count time, or flow event, writing the output into a set of output-
       files.

       <b>Rastream</b> provides the option to run a program against  the  output  files,  <b>seconds</b>  after  the  file  is
       understood  to  be  finished.   The  program  must be specified in a manner so that <b>rastream</b> can find it,
       either within the system $PATH, or provided as a full pathname.

       By default, <b>rastream</b> splits the stream by output file record count, putting 10,000 records of input  into
       each <b>argus</b> output file, or standard out, as needed.  The behavior is similar to the unix split.1 command.

       The  output  files'  name  consists of a prefix, which is specified using the <u>-w</u> <u>ra</u> <u>option</u>, and a suffix,
       which is created for each resulting file.  If no prefix is provided, then <b>rastream</b> will use  'x'  as  the
       default  prefix.  The suffix that is used is determined by the mode of operation.  When <b>rastream</b> is using
       the default count mode or the size mode, the suffix is a group of letters 'aa', ´ab´,  and  so  on,  such
       that  concatenating  the  output files in sorted order by file name produces the original input file.  If
       <b>rastream</b> will need to create more output files than are allowed by  the  default  suffix  strategy,  more
       letters  will be added, in order to accomodate the needed files.  When the mode is <b>time</b> mode, the default
       output filename suffix is '%Y.%m.%d.%h.%m.%s', which is used by strftime() to create an  output  filename
       that  is  time oriented.  This default is overrided by adding a '%' extension to the name provided on the
       commandline using the <u>-w</u> option.

       When standard out is specified, using <u>-w</u> <u>-</u>, <b>rastream</b> will output a single  <b>argus-stream</b>  with  START  and
       STOP argus management records inserted appropriately to indicate where the output is split.  See <b><a href="../man8/argus.8.html">argus</a>(8)</b>
       for more information on output stream formats.

       When  <b>rastream</b> is spliting on output record count (the default), the number of records is specified as an
       ordinal counter, the default is 10,000 records.  When <b>rastream</b> is spliting based on  the  maximum  output
       file size, the size is specified as bytes.  The scale of the bytes can be specified by appending 'b', 'k'
       and 'm' to the number provided.

       When  <b>rastream</b>  is  spliting  based on time, the time period is specified with the option, and can be any
       period based in seconds (s), minutes (m), hours (h), days (d),  weeks  (w),  months  (M)  or  years  (y).
       <b>Rastream</b>  will  create  and  modify  records  as required to split on prescribed time boundaries.  If any
       record spans a time boundary, the  record  is  split  and  the  metrics  are  adjusted  using  a  uniform
       distribution  model to distribute the statistics between the two records.  Care is taken to avoid records
       with zero packet and byte counts, that could result from roundoff error.

       When <b>rastream</b> is spliting based on flow event, the flow that acts as the event marker is specified  using
       a  standard  <b>ra</b>  filter  expression,  that is bounded by quotes (").  Records that preceed the first flow
       event in the data stream are written to the specified output file, and then new files are generated  with
       the  flow  event  record  being the first record of the new file.  This method will allow you to use wire
       events as triggers for spliting data.

</pre><h4><b>RASTREAM</b> <b>SPECIFIC</b> <b>OPTIONS</b></h4><pre>
       Rastream, like all ra based clients, supports a number  of  <b>ra</b>  <b>options</b>  including  remote  data  access,
       reading from multiple files and filtering of input argus records through a terminating filter expression.
       <b><a href="../man1/rastream.1.html">rastream</a>(1)</b> specific options are:

       <b>-a</b> <u>suffix</u> <u>length</u>
           Starting append suffix length. The default is 2 characters.

       <b>-B</b> <u>duration</u>
           Buffer hold time before processing.  This value is usually in the 5-15 second range and provides time
           for  rastream  to  sort  records  and schedule outputfile processing.  The number is derived from the
           larges FAR status interval of all the argus data sources encountered.

       <b>-f</b> <u>program</u>
           Post processing program. <b>rastream</b>, will execute this program just  after  closing  the  output  file,
           passing the full path to the closed output file as a parameter, using this convention:

              program -r /full/path/to/closed/file

           This allows you to post-process the output file in an automated fashion.

           Generally,  this  program  can do anything you like, such as aggregating and correcting flow records,
           labeling records for semantic enhancement, indexing the files, using programs like  rasqltimeindex(),
           and  compressing the files.  Traditionally, the program has been a shell-script, perl program, or php
           script, so that it can be easily modified, on the fly, but it can be any executable that  can  handle
           the "-r filename" parameter convention.  The program should provides its own accountability and error
           logging, so that you know that things are working as you expect.

           <b>rastream</b>  must  have  a  path  to the program, the program must be executable, and <b>rastream</b> must have
           permission to run the program for this strategy to be successful.

           An example rastream.sh is provided in the ./support/Config directory.

       <b>-M</b> <u>splitmode</u>
           Supported spliting modes are:
                  <b>count</b> <b>&lt;num&gt;</b>
                   <b>size</b> <b>&lt;size&gt;</b>
                   <b>time</b> <b>&lt;period&gt;</b>
                   <b>flow</b> <b>"filter-expression"</b>

       <b>-w</b> <u>filename</u>
           <b>Rastream</b> supports an extended <u>-w</u> option that allows for output record contents to  be  inserted  into
           the  output  filename.  Specified using '$' (dollar) notation, any printable field can be used.  Care
           should be taken to honor any shell escape requirements when specifying  on  the  command  line.   See
           <b><a href="../man1/ra.1.html">ra</a>(1)</b> for the list of printable fields.

           Another  extended  feature,  when  using <b>time</b> mode, <b>rastream</b> will process the supplied filename using
           <b><a href="../man3/strftime.3.html">strftime</a>(3)</b>, so that time fields can be inserted into the resulting output filename.

</pre><h4><b>INVOCATION</b></h4><pre>
       This invocation reads <b><a href="../man8/argus.8.html">argus</a>(8)</b> data from <b>inputfile</b> and splits the <b><a href="../man8/argus.8.html">argus</a>(8)</b> data stream  based  on  output
       file  size of no greater than 1 Megabyte.  The resulting output files have a prefix of <u>argus.</u>  and suffix
       that starts with 'aa'.  The single trailing '.' is significant.

          <b>rastream</b> -r inputfile -M size 1m -w argus.

       This invocation splits <b>inputfile</b> based on hard 10 minute time boundaries.  The resulting output files are
       created with a prefix of <u>/archive/%Y/%m/%d/argus.</u>  and the  suffix  is  <u>%H.%M.%S</u>.   The  values  will  be
       supplied based on the time in the record being written out.

          <b>rastream</b> -r * -M time 10m -w "/archive/%Y/%m/%d/argus.%H.%M.%S"

       This  invocation  splits  <b>inputfile</b> based on the argus source identifier.  The resulting output files are
       created with a prefix of <u>/archive/Source</u> <u>Identifier/argus.</u>  and the default suffix starting  with   "aa".
       The source identifier will be supplied based on the contents of the record being exported.

          <b>rastream</b> -r * -M time 10m -w "/archive/$srcid/argus."

       This  invocation  splits  <b>inputfile</b> based on a flow event marker.  The resulting output files are created
       with a prefix of 'outfile.' and the default suffix starting with  "aa".  Whenever a ping  to  a  specific
       host is seen in the stream, a new output file is generated.

          <b>rastream</b> -r * -M flow "echo and host 1.2.3.4" -w outfile.

</pre><h4><b>COPYRIGHT</b></h4><pre>
       Copyright (c) 2000-2016 QoSient. All rights reserved.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man1/ra.1.html">ra</a>(1),</b> <b><a href="../man5/rarc.5.html">rarc</a>(5),</b> <b><a href="../man8/argus.8.html">argus</a>(8),</b>

</pre><h4><b>AUTHORS</b></h4><pre>
       Carter Bullard (<a href="mailto:carter@qosient.com">carter@qosient.com</a>).

rastream 3.0.8                                   12 August 2003                                      <u><a href="../man1/RASTREAM.1.html">RASTREAM</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>