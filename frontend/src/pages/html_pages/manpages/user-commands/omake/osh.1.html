<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>omake, osh - make-like build utility and its shell</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/omake">omake_0.10.7-1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       omake, osh - make-like build utility and its shell

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>omake</b> [<u>OPTION</u>...] [<u>TARGET</u>...]
       <b>osh</b> [<u>OPTION</u>...]

</pre><h4><b>DESCRIPTION</b></h4><pre>
       OMake  constructs projects in a way similar to <b><a href="../man1/make.1.html">make</a></b>(1) in particular GNU-Make.  When OMake needs to spawn
       a shell it uses its own shell, Osh.  The shell can also be used standalone either as omake --shell or  as
       <b><a href="../man1/osh.1.html">osh</a></b>(1) if the appropriate link has been installed.

   <b>OMake</b>
       OMake  is  designed  for  building  projects that have source files in several directories.  Projects are
       normally specified using an <u>OMakefile</u> in each of the project directories, and an <u>OMakeroot</u>  file  in  the
       root  directory  of  the  project.   The <u>OMakeroot</u> file specifies general build rules, and the <u>OMakefile</u>s
       specify the build parameters specific to each of the subdirectories.   When  OMake  runs,  it  walks  the
       configuration  tree,  evaluating  rules  from  all of the <u>OMakefile</u>s.  The project is then built from the
       entire collection of build rules.

   <b>Osh</b>
       OMake also includes the standalone command-line interpreter <b>osh</b> that can be used as an interactive shell.
       This shell uses the same syntax, and provides the same features on all  platforms  that  OMake  supports,
       including Win32.

       See also the OMake Manual, chapters 11, “Shell commands” and 15, “The Osh shell”.

</pre><h4><b>OPTIONS</b></h4><pre>
       The  options  are  presented  in  functionally  related  sections.   Within  these the options are sorted
       alphabetically in case-insensitive order.

       Options marked with ‘⟨N⟩’ can be negated by prefixing them with ‘--no’ as, e.g., <b>--no-S</b>  or  <b>--no--print-</b>
       <b>status</b>.  Note the conserved inner double dash of the latter, though.

   <b>Build</b> <b>Control</b>
           <b>--absname</b>
                  Enforce that filenames always expand to their absolute pathnames.  ⟨N⟩

                  <b>Note:</b> This is an experimental option.  It may become deprecated.

           <b>--all-dependencies</b>
                  If  the  options  <b>--print-dependencies</b>  or  <b>--show-dependencies</b>  are  given  print  transitive
                  dependencies.  This means that all dependencies will be  printed  recursively.   Otherwise  no
                  effect.  ⟨N⟩

           <b>--configure</b>
                  Recompute  static.  sections  of  the  included  omake  files,  instead of trusting the cached
                  results.  ⟨N⟩

           <b>--depend</b>
                  Do not trust the cached dependency information.  This will force files  to  be  rescanned  for
                  dependency information.  ⟨N⟩

           <b>--flush-includes</b>
                  Do not trust cached <u>*.omc</u> files.  ⟨N⟩

           <b>-j</b> <u>JOB-SPEC</u>
                  <u>JOB-SPEC</u> is either the maximum number of jobs to run in parallel.

                  Or,  <u>JOB-SPEC</u>  specifies  servers  for  remote  execution  of  commands in the form of a colon
                  separated list of <u>SERVER-NAME</u>=<u>NUMBER-OF-JOBS</u> pairs.  For example, the option

                      -j 2:small.host.org=1:large.host.org=4

                  would specify that up to 2 jobs can be executed locally, 1 on the server small.host.org and  4
                  on large.host.org.  Each remote server must use the same filesystem location for the project.

                  Remote  execution  is  currently  an experimental feature.  Remote filesystems like NFS do not
                  provide adequate file consistency for this to work.

           <b>-k</b>     Do not stop when an error occurs; continue to build as much of the project as possible.   This
                  option is implied by <b>-p</b> and <b>-P</b>.  ⟨N⟩

                  Mnemonic: “keep on making”.

           <b>-n</b>     Print commands, but do not execute them.  ⟨N⟩

                  Mnemonic: “no operation”.

           <b>-P</b>     Keep on polling the filesystem for changes “forever”; implies <b>-k</b> and <b>-p</b>.  ⟨N⟩

           <b>-p</b>     Watch the filesystem for changes, and continue the build until it succeeds.  If this option is
                  specified,  OMake  will  restart  the  build  whenever source files are modified.  This option
                  implies <b>-k</b>.  ⟨N⟩

                  Mnemonic: “poll filesystem”.

           <b>--print-dependencies</b>
                  Collect and print dependency information for the <u>TARGET</u>s on the command line.  ⟨N⟩

           <b>--project</b>
                  Ignore the current directory and build the project.  ⟨N⟩

           <b>-R</b>     Ignore the current directory and build the project from its root directory.  When OMake is run
                  in a subdirectory of a project and no explicit targets are given on the command line, it would
                  normally only  build  files  within  the  current  directory  and  its  subdirectories.   More
                  precisely: it builds all the .DEFAULT targets in the current directory and its subdirectories.
                  If  the  <b>-R</b>  option  is  specified, the build is performed as if OMake were run in the project
                  root.

                  In other words, with the <b>-R</b> option all the relative targets specified on the command line will
                  be taken relative to the project root instead of relative to the current directory.   When  no
                  targets  are  given on the command line, all the .DEFAULT targets in the project will be built
                  regardless of the current directory.  ⟨N⟩

                  Mnemonic: “root build”.

           <b>--show-dependencies</b> <u>TARGET</u>
                  Show dependencies (only) if <u>TARGET</u> is built.

           <b>-t</b>     Update the OMake database to force all target files of the project are considered  up-to-date.
                  ⟨N⟩

           <b>-U</b>     Do not trust the dependency cache or cached <u>OMakefiles</u>.  This will force the entire project to
                  be rebuilt.  ⟨N⟩

           <b>--verbose-dependencies</b>
                  If  either  one of the options <b>--print-dependencies</b> or <b>--show-dependencies</b> is in effect, print
                  transitive dependencies.  That is, print all dependencies  recursively.   If  neither  of  the
                  above options is specified, this option has no effect.  ⟨N⟩

           <b>-warn-error</b>
                  Treat warnings as errors.  ⟨N⟩

           <b>-Wdeclare</b>
                  Warn about undeclared variables.  ⟨N⟩

   <b>Output</b>
           <b>-o</b> <u>SHORT-OPTION</u>...
                  Short  output  options  alias  the  functionality of some options or combinations thereof.  In
                  general, an uppercase character turns the option on, whereas a lowercase character  turns  the
                  option off.  <u>SHORT-OPTION</u> is one of following letters.

                  <b>0</b>   Equivalent to

                          -s --output-only-errors --no-progress

                      This  option  specifies  that  omake  should be as quiet as possible.  If any errors occur
                      during the build,  the  output  is  delayed  until  the  build  terminates.   Output  from
                      successful commands is discarded.

                  <b>1</b>   Equivalent to

                          -S --progress --output-only-errors

                      This  is  a  slightly  more relaxed version of “quiet” output.  The output from successful
                      commands is discarded.  The output from failed commands is printed immediately  after  the
                      command  complete.   The  output from failed commands is displayed twice: once immediately
                      after the command completes, and again when  the  build  completes.   A  progress  bar  is
                      displayed so that you know when the build is active.  Include the <b>-p</b> option if you want to
                      turn off the progress bar (for example omake -o 1p).

                  <b>2</b>   Equivalent to

                          --progress --output-postpone

                      The  is  even  more  relaxed,  output  from successful commands is printed.  This is often
                      useful for deinterleaving the output when using option <b>-j</b>.

                  <b>P</b>  (uppercase)
                      Equivalent to <b>--progress</b>.

                  <b>p</b>  (lowercase)
                      Equivalent to <b>--no--progress</b>.

                  <b>S</b>  (uppercase)
                      Equivalent to <b>-S</b>.

                  <b>s</b>  (lowercase)
                      Equivalent to <b>--no-S</b>.

                  <b>W</b>  (uppercase)
                      Equivalent to <b>-w</b>.

                  <b>w</b>  (lowercase)
                      Equivalent to <b>--no-w</b>.

                  <b>X</b>  (uppercase)
                      Equivalent to <b>--print-exit</b>.

                  <b>x</b>  (lowercase)
                      Equivalent to <b>--no-print-exit</b>.

           <b>--output-at-end</b>
                  The output of the failed commands will be printed after OMake has finished.  Off  by  default,
                  unless <b>-k</b> is enabled (directly or via <b>-p</b>/<b>-P</b>).  ⟨N⟩

           <b>--output-normal</b>
                  Relay  the  output  of  the rule commands to the OMake output right away.  This is the default
                  when no <b>--output-postpone</b> and no <b>--output-only-errors</b> flags are given.  ⟨N⟩

           <b>--output-only-errors</b>
                  Same as <b>--output-postpone</b>, but postponed output will only be printed for commands that fail.

                  This can be useful in reducing unwanted output so that the user can concentrate on any errors.
                  ⟨N⟩

           <b>--output-postpone</b>
                  Postpone printing command output until a rule terminates.  Then print it as a single block.

                  This is useful in combination with the <b>-j</b> option, where the output  of  multiple  subprocesses
                  can be garbled.  The diversion is printed as a single coherent unit.  ⟨N⟩

           <b>--print-exit</b>
                  Print the exit codes of all commands that have been run.  ⟨N⟩

           <b>--print-status</b>
                  Print status lines (starting with ‘+’ or ‘-’).  This is the default setting.  ⟨N⟩

           <b>--progress</b>
                  Print  a  progress  indicator;  enabled by default if <u>stdout</u> is a terminal and disabled if the
                  output has been redirected.  ⟨N⟩

           <b>-S</b>     Do not print commands as they are executed unless they produce any output or they fail.   This
                  is the default.  ⟨N⟩

           <b>-s</b>     Never print commands before they are executed.  ⟨N⟩

                  Mnemonic: “silent”.

           <b>--verbose</b>
                  Switch on very verbose output.  This option is equivalent to

                      --no-S --print-status --print-exit VERBOSE=true

           <b>-w</b>     Print  the  directory  in  “make  format” as commands are executed.  This is mainly useful for
                  editors that expect make-style directory information for determining the location  of  errors.
                  ⟨N⟩

   <b>Cache</b> <b>Management</b>
           <b>--force-dotomake</b>
                  Always use the directory <u>$HOME/.omake</u> for <u>*.omc</u>-cache files.  ⟨N⟩

           <b>--dotomake</b> <u>DIRECTORY</u>
                  Use the specified <u>DIRECTORY</u> in place of <u>$HOME/.omake</u> for the storage of <u>*.omc</u>-files.

           <b>--save-interval</b> <u>DURATION</u>
                  Save the build DB (<u>.omakedb</u>) every <u>DURATION</u> seconds (0 disables, default: 60).

   <b>Shell</b> <b>Related</b>
           <b>-c</b> <u>COMMAND</u>
                  Execute <u>COMMAND</u>.

           <b>-i</b>     Treat the session as interactive.  ⟨N⟩

           <b>--shell</b>
                  Run the OMake shell: <b>osh</b>.  ⟨N⟩

   <b>Debugging</b>
           <b>-allow-exceptions</b>
                  Do  not  catch  top-level  exceptions.  This option is useful if running with OCAMLRUNPARAM=b.
                  ⟨N⟩

           <b>-debug-active-rules</b>
                  Debug active rules.  ⟨N⟩

           <b>-debug-ast-lex</b>
                  Print tokens as they are scanned.  ⟨N⟩

           <b>-debug-build</b>
                  Display debugging information during the build.  ⟨N⟩

           <b>-debug-cache</b>
                  Display cache debugging information.  ⟨N⟩

           <b>-debug-db</b>
                  Debug the file database.  ⟨N⟩

           <b>-debug-deps</b>
                  Display dependency information as scanned.  ⟨N⟩

           <b>-debug-eval</b>
                  Debug the evaluator.  ⟨N⟩

           <b>-debug-exec</b>
                  Display execution debugging information.  ⟨N⟩

           <b>-debug-hash</b>
                  Show Lm_hash statistics.  ⟨N⟩

           <b>-debug-implicit</b>
                  Display debugging information for implicit rule selection.  ⟨N⟩

           <b>-debug-lex</b>
                  Debug the lexer.  ⟨N⟩

           <b>-debug-lexgen</b>
                  Debug the lexer generator.  ⟨N⟩

           <b>-debug-notify</b>
                  Debug the FAM (<b>-p</b> filesystem watch) operations.  ⟨N⟩

           <b>-debug-parse</b>
                  Debug the parser.  ⟨N⟩

           <b>-debug-parsegen</b>
                  Debug the parser generator.  ⟨N⟩

           <b>-debug-parsing</b>
                  Debug OMake parsing operations.  ⟨N⟩

           <b>-debug-pos</b>
                  Print source position information on error.  ⟨N⟩

           <b>-debug-remote</b>
                  Debug remote execution.  ⟨N⟩

           <b>-debug-rule</b>
                  Display debugging information about rule execution.  ⟨N⟩

           <b>-debug-scanner</b>
                  Display debugging information for scanner selection.  ⟨N⟩

           <b>-debug-shell</b>
                  Debug shell operations.  ⟨N⟩

           <b>-debug-thread</b>
                  Show thread operations.  ⟨N⟩

           <b>-extended-rusage</b>
                  Print more about resource usage.  ⟨N⟩

           <b>-instrument</b>
                  Do instrument functions.  ⟨N⟩

           <b>-print-ast</b>
                  Print the AST after parsing.  ⟨N⟩

           <b>-print-files</b>
                  Print the files as they are read.  ⟨N⟩

           <b>-print-ir</b>
                  Print the IR.  ⟨N⟩

           <b>-print-loc</b>
                  Also print locations.  ⟨N⟩

           <b>-trace-pos</b>
                  Trace the program execution.  ⟨N⟩

           <b>-print-rules</b>
                  Print the rules after evaluation.  ⟨N⟩

   <b>Miscellaneous</b>
           <b>--install</b>
                  Install default files <u>OMakefile</u> and <u>OMakeroot</u> of an OMake project into the current  directory.
                  This is typically done only once to start an OMake project in the current directory.  ⟨N⟩

           <b>--install-all</b>
                  In  addition  to installing the default files <u>OMakefile</u> and <u>OMakeroot</u> of an OMake project into
                  the current directory install  default  <u>OMakefile</u>s  into  each  subdirectory  of  the  current
                  directory.   <b><a href="../man1/cvs.1.html">cvs</a></b>(1)  rules  are  used  for  filtering  the  subdirectory  list.   For example,
                  <u>OMakefile</u>s are not copied into directories called CVS, RCCS, etc.  ⟨N⟩

           <b>--install-force</b>
                  Normally, OMake will prompt before it overwrites any existing <u>OMakefile</u>.  If  this  option  is
                  given, all files are overwritten without prompting; implies <b>--install</b>.  ⟨N⟩

           <b>--help</b> Display help message and exit.

           <b>--help-all</b>
                  Display help message for all options and exit.

           <b>--help-debug</b>
                  Display help message just for the debugging-related options and exit.

           <b>--server</b> <u>SERVER-NAME</u>
                  Run as a remote server called <u>SERVER-NAME</u>.

           <b>--version</b>
                  Print the version string and the default library directory then exit.

</pre><h4><b>EXIT</b> <b>STATUS</b></h4><pre>
       0   No problems; everything went well.

       1   Build failure caused by a program with non-zero exit code.

       2   Not  a  build-related error, for example a syntax error in one of the files that constitute the OMake
           project.

       3   Bogus command-line option.

</pre><h4><b>ENVIRONMENT</b></h4><pre>
       <u>OMAKEFLAGS</u>
              If defined, <u>OMAKEFLAGS</u> should contain a set of options  exactly  as  they  are  specified  on  the
              command line.

       <u>OMAKELIB</u>
              If  defined, <u>OMAKELIB</u> refers to the installed location of the OMake standard library.  This is the
              directory that contains <u>Pervasives.om</u> etc.  On a Unix system,  this  is  often  <u>/usr/lib/omake</u>  or
              <u>/usr/local/lib/omake</u>, and on Win32 systems it is often <u>c:\Program</u> <u>Files\OMake\lib</u>.

              If  not  defined,  OMake  uses  the default configured location, which can be inquired with option
              <b>--version</b>.

              Normally, this variable should not be set.

</pre><h4><b>FILES</b></h4><pre>
       <u>OMakeroot</u>
              This file is required; it serves to identify the project root, and it contains code that  sets  up
              the project.

       <u>OMakefile</u>
              Any project-specific configuration lives in the <u>OMakefile</u>s.

       <u>.om</u>    Conventional filename extension for OMake “library” files.

       <u>.omc</u>   For  performance  OMake  compiles all OMake-source files on the fly.  Compiled OMake files receive
              extension <u>.omc</u>.

</pre><h4><b>EXAMPLES</b></h4><pre>
   <b>OMake</b>
       •   This is an almost minimal <u>OMakeroot</u> file.
               ##  Setup for building a C- or C++-project.
               open build/C

               ##  Define according our configuration.
               DefineCommandVars()

               ##  Include the OMakefile in this directory.
               .SUBDIRS: .

       •   Small <u>OMakefile</u> file to build the famous “Hello, world!” example.
               ##  Define target-source relationship of a C-program.
               CProgram(hello, hello) # we can be extension agnostic

               ##  Define the default (and only) target.
               .DEFAULT: hello$(EXE)

   <b>Osh</b>
       •   Call <b><a href="../man1/date.1.html">date</a>(1)</b> with some options via OMake.
               $ omake --shell -c 'date --universal --iso-8601=seconds'
               2021-11-20T14:52:10+00:00

       •   Call <b><a href="../man1/update.1.html">update</a>(1)</b> via Osh.
               $ osh -c uptime
                15:54:03 up  6:41,  1 user,  load average: 0.02, 0.04, 0.11

       •   Interactive use.
               $ osh
               % uname --kernel-release --kernel-version
               5.10.0-9-amd64 #1 SMP Debian 5.10.70-1 (2021-09-30)
               % ^D
               $

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man1/make.1.html">make</a></b>(1), <b><a href="../man1/sh.1.html">sh</a></b>(1).

                                                   2021-11-17                                           <u><a href="../man1/OMAKE.1.html">OMAKE</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>