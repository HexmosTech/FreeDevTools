<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ndctl-clear-errors - clear all errors (badblocks) on the given namespace</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/ndctl">ndctl_77-2.2ubuntu2_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       ndctl-clear-errors - clear all errors (badblocks) on the given namespace

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <u>ndctl</u> <u>clear-errors</u> &lt;namespace&gt; [&lt;options&gt;]

</pre><h4><b>DESCRIPTION</b></h4><pre>
       A namespace may have one or more <u>media</u> <u>errors</u>, either known to the kernel or in a latent state. These
       error locations, or <u>badblocks</u> can cause poison consumption events if read in an unsafe manner.

       Moreover, these badblocks also indicate that due to media corruption, any data that may have been in
       these locations has been unrecoverably lost.

       Normally, in the presence of such errors, the administrator is expected to recover the data from out of
       band means (such as backups), destroy the namespace, recreate it, and then restore the data. When the
       data is re-written, the writes will allow any errors to be cleared as they are encountered. In such a
       workflow, one should <b>never</b> need to use the <u>clear-errors</u> command.

       However, there may be special use cases, where the data currently on the namespace does not matter - for
       example, if a <u>devdax</u> mode namespace is being prepared for use as <u>system-ram</u>. In such cases, it may be
       desirable to clear any errors on the namespace prior to switching its mode to prevent disruptive machine
       checks due to poison consumption.

           <b>Note</b>

           <b>Only</b> use this command when the data on the namespace is immaterial. For any blocks that are cleared
           via this command, any data on the blocks in question will be lost, and replaced with content that is
           implementation (platform) defined, and unpredictable.

           <b>Warning</b>

           This is a DANGEROUS command, and should only be used after fully understanding its implications and
           consequences. This WILL erase your data.

       For namespaces in one of <u>fsdax</u> or <u>devdax</u> modes, this command will only consider the <u>data</u> area for error
       clearing. Namespace metadata, such as info-blocks, will not be touched. For namespaces in <u>raw</u> mode, the
       full available capacity of the namespace is considered for error clearing. Namespaces that are in <u>sector</u>
       mode are not supported, and will be skipped.

           <b>Note</b>

           It is expected that the command is run with the namespace <u>enabled</u>. A namespace in the <u>disabled</u> state
           will appear as, and will be treated as a <u>raw</u> namespace, and error clearing will be performed for the
           full available capacity of the namespace, including any potential metadata areas. If there happen to
           be errors in the metadata area, clearing them may result in unpredictable outcomes. You have been
           warned!

       Known errors are ones that the kernel has encountered before, either via a previous scrub, or by an
       attempted read from those locations. These can be listed by running <u>ndctl</u> <u>list</u> <u>--media-errors</u> for a given
       namespace. Latent errors, as the name indicates, are unknown to the kernel. These can be found by running
       a scrub operation on the NVDIMMs in question. By default, the ndctl-clear-errors command only clears
       known errors. This can be overridden using the <u>--scrub</u> option to clear <b>all</b> errors.

           <b>Note</b>

           If a scrub is in progress when the command is called, it will unconditionally wait for it to
           complete.

</pre><h4><b>EXAMPLES</b></h4><pre>
       Clear errors on namespace 0.0

           ndctl clear-errors namespace0.0

       Clear errors on all namespaces belonging to region1, including scrubbing for latent errors

           ndctl clear-errors --scrub --region=region1 all

</pre><h4><b>OPTIONS</b></h4><pre>
       -s, --scrub
           Perform a <u>scrub</u> on the bus prior to clearing errors. This allows for the clearing of any latent media
           errors in addition to errors the kernel already knows about.

           <b>Note</b>

           This will cause the command to start and wait for a full scrub, and this can potentially be a very
           long-running operation.

       -v, --verbose
           Emit debug messages.

       -r, --region=
           A <u>regionX</u> device name, or a region id number. Restrict the operation to the specified region(s). The
           keyword <u>all</u> can be specified to indicate the lack of any restriction, however this is the same as not
           supplying a --region option at all.

       -b, --bus=
           A bus id number, or a provider string (e.g. "ACPI.NFIT"). Restrict the operation to the specified
           bus(es). The keyword <u>all</u> can be specified to indicate the lack of any restriction, however this is
           the same as not supplying a --bus option at all.

</pre><h4><b>COPYRIGHT</b></h4><pre>
       Copyright Â© 2016 - 2022, Intel Corporation. License GPLv2: GNU GPL version 2
       <a href="http://gnu.org/licenses/gpl.html">http://gnu.org/licenses/gpl.html</a>. This is free software: you are free to change and redistribute it.
       There is NO WARRANTY, to the extent permitted by law.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <a href="../man1/ndctl-start-scrub.1.html">ndctl-start-scrub</a>(1), <a href="../man1/ndctl-list.1.html">ndctl-list</a>(1)

ndctl                                              2024-11-01                              <u><a href="../man1/NDCTL-CLEAR-ERRORS.1.html">NDCTL-CLEAR-ERRORS</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>