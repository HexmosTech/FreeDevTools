<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>barman-cloud-wal-restore - Barman-cloud Commands</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/barman-cli-cloud">barman-cli-cloud_3.12.1-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       barman-cloud-wal-restore - Barman-cloud Commands

       <b>Synopsis</b>

          barman-cloud-wal-restore
                          [ { -V | --version } ]
                          [ --help ]
                          [ { -v | --verbose } ]
                          [ { -q | --quiet } ]
                          [ { -t | --test } ]
                          [ --cloud-provider { aws-s3 | azure-blob-storage | google-cloud-storage } ]
                          [ --endpoint-url ENDPOINT_URL ]
                          [ { -P | --aws-profile } AWS_PROFILE ]
                          [ --read-timeout READ_TIMEOUT ]
                          [ --azure-credential { azure-cli | managed-identity } ]
                          [ --no-partial ]
                          DESTINATION_URL SERVER_NAME WAL_NAME WAL_DEST

       <b>Description</b>

       The  <b>barman-cloud-wal-restore</b> script functions as the <b>restore_command</b> for retrieving WAL files from cloud
       storage and placing them directly into a Postgres standby server, bypassing the Barman server.

       This script is used to download WAL files that were previously archived with the <b>barman-cloud-wal-archive</b>
       command. Disable automatic download of <b>.partial</b> files by calling <b>--no-partial</b> option.

       <b>IMPORTANT:</b>
          On the target Postgres node, when <b>pg_wal</b> and the spool directory are on the same filesystem, files are
          moved via renaming, which is faster than copying and  deleting.  This  speeds  up  serving  WAL  files
          significantly. If the directories are on different filesystems, the process still involves copying and
          deleting, so there's no performance gain in that case.

       <b>NOTE:</b>
          For GCP, only authentication with <b>GOOGLE_APPLICATION_CREDENTIALS</b> env is supported.

       <b>Parameters</b>

       <b>SERVER_NAME</b>
              Name of the server that will have WALs restored.

       <b>DESTINATION_URL</b>
              URL of the cloud destination, such as a bucket in AWS S3. For example: <b>s3://bucket/path/to/folder</b>.

       <b>WAL_NAME</b>
              The value of the '%f' keyword (according to <b>restore_command</b>).

       <b>WAL_DEST</b>
              The value of the '%p' keyword (according to <b>restore_command</b>).

       <b>-V</b> <b>/</b> <b>--version</b>
              Show version and exit.

       <b>--help</b> show this help message and exit.

       <b>-v</b> <b>/</b> <b>--verbose</b>
              Increase output verbosity (e.g., <b>-vv</b> is more than <b>-v</b>).

       <b>-q</b> <b>/</b> <b>--quiet</b>
              Decrease output verbosity (e.g., <b>-qq</b> is less than <b>-q</b>).

       <b>-t</b> <b>/</b> <b>--test</b>
              Test cloud connectivity and exit.

       <b>--cloud-provider</b>
              The cloud provider to use as a storage backend.

              Allowed options are:

              • <b>aws-s3</b>.

              • <b>azure-blob-storage</b>.

              • <b>google-cloud-storage</b>.

       <b>--no-partial</b>
              Do not download partial WAL files

       <b>Extra</b> <b>options</b> <b>for</b> <b>the</b> <b>AWS</b> <b>cloud</b> <b>provider</b>

       <b>--endpoint-url</b>
              Override default S3 endpoint URL with the given one.

       <b>-P</b> <b>/</b> <b>--aws-profile</b>
              Profile name (e.g. <b>INI</b> section in AWS credentials file).

       <b>--profile</b> <b>(deprecated)</b>
              Profile name (e.g. <b>INI</b> section in AWS credentials file) - replaced by <b>--aws-profile</b>.

       <b>--read-timeout</b>
              The  time in seconds until a timeout is raised when waiting to read from a connection (defaults to
              <b>60</b> seconds).

       <b>Extra</b> <b>options</b> <b>for</b> <b>the</b> <b>Azure</b> <b>cloud</b> <b>provider</b>

       <b>--azure-credential</b> <b>/</b> <b>--credential</b>
              Optionally specify the type of credential to use when authenticating with Azure. If  omitted  then
              Azure  Blob  Storage  credentials  will  be  obtained  from  the environment and the default Azure
              authentication flow will be  used  for  authenticating  with  all  other  Azure  services.  If  no
              credentials  can  be found in the environment then the default Azure authentication flow will also
              be used for Azure Blob Storage.

              Allowed options are:

              • <b>azure-cli</b>.

              • <b>managed-identity</b>.

</pre><h4><b>AUTHOR</b></h4><pre>
       EnterpriseDB

</pre><h4><b>COPYRIGHT</b></h4><pre>
       © Copyright EnterpriseDB UK Limited 2011-2024

3.12                                              Dec 09, 2024                       <u><a href="../man1/BARMAN-CLOUD-WAL-RESTORE.1.html">BARMAN-CLOUD-WAL-RESTORE</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>