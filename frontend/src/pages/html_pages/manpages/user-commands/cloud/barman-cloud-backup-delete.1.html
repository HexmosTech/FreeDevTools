<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>barman-cloud-backup-delete - Barman-cloud Commands</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/barman-cli-cloud">barman-cli-cloud_3.12.1-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       barman-cloud-backup-delete - Barman-cloud Commands

       <b>Synopsis</b>

          barman-cloud-backup-delete
                          [ { -V | --version } ]
                          [ --help ]
                          [ { -v | --verbose } ]
                          [ { -q | --quiet } ]
                          [ { -t | --test } ]
                          [ --cloud-provider { aws-s3 | azure-blob-storage | google-cloud-storage } ]
                          [ --endpoint-url ENDPOINT_URL ]
                          [ { -r | --retention-policy } RETENTION_POLICY ]
                          [ { -m | --minimum-redundancy } MINIMUM_REDUNDANCY ]
                          [ { -b | --backup-id } BACKUP_ID]
                          [ --dry-run ]
                          [ { -P | --aws-profile } AWS_PROFILE ]
                          [ --read-timeout READ_TIMEOUT ]
                          [ --azure-credential { azure-cli | managed-identity } ]
                          [--batch-size DELETE_BATCH_SIZE]
                          SOURCE_URL SERVER_NAME

       <b>Description</b>

       The  <b>barman-cloud-backup-delete</b>  script  is  used  to  delete  one  or  more  backups  created  with  the
       <b>barman-cloud-backup</b> command from cloud storage and to remove the associated WAL files.

       Backups  can  be   specified   for   deletion   either   by   their   backup   ID   (as   obtained   from
       <b>barman-cloud-backup-list</b>)  or  by  a retention policy. Retention policies mirror those used by the Barman
       server, deleting all backups that are not required to  meet  the  specified  policy.  When  a  backup  is
       deleted, any unused WAL files associated with that backup are also removed.

       WALs are considered unused if:

       • The WALs predate the begin_wal value of the oldest remaining backup.

       • The WALs are not required by any archival backups stored in the cloud.

       <b>NOTE:</b>
          For GCP, only authentication with <b>GOOGLE_APPLICATION_CREDENTIALS</b> env is supported.

       <b>IMPORTANT:</b>
          Each backup deletion involves three separate requests to the cloud provider: one for the backup files,
          one  for  the  <b>backup.info</b>  file,  and  one for the associated WALs.  Deleting by retention policy may
          result in a high volume of delete requests if a large number  of  backups  are  accumulated  in  cloud
          storage.

       <b>Parameters</b>

       <b>SERVER_NAME</b>
              Name of the server that holds the backup to be deleted.

       <b>SOURCE_URL</b>
              URL of the cloud source, such as a bucket in AWS S3. For example: <b>s3://bucket/path/to/folder</b>.

       <b>-V</b> <b>/</b> <b>--version</b>
              Show version and exit.

       <b>--help</b> show this help message and exit.

       <b>-v</b> <b>/</b> <b>--verbose</b>
              Increase output verbosity (e.g., <b>-vv</b> is more than <b>-v</b>).

       <b>-q</b> <b>/</b> <b>--quiet</b>
              Decrease output verbosity (e.g., <b>-qq</b> is less than <b>-q</b>).

       <b>-t</b> <b>/</b> <b>--test</b>
              Test cloud connectivity and exit.

       <b>--cloud-provider</b>
              The cloud provider to use as a storage backend.

              Allowed options are:

              • <b>aws-s3</b>.

              • <b>azure-blob-storage</b>.

              • <b>google-cloud-storage</b>.

       <b>-b</b> <b>/</b> <b>--backup-id</b>
              ID of the backup to be deleted

       <b>-m</b> <b>/</b> <b>--minimum-redundancy</b>
              The minimum number of backups that should always be available.

       <b>-r</b> <b>/</b> <b>--retention-policy</b>
              If specified, delete all backups eligible for deletion according to the supplied retention policy.

              Syntax: <b>REDUNDANCY</b> <b>value</b> <b>|</b> <b>RECOVERY</b> <b>WINDOW</b> <b>OF</b> <b>value</b> <b>{</b> <b>DAYS</b> <b>|</b> <b>WEEKS</b> <b>|</b> <b>MONTHS</b> <b>}</b>

       <b>--batch-size</b>
              The  maximum  number of objects to be deleted in a single request to the cloud provider.  If unset
              then the maximum allowed batch size for the specified  cloud  provider  will  be  used  (<b>1000</b>  for
              aws-s3, <b>256</b> for azure-blob-storage and <b>100</b> for google-cloud-storage).

       <b>--dry-run</b>
              Find the objects which need to be deleted but do not delete them.

       <b>Extra</b> <b>options</b> <b>for</b> <b>the</b> <b>AWS</b> <b>cloud</b> <b>provider</b>

       <b>--endpoint-url</b>
              Override default S3 endpoint URL with the given one.

       <b>-P</b> <b>/</b> <b>--aws-profile</b>
              Profile name (e.g. <b>INI</b> section in AWS credentials file).

       <b>--profile</b> <b>(deprecated)</b>
              Profile name (e.g. <b>INI</b> section in AWS credentials file) - replaced by <b>--aws-profile</b>.

       <b>--read-timeout</b>
              The  time in seconds until a timeout is raised when waiting to read from a connection (defaults to
              <b>60</b> seconds).

       <b>Extra</b> <b>options</b> <b>for</b> <b>the</b> <b>Azure</b> <b>cloud</b> <b>provider</b>

       <b>--azure-credential</b> <b>/</b> <b>--credential</b>
              Optionally specify the type of credential to use when authenticating with Azure. If  omitted  then
              Azure  Blob  Storage  credentials  will  be  obtained  from  the environment and the default Azure
              authentication flow will be  used  for  authenticating  with  all  other  Azure  services.  If  no
              credentials  can  be found in the environment then the default Azure authentication flow will also
              be used for Azure Blob Storage.

              Allowed options are:

              • <b>azure-cli</b>.

              • <b>managed-identity</b>.

</pre><h4><b>AUTHOR</b></h4><pre>
       EnterpriseDB

</pre><h4><b>COPYRIGHT</b></h4><pre>
       © Copyright EnterpriseDB UK Limited 2011-2024

3.12                                              Dec 09, 2024                     <u><a href="../man1/BARMAN-CLOUD-BACKUP-DELETE.1.html">BARMAN-CLOUD-BACKUP-DELETE</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>