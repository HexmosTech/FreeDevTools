<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>pcp_node_info - displays the information on the given node ID</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/pgpool2">pgpool2_4.6.0-1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       pcp_node_info - displays the information on the given node ID

</pre><h4><b>SYNOPSIS</b></h4><pre>

       <b>pcp_node_info</b> [<u>option</u>...] [<u>node_id</u>]

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>pcp_node_info</b> displays the information on the given node ID.

</pre><h4><b>OPTIONS</b></h4><pre>
       <b>-n</b> <u>node_id</u>
       <b>--node-id=</b><u>node_id</u>
           The index of backend node to get information of.

       <b>-a</b>
       <b>--all</b>
           Display all backend nodes information.

       <b>Other</b> <b>options</b>
           See <b><a href="../man1/pcp_common_options.1.html">pcp_common_options</a></b>(1).

</pre><h4><b>EXAMPLE</b></h4><pre>
       Here is an example output:

           $ pcp_node_info -w -p 11001 -n 1
           <a href="file:/tmp">/tmp</a> 11003 1 0.500000 waiting up standby standby 0 streaming async 2021-02-27 14:51:30

       The result is in the following order:

           1. hostname
           2. port number
           3. status
           4. load balance weight
           5. status name
           6. actual backend status (obtained using PQpingParams. Pgpool-II 4.3 or later)
           7. backend role
           8. actual backend role (obtained using pg_is_in_recovery. Pgpool-II 4.3 or later)
           9. replication delay
           10. replication state (taken from pg_stat_replication. Pgpool-II 4.1 or later)
           11. sync replication state (taken from pg_stat_replication. Pgpool-II 4.1 or later)
           12. last status change time

       3 (status) is represented by a digit from [0 to 3].

       •   0 - This state is only used during the initialization. PCP will never display it.

       •   1 - Node is up. No connections yet.

       •   2 - Node is up. Connections are pooled.

       •   3 - Node is down.

       4 (load balance weight) is displayed in normalized format (0 - 1).

       6 shows the backend status in real time. The info is obtained by calling <b>PQpingParams</b> at the time when
       the command is invoked.  <b>PQpingParams</b> is only available in PostgreSQL 9.1 or later. If Pgpool-II was
       built with PostgreSQL 9.0 or earlier, the column shows "unknown". Also if health check is disabled, it
       shows "unknown". When a backend node is detached by <b><a href="../man1/pcp_detach_node.1.html">pcp_detach_node</a></b>(1), the status managed by Pgpool-II
       will be "down", while the actual backend status is "up". Thus it is possible that 5 does not match with
       6. However it should not happen that 5 is "up" while 6 is "down".

       8 shows the backend status in real time. The result will be either "primary" or "standby", and possibly
       "unknown" if information retrieval failed. Since Pgpool-II searches backend nodes in the node id order
       and assumes the last found node is primary, it is possible that 7 does not match 8 when there are
       multiple nodes that are not standby by erroneous operations (this command is useful to find such that
       situation). In other than streaming replication mode, the status will be either "main" or "replica".
       Unlike streaming replication mode <b>pg_is_in_recovery</b> is not called and value for 7 and 8 will be always
       the same.

       To correctly 9, 10, 11 are displayed, sr_check_period must not be 0. 10, 11 will not be displayed if
       sr_check_user is not PostgreSQL super user nor it's not in "pg_monitor" group.

           <b>Note</b>

           To make sr_check_user in pg_monitor group, execute following SQL command by PostgreSQL super user
           (replace "sr_check_user" with the setting of sr_check_user):

               GRANT pg_monitor TO sr_check_user;

           For PostgreSQL 9.6, there's no pg_monitor group and sr_check_user must be PostgreSQL super user.

       From Pgpool-II 4.4, 9 (replication delay) is displayed in either bytes or seconds. See
       delay_threshold_by_time for more details.

       The <b>-a</b> or <b>--all</b> option lists all backend nodes information.

           $ pcp_node_info -w -p 11001 -a
           <a href="file:/tmp">/tmp</a> 11002 1 0.500000 waiting up primary primary 0 none none 2021-02-27 14:51:30
           <a href="file:/tmp">/tmp</a> 11003 1 0.500000 waiting up standby standby 0 streaming async 2021-02-27 14:51:30

       The <b>--verbose</b> option can help understand the output. For example:

           $ pcp_node_info -w -p 11001 --verbose 1
           Hostname               : <a href="file:/tmp">/tmp</a>
           Port                   : 11003
           Status                 : 1
           Weight                 : 0.500000
           Status Name            : waiting
           Backend Status Name    : up
           Role                   : standby
           Backend Role           : standby
           Replication Delay      : 0
           Replication State      : streaming
           Replication Sync State : async
           Last Status Change     : 2021-02-27 14:51:30

pgpool-II 4.6.0                                       2023                                      <u><a href="../man1/PCP_NODE_INFO.1.html">PCP_NODE_INFO</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>