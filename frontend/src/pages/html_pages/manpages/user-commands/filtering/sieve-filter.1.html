<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>sieve-filter - Pigeonhole's Sieve mailbox filter tool</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/dovecot-sieve">dovecot-sieve_2.3.21.1+dfsg1-1ubuntu2_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       sieve-filter - Pigeonhole's Sieve mailbox filter tool

       <b>WARNING:</b>  This  tool  is  still  experimental.  Read this manual carefully, and backup any important mail
       before using this tool. Also note that some of the features documented here are not actually  implemented
       yet; this is clearly indicated where applicable.

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>sieve-filter</b> [<u>options</u>] <u>script-file</u> <u>source-mailbox</u> [<u>discard-action</u>]

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The  <b>sieve-filter</b>  command is part of the Pigeonhole Project (<b><a href="../man7/pigeonhole.7.html">pigeonhole</a></b>(7)), which adds Sieve (RFC 5228)
       support to the Dovecot secure IMAP and POP3 server (<b><a href="../man1/dovecot.1.html">dovecot</a></b>(1)).

       The Sieve language was originally meant  for  filtering  messages  upon  delivery.   However,  there  are
       occasions when it is desirable to filter messages that are already stored in a mailbox, for instance when
       a  bug in a Sieve script caused many messages to be delivered incorrectly. Using the sieve-filter tool it
       is possible to apply a Sieve script on all messages in a particular <u>source-mailbox</u>, making it possible to
       delete messages, to store them in a different mailbox,  to  change  their  content,  and  to  change  the
       assigned  IMAP  flags and keywords. Attempts to send messages to the outside world are ignored by default
       for obvious reasons, but, using the proper command line options, it is possible  to  capture  and  handle
       outgoing mail as well.

       If  no  options are specified, the sieve-filter command runs in a simulation mode in which it only prints
       what would be performed, without actually doing anything. Use the  <b>-e</b>  option  to  activate  true  script
       execution.  Also,  the  <u>source-mailbox</u>  is  opened  read-only by default, meaning that it normally always
       remains unchanged. Use the <b>-W</b> option to allow changes in the <u>source-mailbox</u>.

       Even with the <b>-W</b> option enabled, messages in the <u>source-mailbox</u> are only potentially modified or moved to
       a different folder. Messages are never lost  unless  a  <u>discard-action</u>  argument  other  than  <b>keep</b>  (the
       default)  is  specified. If the Sieve filter decides to store the message in the <u>source-mailbox</u>, where it
       obviously already exists, it is never duplicated there. In that case, the  IMAP  flags  of  the  original
       message  can  be  modified  by  the Sieve interpreter using the <u>imap4flags</u> extension, provided that <b>-W</b> is
       specified. If the message itself is  modified  by  the  Sieve  interpreter  (e.g.  using  the  <u>editheader</u>
       extension),  a new message is stored and the old one is expunged. However, if <b>-W</b> is omitted, the original
       message is left untouched and the modifications are discarded.

   <b>CAUTION</b>
       Although this is a very useful tool, it can also be very destructive when used improperly. A small bug in
       your Sieve script in combination with the wrong command line options could cause it to discard the  wrong
       e-mails.  And,  even  if  the  <u>source-mailbox</u> is opened in read-only mode to prevent such mishaps, it can
       still litter other mailboxes with spurious copies of your e-mails if your Sieve script decides to do  so.
       Therefore,  users are advised to read this manual carefully and to use the simulation mode first to check
       what the script will do. And, of course:

       <b>MAKING</b> <b>A</b> <b>BACKUP</b> <b>IS</b> <b>IMPERATIVE</b> <b>FOR</b> <b>ANY</b> <b>IMPORTANT</b> <b>MAIL!</b>

</pre><h4><b>OPTIONS</b></h4><pre>
       <b>-c</b> <u>config-file</u>
              Alternative Dovecot configuration file path.

       <b>-C</b>     Force compilation. By default, the compiled binary is stored on disk. When this  binary  is  found
              during the next execution of <b>sieve-filter</b> and its modification time is more recent than the script
              file,  it  is  used  and  the  script  is  not compiled again. This option forces the script to be
              compiled, thus ignoring any present binary. Refer to <b><a href="../man1/sievec.1.html">sievec</a></b>(1) for more  information  about  Sieve
              compilation.

       <b>-D</b>     Enable Sieve debugging.

       <b>-e</b>     Turns  on execution mode. By default, the sieve-filter command runs in simulation mode in which it
              changes nothing, meaning that no mailbox is altered in any way and no actions  are  performed.  It
              only  prints  what  would be done.  Using this option, the sieve-filter command becomes active and
              performs the requested actions.

       <b>-m</b> <u>default-mailbox</u>
              The mailbox where the (implicit)  <b>keep</b>  Sieve  action  stores  messages.  This  is  equal  to  the
              <u>source-mailbox</u>  by  default.  Specifying  a  different  folder  will have the effect of moving (or
              copying if <b>-W</b> is omitted) all kept messages to the indicated folder, instead of just leaving  them
              in  the  <u>source-mailbox</u>.  Refer  to  the  explanation  of  the  <u>source-mailbox</u>  argument  for more
              information on mailbox naming.

       <b>-o</b> <u>setting</u><b>=</b><u>value</u>
              Overrides the configuration <u>setting</u> from <u>/etc/dovecot/dovecot.conf</u> and from the  userdb  with  the
              given  <u>value</u>.   In  order  to  override multiple settings, the <b>-o</b> option may be specified multiple
              times.

       <b>-q</b> <u>output-mailbox</u> <b>[not</b> <b>implemented</b> <b>yet]</b>
              Store outgoing e-mail into the indicated <u>output-mailbox</u>.  By  default,  the  sieve-filter  command
              ignores  Sieve  actions  such  as  redirect,  reject,  vacation  and notify, but using this option
              outgoing messages can be appended  to  the  indicated  mailbox.  This  option  has  no  effect  in
              simulation mode. Flags of redirected messages are not preserved.

       <b>-Q</b> <u>mail-command</u> <b>[not</b> <b>implemented</b> <b>yet]</b>
              Send  outgoing  e-mail  (e.g.  as produced by redirect, reject and vacation) through the specified
              program. By default, the sieve-filter command ignores Sieve  actions  such  as  redirect,  reject,
              vacation  and  notify,  but  using  this  option  outgoing  messages can be fed to the <b>stdin</b> of an
              external shell command. This option has no effect in simulation mode. Unless you really know  what
              you are doing, <b>DO</b> <b>NOT</b> <b>USE</b> <b>THIS</b> <b>TO</b> <b>FEED</b> <b>MAIL</b> <b>TO</b> <b>SENDMAIL!</b>.

       <b>-s</b> <u>script-file</u> <b>[not</b> <b>implemented</b> <b>yet]</b>
              Specify  additional  scripts  to  be  executed  before  the main script. Multiple <b>-s</b> arguments are
              allowed and the specified scripts are executed sequentially in the order specified at the  command
              line.

       <b>-u</b> <u>user</u>
              Run  the  Sieve  script  for  the  given <u>user</u>. When omitted, the <u>command</u> will be executed with the
              environment of the currently logged in user.

       <b>-v</b>     Produce verbose output during filtering.

       <b>-W</b>     Enables write access  to  the  <u>source-mailbox</u>.  This  allows  (re)moving  the  messages  from  the
              <u>source-mailbox</u>, changing their contents, and changing the assigned IMAP flags and keywords.

       <b>-x</b> <u>extensions</u>
              Set the available extensions. The parameter is a space-separated list of the active extensions. By
              prepending  the extension identifiers with <b>+</b> or <b>-</b>, extensions can be included or excluded relative
              to the configured set of active extensions. If no extensions have a <b>+</b>  or  <b>-</b>  prefix,  only  those
              extensions  that  are  explicitly  listed  will  be  enabled. Unknown extensions are ignored and a
              warning is produced.

              For example <b>-x</b> "+imapflags -enotify" will enable the deprecated imapflags  extension  and  disable
              the  enotify  extension.  The  rest  of  the active extensions depends on the <u>sieve_extensions</u> and
              <u>sieve_global_extensions</u>    settings.    By    default,    i.e.     when    <u>sieve_extensions</u>    and
              <u>sieve_global_extensions</u>  remain  unconfigured,  all supported extensions are available, except for
              deprecated extensions or those that are still under development.

</pre><h4><b>ARGUMENTS</b></h4><pre>
       <u>script-file</u>
              Specifies the Sieve script to (compile and) execute.

              Note that this tool looks for a pre-compiled binary file with a <u>.svbin</u> extension and with basename
              and path identical to the specified script. Use the <b>-C</b> option to disable this behavior by  forcing
              the script to be compiled into a new binary.

       <u>source-mailbox</u>
              Specifies the source mailbox containing the messages that the Sieve filter will act upon.

              This  is  the name of a mailbox, as visible to IMAP clients, except in UTF-8 format. The hierarchy
              separator between a parent and child mailbox is commonly '<b>/</b>' or '<b>.</b>',  but  this  depends  on  your
              selected  mailbox storage format and namespace configuration. The mailbox names may also require a
              namespace prefix.

              This mailbox is not modified unless the <b>-W</b> option is specified.

       <u>discard-action</u>
              Specifies what is done with messages in the <u>source-mailbox</u> that where not kept or otherwise stored
              by the Sieve script; i.e. those messages that would normally be discarded if the Sieve script were
              executed at delivery.  The <u>discard-action</u> parameter accepts one of the following values:

              <b>keep</b> (default)
                     Keep discarded messages in source mailbox.

              <b>move</b> <u>mailbox</u>
                     Move discarded messages to the indicated <u>mailbox</u>. This  is  for  instance  useful  to  move
                     messages  to  a  Trash mailbox. Refer to the explanation of the <u>source-mailbox</u> argument for
                     more information on mailbox naming.

              <b>delete</b> Flag discarded messages as \DELETED.

              <b>expunge</b>
                     Expunge discarded messages, meaning that these  are  removed  irreversibly  when  the  tool
                     finishes filtering.

              When  the  <b>-W</b>  option  is  not  specified,  the  <u>source-mailbox</u>  is  immutable  and  the specified
              <u>discard-action</u> has no effect. This means that messages are at most <u>copied</u> to a  new  location.  In
              contrast,  when  the  <b>-W</b> is specified, messages that are successfully stored somewhere else by the
              Sieve script are <b>always</b> expunged from the <u>source-mailbox</u>, with the  effect  that  these  are  thus
              <u>moved</u>  to  the  new location. This happens irrespective of the specified <u>discard-action</u>. Remember:
              only discarded messages are affected by the specified <u>discard-action</u>.

</pre><h4><b>EXAMPLES</b></h4><pre>
       [...]

</pre><h4><b>EXIT</b> <b>STATUS</b></h4><pre>
       <b>sieve-filter</b> will exit with one of the following values:

       <b>0</b>   Sieve filter applied successfully. (EX_OK, EXIT_SUCCESS)

       <b>1</b>   Operation failed. This is returned for almost all failures.  (EXIT_FAILURE)

       <b>64</b>  Invalid parameter given. (EX_USAGE)

</pre><h4><b>FILES</b></h4><pre>
       <u>/etc/dovecot/dovecot.conf</u>
              Dovecot's main configuration file.

       <u>/etc/dovecot/conf.d/90-sieve.conf</u>
              Sieve interpreter settings (included from Dovecot's main configuration file)

</pre><h4><b>REPORTING</b> <b>BUGS</b></h4><pre>
       Report  bugs,  including  <u>doveconf</u>  <u>-n</u>  output,  to  the  Dovecot  Mailing  List   &lt;<a href="mailto:dovecot@dovecot.org">dovecot@dovecot.org</a>&gt;.
       Information about reporting bugs is available at: <a href="http://dovecot.org/bugreport.html">http://dovecot.org/bugreport.html</a>

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man1/dovecot.1.html">dovecot</a></b>(1), <b><a href="../man1/dovecot-lda.1.html">dovecot-lda</a></b>(1), <b><a href="../man1/sieve-dump.1.html">sieve-dump</a></b>(1), <b><a href="../man1/sieve-test.1.html">sieve-test</a></b>(1), <b><a href="../man1/sievec.1.html">sievec</a></b>(1), <b><a href="../man7/pigeonhole.7.html">pigeonhole</a></b>(7)

Pigeonhole for Dovecot v2.4                        2016-04-05                                    <u><a href="../man1/SIEVE-FILTER.1.html">SIEVE-FILTER</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>