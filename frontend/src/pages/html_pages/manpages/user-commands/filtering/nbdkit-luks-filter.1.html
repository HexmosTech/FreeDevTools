<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>nbdkit-luks-filter - read and write LUKS-encrypted disks and partitions</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/nbdkit">nbdkit_1.42.2-1ubuntu1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       nbdkit-luks-filter - read and write LUKS-encrypted disks and partitions

</pre><h4><b>SYNOPSIS</b></h4><pre>
        nbdkit file encrypted-disk.img --filter=luks passphrase=+/tmp/secret

</pre><h4><b>DESCRIPTION</b></h4><pre>
       "nbdkit-luks-filter" is a filter for <b><a href="../man1/nbdkit.1.html">nbdkit</a></b>(1) which transparently opens a LUKS-encrypted disk image.
       LUKS ("Linux Unified Key Setup") is the Full Disk Encryption (FDE) system commonly used by Linux systems.
       This filter is compatible with LUKSv1 as implemented by the Linux kernel (dm_crypt), and by qemu.

       You can place this filter on top of <b><a href="../man1/nbdkit-file-plugin.1.html">nbdkit-file-plugin</a></b>(1) to decrypt a local file:

        nbdkit file encrypted-disk.img --filter=luks passphrase=+/tmp/secret

       If LUKS is present inside a partition in the disk image then you will have to combine this filter with
       <b><a href="../man1/nbdkit-partition-filter.1.html">nbdkit-partition-filter</a></b>(1).  The order of the filters is important:

        nbdkit file encrypted-disk.img \
                    --filter=luks passphrase=+/tmp/secret \
                    --filter=partition partition=1

       This filter also works on top of other plugins such as <b><a href="../man1/nbdkit-curl-plugin.1.html">nbdkit-curl-plugin</a></b>(1):

        nbdkit curl https://example.com/encrypted-disk.img \
                    --filter=luks passphrase=+/tmp/secret

       The web server sees only the encrypted data.  Without knowing the passphrase, the web server cannot
       access the decrypted disk.  Only encrypted data is sent over the HTTP connection.  nbdkit itself will
       serve <u>unencrypted</u> disk data over the NBD connection (if this is a problem see <b><a href="../man1/nbdkit-tls.1.html">nbdkit-tls</a></b>(1), or use a
       Unix domain socket <u>-U</u>).

       The passphrase can be stored in a file (as shown), passed directly on the command line (insecure),
       entered interactively, or passed to nbdkit over a file descriptor.

       This filter can read and write LUKSv1.  It cannot create disks, change passphrases, add keyslots, etc.
       To do that, you can use ordinary Linux tools like <b><a href="../man8/cryptsetup.8.html">cryptsetup</a></b>(8).  Note you must force LUKSv1 (eg. using
       cryptsetup <u>--type</u> <u>luks1</u>).  <b><a href="../man1/qemu-img.1.html">qemu-img</a></b>(1) can also create compatible disk images:

        qemu-img create -f luks \
                        --object secret,data=SECRET,id=sec0 \
                        -o key-secret=sec0 \
                        encrypted-disk.img 1G

</pre><h4><b>PARAMETERS</b></h4><pre>
       <b>passphrase=</b>SECRET
           Use the secret passphrase when decrypting the disk.

           Note that passing this on the command line is not secure on shared machines.

       <b>passphrase=-</b>
           Ask for the passphrase (interactively) when nbdkit starts up.

       <b>passphrase=+</b>FILENAME
           Read  the passphrase from the named file.  This is a secure method to supply a passphrase, as long as
           you set the permissions on the file appropriately.

       <b>passphrase=-</b>FD
           Read the passphrase from file descriptor number "FD", inherited from the parent process  when  nbdkit
           starts up.  This is also a secure method to supply a passphrase.

</pre><h4><b>FILES</b></h4><pre>
       <u>$filterdir/nbdkit-luks-filter.so</u>
           The plugin.

           Use "nbdkit --dump-config" to find the location of $filterdir.

</pre><h4><b>VERSION</b></h4><pre>
       "nbdkit-luks-filter" first appeared in nbdkit 1.32.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man1/nbdkit-curl-plugin.1.html">nbdkit-curl-plugin</a></b>(1), <b><a href="../man1/nbdkit-file-plugin.1.html">nbdkit-file-plugin</a></b>(1), <b><a href="../man1/nbdkit-ip-filter.1.html">nbdkit-ip-filter</a></b>(1), <b><a href="../man1/nbdkit-partition-filter.1.html">nbdkit-partition-filter</a></b>(1), <b><a href="../man1/nbdkit.1.html">nbdkit</a></b>(1),
       <b><a href="../man1/nbdkit-tls.1.html">nbdkit-tls</a></b>(1), <b><a href="../man3/nbdkit-plugin.3.html">nbdkit-plugin</a></b>(3), <b><a href="../man8/cryptsetup.8.html">cryptsetup</a></b>(8), <b><a href="../man1/qemu-img.1.html">qemu-img</a></b>(1).

</pre><h4><b>AUTHORS</b></h4><pre>
       Richard W.M. Jones

</pre><h4><b>COPYRIGHT</b></h4><pre>
       Copyright Red Hat

</pre><h4><b>LICENSE</b></h4><pre>
       Redistribution  and  use in source and binary forms, with or without modification, are permitted provided
       that the following conditions are met:

       •   Redistributions of source code must retain the above copyright notice, this list  of  conditions  and
           the following disclaimer.

       •   Redistributions in binary form must reproduce the above copyright notice, this list of conditions and
           the following disclaimer in the documentation and/or other materials provided with the distribution.

       •   Neither  the  name  of  Red  Hat  nor the names of its contributors may be used to endorse or promote
           products derived from this software without specific prior written permission.

       THIS SOFTWARE IS PROVIDED BY RED HAT AND CONTRIBUTORS ''AS IS'' AND ANY EXPRESS  OR  IMPLIED  WARRANTIES,
       INCLUDING,  BUT  NOT  LIMITED  TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
       PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL RED HAT OR CONTRIBUTORS BE LIABLE  FOR  ANY  DIRECT,  INDIRECT,
       INCIDENTAL,  SPECIAL,  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF
       SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
       ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT  LIABILITY,  OR  TORT  (INCLUDING  NEGLIGENCE  OR
       OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH
       DAMAGE.

nbdkit-1.42.2                                      2025-04-02                              <u><a href="../man1/nbdkit-luks-filter.1.html">nbdkit-luks-filter</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>