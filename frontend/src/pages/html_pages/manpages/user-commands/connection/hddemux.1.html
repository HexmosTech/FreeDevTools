<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>hddemux - demultiplexes incoming TCP connections between HTTP and DNS</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/hddemux">hddemux_0.5-1ubuntu3_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       hddemux - demultiplexes incoming TCP connections between HTTP and DNS

</pre><h4><b>SYNOPSIS</b></h4><pre>
       hddemux

</pre><h4><b>DESCRIPTION</b></h4><pre>
       hddemux  takes  a  set  of listening stream-based file descriptors (see <a href="../man3/sd_listen_fds.3.html">sd_listen_fds</a>(3)) and accepts new
       connections on them.

       When a new connection comes in, it decides from the first few octets whether the connection  is  HTTP/1.x
       or  DNS.   If  it  thinks it’s HTTP/1.x, it splices the connection to the HTTP_TARGET.  If it thinks it’s
       DNS, it splices the connection to the DNS_TARGET.

</pre><h4><b>ENVIRONMENT</b> <b>VARIABLES</b></h4><pre>
       HTTP_TARGET and DNS_TARGET should be either a DNS name or an IP address, optionally followed by  a  colon
       and a port number.  If either variable is unset, it will default to “localhost”.

       If  the port number is not specified, HTTP_TARGET defaults to TCP port 80, and DNS_TARGET defaults to TCP
       port 53.

       If HDDEMUX_DEBUG is set to a non-empty string, then it will send a  lot  of  verbose  debugging  info  to
       stderr.

       IDLE_TIMEOUT  is  used  to  set the number of milliseconds that hddemux will permit a session to be in an
       open state with no traffic passing before it tries to close both sides.  The default is 600000  (10  min‐
       utes).  Set this variable to 0 to never try to do this kind of cleanup.

</pre><h4><b>SIGNALS</b></h4><pre>
       When  hddemux  receives SIGUSR1, it dumps an overview of the current state of the demuxer (configuration,
       outstanding established streams, etc) to stderr.

</pre><h4><b>EXAMPLES</b></h4><pre>
       For systemd, you need a .socket unit file:

              #/lib/systemd/hddemux.socket
              [Unit]
              Description=HTTP/1.x and DNS demuxer socket
              Documentation=man:<a href="../man1/hddemux.1.html">hddemux</a>(1)

              [Socket]
              ListenStream=/run/hddemux/socket

              [Install]
              WantedBy=sockets.target

       and a .service unit file:

              #/lib/systemd/hddemux.service
              [Unit]
              Description=HTTP/1.x and DNS demuxer service
              Documentation=man:<a href="../man1/hddemux.1.html">hddemux</a>(1)
              Requires=hddemux.socket

              [Service]
              Type=notify
              ExecStart=/usr/bin/hddemux
              WorkingDirectory=/run/hddemux/workdir
              User=hddemux
              Group=hddemux

              [Install]
              Also=hddemux.socket

       Configuration can be done by overriding the .service file (e.g. with Service.Environment= entries).   See
       the “edit” documentation in <a href="../man1/systemctl.1.html">systemctl</a>(1) and the “Overriding vendor settings” section of <a href="../man5/systemd.unit.5.html">systemd.unit</a>(5).

</pre><h4><b>CONSTRAINTS</b></h4><pre>
       hddemux is designed to demultiplex HTTP/1.x from stream-based DNS.  Trying to demultiplex other protocols
       (including HTTP/2 or later) is not advised.  Please see draft-dkg-dprive-demux-dns-http for more informa‐
       tion and analysis.

</pre><h4><b>WARNING</b></h4><pre>
       Note that this effectively acts as a stream redirector once the client’s first flight has been processed.
       It does this with no attempt to defend against stream redirection loops, so be careful not to redirect it
       to itself or it will eat all of your memory in infinite recursion.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <a href="../man3/sd_listen_fds.3.html">sd_listen_fds</a>(3), <a href="../man1/systemctl.1.html">systemctl</a>(1), <a href="../man5/systemd.unit.5.html">systemd.unit</a>(5), https://datatracker.ietf.org/doc/draft-dkg-dprive-demux-
       dns-http/

</pre><h4><b>AUTHORS</b></h4><pre>
       Daniel Kahn Gillmor &lt;<a href="mailto:dkg@fifthhorseman.net">dkg@fifthhorseman.net</a>&gt;.

                                                    2017 May                                          <u><a href="../man1/HDDEMUX.1.html">HDDEMUX</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>