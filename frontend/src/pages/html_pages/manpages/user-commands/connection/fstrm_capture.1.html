<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>fstrm_capture - Receive and save Frame Streams data from a socket.</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/fstrm-bin">fstrm-bin_0.6.1-1build4_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       fstrm_capture - Receive and save Frame Streams data from a socket.

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>fstrm_capture</b> <b>-t</b> <u>content-type</u> <b>-w</b> <u>filename</u>
            <b>[</b> <b>-u</b> <u>socket-path</u> <b>]</b> <b>[</b> <b>-a</b> <u>IP</u> <b>-p</b> <u>port</u> <b>]</b>
            <b>[</b> <b>-c</b> <u>max-connections</u> <b>]</b> <b>[</b> <b>-b</b> <u>buffer-size</u> <b>]</b>
            <b>[</b> <b>-s</b> <u>seconds</u> <b>]</b> <b>[</b> <b>--gmtime</b> <b>]</b> <b>[</b> <b>--localtime</b> <b>]</b>
            <b>[</b> <b>-d</b> <b>[-d</b> <b>...]</b> <b>]</b>

       <b>fstrm_capture</b> <b>--type</b> <u>content-type</u> <b>--write</b> <u>filename</u>
            <b>[</b> <b>--unix</b> <u>socket-path</u> <b>]</b> <b>[</b> <b>--tcp</b> <u>IP</u> <b>--port</b> <u>port</u> <b>]</b>
            <b>[</b> <b>--maxconns</b> <u>max-connections</u> <b>]</b> <b>[</b> <b>--buffersize</b> <u>buffer-size</u> <b>]</b>
            <b>[</b> <b>--split</b> <u>seconds</u> <b>]</b> <b>[</b> <b>--gmtime</b> <b>]</b> <b>[</b> <b>--localtime</b> <b>]</b>
            <b>[</b> <b>--debug</b> <b>[--debug</b> <b>...]</b> <b>]</b>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>fstrm_capture</b> listens on a UNIX domain or TCP socket, receives Frame Streams data, and writes the data to
       a file.

</pre><h4><b>OPTIONS</b></h4><pre>
       <b>-w</b> <u>filename</u> <b>|</b> <b>--write</b> <u>filename</u>
              Write data to the file <u>filename</u>.

              If  the  <b>--gmtime</b>  or <b>--localtime</b> option is given, <u>filename</u> is preprocessed with <b>strftime()</b>.  This
              will allow specifying a format string which includes the date  and  time,  for  example,  for  the
              created filename.

              If <u>filename</u> is "-" and standard output is not connected to a terminal, <b>fstrm_capture</b> will write to
              standard output. Output splitting (<b>-s</b>) may not be used with a <u>filename</u> of "-".

              Sending  <u>SIGHUP</u>  to <b>fstrm_capture</b> will flush any buffered output to the file. Sending <u>SIGUSR1</u> will
              close and reopen the file.

       <b>-t</b> <u>content-type</u> <b>|</b> <b>--type</b> <u>content-type</u>
              Specify the <u>content-type</u> to receive from the socket and write to the output <u>filename</u>.

       <b>-u</b> <u>socket-path</u> <b>|</b> <b>--unix</b> <u>socket-path</u>
              Listen on the Unix domain socket <u>socket-path</u> to receive Frame Streams data. Only one of <b>-u</b>  or  <b>-a</b>
              may be given.

       <b>-a</b> <u>IP</u> <b>|</b> <b>--tcp</b> <u>IP</u>
              Listen  for  TCP connections on address <u>IP</u> to receive Frame Streams data. Only one of <b>-u</b> or <b>-a</b> may
              be given. Use of <b>-a</b> requires a port given with <b>-p</b>.

       <b>-p</b> <u>port</u> <b>|</b> <b>--port</b> <u>port</u>
              If <b>-a</b> is given, listen on TCP port <u>port</u> to receive Frame Streams data.

       <b>-c</b> <u>max-conns</u> <b>|</b> <b>--maxconns</b> <u>max-conns</u>
              Allow at most <u>max-conns</u> concurrent connections. If not specified, concurrent connections  are  not
              limited.

       <b>-b</b> <u>buffersize</u> <b>|</b> <b>--buffersize</b> <u>buffersize</u>
              Set  read  buffer  size to <u>buffersize</u> bytes. Combined with <b>-c</b>, this can be used to limit the total
              memory usage of  <b>fstrm_capture</b>.   The  <u>buffersize</u>  also  affects  the  maximum  frame  size  which
              <b>fstrm_capture</b>  will  accept. Frames larger than <u>buffersize</u>, including the 4-byte framing overhead,
              will be discarded.

              The default <u>buffersize</u> is 262144 (256KiB).

       <b>-s</b> <u>interval</u> <b>|</b> <b>--split</b> <u>interval</u>
              Reopen output file every <u>interval</u> seconds. Requires the use of either the <b>--gmtime</b> or  <b>--localtime</b>
              options.

              Note  that  this  file  rotation  is  triggered  by  incoming data, so it may be delayed after the
              interval.

       <b>--gmtime</b>
              Process the <b>--write</b> filename through <b>strftime()</b> with the  current  time  in  GMT.   This  <b>--gmtime</b>
              option  may  be  used  to  provide  a  timestamped output file when starting <b>fstrm_capture</b> or when
              reopening an output file using the <b>--split</b> option or when receiving a <u>SIGUSR1</u> signal.

       <b>--localtime</b>
              Process the <b>--write</b> filename through <b>strftime()</b> with the current time in  the  system  local  time
              zone.   This  <b>--localtime</b>  option  may  be used to provide a timestamped output file when starting
              <b>fstrm_capture</b> or when reopening an output file using  the  <b>--split</b>  option  or  when  receiving  a
              <u>SIGUSR1</u> signal.

       <b>-d</b> <b>[</b> <b>-d</b> <b>...</b> <b>]</b> <b>|</b> <b>--debug</b> <b>[</b> <b>--debug</b> <b>]</b>
              Increase  debugging  level.  Without  <b>-d</b>, <b>fstrm_capture</b> prints only critical error messages. Up to
              five <b>-d</b> options may be specified, after which more repetitions will have no effect.

</pre><h4><b>EXAMPLES</b></h4><pre>
       Receive  dnstap  data  and  save  to  hourly  rotating  files  (with  a  converted   filename   such   as
       <u>/var/log/dnstap/dnstap-2018-05-04-12:58:48.fstrm</u>).

            fstrm_capture -t protobuf:dnstap.Dnstap \
                 -u /var/run/named/dnstap.sock \
                 -w /var/log/dnstap/dnstap-%F-%T.fstrm \
                 -s 3600 --gmtime

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man1/fstrm_dump.1.html">fstrm_dump</a></b>(1), <b><a href="../man1/fstrm_replay.1.html">fstrm_replay</a></b>(1), <b><a href="../man3/strftime.3.html">strftime</a></b>(3),
       Frame Streams C Library <b>https://farsightsec.github.io/fstrm</b>

                                                                                                <u><a href="../man1/fstrm_capture.1.html">fstrm_capture</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>