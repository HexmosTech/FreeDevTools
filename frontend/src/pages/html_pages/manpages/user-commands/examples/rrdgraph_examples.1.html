<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>rrdgraph_examples - Examples for rrdtool graph</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/rrdtool">rrdtool_1.7.2-4.2ubuntu2_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       rrdgraph_examples - Examples for rrdtool graph

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>rrdtool</b> <b>graph</b> <b>/home/httpd/html/test.png</b> <b>--imgformat</b> <b>PNG</b>

       followed by any of the examples below

</pre><h4><b>DESCRIPTION</b></h4><pre>
       For your convenience some of the commands are explained here by using detailed examples. They are not
       always cut-and-paste ready because comments are intermixed with the examples.

</pre><h4><b>EXAMPLES</b></h4><pre>
   <b>Data</b> <b>with</b> <b>multiple</b> <b>resolutions</b>
           --end now --start end-120000s --width 400
           DEF:ds0a=/home/rrdtool/data/router1.rrd:ds0:AVERAGE
           DEF:ds0b=/home/rrdtool/data/router1.rrd:ds0:AVERAGE:step=1800
           DEF:ds0c=/home/rrdtool/data/router1.rrd:ds0:AVERAGE:step=7200
           LINE1:ds0a#0000FF:"default resolution\l"
           LINE1:ds0b#00CCFF:"resolution 1800 seconds per interval\l"
           LINE1:ds0c#FF00FF:"resolution 7200 seconds per interval\l"

   <b>Nicely</b> <b>formatted</b> <b>legend</b> <b>section</b>
           DEF:ds0=/home/rrdtool/data/router1.rrd:ds0:AVERAGE
           DEF:ds1=/home/rrdtool/data/router1.rrd:ds1:AVERAGE
           VDEF:ds0max=ds0,MAXIMUM
           VDEF:ds0avg=ds0,AVERAGE
           VDEF:ds0min=ds0,MINIMUM
           VDEF:ds0pct=ds0,95,PERCENT
           VDEF:ds1max=ds1,MAXIMUM
           VDEF:ds1avg=ds1,AVERAGE
           VDEF:ds1min=ds1,MINIMUM
           VDEF:ds1pct=ds1,95,PERCENT

       Note: consolidation occurs here.

           CDEF:ds0bits=ds0,8,*
           CDEF:ds1bits=ds1,8,*

       Note: 10 spaces to move text to the right

           COMMENT:"          "

       Note: the column titles have to be as wide as the columns

           COMMENT:"Maximum    "
           COMMENT:"Average    "
           COMMENT:"Minimum    "

           COMMENT:"95th percentile\l"
           AREA:ds0bits#00C000:"Inbound "
           GPRINT:ds0max:"%6.2lf %Sbps"
           GPRINT:ds0avg:"%6.2lf %Sbps"
           GPRINT:ds0min:"%6.2lf %Sbps"
           GPRINT:ds0pct:"%6.2lf %Sbps\l"
           LINE1:ds1bits#0000FF:"Outbound"
           GPRINT:ds1max:"%6.2lf %Sbps"
           GPRINT:ds1avg:"%6.2lf %Sbps"
           GPRINT:ds1min:"%6.2lf %Sbps"
           GPRINT:ds1pct:"%6.2lf %Sbps\l"

   <b>Offsetting</b> <b>a</b> <b>line</b> <b>on</b> <b>the</b> <b>y-axis</b>
       Depending on your needs you can do this in two ways:

       •   Offset the data, then graph this

               DEF:mydata=my.rrd:ds:AVERAGE

           Note: this will also influence any other command that uses "data"

               CDEF:data=mydata,100,+
               LINE1:data#FF0000:"Data with offset"

       •   Graph the original data, with an offset

               DEF:mydata=my.rrd:ds:AVERAGE

           Note: no color in the first line so it is not visible

               LINE1:100

           Note: the second line gets stacked on top of the first one

               LINE1:mydata#FF0000:"Data with offset":STACK

   <b>Drawing</b> <b>dashed</b> <b>lines</b>
       Also works for HRULE and VRULE

       •   default style: <b>-</b> <b>-</b> <b>-</b> <b>-</b> <b>-</b>

               LINE1:data#FF0000:"dashed line":dashes

       •   more fancy style with offset: <b>-</b> <b>-</b>  <b>---</b> <b>-</b>  <b>---</b> <b>-</b>

               LINE1:data#FF0000:"another dashed line":dashes=15,5,5,10:dash-offset=10

   <b>Time</b> <b>ranges</b>
           Last four weeks: --start end-4w --end 00:00
           January 2001:    --start 20010101 --end start+31d
           January 2001:    --start 20010101 --end 20010201
           Last hour:       --start end-1h
           Last 24 hours:   &lt;nothing at all&gt;
           Yesterday:       --end 00:00

   <b>Viewing</b> <b>the</b> <b>current</b> <b>and</b> <b>previous</b> <b>week</b> <b>together</b>
           --end now --start end-1w
           DEF:thisweek=router.rrd:ds0:AVERAGE
           DEF:lastweek=router.rrd:ds0:AVERAGE:end=now-1w:start=end-1w

       Shift the data forward by one week (604800 seconds)

           SHIFT:lastweek:604800
           [ more of the usual VDEF and CDEF stuff if you like ]
           AREA:lastweek#0000FF:Last\ week
           LINE1:thisweek#FF0000:This\ week

   <b>Aberrant</b> <b>Behaviour</b> <b>Detection</b>
       If  the specialized function <b>RRAs</b> exist for aberrant behavior detection, they can be used to generate the
       graph of a time series with confidence bands and failures.

          rrdtool graph example.png \
                 DEF:obs=monitor.rrd:ifOutOctets:AVERAGE \
                 DEF:pred=monitor.rrd:ifOutOctets:HWPREDICT \
                 DEF:dev=monitor.rrd:ifOutOctets:DEVPREDICT \
                 DEF:fail=monitor.rrd:ifOutOctets:FAILURES \
                 TICK:fail#ffffa0:1.0:"Failures\: Average bits out" \
                 CDEF:scaledobs=obs,8,* \
                 CDEF:upper=pred,dev,2,*,+ \
                 CDEF:lower=pred,dev,2,*,- \
                 CDEF:scaledupper=upper,8,* \
                 CDEF:scaledlower=lower,8,* \
                 LINE2:scaledobs#0000ff:"Average bits out" \
                 LINE1:scaledupper#ff0000:"Upper Confidence Bound: Average bits out" \
                 LINE1:scaledlower#ff0000:"Lower Confidence Bound: Average bits out"

       This example generates a graph of the data series in blue (LINE2 with the scaledobs virtual data source),
       confidence bounds in red (scaledupper and scaledlower virtual data sources), and potential failures (i.e.
       potential aberrant behavior) marked by vertical yellow lines (the fail data source).

       The raw data comes from an  AVERAGE  <b>RRA</b>,  the  finest  resolution  of  the  observed  time  series  (one
       consolidated  data  point  per  primary data point). The predicted (or smoothed) values are stored in the
       HWPREDICT <b>RRA</b>. The predicted deviations (think standard deviation) values are stored  in  the  DEVPREDICT
       <b>RRA</b>. Finally, the FAILURES <b>RRA</b> contains indicators, with 1 denoting a potential failure.

       All  of  the data is rescaled to bits (instead of Octets) by multiplying by 8.  The confidence bounds are
       computed by an offset of 2 deviations both above and below the predicted  values  (the  CDEFs  upper  and
       lower).  Vertical  lines  indicated  potential  failures  are  graphed  via the TICK graph element, which
       converts non-zero values in an <b>RRA</b> into tick marks. Here an axis-fraction argument of 1.0 means the  tick
       marks span the entire y-axis, and hence become vertical lines on the graph.

       The choice of 2 deviations (a scaling factor) matches the default used internally by the FAILURES <b>RRA</b>. If
       the internal value is changed (see rrdtune), this graphing command should be changed to be consistent.

       <u>A</u> <u>note</u> <u>on</u> <u>data</u> <u>reduction:</u>

       The  <b>rrdtool</b> <u>graph</u> command is designed to plot data at a specified temporal resolution, regardless of the
       actually resolution of the data in the RRD  file.   This  can  present  a  problem  for  the  specialized
       consolidation  functions which maintain a one-to-one mapping between primary data points and consolidated
       data points. If a graph insists on viewing the contents of these <b>RRAs</b> on a coarser  temporal  scale,  the
       <u>graph</u> command tries to do something intelligent, but the confidence bands and failures no longer have the
       same meaning and may be misleading.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       rrdgraph  gives  an  overview  of  how <b>rrdtool</b> <b>graph</b> works.  rrdgraph_data describes <b>DEF</b>,<b>CDEF</b> and <b>VDEF</b> in
       detail.  rrdgraph_rpn describes the <b>RPN</b> language  used  in  the  <b>xDEF</b>  statements.   rrdgraph_graph  page
       describes all the graph and print functions.

</pre><h4><b>AUTHOR</b></h4><pre>
       Program by Tobias Oetiker &lt;<a href="mailto:tobi@oetiker.ch">tobi@oetiker.ch</a>&gt;

       This  manual  page by Alex van den Bogaerdt &lt;<a href="mailto:alex@vandenbogaerdt.nl">alex@vandenbogaerdt.nl</a>&gt; with corrections and/or additions by
       several people

1.7.2                                              2025-03-04                               <u><a href="../man1/RRDGRAPH_EXAMPLES.1.html">RRDGRAPH_EXAMPLES</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>