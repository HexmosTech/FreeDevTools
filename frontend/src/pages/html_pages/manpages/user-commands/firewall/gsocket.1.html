<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>gsocket — connect like there is no firewall. Securely.</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/gsocket">gsocket_1.4.43-4_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       gsocket — connect like there is no firewall. Securely.

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>gsocket</b> [<b>-qT</b>] [<b>-s</b> <u>secret</u>] [<b>-k</b> <u>keyfile</u>] [<b>-p</b> <u>port</u>] [<u>program</u>] [<u>args</u> <u>...</u>]

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The <b>gsocket</b> tool can be used to enable a program to communicate through a firewall in situations where it
       would  not  be  possible to establish a direct connection to another host/workstation (NATed/firewalled).
       The typical scenario is two workstations that are  on  separate  private  networks  and  behind  separate
       firewalls. The <b>gsocket</b> tool hijacks the network library functions (such as connect() and accept()) of the
       program and encrypts and redirects the traffic through the Global Socket Relay Network (GSRN).

       Neither workstation needs to open a port in their firewall nor accept incoming TCP connections.

       The  connection  is end-2-end encrypted using SRP (RFC 5054) with AES-256 and a 4096 Prime. The GSRN sees
       only the encrypted traffic.

       Common uses include:

             <b>•</b>   ssh from one workstation to another
             <b>•</b>   OpenVPN between two workstations
             <b>•</b>   netcat between two workstations
             <b>•</b>   and much, much more.

        ...while both workstations are behind NAT and firewalled.

       Abandon the thought of IP addresses and port numbers: Two programs should be  able  to  communicate  with
       each  other  as  long as they know the same secret (rather than each other's IP address and port number).
       The <b>gsocket</b> tools establishes such a connection regardless and independent of the  local  IP  address  or
       geographical  location.  It  does  so  by  analyzing  the program and replacing the IP Layer with its own
       transport through GSRN. The connection is end-2-end encrypted. The GSRN sees only the encrypted traffic.

       The typical scenario is a client/server arrangement such as ssh and  sshd:  Connections  by  ssh  to  any
       hostname ending in '.gsocket' are redirected (through the GSRN) to the (firewalled) sshd server.

       The  redirection is done per program (and limited to that program only). The <b>gsocket</b> tool does not change
       the routing table and does not change the NAT nor the firewall settings. It does  not  require  superuser
       privileges either.

</pre><h4><b>OPTIONS</b></h4><pre>
       <b>-s</b> <u>secret</u>
               A secret chosen by the user. Both ends need to use the same secret to connect.

       <b>-k</b> <u>file</u>
               A file containing the secret.

       <b>-g</b>      Generate a secure random secret and output it to standard output.

       <b>-q</b>      Quiet mode. Do not output any warnings or errors.

       <b>-T</b>      Use TOR. The <b>gsocket</b> tool will connect through TOR to the GSRN. This requires TOR to be installed
               and running.

       <b>-p</b> <u>port</u>
               TCP port range of listening ports to redirect [default=all].

       Connections  to  any  hostname  ending  in  '*.gsocket' or to the IP Address '127.31.33.7' are redirected
       through the GSRN.

       Connections to any hostname ending in '*.thc' or to the IP Address  '127.31.33.8'  are  first  redirected
       through TOR and then through the GSRN.

</pre><h4><b>EXAMPLES</b></h4><pre>
       <b>Example</b> <b>1</b> - OpenSSH between two firewalled workstations:

       Server:
             <b>$</b> <b>gsocket</b> <b>-s</b> <b>MySecret</b> <b><a href="file:///usr/lib/w3m/cgi-bin/w3mman2html.cgi?sshd">/usr/sbin/sshd</a></b>
       Client:
             <b>$</b> <b>gsocket</b> <b>-s</b> <b>MySecret</b> <b>ssh</b> <b>xaitax@gsocket</b>

       <b>Example</b> <b>2</b> - netcat between two firewalled workstations:

       Server:
             <b>$</b> <b>gsocket</b> <b>-s</b> <b>MySecret</b> <b>nc</b> <b>-lp</b> <b>31337</b>
       Client:
             <b>$</b> <b>gsocket</b> <b>-s</b> <b>MySecret</b> <b>nc</b> <b>gsocket</b> <b>31337</b>

       <b>Example</b> <b>3</b> - OpenVPN between two firewalled workstations:

       Server:
             <b>$</b> <b>gsocket</b> <b>-s</b> <b>MySecret</b> <b>openvpn</b> <b>--dev</b> <b>tun1</b> <b>--proto</b> <b>tcp-server</b> <b>--ifconfig</b> <b>10.9.8.1</b> <b>10.9.8.2</b>
       Client:
             <b>$</b>  <b>gsocket</b>  <b>-s</b> <b>MySecret</b> <b>openvpn</b> <b>--dev</b> <b>tun1</b> <b>--proto</b> <b>tcp-client</b> <b>--ifconfig</b> <b>10.9.8.2</b> <b>10.9.8.1</b> <b>--remote</b>
             <b>gsocket</b>

       <b>Example</b> <b>4</b> - IRCD between two firewalled workstations:

       Server:
             <b>$</b> <b>gsocket</b> <b>-s</b> <b>MySecret</b> <b>inspircd</b> <b>--nolog</b> <b>--nofork</b>
       Client:
             <b>$</b> <b>gsocket</b> <b>-s</b> <b>MySecret</b> <b>irssi</b> <b>-c</b> <b>gsocket</b>

       <b>Example</b> <b>5</b> - Socat between two firewalled workstations:

       Server:
             <b>$</b> <b>gsocket</b> <b>-s</b> <b>MySecret</b> <b>socat</b> <b>-</b> <b>TCP_LISTEN:31337</b>
       Client:
             <b>$</b> <b>gsocket</b> <b>-s</b> <b>MySecret</b> <b>socat</b> <b>-</b> <b>TCP:gsocket:31337</b>

</pre><h4><b>SYSTEMCTL</b> <b>INSTALLATION</b></h4><pre>
       It is possible to make any service/daemon accessible through any  firewall.  The  service  is  then  only
       acessible  through the GSRN and only if the client knows the secret. No port or service is exposed to the
       public Internet and the existence of the service remains hidden. This example makes openssh-server (sshd)
       accessible through the GSRN. Nobody, not even the GSRN operators, have access  to  the  port,  daemon  or
       service (they do not know the secret). The new service coexists with the existing openssh-server and does
       not interfere with the existing openssh-server.

       1. Copy /etc/systemd/system/sshd to /etc/systemd/system/gs-sshd

       2. Edit /etc/systemd/system/gs-sshd and change this line:
             <b>ExecStart=<a href="file:///usr/lib/w3m/cgi-bin/w3mman2html.cgi?sshd">/usr/sbin/sshd</a></b> <b>-D</b> <b>$SSHD_OPTS</b>
       to
             <b>ExecStart=gsocket</b> <b>-s</b> <b>MySecret</b> <b><a href="file:///usr/lib/w3m/cgi-bin/w3mman2html.cgi?sshd">/usr/sbin/sshd</a></b> <b>-D</b> <b>$SSHD_OPTS</b>

       3. Start the newly created service
             <b>#</b> <b>systemctl</b> <b>start</b> <b>gs-sshd</b>

       4. Check the status
             <b>#</b> <b>systemctl</b> <b>status</b> <b>gs-sshd</b>

       5. Connect from any other host to the newly created (hidden) openssh-server:
             <b>$</b> <b>gsocket</b> <b>-s</b> <b>MySecret</b> <b>ssh</b> <b>user@gsocket</b>

</pre><h4><b>TESTING</b></h4><pre>
       The  <b>gsocket</b>  tool  uses  the LD_PRELOAD method to hijack network calls from the calling process. It then
       concatenates the port number to the secret and spwans a gs-netcat process to forward the TCP  connection.
       The setup can be tested with gs-netcat.

       <b>Test</b> <b>1</b> - gsocket server and gs-netcat client:

       Server:
             <b>$</b> <b>gsocket</b> <b>-s</b> <b>MySecret</b> <b>nc</b> <b>-lp</b> <b>1234</b> <b>#</b> <b>TCP</b> <b>port</b> <b>is</b> <b>1234</b>
       Client:
             <b>$</b> <b>gs-netcat</b> <b>-s</b> <b>1234-MySecret</b> <b>#</b> <b>Notice</b> <b>`&lt;port&gt;-&lt;SECRET&gt;`</b>

       <b>Test</b> <b>2</b> - gsocket client and gs-netcat server:

       Server:
             <b>$</b> <b>gs-netcat</b> <b>-s</b> <b>1234-MySecret</b> <b>-l</b>
       Client:
             <b>$</b> <b>gsocket</b> <b>-s</b> <b>MySecret</b> <b>nc</b> <b>blah.gsocket</b> <b>1234</b>

       Internally  the  <b>gsocket</b>  tool  (on  the  client  side) forks a background gs-netcat process listening on
       127.31.33.7 on a random TCP port. The <b>gsocket</b> tool then detects `nc` trying to resolve `blah.gsocket` and
       returns 127.31.33.7 to `nc`. The `nc` process then connects to  127.31.33.7  instead  and  the  gs-netcat
       process  (that got started automatically) takes the connection and forwards the traffic via the GSRN. The
       `nc` tool can also directly connect to 127.31.33.7 instead of blah.gsocket (for testing):

       Client:
             <b>$</b> <b>gsocket</b> <b>-s</b> <b>MySecret</b> <b>nc</b> <b>-n</b> <b>127.31.33.7</b> <b>1234</b>

       <b>Test</b> <b>3</b> - SSHD via gsocket:

       Server:
             <b>$</b> <b>gsocket</b> <b>-s</b> <b>MySecret</b> <b><a href="file:///usr/lib/w3m/cgi-bin/w3mman2html.cgi?sshd">/usr/sbin/sshd</a></b> <b>-D</b> <b>-p</b> <b>1234</b>
       Client:
             <b>$</b> <b>gs-netcat</b> <b>-s</b> <b>1234-MySecret</b>
             <b>SSH-2.0-OpenSSH_8.4p1</b> <b>Debian-2</b>

       Use gs-netcat as a port-forwarder and ssh to connect:

       Client:
             <b>$</b> <b>gs-netcat</b> <b>-s</b> <b>1234-MySecret</b> <b>-p</b> <b>44222</b>
             <b>$</b> <b>ssh</b> <b>-p</b> <b>44222</b> <b><a href="mailto:user@127.1">user@127.1</a></b>

       <b>Test</b> <b>4</b> - SSH via gsocket:

       On the server start a gs-netcat port forward  to  forward  incoming  GSRN  connections  to  the  SSHD  on
       localhost:

       Server:
             <b>$</b> <b>gs-netcat</b> <b>-s</b> <b>22-MySecret</b> <b>-l</b> <b>-d</b> <b>127.0.0.1</b> <b>-p</b> <b>22</b>
       Client:
             <b>$</b> <b>gsocket</b> <b>-s</b> <b>MySecret</b> <b>ssh</b> <b>user@gsocket</b>

</pre><h4><b>ENVIRONMENT</b></h4><pre>
       The following environment variables can be set to control the behavior of <b>gsocket</b>

       <b>GSOCKET_SOCKS_IP</b>
             <b>Specify</b> <b>the</b> <b>IP</b> <b>address</b> <b>of</b> <b>the</b> <b>TOR</b> <b>server</b> <b>(or</b> <b>any</b> <b>other</b> <b>SOCKS</b> <b>server).</b> <b>Use</b> <b>together</b> <b>with</b> <b>-T.</b> <b>Default</b>
             <b>is</b> <b>127.0.0.1.</b>

       <b>GSOCKET_SOCKS_PORT</b>
             <b>The</b>  <b>port</b>  <b>number</b>  <b>of</b>  <b>the</b> <b>TOR</b> <b>server</b> <b>(or</b> <b>any</b> <b>other</b> <b>SOCKS</b> <b>server).</b> <b>Use</b> <b>together</b> <b>with</b> <b>-T.</b> <b>Default</b> <b>is</b>
             <b>9050.</b>

       <b>GSOCKET_ARGS</b>
             <b>A</b> <b>string</b> <b>containing</b> <b>additional</b> <b>command</b> <b>line</b> <b>parameters.</b> <b>First</b> <b>the</b> <b>normal</b>  <b>command</b>  <b>line</b>  <b>parameters</b>
             <b>are</b> <b>processed</b> <b>and</b> <b>then</b> <b>the</b> <b>command</b> <b>line</b> <b>parameters</b> <b>from</b> <b>GSOCKET_ARGS.</b>

</pre><h4><b>SECURITY</b></h4><pre>
       Passing  the  password  as  command  line  parameter  is  not  secure.  Consider  using  the -k option or
       GSOCKET_ARGS or enter the password when prompted:

             <b>$</b> <b>gsocket</b> <b>-k</b> <b>&lt;file&gt;</b>

             <b>$</b> <b>export</b> <b>GSOCKET_ARGS="-s</b> <b>MySecret"</b>
             <b>$</b> <b>gsocket</b>

       <b>1.</b> The security is end-2-end. This means from user-2-user (and not just to the  GSRN).  The  GSRN  relays
       only (encrypted) data to and from the users.

       <b>2.</b> The session is 256 bit and ephemeral. It is freshly generated for every session and generated randomly
       (and is not based on the password). It uses OpenSSL's SRP with AES-256 and a 4096 Prime.

       <b>3.</b> The password can be 'weak' without weakening the security of the session. A brute force attack against
       a weak password requires a new TCP connection for every guess.

       <b>4.</b> Do not use stupid passwords like 'password123'. Malice might pick the same (stupid) password by chance
       and  connect. If in doubt use gs-netcat -g to generate a strong one. Alice's and Bob's password should at
       least be strong enough so that Malice can not guess it by chance  while  Alice  is  waiting  for  Bob  to
       connect.

       <b>5.</b>  If Alice shares the same password with Bob and Charlie and either one of them connects then Alice can
       not tell if it is Bob or Charlie who connected.

       <b>6.</b> Assume Alice shares the same password with Bob and Malice. When Alice stops listening for a connection
       then Malice could start to listen for the connection instead. Bob (when opening a new connection) can not
       tell if he is connecting to Alice or to Malice. Use -a &lt;token&gt; if  you  worry  about  this.  TL;DR:  When
       sharing the same password with a group larger than 2 then it is assumed that everyone in that group plays
       nicely. Otherwise use SSH over the GS/TLS connection.

       <b>7.</b>  SRP  has  Perfect  Forward  Secrecy.  This  means that past sessions can not be decrypted even if the
       password becomes known.

</pre><h4><b>NOTES</b></h4><pre>
       The latest version is available from https://github.com/hackerschoice/gsocket/.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <u><a href="../man1/gs-netcat.1.html">gs-netcat</a>(1)</u>, <u><a href="../man1/gs-sftp.1.html">gs-sftp</a>(1)</u>, <u><a href="../man1/gs-mount.1.html">gs-mount</a>(1)</u>, <u><a href="../man1/blitz.1.html">blitz</a>(1)</u>, <u><a href="../man1/nc.1.html">nc</a>(1)</u>, <u><a href="../man1/socat.1.html">socat</a>(1)</u>

</pre><h4><b>BUGS</b></h4><pre>
       Efforts have been made to have <b>gsocket</b> "do the right thing" in all its various modes. If you believe that
       it is doing the wrong thing under whatever circumstances, please notify me (<a href="mailto:skyper@thc.org">skyper@thc.org</a>) and  tell  me
       how you think it should behave.

Debian                                           March 02, 2021                                       <u><a href="../man1/gsocket.1.html">gsocket</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>