<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>kas-credentials - kas credential handling</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/kas">kas_4.7-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       kas-credentials - kas credential handling

</pre><h4><b>CREDENTIAL</b> <b>HANDLING</b></h4><pre>
       kas  provides various mechanisms to inject credentials into the build.  By using <u>Environment</u> <u>Variables</u>, a
       fine grained control is possible. All credentials are made available both to KAS, as well as  inside  the
       build environment. However, not all mechanisms are natively supported by all tools.  As kas might need to
       modify credentials and config files, these are copied into the isolated environment first.

       <b>NOTE:</b>
          In  general,  file  based credentials (e.g. <b>.netrc</b>) are only copied if explicitly requested by setting
          the corresponding environment variable.  Environment  variable  based  credentials  are  automatically
          forwarded.

       For details about credential related environment variables, see <b><a href="../man1/kas.1.html">kas</a>(1)</b>.

   <b>AWS</b> <b>Configuration</b>
       For  AWS,  both  conventional  AWS  config files as well as the environment variable controlled OAuth 2.0
       workflow are supported. Note, that KAS internally rewrites the <b>AWS_*</b> environment  variables  into  a  AWS
       config file to also support older versions of bitbake.

   <b>Git</b> <b>Configuration</b>
       A  <b>.gitconfig</b>  file  can  be  used  to  provide  credentials  as well as url rewrites of git repositories
       (<b>insteadof</b>). In addition, credential helpers  can  be  used  by  setting  the  corresponding  environment
       variables.   These are added to the <b>.gitconfig</b> file as well. To support the patching of git repositories,
       kas injects a <b>[user]</b> section, possibly overwriting an existing one. After patching, the original user  is
       restored (if set).

       When  running  in  a  GitHub  Action  or  GitLab  CI  job, the <b>.gitconfig</b> file is automatically injected.
       Otherwise, the environment variable <b>GITCONFIG_FILE</b> needs to point to the <u>.gitconfig</u> kas should use.

   <b>GitHub</b> <b>Actions</b>
       In combination with the <u>webfactory/ssh-agent</u> action, this automatically makes  the  required  credentials
       available to kas and bitbake.

   <b>GitLab</b> <b>CI</b>
       When  running  in  the  GitLab  CI, the <b>CI_JOB_TOKEN</b> can be used to access git repositories via https. If
       <b>CI_SERVER_HOST</b> is also set, kas automatically adds this token to the <b>.netrc</b> file, where it is  picked  up
       by  git.  Further,  kas configures git to automatically rewrite the urls of the repositories to clone via
       https for repos stored on the same server. Technically this is achieved by adding  <u>insteadof</u>  entries  to
       the <b>.gitconfig</b> file.

       For backwards compatibility, the git rewrite rules are only added if <b>.gitconfig</b> does not exist and no SSH
       configuration is provided (either via the kas <b>SSH_</b> variables or using <b>.ssh/config</b>).

       If  the  <b>CI_REGISTRY</b>,  <b>CI_REGISTRY_USER</b>  and  <b>CI_JOB_TOKEN</b> variables are set, kas automatically creates a
       login file for the container registry at <b><a href="file:~/.docker/config.json">~/.docker/config.json</a></b>. This  file  is  compatible  with  docker,
       podman and even skopeo.

       <b>NOTE:</b>
          Make  sure  to  assign the correct permissions to the <b>CI_JOB_TOKEN</b>.  For details, see <u>GitLab</u> <u>CI/CD</u> <u>job</u>
          <u>token</u>.

   <b>Container</b> <b>Registry</b> <b>Authentication</b> <b>File</b>
       A file named <b>config.json</b> is  saved  as  <b>.docker/config.json</b>  in  the  kas  home  directory.  It  contains
       credentials  for  the  container  registry  login.   The  syntax is described in the <u>containers-auth.json</u>
       <u>specification</u>.  The authentication file is compatible with docker, podman and skopeo.   When  running  in
       the  GitLab  CI,  the  <b>CI_JOB_TOKEN</b>  is  appended  to  automatically  grant  access  according to the job
       permissions.

   <b>Netrc</b> <b>File</b>
       A <b>.netrc</b> file can be used to provide credentials for git or the HTTP(S) / FTP fetcher.  When  running  in
       the  GitLab  CI,  the  <b>CI_JOB_TOKEN</b> is appended to automatically grant access to repositories that can be
       accessed by the user that triggered the CI pipeline.

   <b>SSH</b>
       The ssh folder of the calling user is automatically shared with kas. This is currently not  controllable,
       as  ssh  does  not  obey the <b>$HOME</b> variable.  This can be used to inject both credentials, as well as ssh
       configuration items into the kas environment.

       <b>NOTE:</b>
          Modifications to the <b>.ssh/config</b> file are only performed if the file is not present yet.

       In addition, an external ssh-agent  can  be  made  available  in  the  kas  environment  by  setting  the
       <b>SSH_AUTH_SOCK</b>  environment variable.  As an alternative, ssh private keys can be added to an internal ssh
       agent by setting <b>SSH_PRIVATE_KEY</b> or <b>SSH_PRIVATE_KEY_FILE</b>.

       <b>NOTE:</b>
          The use of an external ssh agent cannot be combined with options that require an internal ssh agent.

</pre><h4><b>KAS</b></h4><pre>
       Part of the <b><a href="../man1/kas.1.html">kas</a>(1)</b> suite.

</pre><h4><b>AUTHOR</b></h4><pre>
       Daniel Wagner, Jan Kiszka, Claudius Heine

</pre><h4><b>COPYRIGHT</b></h4><pre>
       Siemens AG, 2017-2024

4.7                                               Feb 03, 2025                                <u><a href="../man1/KAS-CREDENTIALS.1.html">KAS-CREDENTIALS</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>