<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>kcapi-dgst - Kernel Crypto API Message Digest Crypto Helper</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/kcapi-tools">kcapi-tools_1.4.0-1ubuntu4_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       kcapi-dgst - Kernel Crypto API Message Digest Crypto Helper

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>kcapi-dgst</b> [<u>OPTION</u>]

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The  <u>kcapi-dgst</u>  application  provides  tool  to  use  the message digest as well as keyed message digest
       ciphers of the Linux kernel crypto API from the command line.

       The input data can be provided either via STDIN or via a file that is  referenced  with  a  command  line
       option.  Similarly, the output data can either be sent to a file referenced with a command line option or
       to STDOUT.

       The key used for the keyed message digest operation can either be provided via a file descriptor or via a
       password. When using a file descriptor, the provided data is taken directly as the keyed  message  digest
       key.  When providing a password, the <u>kcapi-dgst</u> application derives a 256 bit key from the password using
       PBKDF2.  PBKDF2 with HMAC-SHA256 as default transforms the password into a  key.   The  PBKDF2  operation
       requires two additional input values: a salt and an iteration count. Both can be provided via the command
       line.  If  the  iteration count is not specified, <u>kcapi-dgst</u> determines the iteration count internally by
       counting how many iterations are necessary to surpass 100ms operation  time.  The  determined  number  is
       provided via STDERR and must be re-used when verifying the keyed message digest created from the data. If
       the  salt is not provided via command line, <u>kcapi-dgst</u> generates a 256 bit salt and sends its hexadecimal
       representation to STDERR. This salt must be  used  during  decryption  to  ensure  the  PBKDF2  operation
       generates the correct key.

       The following options are supported when invoking <u>kcapi-dgst</u>:

       <b>-c</b>, <b>--cipher</b> <u>NAME</u>
              The  <u>NAME</u>  argument specifies the digest cipher to be used. The allowed ciphers are defined by the
              Linux kernel. Currently registered ciphers can be reviewed at <u><a href="file:/proc/crypto">/proc/crypto</a></u>.  The content  of  this
              file,  however, can change when new ciphers are registered. The <u>NAME</u> argument is given directly to
              the Linux kernel crypto API. The chosen cipher must be either of type <u>ahash</u> or of  type  <u>shash</u>  as
              marked in <u><a href="file:/proc/crypto">/proc/crypto</a></u>.

       <b>-i</b>, <b>--infile</b> <u>FILE</u>
              Use  the  file  referenced with <u>FILE</u> as the input data. If this option is not provided, <u>kcapi-dgst</u>
              expects the input data via STDIN.

       <b>-o</b>, <b>--outfile</b> <u>FILE</u>
              Use the file referenced with  <u>FILE</u>  as  the  destination  for  the  output  of  the  cryptographic
              operation. If this option is not provided, <u>kcapi-dgst</u> will provide the output via STDOUT.

       <b>--salt</b> <u>SALT</u>
              When  performing  the  PBKDF2  operation  to  obtain the key for the keyed message digest from the
              password, the <u>SALT</u> value is used as one input parameter. To ensure the same key is generated  from
              a given password, the same salt value must be used.

       <b>-p</b>, <b>--passwd</b> <u>PASSWORD</u>
              The  <u>PASSWORD</u>  parameter provides the password from which the keyed message digest key is derived.
              <b>WARNING</b> The password provided with the command line can be seen from other applications  or  users
              when  inspecting  the  <u><a href="file:/proc">/proc</a></u> file system! Thus, a password SHOULD NOT be used via the command line
              and the <u>passwdfd</u> option should be used instead.

       <b>--passwdfd</b> <u>FD</u>
              Instead of providing the password via command line, it can be injected  into  <u>kcapi-dgst</u>  using  a
              file descriptor. The file descriptor number the password will be send through can be provided with
              the <u>FD</u> option.

       <b>--pbkdfiter</b> <u>NUM</u>
              Perform  <u>NUM</u>  iterations  of  the PBKDF2 operation to derive the keyed message digest key. If this
              option is not supplied, <u>kcapi-dgst</u> determines a number of  iterations  that  is  large  enough  to
              surpass  100ms operational time for the PBKDF2 function. The determined iteration number is logged
              and must be reused if the same keyed message digest key is to be generated from the same password.

       <b>--pbkdfmac</b> <u>MAC</u>
              Use the keyed message digest referenced with <u>MAC</u> for the PBKDF2 operation. If this option  is  not
              supplied, the default of <u>hmac(sha256)</u> is used.

       <b>--keyfd</b> <u>FD</u>
              To  provide a keyed message digest key that is directly used for the message digest operation, the
              file descriptor referenced with <u>FD</u> must be used. Using a file descriptor is intentionally the only
              way to provide a key to <u>kcapi-dgst</u>.

       <b>--hex</b>  The generated message digest is print out in hexadecimal notation instead of as binary string.

       <b>-v</b>, <b>--verbose</b>
              Enable a verbose operation  of  <u>kcapi-dgst</u>.   Using  this  option  multiple  times  increases  the
              verbosity.

       <b>-q</b>, <b>--quiet</b>
              Prevent  the  generation  of  any  log  output.  Note,  some log output would be needed for proper
              operation like the display of the number of PBKDF2 iterations or the internally  generated  PBKDF2
              salt.   During quiet operation, none of this information is displayed.  Note, both information can
              also be supplied via the  command  line  so  that  <u>kcapi-dgst</u>  does  not  need  to  generate  this
              information.

       <b>-h</b>, <b>--help</b>
              Display the help text.

       <b>--version</b>
              Display the version number of the <u>kcapi-dgst</u> application.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man1/kcapi-enc.1.html">kcapi-enc</a></b>(1) <b><a href="../man1/kcapi-hasher.1.html">kcapi-hasher</a></b>(1) <b><a href="../man1/kcapi-rng.1.html">kcapi-rng</a></b>(1)

                                                   2017-08-14                                      <u><a href="../man1/KCAPI-DGST.1.html">KCAPI-DGST</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>