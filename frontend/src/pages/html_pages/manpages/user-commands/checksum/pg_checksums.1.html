<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>pg_checksums - enable, disable or check data checksums in a PostgreSQL database cluster</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/postgresql-17">postgresql-17_17.5-0ubuntu0.25.04.1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       pg_checksums - enable, disable or check data checksums in a PostgreSQL database cluster

</pre><h4><b>SYNOPSIS</b></h4><pre>

       <b>pg_checksums</b> [<u>option</u>...] [[<b>-D</b> | <b>--pgdata</b>]<u>datadir</u>]

</pre><h4><b>DESCRIPTION</b></h4><pre>
       pg_checksums checks, enables or disables data checksums in a PostgreSQL cluster. The server must be shut
       down cleanly before running pg_checksums. When verifying checksums, the exit status is zero if there are
       no checksum errors, and nonzero if at least one checksum failure is detected. When enabling or disabling
       checksums, the exit status is nonzero if the operation failed.

       When verifying checksums, every file in the cluster is scanned. When enabling checksums, each relation
       file block with a changed checksum is rewritten in-place. Disabling checksums only updates the file
       pg_control.

</pre><h4><b>OPTIONS</b></h4><pre>
       The following command-line options are available:

       <b>-D</b> <u>directory</u>
       <b>--pgdata=</b><u>directory</u>
           Specifies the directory where the database cluster is stored.

       <b>-c</b>
       <b>--check</b>
           Checks checksums. This is the default mode if nothing else is specified.

       <b>-d</b>
       <b>--disable</b>
           Disables checksums.

       <b>-e</b>
       <b>--enable</b>
           Enables checksums.

       <b>-f</b> <u>filenode</u>
       <b>--filenode=</b><u>filenode</u>
           Only validate checksums in the relation with filenode <u>filenode</u>.

       <b>-N</b>
       <b>--no-sync</b>
           By default, <b>pg_checksums</b> will wait for all files to be written safely to disk. This option causes
           <b>pg_checksums</b> to return without waiting, which is faster, but means that a subsequent operating system
           crash can leave the updated data directory corrupt. Generally, this option is useful for testing but
           should not be used on a production installation. This option has no effect when using --check.

       <b>-P</b>
       <b>--progress</b>
           Enable progress reporting. Turning this on will deliver a progress report while checking or enabling
           checksums.

       <b>--sync-method=</b><u>method</u>
           When set to fsync, which is the default, <b>pg_checksums</b> will recursively open and synchronize all files
           in the data directory. The search for files will follow symbolic links for the WAL directory and each
           configured tablespace.

           On Linux, syncfs may be used instead to ask the operating system to synchronize the whole file
           systems that contain the data directory, the WAL files, and each tablespace. See
           recovery_init_sync_method for information about the caveats to be aware of when using syncfs.

           This option has no effect when <b>--no-sync</b> is used.

       <b>-v</b>
       <b>--verbose</b>
           Enable verbose output. Lists all checked files.

       <b>-V</b>
       <b>--version</b>
           Print the pg_checksums version and exit.

       <b>-?</b>
       <b>--help</b>
           Show help about pg_checksums command line arguments, and exit.

</pre><h4><b>ENVIRONMENT</b></h4><pre>
       <b>PGDATA</b>
           Specifies the directory where the database cluster is stored; can be overridden using the <b>-D</b> option.

       <b>PG_COLOR</b>
           Specifies whether to use color in diagnostic messages. Possible values are always, auto and never.

</pre><h4><b>NOTES</b></h4><pre>
       Enabling checksums in a large cluster can potentially take a long time. During this operation, the
       cluster or other programs that write to the data directory must not be started or else data loss may
       occur.

       When using a replication setup with tools which perform direct copies of relation file blocks (for
       example <b><a href="../man1/pg_rewind.1.html">pg_rewind</a></b>(1)), enabling or disabling checksums can lead to page corruptions in the shape of
       incorrect checksums if the operation is not done consistently across all nodes. When enabling or
       disabling checksums in a replication setup, it is thus recommended to stop all the clusters before
       switching them all consistently. Destroying all standbys, performing the operation on the primary and
       finally recreating the standbys from scratch is also safe.

       If pg_checksums is aborted or killed while enabling or disabling checksums, the cluster's data checksum
       configuration remains unchanged, and pg_checksums can be re-run to perform the same operation.

PostgreSQL 17.5                                       2025                                       <u><a href="../man1/PG_CHECKSUMS.1.html">PG_CHECKSUMS</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>