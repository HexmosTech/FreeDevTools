<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>borg-recreate - Re-create archives</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/jammy/+package/borgbackup">borgbackup_1.2.0-1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       borg-recreate - Re-create archives

</pre><h4><b>SYNOPSIS</b></h4><pre>
       borg [common options] recreate [options] [REPOSITORY_OR_ARCHIVE] [PATH...]

</pre><h4><b>DESCRIPTION</b></h4><pre>
       Recreate the contents of existing archives.

       recreate  is  a  potentially  dangerous  function  and might lead to data loss (if used wrongly). BE VERY
       CAREFUL!

       Important: Repository disk space is <b>not</b> freed until you run <b>borg</b> <b>compact</b>.

       <b>--exclude</b>, <b>--exclude-from</b>,  <b>--exclude-if-present</b>,  <b>--keep-exclude-tags</b>  and  PATH  have  the  exact  same
       semantics  as  in  "borg create", but they only check for files in the archives and not in the local file
       system. If PATHs are specified, the resulting archives will only contain files from these PATHs.

       Note that all paths in an  archive  are  relative,  therefore  absolute  patterns/paths  will  <u>not</u>  match
       (<b>--exclude</b>, <b>--exclude-from</b>, PATHs).

       <b>--recompress</b>  allows  one to change the compression of existing data in archives.  Due to how Borg stores
       compressed size information this might display incorrect information for archives that were not recreated
       at the same time.  There is no risk of data loss by this.

       <b>--chunker-params</b> will re-chunk all files in the archive, this can be used to have upgraded Borg  0.xx  or
       Attic archives deduplicate with Borg 1.x archives.

       <b>USE</b>  <b>WITH</b> <b>CAUTION.</b>  Depending on the PATHs and patterns given, recreate can be used to permanently delete
       files from archives.  When in doubt, use  <b>--dry-run</b>  <b>--verbose</b>  <b>--list</b>  to  see  how  patterns/PATHS  are
       interpreted. See <u>list_item_flags</u> in <b>borg</b> <b>create</b> for details.

       The  archive  being  recreated  is  only removed after the operation completes. The archive that is built
       during the operation exists at the same time  at  "&lt;ARCHIVE&gt;.recreate".  The  new  archive  will  have  a
       different archive ID.

       With <b>--target</b> the original archive is not replaced, instead a new archive is created.

       When  rechunking  (or  recompressing),  space  usage  can  be  substantial  -  expect at least the entire
       deduplicated size of the archives using the previous chunker (or compression) params.

       If you recently ran borg check --repair and it had to fix lost chunks with all-zero  replacement  chunks,
       please  first  run another backup for the same data and re-run borg check --repair afterwards to heal any
       archives that had lost chunks which are still generated from the input data.

       Important: running borg recreate to re-chunk will remove the chunks_healthy metadata of  all  items  with
       replacement  chunks,  so  healing will not be possible any more after re-chunking (it is also unlikely it
       would ever work: due to the change of chunking parameters, the missing chunk likely will  never  be  seen
       again even if you still have the data that produced it).

</pre><h4><b>OPTIONS</b></h4><pre>
       See <u><a href="../man1/borg-common.1.html">borg-common</a>(1)</u> for common options of Borg commands.

   <b>arguments</b>
       <b>REPOSITORY_OR_ARCHIVE</b>
              repository or archive to recreate

       <b>PATH</b>   paths to recreate; patterns are supported

   <b>optional</b> <b>arguments</b>
       <b>--list</b> output verbose list of items (files, dirs, ...)

       <b>--filter</b> <u>STATUSCHARS</u>
              only display items with the given status characters (listed in borg create --help)

       <b>-n</b>, <b>--dry-run</b>
              do not change anything

       <b>-s</b>, <b>--stats</b>
              print statistics at end

   <b>Exclusion</b> <b>options</b>
       <b>-e</b> <u>PATTERN</u>, <b>--exclude</b> <u>PATTERN</u>
              exclude paths matching PATTERN

       <b>--exclude-from</b> <u>EXCLUDEFILE</u>
              read exclude patterns from EXCLUDEFILE, one per line

       <b>--pattern</b> <u>PATTERN</u>
              include/exclude paths matching PATTERN

       <b>--patterns-from</b> <u>PATTERNFILE</u>
              read include/exclude patterns from PATTERNFILE, one per line

       <b>--exclude-caches</b>
              exclude directories that contain a CACHEDIR.TAG file (<u><a href="http://www.bford.info/cachedir/spec.html">http://www.bford.info/cachedir/spec.html</a></u>)

       <b>--exclude-if-present</b> <u>NAME</u>
              exclude directories that are tagged by containing a filesystem object with the given NAME

       <b>--keep-exclude-tags</b>
              if tag objects are specified with <b>--exclude-if-present</b>, don't omit the tag objects themselves from
              the backup archive

   <b>Archive</b> <b>options</b>
       <b>--target</b> <u>TARGET</u>
              create  a  new  archive with the name ARCHIVE, do not replace existing archive (only applies for a
              single archive)

       <b>-c</b> <u>SECONDS</u>, <b>--checkpoint-interval</b> <u>SECONDS</u>
              write checkpoint every SECONDS seconds (Default: 1800)

       <b>--comment</b> <u>COMMENT</u>
              add a comment text to the archive

       <b>--timestamp</b> <u>TIMESTAMP</u>
              manually specify the archive creation date/time (UTC, yyyy-mm-ddThh:mm:ss format).  alternatively,
              give a reference file/directory.

       <b>-C</b> <u>COMPRESSION</u>, <b>--compression</b> <u>COMPRESSION</u>
              select compression algorithm, see the output of the "borg help compression" command for details.

       <b>--recompress</b> <u>MODE</u>
              recompress  data  chunks  according  to  <u>MODE</u>  and <b>--compression</b>. Possible modes are <u>if-different</u>:
              recompress if current compression is with a different compression  algorithm  (the  level  is  not
              considered); <u>always</u>: recompress even if current compression is with the same compression algorithm
              (use  this  to  change  the  compression  level); and <u>never</u>: do not recompress (use this option to
              explicitly prevent recompression). If no MODE is given, <u>if-different</u> will  be  used.  Not  passing
              --recompress is equivalent to "--recompress never".

       <b>--chunker-params</b> <u>PARAMS</u>
              specify    the   chunker   parameters   (ALGO,   CHUNK_MIN_EXP,   CHUNK_MAX_EXP,   HASH_MASK_BITS,
              HASH_WINDOW_SIZE) or <u>default</u> to use the current defaults. default: buzhash,19,23,21,4095

</pre><h4><b>EXAMPLES</b></h4><pre>
          # Make old (Attic / Borg 0.xx) archives deduplicate with Borg 1.x archives.
          # Archives created with Borg 1.1+ and the default chunker params are skipped
          # (archive ID stays the same).
          $ borg recreate /mnt/backup --chunker-params default --progress

          # Create a backup with little but fast compression
          $ borg create /mnt/backup::archive /some/files --compression lz4
          # Then compress it - this might take longer, but the backup has already completed,
          # so no inconsistencies from a long-running backup job.
          $ borg recreate /mnt/backup::archive --recompress --compression zlib,9

          # Remove unwanted files from all archives in a repository.
          # Note the relative path for the --exclude option - archives only contain relative paths.
          $ borg recreate /mnt/backup --exclude home/icke/Pictures/drunk_photos

          # Change archive comment
          $ borg create --comment "This is a comment" /mnt/backup::archivename ~
          $ borg info /mnt/backup::archivename
          Name: archivename
          Fingerprint: ...
          Comment: This is a comment
          ...
          $ borg recreate --comment "This is a better comment" /mnt/backup::archivename
          $ borg info /mnt/backup::archivename
          Name: archivename
          Fingerprint: ...
          Comment: This is a better comment
          ...

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <u><a href="../man1/borg-common.1.html">borg-common</a>(1)</u>, <u><a href="../man1/borg-patterns.1.html">borg-patterns</a>(1)</u>, <u><a href="../man1/borg-placeholders.1.html">borg-placeholders</a>(1)</u>, <u><a href="../man1/borg-compression.1.html">borg-compression</a>(1)</u>

</pre><h4><b>AUTHOR</b></h4><pre>
       The Borg Collective

                                                   2022-02-19                                   <u><a href="../man1/BORG-RECREATE.1.html">BORG-RECREATE</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>