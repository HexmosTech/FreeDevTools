<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ipmctl-create-goal - Creates a memory allocation goal on one or more PMem modules</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/ipmctl">ipmctl_03.00.00.0485-1build1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       ipmctl-create-goal - Creates a memory allocation goal on one or more PMem modules

</pre><h4><b>SYNOPSIS</b></h4><pre>
           ipmctl create [OPTIONS] -goal [TARGETS] [PROPERTIES]

</pre><h4><b>DESCRIPTION</b></h4><pre>
       Creates a memory allocation goal on one or more for the BIOS to read on the next reboot in order to map
       the PMem module capacity into the system address space. Persistent memory can then be utilized by
       creating a namespace.

           <b>Note</b>

           The capacity values presented by this command are a target goal or request to platform firmware. The
           actual capacity values are subject to change due to rounding and alignment requirements. If the goal
           request is invalid or not possible it may be rejected by platform firmware.

           <b>Note</b>

           Deleting the PCD can be used as a way to prepare individual PMem modules for provisioning. See the
           delete -pcd command.

           <b>Warning</b>

           <b>This</b> <b>command</b> <b>may</b> <b>result</b> <b>in</b> <b>data</b> <b>loss.</b> <b>Data</b> <b>should</b> <b>be</b> <b>backed</b> <b>up</b> <b>to</b> <b>other</b> <b>storage</b> <b>before</b> <b>executing</b> <b>this</b>
           <b>command</b>.

           <b>Note</b>

           Changing a memory allocation goal modifies how the platform firmware maps persistent memory in the
           System Physical Address space (SPA) which may result in data loss or inaccessible data, but does not
           explicitly delete or modify user data found in persistent memory.

</pre><h4><b>OPTIONS</b></h4><pre>
       -f, -force
              Reconfiguring PMem modules is a destructive operation which requires confirmation from the user.
           This option suppresses the confirmation. This option can also be used to recover/override corrupted
           Platform Configuration Data (PCD). The force flag will also suppress the security enabled warning as
           well as all other warning prompts.

       -h, -help
           Displays help for the command.

       -ddrt
           Used to specify DDRT as the desired transport protocol for the current invocation of ipmctl.

       -smbus
           Used to specify SMBUS as the desired transport protocol for the current invocation of ipmctl.

           <b>Note</b>

           The -ddrt and -smbus options are mutually exclusive and may not be used together.

       -o (text|nvmxml), -output (text|nvmxml)
           Changes the output format. One of: "text" (default) or "nvmxml". The "nvmxml" format implies the
           "-force" flag.

       -u (B|MB|MiB|GB|GiB|TB| TiB), -units (B|MB|MiB|GB|GiB|TB| TiB)
           Changes the units that capacities are displayed in for this command. One of: bytes (B), megabytes
           (MB), mebibytes (MiB), gigabytes (GB), gibibytes (GiB), terabytes (TB) or tebibytes (TiB).

</pre><h4><b>TARGETS</b></h4><pre>
       -dimm [DimmIDs]
           Creates a memory allocation goal on specific PMem modules by optionally supplying one or more comma
           separated PMem module identifiers. This list must meet one of the following criteria:

            1. Target all PMem modules on a given socket.

               •   For example, all PMem modules located within a single socket may be specified together using
                   the dimm target.

            2. Target all unconfigured PMem modules

               •   For example, when PMem modules have had their PCD deleted, then these PMem modules may all be
                   specified together using the dimm target.

            3. Target PMem modules for 100% MemoryMode with all unspecified PMem modules configured for
               MemoryMode only

               •   For example, when existing PMem modules are 100% MM, then any newly added PMem modules may
                   all be specified together using the dimm target and configured as 100% MM to match the
                   existing configuration.

            4. Target PMem modules for App Direct Not Interleaved with all unspecified PMem modules configured
               for App Direct Not Interleaved only

               •   For example, when existing PMem modules are 100% App Direct Not Interleaved, then any newly
                   added PMem modules may all be specified together using the dimm target and configured as 100%
                   App Direct Not Interleaved to match the existing configuration.

               <b>Note</b>

               If the dimm target is not specified, the default is to configure all manageable PMem modules on
               all sockets.

       -socket [SocketIDs]
           Loads the memory allocation goal onto all manageable PMem modules on specific sockets by supplying
           the socket target and one or more comma separated socket identifiers. The default is to load the
           memory allocation goal onto all manageable PMem modules on all sockets.

</pre><h4><b>PROPERTIES</b></h4><pre>
       MemoryMode
           Percentage of the total capacity to use in Memory Mode (0-100). Default = 0.

       PersistentMemoryType
           If MemoryMode is not 100%, the type of persistent memory to create.

           •   "AppDirect": (Default) Create App Direct capacity utilizing hardware interleaving across the
               requested PMem modules if applicable given the specified target.

           •   "AppDirectNotInterleaved": Create App Direct capacity that is not interleaved any other PMem
               modules.

       NamespaceLabelVersion
           The version of the namespace label storage area (LSA) index block

           •   "1.2": (Default) Defined in UEFI 2.7a - sections 13.19

           •   "1.1": Legacy 1.1 namespace label support

       Reserved
           Reserve a percentage (0-100) of the requested PMem module App Direct capacity that will not be mapped
           into the system physical address space and will be presented as Reserved Capacity with [Show Dimm]
           and [Show Memory Resources] commands.

</pre><h4><b>EXAMPLES</b></h4><pre>
       Configures all the PMem module capacity in Memory Mode.

           ipmctl create -goal MemoryMode=100

       Configures all the PMem module capacity as App Direct.

           ipmctl create -goal PersistentMemoryType=AppDirect

       Configures the capacity on each PMem module with 20% of the capacity in Memory Mode and the remaining as
       App Direct capacity that does not use hardware interleaving.

           ipmctl create -goal MemoryMode=20 PersistentMemoryType=AppDirectNotInterleaved

       Configures the PMem module capacity across the entire system with 25% of the capacity in Memory Mode, 25%
       reserved and the remaining 50% as App Direct. Configures the PMem module capacity across the entire
       system with 25% of the capacity in Memory Mode and the remaining 75% as App Direct.

           ipmctl create -goal MemoryMode=25 PersistentMemoryType=AppDirect Reserved=25

</pre><h4><b>LIMITATIONS</b></h4><pre>
       In order to successfully execute this command:

       •   The caller must have the appropriate privileges.

       •   The specified PMem modules must be manageable by the host software and must all have the same SKU.

       •   SKU based maximum total mapped memory is enforced. See section [CPU Maximum Mapped Memory Limiting].

       •   If no PMem modules are specified, all PMem modules in a non-functional or unmanageable state will not
           be included in the goal’s creation.

       •   If the goal request is for an interleaved set, PMem modules in population violation will not be
           included in the goal’s creation.

       •   Existing memory allocation goals that have not been applied and any namespaces associated with the
           requested PMem modules must be deleted before running this command.

       •   Goal requests may not be applied by platform firmware (BIOS) if the PMem module is in security
           enabled, locked state.

           <b>Note</b>

           It is recommended to disable security prior to reboot if requesting a new goal.

           <b>Note</b>

           A goal request may be initiated even if a target PMem module is in security state enabled, but care
           must be taken to ensure the PMem module is in either unlocked or disabled security state prior to the
           platform firmware (BIOS) provisioning flow following a reboot. In addition, a warning will be
           presented to the user: <u>WARNING:</u> <u>Goal</u> <u>will</u> <u>not</u> <u>be</u> <u>applied</u> <u>unless</u> <u>security</u> <u>is</u> <u>disabled</u> <u>prior</u> <u>to</u>
           <u>platform</u> <u>firmware</u> <u>(BIOS)</u> <u>provisioning!</u>

       •   Changing the memory configuration is a destructive operation which results in loss of data stored in
           the persistent memory region. Therefore, data should be backed up to other storage before executing
           this command. Targets may be limited to individual PMem modules or sockets, but all PMem modules on
           affected sockets must be configured when the command finishes. If the selected targets make this
           impossible, the command will be rejected. Refer to [Show System Capabilities] for a list of BIOS
           supported modes.

       •   Some requests are dependent on BIOS and/or platform configuration. For details, see the <u>Intel®</u>
           <u>Optane™</u> <u>DC</u> <u>Persistent</u> <u>Memory</u> <u>Software</u> <u>Memory</u> <u>Allocation</u> <u>Rules</u> <u>for</u> <u>Windows,</u> <u>Linux</u> <u>and</u> <u>UEFI</u>, document
           number 564194. For example:

           •   Provisioning PMem modules for Memory Mode while BIOS is configured for 1LM only will result in
               unused capacity.

           •   Provisioning PMem modules for Memory Mode while not all iMCs have at least one PMem module will
               result in unused capacity.

       •   PMem modules in population violation can be targeted for goal creation only if
           PersistentMemoryType=AppDirectNotInterleaved and no volatile memory is requested (100% ADx1).

</pre><h4><b>RETURN</b> <b>DATA</b></h4><pre>
       Minor adjustments (up to 10%) in the requested capacities are sometimes necessary to align properly
       according to the platform rules. There are also some situations that require additional confirmation from
       the user because they may result in a non- optimal configuration (i.e., reduced performance). These are
       described below.:

       <b>The</b> <b>requested</b> <b>goal</b> <b>may</b> <b>result</b> <b>in</b> <b>a</b> <b>non-optimal</b> <b>configuration</b> <b>due</b> <b>to</b> <b>the</b> <b>population</b> <b>of</b> <b>PMem</b> <b>modules</b> <b>in</b> <b>the</b>
       <b>system.</b>
       Memory Mode capacity requested but the population of DRAM DIMMs and PMem modules in the system may result
       in reduced performance (i.e., the ratio of DRAM and PMem modules is not balanced, DRAM and PMem modules
       are not on the same channel or not all the same size).

       <b>The</b> <b>requested</b> <b>goal</b> <b>may</b> <b>result</b> <b>in</b> <b>a</b> <b>non-optimal</b> <b>configuration</b> <b>due</b> <b>to</b> <b>the</b> <b>population</b> <b>of</b> <b>PMem</b> <b>modules</b> <b>in</b> <b>the</b>
       <b>system.</b>
       App Direct capacity requested but the population of PMem modules in the system may result in reduced
       performance (i.e., PMem modules are not the same size or populated asymmetrically across the socket).

       <b>The</b> <b>requested</b> <b>goal</b> <b>will</b> <b>result</b> <b>in</b> <b>App</b> <b>Direct</b> <b>capacity</b> <b>which</b> <b>is</b> <b>not</b> <b>supported</b> <b>by</b> <b>the</b> <b>host</b> <b>software.</b>
       App Direct capacity requested but App Direct is not supported by the currently installed host software.

       <b>The</b> <b>requested</b> <b>goal</b> <b>will</b> <b>result</b> <b>in</b> <b>Memory</b> <b>Mode</b> <b>capacity</b> <b>that</b> <b>is</b> <b>unusable</b> <b>with</b> <b>the</b> <b>currently</b> <b>selected</b>
       <b>platform</b> <b>BIOS</b> <b>volatile</b> <b>mode.</b>
       Memory Mode capacity requested by the platform BIOS is currently set to 1LM Mode.

       <b>The</b> <b>requested</b> <b>goal</b> <b>was</b> <b>adjusted</b> <b>more</b> <b>than</b> <b>10%</b> <b>to</b> <b>find</b> <b>a</b> <b>valid</b> <b>configuration.</b>
       &gt; 10% adjustment from the requested goal

       <b>The</b> <b>amount</b> <b>of</b> <b>mapped</b> <b>memory</b> <b>was</b> <b>limited</b> <b>based</b> <b>on</b> <b>the</b> <b>SKU</b> <b>resulting</b> <b>in</b> <b>un-mapped</b> <b>capacity.</b>
       Mapped memory was limited based on the CPU SKU.

       Therefore, before making any changes to the configuration, a prompt is displayed showing the memory
       allocation goals that will be created on each PMem module as documented in the command Section [Show
       Memory Allocation Goal], along with any additional confirmation messages. The force option can be used to
       override this confirmation and proceed directly with creating the goals.

           The following configuration will be applied:
           SocketID DimmID MemorySize AppDirect1Size AppDirect2Size (Refer to
           the command Section &lt;&lt;Show Memory Allocation Goal&gt;&gt;)
           [Additional Confirmation Messages (see above)] Do you want to
           continue?

ipmctl                                             2024-04-22                              <u><a href="../man1/IPMCTL-CREATE-GOAL.1.html">IPMCTL-CREATE-GOAL</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>