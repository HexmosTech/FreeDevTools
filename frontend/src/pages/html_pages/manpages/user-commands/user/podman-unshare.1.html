<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>podman-unshare - Run a command inside of a modified user namespace</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/podman">podman_5.4.1+ds1-1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       podman-unshare - Run a command inside of a modified user namespace

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>podman</b> <b>unshare</b> [<u>options</u>] [<u>command</u>]

</pre><h4><b>DESCRIPTION</b></h4><pre>
       Launches a process (by default, <u>$SHELL</u>) in a new user namespace. The user namespace is configured so that
       the  invoking  user's  UID  and primary GID appear to be UID 0 and GID 0, respectively.  Any ranges which
       match that user and group in <b><a href="file:/etc/subuid">/etc/subuid</a></b> and <b><a href="file:/etc/subgid">/etc/subgid</a></b> are also mapped in as themselves with  the  help
       of the <u><a href="../man1/newuidmap.1.html">newuidmap</a>(1)</u> and <u><a href="../man1/newgidmap.1.html">newgidmap</a>(1)</u> helpers.

       <b>podman</b>  <b>unshare</b>  is  useful for troubleshooting unprivileged operations and for manually clearing storage
       and other data related to images and containers.

       It is also useful to use the <b>podman</b> <b>mount</b> command.  If an unprivileged user wants to mount and work  with
       a  container,  then  they  need to execute <b>podman</b> <b>unshare</b>.  Executing <b>podman</b> <b>mount</b> fails for unprivileged
       users unless the user is running inside a <b>podman</b> <b>unshare</b> session.

       The unshare session defines two environment variables:

              • <b>CONTAINERS_GRAPHROOT</b>: the path to the persistent container's data.

              • <b>CONTAINERS_RUNROOT</b>: the path to the volatile container's data.

       <u>IMPORTANT:</u> <u>This</u> <u>command</u> <u>is</u> <u>not</u> <u>available</u> <u>with</u> <u>the</u> <u>remote</u> <u>Podman</u> <u>client.</u>

</pre><h4><b>OPTIONS</b></h4><pre>
   <b>--help,</b> <b>-h</b>
       Print usage statement

   <b>--rootless-netns</b>
       Join the rootless network namespace used for netavark networking. It can be used to connect to a rootless
       container via IP address (bridge networking). This is  otherwise  not  possible  from  the  host  network
       namespace.

</pre><h4><b>Exit</b> <b>Codes</b></h4><pre>
       The  exit  code  from  <b>podman</b>  <b>unshare</b>  gives information about why the container failed to run or why it
       exited.  When <b>podman</b> <b>unshare</b> commands exit with a  non-zero  code,  the  exit  codes  follow  the  <b>chroot</b>
       standard, see below:

       <b>125</b> The error is with podman <u>itself</u>

       $ podman unshare --foo; echo $?
       Error: unknown flag: --foo
       125

       <b>126</b> Executing a <u>contained</u> <u>command</u> and the <u>command</u> cannot be invoked

       $ podman unshare <a href="file:/etc">/etc</a>; echo $?
       Error: fork/exec <a href="file:/etc">/etc</a>: permission denied
       126

       <b>127</b> Executing a <u>contained</u> <u>command</u> and the <u>command</u> cannot be found

       $ podman unshare foo; echo $?
       Error: fork/exec /usr/bin/bogus: no such file or directory
       127

       <b>Exit</b> <b>code</b> <u>contained</u> <u>command</u> exit code

       $ podman unshare <a href="file:/bin/sh">/bin/sh</a> -c 'exit 3'; echo $?
       3

</pre><h4><b>EXAMPLE</b></h4><pre>
       Execute specified command in rootless user namespace:

       $ podman unshare id
       uid=0(root) gid=0(root) groups=0(root),65534(nobody)

       Show user namespace mappings for rootless containers:

       $ podman unshare cat <a href="file:/proc/self/uid_map">/proc/self/uid_map</a> <a href="file:/proc/self/gid_map">/proc/self/gid_map</a>
                0       1000          1
                1      10000      65536
                0       1000          1
                1      10000      65536

       Show rootless netns information in user namespace for rootless containers:

       $ podman unshare --rootless-netns ip addr
       1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1000
           link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
           inet 127.0.0.1/8 scope host lo
              valid_lft forever preferred_lft forever
           inet6 ::1/128 scope host
              valid_lft forever preferred_lft forever
       2: tap0: &lt;BROADCAST,UP,LOWER_UP&gt; mtu 65520 qdisc fq_codel state UNKNOWN group default qlen 1000
           link/ether aa:8c:0b:73:98:f6 brd ff:ff:ff:ff:ff:ff
           inet 10.0.2.100/24 brd 10.0.2.255 scope global tap0
              valid_lft forever preferred_lft forever
           inet6 fd00::a88c:bff:fe73:98f6/64 scope global dynamic mngtmpaddr
              valid_lft 86389sec preferred_lft 14389sec
           inet6 fe80::a88c:bff:fe73:98f6/64 scope link
              valid_lft forever preferred_lft forever

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man1/podman.1.html">podman</a>(1)</b>, <b><a href="../man1/podman-mount.1.html">podman-mount</a>(1)</b>, <b><a href="../man7/namespaces.7.html">namespaces</a>(7)</b>, <b><a href="../man1/newuidmap.1.html">newuidmap</a>(1)</b>, <b><a href="../man1/newgidmap.1.html">newgidmap</a>(1)</b>, <b><a href="../man7/user_namespaces.7.html">user_namespaces</a>(7)</b>

                                                                                               <u><a href="../man1/podman-unshare.1.html">podman-unshare</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>